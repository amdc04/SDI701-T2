(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"+Kou":function(e,t,i){"use strict";i.d(t,"a",function(){return f});var a=i("dTHz"),c=i("2p4s"),n=i("c3rA"),o=i("o7Ov"),s=i("hr9B"),r=i("fXoL"),l=i("Jf2N"),u=i("l7P3"),d=i("ofXK");const m=function(e){return{"cu-layout-style-modal__item_active":e}};function h(e,t){if(1&e){const e=r.dc();r.ac(0),r.cc(1,"div",4),r.qc("click",function(){r.Uc(e);const t=r.uc();return t.setLayoutVersion(t.LayoutVersion.Six)}),r.vc(2,"async"),r.cc(3,"div",5),r.gc(4,21),r.bc(),r.cc(5,"div",7),r.gc(6,22),r.bc(),r.bc(),r.Zb()}if(2&e){const e=r.uc();let t=null;r.Ib(1),r.Dc("ngClass",r.Hc(3,m,(null==(t=r.wc(2,1,e.user$))?null:t.dashboard)===e.LayoutVersion.Six))}}function p(e,t){1&e&&(r.cc(0,"div",0),r.ac(1),r.gc(2,23),r.Zb(),r.dd(3,":\n"),r.bc()),2&e&&r.Dc("@loading",void 0)}const b=function(e){return{"cu-layout-style-modal__size_active":e}};function g(e,t){if(1&e){const e=r.dc();r.cc(0,"div",2),r.cc(1,"div",24),r.qc("click",function(){r.Uc(e);const t=r.uc();return t.setLayoutSize(t.LayoutSize.Compact)}),r.vc(2,"async"),r.cc(3,"div",25),r.tc(),r.cc(4,"svg",26),r.Xb(5,"path",27),r.bc(),r.bc(),r.sc(),r.cc(6,"div",28),r.gc(7,29),r.bc(),r.bc(),r.cc(8,"div",24),r.qc("click",function(){r.Uc(e);const t=r.uc();return t.setLayoutSize(t.LayoutSize.Default)}),r.vc(9,"async"),r.cc(10,"div",25),r.tc(),r.cc(11,"svg",30),r.Xb(12,"path",31),r.bc(),r.bc(),r.sc(),r.cc(13,"div",28),r.gc(14,32),r.bc(),r.bc(),r.cc(15,"div",24),r.qc("click",function(){r.Uc(e);const t=r.uc();return t.setLayoutSize(t.LayoutSize.Large)}),r.vc(16,"async"),r.cc(17,"div",25),r.tc(),r.cc(18,"svg",33),r.Xb(19,"path",34),r.bc(),r.bc(),r.sc(),r.cc(20,"div",28),r.gc(21,35),r.bc(),r.bc(),r.bc()}if(2&e){const e=r.uc();let t=null,i=null,a=null;r.Dc("@loading",void 0),r.Ib(1),r.Dc("ngClass",r.Hc(10,b,(null==(t=r.wc(2,4,e.user$))?null:t.dashboard_size)===e.LayoutSize.Compact)),r.Ib(7),r.Dc("ngClass",r.Hc(12,b,(null==(i=r.wc(9,6,e.user$))?null:i.dashboard_size)===e.LayoutSize.Default)),r.Ib(7),r.Dc("ngClass",r.Hc(14,b,(null==(a=r.wc(16,8,e.user$))?null:a.dashboard_size)===e.LayoutSize.Large))}}let f=(()=>{class e{constructor(e,t){this.modalService=e,this.store=t,this.user$=this.store.select(n.getUser),this.simpleLayoutAvailable=c.a.simpleLayout,this.LayoutVersion=a.b,this.LayoutSize=a.a}setLayoutVersion(e){this.store.dispatch(new o.om({dashboard:e}))}setLayoutSize(e){this.store.dispatch(new o.om({dashboard_size:e}))}closeModal(){this.modalService.close()}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(l.a),r.Wb(u.Store))},e.\u0275cmp=r.Qb({type:e,selectors:[["cu-layout-style-modal"]],decls:31,vars:17,consts:function(){let e,t,i,a,c,n,o,s,r,l,u,d,m;return e=$localize`:@@cu-layout-style-modal__style␟2a607b45b6dae6204381370231434e17418a9b68␟1372410907424845911:STYLE`,t=$localize`:layout style option@@cu-layout-style-modal__style_clean␟7d65d6ec8360234d27adcc3144f83ceb90d67a7c␟5071200442940160967: Clean `,i=$localize`:layout style option
        description@@cu-layout-style-modal__style_clean-description␟336385b22a4a1f570f51fec14f546fb298ed0f40␟8061944676991228147: Clean, separated Spaces `,a=$localize`:layout style option@@cu-layout-style-modal__style_modern␟bcd4518fd2215bcf6dde2d4ace365394e15e3f58␟8476058913008322817: Modern `,c=$localize`:layout style option
        description@@cu-layout-style-modal__style_modern-description␟0ce1b9deb9e1c980ed8d6647c6191b88692f30a9␟5295245882666911670: Clean, No separation of Spaces `,n=$localize`:@@cu-layout-style-modal__feature-notice␟4511eba5606a2f47f1f81433c7c7c52a63fea64b␟1009052376241299585:${"\ufffd#27\ufffd"}:START_TAG_SPAN:Important:${"\ufffd/#27\ufffd"}:CLOSE_TAG_SPAN: This feature is temporary${"\ufffd#28\ufffd\ufffd/#28\ufffd"}:LINE_BREAK:and is subject to change without notice. `,o=$localize`:button text@@common_done--button-text␟2557df54afff79a2d5045cc5c33ce6e8a18a2ce3␟5679498380710020614: Done `,s=$localize`:layout style option@@cu-layout-style-modal__style_simple␟914fb306e5eb86e11e60d9a288ed2b607badbaaa␟5177099284006836524: Simple `,r=$localize`:layout style option
          description@@cu-layout-style-modal__style_simple-description␟b196e5844957497858f51ab218b8379ae9cbcbad␟4079965481280898088: Simplified navigation & UX `,l=$localize`:@@cu-layout-style-modal__size␟29c0fa8fae3d74b40cdf5d9d5000b91836fe29aa␟3841389935972978654:SIZE`,u=$localize`:layout size@@cu-layout-style-modal__size_compact␟979c5d43a5aac9390ffb137fec7775f5a0047029␟7099609592681010597: Compact `,d=$localize`:layout size@@cu-layout-style-modal__size_default␟e0065dfdc8b4e6efa2cbfc358dfe810c02b7fba8␟6543275737114922442: Default `,m=$localize`:layout size@@cu-layout-style-modal__size_large␟e739485097dc664c1f3a6fcdaabbb1ddd644c2e2␟6480146483767671056: Large `,[[1,"cu-layout-style-modal__subtitle"],e,[1,"cu-layout-style-modal__row"],[4,"ngIf"],[1,"cu-layout-style-modal__item",3,"ngClass","click"],[1,"cu-layout-style-modal__item-title"],t,[1,"cu-layout-style-modal__item-description"],i,a,c,["class","cu-layout-style-modal__subtitle",4,"ngIf"],["class","cu-layout-style-modal__row",4,"ngIf"],[1,"cu-layout-style-modal__bottom"],[1,"cu-layout-style-modal__bottom-note"],["icon","exclamation4",1,"cu-layout-style-modal__bottom-note-icon"],[1,"cu-layout-style-modal__bottom-note-text"],n,[1,"cu-layout-style-modal__bottom-note-bold"],[1,"cu-btn","cu-btn_m",3,"click"],o,s,r,l,[1,"cu-layout-style-modal__size",3,"ngClass","click"],[1,"cu-layout-style-modal__size-icon"],["width","16","height","16","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M4 2a2 2 0 11-4 0 2 2 0 014 0zm6 1a2 2 0 11-4 0 2 2 0 014 0zm4 1a2 2 0 100-4 2 2 0 000 4zM5 8a2 2 0 11-4 0 2 2 0 014 0zm3 2a2 2 0 100-4 2 2 0 000 4zm7-2a2 2 0 11-4 0 2 2 0 014 0zM2 16a2 2 0 100-4 2 2 0 000 4zm8-3a2 2 0 11-4 0 2 2 0 014 0zm4 3a2 2 0 100-4 2 2 0 000 4z"],[1,"cu-layout-style-modal__size-label"],u,["width","18","height","18","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M4 2a2 2 0 11-4 0 2 2 0 014 0zm7 0a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4zM4 9a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4zm9-2a2 2 0 11-4 0 2 2 0 014 0zM2 18a2 2 0 100-4 2 2 0 000 4zm9-2a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4z"],d,["width","22","height","22","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13 2a2 2 0 11-4 0 2 2 0 014 0zM5 3a2 2 0 11-4 0 2 2 0 014 0zm14 2a2 2 0 100-4 2 2 0 000 4zM4 11a2 2 0 11-4 0 2 2 0 014 0zm7 2a2 2 0 100-4 2 2 0 000 4zm11-2a2 2 0 11-4 0 2 2 0 014 0zM3 21a2 2 0 100-4 2 2 0 000 4zm10-1a2 2 0 11-4 0 2 2 0 014 0zm6 1a2 2 0 100-4 2 2 0 000 4z"],m]},template:function(e,t){if(1&e&&(r.cc(0,"div",0),r.ac(1),r.gc(2,1),r.Zb(),r.dd(3,":\n"),r.bc(),r.cc(4,"div",2),r.bd(5,h,7,5,"ng-container",3),r.cc(6,"div",4),r.qc("click",function(){return t.setLayoutVersion(t.LayoutVersion.Four)}),r.vc(7,"async"),r.cc(8,"div",5),r.gc(9,6),r.bc(),r.cc(10,"div",7),r.gc(11,8),r.bc(),r.bc(),r.cc(12,"div",4),r.qc("click",function(){return t.setLayoutVersion(t.LayoutVersion.Five)}),r.vc(13,"async"),r.cc(14,"div",5),r.gc(15,9),r.bc(),r.cc(16,"div",7),r.gc(17,10),r.bc(),r.bc(),r.bc(),r.bd(18,p,4,1,"div",11),r.vc(19,"async"),r.bd(20,g,22,16,"div",12),r.vc(21,"async"),r.cc(22,"div",13),r.cc(23,"div",14),r.Xb(24,"div",15),r.cc(25,"div",16),r.mc(26,17),r.Xb(27,"span",18),r.Xb(28,"br"),r.jc(),r.bc(),r.bc(),r.cc(29,"div",19),r.qc("click",function(){return t.closeModal()}),r.gc(30,20),r.bc(),r.bc()),2&e){let e=null,i=null,a=null,c=null;r.Ib(5),r.Dc("ngIf",t.simpleLayoutAvailable),r.Ib(1),r.Dc("ngClass",r.Hc(13,m,(null==(e=r.wc(7,5,t.user$))?null:e.dashboard)===t.LayoutVersion.Four)),r.Ib(6),r.Dc("ngClass",r.Hc(15,m,(null==(i=r.wc(13,7,t.user$))?null:i.dashboard)===t.LayoutVersion.Five)),r.Ib(6),r.Dc("ngIf",(null==(a=r.wc(19,9,t.user$))?null:a.dashboard)!==t.LayoutVersion.Six),r.Ib(2),r.Dc("ngIf",(null==(c=r.wc(21,11,t.user$))?null:c.dashboard)!==t.LayoutVersion.Six)}},directives:[d.q,d.o],pipes:[d.b],styles:['.cu-layout-style-modal__subtitle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:12px;color:#7c828d}.dark-theme .cu-layout-style-modal__subtitle{color:#d5d6d7}.cu-layout-style-modal__size{display:flex;align-items:center;transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;padding:15px;width:31.5%;height:65px;border-radius:4px;border:1px solid #d8d8d8}.dark-theme .cu-layout-style-modal__size{border-color:#828588}.cu-layout-style-modal__size:hover,.cu-layout-style-modal__size_active{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-layout-style-modal__size:hover,.cu-layout-style-modal__size_active{border-color:var(--theme-main-color)}}.dark-theme .cu-layout-style-modal__size:hover,.dark-theme .cu-layout-style-modal__size_active{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-layout-style-modal__size:hover,.dark-theme .cu-layout-style-modal__size_active{border-color:var(--theme-main-color)}}.cu-layout-style-modal__size_active .cu-layout-style-modal__size-label{color:#292d34}.dark-theme .cu-layout-style-modal__size_active .cu-layout-style-modal__size-label{color:#d5d6d7}.cu-layout-style-modal__size_active .cu-layout-style-modal__size-icon{background:#7b68ee;border-color:#7b68ee;fill:#fff}@supports (--theme-main-color:#7b68ee){.cu-layout-style-modal__size_active .cu-layout-style-modal__size-icon{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.dark-theme .cu-layout-style-modal__size_active .cu-layout-style-modal__size-icon{background:#7b68ee;border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-layout-style-modal__size_active .cu-layout-style-modal__size-icon{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-layout-style-modal__size-icon{display:flex;align-items:center;justify-content:center;transition:border-color .2s cubic-bezier(.785,.135,.15,.86),fill .2s cubic-bezier(.785,.135,.15,.86),background .2s cubic-bezier(.785,.135,.15,.86);width:36px;height:36px;border-radius:8px;margin-right:15px;background:#fafbfc;border:1px solid #e9ebf0;fill:#b9bec7}.dark-theme .cu-layout-style-modal__size-icon{background:#2b343b;border-color:#1e272e}.cu-layout-style-modal__size-label{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:600 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-layout-style-modal__size-label{color:#abaeb0}.cu-layout-style-modal__row{display:flex;align-items:center;justify-content:space-between;margin-bottom:35px}.cu-layout-style-modal__row_flex-start{justify-content:flex-start}.cu-layout-style-modal__row_flex-start .cu-layout-style-modal__item{margin-right:15px}.cu-layout-style-modal__item{display:flex;align-items:center;justify-content:center;transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;flex-direction:column;cursor:pointer;padding:15px;width:31.5%;height:105px;border-radius:4px;border:1px solid #d8d8d8}.dark-theme .cu-layout-style-modal__item{border-color:#828588}.cu-layout-style-modal__item:hover,.cu-layout-style-modal__item_active{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-layout-style-modal__item:hover,.cu-layout-style-modal__item_active{border-color:var(--theme-main-color)}}.dark-theme .cu-layout-style-modal__item:hover,.dark-theme .cu-layout-style-modal__item_active{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-layout-style-modal__item:hover,.dark-theme .cu-layout-style-modal__item_active{border-color:var(--theme-main-color)}}.cu-layout-style-modal__item_active .cu-layout-style-modal__item-title{background:#7b68ee;border-color:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.cu-layout-style-modal__item_active .cu-layout-style-modal__item-title{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.dark-theme .cu-layout-style-modal__item_active .cu-layout-style-modal__item-title{background:#7b68ee;border-color:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-layout-style-modal__item_active .cu-layout-style-modal__item-title{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-layout-style-modal__item_disabled{cursor:default;pointer-events:none;position:relative;overflow:hidden}.cu-layout-style-modal__item_disabled .cu-layout-style-modal__item-description,.cu-layout-style-modal__item_disabled .cu-layout-style-modal__item-title{opacity:.4}.cu-layout-style-modal__item_disabled:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#7b68ee;display:flex;align-items:center;justify-content:center;content:"Soon";position:absolute;width:80px;top:-22px;height:16px;left:calc(100% - 50px);color:#fff;text-align:center;letter-spacing:.5px;font:500 10px Gotham Pro,Proxima Nova,arial,serif;transform-origin:left bottom;transform:rotate(45deg);z-index:10}@supports (--theme-main-color:#7b68ee){.cu-layout-style-modal__item_disabled:before{background:var(--theme-main-color)}}.cu-layout-style-modal__item_beta{position:relative;overflow:hidden}.cu-layout-style-modal__item_beta:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#7b68ee;display:flex;align-items:center;justify-content:center;content:"Beta";position:absolute;width:80px;top:-22px;height:16px;left:calc(100% - 50px);color:#fff;text-align:center;letter-spacing:.5px;font:500 10px Gotham Pro,Proxima Nova,arial,serif;transform-origin:left bottom;transform:rotate(45deg);z-index:10}@supports (--theme-main-color:#7b68ee){.cu-layout-style-modal__item_beta:before{background:var(--theme-main-color)}}.cu-layout-style-modal__item-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:border-color .2s cubic-bezier(.785,.135,.15,.86),color .2s cubic-bezier(.785,.135,.15,.86),background .2s cubic-bezier(.785,.135,.15,.86);font:600 13px/1 Gotham Pro,Proxima Nova,arial,serif;padding:5px 16px;border-radius:8px;margin-bottom:10px;text-align:center;color:#7c828d;background:#fafbfc;border:1px solid #e9ebf0}.dark-theme .cu-layout-style-modal__item-title{color:#abaeb0;background:#2b343b;border-color:#1e272e}.cu-layout-style-modal__item-description{font:400 12px/15px Gotham Pro,Proxima Nova,arial,serif;text-align:center;color:#7c828d}.dark-theme .cu-layout-style-modal__item-description{color:#abaeb0}.cu-layout-style-modal__bottom{justify-content:space-between}.cu-layout-style-modal__bottom,.cu-layout-style-modal__bottom-note{display:flex;align-items:center}.cu-layout-style-modal__bottom-note-bold{font-weight:600;color:#7c828d}.dark-theme .cu-layout-style-modal__bottom-note-bold{color:#abaeb0}.cu-layout-style-modal__bottom-note-icon{width:20px;height:20px;margin-right:10px;fill:#7c828d}.dark-theme .cu-layout-style-modal__bottom-note-icon{fill:#abaeb0}.cu-layout-style-modal__bottom-note-text{font:400 12px/15px Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-layout-style-modal__bottom-note-text{color:#abaeb0}.cu-layout-style-modal__bottom .cu-btn{width:100px}'],encapsulation:2,data:{animation:[s.e]},changeDetection:0}),e})()},"+WWD":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},"/En2":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},"/i14":function(e,t,i){"use strict";i.d(t,"a",function(){return p});var a=i("fXoL"),c=i("jJQC"),n=i("R4vD"),o=i("ofXK"),s=i("3Pt+"),r=i("UdVN");const l=["input"];function u(e,t){if(1&e){const e=a.dc();a.cc(0,"div",11),a.cc(1,"div",12),a.dd(2),a.bc(),a.cc(3,"div",13),a.qc("click",function(){a.Uc(e);const i=t.index;return a.uc(2).removeTagByIndex(i)}),a.Xb(4,"i",14),a.bc(),a.bc()}if(2&e){const e=t.$implicit;a.Ib(2),a.fd(" ",e," ")}}function d(e,t){if(1&e&&(a.cc(0,"div",9),a.bd(1,u,5,1,"div",10),a.bc()),2&e){const e=a.uc();a.Ib(1),a.Dc("ngForOf",e.tags)("ngForTrackBy",e.trackByValue)}}function m(e,t){if(1&e){const e=a.dc();a.cc(0,"div",15),a.qc("click",function(t){a.Uc(e);const i=a.uc();return i.addTag(i.newTagValue,t)}),a.bc()}2&e&&a.Dc("icon","enter-no-border")}const h=function(e){return{"cu-tags-input__badge":e}};let p=(()=>{class e{constructor(e){this.renderer=e,this.addStatus=!1,this.tags=[],this.placeholder=$localize`:@@cu-tags-input__form-placeholder_new-item:Enter new item`,this.buttonText=$localize`:@@common_add-status:Add Status`,this.cssClass="",this.error=!1,this.showTags=!1,this.forbiddenTags=[],this.maxlength=26,this.alwaysShowInput=!1,this.tagsChanged=new a.o,this.tagChanging=new a.o,this.statusError=new a.o,this.newTagValue="",this.trackByValue=c.f}ngOnInit(){this.renderer.listen(this.input.nativeElement,"keydown",e=>{this.statusError.emit("hideError");const t=this.newTagValue;switch(e.keyCode){case 13:case 9:e.preventDefault(),this.addTag(t);break;case 27:e.preventDefault(),this.clearInput()}}),this.renderer.listen(this.input.nativeElement,"keyup",e=>{const t=this.newTagValue;this.tagChanging.emit(t);const i=t.substring(0,this.maxlength+1);if(t.length>this.maxlength)return this.statusError.emit("maxLengthError"),void(this.newTagValue=i)})}ngAfterViewInit(){this.alwaysShowInput&&this.focus()}focus(){this.input.nativeElement.focus()}addTag(e,t){e&&e.toLowerCase()!==this.placeholder.toLowerCase()&&(t&&(t.preventDefault(),t.stopPropagation()),-1===this.getTakenIndex(e.toLowerCase())?e.length>this.maxlength?this.statusError.emit("maxLengthError"):this.error?this.statusError.emit("statusExist"):e.length&&-1===this.tags.indexOf(e)&&-1===this.forbiddenTags.map(e=>e.toLowerCase()).indexOf(e.toLowerCase())&&(this.statusError.emit("hideError"),this.tags.push(e),this.tagsChanged.emit(this.tags),this.clearInput(),this.setFocus()):this.statusError.emit("statusTaken"))}getTakenIndex(e){const t=Object(n.a)(e);return this.tags.map(e=>e.toLowerCase()).indexOf(t)}clearInput(){this.newTagValue=""}removeTagByIndex(e){this.tags.splice(e,1),this.tagsChanged.emit(this.tags)}setFocus(){this.addStatus=!0,setTimeout(()=>{this.input.nativeElement.focus()},10)}onBlur(){const e=this.newTagValue;e.toLowerCase()!==this.placeholder.toLowerCase()&&this.addTag(e),this.addStatus=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.H))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-tags-input"]],viewQuery:function(e,t){if(1&e&&a.jd(l,3),2&e){let e;a.Qc(e=a.rc())&&(t.input=e.first)}},inputs:{tags:"tags",placeholder:"placeholder",buttonText:"buttonText",cssClass:"cssClass",error:"error",showTags:"showTags",forbiddenTags:"forbiddenTags",maxlength:"maxlength",errorIndex:"errorIndex",modifier:"modifier",alwaysShowInput:"alwaysShowInput"},outputs:{tagsChanged:"tagsChanged",tagChanging:"tagChanging",statusError:"statusError"},decls:12,vars:18,consts:[[1,"cu-tags-input",3,"ngClass"],["class","cu-tags-input__list",4,"ngIf"],[1,"cu-tags-input__submit"],[1,"status-add",3,"ngClass"],[1,"status-add__button",3,"click"],[1,"status-add__input"],["type","text","spellcheck","false",1,"cu-form__input","status-add__input-field",2,"font-size","14px",3,"ngModel","ngClass","placeholder","ngModelChange","blur","click"],["input",""],["class","status-add__input-enter",3,"icon","click",4,"ngIf"],[1,"cu-tags-input__list"],["class","cu-tag",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-tag"],[1,"cu-tag__text"],[1,"cu-tag__remove",3,"click"],[1,"cu-icon","cu-icon_close"],[1,"status-add__input-enter",3,"icon","click"]],template:function(e,t){1&e&&(a.cc(0,"div",0),a.bd(1,d,2,2,"div",1),a.cc(2,"div",2),a.cc(3,"div",3),a.cc(4,"div",4),a.qc("click",function(){return t.setFocus()}),a.dd(5),a.bc(),a.cc(6,"div",5),a.cc(7,"input",6,7),a.qc("ngModelChange",function(e){return t.newTagValue=e})("blur",function(){return t.onBlur()})("click",function(){return t.setFocus()}),a.vc(9,"lowercase"),a.vc(10,"lowercase"),a.bc(),a.bd(11,m,1,1,"div",8),a.bc(),a.bc(),a.bc(),a.bc()),2&e&&(a.Dc("ngClass",t.cssClass),a.Ib(1),a.Dc("ngIf",t.showTags),a.Ib(2),a.Ob("status-add_active",t.addStatus||t.alwaysShowInput),a.Dc("ngClass",t.modifier),a.Ib(2),a.fd(" + ",t.buttonText," "),a.Ib(2),a.Ob("error_taken",t.error&&t.newTagValue!==t.placeholder&&!t.errorIndex&&0!==t.errorIndex),a.Dc("ngModel",t.newTagValue)("ngClass",a.Hc(16,h,a.wc(9,12,t.newTagValue)!==a.wc(10,14,t.placeholder)))("placeholder",t.placeholder),a.Ib(4),a.Dc("ngIf",t.maxlength&&!t.error&&t.newTagValue&&t.newTagValue!==t.placeholder))},directives:[o.o,o.q,s.c,s.p,s.s,o.p,r.a],pipes:[o.n],styles:["[_nghost-%COMP%] {\n        width: 100%;\n      }"]}),e})()},"0WXF":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},"2Wx5":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("ofXK"),c=i("mcWp"),n=i("K0KF"),o=i("VBI8"),s=i("csDc"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,s.a]]}),e})()},"2iTN":function(e,t,i){"use strict";i.d(t,"a",function(){return Ko});var a=i("bahz"),c=i("ofXK"),n=i("lbgh"),o=i("K1R0"),s=i("fXoL"),r=i("Jf2N"),l=i("WSBU"),u=i("UdVN"),d=i("jJQC"),m=i("lJxs"),h=i("pLZG"),p=i("IzEk");let b=(()=>{class e{constructor(){this.cancel=new s.o,this.createAutomation=new s.o,this.updateAutomation=new s.o,this.changeParentId=new s.o}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-edit-automation-base"]],inputs:{automation:"automation",parentType:"parentType",parent:"parent",parentId:"parentId",teamId:"teamId",loading:"loading",features:"features",showPaywall:"showPaywall"},outputs:{cancel:"cancel",createAutomation:"createAutomation",updateAutomation:"updateAutomation",changeParentId:"changeParentId"},decls:1,vars:0,template:function(e,t){1&e&&s.dd(0,"Should never be used")},encapsulation:2,changeDetection:0}),e})();var g=i("bFKe"),f=i("BTFG");function _(e,t){if(1&e&&s.Xb(0,"img",2),2&e){const e=s.uc();s.Dc("src",e.resource,s.Xc)("alt",e.label)}}function v(e,t){if(1&e&&s.Xb(0,"div",3),2&e){const e=s.uc();s.ad("fill",!e.selected&&e.internal||null!=e.category&&e.category.strokeIcon||null==e.category.colors?null:e.category.colors.main)("stroke",!e.selected&&e.internal||!e.category.strokeIcon||null==e.category.colors?null:e.category.colors.main),s.Ob("cu-automation-tab-browse__sidebar-category-icon_stroke",e.category.strokeIcon),s.Dc("icon",e.category.icon.resource)}}let y=(()=>{class e{constructor(){this.selected=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-category-icon"]],inputs:{type:"type",resource:"resource",color:"color",label:"label",category:"category",internal:"internal",selected:"selected"},decls:3,vars:2,consts:[["class","icon",3,"src","alt",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"icon",3,"src","alt"],[3,"icon"]],template:function(e,t){if(1&e&&(s.bd(0,_,1,2,"img",0),s.bd(1,v,1,7,"ng-template",null,1,s.cd)),2&e){const e=s.Rc(2);s.Dc("ngIf","url"===t.type)("ngIfElse",e)}},directives:[c.q,u.a],encapsulation:2,changeDetection:0}),e})(),k=(()=>{class e{constructor(){this.selectCategory=new s.o,this.hovered=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-category"]],inputs:{selectedCategory:"selectedCategory",category:"category",showPresets:"showPresets"},outputs:{selectCategory:"selectCategory"},decls:4,vars:19,consts:[[3,"click","mouseenter","mouseleave"],[1,"cu-automation-tab-browse__sidebar-category-icon",3,"ngClass"],[3,"type","resource","color","label","category","internal","selected"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.qc("click",function(){return t.selectCategory.emit(t.category.label)})("mouseenter",function(){return t.hovered=!0})("mouseleave",function(){return t.hovered=!1}),s.cc(1,"div",1),s.Xb(2,"cu-automation-category-icon",2),s.bc(),s.dd(3),s.bc()),2&e&&(s.Mb("cu-automation-tab-browse__sidebar-category cu-automation-tab-browse__sidebar-category-",null==t.category?null:t.category.resource,""),s.ad("background-color",(null==t.selectedCategory?null:t.selectedCategory.label)===(null==t.category?null:t.category.label)&&t.showPresets||t.hovered?null==t.category.colors?null:t.category.colors.faded:null)("border-left-color",(null==t.selectedCategory?null:t.selectedCategory.label)===(null==t.category?null:t.category.label)&&t.showPresets?null==t.category.colors?null:t.category.colors.main:null),s.Ob("cu-automation-tab-browse__sidebar-category_active",(null==t.selectedCategory?null:t.selectedCategory.label)===(null==t.category?null:t.category.label)&&t.showPresets),s.Jb("data-category",t.category.label),s.Ib(1),s.Dc("ngClass","cu-automation-tab-browse__sidebar-category-icon_"+(null==t.category.icon?null:t.category.icon.resource)),s.Ib(1),s.Dc("type",t.category.icon.type)("resource",t.category.icon.resource)("color",null==t.category.colors?null:t.category.colors.main)("label",t.category.label)("category",t.category)("internal",t.category.internal)("selected",(null==t.selectedCategory?null:t.selectedCategory.label)===(null==t.category?null:t.category.label)),s.Ib(1),s.fd(" ",t.category.label,"\n"))},directives:[c.o,y],encapsulation:2,changeDetection:0}),e})();function I(e,t){if(1&e&&s.Xb(0,"img",2),2&e){const e=s.uc();s.Dc("src",e.resourceIcon,s.Xc)("alt",e.label)}}function w(e,t){if(1&e&&s.Xb(0,"div",3),2&e){const e=s.uc();s.ad("fill",e.color),s.Dc("icon",e.resourceIcon)}}let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-category-icon-soon"]],inputs:{type:"type",resourceIcon:"resourceIcon",color:"color",label:"label"},decls:3,vars:2,consts:[["class","icon",3,"src","alt",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"icon",3,"src","alt"],[3,"icon"]],template:function(e,t){if(1&e&&(s.bd(0,I,1,2,"img",0),s.bd(1,w,1,3,"ng-template",null,1,s.cd)),2&e){const e=s.Rc(2);s.Dc("ngIf","url"===t.type)("ngIfElse",e)}},directives:[c.q,u.a],encapsulation:2,changeDetection:0}),e})();var x=i("MguC"),C=i("eIep"),O=i("/uUt"),S=i("Zy1z"),D=i("1G5W"),A=i("zp1y"),j=i("2Vo4"),N=i("XNiG"),E=i("itXk"),$=i("7Cbv"),P=i("5+WD"),L=i("XIp8"),U=i("VrOs"),z=i("DkPU"),M=i("O5gs"),R=i("sgkU"),G=i("gEZv"),F=i("yECk"),V=i("9ZxZ"),q=i("XoGK"),X=i("hl9Q"),B=i("sVzW"),K=i("wNhb"),W=i("p/+J"),H=i("Ox28");function Z(e,t){1&e&&s.Yb(0)}function Q(e,t){if(1&e&&(s.ac(0),s.bd(1,Z,1,0,"ng-container",1),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngxComponentOutlet",e.component)}}let J=(()=>{class e{constructor(e){this.automationStrategies=e}ngOnInit(){const e=this.automationStrategies.getStrategy(this.automation.resource.key),t=this.automationStrategies.getStrategy(this.action.resource.key);this.component=e&&e.getMessageHelper?e.getMessageHelper():t&&t.getMessageHelper?t.getMessageHelper():null}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(U.d))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-helper-message"]],inputs:{automation:"automation",action:"action"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngxComponentOutlet"]],template:function(e,t){1&e&&s.bd(0,Q,2,1,"ng-container",0),2&e&&s.Dc("ngIf",t.component)},directives:[c.q,H.a],encapsulation:2,changeDetection:0}),e})();var Y=i("8r6i"),ee=i("xnrs"),te=i("I/Mc"),ie=i("Cpv+");function ae(e,t){1&e&&s.Xb(0,"div",44)}function ce(e,t){1&e&&(s.ac(0),s.gc(1,45),s.Zb())}function ne(e,t){1&e&&(s.ac(0),s.gc(1,46),s.Zb())}function oe(e,t){if(1&e){const e=s.dc();s.cc(0,"div",34),s.cc(1,"cu-category-list-dropdown",35),s.qc("onSelect",function(t){return s.Uc(e),s.uc().changeParentId.emit(t.subcategory.id)}),s.cc(2,"div",36),s.Xb(3,"div",37),s.cc(4,"div",38),s.dd(5),s.bc(),s.bd(6,ae,1,0,"div",39),s.bc(),s.bc(),s.cc(7,"div",40),s.bd(8,ce,2,0,"ng-container",6),s.bd(9,ne,2,0,"ng-container",6),s.Xb(10,"cu-automation-breadcrumb",41),s.bc(),s.cc(11,"div",42),s.cc(12,"div",43),s.qc("click",function(){return s.Uc(e),s.uc().closeModal()}),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc();s.Ib(1),s.Dc("selectedSubcategory",e.parentId)("disabled",e.automation.id||!0),s.Ib(4),s.fd(" ",null==e.parent?null:e.parent.name," "),s.Ib(1),s.Dc("ngIf",!e.automation.id&&!1),s.Ib(2),s.Dc("ngIf",!e.automation.id),s.Ib(1),s.Dc("ngIf",e.automation.id),s.Ib(1),s.Dc("parent",e.parent)("parentType",e.parentType)}}function se(e,t){}const re=function(e,t,i,a){return{type:e,resource:t,color:i,label:a}};function le(e,t){if(1&e&&s.bd(0,se,0,0,"ng-template",47),2&e){const e=s.uc(),t=s.Rc(50);s.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Kc(2,re,null==e.icons.trigger||null==e.icons.trigger.icon?null:e.icons.trigger.icon.type,null==e.icons.trigger||null==e.icons.trigger.icon?null:e.icons.trigger.icon.resource,null==e.icons.trigger?null:e.icons.trigger.color,null==e.icons.trigger?null:e.icons.trigger.label))}}function ue(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-schema-automation-trigger-state-condition",48),s.qc("triggerStateCondition",function(t){return s.Uc(e),s.uc().triggerStateCondition(t)})("overrideType",function(t){return s.Uc(e),s.uc().overrideTriggerType(t)}),s.bc()}if(2&e){const e=t.ngIf,i=s.uc();s.Dc("parentType",i.parentType)("parentId",i.newParentId$.value||i.parentId)("values",i.automation.trigger.triggerConditions)("condition",e)("resource",i.automation.resource)("trigger",i.automation.trigger)}}function de(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-schema-automation-trigger-input",49),s.qc("triggerInputValues",function(t){return s.Uc(e),s.uc().triggerInputValues(t)}),s.bc()}if(2&e){const e=s.uc();s.Dc("trigger",e.automation.trigger)("resource",e.automation.resource)("parentType",e.parentType)("parentId",e.newParentId$.value||e.parentId)("values",e.automation.trigger.triggerInputValues)("dynamicValues",e.automation.dynamicValues)}}function me(e,t){if(1&e){const e=s.dc();s.cc(0,"div",50),s.cc(1,"cu-schema-automation-trigger-condition",51),s.qc("removeCondition",function(){s.Uc(e);const i=t.$implicit;return s.uc().removeCondition(i.field)})("triggerCondition",function(i){s.Uc(e);const a=t.$implicit;return s.uc().updateTriggerCondition(a,i)}),s.bc(),s.bc()}if(2&e){const e=t.$implicit,i=s.uc();s.Ib(1),s.Dc("parentType",i.parentType)("parentId",i.newParentId$.value||i.parentId)("resource",i.automation.resource)("condition",e)("values",i.automation.trigger.triggerInputValues)("conditions",i.automation.conditions)("dynamicValues",i.automation.dynamicValues)}}function he(e,t){if(1&e){const e=s.dc();s.cc(0,"div",52),s.qc("click",function(){return s.Uc(e),s.uc().addCondition()}),s.Xb(1,"div",53,54),s.ac(3),s.gc(4,55),s.Zb(),s.bc()}if(2&e){const e=s.Rc(2),t=s.uc(),i=s.Rc(46);s.Dc("cuPopover",i)("containerClass","popover_white popover_no-max-width popover_no-padding")("outsideClick",!0)("trigger",t.showPaywall?"click":null)("hostElement",e.element.nativeElement)}}function pe(e,t){}function be(e,t){if(1&e&&(s.cc(0,"div",5),s.bd(1,pe,0,0,"ng-template",47),s.bc()),2&e){const e=t.$implicit;s.uc();const i=s.Rc(50);s.Ib(1),s.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",s.Kc(2,re,null==e.icon?null:e.icon.type,e.icon.resource,e.color,e.label))}}function ge(e,t){1&e&&s.Xb(0,"div",61),2&e&&s.Dc("icon","handle4")}function fe(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"cu-dropdown-list",13),s.qc("onSelect",function(t){s.Uc(e);const i=s.uc().$implicit;return s.uc().changeAction(i.id,t.customPayload)}),s.cc(2,"cu-edit-automation-dropdown"),s.dd(3),s.bc(),s.bc(),s.Zb()}if(2&e){const e=t.ngIf,i=s.uc().$implicit;s.Ib(1),s.Dc("items",e)("showSearch",(null==e?null:e.length)>=2)("autoFocusSearch",!0)("handleKeyboard",!0)("dropdownDisabled",1===(null==e?null:e.length)),s.Ib(2),s.fd(" ",i.action.display.title," ")}}function _e(e,t){if(1&e){const e=s.dc();s.cc(0,"div",62),s.cc(1,"div",63),s.qc("click",function(){s.Uc(e);const t=s.uc().$implicit;return s.uc().deleteAction(t.id)}),s.bc(),s.bc()}2&e&&(s.Ib(1),s.Dc("icon","trash-bold-2"))}function ve(e,t){if(1&e){const e=s.dc();s.cc(0,"div",56),s.bd(1,ge,1,1,"div",57),s.cc(2,"div",12),s.bd(3,fe,4,6,"ng-container",6),s.vc(4,"selectedMenuItem"),s.vc(5,"filterToActions"),s.vc(6,"async"),s.bd(7,_e,2,1,"div",58),s.bc(),s.cc(8,"cu-schema-automation-field",59),s.qc("interpolatedInputChange",function(t){return s.Uc(e),s.uc().interpolatedChange(t)})("mappedValueChange",function(t){return s.Uc(e),s.uc().mappedChange(t)})("valueChange",function(t){return s.Uc(e),s.uc().valueChange(t)}),s.bc(),s.Xb(9,"cu-helper-message",60),s.bc()}if(2&e){const e=t.$implicit,i=t.first,a=s.uc();s.Dc("cdkDragDisabled",a.automation.actions.length<2),s.Ib(1),s.Dc("ngIf",a.automation.actions.length>=2),s.Ib(1),s.Ob("cu-edit-automation__container-body-actions-top_has-inputs",a.automation.actions.length>0),s.Ib(1),s.Dc("ngIf",s.xc(4,16,s.xc(5,19,s.wc(6,22,a.actionMenuItems$),e.resource.key),e.action.key)),s.Ib(4),s.Dc("ngIf",!i),s.Ib(1),s.Dc("resource",a.automation.resource)("parentType",a.parentType)("action",e)("actions",a.automation.actions)("trigger",a.automation.trigger)("parentId",a.newParentId$.value||a.parentId)("variables",a.automation.trigger.schema.schema)("dynamicValues",e.resource.dynamic_values),s.Ib(1),s.Dc("automation",a.automation)("action",e)}}function ye(e,t){if(1&e){const e=s.dc();s.cc(0,"div",52),s.qc("click",function(){return s.Uc(e),s.uc().addAction()}),s.Xb(1,"div",53,64),s.ac(3),s.gc(4,65),s.Zb(),s.bc()}if(2&e){const e=s.Rc(2),t=s.uc(),i=s.Rc(48);s.Dc("cuPopover",i)("containerClass","popover_white popover_no-max-width popover_no-padding")("outsideClick",!0)("trigger",t.showPaywall?"click":null)("hostElement",e.element.nativeElement)}}function ke(e,t){if(1&e){const e=s.dc();s.cc(0,"button",66),s.qc("click",function(){return s.Uc(e),s.uc().cancel.emit()}),s.gc(1,67),s.bc()}}function Ie(e,t){1&e&&(s.ac(0),s.gc(1,68),s.Zb())}function we(e,t){1&e&&(s.ac(0),s.gc(1,69),s.Zb())}function Te(e,t){1&e&&(s.ac(0),s.gc(1,70),s.Zb())}function xe(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-paywall-popover",71),s.qc("upgradeClicked",function(){return s.Uc(e),s.uc().closeModal()}),s.bc()}if(2&e){const e=s.uc();s.Dc("title",e.addConditionsPaywallTitleText)("upgradeButtonText",e.paywallCommonStringsService.upgradeToBusinessText)("amplitudeLabel","Add Automation Conditions")}}function Ce(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-paywall-popover",72),s.qc("upgradeClicked",function(){return s.Uc(e),s.uc().closeModal()}),s.bc()}if(2&e){const e=s.uc();s.Dc("title",e.multipleActionsPaywallTitleText)("upgradeButtonText",e.paywallCommonStringsService.upgradeToBusinessText)("amplitudeLabel","Multiple Automation Actions")}}function Oe(e,t){if(1&e&&s.Xb(0,"img",75),2&e){const e=s.uc(),t=e.label;s.Dc("src",e.resource,s.Xc)("alt",t)}}function Se(e,t){if(1&e&&s.Xb(0,"div",76),2&e){const e=s.uc(),t=e.resource;s.ad("fill",e.color),s.Dc("icon",t)}}function De(e,t){if(1&e&&(s.bd(0,Oe,1,2,"img",73),s.bd(1,Se,1,3,"ng-template",null,74,s.cd)),2&e){const e=t.type,i=s.Rc(2);s.Dc("ngIf","url"===e)("ngIfElse",i)}}let Ae=(()=>{class e extends b{constructor(e,t,i,a,c,n){super(),this.modal=e,this.automationStrategies=t,this.defaultResourceMapping=i,this.automationResourceFacade=a,this.cdr=c,this.paywallCommonStringsService=n,this.inlineBlockComponent=!1,this.trackById=Object(d.d)("id"),this.trackByLabel=Object(d.d)("label"),this.DataViewParentType=x.e,this.AutomationFieldValueUserComponent=l.m,this.newParentId$=new j.a(null),this.MAX_ACTIONS=3,this.resources$=this.newParentId$.pipe(Object(C.a)(e=>this.automationResourceFacade.getRemappedResources(e,this.parentType))),this.addConditionsPaywallTitleText=$localize`:@@paywall_title--automation-conditions:Add Conditions`,this.multipleActionsPaywallTitleText=$localize`:@@paywall_title--automation-multiple-actions:Multiple Actions`,this.destroy$=new N.a,this.trackByActionKey=(e,t)=>t.action.key}ngOnInit(){this.newParentId$.pipe(Object(h.a)(e=>Boolean(!!e&&this.automation&&this.automation.id)),Object(O.a)(),Object(S.a)(),Object(D.a)(this.destroy$)).subscribe(()=>{this.automation=Object.assign(Object.assign({},this.automation),{actions:this.automation.actions.map(e=>(delete e.inputValues.status_change_map,e))})}),this.updateTriggerMenu();const e=Array.isArray(this.automation.trigger.schema.key)?this.automation.trigger.schema.key[0]:this.automation.trigger.schema.key;this.automationResourceFacade.ifNoTriggerInformationThenFetch(this.teamId,this.automation.resource.key,e),this.setTriggerConditions(this.automation.resource.key,e)}ngOnChanges(e){(e.automation||e.features)&&this.automation&&this.features&&(this.originalActionIds=this.automation.actions.map(e=>e.id),this.updateIcons()),this.updateIsValid()}ngOnDestroy(){this.destroy$.next()}closeModal(){this.modal.close()}changeAction(e,t){this.automation=Object.assign(Object.assign({},this.automation),{actions:this.automation.actions.map(i=>i.id===e?Object.assign(Object.assign({},i),{action:t,inputValues:{},interpolatedInput:{},mappedInputValues:{}}):i)}),this.updateIsValid()}triggerInputChange(e){this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerInputValues:Object.assign({},e)})})}actionDropped(e){const t=[...this.automation.actions];Object(P.g)(t,e.previousIndex,e.currentIndex),this.automation=Object.assign(Object.assign({},this.automation),{actions:t})}changeTrigger(e){this.automation=Object.assign(Object.assign({},this.automation),{trigger:{schema:Object.assign({},e.customPayload),triggerConditions:[],triggerInputValues:Object.assign({},this.automation.trigger.triggerInputValues.auth?{auth:this.automation.trigger.triggerInputValues.auth}:{})}});const t=this.triggerMenuItems.find(e=>e.checked);t&&(t.checked=!1),e.checked=!0;const i=e.customPayload.key,a=Array.isArray(i)?i[0]:i,c=this.automation.resource.key;this.automationResourceFacade.ifNoTriggerInformationThenFetch(this.teamId,c,a),this.setTriggerConditions(c,a),this.updateIsValid()}addAction(){if(this.showPaywall&&this.automation.actions.length>=1)return;const e=Object($.a)();Object(E.a)([this.actionMenuItems$,this.automationResourceFacade.getTriggerInformation(this.automation.resource.key,Array.isArray(this.automation.trigger.schema.key)?this.automation.trigger.schema.key[0]:this.automation.trigger.schema.key)]).pipe(Object(p.a)(1)).subscribe(([t,i])=>{const a=this.automation.actions[0].resource;let c;c=i.internal&&!i.allowed_actions?a.actions.map(e=>({resource:a.key,action:Array.isArray(e.key)?e.key[0]:e.key})):i.allowed_actions.filter(e=>a.key===e.resource);const n=t.find(e=>e.id===c[0].action);this.automation=Object.assign(Object.assign({},this.automation),{actions:[...this.automation.actions,{id:e,action:n.customPayload.action,inputValues:{auth:a.auth_type?this.automation.actions[0].inputValues.auth:void 0},resource:a,mappedInputValues:{},interpolatedInput:{}}]}),this.updateIsValid(),this.cdr.detectChanges()})}deleteAction(e){this.automation=Object.assign(Object.assign({},this.automation),{actions:[...this.automation.actions.filter(t=>t.id!==e)]}),this.updateIsValid()}triggerStateCondition(e){this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerConditions:[...e]})})}updateTriggerCondition(e,t){this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerConditions:[...this.automation.trigger.triggerConditions.map(i=>Object.assign({},i===e?t:i))]})}),this.updateIsValid()}interpolatedChange(e){this.automation=Object.assign(Object.assign({},this.automation),{actions:[...this.automation.actions.map(t=>{if(t.id===e.actionId){if(e.key){const i=e.selfEmitValue?Object.assign({},e.value):{[e.key]:[...e.value]};return Object.assign(Object.assign({},t),{interpolatedInput:Object.assign(Object.assign({},t.interpolatedInput),i),inputValues:Object.assign(Object.assign({},t.inputValues),{[e.key]:void 0}),mappedInputValues:Object.assign(Object.assign({},t.mappedInputValues),{[e.key]:void 0})})}{const i=Object.assign({},t.inputValues),a=Object.assign({},t.mappedInputValues);return Object.keys(e.value).forEach(e=>{delete i[e],delete a[e]}),Object.assign(Object.assign({},t),{interpolatedInput:Object.assign(Object.assign({},t.interpolatedInput),e.value),inputValues:i,mappedInputValues:a})}}return Object.assign({},t)})]}),this.updateIsValid()}mappedChange(e){this.automation=Object.assign(Object.assign({},this.automation),{actions:[...this.automation.actions.map(t=>{if(t.id===e.actionId){if(e.key)return Object.assign(Object.assign({},t),{mappedInputValues:Object.assign(Object.assign({},t.mappedInputValues),{[e.key]:e.value}),inputValues:Object.assign(Object.assign({},t.inputValues),{[e.key]:void 0}),interpolatedInput:Object.assign(Object.assign({},t.interpolatedInput),{[e.key]:void 0})});{const i=Object.assign({},t.inputValues),a=Object.assign({},t.interpolatedInput);return Object.keys(e.value).forEach(e=>{delete i[e],delete a[e]}),Object.assign(Object.assign({},t),{mappedInputValues:Object.assign(Object.assign({},t.mappedInputValues),e.value),inputValues:i,interpolatedInput:a})}}return Object.assign({},t)})]}),this.updateIsValid()}triggerInputValues(e){this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerInputValues:Object.assign({},e)})}),this.updateIsValid()}valueChange(e){this.automation=Object.assign(Object.assign({},this.automation),e.key?{actions:[...this.automation.actions.map(t=>{if(t.id===e.actionId){if(e.selfEmitValue){const i=[],a=[],c=[],n=Object.keys(e.value).reduce((t,n)=>{const o=e.value[n];return o?"Input"===o.type?(i.push(n),Object.assign(Object.assign({},t),{inputValues:Object.assign(Object.assign({},t.inputValues),{[n]:o.value})})):"MappedValue"===o.type?(a.push(n),Object.assign(Object.assign({},t),{mappedInputValues:Object.assign(Object.assign({},t.mappedInputValues),{[n]:o.value})})):"InterpolatedValue"===o.type?(c.push(n),Object.assign(Object.assign({},t),{interpolatedInput:Object.assign(Object.assign({},t.interpolatedInput),{[n]:o.value})})):t:t},{inputValues:{},interpolatedInput:{},mappedInputValues:{}});return Object.assign(Object.assign({},t),{inputValues:Object.assign(Object.assign({},Object.keys(t.inputValues).filter(e=>![...a,...c].includes(e)).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:t.inputValues[i]}),{})),n.inputValues),interpolatedInput:Object.assign(Object.assign({},Object.keys(t.interpolatedInput).filter(e=>![...a,...i].includes(e)).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:t.interpolatedInput[i]}),{})),n.interpolatedInput),mappedInputValues:Object.assign(Object.assign({},Object.keys(t.mappedInputValues).filter(e=>![...i,...c].includes(e)).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:t.mappedInputValues[i]}),{})),n.mappedInputValues)})}return Object.assign(Object.assign({},t),{inputValues:Object.assign(Object.assign({},t.inputValues),{[e.key]:e.value}),interpolatedInput:Object.assign(Object.assign({},t.interpolatedInput),{[e.key]:void 0}),mappedInputValues:Object.assign(Object.assign({},t.mappedInputValues),{[e.key]:void 0})})}return Object.assign({},t)})]}:{actions:[...this.automation.actions.map(t=>t.id===e.actionId?Object.assign(Object.assign({},t),{inputValues:Object.assign({},e.value)}):Object.assign({},t))]}),this.updateIsValid()}overrideTriggerType(e){this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerTypeOverride:e})}),this.updateIsValid(),this.cdr.detectChanges()}removeCondition(e){this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerConditions:this.automation.trigger.triggerConditions.filter(t=>t.field!==e)})})}addCondition(){if(!this.showPaywall){const e=this.automation.trigger.triggerConditions.filter(e=>!!e.field).map(e=>e.field),t=this.automation.conditions.find(t=>!e.includes(t.key));this.automation=Object.assign(Object.assign({},this.automation),{trigger:Object.assign(Object.assign({},this.automation.trigger),{triggerConditions:[...this.automation.trigger.triggerConditions,{field:t.key,op:t.operators[0],value:null}]})}),this.updateIsValid()}}save(){this.updateIsValid(),this.isValid&&(this.automation.id?this.updateAutomation.emit({trigger:this.serializeTrigger(),rem_actions:this.originalActionIds,add_actions:this.serializeActions()}):this.createAutomation.emit({active:!0,trigger:this.serializeTrigger(),actions:this.serializeActions()}))}updateIcons(e){"triggers"===e?this.icons.trigger=this.getTriggerIcon():"actions"===e?this.icons.actions=this.getActionIcons():this.icons={trigger:this.getTriggerIcon(),actions:this.getActionIcons()}}updateTriggerMenu(){this.triggerMenuItems=this.automation.resource.triggers.map(e=>{const t=this.automationStrategies.getStrategy(this.automation.resource.key),i=Array.isArray(e.key)?e.key[0]:e.key,a=t&&t.addKeyTooltip?t.addKeyTooltip(i,this.isTriggerAndActionDisabled(e.key,t)):void 0;return{id:e.key,title:e.display.label||e.display.title,checked:e.key===this.automation.trigger.schema.key,customPayload:e,disabled:this.isTriggerAndActionDisabled(e.key,t),tooltip:a}})}serializeTrigger(){return{type:this.automation.trigger.triggerTypeOverride?this.automation.trigger.triggerTypeOverride:Array.isArray(this.automation.trigger.schema.key)?this.automation.trigger.schema.key[0]:this.automation.trigger.schema.key,resource:this.automation.resource.key,conditions:this.automation.trigger.triggerConditions,input:this.automation.trigger.triggerInputValues}}serializeActions(){return this.automation.actions.map(e=>{const t=Object.keys(e.inputValues).filter(t=>!!e.inputValues[t]||0===e.inputValues[t]||!1===e.inputValues[t]).reduce((t,i)=>{const a=e.inputValues[i];if("object"==typeof a||Array.isArray(a)){const e=Object(L.a)(a);return Object(l.z)(e,["inputValues","mappedInputValues","interpolatedInput"],["input","mapped_input","interpolated_input"]),Object.assign(Object.assign({},t),{[i]:e})}return Object.assign(Object.assign({},t),{[i]:a})},{});return{type:Array.isArray(e.action.key)?e.action.key[0]:e.action.key,resource:e.resource.key,input:t,mapped_input:e.mappedInputValues,interpolated_input:e.interpolatedInput}})}getTriggerIcon(){const e=this.automationStrategies.getStrategy(this.automation.resource.key);let t=this.defaultResourceMapping.getResourceIcon(this.automation.resource);return e&&(t={color:(e.colors||{main:null}).main||t.color,icon:e.icon||t.icon,label:this.automation.resource.display.label}),t}getActionIcons(){return this.automation.actions.map(e=>{const t=this.automationStrategies.getStrategy(e.resource.key);let i=this.defaultResourceMapping.getResourceIcon(e.resource);return t&&(i={color:(t.colors||{main:null}).main||i.color,icon:t.icon||i.icon,label:this.automation.resource.display.label}),i})}setTriggerConditions(e,t){this.automationResourceFacade.getTriggerInformation(e,t).pipe(Object(m.a)(e=>this.automationResourceFacade.remapResource(e,this.parentId,this.parentType)),Object(D.a)(this.destroy$)).subscribe(e=>{this.automation=Object.assign(Object.assign({},this.automation),{resource:Object.assign(Object.assign({},this.automation.resource),{conditions:e.conditions}),conditions:e.conditions}),this.cdr.markForCheck()}),this.stateCondition$=this.automationResourceFacade.getTriggerInformation(e,t).pipe(Object(m.a)(e=>e.conditions.find(e=>e.state_condition))),this.actionMenuItems$=this.automationResourceFacade.getTriggerInformation(e,t).pipe(Object(h.a)(e=>!!e),Object(A.a)(this.resources$),Object(m.a)(([t,i])=>{const a=this.automationStrategies.getStrategy(e);return t.allowed_actions?t.allowed_actions.map(e=>{const t=i.find(t=>t.key===e.resource).actions.find(t=>t.key===e.action),c=Array.isArray(t.key)?t.key[0]:t.key;return{id:c,title:t.display.title,customPayload:{resourceKey:e.resource,action:t},disabled:this.isTriggerAndActionDisabled(t.key,a),tooltip:a&&a.addKeyTooltip?a.addKeyTooltip(c,this.isTriggerAndActionDisabled(c,a)):void 0,checked:!1}}):i.flatMap(e=>e.actions.map(t=>({action:t,resourceKey:e.key}))).map(e=>({id:Array.isArray(e.action.key)?e.action.key[0]:e.action.key,title:e.action.display.title,customPayload:e,disabled:this.isTriggerAndActionDisabled(e.action.key,a),tooltip:a&&a.addKeyTooltip?a.addKeyTooltip(Array.isArray(e.action.key)?e.action.key[0]:e.action.key,this.isTriggerAndActionDisabled(e.action.key,a)):void 0,checked:!1}))}))}isTriggerAndActionDisabled(e,t){if(t&&t.isKeyDisabled&&t.isKeyDisabled(Array.isArray(e)?e[0]:e,this.parentId,this.parentType))return!0;if(t&&t.getClickupId){const i=t.getClickupId(Array.isArray(e)?e[0]:e);return!!i&&this.clickappDisabled(i)}return!1}updateIsValid(){const e=this.automation.actions.every(e=>!e.action.schema.properties||Object.keys(e.action.schema.properties).every(t=>!(e.action.schema.required||[]).includes(t)||e.mappedInputValues[t]||e.interpolatedInput[t]||e.inputValues[t]||!1===e.inputValues[t])),t=!this.automation.trigger.schema.input_schema||Object.keys(this.automation.trigger.schema.input_schema.properties).every(e=>!this.automation.trigger.schema.input_schema.required.includes(e)||!!this.automation.trigger.triggerInputValues[e]||!1===this.automation.trigger.triggerInputValues[e]);this.isValid=e&&t}clickappDisabled(e){return e&&(!this.features[e]||!this.features[e].enabled)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(r.a),s.Wb(U.d),s.Wb(l.s),s.Wb(l.o),s.Wb(s.h),s.Wb(z.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-edit-automation"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-edit-automation__container",!0)},inputs:{inlineBlockComponent:"inlineBlockComponent"},features:[s.Fb,s.Gb],decls:51,vars:37,consts:function(){let e,t,i,a,c,n,o,r,l,u,d,m,h,p,b,g,f;return e=$localize`:@@cu-edit-automation__when-this-happens␟bfb9bbaa38b26aab48794751b20c40c83d3f45f4␟2520586260749183774:${"\ufffd#9\ufffd"}:START_TAG_DIV: When ${"[\ufffd/#9\ufffd|\ufffd/#10\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd#10\ufffd"}:START_TAG_DIV_1: THIS HAPPENS ${"[\ufffd/#9\ufffd|\ufffd/#10\ufffd]"}:CLOSE_TAG_DIV:`,e=s.lc(e),t=$localize`:@@cu-edit-automation__then-do-this-action␟53569e9f41613948043d55a25a97832b4ccbe980␟1968281355307296365:${"\ufffd#29\ufffd"}:START_TAG_DIV: Then ${"[\ufffd/#29\ufffd|\ufffd/#30\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd#30\ufffd"}:START_TAG_DIV_1: DO THIS ACTION ${"[\ufffd/#29\ufffd|\ufffd/#30\ufffd]"}:CLOSE_TAG_DIV:`,t=s.lc(t),i=$localize`:@@cu-edit-automation__summary␟73efd0fe764451e893f6535aea1e38805871486d␟6501161637282412262: Automation summary `,a=$localize`:@@cu-edit-automation__title_create-custom-automation␟9f0119da7446ea97983c630fdeb92d6fd44394dc␟4266711260273665488:Create Custom Automation`,c=$localize`:@@cu-edit-automation__title_edit-automation␟fc777a29f9b89d9046a5fe8bc313d602c926ea6b␟7590720382336782873:Edit Automation`,n=$localize`:@@cu-edit-automation__btn-txt_add-condition␟9432fc1bb2be089f77ec9933d0eaf348c1d9f175␟321733818761457680:Add Condition`,o=$localize`:@@cu-edit-automation__btn-txt_add-action␟e2ed6a2b27ef79ef7c5c54a5077ecd9e7ddb7dbb␟51883444329775670:Add Action`,r=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,l=$localize`:@@common_create␟70a67e04629f6d412db0a12d51820b480788d795␟5674286808255988565:Create`,u=$localize`:@@common_save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,d=$localize`:@@common_saving-1␟f5d0872d2b839ee38ea0bcf3e3c20c145594e513␟3407061818321766940:Saving...`,m=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,h=$localize`:@@paywall_text--automation-conditions␟a2e95641ffc571d6ba0d490d59a8cc16b9b48d1f␟4220408147648631259:Get complete control of when Automations are triggered by using filters and conditions for things like Statuses, Assignees, Priorities, and so much more.`,p=$localize`:@@paywall_email-subject--automation-conditions␟6d18631e7e06a296b3ad6c1ff8ca465c150ccc5e␟4805100580324091986:Please upgrade ClickUp so we can use Automation conditions`,b=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,g=$localize`:@@paywall_text--automation-multiple-actions␟daf011047b54a767332098a7a9999048852686ce␟5641225026140393123:Add multiple steps to your Automations so you can build more complex workflows.`,f=$localize`:@@paywall_email-subject--automation-multiple-actions␟0e4b7c4b73e5809bc99aad703eaf2d88832e8c21␟635133921519890701:Please upgrade ClickUp so we can use multiple Automation actions`,[["class","cu-edit-automation__container-header",4,"ngIf"],[1,"cu-edit-automation__container-body",3,"perfectScrollbar"],[1,"cu-edit-automation__container-body-column"],[1,"cu-edit-automation__container-body-column-container"],[1,"cu-edit-automation__container-body-title"],[1,"cu-edit-automation__container-body-title-icon"],[4,"ngIf"],[1,"cu-edit-automation__container-body-title-text"],e,[1,"cu-edit-automation__container-body-title-text-top"],[1,"cu-edit-automation__container-body-title-text-bot"],[1,"cu-edit-automation__container-body-actions","cu-edit-automation__container-body-actions_left-side"],[1,"cu-edit-automation__container-body-actions-top"],[3,"items","showSearch","autoFocusSearch","handleKeyboard","dropdownDisabled","onSelect"],[3,"parentType","parentId","values","condition","resource","trigger","triggerStateCondition","overrideType",4,"ngIf"],[3,"trigger","resource","parentType","parentId","values","dynamicValues","triggerInputValues",4,"ngIf"],["class","cu-edit-automation__container-body-actions cu-edit-automation__container-body-actions_left-side additional",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-edit-automation__container-body-add",3,"cuPopover","containerClass","outsideClick","trigger","hostElement","click",4,"ngIf"],["cdkDropList","",1,"cu-edit-automation__container-body-column-container",3,"cdkDropListDropped"],["class","cu-edit-automation__container-body-title-icon",4,"ngFor","ngForOf","ngForTrackBy"],t,["cdkDrag","","class","cu-edit-automation__container-body-actions",3,"cdkDragDisabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-edit-automation__container-body-arrow"],["icon","arrow-right-rounded"],[1,"cu-edit-automation__container-footer"],[1,"cu-edit-automation__container-badge"],i,[1,"cu-edit-automation__container-footer-text",3,"automation","isSummary"],[1,"cu-edit-automation__container-footer-buttons"],["class","cu-edit-automation__container-footer-button cancel",3,"click",4,"ngIf"],[1,"cu-edit-automation__container-footer-button","create",3,"disabled","click"],["conditionsPaywallTemplate",""],["actionsPaywallTemplate",""],["iconTemplate",""],[1,"cu-edit-automation__container-header"],[3,"selectedSubcategory","disabled","onSelect"],[1,"cu-edit-automation__container-header-location",2,"border","0"],["icon","cu2-pin",1,"cu-edit-automation__container-header-location-pin"],[1,"cu-edit-automation__container-header-location-value"],["class","cu-edit-automation__container-header-location-arrow","icon","cu2-arrow-down",4,"ngIf"],[1,"cu-edit-automation__container-header-title"],[1,"cu-edit-automation__container-header-title-breadcrumbs",3,"parent","parentType"],[1,"cu-edit-automation__container-header-exit"],["icon","cu2-close",3,"click"],["icon","cu2-arrow-down",1,"cu-edit-automation__container-header-location-arrow"],a,c,[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"parentType","parentId","values","condition","resource","trigger","triggerStateCondition","overrideType"],[3,"trigger","resource","parentType","parentId","values","dynamicValues","triggerInputValues"],[1,"cu-edit-automation__container-body-actions","cu-edit-automation__container-body-actions_left-side","additional"],[3,"parentType","parentId","resource","condition","values","conditions","dynamicValues","removeCondition","triggerCondition"],[1,"cu-edit-automation__container-body-add",3,"cuPopover","containerClass","outsideClick","trigger","hostElement","click"],["icon","cu2-plus"],["conditionElement",""],n,["cdkDrag","",1,"cu-edit-automation__container-body-actions",3,"cdkDragDisabled"],["cdkDragHandle","","class","cu-edit-automation__container-body-actions-drag-handle",3,"icon",4,"ngIf"],["class","cu-edit-automation__container-body-actions-delete",4,"ngIf"],[3,"resource","parentType","action","actions","trigger","parentId","variables","dynamicValues","interpolatedInputChange","mappedValueChange","valueChange"],[3,"automation","action"],["cdkDragHandle","",1,"cu-edit-automation__container-body-actions-drag-handle",3,"icon"],[1,"cu-edit-automation__container-body-actions-delete"],[1,"cu-edit-automation__container-body-actions-delete-icon",3,"icon","click"],["addActionElement",""],o,[1,"cu-edit-automation__container-footer-button","cancel",3,"click"],r,l,u,d,["badge",m,"text",h,"emailSubject",p,3,"title","upgradeButtonText","amplitudeLabel","upgradeClicked"],["badge",b,"text",g,"emailSubject",f,3,"title","upgradeButtonText","amplitudeLabel","upgradeClicked"],["class","cu-edit-automation__container-body-title-icon-clickup",3,"src","alt",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"cu-edit-automation__container-body-title-icon-clickup",3,"src","alt"],[1,"cu-edit-automation__container-body-title-icon-auto",3,"icon"]]},template:function(e,t){1&e&&(s.bd(0,oe,13,8,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.cc(4,"div",4),s.cc(5,"div",5),s.bd(6,le,1,7,void 0,6),s.bc(),s.cc(7,"div",7),s.mc(8,8),s.Xb(9,"div",9),s.Xb(10,"div",10),s.jc(),s.bc(),s.bc(),s.cc(11,"div",11),s.cc(12,"div",12),s.cc(13,"cu-dropdown-list",13),s.qc("onSelect",function(e){return t.changeTrigger(e)}),s.cc(14,"cu-edit-automation-dropdown"),s.dd(15),s.bc(),s.bc(),s.bc(),s.bd(16,ue,1,6,"cu-schema-automation-trigger-state-condition",14),s.vc(17,"async"),s.bd(18,de,1,6,"cu-schema-automation-trigger-input",15),s.bc(),s.bd(19,me,2,7,"div",16),s.vc(20,"filterStateCondition"),s.bd(21,he,5,5,"div",17),s.vc(22,"filterStateCondition"),s.bc(),s.bc(),s.cc(23,"div",2),s.cc(24,"div",18),s.qc("cdkDropListDropped",function(e){return t.actionDropped(e)}),s.cc(25,"div",4),s.bd(26,be,2,7,"div",19),s.cc(27,"div",7),s.mc(28,20),s.Xb(29,"div",9),s.Xb(30,"div",10),s.jc(),s.bc(),s.bc(),s.bd(31,ve,10,24,"div",21),s.bd(32,ye,5,5,"div",17),s.bc(),s.bc(),s.cc(33,"div",22),s.Xb(34,"div",23),s.bc(),s.bc(),s.cc(35,"div",24),s.cc(36,"div",25),s.gc(37,26),s.bc(),s.Xb(38,"cu-automation-label",27),s.cc(39,"div",28),s.bd(40,ke,2,0,"button",29),s.cc(41,"button",30),s.qc("click",function(){return t.save()}),s.bd(42,Ie,2,0,"ng-container",6),s.bd(43,we,2,0,"ng-container",6),s.bd(44,Te,2,0,"ng-container",6),s.bc(),s.bc(),s.bc(),s.bd(45,xe,1,3,"ng-template",null,31,s.cd),s.bd(47,Ce,1,3,"ng-template",null,32,s.cd),s.bd(49,De,3,2,"ng-template",null,33,s.cd)),2&e&&(s.Dc("ngIf",!t.inlineBlockComponent),s.Ib(6),s.Dc("ngIf",null==t.icons?null:t.icons.trigger),s.Ib(7),s.Dc("items",t.triggerMenuItems)("showSearch",!0)("autoFocusSearch",!0)("handleKeyboard",!0)("dropdownDisabled",1===(null==t.triggerMenuItems?null:t.triggerMenuItems.length)),s.Ib(2),s.fd(" ",(null==t.automation.trigger||null==t.automation.trigger.schema.display?null:t.automation.trigger.schema.display.title)||""," "),s.Ib(1),s.Dc("ngIf",s.wc(17,29,t.stateCondition$)),s.Ib(2),s.Dc("ngIf",t.automation.trigger.schema.input_schema),s.Ib(1),s.Dc("ngForOf",s.xc(20,31,t.automation.trigger.triggerConditions,t.automation.resource.key))("ngForTrackBy",t.trackById),s.Ib(2),s.Dc("ngIf",t.automation.conditions.length&&s.xc(22,34,t.automation.trigger.triggerConditions,t.automation.resource.key)<t.automation.conditions),s.Ib(2),s.Ob("cu-edit-automation__container-body-column-email","email"===(null==t.automation||null==t.automation.actions[0]||null==t.automation.actions[0].action?null:t.automation.actions[0].action.key)),s.Ib(3),s.Dc("ngForOf",null==t.icons?null:t.icons.actions)("ngForTrackBy",t.trackByLabel),s.Ib(5),s.Dc("ngForOf",t.automation.actions)("ngForTrackBy",t.trackByActionKey),s.Ib(1),s.Dc("ngIf",t.automation.actions.length<t.MAX_ACTIONS),s.Ib(3),s.Ob("valid",t.isValid),s.Ib(3),s.Dc("automation",t.automation)("isSummary",!0),s.Ib(2),s.Dc("ngIf",!t.inlineBlockComponent),s.Ib(1),s.Dc("disabled",!t.isValid||t.loading.create||t.loading.update),s.Ib(1),s.Dc("ngIf",!t.automation.id&&!t.loading.create),s.Ib(1),s.Dc("ngIf",t.automation.id&&!t.loading.update),s.Ib(1),s.Dc("ngIf",t.loading.create||t.loading.update))},directives:[c.q,g.a,M.a,R.a,c.p,P.d,u.a,G.a,F.a,V.a,c.x,q.a,X.a,B.a,K.a,P.a,W.a,J,P.b,Y.a],pipes:[c.b,ee.a,te.a,ie.a],styles:['.cu-edit-automation__container{display:flex;flex-direction:column;flex-grow:1;height:100%}.cu-edit-automation__container-header{width:100%;height:70px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:0 20px;background:#fff;box-shadow:0 5px 20px rgba(0,0,0,.1);border-radius:4px;position:relative}.dark-theme .cu-edit-automation__container-header{background:#384047}.cu-edit-automation__container-header .cu-category-list-dropdown{min-width:0}.cu-edit-automation__container-header-location{height:40px;border-radius:4px;display:flex;align-items:center;padding:0 12px;border:1px solid #e9ebf0}.dark-theme .cu-edit-automation__container-header-location{border-color:#1e272e}.cu-edit-automation__container-header-location-pin{width:14px;height:16px;fill:var(--theme-main-color);margin-right:10px}.cu-edit-automation__container-header-location-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:14px;color:#292d34;margin-right:10px;flex-grow:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-header-location-value{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-header-location-value{color:#d5d6d7}.cu-edit-automation__container-header-location-arrow{width:7px;height:4px;fill:#b9bec7}.cu-edit-automation__container-header-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:22px;line-height:21px;position:relative;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-header-title{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-header-title{color:#d5d6d7}.cu-edit-automation__container-header-title-breadcrumbs{display:flex;align-items:center;justify-content:center;position:absolute;left:0;right:0}.cu-edit-automation__container-header-exit{display:flex;justify-content:flex-end}.cu-edit-automation__container-header-exit .icon{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;height:16px;width:16px;fill:#b9bec7;cursor:pointer}.cu-edit-automation__container-header-exit .icon:hover{transform:rotate(180deg)}.cu-edit-automation__container-body{display:flex;flex-grow:1;width:100%;height:0}.cu-edit-automation__container-body-arrow{width:70px;height:70px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;border-radius:50%;border:1px solid #e9ebf0;display:flex;justify-content:center;align-items:center;z-index:10;background-color:#fafbfc}.dark-theme .cu-edit-automation__container-body-arrow{background:#384047;border-color:#1e272e}.cu-edit-automation__container-body-arrow .icon{fill:#7c828d;height:20px;width:30px}.dark-theme .cu-edit-automation__container-body-arrow .icon{fill:#d5d6d7}.cu-edit-automation__container-body-column{height:100%;width:50%;padding:35px 80px;display:flex;align-items:flex-start;overflow-y:auto;background-color:#fafbfc}.cu-os-win .cu-edit-automation__container-body-column{scrollbar-width:thin}.cu-os-win .cu-edit-automation__container-body-column::-webkit-scrollbar{background-color:#fafbfc;width:16px;height:16px}.cu-os-win .cu-edit-automation__container-body-column::-webkit-scrollbar-track,.cu-os-win .cu-edit-automation__container-body-column::-webkit-scrollbar-track:hover{background-color:#fafbfc}.cu-os-win .cu-edit-automation__container-body-column::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fafbfc}.cu-os-win .cu-edit-automation__container-body-column::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fafbfc}.cu-os-win .cu-edit-automation__container-body-column::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar,.cu-os-win .dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar,.cu-os-win.dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-track{background-color:#2b343b}.cu-os-win.dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-track:hover{background-color:#2b343b}.cu-os-win.dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-edit-automation__container-body-column::-webkit-scrollbar-thumb:hover{border-color:#2b343b}.cu-edit-automation__container-body-column-email{padding:35px 60px}.cu-edit-automation__container-body-column-email .cu-edit-automation__container-body-actions,.cu-edit-automation__container-body-column-email .cu-edit-automation__container-body-column-container{max-width:512px}.dark-theme .cu-edit-automation__container-body-column{background-color:#2b343b}.cu-edit-automation__container-body-column:first-of-type{border-right:1px solid #e9ebf0}.dark-theme .cu-edit-automation__container-body-column:first-of-type{border-color:#1e272e}.cu-edit-automation__container-body-column-container{display:flex;flex-direction:column;position:relative;min-width:0;width:100%;max-width:350px}.cu-edit-automation__container-body-column-container:after{content:"";position:absolute;left:30px;top:0;margin:auto;height:100%;width:1px;border:1px dashed #e9ebf0}.dark-theme .cu-edit-automation__container-body-column-container:after{border-color:#1e272e}.cu-edit-automation__container-body-title{background:#fff;box-shadow:0 5px 15px rgba(0,0,0,.1);border-radius:30px;height:60px;display:flex;align-items:center;padding:0 40px 0 12px;position:relative;z-index:1;align-self:flex-start}.dark-theme .cu-edit-automation__container-body-title{background:#384047}.cu-edit-automation__container-body-title-icon{width:36px;height:36px;border-radius:50%;border:1px solid #e9ebf0;display:flex;justify-content:center;align-items:center;flex-shrink:0;background:#fff;z-index:10}.dark-theme .cu-edit-automation__container-body-title-icon{border-color:#1e272e}.cu-edit-automation__container-body-title-icon+.cu-edit-automation__container-body-title-icon{margin-left:-12px;z-index:0}.cu-edit-automation__container-body-title-icon-clickup{height:auto;width:18px}.cu-edit-automation__container-body-title-icon-auto{width:20px;height:20px}.cu-edit-automation__container-body-title-text{margin-left:12px}.cu-edit-automation__container-body-title-text-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:24px;line-height:1;color:#292d34;padding-bottom:2px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-title-text-top{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-body-title-text-top{color:#d5d6d7}.cu-edit-automation__container-body-title-text-bot{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#818193}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-title-text-bot{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-body-title-text-bot{color:#828588}.cu-edit-automation__container-body-actions{background:#fff;box-shadow:0 5px 15px rgba(0,0,0,.1);border-radius:6px;width:100%;max-width:350px;height:auto;position:relative;margin-top:24px;z-index:2}.dark-theme .cu-edit-automation__container-body-actions{background:#384047}.cu-edit-automation__container-body-actions_left-side+.cu-edit-automation__container-body-actions_left-side{margin-top:40px;padding-top:5px}.cu-edit-automation__container-body-actions_left-side+.cu-edit-automation__container-body-actions_left-side:before{content:"If this is true";display:block;position:absolute;top:-25px;left:45px;font:italic 400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-edit-automation__container-body-actions_left-side+.cu-edit-automation__container-body-actions_left-side:before{color:#828588}.cu-edit-automation__container-body-actions-drag-handle{width:20px;height:20px;position:absolute;left:-25px;top:calc(50% - 10px);cursor:pointer}.cu-edit-automation__container-body-actions-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:14px;color:#292d34;margin:6px 0 2px;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-actions-title{font-family:var(--global-font-support)}}.cu-edit-automation__container-body-actions-item-margin{margin:10px 14px 0}.cu-edit-automation__container-body-actions-top{padding:12px;display:flex}.cu-edit-automation__container-body-actions-top_resource{padding-bottom:0}.cu-edit-automation__container-body-actions-top_has-inputs{border-bottom:1px solid #e9ebf0;margin-bottom:6px}.cu-edit-automation__container-body-actions-top_has-inputs:last-child{border-bottom:0}.cu-edit-automation__container-body-actions-top .cu-dropdown-list{flex-grow:1;max-width:100%}.cu-edit-automation__container-body-actions-top .cu-dropdown__toggle_disabled{cursor:not-allowed;opacity:.7}.dark-theme .cu-edit-automation__container-body-actions-top{border-color:#1e272e}.cu-edit-automation__container-body-actions-delete{display:flex;align-items:center;justify-content:center;margin-left:10px}.cu-edit-automation__container-body-actions-delete-icon{width:16px;height:16px;cursor:pointer;fill:#fd71af}.cu-edit-automation__container-body-actions-row{padding:6px 14px;display:flex;min-height:46px;align-items:center;max-width:100%}.cu-automation-label_summary .cu-edit-automation__container-body-actions-row,.cu-automation-label_summary .cu-edit-automation__container-body-actions-row:last-of-type,.cu-automation-tab-manage__item .cu-edit-automation__container-body-actions-row{padding:0;margin:0}.cu-edit-automation__container-body-actions-row_custom_field{padding-left:12px}.cu-edit-automation__container-body-actions-row:last-of-type{margin-bottom:6px}.cu-edit-automation__container-body-actions-row .cu-dropdown,.cu-edit-automation__container-body-actions-row .cu-dropdown-list{flex-grow:1;max-width:100%}.cu-edit-automation__container-body-actions-row_multiline-labels{display:block;padding-left:12px}.cu-edit-automation__container-body-actions-row_multiline-labels .cu-edit-automation__container-body-actions-label{text-transform:uppercase;font-size:11px;font-weight:500;margin-bottom:6px}.cu-edit-automation__container-body-actions-row .cu-user-group_due-date,.cu-edit-automation__container-body-actions-row .due-date__row{margin-left:0}.cu-edit-automation__container-body-actions-row-authentication{display:flex;justify-content:space-between;align-self:center}.cu-edit-automation__container-body-actions-row-authentication .cu-form__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:13px;height:36px;cursor:text;word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;color:#292d34;border-radius:4px;padding:9px 12px;border:1px solid #e9ebf0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-actions-row-authentication .cu-form__input{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-body-actions-row-authentication .cu-form__input{color:#d5d6d7;border-color:#1e272e}.cu-edit-automation__container-body-actions-row-authentication .cu-form__input+.cu-btn{margin-left:10px}.cu-edit-automation__container-body-actions-row .max-width-half{max-width:48%}.cu-edit-automation__container-body-actions-row__condition{flex-direction:column;width:100%;flex:1 1 auto;align-items:stretch;padding:0}.cu-edit-automation__container-body-actions-row-email .cu-edit-automation__container-body-actions-label{font-size:12px;color:#7c828d}.cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_From{border-radius:4px;border:1px solid #e9ebf0;height:40px;display:flex;align-items:center;padding:0 12px;background:#fafbfc;cursor:not-allowed}.dark-theme .cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_From{background:transparent;opacity:.6}.cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_From cu-automation-field-value-dynamic{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:rgba(41,45,52,.4)}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_From cu-automation-field-value-dynamic{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_From cu-automation-field-value-dynamic{color:#d5d6d7}.dark-theme .cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_From{border-color:#1e272e}.cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_Subject .cu-automation-field-value-text-input__input_focus{border-bottom:1px solid #e9ebf0;border-radius:4px 4px 0 0;margin-bottom:12px}.dark-theme .cu-edit-automation__container-body-actions-row-email .cu-automation-field-value_stretch_Subject .cu-automation-field-value-text-input__input_focus{border-color:#1e272e}.dark-theme .cu-edit-automation__container-body-actions-row-email .cu-email-communicators__user-name{color:#b9bec7}.cu-edit-automation__container-body-actions-row-email .cu-email-communicators__row{margin:0!important;min-height:40px;padding:8px 12px}.cu-edit-automation__container-body-actions-row-email .cu-email-communicators__from{height:100%}.cu-edit-automation__container-body-actions-row-email .cu-email-communicators__from-emails .cu-search__input{margin-left:0!important}.cu-edit-automation__container-body-actions-row-email .cu-email-communicators__user{cursor:default!important}.cu-edit-automation__container-body-actions-row-email .cu-badge-input-fields{margin:0;padding:0}.cu-edit-automation__container-body-actions-row-email .cu-automation-field-value-text-input__input .ql-editor.ql-blank:before{font-size:14px;color:rgba(41,45,52,.4);font-style:normal;left:12px;top:11px}.cu-edit-automation__container-body-actions-row-email .cu-automation-field-value-text-input__input .ql-editor{min-height:40px}.cu-edit-automation__container-body-actions-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:14px;display:flex;align-items:center;align-self:flex-start;margin:0 10px 0 0;color:#292d34;min-width:40px;min-height:40px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-actions-label{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-body-actions-label{color:#d5d6d7}.cu-edit-automation__container-body-actions-row_multiline-labels .cu-edit-automation__container-body-actions-label{min-height:0}.cu-edit-automation__container-body-actions-label_assignee{width:150px}.cu-edit-automation__container-body-actions-label_change_followers{width:170px}.cu-edit-automation__container-body-actions-label_change_tags,.cu-edit-automation__container-body-actions-label_due_date,.cu-edit-automation__container-body-actions-label_start_date,.cu-edit-automation__container-body-actions-label_time_spent{width:110px}.cu-edit-automation__container-body-actions-label_create_subtask,.cu-edit-automation__container-body-actions-label_create_task{width:120px}.cu-edit-automation__container-body-actions-label-icon{width:16px;height:16px;fill:#292d34;margin-right:7px}.dark-theme .cu-edit-automation__container-body-actions-label-icon{fill:#d5d6d7}.cu-edit-automation__container-body-actions-label-question{display:inline-block;width:14px;height:14px;cursor:pointer;margin:-2px 0 0 4px;fill:#ccc}.dark-theme .cu-edit-automation__container-body-actions-label-question{fill:#828588}.cu-edit-automation__container-body-actions-icon{width:14px;height:16px;fill:#7c828d;margin-right:10px}.dark-theme .cu-edit-automation__container-body-actions-icon{fill:#1e272e}.cu-edit-automation__container-body-actions-divider{margin:12px 0 12px 12px;position:relative;z-index:1}.cu-edit-automation__container-body-actions-divider span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:9px;padding:4px 5px;color:#7c828d;background:#e9ebf0;border:1px solid rgba(185,190,199,.5);border-radius:10px;display:inline-block}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-actions-divider span{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-body-actions-divider span{color:#d5d6d7}.cu-edit-automation__container-body-actions-item-divider{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;color:#292d34;width:100%;position:relative;text-transform:uppercase;text-align:center;margin:12px 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-actions-item-divider{font-family:var(--global-font-support)}}.cu-edit-automation__container-body-actions-item-divider span{display:inline-block;padding:0 10px;background-color:#fff;position:relative;z-index:1}.cu-edit-automation__container-body-actions-item-divider:after{content:"";position:absolute;left:0;bottom:0;top:0;margin:auto;width:100%;height:1px;background:#e9ebf0}.cu-edit-automation__container-body-actions.add-padding{padding-left:12px}.cu-edit-automation__container-body-actions.additional .cu-automation-field-value_stretch.additional{min-width:110px;margin-left:10px}.cu-edit-automation__container-body-actions.additional .cu-edit-automation__container-body-actions-delete{margin-left:7px}.cu-edit-automation__container-body-actions.additional .cu-priority-filter__value{font-size:13px}.cu-edit-automation__container-body-add{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:11px;color:var(--theme-main-color);display:flex;align-items:center;margin-top:16px;margin-left:23px;cursor:pointer;position:relative;z-index:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-body-add{font-family:var(--global-font-support)}}.cu-edit-automation__container-body-add:hover{color:var(--theme-main-color-dark)}.cu-edit-automation__container-body-add:hover .icon{background-color:var(--theme-main-color-dark)}.cu-edit-automation__container-body-add .icon{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:var(--theme-main-color);border-radius:50%;height:16px;width:16px;margin-right:12px;padding:3px;fill:#fff}.cu-edit-automation__container-footer{width:100%;position:relative;min-height:138px;border-radius:0 0 4px 4px;display:flex;flex-direction:column;background:#fff;border-top:1px solid #e9ebf0}.dark-theme .cu-edit-automation__container-footer{background:#384047;border-color:#1e272e}.cu-edit-automation__container-footer .cu-edit-automation__container-badge{position:absolute;top:-15px;left:0;right:0;margin:0 auto;width:200px;z-index:10}.cu-edit-automation__container-footer-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:20px;line-height:19px;color:#292d34;display:flex;align-items:center;justify-content:center;padding-top:24px;margin:auto;flex-wrap:wrap}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-footer-text{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-footer-text{color:#d5d6d7}.cu-edit-automation__container-footer-text strong{font-weight:700;padding:0 6px}.cu-edit-automation__container-footer-text.placeholder span{margin:0 5px;color:#292d34;border-bottom:1px dashed #292d34}.dark-theme .cu-edit-automation__container-footer-text.placeholder span{color:#828588;border-color:#828588}.cu-edit-automation__container-footer-buttons{display:flex;justify-content:center;margin:20px}.cu-edit-automation__container-footer-button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:700;font-size:14px;line-height:14px;width:100px;height:40px;display:flex;justify-content:center;align-items:center;border-radius:4px;margin:0 7px;cursor:pointer;border:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-footer-button{font-family:var(--global-font-support)}}.cu-edit-automation__container-footer-button.cancel{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#e9ebf0;color:#7c828d}.cu-edit-automation__container-footer-button.cancel:hover{background-color:#e4e4e4}.cu-edit-automation__container-footer-button.create{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:var(--theme-main-color);color:#fff}.cu-edit-automation__container-footer-button.create:hover{background-color:var(--theme-main-color-dark)}.cu-edit-automation__container-footer-button:disabled{opacity:.5;cursor:not-allowed}.cu-edit-automation__container-footer .cu-custom-field__static{margin-left:0;font-size:19px}.cu-edit-automation__container-badge{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:700;font-size:12px;line-height:12px;color:#7c828d;background:#fff;border:1px solid #e9ebf0;box-sizing:border-box;border-radius:30px;height:30px;text-transform:uppercase;padding:0 20px;display:flex;align-items:center;justify-content:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-automation__container-badge{font-family:var(--global-font-support)}}.dark-theme .cu-edit-automation__container-badge{background:#384047;border-color:#1e272e;color:#d5d6d7}.cu-edit-automation__banner{display:flex;border-radius:3px;margin:12px;padding:10px;flex-shrink:0;position:relative;background:#fffee4}.dark-theme .cu-edit-automation__banner{background:#ffb122}.cu-edit-automation__banner-desc{font:400 12px/18px Gotham Pro,Proxima Nova,arial,serif;color:#e8a943}.dark-theme .cu-edit-automation__banner-desc{color:#605523}.cu-edit-automation__banner-link{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:500;color:#e8a943;border-bottom:1px solid #e8a943;white-space:nowrap}.dark-theme .cu-edit-automation__banner-link{color:#605523;border-bottom-color:#605523}.cu-edit-automation__banner-link:hover{border-bottom-color:transparent}@media screen and (max-width:1200px){.cu-edit-automation__container-body-column{padding:35px 50px}.cu-edit-automation__container-body-actions{width:100%}}'],encapsulation:2,changeDetection:0}),e})();var je=i("gwei"),Ne=i("LRne");function Ee(e,t){1&e&&s.Yb(0)}let $e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-resource-info"]],inputs:{resource:"resource",component:"component"},decls:1,vars:1,consts:[[4,"ngxComponentOutlet"]],template:function(e,t){1&e&&s.bd(0,Ee,1,0,"ng-container",0),2&e&&s.Dc("ngxComponentOutlet",t.component)},directives:[H.a],encapsulation:2,changeDetection:0}),e})();var Pe=i("Kj3r"),Le=i("SxV6");function Ue(e,t){if(1&e&&s.Xb(0,"img",2),2&e){const e=s.uc();s.Dc("ngClass",e.resource)("src",e.resource,s.Xc)("alt",e.label)}}function ze(e,t){if(1&e&&s.Xb(0,"div",3),2&e){const e=s.uc();s.ad("fill",e.color)("stroke",e.strokeIcon),s.Dc("ngClass",e.resource)("icon",e.resource)}}let Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-catalog-icon"]],inputs:{type:"type",resource:"resource",color:"color",label:"label",strokeIcon:"strokeIcon"},decls:3,vars:2,consts:[["class","icon",3,"ngClass","src","alt",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"icon",3,"ngClass","src","alt"],[3,"ngClass","icon"]],template:function(e,t){if(1&e&&(s.bd(0,Ue,1,3,"img",0),s.bd(1,ze,1,6,"ng-template",null,1,s.cd)),2&e){const e=s.Rc(2);s.Dc("ngIf","url"===t.type)("ngIfElse",e)}},directives:[c.q,c.o,u.a],encapsulation:2,changeDetection:0}),e})();function Re(e,t){1&e&&s.Yb(0)}function Ge(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"div",3,4),s.qc("mouseenter",function(){s.Uc(e);const t=s.Rc(2);return s.uc().mouseEnter(t)})("mouseleave",function(){return s.Uc(e),s.uc().mouseLeave()}),s.vc(4,"async"),s.bd(5,Re,1,0,"ng-container",5),s.bc(),s.Zb()}if(2&e){const e=s.uc(),t=s.Rc(5),i=s.Rc(3);s.Ib(1),s.Ob("cu-automation-tab-browse__body-disabled",s.wc(4,5,e.isDisabled$)),s.Dc("cuPopover",t)("outsideClick",!0),s.Ib(4),s.Dc("ngTemplateOutlet",i)}}function Fe(e,t){if(1&e&&(s.cc(0,"div",6),s.cc(1,"div",7),s.Xb(2,"cu-automation-catalog-icon",8),s.Xb(3,"div",9),s.Xb(4,"cu-automation-catalog-icon",8),s.bc(),s.ac(5),s.mc(6,10),s.Xb(7,"span",11),s.Xb(8,"span",11),s.jc(),s.Zb(),s.bc()),2&e){const e=s.uc();s.Ib(2),s.Dc("type",e.preset.icons.from.icon.type)("resource",e.preset.icons.from.icon.resource)("label",e.preset.icons.from.name)("color",e.preset.icons.from.strokeIcon?"none":e.preset.icons.from.color)("strokeIcon",e.preset.icons.from.strokeIcon?e.preset.icons.from.color:"none"),s.Ib(2),s.Dc("type",e.preset.icons.to.icon.type)("resource",e.preset.icons.to.icon.resource)("label",e.preset.icons.to.name)("color",e.preset.icons.to.strokeIcon?"none":e.preset.icons.to.color)("strokeIcon",e.preset.icons.to.strokeIcon?e.preset.icons.to.color:"none"),s.Ib(4),s.kc(e.preset.trigger.display.title||e.preset.trigger.display.label)(e.preset.action.display.verb)(e.preset.action.display.noun),s.hc(6)}}function Ve(e,t){if(1&e){const e=s.dc();s.cc(0,"div",12),s.qc("click",function(){return s.Uc(e),s.uc().automationPopover.hide()})("mouseenter",function(){return s.Uc(e),s.uc().hideHover$.next(!1)})("mouseleave",function(){s.Uc(e);const t=s.uc();return t.hideHover$.next(!0),t.automationPopover.hide()}),s.vc(1,"async"),s.bc()}if(2&e){const e=s.uc();let t=null;s.Dc("innerHTML",null==(t=s.wc(1,1,e.tooltip))?null:t.content,s.Vc)}}let qe=(()=>{class e{constructor(e){this.automationStrategies=e,this.create=new s.o,this.hideHover$=new N.a,this.destroy$=new N.a}onClick(e){this.resourceDisabledResource||this.isDisabledSnapshot?(e.stopPropagation(),e.preventDefault()):this.resourceStrategy.onStartingAutomation?this.resourceStrategy.onStartingAutomation(this.teamId,this.preset.trigger.key,this.preset.action.key).pipe(Object(p.a)(1)).subscribe(e=>{e&&this.create.emit(this.preset)}):this.create.emit(this.preset)}get isTriggerResourceDisabled(){var e;return(null===(e=this.triggerStrategy)||void 0===e?void 0:e.disableResource)?this.triggerStrategy.disableResource(this.teamId):Object(Ne.a)({disable:!1})}get isActionResourceDisabled(){var e;return(null===(e=this.actionStrategy)||void 0===e?void 0:e.disableResource)?this.actionStrategy.disableResource(this.teamId):Object(Ne.a)({disable:!1})}get isDisabled$(){return Object(E.a)([this.isTriggerResourceDisabled,this.isActionResourceDisabled]).pipe(Object(m.a)(([e,t])=>this.resourceDisabled||e.disable||t.disable))}get tooltip(){return Object(E.a)([this.isTriggerResourceDisabled,this.isActionResourceDisabled]).pipe(Object(m.a)(([e,t])=>this.resourceDisabledResource||e.tooltip||t.tooltip))}get isDisabledSnapshot(){const e=this.getObsSnapShot(this.isTriggerResourceDisabled),t=this.getObsSnapShot(this.isActionResourceDisabled);return(null==e?void 0:e.disable)||t.disable}ngOnChanges(e){var t,i,a,c,n,o;e.preset&&(this.triggerStrategy=this.automationStrategies.getStrategy(null===(a=null===(i=null===(t=this.preset)||void 0===t?void 0:t.icons)||void 0===i?void 0:i.from)||void 0===a?void 0:a.resourceKey),this.actionStrategy=this.automationStrategies.getStrategy(null===(o=null===(n=null===(c=this.preset)||void 0===c?void 0:c.icons)||void 0===n?void 0:n.to)||void 0===o?void 0:o.resourceKey))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.hideHover$.pipe(Object(Pe.a)(200),Object(h.a)(e=>e),Object(D.a)(this.destroy$)).subscribe(()=>{this.automationPopover.hide()})}mouseEnter(e){this.tooltip.pipe(Object(Le.a)()).subscribe(t=>{(null==t?void 0:t.content)&&e.show()})}mouseLeave(){this.hideHover$.next(!0)}getObsSnapShot(e){let t;return e.pipe(Object(p.a)(1)).subscribe(e=>t=e),t}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(U.d))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-catalog-preset"]],viewQuery:function(e,t){if(1&e&&s.jd(K.a,1),2&e){let e;s.Qc(e=s.rc())&&(t.automationPopover=e.first)}},hostBindings:function(e,t){1&e&&s.qc("click",function(e){return t.onClick(e)})},inputs:{preset:"preset",teamId:"teamId",resourceDisabled:"resourceDisabled",resourceStrategy:"resourceStrategy",resourceDisabledResource:"resourceDisabledResource"},outputs:{create:"create"},features:[s.Gb],decls:6,vars:4,consts:function(){let e;return e=$localize`:@@cu-automation-tab-browse__when-then␟85179450b412d10ee83124ce8feaafbba4ac0bfb␟1224987615944022208: When ${"[\ufffd#7\ufffd|\ufffd#8\ufffd]"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#7\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_SPAN: then ${"[\ufffd#7\ufffd|\ufffd#8\ufffd]"}:START_TAG_SPAN: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#7\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_SPAN:`,e=s.lc(e),[[4,"ngIf","ngIfElse"],["presetTemplate",""],["automationDisabledTemplate",""],[3,"cuPopover","trigger","outsideClick","mouseenter","mouseleave"],["automationMessage","cuPopover","popover","cuPopover"],[4,"ngTemplateOutlet"],[1,"cu-automation-tab-browse__body-preset-item"],[1,"cu-automation-tab-browse__body-preset-item-icons"],[3,"type","resource","label","color","strokeIcon"],["icon","cu2-double-arrow-right",1,"icon-separator"],e,[1,"cu-automation-tab-browse__body-preset-item-highlight"],[3,"innerHTML","click","mouseenter","mouseleave"]]},template:function(e,t){if(1&e&&(s.bd(0,Ge,6,7,"ng-container",0),s.vc(1,"async"),s.bd(2,Fe,9,13,"ng-template",null,1,s.cd),s.bd(4,Ve,2,3,"ng-template",null,2,s.cd)),2&e){const e=s.Rc(3);s.Dc("ngIf",s.wc(1,2,t.isDisabled$))("ngIfElse",e)}},directives:[c.q,K.a,c.x,Me,u.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e})();function Xe(e,t){if(1&e&&s.Xb(0,"cu-automation-resource-info",7),2&e){const e=s.uc();s.Dc("resource",e.category.label)("component",e.resourceComponent)}}function Be(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-automation-catalog-preset",8),s.qc("create",function(){s.Uc(e);const i=t.$implicit;return s.uc().onStart.emit(i)}),s.bc()}if(2&e){const e=t.$implicit,i=s.uc();s.Dc("preset",e)("resourceStrategy",i.resourceStrategy)("teamId",i.teamId)}}function Ke(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"div",9),s.qc("click",function(){return s.Uc(e),s.uc().showMore()}),s.Xb(2,"div",10),s.cc(3,"div",11),s.gc(4,12),s.bc(),s.bc(),s.Zb()}}let We=(()=>{class e{constructor(e){this.automationStrategies=e,this.onStart=new s.o,this.trackByKey=Object(d.d)("key"),this.limitCount=5}get resourceComponent(){var e,t;if(null===(e=this.resourceStrategy)||void 0===e?void 0:e.getResourceInfo)return null===(t=this.resourceStrategy)||void 0===t?void 0:t.getResourceInfo(this.category.resource)}ngOnChanges(e){e.category&&(this.resourceStrategy=this.automationStrategies.getStrategy(this.category.resource))}get isResourceDisabled(){var e;return(null===(e=this.resourceStrategy)||void 0===e?void 0:e.disableResource)?this.actionStrategy.disableResource(this.teamId):Object(Ne.a)({disable:!1})}get tooltip(){return this.isResourceDisabled.pipe(Object(m.a)(e=>e.tooltip))}get isDisabledSnapshot(){return this.getObsSnapShot(this.isResourceDisabled).disable}showMore(){const e=this.limitCount+5;this.limitCount=this.category.presets.length-1>e?e:this.category.presets.length}getObsSnapShot(e){let t;return e.pipe(Object(p.a)(1)).subscribe(e=>t=e),t}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(U.d))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-catalog-section"]],inputs:{category:"category",teamId:"teamId"},outputs:{onStart:"onStart"},features:[s.Gb],decls:9,vars:9,consts:function(){let e;return e=$localize`:@@common_show-more␟2dbe38a8c1c2a8c0915103caee44732d81e9acce␟6414888336685395726: Show More `,[[1,"cu-automation-tab-browse__body-section"],[1,"cu-automation-tab-browse__body-header"],[1,"cu-automation-tab-browse__body-header-label"],[3,"resource","component",4,"ngIf"],[1,"cu-automation-tab-browse__body-preset-list"],[3,"preset","resourceStrategy","teamId","create",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"resource","component"],[3,"preset","resourceStrategy","teamId","create"],[1,"cu-automation-tab-browse__body-preset-item","cu-automation-tab-browse__body-preset-item_more",3,"click"],["icon","cu2-double-arrow-right",1,"cu-automation-tab-browse__body-preset-item-more-icon"],[1,"cu-automation-tab-browse__body-preset-item-more-text"],e]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.dd(3),s.bc(),s.bc(),s.bd(4,Xe,1,2,"cu-automation-resource-info",3),s.cc(5,"div",4),s.bd(6,Be,1,3,"cu-automation-catalog-preset",5),s.vc(7,"slice"),s.bd(8,Ke,5,0,"ng-container",6),s.bc(),s.bc()),2&e&&(s.Ib(3),s.fd(" ",t.category.label,": "),s.Ib(1),s.Dc("ngIf",t.resourceComponent),s.Ib(2),s.Dc("ngForOf",s.yc(7,5,t.category.presets,0,t.limitCount))("ngForTrackBy",t.trackByKey),s.Ib(2),s.Dc("ngIf",t.category.presets.length>t.limitCount))},directives:[c.q,c.p,$e,qe,u.a],pipes:[c.A],encapsulation:2,changeDetection:0}),e})();var He=i("N3Tp");const Ze=["bodyScroll"];function Qe(e,t){1&e&&s.Xb(0,"cu-loader")}function Je(e,t){1&e&&(s.cc(0,"label",4),s.ac(1),s.gc(2,12),s.Zb(),s.dd(3,": "),s.bc())}function Ye(e,t){if(1&e){const e=s.dc();s.ac(0),s.bd(1,Je,4,0,"label",10),s.cc(2,"cu-automation-category",11),s.qc("selectCategory",function(t){return s.Uc(e),s.uc().selectCategory(t)}),s.bc(),s.Zb()}if(2&e){const e=t.$implicit,i=t.ngForOf,a=t.index,c=s.uc();s.Ib(1),s.Dc("ngIf",!e.internal&&(null==i[a-1]?null:i[a-1].internal)),s.Ib(1),s.Dc("category",e)("selectedCategory",c.selectedCategory)("showPresets",c.showPresets)}}function et(e,t){if(1&e&&(s.cc(0,"div",14),s.cc(1,"div",15),s.Xb(2,"cu-automation-category-icon-soon",16),s.bc(),s.dd(3),s.cc(4,"div",17),s.gc(5,18),s.bc(),s.bc()),2&e){const e=t.$implicit;s.Ib(1),s.Dc("ngClass","cu-automation-tab-browse__sidebar-category-icon_"+(null==e?null:e.key)),s.Ib(1),s.Dc("type",null!=e&&null!=e.display&&e.display.icon?"url":"icon")("color",null==e||null==e.display?null:e.display.color)("label",null==e?null:e.display.label)("resourceIcon",(null==e||null==e.display?null:e.display.icon)||(null==e?null:e.key)),s.Ib(1),s.fd(" ",null==e?null:e.display.label," ")}}function tt(e,t){if(1&e&&(s.ac(0),s.bd(1,et,6,6,"div",13),s.Zb()),2&e){const e=t.ngIf,i=s.uc();s.Ib(1),s.Dc("ngForOf",e)("ngForTrackBy",i.trackByKey)}}function it(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-edit-automation",19),s.qc("createAutomation",function(t){return s.Uc(e),s.uc().createAutomation.emit(t)})("updateAutomation",function(t){return s.Uc(e),s.uc().updateAutomation.emit(t)})("changeParentId",function(t){return s.Uc(e),s.uc().changeParentId.emit(t)}),s.bc()}if(2&e){const e=s.uc();s.Dc("automation",e.automation)("parentType",e.parentType)("parentId",null==e.parent?null:e.parent.id)("parent",e.parent)("loading",e.loading)("features",e.features)("inlineBlockComponent",!0)("showPaywall",e.showPaywall)("teamId",null==e.team?null:e.team.id)}}function at(e,t){1&e&&s.Xb(0,"cu-loader")}function ct(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-automation-catalog-section",32),s.qc("onStart",function(t){return s.Uc(e),s.uc(2).startCreating(t)}),s.bc()}if(2&e){const e=t.$implicit,i=s.uc(2);s.Dc("teamId",i.teamId)("category",e),s.Jb("data-category",e.label)}}function nt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",20,21),s.qc("scroll",function(){return s.Uc(e),s.uc().onBodyScroll()}),s.cc(3,"div",22),s.bd(4,at,1,0,"cu-loader",6),s.vc(5,"async"),s.bd(6,ct,1,3,"cu-automation-catalog-section",23),s.vc(7,"async"),s.cc(8,"div",24),s.cc(9,"div",25),s.cc(10,"div",26),s.gc(11,27),s.bc(),s.cc(12,"div",28),s.gc(13,29),s.bc(),s.cc(14,"div",30),s.qc("click",function(){return s.Uc(e),s.uc().startCreatingAutomation.emit(null)}),s.gc(15,31),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.Rc(1),t=s.uc();s.Ib(3),s.Dc("lazyScrollContainer",e)("lazyMargin","500px"),s.Ib(1),s.Dc("ngIf",!s.wc(5,5,t.categories$).length),s.Ib(2),s.Dc("ngForOf",s.wc(7,7,t.categories$))("ngForTrackBy",t.trackByResource)}}let ot=(()=>{class e extends b{constructor(e,t,i){super(),this.element=e,this.changeDetectorRef=t,this.automationResourcesFacade=i,this.showPresets=!1,this.startCreatingAutomation=new s.o,this.onSidebarSelectedCategory=new s.o,this.onShowPresets=new s.o,this.categories$=this.automationResourcesFacade.resourcesTiles$,this.comingSoon$=this.automationResourcesFacade.comingSoonResources$,this.allPresets$=this.categories$.pipe(Object(m.a)(e=>e.flatMap(e=>e.presets.map(t=>Object.assign({catLabel:e.label},t))))),this.trackByResource=Object(d.d)("resource"),this.trackByKey=Object(d.d)("key"),this.trackByValue=d.f,this.showPresetsChange=!1,this.firstChange=!0}ngAfterViewInit(){this.categories$.pipe(Object(h.a)(e=>e.length>0),Object(p.a)(1)).subscribe(e=>{this.selectedCategory||(this.onSidebarSelectedCategory.emit(e[0]),this.selectedCategory=e[0]),this.changeDetectorRef.markForCheck()})}ngAfterViewChecked(){if(this.firstChange&&!this.automation||(this.firstChange||this.showPresetsChange)&&this.showPresets){this.selectedCategory||this.categories$.pipe(Object(h.a)(e=>e.length>0),Object(p.a)(1)).subscribe(e=>{this.onSidebarSelectedCategory.emit(e[0])}),this.categoryElements=Array.from(this.element.nativeElement.querySelectorAll("cu-automation-catalog-section")),this.firstChange=!1,this.showPresetsChange=!1;const e=this.element.nativeElement.querySelector(`cu-automation-catalog-section[data-category="${this.selectedCategory.label}"]`);e&&e.scrollIntoView();const t=this.element.nativeElement.querySelector(`.cu-automation-tab-browse__sidebar-category[data-category="${this.selectedCategory.label}"]`);t&&t.scrollIntoView(),this.changeDetectorRef.detectChanges()}}selectCategory(e){this.showPresets?this.bodyScroll.scrollToElement(`cu-automation-catalog-section[data-category="${e}"]`,0,300):(this.showPresetsChange=!0,this.onShowPresets.emit(!0),setTimeout(()=>{this.categories$.pipe(Object(p.a)(1)).subscribe(t=>{this.selectedCategory=t.find(t=>t.label===e),this.onSidebarSelectedCategory.emit(this.selectedCategory),this.bodyScroll.scrollToElement(`cu-automation-catalog-section[data-category="${e}"]`)}),this.changeDetectorRef.markForCheck()}))}startCreating(e){this.startCreatingAutomation.emit(e),this.onShowPresets.emit(!1)}onBodyScroll(){const e=this.bodyScroll.elementRef.nativeElement.getBoundingClientRect().top+20,t=this.categoryElements.findIndex(t=>{const i=t.getBoundingClientRect();return i.top-e<=0&&i.bottom-e>0});this.categories$.pipe(Object(p.a)(1)).subscribe(e=>{this.selectedCategory=e[t],this.onSidebarSelectedCategory.emit(this.selectedCategory)})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.m),s.Wb(s.h),s.Wb(l.o))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-tab-browse"]],viewQuery:function(e,t){if(1&e&&s.jd(Ze,1),2&e){let e;s.Qc(e=s.rc())&&(t.bodyScroll=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-tab-browse__container",!0)},inputs:{team:"team",selectedCategory:"selectedCategory",showPresets:"showPresets"},outputs:{startCreatingAutomation:"startCreatingAutomation",onSidebarSelectedCategory:"onSidebarSelectedCategory",onShowPresets:"onShowPresets"},features:[s.Fb],decls:17,vars:18,consts:function(){let e,t,i,a,c,n,o;return e=$localize`:@@cu-automation-tab-browse__btn-txt_add-custom-automation␟32769d1b215d72d8cdba4911aad642c0fa54da19␟8261561268093453722:Add Custom Automation`,t=$localize`:@@cu-automation-tab-browse__form-label_categories␟04201f9d27abd7d6f58a4328ab98063ce1072006␟1902100407096396858:Categories`,i=$localize`:@@common_integrations␟28ac130a4af687a4e23538cab4f2b5306503b6cc␟4944372417149760037:Integrations`,a=$localize`:@@cu-automation-tab-browse__sidebar-category-soon␟eb721971f4a22ff95e1d60cfbf39151e2a87fdcd␟9193870020098654563: coming soon `,c=$localize`:@@cu-automation-tab-browse__question_cant-find-automation␟3c2f12ae0e0424de67200daf26599f11ec6f36bf␟5942859204142444773: Don't see what you're looking for? `,n=$localize`:@@cu-automation-tab-browse__create-custom␟05dc0d1e51cafb3939c5dcf265da694ea678d461␟1934462169175195736: Create your own custom automation `,o=$localize`:@@common_new␟176875f85afe8cccedb1e9a4e7a64a60c957e75a␟5396953936388945506: New `,[[1,"cu-automation-tab-browse__sidebar",3,"perfectScrollbar"],[1,"cu-automation-tab-browse__sidebar-category","cu-automation-tab-browse__sidebar-category_custom",3,"click"],["icon","cu2-plus-3",1,"cu-automation-tab-browse__sidebar-category-icon","cu-automation-tab-browse__sidebar-category-icon_plus"],e,[1,"cu-automation-tab-browse__sidebar-categories-label"],t,[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"automation","parentType","parentId","parent","loading","features","inlineBlockComponent","showPaywall","teamId","createAutomation","updateAutomation","changeParentId",4,"ngIf"],["class","cu-automation-tab-browse__body",3,"perfectScrollbar","scroll",4,"ngIf"],["class","cu-automation-tab-browse__sidebar-categories-label",4,"ngIf"],[3,"category","selectedCategory","showPresets","selectCategory"],i,["class","cu-automation-tab-browse__sidebar-category",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-automation-tab-browse__sidebar-category"],[1,"cu-automation-tab-browse__sidebar-category-icon",3,"ngClass"],[3,"type","color","label","resourceIcon"],[1,"cu-automation-tab-browse__sidebar-category-soon"],a,[3,"automation","parentType","parentId","parent","loading","features","inlineBlockComponent","showPaywall","teamId","createAutomation","updateAutomation","changeParentId"],[1,"cu-automation-tab-browse__body",3,"perfectScrollbar","scroll"],["scrollContainer","","bodyScroll","ngxPerfectScrollbar"],["cuLazyRenderer","",3,"lazyScrollContainer","lazyMargin"],["cuLazyItem","",3,"teamId","category","onStart",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-automation-tab-browse__body-footer"],[1,"cu-automation-tab-browse__body-footer-container"],[1,"cu-automation-tab-browse__body-footer-top"],c,[1,"cu-automation-tab-browse__body-footer-bot"],n,[1,"cu-automation-tab-browse__body-footer-button",3,"click"],o,["cuLazyItem","",3,"teamId","category","onStart"]]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.qc("click",function(){return t.startCreatingAutomation.emit(null)}),s.Xb(2,"div",2),s.ac(3),s.gc(4,3),s.Zb(),s.bc(),s.cc(5,"label",4),s.ac(6),s.gc(7,5),s.Zb(),s.dd(8,": "),s.bc(),s.bd(9,Qe,1,0,"cu-loader",6),s.vc(10,"async"),s.bd(11,Ye,3,4,"ng-container",7),s.vc(12,"async"),s.bd(13,tt,2,2,"ng-container",6),s.vc(14,"async"),s.bc(),s.bd(15,it,1,9,"cu-edit-automation",8),s.bd(16,nt,16,9,"div",9)),2&e&&(s.Ib(1),s.Ob("cu-automation-tab-browse__sidebar-category_active",!t.showPresets&&t.automation)("cu-automation-tab-browse__sidebar-category_custom-active",!t.showPresets&&t.automation)("cu-automation-tab-browse__sidebar-category_custom-automation",!t.showPresets&&t.automation),s.Ib(8),s.Dc("ngIf",!s.wc(10,12,t.categories$).length),s.Ib(2),s.Dc("ngForOf",s.wc(12,14,t.categories$))("ngForTrackBy",t.trackByResource),s.Ib(2),s.Dc("ngIf",s.wc(14,16,t.comingSoon$)),s.Ib(2),s.Dc("ngIf",t.automation&&!t.showPresets),s.Ib(1),s.Dc("ngIf",t.showPresets||!t.automation))},directives:[g.a,u.a,c.q,c.p,f.a,k,c.o,T,Ae,je.a,We,He.a],pipes:[c.b],styles:['.cu-automation-tab-browse__container{flex:1;min-height:0;display:flex;font-family:Gotham Pro,Proxima Nova,arial,serif;height:calc(100vh - 150px)}.cu-automation-tab-browse__sidebar{width:240px;min-width:240px;height:calc(100vh - 150px);background-color:#fff;border-right:1px solid #e9ebf0;border-bottom-left-radius:4px;overflow-y:auto}.dark-theme .cu-automation-tab-browse__sidebar{border-color:#1e272e;background-color:#384047}.cu-automation-tab-browse__sidebar-categories-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:10px;display:block;text-transform:uppercase;color:#7c828d;margin:20px 0 10px 20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__sidebar-categories-label{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-browse__sidebar-categories-label{color:#d5d6d7}.cu-automation-tab-browse__sidebar-category{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:14px;color:#292d34;border-left:3px solid transparent;height:40px;display:flex;align-items:center;padding-left:17px;cursor:pointer;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__sidebar-category{font-family:var(--global-font-support)}}.cu-automation-tab-browse__sidebar-category_active{font-weight:500}.dark-theme .cu-automation-tab-browse__sidebar-category{color:#d5d6d7}.cu-automation-tab-browse__sidebar-category_custom-automation{border-left-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-browse__sidebar-category_custom-automation{border-left-color:var(--theme-main-color)}}.dark-theme .cu-automation-tab-browse__sidebar-category_custom-automation{border-left-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-automation-tab-browse__sidebar-category_custom-automation{border-left-color:var(--theme-main-color)}}.cu-automation-tab-browse__sidebar-category_custom-active:before,.cu-automation-tab-browse__sidebar-category_custom:hover:before{content:"";display:block;position:absolute;background:#7b68ee;width:calc(100% + 3px);height:100%;top:0;left:-3px;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-browse__sidebar-category_custom-active:before,.cu-automation-tab-browse__sidebar-category_custom:hover:before{background:var(--theme-main-color)}}.cu-automation-tab-browse__sidebar-category_custom-active{border-left-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-browse__sidebar-category_custom-active{border-left-color:var(--theme-main-color)}}.cu-automation-tab-browse__sidebar-category_custom-active .cu-automation-tab-browse__sidebar-category-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-browse__sidebar-category_custom-active .cu-automation-tab-browse__sidebar-category-icon{fill:var(--theme-main-color)}}.dark-theme .cu-automation-tab-browse__sidebar-category_custom-active .cu-automation-tab-browse__sidebar-category-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-automation-tab-browse__sidebar-category_custom-active .cu-automation-tab-browse__sidebar-category-icon{fill:var(--theme-main-color)}}.cu-automation-tab-browse__sidebar-category-icon{width:16px;height:16px;fill:#292d34;margin-right:10px;z-index:10}.dark-theme .cu-automation-tab-browse__sidebar-category-icon{fill:#d5d6d7}.cu-automation-tab-browse__sidebar-category-icon_stroke{stroke:#292d34;fill:none}.dark-theme .cu-automation-tab-browse__sidebar-category-icon_stroke{fill:none;stroke:#d5d6d7}.cu-automation-tab-browse__sidebar-category-icon_typeform-symbol .icon{fill:#262627;stroke:#262627}.dark-theme .cu-automation-tab-browse__sidebar-category-icon_typeform-symbol .icon{fill:#f5f1ea!important;stroke:#f5f1ea}.cu-automation-tab-browse__sidebar-category-icon_plus{padding:2px}.cu-automation-tab-browse__sidebar-category-error{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#d16464;padding:2px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__sidebar-category-error{font-family:var(--global-font-support)}}.cu-automation-tab-browse__sidebar-category-soon{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#fc0;display:inline-block;font:500 8px/1 Gotham Pro,Proxima Nova,arial,serif;margin:-3px 0 0 5px;color:#fff;padding:2px 3px;border-radius:3px;text-transform:uppercase}.dark-theme .cu-automation-tab-browse__sidebar-category-soon{background:#a78a17}.cu-automation-tab-browse__sidebar-add-automation{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;color:#7c828d;border-bottom:1px solid #e9ebf0;height:32px;display:flex;justify-content:center;align-items:center;cursor:pointer;position:sticky;top:0;background:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__sidebar-add-automation{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-browse__sidebar-add-automation{color:#d5d6d7;border-color:#1e272e;background:#384047}.cu-automation-tab-browse__sidebar-add-automation:hover{color:var(--theme-main-color)}.cu-automation-tab-browse__body{width:calc(100% - 205px);padding:20px;max-height:calc(100vh - 150px);height:calc(100vh - 150px)}.cu-automation-tab-browse__body-scroll{height:100%}.cu-automation-tab-browse__body-disabled{opacity:.33}.cu-automation-tab-browse__body-section{padding-top:15px}.cu-automation-tab-browse__body-header{display:flex;margin-bottom:10px;justify-content:space-between;align-items:center}.cu-automation-tab-browse__body-header-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:10px;text-transform:uppercase;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__body-header-label{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-browse__body-header-label{color:#d5d6d7}.cu-automation-tab-browse__body-header-search{position:relative}.cu-automation-tab-browse__body-header-search-icon{width:12px;height:12px;position:absolute;top:50%;transform:translateY(-50%);left:6px;fill:#7c828d}.cu-automation-tab-browse__body-header-search input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:11px;border:1px solid #e9ebf0;background-color:#fff;box-shadow:none;height:24px;width:112px;color:#292d34;padding:0 20px 0 24px;border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__body-header-search input{font-family:var(--global-font-support)}}.cu-automation-tab-browse__body-header-search input:-ms-input-placeholder{opacity:.4}.cu-automation-tab-browse__body-header-search input::placeholder{opacity:.4}.dark-theme .cu-automation-tab-browse__body-header-search input:-ms-input-placeholder{opacity:.8}.dark-theme .cu-automation-tab-browse__body-header-search input::placeholder{opacity:.8}.dark-theme .cu-automation-tab-browse__body-header-search input{background-color:#384047;color:#d5d6d7;border-color:#1e272e}.cu-automation-tab-browse__body-header-search-exit{width:10px;height:10px;position:absolute;top:50%;transform:translateY(-50%);right:8px;fill:#7c828d;cursor:pointer}.cu-automation-tab-browse__body-preset-list{display:flex;flex-wrap:wrap;margin-left:-7.5px;margin-right:-15px;align-items:center}.cu-automation-tab-browse__body-preset-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:20px 15px;border:1px solid #e9ebf0;border-radius:4px;align-self:stretch;cursor:pointer;font:400 14px/22px Gotham Pro,Proxima Nova,arial,serif;color:#292d34;min-height:122px}.dark-theme .cu-automation-tab-browse__body-preset-item{color:#d5d6d7;border-color:#7c828d}.cu-automation-tab-browse__body-preset-item:hover{box-shadow:0 0 10px rgba(0,0,0,.1)}.cu-automation-tab-browse__body-preset-item-highlight{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 14px/22px Gotham Pro,Proxima Nova,arial,serif}.cu-automation-tab-browse__body-preset-item-icons{display:flex;align-items:center;margin-bottom:10px}.cu-automation-tab-browse__body-preset-item-icons .icon{width:25px;height:25px}.cu-automation-tab-browse__body-preset-item-icons .icon-separator{width:12px;height:10px;margin:0 12px;fill:#b9bec7}.dark-theme .cu-automation-tab-browse__body-preset-item-icons .icon-separator{fill:#d5d6d7}.cu-automation-tab-browse__body-preset-item-icons .typeform-symbol.icon{fill:#262627;stroke:#262627!important}.dark-theme .cu-automation-tab-browse__body-preset-item-icons .typeform-symbol.icon{fill:#f5f1ea!important;stroke:#f5f1ea!important}.cu-automation-tab-browse__body-preset-item_more{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:8px;border-width:2px;width:calc(33% - 15px);margin-bottom:15px}.cu-automation-tab-browse__body-preset-item_more:hover .cu-automation-tab-browse__body-preset-item-more-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-browse__body-preset-item_more:hover .cu-automation-tab-browse__body-preset-item-more-icon{fill:var(--theme-main-color)}}.cu-automation-tab-browse__body-preset-item_more:hover .cu-automation-tab-browse__body-preset-item-more-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-browse__body-preset-item_more:hover .cu-automation-tab-browse__body-preset-item-more-text{color:var(--theme-main-color)}}.cu-automation-tab-browse__body-preset-item-more-icon{width:17px;height:14px;margin-bottom:8px;fill:#b9bec7}.dark-theme .cu-automation-tab-browse__body-preset-item-more-icon{fill:#7c828d}.cu-automation-tab-browse__body-preset-item-more-text{font:600 12px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;color:#b9bec7}.dark-theme .cu-automation-tab-browse__body-preset-item-more-text{color:#7c828d}.cu-automation-tab-browse__body-footer{display:flex;justify-content:center;align-items:center;width:100%;margin:72px auto 256px}.cu-automation-tab-browse__body-footer-container{text-align:center}.cu-automation-tab-browse__body-footer-top{font-weight:400;font-size:14px;line-height:22px;color:#292d34}.dark-theme .cu-automation-tab-browse__body-footer-top{color:#d5d6d7}.cu-automation-tab-browse__body-footer-bot{font-weight:500;font-size:20px;line-height:22px;color:#292d34}.dark-theme .cu-automation-tab-browse__body-footer-bot{color:#d5d6d7}.cu-automation-tab-browse__body-footer-button{font-weight:500;font-size:14px;line-height:11px;font-family:Gotham Pro,Proxima Nova,arial,serif;transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:var(--theme-main-color);width:80px;height:40px;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer;border-radius:3px;margin:15px auto 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-browse__body-footer-button{font-family:var(--global-font-support)}}.cu-automation-tab-browse__body-footer-button:hover{background-color:var(--theme-main-color-dark)}cu-automation-catalog-preset{width:calc(33% - 15px);border-radius:4px;background:#fff;color:#292d34;margin:0 15px 15px 0}.dark-theme cu-automation-catalog-preset{background-color:#384047;color:#d5d6d7;border-color:#1e272e}'],encapsulation:2,changeDetection:0}),e})();var st=i("PqYM"),rt=i("OBnU"),lt=i("NsZK");function ut(e,t){if(1&e){const e=s.dc();s.cc(0,"div",20),s.qc("click",function(){s.Uc(e);const t=s.uc().$implicit;return s.uc(3).editAutomation.emit(t)}),s.bc()}}function dt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-toggle-switch",21),s.qc("onChange",function(){s.Uc(e);const t=s.uc().$implicit;return s.uc(3).toggleAutomationActive.emit(t)}),s.bc()}if(2&e){const e=s.uc().$implicit,t=s.uc(3);s.Dc("cuTooltip",t.team.automation_limit_reached?"Your team has reached its automation usage limit":e.errors||t.invalidAutomations[e.id]?e.errors?"Custom field deleted":t.invalidAutomations[e.id]:null)("disabled",t.team.automation_limit_reached||!!e.errors||!!t.invalidAutomations[e.id])("checked",e.active)}}function mt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",14),s.cc(1,"div",15),s.bd(2,ut,1,0,"div",16),s.cc(3,"div",17),s.qc("click",function(){s.Uc(e);const i=t.$implicit;return s.uc(3).deleteAutomation.emit(i)}),s.bc(),s.bd(4,dt,1,3,"cu-toggle-switch",18),s.bc(),s.cc(5,"cu-automation-label",19),s.qc("actionInvalid",function(i){s.Uc(e);const a=t.$implicit;return s.uc(3).setAutomationError(a,i.errorMessage)})("triggerInvalid",function(i){s.Uc(e);const a=t.$implicit;return s.uc(3).setAutomationError(a,i.errorMessage)}),s.bc(),s.bc()}if(2&e){const e=t.$implicit;s.Ob("cu-automation-tab-manage__item_disabled",!e.active),s.Ib(2),s.Dc("ngIf",!e.shortcut),s.Ib(2),s.Dc("ngIf",!e.shortcut),s.Ib(1),s.Dc("automation",e)}}function ht(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"div",2),s.cc(2,"div",3),s.cc(3,"div",4),s.cc(4,"span"),s.dd(5),s.bc(),s.bc(),s.cc(6,"div",5),s.cc(7,"div",6),s.gc(8,7),s.bc(),s.cc(9,"div",8),s.Xb(10,"cu-automation-breadcrumb",9),s.bc(),s.bc(),s.bc(),s.cc(11,"div",10),s.cc(12,"button",11),s.qc("click",function(){return s.Uc(e),s.uc(2).startCreatingAutomation.emit(null)}),s.gc(13,12),s.bc(),s.bc(),s.bc(),s.bd(14,mt,6,5,"div",13),s.Zb()}if(2&e){const e=s.uc(2);s.Ib(5),s.ed(e.activeAutomationCount-e.errorCount-e.automationsWithErrors.length),s.Ib(5),s.Dc("parent",e.parent)("parentType",e.parentType),s.Ib(4),s.Dc("ngForOf",e.automations)("ngForTrackBy",e.trackById)}}function pt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",22),s.Xb(1,"img",23),s.cc(2,"div",24),s.gc(3,25),s.bc(),s.cc(4,"button",11),s.qc("click",function(){return s.Uc(e),s.uc(2).startCreatingAutomation.emit(null)}),s.gc(5,26),s.bc(),s.bc()}}function bt(e,t){if(1&e&&(s.ac(0),s.bd(1,ht,15,5,"ng-container",0),s.bd(2,pt,6,0,"div",1),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",e.automations.length>0),s.Ib(1),s.Dc("ngIf",0===e.automations.length)}}function gt(e,t){1&e&&s.Xb(0,"cu-loader")}let ft=(()=>{class e{constructor(e){this.cdr=e,this.editAutomation=new s.o,this.deleteAutomation=new s.o,this.toggleAutomationActive=new s.o,this.startCreatingAutomation=new s.o,this.DataViewParentType=x.e,this.trackById=Object(d.d)("id"),this.invalidAutomations={},this.errorCount=0,this.destroy$=new N.a}ngOnChanges(e){e.automations&&this.automations&&(this.automationsWithErrors=this.automations.filter(e=>e.active&&e.errors).map(e=>e.id))}ngOnDestroy(){this.destroy$.next()}setAutomationError(e,t){this.automationsWithErrors.includes(e.id)||(e.active&&!this.invalidAutomations[e.id]&&this.errorCount++,this.invalidAutomations=Object.assign(Object.assign({},this.invalidAutomations),{[e.id]:t}),Object(st.a)().pipe(Object(D.a)(this.destroy$)).subscribe(()=>{this.cdr.detectChanges()}))}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-tab-manage"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-tab-manage__container",!0)},inputs:{automations:"automations",parentType:"parentType",parent:"parent",team:"team",activeAutomationCount:"activeAutomationCount"},outputs:{editAutomation:"editAutomation",deleteAutomation:"deleteAutomation",toggleAutomationActive:"toggleAutomationActive",startCreatingAutomation:"startCreatingAutomation"},features:[s.Gb],decls:2,vars:2,consts:function(){let e,t,i,a;return e=$localize`:@@common_active-automations␟cf66b4988d9b3e2d135f6dac2ebd3df6a8f50caa␟2827313237407446834: Active automations `,t=$localize`:@@cu-automation-tab-manage__btn-txt_create-automation␟8239771629400146bcf7d4ff589e36ea77566b38␟3554352295007815274: Create Automation `,i=$localize`:@@cu-automation-tab-manage__no-automations-configured␟86cc79060a6ac6d4f9d91f679600f6181c0fc36f␟8245829703994452901: You don't have any automations configured `,a=$localize`:@@cu-automation-tab-manage__btn-txt_create-automation␟135e91fd87b19e00360b54d44df253204e54b0c8␟1729971569242669999: Create Automation `,[[4,"ngIf"],["class","cu-automation-tab-manage__no-automations",4,"ngIf"],[1,"cu-automation-tab-manage__header"],[1,"cu-automation-tab-manage__header-left"],[1,"cu-automation-tab-manage__header-count"],[1,"cu-automation-tab-manage__header__main"],[1,"cu-automation-tab-manage__header-title"],e,[1,"cu-automation-tab-manage__header-breadcrumbs"],[3,"parent","parentType"],[1,"cu-automation-tab-manage__header-right"],[1,"cu-btn","cu-btn_sm",3,"click"],t,["class","cu-automation-tab-manage__item",3,"cu-automation-tab-manage__item_disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-automation-tab-manage__item"],[1,"cu-automation-tab-manage__item-edit"],["class","cu-automation-tab-manage__item-edit-pencil","icon","cu2-pencil",3,"click",4,"ngIf"],["icon","cu2-trash-thick",1,"cu-automation-tab-manage__item-edit-trash",3,"click"],[3,"cuTooltip","disabled","checked","onChange",4,"ngIf"],[3,"automation","actionInvalid","triggerInvalid"],["icon","cu2-pencil",1,"cu-automation-tab-manage__item-edit-pencil",3,"click"],[3,"cuTooltip","disabled","checked","onChange"],[1,"cu-automation-tab-manage__no-automations"],["src","./assets/images/illustrations/automations.svg"],[1,"cu-automation-tab-manage__no-automations-title"],i,a]},template:function(e,t){1&e&&(s.bd(0,bt,3,2,"ng-container",0),s.bd(1,gt,1,0,"cu-loader",0)),2&e&&(s.Dc("ngIf",t.automations),s.Ib(1),s.Dc("ngIf",!t.automations))},directives:[c.q,V.a,c.p,u.a,G.a,rt.a,lt.a,f.a],styles:['.cu-automation-tab-manage__container{display:flex;flex-direction:column;padding:30px 25px;max-height:calc(100vh - 150px);height:calc(100vh - 150px);overflow-y:auto}.cu-automation-tab-manage__header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:11px;color:#292d34;margin-bottom:10px;display:flex;justify-content:space-between}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-manage__header{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-manage__header{color:#d5d6d7}.cu-automation-tab-manage__header-left{display:grid;grid-template-columns:auto -webkit-max-content;grid-template-columns:auto max-content;gap:10px;justify-content:center;align-items:center}.cu-automation-tab-manage__header-count{width:40px;height:40px;border-radius:50%;border:5px solid var(--theme-main-color);display:flex;justify-content:center;align-items:center}.cu-automation-tab-manage__header-count>span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:700;font-size:16px;line-height:15px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-manage__header-count>span{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-manage__header-count>span{color:#d5d6d7}.cu-automation-tab-manage__header__main{display:grid;gap:5px}.cu-automation-tab-manage__header-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:700;font-size:14px;line-height:13px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-manage__header-title{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-manage__header-title{color:#d5d6d7}.cu-automation-tab-manage__header-breadcrumbs{color:#292d34}.dark-theme .cu-automation-tab-manage__header-breadcrumbs{color:#d5d6d7}.cu-automation-tab-manage__header span{font-weight:500;color:var(--theme-main-color)}.cu-automation-tab-manage__item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#fff;border-radius:4px;width:100%;margin:7px 0;border:1px solid #e9ebf0;padding:28px 20px;display:flex;align-items:center;position:relative}.cu-automation-tab-manage__item:hover{box-shadow:0 0 10px rgba(0,0,0,.1)}.cu-automation-tab-manage__item:hover .cu-automation-tab-manage__item-edit .icon{opacity:1}.dark-theme .cu-automation-tab-manage__item{background-color:#384047;border-color:#1e272e}.cu-automation-tab-manage__item-edit{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;right:15px;top:15px;display:flex}.cu-automation-tab-manage__item-edit .icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;width:14px;height:14px;fill:#b9bec7;opacity:0;margin-right:15px}.cu-automation-tab-manage__item-edit .icon:hover{fill:var(--theme-main-color)}.cu-automation-tab-manage__item-icons{display:flex;align-items:center;margin-right:12px}.cu-automation-tab-manage__item-icons .icon{width:24px;height:24px}.cu-automation-tab-manage__item-icons .icon-separator{width:12px;height:10px;margin:0 10px;fill:#b9bec7}.dark-theme .cu-automation-tab-manage__item-icons .icon-separator{fill:#d5d6d7}.cu-automation-tab-manage__item_disabled .cu-automation-label{filter:grayscale(1);opacity:.4}.cu-automation-tab-manage__no-automations{height:100%;display:flex;flex-direction:column;flex:1;align-items:center;justify-content:center}.cu-automation-tab-manage__no-automations img{margin-bottom:24px;height:200px;width:auto;position:relative;right:20px}.cu-automation-tab-manage__no-automations-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:16px;line-height:18px;margin-bottom:19px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-manage__no-automations-title{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})();var _t=i("uslN"),vt=i("dTHz"),yt=i("calk"),kt=i("8MHC"),It=i("tyNb");function wt(e,t){1&e&&(s.ac(0),s.gc(1,20),s.Zb())}function Tt(e,t){if(1&e&&(s.dd(0),s.vc(1,"number")),2&e){const e=s.uc();s.fd(" ",s.xc(1,1,(null==e.team.automation||null==e.team.automation.internal?null:e.team.automation.internal.count)/(null==e.team.automation||null==e.team.automation.internal?null:e.team.automation.internal.limit)*100,"1.0-2"),"% ")}}function xt(e,t){1&e&&(s.mc(0,21,1),s.Yb(1),s.jc())}function Ct(e,t){if(1&e&&(s.ac(0),s.mc(1,21),s.vc(2,"number"),s.Xb(3,"strong"),s.bd(4,xt,2,0,"ng-container",16),s.jc(),s.Zb()),2&e){const e=s.uc();s.Ib(4),s.Dc("ngIf",!e.selectedAddOnId||e.selectedAddOnId!==e.AutomationIds.UNLIMITED),s.kc(e.selectedAddOnId&&e.selectedAddOnId===e.AutomationIds.UNLIMITED?"unlimited":s.wc(2,3,null==e.team.automation||null==e.team.automation.internal?null:e.team.automation.internal.limit))(e.planLabels[e.team.plan_id]),s.hc(1)}}function Ot(e,t){1&e&&(s.mc(0,23,2),s.Yb(1),s.jc())}function St(e,t){1&e&&(s.mc(0,23,3),s.Yb(1),s.jc())}function Dt(e,t){if(1&e&&(s.mc(0,23,1),s.ac(1),s.bd(2,Ot,2,0,"ng-container",16),s.bd(3,St,2,0,"ng-container",16),s.Zb(),s.jc()),2&e){const e=s.uc(2);s.Ib(2),s.Dc("ngIf",e.team.plan_id!==e.TeamPlan.ENTERPRISE),s.Ib(1),s.Dc("ngIf",e.team.plan_id===e.TeamPlan.ENTERPRISE)}}function At(e,t){1&e&&s.gc(0,23,4)}function jt(e,t){if(1&e&&(s.ac(0),s.mc(1,22),s.vc(2,"number"),s.Xb(3,"strong"),s.jc(),s.Zb(),s.ac(4),s.mc(5,23),s.bd(6,Dt,4,2,"ng-container",6),s.bd(7,At,1,0,"ng-template",null,24,s.cd),s.jc(),s.Zb()),2&e){const e=s.Rc(8),t=s.uc();s.Ib(3),s.kc(t.selectedAddOnId&&t.selectedAddOnId===t.AutomationIds.UNLIMITED?"unlimited":s.wc(2,4,null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.limit))(t.planLabels[t.team.plan_id]),s.hc(1),s.Ib(3),s.Dc("ngIf",t.team.role===t.UserRole.ADMIN||t.team.role===t.UserRole.OWNER)("ngIfElse",e)}}function Nt(e,t){if(1&e&&(s.ac(0),s.Xb(1,"cu-automation-add-ons",25),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.Dc("disabled",!(e.team.plan_id===e.TeamPlan.ENTERPRISE||e.team.plan_id===e.TeamPlan.BUSINESS||e.team.plan_id===e.TeamPlan.UNLIMITED))("selectedAddOnId",e.selectedAddOnId)("rateAndSymbol",e.rateAndSymbol)("team",e.team)}}const Et=function(e){return["/",e,"settings","billing"]};function $t(e,t){if(1&e){const e=s.dc();s.cc(0,"div",27),s.cc(1,"div",28),s.qc("click",function(){return s.Uc(e),s.uc(2).closeModal()}),s.dd(2," Upgrade "),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(1),s.Dc("routerLink",s.Hc(1,Et,e.team.id))}}function Pt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",27),s.cc(1,"div",29),s.qc("click",function(){return s.Uc(e),s.uc(2).showContactSalesModal()}),s.gc(2,30),s.bc(),s.bc()}}function Lt(e,t){if(1&e&&(s.ac(0),s.bd(1,$t,3,3,"div",26),s.bd(2,Pt,3,0,"div",26),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",e.team.plan_id!==e.TeamPlan.ENTERPRISE),s.Ib(1),s.Dc("ngIf",e.team.plan_id===e.TeamPlan.ENTERPRISE)}}function Ut(e,t){if(1&e&&(s.cc(0,"div",35),s.cc(1,"div",36),s.dd(2),s.bc(),s.cc(3,"div",37),s.dd(4),s.vc(5,"date"),s.bc(),s.bc()),2&e){const e=t.$implicit;s.Ib(2),s.fd(" ",e.text," "),s.Ib(2),s.fd(" ",s.xc(5,2,e.date,"d MMM h:mm a")," ")}}function zt(e,t){if(1&e&&(s.cc(0,"div",31),s.cc(1,"div",32),s.cc(2,"span"),s.dd(3,"Used on"),s.bc(),s.cc(4,"span"),s.dd(5,"when"),s.bc(),s.bc(),s.cc(6,"div",33),s.bd(7,Ut,6,5,"div",34),s.bc(),s.bc()),2&e){const e=s.uc();s.Ib(7),s.Dc("ngForOf",e.usages)("ngForTrackBy",e.trackByValue)}}let Mt=(()=>{class e{constructor(e,t){this.modal=e,this.injector=t,this.UserRole=vt.f,this.AutomationIds=_t.b,this.usages=new Array(30).fill({text:"When status is Ready, change assignee to Konstantin",date:new Date},0,30),this.trackByValue=d.f,this.planLabels={[_t.f.ENTERPRISE]:"Enterprise",[_t.f.BUSINESS]:"Business",[_t.f.UNLIMITED]:"Unlimited",[_t.f.FREE]:"Free"},this.TeamPlan=_t.f}ngOnInit(){}ngOnChanges(e){e.team&&this.team&&this.team.addons&&(this.selectedAddOnId=this.team.addons.length?this.team.addons[0].addon_id:null)}closeModal(){this.modal.close()}showContactSalesModal(){this.modal.openComponent(yt.a,this.injector,{title:"Contact Sales",modifier:"cu-modal__help-modal"})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(r.a),s.Wb(s.t))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-tab-usage"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-tab-usage__container",!0)},inputs:{team:"team",user:"user",rateAndSymbol:"rateAndSymbol"},features:[s.Gb],decls:41,vars:31,consts:function(){let e,t,i,a,c;return e=$localize`:@@common_plans--unlimited-1␟ce2af03e830e99253a026d456daef0b583c49f4e␟1208976336924492404:UNLIMITED`,t=$localize`:@@cu-automation-tab-usage__available-actions-per-month␟7fcd889a21c3281f375a3821fdf252a224a18902␟3043837230070987011: You have ${"\ufffd0\ufffd"}:INTERPOLATION: actions per month for your ${"\ufffd#3\ufffd"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1: Plan${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG:. ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:If you need more actions, you can use our add-ons below.${"\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,i=$localize`:@@cu-automation-tab-usage__available-actions-per-month_no-addons␟4e51db319f972d60fca51a8422f9be60d0f49087␟7974941431582971730: You have ${"\ufffd0\ufffd"}:INTERPOLATION: actions per month for your ${"\ufffd#3\ufffd"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1: Plan${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG:. `,a=$localize`:@@cu-automation-tab-usage__request-more-usage␟73bf4242f93a9f155ac497b60c0d1db40f78ffec␟6700096403884944872: If you need more actions, please ${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER_2:${"\ufffd*2:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:upgrade your plan${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*3:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_1:contact sales${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*7:4\ufffd"}:START_TAG_NG_TEMPLATE: contact your team owner and ask them to upgrade ${"\ufffd/*7:4\ufffd"}:CLOSE_TAG_NG_TEMPLATE:`,a=s.lc(a),c=$localize`:@@common_contact-sales␟b92b6c3ec1c18c53e14d1a94078619a62641d4dd␟2041554534027897318: Contact sales `,[[1,"cu-automation-tab-usage__left"],[1,"cu-automation-tab-usage__left-inner"],[1,"cu-automation-tab-usage__left-row"],[1,"cu-automation-tab-usage__left-circle"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","space","outerStrokeColor","titleColor","unitsColor","innerStrokeColor","lazy","showTitle","showSubtitle","showUnits"],[1,"cu-automation-tab-usage__left-circle-text"],[4,"ngIf","ngIfElse"],["noUnlimited",""],[1,"cu-automation-tab-usage__left-info"],[1,"cu-automation-tab-usage__left-value"],[1,"cu-automation-tab-usage__left-value-count"],[1,"cu-automation-tab-usage__left-value-limit"],[1,"cu-automation-tab-usage__left-description"],["noAddons",""],[1,"cu-automation-tab-usage__note"],["icon","exclamation4",1,"cu-automation-tab-usage__note-icon","icon"],[4,"ngIf"],[1,"cu-automation-tab-usage__add-ons-tip"],["href","https://docs.clickup.com/en/articles/4398609-add-on-faq","target","_blank",1,"cu-automation-tab-usage__add-ons-tip-link"],["class","cu-automation-tab-usage__right",3,"perfectScrollbar",4,"ngIf"],e,t,i,a,["contactOwner",""],[3,"disabled","selectedAddOnId","rateAndSymbol","team"],["class","cu-automation-tab-usage__left-button",4,"ngIf"],[1,"cu-automation-tab-usage__left-button"],[1,"cu-btn","cu-btn_m",3,"routerLink","click"],[1,"cu-btn","cu-btn_m",3,"click"],c,[1,"cu-automation-tab-usage__right",3,"perfectScrollbar"],[1,"cu-automation-tab-usage__right-header"],[1,"cu-automation-tab-usage__right-items"],["class","cu-automation-tab-usage__right-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-automation-tab-usage__right-item"],[1,"cu-automation-tab-usage__right-item-text"],[1,"cu-automation-tab-usage__right-item-date"]]},template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.Xb(4,"circle-progress",4),s.vc(5,"number"),s.cc(6,"div",5),s.bd(7,wt,2,0,"ng-container",6),s.bd(8,Tt,2,4,"ng-template",null,7,s.cd),s.bc(),s.bc(),s.cc(10,"div",8),s.cc(11,"div",9),s.cc(12,"div",10),s.dd(13),s.vc(14,"number"),s.bc(),s.dd(15," / "),s.cc(16,"div",11),s.dd(17),s.vc(18,"number"),s.bc(),s.bc(),s.cc(19,"div",12),s.bd(20,Ct,5,5,"ng-container",6),s.bd(21,jt,9,6,"ng-template",null,13,s.cd),s.bc(),s.bc(),s.bc(),s.cc(23,"div",14),s.Xb(24,"div",15),s.dd(25," After gathering more data, we may increase limits and/or base limits per seat rather than per Workspace. Thanks for your patience while we ensure our infrastructure scales efficiently. "),s.bc(),s.bd(26,Nt,2,4,"ng-container",16),s.cc(27,"div",17),s.dd(28," Automation add-ons are billed "),s.cc(29,"strong"),s.dd(30,"per Workspace"),s.bc(),s.dd(31,", not per user \u2014 you\u2019re only charged once per Workspace."),s.Xb(32,"br"),s.dd(33," Automation add-ons are billed "),s.cc(34,"strong"),s.dd(35,"prorated"),s.bc(),s.dd(36,", on the same cycle as your standard plan. "),s.cc(37,"a",18),s.dd(38,"Questions about add-ons?"),s.bc(),s.bc(),s.bd(39,Lt,3,2,"ng-container",16),s.bc(),s.bc(),s.bd(40,zt,8,2,"div",19)),2&e){const e=s.Rc(9),i=s.Rc(22);s.Ib(3),s.Ob("cu-automation-tab-usage__left-circle_unlimited",t.selectedAddOnId&&t.selectedAddOnId===t.AutomationIds.UNLIMITED),s.Ib(1),s.Dc("percent",s.xc(5,24,(null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.count)/(null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.limit)*100,"1.0-2"))("radius",80)("outerStrokeWidth",9)("innerStrokeWidth",9)("space",-9)("outerStrokeColor",t.user.theme_color)("titleColor",t.user.theme_color)("unitsColor",t.user.theme_color)("innerStrokeColor","#e7e8ea")("lazy",!1)("showTitle",!1)("showSubtitle",!1)("showUnits",!1),s.Ib(3),s.Dc("ngIf",t.selectedAddOnId&&t.selectedAddOnId===t.AutomationIds.UNLIMITED)("ngIfElse",e),s.Ib(6),s.fd(" ",s.wc(14,27,null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.count)," "),s.Ib(4),s.fd(" ",t.selectedAddOnId&&t.selectedAddOnId===t.AutomationIds.UNLIMITED?"\u221e":s.wc(18,29,null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.limit)," "),s.Ib(3),s.Dc("ngIf",!(t.team.plan_id!==t.TeamPlan.ENTERPRISE&&t.team.plan_id!==t.TeamPlan.BUSINESS&&t.team.plan_id!==t.TeamPlan.UNLIMITED||t.team.role!==t.UserRole.OWNER&&t.team.role!==t.UserRole.ADMIN))("ngIfElse",i),s.Ib(6),s.Dc("ngIf",t.team.role===t.UserRole.ADMIN||t.team.role===t.UserRole.OWNER||t.team.plan_id===t.TeamPlan.FREE),s.Ib(13),s.Dc("ngIf",t.team.role===t.UserRole.ADMIN||t.team.role===t.UserRole.OWNER),s.Ib(1),s.Dc("ngIf",!1)}},directives:[o.a,c.q,u.a,kt.a,It.i,g.a,c.p],pipes:[c.f,c.e],styles:['.cu-automation-tab-usage__container{display:flex;min-height:calc(100vh - 150px);height:calc(100vh - 150px)}.cu-automation-tab-usage__left{flex-grow:1;height:100%;max-height:100%;display:flex;justify-content:center;align-items:center}.cu-automation-tab-usage__left-row{display:flex;justify-content:center;margin:35px 0 0}.cu-automation-tab-usage__left-circle{position:relative;margin-right:35px;height:170px;width:170px}.cu-automation-tab-usage__left-circle_unlimited{margin-right:27px;width:178px}.cu-automation-tab-usage__left-circle_unlimited .cu-automation-tab-usage__left-circle-text{font-size:20px}.cu-automation-tab-usage__left-circle-text{position:absolute;height:100%;width:100%;left:0;top:5px;display:flex;justify-content:center;align-items:center;font:500 32px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-automation-tab-usage__left-circle-text{color:#d5d6d7}.cu-automation-tab-usage__left-info{width:350px;margin-top:30px}.cu-automation-tab-usage__left-value{display:flex;align-items:flex-end;font:400 18px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:20px;color:#b9bec7}.cu-automation-tab-usage__left-value-count{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 32px/.8 Gotham Pro,Proxima Nova,arial,serif;margin-right:5px;color:#292d34}.dark-theme .cu-automation-tab-usage__left-value-count{color:#d5d6d7}.cu-automation-tab-usage__left-value-limit{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-left:5px;font:500 18px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7b68ee}.cu-automation-tab-usage__left-description{font:400 13px/18px Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-automation-tab-usage__left-description{color:#abaeb0}.cu-automation-tab-usage__left-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:18px;color:#292d34;width:350px;margin:18px auto 0;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-usage__left-text{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-usage__left-text{color:#d5d6d7}.cu-automation-tab-usage__left-button{margin:25px 0;display:flex;justify-content:center}.cu-automation-tab-usage__right{width:330px;padding:25px;background-color:#fff;height:100%;max-height:100%}.dark-theme .cu-automation-tab-usage__right{background-color:#384047}.cu-automation-tab-usage__right-header{display:flex;justify-content:space-between;padding-bottom:10px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-automation-tab-usage__right-header{border-color:#1e272e}.cu-automation-tab-usage__right-header span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:700;font-size:10px;line-height:10px;color:#7c828d;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-usage__right-header span{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-usage__right-header span{color:#d5d6d7}.cu-automation-tab-usage__right-items{margin:7px 0 0}.cu-automation-tab-usage__right-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:12px;display:flex;justify-content:space-between;color:#292d34;padding:7px 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-tab-usage__right-item{font-family:var(--global-font-support)}}.dark-theme .cu-automation-tab-usage__right-item{color:#d5d6d7}.cu-automation-tab-usage__right-item-text{flex-grow:1;margin-right:30px}.cu-automation-tab-usage__right-item-date{min-width:85px}.cu-automation-tab-usage__add-ons-tip{font:400 12px/1.4 Gotham Pro,Proxima Nova,arial,serif;text-align:center;margin:15px 0 35px;color:#7c828d}.dark-theme .cu-automation-tab-usage__add-ons-tip{color:#abaeb0}.cu-automation-tab-usage__add-ons-tip-link{color:#7b68ee;text-decoration:underline}@supports (--theme-main-color:#7b68ee){.cu-automation-tab-usage__add-ons-tip-link{color:var(--theme-main-color)}}.cu-automation-tab-usage__add-ons-tip-link:hover{color:#5f48ea;text-decoration:none}@supports (--theme-main-color-dark:#5f48ea){.cu-automation-tab-usage__add-ons-tip-link:hover{color:var(--theme-main-color-dark)}}.cu-automation-tab-usage__note{display:flex;align-items:center;justify-content:center;background:#fff8f1;border-radius:4px;width:90%;max-width:640px;margin:20px auto 0;padding:7px;z-index:10;color:#bb8451;font:400 12px/1.2 Gotham Pro,Proxima Nova,arial,serif;box-shadow:0 4px 5px rgba(0,0,0,.06)}.dark-theme .cu-automation-tab-usage__note{background:rgba(255,248,241,.1);color:#fdb471}.cu-automation-tab-usage__note-icon{width:16px;height:16px;fill:#fdb471;margin-right:8px}.cu-automation-tab-usage__right{border-left:1px solid #e9ebf0}.dark-theme .cu-automation-tab-usage__right{border-left-color:#1e272e}'],encapsulation:2,changeDetection:0}),e})();const Rt=function(e){return{"cu-automation-list__banner_disabled":e}};function Gt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",14),s.qc("click",function(){s.Uc(e);const t=s.uc();return t.changeTab.emit(t.AutomationTab.Usage)}),s.gc(1,15),s.bc()}if(2&e){const e=s.uc();s.Dc("ngClass",s.Hc(1,Rt,e.currentTab===e.AutomationTab.Usage))}}function Ft(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-automation-tab-browse",16),s.qc("createAutomation",function(t){return s.Uc(e),s.uc().createAutomation.emit(t)})("updateAutomation",function(t){return s.Uc(e),s.uc().updateAutomation.emit(t)})("changeParentId",function(t){return s.Uc(e),s.uc().changeParentId.emit(t)})("onSidebarSelectedCategory",function(t){return s.Uc(e),s.uc().onSidebarSelectedCategory.emit(t)})("startCreatingAutomation",function(t){return s.Uc(e),s.uc().startCreatingAutomation.emit(t)})("onShowPresets",function(t){return s.Uc(e),s.uc().onShowPresets.emit(t)}),s.bc()}if(2&e){const e=s.uc();s.Dc("team",e.team)("selectedCategory",e.sidebarSelectedCategory)("automation",e.automation)("parentType",e.parentType)("parentId",e.parentId)("parent",e.parent)("loading",e.loading)("features",e.features)("showPaywall",e.showPaywall)("teamId",null==e.team?null:e.team.id)("showPresets",e.showPresets)}}function Vt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-automation-tab-manage",17),s.qc("editAutomation",function(t){return s.Uc(e),s.uc().editAutomation.emit(t)})("deleteAutomation",function(t){return s.Uc(e),s.uc().deleteAutomation.emit(t)})("toggleAutomationActive",function(t){return s.Uc(e),s.uc().toggleAutomationActive.emit(t)})("startCreatingAutomation",function(t){return s.Uc(e),s.uc().startCreatingAutomation.emit(t)}),s.bc()}if(2&e){const e=s.uc();s.Dc("automations",e.automations)("parent",e.parent)("parentType",e.parentType)("team",e.team)("activeAutomationCount",e.activeAutomationCount)}}function qt(e,t){if(1&e&&s.Xb(0,"cu-automation-tab-usage",18),2&e){const e=s.uc();s.Dc("team",e.team)("rateAndSymbol",e.rateAndSymbol)("user",e.user)}}let Xt=(()=>{class e{constructor(e,t){this.modal=e,this.automationActionFacades=t,this.showPresets=!1,this.changeParentId=new s.o,this.startCreatingAutomation=new s.o,this.createAutomation=new s.o,this.updateAutomation=new s.o,this.editAutomation=new s.o,this.deleteAutomation=new s.o,this.changeTab=new s.o,this.toggleAutomationActive=new s.o,this.onSidebarSelectedCategory=new s.o,this.onShowPresets=new s.o,this.AutomationTab=n.b}ngOnInit(){this.automationActionFacades.loadAutomationStatues({id:this.parent.id,type:this.parentType})}closeModal(){this.modal.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(r.a),s.Wb(l.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-list"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-list__container",!0)},inputs:{currentTab:"currentTab",automations:"automations",automation:"automation",team:"team",user:"user",parentType:"parentType",parent:"parent",parentId:"parentId",teamId:"teamId",activeAutomationCount:"activeAutomationCount",rateAndSymbol:"rateAndSymbol",sidebarSelectedCategory:"sidebarSelectedCategory",loading:"loading",features:"features",showPaywall:"showPaywall",showPresets:"showPresets"},outputs:{changeParentId:"changeParentId",startCreatingAutomation:"startCreatingAutomation",createAutomation:"createAutomation",updateAutomation:"updateAutomation",editAutomation:"editAutomation",deleteAutomation:"deleteAutomation",changeTab:"changeTab",toggleAutomationActive:"toggleAutomationActive",onSidebarSelectedCategory:"onSidebarSelectedCategory",onShowPresets:"onShowPresets"},decls:16,vars:10,consts:function(){let e,t,i,a,c;return e=$localize`:@@common_automations␟b78a1e8079da4da83fa49d9557e1bf39fc95cd7a␟2609123380104571913: Automations `,t=$localize`:@@common_browse-1␟6271dcd1d523673ab2acbf9df7656fad120718b4␟5243350843421033681: Browse `,i=$localize`:@@cu-automation-list__header-tab_manage␟1467a68b7d65ac4396972217fc4b2c771731ece5␟4270957824557524875: Manage `,a=$localize`:@@cu-automation-list__header-tab_usage␟d82440c26146a16d711c21244ab97ecd1525d7b0␟3372723009789797858: Usage `,c=$localize`:@@cu-automation-list__limit-reached␟d0f672a31ade72a692b243b78e52d7586ce664db␟2266244864168954176: Limit Reached
`,[["class","cu-automation-list__banner cu-automation-list__banner_red",3,"ngClass","click",4,"ngIf"],[1,"cu-automation-list__header"],[1,"cu-automation-list__header-title"],e,[1,"cu-automation-list__header-tabs"],[1,"cu-automation-list__header-tab",3,"click"],t,i,a,[1,"cu-automation-list__header-close"],["icon","cu2-close",1,"cu-automation-list__header-close-icon",3,"click"],[3,"team","selectedCategory","automation","parentType","parentId","parent","loading","features","showPaywall","teamId","showPresets","createAutomation","updateAutomation","changeParentId","onSidebarSelectedCategory","startCreatingAutomation","onShowPresets",4,"ngIf"],[3,"automations","parent","parentType","team","activeAutomationCount","editAutomation","deleteAutomation","toggleAutomationActive","startCreatingAutomation",4,"ngIf"],[3,"team","rateAndSymbol","user",4,"ngIf"],[1,"cu-automation-list__banner","cu-automation-list__banner_red",3,"ngClass","click"],c,[3,"team","selectedCategory","automation","parentType","parentId","parent","loading","features","showPaywall","teamId","showPresets","createAutomation","updateAutomation","changeParentId","onSidebarSelectedCategory","startCreatingAutomation","onShowPresets"],[3,"automations","parent","parentType","team","activeAutomationCount","editAutomation","deleteAutomation","toggleAutomationActive","startCreatingAutomation"],[3,"team","rateAndSymbol","user"]]},template:function(e,t){1&e&&(s.bd(0,Gt,2,3,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.gc(3,3),s.bc(),s.cc(4,"div",4),s.cc(5,"div",5),s.qc("click",function(){return t.changeTab.emit(t.AutomationTab.Browse)}),s.gc(6,6),s.bc(),s.cc(7,"div",5),s.qc("click",function(){return t.changeTab.emit(t.AutomationTab.Manage)}),s.gc(8,7),s.bc(),s.cc(9,"div",5),s.qc("click",function(){return t.changeTab.emit(t.AutomationTab.Usage)}),s.gc(10,8),s.bc(),s.bc(),s.cc(11,"div",9),s.cc(12,"div",10),s.qc("click",function(){return t.closeModal()}),s.bc(),s.bc(),s.bc(),s.bd(13,Ft,1,11,"cu-automation-tab-browse",11),s.bd(14,Vt,1,5,"cu-automation-tab-manage",12),s.bd(15,qt,1,3,"cu-automation-tab-usage",13)),2&e&&(s.Dc("ngIf",null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.limit_reached),s.Ib(5),s.Ob("cu-automation-list__header-tab_active",t.currentTab===t.AutomationTab.Browse),s.Ib(2),s.Ob("cu-automation-list__header-tab_active",t.currentTab===t.AutomationTab.Manage),s.Ib(2),s.Ob("cu-automation-list__header-tab_active",t.currentTab===t.AutomationTab.Usage),s.Ib(4),s.Dc("ngIf",t.currentTab===t.AutomationTab.Browse),s.Ib(1),s.Dc("ngIf",t.currentTab===t.AutomationTab.Manage),s.Ib(1),s.Dc("ngIf",t.currentTab===t.AutomationTab.Usage))},directives:[c.q,u.a,c.o,ot,ft,Mt],styles:['.cu-automation-list__container{height:100%;display:flex;flex-direction:column;font-family:Gotham Pro,Proxima Nova,arial,serif}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-list__container{font-family:var(--global-font-support)}}.cu-automation-list__header{display:flex;align-items:center;height:70px;padding:0 20px;position:relative;background-color:#fff;box-shadow:0 5px 20px rgba(0,0,0,.1);border-top-right-radius:4px;border-top-left-radius:4px;z-index:1}.dark-theme .cu-automation-list__header{background:#384047}.cu-automation-list__header-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:22px;line-height:21px;position:relative;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-list__header-title{font-family:var(--global-font-support)}}.dark-theme .cu-automation-list__header-title{color:#d5d6d7}.cu-automation-list__header-tabs{flex:1;display:flex;justify-content:center;height:100%}.cu-automation-list__header-tab{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:15px;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:90px;color:#b9bec7;display:flex;justify-content:center;align-items:center;border-bottom:3px solid transparent;padding-top:3px;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-list__header-tab{font-family:var(--global-font-support)}}.cu-automation-list__header-tab:hover{color:#292d34}.dark-theme .cu-automation-list__header-tab:hover{color:#d5d6d7}.dark-theme .cu-automation-list__header-tab{color:#828588}.cu-automation-list__header-tab_active{border-bottom-color:#7b68ee;font-weight:500;color:#292d34}@supports (--theme-main-color:#7b68ee){.cu-automation-list__header-tab_active{border-bottom-color:var(--theme-main-color)}}.dark-theme .cu-automation-list__header-tab_active{color:#d5d6d7}.cu-automation-list__header-close{width:135px;display:flex;justify-content:flex-end}.cu-automation-list__header-close-icon{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;height:16px;width:16px;fill:#b9bec7;cursor:pointer}.cu-automation-list__header-close-icon:hover{transform:rotate(180deg)}.cu-automation-list__banner{display:flex;align-items:center;justify-content:center;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;padding:10px 10px 15px;margin-bottom:-5px;color:#fff;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-automation-list__banner_disabled{pointer-events:none}.cu-automation-list__banner_red{border-top-right-radius:3px;border-top-left-radius:3px;background:#fd7368}.dark-theme .cu-automation-list__banner_red{background:#d64c4c}.cu-automation-list__banner_red:hover{background:#fd5c4f}.dark-theme .cu-automation-list__banner_red:hover{background:#d13737}'],encapsulation:2,changeDetection:0}),e})();var Bt=i("tGh3"),Kt=i("csDc"),Wt=i("K0KF"),Ht=i("1M0N"),Zt=i("GcKk"),Qt=i("mcWp"),Jt=i("C8uC"),Yt=i("gb9A"),ei=i("X5rV"),ti=i("C9rM"),ii=i("FWqE"),ai=i("y71m"),ci=i("yw8I"),ni=i("3Pt+"),oi=i("3/Gy"),si=i("vxfF"),ri=i("CqXF"),li=i("Nv8m"),ui=i("GXRk"),di=i("c3rA"),mi=i("l7P3"),hi=i("Xuvk");const pi=["dropdown"],bi=function(){return[]};function gi(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-status-filter",2),s.qc("onChange",function(t){return s.Uc(e),s.uc().setValue(t)}),s.vc(1,"async"),s.vc(2,"async"),s.vc(3,"async"),s.bc()}if(2&e){const e=s.uc();s.Dc("statuses",s.wc(1,4,e.statuses$))("value",s.wc(2,6,e.value$)||s.Gc(10,bi))("placeholder",e.readonly?"":s.wc(3,8,e.statusInvalid$)?"Deleted status":e.placeholder||"Any")("dropdownDisabled",e.readonly)}}function fi(e,t){1&e&&(s.cc(0,"em"),s.gc(1,3),s.bc())}let _i=(()=>{class e{constructor(e,t){this.store=e,this.automationActionFacades=t,this.valueChange=new s.o,this.valueInvalid=new s.o,this.parent$=new j.a(null),this.statuses$=this.parent$.pipe(Object(h.a)(e=>!!e),Object(C.a)(e=>this.automationActionFacades.getStatuses(e.id))),this.value$=new j.a(null),this.statusInvalid$=Object(E.a)([this.statuses$,this.value$]).pipe(Object(m.a)(([e,t])=>!(!(t&&t.length>0&&e.length>0)||t.some(t=>e.some(e=>e.status===t))))),this.team$=this.store.select(di.getTeam),this.destroy$=new N.a,this.supportUnstartedGroup=!1}ngOnInit(){this.statusInvalid$.pipe(Object(h.a)(e=>!!e),Object(D.a)(this.destroy$)).subscribe(e=>{this.valueInvalid.emit({errorMessage:"All statuses were deleted"})}),this.team$.pipe(Object(h.a)(e=>!!e),Object(D.a)(this.destroy$)).subscribe(e=>{this.supportUnstartedGroup=e.unstarted_status_group})}ngOnChanges(e){(e.parentId||e.parentType)&&this.parent$.next({type:this.parentType,id:this.parentId}),e.value&&(Array.isArray(this.value)&&0!==this.value.length&&"string"!=typeof this.value[0]?this.statuses$.pipe(Object(p.a)(1),Object(D.a)(this.destroy$)).subscribe(e=>{const t=this.value.map(t=>e.find(e=>e.id===t.status_id)).filter(Boolean).map(e=>e.status);this.value$.next(t)}):this.value$.next(this.value))}ngOnDestroy(){this.destroy$.next()}setValue(e){this.statuses$.pipe(Object(p.a)(1)).subscribe(t=>{const i=e.map(e=>{if("object"!=typeof e)return t.find(t=>t.status===e);switch(e.type){case ui.f.all:return t.map(e=>e);case ui.f.closed:return t.filter(e=>e.type===ui.g.Closed).map(e=>e);case ui.f.done:return t.filter(e=>e.type===ui.g.Done).map(e=>e);case ui.f.unstarted:return t.filter(e=>e.type===ui.g.Open&&this.supportUnstartedGroup||e.type===ui.g.Unstarted).map(e=>e);case ui.f.active:return t.filter(e=>e.type!==ui.g.Closed&&e.type!==ui.g.Done&&(e.type!==ui.g.Open||!this.supportUnstartedGroup)&&e.type!==ui.g.Unstarted).map(e=>e);default:return[]}}).flat().map(e=>({status_id:e.id}));this.valueChange.emit(i)})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store),s.Wb(l.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-status-multiple"]],viewQuery:function(e,t){if(1&e&&s.jd(pi,1),2&e){let e;s.Qc(e=s.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-automation-field-value-status-multiple"],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",placeholder:"placeholder"},outputs:{valueChange:"valueChange",valueInvalid:"valueInvalid"},features:[s.Gb],decls:4,vars:6,consts:function(){let e;return e=$localize`:@@common_deleted-status␟01413448b4a3efdafb3286259246ae94abf5ac99␟6921328576288085454:Deleted status`,[[3,"statuses","value","placeholder","dropdownDisabled","onChange",4,"ngIf"],[4,"ngIf"],[3,"statuses","value","placeholder","dropdownDisabled","onChange"],e]},template:function(e,t){1&e&&(s.bd(0,gi,4,11,"cu-status-filter",0),s.vc(1,"async"),s.bd(2,fi,2,0,"em",1),s.vc(3,"async")),2&e&&(s.Dc("ngIf",!s.wc(1,2,t.statusInvalid$)||!t.readonly),s.Ib(2),s.Dc("ngIf",s.wc(3,4,t.statusInvalid$)&&t.readonly))},directives:[c.q,hi.a],pipes:[c.b],styles:[".cu-automation-field-value-status-multiple{min-width:0}.cu-automation-field-value-status-multiple .selected-status-list__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-edit-automation__container-footer .cu-automation-field-value-status-multiple .cu-status-filter__toggle{align-items:center;padding-top:2px}"],encapsulation:2,changeDetection:0}),e})();var vi=i("NZfI");const yi=function(){return[]};let ki=(()=>{class e{constructor(){this.valueChange=new s.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-priority-multiple"]],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",placeholder:"placeholder"},outputs:{valueChange:"valueChange"},decls:1,vars:5,consts:[[3,"value","placeholder","readonly","closeOnInsideClick","onChange"]],template:function(e,t){1&e&&(s.cc(0,"cu-priority-filter",0),s.qc("onChange",function(e){return t.valueChange.emit(e)}),s.bc()),2&e&&s.Dc("value",t.value||s.Gc(4,yi))("placeholder",t.placeholder||"Select a priority")("readonly",t.readonly)("closeOnInsideClick",!1)},directives:[vi.a],styles:[""],changeDetection:0}),e})();var Ii=i("2eDp");function wi(e,t){if(1&e&&(s.cc(0,"div",1),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" ",null==e.selectedMenuItem?null:e.selectedMenuItem.name,"\n")}}function Ti(e,t){if(1&e&&s.Xb(0,"span",7),2&e){const e=s.uc(2);s.Fc("icon","field-",e.selectedMenuItem.type,"")}}function xi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",1),s.cc(1,"div",2),s.ac(2),s.gc(3,3),s.Zb(),s.dd(4,": "),s.bc(),s.cc(5,"cu-dropdown-list",4),s.qc("onSelect",function(t){return s.Uc(e),s.uc().changeTrigger(t)}),s.cc(6,"cu-edit-automation-dropdown"),s.cc(7,"div",5),s.bd(8,Ti,1,1,"span",6),s.dd(9),s.bc(),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc();s.Ib(5),s.Dc("items",e.customFields)("showSearch",!0)("handleKeyboard",!0)("dropdownDisabled",e.customFields.length<=1)("autoFocusSearch",!0),s.Ib(3),s.Dc("ngIf",e.selectedMenuItem),s.Ib(1),s.fd(" ",null==e.selectedMenuItem?null:e.selectedMenuItem.name," ")}}let Ci=(()=>{class e{constructor(e,t){this.store=e,this.cdr=t,this.readOnly=!1,this.overrideType=new s.o}ngOnChanges(e){if(e.parentType||e.parentId){const e=this.parentType&&this.parentId?this.store.select(Object(Ii.d)(this.parentType,this.parentId)):null;e&&e.pipe(Object(p.a)(1)).subscribe(e=>{this.customFields=e.map(e=>("cf_"+e.id===this.trigger.triggerTypeOverride&&(this.selectedMenuItem=e),{id:"cf_"+e.id,title:e.name,customPayload:e,icon:"field-"+e.type,checked:"cf_"+e.id===this.trigger.triggerTypeOverride})),this.selectedMenuItem||(this.selectedMenuItem=this.customFields[0].customPayload,this.changeTrigger(this.customFields[0])),this.cdr.detectChanges()})}}changeTrigger(e){const t=this.customFields.find(e=>e.checked);t&&(t.checked=!1),e.checked=!0,this.selectedMenuItem=e.customPayload,this.cdr.markForCheck(),this.overrideType.emit(e.id)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store),s.Wb(s.h))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-custom-field-type"]],inputs:{condition:"condition",trigger:"trigger",resource:"resource",readOnly:"readOnly",parentType:"parentType",parentId:"parentId"},outputs:{overrideType:"overrideType"},features:[s.Gb],decls:2,vars:2,consts:function(){let e;return e=$localize`:@@common_field␟f20b1b7295f648481a680fa1c0625a3cbd3ff2da␟4820528532769775314:Field`,[["class","cu-edit-automation__container-body-actions-row",4,"ngIf"],[1,"cu-edit-automation__container-body-actions-row"],[1,"cu-edit-automation__container-body-actions-label"],e,[3,"items","showSearch","handleKeyboard","dropdownDisabled","autoFocusSearch","onSelect"],[1,"cu-automation-custom-field-type__label"],["class","cu-automation-custom-field-type__icon",3,"icon",4,"ngIf"],[1,"cu-automation-custom-field-type__icon",3,"icon"]]},template:function(e,t){1&e&&(s.bd(0,wi,2,1,"div",0),s.bd(1,xi,10,7,"div",0)),2&e&&(s.Dc("ngIf",t.readOnly),s.Ib(1),s.Dc("ngIf",!t.readOnly))},directives:[c.q,M.a,R.a,u.a],styles:[".cu-automation-custom-field-type__label[_ngcontent-%COMP%]{display:flex;align-items:center}.cu-automation-custom-field-type__icon[_ngcontent-%COMP%]{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;fill:#b9bec7;width:16px;height:16px;margin-right:8px}.cu-automation-custom-field-type__icon[_ngcontent-%COMP%]:hover{transition:none;fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-custom-field-type__icon[_ngcontent-%COMP%]:hover{fill:var(--theme-main-color)}}.cu-automation-custom-field-type__icon-fill[_ngcontent-%COMP%]{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-custom-field-type__icon-fill[_ngcontent-%COMP%]{fill:var(--theme-main-color)}}"],changeDetection:0}),e})();function Oi(e,t){1&e&&(s.cc(0,"div",1),s.cc(1,"div",2),s.cc(2,"div",1),s.mc(3,3),s.Xb(4,"span",4),s.jc(),s.bc(),s.bc(),s.bc())}let Si=(()=>{class e{constructor(){this.DataViewParentType=x.e}get isAssignee(){const e=Array.isArray(this.action.action.key)?this.action.action.key[0]:this.action.action.key,t=this.action.action.schema.properties?Object.keys(this.action.action.schema.properties):[];return e.includes("assignee")||t.includes("assignee")||t.includes("assignees")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-task-helper"]],inputs:{automation:"automation",action:"action"},decls:1,vars:1,consts:function(){let e;return e=$localize`:@@cu-automation-task-helper__assignee-no-access-automation-skip␟33e005580d96415981ecfc577041ca6c1c02fdfe␟3176007043596448417: If the ${"\ufffd#4\ufffd"}:START_TAG_SPAN:assignee${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN: doesn't have access to the task, this action will be skipped. `,[["class","cu-automation-task-helper__container",4,"ngIf"],[1,"cu-automation-task-helper__container"],[1,"cu-automation-task-helper"],e,[1,"cu-automation-task-helper__action"]]},template:function(e,t){1&e&&s.bd(0,Oi,5,0,"div",0),2&e&&s.Dc("ngIf",t.automation.parent.type!==t.DataViewParentType.Subcategory&&t.isAssignee)},directives:[c.q],styles:['.cu-automation-task-helper[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:16px;font-family:Gotham Pro,Proxima Nova,arial,serif;width:100%;background-color:rgba(255,200,0,.1);color:#292d34;display:flex;align-items:center;border-top:1px dashed #ffc800;padding:7px 10px;border-radius:6px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-task-helper[_ngcontent-%COMP%]{font-family:var(--global-font-support)}}.cu-automation-task-helper__container[_ngcontent-%COMP%]{padding:6px 12px;display:block;min-height:46px;align-items:center;max-width:100%}.cu-automation-task-helper__na[_ngcontent-%COMP%]{display:none}.cu-automation-task-helper__action[_ngcontent-%COMP%]{font-weight:500}.cu-automation-task-helper__action-dropdown[_ngcontent-%COMP%]{display:inline-block}.cu-automation-task-helper__action-dropdown-text[_ngcontent-%COMP%]{border-bottom:1px dashed #ffc800}'],changeDetection:0}),e})();var Di=i("YwDF"),Ai=i("hr9B"),ji=i("Muja"),Ni=i("vVjD");function Ei(e,t){1&e&&(s.cc(0,"div",3),s.ac(1),s.gc(2,4),s.Zb(),s.dd(3,": "),s.bc())}const $i=function(){return{useMultipleAssigneesClickapp:!0}};let Pi=(()=>{class e{constructor(){this.actions=[],this.valueChange=new s.o,this.parent$=new j.a(null),this.usersComponent=l.m}ngOnChanges(e){var t,i;let a;if((e.parentId||e.parentType)&&this.parent$.next({type:this.parentType,id:this.parentId}),null===(t=this.action)||void 0===t?void 0:t.action){const e=this.action;a="create_task"===e.action.key||"create_subtask"===e.action.key?e:null===(i=this.actions)||void 0===i?void 0:i.find(e=>"subcategory"===e.action.key)}if((e.actions||e.action)&&a&&!Object(ji.a)(e.actions.previousValue,e.actions.currentValue)){const t=a.inputValues.subcategory_id;t?this.updateParent({type:x.e.Subcategory,id:t}):a.inputValues.parent?this.updateParent({type:x.e.Task,id:a.inputValues.parent}):(e.actions||e.action)&&this.updateParent({type:this.parentType,id:this.parentId})}else!e.actions&&!e.action||a||this.updateParent({type:this.parentType,id:this.parentId})}setValue(e){this.valueChange.emit(Object.assign(Object.assign({},this.value),e))}updateParent(e){this.parent$.next({type:e.type,id:e.id})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-followers"]],hostAttrs:[1,"cu-automation-field-value-followers"],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",action:"action",actions:"actions"},outputs:{valueChange:"valueChange"},features:[s.Gb],decls:5,vars:13,consts:function(){let e;return e=$localize`:@@common_followers␟9bee670725966ed477b4c33a545c8b5436b0065e␟4914577418256256836:Followers`,[[1,"cu-edit-automation__container-body-actions-row"],["class","cu-edit-automation__container-body-actions-label cu-edit-automation__container-body-actions-label_followers",4,"ngIf"],[1,"cu-automation-field-value_stretch",3,"parentType","parentId","value","component","options","readonly","valueChange"],[1,"cu-edit-automation__container-body-actions-label","cu-edit-automation__container-body-actions-label_followers"],e]},template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.bd(1,Ei,4,0,"div",1),s.cc(2,"cu-automation-field-value",2),s.qc("valueChange",function(e){return t.setValue({followers:e})}),s.vc(3,"async"),s.vc(4,"async"),s.bc(),s.bc()),2&e){let e=null,i=null;s.Dc("@loadingEnter",void 0),s.Ib(1),s.Dc("ngIf",!t.readonly),s.Ib(1),s.Dc("parentType",null==(e=s.wc(3,8,t.parent$))?null:e.type)("parentId",null==(i=s.wc(4,10,t.parent$))?null:i.id)("value",null==t.value?null:t.value.followers)("component",t.usersComponent)("options",s.Gc(12,$i))("readonly",t.readonly)}},directives:[c.q,Ni.a],pipes:[c.b],styles:[".cu-automation-field-value-followers .cu-edit-automation__container-body-actions-row{padding:0}.cu-automation-field-value-followers__more{display:flex;justify-content:flex-end}.cu-automation-field-value-followers__more-text{cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;border-bottom:1px dashed #7c828d}.dark-theme .cu-automation-field-value-followers__more-text{color:#abaeb0;border-bottom-color:#abaeb0}.cu-automation-field-value-followers__more-text:hover,.cu-automation-field-value-followers__more-text_active{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-field-value-followers__more-text:hover,.cu-automation-field-value-followers__more-text_active{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}"],encapsulation:2,data:{animation:[Ai.f]},changeDetection:0}),e})();var Li=i("42vj"),Ui=i("keUj"),zi=i("XaMR");function Mi(e,t){1&e&&(s.cc(0,"span",7),s.gc(1,8),s.bc())}function Ri(e,t){1&e&&(s.cc(0,"div",9),s.Xb(1,"div",10),s.bc())}function Gi(e,t){if(1&e&&s.Xb(0,"cu-priorities-view",11),2&e){const e=s.uc();s.Dc("priority",e.prioritySelected)}}function Fi(e,t){1&e&&(s.ac(0),s.gc(1,12),s.Zb())}function Vi(e,t){if(1&e&&s.dd(0),2&e){const e=s.uc();s.fd(" ",null==e.prioritySelected?null:e.prioritySelected.priority," ")}}const qi=function(e){return[e]};let Xi=(()=>{class e{constructor(){this.valueChange=new s.o}ngOnInit(){}ngOnChanges(e){e.value&&this.value&&(this.prioritySelected=Li.a.find(e=>e.id===this.value))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-priority-single"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-field-value-priority-single",!0)},inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",forSummary:"forSummary"},outputs:{valueChange:"valueChange"},features:[s.Gb],decls:8,vars:9,consts:function(){let e,t;return e=$localize`:@@cu-automation-field-value-priority-single__to␟e04356b41e0d85f3e2f7ebc72a3f75c6e1147663␟3207050836358092212:to`,t=$localize`:@@common_clear␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,[[3,"disabled","prioritySelected","onChange"],["class","cu-automation-field-value-priority-single__to",4,"ngIf"],["class","priorities-list__item-icon",4,"ngIf"],[3,"priority",4,"ngIf"],[1,"cu-automation-field-value-priority-single__text"],[4,"ngIf","ngIfElse"],["priorityValueTmpl",""],[1,"cu-automation-field-value-priority-single__to"],e,[1,"priorities-list__item-icon"],["icon","close",1,"priorities-list__item-clear"],[3,"priority"],t]},template:function(e,t){if(1&e&&(s.cc(0,"cu-priority-list-dropdown",0),s.qc("onChange",function(e){return t.valueChange.emit(e?e.id:"none")}),s.bd(1,Mi,2,0,"span",1),s.bd(2,Ri,2,0,"div",2),s.bd(3,Gi,1,1,"cu-priorities-view",3),s.cc(4,"div",4),s.bd(5,Fi,2,0,"ng-container",5),s.bd(6,Vi,1,1,"ng-template",null,6,s.cd),s.bc(),s.bc()),2&e){const e=s.Rc(7);s.Dc("disabled",t.readonly)("prioritySelected",s.Hc(7,qi,t.prioritySelected)),s.Ib(1),s.Dc("ngIf",t.forSummary),s.Ib(1),s.Dc("ngIf","none"===t.value),s.Ib(1),s.Dc("ngIf","none"!==t.value),s.Ib(2),s.Dc("ngIf","none"===t.value)("ngIfElse",e)}},directives:[Ui.a,c.q,u.a,zi.a],styles:['.cu-automation-field-value-priority-single .cu-dropdown__toggle{display:flex;align-items:center}.cu-automation-field-value-priority-single__text{font-weight:400;font-size:14px;line-height:12px;font-family:Gotham Pro,Proxima Nova,arial,serif;padding-left:5px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-field-value-priority-single__text{font-family:var(--global-font-support)}}.cu-edit-automation__container-footer .cu-automation-field-value-priority-single__text{display:none}'],encapsulation:2,changeDetection:0}),e})();function Bi(e,t){1&e&&(s.cc(0,"div",5),s.ac(1),s.gc(2,6),s.Zb(),s.dd(3,": "),s.bc())}const Ki=function(){return{useMultipleAssigneesClickapp:!0,noPlaceholder:!0}};function Wi(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-automation-field-value",7),s.qc("valueChange",function(t){return s.Uc(e),s.uc().setValue({add_assignees:t})})("valueInvalid",function(t){return s.Uc(e),s.uc().valueInvalid.emit(t)}),s.vc(1,"async"),s.vc(2,"async"),s.bc()}if(2&e){const e=s.uc();let t=null,i=null;s.Dc("parentType",null==(t=s.wc(1,6,e.parent$))?null:t.type)("parentId",null==(i=s.wc(2,8,e.parent$))?null:i.id)("value",e.value.add_assignees)("component",e.usersComponent)("options",s.Gc(10,Ki))("readonly",e.readonly||e.value.unassign)}}const Hi=function(){return{noPlaceholder:!0,useMultipleAssigneesClickapp:!0}};function Zi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",0),s.cc(1,"div",5),s.ac(2),s.gc(3,8),s.Zb(),s.dd(4,": "),s.bc(),s.cc(5,"cu-automation-field-value",7),s.qc("valueChange",function(t){return s.Uc(e),s.uc().setValue({rem_assignees:t})})("valueInvalid",function(t){return s.Uc(e),s.uc().valueInvalid.emit(t)}),s.vc(6,"async"),s.vc(7,"async"),s.bc(),s.bc()}if(2&e){const e=s.uc();let t=null,i=null;s.Dc("@loadingEnter",void 0),s.Ib(5),s.Dc("parentType",null==(t=s.wc(6,7,e.parent$))?null:t.type)("parentId",null==(i=s.wc(7,9,e.parent$))?null:i.id)("value",e.value.rem_assignees)("component",e.usersComponent)("options",s.Gc(11,Hi))("readonly",e.readonly||e.value.unassign)}}function Qi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",0),s.cc(1,"div",5),s.ac(2),s.gc(3,9),s.Zb(),s.dd(4,": "),s.bc(),s.cc(5,"cu-automation-field-value",7),s.qc("valueChange",function(t){return s.Uc(e),s.uc().setValue({assignees:t})})("valueInvalid",function(t){return s.Uc(e),s.uc().valueInvalid.emit(t)}),s.vc(6,"async"),s.vc(7,"async"),s.bc(),s.bc()}if(2&e){const e=s.uc();let t=null,i=null;s.Dc("@loadingEnter",void 0),s.Ib(5),s.Dc("parentType",null==(t=s.wc(6,7,e.parent$))?null:t.type)("parentId",null==(i=s.wc(7,9,e.parent$))?null:i.id)("value",e.value.assignees)("component",e.usersComponent)("options",s.Gc(11,Ki))("readonly",e.readonly||e.value.unassign)}}function Ji(e,t){if(1&e){const e=s.dc();s.cc(0,"div",0),s.cc(1,"div",5),s.ac(2),s.gc(3,10),s.Zb(),s.dd(4,": "),s.bc(),s.cc(5,"cu-automation-field-value",11),s.qc("valueChange",function(t){return s.Uc(e),s.uc().setValue({unassign:t})})("valueInvalid",function(t){return s.Uc(e),s.uc().valueInvalid.emit(t)}),s.vc(6,"async"),s.vc(7,"async"),s.bc(),s.bc()}if(2&e){const e=s.uc();let t=null,i=null;s.Dc("@loadingEnter",void 0),s.Ib(5),s.Dc("parentType",null==(t=s.wc(6,6,e.parent$))?null:t.type)("parentId",null==(i=s.wc(7,8,e.parent$))?null:i.id)("value",e.value.unassign)("component",e.booleanComponent)("readonly",e.readonly)}}function Yi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",12),s.cc(1,"div",13),s.qc("click",function(){return s.Uc(e),s.uc().showAssigneeAdvancedActions=!0}),s.gc(2,14),s.bc(),s.bc()}}let ea=(()=>{class e{constructor(){this.actions=[],this.valueChange=new s.o,this.valueInvalid=new s.o,this.usersComponent=l.m,this.booleanComponent=l.f,this.showAssigneeAdvancedActions=!1,this.parent$=new j.a(null)}ngOnChanges(e){var t,i;let a;if((e.parentId||e.parentType)&&this.parent$.next({type:this.parentType,id:this.parentId}),null===(t=this.action)||void 0===t?void 0:t.action){const e=this.action;a="create_task"===e.action.key||"create_subtask"===e.action.key?e:null===(i=this.actions)||void 0===i?void 0:i.find(e=>"subcategory"===e.action.key)}if((e.actions||e.action)&&a&&!Object(ji.a)(e.actions.previousValue,e.actions.currentValue)){const t=a.inputValues.subcategory_id;t?this.updateParent({type:x.e.Subcategory,id:t}):a.inputValues.parent?this.updateParent({type:x.e.Task,id:a.inputValues.parent}):(e.actions||e.action)&&this.updateParent({type:this.parentType,id:this.parentId})}else!e.actions&&!e.action||a||this.updateParent({type:this.parentType,id:this.parentId});e.value&&(this.value.rem_assignees||this.value.assignees)&&(this.showAssigneeAdvancedActions=!0)}setValue(e){this.valueChange.emit(e.unassign?{add_assignees:[],rem_assignees:[],assignees:[],unassign:e.unassign}:Object.assign(Object.assign({},this.value),e))}updateParent(e){this.parent$.next({type:e.type,id:e.id})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-assignees"]],hostAttrs:[1,"cu-automation-field-value-assignees"],inputs:{parentType:"parentType",parentId:"parentId",action:"action",actions:"actions",value:"value",readonly:"readonly"},outputs:{valueChange:"valueChange",valueInvalid:"valueInvalid"},features:[s.Gb],decls:7,vars:6,consts:function(){let e,t,i,a,c;return e=$localize`:@@cu-automation-field-value-assignees__form-label_add-assignees␟66addba381433aa670bd01debb74741bcbe61df4␟9054057076900370542:Add assignee(s)`,t=$localize`:@@cu-automation-field-value-assignees__form-label_remove-assignees␟a714178914cbc5aab5751b96118c60413bcecf20␟7947774929370557290:Remove assignee(s)`,i=$localize`:@@common_reassign␟2d656ebcad66ddffa998d5558b21b40ac45062cd␟1463922540752409787:Reassign`,a=$localize`:@@cu-automation-field-value-assignees__form-label_remove-all-assignees␟c68d54a4c07df19fd94ac7c1c86d2f13001abf7b␟230362718108850104:Remove all assignees`,c=$localize`:@@common_advanced␟a6793c1c339d49dd9efe8f8d5e5432fdb633852f␟7808223134945951574: Advanced `,[[1,"cu-edit-automation__container-body-actions-row"],["class","cu-edit-automation__container-body-actions-label cu-edit-automation__container-body-actions-label_assignee",4,"ngIf"],["class","cu-automation-field-value_stretch",3,"parentType","parentId","value","component","options","readonly","valueChange","valueInvalid",4,"ngIf"],["class","cu-edit-automation__container-body-actions-row",4,"ngIf"],["class","cu-automation-field-value-assignees__more",4,"ngIf"],[1,"cu-edit-automation__container-body-actions-label","cu-edit-automation__container-body-actions-label_assignee"],e,[1,"cu-automation-field-value_stretch",3,"parentType","parentId","value","component","options","readonly","valueChange","valueInvalid"],t,i,a,[1,"cu-automation-field-value_stretch",3,"parentType","parentId","value","component","readonly","valueChange","valueInvalid"],[1,"cu-automation-field-value-assignees__more"],[1,"cu-automation-field-value-assignees__more-text",3,"click"],c]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.bd(1,Bi,4,0,"div",1),s.bd(2,Wi,3,11,"cu-automation-field-value",2),s.bc(),s.bd(3,Zi,8,12,"div",3),s.bd(4,Qi,8,12,"div",3),s.bd(5,Ji,8,10,"div",3),s.bd(6,Yi,3,0,"div",4)),2&e&&(s.Ib(1),s.Dc("ngIf",t.showAssigneeAdvancedActions&&(!t.readonly||t.readonly&&t.value.add_assignees&&t.value.add_assignees.length)),s.Ib(1),s.Dc("ngIf",t.readonly&&!t.showAssigneeAdvancedActions||!t.readonly||t.readonly&&t.value.add_assignees&&t.value.add_assignees.length),s.Ib(1),s.Dc("ngIf",t.showAssigneeAdvancedActions&&(!t.readonly||t.readonly&&t.value.rem_assignees&&t.value.rem_assignees.length)),s.Ib(1),s.Dc("ngIf",t.showAssigneeAdvancedActions&&(!t.readonly||t.readonly&&t.value.assignees&&t.value.assignees.length)),s.Ib(1),s.Dc("ngIf",t.showAssigneeAdvancedActions&&(!t.readonly||t.readonly&&t.value.unassign&&t.value.unassign)),s.Ib(1),s.Dc("ngIf",!t.showAssigneeAdvancedActions&&!t.readonly))},directives:[c.q,Ni.a],pipes:[c.b],styles:[".cu-automation-label_summary .cu-automation-field-value-assignees,.cu-automation-tab-manage__item .cu-automation-field-value-assignees{display:flex;align-content:center;flex-wrap:wrap}.cu-automation-label_summary .cu-automation-field-value-assignees .cu-edit-automation__container-body-actions-label_assignee,.cu-automation-tab-manage__item .cu-automation-field-value-assignees .cu-edit-automation__container-body-actions-label_assignee{width:auto}.cu-automation-field-value-assignees .cu-edit-automation__container-body-actions-row{padding:0;min-height:36px}.cu-automation-tab-manage__item .cu-automation-field-value-assignees .cu-edit-automation__container-body-actions-row{display:flex;align-items:center}.cu-automation-field-value-assignees__more{display:flex;justify-content:flex-end}.cu-automation-field-value-assignees__more-text{cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;border-bottom:1px dashed #7c828d}.dark-theme .cu-automation-field-value-assignees__more-text{color:#abaeb0;border-bottom-color:#abaeb0}.cu-automation-field-value-assignees__more-text:hover,.cu-automation-field-value-assignees__more-text_active{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-field-value-assignees__more-text:hover,.cu-automation-field-value-assignees__more-text_active{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}"],encapsulation:2,data:{animation:[Ai.f]},changeDetection:0}),e})();var ta=i("o7Ov"),ia=i("bV87"),aa=i("qMne"),ca=i("HEHP"),na=i("AeD3");function oa(e,t){1&e&&(s.cc(0,"em"),s.dd(1,"Select a template"),s.bc())}function sa(e,t){if(1&e){const e=s.dc();s.cc(0,"div",5),s.qc("click",function(t){return s.Uc(e),s.uc(2).clearSelectedTemplate(t)}),s.bc()}}function ra(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-edit-automation-dropdown",2),s.qc("click",function(){return s.Uc(e),s.uc().selectTemplate()}),s.bd(1,oa,2,0,"em",1),s.cc(2,"div",3),s.dd(3),s.bc(),s.bd(4,sa,1,0,"div",4),s.bc()}if(2&e){const e=s.uc();s.Ob("cu-edit-automation-dropdown__template",e.selectedTemplate),s.Ib(1),s.Dc("ngIf",!e.selectedTemplate&&!e.action.template),s.Ib(2),s.fd(" ",(null==e.selectedTemplate?null:e.selectedTemplate.name)||(null==e.action||null==e.action.template?null:e.action.template.name)," "),s.Ib(1),s.Dc("ngIf",e.selectedTemplate)}}function la(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.ed((null==e.selectedTemplate?null:e.selectedTemplate.name)||(null==e.action||null==e.action.template?null:e.action.template.name))}}let ua=(()=>{class e{constructor(e,t,i,a){this.cdr=e,this.dataService=t,this.store=i,this.effects=a,this.valueChange=new s.o,this.valueInvalid=new s.o,this.team$=this.store.select(di.getTeam),this.lastSelectedTemplate$=this.store.select(aa.k),this.effects.register(this.lastSelectedTemplate$,e=>{e&&(this.selectedTemplate=e,this.valueChange.emit(this.selectedTemplate.id))})}ngOnInit(){}ngOnChanges(e){!e.value||!this.value||this.selectedTemplate&&this.selectedTemplate.id===this.value||Object(l.x)(this.value,this.store,this.dataService,!0).subscribe(e=>{this.selectedTemplate={id:e.id,name:e.name},this.cdr.markForCheck()},()=>{this.valueInvalid.emit({errorMessage:"The template was deleted"})})}selectTemplate(){this.effects.register(this.team$.pipe(Object(p.a)(1)),e=>{this.store.dispatch(new ta.Oe({open:!0,parent:e,parentType:ia.d.Team,initialType:ia.d.Task,returnOnTemplateSelect:!0,onlyAllowedTypes:[ia.d.Task],preventCloseAllModal:!0}))})}clearSelectedTemplate(e){e&&e.stopPropagation(),this.selectedTemplate=null,this.valueChange.emit("")}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h),s.Wb(na.a),s.Wb(mi.Store),s.Wb(ca.b))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-template"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-field-value-template",!0)},inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",options:"options",action:"action"},outputs:{valueChange:"valueChange",valueInvalid:"valueInvalid"},features:[s.Hb([ca.b]),s.Gb],decls:2,vars:2,consts:[[3,"cu-edit-automation-dropdown__template","click",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"cu-edit-automation-dropdown__template-name"],["icon","cu2-times",3,"click",4,"ngIf"],["icon","cu2-times",3,"click"]],template:function(e,t){1&e&&(s.bd(0,ra,5,5,"cu-edit-automation-dropdown",0),s.bd(1,la,2,1,"ng-container",1)),2&e&&(s.Dc("ngIf",!t.readonly),s.Ib(1),s.Dc("ngIf",t.readonly))},directives:[c.q,R.a,u.a],styles:[""],encapsulation:2,changeDetection:0}),e})();var da=i("keZ5"),ma=i("VQww"),ha=i("zY2b"),pa=i("bNw/");let ba=(()=>{class e{constructor(e){this.store=e,this.valueChange=new s.o,this.parent$=new j.a(null),this.projectId$=this.parent$.pipe(Object(h.a)(e=>!!e),Object(C.a)(e=>this.store.select(Object(l.w)(e.type,e.id))),Object(m.a)(e=>e.project_id||e.id)),this.tagsMap$=this.store.select(da.d),this.tags$=Object(E.a)([this.projectId$,this.tagsMap$]).pipe(Object(m.a)(([e,t])=>t[e])),this.value$=new j.a([]),this.selectedTags$=Object(E.a)([this.tags$,this.value$]).pipe(Object(m.a)(([e,t])=>(e||[]).filter(e=>t.includes(e.name)))),this.destroy$=new N.a}ngOnInit(){this.projectId$.pipe(Object(h.a)(e=>!!e),Object(O.a)(),Object(A.a)(this.tags$,this.value$),Object(D.a)(this.destroy$)).subscribe(([e,t,i])=>{if(t){const e=(t||[]).map(e=>e.name),a=i.filter(t=>!e.includes(t));this.getTags({missingTags:a})}else this.getTags({missingTags:i})})}ngOnChanges(e){e.parentId&&this.parent$.next({id:this.parentId,type:this.parentType}),e.value&&this.value$.next(this.value||[])}ngOnDestroy(){this.destroy$.next()}addTag(e){e&&e.new&&this.projectId$.pipe(Object(p.a)(1)).subscribe(t=>this.store.dispatch(Object(ma.p)({projectId:t,tag:e})));const t=this.value||[];t.includes(e.name)||this.valueChange.emit([...t,e.name])}removeTag(e){this.valueChange.emit((this.value||[]).filter(t=>t!==e.name))}getTags(e){this.projectId$.pipe(Object(p.a)(1)).subscribe(t=>this.store.dispatch(Object(ma.e)({projectId:t,paging:e})))}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-tag"]],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly"},outputs:{valueChange:"valueChange"},features:[s.Gb],decls:7,vars:28,consts:[[3,"tags","allSpaces","taskTags","spaceId","readonly","hideEditOnAllSpaces","showSelected","spaceAccess","onChange","onDelete","onPage"],[3,"tags","availableTags","alwaysShowIcon","allSpaces","forFilter","spaceAccess","alwaysShowNoHover","canRemoveTag","readOnly","modifier","onDelete"]],template:function(e,t){1&e&&(s.cc(0,"cu-tags-list",0),s.qc("onChange",function(e){return t.addTag(e)})("onDelete",function(e){return t.removeTag(e)})("onPage",function(e){return t.getTags(e)}),s.vc(1,"async"),s.vc(2,"async"),s.vc(3,"async"),s.cc(4,"cu-tags-view",1),s.qc("onDelete",function(e){return t.removeTag(e)}),s.vc(5,"async"),s.vc(6,"async"),s.bc(),s.bc()),2&e&&(s.Dc("tags",s.wc(1,18,t.tags$))("allSpaces",!1)("taskTags",s.wc(2,20,t.selectedTags$))("spaceId",s.wc(3,22,t.projectId$))("readonly",t.readonly)("hideEditOnAllSpaces",!0)("showSelected",!1)("spaceAccess",!1),s.Ib(4),s.Dc("tags",s.wc(5,24,t.selectedTags$))("availableTags",s.wc(6,26,t.tags$))("alwaysShowIcon",!1)("allSpaces",!1)("forFilter",!0)("spaceAccess",!1)("alwaysShowNoHover",!0)("canRemoveTag",!t.readonly)("readOnly",t.readonly)("modifier","cu-tags-view_34"))},directives:[ha.a,pa.a],pipes:[c.b],styles:[""],changeDetection:0}),e})();var ga=i("vkgz"),fa=i("JIr8"),_a=i("UXun");function va(e,t){}function ya(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-category-list-dropdown",2),s.qc("onSelect",function(t){return s.Uc(e),s.uc().valueChange.emit(t.subcategory.id)}),s.cc(1,"cu-edit-automation-dropdown"),s.bd(2,va,0,0,"ng-template",3),s.bc(),s.bc()}if(2&e){const e=s.uc(),t=s.Rc(2);s.Dc("selectedSubcategory",e.value),s.Ib(2),s.Dc("ngTemplateOutlet",t)}}function ka(e,t){1&e&&(s.ac(0),s.dd(1,"to "),s.Zb())}function Ia(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc().ngIf;s.Ib(1),s.ed(e.name)}}function wa(e,t){1&e&&(s.cc(0,"em"),s.gc(1,5),s.bc())}function Ta(e,t){1&e&&(s.cc(0,"em"),s.gc(1,6),s.bc())}function xa(e,t){if(1&e&&(s.ac(0),s.bd(1,Ia,2,1,"ng-container",4),s.bd(2,wa,2,0,"em",4),s.bd(3,Ta,2,0,"em",4),s.Zb()),2&e){const e=t.ngIf;s.Ib(1),s.Dc("ngIf",!e.archived&&!e.deleted),s.Ib(1),s.Dc("ngIf",e.archived),s.Ib(1),s.Dc("ngIf",e.deleted)}}function Ca(e,t){1&e&&(s.ac(0),s.cc(1,"em"),s.gc(2,7),s.bc(),s.Zb())}function Oa(e,t){if(1&e&&(s.ac(0),s.bd(1,xa,4,3,"ng-container",4),s.vc(2,"async"),s.bd(3,Ca,3,0,"ng-container",4),s.vc(4,"async"),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",s.wc(2,2,e.subcategory$)),s.Ib(2),s.Dc("ngIf",!s.wc(4,4,e.subcategory$))}}function Sa(e,t){1&e&&(s.cc(0,"em"),s.gc(1,8),s.bc())}function Da(e,t){if(1&e&&(s.bd(0,ka,2,0,"ng-container",4),s.bd(1,Oa,5,6,"ng-container",4),s.bd(2,Sa,2,0,"em",4)),2&e){const e=s.uc();s.Dc("ngIf",e.forSummary&&!e.options.forMoveList),s.Ib(1),s.Dc("ngIf",e.value),s.Ib(1),s.Dc("ngIf",!e.value&&!e.readonly)}}let Aa=(()=>{class e{constructor(e,t){this.store=e,this.dataService=t,this.valueChange=new s.o,this.valueInvalid=new s.o,this.value$=new j.a(null),this.subcategory$=this.value$.pipe(Object(C.a)(e=>e?this.store.select(Object(di.findSubcategoryByIdInAllProjects)(e)).pipe(Object(C.a)(t=>t?Object(Ne.a)(t):this.dataService.getSubcategoryById(e,{},!1).pipe(Object(ga.a)(e=>{e.deleted&&this.valueInvalid.emit({errorMessage:"The List was deleted"})}),Object(fa.a)(()=>Object(Ne.a)(null))))):Object(Ne.a)(null)),Object(_a.a)({refCount:!0,bufferSize:1}))}ngOnInit(){}ngOnChanges(e){e.value&&this.value$.next(this.value)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store),s.Wb(na.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-subcategory"]],hostAttrs:[1,"cu-automation-field-value-subcategory"],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",forSummary:"forSummary",options:"options"},outputs:{valueChange:"valueChange",valueInvalid:"valueInvalid"},features:[s.Gb],decls:3,vars:2,consts:function(){let e,t,i,a;return e=$localize`:@@cu-automation-field-value-subcategory__archived-list␟c72b45abd6c0b9b18a33a25b8c0b05cc416954fe␟36318546184480649:Archived List`,t=$localize`:@@cu-automation-field-value-subcategory__deleted-list␟3e122383909152950f1fde01458a3da7793b888f␟1727409759555882233:Deleted List`,i=$localize`:@@cu-automation-field-value-subcategory__private-list␟81c79a23141c0a1246cc0e3bd15b5d725a1ce9da␟5871157137821068115:Private List`,a=$localize`:@@common_select-a-list␟835184e13cdb0d3a11e6883df2bc5254c812e44f␟2500669574867098592:Select a List`,[[3,"selectedSubcategory","onSelect",4,"ngIf","ngIfElse"],["valueTemplate",""],[3,"selectedSubcategory","onSelect"],[3,"ngTemplateOutlet"],[4,"ngIf"],e,t,i,a]},template:function(e,t){if(1&e&&(s.bd(0,ya,3,2,"cu-category-list-dropdown",0),s.bd(1,Da,3,3,"ng-template",null,1,s.cd)),2&e){const e=s.Rc(2);s.Dc("ngIf",!t.readonly)("ngIfElse",e)}},directives:[c.q,F.a,R.a,c.x],pipes:[c.b],styles:[".cu-automation-field-value-subcategory{min-width:0}.cu-automation-field-value-subcategory .cu-category-list-dropdown{width:100%}"],encapsulation:2,changeDetection:0}),e})();var ja=i("jJW4"),Na=i("LdyQ"),Ea=i("MJvn"),$a=i("n+1/"),Pa=i("KbVY"),La=i("sl2P");const Ua=["dropdown"];function za(e,t){1&e&&(s.cc(0,"em",7),s.gc(1,8),s.bc())}function Ma(e,t){if(1&e){const e=s.dc();s.cc(0,"div"),s.cc(1,"cu-status-list",9),s.qc("onChange",function(t){return s.Uc(e),s.uc(2).selectStatus(t)}),s.vc(2,"async"),s.vc(3,"async"),s.bc(),s.bc()}if(2&e){const e=s.uc(2);let t=null;s.Ib(1),s.Dc("statuses",s.wc(2,3,e.statuses$))("autoFocus",!0)("groupByStatusType",null==(t=s.wc(3,5,e.sharedData.compatCurrentTeam$))?null:t.unstarted_status_group)}}function Ra(e,t){if(1&e&&(s.cc(0,"div",2,3),s.cc(2,"cu-edit-automation-dropdown",4),s.bd(3,za,2,0,"em",5),s.vc(4,"async"),s.vc(5,"async"),s.vc(6,"async"),s.bc(),s.bd(7,Ma,4,7,"div",6),s.bc()),2&e){const e=s.uc(),t=s.Rc(2);s.Ib(3),s.Dc("ngIf",!s.wc(4,2,e.value$)||!s.wc(5,4,e.statusMap$)[s.wc(6,6,e.value$)])("ngIfElse",t)}}function Ga(e,t){1&e&&(s.ac(0),s.cc(1,"div",13),s.gc(2,14),s.bc(),s.Zb())}const Fa=function(e){return{color:e}};function Va(e,t){if(1&e&&(s.cc(0,"div",15),s.vc(1,"isColorDarkerThan"),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.vc(5,"async"),s.dd(6),s.vc(7,"async"),s.bc()),2&e){const e=s.uc(2);s.Ob("lv-task__status_light",!s.xc(1,4,s.wc(2,7,e.statusMap$)[s.wc(3,9,e.value$)].color,.86)),s.Dc("ngStyle",s.Hc(17,Fa,s.wc(4,11,e.statusMap$)[s.wc(5,13,e.value$)].color)),s.Ib(6),s.fd(" ",s.wc(7,15,e.value$)," ")}}function qa(e,t){1&e&&(s.cc(0,"em"),s.gc(1,16),s.bc())}const Xa=function(e){return{backgroundColor:e}};function Ba(e,t){if(1&e&&(s.bd(0,Ga,3,0,"ng-container",10),s.Xb(1,"div",11),s.vc(2,"async"),s.vc(3,"async"),s.bd(4,Va,8,19,"div",12),s.vc(5,"async"),s.vc(6,"async"),s.vc(7,"async"),s.bd(8,qa,2,0,"em",10),s.vc(9,"async"),s.vc(10,"async"),s.vc(11,"async")),2&e){const e=s.uc();s.Dc("ngIf",e.forSummary),s.Ib(1),s.Dc("ngStyle",s.Hc(20,Xa,null==s.wc(2,4,e.statusMap$)[s.wc(3,6,e.value$)]?null:s.wc(2,4,e.statusMap$)[s.wc(3,6,e.value$)].color)),s.Ib(3),s.Dc("ngIf",s.wc(5,8,e.value$)&&s.wc(6,10,e.statusMap$)[s.wc(7,12,e.value$)]),s.Ib(4),s.Dc("ngIf",s.wc(9,14,e.value$)&&!s.wc(10,16,e.statusMap$)[s.wc(11,18,e.value$)])}}let Ka=(()=>{class e{constructor(e,t){this.sharedData=e,this.automationActionFacades=t,this.actions=[],this.valueChange=new s.o,this.valueInvalid=new s.o,this.parent$=new j.a(null),this.value$=new j.a(null),this.statuses$=this.parent$.pipe(Object(h.a)(e=>!!e),Object(C.a)(e=>this.automationActionFacades.getStatuses(e.id))),this.statusMap$=this.statuses$.pipe(Object(m.a)(e=>{const t={};return e.forEach(e=>{t[e.status]=e}),t})),this.destroy$=new N.a}ngOnInit(){Object(E.a)([this.statusMap$,this.value$]).pipe(Object(D.a)(this.destroy$)).subscribe(([e,t])=>{t&&Object.keys(e).length>0&&!e[t]&&this.valueInvalid.emit({errorMessage:"Status is deleted"})}),this.parent$.pipe(Object(D.a)(this.destroy$)).subscribe(e=>this.automationActionFacades.loadAutomationStatuesIfNeeded(e))}ngOnChanges(e){(e.parentId||e.parentType)&&this.parent$.next({type:this.parentType,id:this.parentId});const t="create_task"!==this.action.resource.key&&"create_subtask"!==this.action.resource.key||!this.actions?null:this.actions.find(e=>"subcategory"===e.action.key);if(e.actions&&t&&!Object(ji.a)(e.actions.previousValue,e.actions.currentValue)||e.action&&this.action.inputValues.subcategory_id?this.parent$.next({type:x.e.Subcategory,id:this.action.inputValues.subcategory_id||t.inputValues.subcategory_id}):e.actions&&!t&&this.parent$.next({type:this.parentType,id:this.parentId}),e.value)if("string"==typeof this.value)this.value$.next(this.value);else if(this.value&&"object"==typeof this.value&&this.value.status_id){const e=this.value.status_id;this.statuses$.pipe(Object(p.a)(1),Object(D.a)(this.destroy$)).subscribe(t=>{const i=t.find(t=>t.id===e);i?this.value$.next(i.status):t.length>0&&(this.valueInvalid.emit({errorMessage:"Status is deleted"}),this.value$.next(void 0))})}else this.value$.next(void 0)}ngOnDestroy(){this.destroy$.next()}selectStatus(e){this.valueChange.emit({status_id:e.id}),this.dropdown.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(ja.a),s.Wb(l.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-status-single"]],viewQuery:function(e,t){if(1&e&&s.jd(Ua,1),2&e){let e;s.Qc(e=s.rc())&&(t.dropdown=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-automation-field-value-status-single",!0)},inputs:{parentType:"parentType",parentId:"parentId",actions:"actions",action:"action",value:"value",readonly:"readonly",forSummary:"forSummary"},outputs:{valueChange:"valueChange",valueInvalid:"valueInvalid"},features:[s.Gb],decls:3,vars:2,consts:function(){let e,t,i,a;return e=$localize`:@@common_select-a-status␟89f5d97fff8a9400ad3d5aa5fd892d947ab8bb15␟6106762636118467680:Select a status`,t=$localize`:@@common_select-a-status␟89f5d97fff8a9400ad3d5aa5fd892d947ab8bb15␟6106762636118467680:Select a status`,i=$localize`:@@cu-automation-field-value-status-single__text_to␟a9ca7ff023c568025565ff09b92b807be2b7be65␟8125260797345838819: to `,a=$localize`:@@common_deleted-status␟01413448b4a3efdafb3286259246ae94abf5ac99␟6921328576288085454:Deleted status`,[["cuDropdown","",4,"ngIf","ngIfElse"],["readonlyValue",""],["cuDropdown",""],["dropdown","dropdown"],["cuDropdownToggle",""],["cuTooltip",e,4,"ngIf","ngIfElse"],[4,"cuDropdownMenu"],["cuTooltip",e],t,[3,"statuses","autoFocus","groupByStatusType","onChange"],[4,"ngIf"],[1,"selected-status-list__item",3,"ngStyle"],["class","lv-task__status-col-item",3,"ngStyle","lv-task__status_light",4,"ngIf"],[1,"cu-automation-field-value-status-single__text"],i,[1,"lv-task__status-col-item",3,"ngStyle"],a]},template:function(e,t){if(1&e&&(s.bd(0,Ra,8,8,"div",0),s.bd(1,Ba,12,22,"ng-template",null,1,s.cd)),2&e){const e=s.Rc(2);s.Dc("ngIf",!t.readonly)("ngIfElse",e)}},directives:[c.q,Na.b,R.a,Ea.a,$a.a,lt.a,Pa.a,c.t],pipes:[c.b,La.a],styles:['.cu-automation-field-value-status-single{font-weight:400;font-size:11px;line-height:11px;font-family:Gotham Pro,Proxima Nova,arial,serif;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-field-value-status-single{font-family:var(--global-font-support)}}.cu-automation-field-value-status-single__text{padding-right:5px}.cu-automation-field-value-status-single .lv-task__status-col-item{width:auto}.cu-edit-automation__container-footer-text .cu-automation-field-value-status-single .lv-task__status-col-item{margin-top:3px}.cu-automation-field-value-status-single .selected-status-list__item{margin:0 2px 0 5px;display:none}.cu-edit-automation__container-footer-text .cu-automation-field-value-status-single .selected-status-list__item{display:block}'],encapsulation:2,changeDetection:0}),e})();var Wa=i("aIzb");function Ha(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(3);s.Ib(1),s.ed(e.options.placeholder)}}function Za(e,t){1&e&&(s.ac(0),s.gc(1,7),s.Zb())}function Qa(e,t){if(1&e&&(s.cc(0,"em"),s.bd(1,Ha,2,1,"ng-container",4),s.bd(2,Za,2,0,"ng-template",null,6,s.cd),s.bc()),2&e){const e=s.Rc(3),t=s.uc(2);s.Ib(1),s.Dc("ngIf",t.options.placeholder)("ngIfElse",e)}}const Ja=function(e){return[e]},Ya=function(){return[]};function ec(e,t){if(1&e){const e=s.dc();s.cc(0,"div",8),s.cc(1,"cu-task-selector",9),s.qc("onSelect",function(t){return s.Uc(e),s.uc(2).selectTask(t.task)}),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(1),s.Dc("modifier","task-selector_task-mentions")("showSearch",!0)("taskIdsToExclude",e.value?s.Hc(5,Ja,e.value):s.Gc(7,Ya))("showSubtasks",!0)("searchSubtasks",!0)}}function tc(e,t){if(1&e&&(s.cc(0,"div",2),s.cc(1,"cu-edit-automation-dropdown",3),s.bd(2,Qa,4,2,"em",4),s.bc(),s.bd(3,ec,2,8,"div",5),s.bc()),2&e){const e=s.uc(),t=s.Rc(2);s.Dc("dropdownCloseOnInsideClick",!1),s.Ib(2),s.Dc("ngIf",!e.value)("ngIfElse",t)}}function ic(e,t){if(1&e&&s.dd(0),2&e){const e=s.uc();s.fd(" ",null==e.task?null:e.task.name,"\n")}}let ac=(()=>{class e{constructor(e,t,i){this.cdr=e,this.dataService=t,this.store=i,this.valueChange=new s.o}ngOnInit(){}ngOnChanges(e){!e.value||!this.value||this.task&&this.task.id===this.value||Object(l.x)(this.value,this.store,this.dataService).subscribe(e=>{this.task=e,this.cdr.markForCheck()})}selectTask(e){this.valueChange.emit(e.id),this.task=e,this.dropdown.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h),s.Wb(na.a),s.Wb(mi.Store))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-field-value-task"]],viewQuery:function(e,t){if(1&e&&s.jd(Na.b,1),2&e){let e;s.Qc(e=s.rc())&&(t.dropdown=e.first)}},inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",options:"options"},outputs:{valueChange:"valueChange"},features:[s.Gb],decls:3,vars:2,consts:function(){let e;return e=$localize`:@@cu-automation-field-value-task__dropdown-placeholder_select-a-task␟20d9976d407c24f24665061175cc299a5fd34fa0␟5053426274194567543:Select a task`,[["cuDropdown","",3,"dropdownCloseOnInsideClick",4,"ngIf","ngIfElse"],["readonlyValue",""],["cuDropdown","",3,"dropdownCloseOnInsideClick"],["cuDropdownToggle",""],[4,"ngIf","ngIfElse"],["class","cu-automation-field-value-task__dropdown",4,"cuDropdownMenu"],["defaultPlaceholderTmpl",""],e,[1,"cu-automation-field-value-task__dropdown"],[3,"modifier","showSearch","taskIdsToExclude","showSubtasks","searchSubtasks","onSelect"]]},template:function(e,t){if(1&e&&(s.bd(0,tc,4,3,"div",0),s.bd(1,ic,1,1,"ng-template",null,1,s.cd)),2&e){const e=s.Rc(2);s.Dc("ngIf",!t.readonly)("ngIfElse",e)}},directives:[c.q,Na.b,R.a,Ea.a,$a.a,Wa.a],styles:[".cu-automation-field-value-task__dropdown[_ngcontent-%COMP%]{width:385px}"],changeDetection:0}),e})();function cc(e,t){if(1&e){const e=s.dc();s.cc(0,"div",1),s.ac(1),s.mc(2,2),s.Xb(3,"span",3),s.jc(),s.Zb(),s.cc(4,"cu-dropdown-list",4),s.qc("onSelect",function(t){return s.Uc(e),s.uc().updateAction(t)}),s.cc(5,"span",5),s.dd(6),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc();s.Ib(4),s.Dc("items",e.actionMenu)("handleKeyboard",!0),s.Ib(2),s.ed(e.selectedItem.title)}}const nc={followers:{resource:"task",type:"followers",component:l.m,componentOptions:{useMultipleAssigneesClickapp:!0},icon:"activity-assignee"},add_assignees:{resource:"task",type:"add_assignees",component:l.m,componentOptions:{useMultipleAssigneesClickapp:!0},title:"Add assignee(s)",icon:"activity-assignee"},rem_assignees:{resource:"task",type:"rem_assignees",component:l.m,componentOptions:{useMultipleAssigneesClickapp:!0},title:"Remove assignee(s)",icon:"activity-assignee"},assignee:{resource:"task",type:"assignee",component:l.m,componentOptions:{useMultipleAssigneesClickapp:!0},icon:"activity-assignee"},assignees:{resource:"task",type:"assignees",component:l.m,componentOptions:{useMultipleAssigneesClickapp:!0},icon:"activity-assignee"},template_id:{type:"template_id",resource:"task",title:"Template",component:ua,icon:"activity-template-merged"},custom_field:{type:"custom_field",resource:"task",component:l.e,icon:"activity-custom-field",selfEmit:!0},tag:{type:"tag",resource:"task",title:"Add tag(s)",component:ba,icon:"activity-tags"},tags:{type:"tags",resource:"task",title:"Add tag(s)",component:ba,icon:"activity-tags"},priority:{type:"priority",resource:"task",component:Xi,icon:"activity-priority"},content:{type:"content",resource:"task",component:l.k,componentOptions:{placeholder:"Type a task Description",useVariables:!0,multiline:!1},icon:"activity-content"},subcategory_id:{type:"subcategory_id",resource:"task",component:Aa,icon:"activity-list-moved"},status:{type:"status",resource:"task",component:Ka,icon:"activity-status"},action:{type:"action",resource:"task",component:(()=>{class e{constructor(e,t){this.elementRef=e,this.renderer=t,this.actions=[],this.valueChange=new s.o,this.actionMenu=[],this.DataViewParentType=x.e}ngOnInit(){this.actionMenu=this.generateMenuItems(),this.selectedItem=this.actionMenu.find(e=>e.checked)||this.actionMenu[0]}ngOnChanges(e){e.value&&(this.actionMenu=this.generateMenuItems(),this.selectedItem=this.actionMenu.find(e=>e.checked)||this.actionMenu[0]),e.parentType&&(this.parentType===this.DataViewParentType.Subcategory?this.renderer.addClass(this.elementRef.nativeElement,"cu-warning-action__na"):this.renderer.removeClass(this.elementRef.nativeElement,"cu-warning-action__na"))}updateAction(e){this.valueChange.emit({action:{value:e.id,type:"Input"}}),this.selectedItem=e}generateMenuItems(){return[{id:1,title:"Skipped",checked:1===this.value||!this.value},{id:2,title:"First Status",checked:2===this.value},{id:3,title:"Create Status",checked:3===this.value}]}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.m),s.Wb(s.H))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-action-warning"]],hostAttrs:[1,"cu-warning-action"],inputs:{parentType:"parentType",parentId:"parentId",actions:"actions",value:"value",readonly:"readonly",forSummary:"forSummary"},outputs:{valueChange:"valueChange"},features:[s.Gb],decls:1,vars:1,consts:function(){let e;return e=$localize`:@@cu-automation-action-warning__form-placeholder_select-action␟7cba55c173c0f5c3835961ffdb8b16a24e2d2331␟5212756585548337265: If this ${"\ufffd#3\ufffd"}:START_TAG_SPAN:status${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN: doesn't exist in a List, this action will be `,[["class","cu-warning-action__container",4,"ngIf"],[1,"cu-warning-action__container"],e,[1,"cu-warning-action__action"],[1,"cu-warning-action__action-dropdown",3,"items","handleKeyboard","onSelect"],[1,"cu-warning-action__action-dropdown-text"]]},template:function(e,t){1&e&&s.bd(0,cc,7,3,"div",0),2&e&&s.Dc("ngIf",t.parentType!==t.DataViewParentType.Subcategory)},directives:[c.q,M.a],styles:['.cu-warning-action{font-weight:400;font-size:12px;line-height:16px;font-family:Gotham Pro,Proxima Nova,arial,serif;width:100%;background-color:rgba(255,200,0,.1);color:#292d34;display:flex;align-items:center;border-top:1px dashed #ffc800;padding:7px 10px;border-radius:6px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-warning-action{font-family:var(--global-font-support)}}.cu-warning-action__na{display:none}.cu-warning-action__action{font-weight:500}.cu-warning-action__action-dropdown{display:inline-block}.cu-warning-action__action-dropdown-text{border-bottom:1px dashed #ffc800}'],encapsulation:2,changeDetection:0}),e})(),selfEmit:!0}},oc={time_spent:{time:{component:l.l,icon:"activity-time-spent",type:"time",resource:"task"}},time_estimate:{time_estimate:{component:l.l,icon:"activity-time-spent",type:"time_estimate",resource:"task"}},change_tags:{add:{component:ba,type:"add",resource:"task"},rem:{component:ba,type:"rem",resource:"task"}},create_subtask:{parent:{component:ac,type:"parent",resource:"task"}},change_followers:{add:{component:l.m,type:"add",resource:"task"},rem:{component:l.m,type:"rem",resource:"task"}}},sc=[{key:"custom_field",component:{type:"custom_field",resource:"task",schema:{type:"object",properties:{field_id:{type:"string"},value:{type:"string"}},required:["field_id","value"]},component:l.i}},{key:"assignee",component:{type:"assignee",resource:"task",component:ea}},{key:"follower",component:{type:"follower",resource:"task",schema:{type:"object",properties:{followers:{type:"array"}},required:[]},component:Pi}},{key:"comment",component:{type:"comment",resource:"task",schema:{type:"object",properties:{comment:{type:"string"},assignee:{type:void 0}},required:["comment"]},component:l.g}}];let rc=(()=>{class e{constructor(e){this.store=e,this.key="task",this.statusesColors={main:"rgb(104, 238, 190)",faded:"rgba(104, 238, 190, 0.1)"},this.assigneesColors={main:"rgb(47, 128, 237)",faded:"rgba(47, 128, 237, 0.1)"},this.tagsColors={main:"rgb(255, 200, 0)",faded:"rgba(255, 200, 0, 0.1)"},this.prioritiesColors={main:"rgb(253, 113, 113)",faded:"rgba(253, 113, 113, 0.1)"},this.datesColors={main:"rgb(253, 113, 175)",faded:"rgba(253, 113, 175, 0.1)"},this.creationColors={main:"rgb(73, 204, 249)",faded:"rgba(73, 204, 249, 0.1)"},this.moveColors={main:"rgb(187, 107, 217)",faded:"rgba(187, 107, 217, 0.1)"},this.otherColors={main:"rgb(123, 104, 238)",faded:"rgba(123, 104, 238, 0.1)"},this.icon={type:"url",resource:"./assets/images/brand/clickup-symbol_color.svg"}}removeActionVariableFromProperty(e,t,i){return t&&"datetime"===t.format?i.filter(e=>e&&e.info&&e.info.meta&&e.info.meta.custom_field):i}getCatalogItemOverrides(e){return[{resource:"task",label:"Move",icon:{resource:"automation-category-move",type:"icon"},colors:this.moveColors,triggers:e.triggers.filter(e=>{const t=["subcategory_id"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),actions:e.actions.filter(e=>{const t=["subcategory"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal},{resource:"task",internal:e.internal,label:"Statuses",icon:{resource:"automation-category-statuses",type:"icon"},colors:this.statusesColors,triggers:e.triggers.filter(e=>{const t=["status"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),actions:e.actions.filter(e=>{const t=["status"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)})},{resource:"task",label:"Creation",icon:{resource:"automation-category-creation",type:"icon"},colors:this.creationColors,triggers:e.triggers.filter(e=>{const t=["task_created"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),actions:e.actions.filter(e=>{const t=["create_task"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal},{resource:"task",label:"Dates",icon:{resource:"automation-category-dates",type:"icon"},colors:this.datesColors,actions:[],triggers:e.triggers.filter(e=>{const t=["on_due_date"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal},{resource:"task",label:"Assignees",icon:{resource:"automation-category-assignees",type:"icon"},colors:this.assigneesColors,triggers:e.triggers.filter(e=>{const t=["assignee","assignee_removed"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),actions:e.actions.filter(e=>{const t=["assignee"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal},{resource:"task",label:"Priorities",icon:{resource:"automation-category-priorities",type:"icon"},colors:this.prioritiesColors,triggers:e.triggers.filter(e=>{const t=["priority"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),actions:e.actions.filter(e=>{const t=["priority"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal},{resource:"task",label:"Other",icon:{resource:"cu2-logo-icon-outline",type:"icon"},colors:this.otherColors,strokeIcon:!0,triggers:e.triggers.filter(e=>{const t=["checklists_resolved","subtasks_resolved"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),actions:e.actions.filter(e=>{const t=["change_followers","apply_template","archive"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal},{resource:"task",label:"Tags",icon:{resource:"automation-category-tags",type:"icon"},colors:this.tagsColors,triggers:[],actions:e.actions.filter(e=>{const t=["change_tags"];return Array.isArray(e.key)?e.key.some(e=>t.includes(e)):t.includes(e.key)}),internal:e.internal}]}triggerConditions(e,t,i,a,c){const n={before:{custom_field:{component:l.h,componentOptions:{customFieldKey:i,placeholder:"any"}},status:{component:_i},priority:{component:ki}},after:{custom_field:{component:l.h,componentOptions:{customFieldKey:i,placeholder:"any"}},status:{component:_i},priority:{component:ki},assignee:{component:l.m,label:"Assignee",hideLabel:!0},time_estimate:{label:"User",component:l.m,automationTriggerValueKey:"user"}}};if(i&&"before"===t&&a&&c&&"custom_field"===e){const e=this.getAutomationCustomFields(a,c),t=i.startsWith("cf_")?i.substring(3):i,n=e.find(e=>e.id===t);if(n&&n.type===Di.a.Checkbox)return null}const o=n[t][e];return o?{component:o.component,componentOptions:o.componentOptions,automationTriggerValueKey:o.automationTriggerValueKey,label:o.label,hideLabel:o.hideLabel}:null}getConditionComponentOverride(e,t,i){if("status"===e)return{type:"status",resource:"task",schema:t,component:_i};if("follower"===e)return{type:"follower",resource:"task",schema:t,component:Pi};if("priority"===e)return{type:"priority",resource:"task",schema:t,component:i?ki:Xi,selfConditionOp:!0};const a=e.startsWith("cf_")?"custom_field":e;return{custom_field:{type:"custom_field",resource:"task",schema:{type:"object",properties:{field_id:{type:"string"},value:{type:"string"}},required:["field_id","value"]},component:l.i,selfEmit:!0,selfConditionOp:!0}}[a]}getActionsComponentOverride(e){const t=sc.find(t=>t.key===e.key);return"assignee"===e.key?Object.assign(Object.assign({},t.component),{schema:e.schema}):t?t.component:void 0}getActionsInputComponentOverride(e,t){if(e.key.startsWith("cf_"))return sc.find(e=>"custom_field"===e.key).component;const i=e.schema&&e.schema.title&&e.schema.title||e.key,a=(oc[t]||{})[e.key];if(a&&a.component)return Object.assign(Object.assign({},a),{title:i});{const t=nc[e.key];return a&&t?Object.assign(Object.assign(Object.assign({},t),a),{title:i}):t?Object.assign(Object.assign({},t),{title:i}):void 0}}triggerSpecialConditions(e){return{custom_field:Ci}[e]}getAdditionalVariable(e,t,i){return(this.getAutomationCustomFields(t,i)||[]).filter(e=>![Di.a.ListRelationship,Di.a.Tasks].includes(e.type)).map(e=>({label:e.name,field_id:e.id,info:{type:e.type,meta:{custom_field:!0}}}))}remapResource(e){return Object.assign(Object.assign({},e),{conditions:e.conditions.map(e=>"custom_field"===e.key?Object.assign(Object.assign({},e),{operators:["eq","not","is set","is not set"]}):e),actions:e.actions.map(e=>{if(["create_task","create_subtask"].includes(Array.isArray(e.key)?e.key[0]:e.key)){const t=Object.assign({},e.schema.properties);return t.action&&delete t.action,Object.assign(Object.assign({},e),{schema:Object.assign(Object.assign({},e.schema),{properties:Object.assign(Object.assign({},t),{custom_field:{type:"array",title:"custom_field",items:{type:"custom",title:"Custom Field"}},action:e.schema.properties.action})})})}return e})})}getMessageHelper(){return Si}isKeyDisabled(e,t,i){if("custom_field"===e){let e=!1;return this.store.select(Object(Ii.d)(i,t)).pipe(Object(p.a)(1)).subscribe(t=>e=!(!t||!t.length)),!e}return!1}addKeyTooltip(e,t){if("custom_field"===e&&t)return"There are no custom fields available"}getClickupId(e){return{priority:"priorities",time_spent:"time_tracking",cf_:"custom_fields",change_tags:"tags",time_estimate:"time_estimates"}[e.startsWith("cf_")?"cf_":e]}getAutomationCustomFields(e,t){let i;return Object(li.a)(this.store.select(Object(Ii.d)(t,e)).pipe(Object(h.a)(e=>!!e)),Object(st.a)(1200).pipe(Object(ri.a)([]))).pipe(Object(p.a)(1)).subscribe(e=>{i=e}),i}}return e.\u0275fac=function(t){return new(t||e)(s.nc(mi.Store))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})();var lc=i("VBI8"),uc=i("0r45"),dc=i("0e3U"),mc=i("+iQC"),hc=i("GtmI"),pc=i("aVmG"),bc=i("vi4T"),gc=i("KyjD"),fc=i("8873"),_c=i("a5Nn"),vc=i("dzSB"),yc=i("m5eJ"),kc=i("X8So"),Ic=i("oqaq");let wc=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[c.c,mi.StoreModule,lc.a,Kt.a,dc.a,uc.a,Ht.a,mc.a,l.t,hc.a,pc.a,ei.a,bc.a,gc.a,fc.a,_c.a,vc.a,yc.a,kc.a,U.a,l.c,l.j,Ic.a,Qt.a,Wt.a,Yt.a]]}),e})();i("GSMa");let Tc=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[c.c,U.a.forFeature([rc]),wc]]}),e})();var xc=i("Zss7"),Cc=i.n(xc);let Oc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-integration-automation-bugsnag-helper"]],inputs:{automation:"automation",action:"action"},decls:6,vars:0,consts:function(){let e,t;return e=$localize`:@@cu-integration-automation-bugsnag-helper__banner-desc␟2fbf0778b99c660346101aedf1f71bb37b0d1c5d␟3226662013256025263: This automation will only run for tasks linked to Bugsnag errors. To link tasks create a Bugsnag automation to "Create task" in ClickUp. `,t=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,[[1,"cu-edit-automation__banner"],[1,"cu-edit-automation__banner-desc"],e,["href","https://docs.clickup.com/en/articles/4188422-bugsnag-automations","target","_blank",1,"cu-edit-automation__banner-link"],t]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.ac(2),s.gc(3,2),s.Zb(),s.cc(4,"a",3),s.gc(5,4),s.bc(),s.bc(),s.bc())},encapsulation:2,changeDetection:0}),e})(),Sc=(()=>{class e{constructor(){this.key="bugsnag",this.colors={main:"#000d47",faded:Cc()("000d47").toRgbString().replace(")",", 0.1)")},this.icon={type:"icon",resource:"bugsnag"}}getMessageHelper(){return Oc}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Dc=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[c.c,U.a.forFeature([Sc])]]}),e})();function Ac(e,t){1&e&&(s.mc(0,3,2),s.Yb(1),s.jc())}function jc(e,t){1&e&&(s.mc(0,3,3),s.Yb(1),s.jc())}function Nc(e,t){1&e&&(s.mc(0,3,4),s.Yb(1),s.jc())}function Ec(e,t){if(1&e&&(s.mc(0,3,1),s.ac(1),s.bd(2,Ac,2,0,"ng-container",8),s.bd(3,jc,2,0,"ng-container",8),s.bd(4,Nc,2,0,"ng-container",8),s.Zb(),s.jc()),2&e){const e=s.uc(2);s.Ib(2),s.Dc("ngIf","branch_created"===e.automation.trigger.schema.key||"branch_merged"===e.automation.trigger.schema.key||"branch_linked"===e.automation.trigger.schema.key),s.Ib(1),s.Dc("ngIf","pr_created"===e.automation.trigger.schema.key||"pr_merged"===e.automation.trigger.schema.key||"pr_linked"===e.automation.trigger.schema.key||"pr_change_requested"===e.automation.trigger.schema.key||"ci_status_change"===e.automation.trigger.schema.key),s.Ib(1),s.Dc("ngIf","commit_merged"===e.automation.trigger.schema.key||"on_commit"===e.automation.trigger.schema.key||"commit_linked"===e.automation.trigger.schema.key)}}function $c(e,t){1&e&&s.gc(0,3,5)}function Pc(e,t){if(1&e&&(s.cc(0,"div",1),s.cc(1,"div",2),s.ac(2),s.mc(3,3),s.bd(4,Ec,5,3,"ng-container",4),s.bd(5,$c,1,0,"ng-template",null,5,s.cd),s.jc(),s.Zb(),s.cc(7,"a",6),s.gc(8,7),s.bc(),s.bc(),s.bc()),2&e){const e=s.Rc(6),t=s.uc();s.Ib(4),s.Dc("ngIf","github"===t.automation.resource.key)("ngIfElse",e)}}let Lc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-integration-automation-github-helper"]],inputs:{automation:"automation",action:"action"},decls:1,vars:1,consts:function(){let e,t;return e=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,t=$localize`:@@cu-integration-automation-github-helper__banner-desc␟64d092d61060c3f9006a48b220022dfdb10b03d9␟551635515684917102: This action will only occur if the ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER_3:${"\ufffd*2:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER: branch ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*3:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_1: pull request ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*4:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_NG_CONTAINER_2: commit ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*5:5\ufffd"}:START_TAG_NG_TEMPLATE: branch ${"\ufffd/*5:5\ufffd"}:CLOSE_TAG_NG_TEMPLATE: is linked to a ClickUp Task. `,t=s.lc(t),[["class","cu-edit-automation__banner",4,"ngIf"],[1,"cu-edit-automation__banner"],[1,"cu-edit-automation__banner-desc"],t,[4,"ngIf","ngIfElse"],["automationResourceKeyIsNotGithub",""],["href","https://docs.clickup.com/en/articles/4188427-github-automations","target","_blank",1,"cu-edit-automation__banner-link"],e,[4,"ngIf"]]},template:function(e,t){1&e&&s.bd(0,Pc,9,2,"div",0),2&e&&s.Dc("ngIf","create_task"!==t.action.action.key)},directives:[c.q],encapsulation:2,changeDetection:0}),e})(),Uc=(()=>{class e{constructor(){this.key="github",this.colors={main:"#171516",faded:Cc()("171516").toRgbString().replace(")",", 0.1)")},this.icon={type:"icon",resource:"github"}}getMessageHelper(){return Lc}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),zc=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[c.c,U.a.forFeature([Uc])]]}),e})();const Mc={icon:"github",resource:{displayName:"GitHub",id:"github"},url:"http://github.com/"};let Rc=(()=>{class e{constructor(){this.key="slack",this.colors={main:"#4A154B",faded:Cc()("4A154B").toRgbString().replace(")",", 0.1)")}}getActionsInputComponentOverride(e,t){if("add_reminder"===t&&"time"===e.key&&"string"===e.schema.type)return{resource:"task",type:"time",component:l.k,componentOptions:{useVariables:!1},icon:"activity-assignee",title:e.schema&&e.schema.title&&e.schema.title||e.key}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Gc=(()=>{class e{constructor(){this.key="twilio",this.colors={main:"#F22F46",faded:Cc()("F22F46").toRgbString().replace(")",", 0.1)")},this.icon={type:"icon",resource:"twilio"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Fc=(()=>{class e{constructor(){this.key="calendly",this.colors={main:"#00A2FF",faded:Cc()("00A2FF").toRgbString().replace(")",", 0.1)")}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Vc=(()=>{class e{constructor(){this.key="sheets",this.colors={main:"#1e8e3e",faded:Cc()("1e8e3e").toRgbString().replace(")",", 0.1)")}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),qc=(()=>{class e{constructor(){this.key="typeform",this.colors={main:"#262627",faded:Cc()("262627").toRgbString().replace(")",", 0.1)")},this.icon={type:"icon",resource:"typeform-symbol"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Xc=(()=>{class e{constructor(e,t){this.router=e,this.store=t,this.type="clickapp",this.team$=this.store.select(di.getTeam)}addAnotherText(){return $localize`:@@cu-auth-clickapp__strategy_change-clickapp-settings:Change ClickApp Settings`}addAnotherAction(){this.team$.pipe(Object(p.a)(1)).subscribe(e=>this.router.navigate(["/",e?e.id:"","settings","team",e?e.id:"","clickapps"]))}}return e.\u0275fac=function(t){return new(t||e)(s.nc(It.h),s.nc(mi.Store))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Bc=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[{provide:oi.a,useClass:Xc,multi:!0}],imports:[[c.c,It.l,oi.d]]}),e})();var Kc=i("R4vD"),Wc=i("2p4s"),Hc=i("tk/3"),Zc=i("irDL");let Qc=(()=>{class e{constructor(e,t){this.httpClient=e,this.errorHandler=t,this.apiUrl=Wc.a.apiUrl}saveAuth(e,t,i){return this.httpClient.post(this.buildBaseUrl(e,t),i).pipe(this.errorHandler.http())}buildBaseUrl(e,t){return`${this.apiUrl}/team/${e}/autoAuth/${t}`}}return e.\u0275fac=function(t){return new(t||e)(s.nc(Hc.b),s.nc(Zc.a))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})();function Jc(e,t){if(1&e&&(s.mc(0,1,1),s.Xb(1,"span"),s.jc()),2&e){const e=s.uc();s.Ib(1),s.kc(e.resource),s.hc(0)}}const Yc=function(e,t){return{"background-color":e,"border-color":t}};let en=(()=>{class e{constructor(){this.permission=new s.o,this.permissionInput=null}get authSectionClass(){return"cu-auth-permission cu-auth-permission_"+this.authType}complete(){this.permissionInput&&this.permission.emit(this.permissionInput)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-auth-permission"]],hostVars:1,hostBindings:function(e,t){2&e&&s.Jb("class",t.authSectionClass)},inputs:{resource:"resource",authType:"authType",colorOverride:"colorOverride"},outputs:{permission:"permission"},decls:20,vars:15,consts:function(){let e,t,i,a,c,n;return e=$localize`:@@cu-auth-permission__subtitle␟c3fd0ca6f7b57d1cb7e097ef35d5a1cd10e1cebc␟6775384047095614841: Who can create automations from this account?
`,t=$localize`:@@common_only-me␟f014ff6d5c8c4955fb6bf111ad56a7cc9065dba2␟4645609569705949286:Only me`,i=$localize`:@@cu-auth-permission__radio-every-member␟0dbdb10950399aef107e209b5abcedb14a598608␟796582459087443348: Every member `,a=$localize`:@@common_admins-only␟21d77fc6cb1a44e2b4acb54b63d60709b704c701␟2232051860222032871:Admins only`,c=$localize`:button text@@common_done--button-text␟3541d85fc029a6d927d83732fa43cdaeabadb3d7␟443287798171930389: Done
`,n=$localize`:@@common_resource-account␟870e79b634735e4e784cb9fb3d8c8af1cb71391f␟2822888904276615612: Add a ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN:${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_SPAN:Account
`,[[1,"cu-auth-permission__title"],n,[4,"ngIf"],[1,"cu-auth-permission__subtitle"],e,[1,"cu-auth-permission__radios"],[1,"cu-radio"],["type","radio","name","auth-permission",1,"cu-radio__input",3,"value","ngModel","ngModelChange"],[1,"cu-radio__label"],t,i,a,[3,"disabled","ngStyle","click"],c]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.mc(1,1),s.bd(2,Jc,2,1,"span",2),s.jc(),s.bc(),s.cc(3,"div",3),s.gc(4,4),s.bc(),s.cc(5,"div",5),s.cc(6,"label",6),s.cc(7,"input",7),s.qc("ngModelChange",function(e){return t.permissionInput=e}),s.bc(),s.cc(8,"div",8),s.gc(9,9),s.bc(),s.bc(),s.cc(10,"label",6),s.cc(11,"input",7),s.qc("ngModelChange",function(e){return t.permissionInput=e}),s.bc(),s.cc(12,"div",8),s.gc(13,10),s.bc(),s.bc(),s.cc(14,"label",6),s.cc(15,"input",7),s.qc("ngModelChange",function(e){return t.permissionInput=e}),s.bc(),s.cc(16,"div",8),s.gc(17,11),s.bc(),s.bc(),s.bc(),s.cc(18,"button",12),s.qc("click",function(){return t.complete()}),s.gc(19,13),s.bc()),2&e&&(s.Ib(2),s.Dc("ngIf",t.resource),s.Ib(5),s.Dc("value",1)("ngModel",t.permissionInput),s.Ib(4),s.Dc("value",3)("ngModel",t.permissionInput),s.Ib(4),s.Dc("value",2)("ngModel",t.permissionInput),s.Ib(3),s.Mb("cu-btn cu-btn_sm cu-btn_font-size-14 cu-auth-permission__btn cu-auth-permission__btn_",t.authType,""),s.Dc("disabled",!t.permissionInput)("ngStyle",s.Ic(12,Yc,t.colorOverride||"inherit",t.colorOverride||"inherit")))},directives:[c.q,ni.w,ni.c,ni.p,ni.s,c.t],styles:[".cu-auth-permission{display:flex;align-items:center;flex-direction:column}.cu-auth-permission__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 20px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:30px;color:#fff;text-align:center}.cu-auth-permission_tray .cu-auth-permission__title{color:#0d122b}.cu-auth-permission__title span{text-transform:capitalize;color:#fff}.cu-auth-permission_tray .cu-auth-permission__title span{color:#0d122b}.cu-auth-permission__subtitle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:30px;color:#fff}.cu-auth-permission_tray .cu-auth-permission__subtitle{color:#0d122b}.cu-auth-permission__btn{width:300px}.cu-auth-permission__btn_github{background:#28a745;border-color:#28a745}.cu-auth-permission__btn_github:hover{background:#39a04e;border-color:#39a04e}.cu-auth-permission__btn_bugsnag{background:#464fdc;border-color:#464fdc}.cu-auth-permission__btn_bugsnag:hover{background:#3b42b3;border-color:#3b42b3}.cu-auth-permission__btn_tray{background:#f22f46;border-color:#f22f46}.cu-auth-permission__btn_tray:hover{background:#ec0f29;border-color:#ec0f29}.cu-auth-permission__radios{width:300px;margin-bottom:35px}.cu-auth-permission .cu-radio{margin-bottom:15px}.cu-auth-permission .cu-radio__label{color:#fff}.cu-auth-permission_tray .cu-radio__label{color:#0d122b}"],encapsulation:2,changeDetection:0}),e})();function tn(e,t){if(1&e&&(s.mc(0,4,1),s.Xb(1,"span"),s.jc()),2&e){const e=s.uc(2);s.Ib(1),s.kc(e.resource),s.hc(0)}}function an(e,t){if(1&e&&s.Xb(0,"div",17),2&e){const e=s.uc().$implicit;s.Dc("cuTooltip",e.description)}}function cn(e,t){if(1&e&&(s.ac(0),s.cc(1,"div",6),s.dd(2),s.bd(3,an,1,1,"div",15),s.bc(),s.cc(4,"div",9),s.Xb(5,"input",16),s.bc(),s.Zb()),2&e){const e=t.$implicit,i=s.uc(2);s.Ib(2),s.fd(" ",e.label," "),s.Ib(1),s.Dc("ngIf",e.description),s.Ib(2),s.Dc("formControlName",e.key)("readonly",!!i.authResource.authentication[e.key]||!1)}}function nn(e,t){if(1&e&&(s.cc(0,"div",18),s.ac(1),s.gc(2,19),s.Zb(),s.cc(3,"a",20),s.gc(4,21),s.bc(),s.bc()),2&e){const e=s.uc(2);s.Ib(3),s.Mb("cu-auth-token__resource-link cu-auth-token__resource-link_",e.resource,"")}}function on(e,t){if(1&e){const e=s.dc();s.cc(0,"form",2),s.qc("ngSubmit",function(){return s.Uc(e),s.uc().submit()}),s.cc(1,"div",3),s.mc(2,4),s.bd(3,tn,2,1,"span",5),s.jc(),s.bc(),s.cc(4,"div",6),s.ac(5),s.gc(6,7),s.Zb(),s.Xb(7,"div",8),s.bc(),s.cc(8,"div",9),s.Xb(9,"input",10),s.bc(),s.bd(10,cn,6,4,"ng-container",11),s.cc(11,"button",12),s.qc("ngSubmit",function(){return s.Uc(e),s.uc().submit()}),s.gc(12,13),s.bc(),s.bd(13,nn,5,3,"div",14),s.bc()}if(2&e){const e=s.uc();s.Dc("formGroup",e.authToken),s.Ib(3),s.Dc("ngIf",e.resource),s.Ib(7),s.Dc("ngForOf",e.formDetails)("ngForTrackBy",e.trackBy),s.Ib(1),s.Mb("cu-btn cu-btn_sm cu-btn_font-size-14 cu-auth-token__btn cu-auth-token__btn_",e.resource,""),s.ad("background",e.colorOverride||"inherit"),s.Dc("disabled",e.authToken.invalid),s.Ib(2),s.Dc("ngIf","bugsnag"===e.resource)}}function sn(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-auth-permission",22),s.qc("permission",function(t){return s.Uc(e),s.uc().setPermission(t)}),s.bc()}if(2&e){const e=s.uc();s.Dc("resource",e.resource)("colorOverride",e.colorOverride)}}let rn=(()=>{class e{constructor(e,t){this.authTokenService=e,this.changeDetectorRef=t,this.isValid=new s.o,this.authentication=new s.o,this.step=1,this.authToken=new ni.j({name:new ni.g("",[ni.A.required])}),this.formDetails=[],this.trackBy=(e,t)=>t.key}ngOnChanges(e){var t,i,a,c,n;e.authResource&&((null===(i=null===(t=this.authResource)||void 0===t?void 0:t.authentication)||void 0===i?void 0:i.schema)&&Object.keys((null===(c=null===(a=this.authResource)||void 0===a?void 0:a.authentication)||void 0===c?void 0:c.schema).properties).forEach(e=>{var t,i;const a=(null===(i=null===(t=this.authResource)||void 0===t?void 0:t.authentication)||void 0===i?void 0:i.schema).properties[e];this.authToken.addControl(e,new ni.g(a[e]||"",[ni.A.required])),this.formDetails.push({key:e,label:a.title||Object(Kc.e)(e),type:"text"})}),(null===(n=this.authResource)||void 0===n?void 0:n.authentication)&&Object.keys(this.authResource.authentication).filter(e=>!["instruction_link","redirect_url","type","schema"].includes(e)).forEach(e=>{this.authToken.addControl(e,new ni.g(this.authResource.authentication[e]||"",[ni.A.required])),this.formDetails.push({key:e,label:Object(Kc.e)(e),type:"text"})}))}setPermission(e){this.auth.visibility=parseInt(e,void 0),this.saveAuth()}submit(){if(this.isValid.emit(!1),this.authToken.valid){const e=Object.assign({},this.authToken.value);delete e.name,delete e.webhook_url,this.auth={name:this.authToken.get("name").value,data:e,visibility:1},this.step=2}}saveAuth(){this.authTokenService.saveAuth(this.teamId,this.resource,this.auth).subscribe(e=>{this.isValid.emit(!0),this.authentication.emit(e),this.changeDetectorRef.markForCheck()},e=>{this.step=1,this.changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(Qc),s.Wb(s.h))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-auth-token"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Ob("cu-auth-token",!0)},inputs:{authResource:"authResource",resource:"resource",colorOverride:"colorOverride",teamId:"teamId"},outputs:{isValid:"isValid",authentication:"authentication"},features:[s.Gb],decls:2,vars:2,consts:function(){let e,t,i,a,c,n,o;return e=$localize`:@@auth_account-name␟6991b61a3ac5ddf57e7c8a337686162bc754d502␟8295307499209125996:Account Name`,t=$localize`:@@auth_account-name-tooltip␟840bb530b80b724632d41bf748b201f095515883␟403416102518853947:Create a name for this account`,i=$localize`:@@auth_account-name-placeholder␟f093c5ebd7128abf66613125d40aa540283a80dd␟451581825956490517:Example: Nick’s Account`,a=$localize`:@@auth_connect-account␟8279e293f9992284de700028ce73ec5609385953␟2202579009246792899: Connect account `,c=$localize`:@@common_resource-account␟da05cb3c1e10a27d3684d11803cd56db982dec7b␟7130138291914382160: Add a ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN:${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_TAG_SPAN:Account `,n=$localize`:@@cu-auth-token__new-to-bugsnag␟d65c71482f519a9fce771471ef0d9813fb468140␟2932026031707664531: New to Bugsnag? `,o=$localize`:@@common_create-an-account␟dca3d56633ff5468473edfabc493205268e0f990␟7641882763605439290:Create an account.`,[["class","cu-auth-token__form",3,"formGroup","ngSubmit",4,"ngIf"],["authType","token",3,"resource","colorOverride","permission",4,"ngIf"],[1,"cu-auth-token__form",3,"formGroup","ngSubmit"],[1,"cu-auth-token__title"],c,[4,"ngIf"],[1,"cu-auth-token__label"],e,["icon","question","cuTooltip",t,"tooltipLifeTime","15000",1,"cu-auth-token__label-question"],[1,"cu-auth-token__input-container"],["type","text","formControlName","name","placeholder",i,1,"cu-auth-token__input"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"disabled","ngSubmit"],a,["class","cu-auth-token__resource",4,"ngIf"],["class","cu-auth-token__label-question","icon","question","tooltipLifeTime","15000",3,"cuTooltip",4,"ngIf"],["type","text",1,"cu-auth-token__input",3,"formControlName","readonly"],["icon","question","tooltipLifeTime","15000",1,"cu-auth-token__label-question",3,"cuTooltip"],[1,"cu-auth-token__resource"],n,["href","http://bugsnag.com/","target","_blank"],o,["authType","token",3,"resource","colorOverride","permission"]]},template:function(e,t){1&e&&(s.bd(0,on,14,11,"form",0),s.bd(1,sn,1,2,"cu-auth-permission",1)),2&e&&(s.Dc("ngIf",1===t.step),s.Ib(1),s.Dc("ngIf",2===t.step))},directives:[c.q,ni.C,ni.q,ni.k,u.a,lt.a,ni.c,ni.p,ni.i,c.p,en],styles:['.cu-auth-token{display:flex;flex-direction:column;align-items:center}.cu-auth-token__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 20px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:30px;color:#fff;text-align:center}.cu-auth-token__title span{text-transform:capitalize;color:#fff}.cu-auth-token__form{display:flex;flex-direction:column}.cu-auth-token__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:5px;color:#fff}.cu-auth-token__label-question{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;cursor:pointer;display:inline-block;fill:hsla(0,0%,100%,.5);margin:-1px 0 -2px 2px}.cu-auth-token__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:15px;line-height:1;flex-grow:1;height:40px;padding:0 10px;color:#fff;background:transparent;border:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-auth-token__input{font-family:var(--global-font-support)}}.cu-auth-token__input:focus{box-shadow:none}.cu-auth-token__input:-ms-input-placeholder{opacity:.5}.cu-auth-token__input::placeholder{opacity:.5}.cu-auth-token__input-container{display:flex;width:300px;height:40px;border-radius:4px;overflow:hidden;margin-bottom:25px;background:hsla(0,0%,100%,.1)}.cu-auth-token__input-copy{display:flex;align-items:center;justify-content:center;width:30px;height:100%;flex-shrink:0;cursor:pointer;background:hsla(0,0%,100%,.1)}.cu-auth-token__input-copy:hover{background:hsla(0,0%,100%,.2)}.cu-auth-token__input-copy-icon{width:16px;height:16px;fill:#d5d6d7}.cu-auth-token__input-copy-icon_copied,.dark-theme .cu-auth-token__input-copy-icon_copied{fill:#67cb48}.cu-auth-token__btn{width:300px}.cu-auth-token__btn_bugsnag{background:#464fdc;border-color:#464fdc}.cu-auth-token__btn_bugsnag:hover{background:#3b42b3;border-color:#3b42b3}.cu-auth-token__resource{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;margin-top:25px;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff}.cu-auth-token__resource-link{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-auth-token__resource-link{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-auth-token__resource-link_bugsnag{color:#0366d6;border-bottom-color:#0366d6}.cu-auth-token__resource-link:hover{border-bottom:1px solid}'],encapsulation:2,data:{animation:[Ai.f]},changeDetection:0}),e})(),ln=(()=>{class e{constructor(){this.type="token",this.statCom=rn}get startComponent(){return this.statCom}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})();var un=i("wRSl"),dn=i("Dvla");let mn=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[Qc,{provide:oi.a,useClass:ln,multi:!0}],imports:[[c.c,ni.x,oi.d,Wt.a,Yt.a,un.a,dn.b]]}),e})();var hn=i("bwNi");const pn=new s.s("clickup/integration/auth: AuthenticationFLow - OAuth");let bn=(()=>{class e{constructor(e,t){this.httpClient=e,this.errorHandler=t,this.apiUrl=Wc.a.apiUrl}saveAuth(e,t,i){return this.httpClient.post(this.buildBaseUrl(e,t),i).pipe(this.errorHandler.http())}buildBaseUrl(e,t){return`${this.apiUrl}/team/${e}/autoAuth/${t}`}}return e.\u0275fac=function(t){return new(t||e)(s.nc(Hc.b),s.nc(Zc.a))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})();function gn(e,t){1&e&&s.Xb(0,"cu-loader")}function fn(e,t){if(1&e){const e=s.dc();s.cc(0,"button",10),s.qc("click",function(){return s.Uc(e),s.uc(2).connect()}),s.gc(1,11),s.bc()}if(2&e){const e=s.uc(2);s.Dc("disabled",!e.accountName)}}function _n(e,t){if(1&e&&(s.cc(0,"div",12),s.ac(1),s.mc(2,13),s.Xb(3,"span"),s.jc(),s.Zb(),s.cc(4,"a",14),s.gc(5,15),s.bc(),s.bc()),2&e){const e=s.uc(2);s.Ib(3),s.kc((null==e.oauthConfig||null==e.oauthConfig.resource?null:e.oauthConfig.resource.displayName)||e.resource),s.hc(2),s.Ib(1),s.Dc("href",e.oauthConfig.url,s.Xc)}}function vn(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"div",2),s.gc(2,3),s.bc(),s.bd(3,gn,1,0,"cu-loader",0),s.vc(4,"async"),s.cc(5,"div",4),s.ac(6),s.gc(7,5),s.Zb(),s.Xb(8,"div",6),s.bc(),s.cc(9,"input",7),s.qc("ngModelChange",function(t){return s.Uc(e),s.uc().accountName=t}),s.bc(),s.bd(10,fn,2,1,"button",8),s.vc(11,"async"),s.bd(12,_n,6,2,"div",9),s.Zb()}if(2&e){const e=s.uc();s.Ib(2),s.kc((null==e.oauthConfig||null==e.oauthConfig.resource?null:e.oauthConfig.resource.displayName)||e.resource),s.hc(2),s.Ib(1),s.Dc("ngIf",s.wc(4,5,e.loading$)),s.Ib(6),s.Dc("ngModel",e.accountName),s.Ib(1),s.Dc("ngIf",!s.wc(11,7,e.loading$)),s.Ib(2),s.Dc("ngIf",null==e.oauthConfig?null:e.oauthConfig.url)}}function yn(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-auth-permission",16),s.qc("permission",function(t){return s.Uc(e),s.uc().setPermission(t)}),s.bc()}if(2&e){const e=s.uc();s.Dc("resource",e.resource)("colorOverride",e.colorOverride)}}let kn=(()=>{class e{constructor(e,t,i){this.authTokenService=e,this.changeDetectorRef=t,this.integrationConfigs=i,this.isValid=new s.o,this.authentication=new s.o,this.loading$=new N.a,this.step=1}ngOnInit(){this.oauthConfig=this.integrationConfigs.find(e=>e.resource.id===this.resource)}setPermission(e){this.auth.visibility=parseInt(e,void 0),this.saveAuth()}connect(){var e,t,i,a;return t=this,void 0,a=function*(){if(this.accountName){this.isValid.emit(!1),this.loading$.next(!0);const i=new hn(null===(e=this.authResource.authentication)||void 0===e?void 0:e.redirect_url,{width:500,height:560,originRegexp:new RegExp("^dont-match-me$")});try{const{token:e}=yield i.open();this.auth={name:this.accountName,visibility:1,auth:e},this.step=2}catch(t){this.loading$.next(!1)}finally{this.changeDetectorRef.markForCheck()}}},new((i=void 0)||(i=Promise))(function(e,c){function n(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a.throw(e))}catch(t){c(t)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof i?a:new i(function(e){e(a)})).then(n,o)}s((a=a.apply(t,[])).next())})}saveAuth(){this.authTokenService.saveAuth(this.teamId,this.resource,this.auth).subscribe(e=>{this.isValid.emit(!0),this.authentication.emit(this.auth),this.changeDetectorRef.markForCheck()},e=>{this.step=1,this.changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(bn),s.Wb(s.h),s.Wb(pn))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-auth-oauth"]],hostAttrs:[1,"cu-auth-oauth"],inputs:{authResource:"authResource",resource:"resource",teamId:"teamId",colorOverride:"colorOverride"},outputs:{isValid:"isValid",authentication:"authentication"},decls:2,vars:2,consts:function(){let e,t,i,a,c,n,o;return e=$localize`:@@cu-auth-oauth__title_connect-account␟600c3b8ca7a05e7a0bdfa8077ef02fe1f1ad19ab␟4385226360778389107: Connect your ${"\ufffd0\ufffd"}:INTERPOLATION: account `,t=$localize`:@@auth_account-name␟6991b61a3ac5ddf57e7c8a337686162bc754d502␟8295307499209125996:Account Name`,i=$localize`:@@auth_account-name-tooltip␟840bb530b80b724632d41bf748b201f095515883␟403416102518853947:Create a name for this account`,a=$localize`:@@auth_account-name-placeholder␟f093c5ebd7128abf66613125d40aa540283a80dd␟451581825956490517:Example: Nick’s Account`,c=$localize`:@@auth_connect-account␟43528c41e13ba90946a788693b9f5f826c031590␟4567673451495743642: Connect Account `,n=$localize`:@@cu-auth-oauth__new-to-service␟ad0cf307ab5cfeb83012bef6486785b0ac465fa4␟2911319991871722764: New to ${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:? `,o=$localize`:@@common_create-an-account␟dca3d56633ff5468473edfabc493205268e0f990␟7641882763605439290:Create an account.`,[[4,"ngIf"],["authType","oauth",3,"resource","colorOverride","permission",4,"ngIf"],[1,"cu-auth-oauth__title"],e,[1,"cu-auth-oauth__label"],t,["icon","question","cuTooltip",i,"tooltipLifeTime","15000",1,"cu-auth-oauth__label-question"],["type","text","name","accountName","placeholder",a,1,"cu-auth-oauth__input",3,"ngModel","ngModelChange"],["class","cu-btn cu-btn_sm cu-btn_font-size-14 cu-auth-oauth__btn",3,"disabled","click",4,"ngIf"],["class","cu-auth-oauth__create-account",4,"ngIf"],[1,"cu-btn","cu-btn_sm","cu-btn_font-size-14","cu-auth-oauth__btn",3,"disabled","click"],c,[1,"cu-auth-oauth__create-account"],n,["target","_blank",1,"cu-auth-oauth__create-account-link",3,"href"],o,["authType","oauth",3,"resource","colorOverride","permission"]]},template:function(e,t){1&e&&(s.bd(0,vn,13,9,"ng-container",0),s.bd(1,yn,1,2,"cu-auth-permission",1)),2&e&&(s.Dc("ngIf",1===t.step),s.Ib(1),s.Dc("ngIf",2===t.step))},directives:[c.q,u.a,lt.a,ni.c,ni.p,ni.s,f.a,en],pipes:[c.b],styles:['.cu-auth-oauth{display:flex;flex-direction:column;align-items:center}.cu-auth-oauth__title{-webkit-font-smoothing:antialiased;font:400 20px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:30px}.cu-auth-oauth__label,.cu-auth-oauth__title{-moz-osx-font-smoothing:grayscale;color:#fff}.cu-auth-oauth__label{-webkit-font-smoothing:antialiased;width:300px;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:5px}.cu-auth-oauth__label-question{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;cursor:pointer;display:inline-block;fill:hsla(0,0%,100%,.5);margin:-1px 0 -2px 2px}.cu-auth-oauth__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:15px;line-height:1;width:300px;height:40px;padding:0 10px;border-radius:4px;margin-bottom:25px;color:#fff;background:hsla(0,0%,100%,.1);border:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-auth-oauth__input{font-family:var(--global-font-support)}}.cu-auth-oauth__input:focus{box-shadow:none}.cu-auth-oauth__input:-ms-input-placeholder{opacity:.5}.cu-auth-oauth__input::placeholder{opacity:.5}.cu-auth-oauth__btn{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;width:300px;background:#28a745;border-color:#28a745;margin-bottom:25px}.cu-auth-oauth__btn:hover{background:#39a04e;border-color:#39a04e}.cu-auth-oauth .cu-loader{height:40px}.cu-auth-oauth__create-account{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff;text-align:center}.cu-auth-oauth__create-account span{text-transform:capitalize;color:#fff}.cu-auth-oauth__create-account-link{font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#28a745;border-bottom:1px solid transparent}.cu-auth-oauth__create-account-link:hover{border-color:#28a745}'],encapsulation:2,changeDetection:0}),e})(),In=(()=>{class e{constructor(){this.type="oauth",this.statCom=kn}get startComponent(){return this.statCom}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),wn=(()=>{class e{static forRoot(t){return{ngModule:e,providers:t}}}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[bn,{provide:oi.a,useClass:In,multi:!0}],imports:[[c.c,ni.l,oi.d,Jt.LoaderModule,Wt.a,Yt.a]]}),e})();var Tn=i("FZDf"),xn=i("xDeF");let Cn=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[c.c,Wt.a]]}),e})(),On=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[c.c,Cn,ii.a,Wt.a]]}),e})(),Sn=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[c.c,On,Cn,Tn.a,xn.a,Wt.a,l.p]]}),e})();var Dn=i("WFPt"),An=i("wa4x"),jn=i("RwZa"),Nn=i("o0vL"),En=i("fFxs"),$n=i("WluX"),Pn=i("cC1p"),Ln=i("lPHu"),Un=i("RgJC"),zn=i("gSwD");const Mn=["emailBody"];function Rn(e,t){if(1&e&&s.Xb(0,"div",5),2&e){const e=s.uc(2);s.Ec("icon",null==e.automationAction.componentOptions?null:e.automationAction.componentOptions.icon)}}function Gn(e,t){if(1&e&&s.Xb(0,"div",6),2&e){const e=s.uc(2);s.Dc("cuTooltip",e.automationAction.description)}}function Fn(e,t){if(1&e&&(s.cc(0,"div"),s.bd(1,Rn,1,1,"div",3),s.dd(2),s.bd(3,Gn,1,1,"div",4),s.bc()),2&e){const e=s.uc();s.Mb("cu-edit-automation__container-body-actions-label cu-edit-automation__container-body-actions-label_",e.automationAction.title,""),s.Ib(1),s.Dc("ngIf",null==e.automationAction.componentOptions?null:e.automationAction.componentOptions.icon),s.Ib(1),s.gd(" ",e.automationAction.title,": ",e.automationAction.require&&!e.automationAction.readonly?"*":""," "),s.Ib(1),s.Dc("ngIf",e.automationAction.description)}}function Vn(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-comment-bar",7,8),s.qc("onEmailUserAction",function(t){return s.Uc(e),s.uc().onEmailUserAction(t)})("onCommentChange",function(){return s.Uc(e),s.uc().onCommentChange()})("selectedSignature",function(t){return s.Uc(e),s.uc().selectedSignature(t)}),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.vc(5,"async"),s.vc(6,"async"),s.vc(7,"async"),s.bc()}if(2&e){const e=s.uc();let t=null;s.Dc("content",e.content)("id","automation")("editorId","automation")("placeholder",e.options.placeholder||"")("saveDraft",!1)("allowAttachments",!1)("allowScreenRecording",!1)("projectMembers",s.wc(2,26,e.members$))("userGroups",s.wc(3,28,e.userGroups$))("showCommentButton",!1)("assignedComments",!1)("allowMentionSelf",!1)("taskUserGroups",e.taskUserGroups)("allowedCommandsInput",e.formatCommands)("allowEmailFeature",!0)("manageSignatures",!1)("canManageEmail",!0)("team",s.wc(4,30,e.team$))("user",s.wc(5,32,e.user$))("commentMode",e.commentMode)("forAutomation",!0)("variableMenuItemOnly",e.variableMenuItemOnly)("authedState",s.wc(6,34,e.authedState$))("signatures",null==(t=s.wc(7,36,e.authedState$))?null:t.emailSignatures)("initialSignature",e.initialSignature)("slashCommandSupport",!0)}}function qn(e,t){if(1&e&&(s.Xb(0,"span",9),s.vc(1,"deltaHtml"),s.vc(2,"async")),2&e){const e=s.uc();s.Dc("innerHtml",s.yc(1,1,e.value,null,s.wc(2,5,e.user$)),s.Vc)}}const Xn=Pn.Ib;let Bn=(()=>{class e{constructor(e,t,i,a,c){this.store=e,this.automationActionFacades=t,this.rxLocalEffects=i,this.ngZone=a,this.ngZoneScheduler=c,this.valueChange=new s.o,this.interpolatedInputChange=new s.o,this.mappedValueChange=new s.o,this.variables=[],this.user$=this.store.select(di.getUser),this.userGroups$=this.store.select(An.c),this.taskUserGroups=jn.c,this.commentMode=Nn.b.Email,this.authedState$=this.store.select(di.getAuthedState),this.team$=this.store.select(di.getTeam),this.variableMenuItemOnly=[],this.variableMenuItems=[],this.formatCommands=Xn,this.onCommentChange$=new N.a,this.signature$=new j.a(null),this.parent$=new j.a(null),this.members$=this.parent$.pipe(Object(h.a)(e=>!!e),Object(C.a)(e=>this.store.select(Object($n.a)(null==e?void 0:e.type,null==e?void 0:e.id)))),this.ngZone.runOutsideAngular(()=>{this.rxLocalEffects.register(this.onCommentChange$.pipe(Object(Pe.a)(300),this.ngZoneScheduler.observeOnNgZone()),()=>{var e;null===(e=this.emailBody)||void 0===e||e.submitComment()})})}ngOnInit(){var e;this.formatCommands=this.removeInvalidEmailItems(),this.action.interpolatedInput&&(null===(e=this.action.interpolatedInput.signature)||void 0===e?void 0:e.length)&&(this.initialSignature=this.action.interpolatedInput.signature[0]),this.store.dispatch(new ta.ad)}get content(){var e;if((null===(e=this.action)||void 0===e?void 0:e.interpolatedInput)&&this.action.interpolatedInput.comment_quill_edit)return this.action.interpolatedInput.comment_quill_edit}ngOnChanges(e){if(e.parentId||e.parentType){const e={type:this.parentType,id:this.parentId};this.parent$.next(e),this.automationActionFacades.loadAutomationUsersIfNeeded(e)}e.variables&&this.updateMenuItems()}ngAfterViewInit(){this.rxLocalEffects.register(Object(E.a)([this.emailBody.onBody,this.signature$]),([e,t])=>{if(null==e?void 0:e.html){const i=e.html.toString().split("[[automation]]").map(e=>{if(e.startsWith("{")){const t=JSON.parse(e);return t.value.customPayload.path?{path:t.value.customPayload.path}:{field_id:t.value.customPayload.field_id}}return{insert:e}}),a=[];e.delta.forEach((e,t)=>{var i,c,n,o,s,r;e.insert.automation_variable?(0===t?a.push({insert:'[{"insert":"'}):a[a.length-1].insert=a[a.length-1].insert+',{"insert":"',(null===(c=null===(i=e.insert.automation_variable)||void 0===i?void 0:i.customPayload)||void 0===c?void 0:c.field_id)?a.push({field_id:null===(o=null===(n=e.insert.automation_variable)||void 0===n?void 0:n.customPayload)||void 0===o?void 0:o.field_id}):a.push({path:null===(r=null===(s=e.insert.automation_variable)||void 0===s?void 0:s.customPayload)||void 0===r?void 0:r.path}),a.push({insert:'"}'})):0===t?a.push({insert:"["+JSON.stringify(e).replace("\n","\\n")}):a[a.length-1].insert=a[a.length-1].insert+","+JSON.stringify(e).replace("\n","\\n")}),a.length&&(a[a.length-1].insert=a[a.length-1].insert+"]"),this.interpolatedInputChange.emit({body:i,comment_quill:a,comment_quill_edit:e.delta,signature:t?[t]:[]})}else this.interpolatedInputChange.emit({body:null,comment_quill:null,comment_quill_edit:null,signature:t?[t]:[]})})}onCommentChange(){this.onCommentChange$.next()}selectedSignature(e){this.signature$.next(e)}onEmailUserAction(e){e.type===En.e.ThrowBusinessPaywall&&this.store.dispatch(new ta.x({signatureError:!0}))}removeInvalidEmailItems(){const e=Pn.Q.key,t=Pn.S.key,i=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]])}return i}(Xn,["symbol"==typeof e?e:e+"","symbol"==typeof t?t:t+""]);return Object.assign(Object.assign({},i),{[Pn.f.key]:!0,[Pn.ab.key]:!0,[Pn.i.key]:!0,[Pn.h.key]:!0,[Pn.g.key]:!0,[Pn.j.key]:!0,[Pn.d.key]:!0,[Pn.Eb.key]:!0,[Pn.ob.key]:!0,[Pn.T.key]:!0,[Pn.K.key]:!1,[Pn.L.key]:!1,[Pn.M.key]:!1,[Pn.m.key]:!1,[Pn.F.key]:!0})}updateMenuItems(){Array.isArray(this.variables)?(this.variableMenuItemOnly=(this.variables||[]).map(e=>({id:`${e.label}-${e.path?e.path.join("-"):e.field_id}`,customPayload:e,title:e.label,checked:this.selectedVariable===e})),this.variableMenuItems=[...this.variableMenuItemOnly]):this.variableMenuItemOnly=[]}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store),s.Wb(l.a),s.Wb(ca.b),s.Wb(s.B),s.Wb(Ln.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-email-body"]],viewQuery:function(e,t){if(1&e&&s.jd(Mn,1),2&e){let e;s.Qc(e=s.rc())&&(t.emailBody=e.first)}},hostAttrs:[1,"cu-automation-email-body"],inputs:{parentType:"parentType",action:"action",parentId:"parentId",value:"value",automationAction:"automationAction",readonly:"readonly",options:"options",interpolatedValue:"interpolatedValue",variables:"variables"},outputs:{valueChange:"valueChange",interpolatedInputChange:"interpolatedInputChange",mappedValueChange:"mappedValueChange"},features:[s.Hb([ca.b]),s.Gb],decls:3,vars:3,consts:[[3,"class",4,"ngIf"],[3,"content","id","editorId","placeholder","saveDraft","allowAttachments","allowScreenRecording","projectMembers","userGroups","showCommentButton","assignedComments","allowMentionSelf","taskUserGroups","allowedCommandsInput","allowEmailFeature","manageSignatures","canManageEmail","team","user","commentMode","forAutomation","variableMenuItemOnly","authedState","signatures","initialSignature","slashCommandSupport","onEmailUserAction","onCommentChange","selectedSignature",4,"ngIf"],[3,"innerHtml",4,"ngIf"],["class","cu-edit-automation__container-body-actions-label-icon",3,"icon",4,"ngIf"],["class","cu-edit-automation__container-body-actions-label-question","icon","question","tooltipLifeTime","15000",3,"cuTooltip",4,"ngIf"],[1,"cu-edit-automation__container-body-actions-label-icon",3,"icon"],["icon","question","tooltipLifeTime","15000",1,"cu-edit-automation__container-body-actions-label-question",3,"cuTooltip"],[3,"content","id","editorId","placeholder","saveDraft","allowAttachments","allowScreenRecording","projectMembers","userGroups","showCommentButton","assignedComments","allowMentionSelf","taskUserGroups","allowedCommandsInput","allowEmailFeature","manageSignatures","canManageEmail","team","user","commentMode","forAutomation","variableMenuItemOnly","authedState","signatures","initialSignature","slashCommandSupport","onEmailUserAction","onCommentChange","selectedSignature"],["emailBody",""],[3,"innerHtml"]],template:function(e,t){1&e&&(s.bd(0,Fn,4,7,"div",0),s.bd(1,Vn,8,38,"cu-comment-bar",1),s.bd(2,qn,3,7,"span",2)),2&e&&(s.Dc("ngIf",t.automationAction.title),s.Ib(1),s.Dc("ngIf",!t.readonly),s.Ib(1),s.Dc("ngIf",t.readonly))},directives:[c.q,u.a,lt.a,Un.a],pipes:[c.b,zn.a],styles:['.cu-automation-email-body .cu-comment-bar{border:1px solid #e9ebf0;border-radius:4px}.dark-theme .cu-automation-email-body .cu-comment-bar{border-color:#1e272e}.cu-automation-email-body .cu-comment-bar:before{display:none}.cu-automation-email-body .cu-comment-bar .cu-dropdown__toggle{min-height:0;padding:0}.cu-automation-email-body .cu-comment-bar .comment-bar__email{padding:0}.cu-automation-email-body .cu-comment-bar .comment-bar__icon{display:none}.cu-automation-email-body .cu-comment-bar .comment-bar__editor .ql-editor{padding:12px 20px;overflow:auto}.cu-automation-email-body .cu-comment-bar .comment-bar__editor .ql-editor.ql-blank:before{padding:0 12px 0 20px;content:"Say something...";font-size:14px;color:rgba(41,45,52,.4)}.dark-theme .cu-automation-email-body .cu-comment-bar .comment-bar__editor .ql-editor.ql-blank:before{color:#d5d6d7}.cu-automation-email-body .cu-comment-bar .comment-bar__delimiter{display:none}.cu-automation-email-body .cu-comment-bar .comment-bar__controls{height:auto}.cu-automation-email-body .cu-comment-bar .comment-bar__footer{display:none;border-color:#e9ebf0;padding:0 8px;min-height:40px;align-items:center}.dark-theme .cu-automation-email-body .cu-comment-bar .comment-bar__footer{border-color:#1e272e}.cu-automation-email-body .cu-comment-bar .comment-bar__footer .cu-emoji-picker-dropdown,.cu-automation-email-body .cu-comment-bar .comment-bar__footer cu-email-template-dropdown{height:24px}.cu-automation-email-body .cu-comment-bar .comment-bar__footer .comment-bar-btn__icon,.cu-automation-email-body .cu-comment-bar .comment-bar__footer .emoticons__toggle{width:24px;height:24px}.cu-automation-email-body .cu-comment-bar .comment-bar__footer-email-automation{display:none;border-top:1px solid #e9ebf0;padding:12px 12px 6px}.dark-theme .cu-automation-email-body .cu-comment-bar .comment-bar__footer-email-automation{border-color:#1e272e}.cu-automation-email-body .cu-comment-bar .comment-bar__footer-email-automation-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d;padding-bottom:10px;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-email-body .cu-comment-bar .comment-bar__footer-email-automation-label{font-family:var(--global-font-support)}}.cu-automation-email-body .cu-comment-bar .comment-bar_active .comment-bar__footer{display:flex}.cu-automation-email-body .cu-comment-bar .comment-bar_active .comment-bar__footer-email-automation{display:block}.cu-automation-email-body .cu-comment-bar__signature-label-toggle-add{padding:0 8px!important}.cu-automation-email-body .cu-comment-bar .cu-ql-dropdown.cu-ql-dropdown_top{transform:translateY(60%)}.cu-email-communicators__signatures-menu{width:260px;padding:8px 0}.cu-email-communicators__signatures-menu-team{max-height:200px}.cu-email-communicators__signatures-menu-settings{padding-top:2px;border-top:1px solid #e9ebf0}.dark-theme .cu-email-communicators__signatures-menu-settings{border-color:#1e272e}.cu-email-communicators__signatures-menu-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;height:32px;display:flex;align-items:center;color:#b9bec7;padding:0 12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-label{color:#828588}.cu-email-communicators__signatures-menu-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;height:32px;display:flex;align-items:center;justify-content:space-between;padding:0 12px;cursor:pointer}.cu-email-communicators__signatures-menu-item-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-item-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-item-text{color:#d5d6d7}.cu-email-communicators__signatures-menu-item:hover{background:#fafbfc}.dark-theme .cu-email-communicators__signatures-menu-item:hover{background:#2b343b}.cu-email-communicators__signatures-menu-item .icon{width:14px;height:14px;fill:#292d34}.dark-theme .cu-email-communicators__signatures-menu-item .icon{fill:#d5d6d7}.cu-email-communicators__signatures-menu-item-add .cu-email-communicators__signatures-menu-item-text{font-weight:500;color:var(--theme-main-color)}.cu-email-communicators__signatures-menu-item-settings-divider{background:#e9ebf0;width:100%;margin:8px 0;height:1px}.dark-theme .cu-email-communicators__signatures-menu-item-settings-divider{background:#1e272e}.cu-email-communicators__signatures-menu-item-settings{padding:0 12px;height:32px}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item{justify-content:flex-start}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#7c828d}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#828588}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{padding-right:5px;font-weight:500;color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-settings .icon{margin-left:auto}'],encapsulation:2,changeDetection:0}),e})();var Kn=i("G4qr"),Wn=i("jkYJ");const Hn=["userList"],Zn=function(e,t,i){return{fieldType:e,users:t,contacts:i}};function Qn(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"div",1),s.cc(2,"cu-email-communicators-field",2,3),s.qc("onCommunicatorAction",function(t){return s.Uc(e),s.uc().communicatorAction(t)})("onFocus",function(t){return s.Uc(e),s.uc().setIsFocused(t)}),s.vc(4,"async"),s.vc(5,"async"),s.vc(6,"async"),s.vc(7,"async"),s.bc(),s.cc(8,"cu-badge-input-fields",4),s.qc("selected",function(t){return s.Uc(e),s.uc().insertVariable(t)}),s.bc(),s.bc(),s.Zb()}if(2&e){const e=s.uc();s.Ib(2),s.Ob("cu-automation-email-address__input_focus",e.isFocusOnContentArea),s.Dc("communicatorData",s.Jc(19,Zn,e.RecipientType.To,s.wc(4,11,e.users$),s.wc(5,13,e.contacts$)))("fetchingContacts",!1)("showLabel",!1)("placeholder",s.wc(6,15,e.hasUsers$)?"":e.options.placeholder)("disableDrag",!0)("disabled",!s.wc(7,17,e.accountId$)),s.Ib(6),s.Dc("show",8)("preventBlur",!0)("inputBadges",e.availableVariable)}}let Jn=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.store=t,this.rxLocalEffects=i,this.interpolatedValue=[],this.mappedValueChange=new s.o,this.interpolatedInputChange=new s.o,this.valueChange=new s.o,this.emailValidation=!0,this.variableMenuItemOnly=[],this.inUseVariables=[],this.RecipientType=En.g,this.accountId$=new j.a(""),this.contactsMap$=this.store.select(di.getAuthedContactsMap),this.contacts$=Object(E.a)([this.accountId$,this.contactsMap$]).pipe(Object(h.a)(([e,t])=>!(!e||!t)),Object(m.a)(([e,t])=>t[e])),this.usersSubject$=new j.a([]),this.destroy$=new N.a,this.users$=this.usersSubject$.asObservable(),this.hasUsers$=this.usersSubject$.pipe(Object(m.a)(e=>!!(null==e?void 0:e.length)))}get availableVariable(){return this.variableMenuItemOnly.filter(e=>{var t;return!this.inUseVariables.includes(null===(t=e.customPayload)||void 0===t?void 0:t.field_id)})}ngOnInit(){this.updateMenuItems(),this.interpolatedValue.length&&this.rxLocalEffects.register(this.contacts$.pipe(Object(h.a)(e=>!!e),Object(p.a)(1)),e=>{const t=this.interpolatedValue.filter(e=>","!==e.insert).map(t=>{if(t.insert)return e.find(e=>e.email===t.insert)||{id:t.insert,username:t.insert,email:t.insert};const i=this.variables.find(e=>e.field_id===t.field_id||e.path&&t.path&&Object(ji.a)(e.path,t.path));return i?{id:`${i.label}-${i.path?i.path.join("-"):i.field_id}`,username:i.label,field_id:i.field_id,email:i.field_id}:null});this.setUsers(t.filter(e=>!!e))})}ngOnChanges(e){var t,i,a,c,n,o,s,r;e.variables&&this.updateMenuItems(),e.action&&(null===(i=null===(t=this.action)||void 0===t?void 0:t.inputValues)||void 0===i?void 0:i.auth)&&(null===(c=null===(a=this.action)||void 0===a?void 0:a.inputValues)||void 0===c?void 0:c.auth)!==this.accountId$.value&&(this.accountId$.next(null===(o=null===(n=this.action)||void 0===n?void 0:n.inputValues)||void 0===o?void 0:o.auth),this.store.dispatch(new ta.Yc({accountId:null===(r=null===(s=this.action)||void 0===s?void 0:s.inputValues)||void 0===r?void 0:r.auth}))),e.variables&&(this.updateMenuItems(),this.showVariables=this.variables&&this.variables.length>0)}insertVariable(e){this.inUseVariables.push(e.customPayload.field_id),this.insert({automation_variable:e})}ngOnDestroy(){this.destroy$.next()}communicatorAction(e){var t;if(e.type===En.a.SetUsers)this.setUsers(e.users);else if(e.type===En.a.RemoveUser){const i=this.usersSubject$.value.filter(t=>t.email!==e.email);(null===(t=e.email)||void 0===t?void 0:t.includes("@"))||(this.inUseVariables=this.inUseVariables.filter(t=>t!==e.email)),this.setUsers(i)}}setIsFocused(e){this.isFocusOnContentArea=e,this.changeDetector.markForCheck()}setUsers(e){this.usersSubject$.next(e);const t=[];e.forEach((i,a)=>{i.email.includes("@")?t.push({insert:i.email}):t.push({field_id:i.field_id}),a!==e.length-1&&t.push({insert:","})}),this.interpolatedInputChange.emit(t),this.changeDetector.markForCheck(),this.isFocusOnContentArea=!0}insert(e){const t=[...this.usersSubject$.value,{id:e.automation_variable.id,username:e.automation_variable.title,field_id:e.automation_variable.customPayload.field_id,email:e.automation_variable.customPayload.field_id}];this.setUsers(t)}updateMenuItems(){Array.isArray(this.variables)?(this.variableMenuItemOnly=(this.variables||[]).filter(e=>"email"===e.info.type||"email"===e.info.format).map(e=>({id:`${e.label}-${e.path?e.path.join("-"):e.field_id}`,customPayload:e,title:e.label})),this.variableMenuItems=[...this.variableMenuItemOnly]):this.variableMenuItemOnly=[]}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h),s.Wb(mi.Store),s.Wb(ca.b))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-automation-email-address"]],viewQuery:function(e,t){if(1&e&&s.jd(Hn,1),2&e){let e;s.Qc(e=s.rc())&&(t.emailCommunicators=e.first)}},hostAttrs:[1,"cu-automation-email-address"],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",options:"options",variables:"variables",action:"action",mappedValue:"mappedValue",interpolatedValue:"interpolatedValue"},outputs:{mappedValueChange:"mappedValueChange",interpolatedInputChange:"interpolatedInputChange",valueChange:"valueChange"},features:[s.Hb([ca.b]),s.Gb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"cu-automation-email-address__container"],[3,"communicatorData","fetchingContacts","showLabel","placeholder","disableDrag","disabled","onCommunicatorAction","onFocus"],["emailCommunicators",""],[3,"show","preventBlur","inputBadges","selected"]],template:function(e,t){1&e&&s.bd(0,Qn,9,23,"ng-container",0),2&e&&s.Dc("ngIf",!t.readonly)},directives:[c.q,Kn.a,Wn.a],pipes:[c.b],styles:['.cu-automation-email-address{display:flex;flex-direction:column;padding-right:0;min-width:0}.cu-automation-email-address .cu-email-communicators__from-group .cu-search__input{font-weight:400;font-size:13px;line-height:1;margin-left:5px;padding:0 0 2px;min-width:30px;max-width:300px;border:none;background-color:transparent!important;box-shadow:none!important}.dark-theme .cu-automation-email-address .cu-email-communicators__from-group .cu-search__input:-ms-input-placeholder{color:#d5d6d7}.dark-theme .cu-automation-email-address .cu-email-communicators__from-group .cu-search__input::placeholder{color:#d5d6d7}.cu-automation-email-address__container{border-radius:4px;color:#292d34;border:1px solid #e9ebf0}.dark-theme .cu-automation-email-address__container{color:#d5d6d7;border-color:#1e272e}.cu-automation-email-address__container .cu-automation-email-address__input{border:0}.cu-automation-email-address__container .cu-automation-email-address__input_focus+.cu-badge-input-fields{display:flex}.cu-automation-email-address__container .cu-automation-email-address__input_error{border:1px solid red}.cu-automation-email-address__container .cu-badge-input-fields{margin:0 6px}.cu-automation-email-address__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:13px;height:auto;cursor:text;word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;color:#292d34;border-radius:4px;padding:9px 12px;border:1px solid #e9ebf0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-email-address__input{font-family:var(--global-font-support)}}.dark-theme .cu-automation-email-address__input{color:#d5d6d7;border-color:#1e272e}.cu-automation-email-address__input_spacing-top{margin-top:6px}.cu-automation-email-address__input .ql-editor{margin:-9px -12px;padding:9px 10px;min-height:39px;text-align:left;direction:ltr}.cu-automation-email-address__input .ql-editor.ql-blank:before{left:11px;right:0;color:#292d34!important;opacity:.4}.dark-theme .cu-automation-email-address__input .ql-editor.ql-blank:before{color:#828588!important;opacity:1}.cu-automation-email-address__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d;padding-bottom:10px;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-automation-email-address__label{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})();var Yn=i("iA4v"),eo=i("Wk/N"),to=i("/qOb");const io=["contentArea"];function ao(e,t){if(1&e){const e=s.dc();s.cc(0,"div",2),s.Xb(1,"div",3,4),s.cc(3,"div",5),s.gc(4,6),s.bc(),s.cc(5,"cu-badge-input-fields",7),s.qc("selected",function(t){return s.Uc(e),s.uc(2).insertVariable(t)}),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(1),s.Ob("cu-email-subject-input__input_focus",e.isFocusOnContentArea),s.Ib(4),s.Dc("show",8)("inputBadges",e.variableMenuItemOnly)}}function co(e,t){if(1&e&&(s.ac(0),s.bd(1,ao,6,4,"div",1),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",!e.selectedVariable)}}function no(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.ed(e.value)}}function oo(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.ed(e.selectedVariable.label)}}function so(e,t){if(1&e&&(s.ac(0),s.bd(1,no,2,1,"ng-container",0),s.bd(2,oo,2,1,"ng-container",0),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",!e.selectedVariable),s.Ib(1),s.Dc("ngIf",e.selectedVariable)}}let ro=(()=>{class e{constructor(e,t){this.changeDetector=e,this.zone=t,this.mappedValueChange=new s.o,this.interpolatedInputChange=new s.o,this.valueChange=new s.o,this.variableMenuItemOnly=[]}set contentArea(e){e&&this.zone.runOutsideAngular(()=>{this.quill=this.initQuill(e),this.keyboard=this.quill.getModule("keyboard"),this.addKeyBinding(Object.assign(Object.assign({},{shortKey:null,shiftKey:null,altKey:null,handler:()=>!1}),{key:to.c.ENTER})),this.listenToQuillChange(),this.populateQuill()}),this._contentArea=e}get contentArea(){return this._contentArea}ngOnChanges(e){(e.variables||e.mappedValue)&&(e.mappedValue&&this.variables&&this.mappedValue&&(this.selectedVariable=this.variables.find(e=>Object(ji.a)(e.path,this.mappedValue.path))),e.variables&&!e.variables.firstChange&&this.quill.setContents([]),!1!==this.options.useVariables&&this.updateMenuItems(),this.showVariables=this.options.useVariables&&this.variables&&this.variables.length>0)}insertVariable(e){this.insert({automation_variable:e})}initQuill(e){return new Yn.b(e.nativeElement,{theme:"snow",placeholder:this.options.placeholder,formats:["automation_variable"],modules:{toolbar:!1,clipboard:{onCapturePaste(e){if(e.clipboardData.getData("text/html").includes("<img"))return!1}},pasteImage:{onPaste:e=>!1}}})}addKeyBinding(e){this.keyboard.bindings[e.key]||(this.keyboard.bindings[e.key]=[]),this.keyboard.bindings[e.key].unshift(e)}insert(e){const t=this.quill.getSelection(!0).index;this.quill.updateContents((new Yn.a).retain(t).insert(e)),this.quill.setSelection(t+("string"==typeof e?e.length:1))}updateMenuItems(){Array.isArray(this.variables)?(this.variableMenuItemOnly=(this.variables||[]).map(e=>({id:`${e.label}-${e.path?e.path.join("-"):e.field_id}`,customPayload:e,title:e.label,checked:this.selectedVariable===e})),this.variableMenuItems=[...this.variableMenuItemOnly]):this.variableMenuItemOnly=[]}listenToQuillChange(){this.quill.on(eo.h.TEXT_CHANGE,(e,t,i)=>{this.interpolatedInputUpdate()}),this.quill.clipboard.addMatcher("img",(e,t)=>new Yn.a(t.ops.forEach(e=>!e.insert.image))),this.quill.on("selection-change",(e,t)=>{null===e&&null!==t&&(this.isFocusOnContentArea=!1,this.changeDetector.markForCheck()),null!==e&&null===t&&(this.isFocusOnContentArea=!0,this.changeDetector.markForCheck())})}interpolatedInputUpdate(){const e=this.quill.getContents().ops,t=e.map((t,i)=>{if("string"==typeof t.insert){if(e.length-1===i&&"\n"===t.insert)return;return"\n"===t.insert[t.insert.length-1]?{insert:t.insert.slice(0,-1)}:{insert:t.insert}}if(t.insert.automation_variable)return t.insert.automation_variable.customPayload.path?{path:t.insert.automation_variable.customPayload.path}:{field_id:t.insert.automation_variable.customPayload.field_id}}).filter(e=>!!e);if(t.some(e=>!!e.path||!!e.field_id))this.interpolatedInputChange.emit(t);else{const e=t.map(e=>e.insert).join("");this.valueChange.emit(e)}}populateQuill(){this.quill&&this.interpolatedValue?this.mapArrayInputToQuill(this.interpolatedValue):this.quill&&this.value&&(Array.isArray(this.value)?this.mapArrayInputToQuill(this.value):this.insert(this.value))}mapArrayInputToQuill(e){const t=e.map(e=>e.insert?{insert:e.insert}:e.path?{insert:{automation_variable:this.variableMenuItemOnly.find(t=>Object(ji.a)(t.customPayload.path,e.path))}}:e.field_id?{insert:{automation_variable:this.variableMenuItemOnly.find(t=>t.customPayload.field_id===e.field_id)}}:void 0).filter(e=>!!e);this.quill.setContents(t)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h),s.Wb(s.B))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-email-subject-input"]],viewQuery:function(e,t){if(1&e&&s.jd(io,1),2&e){let e;s.Qc(e=s.rc())&&(t.contentArea=e.first)}},hostAttrs:[1,"cu-email-subject-input"],inputs:{parentType:"parentType",parentId:"parentId",value:"value",readonly:"readonly",options:"options",variables:"variables",mappedValue:"mappedValue",interpolatedValue:"interpolatedValue"},outputs:{mappedValueChange:"mappedValueChange",interpolatedInputChange:"interpolatedInputChange",valueChange:"valueChange"},features:[s.Gb],decls:2,vars:2,consts:function(){let e;return e=$localize`:@@common_fields␟1f80d16659a7bbebe1a3c1c018f2de2f0fc37c4e␟4825033114168285958: Fields `,[[4,"ngIf"],["class","cu-email-subject-input__container",4,"ngIf"],[1,"cu-email-subject-input__container"],[1,"cu-email-subject-input__input"],["contentArea",""],[1,"cu-email-subject-input__label"],e,[3,"show","inputBadges","selected"]]},template:function(e,t){1&e&&(s.bd(0,co,2,1,"ng-container",0),s.bd(1,so,3,2,"ng-container",0)),2&e&&(s.Dc("ngIf",!t.readonly),s.Ib(1),s.Dc("ngIf",t.readonly))},directives:[c.q,Wn.a],styles:['.cu-email-subject-input{display:flex;flex-direction:column;padding-right:0;min-width:0}.cu-email-subject-input__container{border-radius:4px;color:#292d34;border:1px solid #e9ebf0}.dark-theme .cu-email-subject-input__container{color:#d5d6d7;border-color:#1e272e}.cu-email-subject-input__container .cu-email-subject-input__input{border:0}.cu-email-subject-input__container .cu-email-subject-input__input_focus+.cu-badge-input-fields{display:flex}.cu-email-subject-input__container .cu-email-subject-input__input_error{border:1px solid red}.cu-email-subject-input__container .cu-badge-input-fields{margin:0 6px}.cu-email-subject-input__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:13px;height:auto;cursor:text;word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;color:#292d34;border-radius:4px;padding:9px 12px;border:1px solid #e9ebf0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-subject-input__input{font-family:var(--global-font-support)}}.dark-theme .cu-email-subject-input__input{color:#d5d6d7;border-color:#1e272e}.cu-email-subject-input__input_spacing-top{margin-top:6px}.cu-email-subject-input__input .ql-editor{margin:-9px -12px;padding:9px 10px;min-height:39px;text-align:left;direction:ltr}.cu-email-subject-input__input .ql-editor.ql-blank:before{left:11px;right:0;color:#292d34!important;opacity:.4}.dark-theme .cu-email-subject-input__input .ql-editor.ql-blank:before{color:#828588!important;opacity:1}.cu-email-subject-input__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d;padding:0 12px 10px;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-subject-input__label{font-family:var(--global-font-support)}}.cu-email-subject-input .cu-badge-input-fields{margin:0 12px 6px}'],encapsulation:2,changeDetection:0}),e})();function lo(e){let t=null;return e.pipe(Object(p.a)(1)).subscribe(e=>t=e).unsubscribe(),t}function uo(e,t){1&e&&(s.ac(0),s.dd(1," To send email automations from this Space, ensure the Email ClickApp is turned on in settings "),s.Zb())}function mo(e,t){1&e&&s.dd(0,"To send email automations from this Space, ask your Workspace admin to turn the Email ClickApp On")}function ho(e,t){if(1&e){const e=s.dc();s.cc(0,"div",6),s.qc("click",function(){return s.Uc(e),s.uc().goToClickApp()}),s.dd(1," Go to ClickApp "),s.bc()}}let po=(()=>{class e{constructor(e,t){this.store=e,this.router=t,this.isAdminOrOwner$=this.store.select(di.getTeam).pipe(Object(m.a)(e=>e.role===vt.f.ADMIN||e.role===vt.f.OWNER))}goToClickApp(){const e=lo(this.store.select(di.getTeam));this.router.navigate(["/",e?e.id:"","settings","team",e?e.id:"","integrations"],{queryParams:{integration:"email"}})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store),s.Wb(It.h))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-email-automation-info"]],decls:9,vars:8,consts:[[1,"email-info"],[1,"email-info__icon",3,"icon"],[1,"email-info__text"],[4,"ngIf","ngIfElse"],["cantEditSettings",""],["class","email-info__button",3,"click",4,"ngIf"],[1,"email-info__button",3,"click"]],template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.Xb(1,"div",1),s.cc(2,"div",2),s.bd(3,uo,2,0,"ng-container",3),s.vc(4,"async"),s.bd(5,mo,1,0,"ng-template",null,4,s.cd),s.bc(),s.bd(7,ho,2,0,"div",5),s.vc(8,"async"),s.bc()),2&e){const e=s.Rc(6);s.Ib(1),s.Dc("icon","cu3-email"),s.Ib(2),s.Dc("ngIf",s.wc(4,4,t.isAdminOrOwner$))("ngIfElse",e),s.Ib(4),s.Dc("ngIf",s.wc(8,6,t.isAdminOrOwner$))}},directives:[u.a,c.q],pipes:[c.b],styles:['.email-info{display:flex;align-items:center;padding:20px;background:#fff;border:1px solid #e9ebf0;border-radius:4px;margin-bottom:16px;width:calc(100% - 6px);margin-left:-6px}.dark-theme .email-info{background:#384047;border-color:#1e272e}.email-info__icon{width:40px;height:40px;margin-right:22px}.email-info__text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:20px;color:#292d34;max-width:430px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.email-info__text{font-family:var(--global-font-support)}}.dark-theme .email-info__text{color:#d5d6d7}.email-info__button{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;background:var(--theme-main-color);width:180px;height:48px;border-radius:8px;color:#fff;margin-left:auto}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.email-info__button{font-family:var(--global-font-support)}}.email-info__button:hover{background:var(--theme-main-color-dark)}'],encapsulation:2,changeDetection:0}),e})(),bo=(()=>{class e{constructor(){this.emailPaywallUnlimitedModalMeta=En.j}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-on-email-create-paywall"]],hostAttrs:[1,"cu-on-email-create-paywall"],decls:1,vars:10,consts:[[3,"badge","title","text","upgradeButtonText","emailSubject","learnMore","features","textBelowImage","flipBadge","imageWidth"]],template:function(e,t){1&e&&s.Xb(0,"cu-paywall-popover",0),2&e&&s.Dc("badge",t.emailPaywallUnlimitedModalMeta.badge)("title","")("text",t.emailPaywallUnlimitedModalMeta.moreAccounts)("upgradeButtonText",t.emailPaywallUnlimitedModalMeta.buttonText)("emailSubject",t.emailPaywallUnlimitedModalMeta.emailSubject)("learnMore",t.emailPaywallUnlimitedModalMeta.learnMore)("features",t.emailPaywallUnlimitedModalMeta.features)("textBelowImage",t.emailPaywallUnlimitedModalMeta.textBelowImage)("flipBadge",!0)("imageWidth",180)},directives:[Y.a],styles:[".cu-on-email-create-paywall__modal .cu-modal__dialog{padding:0;max-width:380px}"],encapsulation:2,changeDetection:0}),e})();var go=i("ejAw");let fo=(()=>{class e{constructor(e,t,i,a){this.featureService=e,this.modal=t,this.store=i,this.injector=a,this.key="email",this.icon={type:"icon",resource:"cu3-email"},this.colors={main:"#0000FF",faded:"rgba(130,133,136, 0.1)"},this.team$=this.store.select(di.getTeam)}getActionsInputComponentOverride(e,t){const i=e.schema&&e.schema.title&&e.schema.title||e.key;return["to","cc","bcc"].includes(e.key)?{resource:"email",type:e.key,component:Jn,componentOptions:{placeholder:i},title:i}:"subject"===e.key?{resource:"email",type:e.key,component:ro,componentOptions:{placeholder:i},title:i}:"body"===e.key?{resource:"email",type:"body",component:Bn,componentOptions:{useVariables:!0,forEmail:!0},title:i,selfEmit:!0}:void 0}disableResource(){return this.featureService.projectFeatures.pipe(Object(m.a)(e=>{var t;return{disable:!(null===(t=e.emails)||void 0===t?void 0:t.enabled)||!1}}))}onStartingAutomation(e,t,i){const a=lo(this.team$);return(null==a?void 0:a.plan_id)===_t.f.FREE&&a.email_usage>=100?(this.modal.openComponent(bo,this.injector,{blank:!0,modifier:"cu-on-email-create-paywall__modal",noOpenAnimation:!0}),Object(Ne.a)(!1)):Object(Ne.a)(!0)}getResourceInfo(){if(!lo(this.featureService.projectFeatures.pipe(Object(m.a)(e=>{var t;return null===(t=e.emails)||void 0===t?void 0:t.enabled}))))return po}}return e.\u0275fac=function(t){return new(t||e)(s.nc(go.a),s.nc(r.a),s.nc(mi.Store),s.nc(s.t))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})();var _o=i("Jdc8");let vo=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[c.c,oi.d,U.a.forFeature([fo]),c.c,yc.a,kc.a,_o.a,Dn.a,Wt.a,It.l,Yt.a,ai.a,Ln.b]]}),e})();const yo=new s.s("integration/auth/custom-auth: Custom Auth Strategies Internal ForRoot Guard"),ko=new s.s("integration/auth/custom-auth: Custom Auth Strategies - root"),Io=new s.s("integration/auth/custom-auth: Custom Auth Strategies - root internal"),wo=new s.s("integration/auth/custom-auth Strategies - feature"),To=new s.s("integration/auth/custom-auth: Custom Auth Strategies - internal feature");var xo=i("9ppp");let Co=(()=>{class e extends N.a{constructor(){super()}get keys(){return this.getAllStrategyKeys()}get value(){return this.getValue()}getKeys(){return this.getAllStrategyKeys()}get keys$(){return this.pipe(Object(m.a)(e=>e.map(e=>e.identifier)))}setStrategies(e){this.next(e)}addStrategies(e){this.next([...this.getValue(),...this.ensureNoDuplication(...e)])}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xo.a;return this.strategies||[]}next(e){super.next(this.strategies=e)}ensureNoDuplication(...e){return e.filter(e=>!this.getKeys().includes(e.identifier))}getAllStrategyKeys(){return this.getValue().map(e=>e.identifier)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),Oo=(()=>{class e{constructor(e){this.source=e,this.strategies$=this.source.asObservable(),this.keys$=this.source.keys$,this.keys=this.source.getKeys()}getStrategy(e){var t,i;return null===(i=null===(t=this.source)||void 0===t?void 0:t.getValue())||void 0===i?void 0:i.find(t=>t.identifier===e)}}return e.\u0275fac=function(t){return new(t||e)(s.nc(Co))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),So=(()=>{class e{constructor(e,t){this.strategies=t,t.setStrategies(e)}addStrategies(e){this.strategies.addStrategies(e)}}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)(s.nc(ko),s.nc(Co))}}),e})(),Do=(()=>{class e{constructor(e,t=[]){e.addStrategies(t.flat().flat())}}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)(s.nc(So),s.nc(wo))}}),e})(),Ao=(()=>{class e{constructor(e){this.customAuthStrategies=e,this.type="custom"}get noRemove(){const e=this.customAuthStrategies.getStrategy(this.currentIdentifier);return(null==e?void 0:e.noRemove)||!1}initForResource(e){this.currentIdentifier=e}get startComponent(){if(!this.currentIdentifier)throw new Error("AuthStrategy.initForResource hasn't been called");const e=this.customAuthStrategies.getStrategy(this.currentIdentifier);if(!e)throw new Error(`custom Auth ${this.currentIdentifier} strategy not registered`);return e.getStartComponent()}deleteAuth(e,t,i){const a=this.customAuthStrategies.getStrategy(t);null==a||a.deleteAuth(e,t,i)}}return e.\u0275fac=function(t){return new(t||e)(s.nc(Oo))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac}),e})(),jo=(()=>{class e{static forRoot(e=[]){return{ngModule:So,providers:[{provide:yo,useFactory:No,deps:[[Oo,new s.C,new s.O]]},Co,Oo,{provide:oi.a,useClass:Ao,multi:!0},e,{provide:Io,useValue:[e]},{provide:ko,useFactory:Eo,deps:[s.t,Io]}]}}static forFeature(e=[]){return{ngModule:Do,providers:[e,{provide:To,multi:!0,useValue:[e]},{provide:wo,useFactory:Eo,multi:!0,deps:[s.t,To]}]}}}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)}}),e})();function No(e){if(e)throw new TypeError("CustomAuthModule.forRoot() called twice. Feature modules should use CustomAuthModule.forFeature() instead.");return"protected"}function Eo(e,t){return t.map(t=>t.map(t=>Array.isArray(t)?t.map(t=>e.get(t)).flat():e.get(t))).flat()}var $o=i("fetL"),Po=i("9oWR");const Lo=["paywallUnlimitedEmailTemplate"],Uo=["paywallAuthEmailTemplate"];function zo(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-email-settings",5),s.qc("onEmailUserAction",function(t){return s.Uc(e),s.uc(2).emailUserAction(t)})("onCompletedAuth",function(t){return s.Uc(e),s.uc(2).setAuthId(t)}),s.vc(1,"async"),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.bc()}if(2&e){const e=s.uc(2);s.Dc("availableUsers",s.wc(1,6,e.members$))("canManageEmail",s.wc(2,8,e.canManageEmail$))("fromEmailUser",s.wc(3,10,e.fromEmailUser$))("team",s.wc(4,12,e.team$))("inModal",!0)("onlyShowAuth",!0)}}function Mo(e,t){if(1&e&&s.Xb(0,"cu-paywall-popover",6),2&e){const e=s.uc(2);s.Dc("badge",e.emailPaywallUnlimitedModalMeta.badge)("title","")("text",e.emailPaywallUnlimitedModalMeta.moreAccounts)("upgradeButtonText",e.emailPaywallUnlimitedModalMeta.buttonText)("emailSubject",e.emailPaywallUnlimitedModalMeta.emailSubject)("learnMore",e.emailPaywallUnlimitedModalMeta.learnMore)("features",e.emailPaywallUnlimitedModalMeta.features)("textBelowImage",e.emailPaywallUnlimitedModalMeta.textBelowImage)("flipBadge",!0)("imageWidth",180)}}function Ro(e,t){1&e&&(s.cc(0,"div",7),s.gc(1,8),s.bc())}function Go(e,t){if(1&e&&(s.ac(0),s.Xb(1,"cu-paywall-popover",9),s.Zb()),2&e){const e=t.ngIf;s.Ib(1),s.Dc("badge",null==e?null:e.badge)("title","")("text",null==e?null:e.moreAccounts)("upgradeButtonText",null==e?null:e.buttonText)("emailSubject",null==e?null:e.emailSubject)("learnMore",null==e?null:e.learnMore)("features",null==e?null:e.features)("flipBadge",!0)}}function Fo(e,t){if(1&e&&(s.bd(0,Go,2,8,"ng-container",0),s.vc(1,"async")),2&e){const e=s.uc(2);s.Dc("ngIf",s.wc(1,1,e.paywallModalMeta$))}}function Vo(e,t){if(1&e&&(s.ac(0),s.bd(1,zo,5,14,"cu-email-settings",1),s.bd(2,Mo,1,10,"cu-paywall-popover",2),s.bd(3,Ro,2,0,"div",3),s.bd(4,Fo,2,3,"ng-template",null,4,s.cd),s.Zb()),2&e){const e=t.ngIf;s.Ib(1),s.Dc("ngIf",1===e),s.Ib(1),s.Dc("ngIf",2===e),s.Ib(1),s.Dc("ngIf",3===e)}}let qo=(()=>{class e extends oi.b{constructor(e){super(),this.store=e,this.members$=this.store.select(di.getTeamNonGuestUsers),this.canManageEmail$=this.store.select(di.getCanManageEmail),this.team$=this.store.select(di.getTeam),this.fromEmailUserSubject$=new j.a(null),this.fromEmailUser$=this.fromEmailUserSubject$.asObservable(),this.paywallModalMeta$=this.team$.pipe(Object(h.a)(e=>!!e),Object(m.a)(e=>e.plan_id===_t.f.FREE?En.j:En.i)),this.emailAccountSpots$=this.team$.pipe(Object(m.a)(e=>{if(!e)return 1;let t=e.plan_id===_t.f.FREE||e.plan_id===_t.f.UNLIMITED?1:2;if(e.plan_id!==_t.f.FREE&&e.addons&&e.addons.length){const i=e.addons.find(e=>e.addon_id===_t.a.EMAIL);i&&(t+=i.total||0)}return t})),this.authedEmails$=this.store.select(di.getAuthedEmails),this.emailPaywallBusinessModalMeta=En.i,this.emailPaywallUnlimitedModalMeta=En.j,this.showAddon=!1,this.displayOptions$=Object(E.a)([this.emailAccountSpots$,this.team$]).pipe(Object(p.a)(1),Object(m.a)(([e,t])=>{if(t.email_accounts===e){if(t.plan_id===_t.f.FREE)return 2;if(t.role===vt.f.USER)return 3}return 1}))}get authEmailsSnapShot(){return lo(this.authedEmails$)}emailUserAction(e){const t={[En.e.FetchAuthedEmails]:()=>{this.store.dispatch(new ta.Uc),this.store.dispatch(new ta.ad)},[En.e.UpdateEmailUser]:e=>{this.store.dispatch(new ta.jm({authedEmail:null==e?void 0:e.emailUser,editAuthEmailPayload:e.editAuthEmailPayload}))}}[e.type];t&&t(e)}setAuthId(e){this.authentication.next({auth:e,visibility:1})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(mi.Store))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-email-auth"]],viewQuery:function(e,t){if(1&e&&(s.jd(Lo,3),s.jd(Uo,3)),2&e){let e;s.Qc(e=s.rc())&&(t.paywallUnlimitedEmailTemplate=e.first),s.Qc(e=s.rc())&&(t.paywallAuthEmailTemplate=e.first)}},hostAttrs:[1,"cu-integration-email-auth"],features:[s.Fb],decls:2,vars:3,consts:function(){let e;return e=$localize`:@@errors_workspace-max-email-accounts␟6fb82dda456aa03fe4b983e47fa578e035c12ffa␟3102641676165338769: Whoops! Your Workspace has maxed out available email accounts. Ask an admin to purchase more. `,[[4,"ngIf"],["class","cu-email-integration__settings",3,"availableUsers","canManageEmail","fromEmailUser","team","inModal","onlyShowAuth","onEmailUserAction","onCompletedAuth",4,"ngIf"],[3,"badge","title","text","upgradeButtonText","emailSubject","learnMore","features","textBelowImage","flipBadge","imageWidth",4,"ngIf"],["class","cu-error-popover",4,"ngIf"],["paywallAuthEmailTemplate",""],[1,"cu-email-integration__settings",3,"availableUsers","canManageEmail","fromEmailUser","team","inModal","onlyShowAuth","onEmailUserAction","onCompletedAuth"],[3,"badge","title","text","upgradeButtonText","emailSubject","learnMore","features","textBelowImage","flipBadge","imageWidth"],[1,"cu-error-popover"],e,[3,"badge","title","text","upgradeButtonText","emailSubject","learnMore","features","flipBadge"]]},template:function(e,t){1&e&&(s.bd(0,Vo,6,3,"ng-container",0),s.vc(1,"async")),2&e&&s.Dc("ngIf",s.wc(1,1,t.displayOptions$))},directives:[c.q,Po.a,Y.a],pipes:[c.b],styles:[".cu-integration-email-auth[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;justify-self:stretch;width:50%}"],changeDetection:0}),e})();class Xo{constructor(){this.identifier="email",this.noRemove=!0}getStartComponent(){return qo}deleteAuth(e,t,i){}}let Bo=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[c.c,jo.forFeature([Xo]),$o.a,Jt.LoaderModule,ai.a]]}),e})();i("SuxV");let Ko=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[c.c,Wt.a,Bt.a,Kt.a,o.b.forRoot({animateTitle:!1,animation:!1,showUnits:!0,showBackground:!1,showSubtitle:!1,renderOnClick:!1,backgroundPadding:0}),Ht.a,g.b,It.l,Zt.a,Qt.a,l.j,l.t,Jt.LoaderModule,Yt.a,ei.a,ti.a,ii.a,ai.a,a.a,ci.b,ni.l,P.f,oi.d,mn,U.a.forRoot([Rc,Gc,Fc,Vc,qc]),l.c,Tc,zc,Dc,vo,wn.forRoot([{provide:pn,useValue:Mc,multi:!0}]),jo.forRoot([]),Bo,H.b,l.r,l.q,l.b,Bc,l.n,l.d,si.e,Tn.a,xn.a,Sn]]}),e})();s.Yc(n.a,[c.q,Xt,Ae],[c.b])},"4TFr":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("ofXK"),c=i("12Dc"),n=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a]]}),e})()},"4x9P":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("V6/z"),c=i("ofXK"),n=i("EDFS"),o=i("gb9A"),s=i("K0KF"),r=i("bx+h"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[c.c,n.d,o.a,s.a,r.a,a.a]]}),e})()},"4zIx":function(e,t,i){"use strict";i.d(t,"b",function(){return ft}),i.d(t,"a",function(){return vt});var a=i("HEHP"),c=i("tCCU"),n=i("c3rA"),o=i("l7P3"),s=i("cp0P"),r=i("lJxs"),l=i("1G5W"),u=i("IzEk"),d=i("pLZG"),m=i("nYR2"),h=i("zP0r"),p=i("fXoL"),b=i("GXRk"),g=i("/qOb"),f=i("rpco"),_=i("WluX"),v=i("o7Ov"),y=i("9jGm"),k=i("Injh"),I=i("Gj5t"),w=i("MguC"),T=i("bV87"),x=i("NfA8"),C=i("Tm/s"),O=i("jJW4"),S=i("AeD3"),D=i("9Ejp"),A=i("tyNb"),j=i("Jf2N"),N=i("ejAw"),E=i("cCXi"),$=i("xog/"),P=i("oGMP"),L=i("xMfC"),U=i("DkPU"),z=i("ofXK"),M=i("UdVN"),R=i("3Pt+"),G=i("bFKe"),F=i("NsZK"),V=i("/i14"),q=i("Uo1z"),X=i("haUk"),B=i("O3ed"),K=i("KTjT"),W=i("8r6i"),H=i("/Uwt"),Z=i("UqWe");const Q=["categoryInput"],J=["tagsinput"];function Y(e,t){if(1&e&&(p.cc(0,"div",38),p.cc(1,"div",39),p.Xb(2,"div",40),p.bc(),p.cc(3,"div",41),p.dd(4),p.bc(),p.bc()),2&e){const e=p.uc(4);p.Ib(4),p.ed(e.nameError)}}const ee=function(e){return{"cu-form__row_error":e}},te=function(){return{standalone:!0}};function ie(e,t){if(1&e){const e=p.dc();p.cc(0,"div",32),p.cc(1,"div",33),p.gc(2,34),p.bc(),p.cc(3,"div",35),p.cc(4,"input",36,37),p.qc("ngModelChange",function(t){return p.Uc(e),p.uc(3).categoryName=t})("ngModelChange",function(){return p.Uc(e),p.uc(3).clearNameError()})("keyup.Enter",function(){return p.Uc(e),p.uc(3).saveChanges()}),p.bc(),p.bc(),p.bd(6,Y,5,1,"div",24),p.bc()}if(2&e){const e=p.uc(3);p.Dc("ngClass",p.Hc(4,ee,e.nameError)),p.Ib(4),p.Dc("ngModel",e.categoryName)("ngModelOptions",p.Gc(6,te)),p.Ib(2),p.Dc("ngIf",e.nameError)}}function ae(e,t){1&e&&(p.ac(0),p.dd(1,", "),p.Zb())}function ce(e,t){if(1&e&&(p.ac(0),p.dd(1),p.bd(2,ae,2,0,"ng-container",4),p.Zb()),2&e){const e=t.$implicit,i=t.last;p.Ib(1),p.fd(" ",e,""),p.Ib(1),p.Dc("ngIf",!i)}}function ne(e,t){1&e&&(p.ac(0),p.cc(1,"em"),p.gc(2,42),p.bc(),p.Zb())}function oe(e,t){1&e&&p.dd(0,"people")}function se(e,t){1&e&&p.dd(0,"person")}function re(e,t){if(1&e&&(p.ac(0),p.cc(1,"div",43),p.dd(2),p.vc(3,"async"),p.ac(4,44),p.bd(5,oe,1,0,"ng-template",45),p.bd(6,se,1,0,"ng-template",46),p.Zb(),p.bc(),p.Zb()),2&e){const e=p.uc(3);let t=null;p.Ib(2),p.gd(" ",null==(t=p.wc(3,3,e.parentItem$))?null:t.name," | ",(null==e.privacy?null:e.privacy.membersData.parentMembers.length)+(null==e.privacy||null==e.privacy.membersData?null:e.privacy.membersData.members.length)," "),p.Ib(2),p.Dc("ngPlural",(null==e.privacy?null:e.privacy.membersData.parentMembers.length)+(null==e.privacy||null==e.privacy.membersData?null:e.privacy.membersData.members.length))}}function le(e,t){if(1&e&&(p.ac(0),p.cc(1,"div",43),p.gc(2,47),p.bc(),p.Zb()),2&e){const e=p.uc(3);p.Ib(2),p.kc(null==e.privacy||null==e.privacy.membersData?null:e.privacy.membersData.members.length)(null==e.privacy||null==e.privacy.membersData?null:e.privacy.membersData.members.length),p.hc(2)}}function ue(e,t){1&e&&(p.cc(0,"div",17),p.gc(1,48),p.bc())}function de(e,t){1&e&&(p.cc(0,"div",17),p.gc(1,49),p.bc())}function me(e,t){if(1&e&&p.Xb(0,"div",52),2&e){const e=t.$implicit;p.ad("color",e.color),p.Dc("cuTooltip",e.status)}}function he(e,t){if(1&e&&(p.cc(0,"div",50),p.bd(1,me,1,3,"div",51),p.bc()),2&e){const e=p.uc(3);p.Ib(1),p.Dc("ngForOf",e.statusList)("ngForTrackBy",e.trackByStatus)}}function pe(e,t){1&e&&(p.cc(0,"div",38),p.cc(1,"div",39),p.Xb(2,"div",40),p.bc(),p.cc(3,"div",41),p.gc(4,53),p.bc(),p.bc())}function be(e,t){if(1&e){const e=p.dc();p.ac(0),p.cc(1,"div",5),p.gc(2,6),p.bc(),p.cc(3,"div",7),p.cc(4,"div",8),p.gc(5,9),p.bc(),p.cc(6,"div",10),p.qc("click",function(){return p.Uc(e),p.uc(2).openFolderTemplateModal()}),p.gc(7,11),p.bc(),p.bc(),p.bd(8,ie,7,7,"div",12),p.cc(9,"div",13),p.cc(10,"div",14),p.qc("click",function(){p.Uc(e);const t=p.uc(2);return t.changeStage(t.Stage.Lists)}),p.cc(11,"div",15),p.gc(12,16),p.bc(),p.cc(13,"div",17),p.bd(14,ce,3,2,"ng-container",18),p.bd(15,ne,3,0,"ng-container",4),p.bc(),p.Xb(16,"div",19),p.bc(),p.cc(17,"div",14),p.qc("click",function(){p.Uc(e);const t=p.uc(2);return t.changeStage(t.Stage.Visibility)}),p.cc(18,"div",15),p.gc(19,20),p.bc(),p.cc(20,"div",17),p.bd(21,re,7,5,"ng-container",4),p.bd(22,le,3,2,"ng-container",4),p.bc(),p.Xb(23,"div",19),p.bc(),p.cc(24,"div",14),p.qc("click",function(){p.Uc(e);const t=p.uc(2);return t.changeStage(t.Stage.Statuses)}),p.cc(25,"div",15),p.gc(26,21),p.bc(),p.bd(27,ue,2,0,"div",22),p.bd(28,de,2,0,"div",22),p.bd(29,he,2,2,"div",23),p.Xb(30,"div",19),p.bc(),p.bc(),p.bd(31,pe,5,0,"div",24),p.cc(32,"button",25),p.qc("click",function(){return p.Uc(e),p.uc(2).saveChanges()}),p.cc(33,"div",26),p.gc(34,27),p.bc(),p.cc(35,"div",28),p.Xb(36,"div",29),p.Xb(37,"div",30),p.Xb(38,"div",31),p.bc(),p.bc(),p.Zb()}if(2&e){const e=p.uc(2);p.Ib(8),p.Dc("ngIf",!e.categoryId&&!e.projectToEdit&&!e.subcategoryToEdit),p.Ib(6),p.Dc("ngForOf",e.subcategoryList)("ngForTrackBy",e.trackByValue),p.Ib(1),p.Dc("ngIf",0===e.subcategoryList.length),p.Ib(6),p.Dc("ngIf",!e.privacy.private),p.Ib(1),p.Dc("ngIf",e.privacy.private),p.Ib(5),p.Dc("ngIf","space"===e.statusesType),p.Ib(1),p.Dc("ngIf","folder"===e.statusesType),p.Ib(1),p.Dc("ngIf","custom"===e.statusesType),p.Ib(2),p.Dc("ngIf",e.subcategoryError),p.Ib(1),p.Dc("disabled",e.isSaving)}}function ge(e,t){if(1&e){const e=p.dc();p.cc(0,"div",5),p.cc(1,"div",63),p.cc(2,"div",64),p.qc("click",function(){p.Uc(e);const t=p.uc(3);return t.changeStage(t.Stage.Initial)}),p.bc(),p.bc(),p.ac(3),p.gc(4,65),p.Zb(),p.bc()}}function fe(e,t){if(1&e&&(p.cc(0,"div",5),p.gc(1,66),p.bc()),2&e){const e=p.uc(3);p.Ib(1),p.kc(e.categoryName),p.hc(1)}}function _e(e,t){1&e&&(p.cc(0,"div",38),p.cc(1,"div",39),p.Xb(2,"div",40),p.bc(),p.cc(3,"div",41),p.gc(4,67),p.bc(),p.bc())}function ve(e,t){if(1&e&&(p.cc(0,"div",38),p.cc(1,"div",39),p.Xb(2,"div",40),p.bc(),p.cc(3,"div",41),p.gc(4,68),p.bc(),p.bc()),2&e){const e=p.uc(3);p.Ib(4),p.kc(e.isSubcategoryError),p.hc(4)}}function ye(e,t){if(1&e){const e=p.dc();p.cc(0,"div",69),p.dd(1),p.cc(2,"div",70),p.qc("click",function(){p.Uc(e);const i=t.index;return p.uc(3).removeSubcategory(i)}),p.bc(),p.bc()}if(2&e){const e=t.$implicit;p.Ib(1),p.fd(" ",e," ")}}function ke(e,t){if(1&e){const e=p.dc();p.cc(0,"button",71),p.qc("click",function(){p.Uc(e);const t=p.uc(3);return t.changeStage(t.Stage.Initial)}),p.gc(1,72),p.bc()}}function Ie(e,t){if(1&e){const e=p.dc();p.cc(0,"button",73),p.qc("click",function(){return p.Uc(e),p.uc(3).saveChanges()}),p.cc(1,"div",26),p.gc(2,74),p.bc(),p.cc(3,"div",28),p.Xb(4,"div",29),p.Xb(5,"div",30),p.Xb(6,"div",31),p.bc(),p.bc()}if(2&e){const e=p.uc(3);p.Dc("disabled",e.isSaving)}}function we(e,t){if(1&e){const e=p.dc();p.ac(0),p.bd(1,ge,5,0,"div",54),p.bd(2,fe,2,1,"div",54),p.Xb(3,"br"),p.Xb(4,"br"),p.cc(5,"div",32),p.cc(6,"div",55),p.gc(7,56),p.bc(),p.cc(8,"cu-tags-input",57,58),p.qc("tagsChanged",function(t){return p.Uc(e),p.uc(2).manageSubcategories(t)})("tagChanging",function(t){return p.Uc(e),p.uc(2).checkSubcategoryName(t)})("statusError",function(t){return p.Uc(e),p.uc(2).handleStatusError(t)}),p.bc(),p.bd(10,_e,5,0,"div",24),p.bd(11,ve,5,1,"div",24),p.cc(12,"div",59),p.bd(13,ye,3,1,"div",60),p.bc(),p.bc(),p.bd(14,ke,2,0,"button",61),p.bd(15,Ie,7,1,"button",62),p.Zb()}if(2&e){const e=p.uc(2);p.Ib(1),p.Dc("ngIf",!e.categoryId),p.Ib(1),p.Dc("ngIf",e.categoryId),p.Ib(3),p.Dc("ngClass",p.Hc(15,ee,e.subcategoryError)),p.Ib(3),p.Dc("tags",e.subcategoryList)("alwaysShowInput",!0)("buttonText",e.addListText)("maxlength",80)("cssClass","cu-create-category__lists-add")("error",e.newSubcategoryNameError),p.Ib(2),p.Dc("ngIf",e.subcategoryError),p.Ib(1),p.Dc("ngIf",e.isSubcategoryError),p.Ib(2),p.Dc("ngForOf",e.subcategoryList)("ngForTrackBy",e.trackByValue),p.Ib(1),p.Dc("ngIf",!e.categoryId),p.Ib(1),p.Dc("ngIf",e.categoryId)}}const Te=function(){return[]},xe=function(e,t){return{members:e,parentMembers:t}};function Ce(e,t){if(1&e){const e=p.dc();p.ac(0),p.cc(1,"div",5),p.cc(2,"div",63),p.cc(3,"div",64),p.qc("click",function(){p.Uc(e);const t=p.uc(2);return t.changeStage(t.Stage.Initial)}),p.bc(),p.bc(),p.ac(4),p.gc(5,75),p.Zb(),p.bc(),p.cc(6,"cu-privacy-settings",76),p.qc("inviteUsers",function(t){return p.Uc(e),p.uc(2).inviteUsers(t)})("addUser",function(t){return p.Uc(e),p.uc(2).addUser(t)})("removeUsers",function(t){return p.Uc(e),p.uc(2).removeUsers(t)})("updateUsers",function(t){return p.Uc(e),p.uc(2).updateUsers(t)})("changePrivate",function(t){return p.Uc(e),p.uc(2).changePrivate(t)}),p.vc(7,"async"),p.vc(8,"async"),p.vc(9,"async"),p.vc(10,"async"),p.vc(11,"async"),p.vc(12,"async"),p.vc(13,"async"),p.vc(14,"async"),p.vc(15,"async"),p.bc(),p.cc(16,"button",71),p.qc("click",function(){p.Uc(e);const t=p.uc(2);return t.changeStage(t.Stage.Initial)}),p.gc(17,77),p.bc(),p.Zb()}if(2&e){const e=p.uc(2);let t=null;p.Ib(6),p.Dc("item",e.privacy)("parentItem",p.wc(7,12,e.parentItem$))("meUser",p.wc(8,14,e.user$))("ownerId",(null==(t=p.wc(9,16,e.user$))?null:t.id)+"")("allMembers",p.wc(10,18,e.members$))("membersData",p.Ic(31,xe,null==e.privacy||null==e.privacy.membersData?null:e.privacy.membersData.members,e.privacy.private?p.Gc(30,Te):null==e.privacy?null:e.privacy.membersData.parentMembers))("guestInfo",p.wc(11,20,e.guestInfo$))("teamPlan",p.wc(12,22,e.teamPlan$))("allowEditPrivacy",!0)("upgradeLink",p.wc(13,24,e.upgradeLink$))("canAddGuestsTeam",p.wc(14,26,e.canAddGuestsTeam$))("canAddGuestsTeamText",p.wc(15,28,e.canAddGuestsTeamText$))}}function Oe(e,t){if(1&e){const e=p.dc();p.cc(0,"div",5),p.cc(1,"div",63),p.cc(2,"div",64),p.qc("click",function(){p.Uc(e);const t=p.uc(3);return t.changeStage(t.Stage.Initial)}),p.bc(),p.bc(),p.ac(3),p.gc(4,92),p.Zb(),p.bc()}}function Se(e,t){if(1&e&&(p.cc(0,"div",5),p.gc(1,93),p.bc()),2&e){const e=p.uc(3);p.Ib(1),p.kc((e.projectToEdit||e.subcategoryToEdit).name),p.hc(1)}}function De(e,t){if(1&e){const e=p.dc();p.cc(0,"div",85),p.qc("click",function(){return p.Uc(e),p.uc(3).setStatuses("space")}),p.gc(1,94),p.bc()}if(2&e){const e=p.uc(3);p.Ob("cu-create-category__statuses-type_active","space"===e.statusesType)}}function Ae(e,t){if(1&e){const e=p.dc();p.cc(0,"div",85),p.qc("click",function(){return p.Uc(e),p.uc(3).setStatuses("folder")}),p.gc(1,95),p.bc()}if(2&e){const e=p.uc(3);p.Ob("cu-create-category__statuses-type_active","folder"===e.statusesType)}}function je(e,t){if(1&e&&(p.ac(0),p.dd(1),p.Zb()),2&e){const e=p.uc(3);p.Ib(1),p.ed(e.currentPreset)}}function Ne(e,t){1&e&&(p.ac(0),p.gc(1,96),p.Zb())}function Ee(e,t){if(1&e){const e=p.dc();p.ac(0),p.cc(1,"cu-status-template",105),p.qc("onSave",function(){return p.Uc(e),p.uc(4).updateTemplate()})("onClick",function(){p.Uc(e);const i=t.$implicit;return p.uc(4).populatePresetStatuses(i.name,!0)})("onStartDelete",function(){p.Uc(e);const i=t.$implicit;return p.uc(4).openStatusTemplateDeleteConfirm(i)})("onRename",function(i){p.Uc(e);const a=t.$implicit;return p.uc(4).renameTemplate(i,a)}),p.vc(2,"async"),p.bc(),p.Zb()}if(2&e){const e=t.$implicit,i=p.uc(4);p.Ib(1),p.Dc("template",e)("active",i.currentPreset===e.name)("templates",i.templates)("moreTemplates",i.moreTemplates)("templateSaveNeeded",p.wc(2,6,i.templateSaveNeeded$))("modifier","status-template_vertical")}}function $e(e,t){if(1&e){const e=p.dc();p.cc(0,"div",106),p.qc("click",function(){return p.Uc(e),p.uc(4).enterTemplateName()}),p.dd(1," + "),p.ac(2),p.gc(3,107),p.Zb(),p.bc()}}function Pe(e,t){if(1&e){const e=p.dc();p.cc(0,"div",108),p.cc(1,"input",109,110),p.qc("ngModelChange",function(t){return p.Uc(e),p.uc(4).templateName=t}),p.bc(),p.cc(3,"div",111),p.dd(4),p.bc(),p.bc()}if(2&e){const e=p.uc(4);p.Ib(1),p.Dc("ngModel",e.templateName),p.Ib(3),p.fd(" ",e.errMsg," ")}}function Le(e,t){if(1&e){const e=p.dc();p.ac(0),p.cc(1,"div",97),p.cc(2,"div",98),p.ac(3),p.gc(4,99),p.Zb(),p.dd(5),p.bc(),p.cc(6,"div",100),p.qc("click",function(){return p.Uc(e),p.uc(3).enterTemplateName()}),p.Xb(7,"div",101),p.bc(),p.bc(),p.cc(8,"div",102),p.bd(9,Ee,3,8,"ng-container",18),p.bc(),p.bd(10,$e,4,0,"div",103),p.bd(11,Pe,5,2,"div",104),p.Zb()}if(2&e){const e=p.uc(3);p.Ib(5),p.fd(" (",e.templates.length,") "),p.Ib(4),p.Dc("ngForOf",e.templates)("ngForTrackBy",e.trackById),p.Ib(1),p.Dc("ngIf",!e.addingTemplate),p.Ib(1),p.Dc("ngIf",e.addingTemplate)}}function Ue(e,t){1&e&&p.Xb(0,"div",117)}const ze=function(e){return{background:e,cursor:"inherit"}},Me=function(e){return{color:e,cursor:"inherit"}};function Re(e,t){if(1&e&&(p.cc(0,"div",113),p.Xb(1,"div",114),p.cc(2,"div",115),p.dd(3),p.bd(4,Ue,1,0,"div",116),p.bc(),p.bc()),2&e){const e=t.$implicit,i=p.uc(4);p.Ib(1),p.Dc("ngStyle",p.Hc(4,ze,e.color)),p.Ib(1),p.Dc("ngStyle",p.Hc(6,Me,e.color)),p.Ib(1),p.fd(" ",e.status," "),p.Ib(1),p.Dc("ngIf",e.type===i.StatusTypes.Done)}}function Ge(e,t){if(1&e&&(p.ac(0),p.bd(1,Re,5,8,"div",112),p.Zb()),2&e){const e=p.uc(3);p.Ib(1),p.Dc("ngForOf",e.parentStatuses)("ngForTrackBy",e.trackByStatus)}}function Fe(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-status-badge",135),p.qc("handleStatusChange",function(t){return p.Uc(e),p.uc(5).handleStatusChange(t)})("handleStatusKeydown",function(t){return p.Uc(e),p.uc(5).handleStatusKeydown(t)})("closeOtherPickers",function(t){return p.Uc(e),p.uc(5).closeOtherPickers(t)})("colorChanged",function(){return p.Uc(e),p.uc(5).templateSaveNeeded$.next(!0)}),p.bc()}if(2&e){const e=t.$implicit,i=t.index,a=t.count,c=t.last,n=p.uc(5);p.Dc("status",e)("canDrag",!1)("canDelete",!1)("last",c)("i",i)("c",a)("PRESET_COLORS",n.PRESET_COLORS)("errorIndex",n.errorIndex)("modifier","cu-status-badge_full-width")}}function Ve(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-status-badge",136),p.qc("confirmRemoveStatus",function(t){return p.Uc(e),p.uc(5).confirmRemoveStatus(t)})("handleStatusChange",function(t){return p.Uc(e),p.uc(5).handleStatusChange(t)})("handleStatusKeydown",function(t){return p.Uc(e),p.uc(5).handleStatusKeydown(t)})("closeOtherPickers",function(t){return p.Uc(e),p.uc(5).closeOtherPickers(t)})("colorChanged",function(){return p.Uc(e),p.uc(5).templateSaveNeeded$.next(!0)}),p.vc(1,"async"),p.bc()}if(2&e){const e=t.$implicit,i=t.index,a=t.count,c=p.uc(5);p.Dc("canDelete",!p.wc(1,9,c.cantDelete$))("status",e)("last",!1)("PRESET_COLORS",c.PRESET_COLORS)("i",i+(null==c.statusListOpen?null:c.statusListOpen.length))("c",a+(null==c.statusListOpen?null:c.statusListOpen.length))("errorIndex",c.errorIndex)("isNewStatus",c.isNewStatus)("modifier","cu-status-badge_full-width")}}function qe(e,t){1&e&&(p.cc(0,"div",137),p.cc(1,"p"),p.ac(2),p.gc(3,138),p.Zb(),p.cc(4,"a",139),p.gc(5,140),p.bc(),p.bc(),p.bc())}function Xe(e,t){if(1&e){const e=p.dc();p.ac(0),p.cc(1,"div",118),p.ac(2),p.gc(3,132),p.Zb(),p.Xb(4,"div",133),p.bc(),p.bd(5,Fe,1,9,"cu-status-badge",134),p.cc(6,"div",126),p.qc("dragulaModelChange",function(t){p.Uc(e);const i=p.uc(4);return i.changeStatuses(t,i.StatusTypes.Unstarted)}),p.bd(7,Ve,2,11,"cu-status-badge",127),p.bd(8,qe,6,0,"div",128),p.bc(),p.Zb()}if(2&e){const e=p.uc(4);p.Ib(4),p.Dc("tooltipLifeTime",2e4)("tooltipAllowHtmlRememberToEscapeXss",!0),p.Ib(1),p.Dc("ngForOf",e.statusListOpen)("ngForTrackBy",e.trackByStatus),p.Ib(1),p.Dc("dragula",e.STATUS_BAG_NAME)("dragulaModel",e.statusListUnstarted),p.Ib(1),p.Dc("ngForOf",e.statusListUnstarted)("ngForTrackBy",e.trackByStatus),p.Ib(1),p.Dc("ngIf",!(null!=e.statusListUnstarted&&e.statusListUnstarted.length)&&e.showStatusDropZone)}}function Be(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-status-badge",142),p.qc("handleStatusChange",function(t){return p.Uc(e),p.uc(5).handleStatusChange(t)})("handleStatusKeydown",function(t){return p.Uc(e),p.uc(5).handleStatusKeydown(t)})("closeOtherPickers",function(t){return p.Uc(e),p.uc(5).closeOtherPickers(t)})("colorChanged",function(){return p.Uc(e),p.uc(5).templateSaveNeeded$.next(!0)}),p.bc()}if(2&e){const e=t.$implicit,i=t.index,a=t.count,c=t.last,n=p.uc(5);p.Dc("status",e)("canDrag",!1)("canDelete",!1)("last",c)("PRESET_COLORS",n.PRESET_COLORS)("i",i+(null==n.statusListUnstarted?null:n.statusListUnstarted.length))("c",a+(null==n.statusListUnstarted?null:n.statusListUnstarted.length))("errorIndex",n.errorIndex)("modifier","cu-status-badge_full-width")}}function Ke(e,t){if(1&e&&(p.ac(0),p.bd(1,Be,1,9,"cu-status-badge",141),p.Zb()),2&e){const e=p.uc(4);p.Ib(1),p.Dc("ngForOf",e.statusListOpen)("ngForTrackBy",e.trackByStatus)}}function We(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-status-badge",143),p.qc("confirmRemoveStatus",function(t){return p.Uc(e),p.uc(4).confirmRemoveStatus(t)})("handleStatusChange",function(t){return p.Uc(e),p.uc(4).handleStatusChange(t)})("handleStatusKeydown",function(t){return p.Uc(e),p.uc(4).handleStatusKeydown(t)})("closeOtherPickers",function(t){return p.Uc(e),p.uc(4).closeOtherPickers(t)})("colorChanged",function(){return p.Uc(e),p.uc(4).templateSaveNeeded$.next(!0)}),p.vc(1,"async"),p.bc()}if(2&e){const e=t.$implicit,i=t.index,a=t.count,c=t.last,n=p.uc(4);p.Dc("status",e)("last",c)("canDelete",!p.wc(1,9,n.cantDelete$))("PRESET_COLORS",n.PRESET_COLORS)("i",i+(null==n.statusListUnstarted?null:n.statusListUnstarted.length)+(null==n.statusListOpen?null:n.statusListOpen.length))("c",a+(null==n.statusListUnstarted?null:n.statusListUnstarted.length)+(null==n.statusListOpen?null:n.statusListOpen.length))("errorIndex",n.errorIndex)("isNewStatus",n.isNewStatus)("modifier","cu-status-badge_full-width")}}function He(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-status-badge",136),p.qc("confirmRemoveStatus",function(t){return p.Uc(e),p.uc(4).confirmRemoveStatus(t)})("handleStatusChange",function(t){return p.Uc(e),p.uc(4).handleStatusChange(t)})("handleStatusKeydown",function(t){return p.Uc(e),p.uc(4).handleStatusKeydown(t)})("closeOtherPickers",function(t){return p.Uc(e),p.uc(4).closeOtherPickers(t)})("colorChanged",function(){return p.Uc(e),p.uc(4).templateSaveNeeded$.next(!0)}),p.vc(1,"async"),p.bc()}if(2&e){const e=t.$implicit,i=t.index,a=t.count,c=p.uc(4);p.Dc("canDelete",!p.wc(1,9,c.cantDelete$))("status",e)("last",!1)("PRESET_COLORS",c.PRESET_COLORS)("i",i+(null==c.statusListUnstarted?null:c.statusListUnstarted.length)+(null==c.statusListOpen?null:c.statusListOpen.length)+(null==c.statusListCustom?null:c.statusListCustom.length))("c",a+(null==c.statusListUnstarted?null:c.statusListUnstarted.length)+(null==c.statusListOpen?null:c.statusListOpen.length)+(null==c.statusListCustom?null:c.statusListCustom.length))("errorIndex",c.errorIndex)("isNewStatus",c.isNewStatus)("modifier","cu-status-badge_full-width")}}function Ze(e,t){1&e&&(p.cc(0,"div",137),p.cc(1,"p"),p.ac(2),p.gc(3,144),p.Zb(),p.cc(4,"a",145),p.gc(5,146),p.bc(),p.bc(),p.bc())}function Qe(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-status-badge",147),p.qc("handleStatusChange",function(t){return p.Uc(e),p.uc(4).handleStatusChange(t)})("handleStatusKeydown",function(t){return p.Uc(e),p.uc(4).handleStatusKeydown(t)})("closeOtherPickers",function(t){return p.Uc(e),p.uc(4).closeOtherPickers(t)})("colorChanged",function(){return p.Uc(e),p.uc(4).templateSaveNeeded$.next(!0)}),p.bc()}if(2&e){const e=t.$implicit,i=t.index,a=t.count,c=t.last,n=p.uc(4);p.Dc("status",e)("canDrag",!1)("canDelete",!1)("canEditColor",!1)("last",c)("PRESET_COLORS",n.PRESET_COLORS)("i",i+(null==n.statusListUnstarted?null:n.statusListUnstarted.length)+(null==n.statusListOpen?null:n.statusListOpen.length)+(null==n.statusListCustom?null:n.statusListCustom.length)+(null==n.statusListDone?null:n.statusListDone.length))("c",a+(null==n.statusListUnstarted?null:n.statusListUnstarted.length)+(null==n.statusListOpen?null:n.statusListOpen.length)+(null==n.statusListCustom?null:n.statusListCustom.length)+(null==n.statusListDone?null:n.statusListDone.length))("errorIndex",n.errorIndex)("modifier","cu-status-badge_full-width")}}function Je(e,t){if(1&e){const e=p.dc();p.ac(0),p.bd(1,Xe,9,9,"ng-container",4),p.vc(2,"async"),p.cc(3,"div",118),p.ac(4),p.gc(5,119),p.Zb(),p.Xb(6,"div",120),p.bc(),p.bd(7,Ke,2,2,"ng-container",4),p.vc(8,"async"),p.cc(9,"div",121),p.qc("dragulaModelChange",function(t){p.Uc(e);const i=p.uc(3);return i.changeStatuses(t,i.StatusTypes.Custom)}),p.bd(10,We,2,11,"cu-status-badge",122),p.bc(),p.cc(11,"cu-tags-input",123),p.qc("tagsChanged",function(t){return p.Uc(e),p.uc(3).manageStatuses(t)})("statusError",function(t){return p.Uc(e),p.uc(3).handleStatusError(t)})("click",function(){return p.Uc(e),p.uc(3).handleStatusError("hideError")}),p.vc(12,"pluckFromArray"),p.bc(),p.cc(13,"div",118),p.ac(14),p.gc(15,124),p.Zb(),p.Xb(16,"div",125),p.bc(),p.cc(17,"div",126),p.qc("dragulaModelChange",function(t){p.Uc(e);const i=p.uc(3);return i.changeStatuses(t,i.StatusTypes.Done)}),p.bd(18,He,2,11,"cu-status-badge",127),p.bd(19,Ze,6,0,"div",128),p.bc(),p.cc(20,"div",118),p.ac(21),p.gc(22,129),p.Zb(),p.Xb(23,"div",130),p.bc(),p.bd(24,Qe,1,10,"cu-status-badge",131),p.Zb()}if(2&e){const e=p.uc(3);let t=null,i=null;p.Ib(1),p.Dc("ngIf",null==(t=p.wc(2,24,e.sharedData.compatCurrentTeam$))?null:t.unstarted_status_group),p.Ib(5),p.Dc("tooltipLifeTime",2e4)("tooltipAllowHtmlRememberToEscapeXss",!0),p.Ib(1),p.Dc("ngIf",!(null!=(i=p.wc(8,26,e.sharedData.compatCurrentTeam$))&&i.unstarted_status_group)),p.Ib(2),p.Dc("dragula",e.STATUS_BAG_NAME)("dragulaModel",e.statusListCustom),p.Ib(1),p.Dc("ngForOf",e.statusListCustom)("ngForTrackBy",e.trackByStatus),p.Ib(1),p.Dc("tags",p.xc(12,28,e.statusList,"status"))("maxlength",e.MAX_LENGTH)("error",e.validateErrors.statusTakenError||e.validateErrors.maxlengthError)("errorIndex",e.errorIndex)("modifier","status-add_full-width"),p.Ib(5),p.Dc("tooltipLifeTime",2e4)("tooltipAllowHtmlRememberToEscapeXss",!0),p.Ib(1),p.Dc("dragula",e.STATUS_BAG_NAME)("dragulaModel",e.statusListDone),p.Ib(1),p.Dc("ngForOf",e.statusListDone)("ngForTrackBy",e.trackByStatus),p.Ib(1),p.Dc("ngIf",!(null!=e.statusListDone&&e.statusListDone.length)&&e.showStatusDropZone),p.Ib(4),p.Dc("tooltipLifeTime",2e4)("tooltipAllowHtmlRememberToEscapeXss",!0),p.Ib(1),p.Dc("ngForOf",e.statusListClosed)("ngForTrackBy",e.trackByStatus)}}function Ye(e,t){1&e&&(p.cc(0,"div",148),p.cc(1,"div",39),p.Xb(2,"div",40),p.bc(),p.cc(3,"div",41),p.gc(4,149),p.bc(),p.bc())}function et(e,t){1&e&&(p.cc(0,"div",111),p.gc(1,155),p.bc())}function tt(e,t){1&e&&(p.cc(0,"div",111),p.gc(1,156),p.bc())}function it(e,t){1&e&&(p.cc(0,"div",111),p.gc(1,157),p.bc())}function at(e,t){if(1&e&&(p.cc(0,"div",150,151),p.cc(2,"div",152),p.Xb(3,"div",153),p.bc(),p.bd(4,et,2,0,"div",154),p.bd(5,tt,2,0,"div",154),p.bd(6,it,2,0,"div",154),p.bc()),2&e){const e=p.uc(3);p.Ib(4),p.Dc("ngIf",e.validateErrors.maxlengthError),p.Ib(1),p.Dc("ngIf",e.validateErrors.statusTakenError),p.Ib(1),p.Dc("ngIf",e.validateErrors.statusNameBlank)}}function ct(e,t){if(1&e){const e=p.dc();p.cc(0,"button",158),p.qc("click",function(){p.Uc(e);const t=p.uc(3);return t.changeStage(t.Stage.Initial)}),p.gc(1,159),p.bc()}if(2&e){const e=p.uc(3);p.Dc("disabled",e.validateErrors.customStatus)}}function nt(e,t){if(1&e){const e=p.dc();p.cc(0,"button",158),p.qc("click",function(){return p.Uc(e),p.uc(3).editOverrideStatuses()}),p.gc(1,160),p.bc()}if(2&e){const e=p.uc(3);p.Dc("disabled",e.isSaving)}}function ot(e,t){if(1&e){const e=p.dc();p.ac(0),p.bd(1,Oe,5,0,"div",54),p.bd(2,Se,2,1,"div",54),p.cc(3,"div",78),p.cc(4,"a",79),p.gc(5,80),p.bc(),p.bc(),p.cc(6,"div",81),p.cc(7,"div",82),p.bd(8,De,2,2,"div",83),p.bd(9,Ae,2,2,"ng-template",null,84,p.cd),p.cc(11,"div",85),p.qc("click",function(){return p.Uc(e),p.uc(2).setStatuses("custom")}),p.bd(12,je,2,1,"ng-container",0),p.bd(13,Ne,2,0,"ng-template",null,86,p.cd),p.bc(),p.bd(15,Le,12,5,"ng-container",4),p.bc(),p.cc(16,"div",87),p.bd(17,Ge,2,2,"ng-container",4),p.bd(18,Je,25,31,"ng-container",4),p.bc(),p.bc(),p.bd(19,Ye,5,0,"div",88),p.cc(20,"div",89),p.bd(21,at,7,3,"div",90),p.bc(),p.bd(22,ct,2,1,"button",91),p.bd(23,nt,2,1,"button",91),p.Zb()}if(2&e){const e=p.Rc(10),t=p.Rc(14),i=p.uc(2);p.Ib(1),p.Dc("ngIf",!i.projectToEdit&&!i.subcategoryToEdit),p.Ib(1),p.Dc("ngIf",i.projectToEdit||i.subcategoryToEdit),p.Ib(6),p.Dc("ngIf",!i.subcategoryToEdit||i.subcategoryToEdit&&(!(null!=i.parentCategory&&i.parentCategory.override_statuses)||(null==i.parentCategory?null:i.parentCategory.hidden)))("ngIfElse",e),p.Ib(3),p.Ob("cu-create-category__statuses-type_active","custom"===i.statusesType),p.Ib(1),p.Dc("ngIf",i.currentPreset)("ngIfElse",t),p.Ib(3),p.Dc("ngIf","custom"===i.statusesType),p.Ib(2),p.Dc("ngIf","space"===i.statusesType||"folder"===i.statusesType),p.Ib(1),p.Dc("ngIf","custom"===i.statusesType),p.Ib(1),p.Dc("ngIf",i.validateErrors.customStatus||i.customStatusErr),p.Ib(2),p.Dc("ngIf",i.validateErrors.statusTakenError||i.validateErrors.maxlengthError||i.validateErrors.statusNameBlank),p.Ib(1),p.Dc("ngIf",!i.projectToEdit&&!i.subcategoryToEdit),p.Ib(1),p.Dc("ngIf",i.projectToEdit||i.subcategoryToEdit)}}function st(e,t){1&e&&(p.cc(0,"div",5),p.gc(1,165),p.bc())}function rt(e,t){1&e&&(p.cc(0,"div",5),p.gc(1,166),p.bc())}function lt(e,t){if(1&e&&(p.cc(0,"div"),p.bd(1,st,2,0,"div",54),p.vc(2,"async"),p.bd(3,rt,2,0,"div",54),p.vc(4,"async"),p.bc()),2&e){const e=p.uc(3);p.Ib(1),p.Dc("ngIf",!p.wc(2,2,e.onboardingJustFinished$)),p.Ib(2),p.Dc("ngIf",p.wc(4,4,e.onboardingJustFinished$))}}function ut(e,t){if(1&e){const e=p.dc();p.cc(0,"div"),p.cc(1,"div",5),p.cc(2,"div",63),p.cc(3,"div",64),p.qc("click",function(){p.Uc(e),p.uc();const t=p.Rc(10);return t.changeStage(t.Stage.Initial)}),p.bc(),p.bc(),p.ac(4),p.gc(5,167),p.Zb(),p.bc(),p.bc()}}function dt(e,t){if(1&e){const e=p.dc();p.cc(0,"div"),p.cc(1,"div",5),p.cc(2,"div",63),p.cc(3,"div",64),p.qc("click",function(){p.Uc(e),p.uc();const t=p.Rc(10);return t.changeStage(t.Stage.Initial)}),p.bc(),p.bc(),p.ac(4),p.gc(5,168),p.Zb(),p.bc(),p.bc()}}function mt(e,t){if(1&e){const e=p.dc();p.cc(0,"div"),p.bd(1,lt,5,6,"div",4),p.bd(2,ut,6,0,"div",4),p.bd(3,dt,6,0,"div",4),p.cc(4,"div",7),p.cc(5,"div",10),p.qc("click",function(){p.Uc(e);const t=p.uc(2);return t.changeStage(t.Stage.Initial)}),p.gc(6,161),p.bc(),p.cc(7,"div",8),p.gc(8,162),p.bc(),p.bc(),p.cc(9,"load-template",163,164),p.qc("onSelectTemplate",function(t){return p.Uc(e),p.uc(2).templateSelected(t)})("onDone",function(){return p.Uc(e),p.uc(2).clearCategories()})("onOverlimit",function(){return p.Uc(e),p.uc(2).hidePaywallTemplate=!1}),p.vc(11,"async"),p.bc(),p.bc()}if(2&e){const e=p.Rc(10),t=p.uc(2),i=p.Rc(6);p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.Initial),p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.ImportItems),p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.DueDates),p.Ib(6),p.Dc("project",t.projectForNewFolderTeamplate||p.wc(11,8,t.sharedDataService.compatCurrentProject$))("showStageSelector",!0)("preselectedTemplate",t.selectedTemplate)("sharingTemplate",t.selectedTemplate&&!t.selectedTemplate.systemTemplate?i:null)("forCreateCategoryModal",!0)}}function ht(e,t){if(1&e&&(p.ac(0),p.bd(1,be,39,11,"ng-container",4),p.bd(2,we,16,17,"ng-container",4),p.bd(3,Ce,18,34,"ng-container",4),p.bd(4,ot,24,15,"ng-container",4),p.bd(5,mt,12,10,"div",4),p.Zb()),2&e){const e=p.uc();p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.Initial),p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.Lists),p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.Visibility),p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.Statuses),p.Ib(1),p.Dc("ngIf",e.currentStage===e.Stage.Template)}}function pt(e,t){}function bt(e,t){if(1&e&&(p.cc(0,"div",169),p.Xb(1,"cu-paywall-popover",170),p.bc()),2&e){const e=p.uc();p.Ib(1),p.Dc("badge","")("title",e.paywallCommonStringsService.freePlanListLimitationText)("text",e.paywallCommonStringsService.freePlanListLimitationDescriptionText)("image","./assets/images/components/paywall-popover/personal-view.png")("upgradeButtonText",e.paywallCommonStringsService.upgradeToUnlimitedText)("emailSubject",e.paywallCommonStringsService.increasedListsPerSpaceText)("learnMore","https://docs.clickup.com/en/articles/3315031-limits-on-spaces-and-lists")}}function gt(e,t){if(1&e){const e=p.dc();p.cc(0,"cu-template-sharing",171),p.qc("onChangeVisibilityOption",function(t){return p.Uc(e),p.uc().changeVisibilityOption(t)})("onSetMembers",function(t){return p.Uc(e),p.uc().setMembers(t)})("onRemoveMember",function(t){return p.Uc(e),p.uc().removeMember(t)})("onEmitPublic",function(t){return p.Uc(e),p.uc().emitPublic(t)}),p.vc(1,"async"),p.vc(2,"async"),p.vc(3,"async"),p.bc()}if(2&e){const e=p.uc();let t=null;p.Dc("visibilityOption",e.visibilityOption)("role",null==(t=p.wc(1,10,e.sharedData.compatCurrentTeam$))?null:t.role)("type","space")("templateMembers",e.templateMembers)("members",e.shareMembers)("user",p.wc(2,12,e.sharedData.currentUser))("template",e.selectedTemplate)("isPublic",e.isPublic)("sharingLink",e.sharingLink)("showPublic",p.wc(3,14,e.showTemplatePublicSharing$))}}var ft=function(e){return e.Initial="initial",e.Template="template",e.Lists="lists",e.Statuses="statuses",e.Visibility="visibility",e}({});const _t=["Sprint 1","Design","Development","Backlog","Version 1.0","Briefs"];let vt=(()=>{class e extends k.c{constructor(e,t,i,a,c,s,l,u,d,m,h,b,g,f,v,y,k,I,w,T,x,C){super(a,c,s,b,l,u,d,m,h,t,g,f,v,y,k,w,T,x),this.categoryService=e,this.sharedDataService=i,this.store=y,this.action$=I,this.paywallCommonStringsService=C,this.STATUS_BAG_NAME="cc-statuses-bag",this.PARENT_STATUS_BAG_NAME="ps-statuses-bag",this.categoryName="",this.subcategoryList=["List"],this.subcategoryError=!1,this.newSubcategoryNameError=!1,this.nameError="",this.statusesType="custom",this.customStatusErr=!1,this.isSaving=!1,this.hidePaywallTemplate=!0,this.Stage=ft,this.currentStage=ft.Initial,this.exampleListNames=[..._t],this.user$=this.store.select(n.getUser),this.members$=this.store.select(n.getMembers),this.guestInfo$=this.store.select(_.d),this.teamPlan$=this.store.select(n.getTeamPlan),this.upgradeLink$=this.store.pipe(Object(o.select)(n.getTeam),Object(r.a)(e=>e?[window.location.origin,e.id,"settings","billing"]:void 0)),this.privacy={private:!1,membersData:{members:[],parentMembers:[]}},this.parent="Space",this.showStatusDropZone=!0,this.onboardingJustFinished$=this.store.select(n.onboardingJustFinishedSelector),this.canAddGuestsTeam$=this.store.select(n.canAddGuestsTeam),this.canAddGuestsTeamText$=this.store.select(n.canAddGuestsTeamText),this.showTemplatePublicSharing$=this.store.pipe(Object(o.select)(n.getShowTemplatePublicSharing)),this.onCreate=new p.o,this.onCreateNew=new p.o,this.onEditProject=new p.o,this.onEditSubcategory=new p.o,this.addListText=$localize`:@@common_add-list:Add List`,this.trackByValue=(e,t)=>t}ngOnInit(){this.dragula.find(this.STATUS_BAG_NAME)&&this.dragula.destroy(this.STATUS_BAG_NAME),this.dragula.createGroup(this.STATUS_BAG_NAME,{direction:"vertical",moves:(e,t,i)=>!!i.className.indexOf&&-1!==i.className.indexOf(this.DRAG_CSS_CLASS)}),this.dragula.dragend().pipe(Object(l.a)(this.destroy$)).subscribe(()=>{this.statusList=this.helpers.removeDublicates(this.statusList,"status"),this.templateSaveNeeded$.next(!0)}),this.dragula.over().pipe(Object(l.a)(this.destroy$)).subscribe(e=>{this.showStatusDropZone=!e.container.classList.contains("create-project-modal__statuses-container_done")}),(this.subcategoryToEdit&&this.parentCategory.override_statuses&&!this.parentCategory.hidden?this.dataService.getCategoryStatuses(this.parentCategory.id):this.dataService.getProjectStatuses(this.projectId)).subscribe(e=>{this.parentStatuses=[...e],this.parentStatusesClosed=e.filter(e=>e.type===b.g.Closed),this.templates[0].statuses=[...e]}),this.statusesType="space",this.projectToEdit&&this.projectToEdit.override_statuses&&(this.statusesType="custom"),this.subcategoryToEdit&&(this.statusesType=this.parentCategory.override_statuses&&!this.parentCategory.hidden?"folder":"space","folder"===this.statusesType&&(this.parent="Folder",this.templates[0]=Object.assign(Object.assign({},this.templates[0]),{name:"Folder",id:"folder"})),this.subcategoryToEdit.override_statuses&&(this.statusesType="custom")),this.populateCustomStatuses(),this.effects.register(this.enterprisePermissions$.pipe(Object(u.a)(1)),e=>{e&&!e.manage_statuses||this.dataService.getTeamStatusTemplates(this.sharedData.compatCurrentTeam.id).subscribe(e=>{this.addTemplates(e.templates,!1)})}),this.projectToEdit||this.subcategoryToEdit?this.changeStage(ft.Statuses):this.categoryId&&(this.categoryName=this.categoryName||this.navService.getCategoryById(this.categoryId).name,this.subcategoryList=[],this.changeStage(ft.Lists)),this.parentItem$=this.store.pipe(Object(o.select)(Object(n.getProjectById)(this.projectId))),this.store.dispatch(new v.Zf(this.sharedDataService.compatCurrentTeam.id)),this.action$.pipe(Object(y.d)(v.hm),Object(d.a)(e=>e&&e.extra&&e.extra.emails),Object(l.a)(this.destroy$)).subscribe(e=>{e.extra.emails.map(t=>(e.data.members||[]).find(e=>e.user.email===t)).forEach(t=>{this.addUser({member:t,permission:e.extra.permission})})}),this.store.pipe(Object(o.select)(Object(_.f)(this.projectId)),Object(l.a)(this.destroy$)).subscribe(e=>{this.privacy.membersData=Object.assign(Object.assign({},this.privacy.membersData),{parentMembers:e})})}ngAfterViewInit(){this.categoryInput&&(this.categoryInput.nativeElement.focus(),this.renderer.listen(this.categoryInput.nativeElement,"keyup",this.preventEnter.bind(this)),this.renderer.listen(this.categoryInput.nativeElement,"keydown",this.preventEnter.bind(this)),this.renderer.listen(this.categoryInput.nativeElement,"keypress",this.preventEnter.bind(this)))}ngOnDestroy(){[this.STATUS_BAG_NAME,this.PARENT_STATUS_BAG_NAME].forEach(e=>{this.dragula.find(e)&&this.dragula.destroy(e)}),this.blurListener&&this.blurListener(),this.destroy$.next()}manageSubcategories(e){this.subcategoryList=e,this.subcategoryError=!this.subcategoryList.length,this.isSubcategoryError=null,this.updateExampleLists()}addExampleList(e){this.subcategoryList=[...this.subcategoryList,e],this.updateExampleLists()}checkSubcategoryName(e){this.navService.isSectionNameExists(e,this.categoryId)||this.subcategoryList.includes(e)?(this.newSubcategoryNameError=!0,this.isSubcategoryError=$localize`:@@errors_list-name-exists:A List already exists with this name.`):this.newSubcategoryNameError=!1}handleStatusError(e,t){this.isSubcategoryError="statusExist"===e?$localize`:@@errors_list-name-exists:A List already exists with this name.`:null,super.handleStatusError(e,t)}removeSubcategory(e){this.subcategoryList.splice(e,1),this.updateExampleLists()}setStatuses(e){this.statusList="space"===e?this.statusList:[],this.statusesType=e,"custom"===e&&this.populateCustomStatuses(),this.validateErrors.customStatus=!1}clearNameError(){this.nameError=""}editOverrideStatuses(){const e="custom"===this.statusesType,t={override_statuses:e};if(e){if("custom"===this.statusesType&&!this.statusList.length)return void(this.customStatusErr=!0);Object.assign(t,{statuses:this.prepareProjectStatuses()})}Object.keys(this.statusChangeMap).forEach(e=>{-1===this.statusList.map(e=>e.status).indexOf(this.statusChangeMap[e])&&delete this.statusChangeMap[e]}),Object.keys(this.statusChangeMap).length&&(t.status_change_map=this.statusChangeMap),this.statusChangeMap={},this.isSaving=!0,this.projectToEdit?this.updateCategory(t):this.updateSubcategory(t)}updateCategory(e){this.dataService.editCategory(this.projectToEdit.id,e).subscribe(t=>{t.conflict?(this.navService.onConflictDetected.emit({project:this.projectToEdit,new:t.new,old:t.old,payload:e,type:"editProject",closed:t.closed}),this.isSaving=!1):(this.dataService.getCategoryById(this.projectToEdit.id).pipe(Object(m.a)(()=>this.isSaving=!1)).subscribe(t=>{this.onEditProject.emit({project:t,changeMap:e.status_change_map})}),this.store.dispatch(new v.Qf(this.projectId)))},e=>{this.isSaving=!1})}updateSubcategory(e){this.dataService.editSubcategory(this.subcategoryToEdit.id,e).subscribe(t=>{if(t.conflict)this.navService.onConflictDetected.emit({subcategory:this.subcategoryToEdit,new:t.new,old:t.old,payload:e,type:"editSubcategory",closed:t.closed}),this.isSaving=!1;else{let i=Object.assign({},t.subcategory);e.statuses&&(i=Object.assign(Object.assign({},i),{statuses:e.statuses})),this.onEditSubcategory.emit({subcategory:i,changeMap:e.status_change_map}),this.store.dispatch(new v.Qf(t.subcategory.project_id)),this.store.dispatch(new v.Jf(t.subcategory.category,"status update")),this.store.dispatch(new v.nk(t.subcategory,t.subcategory.category,t.subcategory.project_id)),this.modalService.close()}},e=>{this.isSaving=!1})}saveChanges(){if(this.tagsinput&&this.tagsinput.addTag(this.tagsinput.input.nativeElement.innerText),this.subcategoryError=!this.subcategoryList.length,this.categoryId||this.categoryName&&this.categoryName.trim().length){if(!this.subcategoryError)if(this.categoryId)this.categoryId!==I.d?this.createSubcategories(this.categoryId):this.createFolderlessListItems();else{if("custom"===this.statusesType&&!this.statusList.length)return void(this.customStatusErr=!0);this.customStatusErr=!1,this.isSaving=!0;const e={name:this.categoryName,override_statuses:"custom"===this.statusesType,statuses:this.prepareProjectStatuses(!0),subcategories:this.subcategoryList.map(e=>({name:e})),private:this.privacy.private};this.dataService.createCategory(this.projectId,e.name,e).subscribe(e=>{this.store.dispatch(new v.Qj({item:e,type:w.e.Category})),this.isSaving=!1,e.private=this.privacy.private,this.privacy.membersData.members.forEach(t=>{this.store.dispatch(new v.s(e.id,this.projectId,t.user.id,t.permission_level))}),this.sharedData.compatCategoryList&&this.sharedData.compatCategoryList.push(e),this.categoryService.categoryCreated(e.id),this.onCreate.emit(e.id),this.onCreateNew.emit(e),this.store.dispatch(new v.Qf(this.projectId)),this.navService.setProjectOpenState(this.projectId,!0),this.router.navigate([this.sharedData.compatCurrentTeam.id,"v","l","f",e.id])},e=>{this.isSaving=!1,"CAT_014"===e.ECODE||"CAT_021"===e.ECODE||f.a.isCatReachedLimit(e.ECODE)?this.nameError=e.err.replace("Project ","Folder "):f.b.includes(e.ECODE)&&(this.hidePaywallTemplate=!1)})}}else this.nameError=$localize`:@@cu-create-category__error-msg_folder-name-required:Folder name is required!`}changeStage(e){if(this.currentStage===ft.Statuses){if(this.validate(),this.validateErrors.customStatus){if("custom"===this.statusesType)return;this.validateErrors.customStatus=!1}this.isNewStatus=!1}this.currentStage===ft.Lists&&(this.subcategoryError=0===this.subcategoryList.length,this.subcategoryError)||(this.currentStage=e)}updateEntityTemplate(e,t){this.templateService.editCategoryTemplate(e.id,Object.assign(Object.assign({},t),{template_name:e.name})).subscribe(t=>{this.selectedTemplate&&this.selectedTemplate.id===e.id&&(this.selectedTemplate=Object.assign(Object.assign({},this.selectedTemplate),t),this.sharingLink=Object(c.a)("space",this.selectedTemplate.id,this.selectedTemplate.public_key))}),this.changeDetector.detectChanges()}addUser({member:e,permission:t}){this.privacy.membersData=Object.assign(Object.assign({},this.privacy.membersData),{members:[...this.privacy.membersData.members,Object.assign(Object.assign({},e),{permission_level:t})]})}inviteUsers({emails:e,permission:t,role:i}){this.store.dispatch(new v.Cd(e,i,{projectId:this.projectId,emails:e,permission:t}))}removeUsers(e){this.privacy.membersData=Object.assign(Object.assign({},this.privacy.membersData),{members:this.privacy.membersData.members.filter(t=>!e.includes(t.user.id))})}updateUsers(e){function t(t){const i=e.find(e=>e.member.user.id===t.user.id);return i?Object.assign(Object.assign(Object.assign({},t),i.member),{permission_level:i.permission}):t}this.privacy.membersData=Object.assign(Object.assign({},this.privacy.membersData),{members:this.privacy.membersData.members.map(t),parentMembers:this.privacy.membersData.parentMembers.map(t)})}changePrivate(e){this.privacy=Object.assign(Object.assign({},this.privacy),{private:e})}clearCategories(){this.store.dispatch(new v.rb({projectId:this.sharedDataService.compatCurrentProject.id}))}openFolderTemplateModal(){this.store.select(Object(n.getProjectById)(this.projectId)).pipe(Object(u.a)(1)).subscribe(e=>{this.store.dispatch(new v.Oe({open:!0,parent:e,parentType:T.d.Space,initialType:T.d.Folder,fromNewFolder:!0}))})}preventEnter(e){e.which===g.a.ENTER&&(e.preventDefault(),this.tagsinput&&this.tagsinput.focus())}createFolderlessListItems(){this.isSaving=!0;const e=this.sharedData.compatCategoryList.find(e=>e.id===I.d)||I.H,t=this.subcategoryList.length>0?this.subcategoryList.length-1:0;this.action$.pipe(Object(y.d)(v.Ng),Object(h.a)(t),Object(l.a)(this.destroy$)).subscribe(()=>{this.isSaving=!1,this.onCreateNew.emit(e)});for(const i of this.subcategoryList)this.store.dispatch(new v.Jb({projectId:this.projectId,id:I.d,name:i,redirect:!1,renameOnInit:!1}))}createSubcategories(e){const t=[];for(const i of this.subcategoryList)t.push(this.dataService.createSubcategory(e,i));this.isSaving=!0,Object(s.a)(t).subscribe(t=>{this.categoryService.categoryCreated(e),this.onCreate.emit(e),this.dataService.getCategoryById(e).pipe(Object(m.a)(()=>this.isSaving=!1)).subscribe(e=>{this.onCreateNew.emit(e)}),this.store.dispatch(new v.Qf(this.projectId))},e=>{this.isSaving=!1,this.isSubcategoryError=e.err||$localize`:@@errors_unknown:Unknown error`})}populateCustomStatuses(){if("custom"===this.statusesType)if(this.projectToEdit&&this.projectToEdit.override_statuses||this.subcategoryToEdit&&this.subcategoryToEdit.override_statuses){if(this.projectToEdit&&this.projectToEdit.override_statuses&&!this.projectToEdit.statuses){const e=(this.projectToEdit.subcategories||[]).find(e=>!e.override_statuses&&e.statuses&&e.statuses.length);if(!e)return void this.dataService.getCategoryById(this.projectToEdit.id).subscribe(e=>{this.projectToEdit=e,this.populateCustomStatuses()});this.projectToEdit=Object.assign(Object.assign({},this.projectToEdit),{statuses:e.statuses})}this.statusList=(this.projectToEdit||this.subcategoryToEdit).statuses.map(e=>e);const e=this.checkForTemplate();this.currentPreset=e?e.name:null}else this.populatePresetStatuses()}updateExampleLists(){this.exampleListNames=_t.filter(e=>!this.subcategoryList.some(t=>t.toLowerCase()===e.toLowerCase()))}}return e.\u0275fac=function(t){return new(t||e)(p.Wb(x.a),p.Wb(C.a),p.Wb(O.a),p.Wb(S.a),p.Wb(D.c),p.Wb(O.a),p.Wb(A.a),p.Wb(A.h),p.Wb(j.a),p.Wb(p.m),p.Wb(p.H),p.Wb(N.a),p.Wb(E.a),p.Wb($.b),p.Wb(p.h),p.Wb(o.Store),p.Wb(p.t),p.Wb(y.a),p.Wb(P.a),p.Wb(L.a),p.Wb(a.b),p.Wb(U.a))},e.\u0275cmp=p.Qb({type:e,selectors:[["cu-create-category"]],viewQuery:function(e,t){if(1&e&&(p.jd(Q,1),p.jd(J,1)),2&e){let e;p.Qc(e=p.rc())&&(t.categoryInput=e.first),p.Qc(e=p.rc())&&(t.tagsinput=e.first)}},hostAttrs:[1,"cu-create-category"],inputs:{projectId:"projectId",projectForNewFolderTeamplate:"projectForNewFolderTeamplate",categoryId:"categoryId",projectToEdit:"projectToEdit",subcategoryToEdit:"subcategoryToEdit",parentCategory:"parentCategory"},outputs:{onCreate:"onCreate",onCreateNew:"onCreateNew",onEditProject:"onEditProject",onEditSubcategory:"onEditSubcategory"},features:[p.Hb([a.b]),p.Fb],decls:7,vars:2,consts:function(){let e,t,i,a,c,n,o,s,r,l,u,d,m,h,b,g,f,_,v,y,k,I,w,T,x,C,O,S,D,A,j,N,E,$,P,L,U,z,M,R,G,F,V,q,X,B,K,W,H,Z,Q,J,Y,ee,te,ie,ae,ce,ne,oe,se;return e=$localize`:@@common_create-folder␟dea052f2ccda49d0de6b5f91e50330a2525980d0␟610220637744852750: Create Folder `,t=$localize`:@@common_new␟6aa0944e1e88f326f92278269c69175ca0b8683e␟7122010347255310427: New `,i=$localize`:@@common_templates␟c33b4a8d9bf6a63e018a7251d10bf3aa57f907da␟5354252237085771228: Templates `,a=$localize`:@@common_lists␟04523a157c3c8f6ed99630005460a85f59977d0c␟5365643763207714630: Lists `,c=$localize`:@@common_share-folder-with␟a8d6b315189079618e3ac5729646413bbfbbe16d␟1054518579823591112: Share Folder with `,n=$localize`:@@common_task-statuses␟c9197784dffc1a09933ed9617f0a9b5025521912␟5073372962887574431: Task statuses `,o=$localize`:@@common_create-folder␟946166681c9089eab66ad16e56a42f563bb8fc78␟7798758439029691580: Create Folder `,s=$localize`:@@forms_label--folder-name␟a912fc9125e8a90b7fc600ee33d89f3d8b5d4b6c␟7298686582776186874: Folder Name `,r=$localize`:@@cu-create-category__form-placeholder_enter-folder-name␟b99a7290b9abf0e5c1eeb789c488101705435c95␟3852121607572276195:Enter Folder name`,l=$localize`:@@common_no-lists␟8648126a6433b0c065e2d441e5c4650fe037c90b␟2729609331962414021:No lists`,u=$localize`:␟dd4bbbc911054ebbcd98ea02dea078d087497691␟6610720455615176564:{VAR_PLURAL, plural, =1 {person} other {people}}`,u=p.lc(u,{VAR_PLURAL:"\ufffd1\ufffd"}),d=$localize`:privacy and sharing
                text@@cu-create-category__summary-value-label_privacy-set-to-private␟f9f9a6df0ffaa1c8ab2bff4a0046c7b2930b6c2e␟6910377986943444627: Private | Me and ${"\ufffd0\ufffd"}:INTERPOLATION: other ${u}:ICU: `,m=$localize`:@@common_use-space-statuses␟a5afd4c065d84fc6cdfcb922825edbd4e18a8005␟3458856352658134545: Use Space statuses `,h=$localize`:@@common_use-space-statuses␟a5afd4c065d84fc6cdfcb922825edbd4e18a8005␟3458856352658134545: Use Space statuses `,b=$localize`:@@errors_form-field--one-list-required␟70652f5d355709456d0d281363a49da6cfa3eec7␟8687893220392508529: At least one List is required! `,g=$localize`:@@common_list-name␟f15ac7e2fe8e08989e48bc43cbe85dacb8ebeaf4␟3354719712524257532: List name `,f=$localize`:@@common_enter-list-name␟c6c3016879bc6e911c5194a47b6dcdf8735d3996␟177580624454659954:Enter List name`,_=$localize`:@@cu-create-category__title-back_lists␟e20c56359ebc196c6b78cf4ecac801a294b14111␟4276209804185062988:Your tasks live in Lists`,v=$localize`:create lists under a specific
        category@@cu-create-category__title_create-lists-in-category␟c6d15e811f9a69ac2f05245d9804f6d4d665630d␟6389226158989946903: Create List in ${"\ufffd0\ufffd"}:INTERPOLATION: `,y=$localize`:@@errors_form-field--one-list-required␟417f549e801c8111843eaf83464b77b1567a6648␟4333002720499434511: At least one List is required! `,k=$localize`:@@cu-create-category__form-error_subcategory␟9a300f8d957fa3beb75f0cd650641f4bb056a671␟5743424585412300348: Whoops! ${"\ufffd0\ufffd"}:INTERPOLATION: `,I=$localize`:button text@@common_done--button-text␟f031826de4d223f5af8f4fcec0c4f2ed1c035e87␟2559990622163579351: Done `,w=$localize`:@@common_create-list␟11ba41c5e7b325cff39440c3bd09f4830676f1f3␟6624617695951243415:Create List`,T=$localize`:@@cu-create-category__title-back_folder␟f91f24cab6e29a107388434b7fe33af3cee87918␟2099024628750621310:Who is this Folder for?`,x=$localize`:button text@@common_done--button-text␟f031826de4d223f5af8f4fcec0c4f2ed1c035e87␟2559990622163579351: Done `,C=$localize`:@@common_learn-more␟00fd95b84a6403a10161d05c6758c8ee8feab6c5␟1410572042397301262: Learn more `,O=$localize`:@@questions_task-statuses␟50baf6f1c07b800c8f6e8819b654fff2051ca2a7␟238878620067951241:What task statuses do you want?`,S=$localize`:@@cu-create-category__title_edit-status-project-subcategory␟ab93d0cfe7c70c027dec20d9b382e03ee30382b1␟8318348405735743333: Edit statuses for ${"\ufffd0\ufffd"}:INTERPOLATION: `,D=$localize`:@@common_use-space-statuses␟a5afd4c065d84fc6cdfcb922825edbd4e18a8005␟3458856352658134545: Use Space statuses `,A=$localize`:@@common_use-folder-statuses␟490c6f748d1f3ec6986c03d9a2b4e526618578bf␟8955799306417119566: Use Folder statuses `,j=$localize`:@@common_custom␟a5c05002b0ac2040f1aede5e727e0ffd06eda819␟7590013429208346303:Custom`,N=$localize`:@@common_templates␟0ff736fd2d2de1e6c6a94919e2d172d3850674cd␟5433675495457939071:Templates`,E=$localize`:@@common_save-as-template␟452b26d67866b35238a7dd32b152413afa8fb956␟526985193195003374:Save as Template`,$=$localize`:@@common_new-template␟2312e733e6c525dd91d2ea4acc98ad7cc4263bba␟8232570424521227292:New template`,P=$localize`:@@common_template-name-1␟e7f16e86dea2ddffeef98f8c437e677200e17d22␟6402242272665885810:Template Na﻿me`,L=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,U=$localize`:@@common_active-statuses␟e64864762d34b6ff794b2f9f84359f5839561828␟5266291793530375150:Active statuses`,z=$localize`:@@cu-create-category__statuses-caption-question_active-statuses-tooltip-msg␟89acf5b770f2f931ddc6f38ea289e4b3b0663501␟2960987065094049728:For tasks that have been started.`,M=$localize`:@@forms_placeholder--enter-a-status␟5fea00932c23f74cd2638e94aac91a78f26741b1␟6857434238115504926:Enter a status`,R=$localize`:@@common_done-statuses␟9700fb125460306b42df872d0bec6a4829f74b6f␟6595483802131878038:Done statuses`,G=$localize`:@@cu-create-category__statuses-caption-question_done-statuses-tooltip-msg␟3a0cefcc6e5f29b0252d591a39f0337eda8bed76␟5277060097716901779:For tasks that are completed. These won't be marked as overdue, will unblock dependencies, and will remain visible.`,F=$localize`:@@common_closed-status␟2cc1187e7b1a7a1e8cb6d533ae2e768f716aad00␟3877294529163471991:Closed status`,V=$localize`:@@cu-create-category__statuses-caption-question_closed-status-tooltip-msg␟f85fa07e1a62021b1b8a59292b37a16a089ef508␟2100507775205147795:For completed tasks that are hidden from select views by default.`,q=$localize`:@@common_not-started-statuses␟1a0ed388b162f6f9c1232addbccb9d5b53e5b13f␟4163899823489518447:Not Started statuses`,X=$localize`:@@cu-create-category__statuses-caption-question_tooltip-msg␟05ece7997a0a5fdcc80565489daa19308d47dd51␟5722179098692756401:For tasks that haven't been worked on yet.`,B=$localize`:@@common_move-statuses-not-started␟74bc39efd15642b4b9008a33e57070474f437664␟360989899551376155:Move statuses here to consider tasks Not Started.`,K=$localize`:@@common_learn-more␟8348316da432ee3c01d3df27272b6006f1104cf3␟5691513490987710640: Learn more `,W=$localize`:@@common_move-statuses-done␟c0f4a7efdd06fce48e8f7829c89771d2a1f4eecc␟7851753151094385128:Move statuses here to consider tasks Done.`,H=$localize`:@@common_learn-more␟fb2bdd519e2aa875a92e61c33ea85d5c924ffac9␟6405760143733862244: Learn more `,Z=$localize`:@@errors_form-field--missing-custom-status␟ce7c9aed18a2b4c4e5161c9a49a3e38f3ec24504␟4215712215188068694: Oops! Add custom status or switch to simple statuses. `,Q=$localize`:@@errors_form-field--status-name-length␟a9ebb813b6c58ecfcde332dfc5db4e9f1fee29bc␟5459247271845423781: Whoops! Status name is too long. `,J=$localize`:@@errors_form-field--status-name-taken␟da61944df5a3d462088860f7265301ade9fb0bb8␟4023192968197001747: Whoops! Status name is already taken `,Y=$localize`:@@errors_form-field--status-name-blank␟b6521c79defe9a6486f61468bf2820b9db1d8242␟8735796878788035909: Whoops! Status name cannot be blank `,ee=$localize`:@@common_save␟2a62a59d9424e9e869061ebf3e8f8b8f95411571␟4201883793870263566: Save `,te=$localize`:@@common_save␟2a62a59d9424e9e869061ebf3e8f8b8f95411571␟4201883793870263566: Save `,ie=$localize`:@@common_new␟6aa0944e1e88f326f92278269c69175ca0b8683e␟7122010347255310427: New `,ae=$localize`:@@common_templates␟c33b4a8d9bf6a63e018a7251d10bf3aa57f907da␟5354252237085771228: Templates `,ce=$localize`:@@common_create-folder␟946166681c9089eab66ad16e56a42f563bb8fc78␟7798758439029691580: Create Folder `,ne=$localize`:@@cu-create-category__title_get-started␟eb0f4ea793e8b9d4033d7c2af343e9f64256d8d0␟7352988951830248470: Choose a template to get started `,oe=$localize`:@@common_what-to-import␟499c6594928e4ce1b165570892d5078a0ca607ee␟8305368309693342189:What do you want to import?`,se=$localize`:@@common_import-due-dates␟fbee21d0f3f4071fcc9f45f9da2f9a139ff78961␟2085724271642413887:Import due dates`,[[4,"ngIf","ngIfElse"],["confirmStatusTemplateDelete",""],["paywallLimitedLists",""],["sharingTemplate",""],[4,"ngIf"],[1,"cu-create-category__title"],e,[1,"cu-create-category__tabs"],[1,"cu-create-category__tabs-item","cu-create-category__tabs-item_active"],t,[1,"cu-create-category__tabs-item",3,"click"],i,["class","cu-form__row",3,"ngClass",4,"ngIf"],[1,"cu-create-category__summary"],[1,"cu-create-category__summary-row",3,"click"],[1,"cu-create-category__summary-label"],a,[1,"cu-create-category__summary-value"],[4,"ngFor","ngForOf","ngForTrackBy"],["icon","angle-right",1,"cu-create-category__summary-row-arrow"],c,n,["class","cu-create-category__summary-value",4,"ngIf"],["class","cu-create-category__summary-status_custom",3,"perfectScrollbar",4,"ngIf"],["class","cu-form__error",4,"ngIf"],[1,"cu-btn","cu-btn_spinner","cu-btn_m","cu-btn_full-width",3,"disabled","click"],[1,"cu-btn__text"],o,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],[1,"cu-form__row",3,"ngClass"],[1,"cu-form__label"],s,[1,"cu-form__field"],["type","text","placeholder",r,1,"cu-form__input",3,"ngModel","ngModelOptions","ngModelChange","keyup.Enter"],["categoryInput",""],[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],l,[1,"cu-create-category__summary-value-label"],[3,"ngPlural"],["ngPluralCase","other"],["ngPluralCase","=1"],d,m,h,[1,"cu-create-category__summary-status_custom",3,"perfectScrollbar"],["class","cu-create-category__summary-status-item",3,"color","cuTooltip",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-create-category__summary-status-item",3,"cuTooltip"],b,["class","cu-create-category__title",4,"ngIf"],[1,"cu-form__label","cu-form__label_above-button"],g,["placeholder",f,3,"tags","alwaysShowInput","buttonText","maxlength","cssClass","error","tagsChanged","tagChanging","statusError"],["tagsinput",""],[1,"cu-tags-list"],["class","cu-create-category__lists-item cu-create-category__lists-item_active",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-btn cu-btn_m cu-btn_full-width",3,"click",4,"ngIf"],["class","cu-btn cu-btn_spinner cu-btn_m cu-btn_full-width cu-create-category__next",3,"disabled","click",4,"ngIf"],[1,"cu-create-category__title-back"],["icon","arrow-back",1,"cu-create-category__title-back-icon",3,"click"],_,v,y,k,[1,"cu-create-category__lists-item","cu-create-category__lists-item_active"],["icon","close-white",1,"cu-tag__remove","cu-safe-click",3,"click"],[1,"cu-btn","cu-btn_m","cu-btn_full-width",3,"click"],I,[1,"cu-btn","cu-btn_spinner","cu-btn_m","cu-btn_full-width","cu-create-category__next",3,"disabled","click"],w,T,["itemType","category","parentItemType","project",1,"cu-create-category__sharing-settings",3,"item","parentItem","meUser","ownerId","allMembers","membersData","guestInfo","teamPlan","allowEditPrivacy","upgradeLink","canAddGuestsTeam","canAddGuestsTeamText","inviteUsers","addUser","removeUsers","updateUsers","changePrivate"],x,[1,"cu-create-category__more"],["href","https://docs.clickup.com/en/articles/831184-statuses","target","_blank",1,"cu-create-category__more-link"],C,[1,"cu-create-category__statuses"],[1,"cu-create-category__statuses-column"],["class","cu-create-category__statuses-type",3,"cu-create-category__statuses-type_active","click",4,"ngIf","ngIfElse"],["showFolder",""],[1,"cu-create-category__statuses-type",3,"click"],["customTmpl",""],[1,"cu-create-category__statuses-column","cu-create-category__statuses-column_right"],["class","cu-form__error cu-create-category__statuses-error",4,"ngIf"],[1,"cu-status-badge__label_container","cu-create-category__statuses-error"],["class","cu-status-badge__error_tags_modal",4,"ngIf"],["class","cu-btn cu-btn_m cu-btn_full-width cu-create-category__statuses-btn",3,"disabled","click",4,"ngIf"],O,S,D,A,j,[1,"cu-create-category__statuses-templates"],[1,"cu-create-category__statuses-templates-title"],N,["cuTooltip",E,1,"cu-create-category__statuses-templates-plus",3,"click"],["icon","plus-rounded"],[1,"cu-create-category__statuses-custom-container",3,"perfectScrollbar"],["class","cu-create-category__statuses-new-template",3,"click",4,"ngIf"],["class","cu-create-category__statuses-add-template",4,"ngIf"],[3,"template","active","templates","moreTemplates","templateSaveNeeded","modifier","onSave","onClick","onStartDelete","onRename"],[1,"cu-create-category__statuses-new-template",3,"click"],$,[1,"cu-create-category__statuses-add-template"],["type","text","placeholder",P,1,"cu-form__input",3,"ngModel","ngModelChange"],["templateInput",""],[1,"cu-status-badge__error_tags_modal-text"],["class","cu-create-category__statuses-badge",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-create-category__statuses-badge"],[1,"cu-create-category__statuses-badge-color",3,"ngStyle"],["spellcheck","false",1,"cu-create-category__statuses-badge-title",3,"ngStyle"],["class","cu-list-status__status-done","icon","status-done","cuTooltip",L,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done","cuTooltip",L,"tooltipLifeTime","15000",1,"cu-list-status__status-done"],[1,"cu-create-category__statuses-caption"],U,["icon","question","cuTooltip",z,1,"cu-create-category__statuses-caption-question",3,"tooltipLifeTime","tooltipAllowHtmlRememberToEscapeXss"],[1,"cu-create-category__statuses-container","cu-create-category__statuses-container_custom",3,"dragula","dragulaModel","dragulaModelChange"],[3,"status","last","canDelete","PRESET_COLORS","i","c","errorIndex","isNewStatus","modifier","confirmRemoveStatus","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged",4,"ngFor","ngForOf","ngForTrackBy"],["placeholder",M,3,"tags","maxlength","error","errorIndex","modifier","tagsChanged","statusError","click"],R,["icon","question","cuTooltip",G,1,"cu-create-category__statuses-caption-question",3,"tooltipLifeTime","tooltipAllowHtmlRememberToEscapeXss"],[1,"cu-create-category__statuses-container","cu-create-category__statuses-container_done",3,"dragula","dragulaModel","dragulaModelChange"],[3,"canDelete","status","last","PRESET_COLORS","i","c","errorIndex","isNewStatus","modifier","confirmRemoveStatus","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-create-category__statuses-container_done-drop-zone",4,"ngIf"],F,["icon","question","cuTooltip",V,1,"cu-create-category__statuses-caption-question",3,"tooltipLifeTime","tooltipAllowHtmlRememberToEscapeXss"],[3,"status","canDrag","canDelete","canEditColor","last","PRESET_COLORS","i","c","errorIndex","modifier","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged",4,"ngFor","ngForOf","ngForTrackBy"],q,["icon","question","cuTooltip",X,1,"cu-create-category__statuses-caption-question",3,"tooltipLifeTime","tooltipAllowHtmlRememberToEscapeXss"],[3,"status","canDrag","canDelete","last","i","c","PRESET_COLORS","errorIndex","modifier","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged",4,"ngFor","ngForOf","ngForTrackBy"],[3,"status","canDrag","canDelete","last","i","c","PRESET_COLORS","errorIndex","modifier","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged"],[3,"canDelete","status","last","PRESET_COLORS","i","c","errorIndex","isNewStatus","modifier","confirmRemoveStatus","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged"],[1,"cu-create-category__statuses-container_done-drop-zone"],B,["href","https://docs.clickup.com/en/articles/4109089-not-started-statuses","target","_blank"],K,[3,"status","canDrag","canDelete","last","PRESET_COLORS","i","c","errorIndex","modifier","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged",4,"ngFor","ngForOf","ngForTrackBy"],[3,"status","canDrag","canDelete","last","PRESET_COLORS","i","c","errorIndex","modifier","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged"],[3,"status","last","canDelete","PRESET_COLORS","i","c","errorIndex","isNewStatus","modifier","confirmRemoveStatus","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged"],W,["href","https://docs.clickup.com/features/done-statuses","target","_blank"],H,[3,"status","canDrag","canDelete","canEditColor","last","PRESET_COLORS","i","c","errorIndex","modifier","handleStatusChange","handleStatusKeydown","closeOtherPickers","colorChanged"],[1,"cu-form__error","cu-create-category__statuses-error"],Z,[1,"cu-status-badge__error_tags_modal"],["statusError",""],[1,"cu-status-badge__error_tags_modal-icon"],[1,"cu-icon","cu-icon_warning","cu-status-badge__error_tags_modal__warning-icon"],["class","cu-status-badge__error_tags_modal-text",4,"ngIf"],Q,J,Y,[1,"cu-btn","cu-btn_m","cu-btn_full-width","cu-create-category__statuses-btn",3,"disabled","click"],ee,te,ie,ae,["type","project","mode","sidebar",1,"cu-create-category__load-template",3,"project","showStageSelector","preselectedTemplate","sharingTemplate","forCreateCategoryModal","onSelectTemplate","onDone","onOverlimit"],["loadTemplate",""],ce,ne,oe,se,[1,"cu-create-category__overlimit"],[3,"badge","title","text","image","upgradeButtonText","emailSubject","learnMore"],[3,"visibilityOption","role","type","templateMembers","members","user","template","isPublic","sharingLink","showPublic","onChangeVisibilityOption","onSetMembers","onRemoveMember","onEmitPublic"]]},template:function(e,t){if(1&e&&(p.bd(0,ht,6,5,"ng-container",0),p.bd(1,pt,0,0,"ng-template",null,1,p.cd),p.bd(3,bt,2,7,"ng-template",null,2,p.cd),p.bd(5,gt,4,16,"ng-template",null,3,p.cd)),2&e){const e=p.Rc(4);p.Dc("ngIf",t.hidePaywallTemplate)("ngIfElse",e)}},directives:[z.q,z.p,M.a,z.o,R.c,R.p,R.s,z.r,z.s,G.a,F.a,V.a,q.a,X.a,z.t,D.a,B.a,K.a,W.a,H.a],pipes:[z.b,Z.a],styles:['.cu-create-category__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 24px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;display:flex;justify-content:center;margin-top:-40px}.dark-theme .cu-create-category__title{color:#d5d6d7}.cu-create-category__title-back{position:absolute;margin-top:5px;left:0;cursor:pointer;display:flex}.cu-create-category__title-back:hover .cu-create-category__title-back-icon{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-create-category__title-back:hover .cu-create-category__title-back-icon{stroke:var(--theme-main-color)}}.cu-create-category__title-back:hover .cu-create-category__title-back-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-create-category__title-back:hover .cu-create-category__title-back-text{color:var(--theme-main-color)}}.cu-create-category__title-back-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;stroke-width:5px;width:8px;height:13px;stroke:#858585}.dark-theme .cu-create-category__title-back-icon{stroke:#828588}.cu-create-category__overlimit .cu-paywall-popover{max-width:none}.cu-create-category__more{text-align:center}.cu-create-category__more-link{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;margin:5px 0 0;position:relative;display:inline-block;padding-bottom:2px}@supports (--theme-main-color:#7b68ee){.cu-create-category__more-link{color:var(--theme-main-color)}}.cu-create-category__more-link:after{content:"";display:block;position:absolute;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;bottom:0;left:0;width:100%;height:1px}.cu-create-category__more-link:after:hover{transition:none}@supports (--theme-main-color:#7b68ee){.cu-create-category__more-link:after{background-color:var(--theme-main-color)}}.cu-create-category__more-link:hover:after{opacity:0}.cu-create-category__tabs{display:flex;height:45px;margin:15px -50px 40px;padding:0 50px;border-bottom:1px solid #e4e4e4}.dark-theme .cu-create-category__tabs{background:#384047;border-bottom-color:#1e272e}.cu-create-category__tabs-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;position:relative;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;cursor:pointer}.dark-theme .cu-create-category__tabs-item{color:#d5d6d7}.cu-create-category__tabs-item:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-create-category__tabs-item:hover{color:var(--theme-main-color)}}.cu-create-category__tabs-item+.cu-create-category__tabs-item{margin-left:30px}.cu-create-category__tabs-item_active{color:#7b68ee;cursor:default}@supports (--theme-main-color:#7b68ee){.cu-create-category__tabs-item_active{color:var(--theme-main-color)}}.cu-create-category__tabs-item_active:before{background:#7b68ee;content:"";display:block;position:absolute;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;animation:fadeIn .2s ease-in-out backwards;top:auto;bottom:0;height:2px;width:100%}@supports (--theme-main-color:#7b68ee){.cu-create-category__tabs-item_active:before{background:var(--theme-main-color)}}.cu-create-category__summary{margin:40px 0;border:1px solid #e4e4e4}.dark-theme .cu-create-category__summary{border-color:#1e272e}.cu-create-category__summary-row{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;cursor:pointer;height:56px;padding:0 15px}.cu-create-category__summary-row:not(:last-child){border-bottom:1px solid #e4e4e4}.dark-theme .cu-create-category__summary-row:not(:last-child){border-bottom-color:#1e272e}.cu-create-category__summary-row:hover{background:#fafbfc}.dark-theme .cu-create-category__summary-row:hover{background:#2b343b}.cu-create-category__summary-row-arrow{width:10px;height:25px;margin-left:15px;fill:#d8d8d8}.dark-theme .cu-create-category__summary-row-arrow{fill:#abaeb0}.cu-create-category__summary-label{font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;flex-grow:1;flex-shrink:0}.dark-theme .cu-create-category__summary-label{color:#d5d6d7}.cu-create-category__summary-value{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;margin-left:10px;color:#343434;display:flex;align-items:center;justify-content:flex-end}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-create-category__summary-value{font-family:var(--global-font-support)}}.dark-theme .cu-create-category__summary-value{color:#d5d6d7}.cu-create-category__summary-value-label{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;margin-left:10px}.cu-create-category__summary-status_simple{width:31px;height:20px;border-radius:2px;border:1px solid #d8d8d8;padding:4px}.dark-theme .cu-create-category__summary-status_simple{background:#d5d6d7;border:1px solid #d5d6d7}.cu-create-category__summary-status_custom{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;max-height:50px}.cu-create-category__summary-status-item{width:8px;height:8px;margin:0 0 0 4px;flex-shrink:0;position:relative;margin:0 4px 0 0;width:14px;height:14px;border-radius:3px;border:1px solid transparent;transition:.1s;cursor:pointer;color:transparent}.cu-create-category__summary-status-item:after{content:"";display:block;position:absolute;top:2px;left:2px;width:8px;height:8px;border-radius:2px;background:currentColor;transition:.1s}.cu-create-category__summary-status-item:hover{border:1px solid}.cu-create-category__statuses{margin:40px 0;display:flex;justify-content:space-between}.cu-create-category__statuses-column{width:48%;display:flex;flex-direction:column;min-height:284px}.cu-create-category__statuses-column_right{width:48%}.cu-create-category__statuses-type{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#505050;height:30px;border-radius:3px;cursor:pointer;display:flex;align-items:center;padding:0 10px;flex-shrink:0}.cu-create-category__statuses-type:hover{transition:none}.dark-theme .cu-create-category__statuses-type{color:#d5d6d7}.cu-create-category__statuses-type_active{background:#7b68ee;color:#fff;cursor:default}@supports (--theme-main-color:#7b68ee){.cu-create-category__statuses-type_active{background:var(--theme-main-color)}}.cu-create-category__statuses-caption{font:500 9px/1.15 Gotham Pro,Proxima Nova,arial,serif;color:#ababab;text-transform:uppercase;padding:8px 0;z-index:10}.dark-theme .cu-create-category__statuses-caption{color:#828588}.cu-create-category__statuses-caption-question{width:14px;height:14px;margin-left:4px;margin-bottom:-3px;display:inline-block;cursor:pointer;fill:#979797}.dark-theme .cu-create-category__statuses-caption-question{color:#828588}.cu-create-category__statuses-container_custom{padding-top:28px;margin-top:-28px;padding-bottom:5px}.cu-create-category__statuses-container_done{padding-bottom:38px;margin-bottom:-28px}.cu-create-category__statuses-container_done-drop-zone{border:1px dashed #cbc9cf;padding:8px 0;display:flex;justify-content:center;align-items:center;margin-bottom:10px}.cu-create-category__statuses-container_done-drop-zone p{font:italic 11px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.6);text-align:center}.dark-theme .cu-create-category__statuses-container_done-drop-zone p{color:rgba(213,214,215,.6)}.cu-create-category__statuses-badge{height:28px;margin:0 0 5px;border:1px solid #d8d8d8;background:#fff;border-radius:3px;display:flex;align-items:center;padding:0 10px;flex-shrink:0}.dark-theme .cu-create-category__statuses-badge{border:1px solid #1e272e;background:#384047}.cu-create-category__statuses-badge-simple-icon{width:14px;height:10px;margin-right:10px;stroke-width:2px}.cu-create-category__statuses-badge-simple-icon_open{stroke:#aeacb0}.cu-create-category__statuses-badge-simple-icon_closed{stroke:#67cb48}.cu-create-category__statuses-badge_open{color:#aeacb0;pointer-events:none}.cu-create-category__statuses-badge_open .create-project-modal__statuses-badge-color{background:#aeacb0}.cu-create-category__statuses-badge_closed{color:#67cb48;pointer-events:none}.cu-create-category__statuses-badge_closed .create-project-modal__statuses-badge-color{background:#67cb48}.cu-create-category__statuses-badge-color{width:10px;height:10px;border-radius:2px;margin:0 10px 0 11px}.cu-create-category__statuses-badge-title{flex-grow:1;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;letter-spacing:0;text-transform:uppercase}.cu-create-category__statuses-badge-title_open{color:#aeacb0}.cu-create-category__statuses-badge-title_closed{color:#67cb48}.cu-create-category__statuses-badge-required{font:500 9px/1.15 Gotham Pro,Proxima Nova,arial,serif;color:#d8d8d8;text-transform:uppercase}.dark-theme .cu-create-category__statuses-badge-required{color:#828588}.cu-create-category__statuses cu-tags-input{min-height:50px}.cu-create-category__statuses-templates{display:flex;align-items:center;margin:10px;text-transform:uppercase}.cu-create-category__statuses-templates-title{flex-grow:1;opacity:.4;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#505050}.dark-theme .cu-create-category__statuses-templates-title{color:#d5d6d7}.cu-create-category__statuses-templates-plus{width:17px;height:17px;padding:3px;margin:-3px -3px -2px 0;cursor:pointer;flex-shrink:0}.cu-create-category__statuses-templates-plus:hover use{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-create-category__statuses-templates-plus:hover use{fill:var(--theme-main-color-dark)}}.cu-create-category__statuses-templates-plus use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-create-category__statuses-templates-plus use{fill:var(--theme-main-color)}}.cu-create-category__statuses-new-template{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-top:15px;height:15px}@supports (--theme-main-color:#7b68ee){.cu-create-category__statuses-new-template{color:var(--theme-main-color)}}.cu-create-category__statuses-new-template:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-create-category__statuses-new-template:hover{color:var(--theme-main-color-dark)}}.cu-create-category__statuses-add-template{padding:0 10px}.cu-create-category__statuses-add-template .cu-form__input{padding:0;font:400 14px/1.15 Gotham Pro,Proxima Nova,arial,serif;height:15px;margin-top:15px}.cu-create-category__statuses-add-template .cu-status-badge__error_tags_modal-text{position:absolute}.cu-create-category__statuses-custom-container{padding-right:10px;margin-right:-10px}.cu-create-category__statuses-error{position:sticky;bottom:70px}.cu-create-category__statuses-error .cu-status-badge__error_tags_modal{float:none;width:auto}.cu-create-category__statuses-btn{position:sticky;bottom:20px;z-index:1000;margin-top:30px}.cu-create-category__load-template{margin:40px 0 0;display:block}.cu-create-category__sharing-settings{margin:40px 0;display:block}.cu-create-category__sharing-settings .cu-privacy-settings__add-user{margin-bottom:0;border-bottom:1px solid #ccc}.dark-theme .cu-create-category__sharing-settings .cu-privacy-settings__add-user{border-bottom:1px solid #1e272e}.cu-create-category__lists-examples{display:flex;flex-wrap:wrap}.cu-create-category__lists-item{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1.15;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;border:1px solid #e4e4e4;border-radius:3px;margin:0 6px 6px 0;display:flex;align-items:center;justify-content:center;color:#343434;cursor:pointer;padding:10px 15px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-create-category__lists-item{font-family:var(--global-font-support)}}.dark-theme .cu-create-category__lists-item{color:#d5d6d7;border-color:#828588}.cu-create-category__lists-item:hover{background:#7b68ee;border-color:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.cu-create-category__lists-item:hover{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-create-category__lists-item_active{background:#7b68ee;border-color:#7b68ee;font-weight:600;color:#fff;cursor:default}@supports (--theme-main-color:#7b68ee){.cu-create-category__lists-item_active{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.dark-theme .cu-create-category__lists-item_active{border-color:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-create-category__lists-item_active{border-color:var(--theme-main-color)}}.cu-create-category__lists-add .status-add{height:38px;width:100%;justify-content:flex-start;border:0;border-radius:0;border-bottom:1px solid #e4e4e4}.dark-theme .cu-create-category__lists-add .status-add_active{border-color:#828588}'],encapsulation:2}),e})()},"5O7O":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var a=i("fXoL");let c=(()=>{class e{transform(e,t){return t=t.toLowerCase(),e?e=e.map(e=>{const i=Object.assign({},e),a=-1!==i.name.toLowerCase().indexOf(t)||!t;return i.isVisible=a,i.subcategories=i.subcategories.map(e=>{const c=Object.assign({},e),n=-1!==c.name.toLowerCase().indexOf(t)||!t;return a&&t.length?c.isVisible=!0:n?(c.isVisible=!0,i.isVisible=!0,i.isOpen=!!t.length):c.isVisible=!1,c}),i.isVisible=!i.hidden&&i.isVisible,i}):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Vb({name:"navFilter",type:e,pure:!0}),e})()},"6FZh":function(e,t,i){"use strict";i.d(t,"a",function(){return h});var a=i("ofXK"),c=i("1M0N"),n=i("csDc"),o=i("2iTN"),s=i("C8uC"),r=i("VBI8"),l=i("K0KF"),u=i("gb9A"),d=i("WSBU"),m=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,d.c,s.LoaderModule,r.a,l.a,u.a]]}),e})()},"7YvY":function(e,t,i){"use strict";i.d(t,"a",function(){return y});var a=i("ofXK"),c=i("3Pt+"),n=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})();var s=i("5FVs"),r=i("gb9A"),l=i("9Ejp"),u=i("EDFS"),d=i("VBI8"),m=i("1M0N"),h=i("yHCF"),p=i("vxfF"),b=i("80Pe"),g=i("4xwl"),f=i("C8uC"),_=i("K0KF"),v=i("HiD6");let y=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.l,s.a,r.a,f.LoaderModule,_.a,o,l.b,u.d,d.a,m.a,h.a,p.e,b.a,g.a,v.a]]}),e})()},"7aZq":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("fXoL"),c=i("S7bF");let n=(()=>{class e{constructor(e){this.quillHelpers=e}transform(e,t=null){return t?this.quillHelpers.getDiffHtml(t,e||""):e||""}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(c.a))},e.\u0275pipe=a.Vb({name:"diff",type:e,pure:!0}),e})()},"7jah":function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s});var a=i("l7P3"),c=i("4F4K");const n=Object(a.createFeatureSelector)("lineup"),o=Object(a.createSelector)(n,e=>e.users),s=(e,t)=>Object(a.createSelector)(((e,t)=>Object(a.createSelector)(o,i=>i[e+"-"+t]))(e,t),c.g,(e,t)=>{if(e)return e.taskIds.map(e=>t[e]||{id:e,access:!1})})},"8MHC":function(e,t,i){"use strict";i.d(t,"a",function(){return E});var a=i("o7Ov"),c=i("uslN"),n=i("fXoL"),o=i("l7P3"),s=i("Jf2N"),r=i("jJW4"),l=i("AeD3"),u=i("ofXK");function d(e,t){1&e&&(n.cc(0,"div",17),n.gc(1,18),n.bc())}let m=(()=>{class e{constructor(e,t,i,a){this.store=e,this.modal=t,this.sharedData=i,this.dataService=a,this.AutomationIds=c.b}ngOnInit(){}closeModal(){this.modal.close()}confirmDelete(){this.dataService.removeAddOn(this.sharedData.compatCurrentTeam.id,this.option.id).subscribe(),this.store.dispatch(new a.Mm(this.sharedData.compatCurrentTeam.id,{addons:[]})),this.sharedData.addSettingsSuccessMessage("You've removed your Automation add on."),this.closeModal()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(o.Store),n.Wb(s.a),n.Wb(r.a),n.Wb(l.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-automation-add-on-delete-confirm"]],decls:17,vars:1,consts:function(){let e,t,i,a,c;return e=$localize`:@@cu-automation-add-on-delete-confirm__question_remove-automation-addon␟f7a416c8a9e8422270d564119beb7ae51019eff1␟4819191848832751414: Are you sure you want to remove this Automation Add on? `,t=$localize`:@@cu-automation-add-on-delete-confirm__extra-automations-removed-immediately␟610dac7a48d36d96533e2cfbd5c4853024391fee␟3153887167220405528: Your extra Automations will be removed immediately. `,i=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,a=$localize`:@@common_downgrade␟302ecc4d1a8882ccc8a4ec9404d6ba57a3bdef74␟357783409285211675:Downgrade`,c=$localize`:@@cu-automation-add-on-delete-confirm__unlimited-plan-will-no-be-offered␟5876f2183953d3770d48dd3cd6adb3e387c9d5c6␟6014122868822193786: The unlimited plan will not be offered again. `,[[1,"cu-conflict-management"],[1,"cu-conflict-management__warning-img"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],e,["class","cu-conflict-management__proceed addon-downgrade",4,"ngIf"],[1,"cu-conflict-management__proceed"],t,[1,"move-category__footer"],[1,"cu-btn","cu-conflict-management__cancel",3,"click"],i,[1,"cu-btn","cu-btn_red","cu-btn_spinner",3,"click"],[1,"cu-btn__text"],a,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],[1,"cu-conflict-management__proceed","addon-downgrade"],c]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.Xb(1,"div",1),n.cc(2,"div",2),n.gc(3,3),n.bc(),n.bd(4,d,2,0,"div",4),n.cc(5,"div",5),n.gc(6,6),n.bc(),n.cc(7,"div",7),n.cc(8,"button",8),n.qc("click",function(){return t.closeModal()}),n.gc(9,9),n.bc(),n.cc(10,"button",10),n.qc("click",function(){return t.confirmDelete()}),n.cc(11,"div",11),n.gc(12,12),n.bc(),n.cc(13,"div",13),n.Xb(14,"div",14),n.Xb(15,"div",15),n.Xb(16,"div",16),n.bc(),n.bc(),n.bc(),n.bc()),2&e&&(n.Ib(4),n.Dc("ngIf",(null==t.option?null:t.option.id)===t.AutomationIds.UNLIMITED))},directives:[u.q],encapsulation:2,changeDetection:0}),e})();var h=i("zG6S"),p=i("jJQC"),b=i("NsZK"),g=i("iFN0"),f=i("UdVN"),_=i("tyNb");function v(e,t){if(1&e){const e=n.dc();n.cc(0,"div",12),n.cc(1,"a",13),n.qc("click",function(){return n.Uc(e),n.uc().downgrade()}),n.gc(2,14),n.bc(),n.bc()}}function y(e,t){if(1&e&&(n.cc(0,"div",26),n.dd(1),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" ",e.topBanner," ")}}function k(e,t){if(1&e&&(n.cc(0,"span",27),n.dd(1),n.bc()),2&e){const e=n.uc().$implicit,t=n.uc();n.Ib(1),n.gd(" ",t.symbol," ",e.crossedOut," ")}}function I(e,t){1&e&&(n.ac(0),n.gc(1,32),n.Zb())}function w(e,t){1&e&&(n.ac(0),n.gc(1,33),n.Zb())}function T(e,t){if(1&e&&n.bd(0,w,2,0,"ng-container",29),2&e){n.uc();const e=n.Rc(6),t=n.uc().$implicit;n.Dc("ngIf",t.topBanner)("ngIfElse",e)}}function x(e,t){1&e&&(n.ac(0),n.gc(1,34),n.Zb())}const C=function(e){return["/",e,"settings","billing"]},O=function(e){return{addon:e}};function S(e,t){if(1&e){const e=n.dc();n.cc(0,"div",12),n.cc(1,"a",28),n.qc("click",function(){n.Uc(e);const t=n.uc().$implicit,i=n.uc();return i.disabled||i.selectedAddOnId||t.id===i.checkoutAddOnId?null:i.onSelectAutomationId.emit(t.id)}),n.bd(2,I,2,0,"ng-container",29),n.bd(3,T,1,2,"ng-template",null,30,n.cd),n.bd(5,x,2,0,"ng-template",null,31,n.cd),n.bc(),n.bc()}if(2&e){const e=n.Rc(4),t=n.uc().$implicit,i=n.uc();n.Ib(1),n.Ob("cu-automation-add-ons__selected",i.selectedAddOnId&&i.selectedAddOnId===t.id),n.Dc("routerLink",i.disabled||i.selectedAddOnId||t.id===i.checkoutAddOnId?null:n.Hc(6,C,i.team.id))("queryParams",i.disabled||i.selectedAddOnId||t.id===i.checkoutAddOnId?null:n.Hc(8,O,t.id)),n.Ib(1),n.Dc("ngIf",t.id===i.selectedAddOnId||t.id===i.checkoutAddOnId)("ngIfElse",e)}}function D(e,t){1&e&&(n.cc(0,"div",35),n.dd(1," = "),n.bc())}function A(e,t){if(1&e&&(n.cc(0,"span"),n.dd(1),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.ed(e.symbol)}}function j(e,t){if(1&e&&(n.cc(0,"div",15),n.cc(1,"div",1),n.bd(2,y,2,1,"div",16),n.cc(3,"div",17),n.dd(4),n.bc(),n.cc(5,"div",3),n.dd(6,"AUTOMATIONS"),n.bc(),n.cc(7,"div",18),n.dd(8),n.bd(9,k,2,2,"span",19),n.bc(),n.cc(10,"div",3),n.gc(11,20),n.bc(),n.bd(12,S,7,10,"div",9),n.bc(),n.cc(13,"div",21),n.Xb(14,"div",22),n.bd(15,D,2,0,"div",23),n.cc(16,"div",24),n.bd(17,A,2,1,"span",25),n.dd(18),n.bc(),n.bc(),n.bc()),2&e){const e=t.$implicit,i=n.uc();n.Ob("cu-automation-add-ons__option-disabled",i.disabled||i.selectedAddOnId&&e.id!==i.selectedAddOnId),n.Dc("ngClass","cu-automation-add-ons__option_"+e.id)("cuTooltip",i.disabled?i.upgradeMessage:i.selectedAddOnId&&e.id!==i.selectedAddOnId?i.deniedMessage:null),n.Ib(2),n.Dc("ngIf",e.topBanner),n.Ib(2),n.fd(" ",e.amount," "),n.Ib(3),n.Dc("content",i.symbol+(e.custom_price||e.price||i.unlimitedPrice))("initialFontSize",26),n.Ib(1),n.gd(" ",i.symbol,"",e.custom_price||e.price||i.unlimitedPrice," "),n.Ib(1),n.Dc("ngIf",e.crossedOut),n.Ib(3),n.Dc("ngIf",i.showBuy),n.Ib(3),n.Dc("ngIf",e.id!==i.AutomationIds.UNLIMITED),n.Ib(2),n.Dc("ngIf",e.id!==i.AutomationIds.UNLIMITED),n.Ib(1),n.fd("",e.zapier," ")}}function N(e,t){1&e&&(n.cc(0,"div",36),n.gc(1,37),n.bc())}let E=(()=>{class e{constructor(e,t){this.modal=e,this.injector=t,this.automationOptions=[],this.deniedMessage="You aren't allowed more than one add on at this time.",this.upgradeMessage="You must upgrade your plan to purchase additional automations.",this.exchangeRate=1,this.symbol="$",this.AutomationIds=c.b,this.showBuy=!0,this.onSelectAutomationId=new n.o,this.trackById=Object(p.d)("id")}ngOnInit(){}ngOnChanges(e){(e.team&&this.team||e.rateAndSymbol&&this.rateAndSymbol||e.selectedAddonId)&&this.updatePrices()}downgrade(){const e=this.automationOptions.find(e=>e.id===this.selectedAddOnId);e&&(this.modal.openComponent(m,this.injector).instance.option=e)}updatePrices(){if(this.team&&this.team.addon_prices&&this.team.addon_prices.length){let e;e=this.team.addons&&this.team.addons.length?this.team.addons.find(e=>e.addon_id===c.b.UNLIMITED):this.team.addon_prices.find(e=>e.id===c.b.UNLIMITED),e&&(this.unlimitedPrice=e.custom_price?e.custom_price.toString():e.price_per_month.toString())}!this.unlimitedPrice&&this.team&&this.team.members&&(this.unlimitedPrice=Object(h.c)(this.team.members)),this.rateAndSymbol&&(this.symbol=this.rateAndSymbol.currencySymbol||"$",this.exchangeRate=this.rateAndSymbol.exchangeRate||1,this.automationOptions=(this.selectedAddOnId&&this.selectedAddOnId===c.b.UNLIMITED?[...c.h,c.i]:c.h).map(e=>{const t=Object.assign(Object.assign({},e),{zapier:e.id===c.b.UNLIMITED?e.zapier:Math.round(+e.zapier*+this.exchangeRate)});return e.price&&(t.price=(+e.price*+this.exchangeRate).toFixed(2)),e.crossedOut&&(t.crossedOut=Math.round(+e.crossedOut*+this.exchangeRate)),t}),this.unlimitedPrice=(+this.unlimitedPrice*+this.exchangeRate).toFixed(2))}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.a),n.Wb(n.t))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-automation-add-ons"]],hostAttrs:[1,"cu-automation-add-ons"],inputs:{team:"team",selectedAddOnId:"selectedAddOnId",checkoutAddOnId:"checkoutAddOnId",disabled:"disabled",showBuy:"showBuy",rateAndSymbol:"rateAndSymbol"},outputs:{onSelectAutomationId:"onSelectAutomationId"},features:[n.Gb],decls:16,vars:9,consts:function(){let e,t,i,a,c,n,o,s,r;return e=$localize`:@@cu-automation-add-ons__automations␟e8612be6f14e770c0b7d9eca40bc6e1bb0e2d010␟8213276515535306188: AUTOMATIONS `,t=$localize`:@@common_free-2␟19465aee9d252cf914c723a80897bea3401e34d9␟4820312528377715253: FREE `,i=$localize`:@@cu-automation-add-ons__included-in-plan␟bddd5842880fd736b519e836b5d2f70d1654ba36␟8738607214004340854: INCLUDED IN${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:LINE_BREAK:YOUR PLAN `,a=$localize`:@@common_downgrade␟302ecc4d1a8882ccc8a4ec9404d6ba57a3bdef74␟357783409285211675:Downgrade`,c=$localize`:@@cu-automation-add-ons__per-month␟38f1ff3c437b55da852ac3a896f25de06bae3090␟4402740216407862068: PER MONTH `,n=$localize`:@@cu-automation-add-ons__selected␟f79611b9cc78f612ae8cc2cce08ff9f14581aeb3␟9041444200911417888:Selected`,o=$localize`:@@cu-automation-add-ons__buy-now␟eb1a9c810ba6f86579f83159114f39e574d5a0db␟7464789920784858555:Buy Now`,s=$localize`:@@cu-automation-add-ons__buy␟1befce3c6f0c468b06ae5199116e5b096a35a3ef␟2149165958319691680:Buy`,r=$localize`:@@cu-automation-add-ons__standard-pricing␟fb133abdc17e21122350f622e6d0ef5cbb4c511d␟6524963503411826100: Standard Pricing
`,[[1,"cu-automation-add-ons__option"],[1,"cu-automation-add-ons__option-body"],[1,"cu-automation-add-ons__option-amount","cu-automation-add-ons__option-amount_included"],[1,"cu-automation-add-ons__option-frequency"],e,[1,"cu-automation-add-ons__option-price"],t,i,[1,"cu-automation-add-ons__option-divider"],["class","cu-automation-add-ons__option-btn",4,"ngIf"],["class","cu-automation-add-ons__option",3,"ngClass","cuTooltip","cu-automation-add-ons__option-disabled",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-automation-add-ons__standard",4,"ngIf"],[1,"cu-automation-add-ons__option-btn"],[1,"cu-btn","cu-btn_h-36","cu-btn_font-size-14","cu-btn_full-width","cu-automation-add-ons__downgrade",3,"click"],a,[1,"cu-automation-add-ons__option",3,"ngClass","cuTooltip"],["class","cu-automation-add-ons__option-banner",4,"ngIf"],[1,"cu-automation-add-ons__option-amount"],["cuAdjustsFontSizeToFitWidth","",1,"cu-automation-add-ons__option-price",3,"content","initialFontSize"],["class","cu-automation-add-ons__crossed",4,"ngIf"],c,[1,"cu-automation-add-ons__option-zapier"],["icon","zapier",1,"cu-automation-add-ons__option-zapier-icon"],["class","cu-automation-add-ons__option-zapier-equal",4,"ngIf"],[1,"cu-automation-add-ons__option-zapier-value"],[4,"ngIf"],[1,"cu-automation-add-ons__option-banner"],[1,"cu-automation-add-ons__crossed"],[1,"cu-btn","cu-btn_h-36","cu-btn_font-size-14","cu-btn_full-width",3,"routerLink","queryParams","click"],[4,"ngIf","ngIfElse"],["topBannerTmpl",""],["buyTmpl",""],n,o,s,[1,"cu-automation-add-ons__option-zapier-equal"],[1,"cu-automation-add-ons__standard"],r]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.cc(2,"div",2),n.dd(3),n.vc(4,"number"),n.bc(),n.cc(5,"div",3),n.gc(6,4),n.bc(),n.cc(7,"div",5),n.gc(8,6),n.bc(),n.cc(9,"div",3),n.mc(10,7),n.Xb(11,"br"),n.jc(),n.bc(),n.Xb(12,"div",8),n.bd(13,v,3,0,"div",9),n.bc(),n.bc(),n.bd(14,j,19,15,"div",10),n.bd(15,N,2,0,"div",11)),2&e&&(n.Ib(3),n.fd(" ",n.wc(4,7,(null==t.team.automation||null==t.team.automation.internal||null==t.team.automation.internal.included_with_plan?null:t.team.automation.internal.included_with_plan.action)||(null==t.team.automation||null==t.team.automation.internal?null:t.team.automation.internal.limit))," "),n.Ib(9),n.Ob("cu-automation-add-ons__option-divider-selected",t.selectedAddOnId),n.Ib(1),n.Dc("ngIf",t.selectedAddOnId),n.Ib(1),n.Dc("ngForOf",t.automationOptions)("ngForTrackBy",t.trackById),n.Ib(1),n.Dc("ngIf",!t.showBuy))},directives:[u.q,u.p,u.o,b.a,g.a,f.a,_.k],pipes:[u.f],styles:[".cu-automation-add-ons{display:flex;align-items:center;justify-content:center;margin-top:45px}.cu-automation-add-ons__crossed{text-decoration:line-through;position:absolute;font-size:14px;transform:translateX(-50%);left:50%;top:-14px;color:#d16464;white-space:nowrap}.cu-automation-add-ons__standard{display:none}.cu-automation-add-ons__option{position:relative;display:flex;align-items:center;flex-direction:column;width:144px;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.12);border-radius:6px;padding:0 7px}.cu-automation-add-ons__option.cu-automation-add-ons__option-disabled{opacity:.5;cursor:not-allowed}.cu-automation-add-ons__option.cu-automation-add-ons__option-disabled .cu-btn{pointer-events:none}.dark-theme .cu-automation-add-ons__option{background:#1e272e;box-shadow:0 4px 4px rgba(0,0,0,.4)}.cu-automation-add-ons__option-body{flex-grow:1;display:flex;align-items:center;flex-direction:column;width:100%}.cu-automation-add-ons__option-banner{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;justify-content:center;position:absolute;width:100px;height:22px;left:50%;top:-2px;transform:translateX(-50%);background:rgba(255,200,0,.8);box-shadow:0 2px 6px rgba(0,0,0,.12);font:600 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fafbfc;border-radius:2px 2px 8px 8px}.cu-automation-add-ons__option-amount{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-top:19px;margin-bottom:6px;font:500 18px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-automation-add-ons__option-amount_included{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-automation-add-ons__option-amount_included{color:var(--theme-main-color)}}.cu-automation-add-ons__option-price{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;font:400 26px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:8px;height:26px;color:#292d34;position:relative}.dark-theme .cu-automation-add-ons__option-price{color:#d5d6d7}.cu-automation-add-ons__option-frequency{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:uppercase;text-align:center;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:23px;color:#b9bec7}.dark-theme .cu-automation-add-ons__option-frequency{color:#828588}.cu-automation-add-ons__option-divider{height:73px}.checkout_addons .cu-automation-add-ons__option-divider,.cu-automation-add-ons__option-divider.cu-automation-add-ons__option-divider-selected{height:17px}.cu-automation-add-ons__option-btn{width:100%;padding:0 15px;margin-bottom:20px}.cu-automation-add-ons__option-btn .cu-automation-add-ons__selected{pointer-events:none}.checkout_addons .cu-automation-add-ons__option-btn{display:none}.cu-automation-add-ons__option_automations_10000 .cu-automation-add-ons__option-amount{color:#49ccf9}.cu-automation-add-ons__option_automations_10000 .cu-btn{color:#49ccf9;background:transparent;border-color:#e9ebf0}.dark-theme .cu-automation-add-ons__option_automations_10000 .cu-btn{border-color:#384047}.cu-automation-add-ons__option_automations_10000 .cu-btn:hover{border-color:#49ccf9}.cu-automation-add-ons__option_automations_1000 .cu-automation-add-ons__option-amount{color:#4dc}.cu-automation-add-ons__option_automations_1000 .cu-btn{color:#4dc;background:transparent;border-color:#e9ebf0}.dark-theme .cu-automation-add-ons__option_automations_1000 .cu-btn{border-color:#384047}.cu-automation-add-ons__option_automations_1000 .cu-btn:hover{border-color:#4dc}.cu-automation-add-ons__option_automations_100000 .cu-automation-add-ons__option-amount{color:#57f}.cu-automation-add-ons__option_automations_100000 .cu-btn{color:#57f;background:transparent;border-color:#e9ebf0}.dark-theme .cu-automation-add-ons__option_automations_100000 .cu-btn{border-color:#384047}.cu-automation-add-ons__option_automations_100000 .cu-btn:hover{border-color:#57f}.cu-automation-add-ons__option_automations_unlimited{width:190px;margin-top:-15px}.cu-automation-add-ons__option_automations_unlimited .cu-automation-add-ons__option-amount{color:#7b68ee;margin-top:39px;font-weight:600}.cu-automation-add-ons__option_automations_unlimited .cu-btn{color:#fff;background:#7b68ee;border-color:#7b68ee;box-shadow:0 4px 12px rgba(123,104,238,.48)}.dark-theme .cu-automation-add-ons__option_automations_unlimited .cu-btn{box-shadow:none}.cu-automation-add-ons__option_automations_unlimited .cu-btn:hover{background:#5f48ea;border-color:#5f48ea}.cu-automation-add-ons__option_automations_unlimited .cu-automation-add-ons__option-zapier{height:32px}.cu-automation-add-ons__option_automations_unlimited .cu-automation-add-ons__option-zapier-value{font-weight:500;color:#7c828d}.dark-theme .cu-automation-add-ons__option_automations_unlimited .cu-automation-add-ons__option-zapier-value{color:#abaeb0}.cu-automation-add-ons__option_automations_unlimited .cu-automation-add-ons__option-zapier-icon{margin-top:-3px}.cu-automation-add-ons__option-zapier{display:flex;align-items:center;justify-content:center;width:calc(100% + 14px);height:28px;border-radius:0 0 6px 6px;margin:0 -7px;border-top:1px solid #e9ebf0;background:#fafbfc}.dark-theme .cu-automation-add-ons__option-zapier{border-top-color:#1e272e;background:rgba(0,0,0,.25)}.cu-automation-add-ons__option-zapier-icon{width:34px;height:16px;margin-top:-2px;margin-right:4px}.cu-automation-add-ons__option-zapier-equal{font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:4px;color:#b9bec7}.dark-theme .cu-automation-add-ons__option-zapier-equal{color:#828588}.cu-automation-add-ons__option-zapier-value{font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-automation-add-ons__option-zapier-value{color:#abaeb0}"],encapsulation:2,changeDetection:0}),e})()},"8NlF":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},"9oMC":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("ofXK"),c=i("X5rV"),n=i("VBI8"),o=i("EHXF"),s=i("3Pt+"),r=i("csDc"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[a.c,s.l,c.a,n.a,o.a,r.a]]}),e})()},AcQF:function(e,t,i){"use strict";i.d(t,"a",function(){return E});var a=i("HQfa"),c=i("odS2"),n=i("ofXK"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[n.c]]}),e})();var r=i("tyNb"),l=i("RAxo"),u=i("5FVs"),d=i("IRoT"),m=i("1M0N"),h=i("KsR4"),p=i("jkgf"),b=i("fTg4"),g=i("5+WD"),f=i("an+h"),_=i("T5D4"),v=i("EDFS"),y=i("ql4J"),k=i("bz3s"),I=i("y71m"),w=i("mcWp"),T=i("WhXy"),x=i("xDeF"),C=i("6FZh"),O=i("3Pt+"),S=i("K0KF"),D=i("gb9A"),A=i("obfd"),j=i("bx+h"),N=i("HEHP");let E=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[n.c,r.l,O.l,l.a,u.a,d.a,m.a,h.a,p.a,b.a,g.f,f.a,_.a,v.d,y.a,k.a,I.a,w.a,T.a,x.a,s,c.a,a.a,C.a,S.a,D.a,A.a,j.a,N.a],v.d,I.a]}),e})()},AirQ:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("jfNZ"),c=i("Rpu1"),n=i("MIIt"),o=i("fXoL"),s=i("l7P3");let r=(()=>{class e{constructor(e){this.store=e}dispatchTimeTrackerAction(e){const{action:t,payload:i,entry:a,taskId:o,task:s,tagPayload:r,tagUpdatePayload:l,reload:u,dashboardUpdate:d,tag:m}=e;switch(t){case c.d.Start:this.store.dispatch(n.y({payload:i}));break;case c.d.Stop:this.store.dispatch(n.A({task:s}));break;case c.d.Update:this.store.dispatch(n.E({entry:a,payload:i,task:s,dashboardUpdate:d}));break;case c.d.CreateEntry:this.store.dispatch(n.e({payload:i,task:s}));break;case c.d.LoadRecent:this.store.dispatch(n.k()),this.store.dispatch(n.m());break;case c.d.Close:this.store.dispatch(n.x({open:!1}));break;case c.d.CreateTask:this.store.dispatch(n.d({name:i.task.name,subcategoryId:i.task.subcategoryId}));break;case c.d.Delete:this.store.dispatch(n.h({entryId:i.id,task:s,dashboardUpdate:d}));break;case c.d.UpdateUnsaved:this.store.dispatch(n.J({payload:i,taskId:o}));break;case c.d.FetchTaskEntries:this.store.dispatch(n.l({task:s,reload:u}));break;case c.d.FetchTags:this.store.dispatch(n.m());break;case c.d.DeleteTag:this.store.dispatch(n.f({tag:m}));break;case c.d.AddTag:this.store.dispatch(n.a({tagPayload:r}));break;case c.d.UpdateTagName:this.store.dispatch(n.H({tagUpdatePayload:l}));break;case c.d.UpdateTagColor:this.store.dispatch(n.F({tagUpdatePayload:l}));break;case c.d.RemoveTag:this.store.dispatch(n.p({tagUpdatePayload:l}))}}}return e.\u0275fac=function(t){return new(t||e)(o.nc(s.Store))},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac,providedIn:a.a}),e})()},BR3F:function(e,t,i){"use strict";i.r(t),i.d(t,"ganttResetState",function(){return c}),i.d(t,"ganttLoading",function(){return n}),i.d(t,"ganttChartLoading",function(){return o}),i.d(t,"ganttGetHierarchy",function(){return s}),i.d(t,"ganttGetSpace",function(){return r}),i.d(t,"ganttGetFolder",function(){return l}),i.d(t,"ganttGetList",function(){return u}),i.d(t,"ganttRefreshList",function(){return d}),i.d(t,"ganttRefreshFolder",function(){return m}),i.d(t,"ganttRefreshSpace",function(){return h}),i.d(t,"ganttSetHierarchies",function(){return p}),i.d(t,"ganttUpdateHierarchies",function(){return b}),i.d(t,"ganttTaskIdsLoading",function(){return g}),i.d(t,"ganttGetTaskIds",function(){return f}),i.d(t,"ganttSetTaskIds",function(){return _}),i.d(t,"ganttGetTasksData",function(){return v}),i.d(t,"ganttGetTaskAndAdd",function(){return y}),i.d(t,"ganttGetTaskAndUpdate",function(){return k}),i.d(t,"ganttSetTasksData",function(){return I}),i.d(t,"ganttUpdateItem",function(){return w}),i.d(t,"ganttBulkUpdateItems",function(){return T}),i.d(t,"ganttUpdateFullItem",function(){return x}),i.d(t,"ganttEditTask",function(){return C}),i.d(t,"ganttEditTasksOrderIndex",function(){return O}),i.d(t,"ganttSetTask",function(){return S}),i.d(t,"ganttSetLinks",function(){return D}),i.d(t,"ganttAddLink",function(){return A}),i.d(t,"ganttDeleteLink",function(){return j}),i.d(t,"ganttOpenComponent",function(){return N}),i.d(t,"ganttToggleColumn",function(){return E}),i.d(t,"ganttCreateTask",function(){return $}),i.d(t,"ganttCopyTask",function(){return P}),i.d(t,"ganttAddTaskToData",function(){return L}),i.d(t,"ganttDeleteTaskFromStore",function(){return U}),i.d(t,"ganttBulkDeleteTaskFromStore",function(){return z}),i.d(t,"ganttAddTasksToData",function(){return M}),i.d(t,"ganttCreateList",function(){return R}),i.d(t,"ganttAddHierarchiesToData",function(){return G}),i.d(t,"ganttUpdateUserPreference",function(){return F}),i.d(t,"ganttUpdateViewPreference",function(){return V}),i.d(t,"ganttUpdateColorScheme",function(){return q}),i.d(t,"ganttDeleteTask",function(){return X}),i.d(t,"ganttArchiveTask",function(){return B}),i.d(t,"ganttMoveTask",function(){return K}),i.d(t,"ganttConvertToSubtask",function(){return W}),i.d(t,"ganttMergeTask",function(){return H}),i.d(t,"ganttUpdateOpenedItems",function(){return Z}),i.d(t,"ganttAddToLoadedLists",function(){return Q}),i.d(t,"ganttFullScreen",function(){return J}),i.d(t,"ganttGetIdsForBulkEditDates",function(){return Y}),i.d(t,"ganttGetDataForBulkEditDates",function(){return ee}),i.d(t,"ganttBulkEditDates",function(){return te}),i.d(t,"ganttZoomToFit",function(){return ie}),i.d(t,"ganttPdfLoading",function(){return ae}),i.d(t,"ganttPreventOnOpenEvent",function(){return ce}),i.d(t,"ganttLoadTemplate",function(){return ne}),i.d(t,"ganttSetPreferencesFromView",function(){return oe}),i.d(t,"ganttHierarchyFilterActive",function(){return se}),i.d(t,"ganttMoveTaskToNewList",function(){return re}),i.d(t,"ganttEditListPosition",function(){return le}),i.d(t,"ganttEditFolderPosition",function(){return ue}),i.d(t,"ganttEditSpacePosition",function(){return de}),i.d(t,"ganttGetTaskPoints",function(){return me}),i.d(t,"ganttEmptyAction",function(){return he}),i.d(t,"ganttReloadAllTasks",function(){return pe});var a=i("l7P3");const c=Object(a.createAction)("[GANTT] Reset State"),n=Object(a.createAction)("[GANTT] Loading",Object(a.props)()),o=Object(a.createAction)("[GANTT] Chart Loading",Object(a.props)()),s=Object(a.createAction)("[GANTT] Get Hierarchy"),r=Object(a.createAction)("[GANTT] Get Space",Object(a.props)()),l=Object(a.createAction)("[GANTT] Get Folder",Object(a.props)()),u=Object(a.createAction)("[GANTT] Get List",Object(a.props)()),d=Object(a.createAction)("[GANTT] Refresh List",Object(a.props)()),m=Object(a.createAction)("[GANTT] Refresh Folder",Object(a.props)()),h=Object(a.createAction)("[GANTT] Refresh Space",Object(a.props)()),p=Object(a.createAction)("[GANTT] Set Hierarchies",Object(a.props)()),b=Object(a.createAction)("[GANTT] Update Hierarchies",Object(a.props)()),g=Object(a.createAction)("[GANTT] Task Ids Loading",Object(a.props)()),f=Object(a.createAction)("[GANTT] Get Task Ids",Object(a.props)()),_=Object(a.createAction)("[GANTT] Set Task Ids",Object(a.props)()),v=Object(a.createAction)("[GANTT] Get Tasks Data",Object(a.props)()),y=Object(a.createAction)("[GANTT] Get Task and Add",Object(a.props)()),k=Object(a.createAction)("[GANTT] Get Task and Update",Object(a.props)()),I=Object(a.createAction)("[GANTT] Set Tasks Data",Object(a.props)()),w=Object(a.createAction)("[GANTT] Update Item",Object(a.props)()),T=Object(a.createAction)("[GANTT] Bulk Update Items",Object(a.props)()),x=Object(a.createAction)("[GANTT] Update Full Item",Object(a.props)()),C=Object(a.createAction)("[GANTT] Edit Task",Object(a.props)()),O=Object(a.createAction)("[GANTT] Edit Tasks Order Index",Object(a.props)()),S=Object(a.createAction)("[GANTT] Set Task",Object(a.props)()),D=Object(a.createAction)("[GANTT] Set Links",Object(a.props)()),A=Object(a.createAction)("[GANTT] Add Link",Object(a.props)()),j=Object(a.createAction)("[GANTT] Delete Link",Object(a.props)()),N=Object(a.createAction)("[GANTT] Open Component",Object(a.props)()),E=Object(a.createAction)("[GANTT] Update Columns",Object(a.props)()),$=Object(a.createAction)("[GANTT] Create Task",Object(a.props)()),P=Object(a.createAction)("[GANTT] Copy Task",Object(a.props)()),L=Object(a.createAction)("[GANTT] Add Task To Data",Object(a.props)()),U=Object(a.createAction)("[GANTT] Delete Task From Store",Object(a.props)()),z=Object(a.createAction)("[GANTT] Bulk Delete Task From Store",Object(a.props)()),M=Object(a.createAction)("[GANTT] Add Tasks To Data",Object(a.props)()),R=Object(a.createAction)("[GANTT] Create List",Object(a.props)()),G=Object(a.createAction)("[GANTT] Add hierarchies To Data",Object(a.props)()),F=Object(a.createAction)("[GANTT] Update User Preference",Object(a.props)()),V=Object(a.createAction)("[GANTT] Update View Preference",Object(a.props)()),q=Object(a.createAction)("[GANTT] Update Color Scheme",Object(a.props)()),X=Object(a.createAction)("[GANTT] Delete Task",Object(a.props)()),B=Object(a.createAction)("[GANTT] Archive Task",Object(a.props)()),K=Object(a.createAction)("[GANTT] Move Task",Object(a.props)()),W=Object(a.createAction)("[GANTT] Convert To Subtask",Object(a.props)()),H=Object(a.createAction)("[GANTT] Merge Task",Object(a.props)()),Z=Object(a.createAction)("[GANTT] Update Opened Items",Object(a.props)()),Q=Object(a.createAction)("[GANTT] Add To Loaded Lists",Object(a.props)()),J=Object(a.createAction)("[GANTT] Full Screen",Object(a.props)()),Y=Object(a.createAction)("[GANTT] Get Ids For Bulk Edit Dates",Object(a.props)()),ee=Object(a.createAction)("[GANTT] Get Data For Bulk Edit Dates",Object(a.props)()),te=Object(a.createAction)("[GANTT] Bulk Edit Dates",Object(a.props)()),ie=Object(a.createAction)("[GANTT] Zoom To Fit",Object(a.props)()),ae=Object(a.createAction)("[GANTT] Pdf Loading",Object(a.props)()),ce=Object(a.createAction)("[GANTT] Prevent On Open Event",Object(a.props)()),ne=Object(a.createAction)("[GANTT] Load Template",Object(a.props)()),oe=Object(a.createAction)("[GANTT] Set Preferences From View",Object(a.props)()),se=Object(a.createAction)("[GANTT] Hierarchy Filter Active",Object(a.props)()),re=Object(a.createAction)("[GANTT] Move Task To New List",Object(a.props)()),le=Object(a.createAction)("[GANTT] Edit List Position",Object(a.props)()),ue=Object(a.createAction)("[GANTT] Edit Folder Position",Object(a.props)()),de=Object(a.createAction)("[GANTT] Edit Space Position",Object(a.props)()),me=Object(a.createAction)("[GANTT] Get Task Points",Object(a.props)()),he=Object(a.createAction)("[GANTT] Empty Action"),pe=Object(a.createAction)("[GANTT] Reload All Tasks");Object(a.union)({ganttResetState:c,ganttLoading:n,ganttChartLoading:o,ganttGetHierarchy:s,ganttGetSpace:r,ganttGetFolder:l,ganttGetList:u,ganttRefreshList:d,ganttRefreshFolder:m,ganttRefreshSpace:h,ganttSetHierarchies:p,ganttUpdateHierarchies:b,ganttTaskIdsLoading:g,ganttGetTaskIds:f,ganttSetTaskIds:_,ganttGetTasksData:v,ganttGetTaskAndAdd:y,ganttGetTaskAndUpdate:k,ganttSetTasksData:I,ganttUpdateItem:w,ganttBulkUpdateItems:T,ganttUpdateFullItem:x,ganttEditTask:C,ganttEditTasksOrderIndex:O,ganttSetTask:S,ganttSetLinks:D,ganttAddLink:A,ganttDeleteLink:j,ganttOpenComponent:N,ganttToggleColumn:E,ganttCreateTask:$,ganttCopyTask:P,ganttAddTaskToData:L,ganttDeleteTaskFromStore:U,ganttAddTasksToData:M,ganttCreateList:R,ganttAddHierarchiesToData:G,ganttUpdateUserPreference:F,ganttUpdateViewPreference:V,ganttUpdateColorScheme:q,ganttDeleteTask:X,ganttArchiveTask:B,ganttMoveTask:K,ganttConvertToSubtask:W,ganttMergeTask:H,ganttUpdateOpenedItems:Z,ganttAddToLoadedLists:Q,ganttFullScreen:J,ganttGetIdsForBulkEditDates:Y,ganttGetDataForBulkEditDates:ee,ganttBulkEditDates:te,ganttZoomToFit:ie,ganttPdfLoading:ae,ganttPreventOnOpenEvent:ce,ganttLoadTemplate:ne,ganttSetPreferencesFromView:oe,ganttHierarchyFilterActive:se,ganttMoveTaskToNewList:re,ganttEditListPosition:le,ganttEditFolderPosition:ue,ganttEditSpacePosition:de,ganttEmptyAction:he,ganttReloadAllTasks:pe,ganttGetTaskPoints:me})},C7Vu:function(e,t,i){"use strict";i.d(t,"a",function(){return K});var a=i("HQfa"),c=i("gb9A"),n=i("xDeF"),o=i("bc6J"),s=i("WhXy"),r=i("ofXK"),l=i("3Pt+"),u=i("tyNb"),d=i("5O7O"),m=i("AcQF"),h=i("5FVs"),p=i("9Ejp"),b=i("Dvla"),g=i("m7PM"),f=i("Yatc"),_=i("4TFr"),v=i("12Dc"),y=i("Nmwb"),k=i("RAxo"),I=i("5+WD"),w=i("an+h"),T=i("QwIh"),x=i("X5rV"),C=i("ygeO"),O=i("bx+h"),S=i("uMAD"),D=i("1M0N"),A=i("mcWp"),j=i("C9rM"),N=i("J8CJ"),E=i("v65A"),$=i("jkgf"),P=i("uEdY"),L=i("yHCF"),U=i("bFKe"),z=i("C8uC"),M=i("tGh3"),R=i("aVmG"),G=i("4x9P"),F=i("Cx3j"),V=i("KyjD"),q=i("K0KF"),X=i("HXbV"),B=i("fXoL");let K=(()=>{class e{}return e.\u0275mod=B.Ub({type:e}),e.\u0275inj=B.Tb({factory:function(t){return new(t||e)},providers:[d.a],imports:[[r.c,l.l,u.l,m.a,h.a,p.b,b.b,g.a,f.a,_.a,v.a,y.a,k.a,I.f,w.a,x.a,T.a,C.a,O.a,S.a,D.a,A.a,j.a,N.a,E.a,$.a,s.a,o.a,P.a,L.a,c.a,a.a,U.b,z.LoaderModule,M.a,R.a,G.a,F.a,V.a,q.a,n.a,X.a]]}),e})()},C9rM:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("ofXK"),c=i("K0KF"),n=i("gb9A"),o=i("1M0N"),s=i("bFKe"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,s.b]]}),e})()},Cx3j:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var a=i("ofXK"),c=i("3Pt+"),n=i("9Ejp"),o=i("K0KF"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c]]}),e})();var l=i("tGh3"),u=i("KyjD"),d=i("1M0N"),m=i("e6ZX");let h=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[n.c],imports:[[a.c,c.l,c.x,n.b,o.a,r,l.a,u.a,d.a,m.a],a.c,c.l,c.x]}),e})()},DnkJ:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("f0Wu"),c=i("fXoL");let n=(()=>{class e{transform(e){return Date.now()-parseInt(e,10)<31536e6?[a(new Date(parseInt(e,10))).format("MMM D YYYY"),"at",a(new Date(parseInt(e,10))).format("h:mm a")].join(" "):""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Vb({name:"trueDate",type:e,pure:!0}),e})()},E8aR:function(e,t,i){"use strict";i.d(t,"a",function(){return $});var a=i("csDc"),c=i("VBI8"),n=i("Yukb"),o=i("K0KF"),s=i("2Wx5"),r=i("ofXK"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[r.c,s.a,o.a,n.a,c.a,a.a]]}),e})();var d=i("WESe"),m=i("chQ0"),h=i("KyjD"),p=i("C8uC"),b=i("FpDt"),g=i("aVmG"),f=i("0r45"),_=i("fTg4"),v=i("8NlF"),y=i("UDEt"),k=i("viDW"),I=i("E5a2"),w=i("/En2"),T=i("/n4K"),x=i("QaOb"),C=i("gb9A"),O=i("Dvla"),S=i("bx+h"),D=i("jZSK"),A=i("1M0N"),j=i("4xwl"),N=i("wjE6"),E=i("Y9Pr");let $=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[r.c,m.a,h.a,p.LoaderModule,b.a,N.a,g.a,f.a,_.a,o.a,v.a,y.a,k.a,I.a,w.a,T.a,x.a,C.a,O.b,S.a,E.a,u,D.a,A.a,j.a,d.a]]}),e})()},GcKk:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("ofXK"),c=i("3Pt+"),n=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.x]]}),e})()},HQfa:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("J1KY"),c=i("odS2"),n=i("3Pt+"),o=i("K0KF"),s=i("mcWp"),r=i("ofXK"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[r.c,s.a,o.a,n.l,c.a,a.a]]}),e})()},HXbV:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("+Kou");var a=i("ofXK"),c=i("l7P3"),n=i("PTtq"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,c.StoreModule,n.a]]}),e})()},Injh:function(e,t,i){"use strict";i.d(t,"a",function(){return se}),i.d(t,"b",function(){return re}),i.d(t,"c",function(){return le});var a=i("tCCU"),c=i("bV87"),n=i("Hgwy"),o=i("c3rA"),s=i("fXoL"),r=i("XNiG"),l=i("2Vo4"),u=i("LRne"),d=i("l7P3"),m=i("o7Ov"),h=i("lJxs"),p=i("vkgz"),b=i("IzEk"),g=i("1G5W"),f=i("pLZG"),_=i("zP0r"),v=i("nYR2"),y=i("w1tV"),k=i("eIep"),I=i("zp1y"),w=i("SxV6"),T=i("dTHz"),x=i("GXRk"),C=i("bcN7"),O=i("Gj5t"),S=i("jJQC"),D=i("MguC"),A=i("Muja"),j=i("OPNx"),N=i("VFna"),E=i("/qOb"),$=i("Jf2N");let P=(()=>{class e{constructor(e){this.modalService=e,this.onConfirm=new s.o}delete(){this.onConfirm.emit()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb($.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-status-template-delete"]],inputs:{templateName:"templateName"},outputs:{onConfirm:"onConfirm"},decls:17,vars:1,consts:function(){let e,t,i,a;return e=$localize`:@@cu-status-template-delete__title_delete-template␟387bace8b8763f75483175febe266b31dc8ac0cf␟7485985369322941890: Delete Template `,t=$localize`:@@cu-status-template-delete__question_delete-template␟8a28009c90100c014214526a3ce442b89e0abedd␟8763107540268589544:${"[\ufffd#7\ufffd|\ufffd#9\ufffd]"}:START_TAG_STRONG:Warning:${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_TAG_STRONG: Are you sure you want to delete ${"\ufffd#8\ufffd\ufffd/#8\ufffd"}:LINE_BREAK:the ${"[\ufffd#7\ufffd|\ufffd#9\ufffd]"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_TAG_STRONG: template? `,t=s.lc(t),i=$localize`:@@common_cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,a=$localize`:@@common_delete␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,[[1,"cu-dc"],[1,"cu-dc__inner"],[1,"cu-conflict-management__warning-img"],[1,"cu-dc__title"],e,[1,"cu-dc__warning"],t,[1,"cu-dc__controls"],[1,"cu-btn","cu-btn_fw-sm","cu-btn_confirm-cancel",3,"click"],[1,"cu-btn__text"],i,[1,"cu-btn","cu-btn_fw-sm",3,"click"],a]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.Xb(2,"div",2),s.cc(3,"div",3),s.gc(4,4),s.bc(),s.cc(5,"div",5),s.mc(6,6),s.Xb(7,"strong"),s.Xb(8,"br"),s.Xb(9,"strong"),s.jc(),s.bc(),s.cc(10,"div",7),s.cc(11,"button",8),s.qc("click",function(){return t.modalService.close()}),s.cc(12,"div",9),s.gc(13,10),s.bc(),s.bc(),s.cc(14,"button",11),s.qc("click",function(){return t.delete()}),s.cc(15,"div",9),s.gc(16,12),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()),2&e&&(s.Ib(9),s.kc(t.templateName),s.hc(6))},encapsulation:2}),e})();var L=i("EPTN");let U=(()=>{class e{constructor(e){this.modal=e,this.confirmNewOwner=new s.o}ngOnInit(){}confirm(){this.confirmNewOwner.emit(),this.close()}close(){this.modal.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb($.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-confirm-transfer-project-owner-modal"]],inputs:{newOwner:"newOwner"},outputs:{confirmNewOwner:"confirmNewOwner"},decls:18,vars:1,consts:function(){let e,t,i,a;return e=$localize`:@@cu-confirm-transfer-project-owner-modal__warning-msg_transfer-ownership-to-user␟4e8a24cf6f1dcbcbc2fa633bac2f97b6837fc7fa␟8562226812701590998: Are you sure you want to transfer ownership to ${"\ufffd#4\ufffd"}:START_BOLD_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#4\ufffd"}:CLOSE_BOLD_TEXT:? `,t=$localize`:@@cu-confirm-transfer-project-owner-modal__warning-msg_transfer-ownership-to-user-no-undo␟c699e486bd634d8cf80a861d811141459662d3c1␟2073229602338658542:${"\ufffd#7\ufffd"}:START_BOLD_TEXT:Warning:${"\ufffd/#7\ufffd"}:CLOSE_BOLD_TEXT: You won't be able to undo this once the new owner is confirmed. You will still be able to view and edit it. `,i=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,a=$localize`:@@cu-confirm-transfer-project-owner-modal__btn-txt_change-owner␟e577af9fa6a524442ae68ef6070321ec5f2afbe7␟4163807144743515880: Change owner `,[[1,"cu-conflict-management"],[1,"cu-conflict-management__warning-img"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],e,[1,"cu-conflict-management__highlighted"],[1,"cu-conflict-management__proceed"],t,[1,"move-category__footer"],[1,"cu-btn","cu-conflict-management__cancel",3,"click"],i,[1,"cu-btn","cu-btn_red","cu-btn_spinner",3,"click"],[1,"cu-btn__text"],a,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"]]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.Xb(1,"div",1),s.cc(2,"div",2),s.mc(3,3),s.Xb(4,"b",4),s.jc(),s.bc(),s.cc(5,"div",5),s.mc(6,6),s.Xb(7,"b",4),s.jc(),s.bc(),s.cc(8,"div",7),s.cc(9,"button",8),s.qc("click",function(){return t.close()}),s.gc(10,9),s.bc(),s.cc(11,"button",10),s.qc("click",function(){return t.confirm()}),s.cc(12,"div",11),s.gc(13,12),s.bc(),s.cc(14,"div",13),s.Xb(15,"div",14),s.Xb(16,"div",15),s.Xb(17,"div",16),s.bc(),s.bc(),s.bc(),s.bc()),2&e&&(s.Ib(4),s.kc(t.newOwner.username),s.hc(3))},encapsulation:2,changeDetection:0}),e})();var z=i("D1cy"),M=i("uslN"),R=i("0mFS"),G=i("GkwO"),F=i("5b//"),V=i("HEHP"),q=i("AeD3"),X=i("9Ejp"),B=i("jJW4"),K=i("ejAw"),W=i("tyNb"),H=i("Tm/s"),Z=i("cCXi"),Q=i("xog/"),J=i("oGMP"),Y=i("xMfC");const ee=["templateInput"],te=["createCategory"],ie=["createCategoryListStatuses"],ae=["editProjectModal"],ce=["wipPaywall"],ne=["colorPicker"],oe=["statusError"];var se=function(e){return e.Name="name",e.Visibility="visibility",e.Statuses="statuses",e.Clickapps="clickapps",e.Summary="summary",e.Views="views",e.ViewSettings="viewSettings",e.Template="template",e.Avatar="avatar",e}({});const re=new r.a;let le=(()=>{class e{constructor(e,t,i,a,c,u,m,b,g,f,_,v,y,k,I,w,T,A){this.dataService=e,this.dragula=t,this.sharedData=i,this.featuresService=a,this.route=c,this.router=u,this.modalService=m,this.el=b,this.renderer=g,this.navService=f,this.conflictService=_,this.helpers=v,this.changeDetector=y,this.store=k,this.injector=I,this.templateService=w,this.teamService=T,this.effects=A,this.USER_ROLES={OWNER:1,ADMIN:2,USER:3},this.STATUS_BAG_NAME="ps-statuses-bag",this.DRAG_CSS_CLASS="cu-draggable",this.PRESET_COLORS=F.b.filter(e=>"#fff"!==e),this.MAX_LENGTH=x.e,this.currentTeamMembers=[],this.potentialOwners=[],this.templateSaveNeeded$=new l.a(!1),this.destroy$=new r.a,this.currentUser$=this.store.select(o.getUser),this.isPaidPlan$=this.store.select(o.isOnUnlimitedorHigher),this.underLimit$=this.store.pipe(Object(d.select)(o.getCreateProjectState),Object(h.a)(e=>!(e&&e.overLimit))),this.enterprisePermissions$=this.store.select(o.getUserEnterprisePermissions),this.cantManageStatuses$=this.enterprisePermissions$.pipe(Object(h.a)(e=>(this.cantManageStatuses=e&&e.manage_statuses===n.b.OFF,this.cantManageStatuses))),this.cantDelete$=this.enterprisePermissions$.pipe(Object(h.a)(e=>e&&e.delete_items===n.b.OFF)),this.members=[],this.statusChanged=!1,this.customStatusList=[],this.isNewStatus=!1,this.priorityList=[],this.initMembers=[],this.searchUsers="",this.validateErrors={projectName:!1,projectExists:!1,team:!1,customStatus:!1,projectNameLength:!1,members:!1,statusTakenError:!1,maxlengthError:!1,statusNameBlank:!1},this.statusPermisssionMessage=$localize`:@@cu-project-settings-base__update-statuses-no-permission:You don't have permission to update statuses`,this.saving=!1,this.isLoading=!1,this.saveNeeded=!1,this.currentUserAccessRemoved=!1,this.statusChangeMap={},this.currentPreset="",this.preparedList=[],this.features={},this.newMembers=[],this.projectsWithCustomStatuses=[],this.listsWithCustomStatuses=[],this.colorPickers=[],this.originalProject={},this.tab=0,this.addingTemplate=!1,this.parentStatuses=[],this.parentStatusesClosed=[],this.templates=[{id:"space",name:"Space",statuses:[]},{id:"custom",name:"Custom",statuses:x.b}],this.moreTemplates=[],this.StatusTypes=x.g,this.defaultOpenStatus=x.c,this.defaultClosedStatus=x.a,this.UpdateProjectViews=C.a,this.templateMembers=[],this.team$=this.store.select(o.getTeam),this.hasGanttAccess$=this.store.pipe(Object(d.select)(o.ganttHasAccessSelector),Object(p.a)(e=>this.hasGanttAccess=e)),this.shareMembers=[],this.selectedView$=this.store.select(G.qb),this.currentProject$=this.store.select(o.getProject),this.editListStatusesData={projectId:"",subcategoryToEdit:{},parentCategory:{}},this.project={},this.blank=!1,this.deleteModalVisible=!1,this.viewSettingsTab="required",this.closeAll=!1,this.onChange=new s.o,this.onCancel=new s.o,this.onOpen=new s.o,this.onClose=new s.o,this.cpToggle=new s.o,this.truncatedClickapps=this.featuresService.apps.filter(e=>!!e.showInModal),this.allClickapps=[...this.truncatedClickapps,...this.featuresService.apps.filter(e=>!e.showInModal&&"multiple_assignees"!==e.featureName&&!e.teamField&&!e.alwaysHideInModal)],this.showAllClickapps=!1,this.viewSettings=[],this.viewSettingsUpdate=C.a.OnlyNewViews,this.listSettingsUpdate=C.a.OnlyNewViews,this.boardSettingsUpdate=C.a.OnlyNewViews,this.calendarSettingsUpdate=C.a.OnlyNewViews,this.ganttSettingsUpdate=C.a.OnlyNewViews,this.boxSettingsUpdate=C.a.OnlyNewViews,this.listSettings=[{id:"showTaskLocations",title:$localize`:@@cu-project-settings-base__settings-item_show-folder-list-names_sorting:Show Folder & List names when sorting`,checkType:"switch",checked:!1,camelId:"show_task_locations"},{id:"showSubtaskParentNames",title:$localize`:@@common_show-subtask-parent-names:Show subtask parent names`,checkType:"switch",checked:!0,camelId:"show_subtask_parent_names"}],this.boardSettings=[{id:"showTaskLocations",title:$localize`:@@cu-project-settings-base__settings-item_show-folder-list-names:Show Folder & List names`,checkType:"switch",checked:!0,camelId:"show_task_locations"},{id:"showSubtaskParentNames",title:$localize`:@@common_show-subtask-parent-names:Show subtask parent names`,checkType:"switch",checked:!0,camelId:"show_subtask_parent_names"},{id:"showAssignees",title:$localize`:@@common_show-assignees:Show assignees`,checkType:"switch",checked:!0,camelId:"show_assignees"},{id:"collapseEmpties",title:$localize`:@@common_collapse-empty-cols:Collapse empty columns`,checkType:"switch",checked:!1,camelId:"collapse_empty_columns"},{id:"showImages",title:$localize`:@@cu-project-settings-base__settings-item_show-cover-images:Show cover images`,checkType:"switch",checked:!0,camelId:"show_images"},{id:"showTaskIds",title:$localize`:@@common_show-task-ids:Show task IDs`,checkType:"switch",checked:!1,camelId:"show_task_ids"},{id:"showTimer",title:$localize`:@@common_show-time-tracker:Show time tracker`,checkType:"switch",checked:!1,camelId:"show_timer"}],this.calendarSettings=O.F,this.ganttSettings=[{id:"rescheduleDependencies",title:$localize`:@@common_reschedule-deps:Reschedule dependencies`,checkType:"check",checked:z.h.v2.viewSettings.rescheduleDependencies},{id:"hideWeekends",title:$localize`:@@cu-project-settings-base__settings-item_hide-weekends:Hide Weekends`,checkType:"switch",checked:z.h.v2.viewSettings.hideWeekends},{id:"criticalPath",title:$localize`:@@cu-project-settings-base__settings-item_calculate-critical-path:Calculate critical path`,checkType:"switch",checked:z.h.v2.viewSettings.criticalPath}],this.boxSettings=[{id:"showTimeEstimate",title:$localize`:@@cu-project-settings-base__settings-item_show-time-estimate:Show time estimate`,checkType:"switch",checked:O.E.showTimeEstimate,camelId:"show_time_estimate"},{id:"showBreadcrumbs",title:$localize`:@@common_task-locations:Task locations`,checkType:"switch",checked:O.E.showBreadcrumbs,camelId:"show_breadcrumbs"},{id:"showAssignedComments",title:$localize`:@@common_show-assigned-comments:Show assigned comments`,checkType:"switch",checked:O.E.showAssignedComments,camelId:"show_assigned_comments"}],this.defaultProject$=this.store.select(o.getDefaultProject),this.trackByFeatureName=Object(S.d)("featureName"),this.trackByStatus=Object(S.d)("status"),this.trackById=Object(S.d)("id"),this.trackByViewId=Object(S.d)("id"),this.trackByValue=S.f,this.EditProjectStage=se,this.DataViewType=D.i,this.templateViewOptions=O.Gb.map(e=>({id:e.defaultDataViewAPIPayload.type,title:e.defaultDataViewAPIPayload.name,contentType:e.contentType,view:null,updateView:C.a.RequiredViews,field:D.q[e.defaultDataViewAPIPayload.type],expanded:!1})).filter(e=>"tasks"===e.contentType),this.selectedViewMap={[D.i.List]:!0,[D.i.Board]:!0},this.defaultView=D.i.List,this.editProjectStatusConflict=!1,this.statusListAll=[],this.statusListDone=[],this.statusListCustom=[],this.statusListClosed=[],this.statusListOpen=[],this.statusListUnstarted=[],this.showStatusDropZone=!0,A.register(this.store.select(o.getProjects),e=>this.projects=e)}get selectedViews(){return Object.keys(this.selectedViewMap).filter(e=>this.selectedViewMap[e]).map(e=>parseInt(e,10))}set statusList(e){this.statusListOpen=e.filter(e=>e.type===x.g.Open),this.statusListCustom=e.filter(e=>e.type===x.g.Custom),this.statusListDone=e.filter(e=>e.type===x.g.Done),this.statusListClosed=e.filter(e=>e.type===x.g.Closed),this.statusListUnstarted=e.filter(e=>e.type===x.g.Unstarted),this.statusListAll=[...this.statusListOpen,...this.statusListUnstarted,...this.statusListCustom,...this.statusListDone,...this.statusListClosed]}get statusList(){return this.statusListAll}ngOnInit(){this.enterprisePermissions$.pipe(Object(b.a)(1)).subscribe(e=>{e&&!e.manage_statuses||this.dataService.getTeamStatusTemplates(this.sharedData.compatCurrentTeam.id).subscribe(e=>{this.addTemplates(e.templates,!1)})}),this.sharedData.settingsTeam.pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.currentTeamMembers=(e.members||[]).filter(e=>e.role!==T.f.GUEST),this.shareMembers=(e.members||[]).map(e=>e.user),this.currentTeamMembers.length>0&&(this.currentTeamMembers.sort((e,t)=>{const i="string"==typeof e.user.username&&e.user.username,a="string"==typeof t.user.username&&t.user.username;if(i&&a)return i.toLocaleLowerCase()<a.toLocaleLowerCase()?-1:1}),this.potentialOwners=this.currentTeamMembers.filter(e=>!e.invite))}),this.store.dispatch(new m.Lf(this.project.id)),this.store.pipe(Object(d.select)(Object(o.getCategoriesById)(this.project.id)),Object(f.a)(e=>!!e),Object(g.a)(this.destroy$)).subscribe(e=>{this.projectsWithCustomStatuses=e.filter(e=>e.override_statuses),e.forEach(e=>{const t=e.subcategories.filter(e=>e.override_statuses);t&&t.length&&(this.listsWithCustomStatuses=this.listsWithCustomStatuses.concat(t),this.listsWithCustomStatuses=this.listsWithCustomStatuses.filter((e,t,i)=>i.findIndex(t=>t.id===e.id)===t))})}),this.conflictService.onProjectUpdate.pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.updateOverrides(e.project)}),this.initEditProject(),this.initStoreListener()}ngOnChanges(e){if(this.project.id)this.features=this.featuresService.initFeatures(this.featuresService.addProjectFeatures(this.project.features));else{const e=!this.projects||this.projects.some(e=>{var t,i;return null===(i=null===(t=null==e?void 0:e.features)||void 0===t?void 0:t.emails)||void 0===i?void 0:i.enabled}),t=this.templates.findIndex(e=>"space"===e.id);-1!==t&&this.templates.splice(t,1),this.features={due_dates:{enabled:!0,remap_due_dates:!1},tags:{enabled:!0},priorities:{enabled:!0},custom_fields:{enabled:!0},dependency_warning:{enabled:!0},check_unresolved:{enabled:!0},time_tracking:{enabled:!0},emails:{enabled:e}},this.project.features=this.features,this.project.multiple_assignees=!0,this.project.admin_can_manage=this.sharedData.compatCurrentTeam&&this.sharedData.compatCurrentTeam.admin_public_share_override,this.featuresService.initFeatures(this.features),this.populatePresetStatuses(null)}e.project&&!e.project.isFirstChange()&&this.initEditProject()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.dragula.find(this.STATUS_BAG_NAME)&&this.dragula.destroy(this.STATUS_BAG_NAME),this.blurListener&&(this.blurListener(),this.blurListener=null),this.focusListener&&(this.focusListener(),this.focusListener=null),this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}initEditProject(){if(this.initMembers=this.project.members?this.project.members.slice():[],this.members=this.project.members?this.project.members.slice():[],this.project.id){if(this.getProjectStatuses(this.project.id),this.project.default_preset_view&&(this.defaultView=this.project.default_preset_view),this.project.list_view_settings&&this.project.list_view_settings.settings&&(this.listSettings=this.listSettings.map(e=>Object.assign(Object.assign({},e),{checked:this.project.list_view_settings.settings[e.camelId]})),this.listSettingsUpdate=this.project.list_view_settings.update_views),this.project.board_view_settings&&this.project.board_view_settings.settings&&(this.boardSettings=this.boardSettings.map(e=>Object.assign(Object.assign({},e),{checked:this.project.board_view_settings.settings[e.camelId]})),this.boardSettingsUpdate=this.project.board_view_settings.update_views),this.project.box_view_settings&&this.project.box_view_settings.box_settings&&(this.boxSettings=this.boxSettings.map(e=>Object.assign(Object.assign({},e),{checked:this.project.box_view_settings.box_settings[e.camelId]})),this.boxSettingsUpdate=this.project.box_view_settings.update_views),this.project.calendar_view_settings&&this.project.calendar_view_settings.calendar_settings&&this.project.calendar_view_settings.calendar_settings.hasOwnProperty("showWeekends")&&(this.calendarSettings=Object.assign({},this.project.calendar_view_settings.calendar_settings),this.calendarSettingsUpdate=this.project.calendar_view_settings.update_views),this.project.gantt_view_settings&&this.project.gantt_view_settings.gantt_settings&&this.project.gantt_view_settings.gantt_settings.v2&&this.project.gantt_view_settings.gantt_settings.v2.viewSettings&&(this.ganttSettings=this.ganttSettings.map(e=>Object.assign(Object.assign({},e),{checked:this.project.gantt_view_settings.gantt_settings.v2.viewSettings[e.id]})),this.ganttSettingsUpdate=this.project.gantt_view_settings.update_views),this.project.preset_views){const e=this.project.preset_views.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:!0}),{});this.selectedViewMap=Object.assign(Object.assign({},e),{[D.i.List]:!0})}(this.project.list_view_template||this.project.board_view_template||this.project.calendar_view_template||this.project.gantt_view_template||this.project.box_view_template||this.project.map_view_template||this.project.activity_view_template||this.project.mind_map_view_template||this.project.table_view_template||this.project.workload_view_template||this.project.timeline_view_template)&&(this.templateViewOptions=this.templateViewOptions.map(e=>this.project[e.field+"_template"]?Object.assign(Object.assign({},e),{view:this.project[e.field+"_template"],updateView:this.project[e.field+"_update_views"]||this.project[e.field+"_update_views"]===C.a.OnlyNewViews?this.project[e.field+"_update_views"]:e.updateView}):e))}this.originalProject=Object.assign({},this.project)}initStoreListener(){this.store.pipe(Object(d.select)(o.getCreateProjectState),Object(_.a)(1),Object(g.a)(this.destroy$)).subscribe(e=>{this.isLoading=e.creating,e.error&&"PROJECT_023"===e.error.ECODE&&(this.validateErrors.projectExists=!0),e.lastProject&&(this.onChange.emit(e.lastProject.id),this.modalService.close())})}initDragula(){this.dragula.createGroup(this.STATUS_BAG_NAME,{direction:"vertical",moves:(e,t,i)=>!!i.className.indexOf&&-1!==i.className.indexOf(this.DRAG_CSS_CLASS)}),this.dragula.dropModel(this.STATUS_BAG_NAME).pipe(Object(g.a)(this.destroy$)).subscribe(()=>{this.saveNeeded=this.checkIfSaveNeeded()}),this.dragula.dragend(this.STATUS_BAG_NAME).pipe(Object(g.a)(this.destroy$)).subscribe(()=>{this.statusList=this.helpers.removeDublicates(this.statusList,"status"),this.templateSaveNeeded$.next(!0)}),this.dragula.over().pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.showStatusDropZone=!e.container.classList.contains("create-project-modal__statuses-container_done")})}toggleView(e,t=!1){(e!==D.i.Gantt||this.hasGanttAccess||t||e===D.i.Gantt&&this.selectedViewMap[e])&&(this.selectedViewMap=Object.assign(Object.assign({},this.selectedViewMap),{[e]:!this.selectedViewMap[e],[D.i.List]:!0}),e===this.defaultView&&(this.defaultView=D.i.List),this.changeDetector.detectChanges())}setDefault(e){this.defaultView=e,this.selectedViewMap=Object.assign(Object.assign({},this.selectedViewMap),{[e]:!0}),this.changeDetector.detectChanges()}templateSelected(e){this.selectedTemplate=e,this.visibilityOption=e.template_visibility,this.isPublic=e.public_sharing,this.sharingLink=Object(a.a)("space",e.id,e.public_key),this.visibilityOption===c.f.MEMBERS&&(this.templateMembers=e.template_members.map(e=>(this.shareMembers||[]).find(t=>t.id===e)).filter(e=>!!e)),this.changeDetector.detectChanges()}changeVisibilityOption(e){if(this.visibilityOption===e)return;this.visibilityOption=e,this.selectedTemplate=Object.assign(Object.assign({},this.selectedTemplate),{template_visibility:e});const t={template_visibility:e};this.visibilityOption===c.f.MEMBERS&&(this.selectedTemplate.template_members&&this.selectedTemplate.template_members.length||(this.templateMembers=[this.sharedData.currentUser.value]),t.template_members=this.getMemberChanges()),this.updateEntityTemplate(this.selectedTemplate,t)}updateEntityTemplate(e,t){this.templateService.editProjectTemplate(e.id,Object.assign(Object.assign({},t),{template_name:e.name})).subscribe(t=>{this.selectedTemplate&&this.selectedTemplate.id===e.id&&(this.selectedTemplate=Object.assign(Object.assign({},this.selectedTemplate),t),this.sharingLink=Object(a.a)("space",this.selectedTemplate.id,this.selectedTemplate.public_key))}),this.changeDetector.detectChanges()}setTemplateMembers(e){this.templateMembers=e;const t={template_members:this.getMemberChanges()};this.selectedTemplate=Object.assign(Object.assign({},this.selectedTemplate),{template_members:e.map(e=>e.id)}),this.updateEntityTemplate(this.selectedTemplate,t)}removeMember(e){const t=this.templateMembers.filter(t=>t.id!==e.id);this.setTemplateMembers(t)}getMemberChanges(){const e=(this.templateMembers||[]).map(e=>e.id),t=this.selectedTemplate&&this.selectedTemplate.template_members||[];return{add:e.filter(e=>-1===t.indexOf(e)),rem:t.filter(t=>-1===e.indexOf(t))}}emitPublic(e){this.isPublic=e,this.selectedTemplate&&this.selectedTemplate.public_key&&(this.sharingLink=Object(a.a)("space",this.selectedTemplate.id,this.selectedTemplate.public_key));const t={public_sharing:e};this.selectedTemplate=Object.assign(Object.assign({},this.selectedTemplate),t),this.updateEntityTemplate(this.selectedTemplate,t)}checkIfSaveNeeded(){if(!this.project.id)return!0;const e=[...this.statusList],t=(this.originalProject.statuses||[]).map(e=>e);if(t.length!==e.length)return!0;if(!t.every((t,i)=>t.status===e[i].status&&t.color===e[i].color&&t.type===e[i].type))return!0;if(this.originalProject.name!==this.project.name)return!0;if(this.project.private!==this.originalProject.private)return!0;if(this.project.private){if((this.members||[]).length!==(this.originalProject.members||[]).length)return!0;if(!(this.members||[]).every((e,t)=>e.user.id===(this.originalProject.members||[])[t].user.id))return!0}if(this.project.multiple_assignees!==this.originalProject.multiple_assignees)return!0;if(!this.project.features)return!1;let i=!1;return Object.keys(this.features).forEach(e=>{this.features[e]&&this.features[e].enabled!==(this.project.features[e]||{enabled:!1}).enabled&&(i=!0)}),this.features.due_dates.remap_due_dates!==this.project.features.due_dates.remap_due_dates&&(i=!0),!!i}getProjectStatuses(e){this.statusList=[],this.statusSub&&this.statusSub.unsubscribe(),this.statusSub=this.dataService.getProjectStatuses(e).pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.statusList=[],e.forEach(e=>{this.statusList.push(e)}),this.statusList=[...this.statusList];const t=this.templates.find(e=>"space"===e.id);t&&(t.statuses=t.statuses||[],t.statuses.push(...this.statusList));const i=this.templates.find(e=>"custom"===e.id);i&&2!==this.statusList.length&&(i.statuses=[],i.statuses.push(...this.statusList)),this.currentPreset="Custom"})}setProjectName(e){this.project.name=e.target.value.trim(),this.validateErrors.projectNameLength=this.project.name.length>32,this.saveNeeded=this.checkIfSaveNeeded()}manageStatuses(e){let t;return this.statusList=this.statusList.filter(t=>e.includes(t.status)),e.forEach(e=>{-1===this.statusList.map(e=>e.status).indexOf(e)&&(t={color:Object(F.e)(),orderindex:this.statusList.length,status:e,type:x.g.Custom},this.isNewStatus=!0,this.statusList.push(t))}),this.statusList.length>=1&&(this.validateErrors.customStatus=!1),this.statusList=[...this.statusList],this.isNewStatus=!0,this.statusChanged=!0,this.templateSaveNeeded$.next(!0),this.saveNeeded=this.checkIfSaveNeeded(),t}handleStatusError(e,t){this.errorIndex=t,"statusTaken"===e?this.validateErrors.statusTakenError=!0:"maxLengthError"===e?this.validateErrors.maxlengthError=!0:"statusNameBlank"===e?this.validateErrors.statusNameBlank=!0:(this.validateErrors.maxlengthError=!1,this.validateErrors.statusTakenError=!1,this.validateErrors.statusNameBlank=!1)}handleStatusKeydown(e){const{event:t,isModal:i,index:a}=e;this.handleStatusError("hideError");const c=t.target.innerText.trim().toLowerCase(),n=this.getTakenIndex(c),o=-1!==n&&n!==a;switch(t.which){case 37:case 39:break;case 13:case 9:if(o)return this.handleStatusError("statusTaken",a),!1;t.preventDefault(),i||t.currentTarget.blur();break;case 27:if(o)return this.handleStatusError("statusTaken",a),!1;t.currentTarget.innerText=this.statusList[a].status,t.currentTarget.blur();break;default:return t.currentTarget.innerText.length<this.MAX_LENGTH}}handleStatusChange(e){const{event:t,index:i}=e;if(!i&&0!==i)return;delete this.statusList[i].editing;const a=t.target.innerText.trim().toLowerCase(),c=this.getTakenIndex(a.toLowerCase());if(-1!==c&&c!==i)return void this.handleStatusError("statusTaken",i);if(a.length>this.MAX_LENGTH)return void this.handleStatusError("maxLengthError",i);if(!a)return void this.handleStatusError("statusNameBlank",i);const n=Object.assign({},this.statusList[i]),o=Object.assign({},this.statusList[i],{status:a});this.statusList[i]=o,this.statusList=[...this.statusList];const s=Object.keys(this.statusChangeMap),r=s.findIndex(e=>n.status.toLowerCase()===this.statusChangeMap[e]);-1===r?this.statusChangeMap[n.status.toLowerCase()]=o.status.toLowerCase():s[r]===o.status.toLowerCase()?delete this.statusChangeMap[s[r]]:this.statusChangeMap[s[r]]=o.status.toLowerCase(),this.handleStatusError("hideError"),this.statusChanged=!0,this.templateSaveNeeded$.next(!0),this.saveNeeded=this.checkIfSaveNeeded()}closeOtherPickers(e){this.colorPickers.forEach(e=>{e.close()}),this.colorPickers=[e]}getTakenIndex(e){return this.statusList.map(e=>e.status.toLowerCase()).indexOf(e)}confirmRemoveStatus(e){const{index:t}=e;this.taskToRemoveIndex=t,this.statusList.splice(this.taskToRemoveIndex,1),this.statusList=[...this.statusList],this.templateSaveNeeded$.next(!0),this.statusChanged=!0,this.statusList.length||this.populatePresetStatuses("Custom"),this.saveNeeded=this.checkIfSaveNeeded()}removeStatus(e,t){t&&(t.stopPropagation(),t.preventDefault()),isNaN(e)||(this.statusList.splice(e,1),this.statusList=[...this.statusList],this.saveNeeded=this.checkIfSaveNeeded())}updateProjectStatuses(e,t=!1){if(this.invalidStatus()&&!t)return;this.saving=!0,this.removeInvalidStatusMapChanges(),Object.keys(this.statusChangeMap).length&&(e.status_change_map=this.statusChangeMap),this.statusChangeMap={};const i=this.dataService.updateProjectStatuses(this.project.id,e,!0).pipe(Object(v.a)(()=>this.saving=!1),Object(y.a)());return i.subscribe(i=>{if(i.conflict)t&&(this.editProjectStatusConflict=!0),this.openConflictManagementDialog({old:i.old,new:i.new,closed:i.closed,payload:e});else{this.statusChanged=!1,t||this.store.dispatch(new m.Qf(this.project.id));const e=this.templates.find(e=>"space"===e.id);e&&(e.statuses=e.statuses||[],e.statuses=this.statusList.slice()),this.originalProject.statuses=this.statusList.slice()}}),i}invalidStatus(){return this.validateErrors.statusTakenError||this.validateErrors.maxlengthError}isProjectMemberSelected(e){return this.sharedData.currentUser.value.id===e||!!this.members&&-1!==this.members.map(e=>e.user.id).indexOf(e)}setPrivacy(e){if(this.validateErrors.members=!1,this.project.private=e,this.project.private&&!this.members.length){const e=this.sharedData.compatCurrentTeam.members.findIndex(e=>e.user.id===this.sharedData.currentUser.value.id);if(isNaN(e)||e<0)return;this.members=[...this.members,this.sharedData.compatCurrentTeam.members[e]],this.addOwnerIfNeeded(),this.project.owner||(this.project.owner=this.sharedData.compatCurrentTeam.members[e].user)}this.saveNeeded=this.checkIfSaveNeeded()}updateProject(e=!0){if(this.project.name!==this.originalProject.name&&this.store.dispatch(new m.xd({type:"space",itemId:this.project.id,newName:this.project.name})),!this.project.name)return void(this.validateErrors.projectName=!0);if(this.validateErrors.projectNameLength)return;if(this.project.private&&!this.members.length)return void(this.validateErrors.members=!0);this.validateErrors.projectName=!1,this.validateErrors.members=!1,this.isNewStatus=!1,this.saving=!0;const t=!!Object.keys(this.checkForTemplateUpdates()).length;(!this.cantManageStatuses&&e?this.updateProjectStatuses({statuses:this.prepareProjectStatuses()},!0):Object(u.a)(void 0)).pipe(Object(k.a)(()=>{const e=this.prepareProjectData();return this.dataService.updateProject(this.project.id,e).pipe(Object(k.a)(()=>!this.project.private||this.members.some(e=>e.user.id===this.sharedData.currentUser.value.id)?this.dataService.getProjectById(this.project.id,{include_views:!0}):Object(u.a)(void 0)))}),Object(v.a)(()=>{this.saving=!1,this.saveNeeded=!1})).subscribe(e=>{if(e){this.project=e,this.features=this.project.features,this.members=this.project.members;const i=this.originalProject.default_preset_view!==this.defaultView?this.defaultView:null;this.store.dispatch(new m.Sj(e,"project settings update",!(!this.viewType&&!t&&this.originalProject.default_preset_view===this.defaultView&&Object(A.a)(this.originalProject.preset_views,this.selectedViews)),i)),this.originalProject=Object.assign({},e),this.onChange.emit(this.project.id),this.store.dispatch(new j.j)}else this.store.dispatch(new m.lg(this.project.id));this.editProjectStatusConflict||(this.closeAll?this.modalService.closeAll():this.modalService.close(),re.next())})}validate(){this.validateErrors.projectExists=this.sharedData.compatProjectList.some(e=>e.name&&this.project.name&&e.name.toLowerCase()===this.project.name.toLowerCase()&&this.project.id!==e.id),this.validateErrors.projectName=!1,this.validateErrors.team=!1,this.validateErrors.customStatus=!1,this.project.name||(this.validateErrors.projectName=!0),this.team||(this.validateErrors.team=!0)}createProject(e=!1){if(this.validate(),this.validateErrors.projectName||this.validateErrors.team||this.validateErrors.customStatus||this.validateErrors.projectNameLength||this.validateErrors.statusTakenError||this.validateErrors.maxlengthError)return this.isLoading=!1;this.store.dispatch(new m.Kb({data:this.prepareProjectData(!0),navigate:e}))}getUpdateViewValueByView(e){switch(e){case D.i.List:return this.listSettingsUpdate;case D.i.Board:return this.boardSettingsUpdate;case D.i.Calendar:return this.calendarSettingsUpdate;case D.i.Gantt:return this.ganttSettingsUpdate;case D.i.Box:return this.boxSettingsUpdate}}viewSettingsToPayload(e,t){const i=t===D.i.Calendar?this.calendarSettings:e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.camelId]:t.checked}),{});let a="settings";return t===D.i.Calendar&&(a="calendar_settings"),t===D.i.Box&&(a="box_settings"),{update_views:this.getUpdateViewValueByView(t),[a]:i}}prepareProjectData(e=!1){const t=Object.assign({project_id:this.project.id,private:this.project.private,team:this.sharedData.compatCurrentTeam.id,name:this.project.name,features:this.prepareFeaturesData(e),multiple_assignees:this.project.multiple_assignees||!1,priorities:this.priorityList,add:[],edit:[],rem:[],new_owner:void 0,default_preset_view:this.defaultView,preset_views:this.selectedViews,admin_can_manage:this.project.id&&this.project.owner.id!==this.sharedData.currentUser.value.id?void 0:this.project.admin_can_manage,list_view_settings:this.viewType===D.i.List?this.viewSettingsToPayload(this.listSettings,D.i.List):void 0,board_view_settings:this.viewType===D.i.Board?this.viewSettingsToPayload(this.boardSettings,D.i.Board):void 0,box_view_settings:this.viewType===D.i.Box?this.viewSettingsToPayload(this.boxSettings,D.i.Box):void 0,calendar_view_settings:this.viewType===D.i.Calendar?this.viewSettingsToPayload(null,D.i.Calendar):void 0,gantt_view_settings:this.viewType===D.i.Gantt?this.ganttSettingsToPayload():void 0},this.checkForTemplateUpdates());if(e&&(t.statuses=this.prepareProjectStatuses()),this.project.private){this.members.forEach(e=>{const i=-1!==this.initMembers.map(e=>e.user.id).indexOf(e.user.id),a=Object.assign(e.user,{role:this.USER_ROLES.USER});i?t.edit.push(a):t.add.push(a)});for(const e of this.initMembers)-1===this.members.map(e=>e.user.id).indexOf(e.user.id)&&t.rem.push(e.user);this.members.some(e=>e.user.id===this.project.owner.id)||(t.new_owner=this.members[0].user.id)}if(this.newOwner&&(t.new_owner=this.newOwner.id),this.newAvatar){const e=new FormData;if("remove"!==this.newAvatar)return this.project.avatar&&(t.avatar=this.project.avatar),Object.keys(t).filter(e=>void 0!==t[e]).forEach(i=>e.append(i,JSON.stringify(t[i]))),e.append("avatar",this.newAvatar,"project_avatar.jpeg"),e;t.unset_avatar=!0,t.color=this.project.color,t.avatar_source=this.project.avatar_source,t.avatar_value=this.project.avatar_value}return t}prepareFeaturesData(e=!1){if(e)return Object.assign(Object.assign({},this.project.features),{time_tracking:this.project.features.time_tracking.hasOwnProperty("rollup")?this.project.features.time_tracking:Object.assign(Object.assign({},this.project.features.time_tracking),{rollup:!1}),time_estimates:this.project.features.time_estimates.hasOwnProperty("rollup")?this.project.features.time_estimates:Object.assign(Object.assign({},this.project.features.time_estimates),{rollup:!1})});const t={};for(const i of this.featuresService.FEATURESLIST)if(this.project.features){if(this.project.features.due_dates.remap_due_dates!==this.features.due_dates.remap_due_dates&&(t.due_dates={enabled:!0,remap_due_dates:this.features.due_dates.remap_due_dates,start_date:!0}),JSON.stringify(this.features[i])!==JSON.stringify(this.project.features[i])){if(!this.project.features[i]&&!this.features[i].enabled)continue;t[i]=this.features[i]}}else t[i]=this.features[i];return t}prepareProjectStatuses(e=!1){const t=this.statusList.slice(0);return t.forEach((e,t)=>{"Closed"!==e.status&&"Open"!==e.status&&(e.status=e.status.toLowerCase()),e.orderindex=t}),t}checkForTemplateUpdates(){const e={};return this.templateViewOptions.forEach(t=>{!t.view||this.project[t.field+"_template"]&&this.project[t.field+"_template"].id===t.view.id&&this.project[t.field+"_update_views"]===t.updateView?!t.view&&this.project[t.field+"_template"]&&this.project[t.field+"_template"].id&&(e[t.field+"_template"]=null):(e[t.field+"_template"]=t.view.id,e[t.field+"_update_views"]=t.updateView)}),e}ganttSettingsToPayload(){let e={viewSettings:Object.assign({},O.I.gantt_settings.v2.viewSettings),viewSettingsUser:Object.assign({},O.I.gantt_settings.v2.viewSettingsUser)};this.project&&this.project.gantt_view_settings&&this.project.gantt_view_settings.gantt_settings&&this.project.gantt_view_settings.gantt_settings.hasOwnProperty("viewSettings")&&(e={viewSettings:Object.assign({},this.project.gantt_view_settings.gantt_settings.v2.viewSettings),viewSettingsUser:Object.assign({},this.project.gantt_view_settings.gantt_settings.v2.viewSettingsUser)});const t=Object.assign(Object.assign({},e),{viewSettings:Object.assign({},O.I.gantt_settings.v2.viewSettings)});return{update_views:this.getUpdateViewValueByView(D.i.Gantt),gantt_settings:t}}cancel(){this.onCancel.emit(this.project.id)}populatePresetStatuses(e="Custom",t=!1,i=!1){this.templateSaveNeeded$.next(!1),this.statusChanged=!0,this.isNewStatus=!1;const a=[];this.currentPreset=e||"Custom";let c=this.templates.find(e=>e.name===this.currentPreset);c||(c=this.moreTemplates.find(e=>e.name===this.currentPreset)),c.statuses.forEach(e=>{a.push({color:e.color||"#7b68ee",orderindex:a.length,type:e.type,status:e.status})}),this.statusList=a,this.preparedList=[],this.statusList.forEach(e=>{this.preparedList.push(e.status)}),this.validateErrors.customStatus=!1,this.saveNeeded=this.checkIfSaveNeeded()}deleteProject(){this.store.dispatch(new m.kg(this.project.id,this.project.name)),this.store.select(o.getRemoveProjectState).pipe(Object(f.a)(e=>!e.removing),Object(I.a)(this.store.select(o.getProjects),this.store.select(o.getProject),this.team$),Object(w.a)()).subscribe(([,e,t,i])=>{e.length?t&&this.project.id!==t.id||this.store.dispatch(new R.d({path:["/",i.id,"v","s",e[0].id]})):this.store.dispatch(new R.d({path:["/"]}))})}showArchiveModal(){this.modalService.openComponent(N.a,this.injector,{title:$localize`:@@common_archive-space:Archive Space`}).instance.project=this.project}toggleMultipleAssignees(){this.project.multiple_assignees=!this.project.multiple_assignees,this.saveNeeded=this.checkIfSaveNeeded()}resetPreset(){this.currentPreset="",this.statusList=[]}toggleFeature(e,t){if("wip_limits"===e&&(this.team.plan_id===M.f.FREE||this.team.plan_id===M.f.UNLIMITED))return t.stopPropagation(),t.preventDefault(),void(this.wipPaywall&&this.wipPaywall.show());"multiple_assignees"===e&&this.toggleMultipleAssignees(),this.features=this.featuresService.toggleFeature(this.features,e),this.saveNeeded=this.checkIfSaveNeeded()}openCategoryModal(e){e.statuses?this.createCategoryModal(e):this.dataService.getCategoryById(e.id).subscribe(e=>{this.createCategoryModal(e)})}createCategoryModal(e){this.projectToEdit=e,this.modalService.open({dialogModifier:"cu-modal__dialog-space",content:this.createCategory})}editProject(e){e=e.project||e,this.modalService.close(),this.updateOverrides(e),this.navService.updateCategory(e)}enterTemplateName(){this.addingTemplate=!0,this.changeDetector.detectChanges(),this.blurListener=this.renderer.listen(this.templateInput.nativeElement,"blur",e=>{this.keydownListener(),this.focusListener(),this.errMsg="",this.addingTemplate&&this.templateName?this.saveTemplate():this.addingTemplate=!1}),this.focusListener=this.renderer.listen(this.templateInput.nativeElement,"focus",e=>{this.keydownListener=this.renderer.listen("document","keydown",e=>{switch(this.errMsg="",e.which){case E.a.ENTER:this.saveTemplate();break;case E.a.ESCAPE:this.addingTemplate=!1,this.templateName="",this.templateInput.nativeElement.blur();break;default:return}})}),this.templateInput.nativeElement.focus()}updateTemplate(){this.templateSaveNeeded$.next(!1);const e=this.templates.filter(e=>"Space"!==e.name&&"Custom"!==e.name).find(e=>e.name===this.currentPreset);e||this.moreTemplates.find(e=>e.name===this.currentPreset),e&&(this.dataService.updateStatusTemplate(e.id,{name:e.name,statuses:this.prepareProjectStatuses(!0)}).subscribe(),e.statuses=this.statusList.slice())}openStatusTemplateDeleteConfirm(e,t=!1){const i=this.modalService.openComponent(P,this.injector);i.instance.templateName=e.name,i.instance.onConfirm.pipe(Object(g.a)(this.destroy$)).subscribe(()=>{this.deleteTemplate(e,t),this.modalService.close()})}renameTemplate(e,t){t.name=e,this.dataService.editStatusTemplate(t.id,t).subscribe()}openConflictManagementDialog(e){const t=this.modalService.openComponent(L.a,this.injector,{preventExternalClick:!0});t.instance.old=e.old,t.instance.new=e.new,t.instance.payload=e.payload,t.instance.type="editSpaceStatuses",t.instance.closed=e.closed,t.instance.onCancel.pipe(Object(g.a)(this.destroy$)).subscribe(()=>this.saveNeeded=!0),t.instance.onSpaceUpdate.pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.updateProjectStatuses(e),this.modalService.close()}),t.instance.init(),t.changeDetectorRef.detectChanges(),this.editProjectStatusConflict&&this.modalService.closeModal.pipe(Object(b.a)(1)).subscribe(()=>{this.modalService.closeAll(),re.next()})}addTemplates(e,t=!0){e.length<=8||!t?this.templates.push(...e):(this.templates.push(...e.slice(0,7)),this.moreTemplates.push(...e.slice(7)));const i=this.checkForTemplate();i&&(this.currentPreset=i.name)}checkForTemplate(){return(this.templates||[]).find(e=>"custom"!==e.id&&e.statuses.length===this.statusList.length&&e.statuses.length&&e.statuses.every((e,t)=>(e.status||"").toLocaleLowerCase()===(this.statusList[t].status||"").toLocaleLowerCase()))}setMembers(e){this.members=e.map(e=>this.currentTeamMembers.find(t=>t.user.id===e.id)).filter(e=>!!e),this.saveNeeded=this.checkIfSaveNeeded(),this.currentUserAccessRemoved=this.isCurrentUserAccessRemoved()}removeUser(e){this.validateErrors.members=!1,this.members=this.members.filter(t=>t.user.id!==e.id),this.saveNeeded=this.checkIfSaveNeeded(),this.currentUserAccessRemoved=this.isCurrentUserAccessRemoved()}edit(e){this.spaceToEdit={stage:e,space:Object.assign({},this.project)},this.changeDetector.detectChanges(),this.modalService.open({name:"create-project",modifier:"cu-modal__create-new-space",content:this.editProjectModal,bodyModifier:"cu-modal__body_no-min-height"})}changeStatuses(e,t){switch(t){case x.g.Unstarted:this.statusList=[...this.statusListOpen,...e.map(e=>Object.assign(Object.assign({},e),{type:x.g.Unstarted})),...this.statusListCustom,...this.statusListDone,...this.statusListClosed];break;case x.g.Custom:this.statusList=[...this.statusListOpen,...this.statusListUnstarted,...e.map(e=>Object.assign(Object.assign({},e),{type:x.g.Custom})),...this.statusListDone,...this.statusListClosed];break;case x.g.Done:this.statusList=[...this.statusListOpen,...this.statusListUnstarted,...this.statusListCustom,...e.map(e=>Object.assign(Object.assign({},e),{type:x.g.Done})),...this.statusListClosed]}this.isNewStatus=!1,this.templateSaveNeeded$.next(!0),this.statusChanged=!0,this.saveNeeded=this.checkIfSaveNeeded()}changeColor(e){this.project=Object.assign(Object.assign({},this.project),{avatar:null,color:e}),this.newAvatar="remove",this.changeDetector.markForCheck()}changeIcon({source:e,value:t}){this.project=Object.assign(Object.assign({},this.project),{avatar:null,avatar_source:e,avatar_value:t}),this.newAvatar="remove",this.changeDetector.markForCheck()}changeAvatar(e){this.newAvatar=e?this.helpers.dataURItoBlob(e):"remove",this.project=Object.assign(Object.assign({},this.project),{avatar:e}),this.changeDetector.markForCheck()}changeOwner(e){if(e.id!==this.project.owner.id){const t=this.modalService.openComponent(U,this.injector,{title:$localize`:@@cu-project-settings-base__title_change-owner:Change Owner`});t.instance.newOwner=e,t.instance.confirmNewOwner.pipe(Object(b.a)(1),Object(g.a)(this.modalService.closeModal)).subscribe(()=>{this.setNewOwnerValue(e),this.updateProject(!1)})}}setNewOwnerValue(e){this.project.owner&&e.id===this.project.owner.id||(this.newOwner=e,this.project.owner=e,this.addOwnerIfNeeded())}editListStatuses(e){this.store.select(Object(o.getCategoryById)(e.category,this.project.id)).pipe(Object(b.a)(1)).subscribe(t=>{this.editListStatusesData={projectId:this.project.id,subcategoryToEdit:Object.assign({},e),parentCategory:Object.assign({},t)}}),this.modalService.open({dialogModifier:"cu-modal__dialog-space",content:this.createCategoryListStatuses})}editSubcategory(e){this.modalService.close(),this.navService.updateSection(e.subcategory,!0,e.changeMap)}removeInvalidStatusMapChanges(){const e=Object.keys(this.statusChangeMap),t=this.statusList;e.forEach(e=>{-1===t.map(e=>e.status).indexOf(this.statusChangeMap[e])&&delete this.statusChangeMap[e]})}updateOverrides(e){const t=this.projectsWithCustomStatuses.findIndex(t=>t.id===e.id);-1!==t&&(this.projectsWithCustomStatuses[t]=e)}saveTemplate(){if(!this.templateName)return void(this.errMsg=$localize`:@@cu-project-settings-base__error-msg_template-name-required:Whoops! Name for template required`);if(-1!==this.templates.findIndex(e=>e.name.toLowerCase()===this.templateName.toLowerCase())||-1!==this.moreTemplates.findIndex(e=>e.name.toLowerCase()===this.templateName.toLowerCase()))return this.errMsg=$localize`:@@cu-project-settings-base__error-msg_template-name-exists:Whoops! This template name already exists`,void this.enterTemplateName();10===this.templates.length?(this.moreTemplates.push(this.templates[8]),this.moreTemplates.push(this.templates[9]),this.templates.splice(8,2)):this.templates.length>10&&(this.moreTemplates.unshift(this.templates[9]),this.templates.splice(9,1));const e=this.prepareProjectStatuses(!0);this.templates.push({name:this.templateName,statuses:e.slice()}),this.populatePresetStatuses(this.templateName),this.dataService.createStatusTemplate(this.sharedData.compatCurrentTeam.id,{name:this.templateName,statuses:e}).pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.templates[this.templates.length-1]=e.template,this.templateName=""}),this.addingTemplate=!1,this.templateInput.nativeElement.blur()}deleteTemplate(e,t=!1){const i=t?"moreTemplates":"templates",a=this[i].findIndex(t=>t.name===e.name);-1!==a&&(this.currentPreset===e.name&&this.populatePresetStatuses(this.templates[0].name),this.dataService.deleteStatusTemplate(e.id).subscribe(()=>{if(this[i].splice(a,1),t&&1===this.moreTemplates.length)this.templates.push(this.moreTemplates.splice(0,1)[0]);else if(!t){const e=this.moreTemplates.splice(0,this.moreTemplates.length<=2?this.moreTemplates.length:1);this.templates.push(...e)}}))}isCurrentUserAccessRemoved(){return this.project.id&&this.members.length>0&&this.members.every(e=>e.user.id!==this.sharedData.currentUser.value.id)}addOwnerIfNeeded(){if(this.project.owner&&this.project.private&&!this.members.some(e=>e.user.id===this.project.owner.id)){const e=this.sharedData.compatCurrentTeam.members.find(e=>e.user.id===this.project.owner.id);this.members=[...this.members,e]}}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(q.a),s.Wb(X.c),s.Wb(B.a),s.Wb(K.a),s.Wb(W.a),s.Wb(W.h),s.Wb($.a),s.Wb(s.m),s.Wb(s.H),s.Wb(H.a),s.Wb(Z.a),s.Wb(Q.b),s.Wb(s.h),s.Wb(d.Store),s.Wb(s.t),s.Wb(J.a),s.Wb(Y.a),s.Wb(V.b))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-project-settings-base"]],viewQuery:function(e,t){if(1&e&&(s.jd(ee,1),s.jd(te,1),s.jd(ie,1),s.jd(ae,1),s.jd(ce,1),s.jd(ne,1),s.jd(oe,1)),2&e){let e;s.Qc(e=s.rc())&&(t.templateInput=e.first),s.Qc(e=s.rc())&&(t.createCategory=e.first),s.Qc(e=s.rc())&&(t.createCategoryListStatuses=e.first),s.Qc(e=s.rc())&&(t.editProjectModal=e.first),s.Qc(e=s.rc())&&(t.wipPaywall=e.first),s.Qc(e=s.rc())&&(t.colorPicker=e),s.Qc(e=s.rc())&&(t.statusError=e)}},inputs:{project:"project",blank:"blank",deleteModalVisible:["showDelete","deleteModalVisible"],index:"index",viewType:"viewType",viewSettingsTab:"viewSettingsTab",closeAll:"closeAll"},outputs:{onChange:"onChange",onCancel:"onCancel",onOpen:"onOpen",onClose:"onClose",cpToggle:"cpToggle"},features:[s.Hb([V.b]),s.Gb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()},J8CJ:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("ofXK"),c=i("3Pt+"),n=i("K0KF"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.l,n.a]]}),e})()},"JX/H":function(e,t,i){"use strict";i.d(t,"b",function(){return b}),i.d(t,"c",function(){return g}),i.d(t,"a",function(){return f});var a=i("lJxs"),c=i("fXoL"),n=i("2p4s"),o=i("tk/3");let s=(()=>{class e{constructor(e){this.http=e,this.apiUrl=n.a.apiUrl}regenerateForList(e){return this.http.put(`${this.apiUrl}/subcategory/${e.id}/email_token`,{})}regenerateForTask(e){return this.http.put(`${this.apiUrl}/task/${e.id}/email_token`,{})}}return e.\u0275fac=function(t){return new(t||e)(c.nc(o.b))},e.\u0275prov=c.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var r=i("rLOZ"),l=i("Dvla"),u=i("ofXK"),d=i("3Pt+");function m(e,t){1&e&&(c.ac(0),c.gc(1,14),c.Zb())}function h(e,t){1&e&&(c.ac(0),c.gc(1,15),c.Zb())}function p(e,t){if(1&e&&c.Xb(0,"img",16),2&e){const e=c.uc();c.Dc("src",e.typeConfig[e.emailType].img,c.Xc)}}var b=function(e){return e.Task="task",e.Comment="comment",e}({});const g="skip-email-modal";let f=(()=>{class e{constructor(e,t){this.emailToken=e,this.localStorage=t,this.typeConfig={[b.Task]:{description:$localize`:@@cu-email-modal__description_forward-email-to-cu-create-task:You can send or forward email to ClickUp to create tasks and attach your email to tasks.`,labelText:$localize`:@@cu-email-modal__label_send-email-to:Send email to`,img:i("art9"),banner:!1,getEmail:()=>this.list.incoming_address,resetEmail:()=>this.emailToken.regenerateForList(this.list).pipe(Object(a.a)(e=>(this.list.incoming_address=e.new_incoming_address,e.new_incoming_address))),getEmailContactName:()=>"ClickUp list: "+this.list.name},[b.Comment]:{description:$localize`:@@cu-email-modal__description_forward-email-to-address-create-comment:Send or forward an email to this address to create a comment:`,labelText:$localize`:@@cu-email-modal__label_task-email:Task email`,img:"",banner:!0,getEmail:()=>this.task.inbound_address,resetEmail:()=>this.emailToken.regenerateForTask(this.task).pipe(Object(a.a)(e=>(this.task.inbound_address=e.new_incoming_address,e.new_incoming_address))),getEmailContactName:()=>"ClickUp: "+this.task.name}},this.showEmailCopiedText=!1}ngOnInit(){this.email=this.typeConfig[this.emailType].getEmail(),this.updateMailTo()}resetEmail(){this.typeConfig[this.emailType].resetEmail().subscribe(e=>{this.email=e,this.updateMailTo(),this.showEmailCopiedText=!1})}emailCopiedSuccess(){this.showEmailCopiedText=!0}updateSkipModal(e){e?this.localStorage.set(g,"true"):this.localStorage.remove(g),this.skipModal=e}updateMailTo(){const e=`"${this.typeConfig[this.emailType].getEmailContactName()}"`;this.mailTo={link:"mailto:"+encodeURIComponent(e+"<")+this.email+encodeURIComponent(">"),clipboard:`${e}<${this.email}>`}}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(s),c.Wb(r.b))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-email-modal"]],decls:19,vars:13,consts:function(){let e,t,i,a;return e=$localize`:@@cu-email-modal__reset-email-address␟c35fe53a6dba2918196e5b5c1481987e15ab0312␟8899143749930866255: Reset email address `,t=$localize`:@@cu-email-modal__form-label_skip-and-copy-everytime␟bf43ea1a6696e808068f5583b6b113d6e37c49fd␟4097775041628882421: Skip this modal and copy link everytime `,i=$localize`:@@common_copy␟1979da7460819153e11d2078244645d94291b69c␟4323470180912194028:Copy`,a=$localize`:@@common_copied␟501c37ede010e2df9eb7b59ca7d6ac3d73ce146c␟5392341774767336507:Copied!`,[[1,"cu-email-modal__description"],[1,"cu-email-modal__label"],[1,"cu-email-modal__email"],[1,"cu-email-modal__email-link",3,"href"],["ngxClipboard","",1,"cu-email-modal__email-button",3,"cbContent","cbOnSuccess"],[4,"ngIf"],["class","cu-email-modal__help-image",3,"src",4,"ngIf"],[1,"cu-email-modal__options"],[1,"cu-email-modal__reset",3,"click"],e,[1,"cu-email-modal__skip"],["type","checkbox",1,"cu-checkbox__input",3,"value","ngModel","checked","ngModelChange"],[1,"cu-checkbox__label"],t,i,a,[1,"cu-email-modal__help-image",3,"src"]]},template:function(e,t){1&e&&(c.cc(0,"div",0),c.dd(1),c.bc(),c.cc(2,"div",1),c.dd(3),c.bc(),c.cc(4,"div",2),c.cc(5,"a",3),c.dd(6),c.bc(),c.cc(7,"div",4),c.qc("cbOnSuccess",function(){return t.emailCopiedSuccess()}),c.bd(8,m,2,0,"ng-container",5),c.bd(9,h,2,0,"ng-container",5),c.bc(),c.bc(),c.bd(10,p,1,1,"img",6),c.cc(11,"div",7),c.cc(12,"div",8),c.qc("click",function(){return t.resetEmail()}),c.gc(13,9),c.bc(),c.cc(14,"div",10),c.cc(15,"label"),c.cc(16,"input",11),c.qc("ngModelChange",function(e){return t.skipModal=e})("ngModelChange",function(e){return t.updateSkipModal(e)}),c.bc(),c.cc(17,"div",12),c.gc(18,13),c.bc(),c.bc(),c.bc(),c.bc()),2&e&&(c.Ob("banner",t.typeConfig[t.emailType].banner),c.Ib(1),c.fd(" ",t.typeConfig[t.emailType].description,"\n"),c.Ib(2),c.ed(t.typeConfig[t.emailType].labelText),c.Ib(2),c.Dc("href",t.mailTo.link,c.Xc),c.Ib(1),c.ed(t.email),c.Ib(1),c.Dc("cbContent",t.mailTo.clipboard),c.Ib(1),c.Dc("ngIf",!t.showEmailCopiedText),c.Ib(1),c.Dc("ngIf",t.showEmailCopiedText),c.Ib(1),c.Dc("ngIf",t.typeConfig[t.emailType].img),c.Ib(6),c.Dc("value",1)("ngModel",t.skipModal)("checked",t.skipModal))},directives:[l.a,u.q,d.b,d.p,d.s],styles:[".cu-email-modal__description{font:400 14px/22px Gotham Pro,Proxima Nova,arial,serif;color:#343434;margin-bottom:5px}.dark-theme .cu-email-modal__description{color:#d5d6d7}.cu-email-modal__description-new{background:#7b68ee;display:inline;padding:4px 6px;color:#fff;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;border-radius:4px}@supports (--theme-main-color:#7b68ee){.cu-email-modal__description-new{background:var(--theme-main-color)}}.cu-email-modal__description.banner{width:100%;background-color:rgba(65,148,246,.1);color:#292d34;display:flex;align-items:center;padding:0 0 0 10px;min-width:0;height:25px;border-left:4px solid #4194f6}.dark-theme .cu-email-modal__description.banner{color:#abaeb0}.cu-email-modal__options{display:flex;align-items:center;justify-content:space-between}.cu-email-modal__options .cu-checkbox__label{font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;text-transform:none}.cu-email-modal__label{font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#d4d4d4;text-transform:uppercase;margin-top:35px}.cu-email-modal__email{display:flex;align-items:center;justify-content:space-between;min-width:0;padding:5px 0;border-bottom:1px solid #e4e4e4;margin-bottom:30px}.dark-theme .cu-email-modal__email{border-bottom-color:#1e272e}.cu-email-modal__email-link{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 14px/18px Gotham Pro,Proxima Nova,arial,serif;color:#343434;cursor:pointer}.dark-theme .cu-email-modal__email-link{color:#d5d6d7}.cu-email-modal__email-link:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-modal__email-link:hover{color:var(--theme-main-color)}}.cu-email-modal__email-button{color:#7b68ee;display:flex;align-items:center;justify-content:center;margin-left:10px;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;cursor:pointer;padding:3px 10px 0;border:1px solid;border-radius:3px;height:23px;width:90px}@supports (--theme-main-color:#7b68ee){.cu-email-modal__email-button{color:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-email-modal__email-button:hover{color:#5f48ea;border-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-email-modal__email-button:hover{color:var(--theme-main-color-dark);border-color:var(--theme-main-color-dark)}}.cu-email-modal__help-image{width:100%;margin-bottom:30px}.cu-email-modal__reset{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;border-bottom:1px dashed;cursor:pointer;display:inline-flex}@supports (--theme-main-color:#7b68ee){.cu-email-modal__reset{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-email-modal__reset:hover{color:#5f48ea;border-bottom-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-email-modal__reset:hover{color:var(--theme-main-color-dark);border-bottom-color:var(--theme-main-color-dark)}}"],encapsulation:2}),e})()},KDRc:function(e,t,i){"use strict";i.d(t,"a",function(){return w});var a=i("fXoL"),c=i("2Vo4"),n=i("G9Ob"),o=i("lJxs"),s=i("dTHz"),r=i("O5gs"),l=i("UdVN"),u=i("ofXK"),d=i("S//e"),m=i("peMq");const h=["assignedCommentTemplate"];function p(e,t){1&e&&(a.ac(0),a.gc(1,9),a.Zb())}function b(e,t){1&e&&(a.ac(0),a.gc(1,10),a.Zb())}function g(e,t){if(1&e&&(a.cc(0,"div",11),a.dd(1),a.bc()),2&e){const e=a.uc();a.Ib(1),a.fd(" ",e.values.length," ")}}function f(e,t){if(1&e){const e=a.dc();a.cc(0,"span",14),a.qc("click",function(){return a.Uc(e),a.uc(2).toggleAll(!1)}),a.gc(1,15),a.bc()}}function _(e,t){if(1&e){const e=a.dc();a.cc(0,"span",14),a.qc("click",function(){return a.Uc(e),a.uc(2).toggleAll(!0)}),a.gc(1,16),a.bc()}}function v(e,t){if(1&e&&(a.bd(0,f,2,0,"span",12),a.vc(1,"async"),a.bd(2,_,2,0,"ng-template",null,13,a.cd)),2&e){const e=a.Rc(3),t=a.uc();a.Dc("ngIf",a.wc(1,2,t.allSelected$))("ngIfElse",e)}}function y(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-user-list-dropdown",19),a.qc("click",function(e){return e.stopPropagation()})("onChange",function(t){return a.Uc(e),a.uc(2).setAssignedCommentUsers(t)}),a.cc(1,"cu-user-group",20),a.qc("onUserRemove",function(t){return a.Uc(e),a.uc(2).removeAssignedCommentUser(t)}),a.bc(),a.bc()}if(2&e){const e=a.uc(2);a.Dc("users",e.allUsers)("multiChoice",!0)("selectedUsers",e.selectedUsers)("showReassign",!1)("enableFirstSelection",!1),a.Ib(1),a.Dc("users",e.selectedUsers)("showUserRemover",!0)("assignIcon",!1)("multiChoice",!0)("avatarSize",24)("showDropdown",!1)("modifier","cu-user-group_sm")}}function k(e,t){if(1&e&&(a.cc(0,"div",17),a.dd(1),a.bc(),a.bd(2,y,2,12,"cu-user-list-dropdown",18)),2&e){const e=t.item,i=a.uc();a.Ib(1),a.fd(" ",null==e?null:e.title," "),a.Ib(1),a.Dc("ngIf",i.allUsers)}}const I=function(){return["bottom-right","top-right","auto"]};let w=(()=>{class e{constructor(){this.values=n.c,this.filterLayout=!1,this.onChangeValues=new a.o,this.onOpen=new a.o,this.onClose=new a.o,this.onChangeAssignedCommentUserIds=new a.o,this.activityGroups=n.c,this.activitiesText=$localize`:@@cu-activity-fields-filter__activities:Activities`,this.values$=new c.a(this.values),this.items$=this.values$.pipe(Object(o.a)(e=>n.a.map(t=>({id:t.id,title:t.name,checkType:"check",checked:!e||e.some(e=>e===t.id),icon:t.icon,textTemplate:"comment_assigned"===t.id?this.assignedCommentTemplate:void 0})))),this.allSelected$=this.items$.pipe(Object(o.a)(e=>e.every(e=>e.checked))),this.LayoutVersion=s.b}ngOnInit(){}ngOnChanges(e){e.values&&this.values$.next(this.values),(e.assignedCommentUserIds||e.allUsers)&&(this.selectedUsers=(this.allUsers||[]).filter(e=>(this.assignedCommentUserIds||[]).includes(e.id)))}selectItem(e){this.onChangeValues.emit(e.checked?(this.values||n.c).filter(t=>t!==e.id):[...this.values||[],e.id])}toggleAll(e){const t=e?[...n.c]:[];this.onChangeValues.emit(t)}dropdownOpen(){this.onOpen.emit()}dropdownClose(){this.onClose.emit()}setAssignedCommentUsers(e){this.onChangeAssignedCommentUserIds.emit(e.map(e=>e.id))}removeAssignedCommentUser(e){this.setAssignedCommentUsers(this.selectedUsers.filter(t=>t.id!==e.id))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-activity-fields-filter"]],viewQuery:function(e,t){if(1&e&&a.jd(h,3),2&e){let e;a.Qc(e=a.rc())&&(t.assignedCommentTemplate=e.first)}},hostAttrs:[1,"cu-activity-fields-filter"],inputs:{values:"values",filterLayout:"filterLayout",layoutVersion:"layoutVersion",allUsers:"allUsers",assignedCommentUserIds:"assignedCommentUserIds"},outputs:{onChangeValues:"onChangeValues",onOpen:"onOpen",onClose:"onClose",onChangeAssignedCommentUserIds:"onChangeAssignedCommentUserIds"},features:[a.Gb],decls:13,vars:15,consts:function(){let e,t,i,a;return e=$localize`:@@common_filter-1␟5ca707824ab93066c7d9b44e1b8bf216725c2c22␟8829497237648100098:Filter`,t=$localize`:@@cu-activity-fields-filter__activities␟dd3b6c367381ddfa8f317b8e9b31c55368c65136␟2309808536212982229:Activities`,i=$localize`:@@common_unselect-all␟b4354e75c50de35d5e3a04bc3253363337d9e177␟8632185732539539517:Unselect All`,a=$localize`:@@common_select-all␟f8b403888712c826f65a73a5e2c8204fa95da187␟8716359834484489616:Select All`,[[3,"title","items","autoClose","titleTemplate","dropdownPlacement","menuContainerModifier","onSelect","onOpen","onClose"],[1,"cu-activity-fields-filter__inner"],[1,"cu-activity-fields-filter__icon",3,"icon"],[1,"cu-activity-fields-filter__label"],[4,"ngIf","ngIfElse"],["activitiesTmpl",""],["class","cu-activity-fields-filter__length",4,"ngIf"],["titleTemplate",""],["assignedCommentTemplate",""],e,t,[1,"cu-activity-fields-filter__length"],["class","cu-activity-fields-filter__all",3,"click",4,"ngIf","ngIfElse"],["notAll",""],[1,"cu-activity-fields-filter__all",3,"click"],i,a,[1,"cu-dropdown-list-item__title-text"],[3,"users","multiChoice","selectedUsers","showReassign","enableFirstSelection","click","onChange",4,"ngIf"],[3,"users","multiChoice","selectedUsers","showReassign","enableFirstSelection","click","onChange"],[3,"users","showUserRemover","assignIcon","multiChoice","avatarSize","showDropdown","modifier","onUserRemove"]]},template:function(e,t){if(1&e&&(a.cc(0,"cu-dropdown-list",0),a.qc("onSelect",function(e){return t.selectItem(e)})("onOpen",function(){return t.dropdownOpen()})("onClose",function(){return t.dropdownClose()}),a.vc(1,"async"),a.cc(2,"div",1),a.Xb(3,"div",2),a.cc(4,"div",3),a.bd(5,p,2,0,"ng-container",4),a.bd(6,b,2,0,"ng-template",null,5,a.cd),a.bc(),a.bd(8,g,2,1,"div",6),a.bc(),a.bc(),a.bd(9,v,4,4,"ng-template",null,7,a.cd),a.bd(11,k,3,2,"ng-template",null,8,a.cd)),2&e){const e=a.Rc(7),i=a.Rc(10);a.Dc("title",t.activitiesText)("items",a.wc(1,12,t.items$))("autoClose",!1)("titleTemplate",i)("dropdownPlacement",a.Gc(14,I))("menuContainerModifier","cu-activity-fields-filter__dropdown-menu"),a.Ib(2),a.Ob("cu-activity-fields-filter__inner_active",t.values&&t.values.length!==t.activityGroups.length),a.Ib(1),a.Dc("icon",t.filterLayout?"filter":t.layoutVersion===t.LayoutVersion.Six?"cu3-cog":"cu2-activity"),a.Ib(2),a.Dc("ngIf",t.filterLayout)("ngIfElse",e),a.Ib(3),a.Dc("ngIf",t.values&&t.values.length!==t.activityGroups.length)}},directives:[r.a,l.a,u.q,d.a,m.a],pipes:[u.b],styles:['.cu-activity-fields-filter__inner{position:relative;display:flex;align-items:center;padding:0 6px;height:28px;border-radius:3px;border:1px solid rgba(185,190,199,.5);background:#fff}.dark-theme .cu-activity-fields-filter__inner{background:#1e272e;border-color:#2b343b}.cu2-views-bar_v6 .cu-activity-fields-filter__inner{border:0;height:24px;margin-right:4px;background:transparent}.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner{background:transparent}.cu2-views-bar_v6 .cu-activity-fields-filter__inner:before{content:"";display:block;position:absolute;display:none;width:100%;height:100%;top:0;left:0;border-radius:6px;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner:before{background-color:#1e272e}.cu-activity-fields-filter__inner:hover{background:#f2f2f2}.dark-theme .cu-activity-fields-filter__inner:hover{background:#2b343b}.cu2-views-bar_v6 .cu-activity-fields-filter__inner:hover,.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner:hover{background:transparent}.cu2-views-bar_v6 .cu-activity-fields-filter__inner:hover:before{display:block}.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active:before{background:#7b68ee;display:block;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active:before{background:var(--theme-main-color)}}.cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:var(--theme-main-color)}}.dark-theme .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__icon{fill:var(--theme-main-color)}}.cu-activity-fields-filter__inner_active .cu-activity-fields-filter__label{color:#292d34}.dark-theme .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__label{color:#d5d6d7}.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__label{color:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__inner_active .cu-activity-fields-filter__label{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-activity-fields-filter__inner_active:hover:before{opacity:.15}.cu-activity-fields-filter__all{color:#7b68ee;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-activity-fields-filter__all{color:var(--theme-main-color)}}.cu-activity-fields-filter__icon{position:relative;width:11px;height:10px;margin-right:5px;fill:#b9bec7}.dark-theme .cu-activity-fields-filter__icon{fill:#7c828d}.cu2-views-bar_v6 .cu-activity-fields-filter__icon{width:16px;height:16px;margin-right:2px;fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__icon{fill:#abaeb0}.cu-activity-fields-filter__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;margin-bottom:-1px;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-activity-fields-filter__label{color:#abaeb0}.cu2-views-bar_v6 .cu-activity-fields-filter__label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin:0;color:#333}.dark-theme .cu2-views-bar_v6 .cu-activity-fields-filter__label{color:#abaeb0}.cu-activity-fields-filter__length{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee;position:relative;font:600 9px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff;border-radius:6px;margin-left:8px;padding:2px 4px 1px}@supports (--theme-main-color:#7b68ee){.cu-activity-fields-filter__length{background:var(--theme-main-color)}}.cu-activity-fields-filter__dropdown-menu{width:250px}.cu-activity-fields-filter__dropdown-menu .cu-user-list-dropdown{margin-left:10px}.cu-activity-fields-filter__dropdown-menu .cu-dropdown-list__body,.cu-activity-fields-filter__dropdown-menu .cu-dropdown-list__body .cu-search-list{max-height:440px}'],encapsulation:2,changeDetection:0}),e})()},KQLT:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var a=i("fXoL"),c=i("jJQC"),n=i("Ll/8"),o=i("dw0r"),s=i("G2WA"),r=i("Jf2N"),l=i("ofXK"),u=i("LdyQ"),d=i("MJvn"),m=i("n+1/"),h=i("UdVN"),p=i("NsZK"),b=i("tyNb"),g=i("UAD/");const f=["dropdown"];function _(e,t){if(1&e){const e=a.dc();a.cc(0,"div",11),a.qc("mouseenter",function(t){return a.Uc(e),a.uc().handleHover(t,!0)})("mouseleave",function(t){return a.Uc(e),a.uc().handleHover(t,!1)}),a.Xb(1,"div",12),a.cc(2,"div",13),a.gc(3,14),a.bc(),a.cc(4,"div",15),a.qc("click",function(i){a.Uc(e);const c=t.$implicit;return a.uc().openTask(i,c)}),a.cc(5,"a",16),a.dd(6),a.bc(),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.uc();a.Jb("data-task-id",null==e?null:e.id),a.Ib(1),a.Dc("icon","dependency-blocking-2"),a.Ib(3),a.Dc("cuTooltip",e.name||"#"+(null==e?null:e.id))("tooltipDisabledIfTextNotTruncated",!0),a.Ib(1),a.Dc("href",i.baseUrl+"/t/"+(null!=e&&e.custom_id&&e.team?e.team+"/"+e.custom_id:null==e?null:e.id),a.Xc),a.Ib(1),a.ed(e.name||e.custom_id||"#"+(null==e?null:e.id))}}function v(e,t){if(1&e){const e=a.dc();a.cc(0,"div",17),a.qc("mouseenter",function(t){return a.Uc(e),a.uc().handleHover(t,!0)})("mouseleave",function(t){return a.Uc(e),a.uc().handleHover(t,!1)}),a.Xb(1,"div",12),a.cc(2,"div",13),a.gc(3,18),a.bc(),a.cc(4,"div",15),a.qc("click",function(i){a.Uc(e);const c=t.$implicit;return a.uc().openTask(i,c)}),a.cc(5,"a",16),a.dd(6),a.bc(),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.uc();a.Jb("data-task-id",null==e?null:e.id),a.Ib(1),a.Dc("icon","dependency-waiting-2"),a.Ib(3),a.Dc("cuTooltip",e.name||"#"+(null==e?null:e.id))("tooltipDisabledIfTextNotTruncated",!0),a.Ib(1),a.Dc("href",i.baseUrl+"/t/"+(null!=e&&e.custom_id&&e.team?e.team+"/"+e.custom_id:null==e?null:e.id),a.Xc),a.Ib(1),a.ed(e.name||e.custom_id||"#"+(null==e?null:e.id))}}function y(e,t){if(1&e){const e=a.dc();a.cc(0,"div",19),a.qc("mouseenter",function(t){return a.Uc(e),a.uc().handleHover(t,!0)})("mouseleave",function(t){return a.Uc(e),a.uc().handleHover(t,!1)}),a.Xb(1,"div",12),a.cc(2,"div",13),a.dd(3,"Closed dependency"),a.bc(),a.cc(4,"div",15),a.qc("click",function(i){a.Uc(e);const c=t.$implicit;return a.uc().openTask(i,c)}),a.cc(5,"a",16),a.dd(6),a.bc(),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.uc();a.Jb("data-task-id",null==e?null:e.id),a.Ib(1),a.Dc("icon","dependency-closed-2"),a.Ib(3),a.Dc("cuTooltip",e.name||"#"+(null==e?null:e.id))("tooltipDisabledIfTextNotTruncated",!0),a.Ib(1),a.Dc("href",i.baseUrl+"/t/"+(null!=e&&e.custom_id&&e.team?e.team+"/"+e.custom_id:null==e?null:e.id),a.Xc),a.Ib(1),a.ed(e.name||e.custom_id||"#"+(null==e?null:e.id))}}function k(e,t){1&e&&(a.ac(0),a.gc(1,24),a.Zb())}function I(e,t){if(1&e&&a.dd(0),2&e){const e=a.uc().$implicit;a.fd(" ",(null==e?null:e.name)||(null==e?null:e.custom_id)||"#"+(null==e?null:e.id)," ")}}function w(e,t){if(1&e){const e=a.dc();a.cc(0,"div",20),a.qc("mouseenter",function(t){return a.Uc(e),a.uc().handleHover(t,!0)})("mouseleave",function(t){return a.Uc(e),a.uc().handleHover(t,!1)}),a.Xb(1,"div",12),a.cc(2,"div",13),a.gc(3,21),a.bc(),a.cc(4,"div",15),a.qc("click",function(i){a.Uc(e);const c=t.$implicit;return a.uc().openTask(i,c)}),a.cc(5,"a",16),a.bd(6,k,2,0,"ng-container",22),a.bd(7,I,1,1,"ng-template",null,23,a.cd),a.bc(),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.Rc(8),c=a.uc();a.Jb("data-task-id",null==e?null:e.id),a.Ib(1),a.Dc("icon","cu2-link"),a.Ib(3),a.Dc("cuTooltip",(null==e?null:e.name)||"#"+(null==e?null:e.id))("tooltipDisabledIfTextNotTruncated",!0),a.Ib(1),a.Dc("href",c.baseUrl+"/t/"+(null!=e&&e.custom_id&&null!=e&&e.team?e.team+"/"+e.custom_id:null==e?null:e.id),a.Xc),a.Ib(1),a.Dc("ngIf",!(null!=e&&e.name))("ngIfElse",i)}}const T=function(e,t){return["/",e,"goals",t]};function x(e,t){if(1&e){const e=a.dc();a.cc(0,"div",25),a.Xb(1,"div",12),a.cc(2,"div",13),a.gc(3,26),a.bc(),a.cc(4,"div",27),a.qc("click",function(){return a.Uc(e),a.uc().closeTask()}),a.cc(5,"a",16),a.dd(6),a.bc(),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.uc();a.Ib(1),a.Dc("icon","crosshairs"),a.Ib(3),a.Dc("routerLink",a.Ic(6,T,i.teamId,e.pretty_id))("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0),a.Ib(1),a.Dc("href",i.baseUrl+"/"+i.teamId+"/goals/"+e.pretty_id,a.Xc),a.Ib(1),a.ed(e.name)}}function C(e,t){if(1&e){const e=a.dc();a.cc(0,"div",28),a.qc("click",function(){return a.Uc(e),a.uc().openDependenciesModal()}),a.tc(),a.cc(1,"svg",29),a.cc(2,"g",30),a.Xb(3,"path",31),a.cc(4,"g",32),a.Xb(5,"path",33),a.Xb(6,"path",34),a.Xb(7,"path",35),a.bc(),a.bc(),a.bc(),a.bc()}}function O(e,t){if(1&e){const e=a.dc();a.cc(0,"div"),a.cc(1,"cu-task-popup",36),a.qc("onEnter",function(){a.Uc(e);const t=a.uc();return t.taskPopupHandler.handleHover$.next({el:t.taskPopupHandler.hoveredElement,hovered:!0})})("onLeave",function(){a.Uc(e);const t=a.uc();return t.taskPopupHandler.handleHover$.next({el:t.taskPopupHandler.hoveredElement,hovered:!1})}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("taskId",e.taskPopupHandler.hoveredTaskId)("allowRemove",!1)}}let S=(()=>{class e{constructor(e,t){this.sharedTaskService=e,this.modalService=t,this.onOpenDependencies=new a.o,this.onCloseTask=new a.o,this.onLoadDependencies=new a.o,this.baseUrl=window.location.origin,this.trackById=Object(c.d)("id"),this.taskPopupHandler=new o.a}ngAfterViewInit(){this.taskPopupHandler.setDropdown(this.dropdown)}ngOnChanges(e){e.taskBlockers&&(this.openBlockers=this.taskBlockers.filter(e=>!Object(n.k)(e.status)),this.closedBlockers=this.taskBlockers.filter(e=>Object(n.k)(e.status))),e.dependencies&&this.onLoadDependencies.emit({task:this.mainTask,dependencies:this.dependencies||[]})}ngOnInit(){}ngOnDestroy(){this.taskPopupHandler&&(this.taskPopupHandler.destroy(),this.taskPopupHandler=null)}openDependenciesModal(){this.canOpenDependencies&&this.onOpenDependencies.emit()}openTask(e,t){e.stopPropagation(),e.preventDefault(),this.sharedTaskService.clickTaskLink({id:t.id,customId:t.custom_id,teamId:t.team},e,!0),this.modalService.closeAll()}closeTask(){this.onCloseTask.emit()}handleHover(e,t){this.taskPopupHandler.handleHover$.next({el:e.target,hovered:t})}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(s.a),a.Wb(r.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-task-blockers"]],viewQuery:function(e,t){if(1&e&&a.jd(f,3),2&e){let e;a.Qc(e=a.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-task-blockers"],inputs:{dependencies:"dependencies",mainTask:"mainTask",tasksLinked:"tasksLinked",goals:"goals",teamId:"teamId",canOpenDependencies:"canOpenDependencies",taskBlockers:"taskBlockers",tasksBlocked:"tasksBlocked",modifier:"modifier"},outputs:{onOpenDependencies:"onOpenDependencies",onCloseTask:"onCloseTask",onLoadDependencies:"onLoadDependencies"},features:[a.Gb],decls:11,vars:15,consts:function(){let e,t,i,a,c;return e=$localize`:@@common_waiting-on␟80ce1d6dc82c3daa0d60ceab6259e6f04f18019f␟4907060407574734385: Waiting on `,t=$localize`:@@common_blocking-dependency-1␟e325bc8a0c014ae5bddd2d58f29e2fee6a36982b␟3286344799246270991: Blocking `,i=$localize`:@@cu-task-blockers__linked-to␟da63456a024110648abc820434555b32becf4a34␟4192059338792777456: Linked to `,a=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,c=$localize`:@@common_goal␟6da69a256527b24bcb1c549421c26845b46ef63a␟502130212127803987:Goal`,[[1,"cu-task-blockers__body",3,"ngClass"],["class","cu-task-blockers__item blocker",3,"mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-task-blockers__item waiting",3,"mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-task-blockers__item closed",3,"mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-task-blockers__item linked",3,"mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-task-blockers__item goals",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-task-blockers__button",3,"click",4,"ngIf"],["cuDropdown","",3,"dropdownPreventDocumentScroll","dropdownHostElement","dropdownRightEdgePadding"],["dropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],[1,"cu-task-blockers__item","blocker",3,"mouseenter","mouseleave"],[1,"cu-task-blockers__item-icon",3,"icon"],[1,"cu-task-blockers__item-label"],e,["tooltipLifeTime","15000","tooltipDelay","500",1,"cu-task-blockers__item-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","click"],[3,"href"],[1,"cu-task-blockers__item","waiting",3,"mouseenter","mouseleave"],t,[1,"cu-task-blockers__item","closed",3,"mouseenter","mouseleave"],[1,"cu-task-blockers__item","linked",3,"mouseenter","mouseleave"],i,[4,"ngIf","ngIfElse"],["accessibleTask",""],a,[1,"cu-task-blockers__item","goals"],c,["tooltipLifeTime","15000","tooltipDelay","500",1,"cu-task-blockers__item-name",3,"routerLink","cuTooltip","tooltipDisabledIfTextNotTruncated","click"],[1,"cu-task-blockers__button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 37 37"],["fill","none","fill-rule","evenodd"],["d","M17.5,35 C27.1649831,35 35,27.1649831 35,17.5 C35,7.83501688 27.1649831,0 17.5,\n                    0 C7.83501688,0 0,7.83501688 0,17.5 C0,27.1649831 7.83501688,35 17.5,35 Z","stroke-dasharray","3","transform","translate(1 1)",1,"cu-stroke"],[1,"cu-stroke"],["d","M1.575,3.9375 C1.01581169,3.9375 0.5625,3.43382034 0.5625,2.8125 L0.5625,1.6875 C0.5625,\n                      1.06617966 1.01581169,0.5625 1.575,0.5625 L9.675,0.5625 C10.2341883,0.5625 10.6875,\n                      1.06617966 10.6875,1.6875 L10.6875,2.8125 C10.6875,3.43382034 10.2341883,3.9375 9.675,\n                      3.9375 L1.575,3.9375 Z","transform","translate(9.5 9.5)"],["d","M4.95,10.6875 C4.3908117,10.6875 3.9375,10.1838203 3.9375,9.5625 L3.9375,8.4375 C3.9375,\n                      7.81617966 4.3908117,7.3125 4.95,7.3125 L13.05,7.3125 C13.6091883,7.3125 14.0625,\n                      7.81617966 14.0625,8.4375 L14.0625,9.5625 C14.0625,10.1838203 13.6091883,10.6875 13.05,\n                      10.6875 L4.95,10.6875 Z","fill-rule","nonzero","transform","translate(9.5 9.5)",1,"cu-fill"],["d","M8.325,17.4375 C7.7658117,17.4375 7.3125,16.9338203 7.3125,16.3125 L7.3125,\n                      15.1875 C7.3125,14.5661797 7.7658117,14.0625 8.325,14.0625 L16.425,14.0625 C16.9841883,\n                      14.0625 17.4375,14.5661797 17.4375,15.1875 L17.4375,16.3125 C17.4375,16.9338203 16.9841883,\n                      17.4375 16.425,17.4375 L8.325,17.4375 Z","transform","translate(9.5 9.5)"],[3,"taskId","allowRemove","onEnter","onLeave"]]},template:function(e,t){1&e&&(a.cc(0,"div",0),a.bd(1,_,7,6,"div",1),a.bd(2,v,7,6,"div",2),a.bd(3,y,7,6,"div",3),a.bd(4,w,9,7,"div",4),a.bd(5,x,7,9,"div",5),a.bd(6,C,8,0,"div",6),a.bc(),a.cc(7,"div",7,8),a.Xb(9,"div",9),a.bd(10,O,2,2,"div",10),a.bc()),2&e&&(a.Dc("ngClass",t.modifier),a.Ib(1),a.Dc("ngForOf",t.openBlockers)("ngForTrackBy",t.trackById),a.Ib(1),a.Dc("ngForOf",t.tasksBlocked)("ngForTrackBy",t.trackById),a.Ib(1),a.Dc("ngForOf",t.closedBlockers)("ngForTrackBy",t.trackById),a.Ib(1),a.Dc("ngForOf",t.tasksLinked)("ngForTrackBy",t.trackById),a.Ib(1),a.Dc("ngForOf",t.goals)("ngForTrackBy",t.trackById),a.Ib(1),a.Dc("ngIf",t.canOpenDependencies),a.Ib(1),a.Dc("dropdownPreventDocumentScroll",!1)("dropdownHostElement",t.taskPopupHandler.hoveredElement)("dropdownRightEdgePadding",10))},directives:[l.o,l.p,l.q,u.b,d.a,m.a,h.a,p.a,b.i,g.a],styles:['.cu-task-blockers{min-width:0;width:100%}.cu-task-blockers__body{flex-wrap:wrap;cursor:default;display:flex;align-items:center;margin-top:10px}.cu-task-blockers__body_task-view{padding-left:30px;padding-right:20px;margin-top:20px}.cu-task-blockers__item{display:flex;align-items:center;border-radius:2px;margin-bottom:5px;margin-right:5px;padding:0 10px 0 6px;width:auto;min-width:0;height:25px}.cu-task-blockers__item-icon{width:12px;height:12px;margin-right:5px;position:relative;top:-1px}.cu-task-blockers__item.blocker{background-color:#fff1d7}.dark-theme .cu-task-blockers__item.blocker{background-color:rgba(255,204,0,.3)}.cu-task-blockers__item.blocker .cu-task-blockers__item-name,.cu-task-blockers__item.blocker .cu-task-blockers__item-name a{color:#ef9e00}.cu-task-blockers__item.blocker .icon use{fill:#e2a200}.cu-task-blockers__item.waiting{background-color:#f9d7d7}.dark-theme .cu-task-blockers__item.waiting{background-color:rgba(209,100,100,.3)}.cu-task-blockers__item.waiting .cu-task-blockers__item-name,.cu-task-blockers__item.waiting .cu-task-blockers__item-name a{color:#e35354}.cu-task-blockers__item.waiting .icon use{fill:#e35355}.cu-task-blockers__item.closed{background-color:#caedc0}.dark-theme .cu-task-blockers__item.closed{background-color:rgba(103,203,72,.3)}.cu-task-blockers__item.closed .cu-task-blockers__item-name,.cu-task-blockers__item.closed .cu-task-blockers__item-name a{color:#326722}.dark-theme .cu-task-blockers__item.closed .cu-task-blockers__item-name,.dark-theme .cu-task-blockers__item.closed .cu-task-blockers__item-name a{color:#67cb48}.cu-task-blockers__item.closed .cu-task-blockers__item-icon{fill:#326722;stroke:#326722}.dark-theme .cu-task-blockers__item.closed .cu-task-blockers__item-icon{fill:#67cb48;stroke:#67cb48}.cu-task-blockers__item.linked{background-color:#f5f3fd}.dark-theme .cu-task-blockers__item.linked{background-color:rgba(123,104,238,.3)}.cu-task-blockers__item.linked .cu-task-blockers__item-name,.cu-task-blockers__item.linked .cu-task-blockers__item-name a{color:#7b68ee}.cu-task-blockers__item.linked .icon use{fill:#5f48ea}.cu-task-blockers__item.goals{background-color:#effaff}.dark-theme .cu-task-blockers__item.goals{background-color:rgba(74,144,226,.3)}.cu-task-blockers__item.goals .cu-task-blockers__item-name,.cu-task-blockers__item.goals .cu-task-blockers__item-name a{color:#65cff1}.cu-task-blockers__item.goals .icon use{fill:#65cff1}.cu-task-blockers__item-label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:4px;flex-shrink:0;color:#343434}.dark-theme .cu-task-blockers__item-label{color:#d5d6d7}.cu-task-blockers__item-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-blockers__item-name{font-family:var(--global-font-support)}}.cu-task-blockers__item-name:hover{text-decoration:underline}.cu-task-blockers__button{width:25px;height:25px;margin-bottom:5px;cursor:pointer}.cu-task-blockers__button .cu-stroke{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;stroke:#aeacb0}.cu-task-blockers__button .cu-fill{fill:#aeacb0}.cu-task-blockers__button:hover .cu-stroke{stroke:var(--theme-main-color)}'],encapsulation:2,changeDetection:0}),e})()},LdB9:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("ofXK"),c=i("tyNb"),n=i("1M0N"),o=i("y71m"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.l,n.a,o.a]]}),e})()},"MAo+":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},NZfI:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var a=i("fXoL"),c=i("42vj"),n=i("jJQC"),o=i("keUj"),s=i("ofXK"),r=i("UdVN");const l=["dropdown"],u=function(e,t){return{fill:e,"border-color":t}};function d(e,t){if(1&e&&(a.cc(0,"div"),a.Xb(1,"div",6),a.bc()),2&e){const e=t.$implicit;a.Ib(1),a.Dc("icon","-1"===e.id?"priorities-empty":"priorities")("ngStyle",a.Ic(2,u,e.color,e.color))}}function m(e,t){if(1&e&&(a.cc(0,"div",7),a.dd(1),a.bc()),2&e){const e=a.uc();a.Ib(1),a.fd(" ",e.placeholder," ")}}function h(e,t){1&e&&a.Xb(0,"div",8)}let p=(()=>{class e{constructor(){this.placeholder="",this.closeOnInsideClick=!0,this.readonly=!1,this.onChange=new a.o,this.priorities=[],this.trackById=Object(n.d)("id")}ngOnInit(){this.autoOpen&&setTimeout(()=>this.dropdown.open())}ngOnChanges(e){e.value&&(this.priorities=(this.value||[]).map(e=>c.a.find(t=>t.id===e)).filter(Boolean))}open(){this.dropdown.open()}togglePriority(e){const t=this.value.findIndex(t=>t===e.id);this.onChange.emit(-1===t?[...this.value,e.id]:[...this.value.slice(0,t),...this.value.slice(t+1)])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-priority-filter"]],viewQuery:function(e,t){if(1&e&&a.jd(l,3),2&e){let e;a.Qc(e=a.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-priority-filter"],inputs:{autoOpen:"autoOpen",value:"value",placeholder:"placeholder",closeOnInsideClick:"closeOnInsideClick",readonly:"readonly"},outputs:{onChange:"onChange"},features:[a.Gb],decls:6,vars:8,consts:[[3,"noPriority","prioritySelected","closeOnInsideClick","disabled","onChange"],["dropdown",""],[1,"cu-priority-filter__value"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-priority-filter__value-placeholder",4,"ngIf"],["class","cu-priority-filter__down","icon","angle-right",4,"ngIf"],[1,"cu-priority-filter__icon",3,"icon","ngStyle"],[1,"cu-priority-filter__value-placeholder"],["icon","angle-right",1,"cu-priority-filter__down"]],template:function(e,t){1&e&&(a.cc(0,"cu-priority-list-dropdown",0,1),a.qc("onChange",function(e){return t.togglePriority(e)}),a.cc(2,"div",2),a.bd(3,d,2,5,"div",3),a.bd(4,m,2,1,"div",4),a.bd(5,h,1,0,"div",5),a.bc(),a.bc()),2&e&&(a.Dc("noPriority",!0)("prioritySelected",t.priorities)("closeOnInsideClick",t.closeOnInsideClick)("disabled",t.readonly),a.Ib(3),a.Dc("ngForOf",t.priorities)("ngForTrackBy",t.trackById),a.Ib(1),a.Dc("ngIf",t.placeholder&&!(null!=t.priorities&&t.priorities.length)),a.Ib(1),a.Dc("ngIf",!t.readonly))},directives:[o.a,s.p,s.q,r.a,s.t],styles:[".cu-priority-filter{width:100%;display:flex}.cu-priority-filter__icon{width:16px;height:16px}.cu-priority-filter__value{display:flex;align-items:center}.cu-priority-filter__value-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif}.cu-priority-filter__down{width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px;transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s}.cu-priority-filter__down:hover{transition:none}.dark-theme .cu-priority-filter__down{fill:#abaeb0}.cu-dropdown_open>div>.cu-priority-filter__down{transform:rotate(-90deg)}"],encapsulation:2,changeDetection:0}),e})()},Nv8m:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("DH7j"),c=i("yCtX"),n=i("l7GE"),o=i("ZUHj");function s(...e){if(1===e.length){if(!Object(a.a)(e[0]))return e[0];e=e[0]}return Object(c.a)(e,void 0).lift(new r)}class r{call(e,t){return t.subscribe(new l(e))}}class l extends n.a{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){const t=e[i],a=Object(o.a)(this,t,void 0,i);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}}notifyNext(e,t,i){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==i){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}},"O/4l":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("fXoL"),c=i("xog/");let n=(()=>{class e{constructor(e){this.helpersService=e}transform(e,t="You",i="Unassigned"){return e&&Array.isArray(e)?e.map(e=>this.helpersService.getUserName(e,t,i)).join(", "):""}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(c.b))},e.\u0275pipe=a.Vb({name:"usernames",type:e,pure:!0}),e})()},O3ed:function(e,t,i){"use strict";i.d(t,"a",function(){return N});var a=i("fXoL"),c=i("El8o"),n=i("GXRk"),o=i("KzhV"),s=i("ofXK"),r=i("LdyQ"),l=i("MJvn"),u=i("UdVN"),d=i("n+1/");let m=(()=>{class e{constructor(){this.lastDone=new a.o}ngAfterViewInit(){this.isLast&&this.lastDone.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=a.Rb({type:e,selectors:[["","isLast",""]],inputs:{isLast:"isLast"},outputs:{lastDone:"lastDone"}}),e})();var h=i("OBnU"),p=i("sl2P");const b=["statusBadge"],g=["dropdown"];function f(e,t){1&e&&a.Xb(0,"div",15),2&e&&a.Dc("icon","handle4")}const _=function(){return["top-left","left","auto"]},v=function(e){return{background:e}};function y(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-color-picker-dropdown",16),a.qc("selectedColorChange",function(t){return a.Uc(e),a.uc().status.color=t})("selectedColorChange",function(t){return a.Uc(e),a.uc().colorPickerChange(t)})("dropdownOpen",function(){a.Uc(e);const t=a.uc();return t.blurStatus(t.status)}),a.cc(1,"div",17),a.qc("lastDone",function(){return a.Uc(e),a.uc().openColorPicker(!0)}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Dc("presetColors",e.PRESET_COLORS)("selectedColor",e.status.color)("showClose",!0)("panelWidth",275)("dropdownPlacement",a.Gc(7,_)),a.Ib(1),a.Dc("ngStyle",a.Hc(8,v,e.status.color))("isLast",e.last)}}function k(e,t){if(1&e){const e=a.dc();a.cc(0,"div",18),a.qc("click",function(){a.Uc(e);const t=a.uc();return t.blurStatus(t.status)}),a.bc()}if(2&e){const e=a.uc();a.Dc("ngStyle",a.Hc(1,v,e.status.color))}}function I(e,t){1&e&&a.Xb(0,"div",19)}function w(e,t){1&e&&(a.cc(0,"div"),a.Xb(1,"div",20),a.bc()),2&e&&(a.Ib(1),a.Dc("icon","check"))}function T(e,t){if(1&e){const e=a.dc();a.cc(0,"div",24),a.qc("click",function(){return a.Uc(e),a.uc(2).openColorPicker(!1)}),a.Xb(1,"div",30),a.cc(2,"div",26),a.gc(3,31),a.bc(),a.bc()}2&e&&(a.Ib(1),a.Dc("icon","paintbrush"))}function x(e,t){if(1&e){const e=a.dc();a.cc(0,"div",32),a.Xb(1,"div",33),a.cc(2,"div",34),a.ac(3),a.gc(4,35),a.Zb(),a.cc(5,"cu-toggle-switch",36),a.qc("onChange",function(){return a.Uc(e),a.uc(2).changeStatusDoneType()}),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc(2);a.Ib(5),a.Dc("checked",e.status.type===e.StatusTypes.Done)}}function C(e,t){if(1&e){const e=a.dc();a.cc(0,"div",24),a.qc("click",function(){return a.Uc(e),a.uc(2).removeStatus()}),a.Xb(1,"div",37),a.cc(2,"div",26),a.gc(3,38),a.bc(),a.bc()}2&e&&(a.Ib(1),a.Dc("icon","close"))}function O(e,t){if(1&e){const e=a.dc();a.cc(0,"div",21),a.cc(1,"div",22),a.cc(2,"div",23),a.cc(3,"div",24),a.qc("click",function(){a.Uc(e);const t=a.uc();return t.renameStatus(t.status,t.i)}),a.Xb(4,"div",25),a.cc(5,"div",26),a.gc(6,27),a.bc(),a.bc(),a.bd(7,T,4,1,"div",28),a.bd(8,x,6,1,"div",29),a.bd(9,C,4,1,"div",28),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(4),a.Dc("icon","edit"),a.Ib(3),a.Dc("ngIf",e.canEditColor),a.Ib(1),a.Dc("ngIf",e.allowMarkAsDone),a.Ib(1),a.Dc("ngIf",e.canDelete)}}const S=function(e){return{cursor:e}},D=function(e){return{"cu-status-badge__text_editing":e}},A=function(e){return{color:e}},j=function(e){return{display:e}};let N=(()=>{class e{constructor(){this.StatusTypes=n.g,this.isSimple=!1,this.allowMarkAsDone=!1,this.canDrag=!0,this.canDelete=!0,this.canEditColor=!0,this.confirmRemoveStatus=new a.o,this.handleStatusChange=new a.o,this.handleStatusKeydown=new a.o,this.handleStatusType=new a.o,this.closeOtherPickers=new a.o,this.colorChanged=new a.o,this.editStatusIndex=!1,this.colorChange=!1,this.initColorChange=!1}ngOnInit(){}blurStatus(e){e.editing=!1,this.editStatusIndex=null,this.statusBadge.nativeElement.blur()}preventEnter(e){13!==e.keyCode&&9!==e.keyCode||e.preventDefault()}editStatus(e,t){e.editing=!0}renameStatus(e,t){this.statusBadge.nativeElement.focus(),this.editStatus(e,t),this.closeDropdown()}openColorPicker(e=!1){!this.isNewStatus&&e||setTimeout(()=>{this.colorPicker.open(),e&&this.closeOtherPickers.emit(this.colorPicker)}),this.closeDropdown()}onFocus(){this.editStatus(this.status,this.i),Object(c.b)(this.statusBadge.nativeElement)}colorPickerChange(e){this.initColorChange&&(this.colorChange=!0,this.colorChanged.emit({color:this.status.color})),this.initColorChange=!0}changeStatusDoneType(){this.status.type=this.status.type===n.g.Done?n.g.Custom:n.g.Done,this.handleStatusType.emit(this.status.type)}closeDropdown(){this.dropdown&&this.dropdown.close()}removeStatus(){this.confirmRemoveStatus.emit({index:this.i,status:this.status}),this.closeDropdown()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-status-badge"]],viewQuery:function(e,t){if(1&e&&(a.jd(b,3),a.jd(o.a,1),a.jd(g,3)),2&e){let e;a.Qc(e=a.rc())&&(t.statusBadge=e.first),a.Qc(e=a.rc())&&(t.colorPicker=e.first),a.Qc(e=a.rc())&&(t.dropdown=e.first)}},inputs:{status:"status",last:"last",i:"i",c:"c",errorIndex:"errorIndex",isNewStatus:"isNewStatus",isModal:"isModal",PRESET_COLORS:"PRESET_COLORS",modifier:"modifier",isSimple:"isSimple",allowMarkAsDone:"allowMarkAsDone",canDrag:"canDrag",canDelete:"canDelete",canEditColor:"canEditColor"},outputs:{confirmRemoveStatus:"confirmRemoveStatus",handleStatusChange:"handleStatusChange",handleStatusKeydown:"handleStatusKeydown",handleStatusType:"handleStatusType",closeOtherPickers:"closeOtherPickers",colorChanged:"colorChanged"},decls:18,vars:30,consts:function(){let e,t,i,a;return e=$localize`:@@common_rename␟e26f9cf3666aace4e524b1505c9795d76d87738d␟6041115344061899387:Rename`,t=$localize`:@@common_change-color␟1bd3f37f8dc19221d1a4be957379cc8934264f78␟403785455745920583: Change Color `,i=$localize`:@@cu-status-badge__form-label_set-as-done␟c850cbc802bddada571cbe7a9406b3d231edf967␟7794921306488275849:Set as done`,a=$localize`:@@cu-status-badge__delete-status␟d444ef6998a9a77fdffb0be2789ef33d8f7cbdda␟7794395714603344129: Delete Status `,[[1,"cu-status-badge",3,"ngClass"],[1,"cu-status-badge__handler",3,"ngStyle","mousedown"],["class","cu-status-badge__handler-icon",3,"icon",4,"ngIf"],[3,"presetColors","selectedColor","showClose","panelWidth","dropdownPlacement","selectedColorChange","dropdownOpen",4,"ngIf","ngIfElse"],["noEditColor",""],["contenteditable","true","spellcheck","false",1,"cu-status-badge__text",3,"ngClass","ngStyle","keydown","keyup","blur","focus"],["statusBadge",""],["class","cu-ct__done-list","icon","status-done",4,"ngIf"],["cuDropdown","",1,"cu-dropdown",3,"dropdownCloseOnInsideClick"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle",3,"ngStyle"],["toggle",""],[1,"cu-ct__ellipsis",3,"icon"],[4,"ngIf"],["class","cu-dropdown__menu cu-dropdown__menu_right cu-tag-list__menu",4,"cuDropdownMenu"],[1,"cu-status-badge__handler-icon",3,"icon"],[3,"presetColors","selectedColor","showClose","panelWidth","dropdownPlacement","selectedColorChange","dropdownOpen"],[1,"cu-status-badge__color",3,"ngStyle","isLast","lastDone"],[1,"cu-status-badge__color",3,"ngStyle","click"],["icon","status-done",1,"cu-ct__done-list"],[1,"cu-ct__check",3,"icon"],[1,"cu-dropdown__menu","cu-dropdown__menu_right","cu-tag-list__menu"],[1,"cu-tag-list"],[1,"cu-tag-list__body"],[1,"cu-plate","cu-plate-sm","cu-plate_interact",3,"click"],[1,"cu-ct__rename",3,"icon"],[1,"cu-plate__text"],e,["class","cu-plate cu-plate-sm cu-plate_interact",3,"click",4,"ngIf"],["class","cu-plate cu-plate_right-icon cu-plate_interact",4,"ngIf"],[1,"cu-ct__paintbrush",3,"icon"],t,[1,"cu-plate","cu-plate_right-icon","cu-plate_interact"],["icon","status-done",1,"cu-ct__done"],[1,"cu-plate__text","cu-plate__text_right-icon"],i,[3,"checked","onChange"],[1,"cu-ct__close",3,"icon"],a]},template:function(e,t){if(1&e&&(a.cc(0,"div",0),a.vc(1,"isColorDarkerThan"),a.cc(2,"div",1),a.qc("mousedown",function(){return t.blurStatus(t.status)}),a.bd(3,f,1,1,"div",2),a.bc(),a.bd(4,y,2,10,"cu-color-picker-dropdown",3),a.bd(5,k,1,3,"ng-template",null,4,a.cd),a.cc(7,"div",5,6),a.qc("keydown",function(e){return t.preventEnter(e)})("keyup",function(e){return t.handleStatusKeydown.emit({event:e,isModal:t.isModal,index:t.i})})("blur",function(e){return t.handleStatusChange.emit({event:e,index:t.i})})("focus",function(){return t.onFocus()}),a.dd(9),a.bc(),a.bd(10,I,1,0,"div",7),a.cc(11,"div",8,9),a.cc(13,"div",10,11),a.Xb(15,"div",12),a.bc(),a.bd(16,w,2,1,"div",13),a.bd(17,O,10,4,"div",14),a.bc(),a.bc()),2&e){const e=a.Rc(6);a.Ob("cu-status-badge__error",t.errorIndex===t.i)("cu-status-badge_light",!a.xc(1,19,null==t.status?null:t.status.color,.86)),a.Dc("ngClass",t.modifier),a.Ib(2),a.Ob("cu-draggable",t.canDrag),a.Dc("ngStyle",a.Hc(22,S,t.canDrag?"":"pointer")),a.Ib(1),a.Dc("ngIf",t.canDrag),a.Ib(1),a.Dc("ngIf",t.canEditColor)("ngIfElse",e),a.Ib(3),a.Dc("ngClass",a.Hc(24,D,t.status.editing))("ngStyle",a.Hc(26,A,t.status.editing?"#828588":t.status.color)),a.Ib(2),a.fd(" ",t.status.status," "),a.Ib(1),a.Dc("ngIf",t.status.type===t.StatusTypes.Done||t.isSimple),a.Ib(1),a.Dc("dropdownCloseOnInsideClick",!1),a.Ib(2),a.Dc("ngStyle",a.Hc(28,j,t.status.editing?"none":"")),a.Ib(2),a.Dc("icon","ellipsis"),a.Ib(1),a.Dc("ngIf",t.status.editing)}},directives:[s.o,s.t,s.q,r.b,l.a,u.a,d.a,o.a,m,h.a],pipes:[p.a],encapsulation:2}),e})()},PHOl:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("ofXK"),c=i("9Ejp"),n=i("K0KF"),o=i("3Pt+"),s=i("e6ZX"),r=i("5+WD"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[a.c,o.l,c.b,n.a,s.a,r.f]]}),e})()},QaOb:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var a=i("ofXK"),c=i("gb9A"),n=i("K0KF"),o=i("csDc"),s=i("C8uC"),r=i("KyjD"),l=i("mcWp"),u=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,s.LoaderModule,r.a,l.a]]}),e})()},RAxo:function(e,t,i){"use strict";i.d(t,"a",function(){return E});var a=i("fTg4"),c=i("bx+h"),n=i("ofXK"),o=i("3Pt+"),s=i("9Ejp"),r=i("5FVs"),l=i("g/Dw"),u=i("KyjD"),d=i("VBI8"),m=i("mcWp"),h=i("1M0N"),p=i("LdB9"),b=i("HiD6"),g=i("EDFS"),f=i("v65A"),_=i("KsR4"),v=i("y71m"),y=i("dsEp"),k=i("C8uC"),I=i("csDc"),w=i("bFKe"),T=i("4x9P"),x=i("Cx3j"),C=i("aVmG"),O=i("tGh3"),S=i("gb9A"),D=i("K0KF"),A=i("/SUI"),j=i("cTuH"),N=i("fXoL");let E=(()=>{class e{}return e.\u0275mod=N.Ub({type:e}),e.\u0275inj=N.Tb({factory:function(t){return new(t||e)},providers:[s.c],imports:[[n.c,o.l,o.x,k.LoaderModule,I.a,w.b,T.a,x.a,C.a,O.a,S.a,D.a,A.a,j.a,s.b,r.a,l.a,u.a,d.a,m.a,h.a,p.a,b.a,g.d,f.a,_.a,v.a,y.a,c.a,a.a]]}),e})()},RhU4:function(e,t,i){"use strict";i.d(t,"b",function(){return d}),i.d(t,"a",function(){return m});var a=i("fXoL"),c=i("ofXK"),n=i("S//e"),o=i("UdVN"),s=i("NsZK");function r(e,t){if(1&e&&(a.cc(0,"div",5),a.dd(1),a.bc()),2&e){const e=a.uc(2);a.Ib(1),a.fd(" ",(null==(e.tempFollowers||e.followers)?null:(e.tempFollowers||e.followers).length)+(null==(e.tempGroupFollowers||e.groupFollowers)?null:(e.tempGroupFollowers||e.groupFollowers).length)," ")}}const l=function(e,t,i){return{"cu-activity-viewers_active":e,"cu-activity-viewers_watching":t,"no-add":i}};function u(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-user-list-dropdown",1),a.qc("onChange",function(t){return a.Uc(e),a.uc().setTempFollowers(t)})("onUserGroupsChanged",function(t){return a.Uc(e),a.uc().setTempGroupFollowers(t)})("onClose",function(){return a.Uc(e),a.uc().saveChanges()}),a.cc(1,"div",2),a.Xb(2,"div",3),a.bd(3,r,2,1,"div",4),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Dc("users",e.allUsers)("selectedUsers",e.tempFollowers||e.followers)("enableFirstSelection",!1)("multiChoice",!0)("showUnassign",!1)("showReassign",!1)("disabled",!(e.canAddFollowers||e.canAddSelf))("canOnlyEditSelf",!e.canAddFollowers&&e.canAddSelf)("showLastViewed",!0)("lastViewedMap",e.lastViewedMap)("userGroups",e.allUserGroups)("selectedUserGroups",e.groupFollowers),a.Ib(1),a.Dc("ngClass",a.Jc(15,l,e.selfWatching||(null==e.followers?null:e.followers.length)&&!(e.canAddFollowers||e.canAddSelf),e.selfWatching&&(e.canAddFollowers||e.canAddSelf),(null==e.followers?null:e.followers.length)&&!(e.canAddFollowers||e.canAddSelf))),a.Ib(1),a.Dc("cuTooltip",e.tooltip),a.Ib(1),a.Dc("ngIf",(null==(e.tempFollowers||e.followers)?null:(e.tempFollowers||e.followers).length)+(null==(e.tempGroupFollowers||e.groupFollowers)?null:(e.tempGroupFollowers||e.groupFollowers).length))}}function d(e,t){return{add:t.filter(t=>!e.some(e=>e.id===t.id)),rem:e.filter(e=>!t.some(t=>t.id===e.id)),all:t}}let m=(()=>{class e{constructor(){this.canAddFollowers=!0,this.canAddSelf=!0,this.tooltip=$localize`:@@common_watchers:Watchers`,this.showLastViewed=!1,this.followersChanged=new a.o,this.groupFollowersChanged=new a.o,this.selfWatching=!1}ngOnInit(){}ngOnChanges(e){(e.followers||e.currentUser)&&this.followers&&this.currentUser&&this.updateSelfWatching()}setTempFollowers(e){this.tempFollowers=e,this.updateSelfWatching()}setTempGroupFollowers(e){this.tempGroupFollowers=e}saveChanges(){if(this.tempFollowers){const e=d(this.followers,this.tempFollowers);this.tempFollowers=null,(e.add.length||e.rem.length)&&this.followersChanged.emit(e)}if(this.tempGroupFollowers){const e=d(this.groupFollowers,this.tempGroupFollowers);this.tempGroupFollowers=null,(e.add.length||e.rem.length)&&this.groupFollowersChanged.emit(e)}}updateSelfWatching(){this.selfWatching=(this.tempFollowers||this.followers).some(e=>e.id===this.currentUser.id)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-entity-followers"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Ob("cu-entity-followers",!0)},inputs:{canAddFollowers:"canAddFollowers",canAddSelf:"canAddSelf",allUsers:"allUsers",followers:"followers",currentUser:"currentUser",tooltip:"tooltip",showLastViewed:"showLastViewed",lastViewedMap:"lastViewedMap",allUserGroups:"allUserGroups",groupFollowers:"groupFollowers",task:"task",subcategory:"subcategory"},outputs:{followersChanged:"followersChanged",groupFollowersChanged:"groupFollowersChanged"},features:[a.Gb],decls:1,vars:1,consts:[[3,"users","selectedUsers","enableFirstSelection","multiChoice","showUnassign","showReassign","disabled","canOnlyEditSelf","showLastViewed","lastViewedMap","userGroups","selectedUserGroups","onChange","onUserGroupsChanged","onClose",4,"ngIf"],[3,"users","selectedUsers","enableFirstSelection","multiChoice","showUnassign","showReassign","disabled","canOnlyEditSelf","showLastViewed","lastViewedMap","userGroups","selectedUserGroups","onChange","onUserGroupsChanged","onClose"],[1,"cu-activity-viewers",3,"ngClass"],["icon","eye",1,"cu-activity-viewers__icon",3,"cuTooltip"],["class","cu-activity-viewers__counter",4,"ngIf"],[1,"cu-activity-viewers__counter"]],template:function(e,t){1&e&&a.bd(0,u,4,19,"cu-user-list-dropdown",0),2&e&&a.Dc("ngIf",t.canAddFollowers||t.canAddSelf)},directives:[c.q,n.a,c.o,o.a,s.a],encapsulation:2,changeDetection:0}),e})()},UiHY:function(e,t,i){"use strict";i.d(t,"a",function(){return gi});var a=i("fXoL"),c=i("y5jv"),n=i("Hgwy"),o=i("bV87"),s=i("dTHz"),r=i("hITm"),l=i("zfYP"),u=i("c3rA"),d=i("RtrR"),m=i("jJQC"),h=i("Muja"),p=i("fujP"),b=i("2Vo4"),g=i("itXk"),f=i("XNiG"),_=i("eIep"),v=i("lJxs"),y=i("1G5W"),k=i("IzEk"),I=i("pLZG"),w=i("Jf2N"),T=i("l7P3"),x=i("ILsm"),C=i("9Ejp"),O=i("ofXK"),S=i("I1n0"),D=i("eDEC"),A=i("S//e"),j=i("jJW4"),N=i("LdyQ"),E=i("MJvn"),$=i("n+1/"),P=i("NsZK");const L=["dropdown"],U=["assignees"];function z(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainAssignAll()}),a.cc(1,"div",21),a.tc(),a.cc(2,"svg",25),a.Xb(3,"path",26),a.bc(),a.bc(),a.sc(),a.cc(4,"div",14),a.gc(5,27),a.bc(),a.bc()}}function M(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainUnassignAll()}),a.cc(1,"div",21),a.tc(),a.cc(2,"svg",25),a.Xb(3,"path",26),a.bc(),a.bc(),a.sc(),a.cc(4,"div",14),a.gc(5,28),a.bc(),a.bc()}}function R(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainCheckAll()}),a.cc(1,"div",29),a.tc(),a.cc(2,"svg",30),a.cc(3,"g",31),a.Xb(4,"path",32),a.Xb(5,"path",33),a.bc(),a.bc(),a.bc(),a.sc(),a.cc(6,"div",14),a.gc(7,34),a.bc(),a.bc()}}function G(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainUncheckAll()}),a.cc(1,"div",29),a.tc(),a.cc(2,"svg",35),a.cc(3,"g",36),a.Xb(4,"path",37),a.Xb(5,"rect",38),a.bc(),a.bc(),a.bc(),a.sc(),a.cc(6,"div",14),a.gc(7,39),a.bc(),a.bc()}}function F(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainSaveAsTemplate()}),a.cc(1,"div",29),a.tc(),a.cc(2,"svg",22),a.cc(3,"g",40),a.Xb(4,"path",41),a.Xb(5,"path",42),a.bc(),a.bc(),a.bc(),a.sc(),a.cc(6,"div",14),a.gc(7,43),a.bc(),a.bc()}}function V(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainMoveUp()}),a.cc(1,"div",11),a.tc(),a.cc(2,"svg",44),a.cc(3,"g",45),a.Xb(4,"path",46),a.bc(),a.bc(),a.bc(),a.sc(),a.cc(5,"div",14),a.gc(6,47),a.bc(),a.bc()}}function q(e,t){if(1&e){const e=a.dc();a.cc(0,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(3).mainMoveDown()}),a.cc(1,"div",11),a.tc(),a.cc(2,"svg",48),a.cc(3,"g",45),a.Xb(4,"path",49),a.bc(),a.bc(),a.bc(),a.sc(),a.cc(5,"div",14),a.gc(6,50),a.bc(),a.bc()}}function X(e,t){if(1&e){const e=a.dc();a.cc(0,"div",9),a.cc(1,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(2).mainNewItem()}),a.cc(2,"div",11),a.tc(),a.cc(3,"svg",12),a.Xb(4,"path",13),a.bc(),a.bc(),a.sc(),a.cc(5,"div",14),a.gc(6,15),a.bc(),a.bc(),a.cc(7,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(2).mainRename()}),a.cc(8,"div",11),a.tc(),a.cc(9,"svg",16),a.Xb(10,"path",17),a.bc(),a.bc(),a.sc(),a.cc(11,"div",14),a.gc(12,18),a.bc(),a.bc(),a.bd(13,z,6,0,"div",19),a.bd(14,M,6,0,"div",19),a.bd(15,R,8,0,"div",19),a.bd(16,G,8,0,"div",19),a.bd(17,F,8,0,"div",19),a.cc(18,"div",20),a.qc("click",function(){a.Uc(e);const t=a.uc(2);return t.canDelete?t.mainDeleteChecklist():null}),a.cc(19,"div",21),a.tc(),a.cc(20,"svg",22),a.Xb(21,"path",23),a.bc(),a.bc(),a.sc(),a.cc(22,"div",14),a.gc(23,24),a.bc(),a.bc(),a.bd(24,V,7,0,"div",19),a.bd(25,q,7,0,"div",19),a.bc()}if(2&e){const e=a.uc(2);a.Ib(13),a.Dc("ngIf",!e.hiddenItems.assignAll),a.Ib(1),a.Dc("ngIf",!e.hiddenItems.unAssignAll),a.Ib(1),a.Dc("ngIf",!e.hiddenItems.checkAll),a.Ib(1),a.Dc("ngIf",!e.hiddenItems.unCheckAll),a.Ib(1),a.Dc("ngIf",!e.hiddenItems.saveAsTemplate),a.Ib(1),a.Ob("disabled-action",!e.canDelete),a.Dc("cuTooltip",e.canDelete?null:e.deleteChecklistNoPermsText),a.Ib(6),a.Dc("ngIf",!e.hiddenItems.moveUp),a.Ib(1),a.Dc("ngIf",!e.hiddenItems.moveDown)}}function B(e,t){if(1&e){const e=a.dc();a.cc(0,"div",51),a.cc(1,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(2).itemRename()}),a.cc(2,"div",11),a.tc(),a.cc(3,"svg",22),a.Xb(4,"path",52),a.bc(),a.bc(),a.sc(),a.cc(5,"div",14),a.gc(6,53),a.bc(),a.bc(),a.cc(7,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(2).itemAssign()}),a.cc(8,"div",21),a.tc(),a.cc(9,"svg",25),a.Xb(10,"path",26),a.bc(),a.bc(),a.sc(),a.cc(11,"div",14),a.gc(12,54),a.bc(),a.bc(),a.cc(13,"div",10),a.qc("click",function(){return a.Uc(e),a.uc(2).itemNewItem()}),a.cc(14,"div",11),a.tc(),a.cc(15,"svg",12),a.Xb(16,"path",13),a.bc(),a.bc(),a.sc(),a.cc(17,"div",14),a.gc(18,55),a.bc(),a.bc(),a.cc(19,"div",20),a.qc("click",function(){a.Uc(e);const t=a.uc(2);return t.canDelete?t.itemDelete():null}),a.cc(20,"div",29),a.tc(),a.cc(21,"svg",56),a.Xb(22,"path",57),a.bc(),a.bc(),a.sc(),a.cc(23,"div",14),a.gc(24,58),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc(2);a.Ib(19),a.Ob("disabled-action",!e.canDelete),a.Dc("cuTooltip",e.canDelete?null:e.deleteChecklistNoPermsText)}}function K(e,t){if(1&e&&(a.cc(0,"div",6),a.bd(1,X,26,10,"div",7),a.bd(2,B,25,3,"div",8),a.bc()),2&e){const e=a.uc();a.Ib(1),a.Dc("ngIf","main"===e.location),a.Ib(1),a.Dc("ngIf","item"===e.location)}}function W(e,t){}const H=function(e,t){return{x:e,y:t}},Z=["*"];let Q=(()=>{class e{constructor(e,t,i,c){this.changeDetector=e,this.resolver=t,this.sharedData=i,this.store=c,this.canDelete=!0,this.onChange=new a.o,this.childrenArray=[],this.deleteChecklistNoPermsText=$localize`:@@cu-checklist2-menu__tooltip-msg_delete-checklist-no-perms:You don't have permission to delete this checklist`,this.destroy$=new f.a}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}markForCheck(){this.changeDetector.markForCheck()}open(){this.dropdown.open()}close(){this.dropdown.close()}mainNewItem(){this.onChange.emit({type:"addNewChecklistItem"})}mainRename(){this.onChange.emit({type:"mainRename"})}mainAssignAll(){this.openAssignees(this.checklist,null,"main")}mainUnassignAll(){this.checklist.items.forEach(e=>{this.findChildrenIds(e)}),this.store.dispatch(this.isNewTask?new r.kb({propertyToEdit:"assignee",newValue:null,checklistId:this.checklist.id}):new r.R({itemId:this.itemData.id,body:{assignee:null,checklist_item_ids:this.childrenArray}})),this.childrenArray=[]}mainCheckAll(){this.checklist.items.forEach(e=>{this.findChildrenIds(e)}),this.store.dispatch(new r.R({itemId:this.itemData.id,body:{resolved:!0,checklist_item_ids:this.childrenArray}})),this.childrenArray=[]}mainUncheckAll(){this.checklist.items.forEach(e=>{this.findChildrenIds(e)}),this.store.dispatch(new r.R({itemId:this.itemData.id,body:{resolved:!1,checklist_item_ids:this.childrenArray}})),this.childrenArray=[]}mainSaveAsTemplate(){this.onChange.emit({type:"saveAsTemplate"})}mainDeleteChecklist(){if(this.isNewTask)this.store.dispatch(new r.mb({checklistId:this.checklist.id}));else{this.store.dispatch(new r.Y({itemId:this.itemData.id,checklistId:this.checklist.id}));const e={itemId:this.itemData.id,id:this.checklist.id,description:"Deleted "+this.checklist.name.substring(0,30),type:"checklistUndo",undoBody:{checklistId:this.checklist.id,itemId:this.itemData.id,body:{checklist_id:this.checklist.id}},undoHandler:()=>{this.store.dispatch(new r.wb({checklistId:this.checklist.id,itemId:this.itemData.id,body:{checklist_id:this.checklist.id}}))},deleteAction:!0};this.sharedData.addUndoItem(e)}}mainMoveUp(){this.onChange.emit({type:"checklistMoveUp"})}mainMoveDown(){this.onChange.emit({type:"checklistMoveDown"})}itemRename(){this.onChange.emit({type:"checklistItemRename"})}itemAssign(){this.openAssignees(this.checklist,this.checklistItem,"item")}itemNewItem(){this.onChange.emit({type:"addNewChecklistItem"})}itemDelete(){if(this.isNewTask)this.store.dispatch(new r.nb({itemToDelete:this.checklistItem,checklistId:this.checklist.id,parent:this.checklistItem.parent}));else{this.findChildrenIds(this.checklistItem);const e=this.childrenArray.length;this.store.dispatch(new r.X({itemId:this.itemData.id,checklistItemId:this.checklistItem.id}));const t={itemId:this.itemData.id,id:this.checklistItem.id,description:$localize`:@@cu-checklist2-menu__description_checklist-items-deleted:Deleted ${e}:deletedCount: checklist items`,type:"checklistItemUndo",undoBody:{checklist_id:[this.checklistItem.id]},undoHandler:()=>{this.store.dispatch(new r.xb({itemId:this.itemData.id,checklistItemId:this.checklistItem.id,body:{checklist_id:[this.checklistItem.id]}}))},deleteAction:!0};this.sharedData.addUndoItem(t),this.childrenArray=[]}}openAssignees(e,t,i){const a=this.itemData.id;let c=null;"item"===i&&(c=null!==t.assignee?[t.assignee]:[]);const n=this.resolver.resolveComponentFactory(A.a);this.assigneesDropdown=this.assignees.createComponent(n),this.assigneesDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(a=>{const c=0===a.length?null:a[0];"item"===i?this.store.dispatch(this.isNewTask?new r.bb({propertyToEdit:"assignee",newValue:c,checklistId:this.checklist.id,checklistItemId:t.id}):new r.Z({itemId:this.itemData.id,checklistId:e.id,checkListItemId:t.id,body:{assignee:c.id},tmpId:t.tmpId})):"main"===i&&(e.items.forEach(e=>{this.findChildrenIds(e)}),this.store.dispatch(this.isNewTask?new r.kb({propertyToEdit:"assignee",newValue:c,checklistId:this.checklist.id}):new r.R({itemId:this.itemData.id,body:{assignee:c.id,checklist_item_ids:this.childrenArray}})),this.childrenArray=[])}),this.isNewTask?this.assigneesDropdown.instance.users=this.newTaskMembers:(this.store.select(Object(S.I)(a)).pipe(Object(I.a)(e=>!!e),Object(y.a)(this.assigneesDropdown.instance.destroy$)).subscribe(e=>{this.assigneesDropdown.instance.setUsers(e,[])}),this.store.dispatch(new D.R({taskId:a}))),this.assigneesDropdown.instance.selectedUsers=c,this.assigneesDropdown.instance.enableFirstSelection=!0,this.assigneesDropdown.instance.dropdown.fromPoint={x:this.left,y:this.top},this.assigneesDropdown.changeDetectorRef.detectChanges(),setTimeout(()=>this.assigneesDropdown.instance.open())}findChildrenIds(e){this.childrenArray.push(e.id),e.children&&e.children.forEach(e=>this.findChildrenIds(e))}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.h),a.Wb(a.j),a.Wb(j.a),a.Wb(T.Store))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-menu"]],viewQuery:function(e,t){if(1&e&&(a.jd(L,3),a.jd(U,3,a.U)),2&e){let e;a.Qc(e=a.rc())&&(t.dropdown=e.first),a.Qc(e=a.rc())&&(t.assignees=e.first)}},inputs:{itemData:"itemData",location:"location",checklist:"checklist",checklistItem:"checklistItem",hiddenItems:"hiddenItems",isNewTask:"isNewTask",newTaskMembers:"newTaskMembers",canDelete:"canDelete"},outputs:{onChange:"onChange"},ngContentSelectors:Z,decls:8,vars:4,consts:function(){let e,t,i,a,c,n,o,s,r,l,u,d,m,h;return e=$localize`:@@common_new-item␟d0e451bc4ef06f5ba6fcfeb536facb12612beff7␟4628319674769862989:New Item`,t=$localize`:@@common_rename␟e26f9cf3666aace4e524b1505c9795d76d87738d␟6041115344061899387:Rename`,i=$localize`:@@common_delete-checklist␟d6c013ac9cb1c2eea20b88d32571fd7aca97f302␟6444981388913612713: Delete checklist `,a=$localize`:@@common_assign-all-to␟7f8cf5838c9b41d90929c614ab16d3f95df7ea5b␟764039811823931002: Assign all to... `,c=$localize`:@@cu-checklist2-menu__unassign-all␟d34d6d5ed4d23d361f3a175ee65f5627ec07ec7f␟7541670535984025903: Unassign all `,n=$localize`:@@common_check-all␟5a22011dcb83b5fa5c8f674b18e7ad0ebec4c827␟1438712712782443787: Check all `,o=$localize`:@@common_uncheck-all␟c964543937b52a79a5ed312efe8d524da3660bdd␟3817833409294973182: Uncheck all `,s=$localize`:@@common_save-as-template␟ee5862d8c4c0b2a79e669be82cd22173fd71e660␟2375800384908710670: Save as Template `,r=$localize`:@@common_move-up␟f5d502c5d44fd9d78ed4979a7efae43369b09dca␟8502065112576581103:Move up`,l=$localize`:@@common_move-down␟0e007f175d2435ef928a81dd9a06692ed95153aa␟549051018450510859: Move down `,u=$localize`:@@common_rename␟e26f9cf3666aace4e524b1505c9795d76d87738d␟6041115344061899387:Rename`,d=$localize`:@@common_assign-to␟a3d7e3101e5b1c899f88d72c84357a3d5479f339␟8609280473844496182: Assign to... `,m=$localize`:@@common_new-item␟d0e451bc4ef06f5ba6fcfeb536facb12612beff7␟4628319674769862989:New Item`,h=$localize`:@@common_delete␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,[["cuDropdown","",1,"cu-dropdown",3,"dropdownFromPoint"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["class","cu-dropdown__menu cu-checklist2-menu-dropdown",4,"cuDropdownMenu"],["assignees",""],[1,"cu-dropdown__menu","cu-checklist2-menu-dropdown"],["class","checklist-2-main-menu",4,"ngIf"],["class","checklist-2-item-menu",4,"ngIf"],[1,"checklist-2-main-menu"],[1,"nav-menu-item",3,"click"],[1,"nav-menu-item__icon","stroke"],["viewBox","0 0 30 30","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M15 .858v28.285M.858 15h28.284"],[1,"nav-menu-item__name"],e,["width","16","height","16","xmlns","http://www.w3.org/2000/svg"],["d","M.5 15.5l1.25-6.25L10.5.5l5 5-8.75 8.75z","fill","none","fill-rule","evenodd"],t,["class","nav-menu-item",3,"click",4,"ngIf"],[1,"nav-menu-item",3,"cuTooltip","click"],[1,"nav-menu-item__icon","fill"],["viewBox","0 0 16 16","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M8.7 8l5.2-5.1-.8-.8L8 7.3 2.9 2.1l-.8.8L7.3 8l-5.2 5.1.8.8L8 8.7l5.1 5.2.8-.8L8.7 8","fill","#FF80B9","fill-rule","evenodd"],i,["viewBox","0 0 513.3 513.3","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M346.5 316.5c49.2-29.9 81.3-83.4 81.3-145.4C427.8 77 350.8 0 256.7 0S85.6 77 85.6 171.1c0 62 32.1 115.5 81.3 145.4C81.3 348.6 17.1 423.5 0 513.3h42.8c21.4-98.4 109.1-171.1 213.9-171.1s192.5 72.7 213.9 171.1h42.8c-17.2-91.9-81.4-166.8-166.9-196.8zM128.3 171.1c0-70.6 57.7-128.3 128.3-128.3s128.3 57.7 128.3 128.3-57.7 128.3-128.3 128.3-128.3-57.7-128.3-128.3z"],a,c,[1,"nav-menu-item__icon"],["viewBox","0 0 16 13","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["stroke","#9A9A9A","fill","none","fill-rule","evenodd"],["d","M2 11.5h-.5a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1H2m2.5-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-10a1 1 0 0 1-1-1v-10a1 1 0 0 1 1-1z"],["d","M6 6.982L8.108 9 13 4"],n,["viewBox","0 0 17 14","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["transform","translate(1 1)","fill","none","fill-rule","evenodd"],["d","M2 11h-.667C.597 11 0 10.552 0 10V2c0-.552.597-1 1.333-1H2m2-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1z","stroke","#9A9A9A"],["fill","#9A9A9A","x","6","y","5","width","5","height","1","rx",".5"],o,["fill","none","fill-rule","evenodd"],["d","M12.5 9v5.5a1 1 0 0 1-1 1h-10a1 1 0 0 1-1-1v-10a1 1 0 0 1 1-1H7","stroke","#979797"],["d","M13.707 3l1.268-1.268a.5.5 0 1 0-.707-.707L13 2.293V.5a.5.5 0 1 0-1 0v1.793l-1.268-1.268a.5.5 0 1 0-.707.707L11.293 3H9.5a.5.5 0 0 0 0 1h1.793l-1.268 1.268a.5.5 0 1 0 .707.707L12 4.707V6.5a.5.5 0 1 0 1 0V4.707l1.268 1.268a.5.5 0 1 0 .707-.707L13.707 4H15.5a.5.5 0 1 0 0-1h-1.793z","fill","#979797"],s,["viewBox","0 0 10 14","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["stroke","#979797","fill","none","fill-rule","evenodd"],["d","M.516 4.413l3.359-3.359a1 1 0 0 1 1.414 0l3.359 3.359M4.582 13.653V1.054v12.599z"],r,["viewBox","0 0 10 14","id","svg-sprite-move-down","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M8.648 9.587l-3.359 3.359a1 1 0 0 1-1.414 0L.516 9.587M4.582.347v12.599V.347z"],l,[1,"checklist-2-item-menu"],["d","M1.5 14.5l1.1-5.4 7.6-7.6 4.3 4.3-7.6 7.6z","stroke","#979797","fill","none"],u,d,m,["viewBox","0 0 16 18","id","svg-sprite-trash-bold","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M13.3 5.5h.9v10.2c0 .9-.8 1.6-1.7 1.6H2.7c-1 0-1.7-.7-1.7-1.6V5.5h.9v10.2c0 .4.4.8.8.8h9.8c.5 0 .8-.3.8-.8V5.5zm1.6-2.1v1.4H.3V3.4c0-.6.5-1.1 1.2-1.1h3.6v-.9C5.1.8 5.6.3 6.3.3H9c.6 0 1.2.5 1.2 1.1v.9h3.6c.6 0 1.1.5 1.1 1.1h0zM6 2.3h3.2v-.9c0-.1-.1-.2-.2-.2H6.2c-.1-.1-.2 0-.2.2v.9zm8 1.1c0-.1-.1-.2-.2-.2H1.5c-.1 0-.2.1-.2.2V4H14v-.6zM4 14.1h1V6.8H4v7.3zm3.1 0H8V6.8h-.9v7.3zm3.1 0h.9V6.8h-.9v7.3z","stroke","#DE8787","stroke-width",".4","fill","#DE8787","fill-rule","nonzero"],h]},template:function(e,t){1&e&&(a.Cc(),a.cc(0,"div",0,1),a.cc(2,"div",2,3),a.Bc(4),a.bc(),a.bd(5,K,3,2,"div",4),a.bc(),a.bd(6,W,0,0,"ng-template",null,5,a.cd)),2&e&&a.Dc("dropdownFromPoint",a.Ic(1,H,t.left,t.top))},directives:[N.b,E.a,$.a,O.q,P.a],encapsulation:2,changeDetection:0}),e})();var J=i("Yx0S"),Y=i("7Cbv"),ee=i("/qOb"),te=i("El8o"),ie=i("TqRa"),ae=i("8it8"),ce=i("EDFS");let ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-ellipsis"]],decls:2,vars:0,consts:[["viewBox","0 0 60 60","id","svg-sprite-ellipsis","xmlns","http://www.w3.org/2000/svg","width","100%"],["d","M8 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM52 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM30 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8z"]],template:function(e,t){1&e&&(a.tc(),a.cc(0,"svg",0),a.Xb(1,"path",1),a.bc())},encapsulation:2,changeDetection:0}),e})();var oe=i("YAnr"),se=i("BYBp");let re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-check"]],decls:2,vars:0,consts:[["height","9","width","12","xmlns","http://www.w3.org/2000/svg"],["d","M5.19\n        8.287l6.168-6.168a.618.618 0 0 0 .191-.452.618.618 0 0\n        0-.19-.452L10.333.191A.618.618 0 0 0 9.882 0a.618.618 0 0\n        0-.452.19L4.739 4.883l-2.12-2.12a.618.618 0 0 0-.452-.19.618.618 0 0\n        0-.452.19L.691 3.787a.618.618 0 0 0-.191.452c0 .174.064.325.19.452l3.597\n        3.596c.127.127.278.19.452.19a.618.618 0 0 0 .452-.19z","fill-rule","evenodd"]],template:function(e,t){1&e&&(a.tc(),a.cc(0,"svg",0),a.Xb(1,"path",1),a.bc())},encapsulation:2,changeDetection:0}),e})(),le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-handle"]],decls:2,vars:0,consts:[["viewBox","0 0 8 23","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M1.5 18a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-10a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 20a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-10a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-10a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 20a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-10a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z","fill","#DBDBDB"]],template:function(e,t){1&e&&(a.tc(),a.cc(0,"svg",0),a.Xb(1,"path",1),a.bc())},encapsulation:2,changeDetection:0}),e})();function ue(e,t){1&e&&(a.cc(0,"div"),a.tc(),a.cc(1,"svg",2),a.cc(2,"g",3),a.Xb(3,"circle",4),a.Xb(4,"path",5),a.Xb(5,"circle",6),a.Xb(6,"circle",7),a.Xb(7,"path",8),a.bc(),a.bc(),a.bc())}const de=function(e){return{"background-image":e}};function me(e,t){if(1&e&&a.Xb(0,"div",9),2&e){const e=a.uc();a.Dc("ngStyle",a.Hc(1,de,"url("+e.assignedUser.profilePicture+")"))}}const he=function(e){return{"background-color":e}};function pe(e,t){if(1&e&&(a.cc(0,"div",9),a.cc(1,"span"),a.dd(2),a.bc(),a.bc()),2&e){const e=a.uc();a.Dc("ngStyle",a.Hc(2,he,null===e.assignedUser.color?"rgb(123, 104, 238)":e.assignedUser.color)),a.Ib(2),a.ed(e.assignedUser.initials)}}let be=(()=>{class e{constructor(){this.assignedUser=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-assignees-icon"]],inputs:{assignedUser:"assignedUser"},decls:3,vars:3,consts:[[4,"ngIf"],["class","cu-checklist2-item-avatar",3,"ngStyle",4,"ngIf"],["viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd"],["cx","18","cy","18","r","17.5","stroke-dasharray","3",1,"cu-stroke"],["d","m10.35 25.65c0-4.6944 3.4336-8.5 7.65-8.5 4.225 0 7.65 3.8151 7.65 8.5","stroke-linecap","round",1,"cu-stroke"],["cx","18","cy","12.9","r","4.3",1,"cu-stroke"],["cx","27.4","cy","27.4","r","7.7","fill-rule","nonzero",1,"cu-fill"],["d","m28.2 26.5v-2.5539c0-0.45877-0.38056-0.84609-0.85-0.84609-0.47271 0-0.85 0.37881-0.85 0.84609v2.5539h-2.5539c-0.45877 0-0.84609 0.38056-0.84609 0.85 0 0.47271 0.37881 0.85 0.84609 0.85h2.5539v2.5539c0 0.45877 0.38056 0.84609 0.85 0.84609 0.47271 0 0.85-0.37881 0.85-0.84609v-2.5539h2.5539c0.45877 0 0.84609-0.38056 0.84609-0.85 0-0.47271-0.37881-0.85-0.84609-0.85h-2.5539z","fill","#FFF","fill-rule","nonzero"],[1,"cu-checklist2-item-avatar",3,"ngStyle"]],template:function(e,t){1&e&&(a.bd(0,ue,8,0,"div",0),a.bd(1,me,1,3,"div",1),a.bd(2,pe,3,4,"div",1)),2&e&&(a.Dc("ngIf",null===t.assignedUser),a.Ib(1),a.Dc("ngIf",null!==t.assignedUser&&null!==t.assignedUser.profilePicture),a.Ib(1),a.Dc("ngIf",null!==t.assignedUser&&null===t.assignedUser.profilePicture))},directives:[O.q,O.t],encapsulation:2,changeDetection:0}),e})();var ge=i("UdVN");let fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-plus"]],decls:2,vars:0,consts:[["viewBox","0 0 12 12","id","svg-sprite-plus-v2","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%"],["d","M5 5V0h2v5h5v2H7v5H5V7H0V5h5z","fill-rule","evenodd"]],template:function(e,t){1&e&&(a.tc(),a.cc(0,"svg",0),a.Xb(1,"path",1),a.bc())},encapsulation:2,changeDetection:0}),e})();const _e=["checklistItemName"],ve=["assignees"],ye=["checklist2Menu"],ke=["checklistNewItem"],Ie=["pop"];function we(e,t){if(1&e){const e=a.dc();a.cc(0,"div",15),a.qc("mousedown",function(){return a.Uc(e),a.uc(2).onHandleClick()}),a.Xb(1,"cu-checklist2-handle"),a.bc()}if(2&e){const e=a.uc(2);a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists)}}function Te(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-checklist2-assignees-icon",16),a.qc("click",function(t){return a.Uc(e),a.uc(2).openAssignees(t)}),a.bc()}if(2&e){const e=a.uc(2);a.Ob("hasUser",null!==(null==e.checklistItem?null:e.checklistItem.assignee))("readonly",e.isSharingApp||!e.itemData.permissions.edit_checklists),a.Ec("cuTooltip",null===(null==e.checklistItem?null:e.checklistItem.assignee)?e.itemData.permissions.edit_checklists?e.commonStringsService.assignText:null:null==e.checklistItem?null:e.checklistItem.assignee.username),a.Dc("assignedUser",null==e.checklistItem?null:e.checklistItem.assignee)}}function xe(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-checklist2-ellipsis",17),a.qc("click",function(t){return a.Uc(e),a.uc(2).openChecklist2Menu(t)}),a.bc()}}function Ce(e,t){if(1&e){const e=a.dc();a.cc(0,"div",7),a.bd(1,we,2,2,"div",8),a.cc(2,"div",9),a.qc("click",function(){return a.Uc(e),a.uc().checkComplete()}),a.Xb(3,"cu-checklist2-check"),a.bc(),a.cc(4,"div",10),a.cc(5,"p",11,12),a.qc("click",function(t){return a.Uc(e),a.uc().onChecklistItemNameClick(t)})("keydown",function(t){return a.Uc(e),a.uc().onChecklistItemNameEditKeyPress(t)})("keyup",function(){return a.Uc(e),a.uc().onChecklistItemNameEditChange()})("focusout",function(){a.Uc(e);const t=a.uc();return t.onChecklistItemNameEditBlur(),t.nameFocused=!1})("focusin",function(){return a.Uc(e),a.uc().nameFocused=!0}),a.bc(),a.bc(),a.bd(7,Te,1,6,"cu-checklist2-assignees-icon",13),a.bd(8,xe,1,0,"cu-checklist2-ellipsis",14),a.bc()}if(2&e){const e=a.uc();a.Ob("checked",e.checklistItem.resolved),a.Ib(1),a.Dc("ngIf",!e.isSharingApp&&e.itemData.permissions.edit_checklists),a.Ib(1),a.Ob("checklist2-cantEdit",!e.canCheck),a.Ib(2),a.Ob("focused",e.nameFocused)("checklist2-row-item-name_hover",!e.isSharingApp&&e.itemData.permissions.edit_checklists),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Dc("innerHTML",e.checklistName,a.Vc),a.Jb("data-checklistItemIdP",e.checklistItem.id)("data-tmpId",e.checklistItem.tmpId),a.Ib(2),a.Dc("ngIf",!e.isSharingApp||(null==e.checklistItem?null:e.checklistItem.assignee)),a.Ib(1),a.Dc("ngIf",!e.isSharingApp&&e.itemData.permissions.edit_checklists)}}function Oe(e,t){if(1&e){const e=a.dc();a.cc(0,"div",18),a.cc(1,"div",19),a.qc("mousedown",function(){return a.Uc(e),a.uc().hideMultiLinePopover()}),a.bc(),a.cc(2,"div",20),a.gc(3,21),a.bc(),a.cc(4,"button",22),a.qc("mousedown",function(){return a.Uc(e),a.uc().createMultiChecklistItems()}),a.gc(5,23),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("icon","close-modal-white"),a.Ib(4),a.kc(e.checklistNewItemPastedLines.length),a.hc(5)}}function Se(e,t){1&e&&(a.cc(0,"p",29,30),a.gc(2,31),a.bc())}const De=function(e){return{"margin-left.px":e}};function Ae(e,t){if(1&e){const e=a.dc();a.cc(0,"div",24),a.Xb(1,"cu-checklist2-plus"),a.bd(2,Se,3,0,"p",25),a.cc(3,"p",26,27),a.qc("click",function(){return a.Uc(e),a.uc().onChecklistNewItemClick()})("keydown",function(t){return a.Uc(e),a.uc().onChecklistNewItemKeyPress(t)})("focusout",function(){return a.Uc(e),a.uc().onChecklistNewItemKeyPressEditBlur()})("paste",function(t){return a.Uc(e),a.uc().onChecklistNewItemPaste(t)}),a.bc(),a.cc(5,"cu-checklist2-assignees-icon",28),a.qc("click",function(t){return a.Uc(e),a.uc().openAssignees(t,"newItem")})("mousedown",function(){return a.Uc(e),a.uc().onAssigneesMouseDown()}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ob("disabled",e.loading),a.Dc("ngStyle",a.Hc(10,De,e.newItemTabbed?25:0)),a.Ib(2),a.Dc("ngIf",!e.checklistNewItemEditing),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Ib(2),a.Ob("hasUser",null!==e.newItemAssignee),a.Ec("cuTooltip",null===e.newItemAssignee?e.commonStringsService.assignText:null==e.newItemAssignee?null:e.newItemAssignee.username),a.Dc("assignedUser",e.newItemAssignee)}}function je(e,t){}function Ne(e,t){}let Ee=(()=>{class e{constructor(e,t,i,c){this.resolver=e,this.store=t,this.sharedData=i,this.commonStringsService=c,this.canDelete=!0,this.childrenArray=[],this.newItemAssignee=null,this.checklistItemNameFirstClick=!0,this.checklistNewItemEditing=!1,this.checklistNewItemPastedLines=[],this.creatingMultipleChecklistItems=!1,this.isCreatingNewItemLocal=!1,this.newItemAssigneeClicked=!1,this.nameFocused=!1,this.isSharingApp=ie.k,this.onChecklistItemComplete=new a.o,this.onFocusNewRow=new a.o,this.destroy$=new f.a}get canCheck(){return this.itemData.permissions.edit_checklists||this.itemData.permissions.permission_level===s.e.COMMENT&&this.checklistItem.assignee&&this.checklistItem.assignee.id===this.sharedData.currentUser.value.id}ngOnInit(){this.checklistItem.isCreatingNewItem&&this.focusNewItem(!1),this.checklistName=Object(oe.y)(this.checklistItem.name),this.checklistItemChanged.changed&&this.checklistItemChanged.changedItemId===this.checklistItem.id&&setTimeout(()=>{this.checklistItemName.nativeElement.focus(),Object(te.b)(this.checklistItemName.nativeElement),this.store.dispatch(new r.Ab({changed:!1,changedItemId:""}))},0),5===this.level&&(this.findChildrenIds(this.checklistItem),this.childrenArray.length>1)&&this.store.dispatch(new r.R({itemId:this.itemData.id,body:{parent:this.checklistItem.parent,checklist_item_ids:this.childrenArray}}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}checkComplete(){if(this.onChecklistItemComplete.emit({message:"checklistItemChecked",checklistItem:this.checklistItem}),this.canCheck)if(0===this.checklistItem.children.length){const e={resolved:!this.checklistItem.resolved};setTimeout(()=>{this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:this.checklist.id,checkListItemId:this.checklistItem.id,body:e,tmpId:this.checklistItem.tmpId}))},0)}else if(0===this.checklistItem.children.length||this.checklistItem.resolved)0!==this.checklistItem.children.length&&this.checklistItem.resolved&&this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:this.checklist.id,checkListItemId:this.checklistItem.id,body:{resolved:!1},tmpId:this.checklistItem.tmpId}));else{this.findChildrenIds(this.checklistItem);const e={resolved:!0,checklist_item_ids:this.childrenArray};setTimeout(()=>{this.store.dispatch(new r.R({itemId:this.itemData.id,body:e})),this.childrenArray=[]},0)}}onChecklistItemNameClick(e){const t=Object(se.a)(e);null!==e&&"A"===t[0].tagName&&window.open(t[0].attributes[1].nodeValue,"_blank"),this.checklistItemNewName=this.checklistItemName.nativeElement.innerText.replace(/\n/g,""),this.checklistItemNameFirstClick=!1}onChecklistItemNameEditKeyPress(e){switch(e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendEditNameRequest=!0,this.checklistItemName.nativeElement.blur();const t=this.getVeryLastChildFirstLevel(this.checklist);t&&t.id===this.checklistItem.id?(this.isCreatingNewItemLocal=!1,this.onFocusNewRow.emit()):(this.isCreatingNewItemLocal=!0,this.focusNewItem(!1));break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.sendEditNameRequest=!1,this.checklistItemName.nativeElement.blur(),this.checklistItemName.nativeElement.innerText=this.checklistItem.name;break;case ee.a.BACKSPACE:if(""===this.checklistItemName.nativeElement.innerText){const e=this.getItem(this.checklistItem.parent),t=this.getChildBefore(this.checklistItem),i=this.getChildAfter(this.checklistItem);this.store.dispatch(new r.X({itemId:this.itemData.id,checklistItemId:this.checklistItem.id})),t?(this.getVeryLastChild(t),this.focusItemName(this.lastChild?this.lastChild.id:t.id)):e?this.focusItemName(e.id):i&&this.focusItemName(i.id)}break;case ee.a.TAB:e.stopPropagation(),e.preventDefault();const i=this.level+1;let a,c;this.findChildrenIds(this.checklistItem),1===this.level?(a=null,c=null):(a=this.getItem(this.checklistItem.parent),c=this.getChildAfter(a));const n=this.getChildBefore(this.checklistItem);let o=this.checklistItem.orderindex;if(e.shiftKey){if(null!==a&&null!==c&&(o=this.getAverage(a.orderindex,c.orderindex)),1!==this.level){let e;null===c&&(o=a.orderindex+1),e=2===this.level?{parent:null,orderindex:o,name:this.checklistItemNewName}:{parent:a.parent,orderindex:o,name:this.checklistItemNewName},this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:this.checklist.id,checkListItemId:this.checklistItem.id,body:e,tmpId:this.checklistItem.tmpId})),this.store.dispatch(new r.Ab({changed:!0,changedItemId:this.checklistItem.id})),this.level-=1}}else{if(null===n||5===this.level){this.childrenArray=[];break}{const e=this.getLastChildOfArray(n);let t=this.checklistItem.orderindex;null!==e&&(t=e.orderindex+1),null!==n&&this.level<=i&&(4===this.level&&this.childrenArray.length>1?(this.store.dispatch(new r.R({itemId:this.itemData.id,body:{parent:n.id,checklist_item_ids:this.childrenArray,orderindex:t,name:this.checklistItemNewName}})),this.store.dispatch(new r.Ab({changed:!0,changedItemId:this.checklistItem.id}))):(this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:this.checklist.id,checkListItemId:this.checklistItem.id,body:{checklist_id:this.checklist.id,parent:n.id,orderindex:t,name:this.checklistItemNewName},tmpId:this.checklistItem.tmpId})),this.store.dispatch(new r.Ab({changed:!0,changedItemId:this.checklistItem.id})))),this.level+=1}}this.childrenArray=[]}if("@"===e.key){if(Object(te.a)(this.checklistItemName.nativeElement))return;e.stopPropagation(),e.preventDefault();const t=this.checklistItemName.nativeElement.getBoundingClientRect();this.openAssignees(t,"@")}}onChecklistItemNameEditChange(){this.sendEditNameRequest=!0,this.checklistItemNewName=this.checklistItemName.nativeElement.innerText.replace(/\n/g,"")}onChecklistItemNameEditBlur(){this.checklistItemNewName!==this.checklistItem.name&&(this.checklistItemNameFirstClick=!0,void 0!==this.checklistItemNewName&&(this.checklistName=Object(oe.y)(this.checklistItemNewName)),this.onChecklistItemDoneEditingName(this.checklist,this.checklistItem,!0))}onChecklistItemDoneEditingName(e,t,i){if(this.sendEditNameRequest&&i&&this.checklistItemNewName){const i={name:this.checklistItemNewName};this.checklistItemNewName!==t.name&&this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:e.id,checkListItemId:t.id,body:i,tmpId:this.checklistItem.tmpId}))}this.sendEditNameRequest=!1}onHandleClick(){document.activeElement.blur()}openAssignees(e,t){if(!this.itemData.permissions.edit_checklists)return;const i=this.itemData.id,a=null!==this.checklistItem.assignee?[this.checklistItem.assignee]:[],c=this.resolver.resolveComponentFactory(A.a);this.assigneesDropdown=this.assignees.createComponent(c),this.assigneesDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{"newItem"===t?(this.newItemAssignee=0===e.length?null:e[0],this.sendNewItemRequest=!0,this.focusNewItem(!0)):this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:this.checklist.id,checkListItemId:this.checklistItem.id,body:{assignee:0===e.length?null:e[0].id},tmpId:this.checklistItem.tmpId}))}),this.assigneesDropdown.instance.onClose.pipe(Object(y.a)(this.destroy$)).subscribe(()=>{"newItem"===t&&this.focusNewItem(!0)}),this.store.select(Object(S.I)(i)).pipe(Object(I.a)(e=>!!e),Object(y.a)(this.assigneesDropdown.instance.destroy$)).subscribe(e=>{this.assigneesDropdown.instance.setUsers(e,[])}),this.store.dispatch(new D.R({taskId:i})),this.assigneesDropdown.instance.dropdown.fromPoint="@"===t?{x:e.x+e.width,y:e.y}:{x:e.clientX,y:e.clientY},this.assigneesDropdown.instance.selectedUsers="newItem"===t?[]:a,this.assigneesDropdown.instance.enableFirstSelection=!0,this.assigneesDropdown.changeDetectorRef.detectChanges(),setTimeout(()=>this.assigneesDropdown.instance.open())}openChecklist2Menu(e){if(!this.itemData.permissions.edit_checklists)return;const t=this.resolver.resolveComponentFactory(Q);this.checklist2MenuDropdown=this.checklist2Menu.createComponent(t),this.checklist2MenuDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{"checklistItemRename"===e.type?(this.checklistItemName.nativeElement.focus(),Object(te.b)(this.checklistItemName.nativeElement)):"addNewChecklistItem"===e.type&&(this.checklistItem.isCreatingNewItem=!0,setTimeout(()=>{this.checklistNewItem.nativeElement.focus()},0))}),this.checklist2MenuDropdown.instance.itemData=this.itemData,this.checklist2MenuDropdown.instance.checklist=this.checklist,this.checklist2MenuDropdown.instance.checklistItem=this.checklistItem,this.checklist2MenuDropdown.instance.location="item",this.checklist2MenuDropdown.instance.left=e.clientX,this.checklist2MenuDropdown.instance.top=e.clientY,this.checklist2MenuDropdown.instance.canDelete=this.canDelete,this.checklist2MenuDropdown.instance.markForCheck(),setTimeout(()=>this.checklist2MenuDropdown.instance.open())}onChecklistNewItemClick(){this.focusNewItem(!1)}onChecklistNewItemKeyPress(e){switch(this.checklistNewItemName=this.checklistNewItem.nativeElement.innerText.replace(/\n/g,""),this.sendNewItemRequest=!0,this.checklistNewItemEditing=!0,e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendNewItemRequest=!0,this.checklistNewItem.nativeElement.blur();break;case ee.a.BACKSPACE:""===this.checklistNewItem.nativeElement.innerText&&(this.checklistNewItemEditing=!1,this.sendNewItemRequest=!1,this.checklistNewItemName="",this.newItemAssignee=null,this.checklistItem.isCreatingNewItem=!1,this.isCreatingNewItemLocal=!1);break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.checklistNewItemEditing=!1,this.sendNewItemRequest=!1,this.checklistNewItem.nativeElement.blur(),this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.newItemAssignee=null,""===this.checklistNewItem.nativeElement.innerText&&(this.checklistItem.isCreatingNewItem=!1,this.isCreatingNewItemLocal=!1);break;case ee.a.TAB:e.stopPropagation(),e.preventDefault(),5!==this.level&&(this.newItemTabbed=!0),e.shiftKey&&this.newItemTabbed&&(this.newItemTabbed=!1)}if("@"===e.key){if(Object(te.a)(this.checklistNewItem.nativeElement))return;this.sendNewItemRequest=!1,e.stopPropagation(),e.preventDefault();const t=this.checklistNewItem.nativeElement.getBoundingClientRect();this.openAssignees(t,"newItem")}}onChecklistNewItemFinish(e){if(!this.loading){if(!this.sendNewItemRequest)return this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",void(this.newItemAssignee=null);if(this.creatingMultipleChecklistItems){const e={items:[]};let t,i,a=this.checklistItem.parent;this.newItemTabbed&&(a=this.checklistItem.id);const c=this.getChildAfter(this.checklistItem);t=this.checklistItem.orderindex,this.newItemTabbed&&this.checklistItem.children.length>0&&(t=this.checklistItem.children[0].orderindex),i=null!=c?(c.orderindex-.01-t)/this.checklistNewItemPastedLines.length:1,this.checklistNewItemPastedLines.forEach(c=>{t+=i;const n={name:c,parent:a,orderindex:t,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()};e.items.push(n)}),this.store.dispatch(new r.T({itemId:this.itemData.id,checklistId:this.checklist.id,body:e}))}else if(this.isValidInput(this.checklistNewItemName)&&this.sendNewItemRequest&&e){let e,t=this.checklistItem.parent;const i=this.getChildAfter(this.checklistItem);e=null===i?this.checklistItem.orderindex+1:this.getAverage(this.checklistItem.orderindex,i.orderindex),this.newItemTabbed&&(t=this.checklistItem.id),this.newItemTabbed&&this.checklistItem.children.length>0&&(e=this.getAverage(this.checklistItem.children[0].orderindex,0));const a={items:[{name:this.checklistNewItemName,parent:t,orderindex:e,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()}]};this.store.dispatch(new r.T({itemId:this.itemData.id,checklistId:this.checklist.id,body:a,fromMenu:!0}))}this.pop&&this.pop.isOpen&&this.pop.hide(),this.checklistNewItemEditing=!1,this.creatingMultipleChecklistItems=!1,this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.newItemAssignee=null,this.sendNewItemRequest=!1,this.checklistItem.isCreatingNewItem=!1,this.isCreatingNewItemLocal=!1,this.newItemTabbed=!1}}onChecklistNewItemKeyPressEditBlur(){this.newItemAssigneeClicked?this.newItemAssigneeClicked=!1:this.sendNewItemRequest?this.onChecklistNewItemFinish(!0):(this.checklistItem.isCreatingNewItem=!1,this.isCreatingNewItemLocal=!1)}onChecklistNewItemPaste(e){e.preventDefault();let t="";const i=e.clipboardData||e.originalEvent.clipboardData;if(i?t=i.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("text")),t){const e=t.split(/\n/).filter(e=>e.trim().length>0);if(e.forEach((t,i)=>{e[i]=t.trim()}),e.length<=1)return void(document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t));const i=e.join(" ");this.checklistNewItem.nativeElement.innerText=i,this.checklistNewItemPastedLines=e,this.pop.show()}}hideMultiLinePopover(){this.creatingMultipleChecklistItems=!1,this.checklistNewItemPastedLines=[],this.pop.hide()}createMultiChecklistItems(){this.creatingMultipleChecklistItems=!0,this.pop.hide()}onAssigneesMouseDown(){this.newItemAssigneeClicked=!0,this.sendNewItemRequest=!1}findChildrenIds(e){this.childrenArray.push(e.id),e.children&&e.children.forEach(e=>this.findChildrenIds(e))}isValidInput(e){return!(!e||0===e.length||""===e.replace(/\s/g,""))}getItem(e){for(let t=0;t<this.checklist.items.length;t++){const i=this.getItem2(this.checklist.items[t],e);if(i)return i}}getItem2(e,t){if(e.id===t)return e;for(let i=0;i<e.children.length;i++){const a=this.getItem2(e.children[i],t);if(a)return a}}getSiblings(e){if(void 0!==e){let t;const i=this.getItem(e.parent);return t=1===this.level||void 0===i?this.checklist.items:i.children,t}}getChildBefore(e){const t=this.getSiblings(e);if(void 0!==t){const i=t.findIndex(t=>t.id===e.id);return 0===i?null:t[i-1]}}getChildAfter(e){let t=null;const i=this.getSiblings(e);if(void 0!==i){const a=i.findIndex(t=>t.id===e.id);return i.length>1&&(t=i[a+1]),void 0===t&&(t=null),t}}getAverage(e,t){return(e+t)/2}getLastChildOfArray(e){const t=e.children;return 0===t.length?null:t[t.length-1]}focusNewItem(e){setTimeout(()=>{this.checklistNewItem.nativeElement.focus(),e&&Object(te.b)(this.checklistNewItem.nativeElement)},0)}focusItemName(e){const t=document.querySelector('[data-checklistitemidp="'+e+'"]');t&&(t.focus(),setTimeout(()=>{Object(te.b)(t)},0))}getVeryLastChild(e){if(e||(this.lastChild=null),0===e.children.length)this.lastChild=e;else{const t=e.children[e.children.length-1];0!==t.children.length?t.children.forEach(e=>{this.getVeryLastChild(e)}):this.lastChild=t}}getVeryLastChildFirstLevel(e){return e&&e.items&&e.items.length?e.items[e.items.length-1]:null}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.j),a.Wb(T.Store),a.Wb(j.a),a.Wb(ae.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-item-row"]],viewQuery:function(e,t){if(1&e&&(a.jd(_e,1),a.jd(ve,3,a.U),a.jd(ye,3,a.U),a.jd(ke,1),a.jd(Ie,3)),2&e){let e;a.Qc(e=a.rc())&&(t.checklistItemName=e.first),a.Qc(e=a.rc())&&(t.assignees=e.first),a.Qc(e=a.rc())&&(t.checklist2Menu=e.first),a.Qc(e=a.rc())&&(t.checklistNewItem=e.first),a.Qc(e=a.rc())&&(t.pop=e.first)}},inputs:{itemData:"itemData",checklist:"checklist",checklistItem:"checklistItem",level:"level",checklistItemChanged:"checklistItemChanged",canDelete:"canDelete",loading:"loading"},outputs:{onChecklistItemComplete:"onChecklistItemComplete",onFocusNewRow:"onFocusNewRow"},decls:10,vars:4,consts:function(){let e,t,i;return e=$localize`:@@common_multiple-lines␟3d3d7b6d1d8715e6cc1484e69a76ddae341a1ffd␟310978944184333460: Multiple lines detected `,t=$localize`:@@checklist2_create-pasted-lines␟f42fd54e715c9480d0c8ddfc85e2958bf31cc3ac␟586401449518811291: Create ${"\ufffd0\ufffd"}:INTERPOLATION: checklist items `,i=$localize`:@@common_new␟4ff2ada52b3f333050b7ac12ea3aff259c83b469␟128306526473431744: New `,[["class","checklist2-row",3,"checked",4,"ngIf"],["multiPopover",""],[3,"popover","containerClass"],["pop","bs-popover"],["class","checklist2-add-row",3,"ngStyle","disabled",4,"ngIf"],["assignees",""],["checklist2Menu",""],[1,"checklist2-row"],["class","checklist2-handle",3,"checklist2-cantEdit","mousedown",4,"ngIf"],[1,"checklist2-bubble",3,"click"],[1,"checklist2-row-item-name"],["contenteditable","true",3,"innerHTML","click","keydown","keyup","focusout","focusin"],["checklistItemName",""],[3,"assignedUser","hasUser","readonly","cuTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],[1,"checklist2-handle",3,"mousedown"],[3,"assignedUser","cuTooltip","click"],[3,"click"],[1,"task-todo-item-popover__content"],[1,"task-todo-item-popover__content-close",3,"icon","mousedown"],[1,"task-todo-item-popover__content-message"],e,[1,"task-todo-item-popover__content-button",3,"mousedown"],t,[1,"checklist2-add-row",3,"ngStyle"],["class","checklist2-add-row-placeholder",4,"ngIf"],["contenteditable","true",3,"click","keydown","focusout","paste"],["checklistNewItem",""],[3,"assignedUser","cuTooltip","click","mousedown"],[1,"checklist2-add-row-placeholder"],["checklistNewItemPlaceHolder",""],i]},template:function(e,t){if(1&e&&(a.bd(0,Ce,9,16,"div",0),a.bd(1,Oe,6,2,"ng-template",null,1,a.cd),a.Xb(3,"div",2,3),a.bd(5,Ae,6,12,"div",4),a.bd(6,je,0,0,"ng-template",null,5,a.cd),a.bd(8,Ne,0,0,"ng-template",null,6,a.cd)),2&e){const e=a.Rc(2);a.Dc("ngIf",t.checklist.show_completed&&t.checklistItem.resolved||!t.checklistItem.resolved),a.Ib(3),a.Dc("popover",e)("containerClass","checklist-add-popup"),a.Ib(2),a.Dc("ngIf",(t.checklistItem.isCreatingNewItem||t.isCreatingNewItemLocal)&&t.itemData.permissions.edit_checklists)}},directives:[O.q,ce.c,re,le,be,P.a,ne,ge.a,O.t,fe],encapsulation:2,changeDetection:0}),e})();const $e=["checklist2Menu"],Pe=["checklist2SaveAsTemplate"],Le=["assignees"],Ue=["checklistName"],ze=["checklistNewItem"],Me=["checklistLevelContainer1"],Re=["pop"];function Ge(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-checklist2-ellipsis",17),a.qc("click",function(t){return a.Uc(e),a.uc().openChecklist2Menu(t)}),a.bc()}}function Fe(e,t){if(1&e&&a.Xb(0,"div",22),2&e){const e=a.uc(2);a.Jb("data-checklistId",e.checklist.id)}}function Ve(e,t){if(1&e&&a.Xb(0,"div",22),2&e){const e=a.uc(3);a.Jb("data-checklistId",e.checklist.id)}}function qe(e,t){if(1&e&&a.Xb(0,"div",22),2&e){const e=a.uc(4);a.Jb("data-checklistId",e.checklist.id)}}function Xe(e,t){if(1&e&&a.Xb(0,"div",22),2&e){const e=a.uc(5);a.Jb("data-checklistId",e.checklist.id)}}function Be(e,t){if(1&e&&(a.cc(0,"div",18),a.Xb(1,"cu-checklist2-item-row",23),a.bc()),2&e){const e=t.$implicit,i=a.uc(5);a.Ob("checklist-2-completed",i.levelToAnimate===e.id),a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("checklistItemChanged",i.checklistItemChanged)("canDelete",i.canDelete||i.onlyDeleteIfOwner&&i.meUserId===(null==i.checklist?null:i.checklist.creator))("loading",i.loading)("level",5)}}function Ke(e,t){if(1&e&&(a.cc(0,"div",18),a.Xb(1,"cu-checklist2-item-row",23),a.bd(2,Xe,1,1,"div",20),a.cc(3,"div",21),a.bd(4,Be,2,13,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(4);a.Ob("checklist-2-completed",i.levelToAnimate===e.id),a.Jb("data-orderindex",e.orderindex)("data-tmpId",e.tmpId)("data-checklistId",i.checklist.id)("data-checklistItemId",e.id),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("checklistItemChanged",i.checklistItemChanged)("canDelete",i.canDelete||i.onlyDeleteIfOwner&&i.meUserId===(null==i.checklist?null:i.checklist.creator))("loading",i.loading)("level",4),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function We(e,t){if(1&e&&(a.cc(0,"div",18),a.Xb(1,"cu-checklist2-item-row",23),a.bd(2,qe,1,1,"div",20),a.cc(3,"div",21),a.bd(4,Ke,5,18,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(3);a.Ob("checklist-2-completed",i.levelToAnimate===e.id),a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("checklistItemChanged",i.checklistItemChanged)("canDelete",i.canDelete||i.onlyDeleteIfOwner&&i.meUserId===(null==i.checklist?null:i.checklist.creator))("loading",i.loading)("level",3),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function He(e,t){if(1&e&&(a.cc(0,"div",18),a.Xb(1,"cu-checklist2-item-row",23),a.bd(2,Ve,1,1,"div",20),a.cc(3,"div",21),a.bd(4,We,5,18,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(2);a.Ob("checklist-2-completed",i.levelToAnimate===e.id),a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("checklistItemChanged",i.checklistItemChanged)("canDelete",i.canDelete||i.onlyDeleteIfOwner&&i.meUserId===(null==i.checklist?null:i.checklist.creator))("loading",i.loading)("level",2),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function Ze(e,t){if(1&e){const e=a.dc();a.cc(0,"div",18),a.cc(1,"cu-checklist2-item-row",19),a.qc("onChecklistItemComplete",function(t){return a.Uc(e),a.uc().checklistItemComplete(t)})("onFocusNewRow",function(){return a.Uc(e),a.uc().focusNewItem(!1,!1)}),a.bc(),a.bd(2,Fe,1,1,"div",20),a.cc(3,"div",21),a.bd(4,He,5,18,"div",8),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.uc();a.Ob("checklist-2-completed",i.levelToAnimate===e.id),a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("checklistItemChanged",i.checklistItemChanged)("canDelete",i.canDelete||i.onlyDeleteIfOwner&&i.meUserId===(null==i.checklist?null:i.checklist.creator))("loading",i.loading)("level",1),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function Qe(e,t){if(1&e){const e=a.dc();a.cc(0,"div",24),a.cc(1,"div",25),a.qc("mousedown",function(){return a.Uc(e),a.uc().hideMultiLinePopover()}),a.bc(),a.cc(2,"div",26),a.gc(3,27),a.bc(),a.cc(4,"button",28),a.qc("mousedown",function(){return a.Uc(e),a.uc().createMultiChecklistItems()}),a.gc(5,29),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("icon","close-modal-white"),a.Ib(4),a.kc(e.checklistNewItemPastedLines.length),a.hc(5)}}function Je(e,t){1&e&&(a.cc(0,"p",35,36),a.dd(2," New "),a.bc())}const Ye=function(e){return{"margin-left.px":e}};function et(e,t){if(1&e){const e=a.dc();a.cc(0,"div",30),a.Xb(1,"cu-checklist2-plus"),a.bd(2,Je,3,0,"p",31),a.cc(3,"p",32,33),a.qc("click",function(){return a.Uc(e),a.uc().onChecklistNewItemClick()})("keydown",function(t){return a.Uc(e),a.uc().onChecklistNewItemKeyPress(t)})("focusout",function(){return a.Uc(e),a.uc().onChecklistNewItemKeyPressEditBlur()})("paste",function(t){return a.Uc(e),a.uc().onChecklistNewItemPaste(t)}),a.bc(),a.cc(5,"cu-checklist2-assignees-icon",34),a.qc("click",function(t){return a.Uc(e),a.uc().openAssignees(t)})("mousedown",function(){return a.Uc(e),a.uc().onAssigneesMouseDown()}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ob("disabled",e.loading),a.Dc("ngStyle",a.Hc(10,Ye,25*e.currentLevelCount)),a.Ib(2),a.Dc("ngIf",!e.checklistNewItemEditing),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Ib(2),a.Ob("hasUser",null!==e.newItemAssignee),a.Ec("cuTooltip",null===e.newItemAssignee?e.commonStringsService.assignText:null==e.newItemAssignee?null:e.newItemAssignee.username),a.Dc("assignedUser",e.newItemAssignee)}}function tt(e,t){if(1&e){const e=a.dc();a.cc(0,"div",37),a.qc("click",function(){return a.Uc(e),a.uc().toggleShowHideCompleted()}),a.cc(1,"p"),a.gc(2,38),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(2),a.kc(e.showTobbleButtonText),a.hc(2)}}function it(e,t){}function at(e,t){}function ct(e,t){}let nt=(()=>{class e{constructor(e,t,i,a,c,n){this.resolver=e,this.store=t,this.modalService=i,this.sharedDataService=a,this.injector=c,this.commonStringsService=n,this.canDelete=!0,this.trackById=Object(m.d)("id"),this.checklistNewItemEditing=!1,this.newItemAssignee=null,this.checklistNewItemPastedLines=[],this.creatingMultipleChecklistItems=!1,this.lastChild=null,this.currentLevelCount=0,this.maxLevelCount=0,this.isSharingApp=ie.k,this.destroy$=new f.a}ngOnChanges(){this.newlyCreatedChecklistId&&this.newlyCreatedChecklistId===this.checklist.id&&(this.focusNewItem(!1,!0),this.store.dispatch(new r.ub)),0!==this.checklist.items.length?this.getVeryLastChild(this.checklist.items[this.checklist.items.length-1]):this.checklistLevelContainer1.nativeElement.classList.remove("over"),this.lastItemInChecklist=this.checklist.items[this.checklist.items.length-1],this.maxLevelCount=0,this.getLevel(this.lastChild),5===this.maxLevelCount&&(this.maxLevelCount=4),this.showToggleButton=this.checklist.resolved>0,this.showTobbleButtonText=this.checklist.show_completed?"Hide":this.checklist.resolved.toString()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}openChecklist2Menu(e){if(!this.itemData.permissions.edit_checklists)return;const t=this.resolver.resolveComponentFactory(Q),i={moveUp:!1,moveDown:!1,assignAll:!1,unAssignAll:!1,checkAll:!1,unCheckAll:!1,saveAsTemplate:!!this.isGuest},a=this.checklists.reduce((e,t)=>t.orderindex<e?t.orderindex:e,this.checklists[0].orderindex),c=this.checklists.reduce((e,t)=>t.orderindex>e?t.orderindex:e,this.checklists[0].orderindex);0===this.checklist.items.length&&(i.assignAll=!0,i.unAssignAll=!0,i.checkAll=!0,i.unCheckAll=!0,i.saveAsTemplate=!0),this.checklist.orderindex===a&&(i.moveUp=!0),this.checklist.orderindex===c&&(i.moveDown=!0),0===this.checklist.resolved&&(i.unCheckAll=!0),this.checklist.resolved===this.checklist.resolved+this.checklist.unresolved&&(i.checkAll=!0),this.checklist2MenuDropdown=this.checklist2Menu.createComponent(t),this.checklist2MenuDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{"addNewChecklistItem"===e.type?this.onChecklistNewItemClick():"saveAsTemplate"===e.type?(this.openSaveAsTemplate(),this.checklist2MenuDropdown.instance.close()):"checklistMoveUp"===e.type?this.editChecklistOrderIndex("up"):"checklistMoveDown"===e.type?this.editChecklistOrderIndex("down"):"mainRename"===e.type&&this.renameChecklist()}),this.checklist2MenuDropdown.instance.itemData=this.itemData,this.checklist2MenuDropdown.instance.checklist=this.checklist,this.checklist2MenuDropdown.instance.checklistItem=null,this.checklist2MenuDropdown.instance.location="main",this.checklist2MenuDropdown.instance.left=e.clientX,this.checklist2MenuDropdown.instance.top=e.clientY,this.checklist2MenuDropdown.instance.hiddenItems=i,this.checklist2MenuDropdown.instance.canDelete=this.canDelete||this.onlyDeleteIfOwner&&this.meUserId===this.checklist.creator,this.checklist2MenuDropdown.instance.markForCheck(),setTimeout(()=>this.checklist2MenuDropdown.instance.open())}openSaveAsTemplate(){Object(g.a)([this.store.select(u.getUser),this.store.select(u.getMembers).pipe(Object(v.a)(e=>e.map(e=>e.user)))]).pipe(Object(k.a)(1)).subscribe(([e,t])=>{const i=this.resolver.resolveComponentFactory(J.a);this.checklist2SaveAsTemplateModal=this.checklist2SaveAsTemplate.createComponent(i),this.checklist2SaveAsTemplateModal.instance.checklist=this.checklist,this.checklist2SaveAsTemplateModal.instance.members=t,this.checklist2SaveAsTemplateModal.instance.user=e,this.checklist2SaveAsTemplateModal.instance.templateMembers=[e],this.checklist2SaveAsTemplateModal.instance.project=this.sharedDataService.compatCurrentProject,this.checklist2SaveAsTemplateModal.instance.task=this.itemData,this.checklist2SaveAsTemplateModal.instance.type="checklist",this.checklist2SaveAsTemplateModal.instance.onOpenTemplateManagerModal.pipe(Object(y.a)(this.checklist2SaveAsTemplateModal.instance.destroy$)).subscribe(({})=>{}),this.modalService.open({title:$localize`:@@cu-checklist2-item__title_save-checklist-template:Save Checklist as Template`,modifier:"template-modal",content:this.checklist2SaveAsTemplateModal})})}openTemplateManager(e){const t=this.modalService.openComponent(c.a,this.injector,{name:"templateSelector",cannotClose:!1,preventExternalClick:!0,modifier:"cu-folder-list-template-selector__modal",dialogModifier:"",bodyModifier:""});t.instance.initTemplateId="1",t.instance.initTemplateType=e,t.instance.task=this.itemData}openAssignees(e,t){const i=this.itemData.id,a=this.resolver.resolveComponentFactory(A.a);this.assigneesDropdown=this.assignees.createComponent(a),this.store.select(Object(S.I)(i)).pipe(Object(I.a)(e=>!!e),Object(y.a)(this.assigneesDropdown.instance.destroy$)).subscribe(e=>{this.assigneesDropdown.instance.setUsers(e,[])}),this.store.dispatch(new D.R({taskId:i})),this.assigneesDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{this.newItemAssignee=0===e.length?null:e[0],this.sendNewItemRequest=!0,this.focusNewItem(!0)}),this.assigneesDropdown.instance.dropdown.fromPoint="@"===t?{x:e.x+e.width,y:e.y}:{x:e.clientX,y:e.clientY},this.assigneesDropdown.instance.enableFirstSelection=!0,this.assigneesDropdown.instance.selectedUsers=[],this.assigneesDropdown.changeDetectorRef.detectChanges(),setTimeout(()=>this.assigneesDropdown.instance.open())}renameChecklist(){setTimeout(()=>{this.checklistName.nativeElement.focus(),Object(te.b)(this.checklistName.nativeElement)},0)}onChecklistNameClick(){this.checklistNewName=this.checklistName.nativeElement.innerText.replace(/\n/g,""),setTimeout(()=>{this.checklistName.nativeElement.focus()},0)}onChecklistDoneEditingName(e,t){if(this.sendEditNameRequest&&t){const t={name:this.checklistNewName};this.checklistNewName!==e.name&&this.store.dispatch(new r.ab({itemId:this.itemData.id,checklistId:e.id,body:t}))}this.sendEditNameRequest=!1}onChecklistNameEditKeyPress(e){switch(e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendEditNameRequest=!0,this.checklistName.nativeElement.blur();break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.sendEditNameRequest=!1,this.checklistName.nativeElement.blur(),this.checklistName.nativeElement.innerText=this.checklist.name}}onChecklistNameEditChange(){this.sendEditNameRequest=!0,this.checklistNewName=this.checklistName.nativeElement.innerText.replace(/\n/g,"")}onChecklistNameEditBlur(){this.onChecklistDoneEditingName(this.checklist,!0)}onChecklistNewItemClick(){this.focusNewItem(!1)}onChecklistNewItemKeyPress(e){switch(this.checklistNewItemName=this.checklistNewItem.nativeElement.innerText.replace(/\n/g,""),this.checklistNewItemEditing=!0,this.sendNewItemRequest=!0,e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendNewItemRequest=!0,this.checklistNewItem.nativeElement.blur();break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.sendNewItemRequest=!1,this.checklistNewItem.nativeElement.blur(),this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.checklistNewItemEditing=!1,this.newItemAssignee=null;break;case ee.a.TAB:e.stopPropagation(),e.preventDefault(),e.shiftKey?this.currentLevelCount>0&&(this.currentLevelCount-=1):this.currentLevelCount<this.maxLevelCount&&(this.currentLevelCount+=1)}if("@"===e.key){if(Object(te.a)(this.checklistNewItem.nativeElement))return;this.sendNewItemRequest=!1,e.stopPropagation(),e.preventDefault();const t=this.checklistNewItem.nativeElement.getBoundingClientRect();this.openAssignees(t,"@")}}onChecklistNewItemFinish(e){if(this.loading)return;if(!this.sendNewItemRequest)return this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.checklistNewItemEditing=!1,void(this.newItemAssignee=null);let t,i=0,a={items:[]};if(this.checklistNewItemName=this.checklistNewItem.nativeElement.innerText,1===this.currentLevelCount?t=this.lastItemInChecklist:2===this.currentLevelCount?t=this.getLastChildOfArray(this.lastItemInChecklist):3===this.currentLevelCount?t=this.getLastChildOfArray(this.getLastChildOfArray(this.lastItemInChecklist)):4===this.currentLevelCount&&(t=this.getLastChildOfArray(this.getLastChildOfArray(this.getLastChildOfArray(this.lastItemInChecklist)))),null!==this.lastChild){const e=this.getMainParent(this.lastChild);i=e?e.orderindex+1:this.lastChild.orderindex+1}this.creatingMultipleChecklistItems?(this.checklistNewItemPastedLines.forEach(0===this.currentLevelCount?e=>{i+=1;const t={name:e,orderindex:i,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()};a.items.push(t)}:e=>{i+=1;const c={name:e,parent:t.id,orderindex:i,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()};a.items.push(c)}),this.store.dispatch(new r.T({itemId:this.itemData.id,checklistId:this.checklist.id,body:a}))):this.isValidInput(this.checklistNewItemName)&&this.sendNewItemRequest&&e&&(a=0===this.currentLevelCount?{items:[{name:this.checklistNewItemName,orderindex:i,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()}]}:{items:[{name:this.checklistNewItemName,parent:t.id,orderindex:i,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()}]},this.store.dispatch(new r.T({itemId:this.itemData.id,checklistId:this.checklist.id,body:a})),this.focusNewItem(!1,!0)),this.pop&&this.pop.isOpen&&this.pop.hide(),this.creatingMultipleChecklistItems=!1,this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.checklistNewItemEditing=!1,this.newItemAssignee=null,this.sendNewItemRequest=!1}onChecklistNewItemKeyPressEditBlur(){this.sendNewItemRequest&&(this.onChecklistNewItemFinish(!0),this.currentLevelCount=0)}onChecklistNewItemPaste(e){e.preventDefault();let t="";const i=e.clipboardData||e.originalEvent.clipboardData;if(i?t=i.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("text")),t){const e=t.split(/\n/).filter(e=>e.trim().length>0);if(e.forEach((t,i)=>{e[i]=t.trim()}),e.length<=1)return void(document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t));const i=e.join(" ");this.checklistNewItem.nativeElement.innerText=i,this.checklistNewItemPastedLines=e,this.pop.show()}}hideMultiLinePopover(){this.creatingMultipleChecklistItems=!1,this.checklistNewItemPastedLines=[],this.pop.hide()}createMultiChecklistItems(){this.creatingMultipleChecklistItems=!0,this.pop.hide()}onAssigneesMouseDown(){this.sendNewItemRequest=!1}toggleShowHideCompleted(){this.store.dispatch(new r.ab({itemId:this.itemData.id,checklistId:this.checklist.id,body:{show_completed:!this.checklist.show_completed}}))}isValidInput(e){return!(!e||0===e.length||""===e.replace(/\s/g,""))}determineDepthOfObject(e){if(void 0===e)return 0;{let t=0;return e.children&&e.children.forEach(e=>{const i=this.determineDepthOfObject(e);i>t&&(t=i)}),t+1}}getLastChildOfArray(e){const t=e.children;return 0===t.length?null:t[t.length-1]}getVeryLastChild(e){if(0===e.children.length)this.lastChild=e;else{const t=e.children[e.children.length-1];0!==t.children.length?t.children.forEach(e=>{this.getVeryLastChild(e)}):this.lastChild=t}}getLevel(e){if(null===e)return;const t=this.getItem(e.parent);void 0!==t?(this.maxLevelCount+=1,this.getLevel(t)):this.maxLevelCount+=1}getItem(e){for(let t=0;t<this.checklist.items.length;t++){const i=this.getItem2(this.checklist.items[t],e);if(i)return i}}getItem2(e,t){if(e.id===t)return e;for(let i=0;i<e.children.length;i++){const a=this.getItem2(e.children[i],t);if(a)return a}}focusNewItem(e,t){setTimeout(()=>{this.checklistNewItem.nativeElement.focus(),t&&this.checklistNewItem.nativeElement.scrollIntoView({behavior:"smooth",block:"center"}),e&&Object(te.b)(this.checklistNewItem.nativeElement)},0)}getAverage(e,t){return(e+t)/2}editChecklistOrderIndex(e){const t=this.getChildBefore(this.checklist),i=this.getChildAfter(this.checklist);let a;if("up"===e){if(null===t)return;const e=this.getChildBefore(t);a=null===e?t.orderindex-1:this.getAverage(t.orderindex,e.orderindex)}else if("down"===e){if(null===i)return;const e=this.getChildAfter(i);a=null===e?i.orderindex+1:this.getAverage(i.orderindex,e.orderindex)}this.store.dispatch(new r.ab({itemId:this.itemData.id,checklistId:this.checklist.id,body:{orderindex:a}}))}getChildBefore(e){const t=this.checklists.findIndex(t=>t.id===e.id);let i=0===t?null:this.checklists[t-1];return void 0===i&&(i=null),i}getChildAfter(e){const t=this.checklists.findIndex(t=>t.id===e.id);let i=this.checklists[t+1];return void 0===i&&(i=null),i}checklistItemComplete(e){e.checklistItem.resolved||this.checklist.show_completed||(this.levelToAnimate=e.checklistItem.id),setTimeout(()=>{this.levelToAnimate=""},250)}getMainParent(e){const t=this.getItem(e.parent);return t?t.parent?this.getMainParent(t):t:e}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.j),a.Wb(T.Store),a.Wb(w.a),a.Wb(j.a),a.Wb(a.t),a.Wb(ae.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-item"]],viewQuery:function(e,t){if(1&e&&(a.jd($e,3,a.U),a.jd(Pe,3,a.U),a.jd(Le,3,a.U),a.jd(Ue,3),a.jd(ze,1),a.jd(Me,3),a.jd(Re,3)),2&e){let e;a.Qc(e=a.rc())&&(t.checklist2Menu=e.first),a.Qc(e=a.rc())&&(t.checklist2SaveAsTemplate=e.first),a.Qc(e=a.rc())&&(t.assignees=e.first),a.Qc(e=a.rc())&&(t.checklistName=e.first),a.Qc(e=a.rc())&&(t.checklistNewItem=e.first),a.Qc(e=a.rc())&&(t.checklistLevelContainer1=e.first),a.Qc(e=a.rc())&&(t.pop=e.first)}},inputs:{checklists:"checklists",checklist:"checklist",itemData:"itemData",checklistItemChanged:"checklistItemChanged",dragulaBag:"dragulaBag",isGuest:"isGuest",canDelete:"canDelete",onlyDeleteIfOwner:"onlyDeleteIfOwner",meUserId:"meUserId",loading:"loading",newlyCreatedChecklistId:"newlyCreatedChecklistId"},features:[a.Gb],decls:24,vars:16,consts:function(){let e,t,i;return e=$localize`:@@common_multiple-lines␟f0ce38a1c34796737223cfd23f2563c2190f5464␟8909497180615845624: Multiple lines detected `,t=$localize`:@@checklist2_create-pasted-lines␟7ea1d766f8e2104330f7e7d26afa83556dcd26ef␟3968312781073107377: Create ${"\ufffd0\ufffd"}:INTERPOLATION: checklist items `,i=$localize`:@@cu-checklist2-item__btn_toggle-completed␟7c9c5072dddff0e5701ee5ed39757bcd2e143eb3␟6548156820065523208: ${"\ufffd0\ufffd"}:INTERPOLATION: COMPLETED `,[[1,"cu-checklist2-item"],[1,"checklist2-title"],["contenteditable","true",3,"click","keydown","keyup","focusout"],["checklistName",""],[3,"click",4,"ngIf"],[1,"checklist2-levels-container"],[1,"checklist2-level-container","checklist2-level-container-1",3,"dragula"],["checklistLevelContainer1",""],["class","checklist2-level",3,"checklist-2-completed",4,"ngFor","ngForOf","ngForTrackBy"],["multiPopover",""],[3,"popover","containerClass"],["pop","bs-popover"],["class","checklist2-add-row checklist2-add-row-main",3,"ngStyle","disabled",4,"ngIf"],["class","checklist2-show-hide-toggle",3,"click",4,"ngIf"],["checklist2Menu",""],["checklist2SaveAsTemplate",""],["assignees",""],[3,"click"],[1,"checklist2-level"],[3,"itemData","checklist","checklistItem","checklistItemChanged","canDelete","loading","level","onChecklistItemComplete","onFocusNewRow"],["class","checklist2-nested-target",4,"ngIf"],[1,"checklist2-level-container",3,"dragula"],[1,"checklist2-nested-target"],[3,"itemData","checklist","checklistItem","checklistItemChanged","canDelete","loading","level"],[1,"task-todo-item-popover__content"],[1,"task-todo-item-popover__content-close",3,"icon","mousedown"],[1,"task-todo-item-popover__content-message"],e,[1,"task-todo-item-popover__content-button",3,"mousedown"],t,[1,"checklist2-add-row","checklist2-add-row-main",3,"ngStyle"],["class","checklist2-add-row-placeholder",4,"ngIf"],["contenteditable","true",3,"click","keydown","focusout","paste"],["checklistNewItem",""],[3,"assignedUser","cuTooltip","click","mousedown"],[1,"checklist2-add-row-placeholder"],["checklistNewItemPlaceHolder",""],[1,"checklist2-show-hide-toggle",3,"click"],i]},template:function(e,t){if(1&e&&(a.cc(0,"div",0),a.cc(1,"div",1),a.cc(2,"h4",2,3),a.qc("click",function(){return t.onChecklistNameClick()})("keydown",function(e){return t.onChecklistNameEditKeyPress(e)})("keyup",function(){return t.onChecklistNameEditChange()})("focusout",function(){return t.onChecklistNameEditBlur()}),a.dd(4),a.bc(),a.cc(5,"span"),a.dd(6),a.bc(),a.bd(7,Ge,1,0,"cu-checklist2-ellipsis",4),a.bc(),a.cc(8,"div",5),a.cc(9,"div",6,7),a.bd(11,Ze,5,18,"div",8),a.bc(),a.bc(),a.bd(12,Qe,6,2,"ng-template",null,9,a.cd),a.Xb(14,"div",10,11),a.bd(16,et,6,12,"div",12),a.bd(17,tt,3,1,"div",13),a.bc(),a.bd(18,it,0,0,"ng-template",null,14,a.cd),a.bd(20,at,0,0,"ng-template",null,15,a.cd),a.bd(22,ct,0,0,"ng-template",null,16,a.cd)),2&e){const e=a.Rc(13);a.Ib(2),a.Ob("checklist2-cantEdit",!t.itemData.permissions.edit_checklists),a.Ib(2),a.fd(" ",t.checklist.name," "),a.Ib(2),a.gd("(",t.checklist.resolved,"/",t.checklist.unresolved+t.checklist.resolved,")"),a.Ib(1),a.Dc("ngIf",!t.isSharingApp&&t.itemData.permissions.edit_checklists),a.Ib(2),a.Ob("empty",0===t.checklist.items.length),a.Dc("dragula",t.dragulaBag),a.Jb("data-checklistId",t.checklist.id),a.Ib(2),a.Dc("ngForOf",t.checklist.items)("ngForTrackBy",t.trackById),a.Ib(3),a.Dc("popover",e)("containerClass","checklist-add-popup"),a.Ib(2),a.Dc("ngIf",t.itemData.permissions.edit_checklists),a.Ib(1),a.Dc("ngIf",t.showToggleButton&&!t.isSharingApp)}},directives:[O.q,C.a,O.p,ce.c,ne,Ee,ge.a,O.t,fe,be,P.a],encapsulation:2,changeDetection:0}),e})();var ot=i("AQW5"),st=i("oGMP"),rt=i("BUTj"),lt=i("3Pt+"),ut=i("HcWw"),dt=i("Zq4E"),mt=i("vxfF"),ht=i("BTFG"),pt=i("xNxj");let bt=(()=>{class e{transform(e=[],t){return e&&t?e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):e||[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Vb({name:"cuChecklistTemplateFilter",type:e,pure:!0}),e})();const gt=["dropdown"],ft=["searchField"],_t=["userBody"];function vt(e,t){1&e&&a.Xb(0,"cu-loader")}function yt(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-template-selector-list-item",19),a.qc("onSelectTemplate",function(t){return a.Uc(e),a.uc(3).useTemplate(t)})("onUseTemplate",function(t){return a.Uc(e),a.uc(3).useTemplate(t)}),a.vc(1,"async"),a.vc(2,"async"),a.vc(3,"async"),a.vc(4,"async"),a.vc(5,"async"),a.vc(6,"async"),a.vc(7,"async"),a.bc()}if(2&e){const e=t.$implicit,i=a.uc(3);let c=null;a.Dc("item",e)("canDelete",a.wc(1,3,i.canDelete$)||a.wc(2,5,i.onlyDeleteIfOwner$)&&(!(null!=(c=a.wc(3,7,i.selectedChecklistTemplates$))&&c.creator)||(null==(c=a.wc(4,9,i.meUser$))?null:c.id)===(null==(c=a.wc(5,11,i.selectedChecklistTemplates$))?null:c.creator)||(null==(c=a.wc(6,13,i.meUser$))?null:c.id)===(null==(c=a.wc(7,15,i.selectedChecklistTemplates$))||null==c.creator?null:c.creator.id)))("keypressSelectedTemplate",i.keypressSelectedTemplate)}}function kt(e,t){1&e&&(a.cc(0,"div",20),a.gc(1,21),a.bc())}function It(e,t){if(1&e&&(a.ac(0),a.bd(1,yt,8,17,"cu-template-selector-list-item",17),a.vc(2,"cuChecklistTemplateFilter"),a.vc(3,"async"),a.bd(4,kt,2,0,"div",18),a.vc(5,"cuChecklistTemplateFilter"),a.vc(6,"async"),a.Zb()),2&e){const e=a.uc(2);let t=null;a.Ib(1),a.Dc("cdkVirtualForOf",a.xc(2,2,a.wc(3,5,e.checklistTemplates$),e.searchString)),a.Ib(3),a.Dc("ngIf",((null==e.searchString?null:e.searchString.length)&&!e.readonly||(null==e.searchString?null:e.searchString.length)&&!(null!=e.searchString&&e.searchString.length)&&!e.readonly)&&!(null!=(t=a.xc(5,7,a.wc(6,10,e.checklistTemplates$),e.searchString))&&t.length))}}function wt(e,t){if(1&e){const e=a.dc();a.cc(0,"button",22),a.qc("click",function(){return a.Uc(e),a.uc(2).openModal()}),a.gc(1,23),a.bc()}}function Tt(e,t){if(1&e){const e=a.dc();a.cc(0,"div",5),a.qc("keydown.ArrowUp",function(t){return a.Uc(e),a.uc().arrowKeyPressed(t)})("keydown.ArrowDown",function(t){return a.Uc(e),a.uc().arrowKeyPressed(t)})("keyup.Enter",function(t){return a.Uc(e),a.uc().arrowKeyPressed(t)}),a.cc(1,"div",6),a.cc(2,"div",7,8),a.cc(4,"div",9),a.cc(5,"input",10,11),a.qc("ngModelChange",function(t){return a.Uc(e),a.uc().searchString=t})("cuIsInViewport",function(){return a.Uc(e),a.uc().focusSearchBox()}),a.bc(),a.bc(),a.bc(),a.cc(7,"cdk-virtual-scroll-viewport",12,13),a.bd(9,vt,1,0,"cu-loader",14),a.bd(10,It,7,12,"ng-container",14),a.bc(),a.cc(11,"div",15),a.bd(12,wt,2,0,"button",16),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.Rc(6),t=a.uc();a.Ib(5),a.Dc("ngModel",t.searchString)("scrollContainer",null==e?null:e.nativeElement)("isInViewPortEnabled",!0),a.Ib(2),a.Dc("itemSize",t.itemHeight),a.Ib(2),a.Dc("ngIf",t.isLoading),a.Ib(1),a.Dc("ngIf",!t.isLoading),a.Ib(2),a.Dc("ngIf",t.allowEditChecklist&&!t.offline)}}const xt=["*"];let Ct=(()=>{class e{constructor(e,t,i,c){this.changeDetectorRef=e,this.templateService=t,this.templateKeypressService=i,this.store=c,this.readonly=!1,this.allowEditChecklist=!0,this.offline=!1,this.disabled=!1,this.modifier="",this.onDone=new a.o,this.onClose=new a.o,this.browseAll=new a.o,this.isLoading=!1,this.meUser$=this.store.select(u.getUser),this.canDelete$=this.store.select(u.getUserEnterprisePermissions).pipe(Object(v.a)(e=>!e||e.delete_items===n.b.ON)),this.onlyDeleteIfOwner$=this.store.select(u.getUserEnterprisePermissions).pipe(Object(v.a)(e=>e&&e.delete_items===n.b.CREATE)),this.dropdownIsOpen=!1,this.itemHeight=35,this.keypressSelectedTemplate=null,this.traverseTemplatesIndex=null,this.itemClass="cu-folder-list-template-selector__sidebar-list-item",this.destroy$=new f.a}ngOnInit(){this.checklistTemplates$=this.templateService.getTemplates("checklist",this.teamId).pipe(Object(v.a)(e=>Object(ot.b)(e.templates,"name")),Object(y.a)(this.destroy$)),this.selectedChecklistTemplates$=this.checklistTemplates$.pipe(Object(v.a)(e=>e.find(e=>e.id===this.initTemplateId)),Object(y.a)(this.destroy$))}ngAfterContentInit(){this.dropdown.dropdownClose.pipe(Object(y.a)(this.destroy$)).subscribe(()=>this.onClose.emit(!0))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}useTemplate(e){this.isLoading=!0,this.templateService.createChecklistFromTemplate(e.id,{name:e.name,remap_start_date:!0,return_immediately:!0,task_id:this.taskId}).subscribe(e=>{this.isLoading=!1,this.onDone.emit(e),this.dropdown.close()})}openModal(){this.browseAll.emit(!0),this.dropdown.close()}focusSearchBox(){this.searchField&&this.searchField.nativeElement&&(this.searchField.nativeElement.focus(),this.checklistTemplates$.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{this.templatesForKeypress=e}))}arrowKeyPressed(e){switch(this.templateKeypressService.keypressesHaveStartedSource.next(),e.keyCode){case ee.a.ENTER:this.selectCurrentlyKeypressActiveItem();break;case ee.a.ARROW_UP:this.traverseTemplates("up");break;case ee.a.ARROW_DOWN:this.traverseTemplates("down")}}traverseTemplates(e){this.templatesForKeypress&&this.templatesForKeypress.length&&(null===this.traverseTemplatesIndex&&(this.traverseTemplatesIndex=-1),"up"===e&&this.traverseTemplatesIndex--,"down"===e&&this.traverseTemplatesIndex++,this.traverseTemplatesIndex<0&&(this.traverseTemplatesIndex=this.templatesForKeypress.length-1,this.userBody.scrollToIndex(99999999)),this.traverseTemplatesIndex>=this.templatesForKeypress.length&&(this.traverseTemplatesIndex=0,this.userBody.scrollToIndex(1)),this.keypressSelectedTemplate=this.templatesForKeypress[this.traverseTemplatesIndex],this.changeDetectorRef.markForCheck(),this.templateKeypressService.scrollKeypressedItemIntoView())}selectCurrentlyKeypressActiveItem(){this.templatesForKeypress&&this.templatesForKeypress.length&&document.querySelector(`.${this.itemClass}.keypress-active`)&&this.keypressSelectedTemplate&&this.useTemplate(this.keypressSelectedTemplate)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.h),a.Wb(st.a),a.Wb(rt.a),a.Wb(T.Store))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist-template-dropdown"]],viewQuery:function(e,t){if(1&e&&(a.jd(gt,3),a.jd(ft,1),a.jd(_t,1)),2&e){let e;a.Qc(e=a.rc())&&(t.dropdown=e.first),a.Qc(e=a.rc())&&(t.searchField=e.first),a.Qc(e=a.rc())&&(t.userBody=e.first)}},inputs:{readonly:"readonly",allowEditChecklist:"allowEditChecklist",offline:"offline",disabled:["dropdown-disabled","disabled"],modifier:"modifier",initTemplateId:"initTemplateId",teamId:"teamId",taskId:"taskId"},outputs:{onDone:"onDone",onClose:"onClose",browseAll:"browseAll"},ngContentSelectors:xt,decls:6,vars:3,consts:function(){let e,t,i;return e=$localize`:@@cu-checklist-template-dropdown__form-placeholder_search-template␟91a487337d05b7bd0f03d2f7d9d40f0eb309ee2c␟7215131956829578015:Search template`,t=$localize`:@@common_no-results␟21e884659c432b22f9fa40739b7d6a595bf67b03␟8596089411152642174: No results `,i=$localize`:@@common_browse-templates␟ce010ae706ec5816241aa214efb20be8f4a1e329␟3689893673072520951: Browse Templates `,[["cuDropdown","",1,"cu-dropdown",3,"dropdownDisabled","dropdownCloseOnInsideClick","ngClass","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["class","cu-dropdown__menu cu-dropdown__menu_left",3,"keydown.ArrowUp","keydown.ArrowDown","keyup.Enter",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_left",3,"keydown.ArrowUp","keydown.ArrowDown","keyup.Enter"],[1,"user-list","cu-template-select"],[1,"user-list__header"],["userHeader",""],[1,"cu-search"],["type","text","placeholder",e,"cuAutoFocus","",1,"cu-search__input","cu-template-select__search",3,"ngModel","scrollContainer","isInViewPortEnabled","ngModelChange","cuIsInViewport"],["searchField",""],[1,"user-list__body","cu-template-select__list",3,"itemSize"],["userBody",""],[4,"ngIf"],[1,"cu-template-select__manager"],["class","cu-checklist2-add__btn",3,"click",4,"ngIf"],[3,"item","canDelete","keypressSelectedTemplate","onSelectTemplate","onUseTemplate",4,"cdkVirtualFor","cdkVirtualForOf"],["class","user-list-item user-list-item__nomatch",4,"ngIf"],[3,"item","canDelete","keypressSelectedTemplate","onSelectTemplate","onUseTemplate"],[1,"user-list-item","user-list-item__nomatch"],t,[1,"cu-checklist2-add__btn",3,"click"],i]},template:function(e,t){1&e&&(a.Cc(),a.cc(0,"div",0,1),a.qc("dropdownOpen",function(){return t.dropdownIsOpen=!0})("dropdownClose",function(){return t.dropdownIsOpen=!1}),a.cc(2,"div",2,3),a.Bc(4),a.bc(),a.bd(5,Tt,13,7,"div",4),a.bc()),2&e&&a.Dc("dropdownDisabled",t.disabled)("dropdownCloseOnInsideClick",!1)("ngClass",t.modifier)},directives:[N.b,O.o,E.a,$.a,lt.c,ut.a,lt.p,lt.s,dt.a,mt.c,mt.a,O.q,ht.a,mt.b,pt.a],pipes:[bt,O.b],styles:['.cu-template-select__pad{padding-left:10px}.cu-template-select .keypress-active{background-color:#efeff4}.cu-template-select__manager{padding:4px 15px;display:flex;align-items:flex-end;flex-direction:column}.cu-template-select__manager button{padding:4px}.cu-template-select.user-list{max-height:370px;position:relative}.cu-template-select .user-list__body{min-height:100px}.cu-template-select .user-list__body .cu-folder-list-template-selector__sidebar-list-item{padding:8px 15px}.cu-template-select.tag-create-disabled{cursor:not-allowed}.cu-template-select.tag-create-disabled .cu-tags-select__existing,.cu-template-select.tag-create-disabled .user-list__body,.cu-template-select.tag-create-disabled .user-list__header{pointer-events:none}.cu-template-select__existing{padding:7px 16px 0 7px;border-bottom:1px solid #e4e4e4;display:flex;flex-wrap:wrap;overflow:auto;flex-shrink:0;max-height:120px}.dark-theme .cu-template-select__existing{border-bottom:1px solid #1e272e}.cu-template-select__existing .cu-tags-badge{display:inline-flex}.cu-template-select__existing .cu-tags-badge color-picker{position:absolute;top:0}.cu-template-select .user-list__body{background:#fff}.dark-theme .cu-template-select .user-list__body{background:#384047}.cu-template-select .cu-search{border-bottom:1px solid #e4e4e4}.cu-template-select__item-row{display:flex;justify-content:space-between;max-width:250px;border-bottom:1px solid #f4f4f4;padding:0 12px 0 8px}.dark-theme .cu-template-select__item-row{border-bottom:1px solid #1e272e}.cu-template-select__item-row .cu-tags-select__badge-icon-close{display:none}.cu-template-select__item-row:hover{background-color:#ac1e1e}.dark-theme .cu-template-select__item-row:hover{background:#2b343b}.cu-template-select__item-row:hover .cu-tags-select__badge-icon-close{display:flex}.cu-template-select__item-row_highlighted{background-color:#f1f1f1}.dark-theme .cu-template-select__item-row_highlighted{background:#2b343b}.cu-template-select__item-row cu-quick-actions-menu{display:flex;align-items:center}.cu-template-select__item-row .cu-dropdown.cu-dropdown_open .cu-tags-select__badge-icon-close{display:flex}.cu-template-select__item-container{position:absolute;right:8px}.cu-template-select__click{display:flex;align-items:center;min-width:0}.cu-template-select__error{font:400 13px/1.2 Gotham Pro,Proxima Nova,arial,serif;color:#fd71af;padding:10px;border-bottom:1px solid #f4f4f4}.cu-template-select__name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1.15;min-width:0;max-width:200px;position:absolute}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-template-select__name{font-family:var(--global-font-support)}}.dark-theme .cu-template-select__name_color-invert{color:#343434!important}.cu-template-select__name-shadow{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1.15;min-width:0;max-width:200px;overflow:hidden;text-overflow:ellipsis;position:relative;color:transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-template-select__name-shadow{font-family:var(--global-font-support)}}.cu-template-select__badge{display:flex;justify-content:center;align-items:center;min-width:41px;height:20px;border-radius:2px 13px 13px 2px;margin:0 4px 7px 0;padding:0 10px 0 8px;white-space:nowrap;text-overflow:ellipsis;position:relative;overflow:hidden}.dark-theme .cu-template-select__badge:before{content:"";display:block;position:absolute;width:100%;height:100%;background:inherit}.cu-template-select__badge_readonly .cu-template-select__name{position:relative}.cu-template-select__badge_readonly .cu-template-select__name-shadow{display:none}.cu-template-select__badge .cu-template-select__name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:18px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-template-select__badge .cu-template-select__name{font-family:var(--global-font-support)}}.cu-template-select__badge .cu-template-select__name-shadow{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:18px;color:transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-template-select__badge .cu-template-select__name-shadow{font-family:var(--global-font-support)}}.cu-template-select__badge-icon-close{display:none;position:absolute;top:0;right:0;bottom:0;margin:auto;background:#fff;border-radius:0 13px 13px 0;width:16px;height:26px;opacity:1;fill:#fff;padding:0 3px 1px 2px;cursor:pointer}.cu-template-select__badge-icon-close:hover{opacity:1}.cu-template-select__badge-icon-close.list-item{margin:0}.cu-template-select__badge-icon-close_color-dark svg{fill:#343434!important}.cu-template-select__badge-ellipsis{display:none;position:absolute;right:23px}.cu-template-select__badge-ellipsis-icon{margin:-1px 0 0;width:12px;height:18px;cursor:pointer;opacity:.4}.cu-template-select__badge-ellipsis-icon:hover{opacity:1}.dark-theme .cu-template-select__badge-ellipsis-icon_color-invert{fill:#343434!important}.cu-template-select__badge:not(.cu-tags-select__badge_readonly):hover .cu-template-select__badge-ellipsis,.cu-template-select__badge:not(.cu-tags-select__badge_readonly):hover .cu-template-select__badge-icon-close{display:flex}.cu-template-select__badge:not(.cu-tags-select__badge_readonly):hover .cu-template-select__name{max-width:calc(100% - 50px)}.cu-template-select .cu-search__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:15px}.cu-template-select .cu-search__input::-webkit-input-placeholder{color:rgba(52,52,52,.4);font-size:14px}.cu-template-select .cu-search__input::-moz-placeholder{color:rgba(52,52,52,.4);opacity:1;font-size:14px}.cu-template-select .cu-search__input:-ms-input-placeholder{color:rgba(52,52,52,.4);font-size:14px}.cu-template-select .cu-search__input:-moz-placeholder{color:rgba(52,52,52,.4);opacity:1;font-size:14px}.dark-theme .cu-template-select .cu-search__input::-webkit-input-placeholder{color:#828588;font-size:14px}.dark-theme .cu-template-select .cu-search__input::-moz-placeholder{color:#828588;opacity:1;font-size:14px}.dark-theme .cu-template-select .cu-search__input:-ms-input-placeholder{color:#828588;font-size:14px}.dark-theme .cu-template-select .cu-search__input:-moz-placeholder{color:#828588;opacity:1;font-size:14px}.cu-template-select .user-list-item{transition:none}.cu-template-select .user-list-item.cu-tags-select__item{display:flex;justify-content:space-between;border:0;padding:9px 0;flex:1 0 0}'],encapsulation:2,changeDetection:0}),e})();const Ot=["checklistItemName"],St=["assignees"],Dt=["checklist2Menu"],At=["checklistNewItem"],jt=["pop"];function Nt(e,t){if(1&e){const e=a.dc();a.cc(0,"div",7),a.cc(1,"div",8),a.qc("mousedown",function(){return a.Uc(e),a.uc().onHandleClick()}),a.Xb(2,"cu-checklist2-handle"),a.bc(),a.cc(3,"div",9),a.Xb(4,"cu-checklist2-check"),a.bc(),a.cc(5,"div",10),a.cc(6,"p",11,12),a.qc("click",function(t){return a.Uc(e),a.uc().onChecklistItemNameClick(t)})("keydown",function(t){return a.Uc(e),a.uc().onChecklistItemNameEditKeyPress(t)})("keyup",function(){return a.Uc(e),a.uc().onChecklistItemNameEditChange()})("focusout",function(){a.Uc(e);const t=a.uc();return t.onChecklistItemNameEditBlur(),t.nameFocused=!1})("focusin",function(){return a.Uc(e),a.uc().nameFocused=!0}),a.bc(),a.bc(),a.cc(8,"cu-checklist2-assignees-icon",13),a.qc("click",function(t){return a.Uc(e),a.uc().openAssignees(t)}),a.bc(),a.cc(9,"cu-checklist2-ellipsis",14),a.qc("click",function(t){return a.Uc(e),a.uc().openChecklist2Menu(t)}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ob("checked",e.checklistItem.resolved),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Ib(4),a.Ob("focused",e.nameFocused),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Dc("innerHTML",e.checklistName,a.Vc),a.Ib(2),a.Ob("hasUser",null!==(null==e.checklistItem?null:e.checklistItem.assignee)),a.Ec("cuTooltip",null===(null==e.checklistItem?null:e.checklistItem.assignee)?e.commonStringsService.assignText:null==e.checklistItem?null:e.checklistItem.assignee.username),a.Dc("assignedUser",null==e.checklistItem?null:e.checklistItem.assignee)}}function Et(e,t){if(1&e){const e=a.dc();a.cc(0,"div",15),a.cc(1,"div",16),a.qc("mousedown",function(){return a.Uc(e),a.uc().hideMultiLinePopover()}),a.bc(),a.cc(2,"div",17),a.dd(3," Multiple lines detected "),a.bc(),a.cc(4,"button",18),a.qc("mousedown",function(){return a.Uc(e),a.uc().createMultiChecklistItems()}),a.gc(5,19),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("icon","close-modal-white"),a.Ib(4),a.kc(e.checklistNewItemPastedLines.length),a.hc(5)}}function $t(e,t){1&e&&(a.cc(0,"p",25,26),a.dd(2," New "),a.bc())}const Pt=function(e){return{"margin-left.px":e}};function Lt(e,t){if(1&e){const e=a.dc();a.cc(0,"div",20),a.Xb(1,"cu-checklist2-plus"),a.bd(2,$t,3,0,"p",21),a.cc(3,"p",22,23),a.qc("click",function(){return a.Uc(e),a.uc().onChecklistNewItemClick()})("keydown",function(t){return a.Uc(e),a.uc().onChecklistNewItemKeyPress(t)})("focusout",function(){return a.Uc(e),a.uc().onChecklistNewItemKeyPressEditBlur()})("paste",function(t){return a.Uc(e),a.uc().onChecklistNewItemPaste(t)}),a.bc(),a.cc(5,"cu-checklist2-assignees-icon",24),a.qc("click",function(t){return a.Uc(e),a.uc().openAssignees(t,"newItem")})("mousedown",function(){return a.Uc(e),a.uc().onAssigneesMouseDown()}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Dc("ngStyle",a.Hc(8,Pt,e.newItemTabbed?25:0)),a.Ib(2),a.Dc("ngIf",!e.checklistNewItemEditing),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Ib(2),a.Ob("hasUser",null!==e.newItemAssignee),a.Ec("cuTooltip",null===e.newItemAssignee?e.commonStringsService.assignText:null==e.newItemAssignee?null:e.newItemAssignee.username),a.Dc("assignedUser",e.newItemAssignee)}}function Ut(e,t){}function zt(e,t){}let Mt=(()=>{class e{constructor(e,t,i){this.resolver=e,this.store=t,this.commonStringsService=i,this.childrenArray=[],this.childrenObjArray=[],this.newItemAssignee=null,this.checklistItemNameFirstClick=!0,this.checklistNewItemEditing=!1,this.checklistNewItemPastedLines=[],this.creatingMultipleChecklistItems=!1,this.nameFocused=!1,this.newTaskMembersValue=[],this.destroy$=new f.a}set newTaskMembers(e){if(this.newTaskMembersValue=e,this.newItemAssignee&&this.newItemAssignee.id){const e=this.newItemAssignee.id;this.newTaskMembersValue&&this.newTaskMembersValue.find(t=>t.id===e)||(this.newItemAssignee=null)}else if(this.checklistItem&&this.checklistItem.assignee&&this.checklistItem.assignee){const e=this.checklistItem.assignee.id;this.newTaskMembersValue&&this.newTaskMembersValue.find(t=>t.id===e)||this.store.dispatch(new r.bb({propertyToEdit:"assignee",newValue:null,checklistId:this.checklist.id,checklistItemId:this.checklistItem.id}))}}get newTaskMembers(){return this.newTaskMembersValue||[]}ngOnInit(){if(this.checklistName=Object(oe.y)(this.checklistItem.name),this.newTaskChecklistsChanged.changed&&(this.newTaskChecklistsChanged.checklistItemId===this.checklistItem.id&&setTimeout(()=>{this.checklistItemName.nativeElement.focus(),Object(te.b)(this.checklistItemName.nativeElement),this.store.dispatch(new r.Ab({changed:!1,changedItemId:""}))},0),this.store.dispatch(new r.lb({checklistId:"",checklistItemId:"",changed:!1}))),5===this.level){this.findChildrenObjects(this.checklistItem);const e=this.checklistItem.parent,t=[];this.childrenObjArray.forEach(i=>{i.children=[],i.parent=e,t.push(i)}),this.childrenObjArray.length>1&&(this.store.dispatch(new r.nb({itemToDelete:this.checklistItem,checklistId:this.checklist.id,parent:this.checklistItem.parent})),this.store.dispatch(new r.qb({itemsToMove:t,parent:e,checklistId:this.checklist.id})))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}onChecklistItemNameClick(e){const t=Object(se.a)(e);null!==e&&"A"===t[0].tagName&&window.open(t[0].attributes[1].nodeValue,"_blank"),this.checklistItemNewName=this.checklistItemName.nativeElement.innerText.replace(/\n/g,""),this.checklistItemNameFirstClick=!1}onChecklistItemNameEditKeyPress(e){switch(e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendEditNameRequest=!0,this.checklistItemName.nativeElement.blur();break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.sendEditNameRequest=!1,this.checklistItemName.nativeElement.blur(),this.checklistItemName.nativeElement.innerText=this.checklistItem.name;break;case ee.a.TAB:e.stopPropagation(),e.preventDefault();const t=this.level+1;let i,a;this.findChildrenIds(this.checklistItem),1===this.level?(i=null,a=null):(i=this.getItem(this.checklistItem.parent),a=this.getChildAfter(i));const c=this.getChildBefore(this.checklistItem);let n,o=this.checklistItem.orderindex;if(e.shiftKey)null!==i&&null!==a&&(o=this.getAverage(i.orderindex,a.orderindex)),1!==this.level&&(null===a&&(o=i.orderindex+1),n=2===this.level?null:i.parent,this.store.dispatch(new r.bb({propertyToEdit:"orderindex",newValue:o,checklistId:this.checklist.id,checklistItemId:this.checklistItem.id})),this.store.dispatch(new r.bb({propertyToEdit:"parent",newValue:n,checklistId:this.checklist.id,checklistItemId:this.checklistItem.id})),this.store.dispatch(new r.pb({parent:n,itemToMove:this.checklistItem,checklistId:this.checklist.id,directParent:i.id})),this.level-=1);else{if(null===c||5===this.level){this.childrenArray=[];break}{const e=this.getLastChildOfArray(c);let a=this.checklistItem.orderindex;null!==e&&(a=e.orderindex+1),null!==c&&this.level<=t&&(this.store.dispatch(new r.bb({propertyToEdit:"orderindex",newValue:o,checklistId:this.checklist.id,checklistItemId:this.checklistItem.id})),this.store.dispatch(new r.bb({propertyToEdit:"parent",newValue:c.id,checklistId:this.checklist.id,checklistItemId:this.checklistItem.id})),this.store.dispatch(new r.pb({parent:c.id,itemToMove:this.checklistItem,checklistId:this.checklist.id,directParent:null===i?null:i.id}))),this.level+=1}}this.childrenArray=[]}if("@"===e.key){if(Object(te.a)(this.checklistItemName.nativeElement))return;e.stopPropagation(),e.preventDefault();const t=this.checklistItemName.nativeElement.getBoundingClientRect();this.openAssignees(t,"@")}}onChecklistItemNameEditChange(){this.sendEditNameRequest=!0,this.checklistItemNewName=this.checklistItemName.nativeElement.innerText.replace(/\n/g,"")}onChecklistItemNameEditBlur(){this.checklistItemNewName!==this.checklistItem.name&&(this.checklistItemNameFirstClick=!0,void 0!==this.checklistItemNewName&&(this.checklistName=Object(oe.y)(this.checklistItemNewName)),this.onChecklistItemDoneEditingName(this.checklist,this.checklistItem,!0))}onChecklistItemDoneEditingName(e,t,i){this.sendEditNameRequest&&i&&this.checklistItemNewName!==t.name&&this.store.dispatch(new r.bb({propertyToEdit:"name",newValue:this.checklistItemNewName,checklistId:this.checklist.id,checklistItemId:this.checklistItem.id})),this.sendEditNameRequest=!1}onHandleClick(){document.activeElement.blur()}openAssignees(e,t){if(!this.itemData.permissions.edit_checklists)return;const i=null!==this.checklistItem.assignee?[this.checklistItem.assignee]:[],a=this.resolver.resolveComponentFactory(A.a);this.assigneesDropdown=this.assignees.createComponent(a),this.assigneesDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{"newItem"===t?(this.newItemAssignee=0===e.length?null:e[0],this.sendNewItemRequest=!0,this.focusNewItem(!0)):this.store.dispatch(new r.bb({propertyToEdit:"assignee",newValue:0===e.length?null:e[0],checklistId:this.checklist.id,checklistItemId:this.checklistItem.id}))}),this.assigneesDropdown.instance.dropdown.fromPoint="@"===t?{x:e.x+e.width,y:e.y}:{x:e.clientX,y:e.clientY},this.assigneesDropdown.instance.selectedUsers=i,this.assigneesDropdown.instance.enableFirstSelection=!0,this.assigneesDropdown.instance.users=this.newTaskMembersValue,this.assigneesDropdown.changeDetectorRef.detectChanges(),setTimeout(()=>this.assigneesDropdown.instance.open())}openChecklist2Menu(e){if(!this.itemData.permissions.edit_checklists)return;const t=this.resolver.resolveComponentFactory(Q);this.checklist2MenuDropdown=this.checklist2Menu.createComponent(t),this.checklist2MenuDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{"checklistItemRename"===e.type?this.onChecklistItemNameClick(null):"addNewChecklistItem"===e.type&&(this.checklistItem.isCreatingNewItem=!0,setTimeout(()=>{this.checklistNewItem.nativeElement.focus()},0))}),this.checklist2MenuDropdown.instance.itemData=this.itemData,this.checklist2MenuDropdown.instance.checklist=this.checklist,this.checklist2MenuDropdown.instance.checklistItem=this.checklistItem,this.checklist2MenuDropdown.instance.location="item",this.checklist2MenuDropdown.instance.left=e.clientX,this.checklist2MenuDropdown.instance.top=e.clientY,this.checklist2MenuDropdown.instance.isNewTask=!0,this.checklist2MenuDropdown.instance.newTaskMembers=this.newTaskMembersValue,this.checklist2MenuDropdown.instance.markForCheck(),setTimeout(()=>this.checklist2MenuDropdown.instance.open())}onChecklistNewItemClick(){this.focusNewItem(!1)}onChecklistNewItemKeyPress(e){switch(this.checklistNewItemName=this.checklistNewItem.nativeElement.innerText.replace(/\n/g,""),this.sendNewItemRequest=!0,this.checklistNewItemEditing=!0,e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendNewItemRequest=!0,this.checklistNewItem.nativeElement.blur();break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.checklistNewItemEditing=!1,this.sendNewItemRequest=!1,this.checklistNewItem.nativeElement.blur(),this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.newItemAssignee=null;break;case ee.a.TAB:e.stopPropagation(),e.preventDefault(),5!==this.level&&(this.newItemTabbed=!0),e.shiftKey&&this.newItemTabbed&&(this.newItemTabbed=!1)}if("@"===e.key){if(Object(te.a)(this.checklistNewItem.nativeElement))return;this.sendNewItemRequest=!1,e.stopPropagation(),e.preventDefault();const t=this.checklistNewItem.nativeElement.getBoundingClientRect();this.openAssignees(t,"newItem")}}onChecklistNewItemFinish(e){if(!this.sendNewItemRequest)return this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",void(this.newItemAssignee=null);if(this.creatingMultipleChecklistItems){const e={items:[]};let t,i,a=this.checklistItem.parent;this.newItemTabbed&&(a=this.checklistItem.id);const c=this.getChildAfter(this.checklistItem);t=this.checklistItem.orderindex,this.newItemTabbed&&this.checklistItem.children.length>0&&(t=this.checklistItem.children[0].orderindex),i=null!=c?(c.orderindex-.01-t)/this.checklistNewItemPastedLines.length:1,this.checklistNewItemPastedLines.forEach(c=>{t+=i;const n={name:c,parent:a,orderindex:t,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,tmpId:Object(Y.a)()};e.items.push(n)}),this.store.dispatch(new r.T({itemId:this.itemData.id,checklistId:this.checklist.id,body:e}))}else if(this.isValidInput(this.checklistNewItemName)&&this.sendNewItemRequest&&e){let e,t=this.checklistItem.parent;const i=this.getChildAfter(this.checklistItem);e=null===i?this.checklistItem.orderindex+1:this.getAverage(this.checklistItem.orderindex,i.orderindex),this.newItemTabbed&&(t=this.checklistItem.id),this.newItemTabbed&&this.checklistItem.children.length>0&&(e=this.getAverage(this.checklistItem.children[0].orderindex,0));const a={items:[{name:this.checklistNewItemName,parent:t,orderindex:e,assignee:null===this.newItemAssignee?null:this.newItemAssignee,children:[],id:this.randomString()}]};this.store.dispatch(new r.P({itemsToAdd:a,parent:t,checklistId:this.checklist.id}))}this.pop&&this.pop.isOpen&&this.pop.hide(),this.checklistNewItemEditing=!1,this.creatingMultipleChecklistItems=!1,this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.newItemAssignee=null,this.sendNewItemRequest=!1,this.checklistItem.isCreatingNewItem=!1,this.newItemTabbed=!1}onChecklistNewItemKeyPressEditBlur(){this.sendNewItemRequest&&this.onChecklistNewItemFinish(!0)}onChecklistNewItemPaste(e){e.preventDefault();let t="";const i=e.clipboardData||e.originalEvent.clipboardData;if(i?t=i.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("text")),t){const e=t.split(/\n/).filter(e=>e.trim().length>0);if(e.forEach((t,i)=>{e[i]=t.trim()}),e.length<=1)return void(document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t));const i=e.join(" ");this.checklistNewItem.nativeElement.innerText=i,this.checklistNewItemPastedLines=e,this.pop.show()}}hideMultiLinePopover(){this.creatingMultipleChecklistItems=!1,this.checklistNewItemPastedLines=[],this.pop.hide()}createMultiChecklistItems(){this.creatingMultipleChecklistItems=!0,this.pop.hide()}onAssigneesMouseDown(){this.sendNewItemRequest=!1}findChildrenIds(e){this.childrenArray.push(e.id),e.children&&e.children.forEach(e=>this.findChildrenIds(e))}findChildrenObjects(e){this.childrenObjArray.push(e),e.children&&e.children.forEach(e=>this.findChildrenObjects(e))}isValidInput(e){return!(!e||0===e.length||""===e.replace(/\s/g,""))}getItem(e){for(let t=0;t<this.checklist.items.length;t++){const i=this.getItem2(this.checklist.items[t],e);if(i)return i}}getItem2(e,t){if(e.id===t)return e;for(let i=0;i<e.children.length;i++){const a=this.getItem2(e.children[i],t);if(a)return a}}getSiblings(e){if(void 0!==e){let t;const i=this.getItem(e.parent);return t=1===this.level||void 0===i?this.checklist.items:i.children,t}}getChildBefore(e){const t=this.getSiblings(e);if(void 0!==t){const i=t.findIndex(t=>t.id===e.id);return 0===i?null:t[i-1]}}getChildAfter(e){let t=null;const i=this.getSiblings(e);if(void 0!==i){const a=i.findIndex(t=>t.id===e.id);return i.length>1&&(t=i[a+1]),void 0===t&&(t=null),t}}getAverage(e,t){return(e+t)/2}getLastChildOfArray(e){const t=e.children;return 0===t.length?null:t[t.length-1]}focusNewItem(e){setTimeout(()=>{this.checklistNewItem.nativeElement.focus(),e&&Object(te.b)(this.checklistNewItem.nativeElement)},0)}randomString(){const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let t="";for(let i=0;i<6;i++)t+=e[Math.floor(36*Math.random())];return t}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.j),a.Wb(T.Store),a.Wb(ae.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-for-new-task-item-row"]],viewQuery:function(e,t){if(1&e&&(a.jd(Ot,1),a.jd(St,3,a.U),a.jd(Dt,3,a.U),a.jd(At,1),a.jd(jt,3)),2&e){let e;a.Qc(e=a.rc())&&(t.checklistItemName=e.first),a.Qc(e=a.rc())&&(t.assignees=e.first),a.Qc(e=a.rc())&&(t.checklist2Menu=e.first),a.Qc(e=a.rc())&&(t.checklistNewItem=e.first),a.Qc(e=a.rc())&&(t.pop=e.first)}},inputs:{itemData:"itemData",checklist:"checklist",checklistItem:"checklistItem",level:"level",newTaskChecklistsChanged:"newTaskChecklistsChanged",newTaskMembers:"newTaskMembers"},decls:10,vars:4,consts:function(){let e;return e=$localize`:@@checklist2_create-pasted-lines␟f42fd54e715c9480d0c8ddfc85e2958bf31cc3ac␟586401449518811291: Create ${"\ufffd0\ufffd"}:INTERPOLATION: checklist items `,[["class","checklist2-row",3,"checked",4,"ngIf"],["multiPopover",""],[3,"popover","containerClass"],["pop","bs-popover"],["class","checklist2-add-row",3,"ngStyle",4,"ngIf"],["assignees",""],["checklist2Menu",""],[1,"checklist2-row"],[1,"checklist2-handle",3,"mousedown"],[1,"checklist2-bubble"],[1,"checklist2-row-item-name"],["contenteditable","true",3,"innerHTML","click","keydown","keyup","focusout","focusin"],["checklistItemName",""],[3,"assignedUser","cuTooltip","click"],[3,"click"],[1,"task-todo-item-popover__content"],[1,"task-todo-item-popover__content-close",3,"icon","mousedown"],[1,"task-todo-item-popover__content-message"],[1,"task-todo-item-popover__content-button",3,"mousedown"],e,[1,"checklist2-add-row",3,"ngStyle"],["class","checklist2-add-row-placeholder",4,"ngIf"],["contenteditable","true",3,"click","keydown","focusout","paste"],["checklistNewItem",""],[3,"assignedUser","cuTooltip","click","mousedown"],[1,"checklist2-add-row-placeholder"],["checklistNewItemPlaceHolder",""]]},template:function(e,t){if(1&e&&(a.bd(0,Nt,10,13,"div",0),a.bd(1,Et,6,2,"ng-template",null,1,a.cd),a.Xb(3,"div",2,3),a.bd(5,Lt,6,10,"div",4),a.bd(6,Ut,0,0,"ng-template",null,5,a.cd),a.bd(8,zt,0,0,"ng-template",null,6,a.cd)),2&e){const e=a.Rc(2);a.Dc("ngIf",t.checklist.show_completed&&t.checklistItem.resolved||!t.checklistItem.resolved),a.Ib(3),a.Dc("popover",e)("containerClass","checklist-add-popup"),a.Ib(2),a.Dc("ngIf",t.checklistItem.isCreatingNewItem&&t.itemData.permissions.edit_checklists)}},directives:[O.q,ce.c,le,re,be,P.a,ne,ge.a,O.t,fe],encapsulation:2,changeDetection:0}),e})();const Rt=["checklist2Menu"],Gt=["assignees"],Ft=["checklistName"],Vt=["checklistNewItem"],qt=["checklistLevelContainer1"],Xt=["pop"];function Bt(e,t){if(1&e&&a.Xb(0,"div",19),2&e){const e=a.uc(2);a.Jb("data-checklistId",e.checklist.id)}}function Kt(e,t){if(1&e&&a.Xb(0,"div",19),2&e){const e=a.uc(3);a.Jb("data-checklistId",e.checklist.id)}}function Wt(e,t){if(1&e&&a.Xb(0,"div",19),2&e){const e=a.uc(4);a.Jb("data-checklistId",e.checklist.id)}}function Ht(e,t){if(1&e&&a.Xb(0,"div",19),2&e){const e=a.uc(5);a.Jb("data-checklistId",e.checklist.id)}}function Zt(e,t){if(1&e&&(a.cc(0,"div",15),a.Xb(1,"cu-checklist2-for-new-task-item-row",16),a.bc()),2&e){const e=t.$implicit,i=a.uc(5);a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("newTaskMembers",i.newTaskMembers)("newTaskChecklistsChanged",i.newTaskChecklistsChanged)("level",5)}}function Qt(e,t){if(1&e&&(a.cc(0,"div",15),a.Xb(1,"cu-checklist2-for-new-task-item-row",16),a.bd(2,Ht,1,1,"div",17),a.cc(3,"div",18),a.bd(4,Zt,2,10,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(4);a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-tmpId",e.tmpId)("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("newTaskMembers",i.newTaskMembers)("newTaskChecklistsChanged",i.newTaskChecklistsChanged)("level",4),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function Jt(e,t){if(1&e&&(a.cc(0,"div",15),a.Xb(1,"cu-checklist2-for-new-task-item-row",16),a.bd(2,Wt,1,1,"div",17),a.cc(3,"div",18),a.bd(4,Qt,5,15,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(3);a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("newTaskMembers",i.newTaskMembers)("newTaskChecklistsChanged",i.newTaskChecklistsChanged)("level",3),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function Yt(e,t){if(1&e&&(a.cc(0,"div",15),a.Xb(1,"cu-checklist2-for-new-task-item-row",16),a.bd(2,Kt,1,1,"div",17),a.cc(3,"div",18),a.bd(4,Jt,5,15,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(2);a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("newTaskMembers",i.newTaskMembers)("newTaskChecklistsChanged",i.newTaskChecklistsChanged)("level",2),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function ei(e,t){if(1&e&&(a.cc(0,"div",15),a.Xb(1,"cu-checklist2-for-new-task-item-row",16),a.bd(2,Bt,1,1,"div",17),a.cc(3,"div",18),a.bd(4,Yt,5,15,"div",8),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc();a.Jb("data-orderindex",e.orderindex)("data-checklistItemId",e.id)("data-checklistId",i.checklist.id)("data-tmpId",e.tmpId),a.Ib(1),a.Dc("itemData",i.itemData)("checklist",i.checklist)("checklistItem",e)("newTaskMembers",i.newTaskMembers)("newTaskChecklistsChanged",i.newTaskChecklistsChanged)("level",1),a.Ib(1),a.Dc("ngIf",0===e.children.length),a.Ib(1),a.Dc("dragula",i.dragulaBag),a.Jb("data-checklistId",i.checklist.id),a.Ib(1),a.Dc("ngForOf",e.children)("ngForTrackBy",i.trackById)}}function ti(e,t){if(1&e){const e=a.dc();a.cc(0,"div",20),a.cc(1,"div",21),a.qc("mousedown",function(){return a.Uc(e),a.uc().hideMultiLinePopover()}),a.bc(),a.cc(2,"div",22),a.gc(3,23),a.bc(),a.cc(4,"button",24),a.qc("mousedown",function(){return a.Uc(e),a.uc().createMultiChecklistItems()}),a.gc(5,25),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("icon","close-modal-white"),a.Ib(4),a.kc(e.checklistNewItemPastedLines.length),a.hc(5)}}function ii(e,t){1&e&&(a.cc(0,"p",31,32),a.dd(2," New "),a.bc())}const ai=function(e){return{"margin-left.px":e}};function ci(e,t){if(1&e){const e=a.dc();a.cc(0,"div",26),a.Xb(1,"cu-checklist2-plus"),a.bd(2,ii,3,0,"p",27),a.cc(3,"p",28,29),a.qc("click",function(){return a.Uc(e),a.uc().onChecklistNewItemClick()})("keydown",function(t){return a.Uc(e),a.uc().onChecklistNewItemKeyPress(t)})("focusout",function(){return a.Uc(e),a.uc().onChecklistNewItemKeyPressEditBlur()})("paste",function(t){return a.Uc(e),a.uc().onChecklistNewItemPaste(t)}),a.bc(),a.cc(5,"cu-checklist2-assignees-icon",30),a.qc("click",function(t){return a.Uc(e),a.uc().openAssignees(t)})("mousedown",function(){return a.Uc(e),a.uc().onAssigneesMouseDown()}),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Dc("ngStyle",a.Hc(8,ai,25*e.currentLevelCount)),a.Ib(2),a.Dc("ngIf",!e.checklistNewItemEditing),a.Ib(1),a.Ob("checklist2-cantEdit",!e.itemData.permissions.edit_checklists),a.Ib(2),a.Ob("hasUser",null!==e.newItemAssignee),a.Ec("cuTooltip",null===e.newItemAssignee?e.commonStringsService.assignText:null==e.newItemAssignee?null:e.newItemAssignee.username),a.Dc("assignedUser",e.newItemAssignee)}}function ni(e,t){}function oi(e,t){}let si=(()=>{class e{constructor(e,t,i){this.resolver=e,this.store=t,this.commonStringsService=i,this.trackById=Object(m.d)("id"),this.checklistNewItemEditing=!1,this.newItemAssignee=null,this.checklistNewItemPastedLines=[],this.creatingMultipleChecklistItems=!1,this.lastChild=null,this.currentLevelCount=0,this.maxLevelCount=0,this.destroy$=new f.a}set newTaskMembers(e){if(this.newTaskMembersValue=e,this.newItemAssignee){const e=this.newItemAssignee.id;this.newTaskMembersValue&&this.newTaskMembersValue.find(t=>t.id===e)||(this.newItemAssignee=null)}}get newTaskMembers(){return this.newTaskMembersValue||[]}ngOnChanges(){if(this.newTaskSaveDraft&&this.store.dispatch(new r.rb(!1)),this.newTaskChecklistsChanged.changed&&this.newTaskChecklistsChanged.checklistId===this.checklist.id&&(0!==this.checklist.items.length?this.getVeryLastChild(this.checklist.items[this.checklist.items.length-1]):this.checklistLevelContainer1.nativeElement.classList.remove("over"),this.lastItemInChecklist=this.checklist.items[this.checklist.items.length-1],this.maxLevelCount=0,this.getLevel(this.lastChild),5===this.maxLevelCount&&(this.maxLevelCount=4),this.store.dispatch(new r.lb({checklistId:"",checklistItemId:"",changed:!1}))),this.newTaskItemDragged.dragged){this.store.dispatch(new r.ob({dragged:!1,checklistId:"",checklistItemId:"",targetFrom:"",targetChecklistId:"",parentId:"",orderindex:0}));const e=this.checklists.findIndex(e=>e.id===this.newTaskItemDragged.checklistId),t=this.getItem(this.newTaskItemDragged.checklistItemId,this.checklists[e].items);void 0!==t&&this.newTaskItemDragged.checklistItemId===t.id&&("same"===this.newTaskItemDragged.targetFrom?(null===t.parent&&null===this.newTaskItemDragged.parentId||this.store.dispatch(new r.pb({parent:this.newTaskItemDragged.parentId,itemToMove:t,checklistId:this.newTaskItemDragged.checklistId,directParent:t.parent})),this.store.dispatch(new r.bb({propertyToEdit:"orderindex",newValue:this.newTaskItemDragged.orderindex,checklistId:this.checklist.id,checklistItemId:this.newTaskItemDragged.checklistItemId})),this.store.dispatch(new r.bb({propertyToEdit:"parent",newValue:this.newTaskItemDragged.parentId,checklistId:this.checklist.id,checklistItemId:this.newTaskItemDragged.checklistItemId}))):"different"===this.newTaskItemDragged.targetFrom&&(this.store.dispatch(new r.nb({itemToDelete:t,checklistId:this.newTaskItemDragged.checklistId,parent:t.parent})),this.store.dispatch(new r.P({itemsToAdd:{items:[t]},parent:this.newTaskItemDragged.parentId,checklistId:this.newTaskItemDragged.targetChecklistId})),this.store.dispatch(new r.bb({propertyToEdit:"orderindex",newValue:this.newTaskItemDragged.orderindex,checklistId:this.newTaskItemDragged.targetChecklistId,checklistItemId:this.newTaskItemDragged.checklistItemId})),this.store.dispatch(new r.bb({propertyToEdit:"parent",newValue:this.newTaskItemDragged.parentId,checklistId:this.newTaskItemDragged.targetChecklistId,checklistItemId:this.newTaskItemDragged.checklistItemId}))))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}openChecklist2Menu(e){if(!this.itemData.permissions.edit_checklists)return;const t=this.resolver.resolveComponentFactory(Q),i={moveUp:!1,moveDown:!1,assignAll:!1,unAssignAll:!1,checkAll:!0,unCheckAll:!0,saveAsTemplate:!0},a=this.checklists.reduce((e,t)=>t.orderindex<e?t.orderindex:e,this.checklists[0].orderindex),c=this.checklists.reduce((e,t)=>t.orderindex>e?t.orderindex:e,this.checklists[0].orderindex);0===this.checklist.items.length&&(i.assignAll=!0,i.unAssignAll=!0),this.checklist.orderindex===a&&(i.moveUp=!0),this.checklist.orderindex===c&&(i.moveDown=!0),this.checklist2MenuDropdown=this.checklist2Menu.createComponent(t),this.checklist2MenuDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{"addNewChecklistItem"===e.type?this.onChecklistNewItemClick():"checklistMoveUp"===e.type?this.editChecklistOrderIndex("up"):"checklistMoveDown"===e.type?this.editChecklistOrderIndex("down"):"mainRename"===e.type&&this.renameChecklist()}),this.checklist2MenuDropdown.instance.itemData=this.itemData,this.checklist2MenuDropdown.instance.checklist=this.checklist,this.checklist2MenuDropdown.instance.checklistItem=null,this.checklist2MenuDropdown.instance.location="main",this.checklist2MenuDropdown.instance.left=e.clientX,this.checklist2MenuDropdown.instance.top=e.clientY,this.checklist2MenuDropdown.instance.hiddenItems=i,this.checklist2MenuDropdown.instance.isNewTask=!0,this.checklist2MenuDropdown.instance.newTaskMembers=this.newTaskMembersValue,this.checklist2MenuDropdown.instance.markForCheck(),setTimeout(()=>this.checklist2MenuDropdown.instance.open())}openAssignees(e,t){const i=this.resolver.resolveComponentFactory(A.a);this.assigneesDropdown=this.assignees.createComponent(i),this.assigneesDropdown.instance.onChange.pipe(Object(y.a)(this.destroy$)).subscribe(e=>{this.newItemAssignee=0===e.length?null:e[0],this.sendNewItemRequest=!0,this.focusNewItem(!0)}),this.assigneesDropdown.instance.dropdown.fromPoint="@"===t?{x:e.x+e.width,y:e.y}:{x:e.clientX,y:e.clientY},this.assigneesDropdown.instance.users=this.newTaskMembersValue,this.assigneesDropdown.instance.enableFirstSelection=!0,this.assigneesDropdown.instance.selectedUsers=[],this.assigneesDropdown.changeDetectorRef.detectChanges(),setTimeout(()=>this.assigneesDropdown.instance.open())}onChecklistNameClick(){this.checklistNewName=this.checklistName.nativeElement.innerText.replace(/\n/g,""),setTimeout(()=>{this.checklistName.nativeElement.focus()},0)}onChecklistDoneEditingName(){this.store.dispatch(new r.cb({propertyToEdit:"name",newValue:this.checklistNewName,checklistId:this.checklist.id}))}onChecklistNameEditKeyPress(e){switch(e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.checklistName.nativeElement.blur();break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.checklistName.nativeElement.blur(),this.checklistName.nativeElement.innerText=this.checklist.name}}onChecklistNameEditChange(){this.checklistNewName=this.checklistName.nativeElement.innerText.replace(/\n/g,"")}onChecklistNameEditBlur(){this.onChecklistDoneEditingName()}onChecklistNewItemClick(){this.focusNewItem(!1)}onChecklistNewItemKeyPress(e){switch(this.checklistNewItemName=this.checklistNewItem.nativeElement.innerText.replace(/\n/g,""),this.checklistNewItemEditing=!0,this.sendNewItemRequest=!0,e.which){case ee.a.ENTER:e.stopPropagation(),e.preventDefault(),this.sendNewItemRequest=!0,this.checklistNewItem.nativeElement.blur();break;case ee.a.ESCAPE:e.stopPropagation(),e.preventDefault(),this.sendNewItemRequest=!1,this.checklistNewItem.nativeElement.blur(),this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.checklistNewItemEditing=!1,this.newItemAssignee=null;break;case ee.a.TAB:e.stopPropagation(),e.preventDefault(),e.shiftKey?this.currentLevelCount>0&&(this.currentLevelCount-=1):this.currentLevelCount<this.maxLevelCount&&(this.currentLevelCount+=1)}if("@"===e.key){if(Object(te.a)(this.checklistNewItem.nativeElement))return;this.sendNewItemRequest=!1,e.stopPropagation(),e.preventDefault();const t=this.checklistNewItem.nativeElement.getBoundingClientRect();this.openAssignees(t,"@")}}onChecklistNewItemFinish(e){if(!this.sendNewItemRequest)return this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.checklistNewItemEditing=!1,void(this.newItemAssignee=null);let t,i,a=0,c={items:[]};this.checklistNewItemName=this.checklistNewItem.nativeElement.innerText,1===this.currentLevelCount?t=this.lastItemInChecklist:2===this.currentLevelCount?t=this.getLastChildOfArray(this.lastItemInChecklist):3===this.currentLevelCount?t=this.getLastChildOfArray(this.getLastChildOfArray(this.lastItemInChecklist)):4===this.currentLevelCount&&(t=this.getLastChildOfArray(this.getLastChildOfArray(this.getLastChildOfArray(this.lastItemInChecklist)))),null!==this.lastChild&&(a=this.lastChild.orderindex+1),this.creatingMultipleChecklistItems?(0===this.currentLevelCount?(i=null,this.checklistNewItemPastedLines.forEach(e=>{a+=1;const t={name:e,orderindex:a,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,children:[],id:this.randomString(),parent:i};c.items.push(t)})):(i=t.id,this.checklistNewItemPastedLines.forEach(e=>{a+=1;const t={name:e,orderindex:a,assignee:null===this.newItemAssignee?null:this.newItemAssignee.id,children:[],id:this.randomString(),parent:i};c.items.push(t)})),this.store.dispatch(new r.P({itemsToAdd:c,parent:i,checklistId:this.checklist.id}))):this.isValidInput(this.checklistNewItemName)&&this.sendNewItemRequest&&e&&(0===this.currentLevelCount?(i=null,c={items:[{name:this.checklistNewItemName,orderindex:a,assignee:null===this.newItemAssignee?null:this.newItemAssignee,children:[],id:this.randomString(),parent:i}]}):(i=t.id,c={items:[{name:this.checklistNewItemName,orderindex:a,assignee:null===this.newItemAssignee?null:this.newItemAssignee,children:[],id:this.randomString(),parent:i}]}),this.store.dispatch(new r.P({itemsToAdd:c,parent:i,checklistId:this.checklist.id})),this.focusNewItem(!1)),this.pop&&this.pop.isOpen&&this.pop.hide(),this.creatingMultipleChecklistItems=!1,this.checklistNewItem.nativeElement.innerText="",this.checklistNewItemName="",this.checklistNewItemEditing=!1,this.newItemAssignee=null,this.sendNewItemRequest=!1}onChecklistNewItemKeyPressEditBlur(){this.sendNewItemRequest&&(this.onChecklistNewItemFinish(!0),this.currentLevelCount=0)}onChecklistNewItemPaste(e){e.preventDefault();let t="";const i=e.clipboardData||e.originalEvent.clipboardData;if(i?t=i.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("text")),t){const e=t.split(/\n/).filter(e=>e.trim().length>0);if(e.forEach((t,i)=>{e[i]=t.trim()}),e.length<=1)return void(document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t));const i=e.join(" ");this.checklistNewItem.nativeElement.innerText=i,this.checklistNewItemPastedLines=e,this.pop.show()}}hideMultiLinePopover(){this.creatingMultipleChecklistItems=!1,this.checklistNewItemPastedLines=[],this.pop.hide()}createMultiChecklistItems(){this.creatingMultipleChecklistItems=!0,this.pop.hide()}onAssigneesMouseDown(){this.sendNewItemRequest=!1}isValidInput(e){return!(!e||0===e.length||""===e.replace(/\s/g,""))}determineDepthOfObject(e){if(void 0===e)return 0;{let t=0;return e.children&&e.children.forEach(e=>{const i=this.determineDepthOfObject(e);i>t&&(t=i)}),t+1}}getLastChildOfArray(e){const t=e.children;return 0===t.length?null:t[t.length-1]}getVeryLastChild(e){if(0===e.children.length)this.lastChild=e;else{const t=e.children[e.children.length-1];0!==t.children.length?t.children.forEach(e=>{this.getVeryLastChild(e)}):this.lastChild=t}}getLevel(e){if(null===e)return;const t=this.getItem(e.parent,this.checklist.items);void 0!==t?(this.maxLevelCount+=1,this.getLevel(t)):this.maxLevelCount+=1}getItem(e,t){for(let i=0;i<t.length;i++){const a=this.getItem2(t[i],e);if(a)return a}}getItem2(e,t){if(e.id===t)return e;for(let i=0;i<e.children.length;i++){const a=this.getItem2(e.children[i],t);if(a)return a}}focusNewItem(e){setTimeout(()=>{this.checklistNewItem.nativeElement.focus(),e&&Object(te.b)(this.checklistNewItem.nativeElement)},0)}getAverage(e,t){return(e+t)/2}editChecklistOrderIndex(e){const t=this.getChildBefore(this.checklist),i=this.getChildAfter(this.checklist);let a;if("up"===e){if(null===t)return;const e=this.getChildBefore(t);a=null===e?t.orderindex-1:this.getAverage(t.orderindex,e.orderindex)}else if("down"===e){if(null===i)return;const e=this.getChildAfter(i);a=null===e?i.orderindex+1:this.getAverage(i.orderindex,e.orderindex)}this.store.dispatch(new r.cb({propertyToEdit:"orderindex",newValue:a,checklistId:this.checklist.id}))}getChildBefore(e){const t=this.checklists.findIndex(t=>t.id===e.id);let i=0===t?null:this.checklists[t-1];return void 0===i&&(i=null),i}getChildAfter(e){const t=this.checklists.findIndex(t=>t.id===e.id);let i=this.checklists[t+1];return void 0===i&&(i=null),i}randomString(){const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let t="";for(let i=0;i<6;i++)t+=e[Math.floor(36*Math.random())];return t}renameChecklist(){setTimeout(()=>{this.checklistName.nativeElement.focus(),Object(te.b)(this.checklistName.nativeElement)},0)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.j),a.Wb(T.Store),a.Wb(ae.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2-for-new-task-item"]],viewQuery:function(e,t){if(1&e&&(a.jd(Rt,3,a.U),a.jd(Gt,3,a.U),a.jd(Ft,3),a.jd(Vt,1),a.jd(qt,3),a.jd(Xt,3)),2&e){let e;a.Qc(e=a.rc())&&(t.checklist2Menu=e.first),a.Qc(e=a.rc())&&(t.assignees=e.first),a.Qc(e=a.rc())&&(t.checklistName=e.first),a.Qc(e=a.rc())&&(t.checklistNewItem=e.first),a.Qc(e=a.rc())&&(t.checklistLevelContainer1=e.first),a.Qc(e=a.rc())&&(t.pop=e.first)}},inputs:{checklists:"checklists",checklist:"checklist",itemData:"itemData",dragulaBag:"dragulaBag",newTaskMembers:"newTaskMembers",newTaskChecklistsChanged:"newTaskChecklistsChanged",newTaskItemDragged:"newTaskItemDragged",newTaskSaveDraft:"newTaskSaveDraft"},features:[a.Gb],decls:21,vars:14,consts:function(){let e,t;return e=$localize`:@@common_multiple-lines␟f0ce38a1c34796737223cfd23f2563c2190f5464␟8909497180615845624: Multiple lines detected `,t=$localize`:@@checklist2_create-pasted-lines␟7ea1d766f8e2104330f7e7d26afa83556dcd26ef␟3968312781073107377: Create ${"\ufffd0\ufffd"}:INTERPOLATION: checklist items `,[[1,"cu-checklist2-item"],[1,"checklist2-title"],["contenteditable","true",3,"click","keydown","keyup","focusout"],["checklistName",""],[3,"click"],[1,"checklist2-levels-container"],[1,"checklist2-level-container","checklist2-level-container-1",3,"dragula"],["checklistLevelContainer1",""],["class","checklist2-level",4,"ngFor","ngForOf","ngForTrackBy"],["multiPopover",""],[3,"popover","containerClass"],["pop","bs-popover"],["class","checklist2-add-row",3,"ngStyle",4,"ngIf"],["checklist2Menu",""],["assignees",""],[1,"checklist2-level"],[3,"itemData","checklist","checklistItem","newTaskMembers","newTaskChecklistsChanged","level"],["class","checklist2-nested-target",4,"ngIf"],[1,"checklist2-level-container",3,"dragula"],[1,"checklist2-nested-target"],[1,"task-todo-item-popover__content"],[1,"task-todo-item-popover__content-close",3,"icon","mousedown"],[1,"task-todo-item-popover__content-message"],e,[1,"task-todo-item-popover__content-button",3,"mousedown"],t,[1,"checklist2-add-row",3,"ngStyle"],["class","checklist2-add-row-placeholder",4,"ngIf"],["contenteditable","true",3,"click","keydown","focusout","paste"],["checklistNewItem",""],[3,"assignedUser","cuTooltip","click","mousedown"],[1,"checklist2-add-row-placeholder"],["checklistNewItemPlaceHolder",""]]},template:function(e,t){if(1&e&&(a.cc(0,"div",0),a.cc(1,"div",1),a.cc(2,"h4",2,3),a.qc("click",function(){return t.onChecklistNameClick()})("keydown",function(e){return t.onChecklistNameEditKeyPress(e)})("keyup",function(){return t.onChecklistNameEditChange()})("focusout",function(){return t.onChecklistNameEditBlur()}),a.dd(4),a.bc(),a.cc(5,"span"),a.dd(6),a.bc(),a.cc(7,"cu-checklist2-ellipsis",4),a.qc("click",function(e){return t.openChecklist2Menu(e)}),a.bc(),a.bc(),a.cc(8,"div",5),a.cc(9,"div",6,7),a.bd(11,ei,5,15,"div",8),a.bc(),a.bc(),a.bd(12,ti,6,2,"ng-template",null,9,a.cd),a.Xb(14,"div",10,11),a.bd(16,ci,6,10,"div",12),a.bc(),a.bd(17,ni,0,0,"ng-template",null,13,a.cd),a.bd(19,oi,0,0,"ng-template",null,14,a.cd)),2&e){const e=a.Rc(13);a.Ib(2),a.Ob("checklist2-cantEdit",!t.itemData.permissions.edit_checklists),a.Ib(2),a.fd(" ",t.checklist.name," "),a.Ib(2),a.gd("(",t.checklist.resolved,"/",t.checklist.unresolved+t.checklist.resolved,")"),a.Ib(3),a.Ob("empty",0===t.checklist.items.length),a.Dc("dragula",t.dragulaBag),a.Jb("data-checklistId",t.checklist.id),a.Ib(2),a.Dc("ngForOf",t.checklist.items)("ngForTrackBy",t.trackById),a.Ib(3),a.Dc("popover",e)("containerClass","checklist-add-popup"),a.Ib(2),a.Dc("ngIf",t.itemData.permissions.edit_checklists)}},directives:[ne,C.a,O.p,ce.c,O.q,Mt,ge.a,O.t,fe,be,P.a],encapsulation:2,changeDetection:0}),e})();const ri=["createChecklist"];function li(e,t){if(1&e&&(a.cc(0,"div"),a.Xb(1,"cu-checklist2-item",5),a.vc(2,"async"),a.vc(3,"async"),a.vc(4,"async"),a.vc(5,"async"),a.vc(6,"async"),a.vc(7,"async"),a.vc(8,"async"),a.vc(9,"async"),a.bc()),2&e){const e=t.$implicit,i=a.uc(3);let c=null;a.Ib(1),a.Dc("checklists",a.wc(2,11,i.checklists$))("checklist",e)("itemData",i.itemData)("checklistItemChanged",a.wc(3,13,i.checklistItemChanged$))("dragulaBag",i.dragulaBag)("isGuest",a.wc(4,15,i.isGuest$))("meUserId",null==(c=a.wc(5,17,i.meUser$))?null:c.id)("canDelete",a.wc(6,19,i.canDelete$))("loading",a.wc(7,21,i.checklist2Loading$))("onlyDeleteIfOwner",a.wc(8,23,i.onlyDeleteIfOwner$))("newlyCreatedChecklistId",a.wc(9,25,i.checklist2NewlyCreatedChecklistId$))}}function ui(e,t){if(1&e&&(a.cc(0,"div"),a.bd(1,li,10,27,"div",4),a.vc(2,"async"),a.bc()),2&e){const e=a.uc(2);a.Ib(1),a.Dc("ngForOf",a.wc(2,2,e.checklists$))("ngForTrackBy",e.trackById)}}function di(e,t){if(1&e){const e=a.dc();a.cc(0,"div",6),a.cc(1,"button",7),a.qc("click",function(){return a.Uc(e),a.uc(2).quickCreateChecklist()}),a.dd(2," + "),a.ac(3),a.gc(4,8),a.Zb(),a.bc(),a.cc(5,"span",9),a.dd(6," | "),a.bc(),a.cc(7,"cu-checklist-template-dropdown",10),a.qc("onClose",function(){return a.Uc(e),a.uc(2).templateDropdownIsOpen=!1})("click",function(){return a.Uc(e),a.uc(2).templateDropdownIsOpen=!0})("onDone",function(t){return a.Uc(e),a.uc(2).onCreate(t)})("browseAll",function(){return a.Uc(e),a.uc(2).openTemplateManager()}),a.cc(8,"span",11),a.gc(9,12),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc(2);a.Ob("cu-checklist2-add__container-open",e.templateDropdownIsOpen),a.Ib(7),a.Dc("taskId",null==e.itemData?null:e.itemData.id)("teamId",e.teamId)}}function mi(e,t){if(1&e&&(a.cc(0,"div"),a.bd(1,ui,3,4,"div",1),a.vc(2,"async"),a.bd(3,di,10,4,"div",3),a.vc(4,"async"),a.bc()),2&e){const e=a.uc();a.Ib(1),a.Dc("ngIf",a.wc(2,2,e.checklistsLoaded$)),a.Ib(2),a.Dc("ngIf",e.itemData.permissions.edit_checklists&&!a.wc(4,4,e.offline$))}}function hi(e,t){if(1&e&&(a.cc(0,"div"),a.Xb(1,"cu-checklist2-for-new-task-item",16),a.vc(2,"async"),a.vc(3,"async"),a.vc(4,"async"),a.vc(5,"async"),a.bc()),2&e){const e=t.$implicit,i=a.uc(2);a.Ib(1),a.Dc("checklists",a.wc(2,8,i.newTaskChecklists$))("checklist",e)("itemData",i.itemData)("dragulaBag",i.dragulaBag)("newTaskMembers",i.newTaskMembers)("newTaskChecklistsChanged",a.wc(3,10,i.newTaskChecklistsChanged$))("newTaskItemDragged",a.wc(4,12,i.newTaskItemDragged$))("newTaskSaveDraft",a.wc(5,14,i.newTaskSaveDraft$))}}function pi(e,t){if(1&e){const e=a.dc();a.cc(0,"div"),a.bd(1,hi,6,16,"div",4),a.vc(2,"async"),a.cc(3,"div",6),a.cc(4,"button",7),a.qc("click",function(){return a.Uc(e),a.uc().quickCreateChecklist()}),a.dd(5," + "),a.ac(6),a.gc(7,13),a.Zb(),a.bc(),a.cc(8,"span",9),a.dd(9," | "),a.bc(),a.cc(10,"cu-checklist-template-dropdown",14),a.qc("onClose",function(){return a.Uc(e),a.uc().templateDropdownIsOpen=!1})("click",function(){return a.Uc(e),a.uc().templateDropdownIsOpen=!0})("onDone",function(t){return a.Uc(e),a.uc().onCreate(t)})("browseAll",function(){return a.Uc(e),a.uc().openTemplateManager()})("allowEditChecklist",function(){return a.Uc(e),a.uc().itemData.permissions.edit_checklists}),a.vc(11,"async"),a.cc(12,"span",11),a.gc(13,15),a.bc(),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("ngForOf",a.wc(2,7,e.newTaskChecklists$))("ngForTrackBy",e.trackById),a.Ib(2),a.Ob("cu-checklist2-add__container-open",e.templateDropdownIsOpen),a.Ib(7),a.Dc("taskId",null==e.itemData?null:e.itemData.id)("teamId",e.teamId)("offline",a.wc(11,9,e.offline$))}}function bi(e,t){}let gi=(()=>{class e{constructor(e,t,i,c,s,r,h){this.modalService=e,this.store=t,this.factoryResolver=i,this.websocketService=c,this.dragulaService=s,this.modal=r,this.injector=h,this.deletePermission=!0,this.createChecklistClosed=new a.o,this.itemId$=new b.a(null),this.deletePermission$=new b.a(!0),this.checklists$=this.itemId$.pipe(Object(_.a)(e=>this.store.select(l.d(e)))),this.checklistsLoaded$=this.store.select(l.c),this.checklistItemChanged$=this.store.select(l.a),this.newTaskChecklists$=this.store.select(l.h),this.newTaskChecklistsChanged$=this.store.select(l.g),this.newTaskItemDragged$=this.store.select(l.i),this.newTaskSaveDraft$=this.store.select(l.j),this.checklist2NullIndexItems$=this.store.select(l.l),this.checklist2Loading$=this.store.select(l.f),this.checklist2NewlyCreatedChecklistId$=this.store.select(l.k),this.isGuest$=this.store.select(u.isGuestTeam),this.meUser$=this.store.select(u.getUser),this.offline$=this.store.select(d.b),this.enterprisePermissions$=this.store.select(u.getUserEnterprisePermissions),this.canDelete$=Object(g.a)([this.deletePermission$,this.enterprisePermissions$]).pipe(Object(v.a)(([e,t])=>(!t||t.delete_items!==n.b.OFF&&t.delete_items!==n.b.CREATE)&&(t&&t.delete_items===n.b.ON||e))),this.onlyDeleteIfOwner$=this.store.select(u.getUserEnterprisePermissions).pipe(Object(v.a)(e=>e&&e.delete_items===n.b.CREATE)),this.trackById=Object(m.d)("id"),this.Tab=o.c,this.dragulaBag="checklist2dragula",this.templateDropdownIsOpen=!1,this.destroy$=new f.a,this.dragulaService.createGroup(this.dragulaBag,{isContainer:e=>e.classList.contains("checklist2-level-container")||e.classList.contains("checklist2-nested-target"),moves:(e,t,i)=>i.classList.contains("checklist2-handle")}),this.dragulaService.drop(this.dragulaBag).pipe(Object(y.a)(this.destroy$)).subscribe(e=>{e.target.classList.contains("checklist2-nested-target")&&e.target.nextElementSibling.appendChild(e.el),setTimeout(()=>{let t=0,i=null,a=null;const c=e.el.attributes[2].nodeValue,n=e.el.attributes[3].nodeValue,o=e.el.attributes[4]?e.el.attributes[4].nodeValue:void 0,s=e.el.previousElementSibling,r=e.el.nextElementSibling;let l,u,d=null;l=void 0===e.target.attributes[2]||"style"===e.target.attributes[2].nodeName?e.target.attributes[1].nodeValue:e.target.attributes[2].nodeValue,u=l===n?"same":"different",e.target.classList.contains("checklist2-nested-target")?(e.target.nextElementSibling.appendChild(e.el),d=e.target.parentElement.attributes[2].nodeValue):(void 0!==e.el.parentElement.parentElement.attributes[2]&&(d=e.el.parentElement.parentElement.attributes[2].nodeValue),null!==s&&(i=parseFloat(s.attributes[1].nodeValue)),null!==r&&(a=parseFloat(r.attributes[1].nodeValue)),null===s&&null!==r?t=a-1:null===r&&null!==s?t=i+1:null!==s&&null!==r&&(t=this.getAverage(i,a))),this.isNewTask?(this.newTaskOnItemDrag(t,d,c,n,l,u),"different"===u&&e.el.parentNode.removeChild(e.el)):this.sendEditChecklistItemRequest(t,d,c,n,l,u,o)},0)}),this.dragulaService.over(this.dragulaBag).pipe(Object(y.a)(this.destroy$)).subscribe(e=>{e.container.classList.contains("checklist2-nested-target")&&e.container.classList.add("over")}),this.dragulaService.out(this.dragulaBag).pipe(Object(y.a)(this.destroy$)).subscribe(e=>{e.container.classList.contains("checklist2-nested-target")&&e.container.classList.remove("over")}),this.dragulaService.shadow(this.dragulaBag).pipe(Object(y.a)(this.destroy$)).subscribe(e=>{e.container.classList.contains("empty")&&e.container.classList.add("over")})}ngOnChanges(e){e.itemData&&void 0!==e.itemData.previousValue&&void 0!==e.itemData.currentValue&&e.itemData.currentValue.checklists&&void 0!==e.itemData.currentValue.checklists&&e.itemData.previousValue.checklists&&void 0!==e.itemData.previousValue.checklists&&(Object(h.a)(e.itemData.currentValue.checklists,e.itemData.previousValue.checklists)||this.getChecklists(this.itemData.id,!0)),e.itemData&&this.itemData&&this.itemId$.next(this.itemData.id),e.deletePermission&&this.deletePermission$.next(this.deletePermission)}ngOnInit(){this.isNewTask?this.itemData={permissions:{edit_checklists:!0}}:(this.getChecklists(this.itemData.id,!0),this.isGuest$.pipe(Object(k.a)(1)).subscribe(e=>{let t=!0;!this.itemData.permission_level||this.itemData.permission_level!==s.e.READ&&this.itemData.permission_level!==s.e.COMMENT||(t=!1),!e&&t&&this.checkForNullItems(this.itemData.id)}),this.websocketService.onChange.pipe(Object(I.a)(e=>e.type.startsWith("checklist")&&e.payload.task_id===this.itemData.id),Object(y.a)(this.destroy$)).subscribe(()=>{this.getChecklists(this.itemData.id,!1,!0)})),this.isNewTask||this.store.select(l.e).pipe(Object(y.a)(this.destroy$)).subscribe(e=>{e&&(this.openTemplateManager(),this.store.dispatch(new r.sb(!1)))}),this.isNewTask&&(this.modalService.closeModal.pipe(Object(y.a)(this.destroy$)).subscribe(()=>{this.createChecklistClosed.emit()}),this.store.select(l.m).pipe(Object(y.a)(this.destroy$)).subscribe(e=>{e&&(this.openTemplateManager(),this.store.dispatch(new r.tb(!1)))}))}ngOnDestroy(){this.dragulaService.destroy(this.dragulaBag),this.store.dispatch(this.isNewTask?new r.Bb:new r.Cb),this.destroy$.next(),this.destroy$.unsubscribe()}openTemplateManager(e=o.c.Checklist){const t=this.modal.openComponent(c.a,this.injector,{name:"templateSelector",cannotClose:!1,preventExternalClick:!0,modifier:"cu-folder-list-template-selector__modal",dialogModifier:"",bodyModifier:""});t.instance.initTemplateType="checklist",t.instance.task=this.isNewTask?null:this.itemData,t.instance.tab=e,t.instance.onNewChecklistCreate.pipe(Object(y.a)(t.instance.destroy$)).subscribe(e=>{this.createChecklist(e)}),t.instance.onNewChecklistCreateFromTemplate.pipe(Object(y.a)(t.instance.destroy$)).subscribe(e=>{this.onCreate(e)})}onCreate(e){this.templateDropdownIsOpen=!1,this.store.dispatch(this.isNewTask?new r.hb({checklistId:e.id}):new r.fb({checklistId:e.id}))}getChecklists(e,t,i=!1){this.store.dispatch(this.checklists&&!i?new r.eb({checklists:this.checklists,taskId:e}):new r.db({itemId:e,hideWhileLoading:t,firstLoad:!0}))}sendEditChecklistItemRequest(e,t,i,a,c,n,o){"same"===n?this.store.dispatch(new r.Z({itemId:this.itemData.id,checklistId:a,checkListItemId:i,body:{orderindex:e,parent:t},tmpId:o})):"different"===n&&this.store.dispatch(new r.jb({itemId:this.itemData.id,checklistItemId:i,body:{orderindex:e,parent:t,checklist_id:c}}))}newTaskOnItemDrag(e,t,i,a,c,n){this.store.dispatch(new r.ob({dragged:!0,checklistId:a,checklistItemId:i,targetFrom:n,targetChecklistId:c,parentId:t,orderindex:e}))}getAverage(e,t){return(e+t)/2}checkForNullItems(e){const t=[];this.checklist2NullIndexItems$.pipe(Object(I.a)(e=>!Object(p.a)(e)),Object(k.a)(1),Object(y.a)(this.destroy$)).subscribe(i=>{Object.keys(i).forEach(function(a){0!==i[a].length&&t.push({checklistId:a,items:i[a].items,itemId:e})}),1===t.length&&0===t[0].items.length||t.forEach(e=>{this.store.dispatch(new r.yb(e))})})}quickCreateChecklist(){this.createChecklist("Checklist")}createChecklist(e){0!==e.length&&(this.store.dispatch(this.isNewTask?new r.Q({name:e,orderindex:0,resolved:0,show_completed:!0,unresolved:0,items:[],id:this.randomString()}):new r.S({itemId:this.itemData.id,body:{name:e}})),this.modalService.close())}randomString(){const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let t="";for(let i=0;i<6;i++)t+=e[Math.floor(36*Math.random())];return t}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(w.a),a.Wb(T.Store),a.Wb(a.j),a.Wb(x.WebsocketService),a.Wb(C.c),a.Wb(w.a),a.Wb(a.t))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-checklist2"]],viewQuery:function(e,t){if(1&e&&a.jd(ri,3,a.U),2&e){let e;a.Qc(e=a.rc())&&(t.createChecklistContainer=e.first)}},inputs:{itemData:"itemData",spaceData:"spaceData",teamId:"teamId",isNewTask:"isNewTask",newTaskMembers:"newTaskMembers",checklists:"checklists",deletePermission:"deletePermission"},outputs:{createChecklistClosed:"createChecklistClosed"},features:[a.Gb],decls:5,vars:4,consts:function(){let e,t,i,a;return e=$localize`:@@common_add-checklist-1␟a2fa5e9e7ac8043362fe13427a8cac9823aa8be7␟7652409784418886000:ADD CHECKLIST`,t=$localize`:@@common_use-template␟a17c54cd1ef0f4b34bbcca3284e5ec821f533ecd␟1050001620607966490:Use Template`,i=$localize`:@@common_add-checklist␟09ee10a652da06375ad6b718adda604cf5210345␟7791426209832144175:Add checklist`,a=$localize`:@@common_use-template␟a17c54cd1ef0f4b34bbcca3284e5ec821f533ecd␟1050001620607966490:Use Template`,[[1,"cu-checklist2"],[4,"ngIf"],["createChecklist",""],["class","cu-checklist2-add__container",3,"cu-checklist2-add__container-open",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"checklists","checklist","itemData","checklistItemChanged","dragulaBag","isGuest","meUserId","canDelete","loading","onlyDeleteIfOwner","newlyCreatedChecklistId"],[1,"cu-checklist2-add__container"],[1,"cu-checklist2-add__btn",3,"click"],e,[1,"cu-checklist2-add__container-splitter"],[3,"taskId","teamId","onClose","click","onDone","browseAll"],[1,"cu-checklist2-add__btn","cu-checklist2-add__btn-add__btn-template"],t,i,[3,"taskId","teamId","offline","onClose","click","onDone","browseAll","allowEditChecklist"],a,[3,"checklists","checklist","itemData","dragulaBag","newTaskMembers","newTaskChecklistsChanged","newTaskItemDragged","newTaskSaveDraft"]]},template:function(e,t){1&e&&(a.cc(0,"div",0),a.bd(1,mi,5,6,"div",1),a.bd(2,pi,14,11,"div",1),a.bc(),a.bd(3,bi,0,0,"ng-template",null,2,a.cd)),2&e&&(a.Ob("isNewTask",t.isNewTask),a.Ib(1),a.Dc("ngIf",!t.isNewTask),a.Ib(1),a.Dc("ngIf",t.isNewTask))},directives:[O.q,O.p,nt,Ct,si],pipes:[O.b],encapsulation:2,changeDetection:0}),e})()},VFna:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var a=i("o7Ov"),c=i("fXoL"),n=i("Jf2N"),o=i("AeD3"),s=i("l7P3"),r=i("ofXK");function l(e,t){1&e&&c.gc(0,14)}function u(e,t){if(1&e&&c.gc(0,15),2&e){const e=c.uc();c.kc(e.taskCount),c.hc(0)}}let d=(()=>{class e{constructor(e,t,i){this.modalService=e,this.dataService=t,this.store=i}ngOnInit(){this.dataService.getProjectTaskCount(this.project.id,null).subscribe(e=>{if(e&&e.statuses){let t=0;e.statuses.forEach(e=>t+=e.task_count),this.taskCount=t}})}cancel(){this.modalService.close()}archive(){this.store.dispatch(new a.ym({id:this.project.id,data:{archived:!0}})),this.cancel()}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(n.a),c.Wb(o.a),c.Wb(s.Store))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-project-confirm-archive"]],inputs:{project:"project"},decls:19,vars:2,consts:function(){let e,t,i,a,c,n;return e=$localize`:@@common_space␟52d92107e6b2e533468a728409354191bc7b0618␟8946906119075338535:Space`,t=$localize`:@@cu-project-confirm-archive__description␟496fc1e43ec1ac088d7425adc497dc1057bec7d5␟972975683162212444: Archiving a Space removes it from view but allows you to restore it at anytime. When you archive a Space, Tasks are preserved and are still searchable. `,i=$localize`:@@common_cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,a=$localize`:@@common_archive␟22c9be90eb27c5c613348fbb621792223afe5d1b␟1055686627716339120:Archive`,c=$localize`:@@cu-project-confirm-archive__including-tasks_singular␟8c2c467958b4e68f8accd3a99121fca3a67dfb9c␟2878034724812982294:Plus 1 task`,n=$localize`:@@cu-project-confirm-archive__including-tasks_plural␟511373a669a754c8465e8098454908e6171a84cf␟4828819110421476586:Plus ${"\ufffd0\ufffd"}:INTERPOLATION: Tasks`,[[1,"confirm-remove-category"],[1,"confirm-remove-category__header"],e,[1,"confirm-remove-category__counter",3,"ngPlural"],["ngPluralCase","1"],["ngPluralCase","other"],[1,"confirm-remove-category__description"],t,[1,"confirm-remove-category__controls"],[1,"cu-btn","cu-btn_confirm-cancel",3,"click"],[1,"cu-btn__text"],i,[1,"cu-btn",3,"click"],a,c,n]},template:function(e,t){1&e&&(c.cc(0,"div",0),c.cc(1,"div",1),c.ac(2),c.gc(3,2),c.Zb(),c.dd(4,": "),c.cc(5,"span"),c.dd(6),c.bc(),c.bc(),c.cc(7,"div",3),c.bd(8,l,1,0,"ng-template",4),c.bd(9,u,1,1,"ng-template",5),c.bc(),c.cc(10,"div",6),c.gc(11,7),c.bc(),c.cc(12,"div",8),c.cc(13,"button",9),c.qc("click",function(){return t.cancel()}),c.cc(14,"div",10),c.gc(15,11),c.bc(),c.bc(),c.cc(16,"button",12),c.qc("click",function(){return t.archive()}),c.cc(17,"div",10),c.gc(18,13),c.bc(),c.bc(),c.bc(),c.bc()),2&e&&(c.Ib(6),c.ed(null==t.project?null:t.project.name),c.Ib(1),c.Dc("ngPlural",t.taskCount||0))},directives:[r.r,r.s],encapsulation:2}),e})()},WQHH:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("ofXK"),c=i("3Pt+"),n=i("dsEp"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.x,n.a]]}),e})()},WhXy:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var a=i("mcWp"),c=i("1M0N"),n=i("K0KF"),o=i("ofXK"),s=i("tyNb"),r=i("bFKe"),l=i("gb9A"),u=i("KyjD"),d=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[o.c,s.l,c.a,a.a,n.a,r.b,l.a,u.a]]}),e})()},Xuvk:function(e,t,i){"use strict";i.d(t,"a",function(){return ee});var a=i("XNiG"),c=i("fXoL"),n=i("Muja"),o=i("IzLi"),s=i("2Vo4"),r=i("itXk"),l=i("/uUt"),u=i("lJxs"),d=i("UXun"),m=i("Kj3r"),h=i("1G5W"),p=i("GXRk"),b=i("jJQC"),g=i("jJW4"),f=i("LdyQ"),_=i("MJvn"),v=i("ofXK"),y=i("n+1/"),k=i("NsZK"),I=i("UdVN"),w=i("3Pt+"),T=i("EDFS"),x=i("bFKe");const C=function(e){return{"background-color":e}};function O(e,t){if(1&e&&c.Xb(0,"div",12),2&e){const e=t.$implicit;c.ad("display",t.index>14?"none":"block"),c.Dc("ngStyle",c.Hc(3,C,null==e?null:e.color))}}function S(e,t){1&e&&(c.cc(0,"div",13),c.dd(1," \u2026 "),c.bc())}function D(e,t){if(1&e&&(c.cc(0,"div",9),c.bd(1,O,1,5,"div",10),c.bd(2,S,2,0,"div",11),c.bc()),2&e){const e=c.uc(2);c.Ib(1),c.Dc("ngForOf",e.statuses)("ngForTrackBy",e.trackByStatus),c.Ib(1),c.Dc("ngIf",(null==e.statuses?null:e.statuses.length)>14)}}const A=function(e){return{"justify-content":e}};function j(e,t){if(1&e){const e=c.dc();c.cc(0,"div",6),c.bd(1,D,3,3,"div",7),c.cc(2,"div",8),c.qc("click",function(){return c.Uc(e),c.uc().toggleCollpased()}),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Dc("ngStyle",c.Hc(5,A,e.collapsed?null:"flex-end")),c.Ib(1),c.Dc("ngIf",e.collapsed),c.Ib(1),c.Ob("block-expanded",!e.collapsed),c.Dc("icon","cu2-caret-down")}}function N(e,t){1&e&&c.Xb(0,"div",22)}const E=function(){return{width:"240px"}};function $(e,t){if(1&e){const e=c.dc();c.cc(0,"div",15),c.cc(1,"input",2),c.qc("click",function(){c.Uc(e);const i=t.$implicit;return c.uc(2).onStatusToggle.emit(i)}),c.bc(),c.cc(2,"div",16),c.qc("click",function(){c.Uc(e);const i=t.$implicit;return c.uc(2).onStatusToggle.emit(i)}),c.Xb(3,"span",17),c.cc(4,"span",18),c.dd(5),c.bc(),c.bd(6,N,1,0,"div",19),c.bc(),c.cc(7,"div",20),c.qc("click",function(){c.Uc(e);const i=t.$implicit;return c.uc(2).onOnlyStatus.emit(i)}),c.gc(8,21),c.bc(),c.bc()}if(2&e){const e=t.$implicit,i=c.uc(2);c.Dc("ngStyle",c.Gc(5,E)),c.Ib(1),c.Dc("checked",e.checked),c.Ib(2),c.Dc("ngStyle",c.Hc(6,C,e.color)),c.Ib(2),c.ed(e.status),c.Ib(1),c.Dc("ngIf",e.type===i.StatusTypes.Done)}}function P(e,t){if(1&e&&(c.ac(0),c.bd(1,$,9,8,"div",14),c.Zb()),2&e){const e=c.uc();c.Ib(1),c.Dc("ngForOf",e.statuses)("ngForTrackBy",e.trackByStatus)}}let L=(()=>{class e{constructor(e){this.changeDetector=e,this.onStatusToggle=new c.o,this.onOnlyStatus=new c.o,this.onToggleAll=new c.o,this.onStatusGroupToggle=new c.o,this.collapsed=!0,this.allChecked=!1,this.someChecked=!1,this.StatusTypes=p.g,this.trackByStatus=Object(b.d)("status")}ngOnInit(){}ngOnChanges(){this.allChecked=(this.statuses||[]).every(e=>e.checked),this.someChecked=!this.allChecked&&(this.statuses||[]).some(e=>e.checked)}toggleCollpased(){this.collapsed=!this.collapsed,this.onStatusGroupToggle.emit(),this.changeDetector.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(c.h))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-status-filter-type-block"]],hostAttrs:[1,"cu-status-filter-type-block"],inputs:{statuses:"statuses",label:"label",filterString:"filterString"},outputs:{onStatusToggle:"onStatusToggle",onOnlyStatus:"onOnlyStatus",onToggleAll:"onToggleAll",onStatusGroupToggle:"onStatusGroupToggle"},features:[c.Gb],decls:7,vars:6,consts:function(){let e;return e=$localize`:@@cu-status-filter-type-block__filter-only␟9d090e876fda5fdf5e7390efd3d311f191c48bc8␟4530624892269790487: Only `,[[1,"cu-status-filter-type-block__inner"],[1,"cu-status-filter","cu-list-status__item","cu-checkbox"],["type","checkbox",1,"cu-checkbox__input",3,"checked","click"],[1,"cu-checkbox__label","filter-type-block",3,"click"],["class","cu-status-filter-type-block__toggle",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"cu-status-filter-type-block__toggle",3,"ngStyle"],["class","cu-status-filter-type-block__container",4,"ngIf"],[1,"cu-status-filter-type-block__toggle-caret",3,"icon","click"],[1,"cu-status-filter-type-block__container"],["class","cu-status-filter-type-block__container-status",3,"ngStyle","display",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-dt-filter__dots",4,"ngIf"],[1,"cu-status-filter-type-block__container-status",3,"ngStyle"],[1,"cu-dt-filter__dots"],["class","cu-status-filter cu-list-status__item cu-checkbox",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-status-filter","cu-list-status__item","cu-checkbox",3,"ngStyle"],[1,"cu-checkbox__label",3,"click"],[1,"cu-status-filter-type-block__container-status","lg-status",3,"ngStyle"],[1,"cu-status-filter-type-block__container-label"],["class","cu-list-status__status-done","icon","status-done",4,"ngIf"],[1,"cu-status-filter__only",3,"click"],e,["icon","status-done",1,"cu-list-status__status-done"]]},template:function(e,t){1&e&&(c.cc(0,"div",0),c.cc(1,"div",1),c.cc(2,"input",2),c.qc("click",function(){return t.onToggleAll.emit(t.statuses)}),c.bc(),c.cc(3,"div",3),c.qc("click",function(){return t.onToggleAll.emit(t.statuses)}),c.dd(4),c.bc(),c.bc(),c.bd(5,j,3,7,"div",4),c.bc(),c.bd(6,P,2,2,"ng-container",5)),2&e&&(c.Ib(2),c.Dc("checked",t.allChecked||t.someChecked),c.Ib(1),c.Ob("some-status-selected",t.someChecked),c.Ib(1),c.fd(" ",t.label," "),c.Ib(1),c.Dc("ngIf",!t.filterString),c.Ib(1),c.Dc("ngIf",!t.collapsed||t.filterString))},directives:[v.q,v.t,I.a,v.p],styles:[".cu-status-filter-type-block{max-width:300px;display:block}.cu-status-filter-type-block__inner{display:flex;align-items:center;justify-content:space-between}.cu-status-filter-type-block__container{display:flex;align-items:center;flex:1 0 0;justify-content:flex-end;overflow:hidden}.cu-status-filter-type-block__container-status{width:5px;height:5px;margin:1px;flex-shrink:0}.cu-status-filter-type-block__container-status.lg-status{height:12px;width:12px;margin-right:5px}.cu-status-filter-type-block__container-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-status-filter-type-block__toggle{display:flex;align-items:center;justify-content:space-between;min-width:0}.cu-status-filter-type-block__toggle-caret{transition:transform .2s cubic-bezier(.785,.135,.15,.86),fill .2s cubic-bezier(.785,.135,.15,.86);flex-shrink:0;width:18px;height:18px;cursor:pointer;margin:-1px 2px 0 0;fill:#d0d3d9;transform:rotate(90deg)}.cu-status-filter-type-block__toggle-caret:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-status-filter-type-block__toggle-caret:hover{fill:var(--theme-main-color)}}.cu-status-filter-type-block__toggle-caret.block-expanded{transform:rotate(0deg)}"],encapsulation:2,changeDetection:0}),e})();const U=["dropdown"],z=["searchField"];function M(e,t){if(1&e&&(c.cc(0,"div",8),c.dd(1),c.vc(2,"async"),c.bc()),2&e){const e=c.uc();c.Ib(1),c.fd(" ",c.wc(2,1,e.statusFilterText$)," ")}}function R(e,t){if(1&e&&(c.cc(0,"div",12),c.vc(1,"uppercase"),c.dd(2),c.vc(3,"uppercase"),c.bc()),2&e){const e=c.uc().$implicit;c.Dc("cuTooltip",c.wc(1,3,e.status))("tooltipDisabledIfTextNotTruncated",!0),c.Ib(2),c.fd(" ",c.wc(3,5,e.status)," ")}}const G=function(e){return{background:e}};function F(e,t){if(1&e&&(c.ac(0),c.Xb(1,"div",10),c.vc(2,"async"),c.vc(3,"uppercase"),c.bd(4,R,4,7,"div",11),c.vc(5,"async"),c.Zb()),2&e){const e=t.$implicit,i=c.uc(2);c.Ib(1),c.Dc("ngStyle",c.Hc(9,G,e.color))("cuTooltip",1===c.wc(2,3,i.statusFilterNormalized$).length?null:c.wc(3,5,e.status)),c.Ib(3),c.Dc("ngIf",1===c.wc(5,7,i.statusFilterNormalized$).length)}}function V(e,t){if(1&e&&(c.cc(0,"div",8),c.bd(1,F,6,11,"ng-container",9),c.vc(2,"async"),c.bc()),2&e){const e=c.uc();c.Ib(1),c.Dc("ngForOf",c.wc(2,2,e.statusFilterNormalized$))("ngForTrackBy",e.trackByStatus)}}function q(e,t){1&e&&(c.cc(0,"div",13),c.dd(1," ... "),c.bc())}function X(e,t){1&e&&c.Xb(0,"div",14)}function B(e,t){1&e&&(c.ac(0),c.gc(1,31),c.Zb())}function K(e,t){if(1&e){const e=c.dc();c.ac(0),c.mc(1,32),c.cc(2,"a",33),c.qc("click",function(){return c.Uc(e),c.uc(),c.Rc(12).hide()}),c.bc(),c.jc(),c.Zb()}}function W(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-status-filter-type-block",34),c.qc("onStatusToggle",function(t){return c.Uc(e),c.uc(2).statusToggle(t)})("onOnlyStatus",function(t){return c.Uc(e),c.uc(2).onlyStatus(t)})("onToggleAll",function(t){return c.Uc(e),c.uc(2).toggleAllInGroup(t)})("onStatusGroupToggle",function(){return c.Uc(e),c.uc(2).statusGroupToggle()}),c.vc(1,"async"),c.vc(2,"async"),c.bc()}if(2&e){const e=c.uc(2);c.Dc("statuses",c.wc(1,3,e.unstartedStatuses$))("label",e.notStartedStatus)("filterString",c.wc(2,5,e.filterString$))}}function H(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-status-filter-type-block",34),c.qc("onStatusToggle",function(t){return c.Uc(e),c.uc(2).statusToggle(t)})("onOnlyStatus",function(t){return c.Uc(e),c.uc(2).onlyStatus(t)})("onToggleAll",function(t){return c.Uc(e),c.uc(2).toggleAllInGroup(t)})("onStatusGroupToggle",function(){return c.Uc(e),c.uc(2).statusGroupToggle()}),c.vc(1,"async"),c.vc(2,"async"),c.bc()}if(2&e){const e=c.uc(2);c.Dc("statuses",c.wc(1,3,e.activeStatuses$))("label",e.activeText)("filterString",c.wc(2,5,e.filterString$))}}function Z(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-status-filter-type-block",34),c.qc("onStatusToggle",function(t){return c.Uc(e),c.uc(2).statusToggle(t)})("onOnlyStatus",function(t){return c.Uc(e),c.uc(2).onlyStatus(t)})("onToggleAll",function(t){return c.Uc(e),c.uc(2).toggleAllInGroup(t)})("onStatusGroupToggle",function(){return c.Uc(e),c.uc(2).statusGroupToggle()}),c.vc(1,"async"),c.vc(2,"async"),c.bc()}if(2&e){const e=c.uc(2);c.Dc("statuses",c.wc(1,3,e.doneStatuses$))("label",e.doneText)("filterString",c.wc(2,5,e.filterString$))}}function Q(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-status-filter-type-block",34),c.qc("onStatusToggle",function(t){return c.Uc(e),c.uc(2).statusToggle(t)})("onOnlyStatus",function(t){return c.Uc(e),c.uc(2).onlyStatus(t)})("onToggleAll",function(t){return c.Uc(e),c.uc(2).toggleAllInGroup(t)})("onStatusGroupToggle",function(){return c.Uc(e),c.uc(2).statusGroupToggle()}),c.vc(1,"async"),c.vc(2,"async"),c.bc()}if(2&e){const e=c.uc(2);c.Dc("statuses",c.wc(1,3,e.closedStatuses$))("label",e.closedStatus)("filterString",c.wc(2,5,e.filterString$))}}function J(e,t){if(1&e){const e=c.dc();c.cc(0,"div",15),c.cc(1,"div",16),c.cc(2,"div",17),c.cc(3,"input",18,19),c.qc("ngModelChange",function(t){return c.Uc(e),c.uc().searchString=t})("ngModelChange",function(){return c.Uc(e),c.uc().debounceSearch.next()}),c.bc(),c.Xb(5,"div",20),c.bc(),c.cc(6,"a",21),c.qc("click",function(){return c.Uc(e),c.uc().statusToggleAll()}),c.bd(7,B,2,0,"ng-container",22),c.vc(8,"async"),c.bc(),c.bd(9,K,3,0,"ng-template",null,23,c.cd),c.cc(11,"div",24,25),c.qc("mouseenter",function(){return c.Uc(e),c.Rc(12).show()}),c.bc(),c.bc(),c.cc(13,"div",26),c.bd(14,W,3,7,"cu-status-filter-type-block",27),c.vc(15,"async"),c.bd(16,H,3,7,"cu-status-filter-type-block",27),c.vc(17,"async"),c.bd(18,Z,3,7,"cu-status-filter-type-block",27),c.vc(19,"async"),c.bd(20,Q,3,7,"cu-status-filter-type-block",27),c.vc(21,"async"),c.bc(),c.cc(22,"div",28),c.cc(23,"div",29),c.qc("click",function(){return c.Uc(e),c.uc().close()}),c.gc(24,30),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.Rc(10),t=c.uc(),i=c.Rc(13);let a=null,n=null,o=null,s=null;c.Ib(3),c.Dc("ngModel",t.searchString),c.Ib(4),c.Dc("ngIf",c.wc(8,9,t.allSelected$))("ngIfElse",i),c.Ib(4),c.Dc("popover",e)("outsideClick",!0),c.Ib(3),c.Dc("ngIf",null==(a=c.wc(15,11,t.unstartedStatuses$))?null:a.length),c.Ib(2),c.Dc("ngIf",null==(n=c.wc(17,13,t.activeStatuses$))?null:n.length),c.Ib(2),c.Dc("ngIf",null==(o=c.wc(19,15,t.doneStatuses$))?null:o.length),c.Ib(2),c.Dc("ngIf",null==(s=c.wc(21,17,t.closedStatuses$))?null:s.length)}}function Y(e,t){1&e&&(c.ac(0),c.gc(1,35),c.Zb())}let ee=(()=>{class e{constructor(e){this.sharedData=e,this.destroy$=new a.a,this.debounceSearch=new a.a,this.hideClosedTasks=!0,this.searchString="",this.filteredStatuses=[],this.updateDropdownPosition=!1,this.trackByStatus=Object(b.d)("status"),this.placeholder="",this.alwaysCollapseGroups=!0,this.onChange=new c.o,this.onLoadStatuses=new c.o,this.statusFilter$=new s.a([]),this.statuses$=new s.a([]),this.filterString$=new s.a(this.searchString),this.statusFilterNormalized$=Object(r.a)([this.statusFilter$,this.statuses$]).pipe(Object(l.a)(n.a),Object(u.a)(([e,t])=>e.map(e=>t&&t.find(t=>e.status===t.status)||e)),Object(d.a)({refCount:!0,bufferSize:1})),this.statusListChecked$=Object(r.a)([this.statuses$,this.statusFilter$,this.filterString$]).pipe(Object(u.a)(([e,t,i])=>[(e||[]).filter(e=>!i||e.status.toLowerCase().includes(i.toLowerCase())),t||[]]),Object(u.a)(([e,t])=>e.map(e=>Object.assign({},e,{checked:-1!==t.map(e=>e.status).indexOf(e.status)})))),this.allSelected$=this.statusListChecked$.pipe(Object(u.a)(e=>e.every(e=>e.checked))),this.unstartedStatuses$=this.statusListChecked$.pipe(Object(u.a)(e=>this.getUnstartedGroup(e))),this.activeStatuses$=this.statusListChecked$.pipe(Object(u.a)(e=>this.getActiveGroup(e))),this.doneStatuses$=this.statusListChecked$.pipe(Object(u.a)(e=>this.getDoneGroup(e))),this.closedStatuses$=this.statusListChecked$.pipe(Object(u.a)(e=>this.getClosedGroup(e))),this.statusFilterText$=Object(r.a)([this.statuses$,this.statusFilterNormalized$]).pipe(Object(u.a)(([e,t])=>e.length===t.length?$localize`:used in filtering items@@common_all--filter-item:All`:t.length>0?$localize`:@@cu-status-filter__filtered-status-count:${t.length}:filterdStatusCount: statuses`:this.placeholder),Object(l.a)()),this.activeText=$localize`:@@common_active:Active`,this.closedStatus=$localize`:closed status@@common_closed--status:Closed`,this.doneText=$localize`:@@common_done:Done`,this.notStartedStatus=$localize`:used as a status filter@@common_not-started-started:Not started`}ngOnInit(){this.autoOpen&&setTimeout(()=>this.dropdown.open()),this.debounceSearch.pipe(Object(m.a)(250),Object(h.a)(this.destroy$)).subscribe(()=>{this.filterString$.next(this.searchString)}),this.statusListChecked$.pipe(Object(h.a)(this.destroy$)).subscribe(e=>{this.filteredStatuses=e}),this.showStatusFilterText$=Object(r.a)([this.statuses$,this.statusFilter$]).pipe(Object(u.a)(([e,t])=>[e||[],t||[]]),Object(u.a)(([e,t])=>0===t.length||t.length===e.length||t.length>5)),this.onLoadStatuses.emit()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){(e.value||e.statuses)&&this.value&&this.statuses&&this.statusFilter$.next(this.statuses.filter(e=>this.isStatusInList(e))),e.statuses&&this.statuses$.next(this.statuses||[])}isStatusInList(e){return this.value.find(t=>{if(Object(o.a)(t)){const i=t.type;return i===p.f.all||i===p.f.active&&(e.type===p.g.Open&&!this.supportUnstartedGroup()||e.type===p.g.Custom)||i===p.f.closed&&e.type===p.g.Closed||i===p.f.done&&e.type===p.g.Done||i===p.f.unstarted&&(e.type===p.g.Open&&this.supportUnstartedGroup()||e.type===p.g.Unstarted)}return t===e.status})}groupStatuses(e,t=!1,i){if(!e||0===e.length)return[];const a=this.getUnstartedGroup(e),c=this.getActiveGroup(e),n=this.getDoneGroup(e),o=this.getClosedGroup(e),s=this.getUnstartedGroup(this.statuses||[]),r=this.getActiveGroup(this.statuses||[]),l=this.getDoneGroup(this.statuses||[]),u=this.getClosedGroup(this.statuses||[]);if(a.length===s.length&&c.length===r.length&&n.length===l.length&&o.length===u.length)return[{type:p.f.all}];const d=(e,i,a,c)=>{const n=this.checkIfGroupIsAlreadyCollapsed(a);return e.length>0?e.length===i.length&&(n||this.alwaysCollapseGroups||t&&c)?[{type:a}]:e.map(e=>e.status):[]};return[...d(a,s,p.f.unstarted,i===p.g.Open||i===p.g.Unstarted),...d(c,r,p.f.active,i===p.g.Custom),...d(n,l,p.f.done,i===p.g.Done),...d(o,u,p.f.closed,i===p.g.Closed)]}checkIfGroupIsAlreadyCollapsed(e){return-1!==(this.value||[]).findIndex(t=>Object(o.a)(t)&&t.type===e)}supportUnstartedGroup(){return this.sharedData.compatCurrentTeam&&this.sharedData.compatCurrentTeam.unstarted_status_group}getUnstartedGroup(e){return this.supportUnstartedGroup()?[...e.filter(e=>e.type===p.g.Open),...e.filter(e=>e.type===p.g.Unstarted)]:e.filter(e=>e.type===p.g.Unstarted)}getActiveGroup(e){return this.supportUnstartedGroup()?e.filter(e=>e.type===p.g.Custom):[...e.filter(e=>e.type===p.g.Open),...e.filter(e=>e.type===p.g.Custom)]}getDoneGroup(e){return e.filter(e=>e.type===p.g.Done)}getClosedGroup(e){return e.filter(e=>e.type===p.g.Closed)}statusToggle(e){const t=this.getStatusIndex(e),i=this.statusFilter$.value.slice();-1===t?i.push(e):i.splice(t,1),this.emitChanges(i,!1,e.type)}statusToggleAll(){this.statusFilter$.value.filter(e=>-1!==this.filteredStatuses.findIndex(t=>t.status===e.status)).length===this.filteredStatuses.length?this.statusDeselectAll():this.statusSelectAll()}statusDeselectAll(){if(0===this.statusFilter$.value.length)return;const e=this.statusFilter$.value.filter(e=>-1===this.filteredStatuses.findIndex(t=>t.status===e.status));this.emitChanges(e)}clearFilters(){this.emitChanges([])}onlyStatus(e){this.emitChanges([e]),this.dropdown.close()}toggleAllInGroup(e){const t=e.every(e=>e.checked),i=this.statusFilter$.value.slice();e.forEach(e=>{const a=i.map(e=>e.status).indexOf(e.status);t?-1!==a&&i.splice(a,1):-1===a&&i.push(e)}),this.emitChanges(i,!0,e&&e[0]&&e[0].type)}emitChanges(e,t=!1,i){this.onChange.emit(this.groupStatuses(e,t,i))}close(){this.dropdown.close()}dropdownOpened(){this.searchField&&this.searchField.nativeElement.focus()}statusGroupToggle(){this.updateDropdownPosition=!this.updateDropdownPosition}statusSelectAll(){this.statusFilter$.value.filter(e=>this.filteredStatuses.findIndex(t=>t.status===e.status)).length!==this.filteredStatuses.length&&this.emitChanges(this.filteredStatuses)}getStatusIndex(e){return this.statusFilter$.value.map(e=>e.status).indexOf(e.status)}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(g.a))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-status-filter"]],viewQuery:function(e,t){if(1&e&&(c.jd(U,3),c.jd(z,1)),2&e){let e;c.Qc(e=c.rc())&&(t.dropdown=e.first),c.Qc(e=c.rc())&&(t.searchField=e.first)}},hostAttrs:[1,"cu-status-filter"],inputs:{statuses:"statuses",autoOpen:"autoOpen",value:"value",placeholder:"placeholder",dropdownDisabled:"dropdownDisabled",alwaysCollapseGroups:"alwaysCollapseGroups"},outputs:{onChange:"onChange",onLoadStatuses:"onLoadStatuses"},features:[c.Gb],decls:14,vars:15,consts:function(){let e,t,i,a,c;return e=$localize`:form input placeholder@@forms_placeholder--filter␟25925fc5826bc5b3eeae7c45b08b0ed74b9e2954␟9209781328340965816:Filter...`,t=$localize`:@@common_confirm␟1ea960fa8b56e3cf24db45503435bd94cb045cd6␟3432593380387673657: Confirm `,i=$localize`:@@common_deselect-all␟fdd8c0ec42148f76f93fa98129edf03bb03ac990␟1278322698743284344:Deselect All`,a=$localize`:@@help_popup-tmpl--statuses␟99dc8baddc9709105c6e6aaa125f6bbafc50b2ed␟4424368551054851516:${"\ufffd#2\ufffd"}:START_LINK:Learn more${"\ufffd/#2\ufffd"}:CLOSE_LINK: about statuses `,c=$localize`:@@common_select-all␟f8b403888712c826f65a73a5e2c8204fa95da187␟8716359834484489616:Select All`,[["cuDropdown","",1,"cu-dropdown_left",3,"dropdownCloseOnInsideClick","dropdownRepositionFlag","dropdownDisabled","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-status-filter__toggle"],["class","cu-status-filter__value",4,"ngIf"],["class","cu-status-filter__dots",4,"ngIf"],["class","cu-status-filter__down","icon","angle-right",4,"ngIf"],["class","cu-list-status",4,"cuDropdownMenu"],["selectAllTmpl",""],[1,"cu-status-filter__value"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"selected-status-list__item",3,"ngStyle","cuTooltip"],["class","selected-status-list__label",3,"cuTooltip","tooltipDisabledIfTextNotTruncated",4,"ngIf"],[1,"selected-status-list__label",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-status-filter__dots"],["icon","angle-right",1,"cu-status-filter__down"],[1,"cu-list-status"],[1,"cu-list-status__header","user-list__header","cu-status-filter__header"],[1,"cu-search"],["type","text","placeholder",e,1,"cu-search__input",3,"ngModel","ngModelChange"],["searchField",""],["icon","search",1,"cu-search__icon"],["cuLink","",1,"cu-list-status__select-all",3,"click"],[4,"ngIf","ngIfElse"],["popTemplate",""],["icon","question","containerClass","markdown-tooltip","triggers","","container","body","placement","top",1,"help-question-mark",3,"popover","outsideClick","mouseenter"],["pop","bs-popover"],[1,"cu-list-status__body","cu-status-filter__body",3,"perfectScrollbar"],[3,"statuses","label","filterString","onStatusToggle","onOnlyStatus","onToggleAll","onStatusGroupToggle",4,"ngIf"],[1,"cu-status-filter__footer"],[1,"cu-btn","cu-btn_sm","cu-btn_full-width",3,"click"],t,i,a,["href","https://docs.clickup.com/en/articles/831184-statuses","target","_blank",1,"popover-content_link",3,"click"],[3,"statuses","label","filterString","onStatusToggle","onOnlyStatus","onToggleAll","onStatusGroupToggle"],c]},template:function(e,t){if(1&e&&(c.cc(0,"div",0,1),c.qc("dropdownOpen",function(){return t.dropdownOpened()}),c.cc(2,"div",2),c.bd(3,M,3,3,"div",3),c.vc(4,"async"),c.bd(5,V,3,4,"div",3),c.vc(6,"async"),c.bd(7,q,2,0,"div",4),c.vc(8,"async"),c.vc(9,"async"),c.bd(10,X,1,0,"div",5),c.bc(),c.bd(11,J,25,19,"div",6),c.bc(),c.bd(12,Y,2,0,"ng-template",null,7,c.cd)),2&e){let e=null;c.Dc("dropdownCloseOnInsideClick",!1)("dropdownRepositionFlag",t.updateDropdownPosition)("dropdownDisabled",t.dropdownDisabled),c.Ib(3),c.Dc("ngIf",c.wc(4,7,t.showStatusFilterText$)),c.Ib(2),c.Dc("ngIf",!c.wc(6,9,t.showStatusFilterText$)),c.Ib(2),c.Dc("ngIf",(null==(e=c.wc(8,11,t.statusFilterNormalized$))?null:e.length)>5&&!c.wc(9,13,t.showStatusFilterText$)),c.Ib(3),c.Dc("ngIf",!t.dropdownDisabled)}},directives:[f.b,_.a,v.q,y.a,v.p,v.t,k.a,I.a,w.c,w.p,w.s,T.c,x.a,L],pipes:[v.b,v.B],styles:[".cu-status-filter__toggle{display:flex;align-items:center}.cu-status-filter .cu-checkbox__label{min-width:0}.cu-status-filter .cu-checkbox__label.some-status-selected:after{background:#7b68ee;width:6px;height:6px;border-radius:6px;top:5px;left:5px}@supports (--theme-main-color:#7b68ee){.cu-status-filter .cu-checkbox__label.some-status-selected:after{background:var(--theme-main-color)}}.cu-status-filter__body{width:250px;padding:0 5px}.cu-status-filter__footer{padding:5px 15px 15px}.cu-status-filter__icon{width:16px;height:16px}.cu-status-filter__value{display:flex;justify-content:center;align-items:center;height:30px;position:relative;min-width:0;font-family:Gotham Pro,Proxima Nova,arial,serif}.cu-status-filter__down{width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px;transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s}.cu-status-filter__down:hover{transition:none}.dark-theme .cu-status-filter__down{fill:#abaeb0}.cu-dropdown_open>div>.cu-status-filter__down{transform:rotate(-90deg)}.cu-status-filter__only{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;display:none;margin:0 0 2px 7px;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;border-bottom:1px dashed}@supports (--theme-main-color:#7b68ee){.cu-status-filter__only{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-status-filter:hover .cu-status-filter__only{display:block}.cu-status-filter .cu-checkbox__label.filter-type-block{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-status-filter .cu-checkbox__label.filter-type-block{color:var(--theme-main-color)}}.cu-list-status__header.cu-status-filter__header{border-bottom:1px solid #f4f4f4}.dark-theme .cu-list-status__header.cu-status-filter__header{border-bottom-color:#1e272e}.cu-list-status__header.cu-status-filter__header .cu-search{width:125px}.cu-list-status__header.cu-status-filter__header .cu-list-status__select-all{font-size:12px}.cu-list-status__header.cu-status-filter__header .cu-search__input{padding:10px 10px 0 25px;border-bottom:none;margin-bottom:10px;font:12px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-list-status__header.cu-status-filter__header .cu-search__icon{left:0}"],encapsulation:2,changeDetection:0}),e})()},Yatc:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("3Pt+"),c=i("ofXK"),n=i("Dvla"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[c.c,n.b,a.l]]}),e})()},art9:function(e,t,i){e.exports=i.p+"task.3687c3d7265a95ada885.png"},bahz:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("gb9A"),c=i("tyNb"),n=i("ofXK"),o=i("K0KF"),s=i("+WWD"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[n.c,c.l,o.a,a.a,s.a]]}),e})()},bc6J:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},bz3s:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var a=i("HQfa"),c=i("yHCF"),n=i("ofXK"),o=i("Dvla"),s=i("1M0N"),r=i("gb9A"),l=i("K0KF"),u=i("uMAD"),d=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a,o.b,l.a,r.a,u.a,c.a,a.a]]}),e})()},calk:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var a=i("fXoL"),c=i("3Pt+"),n=i("jJQC"),o=i("AeD3"),s=i("jJW4"),r=i("ofXK");function l(e,t){1&e&&(a.cc(0,"div",26),a.cc(1,"div",27),a.Xb(2,"div",28),a.bc(),a.cc(3,"div",29),a.gc(4,30),a.bc(),a.bc())}function u(e,t){1&e&&(a.cc(0,"div",26),a.cc(1,"div",27),a.Xb(2,"div",28),a.bc(),a.cc(3,"div",29),a.gc(4,31),a.bc(),a.bc())}function d(e,t){if(1&e&&(a.cc(0,"option",32),a.dd(1),a.bc()),2&e){const e=t.$implicit;a.Dc("ngValue",e.value),a.Ib(1),a.fd(" ",e.label," ")}}function m(e,t){1&e&&(a.cc(0,"div",26),a.cc(1,"div",27),a.Xb(2,"div",28),a.bc(),a.cc(3,"div",29),a.gc(4,33),a.bc(),a.bc())}const h=function(e){return{"cu-form__row_error":e}};let p=(()=>{class e{constructor(e,t,i){this.dataService=e,this.fb=t,this.sharedData=i,this.submitted=!1,this.optionsSsoProvider=[{label:$localize`:@@common_google:Google`,value:"Google"},{label:$localize`:@@cu-contact-sales-modal__sso-provider-item_ms-azure:Microsoft/Azure`,value:"Microsoft/Azure"},{label:$localize`:@@common_sso-provider--okta:Okta`,value:"Okta"},{label:$localize`:@@common_sso-provider--:SAML`,value:"SAML"},{label:$localize`:@@common_none-1:none`,value:"none"}],this.trackByCode=Object(n.d)("code"),this.closeHelpModal=new a.o}ngOnInit(){this.salesForm=this.fb.group({name:[this.sharedData.currentUser.value.username,[c.A.required,c.A.maxLength(75)]],email:[this.sharedData.currentUser.value.email,[c.A.required,c.A.maxLength(75)]],phone:[this.sharedData.currentUser.value.phone],numberofusers:["",c.A.maxLength(10)],sales_provider:[],comment:["",c.A.maxLength(1e3)],clientId:[this.sharedData.currentUser.value.id],source:["enterprise"]})}submitToSales(){this.salesForm.valid&&this.dataService.submitSalesForm(this.salesForm.value).subscribe(()=>this.submitted=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(o.a),a.Wb(c.f),a.Wb(s.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-contact-sales-modal"]],outputs:{closeHelpModal:"closeHelpModal"},decls:41,vars:17,consts:function(){let e,t,i,a,c,n,o,s,r,l,u,d,m,h,p,b;return e=$localize`:@@common_name␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@common_name␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,i=$localize`:@@cu-contact-sales-modal__form-label_work-email␟f6c232a5b6c05520bda2f4a6ca84a431b4f74472␟7669971464408407934: Work Email `,a=$localize`:@@common_email␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`,c=$localize`:@@cu-contact-sales-modal__form-label_user-count-exploration␟f854cb39e8c5e90c5453e95ffb6021e5a619a71f␟1247822240369908484: How many users are you exploring ClickUp for? `,n=$localize`:@@common_number-of-users␟3b5fe3aad8cdfe8965d9ea759056bc896f8d3008␟6894387259340176887:Number of users`,o=$localize`:@@cu-contact-sales-modal__form-label_requires-sso␟78903bf960bebaff617bc52365d4154d5c09a085␟6754865838303392833: Do you need SSO and, if so, which provider? `,s=$localize`:@@cu-contact-sales-modal__form-select_sso-provider␟7b49dc1fd070a77f558d328773627d25f464d206␟681557745641298969: SSO provider `,r=$localize`:@@cu-contact-sales-modal__form-label_additional-support-context␟9a299cd76a66dc0cca25972c462f0a59901b4536␟6933358023948690789: Please share any additional context that can help us better support you: `,l=$localize`:@@cu-contact-sales-modal__form-placeholder_comment␟94cf5421e39a18727917eb49cfb1b3ee92d00c26␟4591057449957129078:Comment...`,u=$localize`:@@forms_submit␟71c77bb8cecdf11ec3eead24dd1ba506573fa9cd␟935187492052582731:Submit`,d=$localize`:@@common_thank-you␟768fa94396eb6bb2834ec52fc1b5fad92273027d␟3357031660050032232:Thank you!`,m=$localize`:@@cu-contact-sales-modal__form-submitted␟a3bc696b08f335f2a520ac8631427be2667ca00b␟2801565187393363876: Our team is excited to work with you, and we'll be in touch as soon as possible. `,h=$localize`:@@errors_form-field--required␟cd6639fa2f7e1a540c3775f8e46f9be4f33721c7␟8977356616214033041: This field is required! `,p=$localize`:@@errors_form-field--required␟cd6639fa2f7e1a540c3775f8e46f9be4f33721c7␟8977356616214033041: This field is required! `,b=$localize`:@@errors_form-field--required␟cd6639fa2f7e1a540c3775f8e46f9be4f33721c7␟8977356616214033041: This field is required! `,[[3,"hidden"],[1,"cu-form",3,"formGroup","submit"],[1,"cu-form__row",3,"ngClass"],[1,"cu-form__label"],e,[1,"cu-form__field"],["placeholder",t,"formControlName","name",1,"cu-form__input"],["class","cu-form__error",4,"ngIf"],i,["type","email","placeholder",a,"formControlName","email",1,"cu-form__input"],[1,"cu-form__row"],c,["type","number","placeholder",n,"formControlName","numberofusers",1,"cu-form__input"],o,[1,"cu-form__field","cu-form__field_no-border"],["formControlName","sales_provider",1,"cu-form__select"],["value","null","disabled","","selected","selected"],s,[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],r,["rows","4","placeholder",l,"formControlName","comment",1,"cu-form__input"],[1,"cu-btn","cu-btn_block"],u,[1,"help-submitted",3,"hidden"],d,m,[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],h,p,[3,"ngValue"],b]},template:function(e,t){1&e&&(a.cc(0,"div",0),a.cc(1,"form",1),a.qc("submit",function(){return t.submitToSales()}),a.cc(2,"div",2),a.cc(3,"div",3),a.gc(4,4),a.bc(),a.cc(5,"div",5),a.Xb(6,"input",6),a.bc(),a.bd(7,l,5,0,"div",7),a.bc(),a.cc(8,"div",2),a.cc(9,"div",3),a.gc(10,8),a.bc(),a.cc(11,"div",5),a.Xb(12,"input",9),a.bc(),a.bd(13,u,5,0,"div",7),a.bc(),a.cc(14,"div",10),a.cc(15,"div",3),a.gc(16,11),a.bc(),a.cc(17,"div",5),a.Xb(18,"input",12),a.bc(),a.bc(),a.cc(19,"div",10),a.cc(20,"div",3),a.gc(21,13),a.bc(),a.cc(22,"div",14),a.cc(23,"select",15),a.cc(24,"option",16),a.gc(25,17),a.bc(),a.bd(26,d,2,2,"option",18),a.bc(),a.bc(),a.bc(),a.cc(27,"div",2),a.cc(28,"div",3),a.gc(29,19),a.bc(),a.cc(30,"div",14),a.Xb(31,"textarea",20),a.bc(),a.bd(32,m,5,0,"div",7),a.bc(),a.cc(33,"div",10),a.cc(34,"button",21),a.gc(35,22),a.bc(),a.bc(),a.bc(),a.bc(),a.cc(36,"div",23),a.cc(37,"h1"),a.gc(38,24),a.bc(),a.cc(39,"h2"),a.gc(40,25),a.bc(),a.bc()),2&e&&(a.Dc("hidden",t.submitted),a.Ib(1),a.Dc("formGroup",t.salesForm),a.Ib(1),a.Dc("ngClass",a.Hc(11,h,t.salesForm.controls.name.touched&&t.salesForm.controls.name.errors)),a.Ib(5),a.Dc("ngIf",t.salesForm.controls.name.touched&&(null==t.salesForm.controls.name.errors?null:t.salesForm.controls.name.errors.required)),a.Ib(1),a.Dc("ngClass",a.Hc(13,h,t.salesForm.controls.email.touched&&t.salesForm.controls.email.errors)),a.Ib(5),a.Dc("ngIf",t.salesForm.controls.email.touched&&(null==t.salesForm.controls.email.errors?null:t.salesForm.controls.email.errors.required)),a.Ib(13),a.Dc("ngForOf",t.optionsSsoProvider)("ngForTrackBy",t.trackByCode),a.Ib(1),a.Dc("ngClass",a.Hc(15,h,t.salesForm.controls.comment.touched&&t.salesForm.controls.comment.errors)),a.Ib(5),a.Dc("ngIf",t.salesForm.controls.comment.touched&&(null==t.salesForm.controls.comment.errors?null:t.salesForm.controls.comment.errors.required)),a.Ib(4),a.Dc("hidden",!t.submitted))},directives:[c.C,c.q,c.k,r.o,c.c,c.p,c.i,r.q,c.u,c.z,c.t,c.B,r.p],encapsulation:2}),e})()},fBbx:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("ofXK"),c=i("VBI8"),n=i("gb9A"),o=i("K0KF"),s=i("EHXF"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,s.a]]}),e})()},"g/Dw":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},haUk:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var a=i("fXoL"),c=i("hr9B"),n=i("ofXK"),o=i("SA+E"),s=i("EDFS"),r=i("NsZK"),l=i("loh9"),u=i("UdVN");const d=["popover"],m=["widthChecker"],h=["widthCheckerMaxContainer"];function p(e,t){if(1&e){const e=a.dc();a.cc(0,"div",13),a.qc("click",function(){return a.Uc(e),a.uc().rename()}),a.bc()}2&e&&a.Dc("icon","cu2-edit")}function b(e,t){if(1&e){const e=a.dc();a.cc(0,"div",14),a.qc("click",function(){return a.Uc(e),a.uc().removeTag()}),a.bc()}2&e&&a.Dc("icon","cu2-close")}function g(e,t){if(1&e){const e=a.dc();a.cc(0,"div",15),a.qc("click",function(t){return a.Uc(e),a.uc().updateTemplate(t)}),a.gc(1,16),a.bc()}2&e&&a.Dc("@loading",void 0)}function f(e,t){1&e&&(a.cc(0,"div",17),a.gc(1,18),a.bc())}const _=function(e,t){return{"setup-step-project__preset-status-list-item template-item":e,"nav-menu-item status-drop":t}},v=function(e,t,i){return{active:e,"setup-step-project__preset-status-list-item-text":t,"nav-menu-item__name":i}};let y=(()=>{class e{constructor(){this.forMore=!1,this.templateSaveNeeded=!1,this.onClick=new a.o,this.onStartDelete=new a.o,this.onRename=new a.o,this.onSave=new a.o,this.showToolltip=!1,this.editingName=!1}ngOnChanges(e){e.template&&this.template&&(this.isFakeTemplate=["Space","Custom","Folder"].includes(this.template.name))}removeTag(){this.onStartDelete.emit()}rename(){this.editingName=!0}save(e){const t=e;if(!t.length)return;if(this.template.name.toLowerCase()===t.toLowerCase())return void this.cancel();const i=this.templates.slice();i.push(...this.moreTemplates),-1!==i.map(e=>e.name.toLowerCase()).indexOf(t.toLowerCase())?this.popover.show():(this.onRename.emit(t),this.cancel())}cancel(){this.editingName=!1,this.popover.hide()}callMethod(e){"function"==typeof this[e.action]&&this[e.action](e)}updateTemplate(e){e.stopPropagation(),e.preventDefault(),this.onSave.emit()}setVisabilityTooltip(){this.showToolltip=this.widthChecker.nativeElement.offsetWidth>this.widthCheckerMaxContainer.nativeElement.offsetWidth}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-status-template"]],viewQuery:function(e,t){if(1&e&&(a.jd(d,3),a.jd(m,3),a.jd(h,3)),2&e){let e;a.Qc(e=a.rc())&&(t.popover=e.first),a.Qc(e=a.rc())&&(t.widthChecker=e.first),a.Qc(e=a.rc())&&(t.widthCheckerMaxContainer=e.first)}},inputs:{active:"active",template:"template",templates:"templates",moreTemplates:"moreTemplates",forMore:"forMore",templateSaveNeeded:"templateSaveNeeded",modifier:"modifier"},outputs:{onClick:"onClick",onStartDelete:"onStartDelete",onRename:"onRename",onSave:"onSave"},features:[a.Gb],decls:16,vars:25,consts:function(){let e,t;return e=$localize`:@@common_save-template-1␟cccff04fc93eaee02ba5d030723781af806552c2␟4531584450449954401: Save template `,t=$localize`:@@errors_tag-existing␟9f1acd497ac22c7a11571db0608c3aaf0bbb215b␟1936758854694364572: Whoops! That tag already exists. `,[[1,"status-template",3,"ngClass"],[1,"status-template__item",3,"ngClass","click"],["placement","right","container","body","triggers","","placeholder","",3,"popover","text","editing","autosize","allowEmpty","selectText","autoFocus","cancelOnUpdate","inputModifier","onChange","onCancel","onKeyup"],["popover","bs-popover"],[1,"status-template__name",3,"ngClass","cuTooltip","mouseenter"],["widthCheckerMaxContainer",""],[1,"setup-step-project__preset-status-list-item-text-width-check"],["widthChecker",""],[1,"status-template__divider"],["cuPreventDefault","","class","status-template__icon",3,"icon","click",4,"ngIf"],["cuPreventDefault","","class","status-template__icon status-template__icon_remove",3,"icon","click",4,"ngIf"],["class","status-template__save",3,"click",4,"ngIf"],["error",""],["cuPreventDefault","",1,"status-template__icon",3,"icon","click"],["cuPreventDefault","",1,"status-template__icon","status-template__icon_remove",3,"icon","click"],[1,"status-template__save",3,"click"],e,[1,"cu-error-popover"],t]},template:function(e,t){if(1&e){const e=a.dc();a.cc(0,"div",0),a.cc(1,"div",1),a.qc("click",function(){return t.onClick.emit()}),a.cc(2,"cu-editable",2,3),a.qc("onChange",function(e){return t.save(e)})("onCancel",function(){return t.editingName=!1})("onKeyup",function(){return a.Uc(e),a.Rc(3).hide()}),a.cc(4,"div",4,5),a.qc("mouseenter",function(){return t.setVisabilityTooltip()}),a.dd(6),a.bc(),a.cc(7,"div",6,7),a.dd(9),a.bc(),a.bc(),a.Xb(10,"div",8),a.bd(11,p,1,1,"div",9),a.bd(12,b,1,1,"div",10),a.bc(),a.bd(13,g,2,1,"div",11),a.bc(),a.bd(14,f,2,0,"ng-template",null,12,a.cd)}if(2&e){const e=a.Rc(15);a.Dc("ngClass",t.modifier),a.Ib(1),a.Dc("ngClass",a.Ic(18,_,!t.forMore,t.forMore)),a.Ib(1),a.Dc("popover",e)("text",null==t.template?null:t.template.name)("editing",t.editingName)("autosize",!1)("allowEmpty",!1)("selectText",!1)("autoFocus",!0)("cancelOnUpdate",!1)("inputModifier","status-template__input-modifier"),a.Ib(2),a.Dc("ngClass",a.Jc(21,v,t.active,!t.forMore,t.forMore))("cuTooltip",t.showToolltip?t.template.name:null),a.Ib(2),a.fd(" ",t.template.name," "),a.Ib(3),a.fd(" ",t.template.name," "),a.Ib(2),a.Dc("ngIf",!t.isFakeTemplate),a.Ib(1),a.Dc("ngIf",!t.isFakeTemplate),a.Ib(1),a.Dc("ngIf",t.templateSaveNeeded&&t.active&&!t.isFakeTemplate)}},directives:[n.o,o.a,s.c,r.a,n.q,l.a,u.a],styles:['.status-template{position:relative}.status-template_vertical .status-template__item{margin:0;display:flex;align-items:center;padding-right:10px}.status-template_vertical .status-template__item .cu-editable{min-width:0}.status-template_vertical .status-template__name{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:30px;color:#343434;border:0;margin:0;padding:0 0 0 10px;flex-grow:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.status-template_vertical .status-template__name{font-family:var(--global-font-support)}}.dark-theme .status-template_vertical .status-template__name{color:#d5d6d7}.status-template_vertical .status-template__name.active{color:#7b68ee;border:0}@supports (--theme-main-color:#7b68ee){.status-template_vertical .status-template__name.active{color:var(--theme-main-color)}}.status-template_vertical .status-template__ellipsis{top:auto!important;right:10px!important}.status-template_vertical .status-template__save{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee;height:28px;border-radius:3px;display:flex;justify-content:center;align-items:center;color:#fff;padding:0 5px;margin-left:5px;z-index:1;position:relative;width:100px;cursor:pointer}@supports (--theme-main-color:#7b68ee){.status-template_vertical .status-template__save{background:var(--theme-main-color)}}.status-template_vertical .status-template__save:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.status-template_vertical .status-template__save:hover{background:var(--theme-main-color-dark)}}.status-template__input-modifier{font-size:14px;line-height:30px;border:1px solid;padding:0 30px 0 10px;border-radius:5px}.status-template__divider{flex-grow:1}.status-template__icon{width:14px;height:14px;margin:0 0 0 10px;cursor:pointer;display:none;fill:#979797}.status-template__icon:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.status-template__icon:hover{fill:var(--theme-main-color)}}.status-template__icon_remove{width:13px;height:13px}.status-template:hover .status-template__icon{display:block}'],encapsulation:2,data:{animation:[c.e]}}),e})()},hqhL:function(e,t,i){"use strict";i.d(t,"a",function(){return x});var a=i("LRne"),c=i("eIep"),n=i("IzEk"),o=i("pLZG"),s=i("lJxs"),r=i("zP0r"),l=i("vkgz"),u=i("c3rA"),d=i("MguC"),m=i("Gj5t"),h=i("fXoL"),p=i("XNiG"),b=i("Jf2N"),g=i("3Pt+"),f=i("ofXK");const _=["nameControl"],v=function(e){return{"cu-form__row_error":e}};let y=(()=>{class e{constructor(e,t){this.cd=e,this.modal=t,this.name="",this.success=new p.a}get success$(){return this.success.asObservable()}ngAfterViewInit(){this.nameControl.nativeElement.focus()}setName(e){this.name=e,this.cd.markForCheck()}submit(){this.success.next(this.name),this.modal.close()}}return e.\u0275fac=function(t){return new(t||e)(h.Wb(h.h),h.Wb(b.a))},e.\u0275cmp=h.Qb({type:e,selectors:[["cu2-nav-favorites-modal"]],viewQuery:function(e,t){if(1&e&&h.jd(_,3,h.m),2&e){let e;h.Qc(e=h.rc())&&(t.nameControl=e.first)}},decls:11,vars:5,consts:function(){let e,t;return e=$localize`:@@common_name␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@cu2-nav-favorites-modal__btn-txt_save-favorite␟93a2056756fa1b32339a57e1a8a13983ea8b9b65␟9181901814727093130: Save favorite `,[[3,"ngSubmit"],[1,"cu-form__row",3,"ngClass"],[1,"cu-form__label"],[1,"cu-form__field"],["required","","type","text","name","name","placeholder",e,1,"cu-form__input",3,"ngModel","ngModelChange"],["nameControl","ngModel"],[1,"cu-form__row"],["type","submit",1,"cu-btn","cu-btn_md",3,"disabled"],[1,"cu-btn__text"],t]},template:function(e,t){if(1&e&&(h.cc(0,"form",0),h.qc("ngSubmit",function(){return t.submit()}),h.cc(1,"div",1),h.cc(2,"div",2),h.dd(3,"Name"),h.bc(),h.cc(4,"div",3),h.cc(5,"input",4,5),h.qc("ngModelChange",function(e){return t.name=e}),h.bc(),h.bc(),h.bc(),h.cc(7,"div",6),h.cc(8,"button",7),h.cc(9,"div",8),h.gc(10,9),h.bc(),h.bc(),h.bc(),h.bc()),2&e){const e=h.Rc(6);h.Ib(1),h.Dc("ngClass",h.Hc(3,v,e.invalid&&(e.dirty||e.touched))),h.Ib(4),h.Dc("ngModel",t.name),h.Ib(3),h.Dc("disabled",e.invalid)}},directives:[g.C,g.q,g.r,f.o,g.c,g.y,g.p,g.s],styles:[""],changeDetection:0}),e})();var k=i("l7P3"),I=i("7G3y"),w=i("GkwO"),T=i("o7Ov");let x=(()=>{class e{constructor(e,t,i){this.modal=e,this.injector=t,this.store=i}addToFavorites(e,t){const{teamId:i}=e;this.openModal(e,t).pipe(Object(c.a)(({viewToSave:e,name:t})=>this.createViewIfNotExists(e,t)),Object(n.a)(1),Object(o.a)(Boolean)).subscribe(({viewToSave:e,name:t})=>{this.createFavorite({team_id:i,view_id:e.id,name:t})})}openModal(e,t){const{projectId:i,categoryId:o}=e,r=Object(m.rb)(t.id);return Object(a.a)(r?null:t.name).pipe(Object(c.a)(e=>e?Object(a.a)(e):this.store.pipe(t.parent.type===d.e.Category?Object(k.select)(Object(u.getCategoryById)(t.parent.id,i)):t.parent.type===d.e.Project?Object(k.select)(Object(u.getProjectById)(i)):t.parent.type===d.e.Subcategory?Object(k.select)(Object(u.getSubcategoryById)(t.parent.id,o,i)):Object(k.select)(Object(u.getTeamById)(t.parent.id)))),Object(n.a)(1),Object(s.a)(e=>e||""),Object(s.a)(e=>e&&e.name?e.name:e),Object(c.a)(e=>{const{instance:i}=this.modal.openComponent(y,this.injector,{title:$localize`:@@common_add-to-favorites:Add to Favorites`,bodyModifier:"cu-modal__body_no-min-height"});return i.setName(e),i.success$.pipe(Object(s.a)(e=>({viewToSave:t,name:e})))}))}createFavorite(e){this.store.dispatch(Object(I.f)({favorite:e}))}createViewIfNotExists(e,t){return Object(m.rb)(e.id)?this.createView(e).pipe(Object(c.a)(()=>this.store.select(w.db)),Object(r.a)(1),Object(s.a)(i=>({viewToSave:(i||[]).find(t=>t.viewType===e.viewType),name:t}))):Object(a.a)({viewToSave:e,name:t})}createView(e){return this.store.select(w.G).pipe(Object(l.a)(t=>this.store.dispatch(new T.Gb(Object(m.D)(Object.assign(Object.assign({},e),{originalPayload:Object.assign(Object.assign({},e.originalPayload),{id:null})}),t),!1,e.viewType))))}}return e.\u0275fac=function(t){return new(t||e)(h.nc(b.a),h.nc(h.t),h.nc(k.Store))},e.\u0275prov=h.Sb({token:e,factory:e.\u0275fac}),e})()},iFN0:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var a=i("fXoL");let c=(()=>{class e{constructor(e,t){this.element=e,this.renderer=t,this.onWindowResize=()=>{this.setFontSize()},this.setFontSize=()=>{setTimeout((()=>{switch(this.htmlElement.offsetWidth>this.htmlParent.offsetWidth){case!0:for(;this.htmlElement.offsetWidth>this.htmlParent.offsetWidth;)this.fontSize=this.fontSize-1,this.renderer.setStyle(this.htmlElement,"fontSize",this.fontSize.toString()+this.fontUnit);break;default:for(;this.htmlElement.offsetWidth===this.htmlParent.offsetWidth&&this.fontSize<this.initialFontSize;)this.fontSize=this.fontSize+1,this.renderer.setStyle(this.htmlElement,"fontSize",this.fontSize.toString()+this.fontUnit)}}).bind(this),10)}}ngOnInit(){this.htmlElement=this.element.nativeElement,this.htmlParent=this.htmlElement.parentElement,this.computed=window.getComputedStyle(this.htmlElement),this.fontSize=Number(this.computed["font-size"].replace(/[^-0-9]/gim,"")),this.fontUnit=this.computed["font-size"].replace(/\d/g,"")}ngAfterViewInit(){this.setFontSize()}ngOnChanges(e){e.content&&this.setFontSize()}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.m),a.Wb(a.H))},e.\u0275dir=a.Rb({type:e,selectors:[["","cuAdjustsFontSizeToFitWidth",""]],hostBindings:function(e,t){1&e&&a.qc("resize",function(){return t.onWindowResize()},!1,a.Tc)},inputs:{content:"content",initialFontSize:"initialFontSize"},features:[a.Gb]}),e})()},jfNZ:function(e,t,i){"use strict";i.d(t,"a",function(){return te});var a=i("h/4x"),c=i("tyNb"),n=i("YaTN"),o=i("aVmG"),s=i("DEUT"),r=i("QzAA"),l=i("gb9A"),u=i("K0KF"),d=i("ofXK"),m=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[d.c,u.a,l.a,r.a,s.a,o.a]]}),e})();var p=i("bx+h"),b=i("OPBM"),g=i("KyjD"),f=i("EQTS"),_=i("M5QM");let v=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[d.c,u.a,_.a,f.a,g.a,r.a,l.a,b.a,o.a]]}),e})(),y=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[d.c,v]]}),e})();var k=i("9jGm"),I=i("BeL+"),w=i("m8R6"),T=i("MIIt"),x=i("l7P3");const C=Object(x.createReducer)({open:!1,currentEntryId:null,currentDuration:null,timeEntriesMap:{},recentIds:[],unsavedEntry:{},unSavedTaskTimeEntriesMap:{},taskTimeEntryGroupMap:{},tagsCacheMap:{},offlineTimeActionIds:[]},Object(x.on)(T.x,(e,{open:t})=>Object.assign(Object.assign({},e),{open:t})),Object(x.on)(T.u,(e,{recentIds:t})=>Object.assign(Object.assign({},e),{recentIds:t})),Object(x.on)(T.v,(e,{taskEntries:t,taskId:i})=>Object.assign(Object.assign({},e),{taskTimeEntryGroupMap:Object.assign(Object.assign({},e.taskTimeEntryGroupMap),{[i]:t})})),Object(x.on)(T.t,(e,{id:t})=>Object.assign(Object.assign({},e),{offlineTimeActionIds:Object(I.a)([...e.offlineTimeActionIds,t])})),Object(x.on)(T.o,(e,{id:t})=>Object.assign(Object.assign({},e),{offlineTimeActionIds:e.offlineTimeActionIds.filter(e=>e!==t)})),Object(x.on)(T.J,(e,{payload:t,taskId:i})=>Object.assign(Object.assign({},e),{unSavedTaskTimeEntriesMap:i?Object.assign(Object.assign({},e.unSavedTaskTimeEntriesMap),{[i]:Object.assign(Object.assign({},e.unSavedTaskTimeEntriesMap[i]),t)}):e.unSavedTaskTimeEntriesMap,unsavedEntry:i?e.unsavedEntry:Object.assign(Object.assign({},e.unsavedEntry),t)})),Object(x.on)(T.g,(e,{tag:t})=>{const i=Object.assign({},Object(w.a)(e.tagsCacheMap,t.name));return Object.assign(Object.assign({},e),{tagsCacheMap:i})}),Object(x.on)(T.I,(e,{tagUpdatePayload:t,teamId:i})=>{const a=Object.assign(Object.assign({},Object(w.a)(e.tagsCacheMap,t.tag.name)),{[t.newName]:Object.assign(Object.assign({},t.tag),{name:t.newName})}),c=Object.entries(e.timeEntriesMap[i]||{}).reduce((e,[i,a])=>{const c=(a.tags||[]).findIndex(e=>e.name===t.tag.name);return e[i]=-1!==c?Object.assign(Object.assign({},a),{tags:a.tags.map((e,i)=>i===c?Object.assign(Object.assign({},t.tag),{name:t.newName}):e)}):a,e},{});return Object.assign(Object.assign({},e),{timeEntriesMap:Object.assign(Object.assign({},e.timeEntriesMap),{[i]:c}),tagsCacheMap:a})}),Object(x.on)(T.w,(e,{tags:t})=>{const i=t.reduce((t,i)=>{const a=e.tagsCacheMap[i.name];return t[i.name]=a?Object.assign(Object.assign({},a),i):i,t},{});return Object.assign(Object.assign({},e),{tagsCacheMap:Object.assign(Object.assign({},e.tagsCacheMap),i)})}),Object(x.on)(T.D,(e,{entries:t,teamId:i})=>{const a=e.timeEntriesMap[i]||{},c=t.reduce((e,t)=>{if(!t)return e;const i=a[t.id];return e[t.id]=i?Object.assign(Object.assign({},i),t):t,e},{});return Object.assign(Object.assign({},e),{timeEntriesMap:Object.assign(Object.assign({},e.timeEntriesMap),{[i]:Object.assign(Object.assign({},a),c)})})}),Object(x.on)(T.i,(e,{entryId:t,teamId:i})=>{const a=Object(w.a)(e.timeEntriesMap[i]||{},t);return Object.assign(Object.assign({},e),{currentEntryId:e.currentEntryId===t?null:e.currentEntryId,currentDuration:e.currentEntryId===t?null:e.currentDuration,timeEntriesMap:Object.assign(Object.assign({},e.timeEntriesMap),{[i]:a})})}),Object(x.on)(T.s,(e,{currentEntry:t})=>Object.assign(Object.assign({},e),{currentEntryId:t?t.id:null,currentDuration:t?t.duration:null,unsavedEntry:null})),Object(x.on)(T.z,e=>Object.assign(Object.assign({},e),{currentEntryId:null,currentDuration:null})));function O(e,t){return C(e,t)}var S=i("DDYz"),D=i("RtrR"),A=i("xWuZ"),j=i("Ll/8"),N=i("c3rA"),E=i("Cfvw"),$=i("EY2u"),P=i("LRne"),L=i("zp1y"),U=i("eIep"),z=i("JIr8"),M=i("vkgz"),R=i("5+tZ"),G=i("Nn/B"),F=i("MguC"),V=i("BR3F"),q=i("m91o"),X=i("fAj1"),B=i("2p4s"),K=i("tk/3"),W=i("irDL"),H=i("76Cs"),Z=i("jJW4");let Q=(()=>{class e{constructor(e,t,i,a,c){this.http=e,this.errorHandler=t,this.store=i,this.taskService=a,this.sharedData=c,this.apiUrl=B.a.apiUrl,this.onDashboardUpdate=new m.o}deleteTimeEntry(e,t,i,a){return this.http.request("delete",`${this.apiUrl}/team/${e}/time_entries/${t}`,{params:{}}).pipe(Object(M.a)(()=>{i&&this.onDashboardUpdate.emit(i),this.sharedData.addUndoItem({description:"Time entry deleted",type:"timeEntryUndo",method:"timeEntryUndo",undoHandler:()=>{this.undoTimeEntryDelete(e,t).subscribe(()=>{a&&(this.store.dispatch(Object(T.l)({task:a,reload:!0})),this.taskService.onTimeTrackChange.emit({task:a,parentId:a.parent})),this.store.dispatch(Object(T.k)())})},deleteAction:!0})}),this.errorHandler.http())}undoTimeEntryDelete(e,t){return this.http.put(`${this.apiUrl}/team/${e}/time_entries/${t}/undo`,{}).pipe(this.errorHandler.http())}}return e.\u0275fac=function(t){return new(t||e)(m.nc(K.b),m.nc(W.a),m.nc(x.Store),m.nc(H.a),m.nc(Z.a))},e.\u0275prov=m.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=i("AeD3");let Y=(()=>{class e{constructor(e,t,i,a,c,n){this.action$=e,this.store=t,this.timeTrackingService=i,this.timeTrackingDeleteService=a,this.taskService=c,this.dataService=n,this.startTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.y),Object(L.a)(this.store.pipe(Object(x.select)(G.c)),this.store.select(D.b),this.store.select(N.getUser),this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t,i,a,c])=>{const n=[];if(t&&n.push(T.A({currentDisconnected:i,fromStart:!0})),i){const t=Object(S.b)(e.payload,a,c);n.push(T.s({currentEntry:t})),n.push(T.C({entries:[t]})),n.push(T.t({id:t.id}))}else n.push(T.r({payload:e.payload,updatePayload:e.updatePayload,current:t}));return Object(E.a)(n)}))),this.stopTimeEntryCheck$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.A),Object(L.a)(this.store.pipe(Object(x.select)(G.c)),this.store.select(D.b)),Object(U.a)(([e,t,i])=>{const a=[];if((t&&!e.fromStart||e.updatePayload)&&!e.currentDisconnected&&a.push(T.z({task:e.task,disconnected:i,updatePayload:e.updatePayload})),t&&i){const e=(new Date).getTime(),i=e-parseInt(t.start,10),c=Object.assign(Object.assign({},t),{end:e.toString(),stop:e,duration:i});a.push(T.t({id:c.id})),a.push(T.C({entries:[c]}))}return Object(E.a)(a)}))),this.stopTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.z),Object(L.a)(this.store.select(N.getSelectedTeamId),this.store.select(N.getUser)),Object(U.a)(([e,t,i])=>e.disconnected?Object(E.a)([]):this.timeTrackingService.stopTimeEntry(t).pipe(Object(U.a)(t=>{const i=[];return e.updatePayload?(i.push(T.E({entryId:e.updatePayload.id,payload:e.updatePayload})),i.push(T.c())):i.push(T.C({entries:[t]})),e.task&&i.push(T.l({task:e.task,reload:!0})),Object(E.a)(i)}),Object(z.a)(this.handleError.bind(this)))))),this.addTimeEntryTags$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.a),Object(L.a)(this.store.pipe(Object(x.select)(G.g))),Object(U.a)(([e,t])=>{const i=[];i.push(T.w({tags:e.tagPayload.tags}));const a=e.tagPayload.time_entry_ids.map(i=>{const a=t[i];return a?Object.assign(Object.assign({},a),{tags:[...a.tags||[],...e.tagPayload.tags]}):null}).filter(e=>!!e);return i.push(T.C({entries:a})),i.push(T.b({tagPayload:e.tagPayload})),Object(E.a)(i)}))),this.sendTimeStartRequest$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.r),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.startTimeEntry(t,e.payload).pipe(Object(U.a)(t=>{const i=[];return e.current&&i.push(T.k()),i.push(T.s({currentEntry:t})),i.push(T.C({entries:[t]})),i.push(T.m()),e.updatePayload&&i.push(T.E({entryId:t.id,payload:e.updatePayload})),Object(E.a)(i)}),Object(z.a)(this.handleError.bind(this)))))),this.getTimeEntryById$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.n),Object(U.a)(e=>this.timeTrackingService.getTimeEntryById(e.teamId,e.id).pipe(Object(U.a)(e=>{const t=[];return t.push(T.C({entries:[e]})),Object(E.a)(t)}),Object(z.a)(this.handleError.bind(this)))))),this.addTimeEntryTagsReq$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.b),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.addTimeEntryTags(t,e.tagPayload).pipe(Object(U.a)(e=>Object(E.a)([])),Object(z.a)(this.handleError.bind(this)))))),this.updateTimeEntryTagName$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.H),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>Object(E.a)([T.I({teamId:t,tagUpdatePayload:e.tagUpdatePayload})])))),this.updateTimeEntriesMap$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.C),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>Object(E.a)([T.D({teamId:t,entries:e.entries})])))),this.updateTimeEntryTagNameState$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.I),Object(U.a)(e=>this.timeTrackingService.editTimeEntryTags(e.teamId,Object.assign(Object.assign({},e.tagUpdatePayload.tag),{new_name:e.tagUpdatePayload.newName})).pipe(Object(U.a)(e=>Object(E.a)([])),Object(z.a)(this.handleError.bind(this)))))),this.fetchTaskTimeEntries$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.l),Object(L.a)(this.store.select(N.getSelectedTeamId),this.store.select(N.getUser)),Object(U.a)(([{task:e,reload:t},i,a])=>this.timeTrackingService.getTimeSpent(e.id).pipe(Object(U.a)(t=>{const c=[],n=[],o=Object(A.a)(Object.entries(t.timeSpent).map(([t,c])=>{const o={id:t,user:c.user,intervalIds:c.intervals.map(e=>e.id)};return t===a.id?n.unshift(o):n.push(o),c.intervals.map(t=>({at:t.start,billable:t.billable,duration:parseInt(t.time,10),id:t.id,start:t.start||t.date_added,source:t.source,end:t.end,tid:e.id,wid:i,user:c.user,tags:t.tags||[],description:t.description,task:{id:e.id,name:e.name,status:e.status}}))}));return c.push(T.C({entries:o})),c.push(T.v({taskEntries:n,taskId:e.id})),Object(E.a)(c)}),Object(M.a)(()=>{t&&this.taskService.onTimeTrackChange.emit({task:e,parentId:e.parent})}),Object(z.a)(this.handleError.bind(this)))))),this.deleteTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.h),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>Object(E.a)([T.i(Object.assign(Object.assign({},e),{teamId:t}))])))),this.deleteTimeEntryState$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.i),Object(U.a)(e=>e.noReq?$.a:this.timeTrackingDeleteService.deleteTimeEntry(e.teamId,e.entryId,e.dashboardUpdate,e.task).pipe(Object(U.a)(()=>{const t=[];return e.task&&t.push(T.l({task:e.task,reload:!0})),Object(E.a)(t)}),Object(z.a)(this.handleError.bind(this)))))),this.updateTimeEntryTagColor$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.F),Object(U.a)(e=>{const t=[],i=Object.assign(Object.assign({},e.tagUpdatePayload.tag),{tag_fg:e.tagUpdatePayload.newColor,tag_bg:e.tagUpdatePayload.newColor});return t.push(T.w({tags:[i]})),t.push(T.G({tagUpdatePayload:e.tagUpdatePayload})),Object(E.a)(t)}))),this.deleteTag$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.f),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>{const i=[];return i.push(T.g({tag:e.tag,teamId:t})),i.push(T.q({tag:e.tag})),Object(E.a)(i)}))),this.removeTimeEntryTagReq$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.q),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.removeTagsFromTimeEntries(t,e.tag?{tags:[e.tag.name]}:{time_entry_ids:[e.tagUpdatePayload.entry.id],tags:[e.tagUpdatePayload.tag.name]}).pipe(Object(U.a)(e=>Object(E.a)([])),Object(z.a)(this.handleError.bind(this)))))),this.updateTimeEntryTagColorReq$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.G),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>{const i=Object.assign(Object.assign({},e.tagUpdatePayload.tag),{tag_fg:e.tagUpdatePayload.newColor,tag_bg:e.tagUpdatePayload.newColor});return this.timeTrackingService.editTimeEntryTags(t,i).pipe(Object(U.a)(e=>Object(E.a)([])),Object(z.a)(this.handleError.bind(this)))}))),this.updateTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.E),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.editTimeEntry(t,e.entryId||e.entry.id,e.payload,e.dashboardUpdate).pipe(Object(U.a)(t=>{const i=[];return i.push(T.C({entries:t})),e.task&&i.push(T.l({task:e.task,reload:!0})),Object(E.a)(i)}),Object(z.a)(this.handleError.bind(this)))))),this.fetchTimeEntryTags$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.m),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.getTimeEntryTags(t).pipe(Object(U.a)(e=>{const t=[];return t.push(T.w({tags:e})),Object(E.a)(t)}),Object(z.a)(this.handleError.bind(this)))))),this.fetchCurrentTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.j),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.getCurrentTimeEntry(t).pipe(Object(U.a)(e=>{const t=[];return t.push(T.s({currentEntry:e})),e&&t.push(T.C({entries:[e]})),Object(E.a)(t)}),Object(z.a)(this.handleError.bind(this)))))),this.checkForUnsavedTimeEntries$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.c),Object(L.a)(this.store.pipe(Object(x.select)(G.f))),Object(U.a)(([e,t])=>{const i=[];return(t||[]).forEach(e=>{const t=Object(S.a)(e);i.push(e.stop?T.e({payload:t}):T.y({payload:t,updatePayload:t})),i.push(T.o({id:e.id})),i.push(T.h({entryId:e.id,noReq:!0}))}),Object(E.a)(i)}))),this.syncTimeTracker$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.B),Object(L.a)(this.store.select(N.getSelectedTeamId),this.store.pipe(Object(x.select)(G.f))),Object(U.a)(([e,t,i])=>t?this.timeTrackingService.getCurrentTimeEntry(t).pipe(Object(U.a)(e=>{const t=[];if(i&&i.length){const a=e?i.findIndex(t=>t.id===e.id):-1;e&&-1!==a&&i[a].end?(t.push(T.A({updatePayload:i[a]})),t.push(T.o({id:e.id}))):t.push(T.c())}else t.push(T.s({currentEntry:e})),e&&t.push(T.C({entries:[e]}));return Object(E.a)(t)}),Object(z.a)(this.handleError.bind(this))):$.a))),this.createTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.e),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(R.a)(([e,t])=>this.timeTrackingService.createTimeEntry(t,e.payload).pipe(Object(R.a)(t=>{const i=[];return e.task&&i.push(T.l({task:e.task,reload:!0})),i.push(T.C({entries:[t]})),e.viewType===F.i.Gantt&&(i.push(V.ganttGetTaskAndUpdate({id:e.task.id})),i.push(V.ganttRefreshList({id:e.task.subcategory.id}))),Object(E.a)(i)}),Object(z.a)(this.handleError.bind(this)))))),this.fetchRecentTimeEntry$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.k),Object(L.a)(this.store.select(N.getSelectedTeamId)),Object(U.a)(([e,t])=>this.timeTrackingService.getRecentTimeEntries(t).pipe(Object(U.a)(e=>{const t=[],i=Object(A.a)(Object.entries(e).map(([e,t])=>t));return t.push(T.C({entries:i})),t.push(T.u({recentIds:i.map(e=>e.id)})),Object(E.a)(t)}),Object(z.a)(this.handleError.bind(this)))))),this.createTaskForTracking$=Object(k.c)(()=>this.action$.pipe(Object(k.d)(T.d),Object(U.a)(e=>this.dataService.createTask(e.subcategoryId,{name:e.name}).pipe(Object(M.a)(e=>this.taskService.taskCreated(e,!1,!0,null,!1)),Object(U.a)(({id:e,task:t})=>{const i=[];return i.push(T.J({payload:{tid:e,task:t}})),Object(E.a)(i)}),Object(z.a)(this.handleError.bind(this))))))}handleError(e){return setTimeout(()=>{this.store.dispatch(new q.d(e))},j.a),Object(P.a)(new q.b(e))}}return e.\u0275fac=function(t){return new(t||e)(m.nc(k.a),m.nc(x.Store),m.nc(X.a),m.nc(Q),m.nc(H.a),m.nc(J.a))},e.\u0275prov=m.Sb({token:e,factory:e.\u0275fac}),e})();var ee=i("bZrb");let te=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[d.c,u.a,x.StoreModule.forFeature("timeTracker",O),k.b.forFeature([Y]),y,p.a,h,n.a,ee.a,c.l,a.a]]}),e})()},jkgf:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var a=i("ofXK"),c=i("1M0N"),n=i("v65A"),o=i("fTg4"),s=i("K0KF"),r=i("RAxo"),l=i("gb9A"),u=i("WQHH"),d=i("6FZh"),m=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,s.a,r.a,l.a,u.a,d.a]]}),e})()},m7PM:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("ofXK"),c=i("PHOl"),n=i("1M0N"),o=i("e6ZX"),s=i("gb9A"),r=i("K0KF"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.a,s.a,r.a]]}),e})()},o59O:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("ofXK"),c=i("csDc"),n=i("K0KF"),o=i("C8uC"),s=i("GtmI"),r=i("fTg4"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.LoaderModule,s.a,r.a]]}),e})()},odS2:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})();var o=i("EDFS"),s=i("y71m"),r=i("3Pt+"),l=i("gb9A"),u=i("dsEp"),d=i("K0KF");let m=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c,u.a,l.a,r.l,d.a]]}),e})(),h=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c,r.l,d.a,l.a]]}),e})();var p=i("mcWp"),b=i("1M0N");let g=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c,p.a,d.a,o.d,s.a,b.a,l.a]]}),e})(),f=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c,p.a,d.a,l.a]]}),e})(),_=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c,r.l,p.a,d.a,l.a]]}),e})();var v=i("KyjD");let y=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c,_,u.a,f,g,h,m,s.a,o.d,v.a,d.a,n,l.a]]}),e})()},oqaq:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("ofXK"),c=i("5FVs"),n=i("K0KF"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a]]}),e})()},pTSn:function(e,t,i){"use strict";i.d(t,"b",function(){return Ic}),i.d(t,"a",function(){return wc});var a=i("o0vL"),c=i("L5Tv"),n=i("fXoL"),o=i("jJQC"),s=i("pLZG"),r=i("IzEk"),l=i("tjT+"),u=i("82+D"),d=i("TqRa"),m=i("lbgh"),h=i("2p4s"),p=i("fujP"),b=i("lE2N"),g=i("rZTY"),f=i("g1Eu"),_=i("yhnL"),v=i("vSu3"),y=i("RwZa"),k=i("0dWf"),I=i("c3rA"),w=i("G2WA"),T=i("jJW4"),x=i("Jf2N"),C=i("l7P3"),O=i("ofXK"),S=i("NsZK"),D=i("FRLQ"),A=i("bNw/"),j=i("j2Cv"),N=i("NQa4"),E=i("UdVN"),$=i("cjvU"),P=i("7eOh"),L=i("loh9"),U=i("vIpm"),z=i("hSRe"),M=i("Uo20"),R=i("T7pm");const G=["basicImageViewer"],F=["basicModalNav"];function V(e,t){if(1&e){const e=n.dc();n.cc(0,"div",2),n.cc(1,"div",3),n.cc(2,"cu-attachment-preview",4),n.qc("onOpen",function(){n.Uc(e);const i=t.index;return n.uc().openViewer(i)}),n.bc(),n.bc(),n.cc(3,"div",5),n.qc("click",function(){n.Uc(e);const i=t.index;return n.uc().openViewer(i)}),n.dd(4),n.bc(),n.bc()}if(2&e){const e=t.$implicit;n.Ib(2),n.Dc("attachment",e),n.Ib(2),n.fd(" ",e.title," ")}}let q=(()=>{class e{constructor(e){this.attachmentsViewerService=e,this.canChangeDescription=!0,this.trackById=Object(o.d)("id")}ngOnInit(){}openViewer(e){this.attachmentsViewerService.onOpen.emit({attachments:this.item.attachments,index:e,taskId:this.taskId,canChangeDescription:this.canChangeDescription,coverImage:this.coverImage,allowComments:!0})}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(M.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-history-attachments"]],viewQuery:function(e,t){if(1&e&&(n.jd(G,1),n.jd(F,1)),2&e){let e;n.Qc(e=n.rc())&&(t.basicImageViewer=e.first),n.Qc(e=n.rc())&&(t.basicModalNav=e.first)}},inputs:{item:"item",taskId:"taskId",canChangeDescription:"canChangeDescription",coverImage:"coverImage"},decls:2,vars:2,consts:[[1,"cu-attachments-tiles-list","cu-attachments-tiles-list_compact"],["class","cu-attachments-tile",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-attachments-tile"],[1,"cu-attachments-tile__content"],["thumbSize","medium",1,"cu-attachments-tile__thumbnail",3,"attachment","onOpen"],[1,"cu-attachments-tile__filename",3,"click"]],template:function(e,t){1&e&&(n.cc(0,"div",0),n.bd(1,V,5,2,"div",1),n.bc()),2&e&&(n.Ib(1),n.Dc("ngForOf",t.item.attachments)("ngForTrackBy",t.trackById))},directives:[O.p,R.a],styles:["[_nghost-%COMP%] {\n        width: 100%;\n      }"],changeDetection:0}),e})();var X=i("Dvla"),B=i("LdyQ"),K=i("MJvn"),W=i("n+1/"),H=i("d0By"),Z=i("plWl"),Q=i("qJ3x"),J=i("DnkJ"),Y=i("kC/4"),ee=i("uKvr"),te=i("EP2k"),ie=i("FrPa"),ae=i("oV/j"),ce=i("sx5D"),ne=i("KX9h"),oe=i("7aZq"),se=i("6d4N"),re=i("kykW"),le=i("OU+x"),ue=i("xog/");let de=(()=>{class e{constructor(e,t){this.commentsService=e,this.helpersService=t}transform(e,t){if(!e)return"";let i=this.commentsService.getCommentText(e);return t>0&&(i=this.helpersService.truncate(i,t)),i}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(le.a),n.Wb(ue.b))},e.\u0275pipe=n.Vb({name:"commentText",type:e,pure:!0}),e})();var me=i("fVUq");function he(e,t){1&e&&(n.ac(0),n.gc(1,27),n.Zb())}const pe=function(e){return{me:e}};function be(e,t){if(1&e){const e=n.dc();n.cc(0,"span",26),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.showAutomationModal(null==t.item.data?null:t.item.data.automation)}),n.vc(1,"itsme"),n.dd(2),n.vc(3,"username"),n.bd(4,he,2,0,"ng-container",5),n.bc()}if(2&e){const e=n.uc(2);n.Ob("task-history-item__name_btn-hover",!e.isSharingApp&&(-1!==(null==e.item.user?null:e.item.user.id)||(null==e.item.data?null:e.item.data.automation)&&(null==e.permissions?null:e.permissions.can_add_automation))),n.Dc("ngClass",n.Hc(11,pe,n.wc(1,7,e.item.user)))("cuUserProfileLink",e.item.user)("automation",null==e.item.data?null:e.item.data.automation),n.Ib(2),n.fd(" ",n.wc(3,9,e.item.user)," "),n.Ib(2),n.Dc("ngIf",null==e.item.data?null:e.item.data.automation)}}function ge(e,t){if(1&e&&(n.ac(0),n.gc(1,30),n.vc(2,"username"),n.Zb()),2&e){const e=n.uc(3);n.Ib(2),n.kc(n.wc(2,1,e.item.user)),n.hc(1)}}function fe(e,t){1&e&&(n.ac(0),n.dd(1,"("),n.ac(2),n.gc(3,31),n.Zb(),n.dd(4,")"),n.Zb())}function _e(e,t){if(1&e&&(n.cc(0,"span",28),n.ac(1),n.gc(2,29),n.Zb(),n.bd(3,ge,3,3,"ng-container",5),n.bd(4,fe,5,0,"ng-container",5),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("ngIf",-1!==(null==e.item.user?null:e.item.user.id)&&!(null!=e.item.data&&e.item.data.from_recur)),n.Ib(1),n.Dc("ngIf",null==e.item.data?null:e.item.data.from_recur)}}function ve(e,t){if(1&e&&(n.ac(0),n.gc(1,32),n.vc(2,"username"),n.Zb()),2&e){const e=n.uc(3);n.Ib(2),n.kc(n.wc(2,1,e.item.user)),n.hc(1)}}function ye(e,t){if(1&e&&(n.cc(0,"span",28),n.dd(1),n.bd(2,ve,3,3,"ng-container",5),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.fd(" ",null==e.item.data?null:e.item.data.initiator," "),n.Ib(1),n.Dc("ngIf",-1!==(null==e.item.user?null:e.item.user.id))}}function ke(e,t){if(1&e&&(n.Xb(0,"span",33),n.vc(1,"trustHTML"),n.vc(2,"async"),n.vc(3,"customFieldNotification")),2&e){const e=n.uc(2);n.Mb("task-history-item__text task-history-item__text_custom-field-notif task-history-item__text_custom-field-notif_",e.item.custom_field.type,""),n.Dc("innerHtml",n.wc(1,4,n.wc(2,6,n.xc(3,8,e.item,null==e.item?null:e.item.custom_field))),n.Vc)}}function Ie(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.gc(2,35),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(+(null==e.item?null:e.item.after)===e.CustomType.MILESTONE?"marked":"unmarked"),n.hc(2)}}function we(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.gc(2,36),n.bc(),n.Xb(3,"cu-tags-view",37),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(null==e.item||null==e.item.after?null:e.item.after.length),n.hc(2),n.Ib(1),n.Dc("readOnly",!0)("tags",null==e.item?null:e.item.after)}}function Te(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.gc(2,38),n.bc(),n.Xb(3,"cu-tags-view",37),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(null==e.item||null==e.item.before?null:e.item.before.length),n.hc(2),n.Ib(1),n.Dc("readOnly",!0)("tags",null==e.item?null:e.item.before)}}function xe(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.dd(2," tracked time "),n.bc(),n.Xb(3,"time-tracking-display",39),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("totalTimeTracked",null==e.item.after?null:e.item.after.time)("start",null==e.item.after?null:e.item.after.start)("displayLabel",!1)}}function Ce(e,t){if(1&e){const e=n.dc();n.cc(0,"a",43),n.qc("click",function(t){n.Uc(e);const i=n.uc(3);return i.openTask(t,null==i.item?null:i.item.task)}),n.vc(1,"cuTaskLink"),n.dd(2),n.bc()}if(2&e){const e=n.uc(3);n.Dc("cuLink",n.wc(1,2,null==e.item?null:e.item.task)),n.Ib(2),n.ed(null==e.item||null==e.item.task?null:e.item.task.name)}}function Oe(e,t){if(1&e&&(n.cc(0,"span",44),n.dd(1),n.ac(2),n.gc(3,45),n.Zb(),n.bc()),2&e){const e=n.uc(3);n.Ib(1),n.fd("","#"+e.item.after," ")}}function Se(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.ac(2),n.gc(3,40),n.Zb(),n.bd(4,Ce,3,4,"a",41),n.bd(5,Oe,4,1,"span",42),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(4),n.Dc("ngIf",null==e.item?null:e.item.task),n.Ib(1),n.Dc("ngIf",!(null!=e.item&&e.item.task))}}function De(e,t){if(1&e){const e=n.dc();n.cc(0,"a",43),n.qc("click",function(t){n.Uc(e);const i=n.uc(4);return i.openTask(t,null==i.item?null:i.item.task)}),n.vc(1,"cuTaskLink"),n.dd(2),n.bc()}if(2&e){const e=n.uc(4);n.Dc("cuLink",n.wc(1,2,null==e.item?null:e.item.task)),n.Ib(2),n.ed(null==e.item||null==e.item.task?null:e.item.task.name)}}function Ae(e,t){if(1&e&&(n.cc(0,"span",34),n.dd(1),n.ac(2),n.gc(3,48),n.Zb(),n.bc()),2&e){const e=n.uc(4);n.Ib(1),n.fd("","#"+e.item.after," ")}}function je(e,t){if(1&e&&(n.cc(0,"span"),n.ac(1),n.gc(2,46),n.Zb(),n.bd(3,De,3,4,"a",41),n.bd(4,Ae,4,1,"span",47),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("ngIf",null==e.item?null:e.item.task),n.Ib(1),n.Dc("ngIf",!(null!=e.item&&e.item.task))}}function Ne(e,t){if(1&e){const e=n.dc();n.cc(0,"a",43),n.qc("click",function(t){n.Uc(e);const i=n.uc(4);return i.openTask(t,null==i.item?null:i.item.task)}),n.vc(1,"cuTaskLink"),n.dd(2),n.bc()}if(2&e){const e=n.uc(4);n.Dc("cuLink",n.wc(1,2,null==e.item?null:e.item.task)),n.Ib(2),n.ed(null==e.item||null==e.item.task?null:e.item.task.name)}}function Ee(e,t){if(1&e&&(n.cc(0,"span",44),n.dd(1),n.ac(2),n.gc(3,50),n.Zb(),n.bc()),2&e){const e=n.uc(4);n.Ib(1),n.fd("","#"+e.item.after," ")}}function $e(e,t){if(1&e&&(n.cc(0,"span"),n.ac(1),n.gc(2,49),n.Zb(),n.bd(3,Ne,3,4,"a",41),n.bd(4,Ee,4,1,"span",42),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("ngIf",null==e.item?null:e.item.task),n.Ib(1),n.Dc("ngIf",!(null!=e.item&&e.item.task))}}function Pe(e,t){if(1&e&&(n.cc(0,"span",34),n.bd(1,je,5,2,"span",5),n.bd(2,$e,5,2,"span",5),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",null==e.item?null:e.item.after),n.Ib(1),n.Dc("ngIf",null==e.item?null:e.item.before)}}const Le=function(){return{"font-weight":"bold"}};function Ue(e,t){if(1&e&&(n.mc(0,51,1),n.Xb(1,"span",53),n.jc()),2&e){const e=n.uc(3);n.Ib(1),n.Dc("ngStyle",n.Gc(3,Le)),n.kc(null==e.item||null==e.item.data?null:e.item.data.subtasks)(null==e.item||null==e.item.data?null:e.item.data.subtasks),n.hc(0)}}function ze(e,t){if(1&e&&(n.mc(0,51,2),n.Xb(1,"span",53),n.jc()),2&e){const e=n.uc(3);n.Ib(1),n.Dc("ngStyle",n.Gc(3,Le)),n.kc(null==e.item||null==e.item.data?null:e.item.data.comments)(null==e.item||null==e.item.data?null:e.item.data.comments),n.hc(0)}}function Me(e,t){if(1&e&&(n.mc(0,51,3),n.Xb(1,"span",53),n.jc()),2&e){const e=n.uc(3);n.Ib(1),n.Dc("ngStyle",n.Gc(3,Le)),n.kc(null==e.item||null==e.item.data?null:e.item.data.checklist_items)(null==e.item||null==e.item.data?null:e.item.data.checklist_items),n.hc(0)}}function Re(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.mc(2,51),n.bd(3,Ue,2,4,"span",52),n.bd(4,ze,2,4,"span",52),n.bd(5,Me,2,4,"span",52),n.jc(),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.subtasks),n.Ib(1),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.comments),n.Ib(1),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.checklist_items)}}function Ge(e,t){if(1&e){const e=n.dc();n.cc(0,"a",43),n.qc("click",function(t){n.Uc(e);const i=n.uc(3);return i.openTask(t,null==i.item?null:i.item.task)}),n.vc(1,"cuTaskLink"),n.dd(2),n.bc()}if(2&e){const e=n.uc(3);n.Dc("cuLink",n.wc(1,2,null==e.item?null:e.item.task)),n.Ib(2),n.ed(null==e.item||null==e.item.task?null:e.item.task.name)}}function Fe(e,t){if(1&e&&(n.cc(0,"span",44),n.dd(1),n.ac(2),n.gc(3,55),n.Zb(),n.bc()),2&e){const e=n.uc(3);n.Ib(1),n.fd("","#"+e.item.after," ")}}function Ve(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.ac(2),n.gc(3,54),n.Zb(),n.bd(4,Ge,3,4,"a",41),n.bd(5,Fe,4,1,"span",42),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(4),n.Dc("ngIf",null==e.item?null:e.item.task),n.Ib(1),n.Dc("ngIf",!(null!=e.item&&e.item.task))}}function qe(e,t){if(1&e){const e=n.dc();n.cc(0,"span",60),n.qc("click",function(){return n.Uc(e),n.uc(3).setShowFullContent()}),n.dd(1,"\xa0"),n.cc(2,"span",61),n.gc(3,62),n.bc(),n.bc()}if(2&e){const e=n.uc(3);n.Ib(3),n.kc(e.item.notifCount),n.hc(3)}}function Xe(e,t){if(1&e){const e=n.dc();n.cc(0,"span",60),n.qc("click",function(){return n.Uc(e),n.uc(3).setShowFullContent()}),n.dd(1,"\xa0"),n.cc(2,"span",61),n.dd(3),n.bc(),n.bc()}if(2&e){const e=n.uc(3);n.Ib(3),n.fd("added ",e.item.checklist_items.length," items")}}function Be(e,t){1&e&&(n.ac(0),n.dd(1,", "),n.Zb())}function Ke(e,t){if(1&e&&(n.cc(0,"span",66),n.bd(1,Be,2,0,"ng-container",5),n.dd(2),n.bc()),2&e){const e=t.$implicit,i=t.index;n.Ib(1),n.Dc("ngIf",i>0),n.Ib(1),n.ed(e)}}function We(e,t){if(1&e&&(n.cc(0,"span",63),n.ac(1),n.gc(2,64),n.Zb(),n.bd(3,Ke,3,2,"span",65),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("ngForOf",e.item.checklistFullContent)("ngForTrackBy",e.trackByValue)}}function He(e,t){1&e&&(n.ac(0),n.dd(1,", "),n.Zb())}function Ze(e,t){if(1&e&&(n.cc(0,"span",66),n.bd(1,He,2,0,"ng-container",5),n.dd(2),n.bc()),2&e){const e=t.$implicit,i=t.index;n.Ib(1),n.Dc("ngIf",i>0),n.Ib(1),n.ed(e.name)}}function Qe(e,t){if(1&e&&(n.cc(0,"span",63),n.dd(1," added items "),n.bd(2,Ze,3,2,"span",65),n.bc()),2&e){const e=n.uc(3);n.Ib(2),n.Dc("ngForOf",e.item.checklist_items)("ngForTrackBy",e.trackByValue)}}function Je(e,t){if(1&e&&(n.cc(0,"span",63),n.ac(1),n.gc(2,67),n.Zb(),n.cc(3,"span",66),n.dd(4),n.bc(),n.bc()),2&e){const e=n.uc(3);n.Ib(4),n.fd(" ",e.item.checklistFullContent[0]," ")}}function Ye(e,t){if(1&e&&(n.cc(0,"span",66),n.dd(1),n.bc()),2&e){const e=n.uc(4);n.Ib(1),n.fd(" ",null==e.item.checklist_items[0]?null:e.item.checklist_items[0].name," ")}}function et(e,t){if(1&e&&(n.cc(0,"span",63),n.dd(1," added item "),n.bd(2,Ye,2,1,"span",68),n.bc()),2&e){const e=n.uc(3);n.Ib(2),n.Dc("ngIf",null==e.item.checklist_items?null:e.item.checklist_items.length)}}function tt(e,t){if(1&e&&(n.cc(0,"span",34),n.bd(1,qe,4,1,"span",56),n.bd(2,Xe,4,1,"span",56),n.bd(3,We,4,2,"span",57),n.bd(4,Qe,3,2,"span",57),n.bd(5,Je,5,1,"span",57),n.bd(6,et,3,1,"span",57),n.cc(7,"span"),n.gc(8,58),n.bc(),n.cc(9,"span",59),n.dd(10),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",!e.showFullContent&&e.item.notifCount>1),n.Ib(1),n.Dc("ngIf",!e.showFullContent&&null==e.item.notifCount&&(null==e.item.checklist_items?null:e.item.checklist_items.length)>1),n.Ib(1),n.Dc("ngIf",e.showFullContent&&e.item.notifCount>1),n.Ib(1),n.Dc("ngIf",e.showFullContent&&null==e.item.notifCount&&(null==e.item.checklist_items?null:e.item.checklist_items.length)>1),n.Ib(1),n.Dc("ngIf",e.item.notifCount<=1),n.Ib(1),n.Dc("ngIf",null==e.item.notifCount&&(null==e.item.checklist_items||(null==e.item.checklist_items?null:e.item.checklist_items.length)<=1)),n.Ib(3),n.Dc("ngStyle",n.Gc(8,Le)),n.Ib(1),n.fd(" ",e.item.checklist.name," ")}}function it(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.mc(2,69),n.Xb(3,"span",70),n.vc(4,"itsme"),n.vc(5,"username"),n.Xb(6,"span",59),n.Xb(7,"span",71),n.jc(),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("ngClass",n.Hc(11,pe,n.wc(4,7,e.item.checklist_item.assignee)))("cuUserProfileLink",null==e.item?null:e.item.after),n.Ib(3),n.Dc("ngStyle",n.Gc(13,Le)),n.Ib(1),n.Dc("ngStyle",n.Gc(14,Le)),n.kc(n.wc(5,9,null==e.item?null:e.item.after))(null==e.item||null==e.item.checklist_item?null:e.item.checklist_item.name)(null==e.item||null==e.item.checklist?null:e.item.checklist.name),n.hc(2)}}function at(e,t){if(1&e&&(n.cc(0,"span",34),n.cc(1,"span"),n.mc(2,72),n.Xb(3,"span",59),n.Xb(4,"span",71),n.jc(),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("ngStyle",n.Gc(5,Le)),n.Ib(1),n.Dc("ngStyle",n.Gc(6,Le)),n.kc("true"==e.item.after?"checked":"unchecked")(null==e.item||null==e.item.checklist_item?null:e.item.checklist_item.name)(null==e.item||null==e.item.checklist?null:e.item.checklist.name),n.hc(2)}}const ct=function(e){return{fill:e}};function nt(e,t){if(1&e&&(n.mc(0,73,1),n.cc(1,"div",74),n.Xb(2,"div",75),n.bc(),n.jc()),2&e){const e=n.uc(4);n.Ib(2),n.Dc("icon","priorities")("ngStyle",n.Hc(3,ct,e.item.after.color)),n.kc(e.item.after.priority),n.hc(0)}}function ot(e,t){1&e&&(n.mc(0,73,2),n.Xb(1,"div",74),n.jc())}function st(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,73),n.cc(2,"div",74),n.Xb(3,"div",75),n.bc(),n.bd(4,nt,3,5,"div",76),n.bd(5,ot,2,0,"div",76),n.jc(),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("icon","priorities")("ngStyle",n.Hc(5,ct,e.item.before.color)),n.Ib(1),n.Dc("ngIf",e.item.after),n.Ib(1),n.Dc("ngIf",!e.item.after),n.kc(e.item.before.priority),n.hc(1)}}function rt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,77),n.cc(2,"div",74),n.Xb(3,"div",75),n.bc(),n.jc(),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("icon","priorities")("ngStyle",n.Hc(3,ct,e.item.after.color)),n.kc(e.item.after.priority),n.hc(1)}}function lt(e,t){if(1&e&&(n.cc(0,"span",34),n.bd(1,st,6,7,"span",5),n.bd(2,rt,4,5,"span",5),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",e.item.before),n.Ib(1),n.Dc("ngIf",!e.item.before&&e.item.after)}}const ut=function(e,t){return{color:e,"border-color":t}};function dt(e,t){if(1&e&&(n.cc(0,"span",34),n.mc(1,78),n.cc(2,"div",79),n.Xb(3,"div",80),n.bc(),n.Xb(4,"span"),n.cc(5,"div",79),n.Xb(6,"div",80),n.bc(),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("ngStyle",n.Ic(4,ut,e.item.before.color,e.statusBorderColors.before)),n.Ib(3),n.Dc("ngStyle",n.Ic(7,ut,e.item.after.color,e.statusBorderColors.after)),n.kc(e.item.before.status)(e.item.after.status),n.hc(1)}}function mt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,81),n.Xb(2,"span",70),n.vc(3,"itsme"),n.vc(4,"username"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.Dc("ngClass",n.Hc(7,pe,n.wc(3,3,e.item.before)))("cuUserProfileLink",e.item.before),n.Ib(2),n.kc(n.wc(4,5,e.item.before)),n.hc(1)}}function ht(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,82),n.Xb(2,"span",70),n.vc(3,"itsme"),n.vc(4,"username"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.Dc("ngClass",n.Hc(7,pe,n.wc(3,3,e.item.after)))("cuUserProfileLink",e.item.after),n.Ib(2),n.kc(n.wc(4,5,e.item.after)),n.hc(1)}}function pt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,83),n.Xb(2,"span",28),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(e.item.before.name),n.hc(1)}}function bt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,84),n.Xb(2,"span",28),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(e.item.after.name),n.hc(1)}}function gt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,85),n.Xb(2,"span",70),n.vc(3,"itsme"),n.vc(4,"username"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.Dc("ngClass",n.Hc(7,pe,n.wc(3,3,e.item.before)))("cuUserProfileLink",e.item.before),n.Ib(2),n.kc(n.wc(4,5,e.item.before)),n.hc(1)}}function ft(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,86),n.Xb(2,"span",70),n.vc(3,"itsme"),n.vc(4,"username"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.Dc("ngClass",n.Hc(7,pe,n.wc(3,3,e.item.after)))("cuUserProfileLink",e.item.after),n.Ib(2),n.kc(n.wc(4,5,e.item.after)),n.hc(1)}}function _t(e,t){if(1&e&&(n.cc(0,"span"),n.gc(1,87),n.vc(2,"timeTracked"),n.vc(3,"async"),n.vc(4,"async"),n.bc()),2&e){const e=n.uc(3);let t=null;n.Ib(4),n.kc(null!=e.item&&null!=e.item.data&&e.item.data.assignee&&e.item.after?n.zc(2,1,e.item.after,null==(t=n.wc(3,6,e.sharedData.compatCurrentTeam$))?null:t.hours_per_day,!1,null==(t=n.wc(4,8,e.sharedData.compatCurrentTeam$))?null:t.time_estimate_display_hours):e.item.data?e.item.data.time_estimate_string:e.item.after),n.hc(1)}}function vt(e,t){1&e&&(n.cc(0,"span"),n.gc(1,88),n.bc())}function yt(e,t){if(1&e&&(n.cc(0,"span"),n.gc(1,89),n.vc(2,"username"),n.bc()),2&e){const e=n.uc(3);n.Ib(2),n.kc(n.wc(2,1,e.item.data.assignee)),n.hc(1)}}function kt(e,t){if(1&e&&(n.cc(0,"span"),n.bd(1,_t,5,10,"span",5),n.bd(2,vt,2,0,"span",5),n.bd(3,yt,3,3,"span",5),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",e.item.after&&"0"!==e.item.after),n.Ib(1),n.Dc("ngIf",!e.item.after||"0"===e.item.after),n.Ib(1),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.assignee)}}function It(e,t){if(1&e&&(n.mc(0,90,1),n.Xb(1,"span"),n.vc(2,"username"),n.jc()),2&e){const e=n.uc(3);n.Ib(2),n.kc(n.wc(2,1,e.item.data.assignee)),n.hc(0)}}function wt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,90),n.Xb(2,"span"),n.bd(3,It,3,3,"span",5),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(3),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.assignee),n.kc(e.item.before&&"0"!==e.item.before?e.item.before:"-")(e.item.after&&"0"!==e.item.after?e.item.after:"-"),n.hc(1)}}function Tt(e,t){1&e&&(n.cc(0,"span"),n.gc(1,91),n.bc())}function xt(e,t){if(1&e&&(n.cc(0,"span",92),n.cc(1,"span",93),n.ac(2),n.gc(3,94),n.Zb(),n.dd(4,": "),n.bc(),n.Xb(5,"span",95),n.vc(6,"diff"),n.bc()),2&e){const e=n.uc(2);n.Ib(5),n.Dc("innerHtml",n.xc(6,1,e.item.after,e.item.before),n.Vc)}}function Ct(e,t){1&e&&n.gc(0,96,2)}function Ot(e,t){1&e&&n.gc(0,96,4)}const St=function(e){return{task:e}};function Dt(e,t){if(1&e&&(n.mc(0,96,3),n.ac(1),n.bd(2,Ot,1,0,"ng-template",97),n.Zb(),n.jc()),2&e){const e=n.uc(4),t=n.Rc(22);n.Ib(2),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Hc(2,St,null==e.item||null==e.item.data?null:e.item.data.recurred_task))}}const At=function(e,t){return{task:e,disabled:t}};function jt(e,t){if(1&e&&(n.mc(0,96,1),n.ac(1),n.bd(2,Ct,1,0,"ng-template",97),n.bd(3,Dt,3,4,"ng-container",5),n.Zb(),n.jc()),2&e){const e=n.uc(3),t=n.Rc(22);n.Ib(2),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(3,At,null==e.item||null==e.item.data?null:e.item.data.task,null==e.item||null==e.item.data?null:e.item.data.from_template)),n.Ib(1),n.Dc("ngIf",(null==e.item.data?null:e.item.data.from_recur)&&(null==e.item.data?null:e.item.data.task_copied)!==(null==e.item.data?null:e.item.data.task_that_recurred))}}function Nt(e,t){if(1&e&&(n.cc(0,"span",34),n.mc(1,96),n.bd(2,jt,4,6,"ng-container",5),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.Dc("ngIf",null==e.item.data?null:e.item.data.task_copied)}}function Et(e,t){1&e&&(n.mc(0,98,1),n.Yb(1),n.jc())}function $t(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,98),n.bd(2,Et,2,0,"ng-container",5),n.Xb(3,"span"),n.Xb(4,"span"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.Dc("ngIf",null==e.team?null:e.team.tasks_in_multiple_lists),n.Ib(2),n.kc(e.item.before.name)(e.item.after.name),n.hc(1)}}function Pt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,99),n.Xb(2,"span"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(e.item.after.name),n.hc(1)}}function Lt(e,t){if(1&e&&(n.cc(0,"span"),n.mc(1,100),n.Xb(2,"span"),n.jc(),n.bc()),2&e){const e=n.uc(2);n.Ib(2),n.kc(e.item.before.name),n.hc(1)}}function Ut(e,t){if(1&e&&(n.cc(0,"span"),n.gc(1,101),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.item.after.name),n.hc(1)}}function zt(e,t){if(1&e&&(n.cc(0,"span"),n.gc(1,102),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.item.before.id)(e.item.before.name),n.hc(1)}}function Mt(e,t){if(1&e&&(n.cc(0,"span"),n.gc(1,103),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.item.data.name),n.hc(1)}}function Rt(e,t){1&e&&(n.ac(0),n.dd(1,"("),n.ac(2),n.gc(3,110),n.Zb(),n.dd(4,")"),n.Zb())}function Gt(e,t){if(1&e&&(n.cc(0,"span",106),n.cc(1,"span",34),n.ac(2),n.gc(3,107),n.Zb(),n.bd(4,Rt,5,0,"ng-container",5),n.ac(5),n.gc(6,108),n.Zb(),n.bc(),n.Xb(7,"cu-datetime",109),n.bc()),2&e){const e=n.uc(3);n.Ib(4),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.fromGoogleCalendar),n.Ib(3),n.Dc("date",e.item.after)("showTime",null==e.item||null==e.item.data?null:e.item.data.due_date_time)("noHighlight",!0)}}function Ft(e,t){1&e&&(n.ac(0),n.dd(1,"("),n.ac(2),n.gc(3,113),n.Zb(),n.dd(4,")"),n.Zb())}function Vt(e,t){if(1&e&&(n.cc(0,"span",106),n.cc(1,"span",34),n.ac(2),n.gc(3,111),n.Zb(),n.bd(4,Ft,5,0,"ng-container",5),n.ac(5),n.gc(6,112),n.Zb(),n.bc(),n.Xb(7,"cu-datetime",109),n.bc()),2&e){const e=n.uc(3);n.Ib(4),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.fromGoogleCalendar),n.Ib(3),n.Dc("date",e.item.before)("showTime",null==e.item||null==e.item.data?null:e.item.data.old_due_date_time)("noHighlight",!0)}}function qt(e,t){1&e&&(n.ac(0),n.dd(1,"("),n.ac(2),n.gc(3,117),n.Zb(),n.dd(4,")"),n.Zb())}function Xt(e,t){if(1&e&&(n.cc(0,"span",106),n.cc(1,"span",34),n.ac(2),n.gc(3,114),n.Zb(),n.bd(4,qt,5,0,"ng-container",5),n.ac(5),n.gc(6,115),n.Zb(),n.bc(),n.Xb(7,"cu-datetime",109),n.cc(8,"span",34),n.gc(9,116),n.bc(),n.Xb(10,"cu-datetime",109),n.bc()),2&e){const e=n.uc(3);n.Ib(4),n.Dc("ngIf",null==e.item||null==e.item.data?null:e.item.data.fromGoogleCalendar),n.Ib(3),n.Dc("date",e.item.before)("showTime",null==e.item||null==e.item.data?null:e.item.data.old_due_date_time)("noHighlight",!0),n.Ib(3),n.Dc("date",e.item.after)("showTime",null==e.item||null==e.item.data?null:e.item.data.due_date_time)("noHighlight",!0)}}function Bt(e,t){if(1&e&&(n.cc(0,"span",104),n.bd(1,Gt,8,4,"span",105),n.bd(2,Vt,8,4,"span",105),n.bd(3,Xt,11,7,"span",105),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",null===e.item.before),n.Ib(1),n.Dc("ngIf",!e.item.after),n.Ib(1),n.Dc("ngIf",e.item.before&&e.item.after)}}function Kt(e,t){if(1&e&&(n.cc(0,"span",106),n.cc(1,"span",34),n.gc(2,118),n.bc(),n.Xb(3,"cu-datetime",109),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("date",e.item.after)("showTime",null==e.item||null==e.item.data?null:e.item.data.start_date_time)("noHighlight",!0)}}function Wt(e,t){if(1&e&&(n.cc(0,"span",106),n.cc(1,"span",34),n.gc(2,119),n.bc(),n.Xb(3,"cu-datetime",109),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("date",e.item.before)("showTime",null==e.item||null==e.item.data?null:e.item.data.old_start_date_time)("noHighlight",!0)}}function Ht(e,t){if(1&e&&(n.cc(0,"span",106),n.cc(1,"span",34),n.gc(2,120),n.bc(),n.Xb(3,"cu-datetime",109),n.cc(4,"span",34),n.gc(5,121),n.bc(),n.Xb(6,"cu-datetime",109),n.bc()),2&e){const e=n.uc(3);n.Ib(3),n.Dc("date",e.item.before)("showTime",null==e.item||null==e.item.data?null:e.item.data.old_start_date_time)("noHighlight",!0),n.Ib(3),n.Dc("date",e.item.after)("showTime",null==e.item||null==e.item.data?null:e.item.data.start_date_time)("noHighlight",!0)}}function Zt(e,t){if(1&e&&(n.cc(0,"span",104),n.bd(1,Kt,4,3,"span",105),n.bd(2,Wt,4,3,"span",105),n.bd(3,Ht,7,6,"span",105),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",null===e.item.before),n.Ib(1),n.Dc("ngIf",!e.item.after),n.Ib(1),n.Dc("ngIf",e.item.before&&e.item.after)}}const Qt=function(e){return{color:e}};function Jt(e,t){if(1&e&&(n.mc(0,124,1),n.ac(1),n.Xb(2,"cu-datetime",109),n.Xb(3,"span",125),n.Zb(),n.jc()),2&e){const e=n.uc(3);n.Ib(2),n.Dc("date",null==e.item.data||null==e.item.data.new_due_date?null:e.item.data.new_due_date.due_date)("showTime",null==e.item.data||null==e.item.data.new_due_date?null:e.item.data.new_due_date.due_date_time)("noHighlight",!0),n.Ib(1),n.Dc("ngStyle",n.Hc(5,Qt,null==e.item.data?null:e.item.data.new_status.color)),n.kc(null==e.item.data?null:e.item.data.new_status.status),n.hc(0)}}function Yt(e,t){if(1&e&&(n.cc(0,"span",122),n.Xb(1,"div",123),n.ac(2),n.mc(3,124),n.bd(4,Jt,4,7,"ng-container",5),n.jc(),n.Zb(),n.bc()),2&e){const e=n.uc(2);n.Ib(4),n.Dc("ngIf",(null==e.item.data?null:e.item.data.new_due_date)&&(null==e.item.data?null:e.item.data.new_status))}}function ei(e,t){if(1&e&&(n.ac(0),n.mc(1,126),n.Xb(2,"cu-recurring-view",127),n.vc(3,"async"),n.jc(),n.Zb()),2&e){const e=n.uc(3),t=n.Rc(20);let i=null;n.Ib(2),n.Dc("itemTemplate",t)("options",e.item.after)("openOnClick",!0)("showIcon",!1)("showLabel",!1)("showFull",!0)("readOnly",!0)("statuses",e.statuses)("dueDate",e.dueDateEnabled)("teamId",null==(i=n.wc(3,10,e.sharedData.compatCurrentTeam$))?null:i.id)}}function ti(e,t){if(1&e&&(n.ac(0),n.mc(1,128),n.Xb(2,"cu-recurring-view",127),n.vc(3,"async"),n.jc(),n.Zb()),2&e){const e=n.uc(3),t=n.Rc(20);let i=null;n.Ib(2),n.Dc("itemTemplate",t)("options",e.item.after)("openOnClick",!0)("showIcon",!1)("showLabel",!1)("showFull",!0)("readOnly",!0)("statuses",e.statuses)("dueDate",e.dueDateEnabled)("teamId",null==(i=n.wc(3,10,e.sharedData.compatCurrentTeam$))?null:i.id)}}function ii(e,t){if(1&e&&(n.ac(0),n.mc(1,129),n.Xb(2,"cu-recurring-view",127),n.vc(3,"async"),n.jc(),n.Zb()),2&e){const e=n.uc(3),t=n.Rc(20);let i=null;n.Ib(2),n.Dc("itemTemplate",t)("options",e.item.before)("openOnClick",!0)("showIcon",!1)("showLabel",!1)("showFull",!0)("readOnly",!0)("statuses",e.statuses)("dueDate",e.dueDateEnabled)("teamId",null==(i=n.wc(3,10,e.sharedData.compatCurrentTeam$))?null:i.id)}}function ai(e,t){if(1&e&&(n.cc(0,"span"),n.bd(1,ei,4,12,"ng-container",5),n.bd(2,ti,4,12,"ng-container",5),n.bd(3,ii,4,12,"ng-container",5),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",e.item.after&&!e.item.before),n.Ib(1),n.Dc("ngIf",e.item.after&&e.item.before),n.Ib(1),n.Dc("ngIf",!e.item.after&&e.item.before)}}function ci(e,t){if(1&e&&(n.ac(0),n.mc(1,130),n.Xb(2,"span"),n.vc(3,"recurringToText"),n.vc(4,"taskRecurringToOptions"),n.jc(),n.Zb()),2&e){const e=n.uc(3);n.Ib(4),n.kc(n.wc(3,1,n.wc(4,3,e.item.data))),n.hc(1)}}function ni(e,t){if(1&e&&(n.ac(0),n.mc(1,131),n.Xb(2,"span"),n.vc(3,"recurringToText"),n.vc(4,"taskRecurringToOptions"),n.jc(),n.Zb()),2&e){const e=n.uc(3);n.Ib(4),n.kc(n.wc(3,1,n.wc(4,3,e.item.data))),n.hc(1)}}function oi(e,t){if(1&e&&(n.cc(0,"span"),n.bd(1,ci,5,5,"ng-container",5),n.bd(2,ni,5,5,"ng-container",5),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",e.item.data),n.Ib(1),n.Dc("ngIf",!e.item.data)}}function si(e,t){1&e&&(n.cc(0,"span"),n.gc(1,132),n.bc())}function ri(e,t){if(1&e&&(n.mc(0,133,1),n.ac(1),n.Xb(2,"cu-datetime",109),n.Zb(),n.jc()),2&e){const e=n.uc(3);n.Ib(2),n.Dc("date",null==e.item.data||null==e.item.data.new_due_date?null:e.item.data.new_due_date.due_date)("showTime",null==e.item.data||null==e.item.data.new_due_date?null:e.item.data.new_due_date.due_date_time)("noHighlight",!0)}}function li(e,t){if(1&e&&(n.cc(0,"span",122),n.Xb(1,"div",123),n.ac(2),n.mc(3,133),n.bd(4,ri,3,3,"ng-container",5),n.jc(),n.Zb(),n.bc()),2&e){const e=n.uc(2);n.Ib(4),n.Dc("ngIf",null==e.item.data?null:e.item.data.new_due_date)}}function ui(e,t){}function di(e,t){if(1&e&&(n.cc(0,"span",134),n.ac(1),n.gc(2,135),n.Zb(),n.dd(3,": "),n.bd(4,ui,0,0,"ng-template",97),n.bc()),2&e){const e=n.uc(2),t=n.Rc(22);n.Ib(4),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Hc(2,St,null==e.item||null==e.item.data?null:e.item.data.task))}}function mi(e,t){if(1&e&&(n.cc(0,"span",134),n.gc(1,136),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.kc(null==e.item||null==e.item.data||null==e.item.data.recur_data?null:e.item.data.recur_data.recur_on_status),n.hc(1)}}function hi(e,t){if(1&e){const e=n.dc();n.cc(0,"span"),n.ac(1),n.gc(2,137),n.Zb(),n.dd(3,": "),n.cc(4,"a",138),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.onHighlightComment.emit(t.item.comment)}),n.dd(5),n.vc(6,"commentText"),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(2),n.kc(e.item.after?"resolved":"reopened"),n.hc(2),n.Ib(2),n.Dc("href",e.commentUrl,n.Xc),n.Ib(1),n.ed(n.xc(6,3,null==e.item.comment?null:e.item.comment.comment,30))}}function pi(e,t){if(1&e){const e=n.dc();n.cc(0,"span"),n.ac(1),n.gc(2,139),n.Zb(),n.dd(3,": "),n.cc(4,"a",138),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.onHighlightComment.emit(t.item.comment)}),n.dd(5),n.vc(6,"commentText"),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(4),n.Dc("href",e.commentUrl,n.Xc),n.Ib(1),n.ed(n.xc(6,2,null==e.item.comment?null:e.item.comment.comment,30))}}function bi(e,t){1&e&&n.Xb(0,"div",143),2&e&&n.Dc("icon","thumbs-up")}function gi(e,t){if(1&e&&(n.Xb(0,"div",144),n.vc(1,"emojiUnifiedToStyles")),2&e){const e=n.uc(3);n.Dc("ngStyle",n.wc(1,1,e.item.data.reaction))}}function fi(e,t){if(1&e){const e=n.dc();n.cc(0,"span"),n.bd(1,bi,1,1,"div",140),n.bd(2,gi,2,3,"div",141),n.ac(3),n.gc(4,142),n.Zb(),n.dd(5,": "),n.cc(6,"a",138),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.onHighlightComment.emit(t.item.comment)}),n.dd(7),n.vc(8,"commentText"),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",!e.reactionsClickappEnabled),n.Ib(1),n.Dc("ngIf",e.reactionsClickappEnabled),n.Ib(4),n.Dc("href",e.commentUrl,n.Xc),n.Ib(1),n.ed(n.xc(8,4,null==e.item.comment?null:e.item.comment.comment,30))}}function _i(e,t){}const vi=function(e,t,i){return{integration:"Gitlab",branchUrl:e,repoName:t,repoUrl:i}};function yi(e,t){if(1&e&&(n.cc(0,"span"),n.bd(1,_i,0,0,"ng-template",97),n.bc()),2&e){const e=n.uc(2),t=n.Rc(26);n.Ib(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,vi,(e.item.before||e.item.after).url,(e.item.before||e.item.after).gl_repo_slug,(e.item.before||e.item.after).repo_url))}}function ki(e,t){}const Ii=function(e,t,i){return{integration:"GitHub",branchUrl:e,repoName:t,repoUrl:i}};function wi(e,t){if(1&e&&(n.cc(0,"span"),n.bd(1,ki,0,0,"ng-template",97),n.bc()),2&e){const e=n.uc(2),t=n.Rc(26);n.Ib(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,Ii,"https://github.com/"+(e.item.before||e.item.after).repo_owner+"/"+(e.item.before||e.item.after).repo_name+"/tree/"+(e.item.before||e.item.after).branch_name,(e.item.before||e.item.after).repo_name,"https://github.com/"+(e.item.before||e.item.after).repo_owner+"/"+(e.item.before||e.item.after).repo_name))}}function Ti(e,t){}const xi=function(e,t){return{integration:"Bitbucket",branchUrl:e,repoName:t}};function Ci(e,t){if(1&e&&(n.cc(0,"span"),n.bd(1,Ti,0,0,"ng-template",97),n.bc()),2&e){const e=n.uc(2),t=n.Rc(26);n.Ib(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,xi,(e.item.before||e.item.after).url,(e.item.before||e.item.after).bb_repo_name))}}function Oi(e,t){1&e&&(n.cc(0,"span"),n.gc(1,145),n.bc())}function Si(e,t){if(1&e){const e=n.dc();n.cc(0,"span"),n.mc(1,146),n.cc(2,"a",147),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.onAttachmentClick.emit({id:null==t.item.data?null:t.item.data.attachment_id})}),n.bc(),n.jc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(2),n.kc((null==e.item.comment||null==e.item.comment.attachment_parent?null:e.item.comment.attachment_parent.title)||(null==e.item.data?null:e.item.data.attachment_id)),n.hc(1)}}function Di(e,t){if(1&e&&(n.cc(0,"div",14),n.cc(1,"div",15),n.bd(2,be,5,13,"span",16),n.bd(3,_e,5,2,"span",17),n.bd(4,ye,3,2,"span",17),n.bd(5,ke,4,11,"span",18),n.bd(6,Ie,3,1,"span",19),n.bd(7,we,4,3,"span",19),n.bd(8,Te,4,3,"span",19),n.bd(9,xe,4,3,"span",19),n.bd(10,Se,6,2,"span",19),n.bd(11,Pe,3,2,"span",19),n.bd(12,Re,6,3,"span",19),n.bd(13,Ve,6,2,"span",19),n.bd(14,tt,11,9,"span",19),n.bd(15,it,8,15,"span",19),n.bd(16,at,5,7,"span",19),n.bd(17,lt,3,2,"span",19),n.bd(18,dt,7,10,"span",19),n.bd(19,mt,5,9,"span",20),n.bd(20,ht,5,9,"span",20),n.bd(21,pt,3,1,"span",20),n.bd(22,bt,3,1,"span",20),n.bd(23,gt,5,9,"span",20),n.bd(24,ft,5,9,"span",20),n.bd(25,kt,4,3,"span",20),n.bd(26,wt,4,3,"span",20),n.bd(27,Tt,2,0,"span",20),n.bd(28,xt,7,4,"span",21),n.bd(29,Nt,3,1,"span",19),n.bd(30,$t,5,3,"span",20),n.bd(31,Pt,3,1,"span",20),n.bd(32,Lt,3,1,"span",20),n.bd(33,Ut,2,1,"span",20),n.bd(34,zt,2,2,"span",20),n.bd(35,Mt,2,1,"span",20),n.bd(36,Bt,4,3,"span",22),n.bd(37,Zt,4,3,"span",22),n.bd(38,Yt,5,1,"span",23),n.bd(39,ai,4,3,"span",20),n.bd(40,oi,3,2,"span",20),n.bd(41,si,2,0,"span",20),n.bd(42,li,5,1,"span",23),n.bd(43,di,5,4,"span",24),n.bd(44,mi,2,1,"span",24),n.bd(45,hi,7,6,"span",20),n.bd(46,pi,7,5,"span",20),n.bd(47,fi,9,7,"span",20),n.bd(48,yi,2,6,"span",20),n.bd(49,wi,2,6,"span",20),n.bd(50,Ci,2,5,"span",20),n.bd(51,Oi,2,0,"span",20),n.bd(52,Si,3,1,"span",20),n.bc(),n.cc(53,"div",25),n.vc(54,"trueDate"),n.dd(55),n.vc(56,"timeAgo"),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Ob("task-history-item__content_custom-field-content","custom_field"===e.item.field),n.Dc("ngSwitch",e.item.field),n.Ib(1),n.Dc("ngIf","resolved_items"!==e.item.field&&"copy_task_recur"!==e.item.field&&"recurrence_missed"!==e.item.field&&!(null!=e.item.data&&e.item.data.from_recur)&&"GitLab"!==(null==e.item.data?null:e.item.data.initiator)&&"GitHub"!==(null==e.item.data?null:e.item.data.initiator)),n.Ib(1),n.Dc("ngIf","resolved_items"===e.item.field||(null==e.item.data?null:e.item.data.from_recur)),n.Ib(1),n.Dc("ngIf","GitLab"===(null==e.item.data?null:e.item.data.initiator)||"GitHub"===(null==e.item.data?null:e.item.data.initiator)),n.Ib(1),n.Dc("ngSwitchCase","custom_field"),n.Ib(1),n.Dc("ngSwitchCase","custom_type"),n.Ib(1),n.Dc("ngSwitchCase","tag"),n.Ib(1),n.Dc("ngSwitchCase","tag_removed"),n.Ib(1),n.Dc("ngSwitchCase","time_spent"),n.Ib(1),n.Dc("ngSwitchCase","dependency_of"),n.Ib(1),n.Dc("ngSwitchCase","linked_task"),n.Ib(1),n.Dc("ngSwitchCase","resolved_items"),n.Ib(1),n.Dc("ngSwitchCase","depends_on"),n.Ib(1),n.Dc("ngSwitchCase","checklist_items_added"),n.Ib(1),n.Dc("ngSwitchCase","checklist_item_assignee"),n.Ib(1),n.Dc("ngSwitchCase","checklist_item_resolved"),n.Ib(1),n.Dc("ngSwitchCase","priority"),n.Ib(1),n.Dc("ngSwitchCase","status"),n.Ib(1),n.Dc("ngSwitchCase","assignee_rem"),n.Ib(1),n.Dc("ngSwitchCase","assignee_add"),n.Ib(1),n.Dc("ngSwitchCase","group_assignee_rem"),n.Ib(1),n.Dc("ngSwitchCase","group_assignee_add"),n.Ib(1),n.Dc("ngSwitchCase","follower_rem"),n.Ib(1),n.Dc("ngSwitchCase","follower_add"),n.Ib(1),n.Dc("ngSwitchCase","time_estimate"),n.Ib(1),n.Dc("ngSwitchCase","points"),n.Ib(1),n.Dc("ngSwitchCase","content"),n.Ib(1),n.Dc("ngSwitchCase","name"),n.Ib(1),n.Dc("ngSwitchCase","task_creation"),n.Ib(1),n.Dc("ngSwitchCase","section_moved"),n.Ib(1),n.Dc("ngSwitchCase","added_to_subcategory"),n.Ib(1),n.Dc("ngSwitchCase","removed_from_subcategory"),n.Ib(1),n.Dc("ngSwitchCase","new_subtask"),n.Ib(1),n.Dc("ngSwitchCase","duplicate"),n.Ib(1),n.Dc("ngSwitchCase","template_merged"),n.Ib(1),n.Dc("ngSwitchCase","due_date"),n.Ib(1),n.Dc("ngSwitchCase","start_date"),n.Ib(1),n.Dc("ngSwitchCase","recur"),n.Ib(1),n.Dc("ngSwitchCase","recurrence_set"),n.Ib(1),n.Dc("ngSwitchCase","recurrence_set_2.0"),n.Ib(1),n.Dc("ngSwitchCase","recurrence_removed"),n.Ib(1),n.Dc("ngSwitchCase","recur_2.0"),n.Ib(1),n.Dc("ngSwitchCase","copy_task_recur"),n.Ib(1),n.Dc("ngSwitchCase","recurrence_missed"),n.Ib(1),n.Dc("ngSwitchCase","comment_resolved"),n.Ib(1),n.Dc("ngSwitchCase","comment_assigned"),n.Ib(1),n.Dc("ngSwitchCase","reaction"),n.Ib(1),n.Dc("ngSwitchCase","gl_task_branch"),n.Ib(1),n.Dc("ngSwitchCase","gh_task_branch"),n.Ib(1),n.Dc("ngSwitchCase","bb_task_branch"),n.Ib(1),n.Dc("ngSwitchCase","zoom_meeting"),n.Ib(1),n.Dc("ngSwitchCase","attachment_comment"),n.Ib(1),n.Dc("cuTooltip",n.wc(54,57,e.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(56,59,e.item.date)," ")}}const Ai=function(e){return{"task-history-item__divider-fade":e}};function ji(e,t){if(1&e&&(n.cc(0,"div",148),n.cc(1,"div",149),n.gc(2,150),n.bc(),n.Xb(3,"div",151),n.bc()),2&e){const e=n.uc();n.Dc("ngClass",n.Hc(1,Ai,e.item.fade))}}function Ni(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-email-comment",155),n.qc("onAddReaction",function(t){return n.Uc(e),n.uc(2).addSpecificReaction(t.comment,t.reaction,t.noUpdate)})("onRemoveReaction",function(t){return n.Uc(e),n.uc(2).removeSpecificReaction(t.comment,t.reaction,t.noUpdate)})("onEmailUserAction",function(t){return n.Uc(e),n.uc(2).onEmailUserAction.emit(t)})("onAssigneeChange",function(t){return n.Uc(e),n.uc(2).changeAssignee(t)})("onChange",function(t){return n.Uc(e),n.uc(2).saveComment(t)}),n.vc(1,"async"),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc(2),t=n.Rc(24);let i=null,a=null;n.Dc("projectId",e.projectId)("project",e.project)("coverImage",e.coverImage)("canAddAttachments",e.canAddAttachments)("canRemoveAttachments",e.canRemoveAttachments)("canRemoveOwnAttachments",e.canRemoveOwnAttachments)("canChangeDescription",e.canChangeDescription)("permissions",e.permissions)("permissionLevel",e.permissionLevel)("readonly",e.readonly)("projectMembers",e.members)("taskId",e.taskId)("weights",e.weights)("allowEmailFeature",e.allowEmailFeature)("comment",e.item.comment)("lazyLoadEntities",!1)("editorId","comment_edit_"+(null==e.item.comment?null:e.item.comment.id))("allowReply",e.allowReply)("allowLink",!0)("threadData",null!=e.authedState&&e.authedState.threadedEmailsMap?e.authedState.threadedEmailsMap[e.item.comment.id]:void 0)("submitting",null!=e.authedState&&e.authedState.threadedEmailsMap?null==e.authedState.threadedEmailsMap[e.item.comment.id]?null:e.authedState.threadedEmailsMap[e.item.comment.id].submitting:void 0)("allowThread",null==(i=n.wc(1,27,e.sharedData.compatCurrentTeam$))?null:i.emails_as_replies)("allowNormalThread",(null==(a=n.wc(2,29,e.sharedData.compatCurrentTeam$))?null:a.threaded_comments)&&e.threadedComments)("threadTemplate",t)("fromAutomation",null==e.item.data?null:e.item.data.automation)("canManageEmail",e.canManageEmail)("userGroups",e.userGroups)}}function Ei(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-comment",156),n.qc("onShowAutomation",function(){n.Uc(e);const t=n.uc(2);return t.showAutomationModal(null==t.item.data?null:t.item.data.automation)})("onChange",function(t){return n.Uc(e),n.uc(2).saveComment(t)})("onAddReaction",function(t){return n.Uc(e),n.uc(2).addSpecificReaction(t.comment,t.reaction)})("onRemoveReaction",function(t){return n.Uc(e),n.uc(2).removeSpecificReaction(t.comment,t.reaction)})("onAssigneeChange",function(t){return n.Uc(e),n.uc(2).changeAssignee(t)})("onToggleResolved",function(t){return n.Uc(e),n.uc(2).markResolved(t.resolved)})("onCommentReply",function(t){return n.Uc(e),n.uc(2).onCommentReply.emit(t)})("onAddToContent",function(t){return n.Uc(e),n.uc(2).onAddToContent.emit(t)})("onScrollToComment",function(t){return n.Uc(e),n.uc(2).onScrollToComment.emit(t)})("onAddToInbox",function(t){return n.Uc(e),n.uc(2).onAddToInbox.emit(t)}),n.vc(1,"async"),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc(2),t=n.Rc(24);let i=null,a=null;n.Dc("projectId",e.projectId)("coverImage",e.coverImage)("canAddAttachments",e.canAddAttachments)("canRemoveAttachments",e.canRemoveAttachments)("canRemoveOwnAttachments",e.canRemoveOwnAttachments)("canChangeDescription",e.canChangeDescription)("permissions",e.permissions)("permissionLevel",e.permissionLevel)("readonly",e.readonly)("projectMembers",e.members)("taskId",e.taskId)("weights",e.weights)("comment",e.item.comment)("searchString",e.searchString)("selectedFilterAssignedCommentUserIds",e.selectedFilterAssignedCommentUserIds)("lazyLoadEntities",!1)("editorId","comment_edit_"+(null==e.item.comment?null:e.item.comment.id))("allowReply",e.allowReply)("allowLink",!0)("allowAddToContent",e.allowAddToContent)("allowAddToInbox",e.allowAddToInbox)("allowThread",((null==(i=n.wc(1,28,e.sharedData.compatCurrentTeam$))?null:i.threaded_comments)||(null==e.task||null==e.task.features||null==e.task.features.threaded_comments?null:e.task.features.threaded_comments.enabled))&&e.threadedComments)("showAddFollowers",(null==(a=n.wc(2,30,e.sharedData.compatCurrentTeam$))?null:a.threaded_comments)&&e.threadedComments)("threadTemplate",t)("fromAutomation",null==e.item.data?null:e.item.data.automation)("userGroups",e.userGroups)("taskUserGroups",e.taskUserGroups)("task",e.task)}}const $i=function(e,t,i){return{"task-history-item__new-comment":e,"task-history-item__changed-comment":t,"task-history-item__pending-comment":i}};function Pi(e,t){if(1&e&&(n.cc(0,"div",152),n.bd(1,Ni,3,31,"cu-email-comment",153),n.bd(2,Ei,3,32,"ng-template",null,154,n.cd),n.bc()),2&e){const e=n.Rc(3),t=n.uc();n.Dc("ngClass",n.Jc(3,$i,t.isNew&&(null==t.item||null==t.item.comment?null:t.item.comment.id)!==t.PENDING_COMMENT_ID,t.isChanged,(null==t.item||null==t.item.comment?null:t.item.comment.id)===t.PENDING_COMMENT_ID)),n.Ib(1),n.Dc("ngIf",null==t.item||null==t.item.comment||null==t.item.comment.emails?null:t.item.comment.emails.length)("ngIfElse",e)}}function Li(e,t){1&e&&(n.ac(0),n.gc(1,168),n.Zb())}function Ui(e,t){if(1&e&&n.bd(0,Li,2,0,"ng-container",167),2&e){n.uc();const e=n.Rc(10),t=n.uc();n.Dc("ngIf",t.item.attachments[0].source===t.AttachmentSource.email)("ngIfElse",e)}}function zi(e,t){if(1&e&&(n.ac(0),n.gc(1,169),n.Zb()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.item.attachments.length),n.hc(1)}}function Mi(e,t){1&e&&(n.ac(0),n.gc(1,170),n.Zb())}function Ri(e,t){if(1&e&&(n.cc(0,"div",157),n.cc(1,"div",158),n.cc(2,"span",159),n.vc(3,"itsme"),n.dd(4),n.vc(5,"username"),n.bc(),n.cc(6,"span",160),n.bd(7,Ui,1,2,"ng-template",161),n.bd(8,zi,2,1,"ng-template",162),n.bc(),n.bd(9,Mi,2,0,"ng-template",null,163,n.cd),n.cc(11,"div",164),n.vc(12,"trueDate"),n.dd(13),n.vc(14,"timeAgo"),n.bc(),n.bc(),n.cc(15,"div",165),n.Xb(16,"cu-history-attachments",166),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(2),n.Dc("ngClass",n.Hc(19,pe,n.wc(3,11,e.item.user)))("cuUserProfileLink",e.item.user),n.Ib(2),n.fd(" ",n.wc(5,13,e.item.user)," "),n.Ib(2),n.Dc("ngPlural",e.item.attachments.length),n.Ib(5),n.Dc("cuTooltip",n.wc(12,15,e.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(14,17,e.item.date)," "),n.Ib(3),n.Dc("taskId",e.taskId)("canChangeDescription",e.canChangeDescription)("coverImage",e.coverImage)("item",e.item)}}function Gi(e,t){if(1&e&&(n.cc(0,"a",182),n.Xb(1,"div",183),n.dd(2),n.cc(3,"div",184),n.qc("click",function(e){return e.preventDefault(),e.stopPropagation()}),n.bc(),n.bc()),2&e){const e=n.uc(),t=e.link,i=e.branchName;n.Ob("disabled",!t),n.Dc("href",t,n.Xc),n.Ib(2),n.fd(" ",i," "),n.Ib(1),n.Dc("cbContent",i)}}function Fi(e,t){1&e&&(n.cc(0,"div",185),n.gc(1,186),n.bc())}function Vi(e,t){if(1&e&&(n.cc(0,"a",187),n.Xb(1,"div",188),n.dd(2),n.bc()),2&e){const e=n.uc(),t=e.link,i=e.repoName;n.Ob("disabled",!t),n.Dc("href",t,n.Xc),n.Ib(2),n.fd(" ",i," ")}}function qi(e,t){if(1&e&&(n.cc(0,"span",192),n.dd(1),n.vc(2,"slice"),n.bc()),2&e){const e=n.uc(2).sha;n.Ib(1),n.ed(n.yc(2,1,e,0,7))}}function Xi(e,t){if(1&e&&n.Xb(0,"cu-git-files-menu",197),2&e){const e=n.uc(3).files;n.Dc("files",e)}}function Bi(e,t){if(1&e&&(n.cc(0,"span",193),n.cc(1,"span",194),n.qc("click",function(e){return e.preventDefault()}),n.gc(2,195),n.bc(),n.bd(3,Xi,1,1,"cu-git-files-menu",196),n.bc()),2&e){const e=n.uc(2).files;n.Ib(2),n.kc(e.length)(e.length),n.hc(2)}}function Ki(e,t){if(1&e&&(n.cc(0,"a",189),n.bd(1,qi,3,5,"span",190),n.dd(2),n.bd(3,Bi,4,2,"span",191),n.bc()),2&e){const e=n.uc(),t=e.link,i=e.sha,a=e.message,c=e.files;n.Ob("disabled",!t),n.Dc("href",t,n.Xc),n.Ib(1),n.Dc("ngIf",i),n.Ib(1),n.fd(" ",a," "),n.Ib(1),n.Dc("ngIf",c)}}function Wi(e,t){if(1&e&&(n.cc(0,"div",171),n.cc(1,"div",172),n.cc(2,"div",173),n.gc(3,174),n.bc(),n.cc(4,"div",175),n.vc(5,"trueDate"),n.dd(6),n.vc(7,"timeAgo"),n.bc(),n.bc(),n.cc(8,"div",176),n.cc(9,"div",177),n.bd(10,Gi,4,5,"a",178),n.bd(11,Fi,2,0,"div",179),n.bd(12,Vi,3,4,"a",180),n.bc(),n.bc(),n.bd(13,Ki,4,6,"a",181),n.bc()),2&e){const e=t.integration,i=t.repoName,a=t.branchName,c=t.message,o=n.uc();n.Ib(3),n.kc(o.item.user.username||(null==o.item.after?null:o.item.after.author))(null!=o.item.after&&o.item.after.name?"pushed to:":"pushed to "+e+":"),n.hc(3),n.Ib(1),n.Dc("cuTooltip",n.wc(5,9,o.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(7,11,o.item.date)," "),n.Ib(4),n.Dc("ngIf",a),n.Ib(1),n.Dc("ngIf",i),n.Ib(1),n.Dc("ngIf",i),n.Ib(1),n.Dc("ngIf",c)}}function Hi(e,t){}const Zi=function(e,t,i,a,c,n){return{integration:"GitHub",link:e,repoName:t,branchName:i,message:a,sha:c,files:n}};function Qi(e,t){if(1&e&&n.bd(0,Hi,0,0,"ng-template",97),2&e){const e=n.uc(),t=n.Rc(5);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Mc(2,Zi,"https://github.com/"+e.item.after.repo_owner+"/"+e.item.after.repo_name+"/commit/"+e.item.after.sha,null==e.item.after?null:e.item.after.repo_name,null==e.item.after?null:e.item.after.branch_name,null==e.item.after?null:e.item.after.message,e.item.after.sha,e.files))}}function Ji(e,t){}const Yi=function(e){return{name:e}},ea=function(e){return[e]},ta=function(){return[]},ia=function(e,t,i,a){return{integration:"GitHub",prUrl:e,sourceUrl:t,targetUrl:i,reviewers:a,pullRequestLabel:"Pull Request",reviewerLabel:"Reviewer"}};function aa(e,t){if(1&e&&n.bd(0,Ji,0,0,"ng-template",97),2&e){const e=n.uc(),t=n.Rc(11);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Kc(7,ia,"https://github.com/"+(e.item.before||e.item.after).repo_owner+"/"+(e.item.before||e.item.after).repo_name+"/pull/"+(e.item.before||e.item.after).number,"https://github.com/"+(e.item.before||e.item.after).repo_owner+"/"+(e.item.before||e.item.after).repo_name+"/commits/"+(e.item.before||e.item.after).source_branch,"https://github.com/"+(e.item.before||e.item.after).repo_owner+"/"+(e.item.before||e.item.after).repo_name+"/commits/"+(e.item.before||e.item.after).target_branch,(e.item.before||e.item.after).reviewer&&!(e.item.before||e.item.after).reviewers?n.Hc(4,ea,n.Hc(2,Yi,(e.item.before||e.item.after).reviewer)):(e.item.before||e.item.after).reviewers||n.Gc(6,ta)))}}function ca(e,t){}const na=function(e,t,i,a){return{integration:"Bitbucket",prUrl:e,sourceUrl:t,targetUrl:i,reviewers:a,pullRequestLabel:"Pull Request",reviewerLabel:"Reviewer"}};function oa(e,t){if(1&e&&n.bd(0,ca,0,0,"ng-template",97),2&e){const e=n.uc(),t=n.Rc(11);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Kc(2,na,(e.item.before||e.item.after).url,(e.item.before||e.item.after).source_branch_url,(e.item.before||e.item.after).target_branch_url,(e.item.before||e.item.after).reviewers))}}function sa(e,t){}const ra=function(e,t,i,a){return{integration:"Gitlab",prUrl:e,sourceUrl:t,targetUrl:i,reviewers:a,pullRequestLabel:"Merge Request",reviewerLabel:"Assignee"}};function la(e,t){if(1&e&&n.bd(0,sa,0,0,"ng-template",97),2&e){const e=n.uc(),t=n.Rc(11);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Kc(2,ra,(e.item.before||e.item.after).url,(e.item.before||e.item.after).source_branch_url,(e.item.before||e.item.after).target_branch_url,(e.item.before||e.item.after).reviewers))}}function ua(e,t){if(1&e&&(n.ac(0),n.dd(1),n.Zb()),2&e){const e=n.uc(3);n.Ib(1),n.fd(" ",e.item.user.username||e.item.user.email," ")}}function da(e,t){if(1&e&&(n.ac(0),n.dd(1),n.Zb()),2&e){const e=n.uc(3);n.Ib(1),n.fd(" @",(e.item.before||e.item.after).author," ")}}function ma(e,t){if(1&e&&(n.ac(0),n.dd(1),n.Zb()),2&e){const e=n.uc(2),t=e.integration,i=e.pullRequestLabel;n.Ib(1),n.gd(" linked a ",t," ",i,": ")}}function ha(e,t){if(1&e&&(n.ac(0),n.gc(1,208),n.Zb()),2&e){const e=n.uc(2).integration;n.Ib(1),n.kc(e),n.hc(1)}}function pa(e,t){if(1&e&&(n.ac(0),n.gc(1,209),n.Zb()),2&e){const e=n.uc(2),t=e.integration,i=e.pullRequestLabel;n.Ib(1),n.kc(t)(i),n.hc(1)}}function ba(e,t){if(1&e&&(n.ac(0),n.gc(1,210),n.Zb()),2&e){const e=n.uc(2),t=e.integration,i=e.pullRequestLabel;n.Ib(1),n.kc(t)(i),n.hc(1)}}function ga(e,t){1&e&&(n.mc(0,211,1),n.Xb(1,"div",185),n.jc())}function fa(e,t){if(1&e&&(n.mc(0,211,2),n.cc(1,"a",187),n.Xb(2,"div",183),n.bc(),n.jc()),2&e){const e=n.uc(3).sourceUrl,t=n.uc();n.Ib(1),n.Dc("href",e,n.Xc),n.Ib(1),n.kc((t.item.before||t.item.after).source_branch),n.hc(0)}}function _a(e,t){1&e&&(n.mc(0,211,3),n.Xb(1,"div",185),n.jc())}function va(e,t){if(1&e&&(n.mc(0,211,4),n.cc(1,"a",187),n.Xb(2,"div",183),n.bc(),n.jc()),2&e){const e=n.uc(3).targetUrl,t=n.uc();n.Ib(1),n.Dc("href",e,n.Xc),n.Ib(1),n.kc((t.item.before||t.item.after).target_branch),n.hc(0)}}function ya(e,t){if(1&e&&(n.cc(0,"div",177),n.mc(1,211),n.cc(2,"a",212),n.Xb(3,"div",213),n.bc(),n.bd(4,ga,2,0,"div",179),n.bd(5,fa,3,2,"a",214),n.bd(6,_a,2,0,"div",179),n.bd(7,va,3,2,"a",214),n.jc(),n.bc()),2&e){const e=n.uc(2).prUrl,t=n.uc();n.Ib(2),n.Dc("href",e,n.Xc),n.Ib(2),n.Dc("ngIf",(t.item.before||t.item.after).source_branch),n.Ib(1),n.Dc("ngIf",(t.item.before||t.item.after).source_branch),n.Ib(1),n.Dc("ngIf",(t.item.before||t.item.after).target_branch),n.Ib(1),n.Dc("ngIf",(t.item.before||t.item.after).target_branch),n.kc((t.item.before||t.item.after).title),n.hc(1)}}function ka(e,t){1&e&&(n.mc(0,215,1),n.Xb(1,"div",185),n.jc())}function Ia(e,t){if(1&e&&(n.mc(0,215,2),n.cc(1,"div",217),n.Xb(2,"div",183),n.bc(),n.jc()),2&e){const e=n.uc(4);n.Ib(2),n.kc((e.item.before||e.item.after).target_branch),n.hc(0)}}function wa(e,t){if(1&e&&(n.cc(0,"div",177),n.mc(1,215),n.cc(2,"a",182),n.Xb(3,"div",183),n.bc(),n.bd(4,ka,2,0,"div",179),n.bd(5,Ia,3,1,"div",216),n.jc(),n.bc()),2&e){const e=n.uc(2).prUrl,t=n.uc();n.Ib(2),n.Dc("href",e,n.Xc),n.Ib(2),n.Dc("ngIf",(t.item.before||t.item.after).target_branch),n.Ib(1),n.Dc("ngIf",(t.item.before||t.item.after).target_branch),n.kc((t.item.before||t.item.after).source_branch),n.hc(1)}}function Ta(e,t){if(1&e&&(n.cc(0,"div",177),n.mc(1,218),n.cc(2,"a",212),n.Xb(3,"div",213),n.bc(),n.Xb(4,"div",185),n.jc(),n.bc()),2&e){const e=n.uc(2).prUrl,t=n.uc();n.Ib(2),n.Dc("href",e,n.Xc),n.Ib(2),n.kc((t.item.before||t.item.after).title),n.hc(1)}}function xa(e,t){if(1&e&&n.Xb(0,"img",221),2&e){const e=n.uc().$implicit;n.Dc("src",e.avatar,n.Xc)}}function Ca(e,t){if(1&e&&(n.cc(0,"div",222),n.dd(1),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" ",e.name," ")}}function Oa(e,t){1&e&&(n.ac(0),n.dd(1,", "),n.Zb())}function Sa(e,t){if(1&e&&(n.ac(0),n.bd(1,xa,1,1,"img",219),n.bd(2,Ca,2,1,"div",220),n.bd(3,Oa,2,0,"ng-container",5),n.Zb()),2&e){const e=t.$implicit,i=t.last;n.Ib(1),n.Dc("ngIf",e.avatar),n.Ib(1),n.Dc("ngIf",e.name),n.Ib(1),n.Dc("ngIf",!i)}}function Da(e,t){1&e&&(n.cc(0,"span",223),n.dd(1," - "),n.bc())}function Aa(e,t){1&e&&n.Xb(0,"div",229)}function ja(e,t){1&e&&n.Xb(0,"div",230)}function Na(e,t){1&e&&n.Xb(0,"div",231)}function Ea(e,t){if(1&e&&(n.cc(0,"div",224),n.ac(1),n.gc(2,225),n.Zb(),n.dd(3,": "),n.bd(4,Aa,1,0,"div",226),n.vc(5,"lowercase"),n.bd(6,ja,1,0,"div",227),n.vc(7,"lowercase"),n.vc(8,"lowercase"),n.bd(9,Na,1,0,"div",228),n.vc(10,"lowercase"),n.vc(11,"lowercase"),n.bc()),2&e){const e=n.uc(3);n.Ib(4),n.Dc("ngIf","success"===n.wc(5,3,(e.item.before||e.item.after).build_status)),n.Ib(2),n.Dc("ngIf","failure"===n.wc(7,5,(e.item.before||e.item.after).build_status)||"failed"===n.wc(8,7,(e.item.before||e.item.after).build_status)),n.Ib(3),n.Dc("ngIf","pending"===n.wc(10,9,(e.item.before||e.item.after).build_status)||"running"===n.wc(11,11,(e.item.before||e.item.after).build_status))}}function $a(e,t){if(1&e&&(n.cc(0,"div",199),n.cc(1,"div",172),n.cc(2,"div",173),n.bd(3,ua,2,1,"ng-container",5),n.bd(4,da,2,1,"ng-container",5),n.bd(5,ma,2,2,"ng-container",5),n.bd(6,ha,2,1,"ng-container",5),n.bd(7,pa,2,2,"ng-container",5),n.bd(8,ba,2,2,"ng-container",5),n.bc(),n.cc(9,"div",175),n.vc(10,"trueDate"),n.dd(11),n.vc(12,"timeAgo"),n.bc(),n.bc(),n.cc(13,"div",200),n.bd(14,ya,8,6,"div",201),n.bd(15,wa,6,4,"div",201),n.bd(16,Ta,5,2,"div",201),n.bc(),n.cc(17,"div",202),n.cc(18,"div",203),n.dd(19),n.bd(20,Sa,4,3,"ng-container",204),n.bd(21,Da,2,0,"span",205),n.bc(),n.bd(22,Ea,12,13,"div",206),n.cc(23,"div",207),n.dd(24),n.bc(),n.bc(),n.bc()),2&e){const e=n.uc(),t=e.reviewerLabel,i=e.reviewers,a=n.uc();n.Ib(3),n.Dc("ngIf",null==a.item.user?null:a.item.user.id),n.Ib(1),n.Dc("ngIf",!(null!=a.item.user&&a.item.user.id)),n.Ib(1),n.Dc("ngIf","open"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]||"opened"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(1),n.Dc("ngIf","merged"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(1),n.Dc("ngIf","closed"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(1),n.Dc("ngIf","declined"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(1),n.Dc("cuTooltip",n.wc(10,21,a.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(12,23,a.item.date)," "),n.Ib(3),n.Dc("ngIf","open"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]||"opened"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(1),n.Dc("ngIf","merged"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(1),n.Dc("ngIf","closed"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]||"declined"===(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]),n.Ib(3),n.gd(" ",t,"",1===i.length?"":"s",": "),n.Ib(1),n.Dc("ngForOf",i)("ngForTrackBy",a.trackByValue),n.Ib(1),n.Dc("ngIf",!(null!=i&&i.length)),n.Ib(1),n.Dc("ngIf",(a.item.before||a.item.after).build_status),n.Ib(1),n.ad("background-color",a.githubStatusColors[(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]]),n.Ib(1),n.fd(" ",(a.item.before||a.item.after).updates[(a.item.before||a.item.after).updates.length-1]," ")}}function Pa(e,t){if(1&e&&n.bd(0,$a,25,25,"div",198),2&e){const e=n.uc();n.Dc("ngIf",(e.item.before||e.item.after).updates)}}function La(e,t){}const Ua=function(e,t,i,a,c,n){return{integration:"Gitlab",link:e,repoName:t,branchName:i,message:a,sha:c,files:n}};function za(e,t){if(1&e&&n.bd(0,La,0,0,"ng-template",97),2&e){const e=n.uc(),t=n.Rc(5);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Mc(2,Ua,e.item.after.commit_url,null==e.item.after?null:e.item.after.gl_repo_name,null==e.item.after?null:e.item.after.branch_name,null==e.item.after?null:e.item.after.message,e.item.after.sha,e.files))}}function Ma(e,t){if(1&e&&(n.cc(0,"div",232),n.cc(1,"a",233),n.cc(2,"div",234),n.cc(3,"div",235),n.mc(4,236),n.Xb(5,"span",237),n.jc(),n.bc(),n.bc(),n.cc(6,"div",238),n.vc(7,"trueDate"),n.dd(8),n.vc(9,"timeAgo"),n.bc(),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("href",e.item.data.object_attributes.url,n.Xc),n.Ib(4),n.kc(e.item.data.user.name)("open"===e.item.data.object_attributes.action?"opened":"closed")(e.item.data.object_attributes.title),n.hc(4),n.Ib(1),n.Dc("cuTooltip",n.wc(7,7,e.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(9,9,e.item.date)," ")}}function Ra(e,t){}const Ga=function(e,t,i,a,c,n){return{integration:"Bitbucket",link:e,repoName:t,branchName:i,message:a,sha:c,files:n}};function Fa(e,t){if(1&e&&n.bd(0,Ra,0,0,"ng-template",97),2&e){const e=n.uc(),t=n.Rc(5);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Mc(2,Ga,(null==e.item.data.links?null:e.item.data.links.html.href)||e.item.data.self_link,null==e.item.after?null:e.item.after.bb_repo_name,null==e.item.after?null:e.item.after.branch_name,null==e.item.after?null:e.item.after.message,e.item.after.hash,e.files))}}function Va(e,t){if(1&e&&n.dd(0),2&e){const e=n.uc(2);n.fd(" ",null==e.item.data.actor?null:e.item.data.actor.display_name," ")}}function qa(e,t){if(1&e&&(n.ac(0),n.dd(1),n.Zb()),2&e){const e=n.uc(2);n.Ib(1),n.fd(" ",e.item.user.username||e.item.user.email," ")}}function Xa(e,t){1&e&&(n.mc(0,240,1),n.Yb(1),n.jc())}function Ba(e,t){1&e&&(n.mc(0,240,2),n.Yb(1),n.jc())}function Ka(e,t){1&e&&(n.mc(0,240,3),n.Yb(1),n.jc())}function Wa(e,t){1&e&&(n.mc(0,240,4),n.Yb(1),n.jc())}function Ha(e,t){1&e&&(n.mc(0,240,5),n.Yb(1),n.jc())}function Za(e,t){1&e&&(n.mc(0,240,6),n.Yb(1),n.jc())}function Qa(e,t){1&e&&(n.mc(0,240,7),n.Yb(1),n.jc())}function Ja(e,t){1&e&&(n.mc(0,240,8),n.Yb(1),n.jc())}function Ya(e,t){if(1&e&&(n.cc(0,"div",232),n.cc(1,"a",233),n.cc(2,"div",234),n.cc(3,"div",235),n.bd(4,Va,1,1,"ng-template",null,239,n.cd),n.bd(6,qa,2,1,"ng-container",167),n.ac(7),n.mc(8,240),n.bd(9,Xa,2,0,"ng-container",5),n.bd(10,Ba,2,0,"ng-container",5),n.bd(11,Ka,2,0,"ng-container",5),n.bd(12,Wa,2,0,"ng-container",5),n.bd(13,Ha,2,0,"ng-container",5),n.bd(14,Za,2,0,"ng-container",5),n.Xb(15,"span",237),n.bd(16,Qa,2,0,"ng-container",5),n.bd(17,Ja,2,0,"ng-container",5),n.Xb(18,"span",237),n.Xb(19,"span",237),n.jc(),n.Zb(),n.bc(),n.bc(),n.cc(20,"div",238),n.vc(21,"trueDate"),n.dd(22),n.vc(23,"timeAgo"),n.bc(),n.bc(),n.bc()),2&e){const e=n.Rc(5),t=n.uc();n.Ib(1),n.Dc("href",t.item.data.pullrequest.links.html.href,n.Xc),n.Ib(5),n.Dc("ngIf",null==t.item.user?null:t.item.user.id)("ngIfElse",e),n.Ib(3),n.Dc("ngIf","bb_pr_created"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_updated"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_approved"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_unapproved"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_fulfilled"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_rejected"===t.item.field),n.Ib(2),n.Dc("ngIf","bb_pr_fulfilled"!==t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_fulfilled"===t.item.field),n.Ib(2),n.kc(t.item.data.pullrequest.title)(t.item.data.pullrequest.source.branch)(t.item.data.pullrequest.destination.branch),n.hc(8),n.Ib(1),n.Dc("cuTooltip",n.wc(21,17,t.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(23,19,t.item.date)," ")}}function ec(e,t){if(1&e&&n.dd(0),2&e){const e=n.uc(2);n.fd(" ",null==e.item.data.actor?null:e.item.data.actor.display_name," ")}}function tc(e,t){if(1&e&&(n.ac(0),n.dd(1),n.Zb()),2&e){const e=n.uc(2);n.Ib(1),n.fd(" ",e.item.user.username||e.item.user.email," ")}}function ic(e,t){1&e&&(n.mc(0,241,1),n.Yb(1),n.jc())}function ac(e,t){1&e&&(n.mc(0,241,2),n.Yb(1),n.jc())}function cc(e,t){if(1&e&&(n.cc(0,"div",232),n.cc(1,"a",233),n.cc(2,"div",234),n.cc(3,"div",235),n.bd(4,ec,1,1,"ng-template",null,239,n.cd),n.bd(6,tc,2,1,"ng-container",167),n.ac(7),n.mc(8,241),n.bd(9,ic,2,0,"ng-container",5),n.bd(10,ac,2,0,"ng-container",5),n.Xb(11,"span",237),n.jc(),n.Zb(),n.bc(),n.bc(),n.cc(12,"div",238),n.vc(13,"trueDate"),n.dd(14),n.vc(15,"timeAgo"),n.bc(),n.bc(),n.bc()),2&e){const e=n.Rc(5),t=n.uc();n.Ib(1),n.Dc("href",t.item.data.issue.links.html.href,n.Xc),n.Ib(5),n.Dc("ngIf",null==t.item.user?null:t.item.user.id)("ngIfElse",e),n.Ib(3),n.Dc("ngIf","bb_issue"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_issue_updated"===t.item.field),n.Ib(1),n.kc(t.item.data.issue.title),n.hc(8),n.Ib(1),n.Dc("cuTooltip",n.wc(13,9,t.item.date))("tooltipDelay",200),n.Ib(2),n.fd(" ",n.wc(15,11,t.item.date)," ")}}function nc(e,t){if(1&e){const e=n.dc();n.cc(0,"div",242),n.cc(1,"cu-zoom-meeting-info",243),n.qc("onRemove",function(){n.Uc(e);const t=n.uc();return t.onRemoveZoom.emit(t.item)}),n.vc(2,"itsme"),n.vc(3,"async"),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("meeting",null==e.item||null==e.item.data?null:e.item.data.meeting_info)("recordings",null==e.item||null==e.item.data?null:e.item.data.recordings)("participants",null==e.item||null==e.item.data?null:e.item.data.participants)("allowRemove",!e.readonly&&(n.wc(2,4,null==e.item?null:e.item.user)||n.wc(3,6,e.isAdmin$)))}}function oc(e,t){1&e&&(n.ac(0),n.gc(1,247),n.Zb())}function sc(e,t){if(1&e&&(n.ac(0),n.gc(1,248),n.Zb()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.item.count),n.hc(1)}}function rc(e,t){if(1&e){const e=n.dc();n.cc(0,"div",244),n.Xb(1,"div",245),n.cc(2,"div",246),n.qc("click",function(){return n.Uc(e),n.uc().expandHistoryBlock()}),n.bd(3,oc,2,0,"ng-template",161),n.bd(4,sc,2,1,"ng-template",162),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("icon","chevron-right"),n.Ib(1),n.Dc("ngPlural",e.item.count)}}function lc(e,t){}function uc(e,t){if(1&e){const e=n.dc();n.cc(0,"a",251),n.qc("click",function(t){n.Uc(e);const i=n.uc().task;return n.uc().openTask(t,i)}),n.vc(1,"cuTaskLink"),n.dd(2),n.bc()}if(2&e){const e=n.uc().task;n.Dc("cuLink",n.wc(1,3,e)),n.Ib(2),n.gd("#",null==e?null:e.id," - ",null==e?null:e.name,"")}}function dc(e,t){if(1&e&&(n.cc(0,"span",252),n.dd(1),n.bc()),2&e){const e=n.uc().task;n.Ib(1),n.gd("#",null==e?null:e.id," - ",null==e?null:e.name,"")}}function mc(e,t){if(1&e&&(n.cc(0,"span",44),n.dd(1),n.ac(2),n.gc(3,253),n.Zb(),n.bc()),2&e){const e=n.uc().task;n.Ib(1),n.fd("","#"+(null==e?null:e.id)," ")}}function hc(e,t){if(1&e&&(n.bd(0,uc,3,5,"a",249),n.bd(1,dc,2,2,"span",250),n.bd(2,mc,4,1,"span",42)),2&e){const e=t.task,i=t.disabled;n.Dc("ngIf",(null==e?null:e.name)&&(null==e?null:e.project_id)&&!i),n.Ib(1),n.Dc("ngIf",(null==e?null:e.name)&&i),n.Ib(1),n.Dc("ngIf",!(null!=e&&e.name&&null!=e&&e.project_id))}}const pc=function(){return{showParent:!1}};function bc(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-comment-thread",254),n.qc("onCommentBarCancel",function(e){return!e&&t.callback.cancel()})("onChangeComments",function(t){return n.Uc(e),n.uc().updateThreadData(t)})("onThreadCommentAction",function(t){return n.Uc(e),n.uc().onThreadCommentAction.emit(t)})("onScrollToComment",function(t){return n.Uc(e),n.uc().onScrollToComment.emit(t)})("onAddToContent",function(t){return n.Uc(e),n.uc().onAddToContent.emit(t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=t.comment,i=n.uc();n.Dc("parentId",e.id)("type",i.CommentType.Comment)("focusOnInit",!(null!=e&&e.threaded_replies))("members",i.members)("assignedComments",!1)("filters",n.Gc(23,pc))("popupInBody",!0)("readOnly",i.readonly||!(null!=i.permissions&&i.permissions.comment))("user",n.wc(1,21,i.user$))("dropFileParentId","task_"+i.taskId)("searchString",i.searchString)("doNotLoadComments",!(null!=e&&e.threaded_replies))("threadedReplies",null==e?null:e.threaded_replies)("showUserGroups",!0)("taskId",i.taskId)("taskUserGroups",n.Hc(24,ea,i.taskUserGroupFollowers))("allowLink",!0)("allowAddToInbox",i.allowAddToInbox)("allowAddToContent",i.allowAddToContent)("permissions",i.permissions)("permissionLevel",i.permissionLevel)}}function gc(e,t){1&e&&(n.mc(0,255,1),n.Yb(1),n.jc())}function fc(e,t){if(1&e&&(n.cc(0,"a",182),n.Xb(1,"div",183),n.dd(2),n.cc(3,"div",259),n.qc("click",function(e){return e.preventDefault(),e.stopPropagation()}),n.bc(),n.bc()),2&e){const e=n.uc().branchUrl,t=n.uc();n.Dc("href",e,n.Xc),n.Ib(2),n.fd(" ",(t.item.before||t.item.after).branch_name," "),n.Ib(1),n.Dc("cbContent",(t.item.before||t.item.after).branch_name)("icon","copy2")}}function _c(e,t){1&e&&(n.cc(0,"div",185),n.gc(1,260),n.bc())}function vc(e,t){if(1&e&&(n.cc(0,"a",187),n.Xb(1,"div",188),n.dd(2),n.bc()),2&e){const e=n.uc(),t=e.repoName;n.Dc("href",e.repoUrl,n.Xc),n.Ib(2),n.fd(" ",t," ")}}function yc(e,t){if(1&e&&(n.cc(0,"span",261),n.Xb(1,"div",188),n.dd(2),n.bc()),2&e){const e=n.uc().repoName;n.Ib(2),n.fd(" ",e," ")}}function kc(e,t){if(1&e&&(n.ac(0),n.mc(1,255),n.bd(2,gc,2,0,"ng-container",5),n.jc(),n.Zb(),n.dd(3,": "),n.cc(4,"div",256),n.cc(5,"div",177),n.bd(6,fc,4,4,"a",257),n.bd(7,_c,2,0,"div",179),n.bd(8,vc,3,2,"a",214),n.bd(9,yc,3,1,"span",258),n.bc(),n.bc()),2&e){const e=t.integration,i=t.repoName,a=t.repoUrl,c=n.uc();n.Ib(2),n.Dc("ngIf",c.item.before),n.kc(e),n.hc(1),n.Ib(4),n.Dc("ngIf",(c.item.before||c.item.after).branch_name),n.Ib(1),n.Dc("ngIf",i),n.Ib(1),n.Dc("ngIf",i&&a),n.Ib(1),n.Dc("ngIf",i&&!a)}}const Ic={open:"opened",close:"closed",update:"updated"};let wc=(()=>{class e{constructor(e,t,i,l,m,b){this.sharedTaskService=e,this.sharedData=t,this.modalService=i,this.store=l,this.injector=m,this.changeDetector=b,this.members=[],this.dueDateEnabled=!1,this.canAddAttachments=!0,this.canRemoveAttachments=!0,this.canRemoveOwnAttachments=!0,this.canChangeDescription=!0,this.readonly=!1,this.allowAddToContent=!0,this.allowAddToInbox=!0,this.allowReply=!0,this.allowEmailFeature=!1,this.canManageEmail=!1,this.onSaveComment=new n.o,this.onExpandHistory=new n.o,this.onHighlightComment=new n.o,this.needScroll=new n.o,this.onCommentReply=new n.o,this.onAddToContent=new n.o,this.onAddToInbox=new n.o,this.onScrollToComment=new n.o,this.onEmailUserAction=new n.o,this.onRemoveZoom=new n.o,this.onAttachmentClick=new n.o,this.onThreadCommentAction=new n.o,this.reactionsClickappEnabled=!1,this.showFullContent=!1,this.isGenericItem=!1,this.isSharingApp=d.k,this.taskUserGroupFollowers=y.b,this.PENDING_COMMENT_ID=a.d,this.githubStatusColors=g.c,this.gitlabMergeRequestLabels=Ic,this.AttachmentSource=u.a,this.CommentType=a.c,this.CustomType=c.a,this.trackByValue=o.f,this.statusBorderColors={before:"",after:""},this.isAdmin$=this.store.select(I.getIsAdmin),this.user$=this.store.select(I.getUser),this.threadedComments=h.a.threadedComments,this.sharedData.compatCurrentTeam$.pipe(Object(s.a)(e=>!Object(p.a)(e)),Object(r.a)(1)).subscribe(e=>{void 0!==e.extra_comment_reactions&&(this.reactionsClickappEnabled=e.extra_comment_reactions,this.changeDetector.markForCheck())})}ngAfterViewInit(){this.isNew&&this.needScroll.emit()}ngOnChanges(e){if(e.item&&this.item){if(this.isGenericItem=!(["new_activity","comment","collapsed_items","gh_commit","attachments","gl_commit","gl_issue","gl_merge_request","github_pull_request","bb_commit","bb_pr_created","bb_pr_updated","bb_pr_approved","bb_pr_unapproved","bb_pr_fulfilled","bb_pr_rejected","bb_issue","bb_issue_updated","bb_pull_request"].includes(this.item.field)||"checklist_item_assignee"===this.item.field&&!this.item.checklist_item.assignee),"recurrence_set"===this.item.field&&(this.item.before="string"==typeof this.item.before?JSON.parse(this.item.before):this.item.before||{},this.item.after="string"==typeof this.item.after?JSON.parse(this.item.after):this.item.after||{},this.item.after||this.item.before||!this.item.data||(this.item.after=this.item.data),this.item.before=this.item.before&&this.item.before.recurring?this.item.before:null,this.item.after=this.item.after&&this.item.after.recurring?this.item.after:null),this.item.comment){const e=this.task?Object(k.c)(this.task):window.location.origin+"/t/"+this.taskId;this.commentUrl=`${e}?comment=${this.item.comment.id}`}else this.commentUrl=null;"status"===this.item.field&&(this.statusBorderColors={before:this.checkStatusColor(this.item.before.color)?"#828588":this.item.before.color,after:this.checkStatusColor(this.item.after.color)?"#828588":this.item.after.color}),"gh_commit"===this.item.field&&this.item.after?this.files=Object(f.b)(this.item.after).modified_files:"bb_commit"===this.item.field&&this.item.after?this.files=Object(_.b)(this.item.after).modified_files:"gl_commit"===this.item.field&&this.item.after&&(this.files=Object(v.b)(this.item.after).modified_files)}}saveComment(e){this.onSaveComment.emit(e)}setShowFullContent(){this.showFullContent=!0}expandHistoryBlock(){this.onExpandHistory.emit({item:this.item})}openTask(e,t){this.sharedTaskService.clickTaskLink({id:t.id,customId:t.custom_id,teamId:t.team},e),this.modalService.closeAll()}addReaction(e){this.item.comment=e,this.store.dispatch(new l.a({parent:this.taskId,type:a.c.Task,comment:e}))}addSpecificReaction(e,t,i){i||(this.item.comment=e),this.store.dispatch(new l.a({parent:this.taskId,type:a.c.Task,comment:e,reaction:t}))}removeReaction(e){this.item.comment=e,this.store.dispatch(new l.z({parent:this.taskId,type:a.c.Task,comment:e}))}removeSpecificReaction(e,t,i){i||(this.item.comment=e),this.store.dispatch(new l.z({parent:this.taskId,type:a.c.Task,comment:e,reaction:t}))}changeAssignee(e){this.item.comment=Object.assign(Object.assign({},this.item.comment),e)}markResolved(e){this.item.comment=Object.assign(Object.assign({},this.item.comment),{resolved:e})}showAutomationModal(e){if(e&&this.permissions.can_add_automation){const t=this.modalService.openComponent(m.a,this.injector,{blank:!0,dialogModifier:"cu-modal__dialog-automations"});t.instance.setParent(e.parent_type,e.parent_id),t.instance.changeTab(m.b.Manage)}}updateThreadData({comments:e,threadedReplies:t}){e&&(this.item.comment=Object.assign(Object.assign({},this.item.comment),{threaded_replies:Math.max(t,e.length),threaded_users:Object(b.a)(e.map(e=>e.user).filter(e=>!!e),"id"),new_mentioned_thread_count:0,new_thread_count:0}))}checkStatusColor(e){4===e.length&&(e+=e.slice(1,4));let t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);t/=255,i/=255,a/=255;const c=(Math.max(t,i,a)+Math.min(t,i,a))/2;return c<.47&&"true"===localStorage.getItem("dark-theme")||c>.85&&"false"===localStorage.getItem("dark-theme")}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(w.a),n.Wb(T.a),n.Wb(x.a),n.Wb(C.Store),n.Wb(n.t),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-history-item"]],hostAttrs:[1,"cu-task-history-item"],hostVars:2,hostBindings:function(e,t){2&e&&n.Ob("cu-task-history-item_email",t.item&&t.item.comment&&t.item.comment.emails&&t.item.comment.emails.length)},inputs:{item:"item",projectId:"projectId",project:"project",taskId:"taskId",members:"members",statuses:"statuses",isNew:"isNew",isChanged:"isChanged",dueDateEnabled:"dueDateEnabled",coverImage:"coverImage",canAddAttachments:"canAddAttachments",canRemoveAttachments:"canRemoveAttachments",canRemoveOwnAttachments:"canRemoveOwnAttachments",canChangeDescription:"canChangeDescription",permissions:"permissions",permissionLevel:"permissionLevel",readonly:"readonly",weights:"weights",authedState:"authedState",allowAddToContent:"allowAddToContent",allowAddToInbox:"allowAddToInbox",allowReply:"allowReply",userGroups:"userGroups",taskUserGroups:"taskUserGroups",task:"task",allowEmailFeature:"allowEmailFeature",canManageEmail:"canManageEmail",team:"team",searchString:"searchString",selectedFilterAssignedCommentUserIds:"selectedFilterAssignedCommentUserIds"},outputs:{onSaveComment:"onSaveComment",onExpandHistory:"onExpandHistory",onHighlightComment:"onHighlightComment",needScroll:"needScroll",onCommentReply:"onCommentReply",onAddToContent:"onAddToContent",onAddToInbox:"onAddToInbox",onScrollToComment:"onScrollToComment",onEmailUserAction:"onEmailUserAction",onRemoveZoom:"onRemoveZoom",onAttachmentClick:"onAttachmentClick",onThreadCommentAction:"onThreadCommentAction"},features:[n.Gb],decls:27,vars:15,consts:function(){let e,t,i,a,c,o,s,r,l,u,d,m,h,p,b,g,f,_,v,y,k,I,w,T,x,C,O,S,D,A,j,N,E,$,P,L,U,z,M,R,G,F,V,q,X,B,K,W,H,Z,Q,J,Y,ee,te,ie,ae,ce,ne,oe,se,re,le,ue,de,me,he,pe,be,ge,fe,_e,ve,ye,ke,Ie,we,Te,xe,Ce,Oe,Se,De,Ae,je,Ne,Ee,$e,Pe,Le,Ue,ze,Me,Re,Ge,Fe,Ve,qe,Xe,Be,Ke,We,He,Ze,Qe,Je,Ye;return e=$localize`:@@common_via-automation␟c6ab275dbc592621f7721a464b4d33a3372ddca2␟1431335466087386102:(via Automation)`,t=$localize`:@@common_clickbot␟55f497e30ad8895abd3759387e57259deb87377c␟7615380618440809896:ClickBot`,i=$localize`:@@common_via-username␟c368da4670d5b49a919c3200c2088ef39fc75484␟4037397997424469425:(via ${"\ufffd0\ufffd"}:INTERPOLATION:)`,a=$localize`:@@common_recurring␟67aed6c588eb854f2f30ef642e85147da0027a61␟1011433830042635014:Recurring`,c=$localize`:@@common_via-username␟c368da4670d5b49a919c3200c2088ef39fc75484␟4037397997424469425:(via ${"\ufffd0\ufffd"}:INTERPOLATION:)`,o=$localize`:@@cu-task-history-item__text_task-as-milestone␟d9a6f86598b2b3335df21addf6697302575eb848␟527458216648805094: ${"\ufffd0\ufffd"}:INTERPOLATION: this task as a milestone. `,s=$localize`:␟713a3763bcb006a98f3e69d157e16352c97996fc␟6142341906687906694:{VAR_PLURAL, plural, =1 {tag} other {tags}}`,s=n.lc(s,{VAR_PLURAL:"\ufffd0\ufffd"}),r=$localize`:@@cu-task-history-item__text_added-tags␟3436439d2d45986acbe0351cac7311c120ede90f␟7906307500955380420: added ${s}:ICU: `,l=$localize`:␟f0494875cbc57b0dcacdcfaf7f37904c1501a706␟6142341906687906694:{VAR_PLURAL, plural, =1 {tag} other {tags}}`,l=n.lc(l,{VAR_PLURAL:"\ufffd0\ufffd"}),u=$localize`:@@cu-task-history-item__text_removed-tags␟633fa1ddea61cb3f6381c8906f038aecb79a3ec5␟5922656457892046451: removed ${l}:ICU: `,d=$localize`:@@cu-task-history-item__marked-task-blocking␟f5115bb4333e527646d034840fc143381f68f940␟8315752605395134330: marked this task blocking `,m=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,h=$localize`:@@cu-task-history-item__added-link-to-task␟34600919e4fbfd2cb1d9a1f28274659e45f0dc20␟9007107354353274019: added link to `,p=$localize`:@@common_user-no-access␟b0b9ec2225cca3a798acf387be0c85442df393ca␟3773910013955848579: (You don't have access) `,b=$localize`:@@cu-task-history-item__removed-link-to-task␟918bbb3a9b33807e0c7dd0a67d48ef2ef1ac29fe␟5664313332030529744: removed link to `,g=$localize`:@@common_user-no-access␟b0b9ec2225cca3a798acf387be0c85442df393ca␟3773910013955848579: (You don't have access) `,f=$localize`:␟2b45736c26524ecc5ab541f95ccd852b84d27fa6␟3140367394281879666:{VAR_PLURAL, plural, =1 {subtask} other {subtasks}}`,f=n.lc(f,{VAR_PLURAL:"\ufffd1:1\ufffd"}),_=$localize`:␟f47ac351e3e66fe535ec12fde24fd1977c13a2bb␟7217702103833651218:{VAR_PLURAL, plural, =1 {comment} other {comments}}`,_=n.lc(_,{VAR_PLURAL:"\ufffd1:2\ufffd"}),v=$localize`:␟bb201d02af7101d0e74993d7f13fa6f5aa83be91␟7149352131775855647:{VAR_PLURAL, plural, =1 {item} other {items}}`,v=n.lc(v,{VAR_PLURAL:"\ufffd1:3\ufffd"}),y=$localize`:@@cu-task-history-item__resolved-outstanding-items␟dbf14266f9d04743227a1a25683b4417c017c52b␟2949561791248041698: resolved all outstanding items:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN:${"\ufffd0:1\ufffd"}:INTERPOLATION: ${f}:ICU:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1: ${_}:ICU_1:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_SPAN_2:${"\ufffd0:3\ufffd"}:INTERPOLATION_2: checklist ${v}:ICU_2:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_SPAN:`,y=n.lc(y),k=$localize`:@@cu-task-history-item__marked-this-task-waiting-on␟4c2472250156ababe6042a8c3405bcec45f03c35␟521427988500359619: marked this task waiting on `,I=$localize`:@@common_user-no-access␟b0b9ec2225cca3a798acf387be0c85442df393ca␟3773910013955848579: (You don't have access) `,w=$localize`:@@cu-task-history-item__add-checklist-items-dest␟0bc614bf7c39ff211f928d1f887bff1ffb20b44f␟1497985173359900312: to checklist `,T=$localize`:@@cu-task-history-item__add-checklist-items_summary␟513379b88ef1f82d1678ece4109d927e25f80d89␟2986218262042203664:added ${"\ufffd0\ufffd"}:INTERPOLATION: items`,x=$localize`:@@cu-task-history-item__add-checklist-items_full␟e2e6ad0c35920dcfd74330f3f2d73de3723aba84␟4305935712941922136: added items `,C=$localize`:@@cu-task-history-item__add-checklist-items_one-item␟d59985e6a7101a5e3d535d55b545706db155b5a9␟5834199644079132843:added item`,O=$localize`:@@cu-task-history-item__assign-checklist-item␟46486f3f8a93e802b15431ede6af6bc2042f90be␟233783791973008982: assigned ${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#3\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]"}:CLOSE_TAG_SPAN: to ${"\ufffd#6\ufffd"}:START_TAG_SPAN_1: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#3\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]"}:CLOSE_TAG_SPAN: in ${"\ufffd#7\ufffd"}:START_TAG_SPAN_2: ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#3\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]"}:CLOSE_TAG_SPAN:`,O=n.lc(O),S=$localize`:@@cu-task-history-item__toggle-checklist-item␟0269081f37b924731c140b5c379f3044ea1e3a01␟3073562793051287675: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#3\ufffd"}:START_TAG_SPAN: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_SPAN: in ${"\ufffd#4\ufffd"}:START_TAG_SPAN_1: ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_SPAN:`,S=n.lc(S),D=$localize`:@@cu-task-history-item__priority_change-value␟5c3911b0bf434dd53efae3f889c941416830bd7c␟3455405465452409157: changed priority from ${"\ufffd#2\ufffd"}:START_TAG_DIV_1:${"\ufffd#3\ufffd"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#2:1\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#2:1\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV: to ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV_3:${"\ufffd#2:1\ufffd"}:START_TAG_DIV_2:${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#2:1\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0:1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#2:1\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_DIV_4: none ${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#2:1\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV:`,D=n.lc(D),A=$localize`:@@cu-task-history-item__priority_set-value␟ca7d264aa8e8a297bb98a9a3b66b357c6cb580f1␟3311393556982380304: set priority to ${"\ufffd#2\ufffd"}:START_TAG_DIV_1:${"\ufffd#3\ufffd"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_DIV:`,A=n.lc(A),j=$localize`:@@cu-task-history-item__change-status-value␟6cd2a7807f112aa11d9e550a5eb3b86920ea5e89␟3984373735942977989: changed status from ${"[\ufffd#2\ufffd|\ufffd#5\ufffd]"}:START_TAG_DIV_1:${"\ufffd#3\ufffd"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#6\ufffd|\ufffd/#5\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#6\ufffd|\ufffd/#5\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd#4\ufffd"}:START_TAG_SPAN:to ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"[\ufffd#2\ufffd|\ufffd#5\ufffd]"}:START_TAG_DIV_1:${"\ufffd#6\ufffd"}:START_TAG_DIV_2:${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#6\ufffd|\ufffd/#5\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd|\ufffd/#6\ufffd|\ufffd/#5\ufffd]"}:CLOSE_TAG_DIV:`,j=n.lc(j),N=$localize`:@@cu-task-history-item__removed-assignee␟8a36018c60eda9f5571977cf726dfed3edd9bf40␟7395232233296611454: removed assignee: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,E=$localize`:@@cu-task-history-item__add-assignee␟f76652ae02c0a3073317029ca302036e0e0a95f0␟6087972015312274394: assigned to: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,$=$localize`:@@cu-task-history-item__removed-team-assignee␟7d4e901eec0e8f5d7df92690af47d374966f99a0␟3047411397205886369: removed team: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,P=$localize`:@@cu-task-history-item__added-team-assignee␟2196601657cea2bae38856baf39a9772a62b6926␟603681885543790430: assigned to: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,L=$localize`:@@cu-task-history-item__removed-watcher␟44b9dd8f6e26b1ac377c75d512feeef44becdf43␟3804143142893309315: removed watcher: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,U=$localize`:@@cu-task-history-item__added-watcher␟1fbc311c1bbfa51b5f6a89bf7017709f36e92677␟4117997468616846896: added watcher: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,z=$localize`:@@cu-task-history-item__time-estimate_add␟5ed029e3ab03b6576c7d3cd94d02faa91ad607d5␟1564470354086356431: estimated ${"\ufffd0\ufffd"}:INTERPOLATION:`,M=$localize`:@@cu-task-history-item__time-estimate_remove␟f398a6fb088f7650780116650f04b251ceaac6a1␟7755622157977900109: removed time estimate `,R=$localize`:@@cu-task-history-item__time-estimate_for-user␟f007809e619e3c48899c09b7945be1d909ca3b89␟9099686399994148833: for ${"\ufffd0\ufffd"}:INTERPOLATION: `,G=$localize`:@@cu-task-history-item__change-sprint-points␟70f8eb7ece33a332c609d7aa7975244ae54ef23a␟5736046079150542182:${"\ufffd#2\ufffd"}:START_TAG_SPAN: changed Sprint Points from ${"\ufffd0\ufffd"}:INTERPOLATION: to ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#2\ufffd|\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN_1: for ${"\ufffd0:1\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#2\ufffd|\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd]"}:CLOSE_TAG_SPAN:`,G=n.lc(G),F=$localize`:@@cu-task-history-item__edited-task-description␟1c3ab34bbd290d3d0cf72bed30240dc36c60fd34␟1114719987517372965: edited task description `,V=$localize`:@@cu-task-history-item__change-name␟4723823066dedbd69bac45cb4e5023fc7023926d␟5654918442433507850: changed name `,q=$localize`:@@cu-task-history-item__create-task␟0bbe217a8fbd3cd9e43d57d32a9fe2df491e1a16␟6657788352246428585: created this task ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER_1: by copying ${"\ufffd*2:2\ufffd"}:START_TAG_NG_TEMPLATE:${"[\ufffd/*2:2\ufffd|\ufffd/*2:4\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*3:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER: via recurring the task ${"\ufffd*2:4\ufffd"}:START_TAG_NG_TEMPLATE_1:${"[\ufffd/*2:2\ufffd|\ufffd/*2:4\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"[\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd/#1:3\ufffd\ufffd/*3:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,q=n.lc(q),X=$localize`:@@cu-task-history-item__section-moved␟8e59ab971edd17d84b9b29d30cd87b381e0b5a21␟1758064823091238224: changed ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: the home ${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_NG_CONTAINER: List from ${"[\ufffd#3\ufffd|\ufffd#4\ufffd]"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_SPAN: to ${"[\ufffd#3\ufffd|\ufffd#4\ufffd]"}:START_TAG_SPAN:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_SPAN:`,X=n.lc(X),B=$localize`:@@cu-task-history-item__add-to-another-list␟98795bb3d568ce54dfa67f61718a8cd333edcd81␟6772983357182525040: also added task to ${"\ufffd#2\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,K=$localize`:@@cu-task-history-item__remove-from-another-list␟46c011863370fee260b50b11b6be7b942af889fc␟4680960467152359039: removed task from ${"\ufffd#2\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,W=$localize`:@@cu-task-history-item__create-subtask␟b46160ef1161c9b80044b270940421e939938040␟1291937716989197473: created subtask: ${"\ufffd0\ufffd"}:INTERPOLATION: `,H=$localize`:@@cu-task-history-item__merge-subtask␟1301177eb0dd165eb194dee48431f17180c365ad␟1793425641363311341: merged task: #${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: into this task `,Z=$localize`:@@cu-task-history-item__merge-template␟37e5c9b8c1cdbe76b2ba956435da9e4ef7611578␟8766456575018714053: merged template: ${"\ufffd0\ufffd"}:INTERPOLATION: into this task `,Q=$localize`:@@cu-task-history-item__due-date_set␟1aec9e65e30adb97448c6d22227e3a178a3042e9␟7868942181806998261: set the due date `,J=$localize`:@@common_to-1␟b3dcea94803e39a40986c4f9913529855e39388a␟1042662561872819815: to `,Y=$localize`:@@cu-task-history-item__via-google-calendar␟e411e2ee70c7b1cf1a7757f3a923e833a5671c34␟7116949198485360774:via Google Calendar`,ee=$localize`:@@cu-task-history-item__due-date_remove␟308b8bd5fc068cf7fd74407cf9664160c9f662e5␟4856055961731800571: removed the due date `,te=$localize`:@@cu-task-history-item__due-date_remove-of␟32708e2aa225557db5054289eb3dc2abbf3219db␟3529562270694814938: of `,ie=$localize`:@@cu-task-history-item__via-google-calendar␟e411e2ee70c7b1cf1a7757f3a923e833a5671c34␟7116949198485360774:via Google Calendar`,ae=$localize`:@@common_changed-due-date␟af3f9eb4a17aecfca8790950ca2ab9e046905605␟8604082473980904: changed due date `,ce=$localize`:@@common_from-1␟5dd71cc71c5c6f7a6faa9c8da682610cded65954␟5984572334449070894: from `,ne=$localize`:@@common_to-1␟b3dcea94803e39a40986c4f9913529855e39388a␟1042662561872819815: to `,oe=$localize`:@@cu-task-history-item__via-google-calendar␟e411e2ee70c7b1cf1a7757f3a923e833a5671c34␟7116949198485360774:via Google Calendar`,se=$localize`:@@cu-task-history-item__start-date_set␟659d3b6f98555eab0d87b82dd143a22b3ad6e757␟2135471082299248504: set the start date to `,re=$localize`:@@cu-task-history-item__start-date_remove␟3b47105ae35c7bd58bae1db8887d3154ce05d58a␟7927161674231345475: removed the start date of `,le=$localize`:@@cu-task-history-item__start-date_change␟f3ad162ecaf9a9134b53759fd546b56db28f514b␟5048988011932980246: changed start date from `,ue=$localize`:@@common_to-1␟b3dcea94803e39a40986c4f9913529855e39388a␟1042662561872819815: to `,de=$localize`:@@cu-task-history-item__recurring-log␟fcaf98ee753dfc9a77d7f37c917905393a6d58a1␟696997853931692019: Recurrence: ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: Changed Due Date to ${"\ufffd#2:1\ufffd"}:START_TAG_CU_DATETIME:${"\ufffd/#2:1\ufffd"}:CLOSE_TAG_CU_DATETIME: and Status to  ${"\ufffd#3:1\ufffd"}:START_TAG_SPAN:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd/#3:1\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,me=$localize`:@@cu-task-history-item__recurring-log_set-settings␟8e92b94aa54021464085add0ac83a947c13b5455␟3205452679799673235: set this task to ${"\ufffd#2\ufffd"}:START_TAG_CU_RECURRING_VIEW: recur ${"\ufffd/#2\ufffd"}:CLOSE_TAG_CU_RECURRING_VIEW:`,he=$localize`:@@cu-task-history-item__recurring-log_change-settings␟66739a5ee7f7adf52ca359c1f3c851268ae20fbb␟8673227789540330692:${"\ufffd#2\ufffd"}:START_TAG_CU_RECURRING_VIEW: changed recurring ${"\ufffd/#2\ufffd"}:CLOSE_TAG_CU_RECURRING_VIEW: on this task `,pe=$localize`:@@cu-task-history-item__recurring-log_remove-settings␟4b0be4f8cfb3a3c2f2a5082347d95271b0b1be12␟8847021399519376813:${"\ufffd#2\ufffd"}:START_TAG_CU_RECURRING_VIEW: removed recurring ${"\ufffd/#2\ufffd"}:CLOSE_TAG_CU_RECURRING_VIEW: on this task `,be=$localize`:@@cu-task-history-item__recurring-log-v2_set-settings␟9c44d6f1ecb0e48ec90a7e75ba85a6f5da7d4531␟6408621777323471700: set recurring to ${"\ufffd#2\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN: on this task `,ge=$localize`:@@cu-task-history-item__recurring-log-v2_change-settings␟86e999315a8dd3c27601e89392db1ff3e0af1894␟5397594826531788934: removed recurring from ${"\ufffd#2\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN: on this task `,fe=$localize`:@@cu-task-history-item__recurring-log-v2_remove-settings␟6c1a05eecdc3737fa7327d84528ebed3378437d3␟1339358775361139834: removed recurring `,_e=$localize`:@@cu-task-history-item__recurring-log-v2␟37a34a02bc0d21e384b9499bb29a93c9770edfab␟7567719768615666462: Recurrence: ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: Changed Due Date to ${"\ufffd#2:1\ufffd"}:START_TAG_CU_DATETIME:${"\ufffd/#2:1\ufffd"}:CLOSE_TAG_CU_DATETIME:${"\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,ve=$localize`:@@cu-task-history-item__recurring-log_copy-task␟001d4d0ae0e6068e1298663afd13cd43487e3443␟6006100500745653242: ClickUp (Recurring) created a new task `,ye=$localize`:@@cu-task-history-item__recurring-log_missed␟8cd7a05c6df3543582507fb6361c1408aa2d35e3␟8262496127933572199: ClickUp (Recurring) Task recurrence was skipped because the task was not changed to ${"\ufffd0\ufffd"}:INTERPOLATION:. `,ke=$localize`:@@cu-task-history-item__toggle-assigned-comment-resolution␟ee6a163d7cfd0aab953b76cfcbdb8b178457769b␟3765067200186450012: ${"\ufffd0\ufffd"}:INTERPOLATION: a comment `,Ie=$localize`:@@cu-task-history-item__assigned-comment␟75e4fa3a774600cdaea1f6ed11825564e77ad335␟3567359946057259250: assigned a comment `,we=$localize`:reacted to a comment@@cu-task-history-item__reacted-to-a-comment␟ac1e10b071b6c1eb7d2f5ddde575c106d76a9e8b␟334139517558271746: a comment `,Te=$localize`:@@cu-task-history-item__started-zoom-meeting␟1e9e147b77869b67257d31898863b9953aeac7a2␟7812398988512236491: started a zoom meeting `,xe=$localize`:@@cu-task-history-item__attachment-comment␟2cbc1eb1b65c08c2b165e182914ab8ba05423887␟7046660928038124769: commented on attachment ${"\ufffd#2\ufffd"}:START_LINK: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_LINK:`,Ce=$localize`:@@common_new-activity␟9afcd56cc59ec066dcb6e395189a7384e7f27393␟5488623602891112625: New activity `,Oe=$localize`:@@cu-task-history-item__email-attachment␟d2709b0e6ee51fd498382eddc30331c30a98a6b5␟7142754353136817863:attached an email`,Se=$localize`:@@cu-task-history-item__multiple-attachments␟d3616d4a21527e18fb888a9f9979dfb078f3743b␟5574139413621080750: uploaded ${"\ufffd0\ufffd"}:INTERPOLATION: files `,De=$localize`:@@cu-task-history-item__uploaded-file␟1e726590f292f42d44ce909b0e6a8bcd33e7b938␟8058982862715282968:uploaded a file`,Ae=$localize`:@@cu-task-history-item__vcs-integration_pushed␟020b48b1e435c36315c4644b96cb8f5efc3e81f6␟8852339368668321472: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,je=$localize`:@@common_copy-branch-name␟ff05b6e4bed2652d87e9c009ab930cabe4598262␟3016606420638616347:Copy branch name`,Ne=$localize`:repo location@@common_at-2␟3c92be991d82f660f2781f6d31e1194c8c109f50␟1392617074372706621: at `,Ee=$localize`:␟6cc28e22b35f938b2c0fc0ac05fb554a9b11380f␟5970290431906631001:{VAR_PLURAL, plural, =1 {file} other {files}}`,Ee=n.lc(Ee,{VAR_PLURAL:"\ufffd1\ufffd"}),$e=$localize`:@@cu-task-history-item__vcs-integration_pushed-files-count␟3a58d20de6c1a7ccad86bf555c80cb006a14d80b␟5523771280185342901:${"\ufffd0\ufffd"}:INTERPOLATION: ${Ee}:ICU:`,Pe=$localize`:@@cu-task-history-item__vcs-integration_pr-merged␟2261c8d16330e533c1752565cd936fdf2d62e326␟7884601076322160577: merged ${"\ufffd0\ufffd"}:INTERPOLATION: branch `,Le=$localize`:@@cu-task-history-item__vcs-integration_pr-closed␟6c8f390857f459501f8a3d37b29c546a94ab6b83␟2804879217428038790: closed ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,Ue=$localize`:@@cu-task-history-item__vcs-integration_pr-declined␟c1541faa32077ed5d7cd63d3e9cf87596a51e9c7␟6423636910539082213: declined ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,ze=$localize`:@@cu-task-history-item__vcs-integration_pr-opened␟6c48bb81943bc2671d152bddb103ab973254a5e5␟869967407587501345:${"\ufffd#2\ufffd"}:START_LINK:${"\ufffd#3\ufffd"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"[\ufffd/#2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*7:4\ufffd]"}:CLOSE_LINK:${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV_1: to merge ${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_LINK_1:${"[\ufffd#2:2\ufffd|\ufffd#2:4\ufffd]"}:START_TAG_DIV_2:${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*7:4\ufffd]"}:CLOSE_LINK:${"\ufffd*6:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_DIV_3:  into ${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*7:4\ufffd\ufffd#1:4\ufffd"}:START_LINK_2:${"[\ufffd#2:2\ufffd|\ufffd#2:4\ufffd]"}:START_TAG_DIV_2:${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0:4\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*7:4\ufffd]"}:CLOSE_LINK:`,ze=n.lc(ze),Me=$localize`:@@cu-task-history-item__vcs-integration_pr-merged-1␟9e9a796c5319a2f2e19c3c1e50754e83a2066ff7␟5211191081484252009:${"\ufffd#2\ufffd"}:START_LINK:${"[\ufffd#3\ufffd|\ufffd#2:2\ufffd]"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_LINK:${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV_1: into ${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_DIV_2:${"[\ufffd#3\ufffd|\ufffd#2:2\ufffd]"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#3\ufffd|\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_DIV:`,Me=n.lc(Me),Re=$localize`:@@cu-task-history-item__vcs-integration_pr-closed-1␟df9d1839498ca3f1a07955e3ec2ed15786e6e46c␟1960019391306938487:${"\ufffd#2\ufffd"}:START_LINK:${"\ufffd#3\ufffd"}:START_TAG_DIV:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_LINK:${"\ufffd#4\ufffd"}:START_TAG_DIV_1:with unmerged commits.${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_DIV:`,Re=n.lc(Re),Ge=$localize`:@@git-integration__pr--ci-cd␟a1a27347f50fb0fa33517b60796b41d055e272a8␟6942614065261150717:CI/CD`,Fe=$localize`:pr build success@@git-integration__pr--build-success␟1e035e6ccfab771cad4226b2ad230cb0d4a88cba␟4648900870671159218:Success`,Ve=$localize`:pr build failed@@git-integration__pr--build-error␟6080b77234e92ad41bb52653b239c4c4f851317d␟1519954996184640001:Error`,qe=$localize`:@@common_pending␟e6a27066251ca1e04c5be86ad758380856df2506␟4416413576346763682:Pending`,Xe=$localize`:@@cu-task-history-item__gitlab-issue␟8eadb86d93d23ab158639d9c8ff7b7fa6d3ca84f␟7689804605931806887: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: a Gitlab issue: ${"\ufffd#5\ufffd"}:START_TAG_SPAN:${"\ufffd2\ufffd"}:INTERPOLATION_2:${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,Be=$localize`:@@cu-task-history-item__bitbucket_pr-flow␟179413e3b801035ac3b885a34ff7a4aa65122b32␟5790168261514282486:${"\ufffd*9:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: created ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*10:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: updated ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*11:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_2: approved ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*12:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_NG_CONTAINER_3: unapproved ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd*13:5\ufffd\ufffd#1:5\ufffd|\ufffd*17:8\ufffd\ufffd#1:8\ufffd]"}:START_TAG_NG_CONTAINER_4: merged ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*14:6\ufffd\ufffd#1:6\ufffd"}:START_TAG_NG_CONTAINER_5: closed ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER: Bitbucket pull request ${"[\ufffd#15\ufffd|\ufffd#18\ufffd|\ufffd#19\ufffd]"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#15\ufffd|\ufffd/#18\ufffd|\ufffd/#19\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*16:7\ufffd\ufffd#1:7\ufffd"}:START_TAG_NG_CONTAINER_6: to merge ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd*13:5\ufffd\ufffd#1:5\ufffd|\ufffd*17:8\ufffd\ufffd#1:8\ufffd]"}:START_TAG_NG_CONTAINER_4: from ${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*11:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*12:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*13:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*14:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*16:7\ufffd|\ufffd/#1:8\ufffd\ufffd/*17:8\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd#15\ufffd|\ufffd#18\ufffd|\ufffd#19\ufffd]"}:START_TAG_SPAN:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#15\ufffd|\ufffd/#18\ufffd|\ufffd/#19\ufffd]"}:CLOSE_TAG_SPAN: into ${"[\ufffd#15\ufffd|\ufffd#18\ufffd|\ufffd#19\ufffd]"}:START_TAG_SPAN:${"\ufffd2\ufffd"}:INTERPOLATION_2:${"[\ufffd/#15\ufffd|\ufffd/#18\ufffd|\ufffd/#19\ufffd]"}:CLOSE_TAG_SPAN:`,Be=n.lc(Be),Ke=$localize`:@@cu-task-history-item__bitbucket_issue-flow␟fdf0c0014062185f8ad984666127c3c68d862c85␟1922053132960019892:${"\ufffd*9:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:opened${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*10:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1:updated${"[\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*10:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER: Bitbucket issue ${"\ufffd#11\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,Ke=n.lc(Ke),We=$localize`:@@cu-task-history-item__grouped-updates␟395596f90efed394a5b822708a8f4e96858dea18␟752968707503742779:1 more update`,He=$localize`:@@cu-task-history-item__grouped-updates_many␟bb4a01356026fdd9f2363a8b063b8536ffe17a6c␟721679192000494404:${"\ufffd0\ufffd"}:INTERPOLATION: more updates`,Ze=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,Qe=$localize`:@@cu-task-history-item__vcs-integration_linked-branch␟39e41109ff9146317b1d7f086be26a230bd6a781␟648550027389944327:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:un${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:linked a ${"\ufffd0\ufffd"}:INTERPOLATION: branch `,Je=$localize`:@@common_copy-branch-name␟ff05b6e4bed2652d87e9c009ab930cabe4598262␟3016606420638616347:Copy branch name`,Ye=$localize`:repo location@@common_at-2␟ae337e65eb5aedf1f220c5cd4638f9bfd50bf8c4␟2411154777198037668: at `,[["class","task-history-item",4,"ngIf"],["class","task-history-item__divider",3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","task-history-attachment",4,"ngIf"],["versionControlTaskHistoryItem",""],[4,"ngIf"],["pullRequestTemplate",""],["class","task-history-git",4,"ngIf"],["class","task-history-zoom",4,"ngIf"],["class","task-history-group__controls",4,"ngIf"],["recurTemplate",""],["taskLinkTemplate",""],["nestedThreadTemplate",""],["versionControlBranch",""],[1,"task-history-item"],[1,"task-history-item__content",3,"ngSwitch"],["class","task-history-item__name task-history-item__name_btn",3,"task-history-item__name_btn-hover","ngClass","cuUserProfileLink","automation","click",4,"ngIf"],["class","task-history-item__name",4,"ngIf"],[3,"class","innerHtml",4,"ngSwitchCase"],["class","task-history-item__text",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","task-history-item__changed-name",4,"ngSwitchCase"],["class","task-history-item__content",4,"ngSwitchCase"],["class","task-history-item__recur",4,"ngSwitchCase"],["class","task-history-item__copy-recur",4,"ngSwitchCase"],[1,"task-history-item__date",3,"cuTooltip","tooltipDelay"],[1,"task-history-item__name","task-history-item__name_btn",3,"ngClass","cuUserProfileLink","automation","click"],e,[1,"task-history-item__name"],t,i,a,c,[3,"innerHtml"],[1,"task-history-item__text"],o,r,["modifier","list-view",3,"readOnly","tags"],u,[1,"time-tracking-notifs",2,"margin-left","5px",3,"totalTimeTracked","start","displayLabel"],d,["class","cu-dependencies__tasks-name",3,"cuLink","click",4,"ngIf"],["class","task-history-item__status-text",4,"ngIf"],[1,"cu-dependencies__tasks-name",3,"cuLink","click"],[1,"task-history-item__status-text"],m,h,["class","task-history-item__text",4,"ngIf"],p,b,g,y,["class","task-history-item__status-text task-history-item__resolved",3,"ngStyle",4,"ngIf"],[1,"task-history-item__status-text","task-history-item__resolved",3,"ngStyle"],k,I,[3,"click",4,"ngIf"],["class","task-history-item__checklist-history",4,"ngIf"],w,[3,"ngStyle"],[3,"click"],[1,"task-history-item__short-content"],T,[1,"task-history-item__checklist-history"],x,["class","task-history-item__checklist-history__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"task-history-item__checklist-history__item"],C,["class","task-history-item__checklist-history__item",4,"ngIf"],O,[1,"task-history-item__name","task-history-item__name_btn",3,"ngClass","cuUserProfileLink"],[1,"task-history-item__status-text","task-history-item__status-text_nocapitalize",3,"ngStyle"],S,D,[1,"task-history-item__priority-text"],[1,"task-history-item__priority-icon",3,"icon","ngStyle"],["class","task-history-item__priority-text",4,"ngIf"],A,j,[1,"task-history-item__status-value"],[1,"task-history-item__status-value-indicator",3,"ngStyle"],N,E,$,P,L,U,z,M,R,G,F,[1,"task-history-item__changed-name"],[1,"task-history-item__changed-name-description"],V,[1,"task-history-item__values",3,"innerHtml"],q,[3,"ngTemplateOutlet","ngTemplateOutletContext"],X,B,K,W,H,Z,[1,"task-history-item__content"],["class","task-history-item__due-date",4,"ngIf"],[1,"task-history-item__due-date"],Q,J,[3,"date","showTime","noHighlight"],Y,ee,te,ie,ae,ce,ne,oe,se,re,le,ue,[1,"task-history-item__recur"],["icon","recurring",1,"task-history-item__recurring-icon"],de,[1,"task-history-item__status-text",3,"ngStyle"],me,["modifier","cu-task-recurring",3,"itemTemplate","options","openOnClick","showIcon","showLabel","showFull","readOnly","statuses","dueDate","teamId"],he,pe,be,ge,fe,_e,[1,"task-history-item__copy-recur"],ve,ye,ke,[1,"task-history-item__link-comment",3,"cuPreventDefault","href","click"],Ie,["class","cu-notification-item__icon task-history-item__icon_thumbs-up",3,"icon",4,"ngIf"],["class","cu-notification-item__icon task-history-item__icon_thumbs-up",3,"ngStyle",4,"ngIf"],we,[1,"cu-notification-item__icon","task-history-item__icon_thumbs-up",3,"icon"],[1,"cu-notification-item__icon","task-history-item__icon_thumbs-up",3,"ngStyle"],Te,xe,[1,"task-history-item__link-comment",3,"cuPreventDefault","click"],[1,"task-history-item__divider",3,"ngClass"],[1,"task-history-item__divider-text"],Ce,[1,"task-history-item__divider-line"],[3,"ngClass"],[3,"projectId","project","coverImage","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","permissionLevel","readonly","projectMembers","taskId","weights","allowEmailFeature","comment","lazyLoadEntities","editorId","allowReply","allowLink","threadData","submitting","allowThread","allowNormalThread","threadTemplate","fromAutomation","canManageEmail","userGroups","onAddReaction","onRemoveReaction","onEmailUserAction","onAssigneeChange","onChange",4,"ngIf","ngIfElse"],["taskComment",""],[3,"projectId","project","coverImage","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","permissionLevel","readonly","projectMembers","taskId","weights","allowEmailFeature","comment","lazyLoadEntities","editorId","allowReply","allowLink","threadData","submitting","allowThread","allowNormalThread","threadTemplate","fromAutomation","canManageEmail","userGroups","onAddReaction","onRemoveReaction","onEmailUserAction","onAssigneeChange","onChange"],[3,"projectId","coverImage","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","permissionLevel","readonly","projectMembers","taskId","weights","comment","searchString","selectedFilterAssignedCommentUserIds","lazyLoadEntities","editorId","allowReply","allowLink","allowAddToContent","allowAddToInbox","allowThread","showAddFollowers","threadTemplate","fromAutomation","userGroups","taskUserGroups","task","onShowAutomation","onChange","onAddReaction","onRemoveReaction","onAssigneeChange","onToggleResolved","onCommentReply","onAddToContent","onScrollToComment","onAddToInbox"],[1,"task-history-attachment"],[1,"task-history-attachment__header"],[1,"task-history-attachment__name","task-history-attachment__name_btn",3,"ngClass","cuUserProfileLink"],[1,"task-history-attachment__text",3,"ngPlural"],["ngPluralCase","=1"],["ngPluralCase","other"],["uploadedAFileTmpl",""],[1,"task-history-attachment__date",3,"cuTooltip","tooltipDelay"],[1,"task-history-attachment__body"],[3,"taskId","canChangeDescription","coverImage","item"],[4,"ngIf","ngIfElse"],Oe,Se,De,[1,"task-history-git-v2","task-history-git-v2-pushes"],[1,"task-history-git-v2__header"],[1,"task-history-git-v2__header-left"],Ae,[1,"task-history-git-v2__header-right",3,"cuTooltip","tooltipDelay"],[1,"task-history-git-v2__body"],[1,"task-history-git-v2__body-items"],["class","task-history-git-v2__branch","target","_blank",3,"disabled","href",4,"ngIf"],["class","task-history-git-v2__body-text",4,"ngIf"],["class","task-history-git-v2__repo","target","_blank",3,"disabled","href",4,"ngIf"],["target","_blank","class","task-history-git-v2__message",3,"disabled","href",4,"ngIf"],["target","_blank",1,"task-history-git-v2__branch",3,"href"],["icon","git-branch"],["icon","copy2","ngxClipboard","","cuTooltip",je,1,"copy",3,"cbContent","click"],[1,"task-history-git-v2__body-text"],Ne,["target","_blank",1,"task-history-git-v2__repo",3,"href"],["icon","git-repo"],["target","_blank",1,"task-history-git-v2__message",3,"href"],["class","task-history-git-v2__sha",4,"ngIf"],["cuDropdown","",4,"ngIf"],[1,"task-history-git-v2__sha"],["cuDropdown",""],["cuDropdownToggle","",1,"task-history-git-v2__files",3,"click"],$e,[3,"files",4,"cuDropdownMenu"],[3,"files"],["class","task-history-git-v2 task-history-git-v2-prs",4,"ngIf"],[1,"task-history-git-v2","task-history-git-v2-prs"],[1,"task-history-git-v2__body","no-border"],["class","task-history-git-v2__body-items",4,"ngIf"],[1,"task-history-git-v2__footer"],[1,"task-history-git-v2__footer-reviewer"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","no-underline",4,"ngIf"],["class","task-history-git-v2__footer-build-status",4,"ngIf"],[1,"task-history-git-v2__footer-updates"],Pe,Le,Ue,ze,["target","_blank",1,"task-history-git-v2__pr",3,"href"],["icon","git-pr"],["class","task-history-git-v2__repo","target","_blank",3,"href",4,"ngIf"],Me,["class","task-history-git-v2__branch",4,"ngIf"],[1,"task-history-git-v2__branch"],Re,["class","task-history-git-v2__footer-reviewer-avatar",3,"src",4,"ngIf"],["class","task-history-git-v2__footer-reviewer-name",4,"ngIf"],[1,"task-history-git-v2__footer-reviewer-avatar",3,"src"],[1,"task-history-git-v2__footer-reviewer-name"],[1,"no-underline"],[1,"task-history-git-v2__footer-build-status"],Ge,["cuTooltip",Fe,"class","task-history-git-v2__footer-build-status-icon task-history-git-v2__footer-build-status-icon_success","icon","cu2-check",4,"ngIf"],["cuTooltip",Ve,"class","task-history-git-v2__footer-build-status-icon task-history-git-v2__footer-build-status-icon_failure","icon","cu2-close",4,"ngIf"],["cuTooltip",qe,"class","task-history-git-v2__footer-build-status-icon task-history-git-v2__footer-build-status-icon_pending","icon","cu2-pending",4,"ngIf"],["cuTooltip",Fe,"icon","cu2-check",1,"task-history-git-v2__footer-build-status-icon","task-history-git-v2__footer-build-status-icon_success"],["cuTooltip",Ve,"icon","cu2-close",1,"task-history-git-v2__footer-build-status-icon","task-history-git-v2__footer-build-status-icon_failure"],["cuTooltip",qe,"icon","cu2-pending",1,"task-history-git-v2__footer-build-status-icon","task-history-git-v2__footer-build-status-icon_pending"],[1,"task-history-git"],["target","_blank",1,"task-history-git__header",3,"href"],[1,"task-history-git__meta"],[1,"task-history-git__description"],Xe,[1,"task-history-git__gitlab-title"],[1,"task-history-git__date",3,"cuTooltip","tooltipDelay"],["actorName",""],Be,Ke,[1,"task-history-zoom"],[3,"meeting","recordings","participants","allowRemove","onRemove"],[1,"task-history-group__controls"],[1,"task-history-group__controls-icon",3,"icon"],[1,"task-history-group__controls-text",3,"ngPlural","click"],We,He,["class","task-history-item__link-comment task-history-item__link-comment_dashed",3,"cuLink","click",4,"ngIf"],["class","task-history-item__link-comment_dashed",4,"ngIf"],[1,"task-history-item__link-comment","task-history-item__link-comment_dashed",3,"cuLink","click"],[1,"task-history-item__link-comment_dashed"],Ze,[3,"parentId","type","focusOnInit","members","assignedComments","filters","popupInBody","readOnly","user","dropFileParentId","searchString","doNotLoadComments","threadedReplies","showUserGroups","taskId","taskUserGroups","allowLink","allowAddToInbox","allowAddToContent","permissions","permissionLevel","onCommentBarCancel","onChangeComments","onThreadCommentAction","onScrollToComment","onAddToContent"],Qe,[1,"task-history-git-v2__body","top-margin","no-padding"],["class","task-history-git-v2__branch","target","_blank",3,"href",4,"ngIf"],["class","task-history-git-v2__repo",4,"ngIf"],["ngxClipboard","","cuTooltip",Je,1,"copy",3,"cbContent","icon","click"],Ye,[1,"task-history-git-v2__repo"]]},template:function(e,t){1&e&&(n.bd(0,Di,57,61,"div",0),n.bd(1,ji,4,3,"div",1),n.bd(2,Pi,4,7,"div",2),n.bd(3,Ri,17,21,"div",3),n.bd(4,Wi,14,13,"ng-template",null,4,n.cd),n.bd(6,Qi,1,9,void 0,5),n.bd(7,aa,1,12,void 0,5),n.bd(8,oa,1,7,void 0,5),n.bd(9,la,1,7,void 0,5),n.bd(10,Pa,1,1,"ng-template",null,6,n.cd),n.bd(12,za,1,9,void 0,5),n.bd(13,Ma,10,11,"div",7),n.bd(14,Fa,1,9,void 0,5),n.bd(15,Ya,24,21,"div",7),n.bd(16,cc,16,13,"div",7),n.bd(17,nc,4,8,"div",8),n.bd(18,rc,5,2,"div",9),n.bd(19,lc,0,0,"ng-template",null,10,n.cd),n.bd(21,hc,3,3,"ng-template",null,11,n.cd),n.bd(23,bc,2,26,"ng-template",null,12,n.cd),n.bd(25,kc,10,6,"ng-template",null,13,n.cd)),2&e&&(n.Dc("ngIf",t.isGenericItem),n.Ib(1),n.Dc("ngIf","new_activity"===t.item.field),n.Ib(1),n.Dc("ngIf","comment"===t.item.field),n.Ib(1),n.Dc("ngIf","attachments"===t.item.field),n.Ib(3),n.Dc("ngIf","gh_commit"===t.item.field),n.Ib(1),n.Dc("ngIf","github_pull_request"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pull_request"===t.item.field),n.Ib(1),n.Dc("ngIf","gl_merge_request"===t.item.field),n.Ib(3),n.Dc("ngIf","gl_commit"===t.item.field),n.Ib(1),n.Dc("ngIf","gl_issue"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_commit"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_pr_created"===t.item.field||"bb_pr_updated"===t.item.field||"bb_pr_approved"===t.item.field||"bb_pr_unapproved"===t.item.field||"bb_pr_fulfilled"===t.item.field||"bb_pr_rejected"===t.item.field),n.Ib(1),n.Dc("ngIf","bb_issue"===t.item.field||"bb_issue_updated"===t.item.field),n.Ib(1),n.Dc("ngIf","zoom_meeting"===t.item.field),n.Ib(1),n.Dc("ngIf","collapsed_items"===t.item.field))},directives:[O.q,O.u,O.v,S.a,O.o,D.a,A.a,j.a,N.a,O.t,O.p,E.a,O.x,$.a,P.a,L.a,U.a,z.a,O.r,O.s,q,X.a,B.b,K.a,W.a,H.a,Z.a,Q.a],pipes:[J.a,Y.a,ee.a,te.a,ie.a,O.b,ae.b,ce.a,ne.a,oe.a,se.a,re.a,de,me.a,O.A,O.n],styles:[".cu-task-history-item{display:block;flex-shrink:0;margin-bottom:20px}.cu-task-history-item_highlight .cu-comment__body{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-history-item_highlight .cu-comment__body{border-color:var(--theme-main-color)}}.cu-task-history-item .cu-comment{margin:0}.cu-task-history-item .cu-comment .cu-comment{margin:15px 0}.cu-task-history-item_email{margin-bottom:50px}"],encapsulation:2,changeDetection:0}),e})()},plWl:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var a=i("fXoL"),c=i("jJQC"),n=i("5b//"),o=i("ofXK"),s=i("UdVN"),r=i("O5gs"),l=i("peMq");let u=(()=>{class e{constructor(){}transform(e,t="-",i){return e?String(e).replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1"+t):""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Vb({name:"addDividers",type:e,pure:!0}),e})();var d=i("O/4l");function m(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-dropdown-list",18),a.qc("onSelect",function(t){return a.Uc(e),a.uc(2).selectMenuItem(t)}),a.Xb(1,"div",19),a.bc()}if(2&e){const e=a.uc(2);a.Dc("items",e.menuItems)}}function h(e,t){if(1&e&&a.Xb(0,"cu-user-group",20),2&e){const e=a.uc(2);a.Dc("users",e.users)("leadCounter",10)}}function p(e,t){if(1&e&&(a.ac(0),a.cc(1,"div",1),a.Xb(2,"div",2),a.cc(3,"div"),a.cc(4,"div",3),a.ac(5),a.gc(6,4),a.Zb(),a.cc(7,"div",5),a.gc(8,6),a.bc(),a.bc(),a.bc(),a.bc(),a.cc(9,"div",7),a.cc(10,"div",1),a.cc(11,"div"),a.cc(12,"div",3),a.dd(13),a.bc(),a.cc(14,"div",1),a.cc(15,"div",8),a.dd(16),a.bc(),a.cc(17,"div",9),a.dd(18),a.vc(19,"date"),a.bc(),a.bc(),a.bc(),a.Xb(20,"div",10),a.cc(21,"div",11),a.ac(22),a.gc(23,12),a.Zb(),a.dd(24),a.vc(25,"addDividers"),a.bc(),a.bd(26,m,2,1,"cu-dropdown-list",13),a.bc(),a.cc(27,"div",1),a.bd(28,h,1,2,"cu-user-group",14),a.Xb(29,"div",10),a.cc(30,"div",15),a.cc(31,"a",16),a.gc(32,17),a.bc(),a.bc(),a.bc(),a.bc(),a.Zb()),2&e){const e=a.uc();a.Ib(13),a.ed(null==e.meeting?null:e.meeting.topic),a.Ib(3),a.ed(null==e.meeting?null:e.meeting.status),a.Ib(2),a.fd(" ",a.yc(19,7,null==e.meeting?null:e.meeting.start_time,"short",null==e.meeting?null:e.meeting.timezone)," "),a.Ib(6),a.fd(": ",a.yc(25,11,null==e.meeting?null:e.meeting.id,"-",3)," "),a.Ib(2),a.Dc("ngIf",e.allowRemove),a.Ib(2),a.Dc("ngIf",null==e.users?null:e.users.length),a.Ib(3),a.Dc("href",null==e.meeting?null:e.meeting.join_url,a.Xc)}}function b(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-dropdown-list",18),a.qc("onSelect",function(t){return a.Uc(e),a.uc(2).selectMenuItem(t)}),a.Xb(1,"div",19),a.bc()}if(2&e){const e=a.uc(2);a.Dc("items",e.menuItems)}}function g(e,t){if(1&e&&(a.ac(0),a.cc(1,"div",1),a.Xb(2,"div",2),a.cc(3,"div"),a.cc(4,"div",3),a.ac(5),a.gc(6,21),a.Zb(),a.cc(7,"div",5),a.gc(8,22),a.bc(),a.bc(),a.cc(9,"div",23),a.mc(10,24),a.Xb(11,"span"),a.jc(),a.bc(),a.bc(),a.bc(),a.cc(12,"div",7),a.cc(13,"div",1),a.cc(14,"div",25),a.cc(15,"div",26),a.gc(16,27),a.bc(),a.cc(17,"div",28),a.dd(18),a.vc(19,"date"),a.bc(),a.bc(),a.cc(20,"div",25),a.cc(21,"div",26),a.gc(22,29),a.bc(),a.cc(23,"div",28),a.dd(24),a.vc(25,"usernames"),a.bc(),a.bc(),a.Xb(26,"div",10),a.bd(27,b,2,1,"cu-dropdown-list",13),a.bc(),a.bc(),a.Zb()),2&e){const e=a.uc();a.Ib(11),a.kc(null==e.meeting?null:e.meeting.topic),a.hc(10),a.Ib(7),a.fd(" ",a.yc(19,4,null==e.meeting?null:e.meeting.start_time,"short",null==e.meeting?null:e.meeting.timezone)," "),a.Ib(6),a.fd(" ",a.wc(25,8,e.users)," "),a.Ib(3),a.Dc("ngIf",e.allowRemove)}}function f(e,t){if(1&e&&(a.cc(0,"div",34),a.cc(1,"div",35),a.dd(2),a.vc(3,"date"),a.bc(),a.cc(4,"a",36),a.Xb(5,"div",37),a.ac(6),a.gc(7,38),a.Zb(),a.bc(),a.cc(8,"a",39),a.gc(9,40),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(2);a.Ib(2),a.fd(" ",a.yc(3,3,null==e?null:e.recording_end,"short",null==i.meeting?null:i.meeting.timezone)," "),a.Ib(2),a.Dc("href",null==e?null:e.play_url,a.Xc),a.Ib(4),a.Dc("href",null==e?null:e.download_url,a.Xc)}}function _(e,t){if(1&e&&(a.ac(0),a.cc(1,"div",30),a.mc(2,31),a.Xb(3,"span"),a.jc(),a.bc(),a.cc(4,"div",32),a.bd(5,f,10,7,"div",33),a.bc(),a.Zb()),2&e){const e=a.uc();a.Ib(3),a.kc(null==e.meeting?null:e.meeting.topic),a.hc(2),a.Ib(2),a.Dc("ngForOf",e.records)("ngForTrackBy",e.trackById)}}const v={id:"Remove",title:$localize`:@@common_delete:Delete`,icon:"cu2-trash"};let y=(()=>{class e{constructor(){this.allowRemove=!1,this.onRemove=new a.o,this.users=[],this.presetColors=n.b,this.menuItems=[v],this.trackById=Object(c.d)("id")}ngOnInit(){}ngOnChanges(e){e.participants&&(this.users=(this.participants||[]).map((e,t)=>({id:e.participant_id,username:e.participant_name,initials:e.participant_name.charAt(0),email:"",color:this.getColor(t+parseInt(this.meeting.id.toString().slice(-1),10)),external:!0})),e.recordings&&(this.records=(this.recordings||[]).map(e=>e.recording_data)))}getColor(e=9){return this.presetColors[(e=0===e?1:e)<this.presetColors.length?e:e%this.presetColors.length+1]}selectMenuItem(e){switch(e.id){case"Remove":this.onRemove.emit()}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-zoom-meeting-info"]],hostAttrs:[1,"cu-zoom-meeting-info"],inputs:{meeting:"meeting",recordings:"recordings",participants:"participants",allowRemove:"allowRemove"},outputs:{onRemove:"onRemove"},features:[a.Gb],decls:3,vars:3,consts:function(){let e,t,i,a,c,n,o,s,r,l,u,d;return e=$localize`:video conferencing provider@@common_zoom␟f213ab5d26bea476e6f6281f3e3703a9e82c6590␟6886377380821400711: Zoom `,t=$localize`:@@cu-zoom-meeting-info__title-badge_integration␟a89d0aac1b76cd805cc49299f1b6c9edf20e5322␟6678352229508074803: integration `,i=$localize`:@@cu-zoom-meeting-info__meeting-id␟904b905e6fee57069ebd125a5edfabdf73f53f92␟1402974133087780403:Meeting ID`,a=$localize`:@@common_join␟1360aa52f3faeed54a94917fb1c0d68d655eab2d␟7461485665109125711: Join `,c=$localize`:video conferencing provider@@common_zoom␟f213ab5d26bea476e6f6281f3e3703a9e82c6590␟6886377380821400711: Zoom `,n=$localize`:@@cu-zoom-meeting-info__title-badge_integration␟a89d0aac1b76cd805cc49299f1b6c9edf20e5322␟6678352229508074803: integration `,o=$localize`:@@cu-zoom-meeting-info__meeting-summary␟570d414d257e910f48e96e0a27a739ae1003e363␟5257866191598841257: Here is the summary for the meeting ${"\ufffd#11\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:@@common_date␟174689e483431fac741c0a447b4ca299128997fc␟5806219502671150425: Date `,r=$localize`:@@cu-zoom-meeting-info__attendees␟002c12b0249ca3c31b157dfedb49f4f5e8b5edfc␟2890591123930239705: Attendees `,l=$localize`:@@cu-zoom-meeting-info__meeting-recording␟9fad206d35be95df9ddecdf0c7a77325b42fd313␟2032784524179593436: Here is the recording from meeting ${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,u=$localize`:@@common_play␟9b00b4b718d67ef6351bba15acd4ad0f2bc47927␟8564202903947049539:Play`,d=$localize`:@@common_download␟dc75033a5238fdc4f462212c847a45ba8018a3fd␟3099741642167775297:Download`,[[4,"ngIf"],[1,"cu-zoom-meeting-info__row"],["icon","zoom-symbol_color",1,"cu-zoom-meeting-info__avatar"],[1,"cu-zoom-meeting-info__title"],e,[1,"cu-zoom-meeting-info__title-badge"],t,[1,"cu-zoom-meeting-info__container","cu-zoom-meeting-info__container_summary"],[1,"cu-zoom-meeting-info__status"],[1,"cu-zoom-meeting-info__date"],[1,"cu-zoom-meeting-info__row-divider"],[1,"cu-zoom-meeting-info__id"],i,["class","cu-zoom-meeting-info__settings-menu",3,"items","onSelect",4,"ngIf"],["class","cu-zoom-meeting-info__users",3,"users","leadCounter",4,"ngIf"],[1,"cu-zoom-meeting-info__buttons"],["target","_blank",1,"cu-btn","cu-btn_sm","cu-zoom-meeting-info__btn",3,"href"],a,[1,"cu-zoom-meeting-info__settings-menu",3,"items","onSelect"],["icon","cu2-ellipsis",1,"cu-zoom-meeting-info__settings-toggle"],[1,"cu-zoom-meeting-info__users",3,"users","leadCounter"],c,n,[1,"cu-zoom-meeting-info__description"],o,[1,"cu-zoom-meeting-info__summary"],[1,"cu-zoom-meeting-info__summary-label"],s,[1,"cu-zoom-meeting-info__summary-value"],r,[1,"cu-zoom-meeting-info__description","cu-zoom-meeting-info__description_record"],l,[1,"cu-zoom-meeting-info__container","cu-zoom-meeting-info__container_record"],["class","cu-zoom-meeting-info__record",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-zoom-meeting-info__record"],[1,"cu-zoom-meeting-info__record-date"],["target","_blank",1,"cu-zoom-meeting-info__record-link",3,"href"],["icon","play-rounded",1,"cu-zoom-meeting-info__record-play"],u,["download","",1,"cu-zoom-meeting-info__record-link",3,"href"],d]},template:function(e,t){1&e&&(a.bd(0,p,33,15,"ng-container",0),a.bd(1,g,28,10,"ng-container",0),a.bd(2,_,6,3,"ng-container",0)),2&e&&(a.Dc("ngIf","ended"!==(null==t.meeting?null:t.meeting.status)),a.Ib(1),a.Dc("ngIf","ended"===(null==t.meeting?null:t.meeting.status)),a.Ib(1),a.Dc("ngIf",null==t.records?null:t.records.length))},directives:[o.q,s.a,r.a,l.a,o.p],pipes:[o.e,u,d.a],styles:['.cu-zoom-meeting-info__container{padding:13px 15px;position:relative;display:block;border-radius:3px;border:1px solid #e9ebf0;background:#fff}.contrast_high .cu-zoom-meeting-info__container{border-color:#dedede}.dark-theme .cu-zoom-meeting-info__container{background:#384047;border-color:#1e272e}.cu-zoom-meeting-info__container+.cu-zoom-meeting-info__container,.cu-zoom-meeting-info__row+.cu-zoom-meeting-info__container{margin-top:15px}.cu-zoom-meeting-info__container:before{content:"";display:block;position:absolute;top:0;left:-1px;width:4px;height:100%;border-radius:2px;background:#4a8cff}.cu-zoom-meeting-info__container_summary{margin-left:45px}.cu-zoom-meeting-info__container_record{margin-left:45px;padding:10px 15px}.cu-zoom-meeting-info__container_record,.dark-theme .cu-zoom-meeting-info__container_record{background:transparent;border-color:transparent}.cu-zoom-meeting-info__avatar{width:35px;height:35px;margin-right:10px}.cu-zoom-meeting-info__title{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1.3;margin-top:1px;margin-bottom:2px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-zoom-meeting-info__title{font-family:var(--global-font-support)}}.cu-zoom-meeting-info__title-badge{display:inline-flex;align-items:center;justify-content:center;text-transform:uppercase;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;padding:5px 6px 4px;margin-left:4px;border-radius:3px;color:#b9bec7;background:#f2f4f7}.dark-theme .cu-zoom-meeting-info__title-badge{color:#828588;background:#1e272e}.cu-zoom-meeting-info__id{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;margin-top:2px;flex-shrink:0}.cu-zoom-meeting-info__summary{padding-right:70px}.cu-zoom-meeting-info__summary-label{font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:7px;color:#292d34}.dark-theme .cu-zoom-meeting-info__summary-label{color:#d5d6d7}.cu-zoom-meeting-info__summary-value{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1.2 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-zoom-meeting-info__summary-value{color:#d5d6d7}.cu-zoom-meeting-info__settings-toggle{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;display:none;width:20px;height:20px;padding:2px;margin-top:-3px;margin-left:12px;fill:#b9bec7}.cu-dropdown-list_opened .cu-zoom-meeting-info__settings-toggle,.cu-zoom-meeting-info__settings-toggle:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-dropdown-list_opened .cu-zoom-meeting-info__settings-toggle,.cu-zoom-meeting-info__settings-toggle:hover{fill:var(--theme-main-color)}}.cu-dropdown-list_opened .cu-zoom-meeting-info__settings-toggle,.cu-zoom-meeting-info__container:hover .cu-zoom-meeting-info__settings-toggle{display:block}.cu-zoom-meeting-info__row{display:flex}.cu-zoom-meeting-info__row-divider{flex-grow:1}.cu-zoom-meeting-info__status{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-right:4px;text-transform:capitalize}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-zoom-meeting-info__status{font-family:var(--global-font-support)}}.cu-zoom-meeting-info__description{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-zoom-meeting-info__description{font-family:var(--global-font-support)}}.cu-zoom-meeting-info__description span{font-weight:500}.cu-zoom-meeting-info__description_record{margin:14px 0 10px 45px}.cu-zoom-meeting-info__date{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-zoom-meeting-info__date{font-family:var(--global-font-support)}}.cu-zoom-meeting-info__buttons{display:flex;margin-top:10px}.cu-zoom-meeting-info__btn.cu-btn{height:36px;padding:0 35px;background:#4a8cff;border-color:#4a8cff}.cu-zoom-meeting-info__btn.cu-btn:hover{background-color:#176cff;border-color:#176cff}.cu-zoom-meeting-info__btn+.cu-zoom-meeting-info__btn{margin-left:15px}.cu-zoom-meeting-info__users{margin-top:10px}.cu-zoom-meeting-info__record-date{font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:7px;color:#292d34}.dark-theme .cu-zoom-meeting-info__record-date{color:#d5d6d7}.cu-zoom-meeting-info__record-play{background:#4a8cff;border-radius:50%;width:17px;height:17px;padding:5px 4px 5px 5px;margin-right:4px;transform:translateY(-1px);fill:#fff;display:inline-flex}.cu-zoom-meeting-info__record-link{color:#4a8cff;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:15px}.cu-zoom-meeting-info__record-link:hover{text-decoration:underline}'],encapsulation:2,changeDetection:0}),e})()},qdLs:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("ofXK"),c=i("gb9A"),n=i("K0KF"),o=i("tyNb"),s=i("1M0N"),r=i("7MBn"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.a,o.l,s.a,r.a]]}),e})()},ql4J:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("odS2"),c=i("ofXK"),n=i("uMAD"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[c.c,n.a,a.a]]}),e})()},rjFr:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("ofXK"),c=i("3Pt+"),n=i("K0KF"),o=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.l,n.a]]}),e})()},uEdY:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("ofXK"),c=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},uMAD:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var a=i("ofXK"),c=i("1M0N"),n=i("Dvla"),o=i("gb9A"),s=i("K0KF"),r=i("fTg4"),l=i("6FZh"),u=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,n.b,o.a,s.a,r.a,l.a]]}),e})()},wXlP:function(e,t,i){"use strict";i.d(t,"a",function(){return Y});var a=i("ofXK"),c=i("3Pt+"),n=i("DiaY"),o=i("EDFS"),s=i("+VAm"),r=i("X5rV"),l=i("1M0N"),u=i("VBI8"),d=i("a5Nn"),m=i("38Di"),h=i("mcWp"),p=i("je31"),b=i("IRoT"),g=i("XZJ2"),f=i("9oMC"),_=i("K0KF"),v=i("vi4T"),y=i("aVmG"),k=i("gb9A"),I=i("GtmI"),w=i("C8uC"),T=i("bFKe"),x=i("dzSB"),C=i("KyjD"),O=i("0WXF"),S=i("MAo+"),D=i("fXoL"),A=i("S//e"),j=i("NsZK"),N=i("UdVN"),E=i("LdyQ"),$=i("MJvn"),P=i("n+1/"),L=i("KbVY"),U=i("BTFG"),z=i("zY2b"),M=i("bNw/"),R=i("aIzb"),G=i("FJGi"),F=i("ukJz"),V=i("pxPQ"),q=i("HqON"),X=i("Ufp6"),B=i("9gfC"),K=i("jwRX"),W=i("t6Eg"),H=i("O5gs"),Z=i("keUj"),Q=i("XaMR"),J=i("lkVx");let Y=(()=>{class e{}return e.\u0275mod=D.Ub({type:e}),e.\u0275inj=D.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.l,o.d.forRoot(),s.a,r.a,l.a,u.a,d.a,m.a,h.a,p.a,b.a,g.b,f.a,_.a,v.a,y.a,k.a,I.a,w.LoaderModule,T.b,x.a,C.a,O.a,S.a]]}),e})();D.Yc(n.a,[a.q,a.o,a.r,a.s,a.x,A.a,j.a,N.a,E.b,$.a,P.a,L.a,U.a,z.a,M.a,R.a,G.a,F.a,V.a,q.a,T.a,a.p,X.a,B.a,K.b,W.a,c.b,c.p,c.s,H.a,Z.a,Q.a],[a.b,J.a])},ygeO:function(e,t,i){"use strict";i.d(t,"a",function(){return _});var a=i("3Pt+"),c=i("ofXK"),n=i("5+WD"),o=i("K0KF"),s=i("an+h"),r=i("mcWp"),l=i("V6/z"),u=i("hqhL"),d=i("gb9A"),m=i("C8uC"),h=i("tyNb"),p=i("T5D4"),b=i("bx+h"),g=i("fTg4"),f=i("fXoL");let _=(()=>{class e{}return e.\u0275mod=f.Ub({type:e}),e.\u0275inj=f.Tb({factory:function(t){return new(t||e)},providers:[u.a],imports:[[c.c,a.l,o.a,n.f,s.a,r.a,l.a,d.a,m.LoaderModule,h.l,p.a,b.a,g.a]]}),e})()}}]);