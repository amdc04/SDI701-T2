(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+2Ly":function(e,t,i){"use strict";i.d(t,"a",function(){return ae});var o=i("YwDF"),n=i("c3rA"),s=i("l7P3"),c=i("fXoL"),a=i("2Vo4"),r=i("XNiG"),l=i("itXk"),d=i("pLZG"),u=i("eIep"),m=i("lJxs"),p=i("1G5W"),h=i("IzEk"),f=i("SxV6"),b=i("9jGm"),g=i("HHlo"),_=i("jJQC"),v=i("IlGD"),k=i("pHS2"),y=i("Ek70"),w=i("Hgwy"),x=i("uslN"),I=i("yJWD"),T=i("2eDp"),C=i("Jf2N"),D=i("jJW4"),O=i("qpQx"),S=i("8it8"),E=i("H+xR"),P=function(e,t,i,o){return new(i||(i=Promise))(function(n,s){function c(e){try{r(o.next(e))}catch(t){s(t)}}function a(e){try{r(o.throw(e))}catch(t){s(t)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(c,a)}r((o=o.apply(e,t||[])).next())})};function j(e,t){if(1&e&&(c.cc(0,"div",12),c.gc(1,13),c.bc()),2&e){const e=c.uc(2);c.Ib(1),c.kc(null==e.entity?null:e.entity.name),c.hc(1)}}function A(e,t){if(1&e){const e=c.dc();c.cc(0,"div",15),c.qc("click",function(){c.Uc(e);const t=c.uc().$implicit;return c.uc(2).startCreate(t.type)}),c.Xb(1,"div",16),c.cc(2,"div",17),c.dd(3),c.bc(),c.cc(4,"div",18),c.dd(5),c.bc(),c.bc()}if(2&e){const e=c.uc().$implicit;c.Ib(1),c.Mb("cu-entity-custom-fields-modal__type-list-item-icon cu-entity-custom-fields-modal__type-list-item-icon_",e.type,""),c.Dc("icon","field-type-list-"+e.type),c.Ib(2),c.fd(" ",e.label," "),c.Ib(2),c.fd(" ",e.description," ")}}function $(e,t){if(1&e&&(c.ac(0),c.bd(1,A,6,6,"div",14),c.vc(2,"async"),c.vc(3,"async"),c.Zb()),2&e){const e=t.$implicit,i=c.uc(2);c.Ib(1),c.Dc("ngIf",(!e.subcategoryLevelOnly||"subcategory"===c.wc(2,1,i.entity$).type)&&(!e.clickapp||c.wc(3,3,i.team$)[e.clickapp.teamField]))}}function U(e,t){if(1&e){const e=c.dc();c.cc(0,"div",19),c.cc(1,"button",20),c.qc("click",function(){return c.Uc(e),c.uc(2).showExistingFields()}),c.gc(2,21),c.bc(),c.bc()}}function R(e,t){if(1&e&&(c.cc(0,"div",3),c.bd(1,j,2,1,"div",4),c.cc(2,"div",5),c.ac(3),c.gc(4,6),c.Zb(),c.cc(5,"a",7),c.gc(6,8),c.bc(),c.bc(),c.cc(7,"div",9),c.bd(8,$,4,5,"ng-container",10),c.bc(),c.bd(9,U,3,0,"div",11),c.bc()),2&e){const e=c.uc();c.Ib(1),c.Dc("ngIf",!(e.fieldToEdit$.value||e.createNewFieldVisible)),c.Ib(7),c.Dc("ngForOf",e.customFieldTypeConfig)("ngForTrackBy",e.trackByType),c.Ib(1),c.Dc("ngIf",!e.hideExistingFields)}}function M(e,t){1&e&&c.Xb(0,"cu-loader")}function F(e,t){if(1&e&&c.Xb(0,"div",23),2&e){c.uc(3);const e=c.Rc(1);c.Dc("ngTemplateOutlet",e)}}function L(e,t){if(1&e){const e=c.dc();c.cc(0,"div",54),c.qc("click",function(){c.Uc(e);const t=c.uc().$implicit;return c.uc(6).pinField(t)}),c.vc(1,"async"),c.bc()}if(2&e){const e=c.uc().$implicit,t=c.uc(6);c.Ob("cu-custom-fields__list-item-pin_pinned",e.pinned),c.Dc("cuTooltip",c.wc(1,3,t.canPin$)?t.pinText:t.noPermsToChangeText)}}function N(e,t){if(1&e){const e=c.dc();c.cc(0,"div",55),c.cc(1,"div",56),c.gc(2,57),c.bc(),c.cc(3,"div",58),c.ac(4),c.gc(5,59),c.Zb(),c.cc(6,"cu-toggle-switch",60),c.qc("onChange",function(){c.Uc(e);const t=c.uc().$implicit;return c.uc(6).toggleHideFromGuests(t)}),c.bc(),c.ac(7),c.gc(8,61),c.Zb(),c.bc(),c.bc()}if(2&e){const e=c.uc().$implicit;c.Ib(6),c.Dc("checked",!e.hide_from_guests)}}function z(e,t){1&e&&(c.mc(0,106,1),c.Yb(1),c.jc())}const q=function(e){return[e,"settings","billing"]};function G(e,t){if(1&e&&(c.cc(0,"a",108),c.gc(1,109),c.bc()),2&e){const e=c.uc(8);c.Dc("cuLink",c.Hc(1,q,e.sharedData.compatCurrentTeam.id))}}function V(e,t){if(1&e&&(c.cc(0,"div",62),c.cc(1,"div"),c.tc(),c.cc(2,"svg",63),c.cc(3,"g",64),c.Xb(4,"path",65),c.Xb(5,"path",66),c.Xb(6,"path",67),c.Xb(7,"path",68),c.Xb(8,"path",69),c.Xb(9,"path",70),c.Xb(10,"path",71),c.Xb(11,"path",72),c.Xb(12,"path",73),c.Xb(13,"path",74),c.Xb(14,"path",75),c.Xb(15,"path",76),c.Xb(16,"path",77),c.Xb(17,"path",78),c.Xb(18,"path",79),c.Xb(19,"path",80),c.Xb(20,"path",81),c.Xb(21,"path",82),c.Xb(22,"path",83),c.Xb(23,"path",84),c.Xb(24,"path",85),c.Xb(25,"path",86),c.Xb(26,"path",87),c.Xb(27,"path",88),c.Xb(28,"path",89),c.Xb(29,"path",90),c.Xb(30,"path",91),c.Xb(31,"path",92),c.Xb(32,"path",93),c.Xb(33,"path",94),c.Xb(34,"path",95),c.Xb(35,"path",96),c.Xb(36,"path",97),c.Xb(37,"path",98),c.Xb(38,"path",99),c.Xb(39,"path",100),c.Xb(40,"path",101),c.Xb(41,"path",102),c.bc(),c.bc(),c.bc(),c.sc(),c.cc(42,"div",103),c.gc(43,104),c.bc(),c.cc(44,"div",105),c.mc(45,106),c.Yb(46),c.bd(47,z,2,0,"ng-container",1),c.vc(48,"async"),c.jc(),c.bc(),c.bd(49,G,2,3,"a",107),c.vc(50,"async"),c.bc()),2&e){const e=c.uc(7);let t=null,i=null;c.Ib(47),c.Dc("ngIf",!((null==(t=c.wc(48,2,e.sharedData.compatCurrentTeam$))?null:t.role)<3)),c.Ib(2),c.Dc("ngIf",(null==(i=c.wc(50,4,e.sharedData.compatCurrentTeam$))?null:i.role)<3)}}function B(e,t){if(1&e){const e=c.dc();c.cc(0,"div",110,111),c.qc("click",function(){c.Uc(e);const t=c.uc().$implicit;return c.uc(6).requireField(t)})("onHidden",function(){return c.Uc(e),c.uc(7).cdr.detectChanges()}),c.vc(2,"async"),c.vc(3,"async"),c.vc(4,"async"),c.cc(5,"div",51),c.gc(6,112),c.bc(),c.bc()}if(2&e){const e=c.uc().$implicit,t=c.uc(6),i=c.Rc(5);c.Ob("cu-custom-fields__list-item-btns-required-active",e.required)("cu-custom-fields__list-item-btns-guests_disabled",!c.wc(2,7,t.allowRequireChange$)),c.Dc("popover",c.wc(3,9,t.notBusinessPlus$)?i:null)("outsideClick",!0)("cuTooltip",c.wc(4,11,t.allowRequireChange$)?e.required?t.cfCommonStringsService.turnOffRequiredText:t.cfCommonStringsService.cfRequiredWarningText:t.noPermsToChangeText)}}const X=function(e){return{"cu-custom-fields__list-item-btns-guests_active":e}};function H(e,t){if(1&e){const e=c.dc();c.cc(0,"div",34),c.cc(1,"div",35),c.cc(2,"div",36),c.Xb(3,"div",37),c.bc(),c.cc(4,"div",38),c.Xb(5,"cu-custom-field-icon",39),c.cc(6,"div",40),c.qc("click",function(){c.Uc(e);const i=t.$implicit;return c.uc(6).startEdit(i)}),c.dd(7),c.bc(),c.bd(8,L,2,5,"div",41),c.vc(9,"async"),c.Xb(10,"div",42),c.cc(11,"div",43),c.bd(12,N,9,1,"ng-template",null,44,c.cd),c.bd(14,V,51,6,"ng-template",null,45,c.cd),c.cc(16,"div",46),c.qc("click",function(){c.Uc(e);const i=t.$implicit;return c.uc(6).startEdit(i)}),c.bc(),c.cc(17,"div",47),c.qc("click",function(){c.Uc(e);const i=t.$implicit;return c.uc(6).startDelete(i)}),c.vc(18,"async"),c.vc(19,"async"),c.vc(20,"async"),c.vc(21,"async"),c.vc(22,"async"),c.vc(23,"async"),c.bc(),c.cc(24,"div",48,49),c.qc("onHidden",function(){return c.Uc(e),c.uc(6).cdr.detectChanges()}),c.vc(26,"async"),c.Xb(27,"div",50),c.cc(28,"div",51),c.gc(29,52),c.bc(),c.bc(),c.bd(30,B,7,13,"div",53),c.vc(31,"async"),c.bc(),c.bc(),c.bc(),c.bc()}if(2&e){const e=t.$implicit,i=c.Rc(13),o=c.Rc(15),n=c.Rc(25),s=c.uc(6);let a=null;c.Dc("cdkDragData",e),c.Ib(1),c.Ob("cu-custom-fields__list-item-body_hover",n.isOpen),c.Ib(2),c.Dc("icon","handle4"),c.Ib(2),c.Dc("field",e),c.Ib(2),c.fd(" ",e.name," "),c.Ib(1),c.Dc("ngIf",c.wc(9,16,s.canPin$)||e.pinned),c.Ib(9),c.Ob("disabled-action",!(c.wc(18,18,s.canDelete$)||c.wc(19,20,s.onlyDeleteIfOwner$)&&c.wc(20,22,s.meUser$)===(null==e?null:e.userid))),c.Dc("cuTooltip",c.wc(21,24,s.canDelete$)||c.wc(22,26,s.onlyDeleteIfOwner$)&&c.wc(23,28,s.meUser$)===(null==e?null:e.userid)?s.commonStringsService.deleteText:s.deleteFieldNoPermsText),c.Ib(7),c.Dc("ngClass",c.Hc(34,X,!e.hide_from_guests))("popover","1"===(null==(a=c.wc(26,30,s.sharedData.compatCurrentTeam$))?null:a.plan_id)?o:i)("outsideClick",!0)("cuTooltip",e.hide_from_guests?s.hiddenFromGuestsText:s.shownToGuestsText),c.Ib(3),c.Dc("icon",e.hide_from_guests?"hide":"eye-v3"),c.Ib(3),c.Dc("ngIf",(c.wc(31,32,s.allowRequireChange$)||e.required)&&!s.customFieldTypeConfigMap[e.type].isAutomaticValue&&e.type!==s.CustomFieldType.ListRelationship)}}function W(e,t){if(1&e){const e=c.dc();c.ac(0),c.cc(1,"div",31),c.dd(2),c.bc(),c.cc(3,"div",32),c.qc("cdkDropListDropped",function(t){return c.Uc(e),c.uc(5).fieldDropped(t)}),c.bd(4,H,32,36,"div",33),c.bc(),c.Zb()}if(2&e){const e=t.ngIf,i=c.uc().$implicit,o=c.uc(4);c.Ib(2),c.fd(" ",i.label," "),c.Ib(2),c.Dc("ngForOf",e)("ngForTrackBy",o.trackById)}}function K(e,t){if(1&e&&(c.ac(0),c.bd(1,W,5,3,"ng-container",1),c.vc(2,"async"),c.Zb()),2&e){const e=t.$implicit,i=c.uc(4);c.Ib(1),c.Dc("ngIf",c.wc(2,1,i.customFieldsGroupedByEntity$)[e.id])}}function Q(e,t){if(1&e){const e=c.dc();c.ac(0),c.cc(1,"div",12),c.gc(2,24),c.bc(),c.bd(3,K,3,3,"ng-container",10),c.cc(4,"div",25),c.cc(5,"button",26),c.qc("click",function(){c.Uc(e);const t=c.uc(3);return t.startCreate(t.filterForNumericDropdown?t.CustomFieldType.Dropdown:null)}),c.gc(6,27),c.bc(),c.cc(7,"div",28),c.dd(8,"or"),c.bc(),c.cc(9,"div",29),c.qc("click",function(){return c.Uc(e),c.uc(3).showExistingFields()}),c.gc(10,30),c.bc(),c.bc(),c.Zb()}if(2&e){const e=c.uc(3);c.Ib(2),c.kc(null==e.entity?null:e.entity.name),c.hc(2),c.Ib(1),c.Dc("ngForOf",e.customFieldGroups)("ngForTrackBy",e.trackById)}}function Z(e,t){if(1&e&&(c.cc(0,"div"),c.bd(1,F,1,1,"div",22),c.vc(2,"async"),c.bd(3,Q,11,3,"ng-container",1),c.vc(4,"async"),c.bc()),2&e){const e=c.uc(2);c.Ib(1),c.Dc("ngIf",0===c.wc(2,2,e.customFields$).length),c.Ib(2),c.Dc("ngIf",c.wc(4,4,e.customFields$).length>0)}}function Y(e,t){if(1&e&&(c.cc(0,"div"),c.bd(1,M,1,0,"cu-loader",1),c.vc(2,"async"),c.bd(3,Z,5,6,"div",1),c.vc(4,"async"),c.bc()),2&e){const e=c.uc();c.Ib(1),c.Dc("ngIf",!c.wc(2,2,e.customFields$)),c.Ib(2),c.Dc("ngIf",c.wc(4,4,e.customFields$))}}function J(e,t){if(1&e){const e=c.dc();c.cc(0,"div",118),c.cc(1,"div",119),c.qc("click",function(){return c.Uc(e),c.uc(2).cancelEdit()}),c.Xb(2,"div",120),c.cc(3,"div",121),c.gc(4,122),c.bc(),c.bc(),c.bc()}}function ee(e,t){1&e&&(c.ac(0),c.gc(1,124),c.Zb())}function te(e,t){1&e&&(c.ac(0),c.gc(1,125),c.Zb())}function ie(e,t){if(1&e&&(c.cc(0,"div",123),c.bd(1,ee,2,0,"ng-container",1),c.bd(2,te,2,0,"ng-container",1),c.bc()),2&e){const e=c.uc(2);c.Ib(1),c.Dc("ngIf",!e.forRelationships),c.Ib(1),c.Dc("ngIf",e.forRelationships)}}function oe(e,t){1&e&&(c.cc(0,"div",126),c.gc(1,127),c.bc())}function ne(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-create-custom-field-form",128),c.qc("cancel",function(){return c.Uc(e),c.uc(2).cancelEdit()})("save",function(t){return c.Uc(e),c.uc(2).onSaveField(t.field)})("delete",function(t){return c.Uc(e),c.uc(2).startDelete(t.field)}),c.vc(1,"async"),c.vc(2,"async"),c.vc(3,"async"),c.vc(4,"async"),c.vc(5,"async"),c.vc(6,"async"),c.vc(7,"async"),c.vc(8,"async"),c.vc(9,"async"),c.vc(10,"async"),c.vc(11,"async"),c.bc()}if(2&e){const e=c.uc(2);let t=null;c.Dc("customFields",c.wc(1,16,e.customFields$))("entity",c.wc(2,18,e.entity$))("allowRequireChange",c.wc(3,20,e.allowRequireChange$)&&!e.forRelationships)("notBusinessPlus",c.wc(4,22,e.notBusinessPlus$))("fieldToEdit",c.wc(5,24,e.fieldToEdit$))("canDelete",c.wc(6,26,e.canDelete$)||c.wc(7,28,e.onlyDeleteIfOwner$)&&c.wc(8,30,e.meUser$)===(null==(t=c.wc(9,32,e.fieldToEdit$))?null:t.userid))("createNewType",e.createNewType)("fieldToEditUsages",c.wc(10,34,e.fieldToEditUsages$))("country",c.wc(11,36,e.currentCountry$))("addColumnAfterId",e.addColumnAfterId)("addColumnBeforeId",e.addColumnBeforeId)("addCreatedColumn",!!(e.addColumnAfterId||e.addColumnBeforeId||e.addCreatedColumn))("forTaskListHeader",e.createFromModal)("forRelationships",e.forRelationships)("showPin",!e.forRelationships)("hideCreateRollupFields",e.hideCreateRollupFields)}}function se(e,t){if(1&e&&(c.cc(0,"div"),c.cc(1,"div",113),c.bd(2,J,5,0,"div",114),c.bd(3,ie,3,2,"div",115),c.bd(4,oe,2,0,"div",116),c.bc(),c.bd(5,ne,12,38,"cu-create-custom-field-form",117),c.vc(6,"async"),c.bc()),2&e){const e=c.uc(),t=c.Rc(1);c.Ib(2),c.Dc("ngIf",!e.closeOnEdit&&!e.hideBackLink&&(!e.forForms||e.createNewType)&&!e.forRelationships),c.Ib(1),c.Dc("ngIf",!e.fieldToEdit$.value),c.Ib(1),c.Dc("ngIf",e.fieldToEdit$.value),c.Ib(1),c.Dc("ngIf",e.createNewType||c.wc(6,5,e.fieldToEdit$))("ngIfElse",t)}}function ce(e,t){if(1&e&&c.Xb(0,"cu-paywall-popover",129),2&e){const e=c.uc();c.Dc("title",null==e.requiredCustomFieldPaywallMeta?null:e.requiredCustomFieldPaywallMeta.title)("image",null==e.requiredCustomFieldPaywallMeta?null:e.requiredCustomFieldPaywallMeta.image)("text",null==e.requiredCustomFieldPaywallMeta?null:e.requiredCustomFieldPaywallMeta.textBelowImage)("forBusiness",!0)("upgradeButtonText",null==e.requiredCustomFieldPaywallMeta?null:e.requiredCustomFieldPaywallMeta.buttonText)("emailSubject",null==e.requiredCustomFieldPaywallMeta?null:e.requiredCustomFieldPaywallMeta.emailSubject)("flipBadge",!0)}}let ae=(()=>{class e{constructor(e,t,i,p,h,f,b,g,y){this.store=e,this.modal=t,this.actions=i,this.cdr=p,this.sharedData=h,this.injector=f,this.locationService=b,this.commonStringsService=g,this.cfCommonStringsService=y,this.fieldCreated=new c.o,this.entity$=new a.a(null),this.customFieldTypeConfig=v.d,this.trackByType=Object(_.d)("type"),this.trackById=Object(_.d)("id"),this.requiredCustomFieldPaywallMeta=o.e,this.customFields$=this.entity$.pipe(Object(d.a)(e=>!!e),Object(u.a)(e=>this.store.select(Object(T.f)(e))),Object(d.a)(e=>!!e),Object(m.a)(e=>this.filterForNumericDropdown?e.filter(e=>Object(o.d)(e,[])):e),Object(m.a)(e=>e.sort(v.h))),this.destroy$=new r.a,this.fieldToEdit$=new a.a(null),this.CustomFieldType=o.a,this.customFieldTypeConfigMap=v.e,this.createNewFieldVisible=!1,this.filterForNumericDropdown=!1,this.closeOnEdit=!1,this.closeOnCreate=!1,this.hideBackLink=!1,this.createFromModal=!1,this.customFieldGroups=[{id:"team",label:$localize`:@@cu-entity-custom-fields-modal__cf-group_workspace:Workspace fields`},{id:"project",label:$localize`:@@cu-entity-custom-fields-modal__cf-group_space:Space fields`},{id:"category",label:$localize`:@@cu-entity-custom-fields-modal__cf-group_folder:Folder fields`},{id:"subcategory",label:$localize`:@@cu-entity-custom-fields-modal__cf-group_list:List fields`}],this.meUser$=this.store.pipe(Object(s.select)(n.getUser),Object(d.a)(e=>!!e),Object(m.a)(e=>e.id.toString())),this.canDelete$=this.store.pipe(Object(s.select)(n.getUserEnterprisePermissions),Object(m.a)(e=>!e||e.delete_items===w.b.ON)),this.onlyDeleteIfOwner$=this.store.pipe(Object(s.select)(n.getUserEnterprisePermissions),Object(m.a)(e=>e&&e.delete_items===w.b.CREATE)),this.canPin$=this.store.select(n.getCanPinCustomFields),this.canRequire$=this.store.select(n.getCanRequireCustomFields),this.customFieldsGroupedByEntity$=this.customFields$.pipe(Object(m.a)(e=>Object(k.a)(e,"entity.type"))),this.fieldToEditUsages$=this.fieldToEdit$.pipe(Object(d.a)(e=>!!e),Object(u.a)(e=>this.store.select(Object(T.h)(e)))),this.team$=this.store.pipe(Object(s.select)(n.getTeam),Object(d.a)(e=>!!e)),this.notBusinessPlus$=this.store.pipe(Object(s.select)(n.getIsBusinessOrEnterprisePlan),Object(m.a)(e=>!e)),this.isAdmin$=this.store.select(n.getIsAdmin),this.allowRequireChange$=Object(l.a)([this.isAdmin$,this.canRequire$,this.team$]).pipe(Object(m.a)(([e,t,i])=>i&&i.plan_id===x.f.ENTERPRISE?t:e)),this.currentCountry$=this.locationService.currentCountry$,this.forForms=!1,this.forRelationships=!1,this.hideExistingFields=!1,this.hideCreateRollupFields=!1,this.addCreatedColumn=!1,this.deleteFieldNoPermsText=$localize`:@@permissions_delete-field-not-allowed:You don't have permission to delete this field`,this.hiddenFromGuestsText=$localize`:@@cu-entity-custom-fields-modal__visibility-to-guests_hidden:Hidden from Guests`,this.pinText=$localize`:@@common_pin--always-show:Pin (Always show this)`,this.noPermsToChangeText=$localize`:@@cu-entity-custom-fields-modal__no-perms-to-change:You do not have permission to change this.`,this.shownToGuestsText=$localize`:@@cu-entity-custom-fields-modal__visibility-to-guests_shown:Shown to Guests`}static getModalOptions(e){return{title:$localize`:@@custom-fields_manage-1:Manage custom fields for ${e.name}:name:`,dialogModifier:"cu-modal__dialog-custom-fields",preventExternalClick:!0,bodyModifier:"cu-modal__body_no-min-height"}}ngOnInit(){this.customFields$.pipe(Object(p.a)(this.destroy$)).subscribe(e=>{this.fieldIdToEdit&&e.some(e=>e.id===this.fieldIdToEdit)&&(this.startEdit(e.find(e=>e.id===this.fieldIdToEdit)),this.fieldIdToEdit=null,this.closeOnEdit=!0,this.cdr.detectChanges())}),this.actions.pipe(Object(b.d)(g.f.type),Object(p.a)(this.destroy$)).subscribe(e=>{e.all?this.cancelDelete():!e.all&&this.fieldToEdit$.value&&this.fieldToEdit$.value.id===e.fieldId&&Object(y.b)(this.fieldToEdit$.value.entity,e.entity)&&(this.cancelEdit(),this.store.dispatch(Object(g.m)({entity:e.entity})))})}ngOnDestroy(){this.destroy$.next()}fieldDropped(e){this.store.dispatch(Object(g.u)({field:e.item.data,updates:{position:e.currentIndex},entity:this.entity$.value}))}setEntity(e){this.entity=e,this.store.dispatch(Object(g.m)({entity:e})),this.entity$.next(e)}startCreate(e){this.createNewFieldVisible=!0,this.createNewType=e,this.createFromModal=!0,this.forForms&&(this.customFieldTypeConfig=this.customFieldTypeConfig.filter(e=>e.formView&&e.formView.visible))}startDelete(e){Object(l.a)([this.meUser$,this.onlyDeleteIfOwner$,this.canDelete$]).pipe(Object(h.a)(1)).subscribe(([t,i,o])=>{if(o||i&&t===e.userid){const t=this.modal.openComponent(I.a,this.injector,{blank:!1,modifier:"task-sc__modal"});t.instance.setFieldToDelete(e,this.entity),t.instance.cancel.pipe(Object(p.a)(t.instance.destroy$)).subscribe(()=>{this.cancelDelete()})}})}cancelDelete(){this.modal.close(),this.cancelEdit()}startEdit(e){this.fieldToEdit$.next(e),this.store.select(n.getTeam).pipe(Object(h.a)(1)).subscribe(e=>{this.store.dispatch(Object(g.j)({entity:{type:"team",id:e.id,name:e.name}}))})}toggleHideFromGuests(e){this.store.dispatch(Object(g.u)({field:e,updates:{hide_from_guests:!e.hide_from_guests},entity:this.entity$.value}))}pinField(e){return P(this,void 0,void 0,function*(){(yield this.canPin$.pipe(Object(f.a)()).toPromise())&&this.store.dispatch(Object(g.u)({field:e,updates:{pinned:!e.pinned},entity:this.entity$.value,pinned_value_changed:!0}))})}requireField(e){return P(this,void 0,void 0,function*(){(yield this.notBusinessPlus$.pipe(Object(f.a)()).toPromise())||(yield this.allowRequireChange$.pipe(Object(f.a)()).toPromise())&&this.store.dispatch(Object(g.u)({field:e,updates:{required:!e.required},entity:this.entity$.value,required_value_changed:!0}))})}onSaveField(e){this.fieldCreated.emit(e),this.forForms||this.closeOnCreate||this.forRelationships?this.modal.close():this.cancelEdit()}cancelEdit(){this.closeOnEdit||this.forRelationships?this.modal.close():(this.fieldToEdit$.next(null),this.forForms||(this.createNewFieldVisible=!1),this.createNewType=null)}showExistingFields(){this.entity$.pipe(Object(h.a)(1)).subscribe(e=>P(this,void 0,void 0,function*(){const{ExistingFieldsModalComponent:t}=yield i.e(22).then(i.bind(null,"L4WU")),o=this.modal.openComponent(t,this.injector,{title:this.commonStringsService.existingFieldsText});o.instance.filterForNumericDropdown=this.filterForNumericDropdown,o.instance.setEntity(e),o.instance.addColumnBeforeId=this.addColumnBeforeId,o.instance.addColumnAfterId=this.addColumnAfterId,o.instance.fieldAdded$.subscribe(()=>{this.store.dispatch(Object(g.j)({entity:e}))})}))}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(s.Store),c.Wb(C.a),c.Wb(b.a),c.Wb(c.h),c.Wb(D.a),c.Wb(c.t),c.Wb(O.a),c.Wb(S.a),c.Wb(E.a))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-entity-custom-fields-modal"]],hostAttrs:[1,"cu-entity-custom-fields-modal"],outputs:{fieldCreated:"fieldCreated"},decls:6,vars:2,consts:function(){let e,t,i,o,n,s,a,r,l,d,u,m,p,h,f,b,g,_,v,k;return e=$localize`:@@cu-entity-custom-fields-modal__type-list-description␟4f7c2eba497f143e16066cb6dd852e4b894c3941␟7437972778114184304:Custom fields allow you to use ClickUp for virtually anything.`,t=$localize`:@@common_learn-more␟00fd95b84a6403a10161d05c6758c8ee8feab6c5␟1410572042397301262: Learn more `,i=$localize`:@@custom-fields_manage␟26c803b8da8d0aded1860176ae67f6b59d11c559␟1812421309421970310: Manage custom fields for ${"\ufffd0\ufffd"}:INTERPOLATION: `,o=$localize`:@@custom-fields_use-existing␟924f05017461b4dadd8ee438d63aaa2b77e994d6␟2812769596663747358: Use an existing field `,n=$localize`:@@custom-fields_manage␟4b072e96a34b69a0570530275b7bb18d493e8052␟128304826539295625: Manage custom fields for ${"\ufffd0\ufffd"}:INTERPOLATION: `,s=$localize`:@@custom-fields_new␟32d3de898f9c658fd6ee0ce549db4271ba7811fa␟3849545410392881973: New custom field `,a=$localize`:@@custom-fields_use-existing␟44ad6e075505050438cae19d4b842a2006f34a72␟8914375661276264340: use an existing field `,r=$localize`:@@common_edit␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,l=$localize`:@@common_guests␟3a044ed0e7a8bb713dd8ba9ba3cac1e97fe9cb1d␟654144020225279120: Guests `,d=$localize`:@@cu-entity-custom-fields-modal__list-item-guests-popover-title␟e797b3140cf15bf05036a56084b059aafb1516b2␟3940933308438916746: Visibility for guests `,u=$localize`:@@common_hide␟1eede69e18c5ac9c0b0295b72cabb7e64e029e74␟8461609631969932886:Hide`,m=$localize`:@@common_show␟2aba1e87039819aca3b70faa9aa848c12bf139ca␟8461842260159597706:Show`,p=$localize`:@@common_whoops␟55bedaa9c2b97a888e6415aee5ca24803b9652c6␟1991330520102931494: Whoops! `,h=$localize`:@@cu-entity-custom-fields-modal__paywall-popover-description␟0d686cfcb22268e475dd791abf39cd3d7fed8f7b␟7182321166992634799:${"\ufffd#46\ufffd"}:START_TAG_NG_CONTAINER: Free forever teams can't hide custom fields from guests. To do this and many other features, ${"[\ufffd/#46\ufffd|\ufffd/#1:1\ufffd\ufffd/*47:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*47:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER_1: ask your Workspace admin to upgrade to Unlimited. ${"[\ufffd/#46\ufffd|\ufffd/#1:1\ufffd\ufffd/*47:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,h=c.lc(h),f=$localize`:@@cu-entity-custom-fields-modal__paywall-popover-link␟b812717a0f82a4d0c1858abb835cc6f29dc1e447␟7266359957685942158: upgrade to Unlimited `,b=$localize`:@@common_required␟ef973444e1f397aab3e1c39c51eae2ea67c810c4␟8198028807319700776: Required `,g=$localize`:@@common_back-2␟9c80bb14f602d693b9643a90bb740ffcedbb41a5␟55648798660463428: back `,_=$localize`:@@custom-fields_create␟ecff544fbf0927e2682fdf1b197c6677be9ec341␟7799054303069381153:Create field`,v=$localize`:@@custom-fields_create-relationship␟f2253b53e7fed108df47fb289bedd2c9e6b0d566␟2858901203881825838:Create Relationship`,k=$localize`:@@custom-fields_edit␟5cc3af8e6330421c81eaf93835cb631f6c7a383f␟2730737148142574426: Edit field `,[["customFieldsTypeList",""],[4,"ngIf"],["paywallCustomFieldRequired",""],[1,"cu-entity-custom-fields-modal__type-list"],["class","cu-entity-custom-fields-modal__type-list-title",4,"ngIf"],[1,"cu-entity-custom-fields-modal__type-list-description"],e,["href","https://docs.clickup.com/features/custom-fields","target","_blank",1,"cu-entity-custom-fields-modal__type-list-description-link"],t,[1,"cu-entity-custom-fields-modal__type-list-items"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-entity-custom-fields-modal__add cu-entity-custom-fields-modal__add_center",4,"ngIf"],[1,"cu-entity-custom-fields-modal__type-list-title"],i,["class","cu-entity-custom-fields-modal__type-list-item",3,"click",4,"ngIf"],[1,"cu-entity-custom-fields-modal__type-list-item",3,"click"],[3,"icon"],[1,"cu-entity-custom-fields-modal__type-list-item-title"],[1,"cu-entity-custom-fields-modal__type-list-item-description"],[1,"cu-entity-custom-fields-modal__add","cu-entity-custom-fields-modal__add_center"],[1,"cu-btn","cu-btn_sm","cu-btn_outline",3,"click"],o,[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],n,[1,"cu-entity-custom-fields-modal__add"],[1,"cu-btn","cu-btn_sm",3,"click"],s,[1,"cu-entity-custom-fields-modal__add-or"],[1,"cu-entity-custom-fields-modal__add-existing",3,"click"],a,[1,"cu-entity-custom-fields-modal__type-list-label"],["cdkDropList","",1,"cu-custom-fields__list",3,"cdkDropListDropped"],["class","cu-custom-fields__list-item","cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"cu-custom-fields__list-item",3,"cdkDragData"],[1,"cu-custom-fields__list-item-body"],["cdkDragHandle","",1,"cu-custom-fields__list-item__handler","cu-draggable"],[1,"cu-custom-fields__list-item__handler-icon",3,"icon"],[1,"cu-custom-fields__list-item-name"],["modifier","cu-custom-fields__list-item-icon",3,"field"],[1,"cu-custom-fields__list-item-name-text",3,"click"],["class","cu-custom-fields__list-item-pin","icon","cu2-thumbtack-solid","tooltipDelay","500",3,"cu-custom-fields__list-item-pin_pinned","cuTooltip","click",4,"ngIf"],[1,"cu-custom-fields__list-item-divider"],[1,"cu-custom-fields__list-item-btns"],["visibilityPopoverTemplate",""],["paywallPopover",""],["icon","edit","cuTooltip",r,1,"cu-custom-fields__list-item-btns-edit",3,"click"],["icon","trash-bold",1,"cu-custom-fields__list-item-btns-remove",3,"cuTooltip","click"],["placement","bottom","containerClass","popover_white popover_no-max-width",1,"cu-custom-fields__list-item-btns-guests",3,"ngClass","popover","outsideClick","cuTooltip","onHidden"],["visibilityPopover","bs-popover"],[1,"cu-custom-fields__list-item-btns-guests-icon",3,"icon"],[1,"cu-custom-fields__list-item-btns-guests-label"],l,["class","cu-custom-fields__list-item-btns-guests cu-custom-fields__list-item-btns-required","placement","bottom","containerClass","popover_white popover_no-max-width",3,"cu-custom-fields__list-item-btns-required-active","cu-custom-fields__list-item-btns-guests_disabled","popover","outsideClick","cuTooltip","click","onHidden",4,"ngIf"],["icon","cu2-thumbtack-solid","tooltipDelay","500",1,"cu-custom-fields__list-item-pin",3,"cuTooltip","click"],[1,"cu-custom-fields__list-item-guests-popover"],[1,"cu-custom-fields__list-item-guests-popover-title"],d,[1,"cu-custom-fields__list-item-guests-popover-toggle"],u,[3,"checked","onChange"],m,[1,"cu-custom-fields__paywall-popover"],["width","123","height","131","xmlns","http://www.w3.org/2000/svg",1,"cu-custom-fields__paywall-popover-icon"],["fill","none","fill-rule","evenodd"],["d","M56 18c-.686 0-1.31.381-1.67 1.019L34.218 54.75a2.264 2.264 0 0 0-.01 2.214c.362.659.975 1.036 1.679 1.036h40.228c.705 0 1.317-.377 1.679-1.036a2.264 2.264 0 0 0-.01-2.214L57.669 19.019C57.31 18.381 56.686 18 56 18zm20.114 42H35.886c-1.39 0-2.641-.763-3.344-2.042a4.313 4.313 0 0 1 .02-4.22l20.113-35.731C53.382 16.75 54.625 16 56 16c1.375 0 2.618.75 3.325 2.007l20.114 35.731a4.315 4.315 0 0 1 .02 4.22C78.755 59.237 77.505 60 76.114 60z","fill","#F5A623"],["d","M55 52c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2M56 46a1 1 0 0 1-1-1V31a1 1 0 1 1 2 0v14a1 1 0 0 1-1 1","fill","#F5A623"],["d","M2.95 127.423c-1.78.27-2.433.59-1.575.97 5.969 2.633 32.687 2.583 45.648 2.595 16.303.014 33.266.102 47.942-.521 6.141-.261 20.06-.492 22.437-1.378 6.234-2.329-38.193-3.02-45.383-3.06-11.986-.067-58.904-.15-69.07 1.394","fill","#E3E3E3"],["d","M108.136 86.15c.301 1.576.473 3.173.554 4.774.176 3.468-.151 6.94-.24 10.406-.071 2.816-.048 5.636.034 8.452.043 1.47.1 2.94.151 4.41.047 1.354.28 2.844.144 4.19.096 2.81.39 5.699.088 8.502-.057.525-.104 1.41-.594 1.75-1.603 1.116-4.099-6.98-4.38-7.777-.35-.998-.673-2.006-1.038-2.998a166.965 166.965 0 0 1-3.36-10.108c-.505-1.702-.927-3.431-1.436-5.132-.363-1.21-1.105-3.933-2.62-4.046-1.428-.107-2.11 2.05-2.652 3.07-2.882 5.42-5.012 11.127-7.132 16.874-.81 2.192-1.614 4.388-2.515 6.544-.597 1.429-1.198 3.005-2.172 4.23-.238.301-.608.761-1.047.704-2.43-.317.653-14.131 1.216-24.069.406-7.154.966-13.786 1.574-20.926l25.425 1.15","fill","#F9E280"],["d","M83.138 105.97c.234-4.096.515-8.022.824-11.97 3.65 1.55 7.602 2.225 11.514 2.557 2.532.214 5.036.148 7.573.169 1.968.016 3.876-.048 5.757-.601-.073 1.714-.175 3.427-.223 5.14a165.539 165.539 0 0 0-.004 8.44c.034 1.468.082 2.935.123 4.403.037 1.352.249 2.839.116 4.183.078 2.805.34 5.69.046 8.49-.099.95-.693 1.638-1.247.512-.637-1.295-1.076-2.883-1.539-4.259-.617-1.838-1.249-3.67-1.897-5.497-1.943-5.478-3.46-11.092-5.559-16.527-.58-1.5-1.465-2.38-3.059-2.492-.475-.033-.932.233-1.25.593-.319.36-.522.808-.721 1.248-1.695 3.753-3.422 7.473-4.898 11.321l-2.713 7.076c-.779 2.031-1.357 4.426-2.422 6.297-.351.617-.704 1.237-.97 1.897-.257.637-.441 1.323-.867 1.858-.086.107-.206.216-.339.187-.675-.15-.26-3.691-.222-4.206.136-1.873.357-3.739.581-5.602.53-4.396 1.144-8.792 1.396-13.217","fill","#FFF0A9"],["d","M108.229 86.475c1.047 5.6.346 11.235.28 16.88-.032 2.795.03 5.59.128 8.384.047 1.33.083 2.658.184 3.984.105 1.378.044 2.745.112 4.124.124 2.49.415 5.131-.05 7.602-.036.188-.213.91-.266.925-.134.039-.711-.557-.879-.77-.645-.825-.997-1.859-1.362-2.826-1.913-5.068-3.742-10.203-5.355-15.373-.758-2.428-1.37-4.895-2.12-7.325-.376-1.218-.931-3.213-2.382-3.567-1.454-.356-2.463.894-3.037 2.017-1.064 2.081-2.122 4.17-3.082 6.3-2.254 5-4.045 10.176-6.017 15.286-.45 1.168-.923 2.326-1.408 3.48-.205.489-.41.978-.637 1.456-.302.64-.696 1.672-1.261 2.114-.346.272-.398.415-.715-.005-.074-.098-.123-.267-.165-.387-.176-.512-.207-1.064-.227-1.6-.057-1.523.122-3.055.274-4.568.614-6.084 1.584-12.107 1.955-18.216.39-6.423.934-12.836 1.485-19.248.024-.28-.878-.1-.898.141-.492 5.723-.98 11.447-1.356 17.179-.193 2.933-.354 5.863-.679 8.786-.332 2.997-.766 5.983-1.124 8.977-.312 2.598-.891 5.51-.49 8.121.084.554.27 1.383.885 1.597.59.205 1.262-.176 1.668-.568.834-.804 1.354-2.01 1.81-3.045a95.475 95.475 0 0 0 1.53-3.706c1.061-2.71 2.04-5.452 3.08-8.17 1.858-4.863 3.9-9.673 6.373-14.263.203-.376.516-1.033.942-1.218.557-.241 1.05.249 1.355.634.575.727.883 1.658 1.158 2.529.82 2.602 1.467 5.254 2.286 7.858a265.155 265.155 0 0 0 5.409 15.458c.44 1.146 1.311 3.656 2.977 3.322 1.537-.31 1.338-2.738 1.375-3.88.05-1.53-.032-3.058-.11-4.585-.08-1.556-.02-3.11-.135-4.664-.237-3.193-.3-6.413-.328-9.614-.056-6.583.942-13.275-.278-19.797-.043-.23-.955-.022-.905.24","fill","#6A79A8"],["d","M113.578 91.692c-8.51 1.04-17.191 2.202-25.733.996-1.526-.216-3.071-.522-4.52-1.118-1.072-.441-2.275-1.123-2.7-2.396-.153-.46-1.748.094-1.617.486.797 2.39 3.88 3.064 5.826 3.468 2.429.503 4.89.65 7.35.794 5.157.301 10.358-.33 15.488-.868 1.74-.182 3.48-.374 5.216-.586.259-.032.963-.122 1.08-.443.114-.31-.092-.37-.39-.333","fill","#F2F2F2"],["d","M78.866 90.701c-.333-.155-.667-.31-1.003-.457-.575-.251-1.346-.456-1.707-1.047-.388-.636.056-1.89.165-2.57.169-1.045.352-2.088.55-3.128 1.062-5.576 2.35-11.157 3.93-16.594a103.4 103.4 0 0 1 1.04-3.368c1.92-5.853 7.009-21.645 17.343-16.534 7.746 3.83 11.489 19.153 13.286 34.108.601 4.999 1.287 7.93 1.53 12.403.013.24-12.477 1.306-13.375 1.37-5.13.37-10.289-.142-15.234-1.63-1.739-.524-3.44-1.177-5.112-1.905-.474-.207-.943-.429-1.413-.648","fill","#F2F2F2"],["d","M80.714 89.794a40.714 40.714 0 0 0-.95-.448c-.545-.246-1.275-.447-1.616-1.026-.368-.625.054-1.856.158-2.524.16-1.027.335-2.051.523-3.072 1.011-5.476 2.236-10.957 3.738-16.297.312-1.11.64-2.213.988-3.309.668-2.107 1.36-4.206 2.198-6.253.47-1.15 1.343-2.38 1.65-3.564.33-1.27.088-2.348.9-3.539.593-.87 1.454-1.545 2.414-1.983 3.2-1.463 5.868-2.659 9.284-.91 7.335 3.755 10.87 18.797 12.56 33.48.565 4.908 1.213 7.786 1.439 12.178.012.235-11.822 1.293-12.674 1.357-4.86.367-9.748-.131-14.433-1.59-1.646-.512-3.258-1.152-4.84-1.865-.45-.203-.894-.42-1.339-.635","fill","#FFF"],["d","M78.695 91.233c-1.207-.568-2.956-.87-2.757-2.547.17-1.42.514-2.86.774-4.266a195.4 195.4 0 0 1 2.047-9.681c1.147-4.819 2.473-9.604 4.138-14.269 1.212-3.393 2.647-6.814 4.802-9.717 2.11-2.843 5.097-5.107 8.776-4.096 4.014 1.102 6.627 4.687 8.424 8.256 2.392 4.753 3.76 10.022 4.818 15.22 1.197 5.875 1.823 11.839 2.684 17.768.181 1.252.352 2.506.48 3.765.065.645-.009 1.482.174 2.096l.01.158c-.042.152.017.215.175.187.301.873.165-.151.128.04a.742.742 0 0 0-.16.028c-1.172.32-2.523.314-3.727.436-2.947.3-5.9.575-8.852.811-5.979.479-12.026-.285-17.662-2.371a53.406 53.406 0 0 1-4.272-1.818c-.223-.105-1.043.24-.722.392 6.156 2.91 12.709 4.485 19.526 4.369 3.3-.056 6.611-.462 9.895-.776 1.626-.156 3.255-.308 4.875-.515.399-.05.828-.079 1.215-.197.736-.225.485-.73.432-1.45-.215-2.943-.705-5.85-1.113-8.768-.457-3.27-.814-6.55-1.351-9.81-.976-5.922-2.262-11.907-4.584-17.458-1.619-3.87-3.935-8.084-7.813-10.033-3.264-1.64-6.876-1.214-9.688 1.113-2.88 2.384-4.701 5.943-6.134 9.343-1.73 4.105-3.019 8.426-4.172 12.724a183.11 183.11 0 0 0-2.475 10.51 165.348 165.348 0 0 0-1.012 5.285c-.12.695-.226 1.39-.375 2.079-.117.543-.313 1.247-.114 1.796.372 1.025 2.015 1.378 2.888 1.788.223.105 1.043-.241.722-.392","fill","#6A79A8"],["d","M102.67 49.202c-.705-.702-1.468.61-1.805 1.127-.668 1.02-1.582 1.756-2.495 2.523-1.331 1.12-2.791 2.07-4.366 2.751-.685.297-1.78.891-2.53.845-.394-.024-1.028-.674-1.342-1.018a7.989 7.989 0 0 1-1.655-2.784 7.651 7.651 0 0 1-.369-1.648c-.053-.487.104-1.188-.045-1.632-.432-1.29-1.052 1.247-1.06 1.635-.027 1.114.196 2.232.545 3.276a14.649 14.649 0 0 0 1.769 3.579c-.02-.028 1.683-.79 1.795-.838.072-.03.572 1.819.618 1.982 3.97-.813 8.67-3.072 10.745-6.999.365-.692.866-2.13.195-2.8","fill","#FFF0A9"],["d","M89.131 48.66c.774 1.663 1.91 3.159 3.671 3.322 1.27.118 2.534-.356 3.614-1.054 2.378-1.537 3.984-4.12 4.904-6.857 1.04-3.095 1.655-6.502 1.68-9.877.015-2.299-.243-4.583-.828-6.744-.924-3.414-3.18-8.49-7.284-8.45-4.435.044-7.966 6.92-7.887 15.355l.014 1.512c.044 4.677.46 7.933 1.155 10.194.245.798.553 1.722.961 2.6","fill","#FFF"],["d","M107.616 34.535c3.56-4.411 3.076-10.594-.72-14.725-1.107-1.205-2.12-2.084-1.53-3.86.655-1.975 3.07-2.776 5.034-2.576 1.884.193 3.617 1.235 4.886 2.64 1.268 1.403 2.107 3.148 2.693 4.947a21.792 21.792 0 0 1 .226 12.666 32.929 32.929 0 0 0 2.487-5.274c1.554-4.289 2.524-8.963 2.267-13.541-.214-3.801-1.09-8.165-3.637-11.127-4.039-4.697-12.02-4.898-16.455-.635-1.281 1.231-2.158 2.99-2.17 4.785-.013 1.805 1.032 3.886-.113 5.564-.509.746-1.374 1.19-2.258 1.379-1.83.392-3.555.533-5.343 1.234-1.84.72-3.642 1.666-5.11 3.003-1.227 1.118-3.055 3.319-2.858 5.112.349 3.173 5.425 5.003 8.086 4.93 3.27-.09 6.438-.371 8.94 2.145a10.369 10.369 0 0 1 1.95 2.738c.154.313 1.265 2.839.927 3.06 1.004-.658 1.92-1.5 2.698-2.465","fill","#F9AB98"],["d","M100.856 48.788c1.665-2.19 2.6-4.727 3.251-7.357.715-2.886 1.028-5.877.84-8.843-.263-4.112-1.508-9.074-4.756-11.98-2.706-2.422-6.38-1.991-8.828.511-3.14 3.21-4.188 8.192-4.319 12.471-.155 5.069.004 10.493 2.088 15.215.173.391 1.087.133.922-.24-1.753-3.971-2.03-8.282-2.076-12.555-.045-4.239.328-8.575 2.474-12.36.824-1.453 1.97-2.911 3.546-3.639 1.652-.762 3.494-.406 4.922.65 3.066 2.263 4.4 6.664 4.907 10.204.44 3.077.264 6.232-.347 9.275-.595 2.962-1.53 5.942-3.393 8.392-.346.456.523.58.769.256M91.13 51.73c.894.77 1.95 1.21 3.123 1.269.25.012.614-.074.72-.34.098-.243-.087-.443-.332-.456-1.025-.051-1.879-.44-2.656-1.11-.361-.311-1.334.223-.855.636","fill","#6A79A8"],["d","M92 42.483c.214.505.676.946 1.275 1.216.835.377 1.868.431 2.663-.019.35-.198.634-.467.82-.769.09-.146.156-.3.196-.459.032-.124.06-.294.039-.452a2.61 2.61 0 0 1-1.28.726c-1.002.236-2.648.483-3.473-.17-.058-.045-.114-.096-.192-.117l-.048.044","fill","#6A79A8"],["d","M103.414 62.758c-.319-.554-.475-1.302-.392-2.105.163-1.57 1.18-2.755 2.272-2.646 1.093.109 1.846 1.47 1.684 3.04-.081.785-.376 1.474-.788 1.953l-2.776-.242","fill","#FFF"],["d","M104.29 62.406a4.306 4.306 0 0 1-.316-2.87c.213-.926.915-2.425 2.06-1.878.695.332 1.002 1.34 1.092 2.06.137 1.09-.134 2.207-.78 3.078-.23.31.653.231.821.004 1.18-1.59 1.416-5.857-1.375-5.8-2.595.054-3.355 3.667-2.388 5.653.145.299 1.005-.001.885-.247","fill","#6A79A8"],["d","M105.114 61.31c-.085 1.67-.016 3.373-.316 5.024-.332 1.833-1.246 3.28-2.7 4.42-.39.307.493.298.707.13 1.386-1.088 2.38-2.475 2.785-4.214.416-1.785.317-3.66.41-5.48.018-.347-.871-.165-.886.12M88 50.222c.016 1.94.97 3.676 2.387 5.036.207.198.578.65.887.727.321.08.899-.188 1.18-.266 1.604-.442 3.24-.848 4.707-1.624 2.323-1.23 4.407-2.922 5.837-5.065.039-.058-.578-.04-.685.121-1.52 2.275-3.925 4.28-6.54 5.355-1.347.554-2.826.887-4.238 1.263l.355-.017c-1.877-1.315-3.175-3.486-3.194-5.707 0-.092-.698-.001-.696.177","fill","#6A79A8"],["d","M91.004 56.158l.515 1.758c.034.114.297.084.374.068 3.211-.66 6.315-1.94 8.84-4.023 1.135-.937 2.314-2.085 2.966-3.412.488-.993.508-2.478-.904-2.549-.217-.01-1.035.372-.575.395 1.686.084.575 2.423.081 3.107-.729 1.01-1.634 1.909-2.619 2.68-2.214 1.735-4.868 2.861-7.634 3.429l.373.068-.515-1.757c-.068-.23-.969.01-.902.236","fill","#6A79A8"],["d","M91.39 55.704c-.59.292-1.241.435-1.832.728l.582.06c-1.486-2.158-3.072-5.533-1.82-8.152.212-.441-.656-.433-.819-.092-1.337 2.797.252 6.306 1.851 8.627.121.175.424.138.582.06.59-.294 1.241-.436 1.832-.73.529-.262.056-.716-.376-.501M102.209 70.36c-3.427 2.517-7.725 2.49-11.256.215-1.442-.929-3.06-2.399-3.002-4.278.027-.89.783-1.385.957-2.22.16-.767-.115-1.465-.668-1.983-.322-.3-1.106.183-.704.559 1.187 1.109-.162 2.067-.449 3.156-.224.855.009 1.814.42 2.57.86 1.58 2.449 2.698 4.017 3.473 3.736 1.845 7.941 1.441 11.306-1.03.503-.37-.233-.747-.621-.462M81.23 61.865c-1.64 1.181-3.557 2.153-5.518 2.573-1.838.394-3.74.077-5.483-.593-.87-.335-1.707-.76-2.51-1.246-.65-.392-1.644-.864-2.132-1.471-.548-.682-.012-1.488-.024-2.274-.009-.554-.319-.695-.787-.845-.213-.069-.995.287-.717.377 1.118.359.306 1.564.398 2.466.08.784 1.187 1.266 1.754 1.64 1.65 1.088 3.461 1.96 5.386 2.332 3.621.7 7.348-.771 10.313-2.904.369-.266-.506-.18-.68-.055","fill","#6A79A8"],["d","M1.058 84.026c.033-.211 8.284.928 9.69 1.204 3.014.594 12.163.41 12.197.409.123-.002.003.68-.009.759-.11.719-.267 1.42-.422 2.113-.242 1.08-.503 2.148-.77 3.21-.34 1.359-.693 2.708-1.052 4.053a447.55 447.55 0 0 1-4.195 14.634 311.613 311.613 0 0 1-1.527 4.847c-.48 1.481-.972 2.952-1.482 4.405a99.556 99.556 0 0 1-1.372 3.705c-.374.945-.763 1.878-1.197 2.748-.457.92-1.02 2.052-1.885 1.867-1.403-.299-1.562-2.747-1.942-4.383-.541-2.33-1.088-4.659-1.587-7.01-.34-1.604-.653-3.224-.96-4.846-.311-1.636-.556-3.335-.907-4.946-.006-.033-.013-.066-.018-.1a196.648 196.648 0 0 1-2.077-14.89c-.206-2.068-.46-4.113-.53-6.216-.016-.515-.03-1.06.045-1.563","fill","#D1D1D1"],["d","M1.052 84.026c.03-.212 7.475.928 8.744 1.205 2.72.594 10.212.45 10.204.505-.31 2.167-4.285 17.62-4.72 19.27-.978 3.708-1.959 7.415-2.95 11.114-.905 3.377-1.838 6.733-2.757 10.099-.257.94-.54 1.836-1.25 1.778-.577-.046-1.09-.825-1.27-1.706-.66-3.232-1.364-6.432-1.988-9.693a254.382 254.382 0 0 1-.867-4.847c-.28-1.637-.501-3.336-.818-4.947l-.016-.1A216.967 216.967 0 0 1 1.49 91.808c-.186-2.069-.416-4.115-.479-6.219-.014-.514-.027-1.059.041-1.563","fill","#E5E5E5"],["d","M7.79 88.633c1.799.085 3.637-.391 5.405-.674 1.278-.318 2.652-.425 3.953-.634 1.31-.21 2.617-.408 3.905-.728 1.892-.46 3.765-.993 5.63-1.546 1.147-.34 2.292-.688 3.432-1.05.122-.038.203.656.214.735.103.727.153 1.45.202 2.165.076 1.114.13 2.223.178 3.328a270.4 270.4 0 0 1 .144 4.222 437.424 437.424 0 0 1 .126 15.368 304.56 304.56 0 0 1-.096 5.133c-.043 1.572-.1 3.137-.18 4.69a97.78 97.78 0 0 1-.278 3.984c-.096 1.023-.209 2.04-.385 3.007-.185 1.023-.413 2.283-1.332 2.362-1.488.128-2.368-2.188-3.229-3.654-1.227-2.089-2.459-4.173-3.65-6.295a227.626 227.626 0 0 1-2.386-4.391c-.602-1.129-1.067-2.515-1.827-3.542-.342-.463-.833-.794-1.316-1.1-.493-.312-1.082-.225-1.66-.25-.118-.005-.241-.011-.345-.067-.116-.062-.192-.177-.262-.286-1.465-2.276-3.054-4.504-4.258-6.938C8.759 100.42 8 98.21 7.797 95.922c-.216-2.447-.537-4.907-.797-7.357 0 .022.374.048.79.068","fill","#D1D1D1"],["d","M10.763 88.096c1.431.077 2.85-.018 4.309-.14 2.202-.183 4.403-.624 6.54-1.17.43-.11 6.397-1.624 6.373-1.786.312 2.166.703 18.158.734 19.867.07 3.846.135 7.69.188 11.53.049 3.506.061 7 .092 10.5.009.976-.023 1.92-.772 2.084-.608.133-1.362-.453-1.804-1.24-1.62-2.885-3.275-5.726-4.866-8.65-.782-1.438-1.544-2.9-2.302-4.365-1.162-2.246-2.267-4.25-3.747-6.296-1.595-2.203-3.11-4.46-4.625-6.716-.43-.64-.86-1.282-1.211-1.968-.342-.668-.626-1.497-1.273-1.944-.216-.149-.462-.248-.687-.383-.721-.43-1.181-1.2-1.407-2.003-.344-1.223-.273-2.537-.298-3.795-.015-.784-.016-1.572.09-2.35.067-.495.073-1.144.415-1.546.487-.572 1.657.03 2.274.143.665.121 1.322.193 1.977.228","fill","#E5E5E5"],["d","M16.11 110.202c-1.22 4.135-2.476 8.266-3.936 12.321-.653 1.813-1.259 3.942-2.376 5.528-1.144 1.623-1.88-1.91-2.02-2.654-.754-4.018-1.762-7.985-2.51-12.006-.77-4.138-1.5-8.288-2.09-12.456-.336-2.377-.631-4.76-.88-7.149-.267-2.56-.328-5.11-.406-7.681-.007-.224-.901-.064-.892.242.075 2.448.12 4.883.369 7.321.244 2.39.535 4.775.868 7.154.648 4.638 1.463 9.256 2.335 13.855.432 2.284.913 4.556 1.419 6.824.41 1.84.69 3.76 1.209 5.572.304 1.063.973 2.215 2.243 1.862 1.41-.391 2.005-2.429 2.499-3.62 2.042-4.936 3.543-10.125 5.053-15.248.076-.256-.806-.134-.886.135","fill","#6A79A8"],["d","M19.752 86.317c3.044-.75 6.053-1.675 9.033-2.656l-.42-.058c.097.062.136.847.146.934.093.802.138 1.61.185 2.415.084 1.427.14 2.855.19 4.283.094 2.766.149 5.535.181 8.303.064 5.482.05 10.97-.147 16.45-.1 2.799-.21 5.622-.587 8.399-.097.716-.19 3.102-1.272 2.876-.845-.177-1.46-1.669-1.808-2.336-1.172-2.25-2.484-4.425-3.703-6.65-1.269-2.315-2.416-4.702-3.722-6.995-1.398-2.453-2.997-4.772-4.685-7.025-1.741-2.323-3.486-4.682-4.256-7.548-.116-.433-.993-.194-.876.24.846 3.15 2.836 5.693 4.735 8.251 2.007 2.704 3.833 5.53 5.39 8.53a281.474 281.474 0 0 0 5.135 9.445c.683 1.201 1.247 2.55 2.063 3.663.522.713 1.281 1.333 2.207 1.119.985-.228 1.269-1.3 1.447-2.184.32-1.595.45-3.234.566-4.855.265-3.691.352-7.396.401-11.096.098-7.334.054-14.691-.318-22.017a78.477 78.477 0 0 0-.18-2.794c-.036-.43.012-1.47-.302-1.842-.325-.385-.995-.009-1.363.11-2.714.871-5.445 1.707-8.21 2.388-.55.136-.377.784.17.65","fill","#6A79A8"],["d","M22.008 90.35c.827 1.676 2.277 2.951 4.117 3.635.248.092 1.143-.265.796-.394-1.757-.653-3.141-1.887-3.93-3.487-.13-.264-1.088.033-.983.245","fill","#6A79A8"],["d","M14.828 45.457c-.114.014-.227.03-.34.046-1.577.228-3.383.604-4.584 1.71a6.299 6.299 0 0 0-.547.588c-.177.21-.348.426-.513.646-1.41 1.873-2.185 3.92-2.788 6.15-.645 2.388-1.277 4.748-1.806 7.167-.94 4.304-1.603 8.663-2.142 13.033-.27 2.186-.507 4.377-.734 6.569-.173 1.677-.68 3.723-.113 5.376.582 1.695 7.018 1.888 8.385 2.045 7.293.838 14.427-.918 21.354-3.117-.191-2.284-.376-4.57-.581-6.852-.794-8.846-1.468-18.278-4.679-26.647-.969-2.525-2.409-5.79-5.117-6.89-.644-.263-1.346-.318-2.034-.26-.654.055-1.27.213-1.926.26-.613.045-1.225.098-1.835.176","fill","#F2F2F2"],["d","M14.419 44.236c-2.64.565-5.182 2.109-6.758 4.231-1.56 2.101-2.312 4.671-2.926 7.205-1.749 7.226-3.312 15.17-3.523 22.6-.07 2.48-.188 4.964-.212 7.445-.021 2.248 13.455 2.49 16.75 2.168C21.759 87.493 29 85.186 29 85.186c-.557-6.604-.866-13.226-1.593-19.816-.642-5.817-1.215-12.596-4.253-17.769-1.897-3.228-5.395-4.08-8.735-3.365","fill","#FFF"],["d","M25.943 35.117c.535-8.602-2.773-15.814-7.387-16.108-4.615-.294-8.788 6.442-9.322 15.044l-.096 1.542c-.296 4.77-.102 8.118.455 10.476.755 3.192 3.31 5.045 6.124 6.329 1.149.524 2.46.78 3.68.459 1.09-.287 2.03-1.013 2.765-1.878 3.05-3.586 3.406-9.815 3.686-14.322.02-.341.082-1.332.095-1.542","fill","#FFF"],["d","M8.009 48.48a.194.194 0 0 0 .015.15c.068.14.223.247.327.37 1.71 2.035 4.295 3.51 7.25 3.915 1.746.24 3.392-.053 4.89-.57a27.86 27.86 0 0 0 2.17-.881c.387-.171.81-.29 1.155-.521.175-.119.213-.177.165-.377-.035-.145-.085-.349-.237-.447-.176-.114-.556.007-.723.074-2.216.9-4.666 2.687-7.522 1.859-2.387-.693-4.594-2.223-6.175-3.828-.3-.303-.823-.288-1.078-.019-.086.092-.205.172-.237.275","fill","#F2F2F2"],["d","M8.11 48.58c2.037 1.636 4.692 2.901 7.318 3.316 2.942.464 5.496-.724 8.226-1.577.555-.173.4-.773-.166-.596-2.555.798-4.978 1.976-7.736 1.538-2.495-.397-4.994-1.636-6.925-3.188-.308-.246-1.121.182-.716.507","fill","#6A79A8"],["d","M28.025 25.348c.987-.72 1.771-1.705 2.425-2.75a20.8 20.8 0 0 0 1.123-2.078c.07-.148.502-.893.416-.999-.045-.053-.286-.045-.352-.05a2.781 2.781 0 0 0-.333.001 4.88 4.88 0 0 0-.665.093c-.28.056-.56.118-.838.183-.519.12-1.036.25-1.561.338l1.964-3.1-1.398.174.486-1.523-3.168 1.6.405-2.367-2.337 1.176-1.374-2.326-.99 1.09-2.356-2.904-.82 1.737L16.803 11c-.873.418-1.036 1.993-1.824 2.26-.746.254-2.953-1.7-3.62-2.128l1.404 2.95-3.2-1.641c.198.456.397.913.597 1.369l-2.51-.913 1.804 2.231L6 13.568c1.295 1.568 1.597 3.69 1.815 5.763.122 1.163.568 2.353.554 3.493-.028 1.297-.358 2.548-.332 3.831.029 1.442.177 2.932.198 4.398.005.37.064.826.383.943.377.138 2.848-3.035 3.412-3.426.506-.35 3.281-1.67 3.367-2.214l-.251 1.227c.469-.768 1.5-1.11 2.321-.772.807.332 1.006 1.158 1.425 1.807.88-.489 1.756-.903 2.752-1.117 2.234-.482 4.464-.753 6.381-2.153","fill","#BBDFF5"],["d","M9.958 45.66c-1.177-3.915-.777-8.294-.518-12.307.277-4.282 1.364-8.986 4.237-12.315 1.046-1.212 2.46-2.3 4.12-2.378 1.544-.074 2.934.772 3.945 1.882 2.823 3.1 3.627 7.858 3.644 11.903.01 2.279-.19 4.59-.4 6.858-.256 2.78-.686 5.586-1.82 8.157-.034.077-.038.186.02.255.822.996 1.26 2.265 1.717 3.463a49.025 49.025 0 0 1 1.435 4.4c.846 3.06 1.427 6.188 1.87 9.33.915 6.486 1.353 13.044 1.896 19.569l.363-.435c-5.653 1.797-11.484 3.33-17.458 3.288-1.859-.013-3.716-.218-5.561-.437-1.653-.196-3.363-.407-4.94-.962-.477-.167-1.178-.39-1.444-.867-.255-.458-.156-1.161-.129-1.66.097-1.767.414-3.527.715-5.268.763-4.417 1.28-8.867 2.063-13.28.58-3.276 1.325-6.51 2.177-9.726.792-2.993 1.642-5.844 3.638-8.278.361-.44-.486-.6-.752-.275-1.673 2.04-2.652 4.397-3.342 6.926-.82 3.007-1.587 6.029-2.193 9.087-.98 4.954-1.507 9.975-2.383 14.946-.33 1.877-.678 3.768-.813 5.67-.082 1.149-.174 2.243.928 2.888 1.352.791 3.089 1.025 4.611 1.256 1.52.23 3.056.393 4.587.526 6.98.607 13.863-1.105 20.464-3.204.208-.066.383-.202.364-.436-.703-8.446-1.132-17.034-2.9-25.342a56.65 56.65 0 0 0-1.636-6.09c-.558-1.678-1.117-3.69-2.165-5.132-.046-.063-.172-.165-.191-.231-.094-.314.03.042.034-.137.01-.373.4-1.022.518-1.387.275-.848.492-1.716.667-2.59.367-1.831.552-3.693.687-5.554.25-3.432.479-6.856-.177-10.26-.541-2.81-1.605-5.817-3.728-7.83-1.607-1.523-3.795-2.123-5.903-1.338-2.42.9-4.103 3.167-5.23 5.394-1.742 3.444-2.292 7.215-2.527 11.023C8.224 38.39 8 42.368 9.063 45.9c.127.42 1.021.178.895-.24","fill","#6A79A8"],["d","M23.121 42.362c-.17.476-.474 1.013-1.045.955-.57-.058-.96-.616-1.162-1.11-.169-.41-1.056-.15-.894.245.35.855 1.028 1.55 1.986 1.548.942-.003 1.659-.655 1.971-1.53.177-.497-.718-.495-.856-.108","fill","#6A79A8"],["d","M24.721 79l.043-.12c.027-.079.073-.197.117-.35.097-.3.206-.758.253-1.332.026-.286.025-.603.002-.938a4.892 4.892 0 0 0-.205-1.04c-.115-.351-.273-.701-.502-1.008-.062-.074-.116-.152-.18-.225-.078-.09-.156-.183-.235-.276l-.23-.253-.252-.267c-.344-.362-.716-.75-1.102-1.199a7.545 7.545 0 0 1-1.077-1.619 5.873 5.873 0 0 1-.56-2.132l-.012-.141-.005-.148-.008-.233c.002-.182.005-.394.017-.561.018-.356.057-.699.099-1.041.084-.68.21-1.334.31-1.959.05-.312.095-.62.123-.911a6.78 6.78 0 0 0 .047-.834 3.265 3.265 0 0 0-.08-.697 1.844 1.844 0 0 0-.215-.519c-.18-.299-.5-.573-.96-.804-.058-.027-.11-.06-.17-.087l-.185-.08c-.119-.059-.257-.101-.387-.151l-.099-.037.014.004-.015-.004-.03-.01-.06-.018-.122-.038a1.755 1.755 0 0 0-.11-.032l-.184-.049-.211-.05a23.635 23.635 0 0 0-1.852-.307c-.33-.046-.669-.093-1.013-.148-.345-.059-.697-.129-1.05-.214l-.267-.067-.072-.019-.03-.009-.057-.018-.117-.036-.232-.071-.118-.038-.138-.05c-.181-.068-.37-.133-.54-.208l-.493-.228a10.245 10.245 0 0 1-3.216-2.515A10.922 10.922 0 0 1 7.5 52.848l-.075-.191-.037-.095-.01-.023-.016-.04-.003-.01-.015-.046-.112-.357-.108-.425c-.033-.139-.047-.27-.07-.4a6.086 6.086 0 0 1-.017-1.481c.058-.457.156-.868.276-1.235.13-.363.26-.686.409-.961.285-.556.574-.942.77-1.201.097-.13.183-.222.236-.287L8.81 46l-.18.462c-.113.3-.258.749-.384 1.317-.064.283-.11.6-.144.938-.02.341-.031.704.007 1.083.044.377.12.767.255 1.154.038.094.07.197.109.287l.12.265.172.33.173.28c.12.204.26.402.396.606.149.196.289.402.455.592.316.392.671.77 1.063 1.12a9.015 9.015 0 0 0 2.718 1.712l.388.14c.128.042.245.072.367.112l.09.029c.032.01.077.019.114.028l.236.057.118.03.06.013.029.007-.026-.007.013.003.21.039c.566.097 1.182.157 1.842.225.661.068 1.37.13 2.115.291l.281.062.304.079c.055.013.094.025.134.037l.121.036.15.045.14.049c.186.067.371.125.56.21l.281.12c.094.042.19.093.282.141.374.19.75.44 1.104.744.357.298.682.688.938 1.116.257.43.435.907.525 1.367.092.461.115.903.107 1.318-.02.83-.168 1.552-.316 2.223l-.433 1.875c-.06.29-.118.577-.154.849-.024.146-.03.247-.049.377l-.016.233-.005.058-.002.03v-.015.012l-.002.09c-.02.485.053.935.195 1.382.284.892.93 1.751 1.51 2.624l.215.33.214.34.183.317c.075.121.132.252.195.375.23.505.35 1.01.39 1.476a5.384 5.384 0 0 1-.302 2.308 5.4 5.4 0 0 1-.654 1.283c-.087.14-.171.23-.222.297l-.079.099","fill","#BBDFF5"],["d","M24.95 48.134s.01.093.032.267c.009.087.022.193.017.323-.003.128.002.286-.022.45-.015.167-.04.353-.087.552-.035.205-.11.413-.18.645a6.399 6.399 0 0 1-.757 1.456 7.123 7.123 0 0 1-2.617 2.274l-.069.036-.017.009-.01.004c-.063.025-.02.01-.037.016l-.03.013-.239.11c-.04.018-.075.036-.132.057l-.315.119a9.222 9.222 0 0 1-2.515.508c-.858.059-1.703.015-2.508-.069-.4-.044-.796-.094-1.18-.153-.4-.058-.793-.129-1.194-.214a11.444 11.444 0 0 1-2.348-.746 7.837 7.837 0 0 1-1.314-.75l-.235-.177-.058-.044-.007-.005c-.059-.041-.02-.014-.034-.025l-.012-.01-.023-.02-.092-.081a4.86 4.86 0 0 1-.196-.18l-.219-.212c-.067-.07-.125-.138-.186-.206-.124-.133-.23-.276-.334-.414a5.986 5.986 0 0 1-.505-.845 5.252 5.252 0 0 1-.482-1.582 4.517 4.517 0 0 1-.006-1.229c.012-.083.02-.161.033-.234a68.377 68.377 0 0 0 .087-.379l.046-.142c.056-.169.09-.256.09-.256l.076.258c.022.083.054.185.096.302.04.117.083.25.144.393.225.577.641 1.348 1.323 2.047.169.175.356.344.557.504.107.073.201.16.313.23.054.035.11.076.162.108l.152.087c.04.026.125.07.194.11l.108.062.028.015.013.008c-.01-.008.033.022-.022-.016l.006.003.048.022c.125.06.252.12.384.174.265.107.54.207.833.291.585.17 1.227.293 1.916.393.341.052.702.095 1.059.138l1.103.125c.722.077 1.414.133 2.07.132a9.357 9.357 0 0 0 2.049-.212c.028-.003.075-.018.118-.03l.127-.036.127-.035.032-.01c-.01.005.036-.013-.023.01l.007-.002.012-.004.05-.016.2-.062c.132-.047.264-.096.395-.148.127-.06.26-.108.383-.173a8.052 8.052 0 0 0 1.367-.846 8.496 8.496 0 0 0 1.04-.942c.283-.314.517-.611.691-.873.173-.259.306-.471.385-.633l.132-.24","fill","#BBDFF5"],["d","M47.593 58.244c-.403.782-.364 1.483-.011 2.276.434.974.826 1.654-.167 2.447-2.09 1.667-4.582 2.933-7.056 3.86-4.93 1.848-10.416 2.276-15.468.687-2.99-.94-5.703-2.591-8.002-4.768-.25-.236-1.104.126-.838.377 8.666 8.205 21.746 7.21 31.09.766.786-.541 1.999-1.208 1.846-2.363-.16-1.214-1.215-1.94-.545-3.241.211-.41-.697-.335-.849-.041","fill","#6A79A8"],[1,"cu-custom-fields__paywall-popover-title"],p,[1,"cu-custom-fields__paywall-popover-description"],h,["class","cu-custom-fields__paywall-popover-link",3,"cuLink",4,"ngIf"],[1,"cu-custom-fields__paywall-popover-link",3,"cuLink"],f,["placement","bottom","containerClass","popover_white popover_no-max-width",1,"cu-custom-fields__list-item-btns-guests","cu-custom-fields__list-item-btns-required",3,"popover","outsideClick","cuTooltip","click","onHidden"],["requiredPopover","bs-popover"],b,[1,"cu-entity-custom-fields-modal__header"],["class","cu-entity-custom-fields-modal__header-back",4,"ngIf"],["class","cu-modal__title cu-modal__title_visible",4,"ngIf"],["class","cu-modal__title cu-modal__title_visible cu-modal__title-edit-field",4,"ngIf"],[3,"customFields","entity","allowRequireChange","notBusinessPlus","fieldToEdit","canDelete","createNewType","fieldToEditUsages","country","addColumnAfterId","addColumnBeforeId","addCreatedColumn","forTaskListHeader","forRelationships","showPin","hideCreateRollupFields","cancel","save","delete",4,"ngIf","ngIfElse"],[1,"cu-entity-custom-fields-modal__header-back"],[1,"cu-entity-custom-fields-modal__header-back-container",3,"click"],["icon","arrow-down",1,"cu-entity-custom-fields-modal__header-back-icon","icon"],[1,"cu-entity-custom-fields-modal__header-back-text"],g,[1,"cu-modal__title","cu-modal__title_visible"],_,v,[1,"cu-modal__title","cu-modal__title_visible","cu-modal__title-edit-field"],k,[3,"customFields","entity","allowRequireChange","notBusinessPlus","fieldToEdit","canDelete","createNewType","fieldToEditUsages","country","addColumnAfterId","addColumnBeforeId","addCreatedColumn","forTaskListHeader","forRelationships","showPin","hideCreateRollupFields","cancel","save","delete"],[3,"title","image","text","forBusiness","upgradeButtonText","emailSubject","flipBadge"]]},template:function(e,t){1&e&&(c.bd(0,R,10,4,"ng-template",null,0,c.cd),c.bd(2,Y,5,6,"div",1),c.bd(3,se,7,7,"div",1),c.bd(4,ce,1,7,"ng-template",null,2,c.cd)),2&e&&(c.Ib(2),c.Dc("ngIf",!t.fieldToEdit$.value&&!t.createNewFieldVisible),c.Ib(1),c.Dc("ngIf",t.fieldToEdit$.value||t.createNewFieldVisible))},styles:['.cu-entity-custom-fields-modal__header{margin-top:-65px;width:calc(100% - 25px);background-color:#fff;padding:10px 0 20px;display:flex}.dark-theme .cu-entity-custom-fields-modal__header{background-color:#384047}.cu-entity-custom-fields-modal__header-back{display:flex;margin-bottom:20px}.cu-entity-custom-fields-modal__header-back-container{display:inline-flex;align-items:center}.cu-entity-custom-fields-modal__header-back-container:hover .cu-entity-custom-fields-modal__header-back-icon use{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-entity-custom-fields-modal__header-back-container:hover .cu-entity-custom-fields-modal__header-back-icon use{fill:var(--theme-main-color-dark)}}.cu-entity-custom-fields-modal__header-back-container:hover .cu-entity-custom-fields-modal__header-back-text{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-entity-custom-fields-modal__header-back-container:hover .cu-entity-custom-fields-modal__header-back-text{color:var(--theme-main-color-dark)}}.cu-entity-custom-fields-modal__header-back-icon{width:10px;height:6px;transform:rotate(90deg);margin:4px 4px 4px 0;cursor:pointer}.cu-entity-custom-fields-modal__header-back-icon use{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__header-back-icon use{fill:var(--theme-main-color)}}.cu-entity-custom-fields-modal__header-back-text{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__header-back-text{color:var(--theme-main-color)}}.cu-entity-custom-fields-modal__header .cu-modal__title{font-size:26px;font-weight:400;flex-grow:1;text-align:center;visibility:visible;padding-right:0}.cu-entity-custom-fields-modal__type-list{width:850px}.cu-entity-custom-fields-modal__type-list-title{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:23px;color:#505050;padding:0 50px;margin-top:-56px;margin-bottom:20px;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-entity-custom-fields-modal__type-list-title{font-family:var(--global-font-support)}}.dark-theme .cu-entity-custom-fields-modal__type-list-title{color:#d5d6d7}.cu-entity-custom-fields-modal__type-list-label{text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;margin-bottom:10px;color:rgba(34,34,34,.3)}.contrast_high .cu-entity-custom-fields-modal__type-list-label{color:#858585}.dark-theme .cu-entity-custom-fields-modal__type-list-label{color:#828588}.cu-entity-custom-fields-modal__type-list-description{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/21px Gotham Pro,Proxima Nova,arial,serif;color:#9b9b9b;margin:0 auto 40px;width:640px;text-align:center}.cu-entity-custom-fields-modal__type-list-description-link{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;display:inline-block;padding-bottom:1px;line-height:1}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__type-list-description-link{color:var(--theme-main-color)}}.cu-entity-custom-fields-modal__type-list-description-link:after{content:"";display:block;position:absolute;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;bottom:0;left:0;width:100%;height:1px}.cu-entity-custom-fields-modal__type-list-description-link:after:hover{transition:none}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__type-list-description-link:after{background-color:var(--theme-main-color)}}.cu-entity-custom-fields-modal__type-list-description-link:hover:after{opacity:0}.cu-entity-custom-fields-modal__type-list-items{display:grid;grid-template-columns:repeat(5,1fr);grid-column-gap:10px;margin-bottom:30px}.cu-entity-custom-fields-modal__type-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:162px;min-height:155px;border-radius:3px;border:1px solid #f0f0f0;display:flex;flex-direction:column;align-items:center;padding:12px;margin-bottom:10px;cursor:pointer;position:relative;overflow:hidden}.dark-theme .cu-entity-custom-fields-modal__type-list-item{border-color:#828588}.cu-entity-custom-fields-modal__type-list-item:not(.cu-entity-custom-fields-modal__type-list-item_disabled):hover{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__type-list-item:not(.cu-entity-custom-fields-modal__type-list-item_disabled):hover{border-color:var(--theme-main-color)}}.cu-entity-custom-fields-modal__type-list-item:not(.cu-entity-custom-fields-modal__type-list-item_disabled):hover .cu-entity-custom-fields-modal__type-list-item-icon svg{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__type-list-item:not(.cu-entity-custom-fields-modal__type-list-item_disabled):hover .cu-entity-custom-fields-modal__type-list-item-icon svg{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu-entity-custom-fields-modal__type-list-item_disabled{cursor:default}.cu-entity-custom-fields-modal__type-list-item_disabled:after{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#fc0;content:"coming soon";text-transform:uppercase;position:absolute;width:130px;top:22px;height:22px;left:calc(100% - 99px);padding:8px 0;color:#fff;text-align:center;letter-spacing:.5px;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;transform:rotate(45deg)}.dark-theme .cu-entity-custom-fields-modal__type-list-item_disabled:after{color:#828588}.cu-entity-custom-fields-modal__type-list-item_disabled .cu-entity-custom-fields-modal__type-list-item-description,.cu-entity-custom-fields-modal__type-list-item_disabled .cu-entity-custom-fields-modal__type-list-item-icon,.cu-entity-custom-fields-modal__type-list-item_disabled .cu-entity-custom-fields-modal__type-list-item-title{opacity:.5}.cu-entity-custom-fields-modal__type-list-item-icon{width:25px;height:25px;margin-bottom:15px;display:flex;align-items:center;justify-content:center}.cu-entity-custom-fields-modal__type-list-item-icon svg{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:100%;height:100%;stroke:#cbc9cf;fill:#cbc9cf}.dark-theme .cu-entity-custom-fields-modal__type-list-item-icon svg{stroke:#828588;fill:#828588}.cu-entity-custom-fields-modal__type-list-item-icon_url svg{width:22px;height:22px}.cu-entity-custom-fields-modal__type-list-item-icon_drop_down svg{width:20px;height:20px}.cu-entity-custom-fields-modal__type-list-item-icon_email svg{width:28px;height:19px}.cu-entity-custom-fields-modal__type-list-item-icon_phone svg{width:24px;height:24px;stroke-width:.3px}.cu-entity-custom-fields-modal__type-list-item-icon_date svg{width:22px;height:23px}.cu-entity-custom-fields-modal__type-list-item-icon_text svg{width:24px;height:24px;stroke-width:0}.cu-entity-custom-fields-modal__type-list-item-icon_short_text svg{width:15px;height:19px;stroke-width:0}.cu-entity-custom-fields-modal__type-list-item-icon_checkbox svg{width:22px;height:22px}.cu-entity-custom-fields-modal__type-list-item-icon_number svg{width:16px;height:20px;stroke-width:0}.cu-entity-custom-fields-modal__type-list-item-icon_currency svg{width:13px;height:22px;stroke-width:0}.cu-entity-custom-fields-modal__type-list-item-icon_emoji svg{width:25px;height:24px}.cu-entity-custom-fields-modal__type-list-item-icon_users svg{width:24px;height:26px}.cu-entity-custom-fields-modal__type-list-item-icon_tasks svg{width:23px;height:28px;stroke-width:0}.cu-entity-custom-fields-modal__type-list-item-icon_labels svg{width:24px;height:24px}.cu-entity-custom-fields-modal__type-list-item-icon_automatic_progress{width:30px}.cu-entity-custom-fields-modal__type-list-item-icon_automatic_progress svg{width:30px;height:24px;stroke-width:0;margin-right:-4px}.cu-entity-custom-fields-modal__type-list-item-icon_manual_progress{width:26px}.cu-entity-custom-fields-modal__type-list-item-icon_manual_progress svg{width:26px;height:24px;margin-bottom:-6px}.cu-entity-custom-fields-modal__type-list-item-icon_list_relationship svg{stroke-width:0}.cu-entity-custom-fields-modal__type-list-item-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#686868;font:500 16px/1 Gotham Pro,Proxima Nova,arial,serif;margin:0 -7px 10px;text-align:center}.dark-theme .cu-entity-custom-fields-modal__type-list-item-title{color:#d5d6d7}.cu-entity-custom-fields-modal__type-list-item-description{color:#4a4a4a;font:400 12px/21px Gotham Pro,Proxima Nova,arial,serif;text-align:center}.dark-theme .cu-entity-custom-fields-modal__type-list-item-description{color:#abaeb0}.cu-entity-custom-fields-modal__add{display:flex;align-items:center}.cu-entity-custom-fields-modal__add_center{justify-content:center}.cu-entity-custom-fields-modal__add-or{font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;padding:0 5px 0 15px;border-bottom:1px solid transparent;color:#292d34}.dark-theme .cu-entity-custom-fields-modal__add-or{color:#d5d6d7}.cu-entity-custom-fields-modal__add-existing{color:#7b68ee;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;border-bottom:1px dashed;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-entity-custom-fields-modal__add-existing{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-entity-custom-fields-modal__add-existing:hover{color:#5f48ea;border-bottom-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-entity-custom-fields-modal__add-existing:hover{color:var(--theme-main-color-dark);border-bottom-color:var(--theme-main-color-dark)}}'],encapsulation:2,changeDetection:0}),e})()},"+6i6":function(e,t,i){e.exports=i.p+"threaded_comments.676a3650b2653e369380.png"},"+HC/":function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("fXoL"),n=i("LdyQ"),s=i("MJvn"),c=i("n+1/"),a=i("5YBK");const r=["dropdown"];function l(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.cc(1,"cu-emoji-picker",5),o.qc("loaded",function(){return o.Uc(e),o.uc().loaded()})("emojiSelect",function(t){o.Uc(e);const i=o.uc(),n=o.Rc(1);return i.onSelect.emit(t.emoji),n.close()}),o.bc(),o.bc()}2&e&&(o.Ib(1),o.Dc("autoFocus",!0)("showPreview",!1))}const d=function(){return["top-left","top-right","bottom-left","bottom-right","auto"]},u=["*"];let m=(()=>{class e{constructor(){this.emojiLoaded=!1,this.stopClickPropagation=!1,this.onSelect=new o.o}ngOnInit(){}loaded(){this.emojiLoaded=!0}onDropdownToggleClick(e){this.stopClickPropagation&&e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-emoji-picker-dropdown"]],viewQuery:function(e,t){if(1&e&&o.jd(r,1),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-emoji-picker-dropdown"],inputs:{stopClickPropagation:"stopClickPropagation"},outputs:{onSelect:"onSelect"},ngContentSelectors:u,decls:5,vars:3,consts:[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPlacement"],["dropdown","dropdown"],["cuDropdownToggle","",3,"click"],["class","cu-emoji-picker-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-emoji-picker-dropdown__menu"],["set","apple",3,"autoFocus","showPreview","loaded","emojiSelect"]],template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.cc(2,"div",2),o.qc("click",function(e){return t.onDropdownToggleClick(e)}),o.Bc(3),o.bc(),o.bd(4,l,2,2,"div",3),o.bc()),2&e&&o.Dc("dropdownCloseOnInsideClick",!1)("dropdownPlacement",o.Gc(2,d))},directives:[n.b,s.a,c.a,a.a],styles:[".cu-emoji-picker-dropdown__menu{animation:none;min-height:356px;min-width:338px;overflow-y:hidden}"],encapsulation:2,changeDetection:0}),e})()},"+OJB":function(e,t,i){"use strict";t.cwd=function(){return"/"}},"+dGp":function(e,t,i){e.exports=i.p+"outlook-setup-3.53e64bd3255d30c3ad43.png"},"+hOa":function(e,t,i){e.exports=i.p+"collab-editing.e07d40c3625abeb868df.gif"},"+iQC":function(e,t,i){"use strict";i.d(t,"a",function(){return v});var o=i("KX9h"),n=i("dsEp"),s=i("ZeEz"),c=i("PiVx"),a=i("gb9A"),r=i("ofXK"),l=i("3Pt+"),d=i("K0KF"),u=i("KyjD"),m=i("EDFS"),p=i("1M0N"),h=i("bx+h"),f=i("fTg4"),b=i("/SUI"),g=i("fXoL");let _=(()=>{class e{}return e.\u0275mod=g.Ub({type:e}),e.\u0275inj=g.Tb({factory:function(t){return new(t||e)},imports:[[r.c,b.a,u.a,s.a]]}),e})(),v=(()=>{class e{}return e.\u0275mod=g.Ub({type:e}),e.\u0275inj=g.Tb({factory:function(t){return new(t||e)},providers:[o.a],imports:[[r.c,l.l,l.x,d.a,a.a,u.a,m.d,p.a,h.a,f.a,c.a,_,s.a,n.a]]}),e})()},"/+FX":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("Wk/N");const n=["blockquote","code-block"];function s(e,t){return function(i){const s=t();if(!s)return;const c=s.getSelection(!0);if(!c)return;const[a]=s.getLine(c.index),r=a.formats();i?"list"===a.statics.blotName?(s.format(e,Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list})),s.format("indent",!1)):n.indexOf(a.statics.blotName)>=0?s.format(e,Object.assign(Object.assign({},r[a.statics.blotName]),{[a.statics.blotName]:null})):s.format(e,{},o.i.USER):r&&r[e]&&r[e]["in-list"]?(s.format("list",{list:r[e]["in-list"]}),s.format("indent",r[e]["wrapper-indent"])):s.format(e,!1,o.i.USER)}}},"/2u5":function(e,t,i){e.exports=i.p+"emailapp.64f4227681270ee1c3d5.png"},"/Uwt":function(e,t,i){"use strict";i.d(t,"a",function(){return j});var o=i("fFxs"),n=i("dTHz"),s=i("bV87"),c=i("fXoL"),a=i("ofXK"),r=i("peMq"),l=i("S//e"),d=i("OBnU"),u=i("UdVN"),m=i("Dvla"),p=i("t7PA");function h(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.TemplateVisibility.ME)}),c.bc(),c.cc(3,"div",7),c.gc(4,8),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.TemplateVisibility.ME)}}function f(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.EmailVisibility.ME)}),c.bc(),c.cc(3,"div",7),c.gc(4,9),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.EmailVisibility.ME)}}function b(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.TemplateVisibility.ALL)}),c.bc(),c.cc(3,"div",7),c.gc(4,10),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.TemplateVisibility.ALL)}}function g(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.EmailVisibility.EVERYONE)}),c.bc(),c.cc(3,"div",7),c.gc(4,11),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.EmailVisibility.EVERYONE)}}function _(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.TemplateVisibility.ADMINS)}),c.bc(),c.cc(3,"div",7),c.gc(4,12),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.TemplateVisibility.ADMINS)}}function v(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.EmailVisibility.ADMIN)}),c.bc(),c.cc(3,"div",7),c.gc(4,13),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.EmailVisibility.ADMIN)}}function k(e,t){1&e&&c.Xb(0,"cu-user-group",18),2&e&&c.Dc("assignIcon",!0)("showDropdown",!1)("readOnly",!0)("canAssign",!1)("modifier","cu-user-group_m")("avatarSize",30)("userAddTooltip","")}function y(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-user-list-dropdown",19),c.qc("onChange",function(t){return c.Uc(e),c.uc(2).onSetMembers.emit(t)}),c.cc(1,"cu-user-group",20),c.qc("onUserRemove",function(t){return c.Uc(e),c.uc(2).onRemoveMember.emit(t)}),c.bc(),c.bc()}if(2&e){const e=c.uc(2);c.Dc("multiChoice",!0)("selectedUsers",e.templateMembers)("users",e.members)("showUnassign",(null==e.templateMembers?null:e.templateMembers.length)>0)("immutableUser",e.user),c.Ib(1),c.Dc("showUserRemover",!0)("users",e.templateMembers)("assignIcon",!0)("multiChoice",!0)("modifier","cu-user-group_m")("avatarSize",30)("showDropdown",!1)("immutableUser",e.user)}}function w(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.EmailVisibility.PRIVATE)}),c.bc(),c.cc(3,"div",14),c.ac(4),c.gc(5,15),c.Zb(),c.dd(6,": "),c.bd(7,k,1,7,"cu-user-group",16),c.bd(8,y,2,13,"ng-template",null,17,c.cd),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.Rc(9),t=c.uc();c.Ib(2),c.Dc("value",!0)("checked",t.visibilityOption===t.EmailVisibility.PRIVATE),c.Ib(5),c.Dc("ngIf",t.visibilityOption!==t.EmailVisibility.PRIVATE)("ngIfElse",e)}}function x(e,t){1&e&&c.Xb(0,"cu-user-group",18),2&e&&c.Dc("assignIcon",!0)("showDropdown",!1)("readOnly",!0)("canAssign",!1)("modifier","cu-user-group_m")("avatarSize",30)("userAddTooltip","")}function I(e,t){if(1&e){const e=c.dc();c.cc(0,"cu-user-list-dropdown",19),c.qc("onChange",function(t){return c.Uc(e),c.uc(2).onSetMembers.emit(t)}),c.cc(1,"cu-user-group",20),c.qc("onUserRemove",function(t){return c.Uc(e),c.uc(2).onRemoveMember.emit(t)}),c.bc(),c.bc()}if(2&e){const e=c.uc(2);c.Dc("multiChoice",!0)("selectedUsers",e.templateMembers)("users",e.members)("showUnassign",(null==e.templateMembers?null:e.templateMembers.length)>0)("immutableUser",e.user),c.Ib(1),c.Dc("showUserRemover",!0)("users",e.templateMembers)("assignIcon",!0)("multiChoice",!0)("modifier","cu-user-group_m")("avatarSize",30)("showDropdown",!1)("immutableUser",e.user)}}function T(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.TemplateVisibility.MEMBERS)}),c.bc(),c.cc(3,"div",14),c.ac(4),c.gc(5,21),c.Zb(),c.dd(6,": "),c.bd(7,x,1,7,"cu-user-group",16),c.bd(8,I,2,13,"ng-template",null,17,c.cd),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.Rc(9),t=c.uc();c.Ib(2),c.Dc("value",!0)("checked",t.visibilityOption===t.TemplateVisibility.MEMBERS),c.Ib(5),c.Dc("ngIf",t.visibilityOption!==t.TemplateVisibility.MEMBERS)("ngIfElse",e)}}function C(e,t){if(1&e){const e=c.dc();c.cc(0,"div",5),c.cc(1,"label"),c.cc(2,"input",6),c.qc("click",function(){c.Uc(e);const t=c.uc();return t.onChangeVisibilityOption.emit(t.TemplateVisibility.TEAM)}),c.bc(),c.cc(3,"div",7),c.gc(4,22),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("value",!0)("checked",e.visibilityOption===e.TemplateVisibility.TEAM)}}function D(e,t){1&e&&(c.cc(0,"span",30),c.dd(1," ("),c.ac(2),c.gc(3,31),c.Zb(),c.dd(4,") "),c.bc())}function O(e,t){1&e&&(c.ac(0),c.gc(1,43),c.Zb())}function S(e,t){1&e&&(c.ac(0),c.gc(1,44),c.Zb())}function E(e,t){if(1&e){const e=c.dc();c.ac(0),c.cc(1,"div",32),c.cc(2,"div",33),c.cc(3,"div",34),c.Xb(4,"div",35),c.ac(5),c.gc(6,36),c.Zb(),c.bc(),c.bc(),c.cc(7,"div",37),c.cc(8,"a",38),c.dd(9),c.bc(),c.cc(10,"div",39,40),c.qc("cbOnSuccess",function(){return c.Uc(e),c.Rc(11).setCopied()}),c.bd(12,O,2,0,"ng-container",41),c.bd(13,S,2,0,"ng-template",null,42,c.cd),c.bc(),c.bc(),c.bc(),c.Zb()}if(2&e){const e=c.Rc(11),t=c.Rc(14),i=c.uc(2);c.Ib(8),c.Dc("href",i.sharingLink,c.Xc),c.Ib(1),c.fd(" ",i.sharingLink," "),c.Ib(1),c.Dc("cbContent",i.sharingLink),c.Ib(2),c.Dc("ngIf",e.copied)("ngIfElse",t)}}function P(e,t){if(1&e){const e=c.dc();c.cc(0,"div",23),c.cc(1,"div",24),c.cc(2,"div",25),c.ac(3),c.gc(4,26),c.Zb(),c.bd(5,D,5,0,"span",27),c.bc(),c.cc(6,"cu-toggle-switch",28),c.qc("onChange",function(t){return c.Uc(e),c.uc().onEmitPublic.emit(t)}),c.bc(),c.bc(),c.bd(7,E,15,5,"ng-container",29),c.bc()}if(2&e){const e=c.uc();c.Ib(5),c.Dc("ngIf",e.isPublic&&(!(null!=e.template&&e.template.id)||!(null!=e.template&&e.template.public_key)&&!(null!=e.template&&e.template.publicKey))),c.Ib(1),c.Dc("checked",e.isPublic)("updateImmediately",!1),c.Ib(1),c.Dc("ngIf",e.isPublic&&(null==e.template?null:e.template.id)&&((null==e.template?null:e.template.public_key)||(null==e.template?null:e.template.publicKey)))}}let j=(()=>{class e{constructor(){this.TemplateVisibility=s.f,this.EmailVisibility=o.f,this.UserRole=n.f,this.showPublic=!0,this.forEmail=!1,this.onChangeVisibilityOption=new c.o,this.onSetMembers=new c.o,this.onRemoveMember=new c.o,this.onEmitPublic=new c.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-template-sharing"]],inputs:{visibilityOption:"visibilityOption",role:"role",type:"type",templateMembers:"templateMembers",members:"members",user:"user",template:"template",isPublic:"isPublic",sharingLink:"sharingLink",showPublic:"showPublic",forEmail:"forEmail"},outputs:{onChangeVisibilityOption:"onChangeVisibilityOption",onSetMembers:"onSetMembers",onRemoveMember:"onRemoveMember",onEmitPublic:"onEmitPublic"},decls:15,vars:10,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h;return e=$localize`:@@cu-template-sharing__title_share-with␟140bc4c9f43b23cf9674ed9002de9320e8c40711␟3357377997379103082:Share with`,t=$localize`:@@common_only-me␟4bbc1e93c17d5aa04dc6301e7121a0df611cfc1f␟4184089666886512003:Only Me`,i=$localize`:@@common_only-me␟4bbc1e93c17d5aa04dc6301e7121a0df611cfc1f␟4184089666886512003:Only Me`,o=$localize`:@@cu-template-sharing__form-label_everyone-with-guests␟6f6336295cb590f433944327d801ad3f2037274d␟4047171495843753787: Everyone (including guests) `,n=$localize`:@@common_everyone␟2a20abe81aace8689a53df09365c12823ab2643c␟6534056417716630629:Everyone`,s=$localize`:@@common_admins␟52f129d0acf224a207f1ea0495b7a192c2876d54␟4506803456670769268:Admins`,c=$localize`:@@common_admins␟52f129d0acf224a207f1ea0495b7a192c2876d54␟4506803456670769268:Admins`,a=$localize`:@@forms_label--select-people␟b920b62530e405278b339e8e9c355fbab7c39976␟6184856106007865608:Select people`,r=$localize`:@@forms_label--select-people␟b920b62530e405278b339e8e9c355fbab7c39976␟6184856106007865608:Select people`,l=$localize`:@@common_all-members␟5ff0a1019f3760676fce8b5cc9421bb56235ecab␟6783237823517394918:All Members`,d=$localize`:@@common_public-sharing␟b12a2ae3614b41e782ce3d7a54771ae65f1bb3fa␟4305638006329034740:Public sharing`,u=$localize`:@@cu-template-sharing__public-new␟ca372fa153ace19c72f99ff257e99519c4554aae␟7962144819510070793:save to create public link`,m=$localize`:@@common_public-link␟ef9ca33dee0c7f8e96e779bf1ce93dab98389c74␟3514392455302562535:Public link`,p=$localize`:@@common_copied␟501c37ede010e2df9eb7b59ca7d6ac3d73ce146c␟5392341774767336507:Copied!`,h=$localize`:@@common_copy-link␟4954fe49190be1ec2fbfbc10aae294701a75bd55␟2618101617221155143:Copy link`,[[1,"template__options-block"],[1,"cu-form__row-title"],e,["class","cu-radio cu-user-settings__radio",4,"ngIf"],["class","cu-save-template__public",4,"ngIf"],[1,"cu-radio","cu-user-settings__radio"],["type","radio","name","updateViewOption",1,"cu-radio__input",3,"value","checked","click"],[1,"cu-radio__label"],t,i,o,n,s,c,[1,"cu-radio__label","cu-save-template__options-block-member"],a,["class","cu-save-template__options-block-users",3,"assignIcon","showDropdown","readOnly","canAssign","modifier","avatarSize","userAddTooltip",4,"ngIf","ngIfElse"],["showDropdown",""],[1,"cu-save-template__options-block-users",3,"assignIcon","showDropdown","readOnly","canAssign","modifier","avatarSize","userAddTooltip"],[1,"cu-save-template__options-block-users",3,"multiChoice","selectedUsers","users","showUnassign","immutableUser","onChange"],[3,"showUserRemover","users","assignIcon","multiChoice","modifier","avatarSize","showDropdown","immutableUser","onUserRemove"],r,l,[1,"cu-save-template__public"],[1,"cu-save-template__public-header"],[1,"cu-save-template__public-header-label"],d,["class","cu-save-template__public-new",4,"ngIf"],[1,"cu-save-template__public-toggle",3,"checked","updateImmediately","onChange"],[4,"ngIf"],[1,"cu-save-template__public-new"],u,[1,"cu-save-template__link-section"],[1,"cu-save-template__link-section-top"],[1,"cu-save-template__link-section-label"],["icon","cu2-link",1,"cu-save-template__link-section-label-icon"],m,[1,"cu-save-template__link-section-contents"],["target","_blank",1,"cu-save-template__link-section-contents-text",3,"href"],["ngxClipboard","","cuClipboardCopied","",1,"cu-save-template__link-section-copy",3,"cbContent","cbOnSuccess"],["clipboardHelper","cuClipboardCopied"],[4,"ngIf","ngIfElse"],["copyLinkTmpl",""],p,h]},template:function(e,t){1&e&&(c.cc(0,"div",0),c.cc(1,"div",1),c.ac(2),c.gc(3,2),c.Zb(),c.dd(4,": "),c.bc(),c.bd(5,h,5,2,"div",3),c.bd(6,f,5,2,"div",3),c.bd(7,b,5,2,"div",3),c.bd(8,g,5,2,"div",3),c.bd(9,_,5,2,"div",3),c.bd(10,v,5,2,"div",3),c.bd(11,w,10,4,"div",3),c.bd(12,T,10,4,"div",3),c.bd(13,C,5,2,"div",3),c.bc(),c.bd(14,P,8,4,"div",4)),2&e&&(c.Ib(5),c.Dc("ngIf",!t.forEmail),c.Ib(1),c.Dc("ngIf",t.forEmail),c.Ib(1),c.Dc("ngIf",!t.forEmail),c.Ib(1),c.Dc("ngIf",t.forEmail),c.Ib(1),c.Dc("ngIf",t.role<=t.UserRole.ADMIN&&!t.forEmail),c.Ib(1),c.Dc("ngIf",t.role<=t.UserRole.ADMIN&&t.forEmail),c.Ib(1),c.Dc("ngIf",t.forEmail),c.Ib(1),c.Dc("ngIf",!t.forEmail),c.Ib(1),c.Dc("ngIf",!t.forEmail),c.Ib(1),c.Dc("ngIf",t.showPublic&&("task"===t.type||"list"===t.type||"project"===t.type||"space"===t.type||"view"===t.type)))},directives:[a.q,r.a,l.a,d.a,u.a,m.a,p.a],styles:['.cu-save-template__options-block-member{display:flex;position:relative}.cu-save-template__options-block-users{position:absolute;transform:translate(calc(100% + 10px),-6px);right:0;cursor:pointer}.cu-save-template__sprints{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:24px;width:100%;display:flex;align-items:center;justify-content:center;background-color:var(--theme-main-color-light);border:1px solid var(--theme-main-color);height:40px;border-radius:4px;margin-bottom:20px;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-save-template__sprints{font-family:var(--global-font-support)}}.dark-theme .cu-save-template__sprints span{color:#292d34}.cu-save-template__sprints b{font-weight:500}.dark-theme .cu-save-template__sprints b{color:#292d34}.cu-save-template__delete{font-weight:500;font-size:14px;line-height:14px;cursor:pointer;color:#d16464;display:inline-block;visibility:hidden}.cu-save-template__delete:hover{text-decoration:underline}.cu-save-template__delete.load-template__delete-no-margin{margin-top:0}.cu-save-template__delete-use{display:flex;align-items:center;justify-content:space-between;margin-top:30px}.cu-save-template__delete.cu-save-template__delete-hidden{visibility:visible}.cu-save-template__public{margin:30px 0;border:1px solid #e3e3e3;background:#fbfbfb}.dark-theme .cu-save-template__public{background:#1e272e}.cu-save-template__public-new{color:#7b68ee;margin-left:10px;font:300 14px/19px Proxima Nova,arial,serif}@supports (--theme-main-color:#7b68ee){.cu-save-template__public-new{color:var(--theme-main-color)}}.dark-theme .cu-save-template__public{border-color:#1e272e;background-color:#2b343b}.cu-save-template__public-header{display:flex;padding:20px 18px}.cu-save-template__public-header-label{flex:1;font:500 12px/20px Gotham Pro,Proxima Nova,arial,serif;color:#222}.dark-theme .cu-save-template__public-header-label{color:#d5d6d7}.cu-save-template__public-toggle{margin-left:5px;height:13px}.cu-save-template__link-section{padding:18px;border-top:1px solid #e3e3e3}.dark-theme .cu-save-template__link-section{border-top-color:#1e272e}.cu-save-template__link-section-copy{padding-left:5px;cursor:pointer;color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-save-template__link-section-copy{color:var(--theme-main-color)}}.cu-save-template__link-section-contents{background:#fff;border:1px solid #e9ebf0;border-radius:2px;display:flex;align-items:center;padding:18px;margin-top:10px}.dark-theme .cu-save-template__link-section-contents{background:#384047;border-color:#1e272e}.cu-save-template__link-section-contents-text{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;flex:1;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#222}.dark-theme .cu-save-template__link-section-contents-text{color:#abaeb0}.cu-save-template__link-section-top{display:flex;align-items:center}.cu-save-template__link-section-label{flex:1;display:flex;align-items:center;font:500 12px/20px Gotham Pro,Proxima Nova,arial,serif;color:#222}.dark-theme .cu-save-template__link-section-label{color:#d5d6d7}.cu-save-template__link-section-label-icon{width:12px;height:12px;margin-right:10px;fill:#222}.dark-theme .cu-save-template__link-section-label-icon{fill:#d5d6d7}.cu-save-template__description{font:400 14px/1.4 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:20px;color:#343434}.dark-theme .cu-save-template__description{color:#d5d6d7}.cu-save-template__description-link{color:#7b68ee;cursor:pointer;position:relative}@supports (--theme-main-color:#7b68ee){.cu-save-template__description-link{color:var(--theme-main-color)}}.cu-save-template__description-link:after{content:"";display:block;position:absolute;transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;bottom:0;left:0;width:100%;height:1px}@supports (--theme-main-color:#7b68ee){.cu-save-template__description-link:after{background-color:var(--theme-main-color)}}.cu-save-template__description-link:hover:after{opacity:0}.cu-save-template__button-block{display:flex;align-items:center;justify-content:space-between}.cu-save-template__banner{padding:15px 25px 15px 15px;margin-bottom:25px;font:400 13px/18px Gotham Pro,Proxima Nova,arial,serif;position:relative;color:#292d34}.dark-theme .cu-save-template__banner{color:#d5d6d7}.cu-save-template__banner:before{background-color:#7b68ee;content:"";width:100%;height:100%;opacity:.2;left:0;top:0;position:absolute;border-radius:4px}@supports (--theme-main-color:#7b68ee){.cu-save-template__banner:before{background-color:var(--theme-main-color)}}.cu-save-template__banner-content{position:relative}.cu-save-template__banner-content-link{color:#7b68ee;cursor:pointer;position:relative}@supports (--theme-main-color:#7b68ee){.cu-save-template__banner-content-link{color:var(--theme-main-color)}}.cu-save-template__banner-content-link:after{content:"";display:block;position:absolute;transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;bottom:0;left:0;width:100%;height:1px}@supports (--theme-main-color:#7b68ee){.cu-save-template__banner-content-link:after{background-color:var(--theme-main-color)}}.cu-save-template__banner-content-link:hover:after{opacity:0}.cu-save-template__banner-title{font-weight:500;display:inline-block}.cu-save-template__banner-actions{display:flex;align-items:center;padding-top:10px;position:relative}.cu-save-template__banner-actions-link{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;position:relative}@supports (--theme-main-color:#7b68ee){.cu-save-template__banner-actions-link{color:var(--theme-main-color)}}.cu-save-template__banner-actions-link:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-save-template__banner-actions-link:hover{color:var(--theme-main-color-dark)}}.cu-save-template__banner-actions-link+.cu-save-template__banner-actions-link{margin-left:24px}.cu-save-template__banner-actions-link+.cu-save-template__banner-actions-link:before{content:"";display:block;position:absolute;background:#7b68ee;left:-14px;top:50%;transform:translateY(-50%);width:4px;height:4px;border-radius:50%;opacity:.3}@supports (--theme-main-color:#7b68ee){.cu-save-template__banner-actions-link+.cu-save-template__banner-actions-link:before{background:var(--theme-main-color)}}.cu-save-template__banner-close{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#7b68ee;width:26px;height:26px;padding:9px;position:absolute;top:0;right:0;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-save-template__banner-close{fill:var(--theme-main-color)}}.cu-save-template__banner-close:hover{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-save-template__banner-close:hover{fill:var(--theme-main-color-dark)}}.cu-save-template__section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}.cu-save-template__section-header-name{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font-weight:500;font-size:20px;line-height:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#292d34;cursor:pointer;flex-grow:1;padding-right:10px}.cu-save-template__section-header-name:hover{color:var(--theme-main-color)!important}.dark-theme .cu-save-template__section-header-name{color:#d5d6d7}.cu-save-template__section-header-name .cu-editable__input{font-weight:500;font-size:20px;line-height:20px;color:#292d34;background:transparent!important;width:100%!important}.dark-theme .cu-save-template__section-header-name .cu-editable__input{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})()},"/n4K":function(e,t,i){"use strict";i.d(t,"a",function(){return P});var o=i("bx+h"),n=i("NtID"),s=i("ofXK"),c=i("EDFS"),a=i("Z0uM"),r=i("Ivax"),l=i("4Dfh"),d=i("VBI8"),u=i("wjE6"),m=i("1M0N"),p=i("t1N4"),h=i("mcWp"),f=i("7MBn"),b=i("X8So"),g=i("vnix"),_=i("Fv+p"),v=i("EHXF"),k=i("5zfR"),y=i("s8Mb"),w=i("zBTC"),x=i("E5a2"),I=i("/SUI"),T=i("KyjD"),C=i("gb9A"),D=i("csDc"),O=i("K0KF"),S=i("38Di"),E=i("fXoL");let P=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[s.c,c.d,a.a,r.a,l.a,d.a,u.a,m.a,p.a,h.a,g.a,f.a,b.a,_.a,v.a,k.a,y.a,n.a,o.a,S.a,w.a,x.a,I.a,T.a,C.a,D.a,O.a]]}),e})()},"/qNp":function(e,t,i){"use strict";var o={}.hasOwnProperty;function n(e){return e&&"object"==typeof e||(e={}),c(e.line)+":"+c(e.column)}function s(e){return e&&"object"==typeof e||(e={}),n(e.start)+"-"+n(e.end)}function c(e){return e&&"number"==typeof e?e:1}e.exports=function(e){return e&&"object"==typeof e?o.call(e,"position")||o.call(e,"type")?s(e.position):o.call(e,"start")||o.call(e,"end")?s(e):o.call(e,"line")||o.call(e,"column")?n(e):"":""}},"/qmH":function(e,t,i){"use strict";i.d(t,"a",function(){return E}),i.d(t,"c",function(){return j}),i.d(t,"b",function(){return A});var o=i("ofXK"),n=i("fXoL"),s=i("XNiG"),c=i("VRyK"),a=i("EY2u"),r=i("HDdC"),l=i("xgIS"),d=i("vkgz"),u=i("w1tV"),m=i("JX91"),p=i("lJxs"),h=i("eIep"),f=i("3UWI"),b=i("1G5W"),g=i("5+tZ"),_=i("IzEk"),v=i("Zy1z"),k=i("pLZG");const y="undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function w(e,t,i=3){return Math.abs(e-t)<i}function x(e,t,i,o){const n={top:e.top,bottom:e.bottom,left:e.left,right:e.right};return t.top&&(n.top+=o),t.bottom&&(n.bottom+=o),t.left&&(n.left+=i),t.right&&(n.right+=i),n.height=n.bottom-n.top,n.width=n.right-n.left,n}function I({clientY:e,rect:t}){return e>=t.top&&e<=t.bottom}function T({clientX:e,rect:t}){return e>=t.left&&e<=t.right}function C({clientX:e,clientY:t,elm:i,allowedEdges:o,cursorPrecision:n}){const s=i.nativeElement.getBoundingClientRect(),c={};return o.left&&w(e,s.left,n)&&I({clientY:t,rect:s})&&(c.left=!0),o.right&&w(e,s.right,n)&&I({clientY:t,rect:s})&&(c.right=!0),o.top&&w(t,s.top,n)&&T({clientX:e,rect:s})&&(c.top=!0),o.bottom&&w(t,s.bottom,n)&&T({clientX:e,rect:s})&&(c.bottom=!0),c}const D=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function O(e,t){return e.left&&e.top?t.topLeft:e.right&&e.top?t.topRight:e.left&&e.bottom?t.bottomLeft:e.right&&e.bottom?t.bottomRight:e.left||e.right?t.leftOrRight:e.top||e.bottom?t.topOrBottom:""}function S({edges:e,initialRectangle:t,newRectangle:i}){const o={};return Object.keys(e).forEach(e=>{o[e]=(i[e]||0)-(t[e]||0)}),o}let E=(()=>{class e{constructor(e,t,i,o){this.platformId=e,this.renderer=t,this.elm=i,this.zone=o,this.resizeEdges={},this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=D,this.resizeCursorPrecision=3,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new n.o,this.resizing=new n.o,this.resizeEnd=new n.o,this.mouseup=new s.a,this.mousedown=new s.a,this.mousemove=new s.a,this.destroy$=new s.a,this.resizeEdges$=new s.a,this.pointerEventListeners=P.getInstance(t,o)}ngOnInit(){const e=Object(c.a)(this.pointerEventListeners.pointerDown,this.mousedown),t=Object(c.a)(this.pointerEventListeners.pointerMove,this.mousemove).pipe(Object(d.a)(({event:e})=>{o&&e.preventDefault()}),Object(u.a)()),i=Object(c.a)(this.pointerEventListeners.pointerUp,this.mouseup);let o;const n=()=>{o&&o.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},s=()=>Object.assign({},D,this.resizeCursors);this.resizeEdges$.pipe(Object(m.a)(this.resizeEdges),Object(p.a)(()=>this.resizeEdges&&Object.keys(this.resizeEdges).some(e=>!!this.resizeEdges[e])),Object(h.a)(e=>e?t:a.a),Object(f.a)(this.mouseMoveThrottleMS),Object(b.a)(this.destroy$)).subscribe(({clientX:e,clientY:t})=>{const i=C({clientX:e,clientY:t,elm:this.elm,allowedEdges:this.resizeEdges,cursorPrecision:this.resizeCursorPrecision}),n=s();if(!o){const e=O(i,n);this.renderer.setStyle(this.elm.nativeElement,"cursor",e)}this.setElementClass(this.elm,"resize-left-hover",!0===i.left),this.setElementClass(this.elm,"resize-right-hover",!0===i.right),this.setElementClass(this.elm,"resize-top-hover",!0===i.top),this.setElementClass(this.elm,"resize-bottom-hover",!0===i.bottom)}),e.pipe(Object(g.a)(n=>{function s(e){return{clientX:e.clientX-n.clientX,clientY:e.clientY-n.clientY}}const a=()=>{const e={x:1,y:1};return o&&(this.resizeSnapGrid.left&&o.edges.left?e.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&o.edges.right&&(e.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&o.edges.top?e.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&o.edges.bottom&&(e.y=+this.resizeSnapGrid.bottom)),e};function r(e,t){return{x:Math.ceil(e.clientX/t.x),y:Math.ceil(e.clientY/t.y)}}return Object(c.a)(t.pipe(Object(_.a)(1)).pipe(Object(p.a)(e=>[,e])),t.pipe(Object(v.a)())).pipe(Object(p.a)(([e,t])=>[e?s(e):e,s(t)])).pipe(Object(k.a)(([e,t])=>{if(!e)return!0;const i=a(),o=r(e,i),n=r(t,i);return o.x!==n.x||o.y!==n.y})).pipe(Object(p.a)(([,e])=>{const t=a();return{clientX:Math.round(e.clientX/t.x)*t.x,clientY:Math.round(e.clientY/t.y)*t.y}})).pipe(Object(b.a)(Object(c.a)(i,e)))})).pipe(Object(k.a)(()=>!!o)).pipe(Object(p.a)(({clientX:e,clientY:t})=>x(o.startingRect,o.edges,e,t))).pipe(Object(k.a)(e=>this.allowNegativeResizes||!!(e.height&&e.width&&e.height>0&&e.width>0))).pipe(Object(k.a)(e=>!this.validateResize||this.validateResize({rectangle:e,edges:S({edges:o.edges,initialRectangle:o.startingRect,newRectangle:e})})),Object(b.a)(this.destroy$)).subscribe(e=>{o&&o.clonedNode&&(this.renderer.setStyle(o.clonedNode,"height",e.height+"px"),this.renderer.setStyle(o.clonedNode,"width",e.width+"px"),this.renderer.setStyle(o.clonedNode,"top",e.top+"px"),this.renderer.setStyle(o.clonedNode,"left",e.left+"px")),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:S({edges:o.edges,initialRectangle:o.startingRect,newRectangle:e}),rectangle:e})}),o.currentRect=e}),e.pipe(Object(p.a)(({clientX:e,clientY:t,edges:i})=>i||C({clientX:e,clientY:t,elm:this.elm,allowedEdges:this.resizeEdges,cursorPrecision:this.resizeCursorPrecision}))).pipe(Object(k.a)(e=>Object.keys(e).length>0),Object(b.a)(this.destroy$)).subscribe(e=>{o&&n();const t=function(e,t){let i=0,o=0;const n=e.nativeElement.style,s=["transform","-ms-transform","-moz-transform","-o-transform"].map(e=>n[e]).find(e=>!!e);if(s&&s.includes("translate")&&(i=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),o=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:e.nativeElement.offsetHeight,width:e.nativeElement.offsetWidth,top:e.nativeElement.offsetTop-o,bottom:e.nativeElement.offsetHeight+e.nativeElement.offsetTop-o,left:e.nativeElement.offsetLeft-i,right:e.nativeElement.offsetWidth+e.nativeElement.offsetLeft-i};{const t=e.nativeElement.getBoundingClientRect();return{height:t.height,width:t.width,top:t.top-o,bottom:t.bottom-o,left:t.left-i,right:t.right-i,scrollTop:e.nativeElement.scrollTop,scrollLeft:e.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);o={edges:e,startingRect:t,currentRect:t};const i=s(),c=O(o.edges,i);this.renderer.setStyle(document.body,"cursor",c),this.setElementClass(this.elm,"resize-active",!0),this.enableGhostResize&&(o.clonedNode=this.elm.nativeElement.cloneNode(!0),this.elm.nativeElement.parentElement.appendChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(o.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(o.clonedNode,"left",o.startingRect.left+"px"),this.renderer.setStyle(o.clonedNode,"top",o.startingRect.top+"px"),this.renderer.setStyle(o.clonedNode,"height",o.startingRect.height+"px"),this.renderer.setStyle(o.clonedNode,"width",o.startingRect.width+"px"),this.renderer.setStyle(o.clonedNode,"cursor",O(o.edges,i)),this.renderer.addClass(o.clonedNode,"resize-ghost-element"),o.clonedNode.scrollTop=o.startingRect.scrollTop,o.clonedNode.scrollLeft=o.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:S({edges:e,initialRectangle:t,newRectangle:t}),rectangle:x(t,{},0,0)})})}),i.pipe(Object(b.a)(this.destroy$)).subscribe(()=>{o&&(this.renderer.removeClass(this.elm.nativeElement,"resize-active"),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:S({edges:o.edges,initialRectangle:o.startingRect,newRectangle:o.currentRect}),rectangle:o.currentRect})}),n(),o=null)})}ngOnChanges(e){e.resizeEdges&&this.resizeEdges$.next(this.resizeEdges)}ngOnDestroy(){Object(o.G)(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.resizeEdges$.complete(),this.destroy$.next()}setElementClass(e,t,i){i?this.renderer.addClass(e.nativeElement,t):this.renderer.removeClass(e.nativeElement,t)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.D),n.Wb(n.H),n.Wb(n.m),n.Wb(n.B))},e.\u0275dir=n.Rb({type:e,selectors:[["","mwlResizable",""]],inputs:{resizeEdges:"resizeEdges",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",resizeCursorPrecision:"resizeCursorPrecision",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS",validateResize:"validateResize"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},features:[n.Gb]}),e})();class P{static getInstance(e,t){return P.instance||(P.instance=new P(e,t)),P.instance}constructor(e,t){this.pointerDown=new r.a(i=>{let o,n;return t.runOutsideAngular(()=>{o=e.listen("document","mousedown",e=>{i.next({clientX:e.clientX,clientY:e.clientY,event:e})}),y&&(n=e.listen("document","touchstart",e=>{i.next({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,event:e})}))}),()=>{o(),y&&n()}}).pipe(Object(u.a)()),this.pointerMove=new r.a(i=>{let o,n;return t.runOutsideAngular(()=>{o=e.listen("document","mousemove",e=>{i.next({clientX:e.clientX,clientY:e.clientY,event:e})}),y&&(n=e.listen("document","touchmove",e=>{i.next({clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY,event:e})}))}),()=>{o(),y&&n()}}).pipe(Object(u.a)()),this.pointerUp=new r.a(i=>{let o,n,s;return t.runOutsideAngular(()=>{o=e.listen("document","mouseup",e=>{i.next({clientX:e.clientX,clientY:e.clientY,event:e})}),y&&(n=e.listen("document","touchend",e=>{i.next({clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,event:e})}),s=e.listen("document","touchcancel",e=>{i.next({clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,event:e})}))}),()=>{o(),y&&(n(),s())}}).pipe(Object(u.a)())}}let j=(()=>{class e{constructor(e,t,i,o){this.renderer=e,this.element=t,this.zone=i,this.resizable=o,this.resizeEdges={},this.eventListeners={},this.destroy$=new s.a}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),y&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),Object(c.a)(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,t,i){e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",e=>{this.onMousemove(e,e.targetTouches[0].clientX,e.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",e=>{this.onMousemove(e,e.clientX,e.clientY)})),this.resizable.mousedown.next({clientX:t,clientY:i,edges:this.resizeEdges})}onMouseup(e,t){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:t,edges:this.resizeEdges})}onMousemove(e,t,i){this.resizable.mousemove.next({clientX:t,clientY:i,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Object(l.a)(this.element.nativeElement,e).pipe(Object(b.a)(this.destroy$))}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.H),n.Wb(n.m),n.Wb(n.B),n.Wb(E))},e.\u0275dir=n.Rb({type:e,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges"}}),e})(),A=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)}}),e})()},"/xxf":function(e,t,i){"use strict";i.d(t,"a",function(){return C});var o=i("Gj5t"),n=i("6qs+"),s=i("fXoL"),c=i("ofXK"),a=i("UdVN"),r=i("HPyy");function l(e,t){1&e&&(s.ac(0),s.gc(1,10),s.Zb())}function d(e,t){1&e&&(s.ac(0),s.gc(1,11),s.Zb())}function u(e,t){1&e&&(s.ac(0),s.gc(1,12),s.Zb())}function m(e,t){1&e&&(s.ac(0),s.gc(1,13),s.Zb())}function p(e,t){1&e&&(s.ac(0),s.gc(1,14),s.Zb())}function h(e,t){1&e&&(s.ac(0),s.gc(1,15),s.Zb())}function f(e,t){if(1&e&&(s.cc(0,"div",6),s.ac(1,7),s.bd(2,l,2,0,"ng-container",8),s.bd(3,d,2,0,"ng-container",8),s.bd(4,u,2,0,"ng-container",8),s.bd(5,m,2,0,"ng-container",8),s.bd(6,p,2,0,"ng-container",8),s.bd(7,h,2,0,"ng-container",9),s.Zb(),s.bc()),2&e){const e=s.uc();s.Ob("longer-type",e.item.type===e.QuickItemType.DASHBOARD),s.Ib(1),s.Dc("ngSwitch",e.item.type),s.Ib(1),s.Dc("ngSwitchCase",e.QuickItemType.PROJECT),s.Ib(1),s.Dc("ngSwitchCase",e.QuickItemType.CATEGORY),s.Ib(1),s.Dc("ngSwitchCase",e.QuickItemType.SUBCATEGORY),s.Ib(1),s.Dc("ngSwitchCase",e.QuickItemType.VIEW),s.Ib(1),s.Dc("ngSwitchCase",e.QuickItemType.DASHBOARD)}}function b(e,t){if(1&e&&(s.cc(0,"span",16),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.ed(null==e.item.payload?null:e.item.payload.name)}}function g(e,t){if(1&e&&(s.cc(0,"span",16),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.ed((null==e.item.project?null:e.item.project.name)||(null==e.item||null==e.item.view||null==e.item.view.hierarchy||null==e.item.view.hierarchy.project?null:e.item.view.hierarchy.project.name))}}function _(e,t){if(1&e&&(s.cc(0,"span",16),s.Xb(1,"div",17),s.dd(2),s.bc()),2&e){const e=s.uc();s.Ib(2),s.fd(" ",(null==e.item.category?null:e.item.category.name)||(null==e.item||null==e.item.view||null==e.item.view.hierarchy?null:e.item.view.hierarchy.category.name)," ")}}function v(e,t){if(1&e&&(s.cc(0,"span",16),s.Xb(1,"div",17),s.dd(2),s.bc()),2&e){const e=s.uc();s.Ib(2),s.fd(" ",(null==e.item.subcategory?null:e.item.subcategory.name)||(null==e.item||null==e.item.view||null==e.item.view.hierarchy?null:e.item.view.hierarchy.subcategory.name)," ")}}function k(e,t){if(1&e&&(s.cc(0,"span",18),s.Xb(1,"span",19),s.bc()),2&e){const e=s.uc();s.Ib(1),s.Dc("icon","cu2-view-"+e.item.view.type)}}function y(e,t){if(1&e&&(s.cc(0,"span",16),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" ",e.item.view.name," ")}}function w(e,t){1&e&&(s.cc(0,"span",18),s.Xb(1,"span",19),s.bc()),2&e&&(s.Ib(1),s.Dc("icon","cu2-dashboards"))}function x(e,t){if(1&e&&(s.cc(0,"span",16),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" ",e.item.dashboard.name," ")}}function I(e,t){if(1&e&&(s.cc(0,"div",20),s.Xb(1,"cu-avatar",21),s.bc()),2&e){const e=s.uc();s.Ib(1),s.Dc("user",null==e.item?null:e.item.user)("modifier","cu-avatar_chat")}}function T(e,t){if(1&e&&(s.cc(0,"span",16),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" ",e.item.user.username||e.item.user.email," ")}}let C=(()=>{class e{constructor(){this.ALL_ID=o.a,this.selected=!1,this.breadcrumbsItems=[],this.QuickItemType=n.a}ngOnInit(){}ngOnChanges(e){this.updateBreadcrumbs()}updateBreadcrumbs(){this.breadcrumbsItems=[],this.item.project&&(this.breadcrumbsItems.push(this.item.project.name),this.item.category&&(this.breadcrumbsItems.push(this.item.category.name),this.item.subcategory&&this.breadcrumbsItems.push(this.item.subcategory.name))),this.item.view&&this.item.view.hierarchy&&(this.item.view.hierarchy.project&&this.breadcrumbsItems.push(this.item.view.hierarchy.project.name),this.item.view.hierarchy.category&&this.breadcrumbsItems.push(this.item.view.hierarchy.category.name),this.item.view.hierarchy.subcategory&&this.breadcrumbsItems.push(this.item.view.hierarchy.subcategory.name))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-quick-switcher-item"]],inputs:{item:"item",selected:"selected"},features:[s.Gb],decls:13,vars:13,consts:function(){let e,t,i,o,n,s;return e=$localize`:@@common_space␟52d92107e6b2e533468a728409354191bc7b0618␟8946906119075338535:Space`,t=$localize`:@@common_folder␟d8e057d4fa08fbdb6f98af2073eff5ae0b47f5e1␟7046259383943324039:Folder`,i=$localize`:@@common_list␟6490b3960cc7c4a789cdbd29575d93abad081e07␟7906458871395232033:List`,o=$localize`:@@common_view␟6829218544e108e152f5fa72cb79c4ccb82e0d06␟2509141182388535183:View`,n=$localize`:@@common_dashboard␟f65253954b66e929a8b4d5ecaf61f9129f8cec64␟6570363013146073520:Dashboard`,s=$localize`:@@common_profile␟994363f08f9fbfa3b3994ff7b35c6904fdff18d8␟4915431133669985304:Profile`,[[1,"cu-quick-switcher-item"],[1,"cu-quick-switcher-item__breadcrumbs"],["class","cu-quick-switcher-item__breadcrumbs-type",3,"longer-type",4,"ngIf"],["class","cu-quick-switcher-item__breadcrumbs-name",4,"ngIf"],["class","cu-quick-switcher-item__breadcrumbs-name cu-quick-switcher-item__breadcrumbs-name-icon-container",4,"ngIf"],["class","cu-quick-switcher-item__breadcrumbs-name cu-quick-switcher-item__breadcrumbs-name-icon-avatar",4,"ngIf"],[1,"cu-quick-switcher-item__breadcrumbs-type"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],e,t,i,o,n,s,[1,"cu-quick-switcher-item__breadcrumbs-name"],["icon","angle-right-no-padding",1,"cu-quick-switcher-item__breadcrumbs-chevron"],[1,"cu-quick-switcher-item__breadcrumbs-name","cu-quick-switcher-item__breadcrumbs-name-icon-container"],[1,"cu-quick-switcher-item__breadcrumbs-name-icon",3,"icon"],[1,"cu-quick-switcher-item__breadcrumbs-name","cu-quick-switcher-item__breadcrumbs-name-icon-avatar"],[3,"user","modifier"]]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.bd(2,f,8,8,"div",2),s.bd(3,b,2,1,"span",3),s.bd(4,g,2,1,"span",3),s.bd(5,_,3,1,"span",3),s.bd(6,v,3,1,"span",3),s.bd(7,k,2,1,"span",4),s.bd(8,y,2,1,"span",3),s.bd(9,w,2,1,"span",4),s.bd(10,x,2,1,"span",3),s.bd(11,I,2,2,"div",5),s.bd(12,T,2,1,"span",3),s.bc(),s.bc()),2&e&&(s.Ob("cu-quick-switcher-item_selected",t.selected),s.Ib(2),s.Dc("ngIf",(null==t.item.project?null:t.item.project.id)!==t.ALL_ID&&t.item.type!==t.QuickItemType.CUSTOM),s.Ib(1),s.Dc("ngIf",t.item.type===t.QuickItemType.CUSTOM&&(null==t.item.payload?null:t.item.payload.name)),s.Ib(1),s.Dc("ngIf",t.item.project||(null==t.item||null==t.item.view||null==t.item.view.hierarchy?null:t.item.view.hierarchy.project)),s.Ib(1),s.Dc("ngIf",t.item.category&&!t.item.category.hidden||(null==t.item||null==t.item.view||null==t.item.view.hierarchy?null:t.item.view.hierarchy.category)&&!(null!=t.item&&null!=t.item.view&&null!=t.item.view.hierarchy&&t.item.view.hierarchy.category.hidden)),s.Ib(1),s.Dc("ngIf",t.item.subcategory||(null==t.item||null==t.item.view||null==t.item.view.hierarchy?null:t.item.view.hierarchy.subcategory)),s.Ib(1),s.Dc("ngIf",t.item.view),s.Ib(1),s.Dc("ngIf",t.item.view),s.Ib(1),s.Dc("ngIf",t.item.dashboard),s.Ib(1),s.Dc("ngIf",t.item.dashboard),s.Ib(1),s.Dc("ngIf",t.item.user),s.Ib(1),s.Dc("ngIf",t.item.user))},directives:[c.q,c.u,c.v,c.w,a.a,r.a],encapsulation:2,changeDetection:0}),e})()},"0884":function(e,t,i){e.exports=i.p+"remap-subtask-dates.0d378a11298d74394b0c.png"},"0Dyw":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("IlGD"),n=i("YwDF"),s=i("fXoL"),c=i("ofXK"),a=i("UdVN");function r(e,t){if(1&e&&s.Xb(0,"div",2),2&e){const e=s.uc();s.Dc("ngClass",e.modifier)("icon",e.iconName)}}function l(e,t){if(1&e&&(s.cc(0,"div",3),s.dd(1),s.bc()),2&e){const e=s.uc();s.Dc("ngClass",e.modifier),s.Ib(1),s.ed(e.textIcon)}}let d=(()=>{class e{ngOnChanges(e){if(e.field&&this.field&&(this.iconName="field-"+this.field.type,this.textIcon=null,this.field.type===n.a.Currency&&this.field.type_config)){const e=o.b.find(e=>this.field.type===n.a.Currency&&e.code===this.field.type_config.currency_type);e.icon?this.iconName=e.icon:this.textIcon=e.symbol}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-custom-field-icon"]],hostAttrs:[1,"cu-custom-field-icon"],inputs:{field:"field",modifier:"modifier"},features:[s.Gb],decls:2,vars:2,consts:[[3,"ngClass","icon",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass","icon"],[3,"ngClass"]],template:function(e,t){1&e&&(s.bd(0,r,1,2,"div",0),s.bd(1,l,2,2,"div",1)),2&e&&(s.Dc("ngIf",!t.textIcon),s.Ib(1),s.Dc("ngIf",t.textIcon))},directives:[c.q,c.o,a.a],styles:[".cu-custom-field-icon{display:inline-flex}"],encapsulation:2,changeDetection:0}),e})()},"0ENg":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("fXoL"),n=i("jJW4"),s=i("ofXK"),c=i("NQa4");const a=function(e){return[e,"settings","billing"]};function r(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",1),o.gc(2,2),o.bc(),o.cc(3,"div",3),o.mc(4,4),o.Xb(5,"a",5),o.jc(),o.bc(),o.Zb()),2&e){const e=o.uc();o.Ib(5),o.Dc("cuLink",o.Hc(1,a,e.sharedData.compatCurrentTeam.id))}}function l(e,t){1&e&&(o.ac(0),o.cc(1,"div",1),o.gc(2,6),o.bc(),o.cc(3,"div",3),o.mc(4,7),o.Xb(5,"br"),o.jc(),o.bc(),o.Zb())}let d=(()=>{class e{constructor(e){this.sharedData=e}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-cloud-storage-deny-msg"]],hostAttrs:[1,"cu-cloud-storage-deny-msg"],decls:4,vars:6,consts:function(){let e,t,i,o;return e=$localize`:@@cu-cloud-storage-deny-msg__question_time-to-upgrade␟7dc4e5aaa9c8f38891bdeea8b60323e5bf221ec0␟1782345770467579365: Time to Upgrade? `,t=$localize`:@@cu-cloud-storage-deny-msg__description_time-to-upgrade␟b2dc5745c56e8ce57fb520435c2798a4b3a47b89␟7864483443577043521: Cloud Storage is available on paid plans. ${"\ufffd#5\ufffd"}:START_LINK:Upgrade to Unlimited${"\ufffd/#5\ufffd"}:CLOSE_LINK: for just $5/month to remove all limits. `,i=$localize`:@@common_whoops␟e4db15fdf22cba1d6f474d0b017bb35d797275df␟4378046624762794633: Whoops! `,o=$localize`:@@cu-cloud-storage-deny-msg__cloud-storage-not-enabled␟a21933973b758135b2ceb9e31a16ea35b0856220␟2357949075791053972: This team doesn't have Cloud Storage enabled.${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:LINE_BREAK: Please contact your team admins to upgrade ClickUp. `,[[4,"ngIf"],[1,"cu-cloud-storage-deny-msg__title"],e,[1,"cu-cloud-storage-deny-msg__description"],t,[1,"cu-cloud-storage-deny-msg__link",3,"cuLink"],i,o]},template:function(e,t){if(1&e&&(o.bd(0,r,6,3,"ng-container",0),o.vc(1,"async"),o.bd(2,l,6,0,"ng-container",0),o.vc(3,"async")),2&e){let e=null,i=null;o.Dc("ngIf",(null==(e=o.wc(1,2,t.sharedData.compatCurrentTeam$))?null:e.role)<3),o.Ib(2),o.Dc("ngIf",!((null==(i=o.wc(3,4,t.sharedData.compatCurrentTeam$))?null:i.role)<3))}},directives:[s.q,c.a],pipes:[s.b],styles:[".cu-cloud-storage-deny-msg{display:flex;flex-direction:column;align-items:center;padding:15px 0;min-width:290px}.cu-cloud-storage-deny-msg__title{font:400 23px/1 Gotham Pro,Proxima Nova,arial,serif;color:#4a4a4a;margin-bottom:5px}.dark-theme .cu-cloud-storage-deny-msg__title{color:#d5d6d7}.cu-cloud-storage-deny-msg__description{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/23px Gotham Pro,Proxima Nova,arial,serif;color:#4a4a4a;text-align:center}.dark-theme .cu-cloud-storage-deny-msg__description{color:#d5d6d7}.cu-cloud-storage-deny-msg__link{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;border-bottom:1px dashed;margin-top:5px}@supports (--theme-main-color:#7b68ee){.cu-cloud-storage-deny-msg__link{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-cloud-storage-deny-msg__link:hover{color:#5f48ea;border-bottom-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-cloud-storage-deny-msg__link:hover{color:var(--theme-main-color-dark);border-bottom-color:var(--theme-main-color-dark)}}"],encapsulation:2,changeDetection:0}),e})()},"0RbE":function(e,t,i){"use strict";function o(e,t){return e.textContent=t,e.clientWidth+1}i.d(t,"a",function(){return o})},"0bNS":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("fXoL"),n=i("XNiG"),s=i("xgIS"),c=i("ofXK"),a=i("1G5W");const r=[];let l=(()=>{class e{constructor(e,t,i){this.document=e,this.element=t,this.zone=i,this.destroy$=new n.a,this.bindings={},this.hoverKeyDown=new o.o,this.onHover=new o.o,this.hovered=!1}ngOnInit(){this.zone.runOutsideAngular(()=>{Object(s.a)(this.element.nativeElement,"mouseenter",{passive:!0}).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.hovered=!0,r.includes(this)||r.push(this),this.onHover.emit()}),Object(s.a)(this.element.nativeElement,"mouseleave",{passive:!0}).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.removeFromStack(),this.hovered=!1}),Object(s.a)(this.document,"keydown",{passive:!0}).pipe(Object(a.a)(this.destroy$)).subscribe(e=>{if(this.hovered&&this.bindings&&this.bindings[e.key]&&r[r.length-1]===this){const t=e,i=t.target||t.srcElement||document.activeElement,o=i&&i.tagName?i.tagName.toLowerCase():"";i&&!i.isContentEditable&&"input"!==o&&"textarea"!==o&&this.zone.run(()=>{this.hoverKeyDown.emit(e)})}})})}ngOnDestroy(){this.removeFromStack(),this.destroy$.next(),this.destroy$.complete()}removeFromStack(){r.includes(this)&&r.splice(r.indexOf(this),1)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(c.d),o.Wb(o.m),o.Wb(o.B))},e.\u0275dir=o.Rb({type:e,selectors:[["","cuHoverKeyDown",""]],inputs:{bindings:["cuHoverKeyDown","bindings"]},outputs:{hoverKeyDown:"hoverKeyDown",onHover:"onHover"}}),e})()},"0lR2":function(e,t,i){"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:i("Ivzr")}},"0x6g":function(e,t,i){"use strict";i.d(t,"a",function(){return se});var o=i("ofXK"),n=i("Ox28"),s=i("1M0N"),c=i("gb9A"),a=i("K0KF"),r=i("chQ0"),l=i("EDFS"),d=i("Ivax"),u=i("obfd"),m=i("2E2X"),p=i("o/e2"),h=i("tGh3"),f=i("KyjD"),b=i("mcWp"),g=i("Yjgh"),_=i("fTg4"),v=i("GtmI"),k=i("7MBn"),y=i("YbjY"),w=i("FyW7"),x=i("tyNb"),I=i("BGnL"),T=i("3Pt+"),C=i("Dvla"),D=i("fXoL"),O=i("LdyQ"),S=i("jJQC"),E=i("2Vo4"),P=i("itXk"),j=(i("TqRa"),i("lJxs")),A=i("XNiG"),$=i("pLZG"),U=i("1G5W"),R=i("Kj3r");let M=(()=>{class e{constructor(){this.hoverTask={handleHover$:new A.a},this.destroy$=new A.a,this.hoverTask.handleHover$.asObservable().pipe(Object($.a)(({visible:e})=>e),Object(U.a)(this.destroy$)).subscribe(({dropdown:e,taskId:t})=>{this.hoverTask.activeTaskId&&this.hoverTask.activeTaskId!==t&&this.hoverTask.activeDropdown.close(),e.open(),this.hoverTask.activeTaskId=t,this.hoverTask.activeDropdown=e}),this.hoverTask.handleHover$.asObservable().pipe(Object(R.a)(300),Object($.a)(({visible:e})=>!e),Object(U.a)(this.destroy$)).subscribe(()=>{this.closeTaskPopup()})}ngOnDestroy(){this.destroy$.next()}taskPopupHovered(e,t,i){this.hoverTask.handleHover$.next({taskId:e,visible:i,dropdown:t})}closeTaskPopup(){this.hoverTask.activeDropdown&&(this.hoverTask.activeDropdown.close(),this.hoverTask.activeTaskId=null,this.hoverTask.activeDropdown=null)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D.Sb({token:e,factory:e.\u0275fac}),e})();var F=i("4F4K"),L=i("G2WA"),N=i("l7P3"),z=i("n+1/"),q=i("NQa4"),G=i("NsZK"),V=i("UAD/"),B=i("UdVN"),X=i("sx5D");function H(e,t){if(1&e&&(D.cc(0,"span",3),D.dd(1),D.bc()),2&e){const e=D.uc();D.Ib(1),D.ed(e.placeholder)}}const W=function(e,t,i){return{id:e,custom_id:t,team:i}};function K(e,t){if(1&e){const e=D.dc();D.cc(0,"span"),D.cc(1,"a",10),D.qc("click",function(t){D.Uc(e);const i=D.uc().$implicit;return D.uc().openTask(i,t)}),D.vc(2,"cuTaskLink"),D.Xb(3,"div",11),D.cc(4,"div",12),D.dd(5),D.bc(),D.bc(),D.bc()}if(2&e){const e=D.uc().$implicit;D.Ib(1),D.Dc("cuLink",D.wc(2,10,D.Jc(12,W,e.id,e.custom_id,e.team_id))),D.Ib(2),D.ad("color",e.color),D.Ob("task-mention__custom-type",!!e.custom_type),D.Ib(1),D.Ob("task-mention__custom-type",!!e.custom_type),D.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0),D.Ib(1),D.fd(" ",e.name," ")}}function Q(e,t){if(1&e&&(D.cc(0,"span"),D.cc(1,"div",13),D.cc(2,"em"),D.dd(3,"No access to this task"),D.bc(),D.bc(),D.cc(4,"div",14),D.dd(5),D.bc(),D.bc()),2&e){const e=D.uc().$implicit;D.Ib(5),D.fd("#",e.id,"")}}function Z(e,t){if(1&e){const e=D.dc();D.cc(0,"div"),D.cc(1,"cu-task-popup",15),D.qc("onEnter",function(){D.Uc(e);const t=D.uc().$implicit,i=D.Rc(3);return D.uc().taskPopupHovered(t,i,!0)})("onLeave",function(){D.Uc(e);const t=D.uc().$implicit,i=D.Rc(3);return D.uc().taskPopupHovered(t,i,!1)}),D.bc(),D.bc()}if(2&e){const e=D.uc().$implicit;D.Ib(1),D.Dc("taskId",e.id)("allowRemove",!1)}}function Y(e,t){if(1&e){const e=D.dc();D.cc(0,"div",16),D.qc("click",function(){D.Uc(e);const t=D.uc().$implicit;return D.uc().removeTask.emit(t)}),D.bc()}2&e&&D.Dc("icon","cu2-times")}function J(e,t){if(1&e){const e=D.dc();D.cc(0,"div",4),D.cc(1,"div",5,6),D.qc("mouseenter.out-zone",function(){D.Uc(e);const i=t.$implicit,o=D.Rc(3);return D.uc().taskPopupHovered(i,o,!0)})("mouseleave.out-zone",function(){D.Uc(e);const i=t.$implicit,o=D.Rc(3);return D.uc().taskPopupHovered(i,o,!1)}),D.bd(4,K,6,16,"span",7),D.bd(5,Q,6,1,"span",7),D.bd(6,Z,2,2,"div",8),D.bc(),D.bd(7,Y,1,1,"div",9),D.bc()}if(2&e){const e=t.$implicit,i=D.Rc(2),o=D.uc();D.Ib(1),D.Dc("dropdownDisabled",!o.showTaskPopup)("dropdownHostElement",i)("dropdownPreventDocumentScroll",!1)("dropdownCloseOnInsideClick",!1),D.Ib(3),D.Dc("ngIf",e.access),D.Ib(1),D.Dc("ngIf",!e.access),D.Ib(2),D.Dc("ngIf",(!o.permissions||o.permissions.set_custom_field_values)&&e.access&&o.canRemove)}}function ee(e,t){}let te=(()=>{class e{constructor(e,t,i){this.sharedTaskService=e,this.taskPopupHandler=t,this.store=i,this.showTaskPopup=!0,this.removeTask=new D.o,this.trackById=Object(S.d)("id"),this.fieldValue$=new E.a(null),this.tasks$=Object(P.a)([this.fieldValue$,this.store.select(F.g)]).pipe(Object(j.a)(([e,t])=>(e||[]).map(e=>t[e.id]?Object(g.b)(t[e.id]):e)))}ngOnChanges(e){e.fieldValue&&this.fieldValue$.next(this.fieldValue)}openTask(e,t){!0===e.access&&this.sharedTaskService.clickTaskLink({id:e.id,teamId:e.team_id,customId:e.custom_id},t)}taskPopupHovered(e,t,i){}}return e.\u0275fac=function(t){return new(t||e)(D.Wb(L.a),D.Wb(M),D.Wb(N.Store))},e.\u0275cmp=D.Qb({type:e,selectors:[["cu-custom-field-type-tasks-list"]],hostAttrs:[1,"cu-custom-field-type-tasks-list"],inputs:{placeholder:"placeholder",fieldValue:"fieldValue",permissions:"permissions",addTaskTemplate:"addTaskTemplate",canRemove:"canRemove",showTaskPopup:"showTaskPopup"},outputs:{removeTask:"removeTask"},features:[D.Hb([M]),D.Gb],decls:4,vars:6,consts:[["class","cu-custom-field-type-tasks-list__placeholder",4,"ngIf"],["class","cu-custom-field-type-tasks-list__item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"cu-custom-field-type-tasks-list__placeholder"],[1,"cu-custom-field-type-tasks-list__item"],["cuDropdown","",1,"task-mention",3,"dropdownDisabled","dropdownHostElement","dropdownPreventDocumentScroll","dropdownCloseOnInsideClick","mouseenter.out-zone","mouseleave.out-zone"],["mention","","taskPopupDropdown","dropdown"],[4,"ngIf"],[4,"cuDropdownMenu"],["class","cu-custom-field-type-tasks-list__remove",3,"icon","click",4,"ngIf"],[3,"cuLink","click"],[1,"task-mention__status"],["tooltipLifeTime","15000",1,"task-mention__name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"task-mention__name"],[1,"task-mention__id"],[3,"taskId","allowRemove","onEnter","onLeave"],[1,"cu-custom-field-type-tasks-list__remove",3,"icon","click"]],template:function(e,t){1&e&&(D.bd(0,H,2,1,"span",0),D.bd(1,J,8,7,"div",1),D.vc(2,"async"),D.bd(3,ee,0,0,"ng-template",2)),2&e&&(D.Dc("ngIf",!(null!=t.fieldValue&&t.fieldValue.length)&&t.placeholder),D.Ib(1),D.Dc("ngForOf",D.wc(2,4,t.tasks$))("ngForTrackBy",t.trackById),D.Ib(2),D.Dc("ngTemplateOutlet",t.addTaskTemplate))},directives:[o.q,o.p,o.x,O.b,z.a,q.a,G.a,V.a,B.a],pipes:[o.b,X.a],styles:[".cu-custom-field-type-tasks-list{display:flex;align-items:center;flex-wrap:wrap;height:auto;max-width:100%;min-width:0}.cu-custom-field-type-tasks-list__placeholder{margin-right:10px}.cu-custom-field-type-tasks-list__item{min-width:50px;position:relative;margin:2px 4px 2px 0}.cu-custom-field-type-tasks-list__item:hover .cu-custom-field-type-tasks-list__remove{display:block}.cu-custom-field-type-tasks-list__item .task-mention>span{margin:0;max-width:100%}.cu-custom-field-type-tasks-list__item .task-mention>span a{max-width:100%}.cu-custom-field-type-tasks-list__remove{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee;display:none;width:14px;height:14px;stroke:#fff;padding:2px;border-radius:50%;position:absolute;top:4px;right:4px;cursor:pointer;fill:#fff}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-tasks-list__remove{background:var(--theme-main-color)}}.cu-custom-field-type-tasks-list__remove:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-custom-field-type-tasks-list__remove:hover{background:var(--theme-main-color-dark)}}"],encapsulation:2,changeDetection:0}),e})();var ie=i("MJvn"),oe=i("aIzb"),ne=i("UqWe");let se=(()=>{class e{}return e.\u0275mod=D.Ub({type:e}),e.\u0275inj=D.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,n.b,s.a,c.a,a.a,l.d,d.a,u.a,m.a,r.a,p.a,h.a,f.a,b.a,_.a,v.a,k.a,y.a,w.a,x.l,I.c,T.l,C.b]]}),e})();D.Yc(g.a,[O.b,l.c,te,ie.a,z.a,oe.a],[ne.a])},"12Dc":function(e,t,i){"use strict";i.d(t,"a",function(){return Qe});var o=i("ofXK"),n=i("fXoL"),s=i("mCrA"),c=i("XNiG"),a=i("Kj3r"),r=i("1G5W"),l=i("dTHz");function d(e,t,i){return e&&e.map(e=>(e="task"===t&&e.id===l.e.CREATE?Object.assign(Object.assign({},e),{title:s.c.title,desc:s.c.desc}):e,Object.assign(Object.assign({},e),{disabled:e.disabled||e.id>i,desc:"task"===t?e.desc.replace(" task"," subtask"):e.desc})))}const u={team:$localize`:@@common_workspace:Workspace`,project:$localize`:@@common_space:Space`,category:$localize`:@@common_folder:Folder`,subcategory:$localize`:@@common_list:List`,task:$localize`:@@common_task:Task`,dashboard:$localize`:@@common_dashboard:Dashboard`};let m=(()=>{class e{transform(e){return u[e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"entityTitle",type:e,pure:!0}),e})();var p=i("Jf2N"),h=i("bFKe"),f=i("3Pt+"),b=i("NQa4"),g=i("HPyy"),_=i("UdVN"),v=i("EP2k");function k(e,t){if(1&e&&(n.cc(0,"span",8),n.dd(1),n.bc()),2&e){const e=n.uc();n.Ib(1),n.ed(e.label)}}function y(e,t){if(1&e&&(n.cc(0,"span",9),n.cc(1,"span",10),n.gc(2,11),n.vc(3,"entityTitle"),n.bc(),n.cc(4,"span",12),n.dd(5),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(3),n.kc(n.wc(3,2,null==e.member||null==e.member.source?null:e.member.source.type)),n.hc(2),n.Ib(2),n.ed(null==e.member||null==e.member.source?null:e.member.source.name)}}function w(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-permission-options-dropdown",13),n.qc("changedOption",function(t){return n.Uc(e),n.uc().changedOption.emit(t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("selectedPermission",null==e.member?null:e.member.permission_level)("editable",e.editable&&(null==e.member?null:e.member.editable))("options",e.customPermissionItems?e.customPermissionItems:e.limitedGuest?(null==e.member?null:e.member.role)===e.UserRole.GUEST?e.limitedGuestPermissionItems:e.limitedMemberPermissionItems:(null==e.member?null:e.member.role)===e.UserRole.GUEST?e.defaultFreeReadPermissionItems:e.defaultPermissionItems)("upgradeLink",e.upgradeLink)("member",e.member)}}function x(e,t){if(1&e){const e=n.dc();n.cc(0,"div",14),n.qc("click",function(){return n.Uc(e),n.uc().remove()}),n.bc()}}function I(e,t){}const T=function(e){return{member:e}};function C(e,t){if(1&e&&n.bd(0,I,0,0,"ng-template",15),2&e){const e=n.uc();n.Dc("ngTemplateOutlet",e.itemTemplate)("ngTemplateOutletContext",n.Hc(2,T,e.member))}}let D=(()=>{class e{constructor(){this.UserRole=l.f,this.defaultPermissionItems=s.g,this.defaultFreeReadPermissionItems=s.f,this.limitedGuestPermissionItems=s.q,this.limitedMemberPermissionItems=s.r,this.removable=!1,this.editable=!1,this.showPermissionsOptions=!0,this.limitedGuest=!1,this.maxPermissionLevel=l.e.CREATE,this.removeItem=new n.o,this.changedOption=new n.o}ngOnInit(){}ngOnChanges(e){e.maxPermissionLevel&&(this.defaultPermissionItems=d(s.g,this.itemType,this.getMaxPermissionLevel()),this.defaultFreeReadPermissionItems=d(s.f,this.itemType,this.getMaxPermissionLevel()),this.limitedGuestPermissionItems=d(s.q,this.itemType,this.getMaxPermissionLevel()),this.limitedMemberPermissionItems=d(s.r,this.itemType,this.getMaxPermissionLevel())),(e.member||e.getPermissionItems)&&(this.customPermissionItems=d(this.getPermissionItems&&this.member&&this.getPermissionItems(this.member.role),this.itemType,this.getMaxPermissionLevel())),e.maxPermissionLevel&&this.customPermissionItems&&(this.customPermissionItems=d(this.customPermissionItems,this.itemType,this.getMaxPermissionLevel()))}remove(){this.removeItem.emit(this.member)}getMaxPermissionLevel(){return this.member.maxPermissionLevel?Math.min(this.member.maxPermissionLevel,this.maxPermissionLevel):this.maxPermissionLevel}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-member-item"]],inputs:{member:"member",removable:"removable",editable:"editable",showPermissionsOptions:"showPermissionsOptions",limitedGuest:"limitedGuest",itemTemplate:"itemTemplate",upgradeLink:"upgradeLink",maxPermissionLevel:"maxPermissionLevel",label:"label",itemType:"itemType",getPermissionItems:"getPermissionItems"},outputs:{removeItem:"removeItem",changedOption:"changedOption"},features:[n.Gb],decls:10,vars:10,consts:function(){let e;return e=$localize`:@@cu-member-item__member-via-source␟71a70e25997e92542e1a5a7aa50bfce7e3b47f5b␟4145467293894143382:via ${"\ufffd0\ufffd"}:INTERPOLATION:`,[[1,"cu-member-item"],[1,"cu-member-item__icon",3,"user"],[1,"cu-member-item__name"],["class","cu-member-item__label",4,"ngIf"],["class","cu-member-item__source",4,"ngIf"],["class","cu-member-item__permission",3,"selectedPermission","editable","options","upgradeLink","member","changedOption",4,"ngIf"],["class","cu-member-item__remove","icon","close",3,"click",4,"ngIf"],[4,"ngIf"],[1,"cu-member-item__label"],[1,"cu-member-item__source"],[1,"cu-member-item__source-type"],e,[1,"cu-member-item__source-name"],[1,"cu-member-item__permission",3,"selectedPermission","editable","options","upgradeLink","member","changedOption"],["icon","close",1,"cu-member-item__remove",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.Xb(1,"cu-avatar",1),n.cc(2,"div",2),n.dd(3),n.vc(4,"username"),n.bd(5,k,2,1,"span",3),n.bd(6,y,6,4,"span",4),n.bc(),n.bd(7,w,1,5,"cu-permission-options-dropdown",5),n.bd(8,x,1,0,"div",6),n.bd(9,C,1,4,void 0,7),n.bc()),2&e&&(n.Ib(1),n.Dc("user",null==t.member?null:t.member.user),n.Ib(2),n.fd(" ",n.xc(4,7,null==t.member?null:t.member.user,"Me")," "),n.Ib(2),n.Dc("ngIf",t.label),n.Ib(1),n.Dc("ngIf",null==t.member?null:t.member.source),n.Ib(1),n.Dc("ngIf",t.showPermissionsOptions),n.Ib(1),n.Dc("ngIf",t.showPermissionsOptions&&t.removable&&(null==t.member?null:t.member.editable)),n.Ib(1),n.Dc("ngIf",t.itemTemplate))},directives:[g.a,o.q,s.a,_.a,o.x],pipes:[v.a,m],styles:['.cu-member-item{display:flex;flex-direction:row;align-items:center;margin:6px 0}.cu-member-item__icon{flex-shrink:0;margin:0 10px 0 0;position:relative}.cu-member-item__name{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:16px;flex-grow:1;padding:7px 10px 7px 5px;color:#4a4f55;-webkit-font-smoothing:subpixel-antialiased;overflow:hidden;text-overflow:ellipsis}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-member-item__name{font-family:var(--global-font-support)}}.dark-theme .cu-member-item__name{color:#abaeb0}.cu-member-item__remove{padding:8px;width:26px;height:26px;cursor:pointer}.cu-member-item__remove svg{stroke:#d16464}.cu-member-item__source{border-radius:3px;padding:1px 3px;margin:0 4px;border:1px solid #d8d8d8;display:inline-flex}.cu-member-item__source-type{font-weight:400;font-size:9px;text-transform:uppercase;margin:0 3px}.cu-member-item__label,.cu-member-item__source-name{font-weight:400;font-size:12px}.cu-member-item__label{color:#7b68ee;border-radius:3px;padding:1px 3px;margin:0 4px;border:1px solid;display:inline-flex}@supports (--theme-main-color:#7b68ee){.cu-member-item__label{border-color:var(--theme-main-color);color:var(--theme-main-color)}}'],encapsulation:2,changeDetection:0}),e})();const O=["confirmModal"];function S(e,t){if(1&e){const e=n.dc();n.cc(0,"a",15),n.cc(1,"i",16),n.qc("click",function(){return n.Uc(e),n.uc(3).clearSearch()}),n.bc(),n.bc()}}function E(e,t){if(1&e){const e=n.dc();n.cc(0,"div",12),n.cc(1,"input",13),n.qc("ngModelChange",function(t){return n.Uc(e),n.uc(2).searchQuery=t})("ngModelChange",function(){return n.Uc(e),n.uc(2).debounceSearch$.next()}),n.bc(),n.bd(2,S,2,0,"a",14),n.bc()}if(2&e){const e=n.uc(2);n.Ib(1),n.Ob("cu-member-list__search-input_active",e.searchQuery),n.Dc("ngModel",e.searchQuery),n.Ib(1),n.Dc("ngIf",e.searchQuery)}}function P(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-permission-options-dropdown",17),n.qc("changedOption",function(t){return n.Uc(e),n.uc(2).changedAllOptions(t)}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("keepState",!1)("selectedPermission","view"===e.itemType?e.protectionPermission:void 0)("options",e.customPermissionItems?e.customPermissionItems:e.limitedGuest?e.limitedPermissionItems:e.defaultPermissionItems)}}function j(e,t){if(1&e){const e=n.dc();n.cc(0,"div",18),n.qc("click",function(){return n.Uc(e),n.uc(2).removeAllConfirmModal()}),n.gc(1,19),n.bc()}}function A(e,t){if(1&e&&(n.cc(0,"div",7),n.cc(1,"div",8),n.dd(2),n.bc(),n.bd(3,E,3,4,"div",9),n.bd(4,P,1,3,"cu-permission-options-dropdown",10),n.bd(5,j,2,0,"div",11),n.bc()),2&e){const e=n.uc();n.Ib(2),n.ed(e.title),n.Ib(1),n.Dc("ngIf",e.showSearch&&(null==e.members?null:e.members.length)),n.Ib(1),n.Dc("ngIf",e.showPermissionsOptions&&e.editable&&(null==e.filteredMembers?null:e.filteredMembers.length)&&e.allowMultiOperations),n.Ib(1),n.Dc("ngIf",e.removable&&(null==e.filteredMembers?null:e.filteredMembers.length)&&e.allowMultiOperations)}}function $(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-member-item",20),n.qc("changedOption",function(i){n.Uc(e);const o=t.$implicit;return n.uc().changedOption(o,i)})("removeItem",function(){n.Uc(e);const i=t.$implicit;return n.uc().removeItem(i)}),n.bc()}if(2&e){const e=t.$implicit,i=n.uc();n.Dc("member",e)("removable",i.removable)("editable",i.editable)("showPermissionsOptions",i.showPermissionsOptions)("itemTemplate",i.itemTemplate)("limitedGuest",i.limitedGuest)("upgradeLink",i.upgradeLink)("maxPermissionLevel",i.maxPermissionLevel)("label",(null==e?null:e.role)===i.UserRole.OWNER?i.workspaceOwnerText:(null==e||null==e.user?null:e.user.id)===i.ownerId?i.itemTypeOwnerText:(null==e?null:e.role)<=i.UserRole.ADMIN?i.adminText:null)("itemType",i.itemType)("getPermissionItems",i.getPermissionItems)}}function U(e,t){1&e&&(n.cc(0,"div",21),n.gc(1,22),n.bc())}function R(e,t){if(1&e){const e=n.dc();n.cc(0,"div",23),n.cc(1,"div",24),n.gc(2,25),n.vc(3,"entityTitle"),n.bc(),n.bc(),n.cc(4,"div",26),n.cc(5,"button",27),n.qc("click",function(){return n.Uc(e),n.uc().closeModal()}),n.gc(6,28),n.bc(),n.cc(7,"button",29),n.qc("click",function(){return n.Uc(e),n.uc().removeAll()}),n.gc(8,30),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(3),n.kc(n.wc(3,1,e.itemType)),n.hc(2)}}const M=function(){return{suppressScrollX:!0}};let F=(()=>{class e{constructor(e,t){this.modalService=e,this.changeDetectorRef=t,this.debounceSearch$=new c.a,this.destroy$=new c.a,this.removable=!1,this.editable=!1,this.showHeader=!0,this.showPermissionsOptions=!0,this.showSearch=!1,this.limitedGuest=!1,this.maxPermissionLevel=l.e.CREATE,this.allowMultiOperations=!0,this.removeItems=new n.o,this.changedOptions=new n.o,this.changeProtections=new n.o,this.filteredMembers=[],this.defaultPermissionItems=s.g,this.limitedPermissionItems=s.r,this.UserRole=l.f,this.adminText=$localize`:@@common_admin:Admin`,this.workspaceOwnerText=$localize`:@@cu-member-list__workspace-owner:Workspace Owner`,this.entityTitlePipe=new m,this.trackById=(e,t)=>t&&t.user?t.user.id:t}get itemTypeOwnerText(){if(!this.itemType)return"";const e=this.entityTitlePipe.transform(this.itemType);return $localize`:@@cu-member-list__entity-owner:${e}:itemType: Owner`}ngOnInit(){this.debounceSearch$.pipe(Object(a.a)(250)).pipe(Object(r.a)(this.destroy$)).subscribe(()=>this.filterData())}ngOnChanges(e){this.filterData(),e.maxPermissionLevel&&(this.defaultPermissionItems=d(s.g,this.itemType,this.maxPermissionLevel),this.customPermissionItems&&(this.customPermissionItems=d(this.customPermissionItems,this.itemType,this.maxPermissionLevel))),e.getPermissionItems&&(this.customPermissionItems=d(this.getPermissionItems&&this.getPermissionItems(null),this.itemType,this.maxPermissionLevel)),e.getBulkPermissionItems&&this.getBulkPermissionItems&&(this.customPermissionItems=this.getBulkPermissionItems())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}filterData(){if(!this.members)return void(this.filteredMembers=[]);const e=(this.query||this.searchQuery||"").trim().toLowerCase(),t=e?this.members.filter(t=>!!t.user&&((t.user.username||"").toLowerCase().includes(e)||(t.user.email||"").toLowerCase().includes(e))):this.members;t.sort((e,t)=>this.meUser&&e.user.id===this.meUser.id?-1:this.meUser&&t.user.id===this.meUser.id?1:(e.user.username||e.user.email||"").localeCompare(t.user.username||t.user.email||"")),this.filteredMembers=t,this.changeDetectorRef.markForCheck()}clearSearch(){this.searchQuery=null,this.filterData()}removeItem(e){this.removeItems.emit([e])}removeAllConfirmModal(){this.modalService.open({keepCurrent:!0,modifier:"template-list-cc__modal",content:this.confirmModal})}closeModal(){this.modalService.close()}removeAll(){this.removeItems.emit(this.filteredMembers.filter(e=>e.user.id!==this.ownerId&&(this.meUser||{}).id!==e.user.id)),this.closeModal()}changedOption(e,t){this.changedOptions.emit([{member:e,permission:t.id}])}changedAllOptions(e){e.viewProtection?this.changeProtections.emit({permission:e.id}):this.changedOptions.emit(this.filteredMembers.filter(t=>t.editable&&(e.id<=l.e.COMMENT||!this.limitedGuest||t.role!==l.f.GUEST)).map(t=>({member:t,permission:e.id})))}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(p.a),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-member-list"]],viewQuery:function(e,t){if(1&e&&n.jd(O,3),2&e){let e;n.Qc(e=n.rc())&&(t.confirmModal=e.first)}},inputs:{meUser:"meUser",ownerId:"ownerId",members:"members",removable:"removable",editable:"editable",showHeader:"showHeader",showPermissionsOptions:"showPermissionsOptions",showSearch:"showSearch",title:"title",query:"query",itemTemplate:"itemTemplate",limitedGuest:"limitedGuest",upgradeLink:"upgradeLink",maxPermissionLevel:"maxPermissionLevel",itemType:"itemType",protectionPermission:"protectionPermission",getPermissionItems:"getPermissionItems",getBulkPermissionItems:"getBulkPermissionItems",allowMultiOperations:"allowMultiOperations"},outputs:{removeItems:"removeItems",changedOptions:"changedOptions",changeProtections:"changeProtections"},features:[n.Gb],decls:8,vars:6,consts:function(){let e,t,i,o,n,s,c;return e=$localize`:@@common_all-can␟20fc724ee8de292110e8a40099fb84765886ba9d␟3422737935219693625:All can...`,t=$localize`:form input placeholder@@forms_placeholder--search-1␟8aa58cf00d949c509df91c621ab38131df0a7599␟8854094932942190741:Search...`,i=$localize`:@@common_remove-all␟25166ffe7fa3f1d463a2832fde2e99657a013370␟5098018054008471481: Remove all `,o=$localize`:@@cu-member-list__body-empty_no-people-found␟e3ad599f06fbb4fe86d1fe8e4af4a40b71f9b8e8␟5253869334487129894: No people found `,n=$localize`:@@cu-member-list__question_remove-all-invited-people␟f77ac54313c2f173598dad7ad965f03561314a09␟5443451474271269973: Are you sure you want to remove all invited people from this ${"\ufffd0\ufffd"}:INTERPOLATION:? `,s=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,c=$localize`:@@common_remove-all␟25166ffe7fa3f1d463a2832fde2e99657a013370␟5098018054008471481: Remove all `,[[1,"cu-member-list"],["class","cu-member-list__header",4,"ngIf"],[1,"cu-member-list__body",3,"perfectScrollbar"],["scrollbar","ngxPerfectScrollbar"],[3,"member","removable","editable","showPermissionsOptions","itemTemplate","limitedGuest","upgradeLink","maxPermissionLevel","label","itemType","getPermissionItems","changedOption","removeItem",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-member-list__body-empty",4,"ngIf"],["confirmModal",""],[1,"cu-member-list__header"],[1,"cu-member-list__header-title"],["class","cu-member-list__search",4,"ngIf"],["placeholder",e,"class","cu-member-list__header-action",3,"keepState","selectedPermission","options","changedOption",4,"ngIf"],["class","cu-member-list__header-clear",3,"click",4,"ngIf"],[1,"cu-member-list__search"],["type","text","spellcheck","false","placeholder",t,1,"cu-member-list__search-input",3,"ngModel","ngModelChange"],["class","cu-search__close","cuLink","",4,"ngIf"],["cuLink","",1,"cu-search__close"],[1,"cu-icon","cu-icon_close",3,"click"],["placeholder",e,1,"cu-member-list__header-action",3,"keepState","selectedPermission","options","changedOption"],[1,"cu-member-list__header-clear",3,"click"],i,[3,"member","removable","editable","showPermissionsOptions","itemTemplate","limitedGuest","upgradeLink","maxPermissionLevel","label","itemType","getPermissionItems","changedOption","removeItem"],[1,"cu-member-list__body-empty"],o,[1,"template-list-cc__inner"],[1,"template-list-cc__title"],n,[1,"template-list-cc__options"],[1,"cu-btn","cu-btn_status","cu-btn_option","cu-btn_cancel",3,"click"],s,[1,"cu-btn","cu-btn_status","cu-btn_option",3,"click"],c]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.bd(1,A,6,4,"div",1),n.cc(2,"div",2,3),n.bd(4,$,1,11,"cu-member-item",4),n.bd(5,U,2,0,"div",5),n.bc(),n.bc(),n.bd(6,R,9,3,"ng-template",null,6,n.cd)),2&e&&(n.Ib(1),n.Dc("ngIf",t.showHeader),n.Ib(1),n.Dc("perfectScrollbar",n.Gc(5,M)),n.Ib(2),n.Dc("ngForOf",t.filteredMembers)("ngForTrackBy",t.trackById),n.Ib(1),n.Dc("ngIf",!(null!=t.filteredMembers&&t.filteredMembers.length)&&(t.searchQuery||t.query)))},directives:[o.q,h.a,o.p,f.c,f.p,f.s,b.a,s.a,D],pipes:[m],styles:['.cu-member-list{display:block}.cu-member-list__body{max-height:245px;margin-right:-15px;padding-right:15px}.cu-member-list__body:before{content:"";display:block;position:sticky;width:100%;height:8px;top:0;z-index:1;pointer-events:none;background:linear-gradient(0deg,hsla(0,0%,100%,0),#fff)}.dark-theme .cu-member-list__body:before{background:linear-gradient(0deg,rgba(56,64,71,0),#384047)}.cu-privacy-settings__add-user .cu-member-list__body:before{background:linear-gradient(0deg,hsla(0,0%,96.1%,0),#f5f5f5)}.dark-theme .cu-privacy-settings__add-user .cu-member-list__body:before{background:linear-gradient(0deg,rgba(43,52,59,0),#2b343b)}.cu-member-list__body:after{content:"";display:block;position:sticky;width:100%;height:8px;bottom:0;pointer-events:none;background:linear-gradient(0deg,#fff,hsla(0,0%,100%,0))}.dark-theme .cu-member-list__body:after{background:linear-gradient(0deg,#384047,rgba(56,64,71,0))}.cu-privacy-settings__add-user .cu-member-list__body:after{background:linear-gradient(0deg,#f5f5f5,hsla(0,0%,96.1%,0))}.dark-theme .cu-privacy-settings__add-user .cu-member-list__body:after{background:linear-gradient(0deg,#2b343b,rgba(43,52,59,0))}.cu-member-list__body-empty{padding:20px;text-align:center}.cu-member-list__header{display:flex;border-bottom:1px solid #f4f4f4;padding:0 0 10px}.dark-theme .cu-member-list__header{border-bottom:1px solid #1e272e}.cu-member-list__header-title{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:600;font-size:15px;line-height:16px;flex-grow:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-member-list__header-title{font-family:var(--global-font-support)}}.cu-member-list__header-clear{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:16px;color:#d16464;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-member-list__header-clear{font-family:var(--global-font-support)}}.cu-member-list__search{position:relative}.cu-member-list__search-input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;border:transparent;background:transparent;width:50px;color:#4a4f55;box-shadow:none;-webkit-font-smoothing:subpixel-antialiased}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-member-list__search-input{font-family:var(--global-font-support)}}.cu-member-list__search-input:focus{background:transparent;box-shadow:none;width:150px}.dark-theme .cu-member-list__search-input{color:#abaeb0}.cu-member-list__search-input_active{width:150px}'],encapsulation:2,changeDetection:0}),e})();var L=i("Uo1z"),N=i("lE2N"),z=i("2Vo4"),q=i("/qOb"),G=i("uslN"),V=i("HBlJ"),B=i("jJQC"),X=i("EDFS"),H=i("mivo"),W=i("NsZK"),K=i("2uJs");const Q=["pop"],Z=["sharingHelpModal"],Y=["addMemberInput"];function J(e,t){if(1&e){const e=n.dc();n.cc(0,"div",13),n.qc("click",function(){return n.Uc(e),n.uc().parseEmails()}),n.gc(1,14),n.bc()}}function ee(e,t){if(1&e){const e=n.dc();n.cc(0,"a",15),n.cc(1,"i",16),n.qc("click",function(){return n.Uc(e),n.uc().reset()}),n.bc(),n.bc()}}function te(e,t){if(1&e){const e=n.dc();n.ac(0),n.mc(1,17),n.cc(2,"div",18),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.pop.hide(),t.openSharingHelpModal()}),n.bc(),n.jc(),n.Zb()}}function ie(e,t){if(1&e){const e=n.dc();n.cc(0,"div",19,20),n.qc("mouseenter",function(){return n.Uc(e),n.Rc(1).show()}),n.bc()}if(2&e){n.uc();const e=n.Rc(8);n.Dc("popover",e)("outsideClick",!0)}}function oe(e,t){1&e&&(n.cc(0,"div",21),n.Xb(1,"div",22),n.cc(2,"div",23),n.gc(3,24),n.bc(),n.bc())}function ne(e,t){if(1&e&&(n.cc(0,"div",36),n.gc(1,37),n.bc()),2&e){const e=n.uc(3);n.Ib(1),n.kc(e.maxInviteCount),n.hc(1)}}function se(e,t){if(1&e){const e=n.dc();n.cc(0,"div",38),n.cc(1,"div",39),n.dd(2),n.bc(),n.cc(3,"div",40),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc(3).removeEmail(i)}),n.Xb(4,"div",41),n.bc(),n.bc()}if(2&e){const e=t.$implicit;n.Ib(1),n.Dc("cuTooltip",e)("tooltipDisabledIfTextNotTruncated",!0),n.Ib(1),n.fd(" ",e," ")}}function ce(e,t){if(1&e){const e=n.dc();n.cc(0,"div",13),n.qc("click",function(){return n.Uc(e),n.uc(3).invite()}),n.gc(1,42),n.bc()}}function ae(e,t){1&e&&(n.cc(0,"div",43),n.cc(1,"div",44),n.Xb(2,"div",45),n.cc(3,"div",46),n.gc(4,47),n.bc(),n.bc(),n.bc())}function re(e,t){1&e&&n.Yb(0)}function le(e,t){1&e&&n.Yb(0)}function de(e,t){if(1&e&&n.bd(0,le,1,0,"ng-container",49),2&e){n.uc();const e=n.Rc(5),t=n.Rc(9),i=n.uc(3);n.Dc("ngIf",(null==i.guestInfo?null:i.guestInfo.allowed_guests)>(null==i.guestInfo?null:i.guestInfo.guests))("ngIfThen",e)("ngIfElse",t)}}function ue(e,t){1&e&&n.Yb(0)}function me(e,t){if(1&e&&n.bd(0,ue,1,0,"ng-container",49),2&e){n.uc();const e=n.Rc(7),t=n.Rc(11),i=n.uc(3);n.Dc("ngIf",(null==i.guestInfo?null:i.guestInfo.allowed_guests)-(null==i.guestInfo?null:i.guestInfo.guests)>=(null==i.emailList?null:i.emailList.length))("ngIfThen",e)("ngIfElse",t)}}function pe(e,t){if(1&e&&(n.cc(0,"div",56),n.dd(1," "),n.gc(2,57),n.dd(3,". "),n.bc(),n.cc(4,"div",58),n.gc(5,59),n.bc()),2&e){const e=n.uc(4);n.Ib(2),n.kc(null==e.emailList?null:e.emailList.length),n.hc(2),n.Ib(3),n.kc((null==e.guestInfo?null:e.guestInfo.allowed_guests)-(null==e.guestInfo?null:e.guestInfo.guests)),n.hc(5)}}function he(e,t){if(1&e&&(n.cc(0,"div",56),n.gc(1,60),n.bc(),n.cc(2,"div",58),n.mc(3,61),n.Xb(4,"span",62),n.jc(),n.bc()),2&e){const e=n.uc(4);n.Ib(1),n.kc(null==e.guestInfo?null:e.guestInfo.guests)(null==e.guestInfo?null:e.guestInfo.allowed_guests),n.hc(1),n.Ib(3),n.kc(e.needSeats)(null==e.guestInfo?null:e.guestInfo.cost_of_seat_monthly)(null==e.guestInfo?null:e.guestInfo.guests_per_seat),n.hc(3)}}function fe(e,t){if(1&e&&(n.cc(0,"div",56),n.gc(1,63),n.bc(),n.cc(2,"div",58),n.mc(3,64),n.Xb(4,"span",62),n.jc(),n.bc()),2&e){const e=n.uc(4);n.Ib(1),n.kc((null==e.guestInfo?null:e.guestInfo.allowed_guests)-(null==e.guestInfo?null:e.guestInfo.guests))(e.needSeats)(e.emailList.length-((null==e.guestInfo?null:e.guestInfo.allowed_guests)-(null==e.guestInfo?null:e.guestInfo.guests))),n.hc(1),n.Ib(3),n.kc(e.needSeats)(null==e.guestInfo?null:e.guestInfo.cost_of_seat_monthly)(null==e.guestInfo?null:e.guestInfo.guests_per_seat),n.hc(3)}}function be(e,t){1&e&&(n.cc(0,"div",56),n.gc(1,65),n.bc())}function ge(e,t){if(1&e&&(n.cc(0,"div",48),n.bd(1,re,1,0,"ng-container",49),n.bd(2,de,1,3,"ng-template",null,50,n.cd),n.bd(4,me,1,3,"ng-template",null,51,n.cd),n.bd(6,pe,6,2,"ng-template",null,52,n.cd),n.bd(8,he,5,5,"ng-template",null,53,n.cd),n.bd(10,fe,5,6,"ng-template",null,54,n.cd),n.bd(12,be,2,0,"ng-template",null,55,n.cd),n.bc()),2&e){const e=n.Rc(3),t=n.Rc(13),i=n.uc(3);n.Ib(1),n.Dc("ngIf",i.invitePermission===i.UserPermission.READ)("ngIfThen",t)("ngIfElse",e)}}function _e(e,t){if(1&e){const e=n.dc();n.ac(0),n.bd(1,ne,2,1,"div",28),n.cc(2,"div",29),n.cc(3,"div",30),n.bd(4,se,5,3,"div",31),n.bc(),n.cc(5,"cu-custom-roles-dropdown",32),n.qc("onSelect",function(t){return n.Uc(e),n.uc(2).changeRole(t)}),n.bc(),n.cc(6,"cu-permission-options-dropdown",33),n.qc("changedOption",function(t){return n.Uc(e),n.uc(2).invitePermission=null==t?null:t.id}),n.bc(),n.bd(7,ce,2,0,"div",5),n.bc(),n.bd(8,ae,5,0,"div",34),n.bd(9,ge,14,3,"div",35),n.Zb()}if(2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",(null==e.emailList?null:e.emailList.length)>e.maxInviteCount),n.Ib(3),n.Dc("ngForOf",e.emailList)("ngForTrackBy",e.trackByValue),n.Ib(1),n.Dc("selectedRole",e.selectedInviteRole)("customRoles",e.customRoles)("showAdmins",!1),n.Ib(1),n.Dc("selectedPermission",e.invitePermission)("options",e.customPermissionItems?e.customPermissionItems:e.teamPlan!==e.TeamPlan.FREE||null!=e.guestInfo&&e.guestInfo.trial?e.inviteRole===e.UserRole.GUEST?e.defaultFreeReadPermissionItems:e.defaultPermissionItems:e.inviteRole===e.UserRole.GUEST?e.limitedGuestPermissionItems:e.limitedMemberPermissionItems)("upgradeLink",e.upgradeLink),n.Ib(1),n.Dc("ngIf",(null==e.emailList?null:e.emailList.length)<=e.maxInviteCount),n.Ib(1),n.Dc("ngIf",e.inviteRole===e.UserRole.GUEST&&(e.teamPlan!==e.TeamPlan.FREE||(null==e.guestInfo?null:e.guestInfo.trial))&&"dashboard"===e.itemType),n.Ib(1),n.Dc("ngIf",e.inviteRole===e.UserRole.GUEST&&(e.teamPlan!==e.TeamPlan.FREE||(null==e.guestInfo?null:e.guestInfo.trial)))}}function ve(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-member-list",66),n.qc("changedOptions",function(t){return n.Uc(e),n.uc(2).changedOptions(t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=n.uc(2),t=n.Rc(14);n.Dc("members",n.wc(1,9,e.memberList$))("showHeader",!1)("editable",!0)("limitedGuest",e.teamPlan===e.TeamPlan.FREE&&!(null!=e.guestInfo&&e.guestInfo.trial))("upgradeLink",e.upgradeLink)("maxPermissionLevel",e.maxPermissionLevel)("itemType",e.itemType)("itemTemplate",t)("getPermissionItems",e.getPermissionItems)}}function ke(e,t){if(1&e&&(n.cc(0,"div",25),n.bd(1,_e,10,12,"ng-container",26),n.bd(2,ve,2,11,"cu-member-list",27),n.vc(3,"async"),n.bc()),2&e){const e=n.uc();let t=null;n.Ib(1),n.Dc("ngIf",(null==e.emailList?null:e.emailList.length)>0),n.Ib(1),n.Dc("ngIf",(null==(t=n.wc(3,2,e.memberList$))?null:t.length)>0)}}function ye(e,t){if(1&e){const e=n.dc();n.cc(0,"div",13),n.qc("click",function(){n.Uc(e);const i=t.member;return n.uc().add(i)}),n.gc(1,67),n.bc()}}function we(e,t){1&e&&n.Xb(0,"cu-sharing-help-modal",68),2&e&&n.Dc("activeTab","permissions")}let xe=(()=>{class e{constructor(e){this.modalService=e,this.UserRole=l.f,this.UserPermission=l.e,this.TeamPlan=G.f,this.maxInviteCount=20,this.destroy$=new c.a,this.debounceFilter$=new c.a,this.input="",this.forceShowUsers=!1,this.emails=[],this.memberList$=new z.a([]),this.invitePermission=l.e.CREATE,this.inviteRole=l.f.GUEST,this.userPermissions={},this.defaultPermissionItems=s.g,this.defaultFreeReadPermissionItems=s.f,this.limitedGuestPermissionItems=s.q,this.limitedMemberPermissionItems=s.r,this.isShowAddMemberNext=!1,this.showWarning=!1,this.selectedInviteRole=l.f.GUEST,this.roleOptions=[{id:l.f.GUEST,title:$localize`:@@common_guest:Guest`,desc:$localize`:@@cu-add-member-input__option-desc_guest:No access to Spaces. Limited access to ClickUp.`,learnMoreModal:"sharingHelpModal"},{id:l.f.USER,title:$localize`:@@common_member:Member`,desc:$localize`:@@cu-add-member-input__option-desc_member:Access to public Spaces. Full access to ClickUp features.`}],this.needSeats=0,this.trackByValue=B.f,this.maxPermissionLevel=l.e.CREATE,this.allowInvite=!0,this.allowMultiOperations=!0,this.inviteUsers=new n.o,this.addUser=new n.o,this.addEmailLeads=new n.o}get emailList(){return this.emails}set emailList(e){this.emails=e,this.calcNeedSeats()}ngOnInit(){this.debounceFilter$.pipe(Object(a.a)(250),Object(r.a)(this.destroy$)).subscribe(()=>this.filterData())}ngOnChanges(e){e.maxPermissionLevel&&(this.defaultPermissionItems=d(s.g,this.itemType,this.maxPermissionLevel),this.limitedGuestPermissionItems=d(s.q,this.itemType,this.maxPermissionLevel),this.limitedMemberPermissionItems=d(s.r,this.itemType,this.maxPermissionLevel),this.customPermissionItems&&(this.customPermissionItems=d(this.customPermissionItems,this.itemType,this.maxPermissionLevel)),e.getPermissionItems&&(this.customPermissionItems=d(this.getPermissionItems&&this.getPermissionItems(this.inviteRole),this.itemType,this.maxPermissionLevel)),this.invitePermission=this.getMaxPermissionLevel(this.inviteRole))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onModelChange(){this.debounceFilter$.next()}filterData(){const e=this.input.toLowerCase().trim();let t=[];(e||this.forceShowUsers)&&(t=this.allMembers.filter(t=>(!this.excludeIds||-1===this.excludeIds.indexOf(t.user.id))&&((t.user.username||"").toLowerCase().includes(e)||(t.user.email||"").toLowerCase().includes(e)||!e)).map(e=>({user:e.user,role:e.role,editable:!0,permission_level:this.userPermissions[e.user.id]||this.getMaxPermissionLevel(e.role)}))),this.memberList$.next(t),this.isShowAddMemberNext=0===t.length&&this.input.split(/[\s,]+/).filter(e=>Object(V.b)(e)&&!this.allMembers.some(t=>t.user.email&&t.user.email.toLowerCase()===e.toLowerCase())).length>0}onKeyDown(e){switch(e.keyCode){case q.a.ENTER:this.canAddGuestsTeam||(this.showWarning=!0),this.allowInvite&&this.canAddGuestsTeam&&this.parseEmails()}}parseEmails(){const e=this.input.split(/[\s,]+/).filter(e=>Object(V.b)(e)&&!this.allMembers.some(t=>{var i;return t.user.email&&(null===(i=t.user.email)||void 0===i?void 0:i.toLowerCase())===e.toLowerCase()}));this.emailList=Object(N.a)([...this.emailList,...e],e=>e),this.input="",this.isShowAddMemberNext=!1}reset(){this.emailList=[],this.memberList$.next([]),this.input="",this.forceShowUsers=!1,this.isShowAddMemberNext=!1,this.showWarning=!1}invite(){this.emailList.length>0&&(this.inviteUsers.emit({emails:this.emailList,permission:this.invitePermission,role:this.selectedInviteRole.id?this.selectedInviteRole.id:this.selectedInviteRole}),this.addEmailLeads.emit(this.emailList),this.reset())}add(e){this.addUser.emit({member:e,permission:this.userPermissions[e.user.id]||this.getMaxPermissionLevel(e.role)}),this.reset()}changedOptions(e){e.forEach(e=>{this.userPermissions[e.member.user.id]=e.permission})}removeEmail(e){this.emailList=this.emailList.filter(t=>t!==e)}getMaxPermissionLevel(e){return this.getMaxPermissionLevelOverride?this.getMaxPermissionLevelOverride(e):Math.min(l.e.CREATE,this.maxPermissionLevel)}changeRole(e){const t=e.customRole?e.customRole.inherited_role:e.role;this.inviteRole=t,this.selectedInviteRole=e.customRole||e.role,this.invitePermission=this.getMaxPermissionLevel(t),this.customPermissionItems=d(this.getPermissionItems&&this.getPermissionItems(t),this.itemType,this.maxPermissionLevel)}calcNeedSeats(){this.needSeats=this.emailList&&this.guestInfo&&0!==this.emailList.length?Math.ceil((this.emailList.length+this.guestInfo.guests-this.guestInfo.allowed_guests)/this.guestInfo.guests_per_seat):0}openSharingHelpModal(){this.modalService.open({modifier:"cu-modal_fullwidth",content:this.sharingHelpModal,preventExternalClick:!0})}onFocusInput(){this.forceShowUsers=!0,this.filterData()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(p.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-add-member-input"]],viewQuery:function(e,t){if(1&e&&(n.jd(Q,1),n.jd(Z,3),n.jd(Y,3)),2&e){let e;n.Qc(e=n.rc())&&(t.pop=e.first),n.Qc(e=n.rc())&&(t.sharingHelpModal=e.first),n.Qc(e=n.rc())&&(t.addMemberInput=e.first)}},inputs:{allMembers:"allMembers",excludeIds:"excludeIds",guestInfo:"guestInfo",teamPlan:"teamPlan",canAddGuestsTeam:"canAddGuestsTeam",canAddGuestsTeamText:"canAddGuestsTeamText",upgradeLink:"upgradeLink",maxPermissionLevel:"maxPermissionLevel",itemType:"itemType",allowInvite:"allowInvite",allowMultiOperations:"allowMultiOperations",getPermissionItems:"getPermissionItems",getMaxPermissionLevelOverride:"getMaxPermissionLevelOverride",customRoles:"customRoles"},outputs:{inviteUsers:"inviteUsers",addUser:"addUser",addEmailLeads:"addEmailLeads"},features:[n.Gb],decls:17,vars:10,consts:function(){let e,t,i,o,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v;return e=$localize`:@@cu-add-member-input__form-placeholder_name-email-to-invite␟209743fae07184e2534cb3e152bb52dfdaf551e9␟3585743250793894259:Type a na﻿me or email to invite`,t=$localize`:@@common_next␟c9702419b173fe7ab2aeee4ec1f5857fca1135a1␟6602381557907305507: Next `,i=$localize`:@@cu-add-member-input_popover-content_learn-more-sharing␟80834f1e48bad4ff4f1da2ee33876016482b67f6␟4318249801345652028:${"\ufffd#2\ufffd"}:START_TAG_DIV: Learn more ${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV: about sharing `,o=$localize`:@@cu-add-member-input__info-text_add-new-guests-restricted␟2422b43bed8a35773b26680a4d5bc872569ed24c␟7903034060344551685: Your Workspace doesn't allow adding new Guests `,s=$localize`:@@cu-add-member-input__warning_max-number-of-invites␟b85150006c10cd5b3de3ff862c3b887d054375cb␟8090195943053447147: Whoops! You can only invite ${"\ufffd0\ufffd"}:INTERPOLATION: people at a time. `,c=$localize`:@@common_invite␟a47f88b389fa53a708b55b243fd0a81930a14a2f␟8879939305937884041: Invite `,a=$localize`:@@cu-add-member-input__paywall-warning-text_hidden-widgets-sharing␟033b1399d6762a611c876ab3d45571158244da67␟333657852491604156: Important: This guest won’t be able to see widgets when tasks aren’t shared with them. `,r=$localize`:␟5f797aa59b8d04e156d131aaf830fc9139ecc1b1␟346519246948868935:{VAR_PLURAL, plural, =0 {no free guest seat} =1 {a free guest
            seat} other {# free guest seats}}`,r=n.lc(r,{VAR_PLURAL:"\ufffd0\ufffd"}),l=$localize`:@@cu-add-member-input__paywall-desc_number-of-free-guest-seats␟74611b02256c29c4b159b6f0fa79788229122f30␟3542427418716801093: You have ${"\ufffd0\ufffd"}:INTERPOLATION: free Guest seats available. `,d=$localize`:@@cu-add-member-input__paywall-head_used-guest-seats-count␟bc676ac5e8424eb5fe959b0484f1569d7410983e␟7846872659327392750: ${"\ufffd0\ufffd"}:INTERPOLATION:/${"\ufffd1\ufffd"}:INTERPOLATION_1: seats used. `,u=$localize`:␟384a67410edc6afd4cc763c7b471534320e81101␟393437216129419131:{VAR_PLURAL, plural, =1 {A new member seat} other {# members seats}}`,u=n.lc(u,{VAR_PLURAL:"\ufffd0\ufffd"}),m=$localize`:␟876650b570259527320032ce7c4847f85ee2fd66␟8800539682381879690:{VAR_PLURAL, plural, =0 {no free guest seat} =1 {a free guest seat} other {# free guest seats}}`,m=n.lc(m,{VAR_PLURAL:"\ufffd2\ufffd"}),p=$localize`:@@cu-add-member-input__paywall-desc_additional-guest-seats-per-month␟af74a12a4c08043fcb037ffcee11f1c24cca1d75␟7545282719608573436: ${u}:ICU: will be added to your Workspace (${"\ufffd#4\ufffd"}:START_TAG_SPAN:$${"\ufffd1\ufffd"}:INTERPOLATION:/month${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:) with ${m}:ICU_1:. `,h=$localize`:@@cu-add-member-input__paywall-head_limited-guest-seats␟79048d6d7646b0be39197adbd148051bdd874d8d␟3150888044859617407: ${"\ufffd0\ufffd"}:INTERPOLATION: guests will be free. ${"\ufffd1\ufffd"}:INTERPOLATION_1: seats will be added for ${"\ufffd2\ufffd"}:INTERPOLATION_2: guests. `,f=$localize`:␟384a67410edc6afd4cc763c7b471534320e81101␟393437216129419131:{VAR_PLURAL, plural, =1 {A new member seat} other {# members seats}}`,f=n.lc(f,{VAR_PLURAL:"\ufffd0\ufffd"}),b=$localize`:␟876650b570259527320032ce7c4847f85ee2fd66␟8800539682381879690:{VAR_PLURAL, plural, =0 {no free guest seat} =1 {a free guest seat} other {# free guest seats}}`,b=n.lc(b,{VAR_PLURAL:"\ufffd2\ufffd"}),g=$localize`:@@cu-add-member-input__paywall-desc_limited-guest-seats␟af74a12a4c08043fcb037ffcee11f1c24cca1d75␟7545282719608573436: ${f}:ICU: will be added to your Workspace (${"\ufffd#4\ufffd"}:START_TAG_SPAN:$${"\ufffd1\ufffd"}:INTERPOLATION:/month${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:) with ${b}:ICU_1:. `,_=$localize`:@@cu-add-member-input__paywall-head_can-view-guests-always-free␟922f06a53148857594c5d278305068e7b366c70f␟2804498176609629157: 'Can view' Guests are always free. `,v=$localize`:@@common_share␟ed48e493a028b44bb9168e45f7fab320d1590de3␟4395925803084862239: Share `,[[1,"cu-add-member"],[1,"cu-add-member__search"],["icon","assign-batch",1,"cu-add-member__add-icon",3,"click"],["type","text","spellcheck","false","placeholder",e,1,"cu-add-member__input",3,"ngModel","ngModelChange","focus","keydown"],["addMemberInput",""],["class","cu-add-member__invite-btn",3,"click",4,"ngIf"],["class","cu-search__close","cuLink","",4,"ngIf"],["popTemplate",""],["class","help-question-mark","icon","question","containerClass","markdown-tooltip","triggers","","container","body","placement","top",3,"popover","outsideClick","mouseenter",4,"ngIf"],["class","cu-add-member__info",4,"ngIf"],["class","cu-add-member__results",4,"ngIf"],["actionTemplate",""],["sharingHelpModal",""],[1,"cu-add-member__invite-btn",3,"click"],t,["cuLink","",1,"cu-search__close"],[1,"cu-icon","cu-icon_close",3,"click"],i,[1,"popover-content_link",3,"click"],["icon","question","containerClass","markdown-tooltip","triggers","","container","body","placement","top",1,"help-question-mark",3,"popover","outsideClick","mouseenter"],["pop","bs-popover"],[1,"cu-add-member__info"],["icon","warning",1,"cu-add-member__info-icon"],[1,"cu-add-member__info-text"],o,[1,"cu-add-member__results"],[4,"ngIf"],["class","cu-add-member__members",3,"members","showHeader","editable","limitedGuest","upgradeLink","maxPermissionLevel","itemType","itemTemplate","getPermissionItems","changedOptions",4,"ngIf"],["class","cu-add-member__warning",4,"ngIf"],[1,"cu-add-member__emails"],[1,"cu-add-member__emails-list"],["class","cu-add-member__email",4,"ngFor","ngForOf","ngForTrackBy"],[3,"selectedRole","customRoles","showAdmins","onSelect"],[1,"cu-add-member__email-permission",3,"selectedPermission","options","upgradeLink","changedOption"],["class","cu-add-member__paywall cu-add-member__paywall-warning",4,"ngIf"],["class","cu-add-member__paywall",4,"ngIf"],[1,"cu-add-member__warning"],s,[1,"cu-add-member__email"],[1,"cu-add-member__email-value",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-add-member__email-remove","cu-safe-click",3,"click"],[1,"cu-icon","cu-icon_close","cu-safe-click"],c,[1,"cu-add-member__paywall","cu-add-member__paywall-warning"],[1,"cu-add-member__paywall-warning-content"],["icon","warning"],[1,"cu-add-member__paywall-warning-text"],a,[1,"cu-add-member__paywall"],[4,"ngIf","ngIfThen","ngIfElse"],["notFree",""],["hasSeats",""],["freeSeats",""],["reachedLimit",""],["limitedSeats",""],["alwaysFree",""],[1,"cu-add-member__paywall-head"],r,[1,"cu-add-member__paywall-desc"],l,d,p,[1,"cu-add-member__paywall-price"],h,g,_,[1,"cu-add-member__members",3,"members","showHeader","editable","limitedGuest","upgradeLink","maxPermissionLevel","itemType","itemTemplate","getPermissionItems","changedOptions"],v,[3,"activeTab"]]},template:function(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"div",1),n.cc(2,"div",2),n.qc("click",function(){return n.Uc(e),n.Rc(4).focus()}),n.bc(),n.cc(3,"input",3,4),n.qc("ngModelChange",function(e){return t.input=e})("ngModelChange",function(){return t.onModelChange()})("focus",function(){return t.onFocusInput()})("keydown",function(e){return t.onKeyDown(e)}),n.bc(),n.bd(5,J,2,0,"div",5),n.bd(6,ee,2,0,"a",6),n.bd(7,te,3,0,"ng-template",null,7,n.cd),n.bd(9,ie,2,2,"div",8),n.bc(),n.bd(10,oe,4,0,"div",9),n.bd(11,ke,4,4,"div",10),n.vc(12,"async"),n.bc(),n.bd(13,ye,2,0,"ng-template",null,11,n.cd),n.bd(15,we,1,1,"ng-template",null,12,n.cd)}if(2&e){let e=null;n.Ob("cu-add-member-disabled",!t.canAddGuestsTeam),n.Ib(3),n.Dc("ngModel",t.input),n.Ib(2),n.Dc("ngIf",t.isShowAddMemberNext&&t.allowInvite&&t.canAddGuestsTeam),n.Ib(1),n.Dc("ngIf",t.input||t.forceShowUsers),n.Ib(3),n.Dc("ngIf",!t.input),n.Ib(1),n.Dc("ngIf",t.showWarning),n.Ib(1),n.Dc("ngIf",(null==t.emailList?null:t.emailList.length)>0||(null==(e=n.wc(12,8,t.memberList$))?null:e.length)>0)}},directives:[_.a,f.c,f.p,f.s,o.q,b.a,X.c,o.p,H.a,s.a,W.a,F,K.a],pipes:[o.b],styles:['.cu-add-member{display:block;position:relative;padding:10px 0}.cu-add-member__add-icon{width:22px;height:22px;fill:#b6b6b6;margin:1px 14px 0 6px;cursor:pointer}.dark-theme .cu-add-member__add-icon{fill:#abaeb0}.cu-add-member__search{position:relative;display:flex;align-items:center;height:50px}.cu-add-member__search .cu-search__close{position:relative;margin-left:10px;transform:translateY(0);top:auto}.cu-add-member__info{width:340px;display:flex;align-items:center;justify-content:center;height:27px;margin:15px auto;background-color:rgba(253,180,113,.1);border-radius:4px}.cu-add-member__info-icon{width:16px;height:16px;margin-right:5px;fill:#fdb471}.cu-add-member__info-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;color:#fdb471}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-add-member__info-text{font-family:var(--global-font-support)}}.cu-add-member__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:20px;line-height:1.15;border:transparent;background:transparent;flex-grow:1;color:#4a4f55;box-shadow:none;-webkit-font-smoothing:subpixel-antialiased;padding-right:10px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-add-member__input{font-family:var(--global-font-support)}}.cu-add-member__input::-webkit-input-placeholder{color:#b6b6b6;font-size:20px}.cu-add-member__input::-moz-placeholder{color:#b6b6b6;opacity:1;font-size:20px}.cu-add-member__input:-ms-input-placeholder{color:#b6b6b6;font-size:20px}.cu-add-member__input:-moz-placeholder{color:#b6b6b6;opacity:1;font-size:20px}.cu-add-member__input:focus{background:transparent;box-shadow:none}.dark-theme .cu-add-member__input{color:#abaeb0}.dark-theme .cu-add-member__input::-webkit-input-placeholder{color:rgba(171,174,176,.4);font-size:20px}.dark-theme .cu-add-member__input::-moz-placeholder{color:rgba(171,174,176,.4);opacity:1;font-size:20px}.dark-theme .cu-add-member__input:-ms-input-placeholder{color:rgba(171,174,176,.4);font-size:20px}.dark-theme .cu-add-member__input:-moz-placeholder{color:rgba(171,174,176,.4);opacity:1;font-size:20px}.cu-add-member__results{margin-top:20px}.cu-add-member__emails{display:flex;align-items:center}.cu-add-member__emails-list{display:flex;align-items:center;flex-wrap:wrap;flex-grow:1;min-width:0}.cu-add-member__email{height:28px;border-radius:3px;padding:0 5px 0 10px;border:1px solid #d8d8d8;color:#4a4f55;display:flex;align-items:center;margin:2px 4px 2px 0;min-width:0}.dark-theme .cu-add-member__email{border:1px solid #1e272e;color:#abaeb0}.cu-add-member__email-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-add-member__email-remove{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;flex-shrink:0;width:16px;height:16px;margin:0 0 0 5px;padding:2px;cursor:pointer;opacity:.8}.cu-add-member__email-remove:hover{transition:none;opacity:1}.cu-add-member__invite-btn{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee;font-weight:500;font-size:14px;line-height:14px;color:#fff;height:28px;border-radius:3px;padding:0 10px;cursor:pointer;display:flex;align-items:center;flex-shrink:0}@supports (--theme-main-color:#7b68ee){.cu-add-member__invite-btn{background:var(--theme-main-color)}}.cu-add-member__invite-btn:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-add-member__invite-btn:hover{background:var(--theme-main-color-dark)}}.cu-add-member__warning{margin:0 0 20px}.cu-add-member__paywall{margin:20px 0 0}.cu-add-member__paywall,.cu-add-member__warning{background:#dfdbfb;padding:12px;border-radius:3px;text-align:center}@supports (--theme-main-color-light:#dfdbfb){.cu-add-member__paywall,.cu-add-member__warning{background:var(--theme-main-color-light)}}.cu-add-member__paywall-head,.cu-add-member__warning-head{font-weight:500;font-size:14px;line-height:20px}.dark-theme .cu-add-member__paywall-head,.dark-theme .cu-add-member__warning-head{color:#384047}.cu-add-member__paywall-desc,.cu-add-member__warning-desc{font-weight:400;font-size:13px;line-height:16px;opacity:.8}.dark-theme .cu-add-member__paywall-desc,.dark-theme .cu-add-member__warning-desc{color:#384047}.cu-add-member__paywall-price,.cu-add-member__warning-price{color:#5f48ea;font-weight:500}@supports (--theme-main-color-dark:#5f48ea){.cu-add-member__paywall-price,.cu-add-member__warning-price{color:var(--theme-main-color-dark)}}.cu-add-member__paywall-warning,.cu-add-member__warning-warning{background-color:rgba(253,180,113,.1);padding:6px 10px;margin-bottom:-10px}.cu-add-member__paywall-warning-content,.cu-add-member__warning-warning-content{display:flex}.cu-add-member__paywall-warning .icon,.cu-add-member__warning-warning .icon{width:16px;height:16px;fill:#fdb471;margin-right:5px}.cu-add-member__paywall-warning-text,.cu-add-member__warning-warning-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11.5px;line-height:16px;color:#e99c54;opacity:.8;text-align:left}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-add-member__paywall-warning-text,.cu-add-member__warning-warning-text{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})();var Ie=i("FyW7"),Te=i("stGm"),Ce=i("1M0N"),De=i("/SUI"),Oe=i("KyjD"),Se=i("K0KF"),Ee=i("fTg4"),Pe=i("bx+h"),je=i("gb9A"),Ae=i("C8uC"),$e=i("BTFG");function Ue(e,t){1&e&&(n.mc(0,9,1),n.Xb(1,"span",15),n.jc())}function Re(e,t){if(1&e){const e=n.dc();n.mc(0,9,2),n.cc(1,"span",16),n.qc("click",function(){return n.Uc(e),n.uc(3).showPermissions=!0}),n.bc(),n.jc()}if(2&e){const e=n.uc(3);n.Ib(1),n.kc("team"===e.parentItemType?null==e.team||null==e.team.members?null:e.team.members.length:(null==e.parentMembers?null:e.parentMembers.length)||0),n.hc(0)}}function Me(e,t){if(1&e&&(n.cc(0,"div",8),n.mc(1,9),n.cc(2,"span",10),n.Xb(3,"span",11),n.vc(4,"entityTitle"),n.Xb(5,"span",12),n.bd(6,Ue,2,0,"span",13),n.bd(7,Re,2,1,"ng-template",null,14,n.cd),n.bc(),n.jc(),n.bc()),2&e){const e=n.Rc(8),t=n.uc(2);n.Ib(6),n.Dc("ngIf",1===(null==t.parentMembers?null:t.parentMembers.length)&&(null==t.parentMembers[0]||null==t.parentMembers[0].user?null:t.parentMembers[0].user.id)===t.meUser.id)("ngIfElse",e),n.Ib(2),n.kc(n.wc(4,4,t.parentItemType))(null==t.parentItem?null:t.parentItem.name),n.hc(1)}}function Fe(e,t){if(1&e&&(n.cc(0,"div",20),n.gc(1,21),n.bc()),2&e){const e=n.uc(3);n.Dc("cuTooltip",e.allowEditPrivacy?null:e.editPrivacyTooltip||e.privacyChangePrivatePermsInsufficientText)}}function Le(e,t){if(1&e&&(n.cc(0,"div",20),n.gc(1,22),n.bc()),2&e){const e=n.uc(3);n.Dc("cuTooltip",e.allowEditPrivacy?null:e.privacyChangePublicPermsInsufficientText),n.Ib(1),n.kc(e.parentTypeLabels[e.parentItemType]),n.hc(1)}}function Ne(e,t){if(1&e){const e=n.dc();n.cc(0,"div",17),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.makePrivate.emit(!(null!=t.item&&t.item.private))}),n.Xb(1,"div",18),n.bd(2,Fe,2,1,"div",19),n.bd(3,Le,2,2,"div",19),n.bc()}if(2&e){const e=n.uc(2);n.Ob("cu-privacy-settings__private_disabled",!e.allowEditPrivacy),n.Ib(2),n.Dc("ngIf",!(null!=e.item&&e.item.private)),n.Ib(1),n.Dc("ngIf",null==e.item?null:e.item.private)}}function ze(e,t){1&e&&(n.ac(0),n.gc(1,24),n.Zb())}function qe(e,t){1&e&&(n.ac(0),n.gc(1,25),n.Zb())}function Ge(e,t){if(1&e){const e=n.dc();n.cc(0,"div",23),n.qc("click",function(){return n.Uc(e),n.uc(2).togglePermissions()}),n.bd(1,ze,2,0,"ng-container",1),n.bd(2,qe,2,0,"ng-container",1),n.bc()}if(2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",!e.showPermissions),n.Ib(1),n.Dc("ngIf",e.showPermissions)}}function Ve(e,t){if(1&e&&(n.cc(0,"div",3),n.cc(1,"div",4),n.bd(2,Me,9,6,"div",5),n.bd(3,Ne,4,4,"div",6),n.bc(),n.bd(4,Ge,3,2,"div",7),n.bc()),2&e){const e=n.uc();n.Ib(2),n.Dc("ngIf",!(null!=e.item&&e.item.private)),n.Ib(1),n.Dc("ngIf",e.showEditPrivacy),n.Ib(1),n.Dc("ngIf",e.showPermissionsOptions&&!e.searchQuery&&!(null!=e.item&&e.item.private))}}function Be(e,t){1&e&&n.Xb(0,"cu-loader")}function Xe(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-member-list",26),n.qc("changedOptions",function(t){return n.Uc(e),n.uc().changedOptions.emit(t)})("changeProtections",function(t){return n.Uc(e),n.uc().changeProtections.emit(t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("members",e.parentMembers)("showPermissionsOptions",e.showPermissionsOptions)("editable",!0)("title",e.memberListTitleText)("query",e.searchQuery)("limitedGuest",e.teamPlan===e.TeamPlan.FREE&&!(null!=e.guestInfo&&e.guestInfo.trial))("upgradeLink",e.upgradeLink)("meUser",e.meUser)("ownerId",e.ownerId)("maxPermissionLevel",e.maxPermissionLevel)("itemType",e.itemType)("protectionPermission",e.protectionPermission)("allowMultiOperations",e.allowMultiOperations)("getPermissionItems",e.getPermissionItems)("getBulkPermissionItems",e.getBulkPermissionItems)}}let He=(()=>{class e{constructor(){this.showPermissionsOptions=!0,this.makePrivate=new n.o,this.changedOptions=new n.o,this.changeProtections=new n.o,this.showPermissions=!1,this.TeamPlan=G.f,this.privacyChangePrivatePermsInsufficientText=$localize`:@@cu-privacy-settings-shared-with__tooltip-msg_privacy-change-not-allowed-private:You must be an owner or admin in order to make it private`,this.privacyChangePublicPermsInsufficientText=$localize`:@@cu-privacy-settings-shared-with__tooltip-msg_privacy-change-not-allowed-public:You must be an owner or admin in order to make it public`}get memberListTitleText(){var e,t;const i=null!==(t=null===(e=this.parentMembers)||void 0===e?void 0:e.length)&&void 0!==t?t:0;return $localize`:@@cu-privacy-settings-shared-with__title_member-count:${i}:memberCount: People`}ngOnInit(){}ngOnChanges(e){e.showPermissionsOnStart&&this.showPermissionsOnStart&&(this.showPermissions=!0)}togglePermissions(){this.showPermissions=!this.showPermissions}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-privacy-settings-shared-with"]],inputs:{showHeader:"showHeader",item:"item",parentItemType:"parentItemType",parentTypeLabels:"parentTypeLabels",allowEditPrivacy:"allowEditPrivacy",editPrivacyTooltip:"editPrivacyTooltip",showPermissionsOnStart:"showPermissionsOnStart",showEditPrivacy:"showEditPrivacy",parentMembers:"parentMembers",searchQuery:"searchQuery",updating:"updating",parentItem:"parentItem",meUser:"meUser",teamPlan:"teamPlan",guestInfo:"guestInfo",upgradeLink:"upgradeLink",ownerId:"ownerId",showPermissionsOptions:"showPermissionsOptions",maxPermissionLevel:"maxPermissionLevel",itemType:"itemType",protectionPermission:"protectionPermission",allowMultiOperations:"allowMultiOperations",getPermissionItems:"getPermissionItems",getBulkPermissionItems:"getBulkPermissionItems",team:"team"},outputs:{makePrivate:"makePrivate",changedOptions:"changedOptions",changeProtections:"changeProtections"},features:[n.Gb],decls:3,vars:3,consts:function(){let e,t,i,o,s;return e=$localize`:@@cu-privacy-settings-shared-with__shared-with␟dce25c0839de25dbc7b96234654a486852d5d059␟7716684293741082441: Shared with ${"\ufffd#2\ufffd"}:START_TAG_SPAN_4:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#2\ufffd|\ufffd/#1:2\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#5\ufffd"}:START_TAG_SPAN_1:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#2\ufffd|\ufffd/#1:2\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN_2:Just me${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#2\ufffd|\ufffd/#1:2\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*7:2\ufffd"}:START_TAG_NG_TEMPLATE:${"\ufffd#1:2\ufffd"}:START_TAG_SPAN_3:${"\ufffd0:2\ufffd"}:INTERPOLATION_2: people${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#2\ufffd|\ufffd/#1:2\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd/*7:2\ufffd"}:CLOSE_TAG_NG_TEMPLATE:${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#2\ufffd|\ufffd/#1:2\ufffd]"}:CLOSE_TAG_SPAN:`,e=n.lc(e),t=$localize`:@@common_make-private␟d318fcac5ce22a11b8a4f16eeeaca25b9c76a6a7␟1379690729584618214: Make private `,i=$localize`:@@cu-privacy-settings-shared-with__make-public␟e6c6fadbd43e1c40d98f357484d32f319bdb6f3c␟3949787641156069570: Make public to ${"\ufffd0\ufffd"}:INTERPOLATION: `,o=$localize`:@@common_permissions␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`,s=$localize`:@@common_close␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["class","cu-privacy-settings__header",4,"ngIf"],[4,"ngIf"],["class","cu-privacy-settings__members-parent",3,"members","showPermissionsOptions","editable","title","query","limitedGuest","upgradeLink","meUser","ownerId","maxPermissionLevel","itemType","protectionPermission","allowMultiOperations","getPermissionItems","getBulkPermissionItems","changedOptions","changeProtections",4,"ngIf"],[1,"cu-privacy-settings__header"],[1,"cu-privacy-settings__summary"],["class","cu-privacy-settings__summary-text",4,"ngIf"],["class","cu-privacy-settings__private",3,"cu-privacy-settings__private_disabled","click",4,"ngIf"],["class","cu-privacy-settings__summary-permission",3,"click",4,"ngIf"],[1,"cu-privacy-settings__summary-text"],e,[1,"cu-privacy-settings__summary-shared"],[1,"cu-privacy-settings__summary-shared-type"],[1,"cu-privacy-settings__summary-shared-name"],["class","cu-privacy-settings__summary-shared-count",4,"ngIf","ngIfElse"],["peopleCount",""],[1,"cu-privacy-settings__summary-shared-count"],[1,"cu-privacy-settings__summary-shared-count",3,"click"],[1,"cu-privacy-settings__private",3,"click"],["icon","lock5",1,"cu-privacy-settings__private-icon"],["class","cu-privacy-settings__private-text",3,"cuTooltip",4,"ngIf"],[1,"cu-privacy-settings__private-text",3,"cuTooltip"],t,i,[1,"cu-privacy-settings__summary-permission",3,"click"],o,s,[1,"cu-privacy-settings__members-parent",3,"members","showPermissionsOptions","editable","title","query","limitedGuest","upgradeLink","meUser","ownerId","maxPermissionLevel","itemType","protectionPermission","allowMultiOperations","getPermissionItems","getBulkPermissionItems","changedOptions","changeProtections"]]},template:function(e,t){1&e&&(n.bd(0,Ve,5,3,"div",0),n.bd(1,Be,1,0,"cu-loader",1),n.bd(2,Xe,1,15,"cu-member-list",2)),2&e&&(n.Dc("ngIf",t.showHeader),n.Ib(1),n.Dc("ngIf",t.updating),n.Ib(1),n.Dc("ngIf",(t.showPermissions||t.searchQuery)&&!(null!=t.item&&t.item.private)))},directives:[o.q,_.a,W.a,$e.a,F],pipes:[m],styles:[""],changeDetection:0}),e})();var We=i("95CM"),Ke=i("tjnY");let Qe=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c,Ie.a,h.b,X.d,Te.a,Ce.a,De.a,Oe.a,Se.a,f.l,Ee.a,Pe.a,je.a,Ae.LoaderModule,We.a]]}),e})();n.Yc(L.a,[o.q,Ke.a,He,o.p,F,$e.a,xe],[])},"1G3X":function(e,t,i){e.exports=i.p+"custom_task_ids.569a7d6b5adee8bb9173.png"},"1VtT":function(e,t,i){"use strict";var o=i("6dBs"),n=i("Gdbo"),s=i("Esvb"),c=i("xkQk"),a=i("NkL+");e.exports=function e(){var t=[],i=c(),g={},_=!1,v=-1;return k.data=function(e,t){return"string"==typeof e?2===arguments.length?(h("data",_),g[e]=t,k):l.call(g,e)&&g[e]||null:e?(h("data",_),g=e,k):g},k.freeze=y,k.attachers=t,k.use=function(e){var i;if(h("use",_),null==e);else if("function"==typeof e)l.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?c(e):n(e)}return i&&(g.settings=o(g.settings||{},i)),k;function n(e){c(e.plugins),e.settings&&(i=o(i||{},e.settings))}function s(e){if("function"==typeof e)l(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?l.apply(null,e):n(e)}}function c(e){var t,i;if(null==e);else{if("object"!=typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,i=-1;++i<t;)s(e[i])}}function l(e,i){var n=w(e);n?(a(n[1])&&a(i)&&(i=o(n[1],i)),n[1]=i):t.push(r.call(arguments))}},k.parse=function(e){var t,i=s(e);return y(),m("parse",t=k.Parser),u(t,"parse")?new t(String(i),i).parse():t(String(i),i)},k.stringify=function(e,t){var i,o=s(t);return y(),p("stringify",i=k.Compiler),f(e),u(i,"compile")?new i(e,o).compile():i(e,o)},k.run=x,k.runSync=function(e,t){var i,o=!1;return x(e,t,function(e,t){o=!0,n(e),i=t}),b("runSync","run",o),i},k.process=I,k.processSync=function(e){var t,i=!1;return y(),m("processSync",k.Parser),p("processSync",k.Compiler),I(t=s(e),function(e){i=!0,n(e)}),b("processSync","process",i),t},k;function k(){for(var i=e(),n=t.length,s=-1;++s<n;)i.use.apply(null,t[s]);return i.data(o(!0,{},g)),i}function y(){var e,o,n,s;if(_)return k;for(;++v<t.length;)o=(e=t[v])[0],!1!==(n=e[1])&&(!0===n&&(e[1]=void 0),"function"==typeof(s=o.apply(k,e.slice(1)))&&i.use(s));return _=!0,v=1/0,k}function w(e){for(var i,o=t.length,n=-1;++n<o;)if((i=t[n])[0]===e)return i}function x(e,t,o){if(f(e),y(),o||"function"!=typeof t||(o=t,t=null),!o)return new Promise(n);function n(n,c){i.run(e,s(t),function(t,i,s){i=i||e,t?c(t):n?n(i):o(null,i,s)})}n(null,o)}function I(e,t){if(y(),m("process",k.Parser),p("process",k.Compiler),!t)return new Promise(i);function i(i,o){var n=s(e);d.run(k,{file:n},function(e){e?o(e):i?i(n):t(null,n)})}i(null,t)}}().freeze();var r=[].slice,l={}.hasOwnProperty,d=c().use(function(e,t){t.tree=e.parse(t.file)}).use(function(e,t,i){e.run(t.tree,t.file,function(e,o,n){e?i(e):(t.tree=o,t.file=n,i())})}).use(function(e,t){t.file.contents=e.stringify(t.tree,t.file)});function u(e,t){return"function"==typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function m(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function p(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function h(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function f(e){if(!e||"string"!=typeof e.type)throw new Error("Expected node, got `"+e+"`")}function b(e,t,i){if(!i)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},"1iAE":function(e,t,i){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},"1myf":function(e,t,i){"use strict";var o=i("uT1x"),n=i("FwyN"),s=i("LV2V"),c=i("XFn8"),a=Object(s.a)(function(e,t){if(null==e)return[];var i=t.length;return i>1&&Object(c.a)(e,t[0],t[1])?t=[]:i>2&&Object(c.a)(t[0],t[1],t[2])&&(t=[t[0]]),Object(n.a)(e,Object(o.a)(t,1),[])});t.a=a},"1p1I":function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return s});var o=i("5b//");function n(e){const t=(e||[]).map(e=>(e.tag_bg||"#000000").toUpperCase()),i=o.b.filter(e=>"#fff"!==e).map(e=>e.toUpperCase()).filter(e=>-1===t.indexOf(e));return i.length?i[0]:Object(o.e)()}const s=(e,t,i,o)=>i||o&&parseInt(t,10)===e.creator?e:Object.assign(Object.assign({},e),{deleteRestricted:!0})},"27PA":function(e,t,i){e.exports=i.p+"wip-limit.f79b96f0ea37e4d073c7.png"},"2Wk6":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("2p4s"),n=i("fXoL"),s=i("tk/3"),c=i("irDL");let a=(()=>{class e{constructor(e,t){this.http=e,this.errorHandler=t,this.apiUrl=o.a.apiUrl,this.apiUrlV2=o.a.apiUrlV2}getDocs(e,t){return this.http.get(`${this.apiUrl}/team/${e}/docs`,{params:t}).pipe(this.errorHandler.http())}getDocTiles(e,t=!0){return this.http.get(this.apiUrl+"/docs",{params:{"view_ids[]":e}}).pipe(this.errorHandler.http(t,!1))}getDocsCount(e){return this.http.get(`${this.apiUrl}/team/${e}/docs/count`).pipe(this.errorHandler.http())}}return e.\u0275fac=function(t){return new(t||e)(n.nc(s.b),n.nc(c.a))},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"2eMX":function(e,t,i){"use strict";i.d(t,"a",function(){return j});var o=i("XNiG"),n=i("2Vo4"),s=i("pLZG"),c=i("1G5W"),a=i("Kj3r"),r=i("/uUt"),l=i("lJxs"),d=i("fXoL"),u=i("/qOb"),m=i("jJQC"),p=i("jJW4"),h=i("ofXK"),f=i("LdyQ"),b=i("UdVN"),g=i("MJvn"),_=i("n+1/"),v=i("bFKe");const k=["dropdown"],y=["search"];function w(e,t){if(1&e&&(d.ac(0),d.dd(1),d.Zb()),2&e){const e=d.uc(2);d.Ib(1),d.ed(null==e.selectedProject?null:e.selectedProject.name)}}function x(e,t){1&e&&(d.ac(0),d.gc(1,14),d.Zb())}function I(e,t){1&e&&d.Xb(0,"a",27)}const T=function(e){return{selected:e}};function C(e,t){if(1&e){const e=d.dc();d.cc(0,"div",23),d.cc(1,"a",24),d.qc("click",function(){d.Uc(e);const i=t.$implicit;return d.uc(3).select(i)}),d.dd(2),d.bc(),d.cc(3,"div",25),d.bd(4,I,1,0,"a",26),d.bc(),d.bc()}if(2&e){const e=t.$implicit,i=d.uc(3);d.Dc("ngClass",d.Hc(4,T,e.id===(null==i.selectedProject?null:i.selectedProject.id))),d.Jb("data-id",e.id),d.Ib(2),d.fd(" ",e.name," "),d.Ib(2),d.Dc("ngIf",e.id===(null==i.selectedProject?null:i.selectedProject.id))}}function D(e,t){1&e&&(d.cc(0,"div",28),d.gc(1,29),d.bc())}function O(e,t){if(1&e&&(d.cc(0,"div",15),d.cc(1,"div",16),d.cc(2,"div",17),d.cc(3,"div",18),d.gc(4,19),d.bc(),d.bc(),d.cc(5,"div",20),d.bd(6,C,5,6,"div",21),d.bd(7,D,2,0,"div",22),d.bc(),d.bc(),d.bc()),2&e){const e=d.uc(2);d.Ib(6),d.Dc("ngForOf",e.filteredProjectList)("ngForTrackBy",e.trackById),d.Ib(1),d.Dc("ngIf",!e.filteredProjectList.length)}}const S=function(e){return{"cu-hidden":e}},E=function(e,t){return{"cu-hidden":e,"cu-nav-project_empty":t}};function P(e,t){if(1&e){const e=d.dc();d.cc(0,"div",1,2),d.qc("dropdownOpen",function(){return d.Uc(e),d.uc().dropdownToggle(!0)})("dropdownClose",function(){return d.Uc(e),d.uc().dropdownToggle(!1)}),d.cc(2,"div",3),d.Xb(3,"input",4,5),d.Xb(5,"div",6),d.bc(),d.cc(6,"div",7),d.cc(7,"div",8),d.bd(8,w,2,1,"ng-container",9),d.bd(9,x,2,0,"ng-template",null,10,d.cd),d.bc(),d.cc(11,"div",11),d.Xb(12,"div",12),d.bc(),d.bc(),d.bd(13,O,8,3,"div",13),d.bc()}if(2&e){const e=d.Rc(10),t=d.uc();d.Mb("cu-nav-project ",t.modifier,""),d.Dc("dropdownCloseOnInsideClick",!1),d.Ib(2),d.Dc("ngClass",d.Hc(8,S,!t.dropdownOpen)),d.Ib(4),d.Dc("ngClass",d.Ic(10,E,t.dropdownOpen,!t.selectedProject)),d.Ib(2),d.Dc("ngIf",!(null==t.selectedProject||!t.selectedProject.name))("ngIfElse",e)}}let j=(()=>{class e{constructor(e,t,i){this.renderer=e,this.sharedData=t,this.changeDetector=i,this.destroy$=new o.a,this.dropdownOpen=!1,this.modifier="",this.initSelectedProject=!0,this.projectSelected=new d.o,this.trackById=Object(m.d)("id"),this.searchTerm$=new n.a("")}ngOnInit(){return this.sharedData.compatProjectList$.pipe(Object(s.a)(e=>!this.projects),Object(c.a)(this.destroy$)).subscribe(e=>{this.setProjects(e)}),!this.selectedProject&&this.initSelectedProject&&(this.selectedProject=Object.assign({},this.sharedData.compatCurrentProject)),this.searchTerm$.pipe(Object(a.a)(100),Object(r.a)(),Object(l.a)(e=>this.getFilteredProjects(e)),Object(c.a)(this.destroy$)).subscribe(e=>{this.filteredProjectList=e,this.changeDetector.markForCheck()})}ngAfterViewInit(){this.dropdown&&(this.dropdown.dropdownOpen.pipe(Object(c.a)(this.destroy$)).subscribe(()=>{setTimeout(()=>{this.search.nativeElement.focus()},0)}),this.dropdown.dropdownClose.pipe(Object(c.a)(this.destroy$)).subscribe(()=>{setTimeout(()=>{this.search.nativeElement.value="",this.filteredProjectList=this.getFilteredProjects(),this.changeDetector.markForCheck()},0)})),this.search&&this.search.nativeElement&&(this.keyupListener=this.renderer.listen(this.search.nativeElement,"keyup",e=>{e.which===u.a.ESCAPE?(this.dropdown.close(),this.search.nativeElement.value="",this.filteredProjectList=this.getFilteredProjects()):this.searchTerm$.next(e.target.value)}))}ngOnChanges(e){e.projects&&this.projects&&this.setProjects(this.projects)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.keyupListener&&(this.keyupListener(),this.keyupListener=null)}select(e){this.dropdown.close(),this.selectedProject=e,this.projectSelected.emit(e),this.filteredProjectList=this.getFilteredProjects(),this.changeDetector.markForCheck()}dropdownToggle(e){this.dropdownOpen=e,this.changeDetector.markForCheck()}setProjects(e){this.projectList=e.slice()||[],this.filteredProjectList=this.getFilteredProjects(),this.searchTerm$.value&&this.searchTerm$.value.length&&this.searchTerm$.next(this.searchTerm$.value),this.changeDetector.markForCheck()}getFilteredProjects(e){return this.projectList?this.projectList.filter(t=>t.id!==this.excludeId&&t.name&&(!e||t.name.toLowerCase().includes(e.toLowerCase()))):[]}sortByOrderIndexAsc(e,t){return Number(e.orderindex)-Number(t.orderindex)}}return e.\u0275fac=function(t){return new(t||e)(d.Wb(d.H),d.Wb(p.a),d.Wb(d.h))},e.\u0275cmp=d.Qb({type:e,selectors:[["cu-project-list-dropdown"]],viewQuery:function(e,t){if(1&e&&(d.jd(k,1),d.jd(y,1)),2&e){let e;d.Qc(e=d.rc())&&(t.dropdown=e.first),d.Qc(e=d.rc())&&(t.search=e.first)}},inputs:{modifier:"modifier",projects:"projects",selectedProject:"selectedProject",initSelectedProject:"initSelectedProject",excludeId:"excludeId"},outputs:{projectSelected:"projectSelected"},features:[d.Gb],decls:1,vars:1,consts:function(){let e,t,i;return e=$localize`:@@common_select-space␟706b452b0e5fcdc56340311841573dd0646d2ecf␟393843353725038860:Select Space`,t=$localize`:@@common_spaces␟041a8f5e357685f1af16ffb9ffda7f2db6dcef20␟660809762116764762:Spaces`,i=$localize`:@@common_no-spaces-found␟a0aba0a6d8856be5185b62d742f6e73afee7425f␟7330640928513138281: No Spaces found `,[["cuDropdown","",3,"class","dropdownCloseOnInsideClick","dropdownOpen","dropdownClose",4,"ngIf"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["dropdown","dropdown"],[1,"cu-search","cu-search_compact",3,"ngClass"],["type","text","placeholder","Search",1,"cu-search__input"],["search",""],["icon","search",1,"cu-search__icon"],["cuDropdownToggle","",1,"cu-nav-project__toggle","cu-nav-project__toggle-create-task",3,"ngClass"],[1,"cu-nav-project__toggle-text"],[4,"ngIf","ngIfElse"],["defaultSpaceTxt",""],[1,"cu-nav-project__dropdown-settings_down","cu-nav-project__dropdown-settings_down-float","dropdown-icon-down"],["icon","dropdown-settings_down"],["class","cu-nav-project__menu",4,"cuDropdownMenu"],e,[1,"cu-nav-project__menu"],[1,"cu-project-list"],[1,"cu-project-list__header"],[1,"cu-project-list__title"],t,[1,"cu-project-list__body",3,"perfectScrollbar"],["class","cu-project-list__item",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-project-list__no-results",4,"ngIf"],[1,"cu-project-list__item",3,"ngClass"],[1,"cu-project-list__link",3,"click"],[1,"cu-controls","cu-controls_md"],["class","cu-controls__item","icon","dropdown-settings_mark",4,"ngIf"],["icon","dropdown-settings_mark",1,"cu-controls__item"],[1,"cu-project-list__no-results"],i]},template:function(e,t){1&e&&d.bd(0,P,14,13,"div",0),2&e&&d.Dc("ngIf",null==t.projectList?null:t.projectList.length)},directives:[h.q,f.b,h.o,b.a,g.a,_.a,v.a,h.p],encapsulation:2,changeDetection:0}),e})()},"2uWK":function(e,t,i){"use strict";i.d(t,"a",function(){return h});var o=i("TqRa"),n=i("fXoL"),s=i("ofXK"),c=i("UdVN"),a=i("NsZK");function r(e,t){1&e&&(n.cc(0,"div",9),n.gc(1,10),n.bc())}function l(e,t){if(1&e&&(n.mc(0,7,1),n.Yb(1),n.jc()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.points),n.hc(0)}}function d(e,t){if(1&e&&(n.cc(0,"div",2),n.bd(1,r,2,0,"div",3),n.cc(2,"div",4),n.Xb(3,"div",5),n.cc(4,"div",6),n.mc(5,7),n.bd(6,l,2,1,"ng-container",8),n.jc(),n.bc(),n.bc(),n.bc()),2&e){const e=n.uc();n.Ob("cu-points-estimates-display__public",e.isSharingApp),n.Ib(1),n.Dc("ngIf",e.isTaskView),n.Ib(5),n.Dc("ngIf",e.showUnit),n.kc(e.points),n.hc(5)}}function u(e,t){if(1&e&&(n.cc(0,"div",13),n.tc(),n.cc(1,"svg",14),n.Xb(2,"path",15),n.Xb(3,"path",16),n.Xb(4,"path",17),n.bc(),n.bc()),2&e){const e=n.uc(2);n.Ob("cu-points-estimates-display__public",e.isSharingApp)}}function m(e,t){1&e&&n.Xb(0,"div",18)}function p(e,t){if(1&e&&(n.bd(0,u,5,2,"div",11),n.bd(1,m,1,0,"ng-template",null,12,n.cd)),2&e){const e=n.Rc(2),t=n.uc();n.Dc("ngIf",t.dashedIcon)("ngIfElse",e)}}let h=(()=>{class e{constructor(){this.isTaskView=!1,this.dashedIcon=!1,this.showUnit=!0,this.isSharingApp=o.k}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-points-estimates-display"]],hostAttrs:[1,"cu-points-estimates-display"],inputs:{points:"points",isTaskView:"isTaskView",dashedIcon:"dashedIcon",showUnit:"showUnit"},decls:3,vars:2,consts:function(){let e,t,i,o;return e=$localize`:@@common_points␟165c71c5a7a79fcca4a50074d50bc6cfe89405ae␟3099867274190589988: Points `,t=$localize`:␟4679523a0c298eb31b7eb3e6e140642576d4ab68␟2371314528242581784:{VAR_PLURAL, plural, =1 {pt} other {pts}}`,t=n.lc(t,{VAR_PLURAL:"\ufffd0:1\ufffd"}),i=$localize`:@@cu-points-estimates-display__points-count␟a9b5d3030b8418f81da7fc3032e6bef8813207da␟506550091941967768: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:${t}:ICU:${"\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,o=$localize`:@@common_sprint-points␟2bb10cb52d2403c7e9c78562abcaf914d22dd5f3␟467707537467110471:Sprint Points`,[["class","cu-points-estimates-display__full",3,"cu-points-estimates-display__public",4,"ngIf","ngIfElse"],["displayIcon",""],[1,"cu-points-estimates-display__full"],["class","cu-points-estimates-display__full-key",4,"ngIf"],[1,"cu-points-estimates-display__full-value"],["icon","sprint-points",1,"cu-points-estimates-display__full-value-icon"],[1,"cu-points-estimates-display__full-value-text"],i,[4,"ngIf"],[1,"cu-points-estimates-display__full-key"],e,["class","cu-points-estimates-display__icon cu-points-estimates-display__icon_task-view","cuTooltip",o,3,"cu-points-estimates-display__public",4,"ngIf","ngIfElse"],["withoutDashes",""],["cuTooltip",o,1,"cu-points-estimates-display__icon","cu-points-estimates-display__icon_task-view"],["viewBox","0 0 36 36","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M18 35c9.389 0 17-7.611 17-17S27.389 1 18 1 1 8.611 1 18s7.611 17 17 17z","stroke-dasharray","3 3",1,"cu-stroke","cu-stroke-dasharray"],["d","M26.857 17.786c0 4.845-3.99 8.786-8.929 8.786C12.99 26.572 9 22.63 9 17.786S12.99 9 17.928 9c4.938 0 8.929 3.94 8.929 8.786z",1,"cu-stroke"],["d","M17.928 11.345l1.538 3.908.118.299.32.017 4.231.232-3.278 2.632-.255.205.085.315 1.084 4.038-3.575-2.27-.268-.17-.268.17-3.575 2.27 1.085-4.038.084-.315-.254-.205-3.279-2.632 4.231-.232.32-.017.118-.299 1.538-3.908z",1,"cu-stroke"],["icon","sprint-points",1,"cu-points-estimates-display__icon"]]},template:function(e,t){if(1&e&&(n.bd(0,d,7,5,"div",0),n.bd(1,p,3,2,"ng-template",null,1,n.cd)),2&e){const e=n.Rc(2);n.Dc("ngIf",t.points)("ngIfElse",e)}},directives:[s.q,c.a,a.a],styles:[".cu-task-row__actions .cu-points-estimates-display{display:block;margin-right:5px}.cu-panel-board__footer_left .cu-points-estimates-display{display:block}.cu-panel-board__footer_left .cu-points-estimates-display .cu-stroke-dasharray{display:none}.cu-points-estimates-display__icon{width:20px;height:20px;padding:2px;fill:#c1c1c1}.contrast_high .cu-points-estimates-display__icon,.dark-theme .cu-points-estimates-display__icon{fill:#979797}.cu-points-estimates-display__icon_task-view{width:34px;height:34px;padding:0}.cu-points-estimates-display__icon svg{width:100%;height:100%}.cu-points-estimates-display__icon .cu-stroke{stroke:#c1c1c1}.contrast_high .cu-points-estimates-display__icon .cu-stroke,.dark-theme .cu-points-estimates-display__icon .cu-stroke{stroke:#979797}.cu-quick-create-task-panel .cu-points-estimates-display__icon .cu-stroke{stroke:#7c828d}.contrast_high .cu-quick-create-task-panel .cu-points-estimates-display__icon .cu-stroke,.dark-theme .cu-quick-create-task-panel .cu-points-estimates-display__icon .cu-stroke{stroke:#979797}.cu-points-estimates-display__icon:hover:not(.cu-points-estimates-display__public),.cu-points-estimates .cu-dropdown_open .cu-points-estimates-display__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-points-estimates-display__icon:hover:not(.cu-points-estimates-display__public),.cu-points-estimates .cu-dropdown_open .cu-points-estimates-display__icon{fill:var(--theme-main-color)}}.cu-points-estimates-display__icon:hover:not(.cu-points-estimates-display__public) .cu-stroke,.cu-points-estimates .cu-dropdown_open .cu-points-estimates-display__icon .cu-stroke{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-points-estimates-display__icon:hover:not(.cu-points-estimates-display__public) .cu-stroke,.cu-points-estimates .cu-dropdown_open .cu-points-estimates-display__icon .cu-stroke{stroke:var(--theme-main-color)}}.cu-points-estimates-display__full:hover:not(.cu-points-estimates-display__public) .cu-points-estimates-display__full-value-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-points-estimates-display__full:hover:not(.cu-points-estimates-display__public) .cu-points-estimates-display__full-value-icon{fill:var(--theme-main-color)}}.cu-points-estimates-display__full-key{margin-bottom:3px;font:500 10px Gotham Pro,Proxima Nova,arial,serif;color:hsla(0,0%,46.7%,.5);text-transform:uppercase}.dark-theme .cu-points-estimates-display__full-key{color:#828588}.cu-points-estimates-display__full-value{cursor:pointer;display:flex;align-items:center}.cu-points-estimates-display__full-value-icon{width:15px;height:15px;margin-right:3px;fill:#c1c1c1}.contrast_high .cu-points-estimates-display__full-value-icon,.dark-theme .cu-points-estimates-display__full-value-icon{fill:#979797}.cu-points-estimates-display__full-value-text{font:400 11px Gotham Pro,Proxima Nova,arial,serif;color:#777;padding:2px 0}.dark-theme .cu-points-estimates-display__full-value-text{color:#abaeb0}"],encapsulation:2,changeDetection:0}),e})()},"2yk8":function(e,t,i){"use strict";var o=i("IPAr"),n=i("ZWk2"),s=i("afWh");e.exports=a,a.locator=s,a.notInLink=!0;var c="mailto:".length;function a(e,t,i){var s,a,r,l,d,u="",m=t.length,p=0,h="",f=!1,b="";if("<"===t.charAt(0)){for(p++,u="<";p<m&&(s=t.charAt(p),!(o(s)||">"===s||"@"===s||":"===s&&"/"===t.charAt(p+1)));)h+=s,p++;if(h){if(b+=h,h="",b+=s=t.charAt(p),p++,"@"===s)f=!0;else{if(":"!==s||"/"!==t.charAt(p+1))return;b+="/",p++}for(;p<m&&(s=t.charAt(p),!o(s)&&">"!==s);)h+=s,p++;if(s=t.charAt(p),h&&">"===s)return!!i||(r=b+=h,u+=b+s,(a=e.now()).column++,a.offset++,f&&("mailto:"===b.slice(0,c).toLowerCase()?(r=r.slice(c),a.column+=c,a.offset+=c):b="mailto:"+b),this.inlineTokenizers={text:(l=this.inlineTokenizers).text},d=this.enterLink(),r=this.tokenizeInline(r,a),this.inlineTokenizers=l,d(),e(u)({type:"link",title:null,url:n(b,{nonTerminated:!1}),children:r}))}}}},"31bS":function(e,t,i){"use strict";i.d(t,"a",function(){return P});var o=i("/qOb"),n=i("fXoL"),s=i("2Vo4"),c=i("XNiG"),a=i("VRyK"),r=i("1uah"),l=i("LRne"),d=i("itXk"),u=i("Kj3r"),m=i("eIep"),p=i("lJxs"),h=i("UXun"),f=i("/uUt"),b=i("1G5W"),g=i("IzEk"),_=i("6wVO"),v=i("3Pt+"),k=i("O5gs"),y=i("ofXK"),w=i("UdVN"),x=i("wNhb");const I=["timeInputted"],T=["popover"],C=["dropdown"];function D(e,t){if(1&e){const e=n.dc();n.cc(0,"div",7),n.qc("click",function(){return n.Uc(e),n.uc().clear()}),n.bc()}}function O(e,t){if(1&e&&n.Xb(0,"div",10,11),2&e){n.uc();const e=n.Rc(2);n.Dc("cuPopover",e)("trigger","click")("outsideClick",!0)}}function S(e,t){if(1&e){const e=n.dc();n.ac(0),n.gc(1,12),n.Zb(),n.cc(2,"a",13),n.qc("click",function(){return n.Uc(e),n.uc(2).popover.hide()}),n.gc(3,14),n.bc()}}function E(e,t){if(1&e&&(n.bd(0,O,2,3,"div",8),n.bd(1,S,4,0,"ng-template",null,9,n.cd)),2&e){const e=n.uc();n.Dc("ngIf",e.showHelp)}}let P=(()=>{class e{constructor(e,t){this.timeEstimateService=e,this.changeDetectorRef=t,this.focused=!1,this.isFocused$=new s.a(!1),this.textValue="",this.emitOnBlur=!1,this.saveOnEnter=!1,this.autoFocus=!1,this.showClear=!1,this.defaultToHours=!1,this.debounceTime=250,this.placeholder=$localize`:@@forms_placeholder--type-in-type:Type in time`,this.showHelp=!0,this.dropdownPlacement=["bottom-left","top-left","auto"],this.input$=new s.a(this.textValue),this.debounceProcessLanguage$=new c.a,this.items$=Object(a.a)(this.debounceProcessLanguage$.pipe(Object(u.a)(300)),this.input$).pipe(Object(m.a)(e=>Object(r.a)(Object(l.a)(e),Object(l.a)(this.parseTimeEstimate(e)))),Object(p.a)(([e,t])=>t&&t.value&&this.initText!==e?[{id:"estimate",title:t.value.output,customPayload:t}]:[]),Object(h.a)({refCount:!0,bufferSize:1})),this.dropdownVisible$=Object(d.a)([this.items$,this.isFocused$]).pipe(Object(p.a)(([e,t])=>e&&e.length&&t)),this.destroy$=new c.a,this.onChange=new n.o,this.onSave=new n.o}ngOnInit(){this.dropdownVisible$.pipe(Object(f.a)(),Object(b.a)(this.destroy$)).subscribe(e=>{e&&!this.dropdown.isOpen?this.dropdown.open():!e&&this.dropdown.isOpen&&this.dropdown.close()}),this.isFocused$.pipe(Object(b.a)(this.destroy$)).subscribe(e=>this.focused=e)}ngOnChanges(e){e.textValue&&this.textValue&&(this.initText=this.textValue,this.currentText=this.textValue,this.input$.next(this.textValue))}ngAfterViewInit(){this.autoFocus&&setTimeout(()=>this.timeInputted.nativeElement.focus())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}parseTimeEstimate(e){try{let t;return e?(t=this.timeEstimateService.parseTimeInput(e,this.defaultToHours),{text:e,value:t,error:null}):null}catch(t){return{text:e,value:null,error:t.message}}}keyDown(e){switch(e.keyCode){case o.a.ENTER:this.handleEnter(),e.preventDefault();break;case o.a.ARROW_UP:case o.a.ARROW_DOWN:e.preventDefault();break;case o.a.ESCAPE:e.preventDefault(),e.stopPropagation(),this.clear()}}handleEnter(){this.items$.pipe(Object(g.a)(1),Object(b.a)(this.destroy$)).subscribe(e=>{if(e&&1===e.length)this.selectValue(e[0].customPayload,!0);else{const e=this.parseTimeEstimate(this.textValue);e&&e.value&&this.selectValue(e,!0)}})}selectValue(e,t=!1){this.onChange.emit(e.value),this.timeInputted.nativeElement.focus(),t&&this.saveOnEnter&&this.onSave.emit()}setFocused(e){this.isFocused$.next(e)}blur(){this.items$.pipe(Object(g.a)(1),Object(b.a)(this.destroy$)).subscribe(e=>{e&&0!==e.length||this.restoreInput()})}updateInput(e){e!==this.currentText&&(this.currentText=e,this.debounceProcessLanguage$.next(this.currentText))}restoreInput(){this.textValue=this.initText,this.changeDetectorRef.markForCheck(),this.currentText=this.initText,this.input$.next(this.currentText)}clear(){this.textValue="",this.initText="",this.input$.next(this.textValue||""),this.selectValue({text:"",value:{output:"",seconds:null,milliseconds:null},error:null}),this.setFocused(!1),this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(_.a),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-time-estimates-input"]],viewQuery:function(e,t){if(1&e&&(n.jd(I,3),n.jd(T,1),n.jd(C,3)),2&e){let e;n.Qc(e=n.rc())&&(t.timeInputted=e.first),n.Qc(e=n.rc())&&(t.popover=e.first),n.Qc(e=n.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-time-estimates-input"],inputs:{textValue:"textValue",emitOnBlur:"emitOnBlur",saveOnEnter:"saveOnEnter",autoFocus:"autoFocus",showClear:"showClear",defaultToHours:"defaultToHours",debounceTime:"debounceTime",placeholder:"placeholder",showHelp:"showHelp",dropdownPlacement:"dropdownPlacement"},outputs:{onChange:"onChange",onSave:"onSave"},features:[n.Gb],decls:10,vars:16,consts:function(){let e,t;return e=$localize`:@@common_dt-natural-language--time-estimate␟42f43e444d1132eafadda5163af4db0a44981d1e␟727736209808701056: Use natural language to add time estimates in minutes, hours, days, weeks, or months. Try things like "1h" or "1d". `,t=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,[[1,"cu-time-estimates-input__container"],["type","text",1,"cu-time-estimates-input__input",3,"placeholder","ngModel","ngModelChange","keydown","blur","focus"],["timeInputted",""],[3,"items","dropdownPlacement","dropdownHostElement","dropdownCloseOthersOnOpen","dropdownPreventDocumentScroll","menuModifier","onSelect"],["dropdown",""],["class","cu-time-estimates-input__clear","icon","close",3,"click",4,"ngIf","ngIfElse"],["help",""],["icon","close",1,"cu-time-estimates-input__clear",3,"click"],["class","help-question-mark","icon","question","containerClass","markdown-tooltip",3,"cuPopover","trigger","outsideClick",4,"ngIf"],["popTemplate",""],["icon","question","containerClass","markdown-tooltip",1,"help-question-mark",3,"cuPopover","trigger","outsideClick"],["popover","cuPopover"],e,["href","https://docs.clickup.com/general/natural-language-processing-for-dates-and-times","target","_blank",1,"popover-content_link",3,"click"],t]},template:function(e,t){if(1&e&&(n.cc(0,"div",0),n.cc(1,"input",1,2),n.qc("ngModelChange",function(e){return t.textValue=e})("ngModelChange",function(e){return t.updateInput(e)})("keydown",function(e){return t.keyDown(e)})("blur",function(){return t.blur()})("focus",function(){return t.setFocused(!0)}),n.vc(3,"async"),n.bc(),n.cc(4,"cu-dropdown-list",3,4),n.qc("onSelect",function(e){return t.selectValue(null==e?null:e.customPayload)}),n.vc(6,"async"),n.bc(),n.bc(),n.bd(7,D,1,0,"div",5),n.bd(8,E,3,1,"ng-template",null,6,n.cd)),2&e){const e=n.Rc(2),i=n.Rc(9);n.Ib(1),n.Ob("error",n.wc(3,12,t.error$)),n.Dc("placeholder",t.placeholder)("ngModel",t.textValue),n.Ib(3),n.Dc("items",n.wc(6,14,t.items$))("dropdownPlacement",t.dropdownPlacement)("dropdownHostElement",e.nativeElement)("dropdownCloseOthersOnOpen",!1)("dropdownPreventDocumentScroll",!1)("menuModifier","cu-date-nlp-input__dropdown-body"),n.Ib(3),n.Dc("ngIf",t.showClear&&t.textValue)("ngIfElse",i)}},directives:[v.c,v.p,v.s,k.a,y.q,w.a,x.a],pipes:[y.b],styles:[".cu-time-estimates-input{display:flex;position:relative}.cu-time-estimates-input__clear{position:absolute;right:10px;width:13px;height:14px;stroke:rgba(52,52,52,.3);cursor:pointer}.dark-theme .cu-time-estimates-input__clear{stroke:#828588}.cu-time-estimates-input__clear:hover{stroke:rgba(52,52,52,.7)}.dark-theme .cu-time-estimates-input__clear:hover{stroke:#abaeb0}.cu-time-estimates-input__input{border:1px solid #e4e4e4;padding:0 25px 0 15px;width:100%;font-size:13px;border-radius:.3em;height:36px}.dark-theme .cu-time-estimates-input__input{border-color:#1e272e;background:transparent;color:#d5d6d7}.cu-time-estimates-input__input::-webkit-input-placeholder{color:#d2d0d5}.dark-theme .cu-time-estimates-input__input::-webkit-input-placeholder{color:#828588}.cu-time-estimates-input__input.error{border-color:#fd71af}.dark-theme .cu-time-estimates-input__input:focus{box-shadow:none}.cu-time-estimates-input__container{width:100%}.cu-time-estimates-input .help-question-mark{position:absolute;top:50%;transform:translateY(-50%);margin-top:0;right:8px}"],encapsulation:2,changeDetection:0}),e})()},"38Di":function(e,t,i){"use strict";i.d(t,"a",function(){return A});var o=i("dsEp"),n=i("ofXK"),s=i("EDFS"),c=i("X5rV"),a=i("chQ0"),r=i("bpMd"),l=i("obfd"),d=i("FpDt"),u=i("K0KF"),m=i("bFKe"),p=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=p.Ub({type:e}),e.\u0275inj=p.Tb({factory:function(t){return new(t||e)},imports:[[n.c,u.a,m.b,d.a]]}),e})();var f=i("K8XO"),b=i("ihCf"),g=i("wxjI"),_=i("Toui"),v=i("3Pt+"),k=i("FyW7"),y=i("pMok");let w=(()=>{class e{}return e.\u0275mod=p.Ub({type:e}),e.\u0275inj=p.Tb({factory:function(t){return new(t||e)},imports:[[n.c,c.a,v.l,k.a,y.a]]}),e})();var x=i("Fv+p"),I=i("C8uC"),T=i("GtmI"),C=i("csDc"),D=i("aVmG"),O=i("/SUI"),S=i("KyjD"),E=i("gb9A"),P=i("prfv"),j=i("bx+h");let A=(()=>{class e{}return e.\u0275mod=p.Ub({type:e}),e.\u0275inj=p.Tb({factory:function(t){return new(t||e)},imports:[[n.c,v.l,I.LoaderModule,T.a,C.a,D.a,u.a,s.d,c.a,_.a,a.a,r.a,l.a,h,f.a,b.b,g.a,w,o.a,x.a,O.a,S.a,E.a,P.a,j.a]]}),e})()},"3GlI":function(e,t,i){"use strict";e.exports=function(e){return String(e).replace(/\n+$/,"")}},"3LUv":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("nLWA"),n=i("fXoL"),s=i("KX9h"),c=i("31bS");const a=["timeEstimatesInput"];let r=(()=>{class e{constructor(e,t){this.cdr=e,this.timePipe=t,this.emitOnBlur=!1,this.autoFocus=!0,this.debounceTime=250,this.placeholder=$localize`:@@forms_placeholder--type-in-type:Type in time`,this.hoursPerDay=o.a,this.displayHours=!0,this.showClear=!0,this.showHelp=!0,this.modifier="",this.saveOnEnter=!1,this.onChange=new n.o,this.onClose=new n.o}ngOnInit(){}ngOnChanges(e){e.value&&this.setTime()}setTime(){this.textValue=this.value?this.timePipe.transform(this.value,this.team?this.team.hours_per_day:this.hoursPerDay,!1,this.team?this.team.time_estimate_display_hours:this.displayHours):"",this.cdr.markForCheck()}changeTime(e){this.textValue=e&&e.milliseconds?this.timePipe.transform(e.milliseconds,this.team?this.team.hours_per_day:this.hoursPerDay,!1,this.team?this.team.time_estimate_display_hours:this.displayHours):"",this.cdr.markForCheck(),this.onChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.h),n.Wb(s.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-time-estimate-input"]],viewQuery:function(e,t){if(1&e&&n.jd(a,3),2&e){let e;n.Qc(e=n.rc())&&(t.timeEstimatesInput=e.first)}},inputs:{value:"value",team:"team",emitOnBlur:"emitOnBlur",autoFocus:"autoFocus",debounceTime:"debounceTime",placeholder:"placeholder",hoursPerDay:"hoursPerDay",displayHours:"displayHours",showClear:"showClear",showHelp:"showHelp",modifier:"modifier",saveOnEnter:"saveOnEnter"},outputs:{onChange:"onChange",onClose:"onClose"},features:[n.Gb],decls:2,vars:12,consts:[[3,"emitOnBlur","autoFocus","textValue","showClear","saveOnEnter","defaultToHours","debounceTime","placeholder","showHelp","onChange","onSave"],["timeEstimatesInput",""]],template:function(e,t){1&e&&(n.cc(0,"cu-time-estimates-input",0,1),n.qc("onChange",function(e){return t.changeTime(e)})("onSave",function(){return t.onClose.emit()}),n.bc()),2&e&&(n.Mb("cu-task-time-estimate-input__input ",t.modifier,""),n.Dc("emitOnBlur",t.emitOnBlur)("autoFocus",t.autoFocus)("textValue",t.textValue)("showClear",t.showClear)("saveOnEnter",t.saveOnEnter)("defaultToHours",!0)("debounceTime",t.debounceTime)("placeholder",t.placeholder)("showHelp",t.showHelp))},directives:[c.a],styles:['.cu-task-time-estimate-input{display:flex}.cu-task-time-estimate-input__input{display:flex;align-items:center;position:relative;width:135px;height:36px;padding:0;-webkit-font-smoothing:antialiased;color:#343434}.dark-theme .cu-task-time-estimate-input__input{color:#d5d6d7;background:transparent}.cu-task-time-estimate-input__input:focus{box-shadow:none}.cu-task-time-estimate-input__input:-ms-input-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:13px;opacity:.6}.cu-task-time-estimate-input__input::placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:13px;opacity:.6}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-time-estimate-input__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-task-time-estimate-input__input::placeholder{font-family:var(--global-font-support)}}.contrast_high .cu-task-time-estimate-input__input:-ms-input-placeholder{color:#ababab;opacity:1}.contrast_high .cu-task-time-estimate-input__input::placeholder{color:#ababab;opacity:1}.cu-task-time-estimate-input__input::-moz-placeholder{line-height:28px}.cu-task-time-estimate-input__dropdown-mod{display:flex;align-items:center;position:relative}'],encapsulation:2,changeDetection:0}),e})()},"3NTJ":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("dsEp"),n=i("mcWp"),s=i("ofXK"),c=i("K0KF"),a=i("tyNb"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[s.c,n.a,o.a,c.a,a.l]]}),e})()},"3XhA":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("ofXK"),n=i("VBI8"),s=i("HCaB"),c=i("12Dc"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a]]}),e})()},"3pVM":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("s3LH"),n=i("YAnr");function s(e){return(t,i)=>{const n=e(),s=n?n.getFormat(n.selection.savedRange.index):{};return new o.a(i.ops.map(e=>s.code?Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{code:!0})}):e))}}function c(e,t){return(i,s)=>{if(!s.ops.length)return new o.a;const c=e(),a=c?c.getFormat(c.selection.savedRange.index):{},r=new o.a;return s.ops.forEach(e=>{e.attributes&&(e.attributes.background&&(n.D.some(t=>t.value===e.attributes.background)||(e.attributes.background=void 0)),e.attributes.color&&(n.H.some(t=>t.value===e.attributes.color)||(e.attributes.color=void 0)),e.attributes["block-id"]&&(e.attributes["block-id"]=void 0),e.attributes.link&&e.attributes.underline&&(e.attributes.underline=void 0),e.attributes.comment&&(e.attributes.comment=void 0),e.attributes.comment_draft&&(e.attributes.comment_draft=void 0)),a.blockquote&&(e.attributes=Object.assign(Object.assign({},e.attributes),{block:void 0,blockquote:!0})),a.code&&(e.attributes=Object.assign(Object.assign({},e.attributes),{code:!0})),e.insert&&e.insert.image&&t()||r.insert(e.insert,e.attributes)}),r}}function a(e,t,i){const n=i.query(e);if(null==n||"list"!==n.blotName||!function(e,t){let i="";for(let o=e.ops.length-1;o>=0&&i.length<"\n".length;--o){const t=e.ops[o];if("string"!=typeof t.insert)break;i=t.insert+i}return"\n"===i.slice(-1*"\n".length)}(t))return t;let s=-1,c=e.parentNode;for(;null!=c;)["OL","UL"].includes(c.tagName)&&(s+=1),c=c.parentNode;return s<=0?t:t.reduce((e,t)=>e.insert(t.insert,Object.assign({indent:s},t.attributes||{})),new o.a)}function r(e,t){return[[Node.TEXT_NODE,s(e)],["*",c(e,t)],["li",a]]}},"3uaV":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{constructor(e,t){this.elementRef=e,this.renderer=t,this.targetElement=null,this.bodySelector="app-root",this.clickOutside=new o.o,this.deregisterClickListener=()=>{}}ngAfterViewInit(){setTimeout(()=>{this.deregisterClickListener=this.renderer.listen(document.body.querySelector(this.bodySelector),"click",e=>{e.target&&(this.getElement().nativeElement.contains(e.target)||this.clickOutside.emit(e))})})}ngOnDestroy(){this.deregisterClickListener()}getElement(){return this.targetElement?this.targetElement:this.elementRef}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.m),o.Wb(o.H))},e.\u0275dir=o.Rb({type:e,selectors:[["","clickOutside",""]],inputs:{targetElement:["clickOutsideElement","targetElement"],bodySelector:["clickOutsideBodySelector","bodySelector"]},outputs:{clickOutside:"clickOutside"}}),e})()},4:function(e,t){},"497W":function(e,t,i){"use strict";var o=i("aTp6");function n(e,t,i){for(var o,n=t.length,s=-1,c="";++s<n;){if("\n"===(o=t.charAt(s))){if(s<2)return;return!!i||e(c+=o)({type:"break"})}if(" "!==o)return;c+=o}}e.exports=n,n.locator=o},"4DGh":function(e,t,i){"use strict";i.d(t,"n",function(){return o}),i.d(t,"e",function(){return n}),i.d(t,"f",function(){return s}),i.d(t,"g",function(){return c}),i.d(t,"h",function(){return a}),i.d(t,"a",function(){return r}),i.d(t,"b",function(){return l}),i.d(t,"p",function(){return d}),i.d(t,"i",function(){return u}),i.d(t,"k",function(){return m}),i.d(t,"o",function(){return p}),i.d(t,"j",function(){return h}),i.d(t,"l",function(){return f}),i.d(t,"m",function(){return b}),i.d(t,"c",function(){return g}),i.d(t,"d",function(){return _}),i.d(t,"q",function(){return v});const o="[QUICK_SWITCHER] Load data",n="[QUICK_SWITCHER] Get data",s="[QUICK_SWITCHER] Get data success",c="[QUICK_SWITCHER] Get recent data",a="[QUICK_SWITCHER] Get recent data success",r="[QUICK_SWITCHER] Add recent data",l="[QUICK_SWITCHER] Add recent data success",d="[QUICK_SWITCHER] Navigate";class u{constructor(){this.type=n}}class m{constructor(e,t){this.teamId=e,this.data=t,this.type=s}}class p{constructor(){this.type=o}}class h{constructor(e){this.error=e,this.type="[QUICK_SWITCHER] Get data fail"}}class f{constructor(){this.type=c}}class b{constructor(e,t){this.teamId=e,this.data=t,this.type=a}}class g{constructor(e){this.item=e,this.type=r}}class _{constructor(e,t){this.teamId=e,this.items=t,this.type=l}}class v{constructor(e){this.item=e,this.type=d}}},"4Dfh":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("ofXK"),n=i("tyNb"),s=i("GtmI"),c=i("drq7"),a=i("1M0N"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},providers:[c.a],imports:[[o.c,s.a,n.l,a.a]]}),e})()},"4MqD":function(e,t,i){"use strict";e.exports=function(e,t,i){return function(){var o=i||this,n=o[e];return o[e]=!t,function(){o[e]=n}}}},"4WLo":function(e,t,i){"use strict";i.d(t,"b",function(){return Ze}),i.d(t,"a",function(){return Ye});var o=i("fXoL"),n=i("YwDF"),s=i("jJQC"),c=i("2p4s"),a=i("XNiG"),r=i("pLZG"),l=i("1G5W"),d=i("w1tV"),u=i("HQTE"),m=i("IE5h"),p=i("Uo20"),h=i("CDR3"),f=i("LdyQ"),b=i("ofXK"),g=i("n+1/"),_=i("MJvn"),v=i("NsZK"),k=i("UdVN"),y=i("T7pm"),w=i("EDFS"),x=i("jkT0"),I=i("N4ya"),T=i("LRxH");const C=["attachmentPaywallPopover"],D=["attachmentDropdown"];function O(e,t){if(1&e&&o.Xb(0,"div",5),2&e){const e=o.uc();o.Dc("cuTooltip",e.readonly?null:e.manageFilesText)("icon","add-file")}}function S(e,t){1&e&&o.Xb(0,"div",8),2&e&&o.Dc("icon","plus-rounded")}function E(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-attachment-preview",9),o.qc("onOpen",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).previewAttachment(i)}),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(2);o.Dc("attachment",e)("taskId",null==i.task?null:i.task.id)("thumbSize",i.forTableView?"medium":"small")("canChangeDescription",!1)}}function P(e,t){if(1&e&&(o.bd(0,S,1,1,"div",6),o.bd(1,E,1,4,"cu-attachment-preview",7)),2&e){const e=o.uc();o.Dc("ngIf",!e.readonly),o.Ib(1),o.Dc("ngForOf",e.fieldValue)("ngForTrackBy",e.trackById)}}function j(e,t){if(1&e&&(o.Xb(0,"img",27),o.vc(1,"async")),2&e){const e=o.uc().$implicit;o.Dc("src",e.preview$?o.wc(1,1,e.preview$):e.url,o.Xc)}}function A(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(2).$implicit;o.Ib(1),o.fd(" ",e.percentComplete,"% - ")}}function $(e,t){if(1&e&&(o.cc(0,"div",28),o.bd(1,A,2,1,"ng-container",29),o.dd(2),o.bc()),2&e){const e=o.uc().$implicit;o.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(1),o.Dc("ngIf",e.pending),o.Ib(1),o.fd(" ",e.name," ")}}function U(e,t){1&e&&(o.cc(0,"div",30),o.gc(1,31),o.bc())}function R(e,t){if(1&e){const e=o.dc();o.cc(0,"div",22),o.bd(1,j,2,3,"img",23),o.bd(2,$,3,4,"div",24),o.bd(3,U,2,0,"div",25),o.cc(4,"div",26),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).removeFile(i)}),o.bc(),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.Dc("ngIf",e.isImage),o.Ib(1),o.Dc("ngIf",!e.error),o.Ib(1),o.Dc("ngIf",e.error)}}function M(e,t){if(1&e&&(o.cc(0,"div",20),o.bd(1,R,5,3,"div",21),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngForOf",e.files)("ngForTrackBy",e.trackById)}}function F(e,t){if(1&e){const e=o.dc();o.cc(0,"div",10,11),o.bd(2,M,2,2,"div",12),o.cc(3,"div",13),o.gc(4,14),o.bc(),o.cc(5,"cu-cloud-buttons-dropdown",15),o.qc("onFilesSelected",function(t){return o.Uc(e),o.uc().addFiles(t)})("onCloudAdded",function(t){return o.Uc(e),o.uc().addCloudFile(t.file)}),o.bc(),o.cc(6,"div",16),o.gc(7,17),o.bc(),o.cc(8,"div",18),o.qc("ondrop",function(t){return o.Uc(e),o.uc().addFiles(t)}),o.Xb(9,"div",19),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Dc("popover",e.paywallPopover),o.Ib(2),o.Dc("ngIf",e.files.length>0),o.Ib(3),o.Dc("menuOnly",!0)("parentId",e.field.id)("type",11)("permanent",!1)("showSmart",!1),o.Ib(4),o.Dc("icon","upload")}}const L=function(){return["bottom","top","auto"]};let N=(()=>{class e{constructor(e,t,i){this.attachmentsViewerService=e,this.uploaderService=t,this.cdr=i,this.fieldValueChange=new o.o,this.dropdownOpen=new o.o,this.dropdownClose=new o.o,this.trackById=Object(s.d)("id"),this.files=[],this.destroy$=new a.a,this.manageFilesText=$localize`:@@cu-custom-field-type-attachment__form-placeholder_manage-files:Add / Manage Files`}ngOnInit(){this.uploaderService.onAdded.pipe(Object(r.a)(e=>e.tag===this.field.id),Object(l.a)(this.destroy$)).subscribe(({data:e})=>{const t=e.type.startsWith("image/")&&"image/svg"!==e.type;this.files=[...this.files,{id:e.tempId,name:e.name,isImage:t,pending:!0,percentComplete:0,preview$:t?Object(u.a)(e).pipe(Object(d.a)()):null}],this.cdr.markForCheck()}),this.uploaderService.onError.pipe(Object(r.a)(e=>e.tag===this.field.id),Object(l.a)(this.destroy$)).subscribe(({data:e})=>{this.files=this.files.map(t=>t.id===e.id?Object.assign(Object.assign({},t),{pending:!1,error:!0}):t),this.cdr.markForCheck()}),this.uploaderService.onProgress.pipe(Object(r.a)(e=>e.tag===this.field.id),Object(l.a)(this.destroy$)).subscribe(({data:e})=>{this.files=this.files.map(t=>t.id===e.id?Object.assign(Object.assign({},t),{percentComplete:e.loadPercent}):t),this.cdr.markForCheck()}),this.uploaderService.onUpload.pipe(Object(r.a)(e=>e.tag===this.field.id),Object(l.a)(this.destroy$)).subscribe(({data:e})=>{this.files=this.files.map(t=>t.id===e.id?Object.assign(Object.assign({},t),{percentComplete:100,pending:!1,attachment:e.result}):t),this.cdr.markForCheck();const t=this.files.every(e=>!e.pending),i=this.files.filter(e=>!e.url&&e.attachment).map(e=>e.attachment);t&&i.length>0&&this.fieldValueChange.emit({value:[...this.fieldValue||[],...i],paywallPopover:this.attachmentPaywallPopover})}),this.attachmentsViewerService.onRemove.pipe(Object(r.a)(e=>this.fieldValue&&this.fieldValue.some(t=>t.id===e)),Object(l.a)(this.destroy$)).subscribe(e=>{this.removeFile(this.files.find(t=>t.attachment&&t.attachment.id===e))})}ngAfterViewInit(){this.autoDropdown&&this.attachmentDropdown.open()}ngOnChanges(e){e.field&&(e.field.isFirstChange()||e.field.currentValue.id===e.field.previousValue.id||(this.files=[])),e.fieldValue&&(this.files=[...(this.fieldValue||[]).map(e=>({id:e.id,attachment:e,url:e.thumbnail_small||e.url,name:e.title,isImage:Object(m.l)(e)&&"svg"!==e.extension})),...this.files.filter(e=>e.pending||e.error)])}ngOnDestroy(){this.destroy$.next()}previewAttachment(e){const t=this.fieldValue;this.attachmentsViewerService.onOpen.emit({attachments:t,canRemove:!this.readonly,canRemoveOwn:!this.readonly,canEdit:!1,canEditOwn:!1,canChangeDescription:!1,index:t.indexOf(e),taskId:this.task&&this.task.id,fromDropdown:this.forBulk,allowComments:!0})}addCloudFile(e){this.fieldValueChange.emit({value:[...this.fieldValue||[],e],paywallPopover:this.attachmentPaywallPopover})}addFiles(e){this.uploaderService.setOptions({url:[c.a.apiUrl,"attachment"].join("/"),fieldName:"attachment",formDataFields:{parent:this.field.id,type:"11",permanent:this.permanentAttachments,hidden:!0}}),this.uploaderService.addFiles(e,this.field.id)}removeFile(e){this.files=this.files.filter(t=>t!==e),e.attachment&&this.fieldValueChange.emit({value:this.fieldValue.filter(t=>t.id!==e.attachment.id),paywallPopover:this.attachmentPaywallPopover})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(p.a),o.Wb(h.a),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-type-attachment"]],viewQuery:function(e,t){if(1&e&&(o.jd(C,1),o.jd(D,1)),2&e){let e;o.Qc(e=o.rc())&&(t.attachmentPaywallPopover=e.first),o.Qc(e=o.rc())&&(t.attachmentDropdown=e.first)}},hostAttrs:[1,"cu-custom-field-type-attachment"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-custom-field-type-attachment_align-left",t.forTaskCustomFields)},inputs:{field:"field",fieldValue:"fieldValue",readonly:"readonly",forTaskCustomFields:"forTaskCustomFields",task:"task",permanentAttachments:"permanentAttachments",paywallPopover:"paywallPopover",forBulk:"forBulk",forTableView:"forTableView",allCustomFields:"allCustomFields",autoDropdown:"autoDropdown",permissions:"permissions"},outputs:{fieldValueChange:"fieldValueChange",dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose"},features:[o.Gb],decls:6,vars:7,consts:function(){let e,t,i,o;return e=$localize`:@@common_attach-file␟7fbdb8ef4d3517df0aac817d301df720efbf8fd3␟1859068355042039042: Attach File `,t=$localize`:@@cu-custom-field-type-attachment__drop-files␟4772e6497b510ddc15767128c6f8b149b085e873␟3972380898093967757: Or drop a file here `,i=$localize`:@@cu-custom-field-type-attachment__tooltip-msg_delete-file␟af6430a2f87c6e26551d2c6d69d859d787ac2d7f␟6693349469471580292:Delete file`,o=$localize`:@@common_upload-failed␟6c670d64102f0ac6359740701d3a798d15b3ac6b␟2782833452391946222: Upload failed `,[["cuDropdown","",1,"cu-custom-field-type-attachment__dropdown",3,"dropdownPlacement","dropdownCloseOnInsideClick","dropdownRepositionFlag","dropdownDisabled"],["attachmentDropdown","dropdown"],["class","cu-custom-field-type-attachment__add","cuDropdownToggle","",3,"cuTooltip","icon",4,"ngIf","ngIfElse"],["hasFiles",""],["class","cu-custom-field-type-attachment__menu","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",3,"popover",4,"cuDropdownMenu"],["cuDropdownToggle","",1,"cu-custom-field-type-attachment__add",3,"cuTooltip","icon"],["class","cu-custom-field-type-attachment__plus","cuDropdownToggle","",3,"icon",4,"ngIf"],[3,"attachment","taskId","thumbSize","canChangeDescription","onOpen",4,"ngFor","ngForOf","ngForTrackBy"],["cuDropdownToggle","",1,"cu-custom-field-type-attachment__plus",3,"icon"],[3,"attachment","taskId","thumbSize","canChangeDescription","onOpen"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",1,"cu-custom-field-type-attachment__menu",3,"popover"],["attachmentPaywallPopover","bs-popover"],["class","cu-custom-field-type-attachment__menu-files",4,"ngIf"],[1,"cu-custom-field-type-attachment__menu-label"],e,[3,"menuOnly","parentId","type","permanent","showSmart","onFilesSelected","onCloudAdded"],[1,"cu-custom-field-type-attachment__menu-label","cu-custom-field-type-attachment__menu-label_secondary"],t,["cuDropArea","","cuDropUploader","",1,"cu-custom-field-type-attachment__menu-drop",3,"ondrop"],[1,"cu-custom-field-type-attachment__menu-drop-icon",3,"icon"],[1,"cu-custom-field-type-attachment__menu-files"],["class","cu-custom-field-type-attachment__menu-file",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-custom-field-type-attachment__menu-file"],["class","cu-custom-field-type-attachment__menu-file-img",3,"src",4,"ngIf"],["class","cu-custom-field-type-attachment__menu-file-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated",4,"ngIf"],["class","cu-custom-field-type-attachment__menu-file-error",4,"ngIf"],["icon","close","cuTooltip",i,1,"cu-custom-field-type-attachment__menu-file-close",3,"click"],[1,"cu-custom-field-type-attachment__menu-file-img",3,"src"],[1,"cu-custom-field-type-attachment__menu-file-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[4,"ngIf"],[1,"cu-custom-field-type-attachment__menu-file-error"],o]},template:function(e,t){if(1&e&&(o.cc(0,"div",0,1),o.bd(2,O,1,2,"div",2),o.bd(3,P,2,3,"ng-template",null,3,o.cd),o.bd(5,F,10,8,"div",4),o.bc()),2&e){const e=o.Rc(4);o.Dc("dropdownPlacement",o.Gc(6,L))("dropdownCloseOnInsideClick",!1)("dropdownRepositionFlag",t.fieldValue)("dropdownDisabled",t.readonly),o.Ib(2),o.Dc("ngIf",!(null!=t.fieldValue&&t.fieldValue.length))("ngIfElse",e)}},directives:[f.b,b.q,g.a,_.a,v.a,k.a,b.p,y.a,w.c,x.a,I.a,T.a],pipes:[b.b],styles:['.cu-custom-field-type-attachment{display:flex;justify-content:center;width:100%}.cu-custom-field-type-attachment_align-left{justify-content:flex-start}.cu-custom-field-type-attachment:hover .cu-custom-field-type-attachment__plus{opacity:1}.cu-task-row__custom-field_attachment .cu-custom-field-type-attachment{justify-content:center;flex-wrap:wrap;padding:4px 18px}.cu-custom-field-type-attachment__dropdown{justify-content:center;flex-wrap:wrap;display:flex;align-items:center}.cu-custom-field-type-attachment__add{width:16px;height:19px;fill:#b9bec7}.dark-theme .cu-custom-field-type-attachment__add{fill:#979797}.cu-custom-field-type-attachment .cu-dropdown_open .cu-custom-field-type-attachment__add,.cu-custom-field-type-attachment__add:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-attachment .cu-dropdown_open .cu-custom-field-type-attachment__add,.cu-custom-field-type-attachment__add:hover{fill:var(--theme-main-color)}}.cu-custom-field-type-attachment__plus{background:#7b68ee;width:14px;height:14px;border-radius:50%;cursor:pointer;fill:#fff;margin-right:4px;margin-left:-18px;padding:3px;opacity:0}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-attachment__plus{background:var(--theme-main-color)}}.cu-custom-field-type-attachment__plus:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-custom-field-type-attachment__plus:hover{background:var(--theme-main-color-dark)}}.cu-custom-field-type-attachment__menu{padding:15px 14px}.cu-custom-field-type-attachment__menu-files{margin-bottom:25px;margin-right:-4px}.cu-custom-field-type-attachment__menu-file{height:31px;border-radius:50px;display:inline-flex;align-items:center;margin:0 4px 4px 0;padding:0 9px 0 3px;overflow:hidden;position:relative}.cu-custom-field-type-attachment__menu-file:before{content:"";display:block;position:absolute;background:#dfdbfb;top:0;left:0;width:100%;height:100%;opacity:.5}@supports (--theme-main-color-light:#dfdbfb){.cu-custom-field-type-attachment__menu-file:before{background:var(--theme-main-color-light)}}.cu-custom-field-type-attachment__menu-file-img{width:25px;height:25px;border-radius:100px;display:inline-block;overflow:hidden;z-index:10}.cu-custom-field-type-attachment__menu-file-error,.cu-custom-field-type-attachment__menu-file-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#4f4f4f;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-left:4px;max-width:108px;z-index:10}.dark-theme .cu-custom-field-type-attachment__menu-file-error,.dark-theme .cu-custom-field-type-attachment__menu-file-name{color:#fff}.cu-custom-field-type-attachment__menu-file-error{color:#d16464}.cu-custom-field-type-attachment__menu-file-close{width:15px;height:15px;stroke:#4f4f4f;background-color:#fff;border-radius:50%;padding:4px;margin-left:8px;cursor:pointer;z-index:10}.dark-theme .cu-custom-field-type-attachment__menu-file-close{background:#384047;stroke:#d5d6d7}.cu-custom-field-type-attachment__menu .cu-cloud-buttons-dropdown{margin:5px -14px 15px}.cu-custom-field-type-attachment__menu .cu-cloud-buttons-dropdown__icon{margin-right:8px}.cu-custom-field-type-attachment__menu-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#111;text-transform:uppercase;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-custom-field-type-attachment__menu-label{color:#d5d6d7}.cu-custom-field-type-attachment__menu-label_secondary{color:#cacaca}.dark-theme .cu-custom-field-type-attachment__menu-label_secondary{color:#828588}.cu-custom-field-type-attachment__menu-drop{background:#fafbfc;border:1px dotted #cbc9cf;border-radius:4px;display:flex;justify-content:center;align-items:center;margin-top:10px;height:83px}.dark-theme .cu-custom-field-type-attachment__menu-drop{background:#2b343b;border-color:#828588}.cu-custom-field-type-attachment__menu-drop.cu-state-drag-over{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-attachment__menu-drop.cu-state-drag-over{border-color:var(--theme-main-color)}}.cu-custom-field-type-attachment__menu-drop-icon{width:24px;height:20px;opacity:.5}.cu-custom-field-type-attachment cu-attachment-preview{margin-right:4px}.cu-custom-field-type-attachment .cu-attachment-preview{width:auto;height:30px;display:flex;align-items:center}.cu-custom-field-type-attachment .cu-attachment-preview__container,.cu-custom-field-type-attachment .cu-attachment-preview__img,.cu-custom-field-type-attachment .cu-attachment-preview__thumbnail{min-height:0}.cu-custom-field-type-attachment .cu-attachment-preview__container{max-width:25px;max-height:25px;border-radius:4px;overflow:hidden}.cu-custom-field-type-attachment .cu-attachment-preview__file{margin:0}.cu-custom-field-type-attachment .cu-attachment-preview__thumbnail{position:relative}.cu-custom-field-type-attachment .cu-attachment-preview__thumbnail:hover:before{content:"";display:block;position:absolute;border-radius:4px;border:2px solid;width:calc(100% + 2px);height:calc(100% + 2px);top:-1px;left:-1px;z-index:0}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-attachment .cu-attachment-preview__thumbnail:hover:before{border-color:var(--theme-main-color)}}.cu-custom-field-type-attachment .cu-attachment-preview__container{z-index:10}'],encapsulation:2,changeDetection:0}),e})();var z=i("HHlo"),q=i("9Umb"),G=i("2Vo4"),V=i("itXk"),B=i("lJxs"),X=i("IzEk"),H=i("x1J0"),W=i("3yLq"),K=i("iA4v"),Q=i("/qOb"),Z=i("pguY");const Y=["element"];let J=(()=>{class e{constructor(){this.isValidChanged=new o.o,this.search=new o.o,this.formulaChange=new o.o}ngOnChanges(e){(e.formula||e.variables)&&this.setContents()}ngAfterViewInit(){this.quill=new K.b(this.element.nativeElement,{placeholder:$localize`:@@cu-formula-field-text-editor__form-placeholder_type-formula:Type a formula`,theme:"snow",formats:["formula_variable"],modules:{toolbar:!1,clipboard:{matchers:[["*",function(e,t){const i=t.ops.map(e=>({insert:"string"==typeof e.insert?e.insert.replace(/(\r\n|\n|\r)/gm,""):e.insert})).filter(e=>"string"==typeof e.insert&&e.insert||e.insert.formula_variable);return new K.a(i)}]]}}}),this.quill.getModule("clipboard").onCopy=function(e){const t=this.quill.getContents(e.index,e.length).filter(e=>"string"==typeof e.insert||e.insert.formula_variable).map(e=>e.insert.formula_variable?`field("${e.insert.formula_variable.label}")`:e.insert).join("");return{html:this.quill.getSemanticHTML(e),text:t}},this.keyboard=this.quill.getModule("keyboard");const e={shortKey:null,shiftKey:null,altKey:null,handler:()=>!1};this.addKeyBinding(Object.assign(Object.assign({},e),{key:Q.c.ENTER})),this.addKeyBinding(Object.assign(Object.assign({},e),{key:Q.a.ARROW_UP})),this.addKeyBinding(Object.assign(Object.assign({},e),{key:Q.a.ARROW_DOWN})),this.quill.on("text-change",()=>{this.replaceFomulaTextIntoFomula()||this.formulaUpdated()}),this.setContents(),setTimeout(()=>{this.quill.focus(),this.quill.setSelection(this.quill.getLength()-1)})}addKeyBinding(e){this.keyboard.bindings[e.key]||(this.keyboard.bindings[e.key]=[]),this.keyboard.bindings[e.key].unshift(e)}replaceFomulaTextIntoFomula(){const e=/field\("(.*?)"\)/;let t=!1;const i=this.quill.getContents().reduce((i,o)=>{if("string"==typeof o.insert){const n=o.insert;if(e.test(n)){const[s,c]=n.match(e),a=this.variables.find(e=>e.label===c);if(a){const[e,o]=n.split(s);i.retain(e.length).delete(s.length).insert({formula_variable:{label:c,variableId:a.id,unknown:!1}}).retain(o.length),t=!0}else i.retain(K.a.Op.length(o))}else i.retain(K.a.Op.length(o))}else i.retain(K.a.Op.length(o));return i},new K.a);return t&&this.quill.updateContents(i,K.b.sources.USER),t}formulaUpdated(){let e=!0;const t=this.quill.getContents().ops.map(t=>"string"==typeof t.insert?t.insert:t.insert.formula_variable?(this.variables.find(e=>e.id===t.insert.formula_variable.variableId)||(e=!1),t.insert.formula_variable.variableId):void 0).join("").trim(),i=t.replace(/{cf_([\w-]+)}/g," 1 ");Object(q.b)(this.variables.map(e=>Object.assign(Object.assign({},e),{value:"date"!==e.type||e.value?e.value:new Date}))).then(t=>{this.isValidChanged.emit({formula:!t.parse(i).error,variables:e})}),this.formulaChange.emit(t),this.quill.hasFocus()&&this.search.emit(this.getSearchText())}insertOperator(e,t){this.insert(e.name+"(",t)}insertVariable(e,t){this.insert({formula_variable:{label:e.label,variableId:e.id,unknown:!1}},t)}insert(e,t){const i=this.quill.getSelection(!0).index;this.quill.updateContents((new K.a).retain(i).insert(e)),t&&this.quill.deleteText(i-t.length,t.length),this.quill.setSelection(i+("string"==typeof e?e.length:1)-(t?t.length:0))}setContents(){if(this.quill&&this.variables&&this.formula){const e=[],t=[...this.variables.filter(e=>!e.customField).map(e=>Object(Z.a)(e.id))],i=new RegExp(`(${t.join("|")}|{cf_[\\w-]+}|CUSTOM_FIELD_[\\w_]+)`,"g");let o,n=0;for(;null!=(o=i.exec(this.formula));){const t=this.formula.slice(n,o.index);e.push({insert:t});const i=Object(q.c)(o[1]),s=this.variables.find(e=>e.id===i);e.push({insert:{formula_variable:{label:s?s.label:$localize`:@@cu-formula-field-text-editor__unknown-var:Unknown variable`,variableId:i,unknown:!s}}}),n=o.index+o[0].toString().length}const s=this.formula.slice(n,this.formula.length);e.push({insert:s}),this.quill.setContents(e)}}getSearchText(){if(this.quill.hasFocus()){const e=this.quill.getSelection().index,t=this.quill.getText().replace(/\n$/,"");let i=this.getIndex(e)-1,o="";for(;i>=0&&t[i]&&t[i].match(/\w/);)o=t[i]+o,i--;return o}}getIndex(e){const t=this.quill.getText().replace(/\n$/,"");return Math.min(e,t.length)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-formula-field-text-editor"]],viewQuery:function(e,t){if(1&e&&o.jd(Y,1),2&e){let e;o.Qc(e=o.rc())&&(t.element=e.first)}},hostAttrs:[1,"cu-formula-field-text-editor"],inputs:{formula:"formula",variables:"variables"},outputs:{isValidChanged:"isValidChanged",search:"search",formulaChange:"formulaChange"},features:[o.Gb],decls:2,vars:0,consts:[[1,"cu-formula-field-text-editor__input"],["element",""]],template:function(e,t){1&e&&o.Xb(0,"div",0,1)},styles:[".cu-formula-field-text-editor{flex-grow:1;min-height:40px;max-height:150px;overflow-y:auto;margin-right:5px;background:#fff}.cu-os-win .cu-formula-field-text-editor{scrollbar-width:thin}.cu-os-win .cu-formula-field-text-editor::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-formula-field-text-editor::-webkit-scrollbar-track,.cu-os-win .cu-formula-field-text-editor::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-formula-field-text-editor::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-formula-field-text-editor::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-formula-field-text-editor::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-formula-field-text-editor::-webkit-scrollbar,.cu-os-win .dark-theme .cu-formula-field-text-editor::-webkit-scrollbar,.cu-os-win.dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-formula-field-text-editor::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .cu-formula-field-text-editor{background:#384047}.cu-formula-field-text-editor__input{height:100%;padding:9px 12px;font:400 13px/1.3 monospace;cursor:text;word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;color:#292d34;border:0!important}.dark-theme .cu-formula-field-text-editor__input{color:#d5d6d7}.cu-formula-field-text-editor__input .ql-editor{text-align:left;direction:ltr;padding:0!important}.cu-formula-field-text-editor__input .ql-editor.ql-blank:before{color:#292d34!important;opacity:.4}.dark-theme .cu-formula-field-text-editor__input .ql-editor.ql-blank:before{color:#828588!important;opacity:1}.cu-formula-field-text-editor__variable{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-formula-field-text-editor__variable{color:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),e})();var ee=i("l7P3"),te=i("O5gs"),ie=i("OBnU"),oe=i("0Dyw"),ne=i("FrPa"),se=i("oV/j");const ce=["formulaDropdown"],ae=["customFieldDropdownListValue"],re=function(e,t){return{useRollups:e,team:t}};function le(e,t){if(1&e&&(o.Xb(0,"div",7),o.vc(1,"trustHTML"),o.vc(2,"async"),o.vc(3,"customFieldValue")),2&e){const e=o.uc();o.Dc("innerHTML",o.wc(1,1,o.wc(2,3,o.zc(3,5,e.fieldValue,e.field,e.adjustedTask,o.Ic(10,re,e.useRollups,e.team)))),o.Vc)}}function de(e,t){1&e&&o.Xb(0,"div",8)}function ue(e,t){1&e&&(o.ac(0),o.gc(1,30),o.Zb())}function me(e,t){1&e&&(o.ac(0),o.gc(1,31),o.Zb())}function pe(e,t){if(1&e&&(o.cc(0,"div",27),o.bd(1,ue,2,0,"ng-container",28),o.bd(2,me,2,0,"ng-template",null,29,o.cd),o.bc()),2&e){const e=o.Rc(3),t=o.uc(3);o.Ib(1),o.Dc("ngIf",!(null!=t.field.type_config&&t.field.type_config.formula&&null!=t.field.type_config&&t.field.type_config.simple))("ngIfElse",e)}}function he(e,t){if(1&e&&o.Xb(0,"cu-custom-field-icon",33),2&e){const e=o.uc(4);o.Dc("field",e.simpleFormula.left.customField)}}function fe(e,t){if(1&e&&(o.ac(0),o.bd(1,he,1,1,"cu-custom-field-icon",32),o.cc(2,"div",27),o.dd(3),o.bc(),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.Dc("ngIf",e.simpleFormula.left.customField),o.Ib(2),o.fd(" ",e.simpleFormula.left.label," ")}}function be(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",34),o.qc("click",function(){return o.Uc(e),o.uc(3).setFormulaOperator("+")}),o.bc(),o.cc(2,"div",35),o.qc("click",function(){return o.Uc(e),o.uc(3).setFormulaOperator("-")}),o.bc(),o.cc(3,"div",36),o.qc("click",function(){return o.Uc(e),o.uc(3).setFormulaOperator("*")}),o.bc(),o.cc(4,"div",37),o.qc("click",function(){return o.Uc(e),o.uc(3).setFormulaOperator("/")}),o.bc(),o.bc()}}function ge(e,t){1&e&&(o.ac(0),o.gc(1,38),o.Zb())}function _e(e,t){1&e&&(o.ac(0),o.gc(1,39),o.Zb())}function ve(e,t){if(1&e&&(o.cc(0,"div",27),o.bd(1,ge,2,0,"ng-container",28),o.bd(2,_e,2,0,"ng-template",null,29,o.cd),o.bc()),2&e){const e=o.Rc(3),t=o.uc(3);o.Ib(1),o.Dc("ngIf",!(null!=t.field.type_config&&t.field.type_config.formula&&null!=t.field.type_config&&t.field.type_config.simple))("ngIfElse",e)}}function ke(e,t){if(1&e&&o.Xb(0,"cu-custom-field-icon",33),2&e){const e=o.uc(4);o.Dc("field",e.simpleFormula.right.customField)}}function ye(e,t){if(1&e&&(o.ac(0),o.bd(1,ke,1,1,"cu-custom-field-icon",32),o.cc(2,"div",27),o.dd(3),o.bc(),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.Dc("ngIf",e.simpleFormula.right.customField),o.Ib(2),o.fd(" ",e.simpleFormula.right.label," ")}}function we(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.cc(1,"div",12),o.cc(2,"cu-dropdown-list",13),o.qc("onSelect",function(t){return o.Uc(e),o.uc(2).setFormulaLeft(t.customPayload)}),o.cc(3,"div",14),o.bd(4,pe,4,2,"div",15),o.bd(5,fe,4,2,"ng-container",16),o.Xb(6,"div",17),o.bc(),o.bc(),o.cc(7,"div",18),o.cc(8,"div",2),o.Xb(9,"div",19),o.bc(),o.bd(10,be,5,0,"div",5),o.bc(),o.cc(11,"cu-dropdown-list",13),o.qc("onSelect",function(t){return o.Uc(e),o.uc(2).setFormulaRight(t.customPayload)}),o.cc(12,"div",14),o.bd(13,ve,4,2,"div",15),o.bd(14,ye,4,2,"ng-container",16),o.Xb(15,"div",17),o.bc(),o.bc(),o.bc(),o.cc(16,"div",12),o.cc(17,"div",20),o.cc(18,"cu-toggle-switch",21),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).toggleAdvancedFormula(t)}),o.bc(),o.ac(19),o.gc(20,22),o.Zb(),o.bc(),o.cc(21,"button",23),o.qc("click",function(){return o.Uc(e),o.uc(2),o.Rc(1).close()}),o.gc(22,24),o.bc(),o.cc(23,"button",25),o.qc("click",function(){return o.Uc(e),o.uc(2).saveSimpleFormula()}),o.gc(24,26),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(2),o.Dc("items",e.formulaFieldMenuItems),o.Ib(2),o.Dc("ngIf",!e.simpleFormula.left),o.Ib(1),o.Dc("ngIf",e.simpleFormula.left),o.Ib(4),o.Mb("cu-custom-field-type-formula__simple-operator-item cu-custom-field-type-formula__simple-operator-item_",e.simpleOperatorIcons[e.simpleFormula.operator],""),o.Dc("icon","field-formula-"+e.simpleOperatorIcons[e.simpleFormula.operator]),o.Ib(2),o.Dc("items",e.formulaFieldMenuItems),o.Ib(2),o.Dc("ngIf",!e.simpleFormula.right),o.Ib(1),o.Dc("ngIf",e.simpleFormula.right),o.Ib(4),o.Dc("updateImmediately",!1)("checked",e.advancedFormula.visible),o.Ib(5),o.Dc("disabled",!e.simpleFormula.left||!e.simpleFormula.right||!e.simpleFormula.operator)}}function xe(e,t){if(1&e&&(o.cc(0,"div",58),o.dd(1," \ufe0f "),o.bc()),2&e){const e=o.uc(3);o.Dc("cuTooltip",e.advancedFormula.isValid.formula?e.fieldsNotExistingText:e.invalidFormulaText)}}function Ie(e,t){if(1&e&&o.Xb(0,"cu-custom-field-icon",33),2&e){const e=o.uc().$implicit;o.Dc("field",e.customField)}}function Te(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",59),o.qc("mouseenter",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).setHoveredVariable(i)})("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).addFieldToFormula(i)}),o.bd(2,Ie,1,1,"cu-custom-field-icon",32),o.cc(3,"div",60),o.dd(4),o.bc(),o.bc(),o.Zb()}if(2&e){const e=t.$implicit,i=o.uc(3);o.Ib(1),o.Ob("cu-custom-field-type-formula__advanced-sidebar-item_selected",(null==i.hoveredFormulaItem||null==i.hoveredFormulaItem.variable?null:i.hoveredFormulaItem.variable.id)===e.id),o.Ib(1),o.Dc("ngIf",e.customField),o.Ib(2),o.fd(" ",e.label," ")}}function Ce(e,t){if(1&e){const e=o.dc();o.cc(0,"div",61),o.qc("mouseover",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).setHoveredOperator(i)})("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).addOperatorToFormula(i)}),o.cc(1,"div",60),o.dd(2),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(3);o.Ob("cu-custom-field-type-formula__advanced-sidebar-item_selected",(null==i.hoveredFormulaItem||null==i.hoveredFormulaItem.operator?null:i.hoveredFormulaItem.operator.name)===e.name),o.Ib(2),o.fd(" ",e.name," ")}}function De(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",64),o.gc(2,66),o.bc(),o.cc(3,"pre"),o.cc(4,"code"),o.dd(5),o.bc(),o.bc(),o.cc(6,"div",64),o.gc(7,67),o.bc(),o.cc(8,"pre"),o.cc(9,"code"),o.dd(10),o.bc(),o.bc(),o.Zb()),2&e){const e=o.uc(4);o.Ib(5),o.ed(null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator.sampleUsage[0].example),o.Ib(5),o.ed(null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator.sampleUsage[0].result)}}function Oe(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",62),o.dd(2),o.bc(),o.cc(3,"div",63),o.dd(4),o.bc(),o.cc(5,"div",64),o.gc(6,65),o.bc(),o.cc(7,"pre"),o.cc(8,"code"),o.dd(9),o.bc(),o.bc(),o.bd(10,De,11,2,"ng-container",16),o.Zb()),2&e){const e=o.uc(3);o.Ib(2),o.fd(" ",null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator.name," "),o.Ib(2),o.fd(" ",null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator.description," "),o.Ib(5),o.ed(null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator.syntax),o.Ib(1),o.Dc("ngIf",(null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator.sampleUsage.length)>0)}}function Se(e,t){1&e&&(o.mc(0,68,1),o.Yb(1),o.jc())}function Ee(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",62),o.dd(2),o.bc(),o.cc(3,"div",63),o.mc(4,68),o.bd(5,Se,2,0,"ng-container",16),o.jc(),o.bc(),o.cc(6,"div",64),o.gc(7,69),o.bc(),o.cc(8,"pre"),o.cc(9,"code"),o.dd(10),o.bc(),o.bc(),o.cc(11,"div",64),o.gc(12,70),o.bc(),o.cc(13,"pre"),o.cc(14,"code"),o.dd(15),o.bc(),o.bc(),o.Zb()),2&e){const e=o.uc(3);o.Ib(2),o.fd(" ",null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.variable.label," "),o.Ib(3),o.Dc("ngIf",null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.variable.customField),o.kc(null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.variable.label),o.hc(4),o.Ib(5),o.fd('field("',null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.variable.label,'")'),o.Ib(5),o.fd('field("',null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.variable.label,'") = 42')}}function Pe(e,t){1&e&&(o.ac(0),o.gc(1,73),o.Zb())}function je(e,t){1&e&&(o.ac(0),o.gc(1,74),o.Zb())}function Ae(e,t){if(1&e&&(o.cc(0,"div",71),o.bd(1,Pe,2,0,"ng-container",28),o.bd(2,je,2,0,"ng-template",null,72,o.cd),o.bc()),2&e){const e=o.Rc(3),t=o.uc(3);o.Ib(1),o.Dc("ngIf",!t.advancedFormula.isValid.formula)("ngIfElse",e)}}const $e=function(e){return{"cu-custom-field-type-formula__advanced_invalid":e}};function Ue(e,t){if(1&e){const e=o.dc();o.cc(0,"div",40),o.qc("keyup.ArrowUp",function(){return o.Uc(e),o.uc(2).arrowKeyPressed(-1)})("keyup.ArrowDown",function(){return o.Uc(e),o.uc(2).arrowKeyPressed(1)})("keyup.Enter",function(t){return o.Uc(e),o.uc(2).enterKeyPressed(t)}),o.cc(1,"div",41),o.bd(2,xe,2,1,"div",42),o.cc(3,"cu-formula-field-text-editor",43),o.qc("formulaChange",function(t){return o.Uc(e),o.uc(2).advancedFormula.newValue=t})("isValidChanged",function(t){return o.Uc(e),o.uc(2).advancedFormula.isValid=t})("search",function(t){return o.Uc(e),o.uc(2).searchFormula(t)}),o.bc(),o.cc(4,"button",44),o.qc("click",function(){o.Uc(e);const t=o.uc(2);return t.saveFormula(t.advancedFormula.newValue,!1)}),o.gc(5,45),o.bc(),o.bc(),o.cc(6,"div",46),o.cc(7,"div",47),o.cc(8,"div",48),o.cc(9,"div",49),o.gc(10,50),o.bc(),o.bd(11,Te,5,4,"ng-container",51),o.vc(12,"async"),o.cc(13,"div",49),o.gc(14,52),o.bc(),o.bd(15,Ce,3,3,"div",53),o.vc(16,"async"),o.bc(),o.cc(17,"div",54),o.cc(18,"cu-toggle-switch",21),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).toggleAdvancedFormula(t)}),o.bc(),o.ac(19),o.gc(20,55),o.Zb(),o.bc(),o.bc(),o.cc(21,"div",56),o.bd(22,Oe,11,4,"ng-container",16),o.bd(23,Ee,16,5,"ng-container",16),o.bc(),o.bc(),o.bd(24,Ae,4,2,"div",57),o.bc()}if(2&e){const e=o.uc(2);o.Dc("ngClass",o.Hc(18,$e,!e.advancedFormula.isValid.formula||!e.advancedFormula.isValid.variables)),o.Ib(2),o.Dc("ngIf",!e.advancedFormula.isValid.formula||!e.advancedFormula.isValid.variables),o.Ib(1),o.Dc("formula",e.advancedFormula.formula)("variables",e.formulaFieldVariables),o.Ib(1),o.Dc("disabled",!e.advancedFormula.newValue||!e.advancedFormula.isValid.formula),o.Ib(7),o.Dc("ngForOf",o.wc(12,14,e.filteredFormulaFieldVariables$))("ngForTrackBy",e.trackById),o.Ib(4),o.Dc("ngForOf",o.wc(16,16,e.operatorList$))("ngForTrackBy",e.trackByName),o.Ib(3),o.Dc("updateImmediately",!1)("checked",e.advancedFormula.visible),o.Ib(4),o.Dc("ngIf",null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.operator),o.Ib(1),o.Dc("ngIf",null==e.hoveredFormulaItem?null:e.hoveredFormulaItem.variable),o.Ib(1),o.Dc("ngIf",!e.advancedFormula.isValid.formula||!e.advancedFormula.isValid.variables)}}function Re(e,t){if(1&e&&(o.cc(0,"div"),o.bd(1,we,25,13,"div",9),o.bd(2,Ue,25,20,"div",10),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",!e.advancedFormula.visible),o.Ib(1),o.Dc("ngIf",e.advancedFormula.visible)}}function Me(e,t){if(1&e&&o.Xb(0,"cu-custom-field-icon",33),2&e){const e=o.uc().item;o.Dc("field",e.customPayload.customField)}}function Fe(e,t){if(1&e&&(o.bd(0,Me,1,1,"cu-custom-field-icon",32),o.cc(1,"div",75),o.dd(2),o.bc()),2&e){const e=t.item;o.Dc("ngIf",e.customPayload.customField),o.Ib(1),o.Dc("cuTooltip",e.customPayload.label)("tooltipDisabledIfTextNotTruncated",!0)("tooltipDelay",300),o.Ib(1),o.fd(" ",e.customPayload.label," ")}}let Le=(()=>{class e{constructor(e,t){this.store=e,this.cdr=t,this.forTableView=!1,this.forViewTask=!1,this.fieldValueChange=new o.o,this.dropdownOpen=new o.o,this.dropdownClose=new o.o,this.simpleFormula={operator:"+"},this.advancedFormula={visible:!1,formula:"",isValid:{formula:!0,variables:!0}},this.formulaFieldMenuItems=[],this.formulaFieldVariables=[],this.trackByValue=s.f,this.formulaSearch$=new G.a(""),this.filteredFormulaFieldVariables$=this.formulaSearch$.pipe(Object(B.a)(e=>this.formulaFieldVariables.filter(t=>Object(W.a)(t.label,e)))),this.operatorList$=Object(V.a)([this.formulaSearch$,q.d]).pipe(Object(B.a)(([e,t])=>t.filter(t=>Object(W.a)(t.name,e)))),this.simpleOperatorIcons={"+":"addition","-":"subtraction","*":"multiply","/":"division"},this.trackByName=Object(s.d)("name"),this.trackById=Object(s.d)("id"),this.fieldsNotExistingText=$localize`:@@cu-custom-field-type-formula__tooltip-msg_fields-not-existing:One or more fields don't exist anymore`,this.invalidFormulaText=$localize`:@@cu-custom-field-type-formula__tooltip-msg_invalid-formula:The formula is invalid`}ngOnInit(){}ngAfterViewInit(){this.autoDropdown&&setTimeout(()=>{this.formulaDropdown.open()})}ngOnChanges(e){(e.allCustomFields||e.task)&&this.allCustomFields&&this.task&&(this.adjustedTask=Object.assign(Object.assign({},this.task),{customFields:this.allCustomFields.map(e=>{const t=(this.task.customFields||[]).find(t=>t.id===e.id);return Object.assign(Object.assign({},e),{value:t?t.value:void 0})})}),this.formulaFieldVariables=Object(q.a)(this.adjustedTask,this.team,this.useRollups),this.formulaFieldMenuItems=[{id:"title",title:"Variables",type:H.a.Header},...this.formulaFieldVariables.filter(e=>"number"===e.type).map(e=>({id:e.id,title:e.label,customPayload:e,textTemplate:this.customFieldDropdownListValue}))])}setFormulaLeft(e){this.simpleFormula.left=e}setFormulaRight(e){this.simpleFormula.right=e}setFormulaOperator(e){this.simpleFormula.operator=e}getSimpleFormula(){return this.simpleFormula.left&&this.simpleFormula.right?`${this.simpleFormula.left.id} ${this.simpleFormula.operator} ${this.simpleFormula.right.id}`:""}saveSimpleFormula(){this.saveFormula(this.getSimpleFormula(),!0)}toggleAdvancedFormula(e){if(this.advancedFormula.visible=e,e)this.advancedFormula.formula=this.getSimpleFormula();else{const e=(this.advancedFormula.newValue||this.advancedFormula.formula).trim().split(" "),t=this.formulaFieldMenuItems.find(t=>t.customPayload&&t.customPayload.id===e[0]),i=this.formulaFieldMenuItems.find(t=>t.customPayload&&t.customPayload.id===e[2]);3===e.length&&t&&["+","-","*","/"].includes(e[1])&&i&&(this.simpleFormula.left=t.customPayload,this.simpleFormula.operator=e[1],this.simpleFormula.right=i.customPayload)}}saveFormula(e,t){this.store.dispatch(Object(z.u)({field:this.field,entity:this.field.entity,updates:{type_config:{formula:e,simple:t}},refreshTask:this.forViewTask,task:this.task})),this.formulaDropdown.close()}setHoveredVariable(e){this.hoveredFormulaItem={variable:e}}setHoveredOperator(e){this.hoveredFormulaItem={operator:e}}addFieldToFormula(e){this.formulaTextEditor.insertVariable(e,this.formulaSearch$.value)}addOperatorToFormula(e){this.formulaTextEditor.insertOperator(e,this.formulaSearch$.value)}formulaDropdownOpened(){if(this.formulaFieldMenuItems[1]&&this.setHoveredVariable(this.formulaFieldMenuItems[1].customPayload),this.formulaSearch$.next(""),this.field.type===n.a.Formula){if(this.field.type_config.formula&&this.field.type_config.simple){const e=this.field.type_config.formula.split(" "),t=Object(q.c)(e[0]),i=this.formulaFieldMenuItems.find(e=>e.id===t),o=Object(q.c)(e[2]),n=this.formulaFieldMenuItems.find(e=>e.id===o);this.simpleFormula={left:i&&i.customPayload,operator:e[1],right:n&&n.customPayload}}this.advancedFormula={visible:!1===this.field.type_config.simple,formula:this.field.type_config.formula||"",isValid:{formula:!0,variables:!0}}}}arrowKeyPressed(e,t=!1){(this.hoveredFormulaItem||t)&&Object(V.a)([this.filteredFormulaFieldVariables$,this.operatorList$]).pipe(Object(X.a)(1)).subscribe(([i,o])=>{const n=[...i.map(e=>({type:"variable",variable:e})),...o.map(e=>({type:"operator",operator:e}))],s=n.findIndex(e=>!(!this.hoveredFormulaItem||!this.hoveredFormulaItem.operator||"operator"!==e.type||e.operator.name!==this.hoveredFormulaItem.operator.name)||!(!this.hoveredFormulaItem||!this.hoveredFormulaItem.variable||"variable"!==e.type||e.variable.id!==this.hoveredFormulaItem.variable.id));if((s>-1||t)&&n.length>0){const t=Math.min(n.length,Math.max(0,s+e));"variable"===n[t].type?this.setHoveredVariable(n[t].variable):this.setHoveredOperator(n[t].operator),this.cdr.markForCheck()}})}enterKeyPressed(e){e.preventDefault(),this.hoveredFormulaItem&&(this.hoveredFormulaItem.variable?this.addFieldToFormula(this.hoveredFormulaItem.variable):this.hoveredFormulaItem.operator&&this.addOperatorToFormula(this.hoveredFormulaItem.operator),this.hoveredFormulaItem=null)}searchFormula(e){this.formulaSearch$.next(e),this.arrowKeyPressed(0,!0)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(ee.Store),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-type-formula"]],viewQuery:function(e,t){if(1&e&&(o.jd(ce,1),o.jd(J,1),o.jd(ae,3)),2&e){let e;o.Qc(e=o.rc())&&(t.formulaDropdown=e.first),o.Qc(e=o.rc())&&(t.formulaTextEditor=e.first),o.Qc(e=o.rc())&&(t.customFieldDropdownListValue=e.first)}},hostAttrs:[1,"cu-custom-field-type-formula"],inputs:{field:"field",fieldValue:"fieldValue",readonly:"readonly",task:"task",paywallPopover:"paywallPopover",forBulk:"forBulk",forTableView:"forTableView",forViewTask:"forViewTask",allCustomFields:"allCustomFields",autoDropdown:"autoDropdown",permissions:"permissions",useRollups:"useRollups",team:"team"},outputs:{fieldValueChange:"fieldValueChange",dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose"},features:[o.Gb],decls:9,vars:5,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_;return e=$localize`:@@cu-custom-field-type-formula__form-label_advanced-editor␟1f1c431d99acbf8bb3dab9547897dabdb1a23970␟5598212900454974993:Advanced Editor`,t=$localize`:@@common_cancel␟fb8aad312b72bbb7e5a1e2cc0b55fae8962bf0fb␟8699434297868700883: Cancel `,i=$localize`:@@common_calculate␟0c81b12cda9c6c1f2a2c84ede6c56e6d8f4a2704␟6911579493609063481: Calculate `,o=$localize`:@@custom-fields_dropdown-placeholder--select-field␟66659834c3294f245f752cd73a599ca1c5c593f1␟3508590856369181423: Select field `,n=$localize`:@@cu-custom-field-type-formula__dropdown-placeholder_missing-field␟d915036852f8bccccca628d4efe84a911aa88ed6␟5672867935891361581:Missing field`,s=$localize`:@@custom-fields_dropdown-placeholder--select-field␟66659834c3294f245f752cd73a599ca1c5c593f1␟3508590856369181423: Select field `,c=$localize`:@@cu-custom-field-type-formula__dropdown-placeholder_missing-field␟d915036852f8bccccca628d4efe84a911aa88ed6␟5672867935891361581:Missing field`,a=$localize`:@@common_calculate␟0c81b12cda9c6c1f2a2c84ede6c56e6d8f4a2704␟6911579493609063481: Calculate `,r=$localize`:@@cu-custom-field-type-formula__variables␟a2ced56875641579f710b6664477d51544a2e637␟6325182318007248633: Variables `,l=$localize`:@@cu-custom-field-type-formula__functions␟e021ed3f8cb4091d0b8e99b083f887acc20ed262␟5695049443716370865: Functions `,d=$localize`:@@cu-custom-field-type-formula__form-label_advanced-editor␟1f1c431d99acbf8bb3dab9547897dabdb1a23970␟5598212900454974993:Advanced Editor`,u=$localize`:@@cu-custom-field-type-formula__syntax␟95360c63e560e89522ef55703d5a856e8afa828b␟2932535160812966322: Syntax `,m=$localize`:@@cu-custom-field-type-formula__syntax-example␟0e9e0b9b37445d69601a5ceecbbbe8f24dadd3f8␟431322234004258130: Example `,p=$localize`:@@cu-custom-field-type-formula__syntax-example-result␟7624184fe024589ff88ea2930004716ce673e3cf␟6994760615865293412: Expected result `,h=$localize`:@@cu-custom-field-type-formula__syntax␟95360c63e560e89522ef55703d5a856e8afa828b␟2932535160812966322: Syntax `,f=$localize`:@@cu-custom-field-type-formula__examples␟ca86426fe7dc6005155ffef8d7915de75f7635e0␟8041927938123588914: Examples `,b=$localize`:@@cu-custom-field-type-formula__field-value-for-each-task␟659b57a71527935a398137c3c1889e50b56c152d␟2520114757804167249: Returns the ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:field value${"\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd"}:CLOSE_TAG_NG_CONTAINER: for each task `,g=$localize`:@@cu-custom-field-type-formula__form-error_formula-invalid␟9247805a8f9468b8f45f743d9b40bab593471e90␟390989714951179133:The formula is invalid`,_=$localize`:@@cu-custom-field-type-formula__form-error_fields-not-existing␟ab4990aef793a49782e18e4261423c84aafbbae8␟8684440923835347540:One or more fields don't exist anymore`,[["cuDropdown","",1,"cu-custom-field-type-formula__dropdown",3,"dropdownCloseOnInsideClick","dropdownRepositionFlag","dropdownDisabled","dropdownOpen","dropdownClose"],["formulaDropdown","dropdown"],["cuDropdownToggle",""],["class","cu-custom-field-type-formula__value",3,"innerHTML",4,"ngIf","ngIfElse"],["noConfig",""],[4,"cuDropdownMenu"],["customFieldDropdownListValue",""],[1,"cu-custom-field-type-formula__value",3,"innerHTML"],["icon","field-formula",1,"cu-custom-field-type-formula__fx"],["class","cu-custom-field-type-formula__simple",4,"ngIf"],["class","cu-custom-field-type-formula__advanced",3,"ngClass","keyup.ArrowUp","keyup.ArrowDown","keyup.Enter",4,"ngIf"],[1,"cu-custom-field-type-formula__simple"],[1,"cu-custom-field-type-formula__simple-row"],[3,"items","onSelect"],[1,"cu-custom-field-type-formula__simple-field"],["class","cu-custom-field-type-formula__simple-field-title",4,"ngIf"],[4,"ngIf"],["icon","angle-right-no-padding",1,"cu-custom-field-type-formula__simple-field-arrow"],["cuDropdown","",1,"cu-custom-field-type-formula__simple-operator"],[3,"icon"],[1,"cu-custom-field-type-formula__toggle"],[3,"updateImmediately","checked","onChange"],e,[1,"cu-btn","cu-btn_h-36","cu-btn_light-grey",3,"click"],t,[1,"cu-btn","cu-btn_h-36",3,"disabled","click"],i,[1,"cu-custom-field-type-formula__simple-field-title"],[4,"ngIf","ngIfElse"],["missingField",""],o,n,["modifier","cu-custom-field-type-formula__icon",3,"field",4,"ngIf"],["modifier","cu-custom-field-type-formula__icon",3,"field"],["icon","field-formula-addition",1,"cu-custom-field-type-formula__simple-operator-item","cu-custom-field-type-formula__simple-operator-item_addition",3,"click"],["icon","field-formula-subtraction",1,"cu-custom-field-type-formula__simple-operator-item","cu-custom-field-type-formula__simple-operator-item_subtraction",3,"click"],["icon","field-formula-multiply",1,"cu-custom-field-type-formula__simple-operator-item","cu-custom-field-type-formula__simple-operator-item_multiply",3,"click"],["icon","field-formula-division",1,"cu-custom-field-type-formula__simple-operator-item","cu-custom-field-type-formula__simple-operator-item_division",3,"click"],s,c,[1,"cu-custom-field-type-formula__advanced",3,"ngClass","keyup.ArrowUp","keyup.ArrowDown","keyup.Enter"],[1,"cu-custom-field-type-formula__header"],["icon","exclamation4","class","cu-custom-field-type-formula__header-invalid",3,"cuTooltip",4,"ngIf"],[3,"formula","variables","formulaChange","isValidChanged","search"],[1,"cu-btn","cu-btn_h-23","cu-btn_font-size-12",3,"disabled","click"],a,[1,"cu-custom-field-type-formula__advanced-container"],[1,"cu-custom-field-type-formula__advanced-sidebar"],[1,"cu-custom-field-type-formula__advanced-sidebar-scrollable"],[1,"cu-custom-field-type-formula__advanced-sidebar-header"],r,[4,"ngFor","ngForOf","ngForTrackBy"],l,["class","cu-custom-field-type-formula__advanced-sidebar-item",3,"cu-custom-field-type-formula__advanced-sidebar-item_selected","mouseover","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-custom-field-type-formula__toggle","cu-custom-field-type-formula__toggle_checked"],d,[1,"cu-custom-field-type-formula__advanced-body"],["class","cu-custom-field-type-formula__footer",4,"ngIf"],["icon","exclamation4",1,"cu-custom-field-type-formula__header-invalid",3,"cuTooltip"],[1,"cu-custom-field-type-formula__advanced-sidebar-item",3,"mouseenter","click"],[1,"cu-custom-field-type-formula__advanced-sidebar-item-title"],[1,"cu-custom-field-type-formula__advanced-sidebar-item",3,"mouseover","click"],[1,"cu-custom-field-type-formula__advanced-operator-name"],[1,"cu-custom-field-type-formula__advanced-operator-description"],[1,"cu-custom-field-type-formula__advanced-body-header"],u,m,p,b,h,f,[1,"cu-custom-field-type-formula__footer"],["fieldDontExistAnymoreTmpl",""],g,_,[1,"cu-custom-field-type-formula__title",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipDelay"]]},template:function(e,t){if(1&e&&(o.cc(0,"div",0,1),o.qc("dropdownOpen",function(){return t.formulaDropdownOpened(),t.dropdownOpen.emit()})("dropdownClose",function(){return t.dropdownClose.emit()}),o.cc(2,"div",2),o.bd(3,le,4,13,"div",3),o.bd(4,de,1,0,"ng-template",null,4,o.cd),o.bc(),o.bd(6,Re,3,2,"div",5),o.bc(),o.bd(7,Fe,3,5,"ng-template",null,6,o.cd)),2&e){const e=o.Rc(5);o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRepositionFlag",t.advancedFormula.visible)("dropdownDisabled",!(null!=t.permissions&&t.permissions.manage_custom_fields)||t.readonly),o.Ib(3),o.Dc("ngIf",t.field.type_config.formula)("ngIfElse",e)}},directives:[f.b,_.a,b.q,g.a,k.a,te.a,ie.a,oe.a,b.o,J,b.p,v.a],pipes:[ne.a,b.b,se.c],styles:['.cu-custom-field-type-formula{width:100%}.cu-custom-field-type-formula__dropdown{justify-content:center;height:100%}.cu-custom-field-type-formula__dropdown>.cu-dropdown__toggle{width:100%;height:100%}.cu-custom-field-type-formula__fx{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.cu-custom-field-type-formula__fx:hover svg{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-formula__fx:hover svg{fill:var(--theme-main-color)}}.cu-custom-fields__task-field .cu-custom-field-type-formula__fx{justify-content:flex-start;padding-left:10px}.cu-custom-field-type-formula__fx svg{width:16px;height:16px;fill:#b9bec7}.dark-theme .cu-custom-field-type-formula__fx svg{fill:#979797}.cu-custom-field-type-formula__value{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-custom-field-type-formula__value{color:#abaeb0}.cu-custom-field-type-formula__value:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-formula__value:hover{color:var(--theme-main-color)}}.cu-custom-fields__task-field .cu-custom-field-type-formula__value{justify-content:flex-start;padding-left:10px}.cu-task-row_auto-wrap .cu-custom-field-type-formula__value{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;padding-top:5px;padding-bottom:5px;text-align:center}.cu-custom-field-type-formula__advanced{width:480px;height:370px;display:flex;flex-direction:column}.cu-custom-field-type-formula__advanced_invalid{height:400px}.cu-custom-field-type-formula__advanced_invalid .cu-formula-field-text-editor__input,.cu-custom-field-type-formula__advanced_invalid .cu-formula-field-text-editor__input *{color:#fd7171!important}.cu-custom-field-type-formula__advanced_invalid .cu-custom-field-type-formula__header .cu-btn{background:#fd7171!important;border-color:#fd7171!important}.cu-custom-field-type-formula__advanced-container{display:flex;min-height:0;flex-grow:1}.cu-custom-field-type-formula__advanced-sidebar{display:flex;flex-direction:column;width:168px;flex-shrink:0;border-right:1px solid #e9ebf0}.dark-theme .cu-custom-field-type-formula__advanced-sidebar{border-right-color:#2b343b}.cu-custom-field-type-formula__advanced-sidebar-scrollable{overflow-y:auto;flex-grow:1;padding:0 0 12px;background:#fff}.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable{scrollbar-width:thin}.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-track,.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar,.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .cu-custom-field-type-formula__advanced-sidebar-scrollable{background:#384047}.cu-custom-field-type-formula__advanced-sidebar .cu-custom-field-type-formula__toggle{display:flex;align-items:center;padding:0 12px;height:38px;flex-shrink:0;flex-grow:0;border-top:1px solid #e9ebf0}.dark-theme .cu-custom-field-type-formula__advanced-sidebar .cu-custom-field-type-formula__toggle{border-top-color:#2b343b}.cu-custom-field-type-formula__advanced-sidebar-header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;padding:14px 13px 8px;color:#b9bec7;position:sticky;top:0;z-index:10;background:#fff}.dark-theme .cu-custom-field-type-formula__advanced-sidebar-header{background:#384047}.cu-custom-field-type-formula__advanced-sidebar-item{display:flex;align-items:center;height:24px;padding:0 15px;cursor:pointer;position:relative}.cu-custom-field-type-formula__advanced-sidebar-item_selected:before{content:"";display:block;position:absolute;background:#7b68ee;width:calc(100% - 8px);height:100%;left:4px;border-radius:4px;pointer-events:none}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-formula__advanced-sidebar-item_selected:before{background:var(--theme-main-color)}}.cu-custom-field-type-formula__advanced-sidebar-item_selected .cu-custom-field-type-formula__icon{fill:#fff}.cu-custom-field-type-formula__advanced-sidebar-item_selected .cu-custom-field-type-formula__advanced-sidebar-item-title{color:#fff}.cu-custom-field-type-formula__advanced-sidebar-item-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;position:relative;color:#292d34}.dark-theme .cu-custom-field-type-formula__advanced-sidebar-item-title{color:#d5d6d7}.cu-custom-field-type-formula__advanced-body{padding:20px 15px 15px;overflow-y:auto;flex-grow:1;background:#fafbfc}.cu-os-win .cu-custom-field-type-formula__advanced-body{scrollbar-width:thin}.cu-os-win .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar{background-color:#fafbfc;width:16px;height:16px}.cu-os-win .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-track,.cu-os-win .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-track:hover{background-color:#fafbfc}.cu-os-win .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fafbfc}.cu-os-win .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fafbfc}.cu-os-win .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar,.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-track{background-color:#2b343b}.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-track:hover{background-color:#2b343b}.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-custom-field-type-formula__advanced-body::-webkit-scrollbar-thumb:hover{border-color:#2b343b}.dark-theme .cu-custom-field-type-formula__advanced-body{background:#2b343b}.cu-custom-field-type-formula__advanced-body-header{font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;margin-bottom:7px;color:#7c828d}.dark-theme .cu-custom-field-type-formula__advanced-body-header{color:#828588}.cu-custom-field-type-formula__advanced-body pre{padding:9px 7px;margin:0 0 15px;border-radius:4px;font:400 12px/1.3 monospace;border:1px solid #e9ebf0;background:#fff}.dark-theme .cu-custom-field-type-formula__advanced-body pre{border-color:#384047;background:#1e272e}.cu-custom-field-type-formula__advanced-operator-name{font:600 16px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:10px;color:#292d34}.dark-theme .cu-custom-field-type-formula__advanced-operator-name{color:#d5d6d7}.cu-custom-field-type-formula__advanced-operator-description{font:400 12px/16px Gotham Pro,Proxima Nova,arial,serif;margin-bottom:15px;color:#292d34}.dark-theme .cu-custom-field-type-formula__advanced-operator-description{color:#d5d6d7}.cu-custom-field-type-formula__simple{width:390px;padding:15px}.cu-custom-field-type-formula__simple-warning{display:flex;align-items:center;margin-bottom:10px}.cu-custom-field-type-formula__simple-warning-icon{width:16px;height:16px;fill:#fd7171;margin-right:5px}.cu-custom-field-type-formula__simple-warning-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#fd7171;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-custom-field-type-formula__simple-row{display:flex;align-items:center}.cu-custom-field-type-formula__simple-row+.cu-custom-field-type-formula__simple-row{margin-top:15px}.cu-custom-field-type-formula__simple-row .cu-btn+.cu-btn{margin-left:12px}.cu-custom-field-type-formula__simple-field{transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:160px;height:36px;display:flex;align-items:center;padding:0 10px;border-radius:3px;border:1px solid #e9ebf0}.dark-theme .cu-custom-field-type-formula__simple-field{border-color:#828588}.cu-custom-field-type-formula__simple-field:hover,.cu-custom-field-type-formula__simple-row .cu-dropdown_open .cu-custom-field-type-formula__simple-field{border-color:#b9bec7}.dark-theme .cu-custom-field-type-formula__simple-field:hover,.dark-theme .cu-custom-field-type-formula__simple-row .cu-dropdown_open .cu-custom-field-type-formula__simple-field{border-color:#abaeb0}.cu-custom-field-type-formula__simple-field-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;flex-grow:1;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-custom-field-type-formula__simple-field-title{color:#d5d6d7}.cu-custom-field-type-formula__simple-field-arrow{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:8px;height:8px;transform:rotate(90deg);fill:#7c828d}.cu-custom-field-type-formula__simple-row .cu-dropdown_open .cu-custom-field-type-formula__simple-field-arrow{transform:rotate(270deg)}.cu-custom-field-type-formula__simple-operator{display:flex;align-items:center;justify-content:center;flex-grow:1}.cu-custom-field-type-formula__simple-operator-item{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:7px;fill:#fff;cursor:pointer;margin:4px 8px;padding:6px}.cu-custom-field-type-formula__simple-operator-item:first-child{margin-top:8px}.cu-custom-field-type-formula__simple-operator-item:last-child{margin-bottom:8px}.cu-custom-field-type-formula__simple-operator-item_addition{background:#6bc950}.cu-custom-field-type-formula__simple-operator-item_subtraction{background:#fd7171}.cu-custom-field-type-formula__simple-operator-item_multiply{padding:7px;background:#ffc800}.cu-custom-field-type-formula__simple-operator-item_division{background:#49ccf9}.cu-custom-field-type-formula__toggle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;flex-grow:1;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#b9bec7}.cu-custom-field-type-formula__toggle_checked{color:#292d34}.dark-theme .cu-custom-field-type-formula__toggle_checked{color:#d5d6d7}.cu-custom-field-type-formula__toggle cu-toggle-switch{display:flex;margin-right:8px}.cu-custom-field-type-formula__header{display:flex;align-items:center;min-height:36px;padding:0 6px 0 0;flex-shrink:0;border-bottom:1px solid #e9ebf0}.dark-theme .cu-custom-field-type-formula__header{border-bottom-color:#2b343b}.cu-custom-field-type-formula__header-invalid{margin:0 -5px 0 8px;width:16px;height:16px;fill:#fd7171;z-index:1}.cu-custom-field-type-formula__footer{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;height:30px;padding:0 12px;flex-shrink:0;border-top:1px solid #e9ebf0;color:#fd7171;border-radius:0 0 6px 6px;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;background:#fff}.dark-theme .cu-custom-field-type-formula__footer{background:#384047;border-top-color:#2b343b}.cu-custom-field-type-formula__icon{width:16px;height:16px;margin-right:12px;position:relative;font:500 11px/17px Gotham Pro,Proxima Nova,arial,serif;fill:#292d34;color:#292d34}.dark-theme .cu-custom-field-type-formula__icon{fill:#d5d6d7;color:#d5d6d7}.cu-custom-field-type-formula__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;flex-grow:1;color:#292d34;position:relative;min-width:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-type-formula__title{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field-type-formula__title{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})();var Ne=i("Yjgh"),ze=i("VlEK"),qe=i("3Pt+"),Ge=i("Dvla");const Ve=["locationPaywallPopover"];function Be(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.fd(" ",null==e.fieldValue?null:e.fieldValue.formatted_address,"\n")}}function Xe(e,t){if(1&e&&(o.cc(0,"div",6),o.qc("click",function(e){return e.stopPropagation()}),o.bc()),2&e){const e=o.uc(2);o.Dc("cbContent",null==e.fieldValue?null:e.fieldValue.formatted_address)}}function He(e,t){if(1&e){const e=o.dc();o.cc(0,"div",2,3),o.cc(2,"cu-location-input",4),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().valueChange(t)}),o.bc(),o.bd(3,Xe,1,1,"div",5),o.bc()}if(2&e){const e=o.uc();o.Dc("popover",e.paywallPopover),o.Ib(2),o.Dc("ngModel",e.fieldValue),o.Ib(1),o.Dc("ngIf",null==e.fieldValue?null:e.fieldValue.formatted_address)}}let We=(()=>{class e{constructor(){this.forTableView=!1,this.permanentAttachments=!1,this.fieldValueChange=new o.o,this.dropdownOpen=new o.o,this.dropdownClose=new o.o}ngOnInit(){}ngOnChanges(e){}ngOnDestroy(){}valueChange(e,t=!0){this.fieldValueChange.emit(e&&e.geometry?{value:{formatted_address:e.formatted_address,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},place_id:e.place_id},paywallPopover:this.locationPaywallPopover}:{value:null,paywallPopover:this.locationPaywallPopover})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-type-location"]],viewQuery:function(e,t){if(1&e&&o.jd(Ve,1),2&e){let e;o.Qc(e=o.rc())&&(t.locationPaywallPopover=e.first)}},hostAttrs:[1,"cu-custom-field-type-location"],inputs:{component:"component",field:"field",fieldValue:"fieldValue",readonly:"readonly",task:"task",forBulk:"forBulk",forTableView:"forTableView",permanentAttachments:"permanentAttachments",allCustomFields:"allCustomFields",autoDropdown:"autoDropdown",permissions:"permissions",paywallPopover:"paywallPopover",useRollups:"useRollups",forViewTask:"forViewTask",team:"team"},outputs:{fieldValueChange:"fieldValueChange",dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose"},features:[o.Gb],decls:3,vars:2,consts:function(){let e;return e=$localize`:@@cu-custom-field-type-location__tooltip-msg_copy-address␟418d352fdebc63b83166eb130c36f88a85b75cb1␟1556365549219372907:Copy Address`,[[4,"ngIf","ngIfElse"],["inputValue",""],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",1,"cu-custom-field-type-location__inner",3,"popover"],["locationPaywallPopover","bs-popover"],["placeholder","-",3,"ngModel","ngModelChange"],["class","cu-custom-field-type-location__copy","icon","copy","ngxClipboard","","cuTooltip",e,3,"cbContent","click",4,"ngIf"],["icon","copy","ngxClipboard","","cuTooltip",e,1,"cu-custom-field-type-location__copy",3,"cbContent","click"]]},template:function(e,t){if(1&e&&(o.bd(0,Be,2,1,"ng-container",0),o.bd(1,He,4,3,"ng-template",null,1,o.cd)),2&e){const e=o.Rc(2);o.Dc("ngIf",t.readonly)("ngIfElse",e)}},directives:[b.q,w.c,ze.a,qe.p,qe.s,k.a,Ge.a,v.a],styles:[".cu-custom-field-type-location{display:block;width:100%;height:100%}.cu-custom-field-type-location__inner{display:flex;align-items:center;min-height:30px;border:1px solid transparent}.cu-custom-field-type-location__inner:hover{border-color:#e4e4e4}.dark-theme .cu-custom-field-type-location__inner:hover{border-color:#1e272e}.cu-custom-field-type-location__inner:hover .cu-custom-field-type-location__copy{display:block}.cu-custom-field-type-location__copy{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:none;position:absolute;right:7px;width:20px;height:20px;z-index:1;cursor:pointer;background:#67cb48;fill:#fff;border-radius:3px;padding:2px;top:50%;transform:translateY(-50%)}.cu-custom-field-type-location__copy:hover{background:#4ea242}.cu-custom-field-type-location__copy:active{transform:scale(.9)}"],encapsulation:2,changeDetection:0}),e})();var Ke=i("Ox28");function Qe(e,t){1&e&&o.Yb(0)}const Ze={[n.a.Attachment]:N,[n.a.Formula]:Le,[n.a.Tasks]:Ne.a,[n.a.ListRelationship]:Ne.a,[n.a.Location]:We};let Ye=(()=>{class e{constructor(){this.fieldValueChange=new o.o,this.dropdownOpen=new o.o,this.dropdownClose=new o.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-type"]],hostAttrs:[1,"cu-custom-field-type"],inputs:{component:"component",field:"field",fieldValue:"fieldValue",readonly:"readonly",task:"task",forBulk:"forBulk",forTableView:"forTableView",permanentAttachments:"permanentAttachments",allCustomFields:"allCustomFields",autoDropdown:"autoDropdown",permissions:"permissions",paywallPopover:"paywallPopover",useRollups:"useRollups",forViewTask:"forViewTask",forTaskCustomFields:"forTaskCustomFields",team:"team",placeholder:"placeholder"},outputs:{fieldValueChange:"fieldValueChange",dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose"},decls:1,vars:1,consts:[[4,"ngxComponentOutlet"]],template:function(e,t){1&e&&o.bd(0,Qe,1,0,"ng-container",0),2&e&&o.Dc("ngxComponentOutlet",t.component)},directives:[Ke.a],styles:[".cu-custom-field-type{display:flex;max-width:100%;width:100%}"],encapsulation:2,changeDetection:0}),e})()},"4XV2":function(e,t,i){"use strict";i.d(t,"c",function(){return E}),i.d(t,"a",function(){return X}),i.d(t,"b",function(){return Z});var o=i("s3LH"),n=i("/qOb"),s=i("Wk/N"),c=i("Xh8f"),a=i("G3A0"),r=i("fywt"),l=i("fshX"),d=Math.max,u=Math.min,m=Object(c.a)(function(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var n=o-1;return void 0!==i&&(n=Object(l.a)(i),n=i<0?d(o+n,0):u(n,o-1)),Object(a.a)(e,Object(r.a)(t,3),n,!0)}),p=i("YfG3"),h=i("7Cbv");o.d.import("blots/block"),o.d.import("blots/container");const f=o.a.AttributeMap;function b(){return"list-"+Math.random().toString(36).slice(2,8)}function g(e){return{key:n.c.ENTER,shiftKey:!0,handler:(t,i)=>{const n=e(),c=(new o.a).retain(t.index).insert("\n",i.format).retain(i.line.length()-i.offset-1).retain(1,Object.assign(Object.assign({},i.formats),{"block-id":"block-"+Object(h.a)()}));n.updateContents(c,s.i.USER),n.setSelection(t.index+1)}}}function _(e,t){return{key:"k",shortKey:!0,handler:(e,i)=>{if(!e||!e.length)return;const o=t().querySelector(".ql-toolbar:not(.cu-rich-editor-toolbar_sticky) .ql-link");o&&o.click()}}}function v(e){return{key:n.c.ENTER,collapsed:!0,format:["banner"],handler:(t,i)=>{const n=e(),[s,c]=n.getLine(t.index),a=new o.a;0===c?(i.format.banner["in-list"]?a.retain(t.index).retain(1,Object.assign(Object.assign({},i.format),{banner:null,indent:i.format.banner["wrapper-indent"],list:Object.assign(Object.assign({},i.format.banner),{list:i.format.banner["in-list"],"in-list":!1,"wrapper-indent":!1})})):a.retain(t.index).retain(1,{banner:null}),n.updateContents(a,o.d.sources.USER),n.setSelection(t.index,o.d.sources.API)):(i.format.banner["in-list"]?a.retain(t.index).insert("\n",i.format).retain(s.length()-c-1).retain(1,Object.assign(Object.assign({},i.format),{banner:null,indent:i.format.banner["wrapper-indent"],list:Object.assign(Object.assign({},i.format.banner),{list:i.format.banner["in-list"],"in-list":!1,"wrapper-indent":!1}),"block-id":"block-"+Object(h.a)()})):a.retain(t.index).insert("\n",i.format).retain(s.length()-c-1).retain(1,Object.assign(Object.assign({},i.format),{banner:null,"block-id":"block-"+Object(h.a)()})),n.updateContents(a,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API)),n.scrollIntoView()}}}function k(e){return{key:n.c.ENTER,collapsed:!0,shiftKey:!0,format:["banner"],handler:(t,i)=>{const n=e(),[s,c]=n.getLine(t.index),a=new o.a;0===c?(i.format.banner["in-list"]?a.retain(t.index).retain(1,Object.assign(Object.assign({},i.format),{banner:null,indent:i.format.banner["wrapper-indent"],list:Object.assign(Object.assign({},i.format.banner),{list:i.format.banner["in-list"],"in-list":!1,"wrapper-indent":!1})})):a.retain(t.index).retain(1,{banner:null}),n.updateContents(a,o.d.sources.USER),n.setSelection(t.index,o.d.sources.API)):(i.format.banner["in-list"]?a.retain(t.index).insert("\n",i.format).retain(s.length()-c-1).retain(1,Object.assign(Object.assign({},i.format),{banner:null,indent:i.format.banner["wrapper-indent"],list:Object.assign(Object.assign({},i.format.banner),{list:i.format.banner["in-list"],"in-list":!1,"wrapper-indent":!1}),"block-id":"block-"+Object(h.a)()})):a.retain(t.index).insert("\n",i.format).retain(s.length()-c-1).retain(1,Object.assign(Object.assign({},i.format),{banner:null,"block-id":"block-"+Object(h.a)()})),n.updateContents(a,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API)),n.scrollIntoView()}}}function y(e,t){return{key:n.c.ENTER,collapsed:!0,format:["blockquote"],handler:(t,i)=>{const n=e(),[s,c]=n.getLine(t.index),a=new o.a;0===c?(i.format.blockquote["in-list"]?a.retain(t.index).retain(1,Object.assign(Object.assign({},i.format),{blockquote:null,indent:i.format.blockquote["wrapper-indent"],list:Object.assign(Object.assign({},i.format.blockquote),{list:i.format.blockquote["in-list"],"in-list":!1,"wrapper-indent":!1})})):a.retain(t.index).retain(1,{blockquote:null}),n.updateContents(a,o.d.sources.USER),n.setSelection(t.index,o.d.sources.API)):(i.format.blockquote["in-list"]?a.retain(t.index).insert("\n",i.format).retain(s.length()-c-1).retain(1,Object.assign(Object.assign({},i.format),{blockquote:null,indent:i.format.blockquote["wrapper-indent"],list:Object.assign(Object.assign({},i.format.blockquote),{list:i.format.blockquote["in-list"],"in-list":!1,"wrapper-indent":!1}),"block-id":"block-"+Object(h.a)()})):a.retain(t.index).insert("\n",i.format).retain(s.length()-c-1).retain(1,Object.assign(Object.assign({},i.format),{blockquote:null,"block-id":"block-"+Object(h.a)()})),n.updateContents(a,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API)),n.scrollIntoView()}}}function w(e,t="blockquote"){return{key:n.c.ENTER,collapsed:!0,shiftKey:!0,format:[t],suffix:/^$/,handler:(i,n)=>{const s=e(),[c,a]=s.getLine(i.index),r=new o.a;0===a?(r.retain(i.index).retain(1,{[t]:null}),s.updateContents(r,o.d.sources.USER),s.setSelection(i.index,o.d.sources.API)):(r.retain(i.index).insert("\n",n.format).retain(c.length()-a-1).retain(1,Object.assign(Object.assign({},n.format),{"block-id":"block-"+Object(h.a)()})),s.updateContents(r,o.d.sources.USER),s.setSelection(i.index+1,o.d.sources.API)),s.scrollIntoView()}}}function x(e,t="blockquote"){return{key:n.c.BACKSPACE,shiftKey:!1,shortKey:!1,collapsed:!0,format:[t],prefix:/^$/,handler:(i,n)=>{const s=e();if(i&&0===i.index&&0===i.length){const[e]=s.getLine(i.index),n=(new o.a).retain(e.length()-1).retain(1,{[t]:!1});s.updateContents(n,o.d.sources.USER)}return!0}}}function I(e,t="blockquote"){return{key:n.c.ESCAPE,collapsed:!0,shiftKey:!1,format:[t],suffix:/^$/,handler:(i,n)=>{const s=e(),[c,a]=s.getLine(i.index),r=(new o.a).retain(i.index).insert("\n",n.format).retain(c.length()-a-1).retain(1,{[t]:null});s.updateContents(r,o.d.sources.USER),s.setSelection(i.index+1,o.d.sources.API),s.scrollIntoView()}}}function T(e){return{key:n.c.BACKSPACE,shiftKey:!1,shortKey:!1,collapsed:!0,format:["code-block"],prefix:/^$/,handler:(t,i)=>{const n=e();if(t&&0===t.index&&0===t.length)if("\n"===i.suffix){const e=(new o.a).retain(1,{"code-block":null}).insert("\n",{"code-block":null});n.updateContents(e,o.d.sources.USER),n.deleteText(0,1,o.d.sources.USER)}else n.format("code-block",null,o.d.sources.USER);return!0}}}function C(e){return{key:n.c.ESCAPE,shiftKey:!1,shortKey:!1,collapsed:!0,format:["code-block"],handler:(t,i)=>{const n=e(),[s,c]=n.getLine(t.index),a=(new o.a).retain(t.index+s.length()-c).insert("\n",{"code-block":null});return n.updateContents(a,o.d.sources.USER),n.setSelection(t.index+s.length()-c,o.d.sources.API),!0}}}function D(e){return{key:n.c.ENTER,shiftKey:null,shortKey:!1,collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:t=>{const i=e(),[n,c]=i.getLine(t.index);let a=2,r=n;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,a-=1,a<=0){const e=(new o.a).retain(t.index+n.length()-c-2).retain(1,{"code-block":null}).delete(1);return i.updateContents(e,s.i.USER),i.setSelection(t.index-1,s.i.SILENT),!1}return!0}}}function O(e){return{key:[n.c.ESCAPE,n.c.TAB],shiftKey:!1,shortKey:!1,collapsed:!0,format:["code"],handler:(t,i)=>{const n=e(),s=(new o.a).retain(t.index).insert(" ",{code:null});return n.updateContents(s,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API),!0}}}function S(e){return{key:" ",prefix:/\s+$/,format:["code"],handler:(t,i)=>{const n=e(),s=(new o.a).retain(t.index).insert(" ",{code:null});return n.updateContents(s,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API),!0}}}function E(e){return{key:n.c.ESCAPE,shiftKey:!1,shortKey:!1,collapsed:!0,handler:(t,i)=>!!(i.format&&Object.keys(i.format).length&&(!i.format||i.format.code||i.format["code-block"]||i.format.blockquote||i.format.banner))||(e(),!1)}}function P(e,t){return{key:n.c.TAB,shiftKey:!t,format:{"code-block":!0},handler:i=>{const n=e(),s=o.d.import("formats/code-block"),c=0===i.length?n.getLines(i.index,1):n.getLines(i);let{index:a,length:r}=i;c.forEach((e,i)=>{t?(e.insertAt(0,s.TAB),0===i?a+=s.TAB.length:r+=s.TAB.length):e.domNode.textContent.startsWith(s.TAB)&&(e.deleteAt(0,s.TAB.length),0===i?a-=s.TAB.length:r-=s.TAB.length)}),n.update(o.d.sources.USER),n.setSelection(a,r,o.d.sources.API)}}}function j(e){return{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(1\.|-|\*|\[ ?\]|\[x\])$/,handler:(t,i)=>{const n=e(),s=i.prefix.length,[c,a]=n.getLine(t.index);if(a>s)return!0;let r;switch(i.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r="ordered"}n.insertText(t.index," ",o.d.sources.USER),n.history.cutoff();const l=(new o.a).retain(t.index-a).delete(s+1).retain(c.length()-2-a).retain(1,{list:r});n.updateContents(l,o.d.sources.USER),n.history.cutoff(),n.setSelection(t.index-s,o.d.sources.API)}}}function A(e){return{key:n.c.ENTER,shiftKey:!0,collapsed:!0,format:["list"],empty:!0,handler:(t,i)=>{const n=e();n.format("list",!1,o.d.sources.USER),i.format.indent&&n.format("indent",!1,o.d.sources.USER)}}}function $(e,t){return{key:n.c.ENTER,collapsed:!0,format:["list"],empty:!0,handler:(i,n)=>{const s=e(),[c]=s.getLine(i.index),a=c.formats();if(a.list&&"none"===a.list.list){let e=c.prev,t=null;for(;e;)if("list"===e.statics.blotName){const i=e.formats();"none"!==i.list.list?(t=i,e=null):e=e.prev}else e=e.prev;if(t){const e=Object.assign(Object.assign({},a),{indent:t.indent||0,list:Object.assign({},a.list,{list:t.list.list})});return s.formatLine(i.index,i.length,e,o.d.sources.USER),!1}}const r={list:!1};if(n.format.indent&&(r.indent=!1),s.formatLine(i.index,i.length,r,o.d.sources.USER),!t())return!0}}}const U=["bold","italic","strike","background","code","comment"];function R(e,t){return{key:n.c.ENTER,shiftKey:null,format:U,handler:(i,n)=>{const s=e();return!t()||(setTimeout(()=>{U.forEach(e=>{n.format[e]&&s.format(e,!1,o.d.sources.USER)})}),!0)}}}function M(e){return{key:"a",shortKey:!0,handler:(t,i)=>(setTimeout(()=>{const t=e(),i=t.theme.tooltip;i&&(i.root.classList.contains("ql-hidden")||(t.scrollingContainer.scrollTop=i.root.offsetTop))},100),!0)}}function F(e){return{key:" ",format:["link"],handler:(t,i)=>(e().format("link",!1,o.d.sources.USER),!0)}}function L(e,t,i){return{key:n.c.TAB,shiftKey:!t,handler:(n,s)=>{const{line:c}=s;if("table-cell-line"===c.statics.blotName)return!0;const a=e(),r=o.d.import("formats/list");if(s.collapsed&&0!==s.offset||!(s.line instanceof r||s.format.blockquote||s.format.banner||s.format.indent||s.format.list)){if(!t)return!0;if(!i||s.format.code)return function(e,t,i){e.history.cutoff();const n=(new o.a).retain(t.index).delete(t.length).insert("\t");return e.updateContents(n,o.d.sources.USER),e.history.cutoff(),e.setSelection(t.index+1,o.d.sources.API),!1}(a,n)}else a.format("indent",t?"+1":"-1",o.d.sources.USER);return!1}}}function N(e){return{key:n.c.BACKSPACE,shiftKey:!1,shortKey:!1,collapsed:!0,format:{},prefix:/^$/,suffix:/^$/,handler:(t,i)=>{const n=e();if(t.index>0&&n.getLength()>t.index+1){const e=n.getContents(t.index-1,1);if(1===e.ops.length&&e.ops[0].insert&&e.ops[0].insert.frame){const e=(new o.a).retain(t.index).delete(1);return n.updateContents(e,s.i.USER),!1}}return!0}}}function z(e){return{key:n.c.BACKSPACE,shiftKey:!1,shortKey:!1,collapsed:!0,format:{},prefix:/^$/,handler:(t,i)=>{const n=e(),[s]=n.getLine(t.index),[c]=n.getLine(t.index-1);if(0===i.offset&&null!=c&&"list"===c.statics.blotName&&"block"===s.statics.blotName){const e=c.getToggleParents().reverse().find(e=>e.isToggleListItem()&&!e.isThisItemExpanded());if(e){const c=e.getToggleListItemChildren().reduce((e,t)=>e+t.length(),0),a=n.getContents(t.index,s.length()),r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(i.prefix)?2:1;if(0===t.index||n.getLength()<=1)return;let l={},d=(new o.a).retain(t.index-c-r).concat(a).delete(1).retain(c).delete(r+s.length()-1);const u=s.formats(),m=n.getFormat(t.index-c-1,1);if(l=f.diff(u,m)||{},Object.keys(l).length>0){const e=(new o.a).retain(t.index-c+s.length()-2).retain(1,l);d=d.compose(e)}return n.updateContents(d,o.d.sources.USER),n.setSelection(t.index-c-r+s.length()-1,o.d.sources.SILENT),!1}}return!0}}}function q(e){return{key:n.c.BACKSPACE,shiftKey:!1,shortKey:!1,collapsed:!0,format:{},prefix:/^$/,handler:(t,i)=>{const o=e();if(t.index>0&&o.getLength()>t.index+1){const e=o.getContents(t.index-1,1);if(1===e.ops.length&&e.ops[0].insert&&e.ops[0].insert.listview)return!1}return!0}}}function G(e){return{key:n.c.BACKSPACE,shiftKey:!1,shortKey:!1,collapsed:!0,format:{},prefix:/^$/,handler:(t,i)=>{const n=e();if(t.index>0&&n.getLength()>t.index+1){const e=n.getContents(t.index-1,1);let i;if(t.index>2&&(i=n.getContents(t.index-2,1)),1===e.ops.length&&"\n"===e.ops[0].insert&&e.ops[0].attributes&&e.ops[0].attributes.header&&(!i||1===i.ops.length&&"\n"===i.ops[0].insert)){const e=(new o.a).retain(t.index-1).delete(1);return n.updateContents(e,s.i.USER),!1}}return!0}}}function V(e){return{key:[n.c.ESCAPE,n.c.TAB],shiftKey:!1,shortKey:!1,collapsed:!0,format:["comment"],handler:(t,i)=>{const n=e(),s=(new o.a).retain(t.index).insert(" ",{comment:null});n.updateContents(s,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API)}}}function B(e,t){return{key:n.c.TAB,format:["blockquote","indent","list"],shiftKey:!t,handler(i,n){const s=e();if(n.collapsed&&0!==n.offset)return!0;if(n.format&&n.format.list&&"none"===n.format.list.list){const e=n.line.getToggleParents(),t=m(e,e=>e.isToggleListItem()),i=t&&t.formats();if((n.format&&n.format.indent||0)-(i&&i.indent||0)<=1)return!1}return n.format&&n.format.list&&"toggled"===n.format.list.list?X(s,t,n):s.format("indent",t?"+1":"-1",o.d.sources.USER),n.format&&n.format.list&&t&&n.line.getToggleParents().forEach(e=>{e.isToggleListItem()&&!e.isThisItemExpanded()&&e.expandItem()}),!1}}}function X(e,t,i){if(!i.format.indent&&!t)return;const n=i.line.getToggleListItemChildren(),c=e.getIndex(i.line),a=n.reduce((e,t)=>e+t.length(),i.line.length()),r=e.getContents(c,a);let l=!1;const d=r.reduce((e,i)=>{if(i.attributes&&i.attributes.list)e.insert(i.insert,Object.assign(Object.assign({},i.attributes),{indent:parseInt(i.attributes.indent||0,10)?parseInt(i.attributes.indent||0,10)+(t?1:-1):t?1:0})),l=l||t&&parseInt(i.attributes.indent||0,10)+1>=9;else if(i.attributes&&(i.attributes.blockquote&&i.attributes.blockquote["in-list"]||i.attributes["code-block"]&&i.attributes["code-block"]["in-list"]||i.attributes.banner&&i.attributes.banner["in-list"])){const o=["blockquote","code-block","banner"].find(e=>i.attributes[e]);e.insert(i.insert,Object.assign(Object.assign({},i.attributes),{[o]:Object.assign(Object.assign({},i.attributes[o]),{"wrapper-indent":parseInt(i.attributes[o]["wrapper-indent"]||0,10)?parseInt(i.attributes[o]["wrapper-indent"]||0,10)+(t?1:-1):t?1:0})})),l=l||t&&parseInt(i.attributes[o]["wrapper-indent"]||0,10)+1>9}else"object"==typeof i.insert&&i.insert.frame&&i.attributes&&i.attributes["in-list"]?(e.insert(i.insert,Object.assign(Object.assign({},i.attributes),{"wrapper-indent":parseInt(i.attributes["wrapper-indent"]||0,10)?parseInt(i.attributes["wrapper-indent"]||0,10)+(t?1:-1):t?1:0})),l=l||t&&parseInt(i.attributes["wrapper-indent"]||0,10)+1>9):e.insert(i.insert,i.attributes);return e},new o.a);if(l)return!1;const u=r.diff(d),m=(new o.a).retain(c).concat(u);e.updateContents(m,s.i.USER)}function H(e){return{key:"Enter",collapsed:!0,format:["list"],handler(t){const i=e(),[n,s]=i.getLine(t.index),c=n.formats();if(!c.list||"checked"!==c.list.list)return!0;{const e=Object(p.a)({},c,{list:Object(p.a)({},c.list,{list:"checked"})}),a=(new o.a).retain(t.index).insert("\n",e).retain(n.length()-s-1).retain(1,{list:Object(p.a)({},c.list,{list:"unchecked"},{"block-id":"block-"+Object(h.a)()})});i.updateContents(a,o.d.sources.USER),i.setSelection(t.index+1,o.d.sources.SILENT),i.scrollIntoView()}}}}function W(e){return{key:"Enter",format:["list"],handler(t){const i=e(),[n]=i.getLine(t.index),[s,c]=i.getLine(t.index+t.length),a=n.formats();if("list"===n.statics.blotName&&n.isToggleListItem())if(n.isThisItemExpanded()){const e=a.indent?a.indent+1:1,n=Object.assign(Object.assign({},a),{indent:e,list:Object.assign({},a.list,{list:"none","toggle-id":b()}),"block-id":"block-"+Object(h.a)()}),r=(new o.a).retain(t.index).delete(t.length).insert("\n",a).retain(s.length()-c-1).retain(1,n);i.updateContents(r,o.d.sources.USER),i.setSelection(t.index+1,o.d.sources.SILENT),i.focus()}else{let e=new o.a;if(n!==s)return!0;{const n=s.getToggleListItemChildren().reduce((e,t)=>e+t.length(),0);e=(new o.a).retain(t.index).delete(t.length).retain(s.length()-c+n).insert("\n",Object.assign({},a,{list:Object.assign({},a.list,{"toggle-id":b()})},{"block-id":"block-"+Object(h.a)()})),i.updateContents(e,o.d.sources.USER),i.setSelection(t.index+n+1,o.d.sources.SILENT),i.scrollIntoView()}}else{if(!a.list||"none"!==a.list.list)return!0;{let e=n.prev,r=null;for(;e;)if("list"===e.statics.blotName){const t=e.formats();"none"!==t.list.list?(r=t,e=null):e=e.prev}else e=e.prev;if(!r)return!0;{const e=Object.assign(Object.assign({},a),{indent:r.indent||0,list:Object.assign({},a.list,{list:r.list.list}),"block-id":"block-"+Object(h.a)()}),n=(new o.a).retain(t.index).delete(t.length).insert("\n",a).retain(s.length()-c-1).retain(1,e);i.updateContents(n,o.d.sources.USER),i.setSelection(t.index+1,o.d.sources.SILENT),i.focus()}}}}}}function K(e,t){return{key:"Enter",shiftKey:!0,format:["list"],handler(i){const n=e(),[s]=n.getLine(i.index),c=s.formats(),[a,r]=n.getLine(i.index+i.length);if("list"===s.statics.blotName&&s.isToggleListItem()){const e=n.getModule("storage");s.isThisItemExpanded()||(s.expandItem(),e&&e.addExpandedToggleList(c.list["toggle-id"]));const t=c.indent?c.indent+1:1,l=Object.assign(Object.assign({},c),{indent:t,list:Object.assign({},c.list,{list:"none"}),"block-id":"block-"+Object(h.a)()}),d=(new o.a).retain(i.index).delete(i.length).insert("\n",c).retain(a.length()-r-1).retain(1,l);n.updateContents(d,o.d.sources.USER),n.setSelection(i.index+1,o.d.sources.SILENT),n.focus()}else{if(!t())return!0;if(!c.list||"none"===c.list.list)return!0;{const e=c.indent?c.indent:0,t=Object.assign(Object.assign({},c),{indent:e,list:Object.assign({},c.list,{list:"none"}),"block-id":"block-"+Object(h.a)()}),s=(new o.a).retain(i.index).delete(i.length).insert("\n",c).retain(a.length()-r-1).retain(1,t);n.updateContents(s,o.d.sources.USER),n.setSelection(i.index+1,o.d.sources.SILENT),n.focus()}}}}}function Q(e){return{key:"ArrowRight",shiftKey:!1,shortKey:!1,collapsed:!0,format:{code:!0},suffix:/^$/,handler(t,i){const n=e();if(i.line&&i.offset===i.line.length()-1){const e=(new o.a).retain(t.index).insert(" ",{code:null});return n.updateContents(e,o.d.sources.USER),n.setSelection(t.index+1,o.d.sources.API),!1}return!0}}}function Z(e,t,i,o){return{"blockquote enter":y(e),"blockquote shift enter":w(e),"blockquote backspace":x(e),"blockquote escape":I(e),"banner enter":v(e),"banner shift enter":k(e),"banner backspace":x(e,"banner"),"banner escape":I(e,"banner"),"code-block backspace":T(e),"code-block escape":C(e),"code-block exit":D(e),"code escape":O(e),"code arrow right":Q(e),"comment escape":V(e),"code space":S(e),"indent code-block":P(e,!0),"outdent code-block":P(e,!1),"list empty shift enter":A(e),"list empty enter":$(e,t),"list enter":W(e),"togglelist enter":{key:"Enter",format:["list"],handler:e=>!0},"none type list enter":{key:"Enter",format:["list"],handler:()=>!0},"togglelist shift enter":{key:"Enter",shiftKey:!0,format:["list"],handler:()=>!0},"list shift enter":K(e,t),"list autofill":j(e),lineBreak:g(e),link:_(0,i),"clear line format":R(e,t),"select all":M(e),"link space":F(e),tab:L(e,!0,o),"outdent list":L(e,!1,o),"empty line backspace":N(e),"listview backspace":q(e),"header backspace":G(e),indent:B(e,!0),outdent:B(e,!1),"collasped togglelist backspace":z(e),"checklist checked enter":H(e)}}},"4bgU":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=function(e){return e.FetchTaskPointsEstimatesData="points-estimates-fetch-task",e.UpdateTaskPointsEstimates="points-estimates-task-update",e.UpdateTaskAssigneePointsEstimates="points-estimates-assignee-task-update",e.UpdateDraftAssigneeData="points-estimates-update-draft-assignee",e}({})},"4f6Q":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("HDdC"),n=i("bdgK");function s(e){return new o.a(t=>{const i=new n.a(e=>{t.next(e)});return Array.isArray(e)||(e=[e]),e.forEach(e=>{i.observe(e)}),()=>{i.disconnect()}})}},"4oww":function(e,t,i){"use strict";i.d(t,"a",function(){return w});var o=i("fXoL"),n=i("jJQC"),s=i("ofXK"),c=i("UdVN"),a=i("gL+T"),r=i("3Pt+"),l=i("HcWw"),d=i("LdyQ"),u=i("MJvn"),m=i("n+1/");const p=["dropdown"];function h(e,t){if(1&e){const e=o.dc();o.cc(0,"div",5),o.qc("click",function(){return o.Uc(e),o.uc().showCustom(!1)}),o.bc()}}function f(e,t){1&e&&o.Xb(0,"span",13)}function b(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).select(i)}),o.dd(1),o.bd(2,f,1,0,"span",12),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(2);o.Ib(1),o.fd(" ",e.label," "),o.Ib(1),o.Dc("ngIf",i===n.selectedIndex)}}function g(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",6),o.bd(2,b,3,2,"div",7),o.cc(3,"div",8),o.qc("click",function(){return o.Uc(e),o.uc().showCustom()}),o.gc(4,9),o.bc(),o.bc(),o.cc(5,"div",10),o.qc("click",function(){return o.Uc(e),o.uc().onSelect.emit(null)}),o.gc(6,11),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(2),o.Dc("ngForOf",e.items)("ngForTrackBy",e.trackByLabel)}}function _(e,t){if(1&e){const e=o.dc();o.cc(0,"div",32),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).setUnits(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.label," ")}}function v(e,t){if(1&e&&(o.cc(0,"div",29),o.cc(1,"div",30),o.bd(2,_,2,1,"div",31),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(2),o.Dc("ngForOf",e.units)("ngForTrackBy",e.trackByLabel)}}function k(e,t){1&e&&(o.cc(0,"div",33),o.cc(1,"div",34),o.Xb(2,"div",35),o.bc(),o.cc(3,"div",36),o.gc(4,37),o.bc(),o.bc())}function y(e,t){if(1&e){const e=o.dc();o.cc(0,"div",14),o.cc(1,"div",15),o.cc(2,"input",16,17),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().amount=t})("ngModelChange",function(){return o.Uc(e),o.uc().showError=!1}),o.bc(),o.bc(),o.cc(4,"div",18),o.cc(5,"div",19,20),o.cc(7,"div",21),o.cc(8,"div",22),o.dd(9),o.Xb(10,"div",23),o.bc(),o.bc(),o.bd(11,v,3,2,"div",24),o.bc(),o.bc(),o.bc(),o.bd(12,k,5,0,"div",25),o.cc(13,"div",26),o.cc(14,"button",27),o.qc("click",function(){return o.Uc(e),o.uc().doneWithCustom()}),o.gc(15,28),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(2),o.Dc("ngModel",e.amount),o.Ib(3),o.Dc("dropdownCloseOnInsideClick",!0)("dropdownAppendToBody",!1)("ngClass",e.modifier),o.Ib(4),o.fd(" ",null==e.selectedUnit?null:e.selectedUnit.label," "),o.Ib(3),o.Dc("ngIf",e.showError)}}let w=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.displayCustom=!1,this.selectedIndex=-1,this.units=[{label:$localize`:@@cu-reminder-row-notification-dropdown-menu__unit-item_min-before:minutes before`,multiplier:1,type:"minutes"},{label:$localize`:@@cu-reminder-row-notification-dropdown-menu__unit-item_hr-before:hours before`,multiplier:60,type:"hours"},{label:$localize`:@@cu-reminder-row-notification-dropdown-menu__unit-item_days-before:days before`,multiplier:1440,type:"days"}],this.selectedUnit=this.units[0],this.amount=30,this.showError=!1,this.items=[],this.onSelect=new o.o,this.onClose=new o.o,this.trackByLabel=Object(n.d)("label")}ngOnInit(){}ngOnChanges(e){(e.minutesBefore||e.items)&&(this.selectedIndex=this.items.findIndex(e=>e.minutesBefore===this.minutesBefore))}select(e){this.onSelect.emit(e.minutesBefore)}showCustom(e=!0){this.displayCustom=e,this.changeDetectorRef.markForCheck()}setUnits(e){this.selectedUnit=e,this.changeDetectorRef.markForCheck()}doneWithCustom(){if(isNaN(this.amount)||!this.amount&&0!==this.amount||this.amount<0)return this.showError=!0,void this.changeDetectorRef.markForCheck();this.onSelect.emit(this.amount*this.selectedUnit.multiplier),this.onClose.emit()}checkForCustomSwitch(){this.selectedIndex=this.items.findIndex(e=>e.minutesBefore===this.minutesBefore),-1===this.selectedIndex&&this.minutesBefore?(this.displayCustom=!0,this.minutesBefore>1440&&this.minutesBefore%1440==0?(this.amount=this.minutesBefore/1440,this.selectedUnit=this.units.find(e=>"days"===e.type)):this.minutesBefore>60&&this.minutesBefore%60==0?(this.amount=this.minutesBefore/60,this.selectedUnit=this.units.find(e=>"hours"===e.type)):(this.amount=this.minutesBefore,this.selectedUnit=this.units.find(e=>"minutes"===e.type))):this.displayCustom=!1,this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-reminder-row-notification-dropdown-menu"]],viewQuery:function(e,t){if(1&e&&o.jd(p,3),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-reminder-row-notification-dropdown-menu"],inputs:{modifier:"modifier",items:"items",minutesBefore:"minutesBefore"},outputs:{onSelect:"onSelect",onClose:"onClose"},features:[o.Gb],decls:7,vars:3,consts:function(){let e,t,i,o,n;return e=$localize`:@@common_notify-me-1␟4e48b2bb29c03256cb8bc1a2b94d97981253841a␟3801512259452718459:NOTIFY ME`,t=$localize`:@@cu-reminder-row-notification-dropdown-menu__custom-notification␟42a937684b29673780082ee290d6811c12256021␟4915170421193376289: Custom... `,i=$localize`:@@common_dont-notify␟a818b846a39ce6850ee195172a7874c982dac0ef␟737447574478918670: Don't notify `,o=$localize`:button text@@common_done--button-text␟f031826de4d223f5af8f4fcec0c4f2ed1c035e87␟2559990622163579351: Done `,n=$localize`:@@cu-reminder-row-notification-dropdown-menu__form-error_invalid-number␟ac24da91d95732bd2329a7c158110acd0f176cfb␟2290518743201027861: You must input a number! `,[[1,"cu-reminder-row-notification-dropdown-menu__header"],["class","cu-reminder-row-notification-dropdown-menu__caret-down","icon","cu2-angle-right",3,"click",4,"ngIf"],e,[4,"ngIf","ngIfElse"],["customSelection",""],["icon","cu2-angle-right",1,"cu-reminder-row-notification-dropdown-menu__caret-down",3,"click"],[1,"cu-reminder-row-notification-dropdown-menu__container"],["class","cu-reminder-row-notification-dropdown-menu__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-reminder-row-notification-dropdown-menu__item",3,"click"],t,[1,"cu-reminder-row-notification-dropdown-menu__item","cu-reminder-row-notification-dropdown-menu__item_last",3,"click"],i,["class","cu-reminder-row-notification-dropdown-menu__check","icon","check-bold",4,"ngIf"],["icon","check-bold",1,"cu-reminder-row-notification-dropdown-menu__check"],[1,"cu-reminder-row-notification-dropdown-menu__custom"],[1,"cu-reminder-row-notification-dropdown-menu__custom-input","custom-amount"],["cuAutoFocus","","type","text","inputmode","numeric","pattern","[0-9]*","autocomplete","off","cuNumbersOnly","",1,"cu-reminder-row-notification-dropdown-menu__custom-amount",3,"ngModel","ngModelChange"],["customInput",""],[1,"cu-reminder-row-notification-dropdown-menu__custom-input","custom-units"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownAppendToBody","ngClass"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-reminder-row-notification-dropdown-menu__custom-options"],["icon","cu2-angle-right",1,"cu-reminder-row-notification-dropdown-menu__caret-down","cu-reminder-row-notification-dropdown-menu__caret-down_custom-options"],["class","cu-dropdown__menu_no-animate",4,"cuDropdownMenu"],["class","cu-form__error",4,"ngIf"],[1,"cu-reminder-row-notification-dropdown-menu__done"],[1,"cu-btn","cu-btn_sm","cu-btn_full-width",3,"click"],o,[1,"cu-dropdown__menu_no-animate"],[1,"cu-reminder-row-notification-dropdown-menu__custom-options-container"],["class","cu-reminder-row-notification-dropdown-menu__custom-options-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-reminder-row-notification-dropdown-menu__custom-options-item",3,"click"],[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],n]},template:function(e,t){if(1&e&&(o.cc(0,"div",0),o.bd(1,h,1,0,"div",1),o.ac(2),o.gc(3,2),o.Zb(),o.bc(),o.bd(4,g,7,2,"div",3),o.bd(5,y,16,6,"ng-template",null,4,o.cd)),2&e){const e=o.Rc(6);o.Ib(1),o.Dc("ngIf",t.displayCustom),o.Ib(3),o.Dc("ngIf",!t.displayCustom)("ngIfElse",e)}},directives:[s.q,c.a,s.p,a.a,r.c,l.a,r.v,r.p,r.s,d.b,s.o,u.a,m.a],styles:[".cu-reminder-row-notification-dropdown-menu{min-width:220px;display:block}.cu-reminder-row-notification-dropdown-menu .cu-form__error{padding-left:10px}.cu-reminder-row-notification-dropdown-menu__header{display:flex;align-items:center;padding:11px 15px 6px;text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.3);white-space:nowrap}.contrast_high .cu-reminder-row-notification-dropdown-menu__header{color:#858585}.dark-theme .cu-reminder-row-notification-dropdown-menu__header{color:#828588}.cu-reminder-row-notification-dropdown-menu__done{display:flex;justify-content:center;padding:10px 15px}.cu-reminder-row-notification-dropdown-menu__item{display:flex;align-items:center;height:30px;padding:0 15px;cursor:pointer;white-space:nowrap;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-reminder-row-notification-dropdown-menu__item{color:#d5d6d7}.cu-reminder-row-notification-dropdown-menu__item:hover{background-color:#fafbfc}.dark-theme .cu-reminder-row-notification-dropdown-menu__item:hover{background:#2b343b}.cu-reminder-row-notification-dropdown-menu__item_last{margin-top:5px;height:38px;border-top:1px solid #e9ebf0}.dark-theme .cu-reminder-row-notification-dropdown-menu__item_last{border-color:#1e272e}.cu-reminder-row-notification-dropdown-menu__check{fill:#7b68ee;width:12px;height:16px;margin-left:8px}@supports (--theme-main-color:#7b68ee){.cu-reminder-row-notification-dropdown-menu__check{fill:var(--theme-main-color)}}.cu-reminder-row-notification-dropdown-menu__caret-down{fill:#7b68ee;transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;margin-right:5px;margin-left:-5px;transform:rotate(180deg);cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-reminder-row-notification-dropdown-menu__caret-down{fill:var(--theme-main-color)}}.cu-reminder-row-notification-dropdown-menu__caret-down_custom-options{transform:rotate(90deg)}.cu-reminder-row-notification-dropdown-menu__custom{display:flex;align-items:center;justify-content:space-between;padding:5px 15px}.cu-reminder-row-notification-dropdown-menu__custom-input{border:1px solid #ccc;height:30px;border-radius:3px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-reminder-row-notification-dropdown-menu__custom-input{border-color:#1e272e;color:#d5d6d7;background:#384047}.cu-reminder-row-notification-dropdown-menu__custom-input.custom-amount{width:44px;margin-right:10px}.cu-reminder-row-notification-dropdown-menu__custom-input.custom-units{flex-grow:1}.cu-reminder-row-notification-dropdown-menu__custom-amount{border:0;width:100%;height:100%;padding:0 0 0 8px;background:transparent}.cu-reminder-row-notification-dropdown-menu__custom-amount:focus{background:transparent;box-shadow:none}.cu-reminder-row-notification-dropdown-menu__custom-options{display:flex;align-items:center;justify-content:space-between;padding:0 0 0 5px;height:30px}.cu-reminder-row-notification-dropdown-menu__custom-options-container{width:145px}.cu-reminder-row-notification-dropdown-menu__custom-options-item{padding:8px;cursor:pointer;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-reminder-row-notification-dropdown-menu__custom-options-item{color:#d5d6d7}.cu-reminder-row-notification-dropdown-menu__custom-options-item:hover{background-color:#fafbfc}.dark-theme .cu-reminder-row-notification-dropdown-menu__custom-options-item:hover{background:#2b343b}.cu-reminder-row-notification-dropdown-menu__custom .cu-dropdown_open .cu-reminder-row-notification-dropdown-menu__caret-down{transform:rotate(-90deg)}"],encapsulation:2,changeDetection:0}),e})()},"53dZ":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("7nDA"),n=i("nYR2"),s=i("2Vo4"),c=i("fXoL");let a=(()=>{class e{constructor(e){this.zone=e,this.recordingInProgress$=new s.a(!1),this.currentRecordings={}}getRecording(e){return this.currentRecordings[e]}startRecording(e){if(Object.values(this.currentRecordings).some(e=>e.stop$.value))throw new Error("An existing recording is already in progress");const{file$:t,stop:i}=Object(o.b)();return this.currentRecordings[e]={file$:new s.a(void 0),stop$:new s.a(i)},this.recordingInProgress$.next(!0),t.pipe(Object(n.a)(()=>{this.zone.run(()=>{this.recordingInProgress$.next(!1),this.currentRecordings[e]&&this.currentRecordings[e].stop$.next(void 0)})})).subscribe(t=>{this.zone.run(()=>{this.currentRecordings[e].file$.next(t)})}),this.currentRecordings[e]}clearRecording(e){this.currentRecordings[e]&&(Object.values(this.currentRecordings[e]).forEach(e=>{e.complete()}),delete this.currentRecordings[e])}}return e.\u0275fac=function(t){return new(t||e)(c.nc(c.B))},e.\u0275prov=c.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"5Eri":function(e,t,i){"use strict";i.d(t,"a",function(){return I});var o=i("fXoL"),n=i("XNiG"),s=i("ukJz"),c=i("ofXK"),a=i("UdVN"),r=i("NsZK"),l=i("PPkR"),d=i("cch5"),u=i("6d4N"),m=i("DnG/"),p=i("oEkI");const h=["datePicker"];function f(e,t){if(1&e&&(o.Xb(0,"div",9),o.vc(1,"recurringLegacyToText"),o.vc(2,"recurringToText")),2&e){const e=o.uc();o.Dc("icon","recurring")("cuTooltip",e.recurringTooltip?e.recurringTooltip:e.legacyRecurring?o.wc(1,2,e.recurringLegacyOptions):o.wc(2,4,e.recurringOptions))}}function b(e,t){}function g(e,t){if(1&e&&o.Xb(0,"div",10),2&e){const e=o.uc();o.Dc("icon",e.datePickerIcon)("cuTooltip",e.tooltip)("tooltipModifier","tooltip_near")}}function _(e,t){if(1&e&&o.Xb(0,"div",11),2&e){const e=o.uc();o.Dc("icon","recurring")("cuTooltip",e.recurringTooltip)}}function v(e,t){if(1&e&&(o.cc(0,"span",14),o.dd(1),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.ed(e.prefix)}}function k(e,t){if(1&e){const e=o.dc();o.bd(0,v,2,1,"span",12),o.cc(1,"cu-due-date-view",13),o.qc("onChange",function(t){return o.Uc(e),o.uc().setDueDate(t)}),o.bc()}if(2&e){const e=t.selectedDate,i=o.uc();o.Dc("ngIf",i.prefix&&e),o.Ib(1),o.Dc("selectedDate",e)("hasTime",i.hasTime)("showTime",i.hasTime)("isOnTime",i.isOnTime)("noHighlight",i.noHighlight)("forStart",i.forStart)("noPermission",i.disabled)("modifier",i.viewModifier)("dateTimeTooltip",i.tooltip)("notOverdue",i.notOverdue)("dateTimeTooltipDelay",i.tooltipDelay)("datePickerIcon",i.datePickerIcon)}}function y(e,t){if(1&e&&o.Xb(0,"div",17),2&e){const e=o.uc(2);o.Dc("icon",e.datePickerIcon)("cuTooltip",e.tooltip)("tooltipDelay",e.tooltipDelay)}}function w(e,t){if(1&e&&(o.cc(0,"div",15),o.vc(1,"dateColor"),o.dd(2),o.vc(3,"startDueDatesFormat"),o.bc(),o.bd(4,y,1,3,"div",16),o.vc(5,"startDueDatesFormat")),2&e){const e=o.uc();o.ad("color",o.xc(1,4,e.dates.dueDate,null==e.dates?null:e.dates.closedDate)),o.Ib(2),o.fd(" ",o.zc(3,7,e.dates,e.hideDate,e.dateFormat,e.militaryTime)," "),o.Ib(2),o.Dc("ngIf",!o.zc(5,12,e.dates,e.hideDate,e.dateFormat,e.militaryTime))}}const x=function(e){return{selectedDate:e}};let I=(()=>{class e{constructor(){this.destroy$=new n.a,this.forceDue=!1,this.disabled=!1,this.notOverdue=!1,this.taskDone=!1,this.field="dueDate",this.modifier="due-date_list-view",this.viewModifier="due-date_list-view",this.showStart=!0,this.militaryTime=!1,this.datePickerIcon="due-date",this.showOnlyIcon=!1,this.showOnlyRecurIcon=!1,this.startHour=4,this.legacyRecurring=!1,this.allowLegacyRecurring=!1,this.showCreateNewOption=!0,this.closeOthersOnOpen=!1,this.quickDone=!1,this.dropdownPlacement=["auto"],this.adjustRecurringDate=!0,this.alwaysShowRecurringDate=!0,this.recurringReadonly=!1,this.adjustStyleForInboxReminder=!1,this.isExtended=!1,this.hideIcon=!1,this.onChange=new o.o,this.onRecurringChange=new o.o,this.onRecurringLegacyChange=new o.o,this.onClose=new o.o,this.onOpen=new o.o,this.onRecurringLegacyOpen=new o.o}ngOnInit(){}ngOnChanges(e){e.dateConflict&&"dueDate"===this.field&&this.dateConflict&&(this.datePicker.dropdown.open(),this.datePicker.datepicker.remapDueDatesPopover.show(),this.datePicker.datepicker.lastSelectedDates=this.dateConflict),"dueDate"===this.field?(this.selectedDate=this.dates.dueDate,this.hasTime=this.dates.dueDateTime,this.isOnTime=this.dates.closedDate&&this.dates.closedDate<=this.dates.dueDate||this.dates.doneDate&&this.dates.doneDate<=this.dates.dueDate,this.noHighlight=!!this.dates.closedDate||!!this.dates.doneDate||this.taskDone,this.forStart=!1):(this.selectedDate=this.dates.startDate,this.hasTime=this.dates.startDateTime,this.isOnTime=void 0,this.noHighlight=void 0,this.forStart=!0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}setDueDate(e){this.onChange.emit(e)}setRecurring(e){this.recurringOptions=e.recurring,this.onRecurringChange.emit(e)}setRecurringLegacy(e){this.onRecurringLegacyChange.emit(e)}open(e){e&&(this.forceDue=e),this.datePicker.open()}recurringLegacyOpen(){this.onRecurringLegacyOpen.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-task-row-recurring-date-picker"]],viewQuery:function(e,t){if(1&e&&o.jd(h,3),2&e){let e;o.Qc(e=o.rc())&&(t.datePicker=e.first)}},hostAttrs:[1,"cu-task-row-recurring-date-picker"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-task-row-date-picker_disabled",t.disabled)},inputs:{disabled:"disabled",tooltip:"tooltip",recurringTooltip:"recurringTooltip",notOverdue:"notOverdue",taskDone:"taskDone",tooltipDelay:"tooltipDelay",dates:"dates",recurringOptions:"recurringOptions",field:"field",dateConflict:"dateConflict",modifier:"modifier",viewModifier:"viewModifier",showStart:"showStart",dateTemplate:"dateTemplate",dateFormat:"dateFormat",militaryTime:"militaryTime",hideDate:"hideDate",dualDate:"dualDate",datePickerIcon:"datePickerIcon",showOnlyIcon:"showOnlyIcon",showOnlyRecurIcon:"showOnlyRecurIcon",startHour:"startHour",legacyRecurring:"legacyRecurring",allowLegacyRecurring:"allowLegacyRecurring",recurringLegacyOptions:"recurringLegacyOptions",recurringLegacyData:"recurringLegacyData",task:"task",statuses:"statuses",showCreateNewOption:"showCreateNewOption",closeOthersOnOpen:["dropdownCloseOthersOnOpen","closeOthersOnOpen"],quickDone:"quickDone",dropdownPlacement:"dropdownPlacement",adjustRecurringDate:"adjustRecurringDate",alwaysShowRecurringDate:"alwaysShowRecurringDate",recurringReadonly:"recurringReadonly",recurringReadonlyTooltip:"recurringReadonlyTooltip",prefix:"prefix",adjustStyleForInboxReminder:"adjustStyleForInboxReminder",isExtended:"isExtended",isSaveText:"isSaveText",hideIcon:"hideIcon"},outputs:{onChange:"onChange",onRecurringChange:"onRecurringChange",onRecurringLegacyChange:"onRecurringLegacyChange",onClose:"onClose",onOpen:"onOpen",onRecurringLegacyOpen:"onRecurringLegacyOpen"},features:[o.Gb],decls:13,vars:39,consts:[[1,"cu-task-row-recurring-date-picker__dropdown",3,"selectedDate","startDate","dueTimeExists","startTimeExists","forceStart","forceDue","showStart","showQuickOptions","closeOnQuickSelect","readOnly","startHour","showRecurring","isSaveText","task","statuses","recurringOptions","legacyRecurring","allowLegacyRecurring","recurringLegacyOptions","recurringLegacyData","showCreateNewOption","dropdownCloseOthersOnOpen","dropdownPlacement","quickDone","adjustRecurringDate","alwaysShowRecurringDate","recurringReadonly","recurringReadonlyTooltip","onChange","onRecurringChange","onRecurringLegacyChange","onDropdownClose","onDropdownOpen","onRecurringLegacyOpen"],["datePicker",""],[1,"cu-task-row-recurring-date-picker__value"],["class","cu-task-row-recurring-date-picker__recur",3,"icon","cuTooltip",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["onlyIconTemplate",""],["onlyRecurringIconTemplate",""],["defaultTemplate",""],["dualDateTemplate",""],[1,"cu-task-row-recurring-date-picker__recur",3,"icon","cuTooltip"],[1,"cu-task-row-recurring-date-picker__icon",3,"icon","cuTooltip","tooltipModifier"],[1,"cu-task-row-recurring-date-picker__icon","cu-task-row-recurring-date-picker__icon-recurring",3,"icon","cuTooltip"],["class","cu-task-row-recurring-date-picker__prefix",4,"ngIf"],[3,"selectedDate","hasTime","showTime","isOnTime","noHighlight","forStart","noPermission","modifier","dateTimeTooltip","notOverdue","dateTimeTooltipDelay","datePickerIcon","onChange"],[1,"cu-task-row-recurring-date-picker__prefix"],[1,"cu-task-row-recurring-date-picker__dual-dates"],["class","cu-task-row-recurring-date-picker__dual-dates-icon",3,"icon","cuTooltip","tooltipDelay",4,"ngIf"],[1,"cu-task-row-recurring-date-picker__dual-dates-icon",3,"icon","cuTooltip","tooltipDelay"]],template:function(e,t){if(1&e&&(o.cc(0,"cu-recurring-date-dropdown",0,1),o.qc("onChange",function(e){return t.setDueDate(e)})("onRecurringChange",function(e){return t.setRecurring(e)})("onRecurringLegacyChange",function(e){return t.setRecurringLegacy(e)})("onDropdownClose",function(){return t.onClose.emit()})("onDropdownOpen",function(){return t.onOpen.emit()})("onRecurringLegacyOpen",function(){return t.recurringLegacyOpen()}),o.cc(2,"div",2),o.bd(3,f,3,6,"div",3),o.bd(4,b,0,0,"ng-template",4),o.bc(),o.bc(),o.bd(5,g,1,3,"ng-template",null,5,o.cd),o.bd(7,_,1,2,"ng-template",null,6,o.cd),o.bd(9,k,2,13,"ng-template",null,7,o.cd),o.bd(11,w,6,17,"ng-template",null,8,o.cd)),2&e){const e=o.Rc(6),i=o.Rc(8),n=o.Rc(10),s=o.Rc(12);o.Ob("cu-task-row-recurring-date-picker__dropdown-recurring",(t.recurringOptions||(null==t.recurringLegacyOptions?null:t.recurringLegacyOptions.recurring)&&t.legacyRecurring)&&"dueDate"===t.field),o.Dc("selectedDate",null==t.dates?null:t.dates.dueDate)("startDate",null==t.dates?null:t.dates.startDate)("dueTimeExists",null==t.dates?null:t.dates.dueDateTime)("startTimeExists",null==t.dates?null:t.dates.startDateTime)("forceStart","dueDate"!==t.field&&"startDueDate"!==t.field)("forceDue",t.forceDue||"dueDate"===t.field||"startDueDate"===t.field)("showStart",t.showStart)("showQuickOptions",!0)("closeOnQuickSelect",!0)("readOnly",t.disabled)("startHour",t.startHour)("showRecurring",!0)("isSaveText",t.isSaveText)("task",t.task)("statuses",t.task&&t.task.available_statuses?t.task.available_statuses:t.statuses)("recurringOptions",t.recurringOptions)("legacyRecurring",t.legacyRecurring)("allowLegacyRecurring",t.allowLegacyRecurring)("recurringLegacyOptions",t.recurringLegacyOptions)("recurringLegacyData",t.recurringLegacyData)("showCreateNewOption",t.showCreateNewOption)("dropdownCloseOthersOnOpen",t.closeOthersOnOpen)("dropdownPlacement",t.dropdownPlacement)("quickDone",t.quickDone)("adjustRecurringDate",t.adjustRecurringDate)("alwaysShowRecurringDate",t.alwaysShowRecurringDate)("recurringReadonly",t.recurringReadonly)("recurringReadonlyTooltip",t.recurringReadonlyTooltip),o.Ib(2),o.Ob("cu-task-row-recurring-date-picker__value-no-dates",!(null!=t.dates&&t.dates.startDate&&null!=t.dates&&t.dates.dueDate))("cu-task-row-recurring-date-picker__value-no-flex",t.adjustStyleForInboxReminder),o.Ib(1),o.Dc("ngIf",!t.hideIcon&&(t.recurringOptions||(null==t.recurringLegacyOptions?null:t.recurringLegacyOptions.recurring)&&t.legacyRecurring)&&"dueDate"===t.field),o.Ib(1),o.Dc("ngTemplateOutlet",t.dateTemplate||(t.showOnlyRecurIcon?i:t.showOnlyIcon?e:t.dualDate?s:n))("ngTemplateOutletContext",o.Hc(37,x,t.selectedDate))}},directives:[s.a,c.q,c.x,a.a,r.a,l.a],pipes:[d.a,u.a,m.a,p.a],styles:[".cu-task-row-recurring-date-picker{flex-shrink:0;align-self:center;margin:0;position:relative;overflow:hidden}@media print{.cu-task-row-recurring-date-picker{width:80px}}.cu-task-row-recurring-date-picker__icon{width:36px;height:36px;padding:10px;display:none;fill:#7c828d}.dark-theme .cu-task-row-recurring-date-picker__icon{fill:#82868d}.cu-task-row-recurring-date-picker__icon:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-row-recurring-date-picker__icon:hover{fill:var(--theme-main-color)}}.cu-task-row-recurring-date-picker_disabled .cu-user-group .cu-user-group__item.cu-user-group__item_due-date:hover .cu-fill{fill:#cbc9cf}.contrast_high .cu-task-row-recurring-date-picker_disabled .cu-user-group .cu-user-group__item.cu-user-group__item_due-date:hover .cu-fill,.dark-theme .cu-task-row-recurring-date-picker_disabled .cu-user-group .cu-user-group__item.cu-user-group__item_due-date:hover .cu-fill{fill:#979797}.cu-task-row-recurring-date-picker_disabled .cu-user-group .cu-user-group__item.cu-user-group__item_due-date:hover .cu-stroke{stroke:#cbc9cf}.contrast_high .cu-task-row-recurring-date-picker_disabled .cu-user-group .cu-user-group__item.cu-user-group__item_due-date:hover .cu-stroke,.dark-theme .cu-task-row-recurring-date-picker_disabled .cu-user-group .cu-user-group__item.cu-user-group__item_due-date:hover .cu-stroke{stroke:#979797}.cu-task-row-recurring-date-picker_disabled *{cursor:default!important}.cu-task-row-recurring-date-picker .cu-task-info__value{font:13px Gotham Pro,Proxima Nova,arial,serif;color:rgba(52,52,52,.5)}.cu-task-row-recurring-date-picker .cu-task-info__key{display:none}.cu-task-row-recurring-date-picker .cu-avatar{cursor:pointer;width:30px;height:30px;background:transparent}.cu-task-row-recurring-date-picker .cu-avatar svg{width:100%;height:100%}.cu-task-row-recurring-date-picker .cu-user-group .cu-user-group__item.cu-user-group__item_due-date .icon{width:30px;height:30px}.cu-task-row-recurring-date-picker .cu-user-group__item_due-date{width:30px;height:30px;margin-left:3px}.cu-task-row-recurring-date-picker__dual-dates{display:flex;align-items:center;flex-shrink:0;width:73px;padding-left:15px;position:relative;overflow:hidden;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#82868d}.dark-theme .cu-task-row-recurring-date-picker__dual-dates{color:#abaeb0}@media print{.cu-task-row-recurring-date-picker__dual-dates{width:50px}}.cu-task-row-recurring-date-picker__dual-dates-icon{width:16px;height:16px;fill:#979797}.cu-task-row-recurring-date-picker__recur{width:12px;height:12px;stroke:#979797;margin:0 5px 0 8px}.cu-reminder-row .cu-task-row-recurring-date-picker__recur{margin-right:10px;margin-left:0}.cu-task-row-recurring-date-picker__value{display:flex;align-items:center;justify-content:center}.cu-task-row-recurring-date-picker__value-no-flex{display:block}.cu-task-row-recurring-date-picker .due-date__row.due-date_list-view{margin-left:0}.cu-task-row-recurring-date-picker .icon_due-date-calendar{display:none}.cu-task-row-recurring-date-picker .due-date__info-value-date{display:block;text-align:center}.cu-task-row-recurring-date-picker__prefix{white-space:nowrap;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;display:inline-block;margin:0 4px 2px 0;color:#343434}.dark-theme .cu-task-row-recurring-date-picker__prefix{color:#abaeb0}.cu-task-row-recurring-date-picker .cu-user-group_due-date.due-date_list-view{margin:0;padding:0}"],encapsulation:2,changeDetection:0}),e})()},"5S2/":function(e,t,i){"use strict";i.d(t,"a",function(){return p});var o=i("g6dt"),n=i("HDdC"),s=i("Cfvw"),c=i("EY2u"),a=i("pLZG"),r=i("eIep"),l=i("5+tZ"),d=i("TqRa"),u=i("fXoL"),m=i("AeD3");let p=(()=>{class e{constructor(e,t){this.dataService=e,this.zone=t,this.oneDriveLoaded=!1,d.k||o(["https://js.live.net/v7.2/OneDrive.js"],{returnPromise:!0}).then(()=>{this.oneDriveLoaded=!0})}openPicker(){const e=window.location.origin+"/assets/html/onedrive-picker-redirect.html";return new n.a(t=>{const i=this.zone;this.oneDriveLoaded?this.zone.runOutsideAngular(()=>{OneDrive.open({clientId:"6d710c13-1fac-4277-90cd-50d3e3953aef",action:"query",multiSelect:!0,openInNewWindow:!0,advanced:{redirectUri:e,queryParameters:"select=id,name,webUrl"},success(e){i.run(()=>{t.next(e.value),t.complete()})},cancel(){i.run(()=>{t.complete()})},error(e){i.run(()=>{t.error(e)})}})}):t.complete()})}prepareOneDrivePayload(e,t,i,o){return{title:e.name||e.id,type:i,parent:t,file_id:e.id,url:e.webUrl,is_folder:!1,permanent:o}}addOneDriveFile(e,t,i){return this.oneDriveLoaded?this.openPicker().pipe(Object(a.a)(e=>e&&e.length>0),Object(r.a)(e=>Object(s.a)(e)),Object(l.a)(o=>this.dataService.oneDriveAddAttachment(this.prepareOneDrivePayload(o,e,t,i)))):c.a}}return e.\u0275fac=function(t){return new(t||e)(u.nc(m.a),u.nc(u.B))},e.\u0275prov=u.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"5lwC":function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return s}),i.d(t,"b",function(){return c});const o={mask:Number,thousandsSeparator:",",signed:!0,scale:Number.MAX_SAFE_INTEGER,radix:"."};function n(e){return null==e?"":String(e).replace(/,/g,"")}function s(e){return e&&!e.trim().includes("://")?"http://"+e.trim():e?e.trim():e}function c(e){let t=String(e||"").replace(/[^\d+\.\-]/g,"").replace(/^\./,"");return/\d/.test(t)||(t=""),t}},"5sDR":function(e,t,i){e.exports=i.p+"custom-fields_.bfa9cf46c25359e310bc.png"},"5smY":function(e,t,i){"use strict";i.d(t,"a",function(){return g});var o=i("fXoL"),n=i("y2kl"),s=i("0jq0"),c=i("RwZa"),a=i("L5Tv"),r=i("LdyQ"),l=i("MJvn"),d=i("n+1/"),u=i("bnLg");const m=["dropdown"],p=["mentionList"];function h(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.cc(1,"cu-mention-selector",5,6),o.qc("onSelect",function(t){return o.Uc(e),o.uc().onSelect.emit(t)})("onSelectTab",function(t){return o.Uc(e),o.uc().selectTab(t)})("onGeometryChange",function(){return o.Uc(e),o.uc().positionMenu()})("mousedown",function(e){return e.stopPropagation()}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("users",e.usersFound)("userGroups",e.userGroupsFound)("showNotif",e.showNotif)("maxResults",e.maxResults)("selectedTab",e.selectedTab)("query",e.query)("allUsers",e.users)("task",e.task)("isGuest",e.isGuest)("subcategory",e.subcategory)("taskUserGroups",e.filteredTaskUserGroups)}}const f=function(){return["top-left","top-right","bottom-left","bottom-right","auto"]},b=["*"];let g=(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.zone=t,this.maxResults=10,this.showNotif=!1,this.destroyMenuOnClose=!0,this.onSelect=new o.o,this.dropdownClose=new o.o,this.usersFound=[],this.userGroupsFound=[],this.filteredTaskUserGroups=[],this.selectedTab=s.a.User,this.MentionType=s.a}ngOnInit(){}open(){this.dropdown.open()}close(){this.dropdown.close()}filter(e){const t=Object(c.a)(e);return this.query=t.query,!t.tab||e===this.originalQuery&&this.originalQuery||this.selectTab(t.tab),this.originalQuery=e,this.selectedTab===s.a.User?(this.filterUsersTab(),this.zone.run(()=>{this.changeDetectorRef.detectChanges()}),!this.query||this.usersFound.length>0||this.userGroupsFound.length>0||this.filteredTaskUserGroups.length>0):(this.zone.run(()=>{this.changeDetectorRef.detectChanges()}),!0)}handleKey(e){if(this.mentionList)return this.mentionList.handleKey(e)}selectTab(e){this.selectedTab=e,this.selectedTab===s.a.User&&this.filterUsersTab(),this.positionMenu()}positionMenu(){setTimeout(()=>{this.dropdown.positionMenu()})}filterUsersTab(){this.usersFound=Object(n.c)(this.users,this.meUser,this.query,this.weights,a.c.MENTION),this.userGroupsFound=Object(n.b)(this.userGroups,this.query),this.filteredTaskUserGroups=Object(n.a)(this.taskUserGroups,this.query)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(o.B))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-mention-selector-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(m,1),o.jd(p,1)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.mentionList=e.first)}},inputs:{maxResults:"maxResults",users:"users",userGroups:"userGroups",meUser:"meUser",showNotif:"showNotif",fromRect:"fromRect",weights:"weights",task:"task",subcategory:"subcategory",isGuest:"isGuest",taskUserGroups:"taskUserGroups",destroyMenuOnClose:["dropdownDestroyMenuOnClose","destroyMenuOnClose"]},outputs:{onSelect:"onSelect",dropdownClose:"dropdownClose"},ngContentSelectors:b,decls:5,vars:6,consts:[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownRepositionFlag","dropdownFromRect","dropdownDestroyMenuOnClose","dropdownPlacement","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle",""],["class","cu-user-mention-list-dropdown__menu cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],[1,"cu-user-mention-list-dropdown__menu","cu-dropdown__menu_overflow-hidden"],[3,"users","userGroups","showNotif","maxResults","selectedTab","query","allUsers","task","isGuest","subcategory","taskUserGroups","onSelect","onSelectTab","onGeometryChange","mousedown"],["mentionList",""]],template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.qc("dropdownClose",function(){return t.selectedTab=t.MentionType.User,t.dropdownClose.emit()}),o.cc(2,"div",2),o.Bc(3),o.bc(),o.bd(4,h,3,11,"div",3),o.bc()),2&e&&o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRepositionFlag",t.query+"_"+t.selectedTab+"_"+(null==t.usersFound?null:t.usersFound.length))("dropdownFromRect",t.fromRect)("dropdownDestroyMenuOnClose",t.destroyMenuOnClose)("dropdownPlacement",o.Gc(5,f))},directives:[r.b,l.a,d.a,u.a],styles:[""],changeDetection:0}),e})()},"5t69":function(e,t,i){"use strict";var o=i("U6jy"),n=i("P7XM");e.exports=function(e){var t,i,s;for(i in n(a,e),n(c,a),t=a.prototype)(s=t[i])&&"object"==typeof s&&(t[i]="concat"in s?s.concat():o(s));return a;function c(t){return e.apply(this,t)}function a(){return this instanceof a?e.apply(this,arguments):new c(arguments)}}},"5zfR":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},"6/Td":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("YAnr");class n{static requiredTrimmed(e){return null==e.value||"string"==typeof e.value&&!e.value.trim().length?{required:!0}:null}static url(e){const t=e.value.trim();let i=Object(o.x)(t.replace(/_/g,""));return i||!/\w+\.\w+/.test(t)||t.includes("/")||t.includes(":")||t.includes("://")||t.startsWith("http")||(i=Object(o.x)("http://"+t)),i?null:{url:!0}}static gitBranchName(e){const t=e.trim();return t.includes("/.")||t.endsWith(".lock")||t.includes("..")||t.includes(" ")||t.includes("~")||t.includes("^")||t.includes(":")||t.includes("?")||t.includes("*")||t.includes("[")||t.includes("//")||t.startsWith("/")||t.endsWith("/")||t.endsWith(".")||t.includes("@{")||"@"===t||t.includes("\\")?{gitBranchName:!0}:null}}},"68Q3":function(e,t,i){"use strict";i.d(t,"a",function(){return D});var o=i("fXoL"),n=i("XNiG"),s=i("Cfvw"),c=i("IzEk"),a=i("1G5W"),r=i("jJQC"),l=i("3Pt+"),d=i("hr9B"),u=i("qpQx"),m=i("ofXK"),p=i("3uaV"),h=i("4n/f"),f=i("Gfhd"),b=i("NsZK"),g=i("UdVN");const _=["textInputField"];function v(e,t){if(1&e&&o.Xb(0,"span",8),2&e){const e=o.uc(2);o.Dc("ngClass",e.phoneNumber.countriesMap[e.selectedCountryCode].flag)}}function k(e,t){if(1&e&&(o.cc(0,"div"),o.dd(1),o.bc()),2&e){const e=o.uc().$implicit;o.Ib(1),o.fd(" \xa0+",e.diallingCode," ")}}function y(e,t){if(1&e&&(o.cc(0,"cu-select-option",10),o.Xb(1,"div",8),o.cc(2,"div",11),o.dd(3),o.bc(),o.bd(4,k,2,1,"div",12),o.bc()),2&e){const e=t.$implicit;o.Dc("value",e.code)("selectedOptionData",e),o.Ib(1),o.Dc("ngClass",e.flag),o.Ib(1),o.Dc("cuTooltip",e.label)("tooltipDisabledIfTextNotTruncated",!0)("tooltipDelay",300),o.Ib(1),o.fd(" ",e.label," "),o.Ib(1),o.Dc("ngIf",e.diallingCode)}}function w(e,t){if(1&e&&o.bd(0,y,5,8,"cu-select-option",9),2&e){const e=o.uc(2);o.Dc("ngForOf",e.phoneNumber.filteredCountries)("ngForTrackBy",e.trackByCode)}}const x=function(e){return{display:e}};function I(e,t){if(1&e){const e=o.dc();o.cc(0,"div",2),o.qc("clickOutside",function(){o.Uc(e);const t=o.Rc(8);return o.uc().onBlurOrEnter(t)}),o.bd(1,v,1,1,"ng-template",null,3,o.cd),o.cc(3,"cu-select",4),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().selectedCountryCode=t})("ngModelChange",function(t){o.Uc(e);const i=o.Rc(8),n=o.uc();return n.updateDefaultCountry(t),n.formatPhoneNumber(i)})("filterOptions",function(t){return o.Uc(e),o.uc().filterCountries(t)}),o.bd(4,w,1,2,"ng-template",null,5,o.cd),o.bc(),o.cc(6,"input",6,7),o.qc("keyup",function(){o.Uc(e);const t=o.Rc(8);return o.uc().formatPhoneNumber(t)})("ngModelChange",function(t){return o.Uc(e),o.uc().telephoneValue=t})("keydown.Enter",function(){o.Uc(e);const t=o.Rc(8);return o.uc().onBlurOrEnter(t)})("focus",function(){return o.Uc(e),o.uc().focusedPhoneTextInputField=!0}),o.bc(),o.bc()}if(2&e){const e=o.Rc(2),t=o.Rc(5),i=o.uc();o.Ib(3),o.Ob("cu-custom-fields__form-input_invalid",!i.isTelephoneValid&&i.telephoneValue&&i.touched),o.Dc("ngModel",i.selectedCountryCode)("selectedOptionTemplate",e)("menuModifier","cu-custom-fields__select-menu cu-custom-fields__select-menu_phone")("ngStyle",o.Hc(14,x,i.focusedPhoneTextInputField||i.telephoneValue?"flex":"none"))("showSearch",!0)("appendDropdownToBody",i.appendDropdownToBody)("optionsTemplate",t),o.Ib(3),o.Ob("cu-custom-fields__form-input_invalid",!i.isTelephoneValid&&i.telephoneValue&&i.touched),o.Ec("placeholder",i.focusedPhoneTextInputField?i.telephonePlaceholder:i.placeholder||"\u2013"),o.Dc("disabled",i.isDisabled)("ngModel",i.telephoneValue)}}function T(e,t){1&e&&(o.cc(0,"div",13),o.Xb(1,"div",14),o.ac(2),o.gc(3,15),o.Zb(),o.bc()),2&e&&o.Dc("@loading",void 0)}const C={provide:l.o,useExisting:Object(o.Z)(()=>D),multi:!0};let D=(()=>{class e{constructor(e,t){this.location=e,this.cdr=t,this.focusInput=!1,this.touched=!1,this.updateOn="blur",this.appendDropdownToBody=!0,this.showErrorMessage=!1,this.required=!1,this.updateUserCountryCode=new o.o,this.isTelephoneValidChanged=new o.o,this.isTelephoneValid=!1,this.trackByCode=Object(r.d)("code"),this.focusedPhoneTextInputField=!1,this.telephonePlaceholder="",this.isDisabled=!1,this.destroy$=new n.a,this.onChange=e=>{},this.onTouched=()=>{}}ngOnInit(){Object(s.a)(Promise.all([i.e(48).then(i.bind(null,"PoRY")),i.e(101).then(i.t.bind(null,"pHmk",7)),i.e(124).then(i.t.bind(null,"YHbO",3)),this.location.currentCountry$.toPromise().catch(()=>({country_code:null})),i.e(123).then(i.t.bind(null,"05Hy",3))])).pipe(Object(c.a)(1),Object(a.a)(this.destroy$)).subscribe(([e,t,i,o,n])=>{const s=Object.entries(Object.assign(Object.assign({},t.getCodeList()),{XK:"Kosovo"})).map(([e,t])=>({code:e.toUpperCase(),label:t})).filter(({code:e})=>!!i.default.countries[e]).map(({code:t,label:o})=>({code:t,label:o,flag:"flag-icon-"+t.toLowerCase(),diallingCode:i.default.countries[t][0],example:e.formatNumber(n[t],t,"National")})).sort((e,t)=>e.label.localeCompare(t.label)),c=s.findIndex(e=>e.code===(o.country_code||"US")),a=[s[c],...s.slice(0,c),...s.slice(c+1)];this.phoneNumber={lib:e,countries:a,filteredCountries:a,countriesMap:{}},a.forEach(e=>{this.phoneNumber.countriesMap[e.code]=e}),this.updatePhoneCountry(),this.cdr.detectChanges(),this.focusInput&&this.textInputField&&this.textInputField.nativeElement.focus()})}ngOnDestroy(){this.destroy$.next()}writeValue(e){this.telephoneValue=e,this.updatePhoneCountry()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}filterCountries(e){if(e){const t=e.toLowerCase(),i=["diallingCode","label"];this.phoneNumber.filteredCountries=this.phoneNumber.countries.filter(e=>i.some(i=>{let o=e[i].toLowerCase();return"diallingCode"===i&&(o="+"+o),o.includes(t)})),0===this.phoneNumber.filteredCountries.length&&(this.phoneNumber.filteredCountries=[this.phoneNumber.countries[0]])}else this.phoneNumber.filteredCountries=this.phoneNumber.countries}updateDefaultCountry(e){this.updateTelephonePlaceholder(),this.updateUserCountryCode.emit(e)}formatPhoneNumber(e){const t=e.value.startsWith("+"),i=e=>new this.phoneNumber.lib.AsYouType(t?void 0:this.selectedCountryCode).input(e),o=/\d$/.test(e.value),n=e.value.includes("(");e.value=i(e.value),o&&n&&e.value.endsWith(")")&&(e.value=i(e.value.replace(/\d\)$/,""))),this.updateIsValid(e.value),"input"===this.updateOn?this.updateModelValue(e):this.showErrorMessage&&(this.touched=!0)}onBlurOrEnter(e){this.focusedPhoneTextInputField&&(this.focusedPhoneTextInputField=!1,this.formatPhoneNumber(e),this.onTouched(),this.updateModelValue(e))}updateModelValue(e){const t=e.value,i=t?this.phoneNumber.lib.formatNumber(t,this.selectedCountryCode,"International"):"";this.onChange(i)}updateTelephonePlaceholder(){if(this.telephonePlaceholder="",this.selectedCountryCode&&this.phoneNumber){const e=this.phoneNumber.countries.find(e=>e.code===this.selectedCountryCode);e&&(this.telephonePlaceholder=e.example)}}updatePhoneCountry(){if(this.phoneNumber&&(this.selectedCountryCode=this.userCountryCode||"US",this.updateTelephonePlaceholder(),this.telephoneValue)){const e=this.phoneNumber.lib.parseNumber(this.telephoneValue);e&&e.country&&(this.selectedCountryCode=e.country,this.telephoneValue=this.phoneNumber.lib.formatNumber(this.telephoneValue,this.selectedCountryCode,"National"),this.updateIsValid(this.telephoneValue))}}updateIsValid(e){this.isTelephoneValid=e?this.phoneNumber.lib.isValidNumber(e,this.selectedCountryCode):!this.required,this.isTelephoneValidChanged.emit(this.isTelephoneValid)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(u.a),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-telephone-input"]],viewQuery:function(e,t){if(1&e&&o.jd(_,1),2&e){let e;o.Qc(e=o.rc())&&(t.textInputField=e.first)}},hostAttrs:[1,"cu-telephone-input"],inputs:{focusInput:"focusInput",touched:"touched",placeholder:"placeholder",updateOn:"updateOn",userCountryCode:"userCountryCode",appendDropdownToBody:"appendDropdownToBody",showErrorMessage:"showErrorMessage",required:"required"},outputs:{updateUserCountryCode:"updateUserCountryCode",isTelephoneValidChanged:"isTelephoneValidChanged"},features:[o.Hb([C])],decls:2,vars:2,consts:function(){let e;return e=$localize`:@@cu-telephone-input__form-error_invalid-telephone␟5fecba2da182a180a735dd0900fca9a7b7cbff22␟9142428243356471731:Invalid telephone entered`,[["class","cu-custom-fields__form-input-group cu-custom-fields__form-input-group_phone",3,"clickOutside",4,"ngIf"],["class","cu-edit-task-custom-field-value__error",4,"ngIf"],[1,"cu-custom-fields__form-input-group","cu-custom-fields__form-input-group_phone",3,"clickOutside"],["selectedOptionTemplate",""],[1,"cu-custom-fields__form-input","cu-custom-fields__form-input-group-select",3,"ngModel","selectedOptionTemplate","menuModifier","ngStyle","showSearch","appendDropdownToBody","optionsTemplate","ngModelChange","filterOptions"],["optionsTemplate",""],["type","text","data-lpignore","true",1,"cu-custom-fields__form-input","cu-custom-fields__form-input-group-text",3,"disabled","ngModel","placeholder","keyup","ngModelChange","keydown.Enter","focus"],["textInputField","","phoneInput","","phoneInputModel","ngModel"],[1,"flag-icon",3,"ngClass"],[3,"value","selectedOptionData",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value","selectedOptionData"],[1,"cu-telephone-input__label",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipDelay"],[4,"ngIf"],[1,"cu-edit-task-custom-field-value__error"],["icon","exclamation4",1,"cu-edit-task-custom-field-value__error-icon"],e]},template:function(e,t){1&e&&(o.bd(0,I,10,16,"div",0),o.bd(1,T,4,1,"div",1)),2&e&&(o.Dc("ngIf",t.phoneNumber),o.Ib(1),o.Dc("ngIf",!t.isTelephoneValid&&t.telephoneValue&&t.touched&&t.showErrorMessage))},directives:[m.q,p.a,h.a,l.p,l.s,m.t,l.c,m.o,m.p,f.a,b.a,g.a],styles:[".cu-telephone-input__label[_ngcontent-%COMP%]{flex-grow:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],data:{animation:[d.e]},changeDetection:0}),e})()},"6F/5":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("ofXK"),n=i("K0KF"),s=i("gb9A"),c=i("csDc"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a]]}),e})()},"6Hro":function(e,t,i){e.exports=i.p+"live-view.bce086b132f682595510.png"},"6RDV":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("ofXK"),n=i("gb9A"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a]]}),e})()},"6d4N":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("12P9"),n=i("fXoL");let s=(()=>{class e{transform(e,t=""){return Object(o.j)(e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"recurringToText",type:e,pure:!0}),e})()},"6dBs":function(e,t,i){"use strict";var o=Object.prototype.hasOwnProperty,n=Object.prototype.toString,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},r=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,i=o.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!s)return!1;for(t in e);return void 0===t||o.call(e,t)},l=function(e,t){s&&"__proto__"===t.name?s(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},d=function(e,t){if("__proto__"===t){if(!o.call(e,t))return;if(c)return c(e,t).value}return e[t]};e.exports=function e(){var t,i,o,n,s,c,u=arguments[0],m=1,p=arguments.length,h=!1;for("boolean"==typeof u&&(h=u,u=arguments[1]||{},m=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});m<p;++m)if(null!=(t=arguments[m]))for(i in t)o=d(u,i),u!==(n=d(t,i))&&(h&&n&&(r(n)||(s=a(n)))?(s?(s=!1,c=o&&a(o)?o:[]):c=o&&r(o)?o:{},l(u,{name:i,newValue:e(h,c,n)})):void 0!==n&&l(u,{name:i,newValue:n}));return u}},"6kbF":function(e,t,i){"use strict";i.d(t,"a",function(){return xe});var o=i("fXoL"),n=i("XIp8"),s=i("XNiG"),c=i("2Vo4"),a=i("LRne"),r=i("itXk"),l=i("lJxs"),d=i("pLZG"),u=i("eIep"),m=i("vkgz"),p=i("Kj3r"),h=i("1G5W"),f=i("SxV6"),b=i("/qOb"),g=i("Gj5t"),_=i("Hgwy"),v=i("c3rA"),k=i("AQW5"),y=i("RtrR"),w=i("o7Ov"),x=i("AeD3"),I=i("Tm/s"),T=i("NfA8"),C=i("l7P3"),D=i("ofXK"),O=i("2eMX"),S=i("3Pt+"),E=i("bFKe"),P=i("UdVN"),j=i("NsZK"),A=i("CqqK"),$=i("BTFG"),U=i("WoFS");const R=["searchInput"],M=["scrollbar"];function F(e,t){1&e&&o.Yb(0)}function L(e,t){if(1&e&&(o.cc(0,"span",13),o.dd(1),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.ed(e.selectedSubcategories.length)}}function N(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.cc(1,"div",9),o.ac(2),o.gc(3,10),o.Zb(),o.bd(4,L,2,1,"span",11),o.bc(),o.cc(5,"cu-project-list-dropdown",12),o.qc("projectSelected",function(t){return o.Uc(e),o.uc().selectProject(t)}),o.vc(6,"async"),o.vc(7,"async"),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(4),o.Dc("ngIf",e.multiSelect),o.Ib(1),o.Dc("selectedProject",o.wc(6,3,e.selectedProject$))("projects",o.wc(7,5,e.projectsWithShared$))}}const z=function(e){return{"category-list__search_disabled":e}},q=function(e){return{"cu-search_loading":e}};function G(e,t){if(1&e){const e=o.dc();o.cc(0,"div",14),o.cc(1,"div",15),o.vc(2,"async"),o.cc(3,"input",16,17),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().query=t})("ngModelChange",function(){return o.Uc(e),o.uc().search()}),o.bc(),o.cc(5,"div",18),o.Xb(6,"i",19),o.bc(),o.cc(7,"div",20),o.Xb(8,"i",21),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Dc("ngClass",o.Hc(5,z,e.selectedFolderless)),o.Ib(1),o.Dc("ngClass",o.Hc(7,q,o.wc(2,3,e.isLoading$))),o.Ib(2),o.Dc("ngModel",e.query)}}const V=function(e){return{"category-list__cat-chevron_down":e}};function B(e,t){if(1&e&&o.Xb(0,"div",37),2&e){const e=o.uc(2).$implicit,t=o.uc(2);o.Dc("ngClass",o.Hc(1,V,t.openCategories[e.id]))}}function X(e,t){if(1&e){const e=o.dc();o.cc(0,"span",38),o.qc("click",function(t){o.Uc(e);const i=o.uc(2).$implicit;return o.uc(2).addSubcategory(t,i)}),o.dd(1,"+"),o.bc()}}const H=function(e){return{"category-list_active":e}},W=function(e){return{"category-list__cat-folder_open":e}};function K(e,t){if(1&e){const e=o.dc();o.cc(0,"div",31),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).clickCategory(t)}),o.bd(1,B,1,3,"div",32),o.cc(2,"div",33),o.Xb(3,"div",34),o.cc(4,"span",35),o.dd(5),o.bc(),o.bd(6,X,2,0,"span",36),o.vc(7,"async"),o.bc(),o.bc()}if(2&e){const e=o.uc().$implicit,t=o.uc(2);o.Dc("ngClass",o.Hc(7,H,t.selectedCategoryId==e.id&&!t.multiSelect&&"project"==t.mode)),o.Ib(1),o.Dc("ngIf","list"==t.mode),o.Ib(2),o.Dc("ngClass",o.Hc(9,W,t.openCategories[e.id])),o.Ib(2),o.ed(e.name),o.Ib(1),o.Dc("ngIf",(null==e||null==e.permissions?null:e.permissions.can_create_lists)&&(null==t.addingSubcategory?null:t.addingSubcategory.id)!=e.id&&"list"==t.mode&&o.wc(7,5,t.isConnected$))}}function Q(e,t){1&e&&o.Xb(0,"span",46)}function Z(e,t){if(1&e&&(o.cc(0,"div",47),o.dd(1),o.bc()),2&e){const e=o.uc(2).$implicit;o.Ib(1),o.fd(" ",e.taskcount," ")}}const Y=function(e,t,i){return{"category-list_active":e,"category-list_disabled":t,"category-list-folderless-list":i}};function J(e,t){if(1&e){const e=o.dc();o.cc(0,"div",42),o.qc("click",function(t){o.Uc(e);const i=o.uc().$implicit,n=o.uc(2).$implicit;return o.uc(2).clickSubcategory(n,i,t)}),o.cc(1,"div",43),o.dd(2),o.bd(3,Q,1,0,"span",44),o.bc(),o.bd(4,Z,2,1,"div",45),o.bc()}if(2&e){const e=o.uc().$implicit,t=o.uc(4);o.Dc("ngClass",o.Jc(5,Y,t.selectedSubcategoryId==e.id&&!t.multiSelect,t.disabledSubcategories[e.id]||t.checkCreateTaskPermission&&!(null!=e&&null!=e.permissions&&e.permissions.can_create_tasks),e.parent.hidden))("cuTooltip",t.disabledSubcategories[e.id]?t.disabledStatusMessage:!t.checkCreateTaskPermission||null!=e&&null!=e.permissions&&e.permissions.can_create_tasks?null:t.notAllowedToCreateTaskInListText),o.Ib(2),o.fd(" ",e.name," "),o.Ib(1),o.Dc("ngIf",t.selectedSubcategoriesMap[null==e?null:e.id]),o.Ib(1),o.Dc("ngIf",t.showTaskCount)}}function ee(e,t){if(1&e&&(o.cc(0,"div",28),o.bd(1,J,5,9,"div",41),o.bc()),2&e){const e=t.$implicit,i=o.uc(4);o.Ib(1),o.Dc("ngIf",i.visibleSubcategories[e.id]&&(!i.hideFolderless||!e.parent.hidden))}}function te(e,t){if(1&e){const e=o.dc();o.cc(0,"div",48),o.cc(1,"category-list-input",49,50),o.qc("onCancel",function(){return o.Uc(e),o.uc(4).cancelSubcategoryAdding()})("onSave",function(t){o.Uc(e);const i=o.uc(2).$implicit;return o.uc(2).saveSubcategory(t,i)}),o.bc(),o.bc()}if(2&e){const e=o.uc(4);o.Ib(1),o.Dc("name",e.newSubcategoryName)("error",e.newSubcategoryNameError)}}const ie=function(e){return{"category-list_open":e}};function oe(e,t){if(1&e&&(o.cc(0,"div",39),o.bd(1,ee,2,1,"div",24),o.bd(2,te,3,2,"div",40),o.bc()),2&e){const e=o.uc().$implicit,t=o.uc(2);o.Dc("ngClass",o.Hc(4,ie,t.openCategories[e.id])),o.Ib(1),o.Dc("ngForOf",e.subcategories)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",(null==t.addingSubcategory?null:t.addingSubcategory.id)==e.id)}}function ne(e,t){if(1&e&&(o.cc(0,"div",28),o.bd(1,K,8,11,"div",29),o.bd(2,oe,3,6,"div",30),o.bc()),2&e){const e=t.$implicit,i=o.uc(2);o.Ib(1),o.Dc("ngIf",i.visibleCategories[e.id]),o.Ib(1),o.Dc("ngIf","list"==i.mode)}}function se(e,t){1&e&&(o.cc(0,"div",51),o.gc(1,52),o.bc())}function ce(e,t){if(1&e){const e=o.dc();o.cc(0,"div",56),o.qc("click",function(t){return o.Uc(e),o.uc(3).addCategory(t)}),o.dd(1," + "),o.ac(2),o.gc(3,57),o.Zb(),o.bc()}}function ae(e,t){if(1&e){const e=o.dc();o.cc(0,"category-list-input",58,50),o.qc("onCancel",function(){return o.Uc(e),o.uc(3).cancelCategoryAdding()})("onSave",function(t){return o.Uc(e),o.uc(3).presaveCategory(t)}),o.bc()}if(2&e){const e=o.uc(3);o.Dc("name",e.newCategoryName)("error",e.newCategoryNameError)}}function re(e,t){if(1&e&&(o.cc(0,"div",53),o.bd(1,ce,4,0,"div",54),o.vc(2,"async"),o.vc(3,"async"),o.bd(4,ae,2,2,"category-list-input",55),o.bc()),2&e){const e=o.uc(2);let t=null;o.Ib(1),o.Dc("ngIf",!e.addingCategory&&(null==(t=o.wc(2,2,e.selectedProject$))||null==t.permissions?null:t.permissions.can_create_projects)&&o.wc(3,4,e.isConnected$)),o.Ib(3),o.Dc("ngIf",e.addingCategory)}}function le(e,t){if(1&e&&(o.cc(0,"div",70),o.dd(1),o.bc()),2&e){const e=o.uc().$implicit;o.Ib(1),o.fd(" ",null==e||null==e.category?null:e.category.name," ")}}function de(e,t){1&e&&o.Xb(0,"div",71)}function ue(e,t){if(1&e){const e=o.dc();o.cc(0,"div",66),o.qc("click",function(i){o.Uc(e);const n=t.$implicit,s=o.uc().$implicit;return o.uc(3).clickExtra(s,n.category,n,i)}),o.bd(1,le,2,1,"div",67),o.bd(2,de,1,0,"div",68),o.cc(3,"div",69),o.dd(4),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(4);o.Ob("category-list__extra-item_active",(null==i.extraItemSelected?null:i.extraItemSelected.id)===(null==e?null:e.id)&&!i.multiSelect),o.Ib(1),o.Dc("ngIf",!(null!=e&&null!=e.category&&e.category.hidden)),o.Ib(1),o.Dc("ngIf",!(null!=e&&null!=e.category&&e.category.hidden)),o.Ib(2),o.fd(" ",null==e?null:e.name," ")}}function me(e,t){1&e&&o.Xb(0,"span",46)}function pe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",28),o.cc(1,"div",31),o.qc("click",function(i){o.Uc(e);const n=t.$implicit,s=o.uc().$implicit,c=o.uc().$implicit;return o.uc(3).clickExtra(c,s,n,i)}),o.cc(2,"div",43),o.dd(3),o.bd(4,me,1,0,"span",74),o.bc(),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(5);o.Ib(1),o.Dc("ngClass",o.Hc(3,H,i.selectedSubcategoryId==e.id&&!i.multiSelect)),o.Ib(2),o.fd(" ",e.name," "),o.Ib(1),o.Dc("ngIf",i.selectedSubcategoriesMap[null==e?null:e.id])}}function he(e,t){if(1&e){const e=o.dc();o.cc(0,"div",28),o.cc(1,"div",72),o.qc("click",function(){o.Uc(e);const i=t.$implicit,n=o.uc(4);return n.extraExpanded[i.id]=!n.extraExpanded[i.id]}),o.Xb(2,"div",73),o.cc(3,"div",33),o.cc(4,"span",35),o.dd(5),o.bc(),o.bc(),o.bc(),o.cc(6,"div",39),o.bd(7,pe,5,5,"div",24),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(4);o.Ib(2),o.Dc("ngClass",o.Hc(5,V,i.extraExpanded[e.id])),o.Ib(3),o.ed(e.name),o.Ib(1),o.Dc("ngClass",o.Hc(7,ie,i.extraExpanded[e.id])),o.Ib(1),o.Dc("ngForOf",e.subcategories)("ngForTrackBy",i.trackById)}}function fe(e,t){if(1&e&&(o.cc(0,"div",63),o.cc(1,"div",64),o.dd(2),o.bc(),o.bd(3,ue,5,5,"div",65),o.bd(4,he,8,9,"div",24),o.bc()),2&e){const e=t.$implicit,i=o.uc(3);o.Ib(2),o.ed(null==e?null:e.name),o.Ib(1),o.Dc("ngForOf",null==e?null:e.subcategories)("ngForTrackBy",i.trackById),o.Ib(1),o.Dc("ngForOf",null==e?null:e.categories)("ngForTrackBy",i.trackById)}}function be(e,t){if(1&e&&(o.cc(0,"div",59),o.cc(1,"div",60),o.ac(2),o.gc(3,61),o.Zb(),o.dd(4,": "),o.bc(),o.bd(5,fe,5,5,"div",62),o.bc()),2&e){const e=o.uc(2);o.Ib(5),o.Dc("ngForOf",e.extraSearchResult)("ngForTrackBy",e.trackById)}}const ge=function(){return{suppressScrollX:!0}},_e=function(e){return{"category-list__cat-list_disabled":e}};function ve(e,t){if(1&e&&(o.cc(0,"div",22,23),o.vc(2,"async"),o.bd(3,ne,3,2,"div",24),o.bd(4,se,2,0,"div",25),o.vc(5,"async"),o.bd(6,re,5,6,"div",26),o.vc(7,"async"),o.bd(8,be,6,2,"div",27),o.vc(9,"async"),o.bc()),2&e){const e=t.ngIf,i=o.uc();o.Dc("hidden",o.wc(2,8,i.isLoading$))("perfectScrollbar",o.Gc(16,ge))("ngClass",o.Hc(17,_e,i.selectedFolderless)),o.Ib(3),o.Dc("ngForOf",e)("ngForTrackBy",i.trackById),o.Ib(1),o.Dc("ngIf",!o.wc(5,10,i.isLoading$)&&0===i.matchesCounter&&!!i.query.length),o.Ib(2),o.Dc("ngIf",!o.wc(7,12,i.isLoading$)&&!i.singleCategory&&"list"==i.mode),o.Ib(2),o.Dc("ngIf",!o.wc(9,14,i.isLoading$)&&i.query&&(null==i.extraSearchResult?null:i.extraSearchResult.length)&&"list"==i.mode)}}function ke(e,t){1&e&&(o.cc(0,"div",75),o.Xb(1,"cu-loader"),o.bc())}function ye(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-checkbox",76),o.qc("onChange",function(){return o.Uc(e),o.uc().toggleFolderless()}),o.gc(1,77),o.bc()}if(2&e){const e=o.uc();o.Dc("checked",e.selectedFolderless)}}function we(e,t){if(1&e&&o.Yb(0,78),2&e){const e=o.uc();o.Dc("ngTemplateOutlet",e.extraItemTemplate)}}let xe=(()=>{class e{constructor(e,t,i,n,p){this.dataService=e,this.navService=t,this.categoryService=i,this.changeDetector=n,this.store=p,this.displaySearch=!0,this.showTaskCount=!1,this.query="",this.selectableProject=!0,this.mode="list",this.singleCategory=!1,this.handleGlobalKeys=!1,this.isFocusOnSearchInput=!0,this.checkCreateTaskPermission=!0,this.multiSelect=!1,this.allowFolderless=!1,this.selectedFolderless=!1,this.hideFolderless=!1,this.autoSelectProject=!0,this.onSelect=new o.o,this.onChangeProject=new o.o,this.onNoCategories=new o.o,this.onClearSearch=new o.o,this.onToggleCategory=new o.o,this.destroy$=new s.a,this.debounceExtraSearch=new s.a,this.matchesCounter=0,this.categoryList=[],this.extraSearchResult=[],this.extraSearchFlatResult=[],this.extraExpanded={},this.defaultNav={category:null,subcategory:null},this.selectedSubcategoriesMap={},this.selectedProjectId$=new c.a(null),this.isConnected$=this.store.select(y.b).pipe(Object(l.a)(e=>!e)),this.selectedProject$=this.selectedProjectId$.pipe(Object(d.a)(e=>!!e),Object(u.a)(e=>e===g.h?Object(a.a)({id:g.h,name:"Shared with me",permissions:null}):this.store.select(Object(v.getProjectById)(e)))),this.isLoading$=this.selectedProjectId$.pipe(Object(d.a)(e=>!!e),Object(u.a)(e=>e===g.h?Object(a.a)(!1):Object(r.a)([this.store.select(Object(v.getLoadingCategoriesById)(e)),this.store.select(Object(v.getCategoriesById)(e)),this.store.select(v.getCreateListStateMap).pipe(Object(l.a)(e=>e[g.d]&&e[g.d].saving))]).pipe(Object(l.a)(([e,t,i])=>!t&&e||i)))),this.sharedCategories$=this.store.select(Object(v.getCategoriesWithSharedAndOptions)()).pipe(Object(l.a)(e=>"list"===this.mode?e:e&&e.filter(e=>e.id!==g.h))),this.projectsWithShared$=this.sharedCategories$.pipe(Object(u.a)(e=>this.store.select(e&&e.length?v.getProjectsWithShared:v.getAllProjects))),this.categories$=this.selectedProject$.pipe(Object(d.a)(e=>!!e),Object(m.a)(e=>{e.id!==g.h&&(this.store.dispatch(new w.Lf(e.id)),this.openCategories={})}),Object(u.a)(e=>e.id===g.h?this.sharedCategories$:this.store.select(Object(v.getCategoriesById)(e.id)).pipe(Object(l.a)(e=>(e||[]).map(e=>Object.assign(Object.assign({},e),{permissions:e.permissions?Object.assign(Object.assign(Object.assign({},_.h[e.permissions.team_role]),_.g[e.permissions.permission_level]),e.permissions):null,subcategories:(e.subcategories||[]).map(e=>Object.assign(Object.assign({},e),{permissions:e.permissions?Object.assign(Object.assign(Object.assign({},_.h[e.permissions.team_role]),_.g[e.permissions.permission_level]),e.permissions):null}))}))))),Object(l.a)(e=>e&&this.excludeCategoryId?e.filter(e=>e.id!==this.excludeCategoryId):e)),this.openCategories={},this.visibleCategories={},this.visibleSubcategories={},this.disabledSubcategories={},this.notAllowedToCreateTaskInListText=$localize`:@@common_not-allowed-to-create-task-in-list:You are not able to create tasks in this list`,this.trackById=(e,t)=>t.id}ngOnInit(){this.debounceExtraSearch.pipe(Object(p.a)(250),Object(d.a)(()=>this.query&&this.query.trim()&&"list"===this.mode),Object(h.a)(this.destroy$)).subscribe(()=>this.loadExtraCategories()),this.store.dispatch(new w.Of("category list")),this.categories$.pipe(Object(h.a)(this.destroy$)).subscribe(e=>{this.categoryList=Object(n.a)(e),this.onNoCategories.emit(!!this.categoryList.length),this.search(!1)}),this.store.select(v.getDefaultProjectWithShared).pipe(Object(f.a)(),Object(d.a)(e=>!!e&&!this.selectedProject&&this.autoSelectProject),Object(h.a)(this.destroy$)).subscribe(e=>this.selectProject(e))}ngAfterViewInit(){this.isFocusOnSearchInput&&this.focus(),this.scrollToSelected()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){e.defaultProject&&this.selectProject(this.defaultProject||this.selectedProject),e.query&&this.search(),e.selectedSubcategories&&this.selectedSubcategories&&(this.selectedSubcategoriesMap={},this.selectedSubcategories.forEach(e=>{this.selectedSubcategoriesMap[e.id]=!0})),e.statusName&&(this.disabledStatusMessage=$localize`:@@errors_status-not-existin-in-list:The status "${this.statusName}:statusName:" does not exist in this List.`)}scrollToSelected(e=0){this.selectedSubcategoryId&&setTimeout(()=>{const t=this.scrollbar.elementRef.nativeElement.querySelector(".category-list_active");if(t){const i=t.getBoundingClientRect(),o=this.scrollbar.elementRef.nativeElement.getBoundingClientRect();(i.top<o.top||i.bottom>o.bottom)&&this.scrollbar.scrollToElement(".category-list_active",e,0)}})}selectProject(e){!e||e.id===g.h&&!e.categories||this.selectedProject&&this.selectedProject.id===e.id||(!1!==e.access&&e.name||(e={id:g.h}),this.selectedProject=e,this.selectedProjectId$.next(e.id),e.id!==g.h&&this.onChangeProject.emit(e),this.changeDetector.markForCheck())}clickCategory(e){"list"===this.mode?this.openCategories[e.id]=!this.openCategories[e.id]:(this.selectCategory(!0,e,null),this.selectedCategoryId=e.id,this.selectedSubcategoryId=null),this.onToggleCategory.emit(),this.changeDetector.markForCheck()}squashEvent(e){e&&(e.stopPropagation(),e.preventDefault())}clickSubcategory(e,t,i){(!this.checkCreateTaskPermission||t&&t.permissions&&t.permissions.can_create_tasks)&&(this.squashEvent(i),this.selectCategory(!0,e,t),this.selectedCategoryId=e.id,this.selectedSubcategoryId=t.id,this.changeDetector.markForCheck())}clickExtra(e,t,i,o){o&&o.stopPropagation(),this.selectedCategoryId=t.id,this.selectedSubcategoryId=i.id,this.selectProject(e),this.changeDetector.markForCheck(),this.onSelect.emit({source:"extra",type:i?"subcategory":"category",project:e,category:t,subcategory:Object.assign(Object.assign({},i),{category:t.id})})}reset(){this.matchesCounter=0,this.clearSearch(!1),this.visibleCategories={},this.visibleSubcategories={},this.openCategories={},this.disabledSubcategories={},this.categoryList.forEach(e=>{let t=!1;this.visibleCategories[e.id]=!0,this.openCategories[e.id]=e.id===this.selectedCategoryId,"list"===this.mode&&e.subcategories.forEach(i=>{this.statusName&&(this.disabledSubcategories[i.id]=!this.hasStatus(this.selectedProject,e,i)),this.visibleSubcategories[i.id]=!0,t=!0,i.id===this.selectedSubcategoryId&&(this.openCategories[e.id]=!0)}),this.singleCategory&&(this.visibleCategories[e.id]=e.id===this.selectedCategoryId,this.openCategories[e.id]=e.id===this.selectedCategoryId),e.hidden&&(this.visibleCategories[e.id]=!1,this.openCategories[e.id]=!0),this.visibleCategories[e.id]&&!t&&(this.visibleCategories[e.id]=!1)}),this.updatePrevNext(),this.changeDetector.markForCheck()}search(e=!0){const t=this.query.trim().toLowerCase();this.matchesCounter=0,this.visibleCategories={},this.visibleSubcategories={},this.disabledSubcategories={},e&&(this.openCategories={}),this.categoryList.forEach(e=>{this.visibleCategories[e.id]=!t||-1!==e.name.toLowerCase().indexOf(t),this.openCategories[e.id]=Boolean(this.visibleCategories[e.id]&&t),this.visibleCategories[e.id]&&this.matchesCounter++,"list"===this.mode&&e.subcategories.forEach(i=>{this.statusName&&(this.disabledSubcategories[i.id]=!this.hasStatus(this.selectedProject,e,i)),this.visibleSubcategories[i.id]=!t||-1!==i.name.toLowerCase().indexOf(t)||-1!==e.name.toLowerCase().indexOf(t),i.id===this.selectedSubcategoryId&&(this.openCategories[e.id]=!0),-1!==i.name.toLowerCase().indexOf(t)&&(this.visibleCategories[e.id]=!0,this.matchesCounter++,t.length&&(this.openCategories[e.id]=!0))}),this.singleCategory&&(this.visibleCategories[e.id]=e.id===this.selectedCategoryId,this.openCategories[e.id]=e.id===this.selectedCategoryId),e.hidden&&(this.visibleCategories[e.id]=!1,this.openCategories[e.id]=!0)}),this.debounceExtraSearch.next(),this.updatePrevNext(),t&&this.defaultNav.category&&this.defaultNav.subcategory&&(this.selectedCategoryId=this.defaultNav.category.id,this.selectedSubcategoryId=this.defaultNav.subcategory.id),this.changeDetector.markForCheck()}updatePrevNext(){let e,t;this.defaultNav.category=null,this.defaultNav.subcategory=null,this.categoryList.forEach(i=>{i.prev=null,i.next=null,e&&this.visibleCategories[i.id]&&(i.prev=e,e.next=i),"list"===this.mode&&i.subcategories.forEach(e=>{e.prev=null,e.next=null,e.parent=i,t&&this.visibleSubcategories[e.id]&&(e.prev=t,t.next=e),this.visibleSubcategories[e.id]&&(t=e,this.defaultNav.subcategory||(this.defaultNav.category=i,this.defaultNav.subcategory=e))}),this.visibleCategories[i.id]&&(e=i,this.defaultNav.category||(this.defaultNav.category=i))})}focus(){setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement.focus()},100)}addSubcategory(e,t){e&&(e.stopPropagation(),e.preventDefault()),this.openCategories[t.id]=!0,this.addingSubcategory=t,this.changeDetector.markForCheck()}saveSubcategory(e,t){const{action:i,name:o}=e;"NEW"!==t.id?("blur"!==i||o||this.cancelSubcategoryAdding(),this.addingSubcategory&&this.navService.createSection(t.id,o,null,!1,!1,!1).subscribe(([e,i,o])=>{this.newSubcategoryNameError=null,this.selectedProject&&this.selectedProject.id!==g.h&&!e.project_id&&(e.project_id=this.selectedProject.id),this.store.dispatch(new w.E(e,t.id,e.project_id)),t.subcategories=[...t.subcategories,Object(n.a)(e)],this.selectedCategoryId=t.id,this.selectedSubcategoryId=e.id,this.clearSearch(),this.cancelSubcategoryAdding(),this.selectCategory(!1,t,e)},e=>{if("blur"!==i){switch(e.ECODE){case"SUBCAT_016":this.newSubcategoryNameError=$localize`:@@errors_name-already-used:This name is already in use`;break;case"SUBCAT_020":this.newSubcategoryNameError=$localize`:@@cu-category-list-legacy__form-errors_name-required:Name required!`;break;default:this.newSubcategoryNameError=e.err||$localize`:@@errors_unknown:Unknown error`}this.changeDetector.markForCheck()}else this.cancelSubcategoryAdding()})):this.saveCategory(Object.assign(Object.assign({},e),{parentName:t.name}))}cancelSubcategoryAdding(){this.addingSubcategory=null,this.newSubcategoryName=null,this.newSubcategoryNameError=null,this.categoryList=this.categoryList.filter(e=>"NEW"!==e.id),this.changeDetector.markForCheck()}addCategory(e){e&&(e.stopPropagation(),e.preventDefault()),this.addingCategory=!0,this.changeDetector.markForCheck()}presaveCategory(e){if(!this.addingCategory)return;const{action:t,name:i}=e;"blur"!==t||i||this.cancelCategoryAdding();const o=this.categoryList.find(e=>e.hidden);if(o&&o.subcategories.some(e=>e.name===i))return this.newCategoryNameError=$localize`:@@errors_list-name-taken:List name taken`,void(this.selectedCategoryId=null);this.cancelCategoryAdding(),this.selectedSubcategoryId=null,this.clearSearch(),this.search(),this.store.dispatch(new w.Yi(g.d,{saving:!0,index:null,error:null})),this.store.dispatch(new w.Jb({projectId:this.selectedProjectId$.value,id:g.d,name:i,redirect:!1}))}saveCategory(e){const{action:t,name:i,parentName:o}=e;"blur"!==t||i&&o||this.cancelCategoryAdding(!0);const s=this.categoryList.find(e=>e.name===o);if(s){if(s.saved)return;s.saved=!0}this.dataService.createCategory(this.selectedProject.id,o,{parentName:o,override_statuses:!1,subcategories:[{name:i}]}).subscribe(e=>{e.saved=!0,this.newCategoryNameError=null,e.subcategories=e.subcategories||[],this.categoryList.push(Object(n.a)(e)),this.store.select(Object(v.getCategoriesById)(this.selectedProject.id)).pipe(Object(f.a)(),Object(d.a)(e=>!!e)).subscribe(t=>{this.store.dispatch(new w.Ui({projectId:this.selectedProject.id,data:[...t,e],updateLoading:!0}))}),this.categoryService.categoryCreated(e.id),this.selectedCategoryId=e.id;const t=e.subcategories&&e.subcategories.length>0?e.subcategories[0]:null;this.selectedSubcategoryId=t?t.id:null,this.clearSearch(),this.cancelCategoryAdding(!0),t&&this.selectCategory(!1,e,t),this.store.dispatch(new w.Qf(this.selectedProject.id)),this.categoryService.onCategoryCreate.emit(e)},e=>{if("blur"!==t){switch(this.categoryList=this.categoryList.filter(e=>"NEW"!==e.id),this.newCategoryName=o,this.newSubcategoryName=i,this.addingCategory=!0,e.ECODE){case"CAT_024":this.newCategoryNameError=$localize`:@@errors_name-already-used:This name is already in use`;break;case"SUBCAT_023":this.newSubcategoryNameError=$localize`:@@cu-category-list-legacy__form-errors_name-required:Name required!`;break;default:this.newCategoryNameError=e.err||$localize`:@@errors_unknown:Unknown error`}this.changeDetector.markForCheck()}else this.cancelCategoryAdding()})}cancelCategoryAdding(e=!1){this.addingCategory=!1,this.newCategoryName=null,this.newCategoryNameError=null,e&&(this.categoryList=this.categoryList.filter(e=>"NEW"!==e.id),this.addingSubcategory=null),this.changeDetector.markForCheck()}clearSearch(e=!0){this.query="",e&&this.search(),this.onClearSearch.emit()}keydown(e){switch(e.which){case b.a.ARROW_UP:this.selectPrev();break;case b.a.TAB:case b.a.ARROW_DOWN:this.selectNext();break;case b.a.ENTER:if(this.addingSubcategory)return;if(this.matchesCounter>0||!this.query||!this.query.trim()){if(this.selectedSubcategoryId){const e=this.findSelectedCategory();if(e){const t=this.findSelectedSubcategory(e);this.selectCategory(!1,e,t)}}}else this.extraItemSelected&&this.clickExtra(this.extraItemSelected.project,this.extraItemSelected.category,this.extraItemSelected)}}findSelectedCategory(){if(this.selectedCategoryId)return this.categoryList.find(e=>e.id===this.selectedCategoryId)}findSelectedSubcategory(e){if(!this.selectedSubcategoryId)return;const t=e||this.findSelectedCategory();return t?t.subcategories.find(e=>e.id===this.selectedSubcategoryId):void 0}selectSibling(e){if(0===this.matchesCounter&&this.query&&this.query.trim()){if(this.extraSearchFlatResult.length>0){const t=this.extraItemSelected?this.extraSearchFlatResult.findIndex(e=>e.id===this.extraItemSelected.id):-1;-1===t?this.extraItemSelected=this.extraSearchFlatResult[0]:"next"===e?t<this.extraSearchFlatResult.length-1&&(this.extraItemSelected=this.extraSearchFlatResult[t+1]):t>0&&(this.extraItemSelected=this.extraSearchFlatResult[t-1])}}else if("list"===this.mode){const t=this.findSelectedSubcategory();let i=null;t&&this.visibleSubcategories[t.id]&&t[e]&&t[e].parent?i=t[e]:this.defaultNav.subcategory&&this.defaultNav.subcategory.parent&&(i=this.defaultNav.subcategory),i&&(this.openCategories[i.parent.id]=!0,this.selectedCategoryId=i.parent.id,this.selectedSubcategoryId=i.id,this.changeDetector.markForCheck(),setTimeout(()=>{this.scrollToSelected(-100)}))}else{const t=this.findSelectedCategory();let i=null;t&&this.visibleCategories[t.id]&&t[e]&&(i=t[e]),i&&(this.selectedCategoryId=i.id,this.selectedSubcategoryId=null,this.changeDetector.markForCheck(),setTimeout(()=>{this.scrollToSelected(-100)}))}}selectNext(){this.selectSibling("next")}selectPrev(){this.selectSibling("prev")}hasStatus(e,t,i){return Object(v.getStatuses)(e,t,i).some(e=>e.status===this.statusName)}quillBlotKeyDown(e){this.handleGlobalKeys&&this.keydown(e.detail)}docKeyDown(e){this.handleGlobalKeys&&this.keydown(e)}toggleFolderless(){this.selectedFolderless=!this.selectedFolderless;const e=this.findSelectedCategory();if(this.selectedFolderless)this.onSelect.emit({source:"regular",type:"subcategory",project:this.selectedProject,category:{id:g.d,name:""},subcategory:null,byClick:!1});else{const t=this.findSelectedSubcategory();this.onSelect.emit({source:"regular",type:t?"subcategory":"category",project:this.selectedProject,category:e,subcategory:t,byClick:!1})}}selectCategory(e=!1,t,i){if("list"===this.mode&&!i)return;const o=this.selectedProject&&this.selectedProject.id===g.h?{id:t.project_id||i.project_id,name:$localize`:@@common_shared-with-me:Shared with me`}:this.selectedProject,n=t&&t.id===g.h?{id:i.category,name:$localize`:@@common_shared-with-me--folder:Folder shared with me`}:t;this.onSelect.emit({source:"regular",type:i?"subcategory":"category",project:o,category:n,subcategory:i,byClick:e})}loadExtraCategories(){this.extraSearchResult=[],this.extraSearchFlatResult=[],this.store.select(v.getTeam).pipe(Object(f.a)(),Object(d.a)(e=>!!e),Object(u.a)(e=>this.dataService.searchSubcategories(e.id,this.query,!0)),Object(h.a)(this.destroy$)).subscribe(e=>{this.extraSearchResult=e.projects.map(e=>Object.assign(Object.assign({},e),{subcategories:e.subcategories.map(t=>({id:t.id,name:t.name,category:{id:t.category,name:t.category_name,hidden:t.category_hidden},project_id:e.id,project:e}))})),this.extraSearchResult.forEach(e=>{this.extraSearchFlatResult=[...this.extraSearchFlatResult,...e.subcategories]}),this.extraSearchResult=Object(k.b)(this.extraSearchResult,"orderindex"),this.extraItemSelected=this.extraSearchFlatResult.length>0?this.extraSearchFlatResult[0]:null,this.changeDetector.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(x.a),o.Wb(I.a),o.Wb(T.a),o.Wb(o.h),o.Wb(C.Store))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-category-list-legacy"]],viewQuery:function(e,t){if(1&e&&(o.jd(R,1),o.jd(M,1)),2&e){let e;o.Qc(e=o.rc())&&(t.searchInput=e.first),o.Qc(e=o.rc())&&(t.scrollbar=e.first)}},hostBindings:function(e,t){1&e&&o.qc("slashCommandKeyDown",function(e){return t.quillBlotKeyDown(e)},!1,o.Sc)("keydown",function(e){return t.docKeyDown(e)},!1,o.Sc)},inputs:{displaySearch:"displaySearch",showTaskCount:"showTaskCount",query:"query",selectableProject:"selectableProject",defaultProject:"defaultProject",selectedCategoryId:"selectedCategoryId",selectedSubcategoryId:"selectedSubcategoryId",mode:"mode",singleCategory:"singleCategory",handleGlobalKeys:"handleGlobalKeys",isFocusOnSearchInput:"isFocusOnSearchInput",checkCreateTaskPermission:"checkCreateTaskPermission",excludeCategoryId:"excludeCategoryId",multiSelect:"multiSelect",selectedSubcategories:"selectedSubcategories",headerTemplate:"headerTemplate",statusName:"statusName",allowFolderless:"allowFolderless",selectedFolderless:"selectedFolderless",hideFolderless:"hideFolderless",extraItemTemplate:"extraItemTemplate",autoSelectProject:"autoSelectProject"},outputs:{onSelect:"onSelect",onChangeProject:"onChangeProject",onNoCategories:"onNoCategories",onClearSearch:"onClearSearch",onToggleCategory:"onToggleCategory"},features:[o.Gb],decls:9,vars:9,consts:function(){let e,t,i,o,n,s,c,a,r;return e=$localize`:@@common_space␟52d92107e6b2e533468a728409354191bc7b0618␟8946906119075338535:Space`,t=$localize`:form input placeholder@@forms_placeholder--search␟7e892ba15f2c6c17e83510e273b3e10fc32ea016␟4580988005648117665:Search`,i=$localize`:@@common_new-list␟4203b703f0106cebe8899a3af62d8bcec80b8762␟7941198841260526989:New List`,o=$localize`:@@common_enter-list-name-1␟3b94d60d9d8c8994618f61841b941e8cc4201be4␟6647497505370990842:Enter List na﻿me`,n=$localize`:@@cu-category-list-legacy__no-matches-found␟ccee2edfcf8bf8e0fb13c4df5fbb2d40514a930d␟371354490005711806: No matches found `,s=$localize`:@@common_enter-list-name-1␟3b94d60d9d8c8994618f61841b941e8cc4201be4␟6647497505370990842:Enter List na﻿me`,c=$localize`:@@common_create-new-list␟897bff9221f9135cc10ba667ebec143509fc2847␟4408322783391189011:Create new List`,a=$localize`:@@cu-category-list-legacy__other-spaces␟692c4aa3cf51a74b25dc62555c74e53888f694bb␟8648234184919847520:Other Spaces`,r=$localize`:@@cu-category-list-legacy__form-label_folderless-list␟0399e3b6e842653aff098c6de25f4cbf443911a2␟5716536706244100678: Folderless List `,[["tabindex","0",1,"category-list",3,"keydown"],[4,"ngTemplateOutlet"],["class","category-list__project",4,"ngIf"],["class","category-list__search",3,"ngClass",4,"ngIf"],["class","category-list__cat-list",3,"hidden","perfectScrollbar","ngClass",4,"ngIf"],["class","category-list__loader",4,"ngIf"],["class","category-list__folderless",3,"checked","onChange",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"category-list__project"],[1,"category-list__space"],e,["class","category-list__count",4,"ngIf"],[3,"selectedProject","projects","projectSelected"],[1,"category-list__count"],[1,"category-list__search",3,"ngClass"],[1,"cu-search","cu-search_lg",3,"ngClass"],["type","text","placeholder",t,1,"cu-search__input",3,"ngModel","ngModelChange"],["searchInput",""],[1,"cu-search__icon"],[1,"cu-icon","cu-icon_search"],[1,"cu-search__spinner"],[1,"cu-icon","cu-icon_spinner"],[1,"category-list__cat-list",3,"hidden","perfectScrollbar","ngClass"],["scrollbar","ngxPerfectScrollbar"],["class","category-list__cat-list-item",4,"ngFor","ngForOf","ngForTrackBy"],["class","category-list__empty",4,"ngIf"],["class","category-list__add-category",4,"ngIf"],["class","category-list__extra",4,"ngIf"],[1,"category-list__cat-list-item"],["class","category-list__cat-header",3,"ngClass","click",4,"ngIf"],["class","category-list__cat-body",3,"ngClass",4,"ngIf"],[1,"category-list__cat-header",3,"ngClass","click"],["class","category-list__cat-chevron","icon","cu2-caret-down",3,"ngClass",4,"ngIf"],[1,"category-list__cat-name"],["icon","cu2-folder-sidebar",1,"category-list__cat-folder",3,"ngClass"],[1,"category-list__cat-name-title"],["class","category-list__cat-name-plus","cuLink","","cuTooltip",i,3,"click",4,"ngIf"],["icon","cu2-caret-down",1,"category-list__cat-chevron",3,"ngClass"],["cuLink","","cuTooltip",i,1,"category-list__cat-name-plus",3,"click"],[1,"category-list__cat-body",3,"ngClass"],["class","category-list__add-subcategory",4,"ngIf"],["class","category-list__cat-header",3,"ngClass","cuTooltip","click",4,"ngIf"],[1,"category-list__cat-header",3,"ngClass","cuTooltip","click"],[1,"category-list__subcat-name"],["icon","check-bold","class","category-list__subcat-check-icon",4,"ngIf"],["class","category-list__subcat-count",4,"ngIf"],["icon","check-bold",1,"category-list__subcat-check-icon"],[1,"category-list__subcat-count"],[1,"category-list__add-subcategory"],["placeholder",o,3,"name","error","onCancel","onSave"],["input",""],[1,"category-list__empty"],n,[1,"category-list__add-category"],["class","category-list__add-category-link",3,"click",4,"ngIf"],["placeholder",s,3,"name","error","onCancel","onSave",4,"ngIf"],[1,"category-list__add-category-link",3,"click"],c,["placeholder",s,3,"name","error","onCancel","onSave"],[1,"category-list__extra"],[1,"category-list__extra-title"],a,["class","category-list__extra-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"category-list__extra-group"],[1,"category-list__extra-group-title"],["class","category-list__extra-item",3,"category-list__extra-item_active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"category-list__extra-item",3,"click"],["class","category-list__extra-item-category",4,"ngIf"],["class","category-list__extra-item-chevron","icon","angle-right-no-padding",4,"ngIf"],[1,"category-list__extra-item-subcategory"],[1,"category-list__extra-item-category"],["icon","angle-right-no-padding",1,"category-list__extra-item-chevron"],[1,"category-list__cat-header",3,"click"],["icon","angle-right",1,"category-list__cat-chevron",3,"ngClass"],["class","category-list__subcat-check-icon","icon","check-bold",4,"ngIf"],[1,"category-list__loader"],[1,"category-list__folderless",3,"checked","onChange"],r,[3,"ngTemplateOutlet"]]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.qc("keydown",function(e){return t.keydown(e)}),o.bd(1,F,1,0,"ng-container",1),o.bd(2,N,8,7,"div",2),o.bd(3,G,9,9,"div",3),o.bd(4,ve,10,19,"div",4),o.bd(5,ke,2,0,"div",5),o.vc(6,"async"),o.bd(7,ye,2,1,"cu-checkbox",6),o.bd(8,we,1,1,"ng-container",7),o.bc()),2&e&&(o.Ib(1),o.Dc("ngTemplateOutlet",t.headerTemplate),o.Ib(1),o.Dc("ngIf",t.selectableProject),o.Ib(1),o.Dc("ngIf",t.displaySearch),o.Ib(1),o.Dc("ngIf",t.categoryList),o.Ib(1),o.Dc("ngIf",o.wc(6,7,t.isLoading$)),o.Ib(2),o.Dc("ngIf",t.allowFolderless),o.Ib(1),o.Dc("ngIf",t.extraItemTemplate))},directives:[D.x,D.q,O.a,D.o,S.c,S.p,S.s,E.a,D.p,P.a,j.a,A.a,$.a,U.a],pipes:[D.b],styles:['.category-list_dropdown{width:255px;padding:0}.category-list__folderless{margin:10px 0 0 15px}.category-list__search{border-bottom:1px solid #e3e3e3;margin-bottom:10px}.dark-theme .category-list__search{border-bottom:1px solid #2b343b}.category-list__search_disabled{opacity:.5;pointer-events:none}.category-list__search .cu-search__input{border:0;margin:0;padding:10px 20px 10px 50px}.category-list__search .cu-search__input::-webkit-input-placeholder{color:rgba(52,52,52,.4);font-size:14px}.category-list__search .cu-search__input::-moz-placeholder{color:rgba(52,52,52,.4);opacity:1;font-size:14px}.category-list__search .cu-search__input:-ms-input-placeholder{color:rgba(52,52,52,.4);font-size:14px}.category-list__search .cu-search__input:-moz-placeholder{color:rgba(52,52,52,.4);opacity:1;font-size:14px}.dark-theme .category-list__search .cu-search__input::-webkit-input-placeholder{color:#828588;font-size:14px}.dark-theme .category-list__search .cu-search__input::-moz-placeholder{color:#828588;opacity:1;font-size:14px}.dark-theme .category-list__search .cu-search__input:-ms-input-placeholder{color:#828588;font-size:14px}.dark-theme .category-list__search .cu-search__input:-moz-placeholder{color:#828588;opacity:1;font-size:14px}.category-list__empty{margin:20px 50px;text-align:center;font:400 13px/13px Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .category-list__empty{color:#abaeb0}.category-list .cu-dropdown.cu-dropdown_left>.cu-dropdown__menu{left:0;right:auto}.category-list-input{position:relative;padding:0 10px 0 15px}.dark-theme .category-list-input{background:#384047}.category-list-input__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:16px;display:flex;align-items:center;width:100%;border:1px solid;border-radius:3px;padding:5px 10px 5px 13px;margin:5px 0;background:transparent!important}@supports (--theme-main-color:#7b68ee){.category-list-input__input{border-color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.category-list-input__input{font-family:var(--global-font-support)}}.dark-theme .category-list-input__input{color:#d5d6d7;background:transparent}.category-list-input__input:focus{box-shadow:none}.category-list-input__input::-webkit-input-placeholder{padding-top:1px}.category-list__add-category-link{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;height:30px;padding:0 20px;display:flex;align-items:center}@supports (--theme-main-color:#7b68ee){.category-list__add-category-link{color:var(--theme-main-color)}}.category-list__add-category-link:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.category-list__add-category-link:hover{color:var(--theme-main-color-dark)}}.category-list__extra{border-top:1px solid #e3e3e3;margin-top:10px;padding:20px 10px 10px 15px}.dark-theme .category-list__extra{border-top:1px solid #2b343b}.category-list__extra-title{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:12px;text-transform:uppercase;color:#222;opacity:.3}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.category-list__extra-title{font-family:var(--global-font-support)}}.dark-theme .category-list__extra-title{color:#d5d6d7}.category-list__extra-group-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font:500 18px Gotham Pro,Proxima Nova,arial,serif;padding:12px 0 10px}.category-list__extra-item{font:300 11px Gotham Pro,Proxima Nova,arial,serif;padding:0 0 4px;margin-bottom:4px;cursor:pointer}.category-list__extra-item.category-list__extra-item_active .category-list__extra-item-category,.category-list__extra-item.category-list__extra-item_active .category-list__extra-item-subcategory,.category-list__extra-item:hover .category-list__extra-item-category,.category-list__extra-item:hover .category-list__extra-item-subcategory{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__extra-item.category-list__extra-item_active .category-list__extra-item-category,.category-list__extra-item.category-list__extra-item_active .category-list__extra-item-subcategory,.category-list__extra-item:hover .category-list__extra-item-category,.category-list__extra-item:hover .category-list__extra-item-subcategory{color:var(--theme-main-color)}}.category-list__extra-item.category-list__extra-item_active .category-list__extra-item-chevron use,.category-list__extra-item:hover .category-list__extra-item-chevron use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__extra-item.category-list__extra-item_active .category-list__extra-item-chevron use,.category-list__extra-item:hover .category-list__extra-item-chevron use{fill:var(--theme-main-color)}}.category-list__extra-item-category,.category-list__extra-item-subcategory{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:inline;color:#343434}.dark-theme .category-list__extra-item-category,.dark-theme .category-list__extra-item-subcategory{color:#abaeb0}.category-list__extra-item-subcategory{font-weight:500}.category-list__extra-item-chevron{width:10px;height:7px;margin-left:1px;display:inline-block}.category-list__extra-item-chevron use{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:rgba(52,52,52,.4)}.dark-theme .category-list__extra-item-chevron use{fill:#828588}.category-list__count{font-weight:400;font-size:12px;line-height:22px;color:#fff;min-width:22px;height:22px;text-align:center;background:#7b68ef;border-radius:12px;position:absolute;top:-10px;right:0;padding:0 6px;z-index:1}.category-list__space{position:relative;margin:0 0 3px;font:500 10px Gotham Pro,Proxima Nova,arial,serif;color:hsla(0,0%,46.7%,.5);text-transform:uppercase}.dark-theme .category-list__space{color:#828588}.category-list__project{padding:10px 10px 10px 15px}.category-list__project .cu-search_compact{margin:-6px 0 -5px}.category-list__project .cu-nav-project__toggle-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:1.15;position:relative;padding:0;color:#4a4a4a;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.category-list__project .cu-nav-project__toggle-text{font-family:var(--global-font-support)}}.dark-theme .category-list__project .cu-nav-project__toggle-text{color:#d5d6d7}.category-list__project .cu-dropdown__toggle{position:relative;display:flex;align-items:center;min-height:30px;max-width:none;padding:0;text-decoration:none;font:500 20px/21px Proxima Nova,arial,serif;color:#4a4a4a;margin:-6px 20px -5px 0}.category-list__project .cu-dropdown__toggle:hover .category-list__toggle-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__project .cu-dropdown__toggle:hover .category-list__toggle-text{color:var(--theme-main-color)}}.dark-theme .category-list__project .cu-dropdown__toggle .category-list__toggle-text{color:#d5d6d7}.category-list__project .cu-dropdown__toggle .category-list__dropdown-settings_down{display:block;width:6px;height:4px;cursor:pointer;opacity:.6}.category-list__project .cu-dropdown__menu{margin-left:0;margin-top:0}.category-list__project .cu-user-list{margin:5px 0}.category-list__project-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;flex-grow:1;display:block;font:500 14px/1.3em Gotham Pro,Proxima Nova,arial,serif;color:#544d61;text-decoration:none;padding:8px 20px;cursor:pointer}.category-list__project-item:hover{transition:none;color:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__project-item:hover{color:var(--theme-main-color)}}.category-list__project-item_selected{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__project-item_selected{color:var(--theme-main-color)}}.category-list__subcat-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;flex-grow:1;color:inherit;line-height:1.2;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.category-list__subcat-name{font-family:var(--global-font-support)}}.category-list__subcat-count{color:inherit;opacity:.5;font:300 11px/1 Gotham Pro,Proxima Nova,arial,serif;flex-shrink:0;margin-top:2px}.category-list__subcat-check-icon{display:block;width:13px;height:20px;position:absolute;right:15px;top:calc(50% - 8px)}.category-list__cat{position:relative}.category-list__cat-list{max-height:350px;overflow-y:auto}.category-list__cat-list_disabled{opacity:.5;pointer-events:none}.category-list__cat-header{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;padding:0 10px;position:relative;display:flex;align-items:center;cursor:pointer;font:500 16px/1 Gotham Pro,Proxima Nova,arial,serif;color:#707070}.dark-theme .category-list__cat-header{color:#d5d6d7}.category-list__cat-header:hover{background:#f9f9f9}.dark-theme .category-list__cat-header:hover{background:#2b343b}.category-list__cat-header.category-list_disabled{opacity:.5;cursor:not-allowed}.category-list__cat-header.category-list_active{background:#7b68ee;color:#fff!important}@supports (--theme-main-color:#7b68ee){.category-list__cat-header.category-list_active{background:var(--theme-main-color)}}.category-list__cat-header.category-list_active .category-list__cat-name,.category-list__cat-header.category-list_active .category-list__cat-name-title{color:#fff!important}.category-list__cat-chevron{position:absolute;top:8px;left:10px;transition:transform .2s cubic-bezier(.785,.135,.15,.86),fill .2s cubic-bezier(.785,.135,.15,.86);flex-shrink:0;width:14px;height:14px;cursor:pointer;fill:#d0d3d9;transform:rotate(-90deg)}.category-list__cat-chevron:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__cat-chevron:hover{fill:var(--theme-main-color)}}.category-list__cat-header:hover .category-list__cat-chevron{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__cat-header:hover .category-list__cat-chevron{fill:var(--theme-main-color)}}.category-list__cat-chevron_down{transform:rotate(0deg)}.category-list__cat-folder{transition:stroke .2s cubic-bezier(.785,.135,.15,.86),fill .2s cubic-bezier(.785,.135,.15,.86);flex-shrink:0;width:14px;height:12px;cursor:pointer;margin:-1px 7px 0 0;stroke-width:2px;stroke:#d0d3d9;fill:#d0d3d9}.dark-theme .category-list__cat-folder{stroke:#828588;fill:#828588}.category-list__cat-folder:hover{stroke:#7b68ee;fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__cat-folder:hover{stroke:var(--theme-main-color);fill:var(--theme-main-color)}}.category-list__cat-header:hover .category-list__cat-folder{stroke:#7b68ee;fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__cat-header:hover .category-list__cat-folder{stroke:var(--theme-main-color);fill:var(--theme-main-color)}}.category-list__cat-folder_open,.dark-theme .category-list__cat-folder_open{fill:transparent!important}.category-list__cat-name{flex-grow:1;padding:6px 10px 6px 16px;display:flex;align-items:center;min-width:0}.category-list__cat-name-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:15px;line-height:1.15;color:#717171;text-decoration:none}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.category-list__cat-name-title{font-family:var(--global-font-support)}}.dark-theme .category-list__cat-name-title{color:#828588}.category-list__cat-name-plus{display:none;font:500 20px/20px Gotham Pro,Proxima Nova,arial,serif;margin:-4px 10px;color:#7b68ee}@supports (--theme-main-color:#7b68ee){.category-list__cat-name-plus{color:var(--theme-main-color)}}.category-list__cat-name:hover .category-list__cat-name-plus,.category-list_open .category-list__cat-name .category-list__cat-name-plus{display:inline}.category-list__cat-body{overflow:hidden;height:0}.category-list__cat-body.category-list_open{height:auto}.category-list__cat-body .category-list__cat-header{height:30px;padding-left:47px;font:400 13px/13px Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .category-list__cat-body .category-list__cat-header{color:#d5d6d7}.category-list__cat-body .category-list__cat-header.category-list-folderless-list{padding-left:27px}'],encapsulation:2,changeDetection:0}),e})()},"6mdQ":function(e,t,i){"use strict";i.d(t,"a",function(){return I});var o=i("3E0/"),n=i("1G5W"),s=i("Kj3r"),c=i("/uUt"),a=i("fXoL"),r=i("/qOb"),l=i("XNiG"),d=i("xgIS"),u=i("VRyK"),m=i("xog/"),p=i("jJW4"),h=i("drq7"),f=i("LdyQ"),b=i("n+1/"),g=i("aIzb");const _=["taskSelector"],v=["taskSelectorDropdown"],k=["scrollbar"],y=function(e){return[e]};function w(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-task-selector",3,4),a.qc("onSelect",function(t){return a.Uc(e),a.uc().selectTask(t.task)})("onLoad",function(){return a.Uc(e),a.uc().setListPosition()})("onProjectSelected",function(){a.Uc(e);const t=a.Rc(1),i=a.uc();return t._search((null==i.input?null:i.input.value.trim())||"")}),a.bc()}if(2&e){const e=a.uc();a.Dc("modifier","task-selector_task-mentions")("excludeCurrentTask",!1)("taskIdsToForSubtasks",e.taskId?a.Hc(7,y,e.taskId):null)("excludeParentTask",!1)("showSearch",!1)("showSubtasks",!1)("searchSubtasks",!0)}}const x=function(){return["top-left","bottom-left","auto"]};let I=(()=>{class e{constructor(e,t,i,o,n){this.helpers=e,this.sharedData=t,this.element=i,this.changeDetector=o,this.taskMentionService=n,this.untouched=!0,this.appended=!1,this.search$=new l.a,this.destroy$=new l.a,this.hide$=new l.a,this.isOpen=!1,this.position="bottom",this.onOpen=new a.o,this.onClose=new a.o,this.onSelect=new a.o,this.onDismiss=new a.o}ngAfterViewInit(){Object(d.a)(this.element.nativeElement,"click",{passive:!0}).pipe(Object(o.a)(50),Object(n.a)(this.destroy$)).subscribe(()=>{this.scrollbar&&this.scrollbar.update()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}insertTaskSelector(){this.input=document.querySelector("[data-task-mention-input]"),this.changeDetector.detectChanges(),this.taskSelectorDropdown.open(),this.isOpen=!0,this.taskSelector.selectProjectById(this.defaultProjectId),this.setEvents(),this.changeDetector.markForCheck(),this.onOpen.emit()}selectTask(e){this.onSelect.emit(Object.assign(Object.assign({},this.taskMentionService.getTaskMentionObject(e)),{teamId:this.sharedData.compatCurrentTeam.id,projectId:e.project.id})),this.hideSelector()}setEvents(){this.input=document.querySelector("[data-task-mention-input]"),this.changeDetector.detectChanges(),this.input&&(Object(d.a)(this.input,"keydown").pipe(Object(n.a)(Object(u.a)(this.hide$,this.destroy$))).subscribe(e=>{setTimeout(()=>{if(this.input)switch(e.which){case r.a.SPACE:this.untouched&&this.hideSelector(!0);break;case r.a.BACKSPACE:!this.input.value.length&&this.untouched&&this.hideSelector(!0);break;case r.a.ESCAPE:this.hideSelector(this.untouched);break;default:this.untouched=!1}},0)}),this.search$.pipe(Object(s.a)(300),Object(c.a)(),Object(n.a)(Object(u.a)(this.hide$,this.destroy$))).subscribe(e=>{this.taskSelector&&this.taskSelector._search(e)}),Object(d.a)(this.input,"input").pipe(Object(n.a)(Object(u.a)(this.hide$,this.destroy$))).subscribe(()=>{this.search$.next(this.input.value.trim())}),setTimeout(()=>{this.input&&this.input.focus()},0),this.setListPosition(),this.setScrollListener())}hideSelector(e=!1){if(this.isOpen){if(this.isOpen=!1,this.input){const e=this.helpers.closest(this.input,"task-mention");e&&e.remove(),this.input=null}this.scrollHandler&&(clearInterval(this.scrollHandler),this.scrollHandler=null),this.hide$.next(),this.taskSelectorDropdown.close(),this.untouched=!0,this.appended=!1,e?this.onDismiss.emit():this.onClose.emit()}}setListPosition(){this.taskSelectorDropdown&&this.input&&this.taskSelectorDropdown.isOpen&&this.taskSelectorDropdown.positionMenu()}setScrollListener(){this.scrollHandler=setInterval(()=>{this.setListPosition()},50)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(m.b),a.Wb(p.a),a.Wb(a.m),a.Wb(a.h),a.Wb(h.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-task-mention"]],viewQuery:function(e,t){if(1&e&&(a.jd(_,1),a.jd(v,1),a.jd(k,1)),2&e){let e;a.Qc(e=a.rc())&&(t.taskSelector=e.first),a.Qc(e=a.rc())&&(t.taskSelectorDropdown=e.first),a.Qc(e=a.rc())&&(t.scrollbar=e.first)}},inputs:{position:"position",defaultProjectId:"defaultProjectId",taskId:"taskId"},outputs:{onOpen:"onOpen",onClose:"onClose",onSelect:"onSelect",onDismiss:"onDismiss"},decls:3,vars:4,consts:[["cuDropdown","",1,"task-mention-list",3,"dropdownHostElement","dropdownCloseOnInsideClick","dropdownPlacement","dropdownClose"],["taskSelectorDropdown","dropdown"],["style","width: 380px; display: block",3,"modifier","excludeCurrentTask","taskIdsToForSubtasks","excludeParentTask","showSearch","showSubtasks","searchSubtasks","onSelect","onLoad","onProjectSelected",4,"cuDropdownMenu"],[2,"width","380px","display","block",3,"modifier","excludeCurrentTask","taskIdsToForSubtasks","excludeParentTask","showSearch","showSubtasks","searchSubtasks","onSelect","onLoad","onProjectSelected"],["taskSelector",""]],template:function(e,t){1&e&&(a.cc(0,"div",0,1),a.qc("dropdownClose",function(){return t.hideSelector(!0)}),a.bd(2,w,2,9,"cu-task-selector",2),a.bc()),2&e&&a.Dc("dropdownHostElement",t.input)("dropdownCloseOnInsideClick",!1)("dropdownPlacement",a.Gc(3,x))},directives:[f.b,b.a,g.a],encapsulation:2,changeDetection:0}),e})()},"6qs+":function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return c});var o=i("4DGh"),n=function(e){return e.PROJECT="project",e.CATEGORY="category",e.SUBCATEGORY="subcategory",e.VIEW="view",e.CUSTOM="custom",e.USER="user",e.DASHBOARD="dashboard",e}({});const s={dataMap:{},recentMap:{},error:"",loading:!1};function c(e=s,t){switch(t.type){case o.e:return Object.assign(Object.assign({},e),{loading:!0});case o.f:return Object.assign(Object.assign({},e),{dataMap:Object.assign(Object.assign({},e.dataMap),{[t.teamId]:t.data}),error:"",loading:!1});case o.h:return Object.assign(Object.assign({},e),{recentMap:Object.assign(Object.assign({},e.recentMap),{[t.teamId]:t.data})});case o.b:return Object.assign(Object.assign({},e),{recentMap:Object.assign(Object.assign({},e.recentMap),{[t.teamId]:t.items})});default:return e}}},"7Jxm":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{constructor(e){this.element=e,this.fileAdded=new o.o}click(){const e=new MouseEvent("click",{bubbles:!1});this.fileInput.dispatchEvent(e)}ngOnInit(){this.fileInput=this.element.nativeElement.querySelector("input"),this.fileInput.addEventListener("change",e=>{this.fileAdded.emit(e.target.files),this.fileInput.value=""},!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.m))},e.\u0275dir=o.Rb({type:e,selectors:[["","cuLinkUploader",""]],hostBindings:function(e,t){1&e&&o.qc("click",function(){return t.click()})},outputs:{fileAdded:"fileAdded"}}),e})()},"7MBn":function(e,t,i){"use strict";i.d(t,"a",function(){return k});var o=i("ofXK"),n=i("C8uC"),s=i("zkEv"),c=i("gb9A"),a=i("Dvla"),r=i("fTg4"),l=i("K0KF"),d=i("KyjD"),u=i("dzSB"),m=i("csDc"),p=i("a5Nn"),h=i("V6/z"),f=i("VBI8"),b=i("wGqn"),g=i("X5rV"),_=i("EHXF"),v=i("fXoL");let k=(()=>{class e{}return e.\u0275mod=v.Ub({type:e}),e.\u0275inj=v.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.LoaderModule,s.a,c.a,a.b,r.a,l.a,d.a,u.a,m.a,p.a,h.a,f.a,b.a,g.a,_.a]]}),e})()},"7XkT":function(e,t,i){"use strict";i.r(t),i.d(t,"UserProfileService",function(){return f});var o=i("I1n0"),n=i("l7P3"),s=i("SJHZ"),c=i("lJxs"),a=i("1G5W"),r=i("pLZG"),l=i("eIep"),d=i("SxV6"),u=i("XNiG"),m=i("TqRa"),p=i("c3rA"),h=i("fXoL");let f=(()=>{class e{constructor(e){this.store=e,this.destroy$=new u.a,this.enabled$=this.store.pipe(Object(n.select)(p.isGuestTeam),Object(c.a)(e=>!e&&!m.k)),this.enabled$.pipe(Object(a.a)(this.destroy$)).subscribe(e=>this.enabled=e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openProfile(e){e&&this.enabled&&this.openProfileById(e.id)}openProfileById(e,t){this.enabled&&this.getTeamUser(e).pipe(Object(r.a)(e=>!!e),Object(l.a)(e=>this.store.pipe(Object(n.select)(o.m),Object(d.a)(),Object(c.a)(t=>[e,!!t])))).subscribe(([e,i])=>{this.store.dispatch(Object(s.d)({user:e,overTaskView:i,tab:t}))})}getTeamUser(e){return this.store.pipe(Object(n.select)(p.getMembers),Object(d.a)(),Object(c.a)(t=>t&&t.map(e=>e.user).find(t=>t&&String(t.id)===String(e))))}}return e.\u0275fac=function(t){return new(t||e)(h.nc(n.Store))},e.\u0275prov=h.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"7eOh":function(e,t,i){"use strict";i.d(t,"a",function(){return Li});var o=i("fXoL"),n=i("LdyQ"),s=i("ofXK"),c=i("MJvn"),a=i("n+1/"),r=i("bFKe"),l=i("jJQC"),d=i("f0Wu"),u=i("XNiG"),m=i("1G5W"),p=i("h3dx"),h=i("VI01"),f=i("GXRk"),b=i("Ll/8"),g=i("/qOb"),_=i("xog/"),v=i("AeD3"),k=i("oy6Y"),y=i("jJW4"),w=i("UdVN"),x=i("NsZK"),I=i("WeU5"),T=i("Xiu6"),C=i("x018"),D=i("VhLi");const O=["freqDropdown"],S=["posDropdown"],E=["monthDropdown"],P=["endDropdown"],j=["statusDropdown"],A=["dueDropdown"],$=["copyDropdown"],U=["daysDropdown"],R=["searchDay"],M=["timeInput"],F=["timeInputDue"];function L(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).changeFreq(i.key)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.value," ")}}function N(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,L,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngForOf",e.frequencesKeys)("ngForTrackBy",e.trackByKey)}}const z=function(e){return{"recurring-options_selected":e}};function q(e,t){if(1&e){const e=o.dc();o.cc(0,"li",119),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(3).changeDays(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(3);o.Dc("ngClass",o.Hc(2,z,n.selectedDays[i])),o.Ib(1),o.fd(" ",e," ")}}const G=function(e){return{"cu-hidden":e}};function V(e,t){if(1&e){const e=o.dc();o.cc(0,"div",111),o.cc(1,"div",112),o.gc(2,113),o.bc(),o.cc(3,"div",114),o.cc(4,"ul",115),o.bd(5,q,2,4,"li",116),o.bc(),o.cc(6,"div",117),o.cc(7,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).changeRecurDaily()}),o.gc(8,118),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.Dc("ngClass",o.Hc(4,G,!e.options.recurDaily)),o.Ib(1),o.Dc("ngForOf",e.daysOfWeek)("ngForTrackBy",e.trackByValue),o.Ib(1),o.Dc("ngClass",o.Hc(6,G,e.options.recurDaily))}}function B(e,t){if(1&e){const e=o.dc();o.cc(0,"li",119),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(3).changeDays(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(3);o.Dc("ngClass",o.Hc(2,z,n.selectedDays[i])),o.Ib(1),o.fd(" ",e," ")}}function X(e,t){if(1&e&&(o.cc(0,"div",111),o.cc(1,"div",112),o.gc(2,120),o.bc(),o.cc(3,"div",114),o.cc(4,"ul",121),o.bd(5,B,2,4,"li",116),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(5),o.Dc("ngForOf",e.daysOfWeek)("ngForTrackBy",e.trackByValue)}}function H(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(5).changeMonthDayCombo(i.key)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.value," ")}}function W(e,t){if(1&e){const e=o.dc();o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.cc(3,"input",134,135),o.qc("keyup",function(t){return o.Uc(e),o.uc(4).searchDays(t)}),o.bc(),o.bd(5,H,2,1,"div",109),o.vc(6,"keys"),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(4);o.Ib(5),o.Dc("ngForOf",o.wc(6,2,e.daysFiltered))("ngForTrackBy",e.trackByKey)}}function K(e,t){if(1&e){const e=o.dc();o.cc(0,"div",131),o.cc(1,"div",132,133),o.qc("dropdownOpen",function(){o.Uc(e);const t=o.uc(3);return t.onDropdown.emit(!0),t.openDayDropdown()})("dropdownClose",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!1)}),o.cc(3,"div",29),o.cc(4,"div",30),o.dd(5),o.bc(),o.Xb(6,"div",31),o.bc(),o.bd(7,W,7,4,"div",32),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(1),o.Dc("dropdownDisabled",e.readOnly)("dropdownCloseOnInsideClick",!1),o.Ib(4),o.fd(" ",e.days[e.options.byMonthDay]," ")}}function Q(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(5).changePos(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function Z(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,Q,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(4);o.Ib(3),o.Dc("ngForOf",e.poses)("ngForTrackBy",e.trackByValue)}}function Y(e,t){if(1&e){const e=o.dc();o.cc(0,"li",119),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeDays(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(4);o.Dc("ngClass",o.Hc(2,z,n.selectedDays[i])),o.Ib(1),o.fd(" ",e," ")}}function J(e,t){if(1&e){const e=o.dc();o.cc(0,"div",136),o.cc(1,"div",27,137),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!1)}),o.cc(3,"div",29),o.cc(4,"div",30),o.dd(5),o.bc(),o.Xb(6,"div",31),o.bc(),o.bd(7,Z,4,2,"div",32),o.bc(),o.cc(8,"ul",121),o.bd(9,Y,2,4,"li",116),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.poses[e.options.bySetPos]," "),o.Ib(4),o.Dc("ngForOf",e.daysOfWeek)("ngForTrackBy",e.trackByValue)}}function ee(e,t){if(1&e){const e=o.dc();o.cc(0,"div",122),o.Xb(1,"div",123),o.cc(2,"div",124),o.cc(3,"div",125),o.cc(4,"div",3),o.cc(5,"label"),o.cc(6,"input",126),o.qc("change",function(){return o.Uc(e),o.uc(2).changeMonthlyType(0)}),o.bc(),o.cc(7,"div",5),o.gc(8,127),o.bc(),o.bc(),o.bc(),o.cc(9,"div",3),o.cc(10,"label"),o.cc(11,"input",126),o.qc("change",function(){return o.Uc(e),o.uc(2).changeMonthlyType(1)}),o.bc(),o.cc(12,"div",5),o.gc(13,128),o.bc(),o.bc(),o.bc(),o.bc(),o.bd(14,K,8,3,"div",129),o.bd(15,J,10,4,"div",130),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(6),o.Dc("disabled",e.readOnly)("checked",0==e.options.monthlyType)("value",0),o.Ib(5),o.Dc("disabled",e.readOnly)("checked",1==e.options.monthlyType)("value",1),o.Ib(3),o.Dc("ngIf",0==e.options.monthlyType),o.Ib(1),o.Dc("ngIf",1==e.options.monthlyType)}}function te(e,t){if(1&e){const e=o.dc();o.cc(0,"div",146),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeMonth(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function ie(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,te,2,1,"div",145),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.months)("ngForTrackBy",e.trackByValue)}}function oe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",138),o.cc(1,"div",139),o.gc(2,140),o.bc(),o.cc(3,"div",141),o.cc(4,"div",27,142),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(6,"div",29),o.cc(7,"div",143),o.dd(8),o.bc(),o.Xb(9,"div",31),o.bc(),o.bd(10,ie,4,2,"div",32),o.bc(),o.cc(11,"input",144),o.qc("change",function(t){return o.Uc(e),o.uc(2).changeMonthDay(t)}),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.months[e.options.byMonth]," "),o.Ib(3),o.Dc("value",e.options.byMonthDay)}}function ne(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(3).changeEnd(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function se(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,ne,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngForOf",e.ends)("ngForTrackBy",e.trackByValue)}}function ce(e,t){if(1&e){const e=o.dc();o.cc(0,"div",147),o.cc(1,"input",148),o.qc("change",function(t){return o.Uc(e),o.uc(2).changeEndCount(t)}),o.bc(),o.dd(2),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("value",e.options.endCount),o.Ib(1),o.fd(" ",e.endTimeText," ")}}function ae(e,t){if(1&e){const e=o.dc();o.cc(0,"div",157),o.qc("click",function(e){return e.stopPropagation()}),o.cc(1,"div",158),o.cc(2,"cu-datepicker",159),o.qc("onSelect",function(t){return o.Uc(e),o.uc(3).changeEndDate(t.dueDate)})("onCloseDropdown",function(){return o.Uc(e),o.uc(),o.Rc(2).close()})("arrowClick",function(){return o.Uc(e),o.uc(),o.Rc(6).dateTimeInput.nativeElement.focus()})("click",function(){return o.Uc(e),o.uc(),o.Rc(6).dateTimeInput.nativeElement.focus()}),o.vc(3,"async"),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(3);let t=null;o.Ib(2),o.Dc("showStart",!1)("date",e.options.endDate)("showInput",!1)("weekStart",(null==(t=o.wc(3,4,e.sharedData.currentUser))?null:t.week_start_day)||0)}}function re(e,t){if(1&e){const e=o.dc();o.cc(0,"div",149),o.cc(1,"div",150,151),o.cc(3,"div",152,153),o.cc(5,"cu-datetime-natural-language",154,155),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeEndDate(t.newMoment)}),o.bc(),o.bc(),o.bd(7,ae,4,6,"div",156),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("dropdownCloseOnInsideClick",!1),o.Ib(4),o.Dc("dateVal",e.options.endDate)("dateFormatting",e.dateFormatting)("forceUpdate",!0)("inDatePicker",!1)("displayConsistent",!0)}}function le(e,t){if(1&e){const e=o.dc();o.cc(0,"div",161),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(3).selectAction(0===i?"UPDATE":"NEW")}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(3);o.Ob("recurring-list__item-disabled",!n.dueDate&&0===i),o.Dc("cuTooltip",n.dueDate||0!==i?null:"Due dates aren't enabled for this Space"),o.Ib(1),o.fd(" ",e," ")}}function de(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,le,2,4,"div",160),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngForOf",e.actions)("ngForTrackBy",e.trackByValue)}}const ue=function(e){return{"cu-checkbox_muted":e}};function me(e,t){if(1&e){const e=o.dc();o.cc(0,"div",179),o.cc(1,"label"),o.cc(2,"input",180),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(4).changeCopy(i.name)}),o.bc(),o.cc(3,"div",174),o.dd(4),o.bc(),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(4);o.Ib(2),o.Fc("name","copy_",e.name,""),o.Dc("ngClass",o.Hc(5,ue,null==i.options||null==i.options.copy?null:i.options.copy.everything))("checked",null!=i.options&&i.options.copy?i.options.copy[e.name]:null)("disabled",i.readOnly),o.Ib(2),o.fd(" ",e.label," ")}}function pe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",106),o.cc(1,"div",169),o.cc(2,"div",170),o.gc(3,171),o.bc(),o.cc(4,"div",172),o.cc(5,"label"),o.cc(6,"input",173),o.qc("click",function(){return o.Uc(e),o.uc(3).changeCopyAll()}),o.bc(),o.cc(7,"div",174),o.gc(8,175),o.bc(),o.bc(),o.bc(),o.Xb(9,"div",176),o.bc(),o.cc(10,"div",177),o.bd(11,me,5,7,"div",178),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(6),o.Dc("checked",null==e.options||null==e.options.copy?null:e.options.copy.everything)("disabled",e.readOnly),o.Ib(5),o.Dc("ngForOf",e.copyOptions)("ngForTrackBy",e.trackByName)}}function he(e,t){if(1&e){const e=o.dc();o.cc(0,"div",162),o.ac(1),o.gc(2,163),o.Zb(),o.cc(3,"div",164),o.cc(4,"div",165,166),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(6,"div",152),o.dd(7),o.bc(),o.bd(8,pe,12,4,"div",32),o.bc(),o.bc(),o.ac(9),o.mc(10,167),o.cc(11,"a",168),o.qc("click",function(){return o.Uc(e),o.uc(2).displayTask()}),o.bc(),o.jc(),o.Zb(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.Dc("dropdownDisabled",e.readOnly)("dropdownCloseOnInsideClick",!1),o.Ib(3),o.fd(" ",e.copyOptionsText," "),o.Ib(4),o.kc(e.copyTaskText),o.hc(10)}}function fe(e,t){1&e&&o.Xb(0,"div",187)}const be=function(e){return{color:e}};function ge(e,t){if(1&e){const e=o.dc();o.cc(0,"div",184),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(4).changeStatusOn(i)}),o.cc(1,"div",185),o.dd(2),o.bc(),o.bd(3,fe,1,0,"div",186),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(4);o.Dc("ngStyle",o.Hc(3,be,e.color)),o.Ib(2),o.fd(" ",e.status," "),o.Ib(1),o.Dc("ngIf",e.type===i.StatusTypes.Done)}}function _e(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,ge,4,5,"div",183),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.statuses)("ngForTrackBy",e.trackByStatus)}}function ve(e,t){if(1&e){const e=o.dc();o.cc(0,"div",83),o.cc(1,"div",84),o.ac(2),o.gc(3,181),o.Zb(),o.Xb(4,"div",182),o.bc(),o.cc(5,"div",87),o.cc(6,"div",27,88),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(8,"div",29),o.cc(9,"div",89),o.dd(10),o.bc(),o.Xb(11,"div",31),o.bc(),o.bd(12,_e,4,2,"div",32),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ob("recurring-options__highlight","statusOn"==e.highlight),o.Ib(6),o.Dc("dropdownDisabled",e.readOnly),o.Ib(3),o.Dc("ngStyle",o.Hc(5,be,null==e.options.statusOn?null:e.options.statusOn.color)),o.Ib(1),o.fd(" ",null==e.options.statusOn?null:e.options.statusOn.status," ")}}function ke(e,t){1&e&&(o.cc(0,"div",188),o.gc(1,189),o.bc())}function ye(e,t){if(1&e){const e=o.dc();o.cc(0,"input",148),o.qc("change",function(t){return o.Uc(e),o.uc(2).changeDueDateValue(t)}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("value",e.options.dueValue)}}function we(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeDueDateType(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(4);o.Ob("cu-hidden","UPDATE"===n.options.action&&"SCHEDULE"===n.options.type&&i==n.DueTypes.None||"NEW"===n.options.action&&"TRIGGER"===n.options.type&&(i==n.DueTypes.Recur||i==n.DueTypes.RecurNext)),o.Ib(1),o.fd(" ",e," ")}}function xe(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,we,2,3,"div",191),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.dues)("ngForTrackBy",e.trackByValue)}}function Ie(e,t){if(1&e){const e=o.dc();o.cc(0,"div",27,190),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(2,"div",29),o.cc(3,"div",30),o.dd(4),o.bc(),o.Xb(5,"div",31),o.bc(),o.bd(6,xe,4,2,"div",32),o.bc()}if(2&e){const e=o.uc(2);o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.options.dueValue>1?e.duesM[e.options.dueType]:e.duesS[e.options.dueType]," ")}}function Te(e,t){if(1&e){const e=o.dc();o.cc(0,"div",192),o.cc(1,"div",37),o.gc(2,193),o.bc(),o.cc(3,"div",39),o.cc(4,"div",40),o.Xb(5,"div",41),o.cc(6,"div",42),o.qc("click",function(){return o.Uc(e),o.uc(2).setShowTimeDue()}),o.gc(7,194),o.bc(),o.bc(),o.cc(8,"cu-datetime-natural-language",44,195),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeMoment(t,!0)}),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Dc("ngClass",o.Hc(9,G,!e.options.dueType||e.options.dueType<=2)),o.Ib(4),o.Dc("ngClass",o.Hc(11,G,e.showTimeDue)),o.Ib(4),o.Dc("ngClass",o.Hc(13,G,!e.showTimeDue))("dateVal",e.options.timeDue)("forTime",!0)("focusOnInit",!1)("timeExists",!0)("militaryTime",e.militaryTime)("placeholder","HH:MM")}}function Ce(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(2);o.Ib(1),o.ed(e.options.status.status)}}function De(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){return o.Uc(e),o.uc(3).changeStatus(null)}),o.gc(1,197),o.bc()}}function Oe(e,t){1&e&&o.Xb(0,"div",199)}function Se(e,t){if(1&e){const e=o.dc();o.cc(0,"div",184),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).changeStatus(i)}),o.cc(1,"div",185),o.dd(2),o.bc(),o.bd(3,Oe,1,0,"div",198),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(3);o.Dc("ngStyle",o.Hc(3,be,e.color)),o.Ib(2),o.fd(" ",e.status," "),o.Ib(1),o.Dc("ngIf",e.type===i.StatusTypes.Done)}}function Ee(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,De,2,0,"div",196),o.bd(4,Se,4,5,"div",183),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngIf","UPDATE"==e.options.action),o.Ib(1),o.Dc("ngForOf",e.statuses)("ngForTrackBy",e.trackByStatus)}}function Pe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeCopyType(i)}),o.dd(1),o.Xb(2,"div",205),o.bc()}if(2&e){const e=t.$implicit,i=t.index;o.Ib(1),o.fd(" ",e," "),o.Ib(1),o.Ec("cuTooltip",0==i?"Each time an occurrence happens, copy the very first task that recurring was set on.":1==i?"Each time an occurrence happens, copy the most recently recurred task (so if you have 3 recurrences, copy #3 instead of #1 for the next occurrence).":"")}}function je(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,Pe,3,2,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.copyTypes)("ngForTrackBy",e.trackByValue)}}function Ae(e,t){if(1&e){const e=o.dc();o.cc(0,"div",200),o.cc(1,"div",201),o.ac(2),o.gc(3,202),o.Zb(),o.Xb(4,"div",203),o.bc(),o.cc(5,"div",204),o.cc(6,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(8,"div",29),o.cc(9,"div",30),o.dd(10),o.bc(),o.Xb(11,"div",31),o.bc(),o.bd(12,je,4,2,"div",32),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ob("recurring-options__highlight","copyType"==e.highlight),o.Ib(6),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.copyTypes[e.options.copyType]," ")}}function $e(e,t){if(1&e){const e=o.dc();o.cc(0,"div",94),o.cc(1,"div",95),o.gc(2,206),o.bc(),o.cc(3,"div",97),o.cc(4,"div",207),o.cc(5,"label"),o.cc(6,"input",208),o.qc("click",function(){return o.Uc(e),o.uc(2).changeOnlyIfCompleted()}),o.bc(),o.cc(7,"div",100),o.ac(8),o.gc(9,209),o.Zb(),o.Xb(10,"div",210),o.bc(),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(6),o.Dc("checked",null==e.options?null:e.options.onlyIfCompleted)("disabled",e.readOnly)}}function Ue(e,t){if(1&e){const e=o.dc();o.cc(0,"div",94),o.cc(1,"div",95),o.gc(2,211),o.bc(),o.cc(3,"div",97),o.cc(4,"div",207),o.cc(5,"label"),o.cc(6,"input",212),o.qc("click",function(){return o.Uc(e),o.uc(2).changeRecurImmediately()}),o.bc(),o.cc(7,"div",100),o.ac(8),o.gc(9,213),o.Zb(),o.Xb(10,"div",214),o.bc(),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(6),o.Dc("checked",null==e.options?null:e.options.recurImmediately)("disabled",e.readOnly),o.Ib(3),o.kc(null==e.options||null==e.options.statusOn?null:e.options.statusOn.status),o.hc(9)}}function Re(e,t){if(1&e){const e=o.dc();o.cc(0,"div",94),o.cc(1,"div",95),o.gc(2,215),o.bc(),o.cc(3,"div",97),o.cc(4,"div",98),o.cc(5,"label"),o.cc(6,"input",212),o.qc("click",function(){return o.Uc(e),o.uc(2).changeRecurImmediately()}),o.bc(),o.cc(7,"div",100),o.ac(8),o.gc(9,216),o.Zb(),o.Xb(10,"div",217),o.bc(),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ob("recurring-options__checkoption-disabled",!(null!=e.options&&e.options.onlyIfCompleted)),o.Ib(4),o.Dc("cuTooltip",null!=e.options&&e.options.onlyIfCompleted?null:'To use this option, you must select "only recur if completed" above'),o.Ib(2),o.Ob("cu-checkbox_muted",!(null!=e.options&&e.options.onlyIfCompleted)),o.Dc("checked",(null==e.options?null:e.options.recurImmediately)&&(null==e.options?null:e.options.onlyIfCompleted))("disabled",e.readOnly||!(null!=e.options&&e.options.onlyIfCompleted))}}function Me(e,t){if(1&e){const e=o.dc();o.mc(0,218,2),o.cc(1,"span"),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(4).displayDueType()}),o.bc(),o.bc(),o.jc()}if(2&e){const e=o.uc(4);o.Ib(2),o.kc(e.nextDueDateText),o.hc(0)}}function Fe(e,t){if(1&e&&(o.mc(0,218,1),o.ac(1),o.bd(2,Me,3,1,"span",104),o.Zb(),o.jc()),2&e){const e=o.uc(3);o.Ib(2),o.Dc("ngIf",e.nextDueDateText)}}function Le(e,t){if(1&e){const e=o.dc();o.mc(0,218,4),o.cc(1,"span"),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(4).displayDueType()}),o.bc(),o.bc(),o.jc()}if(2&e){const e=o.uc(4);o.Ib(2),o.kc(e.nextDueDateText),o.hc(0)}}function Ne(e,t){if(1&e&&(o.mc(0,218,3),o.ac(1),o.bd(2,Le,3,1,"span",104),o.Zb(),o.jc()),2&e){const e=o.uc(3);o.Ib(2),o.Dc("ngIf",e.nextDueDateText)}}function ze(e,t){if(1&e){const e=o.dc();o.mc(0,218,5),o.ac(1),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayStatus()}),o.bc(),o.Zb(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.kc(null==e.options.status?null:e.options.status.status),o.hc(0)}}function qe(e,t){if(1&e){const e=o.dc();o.mc(0,218,6),o.ac(1),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayStatus()}),o.bc(),o.Zb(),o.jc()}}function Ge(e,t){if(1&e){const e=o.dc();o.mc(0,218,9),o.cc(1,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(5).changeStartDate(i)}),o.vc(2,"momentDate"),o.bc(),o.jc()}if(2&e){const e=t.$implicit;o.Ib(2),o.kc(o.xc(2,1,e,"MMM D, YYYY")),o.hc(0)}}function Ve(e,t){if(1&e&&(o.mc(0,218,8),o.cc(1,"div",223),o.cc(2,"div",107),o.cc(3,"div",108),o.bd(4,Ge,3,4,"div",109),o.bc(),o.bc(),o.bc(),o.jc()),2&e){const e=o.uc(4);o.Ib(4),o.Dc("ngForOf",e.validDates)("ngForTrackBy",e.trackByMoment)}}function Be(e,t){if(1&e){const e=o.dc();o.mc(0,218,7),o.ac(1),o.cc(2,"div",221),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!1)}),o.cc(3,"div",152),o.Xb(4,"a"),o.vc(5,"momentDate"),o.bc(),o.bd(6,Ve,5,2,"div",222),o.bc(),o.Zb(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.kc(o.xc(5,2,e.options.start,"MMM D, YYYY")),o.hc(0)}}function Xe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",207),o.cc(1,"label"),o.cc(2,"input",224),o.qc("click",function(){return o.Uc(e),o.uc(3).setDueDate()}),o.bc(),o.cc(3,"div",100),o.gc(4,225),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(2),o.Dc("checked",null==e.options?null:e.options.setDueDate)("disabled",e.readOnly)}}function He(e,t){if(1&e){const e=o.dc();o.ac(0),o.ac(1),o.mc(2,218),o.cc(3,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayFreq()}),o.bc(),o.cc(4,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayStatusOn()}),o.bc(),o.bd(5,Fe,3,1,"ng-container",104),o.bd(6,Ne,3,1,"ng-container",104),o.bd(7,ze,3,1,"ng-container",104),o.bd(8,qe,3,0,"ng-container",104),o.bd(9,Be,7,5,"ng-container",104),o.jc(),o.Zb(),o.cc(10,"div",219),o.bd(11,Xe,5,2,"div",220),o.bc(),o.Zb()}if(2&e){const e=o.uc(2);o.Ib(5),o.Dc("ngIf",null==e.options?null:e.options.recurImmediately),o.Ib(1),o.Dc("ngIf",!(null!=e.options&&e.options.recurImmediately)),o.Ib(1),o.Dc("ngIf",e.options.status),o.Ib(1),o.Dc("ngIf",!e.options.status),o.Ib(1),o.Dc("ngIf",e.options.start&&(e.options.empty||!e.options.recurNext)),o.kc(e.frequenceText)(null==e.options.statusOn?null:e.options.statusOn.status)(e.extraText)(e.endText),o.hc(2),o.Ib(2),o.Dc("ngIf",e.options.dueType===e.DueTypes.RecurNext&&!e.hiddenOptions)}}function We(e,t){if(1&e){const e=o.dc();o.mc(0,226,1),o.cc(1,"span"),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayDueType()}),o.bc(),o.bc(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.kc(e.nextDueDateText),o.hc(0)}}function Ke(e,t){if(1&e){const e=o.dc();o.mc(0,226,4),o.cc(1,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(5).changeStartDate(i)}),o.vc(2,"momentDate"),o.bc(),o.jc()}if(2&e){const e=t.$implicit;o.Ib(2),o.kc(o.xc(2,1,e,"MMM D, YYYY")),o.hc(0)}}function Qe(e,t){if(1&e&&(o.mc(0,226,3),o.cc(1,"div",106),o.cc(2,"div",107),o.cc(3,"div",108),o.bd(4,Ke,3,4,"div",109),o.bc(),o.bc(),o.bc(),o.jc()),2&e){const e=o.uc(4);o.Ib(4),o.Dc("ngForOf",e.validDates)("ngForTrackBy",e.trackByMoment)}}function Ze(e,t){if(1&e){const e=o.dc();o.mc(0,226,2),o.ac(1),o.cc(2,"div",221),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!1)}),o.cc(3,"div",152),o.Xb(4,"a"),o.vc(5,"momentDate"),o.bc(),o.bd(6,Qe,5,2,"div",32),o.bc(),o.Zb(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.kc(o.xc(5,2,e.options.start,"MMM D, YYYY")),o.hc(0)}}const Ye=function(e){return{"recurring-options__summary-link_underline":e}};function Je(e,t){if(1&e){const e=o.dc();o.cc(0,"span"),o.mc(1,226),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayFreq()}),o.bc(),o.cc(3,"a",227),o.qc("click",function(){return o.Uc(e),o.uc(2).displayTask(!0)}),o.bc(),o.cc(4,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayStatus()}),o.bc(),o.bd(5,We,3,1,"span",104),o.bd(6,Ze,7,5,"ng-container",104),o.jc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngClass",o.Hc(9,Ye,e.options.task)),o.Jb("href",e.copyTaskUrl,o.Xc),o.Ib(2),o.Dc("ngIf",e.nextDueDateText),o.Ib(1),o.Dc("ngIf",e.options.start&&(e.options.empty||!e.options.recurNext)),o.kc(e.frequenceText)(e.copyTaskText)(null==e.options.status?null:e.options.status.status)(e.extraText)(e.endText),o.hc(1)}}function et(e,t){1&e&&o.Yb(0)}const tt=function(e){return{"recurring-options__end-never":e}};function it(e,t){if(1&e){const e=o.dc();o.cc(0,"div",18),o.cc(1,"div",19),o.cc(2,"div",20),o.cc(3,"span"),o.gc(4,21),o.bc(),o.bc(),o.cc(5,"div",22),o.cc(6,"div",23),o.gc(7,24),o.bc(),o.cc(8,"div",25),o.cc(9,"input",26),o.qc("change",function(t){return o.Uc(e),o.uc().changeInterval(t)}),o.bc(),o.cc(10,"div",27,28),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(12,"div",29),o.cc(13,"div",30),o.dd(14),o.bc(),o.Xb(15,"div",31),o.bc(),o.bd(16,N,4,2,"div",32),o.bc(),o.bc(),o.bc(),o.bd(17,V,9,8,"div",33),o.bd(18,X,6,2,"div",33),o.bd(19,ee,16,8,"div",34),o.bd(20,oe,12,3,"div",35),o.cc(21,"div",36),o.cc(22,"div",37),o.gc(23,38),o.bc(),o.cc(24,"div",39),o.cc(25,"div",40),o.Xb(26,"div",41),o.cc(27,"div",42),o.qc("click",function(){return o.Uc(e),o.uc().setShowTime()}),o.gc(28,43),o.bc(),o.bc(),o.cc(29,"cu-datetime-natural-language",44,45),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeMoment(t)}),o.bc(),o.bc(),o.bc(),o.cc(31,"div",46),o.cc(32,"div",47),o.ac(33),o.gc(34,48),o.Zb(),o.Xb(35,"div",49),o.bc(),o.cc(36,"div",50),o.cc(37,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(39,"div",29),o.cc(40,"div",30),o.dd(41),o.bc(),o.Xb(42,"div",31),o.bc(),o.bd(43,se,4,2,"div",32),o.bc(),o.bd(44,ce,3,2,"div",52),o.bd(45,re,8,6,"div",53),o.bc(),o.bc(),o.cc(46,"div",20),o.cc(47,"span"),o.gc(48,54),o.bc(),o.bc(),o.cc(49,"div",55),o.cc(50,"div",56),o.cc(51,"div",57),o.ac(52),o.gc(53,58),o.Zb(),o.Xb(54,"div",59),o.bc(),o.cc(55,"div",60),o.cc(56,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(58,"div",29),o.cc(59,"div",30),o.dd(60),o.bc(),o.Xb(61,"div",31),o.bc(),o.bd(62,de,4,2,"div",32),o.bc(),o.bc(),o.bc(),o.bd(63,he,12,4,"div",61),o.bc(),o.cc(64,"div",62),o.cc(65,"span",63),o.qc("click",function(){return o.Uc(e),o.uc().setShowAdvanced(!0)}),o.gc(66,64),o.bc(),o.bc(),o.bc(),o.cc(67,"div",65),o.cc(68,"div",66),o.cc(69,"div",67),o.qc("click",function(){return o.Uc(e),o.uc().setShowAdvanced(!1)}),o.Xb(70,"div",68),o.cc(71,"div",69),o.gc(72,70),o.bc(),o.bc(),o.cc(73,"div",71),o.gc(74,72),o.bc(),o.bc(),o.bd(75,ve,13,7,"div",73),o.cc(76,"div",74),o.cc(77,"div",75),o.ac(78),o.gc(79,76),o.Zb(),o.Xb(80,"div",77),o.bc(),o.cc(81,"div",78),o.bd(82,ke,2,0,"div",79),o.bd(83,ye,1,1,"input",80),o.bd(84,Ie,7,2,"div",81),o.bc(),o.bc(),o.bd(85,Te,10,15,"div",82),o.cc(86,"div",83),o.cc(87,"div",84),o.ac(88),o.gc(89,85),o.Zb(),o.Xb(90,"div",86),o.bc(),o.cc(91,"div",87),o.cc(92,"div",27,88),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(94,"div",29),o.cc(95,"div",89),o.bd(96,Ce,2,1,"ng-container",90),o.bc(),o.Xb(97,"div",31),o.bc(),o.bd(98,Ee,5,3,"div",32),o.bc(),o.bc(),o.bc(),o.bd(99,Ae,13,4,"div",91),o.bd(100,$e,11,2,"div",92),o.bd(101,Ue,11,3,"div",92),o.bd(102,Re,11,7,"div",93),o.cc(103,"div",94),o.cc(104,"div",95),o.gc(105,96),o.bc(),o.cc(106,"div",97),o.cc(107,"div",98),o.cc(108,"label"),o.cc(109,"input",99),o.qc("click",function(){return o.Uc(e),o.uc().changeSkipMissed()}),o.bc(),o.cc(110,"div",100),o.ac(111),o.gc(112,101),o.Zb(),o.Xb(113,"div",102),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.cc(114,"div",103),o.bd(115,He,12,10,"ng-container",104),o.bd(116,Je,7,11,"span",104),o.bc(),o.bd(117,et,1,0,"ng-container",105),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(27),i=o.Rc(25);o.Ib(1),o.Dc("ngClass",o.Hc(55,G,e.hiddenOptions||e.showAdvanced)),o.Ib(4),o.Ob("recurring-options__highlight","freq"==e.highlight),o.Ib(4),o.Dc("disabled",e.readOnly)("value",e.options.interval),o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.frequences[e.options.freq]," "),o.Ib(3),o.Dc("ngIf",e.options.freq==e.FREQ.DAILY),o.Ib(1),o.Dc("ngIf",e.options.freq==e.FREQ.WEEKLY),o.Ib(1),o.Dc("ngIf",e.options.freq==e.FREQ.MONTHLY),o.Ib(1),o.Dc("ngIf",e.options.freq==e.FREQ.YEARLY),o.Ib(5),o.Dc("ngClass",o.Hc(57,G,e.showTime)),o.Ib(4),o.Dc("ngClass",o.Hc(59,G,!e.showTime))("dateVal",e.options.time)("forTime",!0)("focusOnInit",!1)("timeExists",!0)("militaryTime",e.militaryTime)("placeholder","HH:MM"),o.Ib(7),o.Dc("ngClass",o.Hc(61,tt,0==e.options.end)),o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.ends[e.options.end]," "),o.Ib(3),o.Dc("ngIf",1==e.options.end),o.Ib(1),o.Dc("ngIf",2===e.options.end),o.Ib(11),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.actions["UPDATE"==e.options.action?0:1]," "),o.Ib(3),o.Dc("ngIf","NEW"==e.options.action),o.Ib(4),o.Dc("ngClass",o.Hc(63,G,e.hiddenOptions||!e.showAdvanced)),o.Ib(8),o.Dc("ngIf","UPDATE"==e.options.action),o.Ib(6),o.Ob("recurring-options__highlight","dueType"==e.highlight),o.Ib(1),o.Dc("ngIf",!e.dueDate),o.Ib(1),o.Dc("ngIf",e.dueDate&&e.options.dueType>e.DueTypes.RecurNext),o.Ib(1),o.Dc("ngIf",e.dueDate),o.Ib(1),o.Dc("ngIf",e.dueDate),o.Ib(1),o.Ob("recurring-options__highlight","status"==e.highlight),o.Ib(6),o.Dc("dropdownDisabled",e.readOnly),o.Ib(3),o.Dc("ngStyle",o.Hc(65,be,null==e.options.status?null:e.options.status.color)),o.Ib(1),o.Dc("ngIf",e.options.status)("ngIfElse",t),o.Ib(3),o.Dc("ngIf","NEW"==e.options.action),o.Ib(1),o.Dc("ngIf","NEW"==e.options.action),o.Ib(1),o.Dc("ngIf","UPDATE"===e.options.action&&(null==e.options?null:e.options.statusOn)),o.Ib(1),o.Dc("ngIf","NEW"==e.options.action),o.Ib(1),o.Ob("recurring-options__checkoption-disabled",!(null!=e.options&&e.options.onlyIfCompleted)&&"NEW"==e.options.action),o.Ib(4),o.Dc("cuTooltip",null!=e.options&&e.options.onlyIfCompleted||"NEW"!=e.options.action?null:'To use this option, you must select "only recur if completed" above'),o.Ib(2),o.Ob("cu-checkbox_muted",!(null!=e.options&&e.options.onlyIfCompleted)&&"NEW"==e.options.action),o.Dc("checked",(null==e.options?null:e.options.skipMissed)&&((null==e.options?null:e.options.onlyIfCompleted)||"NEW"!=e.options.action))("disabled",e.readOnly||!(null!=e.options&&e.options.onlyIfCompleted)&&"NEW"==e.options.action),o.Ib(6),o.Dc("ngIf","UPDATE"==e.options.action),o.Ib(1),o.Dc("ngIf","NEW"==e.options.action),o.Ib(1),o.Dc("ngTemplateOutlet",i)}}function ot(e,t){1&e&&o.Xb(0,"div",243)}function nt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",184),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).changeStatusOn(i)}),o.cc(1,"div",185),o.dd(2),o.bc(),o.bd(3,ot,1,0,"div",242),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(3);o.Dc("ngStyle",o.Hc(3,be,e.color)),o.Ib(2),o.fd(" ",e.status," "),o.Ib(1),o.Dc("ngIf",e.type===i.StatusTypes.Done)}}function st(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,nt,4,5,"div",183),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngForOf",e.statuses)("ngForTrackBy",e.trackByStatus)}}function ct(e,t){if(1&e){const e=o.dc();o.cc(0,"div",161),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(3).selectAction(0===i?"UPDATE":"NEW")}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(3);o.Ob("recurring-list__item-disabled",!n.dueDate&&0===i),o.Dc("cuTooltip",n.dueDate||0!==i?null:"Due dates aren't enabled for this Space"),o.Ib(1),o.fd(" ",e," ")}}function at(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,ct,2,4,"div",160),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngForOf",e.actions)("ngForTrackBy",e.trackByValue)}}function rt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",179),o.cc(1,"label"),o.cc(2,"input",180),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(4).changeCopy(i.name)}),o.bc(),o.cc(3,"div",174),o.dd(4),o.bc(),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(4);o.Ib(2),o.Fc("name","copy_",e.name,""),o.Dc("ngClass",o.Hc(5,ue,null==i.options||null==i.options.copy?null:i.options.copy.everything))("checked",null!=i.options&&i.options.copy?i.options.copy[e.name]:null)("disabled",i.readOnly),o.Ib(2),o.fd(" ",e.label," ")}}function lt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",106),o.cc(1,"div",169),o.cc(2,"div",170),o.gc(3,246),o.bc(),o.cc(4,"div",172),o.cc(5,"label"),o.cc(6,"input",173),o.qc("click",function(){return o.Uc(e),o.uc(3).changeCopyAll()}),o.bc(),o.cc(7,"div",174),o.gc(8,247),o.bc(),o.bc(),o.bc(),o.Xb(9,"div",176),o.bc(),o.cc(10,"div",177),o.bd(11,rt,5,7,"div",178),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(6),o.Dc("checked",null==e.options||null==e.options.copy?null:e.options.copy.everything)("disabled",e.readOnly),o.Ib(5),o.Dc("ngForOf",e.copyOptions)("ngForTrackBy",e.trackByName)}}function dt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",162),o.ac(1),o.gc(2,244),o.Zb(),o.cc(3,"div",164),o.cc(4,"div",165,166),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(6,"div",152),o.dd(7),o.bc(),o.bd(8,lt,12,4,"div",32),o.bc(),o.bc(),o.ac(9),o.mc(10,245),o.cc(11,"a",168),o.qc("click",function(){return o.Uc(e),o.uc(2).displayTask()}),o.bc(),o.jc(),o.Zb(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.Dc("dropdownDisabled",e.readOnly)("dropdownCloseOnInsideClick",!1),o.Ib(3),o.fd(" ",e.copyOptionsText," "),o.Ib(4),o.kc(e.copyTaskText),o.hc(10)}}function ut(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(4).changeFreq(i.key)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.value," ")}}function mt(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,ut,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.frequencesKeys)("ngForTrackBy",e.trackByKey)}}function pt(e,t){if(1&e){const e=o.dc();o.cc(0,"li",119),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeDays(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(4);o.Dc("ngClass",o.Hc(2,z,n.selectedDays[i])),o.Ib(1),o.fd(" ",e," ")}}function ht(e,t){if(1&e&&(o.cc(0,"div",111),o.cc(1,"div",112),o.gc(2,253),o.bc(),o.cc(3,"div",114),o.cc(4,"ul",121),o.bd(5,pt,2,4,"li",116),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(5),o.Dc("ngForOf",e.daysOfWeek)("ngForTrackBy",e.trackByValue)}}function ft(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(6).changeMonthDayCombo(i.key)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.value," ")}}function bt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.cc(3,"input",257,135),o.qc("keyup",function(t){return o.Uc(e),o.uc(5).searchDays(t)}),o.bc(),o.bd(5,ft,2,1,"div",109),o.vc(6,"keys"),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(5);o.Ib(5),o.Dc("ngForOf",o.wc(6,2,e.daysFiltered))("ngForTrackBy",e.trackByKey)}}function gt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",131),o.cc(1,"div",132,133),o.qc("dropdownOpen",function(){o.Uc(e);const t=o.uc(4);return t.onDropdown.emit(!0),t.openDayDropdown()})("dropdownClose",function(){return o.Uc(e),o.uc(4).onDropdown.emit(!1)}),o.cc(3,"div",29),o.cc(4,"div",30),o.dd(5),o.bc(),o.Xb(6,"div",31),o.bc(),o.bd(7,bt,7,4,"div",32),o.bc(),o.bc()}if(2&e){const e=o.uc(4);o.Ib(1),o.Dc("dropdownDisabled",e.readOnly)("dropdownCloseOnInsideClick",!1),o.Ib(4),o.fd(" ",e.days[e.options.byMonthDay]," ")}}function _t(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(6).changePos(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function vt(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,_t,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(5);o.Ib(3),o.Dc("ngForOf",e.poses)("ngForTrackBy",e.trackByValue)}}function kt(e,t){if(1&e){const e=o.dc();o.cc(0,"li",119),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(5).changeDays(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(5);o.Dc("ngClass",o.Hc(2,z,n.selectedDays[i])),o.Ib(1),o.fd(" ",e," ")}}function yt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",136),o.cc(1,"div",27,137),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(4).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(4).onDropdown.emit(!1)}),o.cc(3,"div",29),o.cc(4,"div",30),o.dd(5),o.bc(),o.Xb(6,"div",31),o.bc(),o.bd(7,vt,4,2,"div",32),o.bc(),o.cc(8,"ul",121),o.bd(9,kt,2,4,"li",116),o.bc(),o.bc()}if(2&e){const e=o.uc(4);o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.poses[e.options.bySetPos]," "),o.Ib(4),o.Dc("ngForOf",e.daysOfWeek)("ngForTrackBy",e.trackByValue)}}function wt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",122),o.Xb(1,"div",123),o.cc(2,"div",124),o.cc(3,"div",125),o.cc(4,"div",3),o.cc(5,"label"),o.cc(6,"input",254),o.qc("change",function(){return o.Uc(e),o.uc(3).changeMonthlyType(0)}),o.bc(),o.cc(7,"div",5),o.gc(8,255),o.bc(),o.bc(),o.bc(),o.cc(9,"div",3),o.cc(10,"label"),o.cc(11,"input",254),o.qc("change",function(){return o.Uc(e),o.uc(3).changeMonthlyType(1)}),o.bc(),o.cc(12,"div",5),o.gc(13,256),o.bc(),o.bc(),o.bc(),o.bc(),o.bd(14,gt,8,3,"div",129),o.bd(15,yt,10,4,"div",130),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(6),o.Dc("checked",0==e.options.monthlyType)("disabled",e.readOnly)("value",0),o.Ib(5),o.Dc("checked",1==e.options.monthlyType)("disabled",e.readOnly)("value",1),o.Ib(3),o.Dc("ngIf",0==e.options.monthlyType),o.Ib(1),o.Dc("ngIf",1==e.options.monthlyType)}}function xt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",146),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(5).changeMonth(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function It(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,xt,2,1,"div",145),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(4);o.Ib(3),o.Dc("ngForOf",e.months)("ngForTrackBy",e.trackByValue)}}function Tt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",138),o.cc(1,"div",139),o.gc(2,258),o.bc(),o.cc(3,"div",141),o.cc(4,"div",27,142),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!1)}),o.cc(6,"div",29),o.cc(7,"div",143),o.dd(8),o.bc(),o.Xb(9,"div",31),o.bc(),o.bd(10,It,4,2,"div",32),o.bc(),o.cc(11,"input",144),o.qc("change",function(t){return o.Uc(e),o.uc(3).changeMonthDay(t)}),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(4),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.months[e.options.byMonth]," "),o.Ib(3),o.Dc("value",e.options.byMonthDay)}}function Ct(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeEnd(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function Dt(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,Ct,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.ends)("ngForTrackBy",e.trackByValue)}}function Ot(e,t){if(1&e){const e=o.dc();o.cc(0,"div",147),o.cc(1,"input",148),o.qc("change",function(t){return o.Uc(e),o.uc(3).changeEndCount(t)}),o.bc(),o.dd(2),o.bc()}if(2&e){const e=o.uc(3);o.Ib(1),o.Dc("value",e.options.endCount),o.Ib(1),o.fd(" ",e.endTimeText," ")}}function St(e,t){if(1&e){const e=o.dc();o.cc(0,"div",157),o.qc("click",function(e){return e.stopPropagation()}),o.cc(1,"div",158),o.cc(2,"cu-datepicker",159),o.qc("onSelect",function(t){return o.Uc(e),o.uc(4).changeEndDate(t.dueDate)})("onCloseDropdown",function(){return o.Uc(e),o.uc(),o.Rc(2).close()})("arrowClick",function(){return o.Uc(e),o.uc(),o.Rc(6).dateTimeInput.nativeElement.focus()})("click",function(){return o.Uc(e),o.uc(),o.Rc(6).dateTimeInput.nativeElement.focus()}),o.vc(3,"async"),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(4);let t=null;o.Ib(2),o.Dc("showStart",!1)("date",e.options.endDate)("showInput",!1)("weekStart",(null==(t=o.wc(3,4,e.sharedData.currentUser))?null:t.week_start_day)||0)}}function Et(e,t){if(1&e){const e=o.dc();o.cc(0,"div",149),o.cc(1,"div",150,259),o.cc(3,"div",152,153),o.cc(5,"cu-datetime-natural-language",260,261),o.qc("onChange",function(t){return o.Uc(e),o.uc(3).changeEndDate(t.newMoment)}),o.bc(),o.bc(),o.bd(7,St,4,6,"div",156),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(1),o.Dc("dropdownCloseOnInsideClick",!1),o.Ib(4),o.Dc("dateVal",e.options.endDate)("dateFormatting",e.dateFormatting)("forceUpdate",!0)("inDatePicker",!1)("displayConsistent",!0)}}function Pt(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",22),o.cc(2,"div",23),o.gc(3,248),o.bc(),o.cc(4,"div",25),o.cc(5,"input",148),o.qc("change",function(t){return o.Uc(e),o.uc(2).changeInterval(t)}),o.bc(),o.cc(6,"div",27,28),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(8,"div",29),o.cc(9,"div",30),o.dd(10),o.bc(),o.Xb(11,"div",31),o.bc(),o.bd(12,mt,4,2,"div",32),o.bc(),o.bc(),o.bc(),o.bd(13,ht,6,2,"div",33),o.bd(14,wt,16,8,"div",34),o.bd(15,Tt,12,3,"div",35),o.cc(16,"div",36),o.cc(17,"div",37),o.gc(18,249),o.bc(),o.cc(19,"div",39),o.cc(20,"div",40),o.Xb(21,"div",41),o.cc(22,"div",42),o.qc("click",function(){return o.Uc(e),o.uc(2).setShowTime()}),o.gc(23,250),o.bc(),o.bc(),o.cc(24,"cu-datetime-natural-language",44,45),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeMoment(t)}),o.bc(),o.bc(),o.bc(),o.cc(26,"div",46),o.cc(27,"div",47),o.ac(28),o.gc(29,251),o.Zb(),o.Xb(30,"div",252),o.bc(),o.cc(31,"div",50),o.cc(32,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(34,"div",29),o.cc(35,"div",30),o.dd(36),o.bc(),o.Xb(37,"div",31),o.bc(),o.bd(38,Dt,4,2,"div",32),o.bc(),o.bd(39,Ot,3,2,"div",52),o.bd(40,Et,8,6,"div",53),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Ob("recurring-options__highlight","freq"==e.highlight),o.Ib(4),o.Dc("value",e.options.interval),o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.frequences[e.options.freq]," "),o.Ib(3),o.Dc("ngIf",e.options.freq==e.FREQ.WEEKLY),o.Ib(1),o.Dc("ngIf",e.options.freq==e.FREQ.MONTHLY),o.Ib(1),o.Dc("ngIf",e.options.freq==e.FREQ.YEARLY),o.Ib(5),o.Dc("ngClass",o.Hc(21,G,e.showTime)),o.Ib(4),o.Dc("ngClass",o.Hc(23,G,!e.showTime))("dateVal",e.options.time)("forTime",!0)("focusOnInit",!1)("timeExists",!0)("militaryTime",e.militaryTime)("placeholder","HH:MM"),o.Ib(7),o.Dc("ngClass",o.Hc(25,tt,0==e.options.end)),o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.ends[e.options.end]," "),o.Ib(3),o.Dc("ngIf",1==e.options.end),o.Ib(1),o.Dc("ngIf",2===e.options.end)}}function jt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeEnd(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function At(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,jt,2,1,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.ends)("ngForTrackBy",e.trackByValue)}}function $t(e,t){if(1&e){const e=o.dc();o.cc(0,"div",147),o.cc(1,"input",148),o.qc("change",function(t){return o.Uc(e),o.uc(3).changeEndCount(t)}),o.bc(),o.dd(2),o.bc()}if(2&e){const e=o.uc(3);o.Ib(1),o.Dc("value",e.options.endCount),o.Ib(1),o.fd(" ",e.endTimeText," ")}}function Ut(e,t){if(1&e){const e=o.dc();o.cc(0,"div",157),o.qc("click",function(e){return e.stopPropagation()}),o.cc(1,"div",158),o.cc(2,"cu-datepicker",159),o.qc("onSelect",function(t){return o.Uc(e),o.uc(4).changeEndDate(t.dueDate)})("onCloseDropdown",function(){return o.Uc(e),o.uc(),o.Rc(2).close()})("arrowClick",function(){return o.Uc(e),o.uc(),o.Rc(6).dateTimeInput.nativeElement.focus()})("click",function(){return o.Uc(e),o.uc(),o.Rc(6).dateTimeInput.nativeElement.focus()}),o.vc(3,"async"),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(4);let t=null;o.Ib(2),o.Dc("showStart",!1)("date",e.options.endDate)("showInput",!1)("weekStart",(null==(t=o.wc(3,4,e.sharedData.currentUser))?null:t.week_start_day)||0)}}function Rt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",149),o.cc(1,"div",150,263),o.cc(3,"div",152,153),o.cc(5,"cu-datetime-natural-language",264,265),o.qc("onChange",function(t){return o.Uc(e),o.uc(3).changeEndDate(t.newMoment)}),o.bc(),o.bc(),o.bd(7,Ut,4,6,"div",156),o.bc(),o.bc()}if(2&e){const e=o.uc(3);o.Ib(1),o.Dc("dropdownCloseOnInsideClick",!1),o.Ib(4),o.Dc("dateVal",e.options.endDate)("dateFormatting",e.dateFormatting)("forceUpdate",!0)("inDatePicker",!1)("displayConsistent",!0)}}function Mt(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",46),o.cc(2,"div",47),o.gc(3,262),o.bc(),o.cc(4,"div",50),o.cc(5,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(7,"div",29),o.cc(8,"div",30),o.dd(9),o.bc(),o.Xb(10,"div",31),o.bc(),o.bd(11,At,4,2,"div",32),o.bc(),o.bd(12,$t,3,2,"div",52),o.bd(13,Rt,8,6,"div",53),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.Dc("ngClass",o.Hc(5,tt,0==e.options.end)),o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.ends[e.options.end]," "),o.Ib(3),o.Dc("ngIf",1==e.options.end),o.Ib(1),o.Dc("ngIf",2===e.options.end)}}function Ft(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(2);o.Ib(1),o.ed(e.options.status.status)}}function Lt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){return o.Uc(e),o.uc(3).changeStatus(null)}),o.gc(1,266),o.bc()}}function Nt(e,t){1&e&&o.Xb(0,"div",268)}function zt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",184),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).changeStatus(i)}),o.cc(1,"div",185),o.dd(2),o.bc(),o.bd(3,Nt,1,0,"div",267),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(3);o.Dc("ngStyle",o.Hc(3,be,e.color)),o.Ib(2),o.fd(" ",e.status," "),o.Ib(1),o.Dc("ngIf",e.type===i.StatusTypes.Done)}}function qt(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,Lt,2,0,"div",196),o.bd(4,zt,4,5,"div",183),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngIf","UPDATE"==e.options.action),o.Ib(1),o.Dc("ngForOf",e.statuses)("ngForTrackBy",e.trackByStatus)}}function Gt(e,t){1&e&&(o.cc(0,"div",188),o.gc(1,271),o.bc())}function Vt(e,t){if(1&e){const e=o.dc();o.cc(0,"input",148),o.qc("change",function(t){return o.Uc(e),o.uc(3).changeDueDateValue(t)}),o.bc()}if(2&e){const e=o.uc(3);o.Dc("value",e.options.dueValue)}}function Bt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(5).changeDueDateType(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(5);o.Ob("cu-hidden","UPDATE"===n.options.action&&"SCHEDULE"===n.options.type&&i==n.DueTypes.None)("cu-hidden","NEW"===n.options.action&&"TRIGGER"===n.options.type&&(i==n.DueTypes.Recur||i==n.DueTypes.RecurNext)),o.Ib(1),o.fd(" ",e," ")}}function Xt(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,Bt,2,5,"div",191),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(4);o.Ib(3),o.Dc("ngForOf",e.dues)("ngForTrackBy",e.trackByValue)}}function Ht(e,t){if(1&e){const e=o.dc();o.cc(0,"div",27,190),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(3).onDropdown.emit(!1)}),o.cc(2,"div",29),o.cc(3,"div",30),o.dd(4),o.bc(),o.Xb(5,"div",31),o.bc(),o.bd(6,Xt,4,2,"div",32),o.bc()}if(2&e){const e=o.uc(3);o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.options.dueValue>1?e.duesM[e.options.dueType]:e.duesS[e.options.dueType]," ")}}function Wt(e,t){if(1&e&&(o.cc(0,"div",74),o.cc(1,"div",75),o.ac(2),o.gc(3,269),o.Zb(),o.Xb(4,"div",270),o.bc(),o.cc(5,"div",78),o.bd(6,Gt,2,0,"div",79),o.bd(7,Vt,1,1,"input",80),o.bd(8,Ht,7,2,"div",81),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ob("recurring-options__highlight","dueType"==e.highlight),o.Ib(6),o.Dc("ngIf",!e.dueDate),o.Ib(1),o.Dc("ngIf",e.dueDate&&e.options.dueType>e.DueTypes.RecurNext),o.Ib(1),o.Dc("ngIf",e.dueDate)}}function Kt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",192),o.cc(1,"div",37),o.gc(2,272),o.bc(),o.cc(3,"div",39),o.cc(4,"div",40),o.Xb(5,"div",41),o.cc(6,"div",42),o.qc("click",function(){return o.Uc(e),o.uc(2).setShowTimeDue()}),o.gc(7,273),o.bc(),o.bc(),o.cc(8,"cu-datetime-natural-language",44,195),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeMoment(t,!0)}),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Dc("ngClass",o.Hc(9,G,!e.options.dueType||e.options.dueType<=2)),o.Ib(4),o.Dc("ngClass",o.Hc(11,G,e.showTimeDue)),o.Ib(4),o.Dc("ngClass",o.Hc(13,G,!e.showTimeDue))("dateVal",e.options.timeDue)("forTime",!0)("focusOnInit",!1)("timeExists",!0)("militaryTime",e.militaryTime)("placeholder","HH:MM")}}function Qt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.index;return o.uc(4).changeCopyType(i)}),o.dd(1),o.Xb(2,"div",205),o.bc()}if(2&e){const e=t.$implicit,i=t.index;o.Ib(1),o.fd(" ",e," "),o.Ib(1),o.Ec("cuTooltip",0==i?"Each time an occurrence happens, copy the very first task that recurring was set on.":1==i?"Each time an occurrence happens, copy the most recently recurred task (so if you have 3 recurrences, copy #3 instead of #1 for the next occurrence).":"")}}function Zt(e,t){if(1&e&&(o.cc(0,"div",106),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,Qt,3,2,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(3);o.Ib(3),o.Dc("ngForOf",e.copyTypes)("ngForTrackBy",e.trackByValue)}}function Yt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",200),o.cc(1,"div",201),o.ac(2),o.gc(3,274),o.Zb(),o.Xb(4,"div",275),o.bc(),o.cc(5,"div",204),o.cc(6,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).onDropdown.emit(!1)}),o.cc(8,"div",29),o.cc(9,"div",30),o.dd(10),o.bc(),o.Xb(11,"div",31),o.bc(),o.bd(12,Zt,4,2,"div",32),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ob("recurring-options__highlight","copyType"==e.highlight),o.Ib(6),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.copyTypes[e.options.copyType]," ")}}function Jt(e,t){if(1&e){const e=o.dc();o.mc(0,276,1),o.cc(1,"span"),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayFreq()}),o.bc(),o.bc(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.kc(e.frequenceText),o.hc(0)}}function ei(e,t){if(1&e&&(o.mc(0,276,2),o.Yb(1),o.jc()),2&e){const e=o.uc(3);o.Ib(1),o.kc(e.nextText),o.hc(0)}}function ti(e,t){if(1&e){const e=o.dc();o.mc(0,276,3),o.ac(1),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayStatus()}),o.bc(),o.Zb(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.kc(null==e.options.status?null:e.options.status.status),o.hc(0)}}function ii(e,t){if(1&e){const e=o.dc();o.mc(0,276,4),o.ac(1),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayStatus()}),o.bc(),o.Zb(),o.jc()}}function oi(e,t){if(1&e){const e=o.dc();o.ac(0),o.mc(1,276),o.bd(2,Jt,3,1,"span",104),o.cc(3,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayStatusOn()}),o.bc(),o.bd(4,ei,2,1,"ng-container",104),o.bd(5,ti,3,1,"ng-container",104),o.bd(6,ii,3,0,"ng-container",104),o.jc(),o.Zb()}if(2&e){const e=o.uc(2);o.Ib(2),o.Dc("ngIf",e.frequenceText),o.Ib(2),o.Dc("ngIf",e.nextText),o.Ib(1),o.Dc("ngIf",e.options.status),o.Ib(1),o.Dc("ngIf",!e.options.status),o.kc(null==e.options.statusOn?null:e.options.statusOn.status)(e.extraText)(e.endText),o.hc(1)}}function ni(e,t){if(1&e){const e=o.dc();o.mc(0,277,1),o.cc(1,"span"),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(3).displayDueType()}),o.bc(),o.bc(),o.jc()}if(2&e){const e=o.uc(3);o.Ib(2),o.kc(e.nextDueDateText),o.hc(0)}}function si(e,t){if(1&e){const e=o.dc();o.cc(0,"span"),o.mc(1,277),o.cc(2,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayStatusOn()}),o.bc(),o.cc(3,"a",278),o.qc("click",function(){return o.Uc(e),o.uc(2).displayTask(!0)}),o.bc(),o.bd(4,ni,3,1,"span",104),o.cc(5,"a",63),o.qc("click",function(){return o.Uc(e),o.uc(2).displayStatus()}),o.bc(),o.jc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(3),o.Jb("href",e.copyTaskUrl,o.Xc),o.Ib(1),o.Dc("ngIf",e.nextDueDateText),o.Ib(1),o.kc(null==e.options.statusOn?null:e.options.statusOn.status)(e.copyTaskText)(null==e.options.status?null:e.options.status.status)(e.extraText)(e.endText),o.hc(1)}}function ci(e,t){if(1&e){const e=o.dc();o.cc(0,"div",228),o.cc(1,"div",229),o.cc(2,"div",20),o.cc(3,"span"),o.dd(4,"When"),o.bc(),o.bc(),o.cc(5,"div",83),o.cc(6,"div",84),o.ac(7),o.gc(8,230),o.Zb(),o.Xb(9,"div",231),o.bc(),o.cc(10,"div",87),o.cc(11,"div",27,88),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(13,"div",29),o.cc(14,"div",89),o.dd(15),o.bc(),o.Xb(16,"div",31),o.bc(),o.bd(17,st,4,2,"div",32),o.bc(),o.bc(),o.bc(),o.cc(18,"div",20),o.cc(19,"span"),o.gc(20,232),o.bc(),o.bc(),o.cc(21,"div",55),o.cc(22,"div",56),o.cc(23,"div",57),o.ac(24),o.gc(25,233),o.Zb(),o.Xb(26,"div",234),o.bc(),o.cc(27,"div",60),o.cc(28,"div",27,51),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(30,"div",29),o.cc(31,"div",30),o.dd(32),o.bc(),o.Xb(33,"div",31),o.bc(),o.bd(34,at,4,2,"div",32),o.bc(),o.bc(),o.bc(),o.bd(35,dt,12,4,"div",61),o.bc(),o.bd(36,Pt,41,27,"div",104),o.bd(37,Mt,14,7,"div",104),o.cc(38,"div",62),o.cc(39,"span",63),o.qc("click",function(){return o.Uc(e),o.uc().setShowAdvanced(!0)}),o.gc(40,235),o.bc(),o.bc(),o.bc(),o.cc(41,"div",236),o.cc(42,"div",66),o.cc(43,"div",67),o.qc("click",function(){return o.Uc(e),o.uc().setShowAdvanced(!1)}),o.Xb(44,"div",68),o.cc(45,"div",69),o.gc(46,237),o.bc(),o.bc(),o.cc(47,"div",71),o.gc(48,238),o.bc(),o.bc(),o.cc(49,"div",83),o.cc(50,"div",84),o.ac(51),o.gc(52,239),o.Zb(),o.Xb(53,"div",240),o.bc(),o.cc(54,"div",87),o.cc(55,"div",27,88),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(57,"div",29),o.cc(58,"div",89),o.bd(59,Ft,2,1,"ng-container",90),o.bc(),o.Xb(60,"div",31),o.bc(),o.bd(61,qt,5,3,"div",32),o.bc(),o.bc(),o.bc(),o.bd(62,Wt,9,5,"div",241),o.bd(63,Kt,10,15,"div",82),o.bd(64,Yt,13,4,"div",91),o.bc(),o.cc(65,"div",103),o.bd(66,oi,7,7,"ng-container",104),o.bd(67,si,6,7,"span",104),o.bc(),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(27);o.Ib(1),o.Dc("ngClass",o.Hc(23,G,e.hiddenOptions||e.showAdvanced)),o.Ib(4),o.Ob("recurring-options__highlight","statusOn"==e.highlight),o.Ib(6),o.Dc("dropdownDisabled",e.readOnly),o.Ib(3),o.Dc("ngStyle",o.Hc(25,be,null==e.options.statusOn?null:e.options.statusOn.color)),o.Ib(1),o.fd(" ",null==e.options.statusOn?null:e.options.statusOn.status," "),o.Ib(13),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.fd(" ",e.actions["UPDATE"==e.options.action?0:1]," "),o.Ib(3),o.Dc("ngIf","NEW"==e.options.action),o.Ib(1),o.Dc("ngIf","UPDATE"==e.options.action),o.Ib(1),o.Dc("ngIf","NEW"==e.options.action),o.Ib(4),o.Dc("ngClass",o.Hc(27,G,e.hiddenOptions||!e.showAdvanced)),o.Ib(8),o.Ob("recurring-options__highlight","status"==e.highlight),o.Ib(6),o.Dc("dropdownDisabled",e.readOnly),o.Ib(3),o.Dc("ngStyle",o.Hc(29,be,null==e.options.status?null:e.options.status.color)),o.Ib(1),o.Dc("ngIf",e.options.status)("ngIfElse",t),o.Ib(3),o.Dc("ngIf","NEW"==e.options.action),o.Ib(1),o.Dc("ngIf",e.dueDate&&"NEW"==e.options.action),o.Ib(1),o.Dc("ngIf","NEW"==e.options.action),o.Ib(2),o.Dc("ngIf","UPDATE"==e.options.action),o.Ib(1),o.Dc("ngIf","NEW"==e.options.action)}}function ai(e,t){if(1&e){const e=o.dc();o.cc(0,"div",110),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).changeStartDate(i)}),o.dd(1),o.vc(2,"momentDate"),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",o.xc(2,1,e,"MMM D, YYYY")," ")}}function ri(e,t){if(1&e&&(o.cc(0,"div",223),o.cc(1,"div",107),o.cc(2,"div",108),o.bd(3,ai,3,4,"div",109),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(3),o.Dc("ngForOf",e.validDates)("ngForTrackBy",e.trackByMoment)}}function li(e,t){if(1&e){const e=o.dc();o.cc(0,"div",279),o.cc(1,"div",280),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().onDropdown.emit(!0)})("dropdownClose",function(){return o.Uc(e),o.uc().onDropdown.emit(!1)}),o.cc(2,"div",152),o.cc(3,"span",281),o.ac(4),o.gc(5,282),o.Zb(),o.dd(6),o.vc(7,"momentDate"),o.Xb(8,"div",283),o.bc(),o.bc(),o.bd(9,ri,4,2,"div",222),o.bc(),o.cc(10,"div",284),o.dd(11),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Dc("ngClass",o.Hc(9,G,e.options.empty||!e.options.recurNext))("cuTooltip",e.recurMissedHint),o.Ib(1),o.Dc("dropdownDisabled",e.readOnly),o.Ib(4),o.kc(e.recurMissed?"Missed":"Next"),o.hc(5),o.Ib(1),o.fd(": ",o.xc(7,6,e.options.recurNext,"MMM D")," "),o.Ib(5),o.ed(e.recurMissedDesc)}}function di(e,t){1&e&&(o.ac(0),o.gc(1,285),o.Zb())}const ui=function(e,t,i,o){return{"recurring-options_readonly":e,"recurring-options_collapsed":t,"recurring-options_missed":i,"recurring-options_next":o}};let mi=(()=>{class e{constructor(e,t,i,n,s){this.changeDetector=e,this.helpers=t,this.dataService=i,this.timezonesService=n,this.sharedData=s,this.DueTypes=h.c,this.actions=["change due date","create new task"],this.frequencesS=["year","month","week","day"],this.frequencesM=["years","months","weeks","days"],this.frequences=this.frequencesS,this.frequencesKeys=[{key:3,value:this.frequences[3]},{key:2,value:this.frequences[2]},{key:1,value:this.frequences[1]},{key:0,value:this.frequences[0]}],this.daysOfWeek=["S","M","T","W","T","F","S"],this.daysOfWeekFull=[$localize`:@@common_weekday--sunday:Sunday`,$localize`:@@common_weekday--monday:Monday`,$localize`:@@common_weekday--tuesday:Tuesday`,$localize`:@@common_weekday--wednesday:Wednesday`,$localize`:@@common_weekday--thursday:Thursday`,$localize`:@@common_weekday--friday:Friday`,$localize`:@@common_weekday--saturday:Saturday`],this.months=d.months(),this.poses=["First","Second","Third","Fourth","Last"],this.ends=["never","after","on date"],this.duesM=["don't set due date","set to current occurrence","set to next occurrence","hours after","days after","weeks after"],this.duesS=["don't set due date","set to current occurrence","set to next occurrence","hour after","day after","week after"],this.dues=this.duesM,this.FREQ=h.d,this.copyOptions=[{name:"content",label:"Description"},{name:"attachments",label:"Attachments"},{name:"comment_attachments",label:"Comment Attachments"},{name:"subtasks",label:"Subtasks"},{name:"assigned_comment",label:"Assigned Comments"},{name:"old_assignees",label:"Assignees"},{name:"old_subtask_assignees",label:"Subtasks Assignees"},{name:"old_followers",label:"Watchers"},{name:"old_tags",label:"Tags"},{name:"old_checklists",label:"Checklists"},{name:"custom_fields",label:"Custom Fields"}],this.copyTypes=["the first task","newest task"],this.days={},this.daysFiltered={},this.selectedDays={},this.startDate=this.timezonesService.createMoment(),this.startDueDate=this.timezonesService.createMoment(),this.time="",this.showTime=!1,this.timeDue="",this.showTimeDue=!1,this.showAdvanced=!1,this.endDateString="",this.timeString="",this.timeDueString="",this.endTimeText="times",this.hiddenOptions=!0,this.recurMissed=!1,this.recurNextValid=!0,this.StatusTypes=f.g,this.validDates=[],this.trackByKey=Object(l.d)("key"),this.trackByName=Object(l.d)("name"),this.trackByValue=l.f,this.trackByStatus=Object(l.d)("status"),this.trackByMoment=l.c,this.destroy$=new u.a,this.militaryTime=!1,this.dateFormatting="m/d/y",this.dueDate=!1,this.readOnly=!1,this.onChange=new o.o,this.onDropdown=new o.o,this.onUpdateDropdownPosition=new o.o}ngOnInit(){for(let e=1;e<=28;e++)this.days[e]=e.toString()+this.helpers.getOrdinalSuffix(e);this.days[-1]="Last",this.sharedData.currentUser.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{this.updateDaysOfWeek(e.week_start_day)})}ngAfterViewInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){this.options=Object.assign({},h.b,this.options),this.endDateString=this.helpers.makeDateString(this.timezonesService.createMoment(this.options.endDate),this.dateFormatting),this.timeString=this.options.time?this.helpers.constructTime(this.options.time,this.militaryTime):"",this.timeDueString=this.options.timeDue?this.helpers.constructTime(this.options.timeDue,this.militaryTime):"",this.showTime=!!this.timeString,this.showTimeDue=!!this.timeDueString,this.options.dueType||(this.options.dueType=h.c.None),this.options.dueType>h.c.RecurNext&&!this.options.dueValue&&(this.options.dueValue=h.c.RecurNext),this.showAdvanced=!1,this.options.byDays?(this.selectedDays={},this.options.byDays.forEach(e=>this.selectedDays[e]=!0)):this.selectedDays={},this.options.copy||(this.options.copy={}),this.dueDate||"UPDATE"!==this.options.action||(this.options.action="NEW"),this.statuses&&(this.options.statusOn||"UPDATE"!==this.options.action||(this.options.statusOn=this.statuses.find(b.l))),"NEW"===this.options.action&&"SCHEDULE"===this.options.type&&(this.options.onlyIfCompleted=Object(b.l)(this.options.statusOn)),this.options.copyType||(this.options.copyType=0),"UPDATE"===this.options.action&&"SCHEDULE"===this.options.type&&this.options.empty&&(this.options.dueType=h.c.RecurNext),"NEW"!==this.options.action||"TRIGGER"!==this.options.type||this.options.dueType!==h.c.Recur&&this.options.dueType!==h.c.RecurNext||(this.options.dueType=h.c.None),this.setFrequences(),this.nextDueDateText=this.getNextDueDateText(),this.copyTaskText=this.getCopyTaskText(),this.copyTaskUrl=this.getCopyTaskUrl(),this.copyOptionsText=this.getCopyOptionsText(),this.extraText=this.getExtraText(),this.endText=this.getEndText(),this.endTimeText=this.getEndTimeText(),this.originalOptions=JSON.parse(JSON.stringify(this.options)),this.hiddenOptions=!this.options.empty&&!!this.options.recurNext,this.recurMissed=this.options.recurNext<(new Date).getTime(),this.recurMissed?this.task&&this.task.archived?(this.recurMissedHint="This task did not recur but it was archived",this.recurMissedDesc="Task will recur when task is not archived"):this.options.statusOn&&(this.recurMissedHint="This task didn't recur because the status wasn't changed to "+this.options.statusOn.status,this.recurMissedDesc="Task will recur when task is "+this.options.statusOn.status):(this.recurMissedHint=null,this.recurMissedDesc=null),this.notifyChanges("ngOnChanges",!0,!1)}selectType(e){return this.options.type=e,"SCHEDULE"===this.options.type&&"NEW"===this.options.action?this.options.statusOn=this.options.onlyIfCompleted&&this.statuses?this.statuses.find(b.l):null:!this.options.statusOn&&this.statuses&&(this.options.statusOn=this.statuses.find(b.l)),"UPDATE"===this.options.action&&"SCHEDULE"===this.options.type&&this.options.dueType===h.c.None&&(this.options.dueType=h.c.RecurNext),"NEW"!==this.options.action||"TRIGGER"!==this.options.type||this.options.dueType!==h.c.Recur&&this.options.dueType!==h.c.RecurNext||(this.options.dueType=h.c.None),this.showAdvanced=!1,this.setFrequences(),this.extraText=this.getExtraText(),this.nextDueDateText=this.getNextDueDateText(),this.notifyChanges("selectType"),!0}selectAction(e){return!("UPDATE"===e&&!this.dueDate||(this.options.action=e,"NEW"===this.options.action&&!this.options.status&&this.statuses&&(this.options.status=this.statuses.find(b.m)),"SCHEDULE"===this.options.type&&"NEW"===this.options.action?(this.options.dueType=h.c.None,this.options.statusOn=this.options.onlyIfCompleted&&this.statuses?this.statuses.find(b.l):null):!this.options.statusOn&&this.statuses&&(this.options.statusOn=this.statuses.find(b.l)),"UPDATE"===this.options.action&&"SCHEDULE"===this.options.type&&this.options.dueType===h.c.None&&(this.options.dueType=h.c.RecurNext),"NEW"!==this.options.action||"TRIGGER"!==this.options.type||this.options.dueType!==h.c.Recur&&this.options.dueType!==h.c.RecurNext||(this.options.dueType=h.c.None),this.nextDueDateText=this.getNextDueDateText(),this.notifyChanges("selectAction"),0))}changeInterval(e){let t=Number(e.target.value);t<=0&&(t=1,e.target.value=1),this.options.interval=t,this.setFrequences(),this.notifyChanges("changeInterval")}setFrequences(){this.frequences=this.options.interval>1?this.frequencesM:this.frequencesS,"TRIGGER"===this.options.type&&(this.frequences=this.frequences.map(e=>e+" after")),this.frequencesKeys=[{key:3,value:this.frequences[3]},{key:2,value:this.frequences[2]},{key:1,value:this.frequences[1]},{key:0,value:this.frequences[0]}],this.frequenceText=this.getFrequenceText()}changeFreq(e){switch(e=Number(e),this.options.freq=e,e){case h.d.YEARLY:this.options.byMonth||(this.options.byMonth=d().month()),this.options.byMonthDay||(this.options.byMonthDay=d().date()),this.options.byMonthDay<1&&(this.options.byMonthDay=1);break;case h.d.MONTHLY:this.options.monthlyType=0,this.options.byMonthDay||(this.options.byMonthDay=d().date()),this.options.byMonthDay>28&&(this.options.byMonthDay=-1);break;case h.d.WEEKLY:this.options.byDays&&this.options.byDays.length||(this.selectedDays[0]=!0,this.options.byDays=Object.keys(this.selectedDays).filter(e=>this.selectedDays[e]).map(e=>Number(e)))}this.frequenceText=this.getFrequenceText(),this.notifyChanges("changeFreq")}changeDays(e){this.selectedDays[e]=!this.selectedDays[e],this.options.byDays=Object.keys(this.selectedDays).filter(e=>this.selectedDays[e]).map(e=>Number(e)),this.frequenceText=this.getFrequenceText(),this.options.freq===h.d.DAILY&&7===this.options.byDays.length&&(this.options.recurDaily=!1),this.notifyChanges("changeDays")}getMaxDays(){return this.options.freq===h.d.YEARLY?d().month(this.options.byMonth).daysInMonth():31}changeMonth(e){this.options.byMonth=e;const t=this.getMaxDays();this.options.byMonthDay>t&&(this.options.byMonthDay=t),this.notifyChanges("changeMonth")}changeMonthDay(e){let t=Number(e.target.value);this.options.byMonthDay=t;const i=this.getMaxDays();t>i&&(t=i,e.target.value=t),t<1&&(t=1,e.target.value=t),this.options.byMonthDay=t,this.notifyChanges("changeMonthDay")}changeMonthDayCombo(e){this.options.byMonthDay=e,this.daysDropdown&&this.daysDropdown.close(),this.notifyChanges("changeMonthDayCombo")}changeMonthlyType(e){this.options.monthlyType=e,0===e?(this.options.byMonthDay||(this.options.byMonthDay=d().date()),this.options.byMonthDay>28&&(this.options.byMonthDay=-1)):((this.options.bySetPos<0||!this.options.bySetPos)&&(this.options.bySetPos=0),this.options.byDays&&this.options.byDays.length||(this.selectedDays[0]=!0,this.options.byDays=Object.keys(this.selectedDays).filter(e=>this.selectedDays[e]).map(e=>Number(e)))),this.notifyChanges("changeMonthlyType")}changePos(e){this.options.bySetPos=e,this.notifyChanges("changePos")}changeMoment(e,t=!1){const i=e.newMoment;t?(i?this.options.timeDue=i:(this.options.timeDue=null,this.showTimeDue=!1),this.notifyChanges("updateTimeDue")):(i?this.options.time=i:(this.options.time=null,this.showTime=!1),this.notifyChanges("updateTime"))}setShowTime(){this.showTime=!0,setTimeout(()=>{this.timeInput&&this.timeInput.focusInput()},0),this.notifyChanges("setShowTime")}setShowTimeDue(){this.showTimeDue=!0,setTimeout(()=>{this.timeInputDue&&this.timeInputDue.focusInput()},0),this.notifyChanges("setShowTimeDue")}setShowAdvanced(e){this.showAdvanced=e}changeEnd(e){switch(this.options.end=e,e){case 0:this.options.endDate=null,this.options.endCount=null;break;case 1:this.options.endDate=null,this.options.endCount||(this.options.endCount=1);break;case 2:this.options.endCount=null}this.endText=this.getEndText(),this.endTimeText=this.getEndTimeText(),this.notifyChanges("changeEnd")}changeEndCount(e){let t=Number(e.target.value);t<=0&&(t=1,e.target.value=t),this.options.endCount=t,this.options.endDate=null,this.endText=this.getEndText(),this.endTimeText=this.getEndTimeText(),this.notifyChanges("changeEndCount")}changeEndDate(e){this.options.endDate=e,this.endDateString=this.helpers.makeDateString(e,this.dateFormatting);const t=this.timezonesService.createMoment();this.forceUpdate=!e,this.options.endDate&&this.options.endDate.isBefore(t)&&(this.options.endDate=t,this.endDateString=this.helpers.makeDateString(t,this.dateFormatting),setTimeout(()=>{this.endDateString=this.helpers.makeDateString(t,this.dateFormatting)})),this.options.endCount=null,this.endText=this.getEndText(),this.notifyChanges("changeEndDate")}changeDueDateValue(e){let t=Number(e.target.value);t<1&&(t=1,e.target.value=t),this.options.dueValue=t,this.nextDueDateText=this.getNextDueDateText(),this.notifyChanges("changeDueDateValue")}changeDueDateType(e){this.options.dueType=Number(e),this.options.dueType>h.c.RecurNext&&!this.options.dueValue&&(this.options.dueValue=h.c.RecurNext),this.options.dueType<=h.c.Hours&&(this.timeDue=null,this.showTimeDue=!1),this.nextDueDateText=this.getNextDueDateText(),this.notifyChanges("changeDueDateType")}changeCopyType(e){this.options.copyType=Number(e),this.copyTaskText=this.getCopyTaskText(),this.notifyChanges("changeCopyType")}changeStatus(e){this.options.status=e,this.notifyChanges("changeStatus")}changeStatusOn(e){this.options.statusOn=e,this.notifyChanges("changeStatusOn")}changeCopy(e){return this.options.copy||(this.options.copy={}),this.options.copy.everything?(this.options.copy={everything:!1},this.options.copy[e]=!0,this.copyOptionsText=this.getCopyOptionsText(),this.notifyChanges("changeCopy"),!1):(this.options.copy[e]=!this.options.copy[e],this.copyOptionsText=this.getCopyOptionsText(),this.notifyChanges("changeCopy"),!0)}changeCopyAll(){this.options.copy||(this.options.copy={}),this.options.copy=this.options.copy.everything?{everything:!1}:Object.assign({},h.a),this.copyOptionsText=this.getCopyOptionsText(),this.notifyChanges("changeCopyAll")}setDueDate(){this.options.setDueDate=!this.options.setDueDate,this.notifyChanges("setDueDate")}validate(){let e=!0,t=null;return this.options.freq!==h.d.MONTHLY||1!==this.options.monthlyType||this.options.byDays&&0!==this.options.byDays.length||(e=!1,t="Select a day"),{valid:e,message:t}}notifyChanges(e,t=!0,i=!0){const o=this.validate();this.onChange.emit({options:this.options,original:this.originalOptions,validation:o}),t&&o.valid&&this.reloadRecurDates(i),this.nextText=this.getNextDateText()}reloadRecurDates(e){if("SCHEDULE"===this.options.type){const t=this.sharedData.currentUser.value?this.sharedData.currentUser.value.week_start_day:0,i=Object(p.c)(this.options,!1,t),o=Object(p.b)(this.options,i.toString());this.dataService.getTaskRecurrences(Object.assign(Object.assign({},o),{count:3,changed:e})).subscribe(e=>{if(e&&e.valid_recurrences&&(this.recurNextValid=!!e.recur_next_valid,this.hiddenOptions||this.recurNextValid||(this.options.recurNext=null),this.validDates=e.valid_recurrences.map(e=>this.timezonesService.createMoment(e)),!this.recurNextValid)){const e=this.validDates.find(e=>!this.options.start||e.isSame(this.options.start,"day"));e?(this.options.start=e,this.changeDetector.markForCheck()):this.validDates.length>0&&(this.options.start=this.validDates[0],this.changeDetector.markForCheck())}})}else this.options.start=null}openDayDropdown(){this.filterDays(""),this.searchDay.nativeElement.value="",setTimeout(()=>{this.searchDay.nativeElement.value="",this.searchDay.nativeElement.focus()},300)}searchDays(e){e.which===g.a.ESCAPE&&this.daysDropdown.close(),e.which===g.a.ENTER?Object.keys(this.daysFiltered).length>0&&this.changeMonthDay(Object.keys(this.daysFiltered)[0]):this.filterDays(e.target.value)}filterDays(e){e?(this.daysFiltered=Object.keys(this.days).filter(t=>t.toString().includes(e)||this.days[t].includes(e)).reduce((e,t)=>(e[t]=this.days[t],e),{}),"29"!==e&&"30"!==e&&"31"!==e||(this.daysFiltered[-1]="Last")):this.daysFiltered=Object.assign({},this.days)}changeSkipMissed(){return this.options.skipMissed=!this.options.skipMissed,this.extraText=this.getExtraText(),this.notifyChanges("changeSkipMissed"),!0}changeOnlyIfCompleted(){return this.options.onlyIfCompleted=!this.options.onlyIfCompleted,this.options.onlyIfCompleted&&this.statuses?this.options.statusOn=this.statuses.find(b.l):(this.options.statusOn=null,this.options.skipMissed=!0,this.extraText=this.getExtraText()),this.extraText=this.getExtraText(),this.notifyChanges("changeOnlyIfCompleted"),!0}changeRecurImmediately(){return this.options.recurImmediately=!this.options.recurImmediately,this.notifyChanges("changeRecurImmediately"),!0}displayStatus(){this.highlight="status",this.showAdvanced=!0,this.removeHighlightTimer()}displayStatusOn(){this.highlight="statusOn",this.showAdvanced="SCHEDULE"===this.options.type,this.removeHighlightTimer()}displayDueType(){this.highlight="dueType",this.showAdvanced=!0,this.removeHighlightTimer()}displayFreq(){this.highlight="freq",this.showAdvanced=!1,this.removeHighlightTimer()}displayTask(e=!1){e&&this.copyTaskUrl||(this.highlight="copyType",this.showAdvanced=!0,this.removeHighlightTimer())}removeHighlightTimer(){setTimeout(()=>{this.highlight=null,this.changeDetector.markForCheck()},1e3)}getNextDueDateText(){switch(this.options.dueType){case h.c.Recur:return"current occurrence";case h.c.RecurNext:return"next occurrence";case h.c.Hours:return this.options.dueValue>1?this.options.dueValue+" hours after occurrence":"1 hour after occurrence";case h.c.Days:return this.options.dueValue>1?this.options.dueValue+" days after occurrence":"1 day after occurrence";case h.c.Weeks:return this.options.dueValue>1?this.options.dueValue+" weeks after occurrence":"1 week after occurrence";default:return""}}getCopyTaskText(){let e="";switch(this.options.task&&(e=` (#${this.options.task})`),this.options.copyType){case 1:return"the newest task"+e;default:return this.task&&this.options.task&&this.task.id!==this.options.task?" task #"+this.options.task:"this task"+e}}getCopyTaskUrl(){if(this.options.task)return"/t/"+this.options.task}getCopyOptionsText(){if(!this.options.copy)return"options";if(this.options.copy.everything)return"everything";const e=Object.assign({},this.options.copy);e.everything=!1;const t=Object.keys(e).filter(t=>e[t]).length;return 0===t?"options":1===t?"1 item":t+" items"}getExtraText(){let e="";return this.options.onlyIfCompleted&&(e+=" Only recur if completed."),this.options.skipMissed||"SCHEDULE"!==this.options.type||(e+=" Don't skip missed events."),e}getFrequenceText(){if(!this.frequences[this.options.freq])return"";if(this.options.interval>1||"TRIGGER"===this.options.type)return`${this.options.interval} ${this.frequences[this.options.freq].toLowerCase()}`;if(this.updateDaysOfWeek(this.sharedData.currentUser.value?this.sharedData.currentUser.value.week_start_day:0),this.options.freq===h.d.WEEKLY||this.options.freq===h.d.DAILY&&this.options.recurDaily){if(7===this.options.byDays.length)return"day";if(6===this.options.byDays.length)return"day except "+Object.keys(this.daysOfWeek).filter(e=>!this.selectedDays[e]).map(e=>this.daysOfWeekFull[e]).join(", ");if(this.isWeekday())return"weekday";if(this.options.byDays.length>=1){const e=this.options.byDays.map(e=>this.daysOfWeekFull[e]);return e.length>1?e.slice(0,e.length-1).join(", ")+" and "+e[e.length-1]:e[0]}}return this.frequences[this.options.freq].toLowerCase()}updateDaysOfWeek(e=0){1===e?(this.daysOfWeek=["M","T","W","T","F","S","S"],this.daysOfWeekFull=[$localize`:@@common_weekday--monday:Monday`,$localize`:@@common_weekday--tuesday:Tuesday`,$localize`:@@common_weekday--wednesday:Wednesday`,$localize`:@@common_weekday--thursday:Thursday`,$localize`:@@common_weekday--friday:Friday`,$localize`:@@common_weekday--saturday:Saturday`,$localize`:@@common_weekday--sunday:Sunday`]):(this.daysOfWeek=["S","M","T","W","T","F","S"],this.daysOfWeekFull=[$localize`:@@common_weekday--sunday:Sunday`,$localize`:@@common_weekday--monday:Monday`,$localize`:@@common_weekday--tuesday:Tuesday`,$localize`:@@common_weekday--wednesday:Wednesday`,$localize`:@@common_weekday--thursday:Thursday`,$localize`:@@common_weekday--friday:Friday`,$localize`:@@common_weekday--saturday:Saturday`])}isWeekday(){return 1===(this.sharedData.currentUser.value?this.sharedData.currentUser.value.week_start_day:0)?this.selectedDays[0]&&this.selectedDays[1]&&this.selectedDays[2]&&this.selectedDays[3]&&this.selectedDays[4]:this.selectedDays[1]&&this.selectedDays[2]&&this.selectedDays[3]&&this.selectedDays[4]&&this.selectedDays[5]}getNextDateText(){let e="";switch(1===this.options.interval&&(e="the next "),this.options.freq){case 0:return`${e}${this.months[this.options.byMonth]} ${this.options.byMonthDay}${this.helpers.getOrdinalSuffix(this.options.byMonthDay)}`;case 1:if(0!==this.options.monthlyType){const e=this.poses[this.options.bySetPos];if(!e)return;return`the ${e.toLowerCase()} ${this._getWeekdays("or")}`}return`${e}${this.options.byMonthDay}${this.helpers.getOrdinalSuffix(this.options.byMonthDay)}`;case 2:return`${e}${this._getWeekdays("or")}`}}_getWeekdays(e="and"){this.updateDaysOfWeek(this.sharedData.currentUser.value?this.sharedData.currentUser.value.week_start_day:0);const t=this.options.byDays.map(e=>this.daysOfWeekFull[e]);return t.length>1?t.slice(0,t.length-1).join(", ")+` ${e} `+t[t.length-1]:t[0]}getEndText(){return 2===this.options.end&&this.endDateString?`Stop on ${this.endDateString}.`:1===this.options.end&&this.options.endCount?`Stop after ${this.options.endCount} time${this.options.endCount>1?"s":""}.`:null}getEndTimeText(){return this.options.endCount>1?"times":"time"}changeStartDate(e){this.options.start=e,this.options.recurNext=e.valueOf(),this.recurMissed=!1,this.hiddenOptions=!1,this.notifyChanges("changeStartDate",!1)}changeRecurDaily(){this.options.recurDaily=!0,this.selectedDays[0]=!0,this.selectedDays[1]=!0,this.selectedDays[2]=!0,this.selectedDays[3]=!0,this.selectedDays[4]=!0,this.selectedDays[5]=!0,this.selectedDays[6]=!0,this.options.byDays=Object.keys(this.selectedDays).filter(e=>this.selectedDays[e]).map(e=>Number(e)),this.notifyChanges("recurDaily",!1)}showOptions(){this.hiddenOptions=!1,this.onUpdateDropdownPosition.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(_.b),o.Wb(v.a),o.Wb(k.a),o.Wb(y.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-recurring-options-legacy"]],viewQuery:function(e,t){if(1&e&&(o.jd(O,1),o.jd(S,1),o.jd(E,1),o.jd(P,1),o.jd(j,1),o.jd(A,1),o.jd($,1),o.jd(U,1),o.jd(R,1),o.jd(M,1),o.jd(F,1)),2&e){let e;o.Qc(e=o.rc())&&(t.freqDropdown=e.first),o.Qc(e=o.rc())&&(t.posDropdown=e.first),o.Qc(e=o.rc())&&(t.monthDropdown=e.first),o.Qc(e=o.rc())&&(t.endDropdown=e.first),o.Qc(e=o.rc())&&(t.statusDropdown=e.first),o.Qc(e=o.rc())&&(t.dueDropdown=e.first),o.Qc(e=o.rc())&&(t.copyDropdown=e.first),o.Qc(e=o.rc())&&(t.daysDropdown=e.first),o.Qc(e=o.rc())&&(t.searchDay=e.first),o.Qc(e=o.rc())&&(t.timeInput=e.first),o.Qc(e=o.rc())&&(t.timeInputDue=e.first)}},inputs:{options:"options",militaryTime:"militaryTime",dateFormatting:"dateFormatting",dueDate:"dueDate",statuses:"statuses",task:"task",teamId:"teamId",readOnly:"readOnly"},outputs:{onChange:"onChange",onDropdown:"onDropdown",onUpdateDropdownPosition:"onUpdateDropdownPosition"},features:[o.Gb],decls:28,vars:20,consts:function(){let e,t,i,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,x,I,T,C,D,O,S,E,P,j,A,$,U,R,M,F,L,N,z,q,G,V,B,X,H,W,K,Q,Z,Y,J,ee,te,ie,oe,ne,se,ce,ae,re,le,de,ue,me,pe,he,fe,be,ge,_e,ve,ke,ye,we,xe,Ie,Te,Ce,De,Oe,Se,Ee,Pe,je,Ae,$e,Ue,Re,Me,Fe,Le,Ne,ze,qe,Ge;return e=$localize`:@@cu-recurring-options-legacy__form-label_repeat-schedule␟7e67d6faa4db0b041383c8bc1cccab61204d84f6␟1937053715787294223:Repeat schedule`,t=$localize`:@@cu-recurring-options-legacy__tooltip-msg_repeat-schedule␟7bf5eaf5345934574027940a78dce53fc618c54e␟1268800846253205545:Set an interval for Due Dates or for new tasks to be created.`,i=$localize`:@@cu-recurring-options-legacy__form-label_repeat-trigger␟bf7dc612e78c8ea8b519eaad192a6d791d812860␟4867322679004930354:Repeat trigger`,n=$localize`:@@cu-recurring-options-legacy__tooltip-msg_repeat-trigger␟7d5e4e1eeeec19feffb56e7fd82b4a408581fca9␟7203740705798142479:Repeat tasks after Status is changed.`,s=$localize`:@@common_edit-settings␟09584d12713fa101ff1793b2667a0668d065bba3␟2205815368217559043: Edit settings `,c=$localize`:@@cu-recurring-options-legacy__schedule␟4a4f46a2dcec36bd5c8c371ceee55c2226dec27f␟5433782699501161466:Schedule`,a=$localize`:@@cu-recurring-options-legacy__every␟f16c20a8235860ebe1627e691ce8279b486d5809␟7837676901821399739: every `,r=$localize`:time@@common_at-1␟3c92be991d82f660f2781f6d31e1194c8c109f50␟1392617074372706621: at `,l=$localize`:@@common_add-time␟7d6d20c7f8b973d5570403480f47a7f75161bce2␟6542791730480143144: Add Time `,d=$localize`:@@cu-recurring-options-legacy__ends␟31de900320a49625f7a4a2e58863fb60fe8312f5␟4906166672887705856:ends`,u=$localize`:@@cu-recurring-options-legacy__tooltip-msg_ends␟16e1ad64bd0ce8cd7a6bd36573ab623c9f185660␟6154186011881127557:When should we stop repeating this task?`,m=$localize`:@@cu-recurring-options-legacy__on-repeat␟ae1d85c88d635d82a9abf78330d1287476604b6c␟3941081857387854788:On repeat`,p=$localize`:@@cu-recurring-options-legacy__action␟dfd3d645bcee3844123b59ba90450bc104880b59␟5151914324276081075:action`,h=$localize`:@@cu-recurring-options-legacy__advanced-options␟6057ac678896fa14227163a94d804163290166e3␟2980688108457243770:Advanced options`,f=$localize`:@@common_back-2␟2e1b1e8483a26202929d13688d6898466777f5ea␟8361945101265529792: back `,b=$localize`:@@cu-recurring-options-legacy__advanced-options-1␟d12f966987f1d25188cf9b9c694c7f3866ff1cc0␟6241005890094260811: Advanced Options `,g=$localize`:@@common_due-date-2␟b4b9438a9fdc07cc7b062adc09413e18503d6e6c␟9109640022429823254:due date`,_=$localize`:@@cu-recurring-options-legacy__tooltip-msg_set-due-date␟4fee7770b4ca442a2ba21bfbb8bb0a04be7308dc␟4503664145310469512:On repeat, set Due Date for the task`,v=$localize`:@@cu-recurring-options-legacy__set-status␟3202737aedf48e83f10afe4ad7f887f34c5a7ddd␟5555865326188171881:set status`,k=$localize`:@@cu-recurring-options-legacy__tooltip-msg_set-status␟8c8656ef7e9536f58a6e15d4ac7bee338bde6fc8␟5762924660655747185:When triggered, set status of task to...`,y=$localize`:@@cu-recurring-options-legacy__option␟2923bc72ec3150e6574b68d99d64771bd6f79fb3␟6045955846707959218: option `,w=$localize`:@@cu-recurring-options-legacy__form-label_skip-missed-events␟1faa7a0e46cabe1c17da1032818263dca438c315␟4684507220471414315:skip missed events`,x=$localize`:@@cu-recurring-options-legacy__tooltip-msg_skip-missed-events␟c91a009c9f5a1427e9da738445714eb71f6e15c1␟5053722514175282912:When checked, if an event is missed because you didn't change the status in time, we'll skip that event. This means, only events in the future are possible.`,I=$localize`:@@cu-recurring-options-legacy__on␟3c63304ae834138dc3af1e1079e64f053499595c␟2475782142577441073: on `,T=$localize`:@@cu-recurring-options-legacy__all-days␟cc6cb73dc5825d661d8bbe93f10ba67268b11c2d␟2292386053252682727:All days`,C=$localize`:@@cu-recurring-options-legacy__on␟3c63304ae834138dc3af1e1079e64f053499595c␟2475782142577441073: on `,D=$localize`:@@cu-recurring-options-legacy__form-label_on-date␟6f025ef4c88059a8f0b4caddceedcd0f0ee898a4␟190192277255263491: on date `,O=$localize`:@@cu-recurring-options-legacycu-recurring-options-legacy__form-label_by-week␟a0908d304b5cab440bd0dfc85f7671a4bcc3a79b␟7270358716305635061: by week `,S=$localize`:form input placeholder@@forms_placeholder--search-1␟8aa58cf00d949c509df91c621ab38131df0a7599␟8854094932942190741:Search...`,E=$localize`:@@cu-recurring-options-legacy__on␟3c63304ae834138dc3af1e1079e64f053499595c␟2475782142577441073: on `,P=$localize`:@@common_end-date␟0f551576faafbd2806d4af653469655f1b35afe1␟7379726829888309084:End Date`,j=$localize`:@@common_copy␟1979da7460819153e11d2078244645d94291b69c␟4323470180912194028:Copy`,A=$localize`:@@cu-recurring-options-legacy__from-task␟eb19771150ab4c3002a32a8d0ae70c8245455652␟441421787449753678: from ${"\ufffd#11\ufffd"}:START_LINK:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#11\ufffd"}:CLOSE_LINK:`,$=$localize`:@@common_recur-copy-settings--include-in-new-task␟4962809b8f0d7cdc50762be172d892e6e23b75f7␟107207694207811315: Include in new task `,U=$localize`:@@common_recur-copy-settings--include-everything␟bf49d203fec86b66a99b3f40908459e1f1e3c106␟2039155226157293581: Include everything `,R=$localize`:@@cu-recurring-options-legacy__repeat-on␟4a7156d02f6d8689ab706e314cdb69345871909f␟8866453654266179498:repeat on`,M=$localize`:@@cu-recurring-options-legacy__tooltip-msg_reset-task-on-status␟d4f124182218f9dc82ef5f2e22383322fa2e293a␟5207670937806121458:Reset when task is changed to this status.`,F=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,L=$localize`:@@cu-recurring-options-legacy__due-dates-disabled␟ad55f5fce42d9d400f640fdbac84b0a54bf508c4␟2489076694580267796: Due dates are disabled `,N=$localize`:@@cu-recurring-options-legacy__due-time␟8ed0cbd7f84d7d22d93876e46c4c66d50232f9b7␟7533323715618524371: due time `,z=$localize`:@@common_add-time␟7d6d20c7f8b973d5570403480f47a7f75161bce2␟6542791730480143144: Add Time `,q=$localize`:@@common_dont-change-status␟e21f0f8f0ba0e8d2996f2cefe546fb33db57c46a␟5373626502630777339: don't change status `,G=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,V=$localize`:@@common_copy-2␟37584f889855d153a106f5dffe23d21f9453c8ff␟6862265996781523030:copy`,B=$localize`:@@cu-recurring-options-legacy__tooltip-msg_copy␟18638db20afe1a864345c67c1ca984312033c12c␟6159996613559406767:When creating a new task, should we use the first task or the most recent task to copy from?`,X=$localize`:@@cu-recurring-options-legacy__option␟2923bc72ec3150e6574b68d99d64771bd6f79fb3␟6045955846707959218: option `,H=$localize`:@@cu-recurring-options-legacy__form-label_recur-if-completed␟d7d2f6cd02934216b8cb8ec9296f87d6a4967ec3␟280259366424651664:only recur if completed`,W=$localize`:@@cu-recurring-options-legacy__tooltip-msg_recur-if-completed␟3bfa48f50294abf0657e87feb366a5d5b51dd4ab␟4331153509809658108:When checked, we'll wait to repeat until the task is closed. When unchecked, recurrences will always happen, regardless of if the previous task is closed.`,K=$localize`:@@cu-recurring-options-legacy__option␟2923bc72ec3150e6574b68d99d64771bd6f79fb3␟6045955846707959218: option `,Q=$localize`:@@cu-recurring-options-legacy__form-label_reset-on-status␟681db51efb348f3c1142ac291b71eff74a9f347f␟778054117210693382:immediately reset on ${"\ufffd0\ufffd"}:INTERPOLATION:`,Z=$localize`:@@cu-recurring-options-legacy__tooltip-msg_reset-on-status␟b60f7ab9e0e98732dec92dcc4cadcb96c3752810␟6476251302837992773:When checked, as soon as you close the task the status and due date will be changed immediately. When unchecked, the task will remain closed until the recurring time.`,Y=$localize`:@@cu-recurring-options-legacy__option␟2923bc72ec3150e6574b68d99d64771bd6f79fb3␟6045955846707959218: option `,J=$localize`:@@cu-recurring-options-legacy__form-label_recur-immediately-on-completion␟672df20fb7a2722356e33cce30e1386886b47af6␟8614380342936514988:recur immediately on completion`,ee=$localize`:@@cu-recurring-options-legacy__tooltip-msg_recur-immediately-on-completion␟acdc047a8d9795c6a9f61fbf1c914f587be23c69␟3951800516825877492:If unchecked, the new task will be created on the scheduled interval. Otherwise, it will be created instantly after completion.`,te=$localize`:@@cu-recurring-options-legacy__summary-text_schedule-update␟cb4c5e352407a51f0c8da4f778d9a278a6e479b0␟4408596675732975663: Repeat ${"\ufffd#3\ufffd"}:START_LINK:every ${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK: after task is ${"\ufffd#4\ufffd"}:START_LINK_1:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK:, ${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:changing ${"[\ufffd*2:2\ufffd\ufffd#1:2\ufffd|\ufffd*2:4\ufffd\ufffd#1:4\ufffd]"}:START_TAG_SPAN:Due date to ${"[\ufffd#2:2\ufffd|\ufffd#2:4\ufffd]"}:START_LINK_2:${"[\ufffd0:2\ufffd|\ufffd0:4\ufffd]"}:INTERPOLATION_2:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK: and ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*2:4\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*7:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*8:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*9:7\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*6:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_1:waiting for next occurrence to change ${"[\ufffd*2:2\ufffd\ufffd#1:2\ufffd|\ufffd*2:4\ufffd\ufffd#1:4\ufffd]"}:START_TAG_SPAN:Due date to ${"[\ufffd#2:2\ufffd|\ufffd#2:4\ufffd]"}:START_LINK_2:${"[\ufffd0:2\ufffd|\ufffd0:4\ufffd]"}:INTERPOLATION_2:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK: and ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*2:4\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*7:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*8:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*9:7\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*7:5\ufffd\ufffd#1:5\ufffd"}:START_TAG_NG_CONTAINER_2:status to ${"[\ufffd#2:5\ufffd|\ufffd#2:6\ufffd]"}:START_LINK_3:${"\ufffd0:5\ufffd"}:INTERPOLATION_3:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK:.${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*7:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*8:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*9:7\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*8:6\ufffd\ufffd#1:6\ufffd"}:START_TAG_NG_CONTAINER_3:don't change ${"[\ufffd#2:5\ufffd|\ufffd#2:6\ufffd]"}:START_LINK_3:status${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK:.${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*7:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*8:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*9:7\ufffd]"}:CLOSE_TAG_NG_CONTAINER: ${"\ufffd2\ufffd"}:INTERPOLATION_4: ${"\ufffd*9:7\ufffd\ufffd#1:7\ufffd"}:START_TAG_NG_CONTAINER_4:Starts on ${"\ufffd#2:7\ufffd"}:START_TAG_DIV_5:${"\ufffd#3:7\ufffd"}:START_TAG_DIV:${"\ufffd#4:7\ufffd"}:START_LINK_4:${"\ufffd0:7\ufffd"}:INTERPOLATION_5:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:4\ufffd|\ufffd/#2:5\ufffd|\ufffd/#2:6\ufffd|\ufffd/#4:7\ufffd]"}:CLOSE_LINK:${"[\ufffd/#3:7\ufffd|\ufffd/#1:9\ufffd\ufffd/*4:9\ufffd|\ufffd/#3:8\ufffd|\ufffd/#2:8\ufffd|\ufffd/#1:8\ufffd\ufffd/*6:8\ufffd|\ufffd/#2:7\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*6:8\ufffd\ufffd#1:8\ufffd"}:START_TAG_DIV_4:${"\ufffd#2:8\ufffd"}:START_TAG_DIV_3:${"\ufffd#3:8\ufffd"}:START_TAG_DIV_2:${"\ufffd*4:9\ufffd\ufffd#1:9\ufffd"}:START_TAG_DIV_1: ${"\ufffd0:9\ufffd"}:INTERPOLATION_6: ${"[\ufffd/#3:7\ufffd|\ufffd/#1:9\ufffd\ufffd/*4:9\ufffd|\ufffd/#3:8\ufffd|\ufffd/#2:8\ufffd|\ufffd/#1:8\ufffd\ufffd/*6:8\ufffd|\ufffd/#2:7\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:7\ufffd|\ufffd/#1:9\ufffd\ufffd/*4:9\ufffd|\ufffd/#3:8\ufffd|\ufffd/#2:8\ufffd|\ufffd/#1:8\ufffd\ufffd/*6:8\ufffd|\ufffd/#2:7\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:7\ufffd|\ufffd/#1:9\ufffd\ufffd/*4:9\ufffd|\ufffd/#3:8\ufffd|\ufffd/#2:8\ufffd|\ufffd/#1:8\ufffd\ufffd/*6:8\ufffd|\ufffd/#2:7\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:7\ufffd|\ufffd/#1:9\ufffd\ufffd/*4:9\ufffd|\ufffd/#3:8\ufffd|\ufffd/#2:8\ufffd|\ufffd/#1:8\ufffd\ufffd/*6:8\ufffd|\ufffd/#2:7\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:7\ufffd|\ufffd/#1:9\ufffd\ufffd/*4:9\ufffd|\ufffd/#3:8\ufffd|\ufffd/#2:8\ufffd|\ufffd/#1:8\ufffd\ufffd/*6:8\ufffd|\ufffd/#2:7\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*7:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*8:6\ufffd|\ufffd/#1:7\ufffd\ufffd/*9:7\ufffd]"}:CLOSE_TAG_NG_CONTAINER: ${"\ufffd3\ufffd"}:INTERPOLATION_7: `,te=o.lc(te),ie=$localize`:@@cu-recurring-options-legacy__form-label_set-first-due-date-now␟6dccbe097d8193dfa34afb5afa7683364d6452f3␟7119829889313826534: Set the first Due Date now `,oe=$localize`:@@cu-recurring-options-legacy__summary-text_schedule-new␟a68ea2630e1586ef1d957972fd8cb0042021fb8a␟456608194249970600: Repeat ${"\ufffd#2\ufffd"}:START_LINK:every ${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:1\ufffd|\ufffd/#4:2\ufffd]"}:CLOSE_LINK:, copy ${"\ufffd#3\ufffd"}:START_LINK_1:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:1\ufffd|\ufffd/#4:2\ufffd]"}:CLOSE_LINK:, with status ${"\ufffd#4\ufffd"}:START_LINK_2:${"\ufffd2\ufffd"}:INTERPOLATION_2:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:1\ufffd|\ufffd/#4:2\ufffd]"}:CLOSE_LINK:${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN:and Due date set to ${"\ufffd#2:1\ufffd"}:START_LINK_3:${"\ufffd0:1\ufffd"}:INTERPOLATION_3:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:1\ufffd|\ufffd/#4:2\ufffd]"}:CLOSE_LINK:${"\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd"}:CLOSE_TAG_SPAN:. ${"\ufffd3\ufffd"}:INTERPOLATION_4: ${"\ufffd*6:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:Starts on ${"\ufffd#2:2\ufffd"}:START_TAG_DIV_5:${"\ufffd#3:2\ufffd"}:START_TAG_DIV:${"\ufffd#4:2\ufffd"}:START_LINK_4:${"\ufffd0:2\ufffd"}:INTERPOLATION_5:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#2:1\ufffd|\ufffd/#4:2\ufffd]"}:CLOSE_LINK:${"[\ufffd/#3:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#3:3\ufffd|\ufffd/#2:3\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*6:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_DIV_4:${"\ufffd#2:3\ufffd"}:START_TAG_DIV_3:${"\ufffd#3:3\ufffd"}:START_TAG_DIV_2:${"\ufffd*4:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_DIV_1: ${"\ufffd0:4\ufffd"}:INTERPOLATION_6: ${"[\ufffd/#3:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#3:3\ufffd|\ufffd/#2:3\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#3:3\ufffd|\ufffd/#2:3\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#3:3\ufffd|\ufffd/#2:3\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#3:3\ufffd|\ufffd/#2:3\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#3:2\ufffd|\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#3:3\ufffd|\ufffd/#2:3\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd|\ufffd/#2:2\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd/#1:2\ufffd\ufffd/*6:2\ufffd"}:CLOSE_TAG_NG_CONTAINER: ${"\ufffd4\ufffd"}:INTERPOLATION_7: `,oe=o.lc(oe),ne=$localize`:@@cu-recurring-options-legacy__task-is␟d24d9287f2efb7535d4bc1a67e9086245d554d45␟3830930141547173815:task is`,se=$localize`:@@cu-recurring-options-legacy__tooltip-msg_task-status␟23d5abc6d0a5a3eefa53c162b2261f21ceb6b01f␟2813087956977278252:Repeat when task is changed to this status.`,ce=$localize`:@@cu-recurring-options-legacy␟a4239e10ae07e39dc6b50fcfd34ad04215ad4d06␟6408870772587289662:Do`,ae=$localize`:@@cu-recurring-options-legacy__action␟dfd3d645bcee3844123b59ba90450bc104880b59␟5151914324276081075:action`,re=$localize`:@@cu-recurring-options-legacy__advanced-options␟6057ac678896fa14227163a94d804163290166e3␟2980688108457243770:Advanced options`,le=$localize`:@@common_back-2␟2e1b1e8483a26202929d13688d6898466777f5ea␟8361945101265529792: back `,de=$localize`:@@cu-recurring-options-legacy__advanced-options-1␟d12f966987f1d25188cf9b9c694c7f3866ff1cc0␟6241005890094260811: Advanced Options `,ue=$localize`:@@cu-recurring-options-legacy__set-status␟3202737aedf48e83f10afe4ad7f887f34c5a7ddd␟5555865326188171881:set status`,me=$localize`:@@cu-recurring-options-legacy__tooltip-msg_set-status-1␟2c7461aa994689f8143a4abfaadc8cbd9aa3f525␟3499115802620028169:When triggered, set status to...`,pe=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,he=$localize`:@@common_copy␟1979da7460819153e11d2078244645d94291b69c␟4323470180912194028:Copy`,fe=$localize`:@@cu-recurring-options-legacy__from-task␟eb19771150ab4c3002a32a8d0ae70c8245455652␟441421787449753678: from ${"\ufffd#11\ufffd"}:START_LINK:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#11\ufffd"}:CLOSE_LINK:`,be=$localize`:@@common_recur-copy-settings--include-in-new-task␟4962809b8f0d7cdc50762be172d892e6e23b75f7␟107207694207811315: Include in new task `,ge=$localize`:@@common_recur-copy-settings--include-everything␟bf49d203fec86b66a99b3f40908459e1f1e3c106␟2039155226157293581: Include everything `,_e=$localize`:@@common_to␟e04356b41e0d85f3e2f7ebc72a3f75c6e1147663␟3207050836358092212:to`,ve=$localize`:time@@common_at-1␟f5c49f8f90e8c65c3aaba1c93350d69b26daed9c␟5478468384012268945: at `,ke=$localize`:@@common_add-time␟0476e183857bce9ee6721dc1f162adc38e1b4e91␟3938507297541494747: Add Time `,ye=$localize`:@@cu-recurring-options-legacy__ends␟31de900320a49625f7a4a2e58863fb60fe8312f5␟4906166672887705856:ends`,we=$localize`:@@cu-recurring-options-legacy__tooltip-msg_ends␟16e1ad64bd0ce8cd7a6bd36573ab623c9f185660␟6154186011881127557:When should we stop repeating this task?`,xe=$localize`:@@cu-recurring-options-legacy__on␟4c7b77ab315bc873e25bd30eac19b7c3d46edf13␟5950571793653906943: on `,Ie=$localize`:@@common_recur-copy-settings--on-date␟af61a06ff7934759856f18e92663aef1064aa30e␟4910739026342209083: on date `,Te=$localize`:@@cu-recurring-options-legacy__form-label_on-week␟d55f2394809d3641d269cf78b5b9bc0d8fea2c1b␟3287445324334715444: on week `,Ce=$localize`:form input placeholder@@forms_placeholder--search-1␟8aa58cf00d949c509df91c621ab38131df0a7599␟8854094932942190741:Search...`,De=$localize`:@@cu-recurring-options-legacy__on␟4c7b77ab315bc873e25bd30eac19b7c3d46edf13␟5950571793653906943: on `,Oe=$localize`:@@common_end-date␟0f551576faafbd2806d4af653469655f1b35afe1␟7379726829888309084:End Date`,Se=$localize`:@@cu-recurring-options-legacy__ends␟edee6118fc1357d7342464a2b76bdd710843146d␟872065161471959080: ends `,Ee=$localize`:@@common_end-date␟0f551576faafbd2806d4af653469655f1b35afe1␟7379726829888309084:End Date`,Pe=$localize`:@@common_dont-change-status␟e21f0f8f0ba0e8d2996f2cefe546fb33db57c46a␟5373626502630777339: don't change status `,je=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,Ae=$localize`:@@common_due-date-2␟b4b9438a9fdc07cc7b062adc09413e18503d6e6c␟9109640022429823254:due date`,$e=$localize`:@@cu-recurring-options-legacy__tooltip-msg_due-date␟973a80511877ae08466f098993c4cb2887c8bff3␟1659033415174329989:Set Due Date of new task to...`,Ue=$localize`:@@cu-recurring-options-legacy__due-dates-disabled␟ad55f5fce42d9d400f640fdbac84b0a54bf508c4␟2489076694580267796: Due dates are disabled `,Re=$localize`:@@cu-recurring-options-legacy__due-time␟8ed0cbd7f84d7d22d93876e46c4c66d50232f9b7␟7533323715618524371: due time `,Me=$localize`:@@common_add-time␟7d6d20c7f8b973d5570403480f47a7f75161bce2␟6542791730480143144: Add Time `,Fe=$localize`:@@common_copy-2␟37584f889855d153a106f5dffe23d21f9453c8ff␟6862265996781523030:copy`,Le=$localize`:@@cu-recurring-options-legacy__tooltip-msg_copy␟18638db20afe1a864345c67c1ca984312033c12c␟6159996613559406767:When creating a new task, should we use the first task or the most recent task to copy from?`,Ne=$localize`:@@cu-recurring-options-legacy__summary-text_trigger-update␟05410f2a4a765b41d39328559fa348bf452436e9␟5389056324560411876: Change ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN:Due date to ${"\ufffd#2:1\ufffd"}:START_LINK:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd|\ufffd/#2:3\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_LINK:${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_SPAN: the task is ${"\ufffd#3\ufffd"}:START_LINK_1:${"\ufffd0\ufffd"}:INTERPOLATION_1:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd|\ufffd/#2:3\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_LINK:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:(on ${"\ufffd0:2\ufffd"}:INTERPOLATION_2:)${"[\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_NG_CONTAINER: and ${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_1:set status to ${"[\ufffd#2:3\ufffd|\ufffd#2:4\ufffd]"}:START_LINK_2:${"\ufffd0:3\ufffd"}:INTERPOLATION_3:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd|\ufffd/#2:3\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_LINK:.${"[\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_NG_CONTAINER_2:don't change ${"[\ufffd#2:3\ufffd|\ufffd#2:4\ufffd]"}:START_LINK_2:status${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd|\ufffd/#2:3\ufffd|\ufffd/#2:4\ufffd]"}:CLOSE_LINK:.${"[\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_NG_CONTAINER: ${"\ufffd1\ufffd"}:INTERPOLATION_4: ${"\ufffd2\ufffd"}:INTERPOLATION_5: `,Ne=o.lc(Ne),ze=$localize`:@@cu-recurring-options-legacy__summary-text_trigger-new␟d0b7b66e58ea14293486297ec109ce1f80ea8a01␟3931094331902571791: When task is ${"\ufffd#2\ufffd"}:START_LINK:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_LINK:, create a new task from ${"\ufffd#3\ufffd"}:START_LINK_1:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_LINK:${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN:and change Due date to ${"\ufffd#2:1\ufffd"}:START_LINK_2:${"\ufffd0:1\ufffd"}:INTERPOLATION_2:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_LINK:, ${"\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd"}:CLOSE_TAG_SPAN: with status ${"\ufffd#5\ufffd"}:START_LINK_3:${"\ufffd2\ufffd"}:INTERPOLATION_3:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#5\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_LINK:. ${"\ufffd3\ufffd"}:INTERPOLATION_4: ${"\ufffd4\ufffd"}:INTERPOLATION_5: `,ze=o.lc(ze),qe=$localize`:@@cu-recurring-options-legacy__missed-next-occurence␟c60c770c5a69e4bed282d009623b462a273bb842␟4489375730007396403:${"\ufffd0\ufffd"}:INTERPOLATION: occurrence`,Ge=$localize`:@@common_dont-change-status␟38699c782ec29ee360b5060797e9643d16066d32␟4857789362557976338:don't change status`,[[1,"recurring-options",3,"ngClass"],[1,"recurring-options__type",3,"ngClass"],[1,"recurring-options__type-item"],[1,"cu-radio"],["type","radio",1,"cu-radio__input",3,"checked","disabled","value","click"],[1,"cu-radio__label","recurring-options__radio-label"],e,["icon","question","cuTooltip",t,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],i,["icon","question","cuTooltip",n,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],["class","recurring-options__schedule",4,"ngIf"],["class","recurring-options__trigger",4,"ngIf"],[1,"recurring-options__hidden",3,"ngClass","click"],["icon","settings",1,"recurring-options__hidden-icon"],[1,"recurring-options__hidden-link"],s,["nextOccur",""],["dontChangeStatusTmpl",""],[1,"recurring-options__schedule"],[1,"recurring-options__schedule-main",3,"ngClass"],[1,"recurring-options__divider"],c,[1,"recurring-options__freq"],[1,"recurring-options__freq-title"],a,[1,"recurring-options__freq-data"],["cuNumbersOnly","",1,"recurring-options__input",3,"disabled","value","change"],["cuDropdown","",1,"cu-dropdown","recurring-options__combo",3,"dropdownDisabled","dropdownOpen","dropdownClose"],["freqDropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle","recurring-options__combo-value"],[1,"recurring-options__combo-text"],["icon","angle-right",1,"recurring-options__combo-down"],["class","cu-dropdown__menu recurring-options__combo-menu",4,"cuDropdownMenu"],["class","recurring-options__weekly",4,"ngIf"],["class","recurring-options__monthly",4,"ngIf"],["class","recurring-options__yearly",4,"ngIf"],[1,"recurring-options__time","recurring-options__time_justify-content-normal"],[1,"recurring-options__time-title"],r,[1,"recurring-options__time-data"],[1,"recurring-options__time-data_empty",3,"ngClass"],["icon","clock",1,"recurring-options__time-clock"],[1,"recurring-options__time-empty",3,"click"],l,[3,"ngClass","dateVal","forTime","focusOnInit","timeExists","militaryTime","placeholder","onChange"],["timeInput",""],[1,"recurring-options__end"],[1,"recurring-options__end-title"],d,["icon","question","cuTooltip",u,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],[1,"recurring-options__end-data",3,"ngClass"],["endDropdown","dropdown"],["class","recurring-options__end-count",4,"ngIf"],["class","recurring-options__end-date",4,"ngIf"],m,[1,"recurring-options__action"],[1,"recurring-options__action-row"],[1,"recurring-options__action-title"],p,["icon","question","cuTooltip","What should we do for each interval on the Schedule above?","tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],[1,"recurring-options__action-data"],["class","recurring-options__action-copy",4,"ngIf"],[1,"recurring-options__advanced"],[3,"click"],h,[1,"recurring-options__schedule-advanced",3,"ngClass"],[1,"recurring-options__advanced-header"],[1,"recurring-options__back",3,"click"],["icon","arrow-down",1,"recurring-options__back-icon"],[1,"recurring-options__back-text"],f,[1,"recurring-options__advanced-header-title"],b,["class","recurring-options__status",3,"recurring-options__highlight",4,"ngIf"],[1,"recurring-options__due","recurring-options__due_justify-content-normal"],[1,"recurring-options__due-title"],g,["icon","question","cuTooltip",_,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],[1,"recurring-options__due-data"],["class","recurring-options__time-empty",4,"ngIf"],["class","recurring-options__input","cuNumbersOnly","",3,"value","change",4,"ngIf"],["class","cu-dropdown recurring-options__combo","cuDropdown","",3,"dropdownDisabled","dropdownOpen","dropdownClose",4,"ngIf"],["class","recurring-options__time recurring-options__time_justify-content-normal",3,"ngClass",4,"ngIf"],[1,"recurring-options__status"],[1,"recurring-options__status-title"],v,["icon","question","cuTooltip",k,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],[1,"recurring-options__status-data"],["statusDropdown","dropdown"],[1,"recurring-options__combo-text",3,"ngStyle"],[4,"ngIf","ngIfElse"],["class","recurring-options__copy-type",3,"recurring-options__highlight",4,"ngIf"],["class","recurring-options__checkoption",4,"ngIf"],["class","recurring-options__checkoption",3,"recurring-options__checkoption-disabled",4,"ngIf"],[1,"recurring-options__checkoption"],[1,"recurring-options__checkoption-title"],y,[1,"recurring-options__checkoption-data"],[1,"cu-checkbox",3,"cuTooltip"],["type","checkbox","name","skip_missed",1,"cu-checkbox__input",3,"checked","disabled","click"],[1,"cu-checkbox__label"],w,["icon","question","cuTooltip",x,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],[1,"recurring-options__summary"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"cu-dropdown__menu","recurring-options__combo-menu"],[1,"recurring-list"],[1,"recurring-list__body"],["class","recurring-list__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recurring-list__item",3,"click"],[1,"recurring-options__weekly"],[1,"recurring-options__weekly-title"],I,[1,"recurring-options__weekly-data"],[1,"recurring-options__days",3,"ngClass"],["class","recurring-options__days-item",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recurring-options__all-days",3,"ngClass"],T,[1,"recurring-options__days-item",3,"ngClass","click"],C,[1,"recurring-options__days"],[1,"recurring-options__monthly"],[1,"recurring-options__monthly-title"],[1,"recurring-options__monthly-data"],[1,"recurring-options__monthly-options"],["type","radio",1,"cu-radio__input",3,"disabled","checked","value","change"],D,O,["class","recurring-options__monthly-option1",4,"ngIf"],["class","recurring-options__monthly-option2",4,"ngIf"],[1,"recurring-options__monthly-option1"],["cuDropdown","",1,"cu-dropdown","recurring-options__combo",3,"dropdownDisabled","dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["daysDropdown","dropdown"],["type","text","placeholder",S,1,"recurring-list__body-search",3,"keyup"],["searchDay",""],[1,"recurring-options__monthly-option2"],["posDropdown","dropdown"],[1,"recurring-options__yearly"],[1,"recurring-options__yearly-title"],E,[1,"recurring-options__yearly-data"],["monthDropdown","dropdown"],[1,"recurring-options__combo-text","recurring-options__combo-text_capitalize"],["cuNumbersOnly","","maxlength","2",1,"recurring-options__input",3,"value","change"],["class","recurring-list__item recurring-list__item_capitalize",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recurring-list__item","recurring-list__item_capitalize",3,"click"],[1,"recurring-options__end-count"],["cuNumbersOnly","",1,"recurring-options__input",3,"value","change"],[1,"recurring-options__end-date"],["cuDropdown","",1,"cu-dropdown","cu-dropdown_datepicker",3,"dropdownCloseOnInsideClick"],["dateDropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["placeholder",P,"outsideClick","true",3,"dateVal","dateFormatting","forceUpdate","inDatePicker","displayConsistent","onChange"],["datetimeNaturalLanguage",""],["class","cu-dropdown__menu",3,"click",4,"cuDropdownMenu"],[1,"cu-dropdown__menu",3,"click"],[1,"datepicker-menu","datepicker-menu_custom-fields"],[3,"showStart","date","showInput","weekStart","onSelect","onCloseDropdown","arrowClick","click"],["class","recurring-list__item",3,"recurring-list__item-disabled","cuTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recurring-list__item",3,"cuTooltip","click"],[1,"recurring-options__action-copy"],j,[1,"recurring-options__action-settings","recurring-options__action-settings_dashed"],["cuDropdown","",1,"cu-dropdown",3,"dropdownDisabled","dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["copyDropdown","dropdown"],A,[1,"recurring-options__action-settings","recurring-options__action-settings_dashed",3,"click"],[1,"recurring-options__copy-header"],[1,"recurring-options__copy-header-title"],$,[1,"cu-checkbox","recurring-options__copy-item","recurring-options__copy-item-all"],["type","checkbox","name","copy_all",1,"cu-checkbox__input",3,"checked","disabled","click"],[1,"cu-checkbox__label","recurring-options__copy-label"],U,[1,"recurring-options__copy-header-divider"],[1,"recurring-options__copy-list"],["class","cu-checkbox recurring-options__copy-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-checkbox","recurring-options__copy-item"],["type","checkbox",1,"cu-checkbox__input",3,"name","ngClass","checked","disabled","click"],R,["icon","question","cuTooltip",M,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],["class","recurring-list__item status-list__item",3,"ngStyle","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recurring-list__item","status-list__item",3,"ngStyle","click"],[1,"status-list__status"],["class","status-list__status-done","icon","status-done","cuTooltip",F,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done","cuTooltip",F,"tooltipLifeTime","15000",1,"status-list__status-done"],[1,"recurring-options__time-empty"],L,["dueDropdown","dropdown"],["class","recurring-list__item",3,"cu-hidden","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recurring-options__time","recurring-options__time_justify-content-normal",3,"ngClass"],N,z,["timeInputDue",""],["class","recurring-list__item",3,"click",4,"ngIf"],q,["class","status-list__status-done","icon","status-done","cuTooltip",G,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done","cuTooltip",G,"tooltipLifeTime","15000",1,"status-list__status-done"],[1,"recurring-options__copy-type"],[1,"recurring-options__copy-type-title"],V,["icon","question","cuTooltip",B,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],[1,"recurring-options__copy-type-data"],["icon","question","tooltipLifeTime","15000",1,"recurring-list__item-icon_question",3,"cuTooltip"],X,[1,"cu-checkbox"],["type","checkbox","name","only_if_copleted",1,"cu-checkbox__input",3,"checked","disabled","click"],H,["icon","question","cuTooltip",W,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],K,["type","checkbox","name","recur_immediately",1,"cu-checkbox__input",3,"checked","disabled","click"],Q,["icon","question","cuTooltip",Z,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],Y,J,["icon","question","cuTooltip",ee,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question",2,"margin-left","3px","margin-right","-15px"],te,[1,"recurring-options__checkoption-data","recurring-options__checkoption-data_centered"],["class","cu-checkbox",4,"ngIf"],["cuDropdown","",1,"cu-dropdown","recurring-options__strat-dates",3,"dropdownDisabled","dropdownOpen","dropdownClose"],["class","cu-dropdown__menu recurring-options__combo-menu recurring-options__strat-dates-menu",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","recurring-options__combo-menu","recurring-options__strat-dates-menu"],["type","checkbox","name","set_due_date",1,"cu-checkbox__input",3,"checked","disabled","click"],ie,oe,["target","_blank",3,"ngClass","click"],[1,"recurring-options__trigger"],[1,"recurring-options__trigger-main",3,"ngClass"],ne,["icon","question","cuTooltip",se,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],ce,ae,["icon","question","cuTooltip","What should we do when task is changed to that status?","tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],re,[1,"recurring-options__trigger-advanced",3,"ngClass"],le,de,ue,["icon","question","cuTooltip",me,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],["class","recurring-options__due recurring-options__due_justify-content-normal",3,"recurring-options__highlight",4,"ngIf"],["class","status-list__status-done","icon","status-done","cuTooltip",pe,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done","cuTooltip",pe,"tooltipLifeTime","15000",1,"status-list__status-done"],he,fe,be,ge,_e,ve,ke,ye,["icon","question","cuTooltip",we,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],xe,["type","radio",1,"cu-radio__input",3,"checked","disabled","value","change"],Ie,Te,["type","text","placeholder",Ce,1,"recurring-list__body-search",3,"keyup"],De,["dateDropdownA","dropdown"],["placeholder",Oe,"outsideClick","true",3,"dateVal","dateFormatting","forceUpdate","inDatePicker","displayConsistent","onChange"],["datetimeNaturalLanguageA",""],Se,["dateDropdownB","dropdown"],["placeholder",Ee,"outsideClick","true",3,"dateVal","dateFormatting","forceUpdate","inDatePicker","displayConsistent","onChange"],["datetimeNaturalLanguageB",""],Pe,["class","status-list__status-done","icon","status-done","cuTooltip",je,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done","cuTooltip",je,"tooltipLifeTime","15000",1,"status-list__status-done"],Ae,["icon","question","cuTooltip",$e,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],Ue,Re,Me,Fe,["icon","question","cuTooltip",Le,"tooltipLifeTime","15000",1,"recurring-list__item-icon_question"],Ne,ze,["target","_blank",3,"click"],[1,"recurring-options__recur-next",3,"ngClass","cuTooltip"],["cuDropdown","",1,"cu-dropdown",3,"dropdownDisabled","dropdownOpen","dropdownClose"],[1,"recurring-options__recur-next-date"],qe,["icon","arrow-left-bold",1,"recurring-options__recur-next-arrow"],[1,"recurring-options__recur-next-desc"],Ge]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.cc(2,"div",2),o.cc(3,"div",3),o.cc(4,"label"),o.cc(5,"input",4),o.qc("click",function(){return t.selectType("SCHEDULE")}),o.bc(),o.cc(6,"div",5),o.ac(7),o.gc(8,6),o.Zb(),o.Xb(9,"div",7),o.bc(),o.bc(),o.bc(),o.bc(),o.cc(10,"div",2),o.cc(11,"div",3),o.cc(12,"label"),o.cc(13,"input",4),o.qc("click",function(){return t.selectType("TRIGGER")}),o.bc(),o.cc(14,"div",5),o.ac(15),o.gc(16,8),o.Zb(),o.Xb(17,"div",9),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.bd(18,it,118,67,"div",10),o.bd(19,ci,68,31,"div",11),o.cc(20,"div",12),o.qc("click",function(){return t.showOptions()}),o.Xb(21,"div",13),o.cc(22,"div",14),o.gc(23,15),o.bc(),o.bc(),o.bc(),o.bd(24,li,12,11,"ng-template",null,16,o.cd),o.bd(26,di,2,0,"ng-template",null,17,o.cd)),2&e&&(o.Dc("ngClass",o.Kc(11,ui,t.readOnly,t.hiddenOptions,t.recurMissed,!t.options.empty&&t.options.recurNext&&"SCHEDULE"==t.options.type)),o.Ib(1),o.Dc("ngClass",o.Hc(16,G,t.showAdvanced||t.hiddenOptions)),o.Ib(4),o.Dc("checked","SCHEDULE"==t.options.type)("disabled",t.readOnly)("value","SCHEDULE"),o.Ib(8),o.Dc("checked","TRIGGER"==t.options.type)("disabled",t.readOnly)("value","TRIGGER"),o.Ib(5),o.Dc("ngIf","SCHEDULE"==t.options.type),o.Ib(1),o.Dc("ngIf","TRIGGER"==t.options.type),o.Ib(1),o.Dc("ngClass",o.Hc(18,G,!t.hiddenOptions)))},directives:[s.o,w.a,x.a,s.q,n.b,c.a,a.a,I.a,s.t,s.x,s.p,T.a],pipes:[C.a,s.b,D.a],encapsulation:2}),e})();const pi=["dropdown"],hi=["toggle"];function fi(e,t){1&e&&(o.ac(0),o.gc(1,15),o.Zb())}function bi(e,t){1&e&&(o.ac(0),o.gc(1,16),o.Zb())}const gi=function(e){return{"cu-hidden":e}};function _i(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.cc(1,"button",9),o.qc("click",function(){return o.Uc(e),o.uc(2).clear()}),o.cc(2,"div",10),o.gc(3,11),o.bc(),o.bc(),o.cc(4,"button",12),o.qc("click",function(){return o.Uc(e),o.uc(2).save()}),o.cc(5,"div",10),o.bd(6,fi,2,0,"ng-container",13),o.bd(7,bi,2,0,"ng-template",null,14,o.cd),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.Rc(8),t=o.uc(2);o.Ib(1),o.Dc("ngClass",o.Hc(7,gi,t.options.empty)),o.Ib(3),o.Ob("cu-btn_disabled",!(null!=t.validation&&t.validation.valid)),o.Dc("ngClass",o.Hc(9,gi,!t.options.empty&&!t.changed))("cuTooltip",null==t.validation?null:t.validation.message),o.Ib(2),o.Dc("ngIf",t.options.empty)("ngIfElse",e)}}function vi(e,t){if(1&e){const e=o.dc();o.cc(0,"div",5),o.cc(1,"cu-recurring-options-legacy",6),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeOptions(t)})("onDropdown",function(t){return o.Uc(e),o.uc().setNestedDropdown(t)})("onUpdateDropdownPosition",function(){return o.Uc(e),o.uc().updateMenu()}),o.bc(),o.bd(2,_i,9,11,"div",7),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("options",e.options)("dueDate",e.dueDate)("militaryTime",e.militaryTime)("dateFormatting",e.dateFormatting)("statuses",e.statuses)("task",e.task)("teamId",e.teamId)("readOnly",e.readOnly),o.Ib(1),o.Dc("ngIf",!e.readOnly)}}const ki=["*"];let yi=(()=>{class e{constructor(e){this.changeDetector=e,this.validation={valid:!0,message:null},this.changed=!1,this.militaryTime=!1,this.dateFormatting="m/d/y",this.dueDate=!1,this.readOnly=!1,this.onChange=new o.o,this.onSave=new o.o,this.onCancel=new o.o}ngOnChanges(e){}updateMenu(){setTimeout(()=>{this.dropdown.positionMenu()})}changeOptions(e){this.lastOptions=e.options,this.validation=e.validation,this.changed=JSON.stringify(e.options)!==JSON.stringify(e.original),this.onChange.emit(e.options)}markForCheck(){this.changeDetector.markForCheck()}setNestedDropdown(e){this.dropdown.disabled=e}open(){this.dropdown.open()}cancel(){this.onCancel.emit(),this.dropdown.close()}clear(){this.lastOptions=null,this.onSave.emit(this.lastOptions),this.dropdown.close()}save(){this.validation&&!this.validation.valid||(this.onSave.emit(this.lastOptions),this.dropdown.close())}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-recurring-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(pi,3),o.jd(hi,3)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.toggle=e.first)}},inputs:{options:"options",militaryTime:"militaryTime",modifier:"modifier",dateFormatting:"dateFormatting",dueDate:"dueDate",statuses:"statuses",task:"task",teamId:"teamId",readOnly:"readOnly",fromPoint:["dropdownFromPoint","fromPoint"]},outputs:{onChange:"onChange",onSave:"onSave",onCancel:"onCancel"},features:[o.Gb],ngContentSelectors:ki,decls:6,vars:3,consts:function(){let e,t,i;return e=$localize`:@@cu-recurring-dropdown__btn-txt_delete-recurring␟3e8b7804cf7d5b93cd519f25fbb200c710e8f960␟5355533877472723814: Delete recurring `,t=$localize`:@@common_set-recurring␟0dbb65284fa297a3cbf4a8884782826888517d50␟1294886482461356156:Set recurring`,i=$localize`:@@common_save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,[["cuDropdown","",1,"cu-dropdown",3,"ngClass","dropdownCloseOnInsideClick","dropdownFromPoint","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["class","cu-dropdown__menu cu-dropdown__menu_recurring",3,"perfectScrollbar",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_recurring",3,"perfectScrollbar"],[3,"options","dueDate","militaryTime","dateFormatting","statuses","task","teamId","readOnly","onChange","onDropdown","onUpdateDropdownPosition"],["class","recurring-dropdown__btn-row",4,"ngIf"],[1,"recurring-dropdown__btn-row"],[1,"recurring-dropdown__btn","cu-btn","cu-btn_sm",3,"ngClass","click"],[1,"cu-btn__text"],e,[1,"recurring-dropdown__btn","cu-btn","cu-btn_sm",3,"ngClass","cuTooltip","click"],[4,"ngIf","ngIfElse"],["saveTmpl",""],t,i]},template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.qc("dropdownOpen",function(){return t.changed=!1}),o.cc(2,"div",2,3),o.Bc(4),o.bc(),o.bd(5,vi,3,9,"div",4),o.bc()),2&e&&o.Dc("ngClass",t.modifier)("dropdownCloseOnInsideClick",!1)("dropdownFromPoint",t.fromPoint)},directives:[n.b,s.o,c.a,a.a,r.a,mi,s.q,x.a],encapsulation:2}),e})();var wi=i("pLZG"),xi=i("VbRK");const Ii=["recurringDisplay"],Ti=["recurringContainer"];function Ci(e,t){}function Di(e,t){}function Oi(e,t){1&e&&o.Xb(0,"div",10)}function Si(e,t){if(1&e&&(o.cc(0,"span",11),o.dd(1),o.bc()),2&e){const e=o.uc().text;o.Ib(1),o.ed(e)}}function Ei(e,t){1&e&&(o.ac(0),o.cc(1,"div",12),o.tc(),o.cc(2,"svg",13),o.cc(3,"g",14),o.Xb(4,"circle",15),o.bc(),o.cc(5,"g",16),o.Xb(6,"path",17),o.Xb(7,"path",18),o.bc(),o.bc(),o.bc(),o.Zb())}function Pi(e,t){}const ji=function(e){return{text:e}};function Ai(e,t){if(1&e&&o.bd(0,Pi,0,0,"ng-template",3),2&e){const e=o.uc(2).text,t=o.uc(),i=o.Rc(9);o.Dc("ngTemplateOutlet",t.itemTemplate||i)("ngTemplateOutletContext",o.Hc(2,ji,e))}}function $i(e,t){if(1&e&&(o.ac(0),o.bd(1,Ei,8,0,"ng-container",9),o.bd(2,Ai,1,4,void 0,9),o.Bc(3),o.Zb()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",!(null!=e.options&&e.options.recurring)),o.Ib(1),o.Dc("ngIf",null==e.options?null:e.options.recurring)}}function Ui(e,t){if(1&e&&(o.bd(0,Oi,1,0,"div",7),o.bd(1,Si,2,1,"span",8),o.bd(2,$i,4,2,"ng-container",9)),2&e){const e=o.uc();o.Dc("ngIf",e.showIcon),o.Ib(1),o.Dc("ngIf",(null==e.options?null:e.options.recurring)&&e.showLabel),o.Ib(1),o.Dc("ngIf",e.showFull)}}function Ri(e,t){if(1&e&&(o.cc(0,"div",19),o.cc(1,"div",20),o.gc(2,21),o.bc(),o.cc(3,"div",22),o.Xb(4,"div",10),o.cc(5,"div",23),o.dd(6),o.bc(),o.bc(),o.bc()),2&e){const e=t.text;o.Ib(6),o.ed(e)}}const Mi=function(e,t){return{"recurring-view_active":e,"recurring-view_readonly":t}},Fi=["*"];let Li=(()=>{class e{constructor(e,t,i,n){this.changeDetector=e,this.resolver=t,this.renderer=i,this.sharedData=n,this.text="",this.destroy$=new u.a,this.options={recurring:!1},this.dueDate=!1,this.openOnClick=!0,this.showIcon=!0,this.showLabel=!0,this.showFull=!1,this.readOnly=!1,this.canEdit=!0,this.onChange=new o.o,this.onClick=new o.o,this.onOpen=new o.o,this.onClose=new o.o}ngOnInit(){this.sharedData.currentUser.pipe(Object(wi.a)(e=>!!e),Object(m.a)(this.destroy$)).subscribe(e=>{this.weekStart=e.week_start_day||0,this.militaryTime=!!e.twenty_four_hr_setting,this.dateFormat=e.date_format||"m/d/y"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){if(e.options){this.options||(this.options={recurring:!1});const e=Object(p.d)(this.options);if(e){try{this.rule=xi.a.fromString(e)}catch(t){this.rule=new xi.a}this.text=this.getText()}else this.text=""}e.statuses&&this.recurringDropdown&&(this.recurringDropdown.instance.statuses=this.statuses,this.recurringDropdown.instance.options=Object(p.a)(this.options,this.statuses,this.weekStart),this.recurringDropdown.changeDetectorRef.detectChanges())}notifyChanges(){this.onChange.emit(this.options)}insertDropdown(e){e.preventDefault(),e.stopPropagation(),this.onClick.emit(this),this.openOnClick&&this.open()}open(e=null,t){if(!this.recurringDropdown){const e=this.resolver.resolveComponentFactory(yi);this.recurringDropdown=this.recurringContainer.createComponent(e),this.recurringDropdown.instance.onSave.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{this.changeOptions(e)}),this.recurringDropdown.instance.dropdown.dropdownOpen.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{this.onOpen.emit(e),this.renderer.addClass(this.recurringDisplay.nativeElement,"cu-dropdown_open")}),this.recurringDropdown.instance.dropdown.dropdownClose.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{this.recurringDropdown.instance.fromPoint=null,this.onClose.emit(e),this.renderer.removeClass(this.recurringDisplay.nativeElement,"cu-dropdown_open")})}e&&(this.statuses=e),this.recurringDropdown.instance.options=Object(p.a)(this.options,this.statuses,this.weekStart),this.recurringDropdown.instance.dueDate=this.dueDate,this.recurringDropdown.instance.statuses=this.statuses,this.recurringDropdown.instance.task=this.task,this.recurringDropdown.instance.teamId=this.teamId,this.recurringDropdown.instance.militaryTime=this.militaryTime,this.recurringDropdown.instance.dateFormatting=this.dateFormat,this.recurringDropdown.instance.readOnly=this.readOnly||!this.canEdit,this.recurringDropdown.instance.fromPoint=t,this.recurringDropdown.instance.markForCheck(),setTimeout(()=>this.recurringDropdown.instance.open())}changeOptions(e){if(e){const t="TRIGGER"===e.type;this.rule=Object(p.c)(e,t,this.weekStart),this.text=this.getText(),this.options=Object(p.b)(e,this.rule.toString()),this.changeDetector.markForCheck(),this.onChange.emit(this.options)}else this.clear()}clear(){this.options={recurring:!1},this.text=null,this.notifyChanges()}getText(){return Object(p.e)(this.options,this.rule)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(o.j),o.Wb(o.H),o.Wb(y.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-recurring-view"]],viewQuery:function(e,t){if(1&e&&(o.jd(Ii,3),o.jd(Ti,3,o.U)),2&e){let e;o.Qc(e=o.rc())&&(t.recurringDisplay=e.first),o.Qc(e=o.rc())&&(t.recurringContainer=e.first)}},inputs:{modifier:"modifier",options:"options",statuses:"statuses",dueDate:"dueDate",openOnClick:"openOnClick",showIcon:"showIcon",showLabel:"showLabel",showFull:"showFull",task:"task",teamId:"teamId",readOnly:"readOnly",template:"template",itemTemplate:"itemTemplate",canEdit:"canEdit"},outputs:{onChange:"onChange",onClick:"onClick",onOpen:"onOpen",onClose:"onClose"},features:[o.Gb],ngContentSelectors:Fi,decls:10,vars:12,consts:function(){let e,t;return e=$localize`:@@cu-recurring-view__tooltip-msg_repeat-task␟a4ee5a843b079e0b8da6b47bea2e20c322102d28␟6766486084401905314:Repeat task`,t=$localize`:@@common_recurs␟2c30a061eef2cefa4450b8f19016f9f530046093␟7987313935769767613: Recurs `,[[3,"ngClass"],[1,"recurring-view__toogle",3,"cuTooltip","click"],["recurringDisplay",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["recurringContainer",""],["defaultTemplate",""],["defaultItemTemplate",""],["class","recurring-view__icon","icon","recurring",4,"ngIf"],["class","recurring-view__value",4,"ngIf"],[4,"ngIf"],["icon","recurring",1,"recurring-view__icon"],[1,"recurring-view__value"],["cuTooltip",e,1,"icon"],["width","36","height","36","viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd",1,"cu-stroke"],["cx","18","cy","18","r","17.5","stroke-dasharray","3"],["fill","none","fill-rule","evenodd","transform","translate(10, 10)",1,"cu-stroke"],["d","M11 3.5a4.5 4.5 0 1 1 0 9H8m-3 0a4.5 4.5 0 1 1 0-9h3"],["stroke-linecap","round","d","M10 9l-2 3.5 2 3.5M6 0l2 3.5L6 7"],[1,"recurring-view__full"],[1,"cu-task-info__key","recurring-view__full-key"],t,[1,"recurring-view__full-value"],[1,"cu-task-info__value"]]},template:function(e,t){if(1&e&&(o.Cc(),o.cc(0,"div",0),o.cc(1,"div",1,2),o.qc("click",function(e){return t.insertDropdown(e)}),o.bd(3,Ci,0,0,"ng-template",3),o.bc(),o.bd(4,Di,0,0,"ng-template",null,4,o.cd),o.bc(),o.bd(6,Ui,3,3,"ng-template",null,5,o.cd),o.bd(8,Ri,7,1,"ng-template",null,6,o.cd)),2&e){const e=o.Rc(7);o.Mb("recurring-view ",t.modifier,""),o.Dc("ngClass",o.Ic(7,Mi,null==t.options?null:t.options.recurring,t.readOnly||t.canEdit)),o.Ib(1),o.Dc("cuTooltip",t.showLabel||t.showFull?null:t.text),o.Ib(2),o.Dc("ngTemplateOutlet",t.template||e)("ngTemplateOutletContext",o.Hc(10,ji,t.text))}},directives:[s.o,x.a,s.x,s.q,w.a],encapsulation:2,changeDetection:0}),e})()},"7kSr":function(e,t,i){"use strict";i.d(t,"a",function(){return h});var o=i("GXRk"),n=i("fXoL"),s=i("ofXK"),c=i("UdVN"),a=i("peMq");const r=function(e){return{"cu-task-recent-item__simple-status_closed":e}};function l(e,t){if(1&e&&n.Xb(0,"div",7),2&e){const e=n.uc();n.Dc("ngClass",n.Hc(1,r,e.task.status.type===e.StatusTypes.Closed))}}const d=function(e){return{"background-color":e}};function u(e,t){if(1&e&&n.Xb(0,"div",8),2&e){const e=n.uc();n.Ob("cu-task-recent-item__custom-type",!(null==e.task||!e.task.custom_type)),n.Dc("ngStyle",n.Hc(3,d,e.task.status.color))}}function m(e,t){if(1&e&&(n.ac(0),n.dd(1),n.Zb()),2&e){const e=n.uc();n.Ib(1),n.fd("[",e.task.custom_id,"]")}}function p(e,t){if(1&e&&n.Xb(0,"cu-user-group",9),2&e){const e=n.uc();n.Dc("users",e.task.assignees)("userGroups",e.task.group_assignees)("leadCounter",5)("modifier","cu-user-group_sm")("avatarSize",24)}}let h=(()=>{class e{constructor(){this.showGroups=!0,this.StatusTypes=o.g}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-recent-item"]],hostAttrs:[1,"cu-task-recent-item"],hostVars:2,hostBindings:function(e,t){2&e&&n.Ob("cu-task-recent-item_selected",t.selected)},inputs:{task:"task",selected:"selected",showGroups:"showGroups"},decls:9,vars:7,consts:[[1,"cu-task-recent-item__body"],[1,"cu-task-recent-item__body-row"],["class","cu-task-recent-item__simple-status","icon","check-bold",3,"ngClass",4,"ngIf","ngIfElse"],["customStatuses",""],[1,"cu-task-recent-item__name"],[4,"ngIf"],[3,"users","userGroups","leadCounter","modifier","avatarSize",4,"ngIf"],["icon","check-bold",1,"cu-task-recent-item__simple-status",3,"ngClass"],[1,"cu-task-recent-item__status",3,"ngStyle"],[3,"users","userGroups","leadCounter","modifier","avatarSize"]],template:function(e,t){if(1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.bd(2,l,1,3,"div",2),n.bd(3,u,1,5,"ng-template",null,3,n.cd),n.cc(5,"div",4),n.bd(6,m,2,1,"ng-container",5),n.dd(7),n.bc(),n.bc(),n.bc(),n.bd(8,p,1,5,"cu-user-group",6)),2&e){const e=n.Rc(4);n.Ib(2),n.Dc("ngIf",(null==t.task?null:t.task.simple_statuses)&&!(null!=t.task&&t.task.custom_type))("ngIfElse",e),n.Ib(3),n.Ob("cu-task-recent-item__custom-type",!(null==t.task||!t.task.custom_type)),n.Ib(1),n.Dc("ngIf",t.task.custom_id),n.Ib(1),n.fd(" ",t.task.name," "),n.Ib(1),n.Dc("ngIf",t.showGroups&&(null==t.task||null==t.task.assignees?null:t.task.assignees.length))}},directives:[s.q,c.a,s.o,s.t,a.a],styles:['.cu-task-recent-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;min-height:30px;min-width:0;cursor:pointer;padding:8px 18px 8px 19px;position:relative}.cu-task-recent-item:hover:before,.cu-task-recent-item_selected:before{content:"";display:block;position:absolute;top:0;left:10px;width:calc(100% - 20px);height:100%;border-radius:4px;pointer-events:none;z-index:0;background:#f6f7f9}.dark-theme .cu-task-recent-item:hover:before,.dark-theme .cu-task-recent-item_selected:before{background:#2b343b}.cu-task-recent-item__body{flex-grow:1;position:relative;min-width:0}.cu-task-recent-item__body-row,.cu-task-recent-item__status{display:flex;align-items:center}.cu-task-recent-item__status{flex-shrink:0;margin:0 9px 0 0;width:8px;height:8px;border-radius:2px;background:currentColor;justify-content:center}.cu-task-recent-item__status.cu-task-recent-item__custom-type{transform:rotate(45deg);width:10px;height:10px;border-radius:0}.cu-task-recent-item__simple-status{width:14px;height:14px;fill:rgba(52,52,52,.2);margin:0 3px 0 2px}.cu-sprint-finish__unfinished .cu-task-recent-item__simple-status{fill:#b9bec7}.cu-dt-controls__action-batch-option .cu-dropdown_open .cu-task-recent-item__simple-status use{fill:rgba(52,52,52,.2)}.dark-theme .cu-dt-controls__action-batch-option .cu-dropdown_open .cu-task-recent-item__simple-status use{fill:#828588}.cu-dt-controls__action-batch-option .cu-dropdown_open .cu-task-recent-item__simple-status_closed use,.cu-task-recent-item__simple-status_closed,.dark-theme .cu-dt-controls__action-batch-option .cu-dropdown_open .cu-task-recent-item__simple-status_closed use{fill:#67cb48}.cu-task-recent-item__name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-recent-item__name{font-family:var(--global-font-support)}}.cu-task-recent-item__name.cu-task-recent-item__custom-type{font-weight:500}.dark-theme .cu-task-recent-item__name{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})()},"7nDA":function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"b",function(){return a});var o=i("HDdC"),n=i("f0Wu"),s=i("lU5h");const c=void 0!==window.MediaRecorder&&"undefined"!=typeof navigator&&void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia&&!Object(s.b)();function a(){let e,t;function i(){e&&"inactive"!==e.state&&e.stop(),t&&t.forEach(e=>{e.getTracks().forEach(e=>{e.stop()})})}return{file$:new o.a(o=>c?(navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).catch(()=>{}).then(e=>navigator.mediaDevices.getDisplayMedia({video:!0}).then(t=>[t,e])).then(([s,c])=>{const a=new MediaStream;s.getVideoTracks()[0].onended=function(){i()},t=[c,s].filter(Boolean),t.forEach(function(e){e.getTracks().forEach(function(e){a.addTrack(e)})});const r={mimeType:["video/webm;codecs=vp9","video/webm"].find(e=>window.MediaRecorder.isTypeSupported(e))};e=new window.MediaRecorder(a,r);const l=[];e.onerror=function(e){o.error(e),o.complete()},e.onstart=function(){},e.onstop=()=>{const e=new Blob(l,{type:r.mimeType}),t=new File([e],`screen-recording-${n().format("YYYY-MM-DD-HH:mm")}.webm`);o.next(t),o.complete()},e.ondataavailable=e=>{l.push(e.data)},e.start()}).catch(e=>{o.error(e),o.complete()}),i):(o.error("Not supported in this browser"),void o.complete())),stop:i}}},"7nPM":function(e,t,i){"use strict";function o(e){return function(t){var i=t&&t.line,o=t&&t.column;return isNaN(i)||isNaN(o)||!(i-1 in e)?-1:(e[i-2]||0)+o-1||0}}e.exports=function(e){var t,i=function(e){for(var t=[],i=e.indexOf("\n");-1!==i;)t.push(i+1),i=e.indexOf("\n",i+1);return t.push(e.length+1),t}(String(e));return{toPosition:(t=i,function(e){var i=-1,o=t.length;if(e<0)return{};for(;++i<o;)if(t[i]>e)return{line:i+1,column:e-(t[i-1]||0)+1,offset:e};return{}}),toOffset:o(i)}}},"7vmk":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("fXoL"),n=i("jJQC"),s=i("ofXK"),c=i("UdVN"),a=i("tyNb"),r=i("NsZK");function l(e,t){if(1&e){const e=o.dc();o.cc(0,"div",1),o.Xb(1,"div",2),o.cc(2,"a",3),o.qc("click",function(){return o.Uc(e),o.uc().onNavigate.emit()}),o.cc(3,"div",4),o.dd(4),o.bc(),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc();o.Ib(2),o.Dc("target",i.inNewTab?"_blank":null)("routerLink",e.path),o.Ib(1),o.Ec("cuTooltip",null==e?null:e.name),o.Dc("tooltipDisabledIfTextNotTruncated",!0),o.Ib(1),o.fd(" ",null==e?null:e.name," ")}}let d=(()=>{class e{constructor(){this.inNewTab=!1,this.truncate=!1,this.onNavigate=new o.o,this.trackById=Object(n.d)("id")}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-task-row-breadcrumbs"]],hostAttrs:[1,"cu-task-row-breadcrumbs"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-task-row-breadcrumbs_truncate",t.truncate)},inputs:{breadcrumbsItems:"breadcrumbsItems",inNewTab:"inNewTab",truncate:"truncate"},outputs:{onNavigate:"onNavigate"},decls:1,vars:2,consts:[["class","cu-task-row-breadcrumbs__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-task-row-breadcrumbs__item"],["icon","angle-right-no-padding",1,"cu-task-row-breadcrumbs__chevron"],[1,"cu-task-row-breadcrumbs__item-link",3,"target","routerLink","click"],["tooltipDelay","300",1,"cu-task-row-breadcrumbs__item-link-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"]],template:function(e,t){1&e&&o.bd(0,l,5,5,"div",0),2&e&&o.Dc("ngForOf",t.breadcrumbsItems)("ngForTrackBy",t.trackById)},directives:[s.p,c.a,a.k,r.a],styles:['.cu-task-row-breadcrumbs{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:11px;width:100%;padding:6px 0 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-row-breadcrumbs{font-family:var(--global-font-support)}}.cu-task-row-breadcrumbs_truncate{display:flex;align-items:center;min-width:0;max-width:100%}.cu-task-row-breadcrumbs_truncate .cu-task-row-breadcrumbs__item{display:inline-flex;align-items:center}.cu-task-row-breadcrumbs_truncate .cu-task-row-breadcrumbs__item-link{display:flex}.cu-task-row-breadcrumbs_truncate .cu-task-row-breadcrumbs__item-link-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-task-row-breadcrumbs__item{display:inline;color:rgba(52,52,52,.5);font-weight:400;min-width:0}.dark-theme .cu-task-row-breadcrumbs__item{color:#828588}.cu-task-row__container .cu-task-row-breadcrumbs__item{display:inline}.cu-task-row-breadcrumbs__item .cu-task-row-breadcrumbs__chevron{display:none}.cu-task-row-breadcrumbs__item+.cu-task-row-breadcrumbs__item .cu-task-row-breadcrumbs__chevron{width:14px;height:7px;margin-left:1px;display:inline-block}.cu-task-row-breadcrumbs__item+.cu-task-row-breadcrumbs__item .cu-task-row-breadcrumbs__chevron use{fill:rgba(52,52,52,.4)}.dark-theme .cu-task-row-breadcrumbs__item+.cu-task-row-breadcrumbs__item .cu-task-row-breadcrumbs__chevron use{fill:#828588}.cu-task-row-breadcrumbs__item-link{min-width:0}.cu-comment__text .cu-task-row-breadcrumbs__item-link,.dark-theme .cu-comment__text .cu-task-row-breadcrumbs__item-link{color:transparent}.cu-task-row-breadcrumbs__item-link-text{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:inline;color:#aaa}.cu-task-row-breadcrumbs__item-link-text:hover{color:var(--theme-main-color)}.dark-theme .cu-task-row-breadcrumbs__item-link-text{color:#757575}'],encapsulation:2,changeDetection:0}),e})()},"8LOJ":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("wMS7"),n=i.n(o),s=i("YAnr"),c=i("fXoL"),a=i("jhN1");let r=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t=!1){let i=n.a.sanitize(e);return t&&(Object(s.A)(i)||[]).forEach(e=>i=i.replace(e.raw,`<a target="_blank" class="cu-linkify-link" href="${encodeURI(e.url)}">${e.raw}</a>`)),this.sanitizer.bypassSecurityTrustHtml(i)}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(a.b))},e.\u0275pipe=c.Vb({name:"safePurify",type:e,pure:!0}),e})()},"8SgM":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},"8Sgp":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("ofXK"),n=i("+VAm"),s=i("K0KF"),c=i("C8uC"),a=i("KyjD"),r=i("fTg4"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,a.a,c.LoaderModule,s.a,r.a]]}),e})()},"8UY1":function(e,t,i){"use strict";i.d(t,"a",function(){return se}),i.d(t,"b",function(){return re});var o=i("fXoL"),n=i("3Pt+");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(null==e)return{};var i,o,n=function(e,t){if(null==e)return{};var i,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)t.indexOf(i=s[o])>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t.indexOf(i=s[o])>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function f(e,t,i){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var o=h(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function b(e,t,i,o){return(b="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,i,o){var n,s=h(e,t);if(s){if((n=Object.getOwnPropertyDescriptor(s,t)).set)return n.set.call(o,i),!0;if(!n.writable)return!1}if(n=Object.getOwnPropertyDescriptor(o,t)){if(!n.writable)return!1;n.value=i,Object.defineProperty(o,t,n)}else!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(o,t,i);return!0})(e,t,i,o)}function g(e,t,i,o,n){if(!b(e,t,i,o||e)&&n)throw new Error("failed to set property");return i}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],o=!0,n=!1,s=void 0;try{for(var c,a=e[Symbol.iterator]();!(o=(c=a.next()).done)&&(i.push(c.value),!t||i.length!==t);o=!0);}catch(r){n=!0,s=r}finally{try{o||null==a.return||a.return()}finally{if(n)throw s}}return i}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return"string"==typeof e||e instanceof String}function k(e){switch(e){case"LEFT":return"FORCE_LEFT";case"RIGHT":return"FORCE_RIGHT";default:return e}}function y(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function w(e,t){if(t===e)return!0;var i,o=Array.isArray(t),n=Array.isArray(e);if(o&&n){if(t.length!=e.length)return!1;for(i=0;i<t.length;i++)if(!w(t[i],e[i]))return!1;return!0}if(o!=n)return!1;if(t&&e&&"object"===s(t)&&"object"===s(e)){var c=t instanceof Date,a=e instanceof Date;if(c&&a)return t.getTime()==e.getTime();if(c!=a)return!1;var r=t instanceof RegExp,l=e instanceof RegExp;if(r&&l)return t.toString()==e.toString();if(r!=l)return!1;var d=Object.keys(t);for(i=0;i<d.length;i++)if(!Object.prototype.hasOwnProperty.call(e,d[i]))return!1;for(i=0;i<d.length;i++)if(!w(e[d[i]],t[d[i]]))return!1;return!0}return!(!t||!e||"function"!=typeof t||"function"!=typeof e)&&t.toString()===e.toString()}var x=function(){function e(t,i,o,n){for(c(this,e),this.value=t,this.cursorPos=i,this.oldValue=o,this.oldSelection=n;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return r(e,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?"NONE":this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?"RIGHT":"LEFT"}}]),e}(),I=function(){function e(t){c(this,e),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},t)}return r(e,[{key:"aggregate",value:function(e){return this.rawInserted+=e.rawInserted,this.skip=this.skip||e.skip,this.inserted+=e.inserted,this.tailShift+=e.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),e}(),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;c(this,e),this.value=t,this.from=i,this.stop=o}return r(e,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(e){this.value+=String(e)}},{key:"appendTo",value:function(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}},{key:"shiftBefore",value:function(e){if(this.from>=e||!this.value.length)return"";var t=this.value[0];return this.value=this.value.slice(1),t}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(e){Object.assign(this,e)}}]),e}(),C=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e.InputMask(t,i)},D=function(){function e(t){c(this,e),this._value="",this._update(Object.assign({},e.DEFAULTS,{},t)),this.isInitialized=!0}return r(e,[{key:"updateOptions",value:function(e){Object.keys(e).length&&this.withValueRefresh(this._update.bind(this,e))}},{key:"_update",value:function(e){Object.assign(this,e)}},{key:"reset",value:function(){this._value=""}},{key:"resolve",value:function(e){return this.reset(),this.append(e,{input:!0},""),this.doCommit(),this.value}},{key:"nearestInputPos",value:function(e,t){return e}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(e,t)}},{key:"extractTail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new T(this.extractInput(e,t),e)}},{key:"appendTail",value:function(e){return v(e)&&(e=new T(String(e))),e.appendTo(this)}},{key:"_appendCharRaw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e=this.doPrepare(e,t))?(this._value+=e,new I({inserted:e,rawInserted:e})):new I}},{key:"_appendChar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=this.state,n=this._appendCharRaw(e,t);if(n.inserted){var s,c=!1!==this.doValidate(t);if(c&&null!=i){var a=this.state;this.overwrite&&(s=i.state,i.shiftBefore(this.value.length));var r=this.appendTail(i);(c=r.rawInserted===i.toString())&&r.inserted&&(this.state=a)}c||(n=new I,this.state=o,i&&s&&(i.state=s))}return n}},{key:"_appendPlaceholder",value:function(){return new I}},{key:"append",value:function(e,t,i){if(!v(e))throw new Error("value should be string");var o=new I,n=v(i)?new T(String(i)):i;t.tail&&(t._beforeTailState=this.state);for(var s=0;s<e.length;++s)o.aggregate(this._appendChar(e[s],t,n));return null!=n&&(o.tailShift+=this.appendTail(n).tailShift),o}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,e)+this.value.slice(t),new I}},{key:"withValueRefresh",value:function(e){if(this._refreshing||!this.isInitialized)return e();this._refreshing=!0;var t=this.rawInputValue,i=this.value,o=e();return this.rawInputValue=t,this.value!==i&&0===i.indexOf(this.value)&&this.append(i.slice(this.value.length),{},""),delete this._refreshing,o}},{key:"runIsolated",value:function(e){if(this._isolated||!this.isInitialized)return e(this);this._isolated=!0;var t=this.state,i=e(this);return this.state=t,delete this._isolated,i}},{key:"doPrepare",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(e,this,t):e}},{key:"doValidate",value:function(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(e){return this.format?this.format(e,this):e}},{key:"doParse",value:function(e){return this.parse?this.parse(e,this):e}},{key:"splice",value:function(e,t,i,o){var n=this.extractTail(e+t),s=this.nearestInputPos(e,o);return new I({tailShift:s-e}).aggregate(this.remove(s)).aggregate(this.append(i,{input:!0},n))}},{key:"state",get:function(){return{_value:this.value}},set:function(e){this._value=e._value}},{key:"value",get:function(){return this._value},set:function(e){this.resolve(e)}},{key:"unmaskedValue",get:function(){return this.value},set:function(e){this.reset(),this.append(e,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(e){this.value=this.doFormat(e)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(e){this.reset(),this.append(e,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}}]),e}();D.DEFAULTS={format:function(e){return e},parse:function(e){return e}},C.Masked=D;var O=D;function S(e){if(null==e)throw new Error("mask property should be defined");return e instanceof RegExp?C.MaskedRegExp:v(e)?C.MaskedPattern:e instanceof Date||e===Date?C.MaskedDate:e instanceof Number||"number"==typeof e||e===Number?C.MaskedNumber:Array.isArray(e)||e===Array?C.MaskedDynamic:C.Masked&&e.prototype instanceof C.Masked?e:e instanceof Function?C.MaskedFunction:e instanceof C.Masked?e.constructor:C.Masked}function E(e){if(C.Masked&&e instanceof C.Masked)return e;var t=(e=Object.assign({},e)).mask;if(C.Masked&&t instanceof C.Masked)return t;var i=S(t);if(!i)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new i(e)}C.createMask=E;var P=E,j={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},A=function(){function e(t){c(this,e);var i=t.mask,o=m(t,["mask"]);this.masked=P({mask:i}),Object.assign(this,o)}return r(e,[{key:"reset",value:function(){this._isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===e&&t>=1?(this._isFilled=!1,this.masked.remove(e,t)):new I}},{key:"_appendChar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._isFilled)return new I;var i=this.masked.state,o=this.masked._appendChar(e,t);return o.inserted&&!1===this.doValidate(t)&&(o.inserted=o.rawInserted="",this.masked.state=i),o.inserted||this.isOptional||this.lazy||t.input||(o.inserted=this.placeholderChar),o.skip=!o.inserted&&!this.isOptional,this._isFilled=Boolean(o.inserted),o}},{key:"append",value:function(){var e;return(e=this.masked).append.apply(e,arguments)}},{key:"_appendPlaceholder",value:function(){var e=new I;return this._isFilled||this.isOptional||(this._isFilled=!0,e.inserted=this.placeholderChar),e}},{key:"extractTail",value:function(){var e;return(e=this.masked).extractTail.apply(e,arguments)}},{key:"appendTail",value:function(){var e;return(e=this.masked).appendTail.apply(e,arguments)}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(e,t,i)}},{key:"nearestInputPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NONE",i=0,o=this.value.length,n=Math.min(Math.max(e,i),o);switch(t){case"LEFT":case"FORCE_LEFT":return this.isComplete?n:i;case"RIGHT":case"FORCE_RIGHT":return this.isComplete?n:o;case"NONE":default:return n}}},{key:"doValidate",value:function(){var e,t;return(e=this.masked).doValidate.apply(e,arguments)&&(!this.parent||(t=this.parent).doValidate.apply(t,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"value",get:function(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"state",get:function(){return{masked:this.masked.state,_isFilled:this._isFilled}},set:function(e){this.masked.state=e.masked,this._isFilled=e._isFilled}}]),e}(),$=function(){function e(t){c(this,e),Object.assign(this,t),this._value=""}return r(e,[{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new I}},{key:"nearestInputPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NONE",i=0,o=this._value.length;switch(t){case"LEFT":case"FORCE_LEFT":return i;case"NONE":case"RIGHT":case"FORCE_RIGHT":default:return o}}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.raw&&this._isRawInput&&this._value.slice(e,t)||""}},{key:"_appendChar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new I;if(this._value)return i;var o=this.char===e[0],n=o&&(this.isUnmasking||t.input||t.raw)&&!t.tail;return n&&(i.rawInserted=this.char),this._value=i.inserted=this.char,this._isRawInput=n&&(t.raw||t.input),i}},{key:"_appendPlaceholder",value:function(){var e=new I;return this._value||(this._value=e.inserted=this.char),e}},{key:"extractTail",value:function(){return new T("")}},{key:"appendTail",value:function(e){return v(e)&&(e=new T(String(e))),e.appendTo(this)}},{key:"append",value:function(e,t,i){var o=this._appendChar(e,t);return null!=i&&(o.tailShift+=this.appendTail(i).tailShift),o}},{key:"doCommit",value:function(){}},{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"isComplete",get:function(){return!0}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(e){Object.assign(this,e)}}]),e}(),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,e),this.chunks=t,this.from=i}return r(e,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(t){if(String(t)){v(t)&&(t=new T(String(t)));var i=this.chunks[this.chunks.length-1],o=i&&(i.stop===t.stop||null==t.stop)&&t.from===i.from+i.toString().length;if(t instanceof T)o?i.extend(t.toString()):this.chunks.push(t);else if(t instanceof e){if(null==t.stop)for(var n;t.chunks.length&&null==t.chunks[0].stop;)(n=t.chunks.shift()).from+=t.from,this.extend(n);t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}}},{key:"appendTo",value:function(t){if(!(t instanceof C.MaskedPattern))return new T(this.toString()).appendTo(t);for(var i=new I,o=0;o<this.chunks.length&&!i.skip;++o){var n=this.chunks[o],s=t._mapPosToBlock(t.value.length),c=n.stop,a=void 0;if(null!=c&&(!s||s.index<=c)&&((n instanceof e||t._stops.indexOf(c)>=0)&&i.aggregate(t._appendPlaceholder(c)),a=n instanceof e&&t._blocks[c]),a){var r=a.appendTail(n);r.skip=!1,i.aggregate(r),t._value+=r.inserted;var l=n.toString().slice(r.rawInserted.length);l&&i.aggregate(t.append(l,{tail:!0}))}else i.aggregate(t.append(n.toString(),{tail:!0}))}return i}},{key:"shiftBefore",value:function(e){if(this.from>=e||!this.chunks.length)return"";for(var t=e-this.from,i=0;i<this.chunks.length;){var o=this.chunks[i],n=o.shiftBefore(t);if(o.toString()){if(!n)break;++i}else this.chunks.splice(i,1);if(n)return n}return""}},{key:"state",get:function(){return{chunks:this.chunks.map(function(e){return e.state}),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(t){var i=t.chunks,o=m(t,["chunks"]);Object.assign(this,o),this.chunks=i.map(function(t){var i="chunks"in t?new e:new T;return i.state=t,i})}}]),e}();C.MaskedRegExp=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return l(t,e),r(t,[{key:"_update",value:function(e){e.mask&&(e.validate=function(t){return t.search(e.mask)>=0}),f(d(t.prototype),"_update",this).call(this,e)}}]),t}(O);var R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(this,t),e.definitions=Object.assign({},j,e.definitions),p(this,d(t).call(this,Object.assign({},t.DEFAULTS,{},e)))}return l(t,e),r(t,[{key:"_update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.definitions=Object.assign({},this.definitions,e.definitions),f(d(t.prototype),"_update",this).call(this,e),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var e=this,i=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var o=this.mask;if(o&&i)for(var n=!1,s=!1,c=0;c<o.length;++c)if(!this.blocks||"continue"!==function(){var t=o.slice(c),i=Object.keys(e.blocks).filter(function(e){return 0===t.indexOf(e)});i.sort(function(e,t){return t.length-e.length});var n=i[0];if(n){var s=P(Object.assign({parent:e,lazy:e.lazy,placeholderChar:e.placeholderChar,overwrite:e.overwrite},e.blocks[n]));return s&&(e._blocks.push(s),e._maskedBlocks[n]||(e._maskedBlocks[n]=[]),e._maskedBlocks[n].push(e._blocks.length-1)),c+=n.length-1,"continue"}}()){var a=o[c],r=a in i;if(a!==t.STOP_CHAR)if("{"!==a&&"}"!==a)if("["!==a&&"]"!==a){if(a===t.ESCAPE_CHAR){if(++c,!(a=o[c]))break;r=!1}var l=r?new A({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:i[a],isOptional:s}):new $({char:a,isUnmasking:n});this._blocks.push(l)}else s=!s;else n=!n;else this._stops.push(this._blocks.length)}}},{key:"reset",value:function(){f(d(t.prototype),"reset",this).call(this),this._blocks.forEach(function(e){return e.reset()})}},{key:"doCommit",value:function(){this._blocks.forEach(function(e){return e.doCommit()}),f(d(t.prototype),"doCommit",this).call(this)}},{key:"appendTail",value:function(e){return f(d(t.prototype),"appendTail",this).call(this,e).aggregate(this._appendPlaceholder())}},{key:"_appendCharRaw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=this.doPrepare(e,t);var i=this._mapPosToBlock(this.value.length),o=new I;if(!i)return o;for(var n=i.index;;++n){var s=this._blocks[n];if(!s)break;var c=s._appendChar(e,t),a=c.skip;if(o.aggregate(c),a||c.rawInserted)break}return o}},{key:"extractTail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,o=new U;return t===i||this._forEachBlocksInRange(t,i,function(t,i,n,s){var c=t.extractTail(n,s);c.stop=e._findStopBefore(i),c.from=e._blockStartPos(i),c instanceof U&&(c.blockIndex=i),o.extend(c)}),o}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return"";var o="";return this._forEachBlocksInRange(e,t,function(e,t,n,s){o+=e.extractInput(n,s,i)}),o}},{key:"_findStopBefore",value:function(e){for(var t,i=0;i<this._stops.length;++i){var o=this._stops[i];if(!(o<=e))break;t=o}return t}},{key:"_appendPlaceholder",value:function(e){var t=this,i=new I;if(this.lazy&&null==e)return i;var o=this._mapPosToBlock(this.value.length);return o?(this._blocks.slice(o.index,null!=e?e:this._blocks.length).forEach(function(o){if(!o.lazy||null!=e){var n=o._appendPlaceholder.apply(o,null!=o._blocks?[o._blocks.length]:[]);t._value+=n.inserted,i.aggregate(n)}}),i):i}},{key:"_mapPosToBlock",value:function(e){for(var t="",i=0;i<this._blocks.length;++i){var o=t.length;if(e<=(t+=this._blocks[i].value).length)return{index:i,offset:e-o}}}},{key:"_blockStartPos",value:function(e){return this._blocks.slice(0,e).reduce(function(e,t){return e+t.value.length},0)}},{key:"_forEachBlocksInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2?arguments[2]:void 0,o=this._mapPosToBlock(e);if(o){var n=this._mapPosToBlock(t),s=n&&o.index===n.index,c=o.offset,a=n&&s?n.offset:this._blocks[o.index].value.length;if(i(this._blocks[o.index],o.index,c,a),n&&!s){for(var r=o.index+1;r<n.index;++r)i(this._blocks[r],r,0,this._blocks[r].value.length);i(this._blocks[n.index],n.index,0,n.offset)}}}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,o=f(d(t.prototype),"remove",this).call(this,e,i);return this._forEachBlocksInRange(e,i,function(e,t,i,n){o.aggregate(e.remove(i,n))}),o}},{key:"nearestInputPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NONE",i=this._mapPosToBlock(e)||{index:0,offset:0},o=i.offset,n=i.index,s=this._blocks[n];if(!s)return e;var c=o;0!==c&&c<s.value.length&&(c=s.nearestInputPos(o,k(t)));var a=c===s.value.length,r=0===c;if(!r&&!a)return this._blockStartPos(n)+c;var l=a?n+1:n;if("NONE"===t){if(l>0){var d=l-1,u=this._blocks[d],m=u.nearestInputPos(0,"NONE");if(!u.value.length||m!==u.value.length)return this._blockStartPos(l)}for(var p=l,h=p;h<this._blocks.length;++h){var f=this._blocks[h],b=f.nearestInputPos(0,"NONE");if(!f.value.length||b!==f.value.length)return this._blockStartPos(h)+b}for(var g=l-1;g>=0;--g){var _=this._blocks[g],v=_.nearestInputPos(0,"NONE");if(!_.value.length||v!==_.value.length)return this._blockStartPos(g)+_.value.length}return e}if("LEFT"===t||"FORCE_LEFT"===t){for(var y,w=l;w<this._blocks.length;++w)if(this._blocks[w].value){y=w;break}if(null!=y){var x=this._blocks[y],I=x.nearestInputPos(0,"RIGHT");if(0===I&&x.unmaskedValue.length)return this._blockStartPos(y)+I}for(var T,C=-1,D=l-1;D>=0;--D){var O=this._blocks[D],S=O.nearestInputPos(O.value.length,"FORCE_LEFT");if(O.value&&0===S||(T=D),0!==S){if(S!==O.value.length)return this._blockStartPos(D)+S;C=D;break}}if("LEFT"===t)for(var E=C+1;E<=Math.min(l,this._blocks.length-1);++E){var P=this._blocks[E],j=P.nearestInputPos(0,"NONE"),A=this._blockStartPos(E)+j;if(A>e)break;if(j!==P.value.length)return A}if(C>=0)return this._blockStartPos(C)+this._blocks[C].value.length;if("FORCE_LEFT"===t||this.lazy&&!this.extractInput()&&!M(this._blocks[l]))return 0;if(null!=T)return this._blockStartPos(T);for(var $=l;$<this._blocks.length;++$){var U=this._blocks[$],R=U.nearestInputPos(0,"NONE");if(!U.value.length||R!==U.value.length)return this._blockStartPos($)+R}return 0}if("RIGHT"===t||"FORCE_RIGHT"===t){for(var F,L,N=l;N<this._blocks.length;++N){var z=this._blocks[N],q=z.nearestInputPos(0,"NONE");if(q!==z.value.length){L=this._blockStartPos(N)+q,F=N;break}}if(null!=F&&null!=L){for(var G=F;G<this._blocks.length;++G){var V=this._blocks[G],B=V.nearestInputPos(0,"FORCE_RIGHT");if(B!==V.value.length)return this._blockStartPos(G)+B}return"FORCE_RIGHT"===t?this.value.length:L}for(var X=Math.min(l,this._blocks.length-1);X>=0;--X){var H=this._blocks[X],W=H.nearestInputPos(H.value.length,"LEFT");if(0!==W){var K=this._blockStartPos(X)+W;if(K>=e)return K;break}}}return e}},{key:"maskedBlock",value:function(e){return this.maskedBlocks(e)[0]}},{key:"maskedBlocks",value:function(e){var t=this,i=this._maskedBlocks[e];return i?i.map(function(e){return t._blocks[e]}):[]}},{key:"state",get:function(){return Object.assign({},f(d(t.prototype),"state",this),{_blocks:this._blocks.map(function(e){return e.state})})},set:function(e){var i=e._blocks,o=m(e,["_blocks"]);this._blocks.forEach(function(e,t){return e.state=i[t]}),g(d(t.prototype),"state",o,this,!0)}},{key:"isComplete",get:function(){return this._blocks.every(function(e){return e.isComplete})}},{key:"unmaskedValue",get:function(){return this._blocks.reduce(function(e,t){return e+t.unmaskedValue},"")},set:function(e){g(d(t.prototype),"unmaskedValue",e,this,!0)}},{key:"value",get:function(){return this._blocks.reduce(function(e,t){return e+t.value},"")},set:function(e){g(d(t.prototype),"value",e,this,!0)}}]),t}(O);function M(e){if(!e)return!1;var t=e.value;return!t||e.nearestInputPos(0,"NONE")!==t.length}R.DEFAULTS={lazy:!0,placeholderChar:"_"},R.STOP_CHAR="`",R.ESCAPE_CHAR="\\",R.InputDefinition=A,R.FixedDefinition=$,C.MaskedPattern=R;var F=R,L=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return l(t,e),r(t,[{key:"_update",value:function(e){e=Object.assign({to:this.to||0,from:this.from||0},e);var i=String(e.to).length;null!=e.maxLength&&(i=Math.max(i,e.maxLength)),e.maxLength=i;for(var o=String(e.from).padStart(i,"0"),n=String(e.to).padStart(i,"0"),s=0;s<n.length&&n[s]===o[s];)++s;e.mask=n.slice(0,s).replace(/0/g,"\\0")+"0".repeat(i-s),f(d(t.prototype),"_update",this).call(this,e)}},{key:"boundaries",value:function(e){var t="",i="",o=_(e.match(/^(\D*)(\d*)(\D*)/)||[],3),n=o[1],s=o[2];return s&&(t="0".repeat(n.length)+s,i="9".repeat(n.length)+s),[t=t.padEnd(this.maxLength,"0"),i=i.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=f(d(t.prototype),"doPrepare",this).call(this,e,i).replace(/\D/g,""),!this.autofix)return e;for(var o=String(this.from).padStart(this.maxLength,"0"),n=String(this.to).padStart(this.maxLength,"0"),s=this.value,c="",a=0;a<e.length;++a){var r=s+c+e[a],l=this.boundaries(r),u=_(l,2),m=u[0],p=u[1];Number(p)<this.from?c+=o[r.length-1]:Number(m)>this.to?c+=n[r.length-1]:c+=e[a]}return c}},{key:"doValidate",value:function(){var e,i=this.value,o=i.search(/[^0]/);if(-1===o&&i.length<=this._matchFrom)return!0;for(var n=this.boundaries(i),s=_(n,2),c=s[0],a=s[1],r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return this.from<=Number(a)&&Number(c)<=this.to&&(e=f(d(t.prototype),"doValidate",this)).call.apply(e,[this].concat(l))}},{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"isComplete",get:function(){return f(d(t.prototype),"isComplete",this)&&Boolean(this.value)}}]),t}(F);C.MaskedRange=L;var N=L,z=function(e){function t(e){return c(this,t),p(this,d(t).call(this,Object.assign({},t.DEFAULTS,{},e)))}return l(t,e),r(t,[{key:"_update",value:function(e){e.mask===Date&&delete e.mask,e.pattern&&(e.mask=e.pattern);var i=e.blocks;e.blocks=Object.assign({},t.GET_DEFAULT_BLOCKS()),e.min&&(e.blocks.Y.from=e.min.getFullYear()),e.max&&(e.blocks.Y.to=e.max.getFullYear()),e.min&&e.max&&e.blocks.Y.from===e.blocks.Y.to&&(e.blocks.m.from=e.min.getMonth()+1,e.blocks.m.to=e.max.getMonth()+1,e.blocks.m.from===e.blocks.m.to&&(e.blocks.d.from=e.min.getDate(),e.blocks.d.to=e.max.getDate())),Object.assign(e.blocks,i),Object.keys(e.blocks).forEach(function(t){var i=e.blocks[t];"autofix"in i||(i.autofix=e.autofix)}),f(d(t.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function(){for(var e,i=this.date,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(e=f(d(t.prototype),"doValidate",this)).call.apply(e,[this].concat(n))&&(!this.isComplete||this.isDateExist(this.value)&&null!=i&&(null==this.min||this.min<=i)&&(null==this.max||i<=this.max))}},{key:"isDateExist",value:function(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}},{key:"date",get:function(){return this.typedValue},set:function(e){this.typedValue=e}},{key:"typedValue",get:function(){return this.isComplete?f(d(t.prototype),"typedValue",this):null},set:function(e){g(d(t.prototype),"typedValue",e,this,!0)}}]),t}(F);z.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(e){return[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join(".")},parse:function(e){var t=_(e.split("."),3);return new Date(t[2],t[1]-1,t[0])}},z.GET_DEFAULT_BLOCKS=function(){return{d:{mask:N,from:1,to:31,maxLength:2},m:{mask:N,from:1,to:12,maxLength:2},Y:{mask:N,from:1900,to:9999}}},C.MaskedDate=z;var q=z,G=function(){function e(){c(this,e)}return r(e,[{key:"select",value:function(e,t){if(null!=e&&null!=t&&(e!==this.selectionStart||t!==this.selectionEnd))try{this._unsafeSelect(e,t)}catch(i){}}},{key:"_unsafeSelect",value:function(e,t){}},{key:"bindEvents",value:function(e){}},{key:"unbindEvents",value:function(){}},{key:"selectionStart",get:function(){var e;try{e=this._unsafeSelectionStart}catch(t){}return null!=e?e:this.value.length}},{key:"selectionEnd",get:function(){var e;try{e=this._unsafeSelectionEnd}catch(t){}return null!=e?e:this.value.length}},{key:"isActive",get:function(){return!1}}]),e}();C.MaskElement=G;var V=G,B=function(e){function t(e){var i;return c(this,t),(i=p(this,d(t).call(this))).input=e,i._handlers={},i}return l(t,e),r(t,[{key:"_unsafeSelect",value:function(e,t){this.input.setSelectionRange(e,t)}},{key:"bindEvents",value:function(e){var i=this;Object.keys(e).forEach(function(o){return i._toggleEventHandler(t.EVENTS_MAP[o],e[o])})}},{key:"unbindEvents",value:function(){var e=this;Object.keys(this._handlers).forEach(function(t){return e._toggleEventHandler(t)})}},{key:"_toggleEventHandler",value:function(e,t){this._handlers[e]&&(this.input.removeEventListener(e,this._handlers[e]),delete this._handlers[e]),t&&(this.input.addEventListener(e,t),this._handlers[e]=t)}},{key:"rootElement",get:function(){return this.input.getRootNode?this.input.getRootNode():document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"value",get:function(){return this.input.value},set:function(e){this.input.value=e}}]),t}(V);B.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},C.HTMLMaskElement=B;var X=B,H=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return l(t,e),r(t,[{key:"_unsafeSelect",value:function(e,t){if(this.rootElement.createRange){var i=this.rootElement.createRange();i.setStart(this.input.firstChild||this.input,e),i.setEnd(this.input.lastChild||this.input,t);var o=this.rootElement,n=o.getSelection&&o.getSelection();n&&(n.removeAllRanges(),n.addRange(i))}}},{key:"_unsafeSelectionStart",get:function(){var e=this.rootElement,t=e.getSelection&&e.getSelection();return t&&t.anchorOffset}},{key:"_unsafeSelectionEnd",get:function(){var e=this.rootElement,t=e.getSelection&&e.getSelection();return t&&this._unsafeSelectionStart+String(t).length}},{key:"value",get:function(){return this.input.textContent},set:function(e){this.input.textContent=e}}]),t}(X);C.HTMLContenteditableMaskElement=H;var W=H;C.InputMask=function(){function e(t,i){c(this,e),this.el=t instanceof V?t:t.isContentEditable&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName?new W(t):new X(t),this.masked=P(i),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return r(e,[{key:"maskEquals",value:function(e){return null==e||e===this.masked.mask||e===Date&&this.masked instanceof q}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];var n=this._listeners[e];n&&n.forEach(function(e){return e.apply(void 0,i)})}},{key:"_saveSelection",value:function(){this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var e=this.masked.unmaskedValue,t=this.masked.value,i=this.unmaskedValue!==e||this.value!==t;this._unmaskedValue=e,this._value=t,this.el.value!==t&&(this.el.value=t),i&&this._fireChangeEvents()}},{key:"updateOptions",value:function(e){var t=e.mask,i=m(e,["mask"]),o=!this.maskEquals(t),n=!w(this.masked,i);o&&(this.mask=t),n&&this.masked.updateOptions(i),(o||n)&&this.updateControl()}},{key:"updateCursor",value:function(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}},{key:"_delayUpdateCursor",value:function(e){var t=this;this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(function(){t.el&&(t.cursorPos=t._changingCursorPos,t._abortUpdateCursor())},10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,"LEFT")}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}},{key:"off",value:function(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;var i=this._listeners[e].indexOf(t);return i>=0&&this._listeners[e].splice(i,1),this}},{key:"_onInput",value:function(e){if(this._inputEvent=e,this._abortUpdateCursor(),!this._selection)return this.updateValue();var t=new x(this.el.value,this.cursorPos,this.value,this._selection),i=this.masked.rawInputValue,o=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection).offset,n=this.masked.nearestInputPos(t.startChangePos+o,i===this.masked.rawInputValue?t.removeDirection:"NONE");this.updateControl(),this.updateCursor(n),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"_onFocus",value:function(e){this.alignCursorFriendly()}},{key:"_onClick",value:function(e){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}},{key:"mask",get:function(){return this.masked.mask},set:function(e){if(!this.maskEquals(e))if(e instanceof C.Masked||this.masked.constructor!==S(e)){var t=P({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}else this.masked.updateOptions({mask:e})}},{key:"value",get:function(){return this._value},set:function(e){this.masked.value=e,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(e){this.masked.unmaskedValue=e,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(e){this.masked.typedValue=e,this.updateControl(),this.alignCursor()}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(e){this.el&&this.el.isActive&&(this.el.select(e,e),this._saveSelection())}}]),e}();var K=C;C.MaskedEnum=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return l(t,e),r(t,[{key:"_update",value:function(e){e.enum&&(e.mask="*".repeat(e.enum[0].length)),f(d(t.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function(){for(var e,i=this,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return this.enum.some(function(e){return e.indexOf(i.unmaskedValue)>=0})&&(e=f(d(t.prototype),"doValidate",this)).call.apply(e,[this].concat(n))}}]),t}(F);var Q=function(e){function t(e){return c(this,t),p(this,d(t).call(this,Object.assign({},t.DEFAULTS,{},e)))}return l(t,e),r(t,[{key:"_update",value:function(e){f(d(t.prototype),"_update",this).call(this,e),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var e="^"+(this.allowNegative?"[+|\\-]?":""),t=(this.scale?"("+y(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(e+"(0|([1-9]+\\d*))?"+t),this._numberRegExp=new RegExp(e+"\\d*"+t),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(y).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(y(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(e){return e.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(e){var t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}},{key:"doPrepare",value:function(e){for(var i,o=arguments.length,n=new Array(o>1?o-1:0),s=1;s<o;s++)n[s-1]=arguments[s];return(i=f(d(t.prototype),"doPrepare",this)).call.apply(i,[this,this._removeThousandsSeparators(e.replace(this._mapToRadixRegExp,this.radix))].concat(n))}},{key:"_separatorsCount",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,o=0;o<e;++o)this._value.indexOf(this.thousandsSeparator,o)===o&&(++i,t&&(e+=this.thousandsSeparator.length));return i}},{key:"_separatorsCountFromSlice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,o=arguments.length>2?arguments[2]:void 0,n=this._adjustRangeWithSeparators(e,i),s=_(n,2);return e=s[0],i=s[1],this._removeThousandsSeparators(f(d(t.prototype),"extractInput",this).call(this,e,i,o))}},{key:"_appendCharRaw",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return f(d(t.prototype),"_appendCharRaw",this).call(this,e,i);var o=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,n=this._separatorsCountFromSlice(o);this._value=this._removeThousandsSeparators(this.value);var s=f(d(t.prototype),"_appendCharRaw",this).call(this,e,i);this._value=this._insertThousandsSeparators(this._value);var c=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,a=this._separatorsCountFromSlice(c);return s.tailShift+=(a-n)*this.thousandsSeparator.length,s.skip=!s.rawInserted&&e===this.thousandsSeparator,s}},{key:"_findSeparatorAround",value:function(e){if(this.thousandsSeparator){var t=this.value.indexOf(this.thousandsSeparator,e-this.thousandsSeparator.length+1);if(t<=e)return t}return-1}},{key:"_adjustRangeWithSeparators",value:function(e,t){var i=this._findSeparatorAround(e);i>=0&&(e=i);var o=this._findSeparatorAround(t);return o>=0&&(t=o+this.thousandsSeparator.length),[e,t]}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=this._adjustRangeWithSeparators(e,t),o=_(i,2);t=o[1];var n=this.value.slice(0,e=o[0]),s=this.value.slice(t),c=this._separatorsCount(n.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(n+s));var a=this._separatorsCountFromSlice(n);return new I({tailShift:(a-c)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(e,t){if(!this.thousandsSeparator)return e;switch(t){case"NONE":case"LEFT":case"FORCE_LEFT":var i=this._findSeparatorAround(e-1);if(i>=0){var o=i+this.thousandsSeparator.length;if(e<o||this.value.length<=o||"FORCE_LEFT"===t)return i}break;case"RIGHT":case"FORCE_RIGHT":var n=this._findSeparatorAround(e);if(n>=0)return n+this.thousandsSeparator.length}return e}},{key:"doValidate",value:function(e){var i=(e.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));return i&&(i=i&&!isNaN(this.number)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)),i&&f(d(t.prototype),"doValidate",this).call(this,e)}},{key:"doCommit",value:function(){if(this.value){var e=this.number,i=e;null!=this.min&&(i=Math.max(i,this.min)),null!=this.max&&(i=Math.min(i,this.max)),i!==e&&(this.unmaskedValue=String(i));var o=this.value;this.normalizeZeros&&(o=this._normalizeZeros(o)),this.padFractionalZeros&&(o=this._padFractionalZeros(o)),this._value=o}f(d(t.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(e){var t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,function(e,t,i,o){return t+o}),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}},{key:"_padFractionalZeros",value:function(e){if(!e)return e;var t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(e){g(d(t.prototype),"unmaskedValue",e.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(e){g(d(t.prototype),"unmaskedValue",String(e),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(e){this.typedValue=e}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),t}(O);Q.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},C.MaskedNumber=Q,C.MaskedFunction=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return l(t,e),r(t,[{key:"_update",value:function(e){e.mask&&(e.validate=e.mask),f(d(t.prototype),"_update",this).call(this,e)}}]),t}(O);var Z=function(e){function t(e){var i;return c(this,t),(i=p(this,d(t).call(this,Object.assign({},t.DEFAULTS,{},e)))).currentMask=null,i}return l(t,e),r(t,[{key:"_update",value:function(e){f(d(t.prototype),"_update",this).call(this,e),"mask"in e&&(this.compiledMasks=Array.isArray(e.mask)?e.mask.map(function(e){return P(e)}):[])}},{key:"_appendCharRaw",value:function(){var e,t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate((e=this.currentMask)._appendChar.apply(e,arguments)),t}},{key:"_applyDispatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value,o=this.rawInputValue,n=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:o,s=o.slice(n.length),c=this.currentMask,a=new I,r=c&&c.state;if(this.currentMask=this.doDispatch(e,Object.assign({},t)),this.currentMask)if(this.currentMask!==c){this.currentMask.reset();var l=this.currentMask.append(n,{raw:!0});a.tailShift=l.inserted.length-i.length,s&&(a.tailShift+=this.currentMask.append(s,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=r;return a}},{key:"_appendPlaceholder",value:function(){var e=this._applyDispatch.apply(this,arguments);return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}},{key:"doDispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(e,this,t)}},{key:"doValidate",value:function(){for(var e,i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(e=f(d(t.prototype),"doValidate",this)).call.apply(e,[this].concat(n))&&(!this.currentMask||(i=this.currentMask).doValidate.apply(i,n))}},{key:"reset",value:function(){this.currentMask&&this.currentMask.reset(),this.compiledMasks.forEach(function(e){return e.reset()})}},{key:"remove",value:function(){var e,t=new I;return this.currentMask&&t.aggregate((e=this.currentMask).remove.apply(e,arguments)).aggregate(this._applyDispatch()),t}},{key:"extractInput",value:function(){var e;return this.currentMask?(e=this.currentMask).extractInput.apply(e,arguments):""}},{key:"extractTail",value:function(){for(var e,i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return this.currentMask?(e=this.currentMask).extractTail.apply(e,n):(i=f(d(t.prototype),"extractTail",this)).call.apply(i,[this].concat(n))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),f(d(t.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var e,i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return this.currentMask?(e=this.currentMask).nearestInputPos.apply(e,n):(i=f(d(t.prototype),"nearestInputPos",this)).call.apply(i,[this].concat(n))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(e){g(d(t.prototype),"value",e,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(e){g(d(t.prototype),"unmaskedValue",e,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(e){var t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}},{key:"isComplete",get:function(){return!!this.currentMask&&this.currentMask.isComplete}},{key:"state",get:function(){return Object.assign({},f(d(t.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(function(e){return e.state}),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(e){var i=e.compiledMasks,o=e.currentMaskRef,n=e.currentMask,s=m(e,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach(function(e,t){return e.state=i[t]}),null!=o&&(this.currentMask=o,this.currentMask.state=n),g(d(t.prototype),"state",s,this,!0)}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:f(d(t.prototype),"overwrite",this)},set:function(e){}}]),t}(O);Z.DEFAULTS={dispatch:function(e,t,i){if(t.compiledMasks.length){var o=t.rawInputValue,n=t.compiledMasks.map(function(t,n){return t.reset(),t.append(o,{raw:!0}),t.append(e,i),{weight:t.rawInputValue.length,index:n}});return n.sort(function(e,t){return t.weight-e.weight}),t.compiledMasks[n[0].index]}}},C.MaskedDynamic=Z;var Y={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.MASKED,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.MASKED,o=P(e);return function(e){return o.runIsolated(function(o){return o[t]=e,o[i]})}}C.PIPE_TYPE=Y,C.createPipe=J,C.pipe=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return J.apply(void 0,i)(e)};try{globalThis.IMask=K}catch(le){}var ee=K,te=i("ofXK");let ie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(o.Sb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const oe={provide:n.o,useExisting:Object(o.Z)(()=>se),multi:!0},ne=e=>e.nativeElement;let se=(()=>{class e{constructor(e,t,i,n){this._elementRef=e,this._renderer=t,this._factory=i,this._compositionMode=n,this.onTouched=()=>{},this.onChange=()=>{},this.imaskElement=ne,this.accept=new o.o,this.complete=new o.o,this._viewInitialized=!1,this._composing=!1,this._writing=!1,null==this._compositionMode&&(this._compositionMode=!this._isAndroid())}get element(){return this.imaskElement(this._elementRef,this)}get maskValue(){return this.maskRef?"typed"===this.unmask?this.maskRef.typedValue:this.unmask?this.maskRef.unmaskedValue:this.maskRef.value:this.element.value}set maskValue(e){this.maskRef?"typed"===this.unmask?this.maskRef.typedValue=e:this.unmask?this.maskRef.unmaskedValue=e:this.maskRef.value=e:this._renderer.setProperty(this.element,"value",e)}ngAfterViewInit(){this.imask&&this.initMask(),this._viewInitialized=!0}ngOnChanges(e){e.elementRef&&!this.imaskElement&&(this.imaskElement=ne),e.imask&&this._viewInitialized&&(this.imask?this.maskRef?this.maskRef.updateOptions(this.imask):(this.initMask(),this.onChange(this.maskValue)):this.destroyMask())}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}ngOnDestroy(){this.destroyMask(),this.accept.complete(),this.complete.complete()}beginWrite(e){this._writing=!0,this._writingValue=e}endWrite(){return this._writing=!1,this._writingValue}writeValue(e){e=null==e?"":e,this.maskRef?(this.beginWrite(e),(this.maskValue!==e||"string"!=typeof e&&""===this.maskRef.value&&!this.maskRef.el.isActive)&&(this.maskValue=e)):this._renderer.setProperty(this.element,"value",e)}_onAccept(){const e=this.maskValue;this._writing&&e===this.endWrite()||(this.onChange(e),this.accept.emit(e))}_onComplete(){this.complete.emit(this.maskValue)}initMask(){this.maskRef=this._factory.create(this.element,this.imask).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this))}setDisabledState(e){this._renderer.setProperty(this.element,"disabled",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}_handleInput(e){this.maskRef||(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this._handleInput(e)}_isAndroid(){return/android (\d+)/.test(navigator.userAgent.toLowerCase())}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.m),o.Wb(o.H),o.Wb(ie),o.Wb(n.a,8))},e.\u0275dir=o.Rb({type:e,selectors:[["","imask",""]],hostBindings:function(e,t){1&e&&o.qc("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},inputs:{imaskElement:"imaskElement",imask:"imask",unmask:"unmask"},outputs:{accept:"accept",complete:"complete"},features:[o.Hb([oe]),o.Gb]}),e})(),ce=(()=>{class e{create(e,t){return ee(e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(o.Sb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),ae=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},providers:[{provide:ie,useClass:ce}],imports:[[te.c]]}),e})(),re=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[te.c,ae],ae]}),e})()},"95CM":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("ofXK"),n=i("KyjD"),s=i("1M0N"),c=i("K0KF"),a=i("gb9A"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a,a.a]]}),e})()},"9AeR":function(e,t,i){e.exports=i.p+"unstarted_status_group.fba4d8e989e42456fd44.png"},"9OJN":function(e,t,i){e.exports=i.p+"personal_views.9c9842a447c20e56fff9.png"},"9oWR":function(e,t,i){"use strict";i.d(t,"a",function(){return mi});var o=i("Gj5t"),n=i("uslN"),s=i("jJQC"),c=i("o7Ov"),a=i("c3rA"),r=i("lJxs"),l=i("pLZG"),d=i("eIep"),u=i("nYR2"),m=i("JIr8"),p=i("IzEk"),h=i("SxV6"),f=i("FXUF"),b=i("dTHz"),g=i("fFxs"),_=i("itXk"),v=i("2Vo4"),k=i("XNiG"),y=i("z6cu"),w=i("Cfvw"),x=i("fXoL"),I=i("gC4P"),T=i("bwNi"),C=i("1Lli"),D=i("AeD3"),O=i("l7P3"),S=i("Jf2N"),E=i("G2WA"),P=i("ofXK"),j=i("BTFG"),A=i("tyNb");function $(e,t){if(1&e&&(x.cc(0,"div",19),x.mc(1,20),x.Xb(2,"span"),x.Xb(3,"span"),x.jc(),x.bc()),2&e){const e=x.uc();x.Ib(3),x.kc(e.totalAccounts)(e.totalAccounts),x.hc(1)}}const U=function(e){return["/",e,"settings","billing"]};function R(e,t){if(1&e){const e=x.dc();x.cc(0,"div",21),x.cc(1,"div",22),x.Xb(2,"div",23),x.bc(),x.cc(3,"div",24),x.mc(4,25),x.cc(5,"a",26),x.qc("click",function(){return x.Uc(e),x.uc().close()}),x.bc(),x.jc(),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Ib(5),x.Dc("routerLink",x.Hc(1,U,e.teamId))}}let M=(()=>{class e{constructor(e,t,i,o,n){this.store=e,this.cdr=t,this.dataService=i,this.modal=o,this.sharedTaskService=n,this.adding=!1,this.errMsg=!1,this.showAuthError=!1,this.onCancel=new x.o}ngOnInit(){}goBack(){this.onCancel.emit()}close(){this.modal.closeAll(),this.sharedTaskService.closeTask()}addAccount(){this.adding=!0,this.errMsg=!1,this.cdr.markForCheck(),this.dataService.doAddOn(this.teamId,n.a.EMAIL).pipe(Object(u.a)(()=>{this.adding=!1,this.cdr.markForCheck()}),Object(d.a)(()=>this.dataService.getTeamById(this.teamId)),Object(m.a)(e=>Object(y.a)(e))).subscribe(e=>{this.store.dispatch(new c.rk(e)),this.onCancel.emit()},e=>{this.errMsg=!0})}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(O.Store),x.Wb(x.h),x.Wb(D.a),x.Wb(S.a),x.Wb(E.a))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-email-addons"]],hostAttrs:[1,"cu-email-addons"],inputs:{totalAccounts:"totalAccounts",availableAccounts:"availableAccounts",teamId:"teamId",showAuthError:"showAuthError",freeAccounts:"freeAccounts"},outputs:{onCancel:"onCancel"},decls:21,vars:7,consts:function(){let e,t,i,o,n,s,c;return e=$localize`:@@cu-email-addons__title_more-email-accounts␟7ccbb10f9f8e64524ee560153b37e52c7fa26af3␟1213745654336720300: Add email account
`,t=$localize`:@@cu-email-addons__add-another-email-account␟e80636dd6245de361eec45f485f912c106e96399␟8556390721273701526:${"\ufffd#6\ufffd"}:START_BOLD_TEXT:Add email account${"\ufffd/#6\ufffd"}:CLOSE_BOLD_TEXT: (${"\ufffd0\ufffd"}:INTERPOLATION:/${"\ufffd1\ufffd"}:INTERPOLATION_1:) used `,i=$localize`:@@cu-email-addons__cost␟20924876400398383da167587f7b7ab36afbfcfd␟7242284397641075984: $24/year `,o=$localize`:@@common_back␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,n=$localize`:@@cu-email-addons__btn-txt_add-extra-account␟4af17ff6701fcdd6d1ca237217b68e862d3b50f1␟1709728328937920829: Add extra account `,s=$localize`:@@cu-email-addons__subtitle_more-email-accounts␟1d77af1793889de994fd051e0d3a2d37e3e7ba9e␟3789277071457988473: You’ve used ${"[\ufffd#2\ufffd|\ufffd#3\ufffd]"}:START_TAG_SPAN:${"[\ufffd0\ufffd|\ufffd1\ufffd]"}:INTERPOLATION:/${"[\ufffd0\ufffd|\ufffd1\ufffd]"}:INTERPOLATION:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_TAG_SPAN: email accounts. You will be charged a prorated amount of ${"[\ufffd#2\ufffd|\ufffd#3\ufffd]"}:START_TAG_SPAN:$24/year${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_TAG_SPAN: for each additional account.
`,s=x.lc(s),c=$localize`:@@cu-email-address__form-error_payment-processing-error␟a71213ce5816c1bfcf76622cc329d5c93205ffe4␟8944639297678936632: Whoops! There was an issue processing your payment. Check your default ${"\ufffd#5\ufffd"}:START_LINK: payment method in settings.${"\ufffd/#5\ufffd"}:CLOSE_LINK:`,[[1,"cu-email-addons__title"],e,["class","cu-email-addons__subtitle",4,"ngIf"],[1,"cu-email-addons__body"],[1,"cu-email-addons__amount"],t,[1,"cu-email-addons__cost"],i,[1,"cu-email-addons__btns"],[1,"cu-email-addons__btns-back",3,"click"],[1,"cu-btn__text"],o,[1,"cu-email-addons__btns-add",3,"disabled","click"],n,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],["class","cu-form__error",4,"ngIf"],[1,"cu-email-addons__subtitle"],s,[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],c,[1,"cu-email-addons__link",3,"routerLink","click"]]},template:function(e,t){1&e&&(x.cc(0,"div",0),x.gc(1,1),x.bc(),x.bd(2,$,4,2,"div",2),x.cc(3,"div",3),x.cc(4,"div",4),x.mc(5,5),x.Xb(6,"b"),x.jc(),x.bc(),x.cc(7,"div",6),x.gc(8,7),x.bc(),x.bc(),x.cc(9,"div",8),x.cc(10,"button",9),x.qc("click",function(){return t.goBack()}),x.cc(11,"div",10),x.gc(12,11),x.bc(),x.bc(),x.cc(13,"button",12),x.qc("click",function(){return t.addAccount()}),x.cc(14,"div",10),x.gc(15,13),x.bc(),x.cc(16,"div",14),x.Xb(17,"div",15),x.Xb(18,"div",16),x.Xb(19,"div",17),x.bc(),x.bc(),x.bc(),x.bd(20,R,6,3,"div",18)),2&e&&(x.Ib(2),x.Dc("ngIf",t.showAuthError),x.Ib(4),x.kc(t.totalAccounts)(t.availableAccounts),x.hc(5),x.Ib(7),x.Ob("cu-btn_spinner",t.adding),x.Dc("disabled",t.adding),x.Ib(7),x.Dc("ngIf",t.errMsg))},directives:[P.q,A.k],styles:['.cu-email-addons{padding:0 40px 40px}.cu-email-addons .cu-form__error{text-align:left}.cu-email-addons__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:24px;line-height:1;color:#292d34;padding-bottom:16px;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__title{font-family:var(--global-font-support)}}.dark-theme .cu-email-addons__title{color:#d5d6d7}.cu-email-addons__link{color:#d16464;text-decoration:underline;cursor:pointer}.cu-email-addons__subtitle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:16px;color:#292d34;text-align:center;width:100%;margin:10px auto 0;background:#fef9ee;border:1px solid #f1b643;padding:11px 50px;border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__subtitle{font-family:var(--global-font-support)}}.cu-email-addons__subtitle span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:16px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__subtitle span{font-family:var(--global-font-support)}}.cu-email-addons__body{display:flex;justify-content:space-between;align-items:center;margin:45px 0}.cu-email-addons__amount{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__amount{font-family:var(--global-font-support)}}.cu-email-addons__amount b{color:#292d34;font-weight:500}.dark-theme .cu-email-addons__amount b{color:#d5d6d7}.cu-email-addons__cost{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__cost{font-family:var(--global-font-support)}}.cu-email-addons__btns{display:flex;justify-content:space-between;align-items:center}.cu-email-addons__btns-back{height:60px;background-color:#e9ebf0;border-radius:6px;padding:0;width:124px;display:flex;align-items:center;justify-content:center;border:none}.cu-email-addons__btns-back .cu-btn__text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:19px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__btns-back .cu-btn__text{font-family:var(--global-font-support)}}.cu-email-addons__btns-add{height:60px;background-color:var(--theme-main-color);border-radius:6px;padding:0;width:260px;display:flex;align-items:center;justify-content:center;border:none}.cu-email-addons__btns-add:hover{background-color:var(--theme-main-color-dark)}.cu-email-addons__btns-add .cu-btn__text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:19px;line-height:1;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-addons__btns-add .cu-btn__text{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})();var F=i("HBlJ"),L=i("3Pt+");function N(e,t){1&e&&(x.cc(0,"div",36),x.cc(1,"div",37),x.Xb(2,"div",38),x.bc(),x.cc(3,"div",39),x.gc(4,40),x.bc(),x.bc())}function z(e,t){1&e&&(x.cc(0,"div",36),x.cc(1,"div",37),x.Xb(2,"div",38),x.bc(),x.cc(3,"div",39),x.gc(4,41),x.bc(),x.bc())}function q(e,t){1&e&&(x.cc(0,"div",36),x.cc(1,"div",37),x.Xb(2,"div",38),x.bc(),x.cc(3,"div",39),x.gc(4,42),x.bc(),x.bc())}let G=(()=>{class e{constructor(e,t){this.fb=e,this.dataService=t,this.formGroup=this.fb.group({imap_host:new L.g(""),imap_port:new L.g(""),smtp_host:new L.g(""),smtp_port:new L.g(""),ssl_required:new L.g(!1),email:new L.g("",[L.A.required,L.A.pattern(F.a)]),password:new L.g("",[L.A.required])}),this.authing$=new v.a(!1),this.error$=new v.a(!1),this.submitted$=new v.a(!1),this.onCancel=new x.o,this.onCompleteAuth=new x.o,this.onError=new x.o}ngOnInit(){}cancel(){this.onCancel.emit()}authImap(){this.submitted$.next(!0),this.error$.next(!1);const{controls:e}=this.formGroup,t=e.imap_host.value,i=e.imap_port.value,o=e.smtp_host.value,n=e.smtp_port.value,s=e.ssl_required.value,c=e.email.value,a=e.password.value;this.isFormValid()&&(this.authing$.next(!0),this.dataService.authImap(this.teamId,{email:c,imap_host:t,imap_port:i,smtp_host:o,smtp_port:n,ssl_required:s,imap_username:c,imap_password:a,smtp_username:c,smtp_password:a}).pipe(Object(d.a)(()=>this.dataService.getAuthedEmail(this.teamId)),Object(u.a)(()=>this.authing$.next(!1)),Object(m.a)(e=>Object(y.a)(e))).subscribe(e=>{this.onCompleteAuth.emit(e),this.cancel()},this.handleError.bind(this)))}handleError(e){this.error$.next(!0),!e||"NAUTH_019"!==e.ECODE&&"NAUTH_018"!==e.ECODE||(this.onError.emit(e),this.cancel())}isFormValid(){return!this.formGroup.controls.email.errors}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(L.f),x.Wb(D.a))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-imap-auth"]],hostAttrs:[1,"cu-imap-auth"],inputs:{teamId:"teamId"},outputs:{onCancel:"onCancel",onCompleteAuth:"onCompleteAuth",onError:"onError"},decls:66,vars:27,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h;return e=$localize`:@@cu-imap-auth__header-link-click␟2c40e55dac69e2f5a3d1e7626a8f90b3dded1cdd␟8437063342841991199:Click`,t=$localize`:@@cu-imap-auth__header-link-here␟16bd21c1b48036d54c6a595f5cff2540cfba7f60␟858192247408211331:here`,i=$localize`:@@cu-imap-auth__header-link-imap␟c7384e5c3c6608be3deebf7a2c7958f9a5cead22␟6333633063666361738:to learn how to set up IMAP.`,o=$localize`:@@common_email␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`,n=$localize`:@@forms_label--password␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,s=$localize`:@@cu-imap-auth__form-label_imap-host␟ce7d92719675f200127a920a272e7d5267925b87␟2921553753933629828: IMAP Host `,c=$localize`:@@cu-imap-auth__form-label_imap-port␟c2945b919dc4cc91841bb6593ad68bdb17581510␟5991372553119056656: IMAP Port `,a=$localize`:@@cu-imap-auth__form-label_smtp-host␟6260aed8539a8656293bc07e75ecdd90fb379d38␟2584507101888127385: SMTP Host `,r=$localize`:@@cu-imap-auth__form-label_smtp-port␟fc55dcd1bc717e8b3823c256148f51ae9e3f497c␟2710345744203328852: SMTP Port `,l=$localize`:@@cu-imap-auth__form-label_ssl-required␟0189be57388d8946a25a2c3567c0a53483956b3b␟7476452565374293036: SSL Required `,d=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,u=$localize`:@@common_save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,m=$localize`:@@errors_form-field-imap--email-invalid␟81b565ab001df6a9af0b022443f82c3ab3d67c22␟1918453227463933518: This email is invalid! `,p=$localize`:@@errors_form-field-imap--password-invalid␟41b28e8b2475b3cb2f283ede3daa07924c399240␟6016398574561223953: Password is required! `,h=$localize`:@@errors_form-field--failed-auth␟5cf0d599833881efc4704a4e352aa67daf15acf5␟5919458420589229760: Unable to auth this email. Please check your form inputs and try again. `,[[1,"cu-imap-auth__header-link"],e,["href","https://docs.clickup.com/en/articles/4646183-imap-email-authentication","target","_blank"],t,i,[1,"cu-form",3,"formGroup","ngSubmit"],[1,"cu-form__row"],[1,"cu-form__label"],o,[1,"cu-api-integration__input"],["formControlName","email","type","text",1,"cu-form__input"],["class","cu-form__error",4,"ngIf"],n,["type","password","formControlName","password",1,"cu-form__input"],s,["formControlName","imap_host","type","text",1,"cu-form__input"],c,["formControlName","imap_port","type","text",1,"cu-form__input"],a,["formControlName","smtp_host","type","text",1,"cu-form__input"],r,["formControlName","smtp_port","type","text",1,"cu-form__input"],[1,"cu-checkbox"],["type","checkbox","formControlName","ssl_required",1,"cu-checkbox__input",3,"value","checked"],[1,"cu-checkbox__label","multi-value-required"],l,[1,"cu-api-integration__btn-container","dashboard"],["type","button",1,"cu-btn","cu-conflict-management__cancel","cu-api-integration__btn","dashboard",3,"click"],d,["type","submit",1,"cu-btn","cu-api-integration__btn","dashboard",3,"disabled"],[1,"cu-btn__text"],u,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],m,p,h]},template:function(e,t){1&e&&(x.cc(0,"div",0),x.ac(1),x.gc(2,1),x.Zb(),x.dd(3,"\xa0 "),x.cc(4,"a",2),x.gc(5,3),x.bc(),x.dd(6,"\xa0 "),x.ac(7),x.gc(8,4),x.Zb(),x.bc(),x.cc(9,"form",5),x.qc("ngSubmit",function(){return t.authImap()}),x.cc(10,"div",6),x.vc(11,"async"),x.cc(12,"div",7),x.gc(13,8),x.bc(),x.cc(14,"div",9),x.Xb(15,"input",10),x.bc(),x.bc(),x.bd(16,N,5,0,"div",11),x.vc(17,"async"),x.cc(18,"div",6),x.vc(19,"async"),x.cc(20,"div",7),x.gc(21,12),x.bc(),x.cc(22,"div",9),x.Xb(23,"input",13),x.bc(),x.bc(),x.bd(24,z,5,0,"div",11),x.vc(25,"async"),x.cc(26,"div",6),x.cc(27,"div",7),x.gc(28,14),x.bc(),x.cc(29,"div",9),x.Xb(30,"input",15),x.bc(),x.bc(),x.cc(31,"div",6),x.cc(32,"div",7),x.gc(33,16),x.bc(),x.cc(34,"div",9),x.Xb(35,"input",17),x.bc(),x.bc(),x.cc(36,"div",6),x.cc(37,"div",7),x.gc(38,18),x.bc(),x.cc(39,"div",9),x.Xb(40,"input",19),x.bc(),x.bc(),x.cc(41,"div",6),x.cc(42,"div",7),x.gc(43,20),x.bc(),x.cc(44,"div",9),x.Xb(45,"input",21),x.bc(),x.bc(),x.cc(46,"div",6),x.cc(47,"div",22),x.cc(48,"label"),x.Xb(49,"input",23),x.cc(50,"div",24),x.gc(51,25),x.bc(),x.bc(),x.bc(),x.bc(),x.bd(52,q,5,0,"div",11),x.vc(53,"async"),x.cc(54,"div",26),x.cc(55,"button",27),x.qc("click",function(){return t.cancel()}),x.gc(56,28),x.bc(),x.cc(57,"button",29),x.vc(58,"async"),x.vc(59,"async"),x.cc(60,"div",30),x.gc(61,31),x.bc(),x.cc(62,"div",32),x.Xb(63,"div",33),x.Xb(64,"div",34),x.Xb(65,"div",35),x.bc(),x.bc(),x.bc(),x.bc()),2&e&&(x.Ib(9),x.Dc("formGroup",t.formGroup),x.Ib(1),x.Ob("cu-form__row_error",t.formGroup.controls.email.errors&&x.wc(11,13,t.submitted$)),x.Ib(6),x.Dc("ngIf",t.formGroup.controls.email.errors&&x.wc(17,15,t.submitted$)),x.Ib(2),x.Ob("cu-form__row_error",t.formGroup.controls.password.errors&&x.wc(19,17,t.submitted$)),x.Ib(6),x.Dc("ngIf",t.formGroup.controls.password.errors&&x.wc(25,19,t.submitted$)),x.Ib(25),x.Dc("value",1)("checked",t.formGroup.controls.ssl_required.value),x.Ib(3),x.Dc("ngIf",x.wc(53,21,t.error$)),x.Ib(5),x.Ob("cu-btn_spinner",x.wc(58,23,t.authing$)),x.Dc("disabled",x.wc(59,25,t.authing$)))},directives:[L.C,L.q,L.k,L.c,L.p,L.i,P.q,L.b],pipes:[P.b],styles:['.cu-imap-auth{position:relative}.cu-imap-auth__header-link{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;position:absolute;left:20px;top:-35px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-imap-auth__header-link{font-family:var(--global-font-support)}}.cu-imap-auth__header-link a{color:var(--theme-main-color)}.cu-imap-auth__header-link a:hover{text-decoration:underline}.cu-imap-auth .cu-form{padding:20px}.cu-imap-auth .cu-api-integration__btn-container{padding:0}'],encapsulation:2,changeDetection:0}),e})();var V=i("UdVN"),B=i("mhED");function X(e,t){1&e&&(x.ac(0),x.gc(1,61),x.Zb())}function H(e,t){1&e&&(x.ac(0),x.gc(1,62),x.Zb())}function W(e,t){1&e&&(x.ac(0),x.gc(1,63),x.Zb())}const K=function(e){return{"cu-jira-import__form-desc-img_show":e}};function Q(e,t){if(1&e){const e=x.dc();x.cc(0,"div",33),x.cc(1,"div",34),x.qc("click",function(){x.Uc(e);const t=x.uc();return t.showVideo=!1,t.showInstructions=!1}),x.bc(),x.cc(2,"div",35),x.dd(3," 1. "),x.ac(4),x.mc(5,36),x.Xb(6,"span",37),x.jc(),x.Zb(),x.cc(7,"span",38),x.qc("click",function(){x.Uc(e);const t=x.uc();return t.showExample[1.1]=!t.showExample[1.1]}),x.bd(8,X,2,0,"ng-container",39),x.bc(),x.Xb(9,"img",40),x.bc(),x.cc(10,"div",35),x.dd(11," 2. "),x.ac(12),x.mc(13,41),x.Xb(14,"span",37),x.jc(),x.Zb(),x.cc(15,"div",42),x.ac(16),x.gc(17,43),x.Zb(),x.cc(18,"span",38),x.qc("click",function(){x.Uc(e);const t=x.uc();return t.showExample[1.2]=!t.showExample[1.2],t.showExample[1.3]=!t.showExample[1.3]}),x.bd(19,H,2,0,"ng-container",39),x.bc(),x.bc(),x.cc(20,"div",44),x.cc(21,"div",45),x.mc(22,46),x.Xb(23,"strong"),x.jc(),x.bc(),x.cc(24,"div",47),x.ac(25),x.gc(26,48),x.Zb(),x.dd(27,": "),x.bc(),x.cc(28,"div",47),x.dd(29," 1. "),x.ac(30),x.mc(31,49),x.Xb(32,"a",50),x.jc(),x.Zb(),x.bc(),x.cc(33,"div",47),x.dd(34," 2. "),x.ac(35),x.mc(36,51),x.Xb(37,"span",37),x.jc(),x.Zb(),x.bc(),x.cc(38,"div",47),x.dd(39," 3. "),x.ac(40),x.gc(41,52),x.Zb(),x.bc(),x.cc(42,"div",47),x.dd(43," 4. "),x.ac(44),x.mc(45,53),x.Xb(46,"span",37),x.jc(),x.Zb(),x.bc(),x.cc(47,"div",47),x.dd(48," 5. "),x.ac(49),x.gc(50,54),x.Zb(),x.bc(),x.cc(51,"div",47),x.dd(52," 6. "),x.ac(53),x.gc(54,55),x.Zb(),x.bc(),x.cc(55,"div",56),x.gc(56,57),x.bc(),x.cc(57,"div",47),x.gc(58,58),x.bc(),x.bc(),x.Xb(59,"img",40),x.Xb(60,"img",40),x.bc(),x.cc(61,"div",35),x.dd(62," 3. "),x.ac(63),x.gc(64,59),x.Zb(),x.cc(65,"div",42),x.ac(66),x.gc(67,60),x.Zb(),x.cc(68,"span",38),x.qc("click",function(){x.Uc(e);const t=x.uc();return t.showExample[1.4]=!t.showExample[1.4]}),x.bd(69,W,2,0,"ng-container",39),x.bc(),x.bc(),x.Xb(70,"img",40),x.bc(),x.bc()}if(2&e){const e=x.uc(),t=x.Rc(47);x.Ib(8),x.Dc("ngIf",e.showExample[1.1])("ngIfElse",t),x.Ib(1),x.Dc("ngClass",x.Hc(14,K,e.showExample[1.1]))("src",e.imgs.outlook1,x.Xc),x.Ib(10),x.Dc("ngIf",e.showExample[1.2]&&e.showExample[1.3])("ngIfElse",t),x.Ib(40),x.Dc("ngClass",x.Hc(16,K,e.showExample[1.2]))("src",e.imgs.outlook2,x.Xc),x.Ib(1),x.Dc("ngClass",x.Hc(18,K,e.showExample[1.3]))("src",e.imgs.outlook3,x.Xc),x.Ib(9),x.Dc("ngIf",e.showExample[1.4])("ngIfElse",t),x.Ib(1),x.Dc("ngClass",x.Hc(20,K,e.showExample[1.4]))("src",e.imgs.outlook4,x.Xc)}}function Z(e,t){if(1&e){const e=x.dc();x.cc(0,"div",33),x.cc(1,"div",34),x.qc("click",function(){x.Uc(e);const t=x.uc();return t.showVideo=!1,t.showInstructions=!1}),x.bc(),x.Xb(2,"cu-video",64),x.bc()}if(2&e){const e=x.uc();x.Ib(2),x.Dc("wistiaId","p3ojfkvj28")("showFooter",!1)("user",e.user)}}function Y(e,t){1&e&&(x.cc(0,"div",65),x.cc(1,"div",66),x.Xb(2,"div",67),x.bc(),x.cc(3,"div",68),x.gc(4,69),x.bc(),x.bc())}function J(e,t){1&e&&(x.cc(0,"div",65),x.cc(1,"div",66),x.Xb(2,"div",67),x.bc(),x.cc(3,"div",68),x.gc(4,70),x.bc(),x.bc())}function ee(e,t){1&e&&(x.ac(0),x.gc(1,71),x.Zb())}let te=(()=>{class e{constructor(e,t){this.fb=e,this.dataService=t,this.formGroup=this.fb.group({exchange_server_host:new L.g(g.b),email:new L.g("",[L.A.required,L.A.pattern(F.a)]),password:new L.g("",[L.A.required])}),this.authing$=new v.a(!1),this.submitted$=new v.a(!1),this.error$=new v.a(!1),this.showInstructions=!1,this.showVideo=!1,this.showExample=[],this.imgs={outlook1:i("FFar"),outlook2:i("uSqK"),outlook3:i("biZo"),outlook4:i("+dGp")},this.onCancel=new x.o,this.onCompleteAuth=new x.o,this.onError=new x.o}ngOnInit(){}cancel(){this.onCancel.emit()}authImap(){if(this.submitted$.next(!0),this.error$.next(!1),this.isFormValid()){this.authing$.next(!0);const{controls:e}=this.formGroup;this.dataService.authOutlook(this.teamId,{email:e.email.value,password:e.password.value,exchange_server_host:e.exchange_server_host.value||g.b}).pipe(Object(d.a)(()=>this.dataService.getAuthedEmail(this.teamId)),Object(u.a)(()=>this.authing$.next(!1)),Object(m.a)(e=>Object(y.a)(e))).subscribe(e=>{this.onCompleteAuth.emit(e),this.cancel()},this.handleError.bind(this))}}handleError(e){this.error$.next(!0),!e||"NAUTH_019"!==e.ECODE&&"NAUTH_018"!==e.ECODE||(this.onError.emit(e),this.cancel())}isFormValid(){return!this.formGroup.controls.email.errors}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(L.f),x.Wb(D.a))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-outlook-auth"]],hostAttrs:[1,"cu-outlook-auth"],inputs:{teamId:"teamId",user:"user"},outputs:{onCancel:"onCancel",onCompleteAuth:"onCompleteAuth",onError:"onError"},decls:48,vars:20,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,I,T,C,D,O,S;return e=$localize`:@@auth_ms-outlook␟9598fd25f816a3c9aaf90d4628ada1b13be6fdd8␟563488526786045043: Sign in with Outlook `,t=$localize`:@@common_quick-start␟4bc98c0d2d710392682a700ca9d52cb44ed9c493␟5807609551755567832: Quick Start `,i=$localize`:@@cu-outlook-auth__form-hint_outlook-auth-instructions␟322ea64f86dd1aa8d5305e56de35194d9d0c15dd␟2806348781984263552: Outlook takes about 3 minutes to connect. ${"\ufffd#10\ufffd"}:START_LINK:Show instructions${"[\ufffd/#10\ufffd|\ufffd/#11\ufffd]"}:CLOSE_LINK: or ${"\ufffd#11\ufffd"}:START_LINK_1:watch a video${"[\ufffd/#10\ufffd|\ufffd/#11\ufffd]"}:CLOSE_LINK:`,i=x.lc(i),o=$localize`:@@common_email␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`,n=$localize`:@@forms_label--password␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,s=$localize`:@@cu-outlook-auth__form-label_exchange-server-host␟c579cb212d36173ec36e35d18a7c1e0dcbcacdb9␟8813067969393380120: Exchange Server Host `,c=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,a=$localize`:@@auth_sign-in␟287d3301a32a65a1b31116bda5d3a6463158c42a␟5207635742003539443:Sign in`,r=$localize`:@@cu-outlook-auth__form-desc-item_step-1␟f6f7c5673d9769262f0f66631582fa8dac1c3a24␟3257927124684228801: Within your task, click the down carrot next to comment and select ${"\ufffd#6\ufffd"}:START_TAG_SPAN:Send mail${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:@@cu-outlook-auth__form-desc-item_step-2␟51239a57064752a8e170b73014c9ba5730cbd5a0␟5737643631965204200:Next to From, select ${"\ufffd#14\ufffd"}:START_TAG_SPAN:Link an email${"\ufffd/#14\ufffd"}:CLOSE_TAG_SPAN:`,d=$localize`:@@cu-outlook-auth__sign-in-with-outlook␟4d1d86afa80f7bc7c5c48abb751ba2ce868ed6b6␟5880296976163974809:Sign in with Outlook and enter your email and password`,u=$localize`:@@cu-outlook-auth__password-notice␟ccf985dac3fa3ffa429c4199e194c30204dda020␟5815602953617637946:${"\ufffd#23\ufffd"}:START_TAG_STRONG:Important:${"\ufffd/#23\ufffd"}:CLOSE_TAG_STRONG: Your password will either be the password to your account, if you're using an exchange server host, or an app password. `,m=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd␟2083d95c1d2a9d372494fbd7cdd3cbe20272cb8e␟6802252314412387519:Here's how to get the app password`,p=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd_step-1␟35d872a060c15b16d88947ecafd068c10c9901ef␟3416039713865189794: Login to your Outlook account and open your ${"\ufffd#32\ufffd"}:START_LINK:security settings${"\ufffd/#32\ufffd"}:CLOSE_LINK:`,h=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd_step-2␟7b49e7de9b0c96ad34246f3a07df898f1cfcd858␟3017926302796240926:Select ${"\ufffd#37\ufffd"}:START_TAG_SPAN:More security options${"\ufffd/#37\ufffd"}:CLOSE_TAG_SPAN:`,f=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd_step-3␟72ef7dcd3db04595c7cf411a64c51012a6d8241c␟427726708334498353:Turn on two-step verification`,b=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd_step-4␟b4137e7a83e62b21fadb838b9db954e21e93c9a3␟2525899403441129490:Under "App Passwords" click ${"\ufffd#46\ufffd"}:START_TAG_SPAN:Create new password${"\ufffd/#46\ufffd"}:CLOSE_TAG_SPAN:`,g=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd_step-5␟067a1802741c5a31cb682e92600674296ca473b2␟6457746013497328560:Copy and paste the auto-generated password back into ClickUp`,_=$localize`:@@cu-outlook-auth__steps-to-get-app-pwd_step-6␟e243e33f0000198709479cbce099496cfde1b182␟8329495523990826418:Sign in!`,v=$localize`:@@cu-outlook-auth__password-save-notice␟e28efd708975d3838f1e0351d19121819843a105␟5252457937255548627: Note: It may take a few minutes to load after clicking save. `,k=$localize`:@@cu-outlook-auth__account-link-success␟42c9b5a745d76cac27af276aa128783974c15e90␟2236150791056322936: Your account is now linked! `,y=$localize`:@@cu-outlook-auth__form-desc-item_step-3␟1273b8dcfb87f158716a064034aa69a03f9884bd␟4051850124590726522:Choose who can send emails from this account, create signatures, and build email templates`,w=$localize`:@@cu-outlook-auth__click-done␟b10ddf1ec0374d770e6e79ad49f0106c55dff7e6␟1195896696029973140:Click Done to start sending emails from ClickUp!`,I=$localize`:@@common_hide-example␟c508c7e1e33c0841e0719992dcc50625c7a46c39␟202267733541041393:Hide example`,T=$localize`:@@common_hide-example␟c508c7e1e33c0841e0719992dcc50625c7a46c39␟202267733541041393:Hide example`,C=$localize`:@@common_hide-example␟c508c7e1e33c0841e0719992dcc50625c7a46c39␟202267733541041393:Hide example`,D=$localize`:@@errors_form-field--email-invalid␟81b565ab001df6a9af0b022443f82c3ab3d67c22␟1918453227463933518: This email is invalid! `,O=$localize`:@@errors_form-field--failed-auth␟5cf0d599833881efc4704a4e352aa67daf15acf5␟5919458420589229760: Unable to auth this email. Please check your form inputs and try again. `,S=$localize`:@@common_see-example␟c0d713d3406d5b483f5a8d9d1e955fa7f90b40b8␟6468801339078354107:See example`,[[1,"cu-outlook-auth__header"],["src","./assets/images/illustrations/email-outlook.svg"],[1,"cu-outlook-auth__header-text"],e,[1,"cu-form",3,"formGroup","ngSubmit"],[1,"cu-outlook-auth__qs"],[1,"cu-outlook-auth__qs-top"],t,[1,"cu-outlook-auth__qs-bot"],i,[3,"click"],["class","cu-outlook-auth__qs-instructions",4,"ngIf"],[1,"cu-form__row"],[1,"cu-form__label"],o,[1,"cu-api-integration__input"],["formControlName","email","type","text",1,"cu-form__input"],["class","cu-form__error",4,"ngIf"],n,["type","password","formControlName","password",1,"cu-form__input"],s,["formControlName","exchange_server_host","type","text",1,"cu-form__input"],[1,"cu-api-integration__btn-container","dashboard"],["type","button",1,"cu-btn","cu-conflict-management__cancel","cu-api-integration__btn","dashboard",3,"click"],c,["type","submit",1,"cu-btn","cu-api-integration__btn","dashboard",3,"disabled"],[1,"cu-btn__text"],a,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],["seeExampleTmpl",""],[1,"cu-outlook-auth__qs-instructions"],["icon","cu2-times",1,"cu-outlook-auth__qs-instructions-exit",3,"click"],[1,"cu-jira-import__form-desc-item"],r,[1,"cu-jira-import__form-desc-pre"],[1,"cu-jira-import__see-example",3,"click"],[4,"ngIf","ngIfElse"],["alt","",1,"cu-jira-import__form-desc-img",2,"margin-top","20px",3,"ngClass","src"],l,[1,"cu-jira-import__form-desc-item-other-line"],d,[1,"cu-jira-import__form-desc-item-content"],[1,"cu-jira-import__form-desc-item-content-item","cu-jira-import__form-desc-item-content-item-extra-padding-bot"],u,[1,"cu-jira-import__form-desc-item-content-item"],m,p,["href","https://account.microsoft.com/security?refd=account.microsoft.com","target","_blank"],h,f,b,g,_,[1,"cu-jira-import__form-desc-item-content-item","cu-jira-import__form-desc-item-content-item-extra-padding-top","cu-jira-import__form-desc-item-content-item-extra-padding-bot"],v,k,y,w,I,T,C,[3,"wistiaId","showFooter","user"],[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],D,O,S]},template:function(e,t){1&e&&(x.cc(0,"div",0),x.Xb(1,"img",1),x.cc(2,"div",2),x.gc(3,3),x.bc(),x.bc(),x.cc(4,"form",4),x.qc("ngSubmit",function(){return t.authImap()}),x.cc(5,"div",5),x.cc(6,"div",6),x.gc(7,7),x.bc(),x.cc(8,"div",8),x.mc(9,9),x.cc(10,"a",10),x.qc("click",function(){return t.showInstructions=!t.showInstructions,t.showVideo=!1}),x.bc(),x.cc(11,"a",10),x.qc("click",function(){return t.showVideo=!t.showVideo,t.showInstructions=!1}),x.bc(),x.jc(),x.bc(),x.bd(12,Q,71,22,"div",11),x.bd(13,Z,3,3,"div",11),x.bc(),x.cc(14,"div",12),x.vc(15,"async"),x.cc(16,"div",13),x.gc(17,14),x.bc(),x.cc(18,"div",15),x.Xb(19,"input",16),x.bc(),x.bc(),x.bd(20,Y,5,0,"div",17),x.vc(21,"async"),x.cc(22,"div",12),x.cc(23,"div",13),x.gc(24,18),x.bc(),x.cc(25,"div",15),x.Xb(26,"input",19),x.bc(),x.bc(),x.cc(27,"div",12),x.cc(28,"div",13),x.gc(29,20),x.bc(),x.cc(30,"div",15),x.Xb(31,"input",21),x.bc(),x.bc(),x.bd(32,J,5,0,"div",17),x.vc(33,"async"),x.cc(34,"div",22),x.cc(35,"button",23),x.qc("click",function(){return t.cancel()}),x.gc(36,24),x.bc(),x.cc(37,"button",25),x.vc(38,"async"),x.vc(39,"async"),x.cc(40,"div",26),x.gc(41,27),x.bc(),x.cc(42,"div",28),x.Xb(43,"div",29),x.Xb(44,"div",30),x.Xb(45,"div",31),x.bc(),x.bc(),x.bc(),x.bc(),x.bd(46,ee,2,0,"ng-template",null,32,x.cd)),2&e&&(x.Ib(4),x.Dc("formGroup",t.formGroup),x.Ib(8),x.Dc("ngIf",t.showInstructions),x.Ib(1),x.Dc("ngIf",t.showVideo),x.Ib(1),x.Ob("cu-form__row_error",t.formGroup.controls.email.errors&&x.wc(15,10,t.submitted$)),x.Ib(6),x.Dc("ngIf",t.formGroup.controls.email.errors&&x.wc(21,12,t.submitted$)),x.Ib(12),x.Dc("ngIf",x.wc(33,14,t.error$)),x.Ib(5),x.Ob("cu-btn_spinner",x.wc(38,16,t.authing$)),x.Dc("disabled",x.wc(39,18,t.authing$)))},directives:[L.C,L.q,L.k,P.q,L.c,L.p,L.i,V.a,P.o,B.a],pipes:[P.b],styles:['.cu-outlook-auth__header{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:35px}.cu-outlook-auth__header img{width:123px;height:auto;margin:0 0 10px 55px}.cu-outlook-auth__header-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:19px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-outlook-auth__header-text{font-family:var(--global-font-support)}}.dark-theme .cu-outlook-auth__header-text{color:#d5d6d7}.cu-outlook-auth .cu-form{padding:0 42px}.cu-outlook-auth__qs{width:100%;background:#fafbfc;border:1px solid #e9ebf0;border-radius:4px;padding:12px 16px;margin-bottom:30px}.dark-theme .cu-outlook-auth__qs{background-color:#2b343b;border-color:#384047}.cu-outlook-auth__qs-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;padding-bottom:10px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-outlook-auth__qs-top{font-family:var(--global-font-support)}}.dark-theme .cu-outlook-auth__qs-top{color:#d5d6d7}.cu-outlook-auth__qs-bot{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:18px;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-outlook-auth__qs-bot{font-family:var(--global-font-support)}}.dark-theme .cu-outlook-auth__qs-bot{color:#828588}.cu-outlook-auth__qs-bot a{color:var(--theme-main-color);cursor:pointer}.cu-outlook-auth__qs-bot a:hover{text-decoration:underline}.cu-outlook-auth__qs-instructions{padding:10px 0 0;position:relative}.cu-outlook-auth__qs-instructions .icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;height:12px;width:12px;fill:#b9bec7;position:absolute;right:0;top:-15px;cursor:pointer}.cu-outlook-auth__qs-instructions .icon:hover{fill:var(--theme-main-color)}.cu-outlook-auth__qs .cu-video-modal__container{width:100%}.cu-outlook-auth__qs .cu-video-modal__container .cu-video-modal__video{height:325px}.cu-outlook-auth .cu-api-integration__btn-container{justify-content:space-between;padding:0;margin:20px 0 42px}.cu-outlook-auth .cu-api-integration__btn-container .cu-btn{height:53px}'],encapsulation:2,changeDetection:0}),e})(),ie=(()=>{class e{constructor(e){this.modal=e,this.destroy$=new k.a,this.onRemove=new x.o}ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}cancel(){this.modal.close()}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(S.a))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-unlink-email-confirm"]],outputs:{onRemove:"onRemove"},decls:14,vars:0,consts:function(){let e,t,i,o;return e=$localize`:@@cu-unlink-email-confirm__question_remove-email␟d7be7e1bdd612a12e8f934cdd3caaa1c2e12c5e0␟8905442584290186495: Are you sure want to remove this email account from ClickUp? `,t=$localize`:@@cu-unlink-email-confirm__description_remove-email␟3da4bac6469a6f1d7d43eae942834dd7351fe3ae␟3562151173462739800: Emails to this address will no longer receive updates, and you won't be able to send email from this address anymore. You won't lose any emails that have already been attached. `,i=$localize`:@@common_cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,o=$localize`:@@cu-unlink-email-confirm__btn-txt_remove-email␟6884aa16c60cbd0d7d375064305b24d7f6e8cd6f␟213328120965887680: Remove Email `,[[1,"cu-dc"],[1,"cu-dc__inner"],[1,"cu-conflict-management__warning-img"],[1,"cu-dc__title",2,"margin-bottom","30px"],e,[1,"cu-dc__warning",2,"margin-bottom","30px"],t,[1,"cu-dc__controls"],[1,"cu-btn","cu-btn_fw-sm","cu-btn_confirm-cancel",3,"click"],[1,"cu-btn__text"],i,[1,"cu-btn","cu-btn_fw-sm",3,"click"],o]},template:function(e,t){1&e&&(x.cc(0,"div",0),x.cc(1,"div",1),x.Xb(2,"div",2),x.cc(3,"div",3),x.gc(4,4),x.bc(),x.cc(5,"div",5),x.gc(6,6),x.bc(),x.cc(7,"div",7),x.cc(8,"button",8),x.qc("click",function(){return t.cancel()}),x.cc(9,"div",9),x.gc(10,10),x.bc(),x.bc(),x.cc(11,"button",11),x.qc("click",function(){return t.onRemove.emit(),t.cancel()}),x.cc(12,"div",9),x.gc(13,12),x.bc(),x.bc(),x.bc(),x.bc(),x.bc())},encapsulation:2,changeDetection:0}),e})();var oe=i("Kj3r"),ne=i("1G5W"),se=i("jJW4"),ce=i("NsZK"),ae=i("S//e"),re=i("peMq"),le=i("rjKe");function de(e,t){if(1&e&&(x.cc(0,"div",13),x.vc(1,"async"),x.bc()),2&e){const e=x.uc();x.Ob("cu-linked-email-caret-expand",x.wc(1,2,e.expanded$))}}function ue(e,t){if(1&e&&(x.cc(0,"div",14),x.dd(1),x.bc()),2&e){const e=x.uc();x.Ib(1),x.fd(" ",null==e.emailUser?null:e.emailUser.name," ")}}function me(e,t){1&e&&(x.cc(0,"div",15),x.dd(1," Inactive "),x.bc())}function pe(e,t){if(1&e){const e=x.dc();x.cc(0,"div",16),x.qc("click",function(){return x.Uc(e),x.uc().onRestore.emit()}),x.gc(1,17),x.bc()}}function he(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-user-list-dropdown",18,19),x.qc("onChange",function(t){return x.Uc(e),x.uc().setMembers(t)}),x.cc(2,"cu-user-group",20),x.qc("onUserRemove",function(t){return x.Uc(e),x.uc().removeAddedUser(t)}),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Dc("enableFirstSelection",!0)("multiChoice",!0)("selectedUsers",null==e.emailUser?null:e.emailUser.members)("immutableUser",e.currentUser)("users",e.availableUsers),x.Ib(2),x.Dc("modifier","cu-user-group_sm")("users",null==e.emailUser?null:e.emailUser.members)("immutableUser",e.currentUser)("showUserRemover",!0)("multiChoice",!0)}}const fe=function(){return["top"]};function be(e,t){if(1&e){const e=x.dc();x.cc(0,"div",37),x.cc(1,"cu-user-list-dropdown",38),x.qc("onChange",function(t){return x.Uc(e),x.uc(3).setMembers(t)}),x.cc(2,"cu-user-group",39),x.qc("onUserRemove",function(t){return x.Uc(e),x.uc(3).removeAddedUser(t)}),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(3);x.Ib(1),x.Dc("enableFirstSelection",!0)("multiChoice",!0)("selectedUsers",null==e.emailUser?null:e.emailUser.members)("immutableUser",e.currentUser)("users",e.availableUsers)("dropdownPlacement",x.Gc(12,fe)),x.Ib(1),x.Dc("modifier","cu-user-group_sm")("users",null==e.emailUser?null:e.emailUser.members)("immutableUser",e.currentUser)("showUserRemover",!0)("multiChoice",!0)("assignIcon",!0)}}function ge(e,t){if(1&e){const e=x.dc();x.ac(0),x.cc(1,"div",27),x.gc(2,28),x.bc(),x.cc(3,"div",29),x.cc(4,"cu-radiobox",30),x.qc("onChange",function(){x.Uc(e);const t=x.uc(2);return t.setVisibility(t.EmailVisibility.PRIVATE)}),x.gc(5,31),x.bc(),x.cc(6,"cu-radiobox",32),x.qc("click",function(){x.Uc(e);const t=x.uc(2);return t.setVisibility(t.EmailVisibility.ADMIN)}),x.gc(7,33),x.bc(),x.cc(8,"cu-radiobox",32),x.qc("click",function(){x.Uc(e);const t=x.uc(2);return t.setVisibility(t.EmailVisibility.EVERYONE)}),x.gc(9,34),x.bc(),x.cc(10,"cu-radiobox",32),x.qc("click",function(){x.Uc(e);const t=x.uc(2);return t.setVisibility(t.EmailVisibility.PRIVATE,!0)}),x.gc(11,35),x.bc(),x.bd(12,be,3,13,"div",36),x.bc(),x.Zb()}if(2&e){const e=x.uc(2);x.Ib(4),x.Dc("checked",(null==e.emailUser?null:e.emailUser.shared_with)===e.EmailVisibility.PRIVATE&&(null==e.emailUser||null==e.emailUser.members?null:e.emailUser.members.length)<=1&&!e.forceMembersSelect),x.Ib(2),x.Dc("checked",(null==e.emailUser?null:e.emailUser.shared_with)===e.EmailVisibility.ADMIN),x.Ib(2),x.Dc("checked",(null==e.emailUser?null:e.emailUser.shared_with)===e.EmailVisibility.EVERYONE),x.Ib(2),x.Dc("checked",(null==e.emailUser?null:e.emailUser.shared_with)===e.EmailVisibility.PRIVATE&&((null==e.emailUser||null==e.emailUser.members?null:e.emailUser.members.length)>1||e.forceMembersSelect)),x.Ib(2),x.Dc("ngIf",(null==e.emailUser?null:e.emailUser.shared_with)===e.EmailVisibility.PRIVATE&&((null==e.emailUser||null==e.emailUser.members?null:e.emailUser.members.length)>1||e.forceMembersSelect))}}function _e(e,t){if(1&e){const e=x.dc();x.cc(0,"div",21),x.cc(1,"div",22),x.gc(2,23),x.bc(),x.cc(3,"div",24),x.cc(4,"input",25),x.qc("ngModelChange",function(t){return x.Uc(e),x.uc().debounceName$.next(t)}),x.bc(),x.bc(),x.bd(5,ge,13,5,"ng-container",26),x.vc(6,"async"),x.bc()}if(2&e){const e=x.uc();let t=null;x.Ib(4),x.Dc("ngModel",null==e.emailUser?null:e.emailUser.name),x.Ib(1),x.Dc("ngIf",+(null==e.emailUser?null:e.emailUser.userid)==+(null==(t=x.wc(6,2,e.sharedData.currentUser))?null:t.id))}}let ve=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.modal=t,this.injector=i,this.sharedData=o,this.expanded$=new v.a(!1),this.forceMembersSelect=!1,this.trackById=Object(s.d)("id"),this.alwaysExpand=!1,this.active=!0,this.debounceName$=new k.a,this.destroy$=new k.a,this.onEmailUserAction=new x.o,this.onRestore=new x.o,this.EmailVisibility=g.f}ngOnInit(){this.debounceName$.pipe(Object(oe.a)(250),Object(ne.a)(this.destroy$)).subscribe(this.updateName.bind(this))}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}updateName(e){this.emailUser=Object.assign(Object.assign({},this.emailUser),{name:e});const t=Object.assign({},this.emailUser);this.onEmailUserAction.emit({type:g.e.UpdateEmailUser,emailUser:t,editAuthEmailPayload:{name:this.emailUser.name}})}removeAddedUser(e){const t=Object.assign(Object.assign({},this.emailUser),{members:this.emailUser.members.filter(t=>t.id!==e.id)});this.onEmailUserAction.emit({type:g.e.UpdateEmailUser,emailUser:t}),this.emailUser=Object.assign({},t),this.changeDetector.markForCheck()}unAuth(){this.onEmailUserAction.emit({type:g.e.RemoveAuth,emailUser:this.emailUser})}setMembers(e){const t=Object.assign(Object.assign({},this.emailUser),{members:e});this.onEmailUserAction.emit({type:g.e.UpdateEmailUser,emailUser:t}),this.emailUser=Object.assign({},t),this.changeDetector.markForCheck()}setVisibility(e,t=!1){const i={shared_with:e};i.members=[this.currentUser],this.forceMembersSelect=t;const o=Object.assign(Object.assign({},this.emailUser),i);this.emailUser=Object.assign({},o),this.onEmailUserAction.emit({type:g.e.UpdateEmailUser,emailUser:o,editAuthEmailPayload:{shared_with:e}})}openDeleteConfirm(){const e=this.modal.openComponent(ie,this.injector,{title:""});e.instance.onRemove.pipe(Object(ne.a)(e.instance.destroy$)).subscribe(()=>{this.unAuth()})}toggleEmailUser(e){}toggleExpandUsers(){this.active&&this.expanded$.next(!this.expanded$.value)}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(x.h),x.Wb(S.a),x.Wb(x.t),x.Wb(se.a))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-linked-email"]],hostVars:4,hostBindings:function(e,t){2&e&&x.Ob("cu-linked-email",!0)("cu-linked-email__inactive",!t.active)},inputs:{emailUser:"emailUser",availableUsers:"availableUsers",currentUser:"currentUser",selected:"selected",alwaysExpand:"alwaysExpand",active:"active"},outputs:{onEmailUserAction:"onEmailUserAction",onRestore:"onRestore"},decls:15,vars:9,consts:function(){let e,t,i,o,n,s,c,a;return e=$localize`:@@cu-linked-email-close-tooltip␟e70d4595dc6055e7ba43a10e11e71dffe7bcd326␟6317854716150656991:Delete email account`,t=$localize`:@@cu-linked-email-val-email__restore␟5c55527d4060348a753f4592f5e59a52100ddd3b␟2874676109691997787: Restore account `,i=$localize`:@@cu-linked-email__send-from␟842c21bd8a7b3115e007ad49c2398f74f5245e9a␟1205680681059782296: send from `,o=$localize`:@@cu-linked-email__people-that-can-send␟c8a505083bd80fcb25d0fa7f2d8760f0ddd51588␟4533744061436880406: people that can send from this account `,n=$localize`:@@cu-linked-email-added-radios_myself␟b4b6d9cce1c12abf9e7cdbbad6a73771ac049845␟5224248227886891265: Myself `,s=$localize`:@@common_admins␟b8a87e1389e93f2ea8fc3a53c106843b48258bd3␟2174562256319201951: Admins `,c=$localize`:@@cu-linked-email-added-radios_members-admins␟56543c2cbdf04f752231ccfbca8e9fa9fc4e224f␟6328903356305742340: Members & Admins `,a=$localize`:@@cu-linked-email__form-label_choose-people␟33fafabb6428808e2774f0ca45324a0aaee59cd8␟1094565216532047981: Choose people `,[[1,"cu-linked-email-row","cu-linked-email-row__main"],[1,"cu-linked-email-row-top"],[1,"cu-linked-email-row-left",3,"click"],["class","cu-linked-email-caret","icon","cu2-angle-right",3,"cu-linked-email-caret-expand",4,"ngIf"],["class","cu-linked-email-val",4,"ngIf"],[1,"cu-linked-email-val","cu-linked-email-val-email"],["class","cu-linked-email-val-email__inactive",4,"ngIf"],[1,"cu-linked-email-row-right"],["class","cu-linked-email-val-email__restore",3,"click",4,"ngIf"],[3,"enableFirstSelection","multiChoice","selectedUsers","immutableUser","users","onChange",4,"ngIf"],["cuTooltip",e,1,"cu-linked-email-val-email__close"],["icon","cu2-trash-alt",1,"cu-linked-email-close",3,"click"],["class","cu-linked-email-added",4,"ngIf"],["icon","cu2-angle-right",1,"cu-linked-email-caret"],[1,"cu-linked-email-val"],[1,"cu-linked-email-val-email__inactive"],[1,"cu-linked-email-val-email__restore",3,"click"],t,[3,"enableFirstSelection","multiChoice","selectedUsers","immutableUser","users","onChange"],["userDropdown",""],[3,"modifier","users","immutableUser","showUserRemover","multiChoice","onUserRemove"],[1,"cu-linked-email-added"],[1,"cu-linked-email-added-header","cu-linked-email-added-header-top-padding"],i,[1,"cu-linked-email-added-name"],["type","text",1,"cu-form__input",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"cu-linked-email-added-header"],o,[1,"cu-linked-email-added-radios"],[3,"checked","onChange"],n,[3,"checked","click"],s,c,a,["class","cu-linked-email-added-users",4,"ngIf"],[1,"cu-linked-email-added-users"],[3,"enableFirstSelection","multiChoice","selectedUsers","immutableUser","users","dropdownPlacement","onChange"],[3,"modifier","users","immutableUser","showUserRemover","multiChoice","assignIcon","onUserRemove"]]},template:function(e,t){1&e&&(x.cc(0,"div",0),x.cc(1,"div",1),x.cc(2,"div",2),x.qc("click",function(){return t.toggleExpandUsers()}),x.bd(3,de,2,4,"div",3),x.bd(4,ue,2,1,"div",4),x.cc(5,"div",5),x.dd(6),x.bc(),x.bd(7,me,2,0,"div",6),x.bc(),x.cc(8,"div",7),x.bd(9,pe,2,0,"div",8),x.bd(10,he,3,10,"cu-user-list-dropdown",9),x.cc(11,"div",10),x.cc(12,"div",11),x.qc("click",function(){return t.openDeleteConfirm()}),x.bc(),x.bc(),x.bc(),x.bc(),x.bd(13,_e,7,4,"div",12),x.vc(14,"async"),x.bc()),2&e&&(x.Ib(3),x.Dc("ngIf",!t.alwaysExpand),x.Ib(1),x.Dc("ngIf",null==t.emailUser?null:t.emailUser.name),x.Ib(2),x.fd(" \xa0<",null==t.emailUser?null:t.emailUser.email,"> "),x.Ib(1),x.Dc("ngIf",!t.active),x.Ib(2),x.Dc("ngIf",!t.active),x.Ib(1),x.Dc("ngIf",(null==t.emailUser?null:t.emailUser.shared_with)===t.EmailVisibility.PRIVATE),x.Ib(3),x.Dc("ngIf",t.alwaysExpand||x.wc(14,7,t.expanded$)))},directives:[P.q,ce.a,V.a,ae.a,re.a,L.c,L.p,L.s,le.a],pipes:[P.b],styles:['.cu-linked-email{display:block;padding:15px 30px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-linked-email{border-color:#1e272e}.cu-linked-email-add{color:#7b68ee;padding-top:15px;font-weight:500;font-size:11px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-linked-email-add{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-add{font-family:var(--global-font-support)}}.cu-linked-email-toggle{margin-left:12px}.cu-linked-email-toggle .cu-linked-email-close{display:block}.cu-linked-email-row-top{justify-content:space-between}.cu-linked-email-row-left,.cu-linked-email-row-right,.cu-linked-email-row-top{display:flex;align-items:center}.cu-linked-email__inactive .cu-linked-email-row-left{opacity:.3}.cu-linked-email-row__main .cu-linked-email-val-email__close,.cu-linked-email-row__main .cu-linked-email-val-email__restore{display:none}.cu-linked-email-row__main:hover .cu-linked-email-val-email__close,.cu-linked-email-row__main:hover .cu-linked-email-val-email__restore{display:flex}.cu-linked-email-caret{transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);width:12px;height:12px;transform:rotate(0);fill:#292d34;margin-right:7px;cursor:pointer}.dark-theme .cu-linked-email-caret{fill:#d5d6d7}.cu-linked-email-caret.cu-linked-email-caret-expand{transform:rotate(90deg)}.cu-linked-email-val{font-weight:700;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-val{font-family:var(--global-font-support)}}.cu-linked-email-val-email{font-weight:500;color:#7c828d}.dark-theme .cu-linked-email-val-email{color:#828588}.cu-linked-email-val-email__inactive{margin-left:20px;font-style:italic}.cu-linked-email-val-email__close,.cu-linked-email-val-email__restore{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;border-radius:4px;padding:0 8px;align-items:center;cursor:pointer;color:#7c828d;height:24px;display:flex}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-val-email__close,.cu-linked-email-val-email__restore{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-val-email__close,.dark-theme .cu-linked-email-val-email__restore{color:#828588}.cu-linked-email-val-email__close:hover,.cu-linked-email-val-email__restore:hover{background-color:rgba(233,235,240,.5);color:#292d34}.dark-theme .cu-linked-email-val-email__close:hover,.dark-theme .cu-linked-email-val-email__restore:hover{background-color:rgba(43,52,59,.5);color:#d5d6d7}.cu-linked-email-val-email__close{margin-left:5px}.cu-linked-email-val-email__close:hover .icon{fill:#fd71af}.cu-linked-email-val-email__close-edit:hover .icon{fill:#292d34}.cu-linked-email-user{display:flex;align-items:center;justify-content:space-between;padding:6px 0;border-bottom:1px solid #e4e4e4;font-weight:500;font-size:10px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-user{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-user{border-color:#1e272e}.cu-linked-email-user-info{display:flex;align-items:center}.cu-linked-email-user-avatar{margin-right:7px}.cu-linked-email-user:hover .cu-linked-email-close{display:block}.cu-linked-email-close{width:14px;height:14px;fill:#b9bec7;cursor:pointer}.cu-linked-email-added-users{display:flex;margin-top:10px}.cu-linked-email-added-users .cu-avatar,.cu-linked-email-added-users .cu-user-group__icon,.cu-linked-email-added-users .cu-user-group__more{width:30px!important;height:30px!important}.cu-linked-email-added-users .cu-user-group__more{margin-left:0!important}.cu-linked-email-added-name{border-radius:3px;height:42px;border:1px solid #e9ebf0;padding:0 10px;display:flex;align-items:center;margin-bottom:10px}.dark-theme .cu-linked-email-added-name{border-color:#384047}.cu-linked-email-added-name .cu-form__input{padding:0}.cu-linked-email-added-body{position:relative;background:#fafbfc;width:100%;border-radius:5px;border:1px solid #e9ebf0;padding:10px;margin-bottom:10px}.cu-linked-email-added-body-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;color:#292d34;padding-bottom:6px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-added-body-title{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-added-body-title{color:#d5d6d7}.cu-linked-email-added-body-sub-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:10px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-added-body-sub-title{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-added-body-sub-title{color:#828588}.cu-linked-email-added-body .icon{fill:var(--theme-main-color);height:12px;width:12px;position:absolute;right:15px;top:15px}.dark-theme .cu-linked-email-added-body{background-color:#2b343b;border-color:#1e272e;color:#d5d6d7}.cu-linked-email-added-body.cu-linked-email-added-body-selected{border-color:#7b68ee;background:#fff}@supports (--theme-main-color:#7b68ee){.cu-linked-email-added-body.cu-linked-email-added-body-selected{border-color:var(--theme-main-color)}}.dark-theme .cu-linked-email-added-body.cu-linked-email-added-body-selected{background-color:#384047}.cu-linked-email-added-header{text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.3);white-space:nowrap;padding:15px 0}.cu-linked-email-added-header .cu-linked-email-added-header-top-padding{padding-top:25px}.contrast_high .cu-linked-email-added-header{color:#858585}.dark-theme .cu-linked-email-added-header{color:#828588}.cu-linked-email-added-radios .cu-checkbox{margin-bottom:15px}.cu-linked-email-added-radios .cu-radio__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;color:#292d34;margin-left:5px;cursor:pointer;padding-top:1px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-added-radios .cu-radio__label{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-added-radios .cu-radio__label{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})();var ke=i("PZkE"),ye=i("bFKe"),we=i("LdyQ"),xe=i("MJvn"),Ie=i("HPyy"),Te=i("n+1/"),Ce=i("SA+E"),De=i("loh9"),Oe=i("pxPQ"),Se=i("HcWw"),Ee=i("Muja"),Pe=i("Wk/N"),je=i("T6L0"),Ae=i("4XV2"),$e=i("3pVM"),Ue=i("iA4v"),Re=i("xgIS"),Me=i("YAnr");const Fe=["toolbar"],Le=["editorContainer"],Ne=["emojiDropdown"];let ze=(()=>{class e{constructor(e,t,i,o){this.sharedData=e,this.changeDetector=t,this.zone=i,this.elementRef=o,this.staticToolbarVisible=!1,this.destroy$=new k.a,this.debounceSave$=new k.a,this.isActive$=new v.a(!1),this.staticToolbar=!1,this.content="",this.onSave=new x.o}ngOnInit(){this.debounceSave$.pipe(Object(oe.a)(300),Object(ne.a)(this.destroy$)).subscribe(e=>{this.save()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){e.content&&e.content.currentValue!==e.content.previousValue&&(this.setInitContent(e.content.currentValue),this.editor&&this.editor.focus())}ngAfterViewInit(){Object(Re.a)(this.elementRef.nativeElement,"click",{passive:!0}).pipe(Object(ne.a)(this.destroy$)).subscribe(e=>{}),this.initEditor()}getEditor(){return this.editor}save(){const e=this.getCleanDelta();this.onSave.emit(e)}getCleanDelta(){return this.cleanDelta(this.linkifyText(this.editor.getContents()))}getEditorContainer(){return this.editorContainer.nativeElement}getPostWithCmd(){return!1}linkifyText(e){return Object(Me.G)(e)}addEmojiToEditor(e){this.isActive$.next(!0),this.editor.focus(),this.emojiModule.insertEmoji({code:e.unified.toLowerCase(),name:e.name})}initEditor(){const e={id:this.editorId,placeholder:"Add signature",theme:this.staticToolbar?"snow":"bubble",formats:["bold","italic","underline","strike","background","code","code-block","blockquote","linebreak","grammarly","emoticon","indent"],modules:{toolbar:{container:this.toolbar&&this.toolbar.nativeElement},history:!0,keyboard:{bindings:Object.assign({},Object(Ae.b)(this.getEditor.bind(this),this.getPostWithCmd.bind(this),this.getEditorContainer.bind(this),!0))},clipboard:{matchers:Object($e.a)(this.getEditor.bind(this),()=>!0)},table:!0,dnd:!0,syntax:"undefined"!=typeof hljs&&{languages:je.a},markdown:!!this.sharedData.currentUser.value.markdown_shortcuts&&{formats:{blockquote:!0,"code-block":!0,code:!0,bold:!0,italic:!0,strikethrough:!0}},matcher:!0,emoji:{onQuery:e=>this.emojiDropdown.filter(e).length>0,onShowDialog:(e,t)=>{this.emojiRect=t,this.changeDetector.detectChanges(),this.emojiDropdown.open()},onHideDialog:()=>{this.emojiDropdown.close(),this.emojiRect=null},onKeyPress:e=>this.emojiDropdown.handleKey(e)}}};e.bounds=this.editorContainer.nativeElement,this.zone.runOutsideAngular(()=>{this.editor=new Ue.b(this.editorContainer.nativeElement,e),this.staticToolbar&&Object(Re.a)(this.editor,Pe.h.EDITOR_CHANGE).pipe(Object(ne.a)(this.destroy$)).subscribe(([e,t,i,o])=>{if(e!==Pe.h.SELECTION_CHANGE)return;const n=this.editor.hasFocus()&&null!=t&&t.length>0&&o===Pe.i.USER;n!==this.staticToolbarVisible&&this.zone.run(()=>{this.staticToolbarVisible=n,this.changeDetector.markForCheck()})}),this.syntaxModule=this.editor.getModule("syntax"),this.emojiModule=this.editor.getModule("emoji")}),this.editor.on(Pe.h.TEXT_CHANGE,()=>{this.isActive$.next(!0)}),this.editor.on(Pe.h.TEXT_CHANGE,(e,t,i)=>{i===Pe.i.USER&&this.zone.run(()=>{this.debounceSave$.next()})}),this.editor&&this.editor.focus(),Object(Me.B)(this.editor),this.setInitContent(this.content)}cleanDelta(e){const t=new Ue.a;return e.ops.forEach(e=>{e.insert&&(e.insert.image||e.insert.attachment?e.attributes&&e.attributes["data-temp-id"]||t.ops.push(e):e.insert.slash_command||t.ops.push(e))}),t}setInitContent(e){try{const t=new Ue.a(JSON.parse(e)),i=this.cleanDelta(this.editor.getContents()),o=i.diff(t),n=t.diff(i),s=n.filter(e=>Boolean(e.insert)),c=o&&o.ops&&0===o.ops.length,a=this.editor.getLength()<2&&o&&o.ops&&1===o.ops.length&&o.ops[0].retain,r=1===s.length&&Boolean(s[0].insert.slash_command);if(c||a||r||Object(Ee.a)(o,n))return;this.editor.updateContents(this.editor.getContents().diff(Object(Me.G)(t))),this.changeDetector.markForCheck()}catch(t){void 0!==this.editor&&(this.editor.root.innerHTML=e)}}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(se.a),x.Wb(x.h),x.Wb(x.B),x.Wb(x.m))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-email-signature-editor"]],viewQuery:function(e,t){if(1&e&&(x.jd(Fe,1),x.jd(Le,3),x.jd(Ne,1)),2&e){let e;x.Qc(e=x.rc())&&(t.toolbar=e.first),x.Qc(e=x.rc())&&(t.editorContainer=e.first),x.Qc(e=x.rc())&&(t.emojiDropdown=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&x.Ob("cu-email-signature-editor",!0)},inputs:{editorId:"editorId",staticToolbar:"staticToolbar",content:"content"},outputs:{onSave:"onSave"},features:[x.Gb],decls:2,vars:0,consts:[[1,"cu-email-signatures__editor"],["editorContainer",""]],template:function(e,t){1&e&&x.Xb(0,"div",0,1)},styles:[".cu-email-signature-editor{flex-grow:1;height:0}"],encapsulation:2,changeDetection:0}),e})();var qe=i("EP2k"),Ge=i("8LOJ");const Ve=function(e){return[e]};function Be(e,t){if(1&e){const e=x.dc();x.cc(0,"div",23),x.qc("click",function(){x.Uc(e);const i=t.index;return x.uc(2).setEmailIndex(i)}),x.vc(1,"async"),x.Xb(2,"cu-user-group",24),x.cc(3,"div",25),x.dd(4),x.vc(5,"username"),x.bc(),x.bc()}if(2&e){const e=t.$implicit,i=t.index,o=x.uc(2);x.Ob("cu-email-signatures__user_active",x.wc(1,6,o.selectedEmailIndex$)===i),x.Ib(2),x.Dc("modifier","cu-user-group_sm")("users",x.Hc(11,Ve,null==e?null:e.user))("readOnly",!0),x.Ib(2),x.fd(" ",x.xc(5,8,null==e?null:e.user,"Me")," ")}}function Xe(e,t){if(1&e&&(x.cc(0,"div"),x.cc(1,"div",21),x.bd(2,Be,6,13,"div",22),x.bc(),x.bc()),2&e){const e=x.uc();x.Ib(2),x.Dc("ngForOf",e.signatures)("ngForTrackBy",e.trackByUser)}}function He(e,t){1&e&&(x.cc(0,"span"),x.dd(1,"("),x.ac(2),x.gc(3,36),x.Zb(),x.dd(4,")"),x.bc())}function We(e,t){1&e&&x.Xb(0,"div",42)}const Ke=function(e){return{id:"",title:e,icon:"cu3-edit"}},Qe=function(e){return{id:"",title:e,icon:"trash"}},Ze=function(e,t){return{id:"",title:e,checkType:"switch",checked:t}};function Ye(e,t){if(1&e){const e=x.dc();x.cc(0,"div",37),x.cc(1,"cu-dropdown-list-item",38),x.qc("click",function(){x.Uc(e);const t=x.uc().$implicit;return x.uc(2).editId=t.id}),x.bc(),x.cc(2,"cu-dropdown-list-item",39),x.qc("click",function(){x.Uc(e);const t=x.uc().$implicit;return x.uc(2).deleteSignature(t)}),x.bc(),x.bd(3,We,1,0,"div",40),x.vc(4,"async"),x.cc(5,"cu-dropdown-list-item",41),x.qc("onCheck",function(){x.Uc(e);const t=x.uc().$implicit;return x.uc(2).updateDefault(t)}),x.bc(),x.bc()}if(2&e){const e=x.uc().$implicit,t=x.uc(2);let i=null;x.Ib(1),x.Dc("item",x.Hc(6,Ke,t.menuRename)),x.Ib(1),x.Dc("item",x.Hc(8,Qe,t.menuDelete)),x.Ib(1),x.Dc("ngIf",(null==(i=x.wc(4,4,t.selectedSignature$))?null:i.id)===(null==e?null:e.id)),x.Ib(2),x.Dc("item",x.Ic(10,Ze,t.menuDefault,null==e?null:e.is_default))}}const Je=function(){return["bottom-right","top-right","auto"]};function et(e,t){if(1&e){const e=x.dc();x.cc(0,"div",29),x.qc("click",function(){x.Uc(e);const i=t.$implicit;return x.uc(2).selectedSignature$.next(i)}),x.vc(1,"async"),x.cc(2,"cu-editable",30),x.qc("onChange",function(i){x.Uc(e);const o=t.$implicit;return x.uc(2).rename(i,o)})("onCancel",function(){return x.Uc(e),x.uc(2).editId=null}),x.cc(3,"div",31),x.dd(4),x.bd(5,He,5,0,"span",32),x.bc(),x.bc(),x.cc(6,"div",33),x.Xb(7,"div",34),x.bd(8,Ye,6,13,"div",35),x.bc(),x.bc()}if(2&e){const e=t.$implicit,i=x.uc(2);let o=null;x.Ob("cu-email-signatures__detail_selected",(null==(o=x.wc(1,12,i.selectedSignature$))?null:o.id)===(null==e?null:e.id))("cu-email-signatures__detail_editing",i.editId===e.id),x.Ib(2),x.Dc("text",e.name)("editing",i.editId===e.id)("autosize",!1)("allowEmpty",!0)("selectText",!0),x.Ib(2),x.fd(" ",e.name," "),x.Ib(1),x.Dc("ngIf",null==e?null:e.is_default),x.Ib(1),x.Dc("dropdownPlacement",x.Gc(14,Je))}}function tt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-editable",43),x.qc("click",function(){return x.Uc(e),x.uc(2).checkCreateSignature()})("onCancel",function(){return x.Uc(e),x.uc(2).creating$.next(!1)})("onChange",function(t){return x.Uc(e),x.uc(2).createSignature(t)}),x.vc(1,"async"),x.dd(2," + "),x.ac(3),x.gc(4,44),x.Zb(),x.bc()}if(2&e){const e=x.uc(2);x.Dc("text","")("editing",x.wc(1,3,e.creating$))("autosize",!1)}}function it(e,t){if(1&e&&(x.cc(0,"div",26),x.bd(1,et,9,15,"div",27),x.vc(2,"async"),x.bd(3,tt,5,5,"cu-editable",28),x.vc(4,"async"),x.bc()),2&e){const e=x.uc();x.Ib(1),x.Dc("ngForOf",null==e.signatures[x.wc(2,3,e.selectedEmailIndex$)]?null:e.signatures[x.wc(2,3,e.selectedEmailIndex$)].signatures)("ngForTrackBy",e.trackById),x.Ib(2),x.Dc("ngIf",null==e.signatures[x.wc(4,5,e.selectedEmailIndex$)]?null:e.signatures[x.wc(4,5,e.selectedEmailIndex$)].canAdd)}}function ot(e,t){if(1&e){const e=x.dc();x.cc(0,"div",45),x.cc(1,"div",46),x.qc("click",function(){return x.Uc(e),x.uc().toggleHtml(!1)}),x.gc(2,47),x.vc(3,"async"),x.bc(),x.cc(4,"div",46),x.qc("click",function(){return x.Uc(e),x.uc().toggleHtml()}),x.gc(5,48),x.vc(6,"async"),x.bc(),x.bc()}if(2&e){const e=x.uc();let t=null,i=null;x.Ib(1),x.Ob("cu-email-signatures__title-options-pill_active",!(null!=(t=x.wc(3,4,e.selectedSignature$))&&t.html)),x.Ib(3),x.Ob("cu-email-signatures__title-options-pill_active",null==(i=x.wc(6,6,e.selectedSignature$))?null:i.html)}}function nt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",49),x.qc("click",function(){return x.Uc(e),x.uc().creating$.next(!0)}),x.cc(1,"div",50),x.Xb(2,"img",51),x.ac(3),x.gc(4,52),x.Zb(),x.bc(),x.bc()}}function st(e,t){if(1&e){const e=x.dc();x.cc(0,"div",57),x.cc(1,"div",58),x.qc("click",function(){return x.Uc(e),x.uc(2).editing$.next(!0)}),x.gc(2,59),x.vc(3,"async"),x.bc(),x.cc(4,"div",58),x.qc("click",function(){return x.Uc(e),x.uc(2).editing$.next(!1)}),x.gc(5,60),x.vc(6,"async"),x.bc(),x.bc()}if(2&e){const e=x.uc(2);x.Ib(1),x.Ob("cu-email-signatures__preview-option_active",x.wc(3,4,e.editing$)),x.Ib(3),x.Ob("cu-email-signatures__preview-option_active",!x.wc(6,6,e.editing$))}}function ct(e,t){if(1&e){const e=x.dc();x.cc(0,"textarea",63),x.qc("ngModelChange",function(t){return x.Uc(e),x.uc(3).htmlSignature=t})("ngModelChange",function(){x.Uc(e);const t=x.uc(3);return t.debounceHtml$.next(t.htmlSignature)}),x.bc()}if(2&e){const e=x.uc(3);x.Dc("ngModel",e.htmlSignature)}}function at(e,t){if(1&e&&(x.Xb(0,"div",64),x.vc(1,"safePurify"),x.vc(2,"async")),2&e){const e=x.uc(3);let t=null;x.Dc("innerHtml",x.wc(1,1,null==(t=x.wc(2,3,e.selectedSignature$))?null:t.signature),x.Vc)}}function rt(e,t){if(1&e&&(x.ac(0),x.bd(1,ct,1,1,"textarea",61),x.vc(2,"async"),x.bd(3,at,3,5,"ng-template",null,62,x.cd),x.Zb()),2&e){const e=x.Rc(4),t=x.uc(2);x.Ib(1),x.Dc("ngIf",x.wc(2,2,t.editing$))("ngIfElse",e)}}function lt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-email-signature-editor",65),x.qc("onSave",function(t){return x.Uc(e),x.uc(2).saveSigntaure(t)}),x.vc(1,"async"),x.bc()}if(2&e){const e=x.uc(2);x.Dc("content",x.wc(1,1,e.content$))}}function dt(e,t){if(1&e&&(x.cc(0,"div",53),x.bd(1,st,7,8,"div",54),x.vc(2,"async"),x.bd(3,rt,5,4,"ng-container",55),x.vc(4,"async"),x.bc(),x.bd(5,lt,2,3,"ng-template",null,56,x.cd)),2&e){const e=x.Rc(6),t=x.uc();let i=null,o=null;x.Ib(1),x.Dc("ngIf",null==(i=x.wc(2,3,t.selectedSignature$))?null:i.html),x.Ib(2),x.Dc("ngIf",null==(o=x.wc(4,5,t.selectedSignature$))?null:o.html)("ngIfElse",e)}}let ut=(()=>{class e{constructor(e,t){this.dataService=e,this.cdr=t,this.users=[],this.destroy$=new k.a,this.editing$=new v.a(!0),this.creating$=new v.a(!1),this.content$=new v.a(""),this.selectedSignature$=new v.a(null),this.selectedEmailIndex$=new v.a(0),this.debounceHtml$=new k.a,this.htmlSignature="",this.trackById=Object(s.d)("id"),this.trackByUser=s.e,this.signatures=[],this.forceCreate=!1,this.paywalled=!1,this.onEmailUserAction=new x.o,this.menuRename=$localize`:@@common_rename:Rename`,this.menuDelete=$localize`:@@common_delete:Delete`,this.menuDefault=$localize`:@@cu-email-signatures__actions-menu_default-signature:Set as default signature`}ngOnInit(){this.selectedSignature$.pipe(Object(l.a)(e=>!!e),Object(ne.a)(this.destroy$)).subscribe(e=>{this.content$.next(e.signature),this.htmlSignature=e.html?e.signature:""}),this.selectedSignature$.pipe(Object(l.a)(e=>!!e),Object(ke.a)("id"),Object(ne.a)(this.destroy$)).subscribe(e=>{this.editing$.next(!0),this.savedSignature=null,this.savedSignatureHtml=null}),this.debounceHtml$.pipe(Object(oe.a)(250)).pipe(Object(ne.a)(this.destroy$)).subscribe(e=>{this.selectedSignature$.next(Object.assign(Object.assign({},this.selectedSignature$.value),{signature:e})),this.onEmailUserAction.emit(this.paywalled?{type:g.e.ThrowBusinessPaywall}:{type:g.e.EditSignature,signatureId:this.selectedSignature$.value.id,signaturePayload:Object.assign({},this.selectedSignature$.value),signature:this.selectedSignature$.value,userId:this.signatures[this.selectedEmailIndex$.value].user.id})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){if(e.authedEmails){const e=[];this.authedEmails.forEach(t=>{e.push(...t.members)}),this.users=[...e]}if(e.signatures&&this.selectId){const e=this.signatures[this.selectedEmailIndex$.value];if(e&&e.signatures){const t=e.signatures.find(e=>e.id===this.selectId);t&&(this.selectedSignature$.next(t),this.selectId=null)}}if(e.signatures&&this.signatures&&this.signatures.length&&!this.selectedSignature$.value){const e=this.signatures.findIndex(e=>+e.user.id==+this.user.id),t=-1===e?0:e;this.selectedEmailIndex$.next(t),this.signatures[t].signatures&&this.signatures[t].signatures.length&&this.selectedSignature$.next(this.signatures[t].signatures[0])}e.forceCreate&&this.forceCreate&&this.creating$.next(!0)}rename(e,t){if(!e)return;const i=(this.signatures[this.selectedEmailIndex$.value].signatures||[]).findIndex(e=>e.id===t.id);-1!==i&&(this.signatures=Object.assign(Object.assign({},this.signatures),{[this.selectedEmailIndex$.value]:Object.assign(Object.assign({},this.signatures[this.selectedEmailIndex$.value]),{signatures:this.signatures[this.selectedEmailIndex$.value].signatures.map((t,o)=>o===i?Object.assign(Object.assign({},t),{name:e}):t)})}),this.cdr.markForCheck(),this.onEmailUserAction.emit({type:g.e.EditSignature,signatureId:t.id,signaturePayload:{name:e},signature:t,userId:this.signatures[this.selectedEmailIndex$.value].user.id}))}toggleHtml(e=!0){let t="";if(this.selectedSignature$.value){if(this.selectedSignature$.value.html===e)return;this.selectedSignature$.value.html?(this.savedSignatureHtml=this.selectedSignature$.value.signature,t=this.savedSignature||""):(this.savedSignature=this.selectedSignature$.value.signature,t=this.savedSignatureHtml||""),this.editing$.next(!0),this.selectedSignature$.next(Object.assign(Object.assign({},this.selectedSignature$.value),{signature:t,html:!this.selectedSignature$.value.html}))}}updateDefault(e){this.paywalled?this.onEmailUserAction.emit({type:g.e.ThrowBusinessPaywall}):(e.id===this.selectedSignature$.value.id&&this.selectedSignature$.next(Object.assign(Object.assign({},this.selectedSignature$.value),{is_default:!this.selectedSignature$.value.is_default})),this.signatures=Object.assign(Object.assign({},this.signatures),{[this.selectedEmailIndex$.value]:Object.assign(Object.assign({},this.signatures[this.selectedEmailIndex$.value]),{signatures:this.signatures[this.selectedEmailIndex$.value].signatures.map((t,i)=>Object.assign(Object.assign({},t),{is_default:t.id===e.id&&!e.is_default}))})}),this.cdr.markForCheck(),this.onEmailUserAction.emit({type:g.e.EditSignature,signatureId:e.id,signaturePayload:{is_default:!e.is_default},allSignatures:this.signatures[this.selectedEmailIndex$.value].signatures,signature:e,userId:this.signatures[this.selectedEmailIndex$.value].user.id}))}deleteSignature(e){this.onEmailUserAction.emit({type:g.e.DeleteEmailSignature,userId:e.userid,signatureId:e.id})}checkCreateSignature(){this.paywalled?this.onEmailUserAction.emit({type:g.e.ThrowBusinessPaywall}):this.creating$.next(!0)}setEmailIndex(e){this.selectedEmailIndex$.next(e),this.signatures&&this.signatures[e]&&this.signatures[e].signatures&&this.selectedSignature$.next(this.signatures[e].signatures[0])}saveSigntaure(e){this.selectedSignature$.value&&(this.paywalled?this.onEmailUserAction.emit({type:g.e.ThrowBusinessPaywall}):(this.selectedSignature$.next(Object.assign(Object.assign({},this.selectedSignature$.value),{signature:JSON.stringify(e)})),this.onEmailUserAction.emit({type:g.e.EditSignature,signatureId:this.selectedSignature$.value.id,signaturePayload:{signature:e},signature:this.selectedSignature$.value,userId:this.signatures[this.selectedEmailIndex$.value].user.id})))}createSignature(e){if(e)if(this.paywalled)this.onEmailUserAction.emit({type:g.e.ThrowBusinessPaywall});else{const t={name:e,signature:"",html:!1,is_default:!1,userid:this.signatures[this.selectedEmailIndex$.value].user.id},i={name:t.name,id:"pending",signature:t.signature,html:t.html,is_default:t.is_default,userid:this.signatures[this.selectedEmailIndex$.value].user.id},o=Object.assign(Object.assign({},this.signatures[this.selectedEmailIndex$.value]),{user:this.signatures[this.selectedEmailIndex$.value].user,signatures:[...this.signatures[this.selectedEmailIndex$.value].signatures,i]});this.signatures=this.signatures.map((e,t)=>t===this.selectedEmailIndex$.value?o:e),this.dataService.createEmailSignature(this.team.id,t).subscribe(e=>{this.selectId=e.signature_id,this.onEmailUserAction.emit({type:g.e.FetchEmailSignatures})},e=>{"ACCESS_140"===e.ECODE&&this.onEmailUserAction.emit({type:g.e.ThrowBusinessPaywall})})}}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(D.a),x.Wb(x.h))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-email-signatures"]],hostVars:2,hostBindings:function(e,t){2&e&&x.Ob("cu-email-signatures",!0)},inputs:{authedEmails:"authedEmails",signatures:"signatures",forceCreate:"forceCreate",paywalled:"paywalled",user:"user",team:"team"},outputs:{onEmailUserAction:"onEmailUserAction"},features:[x.Gb],decls:33,vars:24,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u;return e=$localize`:@@common_people␟4ee30b9285d5bf3610118b8b01d1731e0c4fed05␟5874794238234631522:People`,t=$localize`:@@cu-email-signatures__tooltip-msg_manage-signatures␟88209bc658e9195ea12a0b0912f2a08dd531ff8a␟2381010368281543662:Manage your members’ signatures and keep messaging unified.`,i=$localize`:@@cu-email-signatures__people-title-signatures␟a3c6f8f69cd9d703ccfc3590fadb1d128f6cbe04␟2692340461412356722: signatures `,o=$localize`:@@cu-email-signatures__create-input␟875b518b9a7443a5b0d94614afdf8a33555bb8f6␟3413638028025923179:Add signature`,n=$localize`:@@cu-email-signatures__form-placeholder_signature-name␟59ec63d624e10aee3e83ca81b7a201d4fe5f630e␟774281535952320185:signature name`,s=$localize`:@@common_default-1␟deca31fc7adad40d00bd63881d0c17124cd05beb␟6855462350544488601:default`,c=$localize`:@@common_add-signature␟875b518b9a7443a5b0d94614afdf8a33555bb8f6␟3413638028025923179:Add signature`,a=$localize`:@@cu-email-signatures__title-options_visual␟e79e029a68168aea9abb72092d46df051c2995c4␟1150396706215641106: Use rich text `,r=$localize`:@@cu-email-signatures__title-options_html␟35d3af543725448dc9c668a5e249323424052a3e␟6127706671967142130: Use HTML `,l=$localize`:@@cu-email-signatures__create-first-signature␟45d5c65e532213103ad268f9debc2f8a8adab048␟4731199117131104996:Start by adding a signature.`,d=$localize`:@@common_edit␟b9e806e7d3b649b80eca4cd6a03f98b3ba632d8d␟1397418538896823176: Edit `,u=$localize`:@@common_preview␟3298733287f1ed79ab22facfbf42e75c5c9137a3␟2542250492443621460: Preview `,[[1,"cu-email-signatures__container"],[1,"cu-email-signatures__people",3,"perfectScrollbar"],[1,"cu-email-signatures__people-title"],e,["icon","cu2-info-circle","cuTooltip",t],["cuDropdown",""],["userDropdown","dropdown"],["cuDropdownToggle","",1,"cu-email-signatures__people-toggle"],[3,"user","modifier"],[1,"cu-email-signatures__people-toggle-text"],["icon","cu2-angle-down-2",1,"cu-email-signatures__people-toggle-arrow"],[4,"cuDropdownMenu"],i,["class","cu-email-signatures__sigs-list",4,"ngIf"],[1,"cu-email-signatures__sigs"],[1,"cu-email-signatures__title"],["class","cu-email-signatures__title-options",4,"ngIf"],[1,"cu-email-signatures__sigs-body"],[1,"cu-email-signatures__sigs-content"],["class","cu-email-signatures__no-sigs",3,"click",4,"ngIf","ngIfElse"],["editSig",""],[1,"cu-email-signatures__people-body"],["class","cu-email-signatures__user",3,"cu-email-signatures__user_active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-email-signatures__user",3,"click"],[1,"cu-email-signatures__user-avatar",3,"modifier","users","readOnly"],[1,"cu-email-signatures__user-name"],[1,"cu-email-signatures__sigs-list"],["class","cu-email-signatures__detail",3,"cu-email-signatures__detail_selected","cu-email-signatures__detail_editing","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-email-signatures__create cu-email-signatures__detail","inputModifier","cu-email-signatures__create-input","placeholder",o,3,"text","editing","autosize","click","onCancel","onChange",4,"ngIf"],[1,"cu-email-signatures__detail",3,"click"],["placeholder",n,3,"text","editing","autosize","allowEmpty","selectText","onChange","onCancel"],[1,"cu-email-signatures__detail-text"],[4,"ngIf"],["cuDropdown","",1,"cu-email-signatures__actions",3,"dropdownPlacement","cuPreventDefault"],["cuDropdownToggle","","icon","ellipsis",1,"cu-email-signatures__actions-toggle"],["class","cu-dropdown__menu_overflow-hidden cu-email-signatures__actions-menu",4,"cuDropdownMenu"],s,[1,"cu-dropdown__menu_overflow-hidden","cu-email-signatures__actions-menu"],[3,"item","click"],[1,"cu-email-signatures__actions-menu-delete",3,"item","click"],["class","cu-email-signatures__actions-menu-separator",4,"ngIf"],[3,"item","onCheck"],[1,"cu-email-signatures__actions-menu-separator"],["inputModifier","cu-email-signatures__create-input","placeholder",o,1,"cu-email-signatures__create","cu-email-signatures__detail",3,"text","editing","autosize","click","onCancel","onChange"],c,[1,"cu-email-signatures__title-options"],[1,"cu-email-signatures__title-options-pill",3,"click"],a,r,[1,"cu-email-signatures__no-sigs",3,"click"],[1,"cu-email-signatures__no-sigs-content"],["src","./assets/images/illustrations/signature.svg"],l,[1,"cu-email-signatures__sigs-content-body"],["class","cu-email-signatures__preview",4,"ngIf"],[4,"ngIf","ngIfElse"],["showEditor",""],[1,"cu-email-signatures__preview"],[1,"cu-email-signatures__preview-option",3,"click"],d,u,["class","cu-email-signatures__textarea","cuAutoFocus","",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["displayPreview",""],["cuAutoFocus","",1,"cu-email-signatures__textarea",3,"ngModel","ngModelChange"],[1,"cu-email-signatures__textarea-preview",3,"innerHtml"],[3,"content","onSave"]]},template:function(e,t){if(1&e&&(x.cc(0,"div",0),x.cc(1,"div",1),x.cc(2,"div",2),x.ac(3),x.gc(4,3),x.Zb(),x.Xb(5,"div",4),x.bc(),x.cc(6,"div",5,6),x.cc(8,"div",7),x.Xb(9,"cu-avatar",8),x.vc(10,"async"),x.cc(11,"div",9),x.dd(12),x.vc(13,"username"),x.vc(14,"async"),x.bc(),x.Xb(15,"div",10),x.bc(),x.bd(16,Xe,3,2,"div",11),x.bc(),x.cc(17,"div",2),x.gc(18,12),x.bc(),x.bd(19,it,5,7,"div",13),x.vc(20,"async"),x.bc(),x.cc(21,"div",14),x.cc(22,"div",15),x.bd(23,ot,7,8,"div",16),x.vc(24,"async"),x.vc(25,"async"),x.bc(),x.cc(26,"div",17),x.cc(27,"div",18),x.bd(28,nt,5,0,"div",19),x.vc(29,"async"),x.vc(30,"async"),x.bd(31,dt,7,7,"ng-template",null,20,x.cd),x.bc(),x.bc(),x.bc(),x.bc()),2&e){const e=x.Rc(32);x.Ib(9),x.Dc("user",null==t.signatures[x.wc(10,7,t.selectedEmailIndex$)]?null:t.signatures[x.wc(10,7,t.selectedEmailIndex$)].user)("modifier","cu-avatar_20"),x.Ib(3),x.fd(" ",x.xc(13,9,null==t.signatures[x.wc(14,12,t.selectedEmailIndex$)]?null:t.signatures[x.wc(14,12,t.selectedEmailIndex$)].user,"Me")," "),x.Ib(7),x.Dc("ngIf",t.signatures&&t.signatures[x.wc(20,14,t.selectedEmailIndex$)]),x.Ib(4),x.Dc("ngIf",!(!t.signatures||!t.signatures[x.wc(24,16,t.selectedEmailIndex$)]||null==t.signatures[x.wc(25,18,t.selectedEmailIndex$)]||null==t.signatures[x.wc(25,18,t.selectedEmailIndex$)].signatures||!t.signatures[x.wc(25,18,t.selectedEmailIndex$)].signatures.length)),x.Ib(5),x.Dc("ngIf",!t.signatures||!t.signatures[x.wc(29,20,t.selectedEmailIndex$)]||!(null!=t.signatures[x.wc(30,22,t.selectedEmailIndex$)]&&null!=t.signatures[x.wc(30,22,t.selectedEmailIndex$)].signatures&&t.signatures[x.wc(30,22,t.selectedEmailIndex$)].signatures.length))("ngIfElse",e)}},directives:[ye.a,V.a,ce.a,we.b,xe.a,Ie.a,Te.a,P.q,P.p,re.a,Ce.a,De.a,Oe.a,L.c,Se.a,L.p,L.s,ze],pipes:[P.b,qe.a,Ge.a],styles:['.cu-email-signatures__container{display:flex;width:100%;border-radius:5px;min-height:350px;max-height:500px}.dark-theme .cu-email-signatures__container{border-color:#1e272e}.cu-email-signatures__preview{display:flex;border-bottom:1px solid #e4e4e4}.dark-theme .cu-email-signatures__preview{border-bottom-color:#1e272e}.cu-email-signatures__preview-option{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;display:flex;align-items:center;justify-content:center;height:36px;width:50%;cursor:pointer;color:rgba(41,45,52,.4);position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__preview-option{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__preview-option{color:rgba(213,214,215,.5)}.cu-email-signatures__preview-option:hover,.dark-theme .cu-email-signatures__preview-option:hover{color:var(--theme-main-color)}.cu-email-signatures__preview-option_active,.cu-email-signatures__preview-option_active:hover{color:#7b68ee;font-weight:500}@supports (--theme-main-color:#7b68ee){.cu-email-signatures__preview-option_active,.cu-email-signatures__preview-option_active:hover{color:var(--theme-main-color)}}.dark-theme .cu-email-signatures__preview-option_active,.dark-theme .cu-email-signatures__preview-option_active:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-email-signatures__preview-option_active,.dark-theme .cu-email-signatures__preview-option_active:hover{color:var(--theme-main-color)}}.cu-email-signatures__preview-option:first-of-type:after{content:"";position:absolute;right:0;top:6px;height:24px;width:1px;background:#e9ebf0}.dark-theme .cu-email-signatures__preview-option:first-of-type:after{background:#1e272e}.cu-email-signatures__user{display:flex;align-items:center;padding:0 6px;margin:5px 7px;cursor:pointer;border-radius:4px;height:32px}.cu-email-signatures__user .cu-avatar{width:22px!important;height:22px!important;border:none!important}.cu-email-signatures__user:hover{background:#f2f4f7}.dark-theme .cu-email-signatures__user:hover{background-color:#2b343b}.cu-email-signatures__user_active,.cu-email-signatures__user_active:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-signatures__user_active,.cu-email-signatures__user_active:hover{background:var(--theme-main-color)}}.dark-theme .cu-email-signatures__user_active,.dark-theme .cu-email-signatures__user_active:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-email-signatures__user_active,.dark-theme .cu-email-signatures__user_active:hover{background:var(--theme-main-color)}}.cu-email-signatures__user_active .cu-user-group.cu-user-group_sm .cu-avatar.cu-avatar_bordered,.cu-email-signatures__user_active:hover .cu-user-group.cu-user-group_sm .cu-avatar.cu-avatar_bordered{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-signatures__user_active .cu-user-group.cu-user-group_sm .cu-avatar.cu-avatar_bordered,.cu-email-signatures__user_active:hover .cu-user-group.cu-user-group_sm .cu-avatar.cu-avatar_bordered{border-color:var(--theme-main-color)}}.cu-email-signatures__user_active .cu-email-signatures__user-name,.cu-email-signatures__user_active:hover .cu-email-signatures__user-name,.dark-theme .cu-email-signatures__user_active .cu-email-signatures__user-name,.dark-theme .cu-email-signatures__user_active:hover .cu-email-signatures__user-name{color:#fff}.cu-email-signatures__user-name{font-weight:500;font-size:13px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__user-name{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__user-name{color:#d5d6d7}.cu-email-signatures__user-avatar{margin-right:5px}.cu-email-signatures__detail{display:flex;align-items:center;justify-content:space-between;border-radius:4px;cursor:pointer;padding:0 8px;margin:5px 0 5px -8px;height:32px;width:calc(100% + 16px)}.cu-email-signatures__detail:hover .cu-email-signatures__actions-toggle{display:block}.cu-email-signatures__detail-text{font-family:Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:10px;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;display:block}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__detail-text{font-family:var(--global-font-support)}}.cu-email-signatures__detail-text span{font-style:italic}.cu-email-signatures__detail .cu-editable{height:100%;min-width:0}.cu-email-signatures__detail .cu-editable__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;height:100%;background:transparent;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__detail .cu-editable__input{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__detail .cu-editable__input{background:transparent;color:#d5d6d7}.cu-email-signatures__detail:hover,.cu-email-signatures__detail_editing{background:#f2f4f7}.dark-theme .cu-email-signatures__detail:hover,.dark-theme .cu-email-signatures__detail_editing{background-color:#2b343b}.cu-email-signatures__detail_selected,.cu-email-signatures__detail_selected:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-signatures__detail_selected,.cu-email-signatures__detail_selected:hover{background:var(--theme-main-color)}}.dark-theme .cu-email-signatures__detail_selected,.dark-theme .cu-email-signatures__detail_selected:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-email-signatures__detail_selected,.dark-theme .cu-email-signatures__detail_selected:hover{background:var(--theme-main-color)}}.cu-email-signatures__detail_selected .cu-editable__input,.cu-email-signatures__detail_selected .cu-email-signatures__detail-text,.cu-email-signatures__detail_selected:hover .cu-editable__input,.cu-email-signatures__detail_selected:hover .cu-email-signatures__detail-text,.dark-theme .cu-email-signatures__detail_selected .cu-editable__input,.dark-theme .cu-email-signatures__detail_selected .cu-email-signatures__detail-text,.dark-theme .cu-email-signatures__detail_selected:hover .cu-editable__input,.dark-theme .cu-email-signatures__detail_selected:hover .cu-email-signatures__detail-text{color:#fff}.cu-email-signatures__detail_selected .cu-email-signatures__actions-toggle,.cu-email-signatures__detail_selected .cu-email-signatures__actions-toggle:hover,.cu-email-signatures__detail_selected .cu-email-signatures__actions.cu-dropdown_open .cu-email-signatures__actions-toggle,.cu-email-signatures__detail_selected:hover .cu-email-signatures__actions-toggle,.cu-email-signatures__detail_selected:hover .cu-email-signatures__actions-toggle:hover,.cu-email-signatures__detail_selected:hover .cu-email-signatures__actions.cu-dropdown_open .cu-email-signatures__actions-toggle{fill:#fff}.cu-email-signatures__detail_selected .cu-email-signatures__detail-text{font-weight:500}.cu-email-signatures__detail_selected .cu-email-signatures__detail-text span{color:#fff}.cu-email-signatures__actions-toggle{display:none;width:24px;height:24px;padding:5px;fill:#b9bec7}.cu-email-signatures__actions-toggle:hover,.cu-email-signatures__actions.cu-dropdown_open .cu-email-signatures__actions-toggle{fill:#7b68ee;display:block}@supports (--theme-main-color:#7b68ee){.cu-email-signatures__actions-toggle:hover,.cu-email-signatures__actions.cu-dropdown_open .cu-email-signatures__actions-toggle{fill:var(--theme-main-color)}}.cu-email-signatures__actions-menu{padding:8px 0}.cu-email-signatures__actions-menu-separator{width:100%;height:1px;background:#e9ebf0;margin:4px 0}.dark-theme .cu-email-signatures__actions-menu-separator{background:#1e272e}.cu-email-signatures__actions-menu-delete .icon{fill:#fd71af}.cu-email-signatures__title{display:flex;align-items:center;justify-content:space-between;height:51px;flex-shrink:0;padding:0 16px;border-bottom:1px solid #e4e4e4}.dark-theme .cu-email-signatures__title{border-bottom-color:#1e272e}.cu-email-signatures__title-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;text-transform:uppercase;white-space:nowrap;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__title-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__title-label{color:#828588}.cu-email-signatures__title-options{display:flex;align-items:center;border:1px solid #e9ebf0;border-radius:4px;margin-left:auto}.dark-theme .cu-email-signatures__title-options{border-color:#1e272e}.cu-email-signatures__title-options-pill{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:600;font-size:12px;line-height:1;height:24px;display:flex;align-items:center;justify-content:center;padding:0 8px;border-radius:4px;color:#b9bec7;cursor:pointer;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__title-options-pill{font-family:var(--global-font-support)}}.cu-email-signatures__title-options-pill_active{color:#fff;background:var(--theme-main-color)}.dark-theme .cu-email-signatures__title-options-pill{color:#d5d6d7}.cu-email-signatures__people{width:256px;border-right:1px solid #e4e4e4;background:#fff;padding:16px}.cu-os-win .cu-email-signatures__people{scrollbar-width:thin}.cu-os-win .cu-email-signatures__people::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-email-signatures__people::-webkit-scrollbar-track,.cu-os-win .cu-email-signatures__people::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-email-signatures__people::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-email-signatures__people::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-email-signatures__people::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-email-signatures__people::-webkit-scrollbar,.cu-os-win .dark-theme .cu-email-signatures__people::-webkit-scrollbar,.cu-os-win.dark-theme .cu-email-signatures__people::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-email-signatures__people::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-email-signatures__people::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-email-signatures__people::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-email-signatures__people::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-email-signatures__people::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-email-signatures__people::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-email-signatures__people::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .cu-email-signatures__people{border-color:#1e272e;background:#384047}.cu-email-signatures__people-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;text-transform:uppercase;white-space:nowrap;color:#b9bec7;margin-bottom:12px;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__people-title{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__people-title{color:#828588}.cu-email-signatures__people-title .icon{width:11px;height:11px;fill:#b9bec7;cursor:pointer;margin-left:7px}.cu-email-signatures__people-toggle{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;width:100%;height:36px;display:flex;align-items:center;border:1px solid #e4e4e4;background:transparent;padding:0 12px;border-radius:4px;cursor:pointer;margin-bottom:18px}.cu-email-signatures__people-toggle:hover{background:rgba(233,235,240,.5)}.dark-theme .cu-email-signatures__people-toggle:hover{background:rgba(43,52,59,.5)}.dark-theme .cu-email-signatures__people-toggle{border-color:#1e272e}.cu-email-signatures__people-toggle-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;flex-grow:1;display:block;max-width:140px;margin-left:12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__people-toggle-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__people-toggle-text{color:#d5d6d7}.cu-email-signatures__people-toggle-arrow{width:10px;height:12px;fill:#b9bec7;margin-left:auto}.cu-email-signatures__sigs{flex-grow:1;display:grid;grid-template-rows:auto 1fr}.cu-email-signatures__sigs-body{display:flex}.cu-email-signatures__sigs-list{width:100%;flex-shrink:0}.cu-email-signatures__sigs-content{display:grid;grid-template-rows:1fr auto;flex-grow:1;position:relative}.cu-email-signatures__sigs-content .cu-checkbox__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;text-transform:none}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__sigs-content .cu-checkbox__label{font-family:var(--global-font-support)}}.cu-email-signatures__sigs-content-body{display:flex;flex-direction:column;background-color:#fafbfc}.dark-theme .cu-email-signatures__sigs-content-body{background-color:#2b343b}.cu-email-signatures__no-sigs{cursor:pointer;margin:-51px 0 0;height:calc(100% + 51px);position:relative;z-index:9;background:#fff;display:flex;align-items:center;justify-content:center}.dark-theme .cu-email-signatures__no-sigs{background:#2b343b}.cu-email-signatures__no-sigs-content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:1;color:#7c828d;display:flex;flex-direction:column;align-items:center;justify-content:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__no-sigs-content{font-family:var(--global-font-support)}}.cu-email-signatures__no-sigs-content img{width:225px;height:auto;margin-bottom:30px}.dark-theme .cu-email-signatures__no-sigs-content{color:#828588}.cu-email-signatures__create{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;height:32px;display:flex;align-items:center;cursor:pointer;color:var(--theme-main-color)}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__create{font-family:var(--global-font-support)}}.cu-email-signatures__create .cu-email-signatures__create-input{background:#f2f4f7;border-radius:4px}.dark-theme .cu-email-signatures__create .cu-email-signatures__create-input{background-color:#2b343b}.cu-email-signatures__create.cu-editable_editing{background:#f2f4f7}.dark-theme .cu-email-signatures__create.cu-editable_editing{background-color:#2b343b}.cu-email-signatures__create.cu-editable_editing .cu-email-signatures__create-input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-size:12px;line-height:1;padding:0 8px;height:32px;font-weight:400;box-shadow:none}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__create.cu-editable_editing .cu-email-signatures__create-input{font-family:var(--global-font-support)}}.cu-email-signatures__create.cu-editable_editing .cu-email-signatures__create-input:-ms-input-placeholder{color:rgba(41,45,52,.5)}.cu-email-signatures__create.cu-editable_editing .cu-email-signatures__create-input::placeholder{color:rgba(41,45,52,.5)}.cu-email-signatures__create input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;height:26px;display:flex;align-items:center;padding:0;color:#343434;box-shadow:none!important}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__create input{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__create input{color:#d5d6d7}.cu-email-signatures__textarea,.cu-email-signatures__textarea-preview{width:100%;flex-grow:1;resize:none;border:none;padding:5px;background-color:#fafbfc}.dark-theme .cu-email-signatures__textarea,.dark-theme .cu-email-signatures__textarea-preview{background-color:#2b343b}.cu-email-signatures__textarea-preview{padding-top:7px}.cu-email-signatures__textarea-preview td[valign=bottom]{vertical-align:bottom}.cu-email-signatures__default{padding:15px 10px;display:flex;align-items:center;border-top:1px solid #e9ebf0}.dark-theme .cu-email-signatures__default{border-top-color:#1e272e}.cu-email-signatures__preview{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;cursor:pointer;color:var(--theme-main-color);background:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__preview{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__preview{background:#384047}.cu-email-signatures__type{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px 1;position:absolute;top:6px;right:6px;padding:5px;background:#e9ebf0;border-radius:3px;cursor:pointer;z-index:10000;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__type{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__type{background:#384047}.cu-email-signatures__type-html{color:#7b68ee;background:rgba(241,235,235,.43137254901960786)}@supports (--theme-main-color:#7b68ee){.cu-email-signatures__type-html{color:var(--theme-main-color)}}.cu-email-signatures__editor{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-signatures__editor{font-family:var(--global-font-support)}}.dark-theme .cu-email-signatures__editor .ql-editor.ql-blank:before{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})();var mt=i("QFII"),pt=i("EDFS"),ht=i("8r6i"),ft=i("Arn7");const bt=["paywallUnlimitedEmailTemplate"],gt=["paywallAuthEmailTemplate"],_t=["popover"];function vt(e,t){1&e&&x.Xb(0,"cu-loader")}function kt(e,t){1&e&&x.Yb(0)}function yt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-email-addons",14),x.qc("onCancel",function(){x.Uc(e);const t=x.uc(3);return t.purchaseAddOn$.next(!1),t.showAuthError$.next(!1)}),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.bc()}if(2&e){const e=x.uc(3);let t=null,i=null,o=null;x.Dc("totalAccounts",null==(t=x.wc(1,5,e.team$))?null:t.email_accounts)("availableAccounts",x.wc(2,7,e.emailAccountSpots$))("freeAccounts",(null==(i=x.wc(3,9,e.team$))?null:i.plan_id)===e.TeamPlan.FREE||(null==(i=x.wc(4,11,e.team$))?null:i.plan_id)===e.TeamPlan.UNLIMITED?1:2)("showAuthError",x.wc(5,13,e.showAuthError$))("teamId",null==(o=x.wc(6,15,e.team$))?null:o.id)}}function wt(e,t){1&e&&x.Yb(0)}function xt(e,t){if(1&e&&(x.bd(0,wt,1,0,"ng-container",7),x.vc(1,"async")),2&e){x.uc();const e=x.Rc(8),t=x.Rc(10),i=x.uc(2);x.Dc("ngIf",x.wc(1,3,i.authingImap$))("ngIfThen",e)("ngIfElse",t)}}function It(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-imap-auth",15),x.qc("onCompleteAuth",function(t){return x.Uc(e),x.uc(3).finishAuth(t)})("onCancel",function(){return x.Uc(e),x.uc(3).authingImap$.next(!1)})("onError",function(t){return x.Uc(e),x.uc(3).handleError(t)}),x.bc()}if(2&e){const e=x.uc(3);x.Dc("teamId",null==e.team?null:e.team.id)}}function Tt(e,t){1&e&&x.Yb(0)}function Ct(e,t){if(1&e&&(x.bd(0,Tt,1,0,"ng-container",7),x.vc(1,"async")),2&e){x.uc();const e=x.Rc(12),t=x.Rc(14),i=x.uc(2);x.Dc("ngIf",x.wc(1,3,i.authingOutlook$))("ngIfThen",e)("ngIfElse",t)}}function Dt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-outlook-auth",16),x.qc("onCompleteAuth",function(t){return x.Uc(e),x.uc(3).finishAuth(t)})("onCancel",function(){return x.Uc(e),x.uc(3).authingOutlook$.next(!1)})("onError",function(t){return x.Uc(e),x.uc(3).handleError(t)}),x.vc(1,"async"),x.bc()}if(2&e){const e=x.uc(3);x.Dc("teamId",null==e.team?null:e.team.id)("user",x.wc(1,2,e.user$))}}function Ot(e,t){1&e&&(x.ac(0),x.Xb(1,"img",21),x.cc(2,"div",22),x.gc(3,23),x.bc(),x.cc(4,"div",24),x.mc(5,25),x.Xb(6,"br"),x.jc(),x.bc(),x.Zb())}function St(e,t){1&e&&x.Xb(0,"cu-loader")}function Et(e,t){if(1&e){const e=x.dc();x.cc(0,"div",26),x.cc(1,"button",27),x.qc("click",function(){return x.Uc(e),x.uc(4).authGoogle()}),x.vc(2,"async"),x.vc(3,"async"),x.cc(4,"div",28),x.Xb(5,"div",29),x.bc(),x.cc(6,"div",30),x.gc(7,31),x.bc(),x.cc(8,"div",32),x.Xb(9,"div",33),x.Xb(10,"div",34),x.Xb(11,"div",35),x.bc(),x.bc(),x.bc(),x.cc(12,"div",36),x.cc(13,"button",27),x.qc("click",function(){return x.Uc(e),x.uc(4).authOffice365()}),x.vc(14,"async"),x.vc(15,"async"),x.cc(16,"div",37),x.Xb(17,"div",38),x.bc(),x.cc(18,"div",30),x.gc(19,39),x.bc(),x.cc(20,"div",32),x.Xb(21,"div",33),x.Xb(22,"div",34),x.Xb(23,"div",35),x.bc(),x.bc(),x.bc(),x.cc(24,"div",40),x.cc(25,"button",27),x.qc("click",function(){return x.Uc(e),x.uc(4).authingOutlook$.next(!0)}),x.vc(26,"async"),x.vc(27,"async"),x.cc(28,"div",41),x.Xb(29,"div",42),x.bc(),x.cc(30,"div",30),x.gc(31,43),x.bc(),x.cc(32,"div",32),x.Xb(33,"div",33),x.Xb(34,"div",34),x.Xb(35,"div",35),x.bc(),x.bc(),x.bc(),x.cc(36,"div",44),x.cc(37,"button",27),x.qc("click",function(){return x.Uc(e),x.uc(4).authingImap$.next(!0)}),x.vc(38,"async"),x.vc(39,"async"),x.cc(40,"div",45),x.Xb(41,"div",46),x.bc(),x.cc(42,"div",30),x.gc(43,47),x.bc(),x.cc(44,"div",32),x.Xb(45,"div",33),x.Xb(46,"div",34),x.Xb(47,"div",35),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(4);x.Ib(1),x.Ob("cu-btn_spinner",x.wc(2,12,e.authing$)),x.Dc("disabled",x.wc(3,14,e.authing$)),x.Ib(12),x.Ob("cu-btn_spinner",x.wc(14,16,e.authing$)),x.Dc("disabled",x.wc(15,18,e.authing$)),x.Ib(12),x.Ob("cu-btn_spinner",x.wc(26,20,e.authing$)),x.Dc("disabled",x.wc(27,22,e.authing$)),x.Ib(12),x.Ob("cu-btn_spinner",x.wc(38,24,e.authing$)),x.Dc("disabled",x.wc(39,26,e.authing$))}}function Pt(e,t){1&e&&(x.cc(0,"div",48),x.cc(1,"div",49),x.Xb(2,"div",50),x.bc(),x.cc(3,"div",51),x.gc(4,52),x.bc(),x.bc())}function jt(e,t){1&e&&(x.cc(0,"div",48),x.cc(1,"div",49),x.Xb(2,"div",50),x.bc(),x.cc(3,"div",51),x.gc(4,53),x.bc(),x.bc())}function At(e,t){if(1&e){const e=x.dc();x.cc(0,"div",54),x.cc(1,"button",55),x.qc("click",function(){return x.Uc(e),x.uc(4).cancelLinkEmails()}),x.gc(2,56),x.bc(),x.bc()}}function $t(e,t){if(1&e&&(x.bd(0,Ot,7,0,"ng-container",17),x.bd(1,St,1,0,"cu-loader",1),x.vc(2,"async"),x.bd(3,Et,48,28,"ng-template",null,18,x.cd),x.bd(5,Pt,5,0,"div",19),x.vc(6,"async"),x.vc(7,"async"),x.bd(8,jt,5,0,"div",19),x.vc(9,"async"),x.bd(10,At,3,0,"div",20),x.vc(11,"async")),2&e){const e=x.Rc(4),t=x.uc(3);x.Dc("ngIf",!t.onlyShowAuth),x.Ib(1),x.Dc("ngIf",x.wc(2,6,t.authing$))("ngIfElse",e),x.Ib(4),x.Dc("ngIf",x.wc(6,8,t.error$)&&!x.wc(7,10,t.maxed$)),x.Ib(3),x.Dc("ngIf",x.wc(9,12,t.maxed$)),x.Ib(2),x.Dc("ngIf",x.wc(11,14,t.emailsExist$)&&!t.onlyShowAuth)}}function Ut(e,t){if(1&e&&(x.ac(0),x.bd(1,kt,1,0,"ng-container",7),x.vc(2,"async"),x.bd(3,yt,7,17,"ng-template",null,8,x.cd),x.bd(5,xt,2,5,"ng-template",null,9,x.cd),x.bd(7,It,1,1,"ng-template",null,10,x.cd),x.bd(9,Ct,2,5,"ng-template",null,11,x.cd),x.bd(11,Dt,2,4,"ng-template",null,12,x.cd),x.bd(13,$t,12,16,"ng-template",null,13,x.cd),x.Zb()),2&e){const e=x.Rc(4),t=x.Rc(6),i=x.uc(2);x.Ib(1),x.Dc("ngIf",x.wc(2,3,i.purchaseAddOn$))("ngIfThen",e)("ngIfElse",t)}}function Rt(e,t){if(1&e&&(x.bd(0,Ut,15,5,"ng-container",1),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async")),2&e){const e=x.uc(),t=x.Rc(7);x.Dc("ngIf",e.onlyShowAuth&&!e.justAuthed||!x.wc(1,2,e.emailsExist$)||x.wc(2,4,e.linkEmail$)||x.wc(3,6,e.purchaseAddOn$))("ngIfElse",t)}}function Mt(e,t){1&e&&(x.cc(0,"div",67),x.gc(1,68),x.bc())}function Ft(e,t){if(1&e){const e=x.dc();x.cc(0,"div",71),x.qc("click",function(){x.Uc(e);const t=x.uc(3);return t.setSettingsType(t.EmailSettingsTypes.ACCOUNTS)}),x.gc(1,74),x.vc(2,"async"),x.bc()}if(2&e){const e=x.uc(3);x.Ob("cu-email-settings__header-item_active",x.wc(2,2,e.settingType$)===e.EmailSettingsTypes.ACCOUNTS)}}function Lt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",69),x.bd(1,Ft,3,4,"div",70),x.vc(2,"async"),x.cc(3,"div",71),x.qc("click",function(){x.Uc(e);const t=x.uc(2);return t.setSettingsType(t.EmailSettingsTypes.SIGNATURES)}),x.gc(4,72),x.vc(5,"async"),x.vc(6,"async"),x.bc(),x.cc(7,"div",71),x.qc("click",function(){x.Uc(e);const t=x.uc(2);return t.setSettingsType(t.EmailSettingsTypes.TEMPLATES)}),x.gc(8,73),x.vc(9,"async"),x.vc(10,"async"),x.bc(),x.bc()}if(2&e){const e=x.uc(2);x.Ib(1),x.Dc("ngIf",x.wc(2,5,e.canManageEmail$)),x.Ib(2),x.Ob("cu-email-settings__header-item_active",x.wc(5,7,e.settingType$)===e.EmailSettingsTypes.SIGNATURES||!x.wc(6,9,e.canManageEmail$)),x.Ib(4),x.Ob("cu-email-settings__header-item_active",x.wc(9,11,e.settingType$)===e.EmailSettingsTypes.TEMPLATES||!x.wc(10,13,e.canManageEmail$))}}function Nt(e,t){1&e&&(x.cc(0,"div",75),x.Xb(1,"img",76),x.cc(2,"div",77),x.gc(3,78),x.bc(),x.bc())}function zt(e,t){if(1&e){const e=x.dc();x.ac(0),x.cc(1,"cu-linked-email",80),x.qc("onEmailUserAction",function(t){return x.Uc(e),x.uc(3).onEmailUserAction.emit(t)}),x.vc(2,"async"),x.bc(),x.Zb()}if(2&e){const e=x.uc(3);x.Ib(1),x.Dc("emailUser",e.justAuthedUser)("alwaysExpand",!0)("currentUser",x.wc(2,5,e.user$))("selected",(null==e.justAuthedUser?null:e.justAuthedUser.userid)===(null==e.fromEmailUser?null:e.fromEmailUser.userid))("availableUsers",e.availableUsers)}}function qt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-linked-email",84),x.qc("onEmailUserAction",function(t){return x.Uc(e),x.uc(4).onEmailUserAction.emit(t)}),x.vc(1,"async"),x.bc()}if(2&e){const e=t.$implicit,i=x.uc(4);x.Dc("emailUser",e)("currentUser",x.wc(1,4,i.user$))("selected",(null==e?null:e.userid)===(null==i.fromEmailUser?null:i.fromEmailUser.userid))("availableUsers",i.availableUsers)}}function Gt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-linked-email",85),x.qc("onEmailUserAction",function(t){return x.Uc(e),x.uc(4).onEmailUserAction.emit(t)})("onRestore",function(){x.Uc(e);const i=t.$implicit;return x.uc(4).linkInactiveEmail(i)}),x.vc(1,"async"),x.bc()}if(2&e){const e=t.$implicit,i=x.uc(4);x.Dc("emailUser",e)("currentUser",x.wc(1,5,i.user$))("selected",(null==e?null:e.userid)===(null==i.fromEmailUser?null:i.fromEmailUser.userid))("availableUsers",i.availableUsers)("active",!1)}}function Vt(e,t){if(1&e&&(x.cc(0,"div",81),x.bd(1,qt,2,6,"cu-linked-email",82),x.vc(2,"async"),x.bd(3,Gt,2,7,"cu-linked-email",83),x.vc(4,"async"),x.bc()),2&e){const e=x.uc(3);x.Ib(1),x.Dc("ngForOf",x.wc(2,4,e.authedEmails$))("ngForTrackBy",e.trackByUser),x.Ib(2),x.Dc("ngForOf",x.wc(4,6,e.inactiveAuthedEmails$))("ngForTrackBy",e.trackByUser)}}function Bt(e,t){if(1&e&&(x.ac(0),x.bd(1,zt,3,7,"ng-container",1),x.bd(2,Vt,5,8,"ng-template",null,79,x.cd),x.Zb()),2&e){const e=x.Rc(3),t=x.uc(2);x.Ib(1),x.Dc("ngIf",t.justAuthed)("ngIfElse",e)}}function Xt(e,t){1&e&&x.Yb(0)}function Ht(e,t){if(1&e&&(x.bd(0,Xt,1,0,"ng-container",7),x.vc(1,"async")),2&e){x.uc();const e=x.Rc(11),t=x.Rc(13),i=x.uc();x.Dc("ngIf",x.wc(1,3,i.settingType$)===i.EmailSettingsTypes.SIGNATURES)("ngIfThen",e)("ngIfElse",t)}}function Wt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-email-signatures",86),x.qc("onEmailUserAction",function(t){return x.Uc(e),x.uc(2).onEmailUserAction.emit(t)}),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.bc()}if(2&e){const e=x.uc(2);x.Dc("authedEmails",x.wc(1,6,e.authedEmails$))("team",x.wc(2,8,e.team$))("signatures",x.wc(3,10,e.editableEmailSignatures$))("forceCreate",e.forceCreate)("paywalled",x.wc(4,12,e.paywalled$))("user",x.wc(5,14,e.user$))}}function Kt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",90),x.Xb(1,"img",91),x.cc(2,"div",92),x.gc(3,93),x.bc(),x.cc(4,"div",94),x.qc("click",function(){return x.Uc(e),x.uc(),x.Rc(3).openModal()}),x.dd(5," + "),x.ac(6),x.gc(7,95),x.Zb(),x.bc(),x.bc()}}function Qt(e,t){if(1&e){const e=x.dc();x.bd(0,Kt,8,0,"div",87),x.vc(1,"async"),x.cc(2,"cu-email-template-list",88,89),x.qc("onEmailUserAction",function(t){return x.Uc(e),x.uc(2).onEmailUserAction.emit(t)}),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.bc()}if(2&e){const e=x.uc(2);let t=null,i=null;x.Dc("ngIf",!(null!=(t=x.wc(1,5,e.templates$))&&t.length)),x.Ib(2),x.Ob("cu-hidden",!(null!=(i=x.wc(4,7,e.templates$))&&i.length)),x.Dc("paywalled",x.wc(5,9,e.paywalled$))("templates",x.wc(6,11,e.templates$))}}function Zt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",99),x.cc(1,"button",100),x.qc("click",function(){return x.Uc(e),x.uc(3).setPermissions()}),x.gc(2,101),x.bc(),x.bc()}}function Yt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",102,103),x.qc("click",function(){return x.Uc(e),x.uc(3).linkEmail()}),x.dd(2," + "),x.ac(3),x.gc(4,104),x.Zb(),x.bc(),x.cc(5,"div",105),x.gc(6,106),x.vc(7,"async"),x.vc(8,"async"),x.bc(),x.cc(9,"button",100),x.qc("click",function(){return x.Uc(e),x.uc(3).close()}),x.cc(10,"div",30),x.gc(11,107),x.bc(),x.bc()}if(2&e){const e=x.uc(3),t=x.Rc(13);let i=null;x.Dc("popover",t)("outsideClick",!0),x.Ib(8),x.kc(null==(i=x.wc(7,4,e.team$))?null:i.email_accounts)(x.wc(8,6,e.emailAccountSpots$)),x.hc(6)}}function Jt(e,t){if(1&e&&(x.cc(0,"div",96),x.bd(1,Zt,3,0,"div",97),x.bd(2,Yt,12,8,"ng-template",null,98,x.cd),x.bc()),2&e){const e=x.Rc(3),t=x.uc(2);x.Ib(1),x.Dc("ngIf",t.justAuthed)("ngIfElse",e)}}function ei(e,t){if(1&e){const e=x.dc();x.cc(0,"div",109),x.cc(1,"button",100),x.qc("click",function(){return x.Uc(e),x.uc(3).close()}),x.cc(2,"div",30),x.gc(3,110),x.bc(),x.bc(),x.bc()}}function ti(e,t){if(1&e&&x.bd(0,ei,4,0,"div",108),2&e){const e=x.uc(2);x.Dc("ngIf",e.inModal)}}function ii(e,t){if(1&e&&(x.cc(0,"div",119),x.Xb(1,"div",120),x.Xb(2,"span",121),x.bc()),2&e){const e=t.$implicit;x.Ib(1),x.Dc("icon",e.icon),x.Ib(1),x.Dc("innerHtml",e.name,x.Vc)}}function oi(e,t){if(1&e&&(x.cc(0,"a",122),x.vc(1,"async"),x.dd(2),x.bc()),2&e){const e=x.uc(3);let t=null;x.Dc("href","mailto:?subject="+(null==(t=x.wc(1,2,e.paywallModalMeta$))?null:t.emailSubject),x.Xc),x.Ib(2),x.fd(" ",e.emailButtonText," ")}}const ni=function(e){return["/",e,"settings","billing"]},si=function(){return{plan:"business"}};function ci(e,t){if(1&e){const e=x.dc();x.cc(0,"a",123),x.qc("click",function(){return x.Uc(e),x.uc(3).close(!0)}),x.vc(1,"spaceToDash"),x.vc(2,"async"),x.dd(3),x.bc()}if(2&e){const e=x.uc(3);let t=null;x.Mb("cu-paywall-popover__btn paywall-btn_",x.xc(1,6,null==(t=x.wc(2,9,e.paywallModalMeta$))?null:t.description,!0),""),x.Dc("routerLink",x.Hc(11,ni,null==e.team?null:e.team.id))("queryParams",(null==e.team?null:e.team.plan_id)===e.TeamPlan.UNLIMITED?x.Gc(13,si):null),x.Ib(3),x.fd(" ",e.upgradeButtonText," ")}}function ai(e,t){if(1&e&&(x.cc(0,"div",111),x.cc(1,"div",112),x.dd(2),x.vc(3,"async"),x.bc(),x.cc(4,"div",113),x.cc(5,"div",114),x.bd(6,ii,3,2,"div",115),x.vc(7,"async"),x.bc(),x.cc(8,"div",116),x.bd(9,oi,3,4,"a",117),x.bd(10,ci,4,14,"a",118),x.bc(),x.bc(),x.bc()),2&e){const e=x.uc(2);let t=null,i=null;x.Ib(2),x.fd(" ",null==(t=x.wc(3,5,e.paywallModalMeta$))?null:t.buttonText," "),x.Ib(4),x.Dc("ngForOf",null==(i=x.wc(7,7,e.paywallModalMeta$))?null:i.features)("ngForTrackBy",e.trackByIcon),x.Ib(3),x.Dc("ngIf",!((null==e.team?null:e.team.role)<3)),x.Ib(1),x.Dc("ngIf",(null==e.team?null:e.team.role)<3)}}function ri(e,t){if(1&e&&(x.bd(0,Mt,2,0,"div",57),x.bd(1,Lt,11,15,"div",58),x.cc(2,"div",59),x.bd(3,Nt,4,0,"div",60),x.vc(4,"async"),x.bd(5,Bt,4,2,"ng-container",1),x.vc(6,"async"),x.vc(7,"async"),x.bd(8,Ht,2,5,"ng-template",null,61,x.cd),x.bd(10,Wt,6,16,"ng-template",null,62,x.cd),x.bd(12,Qt,7,13,"ng-template",null,63,x.cd),x.bd(14,Jt,4,2,"div",64),x.vc(15,"async"),x.bd(16,ti,1,1,"ng-template",null,65,x.cd),x.bc(),x.bd(18,ai,11,9,"div",66),x.vc(19,"async")),2&e){const e=x.Rc(9),t=x.Rc(17),i=x.uc();x.Dc("ngIf",i.inModal&&!i.onlyShowAuth),x.Ib(1),x.Dc("ngIf",!i.justAuthed&&!i.onlyShowAuth||!i.onlyShowAuth),x.Ib(1),x.Ob("cu-email-settings__container-just-authed",i.justAuthed),x.Ib(1),x.Dc("ngIf",x.wc(4,10,i.settingType$)===i.EmailSettingsTypes.ACCOUNTS&&i.justAuthed&&!i.onlyShowAuth),x.Ib(2),x.Dc("ngIf",x.wc(6,12,i.canManageEmail$)&&x.wc(7,14,i.settingType$)===i.EmailSettingsTypes.ACCOUNTS)("ngIfElse",e),x.Ib(9),x.Dc("ngIf",x.wc(15,16,i.settingType$)===i.EmailSettingsTypes.ACCOUNTS)("ngIfElse",t),x.Ib(4),x.Dc("ngIf",x.wc(19,18,i.paywalled$))}}function li(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-paywall-popover",124),x.qc("upgradeClicked",function(){return x.Uc(e),x.uc().clickedUpgrade()}),x.bc()}if(2&e){const e=x.uc();x.Dc("badge",e.emailPaywallUnlimitedModalMeta.badge)("title","")("image",e.emailPaywallUnlimitedModalMeta.image)("text",e.emailPaywallUnlimitedModalMeta.moreAccounts)("upgradeButtonText",e.emailPaywallUnlimitedModalMeta.buttonText)("emailSubject",e.emailPaywallUnlimitedModalMeta.emailSubject)("learnMore",e.emailPaywallUnlimitedModalMeta.learnMore)("features",e.emailPaywallUnlimitedModalMeta.features)("textBelowImage",e.emailPaywallUnlimitedModalMeta.textBelowImage)("flipBadge",!0)("imageWidth",180)}}function di(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-paywall-popover",125),x.qc("upgradeClicked",function(){return x.Uc(e),x.uc().clickedUpgrade()}),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.vc(7,"async"),x.bc()}if(2&e){const e=x.uc();let t=null,i=null,o=null,n=null,s=null,c=null,a=null;x.Dc("badge",null==(t=x.wc(1,9,e.paywallModalMeta$))?null:t.badge)("title","")("image",null==(i=x.wc(2,11,e.paywallModalMeta$))?null:i.image)("text",null==(o=x.wc(3,13,e.paywallModalMeta$))?null:o.moreAccounts)("upgradeButtonText",null==(n=x.wc(4,15,e.paywallModalMeta$))?null:n.buttonText)("emailSubject",null==(s=x.wc(5,17,e.paywallModalMeta$))?null:s.emailSubject)("learnMore",null==(c=x.wc(6,19,e.paywallModalMeta$))?null:c.learnMore)("features",null==(a=x.wc(7,21,e.paywallModalMeta$))?null:a.features)("flipBadge",!0)}}function ui(e,t){1&e&&(x.cc(0,"div",126),x.gc(1,127),x.bc())}let mi=(()=>{class e{constructor(e,t,i,o,c,d){this.dataService=e,this.store=t,this.cdr=i,this.modal=o,this.sharedTaskService=c,this.gapiConfig=d,this.authedEmails$=this.store.select(a.getAuthedEmails),this.inactiveAuthedEmails$=this.store.select(a.getInactiveAuthedEmails),this.emailsExist$=Object(_.a)([this.authedEmails$,this.inactiveAuthedEmails$]).pipe(Object(r.a)(([e,t])=>!!(e&&e.length||t&&t.length))),this.fetchingAuthed$=this.store.select(a.getFetchingAuthed),this.user$=this.store.select(a.getUser),this.templates$=this.store.select(a.getEmailTemplates),this.emailSignatures$=this.store.select(a.getEmailSignatures),this.EmailSettingsTypes=g.d,this.settingType$=new v.a(g.d.ACCOUNTS),this.team$=new v.a(null),this.paywalled$=this.team$.pipe(Object(l.a)(e=>!!e),Object(r.a)(e=>e.plan_id===n.f.FREE||e.plan_id===n.f.UNLIMITED)),this.paywallModalMeta$=this.team$.pipe(Object(l.a)(e=>!!e),Object(r.a)(e=>e.plan_id===n.f.FREE?g.j:g.i)),this.canManageEmail$=new v.a(!1),this.editableEmailSignatures$=Object(_.a)([this.user$,this.emailSignatures$,this.canManageEmail$]).pipe(Object(r.a)(([e,t,i])=>{t=i?[...(t||[]).filter(t=>+t.user.id==+e.id),...(t||[]).filter(t=>+t.user.id!=+e.id)]:(t||[]).filter(t=>+t.user.id==+e.id);const o=Object(C.a)(t.filter(e=>e.user.username),[e=>e.user.username.toLowerCase()]),n=Object(C.a)(t.filter(e=>!e.user.username),[e=>{var t;return null===(t=e.user.email)||void 0===t?void 0:t.toLowerCase()}]);return(t=[...o,...n]).map(e=>Object.assign(Object.assign({},e),{canAdd:!0}))})),this.emailAccountSpots$=this.team$.pipe(Object(r.a)(e=>{if(!e)return 1;let t=e.plan_id===n.f.FREE||e.plan_id===n.f.UNLIMITED?1:2;if(e.plan_id!==n.f.FREE&&e.addons&&e.addons.length){const i=e.addons.find(e=>e.addon_id===n.a.EMAIL);i&&(t+=i.total||0)}return t})),this.linkEmail$=new v.a(!1),this.purchaseAddOn$=new v.a(!1),this.showAuthError$=new v.a(!1),this.authing$=new v.a(!1),this.error$=new v.a(!1),this.maxed$=new v.a(!1),this.authingImap$=new v.a(!1),this.authingOutlook$=new v.a(!1),this.destroy$=new k.a,this.justAuthed=!1,this.SCOPES=["https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/gmail.readonly","https://www.googleapis.com/auth/contacts.readonly"],this.TeamPlan=n.f,this.emailPaywallBusinessModalMeta=g.i,this.emailPaywallUnlimitedModalMeta=g.j,this.emailButtonText=$localize`:@@common_ask-admin-team-upgrade:Ask team admin to upgrade`,this.upgradeButtonText=$localize`:@@common_upgrade:Upgrade`,this.trackByIcon=Object(s.d)("icon"),this.canManageEmail=!1,this.forceCreate=!1,this.forceAdd=!1,this.inModal=!0,this.onlyShowAuth=!1,this.onEmailUserAction=new x.o,this.onCompletedAuth=new x.o,this.gauthLoaded=Object(I.d)().then(()=>gapi.auth2.init(this.gapiConfig))}ngOnInit(){this.onEmailUserAction.emit({type:g.e.FetchAuthedEmails}),this.onEmailUserAction.emit({type:g.e.FetchEmailTemplates})}ngOnChanges(e){e.canManageEmail&&this.canManageEmail&&this.canManageEmail$.next(this.canManageEmail),e.settingType&&this.settingType$.next(this.settingType),e.team&&this.team$.next(this.team),e.forceAdd&&this.forceAdd&&this.linkEmail()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}setSettingsType(e){this.settingType$.next(e)}trackByUser(e,t){return t.id}close(e=!1){this.modal.close(),e&&this.sharedTaskService.closeTask()}authOffice365(){this.authing$.next(!0),this.error$.next(!1),this.maxed$.next(!1);const e=window.location.origin+"/assets/html/outlook-callback.html";T.open(`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=6d710c13-1fac-4277-90cd-50d3e3953aef&response_type=code&redirect_uri=${e}&response_mode=query&scope=IMAP.AccessAsUser.All%20POP.AccessAsUser.All%20SMTP.Send offline_access User.Read EAS.AccessAsUser.All EWS.AccessAsUser.All profile User.Read openid Contacts.Read&prompt=select_account`,{width:500,height:560,originRegexp:new RegExp("^dont-match-me$")}).then(t=>{const i=t.search.split("=")[1].split("&")[0];this.dataService.authOffice365(this.team.id,{code:i,redirect_uri:e}).pipe(Object(d.a)(()=>this.dataService.getAuthedEmail(this.team.id)),Object(u.a)(()=>this.authing$.next(!1)),Object(m.a)(e=>Object(y.a)(e))).subscribe(e=>{this.finishAuth(e)},this.handleError.bind(this))},e=>{this.authing$.next(!1),this.error$.next(!0)})}authGoogle(){this.authing$.next(!0),this.error$.next(!1),this.maxed$.next(!1),Object(w.a)(this.gauthLoaded).pipe(Object(d.a)(()=>gapi.auth2.getAuthInstance().grantOfflineAccess({prompt:"consent",scope:this.SCOPES.join(" ")})),Object(d.a)(e=>this.dataService.authGmail(this.team.id,{code:e.code})),Object(d.a)(()=>this.dataService.getAuthedEmail(this.team.id)),Object(u.a)(()=>this.authing$.next(!1)),Object(m.a)(e=>Object(y.a)(e))).subscribe(e=>{this.finishAuth(e)},this.handleError.bind(this))}finishAuth(e){this.authedEmails$.pipe(Object(p.a)(1)).subscribe(t=>{const i=(t||[]).reduce((e,t)=>(e[t.account_id]=!0,e),{}),n=(e.accounts||[]).filter(e=>Object(o.sb)(e.nylas_state));this.store.dispatch(new c.Vc({authedEmails:n})),this.dataService.getTeamById(this.team.id).subscribe(e=>this.store.dispatch(new c.rk(e))),this.linkEmail$.next(!1),this.justAuthed=!0;let s=-1;s=n.findIndex(this.restoreUser?e=>e.email.toLowerCase()===this.restoreUser.email.toLowerCase():e=>!i[e.account_id]),this.justAuthedUser=n[-1===s?n.length-1:s],this.restoreUser=null,this.authing$.next(!1),this.cdr.detectChanges()})}linkEmail(){return e=this,void 0,i=function*(){const e=yield this.emailAccountSpots$.pipe(Object(h.a)()).toPromise();this.team.email_accounts<e?this.linkEmail$.next(!0):this.team.plan_id===n.f.FREE?this.openPaywallModal():this.team.role===b.f.USER?this.popover&&this.popover.show():(this.purchaseAddOn$.next(!0),this.showAuthError$.next(!0))},new((t=void 0)||(t=Promise))(function(o,n){function s(e){try{a(i.next(e))}catch(t){n(t)}}function c(e){try{a(i.throw(e))}catch(t){n(t)}}function a(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t(function(e){e(i)})).then(s,c)}a((i=i.apply(e,[])).next())});var e,t,i}linkInactiveEmail(e){this.restoreUser=e,this.linkEmail$.next(!0)}cancelLinkEmails(){this.error$.next(!1),this.authing$.next(!1),this.linkEmail$.next(!1)}openPaywallModal(){this.modal.open({modifier:"cu-paywall-popover__modal cu-paywall-popover__modal-business-email",headerModifier:"cu-modal__header-paywall",dialogModifier:"cu-modal__dialog-paywall",content:this.paywallUnlimitedEmailTemplate})}openPaywallAuthModal(){this.modal.open({modifier:"cu-paywall-popover__modal cu-paywall-popover__modal-business-email",headerModifier:"cu-modal__header-paywall",dialogModifier:"cu-modal__dialog-paywall",content:this.paywallAuthEmailTemplate})}clickedUpgrade(){this.modal.closeAll(),this.sharedTaskService.closeTask()}setPermissions(){this.justAuthed=!1,this.onCompletedAuth.emit(this.justAuthedUser.account_id)}handleError(e){this.error$.next(!0),this.authing$.next(!1),!e||"NAUTH_019"!==e.ECODE&&"NAUTH_019"!==e.ECODE||(this.team.plan_id===n.f.FREE||this.team.plan_id===n.f.UNLIMITED&&this.team.role===b.f.USER?this.openPaywallAuthModal():this.team.role===b.f.USER?this.maxed$.next(!0):(this.purchaseAddOn$.next(!0),this.showAuthError$.next(!0)))}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(D.a),x.Wb(O.Store),x.Wb(x.h),x.Wb(S.a),x.Wb(E.a),x.Wb(f.b))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-email-settings"]],viewQuery:function(e,t){if(1&e&&(x.jd(bt,3),x.jd(gt,3),x.jd(_t,1)),2&e){let e;x.Qc(e=x.rc())&&(t.paywallUnlimitedEmailTemplate=e.first),x.Qc(e=x.rc())&&(t.paywallAuthEmailTemplate=e.first),x.Qc(e=x.rc())&&(t.popover=e.first)}},inputs:{availableUsers:"availableUsers",team:"team",fromEmailUser:"fromEmailUser",canManageEmail:"canManageEmail",forceCreate:"forceCreate",forceAdd:"forceAdd",settingType:"settingType",inModal:"inModal",onlyShowAuth:"onlyShowAuth"},outputs:{onEmailUserAction:"onEmailUserAction",onCompletedAuth:"onCompletedAuth"},features:[x.Gb],decls:14,vars:6,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y;return e=$localize`:@@cu-email-settings__link-title_send-email-outside-clickup␟182d5068f4080a815a73896fe1fc18707d042247␟7794099671522803606: Send email to anyone outside of ClickUp `,t=$localize`:@@cu-email-settings__link-text_email-replies␟859aa259a4110e832ade60de3664fefea96a9dde␟255578896445653104: Email replies update in real-time. You can reply from${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:LINE_BREAK: here or from your normal email client. `,i=$localize`:@@auth_google␟cb92432ae2088dcf8e76043b7c1a3664ac0afa96␟6697116521536843544: Sign in with Google `,o=$localize`:@@auth_ms-office-365␟74cc8a65c8b55a8c2db4f6fe8cc552ae260c4a4c␟481232303466802673: Sign in with Microsoft/Office 365 `,n=$localize`:@@auth_ms-outlook␟9467861edbd19688df3dce970c968ecaef263af6␟2320797396563173795: Sign in with Outlook `,s=$localize`:@@auth_imap␟72b965dad24c2f04d6d40455c5626488e345872e␟1115895713319881205: Sign in with IMAP `,c=$localize`:@@errors_external-email-auth-error␟d86932122755e0c64df1768dc271b2444ca34c3d␟7059864625132955611: Unable to complete auth! Please try again. `,a=$localize`:@@errors_workspace-max-email-accounts␟d507e5ad40fafd149a6240efcc60ec1b0a75ee03␟8151019814288025449: Whoops! Your Workspace has maxed out available email accounts. Ask an admin to purchase more. `,r=$localize`:@@common_cancel␟17a9d3860d9ad593dd09a9f934e03999d9e76a7a␟5404873161894324483: Cancel `,l=$localize`:@@common_email-settings␟904582d2154c533a2b170985c0c8adb1d6b74899␟70752354321672467: Email Settings `,d=$localize`:@@cu-email-settings__header-item-name_signatures␟68b226d23fbd64dad48cce2f55fc76f971b3f0da␟6395824686727745806: Signatures `,u=$localize`:@@common_templates␟c33b4a8d9bf6a63e018a7251d10bf3aa57f907da␟5354252237085771228: Templates `,m=$localize`:@@cu-email-settings__header-item-name_email-accounts␟ce4870c8b0adb9b8d0a9cae6c8ec62c43f471472␟8402540755373736476: Email Accounts `,p=$localize`:@@cu-email-settings__just-authed-text␟4cb86a2d484a4120b33042b9e99d30d9eeed96f3␟1828170291145948034: Email account is linked `,h=$localize`:@@cu-email-settings__empty-templates␟e750576041de0f07ef61d25b4bac44cc71a3156f␟4056153948117575354: There are no templates that you can use. `,f=$localize`:@@cu-email-settings__add-template␟7c8452d7fa1b96c36b2d61e017fb78ceb652a4c6␟7308826808299076537:Add Template`,b=$localize`:button text@@common_done--button-text␟2aabc95c9d6eaba8623b10b9d52515eda0bcc205␟7784364853056952361: Done `,g=$localize`:@@common_add-new␟52cb3a1dbc20365867f39819932e43d19542474d␟4948407374074297419:Add new`,_=$localize`:@@cu-email-settings__link-linked_email-accounts-linked-count␟3fe402d8fdce209bb1f8a9f4dc2d2115fdb8782d␟4862215264638481824: (${"\ufffd0\ufffd"}:INTERPOLATION:/${"\ufffd1\ufffd"}:INTERPOLATION_1: accounts linked) `,v=$localize`:@@common_save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,k=$localize`:@@common_save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,y=$localize`:@@errors_workspace-max-email-accounts␟6fb82dda456aa03fe4b983e47fa578e035c12ffa␟3102641676165338769: Whoops! Your Workspace has maxed out available email accounts. Ask an admin to purchase more. `,[[1,"cu-email-settings"],[4,"ngIf","ngIfElse"],["allFetched",""],["showSettings",""],["paywallUnlimitedEmailTemplate",""],["paywallAuthEmailTemplate",""],["addonPopover",""],[4,"ngIf","ngIfThen","ngIfElse"],["purchaseAddOnTemplate",""],["notPurchaseAddOnTemplate",""],["imapAuthTemplate",""],["notImapAuthTemplate",""],["outlookAuthTemplate",""],["allOptions",""],[3,"totalAccounts","availableAccounts","freeAccounts","showAuthError","teamId","onCancel"],[3,"teamId","onCompleteAuth","onCancel","onError"],[3,"teamId","user","onCompleteAuth","onCancel","onError"],[4,"ngIf"],["showAuthOptions",""],["class","cu-form__error",4,"ngIf"],["class","cu-api-integration__btn-container dashboard",4,"ngIf"],["src","./assets/images/illustrations/email-laptop.svg",1,"cu-email-settings__link-img"],[1,"cu-email-settings__link-title"],e,[1,"cu-email-settings__link-text"],t,[1,"cu-email-settings__link-button","cu-email-settings__link-button-google"],[1,"cu-btn",3,"disabled","click"],[1,"cu-email-settings__link-button-icon","cu-email-settings__link-button-icon-google"],["icon","google"],[1,"cu-btn__text"],i,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],[1,"cu-email-settings__link-button","cu-email-settings__link-button-microsoft"],[1,"cu-email-settings__link-button-icon","cu-email-settings__link-button-icon-microsoft"],["icon","office-365"],o,[1,"cu-email-settings__link-button","cu-email-settings__link-button-outlook"],[1,"cu-email-settings__link-button-icon","cu-email-settings__link-button-icon-outlook"],["icon","outlook-2"],n,[1,"cu-email-settings__link-button","cu-email-settings__link-button-imap"],[1,"cu-email-settings__link-button-icon","cu-email-settings__link-button-icon-imap"],["icon","email"],s,[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],c,a,[1,"cu-api-integration__btn-container","dashboard"],[1,"cu-btn","cu-conflict-management__cancel","cu-api-integration__btn","dashboard",3,"click"],r,["class","cu-email-settings__title",4,"ngIf"],["class","cu-email-settings__header",4,"ngIf"],[1,"cu-email-settings__container"],["class","cu-email-settings__just-authed",4,"ngIf"],["notAccounts",""],["showSignatures",""],["showTemplates",""],["class","cu-email-settings__link cu-email-settings__link-accounts",4,"ngIf","ngIfElse"],["onSigs",""],["class","cu-email-settings__upgrade",4,"ngIf"],[1,"cu-email-settings__title"],l,[1,"cu-email-settings__header"],["class","cu-email-settings__header-item",3,"cu-email-settings__header-item_active","click",4,"ngIf"],[1,"cu-email-settings__header-item",3,"click"],d,u,m,[1,"cu-email-settings__just-authed"],["src","./assets/images/illustrations/email-check.svg"],[1,"cu-email-settings__just-authed-text"],p,["showAllAuthedEmails",""],[3,"emailUser","alwaysExpand","currentUser","selected","availableUsers","onEmailUserAction"],[1,"cu-email-settings__container-emails"],[3,"emailUser","currentUser","selected","availableUsers","onEmailUserAction",4,"ngFor","ngForOf","ngForTrackBy"],[3,"emailUser","currentUser","selected","availableUsers","active","onEmailUserAction","onRestore",4,"ngFor","ngForOf","ngForTrackBy"],[3,"emailUser","currentUser","selected","availableUsers","onEmailUserAction"],[3,"emailUser","currentUser","selected","availableUsers","active","onEmailUserAction","onRestore"],[3,"authedEmails","team","signatures","forceCreate","paywalled","user","onEmailUserAction"],["class","cu-email-settings__container-empty-template",4,"ngIf"],[3,"paywalled","templates","onEmailUserAction"],["emailTemplateList",""],[1,"cu-email-settings__container-empty-template"],["src","./assets/images/illustrations/no-email-templates.svg","alt",""],[1,"cu-email-settings__container-empty-template-header"],h,[1,"cu-email-settings__container-empty-template-button",3,"click"],f,[1,"cu-email-settings__link","cu-email-settings__link-accounts"],["class","cu-email-settings__just-authed-btn",4,"ngIf","ngIfElse"],["showAddAccounts",""],[1,"cu-email-settings__just-authed-btn"],[1,"cu-btn",3,"click"],b,["placement","top","container","body","triggers","",1,"cu-email-settings__link-plus",3,"popover","outsideClick","click"],["popover","bs-popover"],g,[1,"cu-email-settings__link-linked"],_,v,["class","cu-email-settings__link cu-email-settings__link-buttons",4,"ngIf"],[1,"cu-email-settings__link","cu-email-settings__link-buttons"],k,[1,"cu-email-settings__upgrade"],[1,"cu-email-settings__upgrade-title"],[1,"cu-email-settings__upgrade-body"],[1,"cu-paywall-modal__feature"],["class","cu-paywall-modal__feature-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-email-settings__upgrade-btn"],["class","cu-paywall-popover__btn",3,"href",4,"ngIf"],[3,"class","routerLink","queryParams","click",4,"ngIf"],[1,"cu-paywall-modal__feature-item"],[1,"cu-paywall-modal__feature-icon",3,"icon"],[3,"innerHtml"],[1,"cu-paywall-popover__btn",3,"href"],[3,"routerLink","queryParams","click"],[3,"badge","title","image","text","upgradeButtonText","emailSubject","learnMore","features","textBelowImage","flipBadge","imageWidth","upgradeClicked"],[3,"badge","title","image","text","upgradeButtonText","emailSubject","learnMore","features","flipBadge","upgradeClicked"],[1,"cu-error-popover"],y]},template:function(e,t){if(1&e&&(x.cc(0,"div",0),x.bd(1,vt,1,0,"cu-loader",1),x.vc(2,"async"),x.vc(3,"async"),x.bd(4,Rt,4,8,"ng-template",null,2,x.cd),x.bd(6,ri,20,20,"ng-template",null,3,x.cd),x.bc(),x.bd(8,li,1,11,"ng-template",null,4,x.cd),x.bd(10,di,8,23,"ng-template",null,5,x.cd),x.bd(12,ui,2,0,"ng-template",null,6,x.cd)),2&e){const e=x.Rc(5);x.Ib(1),x.Dc("ngIf",x.wc(2,2,t.fetchingAuthed$)&&!x.wc(3,4,t.emailsExist$))("ngIfElse",e)}},directives:[P.q,j.a,M,G,te,V.a,ve,P.p,ut,mt.a,pt.c,A.k,ht.a],pipes:[P.b,ft.a],styles:['.cu-paywall-modal{margin:0 -50px -50px;display:flex;position:relative;justify-content:space-between}.cu-paywall-modal__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#7b68ee;display:flex;align-items:center;color:#fff;font:600 13px/1 Gotham Pro,Proxima Nova,arial,serif;height:34px;border-radius:17px;padding:0 14px;position:absolute;top:-97px;left:50%;transform:translateX(-50%);box-shadow:0 0 8px 0 rgba(0,0,0,.08)}@supports (--theme-main-color:#7b68ee){.cu-paywall-modal__label{background:var(--theme-main-color)}}.cu-paywall-modal__content{width:520px;flex-shrink:0;padding:0 50px 50px 65px;display:flex;flex-direction:column}.cu-paywall-modal__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#4a4a4a;font:500 35px/37px Gotham Pro,Proxima Nova,arial,serif;margin-bottom:25px}.dark-theme .cu-paywall-modal__title{color:#d5d6d7}.cu-paywall-modal__description{font:400 13px/1.4 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:30px;color:#4f4f4f}.dark-theme .cu-paywall-modal__description{color:#d5d6d7}.cu-paywall-modal__description span{font-weight:500}.cu-paywall-modal__feature{margin-bottom:20px}.cu-paywall-modal__feature-item{display:flex;font:500 14px/20px Gotham Pro,Proxima Nova,arial,serif;margin-bottom:20px;color:#4f4f4f}.dark-theme .cu-paywall-modal__feature-item{color:#d5d6d7}.cu-paywall-modal__feature-item-link{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;border-bottom:1px dashed #4f4f4f}.dark-theme .cu-paywall-modal__feature-item-link{border-bottom-color:#d5d6d7}.cu-paywall-modal__feature-item-link:hover{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-paywall-modal__feature-item-link:hover{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-paywall-modal__feature-icon{fill:#7b68ee;width:20px;height:20px;margin-right:10px}@supports (--theme-main-color:#7b68ee){.cu-paywall-modal__feature-icon{fill:var(--theme-main-color)}}.cu-paywall-modal__notes{border-radius:6px;background:hsla(0,0%,84.7%,.2);padding:25px 20px 20px;margin-bottom:40px}.dark-theme .cu-paywall-modal__notes{background:#2b343b}.cu-paywall-modal__notes-item{display:flex;margin-bottom:10px}.cu-paywall-modal__notes-item-number{display:flex;align-items:center;justify-content:center;width:24px;height:24px;flex-shrink:0;border-radius:50%;background:#fff;margin-right:8px;color:#4a4a4a;font:400 13px/24px Gotham Pro,Proxima Nova,arial,serif;box-shadow:0 1px 4px 0 rgba(0,0,0,.04);padding-left:3px}.dark-theme .cu-paywall-modal__notes-item-number{background:#1e272e;color:#abaeb0}.cu-paywall-modal__notes-item-text{color:#4a4a4a;font:400 15px/21px Gotham Pro,Proxima Nova,arial,serif;margin:2px 0}.dark-theme .cu-paywall-modal__notes-item-text{color:#d5d6d7}.cu-paywall-modal__notes-item-text b{font-weight:500}.cu-paywall-modal__btn,.cu-paywall-modal a.cu-paywall-modal__btn{line-height:1}.cu-paywall-modal__illustration{flex-grow:1;background-position:0 0;background-size:870px;background-repeat:no-repeat}.cu-paywall-modal__video{display:flex;align-items:center;justify-content:center;flex-grow:1;margin-right:65px}.cu-paywall-modal.cu-paywall-modal-time-tracker .cu-paywall-modal__illustration{background-size:675px}.cu-paywall-popover{display:flex;flex-direction:column;align-items:center;padding:30px 35px 25px;min-width:290px;max-width:380px;overflow:hidden;position:relative;border-radius:4px}.dark-theme .cu-paywall-popover{background:#384047}.cu-paywall-popover__text-below-image,.cu-paywall-popover__title{font:500 17px/1.4 Gotham Pro,Proxima Nova,arial,serif;color:#292d34;text-align:center;margin-bottom:5px}.dark-theme .cu-paywall-popover__text-below-image,.dark-theme .cu-paywall-popover__title{color:#abaeb0}.cu-paywall-popover__text-below-image{padding:0 30px 15px}.cu-paywall-popover__description{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1.4 Gotham Pro,Proxima Nova,arial,serif;color:#828282;text-align:center;margin-bottom:20px}.dark-theme .cu-paywall-popover__description{color:#d5d6d7}.cu-paywall-popover__image{margin-bottom:25px}.cu-paywall-popover__image img{max-width:280px;max-height:200px}.cu-paywall-popover__video{margin-bottom:25px;height:175px}.cu-paywall-popover__btn{-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;border:1px solid;text-decoration:none;font:500 15px/1 Gotham Pro,Proxima Nova,arial,serif;height:60px;border-radius:3px;padding:0 30px;text-align:center}.cu-paywall-popover__btn:hover{transition:none}@supports (--theme-main-color:#7b68ee){.cu-paywall-popover__btn{background-color:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-paywall-popover__btn:active,.cu-paywall-popover__btn:hover{background-color:#5f48ea;border-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-paywall-popover__btn:active,.cu-paywall-popover__btn:hover{background-color:var(--theme-main-color-dark);border-color:var(--theme-main-color-dark)}}.cu-paywall-popover__more{color:#7b68ee;margin-top:15px;border-bottom:1px dotted}@supports (--theme-main-color:#7b68ee){.cu-paywall-popover__more{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-paywall-popover__more:hover{color:#5f48ea;border-bottom-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-paywall-popover__more:hover{color:var(--theme-main-color-dark);border-bottom-color:var(--theme-main-color-dark)}}.cu-paywall-popover__badge{content:"";display:block;position:absolute;top:-13px;right:-50px;background:linear-gradient(90deg,#778af4 0,#71c1f4);transform:rotate(45deg);height:55px;width:130px;display:flex;align-items:flex-end;justify-content:center;font-size:10px;text-transform:uppercase;color:#fff;font-weight:500;padding-bottom:8px}.cu-paywall-popover__badge.cu-paywall-popover__badge-opposite{transform:rotate(135deg);left:-50px;align-items:flex-start;padding-bottom:0;padding-top:8px}.cu-paywall-popover__badge.cu-paywall-popover__badge-opposite .cu-paywall-popover__badge-text{transform:rotate(180deg)}.cu-paywall-popover__badge-text{font-size:10px;text-transform:uppercase;color:#fff;font-weight:500}.cu-paywall-popover__modal .cu-modal__close{top:5px;right:10px}.cu-paywall-popover__modal-business-email .cu-modal__dialog-paywall{width:450px!important}.cu-paywall-popover__modal-business-email .cu-paywall-popover{width:450px;max-width:none}.cu-paywall-popover__modal-business-email .cu-modal__close{top:20px;right:20px}.cu-paywall-popover__modal-business-email .cu-paywall-modal__feature-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-paywall-popover__modal-business-email .cu-paywall-modal__feature-item{font-family:var(--global-font-support)}}.cu-paywall-popover__modal-business-email .cu-paywall-modal__feature-item strong{font-weight:500}.cu-paywall-popover__modal-business-email .cu-paywall-modal__feature-item .icon{position:relative;fill:#67cb48;width:16px;height:12px;z-index:9;margin-right:20px;margin-left:10px;margin-top:5px}.cu-paywall-popover__modal-business-email .cu-paywall-modal__feature-item .icon:after{content:"";position:absolute;background:#fff;box-shadow:0 5px 15px rgba(0,0,0,.1);border-radius:25px;width:30px;height:30px;left:-7px;top:-9px;z-index:-1}.dark-theme .cu-paywall-popover__modal-business-email .cu-paywall-modal__feature-item .icon:after{background-color:#2b343b}.cu-email-settings{min-height:300px;display:flex;flex-direction:column;position:relative}.cu-email-settings__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:22px;line-height:1;position:absolute;left:0;right:0;margin:auto;top:-40px;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__title{font-family:var(--global-font-support)}}.cu-email-settings__upgrade{padding:30px 35px}.cu-email-settings__upgrade-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:22px;line-height:1;padding-bottom:10px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__upgrade-title{font-family:var(--global-font-support)}}.cu-email-settings__upgrade-body{display:flex;align-items:center}.cu-email-settings__upgrade-body .cu-paywall-modal__feature{flex:1 0 0;margin:0 15px 0 0;flex-wrap:wrap;justify-content:space-between;display:flex}.cu-email-settings__upgrade-body .cu-paywall-modal__feature-item{margin:5px 0}.cu-email-settings__upgrade-body .cu-paywall-modal__feature-item .icon{position:relative;fill:#fff;width:12px;height:12px;margin-top:5px}.cu-email-settings__upgrade-body .cu-paywall-modal__feature-item .icon:after{content:"";position:absolute;background:#00b888;box-shadow:0 5px 15px rgba(0,0,0,.1);border-radius:25px;width:20px;height:20px;left:-4px;top:-4px;z-index:-1}.cu-email-settings__upgrade-btn a{width:108px;height:40px;display:flex;align-items:center;justify-content:center;padding:0;background:transparent;border:1px solid var(--theme-main-color);color:var(--theme-main-color)}.cu-email-settings__header{display:flex;justify-content:flex-start;align-items:center;height:50px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-email-settings__header{border-bottom-color:#1e272e}.cu-email-communicators__modal .cu-email-settings__header{justify-content:center;padding:0 50px}.cu-email-settings__header-item{font-weight:500;font-size:13px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;flex:1;display:flex;align-items:center;justify-content:center;height:calc(100% + 1px);z-index:9;cursor:pointer;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__header-item{font-family:var(--global-font-support)}}.dark-theme .cu-email-settings__header-item{color:#828588}.cu-email-settings__header-item:hover,.cu-email-settings__header-item_active{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-settings__header-item:hover,.cu-email-settings__header-item_active{color:var(--theme-main-color)}}.dark-theme .cu-email-settings__header-item:hover,.dark-theme .cu-email-settings__header-item_active{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-email-settings__header-item:hover,.dark-theme .cu-email-settings__header-item_active{color:var(--theme-main-color)}}.cu-email-settings__header-item:before{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;background:#7b68ee;width:100%;height:2px;left:0;bottom:0;opacity:0}@supports (--theme-main-color:#7b68ee){.cu-email-settings__header-item:before{background:var(--theme-main-color)}}.cu-email-settings__header-item_active{cursor:default}.cu-email-settings__header-item_active:before{opacity:1}.cu-email-settings__link-img{width:295px;height:auto;margin:0 auto 32px}.cu-email-settings__link-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:19px;line-height:1;text-align:center;padding-bottom:15px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__link-title{font-family:var(--global-font-support)}}.dark-theme .cu-email-settings__link-title{color:#d5d6d7}.cu-email-settings__link-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:16px;text-align:center;color:#7c828d;margin-bottom:40px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__link-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-settings__link-text{color:#d5d6d7}.cu-email-settings__link-button{display:flex;align-items:center;justify-content:center;transition:filter .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;margin:5px 42px;border-radius:4px;overflow:hidden}.cu-email-settings__link-button:hover{filter:brightness(90%)}.cu-email-settings__link-button_coming-soon:hover{filter:brightness(1)}.cu-email-settings__link-button_coming-soon:after{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#fc0;content:"coming soon";text-transform:uppercase;position:absolute;width:130px;top:15px;height:22px;left:calc(100% - 142px);padding:8px 0;color:#fff;text-align:center;letter-spacing:.5px;font:500 9px/1 Gotham Pro,Proxima Nova,arial,serif;transform:rotate(34deg)}.cu-email-settings__link-button_coming-soon .cu-btn{opacity:.5;cursor:default}.cu-email-settings__link-button.cu-email-settings__link-button-google{background-color:#5486ec}.cu-email-settings__link-button.cu-email-settings__link-button-google .cu-email-settings__link-button-icon{background-color:#4b7de3}.cu-email-settings__link-button.cu-email-settings__link-button-microsoft{background-color:#dc3e15}.cu-email-settings__link-button.cu-email-settings__link-button-microsoft .cu-email-settings__link-button-icon{background-color:#d2340b}.cu-email-settings__link-button.cu-email-settings__link-button-outlook{background-color:#0072c6}.cu-email-settings__link-button.cu-email-settings__link-button-outlook .cu-email-settings__link-button-icon{background-color:#0068bc}.cu-email-settings__link-button.cu-email-settings__link-button-imap{background-color:#7b68ee}.cu-email-settings__link-button.cu-email-settings__link-button-imap .cu-email-settings__link-button-icon{background-color:#715ee4}.cu-email-settings__link-button-icon{border-radius:4px;height:53px;width:53px;margin-right:18px;display:flex;align-items:center;justify-content:center}.cu-email-settings__link-button-icon .icon{width:23px;height:23px;fill:#fff}.cu-email-settings__link-button .cu-btn{border-radius:4px;width:100%;height:53px;display:flex;justify-content:flex-start;background-color:transparent;border:none;padding:0}.cu-email-settings__link-button .cu-btn__text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:17px;line-height:1;color:#fff;flex:0 0 0;white-space:nowrap}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__link-button .cu-btn__text{font-family:var(--global-font-support)}}.cu-email-settings__link-button:last-of-type{margin-bottom:35px}.cu-email-settings__container{flex-grow:1;display:flex;flex-direction:column}.cu-email-settings__container-just-authed .cu-linked-email-row-top{display:none}.cu-email-settings__container-empty-template{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;flex-grow:1;margin:50px 0}.cu-email-settings__container-empty-template img{width:220px;height:auto;margin-bottom:20px}.cu-email-settings__container-empty-template-header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:15px;line-height:1;color:#7c828d;margin-bottom:20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__container-empty-template-header{font-family:var(--global-font-support)}}.dark-theme .cu-email-settings__container-empty-template-header{color:#d5d6d7}.cu-email-settings__container-empty-template-button{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:15px;line-height:1;width:168px;height:41px;cursor:pointer;background-color:var(--theme-main-color);border-radius:3px;display:flex;align-items:center;justify-content:center;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__container-empty-template-button{font-family:var(--global-font-support)}}.cu-email-settings__container-empty-template-button:hover{background-color:var(--theme-main-color-dark)}.cu-email-settings__container-emails{background:#fff;width:100%;flex-grow:1}.dark-theme .cu-email-settings__container-emails{background:#2b343b}.cu-email-settings__container-emails .cu-linked-email:last-of-type{border-bottom:none}.dark-theme .cu-email-settings__container-emails{border-color:#1e272e}.cu-email-settings__link{display:flex;align-items:center;height:92px;padding:0 35px;border-top:1px solid #e9ebf0}.dark-theme .cu-email-settings__link{border-top-color:#1e272e}.cu-email-settings__link.cu-email-settings__link-buttons{justify-content:space-between}.cu-email-settings__link-accounts{border-top:none}.cu-email-settings__link-accounts .cu-btn{margin-left:auto}.cu-email-settings__link .cu-btn{height:45px;min-width:136px;margin-left:auto}.cu-email-settings__link .cu-btn.cu-btn_outline{border-color:#9b9b9b}.cu-email-settings__link .cu-btn.cu-btn_outline .cu-btn__text{color:#9b9b9b!important}.cu-email-settings__link .cu-btn.cu-btn_outline:hover{background-color:transparent!important}.cu-email-settings__link .cu-btn__text{font-weight:500;font-size:16px}.cu-email-settings__link-linked,.cu-email-settings__link-plus{color:#7b68ee;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-email-settings__link-linked,.cu-email-settings__link-plus{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__link-linked,.cu-email-settings__link-plus{font-family:var(--global-font-support)}}.cu-email-settings__link-linked{cursor:default;color:#aeacb0;font-weight:400;margin-left:5px}.cu-email-settings .cu-api-integration__btn-container{padding:20px 38px}.cu-email-settings .cu-form__error{padding:10px 0;text-align:center;display:flex;justify-content:center}.cu-email-settings__just-authed{width:100%;margin:25px 0 0}.cu-email-settings__just-authed img{width:124px;height:auto;display:block;margin:0 auto 20px}.cu-email-settings__just-authed-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:19px;line-height:1;color:#292d34;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-settings__just-authed-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-settings__just-authed-text{color:#d5d6d7}.cu-email-settings__just-authed-btn{width:100%}.cu-email-settings__just-authed-btn .cu-btn{width:100%;height:53px}'],encapsulation:2,changeDetection:0}),e})()},A6mZ:function(e,t,i){"use strict";function o(e){var t,i;return"text"!==e.type||!e.position||(t=e.position.start).line!==(i=e.position.end).line||i.column-t.column===e.value.length}function n(e,t){return e.value+=t.value,e}function s(e,t){return this.options.commonmark||this.options.gfm?t:(e.children=e.children.concat(t.children),e)}e.exports=function(e){return function(t,i){var c,a,r,l,d,u=this,m=u.offset,p=[],h=u[e+"Methods"],f=u[e+"Tokenizers"],b=i.line,g=i.column;if(!t)return p;for(y.now=v,y.file=u.file,_("");t;){for(c=-1,a=h.length,l=!1;++c<a&&(!(r=f[h[c]])||r.onlyAtStart&&!u.atStart||r.notInList&&u.inList||r.notInBlock&&u.inBlock||r.notInLink&&u.inLink||(d=t.length,r.apply(u,[y,t]),!(l=d!==t.length))););l||u.file.fail(new Error("Infinite loop"),y.now())}return u.eof=v(),p;function _(e){for(var t=-1,i=e.indexOf("\n");-1!==i;)b++,t=i,i=e.indexOf("\n",i+1);-1===t?g+=e.length:g=e.length-t,b in m&&(-1!==t?g+=m[b]:g<=m[b]&&(g=m[b]+1))}function v(){var e={line:b,column:g};return e.offset=u.toOffset(e),e}function k(e){this.start=e,this.end=v()}function y(e){var i,c=function(){var e=[],t=b+1;return function(){for(var i=b+1;t<i;)e.push((m[t]||0)+1),t++;return e}}(),a=(i=v(),function(e,t){var o=e.position,n=[],s=o&&o.end.line,c=i.line;if(e.position=new k(o?o.start:i),o&&t&&o.indent){if(n=o.indent,s<c){for(;++s<c;)n.push((m[s]||0)+1);n.push(i.column)}t=n.concat(t)}return e.position.indent=t||[],e}),r=v();return function(e){t.slice(0,e.length)!==e&&u.file.fail(new Error("Incorrectly eaten value: please report this warning on https://git.io/vg5Ft"),v())}(e),l.reset=d,d.test=h,l.test=h,t=t.slice(e.length),_(e),c=c(),l;function l(e,t){return a(function(e,t){var i=t?t.children:p,c=i[i.length-1];return c&&e.type===c.type&&("text"===e.type||"blockquote"===e.type)&&o(c)&&o(e)&&(e=("text"===e.type?n:s).call(u,c,e)),e!==c&&i.push(e),u.atStart&&0!==p.length&&u.exitStart(),e}(a(e),t),c)}function d(){var i=l.apply(null,arguments);return b=r.line,g=r.column,t=e+t,i}function h(){var i=a({});return b=r.line,g=r.column,t=e+t,i.position}}}}},AGVE:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},AQwl:function(e,t,i){"use strict";var o=i("5WsY"),n=i("EUcb");t.a=function(e){return Object(n.a)(e)&&Object(o.a)(e)}},BEtg:function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},BjVE:function(e,t,i){"use strict";e.exports=function(e,t){var i=e.indexOf("**",t),o=e.indexOf("__",t);return-1===o?i:-1===i||o<i?o:i}},BoH5:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var o=i("Fv+p"),n=i("tyNb"),s=i("EDFS"),c=i("KyjD"),a=i("/SUI"),r=i("1M0N"),l=i("ofXK"),d=i("3NTJ"),u=i("K0KF"),m=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({factory:function(t){return new(t||e)},imports:[[l.c,r.a,d.a,a.a,c.a,u.a,s.d,n.l,o.a]]}),e})()},Brp5:function(e,t,i){"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},CDR3:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("fXoL"),n=i("7Cbv"),s=i("DeYq"),c=i("TqRa"),a=i("2p4s"),r=i("ujc1"),l=i("5EAn");let d=(()=>{class e{constructor(e,t){this.logger=e,this.httpSession=t,this.fileList=[],this.onAdded=new o.o,this.onProgress=new o.o,this.onUpload=new o.o,this.onError=new o.o,this.onAbort=new o.o,this.requestList=[],this.options={autoUpload:!0,url:[a.a.attachmentUrl,"attachment"].join("/"),formDataFields:{},fieldName:"",method:"POST",maxFiles:100,maxFileSize:Math.pow(2,30),validFileTypes:[],invalidFileTypes:[],parallelUploads:3,retryOnError:!0,maxAttempts:3},this.requestMap=new WeakMap,this.logger.setPrefix("UPLOADER"),this.checkSettings()}reset(){for(this.fileList=[];this.requestList.length;){const e=this.requestList.pop();e&&e.abort()}this.requestMap=new WeakMap}abortFileUpload(e){this.fileList=this.fileList.filter(t=>t.file!==e);const t=this.requestMap.get(e);t&&(this.requestList=this.requestList.filter(e=>e!==t),this.requestMap.delete(e),t.abort())}enableLogger(){}disableLogger(){}setOptions(e){this.options=Object.assign({},this.options,e)}addFiles(e,t,i={}){Array.from(e).forEach(e=>{this.isFileTypeAccepted(e)&&this.isFileSizeAccepted(e)&&(e.tempId=Object(n.a)(),this.fileList.push({file:e,tag:t,formDataFields:i}),this.onAdded.emit({data:e,tag:t}))}),this.options.autoUpload&&this.sendFiles()}sendFiles(){const e=Math.min(this.fileList.length,this.options.parallelUploads);for(let t=0;t<e;t++)this.sendNextFile()}sendFile(e,t,i){const o=new FormData,n=new XMLHttpRequest;n.upload.addEventListener("progress",i=>{const o={id:e.tempId,loadPercent:Math.round(i.loaded/i.total*100)};this.onProgress.emit({data:o,tag:t}),this.logger.log(`Loading file "${e.name}": ${o.loadPercent}%`)},!1),n.addEventListener("readystatechange",()=>{if(n.readyState===XMLHttpRequest.DONE&&200===n.status){this.logger.success(`File "${e.name}" has been uploaded`);try{this.onUpload.emit({data:{id:e.tempId,result:JSON.parse(n.responseText)},tag:t,formDataFields:i}),this.sendNextFile()}catch(o){this.onError.emit({data:{id:e.tempId,data:o},tag:t})}}else if(n.status>=400)try{this.onError.emit({data:{id:e.tempId,data:JSON.parse(n.responseText)},tag:t})}catch(s){}},!1),n.upload.addEventListener("error",i=>{this.onError.emit({data:{id:e.tempId,data:i},tag:t}),this.logger.error(`File "${e.name}" upload error`)},!1),n.upload.addEventListener("abort",i=>{this.onAbort.emit({data:{id:e.tempId,data:i},tag:t}),this.logger.error(`Uploading file "${e.name}" aborted`)},!1),o.append(this.options.fieldName,e,e.name);for(const s in this.options.formDataFields)this.options.formDataFields.hasOwnProperty(s)&&o.append(s,this.options.formDataFields[s]);i&&Object.entries(i).forEach(([e,t])=>{o.append(e,t)}),c.k&&(n.withCredentials=!0),n.open(this.options.method,this.options.url,!0),c.k||n.setRequestHeader("Authorization","Bearer "+Object(s.b)()),n.setRequestHeader("sessionId",this.httpSession.getSessionId()),n.setRequestHeader("ngsw-bypass","true"),n.send(o),this.requestList.push(n),this.requestMap.set(e,n)}sendNextFile(){const e=this.fileList.shift();e&&e.file&&this.sendFile(e.file,e.tag,e.formDataFields)}checkSettings(){""===this.options.url&&this.logger.error("Upload URL required"),""===this.options.fieldName&&this.logger.error("Field name required"),this.options.method||this.logger.error("Request method required"),-1===["POST","PUT"].indexOf(this.options.method.toUpperCase())&&this.logger.error("Unsupported request method")}isFileTypeAccepted(e){const t=this.options.validFileTypes,i=this.options.invalidFileTypes;return this.logger.log(`File: "${e.name}" | type: "${e.type}"`),(t.length||i.length)&&(i.length&&-1!==i.indexOf(e.type)||t.length&&-1===t.indexOf(e.type))?(this.logger.error(`File: "${e.name}" | type "${e.type}" not allowed`),!1):(this.logger.log(`File: "${e.name}" | type "${e.type}" allowed`),!0)}isFileSizeAccepted(e){return this.logger.log(`File: "${e.name}" | size: ${e.size} bytes`),e.size<=this.options.maxFileSize?(this.logger.log(`File: "${e.name}" | size: ${e.size} bytes allowed`),!0):(this.logger.error(`File: "${e.name}" | size: ${e.size} bytes is too big`),!1)}}return e.\u0275fac=function(t){return new(t||e)(o.nc(r.a),o.nc(l.a))},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac}),e})()},"CG/S":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("fXoL"),n=i("oy6Y"),s=i("jJW4");let c=(()=>{class e{constructor(e,t){this.timezonesService=e,this.sharedData=t}transform(e){const t=Date.now()-parseInt(e,10),i=new Date,o=new Date(parseInt(e,10)),n=36e5,s=this.timezonesService.createMoment(parseInt(e,10)),c=this.timezonesService.createMoment(),a=this.sharedData.currentUser.value&&this.sharedData.currentUser.value.twenty_four_hr_setting?"H:mm":"h:mm a";return t<6e4?"Just now":t<n?`${Math.round(t/6e4%60)} ${1===Math.round(t/6e4%60)?"min":"mins"} ago`:t>=n&&t<2*n?"1 hour ago":t<3*n?Math.round(t/n%24)+" hours ago":i.toDateString()===o.toDateString()?s.format(a):this._dateIsYesterday(i,o)?"Yesterday at "+s.format(a):c.year()!==s.year()?`${s.format("MMM D Y")}\n                at ${s.format(a)}`:`${s.format("MMM D")}\n                at ${s.format(a)}`}_dateIsYesterday(e,t){return t.setDate(t.getDate()+1),e.toDateString()===t.toDateString()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a),o.Wb(s.a))},e.\u0275pipe=o.Vb({name:"duration",type:e,pure:!1}),e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac}),e})()},CRs9:function(e,t,i){"use strict";e.exports=function(e,t){var i=e.indexOf("*",t),o=e.indexOf("_",t);return-1===o?i:-1===i||o<i?o:i}},DH0s:function(e,t,i){e.exports=i.p+"time-in-status.978c9b6a3d2ead97d7cd.png"},DiaY:function(e,t,i){"use strict";i.d(t,"b",function(){return ki}),i.d(t,"a",function(){return wi});var o=i("L5Tv"),n=i("c3rA"),s=i("MPcj"),c=i("hxFJ"),a=i("jwRX"),r=i("tDbv"),l=i("2Vo4"),d=i("XNiG"),u=i("itXk"),m=i("LRne"),p=i("eIep"),h=i("lJxs"),f=i("pLZG"),b=i("/uUt"),g=i("vkgz"),_=i("1G5W"),v=i("Kj3r"),k=i("PZkE"),y=i("IzEk"),w=i("zp1y"),x=i("fXoL"),I=i("xog/"),T=i("dTHz"),C=i("42vj"),D=i("aIzb"),O=i("l7P3"),S=i("WluX"),E=i("Ll/8"),P=i("4F4K"),j=i("cC1p"),A=i("CgHv"),$=i("uFGp"),U=i("PBBv"),R=i("hr9B"),M=i("VQww"),F=i("2eDp"),L=i("jJQC"),N=i("IlGD"),z=i("xg+I"),q=i("sWsJ"),G=i("lU5h"),V=i("RtrR"),B=i("eDEC"),X=i("0dWf"),H=i("0/H+"),W=i("wa4x"),K=i("oWSB"),Q=i("o7Ov"),Z=i("I1n0");let Y=(()=>{class e{constructor(){this.archiveTasks=$localize`:@@cu-dashboard-table-toolbar__archive-tasks:Archive tasks`,this.cfPermissionsMessage=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_manage-cf-no-perms:You don't have permission to manage custom fields on all the selected tasks`,this.duplicateTasksText=$localize`:@@cu-dashboard-table-toolbar__duplicate-tasks:Duplicate tasks`,this.m2mTooltipText=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_m2m-relationship-instructions:Please select more than 1 task to create a Many to Many relationship`,this.markAsMilestoneText=$localize`:@@common_mark-as-milestone:Mark as Milestone`,this.moveTasksOrAddToListsText=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_move-tasks-or-add-to-lists:Move tasks or add tasks in multiple Lists`,this.moveTasksText=$localize`:@@cu-dashboard-table-toolbar__move-tasks:Move tasks`,this.noAvailableCfTooltipText=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_no-cf-available:No Custom fields available`,this.noPermsToggleMilestoneMarkings=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_no-perms-toggle-mark-as-milestones:You don't have permissions to mark/unmark all these tasks as milestones.`,this.notAvailableInAllSpacesText=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_not-available-in-all-spaces:Not available in All Spaces`,this.setCustomFieldsTooltipText=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_set-cf:Set Custom fields`,this.setPriorityText=$localize`:@@common_set-priority-1:Set Priority`,this.setTagsText=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_set-tags:Set Tags`,this.setWatchersText=$localize`:@@cu-dashboard-table-toolbar__set-watchers:Set watchers`,this.tagPermissionMessage=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_change-tags-no-perms:You don't have permission to change tags on all the selected tasks`,this.tasksLinkingText=$localize`:@@cu-dashboard-table-toolbar__tasks-linking:Tasks Linking`,this.unarchiveTasks=$localize`:@@cu-dashboard-table-toolbar__unarchive-tasks:Unarchive tasks`,this.unmarkAsMilestoneText=$localize`:@@common_mark-as-milestone--unmark:Unmark as Milestone`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=x.Sb({token:e,factory:e.\u0275fac}),e})();var J=i("jJW4"),ee=i("8it8"),te=i("76Cs"),ie=i("Jf2N"),oe=i("Tm/s"),ne=i("Dvla"),se=i("rLOZ");const ce=["dropdown"],ae=["mergeDropdown"],re=["copyTasksDropdownList"],le=["taskSelector"],de=["confirmSubtaskModal"],ue=["moveSubtaskModal"],me=["archiveContainer"],pe=["slashCommand"],he=["sendNotificationTemplate"],fe=["statusListComponent"];function be(e,t){1&e&&(x.mc(0,21,2),x.Xb(1,"span"),x.jc())}function ge(e,t){1&e&&(x.mc(0,21,3),x.Xb(1,"span"),x.jc())}function _e(e,t){if(1&e&&(x.mc(0,21,1),x.bd(1,be,2,0,"span",73),x.bd(2,ge,2,0,"span",73),x.jc()),2&e){const e=x.uc(3);x.Ib(1),x.Dc("ngIf",!e.subtaskView),x.Ib(1),x.Dc("ngIf",e.subtaskView)}}function ve(e,t){1&e&&(x.mc(0,21,5),x.Xb(1,"span"),x.jc())}function ke(e,t){1&e&&(x.mc(0,21,6),x.Xb(1,"span"),x.jc())}function ye(e,t){if(1&e&&(x.mc(0,21,4),x.bd(1,ve,2,0,"span",73),x.bd(2,ke,2,0,"span",73),x.jc()),2&e){const e=x.uc(3);x.Ib(1),x.Dc("ngIf",!e.subtaskView),x.Ib(1),x.Dc("ngIf",e.subtaskView)}}function we(e,t){}function xe(e,t){1&e&&x.Xb(0,"a",74),2&e&&x.Dc("icon","status")}function Ie(e,t){1&e&&x.Xb(0,"a",75),2&e&&x.Dc("icon","check-batch-toolbar")}function Te(e,t){if(1&e){const e=x.dc();x.ac(0),x.cc(1,"cu-status-list",79,80),x.qc("onChange",function(t){x.Uc(e),x.uc(2);const i=x.Rc(22),o=x.uc(2);return i.close(),o.selectStatus(t)}),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.bc(),x.Yb(7,81),x.Zb()}if(2&e){const e=x.uc(4),t=x.Rc(6);let i=null;x.Ib(1),x.Dc("displaySharedWarning",x.wc(3,4,e.multipleSubcatgories$)&&x.wc(4,6,e.selectedTasksCount$)>1)("statuses",e.statusList||x.wc(5,8,e.toolbarStatuses$))("groupByStatusType",null==(i=x.wc(6,10,e.sharedData.compatCurrentTeam$))?null:i.unstarted_status_group),x.Ib(6),x.Dc("ngTemplateOutlet",t)}}function Ce(e,t){1&e&&x.Xb(0,"cu-loader")}function De(e,t){1&e&&(x.cc(0,"div",83),x.cc(1,"div",84),x.gc(2,85),x.bc(),x.bc())}function Oe(e,t){if(1&e&&(x.bd(0,Ce,1,0,"cu-loader",73),x.vc(1,"async"),x.bd(2,De,3,0,"div",82),x.vc(3,"async")),2&e){const e=x.uc(4);x.Dc("ngIf",x.wc(1,2,e.fetchingToolbarStatuses$)),x.Ib(2),x.Dc("ngIf",!x.wc(3,4,e.fetchingToolbarStatuses$))}}function Se(e,t){if(1&e&&(x.cc(0,"div",76),x.bd(1,Te,8,12,"ng-container",77),x.vc(2,"async"),x.bd(3,Oe,4,6,"ng-template",null,78,x.cd),x.bc()),2&e){const e=x.Rc(4),t=x.uc(3);let i=null;x.Ib(1),x.Dc("ngIf",(null==(i=x.wc(2,2,t.toolbarStatuses$))?null:i.length)||t.statusList)("ngIfElse",e)}}function Ee(e,t){if(1&e){const e=x.dc();x.cc(0,"div",93),x.cc(1,"cu-task-selector",94,95),x.qc("onSelect",function(t){return x.Uc(e),x.uc(4).setSubtasks(t)}),x.vc(3,"async"),x.bc(),x.Yb(4,81),x.bc()}if(2&e){const e=x.uc(4),t=x.Rc(6);x.Ib(1),x.Dc("modifier","task-selector__multi-task-toolbar")("defaultProject",x.wc(3,7,e.sharedData.compatCurrentProject$))("searchSubtasks",!1)("excludeParentTask",!0)("description",null)("expandableSubtasks",!1),x.Ib(3),x.Dc("ngTemplateOutlet",t)}}function Pe(e,t){if(1&e){const e=x.dc();x.cc(0,"div",26),x.vc(1,"async"),x.cc(2,"div",86,87),x.qc("dropdownOpen",function(){return x.Uc(e),x.uc(3).setFocus()}),x.cc(4,"div",88,89),x.Xb(6,"a",90),x.vc(7,"async"),x.bc(),x.bd(8,Ee,5,9,"div",91),x.bc(),x.Xb(9,"div",92),x.bc()}if(2&e){const e=x.uc(3);x.Ob("move-task-option","mixed"===x.wc(1,5,e.selectedTasksType$)),x.Ib(2),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(4),x.Dc("icon","subtask-batch")("cuTooltip",x.wc(7,7,e.convertToSubtasksTooltipMsg$))}}function je(e,t){if(1&e){const e=x.dc();x.cc(0,"div",26),x.cc(1,"a",96),x.qc("click",function(){return x.Uc(e),x.uc(3).convertToTask()}),x.vc(2,"async"),x.bc(),x.bc()}if(2&e){const e=x.uc(3);x.Ib(1),x.Dc("icon","convert-to-task-batch")("cuTooltip",x.wc(2,2,e.convertToTasksTooltipMsg$))}}function Ae(e,t){if(1&e&&(x.cc(0,"div",26),x.Xb(1,"a",97),x.vc(2,"async"),x.bc()),2&e){const e=x.uc(3);x.Ib(1),x.Dc("icon","move-batch")("cuTooltip",x.wc(2,2,e.moveTasksTooltipText$))}}function $e(e,t){if(1&e){const e=x.dc();x.cc(0,"div",104),x.qc("click",function(){return x.Uc(e),x.uc(4).moveOrMultilistTabActive="multi"}),x.gc(1,105),x.bc()}if(2&e){const e=x.uc(4);x.Ob("active","multi"===e.moveOrMultilistTabActive)}}function Ue(e,t){if(1&e){const e=x.dc();x.ac(0),x.cc(1,"cu-category-list",106),x.qc("onSelect",function(t){return x.Uc(e),x.uc(4).selectCategory(t)}),x.bc(),x.Zb()}if(2&e){x.uc(4);const e=x.Rc(6);x.Ib(1),x.Dc("extraItemTemplate",e)}}function Re(e,t){if(1&e){const e=x.dc();x.ac(0),x.cc(1,"cu-category-list",107),x.qc("onSelect",function(t){return x.Uc(e),x.uc(4).addTasksToAnotherList(t)}),x.bc(),x.Zb()}if(2&e){x.uc(4);const e=x.Rc(6);x.Ib(1),x.Dc("selectableProject",!1)("singleCategory",!1)("displaySearch",!0)("showTaskCount",!0)("extraItemTemplate",e)}}function Me(e,t){if(1&e){const e=x.dc();x.cc(0,"div"),x.cc(1,"div",98),x.cc(2,"div",99),x.cc(3,"div",100),x.qc("click",function(){return x.Uc(e),x.uc(3).moveOrMultilistTabActive="move"}),x.gc(4,101),x.bc(),x.bd(5,$e,2,2,"div",102),x.vc(6,"async"),x.bc(),x.cc(7,"div",103),x.bd(8,Ue,2,1,"ng-container",73),x.bd(9,Re,2,5,"ng-container",73),x.vc(10,"async"),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(3);let t=null,i=null;x.ad("width",250,"px"),x.Ib(3),x.Ob("active","move"===e.moveOrMultilistTabActive),x.Ib(2),x.Dc("ngIf",null==(t=x.wc(6,7,e.team$))?null:t.tasks_in_multiple_lists),x.Ib(3),x.Dc("ngIf","move"===e.moveOrMultilistTabActive),x.Ib(1),x.Dc("ngIf","multi"===e.moveOrMultilistTabActive&&(null==(i=x.wc(10,9,e.team$))?null:i.tasks_in_multiple_lists))}}function Fe(e,t){}function Le(e,t){}function Ne(e,t){if(1&e){const e=x.dc();x.cc(0,"div",111),x.cc(1,"button",112),x.qc("click",function(){x.Uc(e),x.uc();const t=x.Rc(1);return x.uc(3).removeTasksFromList(t)}),x.gc(2,113),x.vc(3,"async"),x.bc(),x.bd(4,Le,0,0,"ng-template",81),x.bc()}if(2&e){const e=x.uc(4),t=x.Rc(6);let i=null;x.Ib(3),x.kc(null==(i=x.wc(3,2,e.subcategory$))?null:i.name),x.hc(2),x.Ib(1),x.Dc("ngTemplateOutlet",t)}}const ze=function(){return["bottom"]};function qe(e,t){1&e&&(x.cc(0,"div",108,87),x.Xb(2,"a",109),x.bd(3,Ne,5,4,"div",110),x.bc()),2&e&&x.Dc("dropdownCloseOnInsideClick",!1)("dropdownPlacement",x.Gc(2,ze))}function Ge(e,t){}function Ve(e,t){}const Be=function(e){return{id:"markAsMilestone",title:e,icon:"milestone-plus"}},Xe=function(e){return{id:"unmarkAsMilestone",title:e,icon:"milestone-minus"}};function He(e,t){if(1&e){const e=x.dc();x.cc(0,"div",118),x.cc(1,"cu-dropdown-list-item",119),x.qc("click",function(){x.Uc(e),x.uc();const t=x.Rc(2);return x.uc(3).updateMilestones(!0),t.close()}),x.bc(),x.cc(2,"cu-dropdown-list-item",119),x.qc("click",function(){x.Uc(e),x.uc();const t=x.Rc(2);return x.uc(3).updateMilestones(!1),t.close()}),x.bc(),x.bc()}if(2&e){const e=x.uc(4);x.Ib(1),x.Dc("item",x.Hc(2,Be,e.dashboardTableToolbarStringsService.markAsMilestoneText)),x.Ib(1),x.Dc("item",x.Hc(4,Xe,e.dashboardTableToolbarStringsService.unmarkAsMilestoneText))}}function We(e,t){if(1&e&&(x.cc(0,"div",26),x.cc(1,"div",114,115),x.vc(3,"async"),x.vc(4,"async"),x.cc(5,"div",32),x.Xb(6,"a",116),x.bc(),x.bd(7,He,3,6,"div",117),x.bc(),x.bc()),2&e){const e=x.uc(3);x.Ib(1),x.Dc("dropdownCloseOnInsideClick",!1)("dropdownDisabled",!x.wc(3,3,e.selectedTasksHaveMilestonePermission$))("cuTooltip",x.wc(4,5,e.selectedTasksHaveMilestonePermission$)?null:e.dashboardTableToolbarStringsService.noPermsToggleMilestoneMarkings)}}function Ke(e,t){}function Qe(e,t){}function Ze(e,t){}function Ye(e,t){if(1&e){const e=x.dc();x.cc(0,"div",126),x.qc("click",function(){x.Uc(e);const i=t.$implicit;return x.uc(5).bulkCustomField=i}),x.Xb(1,"div",127),x.cc(2,"div",128),x.dd(3),x.bc(),x.bc()}if(2&e){const e=t.$implicit;x.Ib(1),x.Dc("icon","field-"+e.type),x.Ib(1),x.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0),x.Ib(1),x.fd(" ",e.name," ")}}function Je(e,t){if(1&e&&(x.cc(0,"cu-search-list",122,123),x.vc(2,"async"),x.cc(3,"div",124),x.bd(4,Ye,4,4,"div",125),x.bc(),x.bc()),2&e){const e=x.Rc(1),t=x.uc(4);x.Dc("items",x.wc(2,5,t.customFields$))("autoFocus",!0)("modifierSearchInput","cu-search-input__inner_columns-list"),x.Ib(4),x.Dc("ngForOf",e.filteredItems)("ngForTrackBy",t.trackById)}}function et(e,t){if(1&e){const e=x.dc();x.cc(0,"div",129),x.cc(1,"div",130),x.Xb(2,"div",131),x.cc(3,"div",132),x.dd(4),x.bc(),x.bc(),x.cc(5,"div",133),x.cc(6,"cu-edit-task-custom-field-value",134,135),x.qc("fieldValueChange",function(t){return x.Uc(e),x.uc(4).bulkCustomFieldValue=t}),x.bc(),x.bc(),x.cc(8,"div",136),x.cc(9,"button",137),x.qc("click",function(){x.Uc(e);const t=x.uc(4);return t.bulkCustomField=null,t.bulkCustomFieldValue=null}),x.gc(10,138),x.bc(),x.cc(11,"button",139),x.qc("click",function(){x.Uc(e),x.uc(2);const t=x.Rc(76);return x.uc(2).setCustomFieldValue(t)}),x.gc(12,140),x.bc(),x.bc(),x.Yb(13,81),x.bc()}if(2&e){const e=x.Rc(7),t=x.uc(4),i=x.Rc(8);x.Ib(2),x.Dc("icon","field-"+t.bulkCustomField.type),x.Ib(2),x.fd(" ",t.bulkCustomField.name," "),x.Ib(2),x.Dc("forBulk",!0)("field",t.bulkCustomField)("fieldValue",t.bulkCustomFieldValue)("members",null),x.Ib(5),x.Dc("disabled",(null==e.emailInput?null:e.emailInput.invalid)||(null==e.urlInput?null:e.urlInput.invalid)||t.bulkCustomFieldValue&&!1===(null==e.telephoneInput?null:e.telephoneInput.isTelephoneValid)),x.Ib(2),x.Dc("ngTemplateOutlet",i)}}function tt(e,t){if(1&e&&(x.cc(0,"div"),x.bd(1,Je,5,7,"cu-search-list",120),x.bd(2,et,14,8,"div",121),x.bc()),2&e){const e=x.uc(3);x.Ib(1),x.Dc("ngIf",!e.bulkCustomField),x.Ib(1),x.Dc("ngIf",e.bulkCustomField)}}function it(e,t){}function ot(e,t){}function nt(e,t){}function st(e,t){}function ct(e,t){}function at(e,t){}function rt(e,t){}function lt(e,t){}function dt(e,t){}const ut=function(){return{inDropdown:!0}};function mt(e,t){if(1&e&&(x.cc(0,"div",141),x.bd(1,ot,0,0,"ng-template",25),x.bd(2,nt,0,0,"ng-template",25),x.bd(3,st,0,0,"ng-template",25),x.bd(4,ct,0,0,"ng-template",25),x.bd(5,at,0,0,"ng-template",25),x.bd(6,rt,0,0,"ng-template",25),x.bd(7,lt,0,0,"ng-template",25),x.bd(8,dt,0,0,"ng-template",25),x.bc()),2&e){x.uc(3);const e=x.Rc(12),t=x.Rc(14),i=x.Rc(16),o=x.Rc(18),n=x.Rc(20),s=x.Rc(22),c=x.Rc(24),a=x.Rc(26);x.Ib(1),x.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",x.Gc(16,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",x.Gc(17,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",x.Gc(18,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",o)("ngTemplateOutletContext",x.Gc(19,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",x.Gc(20,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",s)("ngTemplateOutletContext",x.Gc(21,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",c)("ngTemplateOutletContext",x.Gc(22,ut)),x.Ib(1),x.Dc("ngTemplateOutlet",a)("ngTemplateOutletContext",x.Gc(23,ut))}}const pt=function(e,t,i){return{id:e,title:t,checkType:"switch",checked:i}};function ht(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-dropdown-list-item",147),x.qc("onCheck",function(){x.Uc(e);const i=t.$implicit;return x.uc(4).toggleClipboardOption(i.name)}),x.bc()}if(2&e){const e=t.$implicit,i=x.uc(4);x.Dc("item",x.Jc(1,pt,e.name,e.title,i.clipboardOptions[e.name]))}}function ft(e,t){if(1&e){const e=x.dc();x.cc(0,"div",142),x.Xb(1,"cu-dropdown-list-title",143),x.bd(2,ht,1,5,"cu-dropdown-list-item",144),x.cc(3,"button",145),x.qc("click",function(){x.Uc(e),x.uc();const t=x.Rc(97);return x.uc(2).copyToClipboard(),t.close()}),x.gc(4,146),x.bc(),x.bc()}if(2&e){const e=x.uc(3);x.Ib(2),x.Dc("ngForOf",e.clipboardFields)("ngForTrackBy",e.trackByName),x.Ib(1),x.Dc("disabled",!e.clipboardOptionsEnabled)}}const bt=function(){return{inDropdown:!1}},gt=function(e){return{"priorities-batch_disabled":e}},_t=function(e,t,i,o){return{a:!0,me:!0,w:!0,p:e,d:t,sd:i,t:o,s:!0,m:!0,o:!0,b:!0,lt:!0,inbox:!0}},vt=function(){return{}},kt=function(){return{multi:!0,ignoreFirstSelect:!0,alwaysShowUnassingn:!0}},yt=function(e){return{a:e}};function wt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",16),x.cc(1,"div",17),x.cc(2,"div",18),x.qc("click",function(){return x.Uc(e),x.uc(2).unselectTasks()}),x.Xb(3,"div",19),x.bc(),x.cc(4,"div",20),x.mc(5,21),x.vc(6,"async"),x.vc(7,"async"),x.bd(8,_e,3,2,"ng-template",22),x.bd(9,ye,3,2,"ng-template",23),x.jc(),x.bc(),x.bc(),x.cc(10,"div",24),x.bd(11,we,0,0,"ng-template",25),x.cc(12,"div",26),x.cc(13,"cu-user-list-dropdown",27),x.qc("onReassign",function(t){return x.Uc(e),x.uc(2).reassignUser(t)})("onReassignGroup",function(t){return x.Uc(e),x.uc(2).reassignUserGroup(t)})("onUserGroupsChanged",function(t){return x.Uc(e),x.uc(2).setSelected(t,"group")})("onChange",function(t){return x.Uc(e),x.uc(2).setSelected(t)})("onClose",function(){return x.Uc(e),x.uc(2).resetSelected()}),x.vc(14,"async"),x.vc(15,"async"),x.vc(16,"async"),x.vc(17,"async"),x.vc(18,"async"),x.Xb(19,"a",28),x.bc(),x.bc(),x.cc(20,"div",29),x.qc("click",function(){return x.Uc(e),x.uc(2).fetchStatuses()}),x.cc(21,"div",30,31),x.qc("dropdownOpen",function(){x.Uc(e);const t=x.uc(2);return null==t.statusListComponent?null:t.statusListComponent.focusInput()})("dropdownClose",function(){x.Uc(e);const t=x.uc(2);return null==t.statusListComponent?null:t.statusListComponent.resetSearch(!1)}),x.cc(23,"div",32),x.bd(24,xe,1,1,"a",33),x.vc(25,"async"),x.bd(26,Ie,1,1,"a",34),x.vc(27,"async"),x.bc(),x.bd(28,Se,5,4,"div",35),x.bc(),x.bc(),x.cc(29,"div",36),x.qc("click",function(){return x.Uc(e),x.uc(2).getTags()}),x.cc(30,"cu-tags-list",37),x.qc("onChange",function(t){return x.Uc(e),x.uc(2).setTag(t)})("onDelete",function(t){return x.Uc(e),x.uc(2).removeTag(t)})("onDeleteFromSpace",function(t){return x.Uc(e),x.uc(2).deleteTag(t)})("onClose",function(){return x.Uc(e),x.uc(2).tagsDropdownClosed()})("onRename",function(t){return x.Uc(e),x.uc(2).renameTag(t)})("onColorChange",function(t){return x.Uc(e),x.uc(2).colorChange(t)})("onPage",function(t){return x.Uc(e),x.uc(2).getTags(t)}),x.vc(31,"async"),x.vc(32,"async"),x.vc(33,"async"),x.vc(34,"async"),x.Xb(35,"cu-tags-view",38),x.vc(36,"async"),x.vc(37,"async"),x.vc(38,"async"),x.bc(),x.bc(),x.bd(39,Pe,10,9,"div",39),x.vc(40,"async"),x.bd(41,je,3,4,"div",40),x.vc(42,"async"),x.cc(43,"div",26),x.vc(44,"async"),x.cc(45,"div",41),x.cc(46,"div",32),x.bd(47,Ae,3,4,"div",40),x.vc(48,"async"),x.vc(49,"async"),x.vc(50,"async"),x.vc(51,"async"),x.bc(),x.bd(52,Me,11,11,"div",42),x.bc(),x.Xb(53,"div",43),x.bc(),x.bd(54,Fe,0,0,"ng-template",25),x.bd(55,qe,4,3,"div",44),x.vc(56,"async"),x.vc(57,"async"),x.vc(58,"async"),x.vc(59,"async"),x.vc(60,"async"),x.vc(61,"async"),x.bd(62,Ge,0,0,"ng-template",25),x.cc(63,"div",45),x.cc(64,"cu-recurring-date-dropdown",46),x.qc("onChange",function(t){return x.Uc(e),x.uc(2).setDueDate(t,!0)}),x.vc(65,"async"),x.Xb(66,"a",47),x.vc(67,"async"),x.vc(68,"async"),x.bc(),x.bc(),x.bd(69,Ve,0,0,"ng-template",25),x.bd(70,We,8,7,"div",40),x.vc(71,"async"),x.bd(72,Ke,0,0,"ng-template",25),x.bd(73,Qe,0,0,"ng-template",25),x.bd(74,Ze,0,0,"ng-template",25),x.cc(75,"div",48,49),x.qc("dropdownOpen",function(){x.Uc(e);const t=x.uc(2);return t.bulkCustomField=null,t.bulkCustomFieldValue=null}),x.vc(77,"async"),x.vc(78,"async"),x.vc(79,"async"),x.Xb(80,"a",50),x.vc(81,"async"),x.vc(82,"async"),x.vc(83,"async"),x.bd(84,tt,3,2,"div",51),x.bc(),x.bd(85,it,0,0,"ng-template",25),x.cc(86,"div",26),x.vc(87,"async"),x.cc(88,"a",52),x.qc("click",function(){return x.Uc(e),x.uc(2).remove()}),x.bc(),x.Xb(89,"div",53),x.bc(),x.cc(90,"div",54),x.cc(91,"div",32),x.Xb(92,"div",55),x.bc(),x.bd(93,mt,9,24,"div",56),x.bc(),x.bc(),x.cc(94,"div",57),x.cc(95,"div",26),x.cc(96,"div",41,58),x.cc(98,"div",59),x.Xb(99,"a",60),x.cc(100,"div",61),x.gc(101,62),x.bc(),x.cc(102,"div",63),x.gc(103,64),x.bc(),x.bc(),x.bd(104,ft,5,3,"div",65),x.bc(),x.bc(),x.cc(105,"cu-slash-command",66,67),x.qc("applyCommand",function(t){return x.Uc(e),x.uc(2).applySlashCommand(t)})("onSelectCommand",function(t){return x.Uc(e),x.uc(2).selectCommand(t)})("onPage",function(t){return x.Uc(e),x.uc(2).checkPaging(t)}),x.vc(107,"async"),x.vc(108,"async"),x.vc(109,"async"),x.vc(110,"async"),x.vc(111,"membersToUsers"),x.vc(112,"async"),x.vc(113,"async"),x.vc(114,"async"),x.vc(115,"async"),x.vc(116,"async"),x.vc(117,"async"),x.vc(118,"async"),x.vc(119,"async"),x.cc(120,"input",68),x.qc("click",function(){return x.Uc(e),x.uc(2).slashCommandFocus()}),x.bc(),x.bc(),x.bc(),x.cc(121,"div",69),x.qc("click",function(){return x.Uc(e),x.uc(2).unselectTasks()}),x.Xb(122,"div",70),x.cc(123,"div",71),x.gc(124,72),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(2),t=x.Rc(12),i=x.Rc(6),o=x.Rc(14),n=x.Rc(16),s=x.Rc(10),c=x.Rc(18),a=x.Rc(20),r=x.Rc(22),l=x.Rc(24),d=x.Rc(26);let u=null,m=null,p=null,h=null,f=null,b=null,g=null,_=null,v=null,k=null,y=null,w=null,I=null,T=null;x.Ib(4),x.Dc("ngPlural",x.wc(6,81,e.selectedTasksCount$)>1?2:1),x.Ib(5),x.kc(x.wc(7,83,e.selectedTasksCount$)),x.hc(5),x.Ib(2),x.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",x.Gc(187,bt)),x.Ib(2),x.Dc("userGroups",x.wc(14,85,e.userGroups$))("users",e.subtaskView?x.wc(15,87,e.taskMembers$):x.wc(16,89,e.users$))("multiChoice",x.wc(17,91,e.multipleAssignees$))("showUnassign",!0)("weights",x.wc(18,93,e.weights$))("weightType",e.UserWeightType.ASSIGN)("showUnassigned",!0)("forBatch",!0)("search",!0)("enableFirstSelection",!1)("extraItemTemplate",i)("selectedUsers",e.usersSelected)("selectedUserGroups",e.groupsSelected),x.Ib(6),x.Dc("icon","assign-batch"),x.Ib(2),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(3),x.Dc("ngIf",!x.wc(25,95,e.isSimple$)),x.Ib(2),x.Dc("ngIf",x.wc(27,97,e.isSimple$)),x.Ib(4),x.Dc("tags",e.tags)("taskTags",x.wc(31,99,e.tag$))("tagsLoadingMap",e.tagsLoading)("spaceId",e.spaceId||(null==(u=x.wc(32,101,e.sharedData.compatCurrentProject$))?null:u.id))("dropdown-disabled",!x.wc(33,103,e.selectedTasksHaveTagsPermission$)||e.isAllProjects||!(null!=(m=x.wc(34,105,e.features$))&&null!=m.tags&&m.tags.enabled))("extraItemTemplate",i),x.Ib(5),x.Dc("tagsTooltip",e.isAllProjects?e.dashboardTableToolbarStringsService.notAvailableInAllSpacesText:null!=(p=x.wc(36,107,e.features$))&&null!=p.tags&&p.tags.enabled?x.wc(37,109,e.selectedTasksHaveTagsPermission$)?e.dashboardTableToolbarStringsService.setTagsText:e.dashboardTableToolbarStringsService.tagPermissionMessage:e.commonStringsService.clickAppNotTurnedOnSpaceText)("disabled",e.isAllProjects||!(null!=(h=x.wc(38,111,e.features$))&&null!=h.tags&&h.tags.enabled))("truncate",!0)("forBatch",!0),x.Ib(4),x.Dc("ngIf","subtask"!==x.wc(40,113,e.selectedTasksType$)),x.Ib(2),x.Dc("ngIf","subtask"===x.wc(42,115,e.selectedTasksType$)),x.Ib(2),x.Ob("move-task-option","mixed"===x.wc(44,117,e.selectedTasksType$)),x.Ib(2),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(2),x.Dc("ngIf",x.wc(48,119,e.selectedTasksHaveMovePermission$)&&!x.wc(49,121,e.disconnected$)&&!x.wc(50,123,e.isGuest$)&&"subtask"!==x.wc(51,125,e.selectedTasksType$)),x.Ib(7),x.Dc("ngTemplateOutlet",o)("ngTemplateOutletContext",x.Gc(188,bt)),x.Ib(1),x.Dc("ngIf",x.wc(56,127,e.selectedTasksHaveMovePermission$)&&!x.wc(57,129,e.disconnected$)&&!x.wc(58,131,e.isGuest$)&&"subtask"!==x.wc(59,133,e.selectedTasksType$)&&x.wc(60,135,e.subcategory$)&&(null==(f=x.wc(61,137,e.team$))?null:f.tasks_in_multiple_lists)),x.Ib(7),x.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",x.Gc(189,bt)),x.Ib(2),x.Dc("quickClear",!0)("dateOption",null==e.selectedDateItem?null:e.selectedDateItem.id)("extraItemTemplate",s)("readOnly",!(null!=(b=x.wc(65,139,e.features$))&&null!=b.due_dates&&b.due_dates.enabled)),x.Ib(2),x.Dc("icon","due-date")("ngClass",x.Hc(190,gt,!(null!=(g=x.wc(67,141,e.features$))&&null!=g.due_dates&&g.due_dates.enabled)))("cuTooltip",null!=(_=x.wc(68,143,e.features$))&&null!=_.due_dates&&_.due_dates.enabled?e.commonStringsService.setDatesText:e.commonStringsService.clickAppNotTurnedOnSpaceText),x.Ib(3),x.Dc("ngTemplateOutlet",c)("ngTemplateOutletContext",x.Gc(192,bt)),x.Ib(1),x.Dc("ngIf",null==(v=x.wc(71,145,e.milestoneFeatures$))||null==v.milestones?null:v.milestones.enabled),x.Ib(2),x.Dc("ngTemplateOutlet",a)("ngTemplateOutletContext",x.Gc(193,bt)),x.Ib(1),x.Dc("ngTemplateOutlet",r)("ngTemplateOutletContext",x.Gc(194,bt)),x.Ib(1),x.Dc("ngTemplateOutlet",l)("ngTemplateOutletContext",x.Gc(195,bt)),x.Ib(1),x.Dc("dropdownDisabled",!x.wc(77,147,e.selectedTasksHaveCfPermission$)||!(null!=(k=x.wc(78,149,e.projectFeatures$))&&null!=k.custom_fields&&k.custom_fields.enabled)||!(null!=(k=x.wc(79,151,e.customFields$))&&k.length))("dropdownCloseOnInsideClick",!1),x.Ib(5),x.Dc("icon","edit-custom-fields")("cuTooltip",null!=(y=x.wc(81,153,e.projectFeatures$))&&null!=y.custom_fields&&y.custom_fields.enabled?x.wc(82,155,e.selectedTasksHaveCfPermission$)?null!=(y=x.wc(83,157,e.customFields$))&&y.length?e.dashboardTableToolbarStringsService.setCustomFieldsTooltipText:e.dashboardTableToolbarStringsService.noAvailableCfTooltipText:e.dashboardTableToolbarStringsService.cfPermissionsMessage:e.commonStringsService.clickAppNotTurnedOnSpaceText),x.Ib(5),x.Dc("ngTemplateOutlet",d)("ngTemplateOutletContext",x.Gc(196,bt)),x.Ib(1),x.Ob("move-task-option",!x.wc(87,159,e.selectedTasksHaveRemovePermission$)),x.Ib(2),x.Dc("icon","cu2-trash"),x.Ib(2),x.Dc("dropdownPreventDocumentScroll",!1),x.Ib(6),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(3),x.Dc("icon","copy-clipboard"),x.Ib(6),x.Dc("dateFormatting",null==(w=x.wc(107,161,e.user$))?null:w.date_format)("militaryTime",null==(I=x.wc(108,163,e.user$))?null:I.twenty_four_hr_setting)("meUser",x.wc(109,165,e.user$))("weights",x.wc(110,167,e.weights$))("users",e.subtaskView?x.wc(111,169,x.wc(112,171,e.taskMembers$)):x.wc(113,173,e.users$))("statuses",e.statusList||x.wc(114,175,e.toolbarStatuses$))("tags",e.tags)("priorities",e.priorities)("allowedCommands",x.Kc(197,_t,null==(T=x.wc(115,177,e.features$))||null==T.priorities?null:T.priorities.enabled,null==(T=x.wc(116,179,e.features$))||null==T.due_dates?null:T.due_dates.enabled,null==(T=x.wc(117,181,e.features$))||null==T.due_dates?null:T.due_dates.enabled,(null==(T=x.wc(118,183,e.features$))||null==T.tags?null:T.tags.enabled)&&x.wc(119,185,e.selectedTasksHaveTagsPermission$)))("currentValues",x.Gc(202,vt))("options",x.Hc(204,yt,x.Gc(203,kt)))}}const xt=function(e,t,i){return{"cu-dt-controls_no-header":e,"cu-dt-controls_favorites-pinned":t,"cu-dt-controls_task-view":i}};function It(e,t){if(1&e&&(x.cc(0,"div",14),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.bd(7,wt,125,206,"div",15),x.bc()),2&e){const e=x.uc();let t=null;x.Dc("ngClass",x.Jc(15,xt,((null==(t=x.wc(1,3,e.user$))?null:t.dashboard)===e.LayoutVersion.Three||(null==(t=x.wc(2,5,e.user$))?null:t.dashboard)===e.LayoutVersion.Four)&&!x.wc(3,7,e.favoritesPinned$),((null==(t=x.wc(4,9,e.user$))?null:t.dashboard)===e.LayoutVersion.Three||(null==(t=x.wc(5,11,e.user$))?null:t.dashboard)===e.LayoutVersion.Four)&&x.wc(6,13,e.favoritesPinned$),e.taskView))("@slideInDownOutUp",void 0),x.Ib(7),x.Dc("ngIf",e.display)}}function Tt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",148),x.cc(1,"div",149),x.gc(2,150),x.bc(),x.bc(),x.cc(3,"div",151),x.cc(4,"button",152),x.qc("click",function(){return x.Uc(e),x.uc().subtaskCancelModal()}),x.gc(5,153),x.bc(),x.cc(6,"button",154),x.qc("click",function(){return x.Uc(e),x.uc().subtaskConfirmModal()}),x.gc(7,155),x.bc(),x.bc()}}function Ct(e,t){}function Dt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",156),x.cc(1,"label"),x.cc(2,"input",157),x.qc("ngModelChange",function(t){return x.Uc(e),x.uc().sendNotifications=t})("ngModelChange",function(t){return x.Uc(e),x.uc().updateSendNotificationPreference(t)}),x.bc(),x.cc(3,"div",158),x.gc(4,159),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Ib(2),x.Dc("value",1)("ngModel",e.sendNotifications)("checked",e.sendNotifications)}}function Ot(e,t){if(1&e){const e=x.dc();x.cc(0,"div",156),x.cc(1,"label"),x.cc(2,"input",157),x.qc("ngModelChange",function(t){return x.Uc(e),x.uc().cfSendNotifications=t})("ngModelChange",function(t){return x.Uc(e),x.uc().updateCfSendNotificationPreference(t)}),x.bc(),x.cc(3,"div",158),x.gc(4,160),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Ib(2),x.Dc("value",1)("ngModel",e.cfSendNotifications)("checked",e.cfSendNotifications)}}function St(e,t){if(1&e){const e=x.dc();x.cc(0,"div",161),x.Yb(1,81),x.cc(2,"div",162),x.ac(3),x.gc(4,163),x.Zb(),x.dd(5,": "),x.cc(6,"cu-dropdown-list",164),x.qc("onOpen",function(){return x.Uc(e),x.uc().dateDropdownOpen=!0})("onClose",function(){return x.Uc(e),x.uc().dateDropdownOpen=!1})("onSelect",function(t){return x.Uc(e),x.uc().setDateItem(t)}),x.cc(7,"div",165),x.cc(8,"div",166),x.dd(9),x.bc(),x.Xb(10,"div",167),x.bc(),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(),t=x.Rc(6);x.Ib(1),x.Dc("ngTemplateOutlet",t),x.Ib(5),x.Dc("items",e.setDateItems),x.Ib(1),x.Ob("cu-dashboard-table-toolbar__date-container-open",e.dateDropdownOpen),x.Ib(2),x.fd(" ",null==e.selectedDateItem?null:e.selectedDateItem.title," ")}}function Et(e,t){1&e&&x.Xb(0,"a",171),2&e&&x.Dc("icon","watch")}const Pt=function(e){return{id:"watchers",title:e,icon:"activity-watcher"}};function jt(e,t){if(1&e&&x.Xb(0,"cu-dropdown-list-item",172),2&e){const e=x.uc(2);x.Dc("item",x.Hc(1,Pt,e.dashboardTableToolbarStringsService.setWatchersText))}}function At(e,t){if(1&e){const e=x.dc();x.cc(0,"div",26),x.cc(1,"cu-user-list-dropdown",168),x.qc("onChange",function(t){return x.Uc(e),x.uc().setSelected(t,"watchers")})("onUserGroupsChanged",function(t){return x.Uc(e),x.uc().setSelected(t,"group")})("onClose",function(){return x.Uc(e),x.uc().resetSelected()}),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.bd(5,Et,1,1,"a",169),x.bd(6,jt,1,3,"cu-dropdown-list-item",170),x.bc(),x.bc()}if(2&e){const e=t.inDropdown,i=x.uc(),o=x.Rc(6);x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Ib(1),x.Dc("users",i.subtaskView?x.wc(2,14,i.taskMembers$):x.wc(3,16,i.users$))("userGroups",x.wc(4,18,i.userGroups$))("multiChoice",!0)("showUnassign",!0)("forBatch",!0)("showReassign",!1)("search",!0)("enableFirstSelection",!1)("selectedUsers",i.usersSelected)("extraItemTemplate",o),x.Ib(4),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function $t(e,t){1&e&&x.Xb(0,"a",177),2&e&&x.Dc("icon","copy")}const Ut=function(e,t){return{id:"copyTask",title:e,icon:"copy",disabled:t}};function Rt(e,t){if(1&e&&(x.Xb(0,"cu-dropdown-list-item",172),x.vc(1,"async")),2&e){const e=x.uc(3);x.Dc("item",x.Ic(3,Ut,e.dashboardTableToolbarStringsService.duplicateTasksText,"mixed"===x.wc(1,1,e.selectedTasksType$)))}}function Mt(e,t){if(1&e){const e=x.dc();x.cc(0,"div"),x.cc(1,"div",98),x.cc(2,"div",178),x.cc(3,"cu-category-list",179),x.qc("onSelect",function(t){return x.Uc(e),x.uc(3).selectCopyCategory(t)}),x.bc(),x.bc(),x.bc(),x.bc()}2&e&&(x.ad("width",250,"px"),x.Ib(3),x.Dc("showAdvanced",!0))}function Ft(e,t){if(1&e&&(x.cc(0,"div",26),x.vc(1,"async"),x.cc(2,"div",41,174),x.cc(4,"div",32),x.bd(5,$t,1,1,"a",175),x.bd(6,Rt,2,6,"cu-dropdown-list-item",170),x.bc(),x.bd(7,Mt,4,3,"div",42),x.bc(),x.Xb(8,"div",176),x.bc()),2&e){const e=x.uc().inDropdown,t=x.uc();x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e)("move-task-option","mixed"===x.wc(1,7,t.selectedTasksType$)),x.Ib(2),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(3),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function Lt(e,t){if(1&e&&(x.bd(0,Ft,9,9,"div",173),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async")),2&e){const e=x.uc();x.Dc("ngIf",x.wc(1,1,e.selectedTasksHaveMovePermission$)&&!x.wc(2,3,e.disconnected$)&&!x.wc(3,5,e.isGuest$))}}function Nt(e,t){if(1&e){const e=x.dc();x.cc(0,"a",184),x.qc("click",function(){return x.Uc(e),x.uc(3).moveSubtask()}),x.bc()}}const zt=function(e){return{id:"moveSubtask",title:e,icon:"move-batch"}};function qt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-dropdown-list-item",119),x.qc("click",function(){return x.Uc(e),x.uc(3).moveSubtask()}),x.bc()}if(2&e){const e=x.uc(3);x.Dc("item",x.Hc(1,zt,e.commonStringsService.moveSubtasksText))}}function Gt(e,t){if(1&e&&(x.cc(0,"div",26),x.bd(1,Nt,1,0,"a",182),x.bd(2,qt,1,3,"cu-dropdown-list-item",183),x.bc()),2&e){const e=x.uc().inDropdown;x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Ib(1),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function Vt(e,t){}function Bt(e,t){if(1&e&&(x.bd(0,Gt,3,4,"div",180),x.vc(1,"async"),x.bd(2,Vt,0,0,"ng-template",null,181,x.cd)),2&e){const e=x.uc();x.Dc("ngIf","subtask"===x.wc(1,1,e.selectedTasksType$))}}function Xt(e,t){if(1&e&&(x.Xb(0,"cu-priorities-view",188),x.vc(1,"async"),x.vc(2,"async")),2&e){const e=x.uc(2);let t=null,i=null;x.Dc("prioritiesTooltip",null!=(t=x.wc(1,3,e.features$))&&null!=t.priorities&&t.priorities.enabled?e.dashboardTableToolbarStringsService.setPriorityText:e.commonStringsService.clickAppNotTurnedOnSpaceText)("disabled",!(null!=(i=x.wc(2,5,e.features$))&&null!=i.priorities&&i.priorities.enabled))("forBatch",!0)}}const Ht=function(e,t){return{id:"priorities",title:e,icon:"activity-priority",disabled:t}};function Wt(e,t){if(1&e&&(x.Xb(0,"cu-dropdown-list-item",172),x.vc(1,"async")),2&e){const e=x.uc(2);let t=null;x.Dc("item",x.Ic(3,Ht,e.dashboardTableToolbarStringsService.setPriorityText,!(null!=(t=x.wc(1,1,e.features$))&&null!=t.priorities&&t.priorities.enabled)))}}function Kt(e,t){if(1&e){const e=x.dc();x.cc(0,"div",26),x.cc(1,"cu-priority-list-dropdown",185,186),x.qc("onChange",function(t){x.Uc(e);const i=x.Rc(2),o=x.uc();return i.dropdown.close(),o.setPriority(t)}),x.vc(3,"async"),x.bd(4,Xt,3,7,"cu-priorities-view",187),x.bd(5,Wt,2,6,"cu-dropdown-list-item",170),x.bc(),x.bc()}if(2&e){const e=t.inDropdown,i=x.uc(),o=x.Rc(6);let n=null;x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Ib(1),x.Dc("disabled",!(null!=(n=x.wc(3,8,i.features$))&&null!=n.priorities&&n.priorities.enabled))("forBatch",!0)("closeOnInsideClick",!1)("extraItemTemplate",o),x.Ib(3),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function Qt(e,t){if(1&e){const e=x.dc();x.cc(0,"a",190),x.qc("click",function(){return x.Uc(e),x.uc(2).openDependencyModal()}),x.bc()}2&e&&x.Dc("icon","dependency-batch")}const Zt=function(e){return{id:"dependency",title:e,icon:"dependency"}};function Yt(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-dropdown-list-item",119),x.qc("click",function(){return x.Uc(e),x.uc(2).openDependencyModal()}),x.bc()}if(2&e){const e=x.uc(2);x.Dc("item",x.Hc(1,Zt,e.commonStringsService.dependenciesText))}}function Jt(e,t){if(1&e&&(x.cc(0,"div",26),x.bd(1,Qt,1,1,"a",189),x.bd(2,Yt,1,3,"cu-dropdown-list-item",183),x.bc()),2&e){const e=t.inDropdown;x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Ib(1),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function ei(e,t){1&e&&x.Xb(0,"a",195),2&e&&x.Dc("icon","merge")}const ti=function(e){return{id:"merge",title:e,icon:"activity-merged"}};function ii(e,t){if(1&e&&x.Xb(0,"cu-dropdown-list-item",172),2&e){const e=x.uc(2);x.Dc("item",x.Hc(1,ti,e.commonStringsService.mergeTasksText))}}function oi(e,t){if(1&e&&(x.mc(0,199,1),x.Yb(1),x.jc()),2&e){const e=x.uc(3);x.Ib(1),x.kc(null==e.selectedMergeTask?null:e.selectedMergeTask.name),x.hc(0)}}function ni(e,t){1&e&&(x.cc(0,"div",211),x.cc(1,"div",212),x.Xb(2,"div",213),x.bc(),x.cc(3,"div",214),x.gc(4,215),x.bc(),x.bc())}function si(e,t){if(1&e){const e=x.dc();x.cc(0,"div",196),x.cc(1,"div",197),x.cc(2,"div",198),x.mc(3,199),x.bd(4,oi,2,1,"ng-container",73),x.jc(),x.bc(),x.cc(5,"div",200),x.qc("click",function(){return x.Uc(e),x.uc(),x.Rc(1).close()}),x.bc(),x.bc(),x.bd(6,ni,5,0,"div",201),x.cc(7,"cu-task-selector",202),x.qc("onSelect",function(t){return x.Uc(e),x.uc(2).selectMergeTask(t.task)}),x.vc(8,"async"),x.bc(),x.cc(9,"div",203),x.Xb(10,"div",204),x.cc(11,"div",205),x.ac(12),x.gc(13,206),x.Zb(),x.cc(14,"a",207),x.gc(15,208),x.bc(),x.dd(16,". "),x.bc(),x.cc(17,"button",209),x.qc("click",function(){x.Uc(e),x.uc();const t=x.Rc(1),i=x.uc();return i.bulkMerge(i.selectedMergeTask),t.close()}),x.gc(18,210),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(2);x.Ib(4),x.Dc("ngIf",e.selectedMergeTask),x.Ib(1),x.Dc("icon","cu2-close-2"),x.Ib(1),x.Dc("ngIf",e.mergeError),x.Ib(1),x.Dc("modifier","task-selector__multi-task-toolbar")("defaultProject",x.wc(8,14,e.sharedData.compatCurrentProject$))("requireCreateAndEdit",!0)("searchSubtasks",!0)("excludeParentTask",!1)("description",null)("expandableSubtasks",!0),x.Ib(3),x.Dc("icon","info3"),x.Ib(7),x.Ob("disabled",!e.selectedMergeTask),x.Dc("disabled",!e.selectedMergeTask)}}function ci(e,t){if(1&e){const e=x.dc();x.cc(0,"div",191,192),x.qc("dropdownClose",function(){return x.Uc(e),x.uc().resetMergeTask()}),x.cc(2,"div",32),x.bd(3,ei,1,1,"a",193),x.bd(4,ii,1,3,"cu-dropdown-list-item",170),x.bc(),x.bd(5,si,19,16,"div",194),x.bc()}if(2&e){const e=t.inDropdown;x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(3),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function ai(e,t){1&e&&x.Xb(0,"a",218),2&e&&x.Dc("icon","bulk-link")("cuTooltip","Task Linking")}const ri=function(e){return{id:"linkTasks",title:e,icon:"bulk-link"}};function li(e,t){if(1&e&&x.Xb(0,"cu-dropdown-list-item",172),2&e){const e=x.uc(2);x.Dc("item",x.Hc(1,ri,e.dashboardTableToolbarStringsService.tasksLinkingText))}}function di(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-task-selector",229),x.qc("onSelect",function(t){return x.Uc(e),x.uc(3).selectMergeTask(t.task)}),x.vc(1,"async"),x.bc()}if(2&e){const e=x.uc(3);x.Dc("modifier","task-selector__multi-task-toolbar")("defaultProject",x.wc(1,7,e.sharedData.compatCurrentProject$))("requireCreateAndEdit",!0)("searchSubtasks",!0)("excludeParentTask",!1)("description",null)("expandableSubtasks",!0)}}function ui(e,t){if(1&e&&(x.ac(0),x.gc(1,230),x.Zb()),2&e){const e=x.uc(3);x.Ib(1),x.kc(e.selectedMergeTask?null==e.selectedMergeTask?null:e.selectedMergeTask.name:"a specific task"),x.hc(1)}}function mi(e,t){1&e&&(x.ac(0),x.gc(1,231),x.Zb())}function pi(e,t){if(1&e){const e=x.dc();x.cc(0,"div",196),x.cc(1,"div",197),x.cc(2,"div",198),x.gc(3,219),x.bc(),x.cc(4,"div",200),x.qc("click",function(){return x.Uc(e),x.uc(),x.Rc(1).close()}),x.bc(),x.bc(),x.cc(5,"div",220),x.cc(6,"button",221),x.qc("click",function(){return x.Uc(e),x.uc(2).bulkLinkRelationship="many"}),x.Xb(7,"div",222),x.ac(8),x.gc(9,223),x.Zb(),x.bc(),x.cc(10,"button",224),x.qc("click",function(){return x.Uc(e),x.uc(2).bulkLinkRelationship="one"}),x.Xb(11,"div",225),x.ac(12),x.gc(13,226),x.Zb(),x.bc(),x.bc(),x.bd(14,di,2,9,"cu-task-selector",227),x.cc(15,"div",203),x.Xb(16,"div",204),x.cc(17,"div",205),x.bd(18,ui,2,1,"ng-container",73),x.bd(19,mi,2,0,"ng-container",73),x.bc(),x.cc(20,"button",209),x.qc("click",function(){x.Uc(e),x.uc();const t=x.Rc(1),i=x.uc();return i.bulkLink(i.selectedMergeTask),t.close()}),x.gc(21,228),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc(2);x.Ib(4),x.Dc("icon","cu2-close-2"),x.Ib(2),x.Ob("cu-btn_outline","many"!==e.bulkLinkRelationship),x.Dc("disabled",1===e.selectedTasks.selectedTaskList.length)("cuTooltip",1===e.selectedTasks.selectedTaskList.length?e.dashboardTableToolbarStringsService.m2mTooltipText:null),x.Ib(4),x.Ob("cu-btn_outline","one"!==e.bulkLinkRelationship),x.Ib(4),x.Dc("ngIf","one"===e.bulkLinkRelationship),x.Ib(2),x.Dc("icon","info3"),x.Ib(2),x.Dc("ngIf","one"===e.bulkLinkRelationship),x.Ib(1),x.Dc("ngIf","many"===e.bulkLinkRelationship),x.Ib(1),x.Ob("disabled",!e.selectedMergeTask&&"one"===e.bulkLinkRelationship),x.Dc("disabled",!e.selectedMergeTask&&"one"===e.bulkLinkRelationship)}}function hi(e,t){if(1&e){const e=x.dc();x.cc(0,"div",191,216),x.qc("dropdownClose",function(){return x.Uc(e),x.uc().resetMergeTask()}),x.cc(2,"div",32),x.bd(3,ai,1,2,"a",217),x.bd(4,li,1,3,"cu-dropdown-list-item",170),x.bc(),x.bd(5,pi,22,14,"div",194),x.bc()}if(2&e){const e=t.inDropdown;x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Dc("dropdownCloseOnInsideClick",!1),x.Ib(3),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}function fi(e,t){if(1&e){const e=x.dc();x.cc(0,"a",233),x.qc("click",function(){return x.Uc(e),x.uc(2).toggleArchive()}),x.vc(1,"async"),x.bc()}if(2&e){const e=x.uc(2);x.Dc("icon","archive-batch")("cuTooltip",x.wc(1,2,e.selectedTasksAllArchived$)?e.dashboardTableToolbarStringsService.unarchiveTasks:e.dashboardTableToolbarStringsService.archiveTasks)}}const bi=function(e){return{id:"archiveTask",title:e,icon:"archive3"}};function gi(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-dropdown-list-item",119),x.qc("click",function(){return x.Uc(e),x.uc(2).toggleArchive()}),x.vc(1,"async"),x.bc()}if(2&e){const e=x.uc(2);x.Dc("item",x.Hc(3,bi,x.wc(1,1,e.selectedTasksAllArchived$)?e.dashboardTableToolbarStringsService.unarchiveTasks:e.dashboardTableToolbarStringsService.archiveTasks))}}function _i(e,t){if(1&e&&(x.cc(0,"div",26),x.bd(1,fi,2,4,"a",232),x.bd(2,gi,2,5,"cu-dropdown-list-item",183),x.bc()),2&e){const e=t.inDropdown;x.Ob("cu-dt-controls__action-batch-option_hide-on-small-screen",!e),x.Ib(1),x.Dc("ngIf",!e),x.Ib(1),x.Dc("ngIf",e)}}const vi={[A.G.name]:!0,[A.ab.name]:!0};var ki=function(e){return e.BOTH="both",e.START="start",e.DUE="due",e}({});const yi={id:ki.BOTH,title:"Start and Due Date",default:!0,checkType:"check",checked:!0};let wi=(()=>{class e{constructor(e,t,i,s,c,a,r,m,g,_,v){this.sharedData=e,this.commonStringsService=t,this.dashboardTableToolbarStringsService=i,this.taskService=s,this.modalService=c,this.navService=a,this.resolver=r,this.store=m,this.clipboard=g,this.localStorage=_,this.injector=v,this.tag$=new l.a([]),this.tagList$=new l.a([]),this.destroy$=new d.a,this.sharedStatusList=[],this.categoryList=[],this.usersSelected=[],this.usersToRemove=[],this.groupsSelected=[],this.groupsToRemove=[],this.searchString="",this.unassign=!1,this.debounceSetWatchers=new d.a,this.debounceSetAssignees=new d.a,this.dateDropdownOpen=!1,this.setDateItems=[yi,{id:ki.DUE,title:this.commonStringsService.dueDateText,checkType:"check",checked:!1},{id:ki.START,title:this.commonStringsService.startDateText,checkType:"check",checked:!1}],this.selectedDateItem=this.localStorage.get("mtt_date_selection")?this.getDefaultDateSelection():yi,this.defaultFeatures={priorities:{enabled:!0,priorities:[]},due_dates:{enabled:!0,remap_due_dates:!0}},this.priorities=C.a,this.tasksCache$=this.store.select(P.g),this.user$=this.store.select(n.getUser),this.users$=this.store.select(n.getSelectedProjectCategoryAndSubcategoryIds).pipe(Object(p.a)(({selectedProjectId:e,selectedCategoryId:t,selectedSubCategoryId:i})=>this.store.pipe(Object(O.select)(Object(S.e)(e,t,i))))),this.taskMembers$=this.store.select(Z.w),this.toolbarStatuses$=this.store.select(n.getToolbarStatuses),this.fetchingToolbarStatuses$=this.store.pipe(Object(O.select)(n.getFetchingToolbarStatuses)),this.dashboardStatuses$=this.store.pipe(Object(O.select)(n.getDashboardStatuses),Object(h.a)(e=>e||I.a)),this.inputStatuses$=new l.a(null),this.statuses$=Object(u.a)([this.inputStatuses$,this.dashboardStatuses$]).pipe(Object(h.a)(([e,t])=>e&&e.length?e:t)),this.isSimple$=this.statuses$.pipe(Object(h.a)(e=>e&&e.length<=2)),this.project$=this.store.select(n.getProject),this.projects$=this.store.select(n.getProjectsWithSharedLinear),this.projectsMap$=this.store.select(n.getAllProjectsMap),this.team$=this.store.select(n.getTeam),this.isGuest$=this.store.select(n.isGuestTeam),this.disconnected$=this.store.pipe(Object(O.select)(V.b)),this.dashboardFeatures$=this.project$.pipe(Object(h.a)(e=>e&&e.features||this.defaultFeatures)),this.projectFeatures$=this.store.select(n.getProjectFeatures),this.milestoneFeatures$=this.store.select(n.getProjectMilestoneFeatures),this.weights$=this.store.select(n.getUserWeights),this.UserWeightType=o.c,this.favoritesPinned$=this.store.pipe(Object(O.select)(U.g)),this.customFields$=this.store.select(F.n).pipe(Object(f.a)(e=>!!e),Object(h.a)(e=>e.filter(e=>{const t=N.e[e.type];return t&&!t.isAutomaticValue}))),this.trackById=Object(L.d)("id"),this.clipboardFields=[A.G,A.ab,A.k,A.S,A.y],this.clipboardOptions=this.localStorage.get("copyClipboardOptions")||vi,this.clipboardOptionsEnabled=!0,this.sendNotifications="true"!==this.localStorage.get("muteNotifications"),this.cfSendNotifications="false"===this.localStorage.get("cfMuteNotifications"),this.LayoutVersion=T.b,this.bulkLinkRelationship="many",this.moveOrMultilistTabActive="move",this.mergeError=!1,this.display=!1,this.taskView=!1,this.subtaskView=!1,this.tags=[],this.isAllProjects=!1,this.canDelete=!0,this.onSyncTaskView=new x.o,this.userGroups$=this.store.select(W.c),this.isStaging=Object(G.f)(),this.subcategory$=this.store.select(n.getSubcategory),this.moveTasksTooltipText$=this.team$.pipe(Object(h.a)(e=>e.tasks_in_multiple_lists?this.dashboardTableToolbarStringsService.moveTasksOrAddToListsText:this.dashboardTableToolbarStringsService.moveTasksText),Object(b.a)()),this.trackByName=e=>e.name}deselectEventsOnEsc(e){this.display&&this.unselectTasks()}slashCommandsHotKey(e){this.display&&Object($.b)(e)&&(e.preventDefault(),this.slashCommand.activate(""))}slashCommandFocus(){this.slashCommand.hostActive||this.slashCommand.activate("")}ngOnInit(){this.features$=this.inputFeatures?Object(m.a)(this.inputFeatures):this.dashboardFeatures$,this.multipleAssignees$=Object(u.a)([this.project$,this.selectedTasks.selectedTaskList$,this.projectsMap$]).pipe(Object(h.a)(([e,t,i])=>e?e.multiple_assignees:t.every(e=>i[e.project_id]&&i[e.project_id].multiple_assignees)),Object(g.a)(e=>this.multipleAssignees=e)),this.selectedTasksType$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>{if(e&&e.length){let t=!1,i=!1;if(e.forEach(e=>{t=t||!e.parent,i=i||!!e.parent}),t&&i)return"mixed";if(i)return"subtask"}return"task"})),this.selectedTasksCount$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>e&&e.length)),this.convertToSubtasksTooltipMsg$=this.selectedTasksCount$.pipe(Object(h.a)(e=>e>1?$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_convert-to-subtasks:Convert to Subtasks`:$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_convert-to-subtask:Convert to Subtask`),Object(b.a)()),this.convertToTasksTooltipMsg$=this.selectedTasksCount$.pipe(Object(h.a)(e=>e>1?$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_convert-to-tasks:Convert to tasks`:$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_convert-to-task:Convert to task`),Object(b.a)()),this.multipleSubcatgories$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>{if(!e||!e.length)return!1;const t={};return e.filter(e=>e&&e.subcategory).forEach(e=>{t[e.subcategory.id]=!0}),Object.keys(t).length>1})),this.selectedTasksAllArchived$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(()=>this.selectedTasks.isAllArchived())),this.selectedTasksHaveMilestonePermission$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>e&&e.every(e=>e.permissions&&e.permissions.can_create_milestone))),this.selectedTasksHaveRemovePermission$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>e&&e.every(e=>e.permissions&&e.permissions.delete))),this.selectedTasksHaveTagsPermission$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>e&&e.every(e=>e.permissions&&(e.permissions.manage_tags||e.permissions.add_tags)))),this.selectedTasksHaveCfPermission$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>e&&e.every(e=>e.permissions&&e.permissions.set_custom_field_values))),this.selectedTasksHaveMovePermission$=this.selectedTasks.selectedTaskList$.pipe(Object(h.a)(e=>e&&e.every(e=>e.permissions&&e.permissions.move_task))),this.navService.compatCategoryList$.pipe(Object(f.a)(e=>!!e),Object(_.a)(this.destroy$)).subscribe(e=>{this.categoryList=e}),this.debounceSetWatchers.pipe(Object(v.a)(1e3)).pipe(Object(_.a)(this.destroy$)).subscribe(this.setFollowers.bind(this)),this.debounceSetAssignees.pipe(Object(v.a)(1e3)).pipe(Object(_.a)(this.destroy$)).subscribe(this.setAssignees.bind(this)),this.selectedTasks.selectedTaskList$.pipe(Object(k.a)("length"),Object(_.a)(this.destroy$)).subscribe(e=>{this.bulkLinkRelationship=1===e.length?"one":"many"})}ngAfterViewInit(){this.dropdown&&this.dropdown.dropdownClose.pipe(Object(_.a)(this.destroy$)).subscribe(()=>{this.clearSearch()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}fetchStatuses(){this.taskView||this.store.dispatch(new Q.ed)}tagsDropdownClosed(){this.tag$.next([])}setAssignees(){(this.usersSelected.length||this.usersToRemove.length||this.groupsSelected.length||this.groupsToRemove.length||this.unassign)&&(this.taskService.setBatchAssignees(this.selectedTasks.selectedTaskList,this.usersSelected,this.usersToRemove,this.multipleAssignees,!1,!0,!this.sendNotifications,this.groupsSelected,this.groupsToRemove),this.unassign=!1)}reassignUser(e){this.taskService.setBatchAssignees(this.selectedTasks.selectedTaskList,[e],[],this.multipleAssignees,!0),this.unassign=!1}reassignUserGroup(e){this.taskService.setBatchAssignees(this.selectedTasks.selectedTaskList,[],[],this.multipleAssignees,!0,!1,!1,[e],[]),this.unassign=!1}setFollowers(){(this.usersSelected.length||this.usersToRemove.length||this.unassign)&&(this.taskService.setFollowers(this.selectedTasks.selectedTaskList,this.usersSelected,this.usersToRemove,!0,!this.sendNotifications),this.unassign=!1)}setSelected(e,t){"group"===t?!e||1===e.length&&"unassigned"===e[0].id?(this.unassign=!0,this.groupsSelected=[],this.groupsToRemove=[]):(this.groupsSelected.forEach(t=>{let i=!1;e.forEach(e=>{e.id===t.id&&(i=!0)}),i||this.groupsToRemove.push(t)}),this.groupsToRemove=this.groupsToRemove.filter(t=>!e.find(e=>e.id===t.id)),this.groupsSelected=e):!e||1===e.length&&"unassigned"===e[0].id?(this.unassign=!0,this.usersSelected=[],this.usersToRemove=[]):(this.usersSelected.forEach(t=>{let i=!1;e.forEach(e=>{e.id===t.id&&(i=!0)}),i||this.usersToRemove.push(t)}),this.usersToRemove=this.usersToRemove.filter(t=>!e.find(e=>e.id===t.id)),this.usersSelected=e),"watchers"===t?this.debounceSetWatchers.next():this.debounceSetAssignees.next()}setDateItem(e){this.localStorage.set("mtt_date_selection",e.id),this.selectedDateItem=e,this.setDateItems=this.setDateItems.map(t=>Object.assign(Object.assign({},t),{checked:t.id===e.id}))}getDefaultDateSelection(){const e=this.setDateItems.find(e=>e.id===this.localStorage.get("mtt_date_selection"));return this.setDateItems=this.setDateItems.map(t=>Object.assign(Object.assign({},t),{checked:t.id===e.id})),e}setDueDate(e,t=!1){e.sendRequest&&(e=t?this.createDatesPayload(e):e,this.taskService.setDueDates(this.selectedTasks.selectedTaskList,{mode:e.mode,dueDate:e.dueDate,startDate:e.startDate,dueDateTime:e.dueDateTime,startDateTime:e.startDateTime},!0,!1,!0,!0,!this.sendNotifications,!0))}createDatesPayload(e){switch(this.selectedDateItem.id){case ki.DUE:return{dueDate:e.dueDate,dueDateTime:e.dueDateTime,mode:"dueOnly"};case ki.START:return{startDate:e.startDate,startDateTime:e.startDateTime,mode:"startOnly"};default:return e}}setTag(e){Object(u.a)([this.tag$]).pipe(Object(y.a)(1),Object(_.a)(this.destroy$)).subscribe(t=>{const i=t[0].slice();this.tag$.next([...i,e]),this.taskService.setTag(this.selectedTasks.selectedTaskList,e,!0,!this.sendNotifications),this.store.dispatch(Object(M.a)({projectId:this.spaceId,tag:e})),this.taskView&&this.onSyncTaskView.emit({type:"add",subtasks:this.selectedTasks.selectedTaskList,tag:e})})}removeTag(e){Object(u.a)([this.tag$]).pipe(Object(y.a)(1),Object(_.a)(this.destroy$)).subscribe(t=>{const i=t[0].slice(),o=i.findIndex(t=>t.name===e.name);-1!==o&&i.splice(o,1),this.tag$.next(i)}),this.taskView&&this.onSyncTaskView.emit({type:"remove",subtasks:this.selectedTasks.selectedTaskList,tag:e}),this.taskService.removeTag(this.selectedTasks.selectedTaskList,e,!0)}renameTag({tag:e,newName:t}){Object(u.a)([this.tag$]).pipe(Object(y.a)(1),Object(_.a)(this.destroy$)).subscribe(i=>{const o=i[0].slice().map(i=>i.name===e.name?Object.assign(Object.assign({},i),{name:t}):i);this.tag$.next(o),this.store.dispatch(Object(M.o)({projectId:this.spaceId,newName:t,tag:e})),this.taskView&&this.onSyncTaskView.emit({type:"rename",subtasks:this.selectedTasks.selectedTaskList,tag:e,newName:t})})}colorChange({tag:e,newColor:t}){Object(u.a)([this.tag$]).pipe(Object(y.a)(1),Object(_.a)(this.destroy$)).subscribe(i=>{const o=i[0].slice().map(i=>i.name===e.name?Object.assign(Object.assign({},i),{tag_fg:t,tag_bg:t}):i);this.tag$.next(o),this.store.dispatch(Object(M.c)({projectId:this.spaceId,newColor:t,tag:e})),this.taskView&&this.onSyncTaskView.emit({type:"colorChange",subtasks:this.selectedTasks.selectedTaskList,tag:e,newColor:t})})}deleteTag(e){Object(u.a)([this.tag$]).pipe(Object(y.a)(1),Object(_.a)(this.destroy$)).subscribe(t=>{const i=t[0].slice(),o=i.findIndex(t=>t.name===e.name);-1!==o&&i.splice(o,1),this.tag$.next(i),this.store.dispatch(Object(M.d)({projectId:this.spaceId,tagName:e.name})),this.taskView&&this.onSyncTaskView.emit({type:"delete",subtasks:this.selectedTasks.selectedTaskList,tag:e})})}setPriority(e){this.taskService.setPriorities(this.selectedTasks.selectedTaskList,e,!0,!this.sendNotifications)}selectStatus(e){this.taskService.setStatus(this.selectedTasks.selectedTaskList,e,this.selectedTasks,null,null,null,Object(E.l)(e)?200:100,!0,!this.sendNotifications)}updateMilestones(e=!1){this.taskService.setTaskMilestones(this.selectedTasks.selectedTaskList,e?o.a.MILESTONE:o.a.NONE)}selectCopyCategory(e){this.copyTasksDropdownList.close();const t=this.selectedTasks.selectedTaskList.some(e=>{var t;return(null===(t=null==e?void 0:e.subtasks)||void 0===t?void 0:t.length)||(null==e?void 0:e.subtasks_count)});if(e.advanced){const i=this.modalService.openComponent(K.a,this.injector,{title:this.commonStringsService.duplicateTask});i.instance.bulkCopy=!0,i.instance.inputtedTask=this.selectedTasks.selectedTaskList[0],i.instance.atLeastOneTaskIncludesSubtasks=t,i.instance.onTaskCopy.pipe(Object(_.a)(this.destroy$)).subscribe(t=>{this.taskService.copy(this.selectedTasks.selectedTaskList,e.subcategory,{assigned_comment:t.commentAssigned,assignees:t.assignees.map(e=>e.id),attachments:t.attachment,comment:t.comment,comment_attachments:t.commentAttachment,custom_fields:t.customFields,external_dependencies:t.dependencies,followers:t.followers.map(e=>e.id),internal_dependencies:t.dependencies,old_checklists:t.checklists,old_tags:t.oldTags,old_assignees:t.oldAssignees,old_due_date:t.oldDueDate,old_followers:t.oldFollowers,old_subtask_assignees:t.oldSubtaskAssignees,old_status:t.oldStatus,recur_settings:t.recurring,return_immediately:!0,subtasks:t.subtask,time_estimate:t.timeEstimate,task_activity:t.activity}),this.modalService.close()})}else this.taskService.copy(this.selectedTasks.selectedTaskList,e.subcategory)}selectCategory(e){this.taskService.move(this.selectedTasks.selectedTaskList,e.subcategory,e.category,null,!1,!0,null,!this.sendNotifications)}remove(){const e=this.selectedTasks.selectedTaskList.filter(e=>this.canDelete||this.onlyDeleteIfOwner&&(!e.creator||this.meUser.id===e.creator.id));e.length&&(this.taskService.remove(e),this.selectedTasks.unselectTasks(e))}unselectTasks(){this.selectedTasks.clearSelectedTasks()}clearSearch(){this.taskSelector&&(this.taskSelector.searchInput.nativeElement.value="",this.taskSelector.debounceSearch.next(""))}setFocus(){setTimeout(()=>{this.taskSelector.searchInput.nativeElement.focus()},0)}convertToTask(){this.taskService.convertToTask(this.selectedTasks,this.parentTask)}setSubtasks(e){const t=e.task;this.selectedTask=t,this.selectedTasks.selectedTaskList.some(e=>e.subtasks_count>0)?this.modalService.open({blank:!1,modifier:"task-sc__modal",content:this.confirmSubtaskModal}):(this.taskService.setSubtasks(t,this.selectedTasks,!1,null,!this.sendNotifications),this.clearSearch(),this.dropdown.close())}subtaskCancelModal(){this.modalService.close(),this.clearSearch(),this.dropdown.close()}subtaskConfirmModal(){this.modalService.close(),this.selectedTask&&(this.taskService.setSubtasks(this.selectedTask,this.selectedTasks,!0,null,!this.sendNotifications),this.clearSearch(),this.dropdown.close())}resetSelected(){setTimeout(()=>{this.usersSelected=[],this.usersToRemove=[],this.groupsSelected=[],this.groupsToRemove=[]},1500)}moveSubtask(){this.store.select(Z.m).pipe(Object(w.a)(this.store.select(Z.C)),Object(y.a)(1)).subscribe(([e,t])=>{const i=this.resolver.resolveComponentFactory(D.a),o=this.moveSubtaskModal.createComponent(i);o.instance.defaultProject=t,o.instance.searchSubtasks=!1,o.instance.expandableSubtasks=!1,o.instance.task=e,o.instance.extraItemTemplate=this.sendNotifificationTemplate,o.instance.onSelect.pipe(Object(_.a)(this.destroy$)).subscribe(e=>{this.taskService.setSubtasks(e.task,this.selectedTasks,!1,null,!this.sendNotifications),this.modalService.close(),this.selectedTasks.clearSelectedTasks()}),this.modalService.open({title:this.commonStringsService.moveSubtaskText,content:o})})}toggleArchive(){this.selectedTasks.isAllArchived()?this.archive(!0):this.showArchivePrompt()}showArchivePrompt(){const e=this.resolver.resolveComponentFactory(r.a),t=this.archiveContainer.createComponent(e);t.instance.action.pipe(Object(_.a)(this.destroy$)).subscribe(e=>{e&&this.archive(),this.modalService.close()}),this.modalService.open(Object.assign({},{name:"archiveContainer",preventExternalClick:!0,content:t}))}archive(e=!1){this.taskService.archive(this.selectedTasks.selectedTaskList,e)}openDependencyModal(){const e=this.selectedTasks.selectedTaskList&&1===this.selectedTasks.selectedTaskList.length;this.store.select(Object(n.getProjectById)(this.selectedTasks.selectedTaskList[0].project_id)).pipe(Object(y.a)(1)).subscribe(t=>{e&&this.store.dispatch(new s.x({task:this.selectedTasks.selectedTaskList[0],project:t}))}),e||(this.dependencyModalComponent=this.modalService.openComponent(c.a,this.injector,{title:this.commonStringsService.dependenciesText}),this.dependencyModalComponent.instance.batchedTasks=this.selectedTasks.selectedTaskList,this.dependencyModalComponent.instance.extraItemTemplate=this.sendNotifificationTemplate,this.dependencyModalComponent.instance.muteNotifications=!this.sendNotifications,this.store.pipe(Object(O.select)(q.b)).pipe(Object(_.a)(this.dependencyModalComponent.instance.destroy$)).subscribe(e=>{if(Object.assign(this.dependencyModalComponent.instance,e),e.tasksLinkedMap){let t=[];const i=[],o={},n={};this.dependencyModalComponent.instance.batchedTasks.forEach(i=>{e.tasksLinkedMap[i.id]&&(t=t.concat(e.tasksLinkedMap[i.id].links))}),t.forEach(e=>{o[e.link_id]?o[e.link_id].push(e):o[e.link_id]=[e]}),t.forEach((e,s)=>{o[e.link_id]&&o[e.link_id]&&o[e.link_id].every(e=>this.dependencyModalComponent.instance.batchedTaskIds.includes(e.task_id))&&(n[e.link_id]=!n[e.link_id],n[e.link_id]||(this.dependencyModalComponent.instance.idsToExclude.includes(t[s].task.id)||this.dependencyModalComponent.instance.idsToExclude.push(t[s].task.id),i.push(t[s])))}),this.dependencyModalComponent.instance.tasksLinked=i.map(e=>e.task)}this.dependencyModalComponent.instance.markForCheck()}),this.dependencyModalComponent.instance.createDependency.pipe(Object(_.a)(this.dependencyModalComponent.instance.destroy$)).subscribe(e=>{this.store.dispatch(new s.r(Object.assign(Object.assign({},e),{forBatch:!0})))}),this.dependencyModalComponent.instance.removeDependency.pipe(Object(_.a)(this.dependencyModalComponent.instance.destroy$)).subscribe(e=>{this.store.dispatch(new s.J(e))}),this.dependencyModalComponent.instance.createRelationshipLink.pipe(Object(_.a)(this.dependencyModalComponent.instance.destroy$)).subscribe(e=>{const t={task_ids:this.dependencyModalComponent.instance.batchedTaskIds,links_to:e.task.id};this.dependencyModalComponent.instance.muteNotifications&&(t.mute_notifications=!0),this.store.dispatch(new s.l({body:t}))}),this.dependencyModalComponent.instance.removeRelationshipLink.pipe(Object(_.a)(this.dependencyModalComponent.instance.destroy$)).subscribe(e=>{this.dependencyModalComponent.instance.idsToExclude=this.dependencyModalComponent.instance.idsToExclude.filter(t=>t!==e.task.id),this.store.dispatch(new s.N({body:{task_ids:this.dependencyModalComponent.instance.batchedTaskIds,links_to:e.task.id}}))}),this.dependencyModalComponent.instance.destroy$.pipe(Object(y.a)(1)).subscribe(()=>{this.store.dispatch(new s.q(null)),this.dependencyModalComponent=null}))}checkPaging(e){e.type===a.a.Tags&&this.getTags({last:e.newSearch?null:"true",search:e.search})}updateCfSendNotificationPreference(e){this.localStorage.set("cfMuteNotifications",e?"false":"true")}updateSendNotificationPreference(e){e?this.localStorage.remove("muteNotifications"):this.localStorage.set("muteNotifications","true"),this.dependencyModalComponent&&(this.dependencyModalComponent.instance.muteNotifications=!e)}getTags(e){this.features$.pipe(Object(y.a)(1)).subscribe(t=>{!this.isAllProjects&&t&&t.tags&&t.tags.enabled&&this.store.dispatch(Object(M.e)({projectId:this.spaceId,paging:e}))})}selectCommand(e){if(e)switch(e.key){case j.kb.key:this.fetchStatuses();break;case j.nb.key:this.getTags()}}applySlashCommand({command:e,value:t}){if(e)switch(e.key){case j.c.key:this.setSelected(t&&0===t.length?null:t);break;case j.Gb.key:this.setSelected(t,"watchers");break;case j.kb.key:this.selectStatus(t);break;case j.cb.key:this.setPriority(t);break;case j.nb.key:t&&t.length&&t.forEach(e=>this.setTag(e));break;case j.o.key:this.setDueDate({sendRequest:!0,dueDate:t?t.date:null,dueDateTime:t?t.showTime:null,mode:"dueOnly"});break;case j.jb.key:this.setDueDate({sendRequest:!0,startDate:t?t.date:null,startDateTime:t?t.showTime:null,mode:"startOnly"});break;case j.Z.key:t&&this.selectCategory(t);break;case j.k.key:this.store.dispatch(new s.Q("waiting")),this.store.dispatch(new s.r({selectedTask:t,currentTask:null,batchedTasks:this.selectedTasks.selectedTaskList}));break;case j.Fb.key:this.store.dispatch(new s.Q("blocker")),this.store.dispatch(new s.r({selectedTask:t,currentTask:null,batchedTasks:this.selectedTasks.selectedTaskList}));break;case j.X.key:this.store.dispatch(new s.l({body:{task_ids:this.selectedTasks.selectedTaskList.map(e=>e.id),links_to:t.id}}));break;case j.q.key:this.taskService.setBatchAssignees(this.selectedTasks.selectedTaskList,t[1],[],this.multipleAssignees,!0).subscribe(e=>{this.setDueDate({sendRequest:!0,dueDate:t[0]?t[0].date:null,dueDateTime:t[0]?t[0].showTime:null,mode:"dueOnly"})})}}copyToClipboard(){const e=this.selectedTasks.selectedTaskList.map(e=>{const t=[];return this.clipboardOptions[A.G.name]&&t.push(e.name),this.clipboardOptions[A.ab.name]&&t.push(Object(X.c)(e)),this.clipboardOptions[A.k.name]&&t.push([...(e.assignees||[]).map(e=>e.username||e.displayName||e.email),...(e.group_assignees||[]).map(e=>e.name)].join(", ")),this.clipboardOptions[A.S.name]&&t.push(e.status.status),this.clipboardOptions[A.y.name]&&t.push(e.custom_id||e.id),t.join("\t")}).join("\n");this.clipboard.copyFromContent(e)}toggleClipboardOption(e){this.clipboardOptions[e]=!this.clipboardOptions[e],this.clipboardOptionsEnabled=Object.keys(this.clipboardOptions).some(e=>this.clipboardOptions[e]),this.saveClipboardSettings()}saveClipboardSettings(){this.localStorage.set("copyClipboardOptions",this.clipboardOptions)}setCustomFieldValue(e){this.taskService.setBatchCustomFieldValues(this.selectedTasks.selectedTaskList,this.bulkCustomField,this.bulkCustomFieldValue,!this.cfSendNotifications),e.close()}selectMergeTask(e){this.mergeError=!1,this.selectedMergeTask=e}resetMergeTask(){this.selectedMergeTask=null,this.mergeError=!1}bulkMerge(e,t=!1){const i=this.selectedTasks.selectedTaskList.filter(e=>e.subtasks_count>0);if(i.length>0&&!t){const t=this.modalService.openComponent(z.a,this.injector,{modifier:"task-sc__modal"});t.instance.parentTask=!!e.parent,t.instance.selectTaskData={toTask:e,tasks:i},t.instance.onConfirm.pipe(Object(_.a)(t.instance.destroy$)).subscribe(()=>{this.bulkMerge(e,!0)})}else this.taskService.mergeTasks(this.selectedTasks.selectedTaskList,e,t,null,["ITEM_090"]).subscribe(()=>{},e=>{"ITEM_090"===e.ECODE&&(this.mergeError=!0,this.mergeDropdown.open())})}bulkLink(e){this.store.dispatch("one"===this.bulkLinkRelationship?new s.l({body:{task_ids:this.selectedTasks.selectedTaskList.map(e=>e.id).filter(t=>t!==e.id),links_to:e.id}}):new s.h({body:{task_ids:this.selectedTasks.selectedTaskList.map(e=>e.id)}})),this.selectedTasks.clearSelectedTasks()}addTasksToAnotherList(e){if(!e||"subcategory"!==e.type||!e.subcategory)return;const t=this.selectedTasks.selectedTaskList.map(e=>e.id);this.store.dispatch(new B.n({task_ids:t,listId:e.subcategory.id,showToast:!0,listName:e.subcategory.name,muteNotifications:!this.sendNotifications})),this.unselectTasks()}removeTasksFromList(e){e.close(),this.subcategory$.pipe(Object(y.a)(1)).subscribe(e=>{const t=[],i=[];if(this.selectedTasks.selectedTaskList.forEach(o=>{o.subcategory.id===e.id?t.push(o):i.push(o)}),i.length){const o=this.selectedTasks.selectedTaskList.map(e=>e.id);this.store.dispatch(new H.jb({task_ids:o,listId:e.id,showToast:!0,toastTitle:$localize`:@@cu-dashboard-table-toolbar__toast-title_removed-tasks-count:Removed ${i.length}:taskCount: task(s) from this list`,toastMessage:t.length?$localize`:@@cu-dashboard-table-toolbar__toast-msg_removed-tasks-count:There were ${t.length}:taskCount: task(s) that can't be removed because they only belong to this list.`:null,muteNotifications:!this.sendNotifications}))}else this.sharedData.addToastItem({title:$localize`:@@cu-dashboard-table-toolbar__title_remove-from-another-list:Try removing from another list view`,description:$localize`:@@cu-dashboard-table-toolbar__description_remove-from-another-list:None of the selected tasks have this list as their additional list`})})}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(J.a),x.Wb(ee.a),x.Wb(Y),x.Wb(te.a),x.Wb(ie.a),x.Wb(oe.a),x.Wb(x.j),x.Wb(O.Store),x.Wb(ne.c),x.Wb(se.b),x.Wb(x.t))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-dashboard-table-toolbar"]],viewQuery:function(e,t){if(1&e&&(x.jd(ce,1),x.jd(ae,1),x.jd(re,1),x.jd(le,1),x.jd(de,3),x.jd(ue,1,x.U),x.jd(me,3,x.U),x.jd(pe,1),x.jd(he,3),x.jd(fe,1)),2&e){let e;x.Qc(e=x.rc())&&(t.dropdown=e.first),x.Qc(e=x.rc())&&(t.mergeDropdown=e.first),x.Qc(e=x.rc())&&(t.copyTasksDropdownList=e.first),x.Qc(e=x.rc())&&(t.taskSelector=e.first),x.Qc(e=x.rc())&&(t.confirmSubtaskModal=e.first),x.Qc(e=x.rc())&&(t.moveSubtaskModal=e.first),x.Qc(e=x.rc())&&(t.archiveContainer=e.first),x.Qc(e=x.rc())&&(t.slashCommand=e.first),x.Qc(e=x.rc())&&(t.sendNotifificationTemplate=e.first),x.Qc(e=x.rc())&&(t.statusListComponent=e.first)}},hostBindings:function(e,t){1&e&&x.qc("keydown.esc",function(e){return t.deselectEventsOnEsc(e)},!1,x.Sc)("keydown./",function(e){return t.slashCommandsHotKey(e)},!1,x.Sc)},inputs:{display:"display",selectedTasks:"selectedTasks",taskView:"taskView",subtaskView:"subtaskView",statusList:"statusList",inputFeatures:"inputFeatures",permissions:"permissions",spaceId:"spaceId",parentTask:"parentTask",tags:"tags",tagsLoading:"tagsLoading",isAllProjects:"isAllProjects",onlyDeleteIfOwner:"onlyDeleteIfOwner",canDelete:"canDelete",meUser:"meUser"},outputs:{onSyncTaskView:"onSyncTaskView"},features:[x.Hb([Y])],decls:27,vars:1,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,I,T,C,D,O,S,E,P,j,A,$,U,R,M,F,L,N,z,q,G,V,B,X,H,W,K,Q;return e=$localize`:@@common_unassign␟06eaf93a4e6dc114741c8e642a4e57026da436bf␟3290193501558345471:Unassign`,t=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_set-assignees␟c3cb3723e59824e54165fb01be01c519f905b20a␟8467380479247781182:Set assignees`,i=$localize`:@@common_set-status␟b5efe1a1d9ef9cb247f72cff4157a3c967d7fb54␟7698210372236167648:Set Status`,o=$localize`:@@common_set-status␟b5efe1a1d9ef9cb247f72cff4157a3c967d7fb54␟7698210372236167648:Set Status`,n=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_cant-move-subtasks-and-tasks-same-time␟3629e31c3f81cba06ba2156b5513b2610b6a050d␟5838775858982871860:You can't move both subtasks and tasks at the same time`,s=$localize`:@@common_delete␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,c=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_no-permissions-to-remove-tasks␟055ad05bd0b30365edc8eb9f827be8c5033c8cbc␟3695993475155931678:You don't have permission to remove these tasks`,a=$localize`:@@common_copy-to-clipboard␟3a6e5a6aa78ca864f6542410c5dafb6334538106␟8738732372986673558:Copy to clipboard`,r=$localize`:@@common_copy-to-clipboard␟ba3f2c5a282b8926edc50864ea8d04d40b31f653␟4700727805809405402: Copy to clipboard `,l=$localize`:@@common_new-1␟bc1249b8bc2c89858371c70c28e5b00608136014␟8761786256794001786: NEW `,d=$localize`:@@cu-dashboard-table-toolbar__form-placeholder_type-slash-for-cmds␟51254fddab803aac39f7cf45af5b4139ce0609ef␟312769729218388984:type '/' for commands`,u=$localize`:@@cu-dashboard-table-toolbar__dismiss␟587231b84946c5ecf8eab33a0ce9b22483256971␟2892117468202207716: DISMISS `,m=$localize`:@@cu-dashboard-table-toolbar__selected-tasks-txt␟ba16c0c0041aa5095c8509df32b961a6ed5a0df0␟8313136367371089087: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*8:1\ufffd"}:START_TAG_NG_TEMPLATE:${"[\ufffd*1:2\ufffd\ufffd#1:2\ufffd|\ufffd*1:5\ufffd\ufffd#1:5\ufffd]"}:START_TAG_SPAN:task${"[\ufffd/#1:2\ufffd\ufffd/*1:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*2:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*1:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*2:6\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd*2:3\ufffd\ufffd#1:3\ufffd|\ufffd*2:6\ufffd\ufffd#1:6\ufffd]"}:START_TAG_SPAN_1:subtask${"[\ufffd/#1:2\ufffd\ufffd/*1:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*2:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*1:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*2:6\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/*8:1\ufffd|\ufffd/*9:4\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*9:4\ufffd"}:START_TAG_NG_TEMPLATE_1:${"[\ufffd*1:2\ufffd\ufffd#1:2\ufffd|\ufffd*1:5\ufffd\ufffd#1:5\ufffd]"}:START_TAG_SPAN:tasks${"[\ufffd/#1:2\ufffd\ufffd/*1:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*2:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*1:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*2:6\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd*2:3\ufffd\ufffd#1:3\ufffd|\ufffd*2:6\ufffd\ufffd#1:6\ufffd]"}:START_TAG_SPAN_1:subtasks${"[\ufffd/#1:2\ufffd\ufffd/*1:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*2:3\ufffd|\ufffd/#1:5\ufffd\ufffd/*1:5\ufffd|\ufffd/#1:6\ufffd\ufffd/*2:6\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/*8:1\ufffd|\ufffd/*9:4\ufffd]"}:CLOSE_TAG_NG_TEMPLATE: selected `,m=x.lc(m),p=$localize`:@@cu-dashboard-table-toolbar__no-shared-status-in-selected-tasks␟a399454196107fca463f57cef26a4b82d3a9485a␟8850011222803671734: There aren't any statuses shared between the tasks you selected. `,h=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_cant-use-feature-when-subtasks-selected␟da25e0b127cca25e13492c2e8dee3dc33ae2cfea␟3248271413274689739:You can't use this feature when you have Subtasks selected`,f=$localize`:@@cu-dashboard-table-toolbar__convert-to-subtask-select-parent-task␟f5c23f3de138d367f3c355275d521e4916fc4051␟8303171297280498011:Convert to subtask: select parent task`,b=$localize`:@@cu-dashboard-table-toolbar__move-tasks␟4471b4505439ab2dd6fe952fca1c3b1bfd9886f8␟6986132918099851971: Move tasks `,g=$localize`:@@cu-dashboard-table-toolbar__add-to-lists␟48e032820fc76a57b9be6841277f5b33d2c331e0␟8757443955662080513: Add to Lists `,_=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_remove-tasks-from-list␟ab2fd3a2d22843617469a1462f3348600afbc804␟1208681512722193889:Remove tasks from this List`,v=$localize`:@@cu-dashboard-table-toolbar__btn-txt_remove-from-list␟5aa756c40acec1f1228a582bf5bf1852d6f6bbac␟1090722442747350585: Remove from ${"\ufffd0\ufffd"}:INTERPOLATION: `,k=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_set-milestone␟d61092e8aaafc51e2dbf2a9c64603ccca8a19dc2␟3628213158747097181:Set Milestone`,y=$localize`:@@common_cancel␟9aceddede3df163c645ac1a9bd54ceffa05b72a0␟1060018727844228721: Cancel `,w=$localize`:@@common_save␟743b6c76ae96512c04ef842caed39804b35fd280␟1208375066628034240: Save `,I=$localize`:@@cu-dashboard-table-toolbar__title_what-to-copy␟ade96ec54e1df3d92daa96af9c4a6bdb8418123c␟2120126466490303984:What to copy`,T=$localize`:@@common_copy-to-clipboard␟ba3f2c5a282b8926edc50864ea8d04d40b31f653␟4700727805809405402: Copy to clipboard `,C=$localize`:@@cu-dashboard-table-toolbar__title_subtasks-subtasks-new-parent␟509a0419b82723e6d399b80e0a1e92b723961f10␟8061205145298919268: Subtasks will become subtasks of the new task's parent. `,D=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,O=$localize`:@@common_continue␟d8be89df0f7689e784ded095554331510617728c␟4353178234326355236: Continue `,S=$localize`:@@common_send-notifications␟c65bcf397dbee58a216fb39387efa6cf829391e5␟3289254818624965727: Send notifications `,E=$localize`:@@common_send-notifications␟c65bcf397dbee58a216fb39387efa6cf829391e5␟3289254818624965727: Send notifications `,P=$localize`:@@cu-dashboard-table-toolbar__change␟024cdb2814b0cb3f4ced148f1a0b9854447cb214␟1230154438678955604:Change`,j=$localize`:@@cu-dashboard-table-toolbar__set-watchers␟019abb7d028602185e8f6a11bf37ab47f4def59d␟6378301119515001139:Set watchers`,A=$localize`:@@cu-dashboard-table-toolbar__duplicate-tasks␟b62b99ce4128347f29bc6ec1ecca28cddb7d13c4␟2778261046565586978:Duplicate tasks`,$=$localize`:@@cu-dashboard-table-toolbar__tooltip-msg_cant-copy-subtasks-and-tasks-same-time␟ced73ef699cfa7467ca5f6618a3f6b37060d5598␟8919943163472486303:You can't copy both subtasks and tasks at the same time`,U=$localize`:@@common_move-subtasks␟120b547c8e7134897d166c2a9aae4dfc928f4dea␟4561763566130404138:Move subtasks`,R=$localize`:@@common_dependencies␟473fb06a7b7b3992af493059e8f9c8c74f369a97␟4045087308145757242:Dependencies`,M=$localize`:@@common_merge-tasks␟4e660714aa5109039a6b3b47d76b0a3447538809␟8819163433846806361:Merge tasks`,F=$localize`:@@common_search-for-task-name-id-url␟b4e861938dd2982d1a1184c74efa4f617d558515␟2303882965617531732:Search for task name, ID, or URL`,L=$localize`:@@cu-dashboard-table-toolbar__privacy-and-sharing-inheritance-notice␟b0008fb4cc8c9005471e1a38f89eb518fdca642e␟1883685373676651513: Privacy and sharing will be inherited from the new task you merge into. This action cannot be reversed. `,N=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,z=$localize`:@@common_merge␟56ce054d1eccdf565c4278f43d1465758b3f9d65␟8000167047978316979: Merge `,q=$localize`:@@cu-dashboard-table-toolbar__merge-tasks-into-selected-task␟4cd8880b9da22e49c7d58470fd9bce9dcc0afee7␟5965855848388797042: Merge into ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,G=$localize`:@@cu-dashboard-table-toolbar__merge-tasks_error␟ee26a2a17b634d2f0dcc5a70bcfe8c2832cdcee8␟6767869171335479185: You can not merge a parent task into one of its own subtasks `,V=$localize`:@@cu-dashboard-table-toolbar__tasks-linking␟fc5ad4fdff679a6522b6bba8cad7bb495de00ab8␟3869431159982959405: Tasks Linking `,B=$localize`:@@cu-dashboard-table-toolbar__relationships_m2m␟b162825b704094c34280bd6c5ee842dbe9260134␟5339584837118641980:Many to Many`,X=$localize`:@@cu-dashboard-table-toolbar__relationships_m2o␟76fb0d32efdb302a674f7087611013c4e33e0490␟2296533043400062545:Many to One`,H=$localize`:@@common_search-for-task-name-id-url␟b4e861938dd2982d1a1184c74efa4f617d558515␟2303882965617531732:Search for task name, ID, or URL`,W=$localize`:@@cu-dashboard-table-toolbar__btn-txt_link-tasks␟c34f2eadfce784565d467b9f159024be3c172a65␟7733987837862034449: Link tasks `,K=$localize`:@@cu-dashboard-table-toolbar__merge-tasks_link-to-one␟bb6d1451d38da30786840cac058769ce1edceb21␟4919205293709445835: All selected tasks will be linked to ${"\ufffd0\ufffd"}:INTERPOLATION:. `,Q=$localize`:@@cu-dashboard-table-toolbar__merge-tasks_link-each-other␟54b5a4ed3f2e95e925383e5f4fb8c84745247add␟4233180663513331937: All selected tasks will be linked to each other. `,[["class","cu-dt-controls",3,"ngClass",4,"ngIf"],["confirmSubtaskModal",""],["archiveContainer",""],["sendNotificationTemplate",""],["cfSendNotificationTemplate",""],["dateOptionsTemplate",""],["watchersOption",""],["copyTaskOption",""],["moveSubtaskOption",""],["prioritiesOption",""],["dependencyOption",""],["mergeOption",""],["linkTasksOption",""],["archiveTaskOption",""],[1,"cu-dt-controls",3,"ngClass"],["class","cu-dt-controls__inner",4,"ngIf"],[1,"cu-dt-controls__inner"],[1,"cu-dt-controls__selected-container"],[1,"task-outer-dot",3,"click"],[1,"task-inner-dot"],[1,"cu-dt-controls__selection",3,"ngPlural"],m,["ngPluralCase","=1"],["ngPluralCase","other"],[1,"cu-dt-controls__action"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-dt-controls__action-batch-option"],["unassignedText",e,3,"userGroups","users","multiChoice","showUnassign","weights","weightType","showUnassigned","forBatch","search","enableFirstSelection","extraItemTemplate","selectedUsers","selectedUserGroups","onReassign","onReassignGroup","onUserGroupsChanged","onChange","onClose"],["cuLink","","cuTooltip",t,1,"cu-dt-controls__item",3,"icon"],[1,"cu-dt-controls__action-batch-option",3,"click"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["statusDropdown","dropdown"],["cuDropdownToggle",""],["class","cu-dt-controls__item","cuLink","","cuTooltip",i,3,"icon",4,"ngIf"],["class","cu-dt-controls__item","cuLink","","cuTooltip",o,3,"icon",4,"ngIf"],["class","status-list",4,"cuDropdownMenu"],[1,"cu-task-info","cu-dt-controls__action-batch-option",3,"click"],["modifier","",3,"tags","taskTags","tagsLoadingMap","spaceId","dropdown-disabled","extraItemTemplate","onChange","onDelete","onDeleteFromSpace","onClose","onRename","onColorChange","onPage"],[3,"tagsTooltip","disabled","truncate","forBatch"],["class","cu-dt-controls__action-batch-option",3,"move-task-option",4,"ngIf"],["class","cu-dt-controls__action-batch-option",4,"ngIf"],["cuDropdown","",3,"dropdownCloseOnInsideClick"],[3,"width",4,"cuDropdownMenu"],["cuTooltip",n,1,"cu-dt-controls__overlay"],["class","cu-dt-controls__action-batch-option cu-dt-controls__action-batch-option_new","cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPlacement",4,"ngIf"],[1,"cu-task-info","cu-dt-controls__action-batch-option"],[1,"due-date_view-task",3,"quickClear","dateOption","extraItemTemplate","readOnly","onChange"],["cuLink","",1,"cu-dt-controls__item",3,"icon","ngClass","cuTooltip"],["cuDropdown","",1,"cu-dt-controls__action-batch-option",3,"dropdownDisabled","dropdownCloseOnInsideClick","dropdownOpen"],["bulkCustomFieldDropdown","dropdown"],["cuLink","","cuDropdownToggle","",1,"cu-dt-controls__item","cu-dt-controls__item_cf",3,"icon","cuTooltip"],[4,"cuDropdownMenu"],["cuTooltip",s,"cuLink","",1,"cu-dt-controls__item","cu-dt-controls__item_remove",3,"icon","click"],["cuTooltip",c,1,"cu-dt-controls__overlay"],["cuDropdown","",1,"cu-dt-controls__action-batch-option","cu-dt-controls__action-batch-option_more",3,"dropdownPreventDocumentScroll"],["icon","ellipsis",1,"cu-dt-controls__item"],["class","cu-dropdown__menu_overflow-hidden cu-dt-controls__action-batch-option-dropdown",4,"cuDropdownMenu"],[1,"cu-dt-controls__right"],["copyClipboardDropdown","dropdown"],["cuDropdownToggle","",1,"cu-dt-controls__right-copy"],["cuTooltip",a,"cuLink","",1,"cu-dt-controls__right-copy-icon",3,"icon"],[1,"cu-dt-controls__right-copy-text"],r,[1,"cu-dt-controls__right-copy-badge"],l,["class","cu-dashboard-table-toolbar__copy-menu",4,"cuDropdownMenu"],["inputClass","cu-dt-controls__slash-command-input",1,"cu-dt-controls__slash-command",3,"dateFormatting","militaryTime","meUser","weights","users","statuses","tags","priorities","allowedCommands","currentValues","options","applyCommand","onSelectCommand","onPage"],["slashCommand",""],["cuSlashCommandInput","","placeholder",d,1,"cu-dt-controls__right-slash-command-input",3,"click"],[1,"cu-dt-controls__close",3,"click"],["icon","close",1,"cu-dt-controls__close-icon"],[1,"cu-dt-controls__close-label"],u,[4,"ngIf"],["cuLink","","cuTooltip",i,1,"cu-dt-controls__item",3,"icon"],["cuLink","","cuTooltip",o,1,"cu-dt-controls__item",3,"icon"],[1,"status-list"],[4,"ngIf","ngIfElse"],["noStatuses",""],[3,"displaySharedWarning","statuses","groupByStatusType","onChange"],["statusListComponent",""],[3,"ngTemplateOutlet"],["class","cu-dt-controls__status-warning",4,"ngIf"],[1,"cu-dt-controls__status-warning"],[1,"cu-dt-controls__status-warning-text"],p,["cuDropdown","",1,"cu-dropdown",3,"dropdownCloseOnInsideClick","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["cuLink","",1,"cu-dt-controls__item",3,"icon","cuTooltip"],["class","cu-dropdown__menu",4,"cuDropdownMenu"],["cuTooltip",h,1,"cu-dt-controls__overlay"],[1,"cu-dropdown__menu"],["searchInputPlaceholder",f,3,"modifier","defaultProject","searchSubtasks","excludeParentTask","description","expandableSubtasks","onSelect"],["taskSelector",""],["cuLink","",1,"cu-dt-controls__item","cu-dt-controls__item_convert-to-task",3,"icon","cuTooltip","click"],[1,"cu-dt-controls__item","cu-dt-controls__item-multiple-lists",3,"icon","cuTooltip"],[1,"cu-dt-controls__action-batch-option-multi-list-menu"],[1,"cu-dt-controls__action-batch-option-multi-list-menu-tabs"],[1,"cu-dt-controls__action-batch-option-multi-list-menu-tabs-move",3,"click"],b,["class","cu-dt-controls__action-batch-option-multi-list-menu-tabs-multiple-list",3,"active","click",4,"ngIf"],[1,"cu-dt-controls__action-batch-option-multi-list-menu-body"],[1,"cu-dt-controls__action-batch-option-multi-list-menu-tabs-multiple-list",3,"click"],g,[3,"extraItemTemplate","onSelect"],[1,"task-container__header-add-list__category-list",3,"selectableProject","singleCategory","displaySearch","showTaskCount","extraItemTemplate","onSelect"],["cuDropdown","",1,"cu-dt-controls__action-batch-option","cu-dt-controls__action-batch-option_new",3,"dropdownCloseOnInsideClick","dropdownPlacement"],["cuLink","","cuTooltip",_,"icon","remove-from-list","cuDropdownToggle","",1,"cu-dt-controls__item"],["class","cu-dt-controls__remove-from-timl",4,"cuDropdownMenu"],[1,"cu-dt-controls__remove-from-timl"],[1,"cu-btn","cu-btn_sm",3,"click"],v,["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownDisabled","cuTooltip"],["milestoneDropdown","dropdown"],["icon","milestone","cuLink","","cuTooltip",k,1,"cu-dt-controls__item","cu-dt-controls__item_milestone"],["class","status-list cu-dt-controls__milestones",4,"cuDropdownMenu"],[1,"status-list","cu-dt-controls__milestones"],[3,"item","click"],["class","cu-dt-controls__item-search-list",3,"items","autoFocus","modifierSearchInput",4,"ngIf"],["class","cu-dt-controls__cf",4,"ngIf"],[1,"cu-dt-controls__item-search-list",3,"items","autoFocus","modifierSearchInput"],["searchList",""],[1,"columns-list__body",3,"perfectScrollbar"],["class","columns-list__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"columns-list__item",3,"click"],[1,"cu-custom-fields__list-item-icon",3,"icon"],[1,"columns-list__item-name-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-dt-controls__cf"],[1,"cu-dt-controls__cf-header"],[1,"cu-dt-controls__cf-header-icon",3,"icon"],[1,"cu-dt-controls__cf-header-name"],[1,"cu-dt-controls__cf-body"],[3,"forBulk","field","fieldValue","members","fieldValueChange"],["cfValue",""],[1,"cu-dt-controls__cf-footer"],[1,"cu-btn","cu-btn_sm","cu-btn_grey",3,"click"],y,[1,"cu-btn","cu-btn_sm",3,"disabled","click"],w,[1,"cu-dropdown__menu_overflow-hidden","cu-dt-controls__action-batch-option-dropdown"],[1,"cu-dashboard-table-toolbar__copy-menu"],["title",I],[3,"item","onCheck",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-btn","cu-btn_sm","cu-dashboard-table-toolbar__copy-menu-btn",3,"disabled","click"],T,[3,"item","onCheck"],[1,"task-sc__inner"],[1,"task-sc__title"],C,[1,"task-sc__options"],[1,"cu-btn","cu-btn_status","cu-btn_option","cu-btn_cancel",3,"click"],D,[1,"cu-btn","cu-btn_status","cu-btn_option",3,"click"],O,[1,"cu-dt-controls__send-notifications"],["type","checkbox",1,"cu-checkbox__input",3,"value","ngModel","checked","ngModelChange"],[1,"cu-checkbox__label"],S,E,[1,"cu-dashboard-table-toolbar__date-options"],[1,"cu-dashboard-table-toolbar__date"],P,[3,"items","onOpen","onClose","onSelect"],[1,"cu-dashboard-table-toolbar__date-container"],[1,"cu-dashboard-table-toolbar__date-text"],["icon","cu2-angle-right",1,"cu-dashboard-table-toolbar__date-arrow"],[3,"users","userGroups","multiChoice","showUnassign","forBatch","showReassign","search","enableFirstSelection","selectedUsers","extraItemTemplate","onChange","onUserGroupsChanged","onClose"],["class","cu-dt-controls__item","cuLink","","cuTooltip",j,3,"icon",4,"ngIf"],[3,"item",4,"ngIf"],["cuLink","","cuTooltip",j,1,"cu-dt-controls__item",3,"icon"],[3,"item"],["class","cu-dt-controls__action-batch-option",3,"cu-dt-controls__action-batch-option_hide-on-small-screen","move-task-option",4,"ngIf"],["copyTasksDropdownList","dropdown"],["class","cu-dt-controls__item cu-dt-controls__item-multiple-lists","cuTooltip",A,3,"icon",4,"ngIf"],["cuTooltip",$,1,"cu-dt-controls__overlay"],["cuTooltip",A,1,"cu-dt-controls__item","cu-dt-controls__item-multiple-lists",3,"icon"],[1,"cu-dt-controls__action-batch-option-menu-body"],[3,"showAdvanced","onSelect"],["class","cu-dt-controls__action-batch-option",3,"cu-dt-controls__action-batch-option_hide-on-small-screen",4,"ngIf"],["moveSubtaskModal",""],["class","cu-dt-controls__item","cuLink","","cuTooltip",U,"icon","move-batch",3,"click",4,"ngIf"],[3,"item","click",4,"ngIf"],["cuLink","","cuTooltip",U,"icon","move-batch",1,"cu-dt-controls__item",3,"click"],[3,"disabled","forBatch","closeOnInsideClick","extraItemTemplate","onChange"],["priorityDropdownList",""],[3,"prioritiesTooltip","disabled","forBatch",4,"ngIf"],[3,"prioritiesTooltip","disabled","forBatch"],["class","cu-dt-controls__item cu-dt-controls__item_dependency","cuTooltip",R,"cuLink","",3,"icon","click",4,"ngIf"],["cuTooltip",R,"cuLink","",1,"cu-dt-controls__item","cu-dt-controls__item_dependency",3,"icon","click"],["cuDropdown","",1,"cu-dt-controls__action-batch-option",3,"dropdownCloseOnInsideClick","dropdownClose"],["mergeDropdown","dropdown"],["class","cu-dt-controls__item cu-dt-controls__item-merge","cuLink","","cuTooltip",M,3,"icon",4,"ngIf"],["class","batch-merge-tasks__dropdown",4,"cuDropdownMenu"],["cuLink","","cuTooltip",M,1,"cu-dt-controls__item","cu-dt-controls__item-merge",3,"icon"],[1,"batch-merge-tasks__dropdown"],[1,"batch-merge-tasks__dropdown-header"],[1,"batch-merge-tasks__dropdown-header-text"],q,[1,"batch-merge-tasks__dropdown-header-exit",3,"icon","click"],["class","cu-form__error",4,"ngIf"],["searchInputPlaceholder",F,3,"modifier","defaultProject","requireCreateAndEdit","searchSubtasks","excludeParentTask","description","expandableSubtasks","onSelect"],[1,"batch-merge-tasks__dropdown-merge"],[1,"batch-merge-tasks__dropdown-merge-icon",3,"icon"],[1,"batch-merge-tasks__dropdown-merge-text"],L,["href","https://docs.clickup.com/en/articles/1743265-merging-tasks","target","_blank",1,"batch-merge-tasks__dropdown-merge-text-link"],N,[1,"batch-merge-tasks__dropdown-merge-button",3,"disabled","click"],z,[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],G,["linkingDropdown","dropdown"],["class","cu-dt-controls__item cu-dt-controls__item-merge cu-dt-controls__item-links","cuLink","",3,"icon","cuTooltip",4,"ngIf"],["cuLink","",1,"cu-dt-controls__item","cu-dt-controls__item-merge","cu-dt-controls__item-links",3,"icon","cuTooltip"],V,[1,"batch-merge-tasks__dropdown-options"],[1,"cu-btn","cu-btn_sm","batch-merge-tasks__dropdown-options-button",3,"disabled","cuTooltip","click"],["icon","bulk-link-2"],B,[1,"cu-btn","cu-btn_sm","batch-merge-tasks__dropdown-options-button",3,"click"],["icon","bulk-link"],X,["searchInputPlaceholder",H,3,"modifier","defaultProject","requireCreateAndEdit","searchSubtasks","excludeParentTask","description","expandableSubtasks","onSelect",4,"ngIf"],W,["searchInputPlaceholder",H,3,"modifier","defaultProject","requireCreateAndEdit","searchSubtasks","excludeParentTask","description","expandableSubtasks","onSelect"],K,Q,["class","cu-dt-controls__item cu-dt-controls__item_archive","cuLink","",3,"icon","cuTooltip","click",4,"ngIf"],["cuLink","",1,"cu-dt-controls__item","cu-dt-controls__item_archive",3,"icon","cuTooltip","click"]]},template:function(e,t){1&e&&(x.bd(0,It,8,19,"div",0),x.bd(1,Tt,8,0,"ng-template",null,1,x.cd),x.bd(3,Ct,0,0,"ng-template",null,2,x.cd),x.bd(5,Dt,5,3,"ng-template",null,3,x.cd),x.bd(7,Ot,5,3,"ng-template",null,4,x.cd),x.bd(9,St,11,5,"ng-template",null,5,x.cd),x.bd(11,At,7,20,"ng-template",null,6,x.cd),x.bd(13,Lt,4,7,"ng-template",null,7,x.cd),x.bd(15,Bt,4,3,"ng-template",null,8,x.cd),x.bd(17,Kt,6,10,"ng-template",null,9,x.cd),x.bd(19,Jt,3,4,"ng-template",null,10,x.cd),x.bd(21,ci,6,5,"ng-template",null,11,x.cd),x.bd(23,hi,6,5,"ng-template",null,12,x.cd),x.bd(25,_i,3,4,"ng-template",null,13,x.cd)),2&e&&x.Dc("ngIf",t.display)},styles:['.cu-dashboard-table-toolbar__date{display:flex;align-items:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;padding:10px}.cu-dashboard-table-toolbar__date:hover .cu-dashboard-table-toolbar__date-text{color:var(--theme-main-color)}.cu-dashboard-table-toolbar__date:hover .cu-dashboard-table-toolbar__date-arrow{fill:var(--theme-main-color)}.cu-dashboard-table-toolbar__date-options{display:flex;align-items:center;justify-content:space-between;border-top:1px solid #e4e4e4}.dark-theme .cu-dashboard-table-toolbar__date-options{border-top-color:#1e272e}.cu-dashboard-table-toolbar__date-container{display:flex;align-items:center}.cu-dashboard-table-toolbar__date-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:5px;padding-right:3px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-dashboard-table-toolbar__date-text{font-family:var(--global-font-support)}}.cu-dashboard-table-toolbar__date-container-open .cu-dashboard-table-toolbar__date-text{color:var(--theme-main-color)}.cu-dashboard-table-toolbar__date-arrow{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(90deg);height:12px;width:12px;fill:#343434}.cu-dashboard-table-toolbar__date-arrow:hover{transition:none}.dark-theme .cu-dashboard-table-toolbar__date-arrow{fill:#d5d6d7}.cu-dashboard-table-toolbar__date-container-open .cu-dashboard-table-toolbar__date-arrow{transform:rotate(-90deg);fill:var(--theme-main-color)}.cu-dashboard-table-toolbar__copy-menu-btn{margin:5px 15px 10px;white-space:nowrap}.remove-tasks-from-list__modal .cu-modal__body{min-height:0}.remove-tasks-from-list__modal-container{display:flex;flex-direction:column;justify-content:center;align-items:center}.remove-tasks-from-list__modal img{width:200px;height:auto;margin-bottom:30px}.remove-tasks-from-list__modal-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:24px;line-height:1;color:#fd71af;margin-bottom:20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.remove-tasks-from-list__modal-title{font-family:var(--global-font-support)}}.remove-tasks-from-list__modal-description{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1;color:#7c828d;margin-bottom:40px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.remove-tasks-from-list__modal-description{font-family:var(--global-font-support)}}.dark-theme .remove-tasks-from-list__modal-description{color:#d5d6d7}.remove-tasks-from-list__modal-buttons{display:flex;justify-content:space-between;align-items:center;width:100%}.remove-tasks-from-list__modal-button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:1;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;justify-content:center;align-items:center;height:64px;border-radius:4px;cursor:pointer;width:48%}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.remove-tasks-from-list__modal-button{font-family:var(--global-font-support)}}.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-cancel{color:#7c828d;border:1px solid #e9ebf0}.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-cancel:hover{border-color:#fd71af!important;color:#fd71af!important}.dark-theme .remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-cancel{border-color:#1e272e;color:#d5d6d7}.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-ok,.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-remove{background-color:var(--theme-main-color);color:#fff}.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-ok:hover,.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-remove:hover{background-color:var(--theme-main-color-dark)}.remove-tasks-from-list__modal-button.remove-tasks-from-list__modal-button-ok{margin:0 auto}'],encapsulation:2,data:{animation:[R.j]}}),e})()},Dlfn:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("ofXK"),n=i("faCi"),s=i("3Pt+"),c=i("prfv"),a=i("gb9A"),r=i("K0KF"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[o.c,s.l,n.a,c.a,r.a,a.a,r.a]]}),e})()},"DnG/":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("yR4P"),n=i("fXoL");let s=(()=>{class e{transform(e,t){if(!e)return;const i=Object(o.c)(e);return i<-24?"#ff0000":i>=-24&&i<0?"#ff7f00":i>=0&&i<24?"#fc0":i>=24&&t?"#00ff00":void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"dateColor",type:e,pure:!0}),e})()},"E/jo":function(e,t,i){e.exports=i.p+"giphy.dd4f03d4c41345d7c7ff.png"},EBzq:function(e,t,i){"use strict";var o=[].slice;e.exports=function(e,t){var i;return function(){var t,c=o.call(arguments,0),a=e.length>c.length;a&&c.push(n);try{t=e.apply(null,c)}catch(r){if(a&&i)throw r;return n(r)}a||(t&&"function"==typeof t.then?t.then(s,n):t instanceof Error?n(t):s(t))};function n(){i||(i=!0,t.apply(null,arguments))}function s(e){n(null,e)}}},EHXF:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("ofXK"),n=i("VBI8"),s=i("3XhA"),c=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a]]}),e})()},EP2k:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("dTHz"),n=i("fXoL"),s=i("jJW4");let c=(()=>{class e{constructor(e){this.sharedData=e}transform(e,t="You",i="Unassigned",n=!0){const s=this.sharedData.currentUser.value;if(e||"[object Object]"===Object.prototype.toString.call(e))return-1==+e.id?"ClickBot":String(e.id)===String(o.i.id)?o.i.username:String(e.id)===String(o.j.id)?o.j.username:e.username?e.id?s&&e.id===s.id?t:`${e.username}${this.isActiveTeamMember(e)||e.external||!n?"":" (inactive)"}`:e.source?"internal_front"===e.source.toLowerCase()?e.username+" (from Internal Front)":`${e.username} (from ${e.source.charAt(0).toUpperCase()+e.source.slice(1)})`:void 0:e.id?`${e.email}${this.isActiveTeamMember(e)||e.external||!n?"":" (inactive)"}`:i}isActiveTeamMember(e){return!this.sharedData.compatCurrentTeam||!this.sharedData.compatCurrentTeam.members||this.sharedData.compatCurrentTeam.role===o.f.GUEST||"unassigned"===e.id||this.sharedData.compatCurrentTeam.members.some(t=>t.user.id===e.id)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.a))},e.\u0275pipe=n.Vb({name:"username",type:e,pure:!0}),e})()},EQPF:function(e,t,i){"use strict";e.exports=function(e,t){return function(i){for(var o,n=0,s=i.indexOf("\\"),c=e[t],a=[];-1!==s;)a.push(i.slice(n,s)),(o=i.charAt(n=s+1))&&-1!==c.indexOf(o)||a.push("\\"),s=i.indexOf("\\",n+1);return a.push(i.slice(n)),a.join("")}}},Eidx:function(e,t,i){"use strict";var o=i("IPAr");e.exports=function(e,t,i){var n,s,c,a,r=t.charAt(0);if("\n"===r){if(i)return!0;for(a=1,n=t.length,s=r,c="";a<n&&(r=t.charAt(a),o(r));)c+=r,"\n"===r&&(s+=c,c=""),a++;e(s)}}},EmYC:function(e,t,i){"use strict";e.exports=function(e,t){var i=e.indexOf("[",t),o=e.indexOf("![",t);return-1===o||i<o?i:o}},Esvb:function(e,t,i){"use strict";e.exports=i("PPHF")},F2x4:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("fXoL"),n=i("y2kl"),s=i("0jq0"),c=i("RwZa"),a=i("L5Tv"),r=i("ofXK"),l=i("bnLg");const d=["mentionList"];function u(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-mention-selector",1,2),o.qc("onSelect",function(t){return o.Uc(e),o.uc().onSelect.emit(t)})("onSelectTab",function(t){return o.Uc(e),o.uc().selectTab(t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("users",e.usersFound)("isGuest",e.isGuest)("userGroups",e.userGroupsFound)("showNotif",e.showNotif)("maxResults",e.maxResults)("query",e.query)("allUsers",e.users)("selectedTab",e.selectedTab)("task",e.task)("subcategory",e.subcategory)("taskUserGroups",e.filteredTaskUserGroups)}}let m=(()=>{class e{constructor(e,t,i){this.changeDetectorRef=e,this.elementRef=t,this.zone=i,this.maxResults=10,this.showNotif=!1,this.isChatView=!1,this.isChatViewModal=!1,this.isTaskViewComment=!1,this.onSelect=new o.o,this.onOpen=new o.o,this.onClose=new o.o,this.opened=!1,this.usersFound=[],this.userGroupsFound=[],this.filteredTaskUserGroups=[],this.selectedTab=s.a.User}ngOnInit(){}open(){(this.isChatView||this.isTaskViewComment)&&this.checkPositioning(),this.opened=!0,this.changeDetectorRef.detectChanges(),this.onOpen.emit()}close(){this.opened=!0,this.changeDetectorRef.detectChanges(),this.selectedTab=s.a.User,this.originalQuery="";const e=document.querySelector(".cu-mention-selector-container");e&&e.classList.remove("cu-mention-selector-container__no-transform"),this.updateNoTransformClass("remove"),this.onClose.emit()}filter(e){const t=Object(c.a)(e);return this.query=t.query,!t.tab||e===this.originalQuery&&this.originalQuery||this.selectTab(t.tab),this.originalQuery=e,this.selectedTab===s.a.User?(this.filterUsersTab(),this.zone.run(()=>{this.changeDetectorRef.detectChanges()}),!this.query||this.usersFound.length>0||this.userGroupsFound.length>0||this.filteredTaskUserGroups.length>0):(this.zone.run(()=>{this.changeDetectorRef.detectChanges()}),!0)}handleKey(e){if(this.mentionList)return this.mentionList.handleKey(e)}selectTab(e){this.selectedTab=e,this.selectedTab===s.a.User&&this.filterUsersTab()}checkPositioning(){const e=document.querySelector(".cu-mention-selector-container"),t=document.querySelector(".cu-comment-bar");if(!e||!t)return;const i=e.getBoundingClientRect(),o=t.getBoundingClientRect();i.x<o.x&&(e.classList.add("cu-mention-selector-container__no-transform"),this.updateNoTransformClass("add"))}updateNoTransformClass(e){const t=document.querySelectorAll(".cu-mention-selector-container");(null==t?void 0:t.length)&&t.forEach(t=>{"add"===e&&t.classList.add("cu-mention-selector-container__no-transform"),"remove"===e&&t.classList.remove("cu-mention-selector-container__no-transform")})}filterUsersTab(){this.usersFound=Object(n.c)(this.users,this.meUser,this.query,this.weights,a.c.MENTION),this.userGroupsFound=Object(n.b)(this.userGroups,this.query),this.filteredTaskUserGroups=Object(n.a)(this.taskUserGroups,this.query)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(o.m),o.Wb(o.B))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-mention-selector-container"]],viewQuery:function(e,t){if(1&e&&o.jd(d,1),2&e){let e;o.Qc(e=o.rc())&&(t.mentionList=e.first)}},hostAttrs:[1,"cu-mention-selector-container"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-mention-selector-container__chat-view-modal",t.isChatViewModal)},inputs:{maxResults:"maxResults",users:"users",weights:"weights",meUser:"meUser",showNotif:"showNotif",userGroups:"userGroups",task:"task",subcategory:"subcategory",isGuest:"isGuest",isChatView:"isChatView",isChatViewModal:"isChatViewModal",isTaskViewComment:"isTaskViewComment",taskUserGroups:"taskUserGroups"},outputs:{onSelect:"onSelect",onOpen:"onOpen",onClose:"onClose"},decls:1,vars:1,consts:[[3,"users","isGuest","userGroups","showNotif","maxResults","query","allUsers","selectedTab","task","subcategory","taskUserGroups","onSelect","onSelectTab",4,"ngIf"],[3,"users","isGuest","userGroups","showNotif","maxResults","query","allUsers","selectedTab","task","subcategory","taskUserGroups","onSelect","onSelectTab"],["mentionList",""]],template:function(e,t){1&e&&o.bd(0,u,2,11,"cu-mention-selector",0),2&e&&o.Dc("ngIf",t.opened)},directives:[r.q,l.a],styles:[".cu-mention-selector-container{display:block;box-shadow:0 5px 20px rgba(0,0,0,.08),0 10px 25px rgba(0,0,0,.05);border-radius:6px;z-index:1000;width:500px;max-width:95%;background:#fff}.dark-theme .cu-mention-selector-container{background:#384047;box-shadow:0 2px 16px 0 rgba(0,0,0,.4)}.comment-bar .cu-mention-selector-container{transform:translateX(-50%)}.cu-mention-selector-container__no-transform{transform:none!important}.comments-container .cu-mention-selector-container.cu-mention-selector-container__no-transform{left:10px!important}"],encapsulation:2,changeDetection:0}),e})()},FDF9:function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"a",function(){return n});const o=[{label:"On due date",minutesBefore:0},{label:"10 minutes before",minutesBefore:10},{label:"1 hour before",minutesBefore:60}],n="last-used-minues-before"},FFar:function(e,t,i){e.exports=i.p+"outlook-setup-1.50e38d696e9f93feb69c.png"},FJGi:function(e,t,i){"use strict";i.d(t,"a",function(){return I});var o=i("1eS8"),n=i("Gj5t"),s=i("o7Ov"),c=i("Hgwy"),a=i("y2LM"),r=i("OzJH"),l=i("Muja"),d=i("c3rA"),u=i("fXoL"),m=i("XNiG"),p=i("2Vo4"),h=i("itXk"),f=i("pLZG"),b=i("/uUt"),g=i("1G5W"),_=i("/qOb"),v=i("l7P3"),k=i("Tm/s"),y=i("oenl");const w=["picker"],x=["*"];let I=(()=>{class e{constructor(e,t,i){this.store=e,this.changeDetectorRef=t,this.navService=i,this.destroy$=new m.a,this.hierarchies$=new p.a([]),this.hierarchiesFiltered=[],this.expandedSpaceMap={},this.expandedProjectMap={},this.selectedSpaceMap={},this.selectedProjectMap={},this.selectedListMap={},this.underlyingSpaceMap={},this.underlyingProjectMap={},this.disabledSubcategories={},this.displaySearch=!0,this.showTaskCount=!1,this.selectableProject=!0,this.mode="list",this.singleCategory=!1,this.query="",this.multiSelect=!1,this.dropdownPreventDocumentScroll=!0,this.hideFolderless=!1,this.allowSelectAll=!1,this.currentLocation={},this.checkCreateTaskPermission=!0,this.individualSelection=!1,this.handleGlobalKeys=!1,this.autoFocus=!1,this.showAdvanced=!1,this.onSelect=new u.o,this.onDeselect=new u.o,this.onNoCategories=new u.o,this.onClearSearch=new u.o,this.onChangeProject=new u.o}quillBlotKeyDown(e){this.handleGlobalKeys&&this.keydown(e.detail)}docKeyDown(e){this.handleGlobalKeys&&this.keydown(e)}keydown(e){switch(e.which){case _.a.ENTER:this.selectList();break;case _.a.ARROW_UP:this.traverseLists("up");break;case _.a.ARROW_DOWN:case _.a.TAB:e.shiftKey||(e.preventDefault(),e.stopPropagation(),this.traverseLists("down"))}}ngOnInit(){Object(h.a)([this.store.select(d.getProjects).pipe(Object(f.a)(e=>!!e),Object(b.a)(l.a)),this.store.select(d.getCategoriesMap),this.store.select(d.getSharedData)]).pipe(Object(g.a)(this.destroy$)).subscribe(([e,t,i])=>{const n=(e||[]).filter(e=>!e.archived),s=Object(o.s)(i);s.length>0&&n.push(Object(o.E)(s));const c=(n||[]).map(e=>t[e.id]?Object.assign(Object.assign({},e),{categories:t[e.id]}):e);this.hierarchies$.next(c)}),this.hierarchies$.pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.getFilteredHierachies(),this.changeDetectorRef.detectChanges()})}ngAfterViewInit(){}ngOnChanges(e){if(e.statusName&&(this.disabledStatusMessage=$localize`:@@errors_status-not-existin-in-list:The status "${this.statusName}:statusName:" does not exist in this List.`),e.defaultProject&&((this.defaultProject&&this.defaultProject.id&&!this.individualSelection||this.selectedCategory||this.selectedSubcategory)&&this.toggleExpand({type:a.b.PROJECT,forceOpen:!0,id:this.defaultProject.id}),!this.individualSelection||this.selectedCategory||this.selectedSubcategory||(this.selectedSpaceMap=this.defaultProject?{[this.defaultProject.id]:!0}:{})),e.selectedCategory||e.selectedSubcategory){!this.individualSelection||this.selectedSubcategory?this.selectedCategory&&this.toggleExpand({type:a.b.CATEGORY,forceOpen:!0,id:this.selectedCategory}):this.selectedProjectMap=this.selectedCategory?{[this.selectedCategory]:!0}:{},this.individualSelection&&(this.underlyingSpaceMap=this.selectedCategory&&this.defaultProject?{[this.defaultProject.id]:[!0]}:{},this.selectedSpaceMap=this.selectedCategory?{}:this.defaultProject&&this.defaultProject.id?{[this.defaultProject.id]:!0}:{});const e=this.selectedSubcategory?this.findSubcategory(this.selectedSubcategory):null;e&&this.toggleExpand({type:a.b.CATEGORY,forceOpen:!0,id:e.category}),this.individualSelection&&(this.selectedListMap=this.selectedSubcategory?{[this.selectedSubcategory]:!0}:{},this.underlyingProjectMap=this.selectedSubcategory?{[this.selectedCategory]:[!0]}:{},this.selectedProjectMap=this.selectedSubcategory?{}:this.selectedCategory?{[this.selectedCategory]:!0}:{}),this.singleCategory&&this.getFilteredHierachies()}e.query&&this.search(this.query)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}search(e){this.searchStringVal=e,this.getFilteredHierachies(!0),this.changeDetectorRef.detectChanges()}getFilteredHierachies(e){let t;this.disabledSubcategories={},!this.selectableProject&&this.defaultProject&&(t=this.hierarchies$.value.filter(e=>e.id===this.defaultProject.id),this.selectedCategory&&this.singleCategory&&(t=t.map(e=>Object.assign(Object.assign({},e),{categories:e.categories.filter(e=>e.id===this.selectedCategory)}))));const i=t&&t.length?t:this.hierarchies$.value;this.statusName&&i.forEach(e=>{this.defaultProject&&this.defaultProject.id===e.id&&e.categories.forEach(e=>{e.subcategories.forEach(t=>{this.disabledSubcategories[t.id]=!this.hasStatus(this.defaultProject,e,t)})})}),this.hierarchiesFiltered=Object(r.a)(this.searchStringVal,this.currentLocation,i),e&&this.searchStringVal&&(this.traversedOrFirstList=Object(r.c)(this.hierarchiesFiltered)),e&&this.searchStringVal||(this.traversedOrFirstList=null)}hasStatus(e,t,i){return Object(d.getStatuses)(e,t,i).some(e=>e.status===this.statusName)}handleCategoryInput(e){const{type:t,event:i,category:o,project:c}=e;"save"===t&&(o?this.navService.createSection(o.id,i.name,null,!1,!0).subscribe(e=>{this.selectItem({type:a.b.SUBCATEGORY,id:e.id})}):c&&(this.store.dispatch(new s.Yi(n.d,{saving:!0,index:null,error:null})),this.store.dispatch(new s.Jb({projectId:c.id,id:n.d,name:i.name,redirect:!1}))))}selectItem({type:e,id:t,advanced:i}){let o;switch(e){case a.b.TEAM:this.onSelect.emit({source:"regular",type:"project",project:null,category:null,subcategory:null,byClick:!0,forTeam:!0});break;case a.b.SUBCATEGORY:const e=this.findSubcategory(t);if(e){if(o=this.findCategory(e.hiddenCategory?n.d:e.category),!o){const t=this.getSharedWithMe();t&&(o=(t.categories||[]).find(t=>t.subcategories.some(t=>t.id===e.id)))}if(o){const t=this.findProject(e.project_id)||this.getSharedWithMe();t&&this.selectCategory({source:"regular",type:"subcategory",project:t,category:o,subcategory:e,byClick:!0,advanced:i})}}break;case a.b.CATEGORY:if(o=this.findCategory(t),o&&this.individualSelection){const e=this.findProject(o.project_id)||this.getSharedWithMe();e&&this.selectCategory({source:"regular",type:"category",project:e,category:o,subcategory:null,byClick:!0})}break;case a.b.PROJECT:if(this.individualSelection){const e=this.findProject(t)||this.getSharedWithMe();e&&this.onSelect.emit({source:"regular",type:"project",project:e,category:null,subcategory:null,byClick:!0})}}}getSharedWithMe(){return this.hierarchies$.value.find(e=>e.id===n.h)}findSubcategory(e){for(const t of this.hierarchies$.value)for(const i of t.categories||[]){const t=i.subcategories.find(t=>t.id===e);if(t)return Object.assign(Object.assign({},t),{permissions:t.permissions?Object.assign(Object.assign(Object.assign({},c.h[t.permissions.team_role]),c.g[t.permissions.permission_level]),t.permissions):null})}}findCategory(e){for(const t of this.hierarchies$.value){const i=t.categories.find(t=>t.id===e);if(i)return i}}findProject(e){return this.hierarchies$.value.find(t=>t.id===e)}toggleExpand({type:e,id:t,forceOpen:i}){switch(e){case a.b.PROJECT:this.expandedSpaceMap[t]=i||!this.expandedSpaceMap[t];break;case a.b.CATEGORY:this.expandedProjectMap[t]=i||!this.expandedProjectMap[t]}}selectCategory(e){this.multiSelect&&this.selectedSubcategories.find(t=>t.id===e.subcategory.id)?this.onDeselect.emit(e):this.onSelect.emit(e)}hasCategories(e){this.onNoCategories.emit(e)}selectList(){if(!this.traversedOrFirstList&&!this.selectedSubcategory)return;const e=this.traversedOrFirstList?this.traversedOrFirstList:this.findSubcategory(this.selectedSubcategory);this.disabledSubcategories[e.id]||this.checkCreateTaskPermission&&!(e.permissions.can_create_tasks||void 0===e.permissions.can_create_tasks&&c.g[e.permissions.permission_level].can_create_tasks)||this.selectItem({type:a.b.SUBCATEGORY,id:e.id})}traverseLists(e){if(!this.hierarchiesFiltered||!this.hierarchiesFiltered.length)return;const t=Object(r.b)(this.hierarchiesFiltered),i=this.hierarchiesFiltered.reduce((e,t)=>(e[t.id]=!0,e),{});let o={};const s=this.hierarchiesFiltered.find(e=>e.id===n.h);if(s&&(o=s.categories.reduce((e,t)=>(e[t.id]=!0,e),{})),!t.length)return;const c=this.traversedOrFirstList?this.traversedOrFirstList.id:this.selectedSubcategory?this.selectedSubcategory:null,a=t.findIndex(e=>e.id===c);if(-1!==a){if("up"===e?this.traversedOrFirstList=c===t[0].id?t[t.length-1]:t[a-1]:"down"===e&&(this.traversedOrFirstList=c===t[t.length-1].id?t[0]:t[a+1]),this.traversedOrFirstList&&this.traversedOrFirstList.project_id){const e=i[this.traversedOrFirstList.project_id]?this.traversedOrFirstList.project_id:n.h;this.expandedSpaceMap[e]||(this.expandedSpaceMap[e]=!0);const t=this.traversedOrFirstList.hiddenCategory?n.d:e!==n.h||o[this.traversedOrFirstList.category]?this.traversedOrFirstList.category:n.h;t===n.d||this.expandedProjectMap[t]||(this.expandedProjectMap[t]=!0)}this.picker.scrollToSelected(0,!1)}}}return e.\u0275fac=function(t){return new(t||e)(u.Wb(v.Store),u.Wb(u.h),u.Wb(k.a))},e.\u0275cmp=u.Qb({type:e,selectors:[["cu-category-list"]],viewQuery:function(e,t){if(1&e&&u.jd(w,3),2&e){let e;u.Qc(e=u.rc())&&(t.picker=e.first)}},hostBindings:function(e,t){1&e&&u.qc("slashCommandKeyDown",function(e){return t.quillBlotKeyDown(e)},!1,u.Sc)("keydown",function(e){return t.docKeyDown(e)},!1,u.Sc)},inputs:{displaySearch:"displaySearch",showTaskCount:"showTaskCount",selectableProject:"selectableProject",defaultProject:"defaultProject",selectedCategory:"selectedCategory",selectedSubcategory:"selectedSubcategory",mode:"mode",singleCategory:"singleCategory",query:"query",withPermission:"withPermission",multiSelect:"multiSelect",selectedSubcategories:"selectedSubcategories",headerTemplate:"headerTemplate",statusName:"statusName",dropdownPreventDocumentScroll:"dropdownPreventDocumentScroll",hideFolderless:"hideFolderless",allowSelectAll:"allowSelectAll",extraItemTemplate:"extraItemTemplate",currentLocation:"currentLocation",checkCreateTaskPermission:"checkCreateTaskPermission",individualSelection:"individualSelection",handleGlobalKeys:"handleGlobalKeys",autoFocus:"autoFocus",showAdvanced:"showAdvanced"},outputs:{onSelect:"onSelect",onDeselect:"onDeselect",onNoCategories:"onNoCategories",onClearSearch:"onClearSearch",onChangeProject:"onChangeProject"},features:[u.Gb],ngContentSelectors:x,decls:3,vars:25,consts:[[3,"displaySearch","showAdvanced","headerTemplate","hierarchies","searchStringVal","allSpacesSelected","allowSelectAll","hideSubcategories","multiSelection","checkCreateTaskPermission","disabledSubcategories","expandedSpaceMap","expandedProjectMap","selectedSpaceMap","selectedProjectMap","selectedListMap","underlyingSpaceMap","underlyingProjectMap","selectedSubcategoryId","selectableProject","disabledStatusMessage","extraItemTemplate","traversedOrFirstList","individualSelection","autoFocus","onToggleExpand","onToggleLocation","onSearch","onCategoryInput"],["picker",""]],template:function(e,t){1&e&&(u.Cc(),u.cc(0,"cu-hierarchy-picker",0,1),u.qc("onToggleExpand",function(e){return t.toggleExpand(e)})("onToggleLocation",function(e){return t.selectItem(e)})("onSearch",function(e){return t.search(e)})("onCategoryInput",function(e){return t.handleCategoryInput(e)}),u.Bc(2),u.bc()),2&e&&u.Dc("displaySearch",t.displaySearch)("showAdvanced",t.showAdvanced)("headerTemplate",t.headerTemplate)("hierarchies",t.hierarchiesFiltered)("searchStringVal",t.searchStringVal)("allSpacesSelected",!1)("allowSelectAll",t.allowSelectAll)("hideSubcategories",!1)("multiSelection",!1)("checkCreateTaskPermission",t.checkCreateTaskPermission)("disabledSubcategories",t.disabledSubcategories)("expandedSpaceMap",t.expandedSpaceMap)("expandedProjectMap",t.expandedProjectMap)("selectedSpaceMap",t.selectedSpaceMap)("selectedProjectMap",t.selectedProjectMap)("selectedListMap",t.selectedListMap)("underlyingSpaceMap",t.underlyingSpaceMap)("underlyingProjectMap",t.underlyingProjectMap)("selectedSubcategoryId",t.selectedSubcategory)("selectableProject",t.selectableProject)("disabledStatusMessage",t.disabledStatusMessage)("extraItemTemplate",t.extraItemTemplate)("traversedOrFirstList",t.traversedOrFirstList)("individualSelection",t.individualSelection)("autoFocus",t.autoFocus)},directives:[y.a],encapsulation:2,changeDetection:0}),e})()},FLRT:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("aVmG"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.a]]}),e})()},FRLQ:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("TqRa"),n=i("fXoL"),s=i("7XkT");let c=(()=>{class e{constructor(e){this.userProfileService=e}get enabled(){return!!this.user&&this.userProfileService.enabled&&!o.k&&-1!=+this.user.id&&!this.automation}click(e){this.enabled&&this.userProfileService.openProfile(this.user)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.UserProfileService))},e.\u0275dir=n.Rb({type:e,selectors:[["","cuUserProfileLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&n.qc("click",function(e){return t.click(e)}),2&e&&n.ad("cursor",t.enabled?"pointer":null)},inputs:{user:["cuUserProfileLink","user"],automation:"automation"}}),e})()},FWfR:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var o=i("fXoL"),n=i("tt+N"),s=i("jJQC"),c=i("3Pt+"),a=i("ofXK"),r=i("FrPa"),l=i("p8bC");const d=function(e){return{"cu-emoji-custom-field-value__item_unselected":e}};function u(e,t){if(1&e){const e=o.dc();o.cc(0,"div",2),o.qc("mouseenter",function(){o.Uc(e);const i=t.$implicit;return o.uc().rating.tempValue=i})("click",function(){o.Uc(e);const i=t.$implicit;return o.uc().emojiClicked(i)}),o.vc(1,"trustHTML"),o.vc(2,"async"),o.vc(3,"emojiToImage"),o.bc()}if(2&e){const e=t.$implicit,i=o.uc();o.Dc("ngClass",o.Hc(8,d,(i.rating.tempValue||i.fieldValue)<e||!(i.rating.tempValue||i.fieldValue)))("innerHTML",o.wc(1,2,o.wc(2,4,o.wc(3,6,i.rating.emoji))),o.Vc)}}const m={provide:c.o,useExisting:Object(o.Z)(()=>p),multi:!0};let p=(()=>{class e{constructor(e){this.cdr=e,this.clickToClear=!1,this.trackByIndex=s.b,this.onChange=e=>{},this.onTouched=()=>{}}ngOnInit(){}ngOnChanges(e){e.field&&(this.rating={range:Array.from(Array(this.field.type_config.count).keys()).map(e=>e+1),emoji:Object(n.b)(this.field.type_config.code_point)})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.fieldValue=e,this.cdr.markForCheck()}emojiClicked(e){this.fieldValue=this.fieldValue===e&&this.clickToClear?null:e,this.onChange(this.fieldValue)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-emoji-custom-field-value"]],inputs:{field:"field",clickToClear:"clickToClear"},features:[o.Hb([m]),o.Gb],decls:2,vars:2,consts:[[1,"cu-emoji-custom-field-value__container",3,"mouseleave"],["class","cu-emoji-custom-field-value__item",3,"ngClass","innerHTML","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-emoji-custom-field-value__item",3,"ngClass","innerHTML","mouseenter","click"]],template:function(e,t){1&e&&(o.cc(0,"div",0),o.qc("mouseleave",function(){return t.rating.tempValue=null,t.onTouched()}),o.bd(1,u,4,10,"div",1),o.bc()),2&e&&(o.Ib(1),o.Dc("ngForOf",t.rating.range)("ngForTrackBy",t.trackByIndex))},directives:[a.p,a.o],pipes:[r.a,a.b,l.a],styles:[".cu-emoji-custom-field-value__container{display:flex}.cu-emoji-custom-field-value__item{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer}.cu-emoji-custom-field-value__item_unselected{opacity:.5;filter:grayscale(100%)}"],encapsulation:2,changeDetection:0}),e})()},Fjoz:function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"b",function(){return a});var o=i("s3LH"),n=i("nUx9"),s=i("381O");const c={zIndex:990,allowDragIntoToggle:e=>!(e instanceof s.a||e instanceof n.a),anchorAlignCenter(e,t){let i;if(e)i=e.statics.blotName;else{let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-btn")||n&&n.classList&&n.classList.contains("ql-doc-mention")||n&&n.classList&&n.classList.contains("task-mention")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}if(!i)return!1;switch(i){case"button":case"task_mention":case"doc_mention":case"header":return!0;default:return!1}},anchorOffsetTop(e,t){let i;if(e)i=e.statics.blotName;else{let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-giphy")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}switch(i){case"giphy":return 7;default:return 0}},anchorOffsetLeft(e,t){let i;if(e?i=e.statics.blotName:t.classList.contains("ql-ui")&&"LI"===t.parentNode.tagName&&(i=(e=o.d.find(t.parentNode,!0)).statics.blotName),"list"===i){const t=20,i=e.formats(),o=i.indent||0,n=i&&!!i.align,s=i&&i.list&&"none"===i.list.list,c=s?2:0,a=parseInt(window.getComputedStyle(e.domNode).getPropertyValue("font-size"),10);let r=0;return r=n||s?0+t:o>0?-5:-1,r+1.2*o*a-c}return 0},isInlineRoot:e=>"image"===e.statics.blotName||"task_mention"===e.statics.blotName||"doc_mention"===e.statics.blotName,getDraggableRootBlot(e,t){let i;if(e)i=e.statics.blotName;else{t.classList&&t.classList.contains("ql-ui")&&"LI"===t.parentNode.tagName&&(i=(e=o.d.find(t.parentNode,!0)).statics.blotName);let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-frame")||n&&n.classList&&n.classList.contains("comment-attachment")||n&&n.classList&&n.classList.contains("ql-btn")||n&&n.classList&&n.classList.contains("ql-bookmark")||n&&n.classList&&n.classList.contains("ql-doc-mention")||n&&n.classList&&n.classList.contains("task-mention")||n&&n.classList&&n.classList.contains("ql-giphy")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}if(!i)return null;switch("link"!==i&&"code"!==i||(i=(e=e.parent).statics.blotName),i){case"block":return e;case"table-cell-line":return e.tableCell()&&e.tableCell().table()&&e.tableCell().table().parent;case"table":return e.table()&&e.table().parent;case"table-view":case"list":case"code-block-container":return e;case"code-block":return e.parent;case"header":case"banner":case"blockquote-container":return e;case"blockquote":return e.parent;case"frame":case"divider":case"attachment":case"button":case"bookmark":case"giphy":case"image":case"task_mention":case"doc_mention":return e;default:return null}},getDropableRootBlot(e,t){let i;if(e)i=e.statics.blotName;else{t.classList.contains("ql-ui")&&"LI"===t.parentNode.tagName&&(i=(e=o.d.find(t.parentNode,!0)).statics.blotName);let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-frame")||n&&n.classList&&n.classList.contains("comment-attachment")||n&&n.classList&&n.classList.contains("ql-btn")||n&&n.classList&&n.classList.contains("ql-bookmark")||n&&n.classList&&n.classList.contains("ql-giphy")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}if(!i)return null;switch(i){case"table-cell-line":return e.tableCell()&&e.tableCell().table()&&e.tableCell().table().parent;case"table":return e.table()&&e.table().parent;case"table-view":case"list":case"code-block-container":return e;case"code-block":return e.parent;case"header":case"banner":case"blockquote-container":return e;case"blockquote":return e.parent;case"block":case"frame":case"divider":case"attachment":case"button":case"bookmark":case"giphy":return e;default:return null}},dragOverCallback(e,t){t&&"list"===t.statics.blotName&&t.isToggleListItem()&&!t.isThisItemExpanded()&&t.expandItem()}},a={zIndex:1001,allowDragIntoToggle:e=>!(e instanceof s.a||e instanceof n.a),anchorAlignCenter(e,t){let i;if(e)i=e.statics.blotName;else{let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-btn")||n&&n.classList&&n.classList.contains("ql-doc-mention")||n&&n.classList&&n.classList.contains("task-mention")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}if(!i)return!1;switch(i){case"button":case"task_mention":case"doc_mention":case"header":return!0;default:return!1}},anchorOffsetTop(e,t){let i;if(e)i=e.statics.blotName;else{let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-giphy")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}switch(i){case"giphy":return 7;default:return 0}},anchorOffsetLeft(e,t){let i;if(e?i=e.statics.blotName:t.classList.contains("ql-ui")&&"LI"===t.parentNode.tagName&&(i=(e=o.d.find(t.parentNode,!0)).statics.blotName),"list"===i){const t=e.formats(),i=t.indent||0,o=t&&!!t.align,n=t&&t.list&&"none"===t.list.list,s=n?2:0,c=parseInt(window.getComputedStyle(e.domNode).getPropertyValue("font-size"),10);let a=0;return a=o||n?0:-1.7*c,a+(3*i+1.5)*c-s}return 0},isInlineRoot:e=>"image"===e.statics.blotName||"task_mention"===e.statics.blotName||"doc_mention"===e.statics.blotName,getDraggableRootBlot(e,t){let i;if(e)i=e.statics.blotName;else{t.classList&&t.classList.contains("ql-ui")&&"LI"===t.parentNode.tagName&&(i=(e=o.d.find(t.parentNode,!0)).statics.blotName);let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-frame")||n&&n.classList&&n.classList.contains("comment-attachment")||n&&n.classList&&n.classList.contains("ql-btn")||n&&n.classList&&n.classList.contains("ql-bookmark")||n&&n.classList&&n.classList.contains("ql-doc-mention")||n&&n.classList&&n.classList.contains("task-mention")||n&&n.classList&&n.classList.contains("ql-giphy")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}if(!i)return null;switch("link"!==i&&"code"!==i||(i=(e=e.parent).statics.blotName),i){case"block":return e;case"table-cell-line":return e.tableCell()&&e.tableCell().table()&&e.tableCell().table().parent;case"table":return e.table()&&e.table().parent;case"table-view":case"list":case"code-block-container":return e;case"code-block":return e.parent;case"header":case"banner":case"blockquote-container":return e;case"blockquote":return e.parent;case"frame":case"divider":case"attachment":case"button":case"bookmark":case"giphy":case"image":case"task_mention":case"doc_mention":return e;default:return null}},getDropableRootBlot(e,t){let i;if(e)i=e.statics.blotName;else{t.classList.contains("ql-ui")&&"LI"===t.parentNode.tagName&&(i=(e=o.d.find(t.parentNode,!0)).statics.blotName);let n=t;for(;n;)n&&n.classList&&n.classList.contains("ql-editor")?n=null:n&&n.classList&&n.classList.contains("ql-frame")||n&&n.classList&&n.classList.contains("comment-attachment")||n&&n.classList&&n.classList.contains("ql-btn")||n&&n.classList&&n.classList.contains("ql-bookmark")||n&&n.classList&&n.classList.contains("ql-giphy")?(i=(e=o.d.find(n,!0)).statics.blotName,n=null):n=n.parentNode}if(!i)return null;switch(i){case"table-cell-line":return e.tableCell()&&e.tableCell().table()&&e.tableCell().table().parent;case"table":return e.table()&&e.table().parent;case"table-view":case"list":case"code-block-container":return e;case"code-block":return e.parent;case"header":case"banner":case"blockquote-container":return e;case"blockquote":return e.parent;case"block":case"frame":case"divider":case"attachment":case"button":case"bookmark":case"giphy":return e;default:return null}},dragOverCallback(e,t){t&&"list"===t.statics.blotName&&t.isToggleListItem()&&!t.isThisItemExpanded()&&t.expandItem()}}},G4qr:function(e,t,i){"use strict";i.d(t,"a",function(){return V});var o=i("fXoL"),n=i("fFxs"),s=i("/qOb"),c=i("XNiG"),a=i("xgIS"),r=i("pLZG"),l=i("IzEk"),d=i("1G5W"),u=i("jJQC"),m=i("lE2N"),p=i("HBlJ"),h=i("ofXK"),f=i("S//e"),b=i("5+WD"),g=i("NsZK"),_=i("UdVN");let v=(()=>{class e{constructor(){this.CommunicatorActionType=n.a,this.disableDrag=!1,this.onCommunicatorAction=new o.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-email-communicators-user"]],inputs:{user:"user",disableDrag:"disableDrag"},outputs:{onCommunicatorAction:"onCommunicatorAction"},decls:4,vars:6,consts:[[1,"cu-email-communicators__user",3,"cuTooltip"],[1,"cu-email-communicators__user-name"],["icon","close",1,"cu-email-communicators__close",3,"click"]],template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.dd(2),o.bc(),o.cc(3,"div",2),o.qc("click",function(){return t.onCommunicatorAction.emit({type:t.CommunicatorActionType.RemoveUser,userId:t.user.id,email:t.user.email})}),o.bc(),o.bc()),2&e&&(o.Ob("cu-email-communicators__user-cf",!!t.user.field_id)("cu-email-communicators__user-no-drag",t.disableDrag),o.Dc("cuTooltip",t.user.field_id?null:t.user.email),o.Ib(2),o.fd(" ",t.user.username||t.user.email," "))},directives:[g.a,_.a],styles:['.cu-email-communicators{padding:0 22px;border-bottom:1px solid #e9ebf0}.cu-email-communicators__from-emails-dragging .cu-email-communicators__user{pointer-events:none}.cu-email-communicators__collapsed{padding:15px 20px;display:flex;align-items:center;margin-left:5px;border-top:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0}.dark-theme .cu-email-communicators__collapsed{border-color:#1e272e}.cu-email-communicators__collapsed .cu-email-info{flex-grow:0}.cu-email-communicators__collapsed-icon{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:24px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:5px;border-radius:4px}.cu-email-communicators__collapsed-icon:hover{background-color:rgba(233,235,240,.5)}.dark-theme .cu-email-communicators__collapsed-icon:hover{background-color:rgba(43,52,59,.5)}.cu-email-communicators__collapsed-icon:hover svg{fill:#292d34}.dark-theme .cu-email-communicators__collapsed-icon:hover svg{fill:#b9bec7}.cu-email-communicators__collapsed-icon svg{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:10px;height:10px;fill:#7c828d}.dark-theme .cu-email-communicators{border-color:#1e272e}.cu-email-communicators__suggested.cu-email-communicators__user{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;background:#f2f4f7;border:transparent}.dark-theme .cu-email-communicators__suggested.cu-email-communicators__user{background:#2b343b}.cu-email-communicators__suggested.cu-email-communicators__user:hover{background:#e9ebf0;border-color:transparent}.dark-theme .cu-email-communicators__suggested.cu-email-communicators__user:hover{background:#1e272e}.cu-email-communicators__suggested-container{display:flex;align-items:center;flex-wrap:wrap;margin-bottom:12px}.cu-email-communicators__suggested-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;height:32px;display:flex;align-items:center;color:#7c828d;padding:0 12px 0 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__suggested-title{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__suggested-title{color:#828588}.cu-email-communicators__link-plus{color:#7b68ee;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:none;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__link-plus{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__link-plus{font-family:var(--global-font-support)}}.cu-email-communicators__modal .cu-modal__title{width:100%;padding:0 35px;text-align:center}.cu-email-communicators__modal .cu-modal__close{right:35px}.cu-email-communicators__modal .cu-modal__dialog{width:800px!important;padding:35px 0 0!important}.cu-email-communicators__user{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;height:24px;padding:0 8px;border-radius:6px;cursor:move;margin-right:8px;border:1px solid #e9ebf0}.cu-email-communicators__user:hover{background:#e9ebf0}.dark-theme .cu-email-communicators__user:hover{background:#1e272e!important;border-color:transparent}.cu-email-communicators__user.cu-email-communicators__user-no-drag{cursor:default}.cu-email-communicators__user.cu-email-communicators__user-cf{background:#7b68ee;font-weight:400;font-size:11px;line-height:11px;display:inline-flex;align-items:center;flex-shrink:0;padding:4px 7px;margin:1px 4px 1px 0;border-radius:4px;color:#fff;cursor:pointer;border:none;height:auto}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__user.cu-email-communicators__user-cf{background:var(--theme-main-color)}}.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__user-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__user-name{font-family:var(--global-font-support)}}.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__close{stroke:#fff}.dark-theme .cu-email-communicators__user{border-color:#1e272e}.cu-email-communicators__user.cu-email-communicators__user-invalid-email{border:1px solid rgba(255,66,69,.5);background:rgba(255,66,69,.1)}.cu-email-communicators__user.cu-email-communicators__user-invalid-email:hover,.dark-theme .cu-email-communicators__user.cu-email-communicators__user-invalid-email:hover{background:rgba(255,66,69,.2)}.cu-email-communicators__user-from{cursor:pointer}.cu-email-communicators__user-email,.cu-email-communicators__user-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-email-communicators__user-name{color:#292d34}.dark-theme .cu-email-communicators__user-name{color:#d5d6d7}.cu-email-communicators__user-email{color:#7c828d}.dark-theme .cu-email-communicators__user-email{color:#abaeb0}.cu-email-communicators__user-name+.cu-email-communicators__user-email{margin-left:5px}.cu-email-communicators__email-authed{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;height:28px;align-items:center;padding:2px 10px;cursor:pointer;margin:5px;border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__email-authed{font-family:var(--global-font-support)}}.cu-email-communicators__email-authed-name{padding-right:5px}.cu-email-communicators__email-authed-name,.cu-email-communicators__email-authed span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-email-communicators__email-authed:hover{background-color:var(--theme-main-color);color:#fff}.cu-email-communicators__email-authed:hover .cu-email-communicators__email-authed-name,.cu-email-communicators__email-authed:hover span{color:#fff}.cu-email-communicators__sender{width:300px}.cu-email-communicators__sender-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;display:flex;align-items:center;justify-content:space-between;text-transform:uppercase;color:#7c828d;padding:0 15px;height:42px;background-color:rgba(233,235,240,.4)}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__sender-top{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__sender-top{background-color:#2b343b;color:#828588}.cu-email-communicators__sender-cog{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;fill:#b9bec7;cursor:pointer}.cu-email-communicators__sender-cog:hover{fill:var(--theme-main-color)}.cu-email-communicators__close{transition:stroke .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:6px;height:10px;width:10px;padding:1px;stroke:#7c828d;cursor:pointer}.dark-theme .cu-email-communicators__close{stroke:#b9bec7}.cu-email-communicators__close:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__close:hover{stroke:var(--theme-main-color)}}.cu-email-communicators__row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;min-height:24px}.cu-email-communicators__from{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;display:flex;width:100%;align-items:center;flex-wrap:wrap}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from{font-family:var(--global-font-support)}}.cu-email-communicators__from span{font-weight:400;cursor:pointer;color:#333}.dark-theme .cu-email-communicators__from span{color:#d5d6d7}.cu-email-communicators__from-link{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:1;display:inline;background-color:var(--theme-main-color);color:#fff;padding:4px 5px 3px;border-radius:2px;animation:flash .5s linear 2}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-link{font-family:var(--global-font-support)}}.cu-email-communicators__from-link:hover{background-color:var(--theme-main-color-dark)}.cu-email-communicators__from-group{width:90%}.cu-email-communicators__from-group-additional{margin-top:8px}.cu-email-communicators__from-group .user-list__body-virtual-viewport{height:200px}.cu-email-communicators__from-label{display:flex;align-items:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-right:8px;text-transform:capitalize;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__from-label{color:#7c828d}.cu-email-communicators__from-label-container{display:flex}.cu-email-communicators__from-label-container .cu-dropdown__toggle{display:flex;align-items:center;font-weight:400}.cu-email-communicators__from-label-container .cu-dropdown__toggle:hover .cu-email-communicators__email-dropdown-icon{opacity:1}.cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(90deg);fill:#292d34;width:16px;height:16px;padding:2px;margin-left:5px;opacity:0}.dark-theme .cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{fill:#d5d6d7}.cu-dropdown_open .cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{opacity:1;transform:rotate(-90deg)}.cu-email-communicators__from-label .cu-dropdown__toggle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-label .cu-dropdown__toggle{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__from-label .cu-dropdown__toggle{color:#7c828d}.cu-email-communicators__from-emails{display:flex;align-items:center;flex-wrap:wrap;flex:1 0 0;cursor:text;min-height:12px}.cu-email-communicators__from-emails .cu-search__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-left:5px;padding:0 0 2px;width:100px;min-width:30px;max-width:300px;border:none;background-color:transparent!important;box-shadow:none!important}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-emails .cu-search__input{font-family:var(--global-font-support)}}.cu-email-communicators__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;padding:0 20px;border:none;border-bottom:1px solid #e9ebf0;color:#292d34;background-color:transparent;box-shadow:none!important;width:100%;height:40px;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__input{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__input{color:#fff;border-color:#1e272e}.cu-email-communicators__input:-ms-input-placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px 1;color:#b9bec7}.cu-email-communicators__input::placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px 1;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-email-communicators__input::placeholder{font-family:var(--global-font-support)}}.cu-email-communicators__cc{display:flex;align-items:center}.cu-email-communicators__cc-item{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;cursor:pointer;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__cc-item{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__cc-item{color:#7c828d}.cu-email-communicators__cc-item:hover{color:var(--theme-main-color)}.cu-email-communicators__cc-item:not(:last-child){margin-right:5px}.cu-email-communicators_error-popover{margin-left:-280px;background:#fff;border:1px solid #fd7179}.dark-theme .cu-email-communicators_error-popover{background:#2b343b}.cu-email-communicators_error-popover .cu-error-popover{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#292d34;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators_error-popover .cu-error-popover{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators_error-popover .cu-error-popover{color:#d5d6d7}.cu-email-communicators_error-popover .cu-error-popover .icon{width:13px;height:13px;fill:#fd7179;margin-right:5px}.cu-email-communicators_error-popover:after{position:absolute;content:"";background:#fff;width:100%;top:0!important;margin-left:0!important;left:0!important;border:none!important;height:10px;z-index:3}.dark-theme .cu-email-communicators_error-popover:after{background:#2b343b}.cu-email-communicators_error-popover:before{position:absolute;content:"";background:#fff;border:1px solid #fd7179!important;height:12px;width:12px;transform:rotate(45deg);top:-5px!important;z-index:2}.dark-theme .cu-email-communicators_error-popover:before{background:#2b343b}.cu-email-communicators__signatures-menu{width:260px;padding:8px 0}.cu-email-communicators__signatures-menu-team{max-height:200px}.cu-email-communicators__signatures-menu-settings{padding-top:2px;border-top:1px solid #e9ebf0}.dark-theme .cu-email-communicators__signatures-menu-settings{border-color:#1e272e}.cu-email-communicators__signatures-menu-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;height:32px;display:flex;align-items:center;color:#b9bec7;padding:0 12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-label{color:#828588}.cu-email-communicators__signatures-menu-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;height:32px;display:flex;align-items:center;justify-content:space-between;padding:0 12px;cursor:pointer}.cu-email-communicators__signatures-menu-item-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-item-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-item-text{color:#d5d6d7}.cu-email-communicators__signatures-menu-item:hover{background:#fafbfc}.dark-theme .cu-email-communicators__signatures-menu-item:hover{background:#2b343b}.cu-email-communicators__signatures-menu-item .icon{width:14px;height:14px;fill:#292d34}.dark-theme .cu-email-communicators__signatures-menu-item .icon{fill:#d5d6d7}.cu-email-communicators__signatures-menu-item-add .cu-email-communicators__signatures-menu-item-text{font-weight:500;color:var(--theme-main-color)}.cu-email-communicators__signatures-menu-item-settings-divider{background:#e9ebf0;width:100%;margin:8px 0;height:1px}.dark-theme .cu-email-communicators__signatures-menu-item-settings-divider{background:#1e272e}.cu-email-communicators__signatures-menu-item-settings{padding:0 12px;height:32px}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item{justify-content:flex-start}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#7c828d}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#828588}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{padding-right:5px;font-weight:500;color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-settings .icon{margin-left:auto}'],encapsulation:2,changeDetection:0}),e})();var k=i("BTFG"),y=i("IO3K"),w=i("EDFS"),x=i("JNrn"),I=i("3Pt+"),T=i("HcWw"),C=i("loh9");const D=["userListPopover"],O=["searchField"],S=["searchContainer"];function E(e,t){if(1&e){const e=o.dc();o.cc(0,"div",9),o.cc(1,"cu-user-list-dropdown",10),o.qc("onChange",function(t){o.Uc(e);const i=o.uc(2);return i.setEmails(t,null==i.communicatorData?null:i.communicatorData.fieldType)})("onOpen",function(){o.Uc(e);const t=o.uc(2);return t.onCommunicatorAction.emit({type:t.CommunicatorActionType.OpenState,updatingEmails:!0}),t.fetchContacts()})("onClose",function(){o.Uc(e);const t=o.uc(2);return t.onCommunicatorAction.emit({type:t.CommunicatorActionType.OpenState,updatingEmails:!1})}),o.dd(2),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("users",null==e.communicatorData?null:e.communicatorData.contacts)("onlyLoadForEmptyList",!0)("search",!1)("disabled",e.disabled)("selectedUsers",null==e.communicatorData?null:e.communicatorData.users)("multiChoice",!0)("showReassign",!1)("enableFirstSelection",!1)("showInactive",!1)("displayProfile",!1),o.Ib(1),o.fd(" ",null==e.communicatorData?null:e.communicatorData.fieldType,": ")}}function P(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-email-communicators-user",15),o.qc("cdkDragStarted",function(){return o.Uc(e),o.uc(3).onDragChange.emit(!0)})("cdkDragEnded",function(){return o.Uc(e),o.uc(3).onDragChange.emit(!1)})("onCommunicatorAction",function(t){o.Uc(e);const i=o.uc(3);return i.communicateAction(t,null==i.communicatorData?null:i.communicatorData.fieldType)}),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(3);o.Dc("user",e)("disableDrag",i.disableDrag)}}function j(e,t){if(1&e&&o.Yb(0,16),2&e){o.uc(3);const e=o.Rc(5);o.Dc("ngTemplateOutlet",e)}}function A(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.cc(1,"div",12),o.qc("click",function(){o.Uc(e);const i=t.last,n=o.uc(2);return i?n.focusSearch():null})("cdkDropListDropped",function(t){return o.Uc(e),o.uc(2).onDropEmail.emit(t)}),o.bd(2,P,1,2,"cu-email-communicators-user",13),o.bd(3,j,1,1,"ng-container",14),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=t.last,n=t.index,s=o.uc(2);o.Ob("cu-email-communicators__from-group-additional",0!==n),o.Ib(1),o.Ob("cu-email-communicators__from-emails-dragging",s.dragging),o.Dc("cdkDropListDisabled",s.disableDrag)("id",(null==s.communicatorData?null:s.communicatorData.fieldType)+"-"+n),o.Ib(1),o.Dc("ngForOf",e)("ngForTrackBy",s.trackById),o.Ib(1),o.Dc("ngIf",i)}}function $(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.cc(1,"div",17),o.qc("click",function(){return o.Uc(e),o.uc(2).focusSearch()})("cdkDropListDropped",function(t){return o.Uc(e),o.uc(2).onDropEmail.emit(t)}),o.Yb(2,16),o.bc(),o.bc()}if(2&e){const e=o.uc(2),t=o.Rc(5);o.Ib(1),o.Dc("id",(null==e.communicatorData?null:e.communicatorData.fieldType)+"-0"),o.Ib(1),o.Dc("ngTemplateOutlet",t)}}function U(e,t){if(1&e&&(o.cc(0,"div",4),o.cc(1,"div",5),o.bd(2,E,3,11,"div",6),o.bd(3,A,4,9,"div",7),o.bd(4,$,3,2,"div",8),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(2),o.Dc("ngIf",e.showLabel),o.Ib(1),o.Dc("ngForOf",e.groupedUsers)("ngForTrackBy",e.trackByIndex),o.Ib(1),o.Dc("ngIf",!(null!=e.groupedUsers&&e.groupedUsers.length))}}function R(e,t){if(1&e){const e=o.dc();o.cc(0,"div",22),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).useSuggestedEmail(i)}),o.cc(1,"div",23),o.dd(2),o.bc(),o.bc()}if(2&e){const e=t.$implicit;o.Ib(2),o.ed(null==e?null:e.email)}}function M(e,t){if(1&e&&(o.cc(0,"div",18),o.cc(1,"div",19),o.ac(2),o.gc(3,20),o.Zb(),o.dd(4,": "),o.bc(),o.bd(5,R,3,1,"div",21),o.bc()),2&e){const e=o.uc();o.Ib(5),o.Dc("ngForOf",e.suggestedEmailsToShow)("ngForTrackBy",e.trackById)}}function F(e,t){1&e&&o.Xb(0,"cu-loader")}function L(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-user-list",26),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeUsers(t)}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("users",e.filteredUsers)("multiChoice",!1)("showUnassign",!1)("search",!1)("showSearch",!1)("focusOnInit",!1)("displayProfile",!1)("autoHighlight",!0)("showInactive",!1)("displayEmail",!0)}}function N(e,t){if(1&e&&(o.bd(0,F,1,0,"cu-loader",24),o.bd(1,L,1,10,"ng-template",null,25,o.cd)),2&e){const e=o.Rc(2),t=o.uc();o.Dc("ngIf",t.fetchingContacts&&!(null!=t.communicatorData&&null!=t.communicatorData.contacts&&t.communicatorData.contacts.length))("ngIfElse",e)}}function z(e,t){if(1&e){const e=o.dc();o.cc(0,"div",34),o.qc("click",function(t){return o.Uc(e),o.uc(2).clearInvalid(t)}),o.bc()}}const q=function(e){return{display:e}};function G(e,t){if(1&e){const e=o.dc();o.cc(0,"div",27,28),o.cc(2,"div",29,30),o.qc("onShown",function(){return o.Uc(e),o.uc().fetchContacts()})("onHidden",function(){return o.Uc(e),o.uc().popoverHidden()}),o.cc(4,"input",31,32),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().searchString=t})("ngModelChange",function(){return o.Uc(e),o.uc().filter()})("keypress",function(t){return o.Uc(e),o.uc().omitCharacters(t)})("blur",function(){return o.Uc(e),o.uc().checkEmail()})("keydown",function(t){return o.Uc(e),o.uc().onToEmailKeydown(t)})("paste",function(t){return o.Uc(e),o.uc().onPaste(t)}),o.bc(),o.bd(6,z,1,0,"div",33),o.bc(),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(3);o.Dc("ngStyle",o.Hc(13,q,e.dragging?"none":"")),o.Ib(2),o.Ob("cu-email-communicators__user-invalid-email",e.invalidEmail)("cu-email-communicators__user",e.invalidEmail),o.Dc("popover",t)("cuTooltip",e.disabled?e.disabledTooltip:null),o.Ib(2),o.Dc("autosize",e.searchString)("disabled",e.disabled)("placeholder",e.placeholder||"")("ngModel",e.searchString)("cuTooltip",e.invalidEmail?e.invalidEmailText:null),o.Ib(2),o.Dc("ngIf",e.invalidEmail)}}let V=(()=>{class e{constructor(e,t){this.changeDetector=e,this.ngZone=t,this.CommunicatorActionType=n.a,this.filteredUsers=[],this.suggestedEmailsToShow=[],this.fetchedContacts=!1,this.searchString="",this.invalidEmail=!1,this.groupedUsers=[],this.destroy$=new c.a,this.disabled=!1,this.dragging=!1,this.disableDrag=!1,this.showLabel=!0,this.fetchingContacts=!1,this.suggestedOnly=!1,this.onCommunicatorAction=new o.o,this.onDropEmail=new o.o,this.onDragChange=new o.o,this.onEmailUserAction=new o.o,this.onFocus=new o.o,this.trackById=Object(u.d)("id"),this.trackByIndex=u.b,this.disabledTooltip=$localize`:@@cu-email-communicators__user-invalid-email:You must link an email account before you can send any emails.`,this.invalidEmailText=$localize`:@@cu-email-communicators__invalid-email:Not a valid email address`}ngOnInit(){}ngOnChanges(e){var t;if(e.communicatorData||e.suggestedEmails||e.ccUsers||e.bccUsers){if(this.suggestedEmails&&this.suggestedEmails.length&&this.communicatorData&&(this.communicatorData.users||this.ccUsers||this.bccUsers)){const e=Object(m.a)([...(null===(t=this.communicatorData)||void 0===t?void 0:t.users)||[],...this.ccUsers||[],...this.bccUsers||[]],"email");this.suggestedEmailsToShow=this.suggestedEmails.filter(t=>-1===e.findIndex(e=>{var i,o;return(null===(i=e.email)||void 0===i?void 0:i.toLowerCase())===(null===(o=t.email)||void 0===o?void 0:o.toLowerCase())}))}if(this.communicatorData&&this.communicatorData.users){this.groupedUsers=[];let e=[];this.communicatorData.users.forEach((t,i)=>{e.push(t),(2===e.length&&!this.disableDrag||i===this.communicatorData.users.length-1)&&(this.groupedUsers.push(e),e=[])})}this.suggestedEmails&&this.suggestedEmails.length&&this.communicatorData&&this.communicatorData.contacts&&this.suggestedEmails.forEach(e=>{const t=this.communicatorData.contacts.findIndex(t=>{var i,o;return(null===(i=t.email)||void 0===i?void 0:i.toLowerCase())===(null===(o=e.email)||void 0===o?void 0:o.toLowerCase())});if(-1===t)this.communicatorData=Object.assign(Object.assign({},this.communicatorData),{contacts:[...this.communicatorData.contacts,e]});else{const i=Object.assign(Object.assign({},this.communicatorData.contacts[t]),{id:e.id});this.communicatorData=Object.assign(Object.assign({},this.communicatorData),{contacts:[...this.communicatorData.contacts.slice(0,t),i,...this.communicatorData.contacts.slice(t+1)]})}}),this.filter()}}ngAfterViewInit(){this.searchContainer.changes.pipe(Object(r.a)(()=>!!this.searchField),Object(l.a)(1)).subscribe(()=>{this.ngZone.runOutsideAngular(()=>{Object(a.a)(this.searchField.nativeElement,"keyup").pipe(Object(d.a)(this.destroy$)).subscribe(e=>e.stopPropagation()),Object(a.a)(this.searchField.nativeElement,"keypress").pipe(Object(d.a)(this.destroy$)).subscribe(e=>e.stopPropagation()),Object(a.a)(this.searchField.nativeElement,"keydown").pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e.which===s.a.ESCAPE&&this.searchString.length&&(this.searchString="",this.filter(),this.changeDetector.markForCheck())})})})}onPaste(e){e.preventDefault(),this.searchString=e.clipboardData.getData("text"),this.checkEmail(!0)}checkEmail(e=!1){this.searchString&&this.searchString.trim().length&&(Object(p.b)(this.searchString)?!e&&this.filteredUsers.length||this.changeUsers([{id:this.searchString,email:this.searchString}]):this.invalidEmail=!0,this.changeDetector.markForCheck()),e||this.onFocus.emit(!1)}focusSearch(){this.searchField&&this.searchField.nativeElement&&this.searchField.nativeElement.focus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}setEmails(e,t){this.onCommunicatorAction.emit({fieldType:t,type:n.a.SetUsers,users:e})}communicateAction(e,t){this.onCommunicatorAction.emit(Object.assign(Object.assign({},e),{fieldType:t}))}fetchContacts(){this.fetchedContacts=!0,this.onEmailUserAction.emit({type:n.e.FetchEmailContacts})}filter(){this.invalidEmail=!1,this.filteredUsers=this.getFilteredUsers(),this.userListPopover&&(!this.filteredUsers.length&&this.fetchedContacts||!this.searchString?this.communicatorData.contacts&&this.communicatorData.contacts.length&&this.userListPopover.hide():this.userListPopover.show())}popoverHidden(){}getFilteredUsers(){const e=(this.communicatorData.users||[]).reduce((e,t)=>(e[t.email.toLowerCase()]=!0,e),{});return(this.communicatorData.contacts||[]).filter(t=>!e[t.email.toLowerCase()]).filter(e=>(e.username||"").toLowerCase().includes(this.searchString)||-1!==(e.email||"").toLowerCase().indexOf(this.searchString))}omitCharacters(e){return","!==e.key&&" "!==e.key}changeUsers(e){const t=Object(m.a)([...this.communicatorData.users||[],...e],"email");this.setEmails(t,this.communicatorData.fieldType),this.searchString="",this.userListPopover.hide(),this.invalidEmail=!1,this.changeDetector.markForCheck()}useSuggestedEmail(e){const t=Object(m.a)([...this.communicatorData.users||[],e],"email");this.setEmails(t,this.communicatorData.fieldType)}clearInvalid(e){this.searchString="",this.invalidEmail=!1,this.userListPopover&&this.userListPopover.hide()}onToEmailKeydown(e){e.which!==s.a.ENTER&&e.which!==s.a.SPACE&&e.which!==s.a.COMMA||this.checkEmail()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(o.B))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-email-communicators-field"]],viewQuery:function(e,t){if(1&e&&(o.jd(D,1),o.jd(O,1),o.jd(S,1)),2&e){let e;o.Qc(e=o.rc())&&(t.userListPopover=e.first),o.Qc(e=o.rc())&&(t.searchField=e.first),o.Qc(e=o.rc())&&(t.searchContainer=e)}},inputs:{communicatorData:"communicatorData",disabled:"disabled",dragging:"dragging",disableDrag:"disableDrag",showLabel:"showLabel",suggestedEmails:"suggestedEmails",ccUsers:"ccUsers",bccUsers:"bccUsers",fetchingContacts:"fetchingContacts",suggestedOnly:"suggestedOnly",maxEmails:"maxEmails",placeholder:"placeholder"},outputs:{onCommunicatorAction:"onCommunicatorAction",onDropEmail:"onDropEmail",onDragChange:"onDragChange",onEmailUserAction:"onEmailUserAction",onFocus:"onFocus"},features:[o.Gb],decls:6,vars:2,consts:function(){let e;return e=$localize`:@@cu-email-communicators__suggested-title␟4b5030aadb7cfda7e7ddf5c4fb8aa0e2eb26a112␟4662613464573260354:Suggested`,[["class","cu-email-communicators__row",4,"ngIf"],["class","cu-email-communicators__suggested-container",4,"ngIf"],["userListTemplate",""],["addUsers",""],[1,"cu-email-communicators__row"],[1,"cu-email-communicators__from"],["class","cu-email-communicators__from-label",4,"ngIf"],["class","cu-email-communicators__from-group",3,"cu-email-communicators__from-group-additional",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-email-communicators__from-group",4,"ngIf"],[1,"cu-email-communicators__from-label"],[3,"users","onlyLoadForEmptyList","search","disabled","selectedUsers","multiChoice","showReassign","enableFirstSelection","showInactive","displayProfile","onChange","onOpen","onClose"],[1,"cu-email-communicators__from-group"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"cu-email-communicators__from-emails",3,"cdkDropListDisabled","id","click","cdkDropListDropped"],["cdkDrag","",3,"user","disableDrag","cdkDragStarted","cdkDragEnded","onCommunicatorAction",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet",4,"ngIf"],["cdkDrag","",3,"user","disableDrag","cdkDragStarted","cdkDragEnded","onCommunicatorAction"],[3,"ngTemplateOutlet"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"cu-email-communicators__from-emails",3,"id","click","cdkDropListDropped"],[1,"cu-email-communicators__suggested-container"],[1,"cu-email-communicators__suggested-title"],e,["class","cu-email-communicators__suggested cu-email-communicators__user ignore-click-out",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-email-communicators__suggested","cu-email-communicators__user","ignore-click-out",3,"click"],[1,"cu-email-communicators__user-email"],[4,"ngIf","ngIfElse"],["showUserList",""],[1,"ignore-click-out",3,"users","multiChoice","showUnassign","search","showSearch","focusOnInit","displayProfile","autoHighlight","showInactive","displayEmail","onChange"],[3,"ngStyle"],["searchContainer",""],["containerClass","popover_white popover_no-max-width popover_no-padding","placement","bottom","container","body","outsideClick","true","triggers","",3,"popover","cuTooltip","onShown","onHidden"],["userListPopover","bs-popover"],["cuAutoFocus","","type","text","autocomplete","off",1,"cu-search__input",3,"autosize","disabled","placeholder","ngModel","cuTooltip","ngModelChange","keypress","blur","keydown","paste"],["searchField",""],["class","cu-email-communicators__close","icon","close",3,"cuPreventDefault","click",4,"ngIf"],["icon","close",1,"cu-email-communicators__close",3,"cuPreventDefault","click"]]},template:function(e,t){1&e&&(o.bd(0,U,5,4,"div",0),o.bd(1,M,6,2,"div",1),o.bd(2,N,3,2,"ng-template",null,2,o.cd),o.bd(4,G,7,15,"ng-template",null,3,o.cd)),2&e&&(o.Dc("ngIf",!t.suggestedOnly),o.Ib(1),o.Dc("ngIf",(null==t.suggestedEmailsToShow?null:t.suggestedEmailsToShow.length)&&t.suggestedOnly))},directives:[h.q,h.p,f.a,b.d,v,b.a,h.x,k.a,y.a,h.t,w.c,g.a,x.a,I.c,T.a,I.p,I.s,_.a,C.a],styles:['.cu-email-communicators{padding:0 22px;border-bottom:1px solid #e9ebf0}.cu-email-communicators__from-emails-dragging .cu-email-communicators__user{pointer-events:none}.cu-email-communicators__collapsed{padding:15px 20px;display:flex;align-items:center;margin-left:5px;border-top:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0}.dark-theme .cu-email-communicators__collapsed{border-color:#1e272e}.cu-email-communicators__collapsed .cu-email-info{flex-grow:0}.cu-email-communicators__collapsed-icon{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:24px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:5px;border-radius:4px}.cu-email-communicators__collapsed-icon:hover{background-color:rgba(233,235,240,.5)}.dark-theme .cu-email-communicators__collapsed-icon:hover{background-color:rgba(43,52,59,.5)}.cu-email-communicators__collapsed-icon:hover svg{fill:#292d34}.dark-theme .cu-email-communicators__collapsed-icon:hover svg{fill:#b9bec7}.cu-email-communicators__collapsed-icon svg{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:10px;height:10px;fill:#7c828d}.dark-theme .cu-email-communicators{border-color:#1e272e}.cu-email-communicators__suggested.cu-email-communicators__user{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;background:#f2f4f7;border:transparent}.dark-theme .cu-email-communicators__suggested.cu-email-communicators__user{background:#2b343b}.cu-email-communicators__suggested.cu-email-communicators__user:hover{background:#e9ebf0;border-color:transparent}.dark-theme .cu-email-communicators__suggested.cu-email-communicators__user:hover{background:#1e272e}.cu-email-communicators__suggested-container{display:flex;align-items:center;flex-wrap:wrap;margin-bottom:12px}.cu-email-communicators__suggested-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;height:32px;display:flex;align-items:center;color:#7c828d;padding:0 12px 0 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__suggested-title{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__suggested-title{color:#828588}.cu-email-communicators__link-plus{color:#7b68ee;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:none;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__link-plus{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__link-plus{font-family:var(--global-font-support)}}.cu-email-communicators__modal .cu-modal__title{width:100%;padding:0 35px;text-align:center}.cu-email-communicators__modal .cu-modal__close{right:35px}.cu-email-communicators__modal .cu-modal__dialog{width:800px!important;padding:35px 0 0!important}.cu-email-communicators__user{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;height:24px;padding:0 8px;border-radius:6px;cursor:move;margin-right:8px;border:1px solid #e9ebf0}.cu-email-communicators__user:hover{background:#e9ebf0}.dark-theme .cu-email-communicators__user:hover{background:#1e272e!important;border-color:transparent}.cu-email-communicators__user.cu-email-communicators__user-no-drag{cursor:default}.cu-email-communicators__user.cu-email-communicators__user-cf{background:#7b68ee;font-weight:400;font-size:11px;line-height:11px;display:inline-flex;align-items:center;flex-shrink:0;padding:4px 7px;margin:1px 4px 1px 0;border-radius:4px;color:#fff;cursor:pointer;border:none;height:auto}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__user.cu-email-communicators__user-cf{background:var(--theme-main-color)}}.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__user-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__user-name{font-family:var(--global-font-support)}}.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__close{stroke:#fff}.dark-theme .cu-email-communicators__user{border-color:#1e272e}.cu-email-communicators__user.cu-email-communicators__user-invalid-email{border:1px solid rgba(255,66,69,.5);background:rgba(255,66,69,.1)}.cu-email-communicators__user.cu-email-communicators__user-invalid-email:hover,.dark-theme .cu-email-communicators__user.cu-email-communicators__user-invalid-email:hover{background:rgba(255,66,69,.2)}.cu-email-communicators__user-from{cursor:pointer}.cu-email-communicators__user-email,.cu-email-communicators__user-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-email-communicators__user-name{color:#292d34}.dark-theme .cu-email-communicators__user-name{color:#d5d6d7}.cu-email-communicators__user-email{color:#7c828d}.dark-theme .cu-email-communicators__user-email{color:#abaeb0}.cu-email-communicators__user-name+.cu-email-communicators__user-email{margin-left:5px}.cu-email-communicators__email-authed{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;height:28px;align-items:center;padding:2px 10px;cursor:pointer;margin:5px;border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__email-authed{font-family:var(--global-font-support)}}.cu-email-communicators__email-authed-name{padding-right:5px}.cu-email-communicators__email-authed-name,.cu-email-communicators__email-authed span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-email-communicators__email-authed:hover{background-color:var(--theme-main-color);color:#fff}.cu-email-communicators__email-authed:hover .cu-email-communicators__email-authed-name,.cu-email-communicators__email-authed:hover span{color:#fff}.cu-email-communicators__sender{width:300px}.cu-email-communicators__sender-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;display:flex;align-items:center;justify-content:space-between;text-transform:uppercase;color:#7c828d;padding:0 15px;height:42px;background-color:rgba(233,235,240,.4)}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__sender-top{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__sender-top{background-color:#2b343b;color:#828588}.cu-email-communicators__sender-cog{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;fill:#b9bec7;cursor:pointer}.cu-email-communicators__sender-cog:hover{fill:var(--theme-main-color)}.cu-email-communicators__close{transition:stroke .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:6px;height:10px;width:10px;padding:1px;stroke:#7c828d;cursor:pointer}.dark-theme .cu-email-communicators__close{stroke:#b9bec7}.cu-email-communicators__close:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__close:hover{stroke:var(--theme-main-color)}}.cu-email-communicators__row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;min-height:24px}.cu-email-communicators__from{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;display:flex;width:100%;align-items:center;flex-wrap:wrap}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from{font-family:var(--global-font-support)}}.cu-email-communicators__from span{font-weight:400;cursor:pointer;color:#333}.dark-theme .cu-email-communicators__from span{color:#d5d6d7}.cu-email-communicators__from-link{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:1;display:inline;background-color:var(--theme-main-color);color:#fff;padding:4px 5px 3px;border-radius:2px;animation:flash .5s linear 2}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-link{font-family:var(--global-font-support)}}.cu-email-communicators__from-link:hover{background-color:var(--theme-main-color-dark)}.cu-email-communicators__from-group{width:90%}.cu-email-communicators__from-group-additional{margin-top:8px}.cu-email-communicators__from-group .user-list__body-virtual-viewport{height:200px}.cu-email-communicators__from-label{display:flex;align-items:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-right:8px;text-transform:capitalize;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__from-label{color:#7c828d}.cu-email-communicators__from-label-container{display:flex}.cu-email-communicators__from-label-container .cu-dropdown__toggle{display:flex;align-items:center;font-weight:400}.cu-email-communicators__from-label-container .cu-dropdown__toggle:hover .cu-email-communicators__email-dropdown-icon{opacity:1}.cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(90deg);fill:#292d34;width:16px;height:16px;padding:2px;margin-left:5px;opacity:0}.dark-theme .cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{fill:#d5d6d7}.cu-dropdown_open .cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{opacity:1;transform:rotate(-90deg)}.cu-email-communicators__from-label .cu-dropdown__toggle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-label .cu-dropdown__toggle{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__from-label .cu-dropdown__toggle{color:#7c828d}.cu-email-communicators__from-emails{display:flex;align-items:center;flex-wrap:wrap;flex:1 0 0;cursor:text;min-height:12px}.cu-email-communicators__from-emails .cu-search__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-left:5px;padding:0 0 2px;width:100px;min-width:30px;max-width:300px;border:none;background-color:transparent!important;box-shadow:none!important}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-emails .cu-search__input{font-family:var(--global-font-support)}}.cu-email-communicators__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;padding:0 20px;border:none;border-bottom:1px solid #e9ebf0;color:#292d34;background-color:transparent;box-shadow:none!important;width:100%;height:40px;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__input{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__input{color:#fff;border-color:#1e272e}.cu-email-communicators__input:-ms-input-placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px 1;color:#b9bec7}.cu-email-communicators__input::placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px 1;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-email-communicators__input::placeholder{font-family:var(--global-font-support)}}.cu-email-communicators__cc{display:flex;align-items:center}.cu-email-communicators__cc-item{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;cursor:pointer;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__cc-item{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__cc-item{color:#7c828d}.cu-email-communicators__cc-item:hover{color:var(--theme-main-color)}.cu-email-communicators__cc-item:not(:last-child){margin-right:5px}.cu-email-communicators_error-popover{margin-left:-280px;background:#fff;border:1px solid #fd7179}.dark-theme .cu-email-communicators_error-popover{background:#2b343b}.cu-email-communicators_error-popover .cu-error-popover{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#292d34;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators_error-popover .cu-error-popover{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators_error-popover .cu-error-popover{color:#d5d6d7}.cu-email-communicators_error-popover .cu-error-popover .icon{width:13px;height:13px;fill:#fd7179;margin-right:5px}.cu-email-communicators_error-popover:after{position:absolute;content:"";background:#fff;width:100%;top:0!important;margin-left:0!important;left:0!important;border:none!important;height:10px;z-index:3}.dark-theme .cu-email-communicators_error-popover:after{background:#2b343b}.cu-email-communicators_error-popover:before{position:absolute;content:"";background:#fff;border:1px solid #fd7179!important;height:12px;width:12px;transform:rotate(45deg);top:-5px!important;z-index:2}.dark-theme .cu-email-communicators_error-popover:before{background:#2b343b}.cu-email-communicators__signatures-menu{width:260px;padding:8px 0}.cu-email-communicators__signatures-menu-team{max-height:200px}.cu-email-communicators__signatures-menu-settings{padding-top:2px;border-top:1px solid #e9ebf0}.dark-theme .cu-email-communicators__signatures-menu-settings{border-color:#1e272e}.cu-email-communicators__signatures-menu-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;height:32px;display:flex;align-items:center;color:#b9bec7;padding:0 12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-label{color:#828588}.cu-email-communicators__signatures-menu-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;height:32px;display:flex;align-items:center;justify-content:space-between;padding:0 12px;cursor:pointer}.cu-email-communicators__signatures-menu-item-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-item-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-item-text{color:#d5d6d7}.cu-email-communicators__signatures-menu-item:hover{background:#fafbfc}.dark-theme .cu-email-communicators__signatures-menu-item:hover{background:#2b343b}.cu-email-communicators__signatures-menu-item .icon{width:14px;height:14px;fill:#292d34}.dark-theme .cu-email-communicators__signatures-menu-item .icon{fill:#d5d6d7}.cu-email-communicators__signatures-menu-item-add .cu-email-communicators__signatures-menu-item-text{font-weight:500;color:var(--theme-main-color)}.cu-email-communicators__signatures-menu-item-settings-divider{background:#e9ebf0;width:100%;margin:8px 0;height:1px}.dark-theme .cu-email-communicators__signatures-menu-item-settings-divider{background:#1e272e}.cu-email-communicators__signatures-menu-item-settings{padding:0 12px;height:32px}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item{justify-content:flex-start}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#7c828d}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#828588}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{padding-right:5px;font-weight:500;color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-settings .icon{margin-left:auto}'],encapsulation:2,changeDetection:0}),e})()},GJmQ:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("7o/Q");function n(e,t=!1){return i=>i.lift(new s(e,t))}class s{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new c(e,this.predicate,this.inclusive))}}class c extends o.a{constructor(e,t,i){super(e),this.predicate=t,this.inclusive=i,this.index=0}_next(e){const t=this.destination;let i;try{i=this.predicate(e,this.index++)}catch(o){return void t.error(o)}this.nextOrComplete(e,i)}nextOrComplete(e,t){const i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())}}},Gdbo:function(e,t,i){"use strict";e.exports=function(e){if(e)throw e}},Gguj:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("gb9A"),n=i("YD3J"),s=i("K0KF"),c=i("1M0N"),a=i("ofXK"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[a.c,c.a,s.a,n.a,o.a]]}),e})()},Gqj6:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n,s,c,a,r,l,d,u,m,p,h,f,b=t.length+1,g=0,_="";if(this.options.gfm){for(;g<b&&(" "===(s=t.charAt(g))||"\t"===s);)_+=s,g++;if(h=g,"~"===(s=t.charAt(g))||"`"===s){for(g++,n=s,o=1,_+=s;g<b&&(s=t.charAt(g))===n;)_+=s,o++,g++;if(!(o<3)){for(;g<b&&(" "===(s=t.charAt(g))||"\t"===s);)_+=s,g++;for(c="",l="";g<b&&"\n"!==(s=t.charAt(g))&&("`"!==n||s!==n);)" "===s||"\t"===s?l+=s:(c+=l+s,l=""),g++;if(!(s=t.charAt(g))||"\n"===s){if(i)return!0;(f=e.now()).column+=_.length,f.offset+=_.length,_+=c,c=this.decode.raw(this.unescape(c),f),l&&(_+=l),l="",m="",p="",d="",u="";for(var v=!0;g<b;)if(d+=m,u+=p,m="",p="","\n"===(s=t.charAt(g))){for(v?(_+=s,v=!1):(m+=s,p+=s),l="",g++;g<b&&" "===(s=t.charAt(g));)l+=s,g++;if(m+=l,p+=l.slice(h),!(l.length>=4)){for(l="";g<b&&(s=t.charAt(g))===n;)l+=s,g++;if(m+=l,p+=l,!(l.length<o)){for(l="";g<b&&(" "===(s=t.charAt(g))||"\t"===s);)m+=s,p+=s,g++;if(!s||"\n"===s)break}}}else d+=s,p+=s,g++;for(_+=d+m,g=-1,b=c.length;++g<b;)if(" "===(s=c.charAt(g))||"\t"===s)a||(a=c.slice(0,g));else if(a){r=c.slice(g);break}return e(_)({type:"code",lang:a||c||null,meta:r||null,value:u})}}}}}},GtmI:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var o=i("eD3g"),n=i("mcWp"),s=i("1M0N"),c=i("ofXK"),a=i("bFKe"),r=i("K0KF"),l=i("C8uC"),d=i("gb9A"),u=i("HiD6"),m=i("KyjD"),p=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=p.Ub({type:e}),e.\u0275inj=p.Tb({factory:function(t){return new(t||e)},imports:[[c.c,a.b,r.a,l.LoaderModule,d.a,u.a,m.a,s.a,n.a,o.a]]}),e})()},GwhI:function(e,t,i){"use strict";i.d(t,"a",function(){return k});var o=i("nLWA"),n=i("fXoL"),s=i("XNiG"),c=i("ofXK"),a=i("NsZK"),r=i("UdVN"),l=i("KX9h");const d=[["seconds","s"],["seconds","s"],["minutes","m"],["minute","m"],["hours","h"],["hour","h"],["days","d"],["day","d"],["weeks","w"],["week","w"],["months","mo"],["month","mo"],["years","y"],["year","y"]];let u=(()=>{class e{transform(e){if(!e)return"";let t=e;for(const[i,o]of d)t=t.replace(i,o);return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"timeEstimateShort",type:e,pure:!0}),e})();function m(e,t){if(1&e&&(n.ac(0),n.cc(1,"div",3),n.tc(),n.cc(2,"svg",4),n.cc(3,"g",5),n.Xb(4,"circle",6),n.bc(),n.cc(5,"g",7),n.Xb(6,"path",8),n.Xb(7,"rect",9),n.Xb(8,"rect",10),n.bc(),n.bc(),n.bc(),n.Zb()),2&e){const e=n.uc();n.Ib(1),n.Dc("cuTooltip",e.timeEstimatesTooltip)}}function p(e,t){1&e&&(n.cc(0,"div",23),n.gc(1,24),n.bc())}function h(e,t){if(1&e){const e=n.dc();n.cc(0,"div",25),n.qc("click",function(t){return n.Uc(e),n.uc(2).clearEstimate(t)}),n.bc()}}function f(e,t){if(1&e&&(n.tc(),n.sc(),n.cc(0,"div",26),n.dd(1),n.vc(2,"timeEstimateShort"),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.fd(" ",n.wc(2,1,e.timeEstimateString)," ")}}const b=function(e,t,i){return[e,t,!1,i,!1,!0]};function g(e,t){if(1&e&&(n.tc(),n.sc(),n.cc(0,"div",26),n.dd(1),n.vc(2,"timeTracked"),n.vc(3,"timeTracked"),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.fd(" ",e.rolledUpEstimate&&!e.dontShowRollup?n.Ac(2,1,n.Jc(15,b,e.rolledUpEstimate,null==e.team?null:e.team.hours_per_day,null==e.team?null:e.team.time_estimate_display_hours)):n.Ac(3,8,n.Jc(19,b,e.timeEstimate,null==e.team?null:e.team.hours_per_day,null==e.team?null:e.team.time_estimate_display_hours))," ")}}function _(e,t){if(1&e&&(n.ac(0),n.cc(1,"div",11),n.bd(2,p,2,0,"div",12),n.cc(3,"div",13),n.vc(4,"timeTracked"),n.vc(5,"timeTracked"),n.bd(6,h,1,0,"div",14),n.cc(7,"div",15),n.tc(),n.cc(8,"svg",16),n.cc(9,"g",17),n.Xb(10,"path",18),n.Xb(11,"rect",19),n.Xb(12,"rect",20),n.bc(),n.bc(),n.bc(),n.bd(13,f,3,3,"div",21),n.bd(14,g,4,23,"ng-template",null,22,n.cd),n.bc(),n.bc(),n.Zb()),2&e){const e=n.Rc(15),t=n.uc();n.Ib(2),n.Dc("ngIf",t.header),n.Ib(1),n.Ob("no-permission",!t.canEdit||!t.allowRemove),n.Dc("cuTooltip",null!=t.team&&t.team.time_estimate_display_hours||t.timeEstimateString?null:t.rolledUpEstimate&&!t.dontShowRollup?n.zc(4,7,t.rolledUpEstimate,null==t.team?null:t.team.hours_per_day,!1,!0):n.zc(5,12,t.timeEstimate,null==t.team?null:t.team.hours_per_day,!1,!0)),n.Ib(3),n.Dc("ngIf",t.canEdit&&t.allowRemove),n.Ib(7),n.Dc("ngIf",t.timeEstimateString)("ngIfElse",e)}}const v=function(e){return{"time-estimates-view_active":e}};let k=(()=>{class e{constructor(){this.destroy$=new s.a,this.allowRemove=!0,this.header=!1,this.makeSmall=!1,this.dontOpen=!1,this.hideIfEmpty=!1,this.hideIfFull=!1,this.canEdit=!0,this.noEmit=!1,this.dontShowRollup=!1,this.timeEstimatesTooltip=$localize`:@@common_estimate-task:Estimate task`,this.onEstimateCreated=new n.o,this.onOpen=new n.o,this.onClose=new n.o,this.onTimeEstimateAction=new n.o}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}clearEstimate(e){e&&(e.preventDefault(),e.stopPropagation()),this.onTimeEstimateAction.emit({action:o.b.UpdateTotal,estimate:{seconds:0,output:"",milliseconds:0},task:this.task})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["time-estimates-view"]],inputs:{timeEstimate:"timeEstimate",timeEstimateString:"timeEstimateString",rolledUpEstimate:"rolledUpEstimate",allowRemove:"allowRemove",task:"task",header:"header",modifier:"modifier",makeSmall:"makeSmall",dontOpen:"dontOpen",hideIfEmpty:"hideIfEmpty",hideIfFull:"hideIfFull",canEdit:"canEdit",noEmit:"noEmit",dontShowRollup:"dontShowRollup",timeEstimatesTooltip:"timeEstimatesTooltip",team:"team"},outputs:{onEstimateCreated:"onEstimateCreated",onOpen:"onOpen",onClose:"onClose",onTimeEstimateAction:"onTimeEstimateAction"},decls:4,vars:8,consts:function(){let e;return e=$localize`:@@common_estimate-1␟e97e2f6b9054962570a0fa854d5d01d33edb6f5a␟6771034428165579037: ESTIMATE `,[[3,"ngClass"],[1,"time-estimates-view__toogle"],[4,"ngIf"],[1,"icon","time-estimates-view__icon",3,"cuTooltip"],["width","36","height","36","viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd",1,"cu-stroke"],["cx","18","cy","18","r","17.5","stroke-dasharray","3",1,"cu-stroke-dasharray"],["transform","translate(12 9)","stroke-width",".907","fill","none","fill-rule","evenodd",1,"cu-stroke"],["d","M1.92000816 2.20001359L1.92000816 4.92000816C1.92000816 7.17332545 3.7466827 9 6 9 8.2533173 9 10.0799918 7.17332545 10.0799918 4.92000816L10.0799918 2.20001359 1.92000816 2.20001359zM1.92000816 15.7999864L10.0799918 15.7999864 10.0799918 13.0799918C10.0799918 10.8266745 8.2533173 9 6 9 3.7466827 9 1.92000816 10.8266745 1.92000816 13.0799918L1.92000816 15.7999864z"],["x",".107","y",".387","width","11.787","height","1.813","rx",".907"],["x",".107","y","15.8","width","11.787","height","1.813","rx",".907"],[1,"time-estimates-view__full"],["class","cu-task-info__key time-estimates-view__full-key",4,"ngIf"],[1,"time-estimates-view__full-value",3,"cuTooltip"],["class","time-estimates-view__close","icon","close-o",3,"click",4,"ngIf"],[1,"icon","time-estimates-view__icon"],["width","10","height","14","xmlns","http://www.w3.org/2000/svg"],["transform","translate(1 1)","stroke-width",".726","fill","none","fill-rule","evenodd",1,"cu-stroke"],["d","M1.28000544,1.46667573 L1.28000544,3.28000544 C1.28000544,4.78221697 2.49778847,6 4,6 C5.50221153,6 6.71999453,4.78221697 6.71999453,3.28000544 L6.71999453,1.46667573 L1.28000544,1.46667573 Z M1.28000544,10.5333243 L6.71999453,10.5333243 L6.71999453,8.71999453 C6.71999453,7.217783 5.50221153,6 4,6 C2.49778847,6 1.28000544,7.217783 1.28000544,8.71999453 L1.28000544,10.5333243 Z"],["x",".071","y",".258","width","7.858","height","1.209","rx",".604"],["x",".071","y","10.533","width","7.858","height","1.209","rx",".604"],["class","cu-task-info__value",4,"ngIf","ngIfElse"],["noString",""],[1,"cu-task-info__key","time-estimates-view__full-key"],e,["icon","close-o",1,"time-estimates-view__close",3,"click"],[1,"cu-task-info__value"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.bd(2,m,9,1,"ng-container",2),n.bd(3,_,16,17,"ng-container",2),n.bc(),n.bc()),2&e&&(n.Mb("time-estimates-view ",t.modifier,""),n.Dc("ngClass",n.Hc(6,v,t.timeEstimate||t.rolledUpEstimate&&!t.dontShowRollup||t.timeEstimateString)),n.Ib(2),n.Dc("ngIf",!t.timeEstimate&&(!t.rolledUpEstimate||t.dontShowRollup)&&!t.timeEstimateString&&!t.hideIfEmpty),n.Ib(1),n.Dc("ngIf",(t.timeEstimate||t.rolledUpEstimate&&!t.dontShowRollup||t.timeEstimateString)&&!t.hideIfFull))},directives:[c.o,c.q,a.a,r.a],pipes:[l.a,u],encapsulation:2,changeDetection:0}),e})()},HBOB:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{constructor(e,t,i){this.componentFactoryResolver=e,this.applicationRef=t,this.injector=i}appendComponentToBody(e){return this.appendComponentToElement(e,document.body)}appendComponentToElement(e,t,i){const o=this.componentFactoryResolver.resolveComponentFactory(e).create(i||this.injector);return this.applicationRef.attachView(o.hostView),t.appendChild(o.hostView.rootNodes[0]),o}appendTemplateToElement(e,t,i){const o=i.createEmbeddedView(e);return o.rootNodes.forEach(e=>{t.appendChild(e)}),o}removeComponent(e){this.applicationRef.detachView(e.hostView),e.destroy()}removeView(e,t){t.detach(),e.destroy()}}return e.\u0275fac=function(t){return new(t||e)(o.nc(o.j),o.nc(o.g),o.nc(o.t))},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},HIOz:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},HPyy:function(e,t,i){"use strict";i.d(t,"a",function(){return O});var o=i("2Vo4"),n=i("LRne"),s=i("itXk"),c=i("lJxs"),a=i("dTHz"),r=i("fXoL"),l=i("NsZK"),d=i("ofXK"),u=i("UdVN"),m=i("EDFS");const p=["pop"],h=function(e){return{"background-image":e}};function f(e,t){if(1&e&&(r.Xb(0,"div",9),r.vc(1,"async"),r.vc(2,"async")),2&e){const e=r.uc();r.Ob("cu-avatar_guest",e.showGuestDot&&(r.wc(1,6,e.isGuest$)||e.isGuest))("cu-avatar_online",1===e.presence||r.wc(2,8,e.isOnline$)),r.Dc("ngClass",e.modifier)("ngStyle",r.Hc(10,h,"url("+e.user.profilePicture+")"))}}function b(e,t){1&e&&r.Xb(0,"div",13)}function g(e,t){if(1&e&&r.dd(0),2&e){const e=r.uc(2);r.fd(" ",e.user.initials," ")}}const _=function(e){return{background:e}};function v(e,t){if(1&e&&(r.cc(0,"div",10),r.vc(1,"async"),r.vc(2,"async"),r.bd(3,b,1,0,"div",11),r.bd(4,g,1,1,"ng-template",null,12,r.cd),r.bc()),2&e){const e=r.Rc(5),t=r.uc();r.Ob("cu-avatar_guest",t.showGuestDot&&(r.wc(1,8,t.isGuest$)||t.isGuest))("cu-avatar_online",1===t.presence||r.wc(2,10,t.isOnline$)),r.Dc("ngClass",t.modifier)("ngStyle",r.Hc(12,_,"unassigned"===t.user.id?"#CBC9CF":t.user.color||t.DEFAULT_COLOR)),r.Ib(3),r.Dc("ngIf","unassigned"===t.user.id)("ngIfElse",e)}}function k(e,t){1&e&&r.Xb(0,"div",17)}function y(e,t){1&e&&r.Xb(0,"div",18)}function w(e,t){if(1&e&&(r.cc(0,"div",14),r.bd(1,k,1,0,"div",15),r.bd(2,y,1,0,"div",16),r.bc()),2&e){const e=r.uc();r.Dc("ngClass",e.modifier),r.Ib(1),r.Dc("ngIf",!(e.user&&e.user.source||e.unassigned)),r.Ib(1),r.Dc("ngIf",e.unassigned)}}function x(e,t){if(1&e&&(r.Xb(0,"div",19),r.vc(1,"lowercase"),r.vc(2,"lowercase")),2&e){const e=r.uc();r.Mb("cu-avatar cu-avatar_source cu-avatar_",r.wc(1,4,e.user.source),""),r.Fc("icon","",r.wc(2,6,e.user.source),"-symbol")}}function I(e,t){if(1&e){const e=r.dc();r.cc(0,"div",20,21),r.qc("mouseleave",function(){r.Uc(e);const t=r.Rc(1);return r.uc().onClickBotAvatarMouseLeave(t)}),r.Xb(2,"img",22),r.bc()}if(2&e){const e=r.uc(),t=r.Rc(10);r.Dc("ngClass",e.modifier)("popover",t)("outsideClick",!0)}}function T(e,t){if(1&e&&r.Xb(0,"div",23),2&e){const e=r.uc();r.Dc("ngClass",e.modifier)("ngStyle",r.Hc(2,_,e.user.color||e.DEFAULT_COLOR))}}function C(e,t){if(1&e&&r.Xb(0,"div",24),2&e){const e=r.uc();r.Dc("ngClass",e.modifier)("ngStyle",r.Hc(2,_,e.user.color||e.DEFAULT_COLOR))}}function D(e,t){if(1&e){const e=r.dc();r.cc(0,"div",25),r.qc("mouseenter",function(){return r.Uc(e),r.uc().onClickBotPopoverMouseEnter()})("mouseleave",function(){return r.Uc(e),r.uc().pop.hide()}),r.ac(1),r.mc(2,26),r.Xb(3,"br"),r.jc(),r.Zb(),r.Xb(4,"br"),r.cc(5,"a",27),r.qc("click",function(){return r.Uc(e),r.uc().pop.hide()}),r.gc(6,28),r.bc(),r.bc()}}let O=(()=>{class e{constructor(e,t){this.cdr=e,this.injector=t,this.DEFAULT_COLOR="#7b68ee",this.user={},this.unassigned=!1,this.showGuestTooltip=!0,this.showGuestDot=!0,this.presence=0,this.user$=new o.a(this.user),this.isGuest$=Object(n.a)(!1),this.isOnline$=Object(n.a)(!1),this.selfUser=a.j,this.anyOneUser=a.i,this.hideCuBotPopoverTimeout=1e3,this.guestUserText=$localize`:@@cu-avatar__guest-user:Guest user`,this.hidePopoverTimeoutRef=null}ngOnInit(){return e=this,void 0,o=function*(){try{const[{Store:e},{getGuestMap:t,getUsersOnlineWhenOn:o}]=yield Promise.all([Promise.resolve().then(i.bind(null,"l7P3")),Promise.resolve().then(i.bind(null,"c3rA"))]),n=this.injector.get(e);this.isGuest$=Object(s.a)([this.user$,n.select(t)]).pipe(Object(c.a)(([e,t])=>e&&t&&t[e.id])),this.isOnline$=Object(s.a)([this.user$,n.select(o)]).pipe(Object(c.a)(([e,t])=>e&&t&&t[e.id])),this.cdr.markForCheck()}catch(e){}},new((t=void 0)||(t=Promise))(function(i,n){function s(e){try{a(o.next(e))}catch(t){n(t)}}function c(e){try{a(o.throw(e))}catch(t){n(t)}}function a(e){var o;e.done?i(e.value):(o=e.value,o instanceof t?o:new t(function(e){e(o)})).then(s,c)}a((o=o.apply(e,[])).next())});var e,t,o}ngOnChanges(e){e.user&&this.user$.next(this.user)}onClickBotAvatarMouseLeave(e){this._clearPopoverHideTimeout(),this.hidePopoverTimeoutRef=setTimeout(()=>{e&&e.isOpen&&e.hide()},this.hideCuBotPopoverTimeout)}onClickBotPopoverMouseEnter(){this._clearPopoverHideTimeout()}_clearPopoverHideTimeout(){null!==this.hidePopoverTimeoutRef&&(clearTimeout(this.hidePopoverTimeoutRef),this.hidePopoverTimeoutRef=null)}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(r.h),r.Wb(r.t))},e.\u0275cmp=r.Qb({type:e,selectors:[["cu-avatar"]],viewQuery:function(e,t){if(1&e&&r.jd(p,1),2&e){let e;r.Qc(e=r.rc())&&(t.pop=e.first)}},inputs:{user:"user",modifier:"modifier",unassigned:"unassigned",showGuestTooltip:"showGuestTooltip",showGuestDot:"showGuestDot",presence:"presence",isGuest:"isGuest"},features:[r.Gb],decls:11,vars:11,consts:function(){let e,t;return e=$localize`:@@common_clickbot-automation␟28871d3834aa46a977ab86bf293c60cef3130a08␟3673850874841059173:ClickBot is automation${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:LINE_BREAK:performed by ClickUp.`,t=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,[[1,"cu-avatar-container",3,"cuTooltip","tooltipAllowHtmlRememberToEscapeXss"],["class","cu-avatar cu-avatar_photo",3,"ngClass","cu-avatar_guest","cu-avatar_online","ngStyle",4,"ngIf"],["class","cu-avatar",3,"ngClass","cu-avatar_guest","cu-avatar_online","ngStyle",4,"ngIf"],["class","cu-avatar cu-avatar_empty",3,"ngClass",4,"ngIf"],[3,"class","icon",4,"ngIf"],["class","cu-avatar cu-avatar_bot","containerClass","markdown-tooltip","triggers","mouseenter","placement","top","container","body",3,"ngClass","popover","outsideClick","mouseleave",4,"ngIf"],["class","cu-avatar cu-avatar_icon","icon","cu2-anyone",3,"ngClass","ngStyle",4,"ngIf"],["class","cu-avatar cu-avatar_icon","icon","cu2-me",3,"ngClass","ngStyle",4,"ngIf"],["popTemplate",""],[1,"cu-avatar","cu-avatar_photo",3,"ngClass","ngStyle"],[1,"cu-avatar",3,"ngClass","ngStyle"],["icon","unassigned","class","cu-avatar__unassigned-icon",4,"ngIf","ngIfElse"],["userInitials",""],["icon","unassigned",1,"cu-avatar__unassigned-icon"],[1,"cu-avatar","cu-avatar_empty",3,"ngClass"],["icon","plus",4,"ngIf"],["icon","unassigned",4,"ngIf"],["icon","plus"],["icon","unassigned"],[3,"icon"],["containerClass","markdown-tooltip","triggers","mouseenter","placement","top","container","body",1,"cu-avatar","cu-avatar_bot",3,"ngClass","popover","outsideClick","mouseleave"],["pop","bs-popover"],["height","100%","src","./assets/images/brand/clickup-symbol_color.svg","alt",""],["icon","cu2-anyone",1,"cu-avatar","cu-avatar_icon",3,"ngClass","ngStyle"],["icon","cu2-me",1,"cu-avatar","cu-avatar_icon",3,"ngClass","ngStyle"],[1,"popover-content__automation",3,"mouseenter","mouseleave"],e,["href","https://docs.clickup.com/general/clickbot","target","_blank",1,"ignore-click-out",3,"click"],t]},template:function(e,t){1&e&&(r.cc(0,"div",0),r.vc(1,"async"),r.bd(2,f,3,12,"div",1),r.bd(3,v,6,14,"div",2),r.bd(4,w,3,3,"div",3),r.bd(5,x,3,8,"div",4),r.bd(6,I,3,3,"div",5),r.bd(7,T,1,4,"div",6),r.bd(8,C,1,4,"div",7),r.bd(9,D,7,0,"ng-template",null,8,r.cd),r.bc()),2&e&&(r.Dc("cuTooltip",t.showGuestTooltip&&(r.wc(1,9,t.isGuest$)||t.isGuest)?"<span class='cu-avatar__guest-tooltip'></span> "+t.guestUserText:"")("tooltipAllowHtmlRememberToEscapeXss",!0),r.Ib(2),r.Dc("ngIf",t.user&&t.user.id&&-1!=t.user.id&&t.user.id!=t.anyOneUser.id&&t.user.id!=t.selfUser.id&&t.user.profilePicture),r.Ib(1),r.Dc("ngIf",t.user&&t.user.id&&-1!=t.user.id&&t.user.id!=t.anyOneUser.id&&t.user.id!=t.selfUser.id&&!t.user.profilePicture),r.Ib(1),r.Dc("ngIf",!t.user||!t.user.id&&"Sentry"!==t.user.source&&"Zendesk"!==t.user.source&&"Intercom"!==t.user.source&&"Internal_Front"!==t.user.source&&"Front"!==t.user.source),r.Ib(1),r.Dc("ngIf",t.user&&("Sentry"===t.user.source||"Zendesk"===t.user.source||"Intercom"===t.user.source||"Internal_Front"===t.user.source||"Front"===t.user.source)),r.Ib(1),r.Dc("ngIf",t.user&&-1==t.user.id&&t.user.id!=t.anyOneUser.id&&t.user.id!=t.selfUser.id),r.Ib(1),r.Dc("ngIf",t.user&&t.user.id==t.anyOneUser.id),r.Ib(1),r.Dc("ngIf",t.user&&t.user.id==t.selfUser.id))},directives:[l.a,d.q,d.o,d.t,u.a,m.c],pipes:[d.b,d.n],encapsulation:2,changeDetection:0}),e})()},HRR4:function(e,t,i){"use strict";var o=i("IPAr"),n=i("kaWx");function s(e){return">"!==e&&"["!==e&&"]"!==e}function c(e){return"["!==e&&"]"!==e&&!o(e)}e.exports=function(e,t,i){for(var o,a,r,l,d,u,m,p,h=this.options.commonmark,f=0,b=t.length,g="";f<b&&(" "===(l=t.charAt(f))||"\t"===l);)g+=l,f++;if("["===(l=t.charAt(f))){for(f++,g+=l,r="";f<b&&"]"!==(l=t.charAt(f));)"\\"===l&&(r+=l,f++,l=t.charAt(f)),r+=l,f++;if(r&&"]"===t.charAt(f)&&":"===t.charAt(f+1)){for(u=r,f=(g+=r+"]:").length,r="";f<b&&("\t"===(l=t.charAt(f))||" "===l||"\n"===l);)g+=l,f++;if(r="",o=g,"<"===(l=t.charAt(f))){for(f++;f<b&&s(l=t.charAt(f));)r+=l,f++;if((l=t.charAt(f))===s.delimiter)g+="<"+r+l,f++;else{if(h)return;f-=r.length+1,r=""}}if(!r){for(;f<b&&c(l=t.charAt(f));)r+=l,f++;g+=r}if(r){for(m=r,r="";f<b&&("\t"===(l=t.charAt(f))||" "===l||"\n"===l);)r+=l,f++;if(d=null,'"'===(l=t.charAt(f))?d='"':"'"===l?d="'":"("===l&&(d=")"),d){if(!r)return;for(f=(g+=r+l).length,r="";f<b&&(l=t.charAt(f))!==d;){if("\n"===l){if(f++,"\n"===(l=t.charAt(f))||l===d)return;r+="\n"}r+=l,f++}if((l=t.charAt(f))!==d)return;a=g,g+=r+l,f++,p=r,r=""}else r="",f=g.length;for(;f<b&&("\t"===(l=t.charAt(f))||" "===l);)g+=l,f++;return(l=t.charAt(f))&&"\n"!==l?void 0:!!i||(o=e(o).test().end,m=this.decode.raw(this.unescape(m),o,{nonTerminated:!1}),p&&(a=e(a).test().end,p=this.decode.raw(this.unescape(p),a)),e(g)({type:"definition",identifier:n(u),label:u,title:p||null,url:m}))}}}},s.delimiter=">"},IO3K:function(e,t,i){"use strict";i.d(t,"a",function(){return F});var o=i("vxfF"),n=i("fXoL"),s=i("NOj5"),c=i("1Lli"),a=i("1myf"),r=i("XNiG"),l=i("LRne"),d=i("PqYM"),u=i("xgIS"),m=i("1G5W"),p=i("pLZG"),h=i("/qOb"),f=i("dTHz"),b=i("jJW4"),g=i("ofXK"),_=i("3Pt+"),v=i("UdVN"),k=i("Z4aC"),y=i("tCpm"),w=function(e,t,i,o){return new(i||(i=Promise))(function(n,s){function c(e){try{r(o.next(e))}catch(t){s(t)}}function a(e){try{r(o.throw(e))}catch(t){s(t)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(c,a)}r((o=o.apply(e,t||[])).next())})};const x=["searchField"];function I(e,t){1&e&&n.Yb(0)}function T(e,t){if(1&e){const e=n.dc();n.cc(0,"div",6),n.cc(1,"div",7),n.cc(2,"input",8,9),n.qc("ngModelChange",function(t){return n.Uc(e),n.uc().searchString=t})("ngModelChange",function(){return n.Uc(e),n.uc().filter()}),n.bc(),n.Xb(4,"div",10),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(2),n.Dc("ngModel",e.searchString)}}function C(e,t){1&e&&(n.cc(0,"div",18),n.gc(1,19),n.bc())}const D=function(e){return{"user-list-item_highlighted":e}};function O(e,t){if(1&e){const e=n.dc();n.cc(0,"div",20),n.qc("mouseenter",function(){n.Uc(e);const t=n.uc().index;return n.uc(2).highlightListItem(t)})("click",function(t){return n.Uc(e),n.uc(3).unassigned(t)}),n.cc(1,"div",21),n.Xb(2,"div",22),n.bc(),n.cc(3,"div",23),n.dd(4),n.bc(),n.bc()}if(2&e){const e=n.uc().index,t=n.uc(2);n.Dc("ngClass",n.Hc(2,D,t.selectedUnassigned||t.highlightedItemIndex===e)),n.Ib(4),n.ed(t.unassignedText)}}const S=function(e){return{"no-permission":e}};function E(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-user-item",24),n.qc("click",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc(2).toggleUser(i,t)})("mouseenter",function(){n.Uc(e);const t=n.uc().index;return n.uc(2).highlightListItem(t)})("onOpenProfile",function(){n.Uc(e);const t=n.uc().$implicit;return n.uc(2).openProfile(t)})("onUnassign",function(){n.Uc(e);const t=n.uc().$implicit;return n.uc(2).unassignUser(t)})("onReassign",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc(2).reassignUser(i,t)}),n.vc(1,"async"),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc(),t=e.$implicit,i=e.index,o=n.uc(2);let s=null;n.Dc("user",t)("showInactive",o.showInactive)("displayEmail",o.displayEmail)("selected",o.selectedItemsMap[t.id])("highlighted",o.highlightedItemIndex===i)("isGuest",o.guestMap[t.id])("displayProfile",o.displayProfile&&n.wc(1,12,o.userProfileServiceEnabled$)&&-1!=t.id)("showUnassign",(o.forBatch||o.showUnassign&&(null==o.selectedUsers?null:o.selectedUsers.length))&&!o.searchString.length&&(!o.immutableUser||o.immutableUser.id!==t.id))("showReassign",o.showReassign&&((null==o.selectedUsers?null:o.selectedUsers.length)||(null==o.selectedUserGroups?null:o.selectedUserGroups.length)||o.forBatch)&&o.multiChoice)("ngClass",n.Hc(16,S,o.canOnlyEditSelf&&(null==(s=n.wc(2,14,o.sharedData.currentUser))?null:s.id)!==t.id))("showLastViewed",!0)("lastViewed",o.lastViewedMap?o.lastViewedMap[t.id]:null)}}function P(e,t){1&e&&(n.cc(0,"div",18),n.gc(1,25),n.bc())}function j(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-user-group-item",26),n.qc("click",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc(2).toggleGroup(i,t)})("mouseenter",function(){n.Uc(e);const t=n.uc().index;return n.uc(2).highlightListItem(t)})("unassign",function(){n.Uc(e);const t=n.uc().$implicit;return n.uc(2).unassignUserGroup(t)})("onReassign",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc(2).reassignUserGroup(i,t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=n.uc(),t=e.$implicit,i=e.index,o=n.uc(2);let s=null;n.Dc("group",t)("selected",o.selectedItemsMap[t.id])("highlighted",o.highlightedItemIndex===i)("showUnassign",o.showUnassign)("disableShowUserGroupMembers",(null==(s=n.wc(1,6,o.sharedData.compatCurrentTeam$))?null:s.role)===o.UserRole.GUEST)("showReassign",o.showReassign&&((null==o.selectedUsers?null:o.selectedUsers.length)||(null==o.selectedUserGroups?null:o.selectedUserGroups.length)||o.forBatch)&&o.multiChoice)}}function A(e,t){if(1&e&&(n.ac(0,13),n.bd(1,C,2,0,"div",14),n.bd(2,O,5,4,"div",15),n.bd(3,E,3,18,"cu-user-item",16),n.bd(4,P,2,0,"div",14),n.bd(5,j,2,8,"cu-user-group-item",17),n.Zb()),2&e){const e=t.$implicit,i=n.uc(2);n.Dc("ngSwitch",e.type),n.Ib(1),n.Dc("ngSwitchCase",i.ListItemType.PeopleHeading),n.Ib(1),n.Dc("ngSwitchCase",i.ListItemType.Unassigned),n.Ib(1),n.Dc("ngSwitchCase",i.ListItemType.User),n.Ib(1),n.Dc("ngSwitchCase",i.ListItemType.TeamsHeading),n.Ib(1),n.Dc("ngSwitchCase",i.ListItemType.UserGroup)}}function $(e,t){if(1&e&&(n.cc(0,"cdk-virtual-scroll-viewport",11),n.bd(1,A,6,6,"ng-container",12),n.bc()),2&e){const e=n.uc();n.Dc("itemSize",e.itemHeight),n.Ib(1),n.Dc("cdkVirtualForOf",e.filteredListItems)("cdkVirtualForTrackBy",e.trackById)}}function U(e,t){1&e&&(n.mc(0,28,1),n.Yb(1),n.jc())}function R(e,t){if(1&e&&(n.cc(0,"div",27),n.mc(1,28),n.bd(2,U,2,0,"ng-container",29),n.jc(),n.bc()),2&e){const e=n.uc();n.Ib(2),n.Dc("ngIf",(null==e.userGroups?null:e.userGroups.length)>0)}}var M=function(e){return e[e.PeopleHeading=0]="PeopleHeading",e[e.TeamsHeading=1]="TeamsHeading",e[e.Unassigned=2]="Unassigned",e[e.User=3]="User",e[e.UserGroup=4]="UserGroup",e}({});let F=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.injector=t,this.sharedData=i,this.disabled=!1,this.users=[],this.multiChoice=!1,this.enableFirstSelection=!0,this.forBatch=!1,this.showUnassign=!0,this.showUnassigned=!1,this.showAnyone=!1,this.showSelf=!1,this.unassignedText="Unassigned",this.selectedUnassigned=!1,this.search=!0,this.showSearch=!0,this.displayEmail=!1,this.selectedUsers=[],this.showReassign=!0,this.autoHighlight=!1,this.canOnlyEditSelf=!1,this.focusOnInit=!0,this.displayProfile=!0,this.showLastViewed=!1,this.showInactive=!0,this.guestMap={},this.onBeforeChange=new n.o,this.onChange=new n.o,this.onNeedClose=new n.o,this.onReassign=new n.o,this.onReassignGroup=new n.o,this.onOpenProfile=new n.o,this.filteredItemsChange=new n.o,this.onUserGroupsChanged=new n.o,this.searchString="",this.filteredListItems=[],this.filteredUsers=[],this.filteredGroups=[],this.highlightedItemIndex=-1,this.listItemUserIndexOffset=0,this.listItemUserGroupIndexOffset=0,this.ListItemType=M,this.destroy$=new r.a,this.itemHeight=36,this.selectedItemsMap={},this.userProfileServiceEnabled$=Object(l.a)(!1),this.fixedUsers=[],this.UserRole=f.f}ngOnInit(){this.getFilteredItems(),this.getUserProfileService().then(e=>{this.userProfileServiceEnabled$=e.enabled$,this.changeDetector.markForCheck()}).catch(()=>{})}ngAfterViewInit(){this.sortUserList(),this.focusOnInit&&Object(d.a)(200).pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.setFocus()}),this.searchField&&(Object(u.a)(this.searchField.nativeElement,"keyup").pipe(Object(p.a)(()=>!this.disabled),Object(m.a)(this.destroy$)).subscribe(e=>e.stopPropagation()),Object(u.a)(this.searchField.nativeElement,"keypress").pipe(Object(p.a)(()=>!this.disabled),Object(m.a)(this.destroy$)).subscribe(e=>e.stopPropagation()),Object(u.a)(this.searchField.nativeElement,"keydown").pipe(Object(p.a)(()=>!this.disabled),Object(m.a)(this.destroy$)).subscribe(e=>{e.which===h.a.ENTER?(e.preventDefault(),this.handleEnter(e)):e.which===h.a.ESCAPE&&(this.searchString.length?(this.searchString="",this.filter()):this.onNeedClose.emit(e))})),Object(u.a)(document,"keydown").pipe(Object(p.a)(e=>!this.disabled&&[h.a.ENTER,h.a.ARROW_UP,h.a.TAB,h.a.ARROW_DOWN].includes(e.which)),Object(m.a)(this.destroy$)).subscribe(e=>{switch(e.which){case h.a.ENTER:this.searchField||this.handleEnter(e);break;case h.a.ARROW_UP:if(this.highlightedItemIndex===this.listItemUserGroupIndexOffset-1)this.highlightedItemIndex=this.listItemUserGroupIndexOffset;else{if(!(this.highlightedItemIndex>this.listItemUserIndexOffset))return;this.highlightedItemIndex--}this.scrollToSelected(),e.preventDefault(),this.changeDetector.markForCheck();break;case h.a.TAB:case h.a.ARROW_DOWN:-1===this.highlightedItemIndex||this.isUserGroupsVisible()&&this.highlightedItemIndex>=this.listItemUserGroupIndexOffset+this.filteredGroups.length-1||!this.isUserGroupsVisible()&&this.highlightedItemIndex>=this.listItemUserIndexOffset+this.filteredUsers.length-1||e.which===h.a.TAB&&e.shiftKey?this.highlightedItemIndex=this.listItemUserIndexOffset:this.isUserGroupsVisible()&&this.highlightedItemIndex===this.filteredUsers.length?this.highlightedItemIndex=this.listItemUserGroupIndexOffset:this.highlightedItemIndex++,this.scrollToSelected(),e.preventDefault(),this.changeDetector.markForCheck()}})}ngOnChanges(e){(e.users||e.showAnyone||e.showSelf||e.userGroups)&&(this.prepareUserList(),this.getFilteredItems()),(e.selectedUsers&&e.selectedUsers.currentValue||e.selectedUserGroups&&e.selectedUserGroups.currentValue)&&(this.updateSelectedItemsMap(),this.getFilteredItems())}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}trackById(e){return"string"==typeof e?e:e.toString()}scrollToSelected(){this.cdkVirtualScrollViewport.scrollToIndex(this.highlightedItemIndex)}handleEnter(e){-1!==this.highlightedItemIndex?this.isUnassignVisible()&&this.highlightedItemIndex===this.listItemUserIndexOffset-1?this.unassignAll():this.highlightedItemIndex>=this.listItemUserGroupIndexOffset?this.toggleGroup(this.filteredGroups[this.highlightedItemIndex-this.listItemUserGroupIndexOffset],e):this.toggleUser(this.filteredUsers[this.highlightedItemIndex-this.listItemUserIndexOffset],e):this.filteredGroups.length+this.filteredUsers.length===1&&(1===this.filteredUsers.length?this.toggleUser(this.filteredUsers[0],e):this.toggleGroup(this.filteredGroups[0],e))}filter(){this.highlightedItemIndex=-1,this.getFilteredItems()}toggleUser(e,t){if(!(this.immutableUser&&this.immutableUser.id===e.id||this.canOnlyEditSelf&&!this.isCurrentUser(e))){if(this.onBeforeChange.emit(),this.selectedUsers=this.selectedUsers?this.selectedUsers.slice():[],this.multiChoice){const i=this.selectedUsers.map(e=>e.id).indexOf(e.id),o=this.selectedUsers&&0===this.selectedUsers.length&&this.selectedUserGroups&&0===this.selectedUserGroups.length;-1===i?(this.selectedUsers.push(e),this.setFocus()):this.selectedUsers.splice(i,1),o&&this.enableFirstSelection&&this.onNeedClose.emit(t)}else this.selectedUsers=[e],this.selectedUserGroups&&this.selectedUserGroups.length>0&&(this.selectedUserGroups=[],this.onUserGroupsChanged.emit([])),this.onNeedClose.emit(t);this.updateSelectedItemsMap(),this.onChange.emit(this.selectedUsers),this.searchString&&(this.searchString="",this.sortUserList(),this.getFilteredItems()),this.changeDetector.markForCheck()}}toggleGroup(e,t){if(this.onBeforeChange.emit(),this.selectedUserGroups=this.selectedUserGroups?this.selectedUserGroups.slice():[],this.multiChoice){const i=this.selectedUserGroups.findIndex(t=>t.id===e.id),o=0===this.selectedUsers.length&&0===this.selectedUserGroups.length;-1===i?(this.selectedUserGroups.push(e),this.setFocus()):this.selectedUserGroups.splice(i,1),o&&this.enableFirstSelection&&this.onNeedClose.emit(t)}else this.selectedUserGroups=[e],this.selectedUsers&&this.selectedUsers.length>0&&(this.selectedUsers=[],this.onChange.emit([])),this.onNeedClose.emit(t);this.updateSelectedItemsMap(),this.onUserGroupsChanged.emit(this.selectedUserGroups),this.searchString&&(this.searchString="",this.sortUserList(),this.getFilteredItems()),this.changeDetector.markForCheck()}highlightListItem(e){this.highlightedItemIndex=e,this.changeDetector.markForCheck()}getFilteredItems(){this.getFilteredUsers(),this.getFilteredGroups(),this.filteredListItems=this.getFilteredListItems(),this.listItemUserIndexOffset=this.getListItemUserIndexOffset(),this.listItemUserGroupIndexOffset=this.getListItemUserGroupIndexOffset(),this.changeDetector.markForCheck()}unassignUser(e){this.selectedUsers=this.selectedUsers?this.selectedUsers.slice():[];const t=this.selectedUsers.map(e=>e.id).indexOf(e.id);-1===t?this.selectedUsers.push(e):this.selectedUsers.splice(t,1),this.updateSelectedItemsMap(),this.onChange.emit(this.selectedUsers),this.changeDetector.markForCheck()}unassignUserGroup(e){const t=[...this.selectedUserGroups],i=t.findIndex(t=>t.id===e.id);-1===i?t.push(e):t.splice(i,1),this.onUserGroupsChanged.emit(t),this.changeDetector.markForCheck()}unassignAll(e=null){e&&e.stopPropagation(),this.selectedUsers=null,this.selectedUserGroups=null,this.onNeedClose.emit(e),this.updateSelectedItemsMap(),this.forBatch?(this.onChange.emit(this.selectedUsers),this.onUserGroupsChanged.emit(this.selectedUserGroups)):(this.onChange.emit([]),this.onUserGroupsChanged.emit([])),this.changeDetector.markForCheck()}unassigned(e=null){e&&e.stopPropagation(),this.selectedUsers=null,this.updateSelectedItemsMap(),this.onNeedClose.emit(e),this.onChange.emit([{id:"unassigned"}]),this.changeDetector.markForCheck()}reassignUser(e,t){this.selectedUsers=[e],this.selectedUserGroups=[],this.updateSelectedItemsMap(),this.forBatch?this.onReassign.emit(e):(this.onChange.emit(this.selectedUsers),this.onUserGroupsChanged.emit([])),this.onNeedClose.emit(t),this.changeDetector.markForCheck()}reassignUserGroup(e,t){this.selectedUsers=[],this.selectedUserGroups=[e],this.updateSelectedItemsMap(),this.forBatch?this.onReassignGroup.emit(e):(this.onChange.emit([]),this.onUserGroupsChanged.emit(this.selectedUserGroups)),this.onNeedClose.emit(t),this.changeDetector.markForCheck()}setFocus(){this.searchField&&this.searchField.nativeElement.focus()}openProfile(e){return w(this,void 0,void 0,function*(){this.onOpenProfile.emit(e),(yield this.getUserProfileService()).openProfile(e)})}isPeopleHeadingVisible(){var e;return(null===(e=this.userGroups)||void 0===e?void 0:e.length)>0&&this.filteredUsers.length>0}isUnassignVisible(){return(this.forBatch||this.showUnassigned&&this.selectedUsers.length)&&!this.searchString.length}isUserGroupsVisible(){return this.filteredGroups.length>0}prepareUserList(){let e=this.users||[];e.length&&(e=e[0].user?e.map(e=>e.user):e),this.fixedUsers=e.map(e=>Object.assign(Object.assign({},e),{weightedCount:this.weights&&this.weights[e.id]&&this.weights[e.id][this.weightType]||0})),this.showAnyone&&(this.fixedUsers=[f.i,...e]),this.showSelf&&(this.fixedUsers=[f.j,...e]),this.selectedUsers&&this.selectedUsers.length&&(this.fixedUsers=Object(s.a)(this.fixedUsers,this.selectedUsers.filter(e=>!!e.id&&String(e.id)!==f.i.id&&String(e.id)!==f.j.id),"id"));const t=Object(c.a)(this.selectedUserGroups||[],"name"),i=Object(c.a)((this.userGroups||[]).filter(e=>!t.some(t=>t.id===e.id)),"name");this.sortedUserGroups=[...t,...i],this.sortUserList()}updateSelectedItemsMap(){this.selectedItemsMap={},(this.selectedUsers||[]).forEach(e=>{this.selectedItemsMap[e.id]=!0}),(this.selectedUserGroups||[]).forEach(e=>{e&&(this.selectedItemsMap[e.id]=!0)})}isUserSelected(e){if(e)return this.selectedUsers&&this.selectedUsers.length&&!!this.selectedUsers.find(t=>t&&t.id===e.id)}getUserProfileService(){return w(this,void 0,void 0,function*(){const{UserProfileService:e}=yield Promise.resolve().then(i.bind(null,"7XkT"));return this.injector.get(e)})}isCurrentUser(e){return e&&this.sharedData.currentUser.value&&String(e.id)===String(this.sharedData.currentUser.value.id)}sortUserList(){if(!this.fixedUsers)return;const e=["unassigned",f.i.id,this.sharedData.currentUser.value?String(this.sharedData.currentUser.value.id):null,f.j.id].filter(Boolean);this.fixedUsers.sort((t,i)=>{const o=e.indexOf(String(t.id)),n=e.indexOf(String(i.id));if(-1!==o&&-1!==n)return o-n;if(-1!==o)return-1;if(-1!==n)return 1;const s=this.isUserSelected(t),c=this.isUserSelected(i),a=t.weightedCount,r=i.weightedCount;return s===c?a>r?-1:r>a?1:(t.username||t.email).localeCompare(i.username||i.email):s?-1:c?1:0})}getFilteredUsers(){const e=this.searchString.toLowerCase();return this.fixedUsers?e.length?(this.filteredUsers=this.fixedUsers.filter(t=>-1!==(t.username||t.email||"").toLowerCase().indexOf(e)||this.isCurrentUser(t)&&-1!=="me".indexOf(e)).map(t=>Object.assign(Object.assign({},t),{firstNameMatch:(t.username||"").toLowerCase().startsWith(e)})),(e=>{const t=e?this.filteredUsers.filter(e=>this.isCurrentUser(e)):[],i=Object(a.a)(this.filteredUsers,e=>(e.username||e.email).toLowerCase()).filter(t=>!e||!this.isCurrentUser(t)),o=e?this.filteredUsers.filter(e=>!this.isCurrentUser(e)):[...this.filteredUsers];o.sort((e,t)=>t.weightedCount-e.weightedCount),this.filteredUsers=[...t,...o.filter(e=>e.firstNameMatch),...o.filter(e=>e.weightedCount&&!e.firstNameMatch),...i.filter(e=>this.isCurrentUser(e)&&!e.weightedCount&&!e.firstNameMatch),...i.filter(e=>!this.isCurrentUser(e)&&!e.weightedCount&&!e.firstNameMatch)]})("me"===e),this.filteredUsers.length>=1&&this.highlightListItem(this.listItemUserIndexOffset),this.changeDetector.markForCheck(),void this.filteredItemsChange.emit({items:[...this.filteredUsers,...this.filteredGroups]})):(this.filteredUsers=this.fixedUsers.filter(e=>e.username||e.email),this.changeDetector.markForCheck(),void this.filteredItemsChange.emit({items:[...this.filteredUsers,...this.filteredGroups]})):(this.filteredUsers=[],void this.filteredItemsChange.emit({items:[...this.filteredUsers,...this.filteredGroups]}))}getFilteredGroups(){const e=this.searchString.toLowerCase();this.filteredGroups=this.sortedUserGroups.filter(t=>t.name.toLowerCase().includes(e)),this.filteredItemsChange.emit({items:[...this.filteredUsers,...this.filteredGroups]})}getFilteredListItems(){let e=[];return this.isPeopleHeadingVisible()&&e.push({id:-2,type:M.PeopleHeading}),this.isUnassignVisible()&&e.push({id:-1,type:M.Unassigned}),e=[...e,...this.filteredUsers.map(e=>Object.assign(Object.assign({},e),{type:M.User}))],this.isUserGroupsVisible()&&(e.push({id:0,type:M.TeamsHeading}),e=[...e,...this.filteredGroups.map(e=>Object.assign(Object.assign({},e),{type:M.UserGroup}))]),e}getListItemUserIndexOffset(){let e=0;return this.isPeopleHeadingVisible()&&e++,this.isUnassignVisible()&&e++,e}getListItemUserGroupIndexOffset(){return this.getListItemUserIndexOffset()+this.filteredUsers.length+1}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.h),n.Wb(n.t),n.Wb(b.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-user-list"]],viewQuery:function(e,t){if(1&e&&(n.jd(x,1),n.jd(o.c,1)),2&e){let e;n.Qc(e=n.rc())&&(t.searchField=e.first),n.Qc(e=n.rc())&&(t.cdkVirtualScrollViewport=e.first)}},inputs:{disabled:"disabled",users:"users",multiChoice:"multiChoice",enableFirstSelection:"enableFirstSelection",forBatch:"forBatch",showUnassign:"showUnassign",showUnassigned:"showUnassigned",showAnyone:"showAnyone",showSelf:"showSelf",unassignedText:"unassignedText",selectedUnassigned:"selectedUnassigned",search:"search",showSearch:"showSearch",displayEmail:"displayEmail",selectedUsers:"selectedUsers",showReassign:"showReassign",autoHighlight:"autoHighlight",canOnlyEditSelf:"canOnlyEditSelf",immutableUser:"immutableUser",focusOnInit:"focusOnInit",displayProfile:"displayProfile",headerTemplate:"headerTemplate",showLastViewed:"showLastViewed",lastViewedMap:"lastViewedMap",weights:"weights",weightType:"weightType",showInactive:"showInactive",userGroups:"userGroups",selectedUserGroups:"selectedUserGroups",guestMap:"guestMap"},outputs:{onBeforeChange:"onBeforeChange",onChange:"onChange",onNeedClose:"onNeedClose",onReassign:"onReassign",onReassignGroup:"onReassignGroup",onOpenProfile:"onOpenProfile",filteredItemsChange:"filteredItemsChange",onUserGroupsChanged:"onUserGroupsChanged"},features:[n.Gb],decls:6,vars:4,consts:function(){let e,t,i,o;return e=$localize`:form input placeholder@@forms_placeholder--search␟7e892ba15f2c6c17e83510e273b3e10fc32ea016␟4580988005648117665:Search`,t=$localize`:@@common_people␟449742fdba7cc0766cb3b4fb49aedbf3f113c097␟175110701967314429: People `,i=$localize`:@@common_teams␟80ac888abf10609451f6c91a128d345d880dd205␟3486316099955755511: Teams `,o=$localize`:@@cu-user-list__no-matching-users-groups␟f4cd7b717d8df907bbec46858f4c25a1c4e48770␟7649342765141597861: No people ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:or teams${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_NG_CONTAINER: matched your search `,[[1,"user-list"],[4,"ngTemplateOutlet"],["class","user-list__header",4,"ngIf"],[1,"user-list__body"],["class","user-list__body-virtual-viewport",3,"itemSize",4,"ngIf"],["class","user-list-item user-list-item__nomatch",4,"ngIf"],[1,"user-list__header"],[1,"cu-search"],["type","text","placeholder",e,1,"cu-search__input",3,"ngModel","ngModelChange"],["searchField",""],["icon","search",1,"cu-search__icon"],[1,"user-list__body-virtual-viewport",3,"itemSize"],[3,"ngSwitch",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngSwitch"],["class","user-list__body-title",4,"ngSwitchCase"],["class","user-list-item",3,"ngClass","mouseenter","click",4,"ngSwitchCase"],[3,"user","showInactive","displayEmail","selected","highlighted","isGuest","displayProfile","showUnassign","showReassign","ngClass","showLastViewed","lastViewed","click","mouseenter","onOpenProfile","onUnassign","onReassign",4,"ngSwitchCase"],[3,"group","selected","highlighted","showUnassign","disableShowUserGroupMembers","showReassign","click","mouseenter","unassign","onReassign",4,"ngSwitchCase"],[1,"user-list__body-title"],t,[1,"user-list-item",3,"ngClass","mouseenter","click"],[1,"user-list-item__icon"],["icon","unassigned",1,"user-list__unassign-icon"],[1,"user-list-item__name"],[3,"user","showInactive","displayEmail","selected","highlighted","isGuest","displayProfile","showUnassign","showReassign","ngClass","showLastViewed","lastViewed","click","mouseenter","onOpenProfile","onUnassign","onReassign"],i,[3,"group","selected","highlighted","showUnassign","disableShowUserGroupMembers","showReassign","click","mouseenter","unassign","onReassign"],[1,"user-list-item","user-list-item__nomatch"],o,[4,"ngIf"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.bd(1,I,1,0,"ng-container",1),n.bd(2,T,5,1,"div",2),n.cc(3,"div",3),n.bd(4,$,2,3,"cdk-virtual-scroll-viewport",4),n.bd(5,R,3,1,"div",5),n.bc(),n.bc()),2&e&&(n.Ib(1),n.Dc("ngTemplateOutlet",t.headerTemplate),n.Ib(1),n.Dc("ngIf",t.showSearch),n.Ib(2),n.Dc("ngIf",t.filteredListItems.length>0),n.Ib(1),n.Dc("ngIf",t.filteredUsers.length+t.filteredGroups.length===0&&!(null==t.searchString||!t.searchString.length)&&((null==t.users?null:t.users.length)||0)+((null==t.userGroups?null:t.userGroups.length)||0)>0))},directives:[g.x,g.q,_.c,_.p,_.s,v.a,o.c,o.a,o.b,g.u,g.v,g.o,k.a,y.a],pipes:[g.b],encapsulation:2,changeDetection:0}),e})()},IPAr:function(e,t,i){"use strict";e.exports=function(e){return n.test("number"==typeof e?o(e):e.charAt(0))};var o=String.fromCharCode,n=/\s/},Ivax:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("gb9A"),n=i("ofXK"),s=i("3Pt+"),c=i("K0KF"),a=i("KyjD"),r=i("EDFS"),l=i("tyNb"),d=i("PTtq"),u=i("1M0N"),m=i("fTg4"),p=i("Hns5"),h=i("fXoL");let f=(()=>{class e{}return e.\u0275mod=h.Ub({type:e}),e.\u0275inj=h.Tb({factory:function(t){return new(t||e)},imports:[[n.c,s.l,s.x,c.a,o.a,a.a,r.d,l.l,d.a,u.a,m.a,p.a]]}),e})()},Ivzr:function(e,t,i){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},J5yW:function(e,t,i){"use strict";var o=i("1iAE"),n=i("ZONP");e.exports=function(e){return o(e)||n(e)}},JKnl:function(e,t,i){"use strict";function o(e,t){return Array(t+1).join(e)}i.d(t,"a",function(){return Z}),i.d(t,"b",function(){return Y});var n=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function s(e){return l(e,n)}var c=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function a(e){return l(e,c)}var r=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function l(e,t){return t.indexOf(e.nodeName)>=0}function d(e,t){return e.getElementsByTagName&&t.some(function(t){return e.getElementsByTagName(t).length})}var u={};function m(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function p(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function h(e,t,i){for(var o=0;o<e.length;o++){var n=e[o];if(f(n,t,i))return n}}function f(e,t,i){var o=e.filter;if("string"==typeof o){if(o===t.nodeName.toLowerCase())return!0}else if(Array.isArray(o)){if(o.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof o)throw new TypeError("`filter` needs to be a string, array, or function");if(o.call(e,t,i))return!0}}function b(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function g(e,t,i){return e&&e.parentNode===t||i(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}u.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},u.lineBreak={filter:"br",replacement:function(e,t,i){return i.br+"\n"}},u.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,i){var n=Number(t.nodeName.charAt(1));return"setext"===i.headingStyle&&n<3?"\n\n"+e+"\n"+o(1===n?"=":"-",e.length)+"\n\n":"\n\n"+o("#",n)+" "+e+"\n\n"}},u.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},u.list={filter:["ul","ol"],replacement:function(e,t){var i=t.parentNode;return"LI"===i.nodeName&&i.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},u.listItem={filter:"li",replacement:function(e,t,i){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var o=i.bulletListMarker+"   ",n=t.parentNode;if("OL"===n.nodeName){var s=n.getAttribute("start"),c=Array.prototype.indexOf.call(n.children,t);o=(s?Number(s)+c:c+1)+".  "}return o+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},u.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,i){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},u.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,i){for(var n,s=((t.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],c=t.firstChild.textContent,a=i.fence.charAt(0),r=3,l=new RegExp("^"+a+"{3,}","gm");n=l.exec(c);)n[0].length>=r&&(r=n[0].length+1);var d=o(a,r);return"\n\n"+d+s+"\n"+c.replace(/\n$/,"")+"\n"+d+"\n\n"}},u.horizontalRule={filter:"hr",replacement:function(e,t,i){return"\n\n"+i.hr+"\n\n"}},u.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var i=t.getAttribute("href"),o=m(t.getAttribute("title"));return o&&(o=' "'+o+'"'),"["+e+"]("+i+o+")"}},u.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,i){var o,n,s=t.getAttribute("href"),c=m(t.getAttribute("title"));switch(c&&(c=' "'+c+'"'),i.linkReferenceStyle){case"collapsed":o="["+e+"][]",n="["+e+"]: "+s+c;break;case"shortcut":o="["+e+"]",n="["+e+"]: "+s+c;break;default:var a=this.references.length+1;o="["+e+"]["+a+"]",n="["+a+"]: "+s+c}return this.references.push(n),o},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},u.emphasis={filter:["em","i"],replacement:function(e,t,i){return e.trim()?i.emDelimiter+e+i.emDelimiter:""}},u.strong={filter:["strong","b"],replacement:function(e,t,i){return e.trim()?i.strongDelimiter+e+i.strongDelimiter:""}},u.code={filter:function(e){return"CODE"===e.nodeName&&!("PRE"===e.parentNode.nodeName&&!e.previousSibling&&!e.nextSibling)},replacement:function(e){if(!e.trim())return"";var t="`",i="",o="",n=e.match(/`+/gm);if(n)for(/^`/.test(e)&&(i=" "),/`$/.test(e)&&(o=" ");-1!==n.indexOf(t);)t+="`";return t+i+e+o+t}},u.image={filter:"img",replacement:function(e,t){var i=m(t.getAttribute("alt")),o=t.getAttribute("src")||"",n=m(t.getAttribute("title"));return o?"!["+i+"]("+o+(n?' "'+n+'"':"")+")":""}},p.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=h(this.array,e,this.options))||(t=h(this._keep,e,this.options))||(t=h(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var _,v,k,y="undefined"!=typeof window?window:{},w=function(){var e=y.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(i){}return t}()?y.DOMParser:(_=function(){},v=i(4),_.prototype.parseFromString=function(e){return v.createDocument(e)},_);function x(e){var t;return function(e){var t=e.element,i=e.isBlock,o=e.isVoid,n=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!n(t)){for(var s=null,c=!1,a=null,r=g(a,t,n);r!==t;){if(3===r.nodeType||4===r.nodeType){var l=r.data.replace(/[ \r\n\t]+/g," ");if(s&&!/ $/.test(s.data)||c||" "!==l[0]||(l=l.substr(1)),!l){r=b(r);continue}r.data=l,s=r}else{if(1!==r.nodeType){r=b(r);continue}i(r)||"BR"===r.nodeName?(s&&(s.data=s.data.replace(/ $/,"")),s=null,c=!1):o(r)&&(s=null,c=!0)}var d=g(a,r,n);a=r,r=d}s&&(s.data=s.data.replace(/ $/,""),s.data||b(s))}}({element:t="string"==typeof e?(k=k||new w).parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):e.cloneNode(!0),isBlock:s,isVoid:a}),t}function I(e){return e.isBlock=s(e),e.isCode="code"===e.nodeName.toLowerCase()||e.parentNode.isCode,e.isBlank=function(e){return!a(e)&&!function(e){return l(e,r)}(e)&&/^\s*$/i.test(e.textContent)&&!function(e){return d(e,c)}(e)&&!function(e){return d(e,r)}(e)}(e),e.flankingWhitespace=function(e){var t="",i="";if(!e.isBlock){var o=/^\s/.test(e.textContent),n=/\s$/.test(e.textContent),s=e.isBlank&&o&&n;o&&!T("left",e)&&(t=" "),s||!n||T("right",e)||(i=" ")}return{leading:t,trailing:i}}(e),e}function T(e,t){var i,o,n;return"left"===e?(i=t.previousSibling,o=/ $/):(i=t.nextSibling,o=/^ /),i&&(3===i.nodeType?n=o.test(i.nodeValue):1!==i.nodeType||s(i)||(n=o.test(i.textContent))),n}var C=Array.prototype.reduce,D=/^\n*/,O=/\n*$/,S=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function E(e){if(!(this instanceof E))return new E(e);this.options=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}({},{rules:u,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}},e),this.rules=new p(this.options)}function P(e){var t=this;return C.call(e.childNodes,function(e,i){var o="";return 3===(i=new I(i)).nodeType?o=i.isCode?i.nodeValue:t.escape(i.nodeValue):1===i.nodeType&&(o=A.call(t,i)),$(e,o)},"")}function j(e){var t=this;return this.rules.forEach(function(i){"function"==typeof i.append&&(e=$(e,i.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function A(e){var t=this.rules.forNode(e),i=P.call(this,e),o=e.flankingWhitespace;return(o.leading||o.trailing)&&(i=i.trim()),o.leading+t.replacement(i,e,this.options)+o.trailing}function $(e,t){var i,o,n,s=(i=t,(n=(o=[e.match(O)[0],i.match(D)[0]].sort())[o.length-1]).length<2?n:"\n\n");return(e=e.replace(O,""))+s+t.replace(D,"")}E.prototype={turndown:function(e){if(!function(e){return null!=e&&("string"==typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=P.call(this,new x(e));return j.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!=typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return S.reduce(function(e,t){return e.replace(t[0],t[1])},e)}};var U=E,R=i("oKxQ"),M=i("SNEm"),F=i.n(M),L=i("1VtT"),N=i.n(L),z=i("fUUT"),q=i.n(z),G=function(){return(G=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},V={debug:!1,tableIdGenerator:function(){return"row-"+Math.random().toString(36).slice(2,6)}},B=function(){function e(e){this.blocks=["paragraph","code","heading","blockquote","list","table"],this.options=G(G({},V),e)}return e.prototype.convert=function(e){var t=N()().use(q.a).parse(e);return this.convertChildren(null,t,{}).ops},e.prototype.convertChildren=function(e,t,i,o,n){var s=this;void 0===i&&(i={}),void 0===o&&(o=0);var c,a=t.children,r=new F.a;return a&&a.forEach(function(l,d){switch(s.isBlock(l.type)&&s.isBlock(c)&&r.insert("\n"),l.type){case"paragraph":r=r.concat(s.convertChildren(t,l,i,o+1)),e||r.insert("\n");break;case"code":String(l.value).split("\n").forEach(function(e){e&&r.push({insert:e}),r.push({insert:"\n",attributes:{"code-block":!0}})});break;case"list":r=r.concat(s.convertChildren(t,l,i,o));break;case"listItem":r=r.concat(s.convertListItem(t,l,o));break;case"table":var u=new Array(l.children[0].children.length).fill("\n").join("");r=(r=r.concat((new F.a).insert(u,{"table-col":{width:150}}))).concat(s.convertChildren(t,l,i,o,{align:l.align}));break;case"tableRow":r=r.concat(s.convertChildren(t,l,i,o,G(G({},n),{rowId:s.generateId()})));break;case"tableCell":var m=a.indexOf(l)+1+"",p=n&&n.align,h=p&&Array.isArray(p)&&p.length>d&&p[d];r=r.concat(s.convertTableCell(t,l,n&&n.rowId,h,m));break;case"heading":(r=r.concat(s.convertChildren(t,l,i,o+1))).push({insert:"\n",attributes:{header:l.depth||1}});break;case"blockquote":(r=r.concat(s.convertChildren(t,l,i,o+1))).push({insert:"\n",attributes:{blockquote:!0}});break;case"thematicBreak":r.insert({divider:!0}),r.insert("\n");break;case"image":r=r.concat(s.embedFormat(l,i,{image:l.url},l.alt?{alt:l.alt}:null));default:var f=s.convertInline(t,l,i);f&&(r=r.concat(f))}c=l.type}),r},e.prototype.generateId=function(){return this.options.tableIdGenerator()},e.prototype.isBlock=function(e){return this.blocks.includes(e)},e.prototype.convertInline=function(e,t,i){switch(t.type){case"strong":return this.inlineFormat(e,t,i,{bold:!0});case"emphasis":return this.inlineFormat(e,t,i,{italic:!0});case"delete":return this.inlineFormat(e,t,i,{strike:!0});case"inlineCode":return this.inlineFormat(e,t,i,{code:!0});case"link":return this.inlineFormat(e,t,i,{link:t.url});case"text":default:return this.inlineFormat(e,t,i,{})}},e.prototype.inlineFormat=function(e,t,i,o){var n=t.value&&"string"==typeof t.value?t.value:null,s=G(G({},i.attributes),o);return i=G({},i),n&&(i.insert=n),Object.keys(s).length&&(i.attributes=s),t.children?this.convertChildren(e,t,i):i.insert?(new F.a).push(i):null},e.prototype.embedFormat=function(e,t,i,o){return(new F.a).push({insert:i,attributes:G(G({},t.attributes),o)})},e.prototype.convertListItem=function(e,t,i){void 0===i&&(i=0);for(var o=new F.a,n=0,s=t.children;n<s.length;n++){var c=s[n];if(o=o.concat(this.convertChildren(e,c,{},i+1)),"list"!==c.type){var a={list:e.ordered?"ordered":t.checked?"checked":!1===t.checked?"unchecked":"bullet"};i&&(a.indent=i),o.push({insert:"\n",attributes:a})}}return o},e.prototype.convertTableCell=function(e,t,i,o,n){var s=new F.a;s=s.concat(this.convertChildren(e,t,{},1));var c={"table-cell-line":{cell:i+"-"+n,row:""+i,colspan:"1",rowspan:"1"}};return o&&"left"!==o&&(c.align=o),s.insert("\n",c),s},e}(),X=i("8oxB"),H=i.n(X);function W(e){const t=new U;return Array.prototype.reduce.call(e.childNodes,(e,i)=>e+Array.prototype.reduce.call(i.childNodes,(e,i,o)=>("UL"===i.nodeName||"OL"===i.nodeName?e+=W(i):e=e+t.turndown(i.innerHTML)+"<br>",e),""),"")}function K(e){const t=new U;let i=" ";return 0===Array.prototype.indexOf.call(e.parentNode.childNodes,e)&&(i="| "),i+Array.prototype.map.call(e.childNodes,(i,o)=>{if("P"===i.nodeName){const n=e.childNodes.length-1===o?"":"<br>";return t.turndown(i.innerHTML)+n}return"UL"===i.nodeName||"OL"===i.nodeName?W(i):""}).join("")+" |"}function Q(e){const t=e.parentNode;return"THEAD"===t.nodeName||t.firstChild===e&&("TABLE"===t.nodeName||function(e){const t=e.previousSibling;return"TBODY"===e.nodeName&&(!t||"THEAD"===t.nodeName&&/^\s*$/i.test(t.textContent)||"COLGROUP"===t.nodeName)}(t))}function Z(e){const t=new U;!function(e){e.addRule("strikethrough",{filter:["del","s","strike"],replacement:e=>"~~"+e+"~~"}),e.addRule("checklist",{filter:e=>e.hasAttribute("data-checked")&&"LI"===e.nodeName,replacement:(e,t,...i)=>{const o=e.split(/\r?\n/).reduce((e,t,i)=>(t.trim()&&(e+=(i>0?"    ":"")+t+"\n"),e),"");return`${"true"===t.dataset.checked?"- [x]":"- [ ]"} ${o}`}}),e.addRule("noneTypeList",{filter:e=>e.hasAttribute("data-none-type")&&"LI"===e.nodeName,replacement:(e,t,...i)=>"\n\n"+e+"\n\n"}),e.addRule("highlightedCodeBlock",{filter:e=>"PRE"===e.nodeName,replacement:(e,t,i)=>"\n\n"+i.fence+t.dataset.language+"\n"+t.firstChild.textContent+"\n"+i.fence+"\n\n"}),e.addRule("tableCell ",{filter:["th","td"],replacement:(e,t)=>K(t)}),e.addRule("tableRaw ",{filter:"tr",replacement:(e,t)=>{let i="";const o={left:":--",right:"--:",center:":-:"};if(Q(t))for(let n=0;n<t.childNodes.length;n++){let e="---";const s=(t.childNodes[n].getAttribute("align")||"").toLowerCase();s&&(e=o[s]||e),i+="| "+e+(n===t.childNodes.length-1?" |":"")}return"\n"+e+(i?"\n"+i:"")}}),e.addRule("tableBody ",{filter:["thead","tbody","tfoot"],replacement:e=>e}),e.addRule("table ",{filter:e=>"TABLE"===e.nodeName&&Q(e.rows[0]),replacement:e=>"\n\n"+(e=e.replace("\n\n","\n"))+"\n\n"})}(t);const i=Object(R.b)(e,"",!1,null,!1,!0,!0,!1,!0,!0,!1,[],[],null,!1);return t.turndown(i)}function Y(e){return window.process=H.a,(new B).convert(e)}},Jdc8:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("ofXK"),n=i("1M0N"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,n.a]]}),e})()},Jkpq:function(e,t,i){"use strict";i.d(t,"h",function(){return n}),i.d(t,"e",function(){return a}),i.d(t,"f",function(){return f}),i.d(t,"g",function(){return b}),i.d(t,"i",function(){return g}),i.d(t,"d",function(){return _}),i.d(t,"a",function(){return v}),i.d(t,"b",function(){return k}),i.d(t,"c",function(){return y}),i.d(t,"l",function(){return w}),i.d(t,"m",function(){return x}),i.d(t,"k",function(){return I}),i.d(t,"j",function(){return T}),i.d(t,"o",function(){return C}),i.d(t,"p",function(){return D}),i.d(t,"n",function(){return S});var o=i("f0Wu");const n={code:"today",name:"Today",icon:"quick-date-today"},s={code:"later",name:"Later",shortname:"later",icon:"quick-date-today"},c={code:"tomorrow",name:"Tomorrow",icon:"quick-date-tomorrow"},a={code:"friday",name:"This Friday",icon:"quick-date-friday"},r={code:"nextWeek",name:"Next week",icon:"quick-date-week"},l={code:"thisWeekend",name:"This weekend",icon:"quick-date-week"},d={code:"nextWeekend",name:"Next weekend",icon:"quick-date-week"},u={code:"seven",name:"7 days",shortname:"7d",icon:"quick-date-seven"},m={code:"2weeks",name:"2 weeks",shortname:"2w",icon:"quick-date-week"},p={code:"4weeks",name:"4 weeks",shortname:"4w",icon:"quick-date-week"},h={code:"8weeks",name:"8 weeks",shortname:"8w",icon:"quick-date-week"},f={code:"monday",name:$localize`:@@common_weekday--monday:Monday`,shortname:"Mon",icon:"quick-date-week"},b={code:"sunday",name:$localize`:@@common_weekday--sunday:Sunday`,shortname:"Sun",icon:"quick-date-week"},g={code:"typed",name:""},_={code:"clear",name:"Clear dates",icon:"quick-date-clear"},v=[n,c,a,r,u],k=[n,s,c,l,r,d,m,p],y=[n,s,c,r,Object.assign(Object.assign({},l),{name:"Next weekend"}),m,p,h],w={code:"1h",name:"1 hour"},x={code:"4h",name:"4 hours"},I={code:"1d",name:"1 day"},T=[w,x,I];function C(e){return"8hours"===e||e===s.code}function D(e){const t=C(e),i=t?o():o().startOf("day");switch(e){case s.code:i.add(6,"hour");break;case"8hours":i.add(8,"hour");break;case c.code:i.add(1,"day");break;case a.code:O(i,5);break;case l.code:O(i,6);break;case d.code:O(i,6),i.add(7,"day");break;case b.code:O(i,7);break;case r.code:case f.code:O(i,1);break;case"2days":i.add(2,"day");break;case"3days":i.add(3,"day");break;case u.code:i.add(7,"day");break;case m.code:i.add(2,"week");break;case p.code:i.add(4,"week");break;case h.code:i.add(8,"week")}return{date:i,hasTime:t}}function O(e,t){return e.isoWeekday()<t?e.isoWeekday(t):e.add(1,"weeks").isoWeekday(t)}function S(){return Array.from({length:96}).map((e,t)=>{const i=o();return i.startOf("day"),i.add(15*t,"minute"),i})}},JlFY:function(e,t,i){"use strict";var o=i("Brp5");function n(e,t,i){for(var o,n,s,c,a,r,l=t.length,d=0;d<l&&96===t.charCodeAt(d);)d++;if(0!==d&&d!==l){for(o=d,a=t.charCodeAt(d);d<l;){if(c=a,a=t.charCodeAt(d+1),96===c){if(void 0===n&&(n=d),s=d+1,96!==a&&s-n===o){r=!0;break}}else void 0!==n&&(n=void 0,s=void 0);d++}if(r){if(i)return!0;if(l=n,c=t.charCodeAt(d=o),a=t.charCodeAt(l-1),r=!1,l-d>2&&(32===c||10===c)&&(32===a||10===a)){for(d++,l--;d<l;){if(32!==(c=t.charCodeAt(d))&&10!==c){r=!0;break}d++}!0===r&&(o++,n--)}return e(t.slice(0,s))({type:"inlineCode",value:t.slice(o,n)})}}}e.exports=n,n.locator=o},JqBK:function(e,t,i){"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},K2KW:function(e,t,i){"use strict";var o=i("RjOF"),n=i("3GlI");e.exports=function(e,t,i){for(var o,c,a,r=-1,l=t.length,d="",u="",m="",p="";++r<l;)if(o=t.charAt(r),a)if(a=!1,d+=m,u+=p,m="",p="","\n"===o)m=o,p=o;else for(d+=o,u+=o;++r<l;){if(!(o=t.charAt(r))||"\n"===o){p=o,m=o;break}d+=o,u+=o}else if(" "===o&&t.charAt(r+1)===o&&t.charAt(r+2)===o&&t.charAt(r+3)===o)m+=s,r+=3,a=!0;else if("\t"===o)m+=o,a=!0;else{for(c="";"\t"===o||" "===o;)c+=o,o=t.charAt(++r);if("\n"!==o)break;m+=c+o,p+=o}if(u)return!!i||e(d)({type:"code",lang:null,meta:null,value:n(u)})};var s=o(" ",4)},K8XO:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("1M0N"),n=i("HiD6"),s=i("ofXK"),c=i("3Pt+"),a=i("KyjD"),r=i("K0KF"),l=i("dsJk"),d=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[s.c,o.a,a.a,r.a,c.l,n.a,l.a]]}),e})()},KAhl:function(e,t,i){"use strict";i.d(t,"a",function(){return P});var o=i("dTHz"),n=i("jJQC"),s=i("4bgU"),c=i("fXoL"),a=i("8it8"),r=i("LdyQ"),l=i("ofXK"),d=i("MJvn"),u=i("n+1/"),m=i("UdVN"),p=i("EDFS"),h=i("HPyy"),f=i("V1MX"),b=i("WkAz"),g=i("tyNb"),_=i("EP2k");const v=["dropdown"],k=["pop"];function y(e,t){if(1&e){const e=c.dc();c.cc(0,"div",7),c.cc(1,"div",25),c.Xb(2,"cu-avatar",26),c.cc(3,"div",27),c.dd(4),c.vc(5,"username"),c.bc(),c.bc(),c.cc(6,"cu-points-estimates",28),c.qc("onPointsEstimatesAction",function(t){return c.Uc(e),c.uc(3).pointsEstimatesAction(t)}),c.bc(),c.bc()}if(2&e){const e=t.$implicit,i=c.uc(3);c.Ib(2),c.Dc("user",e)("modifier","cu-avatar_28"),c.Ib(2),c.fd(" ",c.xc(5,8,e,i.commonStringsService.meText)," "),c.Ib(2),c.Dc("points",null==e?null:e.points)("availablePoints",i.availablePoints)("task",i.task)("user",e)("showAllOption",!0)}}function w(e,t){if(1&e){const e=c.dc();c.cc(0,"div",7),c.cc(1,"div",25),c.Xb(2,"cu-user-group-avatar",29),c.cc(3,"div",27),c.dd(4),c.bc(),c.bc(),c.cc(5,"cu-points-estimates",30),c.qc("onPointsEstimatesAction",function(t){return c.Uc(e),c.uc(3).pointsEstimatesAction(t)}),c.bc(),c.bc()}if(2&e){const e=t.$implicit,i=c.uc(3);c.Ib(2),c.Dc("group",e)("avatarSize",28)("bordered",!1),c.Ib(2),c.fd(" ",null==e?null:e.name," "),c.Ib(1),c.Dc("points",null==e?null:e.points)("availablePoints",i.availablePoints)("task",i.task)("group",e)("showAllOption",!0)}}function x(e,t){if(1&e&&(c.ac(0),c.cc(1,"div",22),c.gc(2,23),c.bc(),c.bd(3,y,7,11,"div",24),c.bd(4,w,6,9,"div",24),c.Zb()),2&e){const e=c.uc(2);c.Ib(3),c.Dc("ngForOf",e.users)("ngForTrackBy",e.trackById),c.Ib(1),c.Dc("ngForOf",e.groups)("ngForTrackBy",e.trackById)}}function I(e,t){if(1&e){const e=c.dc();c.cc(0,"div",7),c.cc(1,"div",31),c.gc(2,32),c.bc(),c.cc(3,"cu-points-estimates",33,34),c.qc("onPointsEstimatesAction",function(t){return c.Uc(e),c.uc(2).pointsEstimatesAction(t)}),c.bc(),c.bc()}if(2&e){const e=c.uc(2);c.Ib(3),c.Dc("points",e.points)("availablePoints",e.availablePoints)("task",e.task)("user",null!=e.users&&e.users.length?e.users[0]:null)("group",null!=e.groups&&e.groups.length?e.groups[0]:null)("showAllOption",!1)}}const T=function(e){return{"cu-points-estimates-dropdown__hidden":e}};function C(e,t){if(1&e){const e=c.dc();c.cc(0,"div",6),c.cc(1,"div",7),c.cc(2,"div",8),c.ac(3),c.gc(4,9),c.Zb(),c.cc(5,"div",10,11),c.qc("click",function(){return c.Uc(e),c.Rc(6).toggle()}),c.bc(),c.bc(),c.bc(),c.bd(7,x,5,4,"ng-container",12),c.bd(8,I,5,6,"ng-template",null,13,c.cd),c.cc(10,"div",14),c.cc(11,"div",15),c.cc(12,"div",16),c.gc(13,17),c.bc(),c.cc(14,"div",18),c.mc(15,19),c.Xb(16,"span"),c.jc(),c.bc(),c.bc(),c.cc(17,"div",20),c.qc("click",function(){return c.Uc(e),c.uc().save()}),c.gc(18,21),c.bc(),c.bc(),c.bc()}if(2&e){const e=c.Rc(9),t=c.uc(),i=c.Rc(7);c.Ib(5),c.Dc("popover",i)("outsideClick",!0),c.Ib(2),c.Dc("ngIf",(null==t.users?null:t.users.length)>1||t.multipleAssignees)("ngIfElse",e),c.Ib(4),c.Dc("ngClass",c.Hc(6,T,!t.rolledUpPoints)),c.Ib(5),c.kc(t.rolledUpPoints),c.hc(15)}}const D=function(e,t){return["/",e,"settings","team",t,"clickapps"]};function O(e,t){if(1&e){const e=c.dc();c.mc(0,35,1),c.ac(1),c.cc(2,"a",39),c.qc("click",function(){return c.Uc(e),c.uc(2).pop.hide()}),c.bc(),c.Zb(),c.jc()}if(2&e){const e=c.uc(2);c.Ib(2),c.Dc("routerLink",c.Ic(1,D,e.team?e.team.id:"",e.team?e.team.id:""))}}function S(e,t){if(1&e){const e=c.dc();c.ac(0),c.mc(1,35),c.bd(2,O,3,4,"ng-container",36),c.jc(),c.Zb(),c.Xb(3,"br"),c.cc(4,"a",37),c.qc("click",function(){return c.Uc(e),c.uc().pop.hide()}),c.gc(5,38),c.bc()}if(2&e){const e=c.uc();c.Ib(2),c.Dc("ngIf",(null==e.team?null:e.team.role)<=e.UserRole.ADMIN)}}const E=["*"];let P=(()=>{class e{constructor(e){this.commonStringsService=e,this.modifier="",this.readonly=!1,this.multipleAssignees=!1,this.onPointsEstimatesAction=new c.o,this.onClose=new c.o,this.onOpen=new c.o,this.trackById=Object(n.d)("id"),this.UserRole=o.f}ngOnInit(){}closed(){this.onClose.emit()}opened(){this.onOpen.emit(),this.task&&this.onPointsEstimatesAction.emit({action:s.a.FetchTaskPointsEstimatesData,task:this.task})}open(){this.dropdown&&this.dropdown.open()}save(){this.dropdown.close()}pointsEstimatesAction(e){switch(e.action){case s.a.UpdateTaskAssigneePointsEstimates:const t=e.setAll?(this.users||[]).map(e=>e.id):e.user?[e.user.id]:null,i=e.setAll?(this.groups||[]).map(e=>e.id):e.group?[e.group.id]:null;this.onPointsEstimatesAction.emit(Object.assign(Object.assign({},e),{assignees:t,groupAssignees:i}));break;default:this.onPointsEstimatesAction.emit(e)}}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(a.a))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-points-estimates-dropdown"]],viewQuery:function(e,t){if(1&e&&(c.jd(v,3),c.jd(k,1)),2&e){let e;c.Qc(e=c.rc())&&(t.dropdown=e.first),c.Qc(e=c.rc())&&(t.pop=e.first)}},hostAttrs:[1,"cu-points-estimates-dropdown"],inputs:{modifier:"modifier",readonly:"readonly",task:"task",points:"points",rolledUpPoints:"rolledUpPoints",availablePoints:"availablePoints",users:"users",groups:"groups",multipleAssignees:"multipleAssignees",fromPoint:"fromPoint",team:"team"},outputs:{onPointsEstimatesAction:"onPointsEstimatesAction",onClose:"onClose",onOpen:"onOpen"},ngContentSelectors:E,decls:8,vars:5,consts:function(){let e,t,i,o,n,s,c,a;return e=$localize`:@@common_sprint-points␟2bb10cb52d2403c7e9c78562abcaf914d22dd5f3␟467707537467110471:Sprint Points`,t=$localize`:@@common_total-with-subtasks␟0617e3056d641f896c8d9ed737b501e8917435ec␟4089233933898911324: TOTAL WITH SUBTASKS `,i=$localize`:@@cu-points-estimates-dropdown__rolled-up-points␟5e3de714ac30f372b2721e9aa1cd6950e4bc1466␟8760603107891100970:${"\ufffd#16\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#16\ufffd"}:CLOSE_TAG_SPAN: points `,o=$localize`:@@common_save␟f8b53b407af242e77dc3391947f23988f3451e64␟4024825301968853407: Save `,n=$localize`:@@common_assignee-breakdown␟87db851eea76b3d53bde805c1208f33d50fe7a1d␟5899955217048405146: ASSIGNEE BREAKDOWN `,s=$localize`:@@cu-points-estimates-dropdown__total-pts␟c18c56ddba988ea90182f37c2301286402a5d4f5␟8002688291418448281: Total Points `,c=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,a=$localize`:@@cu-points-estimates-dropdown__popover-content_estimate-by-points␟a123250ef47a7b69c91ca889009ed5383a64dc95␟4247096897739306639: Estimate task size by points. ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:Go to your ${"\ufffd#2:1\ufffd"}:START_LINK:ClickApp settings${"\ufffd/#2:1\ufffd"}:CLOSE_LINK: to choose to estimate points per task, or per assignee.${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,[["cuDropdown","",1,"cu-dropdown",3,"ngClass","dropdownCloseOnInsideClick","dropdownDisabled","dropdownFromPoint","dropdownCloseOnModal","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["class","cu-dropdown__menu cu-points-estimates-dropdown__menu",4,"cuDropdownMenu"],["popTemplate",""],[1,"cu-dropdown__menu","cu-points-estimates-dropdown__menu"],[1,"cu-points-estimates-dropdown__row"],[1,"cu-points-estimates-dropdown__row-title"],e,["containerClass","markdown-tooltip","triggers","","placement","right","container","body","icon","question",1,"help-question-mark",3,"popover","outsideClick","click"],["pop","bs-popover"],[4,"ngIf","ngIfElse"],["showOneInput",""],[1,"cu-points-estimates-dropdown__footer"],[1,"cu-points-estimates-dropdown__footer-left",3,"ngClass"],[1,"cu-points-estimates-dropdown__footer-rolled-title"],t,[1,"cu-points-estimates-dropdown__footer-rolled-value"],i,[1,"cu-btn","cu-btn_h-36","cu-points-estimates-dropdown__footer-btn",3,"click"],o,[1,"cu-points-estimates-dropdown__subtitle"],n,["class","cu-points-estimates-dropdown__row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-points-estimates-dropdown__user"],[3,"user","modifier"],[1,"cu-points-estimates-dropdown__user-name"],[3,"points","availablePoints","task","user","showAllOption","onPointsEstimatesAction"],[3,"group","avatarSize","bordered"],[3,"points","availablePoints","task","group","showAllOption","onPointsEstimatesAction"],[1,"cu-points-estimates-dropdown__row-label"],s,[3,"points","availablePoints","task","user","group","showAllOption","onPointsEstimatesAction"],["singlePointsEstimates",""],a,[4,"ngIf"],["href","https://docs.clickup.com/en/articles/4264202-sprint-points-clickapp","target","_blank",1,"ignore-click-out",3,"click"],c,["target","_blank",1,"ignore-click-out",3,"routerLink","click"]]},template:function(e,t){1&e&&(c.Cc(),c.cc(0,"div",0,1),c.qc("dropdownClose",function(){return t.closed()})("dropdownOpen",function(){return t.opened()}),c.cc(2,"div",2,3),c.Bc(4),c.bc(),c.bd(5,C,19,8,"div",4),c.bc(),c.bd(6,S,6,1,"ng-template",null,5,c.cd)),2&e&&c.Dc("ngClass",t.modifier)("dropdownCloseOnInsideClick",!1)("dropdownDisabled",t.readonly)("dropdownFromPoint",t.fromPoint)("dropdownCloseOnModal",!0)},directives:[r.b,l.o,d.a,u.a,m.a,p.c,l.q,l.p,h.a,f.a,b.a,g.k],pipes:[_.a],styles:[".cu-points-estimates-dropdown__menu{width:300px}.cu-points-estimates-dropdown__subtitle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;padding:20px 15px 0;color:#7c828d}.dark-theme .cu-points-estimates-dropdown__subtitle{color:#b9bec7}.cu-points-estimates-dropdown__row{display:flex;align-items:center;justify-content:space-between;padding:15px 15px 0}.cu-points-estimates-dropdown__row-title{display:flex;align-items:center;font:500 15px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-points-estimates-dropdown__row-title{color:#d5d6d7}.cu-points-estimates-dropdown__row-title .help-question-mark{width:18px;height:18px;margin-left:5px}.cu-points-estimates-dropdown__row-title .help-question-mark use{fill:#b9bec7}.dark-theme .cu-points-estimates-dropdown__row-title .help-question-mark use{fill:#7c828d}.cu-points-estimates-dropdown__row-label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-points-estimates-dropdown__row-label{color:#d5d6d7}.cu-points-estimates-dropdown__row-container{margin-left:10px}.cu-points-estimates-dropdown__hidden{visibility:hidden}.cu-points-estimates-dropdown__footer{display:flex;align-items:center;justify-content:space-between;margin:18px 0 0;padding:10px 15px;border-top:1px solid #e9ebf0}.dark-theme .cu-points-estimates-dropdown__footer{border-top-color:#1e272e}.cu-points-estimates-dropdown__footer-btn{width:100px}.cu-points-estimates-dropdown__footer-rolled-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:uppercase;font:600 10px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;margin-bottom:6px;color:#b9bec7}.dark-theme .cu-points-estimates-dropdown__footer-rolled-title{color:#7c828d}.cu-points-estimates-dropdown__footer-rolled-value{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;display:inline;color:#7c828d}.dark-theme .cu-points-estimates-dropdown__footer-rolled-value{color:#abaeb0}.cu-points-estimates-dropdown__footer-rolled-value span{font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-points-estimates-dropdown__footer-rolled-value span{color:#d5d6d7}.cu-points-estimates-dropdown__user{display:flex;align-items:center;margin-right:10px;min-width:0}.cu-points-estimates-dropdown__user-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:10px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-points-estimates-dropdown__user-name{color:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})()},KJAg:function(e,t,i){"use strict";e.exports=function(e,t,i,o){for(var n,s,c=e.length,a=-1;++a<c;)if((void 0===(s=(n=e[a])[1]||{}).pedantic||s.pedantic===i.options.pedantic)&&(void 0===s.commonmark||s.commonmark===i.options.commonmark)&&t[n[0]].apply(i,o))return!0;return!1}},KX5q:function(e,t,i){"use strict";var o=i("RsFJ"),n=i("IPAr"),s=i("BjVE");function c(e,t,i){var s,c,a,r,l,d,u,m=0,p=t.charAt(m);if(!("*"!==p&&"_"!==p||t.charAt(++m)!==p||(l=(a=p)+a,d=t.length,m++,r="",p="",(c=this.options.pedantic)&&n(t.charAt(m)))))for(;m<d;){if(u=p,!((p=t.charAt(m))!==a||t.charAt(m+1)!==a||c&&n(u))&&(p=t.charAt(m+2))!==a){if(!o(r))return;return!!i||((s=e.now()).column+=2,s.offset+=2,e(l+r+l)({type:"strong",children:this.tokenizeInline(r,s)}))}c||"\\"!==p||(r+=p,p=t.charAt(++m)),r+=p,m++}}e.exports=c,c.locator=s},KX9h:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("nLWA"),n=i("xZEF"),s=i("fXoL");let c=(()=>{class e{transform(e,t=o.a,i=!1,s=!1,c=!1,a=!1){return t=t||o.a,Object(n.a)(e,t,i,s,c,a)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Vb({name:"timeTracked",type:e,pure:!0}),e})()},KXpV:function(e,t,i){e.exports=i.p+"automation.346d47b1b40a4c827794.png"},KbVY:function(e,t,i){"use strict";i.d(t,"a",function(){return D});var o=i("GXRk"),n=i("fXoL"),s=i("jJQC"),c=i("XNiG"),a=i("Kj3r"),r=i("1G5W"),l=i("/qOb"),d=i("c3rA");function u(e,t){if(!e)return[];let i=[],n=[],s=[];const c=[];return e.forEach(e=>{e.type!==o.g.Open&&e.type!==o.g.Unstarted||i.push(e),e.type===o.g.Custom&&n.push(e),e.type===o.g.Done&&s.push(e),e.type===o.g.Closed&&c.push(e)}),t?(i.length&&(i=[{status:$localize`:@@util_group-by-stats--not-started:NOT STARTED`,type:"placeholder"}].concat(i)),n.length&&(n=[{status:$localize`:@@util_group-by-stats--active:ACTIVE`,type:"placeholder"}].concat(n)),s.length&&(s=[{status:$localize`:@@util_group-by-stats--done:DONE`,type:"placeholder"}].concat(s)),[...i,...n,...s,...c]):[...i,...n,...s,...c]}var m=i("l7P3"),p=i("ofXK"),h=i("bFKe"),f=i("UdVN"),b=i("3Pt+"),g=i("NsZK"),_=i("sl2P"),v=i("ahJy");const k=["searchInput"];function y(e,t){1&e&&(n.cc(0,"div"),n.cc(1,"div",6),n.Xb(2,"div",7),n.cc(3,"div",8),n.gc(4,9),n.bc(),n.bc(),n.bc()),2&e&&(n.Ib(2),n.Dc("icon","exclamation3"))}function w(e,t){if(1&e){const e=n.dc();n.cc(0,"div",10),n.cc(1,"input",11,12),n.qc("ngModelChange",function(t){return n.Uc(e),n.uc().searchString=t})("ngModelChange",function(t){return n.Uc(e),n.uc().debounceSearch$.next(t)}),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("ngModel",e.searchString)}}function x(e,t){1&e&&(n.cc(0,"div",13),n.gc(1,14),n.bc())}function I(e,t){1&e&&n.Xb(0,"div",18)}const T=function(e){return{color:e}};function C(e,t){if(1&e){const e=n.dc();n.cc(0,"div",15),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc().changeStatus(i)}),n.vc(1,"isColorDarkerThan"),n.vc(2,"isLightColor"),n.vc(3,"async"),n.cc(4,"div",16),n.dd(5),n.bc(),n.bd(6,I,1,0,"div",17),n.bc()}if(2&e){const e=t.$implicit,i=t.last,o=n.uc();let s=null;n.Ob("lv-task__status_light_dropdown",!n.xc(1,23,null==e?null:e.color,.86))("status-list__item_closed",e.type===o.StatusTypes.Closed)("status-list__item_open",e.type===o.StatusTypes.Open)("status-list__item_light",n.xc(2,26,null==e?null:e.color,215))("read-only",o.readOnly)("status-list__item_highlighted",(null==o.highlightedStatus?null:o.highlightedStatus.status)===e.status)("status-list__item_custom-type",(null==(s=n.wc(3,29,o.projectFeatures$))||null==s.milestones?null:s.milestones.enabled)&&o.hasCustomType)("status-list__item_placeholder","placeholder"===e.type)("status-list__item_last",i),n.Dc("ngStyle",n.Hc(31,T,e.color)),n.Ib(4),n.Ob("status-list__status_checked",e.status===(null==o.activeStatus?null:o.activeStatus.status)),n.Ib(1),n.fd(" ",e.status," "),n.Ib(1),n.Dc("ngIf",e.type===o.StatusTypes.Done)}}let D=(()=>{class e{constructor(e,t){this.cdr=e,this.store=t,this.StatusTypes=o.g,this.statuses=[],this.readOnly=!1,this.displaySharedWarning=!1,this.showSearch=!0,this.autoFocus=!1,this.hasCustomType=!1,this.groupByStatusType=!1,this.onChange=new n.o,this.projectFeatures$=this.store.select(d.getProjectFeatures),this.searchString="",this.filteredStatuses=[],this.searching=!1,this.debounceSearch$=new c.a,this.destroy$=new c.a,this.trackByStatus=Object(s.d)("status")}onKeyDown(e){switch(e.which){case l.a.ENTER:this.highlightedStatus&&this.onChange.emit(this.highlightedStatus);break;case l.a.ARROW_UP:this.traverseStatuses("up");break;case l.a.ARROW_DOWN:this.traverseStatuses("down")}}ngOnChanges(e){e.statuses&&this.groupByStatusType&&(this.statuses=u(this.statuses,!0))}ngOnInit(){this.debounceSearch$.pipe(Object(a.a)(100)).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{this.search(e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngAfterViewInit(){this.autoFocus&&this.focusInput()}changeStatus(e){e&&"placeholder"!==e.type&&this.onChange.emit(e)}search(e){if(this.highlightedStatus=null,""===e)return void this.resetSearch(!0);let t;if(this.searching=!0,t=this.groupByStatusType?({status:t})=>"placeholder"===t.type||t.toLowerCase().includes(e.toLowerCase()):({status:t})=>t.toLowerCase().includes(e.toLowerCase()),this.filteredStatuses=this.groupByStatusType?u(this.statuses.filter(t),!0):this.statuses.filter(t),this.filteredStatuses&&this.filteredStatuses.length)for(let i=0;i<this.filteredStatuses.length;i++)if("placeholder"!==this.filteredStatuses[i].type){this.highlightedStatus=this.filteredStatuses[i];break}this.cdr.detectChanges()}resetSearch(e){this.searchString="",this.searching=!1,this.filteredStatuses=[],e&&this.cdr.detectChanges(),this.highlightedStatus=null}focusInput(){this.searchInput&&setTimeout(()=>{this.searchInput.nativeElement.focus()})}traverseStatuses(e){if(!this.statuses||!this.statuses.length)return;if(this.searching&&(!this.filteredStatuses||!this.filteredStatuses.length))return;const t=this.searching?this.filteredStatuses:this.statuses,i=this.highlightedStatus?t.findIndex(e=>e.status===this.highlightedStatus.status):0;if(-1!==i)if("up"===e){let e=i-1;(!this.highlightedStatus||this.highlightedStatus.status===t[0].status||this.groupByStatusType&&this.highlightedStatus.status===t[1].status)&&(e=t.length-1);for(let i=e;i>=0;i--)if("placeholder"!==t[i].type){this.highlightedStatus=t[i];break}}else if("down"===e){let e=i+1;this.highlightedStatus&&this.highlightedStatus.status!==t[t.length-1].status||(e=0);for(let i=e;i<t.length;i++)if("placeholder"!==t[i].type){this.highlightedStatus=t[i];break}}}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.h),n.Wb(m.Store))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-status-list"]],viewQuery:function(e,t){if(1&e&&n.jd(k,1),2&e){let e;n.Qc(e=n.rc())&&(t.searchInput=e.first)}},hostBindings:function(e,t){1&e&&n.qc("keydown",function(e){return t.onKeyDown(e)},!1,n.Sc)},inputs:{activeStatus:"activeStatus",statuses:"statuses",readOnly:"readOnly",displaySharedWarning:"displaySharedWarning",showSearch:"showSearch",autoFocus:"autoFocus",hasCustomType:"hasCustomType",groupByStatusType:"groupByStatusType"},outputs:{onChange:"onChange"},features:[n.Gb],decls:6,vars:7,consts:function(){let e,t,i,o;return e=$localize`:@@cu-status-list__visible-statuses␟81a8843a02c741eaea6192aad83d3579877adf94␟3330554722474436898: Only showing statuses shared between all tasks you selected `,t=$localize`:@@common_search-1␟8aa58cf00d949c509df91c621ab38131df0a7599␟8854094932942190741:Search...`,i=$localize`:@@common_no-results␟ffa4fabc9110d586d0a0736d9d7c5babc74f8ce7␟1794776014057222353: No results `,o=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,[[1,"status-list"],[4,"ngIf"],["class","status-list__search",4,"ngIf"],[1,"status-list__container",3,"perfectScrollbar"],["class","status-list__no-results",4,"ngIf"],["class","status-list__item",3,"ngStyle","lv-task__status_light_dropdown","status-list__item_closed","status-list__item_open","status-list__item_light","read-only","status-list__item_highlighted","status-list__item_custom-type","status-list__item_placeholder","status-list__item_last","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"status-list__warning"],[1,"status-list__warning-icon",3,"icon"],[1,"status-list__warning-text"],e,[1,"status-list__search"],["placeholder",t,3,"ngModel","ngModelChange"],["searchInput",""],[1,"status-list__no-results"],i,[1,"status-list__item",3,"ngStyle","click"],[1,"status-list__status"],["class","status-list__status-done","icon","status-done-empty","cuTooltip",o,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done-empty","cuTooltip",o,"tooltipLifeTime","15000",1,"status-list__status-done"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.bd(1,y,5,1,"div",1),n.bd(2,w,3,1,"div",2),n.cc(3,"div",3),n.bd(4,x,2,0,"div",4),n.bd(5,C,7,33,"div",5),n.bc(),n.bc()),2&e&&(n.Ib(1),n.Dc("ngIf",t.displaySharedWarning),n.Ib(1),n.Dc("ngIf",t.showSearch),n.Ib(1),n.Ob("status-list__container-searching",t.searching),n.Ib(1),n.Dc("ngIf",t.searching&&!t.filteredStatuses.length),n.Ib(1),n.Dc("ngForOf",t.searching?t.filteredStatuses:t.statuses)("ngForTrackBy",t.trackByStatus))},directives:[p.q,h.a,p.p,f.a,b.c,b.p,b.s,p.t,g.a],pipes:[_.a,v.a,p.b],encapsulation:2,changeDetection:0}),e})()},KiTX:function(e,t,i){"use strict";i.d(t,"a",function(){return D});var o=i("c3rA"),n=i("lJxs"),s=i("pLZG"),c=i("eIep"),a=i("1G5W"),r=i("Kj3r"),l=i("XNiG"),d=i("2Vo4"),u=i("RtrR"),m=i("fXoL"),p=i("YwDF"),h=i("l7P3"),f=i("8it8"),b=i("LdyQ"),g=i("ofXK"),_=i("MJvn"),v=i("NsZK"),k=i("UdVN"),y=i("n+1/"),w=i("SjmV");const x=["dropdown"];function I(e,t){if(1&e&&(m.cc(0,"div",9),m.dd(1),m.bc()),2&e){const e=m.uc();m.Ib(1),m.fd(" ",e.missingRequired," ")}}function T(e,t){if(1&e&&(m.cc(0,"div",10),m.dd(1),m.vc(2,"async"),m.bc()),2&e){const e=m.uc();m.Ib(1),m.fd(" ",m.wc(2,1,e.customFieldsSet$)," ")}}function C(e,t){if(1&e){const e=m.dc();m.cc(0,"div",11),m.cc(1,"cu-task-custom-fields",12),m.qc("updateCustomFieldValue",function(t){return m.Uc(e),m.uc().updateCustomFieldValue.emit(t)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.bc(),m.bc()}if(2&e){const e=m.uc();let t=null;m.Ib(1),m.Dc("permissions",e.permissions||(null==(t=m.wc(2,10,e.subWithPermissions$))?null:t.permissions))("disconnected",m.wc(3,12,e.disconnected$))("customFields",e.customFields)("subcategory",e.subcategory)("closeOthers",!1)("forSubtask",e.forSubtask)("members",e.members)("showMissingRequired",!0)("showFooter",e.showFooter)("team",m.wc(4,14,e.team$))}}let D=(()=>{class e{constructor(e,t){this.store=e,this.commonStringsService=t,this.disconnected$=this.store.select(u.b),this.debounceMissing$=new l.a,this.modifier="",this.showMissingRequired=!1,this.forSubtask=!1,this.customFields=[],this.dropdownPoint=null,this.showFooter=!0,this.subcategory$=new d.a(null),this.customFields$=new d.a(this.customFields),this.destroy$=new l.a,this.customFieldsSet$=this.customFields$.pipe(Object(n.a)(e=>(e||[]).filter(e=>!!e.value&&(e.type!==p.a.Users||e.type===p.a.Users&&!Object(p.b)(e.value))).length)),this.subWithPermissions$=this.subcategory$.pipe(Object(s.a)(e=>!!e),Object(c.a)(e=>this.store.select(Object(o.findSubcategoryByIdInAllProjects)(e.id)))),this.team$=this.store.select(o.getTeam),this.onClose=new m.o,this.onOpen=new m.o,this.setMissingRequiredFields=new m.o,this.updateCustomFieldValue=new m.o,this.customFields$.pipe(Object(n.a)(e=>{const t=this.forSubtask?"required_on_subtasks":"required";return(e||[]).reduce((e,i)=>(i[t]&&(!i.value||i.type===p.a.Users&&Object(p.b)(i.value))&&(e[i.id]=!0),e),{})}),Object(a.a)(this.destroy$)).subscribe(e=>{this.setMissingRequiredFields.emit(e)}),this.debounceMissing$.pipe(Object(r.a)(100),Object(a.a)(this.destroy$)).subscribe(e=>{this.customFields$.next(e)})}get customFieldsTooltipText(){return this.missingRequired?$localize`:@@cu-task-custom-fields-dropdown__tooltip-msg_missing-cf-count:Custom Fields (${this.missingRequired}:missingRequiredCount: required)`:this.commonStringsService.customFieldsText}ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){e.customFields&&this.debounceMissing$.next(this.customFields),e.subcategory&&this.subcategory$.next(this.subcategory)}}return e.\u0275fac=function(t){return new(t||e)(m.Wb(h.Store),m.Wb(f.a))},e.\u0275cmp=m.Qb({type:e,selectors:[["cu-task-custom-fields-dropdown"]],viewQuery:function(e,t){if(1&e&&m.jd(x,3),2&e){let e;m.Qc(e=m.rc())&&(t.dropdown=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&m.Ob("cu-task-custom-fields-dropdown",!0)},inputs:{modifier:"modifier",showMissingRequired:"showMissingRequired",forSubtask:"forSubtask",missingRequiredMap:"missingRequiredMap",missingRequired:"missingRequired",permissions:"permissions",members:"members",subcategory:"subcategory",customFields:"customFields",dropdownPoint:"dropdownPoint",showFooter:"showFooter"},outputs:{onClose:"onClose",onOpen:"onOpen",setMissingRequiredFields:"setMissingRequiredFields",updateCustomFieldValue:"updateCustomFieldValue"},features:[m.Gb],decls:11,vars:13,consts:[["cuDropdown","",3,"ngClass","dropdownCloseOnInsideClick","dropdownCloseOnModal","dropdownFromPoint","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-task-custom-fields-dropdown__icon-container",3,"cuTooltip"],[1,"cu-task-custom-fields-dropdown__icon-wrap"],["icon","edit-custom-fields",1,"cu-task-custom-fields-dropdown__icon"],["class","cu-task-custom-fields-dropdown__missing",4,"ngIf"],["class","cu-task-custom-fields-dropdown__set",4,"ngIf"],["class","cu-task-custom-fields-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-task-custom-fields-dropdown__missing"],[1,"cu-task-custom-fields-dropdown__set"],[1,"cu-task-custom-fields-dropdown__menu"],[3,"permissions","disconnected","customFields","subcategory","closeOthers","forSubtask","members","showMissingRequired","showFooter","team","updateCustomFieldValue"]],template:function(e,t){1&e&&(m.cc(0,"div",0,1),m.qc("dropdownClose",function(){return t.onClose.emit()})("dropdownOpen",function(){return t.onOpen.emit()}),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"div",4),m.vc(5,"async"),m.Xb(6,"div",5),m.bd(7,I,2,1,"div",6),m.bc(),m.bd(8,T,3,3,"div",7),m.vc(9,"async"),m.bc(),m.bc(),m.bd(10,C,5,16,"div",8),m.bc()),2&e&&(m.Dc("ngClass",t.modifier)("dropdownCloseOnInsideClick",!1)("dropdownCloseOnModal",!0)("dropdownFromPoint",t.dropdownPoint),m.Ib(3),m.Dc("cuTooltip",t.customFieldsTooltipText),m.Ib(1),m.Ob("cu-task-custom-fields-dropdown__icon-wrap_set",m.wc(5,9,t.customFieldsSet$)),m.Ib(3),m.Dc("ngIf",!!t.missingRequired),m.Ib(1),m.Dc("ngIf",m.wc(9,11,t.customFieldsSet$)))},directives:[b.b,g.o,_.a,v.a,k.a,g.q,y.a,w.a],pipes:[g.b],styles:['.cu-task-custom-fields-dropdown_quick-create-task-panel{margin-right:10px}.cu-task-custom-fields-dropdown__icon{margin-top:-2px;margin-right:-2px;width:16px;height:16px;fill:#b9bec7}.dark-theme .cu-task-custom-fields-dropdown__icon{fill:#979797}.cu-task-custom-fields-dropdown__icon-container{display:flex;align-items:center}.cu-task-custom-fields-dropdown__icon-wrap{display:flex;align-items:center;justify-content:center;position:relative;width:26px;height:26px;border-radius:50%;border:.6px dashed #b9bec7}.dark-theme .cu-task-custom-fields-dropdown__icon-wrap{border-color:#979797}.cu-task-custom-fields-dropdown__icon-wrap:hover{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields-dropdown__icon-wrap:hover{border-color:var(--theme-main-color)}}.cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:var(--theme-main-color)}}.dark-theme .cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:var(--theme-main-color)}}.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap{width:30px;height:30px}.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover:before{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover:before{border-color:var(--theme-main-color)}}.dark-theme .cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover:before{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover:before{border-color:var(--theme-main-color)}}.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:var(--theme-main-color)}}.dark-theme .cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:hover .cu-task-custom-fields-dropdown__icon{fill:var(--theme-main-color)}}.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:before{content:"";display:block;position:absolute;width:30px;height:30px;border-radius:50%;border:.6px dashed #7c828d;top:0;left:0}.dark-theme .cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap:before{border-color:#979797}.cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap .cu-task-custom-fields-dropdown__icon{fill:#7c828d}.dark-theme .cu-task-custom-fields-dropdown_quick-create-task-panel .cu-task-custom-fields-dropdown__icon-wrap .cu-task-custom-fields-dropdown__icon{fill:#979797}.cu-task-custom-fields-dropdown__icon-wrap_set{border:transparent}.cu-task-custom-fields-dropdown__icon-wrap_set .cu-task-custom-fields-dropdown__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields-dropdown__icon-wrap_set .cu-task-custom-fields-dropdown__icon{fill:var(--theme-main-color)}}.cu-task-custom-fields-dropdown__icon-wrap_set .cu-task-custom-fields-dropdown__missing{right:10px;top:-4px}.cu-panel-board__footer_left .cu-task-custom-fields-dropdown__icon-wrap{border:transparent}.cu-task-custom-fields-dropdown__set{color:#7b68ee;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-left:-1px;margin-right:3px}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields-dropdown__set{color:var(--theme-main-color)}}.cu-task-custom-fields-dropdown__menu{width:500px}.cu-task-custom-fields-dropdown__missing{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 9px/1 Gotham Pro,Proxima Nova,arial,serif;position:absolute;right:-5px;top:-5px;color:#fff;background-color:#d35d5a;border-radius:8px;padding:2px 4px 1px;min-width:18px;text-align:center;border:2px solid #fff}.dark-theme .cu-task-custom-fields-dropdown__missing{border-color:#2b343b}'],encapsulation:2,changeDetection:0}),e})()},"KqN+":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("fXoL"),n=i("3Pt+"),s=i("6/Td");const c={provide:n.n,useExisting:Object(o.Z)(()=>a),multi:!0};let a=(()=>{class e{validate(e){return n.A.required(e)?null:s.a.url(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Rb({type:e,selectors:[["","cuUrlFormControl","","formControlName",""],["","cuUrlFormControl","","formControl",""],["","cuUrlFormControl","","ngModel",""]],features:[o.Hb([c])]}),e})()},KsAU:function(e,t,i){e.exports=i.p+"time-tracking-v2.5e04a6ef16ea8d80c4cb.png"},Llk8:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var o=i("GXRk"),n=i("fXoL"),s=i("LdyQ"),c=i("jJW4"),a=i("ofXK"),r=i("MJvn"),l=i("loh9"),d=i("n+1/"),u=i("UdVN"),m=i("NsZK"),p=i("KbVY"),h=i("nm3x"),f=i("sl2P"),b=i("ahJy");const g=["statusList"];function _(e,t){1&e&&n.Xb(0,"div",9)}function v(e,t){if(1&e&&(n.cc(0,"div",10),n.vc(1,"uppercase"),n.dd(2),n.bc()),2&e){const e=n.uc(2);n.Dc("cuTooltip",n.wc(1,3,null==e.status?null:e.status.status))("tooltipDisabledIfTextNotTruncated",!0),n.Ib(2),n.fd(" ",null==e.status?null:e.status.status," ")}}function k(e,t){if(1&e){const e=n.dc();n.cc(0,"div",15),n.qc("click",function(t){return n.Uc(e),n.uc(3).clickSettings(t)}),n.bc()}}const y=function(){return[]};function w(e,t){if(1&e){const e=n.dc();n.cc(0,"div",11),n.cc(1,"cu-status-list",12,13),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).selectStatus(t)}),n.vc(3,"async"),n.bc(),n.bd(4,k,1,0,"div",14),n.bc()}if(2&e){const e=n.uc(2);let t=null;n.Ib(1),n.Dc("activeStatus",e.status)("statuses",e.statuses&&e.statuses.length?e.statuses:n.Gc(7,y))("hasCustomType",e.hasCustomType)("groupByStatusType",null==(t=n.wc(3,5,e.sharedData.compatCurrentTeam$))?null:t.unstarted_status_group),n.Ib(3),n.Dc("ngIf",e.showSettings)}}const x=function(e,t){return{color:e,background:t}};function I(e,t){if(1&e){const e=n.dc();n.cc(0,"div",3,4),n.qc("dropdownOpen",function(){n.Uc(e);const t=n.uc();return t.onLoad.emit(),t.onDropdownOpen.emit(),null==t.statusList?null:t.statusList.focusInput()})("dropdownClose",function(){n.Uc(e);const t=n.uc();return t.onDropdownClose.emit(),null==t.statusList?null:t.statusList.resetSearch(!1)}),n.cc(2,"div",5),n.vc(3,"isColorDarkerThan"),n.vc(4,"isLightColor"),n.bd(5,_,1,0,"div",6),n.bd(6,v,3,5,"div",7),n.bc(),n.bd(7,w,5,8,"div",8),n.bc()}if(2&e){const e=n.uc();n.Dc("dropdownDisabled",e.disabled)("dropdownRepositionFlag",e.statuses)("dropdownCloseOnInsideClick",!1),n.Ib(2),n.Ob("cu-task-row-status__item_dark",n.xc(3,14,(null==e.status?null:e.status.color)||(null==e.status?null:e.status.colors)&&(null==e.status?null:e.status.colors[0]),.2))("cu-task-row-status__item_light",n.xc(4,17,(null==e.status?null:e.status.color)||(null==e.status?null:e.status.colors)&&(null==e.status?null:e.status.colors[0]),200))("cu-task-row-status__custom-type",e.hasCustomType)("cu-task-row-status__item_disabled",e.disabled),n.Dc("ngStyle",n.Ic(20,x,(null==e.status?null:e.status.color)||(null==e.status?null:e.status.colors)&&(null==e.status?null:e.status.colors[0]),e.colorBackground?(null==e.status?null:e.status.color)||(null==e.status?null:e.status.colors)&&(null==e.status?null:e.status.colors[0]):null)),n.Ib(3),n.Dc("ngIf",e.showCheckmark&&!(e.isSimpleStatus||e.parentIsSimpleStatus)),n.Ib(1),n.Dc("ngIf",e.showText&&!e.showCheckmark)}}const T=function(e){return{"cu-task-row-status__done-btn_active":e}};function C(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-sparks",16),n.cc(1,"div",17),n.qc("click",function(){return n.Uc(e),n.uc().toggleStatus()}),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Dc("cuColors",!0)("disabled",(null==e.status?null:e.status.type)===e.StatusTypes.Closed||e.disabled),n.Ib(1),n.Dc("ngClass",n.Hc(3,T,(null==e.status?null:e.status.type)===e.StatusTypes.Closed))}}const D=function(e){return{background:e}};function O(e,t){if(1&e){const e=n.dc();n.cc(0,"div",18),n.qc("click",function(){return n.Uc(e),n.uc().toggleStatus()}),n.cc(1,"div",19),n.dd(2),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Dc("ngStyle",n.Hc(2,D,(null==e.status?null:e.status.color)||(null==e.status?null:e.status.colors)&&(null==e.status?null:e.status.colors[0]))),n.Ib(2),n.ed(null==e.status?null:e.status.status)}}let S=(()=>{class e{constructor(e){this.sharedData=e,this.disabled=!1,this.taskView=!1,this.showText=!1,this.customType=!1,this.itemClass="cu-task-row-status__item_dot",this.showSettings=!1,this.showCheckmark=!1,this.colorBackground=!1,this.hasCustomType=!1,this.isSubtask=!1,this.onChange=new n.o,this.onToggle=new n.o,this.onLoad=new n.o,this.onOpenSettings=new n.o,this.onDropdownOpen=new n.o,this.onDropdownClose=new n.o,this.StatusTypes=o.g}ngOnInit(){}clickSettings(e){this.onOpenSettings.emit(),this.dropdown&&this.dropdown.isOpen&&this.dropdown.close()}toggleStatus(){this.disabled||this.onToggle.emit()}selectStatus(e){this.onChange.emit(e),this.dropdown&&this.dropdown.isOpen&&this.dropdown.close()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(c.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-row-status"]],viewQuery:function(e,t){if(1&e&&(n.jd(g,1),n.jd(s.b,1)),2&e){let e;n.Qc(e=n.rc())&&(t.statusList=e.first),n.Qc(e=n.rc())&&(t.dropdown=e.first)}},hostVars:10,hostBindings:function(e,t){2&e&&(n.Lb(t.itemClass),n.Ob("cu-task-row-status",!0)("cu-task-row-status__custom-type-container",t.customType)("cu-task-row-status_task-view",t.taskView)("cu-task-row-status_sub-simple",t.isSubtask&&t.isSimpleStatus))},inputs:{status:"status",statuses:"statuses",isSimpleStatus:"isSimpleStatus",disabled:"disabled",taskView:"taskView",showText:"showText",customType:"customType",itemClass:"itemClass",showSettings:"showSettings",parentIsSimpleStatus:"parentIsSimpleStatus",showCheckmark:"showCheckmark",colorBackground:"colorBackground",hasCustomType:"hasCustomType",isSubtask:"isSubtask"},outputs:{onChange:"onChange",onToggle:"onToggle",onLoad:"onLoad",onOpenSettings:"onOpenSettings",onDropdownOpen:"onDropdownOpen",onDropdownClose:"onDropdownClose"},decls:3,vars:3,consts:function(){let e,t;return e=$localize`:@@common_set-status␟b5efe1a1d9ef9cb247f72cff4157a3c967d7fb54␟7698210372236167648:Set Status`,t=$localize`:@@common_add-edit-statuses␟e004a171a05ea51c6570c52be80103e320a4b184␟4179116217858523980:Add/Edit Statuses`,[["cuDropdown","",3,"dropdownDisabled","dropdownRepositionFlag","dropdownCloseOnInsideClick","dropdownOpen","dropdownClose",4,"ngIf"],[3,"cuColors","disabled",4,"ngIf"],["class","cu-task-row-status__item cu-task-row-status__item-simple-full","cuPreventDefault","",3,"ngStyle","click",4,"ngIf"],["cuDropdown","",3,"dropdownDisabled","dropdownRepositionFlag","dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle","","tooltipMargin","10","cuPreventDefault","",1,"cu-task-row-status__item",3,"ngStyle"],["class","cu-task-row-status__checkmark-btn","icon","check","cuTooltip",e,"tooltipDelay","500","tooltipModifier","tooltip_near",4,"ngIf"],["class","cu-task-row-status__item-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated",4,"ngIf"],["class","cu-dropdown__menu cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],["icon","check","cuTooltip",e,"tooltipDelay","500","tooltipModifier","tooltip_near",1,"cu-task-row-status__checkmark-btn"],[1,"cu-task-row-status__item-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-dropdown__menu","cu-dropdown__menu_overflow-hidden"],[3,"activeStatus","statuses","hasCustomType","groupByStatusType","onChange"],["statusList",""],["class","cu-task-row-status__settings","icon","cog","cuTooltip",t,3,"click",4,"ngIf"],["icon","cog","cuTooltip",t,1,"cu-task-row-status__settings",3,"click"],[3,"cuColors","disabled"],["icon","check","cuPreventDefault","",1,"cu-task-row-status__done-btn",3,"ngClass","click"],["cuPreventDefault","",1,"cu-task-row-status__item","cu-task-row-status__item-simple-full",3,"ngStyle","click"],[1,"cu-task-row-status__item-name"]]},template:function(e,t){1&e&&(n.bd(0,I,8,23,"div",0),n.bd(1,C,2,5,"cu-sparks",1),n.bd(2,O,3,4,"div",2)),2&e&&(n.Dc("ngIf",t.hasCustomType||!t.isSimpleStatus&&!t.parentIsSimpleStatus),n.Ib(1),n.Dc("ngIf",!t.hasCustomType&&(t.isSimpleStatus||t.parentIsSimpleStatus)&&!t.colorBackground),n.Ib(1),n.Dc("ngIf",!t.hasCustomType&&(t.isSimpleStatus||t.parentIsSimpleStatus)&&t.colorBackground))},directives:[a.q,s.b,r.a,l.a,a.t,d.a,u.a,m.a,p.a,h.a,a.o],pipes:[f.a,b.a,a.B,a.b],styles:['.cu-task-row-status .cu-dropdown,.cu-task-row-status cu-status-list{height:100%;width:100%}.cu-task-row-status .cu-dropdown__toggle{height:100%;display:flex;align-items:center}.cu-task-row-status_task-view{position:absolute;margin:14px 0 0 30px}.cu-task-row-status__custom-type-container{display:inline-block}.cu-task-row-status__custom-type-container.cu-task-row-status_dot .cu-task-row-status__item{margin:0 5px 0 0;height:12px}.cu-task-row-status_simple{align-self:center;margin:0 10px}.cu-task-row-status_simple.cu-task-row-status_simple_no-pointer{pointer-events:none}.cu-task-row-status_dot{align-self:stretch}.cu-task-row-status_dot.cu-task-row-status_sub-simple{align-self:unset}.cu-task-row-status_dot .cu-task-row-status__item{position:relative;margin:0 11px;width:14px;height:14px;border-radius:3px;border:1px solid transparent;transition:.1s;cursor:pointer;color:transparent}.cu-task-row-status_dot .cu-task-row-status__item_disabled{pointer-events:none}.cu-task-row-status_dot .cu-task-row-status__item:after{content:"";display:block;position:absolute;top:2px;left:2px;width:8px;height:8px;border-radius:2px;background:currentColor;transition:.1s}.cu-task-row-status_dot .cu-task-row-status__item:hover{border:1px solid}.cu-task-row-status_dot .cu-task-row-status__item_light:hover{border:1px solid #d3d3d3}.cu-task-row-status_dot .cu-task-row-status__item_light:after{box-shadow:0 0 1px 0 #828588}.cu-task-row-status_dot .cu-task-row-status__item.cu-task-row-status__custom-type{transform:rotate(45deg);border-radius:0}.cu-task-row-status_dot .cu-task-row-status__item.cu-task-row-status__custom-type:after{border-radius:2px;top:1px;left:1px;width:10px;height:10px}.task-name-block .cu-task-row-status_dot .cu-task-row-status__item.cu-task-row-status__custom-type:after{width:19px;height:19px;border-radius:3px}.cu-task-row-status_dot .cu-dropdown{display:flex;align-items:center}.cu-task-row-status_border{align-self:stretch;position:relative;display:flex;margin:-1px 0 -1px -1px}.cu-task-row-new_active .cu-task-row-status_border,.cu-task-row_selected .cu-task-row-status_border{margin:0}.cu-task-row-status_border:before{left:0;width:16px}.cu-task-row-status_border:after,.cu-task-row-status_border:before{position:absolute;top:0;content:"";display:block;height:100%;z-index:1}.cu-task-row-status_border:after{right:0;width:13px;background:#fff;pointer-events:none}.dark-theme .cu-task-row-status_border:after{background:#2b343b}.cu-task-row-status_border .cu-dropdown{transition:min-width .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;width:16px;min-width:16px;overflow:hidden;z-index:1}.cu-task-row-status_border .cu-dropdown:hover{transition:min-width .2s cubic-bezier(.785,.135,.15,.86) 0s;min-width:53px}.cdk-drop-list-dragging .cu-task-row-status_border .cu-dropdown:hover{min-width:16px}.cu-task-row-new_active .cu-task-row-status_border .cu-dropdown,.cu-task-row_selected .cu-task-row-status_border .cu-dropdown{margin:0;transition:none;width:15px;min-width:15px}.cu-task-row-status_border .cu-dropdown.cu-dropdown_open{transition:min-width .2s cubic-bezier(.785,.135,.15,.86) 0s;min-width:53px}.cu-task-row-status_border .cu-task-row-status__item{display:flex;align-items:center;justify-content:center;position:relative;width:53px;background:currentColor;padding-right:13px;align-self:stretch}.cu-task-row-status_border .cu-task-row-status__item:before{content:"";width:16px;height:16px;border-radius:2px;background:currentColor;filter:brightness(80%)}.cu-task-row-status_border .cu-task-row-status__item.cu-task-row-status__item_dark:before{filter:invert(20%)}.cu-task-row-status_col{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;margin:-1px 0}.cu-task-row-status_col:after{content:"";display:block;position:absolute;display:none;width:8px;height:100%;right:0;pointer-events:none;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff)}.dark-theme .cu-task-row-status_col:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b)}.cu-task-row-status_col .cu-task-row-status__item{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;flex-shrink:0;text-transform:uppercase;text-overflow:ellipsis;overflow:hidden;display:flex;justify-content:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-row-status_col .cu-task-row-status__item{font-family:var(--global-font-support)}}.cu-task-row-status_col .cu-task-row-status__item:hover{opacity:.8}.dark-theme .cu-task-row-status_col .cu-task-row-status__item:hover{opacity:.9}.cu-task-row-status_col .cu-task-row-status__item-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff;text-align:center;padding:0 5px;font-size:13px}.cu-task-row_auto-wrap .cu-task-row-status_col .cu-task-row-status__item-name{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;white-space:normal;overflow:visible;text-overflow:clip;padding-top:5px;padding-bottom:5px;text-align:center}.cu-task-row-status_col .cu-task-row-status__item_light .cu-task-row-status__item-name{color:#343434}.cu-task-row-status_col .cu-task-row-status__item-simple-full{align-items:center;height:100%;width:100%;cursor:pointer}.cu-task-row-status_badge{display:flex;align-items:center;justify-content:center;position:relative;margin:-1px 0}.cu-task-row-status_badge:after{content:"";display:block;position:absolute;display:none;width:8px;height:100%;right:0;pointer-events:none;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff)}.dark-theme .cu-task-row-status_badge:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b)}.cu-task-row-status_badge .cu-task-row-status__item,.cu-task-row-status_badge .cu-task-row-status__item-simple-full{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;flex-shrink:0;text-transform:uppercase;display:flex;justify-content:center;align-items:center;padding:0 12px;border-radius:3px;height:22px;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-row-status_badge .cu-task-row-status__item,.cu-task-row-status_badge .cu-task-row-status__item-simple-full{font-family:var(--global-font-support)}}.cu-task-row-status_badge .cu-task-row-status__item-name,.cu-task-row-status_badge .cu-task-row-status__item-simple-full-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff;text-align:center}.cu-task-row-status_badge .cu-task-row-status__item-simple-full_light,.cu-task-row-status_badge .cu-task-row-status__item_light{box-shadow:0 0 1px 0 #828588}.cu-task-row-status_badge .cu-task-row-status__item-simple-full_light .cu-task-row-status__item-name,.cu-task-row-status_badge .cu-task-row-status__item_light .cu-task-row-status__item-name{color:#343434}.cu-task-row-status_checkmark{display:none}.cu-task-row:hover .cu-task-row-status_checkmark{display:block}.cu-task-row-status_checkmark .cu-task-row-status__checkmark-btn{transition:stroke .2s cubic-bezier(.785,.135,.15,.86) 0s;width:36px;height:36px;padding:9px;margin:0;stroke:#7c828d;stroke-width:1.2}.cu-task-row-status_checkmark .cu-task-row-status__checkmark-btn:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-row-status_checkmark .cu-task-row-status__checkmark-btn:hover{stroke:var(--theme-main-color)}}.cu-task-row-status_checkmark .cu-dropdown_open .cu-task-row-status__checkmark-btn{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-row-status_checkmark .cu-dropdown_open .cu-task-row-status__checkmark-btn{stroke:var(--theme-main-color)}}.cu-task-row-status__done-btn{flex-shrink:0;align-self:center;margin:0 10px 0 5px;width:20px;height:18px;padding:4px;stroke:#7c828d;stroke-width:2px;cursor:pointer;transition:.1s;z-index:10}.dark-theme .cu-task-row-status__done-btn{stroke:rgba(206,207,224,.5)}.cu-task-row-status__done-btn:hover,.cu-task-row-status__done-btn_active,.dark-theme .cu-task-row-status__done-btn_active{stroke:#67cb48}.cu-task-row-status__settings{position:absolute;right:5px;top:0;padding:10px;width:36px;height:36px;cursor:pointer}.cu-task-row-status__settings:hover use{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-task-row-status__settings:hover use{fill:var(--theme-main-color-dark)}}.cu-task-row-status__settings use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-row-status__settings use{fill:var(--theme-main-color)}}'],encapsulation:2,changeDetection:0}),e})()},LrKI:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("Gj5t");function n(e,t="space"){if(!e)return[];const i=e.project||{id:e.project_id,name:e.project_name},n={id:i.id,name:i.name,path:Object(o.fb)(e,"project")},s=Object.assign(Object.assign({},e.category),{path:Object(o.fb)(e,"category")}),c=Object.assign(Object.assign({},e.subcategory),{path:Object(o.fb)(e,"subcategory")});switch(t){case"space":return e.category&&e.category.hidden?[n,c]:[n,s,c];case"project":return e.category&&e.category.hidden?[c]:[s,c];case"list":return[c];default:return[]}}},M045:function(e,t,i){"use strict";i.d(t,"c",function(){return g}),i.d(t,"b",function(){return _}),i.d(t,"a",function(){return v});var o=i("fXoL"),n=i("dTHz"),s=i("jJQC"),c=i("XNiG"),a=i("o7Ov"),r=i("Jf2N"),l=i("AeD3"),d=i("l7P3"),u=i("ofXK"),m=i("mCrA"),p=i("Z4aC"),h=i("rjKe");function f(e,t){1&e&&o.Xb(0,"cu-user-item",20),2&e&&o.Dc("user",t.$implicit)("displayProfile",!1)}function b(e,t){if(1&e){const e=o.dc();o.cc(0,"div",21),o.cc(1,"div",22),o.ac(2),o.gc(3,23),o.Zb(),o.dd(4,": "),o.bc(),o.cc(5,"cu-radiobox",24),o.qc("onChange",function(){return o.Uc(e),o.uc().inviteTo="task"}),o.gc(6,25),o.bc(),o.cc(7,"cu-radiobox",24),o.qc("onChange",function(){return o.Uc(e),o.uc().inviteTo="subcategory"}),o.gc(8,26),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(5),o.Dc("checked","task"===e.inviteTo),o.Ib(2),o.Dc("checked","subcategory"===e.inviteTo)}}function g(e,t){return e.members.filter(e=>!t.some(t=>t.id===e.id))}function _(e,t){return e&&e.permissions&&e.permissions.share||t&&t.permissions&&t.permissions.share}let v=(()=>{class e{constructor(e,t,i,a){this.modal=e,this.dataService=t,this.store=i,this.cdr=a,this.onComplete=new o.o,this.selectedPermission=n.e.CREATE,this.loading=!1,this.trackById=Object(s.d)("id"),this.destroy$=new c.a}ngOnInit(){this.usersWithoutAccess=g(this.userGroup,this.usersWithAccess),this.canShareTask=this.task&&this.task.permissions&&this.task.permissions.share,this.inviteTo=this.canShareTask?"task":"subcategory"}ngOnDestroy(){this.destroy$.next()}closeModal(){this.onComplete.emit(),this.modal.close()}inviteTeam(){this.loading=!0,"task"===this.inviteTo?this.dataService.addTaskMembers(this.task.id,this.usersWithoutAccess.map(e=>e.id),this.selectedPermission).subscribe(()=>{this.closeModal()},()=>{this.loading=!1,this.cdr.markForCheck()}):this.dataService.addSubcategoryMembers(this.subcategory.id,this.usersWithoutAccess.map(e=>e.id),this.selectedPermission).subscribe(e=>{this.store.dispatch(new a.ne(this.subcategory.id)),this.store.dispatch(new a.pk(this.subcategory.id,this.subcategory.category,this.subcategory.project_id,"add",null,e.members)),this.closeModal()},()=>{this.loading=!1,this.cdr.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(r.a),o.Wb(l.a),o.Wb(d.Store),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-group-access-modal"]],hostAttrs:[1,"cu-user-group-access-modal"],inputs:{userGroup:"userGroup",usersWithAccess:"usersWithAccess",subcategory:"subcategory",task:"task"},outputs:{onComplete:"onComplete"},decls:21,vars:6,consts:function(){let e,t,i,o,n,s,c;return e=$localize`:@@cu-user-group-access-modal__title_some-has-no-list-access␟9a709a6a4c16a7adb24ac1a88411b7af819db51d␟9193736006449870675: Some members of this Team do not have access to this List
`,t=$localize`:@@cu-user-group-access-modal__team␟9539e59f0cc7460e90a0620cb97eafefb3e39628␟6993243391745730485: Team
`,i=$localize`:@@common_dont-notify␟a818b846a39ce6850ee195172a7874c982dac0ef␟737447574478918670: Don't notify `,o=$localize`:@@cu-user-group-access-modal__btn-txt_invite-team␟d47ae9512a88a8fa10ed11948c5d9afd290bb4e0␟4980737202845496579: Invite Team `,n=$localize`:@@cu-user-group-access-modal__invite-to␟25447768fcf95512d831c786d63f43066ffe1ad7␟2145145504848793955:Invite to`,s=$localize`:@@common_task␟793560109ad3e5ac98ff82eecc0f1af7d5b2079d␟7904689431210990740: Task `,c=$localize`:@@common_list␟aac30ddecf012060c1d5a8f55abe1aa28a11be37␟7147172320596202494: List `,[["src","./assets/images/illustrations/user-group.svg",1,"cu-user-group-access-modal__img"],[1,"cu-user-group-access-modal__title"],e,[1,"cu-user-group-access-modal__label"],t,[1,"cu-user-group-access-modal__name"],[1,"cu-user-group-access-modal__users"],[3,"user","displayProfile",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-user-group-access-modal__invite-to",4,"ngIf"],[1,"cu-user-group-access-modal__permission",3,"selectedPermission","changedOption"],[1,"cu-user-group-access-modal__buttons"],[1,"cu-btn","cu-btn_md","cu-btn_outline","cu-btn_font-size-15",3,"click"],i,[1,"cu-btn","cu-btn_md","cu-btn_font-size-15","cu-btn_spinner",3,"disabled","click"],[1,"cu-btn__text"],o,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],[3,"user","displayProfile"],[1,"cu-user-group-access-modal__invite-to"],[1,"cu-user-group-access-modal__subtitle"],n,[3,"checked","onChange"],s,c]},template:function(e,t){1&e&&(o.Xb(0,"img",0),o.cc(1,"div",1),o.gc(2,2),o.bc(),o.cc(3,"div",3),o.gc(4,4),o.bc(),o.cc(5,"div",5),o.dd(6),o.bc(),o.cc(7,"div",6),o.bd(8,f,1,2,"cu-user-item",7),o.bc(),o.bd(9,b,9,2,"div",8),o.cc(10,"cu-permission-options-dropdown",9),o.qc("changedOption",function(e){return t.selectedPermission=e.id}),o.bc(),o.cc(11,"div",10),o.cc(12,"button",11),o.qc("click",function(){return t.closeModal()}),o.gc(13,12),o.bc(),o.cc(14,"button",13),o.qc("click",function(){return t.inviteTeam()}),o.cc(15,"div",14),o.gc(16,15),o.bc(),o.cc(17,"div",16),o.Xb(18,"div",17),o.Xb(19,"div",18),o.Xb(20,"div",19),o.bc(),o.bc(),o.bc()),2&e&&(o.Ib(6),o.ed(t.userGroup.name),o.Ib(2),o.Dc("ngForOf",t.usersWithoutAccess)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",t.canShareTask),o.Ib(1),o.Dc("selectedPermission",t.selectedPermission),o.Ib(4),o.Dc("disabled",t.loading))},directives:[u.p,u.q,m.a,p.a,h.a],styles:[".cu-user-group-access-modal{display:flex;align-items:center;flex-direction:column}.cu-user-group-access-modal__img{margin:0 0 30px;width:159px;height:192px}.cu-user-group-access-modal__title{text-align:center;margin-bottom:25px;font:500 21px/1.2 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-user-group-access-modal__title{color:#d5d6d7}.cu-user-group-access-modal__label{width:100%;margin-bottom:4px;text-transform:uppercase;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#b9bec7}.dark-theme .cu-user-group-access-modal__label{color:#828588}.cu-user-group-access-modal__name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:100%;margin-bottom:15px;font:500 18px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-user-group-access-modal__name{color:#d5d6d7}.cu-user-group-access-modal__users{width:100%;margin-bottom:25px}.cu-user-group-access-modal__users .user-list-item{padding:0;pointer-events:none}.cu-user-group-access-modal__users .user-list-item__name{font-size:14px}.cu-user-group-access-modal__subtitle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:100%;margin-bottom:15px;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-user-group-access-modal__subtitle{color:#d5d6d7}.cu-user-group-access-modal__invite-to{width:100%;margin-bottom:20px}.cu-user-group-access-modal__invite-to .cu-checkbox{margin-bottom:15px;cursor:pointer}.cu-user-group-access-modal__invite-to .cu-radio__label{font-size:14px;padding-left:25px}.cu-user-group-access-modal__permission{width:100%;margin-bottom:30px;margin-left:-30px}.cu-user-group-access-modal__buttons{padding-top:10px;display:flex;align-items:center;justify-content:space-between;width:100%}"],encapsulation:2,changeDetection:0}),e})()},MHMH:function(e,t,i){"use strict";e.exports=function(e,t,i){for(var o,n,s,c=this.options.pedantic,a=t.length+1,r=-1,l=e.now(),d="",u="";++r<a;){if(" "!==(o=t.charAt(r))&&"\t"!==o){r--;break}d+=o}for(s=0;++r<=a;){if("#"!==(o=t.charAt(r))){r--;break}d+=o,s++}if(!(s>6)&&s&&(c||"#"!==t.charAt(r+1))){for(a=t.length+1,n="";++r<a;){if(" "!==(o=t.charAt(r))&&"\t"!==o){r--;break}n+=o}if(c||0!==n.length||!o||"\n"===o){if(i)return!0;for(d+=n,n="",u="";++r<a&&(o=t.charAt(r))&&"\n"!==o;)if(" "===o||"\t"===o||"#"===o){for(;" "===o||"\t"===o;)n+=o,o=t.charAt(++r);if(c||!u||n||"#"!==o){for(;"#"===o;)n+=o,o=t.charAt(++r);for(;" "===o||"\t"===o;)n+=o,o=t.charAt(++r);r--}else u+=o}else u+=n+o,n="";return l.column+=d.length,l.offset+=d.length,e(d+=u+n)({type:"heading",depth:s,children:this.tokenizeInline(u,l)})}}}},"MQ5/":function(e,t,i){"use strict";e.exports=c;var o=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],n=o.concat(["~","|"]),s=n.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function c(e){var t=e||{};return t.commonmark?s:t.gfm?n:o}c.default=o,c.gfm=n,c.commonmark=s},MaiH:function(e,t,i){"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},"NB/q":function(e,t,i){"use strict";i.d(t,"b",function(){return y}),i.d(t,"a",function(){return w});var o=i("fXoL"),n=i("TqRa"),s=i("jJQC"),c=i("xog/"),a=i("ofXK"),r=i("+HC/"),l=i("NsZK"),d=i("UdVN"),u=i("S5ue");let m=(()=>{class e{transform(e,t){return Object(u.a)(e)?e.has(t):t in e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Vb({name:"kvHas",type:e,pure:!0}),e})();var p=i("fVUq");function h(e,t){if(1&e&&(o.cc(0,"div",10),o.dd(1),o.bc()),2&e){const e=o.uc().$implicit;o.Ib(1),o.fd(" ",e.value.data.length," ")}}const f=function(e,t){return{"cu-comment-reactions__reaction-item_hover":e,"cu-comment-reactions__reaction-item_reacted-mine":t}};function b(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",7),o.qc("click",function(i){o.Uc(e);const n=t.$implicit;return o.uc().clickReaction(n.key,i)}),o.Xb(2,"div",8),o.vc(3,"emojiUnifiedToStyles"),o.bd(4,h,2,1,"div",9),o.bc(),o.Zb()}if(2&e){const e=t.$implicit,i=o.uc();o.Ib(1),o.Dc("ngClass",o.Ic(9,f,!i.isSharingApp,e.value.hasMyReaction))("cuTooltip",e.value.tooltipText),o.Ib(1),o.Dc("ngStyle",o.zc(3,4,e.key,!1,16,16)),o.Ib(2),o.Dc("ngIf",e.value.data.length>0)}}function g(e,t){if(1&e&&o.Yb(0,11),2&e){o.uc();const e=o.Rc(9);o.Dc("ngTemplateOutlet",e)}}function _(e,t){1&e&&o.Xb(0,"div",15),2&e&&o.Dc("icon","activity-likes")}function v(e,t){1&e&&o.Xb(0,"div",16),2&e&&o.Dc("icon","activity-likes")}function k(e,t){if(1&e){const e=o.dc();o.cc(0,"div",12),o.qc("click",function(t){o.Uc(e);const i=o.uc();return i.clickReaction(i.thumbsUpEmojiIdentifier,t)}),o.bd(1,_,1,1,"div",13),o.bd(2,v,1,1,"div",14),o.bc()}if(2&e){const e=o.uc();o.Ob("cu-comment-reactions__reaction-item_hover",!e.isSharingApp),o.Ib(1),o.Dc("ngIf",!e.forEmail),o.Ib(1),o.Dc("ngIf",e.forEmail)}}const y="1F44D";let w=(()=>{class e{constructor(e){this.helpers=e,this.thumbsUpEmojiIdentifier=y,this.isSharingApp=n.k,this.trackByReaction=Object(s.d)("key"),this.myReactions=[],this.reactionsMap=new Map,this.toggleReaction=new o.o,this.forEmail=!1}ngOnChanges(e){e.comment&&this.reactionsChanged(this.comment)}ngOnInit(){}clickReaction(e,t){let i=this.myReactions.includes(e),o=e;e!==this.thumbsUpEmojiIdentifier&&"thumbs_up"!==e||(i=this.myReactions.includes(e)||this.myReactions.includes("thumbs_up"),o="thumbs_up"),this.toggleReaction.emit({toggle:i,reaction:o}),t&&t.stopPropagation()}handleSelectEmoji(e){this.clickReaction(e.unified)}originalOrder(e,t){return 0}reactionsChanged(e){const t=e.reactions||[];this.reactionsMap=new Map(this.reactionsMap),this.myReactions=[];let i=0,o={};for(;i<t.length;){const e=t[i];let n=[],s=e.reaction;"thumbs_up"===e.reaction&&(s=this.thumbsUpEmojiIdentifier),e.user.id===this.user.id&&this.myReactions.push(s),n=o[s]?[...o[s],e]:[e],o=Object.assign(Object.assign({},o),{[s]:n}),i++}const n=[];for(const[s,c]of Object.entries(o))n.push(s),this.reactionsMap.set(s,{hasMyReaction:this.myReactions.includes(s),data:c,tooltipText:c.map(e=>""+this.helpers.getUserName(e.user)).join("\n")});if(this.reactionsMap.size>0){const e=[];this.reactionsMap.forEach((t,i)=>{n.includes(i)||e.push(i)}),e.forEach(e=>this.reactionsMap.delete(e))}}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(c.b))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-comment-reactions"]],hostAttrs:[1,"cu-comment-reactions"],inputs:{comment:"comment",user:"user",forEmail:"forEmail"},outputs:{toggleReaction:"toggleReaction"},features:[o.Gb],decls:10,vars:13,consts:function(){let e,t,i;return e=$localize`:@@cu-comment-reactions__reaction-item-add␟9f835f8988f0bd7edae27c3acf4e71ee4a41ddc4␟3527397396272421601:Add reaction`,t=$localize`:@@cu-comment-reactions__reaction-item-like␟878d5b504728e314749475edf2f83336db555ddb␟3504531754560756848:Like this comment`,i=$localize`:@@cu-comment-reactions__reaction-item-like-email␟a5a44ec7cf94539062d806608e504c302896360d␟2060554105083298326:Like this email`,[[1,"cu-comment-reactions__container"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"cu-comment-reactions__reaction-item"],[3,"stopClickPropagation","onSelect"],["cuTooltip",e,1,"cu-comment-reactions__reaction-item-toggle",3,"icon"],["likeReactionTmpl",""],[1,"cu-comment-reactions__reaction-item","cu-comment-reactions__reaction-item_reacted",3,"ngClass","cuTooltip","click"],[1,"cu-comment-reactions__reaction-item-icon",3,"ngStyle"],["class","cu-comment-reactions__reaction-item-counter",4,"ngIf"],[1,"cu-comment-reactions__reaction-item-counter"],[3,"ngTemplateOutlet"],[1,"cu-comment-reactions__reaction-item",3,"click"],["class","cu-comment-reactions__reaction-item-toggle","cuTooltip",t,3,"icon",4,"ngIf"],["class","cu-comment-reactions__reaction-item-toggle","cuTooltip",i,3,"icon",4,"ngIf"],["cuTooltip",t,1,"cu-comment-reactions__reaction-item-toggle",3,"icon"],["cuTooltip",i,1,"cu-comment-reactions__reaction-item-toggle",3,"icon"]]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.bd(1,b,5,12,"ng-container",1),o.vc(2,"keyvalue"),o.bd(3,g,1,1,"ng-container",2),o.vc(4,"kvHas"),o.cc(5,"div",3),o.cc(6,"cu-emoji-picker-dropdown",4),o.qc("onSelect",function(e){return t.handleSelectEmoji(e)}),o.Xb(7,"div",5),o.bc(),o.bc(),o.bc(),o.bd(8,k,3,4,"ng-template",null,6,o.cd)),2&e&&(o.Ob("cu-comment-reactions__container_empty",0===(null==t.reactionsMap?null:t.reactionsMap.size)),o.Ib(1),o.Dc("ngForOf",o.xc(2,7,t.reactionsMap,t.originalOrder))("ngForTrackBy",t.trackByReaction),o.Ib(2),o.Dc("ngIf",!o.xc(4,10,t.reactionsMap,t.thumbsUpEmojiIdentifier)),o.Ib(3),o.Dc("stopClickPropagation",!0),o.Ib(1),o.Dc("icon","add-reaction"))},directives:[a.p,a.q,r.a,l.a,d.a,a.o,a.t,a.x],pipes:[a.j,m,p.a],styles:['.cu-comment-reactions{transform:translateZ(0);z-index:15;position:relative;display:flex;align-items:center;align-self:stretch;padding:5px 0}.cu-comment__text+.cu-comment-reactions .cu-comment-reactions__container:not(.cu-comment-reactions__container_empty){padding-top:7px;padding-bottom:7px;border-top:1px solid #e9ebf0}.contrast_high .cu-comment__text+.cu-comment-reactions .cu-comment-reactions__container:not(.cu-comment-reactions__container_empty){border-top-color:#dedede}.dark-theme .cu-comment__text+.cu-comment-reactions .cu-comment-reactions__container:not(.cu-comment-reactions__container_empty){border-top-color:#1e272e}.cu-notification-item .cu-comment-reactions{padding:0}.cu-comment-reactions__container{display:flex;flex-wrap:wrap;width:100%}.cu-notification-item .cu-comment-reactions__container{padding:10px 0 0}.cu-notification-item .cu-notification__reply .cu-comment-reactions__container{padding:0}.cu-notification-item .cu-comment-reactions__container_empty{display:inline-flex;width:auto;flex-wrap:nowrap;position:absolute;top:2px;left:0;z-index:15;padding:0}.cu-comment-reactions__reaction-item{position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.cu-comment-reactions__reaction-item_hover:hover .cu-comment-reactions__like-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-reactions__reaction-item_hover:hover .cu-comment-reactions__like-icon{fill:var(--theme-main-color)}}.cu-comment-reactions__reaction-item_reacted{height:24px;border-radius:12px;justify-content:flex-start;padding:4px 5px;min-width:43px;margin:2px 4px 2px 0;border:1px solid #b9bec7}.dark-theme .cu-comment-reactions__reaction-item_reacted{border-color:#7c828d}.cu-comment-reactions__reaction-item_reacted:hover{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-reactions__reaction-item_reacted:hover{border-color:var(--theme-main-color)}}.cu-comment-reactions__reaction-item_reacted-mine{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-reactions__reaction-item_reacted-mine{border-color:var(--theme-main-color)}}.dark-theme .cu-comment-reactions__reaction-item_reacted-mine{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-comment-reactions__reaction-item_reacted-mine{border-color:var(--theme-main-color)}}.cu-comment-reactions__reaction-item_reacted-mine:hover:before{opacity:.2}.dark-theme .cu-comment-reactions__reaction-item_reacted-mine:hover:before{opacity:.3}.cu-comment-reactions__reaction-item_reacted-mine:before{background:#7b68ee;content:"";display:block;position:absolute;width:100%;height:100%;top:0;left:0;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu-comment-reactions__reaction-item_reacted-mine:before{background:var(--theme-main-color)}}.dark-theme .cu-comment-reactions__reaction-item_reacted-mine:before{opacity:.2}.cu-comment-reactions__reaction-item_reacted-mine .cu-comment-reactions__reaction-item-counter{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-reactions__reaction-item_reacted-mine .cu-comment-reactions__reaction-item-counter{color:var(--theme-main-color)}}.dark-theme .cu-comment-reactions__reaction-item_reacted-mine .cu-comment-reactions__reaction-item-counter{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-comment-reactions__reaction-item_reacted-mine .cu-comment-reactions__reaction-item-counter{color:var(--theme-main-color)}}.cu-comment-reactions__reaction-item-icon{position:relative;width:16px;height:16px}.cu-comment-reactions__reaction-item-counter{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-left:5px;color:#7c828d}.dark-theme .cu-comment-reactions__reaction-item-counter{color:#b9bec7}.cu-comment-reactions__reaction-item-toggle{width:24px;height:24px;padding:4px;margin:2px 0;border-radius:50%;fill:#7c828d;background:#f3f4f7}.dark-theme .cu-comment-reactions__reaction-item-toggle{background:#2b343b}.cu-comment-reactions__reaction-item-toggle:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-reactions__reaction-item-toggle:hover{fill:var(--theme-main-color)}}.cu-notification-item .cu-comment-reactions__reaction-item-toggle{display:none}.cu-comment-reactions__container_empty .cu-comment-reactions__reaction-item-toggle{margin-right:6px}.cu-notification-item .cu-comment:hover .cu-comment-reactions__reaction-item-toggle{display:block}.cu-notification-item .cu-comment:hover .cu-comment .cu-comment-reactions__reaction-item-toggle{display:none}.cu-notification-item .cu-comment .cu-comment:hover .cu-comment-reactions__reaction-item-toggle{display:block}'],encapsulation:2,changeDetection:0}),e})()},NFD0:function(e,t,i){"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},NOj5:function(e,t,i){"use strict";var o=i("uT1x"),n=i("fywt"),s=i("LV2V"),c=i("jLvU"),a=i("AQwl"),r=i("qAkX"),l=Object(s.a)(function(e){var t=Object(r.a)(e);return Object(a.a)(t)&&(t=void 0),Object(c.a)(Object(o.a)(e,1,a.a,!0),Object(n.a)(t,2))});t.a=l},NS2H:function(e,t,i){"use strict";e.exports=function(e,t,i){for(var o,n,s,c,a,r=e.now(),l=t.length,d=-1,u="";++d<l;){if(" "!==(s=t.charAt(d))||d>=3){d--;break}u+=s}for(o="",n="";++d<l;){if("\n"===(s=t.charAt(d))){d--;break}" "===s||"\t"===s?n+=s:(o+=n+s,n="")}if(r.column+=u.length,r.offset+=u.length,u+=o+n,s=t.charAt(++d),c=t.charAt(++d),"\n"===s&&("="===c||"-"===c)){for(u+=s,n=c,a="="===c?1:2;++d<l;){if((s=t.charAt(d))!==c){if("\n"!==s)return;d--;break}n+=s}return!!i||e(u+n)({type:"heading",depth:a,children:this.tokenizeInline(o,r)})}}},NfA8:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("o7Ov"),n=i("fXoL"),s=i("XNiG"),c=i("1G5W"),a=i("AeD3"),r=i("jJW4"),l=i("l7P3");let d=(()=>{class e{constructor(e,t,i){this.dataService=e,this.sharedData=t,this.store=i,this.destroy$=new s.a,this.onCategoryCreate=new n.o}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}categoryCreated(e){this.dataService.getCategoryById(e).pipe(Object(c.a)(this.destroy$)).subscribe(e=>{-1===this.sharedData.compatCategoryList.findIndex(t=>t.id===e.id)&&this.store.dispatch(new o.Zi({data:this.sharedData.compatCategoryList.concat(e)})),this.store.dispatch(new o.Si(e,!1,!0)),this.onCategoryCreate.emit({type:"create",category:e})})}}return e.\u0275fac=function(t){return new(t||e)(n.nc(a.a),n.nc(r.a),n.nc(l.Store))},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"NkL+":function(e,t,i){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},NtID:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("Z0uM"),n=i("NtPy"),s=i("KyjD"),c=i("/SUI"),a=i("6RDV"),r=i("ofXK"),l=i("K0KF"),d=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[r.c]]}),e})(),m=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[r.c,a.a,c.a,s.a,l.a,o.a,n.CommentAttachmentModule,u]]}),e})()},Nx3x:function(e,t,i){e.exports=i.p+"task-relationships.c0f85deb12389f34382d.png"},O3M5:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var o=i("g6dt"),n=i("HDdC"),s=i("Cfvw"),c=i("EY2u"),a=i("pLZG"),r=i("eIep"),l=i("5+tZ"),d=i("TqRa"),u=i("fXoL"),m=i("AeD3");let p=(()=>{class e{constructor(e,t){this.dataService=e,this.zone=t,this.boxLoaded=!1,d.k||o(["https://app.box.com/js/static/select.js"],{returnPromise:!0}).then(()=>{this.boxLoaded=!0})}openPicker(){return new n.a(e=>{const t=this.zone;this.boxLoaded?this.zone.runOutsideAngular(()=>{const i=new BoxSelect({clientId:"3msv9qcgql6ofsnl3jg6833tru9ckd7x",linkType:"shared",multiselect:!0});i.success(i=>{t.run(()=>{e.next(i),e.complete()})}),i.cancel(()=>{t.run(()=>{e.complete()})}),i.isBrowserSupported()?i.launchPopup():t.run(()=>{e.error("Browser is not supported")})}):e.complete()})}prepareBoxPayload(e,t,i,o){return{title:e.name||e.id,type:i,parent:t,file_id:e.id,url:e.url,is_folder:"folder"===e.type,permanent:o}}addBoxFile(e,t,i){return this.boxLoaded?this.openPicker().pipe(Object(a.a)(e=>e&&e.length>0),Object(r.a)(e=>Object(s.a)(e)),Object(l.a)(o=>this.dataService.boxAddAttachment(this.prepareBoxPayload(o,e,t,i)))):c.a}}return e.\u0275fac=function(t){return new(t||e)(u.nc(m.a),u.nc(u.B))},e.\u0275prov=u.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},OCW5:function(e,t,i){e.exports=i.p+"time-estimates.c6e83caba1b4ea01ef15.png"},"OU+x":function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("oKxQ"),n=i("XIp8"),s=i("iA4v"),c=i("YAnr"),a=i("RwZa"),r=i("yR4P"),l=i("fXoL"),d=i("jhN1"),u=i("jJW4");let m=(()=>{class e{constructor(e,t){this.sanitizer=e,this.sharedData=t}getCommentParts(e){const t=[];let i=[],o=!1;return e&&e.length?(e.forEach(e=>{"attachment"===e.type&&e.attachment||"frame"===e.type&&e.frame?(i.length>0&&(t.push({type:"text",data:{comment:i}}),i=[]),t.push("attachment"===e.type&&e.attachment?{type:"attachment",data:e.attachment,attributes:e.attributes}:{type:"frame",data:e.frame,attributes:e.attributes}),o=!0):(o&&(e=this._fixCommentNewLine(Object(n.a)(e))),e&&i.push(e),o=!1)}),i.length>0&&t.push({type:"text",data:{comment:i}}),t):t}composeThreadedEmail(e,t){if(!e)return"";let i="";return e.forEach(e=>{var o;i+='<div class="gmail_quote">',i+=Object(r.d)(e.date,e.emails[0].full_data.from[0]);const n=(null===(o=e.comment)||void 0===o?void 0:o.length)?this.getCommentHTML(e,null,!1,!1,!1,[],[],t,[],!1,!0):this.updateEmailWithAttachmentsAndMarkdown(e.emails[0],!1,e.email_attachments);i+='<blockquote style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex" class="gmail_quote"><p style="margin:0px">'+n}),e.forEach(e=>{i+="</blockquote></div>"}),i}getCommentHTML(e,t,i=!1,n=!1,s=!0,c=[],a=[],r,l=[],d=!1,u=!1){if(!this.sharedData.currentUser)return;const m=this.commentToDelta(e),p=Object(o.b)(m,this.sharedData.currentUser.value.id,this.sharedData.currentUser.value.markdown_shortcuts,t,i,!0,!1,n,!1,d,!1,c,a,r,!0,l,d,u);return s?this.sanitizer.bypassSecurityTrustHtml(p):p}removeLtGt(e){return(e=e.replace("<","")).replace(">","")}markdown(e){const t=/\\([\\\|`*_{}\[\]()#+\-~])/g,i=/\n *&gt; *([^]*?)(?=(\n|$){2})/g,o=/\n( *)(?:[*\-+]|((\d+)|([a-z])|[A-Z])[.)]) +([^]*?)(?=(\n|$){2})/g,n=/(^|[^A-Za-z\d\\])(([*_])|(~)|(\^)|(--)|(\+\+)|`)(\2?)([^<]*?)\2\8(?!\2)(?=\W|_|$)/g,s=/^.*\n( *\|( *\:?-+\:?-+\:? *\|)* *\n|)/,c=/.*\n/g,a=/\||(.*?[^\\])\|/g;function r(t,i){e=e.replace(t,i)}function l(e,t){return"<"+e+">"+t+"</"+e+">"}function d(e){return e.replace(n,function(e,t,i,o,n,s,c,a,r,u){return t+l(o?r?"strong":"em":n?r?"s":"sub":s?"sup":c?"small":a?"big":"code",d(u))})}function u(e){return e.replace(t,"$1")}const m=[];let p=0;return e="\n"+e+"\n",r(/\t|\r|\uf8ff/g,"  "),e=function e(t){return t.replace(i,function(t,i){return l("blockquote",e(d(i.replace(/^ *&gt; */gm,""))))})}(e),r(/^([*\-=_] *){3,}$/gm,"<hr/>"),e=function e(t){return t.replace(o,function(t,i,o,n,s,c){const a=l("li",d(c.split(RegExp("\n ?"+i+"(?:(?:\\d+|[a-zA-Z])[.)]|[*\\-+]) +","g")).map(e).join("</li><li>")));return"\n"+(o?'<ol start="'+(n?o+'">':parseInt(o,36)-9+'" style="list-style-type:'+(s?"low":"upp")+'er-alpha">')+a+"</ol>":l("ul",a))})}(e),r(/<\/(ol|ul)>\n\n<\1>/g,""),r(/\n((```|~~~).*\n?([^]*?)\n?\2|((    .*?\n)+))/g,function(e,t,i,o,n){return m[--p]=l("pre",l("code",o||n.replace(/^    /gm,""))),p+"\uf8ff"}),r(/((!?)\[(.*?)\]\((.*?)( ".*")?\)|\\([\\`*_{}\[\]()#+\-.!~]))/g,(e,t,i,o,n,s,c)=>(m[--p]=n?i?'<img src="'+n+'" alt="'+o+'" style="width: 100%"/>':'<a href="'+this.removeLtGt(n)+'">'+u(d(o))+"</a>":c,p+"\uf8ff")),r(/\n(( *\|.*?\| *\n)+)/g,function(e,t){const i=t.match(s)[1];return"\n"+l("table",t.replace(c,function(e,t){return e===i?"":l("tr",e.replace(a,function(e,o,n){return n?l(i&&!t?"th":"td",u(d(o||""))):""}))}))}),r(/(?=^|>|\n)([>\s]*?)(#{1,6}) (.*?)( #*)? *(?=\n|$)/g,function(e,t,i,o){return t+l("h"+i.length,u(d(o)))}),r(/(?=^|>|\n)\s*\n+([^<]+?)\n+\s*(?=\n|<|$)/g,function(e,t){return l("p",u(d(t)))}),r(/-\d+\uf8ff/g,function(e){return m[parseInt(e,10)]}),r(/<mailto/g,"mailto"),e.trim()}updateEmailWithAttachmentsAndMarkdown(e,t,i){let o;if(e.full_data.from&&e.full_data.from.length){const t=e.full_data.from[0];let i,n;if(t.name){i=t.name;const e=i.split(" ");n=i.charAt(0),e.length>1&&(n+=e[1].charAt(0))}else n=t.email.charAt(0);o={id:t.email,email:t.email,initials:n,username:i}}let n=this.markdown(e.full_data.conversation||"");return n!==e.full_data.conversation||t||(n=this.removeLtGt(n),(Object(c.A)(n)||[]).forEach(e=>n=n.replace(e.raw,`<a target="_blank" class="cu-linkify-link" href="${encodeURI(e.url)}">${e.raw}</a>`))),e=Object.assign(Object.assign({},e),{full_data:Object.assign(Object.assign({},e.full_data),{conversation:n})}),i&&i.length&&i.forEach(t=>{if(t.email_data&&t.email_data.nylas_id){const i=(e.full_data.files||[]).find(e=>{var i;return e.id===(null===(i=null==t?void 0:t.email_data)||void 0===i?void 0:i.nylas_id)});if(i){const o=(e.full_data.body||"").replace("cid:"+i.content_id,t.thumbnail_large);n=n.replace("cid:"+i.content_id,t.thumbnail_large),e=Object.assign(Object.assign({},e),{full_data:Object.assign(Object.assign({},e.full_data),{body:o,conversation:n})})}}}),t?e.full_data.body||"":e.full_data.conversation||""}getCommentText(e){let t="";return e.forEach(e=>{t+=e.text||"giphy"!==e.type?e.text+" ":e.giphy&&e.giphy.query?e.giphy.query+" ":""}),t.trim()}commentToDelta(e){const t=[];return e&&e.comment&&e.comment.forEach((e,i)=>{"tag"===e.type&&e.user?t.push({insert:{user_mention:{id:e.user.id,name:e.user.username,email:e.user.email}}}):"group_tag"===e.type&&e.user_group?t.push({insert:{user_group_mention:{id:e.user_group.id,name:e.user_group.username,handle:e.user_group.handle}}}):"assignees_tag"===e.type||"followers_tag"===e.type?t.push({insert:{task_user_group_mention:Object.assign({type:e.type},a.c.find(t=>t.id===e.type))}}):"attachment"===e.type?e.attachment&&t.push({insert:{attachment:{id:e.attachment.id,name:e.attachment.title,type:e.attachment.extension||e.attachment.type,thumbnail_large:e.attachment.thumbnail_large||null,thumbnail_small:e.attachment.thumbnail_large||null,source:e.attachment.source,mimetype:e.attachment.mimetype,date:e.attachment.date,user:e.attachment.user,url:e.attachment.url||null,deleted:e.attachment.deleted,deleted_by:e.attachment.deleted_by,uploaded:!0}},attributes:e.attributes}):t.push("task_mention"===e.type?{insert:{task_mention:Object(c.c)(e.task_mention,[])}}:"listview"===e.type?{insert:{listview:Object.assign({},e.listview)},attributes:e.attributes}:"doc_embed"===e.type?{insert:{doc_embed:Object.assign({},e.doc_embed)}}:"doc_mention"===e.type?{insert:{doc_mention:Object.assign({},e.doc_mention)}}:"comment_mention"===e.type?{insert:{comment_mention:Object.assign({},e.comment_mention)}}:"emoticon"===e.type?{insert:{emoticon:{code:e.emoticon.code}}}:"frame"===e.type?{insert:{frame:e.frame},attributes:e.attributes}:"divider"===e.type?{insert:{divider:!0}}:"bookmark"===e.type?{insert:{bookmark:Object.assign({},e.bookmark)},attributes:e.attributes}:"giphy"===e.type?{insert:{giphy:Object.assign({},e.giphy)}}:"automation_variable"===e.type?{insert:{automation_variable:{title:e.title,id:e.var_id,customPayload:e.custom}}}:{insert:e.text,attributes:e.attributes})}),t}formatCommentForEditor(e,t,i=!1,o){const n=o||this.sharedData.projectMembers.value||[],s={comment:[]};return e.forEach(e=>{if(e.insert)if(e.insert.attachment&&e.insert.attachment.id)s.comment.push({type:"attachment",text:e.insert.attachment.name,attachment:{id:e.insert.attachment.id,name:e.insert.attachment.name,title:e.insert.attachment.name,type:e.insert.attachment.type,extension:e.insert.attachment.extension||"string"==typeof e.insert.attachment.type?e.insert.attachment.type:null,source:e.insert.attachment.source,mimetype:e.insert.attachment.mimetype,date:e.insert.attachment.date,user:e.insert.attachment.user,thumbnail_large:e.insert.attachment.thumbnail_large||null,thumbnail_small:e.insert.attachment.thumbnail_large||null,url:e.insert.attachment.url||null,deleted:e.insert.attachment.deleted,deleted_by:e.insert.attachment.deleted_by,uploaded:!0},attributes:e.attributes});else if(e.insert.task_mention)s.comment.push({type:"task_mention",task_mention:Object(c.c)(e.insert.task_mention,[]),text:e.insert.task_mention.task_id});else if(e.insert.doc_mention)s.comment.push({type:"doc_mention",doc_mention:Object.assign({},e.insert.doc_mention),text:e.insert.doc_mention.pageId});else if(e.insert.doc_embed)s.comment.push({type:"doc_embed",doc_embed:Object.assign({},e.insert.doc_embed),text:e.insert.doc_embed.pageId});else if(e.insert.comment_mention)s.comment.push({type:"comment_mention",comment_mention:Object.assign({},e.insert.comment_mention),text:e.insert.comment_mention.commentId});else if(e.insert.frame)s.comment.push({type:"frame",frame:e.insert.frame,text:e.insert.frame.url,attributes:e.attributes});else if(e.insert.listview)s.comment.push({type:"listview",listview:e.insert.listview,text:e.insert.listview.viewId,attributes:e.attributes});else if(e.insert.user_mention){let t=n.find(t=>String((t.user||{}).id)===String(e.insert.user_mention.id));t=t?t.user:{id:e.insert.user_mention.id,username:e.insert.user_mention.name||e.insert.user_mention.email},s.comment.push({type:"tag",user:t,text:"@"+t.username})}else if(e.insert.user_group_mention){const i=(t||[]).find(t=>t.id===e.insert.user_group_mention.id)||{id:e.insert.user_group_mention.id,handle:e.insert.user_group_mention.handle};s.comment.push({type:"group_tag",user_group:i,text:"@"+i.handle,group_id:i.id})}else e.insert.task_user_group_mention?s.comment.push({type:e.insert.task_user_group_mention.type,text:"@"+a.c.find(t=>t.id===e.insert.task_user_group_mention.type).label}):e.insert&&e.insert.emoticon?s.comment.push({type:"emoticon",emoticon:{code:e.insert.emoticon.code,type:e.insert.emoticon.type},text:String.fromCodePoint(parseInt("0x"+e.insert.emoticon.code,16))}):e.insert&&e.insert.divider?s.comment.push({type:"divider",text:"---"}):e.insert&&e.insert.bookmark?s.comment.push({type:"bookmark",bookmark:Object.assign({},e.insert.bookmark),attributes:e.attributes}):e.insert&&e.insert.giphy?s.comment.push({type:"giphy",giphy:Object.assign({},e.insert.giphy)}):"string"==typeof e.insert?s.comment.push({text:e.insert,attributes:e.attributes||{}}):e.insert.automation_variable&&s.comment.push(Object.assign({type:"automation_variable",title:e.insert.automation_variable.title,var_id:e.insert.automation_variable.id,custom:e.insert.automation_variable.customPayload},e.insert.automation_variable.customPayload.path?{path:e.insert.automation_variable.customPayload.path}:{field_id:e.insert.automation_variable.customPayload.field_id}))}),s}getCommentReplyData(e){return new s.a(this.commentToDelta(e)).slice(0,30).ops}_fixCommentNewLine(e){if(e&&e.text&&e.text.length>0&&"\n"===e.text.charAt(0)){if("\n"===e.text||"\n\n"===e.text)return;e.text=e.text.substr(1)}return e}}return e.\u0275fac=function(t){return new(t||e)(l.nc(d.b),l.nc(u.a))},e.\u0275prov=l.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Olrm:function(e,t,i){"use strict";var o=i("U6jy"),n=i("ZWk2");e.exports=function(e){return i.raw=function(e,i,c){return n(e,o(c,{position:t(i),warning:s}))},i;function t(t){for(var i=e.offset,o=t.line,n=[];++o&&o in i;)n.push((i[o]||0)+1);return{start:t,indent:n}}function i(i,o,c){n(i,{position:t(o),warning:s,text:c,reference:c,textContext:e,referenceContext:e})}function s(t,i,o){3!==o&&e.file.message(t,i)}}},Ox28:function(e,t,i){"use strict";i.d(t,"a",function(){return T}),i.d(t,"b",function(){return C});var o,n,s,c=i("fXoL"),a=i("XNiG");function r(e){return e&&d(e,"ngOnChanges")}function l(e){const t=e.__ngxOnChanges_;null!=t&&r(e)&&e.ngOnChanges(t),e.__ngxOnChanges_=null}function d(e,t){if(t in e)return!0;const i=Object.getPrototypeOf(e);return!!i&&d(i,t)}function u(e,t){if(Object.getOwnPropertyDescriptor(e,t))return Object.getOwnPropertyDescriptor(e,t);const i=Object.getPrototypeOf(e);return i?u(i,t):void 0}function m(e,t,i){return o=>({context:e,dynamicContext:t,hostContext:i,insidePropName:o.propName,outsidePropName:o.templateName})}class p{constructor(e,t){if(this.host=e,this.name=t,this.disposed=!1,"__ngxContext__HOST_INPUT_ADAPTER"+t in e)return e["__ngxContext__HOST_INPUT_ADAPTER"+t];e["__ngxContext__HOST_INPUT_ADAPTER"+t]=this,this.changes=new a.a,this.defaultDescriptor=u(e,t),this.defaultDescriptor&&this.defaultDescriptor.get&&!this.defaultDescriptor.set&&Object(c.bb)(),this.refCount=0;const i=e[t];Object.defineProperty(e,t,{get:()=>this.defaultDescriptor&&this.defaultDescriptor.get?this.defaultDescriptor.get.call(e):this.value,set:t=>{this.defaultDescriptor&&this.defaultDescriptor.set&&this.defaultDescriptor.set.call(e,t),this.value=t,this.changes.next(t)},configurable:!0}),void 0!==i&&(e[t]=i)}attach(){this.refCount++}detach(){this.refCount--,this.refCount<=0&&this.dispose()}dispose(){const e=this.host[this.name];this.disposed=!0,this.changes.complete(),delete this.host["__ngxContext__HOST_INPUT_ADAPTER"+this.name],this.defaultDescriptor?(this.defaultDescriptor.writable&&(this.defaultDescriptor.value=e),Object.defineProperty(this.host,this.name,this.defaultDescriptor),this.defaultDescriptor.set&&(this.host[this.name]=e)):(delete this.host[this.name],this.host[this.name]=e)}}class h{constructor(e){if(this.host=e,"__ngxContext__HOST_ADAPTER"in e)return e.__ngxContext__HOST_ADAPTER;this.inputs=new Map,this.state={},this.refCount=0,e.__ngxContext__HOST_ADAPTER=this}attach(){this.refCount++}attachInput(e){const t=new p(this.host,e.outsidePropName);return t.attach(),this.inputs.set(e.outsidePropName,t),Object.assign(Object.assign({},e),{defaultDescriptor:t.defaultDescriptor})}getInputAdapter(e){return this.inputs.get(e.outsidePropName)}detachInput(e){const t=this.inputs.get(e.outsidePropName);t.detach(),t.disposed&&this.inputs.delete(e.outsidePropName)}detach(){this.refCount--,this.refCount<=0&&this.dispose()}dispose(){delete this.host.__ngxContext__HOST_ADAPTER}}const f=Symbol("Life Cycle Component");function b(e){return e&&e[f]}let g=(()=>{class e{constructor(){this[o]=!0}ngOnInit(){this.context&&l(this.context)}attach(e,t){this.context=e,this.changeDetectorRef=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Qb({type:e,selectors:[["ngx-component-outlet-on-init-only"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();o=f;let _=(()=>{class e{constructor(){this[n]=!0}ngDoCheck(){this.context&&l(this.context),this.changeDetectorRef&&this.changeDetectorRef.markForCheck()}attach(e,t){this.context=e,this.changeDetectorRef=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Qb({type:e,selectors:[["ngx-component-outlet-do-check-only"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();n=f;let v=(()=>{class e{constructor(){this[s]=!0}ngOnInit(){this.context&&l(this.context)}ngDoCheck(){this.context&&l(this.context),this.changeDetectorRef&&this.changeDetectorRef.markForCheck()}attach(e,t){this.context=e,this.changeDetectorRef=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Qb({type:e,selectors:[["ngx-component-outlet-on-init-do-check"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();s=f;const k={Default:0,OnInitOnly:1,DoCheckOnly:2,OnInitAndDoCheck:3};k[k.Default]="Default",k[k.OnInitOnly]="OnInitOnly",k[k.DoCheckOnly]="DoCheckOnly",k[k.OnInitAndDoCheck]="OnInitAndDoCheck";const y={[k.Default]:{},[k.OnInitOnly]:{componentType:g,useOnInitComponent:!0},[k.DoCheckOnly]:{componentType:_,useDoCheckComponent:!0},[k.OnInitAndDoCheck]:{componentType:v,useOnInitComponent:!0,useDoCheckComponent:!0}},w={onInitComponentRef:null,doCheckComponentRef:null};class x{constructor(e,t,i){this.viewContainerRef=t,this.componentFactoryResolver=i,this.context={},this.attachedInputs=[],this.attachedOutputs=[],this.propertyDefs=[],this.bindingDefs=[],this.componentFactory=e.componentFactory,this.componentRef=e.componentRef,this.host=e.host,this.changeDetectorRef=this.componentRef.injector.get(c.h,this.componentRef.changeDetectorRef),this.propertyDefs=this.componentFactory.inputs.map(m(this.context,this.componentRef.instance,this.host)),this.attachHost(),this.attachInputs(),this.attachLifecycle(),this.attachOutputs()}dispose(){this.disposeOutputs(),this.disposeInputs(),this.detachHost(),this.componentRef&&(this.componentRef.destroy(),this.componentRef=null),this.detachLifecycle&&(this.detachLifecycle(),this.detachLifecycle=null)}updateContext(e){const t=e?Object.keys(e):[];for(const o of t){const t=this.getBindingDef(o);t&&this.detachHostInput(t);const i=this.getPropertyDef(o);i&&this.context[i.outsidePropName]!==e[o]&&(this.context[i.outsidePropName]=e[o])}const i=this.propertyDefs.filter(e=>!(t.indexOf(e.outsidePropName)>-1||this.getBindingDef(e.outsidePropName)));for(const o of i){const e=this.attachHostInput(o);this.attachInput(e)}}getPropertyDef(e){return this.propertyDefs.find(t=>t.outsidePropName===e)}getBindingDef(e){return this.bindingDefs.find(t=>t.outsidePropName===e)}attachHost(){this.hostAdapter=new h(this.host),this.hostAdapter.attach()}detachHost(){this.hostAdapter.detach(),this.hostAdapter=null}attachHostInput(e){const t=this.hostAdapter.attachInput(e);return this.bindingDefs.push(t),t}detachHostInput(e){this.hostAdapter.detachInput(e),this.bindingDefs=this.bindingDefs.filter(t=>t!==e)}attachInputs(){this.bindingDefs=[];for(const e of this.propertyDefs){const t=this.attachHostInput(e);this.attachContextPropertyToComponentInput(t),this.attachInput(t)}}attachInput(e){const t=this.hostAdapter,i=this.context,o=this.host[e.outsidePropName];void 0!==o&&(i[e.outsidePropName]=o);const n=t.getInputAdapter(e).changes.subscribe(t=>{i[e.outsidePropName]=t});this.attachedInputs.push(n)}attachContextPropertyToComponentInput(e){const{insidePropName:t,outsidePropName:i,defaultDescriptor:o}=e;Object.defineProperty(e.context,i,{get:()=>o&&o.get?o.get.call(e.context):e.dynamicContext[t],set:n=>{if(e.dynamicContext[t]===n)return;let s=e.dynamicContext.__ngxOnChanges_;null==s&&(s=e.dynamicContext.__ngxOnChanges_={});const a=!e.dynamicContext["__ngxOnChanges__"+i];e.dynamicContext["__ngxOnChanges__"+i]=!0,s[i]=new c.N(e.dynamicContext[t],n,a),o&&o.set&&o.set.call(e.hostContext,n);try{e.dynamicContext[t]=n}catch(r){Object(c.bb)()}this.changeDetectorRef.markForCheck()}})}attachLifecycle(){this.detachLifecycle=function(e,t,i){const o=e.instance;let n=function(e,t,i){const o=function(e){const t=d(e.prototype,"ngOnInit"),i=d(e.prototype,"ngDoCheck"),o=d(e.prototype,"ngOnChanges");let n;return n=!o||t||i?o&&!t?k.OnInitOnly:i?k.Default:k.DoCheckOnly:k.OnInitAndDoCheck,y[k.OnInitAndDoCheck]}(e);if(!o.componentType)return w;const n=function(e,t,i){const o=i.resolveComponentFactory(e);return t.createComponent(o,t.length)}(o.componentType,t,i);return{onInitComponentRef:o.useOnInitComponent?n:null,doCheckComponentRef:o.useDoCheckComponent?n:null}}(o.constructor,t,i);return n={onInitComponentRef:n.onInitComponentRef||e,doCheckComponentRef:n.doCheckComponentRef||e},r(o)?(b(n.onInitComponentRef.instance)&&n.onInitComponentRef.instance.attach(o,e.changeDetectorRef),b(n.doCheckComponentRef.instance)&&n.doCheckComponentRef.instance.attach(o,e.changeDetectorRef)):b(n.doCheckComponentRef.instance)&&n.doCheckComponentRef.instance.attach(o,e.changeDetectorRef),()=>{b(n.doCheckComponentRef.instance)&&n.doCheckComponentRef.destroy(),b(n.onInitComponentRef.instance)&&n.onInitComponentRef.destroy()}}(this.componentRef,this.viewContainerRef,this.componentFactoryResolver)}disposeInputs(){for(const e of this.bindingDefs)this.detachHostInput(e);for(const e of this.attachedInputs)e.unsubscribe();this.attachedInputs.splice(0)}attachOutputs(){const e=this.componentFactory.outputs.map(m(this.context,this.componentRef.instance,this.host));for(const t of e)if(t.outsidePropName in this.host){const e=this.componentRef.instance[t.insidePropName].subscribe(this.host[t.outsidePropName]);this.attachedOutputs.push(e)}}disposeOutputs(){for(const e of this.attachedOutputs)e.unsubscribe();this.attachedOutputs.splice(0)}}let I=(()=>{class e{create(e,t,i,o,n,s){const c=s.resolveComponentFactory(e),a=c.create(i,o),r=new x({componentFactory:c,componentRef:a,host:n},t,s);return t.insert(a.hostView,t.length),r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Sb({token:e,factory:e.\u0275fac}),e})(),T=(()=>{class e{constructor(e,t,i,o){this._componentFactoryResolver=e,this.viewContainerRef=t,this.changeDetectorRef=i,this.builder=o,this.ngxComponentOutletActivate=new c.o,this.ngxComponentOutletDeactivate=new c.o}get componentFactoryResolver(){return this._ngModuleRef?this._ngModuleRef.componentFactoryResolver:this._componentFactoryResolver}get host(){if(this.cached)return this.cached;const{context:e}=this.changeDetectorRef;return this.cached=e}get injector(){return this.ngxComponentOutletInjector||this.viewContainerRef.injector}ngOnChanges(e){e.ngxComponentOutlet&&(e.ngxComponentOutletNgModuleFactory&&(this.destroyNgModuleRef(),this.createNgModuleRef()),this.destroyAdapterRef(),this.createAdapterRef()),e.ngxComponentOutletContext&&this.applyContext()}applyContext(){this._adapterRef&&this._adapterRef.updateContext(this.ngxComponentOutletContext)}ngOnDestroy(){this.destroyAdapterRef(),this.destroyNgModuleRef()}createAdapterRef(){this.ngxComponentOutlet&&(this._adapterRef=this.builder.create(this.ngxComponentOutlet,this.viewContainerRef,this.injector,this.ngxComponentOutletContent,this.host,this.componentFactoryResolver),this.ngxComponentOutletContext&&this.applyContext(),this.ngxComponentOutletActivate.emit(this._adapterRef.componentRef.instance))}destroyAdapterRef(){this._adapterRef&&(this.ngxComponentOutletDeactivate.emit(this._adapterRef.componentRef.instance),this._adapterRef.dispose(),this._adapterRef=null)}createNgModuleRef(){this.ngxComponentOutletNgModuleFactory&&(this._ngModuleRef=this.ngxComponentOutletNgModuleFactory.create(this.injector))}destroyNgModuleRef(){this._ngModuleRef&&(this._ngModuleRef.destroy(),this._ngModuleRef=null)}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(c.j),c.Wb(c.U),c.Wb(c.h),c.Wb(I))},e.\u0275dir=c.Rb({type:e,selectors:[["","ngxComponentOutlet",""]],inputs:{ngxComponentOutlet:"ngxComponentOutlet",ngxComponentOutletInjector:"ngxComponentOutletInjector",ngxComponentOutletContent:"ngxComponentOutletContent",ngxComponentOutletContext:"ngxComponentOutletContext",ngxComponentOutletNgModuleFactory:"ngxComponentOutletNgModuleFactory"},outputs:{ngxComponentOutletActivate:"ngxComponentOutletActivate",ngxComponentOutletDeactivate:"ngxComponentOutletDeactivate"},features:[c.Gb]}),e})(),C=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},providers:[I]}),e})()},OxjL:function(e,t,i){e.exports=i.p+"tags.5e24c1cac45a4479fce4.png"},"P+Em":function(e,t,i){e.exports=i.p+"office-365.a8a3bdef590700afc2a0.svg"},P7XM:function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},PIlL:function(e,t,i){"use strict";var o=i("RsFJ"),n=i("KJAg");e.exports=function(e,t,i){for(var s,c,a,r,l,d,u,m,p,h=this.offset,f=this.blockTokenizers,b=this.interruptBlockquote,g=e.now(),_=g.line,v=t.length,k=[],y=[],w=[],x=0;x<v&&(" "===(c=t.charAt(x))||"\t"===c);)x++;if(">"===t.charAt(x)){if(i)return!0;for(x=0;x<v;){for(u=x,m=!1,-1===(r=t.indexOf("\n",x))&&(r=v);x<v&&(" "===(c=t.charAt(x))||"\t"===c);)x++;if(">"===t.charAt(x)?(x++,m=!0," "===t.charAt(x)&&x++):x=u,l=t.slice(x,r),!m&&!o(l)){x=u;break}if(!m&&(a=t.slice(x),n(b,f,this,[e,a,!0])))break;d=u===x?l:t.slice(u,r),w.push(x-u),k.push(d),y.push(l),x=r+1}for(x=-1,v=w.length,s=e(k.join("\n"));++x<v;)h[_]=(h[_]||0)+w[x],_++;return p=this.enterBlock(),y=this.tokenizeBlock(y.join("\n"),g),p(),s({type:"blockquote",children:y})}}},PJRi:function(e,t,i){"use strict";i.d(t,"a",function(){return ce});var o=i("fXoL"),n=i("f0Wu"),s=i.n(n);const c=(e,t)=>t?t.startOf("week").format("YYYY-WW"):"empty_"+e;function a(e,t,i){let o=t&&e?t.clone().startOf("day").diff(e,"days"):-1,n=i&&e?i.clone().startOf("day").diff(e,"days"):-1;return-1!==o&&-1===n&&(n=o),-1===o&&-1!==n&&(o=n),{from:o,to:n}}var r=i("yR4P"),l=i("jJQC"),d=i("XNiG"),u=i("eNwd"),m=i("1G5W"),p=i("JX91"),h=i("3UWI"),f=i("hr9B"),b=i("Jkpq"),g=i("0EQZ"),_=i("2Vo4");class v extends g.b{constructor(e){super(),this.disabled=e,this.destroy$=new d.a,this.pastShift=500,this.cachedData=Array.from({length:1e4}),this.dataStream=new _.a(this.cachedData)}connect(e){return e.viewChange.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{if(!this.disabled)for(let t=e.start;t<=e.end;t++)this.cachedData[t]||(this.cachedData[t]=this.getDate(t));this.dataStream.next(this.cachedData)}),this.dataStream}disconnect(){this.destroy$.next(),this.destroy$.complete()}getLength(){return this.cachedData.length}getIndex(e,t=!0){const i=e?e.clone().startOf("week").diff(s()().startOf("week"),"weeks"):0,o=this.pastShift+i;if(t){if(o<0)return this.pastShift=this.pastShift-o,this.cachedData=[...Array.from({length:-o}),...this.cachedData],this.dataStream.next(this.cachedData),0;if(o>=this.cachedData.length)return this.cachedData=[...this.cachedData,...Array.from({length:o-this.cachedData.length+1})],this.dataStream.next(this.cachedData),this.cachedData.length-1}return o}getDateByIndex(e){if(e>=0&&e<this.cachedData.length)return this.cachedData[e]||(this.cachedData[e]=this.getDate(e),this.dataStream.next(this.cachedData)),this.cachedData[e]}getDate(e){const t=s()();return t.add(e-this.pastShift,"weeks"),t}}var k=i("DiaY"),y=i("ofXK"),w=i("NsZK"),x=i("UdVN"),I=i("vxfF"),T=i("QkWf"),C=i("EDFS"),D=i("itXk"),O=i("lJxs"),S=i("UXun"),E=i("oy6Y");function P(e,t){if(1&e){const e=o.dc();o.cc(0,"div",1),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc().selectItem(i)}),o.cc(1,"div",2),o.dd(2),o.bc(),o.cc(3,"div",3),o.dd(4),o.bc(),o.bc()}if(2&e){const e=t.$implicit;o.Ob("cu-quick-date-options__item_selected",e.selected)("cu-quick-date-options__item_clear","clear"===e.id),o.Ib(2),o.ed(e.name),o.Ib(2),o.ed(e.textValue)}}let j=(()=>{class e{constructor(e){this.timezonesService=e,this.quickClear=!1,this.noTime=!1,this.onSelect=new o.o,this.value$=new _.a(null),this.timeExists$=new _.a(null),this.quickClear$=new _.a(this.quickClear),this.noTime$=new _.a(this.noTime),this.date6Days=s()().startOf("day").add(6,"day"),this.quickItems=(s()().isoWeekday()>=6?b.c:b.b).map(e=>{const{date:t}=Object(b.p)(e.code),i=Object(b.o)(e.code);return{data:e,value:t,id:e.code,name:e.name,textValue:i?this.timezonesService.formatUserDateTime(t,!1,!0):this.date6Days.isSameOrAfter(t)?this.timezonesService.formatDate(t,"ddd",!1):this.timezonesService.formatDate(t,"MMM D",!1),isTime:i}}),this.items$=Object(D.a)([this.value$,this.timeExists$,this.quickClear$,this.noTime$]).pipe(Object(O.a)(([e,t,i,o])=>{const n=s()().startOf("week").isoWeekday(),c=this.quickItems.filter(e=>!(o&&e.isTime||e.id===b.f.code&&1!==n||e.id===b.g.code&&7!==n)).map(i=>Object.assign(Object.assign({},i),{selected:(!t||i.isTime)&&e&&i.value&&i.value.isSame(e,i.isTime?"minute":"day")}));return i&&c.push({data:b.d,value:null,id:b.d.code,name:b.d.name,textValue:null,isTime:!1,selected:!1}),c}),Object(S.a)({refCount:!0,bufferSize:1})),this.trackById=Object(l.d)("id")}ngOnInit(){}ngOnChanges(e){e.value&&this.value$.next(this.value),e.timeExists&&this.timeExists$.next(this.timeExists),e.quickClear&&this.quickClear$.next(this.quickClear),e.noTime&&this.noTime$.next(this.noTime)}selectItem(e){this.onSelect.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(E.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-quick-date-options"]],hostAttrs:[1,"cu-quick-date-options"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-quick-date-options_quick-clear",t.quickClear)},inputs:{value:"value",timeExists:"timeExists",quickClear:"quickClear",noTime:"noTime"},outputs:{onSelect:"onSelect"},features:[o.Gb],decls:2,vars:4,consts:[["class","cu-quick-date-options__item",3,"cu-quick-date-options__item_selected","cu-quick-date-options__item_clear","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-quick-date-options__item",3,"click"],[1,"cu-quick-date-options__item-title"],[1,"cu-quick-date-options__item-value"]],template:function(e,t){1&e&&(o.bd(0,P,5,6,"div",0),o.vc(1,"async")),2&e&&o.Dc("ngForOf",o.wc(1,2,t.items$))("ngForTrackBy",t.trackById)},directives:[y.p],pipes:[y.b],styles:['.cu-quick-date-options{display:block;max-height:243px}.cu-recurring-date-dropdown__menu-not-recurring .cu-quick-date-options:not(.cu-quick-date-options_quick-clear){padding-top:3px}.cu-quick-date-options__item{display:flex;cursor:pointer;align-items:center;justify-content:space-between;padding:8px 10px}.cu-quick-date-options__item_clear .cu-quick-date-options__item-title,.dark-theme .cu-quick-date-options__item_clear .cu-quick-date-options__item-title{color:#fd71af}.cu-quick-date-options__item-title{white-space:nowrap;color:#292d34;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-quick-date-options__item-title{font-family:var(--global-font-support)}}.dark-theme .cu-quick-date-options__item-title{color:#d5d6d7}.cu-quick-date-options__item:hover{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#f2f2f2}.dark-theme .cu-quick-date-options__item:hover{background-color:#1e272e}.cu-quick-date-options__item-value{opacity:.7;white-space:nowrap;color:#b9bec7;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-quick-date-options__item-value{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})();var A=i("bFKe");let $=(()=>{class e{transform(e){return e&&e.date()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Vb({name:"dayNumber",type:e,pure:!0}),e})(),U=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-calendar-day"]],hostAttrs:[1,"cu-calendar-day"],hostVars:24,hostBindings:function(e,t){2&e&&o.Ob("cu-calendar-day_today",t.isToday)("cu-calendar-day_selected",t.isSelected)("cu-calendar-day_deselected",t.isDeselected)("cu-calendar-day_preselected",t.isPreselected)("cu-calendar-day_recur",t.isRecur)("cu-calendar-day_start",t.isStart)("cu-calendar-day_end",t.isEnd)("cu-calendar-day_is-past",t.isPast)("cu-calendar-day_is-muted",t.isMuted)("cu-calendar-day_is-disabled",t.isDisabled)("cu-calendar-day_top-border",t.topBorder)("cu-calendar-day_left-border",t.leftBorder)},inputs:{day:"day",isToday:"isToday",isSelected:"isSelected",isDeselected:"isDeselected",isPreselected:"isPreselected",isRecur:"isRecur",isStart:"isStart",isEnd:"isEnd",isPast:"isPast",isMuted:"isMuted",isDisabled:"isDisabled",topBorder:"topBorder",leftBorder:"leftBorder"},decls:3,vars:3,consts:[[1,"cu-calendar-day__cell"]],template:function(e,t){1&e&&(o.cc(0,"div",0),o.dd(1),o.vc(2,"dayNumber"),o.bc()),2&e&&(o.Ib(1),o.ed(o.wc(2,1,t.day)))},pipes:[$],styles:['.cu-calendar-day{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:12px;transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;height:30px;padding:3px 0;position:relative;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-calendar-day{font-family:var(--global-font-support)}}.cu-calendar-day:hover{transition:none}.cu-calendar-day.cu-calendar-day_top-border:before{content:"";display:block;position:absolute;width:100%;height:1px;background:#d5d6d7;top:0;left:0}.dark-theme .cu-calendar-day.cu-calendar-day_top-border:before{background:#828588}.cu-calendar-day.cu-calendar-day_top-border.cu-calendar-day_preselected:before,.cu-calendar-day.cu-calendar-day_top-border.cu-calendar-day_selected:before{top:-4px}.cu-calendar-day.cu-calendar-day_left-border:after{content:"";display:block;position:absolute;width:1px;height:calc(100% + 1px);background:#d5d6d7;top:0;left:0}.dark-theme .cu-calendar-day.cu-calendar-day_left-border:after{background:#828588}.cu-calendar-day.cu-calendar-day_left-border.cu-calendar-day_preselected:after,.cu-calendar-day.cu-calendar-day_left-border.cu-calendar-day_selected:after{top:-4px;height:calc(100% + 9px)}.cu-calendar-day__cell{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;height:24px;width:24px;line-height:1;margin:0;display:flex;align-items:center;justify-content:center;border-radius:50%!important;border:none;color:#292d34;z-index:2;cursor:pointer}.dark-theme .cu-calendar-day__cell{color:#d5d6d7}.cu-calendar-day__cell:hover{background-color:#e9ebf0;color:#292d34}.dark-theme .cu-calendar-day__cell:hover{background-color:#2b343b;color:#d5d6d7}.cu-calendar-day__cell:hover:before{display:none}.cu-calendar-day.cu-calendar-day_is-muted{opacity:.5}.cu-calendar-day.cu-calendar-day_is-disabled{opacity:.3;pointer-events:none}.cu-calendar-day.cu-calendar-day_is-past .cu-calendar-day__cell{color:#abaeb0}.dark-theme .cu-calendar-day.cu-calendar-day_is-past{color:#384047}.cu-calendar-day.cu-calendar-day_today .cu-calendar-day__cell{color:var(--theme-main-color);font-weight:600}.cu-calendar-day.cu-calendar-day_preselected,.cu-calendar-day.cu-calendar-day_selected{background-color:var(--theme-main-color-light);height:22px;margin:4px 0}.cu-calendar-day.cu-calendar-day_preselected .cu-calendar-day__cell,.cu-calendar-day.cu-calendar-day_selected .cu-calendar-day__cell{transition:none}.dark-theme .cu-calendar-day.cu-calendar-day_preselected .cu-calendar-day__cell,.dark-theme .cu-calendar-day.cu-calendar-day_selected .cu-calendar-day__cell{color:#292d34}.cu-calendar-day.cu-calendar-day_preselected .cu-calendar-day__cell:hover,.cu-calendar-day.cu-calendar-day_selected .cu-calendar-day__cell:hover{background-color:var(--theme-main-color);color:#fff}.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_end,.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_start,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_end,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_start{background-color:transparent}.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_end .cu-calendar-day__cell,.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_start .cu-calendar-day__cell,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_end .cu-calendar-day__cell,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_start .cu-calendar-day__cell{background-color:var(--theme-main-color);border:2px solid transparent;color:#fff;font-weight:500;height:18px;width:18px;box-shadow:0 2px 5px 0 rgba(0,0,0,.2)}.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_start:after,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_start:after{content:"";position:absolute;right:0;top:0;width:12px;height:22px;background-color:var(--theme-main-color-light);z-index:1}.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_end:after,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_end:after{content:"";position:absolute;left:0;top:0;width:12px;height:22px;background-color:var(--theme-main-color-light);z-index:1}.cu-calendar-day.cu-calendar-day_preselected.cu-calendar-day_start.cu-calendar-day_end:after,.cu-calendar-day.cu-calendar-day_selected.cu-calendar-day_start.cu-calendar-day_end:after{display:none}.cu-calendar-day.cu-calendar-day_end .cu-calendar-day__cell,.cu-calendar-day.cu-calendar-day_start .cu-calendar-day__cell{height:24px!important;width:24px!important}.cu-calendar-day.cu-calendar-day_deselected{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;opacity:.2}.cu-calendar-day.cu-calendar-day_deselected:hover{transition:none}.cu-calendar-day.cu-calendar-day_recur .cu-calendar-day__cell{background-color:var(--theme-main-color-light);border-top:2px solid var(--theme-main-color-light);border-bottom:2px solid var(--theme-main-color-light);height:20px;width:20px}.dark-theme .cu-calendar-day.cu-calendar-day_recur .cu-calendar-day__cell{color:#292d34}.cu-calendar-day.cu-calendar-day_recur .cu-calendar-day__cell:hover{width:24px;height:24px}.cu-calendar-picker__calendar-body-due-active .cu-calendar-day_end,.cu-calendar-picker__calendar-body-start-active .cu-calendar-day_start{background-color:transparent!important}.cu-calendar-picker__calendar-body-due-active .cu-calendar-day_end:after,.cu-calendar-picker__calendar-body-start-active .cu-calendar-day_start:after{width:10px!important}.cu-calendar-picker__calendar-body-due-active .cu-calendar-day_end .cu-calendar-day__cell,.cu-calendar-picker__calendar-body-start-active .cu-calendar-day_start .cu-calendar-day__cell{border:2px solid #fff!important;height:26px!important;width:26px!important}'],encapsulation:2,changeDetection:0}),e})();function R(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-calendar-day",1),o.qc("click",function(i){o.Uc(e);const n=t.$implicit;return o.uc().clickDay(i,n.date)})("mouseenter",function(){o.Uc(e);const i=t.$implicit;return o.uc().hoverDay(i.date)}),o.vc(2,"async"),o.vc(3,"async"),o.vc(4,"async"),o.vc(5,"async"),o.vc(6,"async"),o.vc(7,"async"),o.vc(8,"async"),o.vc(9,"async"),o.vc(10,"async"),o.vc(11,"async"),o.vc(12,"async"),o.vc(13,"async"),o.vc(14,"async"),o.vc(15,"async"),o.vc(16,"async"),o.vc(17,"async"),o.vc(18,"async"),o.vc(19,"async"),o.bc(),o.Zb()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc();let s=null,c=null,a=null,r=null,l=null;o.Ib(1),o.Dc("day",e.date)("isToday",o.wc(2,13,n.todayIndex$)===i)("isPast",e.isPast)("isMuted",e.isMuted)("isDisabled",e.isDisabled)("topBorder",e.topBorder)("leftBorder",e.leftBorder)("isSelected",(null==(s=o.wc(3,15,n.selectedIndexes$))?null:s.from)<=i&&(null==(s=o.wc(4,17,n.selectedIndexes$))?null:s.to)>=i)("isDeselected",(null==(c=o.wc(5,19,n.selectedIndexes$))?null:c.from)<=i&&(null==(c=o.wc(6,21,n.selectedIndexes$))?null:c.to)>=i&&o.wc(7,23,n.preSelectedIndexes$)&&!((null==(c=o.wc(8,25,n.preSelectedIndexes$))?null:c.from)<=i&&(null==(c=o.wc(9,27,n.preSelectedIndexes$))?null:c.to)>=i))("isPreselected",!((null==(a=o.wc(10,29,n.selectedIndexes$))?null:a.from)<=i&&(null==(a=o.wc(11,31,n.selectedIndexes$))?null:a.to)>=i)&&o.wc(12,33,n.preSelectedIndexes$)&&(null==(a=o.wc(13,35,n.preSelectedIndexes$))?null:a.from)<=i&&(null==(a=o.wc(14,37,n.preSelectedIndexes$))?null:a.to)>=i)("isRecur",o.wc(15,39,n.recurIndexMap$)[i])("isStart",(null==(r=o.wc(16,41,n.selectedIndexes$))?null:r.from)===i||(null==(r=o.wc(17,43,n.preSelectedIndexes$))?null:r.from)===i)("isEnd",(null==(l=o.wc(18,45,n.selectedIndexes$))?null:l.to)===i||(null==(l=o.wc(19,47,n.preSelectedIndexes$))?null:l.to)===i)}}const M=(e,t)=>((e,t)=>t?t.startOf("day").format():"empty_"+e)(e,t.date);let F=(()=>{class e{constructor(){this.mode="single",this.dateActive="due",this.hoverSelection=!1,this.onSelect=new o.o,this.onHoverDay=new o.o,this.date$=new _.a(null),this.selectedDate$=new _.a(null),this.viewDate$=new _.a(null),this.startDate$=new _.a(null),this.recurDays$=new _.a(null),this.hoveredDate$=new _.a(null),this.dateActive$=new _.a(this.dateActive),this.startOfView$=this.date$.pipe(Object(O.a)(e=>e&&e.clone().startOf("week")),Object(S.a)({refCount:!0,bufferSize:1})),this.endOfView$=this.date$.pipe(Object(O.a)(e=>e&&e.clone().endOf("week")),Object(S.a)({refCount:!0,bufferSize:1})),this.viewDays$=Object(D.a)([this.date$,this.viewDate$,this.startOfView$,this.endOfView$]).pipe(Object(O.a)(([e,t,i,o])=>{const n=[],c=s()();if(e&&i&&o){const e=i.clone();for(;e.isSameOrBefore(o,"day");)n.push({date:e.clone(),isPast:e.isBefore(c,"day"),isMuted:t&&!e.isSame(t,"month")&&!e.isAfter(t,"month"),isDisabled:!!this.disabledCallback&&this.disabledCallback(e),topBorder:e.date()<=7,leftBorder:1===e.date()&&0!==e.weekday()}),e.add(1,"day")}return n}),Object(S.a)({refCount:!0,bufferSize:1})),this.todayIndex$=this.startOfView$.pipe(Object(O.a)(e=>e&&s()().startOf("day").diff(e,"days")),Object(S.a)({refCount:!0,bufferSize:1})),this.selectedIndexes$=Object(D.a)([this.startOfView$,this.startDate$,this.selectedDate$]).pipe(Object(O.a)(([e,t,i])=>a(e,t,i)),Object(S.a)({refCount:!0,bufferSize:1})),this.preSelectedIndexes$=Object(D.a)([this.startOfView$,this.startDate$,this.selectedDate$,this.hoveredDate$,this.dateActive$]).pipe(Object(O.a)(([e,t,i,o,n])=>{if(!o||!t&&!i)return;let s,c;return"start"===n?(s=o,c=o.isAfter(i||t,"day")?o:i):(s=o.isBefore(t||i,"day")?o:t,c=o),s&&c?a(e,s,c):void 0}),Object(S.a)({refCount:!0,bufferSize:1})),this.recurIndexMap$=Object(D.a)([this.startOfView$,this.recurDays$]).pipe(Object(O.a)(([e,t])=>e&&t&&t.reduce((t,i)=>(t[i.clone().startOf("day").diff(e,"days")]=!0,t),{})||{}),Object(S.a)({refCount:!0,bufferSize:1})),this.trackByDate=M}ngOnInit(){}ngOnDestroy(){}ngOnChanges(e){e.date&&this.date$.next(this.date),e.selectedDate&&this.selectedDate$.next(this.selectedDate),e.viewDate&&this.viewDate$.next(this.viewDate),e.startDate&&this.startDate$.next(this.startDate),e.recurDays&&this.recurDays$.next(this.recurDays),(e.hoverSelection||e.hoveredDate)&&this.hoveredDate$.next(this.hoverSelection?this.hoveredDate:null),e.dateActive&&this.dateActive$.next(this.dateActive)}clickDay(e,t){this.onSelect.emit("start"===this.dateActive?{startDate:t}:{dueDate:t})}hoverDay(e){this.hoverSelection&&this.onHoverDay.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-calendar-week"]],hostAttrs:[1,"cu-calendar-week"],inputs:{date:"date",selectedDate:"selectedDate",viewDate:"viewDate",startDate:"startDate",recurDays:"recurDays",hoveredDate:"hoveredDate",mode:"mode",dateActive:"dateActive",hoverSelection:"hoverSelection",disabledCallback:"disabledCallback"},outputs:{onSelect:"onSelect",onHoverDay:"onHoverDay"},features:[o.Gb],decls:2,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-calendar-week__item",3,"day","isToday","isPast","isMuted","isDisabled","topBorder","leftBorder","isSelected","isDeselected","isPreselected","isRecur","isStart","isEnd","click","mouseenter"]],template:function(e,t){1&e&&(o.bd(0,R,20,49,"ng-container",0),o.vc(1,"async")),2&e&&o.Dc("ngForOf",o.wc(1,2,t.viewDays$))("ngForTrackBy",t.trackByDate)},directives:[y.p,U],pipes:[y.b],styles:[".cu-calendar-week{display:flex;justify-content:space-between;flex-wrap:wrap}.cu-calendar-week__item{flex-grow:1;flex-basis:0;flex-shrink:0}"],encapsulation:2,changeDetection:0}),e})();var L=i("F6QV"),N=i("VhLi");const z=["virtualScrollViewport"],q=["remapDueDatesPopover"];function G(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-datetime-input",22),o.qc("onInputActive",function(t){o.Uc(e);const i=o.uc(2);return t?i.activateInput("start"):i.cancelInput("start")})("onParsedDate",function(t){return o.Uc(e),o.uc(2).changeParsedDate("start",t)})("onClearDate",function(){return o.Uc(e),o.uc(2).clearDate("start")})("onSelectTime",function(t){return o.Uc(e),o.uc(2).selectTime("start",t)})("click",function(){return o.Uc(e),o.uc(2).activateInput("start")}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("dateFormatting",e.dateFormatting)("placeholder","Enter any date"+(e.noTime?"...":" or time..."))("title",e.startTitle||"Start date")("value",e.startDate)("timeExists",e.startTimeExists)("isActive","start"===e.dateActive)("enableFocusAndSelectOnClick",e.enableFocusAndSelectOnClick)("showTimeDropdown",e.showTimeDropdown)("isInputActive",e.inputStartActive)("type","start")("iconName","cu2-start-date")("allowRRule",e.showRecurring)("noTime",e.noTime)("allowClear",e.allowClear)}}function V(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-datetime-input",23,24),o.qc("onInputActive",function(t){o.Uc(e);const i=o.uc(2);return t?i.activateInput("due"):i.cancelInput("due")})("onParsedDate",function(t){return o.Uc(e),o.uc(2).changeParsedDate("due",t)})("onClearDate",function(){return o.Uc(e),o.uc(2).clearDate("due")})("onSelectTime",function(t){return o.Uc(e),o.uc(2).selectTime("due",t)})("click",function(){return o.Uc(e),o.uc(2).activateInput("due")}),o.bc()}if(2&e){const e=o.uc(2),t=o.Rc(22);o.Dc("popover",t)("dateFormatting",e.dateFormatting)("placeholder","Enter any date"+(e.noTime?"...":" or time..."))("title",e.dateTitle||"Due date")("value",e.selectedDate)("enableFocusAndSelectOnClick",e.enableFocusAndSelectOnClick)("showTimeDropdown",e.showTimeDropdown)("timeExists",e.dueTimeExists)("isActive","due"===e.dateActive)("isInputActive",e.inputDueActive)("autoFocus",e.quickDone)("type","due")("allowRRule",e.showRecurring)("noTime",e.noTime)("allowClear",e.allowClear)}}function B(e,t){if(1&e&&(o.cc(0,"div",19),o.bd(1,G,1,14,"cu-datetime-input",20),o.bd(2,V,2,15,"cu-datetime-input",21),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",e.showStart&&e.dateOption!==e.DateOptions.DUE),o.Ib(1),o.Dc("ngIf",e.dateOption!==e.DateOptions.START)}}function X(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-quick-date-options",28),o.qc("onSelect",function(t){return o.Uc(e),o.uc(2).selectQuickItem(t)}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("value","start"===e.dateActive?e.startDate:e.selectedDate)("timeExists","start"===e.dateActive?e.startTimeExists:e.dueTimeExists)("quickClear",e.quickClear)("noTime",e.noTime)}}function H(e,t){}const W=function(){return{}};function K(e,t){if(1&e&&o.bd(0,H,0,0,"ng-template",31),2&e){const e=o.uc(3);o.Dc("ngTemplateOutlet",e.extendedTemplate)("ngTemplateOutletContext",o.Gc(2,W))}}function Q(e,t){if(1&e&&(o.cc(0,"div",29),o.bd(1,K,1,3,void 0,30),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",e.isExtended&&e.extendedTemplate)}}function Z(e,t){if(1&e&&(o.cc(0,"div",25),o.bd(1,X,1,4,"cu-quick-date-options",26),o.bd(2,Q,2,1,"div",27),o.bc()),2&e){const e=o.uc();o.Ob("cu-calendar-picker__sidebar-options",!e.isExtended)("cu-calendar-picker__sidebar-recur",e.isExtended)("cu-calendar-picker__sidebar-quick-clear",e.quickClear),o.Ib(1),o.Dc("ngIf",!e.isExtended),o.Ib(1),o.Dc("ngIf",e.isExtended&&e.extendedTemplate)}}function Y(e,t){if(1&e&&(o.cc(0,"div",32),o.dd(1),o.bc()),2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e," ")}}function J(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-calendar-week",35),o.qc("onSelect",function(t){return o.Uc(e),o.uc(2).selectDate(t)})("onHoverDay",function(t){return o.Uc(e),o.uc(2).hoverDay(t)}),o.bc()}if(2&e){const e=o.uc().$implicit,t=o.uc();o.Dc("date",e)("selectedDate",t.selectedDate)("viewDate",t.viewportDate)("startDate",t.startDate)("recurDays",t.recurDays)("mode",t.showStart&&t.dateOption===t.DateOptions.BOTH?"range":"single")("dateActive",t.dateActive)("hoverSelection",(t.selectedDate||"due"===t.dateActive)&&(t.startDate||"start"===t.dateActive)&&t.dateOption===t.DateOptions.BOTH)("hoveredDate",t.hoveredDate)("disabledCallback",t.disabledCallback)}}function ee(e,t){if(1&e&&(o.cc(0,"div",33),o.bd(1,J,1,10,"cu-calendar-week",34),o.bc()),2&e){const e=t.$implicit,i=o.uc();o.ad("height",i.rowHeight,"px"),o.Ob("dont-grey-out-dates",i.dontGreyDates),o.Ib(1),o.Dc("ngIf",e)}}function te(e,t){1&e&&(o.ac(0),o.gc(1,39),o.Zb())}function ie(e,t){if(1&e&&o.dd(0),2&e){const e=o.uc(2);o.fd(" ",e.isSaveText," ")}}function oe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",36),o.qc("click",function(){return o.Uc(e),o.uc().done()}),o.bd(1,te,2,0,"ng-container",37),o.bd(2,ie,1,1,"ng-template",null,38,o.cd),o.bc()}if(2&e){const e=o.Rc(3),t=o.uc();o.Ib(1),o.Dc("ngIf",!t.isSaveText)("ngIfElse",e)}}function ne(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-remap-subtasks-popover",40),o.qc("cancel",function(){o.Uc(e);const t=o.uc();return t.remapDates(t.lastSelectedDates,!1)})("confirm",function(){o.Uc(e);const t=o.uc();return t.remapDates(t.lastSelectedDates,"adjust")}),o.bc()}}const se=["*"];let ce=(()=>{class e{constructor(e,t){this.ngZone=e,this.changeDetectorRef=t,this.calendarHeight=195,this.rowHeight=30,this.destroy$=new d.a,this.dataSource=new v(!0),this.allowClear=!0,this.mode="single",this.dontGreyDates=!1,this.showTime=!0,this.showStart=!0,this.showRecurring=!1,this.dateOption=k.b.BOTH,this.enableFocusAndSelectOnClick=!0,this.showTimeDropdown=!0,this.showInputs=!0,this.forceStart=!1,this.forceDue=!0,this.dueTimeExists=!1,this.startHour=4,this.weekStart=0,this.quickDone=!1,this.quickClear=!1,this.isExtended=!1,this.noTime=!1,this.showQuickOptions=!0,this.onDateChange=new o.o,this.onViewPeriodChange=new o.o,this.onRecurringChange=new o.o,this.onSelect=new o.o,this.onInputActive=new o.o,this.viewportIndex=0,this.viewportDate=s()(),this.scrolledToSelected=!1,this.weekDays=Object(n.weekdaysMin)(!0).map(e=>e&&e.substring(0,1)),this.inputStartActive=!1,this.inputDueActive=!0,this.dateActive="due",this.DateOptions=k.b,this.trackByWeek=c,this.trackByValue=l.f}get selectedDate(){return this.dateVal}get startDate(){return this.startDateVal}set selectedDate(e){this.dateVal=Object(r.j)(e)}set startDate(e){this.startDateVal=Object(r.j)(e)}ngOnInit(){this.virtualScrollViewport.renderedRangeStream.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{this.scrolledToSelected&&this.onViewPeriodChange.emit({start:this.dataSource.getDateByIndex(e.start),end:this.dataSource.getDateByIndex(e.end)})}),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this.virtualScrollViewport.elementScrolled().pipe(Object(p.a)(null),Object(h.a)(0,u.a),Object(m.a)(this.destroy$)).subscribe(e=>{const t=this.virtualScrollViewport.measureScrollOffset(),i=Math.floor((t+this.rowHeight/3)/this.rowHeight);e&&this.viewportIndex===i||this.ngZone.run(()=>{this.indexChanged(i),this.changeDetectorRef.markForCheck()})})}))}ngAfterViewInit(){}ngOnChanges(e){e.selectedDate&&!e.selectedDate.previousValue&&this.selectedDate&&this.scrolledToSelected&&this.scrollToSelectedDate("due"),(e.forceDue||e.forceStart)&&(this.inputDueActive=this.forceDue,this.inputStartActive=!this.inputDueActive&&this.forceStart,this.dateActive=this.inputStartActive?"start":"due"),e.dateOption&&(this.dateOption===k.b.DUE&&(this.inputStartActive=!1,this.inputDueActive=!0,this.dateActive="due"),this.dateOption===k.b.START&&(this.inputStartActive=!0,this.inputDueActive=!1,this.dateActive="start"))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}indexChanged(e){this.viewportIndex=e;const t=this.dataSource.getDateByIndex(e),i=t.daysInMonth()-t.date()+1;this.viewportDate=i>=21?t.clone().startOf("month"):t.clone().startOf("month").add(1,"month"),this.scrolledToSelected||0!==e||this.scrollToSelectedDate("due")}scrollToSelectedDate(e,t=0){this.dataSource.disabled=!1,this.scrolledToSelected=!0;const i="start"===e?this.startDate:this.selectedDate;this.virtualScrollViewport.scrollToIndex(this.dataSource.getIndex(i?i.clone().startOf("month"):s()().startOf("month"),!0)),t<5&&setTimeout(()=>{0===this.viewportIndex&&this.scrollToSelectedDate(e,t+1)})}prevMonth(){this.moveMonth(-1)}nextMonth(){this.moveMonth(1)}moveMonth(e){const t=this.viewportDate.clone().startOf("month").add(e,"month"),i=this.dataSource.getIndex(t,!0);this.virtualScrollViewport.scrollToIndex(i,"smooth")}today(){this.virtualScrollViewport.scrollToIndex(this.dataSource.getIndex(s()().startOf("month")),"auto")}getNewDate(e,t,i,o){const n=Boolean(o&&this.showTime);let s;switch(i){case"date":s=n?Object(r.a)(t,e):t;break;case"time":s=Object(r.a)(e,t);break;default:s=t}return{newDate:s,newTimeExists:n}}adjustTime(){this.selectedDate&&!this.dueTimeExists&&this.selectedDate.hours(this.startHour).minutes(0).seconds(0).milliseconds(0),this.startDate&&!this.startTimeExists&&this.startDate.hours(this.startHour).minutes(0).seconds(0).milliseconds(0)}changeDate(e,t,i,o,n){const s="start"===e?this.startDate:this.selectedDate,c="start"===e?this.startTimeExists:this.dueTimeExists,{newDate:a,newTimeExists:r}=this.getNewDate(s,t,i,o);if(a&&s&&Boolean(c)===Boolean(r)&&s.isSame(a,r?"minute":"day"))return!1;this.adjustTime(),"start"===e?(this.startDate=a,this.startTimeExists=r,this.selectedDate&&this.startDate&&(this.startTimeExists&&this.selectedDate.isBefore(this.startDate,"minute")||!this.startTimeExists&&this.selectedDate.isBefore(this.startDate,"day"))&&(this.selectedDate=null,this.dueTimeExists&&!this.startTimeExists&&(this.dueTimeExists=!1),this.adjustTime())):(this.selectedDate=a,this.dueTimeExists=r,this.adjustTime(),this.selectedDate&&this.startDate&&this.selectedDate.isBefore(this.startDate,"minute")&&!this.selectedDate.isBefore(this.startDate,"day")?(this.dueTimeExists=!0,this.startTimeExists=!0,this.selectedDate=this.startDate.clone().add(1,"hour")):this.selectedDate&&this.startDate&&(this.dueTimeExists&&this.selectedDate.isBefore(this.startDate,"minute")||!this.dueTimeExists&&this.selectedDate.isBefore(this.startDate,"day"))&&(this.startDate=this.selectedDate,!this.dueTimeExists&&this.startTimeExists&&(this.startTimeExists=!1)));const l=this.viewportDate&&a&&!this.viewportDate.isSame(a,"month")&&(!this.selectedDate||!this.startDate);return(n||l)&&this.scrollToSelectedDate(e),this.notifyDateChange(),!0}changeParsedDate(e,t){t.date&&t.date.moment&&(this.changeDate(e,t.date.moment,"full",t.date.updateTime,!0)||this.cancelInput(e)),t.rrule&&t.rrule.options&&(this.onRecurringChange.emit(t.rrule.options),this.cancelInput(e)),this.selectedDate&&this.quickDone&&this.done()}selectDate(e){e.startDate?(this.dateOption===k.b.BOTH&&(this.dateActive=e.dueDate?"start":"due"),this.changeDate("start",e.startDate,"date",this.startTimeExists,!1)):e.dueDate&&(this.dateActive="due",this.changeDate("due",e.dueDate,"date",this.dueTimeExists,!1)),this.cancelInput("start"),this.cancelInput("due")}cancelInput(e){"start"===e?this.inputStartActive=!1:this.inputDueActive=!1,this.onInputActive.emit(this.inputDueActive||this.inputStartActive)}activateInput(e){"start"===e?(this.inputStartActive=!0,this.inputDueActive=!1,this.dateActive="start"):(this.inputStartActive=!1,this.inputDueActive=!0,this.dateActive="due"),this.onInputActive.emit(this.inputDueActive||this.inputStartActive)}clearDate(e){"start"===e?(this.inputStartActive=!1,this.dateActive="due"):this.inputDueActive=!1,this.changeDate(e,null,"full",!1,!1)}done(){this.onSelect.emit({dueDate:this.selectedDate,dueDateTime:this.dueTimeExists,startDate:this.startDate,startDateTime:this.startTimeExists})}notifyDateChange(){this.onDateChange.emit({dueDate:this.selectedDate,dueDateTime:this.dueTimeExists,startDate:this.startDate,startDateTime:this.startTimeExists})}selectTime(e,t){this.changeDate(e,t,"time",!0,!1)}selectQuickItem(e){this.changeDate(this.dateActive,e.value,e.isTime?"full":"date",e.isTime,!0),(this.selectedDate&&(this.quickDone||"due"===this.dateActive&&!this.startDate)||e.id===b.d.code)&&this.done()}remapDates(e,t){this.lastSelectedDates=null,this.remapDueDatesPopover&&this.remapDueDatesPopover.hide(),this.onSelect.emit(Object.assign(Object.assign({},e),{remapDueDates:t}))}hoverDay(e){this.hoveredDate=e}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.B),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-calendar-picker"]],viewQuery:function(e,t){if(1&e&&(o.jd(z,3),o.jd(q,1)),2&e){let e;o.Qc(e=o.rc())&&(t.virtualScrollViewport=e.first),o.Qc(e=o.rc())&&(t.remapDueDatesPopover=e.first)}},hostAttrs:[1,"cu-calendar-picker"],inputs:{allowClear:"allowClear",dateFormatting:"dateFormatting",mode:"mode",dontGreyDates:"dontGreyDates",selectedDate:"selectedDate",startDate:"startDate",recurDays:"recurDays",showTime:"showTime",showStart:"showStart",showRecurring:"showRecurring",dateOption:"dateOption",enableFocusAndSelectOnClick:"enableFocusAndSelectOnClick",showTimeDropdown:"showTimeDropdown",showInputs:"showInputs",forceStart:"forceStart",forceDue:"forceDue",isSaveText:"isSaveText",startTimeExists:"startTimeExists",dueTimeExists:"dueTimeExists",startHour:"startHour",militaryTime:"militaryTime",weekStart:"weekStart",quickDone:"quickDone",quickClear:"quickClear",isExtended:"isExtended",extendedTemplate:"extendedTemplate",noTime:"noTime",dateTitle:"dateTitle",startTitle:"startTitle",showQuickOptions:"showQuickOptions",disabledCallback:"disabledCallback"},outputs:{onDateChange:"onDateChange",onViewPeriodChange:"onViewPeriodChange",onRecurringChange:"onRecurringChange",onSelect:"onSelect",onInputActive:"onInputActive"},features:[o.Gb],ngContentSelectors:se,decls:23,vars:19,consts:function(){let e,t,i,o;return e=$localize`:@@common_today␟09189e1003b3fdda5f22e87b867219f98a14b6d3␟5984537629594426750: Today `,t=$localize`:@@cu-calendar-picker__tooltip-msg_previous-month␟926662b24fac3869ea6dc3708607c69aa3d57492␟3314245895634017103:Previous Month`,i=$localize`:@@cu-calendar-picker__tooltip-msg_next-month␟9d3850d8cb18071d573e3505779d668428f8adfc␟5356491740033235590:Next Month`,o=$localize`:@@common_close␟6cb1a9de15616c0b4efdd54cc10b58a166b9e016␟3935920932340410342: Close `,[["class","cu-calendar-picker__inputs",4,"ngIf"],[1,"cu-calendar-picker__body"],["class","cu-calendar-picker__sidebar",3,"cu-calendar-picker__sidebar-options","cu-calendar-picker__sidebar-recur","cu-calendar-picker__sidebar-quick-clear",4,"ngIf"],[1,"cu-calendar-picker__calendar"],[1,"cu-calendar-picker__calendar-nav"],[1,"cu-calendar-picker__calendar-nav-month"],[1,"cu-calendar-picker__calendar-nav-controls"],[1,"cu-calendar-picker__calendar-nav-controls-item","cu-calendar-picker__calendar-nav-controls-today",3,"click"],e,["cuTooltip",t,"icon","cu2-chevron-right",1,"cu-calendar-picker__calendar-nav-controls-item","cu-calendar-picker__calendar-nav-controls-prev",3,"click"],["cuTooltip",i,"icon","cu2-chevron-right",1,"cu-calendar-picker__calendar-nav-controls-item","cu-calendar-picker__calendar-nav-controls-next",3,"click"],[1,"cu-calendar-picker__calendar-body",3,"mouseleave"],[1,"cu-calendar-picker__calendar-weekdays"],["class","cu-calendar-picker__calendar-weekday",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-calendar-picker__calendar-viewport",3,"itemSize"],["virtualScrollViewport",""],["class","cu-calendar-picker__calendar-item",3,"height","dont-grey-out-dates",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize","cdkVirtualForTrackBy"],["class","cu-calendar-picker__done",3,"click",4,"ngIf"],["remapDueDatesPopoverTemplate",""],[1,"cu-calendar-picker__inputs"],[3,"dateFormatting","placeholder","title","value","timeExists","isActive","enableFocusAndSelectOnClick","showTimeDropdown","isInputActive","type","iconName","allowRRule","noTime","allowClear","onInputActive","onParsedDate","onClearDate","onSelectTime","click",4,"ngIf"],["containerClass","remap-subtask-due-dates-popover","triggers","","placement","bottom","container","body",3,"popover","dateFormatting","placeholder","title","value","enableFocusAndSelectOnClick","showTimeDropdown","timeExists","isActive","isInputActive","autoFocus","type","allowRRule","noTime","allowClear","onInputActive","onParsedDate","onClearDate","onSelectTime","click",4,"ngIf"],[3,"dateFormatting","placeholder","title","value","timeExists","isActive","enableFocusAndSelectOnClick","showTimeDropdown","isInputActive","type","iconName","allowRRule","noTime","allowClear","onInputActive","onParsedDate","onClearDate","onSelectTime","click"],["containerClass","remap-subtask-due-dates-popover","triggers","","placement","bottom","container","body",3,"popover","dateFormatting","placeholder","title","value","enableFocusAndSelectOnClick","showTimeDropdown","timeExists","isActive","isInputActive","autoFocus","type","allowRRule","noTime","allowClear","onInputActive","onParsedDate","onClearDate","onSelectTime","click"],["remapDueDatesPopover","bs-popover"],[1,"cu-calendar-picker__sidebar"],["class","cu-calendar-picker__quick",3,"value","timeExists","quickClear","noTime","perfectScrollbar","onSelect",4,"ngIf"],["class","cu-recurring-date-dropdown__repeat",4,"ngIf"],[1,"cu-calendar-picker__quick",3,"value","timeExists","quickClear","noTime","perfectScrollbar","onSelect"],[1,"cu-recurring-date-dropdown__repeat"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-calendar-picker__calendar-weekday"],[1,"cu-calendar-picker__calendar-item"],[3,"date","selectedDate","viewDate","startDate","recurDays","mode","dateActive","hoverSelection","hoveredDate","disabledCallback","onSelect","onHoverDay",4,"ngIf"],[3,"date","selectedDate","viewDate","startDate","recurDays","mode","dateActive","hoverSelection","hoveredDate","disabledCallback","onSelect","onHoverDay"],[1,"cu-calendar-picker__done",3,"click"],[4,"ngIf","ngIfElse"],["saveNotClose",""],o,[3,"cancel","confirm"]]},template:function(e,t){1&e&&(o.Cc(),o.bd(0,B,3,2,"div",0),o.cc(1,"div",1),o.bd(2,Z,3,8,"div",2),o.cc(3,"div",3),o.cc(4,"div",4),o.cc(5,"div",5),o.dd(6),o.vc(7,"momentDate"),o.bc(),o.cc(8,"div",6),o.cc(9,"div",7),o.qc("click",function(){return t.today()}),o.gc(10,8),o.bc(),o.cc(11,"div",9),o.qc("click",function(){return t.prevMonth()}),o.bc(),o.cc(12,"div",10),o.qc("click",function(){return t.nextMonth()}),o.bc(),o.bc(),o.bc(),o.cc(13,"div",11),o.qc("mouseleave",function(){return t.hoverDay(null)}),o.cc(14,"div",12),o.bd(15,Y,2,1,"div",13),o.bc(),o.cc(16,"cdk-virtual-scroll-viewport",14,15),o.bd(18,ee,2,5,"div",16),o.bc(),o.bc(),o.bd(19,oe,4,2,"div",17),o.bc(),o.bc(),o.Bc(20),o.bd(21,ne,1,0,"ng-template",null,18,o.cd)),2&e&&(o.Dc("ngIf",t.showInputs),o.Ib(2),o.Dc("ngIf",t.showQuickOptions||t.isExtended),o.Ib(4),o.fd(" ",o.xc(7,16,t.viewportDate,"MMM YYYY")," "),o.Ib(7),o.Ob("cu-calendar-picker__calendar-body-start-active","start"===t.dateActive)("cu-calendar-picker__calendar-body-due-active","due"===t.dateActive),o.Ib(2),o.Dc("ngForOf",t.weekDays)("ngForTrackBy",t.trackByValue),o.Ib(1),o.ad("height",t.calendarHeight,"px"),o.Dc("itemSize",t.rowHeight),o.Ib(2),o.Dc("cdkVirtualForOf",t.dataSource)("cdkVirtualForTemplateCacheSize",0)("cdkVirtualForTrackBy",t.trackByWeek),o.Ib(1),o.Dc("ngIf",!t.isExtended))},directives:[y.q,w.a,x.a,y.p,I.c,I.a,I.b,T.a,C.c,j,A.a,y.x,F,L.a],pipes:[N.a],styles:['.cu-calendar-picker{display:block;position:relative}.cu-calendar-picker__inputs{display:flex;align-items:center;border-bottom:1px solid #e4e4e4;height:49px;padding:0 8px}.dark-theme .cu-calendar-picker__inputs{border-bottom-color:#1e272e}.cu-calendar-picker__body{display:flex;background-color:#fff}.dark-theme .cu-calendar-picker__body{background-color:#384047}.cu-calendar-picker__sidebar{transition:max-width .3s cubic-bezier(.785,.135,.15,.86) 0s;padding:0;border-right:1px solid #e4e4e4;background-color:#fafbfc}.dark-theme .cu-calendar-picker__sidebar{background-color:#2b343b}.cu-calendar-picker__sidebar-options{max-width:150px;width:140px}.cu-calendar-picker__sidebar-options .cu-calendar-picker__quick .ps__rail-y,.cu-calendar-picker__sidebar-options .cu-calendar-picker__quick .ps__thumb-y{display:none}.cu-calendar-picker__sidebar-recur{max-width:300px;background-color:#fff}.dark-theme .cu-calendar-picker__sidebar-recur{background-color:#384047!important}.dark-theme .cu-calendar-picker__sidebar{border-right-color:#1e272e}.cu-calendar-picker__sidebar .cu-recurring-date-dropdown__repeat .cu-recurring-options__row .cu-dropdown__toggle{text-decoration:none}.cu-calendar-picker__done{background:#7b68ee;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:11px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 1px 5px 0 rgba(0,0,0,.1);position:absolute;right:0;bottom:0;color:#fff;padding:9px 17px;border-bottom-right-radius:3px;border-top-left-radius:3px;z-index:10}@supports (--theme-main-color:#7b68ee){.cu-calendar-picker__done{background:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-calendar-picker__done{font-family:var(--global-font-support)}}.cu-calendar-picker__done:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-calendar-picker__done:hover{background:var(--theme-main-color-dark)}}.cu-calendar-picker__calendar{padding-top:17px;background-color:#fff;height:100%;overflow:hidden}.dark-theme .cu-calendar-picker__calendar{background-color:#384047}.cu-calendar-picker__calendar-nav{display:flex;align-items:center;padding:0 12px 10px}.cu-calendar-picker__calendar-nav-controls{display:flex;justify-content:space-between;align-items:center;margin-right:3px}.cu-calendar-picker__calendar-nav-controls-item{cursor:pointer}.cu-calendar-picker__calendar-nav-controls-next,.cu-calendar-picker__calendar-nav-controls-prev{transition:background .2s cubic-bezier(.785,.135,.15,.86),fill .2s cubic-bezier(.785,.135,.15,.86);width:16px;height:16px;padding:3px 3px 3px 4px;border-radius:2px;transform:rotate(90deg);background:#e9ebf0;fill:#7c828d}.dark-theme .cu-calendar-picker__calendar-nav-controls-next,.dark-theme .cu-calendar-picker__calendar-nav-controls-prev{background:#2b343b}.cu-calendar-picker__calendar-nav-controls-next:hover,.cu-calendar-picker__calendar-nav-controls-prev:hover{background:#7b68ee;fill:#fff}@supports (--theme-main-color:#7b68ee){.cu-calendar-picker__calendar-nav-controls-next:hover,.cu-calendar-picker__calendar-nav-controls-prev:hover{background:var(--theme-main-color)}}.cu-calendar-picker__calendar-nav-controls-prev{margin-right:5px;transform:rotate(-90deg)}.cu-calendar-picker__calendar-nav-controls-today{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86);text-transform:uppercase;font:600 10px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:12px;color:#b9bec7}.cu-calendar-picker__calendar-nav-controls-today:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-picker__calendar-nav-controls-today:hover{color:var(--theme-main-color)}}.cu-calendar-picker__calendar-nav-month{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;flex-grow:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-calendar-picker__calendar-nav-month{font-family:var(--global-font-support)}}.cu-calendar-picker__calendar-body{padding:5px 5px 0;position:relative}.cu-calendar-picker__calendar-body:before{content:"";display:block;position:absolute;width:100%;top:20px;height:8px;margin-bottom:-2px;z-index:1;pointer-events:none;background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0))}.dark-theme .cu-calendar-picker__calendar-body:before{background:linear-gradient(180deg,#384047 0,rgba(56,64,71,0))}.cu-calendar-picker__calendar-body:after{content:"";display:block;position:sticky;width:100%;bottom:0;height:8px;margin-top:-8px;z-index:1;pointer-events:none;background:linear-gradient(0deg,#fff 0,hsla(0,0%,100%,0))}.dark-theme .cu-calendar-picker__calendar-body:after{background:linear-gradient(0deg,#384047 0,rgba(56,64,71,0))}.cu-calendar-picker__calendar-weekdays{display:flex;width:100%;margin-bottom:5px;position:relative}.cu-calendar-picker__calendar-item{position:relative;height:30px}.cu-calendar-picker__calendar-item.dont-grey-out-dates .cu-calendar-day_is-muted{opacity:1!important}.cu-calendar-picker__calendar-item.dont-grey-out-dates .cu-calendar-day_is-past{color:#292d34!important}.dark-theme .cu-calendar-picker__calendar-item.dont-grey-out-dates .cu-calendar-day_is-past{color:#d5d6d7!important}.cu-calendar-picker__calendar-item.dont-grey-out-dates .cu-calendar-day_is-past .cu-calendar-day__cell{color:#292d34!important}.dark-theme .cu-calendar-picker__calendar-item.dont-grey-out-dates .cu-calendar-day_is-past .cu-calendar-day__cell{color:#d5d6d7!important}.cu-calendar-picker__calendar-weekday{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:10px;text-transform:uppercase;text-align:center;width:14.2857%;color:#c4c4c4}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-calendar-picker__calendar-weekday{font-family:var(--global-font-support)}}.dark-theme .cu-calendar-picker__calendar-weekday{color:#828588}.cu-calendar-picker__calendar-viewport{width:221px;padding-top:10px;scrollbar-width:none}.cu-calendar-picker__calendar-viewport::-webkit-scrollbar{width:0;background:transparent}.cu-calendar-picker__calendar-viewport::-webkit-scrollbar-thumb{background:transparent}.cu-calendar-picker__calendar-viewport-label{font:300 12px Gotham Pro,Proxima Nova,arial,serif;text-align:center}.cu-calendar-picker__calendar-month-label{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;left:0;bottom:13px;width:100%;padding:0 7px 0 0}.cu-calendar-picker__calendar-month-label:hover{transition:none}.cu-calendar-picker__calendar-month-label-faded{opacity:0}.cu-calendar-picker__calendar-month-label-after-six-rows{bottom:0}.cu-calendar-picker__calendar-month-label:after{content:"";position:absolute;right:10px;top:50%;transform:translateY(-50%);width:calc(100% - 10px);height:1px;background:#e9ebf0}.cu-calendar-picker__calendar-month-label-title{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;color:#343434;background-color:#fff;position:relative;z-index:2;display:inline-block;padding-right:15px;padding-left:7px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-calendar-picker__calendar-month-label-title{font-family:var(--global-font-support)}}.dark-theme .cu-calendar-picker__calendar-month-label-title{background-color:#384047;color:#e9ebf0}.cu-recurring-date-dropdown__menu-not-recurring .cu-calendar-picker .cu-calendar-picker__sidebar:not(.cu-calendar-picker__sidebar-quick-clear){padding-bottom:35px}.cu-recurring-date-dropdown__menu-not-recurring .cu-calendar-picker .cu-recurring-date-dropdown__repeat-expand{position:absolute;left:0;bottom:0;width:140px;background-color:#fff}.dark-theme .cu-recurring-date-dropdown__menu-not-recurring .cu-calendar-picker .cu-recurring-date-dropdown__repeat-expand{background-color:#384047}.cu-recurring-date-dropdown__menu-not-recurring .cu-calendar-picker .cu-recurring-date-dropdown__repeat-expand:hover{background-color:#fafbfc}.dark-theme .cu-recurring-date-dropdown__menu-not-recurring .cu-calendar-picker .cu-recurring-date-dropdown__repeat-expand:hover{background:#2b343b}'],encapsulation:2,data:{animation:[f.f]},changeDetection:0}),e})()},PPHF:function(e,t,i){"use strict";var o=i("aCXt"),n=i("tgGP");e.exports=n,n.prototype.message=function(e,t,i){var n=new o(e,t,i);return this.path&&(n.name=this.path+":"+n.name,n.file=this.path),n.fatal=!1,this.messages.push(n),n},n.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},n.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},PPkR:function(e,t,i){"use strict";i.d(t,"a",function(){return T});var o=i("fXoL"),n=i("pLZG"),s=i("1G5W"),c=i("XNiG"),a=i("jJW4"),r=i("ofXK"),l=i("NsZK"),d=i("UdVN"),u=i("cjvU");function m(e,t){if(1&e&&o.Xb(0,"div",7),2&e){const e=o.uc(2);o.Dc("icon",e.datePickerIcon)}}function p(e,t){1&e&&(o.tc(),o.cc(0,"svg",11),o.cc(1,"g",12),o.Xb(2,"circle",13),o.Xb(3,"rect",14),o.Xb(4,"path",15),o.bc(),o.bc())}function h(e,t){1&e&&(o.tc(),o.cc(0,"svg",16),o.cc(1,"g",17),o.Xb(2,"circle",18),o.Xb(3,"rect",19),o.Xb(4,"path",20),o.bc(),o.Xb(5,"path",21),o.bc())}function f(e,t){if(1&e&&(o.cc(0,"div",8),o.bd(1,p,5,0,"svg",9),o.bd(2,h,6,0,"svg",10),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",e.forStart),o.Ib(1),o.Dc("ngIf",!e.forStart)}}function b(e,t){if(1&e&&(o.cc(0,"div",22),o.dd(1),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.fd(" ",e.datePickerTitle," ")}}function g(e,t){if(1&e&&(o.cc(0,"div",2),o.cc(1,"div",3),o.bd(2,m,1,1,"div",4),o.bd(3,f,3,2,"ng-template",null,5,o.cd),o.bc(),o.bd(5,b,2,1,"div",6),o.bc()),2&e){const e=o.Rc(4),t=o.uc();o.Dc("ngClass",t.modifier),o.Ib(1),o.Dc("cuTooltip",t.dateTimeTooltip)("tooltipDelay",t.dateTimeTooltipDelay),o.Ib(1),o.Dc("ngIf",t.datePickerIcon&&"due-date"!==t.datePickerIcon)("ngIfElse",e),o.Ib(3),o.Dc("ngIf",t.datePickerTitle)}}function _(e,t){if(1&e){const e=o.dc();o.cc(0,"div",27),o.qc("click",function(t){return o.Uc(e),o.uc(2).clearDate(t)}),o.bc()}}const v=function(e){return{"icon_due-date-calendar_start":e}};function k(e,t){if(1&e&&o.Xb(0,"div",28),2&e){const e=o.uc(2);o.Dc("ngClass",o.Hc(2,v,e.forStart))("icon",e.forStart?"start-date":"due-date")}}const y=function(){return{"flex-grow":"1"}};function w(e,t){if(1&e&&o.Xb(0,"cu-datetime",29),2&e){const e=o.uc(2);o.Dc("title",e.dateTimeTitle)("date",e.dateVal)("showTime",e.showTime)("showDay",e.showDay)("isOnTime",e.isOnTime||e.notOverdue)("noHighlight",e.noHighlight||e.forStart)("addDash",e.forStart&&e.otherDate)("ngStyle",o.Gc(10,y))("noRelational",e.noRelational)("task",e.task)}}const x=function(e){return{margin:e}};function I(e,t){if(1&e&&(o.cc(0,"div",23),o.bd(1,_,1,0,"div",24),o.bd(2,k,1,4,"div",25),o.bd(3,w,1,11,"cu-datetime",26),o.bc()),2&e){const e=o.uc();o.Ob("no-permission",e.noPermission),o.Dc("ngClass",e.modifier)("ngStyle",o.Hc(7,x,!e.forStart&&e.otherDate?"0":"")),o.Ib(1),o.Dc("ngIf",(e.showQuickClear||"due-date_board-view"===e.modifier||"due-date_list-view"===e.modifier||"due-date_subtask-view"===e.modifier||"due-date_create-task"===e.modifier)&&!e.otherDate&&!e.noPermission),o.Ib(1),o.Dc("ngIf",("due-date_board-view"===e.modifier||"due-date_list-view"===e.modifier||"due-date_subtask-view"===e.modifier||"due-date_create-task"===e.modifier)&&!e.otherDate),o.Ib(1),o.Dc("ngIf",e.dateVal)}}let T=(()=>{class e{constructor(e,t){this.sharedData=e,this.changeDetectorRef=t,this.destroy$=new c.a,this.dateTimeTooltipDelay="",this.forStart=!1,this.noPermission=!1,this.isOnTime=!1,this.notOverdue=!1,this.noHighlight=!1,this.showTime=!1,this.showDay=!0,this.hasTime=!1,this.allowIcon=!0,this.hideIfEmpty=!1,this.noRelational=!1,this.showQuickClear=!1,this.onChange=new o.o,this.sharedData.currentUser.pipe(Object(n.a)(e=>!!e),Object(s.a)(this.destroy$)).subscribe(e=>{this.militaryTime=e.twenty_four_hr_setting,this.changeDetectorRef.markForCheck()})}get selectedDate(){return this.dateVal}get otherDate(){return this.otherDateVal}set selectedDate(e){switch(typeof e){case"number":this.dateVal=new Date(e),this.dateVal&&!isNaN(this.dateVal.getMonth())||(this.dateVal=null);break;case"string":this.dateVal=new Date(parseInt(e,10)),this.dateVal&&!isNaN(this.dateVal.getMonth())||(this.dateVal=null);break;default:this.dateVal=e}this.dateVal=this.dateVal||null}set otherDate(e){switch(typeof e){case"number":this.otherDateVal=new Date(e),this.otherDateVal&&!isNaN(this.otherDateVal.getMonth())||(this.otherDateVal=null);break;case"string":this.otherDateVal=new Date(parseInt(e,10)),this.otherDateVal&&!isNaN(this.otherDateVal.getMonth())||(this.otherDateVal=null);break;default:this.otherDateVal=e}this.otherDateVal=this.otherDateVal||null}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}clearDate(e){e.preventDefault(),e.stopPropagation(),this.dateVal=null;const t={};return this.forStart?(t.startDate=null,t.startDateTime=!1):(t.dueDate=null,t.dueDateTime=!1),this.onChange.emit(t),!1}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a.a),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-due-date-view"]],hostAttrs:[1,"cu-due-date-view"],inputs:{modifier:"modifier",dateTimeTitle:"dateTimeTitle",dateTimeTooltip:"dateTimeTooltip",dateTimeTooltipDelay:"dateTimeTooltipDelay",datePickerTitle:"datePickerTitle",forStart:"forStart",noPermission:"noPermission",isOnTime:"isOnTime",notOverdue:"notOverdue",noHighlight:"noHighlight",showTime:"showTime",showDay:"showDay",hasTime:"hasTime",allowIcon:"allowIcon",hideIfEmpty:"hideIfEmpty",noRelational:"noRelational",datePickerIcon:"datePickerIcon",task:"task",showQuickClear:"showQuickClear",selectedDate:"selectedDate",otherDate:"otherDate"},outputs:{onChange:"onChange"},decls:2,vars:2,consts:[["class","cu-user-group cu-user-group_due-date",3,"ngClass",4,"ngIf"],["class","due-date__row",3,"no-permission","ngClass","ngStyle",4,"ngIf"],[1,"cu-user-group","cu-user-group_due-date",3,"ngClass"],[1,"cu-user-group__item","cu-user-group__item_due-date",3,"cuTooltip","tooltipDelay"],["class","cu-user-group__item-icon",3,"icon",4,"ngIf","ngIfElse"],["datePickerIconDefault",""],["class","cu-task-info__key",4,"ngIf"],[1,"cu-user-group__item-icon",3,"icon"],[1,"cu-avatar","cu-avatar_lg","icon"],["viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["width","36","height","36","viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd"],["stroke-dasharray","3","cx","18","cy","18","r","17.5",1,"cu-stroke","cu-stroke-dasharray"],["x","9.6","y","10.8","width","16.875","height","14.625","rx","1",1,"cu-stroke"],["fill-rule","nonzero","d","M15.8 17L21.4 19.8 15.8 22.6M10.1 13.6H25.85V14.725H10.1zM12.4 8H13.525V11.375H12.4zM22.5 8H23.625V11.375H22.5z",1,"cu-fill"],["width","36","height","36","viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd",1,"cu-stroke"],["cx","18","cy","18","r","17.5","stroke-dasharray","3",1,"cu-stroke-dasharray"],["x","9.4","y","10.3","width","17.1","height","15.3","rx","2"],["d","M14.4 20.2339051L16.5687413 22.05 21.6 17.55"],["fill-rule","nonzero","d","M9.9 14.4H26.1V15.4H9.9zM12.6 8.1H13.6V12.6H12.6zM22.5 8.1H23.5V12.6H22.5z",1,"cu-fill"],[1,"cu-task-info__key"],[1,"due-date__row",3,"ngClass","ngStyle"],["class","datepicker__close-date-view","icon","close-o",3,"click",4,"ngIf"],["class","icon icon_due-date-calendar",3,"ngClass","icon",4,"ngIf"],[3,"title","date","showTime","showDay","isOnTime","noHighlight","addDash","ngStyle","noRelational","task",4,"ngIf"],["icon","close-o",1,"datepicker__close-date-view",3,"click"],[1,"icon","icon_due-date-calendar",3,"ngClass","icon"],[3,"title","date","showTime","showDay","isOnTime","noHighlight","addDash","ngStyle","noRelational","task"]],template:function(e,t){1&e&&(o.bd(0,g,6,6,"div",0),o.bd(1,I,4,9,"div",1)),2&e&&(o.Dc("ngIf",null===t.dateVal&&t.allowIcon&&!t.otherDate&&!t.hideIfEmpty),o.Ib(1),o.Dc("ngIf",null!==t.dateVal))},directives:[r.q,r.o,l.a,d.a,r.t,u.a],encapsulation:2,changeDetection:0}),e})()},PiVx:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("mcWp"),n=i("K0KF"),s=i("ofXK"),c=i("3Pt+"),a=i("FWqE"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[s.c,c.l,a.a,n.a,o.a]]}),e})()},QBIw:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("fXoL"),n=i("ofXK"),s=i("UdVN"),c=i("NsZK"),a=i("6d4N"),r=i("kykW");function l(e,t){if(1&e&&(o.Xb(0,"div",1),o.vc(1,"recurringToText"),o.vc(2,"taskRecurringToOptions")),2&e){const e=o.uc();o.Dc("cuTooltip",(e.task.reminder&&(null==e.task||null==e.task.recurring_settings?null:e.task.recurring_settings.last_reminder)!==(null==e.task?null:e.task.id)||e.task.reminder&&(null==e.task||null==e.task.recurring_settings?null:e.task.recurring_settings.last_task)!==(null==e.task?null:e.task.id)?"Start of recurring ":"")+o.xc(1,1,o.wc(2,4,null==e.task?null:e.task.recurring_settings),null))}}let d=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-recurring-icon"]],hostAttrs:[1,"cu-recurring-icon"],inputs:{task:"task"},decls:1,vars:1,consts:[["class","cu-recurring-icon__icon","icon","recurring",3,"cuTooltip",4,"ngIf"],["icon","recurring",1,"cu-recurring-icon__icon",3,"cuTooltip"]],template:function(e,t){1&e&&o.bd(0,l,3,6,"div",0),2&e&&o.Dc("ngIf",(null==t.task||null==t.task.recur?null:t.task.recur.recurring)&&(null==t.task?null:t.task.legacy_recurring)||(null==t.task?null:t.task.recurring_settings))},directives:[n.q,s.a,c.a],pipes:[a.a,r.a],styles:[".cu-recurring-icon__icon{width:16px;height:16px;stroke:#979797}"],encapsulation:2,changeDetection:0}),e})()},QFII:function(e,t,i){"use strict";i.d(t,"a",function(){return H});var o=i("lJxs"),n=i("Kj3r"),s=i("1G5W"),c=i("IzEk"),a=i("fFxs"),r=i("2Vo4"),l=i("itXk"),d=i("XNiG"),u=i("lE2N"),m=i("o7Ov"),p=i("pLZG"),h=i("c3rA"),f=i("fXoL"),b=i("jJW4"),g=i("l7P3"),_=i("Jf2N"),v=i("3Pt+"),k=i("TBcZ"),y=i("/Uwt"),w=i("ofXK"),x=function(e,t,i,o){return new(i||(i=Promise))(function(n,s){function c(e){try{r(o.next(e))}catch(t){s(t)}}function a(e){try{r(o.throw(e))}catch(t){s(t)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(c,a)}r((o=o.apply(e,t||[])).next())})};const I=["editor"],T=["templateInput"];function C(e,t){1&e&&(f.ac(0),f.gc(1,18),f.Zb())}function D(e,t){1&e&&(f.ac(0),f.gc(1,19),f.Zb())}function O(e,t){if(1&e){const e=f.dc();f.cc(0,"button",15),f.qc("click",function(){return f.Uc(e),f.uc().saveTemplate()}),f.vc(1,"async"),f.bd(2,C,2,0,"ng-container",16),f.vc(3,"async"),f.bd(4,D,2,0,"ng-template",null,17,f.cd),f.bc()}if(2&e){const e=f.Rc(5),t=f.uc();let i=null;f.Dc("disabled",!f.wc(1,3,t.canSave$)),f.Ib(2),f.Dc("ngIf",null==(i=f.wc(3,5,t.template$))?null:i.id)("ngIfElse",e)}}function S(e,t){1&e&&(f.cc(0,"button",20),f.cc(1,"div",21),f.gc(2,22),f.bc(),f.cc(3,"div",23),f.Xb(4,"div",24),f.Xb(5,"div",25),f.Xb(6,"div",26),f.bc(),f.bc())}let E=(()=>{class e{constructor(e,t,i,n){this.sharedData=e,this.store=t,this.modal=i,this.cdr=n,this.templateName="",this.templateSubjectInternal="",this.editing=!1,this.visibilityOption=a.f.EVERYONE,this.templateMembers=[],this.destroy$=new d.a,this.template$=new r.a(null),this.project$=this.store.select(h.getProject),this.members$=this.store.select(h.getTeamNonGuestUsers),this.user$=this.store.select(h.getUser),this.closeEmailTemplate$=this.store.select(h.getCloseEmailTemplate),this.changes$=new r.a({}),this.canSave$=Object(l.a)([this.template$,this.changes$]).pipe(Object(o.a)(([e,t])=>!(0===Object.keys(t).length||!this.templateName))),this.saving=!1}set templateSubject(e){this.templateSubjectInternal=""+e}ngAfterViewInit(){this.templateInput&&this.templateInput.nativeElement.focus()}ngOnInit(){Object(l.a)([this.template$,this.user$]).pipe(Object(p.a)(([e,t])=>!(!e||!t)),Object(c.a)(1),Object(s.a)(this.destroy$)).subscribe(([e,t])=>{this.templateName=e.name,this.templateSubjectInternal=e.subject,this.visibilityOption=e.visibility,this.templateMembers=e.members,this.templateMembers=Object(u.a)([t,...e.members||[]],"id"),this.cdr.markForCheck()}),this.closeEmailTemplate$.pipe(Object(p.a)(e=>!!e),Object(s.a)(this.destroy$)).subscribe(()=>{this.modal.close(),this.store.dispatch(new m.xb)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}updateContent(e){const t=JSON.stringify(e);this.update({content:t})}removeMember(e){return x(this,void 0,void 0,function*(){const t=yield this.user$.pipe(Object(c.a)(1)).toPromise(),i=this.templateMembers.filter(t=>t.id!==e.id);this.templateMembers=Object(u.a)([t,...i||[]],"id"),this.update({members:(this.templateMembers||[]).map(e=>e.id)})})}setMembers(e){return x(this,void 0,void 0,function*(){const t=yield this.user$.pipe(Object(c.a)(1)).toPromise();this.templateMembers=Object(u.a)([t,...e||[]],"id"),this.update({members:(this.templateMembers||[]).map(e=>e.id)})})}changeVisibilityOption(e){return x(this,void 0,void 0,function*(){if(this.visibilityOption!==e){if(e===a.f.EVERYONE){const e=yield this.user$.pipe(Object(c.a)(1)).toPromise();this.templateMembers=Object(u.a)([e,...this.templateMembers||[]],"id")}else if(e===a.f.PRIVATE){const e=yield this.user$.pipe(Object(c.a)(1)).toPromise();this.templateMembers=[e]}this.visibilityOption=e,this.update({visibility:e})}})}update(e){this.changes$.next(Object.assign(Object.assign({},this.changes$.value),e))}saveTemplate(){const e=Object.assign({},this.changes$.value);this.template$.value||(e.visibility=this.visibilityOption),this.visibilityOption===a.f.EVERYONE||this.visibilityOption===a.f.PRIVATE?e.members=(this.templateMembers||[]).map(e=>e.id):delete e.members,this.store.dispatch(this.template$.value&&this.template$.value.id?new m.xc({payload:e,templateId:this.template$.value.id,template:this.template$.value}):new m.Ib({payload:e})),this.saving=!0,this.cdr.markForCheck()}focusEditor(){this.editor&&this.editor.editor&&this.editor.edit()}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(b.a),f.Wb(g.Store),f.Wb(_.a),f.Wb(f.h))},e.\u0275cmp=f.Qb({type:e,selectors:[["cu-email-template"]],viewQuery:function(e,t){if(1&e&&(f.jd(I,3),f.jd(T,3)),2&e){let e;f.Qc(e=f.rc())&&(t.editor=e.first),f.Qc(e=f.rc())&&(t.templateInput=e.first)}},decls:29,vars:44,consts:function(){let e,t,i,o,n,s,c,a;return e=$localize`:@@common_name␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@common_template-name␟32960c5631df3fdcb6367a50d2e562797047ba6d␟3518640731486539180:Template name`,i=$localize`:@@cu-email-template__form-placeholder_email-subject␟6780100959e8014b6bdc5dc2de1e9429b894253f␟4064825863603746369:Subject (leave blank to use different subject lines)`,o=$localize`:@@cu-email-template__form-label_email-content␟47d6da9af4f6fcaac87283a3dbd0ea7775ad4eee␟1915767200942332820: Email content `,n=$localize`:@@cu-email-template__form-label_email-content␟2522c590272331b00bc5c75ab9b2d4da2c4cb83c␟1238887024428608859:Email content`,s=$localize`:@@common_save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,c=$localize`:@@common_create␟70a67e04629f6d412db0a12d51820b480788d795␟5674286808255988565:Create`,a=$localize`:@@common_saving␟57ed498bccd13e85743ea9576f5dca74c900660f␟4636616640072565270:Saving`,[[1,"cu-form","template","create-template"],[1,"cu-form__row"],[1,"cu-form__label"],e,[1,"cu-api-integration__input"],["type","text","placeholder",t,1,"cu-form__input",3,"ngModel","ngModelChange"],["templateInput",""],["type","text","placeholder",i,1,"cu-form__input",3,"ngModel","ngModelChange","keydown.Tab"],[1,"cu-form__row","cu-email-template__editor-row"],o,["placeholder",n,"uploadType","7","modifier","cu-task-editor_section-overview","editorId","template_edit",3,"canEdit","overview","forGoals","content","entityId","project","pinToolbarByDefault","stickyTopPX","allowPinToolbar","showListOfTasks","allowCreateTask","hideChecklist","hideToggleList","removeInvalidForEmail","uploadParent","collapseOnClickOutside","onChange","onCancel","onSave"],["editor",""],[3,"visibilityOption","role","templateMembers","members","user","showPublic","template","forEmail","onChangeVisibilityOption","onSetMembers","onRemoveMember"],["class","cu-btn",3,"disabled","click",4,"ngIf"],["class","cu-btn cu-btn_spinner","disabled","",4,"ngIf"],[1,"cu-btn",3,"disabled","click"],[4,"ngIf","ngIfElse"],["createTmpl",""],s,c,["disabled","",1,"cu-btn","cu-btn_spinner"],[1,"cu-btn__text"],a,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"]]},template:function(e,t){if(1&e&&(f.cc(0,"div",0),f.cc(1,"div",1),f.cc(2,"div",2),f.gc(3,3),f.bc(),f.cc(4,"div",4),f.cc(5,"input",5,6),f.qc("ngModelChange",function(e){return t.templateName=e})("ngModelChange",function(){return t.update({name:t.templateName})}),f.bc(),f.bc(),f.bc(),f.cc(7,"div",1),f.cc(8,"div",2),f.dd(9,"Subject (optional)"),f.bc(),f.cc(10,"div",4),f.cc(11,"input",7),f.qc("ngModelChange",function(e){return t.templateSubjectInternal=e})("ngModelChange",function(){return t.update({subject:t.templateSubjectInternal})})("keydown.Tab",function(){return t.focusEditor()}),f.bc(),f.bc(),f.bc(),f.cc(12,"div",8),f.cc(13,"div",2),f.gc(14,9),f.bc(),f.cc(15,"cu-task-editor",10,11),f.qc("onChange",function(){return t.editing=!0})("onCancel",function(){return t.editing=!1})("onSave",function(e){return t.updateContent(e)}),f.vc(17,"async"),f.vc(18,"async"),f.vc(19,"async"),f.vc(20,"async"),f.bc(),f.bc(),f.cc(21,"cu-template-sharing",12),f.qc("onChangeVisibilityOption",function(e){return t.changeVisibilityOption(e)})("onSetMembers",function(e){return t.setMembers(e)})("onRemoveMember",function(e){return t.removeMember(e)}),f.vc(22,"async"),f.vc(23,"async"),f.vc(24,"async"),f.vc(25,"async"),f.bc(),f.cc(26,"div"),f.bd(27,O,6,7,"button",13),f.bd(28,S,7,0,"button",14),f.bc(),f.bc()),2&e){let e=null,i=null,o=null,n=null;f.Ib(5),f.Dc("ngModel",t.templateName),f.Ib(6),f.Dc("ngModel",t.templateSubjectInternal),f.Ib(4),f.Dc("canEdit",!0)("overview",!0)("forGoals",!0)("content",null==(e=f.wc(17,28,t.template$))?null:e.content)("entityId",null==(i=f.wc(18,30,t.template$))?null:i.id)("project",f.wc(19,32,t.project$))("pinToolbarByDefault",!0)("stickyTopPX",0)("allowPinToolbar",!0)("showListOfTasks",!1)("allowCreateTask",!1)("hideChecklist",!0)("hideToggleList",!0)("removeInvalidForEmail",!0)("uploadParent",null==(o=f.wc(20,34,t.sharedData.compatCurrentTeam$))?null:o.id)("collapseOnClickOutside",!1),f.Ib(6),f.Dc("visibilityOption",t.visibilityOption)("role",null==(n=f.wc(22,36,t.sharedData.compatCurrentTeam$))?null:n.role)("templateMembers",t.templateMembers)("members",f.wc(23,38,t.members$))("user",f.wc(24,40,t.user$))("showPublic",!1)("template",f.wc(25,42,t.template$))("forEmail",!0),f.Ib(6),f.Dc("ngIf",!t.saving),f.Ib(1),f.Dc("ngIf",t.saving)}},directives:[v.c,v.p,v.s,k.b,y.a,w.q],pipes:[w.b],styles:[".cu-email-template__editor-row{position:relative}.cu-email-template__editor-row .cu-task-editor_section-overview{margin:10px 0 0;padding:0}"],encapsulation:2,changeDetection:0}),e})();var P=i("jJQC"),j=i("/qOb"),A=i("oGMP"),$=i("rLOZ"),U=i("UdVN"),R=i("NsZK"),M=i("loh9");const F=["searchField"];function L(e,t){if(1&e){const e=f.dc();f.cc(0,"div",12),f.qc("click",function(t){return f.Uc(e),f.uc().clear(t)}),f.bc()}}function N(e,t){1&e&&(f.cc(0,"div",13),f.gc(1,14),f.bc())}function z(e,t){if(1&e){const e=f.dc();f.cc(0,"div",15),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().selectTemplate(i)}),f.cc(1,"div",16),f.dd(2),f.bc(),f.cc(3,"div",17),f.cc(4,"div",18),f.cc(5,"div",19),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().openModal(i)}),f.bc(),f.bc(),f.cc(6,"div",20),f.cc(7,"div",21),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().deleteTemplate(i)}),f.bc(),f.bc(),f.bc(),f.bc()}if(2&e){const e=t.$implicit,i=f.uc();f.Ob("cu-email-template-dropdown__row-active",(null==i.traversedTemplate?null:i.traversedTemplate.id)===(null==e?null:e.id)),f.Ib(1),f.Dc("cuTooltip",null==e?null:e.name)("tooltipDisabledIfTextNotTruncated",!0),f.Ib(1),f.fd(" ",null==e?null:e.name," "),f.Ib(3),f.Dc("icon","cu3-edit"),f.Ib(2),f.Dc("icon","cu2-trash-alt")}}function q(e,t){1&e&&(f.cc(0,"div",13),f.gc(1,22),f.bc())}function G(e,t){if(1&e){const e=f.dc();f.cc(0,"div",15),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().selectTemplate(i)}),f.cc(1,"div",16),f.dd(2),f.bc(),f.cc(3,"div",17),f.cc(4,"div",23),f.cc(5,"div",19),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().openModal(i)}),f.bc(),f.bc(),f.cc(6,"div",24),f.cc(7,"div",21),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().deleteTemplate(i)}),f.bc(),f.bc(),f.bc(),f.bc()}if(2&e){const e=t.$implicit,i=f.uc();f.Ob("cu-email-template-dropdown__row-active",(null==i.traversedTemplate?null:i.traversedTemplate.id)===(null==e?null:e.id)),f.Ib(1),f.Dc("cuTooltip",null==e?null:e.name)("tooltipDisabledIfTextNotTruncated",!0),f.Ib(1),f.fd(" ",null==e?null:e.name," "),f.Ib(3),f.Dc("icon","cu3-edit"),f.Ib(2),f.Dc("icon","cu2-trash-alt")}}function V(e,t){1&e&&(f.cc(0,"div",13),f.gc(1,25),f.bc())}function B(e,t){if(1&e){const e=f.dc();f.cc(0,"div",15),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().selectTemplate(i)}),f.cc(1,"div",16),f.dd(2),f.bc(),f.cc(3,"div",17),f.cc(4,"div",26),f.cc(5,"div",19),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().openModal(i)}),f.bc(),f.bc(),f.cc(6,"div",27),f.cc(7,"div",21),f.qc("click",function(){f.Uc(e);const i=t.$implicit;return f.uc().deleteTemplate(i)}),f.bc(),f.bc(),f.bc(),f.bc()}if(2&e){const e=t.$implicit,i=f.uc();f.Ob("cu-email-template-dropdown__row-active",(null==i.traversedTemplate?null:i.traversedTemplate.id)===(null==e?null:e.id)),f.Ib(1),f.Dc("cuTooltip",null==e?null:e.name)("tooltipDisabledIfTextNotTruncated",!0),f.Ib(1),f.fd(" ",null==e?null:e.name," "),f.Ib(3),f.Dc("icon","cu3-edit"),f.Ib(2),f.Dc("icon","cu2-trash-alt")}}function X(e,t){if(1&e){const e=f.dc();f.cc(0,"div",28),f.qc("click",function(){return f.Uc(e),f.uc().onOpenSettings.emit()}),f.ac(1),f.gc(2,29),f.Zb(),f.Xb(3,"div",30),f.bc()}}let H=(()=>{class e{constructor(e,t,i,n,s,c){this.injector=e,this.modal=t,this.templateService=i,this.store=n,this.sharedData=s,this.localStorage=c,this.templates$=new r.a([]),this.recentMap$=new r.a({}),this.searchString$=new r.a(null),this.filteredTemplates$=Object(l.a)([this.templates$,this.searchString$]).pipe(Object(o.a)(([e,t])=>t?(e||[]).filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):e)),this.recentlyUsed$=Object(l.a)([this.filteredTemplates$,this.recentMap$]).pipe(Object(o.a)(([e,t])=>t?(e||[]).filter(e=>t[e.id]):[])),this.privateToMe$=this.filteredTemplates$.pipe(Object(o.a)(e=>(e||[]).filter(e=>e.visibility===a.f.ME))),this.restOfTemplates$=Object(l.a)([this.filteredTemplates$,this.recentMap$]).pipe(Object(o.a)(([e,t])=>(e||[]).filter(e=>e.visibility!==a.f.ME&&!t[e.id]))),this.totalTemplates$=Object(l.a)([this.recentlyUsed$,this.privateToMe$,this.restOfTemplates$]).pipe(Object(o.a)(([e,t,i])=>e.concat(t).concat(i))),this.debounceSearch=new d.a,this.destroy$=new d.a,this.searchString="",this.traversedTemplate=null,this.traversedIndex=-1,this.paywalled=!1,this.isDropdown=!1,this.hasEmailCommunicators=!0,this.onSelectTemplate=new f.o,this.onClose=new f.o,this.onEmailUserAction=new f.o,this.onOpenSettings=new f.o,this.trackById=Object(P.d)("id")}onKeyDown(e){this.isDropdown&&this.keyDown(e)}ngOnInit(){const e=this.localStorage.get(a.c)||{};this.recentMap$.next(e),this.debounceSearch.pipe(Object(n.a)(250),Object(s.a)(this.destroy$)).subscribe(e=>this.searchString$.next(e))}ngOnChanges(e){e.templates&&this.templates&&this.templates$.next(this.templates)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}selectTemplate(e){const t=Object.assign(Object.assign({},this.recentMap$.value),{[e.id]:!0});this.localStorage.set(a.c,t),this.recentMap$.next(t),e.content?this.onSelectTemplate.emit({template:e}):this.templateService.getEmailTemplates(this.sharedData.compatCurrentTeam.id,e.id).subscribe(e=>{this.onSelectTemplate.emit({template:e.templates[0]}),this.store.dispatch(new m.y({emailTemplates:e.templates}))})}openModal(e){if(this.paywalled)return void this.onEmailUserAction.emit({type:a.e.ThrowBusinessPaywall});const t=this.modal.openComponent(E,this.injector,{title:e?$localize`:@@cu-email-template-list__title_edit-email-tmpl:Edit Email Template`:$localize`:@@cu-email-template-list__title_new-email-tmpl:New Email Template`,modifier:"cu-email-template-dropdown-modal"});t.instance.template$.next(e),e?this.templateService.getEmailTemplates(this.sharedData.compatCurrentTeam.id,e.id).subscribe(e=>{t.instance.template$.next(e.templates[0]),this.store.dispatch(new m.y({emailTemplates:e.templates}))}):(this.templateContent&&t.instance.template$.next({content:this.templateContent,subject:this.emailSubject,visibility:a.f.EVERYONE}),this.emailSubject&&(t.instance.templateSubject=this.emailSubject))}deleteTemplate(e){if(this.paywalled)return void this.onEmailUserAction.emit({type:a.e.ThrowBusinessPaywall});const t=e.id,i=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(this.recentMap$.value,["symbol"==typeof t?t:t+""]);this.localStorage.set(a.c,i),this.recentMap$.next(i),this.store.dispatch(new m.gc({templateId:e.id}))}clear(e){e.preventDefault(),e.stopPropagation(),this.searchString="",this.searchString$.next(this.searchString)}focusSearchInput(){setTimeout(()=>{this.searchField&&this.searchField.nativeElement.focus()},100)}keyDown(e){switch(e.keyCode){case j.a.ENTER:this.traversedTemplate&&this.selectTemplate(this.traversedTemplate);break;case j.a.ARROW_UP:this.traverseTemplates("up");break;case j.a.ARROW_DOWN:this.traverseTemplates("down")}}traverseTemplates(e){this.totalTemplates$.pipe(Object(c.a)(1)).subscribe(t=>{"down"===e&&(this.traversedIndex+1>t.length-1?this.traversedIndex=0:this.traversedIndex+=1,this.traversedTemplate=t[this.traversedIndex]),"up"===e&&(this.traversedIndex<=0?this.traversedIndex=t.length-1:this.traversedIndex-=1,this.traversedTemplate=t[this.traversedIndex])})}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(f.t),f.Wb(_.a),f.Wb(A.a),f.Wb(g.Store),f.Wb(b.a),f.Wb($.b))},e.\u0275cmp=f.Qb({type:e,selectors:[["cu-email-template-list"]],viewQuery:function(e,t){if(1&e&&f.jd(F,1),2&e){let e;f.Qc(e=f.rc())&&(t.searchField=e.first)}},hostAttrs:[1,"cu-email-template-list"],hostVars:2,hostBindings:function(e,t){1&e&&f.qc("keyup",function(e){return t.onKeyDown(e)},!1,f.Tc),2&e&&f.Ob("cu-email-template-list__dropdown",t.isDropdown)},inputs:{templates:"templates",paywalled:"paywalled",templateContent:"templateContent",emailSubject:"emailSubject",isDropdown:"isDropdown",hasEmailCommunicators:"hasEmailCommunicators"},outputs:{onSelectTemplate:"onSelectTemplate",onClose:"onClose",onEmailUserAction:"onEmailUserAction",onOpenSettings:"onOpenSettings"},features:[f.Gb],decls:23,vars:23,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u;return e=$localize`:@@cu-email-template-list__form-placeholder_search-templates␟da988f81e9861a18b7a4e7a0bab62186506d07f7␟2683765549895995966:Search templates`,t=$localize`:@@cu-email-template-list__dropdown-item_add-email-template␟9aa7cffb4c33ccd0be3f930768e8812e599aebfe␟7924068117182409232:Add email template`,i=$localize`:@@cu-email-template-list__recently-used-templates␟94dd72fad13210f2066164189b8ad2f4e0005667␟5181612001286564613: RECENTLY USED
`,o=$localize`:@@cu-linked-email-close␟ed1ba117a5fb5b34a86d3018dae2ea06fc16a211␟3615430284343952121:Edit email template`,n=$localize`:@@cu-linked-email-delete␟7ac36a69049df2c9bd3d3a4439af1e4af673db6b␟7668874279195860804:Delete email template`,s=$localize`:@@cu-email-template-list__private-to-me-templates␟5169baa66f940d4bcdc2503abf45248e268abac5␟6399064378588131377: PRIVATE TO ME
`,c=$localize`:@@cu-email-template-list__tooltip-msg_edit-email-tmpl␟ed1ba117a5fb5b34a86d3018dae2ea06fc16a211␟3615430284343952121:Edit email template`,a=$localize`:@@cu-email-template-list__tooltip-msg_delete-email-tmpl␟7ac36a69049df2c9bd3d3a4439af1e4af673db6b␟7668874279195860804:Delete email template`,r=$localize`:@@cu-email-template-list__rest␟0b9d23632730078c0c53970c9c8ea70b1df8357b␟1225756440094209970: ALL TEMPLATES
`,l=$localize`:@@cu-email-template-list__tooltip-msg_edit-email-tmpl␟ed1ba117a5fb5b34a86d3018dae2ea06fc16a211␟3615430284343952121:Edit email template`,d=$localize`:@@cu-email-template-list__tooltip-msg_delete-email-tmpl␟7ac36a69049df2c9bd3d3a4439af1e4af673db6b␟7668874279195860804:Delete email template`,u=$localize`:@@cu-email-template-list__dropdown-item_manage␟4ff5f39334753476c4e196ff88b877a38a7ae696␟4778756222420356104:Manage templates`,[[1,"cu-email-template-list__search"],["placeholder",e,"type","text",1,"cu-email-template-list__search-input",3,"ngModel","ngModelChange"],["searchField",""],[1,"cu-email-template-list__search-icon",3,"icon"],["class","cu-email-template-list__search-close","icon","cu2-close",3,"click",4,"ngIf"],["class","cu-email-template-list__title-text",4,"ngIf"],["class","cu-email-template-dropdown__row",3,"cu-email-template-dropdown__row-active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-email-template-dropdown__footer"],[1,"cu-email-template-dropdown__divider"],[1,"cu-email-template-dropdown__new",3,"click"],t,["class","cu-email-template-dropdown__manage",3,"click",4,"ngIf"],["icon","cu2-close",1,"cu-email-template-list__search-close",3,"click"],[1,"cu-email-template-list__title-text"],i,[1,"cu-email-template-dropdown__row",3,"click"],[1,"cu-email-template-dropdown__name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-email-template-dropdown__actions"],["cuTooltip",o,1,"cu-linked-email-val-email__close","cu-linked-email-val-email__close-edit"],[1,"cu-linked-email-close",3,"icon","cuPreventDefault","click"],["cuTooltip",n,1,"cu-linked-email-val-email__close"],["cuPreventDefault","",1,"cu-linked-email-close",3,"icon","click"],s,["cuTooltip",c,1,"cu-linked-email-val-email__close","cu-linked-email-val-email__close-edit"],["cuTooltip",a,1,"cu-linked-email-val-email__close"],r,["cuTooltip",l,1,"cu-linked-email-val-email__close","cu-linked-email-val-email__close-edit"],["cuTooltip",d,1,"cu-linked-email-val-email__close"],[1,"cu-email-template-dropdown__manage",3,"click"],u,["icon","cu2-cog-o"]]},template:function(e,t){if(1&e&&(f.cc(0,"div",0),f.cc(1,"input",1,2),f.qc("ngModelChange",function(e){return t.searchString=e})("ngModelChange",function(){return t.debounceSearch.next(t.searchString)}),f.bc(),f.Xb(3,"div",3),f.bd(4,L,1,0,"div",4),f.bc(),f.bd(5,N,2,0,"div",5),f.vc(6,"async"),f.bd(7,z,8,7,"div",6),f.vc(8,"async"),f.bd(9,q,2,0,"div",5),f.vc(10,"async"),f.bd(11,G,8,7,"div",6),f.vc(12,"async"),f.bd(13,V,2,0,"div",5),f.bd(14,B,8,7,"div",6),f.vc(15,"async"),f.cc(16,"div",7),f.Xb(17,"div",8),f.cc(18,"div",9),f.qc("click",function(){return t.openModal()}),f.dd(19," + "),f.ac(20),f.gc(21,10),f.Zb(),f.bc(),f.bd(22,X,4,0,"div",11),f.bc()),2&e){let e=null,i=null;f.Ib(1),f.Dc("ngModel",t.searchString),f.Ib(2),f.Dc("icon","search"),f.Ib(1),f.Dc("ngIf",t.searchString),f.Ib(1),f.Dc("ngIf",null==(e=f.wc(6,13,t.recentlyUsed$))?null:e.length),f.Ib(2),f.Dc("ngForOf",f.wc(8,15,t.recentlyUsed$))("ngForTrackBy",t.trackById),f.Ib(2),f.Dc("ngIf",null==(i=f.wc(10,17,t.privateToMe$))?null:i.length),f.Ib(2),f.Dc("ngForOf",f.wc(12,19,t.privateToMe$))("ngForTrackBy",t.trackById),f.Ib(2),f.Dc("ngIf",t.isDropdown),f.Ib(1),f.Dc("ngForOf",f.wc(15,21,t.restOfTemplates$))("ngForTrackBy",t.trackById),f.Ib(8),f.Dc("ngIf",t.isDropdown&&t.hasEmailCommunicators)}},directives:[v.c,v.p,v.s,U.a,w.q,w.p,R.a,M.a],pipes:[w.b],styles:['.cu-email-template-list{flex-grow:1;padding-bottom:20px}.cu-email-communicators__modal .cu-email-template-list{padding-top:20px}.cu-email-template-list__title-text{flex-grow:1;text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.3);white-space:nowrap;margin:10px 30px}.contrast_high .cu-email-template-list__title-text{color:#858585}.dark-theme .cu-email-template-list__title-text{color:#828588}.cu-email-template-list__search{display:flex;position:relative;align-items:center;width:100%;flex-shrink:0}.dark-theme .cu-email-template-list__search{border-bottom-color:#384047}.cu-email-template-list__search-close{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;right:10px;transform-origin:center;width:16px;height:16px;padding:2px;cursor:pointer;fill:#b9bec7}.dark-theme .cu-email-template-list__search-close{fill:#d5d6d7}.cu-email-template-list__search-close:hover{fill:#7b68ee;transform:rotate(180deg)}@supports (--theme-main-color:#7b68ee){.cu-email-template-list__search-close:hover{fill:var(--theme-main-color)}}.cu-email-template-list__search-icon{position:absolute;left:30px;top:50%;transform:translateY(-50%);width:16px;height:16px;pointer-events:none;stroke:#cccdde}.dark-theme .cu-email-template-list__search-icon{stroke:#d5d6d7}.cu2-hierarchy-picker__search-input:focus+.cu-email-template-list__search-icon{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-hierarchy-picker__search-input:focus+.cu-email-template-list__search-icon{stroke:var(--theme-main-color)}}.cu-email-template-list__search-input{font-family:Gotham Pro,Proxima Nova,arial,serif;height:40px;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;padding:0 30px 0 55px;display:block;width:100%;border:0;margin:0 0 -1px;background:transparent;box-shadow:none!important}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-list__search-input{font-family:var(--global-font-support)}}.cu-email-template-list__search-input::-webkit-input-placeholder{color:rgba(52,52,52,.4);font-size:13px}.cu-email-template-list__search-input::-moz-placeholder{color:rgba(52,52,52,.4);opacity:1;font-size:13px}.cu-email-template-list__search-input:-ms-input-placeholder{color:rgba(52,52,52,.4);font-size:13px}.cu-email-template-list__search-input:-moz-placeholder{color:rgba(52,52,52,.4);opacity:1;font-size:13px}.dark-theme .cu-email-template-list__search-input{color:#d5d6d7}.dark-theme .cu-email-template-list__search-input::-webkit-input-placeholder{color:rgba(213,214,215,.4);font-size:13px}.dark-theme .cu-email-template-list__search-input::-moz-placeholder{color:rgba(213,214,215,.4);opacity:1;font-size:13px}.dark-theme .cu-email-template-list__search-input:-ms-input-placeholder{color:rgba(213,214,215,.4);font-size:13px}.dark-theme .cu-email-template-list__search-input:-moz-placeholder{color:rgba(213,214,215,.4);opacity:1;font-size:13px}.cu-email-template-list__search-input:focus{outline:none}.dark-theme .cu-email-template-list__search-input:focus{box-shadow:none}.cu-email-template-list__dropdown .cu-email-template-list__search{height:48px;border-bottom:1px solid #e9ebf0;display:flex;align-items:center}.dark-theme .cu-email-template-list__dropdown .cu-email-template-list__search{border-color:#1e272e}.cu-email-template-list__dropdown .cu-email-template-list__search-input{padding:0 15px 0 45px}.cu-email-template-list__dropdown .cu-email-template-list__search-icon{width:24px;height:24px;left:12px;top:12px;transform:none;stroke:none;display:flex;align-items:center;justify-content:center;border-radius:50%;background:rgba(233,235,240,.5)}.dark-theme .cu-email-template-list__dropdown .cu-email-template-list__search-icon{background:rgba(233,235,240,.2)}.cu-email-template-list__dropdown .cu-email-template-list__search-icon svg{width:11px;height:11px;stroke:rgba(0,0,0,.3)}.dark-theme .cu-email-template-list__dropdown .cu-email-template-list__search-icon svg{stroke:rgba(0,0,0,.5)}.cu-email-template-list__dropdown .cu-email-template-list__title-text{margin:6px 0 0;padding:0 15px;height:30px;display:flex;align-items:center}.cu-email-template-list__dropdown .cu-email-template-dropdown__row{height:32px;margin:0;padding:0 15px;border:none}.cu-email-template-list__dropdown .cu-email-template-dropdown__row-active,.cu-email-template-list__dropdown .cu-email-template-dropdown__row:hover{background:#fafbfc}.cu-email-template-list__dropdown .cu-email-template-dropdown__row-active .cu-email-template-dropdown__name,.cu-email-template-list__dropdown .cu-email-template-dropdown__row:hover .cu-email-template-dropdown__name{color:inherit}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__row-active,.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__row:hover{background:#2b343b}.cu-email-template-list__dropdown .cu-email-template-dropdown__name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-list__dropdown .cu-email-template-dropdown__name{font-family:var(--global-font-support)}}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__name{color:#d5d6d7}.cu-email-template-list__dropdown .cu-email-template-dropdown__new{height:32px;margin:0;padding:8px 15px;border:none;position:relative}.cu-email-template-list__dropdown .cu-email-template-dropdown__new:hover{background:#fafbfc}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__new:hover{background:#2b343b}.cu-email-template-list__dropdown .cu-email-template-dropdown__footer{position:sticky;bottom:0;background:#fff;padding-bottom:8px}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__footer{background:#384047}.cu-email-template-list__dropdown .cu-email-template-dropdown__divider{background:#e9ebf0;width:100%;height:1px;margin:8px 0 0;position:relative}.cu-email-template-list__dropdown .cu-email-template-dropdown__divider:before{content:"";display:block;position:absolute;width:100%;left:0;top:-8px;height:8px;z-index:1;pointer-events:none;background:linear-gradient(0deg,#fff 0,hsla(0,0%,100%,0))}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__divider:before{background:linear-gradient(0deg,#384047 0,rgba(56,64,71,0))}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__divider{background:#1e272e}.cu-email-template-list__dropdown .cu-email-template-dropdown__manage{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;height:32px;padding:0 15px;cursor:pointer;display:flex;align-items:center;justify-content:space-between}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-list__dropdown .cu-email-template-dropdown__manage{font-family:var(--global-font-support)}}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__manage{color:#d5d6d7}.cu-email-template-list__dropdown .cu-email-template-dropdown__manage:hover{background:#fafbfc}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__manage:hover{background:#2b343b}.cu-email-template-list__dropdown .cu-email-template-dropdown__manage .icon{width:14px;height:14px;fill:#292d34}.dark-theme .cu-email-template-list__dropdown .cu-email-template-dropdown__manage .icon{fill:#d5d6d7}.cu-email-template-list__dropdown .cu-linked-email-val-email__close,.cu-email-template-list__dropdown .cu-linked-email-val-email__restore{padding:0 4px}','.cu-email-template-dropdown-modal .cu-modal__title{padding:0;text-align:center;width:100%}.cu-email-template-dropdown-modal .cu-api-integration__input{border:none;border-bottom:1px solid #e9ebf0;padding:0;border-radius:0}.dark-theme .cu-email-template-dropdown-modal .cu-api-integration__input{border-color:#1e272e}.cu-email-template-dropdown-modal .ql-editor{border:1px solid #e9ebf0!important;text-align:left;direction:ltr}.dark-theme .cu-email-template-dropdown-modal .ql-editor{border-color:#1e272e!important}.cu-email-template-dropdown-modal .cu-editor-wrapper_active{padding:0!important}.cu-email-template-dropdown-modal .cu-editor-footer-info{display:none!important}.cu-email-template-dropdown-modal .cu-rich-editor-toolbar_sticky{padding:0;margin-bottom:5px}.cu-email-template-dropdown-modal .cu-rich-editor-toolbar_sticky.ql-toolbar:after{display:none}.cu-email-template-dropdown__row{justify-content:space-between}.cu-email-template-dropdown__row:hover .cu-email-template-dropdown__actions{display:flex;align-items:center}.cu-email-template-dropdown__actions{display:none}.cu-email-template-dropdown__dropdown{min-width:250px;max-width:250px;max-height:448px;overflow-x:hidden}.cu-email-template-dropdown__dropdown:after{display:none}.cu-email-template-dropdown__row{display:flex;height:44px;align-items:center;cursor:pointer;max-width:100%;border-bottom:1px solid #e9ebf0;margin:0 30px}.dark-theme .cu-email-template-dropdown__row{border-color:#384047}.cu-email-template-dropdown__row:hover .cu-email-template-dropdown__name{color:var(--theme-main-color)}.cu-email-template-dropdown__row .nav-menu-item__icon:last-of-type{margin:0}.cu-email-template-dropdown__name{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-dropdown__name{font-family:var(--global-font-support)}}.cu-email-template-dropdown__new{color:#7b68ee;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;height:44px;display:flex;align-items:center;margin:0 30px;cursor:pointer;border-bottom:1px solid #e9ebf0}@supports (--theme-main-color:#7b68ee){.cu-email-template-dropdown__new{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-dropdown__new{font-family:var(--global-font-support)}}.dark-theme .cu-email-template-dropdown__new{border-color:#384047}.cu-email-communicators__modal .cu-email-template-dropdown__new{border-bottom:none}','.cu-linked-email{display:block;padding:15px 30px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-linked-email{border-color:#1e272e}.cu-linked-email-add{color:#7b68ee;padding-top:15px;font-weight:500;font-size:11px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-linked-email-add{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-add{font-family:var(--global-font-support)}}.cu-linked-email-toggle{margin-left:12px}.cu-linked-email-toggle .cu-linked-email-close{display:block}.cu-linked-email-row-top{justify-content:space-between}.cu-linked-email-row-left,.cu-linked-email-row-right,.cu-linked-email-row-top{display:flex;align-items:center}.cu-linked-email__inactive .cu-linked-email-row-left{opacity:.3}.cu-linked-email-row__main .cu-linked-email-val-email__close,.cu-linked-email-row__main .cu-linked-email-val-email__restore{display:none}.cu-linked-email-row__main:hover .cu-linked-email-val-email__close,.cu-linked-email-row__main:hover .cu-linked-email-val-email__restore{display:flex}.cu-linked-email-caret{transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);width:12px;height:12px;transform:rotate(0);fill:#292d34;margin-right:7px;cursor:pointer}.dark-theme .cu-linked-email-caret{fill:#d5d6d7}.cu-linked-email-caret.cu-linked-email-caret-expand{transform:rotate(90deg)}.cu-linked-email-val{font-weight:700;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-val{font-family:var(--global-font-support)}}.cu-linked-email-val-email{font-weight:500;color:#7c828d}.dark-theme .cu-linked-email-val-email{color:#828588}.cu-linked-email-val-email__inactive{margin-left:20px;font-style:italic}.cu-linked-email-val-email__close,.cu-linked-email-val-email__restore{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;border-radius:4px;padding:0 8px;align-items:center;cursor:pointer;color:#7c828d;height:24px;display:flex}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-val-email__close,.cu-linked-email-val-email__restore{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-val-email__close,.dark-theme .cu-linked-email-val-email__restore{color:#828588}.cu-linked-email-val-email__close:hover,.cu-linked-email-val-email__restore:hover{background-color:rgba(233,235,240,.5);color:#292d34}.dark-theme .cu-linked-email-val-email__close:hover,.dark-theme .cu-linked-email-val-email__restore:hover{background-color:rgba(43,52,59,.5);color:#d5d6d7}.cu-linked-email-val-email__close{margin-left:5px}.cu-linked-email-val-email__close:hover .icon{fill:#fd71af}.cu-linked-email-val-email__close-edit:hover .icon{fill:#292d34}.cu-linked-email-user{display:flex;align-items:center;justify-content:space-between;padding:6px 0;border-bottom:1px solid #e4e4e4;font-weight:500;font-size:10px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-user{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-user{border-color:#1e272e}.cu-linked-email-user-info{display:flex;align-items:center}.cu-linked-email-user-avatar{margin-right:7px}.cu-linked-email-user:hover .cu-linked-email-close{display:block}.cu-linked-email-close{width:14px;height:14px;fill:#b9bec7;cursor:pointer}.cu-linked-email-added-users{display:flex;margin-top:10px}.cu-linked-email-added-users .cu-avatar,.cu-linked-email-added-users .cu-user-group__icon,.cu-linked-email-added-users .cu-user-group__more{width:30px!important;height:30px!important}.cu-linked-email-added-users .cu-user-group__more{margin-left:0!important}.cu-linked-email-added-name{border-radius:3px;height:42px;border:1px solid #e9ebf0;padding:0 10px;display:flex;align-items:center;margin-bottom:10px}.dark-theme .cu-linked-email-added-name{border-color:#384047}.cu-linked-email-added-name .cu-form__input{padding:0}.cu-linked-email-added-body{position:relative;background:#fafbfc;width:100%;border-radius:5px;border:1px solid #e9ebf0;padding:10px;margin-bottom:10px}.cu-linked-email-added-body-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;color:#292d34;padding-bottom:6px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-added-body-title{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-added-body-title{color:#d5d6d7}.cu-linked-email-added-body-sub-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:10px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-added-body-sub-title{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-added-body-sub-title{color:#828588}.cu-linked-email-added-body .icon{fill:var(--theme-main-color);height:12px;width:12px;position:absolute;right:15px;top:15px}.dark-theme .cu-linked-email-added-body{background-color:#2b343b;border-color:#1e272e;color:#d5d6d7}.cu-linked-email-added-body.cu-linked-email-added-body-selected{border-color:#7b68ee;background:#fff}@supports (--theme-main-color:#7b68ee){.cu-linked-email-added-body.cu-linked-email-added-body-selected{border-color:var(--theme-main-color)}}.dark-theme .cu-linked-email-added-body.cu-linked-email-added-body-selected{background-color:#384047}.cu-linked-email-added-header{text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.3);white-space:nowrap;padding:15px 0}.cu-linked-email-added-header .cu-linked-email-added-header-top-padding{padding-top:25px}.contrast_high .cu-linked-email-added-header{color:#858585}.dark-theme .cu-linked-email-added-header{color:#828588}.cu-linked-email-added-radios .cu-checkbox{margin-bottom:15px}.cu-linked-email-added-radios .cu-radio__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;color:#292d34;margin-left:5px;cursor:pointer;padding-top:1px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-linked-email-added-radios .cu-radio__label{font-family:var(--global-font-support)}}.dark-theme .cu-linked-email-added-radios .cu-radio__label{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})()},QkWf:function(e,t,i){"use strict";i.d(t,"a",function(){return B});var o=i("fXoL"),n=i("Jkpq"),s=i("oy6Y"),c=i("ofXK"),a=i("/qOb"),r=i("El8o"),l=i("f0Wu"),d=i("VbRK"),u=i("XNiG"),m=i("2Vo4"),p=i("VRyK"),h=i("1uah"),f=i("LRne"),b=i("itXk"),g=i("Kj3r"),_=i("eIep"),v=i("lJxs"),k=i("UXun"),y=i("/uUt"),w=i("1G5W"),x=i("IzEk"),I=i("SxV6"),T=i("12P9"),C=i("0RbE"),D=i("Phux"),O=i("3uaV"),S=i("O5gs");const E=["input"],P=["dropdown"];let j=(()=>{class e{constructor(e,t){this.dateParseService=e,this.timezonesService=t,this.placeholder=$localize`:@@forms_placeholder--date-and-time:Enter any date or time`,this.autoFocus=!0,this.initText="",this.inputClass="",this.autoSize=!1,this.allowRRule=!0,this.mode="date",this.noTime=!1,this.dropdownPlacement=["bottom-left","top-left","auto"],this.scrollToNow=!1,this.disabled=!1,this.onDropdownOpen=new o.o,this.onChange=new o.o,this.onClickText=new o.o,this.destroy$=new u.a,this.debounceProcessLanguage$=new u.a,this.processLanguage$=new m.a(this.initText),this.isFocused$=new m.a(!1),this.todayIsFriday=5===l().day(),this.quickItemsDates=n.b.map(e=>{const{date:t}=Object(n.p)(e.code);return{data:e,payload:t,id:e.code,name:e.shortname||e.name,filter:e=>!0}}),this.hours=Object(n.n)(),this.quickItemsTimes=this.hours.map((e,t)=>({customPayload:{code:"time",momentValue:e},id:"time_"+t,title:this.timezonesService.formatUserDateTime(e,!1,!0)})),this.selectAll=!0,this.items$=Object(p.a)(this.debounceProcessLanguage$.pipe(Object(g.a)(300)),this.processLanguage$).pipe(Object(_.a)(e=>Object(h.a)(Object(f.a)(e),this.dateParseService.processLanguage(e,this.date||l(),this.dateFormatting,"time"===this.mode),Object(f.a)(this.allowRRule?this.parseComplextRRule(e):null))),Object(v.a)(([e,t,i])=>{t.updateTime=t.updateTime&&!this.noTime;const o=i&&i.text||t&&t.moment&&t.moment.isValid()&&this.timezonesService.formatUserDateTime(t.moment,"time"!==this.mode,!this.noTime&&("time"===this.mode||t.updateTime)),s=t&&t.moment&&t.moment.isValid()&&this.timezonesService.formatUserDateTime(t.moment,!1,!this.noTime&&("time"===this.mode||t.updateTime));return o&&o!==this.initText?[{customPayload:{date:t,rrule:i},id:n.i.code,title:o},...this.quickItemsTimes.filter(t=>e&&t.title.toLowerCase().includes(e.toLowerCase())&&t.title!==s)]:"time"===this.mode?this.quickItemsTimes:[]}),Object(k.a)({refCount:!0,bufferSize:1})),this.dropdownVisible$=Object(b.a)([this.items$,this.isFocused$]).pipe(Object(v.a)(([e,t])=>e&&e.length&&t)),this.viewInited=!1,this.popActive=!1}ngOnInit(){this.dropdownVisible$.pipe(Object(y.a)(),Object(w.a)(this.destroy$)).subscribe(e=>{this.popActive=e,e&&!this.dropdown.isOpen?this.dropdown.open():!e&&this.dropdown.isOpen&&this.dropdown.close()}),this.isFocused$.pipe(Object(w.a)(this.destroy$)).subscribe(e=>this.isFocused=e)}ngOnChanges(e){e.initText&&this.initText&&(this.currentText=this.initText,this.processLanguage$.next(this.initText),this.autoSize&&(this.valueTextWidth=this.getTextWidth(this.currentText))),e.autoFocus&&this.autoFocus&&this.viewInited&&this.focusAndSelect()}ngAfterViewInit(){this.viewInited=!0,this.autoFocus&&setTimeout(()=>{this.focusAndSelect()},500)}focusOnly(){this.input.nativeElement.focus()}focusAndSelect(){this.input.nativeElement.focus();const e=(this.initText||"").length;Object(r.c)(this.input.nativeElement,0,e)}focusAndSelectOnClick(){this.input.nativeElement.focus();const e=(this.initText||"").length;this.selectAll&&Object(r.c)(this.input.nativeElement,0,e),this.selectAll=!this.selectAll}parseComplextRRule(e){if(!e)return;const t=this.parseRRule(e);if(t)return t;if(e.includes(","))for(const i of e.split(",")){const e=this.parseRRule(i);if(e)return e}}parseRRule(e){if(e)try{const t=d.b.parseText(e);if(t){const e=new d.b(t);return{ruleOptions:t,options:Object(T.a)(e),text:e.toText()}}}catch(t){}return null}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}keyDown(e){switch(e.keyCode){case a.a.ENTER:this.handleEnter(),e.preventDefault();break;case a.a.ARROW_UP:case a.a.ARROW_DOWN:e.preventDefault();break;case a.a.ESCAPE:e.preventDefault(),e.stopPropagation(),this.cancel()}}keyUp(e){const t=e.target.value;t!==this.currentText&&(this.currentText=t,this.debounceProcessLanguage$.next(this.currentText))}handleEnter(){this.items$.pipe(Object(x.a)(1),Object(w.a)(this.destroy$)).subscribe(e=>{e&&1===e.length&&this.selectValue(e[0])})}cancel(){this.setFocused(!1),this.input.nativeElement.blur(),this.restoreInput()}restoreInput(){this.input.nativeElement.value=this.initText,this.currentText=this.initText,this.processLanguage$.next(this.currentText)}selectValue(e){const t=e.customPayload;if("time"===t.code)this.onChange.emit({date:{moment:t.momentValue,updateTime:!0},rrule:null,quickOption:!0}),this.input.nativeElement.focus();else if(t.code){const{date:e,hasTime:i}=Object(n.p)(t.code);this.onChange.emit({date:{moment:e,updateTime:i},rrule:null,quickOption:!0}),this.input.nativeElement.focus()}else(t.date||t.rrule)&&(t.rrule&&(this.restoreInput(),this.focusAndSelect()),this.onChange.emit({date:t.date,rrule:t.rrule,quickOption:!1}))}isTimePos(){if(this.popActive)return;const e=this.input.nativeElement,t=e.value,i=e.selectionStart||0,o=t&&i>0?t.substring(0,i):"";return o&&o.includes(" at ")}inputClick(e){"time"!==this.mode&&setTimeout(()=>{const e=this.isTimePos();this.onClickText.emit({isTimePos:e})})}getTextWidth(e){const t=document.querySelector(".cu-datetime-input-text-width-"+this.type);return Object(C.a)(t,e)}setFocused(e){this.isFocused$.next(e)}openDropdown(){"time"===this.mode&&this.items$.pipe(Object(I.a)(),Object(w.a)(this.destroy$)).subscribe(e=>{const t=l();this.scrollToNow||(t.startOf("day"),t.add(8,"hour"));const i=e&&e.find(e=>e.customPayload&&"time"===e.customPayload.code&&e.customPayload.momentValue.isSameOrAfter(t));i&&this.dropdown.scrollToItem(i)}),this.onDropdownOpen.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(D.a),o.Wb(s.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-date-nlp-input"]],viewQuery:function(e,t){if(1&e&&(o.jd(E,3),o.jd(P,3)),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first),o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-date-nlp-input"],inputs:{placeholder:"placeholder",date:"date",dateFormatting:"dateFormatting",autoFocus:"autoFocus",initText:"initText",inputClass:"inputClass",type:"type",autoSize:"autoSize",clickOutsideBodySelector:"clickOutsideBodySelector",allowRRule:"allowRRule",mode:"mode",noTime:"noTime",dropdownPlacement:"dropdownPlacement",scrollToNow:"scrollToNow",disabled:"disabled"},outputs:{onDropdownOpen:"onDropdownOpen",onChange:"onChange",onClickText:"onClickText"},features:[o.Gb],decls:5,vars:19,consts:[["type","text",3,"placeholder","value","clickOutsideBodySelector","disabled","keydown","keyup","click","focus","blur","clickOutside"],["input",""],[3,"items","dropdownPlacement","dropdownHostElement","dropdownCloseOthersOnOpen","dropdownPreventDocumentScroll","menuModifier","onSelect","onOpen"],["dropdown",""]],template:function(e,t){if(1&e&&(o.cc(0,"input",0,1),o.qc("keydown",function(e){return t.keyDown(e)})("keyup",function(e){return t.keyUp(e)})("click",function(e){return t.inputClick(e)})("focus",function(){return t.setFocused(!0)})("blur",function(){return t.selectAll=!0})("clickOutside",function(){return t.cancel()}),o.bc(),o.cc(2,"cu-dropdown-list",2,3),o.qc("onSelect",function(e){return t.selectValue(e)})("onOpen",function(){return t.openDropdown()}),o.vc(4,"async"),o.bc()),2&e){const e=o.Rc(1);o.Mb("cu-date-nlp-input__input ",t.inputClass,""),o.ad("width",t.autoSize?t.valueTextWidth+"px":"auto"),o.Ob("cu-date-nlp-input__input-empty",!t.initText),o.Dc("placeholder",t.placeholder)("value",t.initText)("clickOutsideBodySelector",t.clickOutsideBodySelector)("disabled",t.disabled),o.Ib(2),o.Dc("items",o.wc(4,17,t.items$))("dropdownPlacement",t.dropdownPlacement)("dropdownHostElement",e.nativeElement)("dropdownCloseOthersOnOpen",!1)("dropdownPreventDocumentScroll",!1)("menuModifier","cu-date-nlp-input__dropdown-body")}},directives:[O.a,S.a],pipes:[c.b],styles:['.cu-date-nlp-input{display:flex;flex-direction:column}.cu-date-nlp-input__input{flex-grow:1;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;border:0;width:100%;box-shadow:none;background:transparent;padding:2px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-date-nlp-input__input{font-family:var(--global-font-support)}}.cu-date-nlp-input__input:focus{box-shadow:none;background:transparent}.cu-date-nlp-input__quick-item{font-weight:400;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;display:flex;align-items:center;padding:10px 15px;margin:0;cursor:pointer;background:#fff;border-radius:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-date-nlp-input__quick-item{font-family:var(--global-font-support)}}.dark-theme .cu-date-nlp-input__quick-item{background-color:#384047}.cu-date-nlp-input__quick-item:hover{background:#fafbfc}.dark-theme .cu-date-nlp-input__quick-item:hover{background:#2b343b}.cu-date-nlp-input__quick-item_active{background-color:#fff}.dark-theme .cu-date-nlp-input__quick-item_active{background-color:#384047}.cu-date-nlp-input__quick-item-icon{margin-right:8px}.cu-date-nlp-input__quick-item-icon svg{width:16px;height:16px;stroke-width:2px}.cu-date-nlp-input__quick-item-icon-recurring svg{stroke:#979797;stroke-width:1px}.cu-date-nlp-input__popover .cu-slash-command-value-list{width:auto;min-width:150px}.cu-date-nlp-input__dropdown-body .cu-dropdown-list__body{max-height:80vh}'],encapsulation:2,changeDetection:0}),e})();var A=i("UdVN"),$=i("NsZK"),U=i("u7Ji"),R=i("papW");const M=["timeDropdown"],F=["dateTimeInput"],L=["timeInput"];function N(e,t){if(1&e&&o.Xb(0,"div",12),2&e){const e=o.uc();o.Ob("cu-datetime-input__icon-start","start"===e.type)("cu-datetime-input__icon-due","due"===e.type),o.Dc("icon",e.iconName)}}function z(e,t){if(1&e){const e=o.dc();o.cc(0,"div",13),o.qc("click",function(t){return o.Uc(e),o.uc().clearDate(t)}),o.bc()}}function q(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-date-nlp-input",14,15),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeParsedTime(t)})("clickOutside",function(){return o.Uc(e),o.uc().cancelInput()})("onDropdownOpen",function(){return o.Uc(e),o.uc().closeTimeDropdown()}),o.vc(2,"isToday"),o.bc()}if(2&e){const e=o.uc();o.Dc("clickOutsideBodySelector",e.clickOutsideBodySelector)("autoSize",!1)("autoFocus",!1)("mode","time")("allowRRule",!1)("scrollToNow",o.wc(2,6,e.value))}}const G=function(e){return{"cu-datetime-input__value-label_active":e}},V=function(){return["bottom-right","top-right","auto"]};let B=(()=>{class e{constructor(e){this.timezonesService=e,this.showDay=!0,this.sep=" at ",this.autoSize=!0,this.showTimeDropdown=!0,this.enableFocusAndSelectOnClick=!0,this.placeholder=$localize`:@@forms_placeholder--date-and-time:Enter any date or time`,this.iconName="cu2-due-date",this.autoFocus=!1,this.allowRRule=!0,this.noTime=!1,this.allowClear=!0,this.clickOutsideBodySelector=".cu-calendar-picker",this.dropdownModifierClass="",this.disabled=!1,this.onInputActive=new o.o,this.onParsedDate=new o.o,this.onSelectTime=new o.o,this.onClearDate=new o.o,this.hours=Object(n.n)(),this.ignoreSelect=!1,this.hourItems=this.hours.map((e,t)=>({id:String(t),title:this.timezonesService.formatUserDateTime(e,!1,!0),customPayload:e}))}ngOnChanges(e){!(e&&e.isActive&&e.isActive.currentValue)||this.timeInput&&this.timeInput.isFocused||this.focusInput(0)}ngOnInit(){}ngAfterViewInit(){this.isActive&&this.focusInput(500)}changeParsedDate(e){this.onParsedDate.emit(e)}changeParsedTime(e){e.date&&e.date.moment&&this.onSelectTime.emit(e.date.moment.clone())}selectTime(e){this.onSelectTime.emit(e.customPayload.clone())}clearDate(e){e.stopPropagation(),e.preventDefault(),this.onClearDate.emit()}activateInput(){this.onInputActive.emit(!0)}cancelInput(){this.onInputActive.emit(!1)}clickText(e){this.showTimeDropdown&&e.isTimePos&&!this.noTime?this.timeDropdown.open():this.enableFocusAndSelectOnClick?this.dateTimeInput.focusAndSelectOnClick():this.dateTimeInput.focusOnly()}closeTimeDropdown(){var e;this.ignoreSelect=!0,null===(e=this.timeDropdown)||void 0===e||e.close()}closeTime(){this.ignoreSelect||this.dateTimeInput.focusAndSelect(),this.ignoreSelect=!1}focusInput(e=0){setTimeout(()=>{this.enableFocusAndSelectOnClick?this.dateTimeInput.focusAndSelect():this.dateTimeInput.focusOnly()},e)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(s.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-datetime-input"]],viewQuery:function(e,t){if(1&e&&(o.jd(M,3),o.jd(F,3),o.jd(F,3),o.jd(L,1)),2&e){let e;o.Qc(e=o.rc())&&(t.timeDropdown=e.first),o.Qc(e=o.rc())&&(t.dateTimeInput=e.first),o.Qc(e=o.rc())&&(t.dateTimeInputElement=e.first),o.Qc(e=o.rc())&&(t.timeInput=e.first)}},hostAttrs:[1,"cu-datetime-input"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-datetime-input_active",t.isActive)},inputs:{title:"title",isActive:"isActive",isInputActive:"isInputActive",showDay:"showDay",value:"value",sep:"sep",autoSize:"autoSize",showTimeDropdown:"showTimeDropdown",enableFocusAndSelectOnClick:"enableFocusAndSelectOnClick",timeExists:"timeExists",dateFormatting:"dateFormatting",placeholder:"placeholder",iconName:"iconName",autoFocus:"autoFocus",type:"type",allowRRule:"allowRRule",noTime:"noTime",allowClear:"allowClear",clickOutsideBodySelector:"clickOutsideBodySelector",dropdownModifierClass:"dropdownModifierClass",disabled:"disabled"},outputs:{onInputActive:"onInputActive",onParsedDate:"onParsedDate",onSelectTime:"onSelectTime",onClearDate:"onClearDate"},features:[o.Gb],decls:14,vars:31,consts:function(){let e,t;return e=$localize`:@@common_clear␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,t=$localize`:@@common_add-time-1␟7afbfed9b047606c59756d7d16e13d8caa05c959␟2287112787848895487:Add time`,[["class","cu-datetime-input__icon",3,"cu-datetime-input__icon-start","cu-datetime-input__icon-due","icon",4,"ngIf"],[1,"cu-datetime-input__value"],[1,"cu-datetime-input__value-label",3,"ngClass"],[1,"cu-datetime-input__value-editor"],["inputClass","cu-datetime-input__input-value",3,"dateFormatting","date","initText","placeholder","clickOutsideBodySelector","autoFocus","type","autoSize","allowRRule","noTime","disabled","onChange","onCancel","clickOutside","onClickText","onDropdownOpen"],["dateTimeInput",""],["class","cu-datetime-input__clear","icon","close-o","cuTooltip",e,3,"click",4,"ngIf"],["inputClass","cu-datetime-input__input-value cu-date-nlp-input__input-time","placeholder",t,3,"clickOutsideBodySelector","autoSize","autoFocus","mode","allowRRule","scrollToNow","onChange","clickOutside","onDropdownOpen",4,"ngIf"],[1,"cu-datetime-input__dropdown",3,"items","dropdownPlacement","dropdownHostElement","dropdownCloseOthersOnOpen","dropdownModifierClass","onSelect","onClose"],["timeDropdown",""],[1,"cu-datetime-input-text-width-start"],[1,"cu-datetime-input-text-width-due"],[1,"cu-datetime-input__icon",3,"icon"],["icon","close-o","cuTooltip",e,1,"cu-datetime-input__clear",3,"click"],["inputClass","cu-datetime-input__input-value cu-date-nlp-input__input-time","placeholder",t,3,"clickOutsideBodySelector","autoSize","autoFocus","mode","allowRRule","scrollToNow","onChange","clickOutside","onDropdownOpen"],["timeInput",""]]},template:function(e,t){1&e&&(o.bd(0,N,1,5,"div",0),o.cc(1,"div",1),o.cc(2,"div",2),o.dd(3),o.bc(),o.cc(4,"div",3),o.cc(5,"cu-date-nlp-input",4,5),o.qc("onChange",function(e){return t.changeParsedDate(e)})("onCancel",function(){return t.cancelInput()})("clickOutside",function(){return t.cancelInput()})("onClickText",function(e){return t.clickText(e)})("onDropdownOpen",function(){return t.closeTimeDropdown()}),o.vc(7,"formatDateTime"),o.bc(),o.bd(8,z,1,0,"div",6),o.bd(9,q,3,8,"cu-date-nlp-input",7),o.cc(10,"cu-dropdown-list",8,9),o.qc("onSelect",function(e){return t.selectTime(e)})("onClose",function(){return t.closeTime()}),o.bc(),o.bc(),o.bc(),o.Xb(12,"div",10),o.Xb(13,"div",11)),2&e&&(o.Dc("ngIf",t.iconName),o.Ib(2),o.Dc("ngClass",o.Hc(28,G,t.value)),o.Ib(1),o.fd(" ",t.title," "),o.Ib(1),o.Ob("cu-hidden",!t.isActive&&!t.value),o.Ib(1),o.Dc("dateFormatting",t.dateFormatting)("date",t.value)("initText",o.zc(7,23,t.value,t.showDay,t.timeExists,t.sep))("placeholder",t.placeholder)("clickOutsideBodySelector",t.clickOutsideBodySelector)("autoFocus",t.autoFocus)("type",t.type)("autoSize",t.autoSize)("allowRRule",t.allowRRule)("noTime",t.noTime)("disabled",t.disabled),o.Ib(3),o.Dc("ngIf",t.value&&t.allowClear),o.Ib(1),o.Dc("ngIf",t.value&&!t.timeExists&&!t.noTime),o.Ib(1),o.Dc("items",t.hourItems)("dropdownPlacement",o.Gc(30,V))("dropdownHostElement",t.dateTimeInputElement.nativeElement)("dropdownCloseOthersOnOpen",!1)("dropdownModifierClass",t.dropdownModifierClass))},directives:[c.q,c.o,j,O.a,S.a,A.a,$.a],pipes:[U.a,R.a],styles:['.cu-datetime-input{display:flex;position:relative;align-items:center;cursor:pointer;transition:all .3s cubic-bezier(.785,.135,.15,.86) 0s;padding:0 10px;margin:0;height:32px;border-radius:3px;min-width:139px;border:1px solid #e4e4e4}.dark-theme .cu-datetime-input{border-color:#1e272e}.cu-datetime-input_active{cursor:default}.cu-datetime-input:last-child{flex-grow:1;margin-left:8px}.cu-datetime-input .datepicker__dates-input-container-inner,.cu-datetime-input .datepicker__dates-input-container-val{flex-grow:1}.cu-datetime-input__icon{width:16px;height:16px;margin-right:8px}.cu-datetime-input__icon svg{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:rgba(34,34,34,.3)}.dark-theme .cu-datetime-input__icon svg{fill:rgba(213,214,215,.3)}.cu-datetime-input:hover .cu-datetime-input__icon svg,.cu-datetime-input_active .cu-datetime-input__icon svg{fill:#7c828d}.dark-theme .cu-datetime-input:hover .cu-datetime-input__icon svg,.dark-theme .cu-datetime-input_active .cu-datetime-input__icon svg{fill:#abaeb0}.cu-datetime-input__value{display:flex;justify-content:center;flex-direction:column;white-space:nowrap;flex-grow:1;position:relative;height:100%}.cu-datetime-input__value .cu-date-nlp-input{flex-grow:0}.cu-datetime-input__value .cu-date-nlp-input__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;flex-grow:0;padding:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__value .cu-date-nlp-input__input{font-family:var(--global-font-support)}}.cu-datetime-input__value .cu-date-nlp-input__input::-webkit-input-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:121px;line-height:12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__value .cu-date-nlp-input__input::-webkit-input-placeholder{font-family:var(--global-font-support)}}.cu-datetime-input__value .cu-date-nlp-input__input::-moz-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:12px;line-height:12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__value .cu-date-nlp-input__input::-moz-placeholder{font-family:var(--global-font-support)}}.cu-datetime-input__value .cu-date-nlp-input__input:-ms-input-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:12px;line-height:12px}.cu-datetime-input__value .cu-date-nlp-input__input::placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:12px;line-height:12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__value .cu-date-nlp-input__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-datetime-input__value .cu-date-nlp-input__input::placeholder{font-family:var(--global-font-support)}}.cu-datetime-input__value .cu-date-nlp-input__input-empty{min-width:140px}.cu-datetime-input__value .cu-date-nlp-input__input-time{min-width:0!important;max-width:60px;margin-left:6px}.cu-datetime-input__value-label{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;text-transform:uppercase;white-space:nowrap;font:600 10px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.3);position:relative;top:1px}.dark-theme .cu-datetime-input__value-label{color:#d5d6d7}.cu-datetime-input:hover .cu-datetime-input__value-label,.cu-datetime-input_active .cu-datetime-input__value-label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-datetime-input:hover .cu-datetime-input__value-label,.cu-datetime-input_active .cu-datetime-input__value-label{color:var(--theme-main-color)}}.cu-datetime-input__value-label_active,.cu-datetime-input_active .cu-datetime-input__value-label{position:absolute;top:-5px;left:-2px;background:#fff;font:500 9px Gotham Pro,Proxima Nova,arial,serif;padding:0 2px}.dark-theme .cu-datetime-input__value-label_active,.dark-theme .cu-datetime-input_active .cu-datetime-input__value-label{background:#384047}.cu-datetime-input__value-text{font-weight:300;font-size:13px;line-height:1}.cu-datetime-input__value-editor{display:flex;flex-grow:1;align-items:center}.cu-datetime-input__value-editor-time-toggle{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:12px;line-height:12px;margin-left:10px;margin-top:4px;text-decoration:none;color:#7c828d;cursor:pointer;border-bottom:1px dashed #7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__value-editor-time-toggle{font-family:var(--global-font-support)}}.dark-theme .cu-datetime-input__value-editor-time-toggle{color:#d5d6d7}.cu-datetime-input__value-editor-time-toggle:hover{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-datetime-input__value-editor-time-toggle:hover{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-datetime-input__value-editor-text{border:none;width:50px;position:relative;top:2px}.cu-datetime-input__value .cu-datetime-input__input-value{padding:0;flex-grow:0;margin-top:4px}.cu-datetime-input__value .cu-datetime-input__value-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:12px;line-height:12px;margin-top:5px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__value .cu-datetime-input__value-text{font-family:var(--global-font-support)}}.cu-datetime-input__value .cu-datetime-input__value-text.cu-datetime-input__value-text-is-active{margin-top:0;padding-right:4px}.cu-datetime-input__value .cu-datetime-input__clear{fill:#7b68ee;position:relative;cursor:pointer;margin:3px 0 0 4px;width:14px;height:14px;padding:1px}@supports (--theme-main-color:#7b68ee){.cu-datetime-input__value .cu-datetime-input__clear{fill:var(--theme-main-color)}}.cu-datetime-input__value .cu-datetime-input__clear:hover{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-datetime-input__value .cu-datetime-input__clear:hover{fill:var(--theme-main-color-dark)}}.cu-datetime-input__input-value{cursor:text;flex-grow:1;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;padding:2px;border:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input__input-value{font-family:var(--global-font-support)}}.cu-datetime-input_active .cu-datetime-input__input-value{flex-grow:1}.cu-datetime-input__time{width:16px;height:16px}.cu-datetime-input-text-width-due,.cu-datetime-input-text-width-start{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;z-index:-1;position:absolute;visibility:hidden;width:auto;height:auto;pointer-events:none;bottom:0;left:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-datetime-input-text-width-due,.cu-datetime-input-text-width-start{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})()},QzmI:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("fXoL"),n=i("UdVN"),s=i("ofXK"),c=i("NQa4");function a(e,t){1&e&&(o.mc(0,45,1),o.Yb(1),o.jc())}const r=function(e){return[e,"settings","billing"]};function l(e,t){if(1&e&&(o.cc(0,"a",48),o.gc(1,49),o.bc()),2&e){const e=o.uc();o.Dc("cuLink",o.Hc(1,r,null==e.team?null:e.team.id))}}let d=(()=>{class e{constructor(){this.hidePaywallPopover=new o.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-paywall-popover"]],hostAttrs:[1,"cu-custom-fields__paywall-popover"],inputs:{team:"team"},outputs:{hidePaywallPopover:"hidePaywallPopover"},decls:48,vars:2,consts:function(){let e,t,i;return e=$localize`:@@common_whoops␟aaa2dc0f496983b9fb45d3df81da0e776147d332␟496498623669085043: Whoops!
`,t=$localize`:@@cu-edit-task-custom-field-value__paywall-description_exceeded-100-cf␟5aa2f7d277de1f720a6b23949efaa5f33a8c7e68␟4774392728120781533: You've exceeded 100 uses of Custom Fields. To get unlimited use of this and many other features ${"\ufffd*46:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: , ask your Workspace admin to upgrade to Unlimited. ${"\ufffd/#1:1\ufffd\ufffd/*46:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:.
`,i=$localize`:@@common_upgrade-to-unlimited␟096a0fa691caddb4e386f0e64db822b3f7b595eb␟6823061528837817990: Upgrade to Unlimited
`,[[1,"cu-custom-fields__paywall-popover-close",3,"click"],["icon","close-modal-grey",1,"cu-custom-fields__paywall-popover-close-icon"],["width","123","height","131","xmlns","http://www.w3.org/2000/svg",1,"cu-custom-fields__paywall-popover-icon"],["fill","none","fill-rule","evenodd"],["d","M56 18c-.686 0-1.31.381-1.67 1.019L34.218 54.75a2.264 2.264 0 0 0-.01 2.214c.362.659.975 1.036 1.679 1.036h40.228c.705 0 1.317-.377 1.679-1.036a2.264 2.264 0 0 0-.01-2.214L57.669 19.019C57.31 18.381 56.686 18 56 18zm20.114 42H35.886c-1.39 0-2.641-.763-3.344-2.042a4.313 4.313 0 0 1 .02-4.22l20.113-35.731C53.382 16.75 54.625 16 56 16c1.375 0 2.618.75 3.325 2.007l20.114 35.731a4.315 4.315 0 0 1 .02 4.22C78.755 59.237 77.505 60 76.114 60z","fill","#F5A623"],["d","M55 52c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2M56 46a1 1 0 0 1-1-1V31a1 1 0 1 1 2 0v14a1 1 0 0 1-1 1","fill","#F5A623"],["d","M2.95 127.423c-1.78.27-2.433.59-1.575.97 5.969 2.633 32.687 2.583 45.648 2.595 16.303.014 33.266.102 47.942-.521 6.141-.261 20.06-.492 22.437-1.378 6.234-2.329-38.193-3.02-45.383-3.06-11.986-.067-58.904-.15-69.07 1.394","fill","#E3E3E3"],["d","M108.136 86.15c.301 1.576.473 3.173.554 4.774.176 3.468-.151 6.94-.24 10.406-.071 2.816-.048 5.636.034 8.452.043 1.47.1 2.94.151 4.41.047 1.354.28 2.844.144 4.19.096 2.81.39 5.699.088 8.502-.057.525-.104 1.41-.594 1.75-1.603 1.116-4.099-6.98-4.38-7.777-.35-.998-.673-2.006-1.038-2.998a166.965 166.965 0 0 1-3.36-10.108c-.505-1.702-.927-3.431-1.436-5.132-.363-1.21-1.105-3.933-2.62-4.046-1.428-.107-2.11 2.05-2.652 3.07-2.882 5.42-5.012 11.127-7.132 16.874-.81 2.192-1.614 4.388-2.515 6.544-.597 1.429-1.198 3.005-2.172 4.23-.238.301-.608.761-1.047.704-2.43-.317.653-14.131 1.216-24.069.406-7.154.966-13.786 1.574-20.926l25.425 1.15","fill","#F9E280"],["d","M83.138 105.97c.234-4.096.515-8.022.824-11.97 3.65 1.55 7.602 2.225 11.514 2.557 2.532.214 5.036.148 7.573.169 1.968.016 3.876-.048 5.757-.601-.073 1.714-.175 3.427-.223 5.14a165.539 165.539 0 0 0-.004 8.44c.034 1.468.082 2.935.123 4.403.037 1.352.249 2.839.116 4.183.078 2.805.34 5.69.046 8.49-.099.95-.693 1.638-1.247.512-.637-1.295-1.076-2.883-1.539-4.259-.617-1.838-1.249-3.67-1.897-5.497-1.943-5.478-3.46-11.092-5.559-16.527-.58-1.5-1.465-2.38-3.059-2.492-.475-.033-.932.233-1.25.593-.319.36-.522.808-.721 1.248-1.695 3.753-3.422 7.473-4.898 11.321l-2.713 7.076c-.779 2.031-1.357 4.426-2.422 6.297-.351.617-.704 1.237-.97 1.897-.257.637-.441 1.323-.867 1.858-.086.107-.206.216-.339.187-.675-.15-.26-3.691-.222-4.206.136-1.873.357-3.739.581-5.602.53-4.396 1.144-8.792 1.396-13.217","fill","#FFF0A9"],["d","M108.229 86.475c1.047 5.6.346 11.235.28 16.88-.032 2.795.03 5.59.128 8.384.047 1.33.083 2.658.184 3.984.105 1.378.044 2.745.112 4.124.124 2.49.415 5.131-.05 7.602-.036.188-.213.91-.266.925-.134.039-.711-.557-.879-.77-.645-.825-.997-1.859-1.362-2.826-1.913-5.068-3.742-10.203-5.355-15.373-.758-2.428-1.37-4.895-2.12-7.325-.376-1.218-.931-3.213-2.382-3.567-1.454-.356-2.463.894-3.037 2.017-1.064 2.081-2.122 4.17-3.082 6.3-2.254 5-4.045 10.176-6.017 15.286-.45 1.168-.923 2.326-1.408 3.48-.205.489-.41.978-.637 1.456-.302.64-.696 1.672-1.261 2.114-.346.272-.398.415-.715-.005-.074-.098-.123-.267-.165-.387-.176-.512-.207-1.064-.227-1.6-.057-1.523.122-3.055.274-4.568.614-6.084 1.584-12.107 1.955-18.216.39-6.423.934-12.836 1.485-19.248.024-.28-.878-.1-.898.141-.492 5.723-.98 11.447-1.356 17.179-.193 2.933-.354 5.863-.679 8.786-.332 2.997-.766 5.983-1.124 8.977-.312 2.598-.891 5.51-.49 8.121.084.554.27 1.383.885 1.597.59.205 1.262-.176 1.668-.568.834-.804 1.354-2.01 1.81-3.045a95.475 95.475 0 0 0 1.53-3.706c1.061-2.71 2.04-5.452 3.08-8.17 1.858-4.863 3.9-9.673 6.373-14.263.203-.376.516-1.033.942-1.218.557-.241 1.05.249 1.355.634.575.727.883 1.658 1.158 2.529.82 2.602 1.467 5.254 2.286 7.858a265.155 265.155 0 0 0 5.409 15.458c.44 1.146 1.311 3.656 2.977 3.322 1.537-.31 1.338-2.738 1.375-3.88.05-1.53-.032-3.058-.11-4.585-.08-1.556-.02-3.11-.135-4.664-.237-3.193-.3-6.413-.328-9.614-.056-6.583.942-13.275-.278-19.797-.043-.23-.955-.022-.905.24","fill","#6A79A8"],["d","M113.578 91.692c-8.51 1.04-17.191 2.202-25.733.996-1.526-.216-3.071-.522-4.52-1.118-1.072-.441-2.275-1.123-2.7-2.396-.153-.46-1.748.094-1.617.486.797 2.39 3.88 3.064 5.826 3.468 2.429.503 4.89.65 7.35.794 5.157.301 10.358-.33 15.488-.868 1.74-.182 3.48-.374 5.216-.586.259-.032.963-.122 1.08-.443.114-.31-.092-.37-.39-.333","fill","#F2F2F2"],["d","M78.866 90.701c-.333-.155-.667-.31-1.003-.457-.575-.251-1.346-.456-1.707-1.047-.388-.636.056-1.89.165-2.57.169-1.045.352-2.088.55-3.128 1.062-5.576 2.35-11.157 3.93-16.594a103.4 103.4 0 0 1 1.04-3.368c1.92-5.853 7.009-21.645 17.343-16.534 7.746 3.83 11.489 19.153 13.286 34.108.601 4.999 1.287 7.93 1.53 12.403.013.24-12.477 1.306-13.375 1.37-5.13.37-10.289-.142-15.234-1.63-1.739-.524-3.44-1.177-5.112-1.905-.474-.207-.943-.429-1.413-.648","fill","#F2F2F2"],["d","M80.714 89.794a40.714 40.714 0 0 0-.95-.448c-.545-.246-1.275-.447-1.616-1.026-.368-.625.054-1.856.158-2.524.16-1.027.335-2.051.523-3.072 1.011-5.476 2.236-10.957 3.738-16.297.312-1.11.64-2.213.988-3.309.668-2.107 1.36-4.206 2.198-6.253.47-1.15 1.343-2.38 1.65-3.564.33-1.27.088-2.348.9-3.539.593-.87 1.454-1.545 2.414-1.983 3.2-1.463 5.868-2.659 9.284-.91 7.335 3.755 10.87 18.797 12.56 33.48.565 4.908 1.213 7.786 1.439 12.178.012.235-11.822 1.293-12.674 1.357-4.86.367-9.748-.131-14.433-1.59-1.646-.512-3.258-1.152-4.84-1.865-.45-.203-.894-.42-1.339-.635","fill","#FFF"],["d","M78.695 91.233c-1.207-.568-2.956-.87-2.757-2.547.17-1.42.514-2.86.774-4.266a195.4 195.4 0 0 1 2.047-9.681c1.147-4.819 2.473-9.604 4.138-14.269 1.212-3.393 2.647-6.814 4.802-9.717 2.11-2.843 5.097-5.107 8.776-4.096 4.014 1.102 6.627 4.687 8.424 8.256 2.392 4.753 3.76 10.022 4.818 15.22 1.197 5.875 1.823 11.839 2.684 17.768.181 1.252.352 2.506.48 3.765.065.645-.009 1.482.174 2.096l.01.158c-.042.152.017.215.175.187.301.873.165-.151.128.04a.742.742 0 0 0-.16.028c-1.172.32-2.523.314-3.727.436-2.947.3-5.9.575-8.852.811-5.979.479-12.026-.285-17.662-2.371a53.406 53.406 0 0 1-4.272-1.818c-.223-.105-1.043.24-.722.392 6.156 2.91 12.709 4.485 19.526 4.369 3.3-.056 6.611-.462 9.895-.776 1.626-.156 3.255-.308 4.875-.515.399-.05.828-.079 1.215-.197.736-.225.485-.73.432-1.45-.215-2.943-.705-5.85-1.113-8.768-.457-3.27-.814-6.55-1.351-9.81-.976-5.922-2.262-11.907-4.584-17.458-1.619-3.87-3.935-8.084-7.813-10.033-3.264-1.64-6.876-1.214-9.688 1.113-2.88 2.384-4.701 5.943-6.134 9.343-1.73 4.105-3.019 8.426-4.172 12.724a183.11 183.11 0 0 0-2.475 10.51 165.348 165.348 0 0 0-1.012 5.285c-.12.695-.226 1.39-.375 2.079-.117.543-.313 1.247-.114 1.796.372 1.025 2.015 1.378 2.888 1.788.223.105 1.043-.241.722-.392","fill","#6A79A8"],["d","M102.67 49.202c-.705-.702-1.468.61-1.805 1.127-.668 1.02-1.582 1.756-2.495 2.523-1.331 1.12-2.791 2.07-4.366 2.751-.685.297-1.78.891-2.53.845-.394-.024-1.028-.674-1.342-1.018a7.989 7.989 0 0 1-1.655-2.784 7.651 7.651 0 0 1-.369-1.648c-.053-.487.104-1.188-.045-1.632-.432-1.29-1.052 1.247-1.06 1.635-.027 1.114.196 2.232.545 3.276a14.649 14.649 0 0 0 1.769 3.579c-.02-.028 1.683-.79 1.795-.838.072-.03.572 1.819.618 1.982 3.97-.813 8.67-3.072 10.745-6.999.365-.692.866-2.13.195-2.8","fill","#FFF0A9"],["d","M89.131 48.66c.774 1.663 1.91 3.159 3.671 3.322 1.27.118 2.534-.356 3.614-1.054 2.378-1.537 3.984-4.12 4.904-6.857 1.04-3.095 1.655-6.502 1.68-9.877.015-2.299-.243-4.583-.828-6.744-.924-3.414-3.18-8.49-7.284-8.45-4.435.044-7.966 6.92-7.887 15.355l.014 1.512c.044 4.677.46 7.933 1.155 10.194.245.798.553 1.722.961 2.6","fill","#FFF"],["d","M107.616 34.535c3.56-4.411 3.076-10.594-.72-14.725-1.107-1.205-2.12-2.084-1.53-3.86.655-1.975 3.07-2.776 5.034-2.576 1.884.193 3.617 1.235 4.886 2.64 1.268 1.403 2.107 3.148 2.693 4.947a21.792 21.792 0 0 1 .226 12.666 32.929 32.929 0 0 0 2.487-5.274c1.554-4.289 2.524-8.963 2.267-13.541-.214-3.801-1.09-8.165-3.637-11.127-4.039-4.697-12.02-4.898-16.455-.635-1.281 1.231-2.158 2.99-2.17 4.785-.013 1.805 1.032 3.886-.113 5.564-.509.746-1.374 1.19-2.258 1.379-1.83.392-3.555.533-5.343 1.234-1.84.72-3.642 1.666-5.11 3.003-1.227 1.118-3.055 3.319-2.858 5.112.349 3.173 5.425 5.003 8.086 4.93 3.27-.09 6.438-.371 8.94 2.145a10.369 10.369 0 0 1 1.95 2.738c.154.313 1.265 2.839.927 3.06 1.004-.658 1.92-1.5 2.698-2.465","fill","#F9AB98"],["d","M100.856 48.788c1.665-2.19 2.6-4.727 3.251-7.357.715-2.886 1.028-5.877.84-8.843-.263-4.112-1.508-9.074-4.756-11.98-2.706-2.422-6.38-1.991-8.828.511-3.14 3.21-4.188 8.192-4.319 12.471-.155 5.069.004 10.493 2.088 15.215.173.391 1.087.133.922-.24-1.753-3.971-2.03-8.282-2.076-12.555-.045-4.239.328-8.575 2.474-12.36.824-1.453 1.97-2.911 3.546-3.639 1.652-.762 3.494-.406 4.922.65 3.066 2.263 4.4 6.664 4.907 10.204.44 3.077.264 6.232-.347 9.275-.595 2.962-1.53 5.942-3.393 8.392-.346.456.523.58.769.256M91.13 51.73c.894.77 1.95 1.21 3.123 1.269.25.012.614-.074.72-.34.098-.243-.087-.443-.332-.456-1.025-.051-1.879-.44-2.656-1.11-.361-.311-1.334.223-.855.636","fill","#6A79A8"],["d","M92 42.483c.214.505.676.946 1.275 1.216.835.377 1.868.431 2.663-.019.35-.198.634-.467.82-.769.09-.146.156-.3.196-.459.032-.124.06-.294.039-.452a2.61 2.61 0 0 1-1.28.726c-1.002.236-2.648.483-3.473-.17-.058-.045-.114-.096-.192-.117l-.048.044","fill","#6A79A8"],["d","M103.414 62.758c-.319-.554-.475-1.302-.392-2.105.163-1.57 1.18-2.755 2.272-2.646 1.093.109 1.846 1.47 1.684 3.04-.081.785-.376 1.474-.788 1.953l-2.776-.242","fill","#FFF"],["d","M104.29 62.406a4.306 4.306 0 0 1-.316-2.87c.213-.926.915-2.425 2.06-1.878.695.332 1.002 1.34 1.092 2.06.137 1.09-.134 2.207-.78 3.078-.23.31.653.231.821.004 1.18-1.59 1.416-5.857-1.375-5.8-2.595.054-3.355 3.667-2.388 5.653.145.299 1.005-.001.885-.247","fill","#6A79A8"],["d","M105.114 61.31c-.085 1.67-.016 3.373-.316 5.024-.332 1.833-1.246 3.28-2.7 4.42-.39.307.493.298.707.13 1.386-1.088 2.38-2.475 2.785-4.214.416-1.785.317-3.66.41-5.48.018-.347-.871-.165-.886.12M88 50.222c.016 1.94.97 3.676 2.387 5.036.207.198.578.65.887.727.321.08.899-.188 1.18-.266 1.604-.442 3.24-.848 4.707-1.624 2.323-1.23 4.407-2.922 5.837-5.065.039-.058-.578-.04-.685.121-1.52 2.275-3.925 4.28-6.54 5.355-1.347.554-2.826.887-4.238 1.263l.355-.017c-1.877-1.315-3.175-3.486-3.194-5.707 0-.092-.698-.001-.696.177","fill","#6A79A8"],["d","M91.004 56.158l.515 1.758c.034.114.297.084.374.068 3.211-.66 6.315-1.94 8.84-4.023 1.135-.937 2.314-2.085 2.966-3.412.488-.993.508-2.478-.904-2.549-.217-.01-1.035.372-.575.395 1.686.084.575 2.423.081 3.107-.729 1.01-1.634 1.909-2.619 2.68-2.214 1.735-4.868 2.861-7.634 3.429l.373.068-.515-1.757c-.068-.23-.969.01-.902.236","fill","#6A79A8"],["d","M91.39 55.704c-.59.292-1.241.435-1.832.728l.582.06c-1.486-2.158-3.072-5.533-1.82-8.152.212-.441-.656-.433-.819-.092-1.337 2.797.252 6.306 1.851 8.627.121.175.424.138.582.06.59-.294 1.241-.436 1.832-.73.529-.262.056-.716-.376-.501M102.209 70.36c-3.427 2.517-7.725 2.49-11.256.215-1.442-.929-3.06-2.399-3.002-4.278.027-.89.783-1.385.957-2.22.16-.767-.115-1.465-.668-1.983-.322-.3-1.106.183-.704.559 1.187 1.109-.162 2.067-.449 3.156-.224.855.009 1.814.42 2.57.86 1.58 2.449 2.698 4.017 3.473 3.736 1.845 7.941 1.441 11.306-1.03.503-.37-.233-.747-.621-.462M81.23 61.865c-1.64 1.181-3.557 2.153-5.518 2.573-1.838.394-3.74.077-5.483-.593-.87-.335-1.707-.76-2.51-1.246-.65-.392-1.644-.864-2.132-1.471-.548-.682-.012-1.488-.024-2.274-.009-.554-.319-.695-.787-.845-.213-.069-.995.287-.717.377 1.118.359.306 1.564.398 2.466.08.784 1.187 1.266 1.754 1.64 1.65 1.088 3.461 1.96 5.386 2.332 3.621.7 7.348-.771 10.313-2.904.369-.266-.506-.18-.68-.055","fill","#6A79A8"],["d","M1.058 84.026c.033-.211 8.284.928 9.69 1.204 3.014.594 12.163.41 12.197.409.123-.002.003.68-.009.759-.11.719-.267 1.42-.422 2.113-.242 1.08-.503 2.148-.77 3.21-.34 1.359-.693 2.708-1.052 4.053a447.55 447.55 0 0 1-4.195 14.634 311.613 311.613 0 0 1-1.527 4.847c-.48 1.481-.972 2.952-1.482 4.405a99.556 99.556 0 0 1-1.372 3.705c-.374.945-.763 1.878-1.197 2.748-.457.92-1.02 2.052-1.885 1.867-1.403-.299-1.562-2.747-1.942-4.383-.541-2.33-1.088-4.659-1.587-7.01-.34-1.604-.653-3.224-.96-4.846-.311-1.636-.556-3.335-.907-4.946-.006-.033-.013-.066-.018-.1a196.648 196.648 0 0 1-2.077-14.89c-.206-2.068-.46-4.113-.53-6.216-.016-.515-.03-1.06.045-1.563","fill","#D1D1D1"],["d","M1.052 84.026c.03-.212 7.475.928 8.744 1.205 2.72.594 10.212.45 10.204.505-.31 2.167-4.285 17.62-4.72 19.27-.978 3.708-1.959 7.415-2.95 11.114-.905 3.377-1.838 6.733-2.757 10.099-.257.94-.54 1.836-1.25 1.778-.577-.046-1.09-.825-1.27-1.706-.66-3.232-1.364-6.432-1.988-9.693a254.382 254.382 0 0 1-.867-4.847c-.28-1.637-.501-3.336-.818-4.947l-.016-.1A216.967 216.967 0 0 1 1.49 91.808c-.186-2.069-.416-4.115-.479-6.219-.014-.514-.027-1.059.041-1.563","fill","#E5E5E5"],["d","M7.79 88.633c1.799.085 3.637-.391 5.405-.674 1.278-.318 2.652-.425 3.953-.634 1.31-.21 2.617-.408 3.905-.728 1.892-.46 3.765-.993 5.63-1.546 1.147-.34 2.292-.688 3.432-1.05.122-.038.203.656.214.735.103.727.153 1.45.202 2.165.076 1.114.13 2.223.178 3.328a270.4 270.4 0 0 1 .144 4.222 437.424 437.424 0 0 1 .126 15.368 304.56 304.56 0 0 1-.096 5.133c-.043 1.572-.1 3.137-.18 4.69a97.78 97.78 0 0 1-.278 3.984c-.096 1.023-.209 2.04-.385 3.007-.185 1.023-.413 2.283-1.332 2.362-1.488.128-2.368-2.188-3.229-3.654-1.227-2.089-2.459-4.173-3.65-6.295a227.626 227.626 0 0 1-2.386-4.391c-.602-1.129-1.067-2.515-1.827-3.542-.342-.463-.833-.794-1.316-1.1-.493-.312-1.082-.225-1.66-.25-.118-.005-.241-.011-.345-.067-.116-.062-.192-.177-.262-.286-1.465-2.276-3.054-4.504-4.258-6.938C8.759 100.42 8 98.21 7.797 95.922c-.216-2.447-.537-4.907-.797-7.357 0 .022.374.048.79.068","fill","#D1D1D1"],["d","M10.763 88.096c1.431.077 2.85-.018 4.309-.14 2.202-.183 4.403-.624 6.54-1.17.43-.11 6.397-1.624 6.373-1.786.312 2.166.703 18.158.734 19.867.07 3.846.135 7.69.188 11.53.049 3.506.061 7 .092 10.5.009.976-.023 1.92-.772 2.084-.608.133-1.362-.453-1.804-1.24-1.62-2.885-3.275-5.726-4.866-8.65-.782-1.438-1.544-2.9-2.302-4.365-1.162-2.246-2.267-4.25-3.747-6.296-1.595-2.203-3.11-4.46-4.625-6.716-.43-.64-.86-1.282-1.211-1.968-.342-.668-.626-1.497-1.273-1.944-.216-.149-.462-.248-.687-.383-.721-.43-1.181-1.2-1.407-2.003-.344-1.223-.273-2.537-.298-3.795-.015-.784-.016-1.572.09-2.35.067-.495.073-1.144.415-1.546.487-.572 1.657.03 2.274.143.665.121 1.322.193 1.977.228","fill","#E5E5E5"],["d","M16.11 110.202c-1.22 4.135-2.476 8.266-3.936 12.321-.653 1.813-1.259 3.942-2.376 5.528-1.144 1.623-1.88-1.91-2.02-2.654-.754-4.018-1.762-7.985-2.51-12.006-.77-4.138-1.5-8.288-2.09-12.456-.336-2.377-.631-4.76-.88-7.149-.267-2.56-.328-5.11-.406-7.681-.007-.224-.901-.064-.892.242.075 2.448.12 4.883.369 7.321.244 2.39.535 4.775.868 7.154.648 4.638 1.463 9.256 2.335 13.855.432 2.284.913 4.556 1.419 6.824.41 1.84.69 3.76 1.209 5.572.304 1.063.973 2.215 2.243 1.862 1.41-.391 2.005-2.429 2.499-3.62 2.042-4.936 3.543-10.125 5.053-15.248.076-.256-.806-.134-.886.135","fill","#6A79A8"],["d","M19.752 86.317c3.044-.75 6.053-1.675 9.033-2.656l-.42-.058c.097.062.136.847.146.934.093.802.138 1.61.185 2.415.084 1.427.14 2.855.19 4.283.094 2.766.149 5.535.181 8.303.064 5.482.05 10.97-.147 16.45-.1 2.799-.21 5.622-.587 8.399-.097.716-.19 3.102-1.272 2.876-.845-.177-1.46-1.669-1.808-2.336-1.172-2.25-2.484-4.425-3.703-6.65-1.269-2.315-2.416-4.702-3.722-6.995-1.398-2.453-2.997-4.772-4.685-7.025-1.741-2.323-3.486-4.682-4.256-7.548-.116-.433-.993-.194-.876.24.846 3.15 2.836 5.693 4.735 8.251 2.007 2.704 3.833 5.53 5.39 8.53a281.474 281.474 0 0 0 5.135 9.445c.683 1.201 1.247 2.55 2.063 3.663.522.713 1.281 1.333 2.207 1.119.985-.228 1.269-1.3 1.447-2.184.32-1.595.45-3.234.566-4.855.265-3.691.352-7.396.401-11.096.098-7.334.054-14.691-.318-22.017a78.477 78.477 0 0 0-.18-2.794c-.036-.43.012-1.47-.302-1.842-.325-.385-.995-.009-1.363.11-2.714.871-5.445 1.707-8.21 2.388-.55.136-.377.784.17.65","fill","#6A79A8"],["d","M22.008 90.35c.827 1.676 2.277 2.951 4.117 3.635.248.092 1.143-.265.796-.394-1.757-.653-3.141-1.887-3.93-3.487-.13-.264-1.088.033-.983.245","fill","#6A79A8"],["d","M14.828 45.457c-.114.014-.227.03-.34.046-1.577.228-3.383.604-4.584 1.71a6.299 6.299 0 0 0-.547.588c-.177.21-.348.426-.513.646-1.41 1.873-2.185 3.92-2.788 6.15-.645 2.388-1.277 4.748-1.806 7.167-.94 4.304-1.603 8.663-2.142 13.033-.27 2.186-.507 4.377-.734 6.569-.173 1.677-.68 3.723-.113 5.376.582 1.695 7.018 1.888 8.385 2.045 7.293.838 14.427-.918 21.354-3.117-.191-2.284-.376-4.57-.581-6.852-.794-8.846-1.468-18.278-4.679-26.647-.969-2.525-2.409-5.79-5.117-6.89-.644-.263-1.346-.318-2.034-.26-.654.055-1.27.213-1.926.26-.613.045-1.225.098-1.835.176","fill","#F2F2F2"],["d","M14.419 44.236c-2.64.565-5.182 2.109-6.758 4.231-1.56 2.101-2.312 4.671-2.926 7.205-1.749 7.226-3.312 15.17-3.523 22.6-.07 2.48-.188 4.964-.212 7.445-.021 2.248 13.455 2.49 16.75 2.168C21.759 87.493 29 85.186 29 85.186c-.557-6.604-.866-13.226-1.593-19.816-.642-5.817-1.215-12.596-4.253-17.769-1.897-3.228-5.395-4.08-8.735-3.365","fill","#FFF"],["d","M25.943 35.117c.535-8.602-2.773-15.814-7.387-16.108-4.615-.294-8.788 6.442-9.322 15.044l-.096 1.542c-.296 4.77-.102 8.118.455 10.476.755 3.192 3.31 5.045 6.124 6.329 1.149.524 2.46.78 3.68.459 1.09-.287 2.03-1.013 2.765-1.878 3.05-3.586 3.406-9.815 3.686-14.322.02-.341.082-1.332.095-1.542","fill","#FFF"],["d","M8.009 48.48a.194.194 0 0 0 .015.15c.068.14.223.247.327.37 1.71 2.035 4.295 3.51 7.25 3.915 1.746.24 3.392-.053 4.89-.57a27.86 27.86 0 0 0 2.17-.881c.387-.171.81-.29 1.155-.521.175-.119.213-.177.165-.377-.035-.145-.085-.349-.237-.447-.176-.114-.556.007-.723.074-2.216.9-4.666 2.687-7.522 1.859-2.387-.693-4.594-2.223-6.175-3.828-.3-.303-.823-.288-1.078-.019-.086.092-.205.172-.237.275","fill","#F2F2F2"],["d","M8.11 48.58c2.037 1.636 4.692 2.901 7.318 3.316 2.942.464 5.496-.724 8.226-1.577.555-.173.4-.773-.166-.596-2.555.798-4.978 1.976-7.736 1.538-2.495-.397-4.994-1.636-6.925-3.188-.308-.246-1.121.182-.716.507","fill","#6A79A8"],["d","M28.025 25.348c.987-.72 1.771-1.705 2.425-2.75a20.8 20.8 0 0 0 1.123-2.078c.07-.148.502-.893.416-.999-.045-.053-.286-.045-.352-.05a2.781 2.781 0 0 0-.333.001 4.88 4.88 0 0 0-.665.093c-.28.056-.56.118-.838.183-.519.12-1.036.25-1.561.338l1.964-3.1-1.398.174.486-1.523-3.168 1.6.405-2.367-2.337 1.176-1.374-2.326-.99 1.09-2.356-2.904-.82 1.737L16.803 11c-.873.418-1.036 1.993-1.824 2.26-.746.254-2.953-1.7-3.62-2.128l1.404 2.95-3.2-1.641c.198.456.397.913.597 1.369l-2.51-.913 1.804 2.231L6 13.568c1.295 1.568 1.597 3.69 1.815 5.763.122 1.163.568 2.353.554 3.493-.028 1.297-.358 2.548-.332 3.831.029 1.442.177 2.932.198 4.398.005.37.064.826.383.943.377.138 2.848-3.035 3.412-3.426.506-.35 3.281-1.67 3.367-2.214l-.251 1.227c.469-.768 1.5-1.11 2.321-.772.807.332 1.006 1.158 1.425 1.807.88-.489 1.756-.903 2.752-1.117 2.234-.482 4.464-.753 6.381-2.153","fill","#BBDFF5"],["d","M9.958 45.66c-1.177-3.915-.777-8.294-.518-12.307.277-4.282 1.364-8.986 4.237-12.315 1.046-1.212 2.46-2.3 4.12-2.378 1.544-.074 2.934.772 3.945 1.882 2.823 3.1 3.627 7.858 3.644 11.903.01 2.279-.19 4.59-.4 6.858-.256 2.78-.686 5.586-1.82 8.157-.034.077-.038.186.02.255.822.996 1.26 2.265 1.717 3.463a49.025 49.025 0 0 1 1.435 4.4c.846 3.06 1.427 6.188 1.87 9.33.915 6.486 1.353 13.044 1.896 19.569l.363-.435c-5.653 1.797-11.484 3.33-17.458 3.288-1.859-.013-3.716-.218-5.561-.437-1.653-.196-3.363-.407-4.94-.962-.477-.167-1.178-.39-1.444-.867-.255-.458-.156-1.161-.129-1.66.097-1.767.414-3.527.715-5.268.763-4.417 1.28-8.867 2.063-13.28.58-3.276 1.325-6.51 2.177-9.726.792-2.993 1.642-5.844 3.638-8.278.361-.44-.486-.6-.752-.275-1.673 2.04-2.652 4.397-3.342 6.926-.82 3.007-1.587 6.029-2.193 9.087-.98 4.954-1.507 9.975-2.383 14.946-.33 1.877-.678 3.768-.813 5.67-.082 1.149-.174 2.243.928 2.888 1.352.791 3.089 1.025 4.611 1.256 1.52.23 3.056.393 4.587.526 6.98.607 13.863-1.105 20.464-3.204.208-.066.383-.202.364-.436-.703-8.446-1.132-17.034-2.9-25.342a56.65 56.65 0 0 0-1.636-6.09c-.558-1.678-1.117-3.69-2.165-5.132-.046-.063-.172-.165-.191-.231-.094-.314.03.042.034-.137.01-.373.4-1.022.518-1.387.275-.848.492-1.716.667-2.59.367-1.831.552-3.693.687-5.554.25-3.432.479-6.856-.177-10.26-.541-2.81-1.605-5.817-3.728-7.83-1.607-1.523-3.795-2.123-5.903-1.338-2.42.9-4.103 3.167-5.23 5.394-1.742 3.444-2.292 7.215-2.527 11.023C8.224 38.39 8 42.368 9.063 45.9c.127.42 1.021.178.895-.24","fill","#6A79A8"],["d","M23.121 42.362c-.17.476-.474 1.013-1.045.955-.57-.058-.96-.616-1.162-1.11-.169-.41-1.056-.15-.894.245.35.855 1.028 1.55 1.986 1.548.942-.003 1.659-.655 1.971-1.53.177-.497-.718-.495-.856-.108","fill","#6A79A8"],["d","M24.721 79l.043-.12c.027-.079.073-.197.117-.35.097-.3.206-.758.253-1.332.026-.286.025-.603.002-.938a4.892 4.892 0 0 0-.205-1.04c-.115-.351-.273-.701-.502-1.008-.062-.074-.116-.152-.18-.225-.078-.09-.156-.183-.235-.276l-.23-.253-.252-.267c-.344-.362-.716-.75-1.102-1.199a7.545 7.545 0 0 1-1.077-1.619 5.873 5.873 0 0 1-.56-2.132l-.012-.141-.005-.148-.008-.233c.002-.182.005-.394.017-.561.018-.356.057-.699.099-1.041.084-.68.21-1.334.31-1.959.05-.312.095-.62.123-.911a6.78 6.78 0 0 0 .047-.834 3.265 3.265 0 0 0-.08-.697 1.844 1.844 0 0 0-.215-.519c-.18-.299-.5-.573-.96-.804-.058-.027-.11-.06-.17-.087l-.185-.08c-.119-.059-.257-.101-.387-.151l-.099-.037.014.004-.015-.004-.03-.01-.06-.018-.122-.038a1.755 1.755 0 0 0-.11-.032l-.184-.049-.211-.05a23.635 23.635 0 0 0-1.852-.307c-.33-.046-.669-.093-1.013-.148-.345-.059-.697-.129-1.05-.214l-.267-.067-.072-.019-.03-.009-.057-.018-.117-.036-.232-.071-.118-.038-.138-.05c-.181-.068-.37-.133-.54-.208l-.493-.228a10.245 10.245 0 0 1-3.216-2.515A10.922 10.922 0 0 1 7.5 52.848l-.075-.191-.037-.095-.01-.023-.016-.04-.003-.01-.015-.046-.112-.357-.108-.425c-.033-.139-.047-.27-.07-.4a6.086 6.086 0 0 1-.017-1.481c.058-.457.156-.868.276-1.235.13-.363.26-.686.409-.961.285-.556.574-.942.77-1.201.097-.13.183-.222.236-.287L8.81 46l-.18.462c-.113.3-.258.749-.384 1.317-.064.283-.11.6-.144.938-.02.341-.031.704.007 1.083.044.377.12.767.255 1.154.038.094.07.197.109.287l.12.265.172.33.173.28c.12.204.26.402.396.606.149.196.289.402.455.592.316.392.671.77 1.063 1.12a9.015 9.015 0 0 0 2.718 1.712l.388.14c.128.042.245.072.367.112l.09.029c.032.01.077.019.114.028l.236.057.118.03.06.013.029.007-.026-.007.013.003.21.039c.566.097 1.182.157 1.842.225.661.068 1.37.13 2.115.291l.281.062.304.079c.055.013.094.025.134.037l.121.036.15.045.14.049c.186.067.371.125.56.21l.281.12c.094.042.19.093.282.141.374.19.75.44 1.104.744.357.298.682.688.938 1.116.257.43.435.907.525 1.367.092.461.115.903.107 1.318-.02.83-.168 1.552-.316 2.223l-.433 1.875c-.06.29-.118.577-.154.849-.024.146-.03.247-.049.377l-.016.233-.005.058-.002.03v-.015.012l-.002.09c-.02.485.053.935.195 1.382.284.892.93 1.751 1.51 2.624l.215.33.214.34.183.317c.075.121.132.252.195.375.23.505.35 1.01.39 1.476a5.384 5.384 0 0 1-.302 2.308 5.4 5.4 0 0 1-.654 1.283c-.087.14-.171.23-.222.297l-.079.099","fill","#BBDFF5"],["d","M24.95 48.134s.01.093.032.267c.009.087.022.193.017.323-.003.128.002.286-.022.45-.015.167-.04.353-.087.552-.035.205-.11.413-.18.645a6.399 6.399 0 0 1-.757 1.456 7.123 7.123 0 0 1-2.617 2.274l-.069.036-.017.009-.01.004c-.063.025-.02.01-.037.016l-.03.013-.239.11c-.04.018-.075.036-.132.057l-.315.119a9.222 9.222 0 0 1-2.515.508c-.858.059-1.703.015-2.508-.069-.4-.044-.796-.094-1.18-.153-.4-.058-.793-.129-1.194-.214a11.444 11.444 0 0 1-2.348-.746 7.837 7.837 0 0 1-1.314-.75l-.235-.177-.058-.044-.007-.005c-.059-.041-.02-.014-.034-.025l-.012-.01-.023-.02-.092-.081a4.86 4.86 0 0 1-.196-.18l-.219-.212c-.067-.07-.125-.138-.186-.206-.124-.133-.23-.276-.334-.414a5.986 5.986 0 0 1-.505-.845 5.252 5.252 0 0 1-.482-1.582 4.517 4.517 0 0 1-.006-1.229c.012-.083.02-.161.033-.234a68.377 68.377 0 0 0 .087-.379l.046-.142c.056-.169.09-.256.09-.256l.076.258c.022.083.054.185.096.302.04.117.083.25.144.393.225.577.641 1.348 1.323 2.047.169.175.356.344.557.504.107.073.201.16.313.23.054.035.11.076.162.108l.152.087c.04.026.125.07.194.11l.108.062.028.015.013.008c-.01-.008.033.022-.022-.016l.006.003.048.022c.125.06.252.12.384.174.265.107.54.207.833.291.585.17 1.227.293 1.916.393.341.052.702.095 1.059.138l1.103.125c.722.077 1.414.133 2.07.132a9.357 9.357 0 0 0 2.049-.212c.028-.003.075-.018.118-.03l.127-.036.127-.035.032-.01c-.01.005.036-.013-.023.01l.007-.002.012-.004.05-.016.2-.062c.132-.047.264-.096.395-.148.127-.06.26-.108.383-.173a8.052 8.052 0 0 0 1.367-.846 8.496 8.496 0 0 0 1.04-.942c.283-.314.517-.611.691-.873.173-.259.306-.471.385-.633l.132-.24","fill","#BBDFF5"],["d","M47.593 58.244c-.403.782-.364 1.483-.011 2.276.434.974.826 1.654-.167 2.447-2.09 1.667-4.582 2.933-7.056 3.86-4.93 1.848-10.416 2.276-15.468.687-2.99-.94-5.703-2.591-8.002-4.768-.25-.236-1.104.126-.838.377 8.666 8.205 21.746 7.21 31.09.766.786-.541 1.999-1.208 1.846-2.363-.16-1.214-1.215-1.94-.545-3.241.211-.41-.697-.335-.849-.041","fill","#6A79A8"],[1,"cu-custom-fields__paywall-popover-title"],e,[1,"cu-custom-fields__paywall-popover-description"],t,[4,"ngIf"],["class","cu-custom-fields__paywall-popover-link",3,"cuLink",4,"ngIf"],[1,"cu-custom-fields__paywall-popover-link",3,"cuLink"],i]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.qc("click",function(){return t.hidePaywallPopover.emit()}),o.Xb(1,"div",1),o.bc(),o.tc(),o.cc(2,"svg",2),o.cc(3,"g",3),o.Xb(4,"path",4),o.Xb(5,"path",5),o.Xb(6,"path",6),o.Xb(7,"path",7),o.Xb(8,"path",8),o.Xb(9,"path",9),o.Xb(10,"path",10),o.Xb(11,"path",11),o.Xb(12,"path",12),o.Xb(13,"path",13),o.Xb(14,"path",14),o.Xb(15,"path",15),o.Xb(16,"path",16),o.Xb(17,"path",17),o.Xb(18,"path",18),o.Xb(19,"path",19),o.Xb(20,"path",20),o.Xb(21,"path",21),o.Xb(22,"path",22),o.Xb(23,"path",23),o.Xb(24,"path",24),o.Xb(25,"path",25),o.Xb(26,"path",26),o.Xb(27,"path",27),o.Xb(28,"path",28),o.Xb(29,"path",29),o.Xb(30,"path",30),o.Xb(31,"path",31),o.Xb(32,"path",32),o.Xb(33,"path",33),o.Xb(34,"path",34),o.Xb(35,"path",35),o.Xb(36,"path",36),o.Xb(37,"path",37),o.Xb(38,"path",38),o.Xb(39,"path",39),o.Xb(40,"path",40),o.Xb(41,"path",41),o.bc(),o.bc(),o.sc(),o.cc(42,"div",42),o.gc(43,43),o.bc(),o.cc(44,"div",44),o.mc(45,45),o.bd(46,a,2,0,"ng-container",46),o.jc(),o.bc(),o.bd(47,l,2,3,"a",47)),2&e&&(o.Ib(46),o.Dc("ngIf",!((null==t.team?null:t.team.role)<3)),o.Ib(1),o.Dc("ngIf",(null==t.team?null:t.team.role)<3))},directives:[n.a,s.q,c.a],styles:[""],encapsulation:2,changeDetection:0}),e})()},"R+BZ":function(e,t,i){"use strict";i.d(t,"a",function(){return L});var o=i("fXoL"),n=i("jJQC"),s=i("PZkE"),c=i("eIep"),a=i("3UWI"),r=i("lJxs"),l=i("vkgz"),d=i("UXun"),u=i("1G5W"),m=i("3E0/"),p=i("IzEk"),h=i("SxV6"),f=i("xWuZ"),b=i("XNiG"),g=i("2Vo4"),_=i("/qOb"),v=i("MguC"),k=i("c3rA"),y=i("l7P3"),w=i("AeD3"),x=i("2Wk6"),I=i("ofXK"),T=i("8it8"),C=i("UdVN");function D(e,t){1&e&&(o.cc(0,"span",9),o.tc(),o.cc(1,"svg",10),o.Xb(2,"path",11),o.bc(),o.bc())}function O(e,t){if(1&e&&(o.ac(0),o.Xb(1,"span",6),o.cc(2,"span",7),o.cc(3,"span"),o.dd(4),o.bc(),o.bc(),o.bd(5,D,3,0,"span",8),o.Zb()),2&e){const e=t.$implicit,i=t.last,n=o.uc(2);o.Ib(4),o.ed(e||n.commonStringsService.untitledText),o.Ib(1),o.Dc("ngIf",!i)}}function S(e,t){if(1&e&&(o.ac(0),o.bd(1,O,6,2,"ng-container",5),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngForOf",e.page.page.page_hierarchy)("ngForTrackBy",e.trackByValue)}}function E(e,t){if(1&e&&(o.Xb(0,"span",6),o.cc(1,"span",7),o.cc(2,"span"),o.dd(3),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(3),o.ed(e.page.pageTitle||e.commonStringsService.untitledText)}}let P=(()=>{class e{constructor(e){this.commonStringsService=e,this.trackByValue=n.f}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(T.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-doc-recent-item"]],hostAttrs:[1,"cu-doc-recent-item"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-doc-recent-item_selected",t.selected)},inputs:{page:"page",selected:"selected"},decls:6,vars:2,consts:[[1,"cu-doc-recent-item__body"],[1,"cu-doc-recent-item__body-row"],[1,"cu-doc-recent-item__name","cu-doc-recent-item__name-breadcrumbs"],[4,"ngIf","ngIfElse"],["pageTitle",""],[4,"ngFor","ngForOf","ngForTrackBy"],["icon","cu3-doc",1,"cu-doc-recent-item__name-breadcrumbs_icon","cu-doc-recent-item__name-breadcrumbs_icon-doc"],[1,"cu-doc-recent-item__name_text"],["class","cu-doc-recent-item__name-breadcrumbs_icon cu-doc-recent-item__name-breadcrumbs_icon-caret",4,"ngIf"],[1,"cu-doc-recent-item__name-breadcrumbs_icon","cu-doc-recent-item__name-breadcrumbs_icon-caret"],["width","4","height","8","viewBox","0 0 4 8","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1 7L3 4L1 1","stroke","#292D34"]],template:function(e,t){if(1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.cc(2,"div",2),o.bd(3,S,2,2,"ng-container",3),o.bd(4,E,4,1,"ng-template",null,4,o.cd),o.bc(),o.bc(),o.bc()),2&e){const e=o.Rc(5);o.Ib(3),o.Dc("ngIf",!!t.page.page&&!!t.page.page.page_hierarchy)("ngIfElse",e)}},directives:[I.q,I.p,C.a],styles:['.cu-doc-recent-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;min-height:30px;min-width:0;cursor:pointer;padding:8px 18px 8px 19px;position:relative}.cu-doc-recent-item:hover:before,.cu-doc-recent-item_selected:before{content:"";display:block;position:absolute;top:0;left:10px;width:calc(100% - 20px);height:100%;border-radius:4px;pointer-events:none;z-index:0;background:#f6f7f9}.dark-theme .cu-doc-recent-item:hover:before,.dark-theme .cu-doc-recent-item_selected:before{background:#2b343b}.cu-doc-recent-item__body{flex-grow:1;position:relative;min-width:0}.cu-doc-recent-item__body-row{display:flex;align-items:center}.cu-doc-recent-item__name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-doc-recent-item__name{font-family:var(--global-font-support)}}.dark-theme .cu-doc-recent-item__name{color:#d5d6d7}.cu-doc-recent-item__name-breadcrumbs{display:flex;align-items:center}.cu-doc-recent-item__name-breadcrumbs_text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-doc-recent-item__name-breadcrumbs_icon{width:16px;height:16px}.cu-doc-recent-item__name-breadcrumbs_icon-doc{margin-right:5px}.cu-doc-recent-item__name-breadcrumbs_icon-caret{margin:0 10px;width:6px;height:15px;opacity:.7}.dark-theme .cu-doc-recent-item__name-breadcrumbs_icon-caret svg path{stroke:#d5d6d7!important}'],encapsulation:2,changeDetection:0}),e})();const j=["docSearchInput"];function A(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.cc(1,"input",5,6),o.qc("keyup",function(t){return o.Uc(e),o.uc().onSearch(t)}),o.bc(),o.bc()}}function $(e,t){1&e&&(o.ac(0),o.gc(1,11),o.Zb())}function U(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-doc-recent-item",12),o.qc("click",function(i){o.Uc(e);const n=t.$implicit;return o.uc(2).click(n,i)}),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(2);o.Dc("page",e)("selected",i===n.selectedIndex)}}function R(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",7),o.bd(2,$,2,0,"ng-container",8),o.vc(3,"async"),o.bc(),o.cc(4,"div",9),o.bd(5,U,1,2,"cu-doc-recent-item",10),o.vc(6,"async"),o.bc(),o.Zb()),2&e){const e=o.uc(),t=o.Rc(6);o.Ib(2),o.Dc("ngIf",""===o.wc(3,4,e.search$))("ngIfElse",t),o.Ib(3),o.Dc("ngForOf",o.wc(6,6,e.items$))("ngForTrackBy",e.trackById)}}function M(e,t){1&e&&(o.cc(0,"div",13),o.gc(1,14),o.bc())}function F(e,t){if(1&e&&(o.ac(0),o.gc(1,15),o.vc(2,"async"),o.Zb()),2&e){const e=o.uc();o.Ib(2),o.kc(o.wc(2,1,e.search$)),o.hc(1)}}let L=(()=>{class e{constructor(e,t,i,u){this.store=e,this.dataService=t,this.docManagerService=i,this.changeDetectorRef=u,this.searchEnabled=!1,this.excludePageIds=[],this.onSelect=new o.o,this.onGeometryChange=new o.o,this.trackById=Object(n.d)("pageId"),this.destroy$=new b.a,this.search$=new g.a(""),this.team$=this.store.select(k.getTeam),this.items$=this.team$.pipe(Object(s.a)("id"),Object(c.a)(e=>this.search$.pipe(Object(a.a)(300),Object(c.a)(t=>{if(!this.searchEnabled||""===t){let t={};return this.searchEnabled&&(t={exclude_pages:this.excludePageIds}),this.dataService.getRecentPages(e.id,t).pipe(Object(r.a)(t=>[e,t]))}return this.docManagerService.getDocs(e.id,{page_search:t,search:t,exclude_pages:this.excludePageIds}).pipe(Object(r.a)(t=>0===t.views.length?[e,void 0]:[e,t.views]))}))),Object(r.a)(([e,t])=>Array.isArray(t)?Object(f.a)(t.map(t=>this.processDocItems(e,t))):this.processDocItems(e,t)),Object(l.a)(e=>{(!e||this.selectedIndex>e.length-1)&&(this.selectedIndex=0,this.changeDetectorRef.markForCheck())}),Object(d.a)({refCount:!0,bufferSize:1})),this.selectedIndex=0}ngOnInit(){this.items$.pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.onGeometryChange.emit()})}ngAfterViewInit(){this.docSearchInputQuery.changes.pipe(Object(m.a)(0),Object(p.a)(1),Object(u.a)(this.destroy$)).subscribe(()=>{this.docSearchInputQuery.length>0&&this.docSearchInputQuery.first.nativeElement.focus()})}onSearch(e){this.search$.next(e.target.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}handleKey(e){this.items$.pipe(Object(h.a)()).subscribe(t=>{if(t){switch(e.key){case _.c.ENTER:this.selectedIndex<=t.length&&this.onSelect.emit(t[this.selectedIndex]);break;case _.a.ARROW_UP:this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=t.length-1);break;case _.a.ARROW_DOWN:this.selectedIndex++,this.selectedIndex>t.length-1&&(this.selectedIndex=0);break;case _.c.SPACE:if(1===t.length)return this.onSelect.emit(t[0]),!0}this.changeDetectorRef.markForCheck()}})}click(e,t){t.preventDefault(),t.stopPropagation(),this.onSelect.emit(e)}processDocItems(e,t){return t&&t.pages&&t.pages.map(t=>({teamId:e.id,pageId:t.id,pageTitle:t.name,viewId:t.view_id,docsHome:t.parent&&String(t.parent.type)===String(v.e.DocsHome),page:t}))||[]}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(y.Store),o.Wb(w.a),o.Wb(x.a),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-doc-recent"]],viewQuery:function(e,t){if(1&e&&o.jd(j,1),2&e){let e;o.Qc(e=o.rc())&&(t.docSearchInputQuery=e)}},hostAttrs:[1,"cu-doc-recent"],inputs:{searchEnabled:"searchEnabled",excludePageIds:"excludePageIds"},outputs:{onSelect:"onSelect",onGeometryChange:"onGeometryChange"},decls:7,vars:7,consts:function(){let e,t,i,o;return e=$localize`:@@cu-doc-recent__form-placeholder_search-docs␟05f622d9386dd5e5e18c891f57d28a63fa804282␟2940020029544304733:Type to seach docs...`,t=$localize`:@@common_recent␟dea597d706dced2e5ee599210b9f3efca0f6bb38␟4911843450729688319:Recent`,i=$localize`:@@common_no-results␟c1b09f807bf7c5d9ec2a8653ec1df70d513aa2fb␟911393712054691180: No results
`,o=$localize`:@@cu-doc-recent__search-results-for␟ddce00767e801af054be49267134463728920d6a␟4038945904283570071:Search results for: ${"\ufffd0\ufffd"}:INTERPOLATION:`,[["class","cu-doc-recent__search",4,"ngIf"],[4,"ngIf"],["class","cu-doc-recent__empty",4,"ngIf"],["searchResultsTmpl",""],[1,"cu-doc-recent__search"],["type","text","placeholder",e,1,"cu-doc-recent__search_field",3,"keyup"],["docSearchInput",""],[1,"cu-doc-recent__title"],[4,"ngIf","ngIfElse"],[1,"cu-doc-recent__body"],[3,"page","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],t,[3,"page","selected","click"],[1,"cu-doc-recent__empty"],i,o]},template:function(e,t){if(1&e&&(o.bd(0,A,3,0,"div",0),o.bd(1,R,7,8,"ng-container",1),o.vc(2,"async"),o.bd(3,M,2,0,"div",2),o.vc(4,"async"),o.bd(5,F,3,3,"ng-template",null,3,o.cd)),2&e){let e=null,i=null;o.Dc("ngIf",t.searchEnabled),o.Ib(1),o.Dc("ngIf",null==(e=o.wc(2,3,t.items$))?null:e.length),o.Ib(2),o.Dc("ngIf",!(null!=(i=o.wc(4,5,t.items$))&&i.length))}},directives:[I.q,I.p,P],pipes:[I.b],styles:[".cu-doc-recent{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}.cu-doc-recent__search_field{border:0;border-bottom:1px solid #b9bec7;width:100%;padding:12px}.dark-theme .cu-doc-recent__search_field{background:#384047;border-bottom-color:#1e272e}.dark-theme .cu-doc-recent__search_field:focus{box-shadow:none}.cu-doc-recent__title{font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;color:#7c828d;padding:13px 18px 8px}.cu-doc-recent__body{flex-grow:1;overflow-y:auto}.cu-os-win .cu-doc-recent__body{scrollbar-width:thin}.cu-os-win .cu-doc-recent__body::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-doc-recent__body::-webkit-scrollbar-track,.cu-os-win .cu-doc-recent__body::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-doc-recent__body::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-doc-recent__body::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-doc-recent__body::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-doc-recent__body::-webkit-scrollbar,.cu-os-win .dark-theme .cu-doc-recent__body::-webkit-scrollbar,.cu-os-win.dark-theme .cu-doc-recent__body::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-doc-recent__body::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-doc-recent__body::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-doc-recent__body::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-doc-recent__body::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-doc-recent__body::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-doc-recent__body::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-doc-recent__body::-webkit-scrollbar-thumb:hover{border-color:#384047}.cu-doc-recent__empty{display:flex;align-items:center;justify-content:center;padding:20px;font:italic 300 13px Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-doc-recent__empty{color:#abaeb0}"],encapsulation:2,changeDetection:0}),e})()},RFFN:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("ofXK"),n=i("K0KF"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a]]}),e})()},RSXs:function(e,t,i){"use strict";var o=i("RsFJ"),n=i("ZONP"),s=i("3GlI"),c=i("KJAg");e.exports=function(e,t,i){for(var a,r,l,d,u,m=this.options,p=m.commonmark,h=m.gfm,f=this.blockTokenizers,b=this.interruptParagraph,g=t.indexOf("\n"),_=t.length;g<_;){if(-1===g){g=_;break}if("\n"===t.charAt(g+1))break;if(p){for(d=0,a=g+1;a<_;){if("\t"===(l=t.charAt(a))){d=4;break}if(" "!==l)break;d++,a++}if(d>=4&&"\n"!==l){g=t.indexOf("\n",g+1);continue}}if(r=t.slice(g+1),c(b,f,this,[e,r,!0]))break;if(f.list.call(this,e,r,!0)&&(this.inList||p||h&&!n(o.left(r).charAt(0))))break;if(a=g,-1!==(g=t.indexOf("\n",g+1))&&""===o(t.slice(a,g))){g=a;break}}return r=t.slice(0,g),""===o(r)?(e(r),null):!!i||(u=e.now(),e(r=s(r))({type:"paragraph",children:this.tokenizeInline(r,u)}))}},RUe1:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var o=i("jJQC"),n=i("fXoL"),s=i("9gfC"),c=i("ofXK"),a=i("pxPQ");const r=function(e,t,i,o){return{id:e,title:t,icon:i,customClass:o}};function l(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-dropdown-list-item",9),n.qc("click",function(){n.Uc(e);const i=t.$implicit,o=n.uc(2).$implicit;return n.uc(2).handleClickItem([o.key,i.key])})("mouseover",function(){n.Uc(e);const i=t.$implicit,o=n.uc(2).$implicit;return n.uc(2).handleHoverItem([o.key,i.key])}),n.bc()}if(2&e){const e=t.$implicit;n.Dc("item",n.Kc(2,r,e.key,e.label,e.icon,e.customClass))("highlighted",e.highlight)}}function d(e,t){if(1&e&&(n.cc(0,"div",7),n.bd(1,l,1,7,"cu-dropdown-list-item",8),n.bc()),2&e){const e=n.uc().$implicit,t=n.uc(2);n.Ib(1),n.Dc("ngForOf",e.children)("ngForTrackBy",t.trackByProperty)}}const u=function(e,t,i){return{id:e,title:t,icon:i}};function m(e,t){if(1&e){const e=n.dc();n.cc(0,"div",4),n.cc(1,"cu-dropdown-list-item",5),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc(2).handleClickItem([i.key],i.children&&i.children.length>0)})("mouseover",function(){n.Uc(e);const i=t.$implicit;return n.uc(2).handleHoverItem([i.key])}),n.bc(),n.bd(2,d,2,2,"div",6),n.bc()}if(2&e){const e=t.$implicit;n.Ib(1),n.Dc("item",n.Jc(4,u,e.key,e.label,e.icon))("hasChildren",e.children&&e.children.length>0)("highlighted",e.highlight),n.Ib(1),n.Dc("ngIf",e.children&&e.children.length>0&&e.showChildren)}}function p(e,t){if(1&e&&(n.ac(0),n.bd(1,m,3,8,"div",3),n.Zb()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngForOf",e.menu)("ngForTrackBy",e.trackByProperty)}}let h=(()=>{class e{constructor(){this.trackByProperty=Object(o.d)("key"),this.optionsText=$localize`:@@common_options:Options`}ngOnInit(){}handleClickItem(e,t=!1){this.handleSelect(e,!0),t||this.handleCommit()}handleHoverItem(e){this.handleSelect(e,!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-block-handle-menu"]],inputs:{menu:"menu",handleCommit:"handleCommit",handleSelect:"handleSelect"},decls:3,vars:2,consts:[[1,"cu-block-handle-menu","block-handle__dropdown"],[3,"title"],[4,"ngIf"],["class","block-handle__dropdown__listitem-parent",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block-handle__dropdown__listitem-parent"],[3,"item","hasChildren","highlighted","click","mouseover"],["class","block-handle__dropdown__list-children",4,"ngIf"],[1,"block-handle__dropdown__list-children"],[3,"item","highlighted","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item","highlighted","click","mouseover"]],template:function(e,t){1&e&&(n.cc(0,"div",0),n.Xb(1,"cu-dropdown-list-title",1),n.bd(2,p,2,2,"ng-container",2),n.bc()),2&e&&(n.Ib(1),n.Dc("title",t.optionsText),n.Ib(1),n.Dc("ngIf",t.menu.length>0))},directives:[s.a,c.q,c.p,a.a],styles:[".block-handle__dropdown,.block-handle__dropdown__list-children{box-shadow:0 1px 10px 0 rgba(0,0,0,.25);background:#fff;border-radius:6px;z-index:1000;pointer-events:all;animation:dropdownMenuAnimation .03s ease-in forwards;width:188px}.cu-os-win .block-handle__dropdown,.cu-os-win .block-handle__dropdown__list-children{scrollbar-width:thin}.cu-os-win .block-handle__dropdown::-webkit-scrollbar,.cu-os-win .block-handle__dropdown__list-children::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .block-handle__dropdown::-webkit-scrollbar-track,.cu-os-win .block-handle__dropdown::-webkit-scrollbar-track:hover,.cu-os-win .block-handle__dropdown__list-children::-webkit-scrollbar-track,.cu-os-win .block-handle__dropdown__list-children::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .block-handle__dropdown::-webkit-scrollbar-thumb,.cu-os-win .block-handle__dropdown__list-children::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .block-handle__dropdown::-webkit-scrollbar-thumb:hover,.cu-os-win .block-handle__dropdown__list-children::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .block-handle__dropdown::-webkit-scrollbar-button,.cu-os-win .block-handle__dropdown__list-children::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .block-handle__dropdown::-webkit-scrollbar,.cu-os-win .dark-theme .block-handle__dropdown::-webkit-scrollbar,.cu-os-win.dark-theme .block-handle__dropdown::-webkit-scrollbar-track,.cu-os-win .dark-theme .block-handle__dropdown::-webkit-scrollbar-track,.cu-os-win.dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar,.cu-os-win .dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar,.cu-os-win.dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-track,.cu-os-win .dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .block-handle__dropdown::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .block-handle__dropdown::-webkit-scrollbar-track:hover,.cu-os-win.dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .block-handle__dropdown::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .block-handle__dropdown::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .block-handle__dropdown::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .block-handle__dropdown::-webkit-scrollbar-thumb:hover,.cu-os-win.dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .block-handle__dropdown__list-children::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .block-handle__dropdown,.dark-theme .block-handle__dropdown__list-children{background:#384047;box-shadow:0 2px 16px 0 rgba(0,0,0,.4)}.task-container-sharing .block-handle__dropdown,.task-container-sharing .block-handle__dropdown__list-children{display:none}.block-handle__dropdown__list-children{position:absolute;left:99%}.cu-ql-dropdown:not(.cu-ql-dropdown_top) .block-handle__dropdown__list-children{top:0}.cu-ql-dropdown.cu-ql-dropdown_top .block-handle__dropdown__list-children{bottom:0}.block-handle__dropdown__list-children .block-handle__dropdown__item-banner-success svg{fill:#48ba8f}.block-handle__dropdown__list-children .block-handle__dropdown__item-banner-danger svg{fill:#f2544a}.block-handle__dropdown__list-children .block-handle__dropdown__item-banner-info svg{fill:#287cea}.block-handle__dropdown__list-children .block-handle__dropdown__item-banner-warning svg{fill:#f6b53f}"],encapsulation:2,changeDetection:0}),e})()},RgJC:function(e,t,i){"use strict";i.d(t,"a",function(){return xo});var o=i("iA4v"),n=i("fXoL"),s=i("OU+x"),c=i("ofXK"),a=i("8LOJ"),r=i("yQlF");function l(e,t){if(1&e&&(n.Xb(0,"div",2),n.vc(1,"safePurify")),2&e){const e=n.uc();n.Dc("innerHTML",n.wc(1,1,e.html),n.Vc)}}function d(e,t){if(1&e&&(n.Xb(0,"div",2),n.vc(1,"commentHTML")),2&e){const e=n.uc(2);n.Dc("innerHTML",n.wc(1,1,e.sigObject),n.Vc)}}function u(e,t){if(1&e&&n.bd(0,d,2,3,"div",3),2&e){const e=n.uc();n.Dc("ngIf",e.sigObject)}}let m=(()=>{class e{constructor(e){this.commentsService=e,this.useHtml=!0}ngOnInit(){}ngOnChanges(e){if(e.useHtml&&!this.useHtml)try{const e=new o.a(JSON.parse(this.html)),t=this.commentsService.formatCommentForEditor(e,[]);this.sigObject={comment:t.comment}}catch(t){}}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-html-preview"]],inputs:{html:"html",useHtml:"useHtml"},features:[n.Gb],decls:3,vars:2,consts:[[3,"innerHTML",4,"ngIf","ngIfElse"],["noHtml",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"]],template:function(e,t){if(1&e&&(n.bd(0,l,2,3,"div",0),n.bd(1,u,1,1,"ng-template",null,1,n.cd)),2&e){const e=n.Rc(2);n.Dc("ngIf",t.useHtml)("ngIfElse",e)}},directives:[c.q],pipes:[a.a,r.a],encapsulation:2,changeDetection:0}),e})();var p=i("o7Ov"),h=i("c3rA"),f=i("lU5h"),b=i("fFxs"),g=i("lnp7"),_=i("jJQC"),v=i("L5Tv"),k=i("m91o"),y=i("lJxs"),w=i("1G5W"),x=i("3E0/"),I=i("pLZG"),T=i("IzEk"),C=i("JIr8"),D=i("nYR2"),O=i("Kj3r"),S=i("zP0r"),E=i("/uUt"),P=i("eIep"),j=i("SxV6"),A=i("XNiG"),$=i("2Vo4"),U=i("LRne"),R=i("xgIS"),M=i("EY2u"),F=i("PqYM"),L=i("hbEN"),N=i("T6L0"),z=i("/qOb"),q=i("4XV2"),G=i("YrjB"),V=i("l7P3"),B=i("o0vL"),X=i("YAnr"),H=i("Fjoz"),W=i("Wk/N"),K=i("82+D"),Q=i("IE5h"),Z=i("tVaG"),Y=i("3pVM"),J=i("06+Y"),ee=i("h7sE"),te=i("dTHz"),ie=i("uFGp"),oe=i("/+FX"),ne=i("b3J4"),se=i("uslN"),ce=i("6hbx"),ae=i("7nDA"),re=i("0jq0");let le=(()=>{class e{constructor(){this.commentOrSlashCommentText=$localize`:@@cu-comment-bar__form-placeholder_comment-or-sla:Comment or type '/' for commands`,this.saySomethingText=$localize`:@@cu-comment-bar__form-placeholder_say-something:Say something`,this.emailModeShortKeyWinTooltipText=$localize`:@@cu-comment-bar__tooltip-msg_email-mode-win-shortcut:Shortcut: CTRL + Enter`,this.emailModeShortKeyMacOSTooltipText=$localize`:@@cu-comment-bar__tooltip-msg_email-mode-macos-shortcut:Shortcut: CMD + Return`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac}),e})();var de=i("cC1p"),ue=i("wT7j"),me=i("AeD3"),pe=i("jJW4"),he=i("U4Ha"),fe=i("G2WA"),be=i("CDR3"),ge=i("xog/"),_e=i("drq7"),ve=i("s1tu"),ke=i("S7bF"),ye=i("rLOZ"),we=i("4H0A"),xe=i("5EAn"),Ie=i("HBOB"),Te=i("FXUF"),Ce=i("Vdkl"),De=i("5S2/"),Oe=i("O3M5"),Se=i("ZlQq"),Ee=i("53dZ"),Pe=i("Jf2N"),je=i("aWji"),Ae=i("8it8"),$e=i("EDFS"),Ue=i("UdVN"),Re=i("lVAj"),Me=i("RUe1"),Fe=i("6mdQ"),Le=i("LdyQ"),Ne=i("MJvn"),ze=i("n+1/"),qe=i("8r6i"),Ge=i("lE2N"),Ve=i("5+WD"),Be=i("G4qr"),Xe=i("bFKe"),He=i("NsZK"),We=i("3Pt+"),Ke=i("HcWw"),Qe=i("9oWR");const Ze=["popover"],Ye=["dropdown"],Je=["emailSettings"];function et(e,t){if(1&e&&(n.ac(0),n.cc(1,"div",24),n.dd(2),n.vc(3,"async"),n.bc(),n.cc(4,"div",25),n.dd(5),n.vc(6,"async"),n.bc(),n.Zb()),2&e){const e=n.uc(2);let t=null,i=null;n.Ib(2),n.fd(" ",null==(t=n.wc(3,2,e.fromEmailUser$))?null:t.name," "),n.Ib(3),n.fd(" <",null==(i=n.wc(6,4,e.fromEmailUser$))?null:i.email,"> ")}}function tt(e,t){if(1&e&&(n.cc(0,"div",25),n.dd(1),n.vc(2,"async"),n.bc()),2&e){const e=n.uc(2);let t=null;n.Ib(1),n.fd(" ",null==(t=n.wc(2,1,e.fromEmailUser$))?null:t.email," ")}}function it(e,t){if(1&e&&(n.cc(0,"div",21),n.bd(1,et,7,6,"ng-container",22),n.vc(2,"async"),n.bd(3,tt,3,3,"ng-template",null,23,n.cd),n.bc()),2&e){const e=n.Rc(4),t=n.uc();let i=null;n.Ib(1),n.Dc("ngIf",null==(i=n.wc(2,2,t.fromEmailUser$))?null:i.name)("ngIfElse",e)}}function ot(e,t){if(1&e&&(n.cc(0,"span",42),n.dd(1),n.bc()),2&e){const e=n.uc().$implicit;n.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0),n.Ib(1),n.fd(" ",null==e?null:e.name," ")}}function nt(e,t){if(1&e){const e=n.dc();n.cc(0,"div",39),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc(3).setAuthedEmail(i)}),n.bd(1,ot,2,3,"span",40),n.cc(2,"span",41),n.dd(3),n.bc(),n.bc()}if(2&e){const e=t.$implicit;n.Ob("cu-email-communicators__signatures-menu-item-no-name",!(null!=e&&e.name)),n.Ib(1),n.Dc("ngIf",null==e?null:e.name),n.Ib(1),n.Dc("cuTooltip",e.email)("tooltipDisabledIfTextNotTruncated",!0),n.Ib(1),n.fd("<",e.email,">")}}function st(e,t){if(1&e){const e=n.dc();n.cc(0,"div",43),n.qc("click",function(){return n.Uc(e),n.uc(3).openEmailSettings(!1,!1,!0)}),n.cc(1,"div",36),n.dd(2," + "),n.ac(3),n.gc(4,44),n.Zb(),n.bc(),n.bc()}}const ct=function(){return{suppressScrollX:!0}};function at(e,t){if(1&e){const e=n.dc();n.cc(0,"div",28),n.cc(1,"div",29),n.gc(2,30),n.bc(),n.cc(3,"div",31),n.bd(4,nt,4,6,"div",32),n.bd(5,st,5,0,"div",33),n.bc(),n.Xb(6,"div",34),n.cc(7,"div",35),n.qc("click",function(){return n.Uc(e),n.uc(2).openEmailSettings()}),n.cc(8,"div",36),n.gc(9,37),n.bc(),n.Xb(10,"div",38),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(3),n.Dc("perfectScrollbar",n.Gc(4,ct)),n.Ib(1),n.Dc("ngForOf",e.authedEmails)("ngForTrackBy",e.trackById),n.Ib(1),n.Dc("ngIf",e.canManageEmail)}}function rt(e,t){if(1&e&&(n.cc(0,"div",26),n.bd(1,at,11,5,"div",27),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngIf",e.canManageEmail)}}function lt(e,t){if(1&e){const e=n.dc();n.cc(0,"div",46),n.qc("click",function(){return n.Uc(e),n.uc(2).openEmailSettings()}),n.gc(1,47),n.bc()}}function dt(e,t){if(1&e&&n.bd(0,lt,2,0,"div",45),2&e){const e=n.uc();n.Dc("ngIf",e.canManageEmail)}}function ut(e,t){if(1&e){const e=n.dc();n.cc(0,"span",48),n.qc("click",function(){return n.Uc(e),n.uc().toggleCc()}),n.gc(1,49),n.bc()}}function mt(e,t){if(1&e){const e=n.dc();n.cc(0,"span",48),n.qc("click",function(){return n.Uc(e),n.uc().toggleBcc()}),n.gc(1,50),n.bc()}}function pt(e,t){if(1&e){const e=n.dc();n.cc(0,"span",48),n.qc("click",function(){return n.Uc(e),n.uc().toggleSubject()}),n.gc(1,51),n.bc()}}const ht=function(e,t,i){return{fieldType:e,users:t,contacts:i}};function ft(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-email-communicators-field",52),n.qc("onCommunicatorAction",function(t){return n.Uc(e),n.uc().onCommunicatorAction.emit(t)})("onEmailUserAction",function(t){return n.Uc(e),n.uc().emailUserAction(t)})("onDropEmail",function(t){return n.Uc(e),n.uc().dropEmail(t)})("onDragChange",function(t){return n.Uc(e),n.uc().dragging=t}),n.vc(1,"async"),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc();let t=null;n.Dc("communicatorData",n.Jc(8,ht,e.RecipientType.Cc,e.users[e.RecipientType.Cc],e.contactsMap[null==(t=n.wc(1,4,e.fromEmailUser$))?null:t.account_id]))("fetchingContacts",e.fetchingContacts)("disabled",!n.wc(2,6,e.fromEmailUser$))("dragging",e.dragging)}}function bt(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-email-communicators-field",52),n.qc("onCommunicatorAction",function(t){return n.Uc(e),n.uc().onCommunicatorAction.emit(t)})("onEmailUserAction",function(t){return n.Uc(e),n.uc().emailUserAction(t)})("onDropEmail",function(t){return n.Uc(e),n.uc().dropEmail(t)})("onDragChange",function(t){return n.Uc(e),n.uc().dragging=t}),n.vc(1,"async"),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc();let t=null;n.Dc("communicatorData",n.Jc(8,ht,e.RecipientType.Bcc,e.users[e.RecipientType.Bcc],e.contactsMap[null==(t=n.wc(1,4,e.fromEmailUser$))?null:t.account_id]))("fetchingContacts",e.fetchingContacts)("disabled",!n.wc(2,6,e.fromEmailUser$))("dragging",e.dragging)}}function gt(e,t){if(1&e){const e=n.dc();n.cc(0,"input",53),n.qc("ngModelChange",function(t){return n.Uc(e),n.uc().subject=t})("ngModelChange",function(){return n.Uc(e),n.uc().updateSubject()}),n.bc()}if(2&e){const e=n.uc();n.Dc("cuAutoFocus",e.showSubject)("ngModel",e.subject)}}function _t(e,t){1&e&&(n.cc(0,"div",54),n.Xb(1,"div",55),n.ac(2),n.gc(3,56),n.Zb(),n.bc())}function vt(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-email-settings",57),n.qc("onEmailUserAction",function(t){return n.Uc(e),n.uc().emailUserAction(t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=n.uc();n.Dc("availableUsers",e.availableUsers)("canManageEmail",e.canManageEmail)("fromEmailUser",n.wc(1,7,e.fromEmailUser$))("team",e.team)("forceCreate",e.forceSigCreation)("forceAdd",e.forceAdd)("settingType",e.forceSig?e.EmailSettingsTypes.SIGNATURES:e.EmailSettingsTypes.ACCOUNTS)}}let kt=(()=>{class e{constructor(e,t){this.changeDetector=e,this.modalService=t,this.RecipientType=b.g,this.searchString="",this.fromEmailUser$=new $.a(null),this.destroy$=new A.a,this.forceSig=!1,this.forceSigCreation=!1,this.forceAdd=!1,this.dragging=!1,this.showCc=!1,this.showBcc=!1,this.showSubject=!1,this.replyToId=!1,this.subject="",this.canManageEmail=!1,this.collapseEmailReply=!1,this.fetchingContacts=!1,this.onCommunicatorAction=new n.o,this.onEmailUserAction=new n.o,this.onExpandReply=new n.o,this.EmailSettingsTypes=b.d,this.trackById=Object(_.d)("userid")}ngOnInit(){this.fromEmailUser$.pipe(Object(I.a)(e=>!(!e||!e.account_id)),Object(w.a)(this.destroy$)).subscribe(e=>{this.onCommunicatorAction.emit({type:b.a.SetFromEmailUser,fromEmailUser:e})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){if((e.authedEmails||e.preferredEmail)&&this.authedEmails)if(!this.fromEmailUser$.value&&this.authedEmails.length){const e=this.preferredEmail?this.authedEmails.find(e=>{var t,i;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===(null===(i=this.preferredEmail)||void 0===i?void 0:i.toLowerCase())}):this.authedEmails[0];this.fromEmailUser$.next(e||this.authedEmails[0])}else{const e=(this.authedEmails||[]).findIndex(e=>e.account_id===this.fromEmailUser$.value.account_id);this.fromEmailUser$.next(-1!==e?this.authedEmails[e]:null)}e.projectMembers&&(this.availableUsers=(this.projectMembers||[]).filter(e=>e.user&&e.role!==te.f.GUEST).map(e=>e.user))}setAuthedEmail(e){this.fromEmailUser$.next(e),this.dropdown.close()}toggleCc(){this.showCc=!this.showCc,this.changeDetector.markForCheck()}toggleBcc(){this.showBcc=!this.showBcc,this.changeDetector.markForCheck()}toggleSubject(){this.showSubject=!this.showSubject,this.changeDetector.markForCheck()}updateSubject(){this.onCommunicatorAction.emit({type:b.a.UpdateSubject,subject:this.subject})}emailUserAction(e){const{type:t,emailUser:i}=e;switch(t){case b.e.UpdateEmailUser:this.authedEmails=this.authedEmails.map(e=>e.userid===i.userid?i:e);break;case b.e.RemoveAuth:this.authedEmails=this.authedEmails.filter(e=>e.userid!==i.userid);break;case b.e.FetchEmailContacts:return void this.onEmailUserAction.emit({type:b.e.FetchEmailContacts,accountId:this.fromEmailUser$.value.account_id})}this.onEmailUserAction.emit(e)}openEmailSettings(e=!1,t=!1,i=!1){this.forceSig=e,this.forceSigCreation=t,this.forceAdd=i,this.modalService.open({modifier:"cu-email-communicators__modal",content:this.emailSettings})}dropEmail(e){const t=e.container.id.split("-")[0],i=parseInt(e.container.id.split("-")[1],10),o=e.previousContainer.id.split("-")[0],n=parseInt(e.previousContainer.id.split("-")[1],10),s=e.currentIndex+2*i,c=e.previousIndex+2*n,a=[...this.users[t]||[]];if(t===o)Object(Ve.g)(a,c,s),this.onCommunicatorAction.emit({type:b.a.SetUsers,fieldType:t,users:a});else{const e=[...this.users[o]];Object(Ve.h)(e,a,c,s),this.onCommunicatorAction.emit({type:b.a.SetAllUsers,fieldType:t,allUsers:Object.assign(Object.assign({},this.users),{[t]:Object(Ge.a)(a,"email"),[o]:e})})}}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.h),n.Wb(Pe.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-email-communicators"]],viewQuery:function(e,t){if(1&e&&(n.jd(Ze,1),n.jd(Ye,3),n.jd(Je,3)),2&e){let e;n.Qc(e=n.rc())&&(t.popover=e.first),n.Qc(e=n.rc())&&(t.dropdown=e.first),n.Qc(e=n.rc())&&(t.emailSettings=e.first)}},inputs:{replyToId:"replyToId",users:"users",suggestedEmails:"suggestedEmails",authedEmails:"authedEmails",fetchingAuthed:"fetchingAuthed",contactsMap:"contactsMap",team:"team",subject:"subject",canManageEmail:"canManageEmail",collapseEmailReply:"collapseEmailReply",fetchingContacts:"fetchingContacts",projectMembers:"projectMembers",collapseEmailInfo:"collapseEmailInfo",preferredEmail:"preferredEmail"},outputs:{onCommunicatorAction:"onCommunicatorAction",onEmailUserAction:"onEmailUserAction",onExpandReply:"onExpandReply"},features:[n.Gb],decls:33,vars:37,consts:function(){let e,t,i,o,n,s,c,a,r,l;return e=$localize`:@@common_from␟d5e0dbc9fd4651759df915cdc6ba26fe3f17475f␟5203279511751768967:From`,t=$localize`:@@common_mail-subject␟4b0ca852bafa5037c4e64c7b18f9cd1e14b799de␟9127604588498960753:Subject`,i=$localize`:@@cu-email-communicators__signatures-menu-label-accounts␟a7d8976941504f1546b97a89e614586027719ce4␟8022944434989018091: ACCOUNTS `,o=$localize`:@@cu-email-communicators__manage-accounts␟4ffd00989a9f544ef371ecbabb2f96464495e9ad␟5628177783305219594: Manage accounts `,n=$localize`:@@cu-email-communicators__signatures-menu-item-text-add-email-account␟97260dae5bef6e7a6cb01c3dc94cb46bd3b74c2b␟1976767041191091165:Add email account`,s=$localize`:@@common_link-an-email␟e9f7405915647beda13b3b7411af37b951de14e7␟2786224328644077000: Link an email `,c=$localize`:@@cu-email-settings__cc␟55a820e0dc34bf1840201fe39f94a79d647dbbe7␟8317773404053055317:Cc`,a=$localize`:@@cu-email-settings__bcc␟36d77573b61cc9bffe9ffa9cff25a2135d90262e␟3562239616878266089:Bcc`,r=$localize`:@@cu-email-settings__subject␟4b0ca852bafa5037c4e64c7b18f9cd1e14b799de␟9127604588498960753:Subject`,l=$localize`:@@cu-email-communicators__form-error_select-valid-email␟e15f62812f7c5deea218818d8ba98f25784ebbc5␟8535056559014052836:Please enter your email address`,[[1,"cu-email-communicators","ignore-click-out"],[1,"cu-email-communicators__row","cu-email-communicators__row-from"],[1,"cu-email-communicators__from"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownCloseOnModal"],["dropdown","dropdown"],[1,"cu-email-communicators__from-label-container"],[1,"cu-email-communicators__from-label"],e,["cuDropdownToggle","","class","cu-email-communicators__email cu-email-communicators__user cu-email-communicators__user-from",4,"ngIf","ngIfElse"],["class","cu-dropdown__menu_overflow-hidden ignore-click-out",4,"cuDropdownMenu"],["linkEmail",""],[1,"cu-email-communicators__cc"],["class","cu-email-communicators__cc-item",3,"click",4,"ngIf"],["cdkDropListGroup",""],["placement","bottom","container","body","containerClass","cu-email-communicators_error-popover","triggers","",3,"communicatorData","popover","fetchingContacts","outsideClick","dragging","disabled","onCommunicatorAction","onEmailUserAction","onDropEmail","onDragChange"],["popover","bs-popover"],[3,"communicatorData","fetchingContacts","disabled","dragging","onCommunicatorAction","onEmailUserAction","onDropEmail","onDragChange",4,"ngIf"],[3,"communicatorData","ccUsers","bccUsers","suggestedOnly","suggestedEmails","onCommunicatorAction"],["class","cu-email-communicators__input","type","text","placeholder",t,3,"cuAutoFocus","ngModel","ngModelChange",4,"ngIf"],["emailError",""],["emailSettings",""],["cuDropdownToggle","",1,"cu-email-communicators__email","cu-email-communicators__user","cu-email-communicators__user-from"],[4,"ngIf","ngIfElse"],["noName",""],[1,"cu-email-communicators__user-name"],[1,"cu-email-communicators__user-email"],[1,"cu-dropdown__menu_overflow-hidden","ignore-click-out"],["class","cu-email-communicators__signatures-menu cu-email-communicators__signatures-menu-accounts",4,"ngIf"],[1,"cu-email-communicators__signatures-menu","cu-email-communicators__signatures-menu-accounts"],[1,"cu-email-communicators__signatures-menu-label"],i,[1,"cu-email-communicators__signatures-menu-team",3,"perfectScrollbar"],["class","cu-email-communicators__signatures-menu-item",3,"cu-email-communicators__signatures-menu-item-no-name","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-email-communicators__signatures-menu-item cu-email-communicators__signatures-menu-item-add",3,"click",4,"ngIf"],[1,"cu-email-communicators__signatures-menu-item-settings-divider"],[1,"cu-email-communicators__signatures-menu-item","cu-email-communicators__signatures-menu-item-settings",3,"click"],[1,"cu-email-communicators__signatures-menu-item-text"],o,["icon","cog",1,"cu-email-communicators__sender-cog"],[1,"cu-email-communicators__signatures-menu-item",3,"click"],["class","cu-email-communicators__signatures-menu-item-text cu-email-communicators__signatures-menu-item-text-bold",3,"cuTooltip","tooltipDisabledIfTextNotTruncated",4,"ngIf"],[1,"cu-email-communicators__signatures-menu-item-text","cu-email-communicators__signatures-menu-item-text-email",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-email-communicators__signatures-menu-item-text","cu-email-communicators__signatures-menu-item-text-bold",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-email-communicators__signatures-menu-item","cu-email-communicators__signatures-menu-item-add",3,"click"],n,["class","cu-email-communicators__from-link",3,"click",4,"ngIf"],[1,"cu-email-communicators__from-link",3,"click"],s,[1,"cu-email-communicators__cc-item",3,"click"],c,a,r,[3,"communicatorData","fetchingContacts","disabled","dragging","onCommunicatorAction","onEmailUserAction","onDropEmail","onDragChange"],["type","text","placeholder",t,1,"cu-email-communicators__input",3,"cuAutoFocus","ngModel","ngModelChange"],[1,"cu-error-popover"],["icon","exclamation-triangle-fill"],l,[3,"availableUsers","canManageEmail","fromEmailUser","team","forceCreate","forceAdd","settingType","onEmailUserAction"]]},template:function(e,t){if(1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.cc(2,"div",2),n.cc(3,"div",3,4),n.cc(5,"div",5),n.cc(6,"div",6),n.ac(7),n.gc(8,7),n.Zb(),n.dd(9,": "),n.bc(),n.bd(10,it,5,4,"div",8),n.vc(11,"async"),n.bc(),n.bd(12,rt,2,1,"div",9),n.bd(13,dt,1,1,"ng-template",null,10,n.cd),n.bc(),n.bc(),n.cc(15,"div",11),n.bd(16,ut,2,0,"span",12),n.bd(17,mt,2,0,"span",12),n.bd(18,pt,2,0,"span",12),n.bc(),n.bc(),n.ac(19,13),n.cc(20,"cu-email-communicators-field",14,15),n.qc("onCommunicatorAction",function(e){return t.onCommunicatorAction.emit(e)})("onEmailUserAction",function(e){return t.emailUserAction(e)})("onDropEmail",function(e){return t.dropEmail(e)})("onDragChange",function(e){return t.dragging=e}),n.vc(22,"async"),n.vc(23,"async"),n.bc(),n.bd(24,ft,3,12,"cu-email-communicators-field",16),n.bd(25,bt,3,12,"cu-email-communicators-field",16),n.cc(26,"cu-email-communicators-field",17),n.qc("onCommunicatorAction",function(e){return t.onCommunicatorAction.emit(e)}),n.vc(27,"async"),n.bc(),n.Zb(),n.bc(),n.bd(28,gt,1,2,"input",18),n.bd(29,_t,4,0,"ng-template",null,19,n.cd),n.bd(31,vt,2,9,"ng-template",null,20,n.cd)),2&e){const e=n.Rc(14),i=n.Rc(30);let o=null,s=null;n.Ib(3),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownCloseOnModal",!0),n.Ib(7),n.Dc("ngIf",n.wc(11,21,t.fromEmailUser$))("ngIfElse",e),n.Ib(6),n.Dc("ngIf",!(t.showCc||null!=t.users[t.RecipientType.Cc]&&t.users[t.RecipientType.Cc].length)),n.Ib(1),n.Dc("ngIf",!(t.showBcc||null!=t.users[t.RecipientType.Bcc]&&t.users[t.RecipientType.Bcc].length)),n.Ib(1),n.Dc("ngIf",!t.showSubject&&t.replyToId),n.Ib(2),n.Dc("communicatorData",n.Jc(29,ht,t.RecipientType.To,t.users[t.RecipientType.To],t.contactsMap[null==(o=n.wc(22,23,t.fromEmailUser$))?null:o.account_id]))("popover",i)("fetchingContacts",t.fetchingContacts)("outsideClick",!0)("dragging",t.dragging)("disabled",!n.wc(23,25,t.fromEmailUser$)),n.Ib(4),n.Dc("ngIf",t.showCc||(null==t.users[t.RecipientType.Cc]?null:t.users[t.RecipientType.Cc].length)),n.Ib(1),n.Dc("ngIf",t.showBcc||(null==t.users[t.RecipientType.Bcc]?null:t.users[t.RecipientType.Bcc].length)),n.Ib(1),n.Dc("communicatorData",n.Jc(33,ht,t.RecipientType.To,t.users[t.RecipientType.To],t.contactsMap[null==(s=n.wc(27,27,t.fromEmailUser$))?null:s.account_id]))("ccUsers",t.users[t.RecipientType.Cc])("bccUsers",t.users[t.RecipientType.Bcc])("suggestedOnly",!0)("suggestedEmails",t.suggestedEmails),n.Ib(2),n.Dc("ngIf",t.showSubject||!t.replyToId)}},directives:[Le.b,c.q,ze.a,Ve.e,Be.a,$e.c,Ne.a,Xe.a,c.p,Ue.a,He.a,We.c,Ke.a,We.p,We.s,Qe.a],pipes:[c.b],styles:['.cu-email-communicators{padding:0 22px;border-bottom:1px solid #e9ebf0}.cu-email-communicators__from-emails-dragging .cu-email-communicators__user{pointer-events:none}.cu-email-communicators__collapsed{padding:15px 20px;display:flex;align-items:center;margin-left:5px;border-top:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0}.dark-theme .cu-email-communicators__collapsed{border-color:#1e272e}.cu-email-communicators__collapsed .cu-email-info{flex-grow:0}.cu-email-communicators__collapsed-icon{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:24px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:5px;border-radius:4px}.cu-email-communicators__collapsed-icon:hover{background-color:rgba(233,235,240,.5)}.dark-theme .cu-email-communicators__collapsed-icon:hover{background-color:rgba(43,52,59,.5)}.cu-email-communicators__collapsed-icon:hover svg{fill:#292d34}.dark-theme .cu-email-communicators__collapsed-icon:hover svg{fill:#b9bec7}.cu-email-communicators__collapsed-icon svg{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:10px;height:10px;fill:#7c828d}.dark-theme .cu-email-communicators{border-color:#1e272e}.cu-email-communicators__suggested.cu-email-communicators__user{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;background:#f2f4f7;border:transparent}.dark-theme .cu-email-communicators__suggested.cu-email-communicators__user{background:#2b343b}.cu-email-communicators__suggested.cu-email-communicators__user:hover{background:#e9ebf0;border-color:transparent}.dark-theme .cu-email-communicators__suggested.cu-email-communicators__user:hover{background:#1e272e}.cu-email-communicators__suggested-container{display:flex;align-items:center;flex-wrap:wrap;margin-bottom:12px}.cu-email-communicators__suggested-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;height:32px;display:flex;align-items:center;color:#7c828d;padding:0 12px 0 0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__suggested-title{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__suggested-title{color:#828588}.cu-email-communicators__link-plus{color:#7b68ee;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:none;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__link-plus{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__link-plus{font-family:var(--global-font-support)}}.cu-email-communicators__modal .cu-modal__title{width:100%;padding:0 35px;text-align:center}.cu-email-communicators__modal .cu-modal__close{right:35px}.cu-email-communicators__modal .cu-modal__dialog{width:800px!important;padding:35px 0 0!important}.cu-email-communicators__user{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;height:24px;padding:0 8px;border-radius:6px;cursor:move;margin-right:8px;border:1px solid #e9ebf0}.cu-email-communicators__user:hover{background:#e9ebf0}.dark-theme .cu-email-communicators__user:hover{background:#1e272e!important;border-color:transparent}.cu-email-communicators__user.cu-email-communicators__user-no-drag{cursor:default}.cu-email-communicators__user.cu-email-communicators__user-cf{background:#7b68ee;font-weight:400;font-size:11px;line-height:11px;display:inline-flex;align-items:center;flex-shrink:0;padding:4px 7px;margin:1px 4px 1px 0;border-radius:4px;color:#fff;cursor:pointer;border:none;height:auto}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__user.cu-email-communicators__user-cf{background:var(--theme-main-color)}}.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__user-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__user-name{font-family:var(--global-font-support)}}.cu-email-communicators__user.cu-email-communicators__user-cf .cu-email-communicators__close{stroke:#fff}.dark-theme .cu-email-communicators__user{border-color:#1e272e}.cu-email-communicators__user.cu-email-communicators__user-invalid-email{border:1px solid rgba(255,66,69,.5);background:rgba(255,66,69,.1)}.cu-email-communicators__user.cu-email-communicators__user-invalid-email:hover,.dark-theme .cu-email-communicators__user.cu-email-communicators__user-invalid-email:hover{background:rgba(255,66,69,.2)}.cu-email-communicators__user-from{cursor:pointer}.cu-email-communicators__user-email,.cu-email-communicators__user-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-email-communicators__user-name{color:#292d34}.dark-theme .cu-email-communicators__user-name{color:#d5d6d7}.cu-email-communicators__user-email{color:#7c828d}.dark-theme .cu-email-communicators__user-email{color:#abaeb0}.cu-email-communicators__user-name+.cu-email-communicators__user-email{margin-left:5px}.cu-email-communicators__email-authed{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;height:28px;align-items:center;padding:2px 10px;cursor:pointer;margin:5px;border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__email-authed{font-family:var(--global-font-support)}}.cu-email-communicators__email-authed-name{padding-right:5px}.cu-email-communicators__email-authed-name,.cu-email-communicators__email-authed span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-email-communicators__email-authed:hover{background-color:var(--theme-main-color);color:#fff}.cu-email-communicators__email-authed:hover .cu-email-communicators__email-authed-name,.cu-email-communicators__email-authed:hover span{color:#fff}.cu-email-communicators__sender{width:300px}.cu-email-communicators__sender-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;display:flex;align-items:center;justify-content:space-between;text-transform:uppercase;color:#7c828d;padding:0 15px;height:42px;background-color:rgba(233,235,240,.4)}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__sender-top{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__sender-top{background-color:#2b343b;color:#828588}.cu-email-communicators__sender-cog{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;fill:#b9bec7;cursor:pointer}.cu-email-communicators__sender-cog:hover{fill:var(--theme-main-color)}.cu-email-communicators__close{transition:stroke .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:6px;height:10px;width:10px;padding:1px;stroke:#7c828d;cursor:pointer}.dark-theme .cu-email-communicators__close{stroke:#b9bec7}.cu-email-communicators__close:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-communicators__close:hover{stroke:var(--theme-main-color)}}.cu-email-communicators__row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;min-height:24px}.cu-email-communicators__from{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;display:flex;width:100%;align-items:center;flex-wrap:wrap}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from{font-family:var(--global-font-support)}}.cu-email-communicators__from span{font-weight:400;cursor:pointer;color:#333}.dark-theme .cu-email-communicators__from span{color:#d5d6d7}.cu-email-communicators__from-link{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:1;display:inline;background-color:var(--theme-main-color);color:#fff;padding:4px 5px 3px;border-radius:2px;animation:flash .5s linear 2}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-link{font-family:var(--global-font-support)}}.cu-email-communicators__from-link:hover{background-color:var(--theme-main-color-dark)}.cu-email-communicators__from-group{width:90%}.cu-email-communicators__from-group-additional{margin-top:8px}.cu-email-communicators__from-group .user-list__body-virtual-viewport{height:200px}.cu-email-communicators__from-label{display:flex;align-items:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-right:8px;text-transform:capitalize;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__from-label{color:#7c828d}.cu-email-communicators__from-label-container{display:flex}.cu-email-communicators__from-label-container .cu-dropdown__toggle{display:flex;align-items:center;font-weight:400}.cu-email-communicators__from-label-container .cu-dropdown__toggle:hover .cu-email-communicators__email-dropdown-icon{opacity:1}.cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(90deg);fill:#292d34;width:16px;height:16px;padding:2px;margin-left:5px;opacity:0}.dark-theme .cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{fill:#d5d6d7}.cu-dropdown_open .cu-email-communicators__from-label-container .cu-dropdown__toggle .cu-email-communicators__email-dropdown-icon{opacity:1;transform:rotate(-90deg)}.cu-email-communicators__from-label .cu-dropdown__toggle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-label .cu-dropdown__toggle{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__from-label .cu-dropdown__toggle{color:#7c828d}.cu-email-communicators__from-emails{display:flex;align-items:center;flex-wrap:wrap;flex:1 0 0;cursor:text;min-height:12px}.cu-email-communicators__from-emails .cu-search__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-left:5px;padding:0 0 2px;width:100px;min-width:30px;max-width:300px;border:none;background-color:transparent!important;box-shadow:none!important}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__from-emails .cu-search__input{font-family:var(--global-font-support)}}.cu-email-communicators__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;padding:0 20px;border:none;border-bottom:1px solid #e9ebf0;color:#292d34;background-color:transparent;box-shadow:none!important;width:100%;height:40px;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__input{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__input{color:#fff;border-color:#1e272e}.cu-email-communicators__input:-ms-input-placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px 1;color:#b9bec7}.cu-email-communicators__input::placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px 1;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-email-communicators__input::placeholder{font-family:var(--global-font-support)}}.cu-email-communicators__cc{display:flex;align-items:center}.cu-email-communicators__cc-item{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;cursor:pointer;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__cc-item{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__cc-item{color:#7c828d}.cu-email-communicators__cc-item:hover{color:var(--theme-main-color)}.cu-email-communicators__cc-item:not(:last-child){margin-right:5px}.cu-email-communicators_error-popover{margin-left:-280px;background:#fff;border:1px solid #fd7179}.dark-theme .cu-email-communicators_error-popover{background:#2b343b}.cu-email-communicators_error-popover .cu-error-popover{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#292d34;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators_error-popover .cu-error-popover{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators_error-popover .cu-error-popover{color:#d5d6d7}.cu-email-communicators_error-popover .cu-error-popover .icon{width:13px;height:13px;fill:#fd7179;margin-right:5px}.cu-email-communicators_error-popover:after{position:absolute;content:"";background:#fff;width:100%;top:0!important;margin-left:0!important;left:0!important;border:none!important;height:10px;z-index:3}.dark-theme .cu-email-communicators_error-popover:after{background:#2b343b}.cu-email-communicators_error-popover:before{position:absolute;content:"";background:#fff;border:1px solid #fd7179!important;height:12px;width:12px;transform:rotate(45deg);top:-5px!important;z-index:2}.dark-theme .cu-email-communicators_error-popover:before{background:#2b343b}.cu-email-communicators__signatures-menu{width:260px;padding:8px 0}.cu-email-communicators__signatures-menu-team{max-height:200px}.cu-email-communicators__signatures-menu-settings{padding-top:2px;border-top:1px solid #e9ebf0}.dark-theme .cu-email-communicators__signatures-menu-settings{border-color:#1e272e}.cu-email-communicators__signatures-menu-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;height:32px;display:flex;align-items:center;color:#b9bec7;padding:0 12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-label{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-label{color:#828588}.cu-email-communicators__signatures-menu-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;height:32px;display:flex;align-items:center;justify-content:space-between;padding:0 12px;cursor:pointer}.cu-email-communicators__signatures-menu-item-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-communicators__signatures-menu-item-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-communicators__signatures-menu-item-text{color:#d5d6d7}.cu-email-communicators__signatures-menu-item:hover{background:#fafbfc}.dark-theme .cu-email-communicators__signatures-menu-item:hover{background:#2b343b}.cu-email-communicators__signatures-menu-item .icon{width:14px;height:14px;fill:#292d34}.dark-theme .cu-email-communicators__signatures-menu-item .icon{fill:#d5d6d7}.cu-email-communicators__signatures-menu-item-add .cu-email-communicators__signatures-menu-item-text{font-weight:500;color:var(--theme-main-color)}.cu-email-communicators__signatures-menu-item-settings-divider{background:#e9ebf0;width:100%;margin:8px 0;height:1px}.dark-theme .cu-email-communicators__signatures-menu-item-settings-divider{background:#1e272e}.cu-email-communicators__signatures-menu-item-settings{padding:0 12px;height:32px}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item{justify-content:flex-start}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#7c828d}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-email{color:#828588}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{padding-right:5px;font-weight:500;color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-text-bold{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#292d34}.dark-theme .cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-no-name .cu-email-communicators__signatures-menu-item-text-email{color:#d5d6d7}.cu-email-communicators__signatures-menu-accounts .cu-email-communicators__signatures-menu-item-settings .icon{margin-left:auto}'],encapsulation:2,changeDetection:0}),e})();var yt=i("F2x4"),wt=i("aitn"),xt=i("+HC/"),It=i("rXb0"),Tt=i("HPyy"),Ct=i("WkAz"),Dt=i("QFII");const Ot=["dropdown"],St=["templateList"];function Et(e,t){if(1&e){const e=n.dc();n.cc(0,"div",4),n.cc(1,"cu-email-template-list",5,6),n.qc("onSelectTemplate",function(t){n.Uc(e);const i=n.uc(),o=n.Rc(1);return i.onSelectTemplate.emit(t),o.close()})("onOpenSettings",function(){return n.Uc(e),n.uc().onOpenSettings.emit()})("onClose",function(){return n.Uc(e),n.uc(),n.Rc(1).close()}),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("templates",e.templates)("templateContent",e.templateContent)("emailSubject",e.emailSubject)("isDropdown",!0)("hasEmailCommunicators",e.hasEmailCommunicators)}}const Pt=function(){return["top"]},jt=["*"];let At=(()=>{class e{constructor(){this.reposition$=new $.a(!1),this.disabled=!1,this.hasEmailCommunicators=!0,this.onEmailUserAction=new n.o,this.onSelectTemplate=new n.o,this.onOpenSettings=new n.o}ngOnInit(){}ngOnChanges(e){e.templates&&this.reposition$.next(!this.reposition$.value)}fetchTemplates(){this.onEmailUserAction.emit({type:b.e.FetchEmailTemplates})}focusTemplateListSearchInput(){this.templateList&&this.templateList.focusSearchInput()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-email-template-dropdown"]],viewQuery:function(e,t){if(1&e&&(n.jd(Ot,3),n.jd(St,1)),2&e){let e;n.Qc(e=n.rc())&&(t.dropdown=e.first),n.Qc(e=n.rc())&&(t.templateList=e.first)}},inputs:{templates:"templates",disabled:"disabled",templateContent:"templateContent",emailSubject:"emailSubject",hasEmailCommunicators:"hasEmailCommunicators"},outputs:{onEmailUserAction:"onEmailUserAction",onSelectTemplate:"onSelectTemplate",onOpenSettings:"onOpenSettings"},features:[n.Gb],ngContentSelectors:jt,decls:6,vars:8,consts:[["cuDropdown","",1,"cu-dropdown",3,"dropdownCloseOnModal","dropdownCloseOnInsideClick","dropdownDisabled","dropdownRepositionFlag","dropdownPlacement","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["class","cu-dropdown__menu cu-email-template-dropdown__dropdown",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-email-template-dropdown__dropdown"],[3,"templates","templateContent","emailSubject","isDropdown","hasEmailCommunicators","onSelectTemplate","onOpenSettings","onClose"],["templateList",""]],template:function(e,t){1&e&&(n.Cc(),n.cc(0,"div",0,1),n.qc("dropdownOpen",function(){return t.fetchTemplates(),t.focusTemplateListSearchInput()}),n.vc(2,"async"),n.cc(3,"div",2),n.Bc(4),n.bc(),n.bd(5,Et,3,5,"div",3),n.bc()),2&e&&n.Dc("dropdownCloseOnModal",!0)("dropdownCloseOnInsideClick",!1)("dropdownDisabled",t.disabled)("dropdownRepositionFlag",n.wc(2,5,t.reposition$))("dropdownPlacement",n.Gc(7,Pt))},directives:[Le.b,Ne.a,ze.a,Dt.a],pipes:[c.b],styles:['.cu-email-template-dropdown-modal .cu-modal__title{padding:0;text-align:center;width:100%}.cu-email-template-dropdown-modal .cu-api-integration__input{border:none;border-bottom:1px solid #e9ebf0;padding:0;border-radius:0}.dark-theme .cu-email-template-dropdown-modal .cu-api-integration__input{border-color:#1e272e}.cu-email-template-dropdown-modal .ql-editor{border:1px solid #e9ebf0!important;text-align:left;direction:ltr}.dark-theme .cu-email-template-dropdown-modal .ql-editor{border-color:#1e272e!important}.cu-email-template-dropdown-modal .cu-editor-wrapper_active{padding:0!important}.cu-email-template-dropdown-modal .cu-editor-footer-info{display:none!important}.cu-email-template-dropdown-modal .cu-rich-editor-toolbar_sticky{padding:0;margin-bottom:5px}.cu-email-template-dropdown-modal .cu-rich-editor-toolbar_sticky.ql-toolbar:after{display:none}.cu-email-template-dropdown__row{justify-content:space-between}.cu-email-template-dropdown__row:hover .cu-email-template-dropdown__actions{display:flex;align-items:center}.cu-email-template-dropdown__actions{display:none}.cu-email-template-dropdown__dropdown{min-width:250px;max-width:250px;max-height:448px;overflow-x:hidden}.cu-email-template-dropdown__dropdown:after{display:none}.cu-email-template-dropdown__row{display:flex;height:44px;align-items:center;cursor:pointer;max-width:100%;border-bottom:1px solid #e9ebf0;margin:0 30px}.dark-theme .cu-email-template-dropdown__row{border-color:#384047}.cu-email-template-dropdown__row:hover .cu-email-template-dropdown__name{color:var(--theme-main-color)}.cu-email-template-dropdown__row .nav-menu-item__icon:last-of-type{margin:0}.cu-email-template-dropdown__name{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-dropdown__name{font-family:var(--global-font-support)}}.cu-email-template-dropdown__new{color:#7b68ee;font-weight:500;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;height:44px;display:flex;align-items:center;margin:0 30px;cursor:pointer;border-bottom:1px solid #e9ebf0}@supports (--theme-main-color:#7b68ee){.cu-email-template-dropdown__new{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-template-dropdown__new{font-family:var(--global-font-support)}}.dark-theme .cu-email-template-dropdown__new{border-color:#384047}.cu-email-communicators__modal .cu-email-template-dropdown__new{border-bottom:none}'],encapsulation:2,changeDetection:0}),e})();var $t=i("jkYJ"),Ut=i("5smY"),Rt=i("0ENg"),Mt=i("jkT0"),Ft=i("jwRX"),Lt=i("UAD/"),Nt=i("pxPQ"),zt=i("lkVx");const qt=["editorContainer"],Gt=["tourAssignComment"],Vt=["emailCommunicators"],Bt=["userList"],Xt=["emojiPickerDropdown"],Ht=["emailTemplateDropdown"],Wt=["comments"],Kt=["comment"],Qt=["taskMention"],Zt=["paywallPopover"],Yt=["cloudStoragepaywallPopover"],Jt=["screenRecordingPopover"],ei=["toolbar"],ti=["emojiDropdown"],ii=["mentionSelector"],oi=["mentionSelectorDropdown"],ni=["slashCommandTemplate"],si=["slashCommand"],ci=["slashCommandContainer"],ai=["taskPopupDropdown"],ri=["commentModeDropdown"],li=["sigDropdown"],di=["sigDropdown2"],ui=["paywallUnlimitedEmailTemplate"],mi=["unfurlUrlDropdown"],pi=["blockHanleDropdown"];function hi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-paywall-popover",32),n.qc("upgradeClicked",function(){return n.Uc(e),n.uc().sharedTaskService.closeTask()}),n.bc()}2&e&&n.Dc("amplitudeLabel","File Storage Limit")}function fi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",33),n.cc(1,"div",34),n.gc(2,35),n.bc(),n.cc(3,"div",36),n.qc("click",function(){return n.Uc(e),n.uc().cancelReply()}),n.gc(4,37),n.bc(),n.bc()}}const bi=function(e,t){return{name:e,email:t}},gi=function(e){return[e]},_i=function(e,t){return{from:e,to:t}};function vi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-email-communicators",39,40),n.qc("onCommunicatorAction",function(t){return n.Uc(e),n.uc(2).communicatorAction(t)})("onEmailUserAction",function(t){return n.Uc(e),n.uc(2).onEmailUserAction.emit(t)})("onExpandReply",function(t){return n.Uc(e),n.uc(2).expandReply(t)}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("users",e.emailUsers)("suggestedEmails",e.suggestedEmails)("subject",e.emailSubject)("canManageEmail",e.canManageEmail)("contactsMap",null==e.authedState?null:e.authedState.contactsMap)("projectMembers",e.projectMembers)("authedEmails",null==e.authedState?null:e.authedState.authedEmails)("preferredEmail",null==e.authedState?null:e.authedState.preferredEmail)("fetchingAuthed",null==e.authedState?null:e.authedState.fetchingAuthed)("fetchingContacts",null==e.authedState?null:e.authedState.fetchingContacts)("collapseEmailReply",e.collapseEmailReply)("replyToId",e.replyToId)("collapseEmailInfo",n.Ic(19,_i,n.Hc(17,gi,n.Ic(14,bi,null==e.fromEmailUser?null:e.fromEmailUser.name,null==e.fromEmailUser?null:e.fromEmailUser.email)),e.emailUsers[e.RecipientType.To]))("team",e.team)}}function ki(e,t){if(1&e&&(n.ac(0),n.bd(1,vi,2,22,"cu-email-communicators",38),n.Zb()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngIf",e.allowEmailFeature&&e.commentMode===e.CommentMode.Email)}}function yi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-mention-selector-container",41,42),n.qc("onSelect",function(t){return n.Uc(e),n.uc().addMentionToEditor(t)})("onOpen",function(){return n.Uc(e),n.uc().onMentionOpen.emit()})("onClose",function(){return n.Uc(e),n.uc().onMentionClose.emit()}),n.vc(2,"membersToUsers"),n.vc(3,"async"),n.vc(4,"async"),n.bc()}if(2&e){const e=n.uc();n.Dc("users",n.wc(2,11,e.projectMembers))("userGroups",e.userGroups)("weights",e.weights)("meUser",e.allowMentionSelf?null:n.wc(3,13,e.sharedData.currentUser))("subcategory",e.subcategory)("task",e.task)("isGuest",n.wc(4,15,e.isGuest$))("isChatView",e.isChatView)("isTaskViewComment",!0)("isChatViewModal",e.isChatViewModal)("taskUserGroups",e.taskUserGroups)}}function wi(e,t){1&e&&(n.cc(0,"div",52),n.dd(1," + "),n.ac(2),n.gc(3,53),n.Zb(),n.bc())}function xi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",50),n.qc("click",function(){return n.Uc(e),n.uc(2).checkPlan()}),n.bd(1,wi,4,0,"div",51),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",!n.wc(2,1,e.selectedSignature$))}}function Ii(e,t){if(1&e&&(n.cc(0,"div",64),n.Yb(1,65),n.bc()),2&e){n.uc(3);const e=n.Rc(48);n.ad("width",260,"px"),n.Ib(1),n.Dc("ngTemplateOutlet",e)}}function Ti(e,t){if(1&e){const e=n.dc();n.cc(0,"div",54),n.cc(1,"div",55),n.dd(2,"--"),n.bc(),n.Xb(3,"cu-html-preview",56),n.cc(4,"div",57),n.cc(5,"div",58,59),n.qc("dropdownOpen",function(){n.Uc(e);const t=n.uc(2);return t.sigDropOpen=!0,t.setAvailableSignatures()})("dropdownClose",function(){return n.Uc(e),n.uc(2).sigDropOpen=!1}),n.cc(7,"div",60),n.qc("click",function(){return n.Uc(e),n.uc(2).checkPlan()}),n.Xb(8,"div",61),n.bc(),n.bd(9,Ii,2,3,"div",49),n.bc(),n.cc(10,"div",62),n.qc("click",function(){return n.Uc(e),n.uc(2).selectedSignature$.next(null)}),n.Xb(11,"div",63),n.bc(),n.bc(),n.bc()}if(2&e){const e=t.ngIf,i=n.uc(2);n.Ib(3),n.Dc("useHtml",null==e?null:e.html)("html",null==e?null:e.signature),n.Ib(1),n.Ob("cu-comment-bar__signature-show-options",i.sigDropOpen),n.Ib(1),n.Dc("dropdownDisabled",(null==i.team?null:i.team.plan_id)===i.TeamPlan.FREE||(null==i.team?null:i.team.plan_id)===i.TeamPlan.UNLIMITED)("dropdownRepositionFlag",i.availableSignatures),n.Ib(3),n.Dc("icon","ellipsis"),n.Ib(3),n.Dc("icon","cu2-close")}}function Ci(e,t){if(1&e&&(n.cc(0,"div",64),n.Yb(1,65),n.bc()),2&e){n.uc(2);const e=n.Rc(48);n.ad("width",260,"px"),n.Ib(1),n.Dc("ngTemplateOutlet",e)}}function Di(e,t){if(1&e){const e=n.dc();n.cc(0,"div",43),n.cc(1,"div",44,45),n.qc("dropdownOpen",function(){return n.Uc(e),n.uc().setAvailableSignatures()}),n.cc(3,"div",46),n.bd(4,xi,3,3,"div",47),n.vc(5,"async"),n.bd(6,Ti,12,8,"div",48),n.vc(7,"async"),n.bc(),n.bd(8,Ci,2,3,"div",49),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("dropdownDisabled",(null==e.team?null:e.team.plan_id)===e.TeamPlan.FREE||(null==e.team?null:e.team.plan_id)===e.TeamPlan.UNLIMITED)("dropdownRepositionFlag",e.availableSignatures),n.Ib(3),n.Dc("ngIf",!n.wc(5,4,e.selectedSignature$)),n.Ib(2),n.Dc("ngIf",n.wc(7,6,e.selectedSignature$))}}function Oi(e,t){1&e&&n.Xb(0,"option",107),2&e&&n.Dc("value",t.$implicit)}function Si(e,t){1&e&&n.Xb(0,"div",108)}function Ei(e,t){if(1&e&&(n.cc(0,"cu-avatar",109),n.ic(1,110),n.bc()),2&e){const e=n.uc(2);n.kc(null==e.commentAssignee||null==e.commentAssignee.user?null:e.commentAssignee.user.username),n.hc(1),n.Dc("user",e.commentAssignee.user)}}function Pi(e,t){if(1&e&&(n.cc(0,"cu-user-group-avatar",111),n.ic(1,112),n.bc()),2&e){const e=n.uc(2);n.kc(null==e.commentAssignee||null==e.commentAssignee.group?null:e.commentAssignee.group.name),n.hc(1),n.Dc("group",e.commentAssignee.group)("bordered",!1)("avatarSize",28)}}function ji(e,t){if(1&e){const e=n.dc();n.cc(0,"div",113),n.qc("click",function(){return n.Uc(e),n.uc(2).openUserMentions()}),n.Xb(1,"div",114),n.bc()}}function Ai(e,t){if(1&e){const e=n.dc();n.cc(0,"div",115),n.qc("click",function(t){return n.Uc(e),n.uc(2).openTaskMentionEditor(t)}),n.Xb(1,"div",116),n.bc()}}function $i(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-email-template-dropdown",117,118),n.qc("onEmailUserAction",function(t){return n.Uc(e),n.uc(2).onEmailUserAction.emit(t)})("onSelectTemplate",function(t){return n.Uc(e),n.uc(2).selectTemplate(t)})("onOpenSettings",function(){return n.Uc(e),n.uc(2).openEmailSettings()})("click",function(){return n.Uc(e),n.uc(2).checkPlan()}),n.Xb(2,"div",119),n.bc()}if(2&e){const e=n.uc(2);n.Dc("templates",null==e.authedState?null:e.authedState.emailTemplates)("templateContent",e.templateContent)("emailSubject",e.emailSubject)("hasEmailCommunicators",!!e.emailCommunicators)("disabled",(null==e.team?null:e.team.plan_id)===e.TeamPlan.FREE||(null==e.team?null:e.team.plan_id)===e.TeamPlan.UNLIMITED),n.Ib(2),n.Dc("icon","email-templates")}}function Ui(e,t){if(1&e){const e=n.dc();n.cc(0,"div",120),n.qc("click",function(){return n.Uc(e),n.uc(2).openEmailSettings()}),n.bc()}2&e&&n.Dc("cuTooltip","Email Settings")}function Ri(e,t){if(1&e){const e=n.dc();n.cc(0,"div",121),n.qc("click",function(t){return n.Uc(e),n.uc(2).openSlashCommands(t)}),n.Xb(1,"div",122),n.bc()}}function Mi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",123),n.cc(1,"div",124),n.Xb(2,"div",125),n.ac(3),n.gc(4,126),n.Zb(),n.bc(),n.Xb(5,"img",127),n.cc(6,"div",128),n.gc(7,129),n.bc(),n.cc(8,"div",130),n.gc(9,131),n.bc(),n.cc(10,"div",132),n.gc(11,133),n.bc(),n.cc(12,"div",134),n.qc("click",function(){return n.Uc(e),n.uc(2).startScreenRecording(!0)}),n.gc(13,135),n.bc(),n.cc(14,"div",136),n.ac(15),n.gc(16,137),n.Zb(),n.dd(17,"\xa0\xa0"),n.Xb(18,"img",138),n.bc(),n.cc(19,"div",139),n.ac(20),n.gc(21,140),n.Zb(),n.dd(22,"\xa0\xa0"),n.Xb(23,"img",141),n.bc(),n.bc()}}function Fi(e,t){1&e&&(n.cc(0,"div",142),n.Xb(1,"div",143),n.bc())}function Li(e,t){if(1&e){const e=n.dc();n.cc(0,"div",144,145),n.qc("click",function(){return n.Uc(e),n.uc(2).startScreenRecording()}),n.Xb(2,"div",143),n.bc()}if(2&e){n.uc();const e=n.Rc(36);n.Dc("popover",e)}}function Ni(e,t){if(1&e){const e=n.dc();n.cc(0,"div",146),n.qc("click",function(){return n.Uc(e),n.uc(2).stopScreenRecording()}),n.cc(1,"div",147),n.tc(),n.cc(2,"svg",148),n.Xb(3,"path",149),n.Xb(4,"path",150),n.bc(),n.bc(),n.bc()}}function zi(e,t){if(1&e&&n.Yb(0,65),2&e){n.uc(2);const e=n.Rc(38);n.Dc("ngTemplateOutlet",e)}}function qi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",151),n.cc(1,"div",152),n.qc("click",function(t){n.Uc(e);const i=n.uc(2);return i.changeMode(i.CommentMode.Email,t)}),n.Xb(2,"div",153),n.bc(),n.cc(3,"div",152),n.qc("click",function(t){n.Uc(e);const i=n.uc(2);return i.changeMode(i.CommentMode.Comment,t)}),n.Xb(4,"div",154),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(1),n.Ob("comment-bar__controls-mode-toggle-item-active",e.commentMode===e.CommentMode.Email),n.Dc("cuTooltip",e.commonStringsService.sendEmailText),n.Ib(2),n.Ob("comment-bar__controls-mode-toggle-item-active",e.commentMode!==e.CommentMode.Email),n.Dc("cuTooltip",e.commonStringsService.commentText)}}function Gi(e,t){1&e&&(n.ac(0),n.gc(1,163),n.Zb())}function Vi(e,t){1&e&&(n.ac(0),n.gc(1,164),n.Zb())}function Bi(e,t){if(1&e){const e=n.dc();n.cc(0,"div"),n.cc(1,"button",155),n.qc("click",function(){return n.Uc(e),n.uc(2).submitComment()}),n.cc(2,"div",156),n.bd(3,Gi,2,0,"ng-container",157),n.bd(4,Vi,2,0,"ng-template",null,158,n.cd),n.bc(),n.cc(6,"div",159),n.Xb(7,"div",160),n.Xb(8,"div",161),n.Xb(9,"div",162),n.bc(),n.bc(),n.bc()}if(2&e){const e=n.Rc(5),t=n.uc(2);n.Ob("cu-comment-bar__show-email",t.allowEmailFeature&&t.canManageEmail),n.Ib(1),n.Dc("cuTooltip",t.commentMode===t.CommentMode.Email?t.isWindows?t.commentBarStringsService.emailModeShortKeyWinTooltipText:t.commentBarStringsService.emailModeShortKeyMacOSTooltipText:null)("disabled",t.loading||t.fileUploading),n.Ib(2),n.Dc("ngIf",t.commentMode===t.CommentMode.Comment)("ngIfElse",e)}}function Xi(e,t){if(1&e){const e=n.dc();n.cc(0,"div"),n.cc(1,"div",168),n.qc("click",function(){return n.Uc(e),n.uc(3).submitComment(!0)}),n.gc(2,169),n.bc(),n.bc()}}const Hi=function(){return["top-left","top-right","bottom-left","bottom-right","auto"]};function Wi(e,t){if(1&e&&(n.cc(0,"div",165),n.cc(1,"div",21),n.cc(2,"button",166),n.Xb(3,"div",167),n.bc(),n.bc(),n.bd(4,Xi,3,0,"div",22),n.bc()),2&e){const e=n.uc(2);n.Dc("dropdownPlacement",n.Gc(4,Hi))("dropdownDisabled",e.loading||e.fileUploading),n.Ib(2),n.Dc("disabled",e.loading||e.fileUploading),n.Ib(1),n.Dc("icon","cu2-caret-down")}}const Ki=function(e){return{"comment-bar__footer_disabled":e}},Qi=function(e){return{display:e}},Zi=function(){return[]};function Yi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",66),n.cc(1,"div",null,67),n.cc(3,"span",68),n.Xb(4,"button",69),n.Xb(5,"button",70),n.Xb(6,"button",71),n.Xb(7,"button",72),n.cc(8,"select",73),n.Xb(9,"option"),n.bd(10,Oi,1,1,"option",74),n.bc(),n.Xb(11,"button",75),n.Xb(12,"button",76),n.Xb(13,"button",77),n.Xb(14,"button",78),n.Xb(15,"button",79),n.Xb(16,"button",80),n.Xb(17,"button",81),n.bc(),n.bc(),n.cc(18,"div",82),n.cc(19,"cu-user-and-groups-list-dropdown",83,84),n.qc("onChange",function(t){return n.Uc(e),n.uc().assignToUser(t)})("onUserGroupsChanged",function(t){return n.Uc(e),n.uc().assignToGroup(t)}),n.vc(21,"membersToUsers"),n.bd(22,Si,1,0,"div",85),n.bd(23,Ei,2,2,"cu-avatar",86),n.bd(24,Pi,2,4,"cu-user-group-avatar",87),n.bc(),n.bd(25,ji,2,0,"div",88),n.bd(26,Ai,2,0,"div",89),n.cc(27,"cu-emoji-picker-dropdown",90,91),n.qc("onSelect",function(t){return n.Uc(e),n.uc().addEmojiToEditor(t)}),n.Xb(29,"div",92),n.bc(),n.bd(30,$i,3,6,"cu-email-template-dropdown",93),n.bd(31,Ui,1,1,"div",94),n.cc(32,"cu-emoji-list-dropdown",95,96),n.qc("onSelect",function(t){return n.Uc(e),n.uc().addEmojiToEditor(t)}),n.bc(),n.bd(34,Ri,2,0,"div",97),n.bd(35,Mi,24,0,"ng-template",null,98,n.cd),n.bd(37,Fi,2,0,"div",99),n.vc(38,"async"),n.vc(39,"async"),n.bd(40,Li,3,1,"div",100),n.vc(41,"async"),n.vc(42,"async"),n.vc(43,"async"),n.vc(44,"async"),n.bd(45,Ni,5,0,"div",101),n.vc(46,"async"),n.bd(47,zi,1,1,"ng-container",102),n.Xb(48,"div",103),n.bc(),n.bd(49,qi,5,6,"div",104),n.cc(50,"div",82),n.bd(51,Bi,10,6,"div",105),n.bd(52,Wi,5,5,"div",106),n.bc(),n.bc()}if(2&e){const e=n.uc();let t=null;n.Dc("ngClass",n.Hc(62,Ki,e.loading||e.fileUploading)),n.Ib(1),n.Ob("comment-bar__controls",e.staticToolbar)("cu-hidden",!e.staticToolbarVisible&&e.staticToolbar),n.Ib(9),n.Dc("ngForOf",e.allowedBgColors)("ngForTrackBy",e.trackByValue),n.Ib(3),n.Ob("cu-comment-bar__btn_disabled",e.inTable),n.Dc("disabled",e.inTable),n.Ib(1),n.Ob("cu-comment-bar__btn_disabled",e.inTable),n.Dc("disabled",e.inTable),n.Ib(3),n.Dc("ngStyle",n.Hc(64,Qi,e.commentMode===e.CommentMode.Email?"none":"")),n.Ib(1),n.Ob("cu-hidden",e.staticToolbarVisible)("comment-bar__controls-email",e.commentMode===e.CommentMode.Email),n.Ib(1),n.Dc("users",n.wc(21,46,e.projectMembers))("selectedUsers","user"===(null==e.commentAssignee?null:e.commentAssignee.type)?n.Hc(66,gi,e.commentAssignee.user):n.Gc(68,Zi))("selectedUserGroups","group"===(null==e.commentAssignee?null:e.commentAssignee.type)?n.Hc(69,gi,e.commentAssignee.group):n.Gc(71,Zi))("modifier","cu-dropdown_center cu-dropdown_top cu-dropdown_pointer")("showAnyone",e.showAnyone)("showUnassign",e.showUnassign)("weights",e.weights)("weightType",e.UserWeightType.COMMENT)("userGroups",e.userGroups)("subcategory",e.subcategory)("task",e.task),n.Ib(3),n.Dc("ngIf",!e.commentAssignee&&e.commentMode!==e.CommentMode.Email),n.Ib(1),n.Dc("ngIf","user"===(null==e.commentAssignee?null:e.commentAssignee.type)),n.Ib(1),n.Dc("ngIf","group"===(null==e.commentAssignee?null:e.commentAssignee.type)),n.Ib(1),n.Dc("ngIf",e.commentMode!==e.CommentMode.Email),n.Ib(1),n.Dc("ngIf",e.commentMode!==e.CommentMode.Email),n.Ib(3),n.Dc("icon","comment-bar-emoji"),n.Ib(1),n.Dc("ngIf",e.commentMode===e.CommentMode.Email),n.Ib(1),n.Dc("ngIf",e.commentMode===e.CommentMode.Email&&!e.forAutomation),n.Ib(1),n.Dc("fromRect",e.emojiRect),n.Ib(2),n.Dc("ngIf",e.slashCommandSupport&&e.commentMode!==e.CommentMode.Email),n.Ib(3),n.Dc("ngIf",n.wc(38,48,e.recordingInProgress$)&&!n.wc(39,50,e.currentScreenRecording$)&&e.commentMode!==e.CommentMode.Email),n.Ib(3),n.Dc("ngIf",e.isScreenRecordingSupported&&!n.wc(41,52,e.currentScreenRecording$)&&(null==(t=n.wc(42,54,e.team$))?null:t.enable_recorder)&&!n.wc(43,56,e.recordingInProgress$)&&e.allowScreenRecording&&!n.wc(44,58,e.isGuest$)&&e.commentMode!==e.CommentMode.Email),n.Ib(5),n.Dc("ngIf",n.wc(46,60,e.currentScreenRecording$)&&e.commentMode!==e.CommentMode.Email),n.Ib(2),n.Dc("ngIf",!e.staticToolbarVisible&&e.allowAttachments),n.Ib(2),n.Dc("ngIf",e.allowEmailFeature&&e.canManageEmail&&!e.forAutomation&&!e.isChatView&&!e.isChatViewModal),n.Ib(2),n.Dc("ngIf",e.showCommentButton),n.Ib(1),n.Dc("ngIf",e.allowAddToDoc)}}function Ji(e,t){if(1&e){const e=n.dc();n.cc(0,"div",170),n.cc(1,"div",171),n.gc(2,172),n.bc(),n.cc(3,"cu-badge-input-fields",173),n.qc("selected",function(t){return n.Uc(e),n.uc().insertVariable(t)}),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(3),n.Dc("show",8)("inputBadges",e.variableMenuItemOnly)}}function eo(e,t){}function to(e,t){if(1&e&&(n.cc(0,"div"),n.bd(1,eo,0,0,"ng-template",65),n.bc()),2&e){n.uc();const e=n.Rc(42);n.Ib(1),n.Dc("ngTemplateOutlet",e)}}function io(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-mention-selector-dropdown",174,175),n.qc("onSelect",function(t){return n.Uc(e),n.uc().addMentionToEditor(t)}),n.vc(2,"membersToUsers"),n.vc(3,"async"),n.vc(4,"async"),n.bc()}if(2&e){const e=n.uc();n.Dc("users",n.wc(2,9,e.projectMembers))("meUser",e.allowMentionSelf?null:n.wc(3,11,e.sharedData.currentUser))("weights",e.weights)("fromRect",e.mentionRect)("userGroups",e.userGroups)("subcategory",e.subcategory)("task",e.task)("isGuest",n.wc(4,13,e.isGuest$))("taskUserGroups",e.taskUserGroups)}}function oo(e,t){1&e&&n.Xb(0,"cu-cloud-storage-deny-msg")}function no(e,t){if(1&e){const e=n.dc();n.cc(0,"div",180),n.qc("click",function(){return n.Uc(e),n.uc(2).onCreateDoc.emit()}),n.Xb(1,"div",181),n.bc()}}function so(e,t){if(1&e){const e=n.dc();n.bd(0,no,2,0,"div",176),n.cc(1,"cu-cloud-buttons-dropdown",177),n.qc("onCloudAdded",function(t){return n.Uc(e),n.uc().addCloudAttachment(t.file,t.source)})("onFilesSelected",function(t){return n.Uc(e),n.uc().fileAdded(t)})("onCreateDoc",function(){return n.Uc(e),n.uc().onCreateDoc.emit()}),n.cc(2,"div",178),n.Xb(3,"div",179),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Dc("ngIf",e.allowNewDoc&&e.commentMode!==e.CommentMode.Email),n.Ib(1),n.Dc("parentId",e.parentId)("type",e.attachmentType)("permanent",!1)("allowNewDoc",!1)}}const co=function(){return{}};function ao(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-slash-command",182,183),n.qc("applyCommand",function(t){return n.Uc(e),n.uc().applySlashCommand(t)})("cancelCommand",function(t){return n.Uc(e),n.uc().hideSlashCommand(null==t?null:t.replace,null==t?null:t.updateSelection)}),n.vc(2,"async"),n.vc(3,"membersToUsers"),n.vc(4,"async"),n.bc()}if(2&e){const e=n.uc();n.Dc("alwaysVisible",!0)("dropdownPlacement",null==e.embedSlashCommandInfo?null:e.embedSlashCommandInfo.placement)("allowedCommands",e.allowedCommandsInput?e.allowedCommandsInput:e.allowedCommands)("allowedCommandsExtra",e.allowedCommandsExtra)("currentValues",n.Gc(17,co))("options",n.Gc(18,co))("meUser",n.wc(2,11,e.sharedData.currentUser))("users",n.wc(3,13,e.projectMembers))("weights",e.weights)("userGroups",e.userGroups)("team",n.wc(4,15,e.sharedData.compatCurrentTeam$))}}function ro(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-popup",185),n.qc("onRemove",function(){return n.Uc(e),n.uc(2).removeHoveredTaskMention()})("onEnter",function(){return n.Uc(e),n.uc(2).handleHover(!0)})("onLeave",function(){return n.Uc(e),n.uc(2).handleHover(!1)}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("taskId",null==e.hoverData||null==e.hoverData.value?null:e.hoverData.value.task_id)("weights",e.weights)}}function lo(e,t){if(1&e&&n.bd(0,ro,1,2,"cu-task-popup",184),2&e){const e=n.uc();n.Dc("ngIf","task_mention"===(null==e.hoverData?null:e.hoverData.blotName))}}const uo=function(e,t){return{id:e,title:t,icon:"cu2-comment-3-thin"}},mo=function(e,t){return{id:e,title:t,icon:"cu2-email-3"}};function po(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-dropdown-list-item",186),n.qc("click",function(t){n.Uc(e);const i=n.uc();return i.changeMode(i.CommentMode.Comment,t)}),n.bc(),n.cc(1,"cu-dropdown-list-item",186),n.qc("click",function(t){n.Uc(e);const i=n.uc();return i.changeMode(i.CommentMode.Email,t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("item",n.Ic(2,uo,e.CommentMode.Comment,e.commonStringsService.commentText)),n.Ib(1),n.Dc("item",n.Ic(5,mo,e.CommentMode.Email,e.commonStringsService.sendEmailText))}}function ho(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-paywall-popover",187),n.qc("upgradeClicked",function(){return n.Uc(e),n.uc().clickedUpgrade()}),n.bc()}if(2&e){const e=n.uc();n.Dc("badge",e.emailPaywallUnlimitedModalMeta.badge)("title",e.emailPaywallUnlimitedModalMeta.description)("image",e.emailPaywallUnlimitedModalMeta.image)("text",e.emailPaywallUnlimitedModalMeta.boldDescription)("upgradeButtonText",e.emailPaywallUnlimitedModalMeta.buttonText)("emailSubject",e.emailPaywallUnlimitedModalMeta.emailSubject)("features",e.emailPaywallUnlimitedModalMeta.features)("learnMore",e.emailPaywallUnlimitedModalMeta.learnMore)("textBelowImage",e.emailPaywallUnlimitedModalMeta.textBelowImage)("imageWidth",180)("flipBadge",!0)}}function fo(e,t){if(1&e){const e=n.dc();n.cc(0,"div",196),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc(2).selectSignature(i)}),n.cc(1,"div",197),n.dd(2),n.bc(),n.bc()}if(2&e){const e=t.$implicit;n.Ib(2),n.fd(" ",e.name," ")}}function bo(e,t){if(1&e){const e=n.dc();n.cc(0,"div",198),n.qc("click",function(){return n.Uc(e),n.uc(2).openEmailSettings(!0,!0)}),n.cc(1,"div",197),n.dd(2," + "),n.ac(3),n.gc(4,199),n.Zb(),n.bc(),n.bc()}}function go(e,t){1&e&&n.Xb(0,"div",200)}function _o(e,t){if(1&e){const e=n.dc();n.cc(0,"div",201),n.qc("click",function(){return n.Uc(e),n.uc(2).openEmailSettings(!0)}),n.cc(1,"div",197),n.dd(2," Manage signatures "),n.bc(),n.Xb(3,"div",202),n.bc()}}const vo=function(){return{suppressScrollX:!0}};function ko(e,t){if(1&e&&(n.cc(0,"div",188),n.cc(1,"div",189),n.gc(2,190),n.bc(),n.cc(3,"div",191),n.bd(4,fo,3,1,"div",192),n.bd(5,bo,5,0,"div",193),n.bc(),n.bd(6,go,1,0,"div",194),n.bd(7,_o,4,0,"div",195),n.bc()),2&e){const e=n.uc();n.Ib(3),n.Dc("perfectScrollbar",n.Gc(6,vo)),n.Ib(1),n.Dc("ngForOf",e.availableSignatures)("ngForTrackBy",e.trackById),n.Ib(1),n.Dc("ngIf",e.manageSignatures&&!(null!=e.availableSignatures&&e.availableSignatures.length)),n.Ib(1),n.Dc("ngIf",e.manageSignatures),n.Ib(1),n.Dc("ngIf",e.manageSignatures)}}const yo=function(e){return{"comment-bar_active":e}},wo=["*"];let xo=(()=>{class e{constructor(e,t,i,o,s,c,a,r,l,d,u,m,p,g,k,w,x,I,T,C,D,O,S,E,P,j,U,R,M,F){this.dataService=e,this.sharedData=t,this.elementRef=i,this.renderer=o,this.viewTaskService=s,this.sharedTaskService=c,this.uploaderService=a,this.helpers=r,this.taskMentionService=l,this.changeDetector=d,this.zone=u,this.minimizeTasksKeeperService=m,this.store=p,this.quillHelpersService=g,this.localStorage=k,this.frameHelperService=w,this.httpSession=x,this.commentsHelperService=I,this.domService=T,this.googleDriveService=C,this.dropboxService=D,this.oneDriveService=O,this.boxService=S,this.sharedDocService=E,this.screenRecorderService=P,this.injector=j,this.modal=U,this.embedService=R,this.commonStringsService=M,this.commentBarStringsService=F,this.destroy$=new A.a,this.project$=new $.a(null),this.task$=new $.a(null),this.selectedSignature$=new $.a(null),this.isActive$=new $.a(!1),this.debounceCommenting=new A.a,this.team$=this.store.select(h.getTeam),this.isFreePlan$=this.team$.pipe(Object(y.a)(e=>e.plan_id===se.f.FREE)),this.isGuest$=this.store.select(h.isGuestTeam),this.emailPaywallUnlimitedModalMeta=b.j,this.unfurlUrlMenuData=[],this.blockHandleMenuData=[],this.isWindows=Object(f.g)(),this.openModals=0,this.fileUploading=!1,this.submitAfterUploading=!1,this.linkUnfurling=0,this.CommentMode=B.b,this.updatingEmails=!1,this.emailUsers={[b.g.To]:[],[b.g.Cc]:[],[b.g.Bcc]:[]},this.RecipientType=b.g,this.UserWeightType=v.c,this.emailSubject="",this.collapseEmailReply=!0,this.sigDropOpen=!1,this.staticToolbarVisible=!1,this.inTable=!1,this.hideEmailPlaceholder=!1,this.attachmentType=1,this.assignedComments=!0,this.loading=!1,this.listenForPaywallError=!1,this.disableUserMention=!1,this.slashCommandSupport=!1,this.showReplyTo=!1,this.canManageEmail=!1,this.slashCommandCustom=!1,this.staticToolbar=!1,this.disableKeySubmit=!1,this.showAnyone=!1,this.showUnassign=!0,this.popupInBody=!1,this.saveDraft=!0,this.allowEmailFeature=!1,this.commentMode=B.b.Comment,this.allowNewDoc=!1,this.allowAddToDoc=!1,this.autoAssignWhenMention=!1,this.allowAddFollowers=!1,this.allowAddEmailFollowers=!1,this.allowAttachments=!0,this.allowScreenRecording=!0,this.showCommentButton=!0,this.manageSignatures=!0,this.signatures=[],this.forAutomation=!1,this.allowMentionSelf=!1,this.isMainTask=!1,this.isChatView=!1,this.isChatViewModal=!1,this.variableMenuItemOnly=[],this.onChangeOpenState=new n.o,this.onSubmit=new n.o,this.onSubmitToDesc=new n.o,this.isTyping=new n.o,this.onScrollToComment=new n.o,this.onCreateDoc=new n.o,this.onEmailUserAction=new n.o,this.onCommentChange=new n.o,this.onCancel=new n.o,this.onActivate=new n.o,this.onMentionOpen=new n.o,this.onMentionClose=new n.o,this.onBody=new n.o,this.selectedSignature=this.selectedSignature$.asObservable(),this.AttachmentSource=K.a,this.cloudList=Q.e,this.cloudData=Q.c,this.trackByValue=_.f,this.trackById=Object(_.d)("id"),this.isScreenRecordingSupported=ae.a,this.hideScreenRecordingPopover=this.localStorage.get("hide-screen-recording-popover"),this.currentScreenRecording$=new $.a(void 0),this.recordingInProgress$=this.screenRecorderService.recordingInProgress$,this.TeamPlan=se.f,this.clipRecordingAttachments=[],this.allowedCommands=Object.assign(Object.assign({},de.Ib),{[de.f.key]:!0,[de.ab.key]:!0,[de.i.key]:!0,[de.h.key]:!0,[de.g.key]:!0,[de.j.key]:!0,[de.d.key]:!0,[de.Eb.key]:!0,[de.ob.key]:!0,[de.T.key]:!0,[de.K.key]:!1,[de.L.key]:!1,[de.M.key]:!1,[de.m.key]:!1,[de.F.key]:!0}),this.allowedBgColors=X.E}get taskMentionsModule(){return this.editor&&this.editor.getModule("taskMentions")}get mentionsModule(){return this.editor&&this.editor.getModule("mentions")}get slashCommandsModule(){return this.editor&&this.editor.getModule("slashCommands")}get syntaxModule(){return this.editor&&this.editor.getModule("syntax")}get emojiModule(){return this.editor&&this.editor.getModule("emoji")}get pasteImageModule(){return this.editor&&this.editor.getModule("pasteImage")}get hoverModule(){return this.editor&&this.editor.getModule("hover")}get mentionSelectorComponent(){return this.mentionSelector||this.mentionSelectorDropdown}ngOnInit(){this.initialSignature&&this.selectSignature(this.initialSignature),this.modal.openModal.pipe(Object(w.a)(this.destroy$)).subscribe(()=>this.openModals++),this.modal.closeModal.pipe(Object(x.a)(150),Object(w.a)(this.destroy$)).subscribe(()=>this.openModals--),this.team$.pipe(Object(I.a)(e=>!(!e||!e.id)&&this.isMainTask),Object(T.a)(1),Object(w.a)(this.destroy$)).subscribe(e=>{this.onEmailUserAction.emit({type:b.e.FetchAuthedEmails})}),this.listenForPaywallError&&this.store.pipe(Object(V.select)(h.getPopEmailLimitPaywall),Object(I.a)(e=>!!e&&!!this.parentId&&+this.parentId==+e),Object(w.a)(this.destroy$)).subscribe(()=>{this.openPaywallModal(),this.store.dispatch(new p.wb)})}ngAfterViewInit(){const e=Object(L.a)(()=>this.submitComment(),150),t={id:this.editorId,placeholder:this.placeholder||(this.slashCommandSupport?this.commentMode===B.b.Email?this.commentBarStringsService.saySomethingText:this.commentBarStringsService.commentOrSlashCommentText:$localize`:@@common_add-comment:Add comment`),theme:this.staticToolbar?"snow":"bubble",formats:["bold","italic","underline","strike","background","code","code-block","blockquote","link","list","user_mention","attachment","linebreak","grammarly","task_mention","comment_mention","slash_command","emoticon","frame","indent","data-size",...this.forAutomation?["automation_variable"]:[]],modules:{toolbar:{container:this.toolbar&&this.toolbar.nativeElement,handlers:{blockquote:Object(oe.a)("blockquote",()=>this.editor),"code-block":Object(oe.a)("code-block",()=>this.editor)}},storage:!0,history:!0,keyboard:{bindings:Object.assign(Object.assign({submit:{key:"Enter",shiftKey:!1,shortKey:!1,handler:(t,i)=>!(!this.disableKeySubmit&&!i.format["code-block"])||this.commentMode===B.b.Email||!(!this.sharedData.currentUser.value||!this.sharedData.currentUser.value.post_with_cmd)||void this.zone.run(e)},commandSubmit:{key:"Enter",shiftKey:!1,shortKey:!0,handler:()=>{this.disableKeySubmit||this.zone.run(()=>{this.submitComment()})}}},Object(q.b)(this.getEditor.bind(this),this.getPostWithCmd.bind(this),this.getEditorContainer.bind(this),!0)),{arrow_top:{key:z.a.ARROW_UP,handler:()=>{if(this.commentsList){if(this.editor.editor.isBlank()){let e;for(let t=this.commentsList.length-1;t>=0;t--)if(this.commentsList[t].user.id===this.user.id){e=this.commentsList[t];break}e&&this.viewTaskService.onLastCommentEdit.emit(e.id)}}else this.editor.editor.isBlank()&&this.zone.run(()=>{const e=this.viewTaskService.task.value.history.find(e=>"comment"===e.field&&e.comment.user.id===this.sharedData.currentUser.value.id);e&&this.viewTaskService.onLastCommentEdit.emit(e.comment.id),this.editor.root.blur(),this.cancelEditor()});return!0}}})},clipboard:{matchers:Object(Y.a)(this.getEditor.bind(this),()=>!0)},table:{tableTools:{zIndex:1e3}},dragDropBlocks:Object.assign(Object.assign({},H.b),{allowHandleBlock:!0,allowTurnInto:!0,allowCopyLink:!1,dropdownContainer:this.blockHandleDropdown.nativeElement,onShow:(e,t,i)=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.blockHandleCommit=t,this.blockHandleSelect=i,this.changeDetector.detectChanges()})},onArrowUp:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowDown:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowLeft:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowRight:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})}}),pasteImage:{onPaste:e=>{e&&e.length>0&&this.allowAttachments&&this.uploaderService.addFiles(e,this.id)}},pasteLinkOverText:!0,pasteInList:!0,pasteInTable:!0,dnd:!0,taskMentions:{sessionId:this.httpSession.getSessionId(),onOpen:()=>{this.zone.run(()=>{this.taskMention.insertTaskSelector()})}},hover:{onClick:(e,t)=>{if(e.blotName===J.a.blotName)this.sharedTaskService.clickTaskLink({id:e.value.task_id},t);else if(e.blotName===ce.a.blotName){const i=e.value;this.sharedDocService.clickDocLink(this.injector,i.teamId,i.viewId,i.pageId,t)}},onShow:(e,t)=>{this.zone.run(()=>{this.hoverData=e,this.hoverRect=t,this.changeDetector.detectChanges(),this.taskPopupDropdown&&this.taskPopupDropdown.open()})},onHide:()=>{this.zone.run(()=>{this.hoverData=null,this.hoverRect=null,this.changeDetector.detectChanges(),this.taskPopupDropdown&&this.taskPopupDropdown.close()})}},slashCommands:!!this.slashCommandSupport&&{id:this.editorId,sessionId:this.httpSession.getSessionId()},unfurlUrl:{dropdownContainer:this.unfurlUrlDropdown.nativeElement,getBookmarkEmbedPromise:e=>this.dataService.getMetadataFromUrl(e).toPromise(),getCheckEmbedHeaderPromise:e=>this.embedService.checkHeaders(e).pipe(Object(y.a)(()=>""),Object(C.a)(()=>Object(U.a)("site is not supported"))).toPromise(),onShow:(e,t,i,o,n)=>{this.zone.run(()=>{this.unfurlUrlMenuData=t,this.unfurlUrlonCommit=o,this.unfurlUrlonSelect=n,this.changeDetector.detectChanges()})},onHide:()=>{setTimeout(()=>{this.taskMentionService.updateDocMentions()},100)},onArrowUp:e=>{this.zone.run(()=>{this.unfurlUrlMenuData=e,this.changeDetector.detectChanges()})},onArrowDown:e=>{this.zone.run(()=>{this.unfurlUrlMenuData=e,this.changeDetector.detectChanges()})},onEnter:()=>{}},magicUrl:{unfurlDocLink:!0,embedDocLink:!0,linkHandler:e=>{e&&e.data&&("google"===e.type?(this.linkUnfurling++,this.dataService.googleDriveAddById({type:this.parentId?this.attachmentType:4,parent:this.parentId||this.project$.value.id,file_id:e.data.id,permanent:!1}).subscribe(t=>{if(t&&t.success&&t.attachment){const i=this._composeCloudAttachmentData(t.attachment,2);Object(G.b)(this.editor,e.link,[{insert:"\n"},{insert:{attachment:i}}])}this.linkUnfurling--,this.checkUploading()},e=>{this.linkUnfurling--,this.checkUploading()})):"custom-task-id"===e.type&&(this.linkUnfurling++,this.dataService.getTask(e.data.customId,!1,!0,!1,{custom_task_ids:"true",team_id:e.data.teamId}).pipe(Object(D.a)(()=>{this.linkUnfurling--,this.checkUploading()})).subscribe(t=>{Object(G.b)(this.editor,e.link,[{insert:{task_mention:this.taskMentionService.getTaskMentionObject(t)},attributes:{link:null}}])})))},onClick:(e,t)=>{const i=e.target.getAttribute("href");if(!i)return;const o=i.match(ee.d);return!o||o.length<3?void 0:this.commentLinkClick(e,o[1],o[2])},onCommentClick:(e,t)=>{const i=Z.a.value(t.domNode);return this.commentLinkClick(e,i.taskId,i.commentId)}},syntax:"undefined"!=typeof hljs&&{languages:N.a},markdown:!!this.sharedData.currentUser.value.markdown_shortcuts&&{formats:{blockquote:!0,"code-block":!0,code:!0,bold:!0,italic:!0,strikethrough:!0}},matcher:!0,emoji:{onQuery:e=>this.emojiDropdown.filter(e).length>0,onShowDialog:(e,t)=>{this.emojiRect=t,this.changeDetector.detectChanges(),this.emojiDropdown.open()},onHideDialog:()=>{this.emojiDropdown.close(),this.emojiRect=null},onKeyPress:e=>this.emojiDropdown.handleKey(e)},mentions:{dropdownContainer:this.mentionSelector&&this.mentionSelector.elementRef.nativeElement,onQuery:e=>!this.disableUserMention&&this.mentionSelectorComponent.filter(e),onShowDialog:(e,t)=>{this.zone.run(()=>{this.mentionRect=t,this.changeDetector.detectChanges(),this.mentionSelectorComponent.open()})},onHideDialog:()=>{this.zone.run(()=>{this.mentionSelectorComponent.close(),this.mentionRect=null})},onKeyPress:e=>{this.mentionSelectorComponent.handleKey(e)}},linkEmbedding:{resolveLinkData:e=>this.frameHelperService.resolveUrlData(e).toPromise()}}};t.bounds=this.editorContainer.nativeElement,this.zone.runOutsideAngular(()=>{this.editor=new o.b(this.editorContainer.nativeElement,t),this.editor.root.classList.add("focus-visible"),Object(R.a)(this.editor,W.h.SELECTION_CHANGE).pipe(Object(w.a)(this.destroy$)).subscribe(()=>{this.checkHidePlaceholder()}),Object(R.a)(this.editor,W.h.EDITOR_CHANGE).pipe(Object(O.a)(300),Object(w.a)(this.destroy$)).subscribe(()=>{this.saveCommentToLocalstorage(null,!0)}),Object(R.a)(this.editor,W.h.EDITOR_CHANGE).pipe(Object(S.a)(this.content?1:0),Object(w.a)(this.destroy$)).subscribe(()=>{this.onCommentChange.emit({content:this.commentsHelperService.formatCommentForEditor(this.getContent(),this.userGroups,this.sharedData.currentUser.value.markdown_shortcuts,this.projectMembers).comment,assignee:this.commentAssignee&&"user"===this.commentAssignee.type?this.commentAssignee.user:void 0,groupAssignee:this.commentAssignee&&"group"===this.commentAssignee.type?this.commentAssignee.group:void 0})}),this.staticToolbar&&Object(R.a)(this.editor,W.h.EDITOR_CHANGE).pipe(Object(w.a)(this.destroy$)).subscribe(([e,t,i,o])=>{if(e!==W.h.SELECTION_CHANGE)return;const n=this.editor.hasFocus()&&null!=t&&t.length>0&&o===W.i.USER;n!==this.staticToolbarVisible&&this.zone.run(()=>{this.staticToolbarVisible=n,this.changeDetector.markForCheck()})})}),this.editor.theme.tooltip.root.querySelector("input[data-link]").dataset.link=this.commonStringsService.typeUrlAndEnterText,this.isActive$.pipe(Object(E.a)(),Object(w.a)(this.destroy$)).subscribe(e=>{this.onChangeOpenState.emit(e)}),this.isActive$.pipe(Object(w.a)(this.destroy$)).subscribe(e=>{this.processCommenting(e)}),this.isActive$.pipe(Object(P.a)(e=>e?Object(R.a)(document,"click",{passive:!0}):M.a),Object(I.a)(e=>this.commentMode!==B.b.Email&&!this.updatingEmails&&!this.elementRef.nativeElement.contains(e.target)&&e.target.parentNode&&this.editor&&0===this.quillHelpersService.getDeltaLength(this.editor.getContents(),!0,!1)&&this.noEmailFieldsSet()&&(this.commentMode===B.b.Comment||0===this.openModals)&&this.checkDropdowns()&&null===this.helpers.closest(e.target,"cu-email-comment__footer")&&null===this.helpers.closest(e.target,"cu-email-communicators__sender")&&null===this.helpers.closest(e.target,"task-selector_task-mentions")&&null===this.helpers.closest(e.target,"cu-email-template-dropdown__row")&&null===this.helpers.closest(e.target,"cloud-storage-link")&&null===this.helpers.closest(e.target,"ignore-click-out")&&(this.commentMode===B.b.Comment||null===this.helpers.closest(e.target.parentNode,"cu-email-communicators__user"))),Object(w.a)(this.destroy$)).subscribe(()=>{this.editor.setText(""),this.cancelEditor()}),this.debounceCommenting.pipe(Object(O.a)(1e4)).pipe(Object(w.a)(this.destroy$)).subscribe(()=>{this.sendWsMessage(!1)}),this.editor.on(W.h.SELECTION_CHANGE,e=>{if(e?this.processCommenting(!0):this.sendWsMessage(!1),this.dropFileParentId&&(this.viewTaskService.nestedEditorOpen=!!e),e){const t=this.editor.getFormat(e.index),i=this.editor.getContents(e.index,e.length);this.zone.run(()=>{this.inTable=!!t["table-cell-line"]||!(!t.list||!t.list.cell)||i.ops.some(e=>e.attributes&&(e.attributes["table-cell-line"]||e.attributes["table-col"])),this.changeDetector.detectChanges()})}}),this.editor.on(W.h.TEXT_CHANGE,()=>{Object(X.u)(this.editor.getContents())||this.activateEditor(!1)}),Object(X.B)(this.editor),this.editor.clipboard.addMatcher(Node.TEXT_NODE,(e,t)=>(setTimeout(()=>{this.formatLinks()},200),t)),Object(R.a)(this.elementRef.nativeElement,"click",{passive:!0}).pipe(Object(w.a)(this.destroy$)).subscribe(e=>{"BUTTON"===e.target.nodeName||this.isActive$.value||this.activateEditor()}),this.uploadAttachmentFromExtensionHandler=this.renderer.listen("document","CU_CHROME_EXTENSION_START_UPLOAD",()=>{if(this.id){const[e,t]=this.id.split("_");if("task"===e&&t&&this.minimizeTasksKeeperService.getContent(t)&&this.minimizeTasksKeeperService.getContent(t).content&&this.minimizeTasksKeeperService.getContent(t).content.content&&this.minimizeTasksKeeperService.getContent(t).content.content.ops){const e=this.minimizeTasksKeeperService.getContent(t).content.content.ops;let i=!1;e.reverse().forEach(e=>{!i&&e.insert&&e.insert.attachment&&(this.addAttachmentToEditor(e.insert.attachment),i=!0,this.helpers.dispatchEvent("CU_CHROME_EXTENSION_END_UPLOAD",{taskId:t}))})}}}),this.viewTaskService.onCommentAddFiles.pipe(Object(I.a)(e=>this.needToHandleFile(e.tag)),Object(w.a)(this.destroy$)).subscribe(({files:e})=>{this.uploaderService.addFiles(e,this.id)}),this.uploaderService.onAdded.pipe(Object(I.a)(e=>this.needToHandleFile(e.tag)),Object(y.a)(e=>e.data),Object(w.a)(this.destroy$)).subscribe(e=>{this.addAttachmentToEditor(e)}),this.uploaderService.onProgress.pipe(Object(I.a)(e=>this.needToHandleFile(e.tag)),Object(y.a)(e=>e.data),Object(w.a)(this.destroy$)).subscribe(e=>{const t=document.querySelector(`[data-temp-id="${e.id}"]`);if(t){this.editor.history.lastRecorded=Date.now();const i=t.querySelector("[data-progress-bar]");i&&i instanceof HTMLElement&&(i.style.width=e.loadPercent+"%")}}),this.uploaderService.onUpload.pipe(Object(I.a)(e=>this.needToHandleFile(e.tag)),Object(w.a)(this.destroy$)).subscribe(e=>{const t=document.querySelector(`[data-temp-id="${e.data.id}"]`);if(t){if(this.editor.history.lastRecorded=Date.now(),"webm"===e.data.result.extension&&e.formDataFields.clip){this.clipRecordingAttachments.push(e.data.result);const i=o.b.find(t);if(i){const t=i.offset(this.editor.scroll),n=Object(X.i)(e.data.result.url,!0,!0);this.editor.updateContents((new o.a).retain(t).delete(1).insert({frame:n},{"data-size":"large"})),this.editor.hasFocus()||this.editor.setSelection(t+1,o.b.sources.API)}}else try{const i=t.querySelector("[data-progress]");if(t.setAttribute("data-id",e.data.result.id),t.setAttribute("data-attachment-id",e.data.result.id),t.setAttribute("data-load-result",JSON.stringify(e.data.result)),i.classList.add("progress_complete"),t.hasAttribute("data-file")){const i=JSON.parse(t.dataset.file);t.setAttribute("data-file",JSON.stringify(Object.assign({},i,e.data.result)))}}catch(i){}setTimeout(()=>{t.classList.add("comment-attachment_success")},500)}this.fileUploading&&setTimeout(()=>{this.checkUploading()})}),this.uploaderService.onError.pipe(Object(w.a)(this.destroy$)).pipe(Object(I.a)(e=>this.needToHandleFile(e.tag)),Object(y.a)(e=>e.data)).subscribe(e=>{const t=document.querySelector(`[data-temp-id="${e.id}"]`);t&&t.classList.add("comment-attachment_error"),e.data&&e.data.ECODE&&("GBUSED_005"===e.data.ECODE?this.paywallPopover.show():this.store.dispatch(new k.b({ECODE:e.data.ECODE,err:e.data.err,originalError:e.data,timeout:1e4}))),this.fileUploading&&setTimeout(()=>{this.checkUploading()})}),this.content||this.viewTaskService.task.pipe(Object(j.a)()).subscribe(()=>{this.editor.setText(""),this.commentAssignee=this.defaultAssignee?{type:"user",user:this.defaultAssignee}:void 0}),this.editAttachmentHandler=this.renderer.listen("document",W.a,e=>{this.syntaxModule&&this.syntaxModule.options&&(this.syntaxModule.options.interval=e.editing?2147483647:1e3)}),this.slashCommandCustom||Object(R.a)(document,ne.a).pipe(Object(w.a)(this.destroy$)).subscribe(e=>{if(this.slashCommand||!e||!e.detail||e.detail.id!==this.editorId||e.detail.sessionId!==this.httpSession.getSessionId())return;this.hideSlashCommand();const t=this.editor;if(!t)return;this.embedSlashCommandInfo=Object(ue.c)(t),this.embedSlashCommandInfo.container=e.detail.node.children[0];const i=this.embedSlashCommandInfo.container.getBoundingClientRect();this.embedSlashCommandInfo.placement=window.innerWidth-i.right>500?"right":window.innerWidth-i.right<250?"left":i.top>window.innerHeight/2?"top":"bottom",this.embedSlashCommandInfo.view=this.domService.appendTemplateToElement(this.slashCommandTemplate,this.embedSlashCommandInfo.container,this.slashCommandContainer),this.changeDetector.detectChanges(),this.slashCommand?this.slashCommand.activate(e.detail.replace,"","",e.detail.defaultCommand):setTimeout(()=>{this.slashCommand&&this.slashCommand.activate(e.detail.replace,"","",e.detail.defaultCommand)})}),this.content&&this.editor.setContents(this.forAutomation?this.content:this.commentsHelperService.commentToDelta({comment:this.content})),this.restoreSavedComment()}ngOnChanges(e){e.uploaderUrl&&e.uploaderUrl.currentValue&&this.uploaderService.setOptions({url:e.uploaderUrl.currentValue}),e.parentId&&this.parentId&&this.uploaderService.setOptions({fieldName:"attachment",formDataFields:{parent:this.parentId,type:this.attachmentType,permanent:!1}}),e.project&&e.project.currentValue&&this.project$.next(e.project.currentValue),this.editor&&e.loading&&e.loading.currentValue!==e.loading.previousValue&&(e.loading.currentValue?this.editor.disable():this.editor.enable()),e.id&&(this.hasId=this.id&&-1===this.id.indexOf("null"),Object(F.a)(0).pipe(Object(w.a)(this.destroy$)).subscribe(()=>{const e=this.screenRecorderService.getRecording(this.id);e&&this.setCurrentScreenRecording(this.id,e)})),(e.saveDraft||e.localStorageId)&&this.restoreSavedComment(),e.assignedComments&&(this.allowedCommands[de.d.key]=this.assignedComments),(e.assignedUserId||e.projectMembers)&&this.projectMembers&&this.assignedUserId&&(this.commentAssignee={type:"user",user:this.projectMembers.find(e=>e.user.id===this.assignedUserId).user}),(e.assignedGroupId||e.userGroups)&&this.userGroups&&this.assignedGroupId&&(this.commentAssignee={type:"group",group:this.userGroups.find(e=>e.id===this.assignedGroupId)}),e.allowEmailFeature&&!this.allowEmailFeature&&(this.commentMode=B.b.Comment),e.signatures&&this.setAvailableSignatures()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.editAttachmentHandler&&(this.editAttachmentHandler(),this.editAttachmentHandler=null),this.uploaderTimer&&(clearInterval(this.uploaderTimer),this.uploaderTimer=null),this.uploadAttachmentFromExtensionHandler&&(this.uploadAttachmentFromExtensionHandler(),this.uploadAttachmentFromExtensionHandler=null),this.hoverModule&&this.hoverModule.destroy(),this.editor&&(Object(X.e)(this.editor),this.editor=null)}documentPaste(e){e.defaultPrevented||Object(ie.a)(e)||this.pasteImageModule&&(this.activateEditor(),this.pasteImageModule.handlePaste(e))}needToHandleFile(e){return e===this.id&&!this.viewTaskService.commentEditorOpen&&!this.viewTaskService.nestedEditorOpen||this.editor.hasFocus()||e===this.dropFileParentId&&this.editor.hasFocus()}activateEditor(e=!0,t=!1){this.isActive$.next(!0),e&&this.editor&&(this.editor.focus(),t&&this.editor.setSelection(this.editor.getLength())),this.onActivate.emit()}noEmailFieldsSet(){var e,t,i;return this.commentMode===B.b.Comment||!this.emailUsers||!(null===(e=this.emailUsers[b.g.To])||void 0===e?void 0:e.length)&&!(null===(t=this.emailUsers[b.g.Cc])||void 0===t?void 0:t.length)&&!(null===(i=this.emailUsers[b.g.Bcc])||void 0===i?void 0:i.length)}cancelEditor(){this.isActive$.next(!1),this.onCancel.emit()}clearReplyToId(){this.replyToId=null,this.emailBodies=null,this.changeDetector.markForCheck()}checkDropdowns(){var e,t,i,o,n,s,c,a,r,l,d;return!((null===(t=null===(e=this.emailCommunicators)||void 0===e?void 0:e.dropdown)||void 0===t?void 0:t.isOpen)||(null===(n=null===(o=null===(i=this.userList)||void 0===i?void 0:i.userListDropdown)||void 0===o?void 0:o.dropdown)||void 0===n?void 0:n.isOpen)||(null===(s=this.sigDropdown)||void 0===s?void 0:s.isOpen)||(null===(c=this.sigDropdown2)||void 0===c?void 0:c.isOpen)||(null===(r=null===(a=this.emojiPickerDropdown)||void 0===a?void 0:a.dropdown)||void 0===r?void 0:r.isOpen)||(null===(d=null===(l=this.emailTemplateDropdown)||void 0===l?void 0:l.dropdown)||void 0===d?void 0:d.isOpen))}selectSignature(e){this.selectedSignature$.next(e),setTimeout(()=>this.activateEditor())}selectTemplate({template:e}){if(e&&e.content){let t=this.editor.getContents();t&&t.ops||(t={ops:[]});const i=JSON.parse(e.content);t.ops=Object(X.u)(i)?[...i.ops]:[...t.ops,...i.ops],this.setContent({content:t})}e&&e.subject&&(this.emailSubject=e.subject,e&&e.content||this.saveCommentToLocalstorage()),this.changeDetector.markForCheck()}openPaywallModal(){this.modal.open({modifier:"cu-paywall-popover__modal cu-paywall-popover__modal-business-email",headerModifier:"cu-modal__header-paywall",dialogModifier:"cu-modal__dialog-paywall",content:this.paywallUnlimitedEmailTemplate})}previewSignature(){this.modal.openComponent(m,this.injector,{title:""}).instance.html=this.selectedSignature$.value.signature}processCommenting(e){this.debounceCommenting.next(e);const t=e&&this.quillHelpersService.getDeltaLength(this.editor.getContents())>0;this.sendWsMessage(t)}saveCommentToLocalstorage(e,t=!1){if(!this.saveDraft||!this.editor)return;const i=this.getContent();let o;t&&(this.templateContent=i),i.ops=i.ops.filter(e=>!(e.insert&&e.insert.task_mention&&!e.insert.task_mention.task_id));const n=this.commentMode;n===B.b.Email&&(o={},o.emailSubject=this.emailSubject,o.emailUsers=this.emailUsers),this.localStorageId?this.localStorage.set(this.localStorageId,{content:i,commentAssignee:this.commentAssignee,commentMode:n,emailData:o}):(e||this.viewTaskService.task.value)&&this.minimizeTasksKeeperService.setContent(e=e||this.viewTaskService.task.value.id,i,this.commentAssignee,n,o)}assignToUser(e){this.commentAssignee=e[0]?{type:"user",user:e[0]}:void 0,this.saveCommentToLocalstorage(),this.onCommentChange.emit({content:this.commentsHelperService.formatCommentForEditor(this.getContent(),this.userGroups,this.sharedData.currentUser.value.markdown_shortcuts,this.projectMembers).comment,assignee:this.commentAssignee?this.commentAssignee.user:void 0,groupAssignee:void 0}),this.editor.focus(),this.changeDetector.markForCheck()}assignToGroup(e){this.commentAssignee=e[0]?{type:"group",group:e[0]}:void 0,this.saveCommentToLocalstorage(),this.onCommentChange.emit({content:this.commentsHelperService.formatCommentForEditor(this.getContent(),this.userGroups,this.sharedData.currentUser.value.markdown_shortcuts,this.projectMembers).comment,assignee:void 0,groupAssignee:this.commentAssignee?this.commentAssignee.group:void 0}),this.editor.focus(),this.changeDetector.markForCheck()}uploadingChecker(){this.uploaderTimer&&(clearInterval(this.uploaderTimer),this.uploaderTimer=null),this.uploaderTimer=setInterval(()=>{this.checkUploading()},2e3)}checkUploading(){this.fileUploading=this.getFileUploading(),this.fileUploading||(this.uploaderTimer&&(clearInterval(this.uploaderTimer),this.uploaderTimer=null),this.changeDetector.markForCheck(),this.submitAfterUploading&&this.submitComment()),this.changeDetector.markForCheck()}getFileUploading(){return this.editor&&(this.helpers.hasNotUploadedAttachments(this.editor.getContents())||this.linkUnfurling>0)}checkPlan(){!this.team||this.team.plan_id!==se.f.FREE&&this.team.plan_id!==se.f.UNLIMITED||this.onEmailUserAction.emit({type:b.e.ThrowBusinessPaywall})}submitComment(e=!1){var t;if(this.submitAfterUploading=!1,!this.id||-1!==this.id.indexOf("null"))return;if(this.fileUploading=this.getFileUploading(),this.changeDetector.markForCheck(),this.fileUploading)return this.uploadingChecker(),void(this.submitAfterUploading=!0);const i=this.editor.getContents();if(!this.quillHelpersService.getDeltaLength(i))return void(this.forAutomation&&this.onBody.emit({html:null,delta:[]}));const n=this.commentsHelperService.formatCommentForEditor(i,this.userGroups,this.sharedData.currentUser.value.markdown_shortcuts,this.projectMembers),s=[],c=[];if([].forEach.call(document.querySelectorAll("[data-file-preview]"),e=>{let t,i,o;try{t=e.dataset.id,i="string"==typeof e.dataset.loadResult?JSON.parse(e.dataset.loadResult):e.dataset.loadResult,o="string"==typeof e.dataset.file?JSON.parse(e.dataset.file):e.dataset.file}catch(n){}t&&i&&o&&(i.title=o.name,c.push(i))}),n.comment.forEach((e,t)=>{if("attachment"!==e.type||0!=+e.attachment.id){if("attachment"===e.type){const t=c.filter(t=>t.id===e.attachment.id)[0];t&&(e.attachment=t,e.text=t.title,s.push(e.attachment))}}else n.comment.splice(t,1)}),this.commentAssignee&&("user"===this.commentAssignee.type?n.assignee=this.commentAssignee.user:n.group_assignee=this.commentAssignee.group),this.commentMode===B.b.Email&&this.clipRecordingAttachments.length&&this.clipRecordingAttachments.forEach(e=>s.push(e)),n.attachments=s,this.viewTaskService.task&&this.viewTaskService.task.value&&this.minimizeTasksKeeperService.clearLocalStorageItem(this.viewTaskService.task.value.id),this.localStorageId&&this.saveDraft&&this.localStorage.remove(this.localStorageId),this.threadFollowers&&(n.thread_followers=this.threadFollowers),e)this.onSubmitToDesc.emit({delta:i,comment:n});else{if(this.commentMode===B.b.Email){if(this.team&&this.team.plan_id===se.f.FREE&&this.team.email_usage>=100&&!this.forAutomation)return void this.openPaywallModal();let e;if(this.selectedSignature$.value)if(this.selectedSignature$.value.html)e=this.selectedSignature$.value.signature;else try{const t=new o.a(JSON.parse(this.selectedSignature$.value.signature)),i=this.commentsHelperService.formatCommentForEditor(t,this.userGroups,this.sharedData.currentUser.value.markdown_shortcuts,this.projectMembers);e=this.commentsHelperService.getCommentHTML({comment:i.comment},null,!1,!1,!1)}catch(a){e=""}const c=(i.ops||[]).reduce((e,t)=>(t&&t.insert&&t.insert.task_mention&&(e[t.insert.task_mention.task_id]=t.insert.task_mention.name),e),{});let r=this.commentsHelperService.getCommentHTML({comment:n.comment},null,!1,!1,!1,[],[],c,[],!1,!0);r+=this.commentsHelperService.composeThreadedEmail(this.emailBodies,c),r=Object(g.a)(r),e&&(r+="<br />"+e),!this.team||this.team.plan_id!==se.f.FREE&&this.team.plan_id!==se.f.UNLIMITED||(r+="<br />"+b.h),this.forAutomation&&this.onBody.emit({html:r,delta:i.ops});const l=this.emailUsers[b.g.To].map(e=>({email:e.email,name:e.username})),d=(this.emailUsers[b.g.Bcc]||[]).map(e=>({email:e.email,name:e.username})),u=(this.emailUsers[b.g.Cc]||[]).map(e=>({email:e.email,name:e.username}));if(!this.fromEmailUser||!this.fromEmailUser.account_id||!l.length&&!d.length&&!u.length)return void((null===(t=this.emailCommunicators)||void 0===t?void 0:t.popover)&&this.emailCommunicators.popover.show());const m={email:this.fromEmailUser.email};this.fromEmailUser.name&&(m.name=this.fromEmailUser.name);const p={account_id:this.fromEmailUser.account_id,subject:this.emailSubject,body:r,from:[m],to:l,cc:u,bcc:d};this.replyToId&&(p.reply_to_message_id=this.replyToId),n.email=p;const h=s.reduce((e,t)=>(e[t.id]=!0,e),{}),f=n.comment.filter(e=>"attachment"===e.type&&!h[e.attachment.id]).map(e=>e.attachment);f.length&&(n.attachments=[...n.attachments,...f])}this.onSubmit.emit(n)}}resetEmailInfo(){this.emailUsers={[b.g.To]:[],[b.g.Cc]:[],[b.g.Bcc]:[]},this.emailSubject="",this.updatingEmails=!1,this.threadFollowers=null,this.changeMode(B.b.Comment),this.replyToId=null,this.emailBodies=null,this.collapseEmailReply=!0,this.changeDetector.detectChanges()}clear(){this.editor.setText(""),this.editor.setContents([]),this.editor.history.clear(),this.editor.theme.tooltip.hide(),this.commentAssignee=void 0,this.defaultAssignee&&(this.commentAssignee={type:"user",user:this.defaultAssignee}),this.resetEmailInfo(),this.saveCommentToLocalstorage(),this.sendWsMessage(!1),this.changeDetector.markForCheck()}unAssignComment(){this.commentAssignee=null,this.changeDetector.markForCheck()}getContent(){const e=this.editor.getContents(),t={},i=document.querySelectorAll("[data-file-preview]");return[].forEach.call(i,e=>{let i=e.getAttribute("data-load-result");i&&(i=JSON.parse(i),t[i.id]={},t[i.id]["load-result"]=i,t[i.id].thumbnail_large=i.thumbnail_large)}),e.ops&&(e.ops=e.ops.filter(e=>!e.insert||!e.insert.slash_command),e.ops.forEach((i,o)=>{if(i.insert&&i.insert.attachment){if(0===i.insert.attachment.id)return void e.ops.splice(o,1);if(t[i.insert.attachment.id]){const e=i.insert.attachment;e["load-result"]=t[e.id]["load-result"],e.thumbnail_large=t[e.id].thumbnail_large}}})),e}setContent(e){if(e.content)return this.editor.setContents(e.content)}addAttachmentToEditor(e){this.activateEditor();const t=this.editor.getSelection(!0);if(t){const i=t.index,[n,s]=this.editor.getLine(i),c=n.formats(),a=(new o.a).retain(i);let r=2;"list"===n.statics.blotName?(a.insert("\n",Object.assign({},c)).insert({attachment:e},Object.assign(Object.assign({},c.list),{"wrapper-indent":c.indent,"in-list":c.list.list})),n.next&&"list-block-wrapper"===n.next.statics.blotName&&n.next.children.head&&"attachment"===n.next.children.head.statics.blotName&&(a.delete(1),r=n.next.length()+2)):a.insert({attachment:e}),this.editor.updateContents(a),this.editor.setSelection(i+r,o.b.sources.API)}}addDocToEditor(e){this.activateEditor();const t=this.editor.getSelection(!0);if(t){const i=t.index;this.editor.updateContents((new o.a).retain(i).insert({doc_embed:e}),o.b.sources.USER),this.editor.setSelection(i+2,o.b.sources.API)}}openUserMentions(){this.activateEditor();const e=this.editor.getSelection(!0);if(e){const t=e.index;this.editor.updateContents((new o.a).retain(t).insert("@")),this.editor.setSelection(t+1,o.b.sources.API)}}fileAdded(e){this.uploaderService.addFiles(e,this.id)}openTaskMentionEditor(e){e.preventDefault(),e.stopPropagation(),this.addTaskMentionToEditor(null,!0)}addTaskMentionToEditor(e=null,t){this.taskMentionsModule.addTaskMentionToEditor(e,t)}dismissTaskMention(){this.taskMentionsModule.dismissTaskMention()}closeTaskMention(){this.taskMentionsModule.closeTaskMention()}openTaskMention(){this.taskMentionsModule.isMentionListOpen=!0}formatLinks(){this.taskMentionService.updateMentions()}addEmojiToEditor(e){this.activateEditor(),this.emojiModule.insertEmoji({code:e.unified.toLowerCase(),name:e.name})}addMentionToEditor(e){this.activateEditor(),this.mentionsModule.insertMention(e.type,e.data),this.autoAssignWhenMention&&this.assignedComments&&(!this.commentAssignee||"user"===this.commentAssignee.type&&String(this.commentAssignee.user.id)===String(te.i.id))&&(e.type===re.a.User?this.commentAssignee={type:"user",user:e.data.user}:e.type===re.a.UserGroup&&(this.commentAssignee={type:"group",group:e.data.group}))}removeHoveredTaskMention(){this.hoverData&&this.hoverModule&&this.hoverModule.removeHoveredMention(this.hoverData.blot),this.taskPopupDropdown&&this.taskPopupDropdown.close()}handleHover(e){this.hoverModule&&this.hoverModule.shownData&&this.hoverModule.onHover(this.hoverModule.shownData,e)}_composeCloudAttachmentData(e,t){return(e=Object.assign({},e)).name||(e.name=e.title),e.type=e.extension,e.source=t,e.date=Date.now(),e.user=this.sharedData.currentUser.value,e["load-result"]=Object.assign({},e),e}addCloudAttachment(e,t){e=this._composeCloudAttachmentData(e,t),this.addAttachmentToEditor(e)}getEditor(){return this.editor}getEditorContainer(){return this.editorContainer.nativeElement}getPostWithCmd(){return!!this.sharedData.currentUser.value&&this.sharedData.currentUser.value.post_with_cmd}openSlashCommands(e){e&&(e.preventDefault(),e.stopPropagation()),this.slashCommandsModule.activate()}openEmailSettings(e=!1,t=!1){this.emailCommunicators&&this.emailCommunicators.openEmailSettings(e,t)}showCloudStoragepaywallPopover(){this.cloudStoragepaywallPopover.show()}commentReply(e){let t,i=this.editor.getLength();const n=e.item.user;if(e.html){const s=this.editor.getModule("clipboard"),c=this.editor.getFormat(i);let a=s.convert({text:e.text,html:e.html},c);if(a.ops=a.ops.map(e=>Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{blockquote:!0,block:void 0})})),a.ops.length>0){const e=a.ops[a.ops.length-1];"string"==typeof e.insert&&"\n"===e.insert[e.insert.length-1]||(a=a.insert("\n",{blockquote:!0}))}1===this.editor.getLength()&&i--,t=(new o.a).retain(i).concat(a).insert({user_mention:{id:n.id,name:n.username,email:n.email}}).insert(" ")}else{const s=this.viewTaskService.task.value.id,c=this.commentsHelperService.getCommentReplyData(e.item.comment);1===this.editor.getLength()&&i--,t=(new o.a).retain(i).insert({comment_mention:{taskId:s,commentId:e.item.comment.id,delta:c}}).insert({user_mention:{id:n.id,name:n.username,email:n.email}}).insert(" ")}t&&(this.editor.updateContents(t),setTimeout(()=>{this.editor.setSelection(this.editor.getLength(),o.b.sources.API)}))}applySlashCommand({command:e,value:t}){if(!e)return;let i;switch(e.key){case de.ob.key:i=[{task_mention:this.taskMentionService.getTaskMentionObject(t)}," "];break;case de.Eb.key:i=t.group?[{user_group_mention:{id:t.group.id,name:t.group.name,handle:t.group.handle}}," "]:[{user_mention:{id:t.id,name:t.username,email:t.email}}," "];break;case de.d.key:t.group?this.assignToGroup([t.group]):this.assignToUser([t]);break;case de.f.key:t&&"upload"===t.id&&t.data&&t.data.length&&Object(F.a)(100).pipe(Object(w.a)(this.destroy$)).subscribe(()=>{this.uploaderService.addFiles(t.data,this.id)});break;case de.h.key:case de.j.key:case de.i.key:case de.g.key:const o=!1;this.isFreePlan$.pipe(Object(P.a)(t=>t?Object(U.a)({type:"deny",data:null}):(e.key===de.i.key?this.googleDriveService.addGoolgeDriveFile(this.parentId,this.attachmentType,o):e.key===de.h.key?this.dropboxService.addDropboxFile(this.parentId,this.attachmentType,o):e.key===de.g.key?this.boxService.addBoxFile(this.parentId,this.attachmentType,o):this.oneDriveService.addOneDriveFile(this.parentId,this.attachmentType,o)).pipe(Object(y.a)(e=>({type:"file",data:e})))),Object(w.a)(this.destroy$)).subscribe(t=>{switch(t.type){case"file":t.data&&this.addCloudAttachment(t.data,e.key===de.i.key?K.a.google:e.key===de.h.key?K.a.dropbox:e.key===de.g.key?K.a.box:K.a.onedrive);break;case"deny":this.showCloudStoragepaywallPopover()}})}i||(i=Object(ue.e)(e,t,!0)),this.hideSlashCommand(i),this.editor&&e.formatCommand&&Object(ue.a)(this.editor,e.key,t)}hideSlashCommand(e="",t=!0){this.embedSlashCommandInfo&&(this.embedSlashCommandInfo.view&&this.domService.removeView(this.embedSlashCommandInfo.view,this.slashCommandContainer),Object(ue.f)(this.embedSlashCommandInfo,e,t,this.httpSession.getSessionId()),this.embedSlashCommandInfo=null)}startScreenRecording(e){e&&(this.localStorage.set("hide-screen-recording-popover",!0),this.hideScreenRecordingPopover=!0,this.screenRecordingPopover.hide()),this.hideScreenRecordingPopover?this.setCurrentScreenRecording(this.id,this.screenRecorderService.startRecording(this.id)):this.screenRecordingPopover.show()}stopScreenRecording(){this.currentScreenRecording$.value.stop$.value()}expandReply(e){this.collapseEmailReply=!e,setTimeout(()=>this.activateEditor())}toggleCommentMode(e){this.changeMode(this.commentMode===B.b.Email?B.b.Comment:B.b.Email,e)}changeMode(e,t,i,o,n,s){t&&(t.preventDefault(),t.stopPropagation()),this.commentMode=e,this.editor&&this.editor.options&&(this.editor.options.placeholder=e===B.b.Email?this.commentBarStringsService.saySomethingText:this.commentBarStringsService.commentOrSlashCommentText,this.editor.root.setAttribute("data-placeholder",this.editor.options.placeholder)),i&&(this.emailUsers=i,this.emailSubject=o),this.commentMode===B.b.Comment?this.cancelReply():n&&(this.viewTaskService.onCancelReply.emit(),this.replyToId=n,this.emailBodies=s),this.commentMode===B.b.Email&&(this.collapseEmailReply=!0),this.commentModeDropdown&&this.commentModeDropdown.close(),setTimeout(()=>this.activateEditor()),this.changeDetector.markForCheck(),this.saveCommentToLocalstorage()}setAvailableSignatures(){if(!this.fromEmailUser&&this.manageSignatures)return;const e=(this.signatures||[]).find(e=>+e.user.id==+this.user.id);let t=[];e&&(t=e.signatures),this.availableSignatures=t,this.getSelectedSignature(),this.changeDetector.markForCheck()}cancelReply(){this.replyToId=null,this.emailBodies=null,this.viewTaskService.onCancelReply.emit(),this.commentMode===B.b.Email&&this.changeMode(B.b.Comment),this.changeDetector.markForCheck()}clickedUpgrade(){this.modal.closeAll(),this.sharedTaskService.closeTask()}communicatorAction(e){switch(e.type){case b.a.SetUsers:this.emailUsers=Object.assign(Object.assign({},this.emailUsers),{[e.fieldType]:e.users}),this.saveCommentToLocalstorage();break;case b.a.SetAllUsers:this.emailUsers=e.allUsers,this.saveCommentToLocalstorage();break;case b.a.RemoveUser:const t=this.emailUsers[e.fieldType].filter(t=>t.email!==e.email);this.emailUsers=Object.assign(Object.assign({},this.emailUsers),{[e.fieldType]:t}),this.saveCommentToLocalstorage();break;case b.a.OpenState:this.updatingEmails=e.updatingEmails;break;case b.a.SetFromEmailUser:if(this.fromEmailUser=e.fromEmailUser,this.signatures&&this.signatures.length&&this.team&&(this.team.plan_id===se.f.BUSINESS||this.team.plan_id===se.f.ENTERPRISE)){const e=this.signatures.find(e=>+e.user.id==+this.user.id);let t=[];e&&(t=e.signatures),this.availableSignatures=t,this.getSelectedSignature()}break;case b.a.UpdateSubject:this.emailSubject=e.subject,this.saveCommentToLocalstorage()}this.changeDetector.detectChanges()}checkHidePlaceholder(){this.hideEmailPlaceholder=this.editor&&this.editor.hasFocus(),this.changeDetector.detectChanges()}getSelectedSignature(){const e=(this.availableSignatures||[]).find(e=>{var t,i;return(null===(t=this.selectedSignature$.value)||void 0===t?void 0:t.id)===e.id||!(null===(i=this.selectedSignature$.value)||void 0===i?void 0:i.id)&&e.is_default});e&&this.selectedSignature$.next(e)}insertVariable(e){this.insert({automation_variable:e})}setCurrentScreenRecording(e,t){t.stop$.value||t.file$.value?(this.currentScreenRecording$.next(t),t.file$.pipe(Object(I.a)(e=>!!e),Object(T.a)(1),Object(I.a)(()=>this.id===e),Object(w.a)(this.destroy$)).subscribe(e=>{this.uploaderService.addFiles([e],this.id,{clip:"true"}),this.currentScreenRecording$.next(null),this.screenRecorderService.clearRecording(this.id)}),t.stop$.pipe(Object(I.a)(e=>!e),Object(T.a)(1),Object(I.a)(()=>this.id===e&&!!this.currentScreenRecording$.value),Object(w.a)(this.destroy$)).subscribe(()=>{this.currentScreenRecording$.next(null),this.screenRecorderService.clearRecording(this.id)})):this.screenRecorderService.clearRecording(e)}sendWsMessage(e){this.isTyping.emit({isTyping:e}),this.viewTaskService.task.value&&this.sharedTaskService.setTaskCommenting(e?this.viewTaskService.task.value.id:null)}restoreSavedComment(){if(this.saveDraft&&this.localStorageId&&this.localStorage.get(this.localStorageId)&&this.editor){const{content:e,commentAssignee:t,commentMode:i,emailData:o}=this.localStorage.get(this.localStorageId);this.setContent({content:e}),this.commentAssignee=t||(this.defaultAssignee?{type:"user",user:this.defaultAssignee}:void 0),i===B.b.Email&&o&&(this.commentMode=B.b.Email,this.emailSubject=o.emailSubject,this.emailUsers=o.emailUsers)}}commentLinkClick(e,t,i){if(i&&this.viewTaskService.task.value&&t===this.viewTaskService.task.value.id)return e.preventDefault(),e.stopPropagation(),this.onScrollToComment.emit(i),!0}insert(e){const t=this.editor.getSelection(!0).index;this.editor.updateContents((new o.a).retain(t).insert(e)),this.editor.setSelection(t+("string"==typeof e?e.length:1))}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(me.a),n.Wb(pe.a),n.Wb(n.m),n.Wb(n.H),n.Wb(he.a),n.Wb(fe.a),n.Wb(be.a),n.Wb(ge.b),n.Wb(_e.a),n.Wb(n.h),n.Wb(n.B),n.Wb(ve.a),n.Wb(V.Store),n.Wb(ke.a),n.Wb(ye.b),n.Wb(we.a),n.Wb(xe.a),n.Wb(s.a),n.Wb(Ie.a),n.Wb(Te.a),n.Wb(Ce.a),n.Wb(De.a),n.Wb(Oe.a),n.Wb(Se.a),n.Wb(Ee.a),n.Wb(n.t),n.Wb(Pe.a),n.Wb(je.a),n.Wb(Ae.a),n.Wb(le))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-comment-bar"]],viewQuery:function(e,t){if(1&e&&(n.jd(qt,3),n.jd(Gt,1),n.jd(Vt,1),n.jd(Bt,1),n.jd(Xt,1),n.jd(Ht,1),n.jd(Wt,1),n.jd(Kt,3),n.jd(Qt,3),n.jd(Zt,3),n.jd(Yt,1),n.jd(Jt,1),n.jd(ei,1),n.jd(ti,1),n.jd(ii,1),n.jd(oi,1),n.jd(ni,3),n.jd(si,1),n.jd(ci,3,n.U),n.jd(ai,1),n.jd(ri,1),n.jd(li,1),n.jd(di,1),n.jd(ui,3),n.jd(mi,3),n.jd(pi,3)),2&e){let e;n.Qc(e=n.rc())&&(t.editorContainer=e.first),n.Qc(e=n.rc())&&(t.tourAssignComment=e.first),n.Qc(e=n.rc())&&(t.emailCommunicators=e.first),n.Qc(e=n.rc())&&(t.userList=e.first),n.Qc(e=n.rc())&&(t.emojiPickerDropdown=e.first),n.Qc(e=n.rc())&&(t.emailTemplateDropdown=e.first),n.Qc(e=n.rc())&&(t.comments=e.first),n.Qc(e=n.rc())&&(t.comment=e.first),n.Qc(e=n.rc())&&(t.taskMention=e.first),n.Qc(e=n.rc())&&(t.paywallPopover=e.first),n.Qc(e=n.rc())&&(t.cloudStoragepaywallPopover=e.first),n.Qc(e=n.rc())&&(t.screenRecordingPopover=e.first),n.Qc(e=n.rc())&&(t.toolbar=e.first),n.Qc(e=n.rc())&&(t.emojiDropdown=e.first),n.Qc(e=n.rc())&&(t.mentionSelector=e.first),n.Qc(e=n.rc())&&(t.mentionSelectorDropdown=e.first),n.Qc(e=n.rc())&&(t.slashCommandTemplate=e.first),n.Qc(e=n.rc())&&(t.slashCommand=e.first),n.Qc(e=n.rc())&&(t.slashCommandContainer=e.first),n.Qc(e=n.rc())&&(t.taskPopupDropdown=e.first),n.Qc(e=n.rc())&&(t.commentModeDropdown=e.first),n.Qc(e=n.rc())&&(t.sigDropdown=e.first),n.Qc(e=n.rc())&&(t.sigDropdown2=e.first),n.Qc(e=n.rc())&&(t.paywallUnlimitedEmailTemplate=e.first),n.Qc(e=n.rc())&&(t.unfurlUrlDropdown=e.first),n.Qc(e=n.rc())&&(t.blockHandleDropdown=e.first)}},hostVars:2,hostBindings:function(e,t){1&e&&n.qc("paste",function(e){return t.documentPaste(e)},!1,n.Sc),2&e&&n.Ob("cu-comment-bar",!0)},inputs:{editorId:"editorId",id:"id",dropFileParentId:"dropFileParentId",localStorageId:"localStorageId",uploaderUrl:"uploaderUrl",attachmentType:"attachmentType",suggestedEmails:"suggestedEmails",project:"project",assignedComments:"assignedComments",threadFollowers:"threadFollowers",projectMembers:"projectMembers",initialSignature:"initialSignature",loading:"loading",listenForPaywallError:"listenForPaywallError",disableUserMention:"disableUserMention",slashCommandSupport:"slashCommandSupport",showReplyTo:"showReplyTo",canManageEmail:"canManageEmail",slashCommandCustom:"slashCommandCustom",parentId:"parentId",staticToolbar:"staticToolbar",disableKeySubmit:"disableKeySubmit",defaultAssignee:"defaultAssignee",type:"type",commentsList:"commentsList",user:"user",showAnyone:"showAnyone",showUnassign:"showUnassign",popupInBody:"popupInBody",saveDraft:"saveDraft",allowEmailFeature:"allowEmailFeature",commentMode:"commentMode",allowNewDoc:"allowNewDoc",authedState:"authedState",team:"team",allowAddToDoc:"allowAddToDoc",autoAssignWhenMention:"autoAssignWhenMention",allowAddFollowers:"allowAddFollowers",allowAddEmailFollowers:"allowAddEmailFollowers",weights:"weights",placeholder:"placeholder",allowAttachments:"allowAttachments",allowScreenRecording:"allowScreenRecording",showCommentButton:"showCommentButton",manageSignatures:"manageSignatures",content:"content",assignedUserId:"assignedUserId",signatures:"signatures",taskUserGroups:"taskUserGroups",forAutomation:"forAutomation",assignedGroupId:"assignedGroupId",userGroups:"userGroups",taskId:"taskId",task:"task",subcategory:"subcategory",isGuest:"isGuest",allowMentionSelf:"allowMentionSelf",isMainTask:"isMainTask",isChatView:"isChatView",isChatViewModal:"isChatViewModal",variableMenuItemOnly:"variableMenuItemOnly",allowedCommandsInput:"allowedCommandsInput",allowedCommandsExtra:"allowedCommandsExtra"},outputs:{onChangeOpenState:"onChangeOpenState",onSubmit:"onSubmit",onSubmitToDesc:"onSubmitToDesc",isTyping:"isTyping",onScrollToComment:"onScrollToComment",onCreateDoc:"onCreateDoc",onEmailUserAction:"onEmailUserAction",onCommentChange:"onCommentChange",onCancel:"onCancel",onActivate:"onActivate",onMentionOpen:"onMentionOpen",onMentionClose:"onMentionClose",onBody:"onBody",selectedSignature:"selectedSignature"},features:[n.Hb([le]),n.Gb],ngContentSelectors:wo,decls:49,vars:34,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,x,I,T,C,D,O,S,E,P,j,A,$,U,R,M,F,L,N,z;return e=$localize`:@@paywall_text--file-storage-limit-reached␟8fdc6865482fa49937b11d3650ca3bcc864dea18␟2892840071932664432:Whoops! Your team is over the file storage limit.`,t=$localize`:@@paywall_upgrade-email--file-storage-limit-reached␟ee81103108e788db2b1d5107bfcf319bcae18687␟5289223826065857827:Please upgrade ClickUp so we can upload more files`,i=$localize`:@@cu-comment-bar__replying-text␟069cff73e910f8cd72c084c4660f18a77385f630␟147353627001402055: Replying to email `,o=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,n=$localize`:@@common_add-signature␟875b518b9a7443a5b0d94614afdf8a33555bb8f6␟3413638028025923179:Add signature`,s=$localize`:@@rich-editor_formatting--text-bold␟d235ae9c2af04d4b113c0fad596ab23c2fe884f9␟771664384252640128:Bold`,c=$localize`:@@rich-editor_formatting--text-italic␟5d03f644fa70efc613805db7af74801cebf33bf6␟266505507282188406:Italic`,a=$localize`:@@rich-editor_formatting--text-strikethrough␟b24ca8f3b3596794629fb1a49de783d5b45a275e␟6053004284706925412:Strikethrough`,r=$localize`:@@rich-editor_formatting--text-underline␟46bceaa64c9270b80c5b57d8a4fc96951c059539␟6589256532931398744:Underline`,l=$localize`:@@rich-editor_bg-color␟c4a38ad18d2790e341629ff88d7e823d3879c0fa␟238646176953521330:Background color`,d=$localize`:@@rich-editor_formatting--insert-link␟774c398b187a42cdbae4e9c49aefff58b199d41a␟4140577192914036096:Insert a link`,u=$localize`:@@rich-editor_code␟68572de01b84c678be4bf8a27b990ecac2f41ce9␟8186013988289067040:Code`,m=$localize`:@@rich-editor_formatting--code-block␟212a9d42a9475345e6149c01e97172b7c285f639␟5953425146193292178:Code block`,p=$localize`:@@rich-editor_formatting--quote␟3ec88737802269bcef0c5cfcec11e9fe3a04e60d␟1103299628984958400:Quote`,h=$localize`:@@rich-editor_list--numeric␟e14ea1dbbfdde7feba192964c15af8a50a941042␟1734816537699932097:Numeric list`,f=$localize`:@@rich-editor_list--bulleted␟a7e45b34f12a9cfdfb89fa339c6d857145867663␟9080312564183839552:Bulleted list`,b=$localize`:@@common_checklist␟bc086c3e3aa05d214fad1d43ae729aadf1d9321c␟6269606295190909224:Checklist`,g=$localize`:@@common_assign-comment␟245125011c1378675d21477025e52b165da54608␟3106305167251453812:Assign comment`,_=$localize`:@@common_add-emoji␟719e25546c05ab67ee05d2dc62484b4ca100fe38␟8905152704882411055:Add emoji`,v=$localize`:@@cu-comment-bar__screen-recording_in-progress␟8a8059d6d0cf688a0463836ed8f87e29d4dd60be␟8290785641450995609:Another screen recording is in progress, please cancel that first`,k=$localize`:@@cu-comment-bar__screen-recording_start-record-btn-tooltip␟7b55c41bbd6856b0fc7ae82bc66f3890ee48dc7a␟5174309459509470573:Record screen (beta)`,y=$localize`:@@common_stop-recording␟951e63791342c672d33548466392bf2abf884669␟5839438028889856005:Stop recording`,w=$localize`:comment assignee is a user@@cu-comment-bar__assign-to-user␟b7b0dacc2794622361e62ae92b0c51e287b96a27␟1921568925691009835:Assign to ${"\ufffd0\ufffd"}:INTERPOLATION:`,x=$localize`:comment assignee is a group@@cu-comment-bar__assign-to-group␟0eda65d6af38ac6e3488e48495ba9a08b532ef66␟3522540813812571197:Assign to ${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:@@common_comment-mention-user␟2f57ef20ce34b00ea06b820f4ad05140bb66538a␟6794392210594979907:Mention someone (@)`,T=$localize`:@@common_comment-mention-task␟7954cd6b141a0a128f2a6922820fd5021f4029c7␟256680819893693331:Mention a task (@@)`,C=$localize`:@@cu-comment-bar__email-templates␟7fc549cc1dede4cf3f64148c4f9660ec15598a36␟7002015576365542407:Email Templates`,D=$localize`:@@common_slash-commands␟1ff84cdf6319b192b202921fa5944f765be94c29␟6054215489780104097:Slash commands (/)`,O=$localize`:@@cu-comment-bar__screen-recording_warning-text␟d74e5ecc00b4d39ce3de3aba109d52dd2f0ae17e␟9110034728630733350:Important: Only works in Chrome and Firefox`,S=$localize`:@@common_clip-recording␟76f726bfb306903596b7f342cd86594cbe26714a␟6912993318501585178: Clip `,E=$localize`:@@cu-comment-bar__screen-recording-title_clip-subtitle␟b208eb6b6df2f5b3807bb50d9b4cf14a3ed068b4␟8426279381822256402: Record a video and share it in ClickUp `,P=$localize`:@@cu-comment-bar__screen-recording-title_clip-description␟af4dc6033989cc94d609de4dab7ba617859a92b7␟8471591469561240333: Click to record a screenshare along with audio that you can attach to ClickUp or share with anyone using a link. `,j=$localize`:@@cu-comment-bar__screen-recording_clip-start-recording␟b83ee125783cf53166d507f5548ca4d0797aad40␟1085610576399739955: Start recording `,A=$localize`:@@common_replaces␟e69871fbd348c8614e9148464598a6d2190fec5d␟4169793501087696549:Replaces`,$=$localize`:@@common_replaces␟e69871fbd348c8614e9148464598a6d2190fec5d␟4169793501087696549:Replaces`,U=$localize`:@@common_comment␟5a5d7ee2acbfa9c91ab7f41d26bda9ff0cafe42f␟2662644497259948010:Comment`,R=$localize`:@@common_send-email␟eee326152fb235c6c6696fcc6e9fbcd61a23667e␟2226625262738940373:Send Email`,M=$localize`:@@common_add-to-description␟78db1b615f773e684977b8d886484e11fbc4fc1e␟4722522576530758264: Add to description `,F=$localize`:@@common_fields␟1f80d16659a7bbebe1a3c1c018f2de2f0fc37c4e␟4825033114168285958: Fields `,L=$localize`:@@common_new-document␟b4a1dca0434ab7259de2be942a0a63394146f376␟975449276385153932:New Document`,N=$localize`:@@cu-email-communicators__signatures-menu-label-sigs␟e2e1e1e108d641b509be305ce15c2c9bce5fe702␟6511781257258299234: MY SIGNATURES `,z=$localize`:@@cu-email-communicators__signatures-menu-item-text-add-signature␟875b518b9a7443a5b0d94614afdf8a33555bb8f6␟3413638028025923179:Add signature`,[["paywallPopoverTemplate",""],["id","commentForm","containerClass","popover_white","placement","top","outsideClick","true","container","body","triggers","",1,"comment-bar",3,"ngClass","popover"],["commentBarContainer","","paywallPopover","bs-popover"],["class","comment-bar__replying",4,"ngIf"],[4,"ngIf"],[1,"comment-bar__content","cu-comment-editor-wrapper"],[2,"width","100%"],[3,"users","userGroups","weights","meUser","subcategory","task","isGuest","isChatView","isTaskViewComment","isChatViewModal","taskUserGroups","onSelect","onOpen","onClose",4,"ngIf"],[1,"cu-comment-bar__editor","comment-bar__editor","cu-comment-editor-content"],["editorContainer",""],["icon","comment",1,"comment-bar__icon"],["unfurlUrlDropdown",""],[3,"menu","handleCommit","handleSelect"],["blockHanleDropdown",""],["class","cu-comment-bar__signature ignore-click-out",4,"ngIf"],["class","comment-bar__footer",3,"ngClass",4,"ngIf"],["class","comment-bar__footer-email-automation",4,"ngIf"],["position","top",3,"defaultProjectId","taskId","onSelect","onDismiss","onOpen","onClose"],["taskMention",""],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownFromRect","dropdownPlacement"],["taskPopupDropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],[3,"users","meUser","weights","fromRect","userGroups","subcategory","task","isGuest","taskUserGroups","onSelect",4,"ngIf"],["slashCommandContainer",""],["popTemplate",""],["attachmentsTemplate",""],["slashCommandTemplate",""],["taskPopupTemplate",""],["dropdownOptions",""],["paywallUnlimitedEmailTemplate",""],["signatureDropdownMenu",""],["text",e,"emailSubject",t,3,"amplitudeLabel","upgradeClicked"],[1,"comment-bar__replying"],[1,"comment-bar__replying-text"],i,[1,"comment-bar__replying-cancel",3,"click"],o,["class","cu-comment-bar__communicators",3,"users","suggestedEmails","subject","canManageEmail","contactsMap","projectMembers","authedEmails","preferredEmail","fetchingAuthed","fetchingContacts","collapseEmailReply","replyToId","collapseEmailInfo","team","onCommunicatorAction","onEmailUserAction","onExpandReply",4,"ngIf"],[1,"cu-comment-bar__communicators",3,"users","suggestedEmails","subject","canManageEmail","contactsMap","projectMembers","authedEmails","preferredEmail","fetchingAuthed","fetchingContacts","collapseEmailReply","replyToId","collapseEmailInfo","team","onCommunicatorAction","onEmailUserAction","onExpandReply"],["emailCommunicators",""],[3,"users","userGroups","weights","meUser","subcategory","task","isGuest","isChatView","isTaskViewComment","isChatViewModal","taskUserGroups","onSelect","onOpen","onClose"],["mentionSelector",""],[1,"cu-comment-bar__signature","ignore-click-out"],["cuDropdown","",1,"cu-comment-bar__signature-dropdown",3,"dropdownDisabled","dropdownRepositionFlag","dropdownOpen"],["sigDropdown","dropdown"],[1,"cu-comment-bar__signature-label-toggle"],["cuDropdownToggle","","class","cu-email-communicators__email cu-comment-bar__signature-label-toggle-add",3,"click",4,"ngIf"],["class","cu-comment-bar__signature-actions ignore-click-out cu-comment-bar__signature-preview",4,"ngIf"],["class","cu-dropdown__menu_overflow-hidden",3,"width",4,"cuDropdownMenu"],["cuDropdownToggle","",1,"cu-email-communicators__email","cu-comment-bar__signature-label-toggle-add",3,"click"],["class","cu-comment-bar__signature-label-toggle-text",4,"ngIf"],[1,"cu-comment-bar__signature-label-toggle-text"],n,[1,"cu-comment-bar__signature-actions","ignore-click-out","cu-comment-bar__signature-preview"],[1,"cu-comment-bar__signature-preview-top"],[1,"cu-comment-bar__signature-html-preview",3,"useHtml","html"],[1,"cu-comment-bar__signature-actions-options","ignore-click-out"],["cuDropdown","",1,"cu-comment-bar__signature-actions-options-item",3,"dropdownDisabled","dropdownRepositionFlag","dropdownOpen","dropdownClose"],["sigDropdown2","dropdown"],["cuDropdownToggle","",3,"click"],[1,"cu-comment-bar__template-close","ignore-click-out",3,"icon"],[1,"cu-comment-bar__signature-actions-options-item","ignore-click-out",3,"click"],[3,"icon"],[1,"cu-dropdown__menu_overflow-hidden"],[3,"ngTemplateOutlet"],[1,"comment-bar__footer",3,"ngClass"],["toolbar",""],[1,"ql-formats"],["cuTooltip",s,"tooltipDelay","500",1,"ql-bold"],["cuTooltip",c,"tooltipDelay","500",1,"ql-italic"],["cuTooltip",a,"tooltipDelay","500",1,"ql-strike"],["cuTooltip",r,"tooltipDelay","500",1,"ql-underline"],["cuTooltip",l,"tooltipDelay","500",1,"ql-background"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["cuTooltip",d,"tooltipDelay","500",1,"ql-link"],["cuTooltip",u,"tooltipDelay","500",1,"ql-code"],["cuTooltip",m,"tooltipDelay","500",1,"ql-code-block",3,"disabled"],["cuTooltip",p,"tooltipDelay","500",1,"ql-blockquote",3,"disabled"],["cuTooltip",h,"tooltipDelay","500","value","ordered",1,"ql-list","ql-list_ordered"],["cuTooltip",f,"tooltipDelay","500","value","bullet",1,"ql-list","ql-list_bullet"],["cuTooltip",b,"tooltipDelay","500","value","check",1,"ql-list","ql-list_check",3,"ngStyle"],[1,"comment-bar__controls"],[3,"users","selectedUsers","selectedUserGroups","modifier","showAnyone","showUnassign","weights","weightType","userGroups","subcategory","task","onChange","onUserGroupsChanged"],["userList",""],["class","comment-bar__control comment-bar__control_assign","cuTooltip",g,"icon","comment-bar-assignee",4,"ngIf"],[3,"cuTooltip","user",4,"ngIf"],[3,"cuTooltip","group","bordered","avatarSize",4,"ngIf"],["class","comment-bar-mentions",3,"click",4,"ngIf"],["class","comment-bar-btn",3,"click",4,"ngIf"],[3,"onSelect"],["emojiPickerDropdown",""],["cuTooltip",_,1,"emoticons__toggle",3,"icon"],[3,"templates","templateContent","emailSubject","hasEmailCommunicators","disabled","onEmailUserAction","onSelectTemplate","onOpenSettings","click",4,"ngIf"],["class","comment-bar-btn__icon comment-bar-btn__icon_email","icon","cog-2",3,"cuTooltip","click",4,"ngIf"],[3,"fromRect","onSelect"],["emojiDropdown",""],["class","comment-bar-slash",3,"click",4,"ngIf"],["screenRecordingPopoverTemplate",""],["cuTooltip",v,"class","comment-bar-btn comment-bar-btn_record",4,"ngIf"],["cuTooltip",k,"class","comment-bar-btn comment-bar-btn_record","containerClass","popover_white popover_no-max-width","placement","top","outsideClick","true","container","body","triggers","",3,"popover","click",4,"ngIf"],["cuTooltip",y,"class","comment-bar-btn comment-bar-btn_record comment-bar-btn_record_active",3,"click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"comment-bar__delimiter"],["class","comment-bar__controls-mode-toggle",4,"ngIf"],[3,"cu-comment-bar__show-email",4,"ngIf"],["cuDropdown","",3,"dropdownPlacement","dropdownDisabled",4,"ngIf"],[3,"value"],["cuTooltip",g,"icon","comment-bar-assignee",1,"comment-bar__control","comment-bar__control_assign"],[3,"user",6,"cuTooltip"],["cuTooltip",w],[3,"group","bordered","avatarSize",6,"cuTooltip"],["cuTooltip",x],[1,"comment-bar-mentions",3,"click"],["icon","comment-bar-mentions","cuTooltip",I,1,"comment-bar-mentions__icon"],[1,"comment-bar-btn",3,"click"],["icon","comment-bar-task","cuTooltip",T,1,"comment-bar-btn__icon"],[3,"templates","templateContent","emailSubject","hasEmailCommunicators","disabled","onEmailUserAction","onSelectTemplate","onOpenSettings","click"],["emailTemplateDropdown",""],["cuTooltip",C,1,"comment-bar-btn__icon","comment-bar-btn__icon_email",3,"icon"],["icon","cog-2",1,"comment-bar-btn__icon","comment-bar-btn__icon_email",3,"cuTooltip","click"],[1,"comment-bar-slash",3,"click"],["icon","comment-bar-slash","cuTooltip",D,1,"comment-bar-slash__icon"],[1,"comment-bar__screen-recording"],[1,"comment-bar__screen-recording-warning"],["icon","exclamation4",1,"comment-bar__screen-recording-warning-icon"],O,["src","../assets/images/clickapps/record-videos.png","width","160","alt",""],[1,"comment-bar__screen-recording-title"],S,[1,"comment-bar__screen-recording-subtitle"],E,[1,"comment-bar__screen-recording-description"],P,[1,"cu-btn","cu-btn_m","cu-btn_green","cu-btn_font-size-14","comment-bar__screen-recording-btn",3,"click"],j,[1,"comment-bar__screen-recording-loom"],A,["src","./assets/images/components/comments/comments-frame/loom.svg","alt","","height","19"],[1,"comment-bar__screen-recording-loom","comment-bar__screen-recording-loom_dark-theme"],$,["src","./assets/images/components/comments/comments-frame/loom_dark-theme.svg","alt","","height","19"],["cuTooltip",v,1,"comment-bar-btn","comment-bar-btn_record"],["icon","comment-bar-record",1,"comment-bar-btn__icon"],["cuTooltip",k,"containerClass","popover_white popover_no-max-width","placement","top","outsideClick","true","container","body","triggers","",1,"comment-bar-btn","comment-bar-btn_record",3,"popover","click"],["screenRecordingPopover","bs-popover"],["cuTooltip",y,1,"comment-bar-btn","comment-bar-btn_record","comment-bar-btn_record_active",3,"click"],[1,"comment-bar-btn__icon"],["width","20","height","20","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm0 2c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10z"],["d","M13.998 9.999a3.999 3.999 0 11-7.998 0 3.999 3.999 0 017.998 0z",1,"comment-bar-btn__icon-item_pulse"],[1,"comment-bar__controls-mode-toggle"],[1,"comment-bar__controls-mode-toggle-item",3,"cuTooltip","click"],["icon","cu2-email-2"],["icon","cu2-comment-4"],[1,"comment-bar__send-btn","cu-btn","cu-btn_block","cu-btn_spinner",3,"cuTooltip","disabled","click"],[1,"cu-btn__text"],[4,"ngIf","ngIfElse"],["sendEmailTmpl",""],[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],U,R,["cuDropdown","",3,"dropdownPlacement","dropdownDisabled"],[1,"comment-bar__send-btn","cu-btn","cu-btn_block",3,"disabled"],[1,"cu-btn__icon",3,"icon"],[1,"cu-comment-bar__dropdown-item",3,"click"],M,[1,"comment-bar__footer-email-automation"],[1,"comment-bar__footer-email-automation-label"],F,[3,"show","inputBadges","selected"],[3,"users","meUser","weights","fromRect","userGroups","subcategory","task","isGuest","taskUserGroups","onSelect"],["mentionSelectorDropdown",""],["class","comment-bar-btn comment-bar-btn__doc",3,"click",4,"ngIf"],[3,"parentId","type","permanent","allowNewDoc","onCloudAdded","onFilesSelected","onCreateDoc"],[1,"comment-bar-uploader","comment-bar-uploader_toggle"],["icon","comment-bar-paperclip",1,"comment-bar-uploader__icon"],[1,"comment-bar-btn","comment-bar-btn__doc",3,"click"],["icon","cu2-doc-3","cuTooltip",L,1,"comment-bar-btn__icon","comment-bar-btn__icon_doc"],[3,"alwaysVisible","dropdownPlacement","allowedCommands","allowedCommandsExtra","currentValues","options","meUser","users","weights","userGroups","team","applyCommand","cancelCommand"],["slashCommand",""],[3,"taskId","weights","onRemove","onEnter","onLeave",4,"ngIf"],[3,"taskId","weights","onRemove","onEnter","onLeave"],[3,"item","click"],[3,"badge","title","image","text","upgradeButtonText","emailSubject","features","learnMore","textBelowImage","imageWidth","flipBadge","upgradeClicked"],[1,"cu-email-communicators__signatures-menu"],[1,"cu-email-communicators__signatures-menu-label"],N,[1,"cu-email-communicators__signatures-menu-team",3,"perfectScrollbar"],["class","cu-email-communicators__signatures-menu-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-email-communicators__signatures-menu-item cu-email-communicators__signatures-menu-item-add",3,"click",4,"ngIf"],["class","cu-email-communicators__signatures-menu-item-settings-divider",4,"ngIf"],["class","cu-email-communicators__signatures-menu-item cu-email-communicators__signatures-menu-item-settings",3,"click",4,"ngIf"],[1,"cu-email-communicators__signatures-menu-item",3,"click"],[1,"cu-email-communicators__signatures-menu-item-text"],[1,"cu-email-communicators__signatures-menu-item","cu-email-communicators__signatures-menu-item-add",3,"click"],z,[1,"cu-email-communicators__signatures-menu-item-settings-divider"],[1,"cu-email-communicators__signatures-menu-item","cu-email-communicators__signatures-menu-item-settings",3,"click"],["icon","cu2-cog-o",1,"cu-email-communicators__sender-cog"]]},template:function(e,t){if(1&e&&(n.Cc(),n.bd(0,hi,1,1,"ng-template",null,0,n.cd),n.cc(2,"div",1,2),n.vc(5,"async"),n.vc(6,"async"),n.bd(7,fi,5,0,"div",3),n.bd(8,ki,2,1,"ng-container",4),n.cc(9,"div",5),n.Xb(10,"div",6),n.bd(11,yi,5,17,"cu-mention-selector-container",7),n.Xb(12,"div",8,9),n.Xb(14,"div",10),n.cc(15,"div",null,11),n.Xb(17,"cu-unfurl-url-menu",12),n.bc(),n.cc(18,"div",null,13),n.Xb(20,"cu-block-handle-menu",12),n.bc(),n.bd(21,Di,9,8,"div",14),n.bc(),n.bd(22,Yi,53,72,"div",15),n.bd(23,Ji,4,2,"div",16),n.bc(),n.cc(24,"cu-task-mention",17,18),n.qc("onSelect",function(e){return t.addTaskMentionToEditor(e)})("onDismiss",function(){return t.dismissTaskMention()})("onOpen",function(){return t.openTaskMention()})("onClose",function(){return t.closeTaskMention()}),n.vc(26,"async"),n.bc(),n.cc(27,"div",19,20),n.cc(29,"div",21),n.Bc(30),n.bc(),n.bd(31,to,2,1,"div",22),n.bc(),n.bd(32,io,5,15,"cu-mention-selector-dropdown",23),n.Yb(33,null,24),n.bd(35,oo,1,0,"ng-template",null,25,n.cd),n.bd(37,so,4,5,"ng-template",null,26,n.cd),n.bd(39,ao,5,19,"ng-template",null,27,n.cd),n.bd(41,lo,1,1,"ng-template",null,28,n.cd),n.bd(43,po,2,8,"ng-template",null,29,n.cd),n.bd(45,ho,1,11,"ng-template",null,30,n.cd),n.bd(47,ko,8,7,"ng-template",null,31,n.cd)),2&e){const e=n.Rc(1);let i=null;n.Ib(2),n.Ob("comment-bar__email",t.commentMode===t.CommentMode.Email),n.Dc("ngClass",n.Hc(31,yo,n.wc(5,25,t.isActive$)||n.wc(6,27,t.currentScreenRecording$)))("popover",e),n.Ib(5),n.Dc("ngIf",t.showReplyTo&&t.replyToId),n.Ib(1),n.Dc("ngIf",!t.forAutomation),n.Ib(1),n.Ob("comment-bar__content-email-focused",t.hideEmailPlaceholder&&t.commentMode===t.CommentMode.Email),n.Ib(2),n.Dc("ngIf",!t.popupInBody),n.Ib(6),n.Dc("menu",t.unfurlUrlMenuData)("handleCommit",t.unfurlUrlonCommit)("handleSelect",t.unfurlUrlonSelect),n.Ib(3),n.Dc("menu",t.blockHandleMenuData)("handleCommit",t.blockHandleCommit)("handleSelect",t.blockHandleSelect),n.Ib(1),n.Dc("ngIf",t.allowEmailFeature&&t.commentMode===t.CommentMode.Email),n.Ib(1),n.Dc("ngIf",t.hasId),n.Ib(1),n.Dc("ngIf",t.commentMode===t.CommentMode.Email&&t.forAutomation),n.Ib(1),n.Dc("defaultProjectId",null==(i=n.wc(26,29,t.project$))?null:i.id)("taskId",t.taskId),n.Ib(3),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!1)("dropdownFromRect",t.hoverRect)("dropdownPlacement",n.Gc(33,Hi)),n.Ib(5),n.Dc("ngIf",t.popupInBody)}},directives:[c.o,$e.c,c.q,Ue.a,Re.a,Me.a,Fe.a,Le.b,Ne.a,ze.a,qe.a,kt,yt.a,m,c.x,He.a,c.p,c.t,wt.a,xt.a,It.a,Tt.a,Ct.a,At,$t.a,Ut.a,Rt.a,Mt.a,Ft.b,Lt.a,Nt.a,Xe.a],pipes:[c.b,zt.a],styles:['.cu-comment-bar{flex-shrink:0;position:relative;transform:translateZ(0);border-radius:10px;display:block;z-index:2}.cu-comment-bar__template-close{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;margin:0 5px;cursor:pointer;padding:2px;fill:var(--theme-main-color)}.cu-comment-bar__template-close:hover{transform:rotate(180deg)}.cu-comment-bar__template-preview{margin-left:5px;cursor:pointer;text-decoration:underline;color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-bar__template-preview{color:var(--theme-main-color)}}.cu-comment-bar__template-sig-container{display:none}.cu-comment-bar__signature{display:none;align-items:center;margin:5px 12px 8px}.cu-comment-bar__signature-dropdown{width:100%}.cu-comment-bar__signature-actions{width:100%;position:relative;min-height:20px}.cu-comment-bar__signature-actions.cu-comment-bar__signature-preview{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;padding:10px;width:100%}.cu-comment-bar__signature-actions.cu-comment-bar__signature-preview:hover{background:rgba(233,235,240,.5);border-radius:4px}.dark-theme .cu-comment-bar__signature-actions.cu-comment-bar__signature-preview:hover{background:#2b343b}.cu-comment-bar__signature-actions .cu-comment-bar__signature-preview-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1;color:#7c828d;margin-bottom:12px;min-height:24px;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-comment-bar__signature-actions .cu-comment-bar__signature-preview-top{font-family:var(--global-font-support)}}.dark-theme .cu-comment-bar__signature-actions .cu-comment-bar__signature-preview-top{color:#828588}.cu-comment-bar__signature-actions:hover .cu-comment-bar__signature-actions-options{display:flex}.cu-comment-bar__signature-actions-options{display:none;position:absolute;right:16px;top:16px;justify-content:space-between;align-items:center}.cu-comment-bar__signature-actions-options-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;width:24px;height:24px;background:#fff;border-radius:4px;display:flex;align-items:center;justify-content:center;margin:0;padding:0}.cu-comment-bar__signature-actions-options-item:hover{background:#eee}.dark-theme .cu-comment-bar__signature-actions-options-item:hover{background:#1e272e}.cu-comment-bar__signature-actions-options-item+.cu-comment-bar__signature-actions-options-item{margin-left:8px}.dark-theme .cu-comment-bar__signature-actions-options-item{background:#384047}.cu-comment-bar__signature-actions-options-item .icon{width:12px;height:12px;fill:#7c828d;margin:0;padding:0;background:transparent;border-radius:0;transition:none}.cu-comment-bar__signature-actions-options.cu-comment-bar__signature-show-options{display:flex;align-items:center}.cu-comment-bar__signature-actions .cu-comment-bar__signature-html-preview td[valign=bottom]{vertical-align:bottom}.cu-comment-bar__signature:hover .cu-comment-bar__template-sig-container{display:flex;align-items:center}.cu-comment-bar__signature:hover .cu-email-communicators__email.cu-dropdown__toggle .icon{opacity:1}.cu-comment-bar__signature-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:10px;line-height:1;background-color:rgba(233,235,240,.5);padding:5px;border-radius:3px;color:#7c828d;margin-right:5px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-comment-bar__signature-label{font-family:var(--global-font-support)}}.cu-comment-bar__signature-label-toggle,.cu-comment-bar__signature-label-toggle .cu-email-communicators__email{display:flex;align-items:center}.cu-comment-bar__signature-label-toggle .cu-email-communicators__email .icon{transform:rotate(90deg);fill:#292d34;width:16px;height:16px;padding:2px;margin-left:5px;opacity:0}.dark-theme .cu-comment-bar__signature-label-toggle .cu-email-communicators__email .icon{fill:#d5d6d7}.cu-comment-bar__signature-label-toggle-add{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;display:flex;align-items:center;padding:0 8px;margin-bottom:10px;height:24px;cursor:pointer;background:rgba(233,235,240,.5);border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-comment-bar__signature-label-toggle-add{font-family:var(--global-font-support)}}.dark-theme .cu-comment-bar__signature-label-toggle-add{background:#2b343b}.cu-comment-bar__signature-label-toggle-add .cu-comment-bar__signature-label-toggle-text{color:#7c828d}.dark-theme .cu-comment-bar__signature-label-toggle-add .cu-comment-bar__signature-label-toggle-text{color:#828588}.cu-comment-bar__signature-label-toggle-add:hover{background:#e9ebf0}.dark-theme .cu-comment-bar__signature-label-toggle-add:hover{background:#1e272e}.cu-comment-bar__signature-label-toggle-add:hover .cu-comment-bar__signature-label-toggle-text{color:#292d34}.dark-theme .cu-comment-bar__signature-label-toggle-add:hover .cu-comment-bar__signature-label-toggle-text{color:#d5d6d7}.dark-theme .cu-comment-bar__signature-label{color:#fff}.cu-comment-bar__caret{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(-180deg);width:25px;height:25px;padding:5px;margin-left:0;fill:#fff}.cu-comment-bar__display{color:inherit}.cu-comment-bar__show-email{display:flex;align-items:center;justify-content:center}.cu-comment-bar__show-email .cu-btn__text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-comment-bar__show-email .cu-dropdown_open .cu-comment-bar__caret{transform:rotate(0deg)}.cu-comment-bar__show-email-disabled{opacity:.5}.cu-comment-bar__communicators{display:none}.cu-comment-bar__select{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;border-left:1px solid var(--theme-main-color-dark);height:100%;display:flex;align-items:center;border-radius:0 3px 3px 0;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-comment-bar__select{background-color:var(--theme-main-color)}}.cu-comment-bar__select:hover{background-color:var(--theme-main-color-dark)}.cu-comment-bar:before{border-radius:0;content:"";display:block;position:absolute;z-index:1;top:-10px;left:0;width:100%;height:10px;background-image:linear-gradient(-180deg,transparent,rgba(0,0,0,.03))}.dark-theme .cu-comment-bar:before{background:linear-gradient(180deg,rgba(43,52,59,0) 0,#2b343b)}.cu-comment-bar__dropdown-item{font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34;padding:10px 20px;cursor:pointer;white-space:nowrap}.dark-theme .cu-comment-bar__dropdown-item{color:#d5d6d7}.cu-comment-bar__btn_disabled{cursor:not-allowed!important;opacity:.3}.cu-comment-bar-email-user-dropdown .cu-user-group__more{height:30px!important;width:30px!important}.cu-comment-bar__editor .ql-list_check svg{width:18px;height:18px}.comment-bar_active .cu-comment-bar__communicators{display:block}.comment-bar_active .cu-comment-bar__signature{display:flex}'],encapsulation:2,changeDetection:0}),e})()},RjOF:function(e,t,i){"use strict";var o,n="";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var i=e.length*t;if(o!==e||void 0===o)o=e,n="";else if(n.length>=i)return n.substr(0,i);for(;i>n.length&&t>1;)1&t&&(n+=e),t>>=1,e+=e;return n=(n+=e).substr(0,i)}},RsFJ:function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},RyV3:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return l});var o=i("l7P3"),n=i("c3rA");const s=Object(o.createFeatureSelector)("quickSwitcher"),c=Object(o.createSelector)(s,e=>e.dataMap),a=Object(o.createSelector)(c,n.getSelectedTeamId,(e,t)=>e[t]||[]),r=Object(o.createSelector)(s,e=>e.recentMap),l=Object(o.createSelector)(r,n.getSelectedTeamId,(e,t)=>e[t]||[]);Object(o.createSelector)(s,e=>e.loading),Object(o.createSelector)(s,e=>e.error)},"S//e":function(e,t,i){"use strict";i.d(t,"a",function(){return _});var o=i("fXoL"),n=i("XNiG"),s=i("jJQC"),c=i("LdyQ"),a=i("ofXK"),r=i("MJvn"),l=i("n+1/"),d=i("IO3K"),u=i("BTFG");const m=["userList"],p=["dropdown"];function h(e,t){if(1&e&&o.Yb(0,8),2&e){const e=o.uc(2);o.Dc("ngTemplateOutlet",e.extraItemTemplate)}}function f(e,t){1&e&&(o.cc(0,"div"),o.Xb(1,"cu-loader"),o.bc())}function b(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"cu-user-list",4,5),o.qc("onUserGroupsChanged",function(t){return o.Uc(e),o.uc().changeGroups(t)})("onBeforeChange",function(t){return o.Uc(e),o.uc().onBeforeChange.emit(t)})("onReassign",function(t){return o.Uc(e),o.uc().onReassign.emit(t)})("onReassignGroup",function(t){return o.Uc(e),o.uc().onReassignGroup.emit(t)})("onChange",function(t){return o.Uc(e),o.uc().changeUsers(t)})("onNeedClose",function(t){return o.Uc(e),o.uc().closeWithDelay(t)})("onOpenProfile",function(){return o.Uc(e),o.uc(),o.Rc(1).close()})("filteredItemsChange",function(t){return o.Uc(e),o.uc().filteredItemsChange(t.items)}),o.bc(),o.bd(3,h,1,1,"ng-container",6),o.bd(4,f,2,0,"div",7),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("disabled",!e.isOpen)("users",e.users)("multiChoice",e.multiChoice)("enableFirstSelection",e.enableFirstSelection)("forBatch",e.forBatch)("showUnassign",e.showUnassign)("showUnassigned",e.showUnassigned)("showAnyone",e.showAnyone)("showSelf",e.showSelf)("unassignedText",e.unassignedText)("selectedUnassigned",e.selectedUnassigned)("search",e.search)("showSearch",e.showSearch)("showInactive",e.showInactive)("selectedUsers",e.selectedUsers)("showReassign",e.showReassign)("canOnlyEditSelf",e.canOnlyEditSelf)("immutableUser",e.immutableUser)("focusOnInit",!e.preRenderDropdown)("displayProfile",e.displayProfile)("headerTemplate",e.headerTemplate)("showLastViewed",e.showLastViewed)("weights",e.weights)("weightType",e.weightType)("lastViewedMap",e.lastViewedMap)("userGroups",e.userGroups)("guestMap",e.guestMap)("selectedUserGroups",e.selectedUserGroups),o.Ib(2),o.Dc("ngIf",(null==e.users?null:e.users.length)&&e.extraItemTemplate),o.Ib(1),o.Dc("ngIf",e.onlyLoadForEmptyList&&!e.users&&!e.userGroups||!e.onlyLoadForEmptyList&&!(null!=e.users&&e.users.length)&&!(null!=e.userGroups&&e.userGroups.length))}}const g=["*"];let _=(()=>{class e{constructor(e){this.changeDetector=e,this.users=[],this.multiChoice=!1,this.enableFirstSelection=!0,this.forBatch=!1,this.onlyLoadForEmptyList=!1,this.showUnassign=!0,this.showUnassigned=!1,this.showAnyone=!1,this.showSelf=!1,this.unassignedText=$localize`:@@common_unassigned:Unassigned`,this.selectedUnassigned=!1,this.search=!0,this.showSearch=!0,this.showInactive=!0,this.modifier="",this.selectedUsers=[],this.showReassign=!0,this.canOnlyEditSelf=!1,this.preRenderDropdown=!1,this.displayProfile=!0,this.dropdownPlacement=c.a,this.dropdownAppendToBody=!0,this.guestMap={},this.onBeforeChange=new o.o,this.onChange=new o.o,this.onOpen=new o.o,this.onClose=new o.o,this.onReassign=new o.o,this.onReassignGroup=new o.o,this.onFinished=new o.o,this.onUserGroupsChanged=new o.o,this.destroy$=new n.a,this.trackById=Object(s.d)("id"),this.isOpen=!1,this.filteredItems=[]}ngOnInit(){}ngOnChanges(e){e.disabled&&!e.disabled.previousValue&&e.disabled.currentValue&&this.dropdown&&this.dropdown.isOpen&&this.dropdown.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}openDropdown(){this.onOpen.emit(),this.isOpen=!0,this.setFocus(),this.changeDetector.markForCheck()}closeDropdown(){this.onClose.emit(),this.isOpen=!1,this.onFinished.emit(),this.dropdownFromPoint=null,this.changeDetector.markForCheck()}setUsers(e,t){this.users=e,this.userGroups=t,this.changeDetector.detectChanges(),this.setFocus()}setFocus(){this.userList&&this.userList.setFocus()}changeUsers(e){this.onChange.emit(e),this.multiChoice||this.search||this.close(e)}changeGroups(e){this.onUserGroupsChanged.emit(e),this.multiChoice||this.search||this.dropdown.close()}open(){this.dropdown.open()}close(e){this.dropdown.close(),this.onFinished.emit(e)}closeWithDelay(e){setTimeout(()=>this.close(e))}filteredItemsChange(e){this.filteredItems=e,this.changeDetector.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-list-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(m,1),o.jd(p,3)),2&e){let e;o.Qc(e=o.rc())&&(t.userList=e.first),o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-user-list-dropdown"],inputs:{id:"id",users:"users",multiChoice:"multiChoice",enableFirstSelection:"enableFirstSelection",forBatch:"forBatch",onlyLoadForEmptyList:"onlyLoadForEmptyList",showUnassign:"showUnassign",showUnassigned:"showUnassigned",showAnyone:"showAnyone",showSelf:"showSelf",unassignedText:"unassignedText",selectedUnassigned:"selectedUnassigned",search:"search",showSearch:"showSearch",showInactive:"showInactive",modifier:"modifier",selectedUsers:"selectedUsers",showReassign:"showReassign",canOnlyEditSelf:"canOnlyEditSelf",immutableUser:"immutableUser",disabled:"disabled",preRenderDropdown:"preRenderDropdown",displayProfile:"displayProfile",headerTemplate:"headerTemplate",dropdownPlacement:"dropdownPlacement",extraItemTemplate:"extraItemTemplate",showLastViewed:"showLastViewed",lastViewedMap:"lastViewedMap",weights:"weights",weightType:"weightType",dropdownAppendToBody:"dropdownAppendToBody",dropdownFromPoint:"dropdownFromPoint",userGroups:"userGroups",selectedUserGroups:"selectedUserGroups",guestMap:"guestMap"},outputs:{onBeforeChange:"onBeforeChange",onChange:"onChange",onOpen:"onOpen",onClose:"onClose",onReassign:"onReassign",onReassignGroup:"onReassignGroup",onFinished:"onFinished",onUserGroupsChanged:"onUserGroupsChanged"},features:[o.Gb],ngContentSelectors:g,decls:5,vars:8,consts:[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownRepositionFlag","dropdownDisabled","dropdownPreRenderMenu","dropdownPlacement","dropdownAppendToBody","dropdownFromPoint","ngClass","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],[3,"disabled","users","multiChoice","enableFirstSelection","forBatch","showUnassign","showUnassigned","showAnyone","showSelf","unassignedText","selectedUnassigned","search","showSearch","showInactive","selectedUsers","showReassign","canOnlyEditSelf","immutableUser","focusOnInit","displayProfile","headerTemplate","showLastViewed","weights","weightType","lastViewedMap","userGroups","guestMap","selectedUserGroups","onUserGroupsChanged","onBeforeChange","onReassign","onReassignGroup","onChange","onNeedClose","onOpenProfile","filteredItemsChange"],["userList",""],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.qc("dropdownOpen",function(){return t.openDropdown()})("dropdownClose",function(){return t.closeDropdown()}),o.cc(2,"div",2),o.Bc(3),o.bc(),o.bd(4,b,5,30,"div",3),o.bc()),2&e&&o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRepositionFlag",t.filteredItems)("dropdownDisabled",t.disabled)("dropdownPreRenderMenu",t.preRenderDropdown)("dropdownPlacement",t.dropdownPlacement)("dropdownAppendToBody",t.dropdownAppendToBody)("dropdownFromPoint",t.dropdownFromPoint)("ngClass",t.modifier)},directives:[c.b,a.o,r.a,l.a,d.a,a.q,a.x,u.a],encapsulation:2,changeDetection:0}),e})()},S7bF:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("YAnr"),n=i("O5Dz"),s=i("oKxQ"),c=i("fXoL"),a=i("jhN1"),r=i("jJW4");const l=i("UV07");let d=(()=>{class e{constructor(e,t){this.sanitizer=e,this.sharedData=t}linkifyString(e,t="icon",i,n=!1){return Object(o.z)(e,t,i,n)}getDeltaLength(e,t=!0,i=!0){if(e&&e.ops){let n=0;return e.ops.forEach(e=>{n+=Object(o.k)(e,t,i)}),n}return 0}getDiffHtml(e,t){const i=new l,o=i.main(e,t);i.cleanupSemantic(o);const s=o.map(([e,t])=>{const i=Object(n.b)(t);switch(e){case 1:return`<span class="diff-insert">${i}</span>`;case-1:return`<span class="diff-delete">${i}</span>`;default:return i}}).join("");return this.sanitizer.bypassSecurityTrustHtml(s)}getDeltaHtml(e,t=!0){const i=this.sharedData.currentUser.value,o=Object(s.b)(e,i?i.id:null,!!i&&i.markdown_shortcuts,null,!1,t);return this.sanitizer.bypassSecurityTrustHtml(o)}getDeltaDiffHtml(e,t,i){return this.getDeltaHtml(Object(o.F)(e,t,i),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.nc(a.b),c.nc(r.a))},e.\u0275prov=c.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"SBM/":function(e,t,i){"use strict";i.d(t,"a",function(){return x});var o=i("2p4s"),n=i("XNiG"),s=i("Cfvw"),c=i("UXun"),a=i("pLZG"),r=i("lJxs"),l=i("/uUt"),d=i("1G5W"),u=i("SxV6"),m=i("l7P3"),p=i("c3rA"),h=i("SNEm"),f=i.n(h),b=i("RecH"),g=i("YAnr"),_=i("g6dt"),v=i("fXoL"),k=i("jJW4"),y=i("AeD3"),w=i("lPHu");let x=(()=>{class e{constructor(e,t,i,s){this.sharedData=e,this.store=t,this.managerDataService=i,this.zoneScheduler=s,this.codoxUrl=o.a.codoxUrl||"https://smd.stage.codox.io/plugins/wave.client.js?apiKey=8b1e21f3-6534-4877-9090-dbb9e61993eb&app=quilljs",this.destroy$=new n.a,this.codox$=this.loadCodox().pipe(Object(c.a)({refCount:!0,bufferSize:1})),this.disabled$=this.store.pipe(Object(m.select)(p.getTeam),Object(a.a)(e=>!!e),Object(r.a)(e=>!e.enable_codox),Object(l.a)()),this.disabled=!0,this.disabled$.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.disabled=e}),this.codox$.pipe(Object(d.a)(this.destroy$)).subscribe(()=>{})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}startCodox(e){return this.codox$.pipe(this.zoneScheduler.observeOutOfNgZone(),Object(u.a)(),Object(r.a)(t=>{const i=this.sharedData.currentUser.value,o={app:"quilljs",user:Object.assign(Object.assign({},i),{id:i.id,name:i.displayName||i.username||i.email,email:i.email,color:i.color,avatar:i.profilePicture}),autoStart:!0,showUI:!1,showCursor:!0,cursorAlwaysOn:!0,timestamp:(new Date).getTime(),content:""},n=new window.Codox;return[n,Object(s.a)(n.start(Object.assign(Object.assign({},o),e)))]}))}getContent(e){return this.managerDataService.getContent(e).pipe(Object(r.a)(e=>{try{const t=Object(g.G)(Object(b.f)(new f.a(JSON.parse(e.content))));return{content:JSON.stringify(t),timestamp:e.timestamp}}catch(t){return{content:JSON.stringify({ops:[{insert:e.content}]}),timestamp:e.timestamp}}}))}loadCodox(){return Object(s.a)(_(this.codoxUrl,{returnPromise:!0,async:!0,before(e,t){t.setAttribute("id","codoxjs")}})).pipe(Object(r.a)(()=>window.Codox))}}return e.\u0275fac=function(t){return new(t||e)(v.nc(k.a),v.nc(m.Store),v.nc(y.a),v.nc(w.a))},e.\u0275prov=v.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},SJHZ:function(e,t,i){"use strict";i.d(t,"d",function(){return n}),i.d(t,"f",function(){return s}),i.d(t,"a",function(){return c}),i.d(t,"e",function(){return a}),i.d(t,"i",function(){return r}),i.d(t,"b",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"g",function(){return u}),i.d(t,"h",function(){return m}),i.d(t,"k",function(){return p}),i.d(t,"j",function(){return h});var o=i("l7P3");const n=Object(o.createAction)("[PROFILE] Open profile",Object(o.props)()),s=Object(o.createAction)("[PROFILE] Set profile over task view",Object(o.props)()),c=Object(o.createAction)("[PROFILE] Close profile"),a=Object(o.createAction)("[PROFILE] Set profile data",Object(o.props)()),r=Object(o.createAction)("[PROFILE] Set profile tab",Object(o.props)()),l=Object(o.createAction)("[PROFILE] Load recent tasks"),d=Object(o.createAction)("[PROFILE] Load recent tasks page",Object(o.props)()),u=Object(o.createAction)("[PROFILE] Set recent tasks data",Object(o.props)()),m=Object(o.createAction)("[PROFILE] Set recent tasks data state",Object(o.props)()),p=Object(o.createAction)("[PROFILE] Update profile user desc",Object(o.props)()),h=Object(o.createAction)("[PROFILE] Set profile user data",Object(o.props)());Object(o.union)({openProfile:n,setProfileOverTaskView:s,closeProfile:c,setProfileData:a,setProfileUserData:h,setProfileTab:r,loadRecentTasks:l,setProfileRecentData:u,setProfileRecentDataState:m,updateProfileUserDesc:p})},SbiQ:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n,s,c,a,r,l,d,u,m;if(i)return!0;for(c=(o=this.inlineMethods).length,n=this.inlineTokenizers,s=-1,u=t.length;++s<c;)"text"!==(d=o[s])&&n[d]&&((l=n[d].locator)||e.file.fail("Missing locator: `"+d+"`"),-1!==(r=l.call(this,t,1))&&r<u&&(u=r));a=t.slice(0,u),m=e.now(),this.decode(a,m,function(t,i,o){e(o||t)({type:"text",value:t})})}},SjmV:function(e,t,i){"use strict";i.d(t,"a",function(){return Z});var o=i("YwDF"),n=i("fXoL"),s=i("jJQC"),c=i("+2Ly"),a=i("lJxs"),r=i("vkgz"),l=i("pLZG"),d=i("IzEk"),u=i("1G5W"),m=i("2Vo4"),p=i("XNiG"),h=i("IlGD"),f=i("hr9B"),b=i("HHlo"),g=i("c3rA"),_=i("l7P3"),v=i("Jf2N"),k=i("SkDE"),y=i("8it8"),w=i("ofXK"),x=i("/qmH"),I=i("0Dyw"),T=i("NsZK"),C=i("oB/R"),D=i("UdVN");let O=(()=>{class e{transform(e){return Object(o.c)(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"isEmptyCustomField",type:e,pure:!0}),e})();function S(e,t){}const E=function(e){return{field:e,index:null,bottom:!1}};function P(e,t){if(1&e&&n.bd(0,S,0,0,"ng-template",9),2&e){const e=n.uc().$implicit;n.uc();const t=n.Rc(6);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Hc(2,E,e))}}function j(e,t){if(1&e&&(n.ac(0),n.bd(1,P,1,4,void 0,8),n.Zb()),2&e){const e=t.$implicit,i=n.uc(2);n.Ib(1),n.Dc("ngIf",!0===(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned)||!1===(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned)?null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned:e.pinned)}}function A(e,t){}function $(e,t){if(1&e&&n.bd(0,A,0,0,"ng-template",9),2&e){const e=n.uc().$implicit;n.uc();const t=n.Rc(6);n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Hc(2,E,e))}}function U(e,t){if(1&e&&(n.ac(0),n.bd(1,$,1,4,void 0,8),n.vc(2,"isEmptyCustomField"),n.Zb()),2&e){const e=t.$implicit,i=n.uc(2);n.Ib(1),n.Dc("ngIf",(!n.wc(2,1,e)||(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].cleared))&&!(null!=i.fieldRow[e.id]&&i.fieldRow[e.id].bottom)&&(!0===(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned)||!1===(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned)?!(null!=i.fieldRow[e.id]&&i.fieldRow[e.id].pinned):!e.pinned))}}function R(e,t){}const M=function(e,t){return{field:e,index:t,bottom:!0}};function F(e,t){if(1&e&&n.bd(0,R,0,0,"ng-template",9),2&e){const e=n.uc().$implicit;n.uc();const t=n.Rc(6),i=n.uc();n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,M,e,null==i.fieldRow[e.id]?null:i.fieldRow[e.id].index))}}function L(e,t){if(1&e&&(n.ac(0),n.bd(1,F,1,5,void 0,8),n.Zb()),2&e){const e=t.$implicit,i=n.uc(2);n.Ib(1),n.Dc("ngIf",(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].bottom)&&(!0===(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned)||!1===(null==i.fieldRow[e.id]?null:i.fieldRow[e.id].pinned)?!(null!=i.fieldRow[e.id]&&i.fieldRow[e.id].pinned):!e.pinned))}}function N(e,t){if(1&e){const e=n.dc();n.cc(0,"div",19),n.qc("click",function(){n.Uc(e);const t=n.uc().field;return n.uc(2).pinField(t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=n.uc().field,t=n.uc(2);n.Ob("cu-task-custom-fields__row-type-pin_pinned",!0===(null==t.fieldRow[e.id]?null:t.fieldRow[e.id].pinned)||!1===(null==t.fieldRow[e.id]?null:t.fieldRow[e.id].pinned)?null==t.fieldRow[e.id]?null:t.fieldRow[e.id].pinned:e.pinned)("hide",!n.wc(1,4,t.showTaskViewCustomFieldsPin$))}}function z(e,t){if(1&e&&(n.cc(0,"div",20),n.gc(1,21),n.vc(2,"async"),n.bc()),2&e){const e=n.uc().field,t=n.uc(2);n.Ob("cu-task-custom-fields__row-body-options_required",n.wc(2,2,t.missingRequiredMap$)[e.id]&&t.showMissingRequired)}}function q(e,t){if(1&e){const e=n.dc();n.cc(0,"div",22),n.qc("click",function(){n.Uc(e);const t=n.uc(),i=t.field,o=t.index,s=t.bottom;return n.uc(2).toggleFieldRow(i,o,s,!0)}),n.bc()}}const G=function(){return[]};function V(e,t){if(1&e){const e=n.dc();n.cc(0,"div",10),n.cc(1,"div",11),n.Xb(2,"cu-custom-field-icon",12),n.cc(3,"div",13),n.dd(4),n.bc(),n.bd(5,N,2,6,"div",14),n.bc(),n.cc(6,"div",15),n.cc(7,"cu-custom-field",16),n.qc("fieldSaveStart",function(){return n.Uc(e),n.uc(2).fieldSaveStart()})("fieldSaveSuccess",function(){return n.Uc(e),n.uc(2).fieldSaveComplete(!1)})("fieldSaveError",function(){return n.Uc(e),n.uc(2).fieldSaveComplete(!0)})("fieldValueChange",function(i){n.Uc(e);const o=t.field;return n.uc(2).updateCustomFieldValue.emit({field:o,value:i})})("editProjectFieldsModalOpen",function(t){return n.Uc(e),n.uc(2).refreshFieldsOnEditModalClose(t)}),n.vc(8,"async"),n.bc(),n.bd(9,z,3,4,"div",17),n.bd(10,q,1,0,"div",18),n.vc(11,"isEmptyCustomField"),n.bc(),n.bc()}if(2&e){const e=t.field,i=n.uc(2);n.Dc("@loadingEnter",void 0),n.Ib(1),n.ad("width",i.leftColWidth,"px"),n.Ib(1),n.Dc("field",e),n.Ib(1),n.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipDelay",200),n.Ib(1),n.fd(" ",e.name," "),n.Ib(1),n.Dc("ngIf",!i.readonly),n.Ib(2),n.Ob("cu-task-custom-fields__task-field_readonly",i.readonly),n.Dc("task",i.task)("team",n.wc(8,24,i.team$))("closeOthers",i.closeOthers)("subcategory",i.subcategory)("permissions",i.permissions)("disconnected",i.disconnected)("field",e)("forViewTask",i.forViewTask)("forTaskCustomFields",!0)("members",i.members)("allCustomFields",(null==i.task?null:i.task.customFields)||n.Gc(28,G)),n.Ib(2),n.Dc("ngIf",e&&e[i.forSubtask?"required_on_subtasks":"required"]),n.Ib(1),n.Dc("ngIf",!(n.wc(11,26,e)&&i.task||i.customFieldTypeConfigMap[e.type].isAutomaticValue||i.readonly||e.type===i.CustomFieldType.ListRelationship))}}function B(e,t){if(1&e){const e=n.dc();n.cc(0,"div",26),n.qc("click",function(){return n.Uc(e),n.uc(3).showUnsetCustomFields(!1)}),n.Xb(1,"div",27),n.cc(2,"div",28),n.gc(3,29),n.bc(),n.bc()}}function X(e,t){if(1&e){const e=n.dc();n.cc(0,"div",26),n.qc("click",function(){return n.Uc(e),n.uc(3).showUnsetCustomFields(!0)}),n.Xb(1,"div",30),n.cc(2,"div",28),n.gc(3,31),n.bc(),n.bc()}if(2&e){const e=n.uc(3);n.Ib(3),n.kc(e.unsetEmptyCustomFields.length)(e.unsetEmptyCustomFields.length),n.hc(3)}}function H(e,t){if(1&e){const e=n.dc();n.cc(0,"div",32),n.qc("click",function(t){return n.Uc(e),n.uc(3).showEditCustomFieldsModal(t)}),n.dd(1," + "),n.ac(2),n.gc(3,33),n.Zb(),n.bc()}}function W(e,t){if(1&e&&(n.cc(0,"div",23),n.bd(1,B,4,0,"div",24),n.bd(2,X,4,2,"div",24),n.bd(3,H,4,0,"div",25),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",!e.isCollapsed&&e.orderedEmptyCustomFields.length>0),n.Ib(1),n.Dc("ngIf",e.isCollapsed&&e.unsetEmptyCustomFields.length>0),n.Ib(1),n.Dc("ngIf",(null==e.permissions?null:e.permissions.manage_custom_fields)&&!e.disconnected)}}const K=function(){return{right:!0}};function Q(e,t){if(1&e){const e=n.dc();n.cc(0,"div",1),n.cc(1,"div",2),n.bd(2,j,2,1,"ng-container",3),n.bd(3,U,3,3,"ng-container",3),n.bd(4,L,2,1,"ng-container",3),n.bd(5,V,12,29,"ng-template",null,4,n.cd),n.bd(7,W,4,3,"div",5),n.cc(8,"div",6),n.qc("resizeStart",function(t){return n.Uc(e),n.uc().resizeStart(t)})("resizing",function(t){return n.Uc(e),n.uc().resizing(t)})("resizeEnd",function(){return n.Uc(e),n.uc().resizeEnded()}),n.Xb(9,"div",7),n.bc(),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Ob("no-permission",e.readonly),n.Ib(1),n.Dc("ngForOf",e.customFields)("ngForTrackBy",e.trackById),n.Ib(1),n.Dc("ngForOf",e.customFields)("ngForTrackBy",e.trackById),n.Ib(1),n.Dc("ngForOf",e.orderedEmptyCustomFields)("ngForTrackBy",e.trackById),n.Ib(3),n.Dc("ngIf",!e.readonly&&e.showFooter),n.Ib(1),n.ad("width",e.leftColWidth,"px"),n.Ib(1),n.Dc("resizeEdges",n.Gc(12,K))}}let Z=(()=>{class e{constructor(e,t,i,c,l,d){this.store=e,this.modal=t,this.injector=i,this.customFieldsService=c,this.renderer=l,this.commonStringsService=d,this.disconnected=!1,this.customFields=[],this.forViewTask=!1,this.showMissingRequired=!1,this.forSubtask=!1,this.closeOthers=!0,this.showFooter=!0,this.refreshTaskCustomFields=new n.o,this.setMissingRequiredFields=new n.o,this.updateCustomFieldValue=new n.o,this.trackById=Object(s.d)("id"),this.showEditFields=!1,this.fieldRow={},this.isCollapsed=!0,this.emptyFieldRowIndex=0,this.orderedEmptyCustomFields=[],this.unsetEmptyCustomFields=[],this.customFields$=new m.a(this.customFields),this.missingRequiredMap$=this.customFields$.pipe(Object(a.a)(e=>{const t=this.forSubtask?"required_on_subtasks":"required";return(e||[]).reduce((e,i)=>(i[t]&&Object(o.c)(i)&&(e[i.id]=!0),e),{})}),Object(r.a)(e=>{this.setMissingRequiredFields.emit(e)})),this.customFieldTypeConfigMap=h.e,this.CustomFieldType=o.a,this.destroy$=new p.a,this.showTaskViewCustomFieldsPin$=this.store.select(g.getShowTaskViewCustomFieldsPin),this.team$=this.store.select(g.getTeam)}get readonly(){return this.disconnected||this.permissions&&!this.permissions.manage_custom_fields&&!this.permissions.set_custom_field_values}ngOnChanges(e){(e.customFields||e.team)&&(this.customFields=(this.customFields||[]).filter(e=>!!h.e[e.type]).filter(e=>!(e.type===o.a.ListRelationship||e.type===o.a.Tasks&&this.forViewTask&&this.team.task_relationships)),this.customFields.sort(h.h),this.orderEmptyCustomFields(),this.unsetCustomFields(),this.customFields$.next(this.customFields))}ngOnInit(){const e=localStorage.getItem("cfLeftColWidth");this.leftColWidth=e?parseInt(e,10):220,this.customFields$.pipe(Object(l.a)(e=>!(!e||!e.length)),Object(d.a)(1),Object(u.a)(this.destroy$)).subscribe(e=>{e.some(e=>Object(h.g)(e)&&Object(o.c)(e))&&this.showUnsetCustomFields(!0)})}ngOnDestroy(){this.destroy$.next()}showEditCustomFieldsModal(e){e.stopPropagation();const t=this.modal.openComponent(c.a,this.injector,{title:this.commonStringsService.manageCustomFieldText(this.subcategory.name),dialogModifier:"cu-modal__dialog-custom-fields",preventExternalClick:!0,bodyModifier:"cu-modal__body_no-min-height"});t.instance.setEntity({type:"subcategory",id:this.subcategory.id,name:this.subcategory.name}),this.refreshFieldsOnEditModalClose(t)}refreshFieldsOnEditModalClose(e){e.instance.destroy$.pipe(Object(d.a)(1)).subscribe(()=>{this.refreshTaskCustomFields.emit()})}preventToggleEditFields(e,t,i){(t===o.a.Url||t===o.a.Phone||t===o.a.Email||i&&(t===o.a.LongText||t===o.a.ShortText))&&e.stopPropagation()}fieldSaveStart(){this.fieldSaving$||(this.fieldSaving$=new p.a)}fieldSaveComplete(e){this.fieldSaving$&&(this.fieldSaving$.next(e),this.fieldSaving$.complete(),this.fieldSaving$=null)}toggleFieldRow(e,t,i,o){o&&(this.task?this.customFieldsService.deleteTaskFieldValue(this.task.id,e.id).subscribe(()=>{this.updateCustomFieldValue.emit({field:e,value:void 0})}):(this.fieldRow[e.id]=void 0,this.updateCustomFieldValue.emit({field:e,value:void 0}))),i&&!o&&this.emptyFieldRowIndex++,!this.task&&o||(this.fieldRow[e.id]={index:t||this.emptyFieldRowIndex,bottom:i,cleared:o}),this.orderEmptyCustomFields(),this.unsetCustomFields()}isEmptyCustomFieldVisible(e){return!!this.fieldRow[e.id]&&this.fieldRow[e.id].bottom}orderEmptyCustomFields(){this.orderedEmptyCustomFields=(this.customFields||[]).filter(e=>!!h.e[e.type]).filter(e=>this.isEmptyCustomFieldVisible(e)).sort((e,t)=>Object(h.g)(e)&&!Object(h.g)(t)?-1:Object(h.g)(t)&&!Object(h.g)(e)?1:this.fieldRow[e.id].index-this.fieldRow[t.id].index)}unsetCustomFields(){this.unsetEmptyCustomFields=(this.customFields||[]).filter(e=>!!h.e[e.type]).filter(e=>Object(o.c)(e)&&!e.pinned&&(!this.fieldRow[e.id]||!this.fieldRow[e.id].bottom&&!this.fieldRow[e.id].cleared))}showUnsetCustomFields(e){this.isCollapsed=!e,e?this.unsetEmptyCustomFields.forEach(e=>{this.toggleFieldRow(e,null,!0,!1)}):(this.fieldRow={},this.orderEmptyCustomFields(),this.unsetCustomFields())}pinField(e){this.fieldRow[e.id]?this.fieldRow[e.id].pinned=!e.pinned:this.fieldRow[e.id]={pinned:!e.pinned},this.store.dispatch(Object(b.u)({field:e,updates:{pinned:!e.pinned},entity:e.entity,refreshTask:!!this.task,task:this.task||null,pinned_value_changed:!0}))}resizeStart(e){const t=document.querySelector(".cu-task-custom-fields__container");t&&(this.resizeMaxWidth=t.offsetWidth-50),this.resizeStartWidth=e.rectangle.width,this.renderer.addClass(document.body,"cu-unselectable")}resizing(e){const t=this.resizeStartWidth+e.edges.right;this.leftColWidth=t<51?50:this.resizeMaxWidth&&t>this.resizeMaxWidth?this.resizeMaxWidth:t}resizeEnded(){this.renderer.removeClass(document.body,"cu-unselectable"),localStorage.setItem("cfLeftColWidth",this.leftColWidth.toString())}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(_.Store),n.Wb(v.a),n.Wb(n.t),n.Wb(k.a),n.Wb(n.H),n.Wb(y.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-custom-fields"]],hostAttrs:[1,"cu-task-custom-fields"],inputs:{task:"task",permissions:"permissions",disconnected:"disconnected",customFields:"customFields",subcategory:"subcategory",members:"members",forViewTask:"forViewTask",showMissingRequired:"showMissingRequired",forSubtask:"forSubtask",closeOthers:"closeOthers",showFooter:"showFooter",team:"team"},outputs:{refreshTaskCustomFields:"refreshTaskCustomFields",setMissingRequiredFields:"setMissingRequiredFields",updateCustomFieldValue:"updateCustomFieldValue"},features:[n.Gb],decls:1,vars:1,consts:function(){let e,t,i,o,s,c;return e=$localize`:@@common_pin--always-show␟f7090f9a6409a91ed6738e824fb774fe9bc75a0f␟3081582480770315772:Pin (Always show this)`,t=$localize`:@@common_required␟1f6e3ab1ffef0f6353d548c1050bda258c796fc0␟486003629881413558: Required `,i=$localize`:@@cu-task-custom-fields__collapsed-text_hide-empty-fields␟41ebed29489e41ecbabd5c4e8f863904286353f5␟7037830983194279638: Hide empty fields `,o=$localize`:␟2f350fde9008fbcd0d9ff76e92f94d5e1a325032␟5171240949376906874:{VAR_PLURAL, plural, =0 {field} other {fields}}`,o=n.lc(o,{VAR_PLURAL:"\ufffd1\ufffd"}),s=$localize`:@@cu-task-custom-fields__collapsed-text_show-empty-fields␟fd18c616e6a832cfe9a1936a3c0f38594487ce52␟4975690760327900962: Show ${"\ufffd0\ufffd"}:INTERPOLATION: empty ${o}:ICU: `,c=$localize`:@@common_add-edit-fields␟9779778a0d7f997a9c59af6403c73618cc493c19␟431120001911388011:Add or edit fields`,[["class","cu-custom-fields",4,"ngIf"],[1,"cu-custom-fields"],[1,"cu-task-custom-fields__container"],[4,"ngFor","ngForOf","ngForTrackBy"],["taskCustomFieldRow",""],["class","cu-task-custom-fields__row cu-task-custom-fields__row_unset",4,"ngIf"],["mwlResizable","",1,"cu-task-custom-fields__resizer",3,"resizeStart","resizing","resizeEnd"],["mwlResizeHandle","",1,"cu-task-custom-fields__resizer-handle",3,"resizeEdges"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-task-custom-fields__row"],[1,"cu-task-custom-fields__row-type"],["modifier","cu-task-custom-fields__row-type-icon",3,"field"],[1,"cu-task-custom-fields__row-type-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipDelay"],["class","cu-task-custom-fields__row-type-pin","icon","cu2-thumbtack-solid","cuTooltip",e,"tooltipDelay","500",3,"cu-task-custom-fields__row-type-pin_pinned","hide","click",4,"ngIf"],[1,"cu-task-custom-fields__row-body"],[1,"cu-task-custom-fields__task-field",3,"task","team","closeOthers","subcategory","permissions","disconnected","field","forViewTask","forTaskCustomFields","members","allCustomFields","fieldSaveStart","fieldSaveSuccess","fieldSaveError","fieldValueChange","editProjectFieldsModalOpen"],["class","cu-task-custom-fields__row-body-options",3,"cu-task-custom-fields__row-body-options_required",4,"ngIf"],["icon","cu2-times","class","cu-task-custom-fields__row-hide","cuTooltip","Delete",3,"click",4,"ngIf"],["icon","cu2-thumbtack-solid","cuTooltip",e,"tooltipDelay","500",1,"cu-task-custom-fields__row-type-pin",3,"click"],[1,"cu-task-custom-fields__row-body-options"],t,["icon","cu2-times","cuTooltip","Delete",1,"cu-task-custom-fields__row-hide",3,"click"],[1,"cu-task-custom-fields__row","cu-task-custom-fields__row_unset"],["class","cu-task-custom-fields__collapsed",3,"click",4,"ngIf"],["class","cu-task-custom-fields__edit",3,"click",4,"ngIf"],[1,"cu-task-custom-fields__collapsed",3,"click"],["icon","cu2-caret-down",1,"cu-task-custom-fields__collapsed-icon","cu-task-custom-fields__collapsed-icon_expanded"],[1,"cu-task-custom-fields__collapsed-text"],i,["icon","cu2-caret-down",1,"cu-task-custom-fields__collapsed-icon"],s,[1,"cu-task-custom-fields__edit",3,"click"],c]},template:function(e,t){1&e&&n.bd(0,Q,10,13,"div",0),2&e&&n.Dc("ngIf",t.customFields&&t.customFields.length>0)},directives:[w.q,w.p,x.a,x.c,w.x,I.a,T.a,C.a,D.a],pipes:[O,w.b],styles:['.cu-task-custom-fields__container{margin:20px 15px 30px 30px;border-radius:6px;border:1px solid #e9ebf0;position:relative}.dark-theme .cu-task-custom-fields__container{border-color:#1e272e}.cu-draft-view .cu-task-custom-fields__container{margin:10px 0 30px}.cu-task-custom-fields__container.no-permission{cursor:default}.cu-task-custom-fields__row{display:flex;min-height:33px}.cu-task-custom-fields__row+.cu-task-custom-fields__row{border-top:1px solid #e9ebf0}.dark-theme .cu-task-custom-fields__row+.cu-task-custom-fields__row{border-top-color:#1e272e}.cu-task-custom-fields__row_unset{display:flex;border-radius:0 0 6px 6px;background:#fafbfc}.dark-theme .cu-task-custom-fields__row_unset{background:#2b343b}.cu-task-custom-fields__row:first-child .cu-edit-task-custom-field-value{overflow:hidden;border-radius:0 5px 0 0}.cu-task-custom-fields__row:last-child .cu-task-custom-fields__row .cu-edit-task-custom-field-value{overflow:hidden;border-radius:0 0 5px 0}.cu-task-custom-fields__row-type{display:flex;align-items:center;width:220px;height:32px;padding:0 6px 0 8px;flex-shrink:0}.cu-task-custom-fields__row-type:hover .cu-task-custom-fields__row-type-pin{display:flex}.cu-task-custom-fields__row-type-icon{width:14px;height:14px;font-size:14px;line-height:16px;text-align:center;margin-right:6px;flex-shrink:0;fill:#7c828d;color:#7c828d}.dark-theme .cu-task-custom-fields__row-type-icon{fill:#828588;color:#828588}.cu-task-custom-fields__row-type-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1.2;opacity:.9;flex-grow:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-custom-fields__row-type-name{font-family:var(--global-font-support)}}.dark-theme .cu-task-custom-fields__row-type-name{color:#d5d6d7}.cu-task-custom-fields__row-type-pin{display:none;width:14px;height:14px;padding:2px;margin:1px 1px 0;cursor:pointer;fill:#b9bec7}.cu-task-custom-fields__row-type-pin.hide{display:none!important;pointer-events:none}.cu-task-custom-fields__row-type-pin.hide.cu-task-custom-fields__row-type-pin_pinned{display:flex!important}.cu-task-custom-fields__row-type-pin:hover,.dark-theme .cu-task-custom-fields__row-type-pin{fill:#7c828d}.dark-theme .cu-task-custom-fields__row-type-pin:hover{fill:#b9bec7}.cu-task-custom-fields__row-type-pin:active{transform:scale(.9)}.cu-task-custom-fields__row-type-pin_pinned{fill:#7b68ee;display:flex}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__row-type-pin_pinned{fill:var(--theme-main-color)}}.dark-theme .cu-task-custom-fields__row-type-pin_pinned{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-task-custom-fields__row-type-pin_pinned{fill:var(--theme-main-color)}}.cu-task-custom-fields__row-type-pin_pinned:hover{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-task-custom-fields__row-type-pin_pinned:hover{fill:var(--theme-main-color-dark)}}.dark-theme .cu-task-custom-fields__row-type-pin_pinned:hover{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.dark-theme .cu-task-custom-fields__row-type-pin_pinned:hover{fill:var(--theme-main-color-dark)}}.cu-task-custom-fields__row-body{display:flex;align-items:center;flex-grow:1;position:relative;min-width:0;padding:0}.cu-task-custom-fields__row-type+.cu-task-custom-fields__row-body{border-left:1px solid #e9ebf0}.dark-theme .cu-task-custom-fields__row-type+.cu-task-custom-fields__row-body{border-left-color:#1e272e}.cu-task-custom-fields__row-body-options{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-right:25px;text-transform:uppercase;font:600 9px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-task-custom-fields__row-body-options_required{color:#d35d5a}.cu-task-custom-fields__row-body .cu-custom-field{width:100%;height:100%}.cu-task-custom-fields__row-hide{background:#7b68ee;display:none;position:absolute;right:5px;width:14px;height:14px;border-radius:50%;fill:#fff;cursor:pointer;padding:2px;z-index:10}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__row-hide{background:var(--theme-main-color)}}.cu-task-custom-fields__row-hide:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-task-custom-fields__row-hide:hover{background:var(--theme-main-color-dark)}}.cu-task-custom-fields__row:hover .cu-task-custom-fields__row-hide{display:block}.cu-task-custom-fields__collapsed{display:flex;align-items:center;padding:0 10px;margin-right:auto;cursor:pointer}.cu-task-custom-fields__collapsed:hover .cu-task-custom-fields__collapsed-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__collapsed:hover .cu-task-custom-fields__collapsed-text{color:var(--theme-main-color)}}.cu-task-custom-fields__collapsed:hover .cu-task-custom-fields__collapsed-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__collapsed:hover .cu-task-custom-fields__collapsed-icon{fill:var(--theme-main-color)}}.cu-task-custom-fields__collapsed-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-task-custom-fields__collapsed-text{color:#abaeb0}.cu-task-custom-fields__collapsed-icon{width:11px;height:11px;margin-right:8px;fill:#7c828d}.dark-theme .cu-task-custom-fields__collapsed-icon{fill:#abaeb0}.cu-task-custom-fields__collapsed-icon_expanded{transform:rotate(180deg)}.cu-task-custom-fields__edit{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer;margin-top:1px;margin-right:8px;margin-left:auto;padding-bottom:1px;border-bottom:1px dashed #b9bec7;align-self:center;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-task-custom-fields__edit{color:#abaeb0}.cu-task-custom-fields__edit:hover{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__edit:hover{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-task-custom-fields__header{display:flex;cursor:pointer}.cu-task-custom-fields__header:hover .cu-task-custom-fields__header-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__header:hover .cu-task-custom-fields__header-arrow{fill:var(--theme-main-color)}}@media screen and (max-width:992px){.cu-task-custom-fields__header{padding:20px 15px}}.cu-task-custom-fields__header-items{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;flex-grow:1;text-align:right;padding:0;display:flex;flex-wrap:wrap;max-width:100%}.cu-task-custom-fields__header-items-name,.cu-task-custom-fields__header-items-name-text,.cu-task-custom-fields__header-items-value{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:24px;color:#9b9b9b}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-custom-fields__header-items-name,.cu-task-custom-fields__header-items-name-text,.cu-task-custom-fields__header-items-value{font-family:var(--global-font-support)}}.cal-event-container .cu-task-custom-fields__header-items-name,.cal-event-container .cu-task-custom-fields__header-items-name-text,.cal-event-container .cu-task-custom-fields__header-items-value,.cu-dashboard-board-card__clickable .cu-task-custom-fields__header-items-name,.cu-dashboard-board-card__clickable .cu-task-custom-fields__header-items-name-text,.cu-dashboard-board-card__clickable .cu-task-custom-fields__header-items-value{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cal-event-container .cu-task-custom-fields__header-items-name,.cal-event-container .cu-task-custom-fields__header-items-name-text,.cal-event-container .cu-task-custom-fields__header-items-value,.cu-dashboard-board-card__clickable .cu-task-custom-fields__header-items-name,.cu-dashboard-board-card__clickable .cu-task-custom-fields__header-items-name-text,.cu-dashboard-board-card__clickable .cu-task-custom-fields__header-items-value{font-family:var(--global-font-support)}}.cu-task-custom-fields__header-items-name{display:inline-flex;align-items:center;max-width:100%}.cu-task-custom-fields__header-items-name-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;max-width:80%}.cu-task-custom-fields__header-items-name:not(:last-child):after{content:"|";padding:0 10px}.cu-task-custom-fields__header-items-name_labels{align-items:flex-start}.cu-task-custom-fields__header-items-name_labels .cu-task-custom-fields__header-items-value{display:flex;flex-wrap:wrap}.public-sharing .task .cu-task-custom-fields__header-items-name_text .cu-custom-fields__header-items-value,.public-sharing .task .cu-task-custom-fields__header-items-name_users .cu-custom-fields__header-items-value{text-align:left;white-space:normal}.cu-task-custom-fields__header-items-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1.15;color:#343434;margin-left:7px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-custom-fields__header-items-value{font-family:var(--global-font-support)}}.dark-theme .cu-task-custom-fields__header-items-value{color:#d5d6d7}.cu-task-custom-fields__header-items-value__url{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;display:flex;align-items:center;height:100%;color:#343434}.dark-theme .cu-task-custom-fields__header-items-value__url{color:#d5d6d7}.cu-task-custom-fields__header-items-value__url:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__header-items-value__url:hover{color:var(--theme-main-color)}}.cu-task-custom-fields__header-items-value__url-favicon{margin-right:4px;flex-shrink:0;width:14px}.cu-task-custom-fields__header-items-value__email,.cu-task-custom-fields__header-items-value__phone{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;display:flex;align-items:center;height:100%;color:#343434}.dark-theme .cu-task-custom-fields__header-items-value__email,.dark-theme .cu-task-custom-fields__header-items-value__phone{color:#d5d6d7}.cu-task-custom-fields__header-items-value__email:hover,.cu-task-custom-fields__header-items-value__phone:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__header-items-value__email:hover,.cu-task-custom-fields__header-items-value__phone:hover{color:var(--theme-main-color)}}.cu-task-custom-fields__header-items-value__labels{display:flex;align-items:center;height:20px;padding:0 6px;border-radius:3px;max-width:300px;min-width:0;margin:2px 0}.cu-task-custom-fields__header-items-value__labels:not(:last-child){margin-right:4px}.cu-task-custom-fields__header-items-value__labels_white{border:1px solid #e4e4e4}.dark-theme .cu-task-custom-fields__header-items-value__labels_white{border:1px solid #1e272e;background-color:transparent!important;color:#d5d6d7}.dark-theme .cu-task-custom-fields__header-items-value__labels_white .cu-task-custom-fields__header-items-value__labels-text{color:#d5d6d7}.cu-task-custom-fields__header-items-value__labels_light .cu-task-custom-fields__header-items-value__labels-text,.cu-task-custom-fields__header-items-value__labels_white .cu-task-custom-fields__header-items-value__labels-text{color:#343434}.cu-task-custom-fields__header-items-value__labels-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font:400 13px/1.2 Gotham Pro,Proxima Nova,arial,serif;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-custom-fields__header-items-value__labels-text{font-family:var(--global-font-support)}}.cu-task-custom-fields__header-items-value__dropdown-option{display:flex;align-items:center;height:20px;padding:0 10px;border-radius:3px;max-width:304px;min-width:0}.cu-task-custom-fields__header-items-value__dropdown-option_white{border:1px solid #e4e4e4}.dark-theme .cu-task-custom-fields__header-items-value__dropdown-option_white{border:1px solid #1e272e;background-color:transparent!important}.dark-theme .cu-task-custom-fields__header-items-value__dropdown-option_white .cu-task-custom-fields__header-items-value__dropdown-option-text{color:#d5d6d7}.lv .cu-task-custom-fields__header-items-value__dropdown-option_white{border:1px solid transparent}.cu-task-row .cu-task-custom-fields__header-items-value__dropdown-option_white,.dark-theme .cu-task-row .cu-task-custom-fields__header-items-value__dropdown-option_white{border-top:transparent;border-bottom:transparent}.cu-task-custom-fields__header-items-value__dropdown-option_light .cu-task-custom-fields__header-items-value__dropdown-option-text,.cu-task-custom-fields__header-items-value__dropdown-option_white .cu-task-custom-fields__header-items-value__dropdown-option-text{color:#343434}.cu-task-custom-fields__header-items-value__dropdown-option-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1.2;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-custom-fields__header-items-value__dropdown-option-text{font-family:var(--global-font-support)}}.cu-task-custom-fields__header-items-value__dropdown-option-text-dark{color:#000}.cu-task-custom-fields__header-arrow{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:10px;height:10px;transform:rotate(90deg);flex-shrink:0;fill:#bfbfbf;margin-top:7px;margin-left:7px}.cu-task-custom-fields__header-arrow_opened{transform:rotate(-90deg)}.cu-task-custom-fields__row-body:hover .cu-task-custom-fields__task-field.cu-custom-field:not(.cu-task-custom-fields__task-field_readonly):before{content:"";display:block;position:absolute;top:-1px;left:-1px;width:calc(100% + 2px);height:calc(100% + 2px);border:1px solid #b9bec7}.dark-theme .cu-task-custom-fields__row-body:hover .cu-task-custom-fields__task-field.cu-custom-field:not(.cu-task-custom-fields__task-field_readonly):before{border-color:#7c828d}.cu-task-custom-fields__row:first-child .cu-task-custom-fields__row-body:hover .cu-task-custom-fields__task-field.cu-custom-field:not(.cu-task-custom-fields__task-field_readonly):before{border-radius:0 6px 0 0}.cu-task-custom-fields__row:last-child .cu-task-custom-fields__row-body:hover .cu-task-custom-fields__task-field.cu-custom-field:not(.cu-task-custom-fields__task-field_readonly):before{border-radius:0 0 6px 0}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;border:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__content{font-family:var(--global-font-support)}}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__content-placeholder{opacity:.5;font-size:13px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input{border:0;height:100%;min-height:0;border-radius:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input:focus,.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input:hover{border:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_checkbox{width:100%!important;height:100%}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_checkbox:hover{border:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_dropdown{height:20px;min-height:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_dropdown .cu-dropdown__toggle{width:auto;max-width:100%;display:inline-flex;padding:0 8px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_dropdown .cu-custom-fields__form-input_dropdown-item{border-radius:6px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_dropdown .cu-custom-fields__form-input_dropdown-item-text{font-size:11px;font-weight:600}.cu-task-custom-fields__task-field.cu-custom-field cu-user-group{display:flex;align-items:center;flex-wrap:wrap;padding:0 8px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value cu-telephone-input{width:100%}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value .cu-custom-fields__form-input-group_phone{width:100%;border:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-select{border:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text,.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus{border:0;width:auto;flex-grow:1;padding-left:0}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field-type-tasks__container{padding:0 8px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value__users .cu-user-group__more.cu-user-group__more_lg{width:26px;height:26px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value__emoji{padding:0 8px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value__emoji .cu-emoji-custom-field-value__item{display:flex}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field-dropdown-labels .cu-custom-field-dropdown-labels__labels-container{border:0;padding:4px 6px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value__manual_progress{padding:0 10px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value__automaticprogress{margin-left:10px}.cu-task-custom-fields__task-field.cu-custom-field .cu-edit-task-custom-field-value__automaticprogress-value{margin-right:10px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field-type-formula__fx{justify-content:flex-start;padding-left:8px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field-type-formula__value{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;justify-content:flex-start;padding:0 10px;font-size:13px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field-type-attachment{padding:3px 20px 3px 10px;justify-content:flex-start}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field-type-attachment .cu-custom-field-type-attachment__plus{order:1;margin-left:0}.cu-task-custom-fields__task-field.cu-custom-field .datepicker__dates-input-container-inner.natural-language{border:0}.cu-task-custom-fields__task-field.cu-custom-field .datepicker__dates-input-container-inner.natural-language:hover{background:transparent}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__static{justify-content:flex-start;padding:0 10px;font-size:13px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__static a{font-size:13px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__static .cu-custom-fields__header-items-value__dropdown-option{width:auto;margin:0 -10px}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-field__static .cu-custom-fields__header-items-value__labels{width:auto;max-width:none}.cu-task-custom-fields__task-field.cu-custom-field .cu-custom-fields__form-input_textarea{padding-top:0;padding-bottom:0;margin-top:9px;margin-bottom:9px}.cu-task-custom-fields__resizer{height:100%;position:absolute;pointer-events:none;left:0;top:0}.cu-task-custom-fields__resizer-handle{pointer-events:all;transition:background .2s cubic-bezier(.785,.135,.15,.86) .1s;width:9px;height:calc(100% - 33px);cursor:col-resize;z-index:100;position:absolute;right:-5px;top:0;opacity:.2}.cu-task-custom-fields__resizer-handle:active,.cu-task-custom-fields__resizer-handle:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-custom-fields__resizer-handle:active,.cu-task-custom-fields__resizer-handle:hover{background:var(--theme-main-color)}}'],encapsulation:2,data:{animation:[f.f]},changeDetection:0}),e})()},T7eY:function(e,t,i){"use strict";i.d(t,"b",function(){return h}),i.d(t,"a",function(){return f.a});var o=i("ofXK"),n=i("gb9A"),s=i("K0KF"),c=i("1M0N"),a=i("bx+h"),r=i("3Pt+"),l=i("bFKe"),d=i("e6ZX"),u=i("EDFS"),m=i("5+WD"),p=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=p.Ub({type:e}),e.\u0275inj=p.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a,a.a,r.l,l.b,d.a,u.d,m.f]]}),e})();var f=i("lfRK")},TBcZ:function(e,t,i){"use strict";i.d(t,"a",function(){return Yi}),i.d(t,"b",function(){return Ji});var o=i("cC1p"),n=i("fXoL"),s=i("XNiG"),c=i("2Vo4"),a=i("LRne"),r=i("eNwd"),l=i("xgIS"),d=i("PqYM"),u=i("1G5W"),m=i("pLZG"),p=i("eIep"),h=i("nYR2"),f=i("lJxs"),b=i("JIr8"),g=i("Kj3r"),_=i("vkgz"),v=i("GJmQ"),k=i("2p4s"),y=i("iA4v"),w=i("T6L0"),x=i("4XV2"),I=i("YAnr"),T=i("Fjoz"),C=i("4f6Q"),D=i("Wl8T"),O=i.n(D),S=i("EQY2"),E=i.n(S),P=i("Wk/N"),j=i("s3LH");class A extends E.a{constructor(e){super(e),this.formatter=e}onCreate(){this.toolbar=this.createToolbar(),this.formatter.overlay.appendChild(this.toolbar),this.deleteButton=this.createDeleteButton(),this.formatter.overlay.appendChild(this.deleteButton),this.onEditorChangeBinded||(this.onEditorChangeBinded=this.onEditorChange.bind(this)),this.formatter.quill.on(P.h.EDITOR_CHANGE,this.onEditorChangeBinded)}onDestroy(){this.toolbar&&this.formatter.overlay.removeChild(this.toolbar),this.formatter.quill.off(P.h.EDITOR_CHANGE,this.onEditorChangeBinded)}onEditorChange(e,t,i,o){e===P.h.TEXT_CHANGE&&t&&t.ops.some(e=>e.insert||e.delete)&&this.formatter.hide()}createToolbar(){const e=document.createElement("div");return e.classList.add("blot-formatter__extra"),this.createAutosizeButton(e),this.createPreviewButton(e),e}createAutosizeButton(e){const t=document.createElement("div");t.classList.add("blot-formatter__extra-autosize"),t.innerHTML='<svg width="91" height="40" viewBox="0 0 91 40" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero"><path d="M73.93 25l-5.58 5.58a4.93 4.93 0 0 0-.04 7.03 4.91 4.91 0 0 0 7.02-.04l14.15-14.15a4.75 4.75 0 0 0 1.43-3.52 4.64 4.64 0 0 0-1.4-3.5L75.55 2.4a4.92 4.92 0 0 0-7.04.04 4.93 4.93 0 0 0-.03 7.04L73.98 15l-.05 10zM17.8 15.16l5.59-5.58c1.9-1.91 2-5.08.04-7.03a5.05 5.05 0 0 0-7.04.03L2.25 16.73a4.75 4.75 0 0 0-1.43 3.52c0 1.27.48 2.6 1.4 3.51L16.2 37.75a4.93 4.93 0 0 0 7.03-.04c1.98-1.98 2-5.08.04-7.03l-5.53-5.54.06-9.98z"/><path d="M9 15h70v10H9z"/></g></svg>',t.addEventListener("click",()=>{const e=this.formatter.currentSpec.getTargetElement();e&&(e.removeAttribute("width"),e.removeAttribute("height"),e.removeAttribute("data-align"),this.formatter.update())}),e.appendChild(t)}createPreviewButton(e){const t=document.createElement("div");t.classList.add("blot-formatter__extra-preview"),t.innerHTML='<svg width="90" height="90" viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M30.76 51.8L9.89 72.9V65c0-2.7-2.18-5-4.94-5A5.05 5.05 0 0 0 0 65v20c0 1.3.5 2.6 1.48 3.5.9.9 2.18 1.5 3.47 1.5h19.78c2.76 0 4.94-2.2 4.94-5s-2.18-5-4.94-5H16.9l20.87-21.1c.89-.9 1.48-2.2 1.48-3.5 0-1.3-.5-2.6-1.48-3.5a4.78 4.78 0 0 0-7.02-.1zM16.91 10.4h7.82c2.76 0 4.94-2.2 4.94-5 0-1.3-.5-2.6-1.48-3.5A5.01 5.01 0 0 0 24.73.4H4.95c-1.3 0-2.58.5-3.47 1.5C.5 2.8 0 4 0 5.4v20c0 2.8 2.18 5 4.95 5 2.76 0 4.94-2.2 4.94-5v-7.9l21.07 21.4c.89.9 2.17 1.5 3.46 1.5 1.28 0 2.57-.5 3.46-1.5.89-.9 1.48-2.2 1.48-3.5 0-1.3-.5-2.6-1.48-3.5L16.9 10.4zM84.07 60a4.92 4.92 0 0 0-4.95 5v7.9L58.25 52a5.06 5.06 0 0 0-3.56-1.5 5.12 5.12 0 0 0-5.04 5c0 1.3.5 2.6 1.38 3.5L71.7 80H63.9a4.92 4.92 0 0 0-4.94 5c0 1.3.49 2.6 1.48 3.5.89.9 2.17 1.5 3.46 1.5h19.78c1.38 0 2.87-.6 3.76-1.5.6-.6 1.68-1.9 1.68-3.5V65c-.1-2.8-2.27-5-5.04-5zM54.3 40.1c1.28 0 2.57-.5 3.46-1.5l21.36-21.5V25c0 2.8 2.18 5 4.95 5S89 27.8 89 25V5c0-1.3-.5-2.6-1.48-3.5-.9-1-2.18-1.5-3.46-1.5H64.29a4.92 4.92 0 0 0-4.95 5c0 2.8 2.18 5 4.95 5h7.8L50.85 31.6c-.9.9-1.49 2.2-1.49 3.5 0 1.3.5 2.6 1.49 3.5.89 1 2.17 1.5 3.46 1.5z"/></g></svg>',t.addEventListener("click",()=>{const e=this.formatter.currentSpec.getTargetElement();if(!e)return;const t=e.getAttribute("data-id"),i=document.createEvent("Event");i.initEvent(P.b,!0,!0),i.detail={id:t,url:e.src,original:window.event},document.dispatchEvent(i)}),e.appendChild(t)}createDeleteButton(){const e=document.createElement("div");return e.classList.add("blot-formatter__delete"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"/></svg>',e.addEventListener("click",()=>{if(!this.formatter.currentSpec.getTargetElement())return;const e=j.d.find(this.formatter.currentSpec.getTargetElement());e&&e.deleteAt(0),this.formatter.hide()}),e}}var $=i("LTcn"),U=i.n($);class R extends U.a{constructor(e){super(e),this.formatter=e}onCustomMouseDown(e){this.onMouseDown(e),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onMouseUp),this.onCustomDragBinded||(this.onCustomDragBinded=this.onCustomDrag.bind(this)),this.onCustomMouseUpBinded||(this.onCustomMouseUpBinded=this.onCustomMouseUp.bind(this)),document.addEventListener("mousemove",this.onCustomDragBinded),document.addEventListener("mouseup",this.onCustomMouseUpBinded),e.preventDefault(),e.stopPropagation()}onCustomDrag(e){if(!this.formatter.currentSpec)return;const t=this.formatter.currentSpec.getTargetElement();if(!t)return;const i=e.clientX-this.dragStartX;let o=0;o=this.dragHandle===this.topLeftHandle||this.dragHandle===this.bottomLeftHandle?Math.round(this.preDragWidth-i):Math.round(this.preDragWidth+i),o>t.parentElement.clientWidth&&(o=t.parentElement.clientWidth);const n=this.targetRatio*o;t.setAttribute("width",""+o),t.setAttribute("height",""+n),this.formatter.update()}onCustomMouseUp(){this.setCursor(""),document.removeEventListener("mousemove",this.onCustomDragBinded),document.removeEventListener("mouseup",this.onCustomMouseUpBinded),this.onCustomDragBinded=void 0,this.onCustomMouseUpBinded=void 0}createHandle(e,t){this.onCustomMouseDownBinded||(this.onCustomMouseDownBinded=this.onCustomMouseDown.bind(this));const i=document.createElement("div");return i.classList.add(this.formatter.options.resize.handleClassName),i.setAttribute("data-position",e),i.style.cursor=t,this.formatter.options.resize.handleStyle&&Object.assign(i.style,this.formatter.options.resize.handleStyle),i.addEventListener("mousedown",this.onCustomMouseDownBinded),i}}var M=i("/qOb");class F extends E.a{constructor(){super(...arguments),this.onKeyUp=e=>{if(this.formatter.currentSpec&&this.formatter.quill.getSelection(!1)&&(e.keyCode===M.a.DELETE||e.keyCode===M.a.BACKSPACE)){const e=j.d.find(this.formatter.currentSpec.getTargetElement());e&&e.deleteAt(0),this.formatter.hide()}}}onCreate(){document.addEventListener("keyup",this.onKeyUp,!0),this.formatter.quill.root.addEventListener("input",this.onKeyUp,!0)}onDestroy(){document.removeEventListener("keyup",this.onKeyUp,!0),this.formatter.quill.root.removeEventListener("input",this.onKeyUp,!0)}}class L extends O.a{constructor(){super(...arguments),this.onClick=e=>{const t=e.target;t instanceof HTMLElement&&"IMG"===t.tagName&&t.classList&&t.classList.contains("ql-img")&&(this.img=t,this.formatter.show(this))}}getActions(){return[R,F,A]}setSelection(){const e=j.d.find(this.img);this.formatter.quill.setSelection(e?this.formatter.quill.getIndex(e):null)}}var N=i("711E"),z=i.n(N),q=i("BYBp"),G=i("Mx8Z");class V extends E.a{constructor(e){super(e),this.formatter=e,this.onMouseDown=e=>{if(!(e.target instanceof HTMLElement))return;if(this.dragHandle=e.target,this.setCursor(this.dragHandle.style.cursor),!this.formatter.currentSpec)return;const t=this.formatter.currentSpec.getTargetElement();if(!t)return;const i=t.getBoundingClientRect();this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.preDragWidth=i.width,this.preDragHeight=i.height,this.targetRatio=i.height/i.width,document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.onMouseUp),e.preventDefault(),e.stopPropagation()},this.onDrag=e=>{if(!this.formatter.currentSpec)return;const t=this.formatter.currentSpec.getTargetElement();if(!t)return;const i=t.getAttribute("service"),o=G.b.includes(i),n=e.clientX-this.dragStartX,s=e.clientY-this.dragStartY;let c=0,a=0;c=this.dragHandle===this.topLeftHandle||this.dragHandle===this.bottomLeftHandle?Math.round(this.preDragWidth-n):Math.round(this.preDragWidth+n),a=o?this.targetRatio*c:this.dragHandle===this.topLeftHandle||this.dragHandle===this.topRightHandle?Math.round(this.preDragHeight-s):Math.round(this.preDragHeight+s),t.setAttribute("width",""+c),t.setAttribute("height",""+a),t.style.setProperty("width",c?c+"px":null),t.style.setProperty("height",a?a+"px":null),this.formatter.update()},this.onMouseUp=()=>{this.setCursor(""),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onMouseUp)},this.topLeftHandle=this.createHandle("top-left","nwse-resize"),this.topRightHandle=this.createHandle("top-right","nesw-resize"),this.bottomRightHandle=this.createHandle("bottom-right","nwse-resize"),this.bottomLeftHandle=this.createHandle("bottom-left","nesw-resize"),this.dragHandle=null,this.dragStartX=0,this.dragStartY=0,this.preDragWidth=0,this.preDragHeight=0,this.targetRatio=0}onCreate(){this.formatter.overlay.appendChild(this.topLeftHandle),this.formatter.overlay.appendChild(this.topRightHandle),this.formatter.overlay.appendChild(this.bottomRightHandle),this.formatter.overlay.appendChild(this.bottomLeftHandle),this.repositionHandles(this.formatter.options.resize.handleStyle)}onDestroy(){this.setCursor(""),this.formatter.overlay.removeChild(this.topLeftHandle),this.formatter.overlay.removeChild(this.topRightHandle),this.formatter.overlay.removeChild(this.bottomRightHandle),this.formatter.overlay.removeChild(this.bottomLeftHandle),this.topLeftHandle=null,this.topRightHandle=null,this.bottomRightHandle=null,this.bottomLeftHandle=null,this.dragHandle=null}createHandle(e,t){const i=document.createElement("div");return i.classList.add(this.formatter.options.resize.handleClassName),i.setAttribute("data-position",e),i.style.cursor=t,this.formatter.options.resize.handleStyle&&Object.assign(i.style,this.formatter.options.resize.handleStyle),i.addEventListener("mousedown",this.onMouseDown),i}repositionHandles(e){let t="0px",i="0px";e&&(e.width&&(t=-parseFloat(e.width)/2+"px"),e.height&&(i=-parseFloat(e.height)/2+"px")),Object.assign(this.topLeftHandle.style,{left:t,top:i}),Object.assign(this.topRightHandle.style,{right:t,top:i}),Object.assign(this.bottomRightHandle.style,{right:t,bottom:i}),Object.assign(this.bottomLeftHandle.style,{left:t,bottom:i})}setCursor(e){if(document.body&&(document.body.style.cursor=e),this.formatter.currentSpec){const t=this.formatter.currentSpec.getOverlayElement();t&&(t.style.cursor=e)}}}class B extends z.a{constructor(e){super(e),this.formatter=e,this.onClick=e=>{const t=Object(q.a)(e).find(e=>e.className&&"string"==typeof e.className&&e.className.split(" ").includes("ql-frame"));t&&t instanceof HTMLElement&&"small"!==t.getAttribute("data-size")&&(this.target=t,this.formatter.show(this))},this.target=null}init(){this.formatter.quill.root.addEventListener("click",this.onClick)}getTargetElement(){return this.target}onHide(){this.target=null}getActions(){return[V,F]}setSelection(){const e=j.d.find(this.target);this.formatter.quill.setSelection(e?this.formatter.quill.getIndex(e)+1:null)}}var X=i("l7P3"),H=i("I1n0"),W=i("IzEk"),K=i("NQoA"),Q=i("b3J4"),Z=i("wT7j"),Y=i("JKnl"),J=i("3pVM"),ee=i("06+Y"),te=i("skaf"),ie=i("DeYq"),oe=i("lU5h"),ne=i("6hbx"),se=i("ouif"),ce=i("8v1e"),ae=i("jJQC"),re=i("IzLi"),le=i("lE2N"),de=i("Muja"),ue=i("YYQ8"),me=i("h7sE"),pe=i("IE5h"),he=i("n7fi"),fe=i("RecH"),be=i("YrjB"),ge=i("RtrR"),_e=i("/+FX"),ve=i("jJW4"),ke=i("CG/S"),ye=i("drq7"),we=i("Jf2N"),xe=i("G2WA"),Ie=i("5EAn"),Te=i("HBOB"),Ce=i("4H0A"),De=i("SBM/"),Oe=i("Dvla"),Se=i("ZlQq"),Ee=i("rLOZ"),Pe=i("AeD3"),je=i("aWji"),Ae=i("8it8"),$e=i("N4ya"),Ue=i("ofXK");let Re=(()=>{class e{constructor(){this.createCommentText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_create-comment:Create comment`,this.createSubtaskText=$localize`:@@common_create-subtask:Create subtask`,this.createTaskText=$localize`:@@common_create-task:Create task`,this.embedYouTubeText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_embed-youtube:Embed YouTube`,this.formatNotAllowedInTablesText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_cant-use-in-table:This feature can't be used inside of tables`,this.hightlightTextToCreateCommentText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_highlight-texts-to-create-comment:You can't create comment here. Please highlight only text in order to create comments.`,this.hightlightTextToCreateTaskText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_highlight-texts-to-create-task:You can't create tasks here. Please highlight only text in order to create tasks.`,this.hightlightTextToCreateSubTaskText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_highlight-texts-to-create-subtask:You can't create subtasks here. Please highlight only text in order to create subtasks.`,this.insertButtonText=$localize`:@@common_insert-button:Insert button`,this.insertTableText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_insert-table:Insert Table`,this.insertTocText=$localize`:@@cu-rich-editor-toolbar__tooltip-msg_insert-toc:Insert table of content`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac}),e})();var Me=i("NsZK"),Fe=i("LdyQ"),Le=i("MJvn"),Ne=i("UdVN"),ze=i("n+1/");function qe(e,t){if(1&e){const e=n.dc();n.cc(0,"div",53),n.cc(1,"div",54),n.dd(2," FONT COLOR "),n.bc(),n.cc(3,"div",55),n.cc(4,"div",56),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:!1})}),n.dd(5," A "),n.bc(),n.cc(6,"div",57),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#64473a"})}),n.dd(7," A "),n.bc(),n.cc(8,"div",58),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#d9730d"})}),n.dd(9," A "),n.bc(),n.cc(10,"div",59),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#dfab01"})}),n.dd(11," A "),n.bc(),n.cc(12,"div",60),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#0b6e99"})}),n.dd(13," A "),n.bc(),n.cc(14,"div",61),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#6940a5"})}),n.dd(15," A "),n.bc(),n.cc(16,"div",62),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#ad1a72"})}),n.dd(17," A "),n.bc(),n.cc(18,"div",63),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"color",value:"#e03e3e"})}),n.dd(19," A "),n.bc(),n.bc(),n.bc()}2&e&&n.ad("width",142,"px")}function Ge(e,t){if(1&e){const e=n.dc();n.cc(0,"div",53),n.cc(1,"div",64),n.gc(2,65),n.bc(),n.cc(3,"div",66),n.cc(4,"div",67),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:!1})}),n.bc(),n.cc(5,"div",68),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:"#fffa78"})}),n.bc(),n.cc(6,"div",69),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:"#e6ffcf"})}),n.bc(),n.cc(7,"div",70),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:"#ffe0e0"})}),n.bc(),n.cc(8,"div",71),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:"#cae4f6"})}),n.bc(),n.cc(9,"div",72),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:"#ffdbba"})}),n.bc(),n.cc(10,"div",73),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"background",value:"#eedbf6"})}),n.bc(),n.bc(),n.bc()}2&e&&n.ad("width",142,"px")}function Ve(e,t){1&e&&n.Xb(0,"div",4)}function Be(e,t){if(1&e){const e=n.dc();n.cc(0,"div",92),n.qc("click",function(){return n.Uc(e),n.uc(2).onAction.emit({format:"task"})}),n.Xb(1,"div",79),n.cc(2,"div",80),n.gc(3,93),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("ql-task_disabled",e.createTaskDisabled),n.Dc("cuTooltip",e.createTaskDisabled?e.richEditorToolbarStringsService.hightlightTextToCreateTaskText:e.richEditorToolbarStringsService.createTaskText),n.Ib(1),n.Dc("icon","cu2-plus")}}function Xe(e,t){if(1&e){const e=n.dc();n.cc(0,"div",94),n.qc("click",function(){return n.Uc(e),n.uc(2).onAction.emit({format:"subtask"})}),n.Xb(1,"div",79),n.cc(2,"div",80),n.gc(3,95),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("ql-task_disabled",e.createTaskDisabled),n.Dc("cuTooltip",e.createTaskDisabled?e.richEditorToolbarStringsService.hightlightTextToCreateSubTaskText:e.richEditorToolbarStringsService.createSubtaskText),n.Ib(1),n.Dc("icon","cu2-plus")}}function He(e,t){if(1&e){const e=n.dc();n.cc(0,"div",96),n.qc("click",function(){return n.Uc(e),n.uc(2).onAction.emit({format:"comment"})}),n.Xb(1,"div",79),n.cc(2,"div",80),n.gc(3,97),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("ql-comment_disabled",e.createCommentDisabled),n.Dc("cuTooltip",e.createCommentDisabled?e.richEditorToolbarStringsService.hightlightTextToCreateCommentText:e.richEditorToolbarStringsService.createCommentText),n.Ib(1),n.Dc("icon","comment")}}function We(e,t){if(1&e){const e=n.dc();n.cc(0,"div",82),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.inTable?null:t.onAction.emit({format:"l"})}),n.Xb(1,"div",98),n.cc(2,"div",80),n.gc(3,99),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("cu-rich-editor-toolbar__add-item_disabled",e.inTable),n.Dc("cuTooltip",e.inTable?e.richEditorToolbarStringsService.formatNotAllowedInTablesText:null),n.Ib(1),n.Dc("icon","cu2-view-1")}}function Ke(e,t){if(1&e){const e=n.dc();n.cc(0,"div",100),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.inTable?null:t.onAction.emit({format:"button"})}),n.Xb(1,"div",79),n.cc(2,"div",80),n.gc(3,101),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("cu-rich-editor-toolbar__add-item_disabled",e.inTable),n.Dc("cuTooltip",e.inTable?e.richEditorToolbarStringsService.formatNotAllowedInTablesText:e.richEditorToolbarStringsService.insertButtonText)("tooltipDelay",e.inTable?0:200),n.Ib(1),n.Dc("icon","command-button")}}function Qe(e,t){if(1&e){const e=n.dc();n.cc(0,"div",100),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.inTable?null:t.onAction.emit({format:"table-content"})}),n.Xb(1,"div",102),n.cc(2,"div",80),n.gc(3,103),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("cu-rich-editor-toolbar__add-item_disabled",e.inTable),n.Dc("cuTooltip",e.inTable?e.richEditorToolbarStringsService.formatNotAllowedInTablesText:e.richEditorToolbarStringsService.insertTocText)("tooltipDelay",e.inTable?0:200),n.Ib(1),n.Dc("icon","command-list")}}const Ze=function(e){return{display:e}};function Ye(e,t){if(1&e){const e=n.dc();n.cc(0,"div",74),n.bd(1,Be,4,4,"div",75),n.bd(2,Xe,4,4,"div",76),n.bd(3,He,4,4,"div",77),n.cc(4,"div",78),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"image"})}),n.Xb(5,"div",79),n.cc(6,"div",80),n.gc(7,81),n.bc(),n.bc(),n.cc(8,"div",82),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.inTable?null:t.onAction.emit({format:"divider"})}),n.Xb(9,"div",79),n.cc(10,"div",80),n.gc(11,83),n.bc(),n.bc(),n.cc(12,"div",84),n.qc("click",function(){return n.Uc(e),n.uc().onAction.emit({format:"list",value:"toggled"})}),n.Xb(13,"div",79),n.cc(14,"div",80),n.gc(15,85),n.bc(),n.bc(),n.cc(16,"div",86),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.inTable?null:t.onAction.emit({format:"table"})}),n.Xb(17,"div",79),n.cc(18,"div",80),n.gc(19,87),n.bc(),n.bc(),n.bd(20,We,4,4,"div",88),n.bd(21,Ke,4,5,"div",89),n.bd(22,Qe,4,5,"div",89),n.cc(23,"div",90),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.inTable?null:t.onAction.emit({format:"youtube"})}),n.Xb(24,"div",79),n.cc(25,"div",80),n.gc(26,91),n.bc(),n.bc(),n.bc()}if(2&e){const e=n.uc();n.ad("width",240,"px"),n.Ib(1),n.Dc("ngIf",e.allowCreateTask&&e.isSticky),n.Ib(1),n.Dc("ngIf",e.allowCreateSubtask&&e.isSticky),n.Ib(1),n.Dc("ngIf",e.allowComments&&e.isSticky),n.Ib(1),n.Ob("ql-formats_hidden",!e.isStatic),n.Ib(1),n.Dc("icon","cu2-image"),n.Ib(3),n.Ob("ql-formats_hidden",!e.isStatic)("cu-rich-editor-toolbar__add-item_disabled",e.inTable),n.Dc("cuTooltip",e.inTable?e.richEditorToolbarStringsService.formatNotAllowedInTablesText:null),n.Ib(1),n.Dc("icon","cu2-horizontal-rule"),n.Ib(3),n.Ob("ql-formats_hidden",!e.isStatic),n.Dc("ngStyle",n.Hc(31,Ze,e.hideToggleList?"none":"")),n.Ib(1),n.Dc("icon","cu2-toggle-list"),n.Ib(3),n.Ob("cu-rich-editor-toolbar__add-item_disabled",e.inTable),n.Dc("cuTooltip",e.inTable?e.richEditorToolbarStringsService.formatNotAllowedInTablesText:e.richEditorToolbarStringsService.insertTableText)("tooltipDelay",e.inTable?0:200),n.Ib(1),n.Dc("icon","cu2-table"),n.Ib(3),n.Dc("ngIf",e.showListOfTasks),n.Ib(1),n.Dc("ngIf",e.allowButtonFormat),n.Ib(1),n.Dc("ngIf",e.allowTableContentFormat),n.Ib(1),n.Ob("cu-rich-editor-toolbar__add-item_disabled",e.inTable),n.Dc("cuTooltip",e.inTable?e.richEditorToolbarStringsService.formatNotAllowedInTablesText:e.richEditorToolbarStringsService.embedYouTubeText)("tooltipDelay",e.inTable?200:0),n.Ib(1),n.Dc("icon","youtube-symbol_color")}}function Je(e,t){if(1&e){const e=n.dc();n.tc(),n.sc(),n.cc(0,"div",5),n.cc(1,"div",104),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.onTogglePinned.emit(!t.isPinned)}),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ob("ql-formats_hidden",!e.isPinned),n.Ib(1),n.Ob("cu-rich-editor-toolbar__pin_active",e.isPinned),n.Dc("cuTooltip",e.pinnedText)}}function et(e,t){if(1&e){const e=n.dc();n.cc(0,"div",5),n.cc(1,"div",104),n.qc("click",function(){n.Uc(e);const t=n.uc(2);return t.onTogglePinned.emit(!t.isPinned)}),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ob("ql-formats_hidden",e.isPinned),n.Ib(1),n.Ob("cu-rich-editor-toolbar__pin_active",e.isPinned),n.Dc("cuTooltip",e.pinnedText)}}function tt(e,t){if(1&e){const e=n.dc();n.tc(),n.sc(),n.cc(0,"div",105),n.cc(1,"div",106),n.bd(2,et,2,5,"div",50),n.cc(3,"button",107),n.qc("click",function(){return n.Uc(e),n.uc().toggleToolbar()}),n.tc(),n.cc(4,"svg",108),n.Xb(5,"path",109),n.bc(),n.bc(),n.bc(),n.sc(),n.cc(6,"div",5),n.Xb(7,"button",110),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(2),n.Dc("ngIf",e.allowPin),n.Ib(3),n.Ob("ql-fill_active",e.isFullToolbar),n.Ib(1),n.Ob("ql-formats_hidden",!e.isFullToolbar)}}function it(e,t){if(1&e&&(n.cc(0,"button",117),n.Xb(1,"div",114),n.ac(2),n.gc(3,118),n.Zb(),n.bc()),2&e){const e=n.uc(2);n.Ob("ql-task_disabled",e.createTaskDisabled),n.Dc("cuTooltip",e.createTaskDisabled?e.richEditorToolbarStringsService.hightlightTextToCreateTaskText:e.richEditorToolbarStringsService.createTaskText)}}function ot(e,t){if(1&e&&(n.cc(0,"button",119),n.Xb(1,"div",120),n.ac(2),n.gc(3,121),n.Zb(),n.bc()),2&e){const e=n.uc(2);n.Ob("ql-comment_disabled",e.createCommentDisabled),n.Dc("cuTooltip",e.createCommentDisabled?e.richEditorToolbarStringsService.hightlightTextToCreateCommentText:e.richEditorToolbarStringsService.createCommentText)}}function nt(e,t){if(1&e&&(n.tc(),n.sc(),n.cc(0,"div",111),n.bd(1,it,4,3,"button",112),n.cc(2,"button",113),n.Xb(3,"div",114),n.ac(4),n.gc(5,115),n.Zb(),n.bc(),n.bd(6,ot,4,3,"button",116),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngIf",e.allowCreateTask),n.Ib(1),n.Ob("cu-hidden",!e.allowCreateSubtask)("ql-task_disabled",e.createTaskDisabled),n.Dc("cuTooltip",e.createTaskDisabled?e.richEditorToolbarStringsService.hightlightTextToCreateTaskText:e.richEditorToolbarStringsService.createSubtaskText),n.Ib(4),n.Dc("ngIf",e.allowComments)}}const st=y.b.import("ui/icons");st.bold=['<svg width="8" height="11" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3c0-1.93-1.57-3-3.5-3H0v11h4.5a3.5 3.5 0 0 0 1.85-6.47C6.76 3.96 7 3.5 7 3zM4 2H2v2h2c.5 0 1-.5 1-1s-.5-1-1-1zm.5 4H2v3h2.5a1.5 1.5 0 1 0 0-3z" class="ql-fill"/></svg>'].join(""),st.italic=['<svg width="9" height="11" xmlns="http://www.w3.org/2000/svg"><path d="M9 0l-.5 2h-2l-2 7h2L6 11H0l.5-2h2l2-7h-2L3 0h6z" class="ql-fill"/></svg>'].join(""),st.underline=['<svg width="10" height="13" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0h2v7a2 2 0 1 0 4 0V0h2v7a4 4 0 1 1-8 0V0zm9 13v-1H0v1h10z" class="ql-fill"/></svg>'].join(""),st.strike=['<svg width="10" height="11" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h2a3 3 0 0 0-3-3H4a3 3 0 0 0-2.24 5H0v1h5a2 2 0 0 1 2 2 1 1 0 0 1-1 1H4a1 1 0 0 1-1-1H1a3 3 0 0 0 3 3h2a3 3 0 0 0 2.24-5H10V5H5a2 2 0 0 1-2-2 1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z" class="ql-fill"/></svg>'].join(""),st.list.ordered=['<svg width="15" height="14" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0h2v3h1v1H0V3h1V1H0V0zm15 1H5v2h10V1zm0 5H5v2h10V6zM5 11h10v2H5v-2zM2 5H0v1.5h1V6h1v.5L0 8v1h3V8H1.66L3 7V5H2zm-.66 7l.66-.5V11H1v.5H0V10h3v4H0v-1.5h1v.5h1v-.5l-.66-.5z" class="ql-fill"/></svg>'].join(""),st.list.bullet=['<svg width="14" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 0H0v2h2V0zm12 0H4v2h10V0zM0 5h2v2H0V5zm14 0H4v2h10V5zM0 10h2v2H0v-2zm14 0H4v2h10v-2z" class="ql-fill"/></svg>'].join(""),st.list.unchecked=['<svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="16" rx="8" fill="#6BC950"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 11.411L3.586 7.999 5 6.583l2 2 3.998-3.997L12.413 6 7 11.412z" fill="#fff"/></svg>'].join(""),st.image=['<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z" class="ql-fill"/></svg>'].join(""),st.link=['<svg width="16" height="10" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 0a5 5 0 0 0 0 10h2V8H5a3 3 0 0 1 0-6h2V0H5zm6 10H9V8h2a3 3 0 1 0 0-6H9V0h2a5 5 0 0 1 0 10zm0-6H5v2h6V4z" class="ql-fill"/></svg>'].join(""),st.divider=['<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M640 239.87v31.26A15.88 15.88 0 0 1 624.14 287H15.87A15.88 15.88 0 0 1 0 271.13v-31.26A15.88 15.88 0 0 1 15.87 224h608.27A15.88 15.88 0 0 1 640 239.87z" class="ql-fill"/></svg>'].join(""),st.blockquote=['<svg width="13" height="11" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 0a4 4 0 0 0-4 4v7h6V5H2V4c0-1.1.9-2 2-2h1V0H4zm0 7H2v2h2V7zm7-7a4 4 0 0 0-4 4v7h6V5H9V4c0-1.1.9-2 2-2h1V0h-1zm0 7H9v2h2V7z" class="ql-fill"/></svg>'].join(""),st.code=['<svg width="14" height="12" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M0 0h14v12H0V0zm2 2h10v8H2V2z" class="ql-fill"/><path fill="#FD71AF" d="M4 3h6v2H8v4H6V5H4z"/></g></svg>'].join(""),st["code-block"]=['<svg width="16" height="13" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.08 0L6 12h1.93l2.08-12H8.08zM16 6l-4 4-1.41-1.41L13.17 6 10.6 3.41 12 2l4 4zM0 6l4 4L5.41 8.6 2.83 6 5.4 3.42 4 2 0 6z" class="ql-fill"/></svg>'].join(""),st.background=['<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0h9v1.5h1a2 2 0 0 1 2 2V6a2 2 0 0 1-2 2H6v2h1v2H3v-2h1V6h6V3.5H9V5H0V0zm2 2h5v1H2V2z" class="ql-fill"/></svg>'].join(""),st.clean=['<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.52 4.9A6 6 0 0 1 3.1 4.52l8.37 8.36zm1.41-1.42L4.52 3.1a6 6 0 0 1 8.37 8.37z" class="ql-fill"/></svg>'].join(""),st.indent["+1"]=['<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 0H0v2h14V0zm0 4H6v2h8V4zM6 8h8v2H6V8zm8 4H0v2h14v-2zM5 7l-3.59 3.59L0 9.17 2.17 7 0 4.83l1.42-1.41L5 7z" class="ql-fill"/></svg>'].join(""),st.indent[-1]=['<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 0H0v2h14V0zm0 4H6v2h8V4zM6 8h8v2H6V8zm8 4H0v2h14v-2zM0 7l3.59 3.59L5 9.17 2.83 7 5 4.83 3.58 3.42 0 7z" class="ql-fill"/></svg>'].join(""),st.align[""]=['<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 14H0v-2h9v2zm5-4H0V8h14v2zM0 6h9V4H0v2zm14-4H0V0h14v2z" class="ql-fill"/></svg>'].join(""),st.align.center=['<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 14H3v-2h8v2zm3-4H0V8h14v2zM3 6h8V4H3v2zm11-4H0V0h14v2z" class="ql-fill"/></svg>'].join(""),st.align.right=['<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 14h9v-2H5v2zm-5-4h14V8H0v2zm14-4H5V4h9v2zM0 2h14V0H0v2z" class="ql-fill"/></svg>'].join(""),st.markdown=['<svg width="21" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M593.8 59.1H46.2C20.7 59.1 0 79.8 0 105.2v301.5c0 25.5 20.7 46.2 46.2 46.2h547.7c25.5 0 46.2-20.7 46.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1zM338.5 360.6H277v-120l-61.5 76.9-61.5-76.9v120H92.3V151.4h61.5l61.5 76.9 61.5-76.9h61.5v209.2zm135.3 3.1L381.5 256H443V151.4h61.5V256H566z" class="ql-fill"/></svg>'].join("");let ct=(()=>{class e{constructor(e,t){this.element=e,this.richEditorToolbarStringsService=t,this.allowComments=!1,this.allowCreateTask=!0,this.allowCreateSubtask=!1,this.allowButtonFormat=!1,this.allowTableContentFormat=!1,this.createTaskDisabled=!1,this.createCommentDisabled=!1,this.hideChecklist=!1,this.hideToggleList=!1,this.inTable=!1,this.activeFormats={},this.showListOfTasks=!0,this.qlHeaderFormatClicked=new n.o,this.onTogglePinned=new n.o,this.onAction=new n.o,this.isFullToolbar=!1,this.activeBackground=void 0,this.activeFontColor=void 0}get pinnedText(){return this.isPinned?$localize`:@@rich-editor_toggle-pin-toolbar--unpin:Unpin this toolbar`:$localize`:@@rich-editor_toggle-pin-toolbar:Pin to top`}ngOnInit(){}ngOnChanges(e){const t=e.activeFormats;t&&(this.activeBackground=t.currentValue.background,this.activeFontColor=t.currentValue.color)}toggleToolbar(){this.isFullToolbar=!this.isFullToolbar}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.m),n.Wb(Re))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-rich-editor-toolbar"]],hostAttrs:[1,"cu-rich-editor-toolbar"],hostVars:14,hostBindings:function(e,t){2&e&&(n.ad("top",t.stickyTopPX,"px"),n.Ob("cu-rich-editor-toolbar_full",t.isFullToolbar)("cu-rich-editor-toolbar_sticky",t.isSticky)("cu-rich-editor-toolbar_hidden",t.isPinned&&!t.isSticky)("cu-rich-editor-toolbar_disabled",t.disabled)("cu-hidden",t.isHidden)("cu-hidden-print",!0))},inputs:{isStatic:"isStatic",isSticky:"isSticky",isPinned:"isPinned",isHidden:"isHidden",allowPin:"allowPin",disabled:"disabled",allowComments:"allowComments",allowCreateTask:"allowCreateTask",allowCreateSubtask:"allowCreateSubtask",allowButtonFormat:"allowButtonFormat",allowTableContentFormat:"allowTableContentFormat",createTaskDisabled:"createTaskDisabled",createCommentDisabled:"createCommentDisabled",stickyTopPX:"stickyTopPX",hideChecklist:"hideChecklist",hideToggleList:"hideToggleList",inTable:"inTable",activeFormats:"activeFormats",showListOfTasks:"showListOfTasks"},outputs:{qlHeaderFormatClicked:"qlHeaderFormatClicked",onTogglePinned:"onTogglePinned",onAction:"onAction"},features:[n.Hb([Re]),n.Gb],decls:75,vars:24,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,x,I,T,C,D,O,S,E,P,j,A,$,U,R,M;return e=$localize`:@@rich-editor_formatting--text-bold␟d235ae9c2af04d4b113c0fad596ab23c2fe884f9␟771664384252640128:Bold`,t=$localize`:@@rich-editor_formatting--text-italic␟5d03f644fa70efc613805db7af74801cebf33bf6␟266505507282188406:Italic`,i=$localize`:@@rich-editor_formatting--text-underline␟46bceaa64c9270b80c5b57d8a4fc96951c059539␟6589256532931398744:Underline`,o=$localize`:@@rich-editor_formatting--text-strikethrough␟b24ca8f3b3596794629fb1a49de783d5b45a275e␟6053004284706925412:Strikethrough`,n=$localize`:@@rich-editor_list--bulleted␟a7e45b34f12a9cfdfb89fa339c6d857145867663␟9080312564183839552:Bulleted list`,s=$localize`:@@rich-editor_list--numeric␟e14ea1dbbfdde7feba192964c15af8a50a941042␟1734816537699932097:Numeric list`,c=$localize`:@@common_checklist␟bc086c3e3aa05d214fad1d43ae729aadf1d9321c␟6269606295190909224:Checklist`,a=$localize`:@@rich-editor_formatting--quote␟3ec88737802269bcef0c5cfcec11e9fe3a04e60d␟1103299628984958400:Quote`,r=$localize`:@@rich-editor_formatting--code-block␟212a9d42a9475345e6149c01e97172b7c285f639␟5953425146193292178:Code block`,l=$localize`:@@rich-editor_insert-link␟774c398b187a42cdbae4e9c49aefff58b199d41a␟4140577192914036096:Insert a link`,d=$localize`:@@rich-editor_code␟68572de01b84c678be4bf8a27b990ecac2f41ce9␟8186013988289067040:Code`,u=$localize`:@@rich-editor_font-color␟c75df27a36a5f700d117c345f7cdcb84bcb94664␟5886070776186611401:Font color`,m=$localize`:@@rich-editor_text-background␟d7eb4983039a6984c6ef7527761a05fe7474df51␟7804539099706969646:Text background`,p=$localize`:@@rich-editor_align-text␟3ce36b6f1e9c35f8be4302db602e99334e80ac94␟4138921460891619807:Align text`,h=$localize`:@@rich-editor_formatting--indent-plus-plus␟ff21e0d850a9606719c5f181053adb7c19a0516f␟3032835673399897447:Increase the indent level`,f=$localize`:@@rich-editor_formatting--indent-minus-minus␟090112c08d08525b6206f3fe18e1dc50cd5ca1dd␟9100474156975120049:Decrease the indent level`,b=$localize`:@@rich-editor_text-background--clear␟f4b89f17a571fcef871bc19a8cc9e4f9171565fc␟1347331357824587046:Clear text background`,g=$localize`:@@rich-editor_formatting--copy-markdown␟166a6a1d3b21c1568d81184fd203095f76fc5359␟5658061612432689535:Copy markdown`,_=$localize`:@@common_undo␟4f26c54d5c3edadf92756d7d3ce466dde1f01e2a␟5775346636203685655:Undo`,v=$localize`:@@common_redo␟91b3b95ffa91d6355be5d7b3d48dfa32f3118bfa␟4221042196936324014:Redo`,k=$localize`:@@rich-editor_text-background␟cbc657988bcc482441c6a56fc1d1f61d15fb8263␟373915284330522316: Text Background `,y=$localize`:@@rich-editor_toolbar-tooltip--insert-image␟2499f9adfb71582ec346a5e4b70bb0a7af7576be␟4162290354959379324:Insert image inside description`,w=$localize`:@@rich-editor_toolbar-title--insert-image␟cd38ccd0eadbb15c7478bffbc4d643e93af1c617␟8911878679913369427: Image `,x=$localize`:@@rich-editor_toolbar-title--insert-divder␟ea709ff32e3ce7c3fb394ace3d5af3ff287e22f2␟1671887196935477858: Divider `,I=$localize`:@@rich-editor_toolbar-tooltip--insert-toggle-list␟240d4c725b8b91529ea79873447326d364f535c0␟5544922366349194997:Insert toggle list inside description`,T=$localize`:@@rich-editor_toolbar-title--toggle-list␟2498ec906e52af925567413f75caa3da40e78cc8␟2014693093550428955: Toggle list `,C=$localize`:@@rich-editor_toolbar-title--insert-table␟f7bfab14c42dca18bfb760a5b69d881e6a21a379␟7864833614787722104: Table `,D=$localize`:@@common_youtube␟21a5445b475e15105b2903f046e0c9ffc266afb5␟596084131680125732: YouTube `,O=$localize`:@@common_new-task␟20c20936357f0cee90235702be2b54741792b89e␟6708216626675467238: New task `,S=$localize`:@@common_new-subtask␟39ef21f6e7b394495e7d693f68a9f38d69cc5bd4␟2107623281498590541: New subtask `,E=$localize`:@@common_comment␟a5a8099429d20eede216ee4a0c6a56eebf22ee31␟9037645200251679585: Comment `,P=$localize`:@@rich-editor_toolbar-title--list-of-tasks␟308919654b691b73e8e0cd50b4989ff6e69b1642␟3810931779454328727: List of tasks `,j=$localize`:@@rich-editor_toolbar-title--insert-button␟f075d7b29a24e39b68b52a16d463c044a4832663␟6615877652651493986: Button `,A=$localize`:@@rich-editor_toolbar-title--insert-table-of-contents␟64bfa795fa108d75905778ac03d283b24cb1e89c␟6920165235977626220: Table of contents `,$=$localize`:@@rich-editor_formatting--clear␟6b0460bbbf17c12ade36d54fd2e6b7ef49d92a23␟2092422651452602066:Clear format`,U=$localize`:@@common_new-subtask␟d0d12b7acc0bcd55c05ce17a1a17f625a2abd40c␟8790156519943351361:New subtask`,R=$localize`:@@common_new-task␟e5b7e434276c9f1b0262feaa80db57c871f16053␟1315476018548197144:New task`,M=$localize`:@@common_comment␟5a5d7ee2acbfa9c91ab7f41d26bda9ff0cafe42f␟2662644497259948010:Comment`,[[1,"cu-rich-editor-toolbar__container"],[1,"cu-rich-editor-toolbar__row"],["tooltipLifeTime","15000",1,"ql-formats",3,"cuTooltip","click"],[1,"ql-header"],[1,"ql-formats-separator"],[1,"ql-formats"],["cuTooltip",e,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-bold"],["cuTooltip",t,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-italic"],["cuTooltip",i,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-underline"],["cuTooltip",o,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-strike"],["cuTooltip",n,"tooltipModifier","tooltip_near","tooltipDelay","500","value","bullet",1,"ql-list","ql-list_bullet"],["cuTooltip",s,"tooltipModifier","tooltip_near","tooltipDelay","500","value","ordered",1,"ql-list","ql-list_ordered"],["cuTooltip",c,"tooltipModifier","tooltip_near","tooltipDelay","500","value","unchecked",1,"ql-list","ql-list_check",3,"ngStyle"],["tooltipLifeTime","15000",1,"ql-formats",3,"cuTooltip"],["cuTooltip",a,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-blockquote"],["cuTooltip",r,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-code-block"],["cuTooltip",l,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-link","toolbar__insert-link"],["cuTooltip",d,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-code"],["cuDropdown",""],["cuDropdownToggle","",1,"cu-rich-editor-toolbar__fontcolors"],["cuTooltip",u,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"cu-rich-editor-toolbar__fontcolors-button"],[1,"cu-rich-editor-toolbar__fontcolors-icon"],["icon","arrow-down-s",1,"cu-rich-editor-toolbar__fontcolors-arrow"],["class","ignore-click-out","style","padding: 16px 6px 6px 16px",3,"width",4,"cuDropdownMenu"],["cuDropdownToggle","",1,"cu-rich-editor-toolbar__backgrounds"],["icon","cu2-backgrounds","cuTooltip",m,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"cu-rich-editor-toolbar__backgrounds-icon"],[1,"cu-rich-editor-toolbar__backgrounds-active"],[1,"cu-rich-editor-toolbar__backgrounds-active-wrapper"],[1,"cu-rich-editor-toolbar__backgrounds-active-icon"],["icon","arrow-down-s",1,"cu-rich-editor-toolbar__backgrounds-active-arrow"],["cuTooltip",p,"tooltipModifier","tooltip_near","tooltipDelay","500",1,"ql-formats"],[1,"ql-align"],["value",""],["value","center"],["value","right"],["class","ql-formats-separator",4,"ngIf"],["cuDropdownToggle",""],["icon","cu2-plus",1,"cu-rich-editor-toolbar__plus"],["class","ignore-click-out",3,"width",4,"cuDropdownMenu"],["value","+1","cuTooltip",h,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-indent"],["value","-1","cuTooltip",f,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-indent"],[1,"ql-background-container"],["value","","cuTooltip",b,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-background","ql-background_empty",2,"color","transparent"],["cuTooltip",g,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-markdown"],[1,"ql-formats-divider"],["cuTooltip",_,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-undo"],["width","14","height","14","xmlns","http://www.w3.org/2000/svg"],["d","M1.57 11.42A6.99 6.99 0 0 0 14 7 7 7 0 0 0 .62 4.1l1.56 1.57A5 5 0 1 1 3 10l-1.43 1.42z",1,"ql-fill"],["d","M0 6h6V4H2V0H0v6z",1,"ql-fill"],["cuTooltip",v,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-redo"],["class","ql-formats",3,"ql-formats_hidden",4,"ngIf"],["class","ql-more",4,"ngIf"],["class","cu-rich-editor-toolbar__additional",4,"ngIf"],[1,"ignore-click-out",2,"padding","16px 6px 6px 16px"],[1,"cu-rich-editor-toolbar__fontcolors-title"],[1,"cu-rich-editor-toolbar__fontcolors-wrapper"],[1,"cu-rich-editor-toolbar__fontcolors-item","cu-rich-editor-toolbar__fontcolors-clear",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#64473a",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#d9730d",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#dfab01",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#0b6e99",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#6940a5",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#ad1a72",3,"click"],[1,"cu-rich-editor-toolbar__fontcolors-item",2,"color","#e03e3e",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-title"],k,[1,"cu-rich-editor-toolbar__backgrounds-wrapper"],[1,"cu-rich-editor-toolbar__backgrounds-item","cu-rich-editor-toolbar__backgrounds-clear",2,"background-color","transparent",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-item",2,"background-color","#fffa78",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-item",2,"background-color","#e6ffcf",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-item",2,"background-color","#ffe0e0",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-item",2,"background-color","#cae4f6",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-item",2,"background-color","#ffdbba",3,"click"],[1,"cu-rich-editor-toolbar__backgrounds-item",2,"background-color","#eedbf6",3,"click"],[1,"ignore-click-out"],["class","cu-rich-editor-toolbar__add-item ql-task","tooltipDelay","200","tooltipLifeTime","15000",3,"ql-task_disabled","cuTooltip","click",4,"ngIf"],["class","cu-rich-editor-toolbar__add-item ql-subtask","tooltipDelay","200","tooltipLifeTime","15000",3,"ql-task_disabled","cuTooltip","click",4,"ngIf"],["class","cu-rich-editor-toolbar__add-item ql-comment","tooltipDelay","200","tooltipLifeTime","15000",3,"ql-comment_disabled","cuTooltip","click",4,"ngIf"],["cuTooltip",y,"tooltipDelay","200","tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item","ql-image",3,"click"],[1,"cu-rich-editor-toolbar__add-item-icon",3,"icon"],[1,"cu-rich-editor-toolbar__add-item-title"],w,["tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item",3,"cuTooltip","click"],x,["cuTooltip",I,"tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item",3,"ngStyle","click"],T,["tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item","ql-table",3,"cuTooltip","tooltipDelay","click"],C,["class","cu-rich-editor-toolbar__add-item","tooltipLifeTime","15000",3,"cu-rich-editor-toolbar__add-item_disabled","cuTooltip","click",4,"ngIf"],["class","cu-rich-editor-toolbar__add-item","tooltipLifeTime","15000",3,"cu-rich-editor-toolbar__add-item_disabled","cuTooltip","tooltipDelay","click",4,"ngIf"],["tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item","ql-youtube",3,"cuTooltip","tooltipDelay","click"],D,["tooltipDelay","200","tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item","ql-task",3,"cuTooltip","click"],O,["tooltipDelay","200","tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item","ql-subtask",3,"cuTooltip","click"],S,["tooltipDelay","200","tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item","ql-comment",3,"cuTooltip","click"],E,[1,"cu-rich-editor-toolbar__add-item-icon","cu-rich-editor-toolbar__add-item-icon_l",3,"icon"],P,["tooltipLifeTime","15000",1,"cu-rich-editor-toolbar__add-item",3,"cuTooltip","tooltipDelay","click"],j,[1,"cu-rich-editor-toolbar__add-item-icon","cu-rich-editor-toolbar__add-item-icon_content",3,"icon"],A,["icon","pin","tooltipDelay","500",1,"cu-rich-editor-toolbar__pin",3,"cuTooltip","click"],[1,"ql-more"],[1,"ql-more__row"],[1,"ql-more__more",3,"click"],["width","3","height","15","xmlns","http://www.w3.org/2000/svg"],["d","M3 13.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0zm0-6a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0zM1.5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3z","fill","#000","fill-rule","nonzero",1,"ql-fill"],["cuTooltip",$,"tooltipDelay","500","tooltipModifier","tooltip_below-far",1,"ql-clean"],[1,"cu-rich-editor-toolbar__additional"],["class","ql-task","tooltipDelay","500","tooltipLifeTime","15000",3,"ql-task_disabled","cuTooltip",4,"ngIf"],["tooltipDelay","500","tooltipLifeTime","15000",1,"ql-subtask",3,"cuTooltip"],["icon","cu2-plus",1,"cu-rich-editor-toolbar__additional-icon"],U,["class","ql-comment","tooltipDelay","500","tooltipLifeTime","15000",3,"ql-comment_disabled","cuTooltip",4,"ngIf"],["tooltipDelay","500","tooltipLifeTime","15000",1,"ql-task",3,"cuTooltip"],R,["tooltipDelay","500","tooltipLifeTime","15000",1,"ql-comment",3,"cuTooltip"],["icon","comment",1,"cu-rich-editor-toolbar__additional-icon"],M]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.cc(2,"div",2),n.qc("click",function(){return t.qlHeaderFormatClicked.emit()}),n.Xb(3,"select",3),n.bc(),n.Xb(4,"div",4),n.cc(5,"div",5),n.Xb(6,"button",6),n.bc(),n.cc(7,"div",5),n.Xb(8,"button",7),n.bc(),n.cc(9,"div",5),n.Xb(10,"button",8),n.bc(),n.cc(11,"div",5),n.Xb(12,"button",9),n.bc(),n.Xb(13,"div",4),n.cc(14,"div",5),n.Xb(15,"button",10),n.bc(),n.cc(16,"div",5),n.Xb(17,"button",11),n.bc(),n.cc(18,"div",5),n.Xb(19,"button",12),n.bc(),n.Xb(20,"div",4),n.cc(21,"div",13),n.Xb(22,"button",14),n.bc(),n.cc(23,"div",13),n.Xb(24,"button",15),n.bc(),n.cc(25,"div",5),n.Xb(26,"button",16),n.bc(),n.cc(27,"div",5),n.Xb(28,"button",17),n.bc(),n.cc(29,"div",18),n.cc(30,"div",19),n.cc(31,"div",20),n.cc(32,"div",21),n.dd(33," A "),n.bc(),n.Xb(34,"div",22),n.bc(),n.bd(35,qe,20,2,"div",23),n.bc(),n.bc(),n.cc(36,"div",18),n.cc(37,"div",24),n.Xb(38,"div",25),n.cc(39,"div",26),n.cc(40,"div",27),n.Xb(41,"div",28),n.Xb(42,"div",29),n.bc(),n.bc(),n.bd(43,Ge,11,2,"div",23),n.bc(),n.bc(),n.cc(44,"div",30),n.cc(45,"select",31),n.Xb(46,"option",32),n.Xb(47,"option",33),n.Xb(48,"option",34),n.bc(),n.bc(),n.bd(49,Ve,1,0,"div",35),n.cc(50,"div",18),n.cc(51,"div",36),n.Xb(52,"div",37),n.bc(),n.bd(53,Ye,27,33,"div",38),n.bc(),n.cc(54,"div",5),n.Xb(55,"button",39),n.bc(),n.cc(56,"div",5),n.Xb(57,"button",40),n.bc(),n.cc(58,"div",41),n.Xb(59,"button",42),n.bc(),n.cc(60,"div",5),n.Xb(61,"button",43),n.bc(),n.Xb(62,"div",44),n.cc(63,"div",5),n.cc(64,"button",45),n.tc(),n.cc(65,"svg",46),n.Xb(66,"path",47),n.Xb(67,"path",48),n.bc(),n.bc(),n.sc(),n.cc(68,"button",49),n.tc(),n.cc(69,"svg",46),n.Xb(70,"path",47),n.Xb(71,"path",48),n.bc(),n.bc(),n.bc(),n.bd(72,Je,2,5,"div",50),n.bc(),n.bd(73,tt,8,5,"div",51),n.bc(),n.bd(74,nt,7,7,"div",52)),2&e&&(n.Ib(2),n.Ob("ql-formats_disabled",t.inTable),n.Dc("cuTooltip",t.inTable?t.richEditorToolbarStringsService.formatNotAllowedInTablesText:null),n.Ib(17),n.Dc("ngStyle",n.Hc(22,Ze,t.hideChecklist?"none":"")),n.Ib(2),n.Ob("ql-formats_disabled",t.inTable),n.Dc("cuTooltip",t.inTable?t.richEditorToolbarStringsService.formatNotAllowedInTablesText:null),n.Ib(2),n.Ob("ql-formats_disabled",t.inTable),n.Dc("cuTooltip",t.inTable?t.richEditorToolbarStringsService.formatNotAllowedInTablesText:null),n.Ib(9),n.ad("color",t.activeFontColor),n.Ib(6),n.ad("display",t.activeBackground?"none":"block"),n.Ib(1),n.ad("display",t.activeBackground?"block":"none"),n.Ib(2),n.ad("background-color",t.activeBackground),n.Ib(8),n.Dc("ngIf",t.isSticky),n.Ib(23),n.Dc("ngIf",t.allowPin),n.Ib(1),n.Dc("ngIf",!t.isStatic||t.isSticky),n.Ib(1),n.Dc("ngIf",(t.allowComments||t.allowCreateTask||t.allowCreateSubtask)&&!t.isSticky))},directives:[Me.a,Ue.t,Fe.b,Le.a,Ne.a,ze.a,Ue.q],styles:['.cu-rich-editor-toolbar{display:none;border-radius:4px;background:#fff}.dark-theme .cu-rich-editor-toolbar{background:#1e272e}.cu-rich-editor-toolbar_disabled{pointer-events:none;opacity:.5}.cu-rich-editor-toolbar.ql-toolbar{display:flex;align-items:center;justify-content:center}.cu-rich-editor-toolbar__container{display:flex;position:relative;border-radius:4px;padding:0 0 0 8px;max-width:595px;box-shadow:0 0 0 1px rgba(15,15,15,.05),0 3px 6px rgba(15,15,15,.1),0 9px 16px rgba(15,15,15,.2)}.cu-rich-editor-toolbar__container:before{content:"";display:block;position:absolute;opacity:0;top:34px;left:0;width:100%;height:1px;background:#e9ebf0}.dark-theme .cu-rich-editor-toolbar__container:before{background:#2b343b}.cu-rich-editor-toolbar.cu-rich-editor-toolbar_hidden.ql-toolbar .cu-rich-editor-toolbar__container,.ql-tooltip.ql-editing .cu-rich-editor-toolbar .cu-rich-editor-toolbar__container{box-shadow:none;min-width:220px}.cu-rich-editor-toolbar.cu-rich-editor-toolbar_hidden.ql-toolbar .cu-rich-editor-toolbar__container:after,.cu-rich-editor-toolbar.cu-rich-editor-toolbar_hidden.ql-toolbar .cu-rich-editor-toolbar__container:before,.cu-rich-editor-toolbar.cu-rich-editor-toolbar_hidden.ql-toolbar .cu-rich-editor-toolbar__row,.cu-rich-editor-toolbar.cu-rich-editor-toolbar_hidden.ql-toolbar .ql-more,.ql-tooltip.ql-editing .cu-rich-editor-toolbar .cu-rich-editor-toolbar__container:after,.ql-tooltip.ql-editing .cu-rich-editor-toolbar .cu-rich-editor-toolbar__container:before,.ql-tooltip.ql-editing .cu-rich-editor-toolbar .cu-rich-editor-toolbar__row,.ql-tooltip.ql-editing .cu-rich-editor-toolbar .ql-more{display:none}.cu-rich-editor-toolbar.cu-rich-editor-toolbar_hidden.ql-toolbar .cu-rich-editor-toolbar__additional,.ql-tooltip.ql-editing .cu-rich-editor-toolbar .cu-rich-editor-toolbar__additional{display:flex;justify-content:center;left:50%;right:auto;transform:translateX(-50%)}.cu-rich-editor-toolbar_sticky.ql-toolbar{border-radius:0;position:sticky;top:0;z-index:10}.dark-theme .cu-rich-editor-toolbar_sticky.ql-toolbar{background:#384047}.cu-rich-editor-toolbar_sticky.ql-toolbar .cu-rich-editor-toolbar__container{display:flex;align-items:flex-start;justify-content:center;max-width:none;box-shadow:none}.dark-theme .cu-rich-editor-toolbar_sticky.ql-toolbar .cu-rich-editor-toolbar__container{background:#2b343b}.dark-theme .cu-rich-editor-toolbar_sticky.ql-toolbar .cu-rich-editor-toolbar__container:before{background:#1e272e}.cu-pdf-export .cu-rich-editor-toolbar_sticky.ql-toolbar{visibility:hidden}.task-column__body .cu-rich-editor-toolbar_sticky.ql-toolbar{justify-content:flex-start;border-radius:0;padding-left:0}.task-column__body .cu-rich-editor-toolbar_sticky.ql-toolbar .cu-rich-editor-toolbar__row{max-width:545px}@media screen and (max-width:992px){.task-column__body .cu-rich-editor-toolbar_sticky.ql-toolbar{top:0!important}}.task__full-editor .cu-rich-editor-toolbar_sticky.ql-toolbar{top:0!important;margin-bottom:10px;background:#fbfbfb}.dark-theme .task__full-editor .cu-rich-editor-toolbar_sticky.ql-toolbar{background:#384047}.task__full-editor .cu-rich-editor-toolbar_sticky.ql-toolbar .cu-rich-editor-toolbar__row{max-width:545px}.task__full-editor .cu-rich-editor-toolbar_sticky.ql-toolbar:after{background:linear-gradient(0deg,hsla(0,0%,98.4%,0),#fbfbfb)}.dark-theme .task__full-editor .cu-rich-editor-toolbar_sticky.ql-toolbar:after{background:linear-gradient(0deg,rgba(56,64,71,0),#384047)}.cu-rich-editor-toolbar_sticky.ql-toolbar:after{content:"";display:block;position:absolute;width:100%;height:8px;bottom:-8px;left:0;pointer-events:none;background:linear-gradient(0deg,hsla(0,0%,100%,0),#fff)}.dark-theme .cu-rich-editor-toolbar_sticky.ql-toolbar:after{background:linear-gradient(0deg,rgba(56,64,71,0),#384047)}.cu-rich-editor-toolbar_sticky.ql-toolbar .ql-formats-separator{height:16px}.dark-theme .cu-rich-editor-toolbar_sticky.ql-toolbar .ql-formats-separator{background:#1e272e}.task-column__body .cu-rich-editor-toolbar_sticky.ql-toolbar{margin-bottom:5px}.dark-theme .cu-rich-editor-toolbar_sticky.ql-toolbar .ql-more{border-left-color:#1e272e}.cu-rich-editor-toolbar_sticky.ql-toolbar .ql-more__more{width:22px}.cu-rich-editor-toolbar_full.ql-toolbar .cu-rich-editor-toolbar__row{height:auto;overflow:visible}.cu-rich-editor-toolbar_full.ql-toolbar .cu-rich-editor-toolbar__container:before{opacity:1!important}.cu-rich-editor-toolbar_full.ql-toolbar .ql-more .ql-fill{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar_full.ql-toolbar .ql-more .ql-fill{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar__row{display:flex;align-items:center;flex-wrap:wrap;height:34px;overflow:hidden}.cu-rich-editor-toolbar__additional{position:absolute;right:0;bottom:-29px}.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button{color:#7b68ee;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;height:24px!important;margin-left:5px;padding:0 8px;background:#fff;box-shadow:0 0 0 1px rgba(15,15,15,.05),0 3px 6px rgba(15,15,15,.1),0 3px 24px rgba(15,15,15,.2);border-radius:4px;animation:fadeIn .05s ease-in forwards;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap}@supports (--theme-main-color:#7b68ee){.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button{color:var(--theme-main-color)}}.dark-theme .ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button{background:#1e272e}.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button:hover{color:var(--theme-main-color-dark)}}.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button:hover .cu-rich-editor-toolbar__additional-icon{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button:hover .cu-rich-editor-toolbar__additional-icon{fill:var(--theme-main-color-dark)}}.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button .cu-rich-editor-toolbar__additional-icon{fill:#7b68ee;width:12px;height:12px;margin-right:4px}@supports (--theme-main-color:#7b68ee){.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button .cu-rich-editor-toolbar__additional-icon{fill:var(--theme-main-color)}}.ql-bubble .ql-tooltip .cu-rich-editor-toolbar__additional button .cu-rich-editor-toolbar__additional-icon svg{height:100%}.cu-rich-editor-toolbar.ql-toolbar{border:0}.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label{border:0;color:#292d34}.dark-theme .cu-rich-editor-toolbar.ql-toolbar .ql-picker-label{color:#fff}.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label.ql-active,.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label.ql-active,.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label:hover{color:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label:hover .ql-stroke{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label:hover .ql-stroke{stroke:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label.ql-active .ql-fill,.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label:hover .ql-fill{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label.ql-active .ql-fill,.cu-rich-editor-toolbar.ql-toolbar .ql-picker-label:hover .ql-fill{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar .ql-picker.ql-expanded .ql-picker-label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar .ql-picker.ql-expanded .ql-picker-label{color:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar button{display:flex;align-items:center;justify-content:center;width:auto;height:34px;padding:0 6px}.cu-rich-editor-toolbar.ql-toolbar button .ql-fill,.cu-rich-editor-toolbar.ql-toolbar button .ql-stroke{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s}.cu-rich-editor-toolbar.ql-toolbar button .ql-fill:hover,.cu-rich-editor-toolbar.ql-toolbar button .ql-stroke:hover{transition:none}.cu-rich-editor-toolbar.ql-toolbar button .ql-stroke{stroke:#292d34}.dark-theme .cu-rich-editor-toolbar.ql-toolbar button .ql-stroke{stroke:#fff}.cu-rich-editor-toolbar.ql-toolbar button .ql-fill{fill:#292d34}.dark-theme .cu-rich-editor-toolbar.ql-toolbar button .ql-fill{fill:#fff}.cu-rich-editor-toolbar.ql-toolbar button.ql-active,.cu-rich-editor-toolbar.ql-toolbar button:focus,.cu-rich-editor-toolbar.ql-toolbar button:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar button.ql-active,.cu-rich-editor-toolbar.ql-toolbar button:focus,.cu-rich-editor-toolbar.ql-toolbar button:hover{color:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar button.ql-active .ql-stroke,.cu-rich-editor-toolbar.ql-toolbar button:focus .ql-stroke,.cu-rich-editor-toolbar.ql-toolbar button:hover .ql-stroke{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar button.ql-active .ql-stroke,.cu-rich-editor-toolbar.ql-toolbar button:focus .ql-stroke,.cu-rich-editor-toolbar.ql-toolbar button:hover .ql-stroke{stroke:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar button.ql-active .ql-fill,.cu-rich-editor-toolbar.ql-toolbar button:focus .ql-fill,.cu-rich-editor-toolbar.ql-toolbar button:hover .ql-fill{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar.ql-toolbar button.ql-active .ql-fill,.cu-rich-editor-toolbar.ql-toolbar button:focus .ql-fill,.cu-rich-editor-toolbar.ql-toolbar button:hover .ql-fill{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar.ql-toolbar button svg{height:auto}.cu-rich-editor-toolbar.ql-toolbar button.ql-underline svg{margin-top:2px}.cu-rich-editor-toolbar.ql-toolbar .ql-formats{display:inline-flex;justify-content:center;align-items:center;margin:0;padding:0;height:34px}.cu-rich-editor-toolbar.ql-toolbar .ql-formats_hidden{display:none}.cu-rich-editor-toolbar.ql-toolbar .ql-formats:first-child{margin:0}.cu-rich-editor-toolbar.ql-toolbar .ql-formats_disabled{cursor:not-allowed;opacity:.3}.cu-rich-editor-toolbar.ql-toolbar .ql-formats_disabled *{pointer-events:none}.cu-rich-editor-toolbar .ql-more{flex-shrink:0;display:flex;flex-direction:column;justify-content:space-between;margin:0;border-left:1px solid #e9ebf0}.dark-theme .cu-rich-editor-toolbar .ql-more{border-left-color:#2b343b}.cu-rich-editor-toolbar .ql-more__more{width:28px!important}.cu-rich-editor-toolbar .ql-more__row{display:flex;justify-content:center;align-items:center}.cu-rich-editor-toolbar .ql-more .ql-formats{justify-content:flex-start}.cu-rich-editor-toolbar .ql-formats-separator{height:34px;margin:0 7px;width:1px;background:#e9ebf0}.dark-theme .cu-rich-editor-toolbar .ql-formats-separator{background:#2b343b}.cu-rich-editor-toolbar .ql-picker{position:static}.cu-rich-editor-toolbar .ql-picker-options{box-shadow:0 2px 15px rgba(0,0,0,.1);border-radius:4px;border:0;min-width:0;top:34px;animation:dropdownMenuAnimation .03s ease-in forwards;background:#fff}.dark-theme .cu-rich-editor-toolbar .ql-picker-options{background:#1e272e}.cu-rich-editor-toolbar .ql-picker-options .ql-picker-item:before{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font-family:Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-picker-options .ql-picker-item:before{color:#d5d6d7}.cu-rich-editor-toolbar .ql-picker-options .ql-picker-item:hover:before{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-picker-options .ql-picker-item:hover:before{color:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-picker-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;padding:0;border:0;color:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-picker-label{color:#fff}.cu-rich-editor-toolbar .ql-picker-label .ql-stroke{transition:stroke .2s cubic-bezier(.785,.135,.15,.86) 0s;stroke:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-picker-label .ql-stroke{stroke:#fff}.cu-rich-editor-toolbar .ql-picker-label .ql-fill{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-picker-label .ql-fill{fill:#fff}.cu-rich-editor-toolbar .ql-picker-label.ql-active,.cu-rich-editor-toolbar .ql-picker-label:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-picker-label.ql-active,.cu-rich-editor-toolbar .ql-picker-label:hover{color:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-picker-label.ql-active .ql-stroke,.cu-rich-editor-toolbar .ql-picker-label:hover .ql-stroke{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-picker-label.ql-active .ql-stroke,.cu-rich-editor-toolbar .ql-picker-label:hover .ql-stroke{stroke:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-picker-label.ql-active .ql-fill,.cu-rich-editor-toolbar .ql-picker-label:hover .ql-fill{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-picker-label.ql-active .ql-fill,.cu-rich-editor-toolbar .ql-picker-label:hover .ql-fill{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-picker-label:before{line-height:34px}.cu-rich-editor-toolbar .ql-header.ql-picker{width:79px;height:32px;padding-left:4px;position:static}.cu-rich-editor-toolbar .ql-header.ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{margin-top:0;transform:translate(5px,-11px)}.cu-rich-editor-toolbar .ql-header.ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg polygon+polygon{display:none}.cu-rich-editor-toolbar .ql-header.ql-picker .ql-picker-options{background:#fff;box-shadow:0 2px 15px rgba(0,0,0,.1);border-radius:4px;border:0;min-width:0;width:auto;top:34px;animation:dropdownMenuAnimation .03s ease-in forwards}.dark-theme .cu-rich-editor-toolbar .ql-header.ql-picker .ql-picker-options{background:#1e272e}.cu-rich-editor-toolbar .ql-header.ql-picker .ql-picker-options .ql-picker-item{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font-family:Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-header.ql-picker .ql-picker-options .ql-picker-item{color:#fff}.cu-rich-editor-toolbar .ql-header.ql-picker .ql-picker-options .ql-picker-item:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-header.ql-picker .ql-picker-options .ql-picker-item:hover{color:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-picker{height:28px}.cu-rich-editor-toolbar .ql-color-picker,.cu-rich-editor-toolbar .ql-icon-picker{width:30px}.cu-rich-editor-toolbar .ql-background.ql-picker .ql-picker-label{display:flex;align-items:center;justify-content:center;border:0}.cu-rich-editor-toolbar .ql-background.ql-picker .ql-picker-options{width:92px;border:0}.cu-rich-editor-toolbar .ql-background.ql-picker .ql-picker-options .ql-picker-item:first-child{border:1px solid #ddd}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-label{display:flex;align-items:center;justify-content:center;border:0}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options{width:auto;border:0;padding:2px}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item{width:26px;height:26px;display:inline-flex;align-items:center;justify-content:center}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item .ql-stroke{stroke:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item .ql-stroke{stroke:#fff}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item .ql-fill{fill:#292d34}.dark-theme .cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item .ql-fill{fill:#fff}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item.ql-selected,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:focus,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item.ql-selected,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:focus,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:hover{color:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item.ql-selected .ql-stroke,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:focus .ql-stroke,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:hover .ql-stroke{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item.ql-selected .ql-stroke,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:focus .ql-stroke,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:hover .ql-stroke{stroke:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item.ql-selected .ql-fill,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:focus .ql-fill,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:hover .ql-fill{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item.ql-selected .ql-fill,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:focus .ql-fill,.cu-rich-editor-toolbar .ql-align.ql-picker .ql-picker-options .ql-picker-item:hover .ql-fill{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar .ql-background-container{margin:0 4px;position:relative}.cu-rich-editor-toolbar button.ql-background{width:20px}.cu-rich-editor-toolbar button.ql-background svg{display:none}.cu-rich-editor-toolbar button.ql-background:before{transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;width:16px;height:16px;border-radius:2px;background:currentColor;border:2px solid #292d34}.dark-theme .cu-rich-editor-toolbar button.ql-background:before{border-color:#fff}.cu-rich-editor-toolbar button.ql-background.ql-active:not(.ql-background_empty):before,.cu-rich-editor-toolbar button.ql-background:hover:before{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar button.ql-background.ql-active:not(.ql-background_empty):before,.cu-rich-editor-toolbar button.ql-background:hover:before{border-color:var(--theme-main-color)}}.cu-rich-editor-toolbar__pin{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:22px;padding:10px 0 8px;margin-left:3px;cursor:pointer;fill:#292d34}.dark-theme .cu-rich-editor-toolbar__pin{fill:#fff}.cu-rich-editor-toolbar__pin:hover,.cu-rich-editor-toolbar__pin_active{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar__pin:hover,.cu-rich-editor-toolbar__pin_active{fill:var(--theme-main-color)}}.dark-theme .cu-rich-editor-toolbar__pin:hover,.dark-theme .cu-rich-editor-toolbar__pin_active{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-rich-editor-toolbar__pin:hover,.dark-theme .cu-rich-editor-toolbar__pin_active{fill:var(--theme-main-color)}}.cu-rich-editor-toolbar:not(.cu-rich-editor-toolbar_sticky) .cu-rich-editor-toolbar__pin_active{display:none}.cu-rich-editor-toolbar__plus{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee;width:16px;height:16px;border-radius:50%;padding:3px;cursor:pointer;margin:0 6px;fill:#fff}@supports (--theme-main-color:#7b68ee){.cu-rich-editor-toolbar__plus{background:var(--theme-main-color)}}.cu-rich-editor-toolbar__plus:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-rich-editor-toolbar__plus:hover{background:var(--theme-main-color-dark)}}.cu-rich-editor-toolbar__add-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:0 15px;cursor:pointer;min-height:47px}.cu-rich-editor-toolbar__add-item:hover{transition:none}.cu-rich-editor-toolbar__add-item:hover,.cu-rich-editor-toolbar__add-item_active{background:#f2f3f4}.dark-theme .cu-rich-editor-toolbar__add-item:hover,.dark-theme .cu-rich-editor-toolbar__add-item_active{background:#2b343b}.cu-rich-editor-toolbar__add-item_disabled{cursor:not-allowed;opacity:.3}.cu-rich-editor-toolbar__add-item_disabled *{pointer-events:none}.cu-rich-editor-toolbar__add-item-icon{margin-right:12px;background:#fff;border:1px solid #e9ebf0;border-radius:2px;width:31px;height:31px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.dark-theme .cu-rich-editor-toolbar__add-item-icon{background:#384047;border:1px solid #1e272e}.cu-rich-editor-toolbar__add-item-icon svg{width:14px;height:14px;fill:#7c828d}.cu-rich-editor-toolbar__add-item-icon_content svg,.cu-rich-editor-toolbar__add-item-icon_l svg{fill:transparent;stroke:#7c828d}.cu-rich-editor-toolbar__add-item-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#000}.dark-theme .cu-rich-editor-toolbar__add-item-title{color:#d5d6d7}.cu-rich-editor-toolbar .ql-redo svg{transform:scaleX(-1)}.cu-rich-editor-toolbar__fontcolors{padding:0 6px;font-family:Gotham Pro,Proxima Nova,arial,serif}.cu-rich-editor-toolbar__fontcolors-icon{width:20px;height:20px;fill:none}.cu-rich-editor-toolbar__fontcolors-title{margin-bottom:16px;font-weight:500;font-size:11px;line-height:11px;color:#7c828d;opacity:.8;font-family:Gotham Pro,Proxima Nova,arial,serif}.cu-rich-editor-toolbar__fontcolors-wrapper{display:flex;flex-wrap:wrap;width:100%}.cu-rich-editor-toolbar__fontcolors-button{display:flex;align-items:center;width:24px;height:20px}.cu-rich-editor-toolbar__fontcolors-icon{width:16px;height:16px;margin-right:4px;font-size:15px;line-height:16px;text-align:center;color:#343434;font-weight:500}.dark-theme .cu-rich-editor-toolbar__fontcolors-icon{color:#d5d6d7}.cu-rich-editor-toolbar__fontcolors-arrow{width:6px;height:4px}.cu-rich-editor-toolbar__fontcolors-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;margin-bottom:10px;margin-right:10px;width:20px;height:20px;line-height:20px;text-align:center;cursor:pointer;font-weight:500}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-rich-editor-toolbar__fontcolors-item{font-family:var(--global-font-support)}}.cu-rich-editor-toolbar__fontcolors-clear{color:#343434}.dark-theme .cu-rich-editor-toolbar__fontcolors-clear{color:#d5d6d7}.cu-rich-editor-toolbar__backgrounds{padding:0 6px}.cu-rich-editor-toolbar__backgrounds-icon{width:20px;height:20px;fill:none;margin:0 1px}.cu-rich-editor-toolbar__backgrounds-title{margin-bottom:16px;font-weight:500;font-size:11px;line-height:11px;color:#7c828d;opacity:.8;font-family:Gotham Pro,Proxima Nova,arial,serif}.cu-rich-editor-toolbar__backgrounds-wrapper{display:flex;flex-wrap:wrap;width:100%}.cu-rich-editor-toolbar__backgrounds-active{width:22px;height:20px}.cu-rich-editor-toolbar__backgrounds-active-wrapper{width:100%;height:100%;display:flex;align-items:center}.cu-rich-editor-toolbar__backgrounds-active-icon{width:12px;height:12px;border:1px solid rgba(0,0,0,.1);border-radius:10px;margin-right:4px}.cu-rich-editor-toolbar__backgrounds-active-arrow{width:6px;height:4px}.cu-rich-editor-toolbar__backgrounds-item{margin-bottom:10px;margin-right:10px;width:20px;height:20px;border:1px solid rgba(0,0,0,.1);border-radius:10px;cursor:pointer}.cu-rich-editor-toolbar__backgrounds-clear{border-style:dashed}.dark-theme .cu-rich-editor-toolbar__backgrounds-clear{border:1px solid rgba(0,0,0,.4)}'],encapsulation:2,changeDetection:0}),e})();var at=i("lVAj"),rt=i("RUe1"),lt=i("3uaV"),dt=i("6mdQ"),ut=i("rXb0"),mt=i("F2x4"),pt=i("tIWb"),ht=i("XIp8"),ft=i("BTFG"),bt=i("HPyy"),gt=i("VhLi"),_t=i("S7bF");let vt=(()=>{class e{constructor(e){this.helpersService=e}transform(e,t=null,i){return this.helpersService.getDeltaDiffHtml(t,e,i)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(_t.a))},e.\u0275pipe=n.Vb({name:"deltaDiff",type:e,pure:!0}),e})();const kt=["editor"];function yt(e,t){if(1&e){const e=n.dc();n.cc(0,"div",14),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.restored=!0,t.restore.emit(t.description)}),n.bc()}}function wt(e,t){if(1&e){const e=n.dc();n.cc(0,"div",15),n.qc("click",function(){return n.Uc(e),n.uc().restored=!1}),n.gc(1,16),n.bc()}}const xt=function(e){return{height:e}},It=function(e,t){return{"task-description-history-list-item__description_active":e,"task-description-history-list-item__description_noactive":t}},Tt=function(e){return{"task-description-history-list-item__description-show-more_active":e}},Ct=function(e){return{"task-description-history-list-item__description-blur_active":e}};let Dt=(()=>{class e{constructor(e,t,i,o){this.element=e,this.taskMentionService=t,this.sharedData=i,this.changeDetector=o,this.showSlideDownButton=!1,this.isShowFullContent=!1,this.timeFormat="MMM DD hh:mm",this.descriptionHeight="28px",this.user=null,this.restored=!1,this.canEdit=!0,this.restore=new n.o}ngOnInit(){this.timeFormat=this.sharedData.currentUser.value&&this.sharedData.currentUser.value.twenty_four_hr_setting?"MMM DD H:mm":"MMM DD h:mm a"}ngOnChanges(e){if(e.description){try{this.content=this.description.content?JSON.parse(this.description.content):null}catch(t){}try{this.oldContent=this.description.oldContent?JSON.parse(this.description.oldContent):null}catch(t){}void 0!==this.description.user?this.user=this.description.user:(this.sharedData.compatCurrentTeam.members||[]).forEach(e=>{if(e.user.id===this.description.userid)return this.user=e.user,!1})}}ngAfterViewInit(){this.taskMentionService.updateMentions(),setTimeout(()=>{this.element.nativeElement.querySelector(".cu-editor").offsetHeight>32&&(this.showSlideDownButton=!0,this.changeDetector.markForCheck())})}triggerShowMore(e){this.isShowFullContent?(this.isShowFullContent=!1,this.descriptionHeight="28px"):(this.isShowFullContent=!0,this.descriptionHeight=null),e&&(e.stopPropagation(),e.preventDefault()),this.changeDetector.markForCheck()}onHostClick(e){this.isShowFullContent||(this.isShowFullContent=!0,this.descriptionHeight=null),this.changeDetector.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.m),n.Wb(ye.a),n.Wb(ve.a),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-description-history-list-item"]],viewQuery:function(e,t){if(1&e&&n.jd(kt,1),2&e){let e;n.Qc(e=n.rc())&&(t.editor=e.first)}},hostBindings:function(e,t){1&e&&n.qc("click",function(e){return t.onHostClick(e)})},inputs:{description:"description",canEdit:"canEdit"},outputs:{restore:"restore"},features:[n.Gb],decls:18,vars:27,consts:function(){let e,t;return e=$localize`:@@cu-task-description-history-list-item__tooltip-msg_restore-this-version␟1757d5e5b1afe7b4f64f7f44481b786d27977f87␟4655283754161670601:Restore this version`,t=$localize`:@@cu-task-description-history-list-item__restored␟e5c34375c24e370080ced934dc60e48032a1a330␟136124150410414619: Restored!
`,[[1,"task-description-history-list-item__time"],[1,"task-description-history-list-item__user",3,"cuTooltip"],[3,"user"],[1,"task-description-history-list-item__description",3,"ngStyle","ngClass"],[1,"cu-editor-wrapper"],[1,"cu-editor",3,"innerHtml"],[1,"task-description-history-list-item__description-show-more",3,"ngClass","click"],["width","17","height","17","xmlns","http://www.w3.org/2000/svg"],["transform","translate(1 1)","fill","none","fill-rule","evenodd"],["width","15","height","15","rx","7.5",1,"cu-stroke"],["d","M7.5 9L5 6h5z",1,"cu-fill"],[1,"task-description-history-list-item__description-blur",3,"ngClass"],["class","task-description-history-list-item__restore","cuTooltip",e,"icon","restore",3,"click",4,"ngIf"],["class","task-description-history-list-item__restore-text",3,"click",4,"ngIf"],["cuTooltip",e,"icon","restore",1,"task-description-history-list-item__restore",3,"click"],[1,"task-description-history-list-item__restore-text",3,"click"],t]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.dd(1),n.vc(2,"momentDate"),n.bc(),n.cc(3,"div",1),n.Xb(4,"cu-avatar",2),n.dd(5),n.bc(),n.cc(6,"div",3),n.cc(7,"div",4),n.Xb(8,"div",5),n.vc(9,"deltaDiff"),n.bc(),n.cc(10,"div",6),n.qc("click",function(e){return t.triggerShowMore(e)}),n.tc(),n.cc(11,"svg",7),n.cc(12,"g",8),n.Xb(13,"rect",9),n.Xb(14,"path",10),n.bc(),n.bc(),n.bc(),n.sc(),n.Xb(15,"div",11),n.bc(),n.bd(16,yt,1,0,"div",12),n.bd(17,wt,2,0,"div",13)),2&e&&(n.Ib(1),n.fd(" ",n.xc(2,11,t.description.date,t.timeFormat),"\n"),n.Ib(2),n.Dc("cuTooltip",null==t.user?null:t.user.username),n.Ib(1),n.Dc("user",t.user),n.Ib(1),n.fd(" ",null==t.user?null:t.user.username,"\n"),n.Ib(1),n.Dc("ngStyle",n.Hc(18,xt,t.descriptionHeight))("ngClass",n.Ic(20,It,t.isShowFullContent,!t.isShowFullContent)),n.Ib(2),n.Dc("innerHtml",n.yc(9,14,t.content,t.oldContent,t.isShowFullContent?void 0:2),n.Vc),n.Ib(2),n.Dc("ngClass",n.Hc(23,Tt,t.showSlideDownButton)),n.Ib(5),n.Dc("ngClass",n.Hc(25,Ct,!t.isShowFullContent&&t.showSlideDownButton)),n.Ib(1),n.Dc("ngIf",!t.restored&&t.canEdit),n.Ib(1),n.Dc("ngIf",t.restored&&t.canEdit))},directives:[Me.a,bt.a,Ue.t,Ue.o,Ue.q,Ne.a],pipes:[gt.a,vt],styles:['.task-description-history-list-item__time{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:150px;flex-shrink:0;margin-top:9px;padding-right:10px;color:#848484;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .task-description-history-list-item__time{color:#d5d6d7}.task-description-history-list-item__user{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;width:118px;flex-shrink:0;padding-top:2px;padding-right:10px;color:#848484}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.task-description-history-list-item__user{font-family:var(--global-font-support)}}.dark-theme .task-description-history-list-item__user{color:#d5d6d7}.task-description-history-list-item__user cu-avatar{display:inline-block;margin-right:9px;vertical-align:middle}.task-description-history-list-item__description{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;flex:1;overflow:hidden;position:relative;margin-top:5px;padding-right:20px;white-space:nowrap}.task-description-history-list-item__description_active{white-space:normal}.task-description-history-list-item__description_noactive{white-space:nowrap;line-height:1}.task-description-history-list-item__description_noactive:after{content:"";display:block;position:absolute;width:100%;height:8px;bottom:0;pointer-events:none;background:linear-gradient(0deg,#fff,hsla(0,0%,100%,0))}.dark-theme .task-description-history-list-item__description_noactive:after{background:linear-gradient(0deg,#384047,rgba(56,64,71,0))}.task-description-history-list-item__description *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:21px;color:#848484}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.task-description-history-list-item__description *{font-family:var(--global-font-support)}}.dark-theme .task-description-history-list-item__description *{color:#d5d6d7}.task-description-history-list-item__description-show-more{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;right:0;top:2px;width:17px;height:17px;cursor:pointer;z-index:2;display:none}.task-description-history-list-item__description-show-more svg{vertical-align:top}.task-description-history-list-item__description_active .task-description-history-list-item__description-show-more{transform:rotate(180deg)}.task-description-history-list-item__description-show-more_active{display:block}.task-description-history-list-item__description-blur{width:94px;height:100%;position:absolute;right:0;bottom:0;top:0;z-index:1;display:none;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 60%,#fff)}.dark-theme .task-description-history-list-item__description-blur{background:linear-gradient(90deg,rgba(56,64,71,0) 0,#384047 60%,#384047)}.task-description-history-list-item__description-blur_active{display:block}.task-description-history-list-item__description img{max-width:100%}.task-description-history-list-item__description .cu-editor-wrapper{margin:0}.task-description-history-list-item__description .ql-editor{border-width:0;padding:0;text-align:left;direction:ltr}.task-description-history-list-item__description .clickup-table-view{margin:10px}.task-description-history-list-item__description td{overflow:auto;border:1px solid #7c828d}.dark-theme .task-description-history-list-item__description td{border:1px solid #828588}.task-description-history-list-item__restore{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;visibility:hidden;margin-top:8px;margin-right:5px;margin-left:10px;height:15px;width:17px;fill:#979797;cursor:pointer}.task-description-history-list__item:hover .task-description-history-list-item__restore{visibility:visible}.task-description-history-list-item__restore-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;flex-shrink:0;margin-top:9px;padding-right:10px;color:#848484;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .task-description-history-list-item__restore-text{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})();function Ot(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-description-history-list-item",12),n.qc("restore",function(t){return n.Uc(e),n.uc().onRestore.emit(t)}),n.bc()}if(2&e){const e=t.$implicit,i=n.uc();n.Dc("canEdit",i.canEdit)("description",e)}}function St(e,t){1&e&&(n.cc(0,"div",13),n.gc(1,14),n.bc())}let Et=(()=>{class e{constructor(){this.canEdit=!0,this.onRestore=new n.o,this.onClose=new n.o,this.trackByValue=ae.f}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-description-history-list"]],inputs:{canEdit:"canEdit",items:"items",tasksCache:"tasksCache"},outputs:{onRestore:"onRestore",onClose:"onClose"},decls:12,vars:4,consts:function(){let e,t,i,o;return e=$localize`:@@common_time␟0df22635e4e068086b771bd59cf36c3bdf00e5f0␟5502944589941621892: Time `,t=$localize`:@@common_user␟5859714c34b1c058fdcafef943b18bc4e063ea9f␟2930816404930711101: User `,i=$localize`:@@common_description␟3d7399dfc2b4701db343ddcab78ba46d45c70c4e␟667699995896678200: Description `,o=$localize`:@@cu-task-description-history-list__empty␟9047b4486d69698a0b70304d814017a6a987345f␟1026667920619970918: No history yet. `,[[1,"task-description-history-list"],[1,"task-description-history-list__header"],[1,"task-description-history-list__header-time"],e,[1,"task-description-history-list__header-user"],t,[1,"task-description-history-list__header-description"],i,["class","task-description-history-list__item",3,"canEdit","description","restore",4,"ngFor","ngForOf","ngForTrackBy"],["class","task-description-history-list__empty",4,"ngIf"],[1,"cu-modal-inner__close",3,"click"],[3,"icon"],[1,"task-description-history-list__item",3,"canEdit","description","restore"],[1,"task-description-history-list__empty"],o]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.cc(2,"div",2),n.gc(3,3),n.bc(),n.cc(4,"div",4),n.gc(5,5),n.bc(),n.cc(6,"div",6),n.gc(7,7),n.bc(),n.bc(),n.bd(8,Ot,1,2,"cu-task-description-history-list-item",8),n.bd(9,St,2,0,"div",9),n.bc(),n.cc(10,"div",10),n.qc("click",function(){return t.onClose.emit()}),n.Xb(11,"div",11),n.bc()),2&e&&(n.Ib(8),n.Dc("ngForOf",t.items)("ngForTrackBy",t.trackByValue),n.Ib(1),n.Dc("ngIf",!(null!=t.items&&t.items.length)),n.Ib(2),n.Dc("icon","modal-close"))},directives:[Ue.p,Ue.q,Ne.a,Dt],styles:[".task-description-history-list__header{display:flex;color:#4a4a4a;border-bottom:1px solid #e0e0e0;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;padding:15px 0 12px}.dark-theme .task-description-history-list__header{color:#828588;border-bottom:1px solid #1e272e}.task-description-history-list__header-time{width:150px}.task-description-history-list__header-user{width:118px;overflow:hidden}.task-description-history-list__header-description{flex:1;position:relative}.task-description-history-list__item{display:flex;padding-top:7px;padding-bottom:8px}.task-description-history-list__item+.task-description-history-list__item{border-top:1px solid #f5f5f5}.dark-theme .task-description-history-list__item+.task-description-history-list__item{border-top:1px solid #2b343b}.task-description-history-list-wrapper .cu-modal__body{min-height:0}.task-description-history-list-wrapper .cu-modal-inner__close{position:absolute;top:-105px;right:-65px}.task-description-history-list-wrapper.cu-modal.cu-modal_md .cu-modal__dialog{width:815px;padding-top:35px;border-radius:3px;margin:calc(60px + 5vh) auto 0}.task-description-history-list-wrapper .cu-modal__controls,.task-description-history-list-wrapper .cu-modal__header{display:none}.task-description-history-list__empty{margin-top:50px;text-align:center;color:#848484;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .task-description-history-list__empty{color:#d5d6d7}@media screen and (max-width:768px){.task-description-history-list-wrapper.cu-modal.cu-modal_md .cu-modal__dialog{width:calc(100% - 30px);overflow-y:scroll}.task-description-history-list-wrapper .cu-modal__body{width:815px}.task-description-history-list-wrapper .cu-modal-inner__close{margin-right:0;right:-15px}}"],encapsulation:2,changeDetection:0}),e})();const Pt=["taskDescriptionModal"];function jt(e,t){1&e&&n.Xb(0,"cu-loader")}function At(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-description-history-list",5),n.qc("onRestore",function(t){return n.Uc(e),n.uc(2).onRestore.emit(t)})("onClose",function(){return n.Uc(e),n.uc(2).close()}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("items",e.items2)("canEdit",e.canEdit)}}function $t(e,t){if(1&e&&(n.bd(0,jt,1,0,"cu-loader",3),n.bd(1,At,1,2,"cu-task-description-history-list",4)),2&e){const e=n.uc();n.Dc("ngIf",e.docHistoryLoading),n.Ib(1),n.Dc("ngIf",!e.docHistoryLoading)}}let Ut=(()=>{class e{constructor(e,t){this.modalService=e,this.changeDetector=t,this.canEdit=!0,this.onRestore=new n.o,this.onLoadHistory=new n.o}ngOnInit(){}ngOnChanges(e){setTimeout(()=>{this.items2=this.fixItems(this.items),this.changeDetector.destroyed||this.changeDetector.detectChanges()})}open(){this.onLoadHistory.emit(),this.modalService.open({name:"clearTrashContainer",content:this.taskDescriptionModal,modifier:"task-description-history-list-wrapper cu-modal__body_no-min-height"})}close(){this.modalService.close()}fixItems(e){if(!e)return[];let t;const i=Object(ht.a)(e);return i.reverse(),i.forEach(e=>{e.oldContent=t,t=e.content}),i.reverse(),i}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(we.a),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-description-history"]],viewQuery:function(e,t){if(1&e&&n.jd(Pt,3),2&e){let e;n.Qc(e=n.rc())&&(t.taskDescriptionModal=e.first)}},inputs:{canEdit:"canEdit",items:"items",docHistoryLoading:"docHistoryLoading"},outputs:{onRestore:"onRestore",onLoadHistory:"onLoadHistory"},features:[n.Gb],decls:4,vars:0,consts:[[1,"task-description-history__button",3,"click"],["icon","restore",1,"task-description-history__button-icon"],["taskDescriptionModal",""],[4,"ngIf"],[3,"items","canEdit","onRestore","onClose",4,"ngIf"],[3,"items","canEdit","onRestore","onClose"]],template:function(e,t){1&e&&(n.cc(0,"div",0),n.qc("click",function(){return t.open()}),n.Xb(1,"div",1),n.bc(),n.bd(2,$t,2,2,"ng-template",null,2,n.cd))},directives:[Ne.a,Ue.q,ft.a,Et],styles:[".task-description-history{font:600 14px/16px Gotham Pro,Proxima Nova,arial,serif;color:#000}.task-description-history__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-flex;align-items:center;border-width:0;line-height:15px;height:15px;box-sizing:border-box;font:400 12px/15px Gotham Pro,Proxima Nova,arial,serif;margin-top:10px;cursor:pointer;color:#4a4a4a}.dark-theme .task-description-history__button{color:#d5d6d7}.task-description-history__button:focus,.task-description-history__button:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.task-description-history__button:focus,.task-description-history__button:hover{color:var(--theme-main-color)}}.task-description-history__button:focus .task-description-history__button-icon,.task-description-history__button:hover .task-description-history__button-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.task-description-history__button:focus .task-description-history__button-icon,.task-description-history__button:hover .task-description-history__button-icon{fill:var(--theme-main-color)}}.task-description-history__button-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-top:-2px;height:15px;width:31px;fill:#979797}"],encapsulation:2,changeDetection:0}),e})();var Rt=i("uT1E"),Mt=i("5smY"),Ft=i("jwRX"),Lt=i("UAD/"),Nt=i("a2y0"),zt=i("gSwD"),qt=i("EP2k");const Gt=["wrapper"],Vt=["editorContainer"],Bt=["readonlyContainer"],Xt=["taskPopupDropdown"],Ht=["createTaskDropdown"],Wt=["buttonOptionsDropdown"],Kt=["commentContainer"],Qt=["toolbar"],Zt=["toolbar2"],Yt=["taskMention"],Jt=["taskEditing"],ei=["pop"],ti=["fileInput"],ii=["taskDescriptionHistory"],oi=["slashCommandTemplate"],ni=["slashCommand"],si=["slashCommandContainer"],ci=["emojiDropdown"],ai=["mentionSelector"],ri=["mentionSelectorDropdown"],li=["unfurlUrlDropdown"],di=["blockHanleDropdown"];function ui(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-rich-editor-toolbar",51,52),n.qc("qlHeaderFormatClicked",function(){return n.Uc(e),n.uc().qlHeaderFormatClicked.emit()})("onTogglePinned",function(t){return n.Uc(e),n.uc().togglePinnedToolbar(t)})("onAction",function(t){return n.Uc(e),n.uc().toolbarAction(t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("isStatic",!0)("isSticky",!0)("hideChecklist",e.hideChecklist)("hideToggleList",e.hideToggleList)("showListOfTasks",e.showListOfTasks)("allowComments",e.allowComments)("allowCreateTask",e.allowCreateTask)("allowCreateSubtask",e.allowCreateSubtask)("allowButtonFormat",e.allowButtonFormat)("allowTableContentFormat",e.allowTableContentFormat)("createTaskDisabled",!e.createTaskAllowed)("createCommentDisabled",!e.createCommentAllowed)("isPinned",e.pinnedToolbar)("isHidden",!e.pinnedToolbar||!(e.isEditorEnabled||e.alwaysEnabled))("allowPin",!0)("stickyTopPX",e.stickyTopPX)("disabled",!!e.createTaskData||"create"===(null==e.commentData?null:e.commentData.type))("inTable",e.inTable)("activeFormats",e.activeFormats)}}function mi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-mention-selector-container",53,54),n.qc("onSelect",function(t){return n.Uc(e),n.uc().addMentionToEditor(t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("users",e.users)("weights",e.weights)("showNotif",e.enableUserMentionsNotif)("taskUserGroups",e.taskUserGroups)("userGroups",e.userGroups)}}function pi(e,t){}const hi=function(e,t){return{data:e,commentsMap:t}};function fi(e,t){if(1&e&&n.bd(0,pi,0,0,"ng-template",55),2&e){const e=n.uc();n.Dc("ngTemplateOutlet",e.commentsTemplate)("ngTemplateOutletContext",n.Ic(2,hi,e.commentData,e.commentsMap))}}function bi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",56),n.cc(1,"div",57,58),n.qc("click",function(){return n.Uc(e),n.uc().cancelHighlightedBlockForReadOnlyContainer()})("clickOutside",function(){return n.Uc(e),n.uc().cancelHighlightedBlockForReadOnlyContainer()}),n.vc(3,"deltaHtml"),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("innerHtml",n.zc(3,1,e.content,"",e.sharedData.currentUser.value,!0),n.Vc)}}function gi(e,t){if(1&e&&(n.cc(0,"div",62),n.dd(1),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" ",null==e.ids?null:e.ids.length," ")}}function _i(e,t){if(1&e){const e=n.dc();n.cc(0,"div",59),n.qc("click",function(i){n.Uc(e);const o=t.$implicit;return n.uc().clickCommentsBadge(o.ids,i)}),n.Xb(1,"div",60),n.bd(2,gi,2,1,"div",61),n.bc()}if(2&e){const e=t.$implicit;n.ad("top",e.top,"px"),n.Ib(1),n.Dc("icon","cu2-comment"),n.Ib(1),n.Dc("ngIf",(null==e.ids?null:e.ids.length)>1)}}function vi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",63),n.qc("click",function(){return n.Uc(e),n.uc().showAll()}),n.cc(1,"div",64),n.Xb(2,"div",65),n.cc(3,"div",66),n.gc(4,67),n.bc(),n.bc(),n.bc()}}function ki(e,t){if(1&e){const e=n.dc();n.cc(0,"div",68),n.qc("click",function(){return n.Uc(e),n.uc().showLess()}),n.cc(1,"div",69),n.Xb(2,"div",70),n.cc(3,"div",71),n.gc(4,72),n.bc(),n.bc(),n.bc()}}const yi=function(e){return{"cu-editor-editing_active":e}};function wi(e,t){if(1&e&&(n.cc(0,"div",73),n.Xb(1,"span",74),n.ac(2),n.gc(3,75),n.vc(4,"username"),n.Zb(),n.bc()),2&e){const e=n.uc();n.Dc("ngClass",n.Hc(4,yi,e.isEditorEnabled)),n.Ib(4),n.kc(n.wc(4,2,e.userEditing)),n.hc(3)}}function xi(e,t){if(1&e&&n.Xb(0,"cu-comment-users",76),2&e){const e=n.uc();n.Dc("usersViewing",e.viewingUsers)}}function Ii(e,t){if(1&e&&(n.cc(0,"div",80),n.gc(1,81),n.bc()),2&e){const e=n.uc(2);n.Ib(1),n.kc(e.lastSavedDate),n.hc(1)}}const Ti=function(e){return{"cu-hidden":e}};function Ci(e,t){if(1&e&&(n.cc(0,"div",77),n.Xb(1,"div",78),n.bd(2,Ii,2,1,"div",79),n.vc(3,"duration"),n.vc(4,"async"),n.bc()),2&e){const e=n.uc();let t=null;n.Dc("ngClass",n.Hc(6,Ti,!e.isEditorEnabled)),n.Ib(2),n.Dc("ngIf",n.wc(3,2,null==(t=n.wc(4,4,e.task$))?null:t.date_updated))}}function Di(e,t){if(1&e&&(n.cc(0,"div",82),n.Xb(1,"div",83),n.cc(2,"div",84),n.gc(3,85),n.bc(),n.bc()),2&e){const e=n.uc();n.Dc("ngClass",n.Hc(1,Ti,!e.isEditorEnabled))}}function Oi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",90),n.qc("click",function(){return n.Uc(e),n.uc(2).print()}),n.gc(1,91),n.bc()}}function Si(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-description-history",92,93),n.qc("onRestore",function(t){return n.Uc(e),n.uc(2).restoreContent(t)})("onLoadHistory",function(){return n.Uc(e),n.uc(2).onLoadHistory.emit()}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("canEdit",e.canEdit)("items",e.historyItems)("docHistoryLoading",e.docHistoryLoading)}}const Ei=function(e){return{"cu-editor-fullscreen_collapse":e}};function Pi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",94),n.qc("click",function(){return n.Uc(e),n.uc(2).toggleFullscreen.emit()}),n.Xb(1,"div",95),n.bc()}if(2&e){const e=n.uc(2);n.Dc("cuTooltip",e.isFullScreen?e.exitFullScreenText:e.fullscreenText)("ngClass",n.Hc(3,Ei,e.isFullScreen)),n.Ib(1),n.Dc("icon",e.isFullScreen?"collapse-fullscreen":"expand-fullscreen")}}function ji(e,t){if(1&e){const e=n.dc();n.cc(0,"div",96),n.qc("click",function(){return n.Uc(e),n.uc(2).toggleConvert.emit()}),n.tc(),n.cc(1,"svg",97),n.cc(2,"g",98),n.Xb(3,"path",99),n.Xb(4,"path",100),n.bc(),n.bc(),n.bc()}}function Ai(e,t){if(1&e&&(n.cc(0,"div",24),n.bd(1,Oi,2,0,"div",86),n.bd(2,Si,2,3,"cu-task-description-history",87),n.bd(3,Pi,2,5,"div",88),n.bd(4,ji,5,0,"div",89),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngIf",e.showPrint),n.Ib(1),n.Dc("ngIf",e.isShowHistory&&e.taskAccess),n.Ib(1),n.Dc("ngIf",e.isShowFullScreen),n.Ib(1),n.Dc("ngIf",e.showConvert)}}function $i(e,t){if(1&e){const e=n.dc();n.cc(0,"div",101),n.qc("ondrop",function(t){return n.Uc(e),n.uc().addFiles(t)})("dragover",function(e){return e.preventDefault()}),n.cc(1,"div",102),n.cc(2,"div",103),n.Xb(3,"div",104),n.cc(4,"div",105),n.gc(5,106),n.bc(),n.bc(),n.bc(),n.bc()}}function Ui(e,t){}function Ri(e,t){if(1&e&&(n.cc(0,"div"),n.bd(1,Ui,0,0,"ng-template",107),n.bc()),2&e){n.uc();const e=n.Rc(60);n.Ib(1),n.Dc("ngTemplateOutlet",e)}}function Mi(e,t){}function Fi(e,t){if(1&e&&(n.cc(0,"div",108),n.bd(1,Mi,0,0,"ng-template",107),n.bc()),2&e){n.uc();const e=n.Rc(62);n.Ib(1),n.Dc("ngTemplateOutlet",e)}}function Li(e,t){if(1&e){const e=n.dc();n.cc(0,"div"),n.cc(1,"cu-button-options",109),n.qc("onChange",function(t){return n.Uc(e),n.uc().selectedButton.data=t})("onSubmit",function(t){return n.Uc(e),n.uc().updateButton(t)}),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("submitText",e.updateButtonText)("options",e.selectedButton.data)}}function Ni(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-mention-selector-dropdown",110,111),n.qc("onSelect",function(t){return n.Uc(e),n.uc().addMentionToEditor(t)})("dropdownClose",function(){return n.Uc(e),n.uc().hideMentions()}),n.bc()}if(2&e){const e=n.uc();n.Dc("users",e.users)("weights",e.weights)("showNotif",e.enableUserMentionsNotif)("fromRect",e.mentionRect)("taskUserGroups",e.taskUserGroups)("userGroups",e.userGroups)}}function zi(e,t){if(1&e){const e=n.dc();n.cc(0,"div",112),n.cc(1,"div",113),n.mc(2,114),n.Xb(3,"b"),n.vc(4,"username"),n.jc(),n.bc(),n.bc(),n.cc(5,"div",115),n.cc(6,"button",116),n.qc("click",function(){return n.Uc(e),n.uc().closeEditingAlert()}),n.gc(7,117),n.bc(),n.cc(8,"button",118),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.closeEditingAlert(),t.edit(null,!1)}),n.gc(9,119),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(4),n.kc(n.wc(4,1,e.userEditing)),n.hc(2)}}const qi=function(){return{}};function Gi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-slash-command",120,121),n.qc("applyCommand",function(t){return n.Uc(e),n.uc().applySlashCommand(t)})("cancelCommand",function(t){return n.Uc(e),n.uc().hideSlashCommand(null==t?null:t.replace,null==t?null:t.updateSelection)}),n.vc(2,"async"),n.bc()}if(2&e){const e=n.uc();n.Dc("alwaysVisible",!0)("dropdownPlacement",e.embedSlashCommandInfo.placement)("originalCommands",e.originalCommands)("allowedCommands",e.allowedCommands)("allowTurnIntoCommands",!0)("team",n.wc(2,10,e.sharedData.compatCurrentTeam$))("weights",e.weights)("currentValues",n.Gc(12,qi))("options",n.Gc(13,qi))("userGroups",e.userGroups)}}function Vi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-popup",123),n.qc("onRemove",function(){return n.Uc(e),n.uc(2).removeHoveredTaskMention()})("onEnter",function(){return n.Uc(e),n.uc(2).handleHover(!0)})("onLeave",function(){return n.Uc(e),n.uc(2).handleHover(!1)}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("taskId",null==e.hoverData||null==e.hoverData.value?null:e.hoverData.value.task_id)}}function Bi(e,t){if(1&e&&n.bd(0,Vi,1,1,"cu-task-popup",122),2&e){const e=n.uc();n.Dc("ngIf","task_mention"===(null==e.hoverData?null:e.hoverData.blotName))}}function Xi(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-quick-create-task-panel",125),n.qc("onBeforeCreate",function(){return n.Uc(e),n.uc(2).beforeTaskCreated()})("taskCreate",function(t){return n.Uc(e),n.uc(2).taskCreated(t)})("close",function(){return n.Uc(e),n.uc(2).hideCreateTask()}),n.bc()}if(2&e){const e=n.uc(2);n.Dc("isRow",!0)("isAlwaysActive",!0)("autoClose",!0)("isHidden",e.taskCreating)("margin",!1)("saveOnDestroy",!1)("hideDirectionSelector",!0)("dontCancel",!0)("defaultData",e.createTaskData)("alwaysDisplayLocation",!0)("buttonText",e.createTxt)("showTags",!1)("showStartDate",!1)("showDueDate",!0)("project",e.defaultCategory)("list",e.defaultSubcategory)}}function Hi(e,t){1&e&&n.Xb(0,"cu-loader")}function Wi(e,t){if(1&e&&(n.bd(0,Xi,1,16,"cu-quick-create-task-panel",124),n.bd(1,Hi,1,0,"cu-loader",9)),2&e){const e=n.uc();n.Dc("ngIf",(e.allowCreateTask||e.allowCreateSubtask)&&e.createTaskData),n.Ib(1),n.Dc("ngIf",(e.allowCreateTask||e.allowCreateSubtask)&&e.createTaskData&&e.taskCreating)}}const Ki=function(e,t,i,o){return{"cu-editor-wrapper_active":e,"cu-editor-wrapper_show-all":t,"cu-editor-wrapper_hightlight":i,"cu-editor-wrapper_hover":o}},Qi=function(e){return{"cu-editor-footer-info_fullscreen":e}},Zi=function(){return["top-left","top-right","bottom-left","bottom-right","auto"]},Yi="editor-pinned-toolbar";let Ji=(()=>{class e{constructor(e,t,i,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,x,I){this.renderer=e,this.element=t,this.sharedData=i,this.durationPipe=a,this.taskMentionService=r,this.modalService=l,this.zone=d,this.store=u,this.sharedTaskService=m,this.changeDetector=p,this.httpSession=h,this.domService=f,this.frameHelperService=b,this.codoxService=g,this.clipboard=_,this.sharedDocService=v,this.injector=k,this.localStorage=y,this.dataService=w,this.embedService=x,this.commonStringsService=I,this.isEditorEnabled=!1,this.isShowAll=!1,this.debounceSave$=new s.a,this.task$=new c.a(null),this.commentBadges$=new c.a([]),this.destroy$=new s.a,this.createTaskAllowed=!1,this.createCommentAllowed=!1,this.taskCreating=!1,this.commentsMap={},this.hasNotSavedData=!1,this.showMoreLinkVisible=!1,this.showLessLinkVisible=!1,this.viewLoaded=!1,this.inTable=!1,this.activeFormats={},this.linkUnfurling=0,this.handledLinksMemo=[],this.project$=new c.a(null),this.unfurlUrlMenuData=[],this.blockHandleMenuData=[],this.offline$=this.store.select(ge.b),this.content="",this.enableOnStart=!1,this.hideChecklist=!1,this.hideToggleList=!1,this.forGoals=!1,this.taskAccess=!0,this.viewId="",this.forCreateTask=!1,this.alwaysEnabled=!1,this.modifier="",this.emitContentImmediately=!1,this.disablePasteImage=!1,this.disableTaskMentionShortcut=!1,this.slashCommandSupport=!0,this.slashCommandCustom=!1,this.isSaved=!1,this.hideUnfurl=!1,this.hideBlockHandle=!1,this.isError=!1,this.overview=!1,this.alwaysShowAll=!1,this.isShowHistory=!1,this.isShowFullScreen=!1,this.isFullScreen=!1,this.canEdit=!0,this.showConvert=!1,this.collapseOnClickOutside=!1,this.debounceTime=1e3,this.autoEmbedFrame=!1,this.allowGoogleLinkEmbedding=!1,this.defaultEmbedSize="small",this.staticToolbar=!1,this.autoFocus=!0,this.disableOffline=!0,this.showCursor=!0,this.allowComments=!1,this.allowCreateTask=!0,this.allowCreateSubtask=!1,this.popupInBody=!1,this.enableUserMentions=!1,this.enableUserMentionsNotif=!0,this.allowDropArea=!1,this.listenForShiftTab=!1,this.allowPinToolbar=!1,this.pinToolbarByDefault=!1,this.allowButtonFormat=!1,this.allowTableContentFormat=!1,this.showViewingUsers=!1,this.removeInvalidForEmail=!1,this.attachmentType=1,this.showListOfTasks=!0,this.allowEditorCopyLink=!0,this.customBlockHandleDropdown=null,this.customBlockHandleDropdownContainer=null,this.onChange=new n.o,this.onCancel=new n.o,this.onUpdate=new n.o,this.onSave=new n.o,this.onFileAdded=new n.o,this.onFileError=new n.o,this.onFileStarted=new n.o,this.toggleFullscreen=new n.o,this.toggleConvert=new n.o,this.onLoadHistory=new n.o,this.onUpdateContent=new n.o,this.onDocDestroyWithoutSave=new n.o,this.onUndoAuto=new n.o,this.qlHeaderFormatClicked=new n.o,this.onDocLinkClicked=new n.o,this.onShiftTab=new n.o,this.onTaskCreated=new n.o,this.onScrollToResolvedComment=new n.o,this.onTogglePinnedToolbar=new n.o,this.onScrollToComment=new n.o,this.onLinkToBlock=new n.o,this.onBlockHandleDropdownChange=new n.o,this.allowedCommands=Object.assign(Object.assign({},o.Ib),{[o.f.key]:!0,[o.ab.key]:!0,[o.l.key]:!0}),this.codoxIniting=!1,this.offline=!1,this.pinnedToolbar=!1,this.debugPerf=this.localStorage.get("debugPerf"),this.showPrint=Object(oe.a)(),this.trackById=Object(ae.d)("id"),this.linkToBlockId$=new c.a(""),this.createTxt=$localize`:@@common_create:Create`,this.exitFullScreenText=$localize`:@@cu-task-editor__tooltip-msg_exit-fullscreen:Exit full screen`,this.fullscreenText=$localize`:@@common_full-screen:Full screen`,this.updateButtonText=$localize`:@@cu-task-editor__title_update-btn:Update button`,this.editorEnabled=new s.a,this.editorChangeHandler=(e,t,i,o)=>{if(e===P.h.TEXT_CHANGE&&o)o===P.i.SILENT&&t.ops.some(e=>Object(re.a)(e.insert)&&(e.insert.task_mention||e.insert.doc_mention))&&this.taskMentionService.updateMentions();else if(e===P.h.SELECTION_CHANGE){const e=this.editor.getSelection(!1);if(e){const t=this.editor.getFormat(e.index),i=this.editor.getContents(e.index,e.length);this.inTable=!!t["table-cell-line"]||!(!t.list||!t.list.cell)||i.ops.some(e=>e.attributes&&(e.attributes["table-cell-line"]||e.attributes["table-col"])),this.activeFormats=this.editor.getFormat(e),this.changeDetector.detectChanges()}}},this.textChangeHandler=(e,t,i)=>{i===P.i.USER&&this.zone.run(()=>{if(this.debounceSave$.next(),this.emitContentImmediately){const e=this.cleanDelta(this.linkifyText(this.editor.getContents()));this.onUpdateContent.emit(e)}})}}get taskMentionsModule(){return this.editor&&this.editor.getModule("taskMentions")}get blotFormatterModule(){return this.editor&&this.editor.getModule("blotFormatter")}get emojiModule(){return this.editor&&this.editor.getModule("emoji")}get mentionsModule(){return this.editor&&this.editor.getModule("mentions")}get hoverModule(){return this.editor&&this.editor.getModule("hover")}get commentsModule(){return this.editor&&this.editor.getModule("comments")}get mentionSelectorComponent(){return this.mentionSelector||this.mentionSelectorDropdown}ngOnInit(){this.allowedCommands[o.m.key]=this.allowTableContentFormat,this.allowedCommands[o.f.key]=!this.disablePasteImage,this.removeInvalidForEmail&&(this.allowedCommands=this.removeInvalidEmailItems(this.allowedCommands));const e=this.localStorage.get(`${Yi}_${this.pinToolbarKey}`);this.pinnedToolbar=!(!this.pinToolbarByDefault||!0===e||!1===e)||Boolean(e),this.store.pipe(Object(X.select)(H.m),Object(u.a)(this.destroy$)).subscribe(e=>{e&&this.commentsModule&&this.commentsModule.shownData&&this.commentsModule.hidePopup(),this.task$.next(e),this.changeDetector.detectChanges()}),this.content&&"object"==typeof this.content&&(this.content=JSON.stringify(this.content)),this.codoxService.disabled$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{e?this.stopCodox():this.initCodox()}),this.disableOffline&&this.offline$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.offline=e,this.editor&&(e?this.cancel():!this.enableOnStart&&!this.alwaysEnabled||this.edit())}),this.sharedTaskService.forceCodoxUpdate$.pipe(Object(m.a)(({id:e})=>this.codoxEditorToken===e&&!!this.codox),Object(u.a)(this.destroy$)).subscribe(({content:e})=>{const t=new y.a(JSON.parse(e));this.codox.forceSync(t)}),this.linkToBlockId$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{e&&this.scrollToLinkBlock()})}ngAfterViewInit(){this.initEditor(),this.viewLoaded=!0,this.slashCommandCustom||(this.initSlashCommandHandler=this.renderer.listen("document",Q.a,e=>{if(this.slashCommand||!e||!e.detail||e.detail.id!==this.editorId||e.detail.sessionId!==this.httpSession.getSessionId())return;this.hideSlashCommand();const t=this.editor;if(!t)return;this.embedSlashCommandInfo=Object(Z.c)(t),this.embedSlashCommandInfo.container=e.detail.node.children[0];const i=this.embedSlashCommandInfo.container.getBoundingClientRect();this.embedSlashCommandInfo.placement=window.innerWidth-i.right>500?"right":window.innerWidth-i.right<250?"left":i.top>window.innerHeight/2?"top":"bottom",this.embedSlashCommandInfo.view=this.domService.appendTemplateToElement(this.slashCommandTemplate,this.embedSlashCommandInfo.container,this.slashCommandContainer),this.changeDetector.detectChanges(),this.slashCommand?this.slashCommand.activate(e.detail.replace,"","",e.detail.defaultCommand):setTimeout(()=>{this.slashCommand&&this.slashCommand.activate(e.detail.replace,"","",e.detail.defaultCommand)})}))}ngOnChanges(e){const t=Boolean(e.entityId&&e.entityId.currentValue!==e.entityId.previousValue||e.editorToken&&e.editorToken.previousValue!==e.editorToken.currentValue);t&&this.stopCodox(),this.editor&&e.content?(t&&(this.editor.history.clear(),this.content||this.editor.setContents(null)),e.content.currentValue&&(this.hasNotSavedData&&!t||e.content.currentValue===e.content.previousValue||this.setInitContent(e.content.currentValue,!1,!1,!1,t)),e.project&&e.project.currentValue&&this.project$.next(e.project.currentValue)):this.forCreateTask&&e.project&&e.project.currentValue&&this.project$.next(e.project.currentValue),e.userEditing&&e.userEditing.previousValue&&!e.userEditing.currentValue&&this.closeEditingAlert(),e.canEdit&&this.viewLoaded&&(e.canEdit.previousValue||!e.canEdit.currentValue||this.editor||this.initEditor()),this.canEdit||setTimeout(()=>{this.formatLinks()},200),this.editor&&this.editorToken&&!this.codox&&this.initCodox(),e.linkToBlockId&&e.linkToBlockId.currentValue&&(this.isShowAll||this.alwaysShowAll||this.isFullScreen||this.showAll(),this.linkToBlockId$.next(e.linkToBlockId.currentValue)),e.canEdit&&!e.canEdit.currentValue&&setTimeout(()=>{this.handleClickLinkForReadOnlyContainer()},300)}ngOnDestroy(){if(this.hoverModule&&this.hoverModule.destroy(),this.commentsModule&&this.commentsModule.destroy(),this.editor&&this.allowComments){const e=this.cleanDelta(this.linkifyText(this.editor.getContents())),{found:t,changes:i}=Object(ce.c)(e);t&&this.docDestroyedWithoutSave(e.compose(i))}this.destroy$.next(),this.destroy$.unsubscribe(),this.initSlashCommandHandler&&(this.initSlashCommandHandler(),this.initSlashCommandHandler=null),this.hasNotSavedData&&this.docDestroyedWithoutSave(),this.toolbarContainer&&(this.toolbarContainer.nativeElement.innerHTML=""),this.stopCodox(),this.editor&&(this.editor.off(P.h.EDITOR_CHANGE,this.editorChangeHandler),this.editor.off(P.h.TEXT_CHANGE,this.textChangeHandler),Object(I.e)(this.editor),this.editor=null,this.editorContainer=null)}removeInvalidEmailItems(e){const t=o.Q.key,i=o.S.key;return function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(e,["symbol"==typeof t?t:t+"","symbol"==typeof i?i:i+""])}stopCodox(){this.codoxIniting=!1,this.codox&&(this.codox.stop(),this.codox=null,this.codoxEditorToken=null)}initCodox(){const e=this.editorToken;if(!this.editor||!e||e===this.codoxEditorToken||this.codoxService.disabled)return;this.stopCodox(),this.codoxEditorToken=e;const t={editor:this.editor,docId:e,showCursor:this.showCursor,hooks:{fetchDocOnNetworkReconnect:()=>this.codoxService.getContent(e).toPromise(),usersUpdate:e=>{this.zone.run(()=>{this.viewingUsers=e.map(e=>{if(this.users){const t=this.users.find(t=>String(t.id)===String(e.id));if(t)return t}return{id:e.id,displayName:e.name,username:e.name,email:e.email,color:e.color,profilePicture:e.avatar}}),this.viewingUsers=Object(le.a)(this.viewingUsers.filter(e=>e.id!==this.sharedData.currentUser.value.id),"id"),this.changeDetector.detectChanges()})}},content:JSON.stringify(this.editor.getContents()),timestamp:(new Date).getTime()};let i;this.codoxIniting=!0,this.changeDetector.markForCheck(),this.codoxService.startCodox(t).pipe(Object(p.a)(([e,t])=>(this.codox=e,i=performance.now(),t)),Object(h.a)(()=>{this.codoxIniting=!1,this.changeDetector.markForCheck(),delete t.hooks}),Object(u.a)(this.destroy$)).subscribe(e=>{this.scrollToLinkBlock()},e=>{})}applySlashCommand({command:e,value:t}){if(!e)return;if(e.key===o.f.key&&t&&"upload"===t.id&&t.data&&t.data.length)return this.hideSlashCommand(),void t.data.forEach(e=>{this.sendFile(e)});let i;i||(i=Object(Z.e)(e,t,!0,this.defaultEmbedSize)),this.hideSlashCommand(i),this.editor&&e.formatCommand&&Object(Z.a)(this.editor,e.key,t),this.editor&&e.turnIntoCommand&&Object(Z.b)(this.editor,e.key)}hideSlashCommand(e="",t=!0){this.embedSlashCommandInfo&&(this.slashCommandContainer&&this.embedSlashCommandInfo.view&&this.domService.removeView(this.embedSlashCommandInfo.view,this.slashCommandContainer),Object(Z.f)(this.embedSlashCommandInfo,e,t,this.httpSession.getSessionId()),this.embedSlashCommandInfo=null)}openSlashCommand(e){const t=this.editor&&this.editor.getModule("slashCommands");t&&t.activate("",e)}_composeCloudAttachmentData(e,t){return(e=Object.assign({},e)).name||(e.name=e.title),e.type=e.extension,e.source=t,e.date=Date.now(),e.user=this.sharedData.currentUser.value,e["load-result"]=Object.assign({},e),e}initEditor(){this.canEdit?(this.zone.runOutsideAngular(()=>{const e=this.offline||!this.enableOnStart&&!this.alwaysEnabled;let t=this.scrollContainer?this.scrollContainer:null;this.isFullScreen&&(t=Object(I.s)(this.editorContainer.nativeElement));const i={container:this.toolbar.nativeElement,handlers:{blockquote:Object(_e.a)("blockquote",()=>this.editor),"code-block":Object(_e.a)("code-block",()=>this.editor),link:e=>{e?this.editor.theme.tooltip.edit():this.editor.format("link",!1,P.i.USER)},image:()=>{const e=new MouseEvent("click",{bubbles:!1});this.fileInput.nativeElement.dispatchEvent(e)},undo:()=>{this.editor.history.undo()},redo:()=>{this.editor.history.redo()},divider:()=>{const{index:e}=this.editor.getSelection();this.editor.insertText(e,"\n",y.b.sources.USER),this.editor.insertEmbed(e+1,"divider",!0,y.b.sources.USER),this.editor.insertText(e+2,"\n",y.b.sources.USER),this.editor.setSelection(e+3,y.b.sources.API)},markdown:()=>{const e=this.editor.getSelection(!0);if(!e||e.length<1)return;let t=this.editor.getContents(e.index,e.length+1);t.ops.length&&"\n"!==t.ops[t.ops.length-1].insert&&(t=t.compose((new y.a).retain(e.length).delete(1)));const i=Object(Y.a)(t);this.clipboard.copyFromContent(i),this.editor.setSelection(e.index+e.length)},comment:()=>{this.commentsModule&&this.createCommentAllowed&&this.commentsModule.showCreatePopup()},task:()=>{this.taskMentionsModule&&this.createTaskAllowed&&this.taskMentionsModule.showCreatePopup()},subtask:()=>{this.taskMentionsModule&&this.createTaskAllowed&&this.taskMentionsModule.showCreatePopup(this.entityId)},table:()=>{this.editor.getModule("table").insertTable(3,3)},youtube:()=>{this.openSlashCommand(o.J.key)},button:()=>{this.openSlashCommand(o.l.key)},l:()=>{this.openSlashCommand(o.Y.key)},"table-content":()=>{this.openSlashCommand(o.m.key)},background:e=>{this.editor.format("background",e,P.i.USER),this.activeFormats=this.editor.getFormat()},color:e=>{this.editor.format("color",e,P.i.USER),this.activeFormats=this.editor.getFormat()},indent:e=>{const t=this.editor.getSelection();if(0===t.length){const[i]=this.editor.getLine(t.index),o=this.editor.getFormat(t);if(i&&"list"===i.statics.blotName&&i.isToggleListItem())Object(x.a)(this.editor,"+1"===e,{line:i,format:o});else{const t=parseInt(o.indent||0,10);if("+1"===e||"-1"===e){let i="+1"===e?1:-1;"rtl"===o.direction&&(i*=-1),this.editor.format("indent",t+i,y.b.sources.USER)}}}else this.editor.getLines(t).forEach(t=>{const i=t.formats(),o=parseInt(i.indent||0,10);if("+1"===e||"-1"===e){let n="+1"===e?1:-1;"rtl"===i.direction&&(n*=-1),t.format("indent",o+n,y.b.sources.USER)}})}}};this.toolbar2&&this.toolbarContainer&&(this.toolbarContainer.nativeElement.innerHTML="",this.toolbarContainer.nativeElement.appendChild(this.toolbar2.nativeElement));const n={id:this.editorId,readOnly:e,bounds:this.editorContainer.nativeElement,placeholder:this.placeholder||(this.slashCommandSupport?$localize`:@@cu-task-editor__form-placeholder_quill-description:Description or type '/' for commands`:$localize`:@@common_add-description:Add description`),theme:this.staticToolbar?"snow":"bubble",formats:["bold","italic","strike","underline","list","image","link","divider","background","code","code-block","blockquote","script","header","indent","align","direction","task_mention","comment_mention","slash_command","frame","grammarly","attachment","alt","height","width","data-id","data-temp-id","data-progress","data-size","table","table-row","table-body","table-container","comment","comment_draft","button","table_content"],scrollingContainer:t,modules:{toolbar:i,storage:!0,toolbar2:!(!this.allowPinToolbar||this.staticToolbar||!this.toolbar2)&&Object.assign(Object.assign({},i),{container:this.toolbar2.nativeElement}),history:{userOnly:!0},clipboard:{matchers:Object(J.a)(this.getEditor.bind(this),()=>this.disablePasteImage)},keyboard:{bindings:Object.assign(Object.assign({},Object(x.b)(this.getEditor.bind(this),()=>!0,this.getEditorContainer.bind(this),!1)),{escape:Object(x.c)(this.closeUp.bind(this))})},table:{tableTools:{zIndex:1e3}},dragDropBlocks:Object.assign(Object.assign({},T.a),{allowHandleBlock:!0,allowCopyLink:this.allowEditorCopyLink,allowTurnInto:!0,dropdownContainer:this.customBlockHandleDropdown||this.blockHandleDropdown.nativeElement,blockHandleDropdownContainer:this.customBlockHandleDropdownContainer,onShow:(e,t,i)=>{this.customBlockHandleDropdown?this.onBlockHandleDropdownChange.emit({menuData:e,onCommit:t,onSelect:i}):this.zone.run(()=>{this.blockHandleMenuData=e,this.blockHandleCommit=t,this.blockHandleSelect=i,this.changeDetector.detectChanges()})},onArrowUp:e=>{this.customBlockHandleDropdown?this.onBlockHandleDropdownChange.emit({menuData:e,onCommit:null,onSelect:null}):this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowDown:e=>{this.customBlockHandleDropdown?this.onBlockHandleDropdownChange.emit({menuData:e,onCommit:null,onSelect:null}):this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowLeft:e=>{this.customBlockHandleDropdown?this.onBlockHandleDropdownChange.emit({menuData:e,onCommit:null,onSelect:null}):this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowRight:e=>{this.customBlockHandleDropdown?this.onBlockHandleDropdownChange.emit({menuData:e,onCommit:null,onSelect:null}):this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})}}),pasteImage:{onPaste:e=>{e&&e.length>0&&!this.disablePasteImage&&e.forEach(e=>this.sendFile(e))}},pasteIframe:{getCheckEmbedHeaderPromise:e=>this.embedService.checkHeaders(e).pipe(Object(f.a)(()=>""),Object(b.a)(()=>Object(a.a)("site is not supported"))).toPromise(),defaultEmbedSize:this.defaultEmbedSize},pasteLinkOverText:!0,pasteInList:!0,pasteInBlocks:!0,pasteInTable:!0,dnd:!0,taskMentions:{sessionId:this.httpSession.getSessionId(),onOpen:()=>{this.taskMention.insertTaskSelector()},onCreatePopupAllowed:e=>{this.zone.run(()=>{this.createTaskAllowed=e,this.changeDetector.detectChanges()})},onShowCreatePopup:(e,t)=>{this.zone.run(()=>{this.createTaskData=e,this.createTaskRect=t,this.taskCreating=!1,this.changeDetector.detectChanges(),this.createTaskDropdown&&this.createTaskDropdown.open()})},onHideCreatePopup:()=>{this.zone.run(()=>{this.createTaskData=null,this.createTaskRect=null,this.taskCreating=!1,this.changeDetector.detectChanges(),this.createTaskDropdown&&this.createTaskDropdown.close()})}},unfurlUrl:{dropdownContainer:this.unfurlUrlDropdown.nativeElement,defaultEmbedSize:this.defaultEmbedSize,getBookmarkEmbedPromise:e=>this.dataService.getMetadataFromUrl(e).toPromise(),getCheckEmbedHeaderPromise:e=>this.embedService.checkHeaders(e).pipe(Object(f.a)(()=>""),Object(b.a)(()=>Object(a.a)("site is not supported"))).toPromise(),onShow:(e,t,i,o,n)=>{this.zone.run(()=>{this.unfurlUrlMenuData=t,this.unfurlUrlonCommit=o,this.unfurlUrlonSelect=n,this.changeDetector.detectChanges()})},onHide:()=>{setTimeout(()=>{this.taskMentionService.updateDocMentions()},100)},onArrowUp:e=>{this.zone.run(()=>{this.unfurlUrlMenuData=e,this.changeDetector.detectChanges()})},onArrowDown:e=>{this.zone.run(()=>{this.unfurlUrlMenuData=e,this.changeDetector.detectChanges()})},onEnter:()=>{}},magicUrl:{allowGoogleLinkEmbedding:this.allowGoogleLinkEmbedding,defaultEmbedSize:this.defaultEmbedSize,unfurlDocLink:!0,embedDocLink:!0,onClick:(e,t,i)=>{const o=t.domNode.getAttribute("href"),n=window.location.href.split("?")[0],s=o.split("?")[0];if(o&&Object(I.v)(o)&&this.editor&&n===s){e.preventDefault(),e.stopPropagation();const t=Object(I.r)(o);return this.linkToBlockId$.next(t),!0}const c=window.location.href.split("/");c.pop();const a=c.join("/");if(this.viewId&&o.startsWith(a))return e.preventDefault(),e.stopPropagation(),this.onDocLinkClicked.emit(o),!0;if(o){const t=o.match(me.d);if(!t||t.length<3)return;const i=t[1],n=t[2];if(n&&(i===this.entityId||i===this.customTaskIdPath))return e.preventDefault(),e.stopPropagation(),this.onScrollToComment.emit(n),!0}},linkHandler:e=>{e&&e.data&&("google"===e.type?(this.linkUnfurling++,this.dataService.googleDriveAddById({type:this.entityId?this.attachmentType:4,parent:this.entityId||this.project$.value.id,file_id:e.data.id,permanent:!1}).subscribe(t=>{if(t&&t.success&&t.attachment){const i=this._composeCloudAttachmentData(t.attachment,2);Object(be.b)(this.editor,e.link,[{insert:"\n"},{insert:{attachment:i}}])}this.linkUnfurling--},e=>{this.linkUnfurling--})):"custom-task-id"===e.type&&this.dataService.getTask(e.data.customId,!1,!0,!1,{custom_task_ids:"true",team_id:e.data.teamId}).subscribe(t=>{Object(be.b)(this.editor,e.link,[{insert:{task_mention:this.taskMentionService.getTaskMentionObject(t)},attributes:{link:null}}])}))}},syntax:"undefined"!=typeof hljs&&{languages:w.a},markdown:!!this.sharedData.currentUser.value.markdown_shortcuts,matcher:!0,hooks:{onButtonOptions:(e,t)=>{this.selectedButton={element:e.domNode.querySelector(".ql-btn__edit"),blot:e,data:t},this.buttonOptionsDropdown&&this.buttonOptionsDropdown.open()}},emoji:{onQuery:e=>this.emojiDropdown.filter(e).length>0,onShowDialog:(e,t)=>{this.emojiRect=t,this.changeDetector.detectChanges(),this.emojiDropdown.open()},onHideDialog:()=>{this.emojiDropdown.close(),this.emojiRect=null},onKeyPress:e=>this.emojiDropdown.handleKey(e)},mentions:{dropdownContainer:this.mentionSelector&&this.mentionSelector.elementRef.nativeElement,onQuery:e=>this.mentionSelectorComponent.filter(e),onShowDialog:(e,t)=>{this.zone.run(()=>{this.mentionRect=t,this.changeDetector.detectChanges(),this.mentionSelectorComponent.open()})},onHideDialog:()=>{this.zone.run(()=>{this.mentionSelectorComponent.close(),this.mentionRect=null})},onKeyPress:e=>this.mentionSelectorComponent.handleKey(e)},hover:{onClick:(e,t)=>{if(e.blotName===ue.a.blotName){if(!(e&&e.blot&&e.blot.domNode&&"true"===e.blot.domNode.dataset.canOpen))return;this.hoverModule.hidePopup(),this.sharedTaskService.clickTaskLink({id:e.value.task_id},t)}else if(e.blotName===ee.a.blotName)this.sharedTaskService.clickTaskLink({id:e.value.task_id},t);else if(e.blotName===ne.a.blotName){const i=e.value;this.viewId===i.viewId?(t.preventDefault(),t.stopPropagation(),this.onDocLinkClicked.emit(Object(se.a)(i))):this.sharedDocService.clickDocLink(this.injector,i.teamId,i.viewId,i.pageId,t)}},onShow:(e,t)=>{this.zone.run(()=>{this.hoverData=e,this.hoverRect=t,this.changeDetector.detectChanges(),this.taskPopupDropdown&&this.taskPopupDropdown.open()})},onHide:()=>{this.zone.run(()=>{this.hoverData=null,this.hoverRect=null,this.changeDetector.detectChanges(),this.taskPopupDropdown&&this.taskPopupDropdown.close()})}},comments:!!this.allowComments&&{dropdownContainer:this.commentContainer.nativeElement,onShow:e=>{this.commentData=e,this.commentsMap=this.getCommentsMap(),this.changeDetector.detectChanges()},onHide:()=>{this.commentData=null,this.changeDetector.detectChanges()},onCreatePopupAllowed:e=>{this.zone.run(()=>{this.createCommentAllowed=e,this.changeDetector.detectChanges()})}},linkEmbedding:{allowGoogleLinkEmbedding:this.allowGoogleLinkEmbedding,defaultEmbedSize:this.defaultEmbedSize,auto:this.autoEmbedFrame,resolveLinkData:e=>this.frameHelperService.resolveUrlData(e).toPromise()},floatButton:!this.staticToolbar,slashCommands:!!this.slashCommandSupport&&{id:this.editorId,sessionId:this.httpSession.getSessionId()},blotFormatter:{specs:[L,B]}}};this.disableTaskMentionShortcut&&delete n.modules.taskMentions,this.enableUserMentions||delete n.modules.mentions,this.editor=new y.b(this.editorContainer.nativeElement,n),this.listenForShiftTab&&this.editor.keyboard.addBinding({key:"Tab",shiftKey:!0},(e,t)=>{this.onShiftTab.emit()}),this.editor.root.classList.add("focus-visible"),e?this.isEditorEnabled=!1:this.edit(),Object(C.a)(this.editor.root).pipe(Object(g.a)(10,r.a),Object(u.a)(this.destroy$)).subscribe(()=>{this.showMoreLinkVisible=!this.isEmptyEditor()&&this.editor.root.clientHeight<this.editor.root.scrollHeight,this.showLessLinkVisible=!this.isEmptyEditor()&&this.editor.root.clientHeight>240,this.calcCommentBadges(),this.changeDetector.markForCheck()}),Object(l.a)(document,"mousedown").pipe(Object(m.a)(()=>(!this.alwaysEnabled||this.isFullScreen)&&this.isEditorEnabled),Object(u.a)(this.destroy$)).subscribe(e=>{Object(q.a)(e).find(e=>e.className&&"string"==typeof e.className&&(e.className.split(" ").includes("cu-col-tool")||e.className.split(" ").includes("cu-col-tool-dropdown")))||document.querySelector(".task-selector_task-mentions")||document.querySelector(".cu-slash-command__tooltip")||this.element.nativeElement.contains(e.target)||e.target.closest(".ignore-click-out")||e.target.closest("grammarly-popups")||this.createTaskData||this.zone.run(()=>{this.closeUp()})})}),this.editor.theme.tooltip.root.querySelector("input[data-link]").dataset.link=this.commonStringsService.typeUrlAndEnterText,this.editor.clipboard.addMatcher(Node.TEXT_NODE,(e,t)=>{if("string"!=typeof e.data||!t.ops.length)return t;const i=e.data.replace(/(?:\r\n|\r|\n)/g,"\n");return this.disablePasteImage&&0===i.search(/^data:image/)?new y.a:(setTimeout(()=>{this.formatLinks()},200),t)}),this.editor.on(P.h.EDITOR_CHANGE,this.editorChangeHandler),this.editor.on(P.h.TEXT_CHANGE,this.textChangeHandler),this.debounceSave$.pipe(Object(m.a)(e=>this.allowComments),Object(g.a)(300,r.a),Object(u.a)(this.destroy$)).subscribe(e=>{this.calcCommentBadges()}),this.debounceSave$.pipe(Object(f.a)(()=>this.entityId),Object(_.a)(()=>{this.hasNotSavedData=!0,this.isSaved=!1,this.changeDetector.detectChanges()}),Object(g.a)(this.debounceTime),Object(u.a)(this.destroy$)).subscribe(e=>{this.hasNotSavedData=!1,this.save(e)}),this.setInitContent(this.content),Object(l.a)(this.element.nativeElement,"focus").pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.editor.focus()}),this.codoxEditorToken=null,this.editorToken&&this.initCodox(),this.scrollToCommentId&&setTimeout(()=>{this.goToComment(this.scrollToCommentId)})):(setTimeout(()=>{this.readonlyContainer&&Object(C.a)(this.readonlyContainer.nativeElement).pipe(Object(v.a)(()=>!!this.readonlyContainer),Object(g.a)(10,r.a),Object(m.a)(()=>!!this.readonlyContainer),Object(u.a)(this.destroy$)).subscribe(()=>{this.showMoreLinkVisible=this.readonlyContainer.nativeElement.clientHeight<this.readonlyContainer.nativeElement.scrollHeight,this.changeDetector.markForCheck()})}),setTimeout(()=>{this.formatLinks()},200))}addTaskMentionToEditor(e=null,t){this.taskMentionsModule&&this.taskMentionsModule.addTaskMentionToEditor(e,t)}hideCreateTask(){this.taskMentionsModule&&this.taskMentionsModule.hideCreatePopup(),this.taskCreating=!1}beforeTaskCreated(){this.taskCreating=!0}taskCreated({task:e}){this.taskMentionsModule&&this.taskMentionsModule.replaceCreatedTaskMention(this.taskMentionService.getTaskMentionObject(e)),this.onTaskCreated.emit(e),this.taskCreating=!1}removeHoveredTaskMention(){this.hoverData&&this.hoverModule&&(this.edit(),this.hoverModule.removeHoveredMention(this.hoverData.blot),this.taskPopupDropdown&&this.taskPopupDropdown.close())}addEmojiToEditor(e){this.editor.focus(),this.emojiModule.insertEmoji({code:e.unified.toLowerCase(),name:e.name}),this.save(this.entityId)}dismissTaskMention(){this.taskMentionsModule.dismissTaskMention()}closeTaskMention(){this.taskMentionsModule.closeTaskMention(),this.save(this.entityId)}openTaskMention(){this.taskMentionsModule.isMentionListOpen=!0}setInitContent(e,t=!1,i=!1,o=!1,n=!0){if(this.initContent=e,e)try{const s=Object(fe.f)(new y.a(function(e,t){return t?Object.assign(Object.assign({},e),{ops:e.ops.map(e=>{if(e.insert&&e.insert.image&&e.attributes){const i=e.attributes["data-id"],o=t.find(e=>e.id===i);o&&(e.insert.image=o.url)}if(e.insert&&e.insert.attachment){const i=e.insert.attachment.id,o=t.find(e=>e.id===i);o&&(e.insert.attachment.url=o.url,e.insert.attachment.thumbnail_large=o.thumbnail_large,e.insert.attachment.thumbnail_small=o.thumbnail_small,e.insert.attachment.name=o.name)}return e})}):e}(JSON.parse(e),this.task$.value&&this.task$.value.attachments)));if(!n){const e=this.cleanDelta(this.editor.getContents()),t=e.diff(s),i=s.diff(e),o=i.filter(e=>Boolean(e.insert)),n=t&&t.ops&&0===t.ops.length,c=this.editor.getLength()<2&&t&&t.ops&&1===t.ops.length&&t.ops[0].retain,a=1===o.length&&Boolean(o[0].insert.slash_command);if(n||c||a||Object(de.a)(t,i))return}let c=!1;i&&(c=!!this.codox,this.stopCodox()),this.codox||(n?(this.debugPerf&&performance.mark("setContents"),this.editor.setContents(Object(I.G)(s)),this.debugPerf&&(performance.measure("setContents_m","setContents"),performance.getEntriesByName("setContents_m"),performance.clearMarks("setContents"),performance.clearMeasures("setContents"))):this.editor.updateContents(this.editor.getContents().diff(Object(I.G)(s)))),i&&c&&this.initCodox(),o&&this.codox&&this.codox.forceSync(s),n&&this.editor.history.clear(),this.allowComments&&setTimeout(()=>{this.calcCommentBadges()},200),t?setTimeout(()=>{this.formatLinks()},200):this.formatLinks(),Object(d.a)(0,r.a).pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.showMoreLinkVisible=!this.isEmptyEditor()&&this.editor.root.clientHeight<this.editor.root.scrollHeight,this.showLessLinkVisible=!this.isEmptyEditor()&&this.editor.root.clientHeight>240,this.changeDetector.markForCheck()})}catch(s){}}edit(e,t=!0){if(!this.offline&&this.editor&&(!e||!e.target.closest("a"))){if(e&&Object(q.a)(e).map(e=>e.className).some(e=>e&&"string"==typeof e&&e.split(" ").includes("ql-tooltip")))return;this.isEditorEnabled?this.editor.focus():t&&this.userEditing?this.showEditingAlert():(this.editor.enable(),this.isEditorEnabled=!0,this.editorEnabled.next(),this.isShowAll=!0,this.onChange.emit(),Object(d.a)(100).pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.autoFocus?this.editor.focus():this.onUndoAuto.emit()}))}}closeUp(){this.hasNotSavedData&&(this.hasNotSavedData=!1,this.save(this.entityId)),this.cancel()}cancel(){if(!this.isEditorEnabled)return;const e=this.editor.getContents(),t=Object(I.f)(e);this.isEditorEnabled=!1,t.ops.length&&this.editor.updateContents(t),this.editor.history.clear(),this.editor.disable(),this.blotFormatterModule&&this.blotFormatterModule.hide(),this.onCancel.emit()}getCleanDelta(){return this.cleanDelta(this.linkifyText(this.editor.getContents()))}save(e){if(e===this.entityId){const e=this.getCleanDelta();if(this.onSave.emit(e),this.forCreateTask)return;this.task$.value&&(this.task$.value.date_updated=(new Date).getTime(),this.lastSavedDate=this.getLastSavedDate())}}cleanDelta(e){const t=new y.a;return e.ops.forEach(e=>{e.insert&&(e.insert.task_mention?t.ops.push({insert:{task_mention:Object(I.c)(e.insert.task_mention)}}):e.insert.image||e.insert.attachment?e.attributes&&e.attributes["data-temp-id"]||t.ops.push(e):e.insert.slash_command||t.ops.push(e))}),t}linkifyText(e){return Object(I.G)(e)}showAll(){this.isShowAll=!0,this.sharedTaskService.onScrollbarsUpdate.emit()}showLess(){this.isShowAll=!1,this.cancel(),this.onCancel.emit(),this.sharedTaskService.onScrollbarsUpdate.emit()}collapseAll(){this.collapseOnClickOutside&&this.isShowAll&&(this.isShowAll=!!this.showMoreLinkVisible,this.onCancel.emit())}getHTML(){return this.editor.root.innerHTML}getText(){return this.editor.getText()}isShowMoreVisible(){if(this.isShowAll)return!1;const e=this.editorContainer.nativeElement.querySelector(".ql-editor");return e.clientHeight<e.scrollHeight}isEmptyEditor(){return this.editor&&Object(I.u)(this.editor.getContents())}composeCloudAttachmentData(e,t){return(e=Object.assign({},e)).name||(e.name=e.title),e.type=e.extension,e.source=t,e.date=Date.now(),e.user=this.sharedData.currentUser.value,e["load-result"]=Object.assign({},e),e}addAttachmentToEditor(e){if(!this.editor)return;this.edit();const t=this.editor.getSelection(!0);if(t){const i=t.index,[o,n]=this.editor.getLine(i),s=o.formats(),c=(new y.a).retain(i);let a=2;"list"===o.statics.blotName?(c.insert("\n",Object.assign({},s)).insert({attachment:e},Object.assign(Object.assign({},s.list),{"wrapper-indent":s.indent,"in-list":s.list.list})),o.next&&"list-block-wrapper"===o.next.statics.blotName&&o.next.children.head&&"attachment"===o.next.children.head.statics.blotName&&(c.delete(1),a=o.next.length()+2)):c.insert({attachment:e}),this.editor.updateContents(c),this.editor.setSelection(i+a,y.b.sources.API)}}addCloudAttachment(e,t){e=this.composeCloudAttachmentData(e,t),this.addAttachmentToEditor(e)}addFiles(e){e&&e.length>0&&Array.from(e).forEach(e=>{this.sendFile(e)})}sendFile(e){const t=new FormData,i=new XMLHttpRequest;e.tempId=(new Date).getTime();let o,n=/^image\//.test(e.type);"image/tiff"===e.type&&(n=!1),this.isEditorEnabled?o=this.editor.getSelection(!0):(this.edit(),o={index:this.editor.getLength(),length:0}),o&&(n?(this.editor.insertEmbed(o.index,"image",{src:URL.createObjectURL(e),id:0,tempId:e.tempId},y.b.sources.API),this.editor.setSelection(o.index+1,y.b.sources.API)):(this.editor.updateContents((new y.a).retain(o.index).insert({attachment:e}).insert("\n"),P.i.USER),this.editor.setSelection(o.index+2,y.b.sources.API))),i.addEventListener("readystatechange",()=>{if(i.readyState===XMLHttpRequest.DONE&&200===i.status)try{const t=this.getBlobByTempId(e.tempId);if(t){this.editor.history.lastRecorded=Date.now();const e=JSON.parse(i.responseText);if("webm"===e.extension){const i=t.offset(this.editor.scroll),o=Object(I.i)(e.url,!0,!0);this.editor.updateContents((new y.a).retain(i).delete(1).insert({frame:o},{"data-size":"large"})),this.editor.setSelection(i+1,y.b.sources.API)}else t.format("data-progress",null),t.format("data-temp-id",null),t.format("data-id",e.id),t.format("src",e.url);this.isEditorEnabled||(this.editor.enable(),this.editor.update(),this.editor.disable()),this.onFileAdded.emit(e)}}catch(t){this.onFileError.emit(t)}},!1),i.upload.addEventListener("error",t=>{const i=this.getBlobByTempId(e.tempId);i&&i.remove(),this.onFileError.emit(t)},!1),i.upload.addEventListener("progress",t=>{const i=Math.round(t.loaded/t.total*100),o=this.getBlobByTempId(e.tempId);o&&(o.format("data-progress",i),this.editor.history.lastRecorded=Date.now())},!1),t.append("attachment",e,e.name),t.append("type",this.uploadType),t.append("parent",this.uploadParent),t.append("permanent",7===parseInt(this.uploadType,10)?"false":"true"),n&&t.append("hidden","true"),i.open("POST",k.a.attachmentUrl+"/attachment",!0),i.setRequestHeader("Authorization","Bearer "+Object(ie.b)()),i.setRequestHeader("sessionId",this.httpSession.getSessionId()),i.setRequestHeader("ngsw-bypass","true"),i.send(t),this.onFileStarted.emit(e)}getBlobByTempId(e){const t=this.editor&&this.editor.root.querySelector(`[data-temp-id="${e}"]`);if(t)return y.b.find(t)}getLastSavedDate(){const e=this.durationPipe.transform(this.task$.value.date_updated);return"Just now"===e?"now":e}formatLinks(){this.taskMentionService.updateMentions()}showEditingAlert(){this.modalService.open({blank:!0,modifier:"task-sc__modal",content:this.taskEditing,preventExternalClick:!0,cannotClose:!0})}closeEditingAlert(){this.modalService.close()}getEditor(){return this.editor}getEditorContainer(){return this.wrapper.nativeElement}restoreContent(e){e&&(this.setInitContent(e.content,!1,!1,!0),this.taskMentionService.updateMentions(),this.save(this.entityId),this.onUpdate.emit())}print(){!function(e){document.body.classList.add("printing");const t=document.createElement("div");t.classList.add("print-area"),t.classList.add("ql-editor"),document.body.insertBefore(t,document.body.firstChild),t.innerHTML=e,setTimeout(()=>{window.print()},0),K.a.pipe(Object(W.a)(1)).subscribe(()=>{document.body.classList.remove("printing");const e=document.getElementsByClassName("print-area");for(;e.length>0;)e[0].remove()})}(this.canEdit?this.editorContainer.nativeElement.querySelector(".ql-editor").innerHTML:this.readonlyContainer.nativeElement.innerHTML)}uploadFiles(e){this.fileInput.nativeElement.files.length>0&&this.sendFile(this.fileInput.nativeElement.files[0]),this.fileInput.nativeElement.value=null}openTaskDescriptionHistory(){this.taskDescriptionHistory.open()}markForCheck(){this.changeDetector.markForCheck()}docPageChanged(e){return!!(e&&e.currentValue&&e.previousValue&&e.currentValue!==e.previousValue)}isBlankContent(e){return'{"ops":[{"insert":"\\n"}]}'===e||'{"ops":[{"insert":"\\n\\n"}]}'===e||null===e}docDestroyedWithoutSave(e){const t=e||this.cleanDelta(this.linkifyText(this.editor.getContents()));this.onDocDestroyWithoutSave.emit({delta:t,pageId:this.entityId}),this.hasNotSavedData=!1}importContent(e,t){if(!e)return;const i=this.editor.getLength();switch(t){case te.a.Markdown:try{const t=Object(Y.b)(e),o=new y.a(t),[n]=this.editor.getLine(i-1),s=n.formats();this.editor.updateContents((new y.a).retain(i-1).insert("\n",s).concat(o).delete(1).insert("\n"),P.i.USER),this.editor.setSelection(i+o.length(),P.i.SILENT)}catch(o){}break;case te.a.Html:try{this.editor.clipboard.dangerouslyPasteHTML(i,e,P.i.USER)}catch(o){}}}addMentionToEditor(e){this.editor.focus(),this.mentionsModule.insertMention(e.type,e.data)}hideMentions(){this.mentionsModule.disable()}createComment(e){this.commentsModule&&this.commentsModule.createComment(e)}cleanCommentId(e){this.commentsModule&&this.commentsModule.cleanCommentId(e)}resolveCommentId(e,t){this.commentsModule&&this.commentsModule.resolveCommentId(e,t)}handleHover(e){this.hoverModule&&this.hoverModule.shownData&&this.hoverModule.onHover(this.hoverModule.shownData,e)}hideHover(){this.hoverModule&&this.hoverModule.shownData&&this.hoverModule.hidePopup()}getCommentsMap(){return this.editor?Object(ce.g)(this.editor.getContents()):{}}goToComment(e){if(!this.editor)return;const t=Object(ce.a)(this.editorContainer.nativeElement,e);if(t){const i=t.offset(this.editor.scroll);this.editor.setSelection(i),t.domNode.scrollIntoView({block:"center"}),this.editor.focus();const o=he.a.formats(t.domNode);o&&o.unresolvedIds&&o.unresolvedIds.includes(e)||this.onScrollToResolvedComment.emit(e)}}clickCommentsBadge(e,t){this.commentsModule&&this.commentsModule.commentBadgeClick(e,t.target)}getWordsCount(){let e;return this.editor?e=this.editor.getText().trim():this.content&&(e=new y.a("object"==typeof this.content?this.content:JSON.parse(this.content)).filter(e=>"string"==typeof e.insert).map(e=>e.insert).join("")),e&&(e.length>0?e.split(/\s+/).length:0)}calcCommentBadges(){if(this.allowComments&&this.editor){const e=Object(ce.d)(this.editor.root);this.commentBadges$.next(e)}}hasFocus(){return this.editor&&this.editor.hasFocus()}focus(){var e;return null===(e=this.editor)||void 0===e?void 0:e.focus()}togglePinnedToolbar(e){this.pinnedToolbar=e,this.localStorage.set(`${Yi}_${this.pinToolbarKey}`,e),this.editor&&this.editor.focus(),this.onTogglePinnedToolbar.emit(e)}updateButton(e){this.buttonOptionsDropdown&&this.buttonOptionsDropdown.close(),this.selectedButton&&this.selectedButton.blot&&this.selectedButton.blot.replaceWith("button",e),this.selectedButton=null}toolbarAction(e){if(this.editor){this.editor.focus();const t=this.editor.getModule("toolbar").handlers;t[e.format]&&t[e.format].call(this,e.value)}}appendDelta(e){if(!this.editor)return;if(this.edit(),!e)return;const t=new y.a(e.ops.map(e=>e.insert&&e.insert.attachment&&Object(pe.m)(e.insert.attachment.extension||e.insert.attachment.type)?{insert:{image:{src:e.insert.attachment.url,id:e.insert.attachment.id}},attributes:e.attributes}:e));this.editor.updateContents((new y.a).retain(this.editor.getLength()).insert({divider:!0}).concat(t),P.i.USER),this.editor.setSelection(this.editor.getLength())}addDocToEditor(e){const t=this.editor.getSelection(!0);if(t){const i=t.index;this.editor.updateContents((new y.a).retain(i).insert({doc_embed:e}),y.b.sources.USER),this.editor.setSelection(i+2,y.b.sources.API)}}scrollToLinkBlock(e=!0){const t=this.linkToBlockId$.getValue();if(t){const i=this.editorContainer.nativeElement.querySelector(`[data-block-id="${t}"]`);if(i){const t=y.b.find(i,!0);if(!t)return;const o=[],n=T.a.getDraggableRootBlot(t,null);o.push(n),"list"===t.statics.blotName&&t.getListItemChildren().forEach(e=>{o.push(e)}),this.editor.setSelection(null),e&&this.linkToBlockId$.next(""),this.zone.runOutsideAngular(()=>{setTimeout(()=>{o.forEach(e=>{e.domNode.classList.add("ql-block-highlight")}),n.domNode.scrollIntoView({block:"center"})},200)})}}}cancelHighlightedBlockForReadOnlyContainer(){if(!this.readonlyContainer)return;const e=Array.from(this.readonlyContainer.nativeElement.querySelectorAll(".ql-block-highlight"));for(const t of e)t.classList.remove("ql-block-highlight")}handleClickLinkForReadOnlyContainer(){if(!this.readonlyContainer)return;const e=Array.from(this.readonlyContainer.nativeElement.querySelectorAll("a")),t=e=>{let t=e;for(;t;){if("TABLE"===t.tagName.toUpperCase())return t;t=t!==this.readonlyContainer.nativeElement&&t.parentNode?t.parentNode:null}return t};for(const i of e)this.handledLinksMemo.indexOf(i)<0&&(Object(l.a)(i,"click").pipe(Object(u.a)(this.destroy$)).subscribe(e=>{const o=i.href;if(this.cancelHighlightedBlockForReadOnlyContainer(),Object(I.v)(o)){const i=Object(I.r)(o),n=this.readonlyContainer.nativeElement.querySelector(`[data-block-id="${i}"]`);if(n){const e=t(n)||n;e.classList.add("ql-block-highlight"),e.scrollIntoView({block:"center"})}else window.open(o,"_blank");e.preventDefault(),e.stopPropagation()}}),this.handledLinksMemo.push(i))}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.H),n.Wb(n.m),n.Wb(ve.a),n.Wb(ke.a),n.Wb(ye.a),n.Wb(we.a),n.Wb(n.B),n.Wb(X.Store),n.Wb(xe.a),n.Wb(n.h),n.Wb(Ie.a),n.Wb(Te.a),n.Wb(Ce.a),n.Wb(De.a),n.Wb(Oe.c),n.Wb(Se.a),n.Wb(n.t),n.Wb(Ee.b),n.Wb(Pe.a),n.Wb(je.a),n.Wb(Ae.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-editor"]],viewQuery:function(e,t){if(1&e&&(n.jd(Gt,3),n.jd(Vt,3),n.jd(Bt,1),n.jd(Xt,1),n.jd(Ht,1),n.jd(Wt,1),n.jd(Kt,3),n.jd(Qt,3,n.m),n.jd(Zt,1,n.m),n.jd(Yt,3),n.jd(Jt,3),n.jd(ei,1),n.jd(ti,3),n.jd(ii,1),n.jd(oi,3),n.jd(ni,1),n.jd(si,3,n.U),n.jd(ci,1),n.jd(ai,1),n.jd(ri,1),n.jd(li,3),n.jd(di,3)),2&e){let e;n.Qc(e=n.rc())&&(t.wrapper=e.first),n.Qc(e=n.rc())&&(t.editorContainer=e.first),n.Qc(e=n.rc())&&(t.readonlyContainer=e.first),n.Qc(e=n.rc())&&(t.taskPopupDropdown=e.first),n.Qc(e=n.rc())&&(t.createTaskDropdown=e.first),n.Qc(e=n.rc())&&(t.buttonOptionsDropdown=e.first),n.Qc(e=n.rc())&&(t.commentContainer=e.first),n.Qc(e=n.rc())&&(t.toolbar=e.first),n.Qc(e=n.rc())&&(t.toolbar2=e.first),n.Qc(e=n.rc())&&(t.taskMention=e.first),n.Qc(e=n.rc())&&(t.taskEditing=e.first),n.Qc(e=n.rc())&&(t.pop=e.first),n.Qc(e=n.rc())&&(t.fileInput=e.first),n.Qc(e=n.rc())&&(t.taskDescriptionHistory=e.first),n.Qc(e=n.rc())&&(t.slashCommandTemplate=e.first),n.Qc(e=n.rc())&&(t.slashCommand=e.first),n.Qc(e=n.rc())&&(t.slashCommandContainer=e.first),n.Qc(e=n.rc())&&(t.emojiDropdown=e.first),n.Qc(e=n.rc())&&(t.mentionSelector=e.first),n.Qc(e=n.rc())&&(t.mentionSelectorDropdown=e.first),n.Qc(e=n.rc())&&(t.unfurlUrlDropdown=e.first),n.Qc(e=n.rc())&&(t.blockHandleDropdown=e.first)}},hostAttrs:[1,"cu-task-editor"],inputs:{editorId:"editorId",editorToken:"editorToken",content:"content",enableOnStart:"enableOnStart",hideChecklist:"hideChecklist",hideToggleList:"hideToggleList",forGoals:"forGoals",taskAccess:"taskAccess",viewId:"viewId",forCreateTask:"forCreateTask",alwaysEnabled:"alwaysEnabled",modifier:"modifier",emitContentImmediately:"emitContentImmediately",disablePasteImage:"disablePasteImage",disableTaskMentionShortcut:"disableTaskMentionShortcut",slashCommandSupport:"slashCommandSupport",slashCommandCustom:"slashCommandCustom",isSaved:"isSaved",hideUnfurl:"hideUnfurl",hideBlockHandle:"hideBlockHandle",isError:"isError",userEditing:"userEditing",overview:"overview",alwaysShowAll:"alwaysShowAll",isShowHistory:"isShowHistory",isShowFullScreen:"isShowFullScreen",isFullScreen:"isFullScreen",canEdit:"canEdit",project:"project",uploadType:"uploadType",uploadParent:"uploadParent",showConvert:"showConvert",collapseOnClickOutside:"collapseOnClickOutside",historyItems:"historyItems",entityId:"entityId",customTaskIdPath:"customTaskIdPath",scrollContainer:"scrollContainer",debounceTime:"debounceTime",autoEmbedFrame:"autoEmbedFrame",allowGoogleLinkEmbedding:"allowGoogleLinkEmbedding",defaultEmbedSize:"defaultEmbedSize",docHistoryLoading:"docHistoryLoading",staticToolbar:"staticToolbar",autoFocus:"autoFocus",placeholder:"placeholder",disableOffline:"disableOffline",users:"users",showCursor:"showCursor",allowComments:"allowComments",allowCreateTask:"allowCreateTask",allowCreateSubtask:"allowCreateSubtask",popupInBody:"popupInBody",commentsTemplate:"commentsTemplate",enableUserMentions:"enableUserMentions",enableUserMentionsNotif:"enableUserMentionsNotif",allowDropArea:"allowDropArea",listenForShiftTab:"listenForShiftTab",scrollToCommentId:"scrollToCommentId",allowPinToolbar:"allowPinToolbar",pinToolbarKey:"pinToolbarKey",pinToolbarByDefault:"pinToolbarByDefault",toolbarContainer:"toolbarContainer",stickyTopPX:"stickyTopPX",defaultCategory:"defaultCategory",defaultSubcategory:"defaultSubcategory",weights:"weights",allowButtonFormat:"allowButtonFormat",allowTableContentFormat:"allowTableContentFormat",taskUserGroups:"taskUserGroups",showViewingUsers:"showViewingUsers",removeInvalidForEmail:"removeInvalidForEmail",userGroups:"userGroups",attachmentType:"attachmentType",showListOfTasks:"showListOfTasks",originalCommands:"originalCommands",linkToBlockId:"linkToBlockId",allowEditorCopyLink:"allowEditorCopyLink",customBlockHandleDropdown:"customBlockHandleDropdown",customBlockHandleDropdownContainer:"customBlockHandleDropdownContainer"},outputs:{onChange:"onChange",onCancel:"onCancel",onUpdate:"onUpdate",onSave:"onSave",onFileAdded:"onFileAdded",onFileError:"onFileError",onFileStarted:"onFileStarted",toggleFullscreen:"toggleFullscreen",toggleConvert:"toggleConvert",onLoadHistory:"onLoadHistory",onUpdateContent:"onUpdateContent",onDocDestroyWithoutSave:"onDocDestroyWithoutSave",onUndoAuto:"onUndoAuto",qlHeaderFormatClicked:"qlHeaderFormatClicked",onDocLinkClicked:"onDocLinkClicked",onShiftTab:"onShiftTab",onTaskCreated:"onTaskCreated",onScrollToResolvedComment:"onScrollToResolvedComment",onTogglePinnedToolbar:"onTogglePinnedToolbar",onScrollToComment:"onScrollToComment",onLinkToBlock:"onLinkToBlock",onBlockHandleDropdownChange:"onBlockHandleDropdownChange"},features:[n.Gb],decls:65,vars:85,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m;return e=$localize`:@@cu-task-editor__see-more␟2c6fdf50f1011bb6009fa9ac50c32d33fbcaa0fd␟390623905840563145: SEE MORE `,t=$localize`:@@cu-task-editor__see-less␟e5bbca41252876475db3a2ac83c14a93c3d2d031␟1223063952365401601: SEE LESS `,i=$localize`:@@cu-task-editor__user-editing␟99776f60575784b1118ac89fb8a9dd9b47b7f3dc␟5617653260848197915:${"\ufffd0\ufffd"}:INTERPOLATION: is editing...`,o=$localize`:@@cu-task-editor__last-saved-date␟eb3ac9f2956733e1ab3d340d715e36d7bb8c9b05␟5272699333075521593: Saved ${"\ufffd0\ufffd"}:INTERPOLATION: `,n=$localize`:@@common_not-saved␟0e789683fc97a48d1b36388c1d6033b39917ff61␟3872224835102318558: Not saved. `,s=$localize`:@@cu-task-editor__tooltip-msg_print-description␟59c6e8ddda70f8e95115ea857ef44587d6dca51d␟4672363345644030299:Print Description`,c=$localize`:@@common_history␟efac3af0b32e953279c25b6519cae256811e0fe8␟186236568870281953:History`,a=$localize`:@@common_convert-to-task␟8353d528edde47c085a4fcfeefc2c7ac4a6c06d1␟4059907482689704268:Convert to task`,r=$localize`:@@common_print␟d50f1f87cb2a0aaa2c339dbcb2ea7885ba0bda70␟998105467603714668: Print `,l=$localize`:@@cu-task-editor__form-placeholder_attach-files␟301668adbdd1393fcbb4f8c79eecab81efa5b084␟1736103489937088149: Attach files `,d=$localize`:@@cu-task-editor__warning-msg_multiple-editors␟d25ed0edd63f41d02aa77ca352f9749caeb9d79e␟3685449025080745426:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT: is editing this description. You can continue but multiple people editing at the same time may cause issues. `,u=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,m=$localize`:@@common_continue␟d8be89df0f7689e784ded095554331510617728c␟4353178234326355236: Continue `,[["cuDropArea","",3,"ngClass"],["wrapper",""],[3,"isStatic","isSticky","allowComments","showListOfTasks","allowCreateTask","allowCreateSubtask","allowButtonFormat","hideChecklist","hideToggleList","allowTableContentFormat","createTaskDisabled","createCommentDisabled","isPinned","allowPin","inTable","activeFormats","qlHeaderFormatClicked","onTogglePinned","onAction"],["toolbar",""],[3,"isStatic","isSticky","hideChecklist","hideToggleList","showListOfTasks","allowComments","allowCreateTask","allowCreateSubtask","allowButtonFormat","allowTableContentFormat","createTaskDisabled","createCommentDisabled","isPinned","isHidden","allowPin","stickyTopPX","disabled","inTable","activeFormats","qlHeaderFormatClicked","onTogglePinned","onAction",4,"ngIf"],[1,"cu-editor-content"],[3,"users","weights","showNotif","taskUserGroups","userGroups","onSelect",4,"ngIf"],[1,"cu-ql-dropdown","cu-task-editor__comments"],["commentContainer",""],[4,"ngIf"],[3,"hidden"],["unfurlUrlDropdown",""],[3,"menu","handleCommit","handleSelect"],["blockHanleDropdown",""],[1,"notranslate","cu-editor",3,"hidden","click","clickOutside"],["editorContainer",""],["class","cu-editor ql-container ql-snow",4,"ngIf"],[1,"ql-ignore","cu-task-editor__comment-badges"],["class","cu-task-editor__comment-badges-item",3,"top","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","task-description__show-more",3,"click",4,"ngIf"],["class","task-description__show-more task-description__show-more_less",3,"click",4,"ngIf"],["class","cu-editor-editing",3,"ngClass",4,"ngIf"],["class","cu-task-editor__viewing",3,"usersViewing",4,"ngIf"],[1,"cu-editor-footer-info","cu-hidden-print",3,"ngClass"],[1,"cu-editor-footer-info-column"],["class","cu-editor-saved",3,"ngClass",4,"ngIf"],["class","cu-editor-not-saved",3,"ngClass",4,"ngIf"],["class","cu-editor-footer-info-column",4,"ngIf"],[2,"display","none"],["type","file",3,"change"],["fileInput",""],["class","cu-task-editor__dropzone","cuDropArea","",3,"ondrop","dragover",4,"ngIf"],[3,"defaultProjectId","taskId","onSelect","onDismiss","onOpen","onClose"],["taskMention",""],[3,"fromRect","onSelect"],["emojiDropdown",""],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownFromRect","dropdownRightEdgePadding","dropdownPlacement"],["taskPopupDropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownFromRect","dropdownRightEdgePadding","dropdownPlacement","dropdownClose"],["createTaskDropdown","dropdown"],["class","cu-dropdown__menu_overflow-hidden cu-task-editor__create-task",4,"cuDropdownMenu"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownHostElement","dropdownRightEdgePadding","dropdownPlacement"],["buttonOptionsDropdown","dropdown"],[3,"users","weights","showNotif","fromRect","taskUserGroups","userGroups","onSelect","dropdownClose",4,"ngIf"],["taskEditing",""],["slashCommandTemplate",""],["taskPopupTemplate",""],["createTaskTemplate",""],["slashCommandContainer",""],[3,"isStatic","isSticky","hideChecklist","hideToggleList","showListOfTasks","allowComments","allowCreateTask","allowCreateSubtask","allowButtonFormat","allowTableContentFormat","createTaskDisabled","createCommentDisabled","isPinned","isHidden","allowPin","stickyTopPX","disabled","inTable","activeFormats","qlHeaderFormatClicked","onTogglePinned","onAction"],["toolbar2",""],[3,"users","weights","showNotif","taskUserGroups","userGroups","onSelect"],["mentionSelector",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-editor","ql-container","ql-snow"],[1,"ql-editor","ql-editor-readonly",3,"innerHtml","click","clickOutside"],["readonlyContainer",""],[1,"cu-task-editor__comment-badges-item",3,"click"],[1,"cu-task-editor__comment-badges-icon",3,"icon"],["class","cu-task-editor__comment-badges-count",4,"ngIf"],[1,"cu-task-editor__comment-badges-count"],[1,"task-description__show-more",3,"click"],[1,"task-description__show-more-btn"],["icon","cu2-angle-right",1,"task-description__show-more-icon"],[1,"task-description__show-more-text"],e,[1,"task-description__show-more","task-description__show-more_less",3,"click"],[1,"task-description__show-more-btn","task-description__show-more-btn_less"],["icon","cu2-angle-right",1,"task-description__show-more-icon","task-description__show-more-icon_less"],[1,"task-description__show-more-text","task-description__show-more-text_less"],t,[1,"cu-editor-editing",3,"ngClass"],["icon","edit-simple",1,"cu-editor-editing__icon"],i,[1,"cu-task-editor__viewing",3,"usersViewing"],[1,"cu-editor-saved",3,"ngClass"],["icon","save",1,"cu-editor-saved__icon"],["class","cu-editor-saved__text",4,"ngIf"],[1,"cu-editor-saved__text"],o,[1,"cu-editor-not-saved",3,"ngClass"],["icon","warning-thin",1,"cu-editor-not-saved__icon"],[1,"cu-editor-not-saved__text"],n,["class","cu-editor-print","icon","print","cuTooltip",s,3,"click",4,"ngIf"],["cuTooltip",c,3,"canEdit","items","docHistoryLoading","onRestore","onLoadHistory",4,"ngIf"],["class","cu-editor-fullscreen",3,"cuTooltip","ngClass","click",4,"ngIf"],["class","cu-editor__add","cuTooltip",a,3,"click",4,"ngIf"],["icon","print","cuTooltip",s,1,"cu-editor-print",3,"click"],r,["cuTooltip",c,3,"canEdit","items","docHistoryLoading","onRestore","onLoadHistory"],["taskDescriptionHistory",""],[1,"cu-editor-fullscreen",3,"cuTooltip","ngClass","click"],[3,"icon"],["cuTooltip",a,1,"cu-editor__add",3,"click"],["viewBox","0 0 30 28","xmlns","http://www.w3.org/2000/svg"],["fill-rule","nonzero","fill","none"],["d","M14.5 0v28M15.5 0v28"],["d","M1.48 14.5h27.04M1.48 13.5h27.04","stroke-linecap","square"],["cuDropArea","",1,"cu-task-editor__dropzone",3,"ondrop","dragover"],[1,"cu-task-editor__dropzone-column"],[1,"cu-task-editor__dropzone-content"],["icon","chevron-top",1,"cu-task-editor__dropzone-icon"],[1,"cu-task-editor__dropzone-text"],l,[3,"ngTemplateOutlet"],[1,"cu-dropdown__menu_overflow-hidden","cu-task-editor__create-task"],[3,"submitText","options","onChange","onSubmit"],[3,"users","weights","showNotif","fromRect","taskUserGroups","userGroups","onSelect","dropdownClose"],["mentionSelectorDropdown",""],[1,"task-sc__inner"],[1,"task-sc__title"],d,[1,"task-sc__options"],[1,"cu-btn","cu-btn_status","cu-btn_option","cu-btn_cancel",3,"click"],u,[1,"cu-btn","cu-btn_status","cu-btn_option",3,"click"],m,[3,"alwaysVisible","dropdownPlacement","originalCommands","allowedCommands","allowTurnIntoCommands","team","weights","currentValues","options","userGroups","applyCommand","cancelCommand"],["slashCommand",""],[3,"taskId","onRemove","onEnter","onLeave",4,"ngIf"],[3,"taskId","onRemove","onEnter","onLeave"],["slashCommandsPlacement","bottom","slashCommandsContainer","",3,"isRow","isAlwaysActive","autoClose","isHidden","margin","saveOnDestroy","hideDirectionSelector","dontCancel","defaultData","alwaysDisplayLocation","buttonText","showTags","showStartDate","showDueDate","project","list","onBeforeCreate","taskCreate","close",4,"ngIf"],["slashCommandsPlacement","bottom","slashCommandsContainer","",3,"isRow","isAlwaysActive","autoClose","isHidden","margin","saveOnDestroy","hideDirectionSelector","dontCancel","defaultData","alwaysDisplayLocation","buttonText","showTags","showStartDate","showDueDate","project","list","onBeforeCreate","taskCreate","close"]]},template:function(e,t){if(1&e&&(n.cc(0,"div",0,1),n.cc(2,"cu-rich-editor-toolbar",2,3),n.qc("qlHeaderFormatClicked",function(){return t.qlHeaderFormatClicked.emit()})("onTogglePinned",function(e){return t.togglePinnedToolbar(e)})("onAction",function(e){return t.toolbarAction(e)}),n.bc(),n.bd(4,ui,2,19,"cu-rich-editor-toolbar",4),n.cc(5,"div",5),n.bd(6,mi,2,5,"cu-mention-selector-container",6),n.cc(7,"div",7,8),n.bd(9,fi,1,5,void 0,9),n.bc(),n.cc(10,"div",10,11),n.Xb(12,"cu-unfurl-url-menu",12),n.bc(),n.cc(13,"div",10,13),n.Xb(15,"cu-block-handle-menu",12),n.bc(),n.cc(16,"div",14,15),n.qc("click",function(e){return t.edit(e)})("clickOutside",function(){return t.collapseAll()}),n.bc(),n.bd(18,bi,4,6,"div",16),n.cc(19,"div",17),n.bd(20,_i,3,4,"div",18),n.vc(21,"async"),n.bc(),n.bc(),n.bd(22,vi,5,0,"div",19),n.bd(23,ki,5,0,"div",20),n.bd(24,wi,5,6,"div",21),n.bd(25,xi,1,1,"cu-comment-users",22),n.cc(26,"div",23),n.cc(27,"div",24),n.bd(28,Ci,5,8,"div",25),n.vc(29,"async"),n.bd(30,Di,4,3,"div",26),n.vc(31,"async"),n.bc(),n.bd(32,Ai,5,4,"div",27),n.bc(),n.cc(33,"div",28),n.cc(34,"input",29,30),n.qc("change",function(e){return t.uploadFiles(e)}),n.bc(),n.bc(),n.bd(36,$i,6,0,"div",31),n.bc(),n.cc(37,"cu-task-mention",32,33),n.qc("onSelect",function(e){return t.addTaskMentionToEditor(e)})("onDismiss",function(){return t.dismissTaskMention()})("onOpen",function(){return t.openTaskMention()})("onClose",function(){return t.closeTaskMention()}),n.vc(39,"async"),n.bc(),n.cc(40,"cu-emoji-list-dropdown",34,35),n.qc("onSelect",function(e){return t.addEmojiToEditor(e)}),n.bc(),n.cc(42,"div",36,37),n.Xb(44,"div",38),n.bd(45,Ri,2,1,"div",39),n.bc(),n.cc(46,"div",40,41),n.qc("dropdownClose",function(){return t.hideCreateTask()}),n.Xb(48,"div",38),n.bd(49,Fi,2,1,"div",42),n.bc(),n.cc(50,"div",43,44),n.Xb(52,"div",38),n.bd(53,Li,2,2,"div",39),n.bc(),n.bd(54,Ni,2,6,"cu-mention-selector-dropdown",45),n.bd(55,zi,10,3,"ng-template",null,46,n.cd),n.bd(57,Gi,3,14,"ng-template",null,47,n.cd),n.bd(59,Bi,1,1,"ng-template",null,48,n.cd),n.bd(61,Wi,2,2,"ng-template",null,49,n.cd),n.Yb(63,null,50)),2&e){let e=null;n.Mb("cu-editor-wrapper ",t.modifier,""),n.Dc("ngClass",n.Kc(75,Ki,t.isEditorEnabled||t.alwaysEnabled,t.isShowAll||t.alwaysShowAll,!!t.userEditing,t.canEdit)),n.Ib(2),n.Dc("isStatic",t.staticToolbar)("isSticky",!1)("allowComments",t.allowComments)("showListOfTasks",t.showListOfTasks)("allowCreateTask",t.allowCreateTask)("allowCreateSubtask",t.allowCreateSubtask)("allowButtonFormat",t.allowButtonFormat)("hideChecklist",t.hideChecklist)("hideToggleList",t.hideToggleList)("allowTableContentFormat",t.allowTableContentFormat)("createTaskDisabled",!t.createTaskAllowed)("createCommentDisabled",!t.createCommentAllowed)("isPinned",t.pinnedToolbar)("allowPin",t.allowPinToolbar&&!t.staticToolbar)("inTable",t.inTable)("activeFormats",t.activeFormats),n.Ib(2),n.Dc("ngIf",t.allowPinToolbar&&!t.staticToolbar),n.Ib(2),n.Dc("ngIf",!t.popupInBody),n.Ib(3),n.Dc("ngIf",t.commentData),n.Ib(1),n.Ob("cu-hidden",t.hideUnfurl),n.Dc("hidden",!t.canEdit),n.Ib(2),n.Dc("menu",t.unfurlUrlMenuData)("handleCommit",t.unfurlUrlonCommit)("handleSelect",t.unfurlUrlonSelect),n.Ib(1),n.Ob("cu-hidden",t.hideBlockHandle),n.Dc("hidden",!t.canEdit||t.customBlockHandleDropdown),n.Ib(2),n.Dc("menu",t.blockHandleMenuData)("handleCommit",t.blockHandleCommit)("handleSelect",t.blockHandleSelect),n.Ib(1),n.Dc("hidden",!t.canEdit),n.Ib(2),n.Dc("ngIf",!t.canEdit),n.Ib(2),n.Dc("ngForOf",n.wc(21,67,t.commentBadges$))("ngForTrackBy",t.trackById),n.Ib(2),n.Dc("ngIf",!t.isShowAll&&!t.alwaysShowAll&&t.showMoreLinkVisible&&!t.isFullScreen),n.Ib(1),n.Dc("ngIf",t.isShowAll&&!t.alwaysShowAll&&t.showLessLinkVisible&&!t.forCreateTask&&!t.isFullScreen),n.Ib(1),n.Dc("ngIf",t.userEditing),n.Ib(1),n.Dc("ngIf",t.showViewingUsers),n.Ib(1),n.Dc("ngClass",n.Hc(80,Qi,t.isFullScreen)),n.Ib(2),n.Dc("ngIf",n.wc(29,69,t.task$)&&t.isSaved&&!t.isError),n.Ib(2),n.Dc("ngIf",n.wc(31,71,t.task$)&&t.isError),n.Ib(2),n.Dc("ngIf",!t.forGoals&&!t.forCreateTask),n.Ib(4),n.Dc("ngIf",t.canEdit&&t.allowDropArea),n.Ib(1),n.Dc("defaultProjectId",null==t.project?null:t.project.id)("taskId",null==(e=n.wc(39,73,t.task$))?null:e.id),n.Ib(3),n.Dc("fromRect",t.emojiRect),n.Ib(2),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!1)("dropdownFromRect",t.hoverRect)("dropdownRightEdgePadding",10)("dropdownPlacement",n.Gc(82,Zi)),n.Ib(4),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!0)("dropdownFromRect",t.createTaskRect)("dropdownRightEdgePadding",10)("dropdownPlacement",n.Gc(83,Zi)),n.Ib(4),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!0)("dropdownHostElement",null==t.selectedButton?null:t.selectedButton.element)("dropdownRightEdgePadding",10)("dropdownPlacement",n.Gc(84,Zi)),n.Ib(4),n.Dc("ngIf",t.popupInBody)}},directives:[$e.a,Ue.o,ct,Ue.q,at.a,rt.a,lt.a,Ue.p,dt.a,ut.a,Fe.b,Le.a,ze.a,mt.a,Ue.x,Ne.a,pt.a,Me.a,Ut,Rt.a,Mt.a,Ft.b,Lt.a,Nt.a,ft.a],pipes:[Ue.b,zt.a,qt.a,ke.a],styles:['.cu-task-editor{width:100%}.cu-task-editor__viewing{bottom:60px;margin-left:10px;position:fixed}.cu-modal_doc .cu-task-editor__viewing{bottom:20px;margin-left:0}.cu-task-editor-info{margin:10px 0 0;display:flex;align-items:center}.cu-task-editor-info__text{font:13px Gotham Pro,Proxima Nova,arial,serif;color:rgba(52,52,52,.4);white-space:nowrap}.dark-theme .cu-task-editor-info__text{color:rgba(130,133,136,.7)}.cu-task-editor__comments{box-shadow:0 1px 10px 0 rgba(0,0,0,.25);border-radius:6px;z-index:1000;min-height:50px;width:450px;max-width:100%;background:#fff}.dark-theme .cu-task-editor__comments{background:#2b343b}.cu-task-editor .cu-editor-content{position:relative;z-index:0}.cu-task-editor__create-task{min-width:250px}.cu-task-editor__comment-badges{transition:max-width .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;right:0;left:0;top:0;width:100%;min-height:0;max-width:850px;margin-left:50%;transform:translateX(-50%)}.cu-dashboard-doc-main__container_full-width .cu-task-editor__comment-badges{max-width:100%}.cu-task-editor__comment-badges-item{position:absolute;cursor:pointer;left:auto;right:20px}.cu-task-editor__comment-badges-item:hover .cu-task-editor__comment-badges-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-editor__comment-badges-item:hover .cu-task-editor__comment-badges-icon{fill:var(--theme-main-color)}}.cu-task-editor__comment-badges-item:hover .cu-task-editor__comment-badges-count{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-editor__comment-badges-item:hover .cu-task-editor__comment-badges-count{color:var(--theme-main-color)}}.cu-task-editor__comment-badges-item:hover .cu-task-editor__comment-badges-count:before{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-editor__comment-badges-item:hover .cu-task-editor__comment-badges-count:before{border-color:var(--theme-main-color)}}.cu-task-editor__comment-badges-icon{width:16px;height:16px;margin-top:10px;fill:#ababab}.cu-task-editor__comment-badges-count{display:flex;align-items:center;justify-content:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:0 2px;min-width:20px;height:20px;border-radius:11px;border:2px solid #fff;font:500 9px/.7 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;position:absolute;top:0;left:8px;background:#fff}.dark-theme .cu-task-editor__comment-badges-count{background:#384047;border-color:#384047;color:#abaeb0}.cu-task-editor__comment-badges-count:before{content:"";display:block;position:absolute;width:100%;height:100%;border:1px solid #7c828d;border-radius:8px}.dark-theme .cu-task-editor__comment-badges-count:before{border-color:#abaeb0}.cu-task-editor__dropzone{display:none;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:0 0 6px 6px;z-index:1000}.cu-task-editor__dropzone-column{display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.8);transition:.1s;position:relative;background:#7b68ee;flex-grow:1}@supports (--theme-main-color:#7b68ee){.cu-task-editor__dropzone-column{background:var(--theme-main-color)}}.cu-task-editor__dropzone-column:before{content:"";display:block;position:absolute;top:60px;left:60px;bottom:60px;right:60px;border:1px dashed #fff;border-radius:4px;transition:.1s}.cu-task-editor__dropzone-content{display:flex;flex-direction:column;justify-content:center;align-items:center}.cu-task-editor__dropzone-content .cu-task-editor__dropzone-icon{height:72px;width:72px;margin:0 0 20px;fill:#fff;transition:.1s}.cu-task-editor__dropzone-content .cu-task-editor__dropzone-text{font:16px Gotham Pro,Proxima Nova,arial,serif;transition:.1s;color:#fff}.cu-task-editor .cu-state-drag-over .cu-task-editor__dropzone{display:flex;animation:fadeIn .1s linear both}','@import "https://cdn1.codox.io/lib/css/wave.client.css";'],encapsulation:2,changeDetection:0}),e})()},TGO3:function(e,t,i){e.exports=i.p+"sprint-points.c1cf4cd9f72142434157.png"},TjP8:function(e,t,i){"use strict";var o="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",n="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.openCloseTag=new RegExp("^(?:"+o+"|"+n+")"),t.tag=new RegExp("^(?:"+o+"|"+n+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},TyyD:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"c",function(){return s}),i.d(t,"b",function(){return c}),i.d(t,"d",function(){return a});var o=i("6qs+");function n(e){return e.type===o.a.SUBCATEGORY&&e.subcategory?e.subcategory.id:e.type===o.a.CATEGORY&&e.category?e.category.id:e.type===o.a.PROJECT&&e.project?e.project.id:e.type===o.a.VIEW&&e.view?e.view.id:e.type===o.a.USER&&e.user?e.user.id:e.type===o.a.DASHBOARD&&e.dashboard?e.dashboard.id:null}function s(e){return e.view?`${e.type}_${e.view.id}`:e.user?`${e.type}_${e.user.id}`:e.dashboard?`${e.type}_${e.dashboard.id}`:`${e.type}_${e.project.id}_${e.category?e.category.id:"null"}_${e.subcategory?e.subcategory.id:"null"}`}function c(e){return e.subcategory?e.subcategory.name:e.category?e.category.name:e.project?e.project.name:e.view?e.view.name:e.user?e.user.username||e.user.email:e.payload&&e.payload.name?e.payload.name:e.dashboard?e.dashboard.name:""}function a(e){return e===o.a.DASHBOARD?1:e===o.a.VIEW?2:e===o.a.PROJECT?3:e===o.a.CATEGORY?4:e===o.a.SUBCATEGORY?5:e===o.a.CUSTOM?6:e===o.a.USER?7:0}},TzhX:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var o=i("pLZG"),n=i("zp1y"),s=i("1G5W"),c=i("XNiG"),a=i("2Vo4"),r=i("itXk"),l=i("nLWA"),d=i("fXoL"),u=i("Ll/8"),m=i("KX9h"),p=i("W//M"),h=i("GwhI"),f=i("ofXK");let b=(()=>{class e{constructor(e){this.timePipe=e,this.destroy$=new c.a,this.forceAssigneeCheck$=new a.a(0),this.assignees$=new a.a([]),this.assigneeData$=new a.a([]),this.timeEstimate$=new a.a(null),this.assigneeTimeEstimateMap$=new a.a(null),this.onTimeEstimateAction=new d.o}ngOnInit(){Object(r.a)([this.assignees$,this.forceAssigneeCheck$]).pipe(Object(o.a)(()=>this.team&&this.team.estimates_per_assignee),Object(n.a)(this.assigneeTimeEstimateMap$,this.timeEstimate$),Object(s.a)(this.destroy$)).subscribe(([[e,t],i,o])=>{let n;o=isNaN(o)?null:o,e&&e.length||(this.assigneeTimeEstimateMap$.next(null),this.assigneeData$.next([]));const s=i&&Object.entries(i).some(([e,t])=>!!t);n=e.map(s?e=>({user:e,time:i[e.id]}):t=>({user:t,time:o?o/e.length:null})),this.assigneeData$.next(n)}),this.assigneeData$.pipe(Object(s.a)(this.destroy$)).subscribe(e=>{let t;e&&e.length||(t=null),t=e.reduce((e,t)=>(e[t.user.id]=t.time,e),{}),this.assigneeTimeEstimateMap$.next(t)}),this.assigneeTimeEstimateMap$.pipe(Object(s.a)(this.destroy$)).subscribe(e=>{const t=e?Object.entries(e).reduce((e,[t,i])=>(i&&(e+=i),e),0):null,i=t?this.timePipe.transform(t,this.team.hours_per_day||l.a,!1,!0,!0):null;this.onTimeEstimateAction.emit({action:l.b.UpdateDraftAssigneeData,draftUpdate:{total:t,assigneeMap:e,estimateString:i}})})}ngOnChanges(e){if(e.assignees){const t=Object(u.e)(e.assignees.currentValue||[],{}),i=Object(u.e)(e.assignees.previousValue||[],{});Object.keys(t).length===Object.keys(i).length&&Object.keys(t).every(e=>i[e])||this.assignees$.next(this.assignees)}e.timeEstimate&&this.timeEstimate$.next(this.timeEstimate)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}forceUpdate(){this.forceAssigneeCheck$.next(this.forceAssigneeCheck$.value+1)}timeEstimateAction(e){if(this.assignees&&this.assignees.length&&this.team&&this.team.estimates_per_assignee){if(e.action===l.b.UpdateTotal){const t=this.assignees.map(t=>({user:t,time:e.estimate.milliseconds?e.estimate.milliseconds/this.assignees.length:null}));this.assigneeData$.next(t)}else if(e.action===l.b.UpdateAssigneeTimeEstimate){const t=(this.assigneeData$.value||[]).map(t=>t.user.id===e.user.id?Object.assign(Object.assign({},t),{time:e.estimate.milliseconds}):t);this.assigneeData$.next(t)}}else this.onTimeEstimateAction.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Wb(m.a))},e.\u0275cmp=d.Qb({type:e,selectors:[["cu-time-estimates-create-task"]],inputs:{timeEstimate:"timeEstimate",team:"team",assignees:"assignees"},outputs:{onTimeEstimateAction:"onTimeEstimateAction"},features:[d.Gb],decls:3,vars:7,consts:[[3,"timeEstimate","team","assignees","onTimeEstimateAction"],[3,"timeEstimate","team","onTimeEstimateAction"]],template:function(e,t){1&e&&(d.cc(0,"cu-time-estimate-dropdown",0),d.qc("onTimeEstimateAction",function(e){return t.timeEstimateAction(e)}),d.vc(1,"async"),d.cc(2,"time-estimates-view",1),d.qc("onTimeEstimateAction",function(e){return t.timeEstimateAction(e)}),d.bc(),d.bc()),2&e&&(d.Dc("timeEstimate",t.timeEstimate)("team",t.team)("assignees",d.wc(1,5,t.assigneeData$)),d.Ib(2),d.Dc("timeEstimate",t.timeEstimate)("team",t.team))},directives:[p.a,h.a],pipes:[f.b],styles:[""],changeDetection:0}),e})()},U4Ha:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("2Vo4"),n=i("fXoL"),s=i("eDEC"),c=i("TqRa"),a=i("l7P3");let r=(()=>{class e{constructor(e){this.store=e,this.onCommentAdd=new n.o,this.onCommentRemove=new n.o,this.onCommentUndo=new n.o,this.onCommentUpdate=new n.o,this.onCommentAssignToggle=new n.o,this.onCommentResolveToggle=new n.o,this.onCommentChange=new n.o,this.onThreadFollowerChange=new n.o,this.onTodoAdd=new n.o,this.onCommentAddFiles=new n.o,this.onCommentEditorAddFiles=new n.o,this.onHighlightComment=new n.o,this.onLastCommentEdit=new n.o,this.onCancelReply=new n.o,this.commentEditorOpen=!1,this.nestedEditorOpen=!1,this._task=new o.a(null),this._project=new o.a(null),this._projectFeatures=new o.a(null),this._categories=new o.a([]),this._statuses=new o.a([]),this._tags=new o.a([])}get task(){return this._task}set task(e){this._task.next(e)}get project(){return this._project}set project(e){this._project.next(e)}get projectFeatures(){return this._projectFeatures}set projectFeatures(e){this._projectFeatures.next(e)}get categories(){return this._categories}set categories(e){this._categories.next(e)}get statuses(){return this._statuses}set statuses(e){this._statuses.next(e)}get tags(){return this._tags}set tags(e){this._tags.next(e)}loadTask(e,t=!1,i=!1){this.store.dispatch(new s.W({taskId:"string"==typeof e?{id:e}:e,convertedToTask:t,updateCodox:i,subscribeToWs:"object"==typeof e&&!e.id&&!c.k,clearTaskCache:"object"==typeof e&&!e.id&&c.k}))}}return e.\u0275fac=function(t){return new(t||e)(n.nc(a.Store))},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},U6jy:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var o=arguments[t];for(var n in o)i.call(o,n)&&(e[n]=o[n])}return e};var i=Object.prototype.hasOwnProperty},"UAD/":function(e,t,i){"use strict";i.d(t,"a",function(){return ae});var o=i("c3rA"),n=i("fXoL"),s=i("l7P3"),c=i("XNiG"),a=i("2Vo4"),r=i("LRne"),l=i("itXk"),d=i("pLZG"),u=i("/uUt"),m=i("vkgz"),p=i("eIep"),h=i("UXun"),f=i("5+tZ"),b=i("IzEk"),g=i("lJxs"),_=i("1G5W"),v=i("SxV6"),k=i("4F4K"),y=i("m2rH"),w=i("lU5h"),x=i("L5Tv"),I=i("xWuZ"),T=i("FC7Q"),C=i("9jGm"),D=i("LrKI"),O=i("wa4x"),S=i("0dWf"),E=i("TqRa"),P=i("2p4s"),j=i("G2WA"),A=i("76Cs"),$=i("drq7"),U=i("ofXK"),R=i("Llk8"),M=i("keUj"),F=i("XaMR"),L=i("SA+E"),N=i("aitn"),z=i("peMq"),q=i("7vmk"),G=i("yECk"),V=i("UdVN"),B=i("NsZK"),X=i("NQa4"),H=i("Dvla"),W=i("BTFG");function K(e,t){if(1&e&&(n.Xb(0,"cu-task-row-breadcrumbs",18),n.vc(1,"async")),2&e){const e=n.uc(3);n.Dc("breadcrumbsItems",n.wc(1,3,e.breadcrumbs$))("inNewTab",!0)("truncate",!0)}}function Q(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-category-list-dropdown",19),n.qc("onSelect",function(t){return n.Uc(e),n.uc(3).moveTask(t)})("onOpen",function(){return n.Uc(e),n.uc(3).setDropdownOpen(!0)})("onClose",function(){return n.Uc(e),n.uc(3).setDropdownOpen(!1)}),n.vc(1,"async"),n.vc(2,"async"),n.vc(3,"async"),n.Xb(4,"div",20),n.bc()}if(2&e){const e=n.uc(3);let t=null,i=null;n.Dc("selectableProject",!0)("defaultProject",n.wc(1,6,e.taskProject$))("selectedCategory",null==(t=n.wc(2,8,e.task$))||null==t.category?null:t.category.id)("selectedSubcategory",null==(i=n.wc(3,10,e.task$))||null==i.subcategory?null:i.subcategory.id)("singleCategory",!1)("displaySearch",!0)}}function Z(e,t){if(1&e&&n.Xb(0,"div",21),2&e){const e=n.uc().ngIf;n.Dc("cuTooltip",null==e||null==e.parent_task?null:e.parent_task.name)}}function Y(e,t){if(1&e&&(n.cc(0,"a",27),n.vc(1,"async"),n.Xb(2,"div",28),n.ac(3),n.gc(4,29),n.Zb(),n.bc()),2&e){const e=n.uc(4);n.Dc("href",n.wc(1,1,e.taskLink$),n.Xc)}}function J(e,t){if(1&e){const e=n.dc();n.cc(0,"div",30),n.qc("click",function(){return n.Uc(e),n.uc(4).onRemove.emit()}),n.Xb(1,"div",31),n.ac(2),n.gc(3,32),n.Zb(),n.bc()}}function ee(e,t){if(1&e){const e=n.dc();n.cc(0,"div",22),n.bd(1,Y,5,3,"a",23),n.cc(2,"a",24),n.qc("cbOnSuccess",function(){return n.Uc(e),n.uc(3).clipboardText="Copied!"}),n.vc(3,"async"),n.Xb(4,"div",25),n.dd(5),n.bc(),n.bd(6,J,4,0,"div",26),n.bc()}if(2&e){const e=n.uc(3);n.Ib(1),n.Dc("ngIf",!e.isElectron),n.Ib(1),n.Dc("cbContent",n.wc(3,4,e.taskLink$)),n.Ib(3),n.fd(" ",e.clipboardText," "),n.Ib(1),n.Dc("ngIf",e.allowRemove)}}const te=function(e){return[e]},ie=function(){return[]};function oe(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",3),n.cc(2,"cu-task-row-status",4),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).changeStatus(t)})("onToggle",function(){return n.Uc(e),n.uc(2).toggleStatus()})("onDropdownOpen",function(){return n.Uc(e),n.uc(2).setDropdownOpen(!0)})("onDropdownClose",function(){return n.Uc(e),n.uc(2).setDropdownOpen(!1)}),n.bc(),n.bd(3,K,2,5,"cu-task-row-breadcrumbs",5),n.bd(4,Q,5,12,"cu-category-list-dropdown",6),n.vc(5,"async"),n.Xb(6,"div",7),n.cc(7,"cu-priority-list-dropdown",8),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).changePriority(t)})("onOpen",function(){return n.Uc(e),n.uc(2).setDropdownOpen(!0)})("onClose",function(){return n.Uc(e),n.uc(2).setDropdownOpen(!1)}),n.Xb(8,"cu-priorities-view",9),n.bc(),n.bc(),n.cc(9,"div",10),n.bd(10,Z,1,1,"div",11),n.cc(11,"div",12),n.cc(12,"cu-editable",13),n.qc("onCancel",function(){return n.Uc(e),n.uc(2).renaming=!1})("onChange",function(t){return n.Uc(e),n.uc(2).changeName(t)}),n.cc(13,"div",14),n.qc("click",function(){return n.Uc(e),n.uc(2).renaming=!0}),n.dd(14),n.bc(),n.bc(),n.bc(),n.cc(15,"cu-user-and-groups-list-dropdown",15),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).changeAssignees(t)})("onUserGroupsChanged",function(t){return n.Uc(e),n.uc(2).changeGroupAssignees(t)})("onOpen",function(){return n.Uc(e),n.uc(2).setDropdownOpen(!0)})("onClose",function(){return n.Uc(e),n.uc(2).setDropdownOpen(!1)}),n.vc(16,"async"),n.vc(17,"async"),n.vc(18,"async"),n.vc(19,"async"),n.Xb(20,"cu-user-group",16),n.bc(),n.bc(),n.bd(21,ee,7,6,"div",17),n.vc(22,"async"),n.Zb()}if(2&e){const e=t.ngIf,i=n.uc(2);let o=null;n.Ib(2),n.Dc("itemClass","cu-task-row-status_badge")("status",null==e?null:e.status)("statuses",null==e?null:e.statuses)("isSimpleStatus",null==e?null:e.simple_statuses)("showSettings",!1)("showText",!0)("colorBackground",!0)("disabled",!(null!=e&&null!=e.permissions&&e.permissions.change_status)),n.Ib(1),n.Dc("ngIf",!i.isSharingApp),n.Ib(1),n.Dc("ngIf",null==(o=n.wc(5,39,i.task$))||null==o.permissions?null:o.permissions.move_task),n.Ib(3),n.Dc("prioritySelected",n.Hc(51,te,e.priority))("disabled",!(null!=e&&null!=e.permissions&&e.permissions.change_priority)),n.Ib(1),n.Dc("priority",e.priority),n.Ib(2),n.Dc("ngIf",null==e?null:e.parent),n.Ib(2),n.Dc("text",e.name)("editing",i.renaming&&(null==e||null==e.permissions?null:e.permissions.change_title)),n.Ib(2),n.ed(e.name),n.Ib(1),n.Dc("users",n.wc(16,41,i.taskUsers$))("multiChoice",null==e?null:e.multiple_assignees)("modifier","cu-dropdown_center cu-dropdown_pointer")("selectedUsers",null==e?null:e.assignees)("selectedUserGroups",null==e?null:e.group_assignees)("showReassign",!0)("enableFirstSelection",!0)("weights",i.weights||n.wc(17,43,i.weights$))("weightType",i.UserWeightType.ASSIGN)("userGroups",n.wc(18,45,i.userGroups$))("disabled",!n.wc(19,47,i.canChangeAssignee$))("task",e)("subcategory",null==e?null:e.subcategory),n.Ib(5),n.Dc("users",(null==e?null:e.assignees)||n.Gc(53,ie))("userGroups",(null==e?null:e.group_assignees)||n.Gc(54,ie))("showUserRemover",!1)("assignIcon",!1)("multiChoice",null==e?null:e.multiple_assignees)("modifier","cu-user-group_sm")("avatarSize",24)("showDropdown",!1),n.Ib(1),n.Dc("ngIf",n.wc(22,49,i.canOpenTasks$))}}function ne(e,t){if(1&e&&(n.ac(0),n.bd(1,oe,23,55,"ng-container",0),n.vc(2,"async"),n.Zb()),2&e){const e=n.uc(),t=n.Rc(2);n.Ib(1),n.Dc("ngIf",n.wc(2,2,e.task$))("ngIfElse",t)}}function se(e,t){1&e&&n.Xb(0,"cu-loader")}function ce(e,t){1&e&&(n.cc(0,"div",33),n.gc(1,34),n.bc())}let ae=(()=>{class e{constructor(e,t,i,_,v,C){this.store=e,this.action$=t,this.sharedTaskService=i,this.taskService=_,this.taskMentionService=v,this.changeDetectorRef=C,this.clipboardText="Copy link",this.isElectron=Object(w.b)(),this.UserWeightType=x.c,this.allowRemove=!0,this.onRemove=new n.o,this.onEnter=new n.o,this.onLeave=new n.o,this.isSharingApp=E.k,this.canOpenTasks$=this.store.select(o.getCanOpenTasks),this.destroy$=new c.a,this.taskId$=new a.a(null),this.task$=this.taskId$.pipe(Object(d.a)(e=>!!e),Object(u.a)(),Object(m.a)(e=>{this.store.dispatch(new y.x(e,null,!1,!0,this.isSharingApp))}),Object(p.a)(e=>this.store.pipe(Object(s.select)(Object(k.d)(e)))),Object(h.a)({refCount:!0,bufferSize:1})),this.taskLink$=this.task$.pipe(Object(d.a)(e=>!!e),Object(f.a)(e=>this.isSharingApp?this.store.select(o.getPublicViewData).pipe(Object(b.a)(1),Object(g.a)(t=>`${P.a.publicShareUrl}/${Object(E.i)({seoOptimised:t.view.seo_optimized,viewId:t.view.id,publicKey:t.view.public_key,task:e,teamId:e.team}).join("/")}`)):Object(r.a)(Object(S.c)(e)))),this.breadcrumbs$=this.task$.pipe(Object(d.a)(e=>!!e),Object(g.a)(e=>Object(D.a)(e))),this.taskMembers$=this.task$.pipe(Object(d.a)(e=>!!e),Object(g.a)(e=>e.members?Object(I.a)(Object.values(e.members)):[])),this.taskUsers$=this.taskMembers$.pipe(Object(g.a)(e=>e.map(e=>e.user))),this.taskProject$=this.task$.pipe(Object(d.a)(e=>!!e),Object(g.a)(e=>e.project||{id:e.project_id,name:e.project_name})),this.user$=this.store.select(o.getUser),this.weights$=this.store.select(o.getUserWeights),this.userGroups$=this.store.select(O.c),this.canChangeAssignee$=Object(l.a)([this.task$,this.user$]).pipe(Object(g.a)(([e,t])=>Object(T.b)(e.permissions,e.permission_level,e.assignees,e.group_assignees,t))),this.hovered=!1,this.dropdownOpened=!1,this.renaming=!1,this.failed=!1}ngOnInit(){this.task$.pipe(Object(d.a)(e=>!!e),Object(_.a)(this.destroy$)).subscribe(e=>{this.taskMentionService.updateTaskMentionsItems([e])}),this.action$.pipe(Object(C.d)(y.q),Object(d.a)(e=>e.id===this.taskId),Object(_.a)(this.destroy$)).subscribe(e=>{this.failed=!0,this.changeDetectorRef.markForCheck()})}ngOnChanges(e){e.taskId&&this.taskId$.next(this.taskId)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}handleNavigate(){this.sharedTaskService.closeTask()}openTask(e){this.task$.pipe(Object(b.a)(1)).subscribe(t=>{this.sharedTaskService.clickTaskLink({id:t.id,customId:t.custom_id,teamId:t.team},e)})}changePriority(e){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>!!e)).subscribe(t=>{this.taskService.setPriorities(t,e).subscribe(e=>{this.reloadTask()}),this.notifyTaskUpdated(Object.assign(Object.assign({},t),{priority:e}))})}changeName(e){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>!!e)).subscribe(t=>{this.store.dispatch(new y.T(this.taskId,{name:e})),this.notifyTaskUpdated(Object.assign(Object.assign({},t),{name:e})),this.renaming=!1})}changeAssignees(e){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>!!e)).subscribe(t=>{this.taskService.setAssignees(t,e).subscribe(e=>{this.reloadTask()}),this.notifyTaskUpdated(Object.assign(Object.assign({},t),{assignees:e}))})}changeGroupAssignees(e){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>!!e)).subscribe(t=>{this.taskService.setGroupAssignees(t,e).subscribe(e=>{this.reloadTask()}),this.notifyTaskUpdated(Object.assign(Object.assign({},t),{group_assignees:e}))})}changeStatus(e){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>!!e)).subscribe(t=>{this.taskService.setStatus(t,e).subscribe(e=>{this.reloadTask()}),this.notifyTaskUpdated(Object.assign(Object.assign({},t),{status:e}))})}toggleStatus(){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>e&&e.statuses&&e.statuses.length>0)).subscribe(e=>{const t=e.statuses[0],i=e.status.status===t.status?e.statuses[e.statuses.length-1]:t;this.taskService.setStatus(e,i).subscribe(e=>{this.reloadTask()}),this.notifyTaskUpdated(Object.assign(Object.assign({},e),{status:i}))})}moveTask({project:e,category:t,subcategory:i}){this.task$.pipe(Object(v.a)(),Object(d.a)(e=>!!e)).subscribe(o=>{this.taskService.move(o,i,t,e.id,!0,!0,{taskMention:!0})})}reloadTask(){this.store.dispatch(new y.x(this.taskId))}notifyTaskUpdated(e){this.store.dispatch(new y.f([e])),this.taskMentionService.updateTaskMentionsItems([e])}mouseEnter(e){this.hovered=!0,this.onEnter.emit(e)}mouseLeave(e){this.hovered=!0,this.dropdownOpened||this.onLeave.emit(e)}setDropdownOpen(e){this.dropdownOpened=e,e||this.hovered||this.onLeave.emit()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.Store),n.Wb(C.a),n.Wb(j.a),n.Wb(A.a),n.Wb($.a),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-task-popup"]],hostAttrs:[1,"cu-task-popup"],hostBindings:function(e,t){1&e&&n.qc("mouseenter",function(e){return t.mouseEnter(e.target)})("mouseleave",function(e){return t.mouseLeave(e.target)})},inputs:{taskId:"taskId",allowRemove:"allowRemove",weights:"weights"},outputs:{onRemove:"onRemove",onEnter:"onEnter",onLeave:"onLeave"},features:[n.Gb],decls:5,vars:2,consts:function(){let e,t,i;return e=$localize`:@@common_new-tab␟73272e437c2b8bd7d57e610a6131716967aff06d␟2069683324011263186:New tab`,t=$localize`:@@cu-task-popup__remove-mention␟522afc25628cde3e646a94e43beb092ddb58bca7␟8242458001306845329:Remove mention`,i=$localize`:@@cu-task-popup__task-deleted-or-not-found␟187d0a2d62a055f1b956daf43ec2d039c6532400␟4670190950851237455: You do not have access or this task has been deleted `,[[4,"ngIf","ngIfElse"],["loadingTemplate",""],["failedTemplate",""],[1,"cu-task-popup__header"],[3,"itemClass","status","statuses","isSimpleStatus","showSettings","showText","colorBackground","disabled","onChange","onToggle","onDropdownOpen","onDropdownClose"],[3,"breadcrumbsItems","inNewTab","truncate",4,"ngIf"],[3,"selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","displaySearch","onSelect","onOpen","onClose",4,"ngIf"],[1,"cu-task-popup__header-divider"],[3,"prioritySelected","disabled","onChange","onOpen","onClose"],[3,"priority"],[1,"cu-task-popup__name-row"],["class","cu-task-popup__name-icon-subtask","icon","cu2-subtask",3,"cuTooltip",4,"ngIf"],[1,"cu-task-popup__name"],[3,"text","editing","onCancel","onChange"],[3,"click"],[3,"users","multiChoice","modifier","selectedUsers","selectedUserGroups","showReassign","enableFirstSelection","weights","weightType","userGroups","disabled","task","subcategory","onChange","onUserGroupsChanged","onOpen","onClose"],[3,"users","userGroups","showUserRemover","assignIcon","multiChoice","modifier","avatarSize","showDropdown"],["class","cu-task-popup__footer",4,"ngIf"],[3,"breadcrumbsItems","inNewTab","truncate"],[3,"selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","displaySearch","onSelect","onOpen","onClose"],["icon","cu2-move",1,"cu-task-popup__header-move"],["icon","cu2-subtask",1,"cu-task-popup__name-icon-subtask",3,"cuTooltip"],[1,"cu-task-popup__footer"],["class","cu-task-popup__footer-item","target","_blank",3,"href",4,"ngIf"],["cuLink","","ngxClipboard","",1,"cu-task-popup__footer-item",3,"cbContent","cbOnSuccess"],["icon","cu2-copy-link2",1,"cu-task-popup__footer-item-icon"],["class","cu-task-popup__footer-item",3,"click",4,"ngIf"],["target","_blank",1,"cu-task-popup__footer-item",3,"href"],["icon","new-tab",1,"cu-task-popup__footer-item-icon","cu-task-popup__footer-item-icon_new-tab"],e,[1,"cu-task-popup__footer-item",3,"click"],["icon","remove",1,"cu-task-popup__footer-item-icon"],t,[1,"cu-task-popup__failed"],i]},template:function(e,t){if(1&e&&(n.bd(0,ne,3,4,"ng-container",0),n.bd(1,se,1,0,"ng-template",null,1,n.cd),n.bd(3,ce,2,0,"ng-template",null,2,n.cd)),2&e){const e=n.Rc(4);n.Dc("ngIf",!t.failed)("ngIfElse",e)}},directives:[U.q,R.a,M.a,F.a,L.a,N.a,z.a,q.a,G.a,V.a,B.a,X.a,H.a,W.a],pipes:[U.b],styles:['.cu-task-popup{display:block;z-index:1000;pointer-events:all;box-shadow:0 1px 10px 0 rgba(0,0,0,.25);border-radius:6px;background:#fff;width:440px;overflow:hidden}.dark-theme .cu-task-popup{background:#384047}.cu-task-popup__header{display:flex;align-items:center;margin:15px 15px 0}.cu-task-popup__header .cu-task-row-status{margin-right:15px;max-width:50%;flex-shrink:0}.cu-task-popup__header .cu-task-row-breadcrumbs{padding-top:0;width:auto}.cu-task-popup__header .cu-priorities-view{padding-left:5px;margin:-5px -5px -5px 0}.cu-task-popup__header .cu-priorities-view .cu-priorities-view__icon,.cu-task-popup__header .cu-priorities-view .cu-priorities-view__icon-select{width:30px;height:30px}.cu-task-popup__header .cu-priorities-view .cu-priorities-view__icon{padding:7px 5px 7px 9px}.cu-task-popup__header .cu-priorities-view .cu-stroke-dasharray{display:none}.cu-task-popup__header-divider{flex-grow:1}.cu-task-popup__header-move{width:14px;height:14px;margin-left:6px;fill:#aaa}.dark-theme .cu-task-popup__header-move{fill:#757575}.cu-task-popup__header-move:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-popup__header-move:hover{fill:var(--theme-main-color)}}.cu-task-popup__name{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:15px;line-height:20px;display:flex;padding:17px 0;flex-grow:1;color:#292d34;min-width:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-task-popup__name{font-family:var(--global-font-support)}}.dark-theme .cu-task-popup__name{color:#d5d6d7}.cu-task-popup__name .cu-editable{position:relative;width:100%}.cu-task-popup__name .cu-editable.cu-editable_editing:before,.cu-task-popup__name .cu-editable:hover:before{opacity:1}.cu-task-popup__name .cu-editable:before{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;opacity:0;top:-3px;left:-5px;width:calc(100% + 10px);height:calc(100% + 6px);border-radius:4px;pointer-events:none;border:1px solid #b9bec7}.dark-theme .cu-task-popup__name .cu-editable:before{border-color:#979797}.cu-task-popup__name .cu-editable__input{max-width:100%}.dark-theme .cu-task-popup__name .cu-editable__input{background:#384047}.cu-task-popup__name-row{display:flex;padding:0 15px}.cu-task-popup__name-row .cu-user-list-dropdown{margin-top:14px;margin-left:10px}.cu-task-popup__name-icon-subtask{width:16px;height:16px;margin-top:18px;margin-right:6px;display:inline-block;pointer-events:all;fill:#aeacb0}.cu-task-popup__footer{display:grid;grid-auto-columns:1fr;grid-auto-flow:column;height:40px;border-top:1px solid #e9ebf0}.dark-theme .cu-task-popup__footer{border-top-color:#2b343b}.cu-task-popup__footer-item{display:flex;align-items:center;justify-content:center;flex-grow:1;height:100%;cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-task-popup__footer-item{color:#d5d6d7}.cu-comment__text .cu-task-popup__footer-item{text-decoration:none;color:#292d34}.dark-theme .cu-comment__text .cu-task-popup__footer-item{color:#d5d6d7}.cu-task-popup__footer-item:hover{background-color:#fafbfc}.dark-theme .cu-task-popup__footer-item:hover{background-color:#2b343b}.cu-task-popup__footer-item+.cu-task-popup__footer-item{border-left:1px solid #e9ebf0}.dark-theme .cu-task-popup__footer-item+.cu-task-popup__footer-item{border-left-color:#2b343b}.cu-task-popup__footer-item-icon{width:16px;height:16px;margin-right:7px;fill:#82868d}.cu-task-popup__footer-item-icon_new-tab{stroke:#82868d}.cu-task-popup__failed{padding:20px;text-align:center;font-weight:400;font-size:15px;line-height:20px}'],encapsulation:2,changeDetection:0}),e})()},UBI6:function(e,t,i){"use strict";var o=i("ZWk2"),n=i("IPAr"),s=i("VSQ+");e.exports=r,r.locator=s,r.notInLink=!0;var c=["http://","https://","mailto:"],a=c.length;function r(e,t,i){var s,r,l,d,u,m,p,h,f,b,g,_,v;if(this.options.gfm){for(s="",d=-1;++d<a;)if((p=t.slice(0,(m=c[d]).length)).toLowerCase()===m){s=p;break}if(s){for(d=s.length,h=t.length,f="",b=0;d<h&&(l=t.charAt(d),!n(l)&&"<"!==l)&&("."!==l&&","!==l&&":"!==l&&";"!==l&&'"'!==l&&"'"!==l&&")"!==l&&"]"!==l||(g=t.charAt(d+1))&&!n(g))&&("("!==l&&"["!==l||b++,")"!==l&&"]"!==l||!(--b<0));)f+=l,d++;if(f){if(r=s+=f,"mailto:"===m){if(-1===(u=f.indexOf("@"))||u===h-1)return;r=r.slice("mailto:".length)}return!!i||(v=this.enterLink(),this.inlineTokenizers={text:(_=this.inlineTokenizers).text},r=this.tokenizeInline(r,e.now()),this.inlineTokenizers=_,v(),e(s)({type:"link",title:null,url:o(s,{nonTerminated:!1}),children:r}))}}}}},UIh7:function(e,t,i){"use strict";var o=i("IPAr"),n=i("MaiH");function s(e,t,i){var n,s,c,a="",r="",l="",d="";if(this.options.gfm&&"~"===t.charAt(0)&&"~"===t.charAt(1)&&!o(t.charAt(2)))for(n=1,s=t.length,(c=e.now()).column+=2,c.offset+=2;++n<s;){if(!("~"!==(a=t.charAt(n))||"~"!==r||l&&o(l)))return!!i||e("~~"+d+"~~")({type:"delete",children:this.tokenizeInline(d,c)});d+=r,l=r,r=a}}e.exports=s,s.locator=n},Ufp6:function(e,t,i){"use strict";i.d(t,"a",function(){return pt});var o=i("fXoL"),n=i("EDFS"),s=i("lJxs"),c=i("zp1y"),a=i("pLZG"),r=i("1G5W"),l=i("Kj3r"),d=i("4n/f"),u=i("XNiG"),m=i("2Vo4"),p=i("itXk"),h=i("IlGD"),f=i("+2Ly"),b=i("l7P3"),g=i("dTHz"),_=i("jJQC"),v=i("hr9B"),k=i("5lwC"),y=i("YAnr"),w=i("CDR3"),x=i("HHlo"),I=i("T7eY"),T=i("S//e"),C=i("YwDF"),D=i("4WLo"),O=i("5b//"),S=i("lE2N"),E=i("c3rA"),P=i("GkwO"),j=i("o7Ov"),A=i("I1n0");let $=(()=>{class e{constructor(){this.addAnOptionText=$localize`:@@cu-edit-task-custom-field-value__add-an-option:Add an option`,this.addOrSelectOptionText=$localize`:@@cu-edit-task-custom-field-value__add-select:Add or select an option`,this.currencyText=$localize`:@@common_currency:Currency`,this.dateText=$localize`:@@common_date:Date`,this.emailText=$localize`:@@common_email:Email`,this.numberText=$localize`:@@common_number:Number`,this.selectAnOptionText=$localize`:@@common_select-an-option:Select an option`,this.typeToSearchText=$localize`:@@cu-edit-task-custom-field-value__type-to-search:Type to search or add...`,this.urlText=$localize`:@@cu-edit-task-custom-field-value__url:URL`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac}),e})();var U=i("SkDE"),R=i("Jf2N"),M=i("G2WA"),F=i("xog/"),L=i("8it8"),N=i("ofXK"),z=i("3Pt+"),q=i("HcWw"),G=i("Dvla"),V=i("UdVN"),B=i("NsZK"),X=i("KqN+"),H=i("8UY1"),W=i("Gfhd"),K=i("LdyQ"),Q=i("MJvn"),Z=i("WeU5"),Y=i("n+1/"),J=i("Xiu6"),ee=i("68Q3"),te=i("lfRK"),ie=i("0bNS"),oe=i("peMq"),ne=i("yw8I"),se=i("FWfR"),ce=i("QzmI"),ae=i("3uaV"),re=i("ahJy"),le=i("nNpr"),de=i("oV/j");const ue=["dateDropdown"],me=["textInputField"],pe=["autosize"],he=["progressInputPopover"],fe=["emailInput"],be=["urlInput"],ge=["telephoneInput"];function _e(e,t){if(1&e&&o.Xb(0,"div",20),2&e){const e=o.uc(2);o.Dc("cbContent",e.fieldValue)}}function ve(e,t){1&e&&o.Xb(0,"div",21)}function ke(e,t){if(1&e){const e=o.dc();o.cc(0,"div",15),o.cc(1,"textarea",16,17),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().fieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(3),i=o.uc();return"blur"===i.updateOn?i.modelValueUpdated():i.saveCustomFieldValue(i.field,i.fieldValue,!0,t)})("focus",function(){o.Uc(e);const t=o.uc();return t.textInputFocused=!0,t.scrollToBottomTextInput()})("blur",function(){o.Uc(e);const t=o.Rc(3),i=o.uc();return i.textInputFocused=!1,i.saveCustomFieldValue(i.field,i.fieldValue,!0,t,i.valueChanged,!0)}),o.bc(),o.bd(4,_e,1,1,"div",18),o.bd(5,ve,1,0,"div",19),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.ad("resize",e.forListView||e.forTableView?"auto":"none"),o.Ec("placeholder",e.placeholder||(e.forViewTask?"Long text":"\u2013")),o.Dc("popover",t)("disabled",e.permissions&&!e.permissions.set_custom_field_values)("ngModel",e.fieldValue)("cuAutoFocus",e.forBulk),o.Ib(3),o.Dc("ngIf",e.forViewTask&&e.fieldValue&&!e.textInputFocused),o.Ib(1),o.Dc("ngIf",e.forListView||e.forTableView)}}function ye(e,t){if(1&e&&o.Xb(0,"div",26),2&e){const e=o.uc(2);o.Dc("cbContent",e.fieldValue)}}function we(e,t){if(1&e){const e=o.dc();o.cc(0,"div",22),o.cc(1,"input",23,24),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().fieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(3),i=o.uc();return"blur"===i.updateOn?i.modelValueUpdated():i.saveCustomFieldValue(i.field,i.fieldValue,!0,t)})("focus",function(){return o.Uc(e),o.uc().textInputFocused=!0})("blur",function(){o.Uc(e);const t=o.Rc(3),i=o.uc();return i.textInputFocused=!1,i.saveCustomFieldValue(i.field,i.fieldValue,!0,t,i.valueChanged,!0)})("keydown.Enter",function(){o.Uc(e);const t=o.Rc(3),i=o.uc();return i.saveCustomFieldValue(i.field,i.fieldValue,!0,t,i.valueChanged,!0)}),o.bc(),o.bd(4,ye,1,1,"div",25),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.Ec("placeholder",e.placeholder||(e.forViewTask?"Text":"\u2013")),o.Dc("popover",t)("disabled",e.permissions&&!e.permissions.set_custom_field_values)("ngModel",e.fieldValue)("cuAutoFocus",e.forBulk),o.Ib(3),o.Dc("ngIf",e.forViewTask&&e.fieldValue&&!e.textInputFocused)}}function xe(e,t){if(1&e){const e=o.dc();o.cc(0,"input",27,28),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().fieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(2),i=o.Rc(3),n=o.uc();return"blur"===n.updateOn?n.modelValueUpdated():n.saveUrl(n.field,n.fieldValue,t.valid,i)})("blur",function(){o.Uc(e);const t=o.Rc(2),i=o.Rc(3),n=o.uc();return n.saveUrl(n.field,n.fieldValue,t.valid,i,!0)})("keydown.Enter",function(){o.Uc(e);const t=o.Rc(2),i=o.Rc(3),n=o.uc();return n.saveUrl(n.field,n.fieldValue,t.valid,i,!0)})("paste",function(t){o.Uc(e);const i=o.Rc(3);return o.uc().urlPaste(t,i)}),o.bc()}if(2&e){const e=o.Rc(2),t=o.uc(),i=o.Rc(20);o.Ob("cu-custom-fields__form-input_invalid",e.invalid),o.Ec("placeholder",t.placeholder||(t.forViewTask?t.editTaskCustomFieldValueStringsService.urlText:"\u2013")),o.Dc("ngModel",t.fieldValue)("disabled",t.permissions&&!t.permissions.set_custom_field_values)("popover",i)("cuAutoFocus",t.forBulk)}}function Ie(e,t){1&e&&(o.cc(0,"div",29),o.Xb(1,"div",30),o.ac(2),o.gc(3,31),o.Zb(),o.bc()),2&e&&o.Dc("@loading",void 0)}function Te(e,t){if(1&e&&o.Xb(0,"div",35),2&e){const e=o.uc(2);o.Dc("cbContent",e.fieldValue)}}function Ce(e,t){1&e&&(o.cc(0,"div",29),o.Xb(1,"div",36),o.ac(2),o.gc(3,37),o.Zb(),o.bc()),2&e&&o.Dc("@loading",void 0)}function De(e,t){if(1&e){const e=o.dc();o.cc(0,"div",22),o.cc(1,"input",32,33),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().fieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(3),i=o.Rc(4),n=o.uc();return"blur"===n.updateOn?n.modelValueUpdated():n.saveNumber(n.field,n.fieldValue,t.valid,i)})("focus",function(){return o.Uc(e),o.uc().textInputFocused=!0})("blur",function(){o.Uc(e);const t=o.Rc(3),i=o.Rc(4),n=o.uc();return n.textInputFocused=!1,n.saveNumber(n.field,n.fieldValue,t.valid,i,!0)})("keydown.Enter",function(){o.Uc(e);const t=o.Rc(3),i=o.Rc(4),n=o.uc();return n.saveNumber(n.field,n.fieldValue,t.valid,i,!0)})("keyup",function(t){return o.Uc(e),o.uc().checkNumber(t)}),o.bc(),o.bd(5,Te,1,1,"div",34),o.bd(6,Ce,4,1,"div",4),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.Ob("cu-custom-fields__form-input_invalid",e.numberIsInvalid),o.Ec("placeholder",e.placeholder||(e.forViewTask?e.editTaskCustomFieldValueStringsService.numberText:"\u2013")),o.Dc("disabled",e.permissions&&!e.permissions.set_custom_field_values)("ngModel",e.fieldValue)("popover",t)("imask",e.numberTextMask)("unmask",!0)("cuAutoFocus",e.forBulk),o.Ib(4),o.Dc("ngIf",e.forViewTask&&e.fieldValue&&!e.textInputFocused),o.Ib(1),o.Dc("ngIf",e.numberIsInvalid)}}function Oe(e,t){if(1&e){const e=o.dc();o.cc(0,"input",38,39),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().fieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(2),i=o.Rc(3),n=o.uc();return"blur"===n.updateOn?n.modelValueUpdated(!0,t.invalid):n.saveCustomFieldValue(n.field,n.fieldValue,t.valid,i)})("focus",function(){return o.Uc(e),o.uc().inputFocused()})("blur",function(){o.Uc(e);const t=o.Rc(2),i=o.Rc(3),n=o.uc();return n.emailBlurred(n.field,n.fieldValue,t.valid,i,n.valueChanged)})("keydown.Enter",function(){o.Uc(e);const t=o.Rc(2),i=o.Rc(3),n=o.uc();return n.emailBlurred(n.field,n.fieldValue,t.valid,i,n.valueChanged)}),o.bc()}if(2&e){const e=o.Rc(2),t=o.uc(),i=o.Rc(20);o.Ob("cu-custom-fields__form-input_invalid",e.invalid&&!t.inputHasFocus),o.Ec("placeholder",t.placeholder||(t.forViewTask?t.editTaskCustomFieldValueStringsService.emailText:"\u2013")),o.Dc("disabled",t.permissions&&!t.permissions.set_custom_field_values)("ngModel",t.fieldValue)("popover",i)("cuAutoFocus",t.forBulk)}}function Se(e,t){1&e&&(o.cc(0,"div",29),o.Xb(1,"div",40),o.ac(2),o.gc(3,41),o.Zb(),o.bc()),2&e&&o.Dc("@loading",void 0)}function Ee(e,t){if(1&e){const e=o.dc();o.cc(0,"div",42),o.cc(1,"input",43,44),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().fieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(2),i=o.uc();return i.saveCustomFieldValue(i.field,i.fieldValue,!0,t,!0,!0)}),o.bc(),o.Xb(3,"span",45),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.Dc("ngModel",e.fieldValue)("disabled",e.permissions&&!e.permissions.set_custom_field_values)("popover",t)("cuAutoFocus",e.forBulk)}}function Pe(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",52),o.vc(2,"isLightColor"),o.cc(3,"div",53),o.vc(4,"isLightColor"),o.dd(5),o.bc(),o.bc(),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.ad("background-color",e.dropdownOptionMap[e.fieldValue].color),o.Ob("cu-custom-fields__header-items-value__dropdown-option_white",!e.dropdownOptionMap[e.fieldValue].color||"#fff"===e.dropdownOptionMap[e.fieldValue].color)("cu-custom-fields__header-items-value__dropdown-option_light",o.xc(2,11,e.dropdownOptionMap[e.fieldValue].color,200)),o.Ib(2),o.Ob("cu-custom-fields__header-items-value__dropdown-option-text-dark",o.wc(4,14,e.dropdownOptionMap[e.fieldValue].color)),o.Dc("cuTooltip",e.dropdownOptionMap[e.fieldValue].name)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(2),o.fd(" ",e.dropdownOptionMap[e.fieldValue].name," ")}}function je(e,t){1&e&&(o.ac(0),o.dd(1,"\u2013"),o.Zb())}function Ae(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(4);o.Ib(1),o.ed(e.placeholder)}}function $e(e,t){if(1&e&&(o.cc(0,"div",54),o.bd(1,je,2,0,"ng-container",48),o.bd(2,Ae,2,1,"ng-container",48),o.bc()),2&e){const e=o.uc(3);o.Ib(1),o.Dc("ngIf",!e.placeholder),o.Ib(1),o.Dc("ngIf",e.placeholder)}}function Ue(e,t){if(1&e&&(o.ac(0),o.bd(1,Pe,6,16,"ng-container",50),o.bd(2,$e,3,2,"ng-template",null,51,o.cd),o.Zb()),2&e){const e=o.Rc(3),t=o.uc(2);o.Ib(1),o.Dc("ngIf",t.fieldValue)("ngIfElse",e)}}const Re=function(e){return{"cu-custom-fields__form-input_dropdown-item_white":e}};function Me(e,t){if(1&e&&(o.cc(0,"cu-select-option",61),o.vc(1,"isInArray"),o.cc(2,"div",62),o.cc(3,"div",63),o.vc(4,"isLightColor"),o.dd(5),o.bc(),o.bc(),o.bc()),2&e){const e=t.$implicit,i=o.uc(4);o.ad("display",o.yc(1,13,e.id,i.filteredItems,!i.filteringItems)?null:"none"),o.Ob("first",(null==e?null:e.id)===i.filteredItemsFirst),o.Dc("value",e.id),o.Ib(2),o.ad("background-color",e.color),o.Dc("ngClass",o.Hc(20,Re,"#fff"===e.color||!e.color)),o.Ib(1),o.Ob("cu-custom-fields__form-input_dropdown-item-text-dark",o.xc(4,17,e.color,200)),o.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(2),o.fd(" ",e.name," ")}}function Fe(e,t){if(1&e&&(o.cc(0,"cu-select-option",58),o.Xb(1,"span",59),o.bc(),o.bd(2,Me,6,22,"cu-select-option",60)),2&e){const e=o.uc(3),t=o.Rc(22);o.ad("display",e.filteringItems&&!e.filteredItems.length?"none":"block"),o.Ib(1),o.Dc("ngTemplateOutlet",t),o.Ib(1),o.Dc("ngForOf",e.field.type_config.options)("ngForTrackBy",e.trackByIdOrIndex)}}function Le(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-select",55,56),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc(2).fieldValue=t})("ngModelChange",function(){o.Uc(e),o.uc();const t=o.Rc(2),i=o.uc();return i.saveCustomFieldValue(i.field,i.fieldValue,!0,t,!0)})("dropdownClose",function(){return o.Uc(e),o.uc(2).closeDropdownSelect()})("dropdownOpen",function(){return o.Uc(e),o.uc(2).openDropdownSelect()})("filterOptions",function(t){o.Uc(e);const i=o.uc(2);return i.debounceSearch$.next({str:t,items:i.field.type_config.options})})("onEnterPress",function(){o.Uc(e);const t=o.Rc(1);o.uc();const i=o.Rc(2);return o.uc().dropdownEnterPress(i,t)}),o.vc(2,"isInArray"),o.bd(3,Fe,3,5,"ng-template",null,57,o.cd),o.bc()}if(2&e){const e=o.Rc(4),t=o.uc(2),i=o.Rc(22),n=o.Rc(24);o.Dc("menuModifier","cu-custom-fields__select-menu cu-custom-fields__select-menu_dropdown cu-select__dropdown-menu-width-200 cu-dropdown__menu_overflow-hidden")("fillContainerWidth",!0)("placeholderTemplate",t.dropdownMenuOnly?void 0:i)("ngModel",t.fieldValue)("footerTemplate",n)("optionsTemplate",e)("dropdownCloseOthersOnOutsideClick",t.dropdownMenuOnly)("disabled",t.permissions&&!t.permissions.set_custom_field_values)("showSearch",!0)("headerText",t.filteringItems&&!t.filteredItems.length?t.editTaskCustomFieldValueStringsService.addAnOptionText:t.filteringItems&&!o.xc(2,12,t.filterSearchString,t.filteredItemsByName)?t.editTaskCustomFieldValueStringsService.addOrSelectOptionText:t.editTaskCustomFieldValueStringsService.selectAnOptionText)("searchPlaceholder",t.editTaskCustomFieldValueStringsService.typeToSearchText)("allowKeyEvents",!0)}}const Ne=function(e,t){return{height:e,display:t}};function ze(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",46,47),o.qc("click",function(){return o.Uc(e),o.uc().showDropdownSelect()}),o.bd(3,Ue,4,2,"ng-container",48),o.bc(),o.bd(4,Le,5,15,"cu-select",49),o.Zb()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.Dc("ngStyle",o.Ic(4,Ne,e.forTableView||e.forListView||e.forViewTask||e.forTaskCustomFields?"100%":"auto",e.dropdownSelectVisible?"none":""))("popover",t),o.Ib(2),o.Dc("ngIf",!e.dropdownMenuOnly),o.Ib(1),o.Dc("ngIf",e.dropdownSelectVisible)}}function qe(e,t){if(1&e){const e=o.dc();o.cc(0,"div",70),o.qc("click",function(e){return e.stopPropagation()}),o.cc(1,"div",71),o.cc(2,"cu-datepicker",72),o.qc("onSelect",function(t){o.Uc(e),o.uc();const i=o.Rc(1),n=o.Rc(5),s=o.uc();return s.dateSelected(s.field,t.dueDate,i,n)})("onCloseDropdown",function(){return o.Uc(e),o.uc(),o.Rc(1).close()})("arrowClick",function(){return o.Uc(e),o.uc(),o.Rc(4).dateTimeInput.nativeElement.focus()})("click",function(){return o.Uc(e),o.uc(),o.Rc(4).dateTimeInput.nativeElement.focus()}),o.vc(3,"async"),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);let t=null;o.Ib(2),o.Dc("showStart",!1)("date",e.fieldValue?1*e.fieldValue:e.fieldValue)("showInput",!1)("weekStart",(null==(t=o.wc(3,4,e.user$))?null:t.week_start_day)||0)}}function Ge(e,t){if(1&e){const e=o.dc();o.cc(0,"div",64,65),o.qc("dropdownClose",function(){return o.Uc(e),o.uc().dropdownClose.emit()})("dropdownOpen",function(){return o.Uc(e),o.uc().dropdownOpen.emit()}),o.cc(2,"div",66),o.cc(3,"cu-datetime-natural-language",67,68),o.qc("onChange",function(t){o.Uc(e);const i=o.Rc(1),n=o.Rc(5),s=o.uc();return s.dateSelected(s.field,t.newMoment,i,n)})("onBlur",function(){o.Uc(e);const t=o.Rc(1),i=o.Rc(4);return o.uc().dateInputBlur(t,i.dateTimeInput.nativeElement)}),o.vc(6,"async"),o.bc(),o.bc(),o.bd(7,qe,4,6,"div",69),o.bc()}if(2&e){const e=o.Rc(1),t=o.uc(),i=o.Rc(20);let n=null;o.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!1)("dropdownCloseOthersOnOpen",!t.forBulk&&t.closeOthers),o.Ib(3),o.Dc("dateVal",t.fieldValue?1*t.fieldValue:t.fieldValue)("forceUpdate",!0)("forTime",!1)("inDatePicker",!1)("focusOnInit",!1)("focusWhenVisible",!1)("timeExists",!1)("militaryTime",!1)("placeholder",t.placeholder||(t.forViewTask?t.editTaskCustomFieldValueStringsService.dateText:"\u2013"))("popover",i)("modifier",e.isOpen?"datepicker__dates-input-container_active":null)("dateFormatting",null==(n=o.wc(6,15,t.user$))?null:n.date_format)}}function Ve(e,t){if(1&e){const e=o.dc();o.cc(0,"input",73,74),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().enforceStringFieldValue=t})("ngModelChange",function(){o.Uc(e);const t=o.Rc(2),i=o.uc();return"blur"===i.updateOn?i.modelValueUpdated():i.saveCurrency(i.field,i.fieldValue,t,!1,!0)})("blur",function(){o.Uc(e);const t=o.Rc(2),i=o.uc();return i.saveCurrency(i.field,i.fieldValue,t,!0)})("keydown.Enter",function(){o.Uc(e);const t=o.Rc(2),i=o.uc();return i.saveCurrency(i.field,i.fieldValue,t,!0)}),o.vc(3,"customFieldCurrencyMask"),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ec("placeholder",e.placeholder||(e.forViewTask?e.editTaskCustomFieldValueStringsService.currencyText:"\u2013")),o.Dc("disabled",e.permissions&&!e.permissions.set_custom_field_values)("ngModel",e.enforceStringFieldValue)("imask",o.wc(3,7,e.field))("unmask",!0)("popover",t)("cuAutoFocus",e.forBulk)}}function Be(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-telephone-input",75,76),o.qc("updateUserCountryCode",function(t){return o.Uc(e),o.uc().updateUserCountryCode(t)})("ngModelChange",function(t){o.Uc(e);const i=o.Rc(3),n=o.Rc(2);return o.uc().saveTelephone(t,i,n.isTelephoneValid)}),o.vc(4,"async"),o.bc(),o.Zb()}if(2&e){const e=o.uc(),t=o.Rc(20);let i=null;o.Ib(1),o.Dc("touched",e.telephoneSaveAttempted)("ngModel",e.fieldValue)("userCountryCode",null==(i=o.wc(4,8,e.user$))?null:i.country_iso_code)("focusInput",e.quickEdit||e.forBulk)("popover",t)("updateOn",e.forBulk?"input":"blur")("showErrorMessage",!0)("placeholder",e.placeholder)}}function Xe(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-custom-field-dropdown-labels",77,78),o.qc("onDeleteLabel",function(t){o.Uc(e);const i=o.Rc(2);return o.uc().removeLabel(t,i)})("onSelect",function(t){o.Uc(e);const i=o.Rc(2),n=o.uc();return n.saveCustomFieldValue(n.field,t,!0,i,!0)})("onEntityUpdate",function(t){return o.Uc(e),o.uc().onEntityUpdate(t)})("dropdownOpen",function(){return o.Uc(e),o.uc().dropdownOpen.emit()})("dropdownClose",function(){return o.Uc(e),o.uc().dropdownClose.emit()}),o.vc(3,"async"),o.bc(),o.Zb()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.Dc("mode","labels")("field",e.field)("items",e.field.type_config.options)("disabled",e.permissions&&!e.permissions.set_custom_field_values)("selectedItemIds",e.fieldValue)("entity",o.wc(3,8,e.entity$))("placeholder",e.placeholder)("popover",t)}}function He(e,t){1&e&&(o.ac(0),o.gc(1,86),o.Zb())}function We(e,t){if(1&e&&o.dd(0),2&e){const e=o.uc(3);o.ed(e.placeholder)}}function Ke(e,t){if(1&e&&(o.cc(0,"span",84),o.bd(1,He,2,0,"ng-container",50),o.bd(2,We,1,1,"ng-template",null,85,o.cd),o.bc()),2&e){const e=o.Rc(3),t=o.uc(2);o.Ib(1),o.Dc("ngIf","Any"===t.placeholder)("ngIfElse",e)}}const Qe=function(){return[]},Ze=function(){return{m:!0}};function Ye(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-user-list-dropdown",79,80),o.qc("onChange",function(t){return o.Uc(e),o.uc().setUsers(t)})("onClose",function(){o.Uc(e);const t=o.Rc(2),i=o.uc();return i.saveCustomFieldValue(i.field,i.fieldValue,!0,t),i.dropdownClose.emit()})("onOpen",function(){o.Uc(e);const t=o.uc();return t.reloadUsers(),t.dropdownOpen.emit()})("hoverKeyDown",function(){o.Uc(e);const t=o.Rc(2);return o.uc().toggleMe(t)}),o.vc(3,"async"),o.cc(4,"div",81),o.bd(5,Ke,4,2,"span",82),o.cc(6,"cu-user-group",83),o.qc("onUserRemove",function(t){o.Uc(e);const i=o.Rc(2);return o.uc().removeUser(t,i)}),o.bc(),o.bc(),o.bc(),o.Zb()}if(2&e){const e=o.uc(),t=o.Rc(20);let i=null;o.Ib(1),o.Dc("popover",t)("users",o.wc(3,18,e.users$))("selectedUsers",e.fieldValue||o.Gc(20,Qe))("multiChoice",!0)("showReassign",!1)("enableFirstSelection",!1)("disabled",e.permissions&&!e.permissions.set_custom_field_values)("cuHoverKeyDown",o.Gc(21,Ze)),o.Ib(3),o.Ob("cu-edit-task-custom-field-value__users_centered",e.forListView),o.Ib(1),o.Dc("ngIf",!(null!=(i=e.fieldValue)&&i.length)&&e.placeholder),o.Ib(1),o.Dc("users",e.fieldValue||o.Gc(22,Qe))("showUserRemover",!e.permissions||e.permissions.set_custom_field_values)("assignIcon",!1)("multiChoice",!0)("showDropdown",!1)("avatarSize",e.forViewTask?24:30)("userAddTooltip","Add person")}}function Je(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",87),o.cc(2,"div",88),o.Xb(3,"div",89),o.bc(),o.cc(4,"div",90),o.dd(5),o.bc(),o.bc(),o.Zb()),2&e){const e=o.uc();let t=null;o.Ib(1),o.Dc("cuTooltip",e.percentComplete+"% of "+e.automaticProgressLabel+" completed"),o.Ib(2),o.ad("width",(null==(t=e.fieldValue)?null:t.percent_complete)||0,"%"),o.Ib(2),o.fd(" ",e.percentComplete,"% ")}}const et=function(){return[!0,!1]};function tt(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"nouislider",91,92),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().setManualProgress(t)}),o.bc(),o.Zb()}if(2&e){const e=o.uc(),t=o.Rc(20);let i=null;o.Ib(1),o.Dc("popover",t)("min",e.field.type_config.start)("max",e.field.type_config.end)("connect",o.Gc(8,et))("step",1)("ngModel",(null==(i=e.fieldValue)?null:i.current)||0)("tooltips",!0)("disabled",e.permissions&&!e.permissions.set_custom_field_values)}}function it(e,t){if(1&e&&(o.cc(0,"span",97),o.dd(1),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.ed(e.placeholder)}}function ot(e,t){if(1&e){const e=o.dc();o.cc(0,"div",93),o.bd(1,it,2,1,"span",94),o.cc(2,"cu-emoji-custom-field-value",95,96),o.qc("ngModelChange",function(t){o.Uc(e);const i=o.Rc(3);return o.uc().setEmojiRatingProgress(t,i)}),o.bc(),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Ib(1),o.Dc("ngIf",!e.fieldValue&&e.placeholder),o.Ib(1),o.Dc("field",e.field)("popover",t)("ngModel",e.fieldValue)}}function nt(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-custom-field-type",98),o.qc("dropdownOpen",function(){return o.Uc(e),o.uc().dropdownOpen.emit()})("dropdownClose",function(){return o.Uc(e),o.uc().dropdownClose.emit()})("fieldValueChange",function(t){o.Uc(e);const i=o.uc();return i.saveCustomFieldValue(i.field,t.value,!0,t.paywallPopover,!0)}),o.vc(1,"async"),o.bc()}if(2&e){const e=o.uc(),t=o.Rc(20);o.Dc("component",e.component)("field",e.field)("forBulk",e.forBulk)("forTableView",e.forTableView)("fieldValue",e.fieldValue)("task",e.task)("permanentAttachments",e.permanentAttachments)("paywallPopover",t)("allCustomFields",e.allCustomFields)("autoDropdown",e.autoDropdown)("permissions",e.permissions)("team",o.wc(1,16,e.team$))("useRollups",e.useRollups)("forViewTask",e.forViewTask)("placeholder",e.placeholder)("forTaskCustomFields",e.forTaskCustomFields)}}function st(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-custom-field-paywall-popover",99),o.qc("hidePaywallPopover",function(){return o.Uc(e),o.uc().hidePaywallPopover()}),o.vc(1,"async"),o.bc()}if(2&e){const e=o.uc();o.Dc("team",o.wc(1,1,e.team$))}}function ct(e,t){1&e&&(o.ac(0),o.dd(1,"\u2013"),o.Zb())}function at(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(2);o.Ib(1),o.ed(e.placeholder)}}function rt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",100),o.qc("clickOutside",function(){return o.Uc(e),o.uc().closeDropdownSelect()}),o.bd(1,ct,2,0,"ng-container",48),o.bd(2,at,2,1,"ng-container",48),o.bc()}if(2&e){const e=o.uc();o.ad("justify-content","center"),o.Ib(1),o.Dc("ngIf",!e.placeholder),o.Ib(1),o.Dc("ngIf",e.placeholder)}}function lt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",103),o.qc("click",function(){return o.Uc(e),o.uc(2).showEditDropdownFieldsModal()}),o.cc(1,"div",104),o.cc(2,"div",105),o.gc(3,106),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.ad("display",e.filteringItems&&!e.filteredItems.length?"none":"block")}}function dt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",107),o.qc("click",function(t){return o.Uc(e),o.uc(2).addNewDropdown(t)}),o.dd(1," + "),o.ac(2),o.mc(3,108),o.Xb(4,"span"),o.jc(),o.Zb(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.kc(e.filterSearchString),o.hc(3)}}function ut(e,t){if(1&e&&(o.bd(0,lt,4,2,"div",101),o.bd(1,dt,5,1,"div",102),o.vc(2,"isInArray")),2&e){const e=o.uc();o.Dc("ngIf",null==e.permissions?null:e.permissions.manage_custom_fields),o.Ib(1),o.Dc("ngIf",e.filteringItems&&!o.xc(2,2,e.filterSearchString,e.filteredItemsByName))}}const mt=new u.a;let pt=(()=>{class e{constructor(e,t,i,n,a,r,l,d,h){this.customFieldsService=e,this.cdr=t,this.modalService=i,this.injector=n,this.store=a,this.sharedTaskService=r,this.helpers=l,this.commonStringsService=d,this.editTaskCustomFieldValueStringsService=h,this.quickEdit=!1,this.dropdownMenuOnly=!1,this.forViewTask=!1,this.forTaskCustomFields=!1,this.forListView=!1,this.forTableView=!1,this.forBulk=!1,this.closeOthers=!0,this.updateOn="blur",this.permanentAttachments=!1,this.autoFocus=!0,this.autoDropdown=!1,this.skipSaving=!1,this.useRollups=!0,this.fieldValueChange=new o.o,this.formControlBlur=new o.o,this.fieldSave=new o.o,this.fieldSaveStart=new o.o,this.fieldSaveSuccess=new o.o,this.fieldDeleteSuccess=new o.o,this.fieldSaveError=new o.o,this.editProjectFieldsModalOpen=new o.o,this.dropdownOpen=new o.o,this.dropdownClose=new o.o,this.fieldSubmit=new o.o,this.formControlError=new o.o,this.CustomFieldType=C.a,this.valueChanged=!1,this.dropdownSelectVisible=!1,this.destroy$=new u.a,this.telephoneSaveAttempted=!1,this.numberTextMask=k.a,this.team$=this.store.select(E.getTeam),this.user$=this.store.select(E.getUser),this.viewMembers$=this.store.select(P.vb),this.taskMembers$=this.store.pipe(Object(b.select)(A.w)),this.teamMembers$=this.store.select(E.getMembers),this.entity$=this.store.select(E.getCurrentHierarchyEntity),this.members$=new m.a([]),this.field$=new m.a(null),this.users$=Object(p.a)([this.field$,this.teamMembers$,this.members$,this.taskMembers$,this.viewMembers$]).pipe(Object(s.a)(([e,t,i,o,n])=>{const s=(this.forViewTask?o:n)||[];return e.type===C.a.Users&&e.type_config.include_team_members&&t&&t.length>0?Object(S.a)([...t,...s],"user.id"):i||s}),Object(c.a)(this.field$),Object(s.a)(([e,t])=>(e||[]).filter(e=>!(!e||t.type===C.a.Users&&!t.type_config.include_guests&&e.role===g.f.GUEST)).map(e=>e.user))),this.trackById=Object(_.d)("id"),this.numberIsInvalid=!1,this.textInputFocused=!1,this.debounceSearch$=new u.a,this.filteringItems=!1,this.filteredItems=[],this.filteredItemsByName=[],this.filteredItemsFirst=null,this.filterSearchString="",this.selectDropdownAfterAdd=!1,this.inputHasFocus=!1,this.setManualProgress$=new u.a,this.trackByIdOrIndex=(e,t)=>t.id||e}get enforceStringFieldValue(){if(this.fieldValue)return this.fieldValue.toString()}set enforceStringFieldValue(e){this.fieldValue=e}ngOnInit(){mt.pipe(Object(a.a)(()=>!!this.lastPaywallPopver),Object(r.a)(this.destroy$)).subscribe(()=>{this.lastPaywallPopver.hide(),this.lastPaywallPopver=null}),this.setManualProgress$.pipe(Object(l.a)(300),Object(r.a)(this.destroy$)).subscribe(()=>{this.saveCustomFieldValue(this.field,this.fieldValue,!0,this.progressInputPopover,!0)}),this.debounceSearch$.pipe(Object(l.a)(100)).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{this.filterItems(e)})}ngOnChanges(e){if(e.field){if(this.component=D.b[this.field.type],this.field.type===C.a.AutomaticProgress){const e=[];!this.field.type_config.tracking.subtasks||this.task&&this.task.parent||e.push("subtasks"),this.field.type_config.tracking.checklists&&e.push("checklists"),this.field.type_config.tracking.assigned_comments&&e.push("assigned comments"),this.automaticProgressLabel=3===e.length?`${e[0]}, ${e[1]}, and ${e[2]}`:e.join(" and ")}this.field.type===C.a.Dropdown&&(this.dropdownOptionMap={},this.field.type_config.options.forEach(e=>{this.dropdownOptionMap[e.id]=e}))}(e.field||e.fieldValue)&&this.field.type===C.a.Dropdown&&this.fieldValue&&!this.dropdownOptionMap[this.fieldValue]&&(this.fieldValue=void 0),e.fieldValue&&this.field.type===C.a.AutomaticProgress&&(this.percentComplete=this.fieldValue&&this.fieldValue.percent_complete?this.fieldValue.percent_complete.toFixed(0):"0"),e.members&&this.members$.next(this.members),e.field&&this.field$.next(this.field)}ngOnDestroy(){this.destroy$.next()}ngAfterViewInit(){this.autoFocus&&this.focusTextField(),this.dropdownMenuOnly&&this.field.type===C.a.Dropdown&&this.showDropdownSelect(),this.autoDropdown&&this.openDropdown()}openDropdown(){switch(this.field.type){case C.a.Dropdown:this.showDropdownSelect();break;case C.a.Labels:setTimeout(()=>{this.labelsEditor.open()});break;case C.a.Date:setTimeout(()=>{this.dateDropdown.open()});break;case C.a.Users:setTimeout(()=>{this.usersEditor.open()})}}saveCustomFieldValue(e,t,i,o,n=this.valueChanged,s=!1,c){s&&this.formControlError.emit({message:i?"":c});const a=e.value;if(i&&(n||"input"===this.updateOn)){const i=t||0===t;if(this.task)if(i){this.fieldSaveStart.emit();const i=h.e[e.type],n=i.serialiseValueForApi?i.serialiseValueForApi(e.value,t,e):t;this.skipSaving?this.fieldSave.emit({value:n,setValue:!0}):this.customFieldsService.setTaskFieldValue(this.task.id,e.id,n).subscribe(()=>{this.formControlBlur.emit(),this.dropdownSelectVisible=!1,this.telephoneSaveAttempted=!1,this.fieldSaveSuccess.emit(t)},e=>{"FIELD_033"===e.ECODE&&(mt.next(o),o.show(),this.lastPaywallPopver=o),this.fieldValueChange.emit(a),this.fieldSaveError.emit()})}else this.skipSaving?this.fieldSave.emit({value:void 0,setValue:!1}):this.customFieldsService.deleteTaskFieldValue(this.task.id,e.id).subscribe(()=>{this.formControlBlur.emit(),this.dropdownSelectVisible=!1,this.telephoneSaveAttempted=!1,this.fieldDeleteSuccess.emit()});this.valueChanged=!1,this.fieldValueChange.emit(i?t:void 0),s&&this.fieldSubmit.emit()}else this.formControlBlur.emit()}dateSelected(e,t,i,o){this.fieldValue=t?t.valueOf():void 0,this.saveCustomFieldValue(e,this.fieldValue,!0,o,!0),i.close()}dateInputBlur(e,t){setTimeout(()=>{e.isOpen&&document.activeElement!==t&&this.formControlBlur.emit()},200)}saveCurrency(e,t,i,o=!1,n=!1){n&&t&&t.endsWith(".")||this.saveCustomFieldValue(e,Object(k.b)(t),!0,i,this.valueChanged,o)}modelValueUpdated(e,t){this.valueChanged=!0,this.forListView&&e&&this.updateRowZIndex(!!t)}saveUrl(e,t,i,o,n=!1){this.saveCustomFieldValue(e,Object(k.d)(t),i,o,this.valueChanged,n)}checkNumber(e){this.numberIsInvalid=!e[this.helpers.SHORTKEY]&&!/^[\d.\-]$/.test(e.key)&&1===e.key.length}saveNumber(e,t,i,o,n=!1){this.saveCustomFieldValue(e,Object(k.c)(t),i,o,this.valueChanged,n)}showDropdownSelect(){setTimeout(()=>{this.dropdownSelectVisible=!0,this.cdr.detectChanges(),this.select.showDropdown()})}openDropdownSelect(){this.dropdownOpen.emit(),this.resetFilter()}closeDropdownSelect(){this.dropdownSelectVisible&&(this.dropdownSelectVisible=!1),this.dropdownClose.emit()}hidePaywallPopover(){this.popovers.forEach(e=>{e.hide()})}showEditDropdownFieldsModal(){this.select.dropdown.close();const e=this.task?this.task.subcategory:this.subcategory,t=this.modalService.openComponent(f.a,this.injector,{title:this.commonStringsService.manageCustomFieldText(e.name),dialogModifier:"cu-modal__dialog-custom-fields",preventExternalClick:!0,bodyModifier:"cu-modal__body_no-min-height"});t.instance.setEntity(this.field.entity||{type:"subcategory",id:e.id,name:e.name}),t.instance.fieldIdToEdit=this.field.id,this.editProjectFieldsModalOpen.emit(t)}addNewDropdown(e,t){if(e&&(e.preventDefault(),e.stopPropagation()),this.field.type===C.a.Dropdown){const e=this.field.type_config.options,i=e.every(e=>null===e.color),o=[];e.forEach(e=>{e.color&&!o.includes(e.color)&&o.push(e.color)});let n=Object(O.e)(),s=1;for(;o.includes(n)&&s<1e3;)n=Object(O.e)(),s++;const c={name:this.filterSearchString,color:i?null:n},a={type:"drop_down",type_config:{new_drop_down:!0,options:[...e,c]}};this.store.dispatch(Object(x.u)({field:this.field,updates:a,entity:this.field.entity,refreshTask:!0,task:this.task,addNewOptionToTask:t})),this.selectDropdownCF&&(this.resetFilter(),this.selectDropdownCF.searchText="",this.selectDropdownCF.scrollToBottom()),t&&this.closeDropdownSelect()}}saveTelephone(e,t,i,o=!1){this.valueChanged=this.fieldValue!==e,this.telephoneSaveAttempted=!0,this.fieldValue=e,this.saveCustomFieldValue(this.field,this.fieldValue,i,t,this.valueChanged,o)}removeLabel(e,t){this.fieldValue=this.fieldValue.filter(t=>t!==e),this.saveCustomFieldValue(this.field,this.fieldValue,!0,t,!0)}removeUser(e,t){this.fieldValue=this.fieldValue.filter(t=>t.id!==e.id),this.saveCustomFieldValue(this.field,this.fieldValue,!0,t,!0)}setManualProgress(e){this.fieldValue={current:e},this.setManualProgress$.next()}setEmojiRatingProgress(e,t){this.fieldValue=+this.fieldValue===e?null:e,this.saveCustomFieldValue(this.field,this.fieldValue,!0,t,!0)}reloadUsers(){this.forViewTask||this.store.dispatch(new j.Pk)}setUsers(e){this.fieldValue=e,this.modelValueUpdated()}inputFocused(){this.inputHasFocus=!0}emailBlurred(e,t,i,o,n){this.inputHasFocus=!1,this.saveCustomFieldValue(e,t,i,o,n,!0,$localize`:@@cu-edit-task-custom-field-value__form-error_invalid-email:Invalid email address entered`),this.updateRowZIndex(!1)}updateRowZIndex(e){if(!this.task)return;const t=document.querySelector(`.cu-task-row[data-id="${this.task.id}"]`);t&&(e?t.classList.add("cu-task-row__high-index"):t.classList.remove("cu-task-row__high-index"))}updateUserCountryCode(e){this.store.dispatch(new j.om({country_iso_code:e}))}urlPaste(e,t){const i=(e.clipboardData||window.clipboardData).getData("text");Object(y.x)(i)&&setTimeout(()=>{this.saveUrl(this.field,i,!0,t)})}toggleMe(e){this.setUsers(this.helpers.toggleMe(this.fieldValue||[],!0)),this.saveCustomFieldValue(this.field,this.fieldValue,!0,e)}onEntityUpdate(e){this.store.dispatch(Object(x.u)({field:e.field,updates:e.updates,entity:e.entity,refreshTask:this.forViewTask,task:this.task,reloadView:!0}))}resetFilter(){this.filteringItems=!1,this.filteredItems=[],this.filteredItemsByName=[],this.filteredItemsFirst=null}filterItems(e){if(this.filterSearchString=e.str,""===e.str)return this.resetFilter(),void this.cdr.detectChanges();this.filteringItems=!0;const t=e.items.filter(({name:t})=>t.toLowerCase().includes(e.str.toLowerCase()));this.filteredItemsFirst=t&&t[0]?t[0].id:null,this.filteredItems=t.map(e=>e.id),this.filteredItemsByName=t.map(e=>e.name),this.cdr.detectChanges()}dropdownEnterPress(e,t){if(this.filteringItems&&!this.filteredItems.length)return this.dropdownInputPopover=e,void this.addNewDropdown(null,!0);this.filteredItemsFirst&&(this.saveCustomFieldValue(this.field,this.filteredItemsFirst,!0,e,!0),t&&t.dropdown&&t.dropdown.close())}scrollToBottomTextInput(){setTimeout(()=>{this.textInputField&&(this.textInputField.nativeElement.scrollTop=this.textInputField.nativeElement.scrollHeight)},0)}focusTextField(){this.quickEdit&&this.textInputField&&(setTimeout(()=>{this.textInputField.nativeElement.focus()}),this.field.type===C.a.Url&&setTimeout(()=>{this.textInputField.nativeElement.select()}),(this.forListView||this.forTableView)&&this.field.type===C.a.LongText&&setTimeout(()=>{this.textInputField.nativeElement.focus()},10)),setTimeout(()=>{this.autosize&&this.autosize.resizeToFitContent(!0)})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(U.a),o.Wb(o.h),o.Wb(R.a),o.Wb(o.t),o.Wb(b.Store),o.Wb(M.a),o.Wb(F.b),o.Wb(L.a),o.Wb($))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-edit-task-custom-field-value"]],viewQuery:function(e,t){if(1&e&&(o.jd(d.a,1),o.jd(ue,1),o.jd(me,1),o.jd(pe,1),o.jd(he,1),o.jd(fe,1),o.jd(be,1),o.jd(ge,1),o.jd(I.a,1),o.jd(T.a,1),o.jd(d.a,1),o.jd(n.c,1)),2&e){let e;o.Qc(e=o.rc())&&(t.select=e.first),o.Qc(e=o.rc())&&(t.dateDropdown=e.first),o.Qc(e=o.rc())&&(t.textInputField=e.first),o.Qc(e=o.rc())&&(t.autosize=e.first),o.Qc(e=o.rc())&&(t.progressInputPopover=e.first),o.Qc(e=o.rc())&&(t.emailInput=e.first),o.Qc(e=o.rc())&&(t.urlInput=e.first),o.Qc(e=o.rc())&&(t.telephoneInput=e.first),o.Qc(e=o.rc())&&(t.labelsEditor=e.first),o.Qc(e=o.rc())&&(t.usersEditor=e.first),o.Qc(e=o.rc())&&(t.selectDropdownCF=e.first),o.Qc(e=o.rc())&&(t.popovers=e)}},hostAttrs:[1,"cu-edit-task-custom-field-value"],inputs:{task:"task",subcategory:"subcategory",permissions:"permissions",field:"field",fieldValue:"fieldValue",quickEdit:"quickEdit",dropdownMenuOnly:"dropdownMenuOnly",forViewTask:"forViewTask",forTaskCustomFields:"forTaskCustomFields",forListView:"forListView",forTableView:"forTableView",members:"members",forBulk:"forBulk",closeOthers:"closeOthers",allCustomFields:"allCustomFields",placeholder:"placeholder",updateOn:"updateOn",permanentAttachments:"permanentAttachments",autoFocus:"autoFocus",autoDropdown:"autoDropdown",skipSaving:"skipSaving",useRollups:"useRollups"},outputs:{fieldValueChange:"fieldValueChange",formControlBlur:"formControlBlur",fieldSave:"fieldSave",fieldSaveStart:"fieldSaveStart",fieldSaveSuccess:"fieldSaveSuccess",fieldDeleteSuccess:"fieldDeleteSuccess",fieldSaveError:"fieldSaveError",editProjectFieldsModalOpen:"editProjectFieldsModalOpen",dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose",fieldSubmit:"fieldSubmit",formControlError:"formControlError"},features:[o.Hb([$,w.a]),o.Gb],decls:25,vars:19,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u;return e=$localize`:@@cu-edit-task-custom-field-value__tooltip-msg_copy-text␟ac0b90a4dc259e5f1f3ce6b67da8bd8334d579f8␟6086194260175067803:Copy text`,t=$localize`:@@cu-edit-task-custom-field-value__tooltip-msg_copy-text␟ac0b90a4dc259e5f1f3ce6b67da8bd8334d579f8␟6086194260175067803:Copy text`,i=$localize`:@@errors_form-field--url-invalid-2␟b02b306e3f4b3a6fa7b1dbf4f086a01b7657432e␟6725216802363647972:Invalid URL entered`,o=$localize`:@@errors_form-field--url-invalid-2␟b02b306e3f4b3a6fa7b1dbf4f086a01b7657432e␟6725216802363647972:Invalid URL entered`,n=$localize`:@@cu-edit-task-custom-field-value__tooltip-msg_copy-num␟8d8677208d06383846f5c05a06ad4ac2b4088cd3␟5492138822948233:Copy number`,s=$localize`:@@cu-edit-task-custom-field-value__form-error_only-for-numbers␟f1654cccfe4fccac8934a01e3aa736c3c3272f88␟4004385483253441501:This field is only for numbers`,c=$localize`:@@cu-edit-task-custom-field-value__form-error_only-for-numbers␟f1654cccfe4fccac8934a01e3aa736c3c3272f88␟4004385483253441501:This field is only for numbers`,a=$localize`:@@cu-edit-task-custom-field-value__form-error_invalid-email␟5e90e9d956ee2e596203c9da73a5899c3011392a␟5334915737078675034:Invalid email address entered`,r=$localize`:@@cu-edit-task-custom-field-value__form-error_invalid-email␟5e90e9d956ee2e596203c9da73a5899c3011392a␟5334915737078675034:Invalid email address entered`,l=$localize`:@@common_anyone␟ae1f44c3d94930e46b7c5d6e8d5c53cb1936d953␟6451695144927621822:Anyone`,d=$localize`:@@cu-edit-task-custom-field-value__add-edit-options␟2008f897d3a58f375902011c827ebe483fb60e97␟2130957434643091897: Add/edit options `,u=$localize`:@@cu-edit-task-custom-field-value__add-dropdown-option␟5194e3433cb4901934e17925c72595e12e2ce899␟6874001591599704222:${"\ufffd#4\ufffd"}:START_TAG_SPAN:Add  ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:"${"\ufffd0\ufffd"}:INTERPOLATION:"`,[[3,"ngSwitch"],["class","cu-custom-fields__form-input-container cu-custom-fields__form-input-container_textarea",4,"ngSwitchCase"],["class","cu-custom-fields__form-input-container",4,"ngSwitchCase"],["type","url","cuUrlFormControl","","class","cu-custom-fields__form-input","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",3,"cu-custom-fields__form-input_invalid","ngModel","disabled","popover","placeholder","cuAutoFocus","ngModelChange","blur","keydown.Enter","paste",4,"ngSwitchCase"],["class","cu-edit-task-custom-field-value__error",4,"ngIf"],["type","email","email","","class","cu-custom-fields__form-input cu-custom-fields__form-input_email","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",3,"disabled","cu-custom-fields__form-input_invalid","ngModel","popover","placeholder","cuAutoFocus","ngModelChange","focus","blur","keydown.Enter",4,"ngSwitchCase"],["class","cu-custom-fields__form-input cu-custom-fields__form-input_checkbox",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","cu-dropdown cu-dropdown_datepicker","cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownCloseOthersOnOpen","dropdownClose","dropdownOpen",4,"ngSwitchCase"],["class","cu-custom-fields__form-input cu-custom-fields__form-input_currency","type","text","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",3,"disabled","ngModel","imask","unmask","popover","placeholder","cuAutoFocus","ngModelChange","blur","keydown.Enter",4,"ngSwitchCase"],["class","cu-edit-task-custom-field-value__emoji",4,"ngSwitchCase"],[3,"component","field","forBulk","forTableView","fieldValue","task","permanentAttachments","paywallPopover","allCustomFields","autoDropdown","permissions","team","useRollups","forViewTask","placeholder","forTaskCustomFields","dropdownOpen","dropdownClose","fieldValueChange",4,"ngIf"],["paywallPopover",""],["dropdownPlaceholderTemplate",""],["dropdownFooterTemplate",""],[1,"cu-custom-fields__form-input-container","cu-custom-fields__form-input-container_textarea"],["spellcheck","false","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input","cu-custom-fields__form-input_textarea",3,"popover","disabled","ngModel","placeholder","cuAutoFocus","ngModelChange","focus","blur"],["textInputField","","longTextInputPopover","bs-popover"],["ngxClipboard","","class","cu-custom-fields__form-input-copy","icon","copy","cuTooltip",e,3,"cbContent",4,"ngIf"],["class","cu-cusom-fields__form-input-resize-handle",4,"ngIf"],["ngxClipboard","","icon","copy","cuTooltip",e,1,"cu-custom-fields__form-input-copy",3,"cbContent"],[1,"cu-cusom-fields__form-input-resize-handle"],[1,"cu-custom-fields__form-input-container"],["type","text","spellcheck","false","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input",3,"popover","disabled","ngModel","placeholder","cuAutoFocus","ngModelChange","focus","blur","keydown.Enter"],["textInputField","","shortInputPopover","bs-popover"],["ngxClipboard","","class","cu-custom-fields__form-input-copy","icon","copy","cuTooltip",t,3,"cbContent",4,"ngIf"],["ngxClipboard","","icon","copy","cuTooltip",t,1,"cu-custom-fields__form-input-copy",3,"cbContent"],["type","url","cuUrlFormControl","","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input",3,"ngModel","disabled","popover","placeholder","cuAutoFocus","ngModelChange","blur","keydown.Enter","paste"],["textInputField","","urlInput","ngModel","urlInputPopover","bs-popover"],[1,"cu-edit-task-custom-field-value__error"],["icon","exclamation4","cuTooltip",i,1,"cu-edit-task-custom-field-value__error-icon"],o,["type","text","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input","cu-custom-fields__form-input_number",3,"disabled","ngModel","popover","placeholder","imask","unmask","cuAutoFocus","ngModelChange","focus","blur","keydown.Enter","keyup"],["textInputField","","numberInput","ngModel","numberInputPopover","bs-popover"],["ngxClipboard","","class","cu-custom-fields__form-input-copy","icon","copy","cuTooltip",n,3,"cbContent",4,"ngIf"],["ngxClipboard","","icon","copy","cuTooltip",n,1,"cu-custom-fields__form-input-copy",3,"cbContent"],["icon","exclamation4","cuTooltip",s,1,"cu-edit-task-custom-field-value__error-icon"],c,["type","email","email","","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input","cu-custom-fields__form-input_email",3,"disabled","ngModel","popover","placeholder","cuAutoFocus","ngModelChange","focus","blur","keydown.Enter"],["textInputField","","emailInput","ngModel","emailInputPopover","bs-popover"],["icon","exclamation4","cuTooltip",a,1,"cu-edit-task-custom-field-value__error-icon"],r,[1,"cu-custom-fields__form-input","cu-custom-fields__form-input_checkbox"],["type","checkbox","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",3,"ngModel","disabled","popover","cuAutoFocus","ngModelChange"],["checkboxInputPopover","bs-popover"],[1,"cu-custom-fields__form-input_checkbox-checkmark"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",1,"cu-custom-fields__type-dropdown",3,"ngStyle","popover","click"],["dropdownInputPopover","bs-popover"],[4,"ngIf"],["class","cu-custom-fields__form-input cu-custom-fields__form-input_dropdown",3,"menuModifier","fillContainerWidth","placeholderTemplate","ngModel","footerTemplate","optionsTemplate","dropdownCloseOthersOnOutsideClick","disabled","showSearch","headerText","searchPlaceholder","allowKeyEvents","ngModelChange","dropdownClose","dropdownOpen","filterOptions","onEnterPress",4,"ngIf"],[4,"ngIf","ngIfElse"],["selectAValueTemplate",""],[1,"cu-custom-fields__header-items-value__dropdown-option"],["tooltipLifeTime","15000",1,"cu-custom-fields__header-items-value__dropdown-option-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-custom-fields__form-input","cu-custom-fields__form-input_placeholder","cu-custom-fields__form-input_pointer"],[1,"cu-custom-fields__form-input","cu-custom-fields__form-input_dropdown",3,"menuModifier","fillContainerWidth","placeholderTemplate","ngModel","footerTemplate","optionsTemplate","dropdownCloseOthersOnOutsideClick","disabled","showSearch","headerText","searchPlaceholder","allowKeyEvents","ngModelChange","dropdownClose","dropdownOpen","filterOptions","onEnterPress"],["selectDropdownCF",""],["optionsTemplate",""],[3,"value"],[3,"ngTemplateOutlet"],["class","cu-custom-fields__select-menu_dropdown-item",3,"value","display","first",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-custom-fields__select-menu_dropdown-item",3,"value"],[1,"cu-custom-fields__form-input_dropdown-item",3,"ngClass"],["tooltipLifeTime","15000",1,"cu-custom-fields__form-input_dropdown-item-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["cuDropdown","",1,"cu-dropdown","cu-dropdown_datepicker",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownCloseOthersOnOpen","dropdownClose","dropdownOpen"],["dateDropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",3,"dateVal","forceUpdate","forTime","inDatePicker","focusOnInit","focusWhenVisible","timeExists","militaryTime","placeholder","popover","modifier","dateFormatting","onChange","onBlur"],["datetimeNaturalLanguage","","dateInputPopover","bs-popover"],["class","cu-dropdown__menu",3,"click",4,"cuDropdownMenu"],[1,"cu-dropdown__menu",3,"click"],[1,"datepicker-menu","datepicker-menu_custom-fields"],[3,"showStart","date","showInput","weekStart","onSelect","onCloseDropdown","arrowClick","click"],["type","text","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input","cu-custom-fields__form-input_currency",3,"disabled","ngModel","imask","unmask","popover","placeholder","cuAutoFocus","ngModelChange","blur","keydown.Enter"],["textInputField","","currencyInputPopover","bs-popover"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",3,"touched","ngModel","userCountryCode","focusInput","popover","updateOn","showErrorMessage","placeholder","updateUserCountryCode","ngModelChange"],["telephoneInput","","phoneInputPopover","bs-popover"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",3,"mode","field","items","disabled","selectedItemIds","entity","placeholder","popover","onDeleteLabel","onSelect","onEntityUpdate","dropdownOpen","dropdownClose"],["labelInputPopover","bs-popover"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",1,"cu-edit-task-custom-field-value__user-list-dropdown",3,"popover","users","selectedUsers","multiChoice","showReassign","enableFirstSelection","disabled","cuHoverKeyDown","onChange","onClose","onOpen","hoverKeyDown"],["usersInputPopover","bs-popover"],[1,"cu-edit-task-custom-field-value__users"],["class","cu-edit-task-custom-field-value__users-placeholder",4,"ngIf"],[3,"users","showUserRemover","assignIcon","multiChoice","showDropdown","avatarSize","userAddTooltip","onUserRemove"],[1,"cu-edit-task-custom-field-value__users-placeholder"],["placeholderTmpl",""],l,["tooltipLifeTime","15000",3,"cuTooltip"],[1,"cu-edit-task-custom-field-value__automaticprogress"],[1,"cu-edit-task-custom-field-value__automaticprogress-progress"],[1,"cu-edit-task-custom-field-value__automaticprogress-value"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",1,"cu-edit-task-custom-field-value__manual_progress",3,"popover","min","max","connect","step","ngModel","tooltips","disabled","ngModelChange"],["progressInputPopover","bs-popover"],[1,"cu-edit-task-custom-field-value__emoji"],["class","cu-edit-task-custom-field-value__emoji-placeholder",4,"ngIf"],["containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",3,"field","popover","ngModel","ngModelChange"],["ratingInputPopover","bs-popover"],[1,"cu-edit-task-custom-field-value__emoji-placeholder"],[3,"component","field","forBulk","forTableView","fieldValue","task","permanentAttachments","paywallPopover","allCustomFields","autoDropdown","permissions","team","useRollups","forViewTask","placeholder","forTaskCustomFields","dropdownOpen","dropdownClose","fieldValueChange"],[3,"team","hidePaywallPopover"],[1,"cu-custom-fields__form-input",3,"clickOutside"],["class","cu-select-option",3,"display","click",4,"ngIf"],["class","cu-edit-task-custom-field-value__new-dropdown-item",3,"click",4,"ngIf"],[1,"cu-select-option",3,"click"],[1,"cu-custom-fields__form-input_dropdown-item-link"],[1,"cu-custom-fields__form-input_dropdown-item-link-text"],d,[1,"cu-edit-task-custom-field-value__new-dropdown-item",3,"click"],u]},template:function(e,t){1&e&&(o.ac(0,0),o.bd(1,ke,6,9,"div",1),o.bd(2,we,5,6,"div",2),o.bd(3,xe,4,7,"input",3),o.bd(4,Ie,4,1,"div",4),o.bd(5,De,7,11,"div",2),o.bd(6,Oe,4,7,"input",5),o.bd(7,Se,4,1,"div",4),o.bd(8,Ee,4,4,"div",6),o.bd(9,ze,5,7,"ng-container",7),o.bd(10,Ge,8,17,"div",8),o.bd(11,Ve,4,9,"input",9),o.bd(12,Be,5,10,"ng-container",7),o.bd(13,Xe,4,10,"ng-container",7),o.bd(14,Ye,7,23,"ng-container",7),o.bd(15,Je,6,4,"ng-container",7),o.bd(16,tt,3,9,"ng-container",7),o.bd(17,ot,4,4,"div",10),o.Zb(),o.bd(18,nt,2,18,"cu-custom-field-type",11),o.bd(19,st,2,3,"ng-template",null,12,o.cd),o.bd(21,rt,3,4,"ng-template",null,13,o.cd),o.bd(23,ut,3,5,"ng-template",null,14,o.cd)),2&e&&(o.Dc("ngSwitch",t.field.type),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.LongText),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.ShortText),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Url),o.Ib(1),o.Dc("ngIf",null==t.urlInput?null:t.urlInput.invalid),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Number),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Email),o.Ib(1),o.Dc("ngIf",(null==t.emailInput?null:t.emailInput.invalid)&&!t.inputHasFocus),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Checkbox),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Dropdown),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Date),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Currency),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Phone),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Labels),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Users),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.AutomaticProgress),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.ManualProgress),o.Ib(1),o.Dc("ngSwitchCase",t.CustomFieldType.Emoji),o.Ib(1),o.Dc("ngIf",t.component))},directives:[N.u,N.v,N.q,z.c,n.c,z.p,z.s,q.a,G.a,V.a,B.a,X.a,H.a,z.d,z.b,N.t,d.a,W.a,N.x,N.p,N.o,K.b,Q.a,Z.a,Y.a,J.a,ee.a,te.a,T.a,ie.a,oe.a,ne.a,se.a,D.a,ce.a,ae.a],pipes:[re.a,le.a,N.b,de.a],styles:['.cu-edit-task-custom-field-value{position:relative}.cu-edit-task-custom-field-value__automaticprogress{height:10px;border-radius:5px;border:1px solid #67cb48;flex-grow:1}.cu-edit-task-custom-field-value__automaticprogress-progress{height:8px;background-color:#67cb48}.cu-edit-task-custom-field-value__automaticprogress-value{width:32px!important;flex-grow:0;flex-shrink:0;font:400 10px/1 Gotham Pro,Proxima Nova,arial,serif;padding-left:6px;color:#67cb48}.cu-edit-task-custom-field-value__user-list-dropdown{width:100%}.cu-edit-task-custom-field-value__manual_progress{margin:0!important;flex-grow:1}.cu-edit-task-custom-field-value__manual_progress .noUi-horizontal{height:10px}.cu-edit-task-custom-field-value__manual_progress .noUi-horizontal .noUi-handle{width:16px;height:16px;left:auto!important;right:-8px!important;top:-4px;border-radius:50%;border:0;box-shadow:0 1px 3px 0 rgba(0,0,0,.5);cursor:pointer;background:#67cb48}.cu-edit-task-custom-field-value__manual_progress .noUi-horizontal .noUi-handle:after,.cu-edit-task-custom-field-value__manual_progress .noUi-horizontal .noUi-handle:before{display:none}.cu-edit-task-custom-field-value__manual_progress .noUi-horizontal .noUi-handle .noUi-tooltip{display:block;position:absolute;top:-8px;border:none;background:transparent;padding:0;text-align:center;white-space:nowrap;font:400 9px/1 Gotham Pro,Proxima Nova,arial,serif;color:#67cb48}.cu-edit-task-custom-field-value__manual_progress .noUi-connects{border-radius:5px;cursor:pointer}.cu-edit-task-custom-field-value__manual_progress .noUi-connects .noUi-connect{background:#67cb48}.cu-edit-task-custom-field-value__manual_progress .noUi-target{background:transparent;border-radius:5px;box-shadow:none;border:1px solid #67cb48}.cu-edit-task-custom-field-value__labels{display:flex;align-items:center;flex-wrap:wrap;height:auto}.cu-edit-task-custom-field-value__labels-placeholder{font-size:11px}.cu-edit-task-custom-field-value__labels-item{min-width:50px;height:20px;border-radius:3px;display:flex;align-items:center;padding:0 2px 0 6px;position:relative;margin:2px 4px 2px 0}.cu-edit-task-custom-field-value__labels-item:hover .cu-edit-task-custom-field-value__labels-remove{display:block}.cu-edit-task-custom-field-value__labels-item_white{border:1px solid #e4e4e4;background:#fff}.dark-theme .cu-edit-task-custom-field-value__labels-item_white{border:1px solid #1e272e;background-color:#2b343b!important}.dark-theme .cu-edit-task-custom-field-value__labels-item_white .cu-edit-task-custom-field-value__labels-item-text{color:#d5d6d7}.dark-theme .cu-edit-task-custom-field-value__labels-item_white .cu-edit-task-custom-field-value__labels-remove{stroke:#d5d6d7}.cu-edit-task-custom-field-value__labels-item_white .cu-edit-task-custom-field-value__labels-item-text{color:#343434}.cu-edit-task-custom-field-value__labels-item_white .cu-edit-task-custom-field-value__labels-remove{stroke:#343434}.cu-edit-task-custom-field-value__labels-item_light .cu-edit-task-custom-field-value__labels-item-text{color:#343434}.cu-edit-task-custom-field-value__labels-item_light .cu-edit-task-custom-field-value__labels-remove{stroke:#343434}.cu-edit-task-custom-field-value__labels-item-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1.2;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-task-custom-field-value__labels-item-text{font-family:var(--global-font-support)}}.cu-edit-task-custom-field-value__labels-item-text-dark{color:#000}.cu-edit-task-custom-field-value__labels-remove{display:none;width:12px;height:12px;stroke:#fff;padding:2px;position:absolute;right:4px}.cu-edit-task-custom-field-value__labels-remove_white{background:#fff}.dark-theme .cu-edit-task-custom-field-value__labels-remove_white{background-color:#2b343b!important}.cu-edit-task-custom-field-value__labels-remove-dark{background:#000}.cu-edit-task-custom-field-value__labels-remove-dark svg{fill:#000;stroke:#000}.cu-edit-task-custom-field-value__users{display:flex;align-items:center}.cu-edit-task-custom-field-value__users_centered{justify-content:center}.cu-edit-task-custom-field-value__users-placeholder{margin-right:10px}.cu-edit-task-custom-field-value__users .cu-user-group__more.cu-user-group__more_lg{width:30px;height:30px}.cu-edit-task-custom-field-value__emoji{display:flex;align-items:center}.cu-edit-task-custom-field-value__emoji-placeholder{margin-right:10px}.cu-edit-task-custom-field-value__error{display:flex;align-items:center;position:absolute;bottom:0;width:100%;background:#fff0f0;color:#d63e53;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;border-radius:3px;padding:6px;transform:translateY(100%);z-index:10}.cu-task-row .cu-edit-task-custom-field-value__error{left:0;bottom:auto;transform:translateX(-100%)}.cu-task-row .cu-telephone-input .cu-edit-task-custom-field-value__error{bottom:-5px;left:-43px}.cu-edit-task-custom-field-value__error-icon{fill:#d63e53;width:14px;height:12px;margin-right:3px}.cu-edit-task-custom-field-value__new-dropdown-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7c828d;background:transparent;display:flex;align-items:center;width:100%;height:32px;cursor:pointer;padding:0 12px;margin-bottom:8px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-edit-task-custom-field-value__new-dropdown-item{font-family:var(--global-font-support)}}.cu-edit-task-custom-field-value__new-dropdown-item span{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7c828d;font-weight:500}.cu-edit-task-custom-field-value__new-dropdown-item:hover{background:rgba(233,235,240,.5);color:var(--theme-main-color)}.dark-theme .cu-edit-task-custom-field-value__new-dropdown-item:hover{background:#2b343b}.cu-edit-task-custom-field-value__new-dropdown-item:hover span{color:var(--theme-main-color)}.cu-cusom-fields__form-input-resize-handle{position:absolute;z-index:2;bottom:0;right:0;width:0;height:0;border-color:#fff #fff #828588;border-style:solid;border-width:0 0 12px 12px;pointer-events:none}.dark-theme .cu-cusom-fields__form-input-resize-handle{border-color:#384047 #384047 #828588}.edit_longtext{max-width:800px}.edit_longtext:after{border:none}'],encapsulation:2,data:{animation:[v.e]},changeDetection:0}),e})()},Uo1z:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("fXoL"),n=i("dTHz"),s=i("uslN"),c=i("jJQC");function a(e,t){if(1&e&&(o.cc(0,"div",7),o.dd(1),o.bc()),2&e){const e=o.uc();o.Ib(1),o.fd(" ",e.warning," ")}}function r(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.cc(1,"cu-search-input",9),o.qc("onChange",function(t){return o.Uc(e),o.uc().searchQuery=t}),o.bc(),o.bc()}}function l(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-privacy-settings-shared-with",11),o.qc("changedOptions",function(i){o.Uc(e);const n=t.$implicit;return o.uc(2).changeParentUsers(n.parentItem.id,i,n.members)})("changeProtections",function(t){return o.Uc(e),o.uc(2).updateProtections(t)}),o.bc(),o.Zb()}if(2&e){const e=t.$implicit,i=o.uc(2);o.Ib(1),o.Dc("showHeader",!0)("showPermissionsOptions",!1)("item",i.item)("parentItemType",i.parentItemType)("parentTypeLabels",i.parentTypeLabels)("showPermissionsOnStart",!1)("showEditPrivacy",!1)("parentMembers",e.members)("searchQuery",i.searchQuery)("updating",!1)("parentItem",e.parentItem)("meUser",i.meUser)("teamPlan",i.teamPlan)("guestInfo",i.guestInfo)("upgradeLink",i.upgradeLink)("ownerId",i.ownerId)("maxPermissionLevel",i.maxPermissionLevel)("itemType",i.itemType)("protectionPermission",i.protectionPermission)("allowMultiOperations",i.allowMultiOperations)("getPermissionItems",i.getPermissionItems)("getBulkPermissionItems",i.getBulkPermissionItems)("team",i.team)}}function d(e,t){if(1&e&&(o.ac(0),o.bd(1,l,2,23,"ng-container",10),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngForOf",e.otherItems)("ngForTrackBy",e.trackById)}}function u(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-member-list",12),o.qc("removeItems",function(t){return o.Uc(e),o.uc().removeItems(t)})("changedOptions",function(t){return o.Uc(e),o.uc().updateItems(t)})("changeProtections",function(t){return o.Uc(e),o.uc().updateProtections(t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("members",e.members)("removable",!!("dashboard"!==e.itemType||null!=e.item&&e.item.private))("editable",!0)("title",e.memberListTitleText)("query",e.searchQuery)("limitedGuest",e.teamPlan===e.TeamPlan.FREE&&!(null!=e.guestInfo&&e.guestInfo.trial))("upgradeLink",e.upgradeLink)("meUser",e.meUser)("ownerId",e.ownerId)("maxPermissionLevel",e.maxPermissionLevel)("itemType",e.itemType)("protectionPermission",e.protectionPermission)("allowMultiOperations",e.allowMultiOperations)("getPermissionItems",e.getPermissionItems)}}function m(e,t){1&e&&o.Xb(0,"cu-loader")}function p(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-add-member-input",13),o.qc("inviteUsers",function(t){return o.Uc(e),o.uc().inviteUsers.emit(t)})("addUser",function(t){return o.Uc(e),o.uc().addUser.emit(t)})("addEmailLeads",function(t){return o.Uc(e),o.uc().addEmailLeads.emit(t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("canAddGuestsTeam",e.canAddGuestsTeam)("canAddGuestsTeamText",e.canAddGuestsTeamText)("allMembers",e.allMembers)("excludeIds",e.excludeIds)("guestInfo",e.guestInfo)("teamPlan",e.teamPlan)("upgradeLink",e.upgradeLink)("maxPermissionLevel",e.maxPermissionLevel)("itemType",e.itemType)("allowInvite",e.allowInvite)("getPermissionItems",e.getPermissionItems)("getMaxPermissionLevelOverride",e.getMaxPermissionLevel)("customRoles",e.customRoles)}}const h=["*"];let f=(()=>{class e{constructor(){this.TeamPlan=s.f,this.UserPermission=n.e,this.membersData={members:[],parentMembers:[]},this.allowEditPrivacy=!1,this.showEditPrivacy=!0,this.updating=!1,this.updatingBottom=!1,this.allowInvite=!0,this.allowAdd=!0,this.allowAddToPublic=!0,this.showPermissionsOnStart=!0,this.allowMultiOperations=!0,this.showSearch=!0,this.showHeader=!0,this.inviteUsers=new o.o,this.addUser=new o.o,this.removeUsers=new o.o,this.updateUsers=new o.o,this.changeProtections=new o.o,this.changePrivate=new o.o,this.addEmailLeads=new o.o,this.updateParentUsers=new o.o,this.excludeIds=[],this.searchQuery="",this.maxPermissionLevel=n.e.CREATE,this.parentTypeLabels={team:$localize`:@@common_workspace:Workspace`,project:$localize`:@@common_space:Space`,category:$localize`:@@common_folder:Folder`,subcategory:$localize`:@@common_list:List`,task:$localize`:@@common_task:Task`,goal:$localize`:@@common_goal:Goal`,folder:$localize`:@@common_folder:Folder`,view:$localize`:@@common_view:View`,dashboard:$localize`:@@common_dashboard:Dashboard`},this.trackById=Object(c.d)("id")}get memberListTitleText(){var e,t;if(this.members&&1===this.members.length&&this.item&&this.item.private)return $localize`:@@cu-privacy-settings__title_private-to-me:Private to me`;const i=null!==(t=null===(e=this.members)||void 0===e?void 0:e.length)&&void 0!==t?t:0;return 1===i?$localize`:@@cu-privacy-settings__title_invited-count:${i}:membersCount: invited person`:$localize`:@@cu-privacy-settings__title_invited-count-many:${i}:membersCount: invited people`}ngOnInit(){}ngOnChanges(e){if(e.membersData||e.meUser){const e=this.meUser&&this.membersData?[...this.membersData.members||[],...this.membersData.parentMembers].find(e=>e.user.id===this.meUser.id):null;this.members=this.membersData?this.membersData.members.map(t=>Object.assign(Object.assign({},t),{source:null,editable:!(t.role===n.f.OWNER&&"dashboard"===this.itemType||"dashboard"===this.itemType&&("dashboard"!==this.itemType||t.role===n.f.GUEST)||this.meUser&&t.user.id===this.meUser.id||t.user.id===this.ownerId||e&&!(e.permission_level>=t.permission_level)&&"view"!==this.itemType)})):[],this.parentMembers=this.membersData?this.membersData.parentMembers.map(t=>Object.assign(Object.assign({},t),{source:null,editable:("dashboard"!==this.itemType||"dashboard"===this.itemType&&t.role!==n.f.GUEST)&&(!this.meUser||t.user.id!==this.meUser.id)&&t.user.id!==this.ownerId&&(!e||e.permission_level>=t.permission_level||"view"===this.itemType)})):[],this.excludeIds=[...this.members,...this.parentMembers].map(e=>e.user.id),this.meUser&&-1===this.excludeIds.indexOf(this.meUser.id)&&this.excludeIds.push(this.meUser.id),this.maxPermissionLevel="view"===this.itemType?n.e.CREATE:(e?e.permission_level:null)||n.e.CREATE}}removeItems(e){this.removeUsers.emit(e.map(e=>e.user.id))}updateItems(e){this.updateUsers.emit(e)}updateProtections(e){this.changeProtections.emit(e)}makePrivate(e){this.allowEditPrivacy&&this.changePrivate.emit(e)}changeParentUsers(e,t,i){this.otherItems=this.otherItems.map(i=>i.parentItem.id===e?Object.assign(Object.assign({},i),{members:i.members.map(e=>{const i=t.find(t=>t.member.user.id===e.user.id);return i?Object.assign(Object.assign({},e),{permission_level:i.permission}):e})}):i),this.updateParentUsers.emit({parentId:e,changes:t,members:i})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-privacy-settings"]],inputs:{item:"item",parentItem:"parentItem",itemType:"itemType",parentItemType:"parentItemType",meUser:"meUser",ownerId:"ownerId",allMembers:"allMembers",membersData:"membersData",guestInfo:"guestInfo",teamPlan:"teamPlan",upgradeLink:"upgradeLink",allowEditPrivacy:"allowEditPrivacy",showEditPrivacy:"showEditPrivacy",warning:"warning",updating:"updating",updatingBottom:"updatingBottom",allowInvite:"allowInvite",allowAdd:"allowAdd",allowAddToPublic:"allowAddToPublic",showPermissionsOnStart:"showPermissionsOnStart",getPermissionItems:"getPermissionItems",getBulkPermissionItems:"getBulkPermissionItems",allowMultiOperations:"allowMultiOperations",getMaxPermissionLevel:"getMaxPermissionLevel",editPrivacyTooltip:"editPrivacyTooltip",showSearch:"showSearch",showHeader:"showHeader",protectionPermission:"protectionPermission",canAddGuestsTeam:"canAddGuestsTeam",canAddGuestsTeamText:"canAddGuestsTeamText",customRoles:"customRoles",view:"view",team:"team",otherItems:"otherItems"},outputs:{inviteUsers:"inviteUsers",addUser:"addUser",removeUsers:"removeUsers",updateUsers:"updateUsers",changeProtections:"changeProtections",changePrivate:"changePrivate",addEmailLeads:"addEmailLeads",updateParentUsers:"updateParentUsers"},features:[o.Gb],ngContentSelectors:h,decls:9,vars:30,consts:function(){let e;return e=$localize`:@@cu-privacy-settings__form-placeholder_filter-people␟f6b203d09b12b5f05d38578b109492ec8b0120be␟3119201307671575362:Filter people...`,[[1,"cu-privacy-settings"],["class","cu-privacy-settings__warning",4,"ngIf"],["class","cu-privacy-settings__filter",4,"ngIf"],[3,"showHeader","item","parentItemType","parentTypeLabels","allowEditPrivacy","editPrivacyTooltip","showPermissionsOnStart","showEditPrivacy","parentMembers","searchQuery","updating","parentItem","meUser","teamPlan","guestInfo","upgradeLink","ownerId","maxPermissionLevel","itemType","protectionPermission","allowMultiOperations","getPermissionItems","getBulkPermissionItems","team","makePrivate","changedOptions","changeProtections"],[4,"ngIf"],["class","cu-privacy-settings__members-invite",3,"members","removable","editable","title","query","limitedGuest","upgradeLink","meUser","ownerId","maxPermissionLevel","itemType","protectionPermission","allowMultiOperations","getPermissionItems","removeItems","changedOptions","changeProtections",4,"ngIf"],["class","cu-privacy-settings__add-user",3,"canAddGuestsTeam","canAddGuestsTeamText","allMembers","excludeIds","guestInfo","teamPlan","upgradeLink","maxPermissionLevel","itemType","allowInvite","getPermissionItems","getMaxPermissionLevelOverride","customRoles","inviteUsers","addUser","addEmailLeads",4,"ngIf"],[1,"cu-privacy-settings__warning"],[1,"cu-privacy-settings__filter"],["placeholder",e,3,"onChange"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"showHeader","showPermissionsOptions","item","parentItemType","parentTypeLabels","showPermissionsOnStart","showEditPrivacy","parentMembers","searchQuery","updating","parentItem","meUser","teamPlan","guestInfo","upgradeLink","ownerId","maxPermissionLevel","itemType","protectionPermission","allowMultiOperations","getPermissionItems","getBulkPermissionItems","team","changedOptions","changeProtections"],[1,"cu-privacy-settings__members-invite",3,"members","removable","editable","title","query","limitedGuest","upgradeLink","meUser","ownerId","maxPermissionLevel","itemType","protectionPermission","allowMultiOperations","getPermissionItems","removeItems","changedOptions","changeProtections"],[1,"cu-privacy-settings__add-user",3,"canAddGuestsTeam","canAddGuestsTeamText","allMembers","excludeIds","guestInfo","teamPlan","upgradeLink","maxPermissionLevel","itemType","allowInvite","getPermissionItems","getMaxPermissionLevelOverride","customRoles","inviteUsers","addUser","addEmailLeads"]]},template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0),o.bd(1,a,2,1,"div",1),o.bd(2,r,2,0,"div",2),o.cc(3,"cu-privacy-settings-shared-with",3),o.qc("makePrivate",function(e){return t.makePrivate(e)})("changedOptions",function(e){return t.updateItems(e)})("changeProtections",function(e){return t.updateProtections(e)}),o.bc(),o.bd(4,d,2,2,"ng-container",4),o.bd(5,u,1,14,"cu-member-list",5),o.Bc(6),o.bd(7,m,1,0,"cu-loader",4),o.bd(8,p,1,13,"cu-add-member-input",6),o.bc()),2&e&&(o.Ib(1),o.Dc("ngIf",t.warning),o.Ib(1),o.Dc("ngIf",t.showSearch),o.Ib(1),o.Dc("showHeader",t.showHeader)("item",t.item)("parentItemType",t.parentItemType)("parentTypeLabels",t.parentTypeLabels)("allowEditPrivacy",t.allowEditPrivacy)("editPrivacyTooltip",t.editPrivacyTooltip)("showPermissionsOnStart",t.showPermissionsOnStart)("showEditPrivacy",t.showEditPrivacy)("parentMembers",t.parentMembers)("searchQuery",t.searchQuery)("updating",t.updating)("parentItem",t.parentItem)("meUser",t.meUser)("teamPlan",t.teamPlan)("guestInfo",t.guestInfo)("upgradeLink",t.upgradeLink)("ownerId",t.ownerId)("maxPermissionLevel",t.maxPermissionLevel)("itemType",t.itemType)("protectionPermission",t.protectionPermission)("allowMultiOperations",t.allowMultiOperations)("getPermissionItems",t.getPermissionItems)("getBulkPermissionItems",t.getBulkPermissionItems)("team",t.team),o.Ib(1),o.Dc("ngIf",t.otherItems),o.Ib(1),o.Dc("ngIf",(null==t.members?null:t.members.length)>0),o.Ib(2),o.Dc("ngIf",t.updatingBottom),o.Ib(1),o.Dc("ngIf",(t.allowAddToPublic||(null==t.item?null:t.item.private))&&t.allowAdd&&!t.updatingBottom))},styles:['.cu-privacy-settings{display:block}.cu-privacy-settings__warning{background:#dfdbfb;margin:0 0 20px;padding:12px;border-radius:3px;text-align:center}@supports (--theme-main-color-light:#dfdbfb){.cu-privacy-settings__warning{background:var(--theme-main-color-light)}}.dark-theme .cu-privacy-settings__warning{color:#343434}.cu-privacy-settings__filter{margin-bottom:20px}.cu-privacy-settings__header{display:flex;align-items:center;margin-bottom:20px}.cu-privacy-settings__summary{flex-grow:1;display:flex;align-items:center;min-width:0}.cu-privacy-settings__summary-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:600;font-size:13px;margin-right:10px;display:flex;align-items:center;min-width:0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-privacy-settings__summary-text{font-family:var(--global-font-support)}}.cu-privacy-settings__summary-shared{border-radius:3px;padding:4px 5px;margin:0 4px;border:1px solid #d8d8d8;display:inline-flex;min-width:0}.dark-theme .cu-privacy-settings__summary-shared{border-color:#1e272e}.cu-privacy-settings__summary-shared-type{font-weight:500;font-size:11px;text-transform:uppercase;margin:2px 3px 0;opacity:.5}.cu-privacy-settings__summary-shared-name{font-weight:500;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:1px 0 1px 5px}.cu-privacy-settings__summary-shared-count{font-weight:500;font-size:11px;opacity:.7;padding:1px 0 0 5px;border-left:1px solid #d8d8d8;margin-left:7px;white-space:nowrap}.cu-privacy-settings__summary-entity{border-radius:3px;padding:3px 7px;margin:0 4px;border:1px solid #d8d8d8;display:inline-flex}.cu-privacy-settings__summary-permission{border-bottom:1px dotted #343434;cursor:pointer;margin-left:15px}.dark-theme .cu-privacy-settings__summary-permission{border-bottom:1px dotted #d5d6d7}.cu-privacy-settings__private{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;cursor:pointer;border:1px solid;padding:5px 9px;border-radius:3px;flex-shrink:0}@supports (--theme-main-color:#7b68ee){.cu-privacy-settings__private{border-color:var(--theme-main-color)}}.cu-privacy-settings__private:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-privacy-settings__private:hover{background:var(--theme-main-color)}}.cu-privacy-settings__private:hover .cu-privacy-settings__private-text{color:#fff}.cu-privacy-settings__private:hover .cu-privacy-settings__private-icon{stroke:#fff;fill:#fff}.cu-privacy-settings__private_disabled{cursor:not-allowed;opacity:.8}.cu-privacy-settings__private-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-privacy-settings__private-text{font-family:var(--global-font-support)}}@supports (--theme-main-color:#7b68ee){.cu-privacy-settings__private-text{color:var(--theme-main-color)}}.cu-privacy-settings__private-icon{stroke:#7b68ee;fill:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:10px;height:11px;margin:-1px 5px 0 0}@supports (--theme-main-color:#7b68ee){.cu-privacy-settings__private-icon{stroke:var(--theme-main-color);fill:var(--theme-main-color)}}.cu-privacy-settings__members-invite{display:block;margin:25px 0 0}.cu-privacy-settings__add-user{background:#f5f5f5;border-top:1px solid #ccc;margin:0 -50px -50px;padding:0 50px;display:block}.dark-theme .cu-privacy-settings__add-user{background:#2b343b;border-top:1px solid #1e272e;color:#d5d6d7}.cu-privacy-modal__header{margin-top:-40px;margin-bottom:20px}.cu-privacy-modal__header-type{background:#7b68ee;display:inline-flex;align-items:center;border-radius:3px;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;padding:4px 6px;transform:translateY(-3px);color:#fff;margin-left:7px}@supports (--theme-main-color:#7b68ee){.cu-privacy-modal__header-type{background:var(--theme-main-color)}}.dark-theme .cu-privacy-modal__header-type{color:#d5d6d7}.cu-privacy-modal__header-type-icon{width:14px;height:14px;margin-right:6px;fill:#fff;stroke:#fff;stroke-width:2px;flex-shrink:0;position:relative}.dark-theme .cu-privacy-modal__header-type-icon{fill:#d5d6d7;stroke:#d5d6d7}.cu-privacy-modal__header-type-icon-favicon{background-size:contain;background-position:50%;height:100%;width:100%}.cu-privacy-modal__header-type-icon_no-stroke,.dark-theme .cu-privacy-modal__header-type-icon_no-stroke{stroke:transparent}.cu-privacy-modal__header-type-icon_no-fill,.dark-theme .cu-privacy-modal__header-type-icon_no-fill{fill:transparent}'],encapsulation:2,changeDetection:0}),e})()},UqWe:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("7EGn"),n=i("fXoL");let s=(()=>{class e{transform(e,t){return(e||[]).map(e=>Object(o.a)(e,t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"pluckFromArray",type:e,pure:!0}),e})()},"V/md":function(e,t,i){e.exports=i.p+"record-videos.4479e630145059263c12.png"},V1MX:function(e,t,i){"use strict";i.d(t,"a",function(){return C});var o=i("jJQC"),n=i("2Vo4"),s=i("lJxs"),c=i("IzEk"),a=i("fXoL"),r=i("4bgU"),l=i("TqRa"),d=i("c3rA"),u=i("Jf2N"),m=i("jJW4"),p=i("tyNb"),h=i("l7P3"),f=i("O5gs"),b=i("ofXK"),g=i("UdVN"),_=i("WoFS");const v=["dropdown"];function k(e,t){if(1&e&&(a.cc(0,"div",5),a.cc(1,"div",6),a.mc(2,7),a.Xb(3,"span"),a.jc(),a.bc(),a.Xb(4,"div",8),a.bc()),2&e){const e=a.uc();a.Ob("cu-points-estimates__public",e.isSharingApp),a.Ib(3),a.kc(e.points||"-"),a.hc(2)}}function y(e,t){1&e&&a.Yb(0)}function w(e,t){if(1&e){const e=a.dc();a.cc(0,"div",9),a.cc(1,"cu-checkbox",10),a.qc("onChange",function(){a.Uc(e);const t=a.uc();return t.setAll=!t.setAll}),a.gc(2,11),a.bc(),a.bc(),a.bd(3,y,1,0,"ng-container",12)}if(2&e){const e=a.uc(),t=a.Rc(8);a.Ib(1),a.Dc("checked",e.setAll),a.Ib(2),a.Dc("ngTemplateOutlet",t)}}function x(e,t){if(1&e){const e=a.dc();a.cc(0,"a",14),a.qc("click",function(t){return a.Uc(e),a.uc(2).navigateToSprintPointsApp(t)}),a.gc(1,15),a.bc()}}function I(e,t){if(1&e&&(a.bd(0,x,2,0,"a",13),a.vc(1,"async")),2&e){const e=a.uc();a.Dc("ngIf",a.wc(1,1,e.isAdmin$))}}const T=["*"];let C=(()=>{class e{constructor(e,t,i,s,c){this.cdr=e,this.modalService=t,this.sharedData=i,this.router=s,this.store=c,this.pointItems$=new n.a([]),this.setAll=!1,this.showAllOption=!1,this.showNormalDisplay=!0,this.readonly=!1,this.onPointsEstimatesAction=new a.o,this.onClose=new a.o,this.onOpen=new a.o,this.isAdmin$=this.store.select(d.getIsAdmin),this.project$=this.store.select(d.getProject),this.trackById=Object(o.d)("id"),this.isSharingApp=l.k}ngOnInit(){}ngOnChanges(e){if(e.availablePoints||e.points){const e=(this.availablePoints||[]).map(e=>({id:e,title:e.toString(),checkType:"check",checked:e===this.points}));e.unshift({id:0,title:"-",checkType:"check",checked:!this.points}),this.pointItems$.next(e)}this.sharedData.compatCurrentTeam$.pipe(Object(s.a)(e=>[e.id,"settings","team",e.id,"clickapps"]),Object(c.a)(1)).subscribe(e=>this.link=e)}opened(){this.task&&!this.showNormalDisplay&&this.onPointsEstimatesAction.emit({action:r.a.FetchTaskPointsEstimatesData,task:this.task})}selectPoints(e){this.points=e.id,this.cdr.markForCheck(),this.onPointsEstimatesAction.emit(this.user||this.group?{action:r.a.UpdateTaskAssigneePointsEstimates,task:this.task,user:this.user,group:this.group,points:e.id,setAll:this.setAll}:{action:r.a.UpdateTaskPointsEstimates,task:this.task,points:e.id})}reset(){setTimeout(()=>this.setAll=!1)}open(){this.dropdown.open()}close(){this.dropdown.close()}navigateToSprintPointsApp(e){e.preventDefault(),e.stopPropagation(),this.router.navigate(this.link,{queryParams:{search:"Sprint Points"}})}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.h),a.Wb(u.a),a.Wb(m.a),a.Wb(p.h),a.Wb(h.Store))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-points-estimates"]],viewQuery:function(e,t){if(1&e&&a.jd(v,3),2&e){let e;a.Qc(e=a.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-points-estimates"],inputs:{points:"points",availablePoints:"availablePoints",task:"task",user:"user",group:"group",showAllOption:"showAllOption",showNormalDisplay:"showNormalDisplay",readonly:"readonly",fromPoint:"fromPoint"},outputs:{onPointsEstimatesAction:"onPointsEstimatesAction",onClose:"onClose",onOpen:"onOpen"},features:[a.Gb],ngContentSelectors:T,decls:9,vars:11,consts:function(){let e,t,i;return e=$localize`:@@cu-points-estimates__point-estimate-count␟f868ce684bc3df78998539481e166362994bff54␟8220825180160200803: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#3\ufffd"}:START_TAG_SPAN:pt${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,t=$localize`:@@cu-points-estimates__form-label_set-all␟99e07d8c3cd6402c5604dacbcd78a9a9f4854eb2␟2346209680830009618: Set all `,i=$localize`:@@cu-points-estimates__clickapp-settings␟e5ffbe191da8ed6e43bc71221ff84e304701ad17␟5265589326457140930: Sprint Point Settings `,[[3,"dropdownDisabled","items","footerTemplate","autoClose","handleKeyboard","showSearch","autoFocusSearch","fromPoint","onSelect","onClose","onOpen"],["dropdown",""],["class","cu-points-estimates__toggle",3,"cu-points-estimates__public",4,"ngIf"],["footerTemplate",""],["footerQuickEditTemplate",""],[1,"cu-points-estimates__toggle"],[1,"cu-points-estimates__toggle-points"],e,["icon","arrow-down",1,"cu-points-estimates__toggle-arrow"],[1,"cu-points-estimates__all"],[3,"checked","onChange"],t,[4,"ngTemplateOutlet"],["class","cu-points-estimates__edit",3,"click",4,"ngIf"],[1,"cu-points-estimates__edit",3,"click"],i]},template:function(e,t){if(1&e&&(a.Cc(),a.cc(0,"cu-dropdown-list",0,1),a.qc("onSelect",function(e){return t.selectPoints(e)})("onClose",function(){return t.reset(),t.onClose.emit()})("onOpen",function(){return t.opened(),t.onOpen.emit()}),a.vc(2,"async"),a.Bc(3),a.bd(4,k,5,3,"div",2),a.bc(),a.bd(5,w,4,2,"ng-template",null,3,a.cd),a.bd(7,I,2,3,"ng-template",null,4,a.cd)),2&e){const e=a.Rc(6),i=a.Rc(8);a.Dc("dropdownDisabled",t.readonly||t.isSharingApp)("items",a.wc(2,9,t.pointItems$))("footerTemplate",t.showAllOption?e:i)("autoClose",!1)("handleKeyboard",!0)("showSearch",!0)("autoFocusSearch",!0)("fromPoint",t.fromPoint),a.Ib(4),a.Dc("ngIf",t.showNormalDisplay)}},directives:[f.a,b.q,g.a,_.a,b.x],pipes:[b.b],styles:['.cu-points-estimates__toggle{display:flex;align-items:center;width:80px;height:34px;padding:0 8px;border-radius:4px;border:1px solid #e9ebf0}.dark-theme .cu-points-estimates__toggle{border-color:#1e272e}.cu-points-estimates__toggle:hover:not(.cu-points-estimates__public) .cu-points-estimates__toggle-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-points-estimates__toggle:hover:not(.cu-points-estimates__public) .cu-points-estimates__toggle-arrow{fill:var(--theme-main-color)}}.cu-points-estimates__toggle-points{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-points-estimates__toggle-points{color:#d5d6d7}.cu-points-estimates__toggle-points span{font:300 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#b9bec7}.dark-theme .cu-points-estimates__toggle-points span{color:#828588}.cu-points-estimates__toggle-arrow{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:auto;width:9px;height:7px;fill:#292d34}.dark-theme .cu-points-estimates__toggle-arrow{fill:#d5d6d7}.cu-points-estimates .cu-dropdown_open .cu-points-estimates__toggle-arrow{transform:rotate(180deg)}.cu-points-estimates__all{padding:5px}.cu-points-estimates__edit{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;color:var(--theme-main-color);height:32px;display:inline-flex;align-items:center;padding:0 12px;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-points-estimates__edit{font-family:var(--global-font-support)}}.cu-points-estimates__edit:hover{text-decoration:underline}'],encapsulation:2,changeDetection:0}),e})()},V2dv:function(e,t,i){e.exports=i.p+"reschedule-dependencies.572b2398cb23da06068f.png"},V3nW:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("fXoL"),n=i("XNiG"),s=i("pLZG"),c=i("1G5W"),a=i("Wxa1"),r=i("jJW4"),l=i("ofXK"),d=i("UdVN"),u=i("7Jxm");const m=["fileInput"];function p(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.qc("click",function(){return o.Uc(e),o.uc().badgeClicked()}),o.Xb(1,"div",12),o.cc(2,"div",13),o.dd(3),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.ed(e.attachmentsLength)}}function h(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.qc("click",function(){return o.Uc(e),o.uc().onRelationshipsBadgeClick.emit()}),o.Xb(1,"div",12),o.cc(2,"div",13),o.dd(3),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.ed(e.relationshipsLength)}}let f=(()=>{class e{constructor(e,t){this.attachmentsService=e,this.sharedData=t,this.destroy$=new n.a,this.attachmentsLength=0,this.relationshipsLength=0,this.badgeVisible=!1,this.relationshipsBadgeVisible=!1,this.onBadgeClick=new o.o,this.onRelationshipsBadgeClick=new o.o,this.onFilesAdded=new o.o}ngOnInit(){this.attachmentsService.onBrowserFile.pipe(Object(s.a)(e=>e===this.uniqueId),Object(c.a)(this.destroy$)).subscribe(()=>this.openDialog())}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}addFiles(e){this.onFilesAdded.emit(e)}badgeClicked(){this.onBadgeClick.emit()}openDialog(){const e=new MouseEvent("click",{bubbles:!1});this.fileInput.nativeElement.dispatchEvent(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a.a),o.Wb(r.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-uploader-bar"]],viewQuery:function(e,t){if(1&e&&o.jd(m,3),2&e){let e;o.Qc(e=o.rc())&&(t.fileInput=e.first)}},inputs:{attachmentsLength:"attachmentsLength",relationshipsLength:"relationshipsLength",badgeVisible:"badgeVisible",relationshipsBadgeVisible:"relationshipsBadgeVisible",uniqueId:"uniqueId"},outputs:{onBadgeClick:"onBadgeClick",onRelationshipsBadgeClick:"onRelationshipsBadgeClick",onFilesAdded:"onFilesAdded"},decls:12,vars:2,consts:function(){let e,t;return e=$localize`:@@cu-uploader-bar__text__file-drop␟e9635fea3582189a35504a06756279437fe8db21␟3806809859629717051: Drop files here to attach or `,t=$localize`:@@common_browse-2␟b998a2664a5b7d2d5f01922ca6658c622836f650␟2240639463690490073:browse`,[[1,"task-uploader"],[1,"task-uploads-badge__container-left"],["class","task-uploads-badge",3,"click",4,"ngIf"],["icon","upload",1,"task-uploader__icon"],[1,"task-uploader__text"],e,["cuLinkUploader","",1,"task-uploader__form",3,"fileAdded"],["cuLink","",1,"task-uploader__link"],t,["type","file","multiple","",1,"task-uploader__input"],["fileInput",""],[1,"task-uploads-badge",3,"click"],["icon","paperclip",1,"task-uploads-badge__icon"],[1,"task-uploads-badge__counter"]]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.bd(2,p,4,1,"div",2),o.bd(3,h,4,1,"div",2),o.bc(),o.Xb(4,"div",3),o.cc(5,"div",4),o.gc(6,5),o.bc(),o.cc(7,"div",6),o.qc("fileAdded",function(e){return t.addFiles(e)}),o.cc(8,"a",7),o.gc(9,8),o.bc(),o.Xb(10,"input",9,10),o.bc(),o.bc()),2&e&&(o.Ib(2),o.Dc("ngIf",t.attachmentsLength&&t.badgeVisible),o.Ib(1),o.Dc("ngIf",t.relationshipsLength&&t.relationshipsBadgeVisible))},directives:[l.q,d.a,u.a],encapsulation:2,changeDetection:0}),e})()},VI01:function(e,t,i){"use strict";i.d(t,"c",function(){return o}),i.d(t,"d",function(){return n}),i.d(t,"a",function(){return s}),i.d(t,"b",function(){return c});var o=function(e){return e[e.None=0]="None",e[e.Recur=1]="Recur",e[e.RecurNext=2]="RecurNext",e[e.Hours=3]="Hours",e[e.Days=4]="Days",e[e.Weeks=5]="Weeks",e}({});const n={YEARLY:0,MONTHLY:1,WEEKLY:2,DAILY:3},s={everything:!0,content:!0,attachments:!0,comment_attachments:!0,subtasks:!0,assigned_comment:!0,old_assignees:!0,old_subtask_assignees:!0,old_followers:!0,old_tags:!0,old_checklists:!0,custom_fields:!0},c={empty:!0,type:"SCHEDULE",action:"UPDATE",freq:n.DAILY,interval:1,end:0,byDays:[],copy:Object.assign({},s),skipMissed:!0,recurImmediately:!0,setDueDate:!0}},VPvi:function(e,t,i){"use strict";i.d(t,"a",function(){return k});var o=i("ciU8"),n=i("ofXK"),s=i("38Di"),c=i("X5rV"),a=i("VBI8"),r=i("a5Nn"),l=i("zBTC"),d=i("FLRT"),u=i("+iQC"),m=i("EHXF"),p=i("Gguj"),h=i("gb9A"),f=i("K0KF"),b=i("csDc"),g=i("dzSB"),_=i("prfv"),v=i("fXoL");let k=(()=>{class e{}return e.\u0275mod=v.Ub({type:e}),e.\u0275inj=v.Tb({factory:function(t){return new(t||e)},imports:[[n.c,h.a,f.a,b.a,g.a,s.a,c.a,a.a,r.a,l.a,d.a,u.a,m.a,o.a,p.a,_.a]]}),e})()},VRSw:function(e,t,i){"use strict";var o=i("1iAE"),n=i("afWh"),s=i("TjP8").tag;e.exports=r,r.locator=n;var c=/^<a /i,a=/^<\/a>/i;function r(e,t,i){var n,r,l=t.length;if(!("<"!==t.charAt(0)||l<3)&&(n=t.charAt(1),(o(n)||"?"===n||"!"===n||"/"===n)&&(r=t.match(s))))return!!i||(r=r[0],!this.inLink&&c.test(r)?this.inLink=!0:this.inLink&&a.test(r)&&(this.inLink=!1),e(r)({type:"html",value:r}))}},"VSQ+":function(e,t,i){"use strict";e.exports=function(e,t){var i,n=o.length,s=-1,c=-1;if(!this.options.gfm)return-1;for(;++s<n;)-1!==(i=e.indexOf(o[s],t))&&(i<c||-1===c)&&(c=i);return c};var o=["https://","http://","mailto:"]},Vdkl:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("HDdC"),n=i("Cfvw"),s=i("EY2u"),c=i("pLZG"),a=i("PZkE"),r=i("eIep"),l=i("lJxs"),d=i("5+tZ"),u=i("TqRa"),m=i("fXoL"),p=i("AeD3"),h=i("jJW4");let f=(()=>{class e{constructor(e,t){this.dataService=e,this.sharedData=t,this.dropboxLoaded=!1,this.dropboxUrl="https://www.dropbox.com/static/api/2/dropins.js",this.appKey="04hnncyjkanubu2",u.k||(this.loadDropbox().subscribe(()=>{this.dropboxLoaded=!0}),this.sharedData.compatCurrentTeam$.pipe(Object(c.a)(e=>Boolean(e&&e.id)),Object(a.a)("id"),Object(r.a)(e=>this.loadTeamTokens(e.id))).subscribe())}get idToken(){return this.tokenValue?this.tokenValue.token_id:null}get token(){return this.tokenValue}loadTeamTokens(e){return this.dataService.getDropboxAuthedUsers(e).pipe(Object(l.a)(e=>e&&e.tokens&&e.tokens.length>0?(this.tokenValue=e.tokens[0],this.tokenValue.date=new Date,this.tokenValue):null))}openPicker(){return new o.a(e=>{this.dropboxLoaded?Dropbox.choose({success(t){e.next(t),e.complete()},cancel(){e.complete()},linkType:"preview",multiselect:!0,folderselect:!0}):e.complete()})}addDropboxFile(e,t,i){return this.dropboxLoaded?this.openPicker().pipe(Object(c.a)(e=>e&&e.length>0),Object(r.a)(e=>Object(n.a)(e)),Object(d.a)(o=>this.dataService.dropboxAddAttachment(this.prepareDropboxPayload(o,e,t,i)))):s.a}prepareDropboxPayload(e,t,i,o){return{title:e.name,type:i,parent:t,token_id:this.idToken,file_id:e.id,url:e.link,is_folder:e.isDir,permanent:o}}loadDropbox(){return new o.a(e=>{const t=document.createElement("script");t.src=this.dropboxUrl,t.type="text/javascript",t.id="dropboxjs",t.setAttribute("data-app-key",this.appKey),document.getElementsByTagName("head")[0].appendChild(t),t.onload=()=>{e.next(!0),e.complete()}})}}return e.\u0275fac=function(t){return new(t||e)(m.nc(p.a),m.nc(h.a))},e.\u0275prov=m.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},VhLi:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("oy6Y");let s=(()=>{class e{constructor(e){this.timezonesService=e}transform(e,t,i=!1,o=!1){return e&&t?("string"==typeof e&&(e=parseInt(e,10)),o&&(t=t.toUpperCase()),this.timezonesService.formatDateTime(e,t,i)):""}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a))},e.\u0275pipe=o.Vb({name:"momentDate",type:e,pure:!0}),e})()},Vsk3:function(e,t,i){e.exports=i.p+"docs-home.1d289a4ea065ae8b78bd.png"},"W//M":function(e,t,i){"use strict";i.d(t,"a",function(){return q});var o=i("nLWA"),n=i("KX9h"),s=i("fXoL"),c=i("XNiG"),a=i("2Vo4"),r=i("lJxs"),l=i("1G5W"),d=i("LdyQ"),u=i("ofXK"),m=i("MJvn"),p=i("n+1/"),h=i("UdVN"),f=i("EDFS"),b=i("3LUv"),g=i("NQa4"),_=i("8it8"),v=i("HPyy"),k=i("EP2k");let y=(()=>{class e{constructor(e){this.commonStringsService=e,this.debounceTime=250,this.onTimeEstimateAction=new s.o,this.onClose=new s.o}ngOnInit(){}updateTotalTime(e){this.onTimeEstimateAction.emit({action:o.b.UpdateAssigneeTimeEstimate,estimate:e,user:this.assignee.user})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(_.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-time-estimate-assignee"]],hostAttrs:[1,"cu-time-estimate-assignee"],inputs:{assignee:"assignee",team:"team",debounceTime:"debounceTime"},outputs:{onTimeEstimateAction:"onTimeEstimateAction",onClose:"onClose"},decls:6,vars:11,consts:[[1,"cu-time-estimate-assignee__user"],[3,"user","modifier"],[1,"cu-time-estimate-assignee__user-name"],[3,"value","team","emitOnBlur","autoFocus","debounceTime","onChange","onClose"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.Xb(1,"cu-avatar",1),s.cc(2,"div",2),s.dd(3),s.vc(4,"username"),s.bc(),s.bc(),s.cc(5,"cu-task-time-estimate-input",3),s.qc("onChange",function(e){return t.updateTotalTime(e)})("onClose",function(){return t.onClose.emit()}),s.bc()),2&e&&(s.Ib(1),s.Dc("user",null==t.assignee?null:t.assignee.user)("modifier","cu-avatar_28"),s.Ib(2),s.fd(" ",s.xc(4,8,null==t.assignee?null:t.assignee.user,t.commonStringsService.meText)," "),s.Ib(2),s.Dc("value",null==t.assignee?null:t.assignee.time)("team",t.team)("emitOnBlur",!0)("autoFocus",!1)("debounceTime",t.debounceTime))},directives:[v.a,b.a],pipes:[k.a],styles:[".cu-time-estimate-assignee{display:flex;align-items:center;justify-content:space-between}.cu-time-estimate-assignee+.cu-time-estimate-assignee{margin-top:10px}.cu-time-estimate-assignee__user{display:flex;align-items:center;margin-right:10px;min-width:0}.cu-time-estimate-assignee__user-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:10px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-time-estimate-assignee__user-name{color:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})();var w=i("WoFS"),x=i("loh9");const I=["dropdown"],T=["taskTimeEstimateInput"],C=["toggle"],D=["timeInputted"];function O(e,t){if(1&e){const e=s.dc();s.ac(0),s.gc(1,24),s.Zb(),s.cc(2,"a",25),s.qc("click",function(){return s.Uc(e),s.uc(),s.Rc(8).hide()}),s.gc(3,26),s.bc()}}function S(e,t){if(1&e&&(s.cc(0,"div",27),s.gc(1,28),s.bc()),2&e){const e=s.uc(2);s.Ib(1),s.kc(null==e.team?null:e.team.hours_per_day),s.hc(1)}}const E=function(e,t){return["/",e,"settings","team",t,"clickapps"]};function P(e,t){if(1&e){const e=s.dc();s.ac(0),s.mc(1,29),s.cc(2,"a",30),s.qc("click",function(){return s.Uc(e),s.uc(),s.Rc(8).hide()}),s.bc(),s.jc(),s.Zb()}if(2&e){const e=s.uc(2);s.Ib(2),s.Dc("cuLink",s.Ic(1,E,(null==e.team?null:e.team.id)||"",(null==e.team?null:e.team.id)||""))}}function j(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-time-estimate-assignee",36),s.qc("onTimeEstimateAction",function(t){return s.Uc(e),s.uc(4).updateAssignee(t)})("onClose",function(){return s.Uc(e),s.uc(4).save()}),s.bc()}if(2&e){const e=t.$implicit,i=s.uc(4);s.Dc("assignee",e)("team",i.team)("debounceTime",i.debounceTime)}}function A(e,t){if(1&e&&(s.cc(0,"div",32),s.cc(1,"div",33),s.gc(2,34),s.bc(),s.bd(3,j,1,3,"cu-time-estimate-assignee",35),s.bc()),2&e){const e=s.uc(3);s.Ib(3),s.Dc("ngForOf",e.assignees)("ngForTrackBy",e.trackByAssigneeData)}}function $(e,t){if(1&e&&(s.ac(0),s.bd(1,A,4,2,"div",31),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",(null==e.team?null:e.team.estimates_per_assignee)&&(null==e.assignees?null:e.assignees.length)>1)}}function U(e,t){if(1&e){const e=s.dc();s.cc(0,"div",37),s.cc(1,"div",38),s.gc(2,39),s.bc(),s.cc(3,"div",40),s.gc(4,41),s.bc(),s.cc(5,"div",42),s.cc(6,"cu-checkbox",43),s.qc("onChange",function(){return s.Uc(e),s.uc(2).updateUser()}),s.gc(7,44),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(6),s.Dc("checked",e.user.seen_time_estimate_warning)}}function R(e,t){if(1&e){const e=s.dc();s.cc(0,"div",45),s.cc(1,"div",46),s.gc(2,47),s.bc(),s.cc(3,"div",48,11),s.qc("click",function(){return s.Uc(e),s.Rc(4).toggle()}),s.dd(5),s.vc(6,"timeTracked"),s.bc(),s.bc()}if(2&e){s.uc();const e=s.Rc(14),t=s.uc();s.Ob("cu-time-estimate-dropdown__footer-rolled_display",t.rolledUpEstimate),s.Ib(3),s.Dc("popover",e)("outsideClick",!0),s.Ib(2),s.fd(" ",s.zc(6,5,t.rolledUpEstimate,null==t.team?null:t.team.hours_per_day,!1,null==t.team?null:t.team.time_estimate_display_hours)," ")}}function M(e,t){if(1&e){const e=s.dc();s.cc(0,"div",49),s.qc("click",function(){return s.Uc(e),s.uc(2).cancel()}),s.gc(1,50),s.bc()}}function F(e,t){if(1&e){const e=s.dc();s.cc(0,"div",5),s.bd(1,O,4,0,"ng-template",null,6,s.cd),s.cc(3,"div",7),s.cc(4,"div",8),s.ac(5),s.gc(6,9),s.Zb(),s.cc(7,"div",10,11),s.qc("click",function(){return s.Uc(e),s.Rc(8).toggle()}),s.bc(),s.bc(),s.cc(9,"div",12),s.cc(10,"cu-task-time-estimate-input",13,14),s.qc("onChange",function(t){return s.Uc(e),s.uc().updateTotalTime(t)})("onClose",function(){return s.Uc(e),s.uc().save()}),s.bc(),s.bc(),s.bc(),s.bd(12,S,2,1,"div",15),s.bd(13,P,3,4,"ng-template",null,16,s.cd),s.bd(15,$,2,1,"ng-container",17),s.vc(16,"async"),s.bd(17,U,8,1,"ng-template",null,18,s.cd),s.cc(19,"div",19),s.bd(20,R,7,10,"div",20),s.vc(21,"async"),s.bd(22,M,2,0,"ng-template",null,21,s.cd),s.cc(24,"div",22),s.qc("click",function(){return s.Uc(e),s.uc().save()}),s.gc(25,23),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.Rc(2),t=s.Rc(18),i=s.Rc(23),o=s.uc();s.Ib(7),s.Dc("popover",e)("outsideClick",!0),s.Ib(3),s.Dc("value",o.timeEstimate)("modifier","cu-task-time-estimate-input__dropdown-mod")("team",o.team)("emitOnBlur",!0)("saveOnEnter",!0)("showHelp",!1)("debounceTime",o.debounceTime),s.Ib(2),s.Dc("ngIf",null==o.team?null:o.team.hours_per_day),s.Ib(3),s.Dc("ngIf",s.wc(16,14,o.showAssignees$))("ngIfElse",t),s.Ib(5),s.Dc("ngIf",s.wc(21,16,o.showAssignees$))("ngIfElse",i)}}const L=function(e,t){return{x:e,y:t}},N=["*"];function z(e,t){return t&&t.user&&t.user.id}let q=(()=>{class e{constructor(e){this.changeDetector=e,this.destroy$=new c.a,this.assigneesEvent$=new a.a(null),this.showAssignees$=this.assigneesEvent$.pipe(Object(r.a)(e=>!e)),this.debounceTime=125,this.setPositioning=!1,this.forGantt=!1,this.noEmit=!1,this.readonly=!1,this.onTimeEstimateAction=new s.o,this.onEstimateCreated=new s.o,this.onClose=new s.o,this.onOpen=new s.o,this.onClear=new s.o,this.trackByAssigneeData=z}ngOnInit(){this.dropdown.dropdownClose.pipe(Object(l.a)(this.destroy$)).subscribe(()=>{this.onClose.emit()})}closed(){this.onClose.emit()}opened(){this.onOpen.emit(),this.task&&this.onTimeEstimateAction.emit({action:o.b.FetchTaskTimeEstimateData,task:this.task})}ngOnChanges(e){}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}open(){this.dropdown.open()}save(){this.assigneesEvent$.value&&(this.onTimeEstimateAction.emit(this.assigneesEvent$.value),this.assigneesEvent$.next(null)),setTimeout(()=>{this.assigneesEvent$.value||this.close()},this.debounceTime)}updateTotalTime(e,t=!0){const i={action:o.b.UpdateTotal,estimate:e,task:this.task};t&&this.assignees&&this.assignees.length>1&&this.team.estimates_per_assignee&&this.user&&!this.user.seen_time_estimate_warning?this.assigneesEvent$.next(i):this.onTimeEstimateAction.emit(i)}updateUser(){this.user=Object.assign(Object.assign({},this.user),{seen_time_estimate_warning:!this.user.seen_time_estimate_warning}),this.assigneesEvent$.next(Object.assign(Object.assign({},this.assigneesEvent$.value),{seenWarning:this.user.seen_time_estimate_warning})),this.markForCheck()}updateAssignee({action:e,estimate:t,user:i}){this.onTimeEstimateAction.emit({action:e,estimate:t,user:i,task:this.task})}markForCheck(){this.changeDetector.markForCheck()}close(){this.dropdown.close()}cancel(){this.assigneesEvent$.next(null),this.taskTimeEstimateInput.timeEstimatesInput.restoreInput()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-time-estimate-dropdown"]],viewQuery:function(e,t){if(1&e&&(s.jd(I,3),s.jd(T,1),s.jd(C,3),s.jd(D,1)),2&e){let e;s.Qc(e=s.rc())&&(t.dropdown=e.first),s.Qc(e=s.rc())&&(t.taskTimeEstimateInput=e.first),s.Qc(e=s.rc())&&(t.toggle=e.first),s.Qc(e=s.rc())&&(t.timeInputted=e.first)}},hostAttrs:[1,"cu-time-estimate-dropdown"],inputs:{modifier:"modifier",task:"task",timeEstimate:"timeEstimate",setPositioning:"setPositioning",forGantt:"forGantt",noEmit:"noEmit",team:"team",rolledUpEstimate:"rolledUpEstimate",assignees:"assignees",user:"user",readonly:"readonly"},outputs:{onTimeEstimateAction:"onTimeEstimateAction",onEstimateCreated:"onEstimateCreated",onClose:"onClose",onOpen:"onOpen",onClear:"onClear"},features:[s.Hb([n.a]),s.Gb],ngContentSelectors:N,decls:6,vars:7,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u;return e=$localize`:@@common_time-estimate␟08515869c69e6f32281a1f40cedf624fc76e48f0␟2258291104816617852:Time Estimate`,t=$localize`:@@common_save␟f8b53b407af242e77dc3391947f23988f3451e64␟4024825301968853407: Save `,i=$localize`:@@common_dt-natural-language--time-estimate␟b7566b6f80815184ed8741c2625e9a0838cb2200␟4501798684977114817: Use natural language to add time estimates in minutes, hours, days, weeks, or months. Try things like "1h" or "1d". `,o=$localize`:@@common_learn-more␟00fd95b84a6403a10161d05c6758c8ee8feab6c5␟1410572042397301262: Learn more `,n=$localize`:@@cu-time-estimate-dropdown__hours-per-day␟787c53d135ec0854f21678a5c209959b366c5b04␟9018404104276735732: Day equals ${"\ufffd0\ufffd"}:INTERPOLATION: hours `,s=$localize`:@@cu-time-estimate-dropdown__popover-content_time-estimate-subtask-calculation␟f27b2a5d2d10ef171e8e0c86c278bf4b976bc3df␟1984110054352591874: Time Estimates include all subtasks. If you don't want this for your Workspace, you can ${"\ufffd#2\ufffd"}:START_LINK:turn this feature off${"\ufffd/#2\ufffd"}:CLOSE_LINK:. `,c=$localize`:@@common_assignee-breakdown␟4ea87d2d3001b931d77b4b321255a822d0f60819␟5862139090396546218: ASSIGNEE BREAKDOWN `,a=$localize`:@@common_are-you-sure␟1394ac6741e278a3f23ae3c0d3fcf5b2170db490␟3137719836412593193: Are you sure? `,r=$localize`:@@common_time-estimate-split-assignees␟8e75b57a2f435b448d9725568d56b14d4b96ae06␟2571416328854502573: This will divide equally between assignees, overriding their current estimates. `,l=$localize`:@@common_dont-show-again␟9c1808a99c641a82a55faeba428a4ddc22ea5df9␟921139378399827567: Don't show again `,d=$localize`:@@common_total-with-subtasks-1␟74d02f896ed52ce169f924a6476b587f28c75e06␟410714397170647761: Total with subtasks `,u=$localize`:@@common_cancel␟fb8aad312b72bbb7e5a1e2cc0b55fae8962bf0fb␟8699434297868700883: Cancel `,[["cuDropdown","",1,"cu-dropdown",3,"ngClass","dropdownCloseOnInsideClick","dropdownFromPoint","dropdownDisabled","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["class","cu-dropdown__menu cu-time-estimate-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-time-estimate-dropdown__menu"],["popTemplate",""],[1,"cu-time-estimate-dropdown__row"],[1,"cu-time-estimate-dropdown__row-title"],e,["icon","question","containerClass","markdown-tooltip","triggers","","container","body","placement","top",1,"help-question-mark",3,"popover","outsideClick","click"],["pop","bs-popover"],[1,"cu-time-estimate-dropdown__row-container"],[3,"value","modifier","team","emitOnBlur","saveOnEnter","showHelp","debounceTime","onChange","onClose"],["taskTimeEstimateInput",""],["class","cu-time-estimate-dropdown__hours-per-day",4,"ngIf"],["popSubtasksTemplate",""],[4,"ngIf","ngIfElse"],["showSplitWarning",""],[1,"cu-time-estimate-dropdown__footer"],["class","cu-time-estimate-dropdown__footer-rolled",3,"cu-time-estimate-dropdown__footer-rolled_display",4,"ngIf","ngIfElse"],["showCancelLink",""],[1,"cu-btn","cu-btn_h-36","cu-time-estimate-dropdown__footer-btn",3,"click"],t,i,["href","https://docs.clickup.com/general/natural-language-processing-for-dates-and-times","target","_blank",1,"popover-content_link",3,"click"],o,[1,"cu-time-estimate-dropdown__hours-per-day"],n,s,[1,"popover-content_link",3,"cuLink","click"],["class","cu-time-estimate-dropdown__assignee",4,"ngIf"],[1,"cu-time-estimate-dropdown__assignee"],[1,"cu-time-estimate-dropdown__title"],c,[3,"assignee","team","debounceTime","onTimeEstimateAction","onClose",4,"ngFor","ngForOf","ngForTrackBy"],[3,"assignee","team","debounceTime","onTimeEstimateAction","onClose"],[1,"cu-time-estimate-dropdown__warning"],[1,"cu-time-estimate-dropdown__warning-title"],a,[1,"cu-time-estimate-dropdown__warning-desc"],r,[1,"cu-time-estimate-dropdown__warning-checkbox"],[3,"checked","onChange"],l,[1,"cu-time-estimate-dropdown__footer-rolled"],[1,"cu-time-estimate-dropdown__footer-rolled-title"],d,["cuPreventDefault","","containerClass","markdown-tooltip","triggers","","container","body","placement","top",1,"cu-time-estimate-dropdown__footer-rolled-value",3,"popover","outsideClick","click"],[1,"cu-time-estimate-dropdown__footer-cancel",3,"click"],u]},template:function(e,t){1&e&&(s.Cc(),s.cc(0,"div",0,1),s.qc("dropdownClose",function(){return t.closed()})("dropdownOpen",function(){return t.opened()}),s.cc(2,"div",2,3),s.Bc(4),s.bc(),s.bd(5,F,26,18,"div",4),s.bc()),2&e&&s.Dc("ngClass",t.modifier)("dropdownCloseOnInsideClick",!1)("dropdownFromPoint",t.setPositioning?s.Ic(4,L,t.left,t.top):null)("dropdownDisabled",t.readonly)},directives:[d.b,u.o,m.a,p.a,h.a,f.c,b.a,u.q,g.a,u.p,y,w.a,x.a],pipes:[u.b,n.a],styles:[".cu-time-estimate-dropdown__menu{width:320px}.cu-time-estimate-dropdown__row{display:flex;align-items:center;justify-content:space-between;padding:10px 15px 0}.cu-time-estimate-dropdown__row-title{display:flex;align-items:center;font:500 15px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-time-estimate-dropdown__row-title{color:#d5d6d7}.cu-time-estimate-dropdown__row-title .help-question-mark{width:18px;height:18px;margin-left:5px;fill:#b9bec7}.dark-theme .cu-time-estimate-dropdown__row-title .help-question-mark{fill:#7c828d}.cu-time-estimate-dropdown__row-container{margin-left:10px}.cu-time-estimate-dropdown__hours-per-day{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;padding:0 15px;color:#7c828d}.dark-theme .cu-time-estimate-dropdown__hours-per-day{color:#abaeb0}.cu-time-estimate-dropdown__title{text-transform:uppercase;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;margin:20px 0 10px;color:#7c828d}.dark-theme .cu-time-estimate-dropdown__title{color:#828588}.cu-time-estimate-dropdown__assignee{padding:0 15px}.cu-time-estimate-dropdown__footer{display:flex;align-items:center;justify-content:space-between;margin:18px 0 0;padding:10px 15px;border-top:1px solid #e9ebf0}.dark-theme .cu-time-estimate-dropdown__footer{border-top-color:#1e272e}.cu-time-estimate-dropdown__footer-icon{width:14px;height:14px;margin-right:8px;fill:#fff;stroke:#fff}.cu-time-estimate-dropdown__footer-btn{width:100px}.cu-time-estimate-dropdown__footer-cancel{color:#fd71af;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer}.cu-time-estimate-dropdown__footer-cancel:hover{color:#fd58a1}.cu-time-estimate-dropdown__footer-rolled{visibility:hidden}.cu-time-estimate-dropdown__footer-rolled_display{visibility:visible}.cu-time-estimate-dropdown__footer-rolled-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:uppercase;font:600 10px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;margin-bottom:6px;color:#b9bec7}.dark-theme .cu-time-estimate-dropdown__footer-rolled-title{color:#7c828d}.cu-time-estimate-dropdown__footer-rolled-value{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;display:inline;cursor:pointer;color:#7c828d}.dark-theme .cu-time-estimate-dropdown__footer-rolled-value{color:#abaeb0}.cu-time-estimate-dropdown__footer-rolled-value:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-time-estimate-dropdown__footer-rolled-value:hover{color:var(--theme-main-color)}}.cu-time-estimate-dropdown__warning{border-radius:4px;padding:15px;margin:15px;background:#f2f4f7}.dark-theme .cu-time-estimate-dropdown__warning{background:#2b343b}.cu-time-estimate-dropdown__warning-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:10px;color:#292d34}.dark-theme .cu-time-estimate-dropdown__warning-title{color:#d5d6d7}.cu-time-estimate-dropdown__warning-desc{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1.2 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:10px;color:#7c828d}.dark-theme .cu-time-estimate-dropdown__warning-desc{color:#abaeb0}.cu-time-estimate-dropdown__warning-checkbox .cu-checkbox__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:none;color:#292d34}.dark-theme .cu-time-estimate-dropdown__warning-checkbox .cu-checkbox__label{color:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})()},W1qW:function(e,t,i){e.exports=i.p+"user_presence.b66befb406f8f370fa3d.png"},WESe:function(e,t,i){"use strict";i.d(t,"a",function(){return v});var o=i("csDc"),n=i("Z0uM"),s=i("NtID"),c=i("6RDV"),a=i("KyjD"),r=i("ofXK"),l=i("m5eJ"),d=i("/n4K"),u=i("bFKe"),m=i("C8uC"),p=i("FpDt"),h=i("6F/5"),f=i("obfd"),b=i("K0KF"),g=i("/SUI"),_=i("fXoL");let v=(()=>{class e{}return e.\u0275mod=_.Ub({type:e}),e.\u0275inj=_.Tb({factory:function(t){return new(t||e)},imports:[[r.c,l.a,d.a,n.a,u.b,m.LoaderModule,p.a,h.a,f.a,b.a,g.a,a.a,c.a,s.a,o.a]]}),e})()},WFPt:function(e,t,i){"use strict";i.d(t,"a",function(){return C});var o=i("5+WD"),n=i("fetL"),s=i("y71m"),c=i("tyNb"),a=i("gb9A"),r=i("dsEp"),l=i("HiD6"),d=i("V6/z"),u=i("1M0N"),m=i("C8uC"),p=i("tGh3"),h=i("csDc"),f=i("KyjD"),b=i("J1KY"),g=i("EDFS"),_=i("K0KF"),v=i("3Pt+"),k=i("VBI8"),y=i("ofXK"),w=i("bx+h"),x=i("bFKe"),I=i("6RDV"),T=i("fXoL");let C=(()=>{class e{}return e.\u0275mod=T.Ub({type:e}),e.\u0275inj=T.Tb({factory:function(t){return new(t||e)},imports:[[y.c,k.a,v.l,_.a,g.d,b.a,f.a,k.a,h.a,p.a,m.LoaderModule,u.a,d.a,l.a,r.a,a.a,c.l,s.a,n.a,o.f,w.a,x.b,I.a]]}),e})()},WkAz:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("P5sH");let s=(()=>{class e{constructor(){this.avatarSize=33,this.bordered=!0,this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-group-avatar"]],inputs:{group:"group",avatarSize:"avatarSize",bordered:"bordered",selected:"selected"},decls:1,vars:12,consts:[[3,"image","color","name","iconSource","iconName","isRound","bordered","selected","isUserGroup"]],template:function(e,t){1&e&&o.Xb(0,"cu-project-avatar",0),2&e&&(o.Mb("cu-project-avatar_",t.avatarSize,""),o.Dc("image",null==t.group.avatar.attachment?null:t.group.avatar.attachment.url)("color",t.group.avatar.color)("name",t.group.name)("iconSource",t.group.avatar.source)("iconName",t.group.avatar.icon)("isRound",!0)("bordered",t.bordered)("selected",t.selected)("isUserGroup",!0))},directives:[n.a],styles:[""],changeDetection:0}),e})()},"Wr+I":function(e,t,i){e.exports=i.p+"multiple-lists.17aa358ec6154791fe35.png"},WtKE:function(e,t,i){"use strict";var o;e.exports=function(e){var t,i="&"+e+";";return(o=o||document.createElement("i")).innerHTML=i,(59!==(t=o.textContent).charCodeAt(t.length-1)||"semi"===e)&&t!==i&&t}},Wxa1:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("fXoL"),n=i("2p4s"),s=i("JIr8"),c=i("z6cu"),a=i("tk/3");let r=(()=>{class e{constructor(e){this.http=e,this.onBrowserFile=new o.o,this.apiUrl=n.a.apiUrl}uploadAttachment(e,t,i){const o=new FormData;return i&&Object.keys(i).forEach(e=>{o.append(e,i[e])}),o.append("attachment",e,t),this.http.post(this.apiUrl+"/attachment",o).pipe(Object(s.a)(({error:e})=>Object(c.a)(e)))}}return e.\u0275fac=function(t){return new(t||e)(o.nc(a.b))},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},X8So:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},XTWl:function(e,t,i){"use strict";i.d(t,"a",function(){return g});var o=i("fXoL"),n=i("5b//"),s=i("LdyQ"),c=i("MJvn"),a=i("n+1/"),r=i("ofXK"),l=i("NsZK"),d=i("UdVN"),u=i("KzhV");function m(e,t){if(1&e){const e=o.dc();o.cc(0,"a",7),o.qc("click",function(){return o.Uc(e),o.uc(2).openDeleteConfirmModal()}),o.Xb(1,"div",8),o.cc(2,"div",9),o.gc(3,10),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ob("disabled-action",!e.canDelete),o.Dc("cuTooltip",e.canDelete?null:e.deleteTagNoPermissionText),o.Ib(1),o.Dc("icon","trash-bold")}}function p(e,t){if(1&e){const e=o.dc();o.cc(0,"a",11),o.qc("click",function(){return o.Uc(e),o.uc(2).startRename.emit()}),o.Xb(1,"div",8),o.cc(2,"div",9),o.gc(3,12),o.bc(),o.bc()}2&e&&(o.Ib(1),o.Dc("icon","edit"))}function h(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-color-picker-dropdown",13),o.qc("selectedColorChange",function(t){return o.Uc(e),o.uc(2).colorSelected.emit(t)})("dropdownClose",function(){return o.Uc(e),o.uc(2).emitSaveColorChange()}),o.cc(1,"a",14),o.Xb(2,"div",8),o.cc(3,"div",9),o.gc(4,15),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Dc("presetColors",e.PRESET_COLORS)("selectedColor",e.tagColor)("showClose",!0)("panelWidth",275),o.Ib(2),o.Dc("icon","paintbrush")}}function f(e,t){if(1&e&&(o.cc(0,"div",3),o.bd(1,m,4,4,"a",4),o.bd(2,p,4,1,"a",5),o.bd(3,h,5,5,"cu-color-picker-dropdown",6),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",!e.hideDelete),o.Ib(1),o.Dc("ngIf",!e.hideEdit),o.Ib(1),o.Dc("ngIf",!e.hideEdit)}}const b=["*"];let g=(()=>{class e{constructor(){this.hideEdit=!1,this.hideDelete=!1,this.canDelete=!0,this.startDelete=new o.o,this.cancelDelete=new o.o,this.startRename=new o.o,this.colorSelected=new o.o,this.saveColorChange=new o.o,this.PRESET_COLORS=n.b.filter(e=>"#fff"!==e),this.deleteTagNoPermissionText=$localize`:@@cu-tags-menu__tooltip-msg_delete-tag-no-perms:You don't have permission to delete this tag`}openDeleteConfirmModal(){this.canDelete&&(this.startDelete.emit(),this.dropdown.close())}emitSaveColorChange(){this.saveColorChange.emit(),this.dropdown.close()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-tags-menu"]],viewQuery:function(e,t){if(1&e&&o.jd(s.b,1),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},inputs:{tagColor:"tagColor",tagName:"tagName",allSpaces:"allSpaces",disabled:"disabled",hideEdit:"hideEdit",hideDelete:"hideDelete",canDelete:"canDelete"},outputs:{startDelete:"startDelete",cancelDelete:"cancelDelete",startRename:"startRename",colorSelected:"colorSelected",saveColorChange:"saveColorChange"},ngContentSelectors:b,decls:4,vars:1,consts:function(){let e,t,i;return e=$localize`:@@common_delete␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,t=$localize`:@@common_rename␟e26f9cf3666aace4e524b1505c9795d76d87738d␟6041115344061899387:Rename`,i=$localize`:@@common_change-color␟03a5cfeba4e64608e2b99d812159179236538a14␟3483363982895805232: Change color `,[["cuDropdown","",1,"nav-menu","cu-dropdown","menu-options",3,"dropdownDisabled"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["class","cu-dropdown__menu nav-menu__controls",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","nav-menu__controls"],["class","nav-menu-item","cuLink","","draggable","false",3,"disabled-action","cuTooltip","click",4,"ngIf"],["class","nav-menu-item","cuLink","","draggable","false",3,"click",4,"ngIf"],[3,"presetColors","selectedColor","showClose","panelWidth","selectedColorChange","dropdownClose",4,"ngIf"],["cuLink","","draggable","false",1,"nav-menu-item",3,"cuTooltip","click"],[1,"nav-menu-item__icon","nav-menu-item__icon_edit",3,"icon"],[1,"nav-menu-item__name"],e,["cuLink","","draggable","false",1,"nav-menu-item",3,"click"],t,[3,"presetColors","selectedColor","showClose","panelWidth","selectedColorChange","dropdownClose"],["cuLink","","draggable","false",1,"nav-menu-item"],i]},template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0),o.cc(1,"div",1),o.Bc(2),o.bc(),o.bd(3,f,4,3,"div",2),o.bc()),2&e&&o.Dc("dropdownDisabled",t.disabled)},directives:[s.b,c.a,a.a,r.q,l.a,d.a,u.a],encapsulation:2,changeDetection:0}),e})()},XZJ2:function(e,t,i){"use strict";i.d(t,"b",function(){return R}),i.d(t,"a",function(){return M.a});var o=i("ofXK"),n=i("EDFS"),s=i("yw8I"),c=i("3Pt+"),a=i("iEFA"),r=i("Dlfn"),l=i("faCi"),d=i("k6wb"),u=i("1M0N"),m=i("VBI8"),p=i("GtmI"),h=i("W3VH"),f=i("KyjD"),b=i("gb9A"),g=i("bx+h"),_=i("csDc"),v=i("K0KF"),k=i("fTg4"),y=i("ihCf"),w=i("/Ufd"),x=i("HiD6"),I=i("HIOz"),T=i("Dvla"),C=i("T7eY"),D=i("mcWp"),O=i("tGh3"),S=i("o/e2"),E=i("8UY1"),P=i("0x6g"),j=i("prfv"),A=i("e+GA"),$=i("pc5n"),U=i("fXoL");let R=(()=>{class e{}return e.\u0275mod=U.Ub({type:e}),e.\u0275inj=U.Tb({factory:function(t){return new(t||e)},imports:[[o.c,c.l,n.d.forRoot(),a.a,r.a,l.a,d.a,u.a,m.a,p.a,s.b,h.a,f.a,b.a,g.a,_.a,v.a,k.a,y.b,w.a,$.a,x.a,I.a,T.b,C.b,D.a,O.a,S.a,E.b,P.a,j.a,A.a]]}),e})();var M=i("Ufp6")},XaMR:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var o=i("fXoL"),n=i("ofXK"),s=i("NsZK"),c=i("UdVN"),a=i("NQa4");function r(e,t){if(1&e&&(o.cc(0,"div",6),o.cc(1,"div",7),o.tc(),o.cc(2,"svg",8),o.cc(3,"g",9),o.Xb(4,"circle",10),o.Xb(5,"rect",11),o.Xb(6,"path",12),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngClass",e.selectModifier)("cuTooltip",e.prioritiesTooltip)}}function l(e,t){if(1&e&&(o.cc(0,"div",6),o.Xb(1,"div",13),o.Xb(2,"div",14),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Fc("icon","priorities-dashed-",e.priority.priority,"-grey'"),o.Dc("ngClass",e.selectModifier),o.Ib(1),o.Fc("icon","priorities-dashed-",e.priority.priority,""),o.Dc("ngClass",e.selectModifier)}}const d=function(e,t){return{fill:e,"border-color":t}};function u(e,t){if(1&e&&(o.cc(0,"div",15),o.Xb(1,"div",16),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Ob("read-only",e.readOnly),o.Fc("cuTooltip","",e.priority.priority," priority"),o.Dc("ngClass",e.modifier)("ngStyle",o.Ic(5,d,e.priority.color,e.priority.color))}}function m(e,t){if(1&e){const e=o.dc();o.cc(0,"div",17),o.qc("click",function(t){return o.Uc(e),o.uc(2).quickRemove(t)}),o.bc()}}function p(e,t){if(1&e&&(o.cc(0,"div",2),o.bd(1,r,7,2,"div",3),o.bd(2,l,3,4,"div",3),o.bd(3,u,2,8,"div",4),o.bd(4,m,1,0,"div",5),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",!e.priority&&!e.hideIfEmpty),o.Ib(1),o.Dc("ngIf",e.priority&&e.alwaysShowDashed),o.Ib(1),o.Dc("ngIf",e.priority&&!e.alwaysShowDashed),o.Ib(1),o.Dc("ngIf",e.priority&&e.remove)}}const h=function(e){return{"priorities-batch_disabled":e}};function f(e,t){if(1&e&&(o.cc(0,"div",18),o.cc(1,"a",19),o.tc(),o.cc(2,"svg",20),o.Xb(3,"path",21),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngClass",o.Hc(2,h,e.disabled))("cuTooltip",e.prioritiesTooltip)}}let b=(()=>{class e{constructor(){this.modifier="cu-priorities-view__icon",this.selectModifier="",this.placeModifier="",this.remove=!1,this.forBatch=!1,this.readOnly=!0,this.alwaysShowDashed=!1,this.hideIfEmpty=!1,this.prioritiesTooltip=$localize`:@@common_set-priority:Set priority`,this.disabled=!1,this.removePriority=new o.o}quickRemove(e){e.stopPropagation(),this.removePriority.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-priorities-view"]],inputs:{modifier:"modifier",selectModifier:"selectModifier",placeModifier:"placeModifier",priority:"priority",remove:"remove",forBatch:"forBatch",readOnly:"readOnly",alwaysShowDashed:"alwaysShowDashed",hideIfEmpty:"hideIfEmpty",prioritiesTooltip:"prioritiesTooltip",disabled:"disabled"},outputs:{removePriority:"removePriority"},decls:2,vars:2,consts:[["class","cu-priorities-view",4,"ngIf"],["class","cu-priorities-view cu-priorities-view_batch",4,"ngIf"],[1,"cu-priorities-view"],["class","cu-priorities-view__item priority-select",4,"ngIf"],["class","cu-priorities-view__item",4,"ngIf"],["class","cu-priorities-view__priority-remove","icon","cu2-times",3,"click",4,"ngIf"],[1,"cu-priorities-view__item","priority-select"],[1,"cu-priorities-view__icon-select",3,"ngClass","cuTooltip"],["width","36","height","36","viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd"],["stroke-dasharray","3","cx","18","cy","18","r","17.5",1,"cu-stroke","cu-stroke-dasharray"],["x","13.5","y","9.9","width","1","height","16.2","rx",".5",1,"cu-fill"],["d","M14 11.3h11.6l-3 3.5 3 3.6H14z",1,"cu-stroke"],[1,"cu-priorities-view__icon-select-large","cu-priorities-view__icon-grey",3,"ngClass","icon"],[1,"cu-priorities-view__icon-select-large","cu-priorities-view__icon-purple",3,"ngClass","icon"],[1,"cu-priorities-view__item"],["icon","priorities","tooltipModifier","cu-text-capitalize",3,"ngClass","ngStyle","cuTooltip"],["icon","cu2-times",1,"cu-priorities-view__priority-remove",3,"click"],[1,"cu-priorities-view","cu-priorities-view_batch"],["cuLink","",1,"cu-dt-controls__item","priorities-batch","icon",3,"ngClass","cuTooltip"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 19 24"],["d","M15 8.5L18.8 2H2V1c0-.6-.4-1-1-1S0 .4 0 1v22c0 .6.4 1 1 1s1-.4 1-1v-8h16.7L15 8.5zM2\n      4h13.3l-2.5 4.5 2.5 4.5H2V4z",1,"cu-fill"]],template:function(e,t){1&e&&(o.bd(0,p,5,4,"div",0),o.bd(1,f,4,4,"div",1)),2&e&&(o.Dc("ngIf",!t.forBatch),o.Ib(1),o.Dc("ngIf",t.forBatch))},directives:[n.q,n.o,s.a,c.a,n.t,a.a],encapsulation:2,changeDetection:0}),e})()},Xh8f:function(e,t,i){"use strict";var o=i("fywt"),n=i("5WsY"),s=i("mkut");t.a=function(e){return function(t,i,c){var a=Object(t);if(!Object(n.a)(t)){var r=Object(o.a)(i,3);t=Object(s.a)(t),i=function(e){return r(a[e],e,a)}}var l=e(t,i,c);return l>-1?a[r?t[l]:l]:void 0}}},Y9Pr:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("WESe"),n=i("ofXK"),s=i("m5eJ"),c=i("/n4K"),a=i("bFKe"),r=i("C8uC"),l=i("FpDt"),d=i("6F/5"),u=i("obfd"),m=i("K0KF"),p=i("CDR3"),h=i("fXoL");let f=(()=>{class e{}return e.\u0275mod=h.Ub({type:e}),e.\u0275inj=h.Tb({factory:function(t){return new(t||e)},providers:[p.a],imports:[[n.c,s.a,c.a,a.b,r.LoaderModule,l.a,d.a,u.a,m.a,o.a]]}),e})()},YA2R:function(e,t,i){"use strict";i.d(t,"a",function(){return g});var o=i("fXoL"),n=i("42vj"),s=i("XNiG"),c=i("1G5W"),a=i("jJQC"),r=i("/qOb"),l=i("ejAw"),d=i("bFKe"),u=i("ofXK"),m=i("UdVN");function p(e,t){1&e&&o.Xb(0,"div",8)}const h=function(e){return{fill:e}};function f(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc().setPriority(i)}),o.Xb(1,"div",5),o.cc(2,"div",6),o.dd(3),o.bc(),o.bd(4,p,1,0,"div",7),o.bc()}if(2&e){const e=t.$implicit,i=o.uc();o.Ob("priorities-list__item_selected",e.priority===(null==i.highlightedPriority?null:i.highlightedPriority.priority)),o.Ib(1),o.Dc("icon","#ffffff"===e.color?"priorities-empty":"priorities")("ngStyle",o.Hc(6,h,e.color)),o.Ib(2),o.fd(" ",e.priority," "),o.Ib(1),o.Dc("ngIf",i.selectedPrioritiesMap[e.id])}}function b(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.qc("click",function(){return o.Uc(e),o.uc().setPriority(null)}),o.cc(1,"div",9),o.Xb(2,"div",10),o.bc(),o.cc(3,"div",6),o.gc(4,11),o.bc(),o.bc()}}let g=(()=>{class e{constructor(e,t){this.featuresService=e,this.changeDetector=t,this.destroy$=new s.a,this.prioritySelected=[],this.priorities=n.b,this.forBatch=!1,this.noPriority=!1,this.forGantt=!1,this.onChange=new o.o,this.trackById=Object(a.d)("id"),this.selectedPrioritiesMap={}}ngOnInit(){this.featuresService.projectFeatures.pipe(Object(c.a)(this.destroy$)).subscribe(e=>{e.priorities&&e.priorities.enabled&&(this.priorities=e.priorities.priorities),this.priorities=this.priorities||n.b,this.noPriority&&(this.priorities=[...this.priorities,n.f]),this.changeDetector.markForCheck()})}ngOnChanges(e){e.prioritySelected&&e.prioritySelected.currentValue&&this.updateSelectedPrioritiesMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}onKeyDown(e){switch(e.which){case r.a.ENTER:this.highlightedPriority&&this.setPriority(this.highlightedPriority);break;case r.a.ARROW_UP:this.traversePriorities("up");break;case r.a.ARROW_DOWN:this.traversePriorities("down")}}setPriority(e){this.onChange.emit(e)}traversePriorities(e){if(!this.priorities||!this.priorities.length)return;const t=this.priorities,i=this.highlightedPriority?t.findIndex(e=>e.priority===this.highlightedPriority.priority):0;-1!==i&&("up"===e?this.highlightedPriority=this.highlightedPriority&&0!==i?t[i-1]:t[t.length-1]:"down"===e&&(this.highlightedPriority=this.highlightedPriority&&i!==t.length-1?t[i+1]:t[0]))}updateSelectedPrioritiesMap(){this.selectedPrioritiesMap={},Array.isArray(this.prioritySelected)?(this.prioritySelected||[]).forEach(e=>{e&&(this.selectedPrioritiesMap[e.id]=!0)}):this.selectedPrioritiesMap[this.prioritySelected.id]=!0}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(l.a),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-priority-list"]],hostBindings:function(e,t){1&e&&o.qc("keydown",function(e){return t.onKeyDown(e)},!1,o.Sc)},inputs:{prioritySelected:"prioritySelected",priorities:"priorities",forBatch:"forBatch",noPriority:"noPriority",forGantt:"forGantt"},outputs:{onChange:"onChange"},features:[o.Gb],decls:4,vars:3,consts:function(){let e;return e=$localize`:@@common_clear␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,[[1,"priorities-list"],[1,"priorities-list__body",3,"perfectScrollbar"],["class","priorities-list__item",3,"priorities-list__item_selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","priorities-list__item",3,"click",4,"ngIf"],[1,"priorities-list__item",3,"click"],[1,"priorities-list__item-icon",3,"icon","ngStyle"],[1,"priorities-list__item-name"],["class","priorities-list__check","icon","dropdown-settings_mark",4,"ngIf"],["icon","dropdown-settings_mark",1,"priorities-list__check"],[1,"priorities-list__item-icon"],["icon","close",1,"priorities-list__item-clear"],e]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.bd(2,f,5,8,"div",2),o.bd(3,b,5,0,"div",3),o.bc(),o.bc()),2&e&&(o.Ib(2),o.Dc("ngForOf",t.priorities)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",(t.prioritySelected||t.forBatch)&&!t.noPriority))},directives:[d.a,u.p,u.q,m.a,u.t],encapsulation:2,changeDetection:0}),e})()},YD3J:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var o=i("ofXK"),n=i("hWeV"),s=i("gb9A"),c=i("KyjD"),a=i("o/e2"),r=i("K0KF"),l=i("FWqE"),d=i("/qmH"),u=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})(),p=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.b,s.a,c.a,a.a,r.a,l.a,d.b,m]]}),e})()},YbjY:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("ofXK"),n=i("1M0N"),s=i("fTg4"),c=i("KyjD"),a=i("7MBn"),r=i("gb9A"),l=i("K0KF"),d=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a,a.a,r.a,l.a]]}),e})()},Yjgh:function(e,t,i){"use strict";i.d(t,"b",function(){return a}),i.d(t,"a",function(){return r});var o=i("fXoL"),n=i("YwDF");function s(e,t){1&e&&(o.cc(0,"div",5),o.dd(1," + "),o.ac(2),o.gc(3,6),o.Zb(),o.bc())}function c(e,t){if(1&e){const e=o.dc();o.cc(0,"div",7),o.cc(1,"cu-task-selector",8),o.qc("onSelect",function(t){o.Uc(e);const i=o.uc(),n=o.Rc(1),s=o.Rc(2);return i.addTask(t.task,n,s)})("onDropdownReposition",function(){return o.Uc(e),o.uc(),o.Rc(1).positionMenu()})("onLoad",function(){return o.Uc(e),o.uc(),o.Rc(1).positionMenu()}),o.vc(2,"pluckFromArray"),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("modifier","task-selector_task-mentions")("showSearch",!0)("taskIdsToExclude",o.xc(2,7,e.fieldValue,"id"))("showSubtasks",!0)("searchSubtasks",!0)("showRecent",e.field.type===e.CustomFieldType.Tasks)("subcategoryId",e.subcategoryId)}}function a(e){return{color:e.status.color,id:e.id,name:e.name,status:e.status.status,access:!0,team_id:e.team,custom_id:e.custom_id}}let r=(()=>{class e{constructor(){this.fieldValueChange=new o.o,this.CustomFieldType=n.a}get subcategoryId(){var e;return(null===(e=this.field)||void 0===e?void 0:e.type)===n.a.ListRelationship?this.field.type_config.subcategory_id:void 0}ngOnInit(){}addTask(e,t,i){this.fieldValue=[...this.fieldValue||[],a(e)],this.fieldValueChange.emit({value:this.fieldValue,paywallPopover:i}),t.close()}removeTask(e,t){this.fieldValue=this.fieldValue.filter(t=>t.id!==e.id),this.fieldValueChange.emit({value:this.fieldValue,paywallPopover:t})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-type-tasks"]],hostAttrs:[1,"cu-custom-field-type-tasks"],inputs:{field:"field",fieldValue:"fieldValue",readonly:"readonly",task:"task",paywallPopover:"paywallPopover",forBulk:"forBulk",allCustomFields:"allCustomFields",autoDropdown:"autoDropdown",permissions:"permissions",placeholder:"placeholder"},outputs:{fieldValueChange:"fieldValueChange"},decls:7,vars:8,consts:function(){let e;return e=$localize`:@@common_add-task-1␟71c640ccb8aa051992c34729e40e6d16a6dede92␟3592230966174769162:add task`,[["cuDropdown","","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","",1,"cu-custom-field-type-tasks__container",3,"dropdownCloseOnInsideClick","popover","dropdownDisabled"],["taskDropdown","dropdown","tasksInputPopover","bs-popover"],[3,"placeholder","fieldValue","permissions","addTaskTemplate","canRemove","removeTask"],["addTaskTemplate",""],["style","width: 400px",4,"cuDropdownMenu"],["cuDropdownToggle","",1,"cu-custom-field-type-tasks__add"],e,[2,"width","400px"],[3,"modifier","showSearch","taskIdsToExclude","showSubtasks","searchSubtasks","showRecent","subcategoryId","onSelect","onDropdownReposition","onLoad"]]},template:function(e,t){if(1&e){const e=o.dc();o.cc(0,"div",0,1),o.cc(3,"cu-custom-field-type-tasks-list",2),o.qc("removeTask",function(i){o.Uc(e);const n=o.Rc(2);return t.removeTask(i,n)}),o.bc(),o.bd(4,s,4,0,"ng-template",null,3,o.cd),o.bd(6,c,3,10,"div",4),o.bc()}if(2&e){const e=o.Rc(5);o.Dc("dropdownCloseOnInsideClick",!1)("popover",t.paywallPopover)("dropdownDisabled",t.permissions&&!t.permissions.set_custom_field_values||t.readonly),o.Ib(3),o.Dc("placeholder",t.placeholder)("fieldValue",t.fieldValue)("permissions",t.permissions)("addTaskTemplate",t.readonly?void 0:e)("canRemove",!t.readonly)}},styles:[".cu-custom-field-type-tasks{max-width:100%;width:100%}.cu-custom-field-type-tasks__add{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 10px/1 Gotham Pro,Proxima Nova,arial,serif;border:1px solid;border-radius:3px;padding:4px 6px;margin:2px 0}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-tasks__add{color:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-custom-field-type-tasks__add:hover{background:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.cu-custom-field-type-tasks__add:hover{background:var(--theme-main-color)}}.cu-task-row__custom-field .cu-custom-field-type-tasks__add{display:none}.cu-dropdown_open .cu-custom-field-type-tasks__add,.cu-task-row__custom-field:hover .cu-custom-field-type-tasks__add{display:flex}"],encapsulation:2,changeDetection:0}),e})()},Z0uM:function(e,t,i){"use strict";i.d(t,"a",function(){return _});var o=i("ofXK"),n=i("KyjD"),s=i("NtPy"),c=i("K0KF"),a=i("8SgM"),r=i("rDax"),l=i("gb9A"),d=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();var m=i("7MBn"),p=i("1M0N"),h=i("QHsG"),f=i("Dvla"),b=i("t1N4"),g=i("nLvs");let _=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,c.a,a.a,r.d,l.a,u,m.a,p.a,h.a,f.b,b.a,s.CommentAttachmentModule,g.CommentFrameModule]]}),e})()},Z4aC:function(e,t,i){"use strict";i.d(t,"a",function(){return v});var o=i("fXoL"),n=i("dTHz"),s=i("8it8"),c=i("HPyy"),a=i("ofXK"),r=i("NsZK"),l=i("UdVN"),d=i("EP2k"),u=i("kC/4");function m(e,t){if(1&e){const e=o.dc();o.cc(0,"div",10),o.qc("click",function(t){return o.Uc(e),o.uc().unassign(t)}),o.bc()}}function p(e,t){if(1&e&&(o.cc(0,"span"),o.dd(1),o.bc()),2&e){const e=o.uc();o.Ib(1),o.fd(" - ",e.user.email," ")}}function h(e,t){if(1&e&&(o.cc(0,"div",11),o.dd(1),o.vc(2,"timeAgo"),o.bc()),2&e){const e=o.uc();o.Ib(1),o.fd(" ",o.wc(2,1,e.lastViewed)," ")}}function f(e,t){1&e&&o.Xb(0,"div",12)}function b(e,t){1&e&&(o.cc(0,"div",13),o.gc(1,14),o.bc())}function g(e,t){if(1&e){const e=o.dc();o.cc(0,"div",15),o.qc("click",function(t){return o.Uc(e),o.uc().openProfile(t)}),o.gc(1,16),o.bc()}}function _(e,t){if(1&e){const e=o.dc();o.cc(0,"div",17),o.qc("click",function(t){return o.Uc(e),o.uc().reassign(t)}),o.bc()}}let v=(()=>{class e{constructor(e){this.commonStringsService=e,this.displayProfile=!0,this.displayEmail=!1,this.showLastViewed=!1,this.showInactive=!0,this.onOpenProfile=new o.o,this.onUnassign=new o.o,this.onReassign=new o.o,this.anyOneUser=n.i,this.selfUser=n.j}ngOnInit(){}reassign(e){e.preventDefault(),e.stopPropagation(),this.onReassign.emit()}unassign(e){e.preventDefault(),e.stopPropagation(),this.onUnassign.emit()}openProfile(e){e.preventDefault(),e.stopPropagation(),this.onOpenProfile.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(s.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-item"]],hostAttrs:[1,"user-list-item"],hostVars:4,hostBindings:function(e,t){2&e&&o.Ob("user-list-item_selected",t.selected)("user-list-item_highlighted",t.highlighted)},inputs:{user:"user",selected:"selected",highlighted:"highlighted",showUnassign:"showUnassign",showReassign:"showReassign",displayProfile:"displayProfile",displayEmail:"displayEmail",showLastViewed:"showLastViewed",lastViewed:"lastViewed",showInactive:"showInactive",isGuest:"isGuest"},outputs:{onOpenProfile:"onOpenProfile",onUnassign:"onUnassign",onReassign:"onReassign"},decls:12,vars:16,consts:function(){let e,t,i,o;return e=$localize`:@@cu-user-item__tooltip-msg_user-auto-filter-view␟8d2b97b24aaa41bc82feb6f63ddb0880afc60e85␟3265041470294560684:Use this filter to automatically filter for the person that's viewing this view.`,t=$localize`:@@common_reassign␟2d656ebcad66ddffa998d5558b21b40ac45062cd␟1463922540752409787:Reassign`,i=$localize`:@@cu-user-item__dynamic␟159da4f1faa38c584f42462fce2be4948bb431d7␟2555530461350652989: Dynamic
`,o=$localize`:@@common_profile␟b57c09ece5152329a067b7c7614901490e99383c␟4414197878794367625: Profile
`,[[1,"user-list-item__icon"],["modifier","user-list-item__icon",3,"user","isGuest"],["class","user-list-item__icon-close","icon","close-o",3,"click",4,"ngIf"],[1,"user-list-item__name",3,"cuTooltip"],[4,"ngIf"],["class","user-list-item__last-viewed",4,"ngIf"],["class","user-list-item__question","cuTooltip",e,"icon","question",4,"ngIf"],["class","user-list-item__dynamic",4,"ngIf"],["class","user-list-item__profile",3,"click",4,"ngIf"],["class","user-list-item__reassign","cuTooltip",t,"icon","reassign",3,"click",4,"ngIf"],["icon","close-o",1,"user-list-item__icon-close",3,"click"],[1,"user-list-item__last-viewed"],["cuTooltip",e,"icon","question",1,"user-list-item__question"],[1,"user-list-item__dynamic"],i,[1,"user-list-item__profile",3,"click"],o,["cuTooltip",t,"icon","reassign",1,"user-list-item__reassign",3,"click"]]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.Xb(1,"cu-avatar",1),o.bd(2,m,1,0,"div",2),o.bc(),o.cc(3,"div",3),o.dd(4),o.vc(5,"username"),o.bd(6,p,2,1,"span",4),o.bd(7,h,3,3,"div",5),o.bd(8,f,1,0,"div",6),o.bc(),o.bd(9,b,2,0,"div",7),o.bd(10,g,2,0,"div",8),o.bd(11,_,1,0,"div",9)),2&e&&(o.Ib(1),o.Dc("user",t.user)("isGuest",t.isGuest),o.Ib(1),o.Dc("ngIf",t.showUnassign),o.Ib(1),o.Dc("cuTooltip",t.user.username&&t.displayEmail?t.user.email:null),o.Ib(1),o.fd(" ",o.zc(5,11,t.user,t.commonStringsService.meText,"",t.showInactive)," "),o.Ib(2),o.Dc("ngIf",t.user.username&&t.displayEmail),o.Ib(1),o.Dc("ngIf",t.showLastViewed&&t.lastViewed),o.Ib(1),o.Dc("ngIf",(null==t.user?null:t.user.id)===t.selfUser.id),o.Ib(1),o.Dc("ngIf",(null==t.user?null:t.user.id)===t.selfUser.id),o.Ib(1),o.Dc("ngIf",t.displayProfile&&"unassigned"!==(null==t.user?null:t.user.id)&&(null==t.user?null:t.user.id)!=t.anyOneUser.id&&(null==t.user?null:t.user.id)!=t.selfUser.id),o.Ib(1),o.Dc("ngIf",t.showReassign&&"unassigned"!==(null==t.user?null:t.user.id)))},directives:[c.a,a.q,r.a,l.a],pipes:[d.a,u.a],encapsulation:2,changeDetection:0}),e})()},Z87L:function(e){e.exports=JSON.parse('{"0":"\ufffd","128":"\u20ac","130":"\u201a","131":"\u0192","132":"\u201e","133":"\u2026","134":"\u2020","135":"\u2021","136":"\u02c6","137":"\u2030","138":"\u0160","139":"\u2039","140":"\u0152","142":"\u017d","145":"\u2018","146":"\u2019","147":"\u201c","148":"\u201d","149":"\u2022","150":"\u2013","151":"\u2014","152":"\u02dc","153":"\u2122","154":"\u0161","155":"\u203a","156":"\u0153","158":"\u017e","159":"\u0178"}')},ZJXm:function(e,t,i){"use strict";var o=i("TjP8").openCloseTag;e.exports=function(e,t,i){for(var o,b,g,_,v,k,y,w=this.options.blocks.join("|"),x=new RegExp("^</?("+w+")(?=(\\s|/?>|$))","i"),I=t.length,T=0,C=[[n,s,!0],[c,a,!0],[r,l,!0],[d,u,!0],[m,p,!0],[x,h,!0],[f,h,!1]];T<I&&("\t"===(_=t.charAt(T))||" "===_);)T++;if("<"===t.charAt(T)){for(o=t.indexOf("\n",T+1),b=t.slice(T,o=-1===o?I:o),g=-1,v=C.length;++g<v;)if(C[g][0].test(b)){k=C[g];break}if(k){if(i)return k[2];if(T=o,!k[1].test(b))for(;T<I;){if(o=t.indexOf("\n",T+1),b=t.slice(T+1,o=-1===o?I:o),k[1].test(b)){b&&(T=o);break}T=o}return e(y=t.slice(0,T))({type:"html",value:y})}}};var n=/^<(script|pre|style)(?=(\s|>|$))/i,s=/<\/(script|pre|style)>/i,c=/^<!--/,a=/-->/,r=/^<\?/,l=/\?>/,d=/^<![A-Za-z]/,u=/>/,m=/^<!\[CDATA\[/,p=/\]\]>/,h=/^$/,f=new RegExp(o.source+"\\s*$")},ZONP:function(e,t,i){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},ZWk2:function(e,t,i){"use strict";var o=i("m2n9"),n=i("Z87L"),s=i("ZONP"),c=i("fjrl"),a=i("J5yW"),r=i("WtKE");e.exports=function(e,t){var i,s,c={};for(s in t||(t={}),m)c[s]=null==(i=t[s])?m[s]:i;return(c.position.indent||c.position.start)&&(c.indent=c.position.indent||[],c.position=c.position.start),function(e,t){var i,s,c,m,k,y,w,x,I,T,C,D,O,S,E,P,j,A,$,U,R=t.additional,M=t.nonTerminated,F=t.text,L=t.reference,N=t.warning,z=t.textContext,q=t.referenceContext,G=t.warningContext,V=t.position,B=t.indent||[],X=e.length,H=0,W=-1,K=V.column||1,Q=V.line||1,Z="",Y=[];for("string"==typeof R&&(R=R.charCodeAt(0)),P=J(),x=N?function(e,t){var i=J();i.column+=t,i.offset+=t,N.call(G,_[e],i,e)}:u,H--,X++;++H<X;)if(10===k&&(K=B[W]||1),38===(k=e.charCodeAt(H))){if(9===(w=e.charCodeAt(H+1))||10===w||12===w||32===w||38===w||60===w||w!=w||R&&w===R){Z+=d(k),K++;continue}for(D=O=H+1,$=O,35===w?($=++D,88===(w=e.charCodeAt($))||120===w?(S=h,$=++D):S=f):S=p,i="",C="",m="",E=g[S],$--;++$<X&&E(w=e.charCodeAt($));)m+=d(w),S===p&&l.call(o,m)&&(i=m,C=o[m]);(c=59===e.charCodeAt($))&&($++,(s=S===p&&r(m))&&(i=m,C=s)),A=1+$-O,(c||M)&&(m?S===p?(c&&!C?x(5,1):(i!==m&&(A=1+($=D+i.length)-D,c=!1),c||(I=i?1:3,t.attribute?61===(w=e.charCodeAt($))?(x(I,A),C=null):a(w)?C=null:x(I,A):x(I,A))),y=C):(c||x(2,A),(U=y=parseInt(m,b[S]))>=55296&&U<=57343||U>1114111?(x(7,A),y=d(65533)):y in n?(x(6,A),y=n[y]):(T="",v(y)&&x(6,A),y>65535&&(T+=d((y-=65536)>>>10|55296),y=56320|1023&y),y=T+d(y))):S!==p&&x(4,A)),y?(ee(),P=J(),H=$-1,K+=$-O+1,Y.push(y),(j=J()).offset++,L&&L.call(q,y,{start:P,end:j},e.slice(O-1,$)),P=j):(m=e.slice(O-1,$),Z+=m,K+=m.length,H=$-1)}else 10===k&&(Q++,W++,K=0),k==k?(Z+=d(k),K++):ee();return Y.join("");function J(){return{line:Q,column:K,offset:H+(V.offset||0)}}function ee(){Z&&(Y.push(Z),F&&F.call(z,Z,{start:P,end:J()}),Z="")}}(e,c)};var l={}.hasOwnProperty,d=String.fromCharCode,u=Function.prototype,m={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},p="named",h="hexadecimal",f="decimal",b={hexadecimal:16,decimal:10},g={};g.named=a,g[f]=s,g[h]=c;var _={};function v(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}_[1]="Named character references must be terminated by a semicolon",_[2]="Numeric character references must be terminated by a semicolon",_[3]="Named character references cannot be empty",_[4]="Numeric character references cannot be empty",_[5]="Named character references must be known",_[6]="Numeric character references cannot be disallowed",_[7]="Numeric character references cannot be outside the permissible Unicode range"},Zasy:function(e,t,i){"use strict";function o(e){if("string"==typeof e)return function(e){return function(t){return Boolean(t&&t.type===e)}}(e);if(null==e)return c;if("object"==typeof e)return("length"in e?s:n)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(e){return function(t){var i;for(i in e)if(t[i]!==e[i])return!1;return!0}}function s(e){var t=function(e){for(var t=[],i=e.length,n=-1;++n<i;)t[n]=o(e[n]);return t}(e),i=t.length;return function(){for(var e=-1;++e<i;)if(t[e].apply(this,arguments))return!0;return!1}}function c(){return!0}e.exports=o},ZeEz:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("PiVx"),n=i("ofXK"),s=i("KX9h"),c=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},providers:[s.a],imports:[[n.c,o.a]]}),e})()},ZkSf:function(e,t,i){"use strict";e.exports=c;var o=i("uzq8"),n=o.SKIP,s=o.EXIT;function c(e,t,i,n){"function"==typeof t&&"function"!=typeof i&&(n=i,i=t,t=null),o(e,t,function(e,t){var o=t[t.length-1],n=o?o.children.indexOf(e):null;return i(e,n,o)},n)}c.CONTINUE=o.CONTINUE,c.SKIP=n,c.EXIT=s},ZlQq:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var o=i("BYBp"),n=i("1G5W"),s=i("/uUt"),c=i("IzEk"),a=i("XNiG"),r=i("2Vo4"),l=i("fXoL"),d=i("ur8Q"),u=i("Jf2N"),m=i("tyNb"),p=i("ofXK"),h=i("jhN1"),f=i("Uo20");let b=(()=>{class e{constructor(e,t,i,o,s,c){this.dynamicComponentLoader=e,this.modalService=t,this.activatedRoute=i,this.location=o,this.title=s,this.attachmentsViewerService=c,this.isOpen=!1,this.destroy$=new a.a,this.onCloseModal=new a.a,this.onOpenModal=new a.a,this.pendingOpen$=new r.a(null),this.backLinks=[],this.modalService.openModal.pipe(Object(n.a)(this.destroy$)).subscribe(e=>{const t=this.modalService.currentModalInstance&&this.modalService.currentModalInstance.payload&&this.modalService.currentModalInstance.payload.doc;if(this.modalService.isDocModal=!0,t){const e=this.location.path();this.backLinks.push(e),this.onOpenModal.next({doc:t,url:e})}}),this.modalService.beforeCloseModal.pipe(Object(n.a)(this.destroy$)).subscribe(e=>{const t=this.modalService.currentModalInstance&&this.modalService.currentModalInstance.payload&&this.modalService.currentModalInstance.payload.doc;t&&(this.onCloseModal.next({doc:t,url:this.location.path()}),this.backLinks.length&&(this.location.replaceState(this.backLinks[0]),this.backLinks=[]))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}openDoc(e,t,i,o,a,r=!1){this.attachmentsViewerService.onForceClose.emit(),this.modalService.currentModalInstance&&this.modalService.closeAll(),this.dynamicComponentLoader.getComponentFactory("dashboard-doc-page").subscribe(l=>{const d=this.modalService.openComponentFactory(l,e,{modifier:"cu-modal_fullwidth cu-modal_doc",name:"doc-modal",keepOpened:!0,payload:{doc:{teamId:t,viewId:i,pageId:o}}});this.isOpen=!0;const u=this.title.getTitle();d.instance.onUpdateTitle.pipe(Object(s.a)(),Object(n.a)(d.instance.destroy$)).subscribe(e=>this.title.setTitle(e)),this.modalService.closeModal.pipe(Object(c.a)(1),Object(n.a)(d.instance.destroy$)).subscribe(()=>{this.isOpen=!1,this.title.setTitle(u)}),d.instance.changeLocation=!0,d.instance.isModal=!0,d.instance.showTitle=!0,d.instance.reloadPageOnNavigate=!0,d.instance.viewId=i,d.instance.pageId=o,d.instance.scrollToCommentId=a,d.instance.teamId=t,d.instance.setData(i,o),r&&d.instance.collapseSidebar(),d.changeDetectorRef.detectChanges()})}closeDoc(){this.modalService.close()}clickDocLink(e,t,i,n,s){if(s&&s.type&&"popstate"!==s.type){if(s.ctrlKey||s.metaKey)return;const e=Object(o.a)(s).find(e=>e.className&&"string"==typeof e.className&&e.className.split(" ").includes("ql-doc-mention"));if(e&&"true"===e.getAttribute("data-failed"))return;s.preventDefault(),s.stopPropagation()}this.openDoc(e,t,i,n)}}return e.\u0275fac=function(t){return new(t||e)(l.nc(d.a),l.nc(u.a),l.nc(m.a),l.nc(p.l),l.nc(h.d),l.nc(f.a))},e.\u0275prov=l.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Zpkj:function(e,t,i){"use strict";var o=i("RsFJ"),n=i("RjOF"),s=i("my8H");e.exports=function(e,t){var i,c,a,r,l=e.split("\n"),d=l.length+1,u=1/0,m=[];for(l.unshift(n(" ",t)+"!");d--;)if(c=s(l[d]),m[d]=c.stops,0!==o(l[d]).length){if(!c.indent){u=1/0;break}c.indent>0&&c.indent<u&&(u=c.indent)}if(u!==1/0)for(d=l.length;d--;){for(a=m[d],i=u;i&&!(i in a);)i--;r=0!==o(l[d]).length&&u&&i!==u?"\t":"",l[d]=r+l[d].slice(i in a?a[i]+1:0)}return l.shift(),l.join("\n")}},a2y0:function(e,t,i){"use strict";i.d(t,"a",function(){return it});var o=i("HHlo"),n=i("lE2N"),s=i("IlGD"),c=i("4bgU"),a=i("o7Ov"),r=i("nLWA"),l=i("L5Tv"),d=i("c3rA"),u=i("Gj5t"),m=i("lJxs"),p=i("pLZG"),h=i("eIep"),f=i("UXun"),b=i("1G5W"),g=i("PZkE"),_=i("zp1y"),v=i("SxV6"),k=i("nYR2"),y=i("w1tV"),w=i("IzEk"),x=i("fXoL"),I=i("/qOb"),T=i("XNiG"),C=i("2Vo4"),D=i("itXk"),O=i("LRne"),S=i("EY2u"),E=i("l7P3"),P=i("MguC"),j=i("mNZE"),A=i("CgHv"),$=i("WluX"),U=i("cC1p"),R=i("7Cbv"),M=i("12P9"),F=i("keZ5"),L=i("xJzU"),N=i("VQww"),z=i("jwRX"),q=i("wa4x"),G=i("RtrR"),V=i("2eDp"),B=i("G2WA"),X=i("AeD3"),H=i("jJW4"),W=i("ejAw"),K=i("8it8"),Q=i("76Cs"),Z=i("xog/"),Y=i("Tm/s"),J=i("ofXK"),ee=i("3uaV"),te=i("UdVN"),ie=i("t6Eg"),oe=i("yECk"),ne=i("NsZK"),se=i("aitn"),ce=i("peMq"),ae=i("gJHR"),re=i("KiTX"),le=i("keUj"),de=i("XaMR"),ue=i("TzhX"),me=i("u4pA"),pe=i("5Eri");const he=["taskInput"],fe=["createTimeEstimate"],be=["createPointsEstimate"],ge=["customFieldDropdown"];function _e(e,t){if(1&e){const e=x.dc();x.cc(0,"div",24),x.dd(1),x.vc(2,"async"),x.cc(3,"span",25),x.qc("click",function(){return x.Uc(e),x.uc().openCustomFieldDropdown()}),x.gc(4,26),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Ib(1),x.fd(" ",x.wc(2,1,e.missingRequiredText$)," ")}}function ve(e,t){1&e&&(x.cc(0,"div",27),x.gc(1,28),x.bc())}const ke=function(e){return{"cu-panel-board__subcategory_error":e}};function ye(e,t){if(1&e&&(x.cc(0,"div",35),x.gc(1,36),x.bc()),2&e){const e=x.uc(2);x.Dc("ngClass",x.Hc(1,ke,e.subcategoryError))}}function we(e,t){if(1&e&&(x.cc(0,"div",37),x.vc(1,"async"),x.dd(2),x.vc(3,"async"),x.bc()),2&e){const e=x.uc(2);let t=null,i=null;x.Dc("cuTooltip",null==(t=x.wc(1,3,e.selectedSubcategory$))?null:t.name)("tooltipDisabledIfTextNotTruncated",!0),x.Ib(2),x.fd(" ",null==(i=x.wc(3,5,e.selectedSubcategory$))?null:i.name," ")}}function xe(e,t){if(1&e){const e=x.dc();x.cc(0,"div",38),x.qc("click",function(t){return x.Uc(e),x.uc(2).openCreateProjectModal(t)}),x.gc(1,39),x.bc()}}function Ie(e,t){1&e&&x.Xb(0,"div",40)}const Te=function(){return{"min-width":0}};function Ce(e,t){if(1&e){const e=x.dc();x.cc(0,"div",29),x.cc(1,"cu-category-list-dropdown",30),x.qc("onSelect",function(t){return x.Uc(e),x.uc().selectCategory(t)})("onNoCategories",function(t){return x.Uc(e),x.uc().hasCategories(t)}),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.vc(7,"async"),x.vc(8,"async"),x.vc(9,"async"),x.bd(10,ye,2,3,"div",31),x.vc(11,"async"),x.bd(12,we,4,7,"div",32),x.vc(13,"async"),x.bd(14,xe,2,0,"div",33),x.vc(15,"async"),x.bd(16,Ie,1,0,"div",34),x.bc(),x.bc()}if(2&e){const e=x.uc();let t=null,i=null,o=null;x.Ib(1),x.Dc("withPermission","can_create_tasks")("defaultProject",x.wc(2,12,e.selectedProject$)||x.wc(3,14,e.defaultProject$))("selectableProject",!x.wc(4,16,e.defaultProject$)||e.alwaysDisplayLocation)("selectedCategory",(null==(t=x.wc(5,18,e.defaultCategory$))?null:t.id)||(null==(t=x.wc(6,20,e.catFromSelectedSub$))?null:t.id))("selectedSubcategory",null==(i=x.wc(7,22,e.selectedSubcategory$))?null:i.id)("singleCategory",!e.forBoard&&!e.alwaysDisplayLocation&&!x.wc(8,24,e.defaultSubcategory$)&&e.sharedData.compatCurrentProject&&(null==(o=x.wc(9,26,e.defaultCategory$))?null:o.id))("statusName",e.statusName)("ngStyle",x.Gc(34,Te)),x.Ib(9),x.Dc("ngIf",!x.wc(11,28,e.selectedSubcategory$)&&e.hasProjects),x.Ib(2),x.Dc("ngIf",x.wc(13,30,e.selectedSubcategory$)),x.Ib(2),x.Dc("ngIf",!x.wc(15,32,e.selectedSubcategory$)&&!e.hasProjects),x.Ib(2),x.Dc("ngIf",e.isRow)}}const De=function(){return[]};function Oe(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-user-and-groups-list-dropdown",41),x.qc("onChange",function(t){return x.Uc(e),x.uc().setAssignees(t)})("onUserGroupsChanged",function(t){return x.Uc(e),x.uc().setGroupAssignees(t)})("onOpen",function(){return x.Uc(e),x.uc().userDropdownOpened()})("onClose",function(){return x.Uc(e),x.uc().removeHoverState()}),x.vc(1,"async"),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.cc(5,"cu-user-group",42),x.qc("onUserRemove",function(t){return x.Uc(e),x.uc().removeUser(t)}),x.bc(),x.bc()}if(2&e){const e=x.uc();let t=null;x.Dc("users",e.users)("selectedUserGroups",e.groupAssignees)("userGroups",x.wc(1,17,e.userGroups$))("enableFirstSelection",!0)("weights",x.wc(2,19,e.weights$))("weightType",e.UserWeightType.ASSIGN)("selectedUsers",e.assignees)("modifier","cu-dropdown_center cu-dropdown_pointer")("subcategory",x.wc(3,21,e.selectedSubcategory$))("multiChoice",null==(t=x.wc(4,23,e.selectedProject$))?null:t.multiple_assignees),x.Ib(5),x.Dc("users",e.assignees||x.Gc(25,De))("userGroups",e.groupAssignees||x.Gc(26,De))("modifier",e.isRow?"cu-user-group_m":"cu-user-group_sm")("avatarSize",e.isRow?30:24)("addAssigneeIcon",e.isRow?"cu2-assign-3":null)("avatarModifier",e.isRow?"cu-avatar_m":null)("showUserRemover",!0)}}function Se(e,t){if(1&e){const e=x.dc();x.cc(0,"div",43),x.cc(1,"cu-task-row-tags",44),x.qc("onLoad",function(t){return x.Uc(e),x.uc().loadTags(t)})("onChange",function(t){return x.Uc(e),x.uc().editTags(t)}),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.vc(6,"async"),x.bc(),x.bc()}if(2&e){const e=x.uc();let t=null,i=null,o=null;x.Ib(1),x.Dc("tags",x.wc(2,7,e.tagsMap$)[null==(t=x.wc(3,9,e.selectedProject$))?null:t.id])("tagsLoadingMap",x.wc(4,11,e.tagsLoadingMap$)[null==(i=x.wc(5,13,e.selectedProject$))?null:i.id])("value",e.tags)("projectId",null==(o=x.wc(6,15,e.selectedProject$))?null:o.id)("manageTags",!1)("readOnly",!1)("alwaysShowNoHover",!0)}}function Ee(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-task-custom-fields-dropdown",45,46),x.qc("setMissingRequiredFields",function(t){return x.Uc(e),x.uc().missingRequiredMap$.next(t)})("updateCustomFieldValue",function(t){return x.Uc(e),x.uc().setCustomFieldValue(t.field,t.value)}),x.vc(2,"async"),x.vc(3,"async"),x.vc(4,"async"),x.vc(5,"async"),x.bc()}if(2&e){const e=x.uc();let t=null;x.Dc("showMissingRequired",e.showMissingRequired)("missingRequiredMap",x.wc(2,7,e.missingRequiredMap$))("missingRequired",x.wc(3,9,e.missingRequired$))("permissions",null==(t=x.wc(4,11,e.selectedSubcategory$))?null:t.permissions)("subcategory",x.wc(5,13,e.selectedSubcategory$))("customFields",e.locationCustomFields)("modifier","cu-task-custom-fields-dropdown_quick-create-task-panel")}}const Pe=function(e){return[e]};function je(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-priority-list-dropdown",47),x.qc("onChange",function(t){return x.Uc(e),x.uc().setPriority(t)})("onOpen",function(){return x.Uc(e),x.uc().addHoverState()})("onClose",function(){return x.Uc(e),x.uc().removeHoverState()}),x.Xb(1,"cu-priorities-view",48),x.bc()}if(2&e){const e=x.uc();x.Dc("prioritySelected",x.Hc(2,Pe,e.priority)),x.Ib(1),x.Dc("priority",e.priority)}}function Ae(e,t){}const $e=function(e){return{field:"startDate",label:e}};function Ue(e,t){if(1&e&&(x.cc(0,"div"),x.bd(1,Ae,0,0,"ng-template",49),x.bc()),2&e){const e=x.uc(),t=x.Rc(63);x.Ib(1),x.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",x.Hc(2,$e,e.commonStringsService.startDateText))}}function Re(e,t){}const Me=function(e){return{field:"dueDate",label:e}};function Fe(e,t){if(1&e&&(x.cc(0,"div"),x.bd(1,Re,0,0,"ng-template",49),x.bc()),2&e){const e=x.uc(),t=x.Rc(63);x.Ib(1),x.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",x.Hc(2,Me,e.commonStringsService.dueDateText))}}function Le(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-time-estimates-create-task",50,51),x.qc("onTimeEstimateAction",function(t){return x.Uc(e),x.uc().timeEstimateAction(t)}),x.vc(2,"async"),x.bc()}if(2&e){const e=x.uc();x.Dc("timeEstimate",1e3*(null==e.timeEstimate?null:e.timeEstimate.seconds))("assignees",e.assignees)("team",x.wc(2,3,e.sharedData.compatCurrentTeam$))}}function Ne(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-create-task-points-estimates",52,53),x.qc("onPointsEstimatesAction",function(t){return x.Uc(e),x.uc().pointsEstimatesAction(t)}),x.vc(2,"async"),x.bc()}if(2&e){const e=x.uc();x.Dc("points",e.points)("assignees",e.assignees)("team",x.wc(2,3,e.sharedData.compatCurrentTeam$))}}const ze=function(e){return{"cu-panel-board__mover-control_active":e}};function qe(e,t){if(1&e){const e=x.dc();x.cc(0,"div",54),x.cc(1,"div",55),x.cc(2,"div",56),x.qc("click",function(){return x.Uc(e),x.uc().setPosition("top")}),x.bc(),x.cc(3,"div",57),x.qc("click",function(){return x.Uc(e),x.uc().setPosition("bottom")}),x.bc(),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Ib(2),x.Dc("ngClass",x.Hc(4,ze,"top"==e.position))("icon","lv-arrow-top"),x.Ib(1),x.Dc("ngClass",x.Hc(6,ze,"bottom"==e.position))("icon","lv-arrow-down")}}function Ge(e,t){if(1&e){const e=x.dc();x.cc(0,"div",58),x.qc("click",function(t){return x.Uc(e),x.uc().saveTask(t,!0,!0)}),x.cc(1,"div",59),x.dd(2),x.bc(),x.bc()}if(2&e){const e=x.uc();x.Dc("cuTooltip",e.isRow?null:e.saveText),x.Ib(2),x.ed(e.buttonText)}}function Ve(e,t){if(1&e&&(x.cc(0,"div",60),x.qc("click",function(e){return e.stopPropagation()}),x.vc(1,"async"),x.cc(2,"div",59),x.dd(3),x.bc(),x.bc()),2&e){const e=x.uc(),t=x.Rc(36);x.Dc("cuTooltip",null!=t&&t.value?x.wc(1,2,e.missingRequired$)?e.fillOutRequiredCFText:null:e.provideTaskNameText),x.Ib(3),x.ed(e.buttonText)}}const Be=function(e,t,i,o){return{dueDate:e,startDate:t,dueDateTime:i,startDateTime:o}},Xe=function(){return{task:null,statuses:null}};function He(e,t){if(1&e){const e=x.dc();x.cc(0,"cu-task-row-recurring-date-picker",61),x.qc("onChange",function(t){return x.Uc(e),x.uc().setDueDate(t)})("onRecurringChange",function(t){return x.Uc(e),x.uc().setRecurring(t)})("onRecurringLegacyChange",function(t){return x.Uc(e),x.uc().setRecurringLegacy(t)}),x.bc()}if(2&e){const e=t.field,i=t.label,o=x.uc();x.Dc("field",e)("modifier","due-date_subtask-view")("viewModifier","due-date_subtask-view")("dates",x.Kc(10,Be,o.dueDateValue,o.startDateValue,o.dueDateTimeValue,o.startDateTimeValue))("recurringOptions",o.taskRecurOptions)("recurringLegacyOptions",o.taskRecurOptionsLegacy)("allowLegacyRecurring",!1)("legacyRecurring",null==o.taskRecurOptionsLegacy?null:o.taskRecurOptionsLegacy.recurring)("recurringLegacyData",x.Gc(15,Xe))("tooltip",i)}}const We=function(e,t,i,o,n,s,c){return{"cu-panel-board_add-active":e,"cu-hidden":t,"cu-panel-board_add--no-margin":i,"cu-panel-board_add--row":o,"cu-panel-board_add--timeline":n,"cu-panel-board_add--title":s,"cu-panel-board_add--missing":c}},Ke=function(e,t,i,o,n,s,c,a){return{a:!0,w:!0,me:!0,p:e,d:t,inbox:i,sd:o,t:n,m:s,est:c,pts:a}},Qe=function(e,t){return{date:e,showTime:t}},Ze=function(e,t,i){return{project:e,category:t,subcategory:i}},Ye=function(e,t,i,o,n,s,c,a){return{assignees:e,groupAssignees:t,followers:i,priority:o,dueDate:n,tags:s,points:c,location:a}},Je=function(e){return{multi:e}},et=function(e){return{allowCreate:e}},tt=function(e,t){return{a:e,t}};let it=(()=>{class e{constructor(e,t,i,o,n,s,c,a,r,u,b,g){this.sharedTaskService=e,this.dataService=t,this.sharedData=i,this.featuresService=o,this.commonStringsService=n,this.taskService=s,this.resolver=c,this.element=a,this.helpers=r,this.changeDetectorRef=u,this.navService=b,this.store=g,this.SHORTKEY_TEXT=/Mac/i.test(navigator.platform)?"cmd":"ctrl",this.locationCustomFields=[],this.subcategoryError=!1,this.saving=!1,this.isActive=!1,this.dueDateTimeValue=!1,this.startDateTimeValue=!1,this.position="bottom",this.hasProjects=!0,this.destroy$=new T.a,this.showMissingRequired=!1,this.missingRequiredMap$=new C.a({}),this.missingRequired$=this.missingRequiredMap$.pipe(Object(m.a)(e=>Object.keys(e).length)),this.missingRequiredText$=this.missingRequired$.pipe(Object(m.a)(e=>1===e?$localize`:@@cu_custom-field-missing-required-cf-count:${e}:count: custom field required`:$localize`:@@cu_custom-field-missing-required-cf-count--many:${e}:count: custom fields required`)),this.defaultProject$=this.store.select(d.getProject),this.defaultProjectWithShared$=this.store.pipe(Object(E.select)(d.getDefaultProjectWithShared)),this.defaultCategory$=this.store.select(d.getCategory),this.defaultSubcategory$=this.store.pipe(Object(E.select)(Object(d.getSubcategoryWithOptions)({withPermission:"can_create_tasks",ifSingle:!0}))),this.weights$=this.store.select(d.getUserWeights),this.userGroups$=this.store.select(q.c),this.subcategory$=new C.a(null),this.selectedSubcategory$=Object(D.a)([this.defaultSubcategory$,this.subcategory$]).pipe(Object(m.a)(([e,t])=>t||e)),this.selectedProject$=this.selectedSubcategory$.pipe(Object(p.a)(e=>!!e),Object(h.a)(e=>this.store.pipe(Object(E.select)(Object(d.getProjectById)(e.project_id)))),Object(f.a)({refCount:!0,bufferSize:1})),this.catFromSelectedSub$=this.selectedSubcategory$.pipe(Object(p.a)(e=>!!e),Object(h.a)(e=>this.store.select(Object(d.getCategoryById)(e.category,e.project_id)))),this.UserWeightType=l.c,this.focus=!1,this.autoClose=!1,this.isTop=!1,this.isHidden=!1,this.hideDirectionSelector=!1,this.alwaysDisplayLocation=!1,this.margin=!0,this.saveOnDestroy=!1,this.dontCancel=!1,this.dueDateTime=!1,this.forBoard=!1,this.slashCommandsPlacement="bottom",this.slashCommandsContainer="body",this.buttonText="Save",this.isRow=!1,this.isAlwaysActive=!1,this.showTags=!0,this.showPriority=!0,this.showStartDate=!0,this.showDueDate=!0,this.showTitle=!1,this.forTimeline=!1,this.showAssignee=!0,this.close=new x.o,this.taskCreate=new x.o,this.positionChanged=new x.o,this.onBeforeCreate=new x.o,this.tagsMap$=this.store.select(F.d),this.tagsLoadingMap$=this.store.select(F.c),this.fillOutRequiredCFText=$localize`:@@cu-quick-create-task-panel__tooltip-msg_fill-out-required-cf:Fill out the required custom fields`,this.provideTaskNameText=$localize`:@@cu-quick-create-task-panel__tooltip-msg_provide-task-name:Please type a task name`}get saveText(){return $localize`:@@cu-quick-create-task-panel__tooltip-msg_press-enter-to-save:Press enter to save (${this.SHORTKEY_TEXT}+enter to open)`}ngOnInit(){if(this.selectedSubcategory$.pipe(Object(h.a)(e=>e?this.store.select(Object(V.f)({id:e.id,type:"subcategory",name:e.name})).pipe(Object(p.a)(e=>!!e)):Object(O.a)([])),Object(b.a)(this.destroy$)).subscribe(e=>{const t=this.customFields||[];this.locationCustomFields=e.filter(e=>!s.e[e.type].isAutomaticValue).map(e=>{const i=t.find(t=>t.id===e.id);return Object.assign(Object.assign({},e),{value:i?i.value:void 0})}),this.changeDetectorRef.markForCheck()}),this.selectedSubcategory$.pipe(Object(p.a)(e=>!!e),Object(h.a)(e=>this.store.pipe(Object(E.select)(Object($.j)(e.id)))),Object(b.a)(this.destroy$)).subscribe(e=>{this.users=e,this.changeDetectorRef.markForCheck()}),this.selectedSubcategory$.pipe(Object(p.a)(e=>!!e),Object(g.a)("id"),Object(b.a)(this.destroy$)).subscribe(e=>{this.store.dispatch(Object(o.m)({entity:{id:e.id,type:"subcategory",name:e.name}}))}),this.followers=[],!this.restoredState){const{users:e,groups:t}=this.getDefaultAssignees();this.assignees=e,this.followers=[],this.groupAssignees=t}this.defaultProject$.pipe(Object(_.a)(this.defaultProjectWithShared$,this.defaultCategory$),Object(p.a)(([e,t,i])=>(!!e&&e.id!==u.h||!!t&&t.id!==u.h)&&!i&&!this.subcategory&&this.forBoard),Object(h.a)(([e,t,i])=>this.store.pipe(Object(E.select)(Object(d.getCategoriesById)(e?e.id:t.id)),Object(m.a)(e=>e||[]))),Object(b.a)(this.destroy$)).subscribe(e=>{if(e.length)if(this.status.data&&this.status.data&&this.status.data.subcategory_ids&&this.status.data.subcategory_ids.length){let t=0;for(;!this.subcategory&&t<e.length;)this.subcategory=(e[t].subcategories||[]).find(e=>e.permissions.can_create_tasks&&-1!==this.status.data.subcategory_ids.indexOf(e.id)),this.subcategory$.next(this.subcategory),t++}else{const t=e[0];t&&t.subcategories&&t.subcategories.length&&(this.subcategory=t.subcategories.find(e=>e.permissions.can_create_tasks),this.subcategory$.next(this.subcategory))}}),this.defaultCategory$.pipe(Object(p.a)(e=>!this.subcategory&&e&&e.subcategories&&e.subcategories.length&&this.forBoard),Object(b.a)(this.destroy$)).subscribe(e=>{this.status.data&&this.status.data&&this.status.data.subcategory_ids&&this.status.data.subcategory_ids.length?(this.subcategory=(e.subcategories||[]).find(e=>e.permissions.can_create_tasks&&-1!==this.status.data.subcategory_ids.indexOf(e.id)),this.subcategory$.next(this.subcategory)):(this.subcategory=e.subcategories.find(e=>e.permissions.can_create_tasks),this.subcategory$.next(this.subcategory))}),this.isTop&&(this.position="top"),this.focus&&setTimeout(()=>{this.setFocus()},600),this.taskService.onTaskQuickAdd.pipe(Object(b.a)(this.destroy$)).subscribe(e=>{this.isTop&&"board"===e.view&&"focus"===e.type&&this.status.name===e.status&&this.setFocus()})}ngOnChanges(e){if(e.dueDate&&this.dueDate&&(this.dueDateValue=this.dueDate.getTime()),e.dueDateTime&&(this.dueDateTimeValue=this.dueDateTime),e.list&&e.list.currentValue&&setTimeout(()=>this.selectCategory({subcategory:e.list.currentValue,category:this.project})),e.groupType&&e.groupType.currentValue){if(this.resetTaskValues(),this.groupType===P.c.Priority&&(this.priority=Object.assign(Object.assign({},this.status.data),{id:this.status.data.priority})),this.groupType===P.c.Assignee&&this.status.data){const e=Array.isArray(this.status.data)?this.status.data:[this.status.data];this.assignees=e.filter(e=>!e.group),this.groupAssignees=e.filter(e=>e.group)}this.groupType===P.c.DueDate&&(this.dueDateValue=this.status.data.drop_value||null),this.groupType===P.c.Tag&&(this.tags=this.status.data),(this.groupType||"").startsWith("cf_")&&this.status&&this.status.data&&this.status.data.drop_value&&this.customField&&(this.customFields=[Object.assign(Object.assign({},this.status.data.drop_value),{id:this.customField.id})])}e.restoredState&&this.restoredState&&(this.taskInput.nativeElement.value=this.restoredState.name,this.assignees=this.restoredState.assignees,this.customFields=this.restoredState.customFields,this.groupAssignees=this.restoredState.group_assignees,this.dueDateValue=this.restoredState.due_date,this.startDateValue=this.restoredState.start_date,this.startDateTimeValue=this.restoredState.start_date_time,this.dueDateTimeValue=this.restoredState.due_date_time,this.tags=this.restoredState.tags,this.status=this.restoredState.status,this.priority=this.restoredState.priority),e.defaultData&&this.defaultData&&(this.taskInput.nativeElement.value=this.defaultData.name||this.taskInput.nativeElement.value,this.parent=this.defaultData.parent)}setCustomFieldValue(e,t){this.locationCustomFields=this.locationCustomFields.map(i=>i.id===e.id?Object.assign(Object.assign({},i),{value:t}):i),this.changeDetectorRef.markForCheck()}ngOnDestroy(){if(this.saveOnDestroy&&this.taskInput.nativeElement.value.trim().length>0){const e=this.saveTask({},!0);e?e.subscribe(()=>{this.destroy$.next()}):this.destroy$.next()}else this.destroy$.next()}resetTaskValues(){this.dueDate||(this.dueDateValue=null),this.assignees=[],this.customFields=[],this.locationCustomFields=[],this.groupAssignees=[],this.followers=[],this.priority=null,this.tags=[]}setFocus(){this.taskInput.nativeElement.focus()}addHoverState(){this.element.nativeElement.classList.add("cu-panel-board_hover-state","cu-panel-board_hover-state-add")}removeHoverState(){this.element.nativeElement.classList.remove("cu-panel-board_hover-state","cu-panel-board_hover-state-add"),this.setFocus()}userDropdownOpened(){this.addHoverState(),this.selectedSubcategory$.pipe(Object(v.a)(),Object(p.a)(e=>!!e)).subscribe(e=>{this.store.dispatch(new a.ne(e.id))})}removeUser(e){this.assignees=this.assignees.filter(t=>t.id!==e.id)}setAssignees(e){this.assignees=e}setGroupAssignees(e){this.groupAssignees=e}setFollowers(e){this.followers=e}setDueDate(e){this.dueDateValue=e.dueDate?e.dueDate.valueOf():null,this.startDateValue=e.startDate?e.startDate.valueOf():null,this.dueDateTimeValue=e.dueDateTime,this.startDateTimeValue=e.startDateTime}setTags(e){this.tags=e}selectCategory(e){this.category=e.category,this.subcategory=e.subcategory,this.subcategoryError=!1,this.subcategory$.next(e.subcategory),this.setFocus()}resetData(){this.dueDateValue=this.groupType===P.c.DueDate?this.dueDateValue:null,this.startDateValue=null,this.dueDateTimeValue=!1,this.startDateTimeValue=!1,this.priority=this.groupType===P.c.Priority?this.priority:null,this.tags=this.groupType===P.c.Tag?this.tags:[],this.resetAssignees(),this.taskInput.nativeElement.value=""}cancelAdding(e){this.resetData(),this.status&&this.taskService.taskQuickAddCloseBoard(this.status.name,e,null),this.taskInput.nativeElement.blur(),this.isActive=!1,this.close.emit(),this.changeDetectorRef.markForCheck()}resetForm(){this.resetData(),this.setFocus(),this.isActive=!0,this.changeDetectorRef.markForCheck()}resetAssignees(){const{users:e,groups:t}=this.getDefaultAssignees();this.assignees=e,this.groupAssignees=t,this.followers=[]}onFocus(e){this.isActive=!0}onBlur(e){}setPosition(e){this.position=e,this.positionChanged.emit({position:e,taskState:this.getTaskState()})}parentClick(e){!this.isHidden&&this.isActive&&(this.autoClose&&0===this.taskInput.nativeElement.value.trim().length?this.cancelAdding(!1):this.isActive=this.autoClose||this.taskInput.nativeElement.value.trim())}openCustomFieldDropdown(){this.showMissingRequired=!1,this.changeDetectorRef.markForCheck(),this.customFieldDropdown&&this.customFieldDropdown.dropdown.open()}saveTask(e,t=!1,i=!1){if((t||e.which===I.a.ENTER)&&this.taskInput.nativeElement.value.trim().length>0){if(this.saving)return;let o;if(this.showMissingRequired=!1,Object.keys(this.missingRequiredMap$.value).length)return this.showMissingRequired=!0,void this.changeDetectorRef.markForCheck();const n=Object(D.a)([this.defaultSubcategory$,this.store.select(G.b),this.store.select(d.getTeam)]).pipe(Object(v.a)(),Object(h.a)(([e,n,s])=>{const c=this.subcategory||e;if(c){const r=Object.assign(Object.assign({},this.getTaskState()),{parent:this.parent,assignees:this.assignees?this.assignees.map(e=>e.id):null,customFields:this.getCustomFields(),group_assignees:this.groupAssignees?this.groupAssignees.map(e=>e.id):null,followers:this.followers?this.followers.map(e=>e.id):null,due_date:this.dueDateValue,start_date:this.startDateValue,start_date_time:this.startDateTimeValue,due_date_time:this.dueDateTimeValue,tags:this.tags||[],status:this.status?this.groupType&&this.groupType===P.c.Status?this.status.data.status:this.status.name:void 0,priority:this.priority?this.priority.id:"none",position_wide:e?"subcategory":"category"});if(this.timeEstimate&&this.timeEstimate.seconds&&(r.time_estimate=1e3*this.timeEstimate.seconds,r.time_estimate_string=this.timeEstimate.output||""),this.points&&(r.points=this.points,this.pointsAssigneeMap&&Object.entries(this.pointsAssigneeMap).some(([e,t])=>!!t)&&this.assignees&&this.assignees.length&&(r.assignee_points_map=this.pointsAssigneeMap)),this.estimateAssigneeMap&&Object.entries(this.estimateAssigneeMap).some(([e,t])=>!!t)&&this.assignees&&this.assignees.length&&(r.assignee_time_estimate_map=this.estimateAssigneeMap),this.groupType&&this.tasks){let e=("dueDate"===this.groupType?"due_date":this.groupType)+"_orderindex";const t=this.isTop?null:this.tasks.length?this.tasks[this.tasks.length-1].id:null,i=this.isTop&&this.tasks.length?this.tasks[0].id:null,o=t?this.tasks.find(e=>e.id===t):null,n=i?this.tasks.find(e=>e.id===i):null,s=o&&parseFloat(o[e]),c=n&&parseFloat(n[e]),a=Object(A.jb)(s,c);e="status_orderindex"===e?"orderindex":e,r[e]=a}else"top"===this.position&&(r.position=0),this.order&&(r.position=this.order);return o=this.getPendingTasks([r]),this.onBeforeCreate.emit(o),!t||i&&this.dontCancel?this.resetForm():this.cancelAdding(!1),n?(this.store.dispatch(new j.p({draft:Object.assign({queued:!0,sync_state:"initial",team:s.id,project:{id:c.project_id},category:{id:c.category},subcategory:{id:c.id},new_draft:!0,draft_uuid:Object(R.a)()},r),updating:!1})),S.a):(this.store.dispatch(new a.jg({id:c.id})),this.saveOnDestroy?this.dataService.createTask(c.id,r).pipe(Object(b.a)(this.destroy$)):this.dataService.createTask(c.id,r))}return this.subcategoryError=!0,S.a}),Object(k.a)(()=>{this.saving=!1}),Object(y.a)());return n.subscribe(t=>{let i;this.groupId&&(i={pendings:o,groupId:this.groupId,isTop:this.isTop}),this.taskService.taskCreated(t.task,!1,!this.forBoard,i),e[this.helpers.SHORTKEY]&&this.sharedTaskService.openTaskModal({id:t.task.id,customId:t.task.custom_id,teamId:t.task.team}),this.taskCreate.emit({task:t.task})}),n}(0===e.which&&0===this.taskInput.nativeElement.value.trim().length||e.which===I.a.ESCAPE)&&this.cancelAdding(!1)}getPendingTasks(e){const t=[];return e.forEach(e=>{const i="PENDING_"+this.helpers.getUniqueId();t.push(Object.assign(Object.assign({id:i},e),{priority:this.priority,assignees:this.assignees,followers:this.followers,group_assignees:this.groupAssignees}))}),t}getCustomFields(){let e;const t=(this.locationCustomFields||[]).map(e=>{const t=s.e[e.type];let i=e.value;return t&&t.serialiseValueForApi&&(i=t.serialiseValueForApi(void 0,e.value,e)),{id:e.id,value:i}});return t.length&&(e=t),this.customFields&&(e=e||[],e=Object(n.a)([...e,...this.customFields],"id")),e}getDefaultAssignees(){return{users:this.defaultAssignees?this.defaultAssignees:(this.isMeTabSelected()||this.isPersonalTeam())&&this.sharedData.currentUser.value?[this.sharedData.currentUser.value]:this.groupType&&this.groupType===P.c.Assignee?this.status.data.filter(e=>!e.group):[],groups:this.groupType&&this.groupType===P.c.Assignee?this.status.data.filter(e=>e.group):[]}}isMeTabSelected(){return"me"===this.sharedData.defaultViewTab}isPersonalTeam(){return!!this.sharedData.compatCurrentTeam.personal_team}hasCategories(e){this.sharedData.compatCurrentProject&&(this.hasProjects=e,this.changeDetectorRef.markForCheck())}openCreateProjectModal(e){e.preventDefault(),e.stopPropagation(),this.navService.onRemoveLastCategory.emit()}setPriority(e){this.priority=e}pointsEstimatesAction(e){if(e.action===c.a.UpdateTaskPointsEstimates)this.setPointsEstimate(e.points);else if(e.action===c.a.UpdateDraftAssigneeData){const{points:t,assigneeMap:i}=e.draftUpdate;this.points=t,this.pointsAssigneeMap=i}this.changeDetectorRef.detectChanges()}setSprintPoints(e){const t=e&&e.id?parseInt(e.id,10):0;if(e.user){const i=this.pointsAssigneeMap||{},o=(this.assignees||[]).map(o=>{const n=o;return Object.assign(Object.assign({},n),e.user.id===o.id?{points:t}:{points:i[n.id]})});this.createPointsEstimate.users$.next(o)}else this.points=t;this.changeDetectorRef.markForCheck()}timeEstimateAction(e){if(e.action===r.b.UpdateTotal)this.setEstimate(e.estimate);else if(e.action===r.b.UpdateDraftAssigneeData){const{total:t,assigneeMap:i,estimateString:o}=e.draftUpdate;this.timeEstimate={output:o,milliseconds:t||null,seconds:t?t/1e3:null},this.estimateAssigneeMap=i}this.changeDetectorRef.detectChanges()}setEstimate(e,t=!1){this.timeEstimate=e,this.changeDetectorRef.markForCheck(),setTimeout(()=>{t&&this.createTimeEstimate&&this.createTimeEstimate.forceUpdate()},200)}setPointsEstimate(e){this.points=e}selectCommand(e){if(e)switch(e.key){case U.c.key:this.userDropdownOpened();break;case U.nb.key:this.loadTags()}}applySlashCommand({command:e,value:t}){if(e)switch(e.key){case U.c.key:{const e=t.filter(e=>e.group).map(e=>e.group);this.setGroupAssignees(e);const i=t.filter(e=>!e.group);this.setAssignees(i)}break;case U.Gb.key:{t.filter(e=>e.group).map(e=>e.group);const e=t.filter(e=>!e.group);this.setFollowers(e)}break;case U.cb.key:this.setPriority(t);break;case U.o.key:this.setDueDate({dueDate:t?t.date:null,dueDateTime:t?t.showTime:null,startDate:this.startDateValue,startDateTime:this.startDateTimeValue});break;case U.q.key:const e=t[1];this.setDueDate({dueDate:(t=t[0])?t.date:null,dueDateTime:t?t.showTime:null,startDate:this.startDateValue,startDateTime:this.startDateTimeValue}),this.setAssignees(e);break;case U.jb.key:this.setDueDate({dueDate:this.dueDate,dueDateTime:this.dueDateTime,startDate:t?t.date:null,startDateTime:t?t.showTime:null});break;case U.Z.key:this.selectCategory(t);break;case U.nb.key:this.setTags(t||[]);break;case U.ib.key:this.setSprintPoints(t);break;case U.pb.key:this.setEstimate(t,!0),t&&t.noWarning&&this.store.dispatch(new a.om({seen_time_estimate_warning:!0}))}}setRecurringLegacy(e){this.taskRecurOptionsLegacy=e}setRecurring(e){this.taskRecurOptions=e.recurring,this.taskRecurOptionsLegacy=null}editTags({action:e,data:t}){switch(e){case L.a.AddTag:this.setTags([...this.tags||[],t]);break;case L.a.RemoveTag:this.setTags((this.tags||[]).filter(e=>e.name!==t.name))}}loadTags(e){this.selectedProject$.pipe(Object(w.a)(1),Object(p.a)(e=>!!e),Object(b.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(Object(N.e)({projectId:t.id,paging:e}))})}checkPaging(e){e.type===z.a.Tags&&this.loadTags({last:e.newSearch?null:"true",search:e.search})}getTaskState(){return{name:this.taskInput.nativeElement.value.trim(),assignees:this.assignees,group_assignees:this.groupAssignees,due_date:this.dueDateValue,start_date:this.startDateValue,start_date_time:this.startDateTimeValue,due_date_time:this.dueDateTimeValue,tags:this.tags||[],status:this.status,priority:this.priority,recurring_settings:Object(M.i)(this.taskRecurOptions)}}}return e.\u0275fac=function(t){return new(t||e)(x.Wb(B.a),x.Wb(X.a),x.Wb(H.a),x.Wb(W.a),x.Wb(K.a),x.Wb(Q.a),x.Wb(x.j),x.Wb(x.m),x.Wb(Z.b),x.Wb(x.h),x.Wb(Y.a),x.Wb(E.Store))},e.\u0275cmp=x.Qb({type:e,selectors:[["cu-quick-create-task-panel"]],viewQuery:function(e,t){if(1&e&&(x.jd(he,3),x.jd(fe,1),x.jd(be,1),x.jd(ge,1)),2&e){let e;x.Qc(e=x.rc())&&(t.taskInput=e.first),x.Qc(e=x.rc())&&(t.createTimeEstimate=e.first),x.Qc(e=x.rc())&&(t.createPointsEstimate=e.first),x.Qc(e=x.rc())&&(t.customFieldDropdown=e.first)}},hostAttrs:[1,"cu-quick-create-task-panel"],inputs:{status:"status",tasks:"tasks",list:"list",project:"project",focus:"focus",autoClose:"autoClose",isTop:"isTop",isHidden:"isHidden",hideDirectionSelector:"hideDirectionSelector",alwaysDisplayLocation:"alwaysDisplayLocation",order:"order",margin:"margin",dueDate:"dueDate",customField:"customField",saveOnDestroy:"saveOnDestroy",dontCancel:"dontCancel",dueDateTime:"dueDateTime",forBoard:"forBoard",groupId:"groupId",slashCommandsPlacement:"slashCommandsPlacement",slashCommandsContainer:"slashCommandsContainer",groupType:"groupType",statusName:"statusName",defaultAssignees:["assignees","defaultAssignees"],restoredState:"restoredState",defaultData:"defaultData",buttonText:"buttonText",isRow:"isRow",isAlwaysActive:"isAlwaysActive",showTags:"showTags",showPriority:"showPriority",showStartDate:"showStartDate",showDueDate:"showDueDate",showTitle:"showTitle",forTimeline:"forTimeline",showAssignee:"showAssignee"},outputs:{close:"close",taskCreate:"taskCreate",positionChanged:"positionChanged",onBeforeCreate:"onBeforeCreate"},features:[x.Gb],decls:64,vars:145,consts:function(){let e,t,i,o,n,s,c;return e=$localize`:@@common_task-name-or-slash-cmds␟4c070a32a1f5357862c5282d819a2bbc093ba288␟6140007047963435912:Task na﻿me or type '/' for commands`,t=$localize`:@@common_click-here-to-fix␟c236815280e5a8413f12f288243d5d66b3e00a47␟4070758832964826359:Click here to fix`,i=$localize`:@@common_create-new-task-2␟0a2725937aac40467a80a7d227dd95f23f7d8612␟8931795629410957512: Create a new task `,o=$localize`:@@common_select-list␟22d987f137a3ce04bb8dad28aaaeca02bffa4603␟2662217524112605006: Select List... `,n=$localize`:@@common_create-folder␟ef2c8877d10af5d951f08bf092b15f1992601b92␟312025651552614192: Create Folder `,s=$localize`:@@common_top␟6ae1c94f6bad274424f97e9bc8766242c1577447␟6293970137138896363:Top`,c=$localize`:@@common_bottom␟6723d5c967329a3ac75524cf0c1af5ced022b9a3␟3568940932272598597:Bottom`,[[1,"cu-panel-board","cu-panel-board_add",3,"ngClass","clickOutside"],["class","cu-panel-board_add-missing",4,"ngIf"],["class","cu-quick-create-task-panel__title",4,"ngIf"],[1,"cu-panel-board__main"],["class","cu-panel-board__subcategory",4,"ngIf"],[1,"cu-panel-board__header"],["inputClass","cu-panel-board__input",1,"cu-panel-board__title",3,"dateFormatting","militaryTime","weights","meUser","users","userGroups","team","points","priorities","tags","allowedCommands","currentValues","options","dropdownPlacement","dropdownContainer","applyCommand","onSelectCommand","onPage"],[1,"cu-panel-board__close",3,"click"],[1,"icon",3,"icon"],["cuSlashCommandInput","","placeholder",e,"autocomplete","off",1,"cu-panel-board__input",3,"keydown","focus","blur","click"],["taskInput",""],[3,"users","selectedUserGroups","userGroups","enableFirstSelection","weights","weightType","selectedUsers","modifier","subcategory","multiChoice","onChange","onUserGroupsChanged","onOpen","onClose",4,"ngIf"],["class","cu-quick-create-task-panel__tags",4,"ngIf"],[1,"cu-panel-board__footer","cu-dropdown"],[1,"cu-panel-board__footer_left"],[3,"showMissingRequired","missingRequiredMap","missingRequired","permissions","subcategory","customFields","modifier","setMissingRequiredFields","updateCustomFieldValue",4,"ngIf"],[3,"prioritySelected","onChange","onOpen","onClose",4,"ngIf"],[4,"ngIf"],[3,"timeEstimate","assignees","team","onTimeEstimateAction",4,"ngIf"],[3,"points","assignees","team","onPointsEstimatesAction",4,"ngIf"],["class","cu-panel-board__mover-container",4,"ngIf"],["class","cu-panel-board__enter",3,"cuTooltip","click",4,"ngIf","ngIfElse"],["disabledSubmit",""],["datePicker",""],[1,"cu-panel-board_add-missing"],[1,"cu-panel-board_add-missing-text",3,"click"],t,[1,"cu-quick-create-task-panel__title"],i,[1,"cu-panel-board__subcategory"],[3,"withPermission","defaultProject","selectableProject","selectedCategory","selectedSubcategory","singleCategory","statusName","ngStyle","onSelect","onNoCategories"],["class","cu-panel-board__subcategory_empty",3,"ngClass",4,"ngIf"],["class","cu-quick-create-task-panel__subcategory",3,"cuTooltip","tooltipDisabledIfTextNotTruncated",4,"ngIf"],[3,"click",4,"ngIf"],["icon","angle-right-no-padding","class","cu-panel-board__subcategory-chevron",4,"ngIf"],[1,"cu-panel-board__subcategory_empty",3,"ngClass"],o,[1,"cu-quick-create-task-panel__subcategory",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[3,"click"],n,["icon","angle-right-no-padding",1,"cu-panel-board__subcategory-chevron"],[3,"users","selectedUserGroups","userGroups","enableFirstSelection","weights","weightType","selectedUsers","modifier","subcategory","multiChoice","onChange","onUserGroupsChanged","onOpen","onClose"],[3,"users","userGroups","modifier","avatarSize","addAssigneeIcon","avatarModifier","showUserRemover","onUserRemove"],[1,"cu-quick-create-task-panel__tags"],[3,"tags","tagsLoadingMap","value","projectId","manageTags","readOnly","alwaysShowNoHover","onLoad","onChange"],[3,"showMissingRequired","missingRequiredMap","missingRequired","permissions","subcategory","customFields","modifier","setMissingRequiredFields","updateCustomFieldValue"],["customFieldDropdown",""],[3,"prioritySelected","onChange","onOpen","onClose"],["selectModifier","cu-priorities-view__icon-select-subtask-add","modifier","cu-priorities-view__icon-board",3,"priority"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"timeEstimate","assignees","team","onTimeEstimateAction"],["createTimeEstimate",""],[3,"points","assignees","team","onPointsEstimatesAction"],["createPointsEstimate",""],[1,"cu-panel-board__mover-container"],[1,"cu-panel-board__mover"],["cuTooltip",s,"tooltipModifier","tooltip_left",1,"cu-panel-board__mover-control",3,"ngClass","icon","click"],["cuTooltip",c,"tooltipModifier","tooltip_left",1,"cu-panel-board__mover-control",3,"ngClass","icon","click"],[1,"cu-panel-board__enter",3,"cuTooltip","click"],[1,"cu-panel-board__enter-button"],[1,"cu-panel-board__enter","cu-panel-board__enter_disabled",3,"cuTooltip","click"],[3,"field","modifier","viewModifier","dates","recurringOptions","recurringLegacyOptions","allowLegacyRecurring","legacyRecurring","recurringLegacyData","tooltip","onChange","onRecurringChange","onRecurringLegacyChange"]]},template:function(e,t){if(1&e&&(x.cc(0,"div",0),x.qc("clickOutside",function(e){return t.parentClick(e)}),x.vc(1,"async"),x.bd(2,_e,5,3,"div",1),x.vc(3,"async"),x.bd(4,ve,2,0,"div",2),x.cc(5,"div",3),x.bd(6,Ce,17,35,"div",4),x.vc(7,"async"),x.vc(8,"async"),x.cc(9,"div",5),x.cc(10,"cu-slash-command",6),x.qc("applyCommand",function(e){return t.applySlashCommand(e)})("onSelectCommand",function(e){return t.selectCommand(e)})("onPage",function(e){return t.checkPaging(e)}),x.vc(11,"async"),x.vc(12,"async"),x.vc(13,"async"),x.vc(14,"async"),x.vc(15,"async"),x.vc(16,"async"),x.vc(17,"async"),x.vc(18,"async"),x.vc(19,"async"),x.vc(20,"async"),x.vc(21,"async"),x.vc(22,"async"),x.vc(23,"async"),x.vc(24,"async"),x.vc(25,"async"),x.vc(26,"async"),x.vc(27,"async"),x.vc(28,"async"),x.vc(29,"async"),x.vc(30,"async"),x.vc(31,"async"),x.vc(32,"async"),x.cc(33,"div",7),x.qc("click",function(){return t.cancelAdding(!1)}),x.Xb(34,"div",8),x.bc(),x.cc(35,"input",9,10),x.qc("keydown",function(e){return t.saveTask(e)})("focus",function(e){return t.onFocus(e)})("blur",function(e){return t.onBlur(e)})("click",function(e){return e.stopPropagation()}),x.bc(),x.bc(),x.bd(37,Oe,6,27,"cu-user-and-groups-list-dropdown",11),x.vc(38,"async"),x.bc(),x.bd(39,Se,7,17,"div",12),x.vc(40,"async"),x.cc(41,"footer",13),x.cc(42,"div",14),x.bd(43,Ee,6,15,"cu-task-custom-fields-dropdown",15),x.vc(44,"async"),x.bd(45,je,2,4,"cu-priority-list-dropdown",16),x.vc(46,"async"),x.bd(47,Ue,2,4,"div",17),x.vc(48,"async"),x.bd(49,Fe,2,4,"div",17),x.vc(50,"async"),x.bd(51,Le,3,5,"cu-time-estimates-create-task",18),x.vc(52,"async"),x.bd(53,Ne,3,5,"cu-create-task-points-estimates",19),x.vc(54,"async"),x.vc(55,"async"),x.bc(),x.bc(),x.bc(),x.bd(56,qe,4,8,"div",20),x.bd(57,Ge,3,2,"div",21),x.vc(58,"async"),x.vc(59,"async"),x.bd(60,Ve,4,4,"ng-template",null,22,x.cd),x.bc(),x.bd(62,He,1,16,"ng-template",null,23,x.cd)),2&e){const e=x.Rc(36),i=x.Rc(61);let o=null,n=null,s=null,c=null,a=null,r=null,l=null,d=null,u=null,m=null,p=null,h=null,f=null,b=null;x.Dc("ngClass",x.Nc(105,We,t.isActive||t.isAlwaysActive,t.isHidden,!t.margin,t.isRow,t.forTimeline,t.showTitle,x.wc(1,31,t.missingRequired$)&&t.showMissingRequired)),x.Ib(2),x.Dc("ngIf",x.wc(3,33,t.missingRequired$)&&t.showMissingRequired),x.Ib(2),x.Dc("ngIf",t.showTitle),x.Ib(2),x.Dc("ngIf",(!x.wc(7,35,t.defaultSubcategory$)||t.alwaysDisplayLocation)&&(!(null!=t.defaultData&&t.defaultData.parent)||!x.wc(8,37,t.selectedSubcategory$))),x.Ib(4),x.Dc("dateFormatting",null==(o=x.wc(11,39,t.sharedData.currentUser))?null:o.date_format)("militaryTime",null==(n=x.wc(12,41,t.sharedData.currentUser))?null:n.twenty_four_hr_setting)("weights",x.wc(13,43,t.weights$))("meUser",x.wc(14,45,t.sharedData.currentUser))("users",t.users)("userGroups",x.wc(15,47,t.userGroups$))("team",x.wc(16,49,t.sharedData.compatCurrentTeam$))("points",null==(s=x.wc(17,51,t.sharedData.compatCurrentTeam$))?null:s.points_scale)("priorities",null==(c=x.wc(18,53,t.selectedProject$))||null==c.features||null==c.features.priorities?null:c.features.priorities.priorities)("tags",x.wc(19,55,t.tagsMap$)[null==(a=x.wc(20,57,t.selectedProject$))?null:a.id])("allowedCommands",x.Oc(113,Ke,null==(r=x.wc(21,59,t.selectedProject$))||null==r.features||null==r.features.priorities?null:r.features.priorities.enabled,null==(r=x.wc(22,61,t.selectedProject$))||null==r.features||null==r.features.due_dates?null:r.features.due_dates.enabled,null==(r=x.wc(23,63,t.selectedProject$))||null==r.features||null==r.features.due_dates?null:r.features.due_dates.enabled,null==(r=x.wc(24,65,t.selectedProject$))||null==r.features||null==r.features.due_dates?null:r.features.due_dates.enabled,null==(r=x.wc(25,67,t.selectedProject$))||null==r.features||null==r.features.tags?null:r.features.tags.enabled,!x.wc(26,69,t.defaultSubcategory$),null==(r=x.wc(27,71,t.selectedProject$))||null==r.features||null==r.features.time_estimates?null:r.features.time_estimates.enabled,null==(r=x.wc(28,73,t.selectedProject$))||null==r.features||null==r.features.points?null:r.features.points.enabled))("currentValues",x.Oc(129,Ye,t.assignees,t.groupAssignees,t.followers,t.priority,x.Ic(122,Qe,t.dueDateValue,t.dueDateTimeValue),t.tags,t.points,x.Jc(125,Ze,x.wc(29,75,t.selectedProject$),t.category,x.wc(30,77,t.selectedSubcategory$))))("options",x.Ic(142,tt,x.Hc(138,Je,null==(l=x.wc(31,79,t.selectedProject$))?null:l.multiple_assignees),x.Hc(140,et,null==(l=x.wc(32,81,t.selectedProject$))||null==l.permissions?null:l.permissions.manage_tags)))("dropdownPlacement",t.slashCommandsPlacement)("dropdownContainer",t.slashCommandsContainer),x.Ib(24),x.Dc("icon","cu2-close"),x.Ib(3),x.Dc("ngIf",x.wc(38,83,t.selectedSubcategory$)&&t.showAssignee),x.Ib(2),x.Dc("ngIf",(null==(d=x.wc(40,85,t.selectedProject$))||null==d.features||null==d.features.tags?null:d.features.tags.enabled)&&t.showTags),x.Ib(4),x.Dc("ngIf",(null==(u=x.wc(44,87,t.selectedProject$))||null==u.features||null==u.features.custom_fields?null:u.features.custom_fields.enabled)&&(null==t.locationCustomFields?null:t.locationCustomFields.length)),x.Ib(2),x.Dc("ngIf",(null==(m=x.wc(46,89,t.selectedProject$))||null==m.features||null==m.features.priorities?null:m.features.priorities.enabled)&&t.showPriority),x.Ib(2),x.Dc("ngIf",(null==(p=x.wc(48,91,t.selectedProject$))||null==p.features||null==p.features.due_dates?null:p.features.due_dates.enabled)&&t.showStartDate),x.Ib(2),x.Dc("ngIf",(null==(h=x.wc(50,93,t.selectedProject$))||null==h.features||null==h.features.due_dates?null:h.features.due_dates.enabled)&&t.showDueDate),x.Ib(2),x.Dc("ngIf",null==(f=x.wc(52,95,t.selectedProject$))||null==f.features||null==f.features.time_estimates?null:f.features.time_estimates.enabled),x.Ib(2),x.Dc("ngIf",(null==(b=x.wc(54,97,t.selectedProject$))||null==b.features||null==b.features.points?null:b.features.points.enabled)&&!(null!=(b=x.wc(55,99,t.sharedData.compatCurrentTeam$))&&b.points_limit_reached)),x.Ib(3),x.Dc("ngIf",!t.hideDirectionSelector),x.Ib(1),x.Dc("ngIf",x.wc(58,101,t.selectedSubcategory$)&&(null==e?null:e.value)&&!x.wc(59,103,t.missingRequired$))("ngIfElse",i)}},directives:[J.o,ee.a,J.q,z.b,te.a,ie.a,oe.a,J.t,ne.a,se.a,ce.a,ae.a,re.a,le.a,de.a,J.x,ue.a,me.a,pe.a],pipes:[J.b],styles:[".cu-quick-create-task-panel{display:block}.cu-quick-create-task-panel__subcategory{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-quick-create-task-panel__tags{margin:5px 10px 0}.cu-quick-create-task-panel__title{background:#7b68ee;position:absolute;top:-20px;left:-1px;height:20px;padding:4px 6px;border-radius:3px 3px 0 0;color:#fff;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif}@supports (--theme-main-color:#7b68ee){.cu-quick-create-task-panel__title{background:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),e})()},a5Nn:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("ofXK"),n=i("EDFS"),s=i("bFKe"),c=i("KyjD"),a=i("1M0N"),r=i("K0KF"),l=i("gb9A"),d=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[o.c,r.a,l.a,c.a,n.d,a.a,s.b]]}),e})()},aCXt:function(e,t,i){"use strict";var o=i("/qNp");function n(){}e.exports=c,n.prototype=Error.prototype;var s=c.prototype=new n;function c(e,t,i){var n,s,c;"string"==typeof t&&(i=t,t=null),n=function(e){var t,i=[null,null];return"string"==typeof e&&(-1===(t=e.indexOf(":"))?i[1]=e:(i[0]=e.slice(0,t),i[1]=e.slice(t+1))),i}(i),s=o(t)||"1:1",c={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(c=t,t=t.start):c.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=s,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=c,this.source=n[0],this.ruleId=n[1]}s.file="",s.name="",s.reason="",s.message="",s.stack="",s.fatal=null,s.column=null,s.line=null},aIzb:function(e,t,i){"use strict";i.d(t,"a",function(){return gt});var o=i("y2LM"),n=i("R0Ic"),s=i("hr9B"),c=i("tk/3"),a=i("fXoL"),r=i("l7P3"),l=i("2Vo4"),d=i("XNiG"),u=i("LRne"),m=i("vkgz"),p=i("pLZG"),h=i("eIep"),f=i("lJxs"),b=i("IzEk"),g=i("1G5W"),_=i("Kj3r"),v=i("SxV6"),k=i("/qOb"),y=i("GXRk"),w=i("Gj5t"),x=i("dTHz"),I=i("jJQC"),T=i("lE2N"),C=i("BeL+"),D=i("3Mw7"),O=i("cgri"),S=i("c3rA"),E=i("o7Ov"),P=i("AeD3"),j=i("jJW4"),A=i("76Cs"),$=i("ofXK"),U=i("HcWw"),R=i("LdyQ"),M=i("MJvn"),F=i("UdVN"),L=i("n+1/"),N=i("pxPQ"),z=i("itXk"),q=i("hUS4"),G=i("7kSr"),V=i("NsZK"),B=i("BTFG");let X=(()=>{class e{transform(e){let t="";return e?(e.project_name&&(t+=""+e.project_name),e.category&&e.category.name&&!e.category.hidden&&(e.project_name&&(t+=" > "),t+=""+e.category.name),e.subcategory&&e.subcategory.name&&((e.project_name||e.category&&e.category.name&&!e.category.hidden)&&(t+=" > "),t+=""+e.subcategory.name),t):t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Vb({name:"taskBreadcrumbs",type:e,pure:!0}),e})();function H(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-task-recent-item",5),a.qc("click",function(i){a.Uc(e);const o=t.$implicit;return a.uc(2).click(o,i)}),a.vc(1,"taskBreadcrumbs"),a.bc()}if(2&e){const e=t.$implicit,i=t.index,o=a.uc(2);a.Dc("task",e)("selected",i===o.selectedIndex)("cuTooltip",a.wc(1,3,e))}}function W(e,t){1&e&&a.Xb(0,"cu-loader")}function K(e,t){if(1&e){const e=a.dc();a.ac(0),a.cc(1,"div",2),a.qc("onReachBottom",function(){return a.Uc(e),a.uc().checkForPaging()}),a.bd(2,H,2,5,"cu-task-recent-item",3),a.vc(3,"async"),a.bd(4,W,1,0,"cu-loader",4),a.bc(),a.Zb()}if(2&e){const e=a.uc();a.Ib(2),a.Dc("ngForOf",a.wc(3,3,e.items$))("ngForTrackBy",e.trackById),a.Ib(2),a.Dc("ngIf",e.pagingFetch)}}function Q(e,t){1&e&&a.Xb(0,"cu-loader")}function Z(e,t){1&e&&(a.cc(0,"div"),a.gc(1,6),a.bc())}function Y(e,t){if(1&e&&(a.ac(0),a.bd(1,Q,1,0,"cu-loader",4),a.bd(2,Z,2,0,"div",4),a.Zb()),2&e){const e=a.uc(2);a.Ib(1),a.Dc("ngIf",e.fetching),a.Ib(1),a.Dc("ngIf",!e.fetching)}}function J(e,t){if(1&e&&a.bd(0,Y,3,2,"ng-container",4),2&e){const e=a.uc();a.Dc("ngIf",e.forSearchSelector)}}let ee=(()=>{class e{constructor(e,t){this.store=e,this.changeDetectorRef=t,this.destroy$=new d.a,this.forSearchSelector=!1,this.fetching=!1,this.pagingFetch=!1,this.team$=this.store.select(S.getTeam),this.taskIdsToExclude$=new l.a([]),this.trackById=Object(I.d)("id"),this.onSelect=new a.o,this.onGeometryChange=new a.o,this.onPage=new a.o,this.selectedIndex=0}ngOnInit(){this.selectorToUse=this.forSearchSelector?O.Q:O.l;const e=this.store.pipe(Object(r.select)(this.selectorToUse),Object(m.a)(e=>{(!e||this.selectedIndex>e.length-1)&&(this.selectedIndex=0,this.changeDetectorRef.markForCheck())}));this.items$=Object(z.a)([e,this.taskIdsToExclude$]).pipe(Object(f.a)(([e,t])=>t&&e?e.filter(e=>!t.includes(e.id)):e)),this.forSearchSelector||this.store.dispatch(new D.t({milestonesOnly:this.milestonesOnly})),this.items$.pipe(Object(g.a)(this.destroy$)).subscribe(()=>{this.onGeometryChange.emit()})}ngOnChanges(e){e.taskIdsToExclude&&this.taskIdsToExclude$.next(this.taskIdsToExclude)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}handleKey(e){this.items$.pipe(Object(v.a)()).subscribe(t=>{if(t){switch(e.key){case k.c.ENTER:this.selectedIndex<=t.length&&this.onSelect.emit(t[this.selectedIndex]);break;case k.a.ARROW_UP:this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=t.length-1);break;case k.a.ARROW_DOWN:this.selectedIndex++,this.selectedIndex>t.length-1&&(this.selectedIndex=0);break;case k.c.SPACE:if(1===t.length)return this.onSelect.emit(t[0]),!0}this.changeDetectorRef.markForCheck()}})}click(e,t){t.preventDefault(),t.stopPropagation(),this.onSelect.emit(e)}checkForPaging(){this.forSearchSelector&&(!this.paging||this.paging.last_page||this.pagingFetch||this.onPage.emit({paging:this.paging,params:this.params}))}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(r.Store),a.Wb(a.h))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-task-recent"]],hostAttrs:[1,"cu-task-recent"],inputs:{forSearchSelector:"forSearchSelector",fetching:"fetching",pagingFetch:"pagingFetch",paging:"paging",params:"params",taskIdsToExclude:"taskIdsToExclude",milestonesOnly:"milestonesOnly"},outputs:{onSelect:"onSelect",onGeometryChange:"onGeometryChange",onPage:"onPage"},features:[a.Gb],decls:4,vars:4,consts:function(){let e;return e=$localize`:@@common_empty-contents␟7bd026ec8c126b7a7fca608bf69021a3ecbc93a3␟8309437889986953420: Nothing to see here `,[[4,"ngIf","ngIfElse"],["showPlaceholder",""],["cuScrollDetector","","offsetBottom","100",1,"cu-task-recent__body",3,"onReachBottom"],["tooltipDelay","200",3,"task","selected","cuTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["tooltipDelay","200",3,"task","selected","cuTooltip","click"],e]},template:function(e,t){if(1&e&&(a.bd(0,K,5,5,"ng-container",0),a.vc(1,"async"),a.bd(2,J,1,1,"ng-template",null,1,a.cd)),2&e){const e=a.Rc(3);let i=null;a.Dc("ngIf",null==(i=a.wc(1,2,t.items$))?null:i.length)("ngIfElse",e)}},directives:[$.q,q.a,$.p,G.a,V.a,B.a],pipes:[$.b,X],styles:[".cu-task-recent{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}.cu-task-recent__body{flex-grow:1;overflow-y:auto;max-height:400px;background:#fff}.cu-os-win .cu-task-recent__body{scrollbar-width:thin}.cu-os-win .cu-task-recent__body::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-task-recent__body::-webkit-scrollbar-track,.cu-os-win .cu-task-recent__body::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-task-recent__body::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-task-recent__body::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-task-recent__body::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-task-recent__body::-webkit-scrollbar,.cu-os-win .dark-theme .cu-task-recent__body::-webkit-scrollbar,.cu-os-win.dark-theme .cu-task-recent__body::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-task-recent__body::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-task-recent__body::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-task-recent__body::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-task-recent__body::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-task-recent__body::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-task-recent__body::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-task-recent__body::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .cu-task-recent__body{background:#384047}"],encapsulation:2,changeDetection:0}),e})();var te=i("bFKe"),ie=i("nNpr");const oe=["searchInput"],ne=["taskRecentList"],se=["scrollbar"];function ce(e,t){if(1&e&&a.Xb(0,"div",8),2&e){const e=a.uc();a.Dc("innerHTML",e.description,a.Vc)}}function ae(e,t){if(1&e&&a.Xb(0,"div",9),2&e){const e=a.uc();a.Dc("innerHTML",e.notice,a.Vc)}}function re(e,t){if(1&e&&(a.cc(0,"div",10),a.cc(1,"div",11),a.Xb(2,"div",12),a.bc(),a.cc(3,"div",13),a.dd(4),a.bc(),a.bc()),2&e){const e=a.uc();a.Ib(4),a.ed(e.errorMsg)}}const le=function(e){return{"cu-search_loading":e}};function de(e,t){if(1&e){const e=a.dc();a.cc(0,"div",14),a.cc(1,"div",15),a.cc(2,"input",16,17),a.qc("input",function(t){return a.Uc(e),a.uc().debounceSearch.next(t.target.value)}),a.bc(),a.cc(4,"div",18),a.Xb(5,"i",19),a.bc(),a.cc(6,"div",20),a.Xb(7,"i",21),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc();a.Ib(1),a.Dc("ngClass",a.Hc(2,le,e.isLoading)),a.Ib(1),a.Dc("placeholder",e.searchInputPlaceholder?e.searchInputPlaceholder:"Search for task"+(e.searchSubtasks?" (or subtask)":"")+" name, ID, or URL")}}function ue(e,t){1&e&&(a.ac(0),a.gc(1,40),a.Zb())}function me(e,t){1&e&&(a.ac(0),a.gc(1,41),a.Zb())}function pe(e,t){1&e&&(a.ac(0),a.gc(1,42),a.Zb())}function he(e,t){1&e&&(a.ac(0),a.gc(1,43),a.Zb())}function fe(e,t){if(1&e&&(a.ac(0,37),a.bd(1,ue,2,0,"ng-container",38),a.bd(2,me,2,0,"ng-container",38),a.bd(3,pe,2,0,"ng-container",38),a.bd(4,he,2,0,"ng-container",39),a.Zb()),2&e){const e=t.$implicit,i=a.uc(4);a.Dc("ngSwitch",e),a.Ib(1),a.Dc("ngSwitchCase",i.SearchTaskType.ALL),a.Ib(1),a.Dc("ngSwitchCase",i.SearchTaskType.NAME),a.Ib(1),a.Dc("ngSwitchCase",i.SearchTaskType.DESCRIPTION)}}const be=function(e){return{title:e}};function ge(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-dropdown-list-item",45),a.qc("click",function(){a.Uc(e);const i=t.$implicit;return a.uc(5).updateSearchTaskType(i.id)}),a.bc()}2&e&&a.Dc("item",a.Hc(1,be,t.$implicit.display))}function _e(e,t){if(1&e&&(a.cc(0,"div"),a.bd(1,ge,1,3,"cu-dropdown-list-item",44),a.bc()),2&e){const e=a.uc(4);a.Ib(1),a.Dc("ngForOf",e.searchTaskTypeList)("ngForTrackBy",e.trackById)}}function ve(e,t){if(1&e&&(a.cc(0,"div",29),a.cc(1,"div",30),a.cc(2,"div",31),a.ac(3),a.gc(4,32),a.Zb(),a.dd(5,": "),a.bc(),a.cc(6,"div",33),a.bd(7,fe,5,4,"ng-template",34),a.vc(8,"async"),a.Xb(9,"div",35),a.bc(),a.bc(),a.bd(10,_e,2,2,"div",36),a.bc()),2&e){const e=a.uc(3);a.Dc("@loadingOptions",void 0),a.Ib(7),a.Dc("ngIf",a.wc(8,2,e.searchTaskType$))}}function ke(e,t){if(1&e&&(a.ac(0),a.bd(1,ve,11,4,"div",28),a.vc(2,"async"),a.Zb()),2&e){a.uc();const e=a.Rc(4),t=a.uc();let i=null;a.Ib(1),a.Dc("ngIf",null==(i=a.wc(2,2,t.searchParams$))?null:i.searchQuery)("ngIfElse",e)}}function ye(e,t){1&e&&(a.ac(0),a.gc(1,46),a.Zb())}function we(e,t){1&e&&(a.ac(0),a.gc(1,47),a.Zb())}function xe(e,t){1&e&&(a.ac(0),a.gc(1,48),a.Zb())}function Ie(e,t){if(1&e){const e=a.dc();a.cc(0,"div",22),a.cc(1,"div",23),a.bd(2,ke,3,4,"ng-container",24),a.bd(3,ye,2,0,"ng-template",null,25,a.cd),a.bc(),a.cc(5,"div",26),a.qc("click",function(t){a.Uc(e);const i=a.uc();return i.browseTasks=!i.browseTasks,i.onDropdownReposition.emit(t)}),a.bd(6,we,2,0,"ng-container",5),a.bd(7,xe,2,0,"ng-template",null,27,a.cd),a.bc(),a.bc()}if(2&e){const e=a.Rc(8),t=a.uc();a.Ib(2),a.Dc("ngIf",!t.browseTasks),a.Ib(4),a.Dc("ngIf",t.browseTasks)("ngIfElse",e)}}function Te(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-task-recent",51,52),a.qc("onGeometryChange",function(t){return a.Uc(e),a.uc(2).onGeometryChange.emit(t)})("onSelect",function(t){return a.Uc(e),a.uc(2).selectTask(t)})("onPage",function(t){return a.Uc(e),a.uc(2).pageSearch(t)}),a.vc(2,"async"),a.vc(3,"async"),a.vc(4,"async"),a.vc(5,"async"),a.bc()}if(2&e){const e=a.uc(2);let t=null;a.Dc("forSearchSelector",!0)("fetching",a.wc(2,6,e.selectorFetching$))("paging",null==(t=a.wc(3,8,e.selectorDataMap$))?null:t.paging)("params",a.wc(4,10,e.searchParams$))("pagingFetch",a.wc(5,12,e.selectorPaging$))("taskIdsToExclude",e.taskIdsToExclude)}}function Ce(e,t){if(1&e){const e=a.dc();a.cc(0,"cu-task-recent",53,52),a.qc("onSelect",function(t){return a.Uc(e),a.uc(2).selectTask(t)})("onGeometryChange",function(t){return a.Uc(e),a.uc(2).onGeometryChange.emit(t)}),a.bc()}if(2&e){const e=a.uc(2);a.Dc("taskIdsToExclude",e.taskIdsToExclude)("milestonesOnly",e.milestonesOnly)}}function De(e,t){if(1&e&&(a.ac(0),a.bd(1,Te,6,14,"cu-task-recent",49),a.vc(2,"async"),a.bd(3,Ce,2,2,"cu-task-recent",50),a.vc(4,"async"),a.Zb()),2&e){const e=a.uc();let t=null,i=null;a.Ib(1),a.Dc("ngIf",null==(t=a.wc(2,2,e.searchParams$))?null:t.searchQuery),a.Ib(2),a.Dc("ngIf",!(null!=(i=a.wc(4,4,e.searchParams$))&&i.searchQuery))}}function Oe(e,t){if(1&e){const e=a.dc();a.cc(0,"div",57),a.cc(1,"div",58),a.cc(2,"div",59),a.gc(3,60),a.bc(),a.cc(4,"span",61),a.qc("click",function(t){return a.Uc(e),a.uc(2).openProjectList(t)}),a.dd(5),a.vc(6,"async"),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.uc(2);let t=null;a.Ib(5),a.ed(null==(t=a.wc(6,1,e.selectedProject$))?null:t.name)}}function Se(e,t){if(1&e&&(a.cc(0,"div",66),a.Xb(1,"div",67),a.cc(2,"a",68),a.dd(3),a.bc(),a.bc()),2&e){const e=a.uc().$implicit;a.Ib(3),a.fd(" ",e.name," ")}}const Ee=function(e){return{"task-mover-item_active":e}},Pe=function(){return[]};function je(e,t){if(1&e){const e=a.dc();a.cc(0,"div",64),a.qc("click",function(i){a.Uc(e);const o=t.$implicit;return a.uc(3).selectProjectEvent(o,i)}),a.vc(1,"async"),a.bd(2,Se,4,1,"div",65),a.vc(3,"isInArray"),a.bc()}if(2&e){const e=t.$implicit,i=a.uc(3);let o=null;a.Dc("ngClass",a.Hc(7,Ee,(null==(o=a.wc(1,2,i.selectedProject$))?null:o.id)===e.id)),a.Ib(2),a.Dc("ngIf",!a.xc(3,4,null==e?null:e.id,i.spacesToExclude?i.spacesToExclude:a.Gc(9,Pe)))}}function Ae(e,t){if(1&e&&(a.cc(0,"div",62),a.bd(1,je,4,10,"div",63),a.vc(2,"async"),a.bc()),2&e){const e=a.uc(2);a.Ib(1),a.Dc("ngForOf",a.wc(2,2,e.projectsWithShared$))("ngForTrackBy",e.trackById)}}function $e(e,t){if(1&e&&(a.ac(0),a.dd(1),a.Zb()),2&e){const e=a.uc(3);a.Ib(1),a.fd(" (",e.singleSubcategory.subcategory.taskcount,") ")}}function Ue(e,t){if(1&e&&(a.cc(0,"div",69),a.dd(1),a.bd(2,$e,2,1,"ng-container",24),a.bc()),2&e){const e=a.uc(2);a.Ib(1),a.fd(" ",e.singleSubcategory.subcategory.name," "),a.Ib(1),a.Dc("ngIf",e.singleSubcategory.subcategory.taskcount)}}const Re=function(e){return{"task-selector_open":e}};function Me(e,t){if(1&e){const e=a.dc();a.cc(0,"div",80),a.qc("click",function(){a.Uc(e);const t=a.uc().$implicit;return a.uc(4).clickCategory(t)}),a.Xb(1,"div",81),a.cc(2,"div",82),a.dd(3),a.bc(),a.bc()}if(2&e){const e=a.uc().$implicit;a.Ib(1),a.Dc("ngClass",a.Hc(2,Re,e.isOpen)),a.Ib(2),a.fd(" ",e.name," ")}}function Fe(e,t){}const Le=function(e,t){return{category:e,subcategory:t}};function Ne(e,t){if(1&e){const e=a.dc();a.cc(0,"div",77),a.cc(1,"div",80),a.qc("click",function(){a.Uc(e);const i=t.$implicit,o=a.uc().$implicit;return a.uc(4).clickSubcategory(o,i)}),a.Xb(2,"div",81),a.cc(3,"div",82),a.dd(4),a.bc(),a.bc(),a.cc(5,"div",79),a.bd(6,Fe,0,0,"ng-template",83),a.bc(),a.bc()}if(2&e){const e=t.$implicit,i=a.uc().$implicit;a.uc(2);const o=a.Rc(4);a.Ib(1),a.Ob("task-selector__cat-header_hidden",null==i?null:i.hidden),a.Ib(1),a.Dc("ngClass",a.Hc(7,Re,e.isOpen)),a.Ib(2),a.fd(" ",e.name," "),a.Ib(1),a.Dc("ngClass",a.Hc(9,Re,e.isOpen)),a.Ib(1),a.Dc("ngTemplateOutlet",o)("ngTemplateOutletContext",a.Ic(11,Le,i,e))}}function ze(e,t){if(1&e&&(a.cc(0,"div",77),a.bd(1,Me,4,4,"div",78),a.cc(2,"div",79),a.bd(3,Ne,7,14,"div",76),a.bc(),a.bc()),2&e){const e=t.$implicit,i=a.uc(4);a.Ib(1),a.Dc("ngIf",!(null!=e&&e.hidden)),a.Ib(1),a.Dc("ngClass",a.Hc(4,Re,e.isOpen)),a.Ib(1),a.Dc("ngForOf",e.subs)("ngForTrackBy",i.trackById)}}function qe(e,t){if(1&e&&(a.cc(0,"div",74,75),a.bd(2,ze,4,6,"div",76),a.bc()),2&e){const e=a.uc(3);a.Dc("hidden",e.isLoading),a.Ib(2),a.Dc("ngForOf",e.dataList)("ngForTrackBy",e.trackById)}}function Ge(e,t){}function Ve(e,t){if(1&e&&a.bd(0,Ge,0,0,"ng-template",83),2&e){a.uc();const e=a.Rc(4),t=a.uc(2);a.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",a.Ic(2,Le,t.singleSubcategory.category,t.singleSubcategory.subcategory))}}function Be(e,t){1&e&&a.Xb(0,"div",95),2&e&&a.Dc("icon","cu2-subtask")}const Xe=function(e){return{"task-selector__task-simple-status_closed":e}};function He(e,t){if(1&e&&a.Xb(0,"div",96),2&e){const e=a.uc(3).$implicit,t=a.uc(4);a.Dc("ngClass",a.Hc(1,Xe,e.status.type===t.StatusTypes.Closed))}}const We=function(e){return{"background-color":e}};function Ke(e,t){if(1&e&&a.Xb(0,"div",97),2&e){const e=a.uc(3).$implicit;a.Ob("task-selector__custom-type",!(null==e||!e.custom_type)),a.Dc("ngStyle",a.Hc(3,We,e.status.color))}}function Qe(e,t){if(1&e){const e=a.dc();a.cc(0,"div",98),a.qc("click",function(t){a.Uc(e);const i=a.uc(3).$implicit,o=a.uc(),n=o.category,s=o.subcategory,c=a.uc(3);return c.toggleSubtasks(i,n.id,s.id,c.dependencyTaskId&&c.dependencyTaskId===i.id,t)}),a.cc(1,"span"),a.dd(2),a.bc(),a.Xb(3,"div",95),a.bc()}if(2&e){const e=a.uc(3).$implicit;a.Ib(2),a.ed(null==e?null:e.subtasks_count),a.Ib(1),a.Dc("icon","cu2-subtask")}}const Ze=function(e,t){return{"task-selector_active":e,"task-selector_disabled":t}};function Ye(e,t){if(1&e){const e=a.dc();a.cc(0,"div",87),a.qc("click",function(){a.Uc(e);const t=a.uc(2).$implicit,i=a.uc(),o=i.subcategory,n=i.category,s=a.uc(3);return s.selectTask(t,o.tasks,n.id,o.id,null,s.dependencyTaskId&&s.dependencyTaskId===t.id)}),a.bd(1,Be,1,1,"div",88),a.bd(2,He,1,3,"div",89),a.bd(3,Ke,1,5,"ng-template",null,90,a.cd),a.cc(5,"div",91),a.cc(6,"div",92),a.dd(7),a.bc(),a.bd(8,Qe,4,2,"div",93),a.bc(),a.cc(9,"div",94),a.dd(10),a.bc(),a.bc()}if(2&e){const e=a.Rc(4),t=a.uc(2).$implicit,i=a.uc(4);a.Ob("task-selector__task_single-subcategory",!!i.singleSubcategory),a.Dc("ngClass",a.Ic(12,Ze,t.id===(null==i.selectedTask?null:i.selectedTask.id),i.requireCreateAndEdit&&t.permission_level!==i.createPermission||i.dependencyTaskId&&i.dependencyTaskId===t.id))("cuTooltip",i.requireCreateAndEdit&&t.permission_level!==i.createPermission||i.dependencyTaskId&&i.dependencyTaskId===t.id?"Can not select the current task.":null),a.Ib(1),a.Dc("ngIf",null==t?null:t.parent),a.Ib(1),a.Dc("ngIf",(null==t?null:t.simple_statuses)&&!(null!=t&&t.custom_type))("ngIfElse",e),a.Ib(4),a.Ob("task-selector__custom-type-name",!(null==t||!t.custom_type)),a.Ib(1),a.fd(" ",t.name," "),a.Ib(1),a.Dc("ngIf",(null==t?null:t.subtasks_count)&&i.expandableSubtasks),a.Ib(2),a.fd("#",t.id,"")}}function Je(e,t){1&e&&a.Xb(0,"cu-loader")}function et(e,t){if(1&e&&a.Xb(0,"div",96),2&e){const e=a.uc(2).$implicit,t=a.uc(7);a.Dc("ngClass",a.Hc(1,Xe,e.status.type===t.StatusTypes.Closed))}}function tt(e,t){if(1&e&&a.Xb(0,"div",97),2&e){const e=a.uc(2).$implicit;a.Dc("ngStyle",a.Hc(1,We,null==e||null==e.status?null:e.status.color))}}const it=function(e){return{"task-selector_disabled":e}};function ot(e,t){if(1&e){const e=a.dc();a.cc(0,"div",87),a.qc("click",function(){a.Uc(e);const t=a.uc().$implicit,i=a.uc(3).$implicit,o=a.uc(),n=o.category,s=o.subcategory;return a.uc(3).selectTask(t,null==i?null:i.subtasks,n.id,s.id,i.id)}),a.Xb(1,"div",95),a.bd(2,et,1,3,"div",100),a.bd(3,tt,1,3,"div",101),a.cc(4,"div",91),a.cc(5,"div",92),a.dd(6),a.bc(),a.bc(),a.cc(7,"div",94),a.dd(8),a.bc(),a.bc()}if(2&e){const e=a.uc().$implicit,t=a.uc(7);a.Dc("ngClass",a.Hc(7,it,t.requireCreateAndEdit&&e.permission_level!==t.createPermission||t.dependencyTaskId&&t.dependencyTaskId===e.id))("cuTooltip",t.requireCreateAndEdit&&e.permission_level!==t.createPermission||t.dependencyTaskId&&t.dependencyTaskId===e.id?"Can not select the current task.":null),a.Ib(1),a.Dc("icon","cu2-subtask"),a.Ib(1),a.Dc("ngIf",null==e?null:e.simple_statuses),a.Ib(1),a.Dc("ngIf",!(null!=e&&e.simple_statuses)),a.Ib(3),a.fd(" ",e.name," "),a.Ib(2),a.fd("#",e.id,"")}}function nt(e,t){if(1&e&&(a.ac(0),a.bd(1,ot,9,9,"div",99),a.Zb()),2&e){const e=t.$implicit,i=a.uc(7);a.Ib(1),a.Dc("ngIf",!i.hiddenTasksMap[e.id])}}function st(e,t){if(1&e&&(a.cc(0,"div"),a.bd(1,nt,2,1,"ng-container",84),a.bc()),2&e){const e=a.uc(2).$implicit,t=a.uc(4);a.Ib(1),a.Dc("ngForOf",e.subtasks)("ngForTrackBy",t.trackById)}}function ct(e,t){if(1&e&&(a.cc(0,"div"),a.bd(1,Ye,11,15,"div",86),a.bd(2,Je,1,0,"cu-loader",24),a.bd(3,st,2,2,"div",24),a.bc()),2&e){const e=a.uc().$implicit,t=a.uc(4);a.Ib(1),a.Dc("ngIf",!(t.dependencyTaskId&&t.dependencyTaskId===e.id)||t.dependencyTaskId&&t.dependencyTaskId===e.id&&(null==e?null:e.subtasks_count)&&t.expandableSubtasks),a.Ib(1),a.Dc("ngIf",e.loading),a.Ib(1),a.Dc("ngIf",!e.loading&&(null==e||null==e.subtasks?null:e.subtasks.length)&&e.isOpen)}}function at(e,t){if(1&e&&(a.ac(0),a.bd(1,ct,4,3,"div",24),a.Zb()),2&e){const e=t.$implicit,i=a.uc(4);a.Ib(1),a.Dc("ngIf",!i.hiddenTasksMap[e.id])}}function rt(e,t){if(1&e){const e=a.dc();a.cc(0,"div",102),a.qc("click",function(t){a.Uc(e);const i=a.uc(),o=i.category,n=i.subcategory,s=a.uc(3);return s.loadTasks(o,n,s.showSubtasks,t)}),a.gc(1,103),a.bc()}if(2&e){const e=a.uc(4);a.Ob("task-selector__show-more_single-subcategory",!!e.singleSubcategory)}}function lt(e,t){1&e&&(a.cc(0,"div"),a.Xb(1,"cu-loader"),a.bc())}function dt(e,t){if(1&e&&(a.bd(0,at,2,1,"ng-container",84),a.bd(1,rt,2,2,"div",85),a.bd(2,lt,2,0,"div",24)),2&e){const e=t.subcategory,i=a.uc(3);a.Dc("ngForOf",e.tasks)("ngForTrackBy",i.trackById),a.Ib(1),a.Dc("ngIf",e.showMore&&!e.isLoading),a.Ib(1),a.Dc("ngIf",e.isLoading)}}function ut(e,t){1&e&&(a.cc(0,"div",104),a.Xb(1,"cu-loader"),a.bc())}function mt(e,t){1&e&&(a.cc(0,"div",105),a.gc(1,106),a.bc())}function pt(e,t){if(1&e){const e=a.dc();a.cc(0,"div",110),a.qc("click",function(){a.Uc(e);const i=t.$implicit,o=a.uc(4);return o.selectTask(i,null,null==i.category?null:i.category.id,null==i.subcategory?null:i.subcategory.id,null,o.dependencyTaskId&&o.dependencyTaskId===i.id)}),a.cc(1,"div",111),a.Xb(2,"div",97),a.cc(3,"div",91),a.cc(4,"div",92),a.dd(5),a.bc(),a.bc(),a.cc(6,"div",94),a.dd(7),a.bc(),a.bc(),a.bc()}if(2&e){const e=t.$implicit;a.Ib(2),a.Dc("ngStyle",a.Hc(5,We,e.status.color)),a.Ib(3),a.ed(e.name),a.Ib(2),a.hd(" #",e.id," | ",e.category.name," > ",e.subcategory.name," ")}}function ht(e,t){if(1&e&&(a.ac(0),a.cc(1,"div",107),a.gc(2,108),a.bc(),a.bd(3,pt,8,7,"div",109),a.Zb()),2&e){const e=a.uc(3);a.Ib(3),a.Dc("ngForOf",e.extraTasks)("ngForTrackBy",e.trackById)}}function ft(e,t){if(1&e&&(a.ac(0),a.bd(1,qe,3,3,"div",70),a.bd(2,Ve,1,5,void 0,24),a.bd(3,dt,3,4,"ng-template",null,71,a.cd),a.bd(5,ut,2,0,"div",72),a.bd(6,mt,2,0,"div",73),a.bd(7,ht,4,2,"ng-container",24),a.Zb()),2&e){const e=a.uc(2);a.Ib(1),a.Dc("ngIf",!e.singleSubcategory&&e.dataList),a.Ib(1),a.Dc("ngIf",e.singleSubcategory&&!e.isLoading&&(null==e.dataList?null:e.dataList.length)>0),a.Ib(3),a.Dc("ngIf",e.isLoading),a.Ib(1),a.Dc("ngIf",!e.isLoading&&0===(null==e.dataList?null:e.dataList.length)&&0===(null==e.extraTasks?null:e.extraTasks.length)),a.Ib(1),a.Dc("ngIf",!e.isLoading&&0===e.dataList.length&&0!==(null==e.extraTasks?null:e.extraTasks.length))}}function bt(e,t){if(1&e&&(a.bd(0,Oe,7,3,"div",54),a.bd(1,Ae,3,4,"div",55),a.bd(2,Ue,3,2,"div",56),a.bd(3,ft,8,5,"ng-container",24)),2&e){const e=a.uc();a.Dc("ngIf",!e.showProjectList&&!e.singleSubcategory),a.Ib(1),a.Dc("ngIf",e.showProjectList),a.Ib(1),a.Dc("ngIf",e.singleSubcategory),a.Ib(1),a.Dc("ngIf",!e.showProjectList)}}let gt=(()=>{class e{constructor(e,t,i,n,s){this.dataService=e,this.sharedData=t,this.changeDetector=i,this.taskService=n,this.store=s,this.taskUrlRegexp=/\S+\.clickup\.com\/t\/(.+)/,this.isLoading=!1,this.createPermission=x.e.CREATE,this.debounceSearch=new l.a(""),this.dataList=[],this.showProjectList=!1,this.removedTasks={},this.foundTasks=[],this.extraTasks=[],this.destroy$=new d.a,this.StatusTypes=y.g,this.browseTasks=!1,this.SearchTaskType=o.c,this.searchTaskType$=this.store.pipe(Object(r.select)(O.P)),this.searchTaskTypeList=o.g,this.searchParams$=this.store.pipe(Object(r.select)(O.O)),this.projectsWithShared$=this.store.select(S.getProjectsWithShared),this.selectorFetching$=this.store.pipe(Object(r.select)(O.L)),this.selectorPaging$=this.store.pipe(Object(r.select)(O.N)),this.selectorDataMap$=this.store.pipe(Object(r.select)(O.M),Object(m.a)(e=>{})),this.selectedProjectId$=new l.a(null),this.selectedProject$=this.selectedProjectId$.pipe(Object(p.a)(e=>!!e),Object(h.a)(e=>e===w.h?Object(u.a)({id:w.h,name:"Shared with me",permissions:null}):this.store.pipe(Object(r.select)(Object(S.getProjectById)(e))))),this.isLoading$=this.selectedProjectId$.pipe(Object(p.a)(e=>!!e),Object(h.a)(e=>this.store.pipe(Object(r.select)(Object(S.getLoadingCategoriesById)(e))))),this.categories$=this.selectedProjectId$.pipe(Object(p.a)(e=>!!e),Object(m.a)(e=>{e!==w.h&&this.store.dispatch(new E.Lf(e))}),Object(h.a)(e=>e===w.h?this.store.select(S.getCategoriesWithShared):this.store.pipe(Object(r.select)(Object(S.getCategoriesById)(e)),Object(f.a)(e=>e||[]),Object(b.a)(1)))),this.requireCreateAndEdit=!1,this.excludeCurrentTask=!0,this.excludeParentTask=!0,this.showSearch=!0,this.showSubtasks=!1,this.disabled=!1,this.searchSubtasks=!1,this.modifier="",this.categoryList=[],this.expandableSubtasks=!0,this.handleGlobalKeys=!1,this.excludeArchived=!1,this.spacesToExclude=[],this.spacesToInclude=[],this.showRecent=!0,this.onSelect=new a.o,this.onLoad=new a.o,this.onProjectSelected=new a.o,this.onDropdownReposition=new a.o,this.onGeometryChange=new a.o,this.onSearch=new a.o,this.hiddenTasksMap={},this.trackById=Object(I.d)("id")}ngOnInit(){this.searchParams$.pipe(Object(g.a)(this.destroy$)).subscribe(e=>{e.searchQuery&&!this.browseTasks&&this.store.dispatch(new D.cb({params:Object.assign(Object.assign({},e),{milestonesOnly:this.milestonesOnly})}))}),this.taskService.onTaskCreate.pipe(Object(p.a)(e=>e&&"create"===e.type&&e.task&&e.task.category),Object(g.a)(this.destroy$)).subscribe(e=>{const t=(this.dataList||[]).findIndex(t=>t.id===e.task.category.id);if(-1!==t){const i=(this.dataList[t].subs||[]).findIndex(t=>t.id===e.task.subcategory.id);-1!==i&&(this.dataList[t].subs[i].tasks=null)}}),this.debounceSearch.pipe(Object(_.a)(250),Object(g.a)(this.destroy$)).subscribe(e=>this._search(e)),this.store.pipe(Object(r.select)(S.getDefaultProjectWithShared),Object(v.a)(),Object(p.a)(e=>!(!e||this.selectedProject&&this.selectedProject.name)),Object(g.a)(this.destroy$)).subscribe(e=>this.selectProject(e)),this.categories$.pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.categoryList=e,this.convertCategories(),this.isLoading=!1,this.changeDetector.detectChanges(),this.onLoad.emit()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.store.dispatch(new D.kb({searchQuery:""})),this.store.dispatch(new D.lb({selectorSearchTaskType:o.c.ALL}))}ngOnChanges(e){if(this.taskIdsToExclude&&e.taskIdsToExclude&&e.taskIdsToExclude.currentValue&&e.taskIdsToExclude.previousValue&&!this.singleSubcategory&&e.taskIdsToExclude.currentValue.length<e.taskIdsToExclude.previousValue.length){const t={};let i;e.taskIdsToExclude.currentValue.forEach(e=>t[e]=!0),e.taskIdsToExclude.previousValue.forEach(e=>{if(!t[e]){i=e;const t=this.removedTasks[i];if(t){const e=this.dataList.find(e=>e.id===t.categoryId);if(e){const i=e.subs.find(e=>e.id===t.subcategoryId);if(i){if(t.taskId){const e=(i.tasks||[]).find(e=>e.id===t.taskId);e&&e.subtasks&&(e.subtasks=[...e.subtasks,t.task],this.removeDuplicates&&(e.subtasks=Object(T.a)(e.subtasks,"id")))}else i.tasks=[...i.tasks,t.task],this.removeDuplicates&&(i.tasks=Object(T.a)(i.tasks,"id"));this.changeDetector.markForCheck()}}}}})}e.defaultProject&&this.selectProject(this.defaultProject),e&&e.query&&this.debounceSearch.next(e.query.currentValue),e.showRecent&&(this.browseTasks=!this.showRecent),e.taskIdsToExclude&&this.taskIdsToExclude&&(this.hiddenTasksMap=Object.fromEntries(this.taskIdsToExclude.map(e=>[e,!0])))}ngAfterViewInit(){this.showSearch&&setTimeout(()=>{this.searchInput.nativeElement.focus()},0)}updateSearchTaskType(e){this.store.dispatch(new D.lb({selectorSearchTaskType:e}))}filterTasks(e){return e&&e.length&&(this.excludeCurrentTask||this.excludeParentTask||this.taskIdsToExclude&&this.taskIdsToExclude.length||this.taskIdsToForSubtasks&&this.taskIdsToForSubtasks.length||this.excludeArchived)?e.filter(e=>(!this.task||e.id!==this.task.id||!this.excludeCurrentTask)&&(!this.task||e.id!==this.task.parent||!this.excludeParentTask)&&(!this.taskIdsToExclude||!this.isExcludedTask(e,null,null))&&(!this.taskIdsToForSubtasks||!this.taskIdsToForSubtasks.some(t=>t===e.id)||e.subtasks_count)&&(!this.task||!e.archived||!this.excludeArchived)):e}pageSearch(e){this.store.dispatch(new D.J(Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e.params),{milestonesOnly:this.milestonesOnly})})))}_search(e){if(this.sharedData.compatCurrentTeam)if(this.foundTasks=[],e.length){this.browseTasks&&(this.isLoading=!0),this.changeDetector.markForCheck();const t=this.taskUrlRegexp.exec(e),i=t&&2===t.length&&t[1];i&&(e="#"+i),this.searchSubscription&&this.searchSubscription.unsubscribe(),this.browseTasks||i?this.searchSubscription=this.dataService.searchTasks(this.sharedData.compatCurrentTeam.id,e,null,this.searchSubtasks?"false":"true",this.subcategoryId,this.milestonesOnly).subscribe(t=>{let o;if(this.extraTasks=[],this.selectedProject.id===w.h)o=[].concat.apply([],Object.values(t.results).map(e=>e.tasks));else if(t.results[this.selectedProject.id])o=t.results[this.selectedProject.id].tasks;else{for(const e in t.results)e!==this.selectedProject.id&&t.results[e].tasks&&(this.extraTasks=[...this.extraTasks,...t.results[e].tasks]);this.extraTasks=this.filterTasks(this.extraTasks)}!o&&this.extraTasks&&1===this.extraTasks.length&&i&&this.selectTask(this.extraTasks[0]),o?(o=this.filterTasks(o),i&&1===o.length&&this.selectTask(o[0]),this.dataList=this.convertTasks(o),this.dataList.forEach(e=>{e.subs.forEach(e=>{this.foundTasks=[...this.foundTasks,...e.tasks]})})):this.dataList=[],this.onSearch.emit({tasks:o||[],query:e}),this.selectSubcategory(),this.isLoading=!1,this.changeDetector.destroyed||this.changeDetector.detectChanges(),this.onDropdownReposition.emit()},e=>this.isLoading=!1):this.store.dispatch(new D.kb({searchQuery:e}))}else this.store.dispatch(new D.kb({searchQuery:""})),this.convertCategories(),this.changeDetector.destroyed||this.changeDetector.detectChanges(),this.onDropdownReposition.emit()}selectTask(e,t,i,o,n,s=!1){if(this.taskIdsToForSubtasks&&this.taskIdsToForSubtasks.find(t=>t===e.id))this.toggleSubtasks(e,null,null,!1);else if(!(this.disabled||s||this.requireCreateAndEdit&&e.permission_level!==this.createPermission||this.dependencyTaskId&&this.dependencyTaskId===e.id)){if(e.project=this.selectedProject,this.onSelect.emit({task:e,project:this.selectedProject,masterTask:this.task}),this.taskIdsToExclude&&t&&!this.singleSubcategory){const s=t.findIndex(t=>t.id===e.id);-1!==s&&(t.splice(s,1),this.removedTasks[e.id]={task:e,categoryId:i,subcategoryId:o,taskId:n})}if(this.taskIdsToExclude&&this.extraTasks&&!this.singleSubcategory){const t=this.extraTasks.findIndex(t=>t.id===e.id);-1!==t&&this.extraTasks.splice(t,1)}this.clearSearch()}}clearSearch(){this.showSearch&&this.searchInput&&this.searchInput.nativeElement.value&&(this.searchInput.nativeElement.value="",this._search(""))}clickCategory(e){e.isOpen=!e.isOpen,this.changeDetector.detectChanges(),this.onDropdownReposition.emit(),this.scrollbar&&this.scrollbar.update()}clickSubcategory(e,t){t.isOpen=!t.isOpen,!t.isOpen||!t.isLazyLoad||t.tasks&&0!==t.tasks.length||this.loadTasks(e,t,this.showSubtasks),this.changeDetector.detectChanges(),this.onDropdownReposition.emit(),this.scrollbar&&this.scrollbar.update()}toggleSubtasks(e,t,i,o,n){n&&(n.preventDefault(),n.stopPropagation()),o||(e.isOpen=!e.isOpen,e.isOpen&&!e.subtasks&&(e.subtasks=[],e.loading=!0,this.getSubtasks(e,t,i)))}loadTasks(e,t,i=!1,o){o&&o.stopPropagation();const n=t.tasks.length>0?t.tasks[t.tasks.length-1]:null;let s=null,c=null;n&&(s=n.orderindex.toString(),c=n.status?n.status.orderindex.toString():null),t.isLoading=!0;const a=this.dataService.getTasks(null,null,null,null,t.id,{subtasks:i},s,!1,!0,{statusIdx:c,milestones:this.milestonesOnly?"true":void 0});a.pipe(Object(h.a)(e=>{const t=e.tasks.map(e=>e.orderindex),i=Object(C.a)(t);return t.length!==i.length?this.dataService.orderindexRepair(this.sharedData.compatCurrentTeam.id,"orderindex").pipe(Object(h.a)(e=>a)):Object(u.a)(e)}),Object(g.a)(this.destroy$)).subscribe(i=>{t.isLoading=!1,i.tasks=this.filterTasks(i.tasks),this.dependencyTaskId&&i.tasks.forEach(i=>{this.dependencyTaskId===i.id&&i.subtasks_count&&(i.isOpen=!0,i.subtasks=[],i.loading=!0,this.getSubtasks(i,e,t))}),t.tasks.push(...i.tasks),t.showMore=!i.last_page,this.changeDetector.detectChanges(),this.onDropdownReposition.emit(),this.scrollbar&&this.scrollbar.update()},e=>t.isLoading=!1)}getSubtasks(e,t,i){const o=(new c.g).set("team_id",this.sharedData.compatCurrentTeam.id).set("parent",e.id);this.dataService.getTaskIds(o).pipe(Object(h.a)(e=>this.dataService.getTasksByIds(e.task_ids)),Object(g.a)(this.destroy$)).subscribe(o=>{e.loading=!1,e.subtasks=o.filter(o=>!(this.task&&o.id===this.task.id&&this.excludeCurrentTask||this.task&&this.taskIdsToExclude&&this.isExcludedTask(o,t,i,e))),this.changeDetector.markForCheck()},()=>e.loading=!1)}selectProjectEvent(e,t){t&&t.stopPropagation(),this.showProjectList=!1,this.selectProject(e),this.changeDetector.detectChanges(),this.onDropdownReposition.emit()}selectProject(e){if(e&&e.name){if(this.spacesToInclude.length&&this.spacesToExclude.length&&this.spacesToExclude.includes(e.id))return void this.selectProjectById(this.spacesToInclude[0]);this.selectProjectById(e.id)}this.changeDetector.detectChanges(),this.onDropdownReposition.emit()}selectProjectById(e){!e||this.selectedProject&&this.selectedProject.id===e||this.projectsWithShared$.pipe(Object(v.a)(),Object(f.a)(t=>t&&t.find(t=>t.id===e)),Object(p.a)(e=>!!e),Object(g.a)(this.destroy$)).subscribe(t=>{this.selectedProject=t,this.selectedProjectId$.next(e),this.showSearch&&this.searchInput&&(this.searchInput.nativeElement.value=""),this.onProjectSelected.emit()})}openProjectList(e){e.preventDefault(),e.stopPropagation(),this.showProjectList=!0,this.showSearch&&this.searchInput&&(this.searchInput.nativeElement.value=""),this.changeDetector.detectChanges(),this.onDropdownReposition.emit()}quillBlotKeyDown(e){this.docKeyDown(e.detail)}docKeyDown(e){if(this.handleGlobalKeys)switch(e.which){case k.a.ARROW_UP:this.selectPrev();break;case k.a.ARROW_DOWN:this.selectNext();break;case k.a.ENTER:this.selectedTask&&this.selectTask(this.selectedTask)}}selectSibling(e){if(0===this.foundTasks.length)return this.selectedTask=null,void this.changeDetector.markForCheck();if(this.selectedTask){const t=this.foundTasks.findIndex(e=>e.id===this.selectedTask.id);-1===t?this.selectedTask=this.foundTasks[0]:"down"===e?t<this.foundTasks.length-1&&(this.selectedTask=this.foundTasks[t+1]):t>0&&(this.selectedTask=this.foundTasks[t-1])}else this.selectedTask=this.foundTasks[0];this.changeDetector.markForCheck()}selectNext(){this.selectSibling("down")}selectPrev(){this.selectSibling("up")}isExcludedTask(e,t,i,o){if(this.singleSubcategory)return!1;const n=this.taskIdsToExclude.indexOf(e.id);return-1!==n&&t&&(this.removedTasks[e.id]={task:e,category:t,subcategory:i,parentTask:o}),-1!==n}convertCategories(){if(this.dataList=this.categoryList.map(e=>({id:e.id,name:e.name,projectId:e.project_id,override_statuses:e.override_statuses,statuses:e.statuses,isOpen:!!e.hidden,hidden:e.hidden,subs:e.subcategories.filter(e=>parseInt(e.taskcount,10)>0||this.subcategoryId===e.id).map(t=>({id:t.id,name:t.name,projectId:e.project_id,isOpen:!1,isLazyLoad:!0,tasks:[],taskcount:t.taskcount}))})),this.selectSubcategory(),this.defaultSubcategory){const e=this.dataList.find(e=>e.id===this.defaultSubcategory.category);if(e){this.clickCategory(e);const t=e.subs.find(e=>e.id===this.defaultSubcategory.id);this.clickSubcategory(e,t)}}}selectSubcategory(){if(this.subcategoryId){const e=this.dataList.find(e=>e.subs.some(e=>e.id===this.subcategoryId));if(e){this.clickCategory(e);const t=e.subs.find(e=>e.id===this.subcategoryId);this.clickSubcategory(e,t),this.singleSubcategory={category:e,subcategory:t}}}}findLocation(e,t){const i=this.categoryList.find(t=>t.id===e);if(i){const e=i.subcategories.find(e=>e.id===t);if(e)return{category:i,subcategory:e}}}convertTasks(e){const t=[];let i=null;return e.forEach(e=>{if(!i||i.id!==e.subcategory.id){let o,n=this.findLocation(e.category.id,e.subcategory.id);n?o=n.category.id:(n=this.findLocation(w.h,e.subcategory.id),n?o=w.h:(n=this.findLocation(w.d,e.subcategory.id),n&&(o=w.d)));const s=t.find(e=>e.id===o);if(s){if(i=s.subs.find(t=>t.id===e.subcategory.id),!i){const e=n&&n.subcategory;e&&(i={id:e.id,name:e.name,isOpen:!0,isLazyLoad:!1,tasks:[],taskcount:""},s.subs.push(i))}}else{const e=n&&n.category;if(e){const o=n&&n.subcategory;o&&(i={id:o.id,name:o.name,isOpen:!0,isLazyLoad:!1,tasks:[],taskcount:""},t.push({id:e.id,name:e.name,override_statuses:e.override_statuses,statuses:e.statuses,isOpen:!0,hidden:e.hidden,subs:[i]}))}}}i&&i.tasks.push(e)}),t}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(P.a),a.Wb(j.a),a.Wb(a.h),a.Wb(A.a),a.Wb(r.Store))},e.\u0275cmp=a.Qb({type:e,selectors:[["cu-task-selector"]],viewQuery:function(e,t){if(1&e&&(a.jd(oe,1),a.jd(ne,1),a.jd(se,1)),2&e){let e;a.Qc(e=a.rc())&&(t.searchInput=e.first),a.Qc(e=a.rc())&&(t.taskRecentList=e.first),a.Qc(e=a.rc())&&(t.scrollbar=e.first)}},hostAttrs:[1,"cu-task-selector"],hostBindings:function(e,t){1&e&&a.qc("slashCommandKeyDown",function(e){return t.quillBlotKeyDown(e)},!1,a.Sc)("keydown",function(e){return t.docKeyDown(e)},!1,a.Sc)},inputs:{query:"query",errorMsg:"errorMsg",requireCreateAndEdit:"requireCreateAndEdit",description:"description",notice:"notice",searchInputPlaceholder:"searchInputPlaceholder",excludeCurrentTask:"excludeCurrentTask",excludeParentTask:"excludeParentTask",showSearch:"showSearch",showSubtasks:"showSubtasks",disabled:"disabled",searchSubtasks:"searchSubtasks",modifier:"modifier",task:"task",categoryList:"categoryList",defaultProject:"defaultProject",taskIdsToExclude:"taskIdsToExclude",taskIdsToForSubtasks:"taskIdsToForSubtasks",removeDuplicates:"removeDuplicates",expandableSubtasks:"expandableSubtasks",dependencyTaskId:"dependencyTaskId",handleGlobalKeys:"handleGlobalKeys",excludeArchived:"excludeArchived",extraItemTemplate:"extraItemTemplate",spacesToExclude:"spacesToExclude",spacesToInclude:"spacesToInclude",subcategoryId:"subcategoryId",showRecent:"showRecent",defaultSubcategory:"defaultSubcategory",milestonesOnly:"milestonesOnly"},outputs:{onSelect:"onSelect",onLoad:"onLoad",onProjectSelected:"onProjectSelected",onDropdownReposition:"onDropdownReposition",onGeometryChange:"onGeometryChange",onSearch:"onSearch"},features:[a.Gb],decls:10,vars:11,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u;return e=$localize`:@@common_search-for␟fa175928c916b3599b30f1c07071cd5abbb040b0␟4997182893037887427:Search for`,t=$localize`:@@common_all-1␟8754c2dbc855d18ee90ffff136caedfd64f71e83␟7126464771610287155:all`,i=$localize`:@@common_search-task-type--task-names␟f412c3f4b6aadd3af2d64d31d762d59df4a9541b␟2761312009259087246:task names`,o=$localize`:@@common_search-task-type--descriptions␟3f52245b0b41f67e2779c90cf7f6e46985a6ca70␟947564000660826828:descriptions`,n=$localize`:@@common_search-task-type--comments␟4206a05d6b2a46cecb7e278847e0250d562120a1␟117954017715534854:comments`,s=$localize`:@@common_recent␟dea597d706dced2e5ee599210b9f3efca0f6bb38␟4911843450729688319:Recent`,c=$localize`:@@cu-task-selector__recent-search␟bcd1d44caa1517fd75553aac9bf5d3c59ed911a0␟6312826316234750425:Recent/Search`,a=$localize`:@@cu-task-selector__browse-tasks␟075b196fe00bb108ef6b2f6e57dba782cb889773␟2920443534662493485:Browse tasks`,r=$localize`:@@common_space␟52d92107e6b2e533468a728409354191bc7b0618␟8946906119075338535:Space`,l=$localize`:@@common_show-more-tasks␟60cc1b29d55a2aed1dbd967505c125c28c1578fd␟779110831658107764: Show more tasks `,d=$localize`:@@common_no-results-found␟43363166c9dc95ce2a4d1b3d8701c9acdcd88f9b␟2198315184859858738: No results found. `,u=$localize`:@@cu-task-selector__tasks-found-elsewhere␟b026c8b7c736c629ad38097c8a50b2468752d296␟2433312455028263393: Tasks found elsewhere `,[["class","task-selector__modal-description",3,"innerHTML",4,"ngIf"],["class","task-selector__modal-notice",3,"innerHTML",4,"ngIf"],["class","cu-form__error",4,"ngIf"],["class","task-selector__search",4,"ngIf"],["class","task-selector__header-recent",4,"ngIf"],[4,"ngIf","ngIfElse"],["showBrowsing",""],[3,"ngTemplateOutlet"],[1,"task-selector__modal-description",3,"innerHTML"],[1,"task-selector__modal-notice",3,"innerHTML"],[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],[1,"task-selector__search"],[1,"cu-search","cu-search_lg",3,"ngClass"],["type","text","cuAutoFocus","",1,"cu-search__input",3,"placeholder","input"],["searchInput",""],[1,"cu-search__icon"],[1,"cu-icon","cu-icon_search"],[1,"cu-search__spinner"],[1,"cu-icon","cu-icon_spinner"],[1,"task-selector__header-recent"],[1,"task-selector__header-recent-title"],[4,"ngIf"],["showRecentTitle",""],[1,"task-selector__header-browse-tasks",3,"click"],["browseTasksTmpl",""],["class","cu-search-modal__options cu-task-selector__options","cuDropdown","",4,"ngIf","ngIfElse"],["cuDropdown","",1,"cu-search-modal__options","cu-task-selector__options"],[1,"cu-search-modal__options-row"],[1,"cu-search-modal__options-title"],e,["cuDropdownToggle","",1,"cu-search-modal__options-item"],[3,"ngIf"],["icon","cu2-angle-right",1,"cu-search-modal__options-arrow"],[4,"cuDropdownMenu"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],t,i,o,n,[3,"item","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item","click"],s,c,a,[3,"forSearchSelector","fetching","paging","params","pagingFetch","taskIdsToExclude","onGeometryChange","onSelect","onPage",4,"ngIf"],[3,"taskIdsToExclude","milestonesOnly","onSelect","onGeometryChange",4,"ngIf"],[3,"forSearchSelector","fetching","paging","params","pagingFetch","taskIdsToExclude","onGeometryChange","onSelect","onPage"],["taskRecentList",""],[3,"taskIdsToExclude","milestonesOnly","onSelect","onGeometryChange"],["class","task-mover__menu-header",4,"ngIf"],["class","task-mover-projects",4,"ngIf"],["class","task-selector__subcategory-header",4,"ngIf"],[1,"task-mover__menu-header"],[1,"task-mover__project"],[1,"task-mover__project-label"],r,[1,"task-mover__project-name",3,"click"],[1,"task-mover-projects"],["class","task-mover-item task-mover-item_project",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"task-mover-item","task-mover-item_project",3,"ngClass","click"],["class","task-mover-item__header",4,"ngIf"],[1,"task-mover-item__header"],["icon","angle-right",1,"task-mover-item__icon"],["cuLink","","draggable","false",1,"task-mover-item__name"],[1,"task-selector__subcategory-header"],["class","task-selector__cat-list",3,"perfectScrollbar","hidden",4,"ngIf"],["subcategoryTaskList",""],["class","task-selector__loader",4,"ngIf"],["class","task-selector__empty",4,"ngIf"],[1,"task-selector__cat-list",3,"perfectScrollbar","hidden"],["scrollbar","ngxPerfectScrollbar"],["class","task-selector__cat-list-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"task-selector__cat-list-item"],["class","task-selector__cat-header",3,"click",4,"ngIf"],[1,"task-selector__cat-body",3,"ngClass"],[1,"task-selector__cat-header",3,"click"],["icon","angle-right",1,"task-selector__cat-chevron",3,"ngClass"],[1,"task-selector__cat-name"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","task-selector__show-more",3,"task-selector__show-more_single-subcategory","click",4,"ngIf"],["class","task-selector__task",3,"task-selector__task_single-subcategory","ngClass","cuTooltip","click",4,"ngIf"],[1,"task-selector__task",3,"ngClass","cuTooltip","click"],["class","cu-dt-filter__subtask-icon",3,"icon",4,"ngIf"],["class","task-selector__task-simple-status","icon","check-bold",3,"ngClass",4,"ngIf","ngIfElse"],["customStatuses",""],[1,"task-selector__task-name"],[1,"task-selector__task-name-text"],["class","task-selector__task-name-subtasks",3,"click",4,"ngIf"],[1,"task-selector__task-id"],[1,"cu-dt-filter__subtask-icon",3,"icon"],["icon","check-bold",1,"task-selector__task-simple-status",3,"ngClass"],[1,"task-selector__task-status",3,"ngStyle"],[1,"task-selector__task-name-subtasks",3,"click"],["class","task-selector__task",3,"ngClass","cuTooltip","click",4,"ngIf"],["class","task-selector__task-simple-status","icon","check-bold",3,"ngClass",4,"ngIf"],["class","task-selector__task-status",3,"ngStyle",4,"ngIf"],[1,"task-selector__show-more",3,"click"],l,[1,"task-selector__loader"],[1,"task-selector__empty"],d,[1,"task-selector__extra-header"],u,["class","task-selector__extra",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"task-selector__extra",3,"click"],[1,"task-selector__task"]]},template:function(e,t){if(1&e&&(a.bd(0,ce,1,1,"div",0),a.bd(1,ae,1,1,"div",1),a.bd(2,re,5,1,"div",2),a.cc(3,"div"),a.bd(4,de,8,4,"div",3),a.bd(5,Ie,9,3,"div",4),a.bd(6,De,5,6,"ng-container",5),a.bd(7,bt,4,4,"ng-template",null,6,a.cd),a.Yb(9,7),a.bc()),2&e){const e=a.Rc(8);a.Dc("ngIf",t.description),a.Ib(1),a.Dc("ngIf",t.notice),a.Ib(1),a.Dc("ngIf",t.errorMsg),a.Ib(1),a.Mb("task-selector ",t.modifier,""),a.Ib(1),a.Dc("ngIf",t.showSearch&&!t.showProjectList),a.Ib(1),a.Dc("ngIf",t.showRecent),a.Ib(1),a.Dc("ngIf",!t.browseTasks)("ngIfElse",e),a.Ib(3),a.Dc("ngTemplateOutlet",t.extraItemTemplate)}},directives:[$.q,$.x,$.o,U.a,R.b,M.a,F.a,L.a,$.u,$.v,$.w,$.p,N.a,ee,te.a,V.a,$.t,B.a],pipes:[$.b,ie.a],styles:['.cu-search-modal{display:flex;height:100%}.cu-search-modal em{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:600;font-style:normal;color:#292d34}.dark-theme .cu-search-modal em{color:#fff}.cu-search-modal__status{flex-shrink:0;width:10px;height:10px;border-radius:2px;margin:0 5px 0 0;line-height:.9}.cu-search-modal__subtask-icon{width:14px;height:14px;margin-right:13px;display:inline-block;pointer-events:all;stroke:#aeacb0;fill:#aeacb0}.cu-search-modal-modifier .cu-modal__inner{display:flex;flex-direction:column;justify-content:flex-start}.cu-search-modal-modifier .cu-modal__body{min-height:0;height:75vh;border-radius:0 0 8px 8px}.cu-search-modal-modifier .cu-modal__dialog{margin-top:140px;padding:0;border-radius:8px;max-height:75vh}.cu-search-modal-modifier .cu-modal__header{margin:0}.cu-search-modal-modifier .cu-modal__close{margin-top:-50px}.cu-search-modal__container{display:flex;flex-direction:column;flex-grow:1;width:100%;border-radius:8px;z-index:10;box-shadow:0 0 10px 0 rgba(0,0,0,.2);background:#fff}.dark-theme .cu-search-modal__container{background:#384047;box-shadow:0 0 10px 0 rgba(0,0,0,.5)}.cu-search-modal__search{display:flex;flex-grow:1;position:relative}.cu-search-modal__search-container{display:flex;align-items:center;padding:8px 30px 0 0;flex-shrink:0}.cu-search-modal__search-input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:26px;line-height:1;padding:20px 50px 20px 30px;flex-grow:1;border:none;background:transparent;box-shadow:none;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__search-input{font-family:var(--global-font-support)}}.dark-theme .cu-search-modal__search-input{color:#d5d6d7}.cu-search-modal__search-input:-ms-input-placeholder{opacity:.5}.cu-search-modal__search-input::placeholder{opacity:.5}.cu-search-modal__search-input:focus{background:transparent;box-shadow:none}.cu-search-modal__search-clear{background:#7b68ee;fill:#fff;position:absolute;right:20px;top:50%;transform:translateY(-50%);width:16px;height:16px;padding:3px;stroke:rgba(52,52,52,.3);cursor:pointer;border-radius:50%}@supports (--theme-main-color:#7b68ee){.cu-search-modal__search-clear{background:var(--theme-main-color)}}.cu-search-modal__search-clear:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-search-modal__search-clear:hover{background:var(--theme-main-color-dark)}}.cu-search-modal__types{display:flex;align-items:center;flex-shrink:0;padding:6px 30px 14px 20px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-search-modal__types{border-bottom-color:#1e272e}.cu-search-modal__types-item{font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;padding:6px 10px;border-radius:15px;cursor:pointer;color:#7c828d}.dark-theme .cu-search-modal__types-item{color:#abaeb0}.cu-search-modal__types-item:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-search-modal__types-item:hover{color:var(--theme-main-color)}}.cu-search-modal__types-item_selected{background:#7b68ee;color:#fff;cursor:default}@supports (--theme-main-color:#7b68ee){.cu-search-modal__types-item_selected{background:var(--theme-main-color)}}.cu-search-modal__types-item_selected:hover,.dark-theme .cu-search-modal__types-item_selected{color:#fff}.cu-search-modal__types-divider{flex-grow:1}.cu-search-modal__types-cog{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;width:14px;height:14px;fill:#7c828d}.dark-theme .cu-search-modal__types-cog{fill:#abaeb0}.cu-search-modal__types-cog:hover,.cu-search-modal__types-cog_active{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-search-modal__types-cog:hover,.cu-search-modal__types-cog_active{fill:var(--theme-main-color)}}.cu-search-modal__types-fuzziness{margin-right:7px}.cu-search-modal__types-fuzziness:hover .cu-search-modal__types-fuzziness-text{color:var(--theme-main-color)}.cu-search-modal__types-fuzziness:hover .cu-search-modal__types-fuzziness-arrow{fill:var(--theme-main-color)}.cu-search-modal__types-fuzziness-toggle{display:flex;align-items:center}.cu-search-modal__types-fuzziness-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;padding-right:3px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__types-fuzziness-text{font-family:var(--global-font-support)}}.cu-dropdown_open .cu-search-modal__types-fuzziness-text{color:var(--theme-main-color)}.cu-search-modal__types-fuzziness-arrow{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(90deg);height:12px;width:12px;fill:#343434}.cu-search-modal__types-fuzziness-arrow:hover{transition:none}.dark-theme .cu-search-modal__types-fuzziness-arrow{fill:#d5d6d7}.cu-dropdown_open .cu-search-modal__types-fuzziness-arrow{transform:rotate(-90deg);fill:var(--theme-main-color)}.cu-search-modal__options{display:flex;align-items:center;padding:0 30px;height:31px;will-change:max-height;overflow:hidden}.cu-search-modal__options.cu-task-selector__options{padding:0;height:auto;text-transform:none}.cu-search-modal__options.cu-dropdown_open .cu-search-modal__options-item{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-search-modal__options.cu-dropdown_open .cu-search-modal__options-item{color:var(--theme-main-color)}}.cu-search-modal__options.cu-dropdown_open .cu-search-modal__options-arrow{fill:#7b68ee;transform:rotate(-90deg)}@supports (--theme-main-color:#7b68ee){.cu-search-modal__options.cu-dropdown_open .cu-search-modal__options-arrow{fill:var(--theme-main-color)}}.cu-search-modal__options-container{height:31px;flex-shrink:0;will-change:max-height;overflow:hidden;border-bottom:1px solid #e9ebf0}.dark-theme .cu-search-modal__options-container{border-bottom-color:#1e272e}.cu-search-modal__options-row{display:flex;align-items:center}.cu-search-modal__options-title{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:4px;color:#292d34}.dark-theme .cu-search-modal__options-title{color:#d5d6d7}.cu-search-modal__options-item{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:5px;color:#292d34}.dark-theme .cu-search-modal__options-item{color:#d5d6d7}.cu-search-modal__options-item:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-search-modal__options-item:hover{color:var(--theme-main-color)}}.cu-search-modal__options-item:hover .cu-search-modal__options-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-search-modal__options-item:hover .cu-search-modal__options-arrow{fill:var(--theme-main-color)}}.cu-search-modal__options-arrow{transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);width:12px;height:12px;transform:rotate(90deg);fill:#292d34}.dark-theme .cu-search-modal__options-arrow{fill:#d5d6d7}.cu-search-modal__body{overflow:auto;border-radius:0 0 8px 8px;flex-grow:1}.cu-search-modal__attachment{display:flex;align-items:center}.cu-search-modal__attachment__info{margin-left:30px;flex-grow:1;min-width:0}.cu-search-modal__attachment__info-uploader{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:15px;color:#7c828d}.dark-theme .cu-search-modal__attachment__info-uploader{color:#abaeb0}.cu-search-modal__attachment__info-uploader span{color:#292d34}.dark-theme .cu-search-modal__attachment__info-uploader span{color:#d5d6d7}.cu-search-modal__attachment__info-file{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;margin-bottom:15px;font:400 16px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-search-modal__attachment__info-file{color:#d5d6d7}.cu-search-modal__attachment__info .cu-search-modal__task-desc-info{margin:0}.cu-search-modal__attachment-container{display:flex;align-items:center;justify-content:center;flex-shrink:0;width:130px}.cu-search-modal__doc{padding:20px 30px;border-bottom:1px solid #f1f1f1}.dark-theme .cu-search-modal__doc{border-bottom:1px solid #1e272e}.cu-search-modal__doc:hover{background:#fafafa}.dark-theme .cu-search-modal__doc:hover{background:#2b343b}.cu-search-modal__doc.search-modal-item_selected{background:#e4e4e4}.dark-theme .cu-search-modal__doc.search-modal-item_selected{background:#1e272e}.cu-search-modal__doc-header{display:flex;align-items:center}.cu-search-modal__doc-header-icon{width:14px;height:14px;margin-right:7px;margin-bottom:2px;flex-shrink:0;fill:#292d34}.dark-theme .cu-search-modal__doc-header-icon{fill:#d5d6d7}.cu-search-modal__doc-header-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font:400 16px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-search-modal__doc-header-name{color:#d5d6d7}.cu-search-modal__doc-link,.cu-search-modal__doc:hover .cu-search-modal__section-loc{display:block}.cu-search-modal__doc:hover .cu-search-modal__section-angle{display:inline-block}.cu-search-modal__doc-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:15px;line-height:1;color:#292d34;margin:12px 0 10px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__doc-title{font-family:var(--global-font-support)}}.dark-theme .cu-search-modal__doc-title{color:#d5d6d7}.cu-search-modal__task-desc{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;border-bottom:1px solid #f1f1f1;padding:16px 30px;display:block}.dark-theme .cu-search-modal__task-desc{border-bottom:1px solid #1e272e}.cu-search-modal__task-desc:hover{background:#fafafa}.dark-theme .cu-search-modal__task-desc:hover{background:#2b343b}.cu-search-modal__task-desc:hover .cu-search-modal__section-loc{display:block}.cu-search-modal__task-desc:hover .cu-search-modal__section-angle{display:inline-block}.cu-search-modal__task-desc:hover .cu-search-modal__task-desc-duration{display:none}.cu-search-modal__task-desc.search-modal-item_selected{background:#e4e4e4}.dark-theme .cu-search-modal__task-desc.search-modal-item_selected{background:#1e272e}.cu-search-modal__task-desc.search-modal-item_selected .task-mention>span{border-color:#b9bec7!important}.dark-theme .cu-search-modal__task-desc.search-modal-item_selected .task-mention>span{border-color:#384047!important}.cu-search-modal__task-desc-content{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:14px;line-height:20px;margin-top:10px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__task-desc-content{font-family:var(--global-font-support)}}.dark-theme .cu-search-modal__task-desc-content{color:#d5d6d7}.cu-search-modal__task-desc-content+.cu-search-modal__task-desc-content{margin-top:5px}.cu-search-modal__task-desc-info{display:flex;align-items:center;margin-top:10px}.cu-search-modal__task-desc-info .cu-search-modal__section{margin:0 0 0 10px}.cu-search-modal__task-desc-duration{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;flex-shrink:0;color:#7c828d}.cu-search-modal__task-desc .cu-sp-comment__body{margin-top:12px}.cu-search-modal__task-desc-header{display:flex;align-items:center}.cu-search-modal__task-desc-status{flex-shrink:0;width:8px;height:8px;border-radius:2px;margin:0 8px 0 0}.cu-search-modal__task-desc-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__task-desc-title{font-family:var(--global-font-support)}}.dark-theme .cu-search-modal__task-desc-title{color:#d5d6d7}.cu-search-modal__filters{position:absolute;width:210px;padding:20px 20px 20px 30px;height:100%;right:0;transform:translate3d(200px,0,0);border-radius:0 8px 8px 0;overflow:hidden;z-index:0;background:#fafbfc}.dark-theme .cu-search-modal__filters{background:#384047}.cu-search-modal__section{display:flex;align-items:center;margin-top:8px;min-width:0}.cu-search-modal__section-archived{font-style:italic}.cu-search-modal__section-archived-icon{display:inline-block;width:12px;height:12px}.cu-search-modal__section-info,.cu-search-modal__section-loc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;display:block;margin-right:4px;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__section-info,.cu-search-modal__section-loc{font-family:var(--global-font-support)}}.cu-search-modal__section-info span,.cu-search-modal__section-loc span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-search-modal__section-info span,.cu-search-modal__section-loc span{font-family:var(--global-font-support)}}.cu-search-modal__section.cu-search-modal__section-archived .cu-search-modal__section-info,.cu-search-modal__section.cu-search-modal__section-archived .cu-search-modal__section-loc{font-style:italic}.cu-search-modal__section-info_in{flex-shrink:0}.cu-search-modal__section-loc{display:none}.cu-search-modal__section-loc.cu-search-modal__section-info{display:inherit}.cu-search-modal__section-angle{display:none;fill:#7c828d;width:4px;height:7px;margin-right:4px;flex-shrink:0}.cu-search-modal__section-angle.cu-search-modal__section-info-angle{display:inherit}'],encapsulation:2,data:{animation:[s.e,Object(n.m)("loadingOptions",[Object(n.l)(":enter",[Object(n.k)({opacity:0,maxHeight:0}),Object(n.e)("300ms",Object(n.k)({opacity:1,maxHeight:"31px"}))]),Object(n.l)(":leave",[Object(n.k)({opacity:1,maxHeight:"31px"}),Object(n.e)("200ms",Object(n.k)({opacity:0,maxHeight:0}))])])]}}),e})()},aQOx:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},aTp6:function(e,t,i){"use strict";e.exports=function(e,t){for(var i=e.indexOf("\n",t);i>t&&" "===e.charAt(i-1);)i--;return i}},aWji:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("2p4s"),n=i("LRne"),s=i("z6cu"),c=i("lJxs"),a=i("eIep"),r=i("fXoL"),l=i("tk/3");let d=(()=>{class e{constructor(e){this.http=e,this.apiUrl=o.a.apiUrl}checkHeaders(e){return this.http.get(this.apiUrl+"/headers",{params:{url:e}}).pipe(Object(c.a)(e=>({headers:e.headers,csp:this.getCSPFromHeaders(e.headers)})),Object(a.a)(({headers:e,csp:t})=>this.xFrameOptionsInvalid(e,t)||this.frameAncestorsInvalid(e,t)?this.throwError():Object(n.a)(null)))}xFrameOptionsInvalid(e,t){const i=e["x-frame-options"]||"",o=i.toLowerCase(),n=!!e["x-auto-login"]||t.includes("x-auto-login");return"ALLOWALL"!==i&&(i||t.includes("x-frame-options"))&&!n&&!o.includes(window.location.host)&&!t.includes(window.location.host)}frameAncestorsInvalid(e,t){const i=(e["frame-ancestors"]||"").toLowerCase(),o=t&&t.split(";").reduce((e,t)=>{const i=t.trim();if(!i)return e;const o=i.split(/\s+/g),n=o.shift();return Object.prototype.hasOwnProperty.call(e,n)||(e[n]=o),e},{})||{};return i&&!i.includes(window.location.host)||o["frame-ancestors"]&&!o["frame-ancestors"].indexOf(window.location.host)&&!o["frame-ancestors"].indexOf("*")}getCSPFromHeaders(e){return e&&e["content-security-policy"]?e["content-security-policy"].toLowerCase():""}throwError(){return Object(s.a)(new Error("Cannot load this embed view"))}}return e.\u0275fac=function(t){return new(t||e)(r.nc(l.b))},e.\u0275prov=r.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},afWh:function(e,t,i){"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},ahJy:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("gBUK");let s=(()=>{class e{constructor(e){this.colorService=e}transform(e,t=215){return this.colorService.isLightColor(e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a))},e.\u0275pipe=o.Vb({name:"isLightColor",type:e,pure:!0}),e})()},aitn:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("S//e"),n=i("M045"),s=i("1G5W"),c=i("fXoL"),a=i("Jf2N");const r=["*"];let l=(()=>{class e extends o.a{constructor(e,t,i){super(e),this.modal=t,this.injector=i}ngOnChanges(e){if((e.users||e.userGroups)&&this.users&&this.userGroups&&this.subcategory&&this.task&&!Object(n.b)(this.subcategory,this.task)){const e=this.users.map(e=>e.id);this.filteredUserGroups=this.userGroups.filter(t=>t.members.every(t=>e.includes(t.id)))}else this.filteredUserGroups=this.userGroups}userGroupsChanged(e){const t=e.find(e=>!this.selectedUserGroups.some(t=>t.id===e.id));if(t&&Object(n.c)(t,this.users).length>0&&Object(n.b)(this.subcategory,this.task)){this.userListDropdown.close();const i=this.modal.openComponent(n.a,this.injector);i.instance.userGroup=t,i.instance.usersWithAccess=this.users,i.instance.subcategory=this.subcategory,i.instance.task=this.task,i.instance.onComplete.pipe(Object(s.a)(i.instance.destroy$)).subscribe(()=>{this.onUserGroupsChanged.emit(e)})}else this.onUserGroupsChanged.emit(e)}open(e){e&&(this.userListDropdown.dropdownFromPoint=e),this.userListDropdown.open()}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(c.h),c.Wb(a.a),c.Wb(c.t))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-user-and-groups-list-dropdown"]],viewQuery:function(e,t){if(1&e&&c.jd(o.a,1),2&e){let e;c.Qc(e=c.rc())&&(t.userListDropdown=e.first)}},hostAttrs:[1,"cu-user-and-groups-list-dropdown"],inputs:{task:"task",subcategory:"subcategory"},features:[c.Fb,c.Gb],ngContentSelectors:r,decls:2,vars:30,consts:[[3,"id","users","multiChoice","enableFirstSelection","forBatch","showUnassign","showUnassigned","showAnyone","unassignedText","selectedUnassigned","search","modifier","selectedUsers","showReassign","canOnlyEditSelf","immutableUser","disabled","preRenderDropdown","displayProfile","headerTemplate","dropdownPlacement","extraItemTemplate","showLastViewed","lastViewedMap","weights","weightType","dropdownAppendToBody","dropdownFromPoint","userGroups","selectedUserGroups","onBeforeChange","onChange","onOpen","onClose","onReassign","onFinished","onUserGroupsChanged"]],template:function(e,t){1&e&&(c.Cc(),c.cc(0,"cu-user-list-dropdown",0),c.qc("onBeforeChange",function(e){return t.onBeforeChange.emit(e)})("onChange",function(e){return t.onChange.emit(e)})("onOpen",function(e){return t.onOpen.emit(e)})("onClose",function(e){return t.onClose.emit(e)})("onReassign",function(e){return t.onReassign.emit(e)})("onFinished",function(e){return t.onFinished.emit(e)})("onUserGroupsChanged",function(e){return t.userGroupsChanged(e)}),c.Bc(1),c.bc()),2&e&&c.Dc("id",t.id)("users",t.users)("multiChoice",t.multiChoice)("enableFirstSelection",t.enableFirstSelection)("forBatch",t.forBatch)("showUnassign",t.showUnassign)("showUnassigned",t.showUnassigned)("showAnyone",t.showAnyone)("unassignedText",t.unassignedText)("selectedUnassigned",t.selectedUnassigned)("search",t.search)("modifier",t.modifier)("selectedUsers",t.selectedUsers)("showReassign",t.showReassign)("canOnlyEditSelf",t.canOnlyEditSelf)("immutableUser",t.immutableUser)("disabled",t.disabled)("preRenderDropdown",t.preRenderDropdown)("displayProfile",t.displayProfile)("headerTemplate",t.headerTemplate)("dropdownPlacement",t.dropdownPlacement)("extraItemTemplate",t.extraItemTemplate)("showLastViewed",t.showLastViewed)("lastViewedMap",t.lastViewedMap)("weights",t.weights)("weightType",t.weightType)("dropdownAppendToBody",t.dropdownAppendToBody)("dropdownFromPoint",t.dropdownFromPoint)("userGroups",t.filteredUserGroups)("selectedUserGroups",t.selectedUserGroups)},directives:[o.a],styles:[".cu-user-and-groups-list-dropdown{min-width:0}"],encapsulation:2,changeDetection:0}),e})()},akl0:function(e,t,i){"use strict";i.d(t,"a",function(){return U});var o=i("fXoL"),n=i("pLZG"),s=i("eIep"),c=i("Cfvw"),a=i("FXUF"),r=i("Vdkl"),l=i("5S2/"),d=i("O3M5"),u=i("AeD3"),m=i("jJW4"),p=i("Jf2N"),h=i("EDFS"),f=i("ofXK"),b=i("0ENg"),g=i("/qOb"),_=i("jJQC"),v=i("8it8"),k=i("LdyQ"),y=i("MJvn"),w=i("UdVN"),x=i("n+1/");const I=["input"];function T(e,t){if(1&e){const e=o.dc();o.cc(0,"div",19),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).selectType(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.name," ")}}function C(e,t){if(1&e&&(o.cc(0,"div",14),o.cc(1,"div",15),o.cc(2,"div",16),o.cc(3,"div",17),o.bd(4,T,2,1,"div",18),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(4),o.Dc("ngForOf",e.types)("ngForTrackBy",e.trackByName)}}function D(e,t){if(1&e&&(o.cc(0,"div",20),o.cc(1,"div",21),o.Xb(2,"div",22),o.bc(),o.cc(3,"div",23),o.dd(4),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(4),o.ed(e.nameError)}}let O=(()=>{class e{constructor(e,t,i,n){this.modalService=e,this.changeDetectorRef=t,this.renderer=i,this.commonStringsService=n,this.types=[{name:$localize`:@@cu-google-doc-create-modal__google-product_doc:Google Document`,mime:"application/vnd.google-apps.document"},{name:$localize`:@@cu-google-doc-create-modal__google-product_drawing:Google Drawing`,mime:"application/vnd.google-apps.drawing"},{name:$localize`:@@cu-google-doc-create-modal__google-product_sheets:Google Sheets`,mime:"application/vnd.google-apps.spreadsheet"},{name:$localize`:@@cu-google-doc-create-modal__google-product_slides:Google Slides`,mime:"application/vnd.google-apps.presentation"}],this.nameError="",this.fileType=this.types[0],this.trackByName=Object(_.d)("name"),this.onCreate=new o.o}ngOnInit(){this.keyUpListener=this.renderer.listen(this.input.nativeElement,"keyup",e=>{e.which===g.a.ESCAPE&&this.modalService.close(),e.which===g.a.ENTER?this.create():this.nameError&&(this.nameError="",this.changeDetectorRef.markForCheck())})}ngAfterViewInit(){setTimeout(()=>{this.input.nativeElement.focus()})}ngOnChanges(e){}ngOnDestroy(){this.keyUpListener&&(this.keyUpListener(),this.keyUpListener=null)}create(){this.input.nativeElement.value.trim()?(this.onCreate.emit({name:this.input.nativeElement.value.trim(),type:this.fileType.mime}),this.modalService.close()):(this.nameError=this.commonStringsService.nameIsRequiredText,this.changeDetectorRef.markForCheck())}selectType(e){this.fileType=e}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(p.a),o.Wb(o.h),o.Wb(o.H),o.Wb(v.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["google-doc-create-modal"]],viewQuery:function(e,t){if(1&e&&o.jd(I,3),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first)}},outputs:{onCreate:"onCreate"},features:[o.Gb],decls:15,vars:2,consts:function(){let e,t;return e=$localize`:@@cu-google-doc-create-modal__form-placeholder_doc-name␟3aa29765510c990fd239d38f46acca36671558b2␟3669686434088049898:Na﻿me your doc`,t=$localize`:@@cu-google-doc-create-modal__btn-txt_create-doc␟a2268d8a3c4aa95c6acc6a1b31dd98c02d3c06ab␟8085029119478018740: Create Doc `,[[1,"cu-form__label"],[1,"cu-google-doc__header"],[1,"cu-search","cu-search_compact","filter-list__search"],["type","text","placeholder",e,1,"cu-search__input","cu-search__input_centered"],["input",""],["cuDropdown","",1,"cu-dropdown","cu-google-doc__dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],[1,"cu-google-doc__add-text"],["icon","dropdown-settings_down",1,"cu-google-doc__add-dropdown"],["class","cu-dropdown__menu",4,"cuDropdownMenu"],["class","cu-form__error",4,"ngIf"],[1,"cu-google-doc__button-block"],[1,"cu-btn",3,"click"],t,[1,"cu-dropdown__menu"],[1,"cu-google-doc-type-list"],[1,"cu-google-doc-type-list__body"],[1,"cu-dropdown","cu-dropdown_center","cu-dropdown_pointer","show-checklist-menu"],["class","cu-google-doc-type-list__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-google-doc-type-list__item",3,"click"],[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"]]},template:function(e,t){1&e&&(o.Xb(0,"div",0),o.cc(1,"div",1),o.cc(2,"div",2),o.Xb(3,"input",3,4),o.bc(),o.cc(5,"div",5),o.cc(6,"div",6),o.cc(7,"span",7),o.dd(8),o.bc(),o.Xb(9,"div",8),o.bc(),o.bd(10,C,5,2,"div",9),o.bc(),o.bc(),o.bd(11,D,5,1,"div",10),o.cc(12,"div",11),o.cc(13,"button",12),o.qc("click",function(){return t.create()}),o.gc(14,13),o.bc(),o.bc()),2&e&&(o.Ib(8),o.ed(t.fileType.name),o.Ib(3),o.Dc("ngIf",t.nameError))},directives:[k.b,y.a,w.a,x.a,f.q,f.p],encapsulation:2,changeDetection:0}),e})();const S=["pop"],E=["createModal"];function P(e,t){1&e&&o.Xb(0,"cu-cloud-storage-deny-msg")}function j(e,t){if(1&e){const e=o.dc();o.cc(0,"google-doc-create-modal",4),o.qc("onCreate",function(t){return o.Uc(e),o.uc().createDoc(t)}),o.bc()}}const A=["*"],$={task:1,comment:2,post:3,project:4,category:5,subcategory:6,team:7,conversation:8,doc:8};let U=(()=>{class e{constructor(e,t,i,n,s,c,a){this.googleDriveService=e,this.dropboxService=t,this.oneDriveService=i,this.boxService=n,this.dataService=s,this.sharedData=c,this.modalService=a,this.permanent=!0,this.showDeny=!0,this.onAdded=new o.o,this.onDenied=new o.o}ngOnInit(){}ngOnDestroy(){}currentIsPro(){return!!this.sharedData.compatCurrentTeam&&"1"!==String(this.sharedData.compatCurrentTeam.plan_id)}open(){this.currentIsPro()?"dropbox"===this.source?this.openDropbox():"onedrive"===this.source?this.openOneDrive():"google-doc"===this.source?this.openCreateGoogleDoc():"box"===this.source?this.openBox():this.openGoogleDrive():(this.showDeny&&this.pop.show(),this.onDenied.emit())}openGoogleDrive(){this.googleDriveService.oauthToken?this.googleDriveOpenPicker():this.googleDriveSignIn()}openCreateGoogleDoc(){this.googleDriveService.oauthToken?this.googleDocCreateModal():this.googleDriveSignIn(!0)}openDropbox(){this.dropboxService.dropboxLoaded&&this.dropboxOpenPicker()}openBox(){this.boxService.boxLoaded&&this.boxOpenPicker()}openOneDrive(){this.oneDriveService.oneDriveLoaded&&this.oneDriveOpenPicker()}googleDriveSignIn(e=!1){this.googleDriveService.signIn().subscribe(()=>{e?this.googleDocCreateModal():this.googleDriveOpenPicker()})}googleDriveOpenPicker(){const e=this.googleDriveService.token;e&&e.access_token?this.dataService.checkGoogleDriveAuthed(e.access_token).subscribe(e=>{this.showGoogleDrivePicker()},e=>{this.googleDriveSignIn()}):this.showGoogleDrivePicker()}showGoogleDrivePicker(){this.googleDriveService.openPicker().pipe(Object(n.a)(e=>e&&e.length>0),Object(s.a)(e=>Object(c.a)(e))).subscribe(e=>{this.dataService.googleDriveAddAttachment(this.prepareGoogleFilePayload(e)).subscribe(e=>{this.onAdded.emit(e)})})}dropboxOpenPicker(){this.dropboxService.openPicker().pipe(Object(n.a)(e=>e&&e.length>0),Object(s.a)(e=>Object(c.a)(e))).subscribe(e=>{this.dataService.dropboxAddAttachment(this.prepareDropboxFilePayload(e)).subscribe(e=>{this.onAdded.emit(e)})})}boxOpenPicker(){this.boxService.openPicker().pipe(Object(n.a)(e=>e&&e.length>0),Object(s.a)(e=>Object(c.a)(e))).subscribe(e=>{this.dataService.boxAddAttachment(this.prepareBoxFilePayload(e)).subscribe(e=>{this.onAdded.emit(e)})})}oneDriveOpenPicker(){this.oneDriveService.openPicker().pipe(Object(n.a)(e=>e&&e.length>0),Object(s.a)(e=>Object(c.a)(e))).subscribe(e=>{this.dataService.oneDriveAddAttachment(this.prepareOneDriveFilePayload(e)).subscribe(e=>{this.onAdded.emit(e)})})}googleDocCreateModal(){this.modalService.open({title:$localize`:@@cu-cloud-storage-button__title_create-google-doc:Create Google Doc`,content:this.createModal,bodyModifier:"cu-modal__body_no-min-height"})}createDoc({name:e,type:t}){this.dataService.googleDriveAddAttachment(this.prepareGoogleFileCreatePayload(e,t)).subscribe(t=>{this.onAdded.emit(t),this.sharedData.addToastItem({title:$localize`:@@cu-cloud-storage-button__title_created-google-doc:${e}:docName: created in Google!`,externalUrl:t.url,linkText:$localize`:@@cu-cloud-storage-button__link-txt_open-in-google:Open in Google`})})}getType(){return"number"==typeof this.type?this.type:$[this.type]}prepareGoogleFilePayload(e){return this.googleDriveService.prepareGoogleFilePayload(e,this.parentId,this.getType(),this.permanent)}prepareGoogleFileCreatePayload(e,t){return{title:e,mime_type:t,type:this.getType(),parent:this.parentId,token_id:this.googleDriveService.idToken}}prepareDropboxFilePayload(e){return this.dropboxService.prepareDropboxPayload(e,this.parentId,this.getType(),this.permanent)}prepareBoxFilePayload(e){return this.boxService.prepareBoxPayload(e,this.parentId,this.getType(),this.permanent)}prepareOneDriveFilePayload(e){return this.oneDriveService.prepareOneDrivePayload(e,this.parentId,this.getType(),this.permanent)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a.a),o.Wb(r.a),o.Wb(l.a),o.Wb(d.a),o.Wb(u.a),o.Wb(m.a),o.Wb(p.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-cloud-storage-button"]],viewQuery:function(e,t){if(1&e&&(o.jd(S,3),o.jd(E,3)),2&e){let e;o.Qc(e=o.rc())&&(t.pop=e.first),o.Qc(e=o.rc())&&(t.createModal=e.first)}},inputs:{parentId:"parentId",type:"type",source:"source",permanent:"permanent",showDeny:"showDeny",modifier:"modifier"},outputs:{onAdded:"onAdded",onDenied:"onDenied"},ngContentSelectors:A,decls:7,vars:3,consts:[["popTemplate",""],["createModal",""],["containerClass","popover_white","triggers","","container","body","placement","top",1,"cloud-storage-link",3,"popover","outsideClick","ngClass","click"],["pop","bs-popover"],[3,"onCreate"]],template:function(e,t){if(1&e&&(o.Cc(),o.bd(0,P,1,0,"ng-template",null,0,o.cd),o.bd(2,j,1,0,"ng-template",null,1,o.cd),o.cc(4,"div",2,3),o.qc("click",function(){return t.open()}),o.Bc(6),o.bc()),2&e){const e=o.Rc(1);o.Ib(4),o.Dc("popover",e)("outsideClick",!0)("ngClass",t.modifier)}},directives:[h.c,f.o,b.a,O],encapsulation:2,changeDetection:0}),e})()},"bNw/":function(e,t,i){"use strict";i.d(t,"a",function(){return E});var o=i("fXoL"),n=i("jJQC"),s=i("c3rA"),c=i("XNiG"),a=i("1G5W"),r=i("mMFR"),l=i("1p1I"),d=i("K/1s"),u=i("l7P3"),m=i("Jf2N"),p=i("ofXK"),h=i("pATm"),f=i("UdVN"),b=i("NsZK");function g(e,t){if(1&e){const e=o.dc();o.cc(0,"div",5),o.cc(1,"cu-tags-badge",6),o.qc("click",function(i){o.Uc(e);const n=t.$implicit;return o.uc(2).onClickTag.emit(n),i.preventDefault(),i.stopPropagation()})("onFilterTag",function(t){return o.Uc(e),o.uc(2).onFilterTag.emit(t)})("onDelete",function(t){return o.Uc(e),o.uc(2).remove(t)})("onRename",function(t){return o.Uc(e),o.uc(2).rename(t)})("onOpenDeleteConfirm",function(t){return o.Uc(e),o.uc(2).openDeleteConfirm(t)})("onLoad",function(){return o.Uc(e),o.uc(2).onLoad.emit()})("onColorChange",function(t){return o.Uc(e),o.uc(2).onColorChange.emit(t)}),o.vc(2,"async"),o.vc(3,"async"),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(2);let n=null;o.Ib(1),o.Dc("tag",e)("name",e.name)("color",e.tag_bg||"#000000")("solidBackgroundColor",i.solidBackgroundColor)("viewOnly",!i.canManageTag)("readOnly",i.readOnly)("modifier",i.modifier)("taskId",i.taskId)("spaceId",i.spaceId)("hideDelete",i.hideDelete)("spaceAccess",i.spaceAccess)("availableTags",i.availableTags)("isDarkTheme",null==(n=o.wc(2,19,i.user$))?null:n.dark_theme)("showFilter",i.showFilter)("isGuest",o.wc(3,21,i.isGuest$))("inDropdown",!1)("useDarkThemeStyle",i.useDarkThemeStyle)("vc",i.vc)("preventClick",i.preventBadgeClick)}}function _(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.fd("+",(null==e.tagsOrdered?null:e.tagsOrdered.length)-(null==e.tagsTrancated?null:e.tagsTrancated.length),"")}}function v(e,t){1&e&&(o.ac(0),o.gc(1,9),o.Zb())}function k(e,t){if(1&e){const e=o.dc();o.cc(0,"div",7),o.qc("click",function(){return o.Uc(e),o.uc(2).toggleExpandAll()}),o.bd(1,_,2,1,"ng-container",8),o.bd(2,v,2,0,"ng-container",8),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",!e.expandAll),o.Ib(1),o.Dc("ngIf",e.expandAll)}}function y(e,t){if(1&e&&(o.cc(0,"div",2),o.bd(1,g,4,23,"div",3),o.bd(2,k,3,2,"div",4),o.bc()),2&e){const e=o.uc(),t=o.Rc(3);o.Dc("ngClass",e.modifier),o.Ib(1),o.Dc("ngForOf",e.expandAll?e.tagsOrdered:e.tagsTrancated)("ngForTrackBy",e.trackByName),o.Ib(1),o.Dc("ngIf",(null==e.tagsOrdered?null:e.tagsOrdered.length)!==(null==e.tagsTrancated?null:e.tagsTrancated.length))("ngIfElse",t)}}const w=function(e){return{"tags-batch_disabled":e}};function x(e,t){if(1&e&&(o.cc(0,"div",2),o.Xb(1,"a",10),o.bc()),2&e){const e=o.uc();o.Dc("ngClass",e.modifier),o.Ib(1),o.Dc("ngClass",o.Hc(3,w,e.disabled))("cuTooltip",e.tagsTooltip)}}function I(e,t){1&e&&(o.tc(),o.cc(0,"svg",16),o.cc(1,"g",17),o.Xb(2,"path",18),o.Xb(3,"path",19),o.Xb(4,"circle",20),o.bc(),o.bc())}function T(e,t){if(1&e&&(o.cc(0,"span"),o.dd(1),o.bc()),2&e){const e=o.uc(3);o.Ib(1),o.ed(e.textPlaceholder)}}function C(e,t){if(1&e&&(o.cc(0,"div",14),o.bd(1,I,5,0,"svg",15),o.bd(2,T,2,1,"span",8),o.bc()),2&e){const e=o.uc(2);o.Ob("use-placeholder",e.useTextPlaceholder)("show-no-hover",e.alwaysShowNoHover),o.Dc("cuTooltip",e.editTooltip),o.Ib(1),o.Dc("ngIf",!e.useTextPlaceholder),o.Ib(1),o.Dc("ngIf",e.useTextPlaceholder)}}function D(e,t){1&e&&o.Xb(0,"div",21)}function O(e,t){if(1&e&&o.Xb(0,"div",22),2&e){const e=o.uc(2);o.Ob("show-no-hover",e.alwaysShowNoHover),o.Dc("icon",e.altTagsIcon)("cuTooltip",e.editTooltip)}}function S(e,t){if(1&e&&(o.bd(0,C,3,7,"div",11),o.bd(1,D,1,0,"div",12),o.bd(2,O,1,4,"div",13)),2&e){const e=o.uc();o.Dc("ngIf",(!(null!=e.tagsOrdered&&e.tagsOrdered.length)||e.alwaysShowIcon)&&!e.hideIfEmpty&&!e.readOnly&&e.canAddTag&&!e.useAltIcon),o.Ib(1),o.Dc("ngIf",e.showArrow),o.Ib(1),o.Dc("ngIf",e.useAltIcon)}}let E=(()=>{class e{constructor(e,t,i,a){this.tagsService=e,this.store=t,this.modal=i,this.injector=a,this.destroy$=new c.a,this.tagsOrdered=[],this.tagsTrancated=[],this.expandAll=!1,this.modifier="",this.truncate=!1,this.showTags=3,this.forBatch=!1,this.forFilter=!1,this.hideIfEmpty=!1,this.readOnly=!1,this.canAddTag=!0,this.canRemoveTag=!0,this.canManageTag=!0,this.alwaysShowIcon=!0,this.alwaysShowNoHover=!1,this.disabled=!1,this.tagsTooltip="Set tags",this.solidBackgroundColor=!1,this.taskId="",this.spaceId="",this.spaceAccess=!0,this.showFilter=!1,this.hideDelete=!1,this.preventBadgeClick=!1,this.availableTags=[],this.allSpaces=!1,this.allowToggleExpandAll=!1,this.useTextPlaceholder=!1,this.textPlaceholder="",this.editTooltip=$localize`:@@cu-tags-view__tooltip-msg_edit-tags:Edit tags`,this.useAltIcon=!1,this.altTagsIcon="cu2-tags",this.canDelete=!0,this.useDarkThemeStyle=!1,this.showArrow=!1,this.forTimeTracker=!1,this.forTemplates=!1,this.onDelete=new o.o,this.onRename=new o.o,this.onLoad=new o.o,this.onDeleteConfirm=new o.o,this.onDeleteFromSpace=new o.o,this.onClickTag=new o.o,this.onFilterTag=new o.o,this.onColorChange=new o.o,this.trackByName=Object(n.d)("name"),this.user$=this.store.select(s.getUser),this.isGuest$=this.store.select(s.isGuestTeam)}ngOnInit(){}ngOnChanges(e){(e.tags||e.truncate||e.showTags||e.availableTags)&&this.adjustData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}adjustData(){this.tagsOrdered=(Array.isArray(this.tags)?this.tags:[]).filter(e=>Boolean(e.name)).map(e=>{const t=(this.availableTags||[]).findIndex(t=>t.name===e.name);return-1===t?Object(l.a)(e,this.userId,this.canDelete,this.onlyDeleteIfOwner):this.availableTags[t]}),this.tagsService.sortTags(this.tagsOrdered),this.tagsTrancated=this.truncate&&this.showTags&&this.tagsOrdered.length>this.showTags?this.tagsOrdered.slice(0,this.showTags):this.tagsOrdered}rename(e){this.onRename.emit(e)}remove(e){this.onDelete.emit(e)}delete(e){this.onDeleteFromSpace.emit(e)}openDeleteConfirm(e){if(this.forTimeTracker)return void this.onDeleteConfirm.emit(e.tag);const t=this.modal.openComponent(r.a,this.injector,{name:""});t.instance.tagName=e.tag.name,t.instance.allSpaces=this.allSpaces,t.instance.forTimeTracker=this.forTimeTracker,t.instance.forTemplates=this.forTemplates,t.instance.onConfirm.pipe(Object(a.a)(t.instance.destroy$)).subscribe(()=>{this.delete(e.tag)})}toggleExpandAll(){this.allowToggleExpandAll&&(this.expandAll=!this.expandAll)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(d.a),o.Wb(u.Store),o.Wb(m.a),o.Wb(o.t))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-tags-view"]],inputs:{modifier:"modifier",truncate:"truncate",showTags:"showTags",forBatch:"forBatch",forFilter:"forFilter",hideIfEmpty:"hideIfEmpty",readOnly:"readOnly",canAddTag:"canAddTag",canRemoveTag:"canRemoveTag",canManageTag:"canManageTag",alwaysShowIcon:"alwaysShowIcon",alwaysShowNoHover:"alwaysShowNoHover",disabled:"disabled",tagsTooltip:"tagsTooltip",solidBackgroundColor:"solidBackgroundColor",taskId:"taskId",spaceId:"spaceId",spaceAccess:"spaceAccess",showFilter:"showFilter",hideDelete:"hideDelete",preventBadgeClick:"preventBadgeClick",tags:"tags",vc:"vc",availableTags:"availableTags",allSpaces:"allSpaces",allowToggleExpandAll:"allowToggleExpandAll",useTextPlaceholder:"useTextPlaceholder",textPlaceholder:"textPlaceholder",editTooltip:"editTooltip",useAltIcon:"useAltIcon",altTagsIcon:"altTagsIcon",userId:"userId",onlyDeleteIfOwner:"onlyDeleteIfOwner",canDelete:"canDelete",useDarkThemeStyle:"useDarkThemeStyle",showArrow:"showArrow",forTimeTracker:"forTimeTracker",forTemplates:"forTemplates"},outputs:{onDelete:"onDelete",onRename:"onRename",onLoad:"onLoad",onDeleteConfirm:"onDeleteConfirm",onDeleteFromSpace:"onDeleteFromSpace",onClickTag:"onClickTag",onFilterTag:"onFilterTag",onColorChange:"onColorChange"},features:[o.Gb],decls:4,vars:2,consts:function(){let e;return e=$localize`:@@common_show-less␟5403a767248e304199592271bba3366d2ca3f903␟3517550046701184661:Show less`,[["class","cu-tags-view",3,"ngClass",4,"ngIf"],["tagIcon",""],[1,"cu-tags-view",3,"ngClass"],["class","cu-tags-view__item",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-tags-view__truncate",3,"click",4,"ngIf","ngIfElse"],[1,"cu-tags-view__item"],[3,"tag","name","color","solidBackgroundColor","viewOnly","readOnly","modifier","taskId","spaceId","hideDelete","spaceAccess","availableTags","isDarkTheme","showFilter","isGuest","inDropdown","useDarkThemeStyle","vc","preventClick","click","onFilterTag","onDelete","onRename","onOpenDeleteConfirm","onLoad","onColorChange"],[1,"cu-tags-view__truncate",3,"click"],[4,"ngIf"],e,["icon","tags-batch","cuLink","",1,"cu-dt-controls__item","tags-batch",3,"ngClass","cuTooltip"],["class","cu-tags-view__icon icon","tooltipModifier","tooltip_indent-on-bottom",3,"use-placeholder","show-no-hover","cuTooltip",4,"ngIf"],["class","cu-tags-view__arrow","icon","angle-right",4,"ngIf"],["class","cu-tags-view__icon cu-tags-view__icon-alt","tooltipModifier","tooltip_indent-on-bottom",3,"icon","show-no-hover","cuTooltip",4,"ngIf"],["tooltipModifier","tooltip_indent-on-bottom",1,"cu-tags-view__icon","icon",3,"cuTooltip"],["viewBox","0 0 23 23","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["viewBox","0 0 23 23","xmlns","http://www.w3.org/2000/svg"],["transform","translate(0 1)","fill","none","fill-rule","evenodd",1,"cu-stroke"],["d","M14.18 16.24l.68.61c.68.68 1.8.68 2.5-.03l4.41-4.4c.7-.7.71-1.83.03-2.51l-8.22-8.22a1.72 1.72 0 0 0-.77-.45L9.37.3a2.25 2.25 0 0 0-.8-.06c-.25.03-.5.1-.7.22a.87.87 0 0 0-.36.35"],["d","M2.06 8.13c.03.11.09.22.18.3l9.16 9.17a.7.7 0 0 0 .99 0l5.95-5.95a.7.7 0 0 0 0-1L9.18 1.5a.7.7 0 0 0-.31-.19L4.56.15a.7.7 0 0 0-.68.18L1.06 3.14a.7.7 0 0 0-.18.68l1.17 4.3z"],["cx","5.409","cy","4.668","r","1.403"],["icon","angle-right",1,"cu-tags-view__arrow"],["tooltipModifier","tooltip_indent-on-bottom",1,"cu-tags-view__icon","cu-tags-view__icon-alt",3,"icon","cuTooltip"]]},template:function(e,t){1&e&&(o.bd(0,y,3,5,"div",0),o.bd(1,x,2,5,"div",0),o.bd(2,S,3,3,"ng-template",null,1,o.cd)),2&e&&(o.Dc("ngIf",!t.forBatch),o.Ib(1),o.Dc("ngIf",t.forBatch))},directives:[p.q,p.o,p.p,h.a,f.a,b.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})()},bY2E:function(e,t,i){"use strict";var o=i("RsFJ"),n=i("obXZ"),s=i("IPAr"),c=i("CRs9");function a(e,t,i){var c,a,r,l,d,u,m,p=0,h=t.charAt(p);if(!("*"!==h&&"_"!==h||(d=h,r=h,u=t.length,p++,l="",h="",(a=this.options.pedantic)&&s(t.charAt(p)))))for(;p<u;){if(m=h,!((h=t.charAt(p))!==r||a&&s(m))){if((h=t.charAt(++p))!==r){if(!o(l)||m===r)return;if(!a&&"_"===r&&n(h)){l+=r;continue}return!!i||((c=e.now()).column++,c.offset++,e(d+l+r)({type:"emphasis",children:this.tokenizeInline(l,c)}))}l+=r}a||"\\"!==h||(l+=h,h=t.charAt(++p)),l+=h,p++}}e.exports=a,a.locator=c},bZrb:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("ofXK"),n=i("tyNb"),s=i("K0KF"),c=i("KyjD"),a=i("PuRp"),r=i("Q9+D"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.l,s.a,c.a,a.a,r.a]]}),e})()},biZo:function(e,t,i){e.exports=i.p+"outlook-setup-2-2.cf33437f98ea910e3326.png"},bnLg:function(e,t,i){"use strict";i.d(t,"a",function(){return he});var o=i("fXoL"),n=i("jJQC"),s=i("0jq0"),c=i("/qOb"),a=i("drq7"),r=i("ofXK"),l=i("vxfF"),d=i("1G5W"),u=i("M045"),m=i("7XkT"),p=i("Jf2N"),h=i("Z4aC"),f=i("loh9"),b=i("tCpm"),g=i("UdVN");function _(e,t){1&e&&(o.cc(0,"div",9),o.gc(1,10),o.bc())}function v(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-user-item",11),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).selectUser(t)})("mouseenter",function(){o.Uc(e);const t=o.uc().index;return o.uc(2).selectedIndex=t})("onOpenProfile",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).openProfile(t)}),o.bc()}if(2&e){const e=o.uc(),t=e.$implicit,i=e.index,n=o.uc(2);o.Dc("user",t)("highlighted",i===n.selectedIndex)("showUnassign",!1)("showReassign",!1)("displayProfile",!0)}}function k(e,t){1&e&&(o.cc(0,"div",9),o.gc(1,12),o.bc())}function y(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-user-group-item",13),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).selectUserGroup(t)})("mouseenter",function(){o.Uc(e);const t=o.uc().index;return o.uc(2).selectedIndex=t}),o.bc()}if(2&e){const e=o.uc(),t=e.$implicit,i=e.index,n=o.uc(2);o.Dc("group",t)("highlighted",i===n.selectedIndex)("showUnassign",!1)("disableShowUserGroupMembers",n.isGuest)}}function w(e,t){if(1&e){const e=o.dc();o.cc(0,"div",14),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).onSelectTaskUserGroup.emit(t.id)})("mouseenter",function(){o.Uc(e);const t=o.uc().index;return o.uc(2).selectedIndex=t}),o.Xb(1,"div",15),o.cc(2,"div",16),o.dd(3),o.bc(),o.bc()}if(2&e){const e=o.uc(),t=e.index,i=e.$implicit,n=o.uc(2);o.Ob("user-list-item_highlighted",t===n.selectedIndex),o.Ib(1),o.Dc("icon",i.icon),o.Ib(2),o.fd(" ",i.label," ")}}function x(e,t){if(1&e&&(o.ac(0,4),o.bd(1,_,2,0,"div",5),o.bd(2,v,1,5,"cu-user-item",6),o.bd(3,k,2,0,"div",5),o.bd(4,y,1,4,"cu-user-group-item",7),o.bd(5,w,4,4,"div",8),o.Zb()),2&e){const e=t.$implicit,i=o.uc(2);o.Dc("ngSwitch",e.type),o.Ib(1),o.Dc("ngSwitchCase",i.ListItemType.PeopleHeading),o.Ib(1),o.Dc("ngSwitchCase",i.ListItemType.User),o.Ib(1),o.Dc("ngSwitchCase",i.ListItemType.TeamsHeading),o.Ib(1),o.Dc("ngSwitchCase",i.ListItemType.UserGroup),o.Ib(1),o.Dc("ngSwitchCase",i.ListItemType.TaskUserGroup)}}function I(e,t){if(1&e&&(o.cc(0,"cdk-virtual-scroll-viewport",2),o.bd(1,x,6,6,"ng-container",3),o.bc()),2&e){const e=o.uc();o.Dc("itemSize",e.itemHeight),o.Ib(1),o.Dc("cdkVirtualForOf",e.filteredListItems)("cdkVirtualForTrackBy",e.trackById)}}function T(e,t){1&e&&(o.cc(0,"div",17),o.gc(1,18),o.bc())}var C=function(e){return e[e.PeopleHeading=0]="PeopleHeading",e[e.TaskUserGroup=1]="TaskUserGroup",e[e.TeamsHeading=2]="TeamsHeading",e[e.User=3]="User",e[e.UserGroup=4]="UserGroup",e}({});let D=(()=>{class e{constructor(e,t,i,n){this.changeDetectorRef=e,this.userProfileService=t,this.modal=i,this.injector=n,this.onSelectUser=new o.o,this.onSelectUserGroup=new o.o,this.onSelectTaskUserGroup=new o.o,this.selectedIndex=0,this.filteredListItems=[],this.listItemTaskUserGroupIndexOffset=0,this.listItemUserIndexOffset=0,this.listItemUserGroupIndexOffset=0,this.ListItemType=C,this.itemHeight=36}ngOnInit(){}ngOnChanges(e){if((e.users||e.userGroups)&&this.users&&this.userGroups){if(this.subcategory&&this.task&&!Object(u.b)(this.subcategory,this.task)){const e=this.users.map(e=>e.id);this.filteredUserGroups=this.userGroups.filter(t=>t.members.every(t=>e.includes(t.id)))}else this.filteredUserGroups=this.userGroups;this.filteredListItems=this.getFilteredListItems(),this.listItemUserIndexOffset=this.getListItemUserIndexOffset(),this.listItemUserGroupIndexOffset=this.getListItemUserGroupIndexOffset(),this.listItemTaskUserGroupIndexOffset=this.getListItemTaskUserGroupIndexOffset(),this.selectedIndex>this.filteredListItems.length-1&&(this.selectedIndex=this.listItemUserIndexOffset)}}handleKey(e){var t;if(this.users||this.filteredUserGroups){switch(e.key){case c.c.ENTER:switch(this.filteredListItems[this.selectedIndex].type){case C.User:this.onSelectUser.emit(this.users[this.selectedIndex-this.listItemUserIndexOffset]);break;case C.UserGroup:this.selectUserGroup(this.filteredUserGroups[this.selectedIndex-this.listItemUserGroupIndexOffset]);break;case C.TaskUserGroup:this.onSelectTaskUserGroup.emit(this.taskUserGroups[this.selectedIndex-this.listItemTaskUserGroupIndexOffset].id)}break;case c.a.ARROW_UP:if(this.selectedIndex===this.listItemUserGroupIndexOffset)this.selectedIndex=this.listItemUserIndexOffset+this.users.length-1;else{if(!(this.selectedIndex>this.listItemUserIndexOffset))return;this.selectedIndex--}this.scrollToSelected();break;case c.a.ARROW_DOWN:this.selectedIndex===this.listItemTaskUserGroupIndexOffset+this.taskUserGroups.length-1?this.selectedIndex=this.listItemUserIndexOffset:(null===(t=this.filteredUserGroups)||void 0===t?void 0:t.length)>0&&this.selectedIndex===this.users.length?this.selectedIndex=this.listItemUserGroupIndexOffset:this.selectedIndex++,this.scrollToSelected();break;case c.c.SPACE:if(1===this.users.length&&0===this.filteredUserGroups.length&&0===this.taskUserGroups.length)return this.onSelectUser.emit(this.users[0]),!0}this.changeDetectorRef.markForCheck()}}mouseDown(e){e.stopPropagation(),e.preventDefault()}selectUser(e){this.onSelectUser.emit(e)}selectUserGroup(e){if(Object(u.c)(e,this.allUsers).length>0&&Object(u.b)(this.subcategory,this.task)){const t=this.modal.openComponent(u.a,this.injector);t.instance.userGroup=e,t.instance.usersWithAccess=this.allUsers,t.instance.subcategory=this.subcategory,t.instance.task=this.task,t.instance.onComplete.pipe(Object(d.a)(t.instance.destroy$)).subscribe(()=>{this.onSelectUserGroup.emit(e)})}else this.onSelectUserGroup.emit(e)}openProfile(e){this.userProfileService.openProfile(e)}trackById(e){return"string"==typeof e?e:e.toString()}scrollToSelected(){this.cdkVirtualScrollViewport.scrollToIndex(this.selectedIndex)}getFilteredListItems(){var e,t;let i=[];return this.isPeopleHeadingVisible()&&i.push({id:-1,type:C.PeopleHeading}),i=[...i,...this.users.map(e=>Object.assign(Object.assign({},e),{type:C.User}))],(null===(e=this.filteredUserGroups)||void 0===e?void 0:e.length)>0&&(i=[...i,{id:0,type:C.TeamsHeading},...this.filteredUserGroups.map(e=>Object.assign(Object.assign({},e),{type:C.UserGroup}))]),(null===(t=this.taskUserGroups)||void 0===t?void 0:t.length)>0&&(i=[...i,...this.taskUserGroups.map(e=>Object.assign(Object.assign({},e),{type:C.TaskUserGroup}))]),i}getListItemTaskUserGroupIndexOffset(){return this.getListItemUserGroupIndexOffset()+this.filteredUserGroups.length}getListItemUserIndexOffset(){return this.isPeopleHeadingVisible()?1:0}getListItemUserGroupIndexOffset(){const e=this.isTeamsHeadingVisible()?1:0;return this.getListItemUserIndexOffset()+this.users.length+e}isPeopleHeadingVisible(){var e,t;return(null===(e=this.filteredUserGroups)||void 0===e?void 0:e.length)>0&&(null===(t=this.users)||void 0===t?void 0:t.length)>0}isTeamsHeadingVisible(){var e;return(null===(e=this.filteredUserGroups)||void 0===e?void 0:e.length)>0}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(m.UserProfileService),o.Wb(p.a),o.Wb(o.t))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-mention-list"]],viewQuery:function(e,t){if(1&e&&o.jd(l.c,1),2&e){let e;o.Qc(e=o.rc())&&(t.cdkVirtualScrollViewport=e.first)}},hostAttrs:[1,"cu-user-mention-list"],inputs:{users:"users",userGroups:"userGroups",allUsers:"allUsers",task:"task",subcategory:"subcategory",isGuest:"isGuest",taskUserGroups:"taskUserGroups"},outputs:{onSelectUser:"onSelectUser",onSelectUserGroup:"onSelectUserGroup",onSelectTaskUserGroup:"onSelectTaskUserGroup"},features:[o.Gb],decls:2,vars:2,consts:function(){let e,t,i;return e=$localize`:@@common_users␟80dbb8ba42b97a9ec035c0ba09f45c07ea07096c␟6310060357882152815: Users `,t=$localize`:@@common_teams␟e3812cd46a122e2e3f102d733a26ff54b1278698␟835643922531785721: Teams `,i=$localize`:@@common_no-results␟c1b09f807bf7c5d9ec2a8653ec1df70d513aa2fb␟911393712054691180: No results
`,[["class","cu-user-mention-list__virtual-viewport",3,"itemSize",4,"ngIf"],["class","cu-user-mention-list__empty",4,"ngIf"],[1,"cu-user-mention-list__virtual-viewport",3,"itemSize"],[3,"ngSwitch",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngSwitch"],["class","cu-user-mention-list__title",4,"ngSwitchCase"],[3,"user","highlighted","showUnassign","showReassign","displayProfile","cuPreventDefault","click","mouseenter","onOpenProfile",4,"ngSwitchCase"],[3,"group","highlighted","showUnassign","disableShowUserGroupMembers","cuPreventDefault","click","mouseenter",4,"ngSwitchCase"],["class","user-list-item",3,"user-list-item_highlighted","click","mouseenter",4,"ngSwitchCase"],[1,"cu-user-mention-list__title"],e,[3,"user","highlighted","showUnassign","showReassign","displayProfile","cuPreventDefault","click","mouseenter","onOpenProfile"],t,[3,"group","highlighted","showUnassign","disableShowUserGroupMembers","cuPreventDefault","click","mouseenter"],[1,"user-list-item",3,"click","mouseenter"],[1,"user-list-item__icon","cu-user-mention-list__task-user-groups-icon",3,"icon"],[1,"user-list-item__name","user-list-item__name_no-divider"],[1,"cu-user-mention-list__empty"],i]},template:function(e,t){1&e&&(o.bd(0,I,2,3,"cdk-virtual-scroll-viewport",0),o.bd(1,T,2,0,"div",1)),2&e&&(o.Dc("ngIf",(null==t.users?null:t.users.length)||(null==t.filteredUserGroups?null:t.filteredUserGroups.length)||(null==t.taskUserGroups?null:t.taskUserGroups.length)),o.Ib(1),o.Dc("ngIf",!(null!=t.users&&t.users.length||t.filteredUserGroups.length||t.taskUserGroups.length)))},directives:[r.q,l.c,l.a,l.b,r.u,r.v,h.a,f.a,b.a,g.a],styles:[".cu-user-mention-list{display:block;padding:5px 0}.cu-user-mention-list__empty{display:flex;align-items:center;justify-content:center;padding:20px;font:italic 300 13px Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-user-mention-list__empty{color:#abaeb0}.cu-user-mention-list__virtual-viewport{height:275px;background:#fff}.cu-os-win .cu-user-mention-list__virtual-viewport{scrollbar-width:thin}.cu-os-win .cu-user-mention-list__virtual-viewport::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-track,.cu-os-win .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar,.cu-os-win .dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar,.cu-os-win.dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-user-mention-list__virtual-viewport::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .cu-user-mention-list__virtual-viewport{background:#384047}.cu-user-mention-list__virtual-viewport .cdk-virtual-scroll-content-wrapper{max-width:100%}.cu-user-mention-list__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#b9bec7;text-transform:uppercase;padding:8px 18px;margin-top:10px}.cu-user-mention-list__task-user-groups-icon{padding:3px;fill:#b9bec7}"],encapsulation:2,changeDetection:0}),e})();var O=i("OBnU");const S=["userMentionList"];function E(e,t){if(1&e){const e=o.dc();o.cc(0,"div",3),o.qc("mousedown",function(t){return o.Uc(e),o.uc().notifMouseDown(t)}),o.ac(1),o.gc(2,4),o.Zb(),o.cc(3,"cu-toggle-switch",5),o.qc("onChange",function(){o.Uc(e);const t=o.uc();return t.notify=!t.notify}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.Dc("checked",e.notify)}}let P=(()=>{class e{constructor(){this.maxResults=10,this.showNotif=!1,this.onSelectUser=new o.o,this.onSelectUserGroup=new o.o,this.onSelectTaskUserGroup=new o.o,this.notify=!0}ngOnInit(){}handleKey(e){if(this.userMentionList)return this.userMentionList.handleKey(e)}notifMouseDown(e){e.preventDefault(),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-mention-body"]],viewQuery:function(e,t){if(1&e&&o.jd(S,1),2&e){let e;o.Qc(e=o.rc())&&(t.userMentionList=e.first)}},hostAttrs:[1,"cu-user-mention-body"],inputs:{maxResults:"maxResults",users:"users",userGroups:"userGroups",showNotif:"showNotif",allUsers:"allUsers",task:"task",subcategory:"subcategory",isGuest:"isGuest",taskUserGroups:"taskUserGroups"},outputs:{onSelectUser:"onSelectUser",onSelectUserGroup:"onSelectUserGroup",onSelectTaskUserGroup:"onSelectTaskUserGroup"},decls:3,vars:8,consts:function(){let e;return e=$localize`:@@cu-user-mention-body__form-label_send-notification␟9679283db56adb23d29fca312f88d3b0f2d41637␟995370562124280579:Send Notification`,[[1,"cu-user-mention-list-container__list",3,"users","userGroups","allUsers","task","subcategory","isGuest","taskUserGroups","onSelectUser","onSelectUserGroup","onSelectTaskUserGroup"],["userMentionList",""],["class","cu-user-mention-body__notify",3,"mousedown",4,"ngIf"],[1,"cu-user-mention-body__notify",3,"mousedown"],e,[3,"checked","onChange"]]},template:function(e,t){1&e&&(o.cc(0,"cu-user-mention-list",0,1),o.qc("onSelectUser",function(e){return t.onSelectUser.emit({user:e,notify:t.notify})})("onSelectUserGroup",function(e){return t.onSelectUserGroup.emit({userGroup:e,notify:t.notify})})("onSelectTaskUserGroup",function(e){return t.onSelectTaskUserGroup.emit({taskUserGroup:e,notify:t.notify})}),o.bc(),o.bd(2,E,4,1,"div",2)),2&e&&(o.Dc("users",t.users)("userGroups",t.userGroups)("allUsers",t.allUsers)("task",t.task)("subcategory",t.subcategory)("isGuest",t.isGuest)("taskUserGroups",t.taskUserGroups),o.Ib(2),o.Dc("ngIf",t.showNotif&&(null==t.users?null:t.users.length)+(null==t.userGroups?null:t.userGroups.length)+(null==t.taskUserGroups?null:t.taskUserGroups.length)))},directives:[D,r.q,O.a],styles:[".cu-user-mention-body{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}.cu-user-mention-body__notify{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:8px 18px;display:flex;flex-shrink:0;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-user-mention-body__notify{color:#d5d6d7}.cu-user-mention-body__notify cu-toggle-switch{margin-left:7px}"],encapsulation:2,changeDetection:0}),e})();var j=i("R+BZ"),A=i("XNiG"),$=i("2Vo4"),U=i("LRne"),R=i("/uUt"),M=i("zp1y"),F=i("vkgz"),L=i("Kj3r"),N=i("eIep"),z=i("lJxs"),q=i("UXun"),G=i("SxV6"),V=i("xWuZ"),B=i("MguC"),X=i("c3rA"),H=i("2Wk6"),W=i("l7P3"),K=i("BTFG"),Q=i("NsZK");function Z(e,t){1&e&&o.Xb(0,"cu-loader")}function Y(e,t){if(1&e){const e=o.dc();o.cc(0,"div",3),o.qc("mousedown",function(i){o.Uc(e);const n=t.$implicit;return o.uc(2).click(n,i)}),o.cc(1,"div",4),o.dd(2),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc(2);o.Ob("cu-doc-mention__item_selected",i===n.selectedIndex),o.Ib(1),o.Dc("cuTooltip",e.pageTitle),o.Ib(1),o.fd(" ",e.pageTitle," ")}}function J(e,t){if(1&e&&(o.ac(0),o.bd(1,Y,3,4,"div",2),o.vc(2,"async"),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngForOf",o.wc(2,2,e.items$))("ngForTrackBy",e.trackById)}}function ee(e,t){1&e&&(o.cc(0,"div",5),o.gc(1,6),o.bc())}let te=(()=>{class e{constructor(e,t,i){this.docManagerService=e,this.changeDetectorRef=t,this.store=i,this.onSelect=new o.o,this.onGeometryChange=new o.o,this.trackById=Object(n.d)("pageId"),this.selectedIndex=0,this.destroy$=new A.a,this.query$=new $.a(null),this.loading$=new $.a(!1),this.team$=this.store.select(X.getTeam),this.items$=this.query$.pipe(Object(R.a)(),Object(M.a)(this.team$),Object(F.a)(e=>this.loading$.next(!0)),Object(L.a)(250),Object(N.a)(([e,t])=>e?this.docManagerService.getDocs(t.id,{page_search:e}).pipe(Object(z.a)(e=>e.views&&Object(V.a)(e.views.map(e=>e.pages)).map(e=>({teamId:t.id,pageId:e.id,pageTitle:e.name,viewId:e.view_id,docsHome:e.parent&&String(e.parent.type)===String(B.e.DocsHome)})))):Object(U.a)([])),Object(F.a)(e=>{(!e||this.selectedIndex>e.length-1)&&(this.selectedIndex=0),this.loading$.next(!1),this.changeDetectorRef.markForCheck()}),Object(q.a)({refCount:!0,bufferSize:1}))}ngOnInit(){this.items$.pipe(Object(d.a)(this.destroy$)).subscribe(()=>{this.onGeometryChange.emit()})}ngOnChanges(e){e.query&&this.query$.next(this.query)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}handleKey(e){this.items$.pipe(Object(G.a)()).subscribe(t=>{if(t){switch(e.key){case c.c.ENTER:this.selectedIndex<=t.length&&this.onSelect.emit(t[this.selectedIndex]);break;case c.a.ARROW_UP:this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=t.length-1);break;case c.a.ARROW_DOWN:this.selectedIndex++,this.selectedIndex>t.length-1&&(this.selectedIndex=0);break;case c.c.SPACE:if(1===t.length)return this.onSelect.emit(t[0]),!0}this.changeDetectorRef.markForCheck()}})}click(e,t){t.preventDefault(),t.stopPropagation(),this.onSelect.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(H.a),o.Wb(o.h),o.Wb(W.Store))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-doc-mention"]],hostAttrs:[1,"cu-doc-mention"],inputs:{query:"query"},outputs:{onSelect:"onSelect",onGeometryChange:"onGeometryChange"},features:[o.Gb],decls:7,vars:11,consts:function(){let e;return e=$localize`:@@common_no-results␟c1b09f807bf7c5d9ec2a8653ec1df70d513aa2fb␟911393712054691180: No results
`,[[4,"ngIf"],["class","cu-doc-mention__empty",4,"ngIf"],["class","cu-doc-mention__item",3,"cu-doc-mention__item_selected","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-doc-mention__item",3,"mousedown"],["tooltipDisabledIfTextNotTruncated","true","tooltipDelay","500",1,"cu-doc-mention__item-name",3,"cuTooltip"],[1,"cu-doc-mention__empty"],e]},template:function(e,t){if(1&e&&(o.bd(0,Z,1,0,"cu-loader",0),o.vc(1,"async"),o.bd(2,J,3,4,"ng-container",0),o.vc(3,"async"),o.bd(4,ee,2,0,"div",1),o.vc(5,"async"),o.vc(6,"async")),2&e){let e=null,i=null;o.Dc("ngIf",o.wc(1,3,t.loading$)),o.Ib(2),o.Dc("ngIf",null==(e=o.wc(3,5,t.items$))?null:e.length),o.Ib(2),o.Dc("ngIf",!(null!=(i=o.wc(5,7,t.items$))&&i.length||o.wc(6,9,t.loading$)))}},directives:[r.q,K.a,r.p,Q.a],pipes:[r.b],styles:['.cu-doc-mention{display:block;max-height:350px;overflow-y:auto}.cu-os-win .cu-doc-mention{scrollbar-width:thin}.cu-os-win .cu-doc-mention::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-doc-mention::-webkit-scrollbar-track,.cu-os-win .cu-doc-mention::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-doc-mention::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-doc-mention::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-doc-mention::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-doc-mention::-webkit-scrollbar,.cu-os-win .dark-theme .cu-doc-mention::-webkit-scrollbar,.cu-os-win.dark-theme .cu-doc-mention::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-doc-mention::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-doc-mention::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-doc-mention::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-doc-mention::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-doc-mention::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-doc-mention::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-doc-mention::-webkit-scrollbar-thumb:hover{border-color:#384047}.cu-doc-mention__item{display:flex;align-items:center;padding:10px 18px;position:relative;cursor:pointer}.cu-doc-mention__item:hover:before,.cu-doc-mention__item_selected:before{content:"";display:block;position:absolute;top:0;left:10px;width:calc(100% - 20px);height:100%;border-radius:4px;pointer-events:none;z-index:0;background:#f6f7f9}.dark-theme .cu-doc-mention__item:hover:before,.dark-theme .cu-doc-mention__item_selected:before{background:#2b343b}.cu-doc-mention__item-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:relative;font:400 13px/18px Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-doc-mention__item-name{color:#d5d6d7}.cu-doc-mention__empty{display:flex;align-items:center;justify-content:center;padding:20px;font:italic 300 13px Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-doc-mention__empty{color:#abaeb0}'],encapsulation:2,changeDetection:0}),e})();var ie=i("aIzb");const oe=["userMentionList"],ne=["docMentionList"],se=["docRecentList"],ce=["taskMentionList"];function ae(e,t){if(1&e){const e=o.dc();o.cc(0,"div",6),o.qc("click",function(i){o.Uc(e);const n=t.$implicit;return o.uc().clickTab(n.id,i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit,i=o.uc();o.Ob("cu-mention-selector__tab_selected",i.selectedTab===e.id),o.Ib(1),o.fd(" ",e.name," ")}}function re(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-user-mention-body",7,8),o.qc("onSelectUser",function(t){o.Uc(e);const i=o.uc();return i.select(i.MentionType.User,t)})("onSelectUserGroup",function(t){o.Uc(e);const i=o.uc();return i.select(i.MentionType.UserGroup,t)})("onSelectTaskUserGroup",function(t){o.Uc(e);const i=o.uc();return i.select(i.MentionType.TaskUserGroup,t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("users",e.users)("showNotif",e.showNotif)("maxResults",e.maxResults)("userGroups",e.userGroups)("allUsers",e.allUsers)("isGuest",e.isGuest)("task",e.task)("subcategory",e.subcategory)("taskUserGroups",e.taskUserGroups)}}function le(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-doc-recent",11,12),o.qc("onSelect",function(t){o.Uc(e);const i=o.uc(2);return i.select(i.MentionType.Doc,t)})("onGeometryChange",function(t){return o.Uc(e),o.uc(2).onGeometryChange.emit(t)}),o.bc()}}function de(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-doc-mention",13,14),o.qc("onSelect",function(t){o.Uc(e);const i=o.uc(2);return i.select(i.MentionType.Doc,t)})("onGeometryChange",function(t){return o.Uc(e),o.uc(2).onGeometryChange.emit(t)}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("query",e.query)}}function ue(e,t){if(1&e&&(o.ac(0),o.bd(1,le,2,0,"cu-doc-recent",9),o.bd(2,de,2,1,"cu-doc-mention",10),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",!e.query),o.Ib(1),o.Dc("ngIf",e.query)}}const me=function(e){return[e]};function pe(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-task-selector",15,16),o.qc("onSelect",function(t){return o.Uc(e),o.uc().selectTask(null==t?null:t.task)})("onDropdownReposition",function(t){return o.Uc(e),o.uc().onGeometryChange.emit(t)}),o.bc(),o.Zb()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("excludeCurrentTask",!1)("taskIdsToForSubtasks",e.taskId?o.Hc(7,me,e.taskId):null)("excludeParentTask",!1)("showSearch",!1)("showSubtasks",!1)("searchSubtasks",!0)("query",e.query)}}let he=(()=>{class e{constructor(e,t){this.elementRef=e,this.taskMentionService=t,this.maxResults=10,this.showNotif=!1,this.onSelect=new o.o,this.onSelectTab=new o.o,this.onGeometryChange=new o.o,this.MentionType=s.a,this.trackById=Object(n.d)("id"),this.tabs=[{id:s.a.User,name:$localize`:@@common_people:People`},{id:s.a.Task,name:$localize`:@@common_tasks:Tasks`},{id:s.a.Doc,name:$localize`:@@common_docs:Docs`}]}ngOnInit(){}handleKey(e){return!e.shortkey||e.key!==c.a.ARROW_LEFT&&e.key!==c.a.ARROW_RIGHT?this.userMentionList?this.userMentionList.handleKey(e):this.docMentionList?this.docMentionList.handleKey(e):this.docRecentList?this.docRecentList.handleKey(e):this.taskMentionList&&this.taskMentionList.taskRecentList?this.taskMentionList.taskRecentList.handleKey(e):void 0:(this.shiftTab(e.key===c.a.ARROW_RIGHT?1:-1),!1)}select(e,t){this.onSelect.emit({type:e,data:t})}shiftTab(e){let t=this.tabs.findIndex(e=>e.id===this.selectedTab);t+=e,t<0&&(t=this.tabs.length-1),t>this.tabs.length-1&&(t=0),this.clickTab(this.tabs[t].id)}clickTab(e,t){t&&(t.preventDefault(),t.stopPropagation()),this.onSelectTab.emit(e)}selectTask(e){this.onSelect.emit({type:s.a.Task,data:this.taskMentionService.getTaskMentionObject(e)})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.m),o.Wb(a.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-mention-selector"]],viewQuery:function(e,t){if(1&e&&(o.jd(oe,1),o.jd(ne,1),o.jd(se,1),o.jd(ce,1)),2&e){let e;o.Qc(e=o.rc())&&(t.userMentionList=e.first),o.Qc(e=o.rc())&&(t.docMentionList=e.first),o.Qc(e=o.rc())&&(t.docRecentList=e.first),o.Qc(e=o.rc())&&(t.taskMentionList=e.first)}},hostAttrs:[1,"cu-mention-selector"],inputs:{maxResults:"maxResults",users:"users",taskId:"taskId",defaultProjectId:"defaultProjectId",showNotif:"showNotif",query:"query",selectedTab:"selectedTab",userGroups:"userGroups",allUsers:"allUsers",task:"task",subcategory:"subcategory",isGuest:"isGuest",taskUserGroups:"taskUserGroups"},outputs:{onSelect:"onSelect",onSelectTab:"onSelectTab",onGeometryChange:"onGeometryChange"},decls:7,vars:5,consts:function(){let e;return e=$localize`:@@cu-mention-selector__mention-tip␟6ae9ffe237c6ab1c00ef88be1b496eeea3585d8c␟8347066388470781704: Type ‘@’ to mention people, ‘@@’ for tasks and ‘@@@’ for docs.
`,[[1,"cu-mention-selector__tabs"],["class","cu-mention-selector__tab",3,"cu-mention-selector__tab_selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"users","showNotif","maxResults","userGroups","allUsers","isGuest","task","subcategory","taskUserGroups","onSelectUser","onSelectUserGroup","onSelectTaskUserGroup",4,"ngIf"],[4,"ngIf"],[1,"cu-mention-selector__footer"],e,[1,"cu-mention-selector__tab",3,"click"],[3,"users","showNotif","maxResults","userGroups","allUsers","isGuest","task","subcategory","taskUserGroups","onSelectUser","onSelectUserGroup","onSelectTaskUserGroup"],["userMentionList",""],[3,"onSelect","onGeometryChange",4,"ngIf"],[3,"query","onSelect","onGeometryChange",4,"ngIf"],[3,"onSelect","onGeometryChange"],["docRecentList",""],[3,"query","onSelect","onGeometryChange"],["docMentionList",""],["modifier","task-selector_task-mentions",3,"excludeCurrentTask","taskIdsToForSubtasks","excludeParentTask","showSearch","showSubtasks","searchSubtasks","query","onSelect","onDropdownReposition"],["taskMentionList",""]]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.bd(1,ae,2,3,"div",1),o.bc(),o.bd(2,re,2,9,"cu-user-mention-body",2),o.bd(3,ue,3,2,"ng-container",3),o.bd(4,pe,3,9,"ng-container",3),o.cc(5,"div",4),o.gc(6,5),o.bc()),2&e&&(o.Ib(1),o.Dc("ngForOf",t.tabs)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",t.selectedTab===t.MentionType.User),o.Ib(1),o.Dc("ngIf",t.selectedTab===t.MentionType.Doc),o.Ib(1),o.Dc("ngIf",t.selectedTab===t.MentionType.Task))},directives:[r.p,r.q,P,j.a,te,ie.a],styles:['.cu-mention-selector{display:flex;flex-direction:column;max-height:350px;width:500px;max-width:100%;overflow-y:hidden}.cu-mention-selector .cu-task-search,.cu-mention-selector .cu-task-selector{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}.cu-mention-selector__tabs{display:flex;flex-shrink:0;height:40px;padding:0 18px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-mention-selector__tabs{border-bottom-color:#1e272e}.cu-mention-selector__tab{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;position:relative;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;margin-right:20px;color:#7c828d}.dark-theme .cu-mention-selector__tab{color:#d5d6d7}.cu-mention-selector__tab:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-mention-selector__tab:hover{color:var(--theme-main-color)}}.cu-mention-selector__tab:after{content:"";display:block;position:absolute;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;width:100%;height:2px;top:0}.cu-mention-selector__tab_selected{pointer-events:none;color:#292d34}.dark-theme .cu-mention-selector__tab_selected{color:#d5d6d7}.cu-mention-selector__tab_selected:after{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-mention-selector__tab_selected:after{background:var(--theme-main-color)}}.cu-mention-selector__footer{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;justify-content:center;border-radius:0 0 6px 6px;padding:5px 20px;min-height:25px;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;border-top:1px solid #e9ebf0;background:#fafbfc;color:#7c828d}.dark-theme .cu-mention-selector__footer{border-top-color:#1e272e;background:#2b343b;color:#828588}'],encapsulation:2,changeDetection:0}),e})()},bpMd:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("ofXK"),n=i("EDFS"),s=i("bFKe"),c=i("tyNb"),a=i("Hns5"),r=i("K0KF"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.d,c.l,s.b,a.a,r.a]]}),e})()},cBNe:function(e,t,i){"use strict";var o=i("ZkSf");function n(e){delete e.position}function s(e){e.position=void 0}e.exports=function(e,t){return o(e,t?n:s),e}},cC1p:function(e,t,i){"use strict";i.d(t,"Kb",function(){return a}),i.d(t,"c",function(){return r}),i.d(t,"hb",function(){return l}),i.d(t,"d",function(){return d}),i.d(t,"e",function(){return u}),i.d(t,"Gb",function(){return m}),i.d(t,"cb",function(){return p}),i.d(t,"gb",function(){return f}),i.d(t,"db",function(){return b}),i.d(t,"fb",function(){return g}),i.d(t,"eb",function(){return _}),i.d(t,"o",function(){return v}),i.d(t,"p",function(){return k}),i.d(t,"q",function(){return y}),i.d(t,"pb",function(){return w}),i.d(t,"ib",function(){return x}),i.d(t,"jb",function(){return I}),i.d(t,"kb",function(){return T}),i.d(t,"lb",function(){return C}),i.d(t,"nb",function(){return D}),i.d(t,"Z",function(){return O}),i.d(t,"Y",function(){return S}),i.d(t,"mb",function(){return E}),i.d(t,"Fb",function(){return P}),i.d(t,"k",function(){return j}),i.d(t,"X",function(){return A}),i.d(t,"ob",function(){return $}),i.d(t,"Eb",function(){return U}),i.d(t,"bb",function(){return R}),i.d(t,"f",function(){return M}),i.d(t,"ab",function(){return F}),i.d(t,"U",function(){return L}),i.d(t,"A",function(){return N}),i.d(t,"y",function(){return z}),i.d(t,"z",function(){return q}),i.d(t,"B",function(){return G}),i.d(t,"D",function(){return V}),i.d(t,"C",function(){return B}),i.d(t,"N",function(){return X}),i.d(t,"V",function(){return H}),i.d(t,"E",function(){return W}),i.d(t,"r",function(){return K}),i.d(t,"x",function(){return Q}),i.d(t,"t",function(){return Z}),i.d(t,"w",function(){return Y}),i.d(t,"s",function(){return J}),i.d(t,"u",function(){return ee}),i.d(t,"v",function(){return te}),i.d(t,"T",function(){return ie}),i.d(t,"K",function(){return oe}),i.d(t,"L",function(){return ne}),i.d(t,"M",function(){return se}),i.d(t,"O",function(){return ce}),i.d(t,"H",function(){return ae}),i.d(t,"G",function(){return re}),i.d(t,"J",function(){return me}),i.d(t,"I",function(){return ke}),i.d(t,"R",function(){return ye}),i.d(t,"P",function(){return we}),i.d(t,"Q",function(){return xe}),i.d(t,"S",function(){return Ie}),i.d(t,"W",function(){return Te}),i.d(t,"F",function(){return Ce}),i.d(t,"i",function(){return De}),i.d(t,"h",function(){return Oe}),i.d(t,"g",function(){return Se}),i.d(t,"j",function(){return Ee}),i.d(t,"l",function(){return Pe}),i.d(t,"m",function(){return je}),i.d(t,"Hb",function(){return $e}),i.d(t,"n",function(){return Ue}),i.d(t,"Cb",function(){return Re}),i.d(t,"xb",function(){return Me}),i.d(t,"yb",function(){return Fe}),i.d(t,"zb",function(){return Le}),i.d(t,"vb",function(){return Ne}),i.d(t,"ub",function(){return ze}),i.d(t,"Ab",function(){return qe}),i.d(t,"Db",function(){return Ge}),i.d(t,"wb",function(){return Ve}),i.d(t,"Bb",function(){return Be}),i.d(t,"sb",function(){return Xe}),i.d(t,"qb",function(){return He}),i.d(t,"rb",function(){return We}),i.d(t,"tb",function(){return Ke}),i.d(t,"Jb",function(){return Ye}),i.d(t,"a",function(){return Je}),i.d(t,"b",function(){return et}),i.d(t,"Ib",function(){return tt});var o=i("YAnr"),n=i("42vj"),s=i("R4vD"),c=i("BeL+");const a="tu",r={title:"Assign",key:"a",icon:"command-assign",cssClass:"assign",inputType:"dropdown",inputHint:"Type user name...",desc:"Add or remove assignees",onboardingTitle:"Assignees"},l={title:"Reminder Notification",key:"rn",icon:"command-assign",cssClass:"assign",inputType:"dropdown",desc:"Add when to receive a notification before a reminder is due",onboardingTitle:"Reminder Notification"},d={title:"Assign comment",key:"ac",icon:"command-assign",cssClass:"assign",inputType:"dropdown",inputHint:"Type user name...",desc:"Make this comment an action item"},u={title:"Assign to me",key:"me",icon:"command-assign",cssClass:"assign",inputType:"none",desc:"Assign this task to myself"},m={title:"Watcher",key:"w",icon:"command-watcher",cssClass:"watcher",inputType:"dropdown",inputHint:"Type user name...",desc:"Add or remove people that follow this task"},p={title:"Priority",key:"p",icon:"command-priority",cssClass:"priority",inputType:"dropdown",inputHint:"Type priority name...",desc:"Set the importance of this task"};function h(e){return{title:Object(s.c)(e.priority)+" Priority",key:e.priority,icon:"command-priority",cssClass:"priority",inputType:"none",desc:"Set task priority to "+Object(s.c)(e.priority),minChars:2,payload:e,allowCommand:e=>e[p.key]}}const f=h(n.g),b=h(n.c),g=h(n.e),_=h(n.d),v={title:"Due Date",key:"d",icon:"cu2-calendar-check",cssClass:"due-date",inputType:"dropdown",inputHint:"Type due date...",desc:"Type any date or time for a deadline"},k={title:"Due Date to today",key:"today",icon:"cu2-calendar-day",cssClass:"due-date-today",inputType:"none",allowCommand:e=>e[v.key]},y={title:"Add to Inbox",key:"inbox",icon:"cu2-inbox-in",cssClass:"due-date-today-me",inputType:"none",desc:"Assign to me and due today"},w={title:"Time Estimate",key:"est",icon:"cu2-hourglass",cssClass:"time-estimate",inputType:"dropdown",inputHint:"Type time...",desc:"Type any time for an estimate"},x={title:"Sprint points",key:"pts",icon:"sprint-points",cssClass:"time-estimate",inputType:"dropdown",inputHint:"Set sprint points...",secondHint:"Select an assignee...",desc:"Select a Sprint Point value"},I={title:"Start Date",key:"sd",icon:"cu2-calendar",cssClass:"start-date",inputType:"dropdown",inputHint:"Type start date...",desc:"Type any date or time for a deadline"},T={title:"Status",key:"s",icon:"command-status",cssClass:"status",inputType:"dropdown",inputHint:"Type status name...",desc:"Change this task's status"},C={title:"Close task",key:"close",icon:"cu2-check",cssClass:"status-closed",inputType:"none",desc:"Change the status to closed",alt:["done","complete"]},D={title:"Tags",key:"t",icon:"command-tags",cssClass:"tags",inputType:"dropdown",inputHint:"Type tag name...",desc:"Add or remove tags"},O={title:"Move",key:"m",icon:"command-list",cssClass:"location",inputType:"dropdown",inputHint:"Type List name",desc:"Change the List of this task",alt:["move","project","location","folder","list"]},S={title:"Table of Tasks (List view)",key:"l",icon:"cu2-view-1",cssClass:"list",inputType:"dropdown",desc:"Insert a list view with tasks",alt:["listview","view","tasks"]},E={title:"Subtask",key:"-",icon:"command-subtask",cssClass:"subtask",inputType:"text",inputHint:"Type subtask name...",desc:"Create a subtask and mention it here",onboardingAction:"create"},P={title:"Waiting on Dependency",key:"o",icon:"command-waiting-on",cssClass:"waiting-on",inputType:"dropdown",inputHint:"Type task name...",desc:"Add a task that must be completed before this task",alt:["dependency"]},j={title:"Blocking Dependency",key:"b",icon:"command-blocking",cssClass:"blocking",inputType:"dropdown",inputHint:"Type task name...",desc:"Add a task that can't be started until this task is completed",alt:["dependency"]},A={title:"Link To",key:"lt",icon:"cu2-link",cssClass:"blocking",inputType:"dropdown",inputHint:"Type task name...",desc:"Links tasks together to see relationships easily.",alt:["dependency"]},$={title:"Task mention",key:"#",icon:"command-task-mention",cssClass:"task-mention",inputType:"dropdown",inputHint:"Type task name...",desc:"Mention any ClickUp task here"},U={title:"User mention",key:"@",icon:"command-user-mention",cssClass:"user-mention",inputType:"dropdown",inputHint:"Type user name...",desc:"Mention people to notify them"},R={title:"Position",key:"pos",icon:"command-position",cssClass:"position",inputType:"number",inputHint:"New position...",desc:"Adjust the position in the List"},M={title:"Attachment",key:"attach",icon:"cu2-image",cssClass:"attachment",inputType:"dropdown",inputHint:"Type attachment title...",desc:"Add attachment of task to editor",alt:["file","attach","image"]},F={title:"Markdown",key:"md",icon:"cu2-markdown",cssClass:"markdown",inputType:"dropdown",desc:"Paste markdown text into editor",alt:["md"]},L={title:"Quote",key:"q",formatCommand:!0,icon:"cu2-quote-left",cssClass:"quote",inputType:"none"},N={title:"Banner Success",key:"success",formatCommand:!0,icon:"cu2-flag",cssClass:"banner-success",inputType:"none"},z={title:"Banner Danger",key:"danger",formatCommand:!0,icon:"cu2-flag",cssClass:"banner-danger",inputType:"none"},q={title:"Banner Info",key:"info",formatCommand:!0,icon:"cu2-flag",cssClass:"banner-info",inputType:"none"},G={title:"Banner Warning",key:"warning",formatCommand:!0,icon:"cu2-flag",cssClass:"banner-warning",inputType:"none"},V={title:"Inline code",key:"in",formatCommand:!0,icon:"command-code",cssClass:"inline-code",inputType:"none"},B={title:"Bold",key:"bo",formatCommand:!0,icon:"cu2-bold",cssClass:"bold",inputType:"none"},X={title:"Italic",key:"it",formatCommand:!0,icon:"cu2-italic",cssClass:"italic",inputType:"none"},H={title:"Strikethrough",key:"s-",formatCommand:!0,icon:"cu2-strikethrough",cssClass:"strikethrough",inputType:"none"},W={title:"Code block",key:"co",formatCommand:!0,icon:"cu2-code_solid",cssClass:"code-block",inputType:"none"},K={title:"Background color",key:"bgcolor",formatCommand:!0,icon:"cu2-paint-roller",inputType:"dropdown",alt:["background","color","highlight"]},Q={title:"Yellow background",key:"y",formatCommand:!0,icon:"cu2-paint-roller",cssClass:"background-yellow",inputType:"none"},Z={title:"Green background",key:"g",formatCommand:!0,icon:"cu2-paint-roller",cssClass:"background-green",inputType:"none"},Y={title:"Red background",key:"r",formatCommand:!0,icon:"cu2-paint-roller",cssClass:"background-red",inputType:"none"},J={title:"Blue background",key:"bl",formatCommand:!0,icon:"cu2-paint-roller",cssClass:"background-blue",inputType:"none"},ee={title:"Orange background",key:"or",formatCommand:!0,icon:"cu2-paint-roller",cssClass:"background-orange",inputType:"none"},te={title:"Purple background",key:"prp",formatCommand:!0,icon:"cu2-paint-roller",cssClass:"background-purple",inputType:"none"},ie={title:"Normal text",key:"norm",formatCommand:!0,icon:"cu2-text",cssClass:"normal-text",inputType:"none"},oe={title:"Heading 1",key:"h1",formatCommand:!0,icon:"cu2-h1",cssClass:"h1",inputType:"none"},ne={title:"Heading 2",key:"h2",formatCommand:!0,icon:"cu2-h2",cssClass:"h2",inputType:"none"},se={title:"Heading 3",key:"h3",formatCommand:!0,icon:"cu2-h3",cssClass:"h3",inputType:"none"},ce={title:"Website Link",key:"k",icon:"cu2-link",cssClass:"link",inputType:"text",inputHint:"Type URL here..."},ae={title:"GIPHY",key:"giphy",icon:"giphy-symbol",cssClass:"giphy",inputType:"text",alt:["gif"],inputHint:"Enter text and hit enter...",desc:"Post a random gif"},re={title:"Embed",key:"em",icon:"cu2-brackets-curly",cssClass:"embed",inputType:"text",inputHint:"Type URL here...",alt:["frame","iframe"],validate:e=>{const t=Object(o.i)(e,!0,!0);return t&&t.id?null:"URL is not valid"}},le={inputType:"text",inputHint:"Type URL here...",replaceCommand:re,allowCommand:e=>e[re.key]};function de(e,t){const i=Object(o.i)(Object(o.h)(e),!1,!0);return i&&i.id&&i.service===t?null:"URL is not valid"}const ue=Object.assign(Object.assign({},le),{title:"CloudApp",key:"cloudapp",icon:"cloudapp-symbol_color",cssClass:"cloudapp",validate:e=>de(e,"cloudapp")}),me=Object.assign(Object.assign({},le),{title:"YouTube",key:"youtube",icon:"youtube-symbol_color",cssClass:"youtube",validate:e=>de(e,"youtube")}),pe=Object.assign(Object.assign({},le),{title:"Vimeo",key:"vimeo",icon:"vimeo-symbol_color",cssClass:"vimeo",validate:e=>de(e,"vimeo")}),he=Object.assign(Object.assign({},le),{title:"Figma",key:"figma",icon:"figma-symbol_color",cssClass:"figma",validate:e=>de(e,"figma")}),fe=Object.assign(Object.assign({},le),{title:"Loom",key:"loom",icon:"loom-symbol_color",cssClass:"loom",validate:e=>de(e,"loom")}),be=Object.assign(Object.assign({},le),{title:"Google Drive",key:"em gdrive",icon:"google-drive-colored",cssClass:"attachment-google",validate:e=>de(e,"gdrive")}),ge=Object.assign(Object.assign({},le),{title:"Google Slides",key:"em gslide",icon:"google-slides-symbol",cssClass:"google-slides",validate:e=>de(e,"gdrive")}),_e=Object.assign(Object.assign({},le),{title:"Google Docs",key:"em gdoc",icon:"google-docs-symbol",cssClass:"google-docs",validate:e=>de(e,"gdrive")}),ve=Object.assign(Object.assign({},le),{title:"Google Sheets",key:"em gsheet",icon:"google-sheets-symbol",cssClass:"google-sheets",validate:e=>de(e,"gdrive")}),ke=Object.assign(Object.assign({},le),{title:"Miro",key:"miro",icon:"miro-symbol_color",cssClass:"miro",validate:e=>de(e,"miro")}),ye={title:"Numeric List",key:"num",formatCommand:!0,icon:"cu2-list-ol",cssClass:"numeric-list",inputType:"none",alt:["list"]},we={title:"Bulleted List",key:"bul",formatCommand:!0,icon:"cu2-list-ul",cssClass:"bulleted-list",inputType:"none",alt:["list"]},xe={title:"Check List",key:"check",formatCommand:!0,icon:"cu2-tasks",cssClass:"checklist",inputType:"none",alt:["list"]},Ie={title:"Toggle List",key:"toggle",formatCommand:!0,icon:"cu2-toggle-list",cssClass:"togglelist",inputType:"none",alt:["list"]},Te={title:"Table",key:"table",formatCommand:!0,icon:"cu2-table",cssClass:"table",inputType:"none"},Ce={title:"Divider",key:"div",icon:"cu2-horizontal-rule",cssClass:"divider",inputType:"none"},De={title:"Google drive file",key:"gdrive",icon:"google-drive-colored",cssClass:"attachment-google",inputType:"none",desc:"Add google file to editor",alt:["google","drive"]},Oe={title:"Dropbox file",key:"dropbox",icon:"dropbox-symbol_color",cssClass:"attachment-dropbox",inputType:"none",desc:"Add dropbox file to editor"},Se={title:"Box file",key:"box",icon:"box-colored",cssClass:"attachment-box",inputType:"none",desc:"Add box file to editor"},Ee={title:"OneDrive/Sharepoint file",key:"onedrive",icon:"onedrive-symbol_color",cssClass:"attachment-onedrive",inputType:"none",desc:"Add onedrive/sharepoint file to editor"},Pe={title:"Button",key:"button",icon:"command-button",cssClass:"button",inputType:"dropdown",desc:"Insert button"},je={title:"Table of contents",key:"tc",icon:"command-list",cssClass:"location",inputType:"none"},Ae={title:"Task actions",separatorHeader:!0,key:"separator_task_actions"},$e={title:"Zoom",key:"zoom",icon:"zoom-symbol_color",cssClass:"zoom",inputType:"none",desc:"Start a Zoom meeting"},Ue={title:"Doc",key:"doc",icon:"cu2-doc-3",cssClass:"doc",inputType:"text",inputHint:"Type doc name...",desc:"Create a doc and embed it here"},Re={title:"Text",key:"ttext",icon:"cu2-text",cssClass:"turn-into-text",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Me={title:"Heading 1",key:"theading1",icon:"cu2-h1",cssClass:"turn-into-heading",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Fe={title:"Heading 2",key:"theading2",icon:"cu2-h2",cssClass:"turn-into-heading",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Le={title:"Heading 3",key:"theading3",icon:"cu2-h3",cssClass:"turn-into-heading",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Ne={title:"Check List",key:"tchecklist",icon:"cu2-tasks",cssClass:"turn-into-check-list",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},ze={title:"Bulleted List",key:"tbulletedList",icon:"cu2-list-ul",cssClass:"turn-into-bulletedlist",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},qe={title:"Numbered List",key:"tnumberedList",icon:"cu2-list-ol",cssClass:"turn-into-numberedlist",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Ge={title:"Toggle List",key:"ttoggleList",icon:"cu2-toggle-list",cssClass:"turn-into-togglelist",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Ve={title:"Code Block",key:"tcodeblock",icon:"cu2-code_solid",cssClass:"turn-into-code-block",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Be={title:"Quote",key:"tquote",icon:"cu2-quote-left",cssClass:"turn-into-quote",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Xe={title:"Banner Success",key:"tbannerSuccess",icon:"cu2-flag",cssClass:"turn-into-banner-success",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},He={title:"Banner Danger",key:"tbannerDanger",icon:"cu2-flag",cssClass:"turn-into-banner-danger",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},We={title:"Banner Info",key:"tbannerInfo",icon:"cu2-flag",cssClass:"turn-into-banner-info",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Ke={title:"Banner Warning",key:"tbannerWarning",icon:"cu2-flag",cssClass:"turn-into-banner-warning",inputType:"none",turnIntoCommand:!0,miniItem:!0,customFilter:e=>e===a},Qe=[{title:"Popular",separatorHeader:!0,key:"separator_popular",formatCommand:!0},xe,Ce,we,Te,W],Ze=[{title:"Editing",separatorHeader:!0,key:"separator_editing",formatCommand:!0},ie,oe,ne,se,xe,Ce,Te,V,L,N,z,q,G,W,ce,ye,we,Ie,B,X,H,Q,Z,Y,J,ee,te,{title:"Embed",separatorHeader:!0,key:"separator_embed"},re,ue,me,pe,he,fe,ke,ae,be,ge,_e,ve,S],Ye=[{title:"Turn Into",separatorHeader:!0,key:"separator_turn_into",customFilter:e=>"tu"===e},Re,Me,Fe,Le,Ne,ze,qe,Ge,Ve,Be,Xe,He,We,Ke,{title:"Others",separatorTail:!0,key:"separator_turn_into_others",customFilter:e=>e===a}],Je=Object(c.a)([...Qe,...Ze,Ae,d,r,l,u,m,p,f,b,g,_,v,k,y,w,x,I,T,C,D,O,E,Ue,P,j,A,$,U,R,M,De,Oe,Ee,Se,F,Pe,$e,je]),et=Object(c.a)([...Qe,Pe,je,...Ze,Ae,d,r,l,u,m,p,f,b,g,_,v,k,y,w,x,I,T,C,D,O,E,Ue,P,j,A,$,U,R,M,De,Oe,Ee,Se,F,$e]),tt=Ze.reduce((e,t)=>(e[t.key]=!0,e),{})},cch5:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("h3dx"),n=i("fXoL");let s=(()=>{class e{transform(e,t=""){return Object(o.e)(e,null,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"recurringLegacyToText",type:e,pure:!0}),e})()},ciU8:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("3NTJ"),n=i("oE8l"),s=i("BoH5"),c=i("ofXK"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[c.c,s.a,n.a,o.a]]}),e})()},cibJ:function(e,t,i){e.exports=i.p+"milestones.eeb002aede91853063a6.png"},cjvU:function(e,t,i){"use strict";i.d(t,"a",function(){return $});var o=i("XNiG"),n=i("1G5W"),s=i("SxV6"),c=i("pLZG"),a=i("AMNA"),r=i("f0Wu"),l=i("fXoL"),d=i("jJW4"),u=i("gXbQ"),m=i("oy6Y"),p=i("ofXK"),h=i("QBIw"),f=i("NsZK"),b=i("VhLi");function g(e,t){if(1&e&&(l.cc(0,"div",3),l.dd(1),l.bc()),2&e){const e=l.uc();l.Ib(1),l.fd(" ",e.title,"\n")}}function _(e,t){1&e&&(l.ac(0),l.dd(1,", "),l.Zb())}function v(e,t){if(1&e&&(l.cc(0,"span",11),l.dd(1),l.vc(2,"momentDate"),l.bc()),2&e){const e=l.uc(3);l.Ib(1),l.ed(l.xc(2,1,e.dateMs,e.periodFormat))}}function k(e,t){if(1&e&&(l.ac(0),l.bd(1,_,2,0,"ng-container",8),l.dd(2),l.vc(3,"momentDate"),l.bd(4,v,3,4,"span",10),l.Zb()),2&e){const e=l.uc(2);l.Ib(1),l.Dc("ngIf",e.showDay),l.Ib(1),l.ed(l.xc(3,3,e.dateMs,e.timeFormat)),l.Ib(2),l.Dc("ngIf",e.periodFormat)}}function y(e,t){1&e&&(l.cc(0,"span",12),l.dd(1,"\xa0-\xa0"),l.bc())}function w(e,t){if(1&e&&(l.cc(0,"div",4),l.Xb(1,"cu-recurring-icon",5),l.cc(2,"div",6),l.cc(3,"span",7),l.vc(4,"momentDate"),l.vc(5,"momentDate"),l.vc(6,"momentDate"),l.dd(7),l.bd(8,k,5,6,"ng-container",8),l.bc(),l.bd(9,y,2,0,"span",9),l.bc(),l.bc()),2&e){const e=l.uc();l.Ob("due-date__no-cursor",e.noCursor)("due-date__past-due-font",e.isPast)("due-date__due-today-font",e.isToday)("due-date__on-time-font",e.isOnTime)("due-date__overdue",e.overdue)("due-date__due-date",!e.addDash),l.Ib(1),l.Dc("task",e.task),l.Ib(2),l.Dc("cuTooltip",l.xc(4,17,e.dateMs,e.showYear?e.fullDateFormat:e.shortDateFormat)+(e.showTime?", "+l.xc(5,20,e.dateMs,e.timeFormat)+(e.periodFormat?l.xc(6,23,e.dateMs,e.periodFormat):""):"")),l.Ib(4),l.ed(e.showDay?e.relativeDate:""),l.Ib(1),l.Dc("ngIf",e.showTime),l.Ib(1),l.Dc("ngIf",e.addDash)}}function x(e,t){1&e&&(l.ac(0),l.dd(1,",\xa0"),l.Zb())}function I(e,t){if(1&e&&(l.cc(0,"span",11),l.dd(1),l.vc(2,"momentDate"),l.bc()),2&e){const e=l.uc(3);l.Ib(1),l.ed(l.xc(2,1,e.dateMs,e.periodFormat))}}function T(e,t){if(1&e&&(l.cc(0,"span",13),l.dd(1),l.vc(2,"momentDate"),l.bd(3,I,3,4,"span",10),l.bc()),2&e){const e=l.uc(2);l.Ib(1),l.ed(l.xc(2,2,e.dateMs,e.timeFormat)),l.Ib(2),l.Dc("ngIf",e.periodFormat)}}function C(e,t){1&e&&(l.cc(0,"span",12),l.dd(1,"\xa0-\xa0"),l.bc())}function D(e,t){if(1&e&&(l.cc(0,"div",4),l.Xb(1,"cu-recurring-icon",5),l.cc(2,"div",6),l.cc(3,"span",13),l.dd(4),l.vc(5,"momentDate"),l.bd(6,x,2,0,"ng-container",8),l.bc(),l.bd(7,T,4,5,"span",14),l.bd(8,C,2,0,"span",9),l.bc(),l.bc()),2&e){const e=l.uc();l.Ob("due-date__notif-date",e.forNotifs)("due-date__no-cursor",e.noCursor)("due-date__past-due-font",e.isPast)("due-date__due-soon",e.dueSoon)("due-date__overdue",e.overdue)("due-date__on-time-font",e.isOnTime)("due-date__due-date",!e.addDash),l.Ib(1),l.Dc("task",e.task),l.Ib(3),l.ed(e.showDay?l.xc(5,19,e.dateMs,e.fullDateFormat):""),l.Ib(2),l.Dc("ngIf",e.showTime&&e.showDay),l.Ib(1),l.Dc("ngIf",e.showTime),l.Ib(1),l.Dc("ngIf",e.addDash)}}function O(e,t){if(1&e&&(l.cc(0,"span",16),l.vc(1,"momentDate"),l.vc(2,"momentDate"),l.dd(3),l.vc(4,"momentDate"),l.bc()),2&e){const e=l.uc(2);l.Dc("cuTooltip",e.showTime?l.xc(1,2,e.dateMs,e.timeFormat)+l.xc(2,5,e.dateMs,e.periodFormat):null),l.Ib(3),l.ed(e.showDay?l.xc(4,8,e.dateMs,e.shortDateFormat):"")}}function S(e,t){1&e&&(l.cc(0,"span",13),l.dd(1,",\xa0"),l.bc())}function E(e,t){if(1&e&&(l.cc(0,"span",11),l.dd(1),l.vc(2,"momentDate"),l.bc()),2&e){const e=l.uc(3);l.Ib(1),l.ed(l.xc(2,1,e.dateMs,e.periodFormat))}}function P(e,t){if(1&e&&(l.cc(0,"span",13),l.dd(1),l.vc(2,"momentDate"),l.bd(3,E,3,4,"span",10),l.bc()),2&e){const e=l.uc(2);l.Ib(1),l.ed(l.xc(2,2,e.dateMs,e.timeFormat)),l.Ib(2),l.Dc("ngIf",e.periodFormat)}}function j(e,t){1&e&&(l.cc(0,"span",12),l.dd(1,"\xa0-\xa0"),l.bc())}function A(e,t){if(1&e&&(l.cc(0,"div",4),l.Xb(1,"cu-recurring-icon",5),l.cc(2,"div",6),l.bd(3,O,5,11,"span",15),l.bd(4,S,2,0,"span",14),l.bd(5,P,4,5,"span",14),l.bd(6,j,2,0,"span",9),l.bc(),l.bc()),2&e){const e=l.uc();l.Ob("due-date__notif-date",e.forNotifs)("due-date__no-cursor",e.noCursor)("due-date__past-due-font",e.isPast)("due-date__due-soon",e.dueSoon)("due-date__overdue",e.overdue)("due-date__on-time-font",e.isOnTime)("due-date__due-date",!e.addDash),l.Ib(1),l.Dc("task",e.task),l.Ib(2),l.Dc("ngIf",!e.showOnlyTimeForToday||!e.isToday),l.Ib(1),l.Dc("ngIf",e.showTime&&e.showDay),l.Ib(1),l.Dc("ngIf",e.showTime||e.showOnlyTimeForToday&&e.isToday),l.Ib(1),l.Dc("ngIf",e.addDash)}}let $=(()=>{class e{constructor(e,t,i,n){this.sharedData=e,this.changeDetector=t,this.userService=i,this.timezonesService=n,this.destroy$=new o.a,this.showTime=!1,this.showDay=!0,this.showOnlyTimeForToday=!1,this.addDash=!1,this.noHighlight=!1,this.noRelational=!1,this.noCursor=!1,this.forNotifs=!1,this.dueSoon=!1,this.overdue=!1,this.showMinutes=!1,this.relativeDate=null,this.fullDateFormat="M/D/YY",this.shortDateFormat="MMM D"}ngOnInit(){this.timezonesService.onTimezoneChange.pipe(Object(n.a)(this.destroy$)).subscribe(()=>{this.dateMs=0,this.setDate(this.dateVal),this.changeDetector.markForCheck()}),this.userService.onDayChange.pipe(Object(n.a)(this.destroy$)).subscribe(()=>{this.setDate(this.dateVal),this.changeDetector.markForCheck()})}ngOnChanges(e){e.date&&this.setDate(this.date),this.dateVal&&(this.isPast=this.evalIsPast(this.dateVal))}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}checkTimeFormat(){this.sharedData.currentUser.pipe(Object(s.a)(),Object(c.a)(e=>!!e)).subscribe(e=>{e.twenty_four_hr_setting?this.timeFormat="H:mm":(this.timeFormat=this.showMinutes?"h:mm":"h",this.periodFormat="a"),"d/m/y"===e.date_format?(this.fullDateFormat="D/M/YY",this.shortDateFormat="D MMM"):"y/m/d"===e.date_format&&(this.fullDateFormat="YY/M/D"),this.changeDetector.markForCheck()})}convertToDate(e){let t=null;switch(typeof e){case"number":t=new Date(e),t&&!isNaN(t.getMonth())||(t=new Date);break;case"string":t=new Date(parseInt(e,10)),t&&!isNaN(t.getMonth())||(t=new Date)}return Object(r.isMoment)(e)?e.toDate():t}evalShowYear(e){return(new Date).getFullYear()!==e.getFullYear()}evalIsToday(e){const t=new Date;return!(t.getFullYear()!==e.getFullYear()||t.getMonth()!==e.getMonth()||t.getDate()!==e.getDate()||this.showTime&&e.getTime()<t.getTime())}evalIsPast(e){const t=new Date,i=e.getTime()<t.getTime();return!this.noHighlight&&i}setDate(e){e instanceof Date||(e=this.convertToDate(e)),e?(this.dateMs=e.getTime(),this.showYear=this.evalShowYear(e),this.isToday=this.evalIsToday(e),this.isPast=this.evalIsPast(e),this.noRelational||(this.relativeDate=Object(a.d)(e,{useShortWeekDays:!0}))):this.relativeDate=null,this.dateVal=e,this.showMinutes=!!this.dateVal&&0!==this.dateVal.getMinutes(),this.checkTimeFormat()}}return e.\u0275fac=function(t){return new(t||e)(l.Wb(d.a),l.Wb(l.h),l.Wb(u.c),l.Wb(m.a))},e.\u0275cmp=l.Qb({type:e,selectors:[["cu-datetime"]],inputs:{title:"title",showTime:"showTime",showDay:"showDay",showOnlyTimeForToday:"showOnlyTimeForToday",addDash:"addDash",noHighlight:"noHighlight",noRelational:"noRelational",noCursor:"noCursor",startDate:"startDate",isOnTime:"isOnTime",forNotifs:"forNotifs",dueSoon:"dueSoon",overdue:"overdue",task:"task",date:"date"},features:[l.Gb],decls:4,vars:4,consts:[["class","due-date__info-key",4,"ngIf"],["class","due-date__info due-date__info-value",3,"due-date__no-cursor","due-date__past-due-font","due-date__due-today-font","due-date__on-time-font","due-date__overdue","due-date__due-date",4,"ngIf"],["class","due-date__info due-date__info-value",3,"due-date__notif-date","due-date__no-cursor","due-date__past-due-font","due-date__due-soon","due-date__overdue","due-date__on-time-font","due-date__due-date",4,"ngIf"],[1,"due-date__info-key"],[1,"due-date__info","due-date__info-value"],[3,"task"],[1,"due-date__info-value-display"],["tooltipLifeTime","15000","tooltipModifier","tooltip_far",1,"due-date__info-value","due-date__info-value-date",3,"cuTooltip"],[4,"ngIf"],["class","due-date__info-value-dash",4,"ngIf"],["class","due-date__info-value due-date__info-value-period",4,"ngIf"],[1,"due-date__info-value","due-date__info-value-period"],[1,"due-date__info-value-dash"],[1,"due-date__info-value"],["class","due-date__info-value",4,"ngIf"],["class","due-date__info-value","tooltipLifeTime","15000","tooltipModifier","tooltip_far",3,"cuTooltip",4,"ngIf"],["tooltipLifeTime","15000","tooltipModifier","tooltip_far",1,"due-date__info-value",3,"cuTooltip"]],template:function(e,t){1&e&&(l.bd(0,g,2,1,"div",0),l.bd(1,w,10,26,"div",1),l.bd(2,D,9,22,"div",2),l.bd(3,A,7,19,"div",2)),2&e&&(l.Dc("ngIf",t.title&&!t.showBoth),l.Ib(1),l.Dc("ngIf",t.relativeDate),l.Ib(1),l.Dc("ngIf",!t.relativeDate&&t.showYear),l.Ib(1),l.Dc("ngIf",!t.relativeDate&&!t.showYear))},directives:[p.q,h.a,f.a],pipes:[b.a],encapsulation:2,changeDetection:0}),e})()},"d9+G":function(e,t,i){"use strict";i.d(t,"a",function(){return R});var o=i("fXoL"),n=i("XNiG"),s=i("xgIS"),c=i("NsZK"),a=i("1G5W"),r=i("IzEk"),l=i("jJQC"),d=i("h7sE");const u=/^(no-?highlight|plain|text)$/i;function m(e){return u.test(e)}var p=i("dw0r"),h=i("6hbx"),f=i("BYBp"),b=i("OU+x"),g=i("Dvla"),_=i("rDax"),v=i("7XkT"),k=i("G2WA"),y=i("ZlQq"),w=i("drq7");class x{constructor(e,t){this.elementRef=e,this.zone=t,this.textSelectEvent=new o.o,this.hasSelection=!1,this.handleMousedown=()=>{document.addEventListener("mouseup",this.handleMouseup,!1)},this.handleMouseup=e=>{window.addEventListener("click",this.preventClickPropagationOnSelection,!0),document.removeEventListener("mouseup",this.handleMouseup,!1),this.processSelection()},this.preventClickPropagationOnSelection=e=>{this.hasSelection&&e.stopPropagation(),window.removeEventListener("click",this.preventClickPropagationOnSelection,!0)},this.handleSelectionchange=()=>{this.hasSelection&&this.processSelection()}}init(){this.zone.runOutsideAngular(()=>{this.elementRef.nativeElement.addEventListener("mousedown",this.handleMousedown,!1),document.addEventListener("selectionchange",this.handleSelectionchange,!1)})}destroy(){this.elementRef.nativeElement.removeEventListener("mousedown",this.handleMousedown,!1),window.removeEventListener("click",this.preventClickPropagationOnSelection,!0),document.removeEventListener("mouseup",this.handleMouseup,!1),document.removeEventListener("selectionchange",this.handleSelectionchange,!1)}getRangeContainer(e){let t=e.commonAncestorContainer;for(;t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;return t}processSelection(){const e=document.getSelection();if(this.hasSelection&&this.zone.runGuarded(()=>{this.hasSelection=!1,this.textSelectEvent.next({text:null,html:null,viewportRectangle:null,hostRectangle:null})}),!e.rangeCount||!e.toString())return;const t=e.getRangeAt(0),i=this.getRangeContainer(t);if(this.elementRef.nativeElement.contains(i)){const o=t.getBoundingClientRect(),n=this.viewportToHost(o,i);this.zone.runGuarded(()=>{const i=t.cloneContents(),s=document.createElement("div");s.appendChild(i);const c=s.innerHTML;this.hasSelection=!0,this.textSelectEvent.emit({text:e.toString(),html:c,viewportRectangle:o,hostRectangle:n})})}}viewportToHost(e,t){const i=this.elementRef.nativeElement,o=i.getBoundingClientRect();let n=e.left-o.left,s=e.top-o.top,c=t;do{n+=c.scrollLeft,s+=c.scrollTop}while(c!==i&&(c=c.parentNode));return{left:n,top:s,width:e.width,height:e.height}}}const I=["*"];let T=(()=>{class e{constructor(){this.onClick=new o.o}ngOnInit(){}click(e){this.onClick.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-text-selection-popup-menu"]],hostAttrs:[1,"cu-text-selection-popup-menu"],hostVars:4,hostBindings:function(e,t){1&e&&o.qc("mousedown",function(e){return t.click(e)}),2&e&&o.ad("top",t.top,"px")("left",t.left,"px")},outputs:{onClick:"onClick"},ngContentSelectors:I,decls:1,vars:0,template:function(e,t){1&e&&(o.Cc(),o.Bc(0))},styles:['@charset "UTF-8";.cu-text-selection-popup-menu{font-weight:400;font-size:14px;line-height:1;position:absolute;z-index:2;top:0;left:0;background:#333;box-shadow:0 1px 5px 3px rgba(0,0,0,.15);border-radius:15px;padding:7px 12px;white-space:nowrap;color:#fff;transform:translate3d(-50%,-100%,0);margin-top:-12px;cursor:pointer}.cu-text-selection-popup-menu:after{bottom:-11px;font-size:15px;left:50%;line-height:15px;content:"\u25bc";color:#333;position:absolute;transform:translateX(-50%)}'],encapsulation:2,changeDetection:0}),e})(),C=(()=>{class e{constructor(e,t,i,s){this.viewContainer=e,this.resolver=t,this.elementRef=i,this.zone=s,this.destroy$=new n.a,this.close$=new n.a,this.disabled=!1,this.onClick=new o.o}ngOnInit(){}ngOnChanges(e){e.disabled&&(this.disabled?this.destroyHandler():this.textSelectionHandler||this.initHandler())}ngOnDestroy(){this.destroyHandler(),this.hidePopup(),this.destroy$.next(),this.destroy$.complete()}initHandler(){this.destroyHandler(),this.textSelectionHandler=new x(this.elementRef,this.zone),this.clickSubscription=this.textSelectionHandler.textSelectEvent.pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.handlePopup(e)}),this.textSelectionHandler.init()}destroyHandler(){this.textSelectionHandler&&(this.textSelectionHandler.destroy(),this.textSelectionHandler=null),this.clickSubscription&&(this.clickSubscription.unsubscribe(),this.clickSubscription=null)}handlePopup(e){e.hostRectangle?(this.hostRectangle=e.hostRectangle,this.selectedText=e.text,this.selectedHtml=e.html,this.showPopup()):(this.hostRectangle=null,this.selectedText=null,this.selectedHtml=null,this.hidePopup())}showPopup(){this.hidePopup();const e=this.templateRef.createEmbeddedView(),t=this.resolver.resolveComponentFactory(T);this.menu=this.viewContainer.createComponent(t,null,this.viewContainer.injector,[e.rootNodes]),this.menu.instance.top=this.hostRectangle.top,this.menu.instance.left=this.hostRectangle.left+this.hostRectangle.width/2,this.menu.changeDetectorRef.detectChanges(),this.menu.instance.onClick.pipe(Object(a.a)(this.close$)).subscribe(e=>{this.onClick.emit({text:this.selectedText,html:this.selectedHtml})})}hidePopup(){if(this.menu){const e=this.viewContainer.indexOf(this.menu.hostView);-1!==e&&this.viewContainer.remove(e),this.menu=null,this.close$.next()}}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.U),o.Wb(o.j),o.Wb(o.m),o.Wb(o.B))},e.\u0275dir=o.Rb({type:e,selectors:[["","cuTextSelectionPopup",""]],inputs:{modifier:"modifier",templateRef:["textSelectionPopupTemplate","templateRef"],disabled:["textSelectionPopupDisabled","disabled"]},outputs:{onClick:"textSelectionPopupClick"},features:[o.Gb]}),e})();var D=i("LdyQ"),O=i("MJvn"),S=i("n+1/"),E=i("UAD/");let P=(()=>{class e{constructor(e){this.commentsService=e}transform(e,t=null,i=!1,o=[],n=[],s=[],c=!1){return e?this.commentsService.getCommentHTML({comment:e},t,!0,i,!0,o,n,null,s,c):""}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(b.a))},e.\u0275pipe=o.Vb({name:"commentBodyHTML",type:e,pure:!0}),e})();const j=["dropdown"];function A(e,t){1&e&&(o.ac(0),o.gc(1,7),o.Zb())}function $(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"cu-task-popup",8),o.qc("onEnter",function(){o.Uc(e);const t=o.uc();return t.taskPopupHandler.handleHover$.next({el:t.taskPopupHandler.hoveredElement,hovered:!0})})("onLeave",function(){o.Uc(e);const t=o.uc();return t.taskPopupHandler.handleHover$.next({el:t.taskPopupHandler.hoveredElement,hovered:!1})}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("taskId",e.taskPopupHandler.hoveredTaskId)("allowRemove",!1)("weights",e.weights)}}const U=function(e,t,i,o,n,s,c){return[e,t,i,o,n,s,c]};let R=(()=>{class e{constructor(e,t,i,s,c,a,r,d,u,m,h,f){this.commentsService=e,this.element=t,this.zone=i,this.cdr=s,this.clipboard=c,this.renderer=a,this.overlayContainer=r,this.userProfileService=d,this.sharedTaskService=u,this.sharedDocService=m,this.injector=h,this.taskMentions=f,this.allowPreview=!0,this.lazyLoadEntities=!1,this.noMargin=!1,this.allowReply=!1,this.loadMentions=!1,this.textOnly=!1,this.onAttachmentPreview=new o.o,this.onCommentClick=new o.o,this.onCommentReply=new o.o,this.onCommentMentionClick=new o.o,this.onCommentDocClick=new o.o,this.destroy$=new n.a,this.trackByValue=l.f,this.taskPopupHandler=new p.a((e,t)=>this.sharedTaskService.clickTaskLink({id:e},t))}ngAfterViewInit(){this.taskPopupHandler.setDropdown(this.dropdown),this.sharedTaskService.onOpen.pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.taskPopupHandler.handleHoverPopup(null,!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.taskPopupHandler&&(this.taskPopupHandler.destroy(),this.taskPopupHandler=null)}ngOnChanges(e){(e.comment||e.searchQuery)&&(this.commentParts=this.commentsService.getCommentParts(this.comment),this.cdr.detectChanges(),"undefined"!=typeof hljs&&this.zone.runOutsideAngular(()=>{!function(e,t,i){const o=Array.from(t.querySelectorAll("pre"));for(const s of o){const t=s.innerText,o=s.dataset.language;if(o&&e.getLanguage(o)){if(!m(o))try{const i=e.highlight(o,t,!0);i.value=e.fixMarkup(i.value),s.innerHTML=i.value,s.classList.add(i.language||o)}catch(n){e.highlightBlock(s)}}else e.highlightBlock(s);s.classList.add("hljs"),i&&i(s)}}(hljs,this.element.nativeElement,e=>{const t=e.innerText,i=function(){const e=document.createElement("span");return e.classList.add("cu-copy-code"),e.innerHTML='<svg width="13" height="16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M9.3 14.05c0 .1-.04.2-.11.26a.4.4 0 0 1-.28.1H1.3a.4.4 0 0 1-.27-.1.34.34 0 0 1-.12-.26V3.98c0-.1.05-.19.12-.25a.4.4 0 0 1 .27-.1h7.62c.11 0 .21.03.28.1.07.06.11.15.11.25v10.07zM8.92 2.8H1.3c-.36 0-.69.13-.92.35-.23.21-.38.51-.38.84v10.08c0 .33.15.62.38.84.23.22.56.35.92.35h7.62c.36 0 .68-.13.91-.35.24-.22.38-.51.38-.84V3.98c0-.33-.14-.63-.38-.84a1.35 1.35 0 0 0-.91-.35z" class="cu-fill"/><path d="M11.7 0H4.08c-.36 0-.68.13-.91.35-.24.22-.38.51-.38.84 0 .12.05.22.13.3.08.08.2.12.32.12s.24-.04.32-.12a.4.4 0 0 0 .13-.3c0-.1.05-.18.12-.25a.4.4 0 0 1 .27-.1h7.62c.11 0 .2.04.28.1.07.07.11.16.11.25v10.08c0 .1-.04.19-.11.25a.4.4 0 0 1-.28.1.47.47 0 0 0-.32.13.4.4 0 0 0-.13.3c0 .11.05.22.13.3.08.07.2.11.32.11.36 0 .69-.13.92-.35.23-.21.38-.51.38-.84V1.19c0-.33-.15-.62-.38-.84A1.35 1.35 0 0 0 11.7 0" class="cu-fill"/><path d="M4.14.83h7.5c.13 0 .25.04.33.12a.4.4 0 0 1 .14.3v9.96a.4.4 0 0 1-.14.3.47.47 0 0 1-.32.13c-.1 0-.2.03-.27.1a.33.33 0 0 0 0 .49c.07.06.17.1.27.1.32 0 .62-.12.85-.33.22-.21.35-.49.35-.79V1.25c0-.3-.13-.58-.35-.79a1.25 1.25 0 0 0-.85-.32H4.14c-.32 0-.62.11-.85.32-.23.21-.35.5-.35.79 0 .1.03.18.1.24.07.07.17.1.27.1s.2-.03.26-.1c.07-.06.1-.15.1-.24a.4.4 0 0 1 .14-.3c.09-.08.2-.12.33-.12zm7.5 11.63a.54.54 0 0 1-.36-.14.46.46 0 0 1 0-.68c.1-.1.23-.14.37-.14.08 0 .16-.03.22-.08a.27.27 0 0 0 .09-.2V1.24a.27.27 0 0 0-.1-.2.32.32 0 0 0-.21-.09H4.14a.32.32 0 0 0-.22.09.27.27 0 0 0-.1.2c0 .13-.05.25-.14.34-.1.1-.23.14-.37.14a.54.54 0 0 1-.37-.14.46.46 0 0 1-.15-.34c0-.33.14-.65.4-.88.25-.24.59-.37.95-.37h7.5c.37 0 .7.13.96.37.26.23.4.55.4.88v9.96c0 .34-.14.65-.4.89-.25.23-.6.36-.95.36z" class="cu-fill"/></g></svg>',e}();Object(s.a)(i,"click").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.clipboard.copyFromContent(t)}),e.appendChild(i);const n=new c.a(new o.m(i),this.renderer,this.zone,this.overlayContainer);n.text=$localize`:@@common_copy-to-clipboard:Copy to clipboard`,n.ngAfterViewInit(),this.destroy$.pipe(Object(r.a)(1)).subscribe(()=>{n.ngOnDestroy()})})}),setTimeout(()=>{this.loadMentions&&this.taskMentions.updateMentions(),this.element&&this.taskPopupHandler&&(this.initUserMentions(this.element.nativeElement),this.taskPopupHandler.initElement(this.element.nativeElement),this.initDocMentions(this.element.nativeElement),this.initLinks(this.element.nativeElement))}))}linkClick(){}initUserMentions(e){const t=Array.from(e.querySelectorAll(".cu-mention[data-user]"));for(const i of t)Object(s.a)(i,"click").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{const t=e.target.dataset.user;t&&this.userProfileService.openProfileById(t)})}initDocMentions(e){const t=Array.from(e.querySelectorAll(".ql-doc-mention"));for(const i of t)Object(s.a)(i,"click").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{const t=h.a.value(e.target);this.sharedDocService.clickDocLink(this.injector,t.teamId,t.viewId,t.pageId,e)})}initLinks(e){const t=Array.from(e.querySelectorAll("a"));for(const i of t)Object(s.a)(i,"click").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{const t=Object(f.a)(e).find(e=>e.className&&"string"==typeof e.className&&e.className.split(" ").includes("ql-doc-mention"));t&&(e.preventDefault(),e.stopPropagation(),this.onCommentDocClick.emit({teamId:t.dataset.teamId,viewId:t.dataset.viewId,pageId:t.dataset.pageId,docsHome:"true"===t.dataset.docsHome,pageTitle:t.dataset.pageTitle}));const i=e.target.getAttribute("href");if(!i)return;const o=i.match(d.d);if(!o||o.length<3)return;const n=o[2];n&&o[1]===this.taskId&&(this.onCommentMentionClick.emit(n),e.preventDefault(),e.stopPropagation())})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(b.a),o.Wb(o.m),o.Wb(o.B),o.Wb(o.h),o.Wb(g.c),o.Wb(o.H),o.Wb(_.c),o.Wb(v.UserProfileService),o.Wb(k.a),o.Wb(y.a),o.Wb(o.t),o.Wb(w.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-comment"]],viewQuery:function(e,t){if(1&e&&o.jd(j,3),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},inputs:{comment:"comment",taskId:"taskId",searchQuery:"searchQuery",allowPreview:"allowPreview",lazyLoadEntities:"lazyLoadEntities",noMargin:"noMargin",allowReply:"allowReply",loadMentions:"loadMentions",textOnly:"textOnly",weights:"weights",assignees:"assignees",followers:"followers",userGroups:"userGroups"},outputs:{onAttachmentPreview:"onAttachmentPreview",onCommentClick:"onCommentClick",onCommentReply:"onCommentReply",onCommentMentionClick:"onCommentMentionClick",onCommentDocClick:"onCommentDocClick"},features:[o.Gb],decls:10,vars:22,consts:function(){let e;return e=$localize`:@@rich-editor_formatting--quote␟3ec88737802269bcef0c5cfcec11e9fe3a04e60d␟1103299628984958400:Quote`,[[1,"cu-comment-viewer-content__container"],["cuTextSelectionPopup","",1,"cu-comment-viewer-content",3,"innerHTML","textSelectionPopupTemplate","textSelectionPopupDisabled","textSelectionPopupClick","click","onAttachmentPreview"],["textSelectionPopupMenu",""],["cuDropdown","",3,"dropdownPreventDocumentScroll","dropdownHostElement","dropdownRightEdgePadding"],["dropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],e,[3,"taskId","allowRemove","weights","onEnter","onLeave"]]},template:function(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",0),o.cc(2,"div",1),o.qc("textSelectionPopupClick",function(e){return t.onCommentReply.next(e)})("click",function(e){return t.onCommentClick.emit(e)})("onAttachmentPreview",function(e){return t.onAttachmentPreview.emit(e)}),o.vc(3,"commentBodyHTML"),o.bc(),o.bc(),o.Zb(),o.bd(4,A,2,0,"ng-template",null,2,o.cd),o.cc(6,"div",3,4),o.Xb(8,"div",5),o.bd(9,$,2,3,"div",6),o.bc()),2&e){const e=o.Rc(5);o.Ib(2),o.Dc("innerHTML",o.Ac(3,6,o.Nc(14,U,t.comment,t.searchQuery,t.lazyLoadEntities,t.assignees,t.followers,t.userGroups,t.textOnly)),o.Vc)("textSelectionPopupTemplate",e)("textSelectionPopupDisabled",!t.allowReply),o.Ib(4),o.Dc("dropdownPreventDocumentScroll",!1)("dropdownHostElement",t.taskPopupHandler.hoveredElement)("dropdownRightEdgePadding",10)}},directives:[C,D.b,O.a,S.a,E.a],pipes:[P],encapsulation:2,changeDetection:0}),e})()},dKhF:function(e,t,i){e.exports=i.p+"dependency-warning.9025a9487505f7c4cedd.png"},drq7:function(e,t,i){"use strict";i.d(t,"a",function(){return C});var o=i("l7P3"),n=i("m2rH"),s=i("4F4K"),c=i("pLZG"),a=i("IzEk"),r=i("GXRk"),l=i("O5Dz"),d=i("BeL+"),u=i("Muja"),m=i("TqRa"),p=i("YYQ8"),h=i("YAnr"),f=i("wa4x"),b=i("MguC"),g=i("ouif"),_=i("0dWf"),v=i("fXoL"),k=i("AeD3"),y=i("jJW4"),w=i("NXyV"),x=i("UXun");let I=(()=>{class e{constructor(){this.emoji$=Object(w.a)(function(){return e=this,void 0,o=function*(){const{getEmojiStylesText:e}=yield Promise.resolve().then(i.bind(null,"EVib"));return e},new((t=void 0)||(t=Promise))(function(i,n){function s(e){try{a(o.next(e))}catch(t){n(t)}}function c(e){try{a(o.throw(e))}catch(t){n(t)}}function a(e){var o;e.done?i(e.value):(o=e.value,o instanceof t?o:new t(function(e){e(o)})).then(s,c)}a((o=o.apply(e,[])).next())});var e,t,o}).pipe(Object(x.a)({refCount:!1,bufferSize:1}))}replaceEmojiWithImages(){this.getEmoji().length>0&&this.emoji$.pipe(Object(a.a)(1)).subscribe(e=>{this.getEmoji().forEach(t=>{const i=JSON.parse(t.dataset.emoticon),o=e(i.code);t.setAttribute("data-updated","true"),t.setAttribute("style",o),t.innerHTML=""})})}getEmoji(){return Array.from(document.querySelectorAll(".cu-emoticon_static:not([data-updated])"))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=i("G2WA");let C=(()=>{class e{constructor(e,t,i,n,c){this.dataService=e,this.store=t,this.sharedData=i,this.emojiHelper=n,this.sharedTaskService=c,this.tasksCache$=this.store.pipe(Object(o.select)(s.g)),this.docsCache={},this.docsFailedCache={}}updateMentions(){this.updateTaskMentions(),this.updateDocMentions(),this.updateUserGroupMentions(),this.emojiHelper.replaceEmojiWithImages()}updateUserGroupMentions(){if(this.canLoad()){const e=document.querySelectorAll(".cu-mention__user-group.cu-mention_readonly:not([data-updated])");e.length>0&&this.store.select(f.c).pipe(Object(c.a)(e=>!!e),Object(a.a)(1)).subscribe(t=>{Array.from(e).forEach(e=>{const i=e.dataset.groupId,o=t.find(e=>e.id===i);o&&(e.setAttribute("data-updated","true"),o.members.some(e=>e.id===this.sharedData.currentUser.value.id)&&e.classList.add("cu-mention_me"))})})}}updateDocMentions(){const e=document.querySelectorAll(".ql-doc-mention:not([data-updated])"),t=Object(d.a)([].map.call(e,e=>e.dataset.pageId));if(0!==t.length)if(this.canLoad()){const e=t.map(e=>this.docsCache[e]).filter(e=>!!e),i=t.filter(e=>this.docsFailedCache[e]);(e.length>0||i.length>0)&&this.updateDocMentionsItems(e,i),this.dataService.getDocsByIds(t,!0).subscribe(e=>{const i=t.filter(t=>!e.some(e=>e.id===t));e.length>0&&(this.docsCache=e.reduce((e,t)=>(e[t.id]=t,e),this.docsCache)),i.length>0&&(this.docsFailedCache=i.reduce((e,t)=>(e[t]=!0,e),this.docsCache)),this.updateDocMentionsItems(e,i)})}else this.updateDocMentionsItems([],t)}updateTaskMentions(){if(!this.canLoad())return;const e=document.querySelectorAll("[data-task-mention]:not([data-updated])");let t=Object(d.a)([].map.call(e,e=>e.dataset.taskMention));const i=[],o=[];this.tasksCache$.pipe(Object(c.a)(e=>!!e),Object(a.a)(1)).subscribe(e=>{for(let n=0;n<t.length;n++)e[t[n]]&&(i.push(e[t[n]]),o.push(t[n]));0!==i.length&&this.updateTaskMentionsItems(i,null),t=t.filter(e=>!o.includes(e)).concat(o.filter(e=>!t.includes(e))),t.length>0&&this.dataService.getTasksByIds(t,!0,null,{exclude_deleted:!0}).subscribe(e=>{const i=t.filter(t=>!e.some(e=>e.id===t));e.length&&this.store.dispatch(new n.f(e)),this.updateTaskMentionsItems(e,i)})})}getTaskMentionObject(e){return{task_id:e.id,color:e.status.color,status:e.status.status,type:e.status.type,name:e.name,simple_statuses:e.simple_statuses,custom_type:e.custom_type,custom_id:e.custom_id,team_id:e.team}}updateTaskMentionsItems(e,t){e.forEach(e=>{const t=document.querySelectorAll(`[data-task-mention="${e.id}"]`),i=this.getTaskMentionObject(e);Array.from(t).forEach(t=>{const o=p.a.value(t);if(Object(u.a)(Object(h.c)(o),Object(h.c)(i)))return t.setAttribute("data-updated","true"),void t.setAttribute("data-can-open",String(String(e.team||e.team_id)===String(this.sharedData.compatCurrentTeam.id)));let n=Object(_.c)(e);t.dataset.taskComment&&(n+="?comment="+t.dataset.taskComment);const s=t.querySelector("a");s.setAttribute("href",n),s.setAttribute("target","_blank"),t.setAttribute("data-raw",JSON.stringify(Object.assign(Object.assign({},i),{comment_id:t.dataset.taskComment}))),t.setAttribute("data-can-open",String(String(e.team||e.team_id)===String(this.sharedData.compatCurrentTeam.id))),t.setAttribute("data-updated","true"),t.querySelector("[data-name]").innerHTML=Object(l.b)((e.custom_id?`[${e.custom_id}] `:"")+e.name),s&&(s.onclick=i=>{this.sharedTaskService.commentId=t.dataset.taskComment,this.sharedTaskService.clickTaskLink({id:e.id,customId:e.custom_id,teamId:e.team},i)}),i.simple_statuses&&!i.custom_type?(t.classList.add("task-mention_simple"),i.type===r.g.Closed?t.querySelector("[data-simple-status]").classList.add("task-mention__simple-status_closed"):t.querySelector("[data-simple-status]").classList.remove("task-mention__simple-status_closed")):t.querySelector("[data-status]").setAttribute("style",`background: ${i.color}!important; fill: ${i.color}!important;`)})}),t&&t.forEach(e=>{Array.from(document.querySelectorAll(`[data-task-mention="${e}"]`)).forEach(e=>{e.setAttribute("data-updated","true"),e.setAttribute("data-failed","true"),e.querySelector("[data-name]").innerHTML="Private task"})})}updateDocMentionsItems(e,t){e.forEach(e=>{Array.from(document.querySelectorAll(`[data-page-id="${e.id}"]`)).forEach(t=>{var i,o;if(String(null===(i=null==e?void 0:e.parent)||void 0===i?void 0:i.type)===String(b.e.DocsHome)||String(null===(o=null==e?void 0:e.parent)||void 0===o?void 0:o.type)===String(b.e.Task)){t.setAttribute("data-docs-home","true");const e=t.querySelector("[data-link]");if(e){const i=Object(g.b)(t),o=""+Object(l.b)(Object(g.a)(i));e.setAttribute("href",o)}}t.setAttribute("data-updated","true"),t.setAttribute("data-page-title",e.name||""),t.querySelector("[data-name]").innerHTML=Object(l.b)(e.name||"Untitled")})}),t&&t.forEach(e=>{Array.from(document.querySelectorAll(`[data-page-id="${e}"]`)).forEach(e=>{e.setAttribute("data-updated","true"),e.setAttribute("data-failed","true"),e.querySelector("[data-name]").innerHTML=$localize`:@@common_no-doc-access:You don't have access to this Doc`})})}canLoad(){return!m.k||this.sharedData.currentUser.value&&this.sharedData.currentUser.value.id!==m.a}}return e.\u0275fac=function(t){return new(t||e)(v.nc(k.a),v.nc(o.Store),v.nc(y.a),v.nc(I),v.nc(T.a))},e.\u0275prov=v.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},dw0r:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("XNiG"),n=i("xgIS"),s=i("Kj3r"),c=i("1G5W"),a=i("YYQ8"),r=i("TqRa");class l{constructor(e){this.openTaskHandle=e,this.destroy$=new o.a,this.handleHover$=new o.a,this.handleHover$.pipe(Object(s.a)(500),Object(c.a)(this.destroy$)).subscribe(({el:e,hovered:t})=>{this.handleHoverPopup(e,t)})}destroy(){this.destroy$.next(),this.destroy$.complete(),this.hoveredElement=null,this.dropdown=null,this.openTaskHandle=null}setDropdown(e){this.dropdown=e}initElement(e){if(r.k)return;const t=Array.from(e.querySelectorAll(".task-mention"));for(const i of t)Object(n.a)(i,"mouseenter").pipe(Object(c.a)(this.destroy$)).subscribe(e=>{this.handleHover$.next({el:e.target,hovered:!0})}),Object(n.a)(i,"mouseleave").pipe(Object(c.a)(this.destroy$)).subscribe(e=>{this.handleHover$.next({el:e.target,hovered:!1})}),Object(n.a)(i,"click").pipe(Object(c.a)(this.destroy$)).subscribe(e=>{if("true"!==i.dataset.canOpen)return;const t=a.a.value(i);this.openTaskHandle&&this.openTaskHandle(t.task_id,e)})}handleHoverPopup(e,t){if(t){this.hoveredElement&&this.hoveredElement!==e&&this.dropdown&&this.dropdown.close();const t=a.a.value(e);this.hoveredTaskId=t.task_id||e.dataset.taskId,this.hoveredElement=e,this.dropdown&&this.dropdown.open()}else this.dropdown&&this.dropdown.close()}}},dzSB:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("ofXK"),n=i("gb9A"),s=i("K0KF"),c=i("fTg4"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a]]}),e})()},"e+GA":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("ofXK"),n=i("fTg4"),s=i("K0KF"),c=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a]]}),e})();i("QzmI")},eD3g:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("FpDt"),n=i("C8uC"),s=i("ofXK"),c=i("K0KF"),a=i("csDc"),r=i("gb9A"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),u=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[s.c,c.a,a.a,n.LoaderModule,o.a,r.a,d]]}),e})()},"ec/5":function(e,t,i){"use strict";var o=i("IPAr"),n=i("kaWx");e.exports=c,c.notInList=!0,c.notInBlock=!0;var s=/^( {4}|\t)?/gm;function c(e,t,i){var c,a,r,l,d,u,m,p,h,f,b,g,_=this.offset;if(this.options.footnotes){for(c=0,a=t.length,r="",l=e.now(),d=l.line;c<a&&(h=t.charAt(c),o(h));)r+=h,c++;if("["===t.charAt(c)&&"^"===t.charAt(c+1)){for(c=(r+="[^").length,m="";c<a&&"]"!==(h=t.charAt(c));)"\\"===h&&(m+=h,c++,h=t.charAt(c)),m+=h,c++;if(m&&"]"===t.charAt(c)&&":"===t.charAt(c+1)){if(i)return!0;for(f=m,c=(r+=m+"]:").length;c<a&&("\t"===(h=t.charAt(c))||" "===h);)r+=h,c++;for(l.column+=r.length,l.offset+=r.length,m="",u="",p="";c<a;){if("\n"===(h=t.charAt(c))){for(p=h,c++;c<a&&"\n"===(h=t.charAt(c));)p+=h,c++;for(m+=p,p="";c<a&&" "===(h=t.charAt(c));)p+=h,c++;if(0===p.length)break;m+=p}m&&(u+=m,m=""),u+=h,c++}return r+=u,u=u.replace(s,function(e){return _[d]=(_[d]||0)+e.length,d++,""}),b=e(r),g=this.enterBlock(),u=this.tokenizeBlock(u,l),g(),b({type:"footnoteDefinition",identifier:n(f),label:f,children:u})}}}}},ejAw:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("uslN"),n=i("c3rA"),s=i("o7Ov"),c=i("l7P3"),a=i("2p4s"),r=i("fXoL"),l=i("8it8");let d=(()=>{class e{constructor(e,t){this.store=e,this.commonStringsService=t,this.apps=[{title:this.commonStringsService.priorityText,description:"Set priority levels and organize tasks based on importance.",learnMore:"https://docs.clickup.com/features/priorities",image:i("h1yv"),featureName:"priorities",tags:[],space:[],spaceSetupDescription:"Set importance for tasks",showInModal:!0},{title:$localize`:@@common_sprints:Sprints`,description:"Create sprints as lists to track progress of your production cycle.",learnMore:"https://docs.clickup.com/en/articles/4347767-sprints-clickapp",image:i("TGO3"),featureName:"sprints",tags:[],space:[],spaceSetupDescription:"Create sprints as lists to track progress of your production cycle.",warning:'For best experience with Sprints, <a href=\'\' target="_blank">enable "Tasks in Multiple Lists"',warningModifier:"alt",showInModal:!0,disabledTooltip:"If disabled, you won't be able to create new sprints or rely on Sprint automations. You will still be able to access sprints you previously created."},{title:"Email",description:"Send and receive email without leaving ClickUp. Communicate with people outside of your Workspace from any email address you have already. ",learnMore:"https://docs.clickup.com/en/articles/2384248-email-clickup",image:i("/2u5"),featureName:"emails",tags:[],space:[],spaceSetupDescription:"Send and receive email without leaving ClickUp. Communicate with people outside of your Workspace from any email address you have already. ",showInModal:!0,badge:"BETA"},{title:"Tags",description:"Add custom tag labels to tasks to organize and classify tasks.",learnMore:"https://docs.clickup.com/features/tags",image:i("OxjL"),featureName:"tags",tags:[],space:[],spaceSetupDescription:"Add custom tag labels",showInModal:!0},{title:this.commonStringsService.customFieldsText,description:"Add custom fields to your tasks to literally use ClickUp for anything: dates, phone numbers, emails, drop-downs, checkboxes, links, currencies, and numbers.",learnMore:"https://docs.clickup.com/features/custom-fields",image:i("5sDR"),featureName:"custom_fields",tags:[],space:[],spaceSetupDescription:"Add custom drop-downs, checkboxes, and more to your tasks",showInModal:!0},{title:"Multiple Assignees",description:"Tasks can have more than one assignee.",learnMore:"https://docs.clickup.com/spaces/multiple-assignees-vs-single-assignees",image:i("jhAH"),featureName:"multiple_assignees",tags:[],space:[],showInModal:!0},{title:$localize`:@@common_time-tracking:Time Tracking`,description:"Track time using our global timer or log time manually. Integrates with our Dashboard feature for detailed reporting.",learnMore:"https://docs.clickup.com/features/time-tracking",image:i("KsAU"),featureName:"time_tracking",tags:[],space:[],spaceSetupDescription:"Enable our native time tracker or third party integrations on select Spaces.",showInModal:!0},{title:"Time Tracking Rollup",description:"Calculate the total time tracked based on the subtasks of a task.",learnMore:"https://docs.clickup.com/en/articles/3423968-time-tracking-rollup",image:i("ypaX"),featureName:"time_tracking_rollup",tags:[],space:[],spaceSetupDescription:"Show Tracked time in ClickUp including subtasks",teamField:"time_tracking_rollup"},{title:$localize`:@@common_time-estimate--plural:Time Estimates`,description:"Add time estimates to any task.",learnMore:"https://docs.clickup.com/features/time-estimates",image:i("OCW5"),featureName:"time_estimates",tags:[],space:[],spaceSetupDescription:"Estimate time in ClickUp",showInModal:!0,optionToggleConfirmation:{turningOn:"Turning this on will immediately split all existing time estimates between assignees (if more than 1). Turning it off again will merge them back together.",turningOff:"Warning: Turning this off will combine individual time estimates on tasks to a total. This can not be undone, turning granular estimate back on will split time evenly. You should check with your teammates before disabling this feature."}},{title:"Sprint Points",description:"Add point estimates to any task.",learnMore:"https://docs.clickup.com/en/articles/4264202-sprint-points-clickapp",image:i("TGO3"),featureName:"points",tags:[],space:[],spaceSetupDescription:"Estimate points in ClickUp"},{title:"Time Estimates Rollup",description:"Calculate the total time estimate based on the subtasks of a task.",learnMore:"https://docs.clickup.com/en/articles/3423969-time-estimates-rollup",image:i("evdL"),featureName:"time_estimates_rollup",tags:[],space:[],spaceSetupDescription:"Show Time Estimates including subtasks",teamField:"time_estimate_rollup"},{title:"Incomplete Warning",description:"Prevent closing tasks with unresolved subtasks, comments, and checklists",learnMore:"https://docs.clickup.com/features/incomplete-warning",image:i("lwJj"),featureName:"check_unresolved",tags:[],space:[]},{title:"Dependency Warning",description:"Warn me before closing tasks that are waiting on task(s).",learnMore:"https://docs.clickup.com/features/dependency-warning-clickapp",image:i("dKhF"),featureName:"dependency_warning",tags:[],space:[],spaceSetupDescription:"Warn me before closing tasks that are waiting on task(s)"},{title:"Remap Subtask Due Dates",description:"With this enabled, we can automatically reschedule subtasks by the amount when you change the parent task's Due Date.",learnMore:"https://docs.clickup.com/en/articles/2129078-automatically-remap-subtask-due-dates",image:i("0884"),featureName:"remap_due_dates",tags:[],space:[],showInModal:!0,spaceSetupDescription:"Automatically reschedule subtasks by the amount when you change the parent task's Due Date."},{title:$localize`:@@common_reschedule-deps-1:Reschedule Dependencies`,description:"If a \"blocking\" task's due date is adjusted to be later, ClickBot will automatically move the start & due date of the connected 'waiting on' tasks by the same amount of time.",learnMore:"https://docs.clickup.com/features/reschedule-dependencies",image:i("V2dv"),featureName:"remap_dependencies",tags:[],space:[]},{title:"Collaborative Editing",description:"This feature allows you to edit task descriptions and docs with multiple people just like Google Docs.",learnMore:"https://docs.clickup.com/en/articles/1427936-real-time-task-syncing",image:i("+hOa"),featureName:"codox",tags:[],space:[],spaceSetupDescription:"",teamField:"enable_codox"},{title:"Dashboards",description:"Create and organize anything in ClickUp visually using charts, numbers, and so much more.",learnMore:"https://docs.clickup.com/en/articles/3578082-dashboards",image:i("r1+6"),featureName:"dashboards",tags:[],space:[],spaceSetupDescription:"",teamField:"dashboards_enabled"},{title:"Docs Home",description:"A central location for all your docs across your entire Workspace.",image:i("Vsk3"),featureName:"docs_home",tags:[],space:[],spaceSetupDescription:"",teamField:"docs_home"},{title:"Clip: Screen Recording",subtitle:"Replaces&nbsp;<img src='./assets/images/components/comments/comments-frame/loom.svg' alt='' height='19' class='clickapps-card__subtitle-item_light-theme'><img src='./assets/images/components/comments/comments-frame/loom_dark-theme.svg' alt='' height='19' class='clickapps-card__subtitle-item_dark-theme'>",description:"Create one-click videos of your screen and audio then share to ClickUp tasks or use a public URL to give anyone access.",learnMore:"http://docs.clickup.com/en/articles/3726950-capture-video-recording-in-clickup",image:i("V/md"),featureName:"recorder",tags:[],space:[],spaceSetupDescription:"",teamField:"enable_recorder",warning:"Important: Only works in Chrome and Firefox",badge:"BETA"},{title:"Automation",description:"Choose from a library of automations or create your own to automate manual and repetitive tasks.",learnMore:"https://docs.clickup.com/en/articles/3904901-automations",image:i("KXpV"),featureName:"automation",tags:[],space:[],spaceSetupDescription:"",teamField:"automation_enabled"},{title:"Zoom",description:"Start a meeting from within ClickUp using the Zoom meeting button or the /zoom slash command.",image:i("rjyu"),featureName:"zoom",tags:[],space:[],spaceSetupDescription:"Set importance for tasks",teamField:"zoom"},{title:"Giphy",description:"Make ClickUp more fun by using funny gifs in your comments, Docs, and descriptons.",image:i("E/jo"),featureName:"giphy",tags:[],space:[],teamField:"giphy"},{title:"Pulse",description:"A real-time view into who's online (and offline), what people are working on, and what they did today.",image:i("6Hro"),featureName:"live_view",tags:[],space:[],spaceSetupDescription:"",teamField:"live_view",teamFieldEnableValue:1,teamFieldDisableValue:0},{title:"Threaded Comments",description:"Start a conversation by replying directly on task comments.",image:i("+6i6"),featureName:"threaded_comments",tags:[],space:[],spaceSetupDescription:"",teamField:"threaded_comments",hidden:!a.a.threadedComments},{title:$localize`:@@common_milestones:Milestones`,description:"Mark important tasks or high-level initiatives as Milestones to make them standout.",image:i("cibJ"),featureName:"milestones",tags:[],space:[]},{title:"Who's Online?",description:"Just like Slack, see who's online shown by a green dot on their profile picture.",image:i("W1qW"),featureName:"user_presence",tags:[],space:[],spaceSetupDescription:"",teamField:"user_presence"},{title:"LineUp",description:'LineUp answers the question "What should I do next?"! Add LineUp to give each person an order of tasks to do next.',image:i("jJXF"),featureName:"lineup",tags:[],space:[],teamField:"lineup",tradeMark:!0},{title:"Default Personal Views",description:"Default all new views to personal views.",image:i("9OJN"),featureName:"personal_views",tags:[],space:[],teamField:"personal_views",paywallPlanIds:[o.f.ENTERPRISE],paywall:{text:"Defaulting to personal views is limited to Enterprise Plans",minPlan:"Enterprise",emailSubject:"Please upgrade ClickUp so we can use defaulting personal views"}},{title:"Not Started Status Group",description:"Adds another grouping option for statuses that would not be considered an active status.",image:i("9AeR"),featureName:"unstarted_status_group",tags:[],space:[],spaceSetupDescription:"",teamField:"unstarted_status_group",confirmationTitle:"Warning",confirmation:'All "not started" states will move to "Active" statuses. This action cannot be undone.'},{title:"Multi-List Tasks",description:"Allow tasks to be added to multiple Lists. This is useful for Sprints, Priority Planning, and general organization.",image:i("Wr+I"),featureName:"tasks_in_multiple_lists",tags:[],space:[],spaceSetupDescription:"",teamField:"tasks_in_multiple_lists",confirmationTitle:"Warning",confirmation:"WARNING: Turning this off will immediately remove multiple Lists from tasks. This action cannot be undone - you should check with your teammates before disabling this feature.",confirmButtonText:"Remove Multiple Lists"},{title:"Custom Task IDs",description:"Customize your task IDs to more easily reference them in ClickUp, in conversation, or via integrations.",image:i("1G3X"),featureName:"custom_task_ids",tags:[],space:[],paywallPlanIds:[o.f.BUSINESS,o.f.ENTERPRISE],paywall:{text:"Upgrade to Business to use Custom Task IDs",minPlan:"Business",emailSubject:"Please upgrade ClickUp so we can use Custom Task IDs"},alwaysHideInModal:!0},{title:"Work in Progress Limits",description:"Set soft limits in Board view and get visual indicators when you are at or above the Work in Progress limit.",learnMore:"https://docs.clickup.com/en/articles/4388088-work-in-progress-limits-clickapp",image:i("27PA"),showInModal:!0,featureName:"wip_limits",paywallPlanIds:[o.f.BUSINESS,o.f.ENTERPRISE],paywall:{text:"Upgrade to Business to use Work in Progress Limits",emailSubject:"Can you please upgrade our ClickUp Workspace so we can use the Work in Progress (WIP) feature",minPlan:"Business"},tags:["Work in Progress"],space:[],spaceSetupDescription:""},{title:"Nested Subtasks",description:"Add up to 7 levels of hierarchy to your subtasks.",image:i("pqNe"),featureName:"nested_subtasks",tags:[],space:[],spaceSetupDescription:"",teamField:"nested_subtasks",teamFieldEnableValue:1,teamFieldDisableValue:0,confirmationTitle:"Warning",confirmation:"This will turn the Nested Subtasks ClickApp off. Existing nested subtasks will be visible, but you will not be able to create more nested subtasks.",badge:"BETA"},{title:"Quick-Create Statuses",description:"Add the ability to quick create statuses by clicking in between List view status groups.",learnMore:"https://docs.clickup.com/en/articles/831184-statuses",image:i("sVlj"),featureName:"quick_create_statuses",tags:[],space:[],spaceSetupDescription:"",teamField:"quick_create_statuses",teamFieldEnableValue:1,teamFieldDisableValue:0},{title:$localize`:@@common_time-in-status:Time in Status`,description:"Show how much time is spent in each status for tasks across your Workspace.",learnMore:"https://docs.clickup.com/en/articles/4597478-time-in-status",image:i("DH0s"),featureName:"time_in_status",tags:[],space:[],spaceSetupDescription:"",teamField:"time_in_status",paywallPlanIds:[o.f.BUSINESS,o.f.ENTERPRISE],paywall:{text:"Upgrade to Business to use Time in Status",minPlan:"Business",emailSubject:"Please upgrade ClickUp so we can use Time in Status"}},{title:"Preview Word, Excel, and Powerpoint files in ClickUp",description:"View Microsoft files without leaving ClickUp! Enable this ClickApp to use Microsoft\u2019s Online Doc Viewer servers to preview files",image:i("P+Em"),featureName:"microsoft_365_preview",tags:[],space:[],teamField:"microsoft_365_preview"},{title:"Comment Reactions",description:"React to comments using any emoji.",learnMore:"https://docs.clickup.com/en/articles/954972-liking-comments",image:i("k6Oo"),featureName:"extra_comment_reactions",tags:[],space:[],spaceSetupDescription:"",teamField:"extra_comment_reactions",teamFieldEnableValue:1,teamFieldDisableValue:0},{title:"Relationships",description:"Adds a new power set of features for relating tasks, docs, and anything in ClickUp.",image:i("Nx3x"),featureName:"task_relationships",tags:[],space:[],teamField:"task_relationships",badge:"BETA",learnMore:"https://docs.clickup.com/en/articles/4714522-relationships-beta"}].filter(e=>!e.hidden),this.FEATURESLIST=[],this.projectFeatures$=this.store.pipe(Object(c.select)(n.getProjectFeatures)),this.FEATURESLIST=this.apps.filter(e=>"multiple_assignees"!==e.featureName).map(e=>e.featureName)}get projectFeatures(){return this.projectFeatures$}set projectFeatures(e){this.store.dispatch(new s.bj(e))}addProjectFeatures(e){const t={};return Object.keys(e).forEach(i=>{t[i]={},Object.keys(e[i]).forEach(o=>{t[i][o]=e[i][o]})}),t}initFeatures(e){for(const t of this.FEATURESLIST)e=this.initFeature(t,e);return e}initFeature(e,t){return t[e]||(t[e]=Object.assign({},{enabled:!1})),t}toggleFeature(e,t){return"remap_due_dates"===t?(e.due_dates=void 0===e.due_dates.remap_due_dates?{enabled:!0,remap_due_dates:!1}:{enabled:!0,remap_due_dates:!e.due_dates.remap_due_dates},e):((e=this.initFeature(t,e))[t].enabled=!e[t].enabled,e)}}return e.\u0275fac=function(t){return new(t||e)(r.nc(c.Store),r.nc(l.a))},e.\u0275prov=r.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},evdL:function(e,t,i){e.exports=i.p+"time-estimates-rollup.7334231d6c6e29a8521a.png"},fFSm:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("IlGD"),n=i("fXoL");let s=(()=>{class e{constructor(e){this.injector=e}transform(e,t,i,n){return s=this,void 0,a=function*(){if(!t)return"&ndash;";const{formatValue:s,isAutomaticValue:c}=o.e[t.type];return null!=e&&""!==e||c?s(e,t,this.injector,i,n):"&ndash;"},new((c=void 0)||(c=Promise))(function(e,t){function i(e){try{n(a.next(e))}catch(i){t(i)}}function o(e){try{n(a.throw(e))}catch(i){t(i)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof c?n:new c(function(e){e(n)})).then(i,o)}n((a=a.apply(s,[])).next())});var s,c,a}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(n.t))},e.\u0275pipe=n.Vb({name:"customFieldValue",type:e,pure:!0}),e})()},fUUT:function(e,t,i){"use strict";var o=i("5t69"),n=i("U6jy"),s=i("fduw");function c(e){var t=this.data("settings"),i=o(s);i.prototype.options=n(i.prototype.options,t,e),this.Parser=i}e.exports=c,c.Parser=s},fVUq:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("EVib"),n=i("fXoL");let s=(()=>{class e{transform(e,t=!0,i,n){let s=e;void 0!==e&&"thumbs_up"!==e||(s="1F44D");const c=Object(o.getEmojiStylesMemo)(s.toLowerCase()),{width:a,height:r}=c,l=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(c,["width","height"]),d=Object.assign({},l);return t||(void 0!==a&&(d.width=a,void 0!==i&&(d.width=i+"px")),void 0!==r&&(d.height=r,void 0!==n&&(d.height=n+"px"))),d}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"emojiUnifiedToStyles",type:e,pure:!0}),e})()},fduw:function(e,t,i){"use strict";var o=i("U6jy"),n=i("4MqD"),s=i("7nPM"),c=i("EQPF"),a=i("Olrm"),r=i("A6mZ");function l(e,t){this.file=t,this.offset={},this.options=o(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=s(t).toOffset,this.unescape=c(this,"escape"),this.decode=a(this)}e.exports=l;var d=l.prototype;function u(e){var t,i=[];for(t in e)i.push(t);return i}d.setOptions=i("nLKB"),d.parse=i("zK1H"),d.options=i("0lR2"),d.exitStart=n("atStart",!0),d.enterList=n("inList",!1),d.enterLink=n("inLink",!1),d.enterBlock=n("inBlock",!1),d.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],d.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],d.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],d.blockTokenizers={newline:i("Eidx"),indentedCode:i("K2KW"),fencedCode:i("Gqj6"),blockquote:i("PIlL"),atxHeading:i("MHMH"),thematicBreak:i("pyet"),list:i("tGWH"),setextHeading:i("NS2H"),html:i("ZJXm"),footnote:i("ec/5"),definition:i("HRR4"),table:i("ujgL"),paragraph:i("RSXs")},d.inlineTokenizers={escape:i("tgay"),autoLink:i("2yk8"),url:i("UBI6"),html:i("VRSw"),link:i("jWrk"),reference:i("wCsn"),strong:i("KX5q"),emphasis:i("bY2E"),deletion:i("UIh7"),code:i("JlFY"),break:i("497W"),text:i("SbiQ")},d.blockMethods=u(d.blockTokenizers),d.inlineMethods=u(d.inlineTokenizers),d.tokenizeBlock=r("block"),d.tokenizeInline=r("inline"),d.tokenizeFactory=r},fetL:function(e,t,i){"use strict";i.d(t,"a",function(){return $});var o=i("aQOx"),n=i("ofXK"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[n.c]]}),e})();var a=i("bx+h"),r=i("rh6m"),l=i("tyNb");let d=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[n.c,l.l]]}),e})();var u=i("y71m"),m=i("3Pt+"),p=i("K0KF"),h=i("KyjD"),f=i("hIMv");let b=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[n.c,m.l,m.x,p.a,h.a,f.a]]}),e})();var g=i("gb9A"),_=i("8Sgp"),v=i("dsEp"),k=i("HiD6");let y=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[n.c,m.l,m.x]]}),e})();var w=i("V6/z"),x=i("1M0N"),I=i("C8uC"),T=i("tGh3"),C=i("csDc"),D=i("J1KY"),O=i("EDFS"),S=i("VBI8"),E=i("HCaB"),P=i("bFKe"),j=i("mcWp"),A=i("/SUI");let $=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[n.c,S.a,m.l,p.a,O.d,D.a,h.a,S.a,C.a,T.a,I.LoaderModule,x.a,w.a,y,b,k.a,v.a,_.a,g.a,l.l,u.a,d,r.a,a.a,O.d,E.a,c,o.a,P.b,j.a,A.a]]}),e})()},fjrl:function(e,t,i){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},gBUK:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("Zss7"),n=i("fXoL");let s=(()=>{class e{isLightColor(e,t=215){return o(e).getBrightness()>t}isDarkColor(e,t=60){return o(e).getBrightness()<t}darkenColor(e,t=55){return o(e).darken(t).toString()}lightenColor(e,t=55){return o(e).lighten(t).toString()}randomColor(){return o.random().toHexString()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},gJHR:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("fXoL"),n=i("XNiG"),s=i("xJzU"),c=i("zY2b"),a=i("bNw/");const r=function(){return[]};let l=(()=>{class e{constructor(){this.destroy$=new n.a,this.disabled=!1,this.taskId="",this.showFilter=!1,this.canManageTag=!0,this.projectAccess=!0,this.alwaysShowIcon=!0,this.alwaysShowNoHover=!1,this.canDelete=!0,this.forTemplates=!1,this.onOpen=new o.o,this.onClose=new o.o,this.onLoad=new o.o,this.onChange=new o.o,this.onClickTag=new o.o}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}addTag(e){this.onChange.emit({action:s.a.AddTag,data:e})}removeTag(e){this.onChange.emit({action:s.a.RemoveTag,data:e})}deleteTag(e){this.onChange.emit({action:s.a.DeleteTag,data:e})}renameTag(e){this.onChange.emit({action:s.a.RenameTag,data:e})}colorChange(e){this.onChange.emit({action:s.a.ChangeColorTag,data:e})}open(){this.taskList.open()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-task-row-tags"]],viewQuery:function(e,t){if(1&e&&o.jd(c.a,3),2&e){let e;o.Qc(e=o.rc())&&(t.taskList=e.first)}},hostAttrs:[1,"cu-task-row-tags"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-tags-badge-view-only",!t.canRemoveTag)},inputs:{disabled:"disabled",tags:"tags",tagsLoadingMap:"tagsLoadingMap",value:"value",projectId:"projectId",manageTags:"manageTags",readOnly:"readOnly",taskId:"taskId",showFilter:"showFilter",canAddTag:"canAddTag",canRemoveTag:"canRemoveTag",canManageTag:"canManageTag",projectAccess:"projectAccess",alwaysShowIcon:"alwaysShowIcon",alwaysShowNoHover:"alwaysShowNoHover",userId:"userId",onlyDeleteIfOwner:"onlyDeleteIfOwner",canDelete:"canDelete",forTemplates:"forTemplates"},outputs:{onOpen:"onOpen",onClose:"onClose",onLoad:"onLoad",onChange:"onChange",onClickTag:"onClickTag"},decls:2,vars:33,consts:[[3,"taskTags","tags","tagsLoadingMap","spaceId","spaceAccess","readonly","dropdown-disabled","taskId","canDelete","canManageTag","onlyDeleteIfOwner","userId","forTemplates","onChange","onDelete","onDeleteFromSpace","onRename","onColorChange","onOpen","onPage","onClose"],["modifier","list-view",3,"tags","availableTags","truncate","alwaysShowIcon","alwaysShowNoHover","readOnly","canAddTag","canRemoveTag","canManageTag","spaceId","spaceAccess","showFilter","canDelete","onlyDeleteIfOwner","userId","taskId","allowToggleExpandAll","forTemplates","onFilterTag","onClickTag","onDelete","onRename","onLoad","onDeleteFromSpace","onColorChange"]],template:function(e,t){1&e&&(o.cc(0,"cu-tags-list",0),o.qc("onChange",function(e){return t.addTag(e)})("onDelete",function(e){return t.removeTag(e)})("onDeleteFromSpace",function(e){return t.deleteTag(e)})("onRename",function(e){return t.renameTag(e)})("onColorChange",function(e){return t.colorChange(e)})("onOpen",function(e){return t.onOpen.emit(e),t.onLoad.emit()})("onPage",function(e){return t.onLoad.emit(e)})("onClose",function(e){return t.onClose.emit(e)}),o.cc(1,"cu-tags-view",1),o.qc("onFilterTag",function(e){return t.onClickTag.emit(e)})("onClickTag",function(e){return t.onClickTag.emit(e)})("onDelete",function(e){return t.removeTag(e)})("onRename",function(e){return t.renameTag(e)})("onLoad",function(){return t.onLoad.emit()})("onDeleteFromSpace",function(e){return t.deleteTag(e)})("onColorChange",function(e){return t.colorChange(e)}),o.bc(),o.bc()),2&e&&(o.Dc("taskTags",t.value)("tags",t.tags||o.Gc(31,r))("tagsLoadingMap",t.tagsLoadingMap)("spaceId",t.projectId)("spaceAccess",t.projectAccess)("readonly",!t.manageTags||t.disabled)("dropdown-disabled",t.disabled)("taskId",t.taskId)("canDelete",t.canDelete)("canManageTag",t.canManageTag)("onlyDeleteIfOwner",t.onlyDeleteIfOwner)("userId",t.userId)("forTemplates",t.forTemplates),o.Ib(1),o.Dc("tags",t.value)("availableTags",t.tags||o.Gc(32,r))("truncate",!0)("alwaysShowIcon",t.alwaysShowIcon)("alwaysShowNoHover",t.alwaysShowNoHover)("readOnly",t.readOnly)("canAddTag",t.canAddTag)("canRemoveTag",t.canRemoveTag)("canManageTag",t.canManageTag)("spaceId",t.projectId)("spaceAccess",t.projectAccess)("showFilter",t.showFilter)("canDelete",t.canDelete)("onlyDeleteIfOwner",t.onlyDeleteIfOwner)("userId",t.userId)("taskId",t.taskId)("allowToggleExpandAll",t.disabled)("forTemplates",t.forTemplates))},directives:[c.a,a.a],styles:[".cu-task-row-tags{display:inline-flex;position:relative}.cu-task-row-tags_disabled{pointer-events:none}"],encapsulation:2,changeDetection:0}),e})()},"gL+T":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{constructor(e){this.el=e}onInputChange(e){const t=this.el.nativeElement.value;t&&(this.el.nativeElement.value=t.replace(/[^0-9]*/g,""),t!==this.el.nativeElement.value&&e.stopPropagation())}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.m))},e.\u0275dir=o.Rb({type:e,selectors:[["input","cuNumbersOnly",""]],hostBindings:function(e,t){1&e&&o.qc("input",function(e){return t.onInputChange(e)})}}),e})()},gSwD:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("oKxQ"),n=i("fXoL"),s=i("jhN1");let c=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t,i,n=!1,s=!1){if(!e)return"";if("string"==typeof e)try{e=JSON.parse(e||"{}")}catch(a){e={}}if(e.ops&&1===e.ops.length&&"\n"===e.ops[0].insert&&t)return t;const c=Object(o.b)(e,i?i.id:null,!!i&&i.markdown_shortcuts,null,!1,!0,n,!1,s);return this.sanitizer.bypassSecurityTrustHtml(c)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.b))},e.\u0275pipe=n.Vb({name:"deltaHtml",type:e,pure:!0}),e})()},gcYM:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("7o/Q"),n=i("D0XW");i("zx2A");const s={leading:!0,trailing:!1};function c(e,t=n.a,i=s){return o=>o.lift(new a(e,t,i.leading,i.trailing))}class a{constructor(e,t,i,o){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=o}call(e,t){return t.subscribe(new r(e,this.duration,this.scheduler,this.leading,this.trailing))}}class r extends o.a{constructor(e,t,i,o,n){super(e),this.duration=t,this.scheduler=i,this.leading=o,this.trailing=n,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function l(e){const{subscriber:t}=e;t.clearThrottle()}},h1yv:function(e,t,i){e.exports=i.p+"priority.b834f31577e589b7f7d2.png"},h3dx:function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"d",function(){return u}),i.d(t,"e",function(){return p});var o=i("GXRk"),n=i("f0Wu"),s=i("VbRK"),c=i("VI01");const a=[$localize`:@@common_weekday--monday:Monday`,$localize`:@@common_weekday--tuesday:Tuesday`,$localize`:@@common_weekday--wednesday:Wednesday`,$localize`:@@common_weekday--thursday:Thursday`,$localize`:@@common_weekday--friday:Friday`,$localize`:@@common_weekday--saturday:Saturday`,$localize`:@@common_weekday--sunday:Sunday`];function r(e,t,i){const a=u(e);if(a){let o;try{o=s.a.fromString(a)}catch(l){o=new s.a}const r=o.options,d=o.origOptions;let u,m=null;if(r.bymonthday&&r.bymonthday.length?m=r.bymonthday[0]:r.bynmonthday&&r.bynmonthday.length&&(m=r.bynmonthday[0]),e.due_date&&e.due_date.rrule){let t;try{t=s.a.fromString(e.due_date.rrule)}catch(l){t=new s.a}const i=t.options.byhour,o=t.options.byminute;if(i||o){const e=new Date;e.setUTCHours(i),e.setUTCMinutes(o),u=n(e)}}let p=e.time?n(d.dtstart):null;if(2===e.recur_on&&"byhour"in d){const e=d.byhour,t=d.byminute;if(e||t){const i=new Date;i.setUTCHours(e),i.setUTCMinutes(t),p=n(i)}}const h=d.byweekday&&d.byweekday.length?r.byweekday.map(e=>1===i?e:6===e?0:e+1):[],f=r.freq,b=Array.isArray(r.bysetpos)&&r.bysetpos.length>0?r.bysetpos[0]:r.bysetpos;return{empty:!e.recurring,type:1===e.recur_on?"SCHEDULE":"TRIGGER",action:1===e.type?"UPDATE":"NEW",freq:f,interval:r.interval,byDays:h,byMonth:r.bymonth>0?r.bymonth-1:null,byMonthDay:m,bySetPos:-1===b?4:b-1,monthlyType:f===s.a.MONTHLY&&m?0:1,end:r.count?1:r.until?2:0,endCount:r.count,endDate:r.until?n(r.until):r.until,status:e.new_status&&t?t.find(t=>t.status===e.new_status):null,statusOn:e.recur_on_status&&t?t.find(t=>t.status===e.recur_on_status):null,time:p,timeDue:u,start:r.dtstart,dueType:e.due_date?"weeks"===e.due_date.type?c.c.Weeks:"days"===e.due_date.type?c.c.Days:"hours"===e.due_date.type?c.c.Hours:"recur"===e.due_date.type?c.c.Recur:"recur_next"===e.due_date.type?c.c.RecurNext:c.c.None:null,dueValue:e.due_date?e.due_date.count?e.due_date.count:1:null,copy:e.copy_opts,task:e.copy_task,projectId:e.copy_task_project_id,copyType:e.copy_original?0:1,skipMissed:e.skip_missed,recurImmediately:e.recur_immediately,recurDaily:e.recur_daily,recurNext:e.recur_next,setDueDate:!1!==e.set_due_date}}const r=t?t.find(e=>e.type===o.g.Open):null;return Object.assign(Object.assign({},c.b),{status:r})}function l(e,t){const i="UPDATE"===e.action&&"TRIGGER"===e.type;let o=null;if(e.timeDue&&(e.dueType===c.c.Days||e.dueType===c.c.Weeks)){const t=e.timeDue.clone();o={byhour:t.utc().hours(),byminute:t.utc().minutes()}}return{type:"UPDATE"===e.action?1:2,new_status:e.status?e.status.status:null,due_date:i?{rrule:t}:{count:e.dueValue,type:e.dueType===c.c.Recur?"recur":e.dueType===c.c.RecurNext?"recur_next":e.dueType===c.c.Hours?"hours":e.dueType===c.c.Days?"days":e.dueType===c.c.Weeks?"weeks":null,rrule:o?new s.a(o).toString():null},recurring:!0,rule:i?null:t,copy_opts:m(e.copy),copy_task:e.task,copy_task_project_id:e.projectId,skip_missed:e.skipMissed,copy_original:0===e.copyType,time:!!e.time,recur_on:"TRIGGER"===e.type?2:1,recur_on_status:e.statusOn?e.statusOn.status:null,recur_immediately:e.recurImmediately,recur_daily:e.recurDaily,recur_next:e.recurNext,set_due_date:e.dueType===c.c.RecurNext&&"SCHEDULE"===e.type&&"UPDATE"===e.action?e.setDueDate:void 0}}function d(e,t,i){const o=e.freq,n={freq:o,interval:e.interval};if(e.endCount>0?n.count=e.endCount:e.endDate&&(n.until=new Date(e.endDate.valueOf())),e.start&&!isNaN(e.start.valueOf())&&(n.dtstart=new Date(e.start.valueOf())),e.time&&!isNaN(e.time.valueOf()))if(t){const t=e.time.clone();n.byhour=t.utc().hours(),n.byminute=t.utc().minutes()}else n.dtstart?(n.dtstart.setHours(new Date(e.time.valueOf()).getHours()),n.dtstart.setMinutes(new Date(e.time.valueOf()).getMinutes())):n.dtstart=new Date(e.time.valueOf());const c=e.byDays&&e.byDays.length?e.byDays.map(e=>1===i?e:0===e?6:e-1):[];switch(o){case s.a.DAILY:e.recurDaily&&Object.assign(n,{byweekday:c});break;case s.a.WEEKLY:Object.assign(n,{byweekday:c});break;case s.a.MONTHLY:Object.assign(n,0===e.monthlyType?{bymonthday:e.byMonthDay}:{bysetpos:4===e.bySetPos?-1:e.bySetPos+1,byweekday:c});break;case s.a.YEARLY:Object.assign(n,{bymonth:e.byMonth+1,bymonthday:e.byMonthDay})}return new s.a(n)}function u(e){return e?e.rule?e.rule:e.due_date?e.due_date.rrule:null:null}function m(e){const t=Object.assign({},e);for(const i of Object.keys(c.a))t[i]=!!t[i];return t}function p(e,t,i=""){if(!e)return i;if(2===e.recur_on)return e.recur_on_status?"On "+e.recur_on_status:"";{if(!t){const n=u(e);if(!n)return i;try{t=s.a.fromString(n)}catch(o){return i}}if(!t||!t.options)return i;const n=t.options;switch(n.freq){case s.a.DAILY:return n.interval>1?$localize`:@@recurring-legacy_interval--every-n-days:Every ${n.interval}:intervalAmount: days`:$localize`:@@recurring-legacy_interval--every-day:Every day`;case s.a.WEEKLY:return n.byweekday&&1===n.byweekday.length&&n.interval<=1?$localize`:@@recurring-legacy_interval--every-weekday:Every ${a[n.byweekday]}:selectedWeekday:`:n.interval>1?$localize`:@@recurring-legacy_interval--every-n-weeks:Every ${n.interval}:intervalAmount: weeks`:$localize`:@@recurring-legacy_interval--every-week:Every week`;case s.a.MONTHLY:return n.interval>1?$localize`:@@recurring-legacy_interval--every-n-months:Every ${n.interval}:intervalAmount: months`:$localize`:@@recurring-legacy_interval--every-month:Every month`;case s.a.YEARLY:return n.interval>1?$localize`:@@recurring-legacy_interval--every-n-years:Every ${n.interval}:intervalAmount: years`:$localize`:@@recurring-legacy_interval--every-year:Every year`}}}},hIMv:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("ofXK"),n=i("KyjD"),s=i("1M0N"),c=i("K0KF"),a=i("HEHP"),r=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a,c.a,a.d]]}),e})()},hSRe:function(e,t,i){"use strict";i.d(t,"a",function(){return Ki});var o=i("dTHz"),n=i("I1n0"),s=i("fXoL"),c=i("XNiG"),a=i("2Vo4"),r=i("xgIS"),l=i("LRne"),d=i("PqYM"),u=i("lJxs"),m=i("1G5W"),p=i("pLZG"),h=i("IzEk"),f=i("zp1y"),b=i("JIr8"),g=i("eIep"),_=i("gSGL"),v=i("fujP"),k=i("iA4v"),y=i("T6L0"),w=i("4XV2"),x=i("YrjB"),I=i("o0vL"),T=i("82+D"),C=i("hr9B"),D=i("YAnr"),O=i("Fjoz"),S=i("Wk/N"),E=i("BYBp"),P=i("IE5h"),j=i("jJQC"),A=i("tVaG"),$=i("3pVM"),U=i("06+Y"),R=i("6hbx"),M=i("TqRa"),F=i("/+FX"),L=i("L5Tv"),N=i("FC7Q"),z=i("RecH"),q=i("0dWf"),G=i("NB/q"),V=i("b3J4"),B=i("uslN"),X=i("RtrR"),H=i("c3rA"),W=i("tjT+"),K=i("cC1p"),Q=i("wT7j"),Z=i("AeD3"),Y=i("jJW4"),J=i("xog/"),ee=i("OU+x"),te=i("l7P3"),ie=i("U4Ha"),oe=i("Uo20"),ne=i("ix4E"),se=i("CDR3"),ce=i("drq7"),ae=i("S7bF"),re=i("paaC"),le=i("7XkT"),de=i("4H0A"),ue=i("5EAn"),me=i("Dvla"),pe=i("G2WA"),he=i("ZlQq"),fe=i("aWji"),be=i("HBOB"),ge=i("FXUF"),_e=i("Vdkl"),ve=i("5S2/"),ke=i("O3M5"),ye=i("8it8"),we=i("ofXK"),xe=i("lVAj"),Ie=i("RUe1"),Te=i("LdyQ"),Ce=i("MJvn"),De=i("n+1/"),Oe=i("5smY"),Se=i("HPyy"),Ee=i("FRLQ"),Pe=i("UdVN"),je=i("NsZK"),Ae=i("aitn"),$e=i("O5gs"),Ue=i("iVLJ"),Re=i("d9+G"),Me=i("peMq"),Fe=i("+HC/"),Le=i("rXb0"),Ne=i("WkAz"),ze=i("6mdQ"),qe=i("pxPQ"),Ge=i("5Eri"),Ve=i("0ENg"),Be=i("jkT0"),Xe=i("UAD/"),He=i("jwRX"),We=i("uKvr"),Ke=i("lkVx"),Qe=i("kC/4"),Ze=i("EP2k"),Ye=i("gSwD");const Je=["dropdown"],et=["commentEditorContainer"],tt=["commentEditor"],it=["taskMention"],ot=["emojiDropdown"],nt=["mentionSelectorDropdown"],st=["taskPopupDropdown"],ct=["unfurlUrlDropdown"],at=["blockHanleDropdown"],rt=["slashCommandTemplate"],lt=["slashCommand"],dt=["slashCommandContainer"],ut=["cloudAttachments"],mt=["remindMeDatePicker"],pt=["commentSettingsDropdown"];function ht(e,t){if(1&e&&s.Xb(0,"cu-avatar",42),2&e){const e=s.uc();s.Dc("user",e.comment.user)("cuUserProfileLink",e.comment.user)}}function ft(e,t){if(1&e&&(s.cc(0,"div",43),s.cc(1,"div",44),s.Xb(2,"div",45),s.bc(),s.Xb(3,"cu-avatar",46),s.bc()),2&e){const e=s.uc();s.Ib(3),s.Dc("user",e.comment.user)("cuUserProfileLink",e.comment.user)}}function bt(e,t){if(1&e&&(s.cc(0,"div",52),s.dd(1),s.bc()),2&e){const e=s.uc(2);s.Ib(1),s.fd(" ",e.thumbsUpCount," ")}}const gt=function(e,t,i,o){return{"comment-reaction_hover":e,"comment-reaction_mine":t,"comment-reaction_visible":i,"comment-reaction_to-me":o}};function _t(e,t){if(1&e){const e=s.dc();s.cc(0,"div",47),s.qc("click",function(){s.Uc(e);const t=s.uc();return t.toggleLike(t.comment)}),s.vc(1,"itsme"),s.cc(2,"div",48),s.Xb(3,"div",49),s.cc(4,"div",50),s.Xb(5,"span"),s.Xb(6,"span"),s.Xb(7,"span"),s.Xb(8,"span"),s.Xb(9,"span"),s.Xb(10,"span"),s.Xb(11,"span"),s.Xb(12,"span"),s.Xb(13,"span"),s.Xb(14,"span"),s.bc(),s.bc(),s.bd(15,bt,2,1,"div",51),s.bc()}if(2&e){const e=s.uc();s.Dc("ngClass",s.Kc(7,gt,!e.isSharingApp,e.hasMyReaction,e.thumbsUpCount>0,s.wc(1,5,e.comment.user)))("cuTooltip",e.reactedUsersTooltip),s.Ib(3),s.Dc("@likeIconState",e.reactionState),s.Ib(1),s.Dc("@likeSparkState",e.reactionState),s.Ib(11),s.Dc("ngIf",e.thumbsUpCount>0)}}function vt(e,t){1&e&&(s.ac(0),s.gc(1,53),s.Zb())}function kt(e,t){1&e&&(s.ac(0),s.gc(1,54),s.Zb())}function yt(e,t){}const wt=function(e,t){return{comment:e,showSubjectAtTop:t}};function xt(e,t){if(1&e&&s.bd(0,yt,0,0,"ng-template",67),2&e){const e=s.uc(2);s.Dc("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",s.Ic(2,wt,e.comment,e.showSubjectAtTop))}}function It(e,t){if(1&e){const e=s.dc();s.cc(0,"div",72),s.qc("click",function(){return s.Uc(e),s.uc(3).onNumberClick.emit()}),s.dd(1),s.bc()}if(2&e){const e=s.uc(3);s.Ib(1),s.fd(" ",e.commentNumber," ")}}function Tt(e,t){1&e&&(s.mc(0,70,1),s.Yb(1),s.jc())}function Ct(e,t){1&e&&(s.mc(0,70,2),s.Yb(1),s.jc())}const Dt=function(e){return{"cu-comment__author_me":e}};function Ot(e,t){if(1&e){const e=s.dc();s.bd(0,It,2,1,"div",68),s.cc(1,"div",69),s.mc(2,70),s.vc(3,"itsme"),s.cc(4,"span",71),s.qc("click",function(){return s.Uc(e),s.uc(2).onShowAutomation.emit()}),s.vc(5,"username"),s.bd(6,Tt,2,0,"ng-container",65),s.bc(),s.bd(7,Ct,2,0,"ng-container",65),s.jc(),s.bc()}if(2&e){const e=s.uc(2);s.Dc("ngIf",e.commentNumber),s.Ib(1),s.Dc("ngClass",s.Hc(11,Dt,s.wc(3,7,e.comment.user))),s.Ib(3),s.Dc("cuUserProfileLink",e.comment.user)("automation",e.fromAutomation),s.Ib(2),s.Dc("ngIf",e.fromAutomation),s.Ib(1),s.Dc("ngIf","email"===e.comment.source),s.kc(s.wc(5,9,e.comment.user)),s.hc(2)}}function St(e,t){if(1&e&&(s.cc(0,"div",69),s.vc(1,"itsme"),s.cc(2,"span"),s.dd(3),s.bc(),s.dd(4),s.bc()),2&e){const e=s.uc(2);s.Dc("ngClass",s.Hc(5,Dt,s.wc(1,3,e.comment.user))),s.Ib(3),s.ed(e.comment.source_username),s.Ib(1),s.fd(" from ",e.comment.source,": ")}}function Et(e,t){if(1&e&&(s.cc(0,"div",73),s.Xb(1,"div",74),s.dd(2),s.bc()),2&e){const e=s.uc(2);s.Dc("cuTooltip",e.unreadEmailsText),s.Ib(1),s.Dc("icon","cu2-email-4"),s.Ib(1),s.fd(" ",null==e.comment?null:e.comment.emails[0].open_count," ")}}function Pt(e,t){if(1&e&&(s.cc(0,"div",75),s.Xb(1,"div",74),s.dd(2),s.bc()),2&e){const e=s.uc(2);s.Ob("cu-comment__emails-read-toolbar-mr",e.showAddFollowers&&(null==e.comment?null:e.comment.threaded_replies)),s.Dc("cuTooltip",e.unreadEmailsText),s.Ib(1),s.Dc("icon","cu2-email-4"),s.Ib(1),s.fd(" ",null==e.comment?null:e.comment.emails[0].open_count," ")}}const jt=function(){return[]};function At(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-user-and-groups-list-dropdown",76,77),s.qc("onClose",function(){return s.Uc(e),s.uc(2).toggleCommentMenu(!1)})("onOpen",function(){return s.Uc(e),s.uc(2).toggleCommentMenu(!0)})("onChange",function(t){return s.Uc(e),s.uc(2).addThreadFollowers(t)})("onUserGroupsChanged",function(t){return s.Uc(e),s.uc(2).addGroupThreadFollowers(t)}),s.vc(2,"membersToUsers"),s.vc(3,"async"),s.vc(4,"async"),s.cc(5,"div",78),s.Xb(6,"div",79),s.cc(7,"div",80),s.gc(8,81),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc(2);let t=null;s.Dc("users",s.wc(2,9,e.projectMembers))("userGroups",e.userGroups)("selectedUsers",e.comment.thread_followers?e.comment.thread_followers:s.Gc(15,jt))("selectedUserGroups",e.comment.group_thread_followers?e.comment.group_thread_followers:s.Gc(16,jt))("modifier","cu-dropdown_left")("showAnyone",e.showAnyone)("multiChoice",!0)("subcategory",null==(t=s.wc(3,11,e.task$))?null:t.subcategory)("task",s.wc(4,13,e.task$))}}function $t(e,t){if(1&e){const e=s.dc();s.cc(0,"a",82),s.qc("click",function(){return s.Uc(e),s.uc(2).edit()}),s.Xb(1,"span",83),s.cc(2,"span",84),s.gc(3,85),s.bc(),s.bc()}}function Ut(e,t){if(1&e){const e=s.dc();s.cc(0,"a",82),s.qc("click",function(){return s.Uc(e),s.uc(2).viewEmail()}),s.Xb(1,"span",86),s.cc(2,"span",84),s.gc(3,87),s.bc(),s.bc()}}const Rt=function(e){return[e]};function Mt(e,t){if(1&e){const e=s.dc();s.cc(0,"div"),s.cc(1,"cu-user-and-groups-list-dropdown",88),s.qc("onChange",function(t){return s.Uc(e),s.uc(2).assignToUser(t)})("onUserGroupsChanged",function(t){return s.Uc(e),s.uc(2).assignToGroup(t)})("onClose",function(){return s.Uc(e),s.uc(2).toggleCommentMenu(!1)})("onOpen",function(){return s.Uc(e),s.uc(2).toggleCommentMenu(!0)}),s.vc(2,"membersToUsers"),s.vc(3,"async"),s.vc(4,"async"),s.cc(5,"div"),s.cc(6,"a",89),s.Xb(7,"span",90),s.cc(8,"span",84),s.gc(9,91),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc(2);let t=null;s.Ib(1),s.Dc("users",s.wc(2,9,e.projectMembers))("selectedUsers",e.comment.assignee?s.Hc(15,Rt,e.comment.assignee):s.Gc(17,jt))("modifier","cu-dropdown_left")("showUnassign",!(!e.comment.assignee&&!e.comment.group_assignee)&&e.showUnassign)("showAnyone",e.showAnyone)("userGroups",e.userGroups)("selectedUserGroups",e.comment.group_assignee?s.Hc(18,Rt,e.comment.group_assignee):s.Gc(20,jt))("subcategory",null==(t=s.wc(3,11,e.task$))?null:t.subcategory)("task",s.wc(4,13,e.task$))}}function Ft(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-dropdown-list",92,93),s.qc("onSelect",function(t){return s.Uc(e),s.uc(2).selectMenuItem(t)})("onClose",function(){return s.Uc(e),s.uc(2).toggleCommentMenu(!1)})("onOpen",function(){return s.Uc(e),s.uc(2).toggleCommentMenu(!0)}),s.Xb(2,"div",94),s.bc()}if(2&e){const e=s.uc(2);s.Dc("items",e.menuItems)}}function Lt(e,t){if(1&e&&(s.cc(0,"div",55),s.cc(1,"div",56),s.bd(2,xt,1,5,void 0,8),s.bd(3,Ot,8,13,"ng-template",null,57,s.cd),s.bd(5,St,5,7,"div",58),s.bd(6,Et,3,3,"div",59),s.cc(7,"div",60),s.dd(8),s.vc(9,"timeAgo"),s.bc(),s.bc(),s.cc(10,"div",61),s.bd(11,Pt,3,5,"div",62),s.bd(12,At,9,17,"cu-user-and-groups-list-dropdown",63),s.bd(13,$t,4,0,"a",64),s.vc(14,"itsme"),s.bd(15,Ut,4,0,"a",64),s.bd(16,Mt,10,21,"div",65),s.vc(17,"async"),s.vc(18,"async"),s.vc(19,"async"),s.bd(20,Ft,3,1,"cu-dropdown-list",66),s.bc(),s.bc()),2&e){const e=s.Rc(4),t=s.uc();let i=null;s.Ob("cu-comment__header-bottom",t.isEmail),s.Ib(2),s.Dc("ngIf",t.headerTemplate)("ngIfElse",e),s.Ib(3),s.Dc("ngIf",t.comment.source_username),s.Ib(1),s.Dc("ngIf",(null==t.comment||null==t.comment.emails?null:t.comment.emails.length)&&(null==t.comment?null:t.comment.emails[0].open_count)),s.Ib(1),s.Ob("cu-comment__date-top-padding",null==t.comment||null==t.comment.emails?null:t.comment.emails.length),s.Ib(1),s.fd(" ",s.wc(9,15,t.comment.date)," "),s.Ib(3),s.Dc("ngIf",(null==t.comment||null==t.comment.emails?null:t.comment.emails.length)&&(null==t.comment?null:t.comment.emails[0].open_count)),s.Ib(1),s.Dc("ngIf",t.showAddFollowers&&(null==t.comment?null:t.comment.threaded_replies)),s.Ib(1),s.Dc("ngIf",s.wc(14,17,t.comment.user)&&t.permissionLevel!==t.readPermission&&!t.readonly&&!t.isEmail&&!(null!=t.comment&&null!=t.comment.emails&&t.comment.emails.length)),s.Ib(2),s.Dc("ngIf",!t.readonly&&t.isEmail),s.Ib(1),s.Dc("ngIf",(!s.wc(17,19,t.permissions$)||(null==(i=s.wc(18,21,t.permissions$))?null:i.comment)&&s.wc(19,23,t.assignedResolved$))&&!t.readonly),s.Ib(4),s.Dc("ngIf",null==t.menuItems?null:t.menuItems.length)}}function Nt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",95),s.qc("click",function(){return s.Uc(e),s.uc().onSelectedTextClick.emit()}),s.vc(1,"deltaHtml"),s.bc()}if(2&e){const e=s.uc();s.Dc("innerHTML",s.wc(1,1,e.selectedTextDelta||e.comment.highlight_text),s.Vc)}}function zt(e,t){if(1&e&&s.Xb(0,"cu-email-reply",96),2&e){const e=s.uc();s.Dc("showInfo",!1)("showFullConversation",e.showFullConversation)("email",e.comment.emails[0])("emailAttachments",e.comment.email_attachments)}}function qt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-comment",98),s.qc("onAttachmentPreview",function(t){return s.Uc(e),s.uc(2).previewAttachment(t)})("onCommentClick",function(t){return s.Uc(e),s.uc(2).onCommentClick(t)})("onCommentReply",function(t){return s.Uc(e),s.uc(2).onCommentReply.next(t)})("onCommentMentionClick",function(t){return s.Uc(e),s.uc(2).onScrollToComment.emit(t)})("onCommentDocClick",function(t){return s.Uc(e),s.uc(2).onCommentDocClick(t)})("click",function(){return s.Uc(e),s.uc(2).onCommentBodyClick.emit()}),s.bc()}if(2&e){const e=s.uc(2);s.Dc("taskId",e.taskId)("weights",e.weights)("comment",e.comment.comment)("lazyLoadEntities",e.lazyLoadEntities)("allowReply",e.allowReply)("followers",e.followers)("assignees",e.assignees)("searchQuery",e.searchString)}}function Gt(e,t){if(1&e&&s.bd(0,qt,1,8,"cu-comment",97),2&e){const e=s.uc();s.Dc("ngIf",!e.editing)}}function Vt(e,t){1&e&&(s.cc(0,"div",107),s.tc(),s.cc(1,"svg",108),s.Xb(2,"path",109),s.Xb(3,"path",110),s.bc(),s.bc())}function Bt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.vc(2,"username"),s.Zb()),2&e){const e=s.uc(3);s.Ib(1),s.fd(" ",s.xc(2,1,e.comment.assignee,"me"),"")}}function Xt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(3);s.Ib(1),s.fd(" ",e.comment.group_assignee.name,"")}}function Ht(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"cu-user-and-groups-list-dropdown",111),s.qc("onChange",function(t){return s.Uc(e),s.uc(2).assignToUser(t)})("onUserGroupsChanged",function(t){return s.Uc(e),s.uc(2).assignToGroup(t)}),s.vc(2,"membersToUsers"),s.vc(3,"async"),s.vc(4,"async"),s.cc(5,"span",112),s.bd(6,Bt,3,4,"ng-container",65),s.bd(7,Xt,2,1,"ng-container",65),s.bc(),s.bc(),s.Zb()}if(2&e){const e=s.uc(2);let t=null;s.Ib(1),s.Dc("users",s.wc(2,11,e.projectMembers))("selectedUsers",e.comment.assignee?s.Hc(17,Rt,e.comment.assignee):s.Gc(19,jt))("modifier","cu-dropdown_center")("showUnassign",!(!e.comment.assignee&&!e.comment.group_assignee)&&e.showUnassign)("showAnyone",e.showAnyone)("userGroups",e.userGroups)("selectedUserGroups",e.comment.group_assignee?s.Hc(20,Rt,e.comment.group_assignee):s.Gc(22,jt))("subcategory",null==(t=s.wc(3,13,e.task$))?null:t.subcategory)("task",s.wc(4,15,e.task$)),s.Ib(5),s.Dc("ngIf",e.comment.assignee&&!e.comment.group_assignee),s.Ib(1),s.Dc("ngIf",e.comment.group_assignee)}}function Wt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.vc(2,"username"),s.Zb()),2&e){const e=s.uc(3);s.Ib(1),s.fd(" ",s.xc(2,1,e.comment.assignee,"me"),"")}}function Kt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(3);s.Ib(1),s.fd(" ",e.comment.group_assignee.name,"")}}const Qt=function(e){return{"cu-comment-assignee__user_resolved":e}};function Zt(e,t){if(1&e&&(s.cc(0,"span",113),s.bd(1,Wt,3,4,"ng-container",65),s.bd(2,Kt,2,1,"ng-container",65),s.bc()),2&e){const e=s.uc(2);s.Dc("ngClass",s.Hc(3,Qt,null==e.comment?null:e.comment.resolved)),s.Ib(1),s.Dc("ngIf",e.comment.assignee&&!e.comment.group_assignee),s.Ib(1),s.Dc("ngIf",e.comment.group_assignee)}}function Yt(e,t){1&e&&(s.cc(0,"div",122),s.gc(1,123),s.bc())}function Jt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(4);s.Ib(1),s.fd(" by ",null==e.comment||null==e.comment.resolved_by?null:e.comment.resolved_by.username," ")}}function ei(e,t){if(1&e&&(s.cc(0,"div",122),s.ac(1),s.gc(2,124),s.Zb(),s.bd(3,Jt,2,1,"ng-container",65),s.bc()),2&e){const e=s.uc(3);s.Ib(3),s.Dc("ngIf",null==e.comment?null:e.comment.resolved_by)}}const ti=function(e){return{"cu-comment-assignee__resolve-box_resolved":e}};function ii(e,t){if(1&e){const e=s.dc();s.cc(0,"div",114),s.qc("click",function(){return s.Uc(e),s.uc(2).resolveToggle()}),s.bd(1,Yt,2,0,"div",115),s.bd(2,ei,4,1,"div",115),s.cc(3,"div",116),s.cc(4,"div",117),s.cc(5,"div",118),s.cc(6,"div",119),s.Xb(7,"div",120),s.Xb(8,"div",121),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",!(null!=e.comment&&e.comment.resolved)),s.Ib(1),s.Dc("ngIf",null==e.comment?null:e.comment.resolved),s.Ib(1),s.Dc("ngClass",s.Hc(3,ti,null==e.comment?null:e.comment.resolved))}}function oi(e,t){1&e&&(s.cc(0,"div",122),s.gc(1,127),s.bc())}function ni(e,t){1&e&&(s.cc(0,"div",128),s.cc(1,"div",117),s.cc(2,"div",118),s.cc(3,"div",119),s.Xb(4,"div",120),s.Xb(5,"div",121),s.bc(),s.bc(),s.bc(),s.bc())}function si(e,t){if(1&e&&(s.cc(0,"div",125),s.bd(1,oi,2,0,"div",115),s.bd(2,ni,6,0,"div",126),s.bc()),2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",null==e.comment?null:e.comment.resolved),s.Ib(1),s.Dc("ngIf",null==e.comment?null:e.comment.resolved)}}const ci=function(e){return{"cu-comment-assignee__text_resolved":e}};function ai(e,t){if(1&e&&(s.cc(0,"div",99),s.cc(1,"div",100),s.bd(2,Vt,4,0,"div",101),s.cc(3,"div",102),s.cc(4,"span",103),s.dd(5," Assigned to "),s.bc(),s.bd(6,Ht,8,23,"ng-container",8),s.vc(7,"async"),s.vc(8,"async"),s.vc(9,"async"),s.bd(10,Zt,3,5,"ng-template",null,104,s.cd),s.bc(),s.bc(),s.bd(12,ii,9,5,"div",105),s.vc(13,"async"),s.vc(14,"async"),s.vc(15,"async"),s.bd(16,si,3,2,"ng-template",null,106,s.cd),s.bc()),2&e){const e=s.Rc(11),t=s.Rc(17),i=s.uc();let o=null,n=null;s.Ib(2),s.Dc("ngIf",!i.comment.resolved),s.Ib(2),s.Dc("ngClass",s.Hc(18,ci,null==i.comment?null:i.comment.resolved)),s.Ib(2),s.Dc("ngIf",!i.readonly&&i.allowReassign&&!i.comment.resolved&&(!s.wc(7,6,i.permissions$)||(null==(o=s.wc(8,8,i.permissions$))?null:o.comment)&&s.wc(9,10,i.assignedResolved$)))("ngIfElse",e),s.Ib(6),s.Dc("ngIf",!i.readonly&&!s.wc(13,12,i.permissions$)||(null==(n=s.wc(14,14,i.permissions$))?null:n.comment)&&s.wc(15,16,i.assignedResolved$))("ngIfElse",t)}}function ri(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-comment-reactions",131),s.qc("toggleReaction",function(t){return s.Uc(e),s.uc(2).toggleReaction(t)}),s.vc(1,"async"),s.bc()}if(2&e){const e=s.uc(2);s.Dc("comment",e.comment)("user",s.wc(1,2,e.sharedData.userData).user)}}function li(e,t){if(1&e){const e=s.dc();s.cc(0,"div",134),s.qc("click",function(){return s.Uc(e),s.uc(3).toggleReplies()}),s.cc(1,"div",135),s.gc(2,136),s.bc(),s.bc()}}function di(e,t){if(1&e&&(s.ac(0),s.cc(1,"div",140),s.gc(2,141),s.bc(),s.Xb(3,"div",142),s.Zb()),2&e){const e=s.uc(4);s.Ib(2),s.kc(null==e.comment?null:e.comment.new_thread_count),s.hc(2)}}function ui(e,t){if(1&e&&(s.ac(0),s.Xb(1,"div",143),s.cc(2,"div",140),s.gc(3,144),s.bc(),s.Xb(4,"div",142),s.Zb()),2&e){const e=s.uc(4);s.Ib(3),s.kc(null==e.comment?null:e.comment.new_mentioned_thread_count)(null==e.comment?null:e.comment.new_mentioned_thread_count),s.hc(3)}}function mi(e,t){if(1&e&&(s.cc(0,"div",140),s.gc(1,145),s.bc()),2&e){const e=s.uc(4);s.Ib(1),s.kc(null==e.comment?null:e.comment.threaded_replies)(null==e.comment?null:e.comment.threaded_replies),s.hc(1)}}function pi(e,t){if(1&e&&s.Xb(0,"cu-user-group",146),2&e){const e=s.uc(4);s.Dc("users",null==e.comment?null:e.comment.threaded_users)("modifier","cu-user-group_sm")("avatarSize",24)}}function hi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",137),s.qc("click",function(){return s.Uc(e),s.uc(3).toggleReplies()}),s.bd(1,di,4,1,"ng-container",65),s.bd(2,ui,5,2,"ng-container",65),s.bd(3,mi,2,2,"div",138),s.bd(4,pi,1,3,"cu-user-group",139),s.bc()}if(2&e){const e=s.uc(3);s.Ib(1),s.Dc("ngIf",null==e.comment?null:e.comment.new_thread_count),s.Ib(1),s.Dc("ngIf",null==e.comment?null:e.comment.new_mentioned_thread_count),s.Ib(1),s.Dc("ngIf",null==e.comment?null:e.comment.threaded_replies),s.Ib(1),s.Dc("ngIf",null==e.comment||null==e.comment.threaded_users?null:e.comment.threaded_users.length)}}function fi(e,t){if(1&e&&(s.ac(0),s.bd(1,li,3,0,"div",132),s.bd(2,hi,5,4,"div",133),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",!(null!=e.comment&&e.comment.threaded_replies||e.showReplies||e.isEmail||e.alwaysShowThread)),s.Ib(1),s.Dc("ngIf",!e.isEmail&&!e.showReplies&&(null==e.comment?null:e.comment.threaded_replies)&&!e.alwaysShowThread)}}function bi(e,t){if(1&e&&(s.cc(0,"div",129),s.bd(1,ri,2,4,"cu-comment-reactions",130),s.vc(2,"async"),s.bd(3,fi,3,2,"ng-container",65),s.bc()),2&e){const e=s.uc();s.Ob("cu-comment__lip_reply-expanded",e.showReplies||e.showReactions&&e.isEmail)("cu-comment__lip_empty",!e.editing&&!(null!=e.comment&&e.comment.threaded_replies)&&!e.comment.reactions.length&&(!e.showReplies&&!e.isEmail||!e.showReactions&&e.isEmail)),s.Ib(1),s.Dc("ngIf",e.showReactions&&!((null==e.comment||null==e.comment.comment||!e.comment.comment.length)&&null!=e.comment&&null!=e.comment.emails&&e.comment.emails.length)&&e.allowReaction&&e.reactionsClickappEnabled&&s.wc(2,6,e.reactionsAllowed$)),s.Ib(2),s.Dc("ngIf",!(null!=e.comment&&e.comment.removed)&&e.allowThread&&!e.editing&&((null==e.comment?null:e.comment.threaded_replies)||e.permissionLevel!==e.readPermission&&!e.readonly))}}function gi(e,t){}const _i=function(e){return{cancel:e}},vi=function(e,t){return{comment:e,callback:t}};function ki(e,t){if(1&e&&s.bd(0,gi,0,0,"ng-template",67),2&e){const e=s.uc(2);s.Dc("ngTemplateOutlet",e.threadTemplate)("ngTemplateOutletContext",s.Ic(4,vi,e.comment,s.Hc(2,_i,e.cancelRepliesFunc)))}}function yi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",149),s.qc("click",function(){return s.Uc(e),s.uc(2).toggleReplies()}),s.cc(1,"div",150),s.gc(2,151),s.bc(),s.bc()}}function wi(e,t){if(1&e&&(s.cc(0,"div",147),s.bd(1,ki,1,7,void 0,65),s.bd(2,yi,3,0,"div",148),s.bc()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",e.isEmail||e.alwaysShowThread||(e.showReplies||!(!e.showReplies&&(null==e.comment||null==e.comment.emails||!e.comment.emails.length||null!=e.comment&&null!=e.comment.emails&&e.comment.emails.length&&null!=e.comment&&e.comment.threaded_replies)))&&e.threadTemplate),s.Ib(1),s.Dc("ngIf",e.showReplies&&!e.alwaysShowThread)}}function xi(e,t){1&e&&s.Xb(0,"div",174)}function Ii(e,t){if(1&e&&s.Xb(0,"cu-avatar",175),2&e){const e=s.uc(2);s.Ec("cuTooltip",e.comment.assignee.username),s.Dc("user",e.comment.assignee)}}function Ti(e,t){if(1&e&&s.Xb(0,"cu-user-group-avatar",176),2&e){const e=s.uc(2);s.Dc("cuTooltip",e.comment.group_assignee.name)("group",e.comment.group_assignee)("bordered",!1)("avatarSize",28)}}function Ci(e,t){if(1&e){const e=s.dc();s.cc(0,"div",177),s.qc("click",function(t){return s.Uc(e),s.uc(2).openSlashCommands(t)}),s.Xb(1,"div",178),s.bc()}}const Di=function(e){return{"comment-bar__footer_active":e}};function Oi(e,t){if(1&e){const e=s.dc();s.cc(0,"div",152),s.cc(1,"div",153),s.cc(2,"div"),s.cc(3,"cu-user-and-groups-list-dropdown",154),s.qc("onChange",function(t){return s.Uc(e),s.uc().assignToUser(t)})("onUserGroupsChanged",function(t){return s.Uc(e),s.uc().assignToGroup(t)}),s.vc(4,"membersToUsers"),s.vc(5,"async"),s.vc(6,"async"),s.cc(7,"div"),s.bd(8,xi,1,0,"div",155),s.bd(9,Ii,1,2,"cu-avatar",156),s.bd(10,Ti,1,4,"cu-user-group-avatar",157),s.bc(),s.bc(),s.bc(),s.cc(11,"div",158),s.qc("click",function(){return s.Uc(e),s.uc().openUserMentions()}),s.Xb(12,"div",159),s.bc(),s.cc(13,"div",160),s.qc("click",function(t){return s.Uc(e),s.uc().openTaskMentionEditor(t)}),s.Xb(14,"div",161),s.bc(),s.cc(15,"cu-emoji-picker-dropdown",162),s.qc("onSelect",function(t){return s.Uc(e),s.uc().addEmojiToEditor(t)}),s.Xb(16,"div",163),s.bc(),s.cc(17,"cu-emoji-list-dropdown",164,165),s.qc("onSelect",function(t){return s.Uc(e),s.uc().addEmojiToEditor(t)}),s.bc(),s.bd(19,Ci,2,0,"div",166),s.Xb(20,"div",167),s.bc(),s.Yb(21,168),s.cc(22,"div",169),s.cc(23,"div",170),s.qc("click",function(){return s.Uc(e),s.uc().cancel()}),s.gc(24,171),s.bc(),s.cc(25,"div",172),s.qc("click",function(){return s.Uc(e),s.uc().saveText()}),s.gc(26,173),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc(),t=s.Rc(57);let i=null;s.Dc("ngClass",s.Hc(20,Di,e.editing)),s.Ib(3),s.Dc("users",s.wc(4,14,e.projectMembers))("selectedUsers",e.comment.assignee?s.Hc(22,Rt,e.comment.assignee):s.Gc(24,jt))("showUnassign",!(!e.comment.assignee&&!e.comment.group_assignee)&&e.showUnassign)("userGroups",e.userGroups)("selectedUserGroups",e.comment.group_assignee?s.Hc(25,Rt,e.comment.group_assignee):s.Gc(27,jt))("subcategory",null==(i=s.wc(5,16,e.task$))?null:i.subcategory)("task",s.wc(6,18,e.task$)),s.Ib(5),s.Dc("ngIf",!e.comment.assignee&&!e.comment.group_assignee),s.Ib(1),s.Dc("ngIf",e.comment.assignee),s.Ib(1),s.Dc("ngIf",e.comment.group_assignee),s.Ib(7),s.Dc("fromRect",e.emojiRect),s.Ib(2),s.Dc("ngIf",e.slashCommandSupport),s.Ib(2),s.Dc("ngTemplateOutlet",t)}}function Si(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-task-mention",179,180),s.qc("onSelect",function(t){return s.Uc(e),s.uc().addTaskMentionToEditor(t)})("onDismiss",function(){return s.Uc(e),s.uc().dismissTaskMention()})("onOpen",function(){return s.Uc(e),s.uc().openTaskMention()})("onClose",function(){return s.Uc(e),s.uc().closeTaskMention()}),s.bc()}if(2&e){const e=s.uc();s.Dc("defaultProjectId",e.projectId)("taskId",e.taskId)}}function Ei(e,t){}function Pi(e,t){if(1&e&&(s.cc(0,"div"),s.bd(1,Ei,0,0,"ng-template",168),s.bc()),2&e){s.uc();const e=s.Rc(59);s.Ib(1),s.Dc("ngTemplateOutlet",e)}}const ji=function(e){return{title:e,icon:"cu2-inbox-thin"}};function Ai(e,t){if(1&e&&s.Xb(0,"cu-dropdown-list-item",181),2&e){const e=s.uc();s.Dc("item",s.Hc(1,ji,e.remindMeText))}}const $i=function(){return{dueDate:null,dueDateTime:!1}};function Ui(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-task-row-recurring-date-picker",182),s.qc("onOpen",function(){s.Uc(e);const t=s.uc();return t.reminderRecurringSettings=null,t.remdindMeDueDate=null,t.remindMeDueDateTime=!1})("onChange",function(t){return s.Uc(e),s.uc().setRemdindMeDueDate(t)})("onRecurringChange",function(t){return s.Uc(e),s.uc().reminderRecurringSettings=t})("onClose",function(){return s.Uc(e),s.uc().remdindMeDueDateClose()}),s.vc(1,"async"),s.vc(2,"async"),s.vc(3,"async"),s.bc()}if(2&e){const e=s.uc(),t=s.Rc(51);let i=null,o=null;s.Dc("adjustStyleForInboxReminder",!0)("dateTemplate",t)("dates",s.Gc(19,$i))("isSaveText","Remind me")("showStart",!1)("dualDate",!0)("dateFormat",null==(i=s.wc(1,13,e.user$))?null:i.date_format)("militaryTime",null==(o=s.wc(2,15,e.user$))?null:o.twenty_four_hr_setting)("startHour",0)("showCreateNewOption",!1)("showOnlyRecurIcon",!1)("quickDone",!0)("recurringReadonly",s.wc(3,17,e.offline$))}}function Ri(e,t){1&e&&s.Xb(0,"cu-cloud-storage-deny-msg")}function Mi(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-cloud-buttons-dropdown",183),s.qc("onCloudAdded",function(t){return s.Uc(e),s.uc().addCloudAttachment(t.file,t.source)})("onFilesSelected",function(t){return s.Uc(e),s.uc().fileAdded(t)}),s.cc(1,"div",184),s.Xb(2,"div",185),s.bc(),s.bc()}if(2&e){const e=s.uc();s.Dc("parentId",e.fileParentId||e.projectId)("type",e.fileParentType)("permanent",!1)}}function Fi(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-task-popup",187),s.qc("onRemove",function(){return s.Uc(e),s.uc(2).removeHoveredTaskMention()})("onEnter",function(){return s.Uc(e),s.uc(2).handleHover(!0)})("onLeave",function(){return s.Uc(e),s.uc(2).handleHover(!1)}),s.bc()}if(2&e){const e=s.uc(2);s.Dc("taskId",null==e.hoverData||null==e.hoverData.value?null:e.hoverData.value.task_id)}}function Li(e,t){if(1&e&&s.bd(0,Fi,1,1,"cu-task-popup",186),2&e){const e=s.uc();s.Dc("ngIf","task_mention"===(null==e.hoverData?null:e.hoverData.blotName))}}const Ni=function(){return{}};function zi(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-slash-command",188,189),s.qc("applyCommand",function(t){return s.Uc(e),s.uc().applySlashCommand(t)})("cancelCommand",function(t){return s.Uc(e),s.uc().hideSlashCommand(null==t?null:t.replace,null==t?null:t.updateSelection)}),s.vc(2,"async"),s.vc(3,"membersToUsers"),s.vc(4,"async"),s.bc()}if(2&e){const e=s.uc();s.Dc("alwaysVisible",!0)("dropdownPlacement",null==e.embedSlashCommandInfo?null:e.embedSlashCommandInfo.placement)("allowedCommands",e.allowedCommands)("currentValues",s.Gc(16,Ni))("options",s.Gc(17,Ni))("meUser",s.wc(2,10,e.sharedData.currentUser))("users",s.wc(3,12,e.projectMembers))("weights",e.weights)("userGroups",e.userGroups)("team",s.wc(4,14,e.sharedData.compatCurrentTeam$))}}const qi=function(){return["top-left","top-right","bottom-left","bottom-right","auto"]};var Gi=function(e){return e.CopyLinkToClipboard="copyLink",e.Remove="Remove",e.Edit="Edit",e.Reply="reply",e.AddToContent="addToContent",e.AddToInbox="addToInbox",e}({});const Vi={id:Gi.CopyLinkToClipboard,title:$localize`:@@common_copy-url:Copy URL`,icon:"cu2-copy-link2"},Bi={id:Gi.Remove,title:$localize`:@@common_delete:Delete`,icon:"cu2-trash"},Xi=Gi.Edit,Hi=($localize`:@@common_edit:Edit`,Gi.Reply),Wi=($localize`:@@common_reply:Reply`,{id:Gi.AddToContent,title:$localize`:@@common_add-to-description:Add to description`,icon:"cu2-stream"});let Ki=(()=>{class e{constructor(e,t,i,n,r,l,d,p,h,f,b,g,_,v,k,y,w,x,C,D,O,S,E,A,$,U,R,F,N,z,q){this.dataService=e,this.sharedData=t,this.helpers=i,this.commentsHelperService=n,this.store=r,this.viewTaskService=l,this.element=d,this.renderer=p,this.attachmentsViewerService=h,this.dynamicComponentEvents=f,this.uploaderService=b,this.taskMentionService=g,this.changeDetector=_,this.quillHelpers=v,this.commentsService=k,this.userProfileService=y,this.elementRef=w,this.frameHelperService=x,this.httpSession=C,this.clipboardService=D,this.sharedTaskService=O,this.sharedDocService=S,this.injector=E,this.zone=A,this.embedService=$,this.domService=U,this.googleDriveService=R,this.dropboxService=F,this.oneDriveService=N,this.boxService=z,this.commonStringsService=q,this.currentTeam={},this.destroy$=new c.a,this.permissions$=new a.a(null),this.offline$=this.store.select(X.b),this.user$=this.store.select(H.getUser),this.reactionState="normal",this.readPermission=o.e.READ,this.thumbsUpCount=0,this.reactionsClickappEnabled=!1,this.isSharingApp=M.k,this.UserRole=o.f,this.inTable=!1,this.unfurlUrlMenuData=[],this.blockHandleMenuData=[],this.remdindMeDueDate=null,this.remindMeDueDateTime=!1,this.reminderRecurringSettings=null,this.hideCoverImage=!1,this.alwaysShowThread=!1,this.showFullConversation=!1,this.showSubjectAtTop=!1,this.assignedComments=!0,this.projectMembers=[],this.readonly=!1,this.canAddAttachments=!0,this.canRemoveAttachments=!0,this.canRemoveOwnAttachments=!0,this.canChangeDescription=!0,this.fileParentType=I.c.Project,this.lazyLoadEntities=!1,this.slashCommandSupport=!0,this.disableKeySubmit=!1,this.allowReply=!1,this.allowLink=!1,this.allowThread=!1,this.allowAddToContent=!1,this.allowAddToInbox=!1,this.showAnyone=!1,this.showUnassign=!0,this.isEmail=!1,this.allowReassign=!0,this.allowReaction=!0,this.showToolbar=!0,this.showAddFollowers=!1,this.activeReply=!1,this.showReplyToEmailWithCollapse=!1,this.ignoreSlashCommands=!0,this.showReactions=!0,this.onReplyToEmail=new s.o,this.onViewEmail=new s.o,this.onRemove=new s.o,this.onUndo=new s.o,this.onChange=new s.o,this.onAttachmentEdited=new s.o,this.onAddReaction=new s.o,this.onRemoveReaction=new s.o,this.onAssigneeChange=new s.o,this.onToggleResolved=new s.o,this.onCommentReply=new s.o,this.onAddToContent=new s.o,this.onAddToInbox=new s.o,this.onScrollToComment=new s.o,this.onSelectedTextClick=new s.o,this.onShowThread=new s.o,this.onNumberClick=new s.o,this.onShowAutomation=new s.o,this.onCommentBodyClick=new s.o,this.UserWeightType=L.c,this.AttachmentSource=T.a,this.cloudData=P.c,this.trackByValue=j.f,this.menuItems=[],this.showReplies=!1,this.allowedCommands=Object.assign(Object.assign({},K.Ib),{[K.f.key]:!0,[K.ab.key]:!0,[K.i.key]:!0,[K.h.key]:!0,[K.g.key]:!0,[K.j.key]:!0,[K.d.key]:!0,[K.Eb.key]:!0,[K.ob.key]:!0,[K.T.key]:!0,[K.K.key]:!1,[K.L.key]:!1,[K.M.key]:!1,[K.m.key]:!1,[K.F.key]:!0,[K.d.key]:!0}),this.team$=this.store.select(H.getTeam),this.isFreePlan$=this.team$.pipe(Object(u.a)(e=>e.plan_id===B.f.FREE)),this.task$=this.viewTaskService.task,this.reactionsAllowed$=this.permissions$.pipe(Object(u.a)(e=>{var t;const i=e&&void 0!==e.like_comments?e.like_comments:!!(null===(t=this.task)||void 0===t?void 0:t.permissions)&&this.task.permissions.like_comments;return!(i||!e||!e.comment||this.fileParentType!==I.c.Comment&&this.fileParentType!==I.c.DocComment&&this.fileParentType!==I.c.DocViewComment&&this.fileParentType!==I.c.ConversationView&&this.fileParentType!==I.c.Project)||i})),this.remindMeText=$localize`:@@cu-task-comment__remind-me:Remind me`,this.imageList=[],this.menuOpen=!1,this.commentRestored=!1,this.cancelRepliesFunc=()=>{this.showReplies=!1},f.onAttachmentPreview.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{this.previewAttachment(e)})}get commentNumber(){return this.comment&&null!==this.comment.comment_number?Object(_.a)(this.comment.comment_number)?parseInt(this.comment.comment_number,10):this.comment.comment_number+1:null}ngOnInit(){this.currentTeam=this.sharedData.compatCurrentTeam,this.sharedData.compatCurrentTeam$.pipe(Object(p.a)(e=>!Object(v.a)(e)),Object(h.a)(1)).subscribe(e=>{void 0!==e.extra_comment_reactions&&(this.reactionsClickappEnabled=e.extra_comment_reactions,this.changeDetector.markForCheck())}),this.tag="comment_"+this.comment.id,this.permissions$.next(this.permissions),this.assignedResolved$=this.permissions$.pipe(Object(f.a)(this.store.select(n.m)),Object(u.a)(([e,t])=>!this.readonly&&(!e||!t||Object(N.c)(t.permissions,t.permission_level,this.comment,this.sharedData.currentUser.value))),Object(m.a)(this.destroy$)),this.attachmentsViewerService.onEdit.pipe(Object(m.a)(this.destroy$)).subscribe(e=>{const t=this.getAttachmentsFromComment(),i=t.findIndex(t=>t.attachment.id===e.id);-1!==i&&(t[i].attachment=e,this.onAttachmentEdited.emit({attachment:e}))}),this.viewTaskService.onLastCommentEdit.pipe(Object(p.a)(e=>this.comment.id===e),Object(m.a)(this.destroy$)).subscribe(()=>this.edit()),this.viewTaskService.onCancelReply.pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.activeReply=!1,this.changeDetector.markForCheck()}),this.viewTaskService.onCommentEditorAddFiles.pipe(Object(p.a)(()=>this.viewTaskService.commentEditorOpen&&this.editing),Object(m.a)(this.destroy$)).subscribe(e=>{this.uploaderService.addFiles(e,this.tag)}),this.uploaderService.onAdded.pipe(Object(p.a)(e=>this.needToHandleFile(e.tag)),Object(u.a)(e=>e.data),Object(m.a)(this.destroy$)).subscribe(e=>{this.addAttachmentToEditor(e)}),this.uploaderService.onProgress.pipe(Object(p.a)(e=>this.needToHandleFile(e.tag)),Object(u.a)(e=>e.data),Object(m.a)(this.destroy$)).subscribe(e=>{const t=document.querySelector(`[data-temp-id="${e.id}"]`);if(t){const i=t.querySelector("[data-progress-bar]");i&&i instanceof HTMLElement&&(i.style.width=e.loadPercent+"%")}}),this.uploaderService.onUpload.pipe(Object(p.a)(e=>this.needToHandleFile(e.tag)),Object(u.a)(e=>e.data),Object(m.a)(this.destroy$)).subscribe(e=>{const t=document.querySelector(`[data-temp-id="${e.id}"]`);if(t){const i=t.querySelector("[data-progress]");if(t.setAttribute("data-id",e.result.id),t.setAttribute("data-attachment-id",e.result.id),t.setAttribute("data-load-result",JSON.stringify(e.result)),t.setAttribute("data-file",JSON.stringify(e.result)),i.classList.add("progress_complete"),t.hasAttribute("data-file")){const i=JSON.parse(t.dataset.file);t.setAttribute("data-file",JSON.stringify(Object.assign({},i,e.result)))}setTimeout(()=>{t.classList.add("comment-attachment_success")},500)}}),this.uploaderService.onError.pipe(Object(p.a)(e=>this.needToHandleFile(e.tag)),Object(u.a)(e=>e.data),Object(m.a)(this.destroy$)).subscribe(e=>{const t=document.querySelector(`[data-temp-id="${e.id}"]`);t&&t.classList.add("comment-attachment_error")}),this.viewTaskService.onCommentResolveToggle.pipe(Object(p.a)(e=>!e.fromComment),Object(p.a)(e=>e.id===this.comment.id),Object(f.a)(this.user$),Object(m.a)(this.destroy$)).subscribe(([e,t])=>{this.comment.resolved=e.resolved,e.resolved&&(this.comment.resolved_by=t),this.setClassList(),this.changeDetector.markForCheck()}),this.viewTaskService.onCommentAssignToggle.pipe(Object(p.a)(e=>e.id===this.comment.id),Object(m.a)(this.destroy$)).subscribe(e=>{this.comment.assignee=e.assignee,this.comment.group_assignee=e.group_assignee}),this.editAttachmentHandler=this.renderer.listen("document",S.a,e=>{this.syntaxModule&&this.syntaxModule.options&&(this.syntaxModule.options.interval=e.editing?2147483647:1e3)}),this.canEditComment=this.checkCanEditComment(),this.ignoreSlashCommands||Object(r.a)(document,V.a).pipe(Object(m.a)(this.destroy$)).subscribe(e=>{if(e.stopPropagation(),this.slashCommand||!e||!e.detail||e.detail.id!==this.editorId||e.detail.sessionId!==this.httpSession.getSessionId())return;this.hideSlashCommand();const t=this.editor;if(!t)return;this.embedSlashCommandInfo=Object(Q.c)(t),this.embedSlashCommandInfo.container=e.detail.node.children[0];const i=this.embedSlashCommandInfo.container.getBoundingClientRect();this.embedSlashCommandInfo.placement=window.innerWidth-i.right>500?"right":window.innerWidth-i.right<250?"left":i.top>window.innerHeight/2?"top":"bottom",this.embedSlashCommandInfo.view=this.domService.appendTemplateToElement(this.slashCommandTemplate,this.embedSlashCommandInfo.container,this.slashCommandContainer),this.changeDetector.detectChanges(),this.slashCommand?this.slashCommand.activate(e.detail.replace,"","",e.detail.defaultCommand):setTimeout(()=>{this.slashCommand&&this.slashCommand.activate(e.detail.replace,"","",e.detail.defaultCommand)})}),this.allowThread&&(this.searchString||this.selectedFilterAssignedCommentUserIds&&this.selectedFilterAssignedCommentUserIds.length>0)&&this.comment.threaded_replies_search_count>0&&this.toggleReplies()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.editAttachmentHandler&&(this.editAttachmentHandler(),this.editAttachmentHandler=null),this.hoverModule&&this.hoverModule.destroy()}ngAfterContentInit(){this.setClassList()}ngOnChanges(e){var t,i,o;if(e.comment&&(this.setClassList(),this.tag="comment_"+this.comment.id,this.reactionsClickappEnabled||this.reactionsChanged(this.comment),this.canEditComment=this.checkCanEditComment(),this.assignedToMe=this.comment.assignee&&this.comment.assignee.id===this.sharedData.currentUser.value.id||this.comment.group_assignee&&this.comment.group_assignee.members.some(e=>e.id===this.sharedData.currentUser.value.id),this.comment&&this.comment.emails&&this.comment.emails.length&&(this.hasEmailData=!0),!this.comment||this.comment.comment&&this.comment.comment.length||!this.comment.emails||!this.comment.emails.length||(this.email=this.comment.emails[0]),(null===(i=null===(t=this.comment)||void 0===t?void 0:t.emails)||void 0===i?void 0:i.length)&&(null===(o=this.comment)||void 0===o?void 0:o.emails[0]))){const e=this.comment.emails[0].open_count?this.comment.emails[0].open_count.toString():"0";this.unreadEmailsText=$localize`:@@cu-comment__emails-read:Seen ${e}:count: times`}e.projectMembers&&e.projectMembers.currentValue&&(this.projectMembers=e.projectMembers.currentValue,this.changeDetector.detectChanges()),(e.readonly||e.permissions)&&this.permissions$.next(this.permissions),this.calcMenuItems()}needToHandleFile(e){return e===this.tag&&this.viewTaskService.commentEditorOpen&&this.editing||this.editor&&this.editor.hasFocus()}getAttachmentsFromComment(){return this.imageList=this.comment.comment.filter(e=>e.attachment&&"attachment"===e.type),this.imageList}addThreadFollowers(e){this.viewTaskService.onThreadFollowerChange.emit({comment:this.comment,followers:e}),this.comment=Object.assign(Object.assign({},this.comment),{thread_followers:e})}addGroupThreadFollowers(e){this.viewTaskService.onThreadFollowerChange.emit({groupFollowers:e,comment:this.comment}),this.comment=Object.assign(Object.assign({},this.comment),{group_thread_followers:e})}edit(){this.viewTaskService.commentEditorOpen=!0,this.commentCopy=this.comment.comment,this.editing=!0,this.editor=new k.b(this.commentEditor.nativeElement,{id:this.editorId,theme:"bubble",bounds:this.commentEditorContainer.nativeElement,formats:["bold","italic","underline","strike","background","code","code-block","blockquote","link","list","user_mention","attachment","linebreak","grammarly","task_mention","comment_mention","slash_command","emoticon","frame","indent","data-size"],modules:{toolbar:{container:["bold","italic","strike","underline",{background:[!1,...D.E]},"link","code","code-block","blockquote",{list:"bullet"},{list:"ordered"},{list:"check"}],handlers:{blockquote:Object(F.a)("blockquote",()=>this.editor),"code-block":Object(F.a)("code-block",()=>this.editor)}},storage:!0,history:!0,keyboard:{bindings:Object.assign({submit:{key:"Enter",shiftKey:!1,shortKey:!1,handler:(e,t)=>!(!this.disableKeySubmit&&!t.format["code-block"])||!(!this.sharedData.currentUser.value||!this.sharedData.currentUser.value.post_with_cmd)||void this.saveText()},commandSubmit:{key:"Enter",shiftKey:!1,shortKey:!0,handler:()=>{this.saveText()}},escape:{key:"Escape",handler:(e,t)=>{if(t.format.code||t.format["code-block"])return!0;this.cancel()}}},Object(w.b)(this.getEditor.bind(this),this.getPostWithCmd.bind(this),this.getEditorContainer.bind(this),!0))},clipboard:{matchers:Object($.a)(this.getEditor.bind(this),()=>!0)},table:{tableTools:{zIndex:1e3}},dragDropBlocks:Object.assign(Object.assign({},O.b),{allowHandleBlock:!0,allowTurnInto:!0,allowCopyLink:!1,dropdownContainer:this.blockHandleDropdown.nativeElement,onShow:(e,t,i)=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.blockHandleCommit=t,this.blockHandleSelect=i,this.changeDetector.detectChanges()})},onArrowUp:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowDown:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowLeft:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})},onArrowRight:e=>{this.zone.run(()=>{this.blockHandleMenuData=e,this.changeDetector.detectChanges()})}}),pasteImage:{onPaste:e=>{e&&e.length>0&&this.fileAdded(e)}},pasteLinkOverText:!0,pasteInList:!0,pasteInTable:!0,dnd:!0,taskMentions:{sessionId:this.httpSession.getSessionId(),onOpen:()=>{this.taskMention.insertTaskSelector()}},hover:{onClick:(e,t)=>{if(e.blotName===U.a.blotName)this.sharedTaskService.clickTaskLink({id:e.value.task_id},t);else if(e.blotName===R.a.blotName){const i=e.value;this.sharedDocService.clickDocLink(this.injector,i.teamId,i.viewId,i.pageId,t)}},onShow:(e,t)=>{this.hoverData=e,this.hoverRect=t,this.changeDetector.detectChanges(),this.taskPopupDropdown&&this.taskPopupDropdown.open()},onHide:()=>{this.hoverData=null,this.hoverRect=null,this.changeDetector.detectChanges(),this.taskPopupDropdown&&this.taskPopupDropdown.close()}},unfurlUrl:{dropdownContainer:this.unfurlUrlDropdown.nativeElement,getBookmarkEmbedPromise:e=>this.dataService.getMetadataFromUrl(e).toPromise(),getCheckEmbedHeaderPromise:e=>this.embedService.checkHeaders(e).pipe(Object(u.a)(()=>""),Object(b.a)(()=>Object(l.a)("site is not supported"))).toPromise(),onShow:(e,t,i,o,n)=>{this.zone.run(()=>{this.unfurlUrlMenuData=t,this.unfurlUrlonCommit=o,this.unfurlUrlonSelect=n,this.changeDetector.detectChanges()})},onHide:()=>{setTimeout(()=>{this.taskMentionService.updateDocMentions()},100)},onArrowUp:e=>{this.zone.run(()=>{this.unfurlUrlMenuData=e,this.changeDetector.detectChanges()})},onArrowDown:e=>{this.zone.run(()=>{this.unfurlUrlMenuData=e,this.changeDetector.detectChanges()})},onEnter:()=>{}},magicUrl:{unfurlDocLink:!0,embedDocLink:!0,linkHandler:e=>{e&&e.data&&("google"===e.type?this.dataService.googleDriveAddById({type:this.fileParentType,parent:this.fileParentId||this.projectId,file_id:e.data.id}).subscribe(t=>{if(t&&t.success&&t.attachment){const i=this._composeCloudAttachmentData(t.attachment,2);Object(x.b)(this.editor,e.link,[{insert:{attachment:i}}])}}):"custom-task-id"===e.type&&this.dataService.getTask(e.data.customId,!1,!0,!1,{custom_task_ids:"true",team_id:e.data.teamId}).subscribe(t=>{Object(x.b)(this.editor,e.link,[{insert:{task_mention:this.taskMentionService.getTaskMentionObject(t)},attributes:{link:null}}])}))},onCommentClick:(e,t)=>{const i=A.a.value(t.domNode);if(this.viewTaskService.task.value&&i.taskId===this.viewTaskService.task.value.id)return e.preventDefault(),e.stopPropagation(),this.onScrollToComment.emit(i.commentId),!0}},syntax:"undefined"!=typeof hljs&&{languages:y.a},markdown:!!this.sharedData.currentUser.value.markdown_shortcuts&&{formats:{blockquote:!0,"code-block":!0,code:!0,bold:!0,italic:!0,strikethrough:!0}},matcher:!0,emoji:{onQuery:e=>this.emojiDropdown.filter(e).length>0,onShowDialog:(e,t)=>{this.emojiRect=t,this.changeDetector.detectChanges(),this.emojiDropdown.open()},onHideDialog:()=>{this.emojiDropdown.close(),this.emojiRect=null},onKeyPress:e=>this.emojiDropdown.handleKey(e)},mentions:{onQuery:e=>this.mentionSelectorDropdown.filter(e),onShowDialog:(e,t)=>{this.mentionRect=t,this.changeDetector.detectChanges(),this.mentionSelectorDropdown.open()},onHideDialog:()=>{this.mentionSelectorDropdown.close(),this.mentionRect=null},onKeyPress:e=>this.mentionSelectorDropdown.handleKey(e)},linkEmbedding:{resolveLinkData:e=>this.frameHelperService.resolveUrlData(e).toPromise()},slashCommands:!!this.slashCommandSupport&&{id:this.editorId,sessionId:this.httpSession.getSessionId()},floatButton:this.slashCommandSupport}}),this.editor.root.classList.add("focus-visible"),this.editor.clipboard.addMatcher(Node.TEXT_NODE,(e,t)=>(setTimeout(()=>{this.formatLinks()},200),t)),this.editor.on(S.h.SELECTION_CHANGE,e=>{if(e){const t=this.editor.getFormat(e.index),i=this.editor.getContents(e.index,e.length);this.inTable=!!t["table-cell-line"]||!(!t.list||!t.list.cell)||i.ops.some(e=>e.attributes&&(e.attributes["table-cell-line"]||e.attributes["table-col"]))}}),this.taskMentionsModule=this.editor.getModule("taskMentions"),this.slashCommandsModule=this.editor.getModule("slashCommands"),this.syntaxModule=this.editor.getModule("syntax"),this.emojiModule=this.editor.getModule("emoji"),this.mentionsModule=this.editor.getModule("mentions"),this.hoverModule=this.editor.getModule("hover"),Object(D.B)(this.editor),this.editor.theme.tooltip.root.querySelector("input[data-link]").dataset.link=this.commonStringsService.typeUrlAndEnterText;const e=Object(z.f)(this.commentsHelperService.commentToDelta(this.comment));this.editor.setContents(e),this.changeDetector.markForCheck(),setTimeout(()=>{this.editor.focus(),this.editor.setSelection(this.editor.getLength(),0),this.taskMentionService.updateMentions(),this.editorWidth=this.commentEditorContainer.nativeElement.offsetWidth},10)}cancel(){this.comment.comment=this.commentCopy,this.editing=!1,this.destroyEditor(),this.changeDetector.markForCheck(),setTimeout(()=>{this.taskMentionService.updateMentions()},100)}saveText(){const e=this.editor.getContents(),t=this.commentsHelperService.formatCommentForEditor(e,this.userGroups,this.sharedData.currentUser.value.markdown_shortcuts,this.projectMembers);if(!this.quillHelpers.getDeltaLength(e))return this.remove(),void this.cancel();this.helpers.hasNotUploadedAttachments(e)||(this.editing=!1,this.save(t,t),this.comment.comment=t.comment,this.destroyEditor(),this.viewTaskService.onCommentUpdate.emit(this.comment))}remove(){this.viewTaskService.onCommentRemove.emit(this.comment.id),this.onRemove.emit(this.comment),this.setClassList()}undo(){this.commentRestored=!0,this.setClassList(),setTimeout(()=>{this.commentRestored=!1,this.viewTaskService.onCommentUndo.emit(this.comment.id),this.onUndo.emit(this.comment),this.setClassList()},400)}assignToUser(e){const t=e.length?e[0]:null,i=this.fileParentType===I.c.Project||this.fileParentType===I.c.Comment;this.onAssigneeChange.emit({assignee:t,group_assignee:null}),i&&(this.viewTaskService.onCommentAssignToggle.emit(Object.assign(Object.assign({},this.comment),{assignee:t,group_assignee:null})),this.fileParentType!==I.c.Comment&&this.save({assignee:t?t.id:"unassigned"},{assignee:t,group_assignee:null})),this.editor&&this.editing&&this.editor.focus()}assignToGroup(e){const t=e.length?e[0]:null,i=this.fileParentType===I.c.Project||this.fileParentType===I.c.Comment;this.onAssigneeChange.emit({group_assignee:t,assignee:null}),i&&(this.viewTaskService.onCommentAssignToggle.emit(Object.assign(Object.assign({},this.comment),{assignee:null,group_assignee:t})),this.fileParentType!==I.c.Comment&&this.save({group_assignee:t?t.id:"unassigned"},{assignee:null,group_assignee:t})),this.editor&&this.editing&&this.editor.focus()}resolveToggle(){if(this.saving)return;this.saving=!0;const e=!this.comment.resolved;this.comment.resolved_by=null,e&&this.user$.pipe(Object(h.a)(1)).subscribe(e=>{this.comment.resolved_by=e,this.store.dispatch(new W.K({parent:this.parentId,comment:Object.assign({},this.comment),type:this.comment.type,changes:{resolved_by:e},removeResolved:!1})),this.changeDetector.markForCheck()}),this.onToggleResolved.emit({resolved:e}),this.fileParentType!==I.c.Project&&this.fileParentType!==I.c.Comment||this.viewTaskService.onCommentResolveToggle.emit({id:this.comment.id,resolved:e,fromComment:!0}),this.save({resolved:e},{resolved:e}),this.setClassList()}save(e,t){this.onChange.emit({comment:this.comment,payload:e,commentChange:t}),this.saving=!1,this.setClassList()}setClassList(){const e=[],t=this.comment;(t.assignee||t.group_assignee)&&e.push("cu-comment_assigned"),this.saving&&e.push("cu-comment__saving"),this.editing&&e.push("cu-comment_edit"),this.helpers.isItMe(t.user)&&e.push("cu-comment_mine"),this.menuOpen&&e.push("cu-comment_menu"),t.removed&&e.push("cu-comment_removed"),this.commentRestored&&e.push("cu-comment_restored"),t.resolved&&e.push("cu-comment_resolved");const i=this.helpers.isItMe(t.assignee)||t.group_assignee&&t.group_assignee.members.some(e=>e.id===this.sharedData.currentUser.value.id);i&&e.push("cu-comment_to-me"),this.commentMentionsMe(t)&&!i&&e.push("cu-comment_mention"),this.classList=e.join(" "),this.changeDetector.markForCheck()}commentMentionsMe(e){return e.comment.some(e=>"tag"===e.type&&this.helpers.isItMe(e.user))||e.comment.some(e=>{if("group_tag"===e.type&&this.userGroups){const t=this.userGroups.find(t=>t.id===e.group_id);return t&&t.members.some(e=>e.id===this.sharedData.currentUser.value.id)}})}toggleLike(e){this.helpers.isItMe(e.user)||M.k||(this.reactionState=this.hasMyReaction?"normal":"clicked",this.hasMyReaction?this.removeReaction("thumbs_up"):this.addReaction("thumbs_up"))}toggleReaction({reaction:e,toggle:t}){M.k||(t?this.removeReaction(e):this.addReaction(e))}fileAdded(e){this.viewTaskService.onCommentEditorAddFiles.emit(e)}addEmojiToEditor(e){this.editor&&(this.editor.focus(),this.emojiModule.insertEmoji({code:e.unified.toLowerCase(),name:e.name}))}openTaskMentionEditor(e){e.preventDefault(),e.stopPropagation(),this.addTaskMentionToEditor(null,!0)}addTaskMentionToEditor(e=null,t){this.taskMentionsModule.addTaskMentionToEditor(e,t)}dismissTaskMention(){this.taskMentionsModule.dismissTaskMention()}closeTaskMention(){this.taskMentionsModule.closeTaskMention()}openTaskMention(){this.taskMentionsModule.isMentionListOpen=!0}_composeCloudAttachmentData(e,t){return(e=Object.assign({},e)).name||(e.name=e.title),e.type=e.extension,e.source=t,e.date=(new Date).getTime(),e.user=this.sharedData.currentUser.value,e["load-result"]=Object.assign({},e),e}addCloudAttachment(e,t){e=this._composeCloudAttachmentData(e,t),this.addAttachmentToEditor(e)}viewEmail(){this.onViewEmail.emit({attachments:[],canRemove:!1,canRemoveOwn:!1,canEdit:!1,canEditOwn:!1,canChangeDescription:!1,taskId:this.taskId,index:0,hideCoverImage:!0,coverImage:null,allowComments:!1})}previewAttachment(e){const t=this.getAttachmentsFromComment(),i=t.findIndex(t=>t.attachment.id===e.id)||0;-1!==i&&this.attachmentsViewerService.onOpen.emit({attachments:t,canRemove:this.canRemoveAttachments,canRemoveOwn:this.canRemoveOwnAttachments,canEdit:this.canRemoveAttachments,canEditOwn:this.canRemoveOwnAttachments,canChangeDescription:this.canChangeDescription,index:i,taskId:this.taskId,hideCoverImage:this.hideCoverImage,coverImage:this.coverImage,allowComments:this.comment.type!==I.c.Attachment})}formatLinks(){this.taskMentionService.updateMentions()}getEditor(){return this.editor}getEditorContainer(){return this.commentEditorContainer.nativeElement}getPostWithCmd(){return!!this.sharedData.currentUser.value&&this.sharedData.currentUser.value.post_with_cmd}toggleCommentMenu(e){this.menuOpen=e,this.setClassList(),this.editing&&this.cancel()}openUserProfile(e){this.userProfileService.openProfile(e)}onCommentClick(e){if(!this.canEditComment)return;const t=Object(E.a)(e);if("LI"===t[0].tagName&&t[0].getAttribute("data-checked")){const e=t[0],i=e.getAttribute("data-checked"),o=e.getAttribute("data-block-id"),n=this.comment;i&&e.setAttribute("data-checked","true"===i?"false":"true");const s=n.comment;let c=s.findIndex(e=>e.attributes&&e.attributes["block-id"]===o);if(-1===c){let t=e.innerText;t.split(/\r?\n/)&&t.split(/\r?\n/).length>1&&(t=t.split(/\r?\n/)[0]),t.match(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi)&&(t=t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"").trim());const i=s.findIndex(e=>e.text.trim()===t.trim());c=s.findIndex((e,t)=>t>i&&/[\n\r]/g.test(e.text)&&1===e.text.length)}if(-1!==c){if(s[c].attributes&&s[c].attributes.list){const e="true"===i?"unchecked":"checked";s[c].attributes.list="object"==typeof s[c].attributes.list?Object.assign(Object.assign({},s[c].attributes.list),{list:e}):e}this.save({comment:s},{comment:s})}}if("LI"===t[0].tagName&&t[0].getAttribute("data-toggled")){const e=t[0],i=e.getAttribute("data-toggled");i&&e.setAttribute("data-toggled","true"===i?"false":"true")}}checkCanEditComment(){const e=this.sharedData.currentUser.value.id,t=this.comment.assignee?this.comment.assignee.id:null;let i=!1;return(this.comment.user?this.comment.user.id:null)===e&&(i=!0),t&&t===e&&(i=!0),this.comment.group_assignee&&this.comment.group_assignee.members.some(t=>t.id===e)&&(i=!0),i}createAddToInboxMenuItem(){return{id:Gi.AddToInbox,title:this.remindMeText,icon:"cu2-inbox-thin",dropdownTemplate:this.remindMeDatePicker}}calcMenuItems(){var e,t;if(this.menuItems=[],this.allowLink&&this.menuItems.push(Vi),this.allowAddToContent&&this.menuItems.push(Wi),this.allowAddToInbox){const e=this.createAddToInboxMenuItem();this.menuItems.push(e)}!(this.comment&&this.comment.user&&this.comment.user.id===this.sharedData.currentUser.value.id&&this.permissionLevel!==this.readPermission||this.permissions&&this.permissions.can_delete_comments)||this.readonly||(null===(t=null===(e=this.comment)||void 0===e?void 0:e.emails)||void 0===t?void 0:t.length)||this.menuItems.push(Bi)}selectMenuItem(e){switch(e.id){case Xi:this.edit();break;case Hi:this.onCommentReply.emit();break;case Wi.id:this.onAddToContent.emit({delta:new k.a(this.commentsHelperService.commentToDelta(this.comment)),comment:this.comment.comment});break;case Bi.id:this.remove();break;case Vi.id:const e=this.getDeepCommentLink();this.clipboardService.copyFromContent(e)}}getDeepCommentLink(){return`${this.task?Object(q.c)(this.task):window.location.origin+"/t/"+this.taskId}?comment=${this.parentId?this.parentId:this.comment.id}`}emitRemindMeComment(){const e=this.buildRemindMeComment();this.onAddToInbox.emit(e),this.commentSettingsDropdown&&this.commentSettingsDropdown.close()}buildRemindMeComment(){let e;Array.isArray(this.comment.comment)&&(e=this.comment.comment.map(e=>e.text).join(" "),e=e.replace(/[\n\r]/gi,""));const t=this.getDeepCommentLink().toString();return{date:this.remdindMeDueDate,dueDateTime:this.remindMeDueDateTime,url:t,text:e,recurringSettings:this.reminderRecurringSettings}}setRemdindMeDueDate(e){e&&e.valueOf&&(this.remdindMeDueDate=e?e.dueDate.startOf("minute").valueOf():null,this.remindMeDueDateTime=e.dueDateTime)}remdindMeDueDateClose(){(this.remdindMeDueDate||this.reminderRecurringSettings)&&this.emitRemindMeComment()}openSlashCommands(e){e&&(e.preventDefault(),e.stopPropagation()),this.slashCommandsModule.activate()}addMentionToEditor(e){this.editor.focus(),this.mentionsModule.insertMention(e.type,e.data)}openUserMentions(){this.editor.focus();const e=this.editor.getSelection(!0);if(e){const t=e.index;this.editor.updateContents((new k.a).retain(t).insert("@")),this.editor.setSelection(t+1,k.b.sources.API)}}removeHoveredTaskMention(){this.hoverData&&this.hoverModule&&this.hoverModule.removeHoveredMention(this.hoverData.blot),this.taskPopupDropdown&&this.taskPopupDropdown.close()}handleHover(e){this.hoverModule&&this.hoverModule.shownData&&this.hoverModule.onHover(this.hoverModule.shownData,e)}toggleReplies(){this.showReplies=!this.showReplies,this.onShowThread.emit({showThread:this.showReplies})}onCommentDocClick(e){e&&this.sharedDocService.clickDocLink(this.injector,e.teamId,e.viewId,e.pageId)}hideSlashCommand(e="",t=!0){this.embedSlashCommandInfo&&(this.embedSlashCommandInfo.view&&this.domService.removeView(this.embedSlashCommandInfo.view,this.slashCommandContainer),Object(Q.f)(this.embedSlashCommandInfo,e,t,this.httpSession.getSessionId()),this.embedSlashCommandInfo=null)}applySlashCommand({command:e,value:t}){if(!e)return;let i;switch(e.key){case K.ob.key:i=[{task_mention:this.taskMentionService.getTaskMentionObject(t)}," "];break;case K.Eb.key:i=t.group?[{user_group_mention:{id:t.group.id,name:t.group.name,handle:t.group.handle}}," "]:[{user_mention:{id:t.id,name:t.username,email:t.email}}," "];break;case K.d.key:t.group?this.assignToGroup([t.group]):this.assignToUser([t]);break;case K.f.key:t&&"upload"===t.id&&t.data&&t.data.length&&Object(d.a)(100).pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.uploaderService.addFiles(t.data,this.tag)});break;case K.h.key:case K.j.key:case K.i.key:case K.g.key:const o=!1;this.isFreePlan$.pipe(Object(g.a)(t=>t?Object(l.a)({type:"deny",data:null}):(e.key===K.i.key?this.googleDriveService.addGoolgeDriveFile(this.fileParentId||this.projectId,this.fileParentType,o):e.key===K.h.key?this.dropboxService.addDropboxFile(this.fileParentId||this.projectId,this.fileParentType,o):e.key===K.g.key?this.boxService.addBoxFile(this.fileParentId||this.projectId,this.fileParentType,o):this.oneDriveService.addOneDriveFile(this.fileParentId||this.projectId,this.fileParentType,o)).pipe(Object(u.a)(e=>({type:"file",data:e})))),Object(m.a)(this.destroy$)).subscribe(t=>{switch(t.type){case"file":t.data&&this.addCloudAttachment(t.data,e.key===K.i.key?T.a.google:e.key===K.h.key?T.a.dropbox:e.key===K.g.key?T.a.box:T.a.onedrive)}})}i||(i=Object(Q.e)(e,t,!0)),this.hideSlashCommand(i),this.editor&&e.formatCommand&&Object(Q.a)(this.editor,e.key,t)}addAttachmentToEditor(e){this.editor.focus();const t=this.editor.getSelection(!0);if(t){const i=t.index,[o,n]=this.editor.getLine(i),s=o.formats(),c=(new k.a).retain(i);let a=2;"list"===o.statics.blotName?(c.insert("\n",Object.assign({},s)).insert({attachment:e},Object.assign(Object.assign({},s.list),{"wrapper-indent":s.indent,"in-list":s.list.list})),o.next&&"list-block-wrapper"===o.next.statics.blotName&&o.next.children.head&&"attachment"===o.next.children.head.statics.blotName&&(c.delete(1),a=o.next.length()+2)):c.insert({attachment:e}),this.editor.updateContents(c),this.editor.setSelection(i+a,k.b.sources.API)}}destroyEditor(){this.viewTaskService.commentEditorOpen=!1,this.commentEditor.nativeElement.innerHTML="",this.commentEditor.nativeElement.className="cu-comment-editor-content"}addReaction(e){const t=this.comment=Object.assign(Object.assign({},this.comment),{reactions:[...this.comment.reactions,{reaction:e,user:this.sharedData.userData.value.user}]});this.onAddReaction.emit({comment:t,reaction:e})}removeReaction(e){const t=this.comment=Object.assign(Object.assign({},this.comment),{reactions:this.comment.reactions.filter(t=>t.reaction!==e||t.reaction===e&&t.user.id!==this.sharedData.userData.value.user.id)});this.onRemoveReaction.emit({comment:t,reaction:e})}isThumbsUp(e){return"thumbs_up"===e.reaction||e.reaction.toLowerCase()===G.b}reactionsChanged(e){const t=(e.reactions||[]).filter(this.isThumbsUp).filter(t=>e.user.id!==t.user.id);this.thumbsUpCount=t.length,this.reactedUsersTooltip=t.map(e=>""+this.helpers.getUserName(e.user)).join("\n"),this.hasMyReaction=this.sharedData.userData.value&&t.some(e=>e.user.id===this.sharedData.userData.value.user.id)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(Z.a),s.Wb(Y.a),s.Wb(J.b),s.Wb(ee.a),s.Wb(te.Store),s.Wb(ie.a),s.Wb(s.m),s.Wb(s.H),s.Wb(oe.a),s.Wb(ne.a),s.Wb(se.a),s.Wb(ce.a),s.Wb(s.h),s.Wb(ae.a),s.Wb(re.a),s.Wb(le.UserProfileService),s.Wb(s.m),s.Wb(de.a),s.Wb(ue.a),s.Wb(me.c),s.Wb(pe.a),s.Wb(he.a),s.Wb(s.t),s.Wb(s.B),s.Wb(fe.a),s.Wb(be.a),s.Wb(ge.a),s.Wb(_e.a),s.Wb(ve.a),s.Wb(ke.a),s.Wb(ye.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-task-comment"]],viewQuery:function(e,t){if(1&e&&(s.jd(Je,1),s.jd(et,1),s.jd(tt,1),s.jd(it,1),s.jd(ot,1),s.jd(nt,1),s.jd(st,1),s.jd(ct,3),s.jd(at,3),s.jd(rt,3),s.jd(lt,1),s.jd(dt,3,s.U),s.jd(ut,1),s.jd(mt,3),s.jd(pt,1)),2&e){let e;s.Qc(e=s.rc())&&(t.dropdown=e.first),s.Qc(e=s.rc())&&(t.commentEditorContainer=e.first),s.Qc(e=s.rc())&&(t.commentEditor=e.first),s.Qc(e=s.rc())&&(t.taskMention=e.first),s.Qc(e=s.rc())&&(t.emojiDropdown=e.first),s.Qc(e=s.rc())&&(t.mentionSelectorDropdown=e.first),s.Qc(e=s.rc())&&(t.taskPopupDropdown=e.first),s.Qc(e=s.rc())&&(t.unfurlUrlDropdown=e.first),s.Qc(e=s.rc())&&(t.blockHandleDropdown=e.first),s.Qc(e=s.rc())&&(t.slashCommandTemplate=e.first),s.Qc(e=s.rc())&&(t.slashCommand=e.first),s.Qc(e=s.rc())&&(t.slashCommandContainer=e.first),s.Qc(e=s.rc())&&(t.cloudAttachments=e.first),s.Qc(e=s.rc())&&(t.remindMeDatePicker=e.first),s.Qc(e=s.rc())&&(t.commentSettingsDropdown=e.first)}},inputs:{editorId:"editorId",comment:"comment",parentId:"parentId",hideCoverImage:"hideCoverImage",alwaysShowThread:"alwaysShowThread",showFullConversation:"showFullConversation",showSubjectAtTop:"showSubjectAtTop",taskId:"taskId",coverImage:"coverImage",assignedComments:"assignedComments",projectMembers:"projectMembers",permissions:"permissions",permissionLevel:"permissionLevel",readonly:"readonly",projectId:"projectId",canAddAttachments:"canAddAttachments",canRemoveAttachments:"canRemoveAttachments",canRemoveOwnAttachments:"canRemoveOwnAttachments",canChangeDescription:"canChangeDescription",fileParentId:"fileParentId",fileParentType:"fileParentType",lazyLoadEntities:"lazyLoadEntities",slashCommandSupport:"slashCommandSupport",disableKeySubmit:"disableKeySubmit",allowReply:"allowReply",allowLink:"allowLink",allowThread:"allowThread",allowAddToContent:"allowAddToContent",allowAddToInbox:"allowAddToInbox",showAnyone:"showAnyone",threadTemplate:"threadTemplate",headerTemplate:"headerTemplate",selectedTextDelta:"selectedTextDelta",showUnassign:"showUnassign",weights:"weights",isEmail:"isEmail",fromAutomation:"fromAutomation",allowReassign:"allowReassign",allowReaction:"allowReaction",showToolbar:"showToolbar",userGroups:"userGroups",taskUserGroups:"taskUserGroups",followers:"followers",assignees:"assignees",task:"task",showAddFollowers:"showAddFollowers",activeReply:"activeReply",showReplyToEmailWithCollapse:"showReplyToEmailWithCollapse",ignoreSlashCommands:"ignoreSlashCommands",searchString:"searchString",selectedFilterAssignedCommentUserIds:"selectedFilterAssignedCommentUserIds",showReactions:"showReactions"},outputs:{onReplyToEmail:"onReplyToEmail",onViewEmail:"onViewEmail",onRemove:"onRemove",onUndo:"onUndo",onChange:"onChange",onAttachmentEdited:"onAttachmentEdited",onAddReaction:"onAddReaction",onRemoveReaction:"onRemoveReaction",onAssigneeChange:"onAssigneeChange",onToggleResolved:"onToggleResolved",onCommentReply:"onCommentReply",onAddToContent:"onAddToContent",onAddToInbox:"onAddToInbox",onScrollToComment:"onScrollToComment",onSelectedTextClick:"onSelectedTextClick",onShowThread:"onShowThread",onNumberClick:"onNumberClick",onShowAutomation:"onShowAutomation",onCommentBodyClick:"onCommentBodyClick"},features:[s.Gb],decls:64,vars:72,consts:function(){let e,t,i,o,n,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,x,I,T,C,D;return e=$localize`:@@common_undo␟4f26c54d5c3edadf92756d7d3ce466dde1f01e2a␟5775346636203685655:Undo`,t=$localize`:@@cu-comment__undo_email-deleted␟dcb63169a0837fd0c1f550a05dd446b9cbbdfc01␟2447775453688628213:Email deleted.`,i=$localize`:@@cu-comment__undo_comment-deleted␟7f37a4b962982d3e0e1ce1711999d24592d0db36␟7837272126865175984:Comment deleted.`,o=$localize`:@@cu-comment__author_name-and-source␟2d3a2f1d217ada34d646e7be7d8f0fe643b55760␟813058055416691201:${"\ufffd#4\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: (via Automation)${"[\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*7:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN: commented${"\ufffd*7:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: (via email)${"[\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*7:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:: `,o=s.lc(o),n=$localize`:@@cu-task-comment__tooltip-msg_see-who-replies␟175371e8bcba620e113a0293f9a9dc2741e8348f␟7016369272503907570:See who is following replies to this comment`,c=$localize`:@@common_followers␟14c6e2a03c11271aab33507e12e9c58479ce36cc␟4078799720887539602: Followers `,a=$localize`:@@common_edit␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,r=$localize`:@@cu-comment__link-text_view-email␟b64e469a8316d0048089fc7b2be9904c5d8bd4de␟2654290140724302827:View email`,l=$localize`:@@common_assign␟1da6e5076d6a884a4241733942825718559f3075␟584754872792429089:Assign`,d=$localize`:@@common_resolve␟6a9823e2a3e14cb82725a2c37a5499564dccdbc3␟6139619444091901166: Resolve `,u=$localize`:@@common_resolved␟7ed548165ffb96f213c87d35ef002cc01aeb6be0␟5104466330306004349:Resolved `,m=$localize`:@@common_resolved␟9f39cafaf83f34d5ffc39924904d0661c6672aef␟7844633490317503918: Resolved `,p=$localize`:@@common_reply␟875eaf64dc7f3e2c9a9ae2ad7a666661502888d8␟4652822939796156076: Reply `,h=$localize`:unread
                comments@@cu-task-comment__lip-toggle-text_unread-thread-count␟2c154d60fca42e5cf1f12e11c27ba5c8ba25b1fb␟5632077263470418390: ${"\ufffd0\ufffd"}:INTERPOLATION: unread `,f=$localize`:␟f9520bcdab0acce23bbe0f520f29dbf2043d6669␟139837204463633604:{VAR_PLURAL, plural, =1 {mention} other {mentions}}`,f=s.lc(f,{VAR_PLURAL:"\ufffd1\ufffd"}),b=$localize`:unread
                mentions@@cu-task-comment__lip-toggle-text_unread-mentions-count␟bdb6868102302fbad7385b4a92ca662e9e431809␟2061662135756627234: ${"\ufffd0\ufffd"}:INTERPOLATION: unread ${f}:ICU: `,g=$localize`:␟dae6a912487ed9858673dbb7252a467c603428bf␟5826398650317330247:{VAR_PLURAL, plural, =1 {reply} other {replies}}`,g=s.lc(g,{VAR_PLURAL:"\ufffd1\ufffd"}),_=$localize`:@@cu-task-comment__lip-toggle-text_thread-reply-count-indicator␟da2287aeb1bec09c5aac381fa0d14bd88eb89203␟922138339418177149: ${"\ufffd0\ufffd"}:INTERPOLATION: ${g}:ICU: `,v=$localize`:@@common_collapse␟fc7ac8311fed3ad233564631de6d1dc52eb358e5␟1674877455836659234: Collapse `,k=$localize`:@@common_assign-comment␟245125011c1378675d21477025e52b165da54608␟3106305167251453812:Assign comment`,y=$localize`:@@common_comment-mention-user␟2f57ef20ce34b00ea06b820f4ad05140bb66538a␟6794392210594979907:Mention someone (@)`,w=$localize`:@@common_comment-mention-task␟7954cd6b141a0a128f2a6922820fd5021f4029c7␟256680819893693331:Mention a task (@@)`,x=$localize`:@@common_add-emoji␟719e25546c05ab67ee05d2dc62484b4ca100fe38␟8905152704882411055:Add emoji`,I=$localize`:@@common_cancel␟fb8aad312b72bbb7e5a1e2cc0b55fae8962bf0fb␟8699434297868700883: Cancel `,T=$localize`:@@common_save␟368b817b7cc89a1705d9ac752da4ddda15d42ae8␟1340158735829077894: Save `,C=$localize`:@@common_slash-commands␟1ff84cdf6319b192b202921fa5944f765be94c29␟6054215489780104097:Slash commands (/)`,D=$localize`:@@common_cant-change-recurring-settings-offline␟1062e622871911b8afcfac5552704b260772dac7␟8711960159416833200:You cannot changing the recurring setting when offline
    `,[[1,"cu-comment",3,"ngClass"],[1,"cu-comment__aside"],["modifier","cu-avatar_chat",3,"user","cuUserProfileLink",4,"ngIf","ngIfElse"],["emailIcon",""],["class","comment-reaction",3,"ngClass","cuTooltip","click",4,"ngIf"],[1,"cu-comment__body"],[1,"cu-comment__body-container"],[1,"cu-comment__undo"],[4,"ngIf","ngIfElse"],["isComment",""],["cuLink","",1,"cu-comment__undo-link",3,"click"],e,["class","cu-comment__header",3,"cu-comment__header-bottom",4,"ngIf"],["class","cu-comment__quote",3,"innerHTML","click",4,"ngIf"],[1,"cu-comment__text"],[1,"cu-comment__text-edit","cu-comment-editor-wrapper"],["commentEditorContainer",""],[1,"cu-comment__editor","cu-comment-editor-content"],["commentEditor",""],["unfurlUrlDropdown",""],[3,"menu","handleCommit","handleSelect"],["blockHanleDropdown",""],[3,"showInfo","showFullConversation","email","emailAttachments",4,"ngIf","ngIfElse"],["showNormalComment",""],["class","cu-comment__footer",4,"ngIf"],["class","cu-comment__lip",3,"cu-comment__lip_reply-expanded","cu-comment__lip_empty",4,"ngIf"],["class","cu-comment__reply",4,"ngIf"],["class","comment-bar__footer comment-bar__footer_editor",3,"ngClass",4,"ngIf"],["position","top",3,"defaultProjectId","taskId","onSelect","onDismiss","onOpen","onClose",4,"ngIf"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownFromRect","dropdownRightEdgePadding","dropdownPlacement"],["taskPopupDropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],[3,"users","meUser","weights","fromRect","userGroups","subcategory","task","isGuest","taskUserGroups","onSelect"],["mentionSelectorDropdown",""],["remindMeDatePickerListItem",""],["remindMeDatePicker",""],["popTemplate",""],["attachmentsTemplate",""],["taskPopupTemplate",""],["slashCommandContainer",""],["slashCommandTemplate",""],["modifier","cu-avatar_chat",3,"user","cuUserProfileLink"],[1,"cu-email-comment__avatar-container"],[1,"cu-email-comment__avatar"],["icon","cu2-envelope-light",1,"cu-email-comment__avatar-mail"],["modifier","cu-email-comment__avatar-user",3,"user","cuUserProfileLink"],[1,"comment-reaction",3,"ngClass","cuTooltip","click"],[1,"comment-reaction__like"],["icon","like",1,"comment-reaction__like-icon"],[1,"comment-reaction__like-spark"],["class","comment-reaction__counter",4,"ngIf"],[1,"comment-reaction__counter"],t,i,[1,"cu-comment__header"],[1,"cu-comment__meta"],["normalAuthorDisplay",""],["class","cu-comment__author",3,"ngClass",4,"ngIf"],["class","cu-comment__emails-read cu-comment__emails-read-main",3,"cuTooltip",4,"ngIf"],[1,"cu-comment__date"],[1,"cu-comment__toolbar"],["class","cu-comment__emails-read cu-comment__emails-read-toolbar",3,"cuTooltip","cu-comment__emails-read-toolbar-mr",4,"ngIf"],[3,"users","userGroups","selectedUsers","selectedUserGroups","modifier","showAnyone","multiChoice","subcategory","task","onClose","onOpen","onChange","onUserGroupsChanged",4,"ngIf"],["class","cu-comment__link cu-comment__link_edit","cuLink","",3,"click",4,"ngIf"],[4,"ngIf"],["class","cu-datetime-input__dropdown",3,"items","onSelect","onClose","onOpen",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cu-comment__number",3,"click",4,"ngIf"],[1,"cu-comment__author",3,"ngClass"],o,[3,"cuUserProfileLink","automation","click"],[1,"cu-comment__number",3,"click"],[1,"cu-comment__emails-read","cu-comment__emails-read-main",3,"cuTooltip"],[3,"icon"],[1,"cu-comment__emails-read","cu-comment__emails-read-toolbar",3,"cuTooltip"],[3,"users","userGroups","selectedUsers","selectedUserGroups","modifier","showAnyone","multiChoice","subcategory","task","onClose","onOpen","onChange","onUserGroupsChanged"],["threadFollowersList",""],["cuTooltip",n,1,"cu-comment__toolbar-followers"],["icon","cu2-eye-2"],[1,"cu-comment__toolbar-followers-text"],c,["cuLink","",1,"cu-comment__link","cu-comment__link_edit",3,"click"],["icon","edit-simple",1,"cu-comment__link-icon"],[1,"cu-comment__link-text"],a,["icon","cu2-email-3",1,"cu-comment__link-icon","cu-comment__link-icon-no-stroke"],r,[3,"users","selectedUsers","modifier","showUnassign","showAnyone","userGroups","selectedUserGroups","subcategory","task","onChange","onUserGroupsChanged","onClose","onOpen"],["cuLink","",1,"cu-comment__link","cu-comment__link_assign"],["icon","user",1,"cu-comment__link-icon"],l,[1,"cu-datetime-input__dropdown",3,"items","onSelect","onClose","onOpen"],["commentSettingsDropdown",""],["icon","cu2-ellipsis",1,"cu-comment__settings"],[1,"cu-comment__quote",3,"innerHTML","click"],[3,"showInfo","showFullConversation","email","emailAttachments"],["class","cu-comment__text-content",3,"taskId","weights","comment","lazyLoadEntities","allowReply","followers","assignees","searchQuery","onAttachmentPreview","onCommentClick","onCommentReply","onCommentMentionClick","onCommentDocClick","click",4,"ngIf"],[1,"cu-comment__text-content",3,"taskId","weights","comment","lazyLoadEntities","allowReply","followers","assignees","searchQuery","onAttachmentPreview","onCommentClick","onCommentReply","onCommentMentionClick","onCommentDocClick","click"],[1,"cu-comment__footer"],[1,"cu-comment-assignee"],["class","cu-comment-assignee__icon icon",4,"ngIf"],[1,"cu-comment-assignee__content"],[1,"cu-comment-assignee__text",3,"ngClass"],["assignName",""],["class","cu-comment-assignee__resolve",3,"click",4,"ngIf","ngIfElse"],["noResolve",""],[1,"cu-comment-assignee__icon","icon"],["width","24","height","24","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],["d","M22.3 18.2c1-1.8 1.7-4 1.7-6.2 0-6.6-5.4-12-12-12S0 5.4 0 12s5.4 12 12 12c2.3 0 4.5-.7 6.4-1.8L24 24l-1.7-5.8z",1,"icon-comment-resolved__bkg"],["d","M11.7 16.3L18 10v-.8l-1.2-1-.4-.2c-.2 0-.3 0-.5.2L11 13l-2-2.2c-.2-.2-.4-.2-.5-.2-.2 0-.4 0-.5.2l-1 1-.2.4c0 .2 0 .4.2.5l3.6 3.6.4.2c.2 0 .4 0 .5-.2z","fill","#FFF",1,"icon-comment-resolved__check"],[3,"users","selectedUsers","modifier","showUnassign","showAnyone","userGroups","selectedUserGroups","subcategory","task","onChange","onUserGroupsChanged"],[1,"cu-comment-assignee__user"],[1,"cu-comment-assignee__user","cu-comment-assignee__user_readonly",3,"ngClass"],[1,"cu-comment-assignee__resolve",3,"click"],["class","cu-comment-assignee__resolve-label",4,"ngIf"],[1,"cu-comment-assignee__resolve-box",3,"ngClass"],[1,"cu-comment-assignee__resolve-box-mask"],[1,"cu-comment-assignee__resolve-box-check"],[1,"cu-comment-assignee__resolve-box-container"],[1,"cu-comment-assignee__resolve-box-line1"],[1,"cu-comment-assignee__resolve-box-line2"],[1,"cu-comment-assignee__resolve-label"],d,u,[1,"cu-comment-assignee__resolve","no-permission"],["class","cu-comment-assignee__resolve-box cu-comment-assignee__resolve-box_resolved",4,"ngIf"],m,[1,"cu-comment-assignee__resolve-box","cu-comment-assignee__resolve-box_resolved"],[1,"cu-comment__lip"],[3,"comment","user","toggleReaction",4,"ngIf"],[3,"comment","user","toggleReaction"],["class","cu-comment__lip-toggle ignore-click-out",3,"click",4,"ngIf"],["class","cu-comment__lip-toggle",3,"click",4,"ngIf"],[1,"cu-comment__lip-toggle","ignore-click-out",3,"click"],[1,"cu-comment__lip-toggle-text"],p,[1,"cu-comment__lip-toggle",3,"click"],["class","cu-comment__lip-toggle-text ignore-click-out",4,"ngIf"],["class","cu-comment__lip-toggle-user-group",3,"users","modifier","avatarSize",4,"ngIf"],[1,"cu-comment__lip-toggle-text","ignore-click-out"],h,[1,"cu-comment__lip-toggle-divider"],["icon","comment-bar-mentions",1,"cu-comment__lip-toggle-icon"],b,_,[1,"cu-comment__lip-toggle-user-group",3,"users","modifier","avatarSize"],[1,"cu-comment__reply"],["class","cu-comment__reply-toggle cu-comment__reply-toggle_centered",3,"click",4,"ngIf"],[1,"cu-comment__reply-toggle","cu-comment__reply-toggle_centered",3,"click"],[1,"cu-comment__reply-toggle-text","cu-comment__reply-toggle-text_collapse"],v,[1,"comment-bar__footer","comment-bar__footer_editor",3,"ngClass"],[1,"comment-bar__controls"],[3,"users","selectedUsers","showUnassign","userGroups","selectedUserGroups","subcategory","task","onChange","onUserGroupsChanged"],["class","comment-bar__control comment-bar__control_assign","cuTooltip",k,"icon","comment-bar-assignee",4,"ngIf"],[3,"cuTooltip","user",4,"ngIf"],[3,"cuTooltip","group","bordered","avatarSize",4,"ngIf"],[1,"comment-bar-mentions",3,"click"],["icon","comment-bar-mentions","cuTooltip",y,1,"comment-bar-mentions__icon"],[1,"comment-bar-btn",3,"click"],["icon","comment-bar-task","cuTooltip",w,1,"comment-bar-btn__icon"],[3,"onSelect"],["cuTooltip",x,"icon","comment-bar-emoji",1,"emoticons__toggle"],[3,"fromRect","onSelect"],["emojiDropdown",""],["class","comment-bar-slash",3,"click",4,"ngIf"],[1,"comment-bar__delimiter"],[3,"ngTemplateOutlet"],[1,"comment-bar__btns"],[1,"comment-bar__cancel-btn",3,"click"],I,[1,"comment-bar__send-btn",3,"click"],T,["cuTooltip",k,"icon","comment-bar-assignee",1,"comment-bar__control","comment-bar__control_assign"],[3,"cuTooltip","user"],[3,"cuTooltip","group","bordered","avatarSize"],[1,"comment-bar-slash",3,"click"],["icon","comment-bar-slash","cuTooltip",C,1,"comment-bar-slash__icon"],["position","top",3,"defaultProjectId","taskId","onSelect","onDismiss","onOpen","onClose"],["taskMention",""],[3,"item"],["recurringReadonlyTooltip",D,3,"adjustStyleForInboxReminder","dateTemplate","dates","isSaveText","showStart","dualDate","dateFormat","militaryTime","startHour","showCreateNewOption","showOnlyRecurIcon","quickDone","recurringReadonly","onOpen","onChange","onRecurringChange","onClose"],[3,"parentId","type","permanent","onCloudAdded","onFilesSelected"],[1,"comment-bar-uploader","comment-bar-uploader_toggle"],["icon","comment-bar-paperclip",1,"comment-bar-uploader__icon"],[3,"taskId","onRemove","onEnter","onLeave",4,"ngIf"],[3,"taskId","onRemove","onEnter","onLeave"],[3,"alwaysVisible","dropdownPlacement","allowedCommands","currentValues","options","meUser","users","weights","userGroups","team","applyCommand","cancelCommand"],["slashCommand",""]]},template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.bd(2,ht,1,2,"cu-avatar",2),s.bd(3,ft,4,2,"ng-template",null,3,s.cd),s.bd(5,_t,16,12,"div",4),s.vc(6,"itsme"),s.vc(7,"async"),s.vc(8,"async"),s.bc(),s.cc(9,"div",5),s.cc(10,"div",6),s.cc(11,"div",7),s.bd(12,vt,2,0,"ng-container",8),s.bd(13,kt,2,0,"ng-template",null,9,s.cd),s.cc(15,"a",10),s.qc("click",function(){return t.undo()}),s.gc(16,11),s.bc(),s.bc(),s.bd(17,Lt,21,25,"div",12),s.bd(18,Nt,2,3,"div",13),s.cc(19,"div",14),s.cc(20,"div",15,16),s.Xb(22,"div",17,18),s.cc(24,"div",null,19),s.Xb(26,"cu-unfurl-url-menu",20),s.bc(),s.cc(27,"div",null,21),s.Xb(29,"cu-block-handle-menu",20),s.bc(),s.bc(),s.bd(30,zt,1,4,"cu-email-reply",22),s.bd(31,Gt,1,1,"ng-template",null,23,s.cd),s.bc(),s.bd(33,ai,18,20,"div",24),s.bc(),s.bd(34,bi,4,8,"div",25),s.vc(35,"async"),s.bd(36,wi,3,2,"div",26),s.bd(37,Oi,27,28,"div",27),s.bc(),s.bc(),s.bd(38,Si,2,2,"cu-task-mention",28),s.cc(39,"div",29,30),s.Xb(41,"div",31),s.bd(42,Pi,2,1,"div",32),s.bc(),s.cc(43,"cu-mention-selector-dropdown",33,34),s.qc("onSelect",function(e){return t.addMentionToEditor(e)}),s.vc(45,"membersToUsers"),s.vc(46,"async"),s.vc(47,"async"),s.vc(48,"async"),s.vc(49,"async"),s.bc(),s.bd(50,Ai,1,3,"ng-template",null,35,s.cd),s.bd(52,Ui,4,20,"ng-template",null,36,s.cd),s.bd(54,Ri,1,0,"ng-template",null,37,s.cd),s.bd(56,Mi,3,3,"ng-template",null,38,s.cd),s.bd(58,Li,1,1,"ng-template",null,39,s.cd),s.Yb(60,null,40),s.bd(62,zi,5,18,"ng-template",null,41,s.cd)),2&e){const e=s.Rc(4),i=s.Rc(14),o=s.Rc(32);let n=null,c=null,a=null;s.Ob("cu-comment-uneditable",!t.canEditComment)("cu-comment__email",t.isEmail),s.Dc("ngClass",t.classList),s.Jb("data-comment-id",t.comment.id),s.Ib(2),s.Dc("ngIf",!t.isEmail)("ngIfElse",e),s.Ib(3),s.Dc("ngIf",!t.reactionsClickappEnabled&&!(s.wc(6,53,t.comment.user)&&0===t.thumbsUpCount)&&(!s.wc(7,55,t.permissions$)||(null==(n=s.wc(8,57,t.permissions$))?null:n.like_comments)||t.isSharingApp)&&(!t.readonly||t.isSharingApp)&&t.allowReaction),s.Ib(4),s.Ob("cu-comment__body-highlight",t.activeReply)("cu-comment__body-email",t.isEmail),s.Ib(1),s.Ob("cu-comment__body-container_toolbar",t.showToolbar&&!t.isSharingApp)("cu-comment__body-container_email",t.isEmail),s.Ib(2),s.Dc("ngIf",t.isEmail)("ngIfElse",i),s.Ib(5),s.Dc("ngIf",!t.editing),s.Ib(1),s.Dc("ngIf",t.selectedTextDelta||t.comment.highlight_text),s.Ib(4),s.Jb("sc-id",t.editorId),s.Ib(2),s.ad("display",t.editing?null:"none"),s.Ib(2),s.Dc("menu",t.unfurlUrlMenuData)("handleCommit",t.unfurlUrlonCommit)("handleSelect",t.unfurlUrlonSelect),s.Ib(1),s.ad("display",t.editing?null:"none"),s.Ib(2),s.Dc("menu",t.blockHandleMenuData)("handleCommit",t.blockHandleCommit)("handleSelect",t.blockHandleSelect),s.Ib(1),s.Dc("ngIf",!(null!=t.comment&&null!=t.comment.comment&&t.comment.comment.length)&&(null==t.comment||null==t.comment.emails?null:t.comment.emails.length))("ngIfElse",o),s.Ib(3),s.Dc("ngIf",(t.comment.assignee||t.comment.group_assignee)&&!t.editing),s.Ib(1),s.Dc("ngIf",t.showReactions&&!((null==t.comment||null==t.comment.comment||!t.comment.comment.length)&&null!=t.comment&&null!=t.comment.emails&&t.comment.emails.length)&&t.allowReaction&&t.reactionsClickappEnabled&&s.wc(35,59,t.reactionsAllowed$)||!(null!=t.comment&&t.comment.removed)&&t.allowThread&&!t.editing&&((null==t.comment?null:t.comment.threaded_replies)||t.permissionLevel!==t.readPermission&&!t.readonly)&&!t.isEmail),s.Ib(2),s.Dc("ngIf",!(null!=t.comment&&t.comment.removed)&&t.allowThread&&!t.editing&&((null==t.comment?null:t.comment.threaded_replies)||t.permissionLevel!==t.readPermission&&!t.readonly)),s.Ib(1),s.Dc("ngIf",t.editing),s.Ib(1),s.Dc("ngIf",t.editing),s.Ib(1),s.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!1)("dropdownFromRect",t.hoverRect)("dropdownRightEdgePadding",10)("dropdownPlacement",s.Gc(71,qi)),s.Ib(4),s.Dc("users",s.wc(45,61,t.projectMembers))("meUser",s.wc(46,63,t.sharedData.currentUser))("weights",t.weights)("fromRect",t.mentionRect)("userGroups",t.userGroups)("subcategory",null==(c=s.wc(47,65,t.task$))?null:c.subcategory)("task",s.wc(48,67,t.task$))("isGuest",(null==(a=s.wc(49,69,t.sharedData.compatCurrentTeam$))?null:a.role)===t.UserRole.GUEST)("taskUserGroups",t.taskUserGroups)}},directives:[we.o,we.q,xe.a,Ie.a,Te.b,Ce.a,De.a,Oe.a,Se.a,Ee.a,Pe.a,je.a,we.x,Ae.a,$e.a,Ue.a,Re.a,G.a,Me.a,Fe.a,Le.a,Ne.a,ze.a,qe.a,Ge.a,Ve.a,Be.a,Xe.a,He.b],pipes:[We.a,we.b,Ke.a,Qe.a,Ze.a,Ye.a],encapsulation:2,data:{animation:[C.c,C.d]},changeDetection:0}),e})()},hUS4:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("XNiG"),n=i("xgIS"),s=i("1Ykd"),c=i("pLZG"),a=i("1G5W"),r=i("fXoL");let l=(()=>{class e{constructor(e,t){this.element=e,this.zone=t,this.destroy$=new o.a,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.offsetLeft=0,this.verticalScrollingDetection=!0,this.horizontalScrollingDetection=!1,this.scrollDetectorDisabled=!1,this.onReachTop=new r.o,this.onReachRight=new r.o,this.onReachBottom=new r.o,this.onReachLeft=new r.o,this.onLeaveTop=new r.o}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{Object(n.a)(this.element.nativeElement,"scroll",{passive:!0}).pipe(Object(s.a)(300),Object(c.a)(()=>!this.scrollDetectorDisabled),Object(a.a)(this.destroy$)).subscribe(e=>{const t=e.target||this.element.nativeElement;if(this.verticalScrollingDetection){const e=t.scrollTop,i=t.scrollHeight,o=t.clientHeight;this.onReachTop.observers.length>0&&e<=this.offsetTop&&this.zone.run(()=>this.onReachTop.emit()),this.onLeaveTop.observers.length>0&&e>this.offsetTop&&this.zone.run(()=>this.onLeaveTop.emit()),this.onReachBottom.observers.length>0&&i-(e+o)<=this.offsetBottom&&this.zone.run(()=>this.onReachBottom.emit())}if(this.horizontalScrollingDetection){const e=t.scrollLeft,i=t.scrollWidth,o=t.clientWidth;this.onReachLeft.observers.length>0&&e<=this.offsetLeft&&this.zone.run(()=>this.onReachLeft.emit()),this.onReachRight.observers.length>0&&i-(e+o)<=this.offsetRight&&this.zone.run(()=>this.onReachRight.emit())}})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(r.m),r.Wb(r.B))},e.\u0275dir=r.Rb({type:e,selectors:[["","cuScrollDetector",""]],inputs:{offsetTop:"offsetTop",offsetRight:"offsetRight",offsetBottom:"offsetBottom",offsetLeft:"offsetLeft",verticalScrollingDetection:"verticalScrollingDetection",horizontalScrollingDetection:"horizontalScrollingDetection",scrollDetectorDisabled:"scrollDetectorDisabled"},outputs:{onReachTop:"onReachTop",onReachRight:"onReachRight",onReachBottom:"onReachBottom",onReachLeft:"onReachLeft",onLeaveTop:"onLeaveTop"}}),e})()},hWeV:function(e,t,i){"use strict";i.d(t,"b",function(){return g}),i.d(t,"a",function(){return _.a});var o=i("csDc"),n=i("ofXK"),s=i("KyjD"),c=i("Dvla"),a=i("wRSl"),r=i("K0KF"),l=i("gb9A"),d=i("1M0N"),u=i("mcWp"),m=i("bx+h"),p=i("FWqE"),h=i("XZJ2"),f=i("0x6g"),b=i("fXoL");let g=(()=>{class e{}return e.\u0275mod=b.Ub({type:e}),e.\u0275inj=b.Tb({factory:function(t){return new(t||e)},imports:[[n.c,h.b,s.a,c.b,a.a,r.a,l.a,d.a,u.a,o.a,p.a,m.a,f.a]]}),e})();var _=i("oB/R")},hfeG:function(e,t,i){"use strict";i.d(t,"a",function(){return C});var o=i("l7P3"),n=i("xJzU"),s=i("Ll/8"),c=i("2Vo4"),a=i("itXk"),r=i("lJxs"),l=i("SxV6"),d=i("pLZG"),u=i("CgHv"),m=i("yR4P"),p=i("f0Wu"),h=i("7Cbv"),f=i("hN3A"),b=i("P9u+"),g=i("m2rH"),_=i("4F4K"),v=i("12P9"),k=i("c3rA"),y=i("I1n0"),w=i("eDEC"),x=i("fXoL"),I=i("76Cs"),T=i("jJW4");let C=(()=>{class e{constructor(e,t,i){this.store=e,this.taskService=t,this.sharedData=i,this.isDragging$=new c.a(!1),this.statusesMap$=new c.a({}),this.teamUsers$=this.store.pipe(Object(o.select)(k.getMembers),Object(r.a)(e=>e&&e.map(e=>e.user))),this.usersMap$=Object(a.a)([this.store.select(y.J),this.teamUsers$]).pipe(Object(r.a)(([e,t])=>Object.keys(e).reduce((t,i)=>(t["task_"+i]=e[i],t),{reminder:t})))}createReminder(e,t,i){const o=i.data.assignees&&i.data.assignees.length&&i.data.assignees[0],n={id:Object(h.a)(),userid:o,title:i.data.name,end_date:i.data.start_date,end_date_time:i.data.start_date_time,due_date:i.data.due_date||String(Object(m.e)().valueOf()),due_date_time:i.data.due_date_time,attachments:i.data.attachments,recurring_settings:i.data.recurring_settings,minutes_before_to_notify:i.data.minutes_before_to_notify,should_send_mobile_notif:i.data.should_send_mobile_notif,should_send_browser_notif:i.data.should_send_browser_notif,date_created:String(Date.now())};this.store.dispatch(Object(f.e)({tab:t,userId:e.id,data:n,isRetry:!1}))}editTask(e,t,i){if(e&&t)switch(i.action){case n.a.Remove:if(i.task.reminder){const o=i.task;this.store.dispatch(Object(f.p)({tab:t,userId:e.id,id:i.task.id,isPending:o.pending}));const n={description:$localize`:@@cu-inbox-service__undo-item_reminder-deleted:Deleted ${o.title.substring(0,30)}:reminderTitle:`,type:"itemUndo",undoReminder:{reminder:o,method:"delete"},deleteAction:!0};this.sharedData.addUndoItem(n)}else this.taskService.remove(i.task,!0);break;case n.a.Assignee:if(i.task.reminder){const o=i.data&&i.data.length&&i.data[0]||e,n=(new Date).valueOf(),s=!i.task.due_date||i.task.due_date<n?n:i.task.due_date;this.store.dispatch(Object(f.g)({tab:t,userId:e.id,id:i.task.id,data:{user:o,userid:o?o.id:null,due_date:s}}))}else this.changeTaskAssignees(e,t,{task:i.task,assignees:i.data});break;case n.a.GroupAssignee:i.task.reminder||this.changeTaskGroupAssignees(e,t,{task:i.task,assignees:i.data});break;case n.a.Date:if(i.task.reminder){const o=i.data;let n;n=o.dueDate&&!isNaN(o.dueDate.valueOf())?p(o.dueDate).startOf("minute").valueOf():"none";const s={due_date:"none"===n?null:n,due_date_time:o.dueDateTime};o.sendRequest&&this.store.dispatch(Object(f.g)({tab:t,userId:e.id,id:i.task.id,data:s}))}else this.changeTaskDates(e,t,{task:i.task,dates:i.data});break;case n.a.Status:if(i.task.reminder){const o=Object(s.l)(i.data);if(this.store.dispatch(Object(f.g)({tab:t,userId:e.id,id:i.task.id,data:{complete:o}})),o){const e=i.task,t={description:$localize`:@@cu-inbox-service__undo-item_reminder-completed:Completed ${e.title.substring(0,30)}:reminderTitle:`,type:"itemUndo",undoReminder:{reminder:e,method:"complete"}};this.sharedData.addUndoItem(t)}}else this.changeTaskStatus(e,t,{task:i.task,status:i.data});break;case n.a.ToggleStatus:this.toggleStatus(e,t,i.data);break;case n.a.Priority:this.changeTaskPriority(e,t,{task:i.task,priority:i.data});break;case n.a.ReminderNotif:this.store.dispatch(Object(f.g)({tab:t,userId:e.id,id:i.task.id,data:{minutes_before_to_notify:i.data}}));break;case n.a.Rename:this.store.dispatch(Object(f.g)({tab:t,userId:e.id,id:i.task.id,data:{title:i.data}}));break;case n.a.Convert:this.store.dispatch(Object(f.d)({tab:t,userId:e.id,subcategoryId:i.data.location.subcategory.id,id:i.task.id,removeDate:i.data.removeDate}));break;case n.a.RemoveAttachment:this.store.dispatch(Object(f.q)({tab:t,userId:e.id,id:i.task.id,attachment:i.data}));break;case n.a.ChangeAttachments:this.store.dispatch(Object(f.E)({tab:t,userId:e.id,id:i.task.id,attachments:i.data}));break;case n.a.Recurring:i.task.reminder?this.store.dispatch(Object(f.h)({tab:t,userId:e.id,id:i.task.id,data:i.data.recurring,dates:i.data.dates})):this.changeTaskRecurring(e,t,{task:i.task,recurring:i.data.recurring,dates:i.data.dates})}}changeTaskStatus(e,t,{task:i,status:o}){const n=Object.assign(Object.assign({},i),{status:o});this.updateTaskState(e,t,n),this.taskService.setStatus(n,o).subscribe(()=>{this.reloadIfSortedBy(e,t,u.S.name)})}toggleStatus(e,t,i){this.getTaskStatuses(i).subscribe(o=>{if(2!==o.length)return;const n=o.findIndex(e=>e.status.toLowerCase()===i.status.status.toLowerCase());let s;if(0===n)s=Object.assign({},o[1]);else{if(1!==n)return;s=Object.assign({},o[0])}this.changeTaskStatus(e,t,{task:i,status:s})})}changeTaskPriority(e,t,{task:i,priority:o}){const n=Object.assign(Object.assign({},i),{priority:o});this.taskService.setPriorities(i,o).subscribe(i=>{this.updateTaskState(e,t,i),this.reloadIfSortedBy(e,t,u.M.name)}),this.updateTaskState(e,t,n)}changeTaskRecurring(e,t,{task:i,recurring:o,dates:n}){const s=Object(v.i)(o),c=Object.assign(Object.assign({},i),{recurring_settings:s}),a=s?Object.assign({},s):null;s&&n&&n.dueDate&&(a.due_date=Object(m.j)(n.dueDate).valueOf(),a.due_date_time=n.dueDateTime),this.taskService.setRecurringAsync(i,s).subscribe(i=>{this.updateTaskState(e,t,i),this.reloadIfSortedBy(e,t,u.M.name)}),this.updateTaskState(e,t,c)}changeTaskAssignees(e,t,{task:i,assignees:o}){const n=Object.assign(Object.assign({},i),{assignees:o});this.taskService.setAssignees(i,o).subscribe(i=>{this.updateTaskState(e,t,i),this.reloadIfSortedBy(e,t,u.k.name)}),this.updateTaskState(e,t,n)}changeTaskGroupAssignees(e,t,{task:i,assignees:o}){const n=Object.assign(Object.assign({},i),{group_assignees:o});this.taskService.setGroupAssignees(i,o).subscribe(i=>{this.updateTaskState(e,t,i),this.reloadIfSortedBy(e,t,u.k.name)}),this.updateTaskState(e,t,n)}lazyLoadData(e){switch(e.source){case"statuses":this.loadStatuses(e);break;case"users":this.loadUsers(e)}}loadStatuses({type:e,data:t}){this.statusesMap$.pipe(Object(l.a)()).subscribe(i=>{const o="task"===e?t.parent||t.id:JSON.stringify(t),n=`${e}_${o}`;i[n]||"task"===e&&this.getTaskStatuses(t).subscribe(e=>{this.statusesMap$.next(Object.assign(Object.assign({},i),{[n]:e}))})})}loadUsers({type:e,data:t}){"task"===e&&this.store.dispatch(new w.R({taskId:t.id}))}insertOrUpdateTasksState(e,t,i){e&&t&&i&&(this.store.dispatch(Object(f.F)({tab:t,userId:e.id,tasks:i})),this.reloadIfSortedBy(e,t,"any"))}reloadInboxTasks(e,t,i){this.store.dispatch(Object(f.o)({tab:t,userId:e.id,ids:i}))}updateTasksState(e,t,i){e&&t&&i&&this.store.dispatch(Object(f.F)({tab:t,userId:e.id,tasks:i}))}updateTaskState(e,t,i){e&&t&&i&&this.store.dispatch(Object(f.F)({tab:t,userId:e.id,tasks:[i]}))}removeTaskState(e,t,i){e&&t&&i&&this.store.dispatch(Object(f.r)({tab:t,userId:e.id,id:i}))}changeTaskDates(e,t,{task:i,dates:o}){if(void 0===o.startDate&&(o.startDate=null),void 0===o.dueDate&&(o.dueDate=i.due_date?parseInt(i.due_date,10):i.due_date),void 0===o.dueDateTime&&(o.dueDateTime=i.due_date_time),void 0===o.startDateTime&&(o.startDateTime=!1),this.taskService.setDueDates(i,o,!1,!1,o.sendRequest).subscribe(e=>{}),o.sendRequest){const n=Object.assign(Object.assign({},i),{due_date:o.dueDate&&!isNaN(o.dueDate.valueOf())?p(o.dueDate).startOf("minute").valueOf():null,due_date_time:o.dueDateTime,start_date:o.startDate&&!isNaN(o.startDate.valueOf())?p(o.startDate).startOf("minute").valueOf():null,start_date_time:o.startDateTime});this.updateTaskState(e,t,n)}}getTaskStatuses(e){return this.store.dispatch(new g.j({tasks:[e],forced:!0})),this.store.pipe(Object(o.select)(Object(_.d)(e.id)),Object(d.a)(e=>!(!e||!e.statuses)),Object(r.a)(e=>e.statuses),Object(l.a)())}reload(e,t){this.store.dispatch(Object(f.k)({tab:t,userId:e.id}))}reloadIfSortedBy(e,t,i){this.store.pipe(Object(o.select)(Object(b.g)(t,e.id)),Object(l.a)(),Object(d.a)(e=>e&&(e.field===i||"any"===i))).subscribe(()=>{this.reload(e,t)})}}return e.\u0275fac=function(t){return new(t||e)(x.nc(o.Store),x.nc(I.a),x.nc(T.a))},e.\u0275prov=x.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},hxFJ:function(e,t,i){"use strict";i.d(t,"a",function(){return J});var o=i("MPcj"),n=i("fXoL"),s=i("XNiG"),c=i("jJQC"),a=i("Ll/8"),r=i("l7P3"),l=i("G2WA"),d=i("Jf2N"),u=i("UdVN"),m=i("ofXK"),p=i("NQa4"),h=i("peMq"),f=i("BTFG"),b=i("aIzb"),g=i("sx5D");function _(e,t){if(1&e&&n.Xb(0,"cu-user-group",35),2&e){const e=n.uc(2).$implicit;n.Dc("users",null==e?null:e.assignees)("modifier","cu-user-group_sm")("avatarSize",24)("leadCounter",3)}}function v(e,t){if(1&e){const e=n.dc();n.cc(0,"div",36),n.qc("click",function(){n.Uc(e);const t=n.uc(2).$implicit;return n.uc().removeBlocker(t)}),n.bc()}2&e&&n.Dc("icon","close")}function k(e,t){1&e&&(n.cc(0,"div",37),n.Xb(1,"cu-loader"),n.bc())}const y=function(e){return{"background-color":e}};function w(e,t){if(1&e){const e=n.dc();n.cc(0,"div",28),n.Xb(1,"div",29),n.cc(2,"a",30),n.qc("click",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc().openTask(t,i)}),n.vc(3,"cuTaskLink"),n.dd(4),n.bc(),n.cc(5,"div",31),n.bd(6,_,1,4,"cu-user-group",32),n.bc(),n.bd(7,v,1,1,"div",33),n.bd(8,k,2,0,"div",34),n.bc()}if(2&e){const e=n.uc().$implicit,t=n.uc();n.Ib(1),n.Dc("ngStyle",n.Hc(8,y,e.status.color)),n.Ib(1),n.Dc("cuLink",n.wc(3,6,e)),n.Ib(2),n.ed(e.name),n.Ib(2),n.Dc("ngIf",null==e||null==e.assignees?null:e.assignees.length),n.Ib(1),n.Dc("ngIf",!t.loading),n.Ib(1),n.Dc("ngIf",t.loading)}}function x(e,t){if(1&e&&(n.cc(0,"div"),n.dd(1),n.ac(2),n.gc(3,38),n.Zb(),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" #",e.id," ")}}function I(e,t){if(1&e&&(n.cc(0,"div",25),n.bd(1,w,9,10,"div",26),n.bd(2,x,4,1,"div",27),n.bc()),2&e){const e=t.$implicit;n.Ib(1),n.Dc("ngIf",e.name),n.Ib(1),n.Dc("ngIf",!e.name)}}function T(e,t){if(1&e){const e=n.dc();n.cc(0,"div",39),n.qc("click",function(){return n.Uc(e),n.uc().updateDependencyType("blocker")}),n.dd(1," + "),n.ac(2),n.gc(3,40),n.Zb(),n.bc()}}function C(e,t){if(1&e){const e=n.dc();n.cc(0,"div",41),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.updateDependencyType(""),t.close()}),n.gc(1,42),n.bc()}}function D(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-selector",43),n.qc("onSelect",function(t){return n.Uc(e),n.uc().taskSelected(t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("task",e.task)("disabled",e.loading)("excludeCurrentTask",!1)("taskIdsToExclude",e.allDependencyId)("defaultProject",e.project)("searchSubtasks",!0)("excludeParentTask",!1)("description",e.addDependencyText)("excludeArchived",!0)("dependencyTaskId",null==e.task?null:e.task.id)}}function O(e,t){if(1&e&&n.Xb(0,"cu-user-group",35),2&e){const e=n.uc(2).$implicit;n.Dc("users",null==e?null:e.assignees)("modifier","cu-user-group_sm")("avatarSize",24)("leadCounter",3)}}function S(e,t){if(1&e){const e=n.dc();n.cc(0,"div",36),n.qc("click",function(){n.Uc(e);const t=n.uc(2).$implicit;return n.uc(2).removeBlocker(t)}),n.bc()}2&e&&n.Dc("icon","close")}function E(e,t){1&e&&(n.cc(0,"div",37),n.Xb(1,"cu-loader"),n.bc())}function P(e,t){if(1&e){const e=n.dc();n.cc(0,"div",28),n.Xb(1,"div",29),n.cc(2,"a",30),n.qc("click",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc(2).openTask(t,i)}),n.vc(3,"cuTaskLink"),n.dd(4),n.bc(),n.cc(5,"div",31),n.bd(6,O,1,4,"cu-user-group",32),n.bc(),n.bd(7,S,1,1,"div",33),n.bd(8,E,2,0,"div",34),n.bc()}if(2&e){const e=n.uc().$implicit,t=n.uc(2);n.Ib(1),n.Dc("ngStyle",n.Hc(8,y,e.status.color)),n.Ib(1),n.Dc("cuLink",n.wc(3,6,e)),n.Ib(2),n.ed(e.name),n.Ib(2),n.Dc("ngIf",null==e||null==e.assignees?null:e.assignees.length),n.Ib(1),n.Dc("ngIf",!t.loading),n.Ib(1),n.Dc("ngIf",t.loading)}}function j(e,t){if(1&e&&(n.cc(0,"div"),n.dd(1),n.ac(2),n.gc(3,47),n.Zb(),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" #",e.id," ")}}function A(e,t){if(1&e&&(n.cc(0,"div",25),n.bd(1,P,9,10,"div",26),n.bd(2,j,4,1,"div",27),n.bc()),2&e){const e=t.$implicit;n.Ib(1),n.Dc("ngIf",e.name),n.Ib(1),n.Dc("ngIf",!e.name)}}function $(e,t){if(1&e&&(n.cc(0,"div",44),n.cc(1,"div",3),n.Xb(2,"div",45),n.ac(3),n.gc(4,46),n.Zb(),n.bc(),n.bd(5,A,3,2,"div",8),n.bc()),2&e){const e=n.uc();n.Ib(4),n.kc(e.closedTaskBlocker.length)(null==e.closedTaskBlocker?null:e.closedTaskBlocker.length),n.hc(4),n.Ib(1),n.Dc("ngForOf",e.closedTaskBlocker)("ngForTrackBy",e.trackById)}}function U(e,t){if(1&e&&n.Xb(0,"cu-user-group",35),2&e){const e=n.uc(2).$implicit;n.Dc("users",null==e?null:e.assignees)("modifier","cu-user-group_sm")("avatarSize",24)("leadCounter",3)}}function R(e,t){if(1&e){const e=n.dc();n.cc(0,"div",36),n.qc("click",function(){n.Uc(e);const t=n.uc(2).$implicit;return n.uc().removeWaiting(t)}),n.bc()}2&e&&n.Dc("icon","close")}function M(e,t){1&e&&(n.cc(0,"div",37),n.Xb(1,"cu-loader"),n.bc())}function F(e,t){if(1&e){const e=n.dc();n.cc(0,"div",28),n.Xb(1,"div",29),n.cc(2,"a",30),n.qc("click",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc().openTask(t,i)}),n.vc(3,"cuTaskLink"),n.dd(4),n.bc(),n.cc(5,"div",31),n.bd(6,U,1,4,"cu-user-group",32),n.bc(),n.bd(7,R,1,1,"div",33),n.bd(8,M,2,0,"div",34),n.bc()}if(2&e){const e=n.uc().$implicit,t=n.uc();n.Ib(1),n.Dc("ngStyle",n.Hc(8,y,e.status.color)),n.Ib(1),n.Dc("cuLink",n.wc(3,6,e)),n.Ib(2),n.ed(e.name),n.Ib(2),n.Dc("ngIf",null==e||null==e.assignees?null:e.assignees.length),n.Ib(1),n.Dc("ngIf",!t.loading),n.Ib(1),n.Dc("ngIf",t.loading)}}function L(e,t){if(1&e&&(n.cc(0,"div"),n.dd(1),n.ac(2),n.gc(3,48),n.Zb(),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" #",e.id," ")}}function N(e,t){if(1&e&&(n.cc(0,"div",25),n.bd(1,F,9,10,"div",26),n.bd(2,L,4,1,"div",27),n.bc()),2&e){const e=t.$implicit;n.Ib(1),n.Dc("ngIf",e.name),n.Ib(1),n.Dc("ngIf",!e.name)}}function z(e,t){if(1&e){const e=n.dc();n.cc(0,"div",39),n.qc("click",function(){return n.Uc(e),n.uc().updateDependencyType("blocked")}),n.dd(1," + "),n.ac(2),n.gc(3,49),n.Zb(),n.bc()}}function q(e,t){if(1&e){const e=n.dc();n.cc(0,"div",41),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.updateDependencyType(""),t.close()}),n.gc(1,50),n.bc()}}function G(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-selector",51),n.qc("onSelect",function(t){return n.Uc(e),n.uc().taskSelected(t)}),n.bc()}if(2&e){const e=n.uc();n.Dc("task",e.task)("dependencyTaskId",null==e.task?null:e.task.id)("disabled",e.loading)("taskIdsToExclude",e.allDependencyId)("defaultProject",e.project)("searchSubtasks",!0)("excludeParentTask",!1)("description",e.addDependencyText)("excludeCurrentTask",!1)("excludeArchived",!0)}}function V(e,t){if(1&e&&n.Xb(0,"cu-user-group",35),2&e){const e=n.uc(2).$implicit;n.Dc("users",null==e?null:e.assignees)("modifier","cu-user-group_sm")("avatarSize",24)("leadCounter",3)}}function B(e,t){if(1&e){const e=n.dc();n.cc(0,"div",36),n.qc("click",function(){n.Uc(e);const t=n.uc(2).$implicit;return n.uc().removeRelationshipLink.emit({task:t})}),n.bc()}2&e&&n.Dc("icon","close")}function X(e,t){1&e&&(n.cc(0,"div",37),n.Xb(1,"cu-loader"),n.bc())}function H(e,t){if(1&e){const e=n.dc();n.cc(0,"div",28),n.Xb(1,"div",29),n.cc(2,"a",30),n.qc("click",function(t){n.Uc(e);const i=n.uc().$implicit;return n.uc().openTask(t,i)}),n.vc(3,"cuTaskLink"),n.dd(4),n.bc(),n.cc(5,"div",31),n.bd(6,V,1,4,"cu-user-group",32),n.bc(),n.bd(7,B,1,1,"div",33),n.bd(8,X,2,0,"div",34),n.bc()}if(2&e){const e=n.uc().$implicit,t=n.uc();n.Ib(1),n.Dc("ngStyle",n.Hc(8,y,null==e?null:e.status.color)),n.Ib(1),n.Dc("cuLink",n.wc(3,6,e)),n.Ib(2),n.ed(null==e?null:e.name),n.Ib(2),n.Dc("ngIf",null==e||null==e.assignees?null:e.assignees.length),n.Ib(1),n.Dc("ngIf",!t.loading),n.Ib(1),n.Dc("ngIf",t.loading)}}function W(e,t){if(1&e&&(n.cc(0,"div"),n.dd(1),n.ac(2),n.gc(3,52),n.Zb(),n.bc()),2&e){const e=n.uc().$implicit;n.Ib(1),n.fd(" #",e.id," ")}}function K(e,t){if(1&e&&(n.cc(0,"div",25),n.bd(1,H,9,10,"div",26),n.bd(2,W,4,1,"div",27),n.bc()),2&e){const e=t.$implicit;n.Ib(1),n.Dc("ngIf",null==e?null:e.name),n.Ib(1),n.Dc("ngIf",!(null!=e&&e.name))}}function Q(e,t){if(1&e){const e=n.dc();n.cc(0,"div",39),n.qc("click",function(){return n.Uc(e),n.uc().updateDependencyType("link")}),n.dd(1," + "),n.ac(2),n.gc(3,53),n.Zb(),n.bc()}}function Z(e,t){if(1&e){const e=n.dc();n.cc(0,"div",41),n.qc("click",function(){n.Uc(e);const t=n.uc();return t.updateDependencyType(""),t.close()}),n.gc(1,54),n.bc()}}function Y(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-task-selector",55),n.qc("onSelect",function(t){return n.Uc(e),n.uc().createRelationshipLink.emit({task:t.task})}),n.bc()}if(2&e){const e=n.uc();n.Dc("task",e.task)("dependencyTaskId",null==e.task?null:e.task.id)("disabled",e.loading)("taskIdsToExclude",e.batchedTasks?e.idsToExclude:e.tasksLinkedIds)("defaultProject",e.project)("searchSubtasks",!0)("excludeParentTask",!1)("description",e.addRelationshipText)("excludeCurrentTask",!1)("removeDuplicates",!0)("excludeArchived",!0)}}let J=(()=>{class e{constructor(e,t,i,o){this.store=e,this.sharedTaskService=t,this.modalService=i,this.cdr=o,this.muteNotifications=!1,this.createDependency=new n.o,this.removeDependency=new n.o,this.createRelationshipLink=new n.o,this.removeRelationshipLink=new n.o,this.trackById=Object(c.d)("id"),this.batchedTaskIds=[],this.idsToExclude=[],this.destroy$=new s.a,this.addDependencyText=$localize`:@@cu-dependencies-selector__description_add-dependency:Search to add dependency`,this.addRelationshipText=$localize`:@@cu-dependencies-selector__description_add-relationship:Search to add relationship`}ngOnInit(){this.store.dispatch(new o.g({dependencies:this.task&&this.task.dependencies||[],taskId:this.task?this.task.id:null})),(this.task||this.batchedTasks&&1===this.batchedTasks.length)&&(this.batchedTasks&&(this.task=this.batchedTasks[0],this.batchedTasks=null),this.store.dispatch(new o.z({taskId:this.task.id}))),this.batchedTasks&&this.batchedTasks.forEach(e=>{this.batchedTaskIds.push(e.id),this.idsToExclude.push(e.id),this.store.dispatch(new o.z({taskId:e.id}))})}ngOnChanges(e){e.displayedTaskBlocker&&(this.closedTaskBlocker=this.displayedTaskBlocker.filter(e=>Object(a.k)(e.status))),(e.displayedTasksBlocked||e.displayedTaskBlocker)&&(this.allDependencyId=[...this.displayedTaskBlocker,...this.displayedTasksBlocked].map(e=>e.id)),e.tasksLinked&&(this.tasksLinkedIds=this.tasksLinked.map(e=>e.id))}ngOnDestroy(){this.destroy$.next()}updateDependencyType(e){this.store.dispatch(new o.Q(e))}close(){this.modalService.closeAll()}taskSelected(e){this.createDependency.emit({currentTask:this.task,selectedTask:e.task,batchedTasks:this.batchedTasks,muteNotifications:this.muteNotifications,isBlocker:"blocker"===this.selectedState})}removeBlocker(e){this.removeDependency.emit({currentTask:this.task,selectedTask:e,batchedTasks:this.batchedTasks,isBlocker:!0,taskIdToRemove:e.id})}removeWaiting(e){this.removeDependency.emit({currentTask:this.task,selectedTask:e,batchedTasks:this.batchedTasks,isBlocker:!1,taskIdToRemove:e.id})}openTask(e,t){this.sharedTaskService.clickTaskLink({id:t.id,customId:t.custom_id,teamId:t.team},e),this.modalService.closeAll()}markForCheck(){this.cdr.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(r.Store),n.Wb(l.a),n.Wb(d.a),n.Wb(n.h))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-dependencies-selector"]],inputs:{task:"task",batchedTasks:"batchedTasks",project:"project",extraItemTemplate:"extraItemTemplate",muteNotifications:"muteNotifications",selectedState:"selectedState",displayedTasksBlocked:"displayedTasksBlocked",displayedTaskBlocker:"displayedTaskBlocker",error:"error",loading:"loading",tasksLinked:"tasksLinked"},outputs:{createDependency:"createDependency",removeDependency:"removeDependency",createRelationshipLink:"createRelationshipLink",removeRelationshipLink:"removeRelationshipLink"},features:[n.Gb],decls:39,vars:18,consts:function(){let e,t,i,o,s,c,a,r,l,d,u,m,p,h,f,b,g,_;return e=$localize`:@@common_waiting-on␟e62255d3f98477c7d882d2fb5932e9cb23dadc4c␟8224493075237256029: Waiting On `,t=$localize`:@@cu-dependencies-selector__waiting-on-description␟949d4d9509243bee0fb504369bd46e0be7bc380f␟5638020860332307833: Tasks that must be completed before this task `,i=$localize`:@@common_blocking-dependency-1␟79bf620e640340e9f41384d6c36d70c564f07acf␟1519026011606352857: Blocking `,o=$localize`:@@cu-dependencies-selector__blocking-description␟bdcb834919ec65b93f7b106838ed1860b519accf␟6787499979995419492: Tasks that can't start until this task is completed `,s=$localize`:@@common_tasks␟586a5fd72602b5b14ec0c55f84814de47bb21e3a␟6904866445262015585:Tasks`,c=$localize`:@@cu-dependencies-selector__link-to-description␟7565793ebce8649932110d2abb66844133eb1c5b␟1183419019600403876: Tasks that relate to each other but aren't actually dependent on each other `,a=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,r=$localize`:@@cu-dependencies-selector__add-waiting-on-task␟26fc9c5b0cbf5632a489daa0a27986854465c538␟1389434986097706621:Add waiting on task`,l=$localize`:dependency type@@common_done--dependency-type␟f031826de4d223f5af8f4fcec0c4f2ed1c035e87␟2559990622163579351: Done `,d=$localize`:␟f8bb522790cef8a844fe05c696deabd64dacefe6␟7529141094515977381:{VAR_PLURAL, plural, =1 {Dependency} other {Dependencies}}`,d=n.lc(d,{VAR_PLURAL:"\ufffd1\ufffd"}),u=$localize`:@@cu-dependencies-selector__closed-dependencies-count␟96df11c78690e224f8610f099fab5f80c7569557␟4319856674719683430: ${"\ufffd0\ufffd"}:INTERPOLATION: Closed ${d}:ICU: `,m=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,p=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,h=$localize`:@@cu-dependencies-selector__add-blocked-task␟31a7452a405322d05f760a73615f4f1185fa01b7␟5676046916526231702:Add task that is blocked`,f=$localize`:dependency type@@common_done--dependency-type␟f031826de4d223f5af8f4fcec0c4f2ed1c035e87␟2559990622163579351: Done `,b=$localize`:@@common_user-no-access␟82acfff77895b96948a7b31e50b56b893b5b82e9␟6507889049193626588:(You don't have access)`,g=$localize`:@@cu-dependencies-selector__add-linked-task␟6d2bb4f217283434fe57327af5ecf5ee11857711␟8347628169840999760:Add linked task`,_=$localize`:dependency type@@common_done--dependency-type␟f031826de4d223f5af8f4fcec0c4f2ed1c035e87␟2559990622163579351: Done `,[[1,"cu-dependencies"],[1,"cu-dependencies__tasks"],[1,"cu-dependencies__tasks-container","blockers"],[1,"cu-dependencies__tasks-container-title","task-num"],["icon","blocker",1,"cu-dependencies__tasks-container-title-icon"],e,[1,"cu-dependencies__tasks-container-description"],t,["class","cu-dependencies__tasks-item-container",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-dependencies__tasks-container-select",3,"click",4,"ngIf"],["class","cu-dependencies__tasks-container-cancel",3,"click",4,"ngIf"],[3,"task","disabled","excludeCurrentTask","taskIdsToExclude","defaultProject","searchSubtasks","excludeParentTask","description","excludeArchived","dependencyTaskId","onSelect",4,"ngIf"],["class","cu-dependencies__tasks-container closed",4,"ngIf"],[1,"cu-dependencies__tasks-container","waiting"],["icon","blocked",1,"cu-dependencies__tasks-container-title-icon"],i,o,[3,"task","dependencyTaskId","disabled","taskIdsToExclude","defaultProject","searchSubtasks","excludeParentTask","description","excludeCurrentTask","excludeArchived","onSelect",4,"ngIf"],[1,"cu-dependencies__tasks-container","links"],["icon","cu2-link",1,"cu-dependencies__tasks-container-title-icon"],s,c,[3,"task","dependencyTaskId","disabled","taskIdsToExclude","defaultProject","searchSubtasks","excludeParentTask","description","excludeCurrentTask","removeDuplicates","excludeArchived","onSelect",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"cu-dependencies__error"],[1,"cu-dependencies__tasks-item-container"],["class","cu-dependencies__tasks-item",4,"ngIf"],[4,"ngIf"],[1,"cu-dependencies__tasks-item"],[1,"cu-dependencies__tasks-status",3,"ngStyle"],[1,"cu-dependencies__tasks-name",3,"cuLink","click"],[1,"cu-dependencies__tasks-users"],[3,"users","modifier","avatarSize","leadCounter",4,"ngIf"],["class","cu-dependencies__tasks-close",3,"icon","click",4,"ngIf"],["class","cu-dependencies__tasks-load",4,"ngIf"],[3,"users","modifier","avatarSize","leadCounter"],[1,"cu-dependencies__tasks-close",3,"icon","click"],[1,"cu-dependencies__tasks-load"],a,[1,"cu-dependencies__tasks-container-select",3,"click"],r,[1,"cu-dependencies__tasks-container-cancel",3,"click"],l,[3,"task","disabled","excludeCurrentTask","taskIdsToExclude","defaultProject","searchSubtasks","excludeParentTask","description","excludeArchived","dependencyTaskId","onSelect"],[1,"cu-dependencies__tasks-container","closed"],["icon","check-batch-toolbar",1,"cu-dependencies__tasks-container-title-icon"],u,m,p,h,f,[3,"task","dependencyTaskId","disabled","taskIdsToExclude","defaultProject","searchSubtasks","excludeParentTask","description","excludeCurrentTask","excludeArchived","onSelect"],b,g,_,[3,"task","dependencyTaskId","disabled","taskIdsToExclude","defaultProject","searchSubtasks","excludeParentTask","description","excludeCurrentTask","removeDuplicates","excludeArchived","onSelect"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.cc(2,"div",2),n.cc(3,"div",3),n.Xb(4,"div",4),n.ac(5),n.gc(6,5),n.Zb(),n.bc(),n.cc(7,"div",6),n.gc(8,7),n.bc(),n.bd(9,I,3,2,"div",8),n.bd(10,T,4,0,"div",9),n.bc(),n.bd(11,C,2,0,"div",10),n.bd(12,D,1,10,"cu-task-selector",11),n.bd(13,$,6,4,"div",12),n.cc(14,"div",13),n.cc(15,"div",3),n.Xb(16,"div",14),n.ac(17),n.gc(18,15),n.Zb(),n.bc(),n.cc(19,"div",6),n.gc(20,16),n.bc(),n.bd(21,N,3,2,"div",8),n.bd(22,z,4,0,"div",9),n.bc(),n.bd(23,q,2,0,"div",10),n.bd(24,G,1,10,"cu-task-selector",17),n.cc(25,"div",18),n.cc(26,"div",3),n.Xb(27,"div",19),n.ac(28),n.gc(29,20),n.Zb(),n.bc(),n.cc(30,"div",6),n.gc(31,21),n.bc(),n.bd(32,K,3,2,"div",8),n.bd(33,Q,4,0,"div",9),n.bc(),n.bd(34,Z,2,0,"div",10),n.bd(35,Y,1,11,"cu-task-selector",22),n.bc(),n.Yb(36,23),n.cc(37,"div",24),n.dd(38),n.bc(),n.bc()),2&e&&(n.Ib(9),n.Dc("ngForOf",t.displayedTaskBlocker)("ngForTrackBy",t.trackById),n.Ib(1),n.Dc("ngIf","blocker"!==t.selectedState),n.Ib(1),n.Dc("ngIf","blocker"===t.selectedState),n.Ib(1),n.Dc("ngIf","blocker"===t.selectedState),n.Ib(1),n.Dc("ngIf",t.closedTaskBlocker.length),n.Ib(8),n.Dc("ngForOf",t.displayedTasksBlocked)("ngForTrackBy",t.trackById),n.Ib(1),n.Dc("ngIf","blocked"!==t.selectedState),n.Ib(1),n.Dc("ngIf","blocked"===t.selectedState),n.Ib(1),n.Dc("ngIf","blocked"===t.selectedState),n.Ib(8),n.Dc("ngForOf",t.tasksLinked)("ngForTrackBy",t.trackById),n.Ib(1),n.Dc("ngIf","link"!==t.selectedState),n.Ib(1),n.Dc("ngIf","link"===t.selectedState),n.Ib(1),n.Dc("ngIf","link"===t.selectedState),n.Ib(1),n.Dc("ngTemplateOutlet",t.extraItemTemplate),n.Ib(2),n.ed(t.error))},directives:[u.a,m.p,m.q,m.x,m.t,p.a,h.a,f.a,b.a],pipes:[g.a],encapsulation:2,changeDetection:0}),e})()},iEFA:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},iVLJ:function(e,t,i){"use strict";i.d(t,"a",function(){return k});var o=i("jJQC"),n=i("fXoL"),s=i("Uo20"),c=i("ofXK"),a=i("UdVN"),r=i("HPyy"),l=i("paIP"),d=i("sKwi"),u=i("wMS7"),m=i.n(u),p=i("jhN1"),h=i("OU+x");let f=(()=>{class e{constructor(e,t){this.sanitizer=e,this.commentsHelperService=t}transform(e,t,i){let o=this.commentsHelperService.updateEmailWithAttachmentsAndMarkdown(e,t,i);return o=m.a.sanitize(o),this.sanitizer.bypassSecurityTrustHtml(o)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(p.b),n.Wb(h.a))},e.\u0275pipe=n.Vb({name:"emailInlineReply",type:e,pure:!0}),e})();var b=i("kC/4");function g(e,t){if(1&e&&(n.cc(0,"div",9),n.cc(1,"div",10),n.cc(2,"div",11),n.Xb(3,"div",12),n.bc(),n.Xb(4,"cu-avatar",13),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(4),n.Dc("user",e.email.displayUser)}}function _(e,t){if(1&e&&(n.cc(0,"div",14),n.cc(1,"div",15),n.Xb(2,"cu-email-info",16),n.cc(3,"div",17),n.dd(4),n.vc(5,"timeAgo"),n.bc(),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(2),n.Dc("email",e.email),n.Ib(2),n.fd(" ",n.wc(5,2,e.email.date)," ")}}function v(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-comment-attachment",18),n.qc("onAttachmentPreview",function(t){return n.Uc(e),n.uc().previewAttachment(t)}),n.bc()}if(2&e){const e=t.$implicit,i=n.uc();n.Dc("taskId",i.taskId)("attachment",e)("allowPreview",i.allowPreview)("noMargin",i.noMargin)}}let k=(()=>{class e{constructor(e){this.attachmentsViewerService=e,this.noMargin=!1,this.showFullConversation=!1,this.allowPreview=!0,this.showInfo=!0,this.trackById=Object(o.d)("id")}ngOnInit(){}previewAttachment(e){this.attachmentsViewerService.onOpen.emit({attachments:[e],canRemove:!1,canRemoveOwn:!1,canEdit:!1,canEditOwn:!1,canChangeDescription:!1,index:0,taskId:this.taskId,hideCoverImage:!0,coverImage:null,allowComments:!1})}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-email-reply"]],hostAttrs:[1,"cu-email-reply"],inputs:{email:"email",emailAttachments:"emailAttachments",taskId:"taskId",noMargin:"noMargin",showFullConversation:"showFullConversation",allowPreview:"allowPreview",showInfo:"showInfo"},decls:10,vars:9,consts:[[1,"cu-email-comment"],[1,"cu-email-comment-container"],["class","cu-email-comment__aside",4,"ngIf"],[1,"cu-email-comment__body"],[1,"cu-comment__body-container"],["class","cu-comment__header cu-comment__header-bottom",4,"ngIf"],[1,"cu-comment-viewer-content__container"],[1,"cu-comment-viewer-content","cu-email-reply__content",3,"innerHtml"],[3,"taskId","attachment","allowPreview","noMargin","onAttachmentPreview",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-email-comment__aside"],[1,"cu-email-comment__avatar-container"],[1,"cu-email-comment__avatar"],["icon","cu2-envelope-light",1,"cu-email-comment__avatar-mail"],["modifier","cu-email-comment__avatar-user cu-email-comment__avatar-user-custom",3,"user"],[1,"cu-comment__header","cu-comment__header-bottom"],[1,"cu-comment__meta"],[3,"email"],[1,"cu-comment__date"],[3,"taskId","attachment","allowPreview","noMargin","onAttachmentPreview"]],template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.bd(2,g,5,1,"div",2),n.cc(3,"div",3),n.cc(4,"div",4),n.bd(5,_,6,4,"div",5),n.cc(6,"div",6),n.Xb(7,"div",7),n.vc(8,"emailInlineReply"),n.bd(9,v,1,4,"cu-comment-attachment",8),n.bc(),n.bc(),n.bc(),n.bc(),n.bc()),2&e&&(n.Ib(2),n.Dc("ngIf",null==t.email?null:t.email.displayUser),n.Ib(3),n.Dc("ngIf",t.showInfo),n.Ib(2),n.Dc("innerHtml",n.yc(8,5,t.email,t.showFullConversation,t.emailAttachments),n.Vc),n.Ib(2),n.Dc("ngForOf",t.emailAttachments)("ngForTrackBy",t.trackById))},directives:[c.q,c.p,a.a,r.a,l.a,d.a],pipes:[f,b.a],styles:[".cu-email-reply .cu-email-comment__avatar-user-custom{background-color:#65cec3!important}.cu-email-reply__content b{font-weight:700}.cu-email-reply__content i{font-style:italic}.cu-email-reply__content ol{list-style-type:decimal}.cu-email-reply__content ol,.cu-email-reply__content ul{display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0;margin-inline-end:0;padding-inline-start:40px}.cu-email-reply__content ul{list-style-type:disc}.dark-theme .cu-email-reply__content>div{color:#d5d6d7!important}"],encapsulation:2,changeDetection:0}),e})()},jJXF:function(e,t,i){e.exports=i.p+"lineup.e9f5b20145ed203e2083.png"},jLNh:function(e,t,i){"use strict";i.d(t,"a",function(){return D});var o=i("ofXK"),n=i("CG/S"),s=i("4Dfh"),c=i("EDFS"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();var l=i("X8So"),d=i("KyjD"),u=i("K0KF"),m=i("gb9A"),p=i("/SUI"),h=i("C8uC"),f=i("38Di"),b=i("t1N4"),g=i("7MBn"),_=i("VPvi"),v=i("1M0N"),k=i("vnix"),y=i("obfd"),w=i("wxjI"),x=i("6F/5"),I=i("5zfR"),T=i("s8Mb"),C=i("prfv");let D=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},providers:[n.a],imports:[[o.c,s.a,c.d,r,l.a,d.a,u.a,m.a,p.a,h.LoaderModule,f.a,b.a,k.a,g.a,_.a,v.a,y.a,w.a,x.a,I.a,T.a,C.a]]}),e})()},jWrk:function(e,t,i){"use strict";var o=i("IPAr"),n=i("EmYC");function s(e,t,i){var n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w="",x=0,I=t.charAt(0),T=this.options.pedantic,C=this.options.commonmark,D=this.options.gfm;if("!"===I&&(u=!0,w=I,I=t.charAt(++x)),"["===I&&(u||!this.inLink)){for(w+=I,g="",x++,h=t.length,b=0,(v=e.now()).column+=x,v.offset+=x;x<h;){if(l=I=t.charAt(x),"`"===I){for(s=1;"`"===t.charAt(x+1);)l+=I,x++,s++;c?s>=c&&(c=0):c=s}else if("\\"===I)x++,l+=t.charAt(x);else if(c&&!D||"["!==I){if((!c||D)&&"]"===I){if(!b){if(!T)for(;x<h&&(I=t.charAt(x+1),o(I));)l+=I,x++;if("("!==t.charAt(x+1))return;l+="(",n=!0,x++;break}b--}}else b++;g+=l,l="",x++}if(n){for(m=g,w+=g+l,x++;x<h&&(I=t.charAt(x),o(I));)w+=I,x++;if(g="",a=w,"<"===(I=t.charAt(x))){for(x++,a+="<";x<h&&">"!==(I=t.charAt(x));){if(C&&"\n"===I)return;g+=I,x++}if(">"!==t.charAt(x))return;w+="<"+g+">",_=g,x++}else{for(I=null,l="";x<h&&(I=t.charAt(x),!l||!('"'===I||"'"===I||C&&"("===I));){if(o(I)){if(!T)break;l+=I}else{if("("===I)b++;else if(")"===I){if(0===b)break;b--}g+=l,l="","\\"===I&&(g+="\\",I=t.charAt(++x)),g+=I}x++}_=g,x=(w+=g).length}for(g="";x<h&&(I=t.charAt(x),o(I));)g+=I,x++;if(I=t.charAt(x),w+=g,g&&('"'===I||"'"===I||C&&"("===I))if(x++,g="",p="("===I?")":I,r=w+=I,C){for(;x<h&&(I=t.charAt(x))!==p;)"\\"===I&&(g+="\\",I=t.charAt(++x)),x++,g+=I;if((I=t.charAt(x))!==p)return;for(f=g,w+=g+I,x++;x<h&&(I=t.charAt(x),o(I));)w+=I,x++}else for(l="";x<h;){if((I=t.charAt(x))===p)d&&(g+=p+l,l=""),d=!0;else if(d){if(")"===I){w+=g+p+l,f=g;break}o(I)?l+=I:(g+=p+l+I,l="",d=!1)}else g+=I;x++}if(")"===t.charAt(x))return!!i||(w+=")",_=this.decode.raw(this.unescape(_),e(a).test().end,{nonTerminated:!1}),f&&(r=e(r).test().end,f=this.decode.raw(this.unescape(f),r)),y={type:u?"image":"link",title:f||null,url:_},u?y.alt=this.decode.raw(this.unescape(m),v)||null:(k=this.enterLink(),y.children=this.tokenizeInline(m,v),k()),e(w)(y))}}}e.exports=s,s.locator=n},jhAH:function(e,t,i){e.exports=i.p+"multiple-assignees.b334d4ad91a88fcadf4b.png"},jkT0:function(e,t,i){"use strict";i.d(t,"a",function(){return N});var o=i("fXoL"),n=i("IE5h"),s=i("jJQC"),c=i("82+D"),a=i("TqRa"),r=i("jJW4"),l=i("rLOZ"),d=i("ofXK"),u=i("LdyQ"),m=i("MJvn"),p=i("NsZK"),h=i("EDFS"),f=i("n+1/"),b=i("7Jxm"),g=i("UdVN"),_=i("0ENg"),v=i("akl0");const k=["attachmentsDropdown"],y=["pop"];function w(e,t){}function x(e,t){if(1&e&&(o.cc(0,"div",11),o.bd(1,w,0,0,"ng-template",12),o.bc()),2&e){o.uc(2);const e=o.Rc(2);o.Ib(1),o.Dc("ngTemplateOutlet",e)}}function I(e,t){if(1&e&&(o.cc(0,"div",5,6),o.cc(2,"div",7),o.cc(3,"div",8,9),o.Bc(5),o.bc(),o.bc(),o.bd(6,x,2,1,"div",10),o.bc()),2&e){const e=o.uc(),t=o.Rc(5);o.Dc("dropdownDestroyMenuOnClose",!1),o.Ib(3),o.Dc("cuTooltip",e.showTooltip?e.addAFileText:null)("popover",t)("outsideClick",!0)}}function T(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.qc("click",function(){return o.Uc(e),o.uc(2).onCreateDoc.emit()}),o.Xb(1,"div",21),o.ac(2),o.gc(3,22),o.Zb(),o.bc()}}function C(e,t){}const D=function(e,t){return{item:e,title:t,css:"cu-cloud-buttons-dropdown__list-item",onDropdown:!0}};function O(e,t){if(1&e&&(o.ac(0),o.bd(1,C,0,0,"ng-template",19),o.Zb()),2&e){const e=t.$implicit,i=o.uc(2),n=o.Rc(7);o.Ib(1),o.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.Ic(2,D,e,i.cloudData[e].title))}}function S(e,t){}const E=function(e,t){return{item:e,title:t,source:"google-doc",css:"cu-cloud-buttons-dropdown__list-item",onDropdown:!0}};function P(e,t){if(1&e){const e=o.dc();o.cc(0,"div",13),o.qc("fileAdded",function(t){return o.Uc(e),o.uc().addFile(t)}),o.Xb(1,"div",14),o.Xb(2,"input",15),o.ac(3),o.gc(4,16),o.Zb(),o.bc(),o.bd(5,T,4,0,"div",17),o.bd(6,O,2,5,"ng-container",18),o.bd(7,S,0,0,"ng-template",19)}if(2&e){const e=o.uc(),t=o.Rc(7);o.Ib(5),o.Dc("ngIf",e.allowNewDoc),o.Ib(1),o.Dc("ngForOf",e.cloudList)("ngForTrackBy",e.trackByValue),o.Ib(1),o.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",o.Ic(5,E,e.AttachmentSource.google,e.newGoogleDocText))}}function j(e,t){}const A=function(e){return{item:e,onDropdown:!1}};function $(e,t){if(1&e&&(o.ac(0),o.bd(1,j,0,0,"ng-template",19),o.Zb()),2&e){const e=t.$implicit;o.uc(2);const i=o.Rc(7);o.Ib(1),o.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.Hc(2,A,e))}}function U(e,t){if(1&e&&(o.ac(0),o.bd(1,$,2,4,"ng-container",18),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngForOf",e.cloudListSmart)("ngForTrackBy",e.trackByValue)}}function R(e,t){1&e&&o.Xb(0,"cu-cloud-storage-deny-msg")}function M(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-cloud-storage-button",24),o.qc("onDenied",function(){return o.Uc(e),o.uc(2).showPopover()})("onAdded",function(t){o.Uc(e);const i=o.uc().item;return o.uc().addCloudAttachment(t,i)}),o.Xb(1,"div",25),o.dd(2),o.bc()}if(2&e){const e=o.uc(),t=e.css,i=e.source,n=e.item,s=e.onDropdown,c=e.title,a=o.uc();o.Dc("modifier",t)("source",i||a.cloudData[n].sourceText)("parentId",a.parentId)("type",a.type)("permanent",a.permanent)("showDeny",a.menuOnly),o.Ib(1),o.Dc("icon",a.cloudData[n].icon2+(s?"-colored":""))("cuTooltip",a.cloudData[n].title),o.Ib(1),o.fd(" ",c," ")}}function F(e,t){if(1&e&&(o.bd(0,M,3,9,"cu-cloud-storage-button",23),o.vc(1,"async"),o.vc(2,"async")),2&e){const e=t.item,i=o.uc();o.Dc("ngIf",o.wc(1,1,i.sharedData.currentUser)&&o.wc(2,3,i.sharedData.currentUser)[i.cloudData[e].userProperty]&&!i.isSharingApp)}}const L=["*"];let N=(()=>{class e{constructor(e,t){this.sharedData=e,this.localStorageService=t,this.permanent=!0,this.showDeny=!0,this.showTooltip=!0,this.showSmart=!0,this.menuOnly=!1,this.menuItem=!1,this.allowNewDoc=!1,this.onCloudAdded=new o.o,this.onFilesSelected=new o.o,this.onCreateDoc=new o.o,this.cloudData=n.c,this.cloudList=n.d,this.cloudListSmart=[],this.trackByValue=s.f,this.AttachmentSource=c.a,this.isSharingApp=a.k,this.smartData={},this.addAFileText=$localize`:@@cu-cloud-buttons-dropdown__add-a-file:Add a file`,this.newGoogleDocText=$localize`:@@common_google--new-doc:New Google Doc`,this.loadStorageData(),this.getSmartItem()}ngOnInit(){}loadStorageData(){this.smartData=this.localStorageService.get("cloud_buttons")||{}}getSmartItem(){const e=n.d.map(e=>({source:e,count:this.smartData[e]||0})).filter(e=>e.count);e.sort((e,t)=>t.count-e.count),this.cloudListSmart=e.map(e=>e.source).slice(0,3)}addFile(e){this.onFilesSelected.emit(e),this.attachmentsDropdown&&this.attachmentsDropdown.close(),this.updateSmartData(c.a.file)}addCloudAttachment(e,t){this.onCloudAdded.emit({file:e,source:t}),this.attachmentsDropdown&&this.attachmentsDropdown.close(),this.updateSmartData(t)}showPopover(){this.pop&&this.pop.show()}updateSmartData(e){this.loadStorageData(),this.smartData[e]=(this.smartData[e]||0)+1,this.localStorageService.set("cloud_buttons",this.smartData),this.getSmartItem()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(r.a),o.Wb(l.b))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-cloud-buttons-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(k,3),o.jd(y,1)),2&e){let e;o.Qc(e=o.rc())&&(t.attachmentsDropdown=e.first),o.Qc(e=o.rc())&&(t.pop=e.first)}},hostVars:6,hostBindings:function(e,t){2&e&&o.Ob("cu-cloud-buttons-dropdown",!0)("cu-cloud-buttons-dropdown_menu-only",t.menuOnly)("cu-dropdown-list-item",t.menuItem)},inputs:{parentId:"parentId",type:"type",permanent:"permanent",showDeny:"showDeny",showTooltip:"showTooltip",showSmart:"showSmart",menuOnly:"menuOnly",menuItem:"menuItem",allowNewDoc:"allowNewDoc"},outputs:{onCloudAdded:"onCloudAdded",onFilesSelected:"onFilesSelected",onCreateDoc:"onCreateDoc"},ngContentSelectors:L,decls:8,vars:3,consts:function(){let e,t,i;return e=$localize`:@@common_upload-file␟30425abcb2ca17bc7f74857afd2d4a74e31b9b2b␟8605421971099461066:Upload file`,t=$localize`:@@cu-cloud-buttons-dropdown__tooltip-msg_create-new-document␟cb261e873080a837c1384ab4906df29219f63c68␟3442748633775807547:Create New Document`,i=$localize`:@@common_new-document␟b4a1dca0434ab7259de2be942a0a63394146f376␟975449276385153932:New Document`,[["cuDropdown","",3,"dropdownDestroyMenuOnClose",4,"ngIf","ngIfElse"],["menuTemplate",""],[4,"ngIf"],["popTemplate",""],["cloudButton",""],["cuDropdown","",3,"dropdownDestroyMenuOnClose"],["attachmentsDropdown","dropdown"],["cuDropdownToggle","",1,"cu-cloud-buttons-dropdown__toggle"],["containerClass","popover_white","triggers","","container","body","placement","top",1,"cu-cloud-buttons-dropdown__toggle-inner",3,"cuTooltip","popover","outsideClick"],["pop","bs-popover"],["class","cu-cloud-buttons-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-cloud-buttons-dropdown__menu"],[3,"ngTemplateOutlet"],["cuLinkUploader","",1,"cu-cloud-buttons-dropdown__list-item","ignore-click-out",3,"fileAdded"],["icon","paperclip","cuTooltip","Attach file",1,"cu-cloud-buttons-dropdown__icon"],["type","file","multiple","",1,"cu-cloud-buttons-dropdown__input"],e,["class","cu-cloud-buttons-dropdown__list-item ignore-click-out",3,"click",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-cloud-buttons-dropdown__list-item","ignore-click-out",3,"click"],["icon","cu2-view-9","cuTooltip",t,1,"cu-cloud-buttons-dropdown__icon","cu-cloud-buttons-dropdown__icon_doc"],i,[3,"modifier","source","parentId","type","permanent","showDeny","onDenied","onAdded",4,"ngIf"],[3,"modifier","source","parentId","type","permanent","showDeny","onDenied","onAdded"],[1,"icon","cu-cloud-buttons-dropdown__icon",3,"icon","cuTooltip"]]},template:function(e,t){if(1&e&&(o.Cc(),o.bd(0,I,7,4,"div",0),o.bd(1,P,8,8,"ng-template",null,1,o.cd),o.bd(3,U,2,2,"ng-container",2),o.bd(4,R,1,0,"ng-template",null,3,o.cd),o.bd(6,F,3,5,"ng-template",null,4,o.cd)),2&e){const e=o.Rc(2);o.Dc("ngIf",!t.menuOnly)("ngIfElse",e),o.Ib(3),o.Dc("ngIf",t.showSmart)}},directives:[d.q,u.b,m.a,p.a,h.c,f.a,d.x,b.a,g.a,d.p,_.a,v.a],pipes:[d.b],styles:[".cu-cloud-buttons-dropdown{display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:0;min-width:28px;height:30px;overflow:hidden}.cu-cloud-buttons-dropdown_menu-only{height:auto}.cu-cloud-buttons-dropdown.cu-dropdown-list-item{justify-content:left}.cu-cloud-buttons-dropdown.cu-dropdown-list-item .cu-dropdown{width:100%}.cu-cloud-buttons-dropdown.cu-dropdown-list-item .cu-dropdown__toggle{width:100%;height:100%;margin-left:0}.cu-dashboard-doc-main__navigation .cu-cloud-buttons-dropdown{height:24px}.cu-cloud-buttons-dropdown__toggle{width:28px}.cu-cloud-buttons-dropdown__toggle-inner{height:28px}.cu-dashboard-doc-main__navigation .cu-cloud-buttons-dropdown__toggle-inner{height:auto}.cu-cloud-buttons-dropdown__menu{padding:2px 0}.cu-cloud-buttons-dropdown__icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;cursor:pointer;fill:#c8cadc}.dark-theme .cu-cloud-buttons-dropdown__icon{fill:#828588}.cu-cloud-buttons-dropdown__icon:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-cloud-buttons-dropdown__icon:hover{fill:var(--theme-main-color)}}.cu-cloud-buttons-dropdown__icon_doc{padding:1px 2px;fill:#292d34}.dark-theme .cu-cloud-buttons-dropdown__icon_doc{fill:#d5d6d7}.cu-cloud-buttons-dropdown__menu .cu-cloud-buttons-dropdown__icon{margin-right:8px;margin-left:0}.comment-bar__footer .cu-cloud-buttons-dropdown__icon{width:28px;height:28px;padding:3px;margin-left:6px}.cu-cloud-buttons-dropdown__input{position:absolute;left:-1000px;height:0;width:0;opacity:0;visibility:hidden}.cu-cloud-buttons-dropdown__list-item{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;padding:8px 14px;cursor:pointer;font:400 13px Gotham Pro,Proxima Nova,arial,serif;color:#343434;width:200px}.dark-theme .cu-cloud-buttons-dropdown__list-item{color:#d5d6d7}.cu-cloud-buttons-dropdown__list-item:hover{background-color:#fafbfc}.dark-theme .cu-cloud-buttons-dropdown__list-item:hover{background-color:#2b343b}.cu-cloud-buttons-dropdown__list-item-disabled{cursor:default;color:rgba(52,52,52,.4)}.dark-theme .cu-cloud-buttons-dropdown__list-item-disabled{color:rgba(213,214,215,.4)}.cu-cloud-buttons-dropdown__list-item-disabled:hover{background-color:#fff}.dark-theme .cu-cloud-buttons-dropdown__list-item-disabled:hover{background:#1e272e}.cu-cloud-buttons-dropdown__list-item-name{flex-grow:1}.cu-cloud-buttons-dropdown__list-item-check{width:14px;height:14px}"],encapsulation:2,changeDetection:0}),e})()},jkYJ:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var o=i("fXoL"),n=i("ofXK"),s=i("LdyQ"),c=i("MJvn"),a=i("n+1/");function r(e,t){if(1&e){const e=o.dc();o.cc(0,"div",2),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc().selected.emit(i)})("mousedown",function(t){return o.Uc(e),o.uc().stopBlur(t)}),o.cc(1,"div",3),o.dd(2),o.bc(),o.bc()}if(2&e){const e=t.$implicit;o.Ib(2),o.fd(" ",e.title," ")}}function l(e,t){if(1&e){const e=o.dc();o.cc(0,"div",2),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).selected.emit(i)})("mousedown",function(t){return o.Uc(e),o.uc(3).stopBlur(t)}),o.cc(1,"div",3),o.dd(2),o.bc(),o.bc()}if(2&e){const e=t.$implicit;o.Ib(2),o.fd(" ",e.title," ")}}function d(e,t){if(1&e&&(o.cc(0,"div",9),o.bd(1,l,3,1,"div",0),o.vc(2,"slice"),o.bc()),2&e){const e=o.uc(2);o.ad("width",200,"px"),o.Ib(1),o.Dc("ngForOf",o.yc(2,4,e.inputBadges,e.show,null==e.inputBadges?null:e.inputBadges.length))("ngForTrackBy",e.trackbyFunc)}}const u=function(){return["top"]};function m(e,t){if(1&e&&(o.cc(0,"div",4,5),o.cc(2,"div",6),o.cc(3,"div",7),o.cc(4,"div",3),o.dd(5),o.bc(),o.bc(),o.bc(),o.bd(6,d,3,8,"div",8),o.bc()),2&e){const e=o.uc();o.Dc("dropdownPlacement",o.Gc(2,u)),o.Ib(5),o.fd(" + ",(null==e.inputBadges?null:e.inputBadges.length)-e.show," ")}}let p=(()=>{class e{constructor(){this.show=10,this.preventBlur=!1,this.inputBadges=[],this.selected=new o.o,this.overflow=!1}trackbyFunc(e,t){return t.id}stopBlur(e){this.preventBlur&&e.preventDefault()}ngOnChanges(e){var t;e.inputBadges&&(null===(t=this.inputBadges)||void 0===t?void 0:t.length)>this.show&&(this.overflow=!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-badge-input-fields"]],hostAttrs:[1,"cu-badge-input-fields"],inputs:{show:"show",preventBlur:"preventBlur",inputBadges:"inputBadges"},outputs:{selected:"selected"},features:[o.Gb],decls:3,vars:7,consts:[["class","cu-badge-input-fields__value",3,"click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["cuDropdown","",3,"dropdownPlacement",4,"ngIf"],[1,"cu-badge-input-fields__value",3,"click","mousedown"],[1,"cu-badge-input-fields__value-title"],["cuDropdown","",3,"dropdownPlacement"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-badge-input-fields__value","cu-badge-input-fields__value-overflow"],["class","cu-badge-input-fields__menu",3,"width",4,"cuDropdownMenu"],[1,"cu-badge-input-fields__menu"]],template:function(e,t){1&e&&(o.bd(0,r,3,1,"div",0),o.vc(1,"slice"),o.bd(2,m,7,3,"div",1)),2&e&&(o.Dc("ngForOf",(null==t.inputBadges?null:t.inputBadges.length)>t.show?o.yc(1,3,t.inputBadges,0,t.show):t.inputBadges)("ngForTrackBy",t.trackbyFunc),o.Ib(2),o.Dc("ngIf",(null==t.inputBadges?null:t.inputBadges.length)>t.show))},directives:[n.p,n.q,s.b,c.a,a.a],pipes:[n.A],styles:['.cu-badge-input-fields{display:flex;flex-wrap:wrap;padding-top:6px}.cu-badge-input-fields__value{padding:4px 7px;margin-right:6px;margin-bottom:6px;flex-shrink:0;display:inline-flex;position:relative;cursor:pointer}.cu-badge-input-fields__value:hover:before{opacity:1}.cu-badge-input-fields__value:hover .cu-badge-input-fields__value-title{color:#fff}.cu-badge-input-fields__value-title{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:11px;position:relative}@supports (--theme-main-color:#7b68ee){.cu-badge-input-fields__value-title{color:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-badge-input-fields__value-title{font-family:var(--global-font-support)}}.cu-badge-input-fields__value:before{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;background:#7b68ee;border-radius:4px;opacity:.1;width:100%;height:100%;top:0;left:0;z-index:0}@supports (--theme-main-color:#7b68ee){.cu-badge-input-fields__value:before{background:var(--theme-main-color)}}.cu-badge-input-fields__value-overflow{transition:filter .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#e9ebf0;border-radius:4px;margin:0}.dark-theme .cu-badge-input-fields__value-overflow{background:#2b343b}.cu-badge-input-fields__value-overflow:before{display:none}.cu-badge-input-fields__value-overflow .cu-badge-input-fields__value-title{color:#7c828d}.dark-theme .cu-badge-input-fields__value-overflow .cu-badge-input-fields__value-title{color:#828588}.cu-badge-input-fields__value-overflow:hover{filter:brightness(.9)}.cu-badge-input-fields__value-overflow:hover .cu-badge-input-fields__value-title{color:#7c828d}.dark-theme .cu-badge-input-fields__value-overflow:hover .cu-badge-input-fields__value-title{color:#828588}.cu-badge-input-fields__menu{padding:8px;max-height:360px}.cu-badge-input-fields .cu-dropdown{flex-grow:0}.cu-automation-field-value .cu-badge-input-fields .cu-dropdown__toggle,.cu-badge-input-fields .cu-dropdown__toggle{padding:0;min-height:0}'],encapsulation:2,changeDetection:0}),e})()},jwRX:function(e,t,i){"use strict";i.d(t,"a",function(){return xi}),i.d(t,"b",function(){return Ii});var o=i("L5Tv"),n=i("FDF9"),s=i("fXoL"),c=i("ofXK"),a=i("XNiG"),r=i("2Vo4"),l=i("LRne"),d=i("/qOb"),u=i("lJxs"),m=i("pLZG"),p=i("/uUt"),h=i("vkgz"),f=i("Kj3r"),b=i("eIep"),g=i("1G5W"),_=i("JIr8"),v=i("cC1p"),k=i("Jkpq"),y=i("xog/"),w=i("AMNA"),x=i("2FeZ"),I=i("YAnr"),T=i("1p1I"),C=i("g6dt"),D=i("Phux"),O=i("oy6Y"),S=i("6wVO"),E=i("aWji"),P=i("EDFS"),j=i("3uaV"),A=i("BTFG"),$=i("loh9"),U=i("UdVN"),R=i("jJQC"),M=i("Olm7"),F=i("hUS4"),L=i("bFKe");const N=["scrollbar"];function z(e,t){1&e&&s.dd(0),2&e&&s.fd(" ",t.value.name," ")}function q(e,t){1&e&&s.Xb(0,"div",10)}function G(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc().$implicit;s.Ib(1),s.ed(null==e||null==e.data?null:e.data.title)}}function V(e,t){if(1&e&&(s.cc(0,"div",13),s.Xb(1,"div",14),s.ac(2),s.gc(3,15),s.Zb(),s.bc()),2&e){const e=s.uc(2).$implicit,t=s.uc();s.Ob("cu-slash-command-value-list__done_active",e.id===(null==t.selected?null:t.selected.id))}}function B(e,t){}const X=function(e,t,i,o){return{value:e,data:t,selected:i,checked:o}};function H(e,t){if(1&e&&(s.ac(0),s.bd(1,B,0,0,"ng-template",16),s.Zb()),2&e){const e=s.uc(2).$implicit,t=s.uc(),i=s.Rc(3);s.Ib(1),s.Dc("ngTemplateOutlet",t.itemTemplate||i)("ngTemplateOutletContext",s.Kc(2,X,e,e.data,e.id===(null==t.selected?null:t.selected.id),!!t.checkedMap[e.id]))}}function W(e,t){if(1&e&&(s.bd(0,V,4,2,"div",11),s.bd(1,H,2,7,"ng-container",12)),2&e){const e=s.uc().$implicit;s.Dc("ngIf","DONE"===e.id),s.Ib(1),s.Dc("ngIf","DONE"!==e.id)}}const K=function(e){return{"cu-slash-command-value-list__item_separator":e}};function Q(e,t){if(1&e){const e=s.dc();s.ac(0),s.bd(1,q,1,0,"div",6),s.cc(2,"div",7),s.qc("click",function(i){s.Uc(e);const o=t.$implicit;return s.uc().selectItem(o,i)}),s.bd(3,G,2,1,"ng-container",8),s.bd(4,W,2,2,"ng-template",null,9,s.cd),s.bc(),s.Zb()}if(2&e){const e=t.$implicit,i=t.first,o=s.Rc(5);s.Ib(1),s.Dc("ngIf",i&&!(null!=e&&null!=e.data&&e.data.separatorHeader)&&!(null!=e&&null!=e.data&&e.data.separatorTail)),s.Ib(1),s.Dc("ngClass",s.Hc(4,K,(null==e||null==e.data?null:e.data.separatorHeader)||(null==e||null==e.data?null:e.data.separatorTail))),s.Ib(1),s.Dc("ngIf",(null==e||null==e.data?null:e.data.separatorHeader)||(null==e||null==e.data?null:e.data.separatorTail))("ngIfElse",o)}}function Z(e,t){if(1&e&&(s.cc(0,"div",17),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" ",e.emptyMessage," ")}}const Y=function(){return{suppressScrollX:!0}},J=["*"];let ee=(()=>{class e{constructor(e){this.changeDetector=e,this.filteredValues$=new r.a([]),this.checkedMap={},this.emptyMessage=$localize`:@@common_no-items-found:No items found`,this.values=[],this.spaceSelectionEnabled=!0,this.showEmptyMessage=!0,this.allowCustom=!1,this.selectValue=new s.o,this.afterFilter=new s.o,this.createCustom=new s.o,this.onListCreate=new s.o,this.onListDestroy=new s.o,this.onPage=new s.o,this.trackById=Object(R.d)("id")}ngOnInit(){this.onListCreate.emit()}ngOnDestroy(){this.onListDestroy.emit()}ngOnChanges(e){const t=e.query&&e.query.previousValue||"",i=e.query&&e.query.currentValue||"";if(this.checkedMap={},this.checkedValue)if(Array.isArray(this.checkedValue))this.checkedValue.forEach(e=>{const t=this.values.find(t=>t.equals&&t.equals(e));t&&(this.checkedMap[t.id]=!0)});else{const e=this.values.find(e=>e.equals&&e.equals(this.checkedValue));e&&(this.checkedMap[e.id]=!0)}this.filterData(i!==t)}filterData(e=!1){const t=this.query?this.query.trim().toLowerCase():"";let i=(this.values||[]).filter(e=>e.filter(t));if(this.compareFn&&i.sort(this.compareFn),this.compareFn2&&i.sort(this.compareFn2),t===v.Kb){const e=[];v.Jb.forEach(t=>{const[o]=Object(M.a)(i,e=>e.id===t.key);o&&e.push(o)}),i=e.concat(i)}1===i.length?this.setSelectedValue(i,0):!this.selected||i.some(e=>e.id===this.selected.id)&&!e||(this.selected=i.find(e=>"DONE"===e.id)),!this.selected&&i.length>0&&(i[0].forceSelected&&i[0].forceSelected()||t)&&this.setSelectedValue(i,0),this.filteredValues$.next(i),this.afterFilter.emit(i)}getSelectedValue(){return this.selected}checkForPaging(){this.onPage.emit()}setSelectedValue(e,t,i=1){if(e&&e.length>t&&t>=0)if(e[t].unselectable){const o=t+i;this.setSelectedValue(e,o>=0?o:e.length-1)}else this.selected=e[t]}selectItem(e,t){t&&t.stopPropagation(),e&&e.unselectable||(this.selected=e,this.selectValue.emit(e),this.filterData())}quillBlotKeyDown(e){this.keyDown(e.detail)}keyDown(e){switch(e.which){case d.a.TAB:case d.a.ARROW_DOWN:if(this.selected){const e=this.filteredValues$.value.findIndex(e=>e.id===this.selected.id);e>=0&&e<this.filteredValues$.value.length-1?this.setSelectedValue(this.filteredValues$.value,e+1):this.filteredValues$.value.length>0&&this.setSelectedValue(this.filteredValues$.value,0)}else this.filteredValues$.value.length>0&&this.setSelectedValue(this.filteredValues$.value,0);return this.changeDetector.markForCheck(),setTimeout(()=>{this.scrollToSelected(-100)}),e.preventDefault(),!1;case d.a.ARROW_UP:if(this.selected){const e=this.filteredValues$.value.findIndex(e=>e.id===this.selected.id);this.setSelectedValue(this.filteredValues$.value,e>0?e-1:this.filteredValues$.value.length-1,-1)}else this.filteredValues$.value.length>0&&this.setSelectedValue(this.filteredValues$.value,0);return this.changeDetector.markForCheck(),setTimeout(()=>{this.scrollToSelected(-100)}),e.preventDefault(),!1;case d.a.TAB:case d.a.ENTER:if(this.selected)return this.selectItem(this.selected),e.preventDefault(),!1;if(0===this.filteredValues$.value.length&&this.allowCustom){const t=this.query?this.query.trim().toLowerCase():"";if(t)return e.preventDefault(),this.createCustom.emit(t),!1}break;case d.a.SPACE:if(this.selected&&this.spaceSelectionEnabled){const t=this.values.filter(e=>e.filter(this.query+" "));if(0===t.length||1===t.length&&t[0].id===this.selected.id)return this.selectItem(this.selected),e.preventDefault(),!1}}}scrollToSelected(e=0){this.selected&&setTimeout(()=>{this.scrollbar.scrollToElement(".cu-slash-command-list-item_selected",e,0)})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.h))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-value-list"]],viewQuery:function(e,t){if(1&e&&s.jd(N,3),2&e){let e;s.Qc(e=s.rc())&&(t.scrollbar=e.first)}},hostBindings:function(e,t){1&e&&s.qc("slashCommandKeyDown",function(e){return t.quillBlotKeyDown(e)},!1,s.Sc)("keydown",function(e){return t.keyDown(e)},!1,s.Sc)},inputs:{query:"query",emptyMessage:"emptyMessage",values:"values",itemTemplate:"itemTemplate",checkedValue:"checkedValue",spaceSelectionEnabled:"spaceSelectionEnabled",compareFn:"compareFn",compareFn2:"compareFn2",showEmptyMessage:"showEmptyMessage",allowCustom:"allowCustom"},outputs:{selectValue:"selectValue",afterFilter:"afterFilter",createCustom:"createCustom",onListCreate:"onListCreate",onListDestroy:"onListDestroy",onPage:"onPage"},features:[s.Gb],ngContentSelectors:J,decls:10,vars:9,consts:function(){let e;return e=$localize`:@@common_done␟8dd413cee2228118c536f503709329a4d1a395e2␟397098723873502323:Done`,[[1,"cu-slash-command-value-list"],["defaultTemplate",""],["cuScrollDetector","","offsetBottom","250",1,"cu-slash-command-value-list__body",3,"perfectScrollbar","onReachBottom"],["scrollbar","ngxPerfectScrollbar"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-slash-command-value-list__empty",4,"ngIf"],["class","cu-slash-command-value-list__top-placeholder",4,"ngIf"],[1,"cu-slash-command-value-list__item",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["slashCommandListItem",""],[1,"cu-slash-command-value-list__top-placeholder"],["class","cu-slash-command-value-list__done",3,"cu-slash-command-value-list__done_active",4,"ngIf"],[4,"ngIf"],[1,"cu-slash-command-value-list__done"],["icon","check",1,"cu-slash-command-value-list__done-icon"],e,[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-slash-command-value-list__empty"]]},template:function(e,t){if(1&e&&(s.Cc(),s.cc(0,"div",0),s.Bc(1),s.bd(2,z,1,1,"ng-template",null,1,s.cd),s.cc(4,"div",2,3),s.qc("onReachBottom",function(){return t.checkForPaging()}),s.bd(6,Q,6,6,"ng-container",4),s.vc(7,"async"),s.bc(),s.bd(8,Z,2,1,"div",5),s.vc(9,"async"),s.bc()),2&e){let e=null;s.Ib(4),s.Dc("perfectScrollbar",s.Gc(8,Y)),s.Ib(2),s.Dc("ngForOf",s.wc(7,4,t.filteredValues$))("ngForTrackBy",t.trackById),s.Ib(2),s.Dc("ngIf",t.showEmptyMessage&&!(null!=(e=s.wc(9,6,t.filteredValues$))&&e.length))}},directives:[F.a,L.a,c.p,c.q,c.o,U.a,c.x],pipes:[c.b],styles:['.cu-slash-command-value-list{width:320px}.cu-slash-command-value-list__body{max-height:350px}.cu-slash-command-value-list__empty{padding:30px;text-align:center;color:#aeacb0;font:italic 300 13px/1 Gotham Pro,Proxima Nova,arial,serif;border-bottom:0;cursor:default}.cu-slash-command-value-list__done{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:12px 30px 12px 15px;font-size:15px;cursor:pointer;color:#67cb48}.cu-slash-command-value-list__done:hover{transition:none}.cu-slash-command-value-list__done-icon{width:14px;height:14px;margin:4px 12px 4px 4px;stroke:#67cb48}.cu-slash-command-value-list__done:hover,.cu-slash-command-value-list__done_active{background:#f2f3f4}.dark-theme .cu-slash-command-value-list__done:hover,.dark-theme .cu-slash-command-value-list__done_active{background:#2b343b}.cu-slash-command-value-list__item_separator{padding:10px 15px 5px;position:sticky;top:0;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;background:#fff;color:#7c828d}.dark-theme .cu-slash-command-value-list__item_separator{background:#384047;color:#abaeb0}.cu-slash-command-value-list__top-placeholder{content:"";display:block;position:sticky;top:0;height:25px;z-index:10;background:#fff}.dark-theme .cu-slash-command-value-list__top-placeholder{background:#384047}'],encapsulation:2,changeDetection:0}),e})();var te=i("V3nW"),ie=i("N4ya"),oe=i("ihCf"),ne=i("3Pt+");const se=["editor"];let ce=(()=>{class e{constructor(){this.submitText=$localize`:@@common_paste:Paste`,this.onSubmit=new s.o,this.editorValue=""}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.editor.nativeElement.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-textarea-value"]],viewQuery:function(e,t){if(1&e&&s.jd(se,3),2&e){let e;s.Qc(e=s.rc())&&(t.editor=e.first)}},hostAttrs:[1,"cu-textarea-value"],inputs:{submitText:"submitText",placeholder:"placeholder"},outputs:{onSubmit:"onSubmit"},decls:5,vars:3,consts:[["cdkTextareaAutosize","","cdkAutosizeMinRows","3",1,"cu-form__input","cu-textarea-value__textarea",3,"ngModel","placeholder","ngModelChange"],["editor",""],[1,"cu-textarea-value__footer"],[1,"cu-textarea-value__btn",3,"click"]],template:function(e,t){1&e&&(s.cc(0,"textarea",0,1),s.qc("ngModelChange",function(e){return t.editorValue=e}),s.bc(),s.cc(2,"div",2),s.cc(3,"div",3),s.qc("click",function(){return t.onSubmit.emit(t.editorValue)}),s.dd(4),s.bc(),s.bc()),2&e&&(s.Dc("ngModel",t.editorValue)("placeholder",t.placeholder),s.Ib(4),s.fd(" ",t.submitText," "))},directives:[oe.a,ne.c,ne.p,ne.s],styles:[".cu-textarea-value{display:flex;overflow:auto;height:100%}.cu-textarea-value__textarea{width:300px;margin:25px 10px 30px;padding:0;flex-grow:1}.cu-textarea-value__footer{display:flex;justify-content:flex-end;position:absolute;right:0;bottom:0}.cu-textarea-value__btn{background:#7b68ee;display:flex;height:20px;padding:2px 5px;border-radius:2px;color:#fff;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif!important;align-items:center;text-transform:uppercase;cursor:pointer;margin:0 15px 10px 0}@supports (--theme-main-color:#7b68ee){.cu-textarea-value__btn{background:var(--theme-main-color)}}.cu-textarea-value__btn:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-textarea-value__btn:hover{background:var(--theme-main-color-dark)}}.cu-textarea-value__btn_disabled{pointer-events:none;opacity:.5}"],encapsulation:2,changeDetection:0}),e})();var ae=i("WoFS"),re=i("4oww"),le=i("FJGi"),de=i("aIzb"),ue=i("uT1E"),me=i("RyV3"),pe=i("4DGh"),he=i("itXk"),fe=i("6qs+"),be=i("MguC"),ge=i("h7sE"),_e=i("Gj5t"),ve=i("TyyD"),ke=i("l7P3"),ye=i("AeD3"),we=i("KoB5"),xe=i("8it8"),Ie=i("tjnY"),Te=i("/xxf");function Ce(e,t){if(1&e){const e=s.dc();s.cc(0,"div",5),s.qc("click",function(){s.Uc(e);const i=t.$implicit;return s.uc().setTab(i.id)}),s.dd(1),s.bc()}if(2&e){const e=t.$implicit,i=s.uc();s.Ob("cu-listview-selector__tab_selected",i.selectedTab===e.id),s.Ib(1),s.fd(" ",e.name," ")}}function De(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-quick-switcher-item",10),s.qc("click",function(){s.Uc(e);const i=t.$implicit;return s.uc(2).selectQuickItem(i)}),s.bc()}if(2&e){const e=t.$implicit,i=s.uc(2);s.Dc("item",e)("selected",(null==i.selectedQuickItem?null:i.selectedQuickItem.id)===e.id)}}function Oe(e,t){1&e&&(s.ac(0),s.gc(1,14),s.Zb())}function Se(e,t){1&e&&(s.ac(0),s.gc(1,15),s.Zb())}function Ee(e,t){if(1&e&&(s.cc(0,"div",11),s.bd(1,Oe,2,0,"ng-container",12),s.vc(2,"async"),s.bd(3,Se,2,0,"ng-template",null,13,s.cd),s.bc()),2&e){const e=s.Rc(4),t=s.uc(2);s.Ib(1),s.Dc("ngIf",s.wc(2,2,t.query$))("ngIfElse",e)}}function Pe(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"cu-search-input",6),s.qc("onChange",function(t){return s.Uc(e),s.uc().query$.next(t)}),s.vc(2,"async"),s.bc(),s.cc(3,"div",7),s.bd(4,De,1,2,"cu-quick-switcher-item",8),s.vc(5,"async"),s.bc(),s.bd(6,Ee,5,4,"div",9),s.vc(7,"async"),s.Zb()}if(2&e){const e=s.uc();let t=null;s.Ib(1),s.Dc("placeholder",e.commonStringsService.filterByNameText)("filterString",s.wc(2,6,e.query$))("autoFocus",!0),s.Ib(3),s.Dc("ngForOf",s.wc(5,8,e.quickItems$))("ngForTrackBy",e.trackById),s.Ib(2),s.Dc("ngIf",!(null!=(t=s.wc(7,10,e.quickItems$))&&t.length))}}function je(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"cu-category-list",16),s.qc("onSelect",function(t){return s.Uc(e),s.uc().selectCategory(t)}),s.bc(),s.Zb()}if(2&e){const e=s.uc();s.Ib(1),s.Dc("displaySearch",!0)("selectableProject",!0)("singleCategory",!1)("defaultProject",null==e.selectedCategory||null==e.selectedCategory.project?null:e.selectedCategory.project.id)("selectedCategory",null==e.selectedCategory||null==e.selectedCategory.category?null:e.selectedCategory.category.id)("selectedSubcategory",null==e.selectedCategory||null==e.selectedCategory.subcategory?null:e.selectedCategory.subcategory.id)("handleGlobalKeys",!0)("autoFocus",!0)}}var Ae=function(e){return e[e.search=0]="search",e[e.browse=1]="browse",e}({});const $e=[{id:Ae.search,name:$localize`:generic search text@@common_search:Search`},{id:Ae.browse,name:$localize`:@@cu-listview-selector__tab-item_browse-or-new-list:Browse or New List`}];let Ue=(()=>{class e{constructor(e,t,i,o){this.store=e,this.dataService=t,this.dataViewService=i,this.commonStringsService=o,this.destroy$=new a.a,this.query$=new r.a(""),this.data$=this.store.select(me.a),this.quickItems$=Object(he.a)([this.query$.pipe(Object(f.a)(250)),this.data$]).pipe(Object(u.a)(([e,t])=>{const i=[];return t.forEach(t=>{if(t.quickItemType===fe.a.VIEW){const o=t;o.type===be.i.List&&e&&t.name.toLowerCase().includes(e)&&i.push(this.composeItem({type:fe.a.VIEW,view:o}))}if(t.quickItemType===fe.a.PROJECT){const o=t;o.categories&&o.categories.forEach(t=>{t.subcategories&&t.subcategories.forEach(n=>{e&&n.name.toLowerCase().includes(e)&&!1!==n.access&&i.push(this.composeItem({type:fe.a.SUBCATEGORY,project:o,category:t,subcategory:n}))})})}}),i})),this.onSubmit=new s.o,this.selectedTab=Ae.search,this.tabItems=$e,this.tabs=Ae,this.trackById=Object(R.d)("id"),this.viewName=""}ngOnInit(){this.store.dispatch(new pe.i),this.query$.pipe(Object(f.a)(200),Object(g.a)(this.destroy$)).subscribe(e=>{const t=Object(ge.g)(e);t&&this.submit(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}setTab(e){this.selectedTab=e,this.selectedCategory=null,this.selectedQuickItem=null,this.query$.next("")}selectCategory(e){this.selectedCategory=e,this.selectedTab===Ae.browse&&this.submitSubcategory(e.subcategory)}selectQuickItem(e){this.selectedQuickItem=e,this.selectedQuickItem.type===fe.a.VIEW&&this.submit({viewId:this.selectedQuickItem.view.id}),this.selectedQuickItem.type===fe.a.SUBCATEGORY&&this.submitSubcategory(this.selectedQuickItem.subcategory)}composeItem(e){return Object.assign({type:e.type,project:e.project,id:Object(ve.c)(e)},e)}submitSubcategory(e){this.dataService.getSubcategoryById(e.id,{includeViews:!0,standard:!0}).pipe(Object(g.a)(this.destroy$)).subscribe(e=>{const t=e.standard_views&&e.standard_views.list;if(t)return void this.submit({viewId:t.id});const i=e.views&&e.views.length&&e.views[0];i?this.submit({viewId:i.id}):this.submitNewView(e,"List")})}submitNewView(e,t){const i=_e.Gb.find(e=>e.defaultDataViewAPIPayload.type===be.i.List).defaultDataViewAPIPayload,o={id:e.id,type:be.e.Subcategory},n=Object.assign(Object.assign({},i),{name:t||i.name,parent:o,visibility:be.j.Public,id:void 0});this.dataViewService.addDataView(n).pipe(Object(g.a)(this.destroy$)).subscribe(e=>{this.submit({viewId:e.view.id})})}createListView(){this.selectedCategory&&this.viewName&&this.submitNewView(this.selectedCategory.subcategory,this.viewName)}submit(e){this.onSubmit.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(ke.Store),s.Wb(ye.a),s.Wb(we.a),s.Wb(xe.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-listview-selector"]],hostAttrs:[1,"cu-listview-selector"],outputs:{onSubmit:"onSubmit"},decls:6,vars:4,consts:function(){let e,t,i;return e=$localize`:@@cu-listview-selector__header_add-list-of-tasks␟59e869522c9dc75a245f002780e32cbcd3659907␟7769087919463176016: Add list of tasks
`,t=$localize`:@@common_no-items-found␟be24dae69c0d0605237d6dd638b172a42a88851e␟2504502765849142619:No items found`,i=$localize`:@@cu-listview-selector__paste-url-or-list-name␟7fd0c899652363f7362e8a1a6925adc59eb7626c␟2729161860368223997:Paste URL or search List name`,[[1,"cu-listview-selector__header"],e,[1,"cu-listview-selector__tabs"],["class","cu-listview-selector__tab",3,"cu-listview-selector__tab_selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"cu-listview-selector__tab",3,"click"],[1,"cu-listview-selector__search-input",3,"placeholder","filterString","autoFocus","onChange"],[1,"cu-listview-selector__body"],[3,"item","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-listview-selector__empty",4,"ngIf"],[3,"item","selected","click"],[1,"cu-listview-selector__empty"],[4,"ngIf","ngIfElse"],["pastURLorListNameTmpl",""],t,i,["mode","list",1,"cu-listview-selector__category-list",3,"displaySearch","selectableProject","singleCategory","defaultProject","selectedCategory","selectedSubcategory","handleGlobalKeys","autoFocus","onSelect"]]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.gc(1,1),s.bc(),s.cc(2,"div",2),s.bd(3,Ce,2,3,"div",3),s.bc(),s.bd(4,Pe,8,12,"ng-container",4),s.bd(5,je,2,8,"ng-container",4)),2&e&&(s.Ib(3),s.Dc("ngForOf",t.tabItems)("ngForTrackBy",t.trackById),s.Ib(1),s.Dc("ngIf",t.selectedTab===t.tabs.search),s.Ib(1),s.Dc("ngIf",t.selectedTab===t.tabs.browse))},directives:[c.p,c.q,Ie.a,Te.a,le.a],pipes:[c.b],styles:[".cu-listview-selector{display:flex;flex-direction:column;min-height:100px}.cu-listview-selector__header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:uppercase;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;padding:10px 15px 15px;opacity:.8;color:#7c828d}.cu-listview-selector__tabs{display:flex;align-items:center;flex-shrink:0;margin:5px 15px 10px;border-radius:3px;border:1px solid #e9ebf0}.dark-theme .cu-listview-selector__tabs{border-color:#2b343b}.cu-listview-selector__tab{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;justify-content:center;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;height:30px;cursor:pointer;flex-grow:1;flex-basis:0;color:#b9bec7}.dark-theme .cu-listview-selector__tab{color:#828588}.cu-listview-selector__tab:hover{color:#292d34}.dark-theme .cu-listview-selector__tab:hover{color:#d5d6d7}.cu-listview-selector__tab_selected{background:#fafbfc;color:#292d34;cursor:default;pointer-events:none}.dark-theme .cu-listview-selector__tab_selected{background:#2b343b;color:#d5d6d7}.cu-listview-selector__tab+.cu-listview-selector__tab{border-left:1px solid #e9ebf0}.dark-theme .cu-listview-selector__tab+.cu-listview-selector__tab{border-left-color:#2b343b}.cu-listview-selector__category-list{flex-grow:1;display:block;min-height:0}.cu-listview-selector__category-list .cu2-hierarchy-picker__menu{width:100%;max-height:400px}.cu-listview-selector__input{padding:10px}.cu-listview-selector__body{max-height:350px;overflow-y:auto}.cu-os-win .cu-listview-selector__body{scrollbar-width:thin}.cu-os-win .cu-listview-selector__body::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-listview-selector__body::-webkit-scrollbar-track,.cu-os-win .cu-listview-selector__body::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-listview-selector__body::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-listview-selector__body::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-listview-selector__body::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-listview-selector__body::-webkit-scrollbar,.cu-os-win .dark-theme .cu-listview-selector__body::-webkit-scrollbar,.cu-os-win.dark-theme .cu-listview-selector__body::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-listview-selector__body::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-listview-selector__body::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-listview-selector__body::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-listview-selector__body::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-listview-selector__body::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-listview-selector__body::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-listview-selector__body::-webkit-scrollbar-thumb:hover{border-color:#384047}.cu-listview-selector__body cu-quick-switcher-item{width:100%;display:block}.cu-listview-selector__search-input .cu-search-input__inner{margin:10px}.cu-listview-selector__empty{display:flex;align-items:center;justify-content:center;padding:20px;font:italic 300 13px Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-listview-selector__empty{color:#abaeb0}.cu-listview-selector__submit{margin:15px}"],encapsulation:2,changeDetection:0}),e})();function Re(e,t){if(1&e&&(s.cc(0,"div",6),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" ",e.command.desc," ")}}const Me=function(e,t){return{"cu-slash-command-list-item_active cu-slash-command-list-item_selected":e,"cu-slash-command-list-item-mini":t}};let Fe=(()=>{class e{constructor(){this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-command-list-item"]],inputs:{command:"command",selected:"selected"},decls:8,vars:11,consts:[[1,"cu-slash-command-list-item",3,"ngClass"],[3,"icon"],[1,"cu-slash-command-list-item__name"],[1,"cu-slash-command-list-item__title"],["class","cu-slash-command-list-item__desc",4,"ngIf"],[1,"cu-slash-command-list-item__key"],[1,"cu-slash-command-list-item__desc"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.Xb(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.dd(4),s.bc(),s.bd(5,Re,2,1,"div",4),s.bc(),s.cc(6,"div",5),s.dd(7),s.bc(),s.bc()),2&e&&(s.Dc("ngClass",s.Ic(8,Me,t.selected,!!t.command.miniItem)),s.Ib(1),s.Mb("cu-slash-command-list-item__icon cu-slash-command-list-item__icon_",t.command.cssClass,""),s.Dc("icon",t.command.icon),s.Ib(3),s.fd(" ",t.command.title," "),s.Ib(1),s.Dc("ngIf",t.command.desc),s.Ib(2),s.fd(" ",t.command.key," "))},directives:[c.o,U.a,c.q],styles:[".cu-slash-command-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:8px 15px;cursor:pointer;min-height:47px}.cu-slash-command-list-item:hover{transition:none}.cu-slash-command-list-item:hover,.cu-slash-command-list-item_active{background:#f2f3f4}.dark-theme .cu-slash-command-list-item:hover,.dark-theme .cu-slash-command-list-item_active{background:#2b343b}.cu-slash-command-list-item.cu-slash-command-list-item-mini{padding:0 15px;min-height:28px}.cu-slash-command-list-item__icon{margin-right:12px;background:#fff;border:1px solid #e9ebf0;border-radius:2px;width:31px;height:31px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.dark-theme .cu-slash-command-list-item__icon{background:#384047;border:1px solid #1e272e}.cu-slash-command-list-item-mini .cu-slash-command-list-item__icon{width:24px;height:24px}.cu-slash-command-list-item__icon_normal-text svg,.cu-slash-command-list-item__icon_turn-into-text svg{width:12px;height:12px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_normal-text svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-text svg{fill:#abaeb0}.cu-slash-command-list-item__icon_h1 svg,.cu-slash-command-list-item__icon_h2 svg,.cu-slash-command-list-item__icon_h3 svg,.cu-slash-command-list-item__icon_turn-into-heading svg{width:18px;height:14px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_h1 svg,.dark-theme .cu-slash-command-list-item__icon_h2 svg,.dark-theme .cu-slash-command-list-item__icon_h3 svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-heading svg{fill:#abaeb0}.cu-slash-command-list-item__icon_checklist svg,.cu-slash-command-list-item__icon_turn-into-check-list svg{width:15px;height:15px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_checklist svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-check-list svg{fill:#abaeb0}.cu-slash-command-list-item__icon_divider svg{width:16px;height:16px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_divider svg{fill:#abaeb0}.cu-slash-command-list-item__icon_inline-code svg{width:15px;height:15px;fill:#7c828d;stroke:#7c828d;stroke-width:2px}.dark-theme .cu-slash-command-list-item__icon_inline-code svg{fill:#abaeb0;stroke:#abaeb0}.cu-slash-command-list-item__icon_quote svg,.cu-slash-command-list-item__icon_turn-into-quote svg{width:12px;height:12px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_quote svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-quote svg{fill:#abaeb0}.cu-slash-command-list-item__icon_banner-success,.cu-slash-command-list-item__icon_turn-into-banner-success{fill:#48ba8f}.cu-slash-command-list-item__icon_banner-success svg,.cu-slash-command-list-item__icon_turn-into-banner-success svg{width:12px;height:12px}.cu-slash-command-list-item__icon_banner-danger,.cu-slash-command-list-item__icon_turn-into-banner-danger{fill:#f2544a}.cu-slash-command-list-item__icon_banner-danger svg,.cu-slash-command-list-item__icon_turn-into-banner-danger svg{width:12px;height:12px}.cu-slash-command-list-item__icon_banner-info,.cu-slash-command-list-item__icon_turn-into-banner-info{fill:#287cea}.cu-slash-command-list-item__icon_banner-info svg,.cu-slash-command-list-item__icon_turn-into-banner-info svg{width:12px;height:12px}.cu-slash-command-list-item__icon_banner-warning,.cu-slash-command-list-item__icon_turn-into-banner-warning{fill:#f6b53f}.cu-slash-command-list-item__icon_banner-warning svg,.cu-slash-command-list-item__icon_turn-into-banner-warning svg{width:12px;height:12px}.cu-slash-command-list-item__icon_list svg{width:12px;height:12px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_list svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_code-block svg,.cu-slash-command-list-item__icon_turn-into-code-block svg{width:14px;height:14px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_code-block svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-code-block svg{fill:#abaeb0}.cu-slash-command-list-item__icon_embed svg{width:16px;height:16px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_embed svg{fill:#abaeb0}.cu-slash-command-list-item__icon_cloudapp svg{width:15px;height:15px}.cu-slash-command-list-item__icon_youtube svg{width:16px;height:16px}.cu-slash-command-list-item__icon_zoom svg{width:18px;height:18px}.cu-slash-command-list-item__icon_google-docs svg,.cu-slash-command-list-item__icon_google-sheets svg,.cu-slash-command-list-item__icon_google-slides svg{width:19px;height:19px}.cu-slash-command-list-item__icon_vimeo svg{width:14px;height:14px}.cu-slash-command-list-item__icon_loom svg{width:15px;height:15px}.cu-slash-command-list-item__icon_figma svg{width:12px;height:17px}.cu-slash-command-list-item__icon_background-red{background-color:#fce1e1!important}.cu-slash-command-list-item__icon_background-green{background-color:#eafdd3!important}.cu-slash-command-list-item__icon_background-yellow{background-color:#fff88a!important}.cu-slash-command-list-item__icon_background-blue{background-color:#ddebf1!important}.cu-slash-command-list-item__icon_background-orange{background-color:#faebdd!important}.cu-slash-command-list-item__icon_background-purple{background-color:#eae4f2!important}.cu-slash-command-list-item__icon_background-blue svg,.cu-slash-command-list-item__icon_background-green svg,.cu-slash-command-list-item__icon_background-orange svg,.cu-slash-command-list-item__icon_background-purple svg,.cu-slash-command-list-item__icon_background-red svg,.cu-slash-command-list-item__icon_background-yellow svg,.cu-slash-command-list-item__icon_link svg{width:12px;height:12px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_background-blue svg,.dark-theme .cu-slash-command-list-item__icon_background-green svg,.dark-theme .cu-slash-command-list-item__icon_background-orange svg,.dark-theme .cu-slash-command-list-item__icon_background-purple svg,.dark-theme .cu-slash-command-list-item__icon_background-red svg,.dark-theme .cu-slash-command-list-item__icon_background-yellow svg,.dark-theme .cu-slash-command-list-item__icon_link svg{fill:#abaeb0}.cu-slash-command-list-item__icon_bold svg,.cu-slash-command-list-item__icon_due-date-today-me svg,.cu-slash-command-list-item__icon_italic svg,.cu-slash-command-list-item__icon_strikethrough svg,.cu-slash-command-list-item__icon_task-mention svg,.cu-slash-command-list-item__icon_time-estimate svg,.cu-slash-command-list-item__icon_togglelist svg,.cu-slash-command-list-item__icon_turn-into-togglelist svg{width:14px;height:14px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_bold svg,.dark-theme .cu-slash-command-list-item__icon_due-date-today-me svg,.dark-theme .cu-slash-command-list-item__icon_italic svg,.dark-theme .cu-slash-command-list-item__icon_strikethrough svg,.dark-theme .cu-slash-command-list-item__icon_task-mention svg,.dark-theme .cu-slash-command-list-item__icon_time-estimate svg,.dark-theme .cu-slash-command-list-item__icon_togglelist svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-togglelist svg{fill:#abaeb0}.cu-slash-command-list-item__icon_bulleted-list svg,.cu-slash-command-list-item__icon_due-date-today svg,.cu-slash-command-list-item__icon_due-date svg,.cu-slash-command-list-item__icon_numeric-list svg,.cu-slash-command-list-item__icon_start-date svg,.cu-slash-command-list-item__icon_turn-into-bulletedlist svg,.cu-slash-command-list-item__icon_turn-into-numberedlist svg{width:15px;height:15px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_bulleted-list svg,.dark-theme .cu-slash-command-list-item__icon_due-date-today svg,.dark-theme .cu-slash-command-list-item__icon_due-date svg,.dark-theme .cu-slash-command-list-item__icon_numeric-list svg,.dark-theme .cu-slash-command-list-item__icon_start-date svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-bulletedlist svg,.dark-theme .cu-slash-command-list-item__icon_turn-into-numberedlist svg{fill:#abaeb0}.cu-slash-command-list-item__icon_status-closed svg{width:16px;height:16px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_status-closed svg{fill:#abaeb0}.cu-slash-command-list-item__icon_attachment-google svg{width:16px;height:16px}.cu-slash-command-list-item__icon_attachment-box svg,.cu-slash-command-list-item__icon_attachment-dropbox svg,.cu-slash-command-list-item__icon_attachment-onedrive svg{width:17px;height:17px}.cu-slash-command-list-item__icon_attachment svg{width:18px;height:16px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_attachment svg{fill:#abaeb0}.cu-slash-command-list-item__icon_assign svg{width:13px;height:16px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_assign svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_watcher svg{width:17px;height:12px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_watcher svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_priority svg{width:10px;height:17px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_priority svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_status svg{width:12px;height:12px;fill:#7c828d;stroke:#7c828d;stroke-width:1.5px}.dark-theme .cu-slash-command-list-item__icon_status svg{fill:#abaeb0;stroke:#abaeb0}.cu-slash-command-list-item__icon_tags svg{width:15px;height:15px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_tags svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_location svg{width:18px;height:9px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_location svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_subtask svg{width:13px;height:13px;fill:#7c828d;stroke:#7c828d;stroke-width:1.5px}.dark-theme .cu-slash-command-list-item__icon_subtask svg{fill:#abaeb0;stroke:#abaeb0}.cu-slash-command-list-item__icon_waiting-on svg{width:13px;height:13px;fill:#7c828d;stroke:#7c828d;stroke-width:1.5px}.dark-theme .cu-slash-command-list-item__icon_waiting-on svg{fill:#abaeb0;stroke:#abaeb0}.cu-slash-command-list-item__icon_blocking svg{width:13px;height:13px;fill:#7c828d;stroke:#7c828d;stroke-width:1.5px}.dark-theme .cu-slash-command-list-item__icon_blocking svg{fill:#abaeb0;stroke:#abaeb0}.cu-slash-command-list-item__icon_user-mention svg{width:16px;height:16px;stroke:#7c828d}.dark-theme .cu-slash-command-list-item__icon_user-mention svg{stroke:#abaeb0}.cu-slash-command-list-item__icon_table svg{width:17px;height:17px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_table svg{fill:#abaeb0}.cu-slash-command-list-item__icon_position svg{width:17px;height:14px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_position svg{fill:#abaeb0}.cu-slash-command-list-item__icon_markdown svg{width:19px;height:17px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_markdown svg{fill:#abaeb0}.cu-slash-command-list-item__icon_button svg{margin-top:2px;width:16px;height:16px;fill:#7c828d}.dark-theme .cu-slash-command-list-item__icon_button svg{fill:#abaeb0}.cu-slash-command-list-item__icon_doc svg{width:13px;height:15px;fill:#292d34}.dark-theme .cu-slash-command-list-item__icon_doc svg{fill:#d5d6d7}.cu-slash-command-list-item__name{flex-grow:1}.cu-slash-command-list-item__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#000}.dark-theme .cu-slash-command-list-item__title{color:#d5d6d7}.cu-slash-command-list-item__desc{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;padding-top:2px;color:#b9bec7}.dark-theme .cu-slash-command-list-item__desc{color:#828588}.cu-slash-command-list-item__key{display:flex;align-items:center;justify-content:center;min-width:24px;height:24px;padding:0 5px;margin-left:10px;font:400 12px/1 Courier New,Courier,monospace;color:#c03f2e;white-space:nowrap;border:1px solid #e9ebf0;border-radius:2px;background:#fafbfc}.dark-theme .cu-slash-command-list-item__key{border:1px solid #1e272e;background:#2b343b}.cu-slash-command-list-item-mini .cu-slash-command-list-item__key{display:none}"],encapsulation:2,changeDetection:0}),e})();var Le=i("HPyy"),Ne=i("WkAz"),ze=i("EP2k");function qe(e,t){if(1&e&&s.Xb(0,"cu-avatar",8),2&e){const e=s.uc();s.Dc("user",e.user)}}function Ge(e,t){if(1&e&&s.Xb(0,"cu-user-group-avatar",9),2&e){const e=s.uc();s.Dc("group",e.userGroup)("selected",e.selected)("bordered",!1)("avatarSize",28)}}function Ve(e,t){1&e&&s.Xb(0,"div",10)}function Be(e,t){1&e&&s.Xb(0,"div",11)}function Xe(e,t){if(1&e&&(s.ac(0),s.dd(1),s.vc(2,"username"),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.ed(s.xc(2,1,e.user,"Me"))}}function He(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.gd("",e.userGroup.name," @",e.userGroup.handle,"")}}function We(e,t){if(1&e&&(s.cc(0,"div",12),s.bd(1,Xe,3,4,"ng-container",13),s.bd(2,He,2,2,"ng-container",13),s.bc()),2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",e.user),s.Ib(1),s.Dc("ngIf",e.userGroup)}}function Ke(e,t){1&e&&(s.cc(0,"div",12),s.gc(1,14),s.bc())}function Qe(e,t){1&e&&(s.cc(0,"div",12),s.gc(1,15),s.bc())}function Ze(e,t){1&e&&s.Xb(0,"div",16)}const Ye=function(e){return{"cu-slash-command-user-list-item_active cu-slash-command-list-item_selected":e}};let Je=(()=>{class e{constructor(){this.selected=!1,this.checked=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-user-list-item"]],inputs:{id:"id",user:"user",userGroup:"userGroup",selected:"selected",checked:"checked"},decls:10,vars:17,consts:function(){let e,t;return e=$localize`:@@common_unassign␟5fd7e46e606b0a8a07eccc380eceb2a4c5eedfcf␟1572592250709760273: Unassign `,t=$localize`:@@common_reassign␟297183ecd2459472b9214c6e85808dfb32a74e4f␟6137766794925494290: Reassign `,[[1,"cu-slash-command-user-list-item",3,"ngClass"],[1,"cu-slash-command-user-list-item__avatar"],[3,"user",4,"ngIf"],[3,"group","selected","bordered","avatarSize",4,"ngIf"],["class","cu-slash-command-user-list-item__avatar_unassign","icon","close-o",4,"ngIf"],["icon","refresh",4,"ngIf"],["class","cu-slash-command-user-list-item__username",4,"ngIf"],["class","cu-slash-command-user-list-item__check","icon","dropdown-settings_mark",4,"ngIf"],[3,"user"],[3,"group","selected","bordered","avatarSize"],["icon","close-o",1,"cu-slash-command-user-list-item__avatar_unassign"],["icon","refresh"],[1,"cu-slash-command-user-list-item__username"],[4,"ngIf"],e,t,["icon","dropdown-settings_mark",1,"cu-slash-command-user-list-item__check"]]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.bd(2,qe,1,1,"cu-avatar",2),s.bd(3,Ge,1,4,"cu-user-group-avatar",3),s.bd(4,Ve,1,0,"div",4),s.bd(5,Be,1,0,"div",5),s.bc(),s.bd(6,We,3,2,"div",6),s.bd(7,Ke,2,0,"div",6),s.bd(8,Qe,2,0,"div",6),s.bd(9,Ze,1,0,"div",7),s.bc()),2&e&&(s.Ob("cu-slash-command-user-list-item_active",t.selected)("cu-slash-command-user-list-item_clear","unassign"===t.id)("cu-slash-command-user-list-item_reassign","reassign"===t.id),s.Dc("ngClass",s.Hc(15,Ye,t.selected)),s.Ib(2),s.Dc("ngIf","unassign"!==t.id&&"reassign"!==t.id&&t.user),s.Ib(1),s.Dc("ngIf",t.userGroup),s.Ib(1),s.Dc("ngIf","unassign"===t.id),s.Ib(1),s.Dc("ngIf","reassign"===t.id),s.Ib(1),s.Dc("ngIf","unassign"!==t.id&&"reassign"!==t.id),s.Ib(1),s.Dc("ngIf","unassign"===t.id),s.Ib(1),s.Dc("ngIf","reassign"===t.id),s.Ib(1),s.Dc("ngIf",t.checked))},directives:[c.o,c.q,Le.a,Ne.a,U.a],pipes:[ze.a],styles:[".cu-slash-command-user-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:8px 15px;cursor:pointer}.cu-slash-command-user-list-item:hover{transition:none}.cu-slash-command-user-list-item_clear .cu-slash-command-user-list-item__username{color:#d16464}.cu-slash-command-user-list-item_clear .cu-slash-command-user-list-item__avatar{width:24px;height:24px;margin:4px 14px 0 4px;fill:#d16464}.cu-slash-command-user-list-item_reassign .cu-slash-command-user-list-item__avatar{width:17px;height:17px;margin:6px 21px 5px 4px;fill:#aeacb0}.cu-slash-command-user-list-item:hover,.cu-slash-command-user-list-item_active{background:#f2f3f4}.dark-theme .cu-slash-command-user-list-item:hover,.dark-theme .cu-slash-command-user-list-item_active{background:#2b343b}.cu-slash-command-user-list-item__avatar{margin:0 15px 0 0;flex-shrink:0}.cu-slash-command-user-list-item__avatar_unassign{width:19px;height:19px;border-radius:50%;border:1px solid #fff;background:#fff}.cu-slash-command-user-list-item__username{flex-grow:1;font:14px Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-slash-command-user-list-item__username{color:#d5d6d7}.cu-slash-command-user-list-item__email{font:12px Gotham Pro,Proxima Nova,arial,serif;color:rgba(84,77,97,.6)}.cu-slash-command-user-list-item__check{width:14px;height:14px;margin-left:10px}.cu-slash-command-user-list-item__check use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command-user-list-item__check use{fill:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),e})();var et=i("GXRk"),tt=i("NsZK");function it(e,t){1&e&&s.Xb(0,"div",3)}const ot=function(e){return{color:e}};let nt=(()=>{class e{constructor(){this.StatusTypes=et.g,this.selected=!1,this.checked=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-status-list-item"]],inputs:{status:"status",selected:"selected",checked:"checked"},decls:4,vars:13,consts:function(){let e;return e=$localize`:@@help_tooltip-msg--done-tasks-not-overdue␟be7ba61a87a4ec3f0d970a51a30db570675d8ea0␟7672452092809471655:Done tasks are not considered overdue and will unblock any Dependencies waiting on them.`,[[1,"cu-slash-command-status-list-item",3,"ngStyle"],[1,"cu-slash-command-status-list-item__status"],["class","cu-slash-command-status-list-item__status-done","icon","status-done","cuTooltip",e,"tooltipLifeTime","15000",4,"ngIf"],["icon","status-done","cuTooltip",e,"tooltipLifeTime","15000",1,"cu-slash-command-status-list-item__status-done"]]},template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.dd(2),s.bc(),s.bd(3,it,1,0,"div",2),s.bc()),2&e&&(s.Ob("cu-slash-command-status-list-item_closed",t.status.type===t.StatusTypes.Closed)("cu-slash-command-status-list-item_open",t.status.type===t.StatusTypes.Open)("cu-slash-command-status-list-item_active",t.selected),s.Dc("ngStyle",s.Hc(11,ot,t.status.color)),s.Ib(1),s.Ob("cu-slash-command-status-list-item__status_checked",t.checked),s.Ib(1),s.fd(" ",t.status.status," "),s.Ib(1),s.Dc("ngIf",t.status.type===t.StatusTypes.Done))},directives:[c.t,c.q,U.a,tt.a],styles:['.cu-slash-command-status-list-item{transition:background-color .07s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;border-radius:4px;padding:10px 15px 8px 26px;margin:5px 10px;white-space:nowrap;cursor:pointer;overflow:hidden;display:flex;align-items:center;justify-content:space-between}.cu-slash-command-status-list-item:hover,.cu-slash-command-status-list-item_active{background-color:currentColor;color:#fff}.cu-slash-command-status-list-item:hover .cu-slash-command-status-list-item__status,.cu-slash-command-status-list-item_active .cu-slash-command-status-list-item__status{color:#fff}.cu-slash-command-status-list-item:after{content:"";display:block;position:absolute;width:10px;height:10px;left:8px;top:10px;border-radius:2px;background-color:currentColor}.cu-slash-command-status-list-item+.cu-slash-command-status-list-item{margin-top:5px}.cu-slash-command-status-list-item__status{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#bbb;font:500 11px/11px Gotham Pro,Proxima Nova,arial,serif;text-transform:uppercase;transition:background-color .1s;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-right:10px;flex-grow:1}.cu-slash-command-status-list-item__status_checked{font:600 11px/11px Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-slash-command-status-list-item__status_checked{color:#d5d6d7}.cu-slash-command-status-list-item__status-done{display:inline-flex;stroke:#67cb48;height:12px;width:12px;margin-left:5px}'],encapsulation:2,changeDetection:0}),e})();function st(e,t){1&e&&s.Xb(0,"div",4)}const ct=function(e){return{fill:e}};let at=(()=>{class e{constructor(){this.selected=!1,this.checked=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-priority-list-item"]],inputs:{priority:"priority",selected:"selected",checked:"checked"},decls:5,vars:10,consts:[[1,"cu-slash-command-priority-list-item"],[1,"cu-slash-command-priority-list-item__icon",3,"icon","ngStyle"],[1,"cu-slash-command-priority-list-item__name"],["class","cu-slash-command-priority-list-item__check","icon","dropdown-settings_mark",4,"ngIf"],["icon","dropdown-settings_mark",1,"cu-slash-command-priority-list-item__check"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.Xb(1,"div",1),s.cc(2,"div",2),s.dd(3),s.bc(),s.bd(4,st,1,0,"div",3),s.bc()),2&e&&(s.Ob("cu-slash-command-priority-list-item_active",t.selected)("cu-slash-command-priority-list-item_clear","Clear"===t.priority.priority),s.Ib(1),s.Dc("icon","Clear"===t.priority.priority?"close":"priorities")("ngStyle",s.Hc(8,ct,t.priority.color)),s.Ib(2),s.fd(" ",t.priority.priority," "),s.Ib(1),s.Dc("ngIf",t.checked))},directives:[U.a,c.t,c.q],styles:[".cu-slash-command-priority-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:11px 15px 11px 12px;border-top:1px solid #f4f4f4;cursor:pointer}.dark-theme .cu-slash-command-priority-list-item{border-top:1px solid #1e272e}.cu-slash-command-value-list__item:first-child .cu-slash-command-priority-list-item{border-top:0}.cu-slash-command-priority-list-item_clear .cu-slash-command-priority-list-item__name{color:#d16464}.cu-slash-command-priority-list-item_clear .cu-slash-command-priority-list-item__icon{width:10px;height:10px;margin:4px;stroke:#d16464}.cu-slash-command-priority-list-item__icon{height:18px;width:18px}.cu-slash-command-priority-list-item__name{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#544d61;margin-left:15px;text-transform:capitalize;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;flex-grow:1}.dark-theme .cu-slash-command-priority-list-item__name{color:#d5d6d7}.cu-slash-command-priority-list-item:hover,.cu-slash-command-priority-list-item_active{background-color:#f2f3f4}.dark-theme .cu-slash-command-priority-list-item:hover,.dark-theme .cu-slash-command-priority-list-item_active{background:#2b343b}.cu-slash-command-priority-list-item__check{width:14px;height:14px;margin-left:10px}.cu-slash-command-priority-list-item__check use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command-priority-list-item__check use{fill:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),e})();function rt(e,t){1&e&&s.Xb(0,"div",6)}function lt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.ed(e.tag.name)}}function dt(e,t){1&e&&(s.ac(0),s.gc(1,7),s.Zb())}function ut(e,t){1&e&&s.Xb(0,"div",8)}const mt=function(e){return{color:e}};let pt=(()=>{class e{constructor(){this.selected=!1,this.checked=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-tag-list-item"]],inputs:{tag:"tag",selected:"selected",checked:"checked"},decls:7,vars:11,consts:function(){let e;return e=$localize`:@@common_clear␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,[[1,"cu-slash-command-tag-list-item"],["class","cu-slash-command-tag-list-item__icon","icon","close",4,"ngIf"],[1,"cu-slash-command-tag-list-item__name",3,"ngStyle"],[4,"ngIf","ngIfElse"],["clearTagTmpl",""],["class","cu-slash-command-tag-list-item__check","icon","dropdown-settings_mark",4,"ngIf"],["icon","close",1,"cu-slash-command-tag-list-item__icon"],e,["icon","dropdown-settings_mark",1,"cu-slash-command-tag-list-item__check"]]},template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.bd(1,rt,1,0,"div",1),s.cc(2,"div",2),s.bd(3,lt,2,1,"ng-container",3),s.bd(4,dt,2,0,"ng-template",null,4,s.cd),s.bc(),s.bd(6,ut,1,0,"div",5),s.bc()),2&e){const e=s.Rc(5);s.Ob("cu-slash-command-tag-list-item_active",t.selected)("cu-slash-command-tag-list-item_clear",!t.tag),s.Ib(1),s.Dc("ngIf",!t.tag),s.Ib(1),s.Dc("ngStyle",s.Hc(9,mt,!!t.tag&&(t.tag.tag_bg||"#000000"))),s.Ib(1),s.Dc("ngIf",t.tag)("ngIfElse",e),s.Ib(3),s.Dc("ngIf",t.checked)}},directives:[c.q,c.t,U.a],styles:[".cu-slash-command-tag-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:11px 15px;border-bottom:1px solid #f4f4f4;cursor:pointer}.dark-theme .cu-slash-command-tag-list-item{border-bottom:1px solid #1e272e}.cu-slash-command-tag-list-item_clear .cu-slash-command-tag-list-item__name{color:#d16464;margin-left:12px}.cu-slash-command-tag-list-item_clear .cu-slash-command-tag-list-item__icon{width:10px;height:10px;margin:4px;stroke:#d16464}.cu-slash-command-tag-list-item__name{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#544d61;text-transform:capitalize;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;flex-grow:1}.dark-theme .cu-slash-command-tag-list-item__name{color:#d5d6d7}.cu-slash-command-tag-list-item:hover,.cu-slash-command-tag-list-item_active{background-color:#f2f3f4}.dark-theme .cu-slash-command-tag-list-item:hover,.dark-theme .cu-slash-command-tag-list-item_active{background:#2b343b}.cu-slash-command-tag-list-item__check{width:14px;height:14px;margin-left:10px}.cu-slash-command-tag-list-item__check use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command-tag-list-item__check use{fill:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),e})();var ht=i("T7pm");function ft(e,t){1&e&&s.Xb(0,"div",4)}let bt=(()=>{class e{constructor(){this.selected=!1,this.checked=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-attachment-list-item"]],inputs:{attachment:"attachment",selected:"selected",checked:"checked"},decls:5,vars:6,consts:[[1,"cu-slash-command-attachment-list-item"],["thumbSize","small",1,"cu-slash-command-attachment-list-item__preview",3,"attachment"],[1,"cu-slash-command-attachment-list-item__name"],["class","cu-slash-command-attachment-list-item__check","icon","dropdown-settings_mark",4,"ngIf"],["icon","dropdown-settings_mark",1,"cu-slash-command-attachment-list-item__check"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.Xb(1,"cu-attachment-preview",1),s.cc(2,"div",2),s.dd(3),s.bc(),s.bd(4,ft,1,0,"div",3),s.bc()),2&e&&(s.Ob("cu-slash-command-attachment-list-item_active",t.selected),s.Ib(1),s.Dc("attachment",t.attachment),s.Ib(2),s.gd(" ",null==t.attachment?null:t.attachment.title,".",null==t.attachment?null:t.attachment.extension," "),s.Ib(1),s.Dc("ngIf",t.checked))},directives:[ht.a,c.q,U.a],styles:['.cu-slash-command-attachment-list-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:5px 15px;border-bottom:1px solid #f4f4f4;cursor:pointer}.dark-theme .cu-slash-command-attachment-list-item{border-bottom:1px solid #1e272e}.cu-slash-command-attachment-list-item__preview{display:flex;align-items:center;justify-content:center;margin:0 10px 0 0;width:60px;min-width:60px;flex-shrink:0}.cu-slash-command-attachment-list-item__name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#544d61;flex-grow:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-slash-command-attachment-list-item__name{font-family:var(--global-font-support)}}.dark-theme .cu-slash-command-attachment-list-item__name{color:#d5d6d7}.cu-slash-command-attachment-list-item:hover,.cu-slash-command-attachment-list-item_active{background-color:#f2f3f4}.dark-theme .cu-slash-command-attachment-list-item:hover,.dark-theme .cu-slash-command-attachment-list-item_active{background:#2b343b}.cu-slash-command-attachment-list-item__check{width:14px;height:14px;margin-left:10px}.cu-slash-command-attachment-list-item__check use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command-attachment-list-item__check use{fill:var(--theme-main-color)}}'],encapsulation:2,changeDetection:0}),e})();var gt=i("gBUK");let _t=(()=>{class e{constructor(e){this.colorService=e}transform(e,t=55){return this.colorService.darkenColor(e,t)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(gt.a))},e.\u0275pipe=s.Vb({name:"darkenColor",type:e,pure:!0}),e})(),vt=(()=>{class e{constructor(){this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-color-list-item"]],inputs:{value:"value",selected:"selected"},decls:5,vars:9,consts:[[1,"cu-slash-color-list-item"],[1,"cu-slash-color-list-item__color"],[1,"cu-slash-color-list-item__title"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.vc(2,"darkenColor"),s.bc(),s.cc(3,"div",2),s.dd(4),s.bc(),s.bc()),2&e&&(s.Ob("cu-slash-color-list-item_active",t.selected),s.Ib(1),s.ad("background",t.value.data)("border-color",s.wc(2,7,t.value.data)),s.Ib(3),s.ed(t.value.name))},pipes:[_t],styles:[".cu-slash-color-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:8px 30px 8px 15px;cursor:pointer}.cu-slash-color-list-item:hover{transition:none}.cu-slash-color-list-item:hover,.cu-slash-color-list-item_active{background:#f2f3f4}.dark-theme .cu-slash-color-list-item:hover,.dark-theme .cu-slash-color-list-item_active{background:#2b343b}.cu-slash-color-list-item__color{width:24px;height:24px;margin:5px;border:1px solid transparent}.cu-slash-color-list-item__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-slash-color-list-item__title{color:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})(),kt=(()=>{class e{constructor(){this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-date-list-item"]],inputs:{data:"data",selected:"selected"},decls:4,vars:9,consts:[[1,"cu-slash-date-list-item"],[3,"icon"],[1,"cu-slash-date-list-item__title"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.Xb(1,"div",1),s.cc(2,"div",2),s.dd(3),s.bc(),s.bc()),2&e&&(s.Ob("cu-slash-date-list-item_active",t.selected)("cu-slash-date-list-item_clear","clear"===t.data.code),s.Ib(1),s.Mb("cu-slash-date-list-item__icon cu-slash-date-list-item__icon-",t.data.icon,""),s.Dc("icon",t.data.icon),s.Ib(2),s.ed(t.data.name))},directives:[U.a],styles:[".cu-slash-date-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:8px 30px 8px 15px;cursor:pointer}.cu-slash-date-list-item:hover{transition:none}.cu-slash-date-list-item_clear .cu-slash-date-list-item__title{color:#d16464}.cu-slash-date-list-item:hover,.cu-slash-date-list-item_active{background:#f2f3f4}.dark-theme .cu-slash-date-list-item:hover,.dark-theme .cu-slash-date-list-item_active{background:#2b343b}.cu-slash-date-list-item__icon{width:20px;margin-right:12px}.cu-slash-date-list-item__icon svg{width:20px;height:20px;stroke-width:2px}.cu-slash-date-list-item__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-slash-date-list-item__title{color:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})(),yt=(()=>{class e{constructor(){this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-simple-list-item"]],inputs:{data:"data",selected:"selected"},decls:3,vars:3,consts:[[1,"cu-slash-simple-list-item"],[1,"cu-slash-simple-list-item__title"]],template:function(e,t){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.dd(2),s.bc(),s.bc()),2&e&&(s.Ob("cu-slash-simple-list-item_active",t.selected),s.Ib(2),s.ed(t.data.name))},styles:[".cu-slash-simple-list-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;padding:8px 30px 8px 15px;cursor:pointer}.cu-slash-simple-list-item:hover{transition:none}.cu-slash-simple-list-item:hover,.cu-slash-simple-list-item_active{background:#f2f3f4}.dark-theme .cu-slash-simple-list-item:hover,.dark-theme .cu-slash-simple-list-item_active{background:#2b343b}.cu-slash-simple-list-item__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-slash-simple-list-item__title{color:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})();var wt=i("peMq"),xt=i("bNw/"),It=function(e,t,i,o){return new(i||(i=Promise))(function(n,s){function c(e){try{r(o.next(e))}catch(t){s(t)}}function a(e){try{r(o.throw(e))}catch(t){s(t)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(c,a)}r((o=o.apply(e,t||[])).next())})};const Tt=["input"],Ct=["pop"];function Dt(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.ed(e.selectedCommand.title)}}function Ot(e,t){1&e&&s.Yb(0)}function St(e,t){1&e&&s.Yb(0)}function Et(e,t){if(1&e&&(s.cc(0,"div",22),s.dd(1),s.bc()),2&e){const e=s.uc(2);s.Ib(1),s.fd(" ",e.errorMessage," ")}}function Pt(e,t){1&e&&s.Xb(0,"cu-loader",23)}function jt(e,t){1&e&&s.Yb(0)}function At(e,t){if(1&e){const e=s.dc();s.cc(0,"div",24),s.qc("click",function(){return s.Uc(e),s.uc(2).handleEnter()}),s.gc(1,25),s.bc()}}function $t(e,t){if(1&e){const e=s.dc();s.cc(0,"div",14),s.cc(1,"span"),s.dd(2),s.bc(),s.cc(3,"span"),s.cc(4,"strong"),s.dd(5,"/"),s.bc(),s.bd(6,Dt,2,1,"ng-container",15),s.bc(),s.bd(7,Ot,1,0,"ng-container",16),s.bd(8,St,1,0,"ng-container",16),s.cc(9,"div",17,18),s.qc("keydown",function(t){return s.Uc(e),s.uc().keyDown(t)})("keyup",function(t){return s.Uc(e),s.uc().keyUp(t)})("focus",function(t){return s.Uc(e),s.uc().onFocus(t)})("blur",function(t){return s.Uc(e),s.uc().onBlur(t)})("clickOutside",function(t){return s.Uc(e),s.uc().clickOutside(t)}),s.bc(),s.bd(12,Et,2,1,"div",19),s.bd(13,Pt,1,0,"cu-loader",20),s.bd(14,jt,1,0,"ng-container",16),s.bd(15,At,2,0,"div",21),s.cc(16,"span"),s.dd(17),s.bc(),s.bc()}if(2&e){const e=s.uc(),t=s.Rc(24),i=s.Rc(26),o=s.Rc(4),n=s.Rc(28);s.Ib(1),s.Mb("cu-slash-command__original-text ",e.inputClass,""),s.Ib(1),s.ed(e.textBefore),s.Ib(1),s.Mb("cu-slash-command__operator ",e.inputClass,""),s.Ib(3),s.Dc("ngIf",e.selectedCommand),s.Ib(1),s.Dc("ngIf",((null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_ASSIGN.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_WATCHER.key)&&e.selectedValue&&e.selectedValue.length>0)("ngIfThen",t),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_TAG.key&&e.selectedValue&&e.selectedValue.length>0)("ngIfThen",i),s.Ib(1),s.Mb("cu-slash-command__input  ",e.inputClass,""),s.Dc("placement",e.dropdownPlacement||e.calcPlacement)("container",e.dropdownContainer)("containerClass",e.modifier?"cu-slash-command__tooltip "+e.modifier:"cu-slash-command__tooltip")("popover",o)("isOpen",!e.selectedCommand||"dropdown"===e.selectedCommand.inputType),s.Jb("placeholder",e.selectedCommand?e.sprintPointsValue?e.selectedCommand.secondHint:e.selectedCommand.inputHint:"Type command..."),s.Ib(3),s.Dc("ngIf",e.errorMessage),s.Ib(1),s.Dc("ngIf",e.validating),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_POSITION.key)("ngIfThen",n),s.Ib(1),s.Dc("ngIf",!e.validating&&e.currentText&&("text"===(null==e.selectedCommand?null:e.selectedCommand.inputType)||"number"===(null==e.selectedCommand?null:e.selectedCommand.inputType))),s.Ib(1),s.Mb("cu-slash-command__original-text ",e.inputClass,""),s.Ib(1),s.ed(e.textAfter)}}function Ut(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",37),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setCommand(t.data)})("afterFilter",function(t){return s.Uc(e),s.uc(2).commandsFiltered(t)}),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(6);s.Dc("query",e.currentText)("values",e.commandValues)("itemTemplate",t)("compareFn",e.compareCommandsFn)}}function Rt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",38),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setValue(t)}),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(8);s.Dc("query",e.currentText)("values",e.userValues)("checkedValue",e.selectedValue)("itemTemplate",t)("compareFn",e.compareUsersFn)("compareFn2",e.weights?(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_ASSIGN_COMMENT.key?e.compareCommentFn:(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_ASSIGN.key?e.compareAssignFn:(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_USER_MENTION.key?e.compareMentionFn:null:null)}}function Mt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",39),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setValue(t)}),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(10);s.Dc("query",e.currentText)("values",e.statusValues)("checkedValue",e.selectedValue)("itemTemplate",t)}}function Ft(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",39),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setValue(t)}),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(12);s.Dc("query",e.currentText)("values",e.priorityValues)("checkedValue",e.selectedValue)("itemTemplate",t)}}function Lt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",39),s.qc("selectValue",function(t){return s.Uc(e),s.uc(3).setValue(t)}),s.bc()}if(2&e){const e=s.uc(3),t=s.Rc(22);s.Dc("query",e.currentText)("values",e.pointValues)("checkedValue",e.selectedValue)("itemTemplate",t)}}function Nt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",41),s.qc("selectValue",function(t){return s.Uc(e),s.uc(3).setSprintUser(t)}),s.bc()}if(2&e){const e=s.uc(3),t=s.Rc(8);s.Dc("query",e.currentText)("values",e.assigneesValues)("itemTemplate",t)("compareFn",e.compareUsersFn)}}function zt(e,t){if(1&e&&(s.ac(0),s.bd(1,Lt,1,4,"cu-value-list",29),s.bd(2,Nt,1,4,"cu-value-list",40),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",!e.sprintPointsValue),s.Ib(1),s.Dc("ngIf",e.sprintPointsValue)}}function qt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",42),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setValue(t)})("createCustom",function(t){return s.Uc(e),s.uc(2).createCustom(t)})("onPage",function(){s.Uc(e);const t=s.uc(2);return t.checkPaging({type:t.PageTypes.Tags})}),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(14);s.Dc("query",e.currentText)("values",e.tagValues)("checkedValue",e.selectedValue)("itemTemplate",t)("emptyMessage",null!=e.options&&null!=e.options.t&&e.options.t.allowCreate?"Press Enter to create new tag":"No items found")("allowCustom",!0)}}function Gt(e,t){if(1&e){const e=s.dc();s.cc(0,"div",45),s.cc(1,"div",46),s.qc("click",function(){s.Uc(e);const t=s.uc(3);return t.setAttachmentType(t.SlashCommandAttachmentType.Upload)}),s.gc(2,47),s.bc(),s.cc(3,"div",46),s.qc("click",function(){s.Uc(e);const t=s.uc(3);return t.setAttachmentType(t.SlashCommandAttachmentType.Existing)}),s.gc(4,48),s.bc(),s.bc()}if(2&e){const e=s.uc(3);s.Ib(1),s.Ob("cu-slash-command__tab_active",e.attachmentType===e.SlashCommandAttachmentType.Upload),s.Ib(2),s.Ob("cu-slash-command__tab_active",e.attachmentType===e.SlashCommandAttachmentType.Existing)}}function Vt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-uploader-bar",49),s.qc("ondrop",function(t){return s.Uc(e),s.uc(3).addFiles(t)})("dragover",function(e){return e.preventDefault()})("onFilesAdded",function(t){return s.Uc(e),s.uc(3).addFiles(t)}),s.bc()}2&e&&s.Dc("badgeVisible",!1)}function Bt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",50),s.qc("selectValue",function(t){return s.Uc(e),s.uc(3).setValue(t)}),s.bc()}if(2&e){const e=s.uc(3),t=s.Rc(16);s.Dc("query",e.currentText)("values",e.attachmentValues)("itemTemplate",t)}}function Xt(e,t){if(1&e&&(s.ac(0),s.bd(1,Gt,5,4,"div",43),s.bd(2,Vt,1,1,"cu-uploader-bar",44),s.bd(3,Bt,1,3,"cu-value-list",31),s.Zb()),2&e){const e=s.uc(2);s.Ib(1),s.Dc("ngIf",null==e.attachments?null:e.attachments.length),s.Ib(1),s.Dc("ngIf",e.attachmentType===e.SlashCommandAttachmentType.Upload),s.Ib(1),s.Dc("ngIf",e.attachmentType===e.SlashCommandAttachmentType.Existing)}}function Ht(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"cu-textarea-value",51),s.qc("onSubmit",function(t){return s.Uc(e),s.uc(2).submitMarkdown(t)}),s.bc(),s.Zb()}2&e&&(s.Ib(1),s.ad("height",45,"vh"))}function Wt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",50),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setValue(t)}),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(18);s.Dc("query",e.currentText)("values",e.bgColorValues)("itemTemplate",t)}}function Kt(e,t){1&e&&(s.cc(0,"div",54),s.gc(1,55),s.bc())}function Qt(e,t){1&e&&s.Xb(0,"cu-loader")}function Zt(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",52),s.qc("selectValue",function(t){return s.Uc(e),s.uc(2).setValue(t)}),s.bd(1,Kt,2,0,"div",53),s.bd(2,Qt,1,0,"cu-loader",15),s.bc()}if(2&e){const e=s.uc(2),t=s.Rc(20);s.Dc("query",e.currentText)("values",e.datesValues)("itemTemplate",t)("spaceSelectionEnabled",!1)("showEmptyMessage",!e.languageProcessing),s.Ib(1),s.Dc("ngIf",!e.languageProcessing&&!e.parsedDate),s.Ib(1),s.Dc("ngIf",e.languageProcessing)}}function Yt(e,t){1&e&&(s.cc(0,"div",54),s.gc(1,58),s.bc())}function Jt(e,t){1&e&&s.Xb(0,"cu-loader")}function ei(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-value-list",52),s.qc("selectValue",function(t){return s.Uc(e),s.uc(3).setValue(t)}),s.bd(1,Yt,2,0,"div",53),s.bd(2,Jt,1,0,"cu-loader",15),s.bc()}if(2&e){const e=s.uc(3),t=s.Rc(22);s.Dc("query",e.currentText)("values",e.estimateValues)("itemTemplate",t)("spaceSelectionEnabled",!1)("showEmptyMessage",!e.languageProcessing),s.Ib(1),s.Dc("ngIf",!e.languageProcessing&&!e.parsedTimeEstimate),s.Ib(1),s.Dc("ngIf",e.languageProcessing)}}function ti(e,t){if(1&e){const e=s.dc();s.cc(0,"div"),s.gc(1,59),s.bc(),s.cc(2,"div"),s.gc(3,60),s.bc(),s.cc(4,"div"),s.cc(5,"cu-checkbox",61),s.qc("onChange",function(){return s.Uc(e),s.uc(3).updateUser()}),s.gc(6,62),s.bc(),s.bc(),s.cc(7,"div"),s.cc(8,"span",63),s.qc("click",function(){return s.Uc(e),s.uc(3).cancelTimeEstimate()}),s.gc(9,64),s.bc(),s.cc(10,"div",65),s.qc("click",function(){return s.Uc(e),s.uc(3).saveTimeEstimate()}),s.gc(11,66),s.bc(),s.bc()}if(2&e){const e=s.uc(3);s.Ib(5),s.Dc("checked",null==e.meUser?null:e.meUser.seen_time_estimate_warning)}}function ii(e,t){if(1&e&&(s.ac(0),s.bd(1,ei,3,7,"cu-value-list",56),s.vc(2,"async"),s.bd(3,ti,12,1,"ng-template",null,57,s.cd),s.Zb()),2&e){const e=s.Rc(4),t=s.uc(2);s.Ib(1),s.Dc("ngIf",s.wc(2,2,t.dontShowEstimateWarning$))("ngIfElse",e)}}function oi(e,t){if(1&e){const e=s.dc();s.cc(0,"div"),s.cc(1,"cu-reminder-row-notification-dropdown-menu",67),s.qc("onSelect",function(t){return s.Uc(e),s.uc(2).selectMinutesBefore(t)}),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(1),s.Dc("items",e.reminderItems)("modifier",e.modifier)("minutesBefore",null)}}function ni(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-category-list",68,69),s.qc("onSelect",function(t){return s.Uc(e),s.uc(2).selectCategory(t)}),s.bc()}if(2&e){const e=s.uc(2);s.Dc("query",e.currentText)("displaySearch",!1)("showTaskCount",!1)("selectableProject",!0)("defaultProject",null==e.currentValues||null==e.currentValues.location?null:e.currentValues.location.project)("selectedCategory",null==e.currentValues||null==e.currentValues.location||null==e.currentValues.location.category?null:e.currentValues.location.category.id)("selectedSubcategory",null==e.currentValues||null==e.currentValues.location||null==e.currentValues.location.subcategory?null:e.currentValues.location.subcategory.id)("singleCategory",!1)("handleGlobalKeys",!0)}}function si(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-task-selector",70,71),s.qc("onSelect",function(t){return s.Uc(e),s.uc(2).selectTask(t)}),s.bc()}if(2&e){const e=s.uc(2);s.Dc("showSearch",!1)("query",e.currentText)("defaultProject",null==e.currentValues||null==e.currentValues.location?null:e.currentValues.location.project)("searchSubtasks",!0)("excludeParentTask",!1)("expandableSubtasks",!0)("task",e.task)("handleGlobalKeys",!0)}}function ci(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-button-options",72),s.qc("onChange",function(t){return s.Uc(e),s.uc(2).selectedValue=t})("onSubmit",function(t){return s.Uc(e),s.uc(2).setButtonOptions(t)}),s.bc()}if(2&e){const e=s.uc(2);s.Dc("options",e.selectedValue)}}function ai(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-listview-selector",73),s.qc("onSubmit",function(t){return s.Uc(e),s.uc(2).setListView(t)}),s.bc()}}function ri(e,t){if(1&e){const e=s.dc();s.cc(0,"div",26),s.qc("click",function(){return s.Uc(e),s.uc().pop.hide()}),s.bc(),s.bd(1,Ut,1,4,"cu-value-list",27),s.bd(2,Rt,1,6,"cu-value-list",28),s.bd(3,Mt,1,4,"cu-value-list",29),s.bd(4,Ft,1,4,"cu-value-list",29),s.bd(5,zt,3,2,"ng-container",15),s.bd(6,qt,1,6,"cu-value-list",30),s.bd(7,Xt,4,3,"ng-container",15),s.bd(8,Ht,2,2,"ng-container",15),s.bd(9,Wt,1,3,"cu-value-list",31),s.bd(10,Zt,3,7,"cu-value-list",32),s.bd(11,ii,5,4,"ng-container",15),s.bd(12,oi,2,3,"div",15),s.bd(13,ni,2,9,"cu-category-list",33),s.bd(14,si,2,8,"cu-task-selector",34),s.bd(15,ci,1,1,"cu-button-options",35),s.bd(16,ai,1,0,"cu-listview-selector",36)}if(2&e){const e=s.uc();s.Ib(1),s.Dc("ngIf",!e.selectedCommand),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_ASSIGN.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_ASSIGN_COMMENT.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_WATCHER.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_USER_MENTION.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_STATUS.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_PRIORITY.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_SPRINT_POINTS.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_TAG.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_ATTACHMENT.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_MARKDOWN.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_FORMAT_BACKGROUND.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_DUE_DATE.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_START_DATE.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_TIME_ESTIMATE.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_REMINDER_NOTIF.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_LOCATION.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_WAITING_ON.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_BLOCKING.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_LINK_TO.key||(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_TASK_MENTION.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_BUTTON.key),s.Ib(1),s.Dc("ngIf",(null==e.selectedCommand?null:e.selectedCommand.key)===e.COMMAND_LISTVIEW.key)}}function li(e,t){if(1&e&&s.Xb(0,"cu-command-list-item",74),2&e){const e=t.selected;s.Dc("command",t.data)("selected",e)}}function di(e,t){if(1&e&&s.Xb(0,"cu-user-list-item",75),2&e){const e=t.data,i=t.selected,o=t.checked;s.Dc("id",e.group?e.group.id:e.id)("user",e.group?null:e)("userGroup",e.group)("selected",i)("checked",o)}}function ui(e,t){if(1&e&&s.Xb(0,"cu-status-list-item",76),2&e){const e=t.selected,i=t.checked;s.Dc("status",t.data)("selected",e)("checked",i)}}function mi(e,t){if(1&e&&s.Xb(0,"cu-priority-list-item",77),2&e){const e=t.selected,i=t.checked;s.Dc("priority",t.data)("selected",e)("checked",i)}}function pi(e,t){if(1&e&&s.Xb(0,"cu-tag-list-item",78),2&e){const e=t.selected,i=t.checked;s.Dc("tag",t.data)("selected",e)("checked",i)}}function hi(e,t){if(1&e&&s.Xb(0,"cu-attachment-list-item",79),2&e){const e=t.selected,i=t.checked;s.Dc("attachment",t.data)("selected",e)("checked",i)}}function fi(e,t){if(1&e&&s.Xb(0,"cu-color-list-item",80),2&e){const e=t.selected;s.Dc("value",t.value)("selected",e)}}function bi(e,t){if(1&e&&s.Xb(0,"cu-date-list-item",81),2&e){const e=t.selected;s.Dc("data",t.data)("selected",e)}}function gi(e,t){if(1&e&&s.Xb(0,"cu-simple-list-item",81),2&e){const e=t.selected;s.Dc("data",t.data)("selected",e)}}function _i(e,t){if(1&e&&s.Xb(0,"cu-user-group",82),2&e){const e=s.uc();s.Dc("users",e.selectedValueUsers)("userGroups",e.selectedValueUserGroups)("showDropdown",!1)("avatarSize",30)}}function vi(e,t){if(1&e&&s.Xb(0,"cu-tags-view",83),2&e){const e=s.uc();s.Dc("readOnly",!0)("tags",e.selectedValue)}}function ki(e,t){if(1&e&&(s.cc(0,"span",84),s.dd(1),s.bc()),2&e){const e=s.uc();s.Ib(1),s.fd(" of ",null==e.currentValues||null==e.currentValues.position?null:e.currentValues.position.total,"")}}const yi=["*"];var wi=function(e){return e.Upload="upload",e.Existing="existing",e}({}),xi=function(e){return e.Tags="tags",e}({});let Ii=(()=>{class e{constructor(e,t,i,c,l,d,m){this.el=e,this.changeDetector=t,this.dateParserService=i,this.timezonesService=c,this.timeEstimatesService=l,this.dashboardEmbedService=d,this.document=m,this.destroy$=new a.a,this.active$=new r.a(!1),this.debounceProcessLanguage$=new a.a,this.languageProcessing=!1,this.timeEstimateData$=new r.a(null),this.dontShowEstimateWarning$=this.timeEstimateData$.pipe(Object(u.a)(e=>!e)),this.validating=!1,this.commandValues=[],this.userValues=[],this.statusValues=[],this.priorityValues=[],this.pointValues=[],this.assigneesValues=[],this.tagValues=[],this.datesValues=[],this.estimateValues=[],this.attachmentValues=[],this.bgColorValues=[{data:"",id:"",name:"Clear Background",equals:e=>!e,filter:e=>!e||"clear".includes(e)},...I.D.map(e=>({data:e.value,id:e.value,name:e.name+" Background",equals:t=>t.value===e.value,filter:t=>!t||e.name.toLowerCase().includes(t)}))],this.multiValues=!1,this.valueType="single",this.valueChanged=!1,this.reminderItems=n.b,this.needCaptureKeyEvents=!1,this.commandsNotFound=!1,this.lastFoundText="",this.COMMAND_ATTACHMENT=v.f,this.COMMAND_ASSIGN=v.c,this.COMMAND_REMINDER_NOTIF=v.hb,this.COMMAND_ASSIGN_COMMENT=v.d,this.COMMAND_WATCHER=v.Gb,this.COMMAND_TAG=v.nb,this.COMMAND_POSITION=v.bb,this.COMMAND_USER_MENTION=v.Eb,this.COMMAND_STATUS=v.kb,this.COMMAND_PRIORITY=v.cb,this.COMMAND_FORMAT_BACKGROUND=v.r,this.COMMAND_DUE_DATE=v.o,this.COMMAND_START_DATE=v.jb,this.COMMAND_TIME_ESTIMATE=v.pb,this.COMMAND_SPRINT_POINTS=v.ib,this.COMMAND_LOCATION=v.Z,this.COMMAND_LISTVIEW=v.Y,this.COMMAND_TASK_MENTION=v.ob,this.COMMAND_WAITING_ON=v.Fb,this.COMMAND_BLOCKING=v.k,this.COMMAND_LINK_TO=v.X,this.COMMAND_MARKDOWN=v.ab,this.COMMAND_BUTTON=v.l,this.PageTypes=xi,this.hostActive=!1,this.currentValues={},this.allowTurnIntoCommands=!1,this.options={},this.dateFormatting="m/d/y",this.militaryTime=!1,this.dropdownPlacement="bottom",this.dropdownContainer="body",this.alwaysVisible=!1,this.cancelCommand=new s.o,this.applyCommand=new s.o,this.onOpen=new s.o,this.onClose=new s.o,this.onSelectCommand=new s.o,this.onPage=new s.o,this.SlashCommandAttachmentType=wi,this.attachmentType=wi.Upload,this.DONE_ITEM={id:"DONE",name:"Done",data:"DONE",filter:e=>(!e||"done".includes(e))&&this.multiValues&&this.valueChanged},this.CLEAR_ITEM={id:"CLEAR",name:"Clear",data:"CLEAR",filter:e=>(!e||"clear".includes(e))&&this.selectedValue&&("array"!==this.valueType||this.selectedValue.length>0)},this.UNASSIGN_ITEM=Object.assign(Object.assign({},this.CLEAR_ITEM),{name:"Unassign",data:{id:"unassign",username:"Unassign"},filter:e=>(!e||"unassign".includes(e))&&this.selectedValue&&("array"!==this.valueType||this.selectedValue.length>0)}),this.UNASSIGN_ITEM_ALWAYS=Object.assign(Object.assign({},this.UNASSIGN_ITEM),{filter:e=>!e||"unassign".includes(e)}),this.REASSIGN_ITEM={id:"REASSIGN",name:"Reassign",data:{id:"reassign",username:"Reassign"},filter:e=>(!e||"reassign".includes(e))&&this.multiValues&&this.valueChanged&&this.selectedValue&&this.selectedValue.length>1},this.compareCommentFn=this.compareWeightType(o.c.COMMENT),this.compareAssignFn=this.compareWeightType(o.c.ASSIGN),this.compareMentionFn=this.compareWeightType(o.c.MENTION),this.compareCommandsFn=(e,t)=>{if(e.data.key===this.currentText)return-1;if(t.data.key===this.currentText)return 1;if(this.currentText){if(e.data.key===v.kb.key)return-1;if(t.data.key===v.kb.key)return 1;let i=e.data.title.toLowerCase().indexOf(this.currentText.toLowerCase()),o=t.data.title.toLowerCase().indexOf(this.currentText.toLowerCase()),n=e.data.key.indexOf(this.currentText.toLowerCase()),s=t.data.key.indexOf(this.currentText.toLowerCase());if(i=-1===i?Number.MAX_VALUE:i,o=-1===o?Number.MAX_VALUE:o,n=-1===n?Number.MAX_VALUE:n,s=-1===s?Number.MAX_VALUE:s,n!==s)return n-s;if(i!==o)return i-o}return this.commandValues.indexOf(e)-this.commandValues.indexOf(t)},this.compareUsersFn=(e,t)=>{if(this.isSpecialItem(e))return-1;if(this.isSpecialItem(t))return 1;if(this.currentText){const i=this.currentText.toLowerCase();if("you".includes(i)||"me".includes(i)){if(this.isMe(e.data))return-1;if(this.isMe(t.data))return 1}if(e.data.group&&!t.data.group)return 1;if(t.data.group&&!e.data.group)return-1;const o=t.data.group?t.data.group.name:t.data.username||t.data.email;let n=(e.data.group?e.data.group.name:e.data.username||e.data.email).toLowerCase().indexOf(i),s=o.toLowerCase().indexOf(i);if(-1===n&&(n=Number.MAX_VALUE),-1===s&&(s=Number.MAX_VALUE),n!==s)return n-s}return this.userValues.indexOf(e)-this.userValues.indexOf(t)}}get selectedValueUsers(){return this.selectedValue.filter(e=>!e.group)}get selectedValueUserGroups(){return this.selectedValue.filter(e=>e.group).map(e=>e.group)}ngOnInit(){this.debounceProcessLanguage$.pipe(Object(m.a)(()=>this.selectedCommand&&(this.selectedCommand.key===v.o.key||this.selectedCommand.key===v.jb.key)),Object(p.a)(),Object(h.a)(()=>{this.languageProcessing=!!this.currentText,this.changeDetector.markForCheck()}),Object(f.a)(500),Object(b.a)(e=>this.dateParserService.processLanguage(e,null,this.dateFormatting,!1)),Object(g.a)(this.destroy$)).subscribe(e=>{if(this.parsedDate=e.moment,this.parsedDateShowTime=e.updateTime,this.parsedDate){const e=w.c[this.dateFormatting||"m/d/y"],t=this.militaryTime?"H:mm":"h:mm a";this.parsedDateText=this.timezonesService.formatDateTime(this.parsedDate,this.parsedDateShowTime?`${e}, ${t}`:e)}else this.parsedDateText=null;this.initDatesValues(),this.languageProcessing=!1,this.changeDetector.markForCheck()}),this.debounceProcessLanguage$.pipe(Object(m.a)(()=>this.selectedCommand&&this.selectedCommand.key===v.pb.key),Object(p.a)(),Object(h.a)(()=>{this.languageProcessing=!!this.currentText,this.changeDetector.markForCheck()}),Object(f.a)(500),Object(g.a)(this.destroy$)).subscribe(e=>{try{this.parsedTimeEstimate=this.timeEstimatesService.parseTimeInput(e)}catch(t){this.parsedTimeEstimate=null}this.initEstimateValues(),this.languageProcessing=!1,this.changeDetector.markForCheck()}),this.debounceProcessLanguage$.pipe(Object(m.a)(()=>this.selectedCommand&&this.selectedCommand.key===v.pb.key),Object(p.a)(),Object(h.a)(()=>{this.languageProcessing=!!this.currentText,this.changeDetector.markForCheck()}),Object(f.a)(500),Object(g.a)(this.destroy$)).subscribe(e=>{try{this.parsedTimeEstimate=this.timeEstimatesService.parseTimeInput(e)}catch(t){this.parsedTimeEstimate=null}this.initEstimateValues(),this.languageProcessing=!1,this.changeDetector.markForCheck()});const e=this.timezonesService.createMoment();this.todayIsFriday=5===e.day()}ngOnChanges(e){e.users&&this.selectedCommand&&(this.selectedCommand.key===v.c.key||this.selectedCommand.key===v.d.key||this.selectedCommand.key===v.Gb.key)&&this.initAssigneeValues(),e.statuses&&this.selectedCommand&&this.selectedCommand.key===v.kb.key&&this.initStatusValues(),e.tags&&this.selectedCommand&&this.selectedCommand.key===v.nb.key&&this.initTagValues(),e.attachments&&this.selectedCommand&&this.selectedCommand.key===v.f.key&&this.initAttachmentsValues(),this.update()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}update(){this.initCommandValues()}isMe(e){return this.meUser&&e&&this.meUser.id===e.id}isSpecialItem(e){return e.id===this.DONE_ITEM.id||e.id===this.CLEAR_ITEM.id||e.id===this.REASSIGN_ITEM.id}cancelTimeEstimate(){this.selectedValue=null,this.timeEstimateData$.next(null),this.meUser=Object.assign(Object.assign({},this.meUser),{seen_time_estimate_warning:!1})}saveTimeEstimate(){this.applyCommand.emit({command:this.selectedCommand.replaceCommand||this.selectedCommand,value:Object.assign(Object.assign({},this.selectedValue),{noWarning:this.meUser.seen_time_estimate_warning})}),this.close()}updateUser(){this.meUser=Object.assign(Object.assign({},this.meUser),{seen_time_estimate_warning:!this.meUser.seen_time_estimate_warning}),this.timeEstimateData$.next(Object.assign(Object.assign({},this.timeEstimateData$.value),{seenWarning:this.meUser.seen_time_estimate_warning})),this.changeDetector.markForCheck()}compareWeightType(e){return(t,i)=>{if(this.currentText){const e=this.currentText.toLowerCase();if("you".includes(e)||"me".includes(e)){if(this.isMe(t))return-1;if(this.isMe(i))return 1}}let o=!1,n=!1;const s=this.weights&&this.weights[t.id]&&this.weights[t.id][e]||0,c=this.weights&&this.weights[i.id]&&this.weights[i.id][e]||0;return this.currentText&&(o=(t.name||"").toLowerCase().startsWith(this.currentText.toLowerCase()),n=(i.name||"").toLowerCase().startsWith(this.currentText.toLowerCase())),o&&!n?-1:n&&!o?1:c-s}}activate(e,t="",i="",o){this.dropdownPlacement||(this.calcPlacement=this.el.nativeElement.getBoundingClientRect().top>window.innerHeight/2?"top":"bottom"),this.needCaptureKeyEvents=!0,this.shortKey=e,this.open(),this.selectedCommand=o?this.supportedCommands.find(e=>e.key===o):null,this.selectedCommand&&this.setCommand(this.selectedCommand),this.currentText=null,this.textBefore=t,this.textAfter=i,this.changeDetector.detectChanges(),this.input&&this.input.nativeElement.focus(),setTimeout(()=>{this.input&&this.input.nativeElement.focus()})}validateInput(e,t){return It(this,void 0,void 0,function*(){if(!t||!e)return Promise.resolve(null);let i;if(e.validate&&(i=this.selectedCommand.validate(this.currentText)),!i&&e.key===v.G.key){const e=Object(I.i)(t,!0,!0);if(e&&"custom"===e.service)return this.dashboardEmbedService.checkHeaders(e.id).pipe(Object(u.a)(()=>""),Object(_.a)(()=>Object(l.a)("site is not supported"))).toPromise()}return Promise.resolve(i)})}handleEnter(){return It(this,void 0,void 0,function*(){if(!this.validating&&(this.validating=!0,this.errorMessage=yield this.validateInput(this.selectedCommand,this.currentText),this.validating=!1,!this.errorMessage))if(this.selectedCommand&&"text"===this.selectedCommand.inputType)this.selectedValue=this.currentText,this.doneCommand(!this.selectedValue),this.resetInput();else if(this.currentValues.position&&this.selectedCommand&&"number"===this.selectedCommand.inputType){const e=parseInt(this.currentText,10);e>0&&e<=this.currentValues.position.total&&(this.selectedValue=e,this.doneCommand(!0),this.resetInput())}})}keyDown(e){return It(this,void 0,void 0,function*(){if(this.validating)return e.preventDefault(),void e.stopPropagation();const t=e.target;switch(this.errorMessage=null,e.keyCode){case d.a.ENTER:yield this.handleEnter(),e.preventDefault();break;case d.a.ARROW_UP:case d.a.ARROW_DOWN:e.preventDefault();break;case d.a.ESCAPE:this.cancel(),e.preventDefault(),e.stopPropagation();break;case d.a.BACKSPACE:t.innerText||(this.selectedCommand?this.setCommand(null):(this.cancel(!0),e.preventDefault(),e.stopPropagation()))}this.changeDetector.markForCheck()})}keyUp(e){const t=e.target,i=t.innerText,o=i.replace(/\r?\n|\r/g,"");if(i===o||this.validating||Array.from(t.querySelectorAll("br")).forEach(e=>e.remove()),this.currentText=o,!this.selectedCommand||this.selectedCommand.key!==v.o.key&&this.selectedCommand.key!==v.jb.key&&this.selectedCommand.key!==v.pb.key||this.debounceProcessLanguage$.next(this.currentText),this.selectedCommand)this.selectedCommand.key===v.nb.key&&this.onPage.emit({type:xi.Tags,search:this.currentText,newSearch:!0});else{const e=this.supportedCommands.find(e=>e.forceSelection&&e.key===this.currentText);e?this.setCommand(e):this.commandsNotFound&&this.currentText.length-this.lastFoundText.length>2&&this.cancel()}}docKeyDown(e){this.needCaptureKeyEvents&&this.input.nativeElement.focus()}onFocus(e){this.needCaptureKeyEvents=!1}onBlur(e){}clickOutside(e){this.cancel(!1,!1)}cancel(e=!1,t=!0){this.close(),this.cancelCommand.emit({replace:e?"":this.selectedCommand?this.shortKey:`${this.shortKey}${this.currentText||""}`,updateSelection:t})}initCommandValues(){const e=this.originalCommands||[...v.a];if(this.allowedCommands||this.allowedCommandsExtra){const t=Object.assign(Object.assign({},this.allowedCommandsExtra),this.allowedCommands);this.supportedCommands=e.filter(e=>e.separatorHeader||e.separatorTail||t[e.key]||e.allowCommand&&e.allowCommand(t))}else this.supportedCommands=[...e];this.supportedCommands=this.supportedCommands.filter((e,t)=>!e.separatorHeader||t<this.supportedCommands.length-1&&!this.supportedCommands[t+1].separatorHeader),this.allowTurnIntoCommands&&(this.supportedCommands=[...this.supportedCommands,...v.Jb]),this.commandValues=this.supportedCommands.map(e=>({data:e,id:e.key,name:e.title,cssClass:e.cssClass,unselectable:e.separatorHeader||e.separatorTail,filter:t=>e.customFilter&&"function"==typeof e.customFilter?e.customFilter(t):(!t||!e.separatorHeader&&!e.shortcut&&!e.separatorTail)&&(!e.minChars||(t||"").length>=e.minChars)&&(!t||e.key.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)||e.alt&&e.alt.some(e=>e.includes(t))),forceSelected:()=>!e.separatorHeader&&!e.separatorTail&&e.key===this.currentText}))}getUserValues(e,t=!0){return[...(e=e||this.users||[]).map(e=>({data:e,id:e.id,name:e.username,equals:t=>t&&e.id===t.id,filter:t=>!t||(e.username||e.email||e.displayName).toLowerCase().includes(t)||this.meUser&&e.id===this.meUser.id&&("you".includes(t)||"me".includes(t))})),...(this.userGroups&&t?this.userGroups:[]).map(e=>({data:{group:e},id:e.id,name:e.name,equals:t=>t&&t.group&&e.id===t.group.id,filter:t=>!t||e.name.toLowerCase().includes(t)||e.handle.toLowerCase().includes(t)}))]}initAssigneeValues(){this.userValues=[this.DONE_ITEM,this.REASSIGN_ITEM,this.options&&this.options.a&&this.options.a.alwaysShowUnassingn?this.UNASSIGN_ITEM_ALWAYS:this.UNASSIGN_ITEM,...this.getUserValues()]}initSingleUserValues(){this.userValues=[...this.getUserValues()]}initWatcherValues(){this.userValues=[this.DONE_ITEM,this.UNASSIGN_ITEM,...this.getUserValues()]}initStatusValues(){this.statusValues=this.statuses?this.statuses.map(e=>({data:e,id:e.status,name:e.status,equals:t=>t&&e.status===t.status,filter:t=>!t||e.status.toLowerCase().includes(t)})):[]}initPriorityValues(){this.priorityValues=this.priorities?[...this.priorities.map(e=>({data:e,id:e.priority,name:e.priority,equals:t=>t&&e.priority===t.priority,filter:t=>!t||e.priority.toLowerCase().includes(t)})),Object.assign(Object.assign({},this.CLEAR_ITEM),{data:{priority:"Clear"}})]:[]}initPointValues(){this.pointValues=this.points?[...this.points.map(e=>({data:{id:e.toString(),name:e.toString()},id:e.toString(),name:e.toString(),equals:t=>t===e,filter:t=>!t||e.toString().toLowerCase().includes(t)})),Object.assign(Object.assign({},this.CLEAR_ITEM),{data:{id:0,name:"-"}})]:[],this.currentValues&&(this.currentValues.assignees&&this.currentValues.assignees.length||this.currentValues.groupAssignees&&this.currentValues.groupAssignees.length)&&this.team&&this.team.points_per_assignee&&(this.assigneesValues=this.getUserValues(this.currentValues.assignees,!0))}initTagValues(){this.tagValues=[this.DONE_ITEM,Object.assign(Object.assign({},this.CLEAR_ITEM),{data:null}),...this.tags?this.tags.map(e=>({data:e,id:e.name,name:e.name,equals:t=>t&&e.name===t.name,filter:t=>!t||e.name.toLowerCase().includes(t)})):[]]}initAttachmentsValues(){this.attachmentValues=this.attachments?this.attachments.map(e=>({data:e,id:e.id,name:e.title,equals:t=>t&&e.id===t.id,filter:t=>!t||e.title.toLowerCase().includes(t)})):[]}initDatesValues(){this.datesValues=[{data:Object.assign(Object.assign({},k.i),{name:this.parsedDateText}),id:k.i.code,name:this.parsedDateText,filter:e=>e&&this.parsedDateText},...k.a.map(e=>({data:e,id:e.code,name:e.code===k.e.name?this.todayIsFriday?"Next Friday":"This Friday":e.name,filter:t=>!t||e.name.toLowerCase().includes(t)})),Object.assign(Object.assign({},this.CLEAR_ITEM),{data:k.d})]}initEstimateValues(){this.estimateValues=[{data:Object.assign(Object.assign({},k.i),{name:this.parsedTimeEstimate&&this.parsedTimeEstimate.output}),id:k.i.code,name:this.parsedTimeEstimate&&this.parsedTimeEstimate.output,filter:e=>e&&!!this.parsedTimeEstimate},...k.j.map(e=>({data:e,id:e.code,name:e.name,filter:t=>!t||e.name.toLowerCase().includes(t)})),Object.assign(Object.assign({},this.CLEAR_ITEM),{data:k.d})]}checkPaging(e){this.onPage.emit({type:e.type,search:this.currentText})}setCommand(e){if(this.onSelectCommand.emit(e),this.selectedCommand=e,this.resetInput(),this.selectedValue=null,this.multiValues=!1,this.valueType="single",this.valueChanged=!1,e&&this.currentValues){switch(e.key){case v.c.key:this.selectedValue=[...this.currentValues.assignees||[],...(this.currentValues.groupAssignees||[]).map(e=>({group:e}))],this.multiValues=this.options&&this.options.a&&this.options.a.multi,this.valueType="array",this.initAssigneeValues();break;case v.Gb.key:this.selectedValue=[...this.currentValues.followers||[],...(this.currentValues.groupFollowers||[]).map(e=>({group:e}))],this.multiValues=!0,this.valueType="array",this.initWatcherValues();break;case v.kb.key:this.selectedValue=this.currentValues.status?this.currentValues.status:null,this.initStatusValues();break;case v.hb.key:this.selectedValue=this.currentValues.minutesBefore;break;case v.cb.key:this.selectedValue=this.currentValues.priority?this.currentValues.priority:null,this.initPriorityValues();break;case v.ib.key:this.selectedValue=this.currentValues.points?this.currentValues.points:null,this.initPointValues();break;case v.nb.key:this.selectedValue=this.currentValues.tags?[...this.currentValues.tags]:[],this.multiValues=!0,this.valueType="array",this.initTagValues();break;case v.f.key:this.selectedValue=null,this.initAttachmentsValues();break;case v.jb.key:case v.o.key:this.selectedValue=this.currentValues.dueDate&&this.currentValues.dueDate.date?{date:this.adjustDate(this.currentValues.dueDate.date,this.currentValues.dueDate.showTime),showTime:this.currentValues.dueDate.showTime}:null,this.initDatesValues();break;case v.pb.key:this.selectedValue=this.currentValues.timeEstimate,this.initEstimateValues();break;case v.Z.key:this.selectedValue=this.currentValues.location;break;case v.Eb.key:case v.d.key:this.selectedValue=null,this.multiValues=!1,this.valueType="single",this.initSingleUserValues();break;case v.I.key:const e=450,t=700,i=window.screen.availWidth,o=window.screen.availHeight,n=i/3>e?e:i/3,s=o/2>t?t:3*o/4,c=(window.screen.availWidth-n)/2+(window.screen.availLeft||0),a=(window.screen.availHeight-s)/2+(window.screen.availTop||0),r=window.open("about:blank?miro=true","_blank",`width=${n},height=${s},left=${c},top=${a},menubar=0,toolbar=0,location=0,personalbar=0,status=0`);return void C("https://miro.com/app/static/boardsPicker.1.0.js",{async:!0,returnPromise:!0}).then(()=>{window.miroBoardsPicker.open({windowRef:r,clientId:"3074457349416489378",action:"access-link",success:e=>{this.selectedValue=e.accessLink,this.doneCommand(!this.selectedValue),this.resetInput()},cancel:()=>{this.cancel()},error:()=>{}})})}"none"===this.selectedCommand.inputType&&(this.assignValue("none"),this.doneCommand())}this.changeDetector.markForCheck()}getQuickDateValue(e){const{date:t,hasTime:i}=Object(k.p)(e.code);return{date:this.adjustDate(t.valueOf(),i),showTime:i}}getTimeEstimateValue(e){let t=0;switch(e.code){case k.l.code:t=3600;break;case k.m.code:t=14400;break;case k.k.code:t=28800}if(t)return{input:e.code,output:e.name,seconds:t,total:e.name}}assignMultiUser(e){this.selectedValue=this.selectedValue.some(t=>t.id===e.id)?this.selectedValue.filter(t=>t.id!==e.id):[...this.selectedValue,e]}assignValue(e){if(this.selectedCommand&&e)switch(this.selectedCommand.key){case v.Gb.key:this.assignMultiUser(e);break;case v.c.key:this.multiValues?this.options&&this.options.a&&this.options.a.ignoreFirstSelect||this.selectedValue&&0!==this.selectedValue.length||this.valueChanged?this.assignMultiUser(e):(this.selectedValue=[e],this.doneCommand()):this.selectedValue=[e];break;case v.jb.key:case v.o.key:this.selectedValue=e.code===k.i.code&&this.parsedDate?{date:this.adjustDate(this.parsedDate.valueOf(),this.parsedDateShowTime),showTime:this.parsedDateShowTime}:this.getQuickDateValue(e);break;case v.pb.key:if(this.selectedValue=e.code===k.i.code&&this.parsedTimeEstimate?this.parsedTimeEstimate:this.getTimeEstimateValue(e),this.team&&this.team.estimates_per_assignee&&this.meUser&&!this.meUser.seen_time_estimate_warning&&this.task&&this.task.assignees&&this.task.assignees.length>1)return this.timeEstimateData$.next(this.selectedValue),!1;break;case v.nb.key:this.selectedValue=this.selectedValue.some(t=>t.name===e.name)?this.selectedValue.filter(t=>t.name!==e.name):[...this.selectedValue,e];break;case v.e.key:this.selectedCommand=v.c,this.selectedValue=[this.meUser];break;case v.p.key:this.selectedCommand=v.o,this.selectedValue=this.getQuickDateValue(k.h);break;case v.q.key:const t=this.currentValues&&this.currentValues.assignees||[],i=t.find(e=>e.id===this.meUser.id)?t:[this.meUser,...t];this.selectedValue=[this.getQuickDateValue(k.h),i];break;case v.lb.key:this.selectedCommand=v.kb,this.selectedValue=this.statuses&&this.statuses.length>0?this.statuses[this.statuses.length-1]:y.c;break;case v.gb.key:case v.db.key:case v.fb.key:case v.eb.key:this.selectedValue=this.selectedCommand.payload,this.selectedCommand=v.cb;break;default:this.selectedValue=e}return!0}setValue(e){const t=e.data;if(this.selectedCommand){if(e.id===this.DONE_ITEM.id)return void this.doneCommand();if(e.id===this.CLEAR_ITEM.id)return this.selectedValue="array"===this.valueType?[]:null,void this.doneCommand();if(e.id===this.REASSIGN_ITEM.id)return this.selectedValue=this.selectedValue&&this.selectedValue.length>0?[this.selectedValue[this.selectedValue.length-1]]:[],void this.doneCommand();if(this.selectedCommand.key===this.COMMAND_SPRINT_POINTS.key)return this.selectedValue=e,void this.handleSprintPoints(e);this.assignValue(t)&&(this.multiValues?(this.valueChanged=!0,this.resetInput()):this.doneCommand())}}handleSprintPoints(e){this.assigneesValues&&this.assigneesValues.length?(this.sprintPointsValue=e,1===this.assigneesValues.length&&this.setSprintUser(this.assigneesValues[0]),this.resetInput(),this.changeDetector.markForCheck()):this.doneCommand()}setSprintUser(e){this.applyCommand.emit({command:this.selectedCommand.replaceCommand||this.selectedCommand,value:Object.assign(Object.assign({},this.selectedValue),{user:e.data})}),this.close(),this.sprintPointsValue=null}createCustom(e){if(this.selectedCommand&&this.selectedCommand.key===v.nb.key&&!(this.selectedValue||[]).some(t=>t.name===e)){const t=Object(T.b)(this.selectedValue),i={name:e,tag_fg:t||"#000000",tag_bg:t||"#000000",new:!0};this.assignValue(Object.assign(Object.assign({},i),{new:!0})),this.tagValues=[...this.tagValues,{data:i,id:i.name,name:i.name,equals:e=>e&&i.name===e.name,filter:e=>!e||i.name.toLowerCase().includes(e)}],this.valueChanged=!0,this.resetInput()}}doneCommand(e=!0){this.applyCommand.emit({command:this.selectedCommand.replaceCommand||this.selectedCommand,value:this.selectedValue}),e&&this.close()}resetInput(){this.currentText="",this.input.nativeElement.innerHTML="",this.input.nativeElement.focus()}selectCategory(e){this.selectedValue=e,this.doneCommand()}selectMinutesBefore(e){this.selectedValue=e,this.doneCommand()}selectTask(e){this.selectedValue=e.task,this.doneCommand()}setButtonOptions(e){this.selectedValue=e,this.doneCommand()}setListView(e){this.selectedValue=e,this.doneCommand()}commandsFiltered(e){e&&e.length>0?(this.lastFoundText=this.currentText||"",this.commandsNotFound=!1):this.commandsNotFound=!0}addFiles(e){this.assignValue({id:"upload",data:Array.from(e)}),this.doneCommand()}setAttachmentType(e){this.attachmentType=e}submitMarkdown(e){this.assignValue(e),this.doneCommand()}adjustDate(e,t){return t?e:this.timezonesService.createMoment(Number(e)).hours(this.options&&(this.options.startHour||0===this.options.startHour)?this.options.startHour:4).minutes(0).seconds(0).milliseconds(0).valueOf()}open(){this.document.body.classList.add(x.a),this.hostActive=!0,this.active$.next(!0),this.onOpen.emit()}close(){this.hostActive=!1,this.active$.next(!1),this.document.body.classList.remove(x.a),this.onClose.emit()}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.m),s.Wb(s.h),s.Wb(D.a),s.Wb(O.a),s.Wb(S.a),s.Wb(E.a),s.Wb(c.d))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-slash-command"]],viewQuery:function(e,t){if(1&e&&(s.jd(Tt,1),s.jd(Ct,1)),2&e){let e;s.Qc(e=s.rc())&&(t.input=e.first),s.Qc(e=s.rc())&&(t.pop=e.first)}},hostVars:2,hostBindings:function(e,t){1&e&&s.qc("keydown.out-zone",function(e){return t.docKeyDown(e)},!1,s.Sc),2&e&&s.Ob("cu-slash-command_active",t.hostActive)},inputs:{inputClass:"inputClass",task:"task",users:"users",userGroups:"userGroups",meUser:"meUser",statuses:"statuses",priorities:"priorities",tags:"tags",team:"team",modifier:"modifier",attachments:"attachments",weights:"weights",points:"points",currentValues:"currentValues",allowedCommands:"allowedCommands",allowTurnIntoCommands:"allowTurnIntoCommands",allowedCommandsExtra:"allowedCommandsExtra",originalCommands:"originalCommands",options:"options",dateFormatting:"dateFormatting",militaryTime:"militaryTime",dropdownPlacement:"dropdownPlacement",dropdownContainer:"dropdownContainer",alwaysVisible:"alwaysVisible"},outputs:{cancelCommand:"cancelCommand",applyCommand:"applyCommand",onOpen:"onOpen",onClose:"onClose",onSelectCommand:"onSelectCommand",onPage:"onPage"},features:[s.Gb],ngContentSelectors:yi,decls:29,vars:3,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u;return e=$localize`:@@common_save␟9e0eaab2042cd18d46b66c7fafc914b7e54b91c3␟4094840963534996627: Save `,t=$localize`:@@common_upload␟7d178bcf6e2595b25eeb1463ca9444140efd7e1c␟4859462426255667231: Upload `,i=$localize`:@@cu-slash-command__upload-existing␟cc36215937944fdd7fe0023ce59fab328b5c71ec␟8924009885773976831: From this task `,o=$localize`:@@common_paste␟170919b6c28b7eb90fead8af3d10ce8f10dc041e␟8890504809170904482:Paste`,n=$localize`:@@cu-slash-command__form-placeholder_type-mardown-here␟7119ca257dc2c833bded929a7d026b588c27137a␟3430787594799819499:Type markdown text here`,s=$localize`:@@cu-slash-command__date-time-placeholder␟9e4dc514f3d1578a3d4ef8c5512558025989ea9d␟5899343167946432159: Type any date and time `,c=$localize`:@@cu-slash-command__time-placeholder␟6568772001e5c417cc8c0b76696162e1664fa74a␟3261592926357317993: Type any time `,a=$localize`:@@common_are-you-sure␟69e9c615849b4a73db4b15885952f4333b741c62␟7515883357904500238:Are you sure?`,r=$localize`:@@common_time-estimate-split-assignees␟a099e8be7a40b630216d37a08694d4bfd1ec5f00␟3089236612278934562: This will divide equally between assignees, overriding their current estimates. `,l=$localize`:@@common_dont-show-again␟5474280611b97b4b304e88bd5ef36000157db389␟8890136225743480943: Don't show again `,d=$localize`:@@common_cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,u=$localize`:@@common_save␟368b817b7cc89a1705d9ac752da4ddda15d42ae8␟1340158735829077894: Save `,[["class","cu-slash-command",4,"ngIf"],["commandPopover",""],["commandTemplate",""],["userTemplate",""],["statusTemplate",""],["priorityTemplate",""],["tagTemplate",""],["attachmentTemplate",""],["bgColorTemplate",""],["dateTemplate",""],["simpleTemplate",""],["assigneeValueTemplate",""],["tagValueTemplate",""],["posValueTemplate",""],[1,"cu-slash-command"],[4,"ngIf"],[4,"ngIf","ngIfThen"],["autocomplete","off","contenteditable","true","triggers","",3,"placement","container","containerClass","popover","isOpen","keydown","keyup","focus","blur","clickOutside"],["input","","pop","bs-popover"],["class","cu-slash-command__error",4,"ngIf"],["modifier","cu-slash-command__inline-loader",4,"ngIf"],["class","cu-slash-command__enter-btn",3,"cuPreventDefault","click",4,"ngIf"],[1,"cu-slash-command__error"],["modifier","cu-slash-command__inline-loader"],[1,"cu-slash-command__enter-btn",3,"cuPreventDefault","click"],e,["icon","close",1,"cu-slash-command__popover-close",3,"click"],[3,"query","values","itemTemplate","compareFn","selectValue","afterFilter",4,"ngIf"],[3,"query","values","checkedValue","itemTemplate","compareFn","compareFn2","selectValue",4,"ngIf"],[3,"query","values","checkedValue","itemTemplate","selectValue",4,"ngIf"],[3,"query","values","checkedValue","itemTemplate","emptyMessage","allowCustom","selectValue","createCustom","onPage",4,"ngIf"],[3,"query","values","itemTemplate","selectValue",4,"ngIf"],[3,"query","values","itemTemplate","spaceSelectionEnabled","showEmptyMessage","selectValue",4,"ngIf"],["class","cu-slash-command__category-list","mode","list",3,"query","displaySearch","showTaskCount","selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","handleGlobalKeys","onSelect",4,"ngIf"],["class","cu-slash-command__task-selector",3,"showSearch","query","defaultProject","searchSubtasks","excludeParentTask","expandableSubtasks","task","handleGlobalKeys","onSelect",4,"ngIf"],[3,"options","onChange","onSubmit",4,"ngIf"],[3,"onSubmit",4,"ngIf"],[3,"query","values","itemTemplate","compareFn","selectValue","afterFilter"],[3,"query","values","checkedValue","itemTemplate","compareFn","compareFn2","selectValue"],[3,"query","values","checkedValue","itemTemplate","selectValue"],[3,"query","values","itemTemplate","compareFn","selectValue",4,"ngIf"],[3,"query","values","itemTemplate","compareFn","selectValue"],[3,"query","values","checkedValue","itemTemplate","emptyMessage","allowCustom","selectValue","createCustom","onPage"],["class","cu-slash-command__tabs",4,"ngIf"],["cuDropArea","","uniqueId","sc",3,"badgeVisible","ondrop","dragover","onFilesAdded",4,"ngIf"],[1,"cu-slash-command__tabs"],[1,"cu-slash-command__tab",3,"click"],t,i,["cuDropArea","","uniqueId","sc",3,"badgeVisible","ondrop","dragover","onFilesAdded"],[3,"query","values","itemTemplate","selectValue"],["submitText",o,"placeholder",n,3,"onSubmit"],[3,"query","values","itemTemplate","spaceSelectionEnabled","showEmptyMessage","selectValue"],["class","cu-slash-command__date-message",4,"ngIf"],[1,"cu-slash-command__date-message"],s,[3,"query","values","itemTemplate","spaceSelectionEnabled","showEmptyMessage","selectValue",4,"ngIf","ngIfElse"],["showWarning",""],c,a,r,[3,"checked","onChange"],l,[3,"click"],d,[1,"cu-btn","cu-btn_h-36",3,"click"],u,[3,"items","modifier","minutesBefore","onSelect"],["mode","list",1,"cu-slash-command__category-list",3,"query","displaySearch","showTaskCount","selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","handleGlobalKeys","onSelect"],["categoryListComponent",""],[1,"cu-slash-command__task-selector",3,"showSearch","query","defaultProject","searchSubtasks","excludeParentTask","expandableSubtasks","task","handleGlobalKeys","onSelect"],["taskSelector",""],[3,"options","onChange","onSubmit"],[3,"onSubmit"],[3,"command","selected"],[3,"id","user","userGroup","selected","checked"],[3,"status","selected","checked"],[3,"priority","selected","checked"],[3,"tag","selected","checked"],[3,"attachment","selected","checked"],[3,"value","selected"],[3,"data","selected"],[1,"cu-slash-command__value-assignee",3,"users","userGroups","showDropdown","avatarSize"],["modifier","list-view",1,"cu-slash-command__value-tag",3,"readOnly","tags"],[1,"cu-slash-command__value-pos"]]},template:function(e,t){1&e&&(s.Cc(),s.Bc(0),s.bd(1,$t,18,30,"div",0),s.vc(2,"async"),s.bd(3,ri,17,16,"ng-template",null,1,s.cd),s.bd(5,li,1,2,"ng-template",null,2,s.cd),s.bd(7,di,1,5,"ng-template",null,3,s.cd),s.bd(9,ui,1,3,"ng-template",null,4,s.cd),s.bd(11,mi,1,3,"ng-template",null,5,s.cd),s.bd(13,pi,1,3,"ng-template",null,6,s.cd),s.bd(15,hi,1,3,"ng-template",null,7,s.cd),s.bd(17,fi,1,2,"ng-template",null,8,s.cd),s.bd(19,bi,1,2,"ng-template",null,9,s.cd),s.bd(21,gi,1,2,"ng-template",null,10,s.cd),s.bd(23,_i,1,4,"ng-template",null,11,s.cd),s.bd(25,vi,1,2,"ng-template",null,12,s.cd),s.bd(27,ki,2,1,"ng-template",null,13,s.cd)),2&e&&(s.Ib(1),s.Dc("ngIf",s.wc(2,1,t.active$)||t.alwaysVisible))},directives:[c.q,P.c,j.a,A.a,$.a,U.a,ee,te.a,ie.a,ce,ae.a,re.a,le.a,de.a,ue.a,Ue,Fe,Je,nt,at,pt,bt,vt,kt,yt,wt.a,xt.a],pipes:[c.b],styles:['.cu-slash-command{display:inline;white-space:normal}.cu-slash-command__textarea{width:300px;padding:10px}.cu-slash-command__enter-btn{background:#7b68ee;display:inline-flex;width:54px;height:20px;border-radius:2px;color:#fff!important;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif!important;align-items:center;justify-content:center;text-transform:uppercase;cursor:pointer;margin:0 10px;flex-shrink:0}@supports (--theme-main-color:#7b68ee){.cu-slash-command__enter-btn{background:var(--theme-main-color)}}.cu-slash-command__enter-btn:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-slash-command__enter-btn:hover{background:var(--theme-main-color-dark)}}.cu-slash-command__enter-btn_disabled{pointer-events:none;opacity:.5}.cu-slash-command__inline-loader.cu-btn__spinner_loader{padding:0 20px}.cu-slash-command__tabs{display:flex;height:45px;background:#fff;border-bottom:1px solid #e9ebf0}.dark-theme .cu-slash-command__tabs{background:#384047;border-bottom-color:#1e272e}.cu-slash-command__tab{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;position:relative;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;cursor:pointer;flex-grow:1}.dark-theme .cu-slash-command__tab{color:#d5d6d7}.cu-slash-command__tab:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command__tab:hover{color:var(--theme-main-color)}}.cu-slash-command__tab:after{content:"";display:block;position:absolute;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;width:100%;height:2px;bottom:-1px}.cu-slash-command__tab_active{color:#7b68ee;cursor:default}@supports (--theme-main-color:#7b68ee){.cu-slash-command__tab_active{color:var(--theme-main-color)}}.cu-slash-command__tab_active:after{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command__tab_active:after{background:var(--theme-main-color)}}.cu-slash-command__error{display:inline-flex;color:red!important;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;position:absolute;left:0;transform:translateY(150%);animation:flash .5s linear both}.cu-editor_task-view .cu-slash-command__error{left:10px;bottom:-10px;transform:translateY(85%)}.cu-slash-command__original-text{opacity:.4;white-space:pre-wrap}.cu-slash-command__operator{font:400 14px/20px Gotham Pro,Proxima Nova,arial,serif;display:inline-flex;flex-shrink:0;color:rgba(52,52,52,.8)}.dark-theme .cu-slash-command__operator{color:#d5d6d7}.cu-editor-wrapper_create-task .cu-slash-command__operator,.cu-editor_task-view .cu-slash-command__operator{line-height:24px}.cu-ct__title-container .cu-slash-command__operator,.task-name-container .cu-slash-command__operator{font:300 28px/34px Proxima Nova,arial,serif}.cu-slash-command__operator strong{font-weight:500}.cu-slash-command__value-pos{color:rgba(52,52,52,.8)}.dark-theme .cu-slash-command__value-pos{color:#d5d6d7}.cu-slash-command__input{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-family:Gotham Pro,Proxima Nova,arial,serif;display:inline-flex;min-width:120px;margin-left:4px;-webkit-user-select:text;-ms-user-select:text;user-select:text}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-slash-command__input{font-family:var(--global-font-support)}}.cu-slash-command__input:empty:before{opacity:.5;color:#343434;content:attr(placeholder);display:block}.dark-theme .cu-slash-command__input:empty:before{color:#d5d6d7}.task-name-container .cu-slash-command__input,.task-name-container .cu-slash-command__input:empty:before{font-family:Proxima Nova,arial,serif}@supports (--global-second-font-support:"Proxima Nova",arial,serif){.task-name-container .cu-slash-command__input{font-family:var(--global-second-font-support)}}.cu-slash-command__tooltip{background:#fff;border:0;width:320px;z-index:100003}.dark-theme .cu-slash-command__tooltip{background:#384047}.cu-slash-command__tooltip_status{width:185px}.cu-slash-command__tooltip_status .cu-slash-command-onboarding-message{padding-left:16px}.cu-slash-command__tooltip .popover-content{padding:5px 0;min-width:0;width:100%}.cu-slash-command__tooltip.popover{box-shadow:1px 0 15px rgba(0,0,0,.2);padding:0}.cu-slash-command__tooltip.popover .popover-arrow{display:none}.cu-slash-command__tooltip .popover.bs-tether-element-attached-top:before,.cu-slash-command__tooltip.popover.popover-top:before{border-top-color:rgba(0,0,0,.1)}.cu-slash-command__tooltip .popover.bs-tether-element-attached-top:after,.cu-slash-command__tooltip.popover.popover-top:after{border-top-color:#fff}.dark-theme .cu-slash-command__tooltip .popover.bs-tether-element-attached-top:after,.dark-theme .cu-slash-command__tooltip.popover.popover-top:after{border-top-color:#384047}.cu-slash-command__tooltip .popover.bs-tether-element-attached-bottom:before,.cu-slash-command__tooltip.popover.popover-bottom:before{border-bottom-color:rgba(0,0,0,.1)}.cu-slash-command__tooltip .popover.bs-tether-element-attached-bottom:after,.cu-slash-command__tooltip.popover.popover-bottom:after{border-bottom-color:#fff}.dark-theme .cu-slash-command__tooltip .popover.bs-tether-element-attached-bottom:after,.dark-theme .cu-slash-command__tooltip.popover.popover-bottom:after{border-bottom-color:#384047}.cu-slash-command__tooltip .popover.bs-tether-element-attached-right:before,.cu-slash-command__tooltip.popover.popover-right:before{border-right-color:rgba(0,0,0,.1)}.cu-slash-command__tooltip .popover.bs-tether-element-attached-right:after,.cu-slash-command__tooltip.popover.popover-right:after{border-right-color:#fff}.dark-theme .cu-slash-command__tooltip .popover.bs-tether-element-attached-right:after,.dark-theme .cu-slash-command__tooltip.popover.popover-right:after{border-right-color:#384047}.cu-slash-command__tooltip .popover.bs-tether-element-attached-right:before,.cu-slash-command__tooltip.popover.popover-left:before{border-left-color:rgba(0,0,0,.1)}.cu-slash-command__tooltip .popover.bs-tether-element-attached-right:after,.cu-slash-command__tooltip.popover.popover-left:after{border-left-color:#fff}.dark-theme .cu-slash-command__tooltip .popover.bs-tether-element-attached-right:after,.dark-theme .cu-slash-command__tooltip.popover.popover-left:after{border-left-color:#384047}.cu-slash-command__tooltip .task-uploader{padding:0 20px}.cu-slash-command__value-assignee{display:inline-flex;vertical-align:bottom;margin-top:-5px}.cu-slash-command__value-assignee .cu-user-group .cu-user-group__item{display:flex}.cu-slash-command__value-assignee .cu-user-group .cu-user-group__item .cu-user-group__more_lg{width:28px;height:28px;margin:2px 0 0 4px;text-decoration:none;border:none}.cu-slash-command__value-assignee .cu-avatar,.cu-slash-command__value-assignee .cu-project-avatar__user-group{white-space:normal;font-size:10px}.cu-slash-command__value-tag{display:inline-flex}.cu-quick-create-task-panel .cu-slash-command__value-tag{max-width:200px}.cu-quick-create-task-panel .cu-slash-command__value-tag *{max-width:100%}.cu-quick-create-task-panel .cu-slash-command__value-tag .cu-tags-view{height:auto}.cu-quick-create-task-panel .cu-slash-command__value-tag .cu-tags-view-item{margin:2px 0}.cu-slash-command__value-tag .cu-tags-view{height:18px}.cu-slash-command__category-list .category-list{width:320px}.cu-slash-command__category-list .cu2-hierarchy-picker__menu{width:100%}.cu-slash-command__date-message{background:#f2f3f4;padding:10px;text-align:center;opacity:.5;margin-top:-5px}.dark-theme .cu-slash-command__date-message{color:#d5d6d7;background:#2b343b}.cu-slash-command__task-selector .task-selector{margin:0}.cu-slash-command__task-selector .task-selector__cat-list{min-width:0;max-width:none;width:320px}.cu-slash-command-onboarding-message{padding:20px 20px 10px;font:400 13px/20px Gotham Pro,Proxima Nova,arial,serif;color:rgba(52,52,52,.8);text-align:center}.dark-theme .cu-slash-command-onboarding-message{color:#d5d6d7}.cu-slash-command-onboarding-message__span{background:#7b68ee;color:#fff;padding:3px 5px;margin:-3px 0;border-radius:3px;font-weight:500;text-transform:uppercase}@supports (--theme-main-color:#7b68ee){.cu-slash-command-onboarding-message__span{background:var(--theme-main-color)}}.cu-slash-command__popover-close{position:absolute;width:20px;height:20px;padding:4px;stroke:#b9bec7;right:6px;top:6px;cursor:pointer;z-index:20}.dark-theme .cu-slash-command__popover-close{fill:#828588}.cu-slash-command__popover-close:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-slash-command__popover-close:hover{stroke:var(--theme-main-color)}}.slash-commands_open .cdk-overlay-container{z-index:100003}'],encapsulation:2,changeDetection:0}),e})()},k6Oo:function(e,t,i){e.exports=i.p+"reactions.3856eedebbfbc20459df.png"},"kC/4":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("f0Wu"),n=i("fXoL"),s=i("oy6Y"),c=i("jJW4");let a=(()=>{class e{constructor(e,t,i){this.ref=e,this.timezonesService=t,this.sharedData=i,this.latestValue=null,this.latestReturnedValue=null}transform(e){if(this.timer&&this.latestValue===e)return this.latestReturnedValue;const t=Date.now()-parseInt(e,10),i=1e3*this.getSecondsUntilUpdate(t);return this.removeTimer(),this.timer=setTimeout(()=>{this.timer=null,this.ref.markForCheck()},i),this.latestValue=e,this.latestReturnedValue=this.getFormatted(e),this.latestReturnedValue}ngOnDestroy(){this.removeTimer()}getFormatted(e){const t=Date.now()-parseInt(e,10),i=new Date(parseInt(e,10)),n=36e5,s=this.timezonesService.createMoment(parseInt(e,10)),c=this.timezonesService.createMoment(),a=this.sharedData.currentUser.value&&this.sharedData.currentUser.value.twenty_four_hr_setting?"H:mm":"h:mm a";return t<6e4?"Just now":t<n?`${Math.round(t/6e4%60)} ${1===Math.round(t/6e4%60)?"min":"mins"} ago`:t>=n&&t<2*n?"1 hour ago":t<3*n?Math.round(t/n%24)+" hours ago":o(i).isSame(o(),"day")?""+s.format(a):o(i).isSame(o().subtract(1,"day"),"day")?"Yesterday at "+s.format(a):c.year()!==s.year()?`${s.format("MMM D Y")}\n                at ${s.format(a)}`:`${s.format("MMM D")}\n                at ${s.format(a)}`}removeTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}getSecondsUntilUpdate(e){return e<6e4?10:e<36e5?60:e<864e5?300:3600}}return e.\u0275fac=function(t){return new(t||e)(n.pc(),n.Wb(s.a),n.Wb(c.a))},e.\u0275pipe=n.Vb({name:"timeAgo",type:e,pure:!1}),e})()},kUJR:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},kaWx:function(e,t,i){"use strict";var o=i("JqBK");e.exports=function(e){return o(e).toLowerCase()}},keUj:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("fXoL"),n=i("LdyQ"),s=i("ofXK"),c=i("MJvn"),a=i("n+1/"),r=i("YA2R");function l(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"cu-priority-list",4),o.qc("onChange",function(t){return o.Uc(e),o.uc().onChange.emit(t)}),o.bc(),o.Yb(2,5),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("prioritySelected",e.prioritySelected)("priorities",e.priorities)("forBatch",e.forBatch)("noPriority",e.noPriority),o.Ib(1),o.Dc("ngTemplateOutlet",e.extraItemTemplate)}}const d=["*"];let u=(()=>{class e{constructor(){this.modifier="",this.forBatch=!1,this.noPriority=!1,this.disabled=!1,this.closeOnInsideClick=!0,this.onChange=new o.o,this.onOpen=new o.o,this.onClose=new o.o}ngOnInit(){}open(){this.dropdown.open(),this.onOpen.emit()}close(){this.dropdown.close(),this.onClose.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-priority-list-dropdown"]],viewQuery:function(e,t){if(1&e&&o.jd(n.b,3),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-priority-list-dropdown"],inputs:{prioritySelected:"prioritySelected",priorities:"priorities",modifier:"modifier",forBatch:"forBatch",noPriority:"noPriority",disabled:"disabled",closeOnInsideClick:"closeOnInsideClick",extraItemTemplate:"extraItemTemplate"},outputs:{onChange:"onChange",onOpen:"onOpen",onClose:"onClose"},ngContentSelectors:d,decls:5,vars:4,consts:[["cuDropdown","",3,"dropdownRepositionFlag","dropdownDisabled","dropdownCloseOnInsideClick","ngClass","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],[3,"prioritySelected","priorities","forBatch","noPriority","onChange"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.qc("dropdownClose",function(){return t.onClose.emit()})("dropdownOpen",function(){return t.onOpen.emit()}),o.cc(2,"div",2),o.Bc(3),o.bc(),o.bd(4,l,3,5,"div",3),o.bc()),2&e&&o.Dc("dropdownRepositionFlag",t.priorities)("dropdownDisabled",t.disabled)("dropdownCloseOnInsideClick",t.closeOnInsideClick)("ngClass",t.modifier)},directives:[n.b,s.o,c.a,a.a,r.a,s.x],encapsulation:2,changeDetection:0}),e})()},kykW:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("12P9"),n=i("fXoL");let s=(()=>{class e{transform(e){return Object(o.k)(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"taskRecurringToOptions",type:e,pure:!0}),e})()},lVAj:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("jJQC"),n=i("fXoL"),s=i("ofXK");const c=function(e){return{highlight:e}};function a(e,t){if(1&e){const e=n.dc();n.cc(0,"div",6),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc(2).handleClickItem(i.key)}),n.dd(1),n.bc()}if(2&e){const e=t.$implicit;n.Dc("ngClass",n.Hc(2,c,e.highlight)),n.Ib(1),n.fd(" ",e.label," ")}}function r(e,t){if(1&e&&(n.cc(0,"div",4),n.bd(1,a,2,4,"div",5),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngForOf",e.menu)("ngForTrackBy",e.trackByProperty)}}let l=(()=>{class e{constructor(){this.trackByProperty=Object(o.d)("key")}ngOnInit(){}handleClickItem(e){this.handleSelect(e),this.handleCommit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-unfurl-url-menu"]],inputs:{menu:"menu",handleCommit:"handleCommit",handleSelect:"handleSelect"},decls:4,vars:1,consts:function(){let e;return e=$localize`:@@cu-unfurl-url-menu__title_link-unfurl␟098c216a477d5b795ae243edcf42a07ff5feaca7␟5272614837566051642: LINK UNFURL `,[[1,"cu-unfurl-url-menu","unfurl-url__dropdown"],[1,"unfurl-url__title"],e,["class","unfurl-url__menu",4,"ngIf"],[1,"unfurl-url__menu"],["class","unfurl-url__item",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"unfurl-url__item",3,"ngClass","click"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.gc(2,2),n.bc(),n.bd(3,r,2,2,"div",3),n.bc()),2&e&&(n.Ib(3),n.Dc("ngIf",t.menu.length>0))},directives:[s.q,s.p,s.o],styles:[".unfurl-url__dropdown{box-shadow:0 1px 10px 0 rgba(0,0,0,.25);background:#fff;border-radius:6px;z-index:1000;pointer-events:all;animation:dropdownMenuAnimation .03s ease-in forwards;width:188px}.cu-os-win .unfurl-url__dropdown{scrollbar-width:thin}.cu-os-win .unfurl-url__dropdown::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .unfurl-url__dropdown::-webkit-scrollbar-track,.cu-os-win .unfurl-url__dropdown::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .unfurl-url__dropdown::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .unfurl-url__dropdown::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .unfurl-url__dropdown::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .unfurl-url__dropdown::-webkit-scrollbar,.cu-os-win .dark-theme .unfurl-url__dropdown::-webkit-scrollbar,.cu-os-win.dark-theme .unfurl-url__dropdown::-webkit-scrollbar-track,.cu-os-win .dark-theme .unfurl-url__dropdown::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .unfurl-url__dropdown::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .unfurl-url__dropdown::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .unfurl-url__dropdown::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .unfurl-url__dropdown::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .unfurl-url__dropdown::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .unfurl-url__dropdown::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .unfurl-url__dropdown{background:#384047;box-shadow:0 2px 16px 0 rgba(0,0,0,.4)}.task-container-sharing .unfurl-url__dropdown{display:none}.unfurl-url__title{color:#7c828d;font-size:11px;font-weight:500;opacity:.8;font-family:Gotham Pro,Proxima Nova,arial,serif}.unfurl-url__item,.unfurl-url__title{padding:0 12px;height:32px;line-height:32px}.unfurl-url__item{font-size:13px}.unfurl-url__item:hover{background:#f6f7f9}.dark-theme .unfurl-url__item:hover{background-color:#2b343b}.unfurl-url__item.highlight{background:#f6f7f9}.dark-theme .unfurl-url__item.highlight{background-color:#2b343b}"],encapsulation:2,changeDetection:0}),e})()},lfRK:function(e,t,i){"use strict";i.d(t,"a",function(){return ie});var o=i("fXoL"),n=i("jJQC"),s=i("XNiG"),c=i("Kj3r"),a=i("1G5W"),r=i("5b//"),l=i("5+WD"),d=i("/qOb"),u=i("SkDE"),m=i("ofXK"),p=i("LdyQ"),h=i("MJvn"),f=i("n+1/"),b=i("NsZK"),g=i("loh9"),_=i("UdVN"),v=i("3Pt+"),k=i("bFKe"),y=i("b+fk"),w=i("EDFS");const x=["searchInput"],I=["labelsDropdown"],T=["dropdownDropdown"],C=["itemMenuDropdown"],D=["submenuInput"];function O(e,t){if(1&e&&(o.cc(0,"div",11),o.Yb(1,9),o.bc()),2&e){o.uc(2);const e=o.Rc(9);o.ad("width",240,"px"),o.Ib(1),o.Dc("ngTemplateOutlet",e)}}function S(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",6,7),o.qc("dropdownOpen",function(){o.Uc(e);const t=o.uc();return t.focusSearchInput(),t.getRandomColor(),t.dropdownOpen.emit()})("dropdownClose",function(){o.Uc(e);const t=o.uc();return t.reset(),t.dropdownClose.emit()}),o.cc(3,"div",8),o.Yb(4,9),o.bc(),o.bd(5,O,2,3,"div",10),o.bc(),o.Zb()}if(2&e){const e=o.uc(),t=o.Rc(3);o.Ib(1),o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRightEdgePadding",10)("dropdownRepositionFlag",e.selectedItemIds),o.Ib(3),o.Dc("ngTemplateOutlet",t)}}function E(e,t){if(1&e&&o.Yb(0,9),2&e){o.uc();const e=o.Rc(3);o.Dc("ngTemplateOutlet",e)}}function P(e,t){1&e&&(o.ac(0),o.dd(1,"\u2013"),o.Zb())}function j(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.ed(e.placeholder)}}function A(e,t){if(1&e&&(o.cc(0,"div",15),o.bd(1,P,2,0,"ng-container",0),o.bd(2,j,2,1,"ng-container",0),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",!e.placeholder),o.Ib(1),o.Dc("ngIf",e.placeholder)}}function $(e,t){if(1&e){const e=o.dc();o.cc(0,"div",19),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).removeSelectedLabel(t.id)}),o.Xb(1,"div",20),o.bc()}if(2&e){const e=o.uc().$implicit;o.ad("background-color",e.color)}}function U(e,t){if(1&e&&(o.cc(0,"div",16),o.cc(1,"div",17),o.dd(2),o.bc(),o.bd(3,$,2,2,"div",18),o.bc()),2&e){const e=t.$implicit,i=o.uc(2);o.ad("background-color",e.color),o.Ob("no-color",!e.color||"#ffffff"===e.color||"#fff"===e.color),o.Ib(1),o.Dc("cuTooltip",e.label)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(1),o.fd(" ",e.label," "),o.Ib(1),o.Dc("ngIf",!i.disabled)}}function R(e,t){if(1&e&&(o.cc(0,"div",12),o.bd(1,A,3,2,"div",13),o.bd(2,U,4,8,"div",14),o.bc()),2&e){const e=o.uc();o.Ob("dropdown-enabled",e.includeDropdown),o.Ib(1),o.Dc("ngIf",!e.selectedItemIds||0===e.selectedItemIds.length),o.Ib(1),o.Dc("ngForOf",e.selectedItems)("ngForTrackBy",e.trackById)}}function M(e,t){if(1&e&&(o.cc(0,"div",11),o.Yb(1,9),o.bc()),2&e){o.uc(2);const e=o.Rc(9);o.ad("width",240,"px"),o.Ib(1),o.Dc("ngTemplateOutlet",e)}}function F(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",21,22),o.qc("dropdownOpen",function(){o.Uc(e);const t=o.uc();return t.focusSearchInput(),t.getRandomColor(),t.dropdownOpen.emit()})("dropdownClose",function(){o.Uc(e);const t=o.uc();return t.reset(),t.dropdownClose.emit()}),o.cc(3,"div",8),o.Yb(4,9),o.bc(),o.bd(5,M,2,3,"div",10),o.bc(),o.Zb()}if(2&e){o.uc();const e=o.Rc(7);o.Ib(1),o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRightEdgePadding",10),o.Ib(3),o.Dc("ngTemplateOutlet",e)}}function L(e,t){if(1&e&&o.Yb(0,9),2&e){o.uc();const e=o.Rc(7);o.Dc("ngTemplateOutlet",e)}}function N(e,t){1&e&&(o.cc(0,"div",15),o.dd(1," \u2013 "),o.bc())}function z(e,t){if(1&e&&(o.cc(0,"div",25),o.cc(1,"div",26),o.dd(2),o.bc(),o.bc()),2&e){const e=o.uc(2);o.ad("background-color",null==e.selectedDropdown?null:e.selectedDropdown.color),o.Ob("no-color",!e.selectedDropdown.color||"#ffffff"===e.selectedDropdown.color||"#fff"===e.selectedDropdown.color),o.Ib(1),o.Dc("cuTooltip",null==e.selectedDropdown?null:e.selectedDropdown.name)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(1),o.fd(" ",null==e.selectedDropdown?null:e.selectedDropdown.name," ")}}function q(e,t){if(1&e&&(o.cc(0,"div",23),o.bd(1,N,2,0,"div",13),o.bd(2,z,3,7,"div",24),o.bc()),2&e){const e=o.uc();o.Ob("dropdown-enabled",e.includeDropdown),o.Ib(1),o.Dc("ngIf",!e.selectedItems),o.Ib(1),o.Dc("ngIf",e.selectedItems&&e.selectedItems.length)}}function G(e,t){if(1&e){const e=o.dc();o.cc(0,"div",45),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(3).removeItem(t)}),o.Xb(1,"div",46),o.bc()}if(2&e){const e=o.uc().$implicit;o.ad("background-color",e.color)}}function V(e,t){if(1&e&&(o.cc(0,"div",42),o.cc(1,"div",43),o.dd(2),o.bc(),o.bd(3,G,2,2,"div",44),o.bc()),2&e){const e=t.$implicit,i=o.uc(3);o.ad("background-color",e.color),o.Ob("labels","labels"===i.mode)("dropdown","dropdown"===i.mode)("no-color",!e.color||"#ffffff"===e.color||"#fff"===e.color),o.Ib(2),o.fd(" ","labels"===i.mode?e.label:e.name," "),o.Ib(1),o.Dc("ngIf","labels"===i.mode)}}function B(e,t){if(1&e&&(o.cc(0,"div",40),o.bd(1,V,4,10,"div",41),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngForOf",e.chosenItems)("ngForTrackBy",e.trackById)}}function X(e,t){1&e&&(o.ac(0),o.gc(1,47),o.Zb())}function H(e,t){1&e&&(o.ac(0),o.gc(1,48),o.Zb())}function W(e,t){1&e&&o.Xb(0,"div",53)}function K(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",27),o.cc(2,"div",58),o.cc(3,"input",59,60),o.qc("ngModelChange",function(t){o.Uc(e);const i=o.uc(4);return i.itemToEdit.label||(i.itemToEdit.name=t)})("ngModelChange",function(t){o.Uc(e);const i=o.uc(2).$implicit;return o.uc(2).debounceNameChange.next({newName:t,original:i})}),o.bc(),o.bc(),o.cc(5,"div",61),o.cc(6,"div",33),o.gc(7,62),o.bc(),o.cc(8,"cu-color-picker-panel",63),o.qc("selectedColorChange",function(t){o.Uc(e);const i=o.uc(2).$implicit;return o.uc(2).updateItemToEdit("color",t,i,!1,!1,!1)}),o.bc(),o.bc(),o.cc(9,"div",64,65),o.qc("click",function(){o.Uc(e);const t=o.Rc(10);return o.uc(4).confirmDelete(t)}),o.Xb(11,"div",66),o.cc(12,"div",67),o.gc(13,68),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc(2).$implicit,t=o.uc(2),i=o.Rc(11);o.ad("width",210,"px"),o.Ib(3),o.Dc("ngModel",t.itemToEdit.label||t.itemToEdit.name),o.Ib(5),o.Dc("presetColors",t.presetColors)("selectedColor",t.itemToEdit.color||e.color||"#ffffff")("onlyPickFromPresets",!0),o.Ib(1),o.Dc("popover",i)("outsideClick",!0)}}function Q(e,t){if(1&e){const e=o.dc();o.cc(0,"div",54),o.cc(1,"div",21,55),o.qc("dropdownOpen",function(){o.Uc(e);const t=o.uc().$implicit;return o.uc(2).initSubmenu(t)})("dropdownClose",function(){return o.Uc(e),o.uc(3).resetSubmenu()}),o.cc(3,"div",8),o.Xb(4,"div",56),o.bc(),o.bd(5,K,14,8,"div",57),o.bc(),o.bc()}2&e&&(o.Ib(1),o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRightEdgePadding",10))}function Z(e,t){if(1&e){const e=o.dc();o.cc(0,"div",49),o.bd(1,W,1,0,"div",50),o.cc(2,"div",51),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).selectItem(i)}),o.cc(3,"div",43),o.dd(4),o.bc(),o.bc(),o.bd(5,Q,6,2,"div",52),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(2);o.Ob("dropdown","dropdown"===i.mode)("highlighted",(null==e?null:e.id)===(null==i.highlightedLabel?null:i.highlightedLabel.id)),o.Dc("cdkDragData",e),o.Ib(1),o.Dc("ngIf",!(i.searching&&i.disabled||i.preventEdits)),o.Ib(1),o.ad("background-color",e.color),o.Ob("dropdown","dropdown"===i.mode)("no-color",!e.color||"#ffffff"===e.color||"#fff"===e.color),o.Dc("cuTooltip",e.label)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(2),o.fd(" ","labels"===i.mode?e.label:e.name," "),o.Ib(1),o.Dc("ngIf",!i.disabled&&!i.preventEdits)}}function Y(e,t){1&e&&(o.cc(0,"div",75),o.dd(1," ("),o.ac(2),o.gc(3,76),o.Zb(),o.dd(4,") "),o.bc())}function J(e,t){if(1&e){const e=o.dc();o.cc(0,"div",69),o.qc("click",function(){return o.Uc(e),o.uc(2).updateCfItem(!0,!1,!1)}),o.Xb(1,"div",70),o.cc(2,"div",71),o.gc(3,72),o.bc(),o.cc(4,"div",73),o.cc(5,"div",43),o.dd(6),o.bc(),o.bc(),o.bd(7,Y,5,0,"div",74),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.ad("background-color",e.randomColor),o.Ob("dropdown","dropdown"===e.mode)("labels","labels"===e.mode)("white","#ffffff"===e.randomColor||"#fff"===e.randomColor||!e.randomColor),o.Dc("cuTooltip",e.searchString)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(2),o.fd(" ",e.searchString," "),o.Ib(1),o.Dc("ngIf",e.addingConflict)}}function ee(e,t){if(1&e){const e=o.dc();o.cc(0,"div",27),o.cc(1,"div",28),o.bd(2,B,2,2,"div",29),o.cc(3,"input",30,31),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().searchString=t})("ngModelChange",function(){o.Uc(e);const t=o.uc();return t.debounceSearch.next(t.searchString)}),o.bc(),o.bc(),o.cc(5,"div",32),o.cc(6,"div",33),o.bd(7,X,2,0,"ng-container",34),o.bd(8,H,2,0,"ng-template",null,35,o.cd),o.bc(),o.cc(10,"div",36,37),o.qc("cdkDropListDropped",function(t){return o.Uc(e),o.uc().dropItem(t)}),o.bd(12,Z,6,16,"div",38),o.bc(),o.bc(),o.bd(13,J,8,12,"div",39),o.bc()}if(2&e){const e=o.Rc(9),t=o.uc();o.Ib(2),o.Dc("ngIf",t.chosenItems.length),o.Ib(1),o.Dc("placeholder",t.disabled||t.preventEdits?t.searchText:t.searchOrTypeToCreateOptText)("ngModel",t.searchString),o.Ib(4),o.Dc("ngIf",t.searching&&!t.filteredItems.length)("ngIfElse",e),o.Ib(3),o.Dc("cdkDropListDisabled",t.searching||t.disabled),o.Ib(2),o.Dc("ngForOf",t.filteredItems)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",t.searching&&t.searchString.length&&!t.preventEdits)}}function te(e,t){if(1&e){const e=o.dc();o.cc(0,"div",77),o.gc(1,78),o.bc(),o.cc(2,"div",79),o.gc(3,80),o.bc(),o.cc(4,"div",81),o.cc(5,"button",82),o.qc("click",function(){return o.Uc(e),o.uc().confirmDeleteDropdownOption.popover.hide()}),o.gc(6,83),o.bc(),o.cc(7,"button",84),o.qc("click",function(){return o.Uc(e),o.uc().updateCfItem(!1,!0,!1)}),o.gc(8,85),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.kc(null==e.confirmDeleteDropdownOption?null:e.confirmDeleteDropdownOption.totalUsages),o.hc(3)}}let ie=(()=>{class e{constructor(e,t){this.cdr=e,this.customFieldsService=t,this.includeDropdown=!0,this.singleSelection=!1,this.preventEdits=!1,this.onDeleteLabel=new o.o,this.onSelect=new o.o,this.onEntityUpdate=new o.o,this.onSingleSelect=new o.o,this.dropdownOpen=new o.o,this.dropdownClose=new o.o,this.searchString="",this.searching=!1,this.debounceSearch=new s.a,this.debounceNameChange=new s.a,this.destroy$=new s.a,this.chosenItems=[],this.itemToEdit={color:"",id:"",name:"",label:""},this.presetColors=r.b,this.submenuNeedSave=!1,this.trackById=Object(n.d)("id"),this.addingConflict=!1,this.highlightedLabel=null,this.searchText=$localize`:generic search text@@common_search:Search`,this.searchOrTypeToCreateOptText=$localize`:@@cu-custom-field-dropdown-labels__form-placeholder_search-or-type-to-create:Search or type to create new option`}onKeyDown(e){if(this.labelsDropdown.isOpen)switch(e.which){case d.a.ENTER:this.highlightedLabel&&(this.selectItem(this.highlightedLabel),this.highlightedLabel=null);break;case d.a.ARROW_UP:this.traverseLabels("up");break;case d.a.ARROW_DOWN:this.traverseLabels("down")}}ngOnChanges(e){(e.items||e.selectedItemIds)&&this.refreshLocalData()}ngOnInit(){this.filteredItems=this.items,this.chosenItems=this.selectedItems?[...this.selectedItems]:[],this.debounceSearch.pipe(Object(c.a)(250)).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.filteredItems=this.searchItems(this.items,this.searchString),this.filteredItems&&this.filteredItems.length&&(this.highlightedLabel=this.filteredItems[0]),this.cdr.detectChanges()}),this.debounceNameChange.pipe(Object(c.a)(250)).pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.updateItemToEdit("labels"===this.mode?"label":"name",e.newName,e.original,!1,!1,!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}getSelectedItems(){return this.selectedItemIds?this.items.filter(e=>this.selectedItemIds.includes(e.id)):null}getRandomColor(){this.randomColor=this.presetColors[Math.floor(Math.random()*this.presetColors.length)]}searchItems(e,t){if(this.searching=!0,this.addingConflict=!1,this.highlightedLabel=null,!t)return this.searching=!1,this.items;let i;return"labels"===this.mode?i=({label:e})=>e.toLowerCase().includes(t.toLowerCase()):"dropdown"===this.mode&&(i=({name:e})=>e.toLowerCase().includes(t.toLowerCase())),e.filter(i)}focusSearchInput(){this.searchInput&&setTimeout(()=>{this.searchInput.nativeElement.focus()},100)}focusSubmenuInput(){this.submenuInput&&setTimeout(()=>{this.submenuInput.nativeElement.focus()},100)}selectItem(e){if("labels"===this.mode){-1===this.chosenItems.findIndex(t=>t.id===e.id)&&(this.chosenItems=this.chosenItems.concat(e));const t=this.chosenItems.map(e=>e.id);this.singleSelection?this.onSingleSelect.emit(e):this.onSelect.emit(t)}else"dropdown"===this.mode&&(this.chosenItems=[e],this.onSelect.emit(e.id))}removeItem(e){const t=this.chosenItems.findIndex(t=>t.id===e.id);-1!==t&&(this.chosenItems.splice(t,1),this.cdr.detectChanges()),this.singleSelection?this.onSingleSelect.emit(null):this.onDeleteLabel.emit(e.id)}removeSelectedLabel(e){this.singleSelection?this.onSingleSelect.emit(null):this.onDeleteLabel.emit(e)}reset(){this.searching=!1,this.filteredItems=this.items,this.searchString="",this.itemToEdit={color:"",id:"",name:""},this.addingConflict=!1,this.highlightedLabel=null}initSubmenu(e){this.itemToEdit={color:e.color,id:e.id,label:e.label,name:e.name},this.focusSubmenuInput()}resetSubmenu(){this.itemToEdit={color:"",id:"",label:"",name:""}}updateItemToEdit(e,t,i,o,n,s){this.itemToEdit[e]=t,this.submenuNeedSave=this.itemToEdit.color!==i.color||this.itemToEdit.label!==i.label||this.itemToEdit.name!==i.name,this.cdr.detectChanges(),this.updateCfItem(o,n,s)}updateCfItem(e,t,i){if(this.highlightedLabel=null,!(this.submenuNeedSave||e||t||i))return;let o=this.field.type_config.options;if(!o)return;if(e&&-1!==o.findIndex(e=>(e.label||e.name)===this.searchString))return void(this.addingConflict=!0);const n=o.findIndex(e=>e.id===this.itemToEdit.id);if(-1!==n&&o[n]&&!i&&(o[n].color=this.itemToEdit.color,"labels"===this.mode?o[n].label=this.itemToEdit.label:"dropdown"===this.mode&&(o[n].name=this.itemToEdit.name)),e){let e={label:this.searchString,color:this.randomColor};"dropdown"===this.mode&&(e={name:this.searchString,color:this.randomColor}),o=o.concat(e)}t&&o.splice(n,1),i&&(o=this.filteredItems);const s={name:this.field.name,type:this.field.type,type_config:{options:o}};"dropdown"===this.mode&&(s.type_config=Object.assign(Object.assign({},s.type_config),{new_drop_down:this.field.type_config.new_drop_down,placeholder:this.field.type_config.placeholder,default:this.field.type_config.default})),this.onEntityUpdate.emit({field:this.field,updates:s,entity:this.entity}),this.submenuNeedSave=!1,e&&(this.searchString="",this.searching=!1)}confirmDelete(e){this.customFieldsService.getField(this.field.id,{countValues:!0,optionId:this.itemToEdit.id}).subscribe(t=>{0===Number(t.value_count)?this.updateCfItem(!1,!0,!1):(this.confirmDeleteDropdownOption={totalUsages:Number(t.value_count),popover:e},e.show()),this.cdr.detectChanges()})}refreshLocalData(){this.selectedItems=this.getSelectedItems(),this.chosenItems=this.selectedItems?[...this.selectedItems]:[],this.filteredItems=this.searchString?this.searchItems(this.items,this.searchString):this.items,"dropdown"===this.mode&&(this.selectedDropdown=this.selectedItems?this.selectedItems[0]:null),this.cdr.markForCheck()}dropItem(e){Object(l.g)(this.filteredItems,e.previousIndex,e.currentIndex),this.updateCfItem(!1,!1,!0)}traverseLabels(e){if(!this.items||!this.items.length)return;if(this.searching&&(!this.filteredItems||!this.filteredItems.length))return;const t=this.searching?this.filteredItems:this.items,i=this.highlightedLabel?t.findIndex(e=>e.id===this.highlightedLabel.id):0;-1!==i&&("up"===e?this.highlightedLabel=this.highlightedLabel&&this.highlightedLabel.id!==t[0].id?t[i-1]:t[t.length-1]:"down"===e&&(this.highlightedLabel=this.highlightedLabel&&this.highlightedLabel.id!==t[t.length-1].id?t[i+1]:t[0]))}open(){this.dropdownDropdown&&this.dropdownDropdown.open(),this.labelsDropdown&&this.labelsDropdown.open()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(u.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-dropdown-labels"]],viewQuery:function(e,t){if(1&e&&(o.jd(x,1),o.jd(I,1),o.jd(T,1),o.jd(C,1),o.jd(D,1)),2&e){let e;o.Qc(e=o.rc())&&(t.searchInput=e.first),o.Qc(e=o.rc())&&(t.labelsDropdown=e.first),o.Qc(e=o.rc())&&(t.dropdownDropdown=e.first),o.Qc(e=o.rc())&&(t.itemMenuDropdown=e.first),o.Qc(e=o.rc())&&(t.submenuInput=e.first)}},hostAttrs:[1,"cu-custom-field-dropdown-labels"],hostVars:6,hostBindings:function(e,t){1&e&&o.qc("keydown",function(e){return t.onKeyDown(e)},!1,o.Sc),2&e&&o.Ob("cu-custom-field-dropdown-labels__disabled",t.disabled)("cu-custom-field-dropdown-labels__mode-labels","labels"===t.mode)("cu-custom-field-dropdown-labels__mode-dropdown","dropdown"===t.mode)},inputs:{mode:"mode",field:"field",items:"items",disabled:"disabled",includeDropdown:"includeDropdown",selectedItemIds:"selectedItemIds",entity:"entity",singleSelection:"singleSelection",preventEdits:"preventEdits",placeholder:"placeholder"},outputs:{onDeleteLabel:"onDeleteLabel",onSelect:"onSelect",onEntityUpdate:"onEntityUpdate",onSingleSelect:"onSingleSelect",dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose"},features:[o.Gb],decls:12,vars:4,consts:function(){let e,t,i,o,n,s,c,a,r,l;return e=$localize`:@@common_no-results-found␟f871b41bfbdb193507cce2cd848c2d02bde77a03␟1645193489541371451:No results found`,t=$localize`:@@common_select-an-option␟c8f0dbda0d557e58e54598c7d29d719d6c764413␟213925514828623262:Select an option`,i=$localize`:@@cu-custom-field-dropdown-labels__menu-search-title_select-color␟ac60b36ba44d2dfe50bd21e8c7dc1b5bfcee7d53␟1431759520843375939: Select Color `,o=$localize`:@@common_delete␟2b780c3edb757b7ed3e86a64df9a0d5ead598e27␟6168577169627162089: Delete `,n=$localize`:@@common_create␟0f8d412b21b180c72c06ba7b5bb3f19a705965b3␟2273881439361646332: Create `,s=$localize`:@@cu-custom-field-dropdown-labels__menu-search-create-conflict_field-exists␟e53193d43fcd5f1a802948a9c37c4fc2e9a03f41␟7276808745061388882:Field exists`,c=$localize`:@@common_warning␟d3b3b98e062c9d75d8c204259b94125dd4ac9bd6␟1407965746869844902: Warning `,a=$localize`:@@custom-fields_warning-text--remove-values-from-tasks␟b51a706e6452a25151b427c683e53129a9d9b036␟708005672171511083: This will remove these values from ${"\ufffd0\ufffd"}:INTERPOLATION: tasks. `,r=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,l=$localize`:@@common_delete␟d9797b7f7d130802253f3bdd06f7da9f474816af␟1555388322412608200: Delete `,[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],["labels",""],["dropdown",""],["menu",""],["confirmRemoveDropdownOptionPopoverTemplate",""],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownRightEdgePadding","dropdownRepositionFlag","dropdownOpen","dropdownClose"],["labelsDropdown","dropdown"],["cuDropdownToggle",""],[3,"ngTemplateOutlet"],["class","cu-custom-field-dropdown-labels__dropdown-menu",3,"width",4,"cuDropdownMenu"],[1,"cu-custom-field-dropdown-labels__dropdown-menu"],[1,"cu-custom-field-dropdown-labels__labels-container"],["class","cu-custom-field-dropdown-labels__placeholder",4,"ngIf"],["class","cu-custom-field-dropdown-labels__label",3,"backgroundColor","no-color",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-custom-field-dropdown-labels__placeholder"],[1,"cu-custom-field-dropdown-labels__label"],[1,"cu-custom-field-dropdown-labels__label-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["class","cu-custom-field-dropdown-labels__label-remove",3,"backgroundColor","cuPreventDefault","click",4,"ngIf"],[1,"cu-custom-field-dropdown-labels__label-remove",3,"cuPreventDefault","click"],["icon","close",1,"cu-custom-field-dropdown-labels__label-remove-icon"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownRightEdgePadding","dropdownOpen","dropdownClose"],["dropdownDropdown","dropdown"],[1,"cu-custom-field-dropdown-labels__dropdown-container"],["class","cu-custom-field-dropdown-labels__dropdown",3,"backgroundColor","no-color",4,"ngIf"],[1,"cu-custom-field-dropdown-labels__dropdown"],[1,"cu-custom-field-dropdown-labels__dropdown-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-custom-field-dropdown-labels__menu"],[1,"cu-custom-field-dropdown-labels__menu-search"],["class","cu-custom-field-dropdown-labels__menu-search-selected",4,"ngIf"],["type","text",1,"cu-custom-field-dropdown-labels__menu-search-input",3,"placeholder","ngModel","ngModelChange"],["searchInput",""],[1,"cu-custom-field-dropdown-labels__menu-search-main",3,"perfectScrollbar"],[1,"cu-custom-field-dropdown-labels__menu-search-title"],[4,"ngIf","ngIfElse"],["emptyPlaceholder",""],["id","itemList","cdkDropList","","cdkDropListOrientation","vertical",1,"cu-custom-field-dropdown-labels__menu-search-main-items",3,"cdkDropListDisabled","cdkDropListDropped"],["itemList",""],["class","cu-custom-field-dropdown-labels__menu-search-item","cdkDrag","","cuDragScroll","",3,"dropdown","cdkDragData","highlighted",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-custom-field-dropdown-labels__menu-search-create",3,"click",4,"ngIf"],[1,"cu-custom-field-dropdown-labels__menu-search-selected"],["class","cu-custom-field-dropdown-labels__menu-search-label",3,"labels","dropdown","no-color","backgroundColor",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-custom-field-dropdown-labels__menu-search-label"],[1,"cu-custom-field-dropdown-labels__menu-search-label-text"],["class","cu-custom-field-dropdown-labels__menu-search-label-remove",3,"backgroundColor","click",4,"ngIf"],[1,"cu-custom-field-dropdown-labels__menu-search-label-remove",3,"click"],["icon","cu2-times",1,"cu-custom-field-dropdown-labels__menu-search-label-remove-icon"],e,t,["cdkDrag","","cuDragScroll","",1,"cu-custom-field-dropdown-labels__menu-search-item",3,"cdkDragData"],["class","cu-custom-field-dropdown-labels__menu-search-handle","icon","handle3-round",4,"ngIf"],[1,"cu-custom-field-dropdown-labels__menu-search-label",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","click"],["class","cu-custom-field-dropdown-labels__menu-search-submenu",4,"ngIf"],["icon","handle3-round",1,"cu-custom-field-dropdown-labels__menu-search-handle"],[1,"cu-custom-field-dropdown-labels__menu-search-submenu"],["itemMenuDropdown","dropdown"],["icon","cu2-ellipsis",1,"cu-custom-field-dropdown-labels__menu-search-ellipsis"],[3,"width",4,"cuDropdownMenu"],[1,"cu-custom-field-dropdown-labels__menu-search","cu-custom-field-dropdown-labels__menu-search-submenu-search"],["type","text",1,"cu-custom-field-dropdown-labels__menu-search-input","cu-custom-field-dropdown-labels__menu-search-submenu-input",3,"ngModel","ngModelChange"],["submenuInput",""],[1,"cu-custom-field-dropdown-labels__menu-search-submenu-colors"],i,[3,"presetColors","selectedColor","onlyPickFromPresets","selectedColorChange"],["containerClass","popover_white","triggers","","container","body",1,"cu-custom-field-dropdown-labels__menu-search-submenu-delete",3,"popover","outsideClick","click"],["confirmRemoveDropdownOptionPopover","bs-popover"],["icon","cu2-menu-trash"],[1,"cu-custom-field-dropdown-labels__menu-search-submenu-delete-text"],o,[1,"cu-custom-field-dropdown-labels__menu-search-create",3,"click"],["icon","cu2-plus",1,"cu-custom-field-dropdown-labels__menu-search-create-icon"],[1,"cu-custom-field-dropdown-labels__menu-search-create-text"],n,[1,"cu-custom-field-dropdown-labels__menu-search-label",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["class","cu-custom-field-dropdown-labels__menu-search-create-conflict",4,"ngIf"],[1,"cu-custom-field-dropdown-labels__menu-search-create-conflict"],s,[1,"popover-content__title","popover-content__title_warning","popover-content__title_center"],c,[1,"popover-content__description","popover-content__description_center"],a,[1,"popover-content__btns"],["type","button",1,"cu-btn","cu-btn_x-sm","cu-btn_cancel-outline",3,"click"],r,["type","button",1,"cu-btn","cu-btn_x-sm",3,"click"],l]},template:function(e,t){1&e&&(o.bd(0,S,6,4,"ng-container",0),o.bd(1,E,1,1,"ng-container",1),o.bd(2,R,3,5,"ng-template",null,2,o.cd),o.bd(4,F,6,3,"ng-container",0),o.bd(5,L,1,1,"ng-container",1),o.bd(6,q,3,4,"ng-template",null,3,o.cd),o.bd(8,ee,14,9,"ng-template",null,4,o.cd),o.bd(10,te,9,1,"ng-template",null,5,o.cd)),2&e&&(o.Dc("ngIf","labels"===t.mode&&t.includeDropdown),o.Ib(1),o.Dc("ngIf","labels"===t.mode&&!t.includeDropdown),o.Ib(3),o.Dc("ngIf","dropdown"===t.mode&&t.includeDropdown),o.Ib(1),o.Dc("ngIf","dropdown"===t.mode&&!t.includeDropdown))},directives:[m.q,p.b,h.a,m.x,f.a,m.p,b.a,g.a,_.a,v.c,v.p,v.s,k.a,l.d,l.a,y.a,w.c],styles:['.cu-custom-field-dropdown-labels{max-width:100%;width:100%}.cu-custom-fields .cu-custom-field-dropdown-labels{width:100%}.cu-custom-fields .cu-custom-field-dropdown-labels .cu-custom-field-dropdown-labels__labels-container{justify-content:flex-start;padding:2px}.cu-custom-field-dropdown-labels__disabled{pointer-events:none}.cu-custom-field-dropdown-labels__mode-dropdown{width:100%}.cu-custom-field-dropdown-labels__mode-dropdown .cu-dropdown,.cu-custom-field-dropdown-labels__mode-dropdown .cu-dropdown__toggle{height:100%}.cu-custom-fields__body-item .cu-custom-field-dropdown-labels__mode-dropdown{width:auto;border-radius:3px}.cu-custom-fields__body-item .cu-custom-field-dropdown-labels__mode-dropdown .cu-custom-field-dropdown-labels__dropdown{height:31px;padding:0 10px;border-radius:3px}.cu-custom-field-dropdown-labels__dropdown-menu{overflow:hidden}.cu-custom-field-dropdown-labels__labels-container{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:2px 10px;border-radius:3px;max-width:100%;width:100%;min-height:30px;height:auto;border:1px solid transparent}.cu-custom-field-dropdown-labels__labels-container.dropdown-enabled{cursor:pointer}.cu-custom-field-dropdown-labels__labels-container.dropdown-enabled:hover{border-color:#e4e4e4}.dark-theme .cu-custom-field-dropdown-labels__labels-container.dropdown-enabled:hover{border-color:#1e272e}.cu-custom-field-dropdown-labels__placeholder{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;width:100%;display:flex;justify-content:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__placeholder{font-family:var(--global-font-support)}}.cu-custom-fields .cu-custom-field-dropdown-labels__placeholder{justify-content:flex-start;padding-left:13px}.cu-custom-field-dropdown-labels__label{min-width:40px;height:20px;border-radius:3px;display:flex;align-items:center;padding:0 5px;position:relative;margin:2px}.cu-custom-field-dropdown-labels__label:hover .cu-custom-field-dropdown-labels__label-remove{display:block}.cu-custom-field-dropdown-labels__label.no-color{border:1px solid #e4e4e4;background-color:transparent!important}.cu-custom-field-dropdown-labels__label.no-color .cu-custom-field-dropdown-labels__label-text{color:#343434}.cu-custom-field-dropdown-labels__label.no-color .cu-custom-field-dropdown-labels__label-remove-icon{stroke:#343434}.dark-theme .cu-custom-field-dropdown-labels__label.no-color{border:1px solid #abaeb0}.dark-theme .cu-custom-field-dropdown-labels__label.no-color .cu-custom-field-dropdown-labels__label-text{color:#d5d6d7}.dark-theme .cu-custom-field-dropdown-labels__label.no-color .cu-custom-field-dropdown-labels__label-remove-icon{stroke:#d5d6d7}.cu-task-row_auto-wrap .cu-custom-field-dropdown-labels__label{height:auto;min-height:20px}.cu-custom-field-dropdown-labels__label-text{font-weight:400;font-size:13px;line-height:1.2;font-family:Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__label-text{font-family:var(--global-font-support)}}.cu-task-row_auto-wrap .cu-custom-field-dropdown-labels__label-text{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;white-space:normal;overflow:visible;text-overflow:clip;text-align:center}.cu-custom-field-dropdown-labels__label-remove{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;display:none;position:absolute;right:4px}.cu-custom-field-dropdown-labels__label-remove:hover{transform:rotate(180deg)}.cu-custom-field-dropdown-labels__label-remove-icon{width:12px;height:12px;stroke:#fff;padding:2px}.cu-custom-field-dropdown-labels__dropdown-container{display:flex;align-items:center;width:100%;height:100%}.cu-custom-field-dropdown-labels__dropdown-container.dropdown-enabled{cursor:pointer}.cu-custom-field-dropdown-labels__dropdown{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.cu-custom-field-dropdown-labels__dropdown.no-color{border:1px solid #e4e4e4}.cu-custom-field-dropdown-labels__dropdown.no-color .cu-custom-field-dropdown-labels__dropdown-text{color:#343434}.cu-custom-field-dropdown-labels__dropdown-text{font-weight:400;font-size:12px;line-height:1.2;font-family:Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__dropdown-text{font-family:var(--global-font-support)}}.cu-custom-field-dropdown-labels__menu-search{display:flex;background-color:#fafbfc;border-bottom:1px solid #e9ebf0;flex-wrap:wrap}.dark-theme .cu-custom-field-dropdown-labels__menu-search{background-color:#2b343b;border-color:#1e272e}.cu-custom-field-dropdown-labels__menu-search-selected{display:flex;flex-wrap:wrap;align-items:center;padding:6px 8px 0}.cu-custom-field-dropdown-labels__menu-search-selected .cu-custom-field-dropdown-labels__menu-search-label.labels{cursor:default;margin:2px;padding:4px 0 4px 4px}.cu-custom-field-dropdown-labels__menu-search-input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;height:34px;width:100%;padding:11px 8px;color:#292d34;border:none;background-color:transparent;box-shadow:none!important;min-width:100px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__menu-search-input{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field-dropdown-labels__menu-search-input{color:#d5d6d7}.cu-custom-field-dropdown-labels__menu-search-input:-ms-input-placeholder{color:#292d34;opacity:.4}.cu-custom-field-dropdown-labels__menu-search-input::placeholder{color:#292d34;opacity:.4}.dark-theme .cu-custom-field-dropdown-labels__menu-search-input:-ms-input-placeholder{color:#d5d6d7}.dark-theme .cu-custom-field-dropdown-labels__menu-search-input::placeholder{color:#d5d6d7}.cu-custom-field-dropdown-labels__menu-search-main{width:100%;max-height:280px;padding:15px 12px 12px}.cu-custom-field-dropdown-labels__menu-search-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;text-transform:uppercase;color:#b9bec7;margin-bottom:10px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__menu-search-title{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field-dropdown-labels__menu-search-title{color:#abaeb0}.cu-custom-field-dropdown-labels__menu-search-item{width:100%;height:26px;display:flex;align-items:center;position:relative}.cu-custom-field-dropdown-labels__menu-search-item.dropdown{height:32px}.cu-custom-field-dropdown-labels__menu-search-item.highlighted:after{content:"";position:absolute;left:-12px;top:0;z-index:-1;width:calc(100% + 24px);height:26px;background-color:#f9f9f9}.dark-theme .cu-custom-field-dropdown-labels__menu-search-item.highlighted:after{background:#2b343b}.cu-custom-field-dropdown-labels__menu-search-item:hover .cu-custom-field-dropdown-labels__menu-search-ellipsis{opacity:1}.cu-custom-field-dropdown-labels__menu-search-handle{height:12px;width:6px;fill:#b9bec7;cursor:move;margin-right:8px}.cu-custom-field-dropdown-labels__menu-search-label{border-radius:3px;max-width:150px;padding:4px 5px;min-width:40px;cursor:pointer;height:18px;position:relative;display:flex;align-items:center;justify-content:space-between}.cu-custom-field-dropdown-labels__menu-search-label.dropdown{padding:5px 10px;height:28px}.cu-custom-field-dropdown-labels__menu-search-label.dropdown .cu-custom-field-dropdown-labels__menu-search-label-text{font-size:14px}.cu-custom-field-dropdown-labels__menu-search-label.no-color{border:1px solid #e4e4e4;background-color:transparent!important}.cu-custom-field-dropdown-labels__menu-search-label.no-color .cu-custom-field-dropdown-labels__menu-search-label-text{color:#343434}.cu-custom-field-dropdown-labels__menu-search-label.no-color .cu-custom-field-dropdown-labels__menu-search-label-remove-icon{fill:#343434}.dark-theme .cu-custom-field-dropdown-labels__menu-search-label.no-color{border:1px solid #abaeb0}.dark-theme .cu-custom-field-dropdown-labels__menu-search-label.no-color .cu-custom-field-dropdown-labels__menu-search-label-text{color:#d5d6d7}.dark-theme .cu-custom-field-dropdown-labels__menu-search-label.no-color .cu-custom-field-dropdown-labels__menu-search-label-remove-icon{fill:#abaeb0;opacity:1}.cu-custom-field-dropdown-labels__menu-search-label-text{font-weight:400;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__menu-search-label-text{font-family:var(--global-font-support)}}.cu-custom-field-dropdown-labels__menu-search-label-remove{background:transparent!important;display:flex;justify-content:center;align-items:center;cursor:pointer;min-width:18px;width:16px;border-radius:0 3px 3px 0}.cu-custom-field-dropdown-labels__menu-search-label-remove:hover .cu-custom-field-dropdown-labels__menu-search-label-remove-icon{transform:rotate(180deg)}.cu-custom-field-dropdown-labels__menu-search-label-remove-icon{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;stroke:#000;opacity:.2}.cu-custom-field-dropdown-labels__menu-search-submenu{margin-left:auto}.cu-custom-field-dropdown-labels__menu-search-submenu-search{display:flex;justify-content:space-between;align-items:center}.cu-custom-field-dropdown-labels__menu-search-submenu-search-icon{height:16px;width:16px;margin-right:8px;fill:#b9bec7;cursor:not-allowed}.cu-custom-field-dropdown-labels__menu-search-submenu-search-icon.ready{fill:#67cb48;cursor:pointer}.cu-custom-field-dropdown-labels__menu-search-submenu-input{padding:0 12px;flex-grow:1;width:auto}.cu-custom-field-dropdown-labels__menu-search-submenu-colors{width:100%;border-bottom:1px solid #e9ebf0;padding:15px 8px}.dark-theme .cu-custom-field-dropdown-labels__menu-search-submenu-colors{border-color:#1e272e}.cu-custom-field-dropdown-labels__menu-search-submenu-colors .cu-custom-field-dropdown-labels__menu-search-title{padding:0 4px}.cu-custom-field-dropdown-labels__menu-search-submenu-colors .cu-color-picker-panel{box-shadow:none;border-radius:0}.cu-custom-field-dropdown-labels__menu-search-submenu-colors .cu-color-picker-panel__preset-container{padding:0;float:none;box-shadow:none;border-radius:0}.cu-custom-field-dropdown-labels__menu-search-submenu-colors .cu-color-picker-panel__preset-color{margin:6px 7px}.cu-custom-field-dropdown-labels__menu-search-submenu-delete{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:100%;height:42px;display:flex;align-items:center;padding:0 12px;cursor:pointer}.cu-custom-field-dropdown-labels__menu-search-submenu-delete:hover{background-color:#fafbfc}.cu-custom-field-dropdown-labels__menu-search-submenu-delete-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-left:12px;color:#fd71af}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__menu-search-submenu-delete-text{font-family:var(--global-font-support)}}.cu-custom-field-dropdown-labels__menu-search-submenu-delete .icon{width:16px;height:16px;fill:#fd71af}.cu-custom-field-dropdown-labels__menu-search-ellipsis{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;opacity:0;width:25px;height:25px;padding:5px;fill:#b9bec7;cursor:pointer}.cu-custom-field-dropdown-labels__menu-search-create{background-color:#fafbfc;border-top:1px solid #e9ebf0;height:42px;display:flex;align-items:center;padding:0 12px;cursor:pointer}.dark-theme .cu-custom-field-dropdown-labels__menu-search-create{border-color:#1e272e;background-color:#2b343b}.cu-custom-field-dropdown-labels__menu-search-create-icon{width:8px;height:8px;fill:#7c828d}.cu-custom-field-dropdown-labels__menu-search-create-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;color:#7c828d;padding:0 0 0 4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__menu-search-create-text{font-family:var(--global-font-support)}}.cu-custom-field-dropdown-labels__menu-search-create .cu-custom-field-dropdown-labels__menu-search-label.dropdown,.cu-custom-field-dropdown-labels__menu-search-create .cu-custom-field-dropdown-labels__menu-search-label.labels{margin-left:5px}.cu-custom-field-dropdown-labels__menu-search-create-conflict{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:1;padding-left:5px;color:#d16464;white-space:nowrap}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field-dropdown-labels__menu-search-create-conflict{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),e})()},lkVx:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{transform(e){return(e||[]).map(e=>e.user?e.user:e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Vb({name:"membersToUsers",type:e,pure:!0}),e})()},lnp7:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return c});var o=i("fFxs");const n=e=>{e=(e=(e=(e=(e=(e=(e=(e=e||"").replace(/class="clickup-table-view"/g,'style="margin:10px; overflow: auto"')).replace(/<table class="clickup-table" style="width: 450px">/g,'<table class="clickup-table" style="width: 450px;table-layout:fixed;border-collapse: collapse;border-spacing:0">')).replace(/<td /g,'<td style="overflow: auto;outline: 0;border: 1px solid #7c828d;padding: 2px 5px;"')).replace(/<pre /g,'<pre style="white-space: pre-wrap;font-family: monospace;font-size: 90%;line-height: 150%;background: #f7f7f7;color: #343434;margin: 5px 0;padding: 15px;display: block;overflow-x: auto;position: relative;overflow:auto;"')).replace(/<p class="qlbt-cell-line"/g,'<p style="margin: 0;color: rgba(52,52,52,.8);min-height: 20px;"')).replace(/<p data-block-id/g,'<p style="margin:0" data-block-id')).replace(/<strong class="cu-mention "/g,'<strong style="font-weight: 400"');const t=new RegExp("<p><br/></p>","g");e=e.replace(t,"");const i=[];let o=0;for(let n=0;n<e.length;n++)"ol>"===e.slice(n,n+3)&&("/"===e[n-1]?o--:"<"===e[n-1]&&(o++,i.push({index:n,open:o})));return i.forEach((t,o)=>{let n="";t.open%3==1?(n=' style="list-style: decimal; padding-left: 1.5em;"',e=e.slice(0,t.index+2)+n+e.slice(t.index+2+Math.abs(0))):t.open%3==2?(n=' style="list-style-type: lower-alpha; padding-top: 5px;"',e=e.slice(0,t.index+2)+n+e.slice(t.index+2+Math.abs(0))):t.open%3==0&&(n=' style="list-style-type: lower-roman; padding-top: 5px;"',e=e.slice(0,t.index+2)+n+e.slice(t.index+2+Math.abs(0))),i.slice(o+1).forEach(e=>{e.index=e.index+n.length})}),e};function s(e,t){return(t||[]).filter(t=>!e[t.email.toLowerCase()])}const c=(e,t)=>{const i=e.from[0].email,n=t.from[0].email,c=i.toLowerCase()===n.toLowerCase()?s({[n]:!0},e.from):[...t.from],a={email:i},r=[...c,a].reduce((e,t)=>(e[t.email.toLowerCase()]=!0,e),{}),l=s(r,t.cc);return c.length?l.push(...s(r,t.to)):c.push(...s(r,t.to)),{[o.g.To]:c,[o.g.Cc]:l}}},lwJj:function(e,t,i){e.exports=i.p+"check-unresolved.ea9a638fa53c30d87c68.png"},m2n9:function(e){e.exports=JSON.parse('{"AElig":"\xc6","AMP":"&","Aacute":"\xc1","Acirc":"\xc2","Agrave":"\xc0","Aring":"\xc5","Atilde":"\xc3","Auml":"\xc4","COPY":"\xa9","Ccedil":"\xc7","ETH":"\xd0","Eacute":"\xc9","Ecirc":"\xca","Egrave":"\xc8","Euml":"\xcb","GT":">","Iacute":"\xcd","Icirc":"\xce","Igrave":"\xcc","Iuml":"\xcf","LT":"<","Ntilde":"\xd1","Oacute":"\xd3","Ocirc":"\xd4","Ograve":"\xd2","Oslash":"\xd8","Otilde":"\xd5","Ouml":"\xd6","QUOT":"\\"","REG":"\xae","THORN":"\xde","Uacute":"\xda","Ucirc":"\xdb","Ugrave":"\xd9","Uuml":"\xdc","Yacute":"\xdd","aacute":"\xe1","acirc":"\xe2","acute":"\xb4","aelig":"\xe6","agrave":"\xe0","amp":"&","aring":"\xe5","atilde":"\xe3","auml":"\xe4","brvbar":"\xa6","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","eacute":"\xe9","ecirc":"\xea","egrave":"\xe8","eth":"\xf0","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","iacute":"\xed","icirc":"\xee","iexcl":"\xa1","igrave":"\xec","iquest":"\xbf","iuml":"\xef","laquo":"\xab","lt":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","ntilde":"\xf1","oacute":"\xf3","ocirc":"\xf4","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","oslash":"\xf8","otilde":"\xf5","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","raquo":"\xbb","reg":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","thorn":"\xfe","times":"\xd7","uacute":"\xfa","ucirc":"\xfb","ugrave":"\xf9","uml":"\xa8","uuml":"\xfc","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},m5eJ:function(e,t,i){"use strict";i.d(t,"a",function(){return F});var o=i("8SgM"),n=i("aQOx"),s=i("ofXK"),c=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[s.c,n.a,o.a]]}),e})();var r=i("bZrb"),l=i("rh6m"),d=i("bx+h"),u=i("K0KF"),m=i("1M0N");let p=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[s.c,m.a,u.a,d.a,l.a]]}),e})();var h=i("csDc"),f=i("WFPt"),b=i("mcWp"),g=i("EDFS"),_=i("Ivax"),v=i("4Dfh"),k=i("CDR3"),y=i("ujc1"),w=i("tyNb"),x=i("VBI8"),I=i("y71m"),T=i("t1N4"),C=i("7MBn"),D=i("vnix"),O=i("Fv+p"),S=i("EHXF"),E=i("KyjD"),P=i("gb9A"),j=i("/SUI"),A=i("5zfR"),$=i("s8Mb"),U=i("bFKe"),R=i("38Di"),M=i("Jdc8");let F=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},providers:[k.a,y.a],imports:[[s.c,g.d,_.a,v.a,g.d,w.l,x.a,I.a,m.a,T.a,D.a,C.a,R.a,b.a,f.a,O.a,S.a,h.a,E.a,u.a,P.a,j.a,p,r.a,a,A.a,$.a,U.b,M.a]]}),e})()},mCrA:function(e,t,i){"use strict";i.d(t,"c",function(){return G}),i.d(t,"h",function(){return oe}),i.d(t,"g",function(){return ne}),i.d(t,"l",function(){return se}),i.d(t,"e",function(){return ce}),i.d(t,"d",function(){return ae}),i.d(t,"f",function(){return re}),i.d(t,"q",function(){return le}),i.d(t,"r",function(){return de}),i.d(t,"u",function(){return ue}),i.d(t,"v",function(){return me}),i.d(t,"s",function(){return pe}),i.d(t,"b",function(){return he}),i.d(t,"n",function(){return fe}),i.d(t,"m",function(){return be}),i.d(t,"t",function(){return ge}),i.d(t,"i",function(){return _e}),i.d(t,"o",function(){return ve}),i.d(t,"p",function(){return ke}),i.d(t,"k",function(){return ye}),i.d(t,"j",function(){return we}),i.d(t,"a",function(){return xe});var o=i("fXoL"),n=i("dTHz"),s=i("jJQC"),c=i("MguC"),a=i("Jf2N"),r=i("ofXK"),l=i("LdyQ"),d=i("MJvn"),u=i("UdVN"),m=i("n+1/"),p=i("loh9"),h=i("2uJs");const f=["dropdown"],b=["sharingHelpModal"];function g(e,t){if(1&e&&(o.cc(0,"div",6),o.cc(1,"div",7),o.cc(2,"div",8),o.dd(3),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(2),o.Ob("cu-permission-options__text_readonly",null==e.options[e.selectedIndex]?null:e.options[e.selectedIndex].readonly),o.Ib(1),o.fd(" ",void 0!==e.selectedIndex?null==e.options[e.selectedIndex]?null:e.options[e.selectedIndex].title:e.placeholder," ")}}function _(e,t){if(1&e&&(o.cc(0,"a",21),o.qc("click",function(e){return e.stopPropagation()}),o.Xb(1,"div",22),o.bc()),2&e){const e=o.uc().$implicit;o.Ec("href",e.learnMoreUrl,o.Xc),o.Ib(1),o.Dc("icon","question-o")}}function v(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",23),o.qc("click",function(){return o.Uc(e),o.uc(4).openSharingHelpModal()}),o.Xb(2,"div",22),o.bc(),o.Zb()}2&e&&(o.Ib(2),o.Dc("icon","question-o"))}function k(e,t){}const y=function(e){return{"cu-permission-options__menu-item_disabled":e}},w=function(e,t,i){return{option:e,selected:t,defaultTemplate:i}};function x(e,t){if(1&e){const e=o.dc();o.cc(0,"div",17),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).changePermission(i)}),o.bd(1,_,2,2,"a",18),o.bd(2,v,3,1,"ng-container",19),o.bd(3,k,0,0,"ng-template",20),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(3),n=o.Rc(5),s=o.Rc(7),c=o.Rc(3);o.Dc("ngClass",o.Hc(5,y,e.disabled||e.disabledForGuests&&(null==i.member?null:i.member.role)===i.UserRole.GUEST)),o.Ib(1),o.Dc("ngIf",e.learnMoreUrl),o.Ib(1),o.Dc("ngIf",e.learnMoreModal&&"sharingHelpModal"===e.learnMoreModal),o.Ib(1),o.Dc("ngTemplateOutlet",i.itemTemplate||("limited"===e.template?n:"free"===e.template?s:c))("ngTemplateOutletContext",o.Jc(7,w,e,e.id===(null==i.options[i.selectedIndex]?null:i.options[i.selectedIndex].id),c))}}function I(e,t){if(1&e&&(o.cc(0,"div",14),o.cc(1,"div",15),o.bd(2,x,4,11,"div",16),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Ib(2),o.Dc("ngForOf",e.options)("ngForTrackBy",e.trackById)}}function T(e,t){if(1&e&&(o.cc(0,"div",9,10),o.cc(2,"div",11),o.qc("click",function(e){return e.stopPropagation()}),o.cc(3,"div",8),o.dd(4),o.bc(),o.Xb(5,"div",12),o.bc(),o.bd(6,I,3,2,"div",13),o.bc()),2&e){const e=o.uc();o.Dc("dropdownCloseOnInsideClick",!1),o.Ib(4),o.fd(" ",void 0!==e.selectedIndex?null==e.options[e.selectedIndex]?null:e.options[e.selectedIndex].title:e.placeholder," ")}}function C(e,t){1&e&&o.Xb(0,"div",27)}function D(e,t){if(1&e&&(o.cc(0,"div",24),o.dd(1),o.bd(2,C,1,0,"div",25),o.bc(),o.cc(3,"div",26),o.dd(4),o.bc()),2&e){const e=t.option,i=t.selected;o.Ib(1),o.fd(" ",e.title," "),o.Ib(1),o.Dc("ngIf",i),o.Ib(2),o.ed(e.desc)}}function O(e,t){}const S=function(e,t){return{option:e,selected:t}};function E(e,t){if(1&e&&(o.cc(0,"div",28),o.Xb(1,"div",29),o.cc(2,"div",30),o.gc(3,31),o.bc(),o.cc(4,"a",32),o.gc(5,33),o.bc(),o.bc(),o.bd(6,O,0,0,"ng-template",20)),2&e){const e=t.option,i=t.selected,n=o.uc(),s=o.Rc(3);o.Ib(4),o.Dc("href",n.upgradeLink,o.Xc),o.Ib(2),o.Dc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.Ic(3,S,e,i))}}function P(e,t){1&e&&o.Xb(0,"div",27)}function j(e,t){if(1&e&&(o.cc(0,"div",24),o.dd(1),o.cc(2,"span",34),o.gc(3,35),o.bc(),o.bd(4,P,1,0,"div",25),o.bc(),o.cc(5,"div",26),o.dd(6),o.bc()),2&e){const e=t.option,i=t.selected;o.Ib(1),o.fd(" ",e.title," "),o.Ib(3),o.Dc("ngIf",i),o.Ib(2),o.ed(e.desc)}}function A(e,t){1&e&&o.Xb(0,"cu-sharing-help-modal")}const $={id:n.e.CREATE,title:$localize`:@@cu-permission-options-dropdown__permission-item_full-perms:Full`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_full-dashboard-perms:Can edit and delete Dashboard`},U={id:n.e.COMMENT,title:$localize`:@@common_edit:Edit`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_edit-dashboard:Can add and edit widgets`},R={id:n.e.READ,title:$localize`:@@permissions_view-only:View only`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_view-dashboard:Can view and comment only`},M={id:n.e.READ,title:$localize`:@@permissions_view-only:View only`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_readonly:Read-only. Can't comment or edit.`},F={id:n.e.READ,title:$localize`:@@permissions_can-view:Can view`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_readonly-goals:Read-only. Can not edit goals`},L=($localize`:@@permissions_can-view:Can view`,$localize`:@@cu-permission-options-dropdown__permission-item-desc_readonly-folders:Read-only. Can not edit folders`,{id:n.e.COMMENT,title:$localize`:@@common_comment:Comment`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_comment:Can comment. If assigned, can change status & assignee(s).`}),N={id:n.e.EDIT,title:$localize`:@@common_edit:Edit`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_edit-tasks:Can edit, but can't create tasks.`},z={id:n.e.EDIT,title:$localize`:@@cu-permission-options-dropdown__permission-item_create-and-edit:Create and Edit`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_edit-goals:Can edit, create and delete goals.`},q=($localize`:@@common_edit:Edit`,$localize`:@@cu-permission-options-dropdown__permission-item-desc_edit-folders:Can edit, but can't create or delete folders.`,{id:n.e.CREATE,title:$localize`:@@cu-permission-options-dropdown__permission-item_full-perms:Full`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_full-tasks-perms:Full access. Can create tasks.`}),G={id:n.e.CREATE,title:$localize`:@@cu-permission-options-dropdown__permission-item_full-perms:Full`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_full-subtask-perms:Can edit, plus can create subtasks.`},V={id:c.f.ADMIN,title:$localize`:@@permissions_unprotect-admin-only:Only admins can unprotect`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_unprotect-admin-only:Allow saving layout changes and protecting layouts for admins only. This selection is persisted regardless of if you change the individual states below`,viewProtection:!0},B={id:c.f.ALL,title:$localize`:@@cu-permission-options-dropdown__permission-item_unprotect-view:Can unprotect view`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_unprotect-view:Allow saving layout changes and protecting layouts.`,viewProtection:!0},X={id:c.f.NONE,title:$localize`:@@cu-permission-options-dropdown__permission-item_cant-unprotect-view:Can't unprotect view`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_cant-unprotect-view:Don’t allow changing layout, deleting, or protecting view.`,learnMoreUrl:"http://docs.clickup.com/clickup-2-0/saving-layout-changes",viewProtection:!0},H={id:n.e.CREATE,title:$localize`:@@cu-permission-options-dropdown__permission-item_unprotect-view:Can unprotect view`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_unprotect-view:Allow saving layout changes and protecting layouts.`},W={id:n.e.READ,title:$localize`:@@cu-permission-options-dropdown__permission-item_cant-unprotect-view:Can't unprotect view`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_cant-unprotect-view:Don’t allow changing layout, deleting, or protecting view.`,learnMoreUrl:"http://docs.clickup.com/clickup-2-0/saving-layout-changes"},K={id:n.e.READ,title:$localize`:@@cu-permission-options-dropdown__permission-item_guests-cant-unprotect-view:Guests can't unprotect views`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_guests-cant-unprotect-view:Guests aren't allowed to save changes to layouts.`,readonly:!0},Q={id:n.e.CREATE,title:$localize`:@@cu-permission-options-dropdown__permission-item_team-owner-unprotect-view:Team owner can always unprotect views`,desc:$localize`:@@cu-permission-options-dropdown__permission-item_team-owner-unprotect-view:Team owner can always unprotect views`,readonly:!0},Z=(Object.assign(Object.assign({},H),{title:$localize`:@@cu-permission-options-dropdown__permission-item_admin-unprotect-view:Admins can unprotect views`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_unprotect-view:Allow saving layout changes and protecting layouts.`}),{id:n.e.CREATE,title:$localize`:@@cu-permission-options-dropdown__permission-item_delete-chat:Can delete chat`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_delete-chat:Allow deleting the chat`}),Y={id:n.e.READ,title:$localize`:@@cu-permission-options-dropdown__permission-item_cant-delete-chat:Can't delete chat`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_cant-delete-chat:Only allow viewing and adding comments`},J={id:n.e.CREATE,title:$localize`:@@common_edit:Edit`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_edit-docs:Allow editing of the docs`},ee={id:n.e.READ,title:$localize`:@@permissions_view-only:View only`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_view-docs:Dont't allow editing of the docs`},te={id:n.e.COMMENT,title:$localize`:@@cu-permission-options-dropdown__permission-item_comment-only:Comment only`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_comment-only:Allow viewing and adding comments`},ie={id:c.f.ADMIN,title:$localize`:@@cu-permission-options-dropdown__permission-item_admin-only-edit:Only admins can edit`,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_admin-only-edit:Only admins can create, edit, and delete docs.`,viewProtection:!0},oe=[Object.assign(Object.assign({},J),{id:c.f.ALL,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_full-docs-perm:Allow creating, editing, and deleting docs.`,viewProtection:!0}),Object.assign(Object.assign({},ee),{id:c.f.NONE,desc:$localize`:@@cu-permission-options-dropdown__permission-item-desc_view-only-docs:Allow viewing docs only.`,viewProtection:!0}),ie],ne=[q,N,L,M],se=[F,z],ce=[$,U,R],ae=[R],re=[q,N,L,Object.assign(Object.assign({},M),{template:"free"})],le=[q,Object.assign(Object.assign({},M),{disabled:!0,template:"limited"}),Object.assign(Object.assign({},L),{disabled:!0}),Object.assign(Object.assign({},N),{disabled:!0})],de=[q,Object.assign(Object.assign({},M),{disabled:!0,template:"limited"}),Object.assign(Object.assign({},L),{disabled:!0}),Object.assign(Object.assign({},N),{disabled:!0})],ue=[W,H],me=[B,X,V],pe=[Object.assign(Object.assign({},W),{disabled:!0,template:"limited"}),Object.assign(Object.assign({},H),{disabled:!0})],he=[Y,Z],fe=[Object.assign(Object.assign({},Y),{disabled:!0,template:"limited"}),Object.assign(Object.assign({},Z),{disabled:!0})],be=[K],ge=[Q],_e=[J,te,ee],ve=[Object.assign(Object.assign({},ee),{disabled:!0,template:"limited"}),Object.assign(Object.assign({},te),{disabled:!0}),Object.assign(Object.assign({},J),{disabled:!0})],ke=[Object.assign(Object.assign({},W),{disabled:!0,template:"limited",title:$localize`:@@cu-permission-options-dropdown__permission-item_cant-edit-form:Can't edit form`}),Object.assign(Object.assign({},H),{disabled:!0,title:$localize`:@@cu-permission-options-dropdown__permission-item_can-edit-form:Can edit form`})],ye=[Object.assign(Object.assign({},H),{title:$localize`:@@cu-permission-options-dropdown__permission-item_can-edit-form:Can edit form`}),Object.assign(Object.assign({},W),{title:$localize`:@@cu-permission-options-dropdown__permission-item_cant-edit-form:Can't edit form`})],we=[Object.assign(Object.assign({},B),{title:$localize`:@@cu-permission-options-dropdown__permission-item_can-edit-form:Can edit form`}),Object.assign(Object.assign({},X),{title:$localize`:@@cu-permission-options-dropdown__permission-item_cant-edit-form:Can't edit form`}),Object.assign(Object.assign({},V),{title:$localize`:@@cu-permission-options-dropdown__permission-item_admin-only-edit:Only admins can edit`})];let xe=(()=>{class e{constructor(e){this.modalService=e,this.placeholder="",this.keepState=!0,this.editable=!0,this.options=ne,this.changedOption=new o.o,this.hostClass=!0,this.UserRole=n.f,this.trackById=Object(s.d)("id")}ngOnInit(){}ngOnChanges(e){(e.selectedPermission||e.options)&&(this.selectedIndex=this.selectedPermission?this.options.findIndex(e=>e.id===this.selectedPermission):void 0)}changePermission(e){e.disabled||e.disabledForGuests&&this.member&&this.member.role===n.f.GUEST||(this.dropdown.close(),this.changedOption.emit(e),this.keepState&&(this.selectedIndex=this.options.findIndex(t=>t.id===e.id)))}openSharingHelpModal(){this.dropdown.close(),this.modalService.open({modifier:"cu-modal_fullwidth",content:this.sharingHelpModal,preventExternalClick:!0})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-permission-options-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(f,1),o.jd(b,3)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.sharingHelpModal=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-permission-options-host",t.hostClass)},inputs:{placeholder:"placeholder",selectedPermission:"selectedPermission",keepState:"keepState",editable:"editable",itemTemplate:"itemTemplate",options:"options",upgradeLink:"upgradeLink",member:"member"},outputs:{changedOption:"changedOption"},features:[o.Gb],decls:10,vars:2,consts:function(){let e,t,i;return e=$localize`:@@cu-permission-options-dropdown__unlimited-plan-only␟55a73b9586af6ab7b781b0ea6384ab3286273bf9␟1087690808825618035: Only in Unlimited plan `,t=$localize`:@@common_upgrade␟f147d0f7f965cccee2e77294cba8e1b88021fa08␟2849750161085431718:Upgrade`,i=$localize`:@@cu-permission-options-dropdown__always-free␟ae4ce642f5e218a4b903c1850ff5279277b7c745␟2698604688168379101:Always free`,[["class","cu-dropdown cu-permission-options cu-dropdown cu-permission-options_readonly",4,"ngIf"],["class","cu-dropdown cu-permission-options","cuDropdown","",3,"dropdownCloseOnInsideClick",4,"ngIf"],["defaultItemTemplate",""],["limitedItemTemplate",""],["freeItemTemplate",""],["sharingHelpModal",""],[1,"cu-dropdown","cu-permission-options","cu-dropdown","cu-permission-options_readonly"],[1,"cu-permission-options__value"],[1,"cu-permission-options__text"],["cuDropdown","",1,"cu-dropdown","cu-permission-options",3,"dropdownCloseOnInsideClick"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle","cu-permission-options__value",3,"click"],["icon","angle-right",1,"cu-permission-options__down"],["class","cu-dropdown__menu cu-permission-options__menu",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-permission-options__menu"],[1,"cu-permission-options__menu-list"],["class","cu-permission-options__menu-item",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-permission-options__menu-item",3,"ngClass","click"],["target","_blank","class","cu-permission-options__menu-question",3,"href","click",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank",1,"cu-permission-options__menu-question",3,"href","click"],[1,"cu-permission-options__menu-question-icon",3,"icon"],["cuPreventDefault","",1,"cu-permission-options__menu-question",3,"click"],[1,"cu-permission-options__item-title"],["class","cu-permission-options__item-check","icon","dropdown-settings_mark",4,"ngIf"],[1,"cu-permission-options__item-desc"],["icon","dropdown-settings_mark",1,"cu-permission-options__item-check"],[1,"cu-permission-options__item-paywall"],["icon","lock4",1,"cu-permission-options__item-lock"],[1,"cu-permission-options__item-limit"],e,["target","_blank",1,"cu-permission-options__item-upgrade",3,"href"],t,[1,"cu-permission-options__item-free"],i]},template:function(e,t){1&e&&(o.bd(0,g,4,3,"div",0),o.bd(1,T,7,2,"div",1),o.bd(2,D,5,3,"ng-template",null,2,o.cd),o.bd(4,E,7,6,"ng-template",null,3,o.cd),o.bd(6,j,7,3,"ng-template",null,4,o.cd),o.bd(8,A,1,0,"ng-template",null,5,o.cd)),2&e&&(o.Dc("ngIf",!t.editable||(null==t.options[t.selectedIndex]?null:t.options[t.selectedIndex].readonly)),o.Ib(1),o.Dc("ngIf",t.editable&&!(null!=t.options[t.selectedIndex]&&t.options[t.selectedIndex].readonly)))},directives:[r.q,l.b,d.a,u.a,m.a,r.p,r.o,r.x,p.a,h.a],styles:[".cu-permission-options{display:flex;transition:.2s}.cu-permission-options-host{position:relative}.cu-permission-options:hover .cu-permission-options__combo-down{width:20px;height:20px;margin-left:2px;margin-right:-2px;fill:#000}.dark-theme .cu-permission-options:hover .cu-permission-options__combo-down{fill:#d5d6d7}.cu-permission-options__down{width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px;transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s}.cu-permission-options__down:hover{transition:none}.dark-theme .cu-permission-options__down{fill:#828588}.cu-dropdown_open>div>.cu-permission-options__down{transform:rotate(-90deg)}.cu-permission-options__value{display:flex;align-items:center;padding:0 8px 0 14px}.cu-permission-options__text{flex-grow:1;font:300 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;white-space:nowrap}.dark-theme .cu-permission-options__text{color:#d5d6d7}.cu-permission-options__text_readonly{font-style:italic}.cu-permission-options__menu{min-width:150px;max-height:351px;overflow:auto}.cu-permission-options__menu-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;min-width:250px;align-items:center;padding:12px 15px 11px;cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-permission-options__menu-item{color:#d5d6d7}.cu-permission-options__menu-item:hover{background-color:#f9f9f9}.dark-theme .cu-permission-options__menu-item:hover{background:#2b343b}.cu-permission-options__menu-item-note{font:300 12px Gotham Pro,Proxima Nova,arial,serif;text-align:center}.cu-permission-options__menu-item_disabled{cursor:default;background-color:#f5f5f5}.dark-theme .cu-permission-options__menu-item_disabled{background-color:#40464c}.cu-permission-options__menu-item_disabled .cu-permission-options__item-desc,.cu-permission-options__menu-item_disabled .cu-permission-options__item-title{opacity:.5}.cu-permission-options__menu-item_disabled:hover{background-color:#f5f5f5}.dark-theme .cu-permission-options__menu-item_disabled:hover{background:#40464c}.cu-permission-options__menu-question{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;top:3px;right:3px;padding:5px;width:24px;height:24px;fill:#979797}.dark-theme .cu-permission-options__menu-question{fill:#abaeb0}.cu-permission-options__menu-question:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-permission-options__menu-question:hover{fill:var(--theme-main-color)}}.cu-permission-options__item-title{font-weight:500;font-size:13px;line-height:16px}.cu-permission-options__item-desc{font-weight:300;font-size:12px;line-height:14px}.cu-permission-options__item-free{background:#7b68ee;font-weight:400;font-size:10px;border-radius:2px;display:inline-flex;color:#fff;align-items:center;padding:1px 4px;margin-bottom:3px;margin-left:10px;text-transform:uppercase}@supports (--theme-main-color:#7b68ee){.cu-permission-options__item-free{background:var(--theme-main-color)}}.cu-permission-options__item-check{width:12px;height:12px;display:inline-flex}.cu-permission-options__item-check use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-permission-options__item-check use{fill:var(--theme-main-color)}}.cu-permission-options__item-lock{width:12px;height:12px;display:inline-flex;margin-right:5px;fill:#343434}.dark-theme .cu-permission-options__item-lock{fill:#d5d6d7}.cu-permission-options__item-limit{font-weight:400;font-size:12px}.cu-permission-options__item-upgrade{background:#7b68ee;font-weight:400;font-size:10px;border-radius:2px;display:inline-flex;color:#fff;align-items:center;padding:3px 5px;margin-left:10px;text-transform:uppercase}@supports (--theme-main-color:#7b68ee){.cu-permission-options__item-upgrade{background:var(--theme-main-color)}}.cu-permission-options__item-paywall{display:flex;align-items:center;border-top:1px solid #d8d8d8;margin:-12px -15px 10px;padding:12px 10px 11px}.dark-theme .cu-permission-options__item-paywall{border-top:1px solid #1e272e}"],encapsulation:2,changeDetection:0}),e})()},mMFR:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("XNiG"),n=i("fXoL"),s=i("Jf2N"),c=i("ofXK");function a(e,t){if(1&e&&(n.cc(0,"div",11),n.gc(1,12),n.bc()),2&e){const e=n.uc();n.Ib(1),n.kc(e.tagName),n.hc(1)}}function r(e,t){if(1&e&&(n.ac(0),n.gc(1,16),n.Zb()),2&e){const e=n.uc(3);n.Ib(1),n.kc(e.tagName),n.hc(1)}}function l(e,t){if(1&e&&(n.ac(0),n.gc(1,17),n.Zb()),2&e){const e=n.uc(3);n.Ib(1),n.kc(e.tagName),n.hc(1)}}function d(e,t){if(1&e&&(n.cc(0,"div",11),n.bd(1,r,2,1,"ng-template",14),n.bd(2,l,2,1,"ng-template",null,15,n.cd),n.bc()),2&e){const e=n.Rc(3),t=n.uc(2);n.Ib(1),n.Dc("ngIf",t.forTemplates)("ngIfElse",e)}}function u(e,t){if(1&e&&(n.ac(0),n.gc(1,19),n.Zb()),2&e){const e=n.uc(3);n.Ib(1),n.kc(e.tagName),n.hc(1)}}function m(e,t){if(1&e&&(n.ac(0),n.gc(1,20),n.Zb()),2&e){const e=n.uc(3);n.Ib(1),n.kc(e.tagName),n.hc(1)}}function p(e,t){if(1&e&&(n.cc(0,"div",11),n.bd(1,u,2,1,"ng-template",14),n.bd(2,m,2,1,"ng-template",null,18,n.cd),n.bc()),2&e){const e=n.Rc(3),t=n.uc(2);n.Ib(1),n.Dc("ngIf",t.forTemplates)("ngIfElse",e)}}function h(e,t){if(1&e&&(n.bd(0,d,4,2,"div",13),n.bd(1,p,4,2,"div",13)),2&e){const e=n.uc();n.Dc("ngIf",!e.allSpaces),n.Ib(1),n.Dc("ngIf",e.allSpaces)}}let f=(()=>{class e{constructor(e){this.modalService=e,this.destroy$=new o.a,this.allSpaces=!1,this.forTimeTracker=!1,this.forTemplates=!1,this.onConfirm=new n.o,this.onCancel=new n.o}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}confirm(){this.onConfirm.emit(),this.modalService.close()}cancel(){this.onCancel.emit(),this.modalService.close()}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(s.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-tags-delete"]],inputs:{tagName:"tagName",allSpaces:"allSpaces",forTimeTracker:"forTimeTracker",forTemplates:"forTemplates"},outputs:{onConfirm:"onConfirm",onCancel:"onCancel"},decls:12,vars:2,consts:function(){let e,t,i,o,n,s,c,a;return e=$localize`:@@common_delete-tag␟1b22a55456e482e07973bdbf879ab04919990aad␟1979636064347146792: Delete Tag `,t=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,i=$localize`:@@common_delete␟d9797b7f7d130802253f3bdd06f7da9f474816af␟1555388322412608200: Delete `,o=$localize`:@@cu-tags-delete__confirm-msg_delete-tag-time-tracker␟b3a82b9c659d91940f3372d5db1ca2bae2b8e6ec␟931132935143950009: Are you sure you want to delete the ${"\ufffd0\ufffd"}:INTERPOLATION: tag everywhere from the time tracker? `,n=$localize`:@@cu-tags-delete__confirm-msg_delete-tag␟08719b5cda8c07b41bfae49be17bb7917cdcb617␟7569915071240595876:Are you sure you want to delete the ${"\ufffd0\ufffd"}:INTERPOLATION: tag?`,s=$localize`:@@cu-tags-delete__confirm-msg_delete-tag_everywhere-current-space␟a41ff1acc56a7cd402ba6c1edffd0a683b7d4b65␟7253374697430794501:Are you sure you want to delete the ${"\ufffd0\ufffd"}:INTERPOLATION: tag everywhere in this Space?`,c=$localize`:@@cu-tags-delete__confirm-msg_delete-tag␟08719b5cda8c07b41bfae49be17bb7917cdcb617␟7569915071240595876:Are you sure you want to delete the ${"\ufffd0\ufffd"}:INTERPOLATION: tag?`,a=$localize`:@@cu-tags-delete__confirm-msg_delete-tag_everywhere-all-spaces␟fa2502845899cb2542b97fd4fb337a2d3a2bd568␟4048031251057151340:Are you sure you want to delete the ${"\ufffd0\ufffd"}:INTERPOLATION: tag everywhere in all your Spaces?`,[[1,"cu-conflict-management"],[1,"cu-conflict-management__warning-img"],[1,"cu-conflict-management__warning"],e,["class","cu-conflict-management__proceed",4,"ngIf","ngIfElse"],["normalTags",""],[1,"move-category__footer"],[1,"cu-btn","cu-conflict-management__cancel",3,"click"],t,[1,"cu-btn",3,"click"],i,[1,"cu-conflict-management__proceed"],o,["class","cu-conflict-management__proceed",4,"ngIf"],[3,"ngIf","ngIfElse"],["notForTemplatesTmpl1",""],n,s,["notForTemplatesTmpl2",""],c,a]},template:function(e,t){if(1&e&&(n.cc(0,"div",0),n.Xb(1,"div",1),n.cc(2,"div",2),n.gc(3,3),n.bc(),n.bd(4,a,2,1,"div",4),n.bd(5,h,2,2,"ng-template",null,5,n.cd),n.cc(7,"div",6),n.cc(8,"button",7),n.qc("click",function(){return t.cancel()}),n.gc(9,8),n.bc(),n.cc(10,"button",9),n.qc("click",function(){return t.confirm()}),n.gc(11,10),n.bc(),n.bc(),n.bc()),2&e){const e=n.Rc(6);n.Ib(4),n.Dc("ngIf",t.forTimeTracker)("ngIfElse",e)}},directives:[c.q],encapsulation:2,changeDetection:0}),e})()},mhED:function(e,t,i){"use strict";i.d(t,"a",function(){return T});var o=i("fXoL"),n=i("XNiG"),s=i("g6dt"),c=i("Jf2N"),a=i("0QFR"),r=i("ofXK"),l=i("LdyQ"),d=i("MJvn"),u=i("UdVN"),m=i("n+1/"),p=i("HEHP"),h=i("kGnP");const f=function(){return["click"]};function b(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.qc("click",function(){return o.Uc(e),o.uc(4).openFacebook()}),o.Xb(1,"img",21),o.dd(2," Facebook "),o.bc()}2&e&&o.Dc("unpatch",o.Gc(1,f))}function g(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.qc("click",function(){return o.Uc(e),o.uc(4).openLinkedIn()}),o.Xb(1,"img",22),o.dd(2," LinkedIn "),o.bc()}2&e&&o.Dc("unpatch",o.Gc(1,f))}function _(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.qc("click",function(){return o.Uc(e),o.uc(4).openReddit()}),o.Xb(1,"img",23),o.dd(2," Reddit "),o.bc()}2&e&&o.Dc("unpatch",o.Gc(1,f))}function v(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.qc("click",function(){return o.Uc(e),o.uc(4).openTwitter()}),o.Xb(1,"img",24),o.dd(2," Twitter "),o.bc()}2&e&&o.Dc("unpatch",o.Gc(1,f))}function k(e,t){if(1&e&&(o.cc(0,"div",16),o.cc(1,"div",17),o.gc(2,18),o.bc(),o.bd(3,b,3,2,"div",19),o.bd(4,g,3,2,"div",19),o.bd(5,_,3,2,"div",19),o.bd(6,v,3,2,"div",19),o.bc()),2&e){const e=o.uc(3);o.ad("width",200,"px"),o.Ib(3),o.Dc("ngIf",null==e.socialSharingData?null:e.socialSharingData.facebook),o.Ib(1),o.Dc("ngIf",null==e.socialSharingData?null:e.socialSharingData.linkedIn),o.Ib(1),o.Dc("ngIf",null==e.socialSharingData?null:e.socialSharingData.reddit),o.Ib(1),o.Dc("ngIf",null==e.socialSharingData?null:e.socialSharingData.twitter)}}function y(e,t){1&e&&(o.cc(0,"div",7,8),o.cc(2,"div",9),o.cc(3,"div",10),o.cc(4,"div",11),o.Xb(5,"div",12),o.cc(6,"div",13),o.gc(7,14),o.bc(),o.bc(),o.bc(),o.bc(),o.bd(8,k,7,6,"div",15),o.bc())}function w(e,t){if(1&e&&(o.cc(0,"div",5),o.dd(1),o.bd(2,y,9,0,"div",6),o.bc()),2&e){const e=o.uc();o.Ib(1),o.fd(" ",e.title," "),o.Ib(1),o.Dc("ngIf",e.showSharing)}}function x(e,t){if(1&e){const e=o.dc();o.cc(0,"div",28),o.qc("click",function(){return o.Uc(e),o.uc(2).buttonClick()}),o.dd(1),o.bc()}if(2&e){const e=o.uc(2);o.Ob("disabled",e.activateButtonOnPercentWatched&&!e.buttonEnabled),o.Ib(1),o.fd(" ",e.buttonText," ")}}function I(e,t){if(1&e&&(o.cc(0,"div",25),o.cc(1,"div",26),o.dd(2),o.bc(),o.bd(3,x,2,3,"div",27),o.bc()),2&e){const e=o.uc();o.Ib(2),o.ed(e.description),o.Ib(1),o.Dc("ngIf",e.showButton)}}let T=(()=>{class e{constructor(e,t,i){this.modalService=e,this.cdr=t,this.amplitudeService=i,this.title="",this.description="",this.showButton=!0,this.buttonText=$localize`:@@common_get-started:Get Started`,this.activateButtonOnPercentWatched=!1,this.needToWatchPercent=.75,this.showFooter=!0,this.showSharing=!1,this.onClose=new o.o,this.destroy$=new n.a,this.wistiaJS="https://fast.wistia.net/assets/external/E-v1.js",this.wistiaIframeLinkBase="//fast.wistia.net/embed/iframe/",this.buttonEnabled=!1}ngOnInit(){this.loadWistia(),this.getWistiaIframeSrc(),this.startTimer()}ngOnDestroy(){window.Wistia&&this.onClose.emit(window.Wistia.api(this.wistiaId)),clearInterval(this.timer),this.destroy$.next(),this.destroy$.unsubscribe()}buttonClick(){this.modalService.closeAll()}loadWistia(){s(this.wistiaJS,()=>{})}getWistiaIframeSrc(){this.wistiaIframeSrc=this.wistiaIframeLinkBase.concat(this.wistiaId)+"?playerColor="+this.user.theme_color.replace("#","")+"&autoPlay=false"}startTimer(){this.activateButtonOnPercentWatched&&(this.timer=setInterval(()=>{if(window.Wistia){const e=window.Wistia.api(this.wistiaId);e&&e.percentWatched()>this.needToWatchPercent&&(clearInterval(this.timer),this.buttonEnabled=!0,this.cdr.detectChanges())}},2e3))}openFacebook(){!function(e,t){const i=window.innerHeight/2-300,o=window.innerWidth/2-300;window.open(t,"",`height=600,width=600,top=${i},left=${o},resizable=1`)}(0,this.socialSharingData.facebook.url),this.sendAmplitude("facebook")}openLinkedIn(){window.open("https://www.linkedin.com/sharing/share-offsite/?url="+this.socialSharingData.linkedIn.url,"_blank"),this.sendAmplitude("linkedin")}openReddit(){window.open(`http://www.reddit.com/submit?url=${this.socialSharingData.reddit.url}&title=${this.socialSharingData.reddit.message}`,"_blank"),this.sendAmplitude("reddit")}openTwitter(){!function(e,t){let i="https://twitter.com/intent/tweet";i=i.concat(`?text=${e.replace(" ","%20")}%20${t}`),window.open(i,"_blank")}(this.socialSharingData.twitter.message,this.socialSharingData.twitter.url),this.sendAmplitude("twitter")}sendAmplitude(e){const t={};t[e]=!0,this.amplitudeService.logEvent("share welcome video",t)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(c.a),o.Wb(o.h),o.Wb(a.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-video"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-video-modal",!0)},inputs:{wistiaId:"wistiaId",title:"title",description:"description",showButton:"showButton",buttonText:"buttonText",user:"user",activateButtonOnPercentWatched:"activateButtonOnPercentWatched",needToWatchPercent:"needToWatchPercent",showFooter:"showFooter",showSharing:"showSharing",socialSharingData:"socialSharingData"},outputs:{onClose:"onClose"},decls:6,vars:6,consts:function(){let e,t;return e=$localize`:@@cu-video-modal__header-share␟54813c2cdd5c1e641ee54ed05b18eaec83e3ac1e␟3284743852523238363: Share `,t=$localize`:@@cu-video-modal__menu-share-options␟b5b8f57632ca8f996b91cd21ab522f47daea0bec␟8749527986866248466: Share options `,[[1,"cu-video-modal__container"],["class","cu-video-modal__header",4,"ngIf"],[1,"cu-video-modal__video"],["allowtransparency","true","frameborder","0","scrolling","no","name","wistia_embed","allowfullscreen","","mozallowfullscreen","","webkitallowfullscreen","","oallowfullscreen","","msallowfullscreen","",1,"wistia_embed",3,"id","src"],["class","cu-video-modal__footer",4,"ngIf"],[1,"cu-video-modal__header"],["class","cu-dropdown","cuDropdown","",4,"ngIf"],["cuDropdown","",1,"cu-dropdown"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-video-modal__header-share"],[1,"cu-video-modal__header-share-content"],["icon","cu2-share-3",1,"cu-video-modal__header-share-content-icon"],[1,"cu-video-modal__header-share-content-text"],e,["class","cu-dropdown__menu_overflow-hidden cu-video-modal__header-menu",3,"width",4,"cuDropdownMenu"],[1,"cu-dropdown__menu_overflow-hidden","cu-video-modal__header-menu"],[1,"cu-video-modal__header-menu-title"],t,["class","cu-video-modal__header-menu-item",3,"unpatch","click",4,"ngIf"],[1,"cu-video-modal__header-menu-item",3,"unpatch","click"],["src","./assets/images/social/social-fb.svg"],["src","./assets/images/social/social-linkedIn.svg"],["src","./assets/images/social/social-reddit.svg"],["src","./assets/images/social/social-twitter.svg"],[1,"cu-video-modal__footer"],[1,"cu-video-modal__footer-text"],["class","cu-video-modal__footer-button",3,"disabled","click",4,"ngIf"],[1,"cu-video-modal__footer-button",3,"click"]]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.bd(1,w,3,2,"div",1),o.cc(2,"div",2),o.Xb(3,"iframe",3),o.vc(4,"safe"),o.bc(),o.bd(5,I,4,2,"div",4),o.bc()),2&e&&(o.Ib(1),o.Dc("ngIf",t.title),o.Ib(2),o.Dc("id",t.wistiaId)("src",o.wc(4,4,t.wistiaIframeSrc),o.Wc),o.Ib(2),o.Dc("ngIf",t.showFooter))},directives:[r.q,l.b,d.a,u.a,m.a,p.c],pipes:[h.a],styles:['.cu-video-modal__container{display:flex;flex-direction:column;width:720px}.cu-video-modal__header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:22px;line-height:1;color:#292d34;height:70px;display:flex;justify-content:center;align-items:center;background-color:#fff;padding:0 20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-video-modal__header{font-family:var(--global-font-support)}}.cu-video-modal__header .cu-dropdown{margin-left:auto}.cu-video-modal__header-share{transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;justify-content:center;border-radius:4px;border:1px solid #e9ebf0;box-sizing:border-box;box-shadow:0 1px 5px rgba(0,0,0,.05);padding:0 12px;height:30px}.cu-video-modal__header-share,.cu-video-modal__header-share-content{display:flex;align-items:center}.cu-video-modal__header-share-content-icon{height:16px;width:14px;fill:var(--theme-main-color);margin-right:5px}.cu-video-modal__header-share-content-text{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-video-modal__header-share-content-text{font-family:var(--global-font-support)}}.cu-video-modal__header-share:hover{border-color:var(--theme-main-color)}.cu-video-modal__header-share:hover .cu-video-modal__header-share-content-text{color:var(--theme-main-color)}.cu-video-modal__header-menu{padding:8px 0}.cu-video-modal__header-menu-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#b9bec7;height:27px;display:flex;align-items:center;padding:0 12px;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-video-modal__header-menu-title{font-family:var(--global-font-support)}}.cu-video-modal__header-menu-item{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;padding:0 12px;color:#292d34;display:flex;align-items:center;height:32px;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-video-modal__header-menu-item{font-family:var(--global-font-support)}}.cu-video-modal__header-menu-item:hover{background:#f2f4f7}.cu-video-modal__header-menu-item img{width:18px;height:18px;margin-right:12px}.cu-video-modal__video{height:400px;width:100%;background-size:cover;background-position:50%;background-repeat:no-repeat}.cu-video-modal__video iframe{width:100%;height:100%}.cu-video-modal__footer{display:flex;align-items:center;justify-content:space-between;padding:20px}.cu-video-modal__footer-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:22px;color:#292d34;margin-right:50px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-video-modal__footer-text{font-family:var(--global-font-support)}}.cu-video-modal__footer-button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1;transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;height:50px;background:var(--theme-main-color);border-radius:4px;display:flex;align-items:center;justify-content:center;padding:0 25px;color:#fff;width:auto;white-space:nowrap;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-video-modal__footer-button{font-family:var(--global-font-support)}}.cu-video-modal__footer-button:hover{transform:scale(1.05)}.cu-video-modal__footer-button.disabled{background:#e9ebf0;opacity:.5;color:#7c828d}.cu-modal__video-modal .cu-modal__inner{align-items:center!important}.cu-modal__video-modal .cu-modal__dialog{width:auto!important;padding:0!important;overflow:auto!important;border-radius:4px!important;margin:-10px 0 0!important}.cu-modal__video-modal .cu-modal__controls,.cu-modal__video-modal .cu-modal__header{display:none!important}.w-vulcan-v2-button{display:none}'],encapsulation:2,changeDetection:0}),e})()},mivo:function(e,t,i){"use strict";i.d(t,"a",function(){return P});var o=i("fXoL"),n=i("uslN"),s=i("jJQC"),c=i("dTHz"),a=i("R4vD"),r=i("LdyQ"),l=i("MJvn"),d=i("NsZK"),u=i("ofXK"),m=i("n+1/"),p=i("UdVN");let h=(()=>{class e{constructor(){}transform(e,t){if(!e||!t||!e.length)return 0;let i=0;return e.forEach(e=>{e.inherited_role===t&&(i+=1)}),i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Vb({name:"customRoleCount",type:e,pure:!0}),e})();function f(e,t){1&e&&o.Xb(0,"div",6)}function b(e,t){1&e&&(o.cc(0,"div",16),o.gc(1,17),o.bc())}function g(e,t){1&e&&(o.cc(0,"span"),o.dd(1,"("),o.ac(2),o.gc(3,18),o.Zb(),o.dd(4,")"),o.bc())}function _(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit,i=o.uc(3);return i.onSelect.emit({user:i.user,customRole:t})}),o.dd(1),o.bc()}if(2&e){const e=o.uc().$implicit,t=o.uc(3);o.Ob("active",(null==t.selectedRole?null:t.selectedRole.id)===(null==e?null:e.id)||(null==t.user||null==t.user.custom_role?null:t.user.custom_role.id)===(null==e?null:e.id)),o.Ib(1),o.fd(" ",null==e?null:e.name," ")}}function v(e,t){if(1&e&&(o.ac(0),o.bd(1,_,2,3,"div",19),o.Zb()),2&e){const e=t.$implicit,i=o.uc(3);o.Ib(1),o.Dc("ngIf",(null==e?null:e.inherited_role)===i.UserRole.GUEST)}}function k(e,t){if(1&e){const e=o.dc();o.cc(0,"div",9),o.bd(1,b,2,0,"div",10),o.cc(2,"div",11),o.qc("click",function(){o.Uc(e);const t=o.uc(2);return t.onSelect.emit({user:t.user,role:t.UserRole.GUEST})}),o.ac(3),o.gc(4,15),o.Zb(),o.bd(5,g,5,0,"span",13),o.vc(6,"customRoleCount"),o.bc(),o.bd(7,v,2,1,"ng-container",14),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.ENTERPRISE),o.Ib(1),o.Ob("active",e.selectedRole===e.UserRole.GUEST||!(null!=e.user&&e.user.custom_role)&&(null==e.user?null:e.user.role)===e.UserRole.GUEST),o.Ib(3),o.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.ENTERPRISE&&o.xc(6,6,e.customRoles,e.UserRole.GUEST)),o.Ib(2),o.Dc("ngForOf",e.customRoles)("ngForTrackBy",e.trackById)}}function y(e,t){1&e&&(o.cc(0,"div",16),o.gc(1,20),o.bc())}function w(e,t){1&e&&(o.cc(0,"span"),o.dd(1,"("),o.ac(2),o.gc(3,21),o.Zb(),o.dd(4,")"),o.bc())}function x(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit,i=o.uc(2);return i.onSelect.emit({user:i.user,customRole:t})}),o.dd(1),o.bc()}if(2&e){const e=o.uc().$implicit,t=o.uc(2);o.Ob("active",(null==t.selectedRole?null:t.selectedRole.id)===(null==e?null:e.id)||(null==t.user||null==t.user.custom_role?null:t.user.custom_role.id)===(null==e?null:e.id)),o.Ib(1),o.fd(" ",null==e?null:e.name," ")}}function I(e,t){if(1&e&&(o.ac(0),o.bd(1,x,2,3,"div",19),o.Zb()),2&e){const e=t.$implicit,i=o.uc(2);o.Ib(1),o.Dc("ngIf",(null==e?null:e.inherited_role)===i.UserRole.USER)}}function T(e,t){1&e&&(o.cc(0,"div",16),o.gc(1,23),o.bc())}function C(e,t){1&e&&(o.cc(0,"span"),o.dd(1,"("),o.ac(2),o.gc(3,24),o.Zb(),o.dd(4,")"),o.bc())}function D(e,t){if(1&e){const e=o.dc();o.cc(0,"div",11),o.qc("click",function(){o.Uc(e);const t=o.uc().$implicit,i=o.uc(3);return i.onSelect.emit({user:i.user,customRole:t})}),o.dd(1),o.bc()}if(2&e){const e=o.uc().$implicit,t=o.uc(3);o.Ob("active",(null==t.selectedRole?null:t.selectedRole.id)===(null==e?null:e.id)||(null==t.user||null==t.user.custom_role?null:t.user.custom_role.id)===(null==e?null:e.id)),o.Ib(1),o.fd(" ",null==e?null:e.name," ")}}function O(e,t){if(1&e&&(o.ac(0),o.bd(1,D,2,3,"div",19),o.Zb()),2&e){const e=t.$implicit,i=o.uc(3);o.Ib(1),o.Dc("ngIf",(null==e?null:e.inherited_role)===i.UserRole.ADMIN)}}function S(e,t){if(1&e){const e=o.dc();o.cc(0,"div",9),o.bd(1,T,2,0,"div",10),o.cc(2,"div",11),o.qc("click",function(){o.Uc(e);const t=o.uc(2);return t.onSelect.emit({user:t.user,role:t.UserRole.ADMIN})}),o.ac(3),o.gc(4,22),o.Zb(),o.bd(5,C,5,0,"span",13),o.vc(6,"customRoleCount"),o.bc(),o.bd(7,O,2,1,"ng-container",14),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.ENTERPRISE),o.Ib(1),o.Ob("active",e.selectedRole===(e.UserRole.ADMIN||e.selectedRole===e.UserRole.OWNER)||!(null!=e.user&&e.user.custom_role)&&(null==e.user?null:e.user.role)===e.UserRole.ADMIN||(null==e.user?null:e.user.role)===e.UserRole.OWNER),o.Ib(3),o.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.ENTERPRISE&&o.xc(6,6,e.customRoles,e.UserRole.ADMIN)),o.Ib(2),o.Dc("ngForOf",e.customRoles)("ngForTrackBy",e.trackById)}}function E(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",7),o.bd(2,k,8,9,"div",8),o.cc(3,"div",9),o.bd(4,y,2,0,"div",10),o.cc(5,"div",11),o.qc("click",function(){o.Uc(e);const t=o.uc();return t.onSelect.emit({user:t.user,role:t.UserRole.USER})}),o.ac(6),o.gc(7,12),o.Zb(),o.bd(8,w,5,0,"span",13),o.vc(9,"customRoleCount"),o.bc(),o.bd(10,I,2,1,"ng-container",14),o.bc(),o.bd(11,S,8,9,"div",8),o.bc(),o.bc()}if(2&e){const e=o.uc();o.ad("width",200,"px"),o.Ib(1),o.Ob("slim",(null==e.team?null:e.team.plan_id)!==e.TeamPlan.ENTERPRISE),o.Ib(1),o.Dc("ngIf",e.showGuests),o.Ib(2),o.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.ENTERPRISE),o.Ib(1),o.Ob("active",e.selectedRole===e.UserRole.USER||!(null!=e.user&&e.user.custom_role)&&(null==e.user?null:e.user.role)===e.UserRole.USER),o.Ib(3),o.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.ENTERPRISE&&o.xc(9,12,e.customRoles,e.UserRole.USER)),o.Ib(2),o.Dc("ngForOf",e.customRoles)("ngForTrackBy",e.trackById),o.Ib(1),o.Dc("ngIf",e.showAdmins)}}let P=(()=>{class e{constructor(){this.showGuests=!0,this.showAdmins=!0,this.selectedRole=null,this.showColor=!1,this.onSelect=new o.o,this.roleName="",this.trackById=Object(s.d)("id"),this.UserRole=c.f,this.TeamPlan=n.f}ngOnChanges(e){(e.user||e.selectedRole)&&this.getRoleName()}ngOnInit(){}ngOnDestroy(){}getRoleName(){this.selectedRole?this.roleName=this.selectedRole.name?this.selectedRole.name:Object(a.f)(this.selectedRole):this.user&&(this.roleName=this.user.custom_role?this.user.custom_role.name:Object(a.f)(this.user.role))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-roles-dropdown"]],hostAttrs:[1,"cu-custom-roles-dropdown"],inputs:{team:"team",customRoles:"customRoles",user:"user",showGuests:"showGuests",showAdmins:"showAdmins",selectedRole:"selectedRole",showColor:"showColor"},outputs:{onSelect:"onSelect"},features:[o.Gb],decls:7,vars:17,consts:function(){let e,t,i,o,n,s,c,a,r;return e=$localize`:@@common_member␟880769fac8dec233278cf7a1e7a40029e687987e␟6297950127540572260:Member`,t=$localize`:@@common_guest␟8d72ac2524416af28fce2537fe483a241f81e2fb␟268369328039605234:Guest`,i=$localize`:@@common_guests␟ff564ee7d80345852ec445a50ea07976bf134a98␟6406803505719590814: Guests `,o=$localize`:@@common_default-1␟deca31fc7adad40d00bd63881d0c17124cd05beb␟6855462350544488601:default`,n=$localize`:@@common_members␟ba3d4bc07aad668a066ec8114603889e0edbe7b2␟3832108344057891479: Members `,s=$localize`:@@common_default-1␟deca31fc7adad40d00bd63881d0c17124cd05beb␟6855462350544488601:default`,c=$localize`:@@common_admin␟408cb6073e60c5d966296a3207fc596adca75e01␟5041354590769758251:Admin`,a=$localize`:@@common_admins␟b8a87e1389e93f2ea8fc3a53c106843b48258bd3␟2174562256319201951: Admins `,r=$localize`:@@common_default-1␟deca31fc7adad40d00bd63881d0c17124cd05beb␟6855462350544488601:default`,[["cuDropdown","",3,"dropdownDisabled"],["cuDropdownToggle",""],[1,"cu-custom-roles-dropdown__toggle"],[3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["icon","cu2-caret-down",4,"ngIf"],[3,"width",4,"cuDropdownMenu"],["icon","cu2-caret-down"],[1,"cu-custom-roles-dropdown__menu"],["class","cu-custom-roles-dropdown__section",4,"ngIf"],[1,"cu-custom-roles-dropdown__section"],["class","cu-custom-roles-dropdown__title",4,"ngIf"],[1,"cu-custom-roles-dropdown__item",3,"click"],e,[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],t,[1,"cu-custom-roles-dropdown__title"],i,o,["class","cu-custom-roles-dropdown__item",3,"active","click",4,"ngIf"],n,s,c,a,r]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.cc(2,"div",2),o.cc(3,"span",3),o.dd(4),o.bc(),o.bd(5,f,1,0,"div",4),o.bc(),o.bc(),o.bd(6,E,12,15,"div",5),o.bc()),2&e&&(o.Dc("dropdownDisabled",(null==t.user?null:t.user.role)===t.UserRole.OWNER),o.Ib(2),o.Ob("border",t.showColor)("admin",(null==t.user||null==t.user.custom_role?null:t.user.custom_role.inherited_role)===t.UserRole.ADMIN||(null==t.user?null:t.user.role)===t.UserRole.ADMIN)("member",(null==t.user||null==t.user.custom_role?null:t.user.custom_role.inherited_role)===t.UserRole.USER||(null==t.user?null:t.user.role)===t.UserRole.USER)("guest",(null==t.user||null==t.user.custom_role?null:t.user.custom_role.inherited_role)===t.UserRole.GUEST||(null==t.user?null:t.user.role)===t.UserRole.GUEST)("owner",(null==t.user?null:t.user.role)===t.UserRole.OWNER),o.Ib(1),o.Ob("owner",(null==t.user?null:t.user.role)===t.UserRole.OWNER),o.Dc("cuTooltip",t.roleName)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(1),o.ed(t.roleName),o.Ib(1),o.Dc("ngIf",(null==t.user?null:t.user.role)!==t.UserRole.OWNER))},directives:[r.b,l.a,d.a,u.q,m.a,p.a,u.p],pipes:[h],styles:['.cu-custom-roles-dropdown{overflow:hidden}.cu-custom-roles-dropdown__toggle{display:flex;align-items:center}.cu-custom-roles-dropdown__toggle span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#292d34;text-transform:capitalize}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-roles-dropdown__toggle span{font-family:var(--global-font-support)}}.cu-custom-roles-dropdown__toggle span:hover{text-decoration:underline}.cu-custom-roles-dropdown__toggle span:hover.owner{text-decoration:none}.dark-theme .cu-custom-roles-dropdown__toggle span{color:#d5d6d7}.cu-custom-roles-dropdown__toggle .icon{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:2px;width:12px;height:12px;fill:#292d34}.cu-custom-roles-dropdown__toggle .icon:hover{transition:none}.dark-theme .cu-custom-roles-dropdown__toggle .icon{fill:#d5d6d7}.cu-dropdown_open .cu-custom-roles-dropdown__toggle .icon{transform:rotate(180deg)}.cu-custom-roles-dropdown__toggle.border{border-left:2px solid transparent;padding-left:5px}.cu-custom-roles-dropdown__toggle.border.admin{border-left-color:var(--theme-main-color)}.cu-custom-roles-dropdown__toggle.border.guest{border-left-color:#fd71af}.cu-custom-roles-dropdown__toggle.border.member{border-left-color:#4194f6}.cu-custom-roles-dropdown__menu{width:200px;padding:16px 0 4px}.cu-custom-roles-dropdown__menu.slim{padding:0}.cu-custom-roles-dropdown__menu.slim .cu-custom-roles-dropdown__section{border:none;margin-bottom:0}.cu-custom-roles-dropdown__section{border-bottom:1px solid #e9ebf0;margin-bottom:16px}.cu-custom-roles-dropdown__section:last-of-type{border:none;margin-bottom:0}.dark-theme .cu-custom-roles-dropdown__section{border-color:#1e272e}.cu-custom-roles-dropdown__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;text-transform:uppercase;color:#b9bec7;padding:0 12px 6px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-roles-dropdown__title{font-family:var(--global-font-support)}}.dark-theme .cu-custom-roles-dropdown__title{color:#828588}.cu-custom-roles-dropdown__item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;padding:10px 12px;cursor:pointer;text-transform:capitalize}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-roles-dropdown__item{font-family:var(--global-font-support)}}.cu-custom-roles-dropdown__item span{text-transform:lowercase;font-style:italic;color:#b9bec7;padding-left:5px;display:inline-block}.dark-theme .cu-custom-roles-dropdown__item span{color:#828588}.cu-custom-roles-dropdown__item:hover{background-color:#fafbfc}.dark-theme .cu-custom-roles-dropdown__item:hover{background:#2b343b}.dark-theme .cu-custom-roles-dropdown__item{color:#d5d6d7}.cu-custom-roles-dropdown__item.active{font-weight:500}'],encapsulation:2,changeDetection:0}),e})()},my8H:function(e,t,i){"use strict";e.exports=function(e){for(var t,i=0,o=0,n=e.charAt(i),s={};"\t"===n||" "===n;)o+=t="\t"===n?4:1,t>1&&(o=Math.floor(o/t)*t),s[o]=i,n=e.charAt(++i);return{indent:o,stops:s}}},nLKB:function(e,t,i){"use strict";var o=i("U6jy"),n=i("MQ5/"),s=i("0lR2");e.exports=function(e){var t,i,c=this.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=o(e)}for(t in s){if(null==(i=e[t])&&(i=c[t]),"blocks"!==t&&"boolean"!=typeof i||"blocks"===t&&"object"!=typeof i)throw new Error("Invalid value `"+i+"` for setting `options."+t+"`");e[t]=i}return this.options=e,this.escape=n(e),this}},nm3x:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("R0Ic"),n=i("5b//"),s=i("TqRa"),c=i("fXoL"),a=i("ofXK");function r(e,t){}function l(e,t){if(1&e&&c.bd(0,r,0,0,"ng-template",7),2&e){c.uc(2);const e=c.Rc(7);c.Dc("ngTemplateOutlet",e)}}const d=function(e){return{"cu-sparks__items_visible":e}};function u(e,t){if(1&e&&(c.cc(0,"div",5),c.bd(1,l,1,1,void 0,6),c.bc()),2&e){const e=c.uc(),t=c.Rc(5);c.Dc("ngClass",c.Hc(4,d,e.state))("@sparksState",e.state),c.Ib(1),c.Dc("ngIf",e.cuColors)("ngIfElse",t)}}function m(e,t){if(1&e&&(c.Xb(0,"div"),c.Xb(1,"div"),c.Xb(2,"div"),c.Xb(3,"div"),c.Xb(4,"div"),c.Xb(5,"div"),c.Xb(6,"div"),c.Xb(7,"div"),c.Xb(8,"div"),c.Xb(9,"div")),2&e){const e=c.uc();c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color),c.Ib(1),c.ad("background",e.color)}}function p(e,t){if(1&e&&(c.Xb(0,"div"),c.Xb(1,"div"),c.Xb(2,"div"),c.Xb(3,"div"),c.Xb(4,"div"),c.Xb(5,"div"),c.Xb(6,"div"),c.Xb(7,"div")),2&e){const e=c.uc();c.ad("background",e.cu2Colors.cyan),c.Ib(1),c.ad("background",e.cu2Colors.pink),c.Ib(1),c.ad("background",e.cu2Colors.yellow),c.Ib(1),c.ad("background",e.cu2Colors.purple),c.Ib(1),c.ad("background",e.cu2Colors.cyan),c.Ib(1),c.ad("background",e.cu2Colors.pink),c.Ib(1),c.ad("background",e.cu2Colors.yellow),c.Ib(1),c.ad("background",e.cu2Colors.purple)}}const h=["*"];let f=(()=>{class e{constructor(){this.state=!1,this.cu2Colors=n.a,this.isSharingApp=s.k,this.color="",this.disabled=!0,this.cuColors=!1}onClick(){this.state=!this.disabled}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-sparks"]],hostAttrs:[1,"cu-sparks"],hostVars:6,hostBindings:function(e,t){2&e&&c.Ob("cu-sparks-solid",!t.cuColors)("cu-sparks-cuColors",t.cuColors)("cu-sparks_disabled",t.isSharingApp)},inputs:{color:"color",disabled:"disabled",cuColors:"cuColors"},ngContentSelectors:h,decls:8,vars:1,consts:[[1,"cu-sparks__inner",3,"mousedown"],["class","cu-sparks__items",3,"ngClass",4,"ngIf"],[1,"cu-sparks__toggle"],["regular",""],["colored",""],[1,"cu-sparks__items",3,"ngClass"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(c.Cc(),c.cc(0,"div",0),c.qc("mousedown",function(){return t.onClick()}),c.bd(1,u,2,6,"div",1),c.cc(2,"div",2),c.Bc(3),c.bc(),c.bc(),c.bd(4,m,10,20,"ng-template",null,3,c.cd),c.bd(6,p,8,16,"ng-template",null,4,c.cd)),2&e&&(c.Ib(1),c.Dc("ngIf",t.state))},directives:[a.q,a.o,a.x],styles:[".cu-sparks_disabled{pointer-events:none}.cu-sparks-solid{display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.cu-sparks-solid .cu-sparks__inner,.cu-sparks-solid .cu-sparks__toggle{position:relative}.cu-sparks-solid .lv-task__done-btn{margin:0;width:16px;padding:7px 0}.cu-sparks-solid .done-task-btn__icon{margin-right:0!important}.cu-sparks-solid .cu-task-row-status__done-btn{margin:0}.cu-sparks-solid .cu-sparks__items{position:relative;width:20px;height:20px;border-radius:50%;position:absolute;left:50%;top:50%;margin-left:-10px;margin-top:-10px;opacity:0}.cu-sparks-solid .cu-sparks__items div{position:absolute;width:10px;height:2px;top:50%;left:50%;margin-top:-1px;margin-left:-5px}.cu-sparks-solid .cu-sparks__items div:first-of-type{transform:rotate(0deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(2){transform:rotate(-36deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(3){transform:rotate(-72deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(4){transform:rotate(-108deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(5){transform:rotate(-144deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(6){transform:rotate(-180deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(7){transform:rotate(-216deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(8){transform:rotate(-252deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(9){transform:rotate(-288deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div:nth-of-type(10){transform:rotate(-324deg) translate(10px) scale(0)}.cu-sparks-solid .cu-sparks__items div{background:#7b68ee;border-radius:1px;will-change:transform}@supports (--theme-main-color:#7b68ee){.cu-sparks-solid .cu-sparks__items div{background:var(--theme-main-color)}}.cu-sparks-solid .cu-sparks__items_visible{opacity:1}.cu-sparks-solid .cu-sparks__items_visible div:first-of-type{animation:cu-sparks-spark-animation-1 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(2){animation:cu-sparks-spark-animation-2 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(3){animation:cu-sparks-spark-animation-3 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(4){animation:cu-sparks-spark-animation-4 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(5){animation:cu-sparks-spark-animation-5 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(6){animation:cu-sparks-spark-animation-6 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(7){animation:cu-sparks-spark-animation-7 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(8){animation:cu-sparks-spark-animation-8 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(9){animation:cu-sparks-spark-animation-9 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-solid .cu-sparks__items_visible div:nth-of-type(10){animation:cu-sparks-spark-animation-10 1.5s cubic-bezier(.075,.82,.165,1)}@keyframes cu-sparks-spark-animation-9{0%{opacity:1;transform:rotate(-288deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-288deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-10{0%{opacity:1;transform:rotate(-324deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-324deg) translate(24px) scale(0)}}.cu-sparks-cuColors{display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.cu-sparks-cuColors .cu-sparks__inner,.cu-sparks-cuColors .cu-sparks__toggle{position:relative}.cu-sparks-cuColors .lv-task__done-btn{margin:0;width:16px;padding:7px 0}.cu-sparks-cuColors .done-task-btn__icon{margin-right:0!important}.cu-sparks-cuColors .cu-task-row-status__done-btn{margin:0}.cu-sparks-cuColors .cu-sparks__items{position:relative;width:20px;height:20px;border-radius:50%;position:absolute;left:50%;top:50%;margin-left:-10px;margin-top:-10px;opacity:0}.cu-sparks-cuColors .cu-sparks__items div{position:absolute;width:6px;height:3px;top:50%;left:50%;margin-top:-1.5px;margin-left:-3px}.cu-sparks-cuColors .cu-sparks__items div:first-of-type{transform:rotate(0deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(2){transform:rotate(-45deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(3){transform:rotate(-90deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(4){transform:rotate(-135deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(5){transform:rotate(-180deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(6){transform:rotate(-225deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(7){transform:rotate(-270deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div:nth-of-type(8){transform:rotate(-315deg) translate(10px) scale(0)}.cu-sparks-cuColors .cu-sparks__items div{background:#7b68ee;border-radius:1.5px;will-change:transform}@supports (--theme-main-color:#7b68ee){.cu-sparks-cuColors .cu-sparks__items div{background:var(--theme-main-color)}}.cu-sparks-cuColors .cu-sparks__items_visible{opacity:1}.cu-sparks-cuColors .cu-sparks__items_visible div:first-of-type{animation:cu-sparks-spark-animation-1 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(2){animation:cu-sparks-spark-animation-2 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(3){animation:cu-sparks-spark-animation-3 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(4){animation:cu-sparks-spark-animation-4 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(5){animation:cu-sparks-spark-animation-5 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(6){animation:cu-sparks-spark-animation-6 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(7){animation:cu-sparks-spark-animation-7 1.5s cubic-bezier(.075,.82,.165,1)}.cu-sparks-cuColors .cu-sparks__items_visible div:nth-of-type(8){animation:cu-sparks-spark-animation-8 1.5s cubic-bezier(.075,.82,.165,1)}@keyframes cu-sparks-spark-animation-1{0%{opacity:1;transform:rotate(0deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(0deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-2{0%{opacity:1;transform:rotate(-45deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-45deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-3{0%{opacity:1;transform:rotate(-90deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-90deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-4{0%{opacity:1;transform:rotate(-135deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-135deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-5{0%{opacity:1;transform:rotate(-180deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-180deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-6{0%{opacity:1;transform:rotate(-225deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-225deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-7{0%{opacity:1;transform:rotate(-270deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-270deg) translate(24px) scale(0)}}@keyframes cu-sparks-spark-animation-8{0%{opacity:1;transform:rotate(-315deg) translate(10px) scale(1)}80%{opacity:1}to{opacity:0;transform:rotate(-315deg) translate(24px) scale(0)}}"],encapsulation:2,data:{animation:[Object(o.m)("sparksState",[Object(o.l)("false => true",Object(o.e)(200,Object(o.g)([Object(o.k)({opacity:"1",offset:0}),Object(o.k)({opacity:"1",offset:1})])))])]},changeDetection:0}),e})()},"o/e2":function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i("0Dyw");var o=i("ofXK"),n=i("K0KF"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a]]}),e})()},"oB/R":function(e,t,i){"use strict";i.d(t,"a",function(){return oe});var o=i("fXoL"),n=i("IlGD"),s=i("XZJ2"),c=i("YwDF"),a=i("4WLo"),r=i("9jGm"),l=i("pLZG"),d=i("1G5W"),u=i("HHlo"),m=i("XNiG"),p=i("YAnr"),h=i("SkDE"),f=i("ofXK"),b=i("Ufp6"),g=i("NsZK"),_=i("wNhb"),v=i("UdVN"),k=i("Dvla"),y=i("LdyQ"),w=i("MJvn"),x=i("n+1/"),I=i("pxPQ"),T=i("t7PA"),C=i("peMq"),D=i("loh9"),O=i("FrPa"),S=i("oV/j");const E=["editPopover"];function P(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-edit-task-custom-field-value",4),o.qc("fieldSaveStart",function(){return o.Uc(e),o.uc(2).fieldSaveStart.emit()})("fieldSaveError",function(){return o.Uc(e),o.uc(2).fieldSaveError.emit()})("fieldSaveSuccess",function(){return o.Uc(e),o.uc(2).fieldSaveSuccess.emit()})("fieldValueChange",function(t){return o.Uc(e),o.uc(2).fieldValueChange.emit(t)})("fieldDeleteSuccess",function(){return o.Uc(e),o.uc(2).fieldDeleteSuccess.emit()})("formControlBlur",function(){return o.Uc(e),o.uc(2).toggleEdit()})("formControlError",function(t){return o.Uc(e),o.uc(2).errorMessage=t.message})("editProjectFieldsModalOpen",function(t){return o.Uc(e),o.uc(2).editProjectFieldsModalOpen.emit(t)})("dropdownOpen",function(){return o.Uc(e),o.uc(2).onOpen.emit()})("dropdownClose",function(){return o.Uc(e),o.uc(2).onClose.emit()}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("task",e.task)("permissions",e.permissions)("field",e.field)("forViewTask",e.forViewTask)("forListView",e.forListView)("forTableView",e.forTableView)("fieldValue",e.field.value)("closeOthers",e.closeOthers)("members",e.members)("subcategory",e.subcategory)("allCustomFields",e.allCustomFields)("autoFocus",!e.alwaysEdit)("quickEdit",!e.forViewTask||!e.clickToEdit||e.field.type===e.CustomFieldType.LongText||e.field.type===e.CustomFieldType.ShortText)("useRollups",e.useRollups)("forTaskCustomFields",e.forTaskCustomFields)}}function j(e,t){if(1&e&&(o.cc(0,"div",10),o.qc("click",function(e){return e.stopPropagation()}),o.bc()),2&e){const e=o.uc(4);o.Dc("cbContent",e.copyValue)("cuTooltip",e.copyLabelTooltipMsg)}}const A=function(e,t){return{"cu-custom-field__content_not-truncated":e,"cu-custom-field__content_edit":t}},$=function(){return["bottom","top","left","right"]},U=function(e,t,i){return{useRollups:e,team:t,linkify:i}};function R(e,t){if(1&e){const e=o.dc();o.cc(0,"div",6,7),o.qc("click",function(){return o.Uc(e),o.uc(3).toggleEdit()})("onShown",function(){return o.Uc(e),o.uc(3).popoverIsOpen=!0})("onHidden",function(){return o.Uc(e),o.uc(3).popoverIsOpen=!1}),o.Xb(2,"span",8),o.vc(3,"trustHTML"),o.vc(4,"async"),o.vc(5,"customFieldValue"),o.bd(6,j,1,2,"div",9),o.bc()}if(2&e){o.uc(2);const e=o.Rc(2),t=o.uc();o.Dc("ngClass",o.Ic(22,A,t.field.type===t.CustomFieldType.LongText,t.popoverIsOpen))("cuTooltip",t.field.value)("tooltipDisabledIfTextNotTruncated",!0)("tooltipUseInnerHtml",!0)("tooltipAllowHtmlRememberToEscapeXss",!0)("cuPopover",e)("placement",o.Gc(25,$))("trigger",t.field.type===t.CustomFieldType.LongText?"click":null)("outsideClick",!0),o.Ib(2),o.Ob("display-block",t.field.type===t.CustomFieldType.LongText&&t.forViewTask),o.Dc("innerHtml",t.forViewTask&&!t.field.value?"<div class='cu-custom-field__content-placeholder'>"+t.placeholder+"</div>":o.wc(3,13,o.wc(4,15,o.zc(5,17,t.field.value,t.field,t.task,o.Jc(26,U,t.useRollups,t.team,t.linkify)))),o.Vc),o.Ib(4),o.Dc("ngIf",t.copyValueLabel&&t.field.value&&!t.forViewTask)}}const M=function(e){return{id:"copy",title:e,icon:"cu2-copy-link2"}},F=function(e){return{id:"edit",title:e,icon:"edit-v2"}},L=function(e){return{id:"remove",title:e,icon:"cu2-trash"}};function N(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"cu-dropdown-list-item",17,18),o.qc("cbOnSuccess",function(){return o.Uc(e),o.Rc(2).setCopied()}),o.bc(),o.cc(3,"cu-dropdown-list-item",19),o.qc("click",function(){return o.Uc(e),o.uc(5).toggleEdit()}),o.bc(),o.cc(4,"cu-dropdown-list-item",19),o.qc("click",function(){return o.Uc(e),o.uc(5).deleteFieldValue()}),o.bc(),o.bc()}if(2&e){const e=o.Rc(2),t=o.uc(5);o.Ib(1),o.Dc("item",o.Hc(4,M,e.copied?t.copiedText:t.copyLabelTooltipMsg))("cbContent",t.field.value),o.Ib(2),o.Dc("item",o.Hc(6,F,t.editText)),o.Ib(1),o.Dc("item",o.Hc(8,L,t.removeLabelTooltipMsg))}}const z=function(e,t){return{useRollups:e,team:t}};function q(e,t){if(1&e&&(o.cc(0,"div",13),o.Xb(1,"div",14),o.vc(2,"trustHTML"),o.vc(3,"async"),o.vc(4,"customFieldValue"),o.Xb(5,"div",15),o.bd(6,N,5,10,"div",16),o.bc()),2&e){const e=o.uc(4);o.Ib(1),o.Dc("ngClass","cu-custom-field__content-value_"+e.field.type)("innerHtml",o.wc(2,2,o.wc(3,4,o.zc(4,6,e.field.value,e.field,e.task,o.Ic(11,z,e.useRollups,e.team)))),o.Vc)}}function G(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.Xb(1,"div",14),o.vc(2,"trustHTML"),o.vc(3,"async"),o.vc(4,"customFieldValue"),o.cc(5,"div",21),o.cc(6,"div",22,18),o.qc("cbOnSuccess",function(){return o.Uc(e),o.Rc(7).setCopied()}),o.bc(),o.cc(8,"div",23),o.qc("click",function(){return o.Uc(e),o.uc(4).toggleEdit()}),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.Rc(7),t=o.uc(4);o.Ib(1),o.Dc("ngClass","cu-custom-field__content-value_"+t.field.type)("innerHtml",o.wc(2,4,o.wc(3,6,o.zc(4,8,t.field.value,t.field,t.task,o.Ic(13,z,t.useRollups,t.team)))),o.Vc),o.Ib(5),o.Dc("cbContent",t.field.value)("cuTooltip",e.copied?t.copiedText:t.copyLabelTooltipMsg)}}function V(e,t){if(1&e&&(o.ac(0),o.bd(1,q,7,14,"div",11),o.bd(2,G,9,16,"div",12),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.Dc("ngIf",!e.forViewTask),o.Ib(1),o.Dc("ngIf",e.forViewTask)}}function B(e,t){if(1&e&&(o.ac(0),o.bd(1,R,7,30,"div",5),o.bd(2,V,3,2,"ng-container",3),o.Zb()),2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngIf",e.clickToEdit||!e.field.value),o.Ib(1),o.Dc("ngIf",!e.clickToEdit&&e.field.value)}}function X(e,t){}function H(e,t){if(1&e&&o.bd(0,X,0,0,"ng-template",24),2&e){o.uc();const e=o.Rc(2);o.Dc("ngTemplateOutlet",e)}}function W(e,t){if(1&e&&(o.ac(0),o.bd(1,P,1,15,"ng-template",null,2,o.cd),o.bd(3,B,3,2,"ng-container",3),o.bd(4,H,1,1,void 0,3),o.Zb()),2&e){const e=o.uc();o.Ib(3),o.Dc("ngIf",!e.edit),o.Ib(1),o.Dc("ngIf",e.edit)}}function K(e,t){if(1&e&&o.Xb(0,"cu-custom-field-type",26),2&e){const e=o.uc(2);o.Dc("readonly",!0)("component",e.component)("field",e.field)("fieldValue",e.field.value)("task",e.task)}}function Q(e,t){if(1&e&&o.Xb(0,"cu-user-group",29),2&e){const e=o.uc(3);o.Dc("readOnly",!0)("users",e.field.value)("avatarSize",e.forViewTask?24:30)}}function Z(e,t){if(1&e&&(o.Xb(0,"div",33),o.vc(1,"trustHTML"),o.vc(2,"async"),o.vc(3,"customFieldValue")),2&e){const e=o.uc(4);o.Dc("innerHtml",o.wc(1,4,o.wc(2,6,o.zc(3,8,e.field.value,e.field,e.task,o.Ic(13,z,e.useRollups,e.team)))),o.Vc)("tooltipUseInnerHtml",e.field.type!==e.CustomFieldType.Emoji)("tooltipAllowHtmlRememberToEscapeXss",e.field.type!==e.CustomFieldType.Emoji)("tooltipDisabledIfTextNotTruncated",!0)}}function Y(e,t){if(1&e&&(o.Xb(0,"div",34),o.vc(1,"trustHTML"),o.vc(2,"async"),o.vc(3,"customFieldValue")),2&e){const e=o.uc(4);o.Dc("innerHTML",o.wc(1,1,o.wc(2,3,o.zc(3,5,e.field.value,e.field,e.task,o.Jc(10,U,e.useRollups,e.team,e.linkify)))),o.Vc)}}function J(e,t){if(1&e&&(o.Xb(0,"div",35),o.vc(1,"trustHTML"),o.vc(2,"async"),o.vc(3,"customFieldValue")),2&e){o.uc();const e=o.Rc(2),t=o.uc(3);o.Ob("display-block",t.field.type===t.CustomFieldType.LongText&&t.forViewTask),o.Dc("innerHtml",o.wc(1,6,o.wc(2,8,o.zc(3,10,t.field.value,t.field,t.task,o.Jc(15,U,t.useRollups,t.team,t.linkify)))),o.Vc)("cuPopover",e)("outsideClick",!0)("trigger",t.field.value?"click":null)}}function ee(e,t){if(1&e&&(o.bd(0,Z,4,16,"div",30),o.bd(1,Y,4,14,"ng-template",null,31,o.cd),o.bd(3,J,4,19,"div",32)),2&e){const e=o.uc(3);o.Dc("ngIf",(e.field.value||0===e.field.value||e.field.type===e.CustomFieldType.Checkbox||e.field.type===e.CustomFieldType.Attachment||e.field.type===e.CustomFieldType.Url||e.field.type===e.CustomFieldType.Dropdown||e.field.type===e.CustomFieldType.Email||e.field.type===e.CustomFieldType.Phone||e.field.type===e.CustomFieldType.Date||e.field.type===e.CustomFieldType.Currency||e.field.type===e.CustomFieldType.Labels||e.field.type===e.CustomFieldType.Users||e.field.type===e.CustomFieldType.Emoji)&&e.field.type!==e.CustomFieldType.ShortText&&e.field.type!==e.CustomFieldType.LongText),o.Ib(3),o.Dc("ngIf",e.field.type===e.CustomFieldType.LongText||e.field.type===e.CustomFieldType.ShortText)}}function te(e,t){if(1&e&&(o.ac(0),o.bd(1,Q,1,3,"cu-user-group",27),o.bd(2,ee,4,2,"ng-template",null,28,o.cd),o.Zb()),2&e){const e=o.Rc(3),t=o.uc(2);o.Ib(1),o.Dc("ngIf",t.field.type===t.CustomFieldType.Users&&(null==t.field||null==t.field.value?null:t.field.value.length))("ngIfElse",e)}}function ie(e,t){if(1&e&&(o.bd(0,K,1,5,"cu-custom-field-type",25),o.bd(1,te,4,2,"ng-container",3)),2&e){const e=o.uc();o.Dc("ngIf",e.component),o.Ib(1),o.Dc("ngIf",!e.component)}}let oe=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.customFieldsService=t,this.actions$=i,this.disconnected=!1,this.readOnly=!1,this.closeOthers=!0,this.forViewTask=!1,this.forListView=!1,this.forTableView=!1,this.useRollups=!0,this.forTaskCustomFields=!1,this.fieldValueChange=new o.o,this.fieldSaveStart=new o.o,this.fieldSaveSuccess=new o.o,this.fieldSaveError=new o.o,this.fieldDeleteSuccess=new o.o,this.editProjectFieldsModalOpen=new o.o,this.onOpen=new o.o,this.onClose=new o.o,this.updateCustomFieldTypeConfig=new o.o,this.edit=!1,this.alwaysEdit=!1,this.clickToEdit=!1,this.CustomFieldType=c.a,this.isAutomaticValue=!1,this.linkify=p.z,this.popoverIsOpen=!1,this.destroy$=new m.a,this.copiedText=$localize`:@@common_copied:Copied!`,this.editText=$localize`:@@common_edit:Edit`}get copyLabelTooltipMsg(){return $localize`:@@cu-custom-field__copy-label:Copy ${this.copyValueLabel}:copyLabelText:`}get removeLabelTooltipMsg(){return $localize`:@@cu-custom-field__remove-label:Remove ${this.copyValueLabel}:copyLabelText:`}ngOnInit(){this.actions$.pipe(Object(r.d)(u.w),Object(l.a)(e=>!!e.updates.type_config&&e.field.id===this.field.id),Object(d.a)(this.destroy$)).subscribe(e=>{this.updateCustomFieldTypeConfig.emit({typeConfig:e.field.type_config})})}ngOnDestroy(){this.destroy$.next()}ngOnChanges(e){if(e.field){const e=n.e[this.field.type];this.component=a.b[this.field.type],this.alwaysEdit=e.alwaysEdit,this.clickToEdit=!e.noClickToEdit,(this.forViewTask||this.forTaskCustomFields)&&this.clickToEdit&&this.field.type!==c.a.ShortText&&this.field.type!==c.a.LongText&&(this.alwaysEdit=!0),this.alwaysEdit&&(this.edit=!0),this.isAutomaticValue=e.isAutomaticValue,this.copyValueLabel=e.copyValueLabel,this.placeholder=e.label,this.copyValueLabel&&(this.copyValue=e.copyValue?e.copyValue(this.field.value):this.field.value)}}toggleEdit(){this.errorMessage||this.alwaysEdit||this.field.type===c.a.LongText&&!this.forViewTask||(this.edit=!this.edit,this.changeDetector.markForCheck(),this.edit?(this.errorMessage="",this.onOpen.emit()):setTimeout(()=>{this.onClose.emit()}))}deleteFieldValue(){this.fieldValueChange.emit(void 0),this.customFieldsService.deleteTaskFieldValue(this.task.id,this.field.id).subscribe(()=>{this.fieldDeleteSuccess.emit()})}startEditing(){this.edit||setTimeout(()=>{this.toggleEdit()},100),this.editor&&this.editor.openDropdown()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h),o.Wb(h.a),o.Wb(r.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field"]],viewQuery:function(e,t){if(1&e&&(o.jd(E,1),o.jd(s.a,1)),2&e){let e;o.Qc(e=o.rc())&&(t.editPopover=e.first),o.Qc(e=o.rc())&&(t.editor=e.first)}},hostVars:4,hostBindings:function(e,t){2&e&&o.Ob("cu-custom-field",!0)("cu-custom-field_list-view",t.forListView)},inputs:{field:"field",task:"task",subcategory:"subcategory",permissions:"permissions",disconnected:"disconnected",readOnly:"readOnly",closeOthers:"closeOthers",forViewTask:"forViewTask",forListView:"forListView",forTableView:"forTableView",members:"members",allCustomFields:"allCustomFields",team:"team",useRollups:"useRollups",forTaskCustomFields:"forTaskCustomFields"},outputs:{fieldValueChange:"fieldValueChange",fieldSaveStart:"fieldSaveStart",fieldSaveSuccess:"fieldSaveSuccess",fieldSaveError:"fieldSaveError",fieldDeleteSuccess:"fieldDeleteSuccess",editProjectFieldsModalOpen:"editProjectFieldsModalOpen",onOpen:"onOpen",onClose:"onClose",updateCustomFieldTypeConfig:"updateCustomFieldTypeConfig"},features:[o.Gb],decls:3,vars:2,consts:function(){let e;return e=$localize`:@@common_edit␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,[[4,"ngIf","ngIfElse"],["staticValue",""],["editField",""],[4,"ngIf"],[3,"task","permissions","field","forViewTask","forListView","forTableView","fieldValue","closeOthers","members","subcategory","allCustomFields","autoFocus","quickEdit","useRollups","forTaskCustomFields","fieldSaveStart","fieldSaveError","fieldSaveSuccess","fieldValueChange","fieldDeleteSuccess","formControlBlur","formControlError","editProjectFieldsModalOpen","dropdownOpen","dropdownClose"],["class","cu-custom-field__content","containerClass","popover_white edit_longtext",3,"ngClass","cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipUseInnerHtml","tooltipAllowHtmlRememberToEscapeXss","cuPopover","placement","trigger","outsideClick","click","onShown","onHidden",4,"ngIf"],["containerClass","popover_white edit_longtext",1,"cu-custom-field__content",3,"ngClass","cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipUseInnerHtml","tooltipAllowHtmlRememberToEscapeXss","cuPopover","placement","trigger","outsideClick","click","onShown","onHidden"],["editPopover","cuPopover"],[1,"cu-custom-field__content-inner",3,"innerHtml"],["class","cu-custom-field__copy","icon","copy","ngxClipboard","",3,"cbContent","cuTooltip","click",4,"ngIf"],["icon","copy","ngxClipboard","",1,"cu-custom-field__copy",3,"cbContent","cuTooltip","click"],["class","cu-custom-field__content cu-custom-field__content_flex","cuDropdown","",4,"ngIf"],["class","cu-custom-field__content cu-custom-field__content_flex",4,"ngIf"],["cuDropdown","",1,"cu-custom-field__content","cu-custom-field__content_flex"],[1,"cu-custom-field__content-value",3,"ngClass","innerHtml"],["cuDropdownToggle","","icon","cu2-ellipsis",1,"cu-custom-field__edit"],[4,"cuDropdownMenu"],["ngxClipboard","","cuClipboardCopied","",3,"item","cbContent","cbOnSuccess"],["clipboardHelper","cuClipboardCopied"],[3,"item","click"],[1,"cu-custom-field__content","cu-custom-field__content_flex"],[1,"cu-custom-field__options"],["icon","cu2-copy-link2","ngxClipboard","","cuClipboardCopied","",1,"cu-custom-field__options-item",3,"cbContent","cuTooltip","cbOnSuccess"],["icon","edit-v3","cuTooltip",e,1,"cu-custom-field__options-item","cu-custom-field__options-item_edit",3,"click"],[3,"ngTemplateOutlet"],["class","cu-custom-field__static",3,"readonly","component","field","fieldValue","task",4,"ngIf"],[1,"cu-custom-field__static",3,"readonly","component","field","fieldValue","task"],[3,"readOnly","users","avatarSize",4,"ngIf","ngIfElse"],["notUsers",""],[3,"readOnly","users","avatarSize"],["class","cu-custom-field__static","cuTooltip","",3,"innerHtml","tooltipUseInnerHtml","tooltipAllowHtmlRememberToEscapeXss","tooltipDisabledIfTextNotTruncated",4,"ngIf"],["cfValuePopover",""],["class","cu-custom-field__static","containerClass","popover_white cu-custom-fields__text-expansion-popover",3,"display-block","innerHtml","cuPopover","outsideClick","cuPreventDefault","trigger",4,"ngIf"],["cuTooltip","",1,"cu-custom-field__static",3,"innerHtml","tooltipUseInnerHtml","tooltipAllowHtmlRememberToEscapeXss","tooltipDisabledIfTextNotTruncated"],[3,"innerHTML"],["containerClass","popover_white cu-custom-fields__text-expansion-popover",1,"cu-custom-field__static",3,"innerHtml","cuPopover","outsideClick","cuPreventDefault","trigger"]]},template:function(e,t){if(1&e&&(o.bd(0,W,5,2,"ng-container",0),o.bd(1,ie,2,2,"ng-template",null,1,o.cd)),2&e){const e=o.Rc(2);o.Dc("ngIf",(null==t.permissions?null:t.permissions.set_custom_field_values)&&!t.disconnected&&!t.readOnly||t.isAutomaticValue)("ngIfElse",e)}},directives:[f.q,b.a,f.o,g.a,_.a,v.a,k.a,y.b,w.a,x.a,I.a,T.a,f.x,a.a,C.a,D.a],pipes:[O.a,f.b,S.c],styles:['.cu-custom-field{display:flex}.cu-custom-field__content{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;display:flex;align-items:center;width:100%;min-height:30px;border:1px solid transparent;cursor:pointer;color:#343434;padding:0 10px;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field__content{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field__content{color:#d5d6d7}.cu-custom-field__content:hover{border:1px solid #e4e4e4}.dark-theme .cu-custom-field__content:hover{border-color:#1e272e}.cu-custom-field__content:hover .cu-custom-field__copy,.cu-custom-field__content:hover .cu-custom-field__edit{display:block}.cu-custom-field__content:not(.cu-custom-field__content_not-truncated){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cu-custom-field__content_not-truncated{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;height:100%}.cu-custom-field__content_flex{display:flex;justify-content:center;align-items:center}.cu-custom-field__content_edit{transition:unset;border-color:var(--theme-main-color)!important}.cu-custom-field__content a{color:#343434}.dark-theme .cu-custom-field__content a{color:#abaeb0}.cu-custom-field__content-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;text-align:center;align-self:stretch}.cu-custom-field__content-inner{min-width:0;flex-grow:1}.cu-custom-field__content-inner.display-block .cu-custom-fields__multi-line-text{display:block}.cu-custom-field__content-inner .cu-custom-fields__multi-line-text .cu-linkify-link,.cu-custom-field__content-inner .cu-custom-fields__single-line-text .cu-linkify-link{text-decoration:underline;color:#4a90e2}.dark-theme .cu-custom-field__content-inner .cu-custom-fields__multi-line-text .cu-linkify-link,.dark-theme .cu-custom-field__content-inner .cu-custom-fields__single-line-text .cu-linkify-link{color:#72b3fd}.cu-task-row_auto-wrap .cu-custom-field__content-inner{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;white-space:normal;overflow:visible;text-overflow:clip;padding-top:5px;padding-bottom:5px;text-align:center}.cu-custom-field__edit{padding:2px;cursor:pointer;width:14px;height:14px;stroke:rgba(52,52,52,.5);fill:rgba(52,52,52,.5);stroke-width:1.4px;display:none;flex-shrink:0}.dark-theme .cu-custom-field__edit{stroke:#abaeb0;fill:#abaeb0}.cu-custom-field__edit:hover,.cu-custom-field__edit_active{stroke:#7b68ee;fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-custom-field__edit:hover,.cu-custom-field__edit_active{stroke:var(--theme-main-color);fill:var(--theme-main-color)}}.cu-custom-field__copy{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:none;position:absolute;bottom:4px;right:6px;width:20px;height:20px;z-index:1;cursor:pointer;background:#67cb48;fill:#fff;border-radius:3px;padding:2px;top:50%;transform:translateY(-50%)}.cu-custom-field__copy:hover{background:#4ea242}.cu-custom-field__copy:active{transform:scale(.9)}.cu-custom-field__edit{margin-left:4px}.cu-custom-field__copy{margin-right:-4px}.cu-custom-field__options{display:none;position:absolute;right:0;height:100%;padding-right:25px;padding-left:5px;border-radius:0 6px 6px 0;background:#fff}.dark-theme .cu-custom-field__options{background:#384047}.cu-task-custom-fields__row:hover .cu-custom-field__options{display:flex;align-items:center}.cu-custom-field__options-item{width:20px;height:20px;padding:2px;fill:#b9bec7}.dark-theme .cu-custom-field__options-item{fill:#7c828d}.cu-custom-field__options-item:hover{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-custom-field__options-item:hover{fill:var(--theme-main-color-dark)}}.cu-custom-field__options-item+.cu-custom-field__options-item{margin-left:5px}.cu-custom-field__options-item_edit{padding:3px}.cu-custom-field .cu-edit-task-custom-field-value,.cu-custom-field .cu-edit-task-custom-field-value>div{width:100%;height:100%;display:flex;align-items:center}.cu-custom-fields .cu-custom-field .cu-edit-task-custom-field-value>div.cu-custom-fields__type-dropdown{padding:0 8px;border:0;cursor:pointer}.cu-custom-fields .cu-custom-field .cu-edit-task-custom-field-value>div.cu-custom-fields__type-dropdown .cu-custom-fields__header-items-value__dropdown-option-text{font-weight:600;font-size:11px;line-height:1.2}.cu-custom-field .cu-edit-task-custom-field-value>div.cu-custom-fields__form-input_checkbox{width:30px}.cu-custom-field .cu-edit-task-custom-field-value>div.cu-custom-fields__form-input_checkbox input{position:relative}.cu-custom-field .cu-edit-task-custom-field-value .cu-custom-fields__form-input-group_phone{width:180px}.cu-custom-field .cu-edit-task-custom-field-value .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text{width:140px}.cu-custom-field .cu-custom-fields__form-input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1.2;border:1px solid transparent;align-items:center;color:#343434;width:100%;min-height:30px;background:transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field .cu-custom-fields__form-input{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field .cu-custom-fields__form-input{color:#d5d6d7}.cu-custom-field .cu-custom-fields__form-input:focus{border:1px solid #e4e4e4;box-shadow:none;background:transparent}.dark-theme .cu-custom-field .cu-custom-fields__form-input:focus{border-color:#1e272e}.cu-custom-field .cu-custom-fields__form-input:focus:-ms-input-placeholder{opacity:0}.cu-custom-field .cu-custom-fields__form-input:focus::placeholder{opacity:0}.cu-custom-field .cu-custom-fields__form-input:hover{border:1px solid #e4e4e4}.dark-theme .cu-custom-field .cu-custom-fields__form-input:hover{border-color:#1e272e}.cu-custom-field .cu-custom-fields__form-input_checkbox{width:30px}.cu-custom-field .cu-custom-fields__form-input_checkbox input{position:relative}.cu-custom-field .cu-custom-fields__form-input_textarea{height:100%;z-index:1;position:relative}.cu-custom-field .cu-custom-fields__form-input_textarea:focus{background-color:#fff}.dark-theme .cu-custom-field .cu-custom-fields__form-input_textarea:focus{background:#384047}.cu-custom-field .cu-custom-fields__form-input-group_phone{width:130px;border:1px solid transparent}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-select-option{text-align:left}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-select{border:1px solid transparent;width:40px}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text{border:1px solid transparent;width:90px}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus{border:1px solid #e4e4e4}.dark-theme .cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus{border-color:#1e272e}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus:-ms-input-placeholder{opacity:.6}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus::placeholder{opacity:.6}.dark-theme .cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus:-ms-input-placeholder{color:#828588;opacity:1}.dark-theme .cu-custom-field .cu-custom-fields__form-input-group_phone .cu-custom-fields__form-input-group-text:focus::placeholder{color:#828588;opacity:1}.cu-custom-field .cu-custom-fields__form-input-group_phone .cu-select-selection__arrow{display:none}.cu-custom-field .cu-custom-fields__form-input_dropdown,.cu-custom-field .cu-custom-fields__form-input_dropdown .cu-dropdown,.cu-custom-field .cu-custom-fields__form-input_dropdown .cu-dropdown .cu-dropdown__toggle{height:100%}.cu-custom-field .cu-dropdown_datepicker .cu-dropdown__toggle{width:100%}.cu-custom-field .datepicker__dates-input-container-inner{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;padding:0 10px;display:flex;align-items:center;color:#4a4a4a;border:1px solid transparent;border-radius:3px;height:36px;width:100%;max-width:100%;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;background:transparent}.dark-theme .cu-custom-field .datepicker__dates-input-container-inner{color:#d5d6d7}.cu-custom-field .datepicker__dates-input-container-inner:hover{background:transparent;border:1px solid #e4e4e4}.cu-custom-field .datepicker__dates-input-container-inner.natural-language.focused-date{background:transparent;border:1px solid transparent}.cu-custom-field .datepicker__dates-input-container-inner.natural-language.focused-date:hover{background:transparent;border:1px solid #e4e4e4}.dark-theme .cu-custom-field .datepicker__dates-input-container-inner.natural-language.focused-date:hover{border:1px solid #1e272e}.cu-custom-field .datepicker__dates-input-container-inner:focus{box-shadow:none;color:#343434}.dark-theme .cu-custom-field .datepicker__dates-input-container-inner:focus{color:#d5d6d7}.cu-custom-field .datepicker__dates-input-container-inner:focus:-ms-input-placeholder{opacity:0}.cu-custom-field .datepicker__dates-input-container-inner:focus::placeholder{opacity:0}.cu-custom-field .datepicker__dates-input-container-inner .datepicker__close{right:5px;top:50%;transform:translateY(-50%)}.cu-custom-field_list-view{display:flex;align-items:center;justify-content:center}.cu-custom-field_list-view .datepicker__dates-input-container-inner{height:30px}.cu-custom-field_list-view .datepicker__dates-input-container-val{font-family:Gotham Pro,Proxima Nova,arial,serif;font-size:11px;color:#343434;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field_list-view .datepicker__dates-input-container-val{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field_list-view .datepicker__dates-input-container-val{color:#abaeb0}.cu-custom-field_list-view .datepicker__dates-input-container-val:-ms-input-placeholder{color:#343434}.cu-custom-field_list-view .datepicker__dates-input-container-val::placeholder{color:#343434}.dark-theme .cu-custom-field_list-view .datepicker__dates-input-container-val:-ms-input-placeholder{color:#abaeb0}.dark-theme .cu-custom-field_list-view .datepicker__dates-input-container-val::placeholder{color:#abaeb0}.cu-custom-field_list-view .datepicker__dates-input-container_active .datepicker__dates-input-container-inner{border:1px solid #e4e4e4!important}.dark-theme .cu-custom-field_list-view .datepicker__dates-input-container_active .datepicker__dates-input-container-inner{border:1px solid #1e272e!important}.cu-custom-field_list-view .datepicker__dates-input-container_active .datepicker__close{display:block}.cu-custom-field__static{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;display:flex;justify-content:center;align-items:center;flex-wrap:wrap;width:100%;height:100%;min-width:0;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field__static{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field__static{color:#abaeb0}.cu-custom-field__static a{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-custom-field__static a{font-family:var(--global-font-support)}}.dark-theme .cu-custom-field__static a{color:#abaeb0}.cu-custom-field__static.display-block .cu-custom-fields__multi-line-text{display:block}.cu-custom-field__static .cu-custom-fields__multi-line-text .cu-linkify-link,.cu-custom-field__static .cu-custom-fields__single-line-text .cu-linkify-link{text-decoration:underline;color:#4a90e2}.dark-theme .cu-custom-field__static .cu-custom-fields__multi-line-text .cu-linkify-link,.dark-theme .cu-custom-field__static .cu-custom-fields__single-line-text .cu-linkify-link{color:#72b3fd}.cu-custom-fields__text-expansion-popover .cu-linkify-link{text-decoration:underline;color:#4a90e2}.dark-theme .cu-custom-fields__text-expansion-popover .cu-linkify-link{color:#72b3fd}'],encapsulation:2,changeDetection:0}),e})()},oE8l:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("ofXK"),n=i("K0KF"),s=i("gb9A"),c=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a]]}),e})()},oEkI:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("AMNA"),n=i("yR4P"),s=i("fXoL"),c=i("oy6Y");let a=(()=>{class e{constructor(e){this.timezonesService=e,this.fullDateFormat="M/D/YY",this.shortDateFormat="MMM D"}transform(e,t=!1,i=this.fullDateFormat,o=!1){if(!e)return;i=i&&i.toUpperCase()||this.fullDateFormat;let s=e.dueDate;"string"==typeof s&&(s=parseInt(s,10));let c=e.startDate;if("string"==typeof c&&(c=parseInt(c,10)),s||c){if(s&&!c)return this.formatDateTime(s,i||this.fullDateFormat,o,e.dueDateTime,!t,"Due");if(c&&(!s||t&&!e.dueDateTime)){const t=this.formatDateTime(c,i||this.fullDateFormat,o,e.startDateTime,!0,"");return Object(n.h)(c,e.startDateTime)?$localize`:@@pipe_start-due-dates-format--future:Starts ${t}:formattedDateTime:`:$localize`:@@pipe_start-due-dates-format:Started ${t}:formattedDateTime:`}{const a=Object(n.b)(c,s);return 0!==a||e.startDateTime||e.dueDateTime?`${this.formatDateTime(c,i||this.fullDateFormat,o,e.startDateTime,!0,"")} - ${this.formatDateTime(s,i||this.fullDateFormat,o,e.dueDateTime,0!==a,"")}`:this.formatDateTime(s,i||this.fullDateFormat,o,e.dueDateTime,!t,"")}}}formatDateTime(e,t,i,o,n,s){let c="";return n&&(c=this.formatDate(e,t)),o&&(n?c+=" ":s&&(c+=s+" "),c+=this.formatTime(e,i)),c}formatTime(e,t){return this.timezonesService.formatDateTime(e,t?"H:mm":"h:mm a",!1)}formatDate(e,t){return Object(o.d)(e,{useShortWeekDays:!0})||this.timezonesService.formatDateTime(e,t,!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(c.a))},e.\u0275pipe=s.Vb({name:"startDueDatesFormat",type:e,pure:!0}),e})()},"oV/j":function(e,t,i){"use strict";i.d(t,"c",function(){return o.a}),i.d(t,"b",function(){return c}),i.d(t,"a",function(){return a});var o=i("fFSm"),n=i("IlGD"),s=i("fXoL");let c=(()=>{class e{constructor(e){this.injector=e}transform(e,t,i,s){return c=this,void 0,r=function*(){if(void 0===e)return"&ndash;";if(!n.e[t.type])return"";const{formatNotification:c,formatValue:a}=n.e[t.type],[r,l]=yield Promise.all([new o.a(this.injector).transform(e.before,t,i,s),new o.a(this.injector).transform(e.after,t,i,s)]);return c(r,l,t.name,e.before,e.after,a,t)},new((a=void 0)||(a=Promise))(function(e,t){function i(e){try{n(r.next(e))}catch(i){t(i)}}function o(e){try{n(r.throw(e))}catch(i){t(i)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(i,o)}n((r=r.apply(c,[])).next())});var c,a,r}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(s.t))},e.\u0275pipe=s.Vb({name:"customFieldNotification",type:e,pure:!0}),e})(),a=(()=>{class e{transform(e){const t=e.type_config;return{mask:n.b.find(e=>e.code===t.currency_type).symbol.replace(/\./g,"")+"num",blocks:{num:{mask:Number,thousandsSeparator:",",signed:!0,scale:t.precision,radix:"."}}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Vb({name:"customFieldCurrencyMask",type:e,pure:!0}),e})()},oWSB:function(e,t,i){"use strict";i.d(t,"b",function(){return w}),i.d(t,"a",function(){return x});var o=i("fXoL"),n=i("2Vo4"),s=i("/qOb"),c=i("l7P3"),a=i("WluX"),r=i("IzEk"),l=i("wa4x"),d=i("U4Ha"),u=i("jJW4"),m=i("ofXK"),p=i("3Pt+"),h=i("aitn"),f=i("peMq"),b=i("6kbF");const g=["taskNameInput"];function _(e,t){if(1&e){const e=o.dc();o.cc(0,"div",48),o.cc(1,"div",36),o.gc(2,49),o.bc(),o.cc(3,"input",50,51),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().options.newTitle=t})("keydown",function(t){return o.Uc(e),o.uc().keyDown(t)}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.Dc("ngModel",e.options.newTitle)}}function v(e,t){if(1&e){const e=o.dc();o.cc(0,"div",6),o.cc(1,"label"),o.cc(2,"input",22),o.qc("click",function(t){return o.Uc(e),o.uc().changeOption(t,"subtask")}),o.bc(),o.cc(3,"div",8),o.gc(4,52),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(2),o.Dc("checked",e.options.subtask),o.Ib(1),o.Ob("cu-checkbox_checked",e.options.subtask)("cu-checkbox_muted",e.optionEverything)}}function k(e,t){if(1&e){const e=o.dc();o.cc(0,"div",6),o.cc(1,"label"),o.cc(2,"input",53),o.qc("click",function(t){return o.Uc(e),o.uc().changeOption(t,"oldSubtaskAssignees")}),o.bc(),o.cc(3,"div",8),o.gc(4,54),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(2),o.Dc("checked",e.options.oldSubtaskAssignees&&e.options.subtask)("disabled",!e.options.subtask),o.Ib(1),o.Ob("cu-checkbox_checked",e.options.oldSubtaskAssignees&&e.options.subtask)("cu-checkbox_muted",e.optionEverything)("cu-checkbox_disabled",!e.options.subtask)}}function y(e,t){if(1&e){const e=o.dc();o.cc(0,"div",55),o.cc(1,"div",36),o.dd(2,"Location"),o.bc(),o.cc(3,"cu-category-list-legacy",56),o.qc("onSelect",function(t){return o.Uc(e),o.uc().selectCategory(t)}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.Dc("selectedCategoryId",null==e.options.category?null:e.options.category.id)("selectedSubcategoryId",null==e.options.subcategory?null:e.options.subcategory.id)("isFocusOnSearchInput",!1)}}function w(e){return{subcategory_id:e.subcategory.id,name:e.newTitle,subtasks:e.subtask||e.everything,attachments:e.attachment||e.everything,comment:e.comment||e.everything,assigned_comment:e.commentAssigned||e.everything,comment_attachments:e.commentAttachment||e.everything,old_assignees:e.oldAssignees,old_subtask_assignees:e.oldSubtaskAssignees,old_followers:e.oldFollowers,old_status:e.oldStatus,old_tags:e.oldTags,old_due_date:e.oldDueDate,old_checklists:e.checklists,recur_settings:e.recurring,internal_dependencies:e.dependencies||e.everything,external_dependencies:e.dependencies||e.everything,assignees:e.assignees.map(e=>e.id),followers:e.followers.map(e=>e.id),group_assignees:(e.group_assignees||[]).map(e=>e.id),group_followers:(e.group_followers||[]).map(e=>e.id),return_immediately:!0,custom_fields:e.customFields||e.everything,time_estimate:e.timeEstimate||e.everything,task_activity:e.activity||e.everything}}let x=(()=>{class e{constructor(e,t,i){this.viewTaskService=e,this.sharedData=t,this.store=i,this.options={everything:!1,attachment:!0,comment:!0,commentAssigned:!0,commentAttachment:!0,subtask:!0,project:null,category:null,subcategory:null,newTitle:"",assignees:[],followers:[],group_followers:[],group_assignees:[],oldStatus:!0,oldAssignees:!0,oldSubtaskAssignees:!0,oldFollowers:!0,oldTags:!0,oldDueDate:!0,recurring:!0,dependencies:!0,checklists:!0,customFields:!0,timeEstimate:!0,activity:!1},this.assigneeList=[],this.watcherList=[],this.bulkCopy=!1,this.atLeastOneTaskIncludesSubtasks=!1,this.onTaskCopy=new o.o,this.task$=new n.a(null),this.userGroups$=this.store.select(l.c)}get optionEverything(){return this.options.everything}set optionEverything(e){this.options.everything=e,e?(this.setAllOptions(!0),this.optionOldAssignees=!0,this.optionOldFollowers=!0):(this.setAllOptions(!1),this.optionOldAssignees=!1,this.optionOldFollowers=!1)}get optionOldAssignees(){return this.options.oldAssignees}set optionOldAssignees(e){this.options.oldAssignees=e,e?(this.options.assignees=this.filterMembers(this.task$.value.assignees),this.options.group_assignees=this.task$.value.group_assignees):(this.options.assignees=[],this.options.group_assignees=[],this.options.everything=!1)}get optionOldFollowers(){return this.options.oldFollowers}set optionOldFollowers(e){this.options.oldFollowers=e,e?(this.options.followers=this.filterMembers(this.task$.value.followers),this.options.group_followers=this.task$.value.group_followers||[]):(this.options.followers=[],this.options.group_followers=[],this.options.everything=!1)}ngOnInit(){this.inputtedTask?this.task$.next(this.inputtedTask):this.task$=this.viewTaskService.task,this.task$.value&&this.setTask()}ngAfterViewInit(){this.focus()}setTask(){this.currentUserId=this.sharedData.currentUser.value.id,this.options.newTitle=this.copyName||this.task$.value.name,this.options.project=this.sharedData.compatCurrentProject,this.options.project=this.options.project||this.space,this.options.category=this.task$.value.category,this.options.subcategory=this.task$.value.subcategory,this.setMembers()}keyDown(e){e.which===s.a.ENTER&&this.options.newTitle&&this.options.newTitle.trim()&&this.copyTask()}setAllOptions(e){this.options.subtask=e,this.options.attachment=e,this.options.comment=e,this.options.commentAssigned=e,this.options.commentAttachment=e,this.options.oldSubtaskAssignees=e,this.options.oldStatus=e,this.options.oldTags=e,this.options.oldDueDate=e,this.options.checklists=e,this.options.recurring=e,this.options.dependencies=e,this.options.customFields=e,this.options.timeEstimate=e}setMembers(){this.store.pipe(Object(c.select)(Object(a.h)(this.options.subcategory.id,this.options.category.id,this.options.project?this.options.project.id:this.task$.value.project_id)),Object(r.a)(1)).subscribe(e=>{this.options.oldAssignees&&(this.options.assignees=this.task$.value.assignees,this.options.group_assignees=this.task$.value.group_assignees),this.options.oldFollowers&&(this.options.followers=this.task$.value.followers,this.options.group_followers=this.task$.value.group_followers||[]),this.assigneeList=e,this.watcherList=e.filter(e=>e.user.id!==this.currentUserId),this.options.assignees=this.filterMembers(this.options.assignees),this.options.followers=this.filterMembers(this.options.followers)})}filterMembers(e){return e?e.filter(e=>this.assigneeList.find(t=>t.user.id===e.id)):[]}toggleOptionEverything(){this.optionEverything=!this.optionEverything}changeOption(e,t){return this.options.everything?(this.options.everything=!1,this.setAllOptions(!0),this.options[t]=!1,!1):(this.options[t]=!this.options[t],!0)}setAssignees(e){this.options.assignees=e,this.options.oldAssignees=!1}setGroupAssignees(e){this.options.group_assignees=e,this.options.oldAssignees=!1}setFollowers(e){this.options.followers=e,this.options.oldFollowers=!1}setGroupFollowers(e){this.options.group_followers=e,this.options.oldFollowers=!1}removeAssignee(e){this.setAssignees((this.options.assignees||[]).filter(t=>t.id!==e.id))}removeGroupAssignee(e){this.setGroupAssignees((this.options.group_assignees||[]).filter(t=>t.id!==e.id))}removeFollower(e){this.setFollowers((this.options.followers||[]).filter(t=>t.id!==e.id))}removeGroupFollower(e){this.setGroupFollowers((this.options.group_followers||[]).filter(t=>t.id!==e.id))}selectCategory(e){this.options.project=e.project,this.options.category=e.category,this.options.subcategory=e.subcategory,this.setMembers()}copyTask(){this.onTaskCopy.emit(this.options)}focus(){setTimeout(()=>{this.taskNameInput&&this.taskNameInput.nativeElement.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(d.a),o.Wb(u.a),o.Wb(c.Store))},e.\u0275cmp=o.Qb({type:e,selectors:[["task-copy"]],viewQuery:function(e,t){if(1&e&&o.jd(g,3),2&e){let e;o.Qc(e=o.rc())&&(t.taskNameInput=e.first)}},inputs:{inputtedTask:"inputtedTask",space:"space",copyName:"copyName",bulkCopy:"bulkCopy",atLeastOneTaskIncludesSubtasks:"atLeastOneTaskIncludesSubtasks"},outputs:{onTaskCopy:"onTaskCopy"},decls:104,vars:111,consts:function(){let e,t,i,o,n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k;return e=$localize`:@@cu-task-copy__items-to-copy-question␟5a3f8334ac472f1f8f977fa3927595e8b1da6f1e␟2118911353564521366: What do you want to copy? `,t=$localize`:@@common_everything␟c2547639d171646544477757e1dc6b1667e7efcb␟4607865557250393326: Everything `,i=$localize`:@@cu-task-copy__form-label_activity-and-comments␟c2c3a6cd1f3e1b10b54d4f6a5ce55e494562fc45␟5371784055470984920: Activity & Comments `,o=$localize`:@@common_assigned-comments␟50ce98c5957daf2be62bdd48e044f6a654aa5480␟2329293448995752109: Assigned comments `,n=$localize`:@@common_attachments␟26e09eb72407251e692ee0b2972f57992f1b31ec␟2577828673792813851: Attachments `,s=$localize`:@@common_checklists␟6bca1a52beee8db869e9826df5d75d08fb5a6a9b␟8362877679796500847: Checklists `,c=$localize`:@@common_comments␟8ee8efac7c68c44894636eb636d9157d0ca4002b␟315113935540324284: Comments `,a=$localize`:@@common_comment-attachments␟2668ff6f6de91b4b0773bf251f3e28a785704803␟3377277455996613207: Comment attachments `,r=$localize`:@@common_custom-fields␟9ae9a74ed936df647c4acfbb0c8009f8cb6416ab␟4104549870774704741: Custom Fields `,l=$localize`:@@common_dependencies␟51aabcddba7b89928720eb574fa11a043e0cebb7␟6111377032903299283: Dependencies `,d=$localize`:@@common_due-date␟690efa5254b96608e7226d0eb2a58cda02288b3c␟5816399034882077866: Due date `,u=$localize`:@@cu-task-copy__checkbox-label_keep-task-status␟3d5a42803912ffb65327d689afa4ee1083e47f92␟7368317060902112487: Keep Task Status `,m=$localize`:@@common_recurring-settings␟df151bfce1d8f5f606cab9d7936addf3f656d529␟4977499454180482883: Recurring settings `,p=$localize`:@@common_tags␟ecf7007c2842cc26a7b91d08d48c7a4f5f749fb3␟8239788759152381468: Tags `,h=$localize`:@@cu-task-copy__task-copy_input-copy-assignees␟1f8e0a168d88f260b235fbfe7a2a5671e3482b4c␟392412126595660772: Copy assignees `,f=$localize`:@@cu-task-copy__task-copy_input-copy-watchers␟7491552142e114046a10329a584b98aa2feccd17␟4602071834489183948: Copy watchers `,b=$localize`:@@common_copy-task␟79bca32626c87763c41403a4863ab1cc126dea14␟4417486670402024751: Duplicate task `,g=$localize`:@@common_new-task-name␟528cf0b352b9e9cfa3381f080629c5a5d3ff89cc␟1662978815130639617: New task name `,_=$localize`:@@cu-task-copy__task-copy_input-task-name␟4a6c4c2224769f9941a6eafe4374a9aae2dd52dd␟1088788809315637776:Enter task na﻿me`,v=$localize`:@@common_subtasks␟94f13ae99a4149a9b51230e5f7a0f7ec296a8541␟1284483228946453764: Subtasks `,k=$localize`:@@common_subtask-assignees␟830f4595810c4f2305e408df7ef93fc2b18d289c␟884827823073845090: Subtask assignees `,[[1,"task-copy"],["class","task-copy__input-block",4,"ngIf"],[1,"task-copy__options-block"],[1,"task-copy__options-column"],[1,"task-copy__options-column-title"],e,[1,"cu-checkbox"],["type","checkbox","name","checkbox_everything",1,"cu-checkbox__input",3,"checked","click"],[1,"cu-checkbox__label","task-copy_checkbox-label"],t,["type","checkbox","name","checkbox_activity",1,"cu-checkbox__input",3,"checked","click"],i,["type","checkbox","name","checkbox_comment_assigned",1,"cu-checkbox__input",3,"checked","click"],o,["type","checkbox","name","checkbox_attachment",1,"cu-checkbox__input",3,"checked","click"],n,["type","checkbox","name","checkbox_checklist",1,"cu-checkbox__input",3,"checked","click"],s,["type","checkbox","name","checkbox_comment",1,"cu-checkbox__input",3,"checked","click"],c,["type","checkbox","name","checkbox_comment_attachment",1,"cu-checkbox__input",3,"checked","click"],a,["type","checkbox","name","checkbox_subtask",1,"cu-checkbox__input",3,"checked","click"],r,["type","checkbox","name","checkbox_dependencies",1,"cu-checkbox__input",3,"checked","click"],l,["type","checkbox","name","checkbox_tags",1,"cu-checkbox__input",3,"checked","click"],d,["type","checkbox","name","checkbox_status",1,"cu-checkbox__input",3,"checked","click"],u,["type","checkbox","name","checkbox_recurring",1,"cu-checkbox__input",3,"checked","click"],m,["class","cu-checkbox",4,"ngIf"],p,[1,"task-copy__users-item"],[1,"task-copy__users-item-border"],[1,"task-copy__title"],["type","checkbox","name","checkbox_subtask",1,"cu-checkbox__input",3,"ngModel","ngModelChange"],h,[3,"users","userGroups","selectedUsers","selectedUserGroups","showUnassign","multiChoice","onChange","onUserGroupsChanged"],[3,"users","userGroups","assignIcon","multiChoice","showDropdown","avatarSize","showUserRemover","onUserRemove","onUserGroupRemove"],f,[3,"users","userGroups","selectedUsers","selectedUserGroups","multiChoice","modifier","showUnassign","onChange","onUserGroupsChanged"],[3,"users","userGroups","showDropdown","watcherIcon","showUserRemover","avatarSize","onUserRemove","onUserGroupRemove"],["class","task-copy__location-block",4,"ngIf"],[1,"task-copy__button-block"],[1,"cu-btn",3,"click"],b,[1,"task-copy__input-block"],g,["type","text","placeholder",_,1,"cu-form__input","task-copy__input",3,"ngModel","ngModelChange","keydown"],["taskNameInput",""],v,["type","checkbox","name","checkbox_subtask",1,"cu-checkbox__input",3,"checked","disabled","click"],k,[1,"task-copy__location-block"],[1,"task-copy__category-list",3,"selectedCategoryId","selectedSubcategoryId","isFocusOnSearchInput","onSelect"]]},template:function(e,t){if(1&e&&(o.cc(0,"div",0),o.bd(1,_,5,1,"div",1),o.cc(2,"div",2),o.cc(3,"div",3),o.cc(4,"div",4),o.gc(5,5),o.bc(),o.cc(6,"div",6),o.cc(7,"label"),o.cc(8,"input",7),o.qc("click",function(){return t.toggleOptionEverything()}),o.bc(),o.cc(9,"div",8),o.gc(10,9),o.bc(),o.bc(),o.bc(),o.cc(11,"div",6),o.cc(12,"label"),o.cc(13,"input",10),o.qc("click",function(e){return t.changeOption(e,"activity")}),o.bc(),o.cc(14,"div",8),o.gc(15,11),o.bc(),o.bc(),o.bc(),o.cc(16,"div",6),o.cc(17,"label"),o.cc(18,"input",12),o.qc("click",function(e){return t.changeOption(e,"commentAssigned")}),o.bc(),o.cc(19,"div",8),o.gc(20,13),o.bc(),o.bc(),o.bc(),o.cc(21,"div",6),o.cc(22,"label"),o.cc(23,"input",14),o.qc("click",function(e){return t.changeOption(e,"attachment")}),o.bc(),o.cc(24,"div",8),o.gc(25,15),o.bc(),o.bc(),o.bc(),o.cc(26,"div",6),o.cc(27,"label"),o.cc(28,"input",16),o.qc("click",function(e){return t.changeOption(e,"checklists")}),o.bc(),o.cc(29,"div",8),o.gc(30,17),o.bc(),o.bc(),o.bc(),o.cc(31,"div",6),o.cc(32,"label"),o.cc(33,"input",18),o.qc("click",function(e){return t.changeOption(e,"comment")}),o.bc(),o.cc(34,"div",8),o.gc(35,19),o.bc(),o.bc(),o.bc(),o.cc(36,"div",6),o.cc(37,"label"),o.cc(38,"input",20),o.qc("click",function(e){return t.changeOption(e,"commentAttachment")}),o.bc(),o.cc(39,"div",8),o.gc(40,21),o.bc(),o.bc(),o.bc(),o.cc(41,"div",6),o.cc(42,"label"),o.cc(43,"input",22),o.qc("click",function(e){return t.changeOption(e,"customFields")}),o.bc(),o.cc(44,"div",8),o.gc(45,23),o.bc(),o.bc(),o.bc(),o.cc(46,"div",6),o.cc(47,"label"),o.cc(48,"input",24),o.qc("click",function(e){return t.changeOption(e,"dependencies")}),o.bc(),o.cc(49,"div",8),o.gc(50,25),o.bc(),o.bc(),o.bc(),o.cc(51,"div",6),o.cc(52,"label"),o.cc(53,"input",26),o.qc("click",function(e){return t.changeOption(e,"oldDueDate")}),o.bc(),o.cc(54,"div",8),o.gc(55,27),o.bc(),o.bc(),o.bc(),o.cc(56,"div",6),o.cc(57,"label"),o.cc(58,"input",28),o.qc("click",function(e){return t.changeOption(e,"oldStatus")}),o.bc(),o.cc(59,"div",8),o.gc(60,29),o.bc(),o.bc(),o.bc(),o.cc(61,"div",6),o.cc(62,"label"),o.cc(63,"input",30),o.qc("click",function(e){return t.changeOption(e,"recurring")}),o.bc(),o.cc(64,"div",8),o.gc(65,31),o.bc(),o.bc(),o.bc(),o.bd(66,v,5,5,"div",32),o.vc(67,"async"),o.vc(68,"async"),o.bd(69,k,5,8,"div",32),o.vc(70,"async"),o.vc(71,"async"),o.cc(72,"div",6),o.cc(73,"label"),o.cc(74,"input",26),o.qc("click",function(e){return t.changeOption(e,"oldTags")}),o.bc(),o.cc(75,"div",8),o.gc(76,33),o.bc(),o.bc(),o.bc(),o.bc(),o.cc(77,"div",3),o.cc(78,"div",34),o.cc(79,"div",35),o.cc(80,"div",36),o.cc(81,"label"),o.cc(82,"input",37),o.qc("ngModelChange",function(e){return t.optionOldAssignees=e}),o.bc(),o.cc(83,"div",8),o.gc(84,38),o.bc(),o.bc(),o.bc(),o.cc(85,"cu-user-and-groups-list-dropdown",39),o.qc("onChange",function(e){return t.setAssignees(e)})("onUserGroupsChanged",function(e){return t.setGroupAssignees(e)}),o.vc(86,"async"),o.cc(87,"div"),o.cc(88,"cu-user-group",40),o.qc("onUserRemove",function(e){return t.removeAssignee(e)})("onUserGroupRemove",function(e){return t.removeGroupAssignee(e)}),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.cc(89,"div",34),o.cc(90,"div",35),o.cc(91,"div",36),o.cc(92,"label"),o.cc(93,"input",37),o.qc("ngModelChange",function(e){return t.optionOldFollowers=e}),o.bc(),o.cc(94,"div",8),o.gc(95,41),o.bc(),o.bc(),o.bc(),o.cc(96,"cu-user-and-groups-list-dropdown",42),o.qc("onChange",function(e){return t.setFollowers(e)})("onUserGroupsChanged",function(e){return t.setGroupFollowers(e)}),o.vc(97,"async"),o.cc(98,"div"),o.cc(99,"cu-user-group",43),o.qc("onUserRemove",function(e){return t.removeFollower(e)})("onUserGroupRemove",function(e){return t.removeGroupFollower(e)}),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.bc(),o.bd(100,y,4,3,"div",44),o.cc(101,"div",45),o.cc(102,"button",46),o.qc("click",function(){return t.copyTask()}),o.gc(103,47),o.bc(),o.bc(),o.bc()),2&e){let e=null,i=null;o.Ib(1),o.Dc("ngIf",!t.bulkCopy),o.Ib(7),o.Dc("checked",t.optionEverything),o.Ib(1),o.Ob("cu-checkbox_checked",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.activity),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.activity)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.commentAssigned),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.commentAssigned)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.attachment),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.attachment)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.checklists),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.checklists)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.comment),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.comment)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.commentAttachment),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.commentAttachment)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.customFields),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.customFields)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.dependencies),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.dependencies)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.oldDueDate),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.oldDueDate)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.oldStatus),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.oldStatus)("cu-checkbox_muted",t.optionEverything),o.Ib(4),o.Dc("checked",t.options.recurring),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.recurring)("cu-checkbox_muted",t.optionEverything),o.Ib(2),o.Dc("ngIf",(null==(e=o.wc(67,99,t.task$))||null==e.subtasks?null:e.subtasks.length)||(null==(e=o.wc(68,101,t.task$))?null:e.subtasks_count)||t.atLeastOneTaskIncludesSubtasks),o.Ib(3),o.Dc("ngIf",(null==(i=o.wc(70,103,t.task$))||null==i.subtasks?null:i.subtasks.length)||(null==(i=o.wc(71,105,t.task$))?null:i.subtasks_count)||t.atLeastOneTaskIncludesSubtasks),o.Ib(5),o.Dc("checked",t.options.oldTags),o.Ib(1),o.Ob("cu-checkbox_checked",t.options.oldTags)("cu-checkbox_muted",t.optionEverything),o.Ib(7),o.Dc("ngModel",t.optionOldAssignees),o.Ib(1),o.Ob("cu-checkbox_checked",t.optionOldAssignees),o.Ib(2),o.Dc("users",t.assigneeList)("userGroups",o.wc(86,107,t.userGroups$))("selectedUsers",t.options.assignees)("selectedUserGroups",t.options.group_assignees)("showUnassign",t.options.assignees.length||t.options.group_assignees.length)("multiChoice",null==t.options||null==t.options.project?null:t.options.project.multiple_assignees),o.Ib(3),o.Dc("users",t.options.assignees)("userGroups",t.options.group_assignees)("assignIcon",!0)("multiChoice",null==t.options||null==t.options.project?null:t.options.project.multiple_assignees)("showDropdown",!1)("avatarSize",38)("showUserRemover",!0),o.Ib(5),o.Dc("ngModel",t.optionOldFollowers),o.Ib(1),o.Ob("cu-checkbox_checked",t.optionOldFollowers),o.Ib(2),o.Dc("users",t.watcherList)("userGroups",o.wc(97,109,t.userGroups$))("selectedUsers",t.options.followers)("selectedUserGroups",t.options.group_followers)("multiChoice",!0)("modifier","cu-dropdown_left")("showUnassign",!1),o.Ib(3),o.Dc("users",t.options.followers)("userGroups",t.options.group_followers)("showDropdown",!1)("watcherIcon",!0)("showUserRemover",!0)("avatarSize",38),o.Ib(1),o.Dc("ngIf",!t.bulkCopy)}},directives:[m.q,p.b,p.p,p.s,h.a,f.a,p.c,b.a],pipes:[m.b],encapsulation:2}),e})()},obXZ:function(e,t,i){"use strict";e.exports=function(e){return n.test("number"==typeof e?o(e):e.charAt(0))};var o=String.fromCharCode,n=/\w/},pATm:function(e,t,i){"use strict";i.d(t,"a",function(){return R});var o=i("/qOb"),n=i("1G5W"),s=i("uDQY"),c=i("fXoL"),a=i("XNiG"),r=i("5b//"),l=i("AeD3"),d=i("jJW4"),u=i("xog/"),m=i("gBUK"),p=i("ofXK"),h=i("loh9"),f=i("UdVN"),b=i("EDFS"),g=i("NsZK"),_=i("XTWl");const v=["editorContainer"],k=["popover"],y=function(e){return{background:e}},w=function(e){return{"cu-tags-select__badge-icon-close_color-invert":e}};function x(e,t){if(1&e){const e=c.dc();c.cc(0,"div",9),c.cc(1,"div",10),c.qc("click",function(t){return c.Uc(e),c.uc(2).removeTag(t)}),c.bc(),c.bc()}if(2&e){const e=c.uc(2);c.Ib(1),c.Dc("ngStyle",c.Hc(2,y,e.solidBackgroundColor?"#fff":e.textColor))("ngClass",c.Hc(4,w,e.isLightColor))}}const I=function(e,t){return{"background-color":e,border:t}},T=function(e){return{color:e}},C=function(e){return{"cu-tags-select__name_color-invert":e}};function D(e,t){if(1&e&&(c.cc(0,"div",5),c.cc(1,"span",6),c.dd(2),c.bc(),c.cc(3,"div",7),c.dd(4),c.bc(),c.bd(5,x,2,6,"div",8),c.bc()),2&e){const e=c.uc();c.Ob("cu-tags-select__badge_readonly",e.readOnly),c.Dc("ngClass",e.modifier)("ngStyle",c.Ic(9,I,e.isDarkTheme||e.useDarkThemeStyle?e.textColor:e.rgba,e.needBorder?e.border:"none")),c.Ib(1),c.Dc("ngStyle",c.Hc(12,T,e.isDarkTheme||e.useDarkThemeStyle?"#fff":e.textColor))("ngClass",c.Hc(14,C,e.isLightColor)),c.Ib(1),c.fd(" ",e.name," "),c.Ib(2),c.ed(e.name),c.Ib(1),c.Dc("ngIf",!e.readOnly)}}const O=function(e){return{"cu-tags-select__badge-ellipsis-icon_color-invert":e}},S=function(e){return{fill:e}};function E(e,t){if(1&e&&c.Xb(0,"div",19),2&e){const e=c.uc(2);c.Dc("ngClass",c.Hc(2,O,e.isLightColor))("ngStyle",c.Hc(4,S,e.isDarkTheme||e.useDarkThemeStyle?"#fff":e.textColor))}}const P=function(e,t){return{"cu-tags-select__badge-icon-close_color-invert":e,"cu-tags-select__badge-icon-close_color-dark":t}};function j(e,t){if(1&e){const e=c.dc();c.cc(0,"div",20),c.qc("click",function(t){return c.Uc(e),c.uc(2).removeTag(t)}),c.bc()}if(2&e){const e=c.uc(2);c.Dc("ngStyle",c.Hc(2,y,e.solidBackgroundColor?"#fff":e.textColor))("ngClass",c.Ic(4,P,e.needTextColorInvert,(e.isDarkTheme||e.useDarkThemeStyle)&&e.isLightColor))}}function A(e,t){if(1&e){const e=c.dc();c.cc(0,"div",11,12),c.cc(2,"div",13),c.cc(3,"div",14),c.dd(4),c.bc(),c.cc(5,"div",15),c.dd(6),c.bc(),c.cc(7,"cu-tags-menu",16),c.qc("cancelDelete",function(){return c.Uc(e),c.uc().cancelDelete()})("startRename",function(){return c.Uc(e),c.uc().rename()})("colorSelected",function(t){return c.Uc(e),c.uc().colorPickerChange(t)})("saveColorChange",function(){return c.Uc(e),c.uc().handleColorToggle()})("startDelete",function(){return c.Uc(e),c.uc().openDeleteConfirmModal()}),c.bd(8,E,1,6,"div",17),c.bc(),c.bd(9,j,1,7,"div",18),c.bc(),c.bc()}if(2&e){const e=c.uc(),t=c.Rc(6);c.Ob("cu-tags-select__badge_readonly",e.readOnly)("cu-tags-select__badge-dark-theme",e.isDarkTheme||e.useDarkThemeStyle),c.Dc("popover",t)("ngStyle",c.Ic(23,I,e.isDarkTheme||e.useDarkThemeStyle?e.textColor:e.rgba,e.needBorder?e.border:"none"))("ngClass",e.modifier),c.Ib(3),c.Dc("ngClass",c.Hc(26,C,e.isLightColor))("ngStyle",c.Hc(28,T,e.isDarkTheme||e.useDarkThemeStyle?"#fff":e.textColor)),c.Ib(1),c.fd(" ",e.name," "),c.Ib(1),c.Dc("cuTooltip",e.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipDelay",300),c.Ib(1),c.fd(" ",e.name," "),c.Ib(1),c.Dc("disabled",!e.spaceAccess||e.isGuest)("tagName",e.tag.name)("canDelete",!e.tag.deleteRestricted)("hideDelete",e.hideDelete)("tagColor",e.color)("allSpaces",e.allSpaces)("hideEdit",!e.spaceId&&e.hideEditOnAllSpaces),c.Ib(1),c.Dc("ngIf",e.spaceAccess&&!e.readOnly&&!e.isGuest),c.Ib(1),c.Dc("ngIf",!e.readOnly)}}function $(e,t){1&e&&(c.cc(0,"div",21),c.gc(1,22),c.bc())}const U=function(e){return{position:e}};let R=(()=>{class e{constructor(e,t,i,o,n,s,l){this.dataService=e,this.resolver=t,this.sharedData=i,this.helpersService=o,this.renderer=n,this.changeDetector=s,this.colorService=l,this.PRESET_COLORS=r.b.filter(e=>"#fff"!==e),this.rgba="",this.textColor="",this.needTextColorInvert=!1,this.renaming=!1,this.isLightColor=!1,this.isVeryDarkColor=!1,this.needBorder=!1,this.modifier="",this.color="",this.solidBackgroundColor=!1,this.spaceId="",this.viewOnly=!1,this.readOnly=!1,this.truncate=!1,this.hideDelete=!1,this.showTags=3,this.allSpaces=!1,this.spaceAccess=!0,this.showFilter=!1,this.preventClick=!1,this.isGuest=!1,this.availableTags=[],this.inDropdown=!0,this.hideEditOnAllSpaces=!1,this.useDarkThemeStyle=!1,this.onDelete=new c.o,this.onRename=new c.o,this.onColorChange=new c.o,this.onOpenDeleteConfirm=new c.o,this.onCancel=new c.o,this.onLoad=new c.o,this.onError=new c.o,this.onFilterTag=new c.o,this.renameActive=new c.o,this.destroy$=new a.a}ngOnInit(){}ngOnChanges(e){e.color&&e.color.currentValue&&(this.savedColor=e.color.currentValue,this.textColor=this.getTextColor(e.color.currentValue),this.rgba=this.helpersService.hexToRGB(e.color.currentValue),this.isVeryDarkColor=this.colorService.isDarkColor(this.textColor,60)),void 0!==e.isDarkTheme&&void 0!==e.isDarkTheme.currentValue&&(this.savedColor=this.color,this.textColor=this.getTextColor(this.color),this.rgba=this.helpersService.hexToRGB(this.color))}ngAfterViewInit(){this.tag.new&&(this.tag=Object.assign(Object.assign({},this.tag),{new:void 0}))}ngOnDestroy(){this.keydownListener&&this.keydownListener(),this.clickListener&&this.clickListener(),this.destroy$.next(),this.destroy$.unsubscribe()}checkRgb(e){return!!RegExp("rgb").test(e)}rgb2hex(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}removeTag(e){(e=e.event||e).preventDefault(),e.stopPropagation(),this.onDelete.emit(this.tag)}filter(){this.onFilterTag.emit(this.tag)}handleColorToggle(){this.savedColor!==this.color&&this.onColorChange.emit({tag:this.tag,newColor:this.color||"#000000"})}colorPickerChange(e){this.color=this.checkAlpha(e),this.textColor=this.getTextColor(e),this.rgba=this.helpersService.hexToRGB(e),this.isVeryDarkColor=this.colorService.isDarkColor(this.textColor,60),this.changeDetector.detectChanges()}rename(){this.onLoad.emit();const e=this.resolver.resolveComponentFactory(s.a);this.editor=this.editorContainer.createComponent(e),this.editor.instance.name=this.tag.name,this.editor.instance.modifier="nav-editor_tags",this.renameActive.emit(!0),this.editor.instance.onAction.pipe(Object(n.a)(this.editor.instance.destroy$)).subscribe(e=>{"save"===e.action?this.save(e):"cancel"===e.action&&this.cancel(),this.renameActive.emit(!1)}),this.keydownListener=this.renderer.listen("document","keydown",e=>{this.popover.hide(),this.onError.emit(!1),e.which===o.a.ESCAPE&&this.cancel()}),this.renaming=!0}cancelDelete(){this.onCancel.emit()}save(e){let t=e.name;t&&t.length&&(t=t.trim().toLowerCase()),t.length&&(this.tag.name.toLowerCase()!==t?(this.availableTags||[]).find(e=>e.name.toLowerCase()===t)?(this.popover.show(),this.onError.emit(!0),this.clickListener=this.renderer.listen("document","click",()=>{this.popover.hide(),this.onError.emit(!1),this.clickListener&&this.clickListener()})):(this.onRename.emit({tag:this.tag,newName:t}),this.cancel()):this.cancel())}cancel(){this.renaming=!1,this.editorContainer.remove(),this.popover.hide(),this.onError.emit(!1),this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}checkAlpha(e){if(-1===e.indexOf("rgb"))return e;const t=e.split(","),i=t[t.length-1].split("");i.splice(i.length-1,1);let o=parseFloat(i.join(""));return o<.4&&(o=.4),t[t.length-1]=o+")",t.join(",")}getTextColor(e){let t=e;return this.checkRgb(e)&&(t=this.rgb2hex(e)),this.colorService.isLightColor(t,195)?(this.isLightColor=!0,this.isDarkTheme?(t=e,this.needBorder=!1):(this.needBorder=!0,this.border="1px solid "+this.colorService.darkenColor(t,15),t=this.colorService.darkenColor(t,15))):(this.isLightColor=!1,this.needBorder=!1,this.needTextColorInvert=!(this.colorService.isLightColor(t,128)||!this.isDarkTheme)),t}openDeleteConfirmModal(){this.onOpenDeleteConfirm.emit({tag:this.tag})}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(l.a),c.Wb(c.j),c.Wb(d.a),c.Wb(u.b),c.Wb(c.H),c.Wb(c.h),c.Wb(m.a))},e.\u0275cmp=c.Qb({type:e,selectors:[["cu-tags-badge"]],viewQuery:function(e,t){if(1&e&&(c.jd(v,3,c.U),c.jd(k,1)),2&e){let e;c.Qc(e=c.rc())&&(t.editorContainer=e.first),c.Qc(e=c.rc())&&(t.popover=e.first)}},hostAttrs:[1,"cu-tags-badge"],inputs:{modifier:"modifier",tag:"tag",length:"length",name:"name",color:"color",solidBackgroundColor:"solidBackgroundColor",taskId:"taskId",spaceId:"spaceId",viewOnly:"viewOnly",readOnly:"readOnly",truncate:"truncate",hideDelete:"hideDelete",showTags:"showTags",index:"index",allSpaces:"allSpaces",spaceAccess:"spaceAccess",isDarkTheme:"isDarkTheme",showFilter:"showFilter",vc:"vc",preventClick:"preventClick",isGuest:"isGuest",availableTags:"availableTags",inDropdown:"inDropdown",hideEditOnAllSpaces:"hideEditOnAllSpaces",useDarkThemeStyle:"useDarkThemeStyle"},outputs:{onDelete:"onDelete",onRename:"onRename",onColorChange:"onColorChange",onOpenDeleteConfirm:"onOpenDeleteConfirm",onCancel:"onCancel",onLoad:"onLoad",onError:"onError",onFilterTag:"onFilterTag",renameActive:"renameActive"},features:[c.Gb],decls:7,vars:7,consts:function(){let e;return e=$localize`:@@errors_tag-existing␟9f1acd497ac22c7a11571db0608c3aaf0bbb215b␟1936758854694364572: Whoops! That tag already exists. `,[[1,"cu-tags-badge__inner",3,"ngStyle","cuPreventDefault"],["class","cu-tags-select__badge",3,"ngClass","cu-tags-select__badge_readonly","ngStyle",4,"ngIf"],["class","cu-tags-select__badge","placement","right","container","body","triggers","",3,"cu-tags-select__badge_readonly","cu-tags-select__badge-dark-theme","popover","ngStyle","ngClass",4,"ngIf"],["editorContainer",""],["error",""],[1,"cu-tags-select__badge",3,"ngClass","ngStyle"],[1,"cu-tags-select__name",3,"ngStyle","ngClass"],[1,"cu-tags-select__name-shadow"],["class","cu-tags-select__pad",4,"ngIf"],[1,"cu-tags-select__pad"],["icon","close-bold",1,"cu-tags-select__badge-icon-close","cu-tags-select__badge-icon-close_semicircle",3,"ngStyle","ngClass","click"],["placement","right","container","body","triggers","",1,"cu-tags-select__badge",3,"popover","ngStyle","ngClass"],["popover","bs-popover"],[1,"cu-tags-select__click"],[1,"cu-tags-select__name",3,"ngClass","ngStyle"],[1,"cu-tags-select__name-shadow",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipDelay"],["cuPreventDefault","",1,"cu-tags-select__badge-ellipsis",3,"disabled","tagName","canDelete","hideDelete","tagColor","allSpaces","hideEdit","cancelDelete","startRename","colorSelected","saveColorChange","startDelete"],["class","cu-tags-select__badge-ellipsis-icon","icon","ellipsis",3,"ngClass","ngStyle",4,"ngIf"],["class","cu-tags-select__badge-icon-close","icon","close-bold",3,"ngStyle","ngClass","click",4,"ngIf"],["icon","ellipsis",1,"cu-tags-select__badge-ellipsis-icon",3,"ngClass","ngStyle"],["icon","close-bold",1,"cu-tags-select__badge-icon-close",3,"ngStyle","ngClass","click"],[1,"cu-error-popover"],e]},template:function(e,t){1&e&&(c.cc(0,"div",0),c.bd(1,D,6,16,"div",1),c.bd(2,A,10,30,"div",2),c.Xb(3,"div",null,3),c.bc(),c.bd(5,$,2,0,"ng-template",null,4,c.cd)),2&e&&(c.Dc("ngStyle",c.Hc(5,U,t.renaming?"relative":""))("cuPreventDefault",t.preventClick||t.renaming),c.Jb("type","badge"),c.Ib(1),c.Dc("ngIf",t.viewOnly&&(!t.truncate||t.length&&t.index<t.showTags||t.length&&t.length===t.showTags)),c.Ib(1),c.Dc("ngIf",!t.viewOnly))},directives:[p.t,h.a,p.q,p.o,f.a,b.c,g.a,_.a],styles:[".cu-tags-badge,.cu-tags-badge__inner{min-width:0}"],encapsulation:2,changeDetection:0}),e})()},pMok:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("ofXK"),n=i("3Pt+"),s=i("bFKe"),c=i("K0KF"),a=i("/SUI"),r=i("gb9A"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[o.c,s.b,n.l,c.a,a.a,r.a]]}),e})()},paIP:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var o=i("pLZG"),n=i("lJxs"),s=i("2Vo4"),c=i("itXk"),a=i("fFxs"),r=i("jJQC"),l=i("fXoL"),d=i("ofXK");function u(e,t){if(1&e&&(l.cc(0,"div",2),l.cc(1,"div",3),l.dd(2),l.bc(),l.bc()),2&e){const e=l.uc();l.Ib(2),l.fd(" ",null==e.email||null==e.email.full_data?null:e.email.full_data.subject," ")}}function m(e,t){if(1&e&&(l.cc(0,"div",7),l.dd(1),l.bc()),2&e){const e=l.uc(2).$implicit;l.Ib(1),l.fd(" ",e,": ")}}function p(e,t){1&e&&(l.cc(0,"div",11),l.dd(1," , "),l.bc())}function h(e,t){1&e&&(l.cc(0,"div",12),l.dd(1," to "),l.bc())}function f(e,t){if(1&e&&(l.cc(0,"div",12),l.dd(1),l.bc()),2&e){const e=l.uc().$implicit;l.Ib(1),l.fd("<",e.email,">")}}function b(e,t){if(1&e&&(l.ac(0),l.bd(1,p,2,0,"div",8),l.bd(2,h,2,0,"div",9),l.cc(3,"div",10),l.dd(4),l.bc(),l.bd(5,f,2,1,"div",9),l.Zb()),2&e){const e=t.$implicit,i=t.index,o=l.uc(2).$implicit,n=l.uc(2);l.Ib(1),l.Dc("ngIf",i>0),l.Ib(1),l.Dc("ngIf",n.shortened&&o===n.RecipientType.To),l.Ib(1),l.Ob("cu-email-info__name_has-email",!!e.email),l.Ib(1),l.fd(" ",e.name," "),l.Ib(1),l.Dc("ngIf",e.email)}}function g(e,t){if(1&e&&(l.cc(0,"div",2),l.bd(1,m,2,1,"div",6),l.bd(2,b,6,6,"ng-container",5),l.bc()),2&e){const e=l.uc().$implicit,t=l.uc().ngIf,i=l.uc();l.Ib(1),l.Dc("ngIf",e!==i.RecipientType.From&&!i.shortened),l.Ib(1),l.Dc("ngForOf",t[e])("ngForTrackBy",i.trackByEmail)}}function _(e,t){if(1&e&&(l.ac(0),l.bd(1,g,3,3,"div",0),l.Zb()),2&e){const e=t.$implicit,i=l.uc().ngIf;l.Ib(1),l.Dc("ngIf",null==i[e]?null:i[e].length)}}function v(e,t){if(1&e&&(l.cc(0,"div",2),l.cc(1,"div",7),l.dd(2,"Subject:"),l.bc(),l.cc(3,"div",13),l.dd(4),l.bc(),l.bc()),2&e){const e=l.uc(2);l.Ib(4),l.ed(null==e.email||null==e.email.full_data?null:e.email.full_data.subject)}}function k(e,t){if(1&e){const e=l.dc();l.cc(0,"div",4),l.qc("click",function(){l.Uc(e);const t=l.uc();return t.showSubjectAtTop?null:t.toggleDisplay()}),l.bd(1,_,2,1,"ng-container",5),l.bd(2,v,5,1,"div",0),l.vc(3,"async"),l.bc()}if(2&e){const e=l.uc();l.Ob("cu-email-info__container-to",e.shortened)("cu-email-info__container_noclick",e.showSubjectAtTop),l.Ib(1),l.Dc("ngForOf",e.peopleTypes)("ngForTrackBy",e.trackByValue),l.Ib(1),l.Dc("ngIf",l.wc(3,7,e.showEverything$)&&(null==e.email||null==e.email.full_data?null:e.email.full_data.subject))}}let y=(()=>{class e{constructor(){this.peopleTypes=[a.g.From,a.g.To,a.g.Cc,a.g.Bcc],this.RecipientType=a.g,this.email=null,this.shortened=!1,this.showSubjectAtTop=!1,this.showEverything$=new s.a(!1),this.emailData$=new s.a(this.email),this.displayData$=Object(c.a)([this.showEverything$,this.emailData$]).pipe(Object(o.a)(([e,t])=>!!t),Object(n.a)(([e,t])=>{if(e){const e=this.createWithNames(t.full_data[a.g.To],!0),i=this.createWithNames(t.full_data[a.g.From],!0),o=this.createWithNames(t.full_data[a.g.Cc],!0),n=this.createWithNames(t.full_data[a.g.Bcc],!0);return{[a.g.To]:e,[a.g.From]:i,[a.g.Cc]:o,[a.g.Bcc]:n}}{const e=this.createWithNames(t.full_data[a.g.To]),i=this.createWithNames(t.full_data[a.g.From],!this.shortened);return{[a.g.To]:e,[a.g.From]:i}}})),this.trackByValue=r.f,this.trackByEmail=Object(r.d)("email")}ngOnInit(){}createWithNames(e,t){return(e||[]).map(e=>t?{name:e.name||e.email,email:e.name?e.email:null}:{name:e.name||e.email})}toggleDisplay(){this.showEverything$.next(!this.showEverything$.value)}ngOnChanges(e){e.email&&this.emailData$.next(this.email)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Qb({type:e,selectors:[["cu-email-info"]],hostAttrs:[1,"cu-email-info"],inputs:{email:"email",shortened:"shortened",showSubjectAtTop:"showSubjectAtTop"},features:[l.Gb],decls:3,vars:4,consts:[["class","cu-email-info__row",4,"ngIf"],["class","cu-email-info__container",3,"cu-email-info__container-to","cu-email-info__container_noclick","click",4,"ngIf"],[1,"cu-email-info__row"],[1,"cu-email-info__top-subject"],[1,"cu-email-info__container",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-email-info__label",4,"ngIf"],[1,"cu-email-info__label"],["class","cu-email-info__text cu-email-info__text_comma",4,"ngIf"],["class","cu-email-info__text",4,"ngIf"],[1,"cu-email-info__name"],[1,"cu-email-info__text","cu-email-info__text_comma"],[1,"cu-email-info__text"],[1,"cu-email-info__subject"]],template:function(e,t){1&e&&(l.bd(0,u,3,1,"div",0),l.bd(1,k,4,9,"div",1),l.vc(2,"async")),2&e&&(l.Dc("ngIf",t.showSubjectAtTop&&(null==t.email||null==t.email.full_data?null:t.email.full_data.subject)),l.Ib(1),l.Dc("ngIf",l.wc(2,2,t.displayData$)))},directives:[d.q,d.p],pipes:[d.b],styles:['.cu-email-info{flex-grow:1;min-width:0}.cu-email-info__row{display:flex;align-content:center;padding:3px 0;flex-wrap:wrap}.cu-email-info__top-subject{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:16px;line-height:1;padding:3px 0 5px 7px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-info__top-subject{font-family:var(--global-font-support)}}.dark-theme .cu-email-info__top-subject{color:#d5d6d7}.cu-email-info__text{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;display:inline;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-info__text{font-family:var(--global-font-support)}}.dark-theme .cu-email-info__text{color:#828588}.cu-email-info__text_comma{margin-right:5px}.cu-email-info__name{word-break:break-word;overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;display:inline;font-weight:500;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-info__name{font-family:var(--global-font-support)}}.dark-theme .cu-email-info__name{color:#d5d6d7}.cu-email-info__name_has-email{margin-right:5px}.cu-email-info__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;margin-right:5px;display:inline;text-transform:capitalize;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-info__label{font-family:var(--global-font-support)}}.dark-theme .cu-email-info__label{color:#828588}.cu-email-info__subject{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;display:inline;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-info__subject{font-family:var(--global-font-support)}}.dark-theme .cu-email-info__subject{color:#d5d6d7}.cu-email-info__container{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;padding:5px 8px;border-radius:4px;display:inline-block;cursor:pointer}.cu-email-info__container:not(.cu-email-info__container_noclick):hover{background:rgba(233,235,240,.5)}.dark-theme .cu-email-info__container:not(.cu-email-info__container_noclick):hover{background:rgba(43,52,59,.5)}.cu-email-info__container_noclick{cursor:default}.cu-email-info__container-to{padding:0;cursor:default}.cu-email-info__container-to:hover,.dark-theme .cu-email-info__container-to:hover{background:transparent}'],encapsulation:2,changeDetection:0}),e})()},papW:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("f0Wu"),n=i.n(o),s=i("yR4P"),c=i("fXoL");let a=(()=>{class e{transform(e){const t=Object(s.j)(e);return t&&t.isSame(n()(),"day")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Vb({name:"isToday",type:e,pure:!0}),e})()},pc5n:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("ofXK"),n=i("W3VH"),s=i("KyjD"),c=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ub({type:e}),e.\u0275inj=c.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.a]]}),e})()},peMq:function(e,t,i){"use strict";i.d(t,"a",function(){return z});var o=i("fXoL"),n=i("c3rA"),s=i("l7P3"),c=i("dTHz"),a=i("jJQC"),r=i("lE2N"),l=i("iD/c"),d=i("jJW4"),u=i("ofXK"),m=i("NsZK"),p=i("UdVN"),h=i("WkAz");let f=(()=>{class e{transform(e,t,i){return"user"===e.type&&t[e.user.id]?null!==i&&i.id===e.id?$localize`:@@pipe_user-online-text--current-user:I'm online`:$localize`:@@pipe_user-online-text:${e.name} is online`:e.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Vb({name:"userOnlineText",type:e,pure:!0}),e})();const b=["tooltip"];function g(e,t){if(1&e&&(o.cc(0,"div",5),o.cc(1,"div",6),o.tc(),o.cc(2,"svg",7),o.cc(3,"g",8),o.Xb(4,"circle",9),o.Xb(5,"path",10),o.Xb(6,"circle",11),o.Xb(7,"circle",12),o.Xb(8,"path",13),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Dc("cuTooltip",e.userAddTooltip)("tooltipModifier",e.tooltipModifier)}}function _(e,t){if(1&e&&(o.cc(0,"div",5),o.cc(1,"div",14),o.tc(),o.cc(2,"svg",7),o.cc(3,"g",8),o.Xb(4,"circle",9),o.cc(5,"g",15),o.Xb(6,"path",16),o.Xb(7,"circle",17),o.Xb(8,"path",18),o.bc(),o.Xb(9,"circle",19),o.Xb(10,"path",20),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Dc("cuTooltip",e.userAddTooltip)("tooltipModifier",e.tooltipModifier)}}function v(e,t){if(1&e&&(o.cc(0,"div",5),o.cc(1,"div",21),o.tc(),o.cc(2,"svg",7),o.cc(3,"g",8),o.Xb(4,"circle",9),o.Xb(5,"path",10),o.Xb(6,"circle",11),o.Xb(7,"circle",12),o.Xb(8,"path",13),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Dc("cuTooltip",e.userAddTooltip)("tooltipModifier",e.tooltipModifier)}}function k(e,t){if(1&e&&(o.cc(0,"div",22),o.cc(1,"a",23),o.dd(2),o.bc(),o.bc()),2&e){const e=o.uc();o.Ob("no-permission",e.readOnly),o.Dc("cuTooltip",e.counterTooltip)("tooltipModifier",e.tooltipModifier),o.Ib(2),o.fd("+",e.moreCounter,"")}}const y=function(e,t){return{"cu-avatar_guest":e,"cu-avatar_online":t}},w=function(e){return{"background-image":e}};function x(e,t){if(1&e&&o.Xb(0,"div",30),2&e){const e=o.uc(2).$implicit,t=o.uc();o.Nb("cu-avatar cu-avatar_photo cu-avatar_bordered ",t.avatarModifier," cu-avatar_",t.avatarSize,""),o.Dc("ngClass",o.Ic(6,y,t.guestMap[e.user.id],t.onlineMap[e.user.id]))("ngStyle",o.Hc(9,w,"url("+e.user.profilePicture+")"))}}function I(e,t){1&e&&o.Xb(0,"div",33)}function T(e,t){if(1&e&&o.dd(0),2&e){const e=o.uc(3).$implicit;o.fd(" ",e.user.initials," ")}}const C=function(e){return{background:e}};function D(e,t){if(1&e&&(o.cc(0,"div",30),o.bd(1,I,1,0,"div",31),o.bd(2,T,1,1,"ng-template",null,32,o.cd),o.bc()),2&e){const e=o.Rc(3),t=o.uc(2).$implicit,i=o.uc();o.Nb("cu-avatar cu-avatar_lg cu-avatar_bordered ",i.avatarModifier," cu-avatar_initials cu-avatar_",i.avatarSize,""),o.Dc("ngClass",o.Ic(8,y,i.guestMap[t.user.id],i.onlineMap[t.user.id]))("ngStyle",o.Hc(11,C,"unassigned"===t.user.id?"#CBC9CF":t.user.color||i.DEFAULT_COLOR)),o.Ib(1),o.Dc("ngIf","unassigned"===t.user.id)("ngIfElse",e)}}function O(e,t){if(1&e){const e=o.dc();o.cc(0,"div",34),o.qc("click",function(t){o.Uc(e);const i=o.uc(2).$implicit;return o.uc().removeUser(i.user,t)}),o.bc()}}function S(e,t){if(1&e&&o.Xb(0,"div",35),2&e){const e=o.uc(2).$implicit,t=o.uc();o.Nb("cu-avatar cu-avatar_icon cu-avatar_bordered ",t.avatarModifier," cu-avatar_",t.avatarSize,""),o.Dc("ngStyle",o.Hc(5,C,e.user.color||t.DEFAULT_COLOR))}}function E(e,t){if(1&e&&(o.ac(0),o.bd(1,x,1,11,"div",27),o.bd(2,D,4,13,"div",27),o.bd(3,O,1,0,"div",28),o.bd(4,S,1,7,"div",29),o.Zb()),2&e){const e=o.uc().$implicit,t=o.uc();o.Ib(1),o.Dc("ngIf",e.user.profilePicture&&e.id!=t.selfUser.id),o.Ib(1),o.Dc("ngIf",!e.user.profilePicture&&e.id!=t.selfUser.id),o.Ib(1),o.Dc("ngIf",t.showUserRemover&&(!t.immutableUser||t.immutableUser.id!==e.user.id)&&e.id!=t.selfUser.id),o.Ib(1),o.Dc("ngIf",e.id===t.selfUser.id)}}function P(e,t){if(1&e){const e=o.dc();o.cc(0,"div",34),o.qc("click",function(t){o.Uc(e);const i=o.uc(2).$implicit;return o.uc().removeUserGroup(i.group,t)}),o.bc()}}function j(e,t){if(1&e&&(o.ac(0),o.Xb(1,"cu-user-group-avatar",36),o.bd(2,P,1,0,"div",28),o.Zb()),2&e){const e=o.uc().$implicit,t=o.uc();o.Ib(1),o.Dc("group",e.group)("avatarSize",t.avatarSize),o.Ib(1),o.Dc("ngIf",t.showUserRemover)}}function A(e,t){if(1&e&&(o.cc(0,"div",24,25),o.vc(2,"userOnlineText"),o.bd(3,E,5,4,"ng-container",26),o.bd(4,j,3,3,"ng-container",26),o.bc()),2&e){const e=t.$implicit,i=o.uc();o.Ob("no-permission",i.readOnly),o.Dc("cuTooltip",o.yc(2,7,e,i.onlineMap,i.currentUser))("tooltipModifier","user"===e.type&&i.onlineMap[e.user.id]?"tooltip_online":i.tooltipModifier)("tooltipDisabled",i.disableUserTooltip),o.Ib(3),o.Dc("ngIf","user"===e.type),o.Ib(1),o.Dc("ngIf","group"===e.type)}}function $(e,t){if(1&e&&(o.ac(0),o.Xb(1,"div",50),o.Zb()),2&e){const e=o.uc(3);o.Ib(1),o.Dc("icon",e.addAssigneeIcon)}}function U(e,t){1&e&&(o.tc(),o.cc(0,"svg",7),o.cc(1,"g",8),o.Xb(2,"circle",9),o.Xb(3,"path",51),o.Xb(4,"circle",11),o.Xb(5,"circle",12),o.Xb(6,"path",52),o.bc(),o.bc())}function R(e,t){if(1&e&&(o.cc(0,"div"),o.cc(1,"div",39),o.bd(2,$,2,1,"ng-container",40),o.bd(3,U,7,0,"ng-template",null,41,o.cd),o.bc(),o.cc(5,"div",42),o.tc(),o.cc(6,"svg",7),o.cc(7,"defs"),o.Xb(8,"circle",43),o.bc(),o.cc(9,"g",8),o.cc(10,"g",44),o.cc(11,"mask",45),o.Xb(12,"use",46),o.bc(),o.bc(),o.Xb(13,"circle",47),o.Xb(14,"path",48),o.Xb(15,"circle",49),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.Rc(4),t=o.uc(2);o.Nb("cu-avatar cu-avatar_lg cu-avatar_transparent cu-avatar__assign-mono ",t.avatarModifier," cu-avatar_",t.avatarSize,""),o.Ib(1),o.Dc("cuTooltip",t.userAddTooltip)("tooltipModifier",t.tooltipModifier),o.Ib(1),o.Dc("ngIf",t.addAssigneeIcon)("ngIfElse",e)}}function M(e,t){if(1&e&&(o.cc(0,"div"),o.cc(1,"div",39),o.cc(2,"div",53),o.Xb(3,"div",54),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc(2);o.Nb("cu-avatar cu-avatar_lg cu-avatar_bordered cu-avatar__assign-mono ",e.avatarModifier," cu-avatar_",e.avatarSize,""),o.Ib(1),o.Dc("cuTooltip",e.userAddTooltip)("tooltipModifier",e.tooltipModifier)}}function F(e,t){if(1&e&&(o.cc(0,"div",37),o.bd(1,R,16,8,"div",38),o.bd(2,M,4,6,"div",38),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",!e.useAltIcon),o.Ib(1),o.Dc("ngIf",e.useAltIcon)}}function L(e,t){if(1&e&&(o.cc(0,"div",55),o.cc(1,"div",56),o.tc(),o.cc(2,"svg",57),o.cc(3,"g",58),o.Xb(4,"circle",59),o.Xb(5,"path",60),o.bc(),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("tooltipModifier",e.tooltipModifier)}}let N=(()=>{class e{constructor(e){this.sharedData=e,this.DEFAULT_COLOR="#7b68ee",this.selfUser=c.j,this.trackById=Object(a.d)("id"),this.readOnly=!1,this.users=[],this.leadCounter=3,this.watcherIcon=!1,this.assignIcon=!1,this.hideAssignIcon=!1,this.showDropdown=!0,this.multiChoice=!1,this.canAssign=!0,this.showUserRemover=!1,this.userAddTooltip=$localize`:@@common_assign:Assign`,this.avatarModifier="cu-avatar_lg",this.avatarSize=38,this.userGroups=[],this.useAltIcon=!1,this.onUserRemove=new o.o,this.onUserGroupRemove=new o.o}ngOnInit(){}ngOnChanges(e){(e.users||e.leadCounter||e.currentUser||e.teamMembers||e.userGroups)&&this.updateData()}removeUser(e,t){t.stopPropagation(),t.preventDefault(),this.tooltip.removeTooltip(),this.onUserRemove.emit(e)}removeUserGroup(e,t){t.stopPropagation(),t.preventDefault(),this.tooltip.removeTooltip(),this.onUserGroupRemove.emit(e)}updateData(){if(!this.users&&!this.userGroups)return;const e=this.userGroups&&Array.isArray(this.userGroups)?this.userGroups:[],t=this.users&&Array.isArray(this.users)?this.users:[],i=[...e.map(e=>({id:e.id,type:"group",group:e,user:void 0,name:e.name})),...Object(r.a)(t,"id").map(e=>({id:e.id,type:"user",user:e,group:void 0,name:Object(l.b)(e,this.currentUser,this.teamMembers)}))],o=i.length===this.leadCounter+1?this.leadCounter+1:this.leadCounter;this.leadItems=i.slice(0,o).reverse().filter(Boolean),this.moreCounter=i.length-o,this.isShowCounter=this.moreCounter>0,this.counterTooltip=this.isShowCounter?i.slice(o).map(e=>e.name).join(", "):""}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(d.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-avatar-group"]],viewQuery:function(e,t){if(1&e&&o.jd(b,1),2&e){let e;o.Qc(e=o.rc())&&(t.tooltip=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-user-group",!0)},inputs:{readOnly:"readOnly",users:"users",leadCounter:"leadCounter",watcherIcon:"watcherIcon",assignIcon:"assignIcon",hideAssignIcon:"hideAssignIcon",showDropdown:"showDropdown",multiChoice:"multiChoice",canAssign:"canAssign",showUserRemover:"showUserRemover",tooltipModifier:"tooltipModifier",immutableUser:"immutableUser",userAddTooltip:"userAddTooltip",addAssigneeIcon:"addAssigneeIcon",avatarModifier:"avatarModifier",avatarSize:"avatarSize",disableUserTooltip:"disableUserTooltip",guestMap:"guestMap",onlineMap:"onlineMap",currentUser:"currentUser",teamMembers:"teamMembers",userGroups:"userGroups",useAltIcon:"useAltIcon"},outputs:{onUserRemove:"onUserRemove",onUserGroupRemove:"onUserGroupRemove"},features:[o.Gb],decls:7,vars:8,consts:function(){let e;return e=$localize`:@@common_watchers␟5410a33e3960f482ee3ce21cf8078dbac1559d13␟8928991855387678519:Watchers`,[["class","cu-user-group__item cu-hidden-print",3,"cuTooltip","tooltipModifier",4,"ngIf"],["class","cu-user-group__item",3,"no-permission","cuTooltip","tooltipModifier",4,"ngIf"],["class","cu-user-group__item",3,"no-permission","cuTooltip","tooltipModifier","tooltipDisabled",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-user-group__item cu-user-group__item_assign-mono cu-hidden-print",4,"ngIf"],["class","cu-user-group__item cu-user-group__item_watcher cu-hidden-print",4,"ngIf"],[1,"cu-user-group__item","cu-hidden-print",3,"cuTooltip","tooltipModifier"],[1,"cu-user-group__icon","cu-user-group__icon_grey"],["viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["fill","none","fill-rule","evenodd"],["cx","18","cy","18","r","17.5","stroke-dasharray","3",1,"cu-stroke"],["d","M10.35,25.65 C10.35,20.9555796 13.7836186,17.15 18,17.15 C22.2249783,17.15 25.65,20.9651318 25.65,\n            25.65","stroke-linecap","round",1,"cu-stroke"],["cx","18","cy","12.9","r","4.3",1,"cu-stroke"],["fill-rule","nonzero","cx","27.4","cy","27.4","r","7.7",1,"cu-fill"],["d","M28.2,26.5 L28.2,23.946088 C28.2,23.4873147 27.819442,23.1 27.35,23.1 C26.8772851,23.1 26.5,\n            23.4788065 26.5,23.946088 L26.5,26.5 L23.946088,26.5 C23.4873147,26.5 23.1,26.880558 23.1,27.35 C23.1,\n            27.8227149 23.4788065,28.2 23.946088,28.2 L26.5,28.2 L26.5,30.753912 C26.5,31.2126853 26.880558,31.6 27.35,\n            31.6 C27.8227149,31.6 28.2,31.2211935 28.2,30.753912 L28.2,28.2 L30.753912,28.2 C31.2126853,28.2 31.6,\n            27.819442 31.6,27.35 C31.6,26.8772851 31.2211935,26.5 30.753912,26.5 L28.2,26.5 Z","fill","#FFF","fill-rule","nonzero"],[1,"cu-user-group__icon"],["transform","translate(8.1 9.9)",1,"cu-stroke"],["d","M3.6 16.2C3.6 12.2235498 6.42768594 9 9.9 9 13.3793939 9 16.2 12.2316411 16.2 16.2M6.32989412 5.86608027C5.77082649 5.56660058 5.15158583 5.4 4.5 5.4 2.01977567 5.4 0 7.81766235 0 10.8M19.8 10.8C19.8 7.82373081 17.7852813 5.4 15.3 5.4 14.6488874 5.4 14.0295078 5.56661956 13.4700731 5.86633373","stroke-linecap","round"],["cx","9.9","cy","5.4","r","3.6"],["d","M12.6216451,3.04350737 C12.6073618,2.9310179 12.6,2.81636867 12.6,2.7 C12.6,1.20883117 13.8088312,\n            0 15.3,0 C16.7911688,0 18,1.20883117 18,2.7 C18,4.19116882 16.7911688,5.4 15.3,5.4 C14.5686355,\n            5.4 13.9051886,5.10920978 13.4189705,4.63694028 M6.38102953,4.63694028 C5.89481133,5.10920978 5.23136452,\n            5.4 4.5,5.4 C3.00883118,5.4 1.8,4.19116882 1.8,2.7 C1.8,1.20883117 3.00883118,0 4.5,0 C5.99116883,0 7.2,\n            1.20883117 7.2,2.7 C7.2,2.81636867 7.1926382,2.9310179 7.17835491,3.04350737"],["fill-rule","nonzero","cx","27.9","cy","27.9","r","8.1",1,"cu-fill"],["d","M28.8,27 L28.8,24.2958578 C28.8,23.810098 28.3970562,23.4 27.9,23.4 C27.3994783,23.4 27,\n          23.8010892 27,24.2958578 L27,27 L24.2958578,27 C23.810098,27 23.4,27.4029438 23.4,27.9 C23.4,\n          28.4005217 23.8010892,28.8 24.2958578,28.8 L27,28.8 L27,31.5041422 C27,31.989902 27.4029438,32.4 27.9,\n          32.4 C28.4005217,32.4 28.8,31.9989108 28.8,31.5041422 L28.8,28.8 L31.5041422,28.8 C31.989902,28.8 32.4,\n          28.3970562 32.4,27.9 C32.4,27.3994783 31.9989108,27 31.5041422,27 L28.8,27 Z","fill","#FFF","fill-rule","nonzero"],[1,"cu-user-group__icon","cu-user-group__icon_overlap"],[1,"cu-user-group__item",3,"cuTooltip","tooltipModifier"],[1,"cu-user-group__more","cu-user-group__more_lg"],[1,"cu-user-group__item",3,"cuTooltip","tooltipModifier","tooltipDisabled"],["tooltip","cuTooltip"],[4,"ngIf"],[3,"class","ngClass","ngStyle",4,"ngIf"],["class","cu-user-group__remove","icon","cu2-times",3,"click",4,"ngIf"],["icon","cu2-me",3,"class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],["icon","unassigned","class","cu-avatar__unassigned-icon",4,"ngIf","ngIfElse"],["userInitials",""],["icon","unassigned",1,"cu-avatar__unassigned-icon"],["icon","cu2-times",1,"cu-user-group__remove",3,"click"],["icon","cu2-me",3,"ngStyle"],[3,"group","avatarSize"],[1,"cu-user-group__item","cu-user-group__item_assign-mono","cu-hidden-print"],[3,"class",4,"ngIf"],[1,"cu-user-group__icon-mono",3,"cuTooltip","tooltipModifier"],[4,"ngIf","ngIfElse"],["assignMonoIconInline",""],[1,"cu-user-group__icon_no-active","icon"],["id","a","cx","17","cy","17","r","17"],["transform","translate(1 1)"],["id","b","fill","#fff"],[0,"xlink","href","#a"],["stroke","#CBC9CF","stroke-dasharray","3","cx","18","cy","18","r","17.5"],["d","M10.35,25.65 C10.35,20.9555796 13.7836186,17.15 18,17.15 C22.2249783,17.15 25.65,20.9651318 25.65,25.65","stroke","#CBC9CF","stroke-linecap","round"],["stroke","#CBC9CF","cx","18","cy","12.9","r","4.3"],[3,"icon"],["d","M10.35,25.65 C10.35,20.9555796 13.7836186,17.15 18,17.15 C22.2249783,17.15 25.65,20.9651318 25.65,\n              25.65","stroke-linecap","round",1,"cu-stroke"],["d","M28.2,26.5 L28.2,23.946088 C28.2,23.4873147 27.819442,23.1 27.35,23.1 C26.8772851,23.1 26.5,\n              23.4788065 26.5,23.946088 L26.5,26.5 L23.946088,26.5 C23.4873147,26.5 23.1,26.880558 23.1,27.35 C23.1,\n              27.8227149 23.4788065,28.2 23.946088,28.2 L26.5,28.2 L26.5,30.753912 C26.5,31.2126853 26.880558,31.6 27.35,\n              31.6 C27.8227149,31.6 28.2,31.2211935 28.2,30.753912 L28.2,28.2 L30.753912,28.2 C31.2126853,28.2 31.6,\n              27.819442 31.6,27.35 C31.6,26.8772851 31.2211935,26.5 30.753912,26.5 L28.2,26.5 Z","fill","#FFF","fill-rule","nonzero"],[1,"cu-user-group__icon-alt"],["icon","cu2-user"],[1,"cu-user-group__item","cu-user-group__item_watcher","cu-hidden-print"],["cuTooltip",e,1,"cu-user-group__watcher-purple",3,"tooltipModifier"],["width","36","height","36","viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd",1,"cu-stroke"],["cx","18","cy","18","r","17.5","stroke-dasharray","3"],["d","M18.2 21c-1.7 0-3-1.5-3-3 0-1.8 1.3-3 3-3s3 1.2 3 3c0 1.5-1.3 3-3 3m10.2-3.6C27 14 22.2 11 18.2 11c-4 0-8.7 3-10 6.5-.2.2-.2.4 0 .6 1.3 3.6 6 6.6 10 6.6s8.6-3 10-6.4c.2 0 .2-.2.2-.3v-.3-.3"]]},template:function(e,t){1&e&&(o.bd(0,g,9,2,"div",0),o.bd(1,_,11,2,"div",0),o.bd(2,v,9,2,"div",0),o.bd(3,k,3,5,"div",1),o.bd(4,A,5,11,"div",2),o.bd(5,F,3,2,"div",3),o.bd(6,L,6,1,"div",4)),2&e&&(o.Dc("ngIf",t.assignIcon&&!(null!=t.leadItems&&t.leadItems.length)&&!t.multiChoice),o.Ib(1),o.Dc("ngIf",t.assignIcon&&!(null!=t.leadItems&&t.leadItems.length)&&t.multiChoice),o.Ib(1),o.Dc("ngIf",t.assignIcon&&(null==t.leadItems?null:t.leadItems.length)&&t.multiChoice),o.Ib(1),o.Dc("ngIf",t.isShowCounter),o.Ib(1),o.Dc("ngForOf",t.leadItems)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",!(null!=t.leadItems&&t.leadItems.length)&&!t.watcherIcon&&!t.assignIcon&&t.canAssign&&!t.hideAssignIcon),o.Ib(1),o.Dc("ngIf",!(null!=t.leadItems&&t.leadItems.length)&&t.watcherIcon))},directives:[u.q,u.p,m.a,u.o,u.t,p.a,h.a],pipes:[f],styles:[""],changeDetection:0}),e})(),z=(()=>{class e{constructor(e){this.store=e,this.readOnly=!1,this.users=[],this.leadCounter=3,this.modifier="",this.watcherIcon=!1,this.assignIcon=!1,this.hideAssignIcon=!1,this.showDropdown=!0,this.multiChoice=!1,this.canAssign=!0,this.showUserRemover=!1,this.userAddTooltip=$localize`:@@common_assign:Assign`,this.avatarModifier="cu-avatar_lg",this.avatarSize=30,this.useAltIcon=!1,this.userGroups=[],this.onUserRemove=new o.o,this.onUserGroupRemove=new o.o,this.teamMembers$=this.store.select(n.getMembers),this.guestMap$=this.store.select(n.getGuestMap),this.currentUser$=this.store.select(n.getUser),this.onlineMap$=this.store.select(n.getUsersOnlineWhenOn)}ngOnChanges(e){if(e.users&&this.users){const e=this.users.filter(e=>e.group);e.length>0&&(this.userGroups=e,this.users=this.users.filter(e=>!e.group))}}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(s.Store))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-group"]],inputs:{readOnly:"readOnly",users:"users",disableUserTooltip:"disableUserTooltip",leadCounter:"leadCounter",modifier:"modifier",watcherIcon:"watcherIcon",assignIcon:"assignIcon",hideAssignIcon:"hideAssignIcon",showDropdown:"showDropdown",multiChoice:"multiChoice",canAssign:"canAssign",showUserRemover:"showUserRemover",tooltipModifier:"tooltipModifier",immutableUser:"immutableUser",userAddTooltip:"userAddTooltip",addAssigneeIcon:"addAssigneeIcon",avatarModifier:"avatarModifier",avatarSize:"avatarSize",useAltIcon:"useAltIcon",userGroups:"userGroups"},outputs:{onUserRemove:"onUserRemove",onUserGroupRemove:"onUserGroupRemove"},features:[o.Gb],decls:5,vars:32,consts:[[3,"readOnly","users","disableUserTooltip","leadCounter","watcherIcon","assignIcon","hideAssignIcon","ngClass","showDropdown","multiChoice","canAssign","showUserRemover","tooltipModifier","immutableUser","userAddTooltip","addAssigneeIcon","avatarModifier","avatarSize","teamMembers","guestMap","onlineMap","currentUser","userGroups","useAltIcon","onUserRemove","onUserGroupRemove"]],template:function(e,t){1&e&&(o.cc(0,"cu-avatar-group",0),o.qc("onUserRemove",function(e){return t.onUserRemove.emit(e)})("onUserGroupRemove",function(e){return t.onUserGroupRemove.emit(e)}),o.vc(1,"async"),o.vc(2,"async"),o.vc(3,"async"),o.vc(4,"async"),o.bc()),2&e&&o.Dc("readOnly",t.readOnly)("users",t.users)("disableUserTooltip",t.disableUserTooltip)("leadCounter",t.leadCounter)("watcherIcon",t.watcherIcon)("assignIcon",t.assignIcon)("hideAssignIcon",t.hideAssignIcon)("ngClass",t.modifier)("showDropdown",t.showDropdown)("multiChoice",t.multiChoice)("canAssign",t.canAssign)("showUserRemover",t.showUserRemover)("tooltipModifier",t.tooltipModifier)("immutableUser",t.immutableUser)("userAddTooltip",t.userAddTooltip)("addAssigneeIcon",t.addAssigneeIcon)("avatarModifier",t.avatarModifier)("avatarSize",t.avatarSize)("teamMembers",o.wc(1,24,t.teamMembers$))("guestMap",o.wc(2,26,t.guestMap$))("onlineMap",o.wc(3,28,t.onlineMap$))("currentUser",o.wc(4,30,t.currentUser$))("userGroups",t.userGroups)("useAltIcon",t.useAltIcon)},directives:[N,u.o],pipes:[u.b],encapsulation:2,changeDetection:0}),e})()},pqNe:function(e,t,i){e.exports=i.p+"nested-subtasks.2e9a3c89ce2c2c8eacfc.png"},pyet:function(e,t,i){"use strict";e.exports=function(e,t,i){for(var o,n,s,c,a=-1,r=t.length+1,l="";++a<r&&("\t"===(o=t.charAt(a))||" "===o);)l+=o;if("*"===o||"-"===o||"_"===o)for(n=o,l+=o,s=1,c="";++a<r;)if((o=t.charAt(a))===n)s++,l+=c+n,c="";else{if(" "!==o)return s>=3&&(!o||"\n"===o)?(l+=c,!!i||e(l)({type:"thematicBreak"})):void 0;c+=o}}},qJ3x:function(e,t,i){"use strict";i.d(t,"b",function(){return Ue}),i.d(t,"a",function(){return Re});var o=i("HEHP"),n=i("R0Ic"),s=i("fXoL"),c=i("RwZa"),a=i("Wk/N"),r=i("12P9"),l=i("o0vL"),d=i("fFxs"),u=i("tjT+"),m=i("QdBX"),p=i("SJHZ"),h=i("wa4x"),f=i("jJQC"),b=i("o7Ov"),g=i("c3rA"),_=i("mrTC"),v=i("lnp7"),k=i("RgJC"),y=i("hSRe"),w=i("I1n0"),x=i("2p4s"),I=i("9jGm"),T=i("pHS2"),C=i("Muja"),D=i("2Vo4"),O=i("itXk"),S=i("LRne"),E=i("PqYM"),P=i("XNiG"),j=i("xgIS"),A=i("zp1y"),$=i("lJxs"),U=i("pLZG"),R=i("eIep"),M=i("vkgz"),F=i("/uUt"),L=i("CqXF"),N=i("wO+i"),z=i("Kj3r"),q=i("1G5W"),G=i("3E0/"),V=i("IzEk"),B=i("Zy1z"),X=i("SxV6"),H=i("l7P3"),W=i("drq7"),K=i("ILsm"),Q=i("CDR3"),Z=i("jJW4"),Y=i("hfeG"),J=i("N4ya"),ee=i("hUS4"),te=i("bFKe"),ie=i("ofXK"),oe=i("BTFG"),ne=i("vIpm"),se=i("tIWb"),ce=i("UdVN");const ae=["commentsList"];function re(e,t){1&e&&s.Xb(0,"cu-loader")}function le(e,t){if(1&e){const e=s.dc();s.ac(0),s.cc(1,"div",13),s.qc("click",function(){return s.Uc(e),s.uc(2).loadNextCommentsPage()}),s.gc(2,14),s.vc(3,"async"),s.vc(4,"async"),s.bc(),s.Zb()}if(2&e){const e=s.uc(2);s.Ib(4),s.kc(s.wc(3,2,e.additionalComments$)||"")(s.wc(4,4,e.additionalComments$)),s.hc(2)}}function de(e,t){if(1&e&&(s.bd(0,le,5,6,"ng-container",6),s.vc(1,"async")),2&e){const e=s.uc();s.Dc("ngIf",s.wc(1,1,e.showLoadMore$))}}function ue(e,t){if(1&e&&(s.cc(0,"div",18),s.vc(1,"async"),s.cc(2,"div",19),s.gc(3,20),s.bc(),s.Xb(4,"div",21),s.bc()),2&e){const e=s.uc(2);s.Ob("task-history-item__divider-fade",s.wc(1,2,e.fadeNewActivity$))}}function me(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-email-comment",22),s.qc("onChange",function(t){return s.Uc(e),s.uc(2).updateComment({comment:t.comment,payload:t.payload,commentChange:t.commentChange})})("onEmailUserAction",function(t){return s.Uc(e),s.uc(2).emailUserAction(t)}),s.vc(1,"async"),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.bc()}if(2&e){const e=s.uc(),t=e.index,i=e.$implicit,o=s.uc();let n=null;s.Ob("cu-comment-thread__parent",(null==o.filters?null:o.filters.showParent)&&0===t),s.Dc("project",o.project)("projectMembers",o.members)("permissions",o.permissions)("permissionLevel",o.permissionLevel)("allowNormalThread",!0)("taskId",o.taskId)("noEmailToggle",o.noEmailToggle)("allowThread",!0)("weights",s.wc(1,21,o.weights$))("allowEmailFeature",!0)("forThread",!0)("comment",i)("canManageEmail",o.canManageEmail)("lazyLoadEntities",!1)("editorId","comment_edit_"+(null==i?null:i.id))("allowReply",!0)("allowLink",o.allowLink)("userGroups",o.showUserGroups?s.wc(2,23,o.userGroups$):null)("threadData",null!=(n=s.wc(3,25,o.authedState$))&&n.threadedEmailsMap?s.wc(4,27,o.authedState$).threadedEmailsMap[i.id]:void 0)}}function pe(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-task-comment",24),s.qc("@resolving.done",function(){return s.Uc(e),s.uc(3).resetLastResolvedId()})("onRemove",function(t){return s.Uc(e),s.uc(3).removeComment(t)})("onChange",function(t){return s.Uc(e),s.uc(3).updateComment({comment:t.comment,payload:t.payload,commentChange:t.commentChange})})("onUndo",function(t){return s.Uc(e),s.uc(3).undoComment(t)})("onAssigneeChange",function(t){s.Uc(e);const i=s.uc(2).$implicit;return s.uc().assigneeChanged(i,t)})("onAttachmentEdited",function(t){s.Uc(e);const i=s.uc(2).$implicit;return s.uc().updateCommentAttachment(i,t.attachment)})("onAddReaction",function(t){return s.Uc(e),s.uc(3).addReaction(t.comment,t.reaction)})("onRemoveReaction",function(t){return s.Uc(e),s.uc(3).removeReaction(t.comment,t.reaction)})("onCommentReply",function(t){s.Uc(e);const i=s.uc(2).$implicit;return s.uc().commentReply(t,i)})("onSelectedTextClick",function(){s.Uc(e);const t=s.uc(2).$implicit;return s.uc().onSelectedTextClick.emit(t)})("onNumberClick",function(){s.Uc(e);const t=s.uc(2).$implicit;return s.uc().onNumberClick.emit(t)})("onAddToContent",function(t){return s.Uc(e),s.uc(3).onAddToContent.emit(t)})("onAddToInbox",function(t){return s.Uc(e),s.uc(3).addCommentToInbox(t)})("onScrollToComment",function(t){return s.Uc(e),s.uc(3).onScrollToComment.emit(t)})("onShowThread",function(){return s.Uc(e),s.uc(3).adjustScrollHeight()}),s.vc(1,"async"),s.vc(2,"async"),s.bc()}if(2&e){const e=s.uc(2),t=e.index,i=e.$implicit,o=s.uc(),n=s.Rc(26);s.Ob("cu-comment-thread__parent",(null==o.filters?null:o.filters.showParent)&&0===t),s.Dc("comment",i)("parentId",o.parentId)("assignedComments",o.assignedComments||o.assignedParentComment&&(null==o.filters?null:o.filters.showParent)&&0===t)("projectMembers",o.members)("hideCoverImage",!0)("permissions",o.permissions)("permissionLevel",o.permissionLevel)("fileParentId",s.wc(1,28,o.parentId$))("fileParentType",o.type)("allowReply",!0)("allowThread",o.type===o.CommentType.DocComment||o.type===o.CommentType.DocViewComment||o.type===o.CommentType.Attachment||o.type===o.CommentType.Task||o.type===o.CommentType.ConversationView)("allowLink",o.allowLink)("allowAddToContent",o.allowAddToContent)("allowAddToInbox",!0)("taskId",o.taskId)("taskUserGroups",o.taskUserGroups)("threadTemplate",n)("editorId","comment_edit_"+(null==i?null:i.id))("showAnyone",o.showAnyone)("showUnassign",o.showUnassign&&!(o.assignedParentComment&&null!=o.filters&&o.filters.showParent&&0===t))("selectedTextDelta",o.commentsDeltaMap[null==i?null:i.id])("readonly",o.readOnly)("userGroups",o.showUserGroups?s.wc(2,30,o.userGroups$):null)("ignoreSlashCommands",o.commentsIgnoreSlashCommands)("searchString",o.searchString)("@resolving",o.lastResolvedId===(null==i?null:i.id)?"resolved":null)}}function he(e,t){if(1&e&&s.bd(0,pe,3,32,"cu-task-comment",23),2&e){const e=s.uc().$implicit,t=s.uc();s.Dc("ngIf",!t.showUnresolvedCommentsOnly||t.showUnresolvedCommentsOnly&&(null==e?null:e.assignee)&&(!(null!=e&&e.resolved)||e.threaded_unresolved_count>0))}}function fe(e,t){if(1&e&&(s.ac(0),s.bd(1,ue,5,4,"div",15),s.vc(2,"async"),s.bd(3,me,5,29,"cu-email-comment",16),s.bd(4,he,1,1,"ng-template",null,17,s.cd),s.Zb()),2&e){const e=t.$implicit,i=s.Rc(5),o=s.uc();s.Ib(1),s.Dc("ngIf",e.id===s.wc(2,3,o.newActivityCommentId$)),s.Ib(2),s.Dc("ngIf",null==e||null==e.emails?null:e.emails.length)("ngIfElse",i)}}function be(e,t){1&e&&s.Xb(0,"cu-loader")}function ge(e,t){}const _e=function(){return{}};function ve(e,t){if(1&e&&s.bd(0,ge,0,0,"ng-template",25),2&e){const e=s.uc(),t=s.Rc(28);s.Dc("ngTemplateOutlet",e.emptyTemplate||t)("ngTemplateOutletContext",s.Gc(2,_e))}}function ke(e,t){if(1&e&&s.Yb(0,26),2&e){const e=s.uc();s.Dc("ngTemplateOutlet",e.emptyStateTemplate)}}function ye(e,t){if(1&e&&(s.Yb(0,26),s.vc(1,"async")),2&e){const e=s.uc(),t=s.Rc(24),i=s.Rc(22);s.Dc("ngTemplateOutlet",s.wc(1,1,e.showResolvedComments$)?t:i)}}function we(e,t){if(1&e){const e=s.dc();s.cc(0,"div",31),s.cc(1,"div",32),s.qc("ondrop",function(t){return s.Uc(e),s.uc(2).addFileToComment(t)})("dragover",function(e){return e.preventDefault()}),s.Xb(2,"div",33),s.cc(3,"div",34),s.gc(4,35),s.bc(),s.bc(),s.bc()}if(2&e){const e=s.uc(2);s.Ib(1),s.Dc("dropDisabled",e.dropDisabled)}}function xe(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-comment-bar",36),s.qc("onSubmit",function(t){return s.Uc(e),s.uc(2).saveComment(t)})("onMentionOpen",function(){return s.Uc(e),s.uc(2).mentionOpen()})("onMentionClose",function(){return s.Uc(e),s.uc(2).mentionClose()})("onEmailUserAction",function(t){return s.Uc(e),s.uc(2).emailUserAction(t)})("isTyping",function(t){return s.Uc(e),s.uc(2).isTyping$.next(t.isTyping)})("onCancel",function(){return s.Uc(e),s.uc(2).cancelCommentBar()})("onActivate",function(){return s.Uc(e),s.uc(2).onCommentBarActivate.emit()}),s.vc(1,"async"),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.vc(5,"async"),s.vc(6,"async"),s.vc(7,"async"),s.vc(8,"async"),s.vc(9,"async"),s.vc(10,"async"),s.vc(11,"async"),s.vc(12,"async"),s.bc()}if(2&e){const e=s.uc(2);let t=null,i=null;s.Dc("uploaderUrl",e.uploaderUrl)("parentId",s.wc(1,32,e.parentId$))("attachmentType",e.type)("assignedComments",!(null!=e.filters&&e.filters.showParent))("projectMembers",e.members)("id",s.wc(2,34,e.commentBarId$))("dropFileParentId",e.dropFileParentId)("weights",s.wc(3,36,e.weights$))("localStorageId",s.wc(4,38,e.commentBarId$)?s.wc(5,40,e.commentBarId$)+"_last-saved-comment":null)("project",e.project)("loading",null==(t=s.wc(6,42,e.commentsLoadingState$))?null:t.create)("slashCommandSupport",!0)("defaultAssignee",e.defaultAssignee)("editorId","comment_thread_"+s.wc(7,44,e.commentBarId$))("type",e.type)("commentsList",s.wc(8,46,e.comments$))("user",e.user)("team",s.wc(9,48,e.team$))("showAnyone",e.showAnyone)("commentMode",e.defaultToEmail?e.CommentMode.Email:e.CommentMode.Comment)("allowEmailFeature",e.allowEmailFeature)("canManageEmail",e.canManageEmail)("authedState",s.wc(10,50,e.filteredAuthState$))("signatures",null==(i=s.wc(11,52,e.authedState$))?null:i.emailSignatures)("showUnassign",e.showUnassign)("popupInBody",e.popupInBody)("saveDraft",e.saveDraft)("autoAssignWhenMention",e.showAnyone)("userGroups",e.showUserGroups?s.wc(12,54,e.userGroups$):null)("taskUserGroups",e.taskUserGroups)("isChatView",e.isChatView)("isChatViewModal",e.isChatViewModal)}}function Ie(e,t){1&e&&s.Xb(0,"div",37)}function Te(e,t){if(1&e&&(s.ac(0),s.Xb(1,"cu-comment-users",27),s.vc(2,"async"),s.vc(3,"async"),s.bd(4,we,5,1,"div",28),s.bd(5,xe,13,56,"cu-comment-bar",29),s.bd(6,Ie,1,0,"ng-template",null,30,s.cd),s.Zb()),2&e){const e=s.Rc(7),t=s.uc();s.Ib(1),s.Dc("usersViewing",s.wc(2,5,t.usersViewing$))("usersTyping",s.wc(3,7,t.usersTyping$)),s.Ib(3),s.Dc("ngIf",t.canComment),s.Ib(1),s.Dc("ngIf",t.canComment&&!t.readOnly)("ngIfElse",e)}}function Ce(e,t){if(1&e){const e=s.dc();s.cc(0,"div",38),s.qc("click",function(){return s.Uc(e),s.uc().setVisibilityOfResolvedCommentsInOpenTab(!0)}),s.gc(1,39),s.vc(2,"async"),s.bc()}if(2&e){const e=s.uc();s.Ib(2),s.kc(s.wc(2,1,e.resolvedCommentsCount$)),s.hc(1)}}function De(e,t){if(1&e){const e=s.dc();s.cc(0,"div",38),s.qc("click",function(){return s.Uc(e),s.uc().setVisibilityOfResolvedCommentsInOpenTab(!1)}),s.gc(1,40),s.bc()}}const Oe=function(){return{showParent:!1}},Se=function(e){return[e]};function Ee(e,t){if(1&e){const e=s.dc();s.cc(0,"cu-comment-thread",41),s.qc("onMentionOpen",function(){return s.Uc(e),s.uc().mentionOpen()})("onMentionClose",function(){return s.Uc(e),s.uc().mentionClose()})("onThreadCommentAction",function(){return s.Uc(e),s.uc().childThreadCommentAdded()}),s.bc()}if(2&e){const e=t.comment,i=s.uc();s.Dc("parentId",e.id)("type",i.CommentType.Comment)("focusOnInit",!0)("members",i.members)("user",i.user)("assignedComments",!1)("filters",s.Gc(14,Oe))("permissions",i.permissions)("popupInBody",i.popupInBody)("readOnly",i.readOnly)("showUserGroups",i.showUserGroups)("taskUserGroups",s.Hc(15,Se,i.taskUserGroupFollowers))("isChatView",i.isChatView)("isChatViewModal",i.isChatViewModal)}}function Pe(e,t){if(1&e&&(s.cc(0,"div",43),s.Yb(1,26),s.vc(2,"async"),s.vc(3,"async"),s.bc()),2&e){const e=s.uc(2),t=s.Rc(22),i=s.Rc(30);let o=null;s.Ib(1),s.Dc("ngTemplateOutlet",e.allowShowResolvedCommentInOpenTab&&null===(null==(o=s.wc(2,1,e.filters$))?null:o.resolved)&&s.wc(3,3,e.resolvedCommentsCount$)>0?t:i)}}function je(e,t){if(1&e&&s.bd(0,Pe,4,5,"div",42),2&e){const e=s.uc();s.Dc("ngIf",e.placeholder)}}function Ae(e,t){if(1&e&&(s.ac(0),s.dd(1),s.Zb()),2&e){const e=s.uc();s.Ib(1),s.ed(e.placeholder)}}const $e=function(){return{suppressScrollX:!0}};var Ue=function(e){return e[e.Create=0]="Create",e[e.Remove=1]="Remove",e[e.Update=2]="Update",e[e.RemoveAttachment=3]="RemoveAttachment",e[e.AddAttachment=4]="AddAttachment",e}({});let Re=(()=>{class e{constructor(e,t,i,o,n,a,r,d,u,p){this.store=e,this.taskMentionService=t,this.action$=i,this.websocket=o,this.elementRef=n,this.changeDetectorRef=a,this.uploaderService=r,this.effects=d,this.sharedData=u,this.inboxService=p,this.convertUserMember=!1,this.canComment=!0,this.threadedReplies=0,this.assignedComments=!1,this.assignedParentComment=!1,this.showThread=!0,this.modifier="",this.focusOnInit=!1,this.doNotLoadComments=!1,this.doNotDisplayComments=!1,this.showAnyone=!1,this.defaultToEmail=!1,this.showUnassign=!0,this.showUnresolvedCommentsOnly=!1,this.allowShowResolvedCommentInOpenTab=!1,this.popupInBody=!1,this.saveDraft=!0,this.commentsDeltaMap={},this.placeholder="",this.readOnly=!1,this.loadAllPages=!1,this.dropDisabled=!1,this.noEmailToggle=!1,this.allowLink=!1,this.allowAddToContent=!1,this.allowAddToInbox=!1,this.showUserGroups=!1,this.debounceTime=0,this.emptyStateTemplate=null,this.allowEmailFeature=!1,this.preventDocBackgroundScroll=!1,this.commentsIgnoreSlashCommands=!0,this.comment=null,this.isChatView=!1,this.canManageEmail=!1,this.isChatViewModal=!1,this.preventVerticalScroll=!1,this.commentCreated=new s.o,this.onSelectedTextClick=new s.o,this.onNumberClick=new s.o,this.profileOpened=new s.o,this.taskOpened=new s.o,this.onCommentBarCancel=new s.o,this.onCommentBarActivate=new s.o,this.onChangeComments=new s.o,this.onAddToContent=new s.o,this.onAddToInbox=new s.o,this.onLoad=new s.o,this.onThreadCommentAction=new s.o,this.onScrollToComment=new s.o,this.onMentionOpen=new s.o,this.onMentionClose=new s.o,this.parentId$=new D.a(null),this.parentThread$=new D.a(null),this.filters$=new D.a(null),this.doNotLoadComments$=new D.a(this.doNotLoadComments),this.doNotDisplayComments$=new D.a(this.doNotDisplayComments),this.weights$=this.store.select(g.getUserWeights),this.userGroups$=this.store.select(h.c),this.taskUserGroupFollowers=c.b,this.CommentMode=l.b,this.authedState$=this.store.select(g.getAuthedState),this.team$=this.store.select(g.getTeam),this.user$=this.store.select(g.getUser),this.comment$=new D.a(this.comment),this.threadedReplies$=new D.a(this.threadedReplies),this.filteredAuthState$=Object(O.a)([this.authedState$,this.comment$]).pipe(Object(A.a)(this.user$),Object($.a)(([[e,t],i])=>{var o;if(!(e&&1!==e.authedEmails.length&&t&&t.emails&&t.emails.length))return e;const n=null===(o=t.emails[0].full_data.from[0].email)||void 0===o?void 0:o.toLowerCase(),s=-1!==e.authedEmails.findIndex(e=>{var t;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===n})?n:i.email;return Object.assign(Object.assign({},e),{authedEmails:e.authedEmails,preferredEmail:s})})),this.showResolvedComments$=new D.a(!1),this.resolvedCommentsCount$=new D.a(0),this.comments$=Object(O.a)([this.parentId$,this.doNotLoadComments$,this.doNotDisplayComments$,this.showResolvedComments$,this.threadedReplies$]).pipe(Object(U.a)(([e])=>!!e),Object(R.a)(([e,t,i])=>i?Object(S.a)([]):this.store.select(Object(m.b)(String(this.type),e)).pipe(Object(R.a)(t=>t?Object(S.a)(t):this.parentThread$.pipe(Object(R.a)(i=>i?this.store.select(Object(m.b)(String(i.type),i.id)).pipe(Object($.a)(t=>{const i=t&&t.filter(t=>t.id===e);if(t&&i.length)return i})):Object(S.a)(t)))),Object($.a)(e=>t?e||[]:e))),Object(M.a)(e=>(e&&this.resolvedCommentsCount$.next(e.filter(e=>Boolean(e.resolved)).length),e)),Object(A.a)(this.filters$,this.showResolvedComments$),Object($.a)(([e,t,i])=>{if(t&&e){let o=[];if(null===t.resolved){o=e.filter(e=>(!t.ids||t.ids.some(t=>t===e.id))&&(this.type!==l.c.Comment||e.id!==this.parentId||t.showParent)&&(!t.todoComments||!this.user||e.assignee&&e.assignee.id===this.user.id)&&(!t.assignee||e.assignee&&e.assignee.id===t.assignee)&&(!Boolean(e.resolved)||Boolean(e.resolved)===Boolean(i)));const n=Object(T.a)(o,e=>Boolean(e.resolved));return[...n.false||[],...n.true||[]]}return o=e.filter(e=>(!t.ids||t.ids.some(t=>t===e.id))&&(this.type!==l.c.Comment||e.id!==this.parentId||t.showParent)&&(!t.todoComments||!this.user||e.assignee&&e.assignee.id===this.user.id)&&(!t.assignee||e.assignee&&e.assignee.id===t.assignee)&&(!t.resolved||Boolean(e.resolved)===Boolean(t.resolved))),o}return e}),Object(M.a)(e=>{this.onChangeComments.emit({comments:e,threadedReplies:this.threadedReplies$.value||0})})),this.newActivityCommentId$=this.parentId$.pipe(Object(U.a)(e=>!!e),Object(R.a)(e=>this.store.select(Object(m.e)(String(this.type),e)))),this.commentsLoadingState$=this.parentId$.pipe(Object(U.a)(e=>!!e),Object(R.a)(e=>this.store.select(Object(m.d)(String(this.type),e)))),this.fadeNewActivity$=this.newActivityCommentId$.pipe(Object(U.a)(e=>!!e),Object(F.a)(),Object(R.a)(()=>Object(E.a)(5e3)),Object(L.a)(!0)),this.allCommentsLoaded$=this.parentId$.pipe(Object(U.a)(e=>!!e),Object(R.a)(e=>this.store.select(Object(m.a)(String(this.type),e)))),this.additionalComments$=Object(O.a)([this.comments$,this.threadedReplies$]).pipe(Object($.a)(([e,t])=>Math.max(t-((null==e?void 0:e.length)||0),0))),this.showLoadMore$=Object(O.a)([this.commentsLoadingState$,this.comments$,this.threadedReplies$,this.allCommentsLoaded$]).pipe(Object($.a)(([e,t,i,o])=>!((null==e?void 0:e.initial)||!(null==t?void 0:t.length)||!i||o))),this.usersViewing$=this.parentId$.pipe(Object(U.a)(e=>!!e),Object(R.a)(e=>this.store.select(Object(m.i)(String(this.type),e)))),this.usersTyping$=this.parentId$.pipe(Object(U.a)(e=>!!e),Object(R.a)(e=>this.store.select(Object(m.h)(String(this.type),e)))),this.commentBarId$=this.parentId$.pipe(Object(U.a)(e=>!!e),Object($.a)(e=>"comment-thread_"+this.type+"_"+e)),this.disableLoadNextPage$=Object(O.a)([this.commentsLoadingState$.pipe(Object(N.a)("paging")),this.allCommentsLoaded$,this.doNotLoadComments$]).pipe(Object($.a)(([e,t,i])=>e||t||i)),this.trackById=Object(f.d)("id"),this.CommentType=l.c,this.isTyping$=new P.a,this.uploaderUrl=[x.a.apiUrl,"attachment"].join("/"),this.destroy$=new P.a,this.emptyCommentTypeConfig={subscribeToWebsocketEvents:()=>{},setIsViewing:(e,t)=>{},setIsTyping:(e,t)=>{}},this.commentTypeConfig={[l.c.ConversationView]:{subscribeToWebsocketEvents:()=>{this.websocket.connectToView(this.parentId)},setIsViewing:(e,t)=>{this.websocket.sendViewingViewMessage(e,t)},setIsTyping:(e,t)=>{this.websocket.sendCommentingViewMessage(e,t)}},[l.c.Task]:{subscribeToWebsocketEvents:()=>{this.websocket.connectToTask(this.parentId)},setIsViewing:(e,t)=>{this.websocket.sendTaskViewingMessage(e,t)},setIsTyping:(e,t)=>{this.websocket.sendTaskCommentingMessage(e,t)}}}}ngOnInit(){Object(O.a)([this.parentId$,this.doNotLoadComments$,this.filters$]).pipe(Object(U.a)(([e,t])=>!t&&!!(e||this.filters&&this.filters.ids)),Object(F.a)(C.a),Object(z.a)(this.debounceTime),Object(q.a)(this.destroy$)).subscribe(()=>{this.loadComments()}),this.action$.pipe(Object(I.d)(u.e.LoadCommentsSuccess,u.e.CreateCommentSuccess),Object(U.a)(e=>e.payload.type===this.type&&e.payload.parent===this.parentId),Object(G.a)(1),Object(q.a)(this.destroy$)).subscribe(e=>{const t=e.type===u.e.CreateCommentSuccess?300:0;this.commentsList.update(),setTimeout(()=>{this.commentsList.scrollToBottom(0,t)}),this.taskMentionService.updateMentions(),e.type===u.e.CreateCommentSuccess&&this.commentCreated.emit({comment:e.payload.comment,attachments:e.payload.attachments})}),this.action$.pipe(Object(I.d)(u.e.CreateCommentSuccess),Object(U.a)(e=>e.payload.type===this.type&&e.payload.parent===this.parentId&&!!this.commentBar),Object(q.a)(this.destroy$)).subscribe(()=>{this.commentBar.clear()}),this.action$.pipe(Object(I.d)(u.e.UpdateCommentSuccess,u.e.UpdateCommentFromWebsocket,u.e.LoadMoreCommentsSuccess),Object(U.a)(e=>e.payload.type===this.type&&e.payload.parent===this.parentId),Object(G.a)(1),Object(q.a)(this.destroy$)).subscribe(()=>{this.taskMentionService.updateMentions(),this.commentsList.update()}),this.action$.pipe(Object(I.d)(u.e.DeleteCommentSuccess,u.e.DeleteCommentFromWebsocket,u.e.LoadMoreCommentsSuccess),Object(U.a)(e=>e.payload.type===this.type&&e.payload.parent===this.parentId),Object(G.a)(1),Object(q.a)(this.destroy$)).subscribe(()=>{this.commentsList.update()}),this.fadeNewActivity$.pipe(Object(G.a)(1e3),Object(q.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(new u.d({type:this.type,parent:this.parentId}))}),this.action$.pipe(Object(I.d)(p.d),Object(q.a)(this.destroy$)).subscribe(()=>{this.profileOpened.emit()}),this.store.select(w.m).pipe(Object(U.a)(e=>!!e),Object(q.a)(this.destroy$)).subscribe(()=>{this.taskOpened.emit()}),this.parentId$.pipe(Object(U.a)(e=>!!e),Object(V.a)(1),Object(q.a)(this.destroy$)).subscribe(e=>{this.getCommentTypeConfig().setIsViewing(e,!0)}),this.parentId$.pipe(Object(U.a)(e=>!!e),Object(F.a)(),Object(B.a)(),Object(q.a)(this.destroy$)).subscribe(([e,t])=>{this.commentBar&&this.commentBar.clear(),this.getCommentTypeConfig().setIsViewing(e,!1),this.getCommentTypeConfig().setIsTyping(e,!1),this.getCommentTypeConfig().setIsViewing(t,!0)}),this.isTyping$.pipe(Object(F.a)(),Object(q.a)(this.destroy$)).subscribe(e=>{this.getCommentTypeConfig().setIsTyping(this.parentId,e)}),Object(j.a)(document,a.c).pipe(Object($.a)(e=>e.detail),Object(U.a)(e=>Boolean(e.id&&e.title)),Object(q.a)(this.destroy$)).subscribe(e=>{this.store.dispatch(new u.o({attachment:e}))}),this.action$.pipe(Object(I.d)(u.e.LoadCommentsSuccess,u.e.LoadMoreCommentsSuccess),Object(R.a)(e=>Object(E.a)(e.type===u.e.LoadCommentsSuccess?1e3:100)),Object(U.a)(()=>!!this.scrollToCommentId),Object(A.a)(this.comments$),Object(q.a)(this.destroy$)).subscribe(([,e])=>{e.some(e=>e.id===this.scrollToCommentId)?(this.commentsList.scrollToElement(`[data-comment-id="${this.scrollToCommentId}"]`,-5,200),this.scrollToCommentId=null):this.commentsList.scrollToTop()}),this.showResolvedComments$.pipe(Object(q.a)(this.destroy$)).subscribe(()=>{this.commentsList.update(),setTimeout(()=>{this.commentsList.scrollToBottom(0,300)}),this.taskMentionService.updateMentions()}),this.users&&this.users.length||this.onLoad.emit()}ngOnChanges(e){e.parentId&&this.parentId&&this.setParentId(e.parentId.currentValue),e.threadedReplies&&!this.threadedReplies$.value&&this.threadedReplies$.next(this.threadedReplies),e.comment&&this.comment$.next(this.comment),e.parentThread&&this.parentThread$.next(this.parentThread),e.doNotLoadComments&&this.doNotLoadComments$.next(this.doNotLoadComments),e.doNotDisplayComments&&this.doNotDisplayComments$.next(this.doNotDisplayComments),e.filters&&this.filters$.next(this.filters),(e.users&&this.users&&!this.members||this.convertUserMember&&this.users&&this.members&&this.users.length!==this.members.length)&&(this.members=this.users.map(e=>({user:e}))),e.uploaderUrl&&this.uploaderUrl&&this.uploaderService.setOptions({url:this.uploaderUrl}),(e.parentId||e.type)&&this.parentId&&this.uploaderService.setOptions({fieldName:"attachment",formDataFields:{parent:this.parentId,type:this.type,permanent:!1}})}ngOnDestroy(){if(this.getCommentTypeConfig().setIsTyping(this.parentId,!1),this.getCommentTypeConfig().setIsViewing(this.parentId,!1),this.destroy$.next(),this.preventDocBackgroundScroll){const e=document.querySelector(".cu-dashboard-doc-container__scroll-container");e&&e.classList.remove("cu-overflow-y-hidden")}}ngAfterViewInit(){if(this.action$.pipe(Object(I.d)(u.e.LoadMoreCommentsSuccess),Object(U.a)(e=>e.payload.type===this.type&&e.payload.parent===this.parentId),Object($.a)(()=>this.comments.toArray()[0]),Object(G.a)(1),Object(q.a)(this.destroy$)).subscribe(e=>{this.commentsList.scrollToY(e.elementRef.nativeElement.offsetTop)}),this.type===l.c.Comment&&this.commentBar&&this.commentBar.activateEditor(!0,!0),setTimeout(()=>{this.doNotLoadComments&&this.focusOnInit&&this.commentBar&&this.commentBar.activateEditor()}),this.preventDocBackgroundScroll){const e=document.querySelector(".cu-dashboard-doc-container__scroll-container");e&&e.classList.add("cu-overflow-y-hidden")}}loadComments(){this.store.dispatch(new u.u({parent:this.parentId,type:this.type,include_parent:this.filters&&this.filters.showParent,comment_ids:this.filters&&this.filters.ids,todo_comments:this.filters&&this.filters.todoComments,assignee:this.filters&&this.filters.assignee,resolved:this.filters&&this.filters.resolved,thread:this.filters&&this.filters.thread,loadAllPages:this.loadAllPages}))}setParentId(e){this.parentId$.value!==e&&(this.parentId=e,this.parentId$.next(e),this.getCommentTypeConfig().subscribeToWebsocketEvents(),this.effects.register(this.comments$.pipe(Object(U.a)(e=>Boolean(e)),Object(G.a)(0),Object(A.a)(this.authedState$),Object(V.a)(1)),([e,t])=>{var i,o,n;if(this.focusOnInit&&this.commentBar)if(this.defaultToEmail&&this.comment&&this.comment.emails&&this.comment.emails.length){const e=this.comment.emails[0].full_data,s=(null==t?void 0:t.threadedEmailsMap)&&(null===(o=null===(i=t.threadedEmailsMap[this.comment.id])||void 0===i?void 0:i.comments)||void 0===o?void 0:o.length)?t.threadedEmailsMap[this.comment.id].comments[t.threadedEmailsMap[this.comment.id].comments.length-1].emails[0].full_data:e,c=this.comment.emails[0].id,a=[];if((null==t?void 0:t.threadedEmailsMap)&&t.threadedEmailsMap[this.comment.id]){const e=((null===(n=t.threadedEmailsMap[this.comment.id])||void 0===n?void 0:n.comments)||[]).filter(e=>{var t;return!!(null===(t=e.emails)||void 0===t?void 0:t.length)}).reverse();e.length&&a.push(...e)}a.push(this.comment);const r=Object(v.b)(this.comment.emails[0].full_data,s);this.commentBar.changeMode(l.b.Email,null,r,e.subject,c,a)}else this.commentBar.changeMode(l.b.Comment),this.commentBar.clearReplyToId(),this.commentBar.activateEditor()}))}setVisibilityOfResolvedCommentsInOpenTab(e){this.showResolvedComments$.next(e)}saveComment(e){this.threadedReplies$.value&&this.threadedReplies$.next(this.threadedReplies$.value+1),this.store.dispatch(new u.h(Object.assign(Object.assign({},this.defaultPayload),{attachments:(e.attachments||[]).map(e=>e.id),parent:this.parentId,type:this.type,comment:e.comment,email:e.email,assignee:e.assignee,group_assignee:e.group_assignee})));const t=this.sharedData.currentUser.value,i=Object.assign(Object.assign({},e),{user:t});this.onThreadCommentAction.emit({comment:i,type:Ue.Create})}removeComment(e){this.threadedReplies$.value&&this.threadedReplies$.next(this.threadedReplies$.value-1),this.store.dispatch(new u.l({parent:this.parentId,type:this.type,commentId:e.id,unresolved_comments_count:(e.threaded_unresolved_count||0)+(!1===e.resolved?1:0)})),this.onThreadCommentAction.emit({comment:e,type:Ue.Remove})}emailUserAction(e){switch(e.type){case d.e.DeleteEmailSignature:this.store.dispatch(new b.fc({signatureId:e.signatureId,userId:e.userId}));break;case d.e.FetchAuthedEmails:this.store.dispatch(new b.Uc),this.store.dispatch(new b.ad);break;case d.e.FetchEmailSignatures:this.store.dispatch(new b.ad);break;case d.e.FetchEmailTemplates:this.store.dispatch(new b.bd({}));break;case d.e.AddFollowers:this.store.dispatch(new b.t({commentId:e.commentId,followers:e.followers}));break;case d.e.FetchEmailContacts:this.store.dispatch(new b.Yc({accountId:e.accountId}));break;case d.e.UpdateEmailUser:this.store.dispatch(new b.jm({authedEmail:e.emailUser,editAuthEmailPayload:e.editAuthEmailPayload}));break;case d.e.RemoveAuth:this.store.dispatch(new b.bc({authedEmail:e.emailUser}));break;case d.e.FetchThreadedComments:this.store.dispatch(new b.cd({commentId:e.commentId}));break;case d.e.CreateSignature:this.store.dispatch(new b.Hb({payload:e.signaturePayload}));break;case d.e.EditSignature:this.store.dispatch(new b.wc({payload:e.signaturePayload,id:e.signatureId,signature:e.signature,userId:e.userId})),e.allSignatures&&this.store.dispatch(new b.x({signatureUpdate:[{userId:e.userId,signatures:e.allSignatures}]}));break;case d.e.ThrowBusinessPaywall:this.store.dispatch(new b.x({signatureError:!0}));break;case d.e.SendEmail:this.store.dispatch(new b.z({commentId:e.comment.id,newComment:e.payload}))}}assigneeChanged(e,t){let i,o;void 0!==t.assignee&&(i=t.assignee?t.assignee.id:"unassigned"),void 0!==t.group_assignee&&(o=t.group_assignee?t.group_assignee.id:"unassigned"),this.store.dispatch(new u.J({parent:this.parentId,type:this.type,comment:Object.assign(Object.assign({},e),t),changes:{assignee:i,group_assignee:o},removeResolved:Boolean(this.filters&&!1===this.filters.resolved)}))}updateComment({comment:e,payload:t,commentChange:i}){this.lastResolvedId=t.resolved?e.id:null,this.lastResolvedId&&this.filters&&(!1===this.filters.resolved||null===this.filters.resolved)&&this.changeDetectorRef.detectChanges();const o=Object.assign(Object.assign(Object.assign({},e),t),i);this.store.dispatch(new u.J({parent:this.parentId,type:this.type,comment:o,changes:t,removeResolved:Boolean(this.filters&&!1===this.filters.resolved)}));const n=t.comment?t.comment.filter(t=>"attachment"===t.type&&!e.comment.some(({attachment:e})=>e&&e.id===t.attachment.id)):[],s=e.comment.filter(e=>"attachment"===e.type&&!t.comment.some(({attachment:t})=>t&&t.id===e.attachment.id));n.length&&this.onThreadCommentAction.emit({comment:Object.assign(Object.assign({},o),{comment:n}),type:Ue.AddAttachment}),s.length&&this.onThreadCommentAction.emit({comment:{comment:s},type:Ue.RemoveAttachment})}undoComment(e){this.store.dispatch(new u.E({parent:this.parentId,type:this.type,commentId:e.id,unresolved_comments_count:(e.threaded_unresolved_count||0)+(!1===e.resolved?1:0)})),this.onThreadCommentAction.emit({comment:e,type:Ue.Create})}loadNextCommentsPage(){this.store.dispatch(new u.x({parent:this.parentId,type:this.type,include_parent:this.filters&&this.filters.showParent,comment_ids:this.filters&&this.filters.ids,todo_comments:this.filters&&this.filters.todoComments,assignee:this.filters&&this.filters.assignee,resolved:this.filters&&this.filters.resolved,thread:this.filters&&this.filters.thread}))}updateCommentAttachment(e,t){this.store.dispatch(new u.G({parent:this.parentId,type:this.type,commentId:e.id,attachment:t}))}addFileToComment(e){this.dropDisabled||this.commentBar.fileAdded(e)}addReaction(e,t){this.store.dispatch(new u.a({parent:this.parentId,type:this.type,comment:e,reaction:t}))}removeReaction(e,t){this.store.dispatch(new u.z({parent:this.parentId,type:this.type,comment:e,reaction:t}))}commentReply(e,t){this.commentBar&&this.commentBar.commentReply(Object.assign(Object.assign({},e),{item:{user:t.user,comment:t}}))}cancelCommentBar(){this.comments$.pipe(Object(V.a)(1),Object(q.a)(this.destroy$)).subscribe(e=>{this.onCommentBarCancel.emit(e?e.length:0)})}adjustScrollHeight(){this.changeDetectorRef.detectChanges(),this.commentsList.update()}childThreadCommentAdded(){this.commentsList.scrollToY(this.commentsList.elementRef.nativeElement.scrollTop+100)}resetLastResolvedId(){this.lastResolvedId=null}addCommentToInbox(e){let t;t=e.text&&e.text.length>25?`${e.text.substring(0,25)}... ${e.url}`:`${e.text} ${e.url}`;const i={data:{id:null,name:t,assignees:[],title:e.text,date_created:String(Date.now()),due_date:e.date,due_date_time:e.dueDateTime,start_date:String(Date.now()),start_date_time:!1,recurring_settings:e.recurringSettings?Object(r.i)(e.recurringSettings.recurring):null},open:!0};this.user$.pipe(Object(X.a)()).subscribe(e=>{this.inboxService.createReminder(e,_.a.Today,i)})}mentionOpen(){this.isChatViewModal&&(this.preventVerticalScroll=!0,this.onMentionOpen.emit())}mentionClose(){this.isChatViewModal&&(this.preventVerticalScroll=!1,this.onMentionClose.emit())}getCommentTypeConfig(){return this.commentTypeConfig[this.type]||this.emptyCommentTypeConfig}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(H.Store),s.Wb(W.a),s.Wb(I.a),s.Wb(K.WebsocketService),s.Wb(s.m),s.Wb(s.h),s.Wb(Q.a),s.Wb(o.b),s.Wb(Z.a),s.Wb(Y.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-comment-thread"]],viewQuery:function(e,t){if(1&e&&(s.jd(k.a,1),s.jd(ae,3),s.jd(y.a,1)),2&e){let e;s.Qc(e=s.rc())&&(t.commentBar=e.first),s.Qc(e=s.rc())&&(t.commentsList=e.first),s.Qc(e=s.rc())&&(t.comments=e)}},hostAttrs:[1,"cu-comment-thread"],inputs:{parentId:"parentId",type:"type",permissions:"permissions",convertUserMember:"convertUserMember",permissionLevel:"permissionLevel",members:"members",canComment:"canComment",project:"project",threadedReplies:"threadedReplies",assignedComments:"assignedComments",assignedParentComment:"assignedParentComment",showThread:"showThread",modifier:"modifier",scrollToCommentId:"scrollToCommentId",focusOnInit:"focusOnInit",doNotLoadComments:"doNotLoadComments",doNotDisplayComments:"doNotDisplayComments",parentThread:"parentThread",filters:"filters",defaultAssignee:"defaultAssignee",defaultPayload:"defaultPayload",user:"user",showAnyone:"showAnyone",defaultToEmail:"defaultToEmail",showUnassign:"showUnassign",showUnresolvedCommentsOnly:"showUnresolvedCommentsOnly",allowShowResolvedCommentInOpenTab:"allowShowResolvedCommentInOpenTab",popupInBody:"popupInBody",saveDraft:"saveDraft",commentsDeltaMap:"commentsDeltaMap",placeholder:"placeholder",users:"users",readOnly:"readOnly",loadAllPages:"loadAllPages",dropDisabled:"dropDisabled",dropFileParentId:"dropFileParentId",emptyTemplate:"emptyTemplate",noEmailToggle:"noEmailToggle",allowLink:"allowLink",taskId:"taskId",allowAddToContent:"allowAddToContent",allowAddToInbox:"allowAddToInbox",showUserGroups:"showUserGroups",debounceTime:"debounceTime",taskUserGroups:"taskUserGroups",emptyStateTemplate:"emptyStateTemplate",allowEmailFeature:"allowEmailFeature",preventDocBackgroundScroll:"preventDocBackgroundScroll",commentsIgnoreSlashCommands:"commentsIgnoreSlashCommands",searchString:"searchString",comment:"comment",isChatView:"isChatView",canManageEmail:"canManageEmail",isChatViewModal:"isChatViewModal",preventVerticalScroll:"preventVerticalScroll"},outputs:{commentCreated:"commentCreated",onSelectedTextClick:"onSelectedTextClick",onNumberClick:"onNumberClick",profileOpened:"profileOpened",taskOpened:"taskOpened",onCommentBarCancel:"onCommentBarCancel",onCommentBarActivate:"onCommentBarActivate",onChangeComments:"onChangeComments",onAddToContent:"onAddToContent",onAddToInbox:"onAddToInbox",onLoad:"onLoad",onThreadCommentAction:"onThreadCommentAction",onScrollToComment:"onScrollToComment",onMentionOpen:"onMentionOpen",onMentionClose:"onMentionClose"},features:[s.Hb([o.b]),s.Gb],decls:31,vars:38,consts:function(){let e,t,i,o,n,c;return e=$localize`:␟35aff41f4a1d6651c0556aee59662fa62f1b923b␟5826398650317330247:{VAR_PLURAL, plural, =1 {reply} other {replies}}`,e=s.lc(e,{VAR_PLURAL:"\ufffd1\ufffd"}),t=$localize`:@@cu-comment-thread__reply-toggle-text_thread-reply-count-indicator␟cefc6b94db1a93832706d9ca30b22917ac004b4b␟3234924857834083581: ${"\ufffd0\ufffd"}:INTERPOLATION: older ${e}:ICU: `,i=$localize`:@@common_new-activity␟5ad0d8eb28165f7415477cff352e8606c796a561␟196744227682079135: New activity `,o=$localize`:@@common_comment-attach-files␟9623d8edcb237fd933f0261636299be0fca8b2ee␟4676561682375248592: Attach files to a comment `,n=$localize`:@@cu-comment-thread__show-resolved-comments␟867dc6be7a359bb6366820a148375421ed9d5178␟744864247210787541: show ${"\ufffd0\ufffd"}:INTERPOLATION: resolved comments `,c=$localize`:@@cu-comment-thread__hide-resolved-comments␟1f5be7955167b5ab19a928ab192bc01a60653529␟7136725336594734943: Hide resolved comments `,[["cuDropArea","",3,"dropDisabled","hidden"],["cuScrollDetector","",1,"comments-container",3,"perfectScrollbar","disabled","scrollDetectorDisabled","onReachTop"],["commentsList","ngxPerfectScrollbar"],[4,"ngIf","ngIfElse"],["loadMoreBtnTemplate",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],["showResolvedCommentsLinkTemplate",""],["hideResolvedCommentsLinkTemplate",""],["nestedThreadTemplate",""],["placeholderTemplate",""],["defaultPlaceholderTextTemplate",""],[1,"cu-comment-thread__load-more","cu-comment__reply-toggle-text",3,"click"],t,["class","task-history-item__divider",3,"task-history-item__divider-fade",4,"ngIf"],["class","cu-comment-thread__comment",3,"cu-comment-thread__parent","project","projectMembers","permissions","permissionLevel","allowNormalThread","taskId","noEmailToggle","allowThread","weights","allowEmailFeature","forThread","comment","canManageEmail","lazyLoadEntities","editorId","allowReply","allowLink","userGroups","threadData","onChange","onEmailUserAction",4,"ngIf","ngIfElse"],["taskComment",""],[1,"task-history-item__divider"],[1,"task-history-item__divider-text"],i,[1,"task-history-item__divider-line"],[1,"cu-comment-thread__comment",3,"project","projectMembers","permissions","permissionLevel","allowNormalThread","taskId","noEmailToggle","allowThread","weights","allowEmailFeature","forThread","comment","canManageEmail","lazyLoadEntities","editorId","allowReply","allowLink","userGroups","threadData","onChange","onEmailUserAction"],["class","cu-comment-thread__comment",3,"cu-comment-thread__parent","comment","parentId","assignedComments","projectMembers","hideCoverImage","permissions","permissionLevel","fileParentId","fileParentType","allowReply","allowThread","allowLink","allowAddToContent","allowAddToInbox","taskId","taskUserGroups","threadTemplate","editorId","showAnyone","showUnassign","selectedTextDelta","readonly","userGroups","ignoreSlashCommands","searchString","onRemove","onChange","onUndo","onAssigneeChange","onAttachmentEdited","onAddReaction","onRemoveReaction","onCommentReply","onSelectedTextClick","onNumberClick","onAddToContent","onAddToInbox","onScrollToComment","onShowThread",4,"ngIf"],[1,"cu-comment-thread__comment",3,"comment","parentId","assignedComments","projectMembers","hideCoverImage","permissions","permissionLevel","fileParentId","fileParentType","allowReply","allowThread","allowLink","allowAddToContent","allowAddToInbox","taskId","taskUserGroups","threadTemplate","editorId","showAnyone","showUnassign","selectedTextDelta","readonly","userGroups","ignoreSlashCommands","searchString","onRemove","onChange","onUndo","onAssigneeChange","onAttachmentEdited","onAddReaction","onRemoveReaction","onCommentReply","onSelectedTextClick","onNumberClick","onAddToContent","onAddToInbox","onScrollToComment","onShowThread"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[3,"usersViewing","usersTyping"],["class","cu-comment-thread__dropzone",4,"ngIf"],[3,"uploaderUrl","parentId","attachmentType","assignedComments","projectMembers","id","dropFileParentId","weights","localStorageId","project","loading","slashCommandSupport","defaultAssignee","editorId","type","commentsList","user","team","showAnyone","commentMode","allowEmailFeature","canManageEmail","authedState","signatures","showUnassign","popupInBody","saveDraft","autoAssignWhenMention","userGroups","taskUserGroups","isChatView","isChatViewModal","onSubmit","onMentionOpen","onMentionClose","onEmailUserAction","isTyping","onCancel","onActivate",4,"ngIf","ngIfElse"],["blankCommentBar",""],[1,"cu-comment-thread__dropzone"],["cuDropArea","",1,"cu-comment-thread__dropzone-content",3,"dropDisabled","ondrop","dragover"],["icon","chevron-top",1,"cu-comment-thread__dropzone-icon"],[1,"cu-comment-thread__dropzone-text"],o,[3,"uploaderUrl","parentId","attachmentType","assignedComments","projectMembers","id","dropFileParentId","weights","localStorageId","project","loading","slashCommandSupport","defaultAssignee","editorId","type","commentsList","user","team","showAnyone","commentMode","allowEmailFeature","canManageEmail","authedState","signatures","showUnassign","popupInBody","saveDraft","autoAssignWhenMention","userGroups","taskUserGroups","isChatView","isChatViewModal","onSubmit","onMentionOpen","onMentionClose","onEmailUserAction","isTyping","onCancel","onActivate"],[1,"comment-bar","no-permission"],[1,"cu-comment-thread__show-resolved",3,"click"],n,c,[3,"parentId","type","focusOnInit","members","user","assignedComments","filters","permissions","popupInBody","readOnly","showUserGroups","taskUserGroups","isChatView","isChatViewModal","onMentionOpen","onMentionClose","onThreadCommentAction"],["class","cu-comment-thread__placeholder",4,"ngIf"],[1,"cu-comment-thread__placeholder"]]},template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.cc(1,"div",1,2),s.qc("onReachTop",function(){return t.loadNextCommentsPage()}),s.vc(3,"async"),s.bd(4,re,1,0,"cu-loader",3),s.vc(5,"async"),s.bd(6,de,2,3,"ng-template",null,4,s.cd),s.bd(8,fe,6,5,"ng-container",5),s.vc(9,"async"),s.bd(10,be,1,0,"cu-loader",6),s.vc(11,"async"),s.bd(12,ve,1,3,void 0,6),s.vc(13,"async"),s.bd(14,ke,1,1,"ng-container",7),s.bd(15,ye,2,3,"ng-container",7),s.vc(16,"async"),s.vc(17,"async"),s.vc(18,"async"),s.bc(),s.bd(19,Te,8,9,"ng-container",6),s.vc(20,"async"),s.bc(),s.bd(21,Ce,3,3,"ng-template",null,8,s.cd),s.bd(23,De,2,0,"ng-template",null,9,s.cd),s.bd(25,Ee,1,17,"ng-template",null,10,s.cd),s.bd(27,je,1,1,"ng-template",null,11,s.cd),s.bd(29,Ae,2,1,"ng-template",null,12,s.cd)),2&e){const e=s.Rc(7);let i=null,o=null,n=null,c=null;s.Mb("thread-container ",t.modifier,""),s.Dc("dropDisabled",t.dropDisabled)("hidden",!t.showThread),s.Ib(1),s.Ob("cu-overflow-y-hidden",t.preventVerticalScroll),s.Dc("perfectScrollbar",s.Gc(37,$e))("disabled",t.preventVerticalScroll)("scrollDetectorDisabled",s.wc(3,19,t.disableLoadNextPage$)),s.Ib(3),s.Dc("ngIf",null==(i=s.wc(5,21,t.commentsLoadingState$))?null:i.paging)("ngIfElse",e),s.Ib(4),s.Dc("ngForOf",s.wc(9,23,t.comments$))("ngForTrackBy",t.trackById),s.Ib(2),s.Dc("ngIf",null==(o=s.wc(11,25,t.commentsLoadingState$))?null:o.initial),s.Ib(2),s.Dc("ngIf",0===(null==(n=s.wc(13,27,t.comments$))?null:n.length)),s.Ib(2),s.Dc("ngIf",t.emptyStateTemplate),s.Ib(1),s.Dc("ngIf",t.allowShowResolvedCommentInOpenTab&&null===(null==(c=s.wc(16,29,t.filters$))?null:c.resolved)&&(null==(c=s.wc(17,31,t.comments$))?null:c.length)>0&&s.wc(18,33,t.resolvedCommentsCount$)>0),s.Ib(4),s.Dc("ngIf",s.wc(20,35,t.comments$)||t.type===t.CommentType.Comment)}},directives:[J.a,ee.a,te.a,ie.q,ie.p,oe.a,ne.a,y.a,ie.x,se.a,ce.a,k.a,e],pipes:[ie.b],styles:['.cu-comment-thread{position:relative}.cu-comment-thread .thread-container{position:relative;height:100%;flex:1;display:flex;flex-direction:column}.cu-comment-thread .comments-container{flex:1;overflow-y:auto}.cu-comment-thread .comments-container .comments-container{padding-left:12px;padding-right:12px}.cu-comment-thread .comment-bar.no-permission{display:none}.cu-comment-thread__load-more{display:flex;align-items:center;height:30px;cursor:pointer;border-top:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0;margin:10px -15px 0;padding:0 15px}.dark-theme .cu-comment-thread__load-more{border-top-color:#1e272e;border-bottom-color:#1e272e}.cu-comment-thread__load-more:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-comment-thread__load-more:hover{color:var(--theme-main-color)}}.cu-comment-thread__dropzone{display:none;position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000}.cu-state-drag-over .cu-comment-thread__dropzone{display:flex;animation:fadeIn .1s linear both}.cu-comment-thread__dropzone-content{display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%;width:100%;background:hsla(0,0%,100%,.8);transition:.1s;position:relative}.cu-comment-thread__dropzone-content:before{content:"";display:block;position:absolute;top:60px;left:60px;bottom:60px;right:60px;border:1px dashed #cecfe0;border-radius:4px;transition:.1s}.cu-state-drag-over .cu-comment-thread__dropzone-content{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-state-drag-over .cu-comment-thread__dropzone-content{background:var(--theme-main-color)}}.cu-state-drag-over .cu-comment-thread__dropzone-content:before{border:1px dashed #fff}.cu-state-drag-over .cu-comment-thread__dropzone-content .cu-comment-thread__dropzone-text{color:#fff}.cu-state-drag-over .cu-comment-thread__dropzone-content .cu-comment-thread__dropzone-icon{fill:#fff}.cu-comment-thread__dropzone-icon{height:72px;width:72px;margin:0 0 20px;fill:#cecfe0;transition:.1s}.cu-comment-thread__dropzone-text{font:16px Gotham Pro,Proxima Nova,arial,serif;color:#cfd0e0;transition:.1s}.cu-comment-thread_list-details{min-height:0}.cu-comment-thread_list-details .comments-container{padding:10px 10px 0}.cu-comment-thread__placeholder{display:flex;align-items:center;justify-content:center;height:200px;font:italic 400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-comment-thread__placeholder{color:#abaeb0}.cu-comment-thread__comment{display:block}.cu-comment-thread__show-resolved{text-align:center;font:italic 400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#4a90e2;padding:10px 0;margin-top:20px;cursor:pointer}.cu-comment-thread__show-resolved:hover{text-decoration:underline}'],encapsulation:2,data:{animation:[Object(n.m)("resolving",[Object(n.j)("resolved",Object(n.k)({opacity:1})),Object(n.l)("resolved => void",[Object(n.k)({opacity:1}),Object(n.e)("500ms ease-out",Object(n.k)({opacity:0}))])])]},changeDetection:0}),e})()},"r1+6":function(e,t,i){e.exports=i.p+"dashboards.88a295acb70395e7587a.png"},rXb0:function(e,t,i){"use strict";i.d(t,"a",function(){return k});var o=i("fXoL"),n=i("NOj5"),s=i("KN7V"),c=i("IrjZ"),a=i("LdyQ"),r=i("MJvn"),l=i("n+1/"),d=i("jJQC"),u=i("/qOb"),m=i("ofXK");function p(e,t){if(1&e){const e=o.dc();o.cc(0,"div",1),o.qc("mousedown",function(t){return o.Uc(e),o.uc().mouseDown(t)})("click",function(i){o.Uc(e);const n=t.$implicit;return o.uc().click(n,i)}),o.Xb(1,"ngx-emoji",2),o.cc(2,"div",3),o.dd(3),o.bc(),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc();o.Ob("cu-emoji-list__item_selected",n.selectedIndex===i),o.Ib(1),o.Dc("emoji",e),o.Ib(2),o.ed(e.name)}}let h=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.onSelect=new o.o,this.trackById=Object(d.d)("id"),this.selectedIndex=0}ngOnInit(){}handleKey(e){if(this.items){switch(e.key){case u.c.ENTER:this.selectedIndex<=this.items.length&&this.onSelect.emit(this.items[this.selectedIndex]);break;case u.a.ARROW_UP:this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.items.length-1);break;case u.a.ARROW_DOWN:this.selectedIndex++,this.selectedIndex>this.items.length-1&&(this.selectedIndex=0)}this.changeDetectorRef.markForCheck()}}mouseDown(e){e.stopPropagation(),e.preventDefault()}click(e,t){t.preventDefault(),t.stopPropagation(),this.onSelect.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-emoji-list"]],hostAttrs:[1,"cu-emoji-list"],inputs:{items:"items"},outputs:{onSelect:"onSelect"},decls:1,vars:2,consts:[["class","cu-emoji-list__item",3,"cu-emoji-list__item_selected","mousedown","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-emoji-list__item",3,"mousedown","click"],["size","20",1,"cu-emoji-list__item-icon",3,"emoji"],[1,"cu-emoji-list__item-text"]],template:function(e,t){1&e&&o.bd(0,p,4,4,"div",0),2&e&&o.Dc("ngForOf",t.items)("ngForTrackBy",t.trackById)},directives:[m.p,c.EmojiComponent],styles:[".cu-emoji-list__item{display:flex;align-items:center;padding:5px;min-width:250px;transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer}.cu-emoji-list__item:hover,.cu-emoji-list__item_selected{background-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-emoji-list__item:hover,.cu-emoji-list__item_selected{background-color:var(--theme-main-color)}}.cu-emoji-list__item:hover .cu-emoji-list__item-text,.cu-emoji-list__item_selected .cu-emoji-list__item-text{color:#fff}.cu-emoji-list__item-icon{margin-right:5px}.cu-emoji-list__item-text{font-weight:400;font-size:13px;line-height:1;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s}"],encapsulation:2,changeDetection:0}),e})();const f=["dropdown"],b=["emojiList"];function g(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.cc(1,"cu-emoji-list",5,6),o.qc("onSelect",function(t){return o.Uc(e),o.uc().selectEmoji(t)}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("items",e.emojisFound)}}const _=function(){return["top-left","top-right","bottom-left","bottom-right","auto"]},v=["*"];let k=(()=>{class e{constructor(e,t,i){this.emojiSearch=e,this.emojiService=t,this.changeDetectorRef=i,this.maxResults=10,this.onSelect=new o.o,this.priorityEmojis=[{key:":raised",emoji:this.emojiService.names["1F64C"]},{key:":up",emoji:this.emojiService.names["1F44D"]},{key:":check",emoji:this.emojiService.names[2705]},{key:":check",emoji:this.emojiService.names["2714-FE0F"]}]}ngOnInit(){}filter(e){const t=this.colonSearch(e),i=this.getPrioritySearch(e);let o=[];return t.length<this.maxResults&&(o=this.emojiSearch.search(e,null,this.maxResults),0===o.length&&(o=this.emojiSearch.search(e.substring(1),null,this.maxResults))),this.emojisFound=Object(n.a)(i,o,t,"id").slice(0,this.maxResults),this.changeDetectorRef.markForCheck(),this.emojisFound}open(){this.dropdown.open()}close(){this.dropdown.close()}handleKey(e){if(this.emojiList)return this.emojiList.handleKey(e)}selectEmoji(e){this.onSelect.emit(e),requestAnimationFrame(()=>{this.dropdown.close()})}getPrioritySearch(e){const t=(e||"").trim();return t.length?this.priorityEmojis.filter(e=>e.key.startsWith(t)).map(e=>e.emoji):[]}colonSearch(e){const t=(e||"").trim();return t.length?this.emojiService.emojis.filter(e=>e.colons&&e.colons.startsWith(t)):[]}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(s.a),o.Wb(c.EmojiService),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-emoji-list-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(f,1),o.jd(b,1)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.emojiList=e.first)}},hostAttrs:[1,"cu-emoji-list-dropdown"],inputs:{maxResults:"maxResults",fromRect:"fromRect"},outputs:{onSelect:"onSelect"},ngContentSelectors:v,decls:5,vars:5,consts:[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownRepositionFlag","dropdownFromRect","dropdownPlacement"],["dropdown","dropdown"],["cuDropdownToggle",""],["class","cu-emoji-list-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-emoji-list-dropdown__menu"],[3,"items","onSelect"],["emojiList",""]],template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.cc(2,"div",2),o.Bc(3),o.bc(),o.bd(4,g,3,1,"div",3),o.bc()),2&e&&o.Dc("dropdownCloseOnInsideClick",!1)("dropdownRepositionFlag",t.emojisFound)("dropdownFromRect",t.fromRect)("dropdownPlacement",o.Gc(4,_))},directives:[a.b,r.a,l.a,h],styles:[".cu-emoji-list-dropdown{margin:0}.cu-emoji-list-dropdown__menu{animation:none}"],encapsulation:2,changeDetection:0}),e})()},rh6m:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("3Pt+"),n=i("bx+h"),s=i("K0KF"),c=i("5FVs"),a=i("jLNh"),r=i("ofXK"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[r.c,o.l,a.a,c.a]]}),e})();var u=i("gb9A");let m=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[r.c,d,s.a,n.a,u.a,o.l]]}),e})()},rjyu:function(e,t,i){e.exports=i.p+"zoom.ea8e5c638ea1220045ff.png"},ryzl:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{constructor(e){this.el=e}ngAfterViewInit(){setTimeout(()=>{this.el.nativeElement.focus(),this.el.nativeElement.select()},10)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.m))},e.\u0275dir=o.Rb({type:e,selectors:[["","cuAutoFocusAndSelect",""]]}),e})()},s8Mb:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("ofXK"),n=i("mcWp"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a]]}),e})()},sVlj:function(e,t,i){e.exports=i.p+"quick-create-statuses.733070ccddb86828d596.png"},skaf:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=function(e){return e.Html="html",e.Markdown="markdown",e}({})},sl2P:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("xog/");let s=(()=>{class e{constructor(e){this.helpers=e}transform(e,t=.47){return this.helpers.checkTextColor(e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.b))},e.\u0275pipe=o.Vb({name:"isColorDarkerThan",type:e,pure:!0}),e})()},sx5D:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("0dWf"),n=i("fXoL");let s=(()=>{class e{transform(e){return e?Object(o.b)(e):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"cuTaskLink",type:e,pure:!0}),e})()},t1N4:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("ofXK"),n=i("1M0N"),s=i("IrjZ"),c=i("Fj0M"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.EmojiModule,c.EmojiPickerModule]]}),e})()},t6Eg:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("XNiG"),n=i("1G5W"),s=i("El8o"),c=i("fXoL"),a=i("jwRX");let r=(()=>{class e{constructor(e,t){this.slashCommand=e,this.el=t,this.destroy$=new o.a,this.hostHidden=!1,this.cursorPosition=0,this.prefixExp=/(^$| $)/,this.slashCommand.active$.pipe(Object(n.a)(this.destroy$)).subscribe(e=>{this.hostHidden=e}),this.slashCommand.cancelCommand.pipe(Object(n.a)(this.destroy$)).subscribe(({replace:e})=>{this.el.nativeElement.classList.remove("cu-hidden");const t=this.el.nativeElement.value;this.el.nativeElement.value=[t.slice(0,this.cursorPosition),e,t.slice(this.cursorPosition)].join(""),Object(s.c)(this.el.nativeElement,this.cursorPosition+e.length,this.cursorPosition+e.length),setTimeout(()=>{this.el.nativeElement.focus()})}),this.slashCommand.applyCommand.pipe(Object(n.a)(this.destroy$)).subscribe(()=>{setTimeout(()=>{Object(s.c)(this.el.nativeElement,this.cursorPosition,this.cursorPosition)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}inputKeyDown(e){if("/"===e.key){const t=e.target,i=t.value;this.cursorPosition=t.selectionStart||0;const o=i&&this.cursorPosition>0?i.substring(0,this.cursorPosition):"",n=i&&this.cursorPosition<i.length?i.substring(this.cursorPosition):"";o.match(this.prefixExp)&&(this.slashCommand.activate("/",o,n),e.preventDefault(),e.stopPropagation())}}forceOpen(){const e=this.el.nativeElement.value||"";this.cursorPosition=e.length,this.slashCommand.activate("",e,"")}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(a.b,1),c.Wb(c.m))},e.\u0275dir=c.Rb({type:e,selectors:[["","cuSlashCommandInput",""]],hostVars:2,hostBindings:function(e,t){1&e&&c.qc("keydown",function(e){return t.inputKeyDown(e)}),2&e&&c.Ob("cu-hidden",t.hostHidden)},exportAs:["cuSlashCommandInput"]}),e})()},t7PA:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("XNiG"),n=i("PqYM"),s=i("VRyK"),c=i("1G5W"),a=i("fXoL");let r=(()=>{class e{constructor(e,t,i){this.elm=e,this.renderer=t,this.cdr=i,this.timeout=3e3,this.copied=!1,this.destroy$=new o.a,this.copied$=new o.a}ngOnDestroy(){this.destroy$.next()}setCopied(){this.renderer.addClass(this.elm.nativeElement,this.copiedClass),this.copied=!0,this.copied$.next(),Object(n.a)(this.timeout).pipe(Object(c.a)(Object(s.a)(this.destroy$,this.copied$))).subscribe(()=>{this.copied=!1,this.renderer.removeClass(this.elm.nativeElement,this.copiedClass),this.cdr.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(a.m),a.Wb(a.H),a.Wb(a.h))},e.\u0275dir=a.Rb({type:e,selectors:[["","cuClipboardCopied",""]],inputs:{timeout:"timeout",copiedClass:"copiedClass"},exportAs:["cuClipboardCopied"]}),e})()},tCpm:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var o=i("fXoL"),n=i("jJQC"),s=i("WkAz"),c=i("ofXK"),a=i("wNhb"),r=i("UdVN"),l=i("loh9"),d=i("NsZK"),u=i("Z4aC");function m(e,t){if(1&e){const e=o.dc();o.cc(0,"div",7),o.qc("click",function(){return o.Uc(e),o.uc().unassign.emit()}),o.bc()}}function p(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.qc("click",function(t){return o.Uc(e),o.uc().reassign(t)}),o.bc()}}function h(e,t){1&e&&o.Xb(0,"cu-user-item",10),2&e&&o.Dc("user",t.$implicit)("displayProfile",!1)}function f(e,t){if(1&e&&o.bd(0,h,1,2,"cu-user-item",9),2&e){const e=o.uc();o.Dc("ngForOf",e.group.members)("ngForTrackBy",e.trackById)}}let b=(()=>{class e{constructor(){this.unassign=new o.o,this.onReassign=new o.o,this.trackById=Object(n.d)("id")}ngOnInit(){}reassign(e){e.preventDefault(),e.stopPropagation(),this.onReassign.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-group-item"]],hostAttrs:[1,"user-list-item"],hostVars:4,hostBindings:function(e,t){2&e&&o.Ob("user-list-item_selected",t.selected)("user-list-item_highlighted",t.highlighted)},inputs:{group:"group",selected:"selected",highlighted:"highlighted",showUnassign:"showUnassign",showReassign:"showReassign",disableShowUserGroupMembers:"disableShowUserGroupMembers"},outputs:{unassign:"unassign",onReassign:"onReassign"},decls:10,vars:11,consts:function(){let e;return e=$localize`:@@common_reassign␟2d656ebcad66ddffa998d5558b21b40ac45062cd␟1463922540752409787:Reassign`,[[1,"user-list-item__icon"],[3,"group","avatarSize","bordered","selected"],["class","user-list-item__icon-close","icon","close-o",3,"cuPreventDefault","click",4,"ngIf"],[1,"user-list-item__name","user-list-item__name_no-divider"],["containerClass","popover_white popover_no-padding",1,"user-list-item__count",3,"cuPopover","trigger","popoverDelay"],["class","user-list-item__reassign","cuTooltip",e,"icon","reassign",3,"click",4,"ngIf"],["userListPopover",""],["icon","close-o",1,"user-list-item__icon-close",3,"cuPreventDefault","click"],["cuTooltip",e,"icon","reassign",1,"user-list-item__reassign",3,"click"],[3,"user","displayProfile",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","displayProfile"]]},template:function(e,t){if(1&e&&(o.cc(0,"div",0),o.Xb(1,"cu-user-group-avatar",1),o.bd(2,m,1,0,"div",2),o.bc(),o.cc(3,"div",3),o.dd(4),o.bc(),o.cc(5,"div",4),o.dd(6),o.bc(),o.bd(7,p,1,0,"div",5),o.bd(8,f,1,2,"ng-template",null,6,o.cd)),2&e){const e=o.Rc(9);o.Ib(1),o.Dc("group",t.group)("avatarSize",24)("bordered",!1)("selected",t.selected),o.Ib(1),o.Dc("ngIf",t.showUnassign),o.Ib(2),o.fd(" ",t.group.name,"\n"),o.Ib(1),o.Dc("cuPopover",e)("trigger",t.group.members.length>0&&!t.disableShowUserGroupMembers?"hover":null)("popoverDelay",300),o.Ib(1),o.fd(" ",t.group.members.length," people\n"),o.Ib(1),o.Dc("ngIf",t.showReassign)}},directives:[s.a,c.q,a.a,r.a,l.a,d.a,c.p,u.a],styles:[""],changeDetection:0}),e})()},tDbv:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("fXoL"),n=i("ofXK");function s(e,t){1&e&&(o.ac(0),o.gc(1,13),o.Zb())}function c(e,t){1&e&&(o.ac(0),o.gc(1,14),o.Zb())}function a(e,t){if(1&e&&(o.cc(0,"div",10),o.bd(1,s,2,0,"ng-template",11),o.bd(2,c,2,0,"ng-template",null,12,o.cd),o.cc(4,"span"),o.dd(5),o.bc(),o.bc()),2&e){const e=o.Rc(3),t=o.uc();o.Ib(1),o.Dc("ngIf",t.isStatus)("ngIfElse",e),o.Ib(4),o.ed(t.label)}}let r=(()=>{class e{constructor(){this.isStatus=!1,this.action=new o.o}cancel(){this.action.emit(!1)}confirm(){this.action.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-confirm-archive-task"]],inputs:{label:"label",isStatus:"isStatus"},outputs:{action:"action"},decls:11,vars:1,consts:function(){let e,t,i,o,n;return e=$localize`:@@cu-confirm-archive-task__archive-hint␟1d73fe5298862ee94e8ee79689aa2166cae52dd0␟5854955583269226934: Archiving a task removes it from view but allows you to restore it at anytime. All tasks are preserved and are still searchable. `,t=$localize`:@@common_cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,i=$localize`:@@common_archive␟22c9be90eb27c5c613348fbb621792223afe5d1b␟1055686627716339120:Archive`,o=$localize`:@@cu-confirm-archive-task__status␟291d24fe7b6ef345fd7223614be30421c2a5c3dd␟29606869996017634:Archive tasks with status`,n=$localize`:@@cu-confirm-archive-task__label␟0bfca4f9efcf77d77b3e872ef236b7e1f6f72cd4␟3146259415984233656:Archive tasks with label`,[[1,"confirm-remove-category"],["class","confirm-remove-category__header",4,"ngIf"],[1,"confirm-remove-category__description"],e,[1,"confirm-remove-category__controls"],[1,"cu-btn","cu-btn_confirm-cancel",3,"click"],[1,"cu-btn__text"],t,[1,"cu-btn",3,"click"],i,[1,"confirm-remove-category__header"],[3,"ngIf","ngIfElse"],["labelTmpl",""],o,n]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.bd(1,a,6,3,"div",1),o.cc(2,"div",2),o.gc(3,3),o.bc(),o.cc(4,"div",4),o.cc(5,"button",5),o.qc("click",function(){return t.cancel()}),o.cc(6,"div",6),o.gc(7,7),o.bc(),o.bc(),o.cc(8,"button",8),o.qc("click",function(){return t.confirm()}),o.cc(9,"div",6),o.gc(10,9),o.bc(),o.bc(),o.bc(),o.bc()),2&e&&(o.Ib(1),o.Dc("ngIf",t.label))},directives:[n.q],encapsulation:2}),e})()},tGWH:function(e,t,i){"use strict";var o=i("RsFJ"),n=i("RjOF"),s=i("ZONP"),c=i("my8H"),a=i("Zpkj"),r=i("KJAg");e.exports=function(e,t,i){for(var n,c,a,l,d,u,m,p,f,b,g,_,v,k,y,w,x,I,T,C,D,O,S=this.options.commonmark,E=this.options.pedantic,P=this.blockTokenizers,j=this.interruptList,A=0,$=t.length,U=null,R=0,M=!1;A<$;){if("\t"===(a=t.charAt(A)))R+=4-R%4;else{if(" "!==a)break;R++}A++}if(!(R>=4)){if("*"===(a=t.charAt(A))||"+"===a||"-"===a)l=a,c=!1;else{for(c=!0,n="";A<$&&(a=t.charAt(A),s(a));)n+=a,A++;if(a=t.charAt(A),!n||!("."===a||S&&")"===a))return;U=parseInt(n,10),l=a}if(" "===(a=t.charAt(++A))||"\t"===a||!(E||"\n"!==a&&""!==a)){if(i)return!0;for(A=0,v=[],k=[],y=[];A<$;){for(u=A,m=!1,O=!1,-1===(d=t.indexOf("\n",A))&&(d=$),D=A+4,R=0;A<$;){if("\t"===(a=t.charAt(A)))R+=4-R%4;else{if(" "!==a)break;R++}A++}if(R>=4&&(O=!0),w&&R>=w.indent&&(O=!0),a=t.charAt(A),p=null,!O){if("*"===a||"+"===a||"-"===a)p=a,A++,R++;else{for(n="";A<$&&(a=t.charAt(A),s(a));)n+=a,A++;a=t.charAt(A),A++,n&&("."===a||S&&")"===a)&&(p=a,R+=n.length+1)}if(p)if("\t"===(a=t.charAt(A)))R+=4-R%4,A++;else if(" "===a){for(D=A+4;A<D&&" "===t.charAt(A);)A++,R++;A===D&&" "===t.charAt(A)&&(A-=3,R-=3)}else"\n"!==a&&""!==a&&(p=null)}if(p){if(!E&&l!==p)break;m=!0}else S||O||" "!==t.charAt(u)?S&&w&&(O=R>=w.indent||R>4):O=!0,m=!1,A=u;if(b=t.slice(u,d),f=u===A?b:t.slice(A,d),("*"===p||"_"===p||"-"===p)&&P.thematicBreak.call(this,e,b,!0))break;if(g=_,_=!m&&!o(f).length,O&&w)w.value=w.value.concat(y,b),k=k.concat(y,b),y=[];else if(m)0!==y.length&&(M=!0,w.value.push(""),w.trail=y.concat()),v.push(w={value:[b],indent:R,trail:[]}),k=k.concat(y,b),y=[];else if(_){if(g&&!S)break;y.push(b)}else{if(g)break;if(r(j,P,this,[e,b,!0]))break;w.value=w.value.concat(y,b),k=k.concat(y,b),y=[]}A=d+1}for(T=e(k.join("\n")).reset({type:"list",ordered:c,start:U,spread:M,children:[]}),x=this.enterList(),I=this.enterBlock(),A=-1,$=v.length;++A<$;)w=v[A].value.join("\n"),C=e.now(),e(w)(h(this,w,C),T),w=v[A].trail.join("\n"),A!==$-1&&(w+="\n"),e(w);return x(),I(),T}}};var l=/\n\n(?!\s*$)/,d=/^\[([ \t]|x|X)][ \t]/,u=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,m=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,p=/^( {1,4}|\t)?/gm;function h(e,t,i){var o,n,s=e.offset,c=e.options.pedantic?f:b,a=null;return t=c.apply(null,arguments),e.options.gfm&&(o=t.match(d))&&(n=o[0].length,a="x"===o[1].toLowerCase(),s[i.line]+=n,t=t.slice(n)),{type:"listItem",spread:l.test(t),checked:a,children:e.tokenizeBlock(t,i)}}function f(e,t,i){var o=e.offset,n=i.line;return t=t.replace(m,s),n=i.line,t.replace(p,s);function s(e){return o[n]=(o[n]||0)+e.length,n++,""}}function b(e,t,i){var o,s,r,l,d,m,p,h=e.offset,f=i.line;for(l=(t=t.replace(u,function(e,t,i,c,a){return s=t+i+c,r=a,Number(i)<10&&s.length%2==1&&(i=" "+i),(o=t+n(" ",i.length)+c)+r})).split("\n"),(d=a(t,c(o).indent).split("\n"))[0]=r,h[f]=(h[f]||0)+s.length,f++,m=0,p=l.length;++m<p;)h[f]=(h[f]||0)+l[m].length-d[m].length,f++;return d.join("\n")}},tIWb:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("fXoL"),n=i("ofXK"),s=i("NsZK"),c=i("UdVN"),a=i("peMq");function r(e,t){if(1&e&&(o.cc(0,"div",2),o.cc(1,"div",3),o.Xb(2,"div",4),o.bc(),o.Xb(3,"cu-user-group",5),o.bc()),2&e){const e=o.uc();o.Ib(3),o.Dc("users",e.usersViewing)}}function l(e,t){if(1&e&&(o.cc(0,"div",6),o.cc(1,"div",7),o.Xb(2,"span",8),o.Xb(3,"span",8),o.Xb(4,"span",8),o.bc(),o.Xb(5,"cu-user-group",5),o.bc()),2&e){const e=o.uc();o.Ib(5),o.Dc("users",e.usersTyping)}}let d=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-comment-users"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-comment-users",!0)},inputs:{usersTyping:"usersTyping",usersViewing:"usersViewing"},decls:2,vars:2,consts:function(){let e,t;return e=$localize`:@@cu-comment-users__tooltip-msg_users-viewing-this-task␟d9e7b14cde74a6f30507bf469a6df86f3e9b1ea9␟1806404620107358125:People viewing this task`,t=$localize`:@@cu-comment-users__tooltip-msg_users-commenting-on-this-task␟f7d92643edd7bd9277199bc9875719c07d2cf800␟7275273223739152351:Commenting`,[["class","task__viewing",4,"ngIf"],["class","task__commenting",4,"ngIf"],[1,"task__viewing"],["cuTooltip",e,1,"task__viewing-icon"],["icon","binoculars"],["leadCounter","5",3,"users"],[1,"task__commenting"],["cuTooltip",t,1,"task__commenting-icon"],[1,"task__commenting-dot"]]},template:function(e,t){1&e&&(o.bd(0,r,4,1,"div",0),o.bd(1,l,6,1,"div",1)),2&e&&(o.Dc("ngIf",(null==t.usersViewing?null:t.usersViewing.length)>0),o.Ib(1),o.Dc("ngIf",(null==t.usersTyping?null:t.usersTyping.length)>0))},directives:[n.q,s.a,c.a,a.a],encapsulation:2,changeDetection:0}),e})()},tTDf:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("ofXK"),n=i("K0KF"),s=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a]]}),e})()},tgGP:function(e,t,i){"use strict";var o=i("ueQ+"),n=i("+OJB"),s=i("BEtg");e.exports=r;var c={}.hasOwnProperty,a=["history","path","basename","stem","extname","dirname"];function r(e){var t,i;if(e){if("string"==typeof e||s(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof r))return new r(e);for(this.data={},this.messages=[],this.history=[],this.cwd=n.cwd(),i=-1;++i<a.length;)c.call(e,t=a[i])&&(this[t]=e[t]);for(t in e)a.indexOf(t)<0&&(this[t]=e[t])}function l(e,t){if(e&&e.indexOf(o.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+o.sep+"`")}function d(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function u(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}r.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(r.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){d(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(r.prototype,"dirname",{get:function(){return"string"==typeof this.path?o.dirname(this.path):void 0},set:function(e){u(this.path,"dirname"),this.path=o.join(e||"",this.basename)}}),Object.defineProperty(r.prototype,"basename",{get:function(){return"string"==typeof this.path?o.basename(this.path):void 0},set:function(e){d(e,"basename"),l(e,"basename"),this.path=o.join(this.dirname||"",e)}}),Object.defineProperty(r.prototype,"extname",{get:function(){return"string"==typeof this.path?o.extname(this.path):void 0},set:function(e){if(l(e,"extname"),u(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=o.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(r.prototype,"stem",{get:function(){return"string"==typeof this.path?o.basename(this.path,this.extname):void 0},set:function(e){d(e,"stem"),l(e,"stem"),this.path=o.join(this.dirname||"",e+(this.extname||""))}})},tgay:function(e,t,i){"use strict";var o=i("NFD0");function n(e,t,i){var o,n;if("\\"===t.charAt(0)&&(o=t.charAt(1),-1!==this.escape.indexOf(o)))return!!i||(n="\n"===o?{type:"break"}:{type:"text",value:o},e("\\"+o)(n))}e.exports=n,n.locator=o},u4pA:function(e,t,i){"use strict";i.d(t,"a",function(){return _});var o=i("pLZG"),n=i("zp1y"),s=i("1G5W"),c=i("4bgU"),a=i("2Vo4"),r=i("XNiG"),l=i("itXk"),d=i("fXoL"),u=i("ofXK"),m=i("KAhl"),p=i("2uWK"),h=i("V1MX");const f=["singlePointsEstimates"];function b(e,t){if(1&e){const e=d.dc();d.cc(0,"cu-points-estimates-dropdown",2),d.qc("onPointsEstimatesAction",function(t){return d.Uc(e),d.uc().pointsEstimatesAction(t)}),d.vc(1,"async"),d.Xb(2,"cu-points-estimates-display",3),d.bc()}if(2&e){const e=d.uc();d.Dc("readonly",!1)("points",e.points)("availablePoints",null==e.team?null:e.team.points_scale)("team",e.team)("users",d.wc(1,7,e.users$)),d.Ib(2),d.Dc("points",e.points)("dashedIcon",!0)}}function g(e,t){if(1&e){const e=d.dc();d.cc(0,"cu-points-estimates",4,5),d.qc("onPointsEstimatesAction",function(t){return d.Uc(e),d.uc().pointsEstimatesAction(t,!0)})("onClose",function(){return d.Uc(e),d.uc().onClose.emit()})("onOpen",function(){return d.Uc(e),d.uc().onOpen.emit()}),d.vc(2,"async"),d.vc(3,"async"),d.Xb(4,"cu-points-estimates-display",3),d.bc()}if(2&e){const e=d.uc();let t=null;d.Dc("points",e.points)("availablePoints",null==e.team?null:e.team.points_scale)("showNormalDisplay",!1)("user",null!=(t=d.wc(2,7,e.users$))&&t.length?d.wc(3,9,e.users$)[0]:null)("showAllOption",!1),d.Ib(4),d.Dc("points",e.points)("dashedIcon",!0)}}let _=(()=>{class e{constructor(){this.onPointsEstimatesAction=new d.o,this.onClose=new d.o,this.onOpen=new d.o,this.forceAssigneeCheck$=new a.a(0),this.assignees$=new a.a([]),this.users$=new a.a([]),this.points$=new a.a(null),this.assigneePointsEstimatesMap$=new a.a(null),this.destroy$=new r.a}ngOnInit(){Object(l.a)([this.assignees$,this.forceAssigneeCheck$]).pipe(Object(o.a)(()=>this.team&&this.team.points_per_assignee),Object(n.a)(this.assigneePointsEstimatesMap$,this.points$),Object(s.a)(this.destroy$)).subscribe(([[e,t],i,o])=>{let n;o=isNaN(o)?null:o,e&&e.length||(this.assigneePointsEstimatesMap$.next(null),this.users$.next([]));const s=i&&Object.entries(i).some(([e,t])=>!!t);n=e.map(s?e=>Object.assign(Object.assign({},e),{points:i[e.id]}):t=>Object.assign(Object.assign({},t),{points:o?o/e.length:null})),this.users$.next(n)}),this.users$.pipe(Object(s.a)(this.destroy$)).subscribe(e=>{let t;e&&e.length||(t=null),t=e.reduce((e,t)=>(e[t.id]=t.points,e),{}),this.assigneePointsEstimatesMap$.next(t)}),this.assigneePointsEstimatesMap$.pipe(Object(s.a)(this.destroy$)).subscribe(e=>{const t=e?Object.entries(e).reduce((e,[t,i])=>(i&&(e+=i),e),0):null;this.onPointsEstimatesAction.emit({action:c.a.UpdateDraftAssigneeData,draftUpdate:{points:t,assigneeMap:e}})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(e){(e.assignees||e.team)&&this.assignees$.next(this.team&&!this.team.points_per_assignee?[]:this.assignees),e.points&&this.points$.next(this.points)}forceUpdate(){this.forceAssigneeCheck$.next(this.forceAssigneeCheck$.value+1)}pointsEstimatesAction(e,t=!1){if(this.assignees&&this.assignees.length&&this.team&&this.team.points_per_assignee){if(e.action===c.a.UpdateTaskPointsEstimates){const t=this.assignees.map(t=>Object.assign(Object.assign({},t),{points:e.points?e.points/this.assignees.length:null}));this.users$.next(t)}else if(e.action===c.a.UpdateTaskAssigneePointsEstimates){const t=(this.users$.value||[]).map(t=>t.id===e.user.id||(e.assignees||[]).includes(t.id)?Object.assign(Object.assign({},t),{points:e.points}):t);this.users$.next(t)}}else this.onPointsEstimatesAction.emit(e);t&&this.singlePointsEstimates&&e.action!==c.a.FetchTaskPointsEstimatesData&&this.singlePointsEstimates.close()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Qb({type:e,selectors:[["cu-create-task-points-estimates"]],viewQuery:function(e,t){if(1&e&&d.jd(f,1),2&e){let e;d.Qc(e=d.rc())&&(t.singlePointsEstimates=e.first)}},inputs:{assignees:"assignees",points:"points",team:"team"},outputs:{onPointsEstimatesAction:"onPointsEstimatesAction",onClose:"onClose",onOpen:"onOpen"},features:[d.Gb],decls:4,vars:4,consts:[[3,"readonly","points","availablePoints","team","users","onPointsEstimatesAction",4,"ngIf","ngIfElse"],["showOneInput",""],[3,"readonly","points","availablePoints","team","users","onPointsEstimatesAction"],[3,"points","dashedIcon"],[3,"points","availablePoints","showNormalDisplay","user","showAllOption","onPointsEstimatesAction","onClose","onOpen"],["singlePointsEstimates",""]],template:function(e,t){if(1&e&&(d.bd(0,b,3,9,"cu-points-estimates-dropdown",0),d.vc(1,"async"),d.bd(2,g,5,11,"ng-template",null,1,d.cd)),2&e){const e=d.Rc(3);let i=null;d.Dc("ngIf",(null==(i=d.wc(1,2,t.users$))?null:i.length)>1)("ngIfElse",e)}},directives:[u.q,m.a,p.a,h.a],pipes:[u.b],styles:[""],changeDetection:0}),e})()},u7Ji:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("oy6Y");let s=(()=>{class e{constructor(e){this.timezonesService=e}transform(e,t=!0,i=!0,o=" at "){return this.timezonesService.formatUserDateTime(e,t,i,o)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a))},e.\u0275pipe=o.Vb({name:"formatDateTime",type:e,pure:!0}),e})()},uDQY:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var o=i("fXoL"),n=i("/qOb"),s=i("XNiG"),c=i("zP0r"),a=i("1G5W"),r=i("tyNb"),l=i("3Pt+"),d=i("ofXK"),u=i("UdVN");const m=["input"],p=["navEditor"];function h(e,t){if(1&e){const e=o.dc();o.cc(0,"div",4),o.cc(1,"div",5),o.qc("click",function(){return o.Uc(e),o.uc().saveAndBlur()}),o.bc(),o.cc(2,"div",6),o.qc("click",function(){return o.Uc(e),o.uc().cancelAndBlur()}),o.bc(),o.bc()}}let f=(()=>{class e{constructor(e,t){this.renderer=e,this.route=t,this.destroy$=new s.a,this.name="",this.modifier="",this.forTags=!0,this.preventClicks=!1,this.showDoneCancelButtons=!1,this.listenForIndents=!1,this.onAction=new o.o,this.onIndent=new o.o}ngAfterViewInit(){this.showDoneCancelButtons&&this.getContainerWidth(),this.input.nativeElement.focus(),this.blurListener=this.renderer.listen(this.input.nativeElement,"blur",()=>{this.showDoneCancelButtons||(this.name&&this.name.trim().length>0?this.save():this.cancel())}),this.preventClicks&&(this.clickListener=this.renderer.listen(this.input.nativeElement,"click",e=>{e.preventDefault(),e.stopPropagation()})),this.keyDownListener=this.renderer.listen(this.input.nativeElement,"keydown",e=>{switch(e.keyCode){case n.a.ENTER:e.preventDefault(),e.stopPropagation(),this.save();break;case n.a.ESCAPE:this.input.nativeElement.blur()}}),this.route.queryParams.pipe(Object(c.a)(1),Object(a.a)(this.destroy$)).subscribe(()=>{this.input&&this.input.nativeElement.blur()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.clickListener&&(this.clickListener(),this.clickListener=null),this.blurListener&&(this.blurListener(),this.blurListener=null),this.keyDownListener&&(this.keyDownListener(),this.keyDownListener=null)}shiftTabDown(e){this.listenForIndents&&0===e.currentTarget.selectionStart&&(this.onIndent.emit({indent:!1}),this.cancel())}tabDown(e){this.listenForIndents&&0===e.currentTarget.selectionStart&&(this.onIndent.emit({indent:!0}),this.cancel())}save(){if(!this.name.trim().length)return;const e=this.forTags?this.name.toLowerCase():this.name;this.onAction.emit({action:"save",name:e})}cancel(){this.onAction.emit({action:"cancel"})}saveAndBlur(){this.save(),this.input.nativeElement.blur()}cancelAndBlur(){this.cancel(),this.input.nativeElement.blur()}getContainerWidth(){this.navEditor&&(this.width=this.navEditor.nativeElement.offsetWidth+38)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.H),o.Wb(r.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-quick-actions-menu-editor"]],viewQuery:function(e,t){if(1&e&&(o.jd(m,3),o.jd(p,3)),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first),o.Qc(e=o.rc())&&(t.navEditor=e.first)}},hostAttrs:[1,"cu-quick-actions-menu-editor"],inputs:{name:"name",modifier:"modifier",forTags:"forTags",preventClicks:"preventClicks",showDoneCancelButtons:"showDoneCancelButtons",listenForIndents:"listenForIndents"},outputs:{onAction:"onAction",onIndent:"onIndent"},decls:5,vars:9,consts:[["navEditor",""],["type","text",1,"nav-editor__input",3,"ngModel","ngModelChange","keydown.shift.tab","keydown.tab"],["input",""],["class","nav-editor__with-buttons-button-container",4,"ngIf"],[1,"nav-editor__with-buttons-button-container"],["icon","check-bold",1,"nav-editor__with-buttons-save",3,"click"],["icon","cu2-times",1,"nav-editor__with-buttons-cancel",3,"click"]],template:function(e,t){1&e&&(o.cc(0,"div",null,0),o.cc(2,"input",1,2),o.qc("ngModelChange",function(e){return t.name=e})("keydown.shift.tab",function(e){return t.shiftTabDown(e)})("keydown.tab",function(e){return t.tabDown(e)}),o.bc(),o.bd(4,h,3,0,"div",3),o.bc()),2&e&&(o.Mb("nav-editor ",t.modifier,""),o.ad("width",t.showDoneCancelButtons?t.width:"auto","px"),o.Ob("nav-editor__with-buttons",t.showDoneCancelButtons),o.Ib(2),o.Dc("ngModel",t.name),o.Ib(2),o.Dc("ngIf",t.showDoneCancelButtons))},directives:[l.c,l.p,l.s,d.q,u.a],styles:[".cu-quick-actions-menu-editor{z-index:10}"],encapsulation:2}),e})()},uFGp:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return c});var o=i("2FeZ"),n=i("BYBp");function s(e,t,i){const{keyCode:s}=e;return!Object(n.a)(e).find(e=>e.className&&"string"==typeof e.className&&e.className.split(" ").includes("ag-root-wrapper"))&&!c(e)&&!document.fullscreenElement&&!document.body.classList.contains("cu-dropdown_open")&&!document.body.classList.contains("modal-window_open")&&!document.body.classList.contains("cu-comment-submitting")&&(!document.body.classList.contains("attachments-viewer_open")||i&&i.attachmentsViewer)&&!document.body.classList.contains(o.a)&&!document.body.classList.contains("hotkeys_disabled")&&(!document.body.classList.contains("modal-open")||i&&i.modal||84===s)&&(!e.ctrlKey||"ctrl"===t)&&(!e.metaKey||"meta"===t)&&(!e.shiftKey||"shift"===t)&&(!e.altKey||"alt"===t)&&!e.defaultPrevented}function c(e){const t=e.target||e.srcElement||document.activeElement,i=t&&t.tagName?t.tagName.toLowerCase():"";return t&&(t.isContentEditable||"input"===i||"textarea"===i)}},uKvr:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("jJW4");let s=(()=>{class e{constructor(e){this.sharedData=e}transform(e,t=!1){if(e||"[object Object]"===Object.prototype.toString.call(e))return"members"in e?e.members.some(e=>e.id===this.sharedData.currentUser.value.id):e.id===this.sharedData.currentUser.value.id}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a))},e.\u0275pipe=o.Vb({name:"itsme",type:e,pure:!0}),e})()},uOjc:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("fXoL"),n=i("jJQC"),s=i("ofXK"),c=i("UdVN");function a(e,t){if(1&e&&o.Xb(0,"div",3),2&e){const e=o.uc().$implicit;o.Dc("icon",e.icon)}}function r(e,t){if(1&e){const e=o.dc();o.cc(0,"div",1),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc().onSelect.emit(i)}),o.bd(1,a,1,1,"div",2),o.dd(2),o.bc()}if(2&e){const e=t.$implicit,i=o.uc();o.Ob("cu-segmented-control__item_selected",e.id===i.value),o.Ib(1),o.Dc("ngIf",e.icon),o.Ib(1),o.fd(" ",e.title,"\n")}}let l=(()=>{class e{constructor(){this.noBorders=!1,this.onSelect=new o.o,this.trackById=Object(n.d)("id")}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-segmented-control"]],hostAttrs:[1,"cu-segmented-control"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-segmented-control_no-borders",t.noBorders)},inputs:{items:"items",value:"value",noBorders:"noBorders"},outputs:{onSelect:"onSelect"},decls:1,vars:2,consts:[["class","cu-segmented-control__item",3,"cu-segmented-control__item_selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-segmented-control__item",3,"click"],["class","cu-segmented-control__item-icon",3,"icon",4,"ngIf"],[1,"cu-segmented-control__item-icon",3,"icon"]],template:function(e,t){1&e&&o.bd(0,r,3,4,"div",0),2&e&&o.Dc("ngForOf",t.items)("ngForTrackBy",t.trackById)},directives:[s.p,s.q,c.a],styles:[".cu-segmented-control{display:flex}.cu-segmented-control:first-child{margin-right:10px}.cu-segmented-control:last-child{margin-left:10px}.cu-segmented-control__item{color:#7b68ee;background:#fff;font:400 12px Gotham Pro,Proxima Nova,arial,serif;padding:8px 12px;cursor:pointer;border:1px solid #e4e4e4;border-right-width:0}@supports (--theme-main-color:#7b68ee){.cu-segmented-control__item{border-color:var(--theme-main-color);color:var(--theme-main-color)}}.dark-theme .cu-segmented-control__item{background:#384047}.cu-segmented-control__item:last-of-type{border-right-width:1px;border-top-right-radius:5px;border-bottom-right-radius:5px}.cu-segmented-control__item:first-of-type{border-top-left-radius:5px;border-bottom-left-radius:5px}.cu-segmented-control__item:hover,.cu-segmented-control__item_selected{background:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.cu-segmented-control__item:hover,.cu-segmented-control__item_selected{background:var(--theme-main-color)}}.dark-theme .cu-segmented-control__item:hover,.dark-theme .cu-segmented-control__item_selected{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-segmented-control__item:hover,.dark-theme .cu-segmented-control__item_selected{background:var(--theme-main-color)}}.cu-segmented-control__item:hover .cu-segmented-control__item-icon,.cu-segmented-control__item_selected .cu-segmented-control__item-icon{fill:#fff}.dark-theme .cu-segmented-control__item:hover .cu-segmented-control__item-icon,.dark-theme .cu-segmented-control__item_selected .cu-segmented-control__item-icon{color:#fff}.cu-segmented-control__item-icon{width:16px;height:16px;fill:#292d34}.dark-theme .cu-segmented-control__item-icon{fill:#fff}.cu-segmented-control_no-borders .cu-segmented-control__item{border:0;padding:8px;color:#292d34}.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item{color:#d5d6d7}.cu-segmented-control_no-borders .cu-segmented-control__item:hover,.cu-segmented-control_no-borders .cu-segmented-control__item_selected{color:#7b68ee;background:transparent}@supports (--theme-main-color:#7b68ee){.cu-segmented-control_no-borders .cu-segmented-control__item:hover,.cu-segmented-control_no-borders .cu-segmented-control__item_selected{color:var(--theme-main-color)}}.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item:hover,.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item_selected{color:#7b68ee;background:transparent}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item:hover,.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item_selected{color:var(--theme-main-color)}}.cu-segmented-control_no-borders .cu-segmented-control__item:hover .cu-segmented-control__item-icon,.cu-segmented-control_no-borders .cu-segmented-control__item_selected .cu-segmented-control__item-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-segmented-control_no-borders .cu-segmented-control__item:hover .cu-segmented-control__item-icon,.cu-segmented-control_no-borders .cu-segmented-control__item_selected .cu-segmented-control__item-icon{fill:var(--theme-main-color)}}.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item:hover .cu-segmented-control__item-icon,.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item_selected .cu-segmented-control__item-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item:hover .cu-segmented-control__item-icon,.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item_selected .cu-segmented-control__item-icon{fill:var(--theme-main-color)}}.cu-segmented-control_no-borders .cu-segmented-control__item-icon{fill:#292d34}.dark-theme .cu-segmented-control_no-borders .cu-segmented-control__item-icon{fill:#d5d6d7}"],encapsulation:2,changeDetection:0}),e})()},uSqK:function(e,t,i){e.exports=i.p+"outlook-setup-2-1.fa0fd87503b47cfb4998.png"},uT1E:function(e,t,i){"use strict";i.d(t,"a",function(){return b});var o=i("fXoL"),n=i("5b//"),s=i("3Pt+"),c=i("ryzl"),a=i("ofXK"),r=i("KqN+"),l=i("b+fk"),d=i("uOjc");const u=["titleNgModel"],m=["urlNgModel"];function p(e,t){1&e&&(o.cc(0,"div",14),o.gc(1,15),o.bc())}function h(e,t){1&e&&(o.cc(0,"div",14),o.gc(1,16),o.bc())}function f(e,t){1&e&&(o.cc(0,"div",14),o.gc(1,17),o.bc())}let b=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.submitText=$localize`:@@cu-button-options__add-btn:Add button`,this.onChange=new o.o,this.onSubmit=new o.o,this.presetColors=n.c,this.alignItems=[{id:"left",title:"",icon:"cu2-align-left"},{id:"center",title:"",icon:"cu2-align-center"},{id:"right",title:"",icon:"cu2-align-right"}]}ngOnInit(){}ngOnChanges(e){e.options&&(this.url=this.options?this.options.url:"",this.title=this.options?this.options.title:"",this.changeDetectorRef.detectChanges())}submit(){this.titleModel.invalid||this.urlModel.invalid||this.onSubmit.emit(Object.assign(Object.assign({},this.options),{title:this.title,url:this.fixUrl(this.url)}))}setColor(e){this.updateOptions({color:e})}setAlign(e){this.updateOptions({align:e})}setUrl(e){e.valid&&this.updateOptions({url:this.fixUrl(this.url)})}setTitle(e){e.valid&&this.updateOptions({title:this.title})}updateOptions(e){this.onChange.emit(Object.assign(Object.assign({},this.options),e))}fixUrl(e){return e&&!e.startsWith("http")?"http://"+e:e}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-button-options"]],viewQuery:function(e,t){if(1&e&&(o.jd(u,3),o.jd(m,3)),2&e){let e;o.Qc(e=o.rc())&&(t.titleModel=e.first),o.Qc(e=o.rc())&&(t.urlModel=e.first)}},hostAttrs:[1,"cu-button-options"],inputs:{submitText:"submitText",options:"options"},outputs:{onChange:"onChange",onSubmit:"onSubmit"},features:[o.Gb],decls:29,vars:19,consts:function(){let e,t,i,o,n,s,c,a;return e=$localize`:@@common_title␟fdf7cbdc140d0aab0f0b6c06065a0fd448ed6a2e␟5701618810648052610:Title`,t=$localize`:@@cu-button-options__form-placeholder_button-title␟e14569d1da2ea4f9bc15bcd3ab801f6eed075eec␟4668925765378228877:Button title`,i=$localize`:@@cu-button-options__form-label_url␟801b98c6f02fe3b32f6afa3ee854c99ed83474e6␟2375260419993138758:URL`,o=$localize`:@@forms_label--primary-color␟afb4fbdc87f730bf34a343b1829330f9bd3abfaa␟5389274721155083635:Primary color`,n=$localize`:@@cu-button-options__form-label_align␟759b6c36ba72b5707d2d37c43be101e4c43dc4de␟6998464152354639086:Align`,s=$localize`:@@cu-button-options__form-error_title-required␟963649602d49f1bae5a24b1d444c757440a0d855␟1182538537986325429: Title is required `,c=$localize`:@@errors_form-field--url-invalid-2␟b4aa0611ecadbae30b55049a79179963137f1d28␟4298865852388644550: Invalid URL entered `,a=$localize`:@@cu-button-options__form-error_url-required␟f98340077f253d3883edcbc0c0b3aee80d89723e␟7496593308679899388: URL is required `,[["optionsForm","ngForm"],[1,"cu-button-options__label"],e,["cuAutoFocusAndSelect","","required","","type","text","name","title","placeholder",t,1,"cu-button-options__input",3,"ngModel","ngModelChange","blur","keyup.Enter"],["titleNgModel","ngModel"],["class","cu-button-options__error",4,"ngIf"],i,["cuUrlFormControl","","required","","type","url","name","url","placeholder","https://",1,"cu-button-options__input",3,"ngModel","ngModelChange","blur","keyup.Enter"],["urlNgModel","ngModel"],o,[1,"cu-button-options__color",3,"presetColors","onlyPickFromPresets","inline","selectedColor","selectedColorChange"],n,[3,"items","value","noBorders","onSelect"],[1,"cu-button-options__submit","cu-btn","cu-btn_sm","cu-btn_full-width",3,"click"],[1,"cu-button-options__error"],s,c,a]},template:function(e,t){if(1&e){const e=o.dc();o.cc(0,"form",null,0),o.cc(2,"label",1),o.ac(3),o.gc(4,2),o.Zb(),o.dd(5,":"),o.bc(),o.cc(6,"input",3,4),o.qc("ngModelChange",function(e){return t.title=e})("blur",function(){o.Uc(e);const i=o.Rc(7);return t.setTitle(i)})("keyup.Enter",function(){o.Uc(e);const i=o.Rc(7);return t.setTitle(i)}),o.bc(),o.bd(8,p,2,0,"div",5),o.cc(9,"label",1),o.ac(10),o.gc(11,6),o.Zb(),o.dd(12,":"),o.bc(),o.cc(13,"input",7,8),o.qc("ngModelChange",function(e){return t.url=e})("blur",function(){o.Uc(e);const i=o.Rc(14);return t.setUrl(i)})("keyup.Enter",function(){o.Uc(e);const i=o.Rc(14);return t.setUrl(i)}),o.bc(),o.bd(15,h,2,0,"div",5),o.bd(16,f,2,0,"div",5),o.cc(17,"label",1),o.ac(18),o.gc(19,9),o.Zb(),o.dd(20,":"),o.bc(),o.cc(21,"cu-color-picker-panel",10),o.qc("selectedColorChange",function(e){return t.setColor(e)}),o.bc(),o.cc(22,"label",1),o.ac(23),o.gc(24,11),o.Zb(),o.dd(25,":"),o.bc(),o.cc(26,"cu-segmented-control",12),o.qc("onSelect",function(e){return t.setAlign(null==e?null:e.id)}),o.bc(),o.cc(27,"button",13),o.qc("click",function(){return t.submit()}),o.dd(28),o.bc(),o.bc()}if(2&e){const e=o.Rc(7),i=o.Rc(14);o.Ib(6),o.Ob("cu-button-options__input_invalid",e.touched&&!e.valid),o.Dc("ngModel",t.title),o.Ib(2),o.Dc("ngIf",(null==e?null:e.touched)&&(null==e||null==e.errors?null:e.errors.required)),o.Ib(5),o.Ob("cu-button-options__input_invalid",i.touched&&!i.valid),o.Dc("ngModel",t.url),o.Ib(2),o.Dc("ngIf",(null==i?null:i.invalid)&&(null==i?null:i.touched)&&!(null!=i&&i.errors.required)),o.Ib(1),o.Dc("ngIf",(null==i||null==i.errors?null:i.errors.required)&&(null==i?null:i.touched)),o.Ib(5),o.Dc("presetColors",t.presetColors)("onlyPickFromPresets",!0)("inline",!0)("selectedColor",null==t.options?null:t.options.color),o.Ib(5),o.Dc("items",t.alignItems)("value",(null==t.options?null:t.options.align)||"left")("noBorders",!0),o.Ib(1),o.Ob("cu-btn_disabled",(null==e?null:e.invalid)||(null==i?null:i.invalid)),o.Ib(1),o.fd(" ",t.submitText," ")}},directives:[s.C,s.q,s.r,s.c,c.a,s.y,s.p,s.s,a.q,r.a,l.a,d.a],styles:['.cu-button-options{display:block;padding:20px;min-width:320px}.cu-button-options__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;display:block;margin-bottom:9px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-button-options__label{font-family:var(--global-font-support)}}.dark-theme .cu-button-options__label{color:#d5d6d7}.cu-button-options__error{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;margin-top:-18px;width:100%;color:#d16464;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-button-options__color{display:block;margin-bottom:20px}.cu-button-options__input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;width:100%;min-height:30px;border:1px solid #e9ebf0;display:flex;align-items:center;padding:0 10px;border-radius:3px;margin-bottom:20px;color:#292d34;background-color:#fff;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-button-options__input{font-family:var(--global-font-support)}}.cu-button-options__input:focus{box-shadow:none}.dark-theme .cu-button-options__input{background-color:#2b343b;color:#d5d6d7;border-color:#1e272e}.cu-button-options__input:-ms-input-placeholder{color:rgba(41,45,52,.4)}.cu-button-options__input::placeholder{color:rgba(41,45,52,.4)}.dark-theme .cu-button-options__input:-ms-input-placeholder{color:#828588}.dark-theme .cu-button-options__input::placeholder{color:#828588}.cu-button-options__input_invalid,.dark-theme .cu-button-options__input_invalid{border-color:#d16464}.cu-button-options .cu-segmented-control{margin-left:-8px}.cu-button-options__submit{margin-top:25px}'],encapsulation:2,changeDetection:0}),e})()},"ueQ+":function(e,t,i){"use strict";function o(e){var t,i;return n(e),t=47===e.charCodeAt(0),(i=function(e,t){for(var i,o,n="",s=0,c=-1,a=0,r=-1;++r<=e.length;){if(r<e.length)i=e.charCodeAt(r);else{if(47===i)break;i=47}if(47===i){if(c===r-1||1===a);else if(c!==r-1&&2===a){if(n.length<2||2!==s||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){if((o=n.lastIndexOf("/"))!==n.length-1){o<0?(n="",s=0):s=(n=n.slice(0,o)).length-1-n.lastIndexOf("/"),c=r,a=0;continue}}else if(n.length){n="",s=0,c=r,a=0;continue}t&&(n=n.length?n+"/..":"..",s=2)}else n.length?n+="/"+e.slice(c+1,r):n=e.slice(c+1,r),s=r-c-1;c=r,a=0}else 46===i&&a>-1?a++:a=-1}return n}(e,!t)).length||t||(i="."),i.length&&47===e.charCodeAt(e.length-1)&&(i+="/"),t?"/"+i:i}function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}t.basename=function(e,t){var i,o,s,c,a=0,r=-1;if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');if(n(e),i=e.length,void 0===t||!t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(s){a=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(a,r)}if(t===e)return"";for(o=-1,c=t.length-1;i--;)if(47===e.charCodeAt(i)){if(s){a=i+1;break}}else o<0&&(s=!0,o=i+1),c>-1&&(e.charCodeAt(i)===t.charCodeAt(c--)?c<0&&(r=i):(c=-1,r=o));return a===r?r=o:r<0&&(r=e.length),e.slice(a,r)},t.dirname=function(e){var t,i,o;if(n(e),!e.length)return".";for(t=-1,o=e.length;--o;)if(47===e.charCodeAt(o)){if(i){t=o;break}}else i||(i=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},t.extname=function(e){var t,i,o,s=-1,c=0,a=-1,r=0;for(n(e),o=e.length;o--;)if(47!==(i=e.charCodeAt(o)))a<0&&(t=!0,a=o+1),46===i?s<0?s=o:1!==r&&(r=1):s>-1&&(r=-1);else if(t){c=o+1;break}return s<0||a<0||0===r||1===r&&s===a-1&&s===c+1?"":e.slice(s,a)},t.join=function(){for(var e,t=-1;++t<arguments.length;)n(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":o(e)},t.sep="/"},ujc1:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fXoL");let n=(()=>{class e{constructor(){this.enabled=!1,this.prefix="Logger",this.fontSize=11,this.colors={info:"mediumorchid",success:"mediumseagreen",warning:"darkorange",error:"crimson"}}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}setPrefix(e){return this.prefix=e,this}log(e){this.isEnabled()&&this._writeMessage("info",e)}success(e){this.isEnabled()&&this._writeMessage("success",e)}warning(e){this.isEnabled()&&this._writeMessage("warning",e)}error(e){this.isEnabled()&&this._writeMessage("error",e)}_writeMessage(e,t){let i="log";switch(e){case"info":case"success":i="log";break;case"warning":i="warn";break;case"error":i="error"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Sb({token:e,factory:e.\u0275fac}),e})()},ujgL:function(e,t,i){"use strict";var o=i("IPAr");e.exports=function(e,t,i){var n,s,c,a,r,l,d,u,m,p,h,f,b,g,_,v,k,y,w,x,I,T;if(this.options.gfm){for(n=0,v=0,l=t.length+1,d=[];n<l;){if(x=t.indexOf("\n",n),I=t.indexOf("|",n+1),-1===x&&(x=t.length),-1===I||I>x){if(v<2)return;break}d.push(t.slice(n,x)),v++,n=x+1}for(a=d.join("\n"),n=0,l=(s=d.splice(1,1)[0]||[]).length,v--,c=!1,h=[];n<l;){if("|"===(m=s.charAt(n))){if(p=null,!1===c){if(!1===T)return}else h.push(c),c=!1;T=!1}else if("-"===m)p=!0,c=c||null;else if(":"===m)c="left"===c?"center":p&&null===c?"right":"left";else if(!o(m))return;n++}if(!1!==c&&h.push(c),!(h.length<1)){if(i)return!0;for(_=-1,y=[],w=e(a).reset({type:"table",align:h,children:y});++_<v;){for(k=d[_],r={type:"tableRow",children:[]},_&&e("\n"),e(k).reset(r,w),l=k.length+1,n=0,u="",f="",b=!0;n<l;)"\t"!==(m=k.charAt(n))&&" "!==m?(""===m||"|"===m?b?e(m):(!f&&!m||b||(a=f,u.length>1&&(m?(a+=u.slice(0,u.length-1),u=u.charAt(u.length-1)):(a+=u,u="")),g=e.now(),e(a)({type:"tableCell",children:this.tokenizeInline(f,g)},r)),e(u+m),u="",f=""):(u&&(f+=u,u=""),f+=m,"\\"===m&&n!==l-2&&(f+=k.charAt(n+1),n++)),b=!1,n++):(f?u+=m:e(m),n++);_||e("\n"+s)}return w}}}},ukJz:function(e,t,i){"use strict";i.d(t,"a",function(){return rt});var o=i("LdyQ"),n=i("fXoL"),s=i("lJxs"),c=i("pLZG"),a=i("1G5W"),r=i("Kj3r"),l=i("XNiG"),d=i("2Vo4"),u=i("xgIS"),m=i("f0Wu"),p=i("12P9"),h=i("M+b0"),f=i("yR4P"),b=i("PJRi"),g=i("7eOh"),_=i("DiaY"),v=i("jJW4"),k=i("MJvn"),y=i("n+1/"),w=i("ofXK"),x=i("NsZK"),I=i("UdVN"),T=i("jJQC"),C=i("itXk"),D=i("/uUt"),O=i("GXRk");const S=[{name:"content",label:"Description"},{name:"attachments",label:"Attachments"},{name:"comment_attachments",label:"Comment Attachments"},{name:"subtasks",label:"Subtasks"},{name:"assigned_comment",label:"Assigned Comments"},{name:"old_assignees",label:"Assignees"},{name:"old_subtask_assignees",label:"Subtasks Assignees"},{name:"old_followers",label:"Watchers"},{name:"old_tags",label:"Tags"},{name:"old_checklists",label:"Checklists"},{name:"custom_fields",label:"Custom Fields"},{name:"task_activity",label:"Activity and Comments"}];var E=i("xog/"),P=i("rLOZ"),j=i("O5gs"),A=i("WoFS"),$=i("rjKe");function U(e,t){if(1&e){const e=n.dc();n.cc(0,"div",16),n.cc(1,"label"),n.cc(2,"input",17),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc().changeCopy(i.name)}),n.bc(),n.cc(3,"div",18),n.dd(4),n.bc(),n.bc(),n.bc()}if(2&e){const e=t.$implicit,i=n.uc();n.Ib(2),n.Fc("name","copy_",e.name,""),n.Dc("checked",(i.localCopyOptions?i.localCopyOptions[e.name]:null)||(null==i.localCopyOptions?null:i.localCopyOptions.everything))("disabled",i.readOnly),n.Ib(1),n.Ob("cu-checkbox_checked",i.localCopyOptions?i.localCopyOptions[e.name]:null)("cu-checkbox_muted",null==i.localCopyOptions?null:i.localCopyOptions.everything),n.Ib(1),n.fd(" ",e.label," ")}}let R=(()=>{class e{constructor(){this.readOnly=!1,this.onChange=new n.o,this.onCancel=new n.o,this.copyOptions=[...S],this.trackByName=Object(T.d)("name"),this.localCopyOptions={}}ngOnInit(){this.localCopyOptions=Object.assign({},this.options)}changeCopy(e){return this.localCopyOptions||(this.localCopyOptions={}),this.localCopyOptions.everything?(this.localCopyOptions={everything:!1},this.copyOptions.forEach(t=>{this.localCopyOptions[t.name]=t.name!==e}),!1):(this.localCopyOptions[e]=!this.localCopyOptions[e],!0)}changeCopyAll(){this.localCopyOptions||(this.localCopyOptions={}),this.localCopyOptions={everything:!this.localCopyOptions.everything}}notifyChanges(e){this.onChange.emit(this.localCopyOptions)}onClickCancel(){this.onCancel.emit()}onSave(){this.notifyChanges("changeCopy")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-recurring-copy-options"]],hostAttrs:[1,"cu-recurring-copy-options"],inputs:{readOnly:"readOnly",options:"options"},outputs:{onChange:"onChange",onCancel:"onCancel"},decls:17,vars:6,consts:function(){let e,t,i,o;return e=$localize`:@@common_recur-copy-settings--include-in-new-task␟3458b68640c2b693ca6338dfdea29142de499707␟3830839710359656752: Include in new task `,t=$localize`:@@common_include-everything␟e9fd794a22042f78cc30d7a9e837c21efa114826␟8531191091306830712: Include everything `,i=$localize`:@@common_cancel␟e67bebb0291cbe76b190e83225878cdd3a8a6df6␟4233344881307710716: Cancel `,o=$localize`:@@common_save␟9e0eaab2042cd18d46b66c7fafc914b7e54b91c3␟4094840963534996627: Save `,[[1,"cu-recurring-copy-options__header"],[1,"cu-recurring-copy-options__header-title"],e,["icon","cu2-close",1,"cu-recurring-copy-options__close",3,"click"],[1,"cu-checkbox","cu-recurring-copy-options__item","cu-recurring-copy-options__item-all"],["type","checkbox","name","copy_all",1,"cu-checkbox__input",3,"checked","disabled","click"],[1,"cu-checkbox__label","cu-recurring-copy-options__label"],t,[1,"cu-recurring-copy-options__header-divider"],[1,"cu-recurring-copy-options__list"],["class","cu-checkbox cu-recurring-copy-options__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-recurring-copy-options__controls"],[1,"cu-btn","cu-btn_h-36","cu-recurring-copy-options__cancel",3,"click"],i,[1,"cu-btn","cu-btn_h-36",3,"click"],o,[1,"cu-checkbox","cu-recurring-copy-options__item"],["type","checkbox",1,"cu-checkbox__input",3,"name","checked","disabled","click"],[1,"cu-checkbox__label","recurring-options__copy-label"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"div",1),n.gc(2,2),n.bc(),n.cc(3,"span",3),n.qc("click",function(){return t.onClickCancel()}),n.bc(),n.cc(4,"div",4),n.cc(5,"label"),n.cc(6,"input",5),n.qc("click",function(){return t.changeCopyAll()}),n.bc(),n.cc(7,"div",6),n.gc(8,7),n.bc(),n.bc(),n.bc(),n.Xb(9,"div",8),n.bc(),n.cc(10,"div",9),n.bd(11,U,5,8,"div",10),n.bc(),n.cc(12,"div",11),n.cc(13,"button",12),n.qc("click",function(){return t.onClickCancel()}),n.gc(14,13),n.bc(),n.cc(15,"button",14),n.qc("click",function(){return t.onSave()}),n.gc(16,15),n.bc(),n.bc()),2&e&&(n.Ib(6),n.Dc("checked",null==t.localCopyOptions?null:t.localCopyOptions.everything)("disabled",t.readOnly),n.Ib(1),n.Ob("cu-checkbox_checked",null==t.localCopyOptions?null:t.localCopyOptions.everything),n.Ib(4),n.Dc("ngForOf",t.copyOptions)("ngForTrackBy",t.trackByName))},directives:[I.a,w.p],styles:['.cu-recurring-copy-options__header{padding:20px 15px 0}.cu-recurring-copy-options__header-title{font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;padding:0 5px 5px}.dark-theme .cu-recurring-copy-options__header-title{color:#d5d6d7}.cu-recurring-copy-options__header-divider{margin:5px 5px 0;height:1px;border-bottom:1px solid #e4e4e4}.dark-theme .cu-recurring-copy-options__header-divider{border-bottom:1px solid #1e272e}.cu-recurring-copy-options__list{display:flex;padding:5px 15px 15px;flex-direction:row;flex-wrap:wrap;width:410px}.cu-recurring-copy-options__item{width:190px;padding:5px}.cu-recurring-copy-options__item .cu-checkbox__label{font:400 12px/15px Gotham Pro,Proxima Nova,arial,serif;text-transform:none;color:#343434;height:20px;padding-left:30px}.dark-theme .cu-recurring-copy-options__item .cu-checkbox__label{color:#abaeb0}.cu-recurring-copy-options__item .cu-checkbox__label:before{width:20px;height:20px}.cu-recurring-copy-options__item .cu-checkbox__label:after{width:12px;height:12px;left:4px;top:4px;opacity:0!important}.cu-recurring-copy-options__item .cu-checkbox__label.cu-checkbox_checked:after{opacity:1!important}.cu-recurring-copy-options__item .cu-checkbox__label.cu-checkbox_muted:after{opacity:.5!important}.cu-recurring-copy-options__close{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;right:20px;top:20px;fill:#b9bec7;height:16px;width:16px;cursor:pointer}.cu-recurring-copy-options__close:hover{transform:rotate(180deg)}.cu-recurring-copy-options__controls{display:flex;padding:0 20px 20px;justify-content:flex-end}.cu-recurring-copy-options__controls .cu-btn{width:100px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-recurring-copy-options__controls .cu-btn{font-family:var(--global-font-support)}}.cu-recurring-copy-options__controls .cu-recurring-copy-options__cancel{margin-right:12px;background-color:#e9ebf0;color:#7c828d;border:none}.cu-recurring-copy-options__controls .cu-recurring-copy-options__cancel:hover{background-color:#d1d3d8}.cu-recurring-copy-options__controls .cu-recurring-copy-options__cancel-disabled{opacity:.6}'],encapsulation:2,changeDetection:0}),e})();var M=i("KbVY"),F=i("WeU5"),L=i("Xiu6");function N(e,t){if(1&e){const e=n.dc();n.cc(0,"div",7),n.qc("click",function(e){return e.stopPropagation()}),n.cc(1,"div",8),n.cc(2,"cu-datepicker",9),n.qc("onSelect",function(t){return n.Uc(e),n.uc().changeDate(t.dueDate)})("onCloseDropdown",function(){return n.Uc(e),n.uc(),n.Rc(1).close()})("arrowClick",function(){return n.Uc(e),n.uc(),n.Rc(5).dateTimeInput.nativeElement.focus()})("click",function(){return n.Uc(e),n.uc(),n.Rc(5).dateTimeInput.nativeElement.focus()}),n.bc(),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(2),n.Dc("showStart",!1)("date",e.value)("showInput",!1)("weekStart",e.weekStartDay||0)}}let z=(()=>{class e{constructor(){this.onChange=new n.o}ngOnInit(){}changeDate(e){this.onChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-datetime-nlp-dropdown"]],inputs:{value:"value",dateFormatting:"dateFormatting",weekStartDay:"weekStartDay",placeholder:"placeholder"},outputs:{onChange:"onChange"},decls:7,vars:7,consts:[["cuDropdown","",1,"cu-dropdown_datepicker",3,"dropdownCloseOnInsideClick"],["dateDropdown","dropdown"],["cuDropdownToggle",""],["toggle",""],["outsideClick","true",3,"dateVal","dateFormatting","forceUpdate","inDatePicker","displayConsistent","placeholder","onChange"],["datetimeNaturalLanguage",""],[3,"click",4,"cuDropdownMenu"],[3,"click"],[1,"datepicker-menu","datepicker-menu_custom-fields"],[3,"showStart","date","showInput","weekStart","onSelect","onCloseDropdown","arrowClick","click"]],template:function(e,t){1&e&&(n.cc(0,"div",0,1),n.cc(2,"div",2,3),n.cc(4,"cu-datetime-natural-language",4,5),n.qc("onChange",function(e){return t.changeDate(e.newMoment)}),n.bc(),n.bc(),n.bd(6,N,3,4,"div",6),n.bc()),2&e&&(n.Dc("dropdownCloseOnInsideClick",!1),n.Ib(4),n.Dc("dateVal",t.value)("dateFormatting",t.dateFormatting)("forceUpdate",!0)("inDatePicker",!1)("displayConsistent",!0)("placeholder",t.placeholder))},directives:[o.b,k.a,F.a,y.a,L.a],encapsulation:2,changeDetection:0}),e})();const q=["statusListDropdown"];function G(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"input",10),n.qc("change",function(t){return n.Uc(e),n.uc().changeInterval(t)}),n.bc(),n.cc(2,"span",11),n.dd(3),n.vc(4,"async"),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("disabled",e.disabled)("value",null==e.options?null:e.options.interval),n.Ib(2),n.ed(n.wc(4,3,e.intervalTitle$))}}function V(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",0),n.cc(2,"cu-dropdown-list",1),n.qc("onSelect",function(t){return n.Uc(e),n.uc().selectSimpleMonthOption(t)}),n.vc(3,"async"),n.cc(4,"div",2),n.dd(5),n.vc(6,"async"),n.bc(),n.Xb(7,"div",3),n.bc(),n.bc(),n.Zb()}if(2&e){const e=n.uc();n.Ib(2),n.Dc("items",n.wc(3,3,e.simpleMonthItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(6,5,e.simpleMonthTitle$)," ")}}function B(e,t){1&e&&n.Yb(0)}function X(e,t){if(1&e&&(n.cc(0,"div",0),n.bd(1,B,1,0,"ng-container",14),n.bc()),2&e){n.uc(2);const e=n.Rc(26);n.Ib(1),n.Dc("ngTemplateOutlet",e)}}function H(e,t){1&e&&n.Yb(0)}function W(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",0),n.cc(2,"cu-dropdown-list",1),n.qc("onSelect",function(t){return n.Uc(e),n.uc(3).selectPos(t)}),n.vc(3,"async"),n.cc(4,"div",2),n.dd(5),n.vc(6,"async"),n.bc(),n.Xb(7,"div",3),n.bc(),n.bc(),n.cc(8,"div",0),n.bd(9,H,1,0,"ng-container",14),n.bc(),n.Zb()}if(2&e){const e=n.uc(3),t=n.Rc(26);n.Ib(2),n.Dc("items",n.wc(3,4,e.posItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(6,6,e.posTitle$)," "),n.Ib(4),n.Dc("ngTemplateOutlet",t)}}function K(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"cu-dropdown-list",1),n.qc("onSelect",function(t){return n.Uc(e),n.uc(3).selectDay(t)}),n.vc(2,"async"),n.cc(3,"div",2),n.dd(4),n.vc(5,"async"),n.bc(),n.Xb(6,"div",3),n.bc(),n.bc()}if(2&e){const e=n.uc(3);n.Ib(1),n.Dc("items",n.wc(2,3,e.dayItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(5,5,e.dayTitle$)," ")}}function Q(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",0),n.cc(2,"cu-radiobox",15),n.qc("onChange",function(){return n.Uc(e),n.uc(2).selectMonthOnDate()}),n.gc(3,16),n.vc(4,"async"),n.bc(),n.cc(5,"cu-radiobox",15),n.qc("onChange",function(){return n.Uc(e),n.uc(2).selectMonthByWeek()}),n.gc(6,17),n.vc(7,"async"),n.bc(),n.bc(),n.bd(8,W,10,8,"ng-container",5),n.vc(9,"async"),n.bd(10,K,7,7,"div",4),n.vc(11,"async"),n.Zb()}if(2&e){const e=n.uc(2);n.Ib(2),n.Dc("checked",!n.wc(4,4,e.ruleBySetPos$)),n.Ib(3),n.Dc("checked",n.wc(7,6,e.ruleBySetPos$)),n.Ib(3),n.Dc("ngIf",n.wc(9,8,e.ruleBySetPos$)),n.Ib(2),n.Dc("ngIf",!n.wc(11,10,e.ruleBySetPos$))}}function Z(e,t){1&e&&n.Yb(0)}const Y=function(){return{class:"cu-recurring-options__input_year-day"}};function J(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"cu-dropdown-list",1),n.qc("onSelect",function(t){return n.Uc(e),n.uc(2).selectMonth(t)}),n.vc(2,"async"),n.cc(3,"div",2),n.dd(4),n.vc(5,"async"),n.bc(),n.Xb(6,"div",3),n.bc(),n.bd(7,Z,1,0,"ng-container",18),n.bc()}if(2&e){const e=n.uc(2),t=n.Rc(28);n.Ib(1),n.Dc("items",n.wc(2,5,e.monthItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(5,7,e.monthTitle$)," "),n.Ib(3),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Gc(9,Y))}}function ee(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",0),n.cc(2,"span",11),n.gc(3,12),n.bc(),n.cc(4,"input",13),n.qc("change",function(t){return n.Uc(e),n.uc().changeInterval(t)}),n.bc(),n.cc(5,"cu-dropdown-list",1),n.qc("onSelect",function(t){return n.Uc(e),n.uc().selectFreq(t,!1)}),n.vc(6,"async"),n.cc(7,"div",2),n.dd(8),n.vc(9,"async"),n.bc(),n.Xb(10,"div",3),n.bc(),n.bc(),n.bd(11,X,2,1,"div",4),n.vc(12,"async"),n.bd(13,Q,12,12,"ng-container",5),n.vc(14,"async"),n.bd(15,J,8,10,"div",4),n.vc(16,"async"),n.Zb()}if(2&e){const e=n.uc();n.Ib(4),n.Dc("disabled",e.disabled)("value",null==e.options?null:e.options.interval),n.Ib(1),n.Dc("items",n.wc(6,8,e.freqCustomItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(9,10,e.freqCustomTitle$)," "),n.Ib(3),n.Dc("ngIf",n.wc(12,12,e.ruleFreq$)===e.WEEKLY),n.Ib(2),n.Dc("ngIf",n.wc(14,14,e.ruleFreq$)===e.MONTHLY),n.Ib(2),n.Dc("ngIf",n.wc(16,16,e.ruleFreq$)===e.YEARLY)}}function te(e,t){}function ie(e,t){if(1&e&&(n.cc(0,"div",0),n.bd(1,te,0,0,"ng-template",19),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngTemplateOutlet",e.whenMenu)}}function oe(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"cu-checkbox",6),n.qc("onChange",function(){return n.Uc(e),n.uc().toggleIgnoreWeekends()}),n.gc(2,20),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("checked",null==e.options?null:e.options.ignoreWeekends)}}const ne=function(){return{everything:!1}};function se(e,t){if(1&e){const e=n.dc();n.cc(0,"div"),n.cc(1,"cu-recurring-copy-options",27),n.qc("onChange",function(t){n.Uc(e),n.uc();const i=n.Rc(1);return n.uc(2).changeCopyOptions(t,i)})("onCancel",function(){return n.Uc(e),n.uc(),n.Rc(1).close()}),n.bc(),n.bc()}if(2&e){const e=n.uc(3);n.Ib(1),n.Dc("options",(null==e.options?null:e.options.copyOptions)||n.Gc(1,ne))}}function ce(e,t){1&e&&(n.cc(0,"div",23,24),n.cc(2,"div",25),n.dd(3,"options"),n.bc(),n.bd(4,se,2,2,"div",26),n.bc()),2&e&&n.Dc("dropdownCloseOnInsideClick",!1)}function ae(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"cu-checkbox",6),n.qc("onChange",function(){return n.Uc(e),n.uc().toggleCreateNew()}),n.gc(2,21),n.bc(),n.bd(3,ce,5,1,"div",22),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("checked",null==e.options?null:e.options.createNewTask),n.Ib(2),n.Dc("ngIf",null==e.options?null:e.options.createNewTask)}}function re(e,t){if(1&e){const e=n.dc();n.cc(0,"div",37),n.cc(1,"cu-status-list",38),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).changeRecurInStatus(t)}),n.bc(),n.bc()}if(2&e){const e=n.uc(2);n.Ib(1),n.Dc("statuses",e.filteredStatuses)("activeStatus",e.selectedRecurInStatus)("groupByStatusType",!0)}}function le(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"cu-checkbox",28),n.qc("onChange",function(){return n.Uc(e),n.uc().toggleUpdateStatus()}),n.ac(2),n.gc(3,29),n.Zb(),n.dd(4,": "),n.bc(),n.cc(5,"div",30,31),n.qc("dropdownOpen",function(){return n.Uc(e),n.uc().statusListDropdownOpen=!0})("dropdownClose",function(){return n.Uc(e),n.uc().statusListDropdownOpen=!1}),n.cc(7,"div",32),n.Xb(8,"span",33),n.cc(9,"span",34),n.vc(10,"uppercase"),n.dd(11),n.bc(),n.Xb(12,"span",35),n.bc(),n.bd(13,re,2,3,"div",36),n.bc(),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("checked",!!e.options.recurNewStatusEnabled),n.Ib(4),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownDisabled",!e.options.recurNewStatusEnabled),n.Ib(3),n.ad("background-color",e.selectedRecurInStatus?e.selectedRecurInStatus.color:e.task.status.color),n.Ib(1),n.ad("color",e.selectedRecurInStatus?e.selectedRecurInStatus.color:e.task.status.color),n.Jb("title",n.wc(10,11,e.selectedRecurInStatus?e.selectedRecurInStatus.status:e.task.status.status)),n.Ib(2),n.ed(e.selectedRecurInStatus?e.selectedRecurInStatus.status:e.task.status.status),n.Ib(1),n.Ob("cu-recurring-options__dropdown-toggle_recur-in-status-indicator-open",e.statusListDropdownOpen)}}function de(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"input",10),n.qc("change",function(t){return n.Uc(e),n.uc(2).changeCount(t)}),n.bc(),n.cc(2,"span",11),n.gc(3,40),n.bc(),n.Zb()}if(2&e){const e=n.uc(2);n.Ib(1),n.Dc("disabled",e.disabled)("value",null==e.options?null:e.options.count)}}function ue(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-datetime-nlp-dropdown",41),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).changeUntil(t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=n.uc(2);let t=null;n.Dc("value",null==e.options?null:e.options.until)("dateFormatting",e.dateFormatting)("weekStartDay",null==(t=n.wc(1,3,e.sharedData.currentUser))?null:t.week_start_day)}}function me(e,t){if(1&e){const e=n.dc();n.cc(0,"div",0),n.cc(1,"cu-dropdown-list",1),n.qc("onSelect",function(t){return n.Uc(e),n.uc().selectRepeat(t)}),n.vc(2,"async"),n.cc(3,"div",2),n.dd(4),n.vc(5,"async"),n.bc(),n.Xb(6,"div",3),n.bc(),n.bd(7,de,4,2,"ng-container",5),n.bd(8,ue,2,5,"cu-datetime-nlp-dropdown",39),n.bc()}if(2&e){const e=n.uc();n.Ib(1),n.Dc("items",n.wc(2,5,e.repeatItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(5,7,e.repeatTitle$)," "),n.Ib(3),n.Dc("ngIf",null==e.options?null:e.options.count),n.Ib(1),n.Dc("ngIf",null==e.options?null:e.options.until)}}function pe(e,t){if(1&e&&(n.cc(0,"div",0),n.cc(1,"pre",42),n.dd(2),n.vc(3,"async"),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(2),n.ed(n.wc(3,1,e.ruleString$))}}function he(e,t){if(1&e){const e=n.dc();n.cc(0,"li",45),n.qc("click",function(){n.Uc(e);const i=t.$implicit;return n.uc(2).changeDays(i)}),n.dd(1),n.bc()}if(2&e){const e=t.$implicit;n.Ob("cu-recurring-options__day_selected",e.checked),n.Ib(1),n.fd(" ",e.title," ")}}function fe(e,t){if(1&e&&(n.cc(0,"ul",43),n.bd(1,he,2,3,"li",44),n.vc(2,"async"),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Dc("ngForOf",n.wc(2,2,e.weekDayItems$))("ngForTrackBy",e.trackById)}}function be(e,t){if(1&e){const e=n.dc();n.cc(0,"input",46),n.qc("change",function(t){return n.Uc(e),n.uc().changeMonthDay(t)}),n.vc(1,"async"),n.bc()}if(2&e){const e=t.class,i=n.uc();n.Mb("cu-recurring-options__input ",e,""),n.Dc("disabled",i.disabled)("value",n.wc(1,5,i.ruleByMonthDay$))}}const ge=[{id:"day",title:"Daily",customPayload:h.a.DAILY,checkType:"check"},{id:"week",title:"Weekly",customPayload:h.a.WEEKLY,checkType:"check"},{id:"month",title:"Monthly",customPayload:h.a.MONTHLY,checkType:"check"},{id:"year",title:"Yearly",customPayload:h.a.YEARLY,checkType:"check"}],_e=[...ge,{id:"periodically",title:"Days after...",customPayload:h.a.PERIODICALLY,checkType:"check"},{id:"custom",title:"Custom...",customPayload:h.a.CUSTOM,checkType:"check"}],ve=[{id:"1",title:"First",customPayload:1,checkType:"check"},{id:"2",title:"Second",customPayload:2,checkType:"check"},{id:"3",title:"Third",customPayload:3,checkType:"check"},{id:"4",title:"Fourth",customPayload:4,checkType:"check"},{id:"-1",title:"Last",customPayload:-1,checkType:"check"}],ke={id:"count",title:"Repeat",checkType:"check"},ye={id:"until",title:"End on",checkType:"check"},we={id:"same",title:"Same day each month",checkType:"check"},xe={id:"first",title:"First day of the month",checkType:"check"},Ie={id:"last",title:"Last day of the month",checkType:"check"},Te={id:"week",title:"Week day of the month",checkType:"check"},Ce=[we,Te,xe,Ie];function De(e){const t=e&&e.find(e=>e.checked);return t&&t.title}function Oe(e,t){return e===h.a.DAILY?t>1?"days":"day":e===h.a.WEEKLY?t>1?"weeks":"week":e===h.a.MONTHLY?t>1?"months":"month":e===h.a.YEARLY?t>1?"years":"year":""}let Se=(()=>{class e{constructor(e,t,i){this.helpers=e,this.localStorage=t,this.sharedData=i,this.militaryTime=!1,this.dateFormatting="m/d/y",this.disabled=!1,this.showCreateNewOption=!0,this.onChange=new n.o,this.onGeometryChange=new n.o,this.statusListDropdownOpen=!1,this.filteredStatuses=[],this.months=Object(m.months)(),this.daysItems=[],this.weekDaysItems=Object(m.weekdaysMin)(!0).map((e,t)=>{const i=(t+(1===Object(m.localeData)().firstDayOfWeek()?0:6))%7;return{id:String(i),title:e,customPayload:i,checkType:"check"}}),this.options=Object(p.d)(),this.options$=new d.a(this.options),this.date$=new d.a(null),this.ruleString$=this.options$.pipe(Object(s.a)(e=>Object(p.h)(e))),this.dtstart$=Object(C.a)([this.options$,this.date$]).pipe(Object(s.a)(([e,t])=>(this.dtstart=e&&e.dtstart&&Object(p.l)(e.dtstart).startOf("day")||t,this.dtstart))),this.ruleFreq$=this.options$.pipe(Object(s.a)(e=>e.freq),Object(D.a)()),this.ruleIsSimple$=this.options$.pipe(Object(s.a)(e=>e.simpleSettings),Object(D.a)()),this.ruleInterval$=this.options$.pipe(Object(s.a)(e=>e.interval||1),Object(D.a)()),this.ruleCount$=this.options$.pipe(Object(s.a)(e=>e.count),Object(D.a)()),this.ruleUntil$=this.options$.pipe(Object(s.a)(e=>e.until),Object(D.a)()),this.ruleByWeekDay$=this.options$.pipe(Object(s.a)(e=>e.byweekday||[]),Object(D.a)()),this.ruleByMonth$=this.options$.pipe(Object(s.a)(e=>e.bymonth),Object(D.a)()),this.ruleMonthSetting$=this.options$.pipe(Object(s.a)(e=>e.monthSetting||we.id),Object(D.a)()),this.ruleByMonthDay$=this.options$.pipe(Object(s.a)(e=>e.bymonthday),Object(D.a)()),this.ruleBySetPos$=this.options$.pipe(Object(s.a)(e=>e.bysetpos),Object(D.a)()),this.recurOnSchedule$=this.options$.pipe(Object(s.a)(e=>!!e.recurOnSchedule),Object(D.a)()),this.freqItems$=Object(C.a)([this.ruleIsSimple$,this.ruleFreq$]).pipe(Object(s.a)(([e,t])=>_e.map(i=>Object.assign(Object.assign({},i),{checked:t===h.a.PERIODICALLY?i.customPayload===t:e&&i.customPayload===t||!e&&i.customPayload===h.a.CUSTOM})))),this.freqCustomItems$=Object(C.a)([this.ruleFreq$,this.ruleInterval$]).pipe(Object(s.a)(([e,t])=>ge.map(i=>Object.assign(Object.assign({},i),{title:Oe(i.customPayload,t),checked:i.customPayload===e})))),this.freqTitle$=this.freqItems$.pipe(Object(s.a)(De)),this.freqCustomTitle$=this.freqCustomItems$.pipe(Object(s.a)(De)),this.intervalTitle$=Object(C.a)([this.ruleFreq$,this.ruleInterval$]).pipe(Object(s.a)(([e,t])=>e===h.a.PERIODICALLY?Oe(h.a.DAILY,t)+" after completion":Oe(e,t))),this.repeatItems$=Object(C.a)([this.ruleCount$,this.ruleUntil$]).pipe(Object(s.a)(([e,t])=>[Object.assign(Object.assign({},ke),{checked:Boolean(e)}),Object.assign(Object.assign({},ye),{checked:Boolean(t)})])),this.repeatTitle$=this.repeatItems$.pipe(Object(s.a)(De)),this.weekDayItems$=this.ruleByWeekDay$.pipe(Object(s.a)(e=>this.weekDaysItems.map(t=>Object.assign(Object.assign({},t),{checked:e.includes(t.customPayload)})))),this.monthItems$=this.ruleByMonth$.pipe(Object(s.a)(e=>Object(m.months)().map((t,i)=>({id:String(i+1),title:t,customPayload:i+1,checked:e===i+1,checkType:"check"})))),this.monthTitle$=this.monthItems$.pipe(Object(s.a)(De)),this.simpleMonthItems$=Object(C.a)([this.ruleMonthSetting$,this.date$]).pipe(Object(s.a)(([e,t])=>Ce.map(i=>{let o=i.title;if(i.id===Te.id){const e=t||m();let i=Object(p.g)(e);-1===i&&(i=ve.length),o=`${ve[i-1].title} ${e.format("dddd")}`}return Object.assign(Object.assign({},i),{title:o,checked:e===i.id})}))),this.simpleMonthTitle$=this.simpleMonthItems$.pipe(Object(s.a)(De)),this.posItems$=this.ruleBySetPos$.pipe(Object(s.a)(e=>ve.map(t=>Object.assign(Object.assign({},t),{checked:t.customPayload===e})))),this.posTitle$=this.posItems$.pipe(Object(s.a)(De)),this.dayItems$=this.ruleByMonthDay$.pipe(Object(s.a)(e=>this.daysItems.map(t=>Object.assign(Object.assign({},t),{checked:t.customPayload===e||-1===t.customPayload&&e>28})))),this.dayTitle$=this.dayItems$.pipe(Object(s.a)(De)),this.destroy$=new l.a,this.PERIODICALLY=h.a.PERIODICALLY,this.DAILY=h.a.DAILY,this.WEEKLY=h.a.WEEKLY,this.MONTHLY=h.a.MONTHLY,this.YEARLY=h.a.YEARLY,this.trackById=Object(T.d)("id"),this.debugRrule=this.localStorage.get("rrule");for(let o=1;o<=28;o++)this.daysItems.push({id:String(o),title:String(o)+this.helpers.getOrdinalSuffix(o),customPayload:o,checkType:"check"});this.daysItems.push({id:"-1",title:"Last",customPayload:-1,checkType:"check"}),this.recurOnSchedule$.pipe(Object(a.a)(this.destroy$)).subscribe(e=>{e&&void 0===this.options.createNewTask&&(this.options.createNewTask=!1,this.toggleCreateNew())}),Object(C.a)([this.date$,this.ruleFreq$,this.recurOnSchedule$]).pipe(Object(a.a)(this.destroy$)).subscribe(([,e,t])=>{this.options.onScheduleDate=void 0,t&&e!==this.PERIODICALLY&&(this.options.onScheduleDate=this.getSelectedDate().valueOf()),this.notifyChanges("onScheduleDateChanged",!1)})}ngOnInit(){}ngOnChanges(e){if(!this.task&&this.statuses&&this.statuses.length>0){const e=this.statuses.find(e=>e.type.toLowerCase()===O.g.Open);void 0!==e&&(this.selectedRecurInStatus=Object.assign({},e))}if(e.initialOptions&&(this.options=this.initialOptions||Object(p.d)(),this.options$.next(this.options),this.dtstart=this.options.dtstart&&Object(p.l)(this.options.dtstart).startOf("day")||this.date,this.options.recurNewStatus&&void 0===this.options.recurNewStatusEnabled&&(this.options.recurNewStatusEnabled=!0),this.statuses&&this.statuses.length>0)){this.filteredStatuses=[...this.statuses],void 0!==this.options.statusType&&(this.filteredStatuses=this.statuses.filter(e=>1===this.options.statusType?e.type!==O.g.Closed:2!==this.options.statusType||e.type!==O.g.Done&&e.type!==O.g.Closed));const e=this.filteredStatuses.find(e=>this.options.recurNewStatusId&&e.id?e.id===this.options.recurNewStatusId:this.options.recurNewStatus?e.status.toLowerCase()===this.options.recurNewStatus.toLowerCase():this.lastSelectedRecurInStatus?this.lastSelectedRecurInStatus.id===e.id||this.lastSelectedRecurInStatus.status.toLowerCase()===e.status.toLowerCase():e.type.toLowerCase()===O.g.Open);void 0!==e&&(this.selectedRecurInStatus=Object.assign({},e),this.lastSelectedRecurInStatus=Object.assign({},e))}e.date&&this.date$.next(this.date)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}changeInterval(e){let t=Number(e.target.value);t<=0&&(t=1,e.target.value=1),this.options.interval=t,this.notifyChanges("changeInterval")}selectFreq(e,t){let i;e.customPayload===h.a.CUSTOM?(i=Object(p.e)(this.date,h.a.WEEKLY,!1),i.byweekday=[this.getSelectedWeekDay()]):i=Object(p.e)(this.date,e.customPayload,t),this.options=Object.assign(Object.assign({},i),{count:this.options&&this.options.count,until:this.options&&this.options.until,interval:t?1:this.options.interval,dtstart:this.options&&this.options.dtstart,byhour:this.options&&this.options.byhour,byminute:this.options&&this.options.byminute,statusType:this.options&&this.options.statusType,createNewTask:this.options&&this.options.createNewTask,copyOptions:this.options&&this.options.copyOptions,recurOnSchedule:this.options&&this.options.recurOnSchedule,onScheduleDate:this.options&&this.options.onScheduleDate,recurNewStatusEnabled:this.options&&this.options.recurNewStatusEnabled,recurNewStatus:this.options&&this.options.recurNewStatus,recurNewStatusId:this.options&&this.options.recurNewStatusId}),this.notifyChanges("changeFreq",!0)}notifyChanges(e,t=!1){this.options$.next(this.options),this.onChange.emit({options:this.options,original:this.initialOptions}),t&&this.onGeometryChange.emit()}toggleRepeatForever(){this.options.count||this.options.until?(this.options.count=null,this.options.until=null):this.options.count=1,this.notifyChanges("changeRepeateForever",!0)}toggleUpdateStatus(){this.options.recurNewStatusEnabled=!this.options.recurNewStatusEnabled,this.options.recurNewStatusEnabled?this.selectedRecurInStatus&&(this.options.recurNewStatus=this.selectedRecurInStatus.status,this.options.recurNewStatusId=this.selectedRecurInStatus.id):(this.options.recurNewStatus=void 0,this.options.recurNewStatusId=void 0),this.notifyChanges("toggleUpdateStatus")}toggleIgnoreWeekends(){this.options.ignoreWeekends=!this.options.ignoreWeekends,this.notifyChanges("toggleIgnoreWeekends",!0)}toggleCreateNew(){this.options.createNewTask=!this.options.createNewTask,this.options.createNewTask&&!this.options.copyOptions&&(this.options.copyOptions=S.map(e=>e.name).reduce((e,t)=>{let i=!0;return"task_activity"===t&&(i=!1),Object.assign(Object.assign({},e),{[t]:i})},{everything:!1})),this.options.createNewTask||(this.options.copyOptions=void 0),this.notifyChanges("toggleCreateNew",!0)}changeCount(e){let t=Number(e.target.value);t<=0&&(t=1,e.target.value=1),this.options.count=t,this.notifyChanges("changeCount")}changeUntil(e){this.options.until=e?e.toDate():null,this.notifyChanges("changeUntil")}selectRepeat(e){switch(e.id){case ke.id:this.options.count=1,this.options.until=null;break;case ye.id:this.options.until=new Date,this.options.count=null}this.notifyChanges("changeRepeat",!0)}selectMonth(e){this.options.bymonth=e.customPayload;const t=this.getMaxDays();this.options.bymonthday>t&&(this.options.bymonthday=t),this.notifyChanges("changeMonth")}selectSimpleMonthOption(e){switch(this.options.monthSetting=e.id,e.id){case we.id:this.options.bymonthday=null,this.options.byweekday=null,this.options.bysetpos=null;break;case xe.id:this.options.bymonthday=1,this.options.byweekday=null,this.options.bysetpos=null;break;case Ie.id:this.options.bymonthday=-1,this.options.byweekday=null,this.options.bysetpos=null;break;case Te.id:this.options.bymonthday=null,this.options.byweekday=[this.getSelectedWeekDay()],this.options.bysetpos=this.getSelectedWeekPos()}this.notifyChanges("changeSimpleMonth",!0)}changeDays(e){this.options.byweekday=this.options.byweekday||[],this.options.byweekday=this.options.freq===h.a.MONTHLY?[e.customPayload]:e.checked?this.options.byweekday.filter(t=>t!==e.customPayload):[...this.options.byweekday,e.customPayload],this.notifyChanges("changeDay")}changeMonthDay(e){let t=Number(e.target.value);const i=this.getMaxDays();t>i&&(t=i,e.target.value=t),t<1&&(t=1,e.target.value=t),this.options.bymonthday=t,this.notifyChanges("changeMonthDay")}selectMonthOnDate(){this.options.bysetpos&&(this.options.bymonthday=this.getSelectedDay(),this.options.bysetpos=null,this.options.byweekday=null,this.notifyChanges("changeMonthOnDate",!0))}selectMonthByWeek(){this.options.bysetpos||(this.options.bysetpos=this.getSelectedWeekPos(),this.options.byweekday=[this.getSelectedWeekDay()],this.options.bymonthday=null,this.notifyChanges("changeMonthByWeek",!0))}selectPos(e){this.options.bysetpos=e.customPayload,this.notifyChanges("changePos")}selectDay(e){this.options.bymonthday=e.customPayload,this.notifyChanges("changeDay")}changeCopyOptions(e,t){t&&t.close(),this.options.copyOptions=e,this.notifyChanges("copyOptions")}changeRecurInStatus(e){this.options.recurNewStatus=e.status,this.options.recurNewStatusId=e.id,this.selectedRecurInStatus=Object.assign({},e),this.lastSelectedRecurInStatus=Object.assign({},e),this.notifyChanges("changeRecurStatus"),this.statusListDropdownQuery.length>0&&this.statusListDropdownQuery.first.close()}getMaxDays(){return this.options.freq===this.YEARLY?m().month(this.options.bymonth+1).daysInMonth():31}getSelectedDate(){return this.date||m()}getSelectedDay(){return this.getSelectedDate().date()}getSelectedWeekDay(){return Object(p.f)(this.getSelectedDate())}getSelectedWeekPos(){return Object(p.g)(this.getSelectedDate())}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(E.b),n.Wb(P.b),n.Wb(v.a))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-recurring-options"]],viewQuery:function(e,t){if(1&e&&n.jd(q,1),2&e){let e;n.Qc(e=n.rc())&&(t.statusListDropdownQuery=e)}},hostAttrs:[1,"cu-recurring-options"],inputs:{militaryTime:"militaryTime",dateFormatting:"dateFormatting",date:"date",initialOptions:"initialOptions",disabled:"disabled",showCreateNewOption:"showCreateNewOption",task:"task",statuses:"statuses",whenMenu:"whenMenu"},outputs:{onChange:"onChange",onGeometryChange:"onGeometryChange"},features:[n.Gb],decls:29,vars:29,consts:function(){let e,t,i,o,n,s,c,a,r;return e=$localize`:@@cu-recurring-options__row_recur-in-forever␟6eeb9acb24a0c66033763a084c53e99d55621411␟1264927844031754062: Recur forever `,t=$localize`:@@cu-recurring-options__every␟73a6efdf3c572ef7df7b542f0640a5c3272ba076␟6189397065139465013:Every`,i=$localize`:@@cu-recurring-options__form-label_on-date␟4c8cdae8d6ed555256bf00bc3c9fae11ba0b2d7d␟1410129058769581253: on date `,o=$localize`:@@cu-recurring-options__form-label_by-week␟965f9c019a7b5c0402faafcaa631cd9f4c60b13a␟6776806488884725211: by week `,n=$localize`:@@common_skip-weekends␟720e4c2025587e1916daa23c1b7dfb5750805c75␟651773616742503144: Skip weekends `,s=$localize`:@@common_create-new-task␟9e5535ee0ef9e8040a052d8e4bd3c7110e91abac␟7779091304636138656: Create new task `,c=$localize`:@@cu-recurring-options__tooltip-msg_update-status-to␟b6e912cbdc9617458f7d28f443841cee9de0e149␟6697220713737583380:When this task recurs, we'll automatically change the status to this status`,a=$localize`:@@cu-recurring-options__form-label_update-status-to␟dbc760fe105d1f81db96833f53e2324126380105␟6557784256268733283:Update status to`,r=$localize`:@@cu-recurring-options__number-of-recurrence␟300a878385e4d3c5a056f25a34a013aaedb1c7d0␟7074388989229825051:times`,[[1,"cu-recurring-options__row"],[1,"cu-recurring-options__dropdown",3,"items","dropdownCloseOthersOnOpen","onSelect"],[1,"cu-recurring-options__dropdown-text"],["icon","angle-right",1,"cu-recurring-options__dropdown-icon"],["class","cu-recurring-options__row",4,"ngIf"],[4,"ngIf"],[1,"cu-recurring-options__checkbox",3,"checked","onChange"],e,["weekDays",""],["monthDay",""],["cuNumbersOnly","",1,"cu-recurring-options__input",3,"disabled","value","change"],[1,"cu-recurring-options__text"],t,["cuNumbersOnly","",1,"cu-recurring-options__input","cu-recurring-options__input_interval",3,"disabled","value","change"],[4,"ngTemplateOutlet"],[1,"cu-recurring-options__radio",3,"checked","onChange"],i,o,[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],n,s,["class","cu-dropdown","cuDropdown","",3,"dropdownCloseOnInsideClick",4,"ngIf"],["cuDropdown","",1,"cu-dropdown",3,"dropdownCloseOnInsideClick"],["dropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],[3,"options","onChange","onCancel"],["cuTooltip",c,1,"cu-recurring-options__checkbox","cu-recurring-options__checkbox_recur-status",3,"checked","onChange"],a,["cuDropdown","",1,"cu-dropdown","cu-recurring-options__dropdown_recur-in-status",3,"dropdownCloseOnInsideClick","dropdownDisabled","dropdownOpen","dropdownClose"],["statusListDropdown","dropdown"],["cuDropdownToggle","",1,"cu-recurring-options__dropdown-toggle_recur-in-status"],[1,"cu-recurring-options__dropdown-toggle_recur-in-status-color"],[1,"cu-recurring-options__dropdown-toggle_recur-in-status-text"],["icon","dropdown-arrow-down-bold",1,"cu-todo-list__add-dropdown","cu-recurring-options__dropdown-toggle_recur-in-status-indicator"],["class","cu-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-dropdown__menu"],[3,"statuses","activeStatus","groupByStatusType","onChange"],[3,"value","dateFormatting","weekStartDay","onChange",4,"ngIf"],r,[3,"value","dateFormatting","weekStartDay","onChange"],[2,"max-width","260px"],[1,"cu-recurring-options__days"],["class","cu-recurring-options__day",3,"cu-recurring-options__day_selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-recurring-options__day",3,"click"],["cuNumbersOnly","",3,"disabled","value","change"]]},template:function(e,t){1&e&&(n.cc(0,"div",0),n.cc(1,"cu-dropdown-list",1),n.qc("onSelect",function(e){return t.selectFreq(e,!0)}),n.vc(2,"async"),n.cc(3,"div",2),n.dd(4),n.vc(5,"async"),n.bc(),n.Xb(6,"div",3),n.bc(),n.bc(),n.bd(7,G,5,5,"div",4),n.vc(8,"async"),n.bd(9,V,8,7,"ng-container",5),n.vc(10,"async"),n.vc(11,"async"),n.bd(12,ee,17,18,"ng-container",5),n.vc(13,"async"),n.vc(14,"async"),n.bd(15,ie,2,1,"div",4),n.bd(16,oe,3,1,"div",4),n.vc(17,"async"),n.bd(18,ae,4,2,"div",4),n.cc(19,"div",0),n.cc(20,"cu-checkbox",6),n.qc("onChange",function(){return t.toggleRepeatForever()}),n.gc(21,7),n.bc(),n.bc(),n.bd(22,le,14,13,"div",4),n.bd(23,me,9,9,"div",4),n.bd(24,pe,4,3,"div",4),n.bd(25,fe,3,4,"ng-template",null,8,n.cd),n.bd(27,be,2,7,"ng-template",null,9,n.cd)),2&e&&(n.Ib(1),n.Dc("items",n.wc(2,13,t.freqItems$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",n.wc(5,15,t.freqTitle$)," "),n.Ib(3),n.Dc("ngIf",n.wc(8,17,t.ruleFreq$)===t.PERIODICALLY),n.Ib(2),n.Dc("ngIf",n.wc(10,19,t.ruleIsSimple$)&&n.wc(11,21,t.ruleFreq$)===t.MONTHLY),n.Ib(3),n.Dc("ngIf",!n.wc(13,23,t.ruleIsSimple$)&&n.wc(14,25,t.ruleFreq$)!==t.PERIODICALLY),n.Ib(3),n.Dc("ngIf",!!t.whenMenu),n.Ib(1),n.Dc("ngIf",n.wc(17,27,t.ruleFreq$)===t.DAILY),n.Ib(2),n.Dc("ngIf",t.showCreateNewOption),n.Ib(2),n.Dc("checked",!(null!=t.options&&t.options.count||null!=t.options&&t.options.until)),n.Ib(2),n.Dc("ngIf",!!t.filteredStatuses&&t.filteredStatuses.length>1),n.Ib(1),n.Dc("ngIf",(null==t.options?null:t.options.count)||(null==t.options?null:t.options.until)),n.Ib(1),n.Dc("ngIf",t.debugRrule))},directives:[j.a,I.a,w.q,A.a,w.x,$.a,o.b,k.a,y.a,R,x.a,M.a,z,w.p],pipes:[w.b,w.B],styles:[".cu-recurring-options{display:block}.cu-recurring-options__row{display:flex;align-items:center;margin-top:10px}.cu-recurring-options__row:last-child{margin-bottom:10px}.cu-recurring-options__input{display:flex;align-items:center;justify-content:center;border:1px solid #e4e4e4;border-radius:2px;background:#fff;height:30px;padding:0 8px;font:300 12px/35px Gotham Pro,Proxima Nova,arial,serif;width:50px}.dark-theme .cu-recurring-options__input{background:#384047;border:1px solid #1e272e;color:#d5d6d7}.cu-recurring-options__input:focus{box-shadow:none}.cu-recurring-options__input_interval{margin-right:10px}.cu-recurring-options__input_year-day{margin-left:10px}.cu-recurring-options__text{font:400 12px Gotham Pro,Proxima Nova,arial,serif;padding:0 5px}.cu-recurring-options__dropdown{display:flex;align-items:center;border:1px solid #e4e4e4;border-radius:2px;min-width:100px;height:30px;transition:.2s;flex-grow:1;background-color:transparent}.dark-theme .cu-recurring-options__dropdown{border:1px solid #1e272e;background:#384047}.cu-recurring-options__dropdown .cu-dropdown{width:100%;height:100%}.cu-recurring-options__dropdown .cu-dropdown__toggle{display:flex;align-items:center;padding:0 8px 0 14px;width:100%;height:100%}.cu-recurring-options__dropdown .cu-dropdown__toggle:hover .cu-recurring-options__dropdown-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-recurring-options__dropdown .cu-dropdown__toggle:hover .cu-recurring-options__dropdown-icon{fill:var(--theme-main-color)}}.cu-recurring-options__dropdown-icon{width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px;transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s}.cu-recurring-options__dropdown-icon:hover{transition:none}.dark-theme .cu-recurring-options__dropdown-icon{fill:#828588}.cu-dropdown_open>div>.cu-recurring-options__dropdown-icon{fill:#7b68ee;transform:rotate(-90deg)}@supports (--theme-main-color:#7b68ee){.cu-dropdown_open>div>.cu-recurring-options__dropdown-icon{fill:var(--theme-main-color)}}.cu-recurring-options__dropdown-text{flex-grow:1;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434}.dark-theme .cu-recurring-options__dropdown-text{color:#d5d6d7}.cu-recurring-options__checkbox .cu-checkbox__label{text-transform:none;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-recurring-options__checkbox .cu-checkbox__label{color:#d5d6d7}.cu-recurring-options__checkbox_recur-status{min-width:130px}.cu-recurring-options__radio{margin-right:10px}.cu-recurring-options__radio .cu-radio__label{text-transform:none;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34;cursor:pointer}.dark-theme .cu-recurring-options__radio .cu-radio__label{color:#d5d6d7}.cu-recurring-options__days{display:flex;flex-grow:1}.cu-recurring-options__day{flex-grow:1;padding:11px 0 9px;font:300 12px Gotham Pro,Proxima Nova,arial,serif;border:1px solid #e4e4e4;margin-left:-1px;background:#fff;min-width:33px;text-align:center;cursor:pointer}.dark-theme .cu-recurring-options__day{background:#384047;color:#d5d6d7;border:1px solid #1e272e}.cu-recurring-options__day:first-child{margin-left:0;border-top-left-radius:2px;border-bottom-left-radius:2px;min-width:33px}.cu-recurring-options__day:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px;min-width:33px}.cu-recurring-options__day:focus,.cu-recurring-options__day:hover{z-index:2;background-color:#eee}.dark-theme .cu-recurring-options__day:focus,.dark-theme .cu-recurring-options__day:hover{background-color:#2b343b}.cu-recurring-options__day_selected{background-color:#eee;font-weight:500}.dark-theme .cu-recurring-options__day_selected{background-color:#2b343b}.cu-recurring-options__dropdown_recur-in-status{display:flex;margin-left:5px}.cu-recurring-options__dropdown-toggle_recur-in-status{border:1px solid rgba(185,190,199,.5);padding:2px 5px;display:flex;align-items:center}.cu-recurring-options__dropdown-toggle_recur-in-status.cu-dropdown__toggle_disabled{opacity:.6}.cu-recurring-options__dropdown-toggle_recur-in-status-color{display:flex;width:8px;height:8px;margin-right:6px}.cu-recurring-options__dropdown-toggle_recur-in-status-text{max-width:52px;display:block;overflow:hidden;text-transform:uppercase;white-space:nowrap;text-overflow:ellipsis;font-weight:500;font-size:11px}.cu-recurring-options__dropdown-toggle_recur-in-status-indicator{display:flex}.cu-recurring-options__dropdown-toggle_recur-in-status-indicator.cu-recurring-options__dropdown-toggle_recur-in-status-indicator-open{transform:rotate(180deg)}"],encapsulation:2,changeDetection:0}),e})();var Ee=i("cch5"),Pe=i("6d4N");const je=["legacyRecurringTemplate"];function Ae(e,t){1&e&&n.Xb(0,"div",19)}function $e(e,t){1&e&&n.Xb(0,"div",20)}function Ue(e,t){1&e&&(n.ac(0),n.ac(1),n.gc(2,21),n.Zb(),n.dd(3,"\xa0"),n.Zb())}const Re=function(e){return{"cu-recurring-date-dropdown__repeat-expand-text_set":e}};function Me(e,t){if(1&e){const e=n.dc();n.cc(0,"div",15),n.qc("click",function(){return n.Uc(e),n.uc(3).expandRepeat()}),n.bd(1,Ae,1,0,"div",16),n.bd(2,$e,1,0,"div",17),n.bd(3,Ue,4,0,"ng-container",12),n.cc(4,"div",18),n.dd(5),n.vc(6,"recurringLegacyToText"),n.vc(7,"recurringToText"),n.bc(),n.bc()}if(2&e){const e=n.uc(3);n.Dc("cuTooltip",e.recurringReadonly?e.recurringReadonlyTooltip:""),n.Ib(1),n.Dc("ngIf",!e.recurringOptions),n.Ib(1),n.Dc("ngIf",e.recurringOptions),n.Ib(1),n.Dc("ngIf",e.recurringOptions),n.Ib(1),n.Dc("ngClass",n.Hc(12,Re,e.recurringOptions)),n.Ib(1),n.fd(" ",e.legacyRecurring?n.xc(6,6,e.recurringLegacyOptions,""):n.xc(7,9,e.recurringOptions,"Set Recurring")," ")}}function Fe(e,t){if(1&e&&(n.ac(0),n.bd(1,Me,8,14,"div",14),n.Zb()),2&e){const e=n.uc(2);n.Ib(1),n.Dc("ngIf",!e.expandedRepeat)}}function Le(e,t){if(1&e){const e=n.dc();n.cc(0,"div",9),n.cc(1,"div",10),n.cc(2,"cu-calendar-picker",11),n.qc("onSelect",function(t){return n.Uc(e),n.uc().handleDateSelect(t,!0)})("onDateChange",function(t){return n.Uc(e),n.uc().handleDateSelect(t,!1)})("onViewPeriodChange",function(t){return n.Uc(e),n.uc().changePeriod(t)})("onRecurringChange",function(t){return n.Uc(e),n.uc().changeRRule({options:t})})("onInputActive",function(t){return n.Uc(e),n.uc().dateInputActive(t)}),n.bd(3,Fe,2,1,"ng-container",12),n.bc(),n.bc(),n.Yb(4,13),n.bc()}if(2&e){const e=n.uc(),t=n.Rc(5);n.Ib(1),n.Ob("cu-recurring-date-dropdown__menu-not-recurring",!e.recurringOptions),n.Ib(1),n.Dc("allowClear",e.allowClear)("showStart",e.showStart)("selectedDate",e.selectedDate)("startDate",e.startDate)("recurDays",e.recurDays)("startTimeExists",e.startTimeExists)("dueTimeExists",e.dueTimeExists)("forceStart",e.forceStart)("forceDue",e.forceDue)("startHour",e.startHour)("weekStart",e.weekStart)("dateOption",e.dateOption)("militaryTime",e.militaryTime)("dateFormatting",e.dateFormat)("showRecurring",e.showRecurring)("enableFocusAndSelectOnClick",e.enableFocusAndSelectOnClick)("showTimeDropdown",e.showTimeDropdown)("isExtended",e.expandedRepeat)("isSaveText",e.isSaveText)("extendedTemplate",t)("quickDone",e.quickDone)("quickClear",e.quickClear)("noTime",e.noTime)("dateTitle",e.dateTitle)("startTitle",e.startTitle)("showQuickOptions",e.showQuickOptions)("disabledCallback",e.disabledCallback)("dontGreyDates",e.dontGreyDates),n.Ib(1),n.Dc("ngIf",e.showRecurring),n.Ib(1),n.Dc("ngTemplateOutlet",e.extraItemTemplate)}}function Ne(e,t){1&e&&(n.cc(0,"h4"),n.dd(1,"Recur"),n.bc())}function ze(e,t){1&e&&(n.cc(0,"h4"),n.dd(1,"Recur"),n.bc())}function qe(e,t){}const Ge=function(){return{}};function Ve(e,t){if(1&e&&(n.ac(0),n.bd(1,qe,0,0,"ng-template",28),n.Zb()),2&e){n.uc(2);const e=n.Rc(13);n.Ib(1),n.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",n.Gc(2,Ge))}}function Be(e,t){}function Xe(e,t){if(1&e&&(n.cc(0,"div",29),n.bd(1,Be,0,0,"ng-template",28),n.bc()),2&e){n.uc(2);const e=n.Rc(11);n.Ib(1),n.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",n.Gc(2,Ge))}}function He(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-recurring-options",30),n.qc("onChange",function(t){return n.Uc(e),n.uc(2).changeRRule(t)}),n.bc()}if(2&e){const e=n.uc(2),t=n.Rc(15);n.Dc("initialOptions",e.recurringOptions)("showCreateNewOption",e.showCreateNewOption)("date",e.selectedDateAndTime.selectedDate)("statuses",e.statuses)("task",e.task)("whenMenu",!e.showCreateNewOption||e.legacyRecurring||e.legacyOpen?void 0:t)}}function We(e,t){}function Ke(e,t){if(1&e&&(n.ac(0),n.cc(1,"div",31),n.cc(2,"div",32),n.cc(3,"div",33),n.gc(4,34),n.bc(),n.bd(5,We,0,0,"ng-template",28),n.bc(),n.bc(),n.Zb()),2&e){n.uc(2);const e=n.Rc(7);n.Ib(5),n.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",n.Gc(2,Ge))}}function Qe(e,t){if(1&e){const e=n.dc();n.cc(0,"div",35),n.qc("click",function(){return n.Uc(e),n.uc(2).clearRepeat()}),n.gc(1,36),n.bc()}}function Ze(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",37),n.qc("click",function(){return n.Uc(e),n.uc(2).cancelRepeat()}),n.gc(2,38),n.bc(),n.cc(3,"div",39),n.qc("click",function(){return n.Uc(e),n.uc(2).doneRepeat()}),n.gc(4,40),n.bc(),n.Zb()}}function Ye(e,t){if(1&e){const e=n.dc();n.ac(0),n.cc(1,"div",39),n.qc("click",function(){return n.Uc(e),n.uc(2).cancelRepeat()}),n.gc(2,41),n.bc(),n.Zb()}}function Je(e,t){if(1&e&&(n.cc(0,"div",22),n.cc(1,"div",23),n.bd(2,Ne,2,0,"h4",12),n.bd(3,ze,2,0,"h4",12),n.bd(4,Ve,2,3,"ng-container",12),n.bd(5,Xe,2,3,"div",24),n.bc(),n.bd(6,He,1,6,"cu-recurring-options",25),n.bd(7,Ke,6,3,"ng-container",12),n.cc(8,"div",26),n.bd(9,Qe,2,0,"div",27),n.bd(10,Ze,5,0,"ng-container",12),n.bd(11,Ye,3,0,"ng-container",12),n.bc(),n.bc()),2&e){const e=n.uc();n.Ib(1),n.Ob("cu-recurring-date-dropdown__repeat-title-legacy",e.legacyRecurring),n.Ib(1),n.Dc("ngIf",!e.legacyRecurring&&!e.legacyOpen),n.Ib(1),n.Dc("ngIf",e.legacyRecurring),n.Ib(1),n.Dc("ngIf",e.showCreateNewOption&&e.legacyRecurring),n.Ib(1),n.Dc("ngIf",e.allowLegacyRecurring&&!e.legacyRecurring),n.Ib(1),n.Dc("ngIf",!e.legacyRecurring&&!e.legacyOpen),n.Ib(1),n.Dc("ngIf",e.legacyRecurring),n.Ib(2),n.Dc("ngIf",e.origRecurringOptions||e.legacyRecurring),n.Ib(1),n.Dc("ngIf",!e.legacyRecurring),n.Ib(1),n.Dc("ngIf",e.legacyRecurring)}}function et(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-recurring-view",42),n.qc("onChange",function(t){return n.Uc(e),n.uc().changeLegacyRecurring(t)})("onOpen",function(){return n.Uc(e),n.uc().legacyOpened()})("onClose",function(){return n.Uc(e),n.uc().legacyClosed()}),n.bc()}if(2&e){const e=n.uc(),t=n.Rc(9);n.Dc("options",e.recurringLegacyOptions)("dueDate",!0)("statuses",null==e.recurringLegacyData?null:e.recurringLegacyData.statuses)("openOnClick",!0)("task",null==e.recurringLegacyData?null:e.recurringLegacyData.task)("teamId",null==e.recurringLegacyData||null==e.recurringLegacyData.task?null:e.recurringLegacyData.task.team_id)("canEdit",!0)("template",t)}}function tt(e,t){if(1&e&&(n.ac(0),n.gc(1,43),n.Zb()),2&e){const e=n.uc();n.Ib(1),n.kc(e.legacyRecurring?"Legacy Recurring":null),n.hc(1)}}const it=function(){return["bottom-right"]};function ot(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-dropdown-list",45),n.qc("onSelect",function(t){return n.Uc(e),n.uc(2).recurringMenuSelect(t.id)}),n.Xb(1,"div",46),n.bc()}if(2&e){const e=n.uc(2);n.Dc("items",e.menuItems)("dropdownPlacement",n.Gc(2,it))}}function nt(e,t){if(1&e&&(n.Yb(0,13),n.bd(1,ot,2,3,"cu-dropdown-list",44)),2&e){const e=n.uc(),t=n.Rc(7);n.Dc("ngTemplateOutlet",t),n.Ib(1),n.Dc("ngIf",!e.legacyRecurring)}}function st(e,t){if(1&e){const e=n.dc();n.ac(0),n.mc(1,47),n.cc(2,"cu-dropdown-list",48),n.qc("onSelect",function(t){return n.Uc(e),n.uc().whenMenuSelect(t)}),n.cc(3,"div",49),n.Xb(4,"div",50),n.bc(),n.bc(),n.jc(),n.Zb()}if(2&e){const e=n.uc();n.Ib(2),n.Dc("items",e.whenMenuItems)("dropdownPlacement",n.Gc(3,it)),n.Ib(2),n.kc(2==(null==e.recurringOptions?null:e.recurringOptions.statusType)?"Done":"Closed"),n.hc(1)}}function ct(e,t){if(1&e){const e=n.dc();n.cc(0,"cu-dropdown-list",51),n.qc("onSelect",function(t){return n.Uc(e),n.uc().whenMenuSelect(t)}),n.vc(1,"async"),n.cc(2,"div",52),n.dd(3),n.bc(),n.Xb(4,"div",53),n.bc()}if(2&e){const e=n.uc();n.Dc("items",n.wc(1,3,e.whenMenuItem$))("dropdownCloseOthersOnOpen",!1),n.Ib(3),n.fd(" ",e.whenMenuItems[e.selectedWhenMenuItemIdx].title," ")}}const at=["*"];let rt=(()=>{class e{constructor(e,t,i){this.sharedData=e,this.changeDetectorRef=t,this.ngZone=i,this.destroy$=new l.a,this.showStart=!0,this.forceStart=!1,this.enableFocusAndSelectOnClick=!0,this.showTimeDropdown=!0,this.forceDue=!1,this.closeOnQuickSelect=!1,this.readOnly=!1,this.showQuickOptions=!0,this.startHour=4,this.showRecurring=!1,this.dateOption=_.b.BOTH,this.legacyRecurring=!1,this.allowLegacyRecurring=!1,this.closeOnOutsideClick=!0,this.allowClear=!0,this.dropdownPlacement=o.a,this.dontGreyDates=!1,this.isExtended=!1,this.showCreateNewOption=!0,this.closeOthersOnOpen=!1,this.quickDone=!1,this.quickClear=!1,this.adjustRecurringDate=!0,this.alwaysShowRecurringDate=!0,this.recurringReadonly=!1,this.noTime=!1,this.onChange=new n.o,this.onRecurringChange=new n.o,this.onRecurringLegacyChange=new n.o,this.onRecurringLegacyOpen=new n.o,this.onDropdownClose=new n.o,this.onDropdownOpen=new n.o,this.isOnSchedule=!1,this.expandedRepeat=!1,this.isFirstExpand=!1,this.recurringSetupCompleted=!1,this.recurringOptionsChanged=!1,this.legacyOpen=!1,this.menuItems=[{id:"useLegacyRecurring",title:$localize`:@@cu-recurring-date-dropdown__use-legacy-recurring:Use legacy recurring`}],this.selectedWhenMenuItemIdx=0,this.selectedWhenMenuItemIdx$=new d.a(this.selectedWhenMenuItemIdx),this.onScheduleMenuItem={id:"on-schedule",title:$localize`:@@cu-recurring-date-dropdown__recur-option-item_on-schedule:On schedule`,customPayload:3,tooltip:$localize`:@@cu-recurring-date-dropdown__tooltip-msg_on-schedule:Recur on schedule, regardless of whether task is done.`,tooltipDelay:50},this.whenMenuItems=[Object.assign({},this.onScheduleMenuItem),{id:"closed",title:$localize`:@@cu-recurring-date-dropdown__recur-option-item_when-closed:When closed`,customPayload:1,tooltip:$localize`:@@cu-recurring-date-dropdown__tooltip-msg_when-closed:Trigger the recurrence when the task is moved to the last status`,tooltipDelay:50},{id:"done",title:$localize`:@@cu-recurring-date-dropdown__recur-option-item_when-done:When done`,customPayload:2,tooltip:$localize`:@@cu-recurring-date-dropdown__tooltip-msg_when-done:Trigger the recurrence when the task is moved to any Done or Complete status`,tooltipDelay:50}],this.whenMenuItem$=this.selectedWhenMenuItemIdx$.pipe(Object(s.a)(e=>this.whenMenuItems.map((t,i)=>Object.assign(Object.assign({},t),{checked:e===i,checkType:"check"}))))}get selectedDate(){return this.dateVal}get startDate(){return this.startDateVal}set selectedDate(e){this.dateVal=Object(f.j)(e)}set startDate(e){this.startDateVal=Object(f.j)(e)}get selectedDateAndTime(){return this.getSelectedDateAndTime()}ngOnInit(){this.forceTimeOpen=this.startTimeExists||this.dueTimeExists,this.sharedData.currentUser.pipe(Object(c.a)(e=>!!e),Object(a.a)(this.destroy$)).subscribe(e=>{this.weekStart=e.week_start_day||0===e.week_start_day?e.week_start_day:0,this.militaryTime=!!e.twenty_four_hr_setting,this.dateFormat=e.date_format||"m/d/y",this.changeDetectorRef.markForCheck()}),this.ngZone.runOutsideAngular(()=>{Object(u.a)(window,"resize").pipe(Object(r.a)(300),Object(a.a)(this.destroy$)).subscribe(()=>{this.dropdown&&this.dropdown.isOpen&&this.dropdown.positionMenu()})})}ngOnChanges(e){if(e.initialRecurringOptions&&!this.recurringOptionsChanged&&(this.recurringOptions=this.initialRecurringOptions),this.recurringOptions){this.isOnSchedule=!!this.recurringOptions.recurOnSchedule;const e=this.whenMenuItems.findIndex(e=>this.isOnSchedule?"on-schedule"===e.id.toLowerCase():e.customPayload===this.recurringOptions.statusType);e>-1&&(this.selectedWhenMenuItemIdx=e,this.selectedWhenMenuItemIdx$.next(e))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngAfterViewInit(){this.dropdown.dropdownOpen.pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.recurringSetupCompleted=!1,this.onDropdownOpen.emit()}),this.dropdown.dropdownClose.pipe(Object(a.a)(this.destroy$)).subscribe(()=>{!this.recurringSetupCompleted&&this.recurringOptionsChanged&&(null===this.origRecurringOptions?this.cancelRepeat():(this.expandedRepeat=!1,this.recurringOptionsChanged=!1,this.calcRecurs())),this.lastDateSelected&&(this.onChange.emit(this.lastDateSelected),this.lastDateSelected=null),this.onDropdownClose.emit(),this.expandedRepeat=!1})}adjustCalendarPosition(){setTimeout(()=>{this.dropdown.positionMenu()},200)}handleDateSelect(e,t){this.selectedDate=e.dueDate,this.startDate=e.startDate,this.startTimeExists=e.startDateTime,this.dueTimeExists=e.dueDateTime,this.adjustTime();const i=Object.assign(Object.assign({},e),{startDate:this.startDate,dueDate:this.selectedDate});this.onChange.emit(Object.assign(Object.assign({},i),{sendRequest:!1})),this.lastDateSelected=Object.assign(Object.assign({},i),{sendRequest:!0});const{selectedDate:o,timeExists:n}=this.getSelectedDateAndTime();this.adjustRecurringDate&&this.expandedRepeat&&this.recurringOptions&&o&&(this.recurringOptions=Object(p.b)(this.recurringOptions,o,n),this.recurringOptionsChanged=!0),this.expandedRepeat&&this.isOnSchedule&&!t&&this._preSelectOnSchedule(),t?(this.recurringOptionsChanged&&(this.onRecurringChange.emit({recurring:this.recurringOptions,dates:e}),this.recurringOptionsChanged=!1),this.close()):this.calcRecurs()}close(){this.dropdown.close()}adjustTime(){this.dateVal&&!this.dueTimeExists&&this.dateVal.hours(this.startHour).minutes(0).seconds(0).milliseconds(0),this.startDateVal&&!this.startTimeExists&&this.startDateVal.hours(this.startHour).minutes(0).seconds(0).milliseconds(0)}changePeriod(e){this.periodStart=e.start,this.periodEnd=e.end,this.calcRecurs()}changeRRule(e){if(!e.options||this.selectedDate||this.startDate||this.setDefaultSelectedDate(),this.recurringOptions=e.options,e.options)if(e.options.freq===h.a.PERIODICALLY)this.whenMenuItems=this.whenMenuItems.filter(e=>"on-schedule"!==e.id),this.whenMenuSelect(this.whenMenuItems[0]);else if(-1===this.whenMenuItems.findIndex(e=>"on-schedule"===e.id))this.whenMenuItems=[this.onScheduleMenuItem,...this.whenMenuItems],this.whenMenuSelect(this.whenMenuItems[this.selectedWhenMenuItemIdx+1]);else{const{selectedDate:t,timeExists:i}=this.getSelectedDateAndTime();this.recurringOptions=Object(p.b)(e.options,t,i)}this.recurringOptionsChanged=!0,this.calcRecurs()}calcRecurs(){this.recurDays=(this.alwaysShowRecurringDate||this.expandedRepeat)&&!this.legacyRecurring&&this.periodEnd&&this.periodStart?Object(p.c)(this.recurringOptions,this.adjustRecurringDate?this.selectedDate:null,this.periodStart,this.periodEnd):[]}setDefaultSelectedDate(){this.handleDateSelect({dueDate:m().startOf("day"),dueDateTime:!1,startDate:this.startDate,startDateTime:this.startTimeExists},!1)}expandRepeat(){if(this.recurringReadonly)return;this.selectedDate||this.startDate||this.setDefaultSelectedDate(),this.origRecurringOptions=this.recurringOptions?Object.assign({},this.recurringOptions):null,this.expandedRepeat=!0;const{selectedDate:e,timeExists:t}=this.getSelectedDateAndTime();this.recurringOptions||(this.recurringOptions=Object(p.b)(Object(p.d)(),e,t),this.showCreateNewOption&&(this.recurringOptions.statusType=1),this.recurringOptionsChanged=!0),this.isFirstExpand||"on-schedule"!==this.whenMenuItems[this.selectedWhenMenuItemIdx].id||this.isOnSchedule||(this._preSelectOnSchedule(),this.isFirstExpand=!0),this.calcRecurs(),this.adjustCalendarPosition()}cancelRepeat(){this.isFirstExpand=!1,this.isOnSchedule=!1,this.selectedWhenMenuItemIdx=0,this.selectedWhenMenuItemIdx$.next(this.selectedWhenMenuItemIdx),this.recurringSetupCompleted=!1,this.recurringOptions=this.origRecurringOptions,this.expandedRepeat=!1,this.recurringOptionsChanged=!1,this.calcRecurs()}doneRepeat(){this.onRecurringChange.emit({recurring:this.recurringOptions}),this.recurringSetupCompleted=!0,this.recurringOptionsChanged=!1,this.expandedRepeat=!1,this.dropdown.close()}clearRepeat(){this.expandedRepeat=!1,this.legacyRecurring&&this.clearLegacyRepeat(),this.recurringOptions=null,this.isOnSchedule=!1,this.selectedWhenMenuItemIdx=0,this.selectedWhenMenuItemIdx$.next(this.selectedWhenMenuItemIdx),this.onRecurringChange.emit({recurring:this.recurringOptions}),this.recurringOptionsChanged=!0,this.calcRecurs()}clearLegacyRepeat(e=!1){this.changeLegacyRecurring({recurring:!1}),e&&this.expandRepeat()}dateInputActive(e){}changeLegacyRecurring(e){this.onRecurringLegacyChange.emit(e),e&&e.recurring&&(this.recurringOptionsChanged=!1)}open(){this.dropdown.open()}recurringMenuSelect(e){"useLegacyRecurring"===e&&this.legacyRecurringDropdown.open()}whenMenuSelect(e){const t=this.whenMenuItems.findIndex(t=>t.id===e.id);t>-1&&(this.selectedWhenMenuItemIdx=t,this.selectedWhenMenuItemIdx$.next(t)),this.isOnSchedule="on-schedule"===e.id.toLowerCase(),this.recurringOptions=Object.assign(Object.assign({},this.recurringOptions),{statusType:this.isOnSchedule?void 0:e.customPayload,recurOnSchedule:this.isOnSchedule});const{selectedDate:i,timeExists:o}=this.getSelectedDateAndTime();i&&(!this.recurringOptions.simpleSettings&&this.recurringOptions.byweekday&&Array.isArray(this.recurringOptions.byweekday)&&1===this.recurringOptions.byweekday.length&&(this.recurringOptions.byweekday=[Object(p.f)(i)]),this.recurringOptions=Object(p.b)(this.recurringOptions,i,o),this.calcRecurs(),this.recurringOptionsChanged=!0)}legacyOpened(){this.legacyOpen=!0,this.onRecurringLegacyOpen.emit()}legacyClosed(){this.legacyOpen=!1}getSelectedDateAndTime(){let e=this.selectedDate,t=this.dueTimeExists;return this.startDate&&!this.selectedDate&&(e=this.startDate,t=this.startTimeExists),{selectedDate:e,timeExists:t}}_preSelectOnSchedule(){const e=this.whenMenuItems.find(e=>"on-schedule"===e.id.toLowerCase());e&&this.whenMenuSelect(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(v.a),n.Wb(n.h),n.Wb(n.B))},e.\u0275cmp=n.Qb({type:e,selectors:[["cu-recurring-date-dropdown"]],viewQuery:function(e,t){if(1&e&&(n.jd(o.b,3),n.jd(b.a,1),n.jd(g.a,1),n.jd(je,1)),2&e){let e;n.Qc(e=n.rc())&&(t.dropdown=e.first),n.Qc(e=n.rc())&&(t.datepicker=e.first),n.Qc(e=n.rc())&&(t.legacyRecurringDropdown=e.first),n.Qc(e=n.rc())&&(t.legacyRecurringTemplate=e.first)}},hostAttrs:[1,"cu-recurring-date-dropdown"],inputs:{showStart:"showStart",forceStart:"forceStart",enableFocusAndSelectOnClick:"enableFocusAndSelectOnClick",showTimeDropdown:"showTimeDropdown",forceDue:"forceDue",startTimeExists:"startTimeExists",dueTimeExists:"dueTimeExists",forceTimeOpen:"forceTimeOpen",closeOnQuickSelect:"closeOnQuickSelect",readOnly:"readOnly",showQuickOptions:"showQuickOptions",startHour:"startHour",showRecurring:"showRecurring",dateOption:"dateOption",legacyRecurring:"legacyRecurring",allowLegacyRecurring:"allowLegacyRecurring",closeOnOutsideClick:"closeOnOutsideClick",allowClear:"allowClear",dropdownPlacement:"dropdownPlacement",dontGreyDates:"dontGreyDates",isExtended:"isExtended",isSaveText:"isSaveText",selectedDate:"selectedDate",startDate:"startDate",initialRecurringOptions:["recurringOptions","initialRecurringOptions"],recurringLegacyOptions:"recurringLegacyOptions",recurringLegacyData:"recurringLegacyData",task:"task",statuses:"statuses",showCreateNewOption:"showCreateNewOption",closeOthersOnOpen:["dropdownCloseOthersOnOpen","closeOthersOnOpen"],quickDone:"quickDone",quickClear:"quickClear",adjustRecurringDate:"adjustRecurringDate",alwaysShowRecurringDate:"alwaysShowRecurringDate",recurringReadonly:"recurringReadonly",recurringReadonlyTooltip:"recurringReadonlyTooltip",noTime:"noTime",dateTitle:"dateTitle",startTitle:"startTitle",extraItemTemplate:"extraItemTemplate",disabledCallback:"disabledCallback"},outputs:{onChange:"onChange",onRecurringChange:"onRecurringChange",onRecurringLegacyChange:"onRecurringLegacyChange",onRecurringLegacyOpen:"onRecurringLegacyOpen",onDropdownClose:"onDropdownClose",onDropdownOpen:"onDropdownOpen"},features:[n.Gb],ngContentSelectors:at,decls:16,vars:8,consts:function(){let e,t,i,o,s,c,a,r;return e=$localize`:@@common_recurs␟2db0ba1b8ce07cb3e5d47b9bea30e22a4e44e3a9␟3865500256101143490:Recurs`,t=$localize`:@@cu-recurring-date-dropdown__recurring-via-legacy␟d83e7fefd86cb1d369e382cd62b93af8f42c5776␟7926184037797601069: Recurring via `,i=$localize`:@@cu-recurring-date-dropdown__dont-recur␟0ad0c60b867edcc93b3461e77634d9f290abe672␟8148906893001794073: Don't Recur `,o=$localize`:@@common_cancel␟fb8aad312b72bbb7e5a1e2cc0b55fae8962bf0fb␟8699434297868700883: Cancel `,s=$localize`:@@common_save␟368b817b7cc89a1705d9ac752da4ddda15d42ae8␟1340158735829077894: Save `,c=$localize`:@@common_done␟e9b741578a17b36546049cab7a70dce66ba5b841␟6223306102430213105: Done `,a=$localize`:@@cu-recurring-date-dropdown__legacy-recurring-text␟e216855ae2dfa7b24ff4e2adf42b1822a2c1f814␟1012585029508022762:${"\ufffd0\ufffd"}:INTERPOLATION:`,r=$localize`:@@cu-recurring-date-dropdown__recurring-when␟13b171e32f4146e95b233f0b02ec75f4b9e3cef5␟8103166022746781876: when ${"\ufffd#2\ufffd"}:START_TAG_CU_DROPDOWN_LIST:${"\ufffd#3\ufffd"}:START_TAG_DIV_1: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#4\ufffd"}:START_TAG_DIV:${"[\ufffd/#4\ufffd|\ufffd/#3\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#4\ufffd|\ufffd/#3\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CU_DROPDOWN_LIST:`,r=n.lc(r),[["cuDropdown","",1,"cu-recurring-date-dropdown__dropdown",3,"dropdownCloseOnInsideClick","dropdownCloseOthersOnOpen","dropdownCloseOnOutsideClick","dropdownDisabled","dropdownPlacement","dropdownRightEdgePadding","dropdownCheckNegativeLeft","dropdownModifierClass"],["cuDropdownToggle",""],["class","cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],["extendedTemplate",""],["legacyRecurringTemplate",""],["legacyRecurringTextTemplate",""],["recurringDropdownMenu",""],["recurringWhenMenu",""],["recurringWhenDropdown",""],[1,"cu-dropdown__menu_overflow-hidden"],[1,"cu-recurring-date-dropdown__menu"],[3,"allowClear","showStart","selectedDate","startDate","recurDays","startTimeExists","dueTimeExists","forceStart","forceDue","startHour","weekStart","dateOption","militaryTime","dateFormatting","showRecurring","enableFocusAndSelectOnClick","showTimeDropdown","isExtended","isSaveText","extendedTemplate","quickDone","quickClear","noTime","dateTitle","startTitle","showQuickOptions","disabledCallback","dontGreyDates","onSelect","onDateChange","onViewPeriodChange","onRecurringChange","onInputActive"],[4,"ngIf"],[3,"ngTemplateOutlet"],["class","cu-recurring-date-dropdown__repeat-expand",3,"cuTooltip","click",4,"ngIf"],[1,"cu-recurring-date-dropdown__repeat-expand",3,"cuTooltip","click"],["class","cu-recurring-date-dropdown__repeat-expand-icon cu-recurring-date-dropdown__repeat-expand-icon-no-repeat","icon","angle-right",4,"ngIf"],["class","cu-recurring-date-dropdown__repeat-expand-icon cu-recurring-date-dropdown__repeat-expand-icon-repeat","icon","recurring",4,"ngIf"],[1,"cu-recurring-date-dropdown__repeat-expand-text",3,"ngClass"],["icon","angle-right",1,"cu-recurring-date-dropdown__repeat-expand-icon","cu-recurring-date-dropdown__repeat-expand-icon-no-repeat"],["icon","recurring",1,"cu-recurring-date-dropdown__repeat-expand-icon","cu-recurring-date-dropdown__repeat-expand-icon-repeat"],e,[1,"cu-recurring-date-dropdown__repeat"],[1,"cu-recurring-date-dropdown__repeat-title"],["class","cu-recurring-date-dropdown__repeat-legacy",4,"ngIf"],["class","cu-recurring-date-dropdown__repeat-body",3,"initialOptions","showCreateNewOption","date","statuses","task","whenMenu","onChange",4,"ngIf"],[1,"cu-recurring-date-dropdown__repeat-buttons"],["class","cu-recurring-date-dropdown__repeat-clear",3,"click",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cu-recurring-date-dropdown__repeat-legacy"],[1,"cu-recurring-date-dropdown__repeat-body",3,"initialOptions","showCreateNewOption","date","statuses","task","whenMenu","onChange"],[1,"cu-recurring-date-dropdown__legacy-container"],[1,"cu-recurring-date-dropdown__legacy-text"],[1,"cu-recurring-date-dropdown__repeating"],t,[1,"cu-recurring-date-dropdown__repeat-clear",3,"click"],i,[1,"cu-btn","cu-btn_sm","cu-btn_confirm-cancel","cu-recurring-date-dropdown__repeat-cancel",3,"click"],o,[1,"cu-btn","cu-btn_sm","cu-recurring-date-dropdown__repeat-done",3,"click"],s,c,[1,"cu-recurring-date-dropdown__legacy-recurring",3,"options","dueDate","statuses","openOnClick","task","teamId","canEdit","template","onChange","onOpen","onClose"],a,["class","cu-recurring-date-dropdown__legacy-recurring-menu",3,"items","dropdownPlacement","onSelect",4,"ngIf"],[1,"cu-recurring-date-dropdown__legacy-recurring-menu",3,"items","dropdownPlacement","onSelect"],["icon","ellipsis",1,"cu-recurring-date-dropdown__legacy-recurring-icon"],r,[1,"cu-recurring-date-dropdown__when-menu",3,"items","dropdownPlacement","onSelect"],[1,"cu-recurring-date-dropdown__when-menu-container"],["icon","angle-right"],[1,"cu-recurring-options__dropdown",3,"items","dropdownCloseOthersOnOpen","onSelect"],[1,"cu-recurring-options__dropdown-text"],["icon","angle-right",1,"cu-recurring-options__dropdown-icon"]]},template:function(e,t){1&e&&(n.Cc(),n.cc(0,"div",0),n.cc(1,"div",1),n.Bc(2),n.bc(),n.bd(3,Le,5,32,"div",2),n.bc(),n.bd(4,Je,12,11,"ng-template",null,3,n.cd),n.bd(6,et,1,8,"ng-template",null,4,n.cd),n.bd(8,tt,2,1,"ng-template",null,5,n.cd),n.bd(10,nt,2,2,"ng-template",null,6,n.cd),n.bd(12,st,5,4,"ng-template",null,7,n.cd),n.bd(14,ct,5,5,"ng-template",null,8,n.cd)),2&e&&n.Dc("dropdownCloseOnInsideClick",!1)("dropdownCloseOthersOnOpen",t.closeOthersOnOpen)("dropdownCloseOnOutsideClick",t.closeOnOutsideClick)("dropdownDisabled",t.readOnly)("dropdownPlacement",t.dropdownPlacement)("dropdownRightEdgePadding",100)("dropdownCheckNegativeLeft",!0)("dropdownModifierClass","cu-recurring-date-dropdown__menu-main")},directives:[o.b,k.a,y.a,b.a,w.q,w.x,x.a,w.o,I.a,Se,g.a,j.a],pipes:[Ee.a,Pe.a,w.b],styles:['.cu-recurring-date-dropdown{display:block;width:100%}.cu-recurring-date-dropdown__menu-main{margin-top:10px!important;border-radius:4px}.cu-recurring-date-dropdown__repeat{display:flex;flex-direction:column;height:100%;min-width:200px;padding-top:5px}.cu-recurring-date-dropdown__repeat-body{flex-grow:1;padding:0 10px}.cu-recurring-date-dropdown__repeat-body .cu-recurring-options__dropdown .cu-dropdown__toggle{padding:0 8px 0 14px!important}.cu-recurring-date-dropdown__repeat-title{text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:#b9bec7;padding:0 10px;display:flex;align-items:center}.cu-recurring-date-dropdown__repeat-title h4{color:#b9bec7;padding-right:4px}.cu-recurring-date-dropdown__repeat-title .cu-recurring-date-dropdown__when-menu-container{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;justify-content:space-between;align-items:center;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:#818193;padding-left:4px}.cu-recurring-date-dropdown__repeat-title .cu-recurring-date-dropdown__when-menu-container .icon{width:15px;height:15px;transform:rotate(90deg);fill:#b9bec7}.cu-recurring-date-dropdown__repeat-title .cu-recurring-date-dropdown__when-menu-container:hover{color:var(--theme-main-color)}.cu-recurring-date-dropdown__repeat-title .cu-recurring-date-dropdown__when-menu-container:hover .icon{fill:var(--theme-main-color)}.cu-recurring-date-dropdown__repeat-title .cu-recurring-date-dropdown__repeat-legacy{margin-left:auto}.cu-recurring-date-dropdown__repeat-title-legacy{padding:0 10px 5px}.cu-recurring-date-dropdown__repeat-title .icon{width:15px;height:15px;fill:#828588}.dark-theme .cu-recurring-date-dropdown__repeat-title .icon{fill:#828588}.cu-recurring-date-dropdown__repeat-title .icon:hover{fill:var(--theme-main-color)}.dark-theme .cu-recurring-date-dropdown__repeat-title{color:#828588}.cu-recurring-date-dropdown__repeat-expand{font:400 12px Gotham Pro,Proxima Nova,arial,serif;display:flex;cursor:pointer;margin:0;align-items:center;border-top:1px solid #e9ebf0;border-right:1px solid #e9ebf0;padding:0 15px 0 8px;min-height:30px}.dark-theme .cu-recurring-date-dropdown__repeat-expand{border-color:#1e272e}.cu-recurring-date-dropdown__repeat-expand:hover{background-color:#fafbfc}.dark-theme .cu-recurring-date-dropdown__repeat-expand:hover{background:#2b343b}.cu-recurring-date-dropdown__repeat-expand:hover .cu-recurring-date-dropdown__repeat-expand-text{text-decoration:none}.cu-recurring-date-dropdown__repeat-expand:hover .cu-recurring-date-dropdown__repeat-expand-icon-no-repeat{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-recurring-date-dropdown__repeat-expand:hover .cu-recurring-date-dropdown__repeat-expand-icon-no-repeat{fill:var(--theme-main-color-dark)}}.cu-recurring-date-dropdown__repeat-expand-text{font:400 12px Gotham Pro,Proxima Nova,arial,serif;padding:5px 0}.cu-recurring-date-dropdown__repeat-expand-text_set{color:#7b68ee;padding-right:55px;text-decoration:underline}@supports (--theme-main-color:#7b68ee){.cu-recurring-date-dropdown__repeat-expand-text_set{color:var(--theme-main-color)}}.cu-recurring-date-dropdown__repeat-expand-text_set:first-letter{text-transform:lowercase}.cu-recurring-date-dropdown__repeat-expand-icon-no-repeat{width:16px;height:16px;margin-right:5px;transform:rotate(90deg);fill:#828588}.dark-theme .cu-recurring-date-dropdown__repeat-expand-icon-no-repeat{fill:#828588}.cu-recurring-date-dropdown__repeat-expand-icon-repeat{width:13px;height:13px;margin-right:5px;stroke:#828588}.dark-theme .cu-recurring-date-dropdown__repeat-expand-icon-repeat{stroke:#828588}.cu-recurring-date-dropdown__repeat-clear{font:400 11px Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;flex-grow:1;display:flex;align-items:center;color:#fd71af}.cu-recurring-date-dropdown__repeat-clear .icon{width:15px;height:15px;fill:#828588;transform:rotate(-90deg)}.dark-theme .cu-recurring-date-dropdown__repeat-clear .icon{fill:#828588}.cu-recurring-date-dropdown__repeat-buttons{display:flex;align-items:center;height:30px;padding:0 0 0 10px;justify-content:flex-end;margin-top:auto;border-top:1px solid #e9ebf0}.dark-theme .cu-recurring-date-dropdown__repeat-buttons{border-color:#1e272e}.cu-recurring-date-dropdown__repeat-cancel.cu-btn.cu-btn_sm,.cu-recurring-date-dropdown__repeat-done.cu-btn.cu-btn_sm{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;height:auto;padding:0;margin-left:0;border:none;background:transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-recurring-date-dropdown__repeat-cancel.cu-btn.cu-btn_sm,.cu-recurring-date-dropdown__repeat-done.cu-btn.cu-btn_sm{font-family:var(--global-font-support)}}.cu-recurring-date-dropdown__repeat-cancel{margin-right:8px;color:#858585!important}.dark-theme .cu-recurring-date-dropdown__repeat-cancel{color:#828588!important}.cu-recurring-date-dropdown__repeat-cancel:hover{background-color:transparent!important;border:none!important;color:#b9bec7!important}.dark-theme .cu-recurring-date-dropdown__repeat-cancel:hover{color:#abaeb0}.cu-recurring-date-dropdown__repeat-done.cu-btn.cu-btn_sm{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:var(--theme-main-color);color:#fff;padding:0 8px;height:100%;border-radius:0}.cu-recurring-date-dropdown__repeat-done.cu-btn.cu-btn_sm:hover{background-color:var(--theme-main-color-dark)}.cu-recurring-date-dropdown__repeat .cu-recurring-options__row .cu-dropdown__toggle{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#7b68ee;text-decoration:underline;padding-left:5px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-recurring-date-dropdown__repeat .cu-recurring-options__row .cu-dropdown__toggle{font-family:var(--global-font-support)}}@supports (--theme-main-color:#7b68ee){.cu-recurring-date-dropdown__repeat .cu-recurring-options__row .cu-dropdown__toggle{color:var(--theme-main-color)}}.cu-recurring-date-dropdown__repeat .recurring-view__toogle{display:none}.cu-recurring-date-dropdown__when-menu-container{padding:0 10px;margin-top:10px}.cu-recurring-date-dropdown__legacy-container{flex-grow:1}.cu-recurring-date-dropdown__legacy-container .cu-recurring-date-dropdown__repeat-title{padding:4px 10px 5px}.cu-recurring-date-dropdown__legacy-container .recurring-view__toogle{display:block}.cu-recurring-date-dropdown__legacy-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;display:flex;padding:0 10px;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-recurring-date-dropdown__legacy-text{font-family:var(--global-font-support)}}.cu-recurring-date-dropdown__legacy-text .recurring-view__toogle{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;color:var(--theme-main-color);text-decoration:underline;padding:0 0 0 4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-recurring-date-dropdown__legacy-text .recurring-view__toogle{font-family:var(--global-font-support)}}.cu-recurring-date-dropdown__legacy-text .recurring-view__toogle:hover{transition:none;color:var(--theme-main-color-dark)}.cu-recurring-date-dropdown.cu-task-row-recurring-date-picker__dropdown-recurring .cu-user-group.due-date_list-view{margin-left:-7px;padding:0}'],encapsulation:2,changeDetection:0}),e})()},uzq8:function(e,t,i){"use strict";e.exports=n;var o=i("Zasy");function n(e,t,i,n){var c;"function"==typeof t&&"function"!=typeof i&&(n=i,i=t,t=null),c=o(t),function e(o,a,r){var l,d=[];return(t&&!c(o,a,r[r.length-1]||null)||!1!==(d=s(i(o,r)))[0])&&o.children&&"skip"!==d[0]&&!1===(l=s(function(t,i){for(var o,s=n?-1:1,c=(n?t.length:-1)+s;c>-1&&c<t.length;){if(!1===(o=e(t[c],c,i))[0])return o;c="number"==typeof o[1]?o[1]:c+s}}(o.children,r.concat(o))))[0]?l:d}(e,null,[])}function s(e){return null!==e&&"object"==typeof e&&"length"in e?e:"number"==typeof e?[!0,e]:[e]}n.CONTINUE=!0,n.SKIP="skip",n.EXIT=!1},vIpm:function(e,t,i){"use strict";i.d(t,"a",function(){return ce});var o=i("o7Ov"),n=i("TqRa"),s=i("lnp7"),c=i("tjT+"),a=i("o0vL"),r=i("c3rA"),l=i("l7P3"),d=i("2p4s"),u=i("fFxs"),m=i("jJQC"),p=i("pLZG"),h=i("lJxs"),f=i("eIep"),b=i("zp1y"),g=i("3E0/"),_=i("1G5W"),v=i("fXoL"),k=i("2Vo4"),y=i("XNiG"),w=i("itXk"),x=i("9jGm"),I=i("QdBX"),T=i("jJW4"),C=i("Uo20"),D=i("drq7"),O=i("hSRe"),S=i("paIP"),E=i("ofXK"),P=i("BTFG"),j=i("NB/q"),A=i("UdVN"),$=i("peMq"),U=i("RgJC");const R=["commentBar"];function M(e,t){if(1&e&&v.Xb(0,"cu-email-info",5),2&e){const e=t.comment;v.Dc("showSubjectAtTop",t.showSubjectAtTop)("email",null==e?null:e.emails[0])}}function F(e,t){1&e&&v.Xb(0,"cu-loader")}function L(e,t){if(1&e){const e=v.dc();v.ac(0),v.cc(1,"cu-task-comment",10),v.qc("onRemove",function(t){return v.Uc(e),v.uc(4).removeComment(t)})("onUndo",function(t){return v.Uc(e),v.uc(4).undoComment(t)})("onChange",function(t){return v.Uc(e),v.uc(4).updateComment({comment:t.comment,payload:t.payload,commentChange:t.commentChange})})("onAddReaction",function(t){return v.Uc(e),v.uc(4).updateReaction(t)})("onRemoveReaction",function(t){return v.Uc(e),v.uc(4).updateReaction(t,!1)}),v.bc(),v.Zb()}if(2&e){const e=t.$implicit,i=v.uc(4),o=v.Rc(9);v.Ib(1),v.Dc("projectId",i.projectId)("coverImage",i.coverImage)("assignedComments",!1)("canAddAttachments",i.canAddAttachments)("canRemoveAttachments",i.canRemoveAttachments)("canRemoveOwnAttachments",i.canRemoveOwnAttachments)("canChangeDescription",i.canChangeDescription)("permissions",i.permissions)("permissionLevel",i.permissionLevel)("showFullConversation",i.showFullConversation)("readonly",i.readonly)("projectMembers",i.projectMembers)("taskId",i.taskId)("weights",i.weights)("comment",e)("lazyLoadEntities",i.lazyLoadEntities)("editorId",i.editorId)("allowAddToContent",i.allowAddToContent)("headerTemplate",null!=e&&null!=e.emails&&e.emails.length?o:null)("userGroups",i.userGroups)("fromAutomation",i.fromAutomation)}}function N(e,t){if(1&e&&(v.ac(0),v.bd(1,L,2,21,"ng-container",9),v.Zb()),2&e){const e=v.uc(3);v.Ib(1),v.Dc("ngForOf",null==e.threadData?null:e.threadData.comments)("ngForTrackBy",e.trackById)}}function z(e,t){if(1&e){const e=v.dc();v.cc(0,"cu-comment-reactions",17),v.qc("toggleReaction",function(t){return v.Uc(e),v.uc(5).toggleReaction(t)}),v.vc(1,"async"),v.vc(2,"async"),v.bc()}if(2&e){const e=v.uc(4).comment,t=v.uc();let i=null;v.Dc("comment",v.wc(1,3,t.comment$)||e)("user",null==(i=v.wc(2,5,t.sharedData.userData))?null:i.user)("forEmail",!0)}}function q(e,t){if(1&e&&(v.cc(0,"div",21),v.gc(1,22),v.vc(2,"async"),v.vc(3,"async"),v.bc()),2&e){const e=v.uc(5).comment,t=v.uc();let i=null,o=null;v.Ib(3),v.kc(null==(i=v.wc(2,2,t.comment$)||e)?null:i.threaded_replies)(null==(o=v.wc(3,4,t.comment$)||e)?null:o.threaded_replies),v.hc(1)}}function G(e,t){if(1&e&&(v.ac(0),v.Xb(1,"div",23),v.cc(2,"div",21),v.gc(3,24),v.vc(4,"async"),v.bc(),v.Zb()),2&e){const e=v.uc(5).comment,t=v.uc();let i=null;v.Ib(4),v.kc(null==(i=v.wc(4,1,t.comment$)||e)?null:i.new_thread_count),v.hc(3)}}function V(e,t){if(1&e&&(v.ac(0),v.Xb(1,"div",23),v.Xb(2,"div",25),v.cc(3,"div",21),v.gc(4,26),v.vc(5,"async"),v.vc(6,"async"),v.bc(),v.Zb()),2&e){const e=v.uc(5).comment,t=v.uc();let i=null,o=null;v.Ib(6),v.kc(null==(i=v.wc(5,2,t.comment$)||e)?null:i.new_mentioned_thread_count)(null==(o=v.wc(6,4,t.comment$)||e)?null:o.new_mentioned_thread_count),v.hc(4)}}function B(e,t){if(1&e&&(v.Xb(0,"cu-user-group",27),v.vc(1,"async")),2&e){const e=v.uc(5).comment,t=v.uc();let i=null;v.Dc("users",null==(i=v.wc(1,3,t.comment$)||e)?null:i.threaded_users)("modifier","cu-user-group_sm")("avatarSize",24)}}function X(e,t){if(1&e){const e=v.dc();v.cc(0,"div",18),v.qc("click",function(){return v.Uc(e),v.uc(5).toggleThreadReplies({showThread:!0})}),v.vc(1,"async"),v.bd(2,q,4,6,"div",19),v.vc(3,"async"),v.bd(4,G,5,3,"ng-container",8),v.vc(5,"async"),v.bd(6,V,7,6,"ng-container",8),v.vc(7,"async"),v.bd(8,B,2,5,"cu-user-group",20),v.vc(9,"async"),v.bc()}if(2&e){const e=v.uc(4).comment,t=v.uc();let i=null,o=null,n=null,s=null,c=null;v.Ob("cu-comment__reply-toggle_centered",!(null!=(i=v.wc(1,6,t.comment$)||e)&&i.threaded_replies)),v.Ib(2),v.Dc("ngIf",null==(o=v.wc(3,8,t.comment$)||e)?null:o.threaded_replies),v.Ib(2),v.Dc("ngIf",null==(n=v.wc(5,10,t.comment$)||e)?null:n.new_thread_count),v.Ib(2),v.Dc("ngIf",null==(s=v.wc(7,12,t.comment$)||e)?null:s.new_mentioned_thread_count),v.Ib(2),v.Dc("ngIf",null==(c=v.wc(9,14,t.comment$)||e)||null==c.threaded_users?null:c.threaded_users.length)}}function H(e,t){if(1&e){const e=v.dc();v.cc(0,"div",30),v.qc("click",function(){return v.Uc(e),v.uc(6).replyToEmail()}),v.Xb(1,"div",31),v.cc(2,"div",32),v.ac(3),v.gc(4,33),v.Zb(),v.bc(),v.bc()}}function W(e,t){if(1&e){const e=v.dc();v.cc(0,"div",34),v.qc("click",function(){return v.Uc(e),v.uc(6).threadComment()}),v.Xb(1,"div",35),v.cc(2,"div",32),v.gc(3,36),v.bc(),v.bc()}}function K(e,t){if(1&e&&(v.bd(0,H,5,0,"div",28),v.bd(1,W,4,0,"div",29)),2&e){const e=v.uc(5);v.Dc("ngIf",e.allowEmailFeature&&e.canManageEmail),v.Ib(1),v.Dc("ngIf",e.allowNormalThread)}}function Q(e,t){if(1&e&&(v.cc(0,"div",13),v.vc(1,"async"),v.vc(2,"async"),v.vc(3,"async"),v.vc(4,"async"),v.bd(5,z,3,7,"cu-comment-reactions",14),v.vc(6,"async"),v.bd(7,X,10,16,"div",15),v.vc(8,"async"),v.bd(9,K,2,2,"ng-template",null,16,v.cd),v.bc()),2&e){const e=v.Rc(10),t=v.uc(3).comment,i=v.uc();let o=null,n=null,s=null,c=null;v.Ob("cu-email-comment__footer__reply-toggle_thread",i.allowNormalThread)("cu-email-comment__has-reactions",(null==(o=v.wc(1,9,i.comment$)||t)||null==o.reactions?null:o.reactions.length)&&(null==(o=v.wc(2,11,i.sharedData.compatCurrentTeam$))?null:o.extra_comment_reactions)||(null==(o=v.wc(3,13,i.comment$)||t)?null:o.threaded_replies))("cu-email-comment__footer__reply-toggle-no-reactions",!(null!=(n=v.wc(4,15,i.sharedData.compatCurrentTeam$))&&n.extra_comment_reactions)),v.Ib(5),v.Dc("ngIf",null==(s=v.wc(6,17,i.sharedData.compatCurrentTeam$))?null:s.extra_comment_reactions),v.Ib(2),v.Dc("ngIf",null==(c=v.wc(8,19,i.comment$)||t)?null:c.threaded_replies)("ngIfElse",e)}}function Z(e,t){if(1&e){const e=v.dc();v.cc(0,"div",44),v.qc("click",function(){return v.Uc(e),v.uc(7).replyToEmail()}),v.Xb(1,"div",45),v.cc(2,"div",46),v.gc(3,47),v.bc(),v.bc()}}function Y(e,t){if(1&e){const e=v.dc();v.cc(0,"div",44),v.qc("click",function(){return v.Uc(e),v.uc(7).doAComment()}),v.Xb(1,"div",48),v.cc(2,"div",46),v.gc(3,49),v.bc(),v.bc()}}function J(e,t){if(1&e&&(v.cc(0,"div",42),v.bd(1,Z,4,0,"div",43),v.bd(2,Y,4,0,"div",43),v.bc()),2&e){const e=v.uc(6);v.Ib(1),v.Dc("ngIf",e.canManageEmail),v.Ib(1),v.Dc("ngIf",e.allowNormalThread)}}function ee(e,t){if(1&e){const e=v.dc();v.cc(0,"cu-comment-bar",50,51),v.qc("onEmailUserAction",function(t){return v.Uc(e),v.uc(6).onEmailUserAction.emit(t)})("onChangeOpenState",function(){return v.Uc(e),v.uc(6).activateCommentBar()})("onSubmit",function(t){return v.Uc(e),v.uc(6).saveComment(t)})("onCancel",function(){v.Uc(e);const t=v.uc(6);return t.showForceComment=!1,t.allowFocusSteal=!0}),v.vc(2,"async"),v.vc(3,"async"),v.vc(4,"async"),v.vc(5,"async"),v.vc(6,"async"),v.bc()}if(2&e){const e=v.uc(5).comment,t=v.uc();let i=null,o=null;v.Dc("uploaderUrl",t.commentsUploaderUrl)("listenForPaywallError",!0)("attachmentType",1)("projectMembers",t.projectMembers)("id","task_"+(null==e?null:e.id))("parentId",t.taskId)("loading",t.submitting||(null==(i=v.wc(2,20,t.commentsLoadingState$))?null:i.create))("localStorageId","email_comment_"+t.CommentMode.Email+"_"+(null==e?null:e.id))("weights",t.weights)("project",t.project)("canManageEmail",t.canManageEmail)("team",v.wc(3,22,t.sharedData.compatCurrentTeam$))("allowEmailFeature",t.allowEmailFeature&&t.allowThread)("slashCommandSupport",!0)("editorId","comment_thread_"+t.CommentType.Comment+"_"+(null==e?null:e.id))("type",t.CommentType.Comment)("commentMode",t.allowEmailFeature&&t.allowThread?t.CommentMode.Email:t.CommentMode.Comment)("user",v.wc(4,24,t.sharedData.currentUser))("authedState",v.wc(5,26,t.filteredAuthState$))("signatures",null==(o=v.wc(6,28,t.authedState$))?null:o.emailSignatures)}}function te(e,t){if(1&e&&(v.ac(0),v.bd(1,J,3,2,"div",40),v.bd(2,ee,7,30,"ng-template",null,41,v.cd),v.Zb()),2&e){const e=v.Rc(3),t=v.uc(5);v.Ib(1),v.Dc("ngIf",(!t.allowThread||t.allowThread&&t.allowNormalThread)&&!t.showCommentBar)("ngIfElse",e)}}function ie(e,t){if(1&e){const e=v.dc();v.bd(0,te,4,2,"ng-container",8),v.cc(1,"div",37),v.qc("click",function(){return v.Uc(e),v.uc(4).collapse()}),v.cc(2,"div",38),v.gc(3,39),v.bc(),v.bc()}if(2&e){const e=v.uc(4);v.Dc("ngIf",e.allowThread&&!e.alwaysShowThread&&!e.hideThread||e.allowNormalThread&&e.showForceComment||!e.allowThread&&e.allowNormalThread&&e.showingReplies)}}function oe(e,t){if(1&e&&(v.ac(0),v.bd(1,Q,11,21,"div",11),v.bd(2,ie,4,1,"ng-template",null,12,v.cd),v.Zb()),2&e){const e=v.Rc(3),t=v.uc(3);v.Ib(1),v.Dc("ngIf",!t.showingReplies)("ngIfElse",e)}}function ne(e,t){if(1&e&&(v.bd(0,N,2,2,"ng-container",8),v.bd(1,oe,4,2,"ng-container",8)),2&e){const e=v.uc(2);v.Dc("ngIf",e.showingReplies),v.Ib(1),v.Dc("ngIf",!e.noEmailToggle)}}function se(e,t){if(1&e&&(v.bd(0,F,1,0,"cu-loader",6),v.bd(1,ne,2,2,"ng-template",null,7,v.cd)),2&e){const e=v.Rc(2),t=v.uc();v.Dc("ngIf",null==t.threadData?null:t.threadData.fetching)("ngIfElse",e)}}let ce=(()=>{class e{constructor(e,t,i,o,n,s){this.sharedData=e,this.store=t,this.cdr=i,this.action$=o,this.attachmentsViewerService=n,this.taskMentionService=s,this.projectMembers=[],this.alwaysShowThread=!1,this.forThread=!1,this.readonly=!1,this.canAddAttachments=!0,this.canRemoveAttachments=!0,this.canRemoveOwnAttachments=!0,this.canChangeDescription=!0,this.showFullConversation=!1,this.lazyLoadEntities=!1,this.hideThread=!1,this.noMargin=!1,this.allowPreview=!0,this.allowReply=!1,this.allowLink=!1,this.allowThread=!1,this.allowNormalThread=!1,this.noEmailToggle=!1,this.submitting=!1,this.canManageEmail=!1,this.allowAddToContent=!1,this.allowEmailFeature=!0,this.CommentType=a.c,this.CommentMode=a.b,this.activeReply=!1,this.showForceComment=!1,this.showingReplies=!1,this.showCommentBar=!1,this.allowFocusSteal=!0,this.reactionsClickappEnabled=!1,this.commentsUploaderUrl=[d.a.attachmentUrl,"attachment"].join("/"),this.comment$=new k.a(null),this.parentId$=this.comment$.pipe(Object(p.a)(e=>!!e),Object(h.a)(e=>e.id)),this.commentsLoadingState$=this.parentId$.pipe(Object(p.a)(e=>!!e),Object(f.a)(e=>this.store.select(Object(I.d)(String(a.c.Comment),e)))),this.authedState$=this.store.pipe(Object(l.select)(r.getAuthedState)),this.user$=this.store.select(r.getUser),this.destroy$=new y.a,this.filteredAuthState$=Object(w.a)([this.authedState$,this.comment$]).pipe(Object(b.a)(this.user$),Object(h.a)(([[e,t],i])=>{var o;if(!(e&&1!==e.authedEmails.length&&t&&t.emails&&t.emails.length))return Object.assign(Object.assign({},e),{preferredEmail:(null===(o=null==e?void 0:e.authedEmails)||void 0===o?void 0:o.length)?e.authedEmails[0].email:null});const n=t.emails[0].full_data.from[0].email.toLowerCase(),s=-1!==e.authedEmails.findIndex(e=>{var t;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===n})?n:i.email;return Object.assign(Object.assign({},e),{authedEmails:e.authedEmails,preferredEmail:s})})),this.trackById=Object(m.d)("id"),this.onEmailUserAction=new v.o,this.onAddReaction=new v.o,this.onRemoveReaction=new v.o,this.onAssigneeChange=new v.o,this.onChange=new v.o}set comment(e){this.comment$.next(e)}get comment(){return this.comment$.value}ngOnInit(){this.action$.pipe(Object(x.d)(o.Lc),Object(p.a)(e=>e.payload.commentId===this.comment.id),Object(g.a)(1),Object(_.a)(this.destroy$)).subscribe(()=>{this.taskMentionService.updateMentions()}),this.action$.pipe(Object(x.d)(c.e.CreateCommentSuccess),Object(p.a)(e=>{var t;return e.payload.type===a.c.Comment&&e.payload.parent===(null===(t=this.comment)||void 0===t?void 0:t.id)&&this.forThread&&!!this.commentBar&&this.forThread}),Object(_.a)(this.destroy$)).subscribe(()=>{this.commentBar.clear(),this.onEmailUserAction.emit({commentId:this.comment.id,type:u.e.FetchThreadedComments})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}viewEmail(e){const t={projectId:this.projectId,project:this.project,coverImage:this.coverImage,canAddAttachments:!1,canRemoveAttachments:!1,canRemoveOwnAttachments:!1,canChangeDescription:!1,readonly:!0,projectMembers:this.projectMembers,taskId:this.taskId,weights:this.weights,allowEmailFeature:this.allowEmailFeature,comment:this.comment,lazyLoadEntities:!1,editorId:"comment_edit_"+this.comment.id,allowReply:!1,allowLink:!1,threadData:this.threadData,allowThread:this.allowThread,threadTemplate:this.threadTemplate,fromAutomation:this.fromAutomation,userGroups:this.userGroups};this.toggleThreadReplies(),this.attachmentsViewerService.onOpen.emit(Object.assign(Object.assign({},e),{emailCommentData:t}))}ngOnChanges(e){e.submitting&&e.submitting.previousValue&&!e.submitting.currentValue&&this.commentBar&&(this.commentBar.clear(),this.commentBar.editor.enable(),this.cdr.markForCheck())}toggleReaction({reaction:e,toggle:t},i){n.k||(t?this.removeReaction(e,i):this.addReaction(e,i))}addReaction(e,t){const i=t||this.comment,o=Object.assign(Object.assign({},i),{reactions:[...i.reactions,{reaction:e,user:this.sharedData.userData.value.user}]});t?(this.threadData=Object.assign(Object.assign({},this.threadData),{comments:this.updateReplies(t,o)}),this.updateReaction({comment:o,reaction:e})):(this.comment=o,this.onAddReaction.emit({comment:o,reaction:e}))}toggleReactionThread({reaction:e,toggle:t},i){this.toggleReaction({reaction:e,toggle:t},i)}removeReaction(e,t){const i=t||this.comment,o=Object.assign(Object.assign({},i),{reactions:i.reactions.filter(t=>t.reaction!==e||t.reaction===e&&t.user.id!==this.sharedData.userData.value.user.id)});t?(this.threadData=Object.assign(Object.assign({},this.threadData),{comments:this.updateReplies(t,o)}),this.updateReaction({comment:o,reaction:e})):(this.comment=o,this.onRemoveReaction.emit({comment:o,reaction:e}))}updateReplies(e,t){return this.threadData.comments.map(i=>i.id===e.id?Object.assign(Object.assign({},i),t):i)}updateReaction(e,t=!0){if(this.threadData&&this.threadData.comments){-1!==this.threadData.comments.findIndex(t=>t.id===e.comment.id)&&this.store.dispatch(new c.J({parent:this.comment.id,type:a.c.Comment,comment:e.comment,changes:{},removeResolved:!1,noReq:!0}));const i=Object.assign(Object.assign({},e),{noUpdate:!0});t?this.onAddReaction.emit(i):this.onRemoveReaction.emit(i)}}collapse(){this.showingReplies=!1,this.showCommentBar=!1,this.showForceComment=!1,this.cdr.markForCheck()}toggleThreadReplies(e){e&&(this.showingReplies=e.showThread,this.showCommentBar=!1,this.cdr.markForCheck()),this.onEmailUserAction.emit({commentId:this.comment.id,type:u.e.FetchThreadedComments})}replyToEmail(){this.allowThread?(this.showingReplies=!0,this.showCommentBar=!0,this.allowFocusSteal=!0,this.cdr.markForCheck(),setTimeout(()=>this.activateCommentBar(!0))):(this.activeReply=!0,this.cdr.markForCheck(),this.onEmailUserAction.emit({comment:this.comment,type:u.e.ReplyToEmail}))}doAComment(){this.showingReplies=!0,this.showCommentBar=!0,this.showForceComment=!0,this.allowFocusSteal=!0,this.cdr.markForCheck(),setTimeout(()=>this.activateCommentBar())}updateFollowers(e){this.onEmailUserAction.emit({type:u.e.AddFollowers,followers:(e||[]).map(e=>e.id),commentId:this.comment.id})}removeComment(e){this.onEmailUserAction.emit({type:u.e.StartCommentDelete,commentId:this.comment.id}),this.store.dispatch(new c.l({parent:this.comment.id,type:a.c.Comment,commentId:e.id}))}updateComment({comment:e,payload:t,commentChange:i}){this.store.dispatch(new c.J({parent:this.comment.id,type:a.c.Comment,comment:Object.assign(Object.assign({},e),i),changes:t,removeResolved:!1}))}undoComment(e){this.onEmailUserAction.emit({type:u.e.UndoCommentDelete,commentId:this.comment.id}),this.store.dispatch(new c.E({parent:this.comment.id,type:a.c.Comment,commentId:e.id}))}saveComment(e){const t=this.comment.emails[0].id,i=e.email?Object.assign(Object.assign({},e.email),{reply_to_message_id:t}):null;this.forThread?this.store.dispatch(new c.h(Object.assign(Object.assign({},this.defaultPayload),{attachments:(e.attachments||[]).map(e=>e.id),parent:this.comment.id,type:a.c.Comment,comment:e.comment,email:e.email,assignee:e.assignee,group_assignee:e.group_assignee}))):this.onEmailUserAction.emit({type:u.e.SendEmail,payload:Object.assign(Object.assign({},this.defaultPayload),{parent:this.comment.id,type:a.c.Comment,comment:e.comment,email:i,attachments:(e.attachments||[]).map(e=>e.id),assignee:e.assignee}),comment:this.comment,commentId:this.comment.id})}threadComment(){this.showForceComment=!0,this.showingReplies=!0,this.showCommentBar=!0,this.allowFocusSteal=!0,this.cdr.markForCheck()}activateCommentBar(e=!1){var t,i,o,n,c;if(this.allowFocusSteal){if(!this.allowThread&&this.allowNormalThread&&this.showingReplies)return this.allowFocusSteal=!1,void setTimeout(()=>{this.commentBar&&(this.commentBar.changeMode(a.b.Comment),this.commentBar.clearReplyToId())});if(this.allowEmailFeature||this.showForceComment){if(this.showForceComment)return this.allowFocusSteal=!1,setTimeout(()=>{this.commentBar&&(this.commentBar.changeMode(a.b.Comment),this.commentBar.activateEditor(),this.commentBar.clearReplyToId())}),void this.onEmailUserAction.emit({type:u.e.CancelReplyToEmail});if(this.commentBar){const r=this.comment.emails[0].full_data,l=this.comment.emails[0].id,d=(null===(i=null===(t=this.threadData)||void 0===t?void 0:t.comments)||void 0===i?void 0:i.length)?this.threadData.comments[this.threadData.comments.length-1].emails[0].full_data:r,m=!e&&this.commentBar.emailUsers&&this.commentBar.emailUsers[u.g.To]&&this.commentBar.emailUsers[u.g.To].length?null:Object(s.b)(this.comment.emails[0].full_data,d),p=[];if(null===(n=null===(o=this.threadData)||void 0===o?void 0:o.comments)||void 0===n?void 0:n.length){const e=null===(c=this.threadData)||void 0===c?void 0:c.comments.filter(e=>{var t;return!!(null===(t=e.emails)||void 0===t?void 0:t.length)}).reverse();e.length&&p.push(...e)}p.push(this.comment),this.commentBar.changeMode(a.b.Email,null,m,r.subject,l,p),this.allowFocusSteal=!1}}}}}return e.\u0275fac=function(t){return new(t||e)(v.Wb(T.a),v.Wb(l.Store),v.Wb(v.h),v.Wb(x.a),v.Wb(C.a),v.Wb(D.a))},e.\u0275cmp=v.Qb({type:e,selectors:[["cu-email-comment"]],viewQuery:function(e,t){if(1&e&&v.jd(R,1),2&e){let e;v.Qc(e=v.rc())&&(t.commentBar=e.first)}},hostAttrs:[1,"cu-email-comment"],inputs:{editorId:"editorId",comment:"comment",taskId:"taskId",coverImage:"coverImage",projectMembers:"projectMembers",permissions:"permissions",permissionLevel:"permissionLevel",alwaysShowThread:"alwaysShowThread",forThread:"forThread",readonly:"readonly",projectId:"projectId",project:"project",canAddAttachments:"canAddAttachments",canRemoveAttachments:"canRemoveAttachments",canRemoveOwnAttachments:"canRemoveOwnAttachments",canChangeDescription:"canChangeDescription",showFullConversation:"showFullConversation",lazyLoadEntities:"lazyLoadEntities",hideThread:"hideThread",noMargin:"noMargin",allowPreview:"allowPreview",allowReply:"allowReply",allowLink:"allowLink",allowThread:"allowThread",allowNormalThread:"allowNormalThread",noEmailToggle:"noEmailToggle",submitting:"submitting",canManageEmail:"canManageEmail",threadTemplate:"threadTemplate",allowAddToContent:"allowAddToContent",weights:"weights",threadData:"threadData",fromAutomation:"fromAutomation",userGroups:"userGroups",allowEmailFeature:"allowEmailFeature",defaultPayload:"defaultPayload"},outputs:{onEmailUserAction:"onEmailUserAction",onAddReaction:"onAddReaction",onRemoveReaction:"onRemoveReaction",onAssigneeChange:"onAssigneeChange",onChange:"onChange"},features:[v.Gb],decls:12,vars:44,consts:function(){let e,t,i,o,n,s,c,a,r,l;return e=$localize`:␟3f3f7b7f440663776c111379ee97fc10d0072e00␟5826398650317330247:{VAR_PLURAL, plural, =1 {reply} other {replies}}`,e=v.lc(e,{VAR_PLURAL:"\ufffd1\ufffd"}),t=$localize`:@@cu-email-comment__reply-toggle-text_thread-reply-count-indicator␟20104da8a8f19e6a7f420542063272a7c6925842␟5550321166122135017: ${"\ufffd0\ufffd"}:INTERPOLATION: ${e}:ICU: `,i=$localize`:unread
                  comments@@cu-email-comment__reply-toggle-text_unread-thread-count␟9aaf5652ae53baad629f63b1f4ec6a19d960a25a␟7842837964291679829: ${"\ufffd0\ufffd"}:INTERPOLATION: unread `,o=$localize`:␟52e1aa72e6f3b1359b0c8f8b4d57f6c1a483e69c␟139837204463633604:{VAR_PLURAL, plural, =1 {mention} other {mentions}}`,o=v.lc(o,{VAR_PLURAL:"\ufffd1\ufffd"}),n=$localize`:unread
                  mentions@@cu-email-comment__reply-toggle-text_unread-mentions-count␟4625bfbc4b810a4157c66c0ef3a3b01d31f34e26␟89539029801932138: ${"\ufffd0\ufffd"}:INTERPOLATION: unread ${o}:ICU: `,s=$localize`:@@common_reply-to-email␟490fd96b5e257b081e31fadae715378584875b16␟3345437836973979967:Reply to email`,c=$localize`:@@common_comment␟404b6176eb17e10b459fec5fb10f8f51817fcf8f␟6726119386608321321: Comment `,a=$localize`:@@common_collapse␟5c5e0a3ec50fb4e74e7d6e867ed517853b3ca983␟284991231361507697: Collapse `,r=$localize`:@@common_reply-to-email␟0abdf62b7d472d67b7a1d5f2da251a38cb5d178f␟8892311326683191160: Reply to email `,l=$localize`:@@common_comment␟b0b72e8020a85e0e582688a1311b28cda8e95044␟6767926032352717260: Comment `,[[1,"thread-container"],[1,"comments-container"],[3,"projectId","coverImage","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","showSubjectAtTop","permissionLevel","readonly","alwaysShowThread","projectMembers","taskId","weights","comment","showAddFollowers","lazyLoadEntities","editorId","allowReply","showReactions","showReplyToEmailWithCollapse","allowLink","allowAddToContent","isEmail","activeReply","headerTemplate","allowThread","userGroups","fromAutomation","threadTemplate","onShowThread","onViewEmail","onReplyToEmail","onAddReaction","onRemoveReaction","onAssigneeChange","onChange"],["headerTemplate",""],["nestedThreadTemplate",""],[3,"showSubjectAtTop","email"],[4,"ngIf","ngIfElse"],["showThread",""],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"projectId","coverImage","assignedComments","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","permissionLevel","showFullConversation","readonly","projectMembers","taskId","weights","comment","lazyLoadEntities","editorId","allowAddToContent","headerTemplate","userGroups","fromAutomation","onRemove","onUndo","onChange","onAddReaction","onRemoveReaction"],["class","cu-email-comment__footer__reply-toggle cu-email-comment__footer__reply-toggle_hidden",3,"cu-email-comment__footer__reply-toggle_thread","cu-email-comment__has-reactions","cu-email-comment__footer__reply-toggle-no-reactions",4,"ngIf","ngIfElse"],["commentBarTemplate",""],[1,"cu-email-comment__footer__reply-toggle","cu-email-comment__footer__reply-toggle_hidden"],[3,"comment","user","forEmail","toggleReaction",4,"ngIf"],["class","cu-comment__reply-toggle",3,"cu-comment__reply-toggle_centered","click",4,"ngIf","ngIfElse"],["replyOptions",""],[3,"comment","user","forEmail","toggleReaction"],[1,"cu-comment__reply-toggle",3,"click"],["class","cu-comment__reply-toggle-text ignore-click-out",4,"ngIf"],["class","cu-comment__reply-toggle-user-group",3,"users","modifier","avatarSize",4,"ngIf"],[1,"cu-comment__reply-toggle-text","ignore-click-out"],t,[1,"cu-comment__reply-toggle-divider"],i,["icon","comment-bar-mentions",1,"cu-comment__reply-toggle-icon"],n,[1,"cu-comment__reply-toggle-user-group",3,"users","modifier","avatarSize"],["class","cu-email-comment__footer__reply-toggle_hidden-section cu-email-comment__footer__reply-toggle_hidden-section-reply cu-email-comment__footer__reply-toggle_hidden-section-alt",3,"click",4,"ngIf"],["class","cu-email-comment__footer__reply-toggle_hidden-section cu-email-comment__footer__reply-toggle_hidden-section-alt",3,"click",4,"ngIf"],[1,"cu-email-comment__footer__reply-toggle_hidden-section","cu-email-comment__footer__reply-toggle_hidden-section-reply","cu-email-comment__footer__reply-toggle_hidden-section-alt",3,"click"],["icon","cu2-email-reply"],[1,"cu-email-comment__footer__reply-toggle_hidden-section-text"],s,[1,"cu-email-comment__footer__reply-toggle_hidden-section","cu-email-comment__footer__reply-toggle_hidden-section-alt",3,"click"],["icon","cu2-comment-3"],c,[1,"cu-comment__reply-toggle","cu-comment__reply-toggle_centered",3,"click"],[1,"cu-comment__reply-toggle-text","cu-comment__reply-toggle-text_collapse"],a,["class","cu-email-comment__choices cu-comment__reply-toggle",4,"ngIf","ngIfElse"],["displayCommentBar",""],[1,"cu-email-comment__choices","cu-comment__reply-toggle"],["class","cu-email-comment__footer__reply-toggle-btn",3,"click",4,"ngIf"],[1,"cu-email-comment__footer__reply-toggle-btn",3,"click"],["icon","cu2-email-reply",1,"cu-email-comment__footer__reply-toggle-btn-icon"],[1,"cu-email-comment__footer__reply-toggle-btn-text"],r,["icon","cu2-comment-3",1,"cu-email-comment__footer__reply-toggle-btn-icon"],l,[3,"uploaderUrl","listenForPaywallError","attachmentType","projectMembers","id","parentId","loading","localStorageId","weights","project","canManageEmail","team","allowEmailFeature","slashCommandSupport","editorId","type","commentMode","user","authedState","signatures","onEmailUserAction","onChangeOpenState","onSubmit","onCancel"],["commentBar",""]]},template:function(e,t){if(1&e&&(v.cc(0,"div",0),v.cc(1,"div",1),v.vc(2,"async"),v.vc(3,"async"),v.vc(4,"async"),v.vc(5,"async"),v.cc(6,"cu-task-comment",2),v.qc("onShowThread",function(e){return t.toggleThreadReplies(e)})("onViewEmail",function(e){return t.viewEmail(e)})("onReplyToEmail",function(){return t.replyToEmail()})("onAddReaction",function(e){return t.onAddReaction.emit(e)})("onRemoveReaction",function(e){return t.onRemoveReaction.emit(e)})("onAssigneeChange",function(e){return t.onAssigneeChange.emit(e)})("onChange",function(e){return t.onChange.emit(e)}),v.vc(7,"async"),v.bc(),v.bc(),v.bd(8,M,1,2,"ng-template",null,3,v.cd),v.bd(10,se,3,2,"ng-template",null,4,v.cd),v.bc()),2&e){const e=v.Rc(9),i=v.Rc(11);let o=null,n=null;v.Ib(1),v.Ob("thread-container__email-footer-visible",null==(o=v.wc(2,34,t.comment$)||t.comment)?null:o.threaded_replies)("thread-container__email-has-reactions",(null==(n=v.wc(3,36,t.comment$)||t.comment)||null==n.reactions?null:n.reactions.length)&&(null==(n=v.wc(4,38,t.sharedData.compatCurrentTeam$))?null:n.extra_comment_reactions)||(null==(n=v.wc(5,40,t.comment$)||t.comment)?null:n.threaded_replies)),v.Ib(5),v.Dc("projectId",t.projectId)("coverImage",t.coverImage)("canAddAttachments",t.canAddAttachments)("canRemoveAttachments",t.canRemoveAttachments)("canRemoveOwnAttachments",t.canRemoveOwnAttachments)("canChangeDescription",t.canChangeDescription)("permissions",t.permissions)("showSubjectAtTop",!0)("permissionLevel",t.permissionLevel)("readonly",t.readonly)("alwaysShowThread",t.alwaysShowThread)("projectMembers",t.projectMembers)("taskId",t.taskId)("weights",t.weights)("comment",v.wc(7,42,t.comment$)||t.comment)("showAddFollowers",t.allowThread)("lazyLoadEntities",t.lazyLoadEntities)("editorId",t.editorId)("allowReply",t.allowReply)("showReactions",t.showingReplies)("showReplyToEmailWithCollapse",!t.allowThread&&t.allowNormalThread&&t.allowEmailFeature)("allowLink",t.allowLink)("allowAddToContent",t.allowAddToContent)("isEmail",!0)("activeReply",t.activeReply)("headerTemplate",e)("allowThread",!0)("userGroups",t.userGroups)("fromAutomation",t.fromAutomation)("threadTemplate",i)}},directives:[O.a,S.a,E.q,P.a,E.p,j.a,A.a,$.a,U.a],pipes:[E.b],styles:['.cu-email-comment-container{display:flex}.cu-email-comment-container .cu-comment-viewer-content__container{padding:10px}.cu-email-comment__choices{display:flex}.cu-email-comment__thread-reply{padding:0 15px;margin:15px 0}.cu-email-comment__thread-reply .cu-comment-reactions{display:none}.cu-email-comment__thread-reply.cu-email-comment__thread-reply-reactions .cu-comment-reactions,.cu-email-comment__thread-reply:hover .cu-comment-reactions{display:block}.cu-email-comment__thread-reply .cu-comment-reactions__container{top:-24px;left:40px}.cu-email-comment__footer{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:10px;text-align:center;padding:8px;border-top:1px solid #e9ebf0;cursor:pointer;color:#aeacb0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-comment__footer{font-family:var(--global-font-support)}}.dark-theme .cu-email-comment__footer{border-color:#1e272e}.cu-email-comment__footer__reply-toggle{display:flex;align-items:center;height:30px;padding:0 15px;cursor:pointer;border-top:1px solid #e9ebf0}.contrast_high .cu-email-comment__footer__reply-toggle{border-top-color:#dedede}.dark-theme .cu-email-comment__footer__reply-toggle{border-top-color:#1e272e}.cu-email-comment__footer__reply-toggle:hover .cu-comment__reply-toggle-text{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-comment__footer__reply-toggle:hover .cu-comment__reply-toggle-text{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-email-comment__footer__reply-toggle_hidden{display:none;position:absolute;width:calc(100% + 2px);left:-1px;bottom:-40px;min-height:40px;background:#fff;border:1px solid #e9ebf0;box-shadow:0 3px 7px rgba(0,0,0,.06);border-radius:0 0 6px 6px;padding:0 15px}.cu-email-comment__footer__reply-toggle_hidden .cu-comment__reply-toggle{min-width:100px}.cu-email-comment__footer__reply-toggle_hidden.cu-email-comment__has-reactions{display:flex;z-index:10}.cu-email-comment__footer__reply-toggle_hidden:before{left:-1px}.cu-email-comment__footer__reply-toggle_hidden-section{position:relative;display:flex;align-items:center;justify-content:center;height:28px;background:rgba(233,235,240,.5);border-radius:4px;padding:0 16px;margin-left:8px;margin-bottom:8px}.dark-theme .cu-email-comment__footer__reply-toggle_hidden-section{background:#2b343b}.cu-email-comment__footer__reply-toggle_hidden-section:hover .icon{fill:var(--theme-main-color)}.cu-email-comment__footer__reply-toggle_hidden-section:hover .cu-email-comment__footer__reply-toggle_hidden-section-text{color:var(--theme-main-color)}.cu-email-comment__footer__reply-toggle_hidden-section:first-of-type{margin-left:auto}.cu-email-comment__footer__reply-toggle_hidden-section-alt{margin:0;padding:0;height:auto;border-radius:0;background:transparent}.dark-theme .cu-email-comment__footer__reply-toggle_hidden-section-alt{background:transparent}.cu-email-comment__footer__reply-toggle_hidden-section-alt+.cu-email-comment__footer__reply-toggle_hidden-section-alt{margin-left:19px}.cu-email-comment__footer__reply-toggle_hidden-section-alt+.cu-email-comment__footer__reply-toggle_hidden-section-alt:before{content:"";display:block;position:absolute;left:-10px;width:1px;height:16px;background:#e9ebf0}.dark-theme .cu-email-comment__footer__reply-toggle_hidden-section-alt+.cu-email-comment__footer__reply-toggle_hidden-section-alt:before{background:#7c828d}.cu-email-comment__footer__reply-toggle_hidden-section-text{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d;display:flex}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-comment__footer__reply-toggle_hidden-section-text{font-family:var(--global-font-support)}}.dark-theme .cu-email-comment__footer__reply-toggle_hidden-section-text{color:#828588}.cu-email-comment__footer__reply-toggle_hidden-section .icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:13px;height:13px;fill:#7c828d;margin-right:5px}.cu-email-comment__footer__reply-toggle_hidden-section .icon:last-of-type{width:9px;height:9px;margin-left:5px}.cu-email-comment__footer__reply-toggle_hidden-section-reply:hover .icon{fill:var(--theme-main-color)}.contrast_high .cu-email-comment__footer__reply-toggle_hidden{border:1px solid #dedede}.dark-theme .cu-email-comment__footer__reply-toggle_hidden{background:#384047;border:1px solid #1e272e}.cu-comment:hover .cu-email-comment__footer__reply-toggle_hidden{display:flex;z-index:10}.cu-comment:hover .cu-email-comment__footer__reply-toggle_hidden:before{content:"";display:block;position:absolute;top:-9px;width:calc(100% + 2px);height:8px;background:inherit;border-left:1px solid #e9ebf0;border-right:1px solid #e9ebf0}.dark-theme .cu-comment:hover .cu-email-comment__footer__reply-toggle_hidden:before{border-left-color:#1e272e;border-right-color:#1e272e}.cu-comment_to-me:hover .cu-email-comment__footer__reply-toggle_hidden:before{width:100%;left:1px;border-left:0}.cu-email-comment__footer__reply-toggle_hidden.cu-email-comment__footer__reply-toggle-no-reactions .cu-email-comment__footer__reply-toggle_hidden-section{width:100%}.cu-email-comment__footer__reply-toggle-user-group{margin-right:4px;margin-left:-6px}.cu-email-comment__footer__reply-toggle-text{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-email-comment__footer__reply-toggle-text{color:#abaeb0}.cu-email-comment__footer__reply-toggle-text_collapse{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#b9bec7;border-bottom:1px dashed #b9bec7}.dark-theme .cu-email-comment__footer__reply-toggle-text_collapse{color:#828588;border-bottom-color:#828588}.cu-email-comment__footer__reply-toggle-icon{fill:#7b68ee;width:18px;height:18px;padding:4px;margin-right:5px;position:relative}@supports (--theme-main-color:#7b68ee){.cu-email-comment__footer__reply-toggle-icon{fill:var(--theme-main-color)}}.cu-email-comment__footer__reply-toggle-icon:before{content:"";display:block;position:absolute;background:#7b68ee;width:100%;height:100%;border-radius:50%;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu-email-comment__footer__reply-toggle-icon:before{background:var(--theme-main-color)}}.cu-email-comment__footer__reply-toggle-icon:after{content:"";display:block;position:absolute;background:#7b68ee;top:-1px;right:-1px;width:6px;height:6px;border-radius:50%;border:1px solid #fff}@supports (--theme-main-color:#7b68ee){.cu-email-comment__footer__reply-toggle-icon:after{background:var(--theme-main-color)}}.dark-theme .cu-email-comment__footer__reply-toggle-icon:after{border-color:#384047}.cu-email-comment__footer__reply-toggle-divider{margin:0 10px;width:1px;height:12px;background:#e9ebf0}.contrast_high .cu-email-comment__footer__reply-toggle-divider{background:#dedede}.dark-theme .cu-email-comment__footer__reply-toggle-divider{background:#1e272e}.cu-email-comment__footer__reply-toggle-btn{display:flex;align-items:center;border-radius:4px;height:28px;margin-right:8px;margin-bottom:12px;padding:0 8px;background:#f2f4f7}.dark-theme .cu-email-comment__footer__reply-toggle-btn{background:#2b343b}.cu-email-comment__footer__reply-toggle-btn:hover{background:#eee}.dark-theme .cu-email-comment__footer__reply-toggle-btn:hover{background:#1e272e}.cu-email-comment__footer__reply-toggle-btn:last-child{margin-right:16px}.cu-email-comment__footer__reply-toggle-btn-icon{width:16px;height:16px;margin-right:7px;fill:#7c828d}.dark-theme .cu-email-comment__footer__reply-toggle-btn-icon{fill:#abaeb0}.cu-email-comment__footer__reply-toggle-btn-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-email-comment__footer__reply-toggle-btn-text{color:#abaeb0}.cu-email-comment__footer__reply .comments-container{padding:0 15px}.cu-email-comment__footer__reply .comment-bar__editor .ql-editor{border-radius:0 0 8px 8px}.cu-email-comment__aside{margin:0 10px 0 0;flex-shrink:0;min-width:32px}.cu-email-comment__body{max-width:calc(100% - 40px);order:0;min-width:0;background:#fff;border:1px solid #e9ebf0;flex-grow:1;border-radius:8px;position:relative;margin:0 5px 10px 0;padding:5px}.dark-theme .cu-email-comment__body{background-color:#384047;border-color:#1e272e}.cu-comment:hover .cu-email-comment__body-email{border-radius:8px 8px 0 0}.cu-email-comment__avatar{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50px;background-color:#7b68ee;border:1px solid #7b68ee}@supports (--theme-main-color:#7b68ee){.cu-email-comment__avatar{background-color:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-email-comment__avatar-container{position:relative}.cu-email-comment__avatar-container .cu-avatar-container{position:absolute;bottom:-4px;right:-2px}.cu-email-comment__avatar-user{width:20px;height:20px}.cu-email-comment__avatar-mail{width:20px;height:20px;fill:#fff}.cu-email-comment .cu-comment .cu-comment{padding:0 15px}.cu-email-comment .cu-comment__reply-toggle_centered{justify-content:space-around}.cu-email-comment .cu-comment-reactions,.cu-email-comment .cu-comment__reply-toggle_centered .cu-email-comment__footer__reply-toggle_hidden-section{width:auto}.cu-email-comment .cu-comment__reply-toggle{min-width:0!important;padding:0 0 0 15px;border:none;flex-grow:1}.cu-email-comment .cu-comment__reply-toggle-user-group{margin:0 0 0 5px}.cu-email-comment .cu-comment__reply-toggle_centered{border-top:1px solid #e9ebf0}.dark-theme .cu-email-comment .cu-comment__reply-toggle_centered{border-color:#1e272e}.cu-email-comment .thread-container__email-footer-visible .cu-comment__body-email,.cu-email-comment .thread-container__email-has-reactions .cu-comment__body-email{border-bottom-left-radius:0;border-bottom-right-radius:0}.cu-email-comment .cu-email-reply__content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:20px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-comment .cu-email-reply__content{font-family:var(--global-font-support)}}.cu-email-comment .cu-comment__body-email .cu-comment__emails-read{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;display:flex;align-items:center;position:relative;border-radius:4px;height:24px;min-width:24px;padding:0 6px;overflow:hidden;flex-shrink:0;color:var(--theme-main-color)}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-comment .cu-comment__body-email .cu-comment__emails-read{font-family:var(--global-font-support)}}.cu-email-comment .cu-comment__body-email .cu-comment__emails-read:before{content:"";position:absolute;left:0;top:0;background:var(--theme-main-color);opacity:.1;width:100%;height:100%}.cu-email-comment .cu-comment__body-email .cu-comment__emails-read .icon{width:12px;height:12px;fill:var(--theme-main-color);margin-right:5px}.cu-email-comment .cu-comment__body-email .cu-comment__emails-read-toolbar{position:relative;top:-4px}.cu-email-comment .cu-comment__body-email .cu-comment__emails-read-toolbar-mr{margin-right:5px}'],encapsulation:2,changeDetection:0}),e})()},vnix:function(e,t,i){"use strict";i.d(t,"a",function(){return _});var o=i("ofXK"),n=i("1M0N"),s=i("vxfF"),c=i("VBI8"),a=i("tGh3"),r=i("bx+h"),l=i("3XhA"),d=i("K0KF"),u=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[o.c,c.a,n.a,a.a,r.a,l.a,d.a,s.e]]}),e})();var p=i("C8uC"),h=i("gb9A");let f=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[o.c,p.LoaderModule,h.a]]}),e})();var b=i("GtmI"),g=i("tTDf");let _=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,m,f,b.a,g.a]]}),e})()},wCsn:function(e,t,i){"use strict";var o=i("IPAr"),n=i("EmYC"),s=i("kaWx");function c(e,t,i){var n,c,a,r,l,d,u,m,p=this.options.commonmark,h=this.options.footnotes,f=t.charAt(0),b=0,g=t.length,_="",v="",k="link",y="shortcut";if("!"===f&&(k="image",v=f,f=t.charAt(++b)),"["===f){if(b++,v+=f,d="",h&&"^"===t.charAt(b)){if("image"===k)return;v+="^",b++,k="footnote"}for(m=0;b<g;){if("["===(f=t.charAt(b)))u=!0,m++;else if("]"===f){if(!m)break;m--}"\\"===f&&(d+="\\",f=t.charAt(++b)),d+=f,b++}if(_=d,n=d,"]"===(f=t.charAt(b))){if(b++,_+=f,d="",!p)for(;b<g&&(f=t.charAt(b),o(f));)d+=f,b++;if(f=t.charAt(b),"footnote"===k||"["!==f||h&&"^"===t.charAt(b+1)){if(!n)return;c=n}else{for(c="",d+=f,b++;b<g&&"["!==(f=t.charAt(b))&&"]"!==f;)"\\"===f&&(c+="\\",f=t.charAt(++b)),c+=f,b++;"]"===(f=t.charAt(b))?(y=c?"full":"collapsed",d+=c+f,b++):c="",_+=d,d=""}if("full"===y||!u)return _=v+_,"link"===k&&this.inLink?null:!!i||("footnote"===k&&-1!==n.indexOf(" ")?e(_)({type:"footnote",children:this.tokenizeInline(n,e.now())}):((a=e.now()).column+=v.length,a.offset+=v.length,r={type:k+"Reference",identifier:s(c="full"===y?c:n),label:c},"link"!==k&&"image"!==k||(r.referenceType=y),"link"===k?(l=this.enterLink(),r.children=this.tokenizeInline(n,a),l()):"image"===k&&(r.alt=this.decode.raw(this.unescape(n),a)||null),e(_)(r)))}}}e.exports=c,c.locator=n},wGqn:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("1M0N"),n=i("vi4T"),s=i("KyjD"),c=i("ofXK"),a=i("K0KF"),r=i("gb9A"),l=i("AGVE"),d=i("bx+h"),u=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[n.a,s.a,o.a,c.c,a.a,r.a,l.a,d.a]]}),e})()},wNhb:function(e,t,i){"use strict";i.d(t,"a",function(){return g});var o=i("fXoL"),n=i("ofXK");function s(e,t){}let c=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-popover-window"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Lb("popover in popover-auto bs-popover-auto auto "+(t.placement||"cu-invisible")+" "+t.containerClass)},inputs:{placement:"placement",contentTemplate:"contentTemplate",containerClass:"containerClass"},decls:3,vars:1,consts:[[1,"popover-arrow","arrow"],[1,"popover-content","popover-body"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.cc(1,"div",1),o.bd(2,s,0,0,"ng-template",2),o.bc()),2&e&&(o.Ib(2),o.Dc("ngTemplateOutlet",t.contentTemplate))},directives:[n.x],encapsulation:2,changeDetection:0}),e})();var a=i("XNiG"),r=i("2Vo4"),l=i("xgIS"),d=i("EY2u"),u=i("PqYM"),m=i("VRyK"),p=i("eIep"),h=i("1G5W"),f=i("pLZG"),b=i("EwKL");let g=(()=>{class e{constructor(e,t,i,n,s){this.componentFactoryResolver=e,this.zone=t,this.element=i,this.viewContainerRef=n,this.injector=s,this.containerClass="",this.placement=["top","bottom","left","right"],this.trigger="click",this.isDisabled=!1,this.onShown=new o.o,this.onHidden=new o.o,this.popoverFactory=this.componentFactoryResolver.resolveComponentFactory(c),this.destroy$=new a.a,this.trigger$=new r.a(null)}ngOnDestroy(){this.destroy$.next(),this.hide()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.trigger$.pipe(Object(p.a)(e=>"click"===e?Object(l.a)(this.element.nativeElement,"click",{passive:!0}):d.a),Object(h.a)(this.destroy$)).subscribe(()=>{this.zone.run(()=>{this.isDisabled||this.toggle()})});const e=Object(l.a)(this.element.nativeElement,"mouseleave",{passive:!0});this.trigger$.pipe(Object(p.a)(t=>"hover"===t?Object(l.a)(this.element.nativeElement,"mouseenter",{passive:!0}).pipe(Object(p.a)(()=>Object(u.a)(this.popoverDelay).pipe(Object(h.a)(e)))):d.a),Object(h.a)(this.destroy$)).subscribe(()=>{this.zone.run(()=>{this.isDisabled||this.show()})}),this.trigger$.pipe(Object(f.a)(e=>"hover"===e),Object(p.a)(t=>"hover"===t?e:d.a),Object(h.a)(this.destroy$)).subscribe(()=>{this.zone.run(()=>{this.hide()})})})}ngOnChanges(e){e.trigger&&this.trigger$.next(this.trigger)}show(){if(!this.isOpen){this.onShown.emit(),this.popoverRef=this.viewContainerRef.createComponent(this.popoverFactory,0,this.injector,[]),this.popoverRef.instance.contentTemplate=this.template,this.popoverRef.instance.containerClass=this.containerClass,document.body.appendChild(this.popoverRef.location.nativeElement),this.popoverRef.changeDetectorRef.detectChanges();const e=Object(m.a)(this.destroy$,this.onHidden);Object(u.a)(0).pipe(Object(h.a)(e)).subscribe(()=>{this.popoverRef.instance.placement=Object(b.a)(this.hostElement||this.element.nativeElement,this.popoverRef.location.nativeElement,this.placement,!0),this.popoverRef.changeDetectorRef.detectChanges(),this.zone.runOutsideAngular(()=>{Object(l.a)(document,"click",{passive:!0}).pipe(Object(h.a)(e)).subscribe(e=>{this.outsideClick&&this.popoverRef.location.nativeElement!==e.target&&!this.popoverRef.location.nativeElement.contains(e.target)&&this.zone.run(()=>{this.hide()})})})}),this.isOpen=!0}}hide(){this.isOpen&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.popoverRef.hostView)),this.popoverRef=null,this.isOpen=!1,this.onHidden.emit())}toggle(){this.isOpen?this.hide():this.show()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.j),o.Wb(o.B),o.Wb(o.m),o.Wb(o.U),o.Wb(o.t))},e.\u0275dir=o.Rb({type:e,selectors:[["","cuPopover",""]],inputs:{template:["cuPopover","template"],containerClass:"containerClass",placement:"placement",outsideClick:"outsideClick",trigger:"trigger",hostElement:"hostElement",popoverDelay:"popoverDelay",isDisabled:["cuPopoverDisabled","isDisabled"]},outputs:{onShown:"onShown",onHidden:"onHidden"},exportAs:["cuPopover"],features:[o.Gb]}),e})()},wT7j:function(e,t,i){"use strict";i.d(t,"f",function(){return d}),i.d(t,"c",function(){return u}),i.d(t,"d",function(){return m}),i.d(t,"e",function(){return p}),i.d(t,"a",function(){return h}),i.d(t,"b",function(){return f});var o=i("s3LH"),n=i("YAnr"),s=i("cC1p"),c=i("IE5h"),a=i("Wk/N"),r=i("JKnl");const l=o.d.import("delta");function d(e,t="",i=!0,n){if(e&&e.editor&&e.editor.scroll.domNode){e.editor.setSelection=e.setSelection,e.editor.enable();const s=e.editor.getContents(),c=new l(s.ops.filter(e=>!e.insert||!e.insert.slash_command||e.insert.slash_command.sessionId!==n&&n)),a=s.diff(c);e.editor.updateContents(a,o.d.sources.API),t&&m(e.editor,t,i,e.selection)}}function u(e){const t={};return t.editor=e,t.selection=e.getSelection(),t.editor.disable(),t.setSelection=e.setSelection,t.editor.setSelection=()=>{},t}function m(e,t="",i=!0,s){if(e&&t){const c=s||e.getSelection(i);if(c){const a=s?c.index-1:c.index,r=(new l).retain(a),[d,u]=e.getLine(c.index),m=d&&d.formats(),p=m&&"list"===d.statics.blotName?Object.assign(Object.assign({},m.list),{"wrapper-indent":m.indent,"in-list":m.list.list}):{};let h=0;Array.isArray(t)?t.forEach(e=>{e.insert?e.insert.frame?(u>0&&(r.insert("\n",m),h+=1),r.insert(e.insert,Object.assign(Object.assign({},p),e.attributes))):r.insert(e.insert,e.attributes):r.insert(e),h+=Object(n.k)(e,!1,!1)}):(r.insert(t),h=t.length),e.updateContents(r,o.d.sources.USER),i&&e.setSelection(a+h,0)}}}function p(e,t,i,o){if(e)switch(e.key){case s.F.key:return[{insert:{divider:!0}},"\n"];case s.O.key:return[{insert:t,attributes:{link:t}}," "];case s.G.key:const e=Object(n.i)(t,!0,!0);if(e&&e.id)return[{insert:{frame:e},attributes:{"data-size":Object(n.n)(e)||o}}];break;case s.Y.key:if(t&&t.viewId)return[{insert:{listview:t},attributes:{}}," "];break;case s.m.key:return[{insert:{table_content:!0},attributes:{}}," "];case s.f.key:if(!t||"upload"===t.id)return;const l=t;return i&&Object(c.m)(l.extension)?[{insert:{image:{src:l.url,id:l.id}}}," "]:[{insert:{attachment:{id:l.id||0,name:l.title,type:l.extension,source:l.source,date:l.date,user:l.user,extension:l.extension,thumbnail_large:l.thumbnail_large||null,thumbnail_small:l.thumbnail_large||null,url:l.url||null,deleted:l.deleted,deleted_by:l.deleted_by}}},"\n"];case s.ab.key:if(!t)return;try{return Object(r.b)(t)}catch(a){}break;case s.l.key:return[{insert:{button:t}},"\n"];case s.H.key:return[{insert:{giphy:{query:t}}}]}}function h(e,t,i){if(!e)return;const o=e.getSelection(),[c]=e.getLine(o.index),r=c.formats();switch(t){case s.U.key:return"list"===c.statics.blotName?(e.format("blockquote",Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list})),e.format("indent",!1)):e.format("blockquote",{},a.i.USER),!0;case s.A.key:return"list"===c.statics.blotName?(e.format("banner",Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list,banner:"success"})),e.format("indent",!1)):e.format("banner","success",a.i.USER),!0;case s.y.key:return"list"===c.statics.blotName?(e.format("banner",Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list,banner:"danger"})),e.format("indent",!1)):e.format("banner","danger",a.i.USER),!0;case s.z.key:return"list"===c.statics.blotName?(e.format("banner",Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list,banner:"info"})),e.format("indent",!1)):e.format("banner","info",a.i.USER),!0;case s.B.key:return"list"===c.statics.blotName?(e.format("banner",Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list,banner:"warning"})),e.format("indent",!1)):e.format("banner","warning",a.i.USER),!0;case s.D.key:return e.format("code",!0,a.i.USER),!0;case s.C.key:return e.format("bold",!0,a.i.USER),!0;case s.N.key:return e.format("italic",!0,a.i.USER),!0;case s.V.key:return e.format("strike",!0,a.i.USER),!0;case s.E.key:return"list"===c.statics.blotName?(e.format("code-block",Object.assign(Object.assign({},r.list),{"wrapper-indent":r.indent,"in-list":r.list.list,"code-block":"plain"})),e.format("indent",!1)):e.format("code-block","plain",a.i.USER),!0;case s.T.key:return e.format("header",null,a.i.USER),!0;case s.K.key:return e.format("header","1",a.i.USER),!0;case s.L.key:return e.format("header","2",a.i.USER),!0;case s.M.key:return e.format("header","3",a.i.USER),!0;case s.r.key:return e.format("background",i,a.i.USER),!0;case s.x.key:return e.format("background",n.E[0],a.i.USER),!0;case s.t.key:return e.format("background",n.E[1],a.i.USER),!0;case s.w.key:return e.format("background",n.E[2],a.i.USER),!0;case s.s.key:return e.format("background",n.E[3],a.i.USER),!0;case s.u.key:return e.format("background",n.E[4],a.i.USER),!0;case s.v.key:return e.format("background",n.E[5],a.i.USER),!0;case s.R.key:return e.format("list","ordered",a.i.USER),!0;case s.P.key:return e.format("list","bullet",a.i.USER),!0;case s.Q.key:return e.format("list","unchecked",a.i.USER),!0;case s.S.key:return e.format("list","toggled",a.i.USER),!0;case s.W.key:return e.getModule("table").insertTable(3,3),!0}}function f(e,t){if(!e)return;const i=e.getSelection(),[o]=e.getLine(i.index),n=e.getIndex(o),c=o.length();if(t===s.Cb.key)return void e.updateContents((new l).retain(n).retain(c,{header:!1,list:!1,banner:!1,blockquote:!1,"code-block":!1}),a.i.USER);let r="",d="";switch(t){case s.xb.key:r="header",d="1";break;case s.yb.key:r="header",d="2";break;case s.zb.key:r="header",d="3";break;case s.vb.key:r="list",d="unchecked";break;case s.ub.key:r="list",d="bullet";break;case s.Ab.key:r="list",d="ordered";break;case s.Db.key:r="list",d="toggled";break;case s.wb.key:r="code-block",d="true";break;case s.Bb.key:r="blockquote",d="true";break;case s.sb.key:r="banner",d="success";break;case s.qb.key:r="banner",d="danger";break;case s.rb.key:r="banner",d="info";break;case s.tb.key:r="banner",d="warning"}e.format(r,d,a.i.USER)}},wa4x:function(e,t,i){"use strict";i.d(t,"c",function(){return a}),i.d(t,"a",function(){return r}),i.d(t,"b",function(){return l}),i.d(t,"d",function(){return d});var o=i("l7P3"),n=i("c3rA");const s=Object(o.createFeatureSelector)("userGroups"),c=Object(o.createSelector)(s,e=>e.pendingChanges),a=Object(o.createSelector)(s,c,n.getTeamUsers,(e,t,i)=>{if(e.groups)return e.groups.map(e=>{const o=Object.assign(Object.assign({},e),t[e.id]);return Object.assign(Object.assign({},o),{avatar:Object.assign({},o.avatar),members:o.members.map(e=>i.find(t=>t.id===e.id)).filter(Boolean)})})}),r=Object(o.createSelector)(s,e=>e.createGroupLoading),l=Object(o.createSelector)(s,e=>e.deleteGroupLoading),d=e=>Object(o.createSelector)(a,t=>{if(t)return t.filter(t=>t.members.some(t=>t.id===e))})},wjE6:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Ub({type:e}),e.\u0275inj=n.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},wxjI:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("ofXK"),n=i("3Pt+"),s=i("e6ZX"),c=i("iEFA"),a=i("HiD6"),r=i("RFFN"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.l,n.x,s.a,c.a,a.a,r.a]]}),e})()},xJzU:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=function(e){return e.Status="status",e.ToggleStatus="toggleStatus",e.Assignee="assignee",e.Priority="priority",e.Date="date",e.TimeEst="timeEst",e.TimeTrack="timeTrack",e.FloatMove="floatMove",e.RecurringLegacy="recurringLegacy",e.Recurring="recurring",e.Rename="rename",e.Remove="remove",e.Convert="convert",e.AssignedComment="assignedComment",e.AddTag="addTag",e.RemoveTag="removeTag",e.RenameTag="renameTag",e.DeleteTag="deleteTag",e.ChangeColorTag="changeColorTag",e.StatusSettings="statusSettings",e.EditCustomFieldValue="editCustomFieldValue",e.RemoveAttachment="removeAttachment",e.ChangeAttachments="changeAttachments",e.Dependency="editDependency",e.ReminderNotif="reminderNotif",e.GroupAssignee="groupassignee",e.AddTasksToAnotherList="addTasksToAnotherList",e.RemoveTasksFromAnotherList="removeTasksFromAnotherList",e.MoveTaskToAnotherList="moveTaskToAnotherList",e.SetTaskData="setTaskData",e.UpdateRelationships="updateRelationships",e}({})},xZEF:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("nLWA");function n(e,t=o.a,i=!1,n=!1,c=!1,a=!1){if(0==(e=+e)&&c)return n?"0h":"0m";const r=36e5*(t=t||o.a),l=7*r,d=30*r;let u,m,p,h,f;e>=0||(e*=-1),n?u=e:(p=Math.floor(e/d),m=s("mo",p,""),u=e%d,h=Math.floor(u/l),m=s("w",h,m),u%=l,f=Math.floor(u/r),m=s("d",f,m),u%=r);const b=Math.floor(u/36e5);m=s("h",b,m||""),u%=36e5;const g=Math.round(u/6e4);return p||h||f||(m=60===g?s("h",b+1,""):s("m",g,m)),a&&""===m?"":m||(i?0:"1m")}function s(e,t,i){return t&&(i+=`${t}${e} `),i}},"xg+I":function(e,t,i){"use strict";i.d(t,"a",function(){return h});var o=i("fXoL"),n=i("XNiG"),s=i("jJQC"),c=i("Jf2N"),a=i("ofXK");function r(e,t){1&e&&(o.mc(0,2,2),o.Yb(1),o.jc())}function l(e,t){1&e&&(o.mc(0,2,3),o.Yb(1),o.jc())}function d(e,t){if(1&e&&(o.mc(0,2,1),o.ac(1),o.bd(2,r,2,0,"ng-container",4),o.Xb(3,"b"),o.bd(4,l,2,0,"ng-container",4),o.Zb(),o.jc()),2&e){const e=t.$implicit,i=t.last,n=t.first;o.Ib(2),o.Dc("ngIf",i&&!n),o.Ib(2),o.Dc("ngIf",!i),o.kc(e.name),o.hc(0)}}function u(e,t){if(1&e&&(o.mc(0,2,4),o.Xb(1,"b"),o.jc()),2&e){const e=o.uc();o.Ib(1),o.kc(e.selectTaskData.task.name),o.hc(0)}}function m(e,t){if(1&e&&(o.mc(0,2,5),o.Xb(1,"b"),o.jc()),2&e){const e=o.uc();o.Ib(1),o.kc(e.selectTaskData.toTask.name),o.hc(0)}}function p(e,t){if(1&e&&(o.mc(0,2,6),o.cc(1,"span"),o.Xb(2,"b"),o.bc(),o.jc()),2&e){const e=o.uc();o.Ib(2),o.kc(e.selectTaskData.toTask.name),o.hc(0)}}let h=(()=>{class e{constructor(e){this.modalService=e,this.selectTaskData=null,this.parentTask=!1,this.onConfirm=new o.o,this.onCancel=new o.o,this.destroy$=new n.a,this.trackById=Object(s.d)("id")}ngOnDestroy(){this.destroy$.next()}confirm(){this.onConfirm.emit(),this.modalService.close()}cancel(){this.onCancel.emit(),this.modalService.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(c.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["merge-confirm"]],inputs:{selectTaskData:"selectTaskData",parentTask:"parentTask"},outputs:{onConfirm:"onConfirm",onCancel:"onCancel"},decls:12,vars:5,consts:function(){let e,t,i;return e=$localize`:@@common_cancel␟e67bebb0291cbe76b190e83225878cdd3a8a6df6␟4233344881307710716: Cancel `,t=$localize`:@@common_continue␟9d1c11857c5d3e045709418620ce33cb27487a2b␟4792745092398993419: Continue `,i=$localize`:@@cu-merge-confirm__task-items-to-merge␟6d7e1879a26a68d1268c7d164ee6daa0e766a91f␟622455162039113265:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER_2:${"\ufffd*2:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:and ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*4:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd#3:1\ufffd|\ufffd#2:6\ufffd]"}:START_BOLD_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:'s${"[\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*5:5\ufffd|\ufffd/#3:1\ufffd|\ufffd/#2:6\ufffd]"}:CLOSE_BOLD_TEXT:${"\ufffd*4:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_1:, ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*4:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*4:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*4:4\ufffd\ufffd#1:4\ufffd"}:START_BOLD_TEXT_1:${"\ufffd0:4\ufffd"}:INTERPOLATION_1:'s${"[\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*5:5\ufffd|\ufffd/#3:1\ufffd|\ufffd/#2:6\ufffd]"}:CLOSE_BOLD_TEXT: subtasks will become subtasks of ${"\ufffd*5:5\ufffd\ufffd#1:5\ufffd"}:START_BOLD_TEXT_2:${"[\ufffd0:5\ufffd|\ufffd0:6\ufffd]"}:INTERPOLATION_2:.${"[\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*5:5\ufffd|\ufffd/#3:1\ufffd|\ufffd/#2:6\ufffd]"}:CLOSE_BOLD_TEXT:${"\ufffd*6:6\ufffd\ufffd#1:6\ufffd"}:START_TAG_SPAN:${"[\ufffd#3:1\ufffd|\ufffd#2:6\ufffd]"}:START_BOLD_TEXT:${"[\ufffd0:5\ufffd|\ufffd0:6\ufffd]"}:INTERPOLATION_2:'s${"[\ufffd/#1:4\ufffd\ufffd/*4:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*5:5\ufffd|\ufffd/#3:1\ufffd|\ufffd/#2:6\ufffd]"}:CLOSE_BOLD_TEXT: parent task.${"\ufffd/#1:6\ufffd\ufffd/*6:6\ufffd"}:CLOSE_TAG_SPAN:`,i=o.lc(i),[[1,"task-sc__inner"],[1,"task-sc__title"],i,[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"task-sc__options"],[1,"cu-btn","cu-btn_status","cu-btn_option","cu-btn_cancel",3,"click"],e,[1,"cu-btn","cu-btn_status","cu-btn_option",3,"click"],t]},template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.mc(2,2),o.bd(3,d,5,3,"ng-container",3),o.bd(4,u,2,1,"b",4),o.bd(5,m,2,1,"b",4),o.bd(6,p,3,1,"span",4),o.jc(),o.bc(),o.bc(),o.cc(7,"div",5),o.cc(8,"button",6),o.qc("click",function(){return t.cancel()}),o.gc(9,7),o.bc(),o.cc(10,"button",8),o.qc("click",function(){return t.confirm()}),o.gc(11,9),o.bc(),o.bc()),2&e&&(o.Ib(3),o.Dc("ngForOf",t.selectTaskData.tasks)("ngForTrackBy",t.trackById),o.Ib(1),o.Dc("ngIf",t.selectTaskData.task),o.Ib(1),o.Dc("ngIf",!t.parentTask),o.Ib(1),o.Dc("ngIf",t.parentTask))},directives:[a.p,a.q],encapsulation:2}),e})()},xkQk:function(e,t,i){"use strict";var o=i("EBzq");e.exports=s,s.wrap=o;var n=[].slice;function s(){var e=[],t={run:function(){var t=-1,i=n.call(arguments,0,-1),s=arguments[arguments.length-1];if("function"!=typeof s)throw new Error("Expected function as last argument, not "+s);function c(a){var r=e[++t],l=n.call(arguments,0),d=l.slice(1),u=i.length,m=-1;if(a)s(a);else{for(;++m<u;)null==d[m]&&(d[m]=i[m]);i=d,r?o(r,c).apply(null,i):s.apply(null,[null].concat(i))}}c.apply(null,[null].concat(i))},use:function(i){if("function"!=typeof i)throw new Error("Expected `fn` to be a function, not "+i);return e.push(i),t}};return t}},y2kl:function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"b",function(){return c}),i.d(t,"a",function(){return a});var o=i("1Lli"),n=i("3yLq");function s(e,t,i,o,n){if(!e)return[];let s;const c=i?i.replace(/(@|\u200B)/g,"").replace(/\s/g," ").toLowerCase():"";return s=c?e.filter(e=>!t||e.id!==t.id).filter(e=>{const t=e.displayName||e.username||e.email;return t&&-1!==t.toLowerCase().indexOf(c)}):e.filter(e=>!t||e.id!==t.id),s.sort((e,t)=>{const i=e.displayName||e.username||e.email,o=t.displayName||t.username||t.email;return i.toLowerCase().indexOf(c)-o.toLowerCase().indexOf(c)||i.localeCompare(o)}),o&&s.sort((e,t)=>{let i=!1,s=!1;const a=o&&o[e.id]&&o[e.id][n]||0,r=o&&o[t.id]&&o[t.id][n]||0;return c&&(i=(e.displayName||e.username||"").toLowerCase().startsWith(c.toLowerCase()),s=(t.displayName||t.username||"").toLowerCase().startsWith(c.toLowerCase())),i&&!s?-1:s&&!i?1:r-a}),s}function c(e,t){return Object(o.a)(e||[],["name"]).filter(e=>Object(n.a)(e.name,t)||Object(n.a)(e.handle,t))}function a(e,t){return(e||[]).filter(e=>Object(n.a)(e.label,t))}},yJWD:function(e,t,i){"use strict";i.d(t,"a",function(){return M}),i.d(t,"b",function(){return q});var o=i("fXoL"),n=i("LRne"),s=i("XNiG"),c=i("l7P3"),a=i("HHlo"),r=i("2eDp"),l=i("jJQC"),d=i("lJxs"),u=i("IzEk"),m=i("c3rA"),p=i("SkDE"),h=i("Jf2N"),f=i("ofXK"),b=i("UdVN"),g=i("P5sH"),_=i("BTFG");function v(e,t){if(1&e&&(o.mc(0,3,1),o.Yb(1),o.vc(2,"async"),o.jc()),2&e){const e=o.uc();let t=null;o.Ib(2),o.kc(null==(t=o.wc(2,1,e.fieldToEditUsages$))?null:t.entities.length),o.hc(0)}}function k(e,t){if(1&e&&(o.mc(0,22,1),o.ac(1),o.Xb(2,"span",23),o.Zb(),o.jc()),2&e){const e=o.uc(4);o.Ib(2),o.kc(e.hierarchyEntityLevelDeleteLabel),o.hc(0)}}function y(e,t){1&e&&(o.mc(0,22,2),o.Yb(1),o.jc())}function w(e,t){if(1&e&&(o.mc(0,22,3),o.ac(1),o.Xb(2,"span",23),o.Zb(),o.jc()),2&e){const e=o.uc(2).ngIf;o.Ib(2),o.kc(e.count)(e.count),o.hc(0)}}function x(e,t){if(1&e&&(o.cc(0,"div",19),o.cc(1,"div",20),o.ac(2),o.gc(3,21),o.Zb(),o.dd(4,": "),o.bc(),o.ac(5),o.mc(6,22),o.bd(7,k,3,1,"ng-container",4),o.bd(8,y,2,0,"ng-container",4),o.bd(9,w,3,2,"ng-container",4),o.jc(),o.Zb(),o.bc()),2&e){const e=o.uc().ngIf,t=o.uc(2);o.Ib(7),o.Dc("ngIf",t.hierarchyEntityLevelDeleteLabel),o.Ib(1),o.Dc("ngIf",t.hierarchyEntityLevelDeleteLabel&&e.count>0),o.Ib(1),o.Dc("ngIf",e.count>0)}}function I(e,t){if(1&e&&o.Xb(0,"span",30),2&e){const e=o.uc().$implicit;o.Dc("ngClass","cu-confirm-delete-custom-field-modal__icon"+e.icon)("icon",e.icon)}}function T(e,t){if(1&e&&(o.Xb(0,"cu-project-avatar",31),o.vc(1,"async"),o.vc(2,"async"),o.vc(3,"async"),o.vc(4,"async"),o.vc(5,"async")),2&e){const e=o.uc().$implicit,t=o.uc(4);o.Dc("image",null==o.wc(1,5,t.projectsMap$)[e.id]?null:o.wc(1,5,t.projectsMap$)[e.id].avatar)("color",null==o.wc(2,7,t.projectsMap$)[e.id]?null:o.wc(2,7,t.projectsMap$)[e.id].color)("iconSource",null==o.wc(3,9,t.projectsMap$)[e.id]?null:o.wc(3,9,t.projectsMap$)[e.id].avatar_source)("iconName",null==o.wc(4,11,t.projectsMap$)[e.id]?null:o.wc(4,11,t.projectsMap$)[e.id].avatar_value)("name",null==o.wc(5,13,t.projectsMap$)[e.id]?null:o.wc(5,13,t.projectsMap$)[e.id].name)}}function C(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=t.$implicit;o.Ib(1),o.fd("",e," > ")}}function D(e,t){if(1&e&&(o.cc(0,"span"),o.bd(1,C,2,1,"ng-container",32),o.dd(2),o.bc()),2&e){const e=o.uc().$implicit,t=o.uc(4);o.Ib(1),o.Dc("ngForOf",e.parents)("ngForTrackBy",t.trackByValue),o.Ib(1),o.fd(" ",e.name," ")}}function O(e,t){1&e&&(o.cc(0,"em"),o.gc(1,33),o.bc())}const S=function(e){return{"cu-confirm-delete-custom-field-modal__row_first":e}};function E(e,t){if(1&e&&(o.cc(0,"div",27),o.bd(1,I,1,2,"span",28),o.bd(2,T,6,15,"cu-project-avatar",29),o.bd(3,D,3,3,"span",4),o.bd(4,O,2,0,"em",4),o.bc()),2&e){const e=t.$implicit;o.Dc("ngClass",o.Hc(5,S,t.first)),o.Ib(1),o.Dc("ngIf",e.icon),o.Ib(1),o.Dc("ngIf","project"===e.type),o.Ib(1),o.Dc("ngIf",e.access),o.Ib(1),o.Dc("ngIf",!e.access)}}function P(e,t){if(1&e&&(o.cc(0,"div"),o.gc(1,34),o.bc()),2&e){const e=o.uc(2).ngIf;o.Ib(1),o.kc(e.count)(e.count),o.hc(1)}}function j(e,t){if(1&e&&(o.ac(0),o.cc(1,"div",19),o.cc(2,"div",20),o.ac(3),o.gc(4,24),o.Zb(),o.dd(5,": "),o.bc(),o.ac(6),o.mc(7,25),o.Xb(8,"span",23),o.jc(),o.Zb(),o.dd(9,": "),o.bd(10,E,5,7,"div",26),o.vc(11,"async"),o.bd(12,P,2,2,"div",4),o.bc(),o.Zb()),2&e){const e=o.uc().ngIf,t=o.uc(2);let i=null;o.Ib(10),o.Dc("ngForOf",null==(i=o.wc(11,3,t.fieldToEditUsages$))?null:i.entities)("ngForTrackBy",t.trackById),o.Ib(2),o.Dc("ngIf",e.count>0)}}function A(e,t){if(1&e&&(o.ac(0),o.bd(1,x,10,3,"div",18),o.vc(2,"async"),o.bd(3,j,13,5,"ng-container",4),o.vc(4,"async"),o.Zb()),2&e){const e=t.ngIf,i=o.uc(2);let n=null,s=null;o.Ib(1),o.Dc("ngIf",(e.count>0||i.hierarchyEntityLevelDeleteLabel)&&(null==(n=o.wc(2,2,i.fieldToEditUsages$))?null:n.entities.length)<2),o.Ib(2),o.Dc("ngIf",(null==(s=o.wc(4,4,i.fieldToEditUsages$))?null:s.entities.length)>=2)}}function $(e,t){1&e&&o.Xb(0,"cu-loader")}function U(e,t){if(1&e){const e=o.dc();o.ac(0),o.bd(1,A,5,6,"ng-container",6),o.vc(2,"async"),o.bd(3,$,1,0,"ng-template",null,7,o.cd),o.cc(5,"div",8),o.cc(6,"button",9),o.qc("click",function(){return o.Uc(e),o.uc().cancelDelete()}),o.gc(7,10),o.bc(),o.cc(8,"button",11),o.qc("click",function(){return o.Uc(e),o.uc().saveDelete()}),o.vc(9,"async"),o.cc(10,"div",12),o.gc(11,13),o.bc(),o.cc(12,"div",14),o.Xb(13,"div",15),o.Xb(14,"div",16),o.Xb(15,"div",17),o.bc(),o.bc(),o.bc(),o.Zb()}if(2&e){const e=o.Rc(4),t=o.uc();let i=null;o.Ib(1),o.Dc("ngIf",o.wc(2,3,t.tasksWithCustomField$))("ngIfElse",e),o.Ib(7),o.Dc("disabled",null==(i=o.wc(9,5,t.loading$))?null:i.deleteField)}}function R(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.cc(1,"button",35),o.qc("click",function(){return o.Uc(e),o.uc().deleteEverywhere()}),o.gc(2,36),o.bc(),o.cc(3,"button",37),o.qc("click",function(){return o.Uc(e),o.uc().saveDelete(!1)}),o.vc(4,"async"),o.cc(5,"div",12),o.gc(6,38),o.bc(),o.cc(7,"div",14),o.Xb(8,"div",15),o.Xb(9,"div",16),o.Xb(10,"div",17),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc();let t=null;o.Ib(3),o.Dc("disabled",null==(t=o.wc(4,2,e.loading$))?null:t.deleteField),o.Ib(3),o.kc(e.entityLabel),o.hc(6)}}let M=(()=>{class e{constructor(e,t,i,a){this.store=e,this.customFieldsService=t,this.modal=i,this.injector=a,this.autoClose=!1,this.isRelationshipCf=!1,this.cancel=new o.o,this.fieldDeleted=new o.o,this.loading$=this.store.pipe(Object(c.select)(r.k)),this.projectsMap$=this.store.select(m.getAllProjects).pipe(Object(d.a)(e=>{const t={};return e.forEach(e=>{t[e.id]=e}),t})),this.fieldToEditUsages$=Object(n.a)(),this.trackByValue=l.f,this.destroy$=new s.a,this.trackById=Object(l.d)("id")}ngOnDestroy(){this.destroy$.next()}setFieldToDelete(e,t,i=!0){this.fieldToDelete=e,this.entity=t,this.deleteGlobal=i,this.store.select(m.getTeam).pipe(Object(u.a)(1)).subscribe(e=>{this.store.dispatch(Object(a.j)({entity:{type:"team",id:e.id,name:e.name}}))}),this.fieldToEditUsages$=this.store.select(Object(r.h)(e));const o={team:{label:$localize`:@@common_workspace:Workspace`,childrenLabel:$localize`:@@cu-confirm-delete-custom-field-modal__spaces-folder-lists:Spaces, folders and lists`},project:{label:$localize`:@@common_space:Space`,childrenLabel:$localize`:@@cu-confirm-delete-custom-field-modal__folder-lists:Folders and lists`},category:{label:$localize`:@@common_folder:Folder`,childrenLabel:$localize`:@@common_lists:Lists`},subcategory:{label:$localize`:@@common_list:List`,childrenLabel:""}},{childrenLabel:n,label:s}=o[e.entity.type];this.hierarchyEntityLevelDeleteLabel=n?`ALL ${n.toUpperCase()} in this ${s}`:"",this.entityLabel=s,this.tasksWithCustomField$=this.customFieldsService.getField(e.id,{countValues:!0,entity:e.entity}).pipe(Object(d.a)(e=>({count:Number(e.value_count)})))}saveDelete(e=!0){this.store.dispatch(Object(a.e)({fieldId:this.fieldToDelete.id,entity:this.entity,all:e})),this.fieldDeleted.emit(),this.handleAutoClose()}cancelDelete(){this.cancel.emit(),this.handleAutoClose()}deleteEverywhere(){this.modal.close();const t=this.modal.openComponent(e,this.injector,{blank:!1,modifier:"task-sc__modal"});t.instance.autoClose=this.autoClose,t.instance.setFieldToDelete(this.fieldToDelete,this.entity,!0)}handleAutoClose(){this.autoClose&&this.modal.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(c.Store),o.Wb(p.a),o.Wb(h.a),o.Wb(o.t))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-confirm-delete-custom-field-modal"]],hostAttrs:[1,"cu-confirm-delete-custom-field-modal"],inputs:{autoClose:"autoClose",isRelationshipCf:"isRelationshipCf"},outputs:{cancel:"cancel",fieldDeleted:"fieldDeleted"},decls:9,vars:6,consts:function(){let e,t,i,n,s,c,a,r,l,d,u,m,p;return e=$localize`:@@cu-confirm-delete-custom-field-modal__question_delete-cf␟f15bc36b5dd56b4a2d0e29c7b770ffde11b628e8␟5970900694916026183: Are you sure you want to delete${"\ufffd#4\ufffd\ufffd/#4\ufffd"}:LINE_BREAK:this ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: from ${"\ufffd0:1\ufffd"}:INTERPOLATION_1: places${"\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:? `,t=$localize`:@@common_cancel␟a5433ae2324496bea9537caa5e8a2719d8e958d8␟4134917114666618814: Cancel `,i=$localize`:@@common_delete␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,n=$localize`:@@common_warning␟a8059e31694578c1b0344a76a345357dd60e8f01␟6759205696902713848:Warning`,s=$localize`:␟095696f754a6f2060bfe6f2419951ddad3d727e5␟2997060973080862124:{VAR_PLURAL, plural, =1 {task} other {tasks}}`,s=o.lc(s,{VAR_PLURAL:"\ufffd1:3\ufffd"}),c=$localize`:@@cu-confirm-delete-custom-field-modal__warning-proceed_description-1␟818b280cec86cd2afa044896dd7b2881d03cccd7␟3862962952270571407: You are deleting this custom field ${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:from ${"[\ufffd#2:1\ufffd|\ufffd#2:3\ufffd]"}:START_TAG_SPAN:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#2:1\ufffd|\ufffd/#2:3\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*8:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: and ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*9:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_2:from ${"[\ufffd#2:1\ufffd|\ufffd#2:3\ufffd]"}:START_TAG_SPAN:${"\ufffd0:3\ufffd"}:INTERPOLATION_1: ${s}:ICU:${"[\ufffd/#2:1\ufffd|\ufffd/#2:3\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd]"}:CLOSE_TAG_NG_CONTAINER:. Are you sure? Admins are able to restore deleted fields. `,c=o.lc(c),a=$localize`:@@common_warning␟a8059e31694578c1b0344a76a345357dd60e8f01␟6759205696902713848:Warning`,r=$localize`:@@cu-confirm-delete-custom-field-modal__warning-proceed_description-2␟525af58d3e555dc38129e9b6631ae2cb0fc228f1␟1773699883714884356: You are deleting this custom field from ${"\ufffd#8\ufffd"}:START_TAG_SPAN:ALL of the following places${"\ufffd/#8\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:@@common_not-shared-with-me␟d46a765dba30c9d2d98e30094b9b9505f79d8be7␟3122550084009568341:Not shared with me`,d=$localize`:␟095696f754a6f2060bfe6f2419951ddad3d727e5␟2997060973080862124:{VAR_PLURAL, plural, =1 {task} other {tasks}}`,d=o.lc(d,{VAR_PLURAL:"\ufffd1\ufffd"}),u=$localize`:@@cu-confirm-delete-custom-field-modal__task-count␟51895e0df2dda38c3df0a0e60faf57be1111b092␟38415460542178412: ${"\ufffd0\ufffd"}:INTERPOLATION: ${d}:ICU: `,m=$localize`:@@cu-confirm-delete-custom-field-modal__btn-txt_delete-everywhere␟2f2018b818a5774b00b23116c1e718c799aa1139␟1056163797490415421: Delete everywhere `,p=$localize`:@@cu-confirm-delete-custom-field-modal__btn-txt_remove-from-entity␟ccdfe68dfe4571e5c2a216cfa065e9bad3c454fa␟1836524383612130337: Remove from ${"\ufffd0\ufffd"}:INTERPOLATION: `,[[1,"cu-conflict-management"],[1,"cu-conflict-management__warning-img"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],e,[4,"ngIf"],["class","move-category__footer",4,"ngIf"],[4,"ngIf","ngIfElse"],["loader",""],[1,"move-category__footer"],[1,"cu-btn","cu-conflict-management__cancel",3,"click"],t,[1,"cu-btn","cu-btn_red","cu-btn_spinner",3,"disabled","click"],[1,"cu-btn__text"],i,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],["class","cu-conflict-management__proceed",4,"ngIf"],[1,"cu-conflict-management__proceed"],[1,"cu-conflict-management__proceed-header"],n,c,[1,"cu-conflict-management__highlighted","cu-conflict-management__highlighted_red"],a,r,["class","cu-confirm-delete-custom-field-modal__row",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-confirm-delete-custom-field-modal__row",3,"ngClass"],["class","cu-confirm-delete-custom-field-modal__icon",3,"ngClass","icon",4,"ngIf"],["class","cu-confirm-delete-custom-field-modal__avatar cu-project-avatar_m",3,"image","color","iconSource","iconName","name",4,"ngIf"],[1,"cu-confirm-delete-custom-field-modal__icon",3,"ngClass","icon"],[1,"cu-confirm-delete-custom-field-modal__avatar","cu-project-avatar_m",3,"image","color","iconSource","iconName","name"],[4,"ngFor","ngForOf","ngForTrackBy"],l,u,[1,"cu-btn","cu-btn_font-size-15","cu-conflict-management__cancel",3,"click"],m,[1,"cu-btn","cu-btn_font-size-15","cu-btn_red","cu-btn_spinner",3,"disabled","click"],p]},template:function(e,t){if(1&e&&(o.cc(0,"div",0),o.Xb(1,"div",1),o.cc(2,"div",2),o.mc(3,3),o.Xb(4,"br"),o.bd(5,v,3,3,"ng-container",4),o.vc(6,"async"),o.jc(),o.bc(),o.bd(7,U,16,7,"ng-container",4),o.bd(8,R,11,4,"div",5),o.bc()),2&e){let e=null;o.Ib(5),o.Dc("ngIf",(null==(e=o.wc(6,4,t.fieldToEditUsages$))?null:e.entities.length)>=2&&t.deleteGlobal),o.Ib(1),o.kc(t.isRelationshipCf?"Relationship":"custom field"),o.hc(3),o.Ib(1),o.Dc("ngIf",t.deleteGlobal),o.Ib(1),o.Dc("ngIf",!t.deleteGlobal)}},directives:[f.q,f.p,f.o,b.a,g.a,_.a],pipes:[f.b],styles:[".cu-confirm-delete-custom-field-modal__row{display:flex;align-items:center;padding:4px 0}.cu-confirm-delete-custom-field-modal__row_first{margin-top:15px}.cu-confirm-delete-custom-field-modal__row span{text-align:left}.cu-confirm-delete-custom-field-modal__icon{width:14px;height:14px;margin-right:7px;fill:#cfd3da;stroke:#cfd3da}.cu-confirm-delete-custom-field-modal__icon_category{fill:transparent;stroke-width:2px}.cu-confirm-delete-custom-field-modal__icon_team{stroke-width:.7;width:16px}.cu-confirm-delete-custom-field-modal__icon_project{width:16px;stroke-width:0}.cu-confirm-delete-custom-field-modal__avatar{margin-left:-6px;margin-right:2px}"],encapsulation:2,changeDetection:0}),e})();var F=i("KyjD"),L=i("K0KF"),N=i("C8uC"),z=i("KsR4");let q=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},imports:[[f.c,F.a,L.a,N.LoaderModule,z.a]]}),e})()},yQlF:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("fXoL"),n=i("OU+x");let s=(()=>{class e{constructor(e){this.commentsService=e}transform(e,t=null,i=!1,o=[],n=[],s=[],c=!1){return e?this.commentsService.getCommentHTML(e,t,!0,i,!0,o,n,null,s,c):""}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(n.a))},e.\u0275pipe=o.Vb({name:"commentHTML",type:e,pure:!0}),e})()},ypaX:function(e,t,i){e.exports=i.p+"time-tracking-rollup.34acc8e81ea71c5079ae.png"},zBTC:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var o=i("kUJR"),n=i("WX5r"),s=i("K0KF"),c=i("gb9A"),a=i("ofXK"),r=i("je31"),l=i("viDW"),d=i("E5a2"),u=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[r.a,o.a,n.a,s.a,c.a,a.c,l.a,d.a]]}),e})()},zK1H:function(e,t,i){"use strict";var o=i("U6jy"),n=i("cBNe");e.exports=function(){var e,t=String(this.file),i={line:1,column:1,offset:0},c=o(i);return 65279===(t=t.replace(s,"\n")).charCodeAt(0)&&(t=t.slice(1),c.column++,c.offset++),e={type:"root",children:this.tokenizeBlock(t,c),position:{start:i,end:this.eof||o(i)}},this.options.position||n(e,!0),e};var s=/\r\n|\r/g},zY2b:function(e,t,i){"use strict";i.d(t,"a",function(){return se});var o=i("XNiG"),n=i("2Vo4"),s=i("1G5W"),c=i("gcYM"),a=i("pLZG"),r=i("Kj3r"),l=i("fXoL"),d=i("jJQC"),u=i("c3rA"),m=i("1p1I"),p=i("mMFR"),h=i("pATm"),f=i("ofXK"),b=i("EDFS"),g=i("XTWl"),_=i("UdVN");const v=function(e){return{fill:e}};function k(e,t){if(1&e&&l.Xb(0,"div",11),2&e){const e=l.uc(2);l.Ob("cu-tags-list-item__ellipsis_dark",e.isVeryDarkColor),l.Dc("icon","ellipsis")("ngStyle",l.Hc(4,v,e.textColor))}}function y(e,t){if(1&e){const e=l.dc();l.cc(0,"cu-tags-menu",9),l.qc("click",function(e){return e.stopPropagation()})("cancelDelete",function(){return l.Uc(e),l.uc().cancelDelete()})("startRename",function(){return l.Uc(e),l.uc().rename()})("colorSelected",function(t){return l.Uc(e),l.uc().colorPickerChange(t)})("saveColorChange",function(){return l.Uc(e),l.uc().handleColorToggle()})("startDelete",function(){return l.Uc(e),l.uc().openDeleteConfirmModal()}),l.bd(1,k,1,6,"div",10),l.bc()}if(2&e){const e=l.uc();l.Dc("disabled",!e.spaceAccess)("tagName",e.tag.name)("tagColor",e.color)("allSpaces",e.allSpaces)("canDelete",!e.tag.deleteRestricted)("hideDelete",e.hideDelete)("hideEdit",!e.spaceId&&e.hideEditOnAllSpaces),l.Ib(1),l.Dc("ngIf",e.spaceAccess&&!e.isGuest)}}function w(e,t){1&e&&(l.cc(0,"div",12),l.gc(1,13),l.bc())}const x=function(e){return{position:e,cursor:"pointer"}},I=function(e){return{"cu-tags-select__item-row_highlighted":e}},T=function(e,t){return{color:e,background:t}};let C=(()=>{class e extends h.a{constructor(){super(...arguments),this.showMenuOptions=!0,this.active=!1,this.onClick=new l.o,this._isActive=!1}get isActive(){return this._isActive}setActiveStyles(){this._isActive=!0,this.changeDetector.markForCheck()}setInactiveStyles(){this._isActive=!1,this.changeDetector.markForCheck()}}return e.\u0275fac=function(t){return D(t||e)},e.\u0275cmp=l.Qb({type:e,selectors:[["cu-tags-list-item"]],inputs:{showMenuOptions:"showMenuOptions",active:"active"},outputs:{onClick:"onClick"},features:[l.Fb],decls:12,vars:17,consts:function(){let e;return e=$localize`:@@errors_tag-existing␟9f1acd497ac22c7a11571db0608c3aaf0bbb215b␟1936758854694364572: Whoops! That tag already exists. `,[[3,"ngStyle"],["placement","right","container","body","triggers","",1,"cu-tags-list-item__row",3,"ngClass","popover"],["popover","bs-popover"],[1,"cu-tags-list-item__item",3,"click"],[1,"cu-tags-list-item__name",3,"ngStyle"],[3,"disabled","tagName","tagColor","allSpaces","canDelete","hideDelete","hideEdit","click","cancelDelete","startRename","colorSelected","saveColorChange","startDelete",4,"ngIf"],[1,"nav-category__editor"],["editorContainer",""],["error",""],[3,"disabled","tagName","tagColor","allSpaces","canDelete","hideDelete","hideEdit","click","cancelDelete","startRename","colorSelected","saveColorChange","startDelete"],["class","cu-tags-list-item__ellipsis",3,"cu-tags-list-item__ellipsis_dark","icon","ngStyle",4,"ngIf"],[1,"cu-tags-list-item__ellipsis",3,"icon","ngStyle"],[1,"cu-error-popover"],e]},template:function(e,t){if(1&e&&(l.cc(0,"div",0),l.cc(1,"div",1,2),l.cc(3,"div",3),l.qc("click",function(){return t.onClick.emit(t.tag)}),l.cc(4,"span",4),l.dd(5),l.bc(),l.bd(6,y,2,8,"cu-tags-menu",5),l.bc(),l.bc(),l.Xb(7,"div",6),l.Xb(8,"div",null,7),l.bc(),l.bd(10,w,2,0,"ng-template",null,8,l.cd)),2&e){const e=l.Rc(11);l.Dc("ngStyle",l.Hc(10,x,t.renaming?"relative":"")),l.Ib(1),l.Dc("ngClass",l.Hc(12,I,t.active))("popover",e),l.Ib(3),l.Ob("cu-tags-list-item__name-dark-theme",t.isDarkTheme)("cu-tags-list-item__name-is-light",t.isDarkTheme&&t.isLightColor),l.Dc("ngStyle",l.Ic(14,T,t.isDarkTheme?"#fff":t.textColor,t.isDarkTheme?t.textColor:"transparent")),l.Ib(1),l.fd(" ",t.name," "),l.Ib(1),l.Dc("ngIf",t.showMenuOptions)}},directives:[f.t,f.o,b.c,f.q,g.a,_.a],styles:['.cu-tags-list-item__row{display:flex;justify-content:space-between;max-width:250px;border-bottom:1px solid #f4f4f4;padding:0 8px}.dark-theme .cu-tags-list-item__row{border-bottom:1px solid #1e272e}.cu-tags-list-item__row .cu-tags-list-item__ellipsis{display:none}.cu-tags-list-item__row:hover{background-color:#f1f1f1}.dark-theme .cu-tags-list-item__row:hover{background:#2b343b}.cu-tags-list-item__row:hover .cu-tags-list-item__ellipsis{display:flex}.cu-tags-list-item__row_highlighted{background-color:#f1f1f1}.dark-theme .cu-tags-list-item__row_highlighted{background:#2b343b}.cu-tags-list-item__item,.cu-tags-list-item__row cu-quick-actions-menu{display:flex;align-items:center}.cu-tags-list-item__item{justify-content:space-between;border:0;padding:9px 0;flex:1 0 0;min-width:0}.cu-tags-list-item__name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1.15;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;position:relative}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-tags-list-item__name{font-family:var(--global-font-support)}}.dark-theme .cu-tags-list-item__name_color-invert{filter:invert(30%)}.cu-tags-list-item__name.cu-tags-list-item__name-dark-theme{height:20px;border-radius:2px 13px 13px 2px;margin:0;padding:2px 10px 2px 8px;white-space:nowrap;text-overflow:ellipsis;position:relative;overflow:hidden}.cu-tags-list-item__name.cu-tags-list-item__name-is-light{color:#343434!important}.cu-tags-list-item__ellipsis{width:12px;height:12px;cursor:pointer;opacity:.4;margin-right:5px;margin-left:10px}.dark-theme .cu-tags-list-item__ellipsis_dark{fill:#fff!important}'],encapsulation:2,changeDetection:0}),e})();const D=l.ec(C);var O=i("u47x"),S=i("l7P3"),E=i("Jf2N"),P=i("K/1s"),j=i("cH1L"),A=i("LdyQ"),$=i("MJvn"),U=i("n+1/"),R=i("3Pt+"),M=i("HcWw"),F=i("vxfF"),L=i("BTFG");const N=["dropdown"],z=["toggle"],q=["searchField"],G=["existing"],V=["userHeader"],B=["userBody"];function X(e,t){if(1&e){const e=l.dc();l.cc(0,"cu-tags-badge",22),l.qc("onDelete",function(t){return l.Uc(e),l.uc(2).removeTag(t)})("onOpenDeleteConfirm",function(t){return l.Uc(e),l.uc(2).openDeleteConfirm(t)})("onRename",function(t){return l.Uc(e),l.uc(2).renameTag(t)})("onColorChange",function(t){return l.Uc(e),l.uc(2).onColorChange.emit(t)})("onCancel",function(){return l.Uc(e),l.uc(2).cancel()})("onError",function(t){return l.Uc(e),l.uc(2).preventEscape=t}),l.vc(1,"async"),l.vc(2,"async"),l.bc()}if(2&e){const e=t.$implicit,i=l.uc(2);let o=null;l.Dc("tag",e)("name",e.name)("color",e.tag_bg||"#000000")("taskId",i.taskId)("spaceId",i.spaceId)("hideDelete",i.hideDelete)("viewOnly",!i.canManageTag)("hideEditOnAllSpaces",i.hideEditOnAllSpaces)("spaceAccess",i.spaceAccess)("isDarkTheme",null==(o=l.wc(1,12,i.user$))?null:o.dark_theme)("isGuest",l.wc(2,14,i.isGuest$))("useDarkThemeStyle",i.useDarkThemeStyle)}}function H(e,t){1&e&&l.Xb(0,"cu-loader")}function W(e,t){if(1&e&&(l.cc(0,"div",23),l.dd(1),l.bc()),2&e){const e=l.uc(2);l.Ib(1),l.fd(" ",e.errMsg," ")}}function K(e,t){if(1&e){const e=l.dc();l.cc(0,"cu-tags-list-item",24),l.qc("mouseenter",function(){l.Uc(e);const i=t.index;return l.uc(2).highlightTag(i)})("onOpenDeleteConfirm",function(t){return l.Uc(e),l.uc(2).openDeleteConfirm(t)})("onRename",function(t){return l.Uc(e),l.uc(2).renameTag(t)})("onColorChange",function(t){return l.Uc(e),l.uc(2).onColorChange.emit(t)})("onCancel",function(){return l.Uc(e),l.uc(2).cancel()})("onClick",function(t){return l.Uc(e),l.uc(2).createTag(t)})("renameActive",function(t){return l.Uc(e),l.uc(2).renameActive=t}),l.vc(1,"async"),l.vc(2,"async"),l.bc()}if(2&e){const e=t.$implicit,i=t.index,o=l.uc(2);let n=null;l.Dc("active",e.active)("tag",e)("hideDelete",o.hideDelete)("taskId",o.taskId)("allSpaces",o.allSpaces)("spaceId",o.spaceId)("color",e.tag_bg||"#000000")("name",e.name)("hideEditOnAllSpaces",o.hideEditOnAllSpaces)("spaceAccess",o.spaceAccess)("index",i)("isGuest",l.wc(1,14,o.isGuest$))("isDarkTheme",null==(n=l.wc(2,16,o.user$))?null:n.dark_theme)("showMenuOptions",!o.readonly&&o.showMenuOptions)}}function Q(e,t){1&e&&l.Xb(0,"cu-loader")}function Z(e,t){1&e&&(l.cc(0,"div",25),l.gc(1,26),l.bc())}function Y(e,t){1&e&&(l.cc(0,"div",25),l.dd(1," Tag already attached "),l.bc())}function J(e,t){1&e&&(l.cc(0,"div",25),l.dd(1," No results "),l.bc())}function ee(e,t){1&e&&(l.cc(0,"div",25),l.gc(1,27),l.bc())}function te(e,t){if(1&e&&l.Yb(0,28),2&e){const e=l.uc(2);l.Dc("ngTemplateOutlet",e.extraItemTemplate)}}const ie=function(e){return{display:e}};function oe(e,t){if(1&e){const e=l.dc();l.cc(0,"div",5),l.cc(1,"div",6),l.vc(2,"async"),l.cc(3,"div",7,8),l.bd(5,X,3,16,"cu-tags-badge",9),l.bc(),l.cc(6,"div",10,11),l.cc(8,"div",12),l.cc(9,"input",13,14),l.qc("ngModelChange",function(t){return l.Uc(e),l.uc().searchString=t})("ngModelChange",function(){l.Uc(e);const t=l.uc();return t.debounceSearch.next(t.searchString)})("paste",function(t){return l.Uc(e),l.uc().onPaste(t)}),l.bc(),l.bc(),l.bc(),l.bd(11,H,1,0,"cu-loader",15),l.cc(12,"cdk-virtual-scroll-viewport",16,17),l.qc("scrolledIndexChange",function(t){return l.Uc(e),l.uc().nextPage(t)}),l.bd(14,W,2,1,"div",18),l.bd(15,K,3,18,"cu-tags-list-item",19),l.bd(16,Q,1,0,"cu-loader",15),l.bd(17,Z,2,0,"div",20),l.bd(18,Y,2,0,"div",20),l.bd(19,J,2,0,"div",20),l.bd(20,ee,2,0,"div",20),l.bc(),l.bd(21,te,1,1,"ng-container",21),l.bc(),l.bc()}if(2&e){const e=l.uc();l.Ib(1),l.Ob("tag-create-disabled",l.wc(2,23,e.isGuest$)&&e.forNewTask),l.Ib(2),l.Dc("ngStyle",l.Hc(25,ie,e.taskTagsWithDeleteResctriction.length&&e.showSelected?"flex":"none")),l.Ib(2),l.Dc("ngForOf",e.taskTagsWithDeleteResctriction)("ngForTrackBy",e.trackByName),l.Ib(4),l.Dc("placeholder",e.readonly?e.searchTagsText:e.searchOrCreateNewText)("ngModel",e.searchString),l.Ib(2),l.Dc("ngIf",null==e.tagsLoadingMap?null:e.tagsLoadingMap.loading),l.Ib(1),l.ad("min-height",e.filteredTags.length*e.itemHeight>290?290:e.filteredTags.length*e.itemHeight<100?100:e.filteredTags.length*e.itemHeight,"px"),l.Ob("cu-hidden",null==e.tagsLoadingMap?null:e.tagsLoadingMap.loading),l.Dc("itemSize",e.itemHeight),l.Ib(2),l.Dc("ngIf",e.errMsg),l.Ib(1),l.Dc("cdkVirtualForOf",e.filteredTags)("cdkVirtualForTemplateCacheSize",0)("cdkVirtualForTrackBy",e.trackByName),l.Ib(1),l.Dc("ngIf",null==e.tagsLoadingMap?null:e.tagsLoadingMap.loadingMore),l.Ib(1),l.Dc("ngIf",e.searchString&&e.searchString.length&&!e.readonly&&!e.hasSearchedTag),l.Ib(1),l.Dc("ngIf",e.searchString.length&&!e.readonly&&!e.filteredTags.length&&e.hasSearchedTag),l.Ib(1),l.Dc("ngIf",e.searchString.length&&!e.filteredTags.length&&e.readonly||e.searchString.length&&!e.searchString.length&&!e.readonly&&!e.filteredTags.length),l.Ib(1),l.Dc("ngIf",!e.searchString.length&&e.tags&&!e.tags.length),l.Ib(1),l.Dc("ngIf",e.extraItemTemplate&&!(null!=e.tagsLoadingMap&&e.tagsLoadingMap.loading))}}const ne=["*"];let se=(()=>{class e{constructor(e,t,i,c,a,r,m){this.renderer=e,this.changeDetector=t,this.store=i,this.modal=c,this.injector=a,this.tagsService=r,this.dropdownIsOpen=!1,this.disabled=!1,this.modifier="",this.taskId="",this.spaceId="",this.allSpaces=!1,this.fixDirection=!1,this.readonly=!1,this.showSelected=!0,this.spaceAccess=!0,this.hideDelete=!1,this.forNewTask=!1,this.hideEditOnAllSpaces=!1,this.openConfirm=!0,this.showMenuOptions=!0,this.canManageTag=!0,this.canDelete=!0,this.useDarkThemeStyle=!1,this.forTimeTracker=!1,this.forTemplates=!1,this.onChange=new l.o,this.onDelete=new l.o,this.onDeleteFromSpace=new l.o,this.onOpenDeleteConfirm=new l.o,this.onRename=new l.o,this.onOpen=new l.o,this.onPage=new l.o,this.onClose=new l.o,this.onColorChange=new l.o,this.onDeleteConfirm=new l.o,this.highlightableTags=new l.F,this.itemHeight=35,this.searchString="",this.filteredTags=[],this.taskTagsWithDeleteResctriction=[],this.errMsg="",this.placeholder="",this.preventEscape=!1,this.destroy$=new o.a,this.user$=this.store.select(u.getUser),this.renameActive=!1,this.isGuest$=this.store.select(u.isGuestTeam),this.deleteInProgress=!1,this.trackByName=Object(d.d)("name"),this.hasSearchedTag=!1,this.offset$=new n.a(null),this.debounceSearch=new o.a,this.filterTags$=new n.a(0),this.deleteRestrictions$=new n.a(0),this.searchTagsText=$localize`:@@cu-tags-list__form-placeholder_search-tags:Search tags`,this.searchOrCreateNewText=$localize`:@@cu-tags-list__form-placeholder_search-or-create-new:Search or Create New`,this.tagsValue=[],this.taskTagsValue=[],this.dir=m.value,m.change.pipe(Object(s.a)(this.destroy$)).subscribe(e=>{this.dir=e,this.keyManager&&this.keyManager.withHorizontalOrientation(e)})}set tags(e){this.tagsValue=e||[],this.filterTags$.next(this.filterTags$.value+1)}get tags(){return this.tagsValue}set taskTags(e){this.taskTagsValue=e,this.filterTags$.next(this.filterTags$.value+1)}get taskTags(){return(this.taskTagsValue||[]).filter(e=>e.name).sort(this.tagsService.sortByTagName)}ngOnInit(){this.filterTags$.next(this.filterTags$.value+1),this.offset$.pipe(Object(c.a)(500),Object(a.a)(e=>!!e),Object(s.a)(this.destroy$)).subscribe(e=>{this.onPage.emit({last:e,search:this.searchString})}),this.filterTags$.pipe(Object(a.a)(()=>this.dropdownIsOpen),Object(s.a)(this.destroy$)).subscribe(()=>{this.filteredTags=this.getFilteredTags(),this.highlightableTags.reset(this.filteredTags)}),this.deleteRestrictions$.pipe(Object(a.a)(()=>this.dropdownIsOpen),Object(s.a)(this.destroy$)).subscribe(()=>{this.taskTagsWithDeleteResctriction=(this.taskTags||[]).map(e=>{const t=this.tags.findIndex(t=>t.name===e.name);return-1===t?Object(m.a)(e,this.userId,this.canDelete,this.onlyDeleteIfOwner):this.tags[t]})}),this.debounceSearch.pipe(Object(r.a)(500),Object(s.a)(this.destroy$)).subscribe(()=>{this.filteredTags=this.getFilteredTags(),this.highlightableTags.reset(this.filteredTags),this.changeDetector.markForCheck(),this.search()})}ngOnChanges(e){(e.taskTags||e.tags)&&(this.filterTags$.next(this.filterTags$.value+1),this.deleteRestrictions$.next(this.deleteRestrictions$.value+1),setTimeout(()=>{this.userBody&&this.userBody.checkViewportSize()},50))}ngAfterViewInit(){this.keyManager=new O.b(this.highlightableTags).withWrap().withHorizontalOrientation(this.dir).withTypeAhead(),this.dropdown.dropdownOpen.pipe(Object(s.a)(this.destroy$)).subscribe(()=>{this.onOpen.emit(),this.filteredTags=this.getFilteredTags(),this.highlightableTags.reset(this.filteredTags),this.deleteRestrictions$.next(this.deleteRestrictions$.value+1),this.changeDetector.detectChanges(),this.focusSearchField(),this.keyDownListener=this.renderer.listen("document","keydown",e=>{const t=this.searchString.trim(),i="Tab"===e.key&&e.shiftKey;if("Tab"===e.key)e.preventDefault(),e.stopPropagation(),i?this.keyManager.activeItemIndex>0&&this.keyManager.updateActiveItem(this.keyManager.activeItemIndex-1):this.keyManager.activeItemIndex<this.filteredTags.length-1&&this.keyManager.updateActiveItem(this.keyManager.activeItemIndex+1);else switch(e.key){case"ArrowUp":case"ArrowDown":this.keyManager.onKeydown(e);break;case",":this.searchString.length>0&&"/"!==this.searchString.substr(this.searchString.length-1)?this.commaTagControl(e):0===this.searchString.length?(e.preventDefault(),e.stopPropagation()):this.searchString.length>0&&"/"===this.searchString.substr(this.searchString.length-1)&&(this.searchString=this.searchString.substring(0,this.searchString.length-1));break;case"Enter":if(!t.length&&!this.keyManager.activeItem)return void(this.errMsg="Whoops!  Tag name required");let i;i=this.keyManager.activeItem?this.keyManager.activeItem.tag:this.tagsValue.find(e=>e.name.toLowerCase().trim()===t.toLowerCase()),i?-1!==this.taskTags.findIndex(e=>e.name.trim()===i.name.trim())?this.errMsg=$localize`:@@cu-tags-list__error-msg_tag-already-added:Whoops!  This tag has already been added.`:(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex<=0?this.keyManager.activeItemIndex:this.keyManager.activeItemIndex-1),this.createTag(i)):(this.createTag(null,t),this.keyManager.updateActiveItem(null));break;case"Escape":this.searchString.length?(this.searchString="",this.debounceSearch.next(this.searchString),this.filteredTags=this.getFilteredTags(),this.highlightableTags.reset(this.filteredTags)):this.preventEscape||this.closeDropdown();break;default:this.errMsg=""}this.filteredTags[this.keyManager.activeItemIndex]&&!this.renameActive&&this.userBody.scrollToIndex(this.keyManager.activeItemIndex),this.changeDetector.markForCheck()})}),this.dropdown.dropdownClose.pipe(Object(s.a)(this.destroy$)).subscribe(()=>{this.changeDetector.detectChanges(),this.onClose.emit(this.deleteInProgress),this.searchString="",this.keyManager.setActiveItem(null),this.keyDownListener&&(this.keyDownListener(),this.keyDownListener=null)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}search(){this.onPage.emit({search:this.searchString})}nextPage(e){if(!this.filteredTags.length)return;const t=this.userBody.getRenderedRange().end;this.userBody.getDataLength()-t<10&&this.offset$.next(this.filteredTags[this.filteredTags.length-1].name)}openDeleteConfirm(e){if(this.forTimeTracker)this.onDeleteConfirm.emit(e.tag);else if(this.openConfirm){this.deleteInProgress=!0,this.closeDropdown();const t=this.modal.openComponent(p.a,this.injector,{name:""});t.instance.tagName=e.tag.name,t.instance.allSpaces=this.allSpaces,t.instance.forTimeTracker=this.forTimeTracker,t.instance.forTemplates=this.forTemplates,t.instance.onConfirm.pipe(Object(s.a)(t.instance.destroy$)).subscribe(()=>{this.deleteInProgress=!1,this.deleteTag(e.tag)}),t.instance.onCancel.pipe(Object(s.a)(t.instance.destroy$)).subscribe(()=>{this.deleteInProgress=!1,this.cancel()})}else this.onOpenDeleteConfirm.emit(e.tag)}closeDropdown(){this.keyManager.updateActiveItem(null),this.dropdown.close()}getColor(){return Object(m.b)(this.tagsValue)}createTag(e,t){if(this.readonly&&!e)return;let i=!1;const o=t?t.trim():this.searchString.trim();if(!e){if(o.length>100)return void(this.errMsg=$localize`:@@cu-tags-list__error-msg_tag-char-limit:Whoops!  Tags can't be longer than 100 characters`);if(!o.length)return void(this.errMsg="Whoops!  Tag name required");const t=this.getColor();e={name:o.toLowerCase(),tag_fg:t||"#000000",tag_bg:t||"#000000"},i=!0,this.searchString="",this.debounceSearch.next(this.searchString)}setTimeout(()=>{this.onChange.emit(i?Object.assign({},e,{new:!0}):e),this.filteredTags=this.getFilteredTags(),this.highlightableTags.reset(this.filteredTags)})}removeTag(e){this.onDelete.emit(e)}deleteTag(e){this.onDeleteFromSpace.emit(e),setTimeout(()=>{this.dropdown.open()},100)}renameTag(e){this.onRename.emit(e)}cancel(){setTimeout(()=>{this.dropdown.open()},100)}getFilteredTags(){let e=[];if(!this.tagsValue)return[];this.taskTags||(this.taskTags=[]);const t=e=>Object.assign(Object.assign({},e),{active:!1,setActiveStyles:function(){this.active=!0},setInactiveStyles:function(){this.active=!1}}),i=(this.searchString||"").toLowerCase().trim();if(this.hasSearchedTag=this.taskTags.findIndex(e=>e.name.toLowerCase().trim()===i)>-1,!i.length){const i=this.taskTags.slice().filter(e=>e.name).map(e=>e.name);return e=this.tagsValue.slice().filter(e=>e.name&&-1===i.indexOf(e.name)),e.map(t)}return e=(this.tagsValue||[]).slice().filter(e=>-1!==e.name.toLowerCase().indexOf(i)&&!this.taskTags.find(t=>t.name.toLowerCase().trim()===e.name.toLowerCase().trim())),e.sort((e,t)=>e.name.toLowerCase().indexOf(i)-t.name.toLowerCase().indexOf(i)),this.keyManager.setActiveItem(null),e.map(t)}highlightTag(e){this.keyManager.updateActiveItem(e)}open(){this.dropdown.open(),this.focusSearchField()}focusSearchField(){this.searchField&&this.searchField.nativeElement&&this.searchField.nativeElement.focus()}onPaste(e){e.preventDefault(),e.stopPropagation();const t=(e.clipboardData||window.clipboardData).getData("text");if(t){const e=t.split(",");if(e&&e.length)if(1===e.length&&","!==t.substr(t.length-1))this.searchString=t,this.debounceSearch.next(t);else if(1===e.length&&","===t.substr(t.length-1))this.eventToTag(t.substr(0,t.length-1).replace(/\/,/g,","));else{const e=this.splitOnNonEscapedDelimiter(t,",");e.forEach((i,o)=>{o===e.length-1?"/,"!==t.substr(t.length-2)&&","===t.substr(t.length-1)?this.eventToTag(i.replace(/\/,/g,",")):(this.searchString=i.replace(/\/,/g,","),"/"===this.searchString.substr(this.searchString.length-1)&&","===t.substr(t.length-1)&&(this.searchString=this.searchString.substring(0,this.searchString.length-1)+","),this.debounceSearch.next(this.searchString)):this.eventToTag(i.replace(/\/,/g,","))})}}}commaTagControl(e){e.preventDefault(),e.stopPropagation();const t=this.filteredTags.find(e=>e.name.toLowerCase()===this.searchString.toLowerCase());-1!==this.taskTags.findIndex(e=>e.name.trim()===(t?t.name:this.searchString.toLowerCase()).trim())?this.errMsg=$localize`:@@cu-tags-list__error-msg_tag-already-added:Whoops!  This tag has already been added.`:t?this.createTag(t):this.createTag(),this.searchString="",this.debounceSearch.next("")}eventToTag(e){const t=this.filteredTags.find(t=>t.name.toLowerCase().trim()===e.toLowerCase().trim())||this.tagsValue.find(t=>t.name.toLowerCase().trim()===e.toLowerCase().trim());t?-1!==this.taskTags.findIndex(e=>e.name.trim()===t.name.trim())?this.errMsg=$localize`:@@cu-tags-list__error-msg_tag-already-added:Whoops!  This tag has already been added.`:(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex<=0?this.keyManager.activeItemIndex:this.keyManager.activeItemIndex-1),this.createTag(t)):(this.createTag(null,e),this.keyManager.updateActiveItem(null))}splitOnNonEscapedDelimiter(e,t){const i=new RegExp(String.raw`[^${t}]*?(?:\/${t}[^${t}]*?)*(?:${t}|$)`,"g"),o=new RegExp(String.raw`([^\/].|.[^\/]|^.?)${t}$`);return e.match(i).slice(0,-1).map(e=>e.replace(o,"$1"))}}return e.\u0275fac=function(t){return new(t||e)(l.Wb(l.H),l.Wb(l.h),l.Wb(S.Store),l.Wb(E.a),l.Wb(l.t),l.Wb(P.a),l.Wb(j.b))},e.\u0275cmp=l.Qb({type:e,selectors:[["cu-tags-list"]],viewQuery:function(e,t){if(1&e&&(l.jd(N,3),l.jd(z,3),l.jd(q,1),l.jd(G,1),l.jd(V,1),l.jd(B,1),l.jd(C,1)),2&e){let e;l.Qc(e=l.rc())&&(t.dropdown=e.first),l.Qc(e=l.rc())&&(t.toggle=e.first),l.Qc(e=l.rc())&&(t.searchField=e.first),l.Qc(e=l.rc())&&(t.existing=e.first),l.Qc(e=l.rc())&&(t.userHeader=e.first),l.Qc(e=l.rc())&&(t.userBody=e.first),l.Qc(e=l.rc())&&(t.tagListItems=e)}},hostAttrs:[1,"cu2-tags-list"],inputs:{tags:"tags",taskTags:"taskTags",disabled:["dropdown-disabled","disabled"],modifier:"modifier",taskId:"taskId",spaceId:"spaceId",allSpaces:"allSpaces",fixDirection:"fixDirection",readonly:"readonly",showSelected:"showSelected",spaceAccess:"spaceAccess",hideDelete:"hideDelete",forNewTask:"forNewTask",hideEditOnAllSpaces:"hideEditOnAllSpaces",openConfirm:"openConfirm",showMenuOptions:"showMenuOptions",canManageTag:"canManageTag",tagsLoadingMap:"tagsLoadingMap",extraItemTemplate:"extraItemTemplate",userId:"userId",onlyDeleteIfOwner:"onlyDeleteIfOwner",canDelete:"canDelete",useDarkThemeStyle:"useDarkThemeStyle",forTimeTracker:"forTimeTracker",forTemplates:"forTemplates"},outputs:{onChange:"onChange",onDelete:"onDelete",onDeleteFromSpace:"onDeleteFromSpace",onOpenDeleteConfirm:"onOpenDeleteConfirm",onRename:"onRename",onOpen:"onOpen",onPage:"onPage",onClose:"onClose",onColorChange:"onColorChange",onDeleteConfirm:"onDeleteConfirm"},features:[l.Gb],ngContentSelectors:ne,decls:6,vars:4,consts:function(){let e,t;return e=$localize`:@@cu-tags-list__create-tag-instruction␟f452058631dd7fe4f92f78e0de9b3c67787ce4ba␟2052838072721407196: Press Enter or comma to create a new tag `,t=$localize`:@@cu-tags-list__no-tags␟01da505c980afc9a6069e8b022c8ef6b16a8135c␟6648324107334853843: No tags created `,[["cuDropdown","",1,"cu-dropdown",3,"dropdownDisabled","dropdownCloseOnInsideClick","ngClass","dropdownRepositionFlag","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["toggle",""],["class","cu-dropdown__menu cu-dropdown__menu_left",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_left"],[1,"user-list","cu-tags-select"],[1,"cu-tags-select__existing",3,"ngStyle"],["existing",""],[3,"tag","name","color","taskId","spaceId","hideDelete","viewOnly","hideEditOnAllSpaces","spaceAccess","isDarkTheme","isGuest","useDarkThemeStyle","onDelete","onOpenDeleteConfirm","onRename","onColorChange","onCancel","onError",4,"ngFor","ngForOf","ngForTrackBy"],[1,"user-list__header"],["userHeader",""],[1,"cu-search"],["type","text","cuAutoFocus","",1,"cu-search__input",3,"placeholder","ngModel","ngModelChange","paste"],["searchField",""],[4,"ngIf"],[1,"user-list__body",3,"itemSize","scrolledIndexChange"],["userBody",""],["class","cu-tags-select__error",4,"ngIf"],[3,"active","tag","hideDelete","taskId","allSpaces","spaceId","color","name","hideEditOnAllSpaces","spaceAccess","index","isGuest","isDarkTheme","showMenuOptions","mouseenter","onOpenDeleteConfirm","onRename","onColorChange","onCancel","onClick","renameActive",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize","cdkVirtualForTrackBy"],["class","user-list-item user-list-item__nomatch",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"tag","name","color","taskId","spaceId","hideDelete","viewOnly","hideEditOnAllSpaces","spaceAccess","isDarkTheme","isGuest","useDarkThemeStyle","onDelete","onOpenDeleteConfirm","onRename","onColorChange","onCancel","onError"],[1,"cu-tags-select__error"],[3,"active","tag","hideDelete","taskId","allSpaces","spaceId","color","name","hideEditOnAllSpaces","spaceAccess","index","isGuest","isDarkTheme","showMenuOptions","mouseenter","onOpenDeleteConfirm","onRename","onColorChange","onCancel","onClick","renameActive"],[1,"user-list-item","user-list-item__nomatch"],e,t,[3,"ngTemplateOutlet"]]},template:function(e,t){1&e&&(l.Cc(),l.cc(0,"div",0,1),l.qc("dropdownOpen",function(){return t.dropdownIsOpen=!0})("dropdownClose",function(){return t.dropdownIsOpen=!1}),l.cc(2,"div",2,3),l.Bc(4),l.bc(),l.bd(5,oe,22,27,"div",4),l.bc()),2&e&&l.Dc("dropdownDisabled",t.disabled)("dropdownCloseOnInsideClick",!1)("ngClass",t.modifier)("dropdownRepositionFlag",t.filteredTags)},directives:[A.b,f.o,$.a,U.a,f.t,f.p,R.c,M.a,R.p,R.s,f.q,F.c,F.a,F.b,h.a,L.a,C,f.x],pipes:[f.b],styles:[".cu2-tags-list{min-width:0}"],encapsulation:2,changeDetection:0}),e})()},zkEv:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("ofXK"),n=i("K0KF"),s=i("tyNb"),c=i("gb9A"),a=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,s.l,c.a]]}),e})()}}]);