(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"+z9/":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(t){return t.Team="team",t.Project="project",t.Category="category",t.Subcategory="subcategory",t.Task="task",t.Subtask="subtask",t.LoadMore="LoadMore",t.Loading="loading",t.Adding="adding",t.Custom="custom",t.CustomEmptyRoot="customEmptyRoot",t}({})},"02gd":function(t,e,i){"use strict";i.d(e,"a",function(){return L});var n=i("dTHz"),o=i("GkwO"),a=i("fXoL"),r=i("l7P3"),s=i("8it8"),c=i("LdyQ"),l=i("NsZK"),u=i("MJvn"),d=i("LEq2"),h=i("ofXK");function p(t,e){1&t&&(a.cc(0,"span"),a.gc(1,1),a.bc())}function f(t,e){1&t&&(a.cc(0,"span"),a.gc(1,2),a.bc())}function g(t,e){1&t&&(a.cc(0,"span"),a.gc(1,3),a.bc())}function m(t,e){1&t&&(a.cc(0,"span"),a.gc(1,4),a.bc())}let v=(()=>{class t{constructor(t){this.store=t,this.view$=this.store.select(d.Y),this.viewPreferences$=this.store.select(d.bb)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.Store))},t.\u0275cmp=a.Qb({type:t,selectors:[["cu-calendar-view-label"]],decls:10,vars:16,consts:function(){let t,e,i,n;return t=$localize`:@@common_time-unit--day␟efffb64bda94fa4f4493322c5e3717e845d5dc30␟1286983255645370171:Day`,e=$localize`:@@common__four-days␟44164b039283360ffd4544fac15c686594e581c7␟2075885427982085518:4 days`,i=$localize`:@@common_time-unit--week␟73339760fe932d2b494728d4366947755d127e00␟5141352019990967744:Week`,n=$localize`:@@common_time-unit--month␟5bb4a09a669f55893c9a37a8480c8fa3f7ce5702␟5403684285319082289:Month`,[[4,"ngIf"],t,e,i,n]},template:function(t,e){1&t&&(a.bd(0,p,2,0,"span",0),a.vc(1,"async"),a.bd(2,f,2,0,"span",0),a.vc(3,"async"),a.vc(4,"async"),a.bd(5,g,2,0,"span",0),a.vc(6,"async"),a.vc(7,"async"),a.bd(8,m,2,0,"span",0),a.vc(9,"async")),2&t&&(a.Dc("ngIf","day"===a.wc(1,4,e.view$)),a.Ib(2),a.Dc("ngIf","week"===a.wc(3,6,e.view$)&&a.wc(4,8,e.viewPreferences$).fourDayWeekView),a.Ib(3),a.Dc("ngIf","week"===a.wc(6,10,e.view$)&&!a.wc(7,12,e.viewPreferences$).fourDayWeekView),a.Ib(3),a.Dc("ngIf","month"===a.wc(9,14,e.view$)))},directives:[h.q],pipes:[h.b],encapsulation:2,changeDetection:0}),t})();var b=i("UdVN"),_=i("n+1/"),w=i("A/Rp"),y=i("c3rA"),k=i("9gfC"),x=i("pxPQ");function S(t,e){1&t&&(a.cc(0,"div",6),a.dd(1,"D"),a.bc())}function T(t,e){1&t&&(a.cc(0,"div",6),a.dd(1,"4"),a.bc())}function C(t,e){1&t&&(a.cc(0,"div",6),a.dd(1,"W"),a.bc())}function D(t,e){1&t&&(a.cc(0,"div",6),a.dd(1,"M"),a.bc())}const I=function(t){return{id:"day",title:t}},P=function(t){return{id:"four-days",title:t}},M=function(t){return{id:"week",title:t}},O=function(t){return{id:"month",title:t}};let $=(()=>{class t{constructor(t){this.store=t,this.team$=this.store.select(y.getTeam),this.dayText=$localize`:@@common_time-unit--day:Day`,this.fourDaysText=$localize`:@@common__four-days:4 days`,this.monthText=$localize`:@@common_time-unit--month:Month`,this.weekText=$localize`:@@common_time-unit--week:Week`}ngOnInit(){}changeView(t,e=!1){this.store.dispatch(new w.tb({view:t,fourDayWeekView:e,saveUser:!1}))}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.Store))},t.\u0275cmp=a.Qb({type:t,selectors:[["cu-calendar-view-menu"]],hostAttrs:[1,"cu-calendar-view-menu"],decls:13,vars:16,consts:function(){let t;return t=$localize`:@@common_time-period␟03ad0abc257bb4c513577f05fe09ebeb3c0072ac␟3683695841132003417:Time period`,[["title",t],[3,"item","endRowTemplate","click"],["hotKeyDay",""],["hotKeyForDays",""],["hotKeyWeek",""],["hotKeyMonth",""],[1,"cu-calendar-view-menu__hotkey"]]},template:function(t,e){if(1&t&&(a.Xb(0,"cu-dropdown-list-title",0),a.cc(1,"cu-dropdown-list-item",1),a.qc("click",function(){return e.changeView("day")}),a.bc(),a.cc(2,"cu-dropdown-list-item",1),a.qc("click",function(){return e.changeView("week",!0)}),a.bc(),a.cc(3,"cu-dropdown-list-item",1),a.qc("click",function(){return e.changeView("week")}),a.bc(),a.cc(4,"cu-dropdown-list-item",1),a.qc("click",function(){return e.changeView("month")}),a.bc(),a.bd(5,S,2,0,"ng-template",null,2,a.cd),a.bd(7,T,2,0,"ng-template",null,3,a.cd),a.bd(9,C,2,0,"ng-template",null,4,a.cd),a.bd(11,D,2,0,"ng-template",null,5,a.cd)),2&t){const t=a.Rc(6),i=a.Rc(8),n=a.Rc(10),o=a.Rc(12);a.Ib(1),a.Dc("item",a.Hc(8,I,e.dayText))("endRowTemplate",t),a.Ib(1),a.Dc("item",a.Hc(10,P,e.fourDaysText))("endRowTemplate",i),a.Ib(1),a.Dc("item",a.Hc(12,M,e.weekText))("endRowTemplate",n),a.Ib(1),a.Dc("item",a.Hc(14,O,e.monthText))("endRowTemplate",o)}},directives:[k.a,x.a],styles:[".cu-calendar-view-menu{display:block;width:200px}.cu-calendar-view-menu__hotkey{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:4px;font:600 11px/15px Gotham Pro,Proxima Nova,arial,serif;background:#e9ebf0;color:#8d95a5}.dark-theme .cu-calendar-view-menu__hotkey{background:#1e272e}"],encapsulation:2,changeDetection:0}),t})();function j(t,e){1&t&&(a.cc(0,"div",5),a.Xb(1,"cu-calendar-view-menu"),a.bc())}let L=(()=>{class t{constructor(t,e){this.store=t,this.commonStringsService=e,this.dataView$=this.store.select(o.qb),this.LayoutVersion=n.b}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.Store),a.Wb(s.a))},t.\u0275cmp=a.Qb({type:t,selectors:[["cu-calendar-period"]],hostAttrs:[1,"cu-calendar-period"],inputs:{layoutVersion:"layoutVersion"},decls:7,vars:7,consts:[["cuDropdown","",1,"cu-calendar-period__selector",3,"dropdownDisabled","cuTooltip"],["cuDropdownToggle","",1,"cu-calendar-period__selector-toggle"],[1,"cu-calendar-period__selector-label"],[1,"cu-calendar-period__selector-arrow",3,"icon"],["class","cu-dropdown__menu cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_overflow-hidden"]],template:function(t,e){if(1&t&&(a.cc(0,"div",0),a.vc(1,"async"),a.vc(2,"async"),a.cc(3,"div",1),a.Xb(4,"cu-calendar-view-label",2),a.Xb(5,"div",3),a.bc(),a.bd(6,j,2,0,"div",4),a.bc()),2&t){let t=null,i=null;a.Dc("dropdownDisabled",null==(t=a.wc(1,3,e.dataView$))?null:t.locked)("cuTooltip",null!=(i=a.wc(2,5,e.dataView$))&&i.locked?e.commonStringsService.unprotectThisViewChangesText:""),a.Ib(5),a.Dc("icon",e.layoutVersion===e.LayoutVersion.Six?"cu2-caret-down":"angle-right-no-padding")}},directives:[c.b,l.a,u.a,v,b.a,_.a,$],pipes:[h.b],styles:['.cu-calendar-period{display:inline-flex;align-items:center;margin-right:15px}.cu2-views-bar_v6 .cu-calendar-period{margin-right:4px}.cu-calendar-period__selector{height:100%}.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:#abaeb0}.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:#abaeb0}.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{transform:rotate(270deg)}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{transform:rotate(180deg)}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-toggle:before,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-toggle:before{opacity:1}.cu-calendar-period__selector-toggle{display:flex;align-items:center;height:100%;padding:3px 4px}.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:var(--theme-main-color)}}.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle{position:relative;padding:0 6px;border-radius:6px;height:24px;overflow:hidden}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:#abaeb0}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:#abaeb0}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover:before{opacity:1}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:before{background-color:#1e272e}.cu-calendar-period__selector-arrow{position:relative;transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);margin-left:7px;width:9px;height:9px;transform:rotate(90deg);fill:#7c828d}.dark-theme .cu-calendar-period__selector-arrow{fill:#d5d6d7}.cu2-views-bar_v6 .cu-calendar-period__selector-arrow{margin-left:3px;transform:rotate(0deg);fill:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-arrow{fill:#abaeb0}.cu-calendar-period__selector-label{position:relative}.cu-calendar-period__selector-label span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:block;color:#7c828d;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-calendar-period__selector-label span{color:#d5d6d7}.cu2-views-bar_v6 .cu-calendar-period__selector-label span{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:0;color:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-label span{color:#abaeb0}'],encapsulation:2,changeDetection:0}),t})()},"1rLx":function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o});var n=function(t){return t.Default="default",t.Priority="priority",t.Status="status",t}({});function o(t,e){switch(e){case n.Priority:return t.priority?t.priority.color:"#fff";case n.Status:return t.status.color;default:return e}}},"2TnG":function(t,e,i){"use strict";i.d(e,"b",function(){return vt}),i.d(e,"a",function(){return bt});var n=i("fXoL"),o=i("b3AA"),a=i("Muja"),r=i("Bw5p"),s=i("XNiG"),c=i("2Vo4"),l=i("itXk"),u=i("Cfvw"),d=i("eIep"),h=i("UXun"),p=i("/uUt"),f=i("lJxs"),g=i("Kj3r"),m=i("1G5W"),v=i("pLZG"),b=i("IzEk"),_=i("feEP"),w=i("JXFF"),y=i("Yyou"),k=i("+z9/");class x{constructor(t,e){this._size=150,this._buttonSize=24,this._alignment=o.Spot.BottomRight,this._alignmentFocus=o.Spot.BottomRight,this._orientation="vertical",this._opacity=.75,this._diagram=t,this._initialScale=t.scale,this._diagramDiv=t.div,this._sliderDiv=null,void 0!==e&&(void 0!==e.size&&(this._size=e.size),void 0!==e.buttonSize&&(this._buttonSize=e.buttonSize),void 0!==e.alignment&&(this._alignment=e.alignment),void 0!==e.alignmentFocus&&(this._alignmentFocus=e.alignmentFocus),void 0!==e.orientation&&(this._orientation=e.orientation),void 0!==e.opacity&&(this._opacity=e.opacity));const i=this;this.updateOnViewportBoundsChanged=t=>{i.scaleToValue()},this.init()}get diagram(){return this._diagram}get size(){return this._size}set size(t){this._size!==t&&(this._size=t,this.resize())}get buttonSize(){return this._buttonSize}set buttonSize(t){this._buttonSize!==t&&(this._buttonSize=t,this.resize())}get alignment(){return this._alignment}set alignment(t){this._alignment!==t&&(this._alignment=t,this.realign())}get alignmentFocus(){return this._alignmentFocus}set alignmentFocus(t){this._alignmentFocus!==t&&(this._alignmentFocus=t,this.realign())}get orientation(){return this._orientation}set orientation(t){if("horizontal"!==t&&"vertical"!==t)throw new Error('Orientation must be "horizontal" or "vertical"');this._orientation!==t&&(this._orientation=t,this.resize(!0))}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=t,null!==this._sliderDiv&&(this._sliderDiv.style.opacity=t.toString()))}remove(){this.diagram.removeDiagramListener("ViewportBoundsChanged",this.updateOnViewportBoundsChanged),null!==this._sliderDiv&&(this._sliderDiv.innerHTML="",this._sliderDiv.parentElement&&this._sliderDiv.parentElement.removeChild(this._sliderDiv),this._sliderDiv=null)}init(){this.sliderDivSetup(),this.resize(!0),this.sliderListenerSetup()}sliderDivSetup(){this._sliderDiv=document.createElement("div"),this._sliderDiv.className="zoomSlider";const t=document.createElement("button");t.id="zoomSliderOut",t.className="zoomButton",t.innerHTML='<svg width="10" height="2" xmlns="http://www.w3.org/2000/svg"><path d="M0 1a1 1 0 011-1h8a1 1 0 010 2H1a1 1 0 01-1-1z"/></svg>',this._sliderDiv.appendChild(t);const e=document.createElement("div");e.id="zoomSliderRangeCtn",e.className="zoomRangeContainer",this._sliderDiv.appendChild(e);const i=document.createElement("input");i.id="zoomSliderRange",i.className="zoomRangeInput",i.type="range",i.min="-50";const n=Math.log(3/this._initialScale)/Math.log(this._diagram.commandHandler.zoomFactor);i.max=String(Math.max(n,10)),e.appendChild(i);const o=document.createElement("button");if(o.id="zoomSliderIn",o.className="zoomButton",o.innerHTML='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 0a1 1 0 00-1 1v3H1a1 1 0 000 2h3v3a1 1 0 102 0V6h3a1 1 0 100-2H6V1a1 1 0 00-1-1z"/></svg>',this._sliderDiv.appendChild(o),null!==this._diagramDiv){const t=this._diagramDiv.parentElement;null!==t&&t.appendChild(this._sliderDiv)}}sliderListenerSetup(){const t=document.getElementById("zoomSliderOut"),e=document.getElementById("zoomSliderIn"),i=document.getElementById("zoomSliderRange");if(null===t||null===e||null===i)return;this.diagram.addDiagramListener("ViewportBoundsChanged",this.updateOnViewportBoundsChanged);const n=this;t.onclick=function(){i.stepDown(),n.valueToScale()},e.onclick=function(){i.stepUp(),n.valueToScale()};const o=function(){n.valueToScale()};i.oninput=o,i.onchange=o}resize(t){let e=0,i=0;const n=document.getElementById("zoomSliderOut"),o=document.getElementById("zoomSliderIn"),a=document.getElementById("zoomSliderRangeCtn"),r=document.getElementById("zoomSliderRange");if(null!==this._sliderDiv&&null!==n&&null!==o&&null!==a&&null!==r){if("horizontal"===this.orientation){e=this.size,i=this.buttonSize;const t=e-2*i;n.style.width=i+"px",n.style.height=i+"px",a.style.width=t+"px",a.style.height=i+"px",r.style.width=t+"px",r.style.height=i+"px",r.style.transformOrigin="",o.style.width=i+"px",o.style.height=i+"px"}else{i=this.size,e=this.buttonSize;const t=i-2*e;o.style.width=e+"px",o.style.height=e+"px",a.style.width=e+"px",a.style.height=t+"px",r.style.width=t+"px",r.style.height=e+"px",r.style.transformOrigin=t/2+"px "+t/2+"px",n.style.width=e+"px",n.style.height=e+"px"}this._sliderDiv.style.width=e+"px",this._sliderDiv.style.height=i+"px",t&&this.reorient(),this.realign()}}reorient(){const t=document.getElementById("zoomSliderOut"),e=document.getElementById("zoomSliderIn"),i=document.getElementById("zoomSliderRange");null!==this._sliderDiv&&null!==t&&null!==e&&null!==i&&("horizontal"===this.orientation?(i.style.transform="",this._sliderDiv.insertBefore(t,this._sliderDiv.firstChild),this._sliderDiv.appendChild(e)):(i.style.transform="rotate(-90deg)",this._sliderDiv.insertBefore(e,this._sliderDiv.firstChild),this._sliderDiv.appendChild(t)))}realign(){if(null===this._diagramDiv||null===this._sliderDiv)return;let t=0,e=0;"horizontal"===this.orientation?(t=this.size,e=this.buttonSize):(e=this.size,t=this.buttonSize);const i=this._diagramDiv.parentElement;this._diagramDiv.getBoundingClientRect(),null!==i&&i.getBoundingClientRect()}scaleToValue(){const t=document.getElementById("zoomSliderRange"),e=this.diagram,i=e.commandHandler.zoomFactor;t.value=Math.round(Math.log(e.scale/this._initialScale)/Math.log(i)).toString()}valueToScale(){const t=document.getElementById("zoomSliderRange"),e=this.diagram,i=parseFloat(t.value);e.scale=this._initialScale*Math.pow(e.commandHandler.zoomFactor,i)}}var S=i("/qOb"),T=i("vk5f"),C=i("5b//"),D=i("uslN"),I=i("CgHv"),P=i("c3rA"),M=i("o7Ov"),O=i("l7P3"),$=i("LLqd"),j=i("Jf2N"),L=i("76Cs"),E=i("cCXi"),N=i("PSyB"),A=i("yLbY"),V=i("TuBq"),z=i("3Pt+"),F=i("ofXK"),B=i("LdyQ"),R=i("n+1/"),U=i("MJvn"),G=i("aIzb"),H=i("b+fk"),W=i("a2y0"),q=i("BTFG"),X=i("xDGP"),Y=i("UdVN");const K=["container"],Z=["diagram"],J=["tooltip"],Q=["editor"],tt=["input"],et=["taskSelectorDropdown"],it=["createTaskDropdown"],nt=["colorDropdown"],ot=["paywallTemplate"],at=["headerTemplate"];function rt(t,e){if(1&t&&(n.cc(0,"div",24),n.cc(1,"div",25),n.cc(2,"div",26),n.Xb(3,"img",27),n.bc(),n.cc(4,"div",28),n.gc(5,29),n.bc(),n.bc(),n.bc()),2&t){const t=n.uc();n.Ib(3),n.Dc("src",t.noFilterResultsImg,n.Xc)}}function st(t,e){if(1&t){const t=n.dc();n.cc(0,"cu-task-selector",30,31),n.qc("onSelect",function(e){return n.Uc(t),n.uc().selectTask(e.task)})("onLoad",function(){return n.Uc(t),n.uc().setListPosition()}),n.bc()}2&t&&n.Dc("modifier","task-selector_task-mentions")("excludeCurrentTask",!1)("excludeParentTask",!1)("showSearch",!0)("showSubtasks",!1)("searchSubtasks",!0)}function ct(t,e){}function lt(t,e){if(1&t&&(n.cc(0,"div",32),n.bd(1,ct,0,0,"ng-template",33),n.bc()),2&t){n.uc();const t=n.Rc(30);n.Ib(1),n.Dc("ngTemplateOutlet",t)}}function ut(t,e){if(1&t){const t=n.dc();n.cc(0,"div"),n.cc(1,"cu-color-picker-panel",34),n.qc("selectedColorChange",function(e){return n.Uc(t),n.uc().debounceColorSelected$.next(e)})("closePicker",function(){return n.Uc(t),n.uc(),n.Rc(26).close()})("customToggled",function(){return n.Uc(t),n.uc(),n.Rc(26).positionMenu()}),n.bc(),n.bc()}if(2&t){const t=n.uc();n.ad("width",255,"px"),n.Ib(1),n.Dc("onlyPickFromPresets",!1)("showClose",!0)("presetColors",t.presetColors)("selectedColor",null==t.dropdownNode?null:t.dropdownNode.brush)}}function dt(t,e){1&t&&n.Xb(0,"cu-loader")}function ht(t,e){if(1&t){const t=n.dc();n.cc(0,"cu-quick-create-task-panel",35),n.qc("taskCreate",function(e){return n.Uc(t),n.uc().taskCreated(e)})("onBeforeCreate",function(){return n.Uc(t),n.uc().taskCreating=!0}),n.bc(),n.bd(1,dt,1,0,"cu-loader",36)}if(2&t){const t=n.uc();n.Dc("isRow",!0)("isAlwaysActive",!0)("autoClose",!0)("isHidden",t.taskCreating)("margin",!1)("saveOnDestroy",!1)("hideDirectionSelector",!0)("dontCancel",!0)("defaultData",t.createTaskData)("alwaysDisplayLocation",!0)("buttonText","Create")("showTags",!1)("showStartDate",!1)("showDueDate",!0),n.Ib(1),n.Dc("ngIf",t.taskCreating)}}function pt(t,e){if(1&t){const t=n.dc();n.cc(0,"cu-paywall-modal",37),n.qc("trialClick",function(){return n.Uc(t),n.uc().startTrial()}),n.vc(1,"async"),n.bc()}if(2&t){const t=n.uc();n.Dc("featureTitle",t.mindMapsPaywallData.title)("boldDescription",t.mindMapsPaywallData.boldDescription)("description",t.mindMapsPaywallData.description)("features",t.mindMapsPaywallData.features)("image",t.mindMapsPaywallData.image)("plan",t.mindMapsPaywallData.plan)("team",n.wc(1,7,t.team$))}}function ft(t,e){if(1&t){const t=n.dc();n.cc(0,"div",39),n.qc("click",function(){return n.Uc(t),n.uc(2).layoutAll()}),n.Xb(1,"div",40),n.cc(2,"div",41),n.gc(3,42),n.bc(),n.bc()}}function gt(t,e){if(1&t&&(n.bd(0,ft,4,0,"div",38),n.vc(1,"async")),2&t){const t=n.uc();n.Dc("ngIf",n.wc(1,1,t.isCustom$))}}const mt=function(){return["top-left","bottom-left","auto"]},vt={title:"Mind Maps",boldDescription:"Your plan includes 100 uses of Mind Maps, and your Workspace's usage has been reached.",description:"Try Business to get full access to Mind Maps",features:[{icon:"mind-maps-custom",name:"Custom Mind Maps"},{icon:"mind-maps-unlimited",name:"Unlimited Mind Maps"},{icon:"mind-maps-colors",name:"Custom colors & shapes"}],image:"./assets/images/paywall/mind-maps-paywall.svg",plan:D.f.BUSINESS};let bt=(()=>{class t{constructor(t,e,n,o,r,l,u,g){this.store=t,this.changeDetectorRef=e,this.selectedTasksService=n,this.modalService=o,this.taskService=r,this.conflictService=l,this.publicViewHelper=u,this.viewsBarService=g,this.skipsDiagramUpdate=!1,this.observedDiagram=null,this.taskCreating=!1,this.destroy$=new s.a,this.key$=new c.a(null),this.view$=new c.a(null),this.team$=this.store.select(P.getTeam),this.nodeData$=this.key$.pipe(Object(d.a)(t=>this.store.select(Object(y.f)(t))),Object(h.a)({refCount:!1,bufferSize:1})),this.reloadData$=this.key$.pipe(Object(d.a)(t=>this.store.select(Object(y.h)(t))),Object(p.a)(a.a)),this.nodes$=this.nodeData$.pipe(Object(f.a)(t=>t.nodes)),this.links$=this.nodeData$.pipe(Object(f.a)(t=>t.links)),this.addingTo$=this.key$.pipe(Object(d.a)(t=>this.store.select(Object(y.a)(t)))),this.isEmpty$=this.key$.pipe(Object(d.a)(t=>this.store.select(Object(y.e)(t)))),this.paywall$=this.key$.pipe(Object(d.a)(t=>this.store.select(Object(y.g)(t)))),this.isCustom$=this.key$.pipe(Object(d.a)(t=>this.store.select(Object(y.b)(t)))),this.trayTasks$=this.store.select(T.d),this.debounceColorSelected$=new s.a,this.presetColors=C.c,this.noFilterResultsImg=i("MHI1"),this.mindMapsPaywallData=vt,this.initDiagram=()=>Object(_.h)(this.view&&this.view.mindmapSettings&&this.view.mindmapSettings.custom,this.clickNode.bind(this),this.clickOpenNode.bind(this),this.clickMore.bind(this),this.relinkNode.bind(this),null,{show:this.showEditor.bind(this),hide:this.hideEditor.bind(this),valueFunction:()=>this.input.nativeElement.value},{addSibling:this.clickAddSibling.bind(this),addChild:this.clickAddChild.bind(this),delete:this.clickDelete.bind(this),assignTask:this.clickAssignTask.bind(this),createTask:this.clickCreateTask.bind(this),setColor:this.clickSetColor.bind(this)},this.themeColor,this.user.dark_theme,this.canOpenTasks),this.initOverview=()=>Object(_.i)(this.themeColor)}get themeColor(){return this.user.theme_color||C.c[0]}ngOnInit(){this.viewsBarService.headerTemplate$.next(this.headerTemplate),this.debounceColorSelected$.pipe(Object(g.a)(250),Object(m.a)(this.destroy$)).subscribe(t=>this.setColor(t))}ngAfterViewInit(){this.observedDiagram=this.diagramComponent.diagram,this.changeDetectorRef.detectChanges(),this.diagramComponent.diagram.addDiagramListener("TreeExpanded",t=>{const e=Object(_.d)(t.subject);this.store.dispatch(Object(w.o)({key:this.key,keys:e.map(t=>t.key),updateIds:e.filter(t=>t.type===k.a.Custom).map(t=>t.payload.id),expanded:!0}))}),this.diagramComponent.diagram.addDiagramListener("TreeCollapsed",t=>{const e=Object(_.d)(t.subject);this.store.dispatch(Object(w.o)({key:this.key,keys:e.map(t=>t.key),updateIds:e.filter(t=>t.type===k.a.Custom).map(t=>t.payload.id),expanded:!1}))}),this.diagramComponent.diagram.addDiagramListener("ChangedSelection",t=>{const e=Object(_.d)(t.subject);this.selectedTasksService.selectedTaskList=e.filter(t=>[k.a.Task,k.a.Subtask].includes(t.type)).map(t=>t.payload)}),this.diagramComponent.diagram.addDiagramListener("TextEdited",t=>{this.textEdited=t.subject.part.data;const e=this.editNode.reason,i=t.subject.part.data;if(i.type===k.a.Adding){const e=t.diagram.findNodeForKey(i.key).findNodesInto().first();e instanceof o.Node&&this.updateNodesLocation(Object(_.f)(e).map(t=>t.data))}setTimeout(()=>{this.store.dispatch(Object(w.l)({key:this.key,node:i,newName:t.subject.text,loc:o.Point.stringify(new o.Point(t.subject.part.location.x,t.subject.part.location.y+20)),reason:e}))})}),this.diagramComponent.diagram.addDiagramListener("LayoutCompleted",t=>{if(this.addingTo&&!this.editNode){const e=Object(_.g)(k.a.Adding,this.addingTo.payload),i=t.diagram.findNodeForKey(e);if(i){i.findNodesInto().first(),t.diagram.scrollToRect(i.actualBounds);const e=i.findObject(_.a.Text);t.diagram.commandHandler.editTextBlock(e)}}}),this.diagramComponent.diagram.addDiagramListener("SelectionMoved",t=>{}),this.zoomSlider=new x(this.diagramComponent.diagram),setTimeout(()=>{this.diagramComponent.diagram.alignDocument(o.Spot.Center,o.Spot.Center)}),Object(l.a)([this.key$.pipe(Object(v.a)(t=>!!t),Object(p.a)()),this.view$.pipe(Object(v.a)(t=>!!t),Object(p.a)(a.a))]).pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(Object(w.v)({key:this.key,view:this.view}))}),this.reloadData$.pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.loadData()}),this.addingTo$.pipe(Object(m.a)(this.destroy$)).subscribe(t=>{this.addingTo=t}),this.paywall$.pipe(Object(p.a)(),Object(v.a)(t=>!!t),Object(m.a)(this.destroy$)).subscribe(t=>{this.paywall=t,this.store.dispatch(Object(w.w)({key:this.key,paywall:null})),(this.paywall="select")&&this.modalService.open({modifier:"cu-modal_fullwidth",content:this.paywallTemplate})}),this.taskService.onChange.pipe(Object(v.a)(t=>!!t&&"listViewDragDrop"!==t.type),Object(m.a)(this.destroy$)).subscribe(t=>{const e=t.tasks||t;if(Array.isArray(e)){if(this.notifyTasksUpdated(e.map(t=>Object.assign(Object.assign({},t),{subtasks:void 0})),t.field,t.field===I.U.name&&t.batchUpdate),t.field!==I.U.name||t.batchUpdate){const t=e.reduce((t,e)=>(e.parent&&(t[e.parent]=!0),e.parent_id&&(t[e.parent_id]=!0),t),{});this.reloadTasks(Object.keys(t))}}else switch(t.type){case"dependencyRemoved":this.reloadTasks([t.payload.task_id],"dependencyRemoved");break;case"itemUndo":const e=t.undoBody&&(t.undoBody.tasks&&t.undoBody.tasks.map(t=>t.parent||t.id)||t.undoBody.itemIds);e&&e.length&&this.reloadTasks(e,"itemUndo");break;case"undoArchive":case"reArchive":this.reloadTasks(t.archiveUndo,"reArchive");break;case"unresolved":this.reloadTasks(t.taskList.map(t=>t.id),"unresolved");break;case"taskPosition":case"boardPosition":t.undoBody&&t.undoBody.tasks&&t.undoBody.tasks.length&&this.reloadTasks(t.undoBody.tasks.map(t=>t.id),"taskPosition");break;case"undoTag":this.reloadTasks(t.undoTag.task_ids,"undoTag");break;case"dependencyReload":this.reloadTasks(t.taskIds,"dependencyReload");break;case"reload":t.taskIds&&Array.isArray(t.taskIds)&&(this.reloadTasks(t.taskIds,"reload"),this.diagramComponent.diagram.clearSelection());break;case"taskDeleted":this.deleteTask(t.payload.id);break;default:const i=[];t.taskIds&&Array.isArray(t.taskIds)&&i.push(...t.taskIds),t.undoSubtasks&&t.undoSubtasks.tasks&&i.push(...t.undoSubtasks.tasks.map(({new_parent:t})=>t)),this.reloadTasks(i)}}),this.conflictService.onChange.pipe(Object(m.a)(this.destroy$)).subscribe(t=>{"reload"===t.type||Array.isArray(t.tasks)&&this.reloadTasks(t.tasks,"conflictService")}),document.fonts&&document.fonts.ready&&Object(u.a)(document.fonts.ready).pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.diagramComponent.diagram.requestUpdate()})}ngOnChanges(t){t.key&&this.key$.next(this.key),t.view&&this.view$.next(this.view)}ngOnDestroy(){this.viewsBarService.headerTemplate$.next(null),this.destroy$.next(),this.zoomSlider&&(this.zoomSlider.remove(),this.zoomSlider=null),this.observedDiagram=null}loadData(){this.store.dispatch(Object(w.g)({key:this.key,view:this.view}))}reloadTasks(t,e){this.store.dispatch(Object(w.g)({key:this.key,view:this.view,reloadTasks:t}))}getTaskIds(t,e=!0,i=!1,n){this.loadData()}deleteTask(t){this.store.dispatch(Object(w.f)({key:this.key,taskId:t}))}notifyTasksUpdated(t,e,i=!1){this.store.dispatch(Object(w.B)({key:this.key,tasks:t}))}clickOpenNode(t,e){const i=e.part;[k.a.Task,k.a.Subtask].includes(i.data.type)?this.publicViewHelper.openTask({id:i.data.payload.id,name:i.data.payload.title}):[k.a.Custom].includes(i.data.type)&&this.publicViewHelper.openTask({id:i.data.payload.parent_id,name:i.data.payload.title})}clickNode(t,e){const i=e.part;if(i.data.editable&&[k.a.CustomEmptyRoot].includes(i.data.type)){const e=i.findObject("TEXT");t.diagram.commandHandler.editTextBlock(e)}}clickMore(t,e){const i=e.part;this.store.dispatch(Object(w.h)({key:this.key,node:i.data}))}clickAddChild(t,e){this.addNewNode(e.part.data)}clickAddSibling(t,e){const i=t.diagram.findNodeForKey(e.part.key).findNodesInto().first();i&&this.addNewNode(i.data)}clickDelete(t,e){const i=e.part;this.store.dispatch(Object(w.d)({key:this.key,node:i.data})),this.selectedTasksService.unselectTask(i.data.payload)}clickAssignTask(t,e){const i=e.part,n=t.diagram.lastInput.viewPoint,o=this.container.nativeElement.getBoundingClientRect();this.dropdownPoint={x:o.left+n.x,y:o.top+n.y},this.dropdownNode=i.data,this.changeDetectorRef.detectChanges(),this.taskSelectorDropdown.open()}clickCreateTask(t,e){const i=e.part,n=t.diagram.lastInput.viewPoint,o=this.container.nativeElement.getBoundingClientRect();this.dropdownPoint={x:o.left+n.x,y:o.top+n.y},this.dropdownNode=i.data,this.taskCreating=!1,this.createTaskData={name:i.data.title},this.changeDetectorRef.detectChanges(),this.createTaskDropdown.open()}clickSetColor(t,e){const i=e.part,n=t.diagram.lastInput.viewPoint,o=this.container.nativeElement.getBoundingClientRect();this.dropdownPoint={x:o.left+n.x,y:o.top+n.y},this.dropdownNode=i.data,this.changeDetectorRef.detectChanges(),this.colorDropdown.open()}showTooltip(t,e){const i=e.transformDocToView(t.part.location),n=t.part.findObject(_.a.Content);e.transformDocToView(new o.Point(n.actualBounds.width,n.actualBounds.height)),this.tooltip.nativeElement.style.display="block",this.tooltip.nativeElement.style.left=i.x+"px",this.tooltip.nativeElement.style.top=i.y+t.part.actualBounds.height/2+"px"}hideTooltip(t){this.tooltip.nativeElement.style.display="none"}showEditor(t,e,i){const n=t.part,a=n.data;if(a.type===k.a.Adding){const t=this.getNewNodeLocation(n.findTreeParentNode(),n);t&&(n.position=t),e.scrollToRect(n.actualBounds)}const r=n.getDocumentPoint(o.Spot.LeftCenter),s=e.transformDocToView(r);this.editor.nativeElement.style.display="block",this.editor.nativeElement.style.left=s.x+"px",this.editor.nativeElement.style.top=s.y+"px";const c=n.findObject(_.a.Content);c&&(c.opacity=0),n.adornments.each(t=>{t.opacity=0}),this.editNode={part:n,data:a,tool:i,loc:n.location},this.changeDetectorRef.detectChanges(),this.input.nativeElement.style.width=n.naturalBounds.width+"px",this.input.nativeElement.focus()}hideEditor(t,e){if(!this.editNode)return;this.textEdited&&(this.textEdited.type===k.a.Adding&&this.store.dispatch(Object(w.m)({key:this.key,node:null})),this.textEdited=null),this.editor.nativeElement.style.display="none";const i=this.editNode.part.findObject(_.a.Content);i&&(i.opacity=1),this.editNode.part.adornments.each(t=>{t.opacity=1}),this.editNode=null}diagramModelChange(t){t&&t.modifiedNodeData&&this.updateNodesLocation(t.modifiedNodeData)}updateNodesLocation(t){this.nodes$.pipe(Object(b.a)(1),Object(m.a)(this.destroy$)).subscribe(e=>{const i=[],n=["loc","dir"];t.forEach(t=>{const o=e&&e.find(e=>e.key===t.key);o&&!Object(a.a)(Object(r.a)(o,n),Object(r.a)(t,n))&&i.push(t)});const o=i.filter(t=>t.type===k.a.Custom);o.length&&this.store.dispatch(Object(w.y)({key:this.key,nodes:o.map(t=>({id:t.payload.id,settings:{loc:t.loc,dir:t.dir}}))}))})}diagramKeyDown(t){switch(t.keyCode){case S.a.TAB:const e=this.diagramComponent.diagram.selection.first(),i=e?e.data:null;!i||i.type!==k.a.Task&&i.type!==k.a.Subcategory&&i.type!==k.a.Custom||(t.preventDefault(),t.stopPropagation(),this.addNewNode(i),setTimeout(()=>{this.input&&this.input.nativeElement&&this.input.nativeElement.focus()},0))}}inputKeydown(t){switch(t.keyCode){case S.a.ENTER:this.saveEditorValue(o.TextEditingTool.Enter);break;case S.a.TAB:this.saveEditorValue(o.TextEditingTool.Tab);break;case S.a.ESCAPE:this.cancelEditor()}}cancelEditor(){this.editNode&&this.editNode.tool.doCancel()}saveEditorValue(t){this.editNode&&(this.editNode.reason=t===o.TextEditingTool.Enter?"Enter":o.TextEditingTool.Tab?"Tab":void 0,this.editNode.tool.acceptText(t))}addNewNode(t){this.store.dispatch(Object(w.o)({key:this.key,keys:[t.key],expanded:!0})),t.loaded||this.store.dispatch(Object(w.h)({key:this.key,node:t})),this.store.dispatch(Object(w.m)({key:this.key,node:t}))}setListPosition(){this.taskSelectorDropdown&&this.taskSelectorDropdown.isOpen&&this.taskSelectorDropdown.positionMenu()}selectTask(t){this.taskSelectorDropdown&&this.taskSelectorDropdown.close(),this.createTaskDropdown&&this.createTaskDropdown.close(),this.store.dispatch(Object(w.y)({key:this.key,nodes:[{id:this.dropdownNode.payload.id,parent_type:1,parent_id:t.id,title:t.name}]}))}taskCreated({task:t}){this.taskCreating=!1,this.selectTask(t)}setColor(t){this.store.dispatch(Object(w.y)({key:this.key,nodes:[{id:this.dropdownNode.payload.id,settings:Object.assign(Object.assign({},this.dropdownNode.payload.settings),{color:t})}]}))}relinkNode(t,e){if(t.data.type===k.a.Custom)this.store.dispatch(Object(w.y)({key:this.key,nodes:[{id:t.data.payload.id,parent_node_id:e.data.payload.id}]}));else if([k.a.Task,k.a.Subtask].includes(t.data.type)){const i=[t.data.payload.id],n=[t.data.payload.subcategory.id];this.store.dispatch(Object(w.f)({key:this.key,taskId:t.data.payload.id})),e.data.type===k.a.Task?(i.push(e.data.payload.id),n.push(e.data.payload.subcategory.id),this.store.dispatch(Object(w.A)({key:this.key,id:t.data.payload.id,data:{parent:e.data.payload.id},reloadView:!0,reloadTasks:i,reloadSubcategories:n}))):e.data.type===k.a.Subcategory&&(n.push(e.data.payload.id),this.taskService.move(t.data.payload,e.data.payload))}}startTrial(){this.store.dispatch(new M.Rk([],D.f.BUSINESS)),this.modalService.closeAll()}layoutAll(){Object(_.j)(this.diagramComponent.diagram)}getNewNodeLocation(t,e){if(t instanceof o.Node){let i,n;if(t.findTreeChildrenNodes().each(t=>{e!==t&&(i=t)}),i){const t=i.getDocumentPoint(o.Spot.BottomLeft);n=new o.Point(t.x,t.y+20)}else{const e=t.getDocumentPoint(o.Spot.TopRight);n=new o.Point(e.x+50,e.y)}return n}}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(O.Store),n.Wb(n.h),n.Wb($.a),n.Wb(j.a),n.Wb(L.a),n.Wb(E.a),n.Wb(N.a),n.Wb(A.a))},t.\u0275cmp=n.Qb({type:t,selectors:[["cu-mindmap-view"]],viewQuery:function(t,e){if(1&t&&(n.jd(K,3,n.m),n.jd(Z,1),n.jd(J,3,n.m),n.jd(Q,3,n.m),n.jd(tt,3),n.jd(et,1),n.jd(it,1),n.jd(nt,1),n.jd(ot,3),n.jd(at,3)),2&t){let t;n.Qc(t=n.rc())&&(e.container=t.first),n.Qc(t=n.rc())&&(e.diagramComponent=t.first),n.Qc(t=n.rc())&&(e.tooltip=t.first),n.Qc(t=n.rc())&&(e.editor=t.first),n.Qc(t=n.rc())&&(e.input=t.first),n.Qc(t=n.rc())&&(e.taskSelectorDropdown=t.first),n.Qc(t=n.rc())&&(e.createTaskDropdown=t.first),n.Qc(t=n.rc())&&(e.colorDropdown=t.first),n.Qc(t=n.rc())&&(e.paywallTemplate=t.first),n.Qc(t=n.rc())&&(e.headerTemplate=t.first)}},hostAttrs:[1,"cu-mindmap-view"],inputs:{key:"key",view:"view",user:"user",canOpenTasks:"canOpenTasks"},features:[n.Gb],decls:35,vars:43,consts:function(){let t,e,i;return t=$localize`:@@cu-mindmap-view__tooltip␟5dba8a025affe54bd35eff5d28604a7c488716c1␟5135142671177377193: tooltip `,e=$localize`:@@common_empty-contents␟d50896b37a2e874256514cfac63670e1e1378334␟8033538352285303157: Nothing to see here. `,i=$localize`:@@cu-mindmap-view__label_re-layout␟b3f6710adf21ce4acbaf1bbd842c1e97ba646e1c␟6331082322904082842: Re-Layout `,[[1,"cu-mindmap-view__container"],["container",""],[1,"cu-mindmap-view__diagram",3,"initDiagram","nodeDataArray","linkDataArray","divClassName","skipsDiagramUpdate","keydown","modelChange"],["diagram",""],[3,"initOverview","divClassName","observedDiagram"],[1,"cu-mindmap-view__tooltip"],["tooltip",""],t,[1,"cu-mindmap-view__editor"],["editor",""],["type","text",1,"cu-mindmap-view__input",3,"ngModel","keydown"],["input",""],["class","cu-mindmap-view__empty",4,"ngIf"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPreventDocumentScroll","dropdownFromPoint","dropdownPlacement"],["taskSelectorDropdown","dropdown"],["style","width: 380px; display: block",3,"modifier","excludeCurrentTask","excludeParentTask","showSearch","showSubtasks","searchSubtasks","onSelect","onLoad",4,"cuDropdownMenu"],["createTaskDropdown","dropdown"],["cuDropdownToggle",""],["class","cu-dropdown__menu_overflow-hidden cu-task-editor__create-task",4,"cuDropdownMenu"],["colorDropdown","dropdown"],[3,"width",4,"cuDropdownMenu"],["createTaskTemplate",""],["paywallTemplate",""],["headerTemplate",""],[1,"cu-mindmap-view__empty"],[1,"cu-mindmap-view__empty-inner"],[1,"cu-mindmap-view__empty-img"],["width","163","height","257","alt","",3,"src"],[1,"cu-mindmap-view__empty-desc"],e,[2,"width","380px","display","block",3,"modifier","excludeCurrentTask","excludeParentTask","showSearch","showSubtasks","searchSubtasks","onSelect","onLoad"],["taskSelector",""],[1,"cu-dropdown__menu_overflow-hidden","cu-task-editor__create-task"],[3,"ngTemplateOutlet"],[3,"onlyPickFromPresets","showClose","presetColors","selectedColor","selectedColorChange","closePicker","customToggled"],["slashCommandsPlacement","bottom","slashCommandsContainer","",3,"isRow","isAlwaysActive","autoClose","isHidden","margin","saveOnDestroy","hideDirectionSelector","dontCancel","defaultData","alwaysDisplayLocation","buttonText","showTags","showStartDate","showDueDate","taskCreate","onBeforeCreate"],[4,"ngIf"],[3,"featureTitle","boldDescription","description","features","image","plan","team","trialClick"],["id","mindmap-adjust-layout","class","cu-mindmap-view__re-layout",3,"click",4,"ngIf"],["id","mindmap-adjust-layout",1,"cu-mindmap-view__re-layout",3,"click"],["icon","cu2-re-layout",1,"cu-mindmap-view__re-layout-icon"],[1,"cu-mindmap-view__re-layout-label"],i]},template:function(t,e){if(1&t&&(n.cc(0,"div",0,1),n.vc(2,"async"),n.vc(3,"async"),n.cc(4,"gojs-diagram",2,3),n.qc("keydown",function(t){return e.diagramKeyDown(t)})("modelChange",function(t){return e.diagramModelChange(t)}),n.vc(6,"async"),n.vc(7,"async"),n.bc(),n.Xb(8,"gojs-overview",4),n.cc(9,"div",5,6),n.gc(11,7),n.bc(),n.cc(12,"div",8,9),n.cc(14,"input",10,11),n.qc("keydown",function(t){return e.inputKeydown(t)}),n.bc(),n.bc(),n.bc(),n.bd(16,rt,6,1,"div",12),n.vc(17,"async"),n.cc(18,"div",13,14),n.bd(20,st,2,6,"cu-task-selector",15),n.bc(),n.cc(21,"div",13,16),n.Xb(23,"div",17),n.bd(24,lt,2,1,"div",18),n.bc(),n.cc(25,"div",13,19),n.Xb(27,"div",17),n.bd(28,ut,2,6,"div",20),n.bc(),n.bd(29,ht,2,15,"ng-template",null,21,n.cd),n.bd(31,pt,2,9,"ng-template",null,22,n.cd),n.bd(33,gt,2,3,"ng-template",null,23,n.cd)),2&t){let t=null;n.Ob("cu-hidden",n.wc(2,30,e.isEmpty$))("cu-mindmap-view__container_task-tray",null==(t=n.wc(3,32,e.trayTasks$))||null==t.fullTeamTray?null:t.fullTeamTray.length),n.Ib(4),n.Dc("initDiagram",e.initDiagram)("nodeDataArray",n.wc(6,34,e.nodes$))("linkDataArray",n.wc(7,36,e.links$))("divClassName","cu-mindmap-view__diagram-div")("skipsDiagramUpdate",e.skipsDiagramUpdate),n.Ib(4),n.Dc("initOverview",e.initOverview)("divClassName","cu-mindmap-view__minimap")("observedDiagram",e.observedDiagram),n.Ib(1),n.ad("display","none"),n.Ib(3),n.ad("display","none"),n.Ib(2),n.Dc("ngModel",null==e.editNode||null==e.editNode.data?null:e.editNode.data.title),n.Ib(2),n.Dc("ngIf",n.wc(17,38,e.isEmpty$)),n.Ib(2),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!0)("dropdownFromPoint",e.dropdownPoint)("dropdownPlacement",n.Gc(40,mt)),n.Ib(3),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!0)("dropdownFromPoint",e.dropdownPoint)("dropdownPlacement",n.Gc(41,mt)),n.Ib(4),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownPreventDocumentScroll",!0)("dropdownFromPoint",e.dropdownPoint)("dropdownPlacement",n.Gc(42,mt))}},directives:[V.a,V.c,z.c,z.p,z.s,F.q,B.b,R.a,U.a,G.a,F.x,H.a,W.a,q.a,X.a,Y.a],pipes:[F.b],styles:['.cu-mindmap-view{display:block}.cu-mindmap-view,.cu-mindmap-view__container{height:100%;width:100%}.cu-mindmap-view__diagram{display:block;height:100%;width:100%}.cu-mindmap-view__diagram-div{height:100%;width:100%}.cu-mindmap-view__minimap{position:absolute;bottom:8px;left:8px;width:200px;height:150px;background:rgba(250,251,252,.95);z-index:100;border-radius:4px;border:2px solid #e9ebf0}.contrast_high .cu-mindmap-view__minimap{background:hsla(0,0%,93.3%,.95)}.dark-theme .cu-mindmap-view__minimap{border-color:#384047;background:rgba(30,39,46,.95)}.cu-mindmap-view__container_task-tray .cu-mindmap-view__minimap{bottom:46px}.cu-mindmap-view__editor,.cu-mindmap-view__tooltip{position:absolute;background-color:#fff;z-index:10}.cu-mindmap-view__editor{border-radius:4px;box-shadow:0 3px 8px rgba(0,0,0,.05);transform:translate(2px,-50%);border:1px solid #b9bec7}.dark-theme .cu-mindmap-view__editor{background:#384047;border-color:#7c828d}.cu-mindmap-view__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:20px;top:0;border:0;background:transparent;box-shadow:none;padding:6px 10px;outline:none;cursor:text;text-transform:none;min-width:50px;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-mindmap-view__input{font-family:var(--global-font-support)}}.dark-theme .cu-mindmap-view__input{color:#d5d6d7;box-shadow:none;background:transparent}.cu-mindmap-view__input:focus{box-shadow:none}.cu-mindmap-view__empty{display:grid;align-items:center;width:100%;height:100%;overflow:auto}.cu-mindmap-view__empty-inner{text-align:center}.cu-mindmap-view__empty-img{margin-right:-70px;margin-bottom:30px}.dark-theme .cu-mindmap-view__empty-img{opacity:.8}.cu-mindmap-view__empty-desc{font:400 15px/1 Gotham Pro,Proxima Nova,arial,serif;color:#4a4a4a}.contrast_high .cu-mindmap-view__empty-desc{color:#979797}.dark-theme .cu-mindmap-view__empty-desc{color:#b7b7b7}.cu-mindmap-view__re-layout{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;position:relative;height:24px;padding:0 5px 0 3px;margin-left:10px;cursor:pointer;border-radius:3px;border:1px solid #d8dce2}.contrast_high .cu-mindmap-view__re-layout{border-color:#b9bec7}.dark-theme .cu-mindmap-view__re-layout{border-color:#384047}.cu-mindmap-view__re-layout:hover{background-color:#f2f2f2}.dark-theme .cu-mindmap-view__re-layout:hover{background-color:#2b343b}.cu-mindmap-view__re-layout-icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;fill:#7c828d}.dark-theme .cu-mindmap-view__re-layout-icon{fill:#b9bec7}.cu-mindmap-view__re-layout-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-left:3px;margin-bottom:-1px;color:#7c828d}',".zoomSlider{position:absolute;padding:0;z-index:99;width:150px;height:24px;bottom:8px;left:214px}.cu-mindmap-view__container_task-tray .zoomSlider{bottom:46px}.zoomButton{display:flex;align-items:center;justify-content:center;padding:0;transition:opacity .2s;border-radius:4px;border:2px solid #e9ebf0;background:#fff;fill:#7c828d}.dark-theme .zoomButton{border-color:#384047;background:#2b343b;fill:#7c828d}.zoomButton:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.zoomButton:hover{fill:var(--theme-main-color)}}.zoomRangeContainer{display:inline-block;vertical-align:top;padding:0}.zoomRangeInput{margin:0;padding:0;outline:none;transition:opacity .2s;background:transparent;-webkit-appearance:none}.zoomRangeInput:focus{box-shadow:none}.zoomRangeInput::-webkit-slider-runnable-track{box-sizing:border-box;border:none;width:100%;height:3px;background:#e9ebf0}.dark-theme .zoomRangeInput::-webkit-slider-runnable-track{background:#384047}.zoomRangeInput::-moz-range-track{box-sizing:border-box;border:none;width:100%;height:3px;background:#e9ebf0}.dark-theme .zoomRangeInput::-moz-range-track{background:#384047}.zoomRangeInput::-ms-track{box-sizing:border-box;border:none;width:100%;height:3px;background:#e9ebf0;color:transparent}.dark-theme .zoomRangeInput::-ms-track{background:#384047}.zoomRangeInput::-webkit-slider-thumb{cursor:pointer;-webkit-appearance:none;margin-top:-3.33px;box-sizing:border-box;border:none;width:10px;height:10px;border-radius:50%;background:#7c828d}.dark-theme .zoomRangeInput::-webkit-slider-thumb{background:#7c828d}.zoomRangeInput::-webkit-slider-thumb:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.zoomRangeInput::-webkit-slider-thumb:hover{background:var(--theme-main-color)}}.zoomRangeInput::-moz-range-thumb{cursor:pointer;box-sizing:border-box;border:none;width:10px;height:10px;border-radius:50%;background:#7c828d}.dark-theme .zoomRangeInput::-moz-range-thumb{background:#7c828d}.zoomRangeInput::-moz-range-thumb:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.zoomRangeInput::-moz-range-thumb:hover{background:var(--theme-main-color)}}.zoomRangeInput::-ms-thumb{cursor:pointer;margin-top:0;box-sizing:border-box;border:none;width:10px;height:10px;border-radius:50%;background:#7c828d}.dark-theme .zoomRangeInput::-ms-thumb{background:#7c828d}.zoomRangeInput::-ms-thumb:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.zoomRangeInput::-ms-thumb:hover{background:var(--theme-main-color)}}.zoomRangeInput::-ms-fill-lower,.zoomRangeInput::-ms-fill-upper,.zoomRangeInput::-ms-tooltip{display:none}"],encapsulation:2,changeDetection:0}),t})()},"2XVl":function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("ofXK"),o=i("dsEp"),a=i("K0KF"),r=i("fXoL");let s=(()=>{class t{}return t.\u0275mod=r.Ub({type:t}),t.\u0275inj=r.Tb({factory:function(e){return new(e||t)},imports:[[n.c,o.a,a.a]]}),t})()},"6eBy":function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("zx2A");function o(t){return e=>e.lift(new a(t))}class a{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new r(t,this.durationSelector))}}class r extends n.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){try{const e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(e){this.destination.error(e)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(t,e){let i=this.durationSubscription;this.value=t,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=Object(n.c)(e,new n.a(this)),i&&!i.closed&&this.add(this.durationSubscription=i)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,super._next(t)}}}},"6w4Z":function(t,e,i){"use strict";i.r(e),i.d(e,"DashboardModule",function(){return qm});var n=i("ofXK"),o=i("/qmH"),a=i("JXEA"),r=i("8Gxz"),s=i("M+U4"),c=i("WTPp"),l=i("gb9A"),u=i("K0KF"),d=i("fXoL");let h=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,a.a,r.a,s.a,c.a,l.a,u.a]]}),t})();var p=i("HQfa"),f=i("odS2"),g=i("1M0N");let m=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,g.a,u.a,l.a]]}),t})();var v=i("dsEp"),b=i("C8uC"),_=i("eD3g");let w=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,g.a,b.LoaderModule,_.a,l.a,v.a]]}),t})();var y=i("KX9h"),k=i("RAxo"),x=i("mcWp"),S=i("PEqQ"),T=i("ygeO"),C=i("Po8+"),D=i("3Pt+"),I=i("5+WD"),P=i("tyNb"),M=i("KyjD"),O=i("V6/z"),$=i("MguC"),j=i("jJQC"),L=i("pHS2"),E=i("Gj5t"),N=i("IzEk"),A=i("1G5W"),V=i("xDGP"),z=i("c3rA"),F=i("uslN"),B=i("XNiG"),R=i("9jGm"),U=i("/qOb");let G=(()=>{class t{constructor(){this.trialClick=new d.o,this.DataViewType=$.i,this.features=[{icon:"cu2-server",name:$localize`:@@common_unlimited-storage:Unlimited Storage`},{icon:"cu2-box",name:$localize`:@@common_box-view:Box view`},{icon:"cu2-infinity",name:$localize`:@@common_unlimited-cf-goals-and-portfolios:Unlimited custom fields, Goals & Portfolios`},{icon:"cu2-plus",name:'<a href="https://clickup.com/expandplans" target="_blank" class="cu-paywall-modal__feature-item-link">'+$localize`:@@common_more-incredible-features:Plus 20+ more incredible features`+"</a>"}],this.TeamPlan=F.f,this.timelineViewText=$localize`:@@cu-timeline-paywall-modal__timeline-view:Timeline view`,this.timelineViewDescriptionText=$localize`:@@cu-timeline-paywall-modal__timeline-view-description:Start your free trial of Business so you can use Timeline view. Plus you'll get:`,this.workloadViewText=$localize`:@@cu-timeline-paywall-modal__workload-view:Workload view`,this.workloadViewDescriptionText=$localize`:@@cu-timeline-paywall-modal__workload-view-description:Start your free trial of Business so you can use Workload view. Plus you'll get:`}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-timeline-paywall-modal"]],inputs:{dataViewType:"dataViewType"},outputs:{trialClick:"trialClick"},decls:1,vars:5,consts:[[3,"featureTitle","description","features","image","plan","trialClick"]],template:function(t,e){1&t&&(d.cc(0,"cu-paywall-modal",0),d.qc("trialClick",function(){return e.trialClick.emit()}),d.bc()),2&t&&d.Dc("featureTitle",e.dataViewType===e.DataViewType.Timeline?e.timelineViewText:e.workloadViewText)("description",e.dataViewType===e.DataViewType.Timeline?e.timelineViewDescriptionText:e.workloadViewDescriptionText)("features",e.features)("image",e.dataViewType===e.DataViewType.Timeline?"./assets/images/paywall/timeline-view.png":"./assets/images/paywall/workload-view.png")("plan",e.TeamPlan.BUSINESS)},directives:[V.a],styles:[""],changeDetection:0}),t})();var H=i("dTHz"),W=i("OzD4"),q=i("+2Ly"),X=i("GkwO"),Y=i("o7Ov"),K=i("l7P3"),Z=i("Jf2N"),J=i("8it8"),Q=i("DkPU"),tt=i("LdyQ"),et=i("MJvn"),it=i("n+1/"),nt=i("UdVN"),ot=i("NsZK"),at=i("EDFS"),rt=i("O5gs"),st=i("8r6i");const ct=["dropdown"],lt=["viewNameInput"],ut=["personalViewSelect"],dt=["dropdownToggle"],ht=["paywallPopover"],pt=["personalViewPopover"];function ft(t,e){if(1&t&&d.Yb(0,16),2&t){d.uc(2);const t=d.Rc(16);d.Dc("ngTemplateOutlet",t)}}function gt(t,e){if(1&t&&d.Yb(0,16),2&t){d.uc(2);const t=d.Rc(18);d.Dc("ngTemplateOutlet",t)}}function mt(t,e){if(1&t){const t=d.dc();d.cc(0,"div",14),d.qc("keydown",function(e){return d.Uc(t),d.uc().docKeyDown(e)},!1,d.Sc),d.vc(1,"async"),d.cc(2,"div",15),d.Yb(3,16),d.cc(4,"div",17),d.Yb(5,16),d.bd(6,ft,1,1,"ng-container",18),d.bd(7,gt,1,1,"ng-container",18),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc(),e=d.Rc(8),i=d.Rc(10);let n=null;d.Mb("cu-data-view-add-dropdown__menu layout-",null==(n=d.wc(1,9,t.user$))?null:n.dashboard,""),d.Ib(2),d.Ob("flipped",t.flipMenu),d.Ib(1),d.Dc("ngTemplateOutlet",e),d.Ib(2),d.Dc("ngTemplateOutlet",i),d.Ib(1),d.Dc("ngIf",!t.showGanttPaywall),d.Ib(1),d.Dc("ngIf",t.showGanttPaywall)}}function vt(t,e){if(1&t&&(d.cc(0,"div",19),d.Xb(1,"div",20),d.Xb(2,"input",21,22),d.bc()),2&t){const t=d.uc();d.Ib(1),d.Dc("icon","cu2-view-"+(null==t.activeItem?null:t.activeItem.id))}}function bt(t,e){if(1&t&&(d.cc(0,"div",23),d.cc(1,"div",24),d.gc(2,25),d.bc(),d.Yb(3,16),d.cc(4,"div",24),d.gc(5,26),d.bc(),d.Yb(6,16),d.bc()),2&t){d.uc();const t=d.Rc(12),e=d.Rc(14);d.Ib(3),d.Dc("ngTemplateOutlet",t),d.Ib(3),d.Dc("ngTemplateOutlet",e)}}function _t(t,e){1&t&&(d.cc(0,"div",35),d.gc(1,36),d.bc())}function wt(t,e){1&t&&(d.cc(0,"div",37),d.gc(1,38),d.bc())}function yt(t,e){if(1&t){const t=d.dc();d.cc(0,"div",30),d.qc("click",function(){d.Uc(t);const e=d.uc().$implicit;return d.uc(2).setActiveItem(e)}),d.vc(1,"lowercase"),d.Xb(2,"div",31),d.cc(3,"div",32),d.dd(4),d.bd(5,_t,2,0,"div",33),d.bd(6,wt,2,0,"div",34),d.bc(),d.bc()}if(2&t){const t=d.uc().$implicit,e=d.uc(2);d.Mb("cu-data-view-add-dropdown__views-item cu-data-view-add-dropdown__views-item-",d.wc(1,12,null==t?null:t.title),""),d.Ob("active",e.activeItem.id===(null==t?null:t.id))("cu-data-view-add-dropdown__views-item-disabled",t.disabledTooltip),d.Dc("cuTooltip",t.disabledTooltip),d.Ib(2),d.Dc("icon","cu2-view-"+(null==t?null:t.id)),d.Ib(2),d.fd(" ",t.title," "),d.Ib(1),d.Dc("ngIf",t.beta),d.Ib(1),d.Dc("ngIf",t.new)}}function kt(t,e){if(1&t&&(d.ac(0),d.bd(1,yt,7,14,"div",29),d.vc(2,"async"),d.Zb()),2&t){const t=e.$implicit,i=d.uc(2);d.Ib(1),d.Dc("ngIf",!(t.id===i.DataViewType.Workload&&d.wc(2,1,i.isGuest$)))}}function xt(t,e){if(1&t&&(d.cc(0,"div",27),d.bd(1,kt,3,3,"ng-container",28),d.bc()),2&t){const t=d.uc();d.Ib(1),d.Dc("ngForOf",t.itemsByContentType[t.ViewContentType.Tasks])("ngForTrackBy",t.trackById)}}function St(t,e){if(1&t){const t=d.dc();d.cc(0,"div",40),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(2).setActiveItem(i)}),d.Xb(1,"div",31),d.cc(2,"div",32),d.dd(3),d.bc(),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(2);d.Ob("active",i.activeItem.id===(null==t?null:t.id))("cu-data-view-add-dropdown__views-item-disabled",t.disabledTooltip),d.Dc("cuTooltip",t.disabledTooltip),d.Ib(1),d.Dc("icon","cu2-view-"+(null==t?null:t.id)),d.Ib(2),d.fd(" ",t.title," ")}}function Tt(t,e){if(1&t&&(d.cc(0,"div",27),d.bd(1,St,4,7,"div",39),d.bc()),2&t){const t=d.uc();d.Ib(1),d.Dc("ngForOf",t.itemsByContentType[t.ViewContentType.Blank])("ngForTrackBy",t.trackById)}}function Ct(t,e){1&t&&(d.ac(0),d.dd(1,"(Resource management)"),d.Zb())}function Dt(t,e){1&t&&(d.cc(0,"span"),d.ac(1),d.gc(2,69),d.Zb(),d.cc(3,"em"),d.dd(4,"("),d.ac(5),d.gc(6,70),d.Zb(),d.dd(7,")"),d.bc(),d.bc())}function It(t,e){if(1&t&&(d.cc(0,"span"),d.dd(1),d.bc()),2&t){const t=d.uc(3);d.Ib(1),d.ed(t.selectedBoardGrouping.title)}}const Pt=function(){return["bottom"]};function Mt(t,e){if(1&t){const t=d.dc();d.cc(0,"div",62),d.cc(1,"div",63),d.ac(2),d.gc(3,64),d.Zb(),d.dd(4,": "),d.bc(),d.cc(5,"cu-dropdown-list",65),d.qc("onSelect",function(e){return d.Uc(t),d.uc(2).selectBoardGrouping(e)})("onAddClick",function(e){return d.Uc(t),d.uc(2).dropdownAddClick(e)})("onOpen",function(){return d.Uc(t),d.uc(2).boardGroupOpen()}),d.cc(6,"div",66),d.Xb(7,"div",67),d.bd(8,Dt,8,0,"span",44),d.bd(9,It,2,1,"span",44),d.Xb(10,"div",68),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ib(5),d.Dc("menuModifier","cu-data-view-add-dropdown__description-board-groups-menu")("items",t.groupingItems)("dropdownPlacement",d.Gc(6,Pt)),d.Ib(2),d.Dc("icon",t.selectedBoardGrouping.icon),d.Ib(1),d.Dc("ngIf","Status"===t.selectedBoardGrouping.title),d.Ib(1),d.Dc("ngIf","Status"!==t.selectedBoardGrouping.title)}}function Ot(t,e){if(1&t){const t=d.dc();d.cc(0,"div",71),d.cc(1,"label",51),d.cc(2,"input",72),d.qc("ngModelChange",function(e){return d.Uc(t),d.uc(2).pinnedView=e}),d.bc(),d.cc(3,"span"),d.gc(4,73),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ib(1),d.Dc("cuTooltip","Pin this view to make it stand out in the top bar"),d.Ib(1),d.Dc("value",!0)("ngModel",t.pinnedView)("checked",t.pinnedView)}}function $t(t,e){1&t&&d.Yb(0)}function jt(t,e){if(1&t&&(d.ac(0),d.bd(1,$t,1,0,"ng-container",74),d.Zb()),2&t){d.uc();const t=d.Rc(28);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}function Lt(t,e){1&t&&(d.ac(0),d.gc(1,75),d.Zb())}function Et(t,e){if(1&t&&d.bd(0,Lt,2,0,"ng-container",58),2&t){d.uc();const t=d.Rc(26),e=d.uc();d.Dc("ngIf",e.activeItem.id===e.DataViewType.Form&&e.team.plan_id===e.TeamPlan.FREE&&e.team.trial_count<1)("ngIfElse",t)}}function Nt(t,e){1&t&&(d.ac(0),d.gc(1,76),d.Zb())}function At(t,e){if(1&t&&d.bd(0,Nt,2,0,"ng-container",58),2&t){d.uc();const t=d.Rc(28),e=d.uc();d.Dc("ngIf",e.activeItem.id===e.DataViewType.Box&&e.team.plan_id===e.TeamPlan.FREE&&e.team.trial_count<1)("ngIfElse",t)}}function Vt(t,e){1&t&&(d.ac(0),d.gc(1,77),d.Zb())}function zt(t,e){if(1&t){const t=d.dc();d.cc(0,"div",41),d.Yb(1,16),d.cc(2,"div",42),d.cc(3,"div",43),d.dd(4),d.bd(5,Ct,2,0,"ng-container",44),d.bc(),d.cc(6,"div",45),d.dd(7),d.bc(),d.bd(8,Mt,11,7,"div",46),d.cc(9,"div",47),d.cc(10,"div",48),d.cc(11,"div",49,50),d.qc("click",function(e){return d.Uc(t),d.uc().checkPersonalViewPaywall(e)}),d.cc(13,"label",51),d.cc(14,"input",52,53),d.qc("ngModelChange",function(e){return d.Uc(t),d.uc().personalView=e}),d.bc(),d.cc(16,"span"),d.gc(17,54),d.bc(),d.bc(),d.bc(),d.bd(18,Ot,5,4,"div",55),d.bc(),d.cc(19,"div",56,57),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.selectItem(e.activeItem)}),d.vc(21,"lowercase"),d.bd(22,jt,2,1,"ng-container",58),d.bd(23,Et,1,2,"ng-template",null,59,d.cd),d.bd(25,At,1,2,"ng-template",null,60,d.cd),d.bd(27,Vt,2,0,"ng-template",null,61,d.cd),d.bc(),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.Rc(24),e=d.uc(),i=d.Rc(20),n=d.Rc(22),o=d.Rc(24);d.Ib(1),d.Dc("ngTemplateOutlet",i),d.Ib(3),d.fd(" ",e.activeItem.title," "),d.Ib(1),d.Dc("ngIf",e.activeItem.id===e.DataViewType.Workload),d.Ib(2),d.fd(" ",e.activeItem.description," "),d.Ib(1),d.Dc("ngIf",(null==e.activeItem?null:e.activeItem.id)===e.DataViewType.Board),d.Ib(3),d.Ob("cu-data-view-add-dropdown__description-actions-checkboxes-item-paywalled",e.team.plan_id===e.TeamPlan.FREE||e.team.plan_id===e.TeamPlan.UNLIMITED),d.Dc("popover",n)("outsideClick",!0)("placement","bottom"),d.Ib(2),d.Dc("cuTooltip",e.canOnlyCreatePersonalViews?"You only have permission to make views personal to you":"Make this view visible to only you."),d.Ib(1),d.Dc("value",!0)("ngModel",e.personalView)("checked",e.personalView)("disabled",e.canOnlyCreatePersonalViews),d.Ib(4),d.Dc("ngIf",e.groupViews),d.Ib(1),d.Mb("cu-data-view-add-dropdown__description-actions-add cu-data-view-add-dropdown__description-actions-add-",d.wc(21,22,e.activeItem.title),""),d.Dc("popover",o),d.Ib(3),d.Dc("ngIf",e.activeItem.id!==e.DataViewType.Form&&e.activeItem.id!==e.DataViewType.Box&&e.activeItem.id!==e.DataViewType.Gantt)("ngIfElse",t)}}function Ft(t,e){if(1&t&&(d.cc(0,"p",82),d.mc(1,85),d.Xb(2,"a",86),d.jc(),d.bc()),2&t){const t=d.uc(3);d.Ib(2),d.Dc("href",t.upgradeLink,d.Xc)}}function Bt(t,e){if(1&t&&(d.cc(0,"p",82),d.mc(1,87),d.Xb(2,"a",88),d.jc(),d.bc()),2&t){const t=d.uc(3);d.Ib(2),d.Dc("href",t.ownerEmailLink,d.Xc)}}function Rt(t,e){if(1&t&&(d.cc(0,"div"),d.cc(1,"h1",80),d.dd(2,"Beautiful Gantt Charts"),d.bc(),d.bd(3,Ft,3,1,"p",81),d.bd(4,Bt,3,1,"p",81),d.cc(5,"p",82),d.cc(6,"a",83),d.gc(7,84),d.bc(),d.bc(),d.bc()),2&t){const t=d.uc(2);d.Ib(3),d.Dc("ngIf",t.isOwnerOrAdmin),d.Ib(1),d.Dc("ngIf",!t.isOwnerOrAdmin)}}function Ut(t,e){if(1&t){const t=d.dc();d.cc(0,"div"),d.cc(1,"h1",80),d.gc(2,89),d.bc(),d.cc(3,"div",90),d.cc(4,"a",91),d.gc(5,92),d.bc(),d.cc(6,"div",93),d.qc("click",function(){return d.Uc(t),d.uc(2).showGanttPaywall=!1}),d.gc(7,94),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ib(4),d.Dc("routerLink",t.upgradeLink)}}function Gt(t,e){if(1&t&&(d.cc(0,"div",41),d.cc(1,"div",78),d.cc(2,"div"),d.Xb(3,"img",79),d.bc(),d.bd(4,Rt,8,2,"div",44),d.bd(5,Ut,8,1,"div",44),d.bc(),d.bc()),2&t){const t=d.uc();d.Ib(4),d.Dc("ngIf",t.ganttTrialActivated),d.Ib(1),d.Dc("ngIf",!t.ganttTrialActivated)}}function Ht(t,e){if(1&t&&(d.Xb(0,"img",95),d.Xb(1,"img",96),d.Xb(2,"img",97),d.Xb(3,"img",98),d.Xb(4,"img",99),d.Xb(5,"img",100),d.Xb(6,"img",101),d.Xb(7,"img",102),d.Xb(8,"img",103),d.Xb(9,"img",103),d.Xb(10,"img",103),d.Xb(11,"img",103),d.Xb(12,"img",103),d.Xb(13,"img",103),d.Xb(14,"img",104)),2&t){const t=d.uc();d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Board)("src",t.imgFolder+"board.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Box)("src",t.imgFolder+"box.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Calendar)("src",t.imgFolder+"calendar.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Conversation)("src",t.imgFolder+"chat.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Doc)("src",t.imgFolder+"doc.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Embed)("src",t.imgFolder+"embed.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Form)("src",t.imgFolder+"form.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Gantt)("src",t.imgFolder+"gantt.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.List)("src",t.imgFolder+"list.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Activity)("src",t.imgFolder+"activity.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.MindMap)("src",t.imgFolder+"mind-map.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Workload)("src",t.imgFolder+"workload.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Timeline)("src",t.imgFolder+"timeline.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Grid)("src",t.imgFolder+"grid.svg",d.Xc),d.Ib(1),d.Dc("hidden",(null==t.activeItem?null:t.activeItem.id)!==t.DataViewType.Map)("src",t.imgFolder+"map.svg",d.Xc)}}function Wt(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",105),2&t){const t=d.uc();d.Dc("title",t.paywallCommonStringsService.personalViewsText)("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("learnMore","https://docs.clickup.com/en/articles/3044734-personal-views")("amplitudeLabel","Personal Views")}}function qt(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",109),2&t){const t=d.uc(2);d.Dc("title",t.paywallCommonStringsService.formsViewText)("upgradeButtonText",t.paywallCommonStringsService.upgradeToUnlimitedText)("amplitudeLabel","Form View")}}function Xt(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",110),2&t){const t=d.uc(2);d.Dc("title",t.timelineViewPaywallTitleText)("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("amplitudeLabel","Timeline View")}}function Yt(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",111),2&t){const t=d.uc(2);d.Dc("title",t.workloadViewPaywallTitleText)("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("amplitudeLabel","Workload View")}}function Kt(t,e){if(1&t&&(d.bd(0,qt,1,3,"cu-paywall-popover",106),d.bd(1,Xt,1,3,"cu-paywall-popover",107),d.bd(2,Yt,1,3,"cu-paywall-popover",108)),2&t){const t=d.uc();d.Dc("ngIf",t.activeItem.id===t.DataViewType.Form),d.Ib(1),d.Dc("ngIf",t.activeItem.id===t.DataViewType.Timeline),d.Ib(1),d.Dc("ngIf",t.activeItem.id===t.DataViewType.Workload)}}const Zt=["*"];let Jt=(()=>{class t{constructor(t,e,i,n,o,a,r){this.store=t,this.modal=e,this.injector=i,this.actions$=n,this.router=o,this.commonStringsService=a,this.paywallCommonStringsService=r,this.itemsByContentType=Object(L.a)(E.Gb.map(t=>({id:t.defaultDataViewAPIPayload.type,title:t.defaultDataViewAPIPayload.name,contentType:t.contentType,description:t.description,previewImg:t.previewImg,beta:t.beta,new:t.new})),"contentType"),this.ViewContentType=$.o,this.DataViewType=$.i,this.UserRole=H.f,this.destroy$=new B.a,this.preventDocumentScroll=!1,this.onSelect=new d.o,this.onClose=new d.o,this.trackById=Object(j.d)("id"),this.activeItem=this.itemsByContentType[$.o.Tasks][0],this.imgFolder="./assets/images/views/",this.TeamPlan=F.f,this.flipMenu=!1,this.pinnedView=!1,this.personalView=!1,this.visible=!0,this.repositionFlag=!0,this.user$=this.store.select(z.getUser),this.isGuest$=this.store.select(z.isGuestTeam),this.selectedBoardGrouping={id:"status",title:"Status",icon:"activity-status",sortDirection:null},this.showGanttPaywall=!1,this.dataView$=this.store.select(X.qb),this.timelineViewPaywallTitleText=$localize`:@@paywall_title--timeline-view:Timeline View`,this.workloadViewPaywallTitleText=$localize`:@@paywall_title--workload-view:Workload View`}ngOnInit(){}ngOnChanges(t){if(t.canOnlyCreatePersonalViews&&this.canOnlyCreatePersonalViews&&(this.personalView=!0),t.defaultToPersonalView&&this.defaultToPersonalView&&(this.personalView=!0),t.isAllSpaces&&Object.values(this.itemsByContentType).forEach(t=>{t.forEach(t=>{t.id===$.i.Form&&(t.disabledTooltip=this.isAllSpaces?'Forms can\'t be added at the "Everything" level. Please go to a Space, Folder, or List to create a Form.':null)})}),t.openViewType&&this.openViewType){const t=this.itemsByContentType[$.o.Tasks].find(t=>t.id===this.openViewType)||this.itemsByContentType[$.o.Blank].find(t=>t.id===this.openViewType);t&&this.setActiveItem(t)}t.groupingItems&&this.resetBoardViewVars()}ngOnDestroy(){this.destroy$.next()}closeDropdown(){this.resetBoardViewVars(),this.defaultToPersonalView&&(this.personalView=!0),this.onClose.emit()}selectItem(t,e=!1){const i={name:this.viewNameInput&&""!==this.viewNameInput.nativeElement.value?this.viewNameInput.nativeElement.value:null,personalView:this.personalView,pinned:this.pinnedView};t.id===$.i.Board&&(i.grouping={collapsed:[],dir:1,field:this.isDataViewGroupType(this.selectedBoardGrouping.id)?this.selectedBoardGrouping.id:"cf_"+this.selectedBoardGrouping.id,ignore:!1}),t.disabledTooltip||this.store.select(z.getTeam).pipe(Object(N.a)(1)).subscribe(e=>{const n={[$.i.Form]:[F.f.UNLIMITED,F.f.BUSINESS,F.f.ENTERPRISE],[$.i.Timeline]:e.timeline_usage_exceeded?[F.f.BUSINESS,F.f.ENTERPRISE]:[F.f.FREE,F.f.UNLIMITED,F.f.BUSINESS,F.f.ENTERPRISE],[$.i.Map]:e.map_usage_exceeded?[F.f.UNLIMITED,F.f.BUSINESS,F.f.ENTERPRISE]:[F.f.FREE,F.f.UNLIMITED,F.f.BUSINESS,F.f.ENTERPRISE],[$.i.Workload]:e.workload_usage_exceeded?[F.f.BUSINESS,F.f.ENTERPRISE]:[F.f.FREE,F.f.UNLIMITED,F.f.BUSINESS,F.f.ENTERPRISE]};if(t.id!==$.i.Gantt||this.hasGanttAccess){if(!n[t.id]||n[t.id].includes(e.plan_id))this.onSelect.emit({id:t.id,options:i}),this.dropdown.close();else if(e.trial_count>=1||![H.f.ADMIN,H.f.OWNER].includes(e.role))this.paywallPopover.show();else if(t.id===$.i.Form){this.dropdown.close();const e=this.modal.openComponent(V.a,this.injector,{modifier:"cu-modal_fullwidth"});e.instance.featureTitle=this.paywallCommonStringsService.formsViewText,e.instance.description="Start your free trial of Unlimited so you can use Forms view. Plus you'll get:",e.instance.features=[{icon:"cu2-server",name:$localize`:@@common_unlimited-storage:Unlimited Storage`},{icon:"cu2-box",name:$localize`:@@common_box-view:Box view`},{icon:"cu2-infinity",name:$localize`:@@common_unlimited-cf-goals-and-portfolios:Unlimited custom fields, Goals & Portfolios`},{icon:"cu2-plus",name:'<a href="https://clickup.com/expandplans" target="_blank" class="cu-paywall-modal__feature-item-link">'+$localize`:@@common_more-incredible-features:Plus 20+ more incredible features`+"</a>"}],e.instance.image="./assets/images/paywall/form-view-flat.svg",e.instance.trialClick.pipe(Object(N.a)(1),Object(A.a)(this.modal.closeModal)).subscribe(()=>{this.modal.close(),this.actions$.pipe(Object(R.d)(Y.kl),Object(N.a)(1),Object(A.a)(this.destroy$)).subscribe(()=>{this.onSelect.emit({id:t.id,options:i})}),this.store.dispatch(new Y.Rk)})}else if(!(t.id!==$.i.Timeline&&t.id!==$.i.Workload||this.modal.currentModalInstance&&"timeline-paywall"===this.modal.currentModalInstance.name))if(this.team.plan_id===F.f.UNLIMITED)this.paywallPopover.show();else{this.dropdown.close();const e=this.modal.openComponent(G,this.injector,{modifier:"cu-modal_fullwidth",name:"timeline-paywall"});e.instance.dataViewType=t.id,e.instance.trialClick.pipe(Object(N.a)(1),Object(A.a)(this.modal.closeModal)).subscribe(()=>{this.modal.close(),this.actions$.pipe(Object(R.d)(Y.kl),Object(N.a)(1),Object(A.a)(this.destroy$)).subscribe(()=>{this.onSelect.emit({id:t.id,options:i})}),this.store.dispatch(new Y.Rk([],F.f.BUSINESS))})}}else this.checkGanttPaywall()})}setActiveItem(t){t.id!==$.i.Conversation||this.canOnlyCreatePersonalViews?this.defaultToPersonalView&&(this.personalView=!0):this.personalView=!1,this.showGanttPaywall=!1,t.disabledTooltip||(this.activeItem=t),setTimeout(()=>{this.viewNameInput&&this.viewNameInput.nativeElement.focus()},0)}open(){this.dropdown.open()}checkGanttPaywall(){1!==this.team.role&&2!==this.team.role||(this.isOwnerOrAdmin=!0),this.ownerEmailLink=`mailto:*${this.team.owner.email}*?subject=Please%20upgrade%20our%20ClickUp%20plan%20so%20I%20can%20use%20Gantt%20Charts&body=I'm%20trying%20to%20use%20Gantt%20Charts%20in%20ClickUp%20but%20can't%20because%20we%20are%20on%20the%20free%20plan.%0A%0ACould%20you%20please%20upgrade%20to%20Unlimited%20for%20our%20team?`,this.upgradeLink=["/",this.team.id,"settings","billing"].join("/"),this.showGanttPaywall=!0}dropdownOpen(){this.resetGroupingItems(),this.checkPositioning(),this.openViewType||(this.activeItem=this.itemsByContentType[$.o.Tasks][0]),this.showGanttPaywall=!1,setTimeout(()=>{this.viewNameInput&&this.viewNameInput.nativeElement.focus()},0)}checkPositioning(){if(!this.dropdownToggle&&!this.hostElement)return;let t=!1;(this.hostElement?this.hostElement.getBoundingClientRect():this.dropdownToggle.nativeElement.getBoundingClientRect()).left+650>window.innerWidth?(this.dropdown.placement=["bottom-right","auto"],this.flipMenu||(t=!0),this.flipMenu=!0):(this.dropdown.placement=["bottom-left","auto"],this.flipMenu&&(t=!0),this.flipMenu=!1),this.visible||(this.visible=!0,t=!0),t&&(this.repositionFlag=!this.repositionFlag)}docKeyDown(t){switch(t.which){case U.a.ARROW_UP:this.selectPrev();break;case U.a.ARROW_DOWN:this.selectNext();break;case U.a.ENTER:this.selectItem(this.activeItem)}}selectNext(){const t=this.itemsByContentType[$.o.Tasks].findIndex(t=>t.id===this.activeItem.id),e=this.itemsByContentType[$.o.Blank].findIndex(t=>t.id===this.activeItem.id);-1!==t&&(this.activeItem=t===this.itemsByContentType[$.o.Tasks].length-1?this.itemsByContentType[$.o.Blank][0]:this.itemsByContentType[$.o.Tasks][t+1]),-1!==e&&(this.activeItem=e===this.itemsByContentType[$.o.Blank].length-1||e===this.itemsByContentType[$.o.Blank].length-2&&this.isAllSpaces?this.itemsByContentType[$.o.Tasks][0]:this.itemsByContentType[$.o.Blank][e+1])}selectPrev(){const t=this.itemsByContentType[$.o.Tasks].findIndex(t=>t.id===this.activeItem.id),e=this.itemsByContentType[$.o.Blank].findIndex(t=>t.id===this.activeItem.id);-1!==t&&(this.activeItem=0===t?this.isAllSpaces?this.itemsByContentType[$.o.Blank][this.itemsByContentType[$.o.Blank].length-2]:this.itemsByContentType[$.o.Blank][this.itemsByContentType[$.o.Blank].length-1]:this.itemsByContentType[$.o.Tasks][t-1]),-1!==e&&(this.activeItem=0===e?this.itemsByContentType[$.o.Tasks][this.itemsByContentType[$.o.Tasks].length-1]:this.itemsByContentType[$.o.Blank][e-1])}checkPersonalViewPaywall(t){this.team.plan_id!==F.f.FREE&&this.team.plan_id!==F.f.UNLIMITED||(t.preventDefault(),t.stopPropagation(),this.personalViewPopover.show())}selectBoardGrouping(t){this.selectedBoardGrouping=t,this.groupingItems.forEach(e=>{e.checked=e.id===t.id})}isDataViewGroupType(t){return-1!==[$.c.Subcategory,$.c.Assignee,$.c.Priority,$.c.Status,$.c.Tag,$.c.DueDate,$.c.None].indexOf(t)}resetBoardViewVars(){var t;this.selectedBoardGrouping={id:"status",title:"Status",icon:"activity-status",sortDirection:null},null===(t=this.groupingItems)||void 0===t||t.forEach(t=>{t.sortDirection=null,t.checked="status"===t.id})}dropdownAddClick(t){"customField"===t.action&&this.openCreateCustomField()}openCreateCustomField(){this.dataView$.pipe(Object(N.a)(1)).subscribe(t=>{if(t&&t.parent){const e={type:Object(W.b)(t.parent.type),id:t.parent.id,name:t.name,access:t.permissions.editView},i=this.modal.openComponent(q.a,this.injector,{title:this.commonStringsService.manageCustomFieldText(e.name),dialogModifier:"cu-modal__dialog-custom-fields",preventExternalClick:!0,bodyModifier:"cu-modal__body_no-min-height",modifier:"cu-modal__max-index"});i.instance.closeOnCreate=!0,i.instance.setEntity(e),i.instance.startCreate()}})}resetGroupingItems(){this.groupingItems.forEach(t=>{"status"!==t.id&&(t.checked=!1),t.subitems&&t.subitems.forEach(t=>{t.checked=!1,t.sortIcon=!1})})}boardGroupOpen(){this.selectedBoardGrouping&&this.groupingItems.forEach(t=>{t.checked=t.id===this.selectedBoardGrouping.id,t.subitems&&t.subitems.forEach(t=>{t.checked=t.id===this.selectedBoardGrouping.id})})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(K.Store),d.Wb(Z.a),d.Wb(d.t),d.Wb(R.a),d.Wb(P.h),d.Wb(J.a),d.Wb(Q.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-data-view-add-dropdown"]],viewQuery:function(t,e){if(1&t&&(d.jd(ct,3),d.jd(lt,1),d.jd(ut,1),d.jd(dt,1),d.jd(ht,1),d.jd(pt,1)),2&t){let t;d.Qc(t=d.rc())&&(e.dropdown=t.first),d.Qc(t=d.rc())&&(e.viewNameInput=t.first),d.Qc(t=d.rc())&&(e.personalViewSelect=t.first),d.Qc(t=d.rc())&&(e.dropdownToggle=t.first),d.Qc(t=d.rc())&&(e.paywallPopover=t.first),d.Qc(t=d.rc())&&(e.personalViewPopover=t.first)}},hostAttrs:[1,"cu-data-view-add-dropdown"],inputs:{team:"team",preventDocumentScroll:"preventDocumentScroll",hasGanttAccess:"hasGanttAccess",isAllSpaces:"isAllSpaces",openViewType:"openViewType",hostElement:"hostElement",groupViews:"groupViews",canOnlyCreatePersonalViews:"canOnlyCreatePersonalViews",defaultToPersonalView:"defaultToPersonalView",groupingItems:"groupingItems"},outputs:{onSelect:"onSelect",onClose:"onClose"},features:[d.Gb],ngContentSelectors:Zt,decls:25,vars:10,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,d,h,p,f,g,m,v,b,_,w,y,k,x,S,T,C,D,I,P,M;return t=$localize`:@@forms_placeholder--enter-name␟bafe4efdd04c546e0bfe7303d13d617d4c1162f3␟6292793136870764429:Enter name...`,e=$localize`:@@common_task-views␟a2fae5b3f8de65930153ea06d686c4f172a503f7␟5829894472477597677: Task views `,i=$localize`:@@common_page-views␟552616ee992df6804ea690d58770f0fb8ff73fa1␟179075935011561862: Page views `,n=$localize`:@@common_beta␟76ce3d44573da6b333e2ea6ac15189526dcf76b3␟4534177949173440011: beta `,o=$localize`:@@common_new␟beaaf2e84ffdbceebb88b9c7b6ee86c13478b3da␟5232294842495474184: New `,a=$localize`:@@view_permissions--personal-view␟e88813958f8f347f8e59129182dac4c738f7503b␟1154685093208733050:Personal view`,r=$localize`:@@cu-data-view-add-dropdown__group-board-by␟b3a876d5d1a8807806dc9574c00d1bc975959c8a␟2811993162010215858:GROUP BOARD BY`,s=$localize`:@@common_status␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,c=$localize`:@@common_default-1␟deca31fc7adad40d00bd63881d0c17124cd05beb␟6855462350544488601:default`,l=$localize`:@@common_pin-view␟895f6ed877f156d82de380a0e168ced96e81ce3c␟247026025035397255:Pin view`,u=$localize`:@@cu-data-view-add-dropdown__trial-form-view␟73917ea1e01150a80a05a61612ce4f3030d896fd␟5898365618380297257:Trial Form View`,d=$localize`:@@cu-data-view-add-dropdown__trial-box-view␟1bac5b6b2697616530d145b78572125a6105dcf3␟1786412904693968918:Trial Box View`,h=$localize`:@@common_add-view␟9a8c17c910d649961afa47d68f4c6085a72b48e5␟6038679635145965293:Add View`,p=$localize`:@@common_learn-more--gantt␟7c328d7d3f190921c869646f583f4352ac292704␟2046870924962934969:Learn more about Gantt charts`,f=$localize`:@@common_upgrade-to-use-gantt--admin␟53c494a05751173d96ff469d92c83c007ba61c5f␟985865028475925862: To get unlimited use of Gantt charts and many other features, consider ${"\ufffd#2\ufffd"}:START_LINK:upgrading${"\ufffd/#2\ufffd"}:CLOSE_LINK: for $5/month. `,g=$localize`:@@common_upgrade-to-use-gantt--member␟fca5464d321a8bbf7b8e4ed541ec63ff05426eb9␟1172632086718165741: To get unlimited use of Gantt charts and many other features, ${"\ufffd#2\ufffd"}:START_LINK:ask your Workspace admin${"\ufffd/#2\ufffd"}:CLOSE_LINK: to upgrade ClickUp. `,m=$localize`:@@common_free-100-gantt-use-expired␟2ea7550acfb048f4658b34f9c4fd603737701f8d␟2276567196224802540: Your 100 uses of gantt has expired. `,v=$localize`:@@common_upgrade␟4b7e1482fc5f13f344986134824df60cdf5838ed␟982684984092904321: Upgrade `,b=$localize`:@@common_cancel␟17a9d3860d9ad593dd09a9f934e03999d9e76a7a␟5404873161894324483: Cancel `,_=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,w=$localize`:@@paywall_text--personal-views␟cfc68ed3817ae0c6c3ae4cf8768ad34eec13a4dd␟6721321494800710974:Upgrade to Business to make Personal views.`,y=$localize`:@@paywall_email-subject--protect-views␟1f7477b8f6345498e9ca3f41af1faf5d65aabdaf␟5562490287161458785:Please upgrade ClickUp so we can protect views`,k=$localize`:@@common_plans--unlimited␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,x=$localize`:@@paywall_text--unlimited-features␟4238510b16622f7f510cea87abc8763ef6692081␟920804857663251175:Upgrade to get this and many more Unlimited features.`,S=$localize`:@@paywall_email-subject--forms-view␟bd46c336135936676ffd439f84cca882f6d84b0d␟4651387854806359618:Please upgrade ClickUp so we can use Forms view`,T=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,C=$localize`:@@paywall_text--business-features␟95d72c6f223792033b7d92e694f096b1d96d975b␟3178463575610512972:Upgrade to get this and many more Business features.`,D=$localize`:@@paywall_email-subject--timeline-view␟9d3c122a17162c169c50efd3087366cbf881a3cf␟7922288416891733893:Please upgrade ClickUp so we can use Timeline view`,I=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,P=$localize`:@@paywall_text--business-features␟95d72c6f223792033b7d92e694f096b1d96d975b␟3178463575610512972:Upgrade to get this and many more Business features.`,M=$localize`:@@paywall_email-subject--workload-view␟887fa34f49433e30858a2eeec59aa47c1b89348b␟6217996258773707601:Please upgrade ClickUp so we can use Workload view`,[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownCloseOthersOnOpen","dropdownRepositionFlag","dropdownVisible","dropdownHostElement","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle",""],["dropdownToggle",""],[3,"class","keydown",4,"cuDropdownMenu"],["viewName",""],["viewList",""],["taskViews",""],["pageViews",""],["description",""],["ganttPaywall",""],["previewImages",""],["paywallMakePersonalTemplate",""],["paywallTemplate",""],[3,"keydown"],[1,"cu-data-view-add-dropdown__menu-inner"],[3,"ngTemplateOutlet"],[1,"cu-data-view-add-dropdown__container"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"cu-data-view-add-dropdown__view-name"],[3,"icon"],["placeholder",t],["viewNameInput",""],[1,"cu-data-view-add-dropdown__views"],[1,"cu-data-view-add-dropdown__views-header"],e,i,[1,"cu-data-view-add-dropdown__views-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"class","active","cuTooltip","cu-data-view-add-dropdown__views-item-disabled","click",4,"ngIf"],[3,"cuTooltip","click"],[1,"cu-data-view-add-dropdown__views-item-icon",3,"icon"],[1,"cu-data-view-add-dropdown__views-item-title"],["class","cu-data-view-add-dropdown__views-item-title-beta",4,"ngIf"],["class","cu-data-view-add-dropdown__views-item-title-new",4,"ngIf"],[1,"cu-data-view-add-dropdown__views-item-title-beta"],n,[1,"cu-data-view-add-dropdown__views-item-title-new"],o,["class","cu-data-view-add-dropdown__views-item","tooltipLifeTime","15000",3,"active","cu-data-view-add-dropdown__views-item-disabled","cuTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["tooltipLifeTime","15000",1,"cu-data-view-add-dropdown__views-item",3,"cuTooltip","click"],[1,"cu-data-view-add-dropdown__description"],[1,"cu-data-view-add-dropdown__description-content"],[1,"cu-data-view-add-dropdown__description-title"],[4,"ngIf"],[1,"cu-data-view-add-dropdown__description-text"],["class","cu-data-view-add-dropdown__description-board-groups",4,"ngIf"],[1,"cu-data-view-add-dropdown__description-actions"],[1,"cu-data-view-add-dropdown__description-actions-checkboxes"],["containerClass","popover_white popover_no-max-width popover_no-padding","triggers","","container","body",1,"cu-data-view-add-dropdown__description-actions-checkboxes-item",3,"popover","outsideClick","placement","click"],["personalViewPopover","bs-popover"],[3,"cuTooltip"],["name","personal-view","type","checkbox",3,"value","ngModel","checked","disabled","ngModelChange"],["personalViewSelect",""],a,["class","cu-data-view-add-dropdown__description-actions-checkboxes-item",4,"ngIf"],["containerClass","popover_white popover_no-max-width popover_no-padding","placement","auto","outsideClick","true","container","body","triggers","",3,"popover","click"],["paywallPopover","bs-popover"],[4,"ngIf","ngIfElse"],["trialFormViewTmpl",""],["trialBoxViewTmpl",""],["addViewTmpl",""],[1,"cu-data-view-add-dropdown__description-board-groups"],[1,"cu-data-view-add-dropdown__description-board-groups-left"],r,[3,"menuModifier","items","dropdownPlacement","onSelect","onAddClick","onOpen"],[1,"cu-data-view-add-dropdown__description-board-groups-right"],[1,"cu-data-view-add-dropdown__description-board-groups-right-icon",3,"icon"],["icon","cu2-angle-down",1,"cu-data-view-add-dropdown__description-board-groups-right-dropdown"],s,c,[1,"cu-data-view-add-dropdown__description-actions-checkboxes-item"],["name","pinned-view","type","checkbox",3,"value","ngModel","checked","ngModelChange"],l,[4,"ngTemplateOutlet"],u,d,h,[1,"gantt-no-access-dropdown"],["src","./assets/images/gantt.png","alt","",1,"gantt-paywall-img"],[1,"gantt-no-access-dropdown__title"],["class","gantt-no-access-dropdown__text",4,"ngIf"],[1,"gantt-no-access-dropdown__text"],["href","https://docs.clickup.com/features/gantt-view"],p,f,[1,"gantt-no-access-dropdown__text-upgrade",3,"href"],g,["target","_blank",3,"href"],m,[1,"gantt-no-access-dropdown__buttons"],[1,"cu-btn","cu-btn_md","paywall-btn__gantt-free-trial",3,"routerLink"],v,[1,"paywall-btn__gantt-free-trial-cancel",3,"click"],b,[1,"cu-data-view-add-dropdown__description-board",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-box",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-calendar",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-chat",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-doc",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-embed",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-form",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-gantt",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description-list",3,"hidden","src"],[1,"cu-data-view-add-dropdown__description_map",3,"hidden","src"],["badge",_,"text",w,"image","./assets/images/components/paywall-popover/personal-view.png","emailSubject",y,3,"title","upgradeButtonText","learnMore","amplitudeLabel"],["badge",k,"text",x,"emailSubject",S,3,"title","upgradeButtonText","amplitudeLabel",4,"ngIf"],["badge",T,"text",C,"emailSubject",D,3,"title","upgradeButtonText","amplitudeLabel",4,"ngIf"],["badge",I,"text",P,"emailSubject",M,3,"title","upgradeButtonText","amplitudeLabel",4,"ngIf"],["badge",k,"text",x,"emailSubject",S,3,"title","upgradeButtonText","amplitudeLabel"],["badge",T,"text",C,"emailSubject",D,3,"title","upgradeButtonText","amplitudeLabel"],["badge",I,"text",P,"emailSubject",M,3,"title","upgradeButtonText","amplitudeLabel"]]},template:function(t,e){if(1&t&&(d.Cc(),d.cc(0,"div",0,1),d.qc("dropdownOpen",function(){return e.dropdownOpen()})("dropdownClose",function(){return e.closeDropdown(),e.checkPositioning()}),d.cc(2,"div",2,3),d.vc(4,"async"),d.Bc(5),d.bc(),d.bd(6,mt,8,11,"div",4),d.bc(),d.bd(7,vt,4,1,"ng-template",null,5,d.cd),d.bd(9,bt,7,2,"ng-template",null,6,d.cd),d.bd(11,xt,2,2,"ng-template",null,7,d.cd),d.bd(13,Tt,2,2,"ng-template",null,8,d.cd),d.bd(15,zt,29,24,"ng-template",null,9,d.cd),d.bd(17,Gt,6,2,"ng-template",null,10,d.cd),d.bd(19,Ht,15,30,"ng-template",null,11,d.cd),d.bd(21,Wt,1,4,"ng-template",null,12,d.cd),d.bd(23,Kt,3,3,"ng-template",null,13,d.cd)),2&t){let t=null;d.Dc("dropdownCloseOnInsideClick",!1)("dropdownCloseOthersOnOpen",!0)("dropdownRepositionFlag",e.repositionFlag)("dropdownVisible",e.visible)("dropdownHostElement",e.hostElement),d.Ib(2),d.Mb("cu-dropdown__toggle cu-data-view-add-dropdown__toggle layout-",null==(t=d.wc(4,8,e.user$))?null:t.dashboard,"")}},directives:[tt.b,et.a,it.a,n.x,n.q,nt.a,n.p,ot.a,at.c,D.b,D.p,D.s,rt.a,P.k,st.a],pipes:[n.b,n.n],styles:['.cu-data-view-add-dropdown{align-self:flex-end}.cu2-views-bar_v6 .cu-data-view-add-dropdown,.cu-dashboard__body_v2 .cu-data-view-add-dropdown{align-self:center}.cu-data-view-add-dropdown__toggle.layout-4,.cu-data-view-add-dropdown__toggle.layout-5{margin-left:2px}.cu-data-view-add-dropdown__container{display:flex;position:relative}.cu-data-view-add-dropdown__menu{overflow:visible}.cu-data-view-add-dropdown__menu-inner{max-height:calc(100vh - 20px);overflow-y:auto}.cu-data-view-add-dropdown__menu-inner.flipped .cu-data-view-add-dropdown__view-name{left:auto;right:0}.cu-data-view-add-dropdown__menu-inner.flipped .cu-data-view-add-dropdown__description{order:0;border-radius:6px 0 0 6px}.cu-data-view-add-dropdown__menu-inner.flipped .cu-data-view-add-dropdown__views{order:1;border-radius:0 0 6px 0}.cu-data-view-add-dropdown__menu.layout-2{margin-top:8px!important}.cu-data-view-add-dropdown__menu.layout-4,.cu-data-view-add-dropdown__menu.layout-5{margin-top:3px!important}.cu-data-view-add-dropdown__view-name{width:165px;height:46px;position:absolute;left:0;top:-45px;border-radius:6px 6px 0 0;border:1px solid #e9ebf0;background-color:#fff;padding:0 19px;display:flex;align-items:center;box-shadow:0 1px 10px 0 rgba(0,0,0,.25)}.dark-theme .cu-data-view-add-dropdown__view-name{background-color:#384047;border-color:#1e272e}.cu-data-view-add-dropdown__view-name .icon{height:14px;width:14px;fill:#292d34;stroke:#292d34;stroke-width:2px;margin-right:9px}.dark-theme .cu-data-view-add-dropdown__view-name .icon{fill:#d5d6d7;stroke:#d5d6d7}.cu-data-view-add-dropdown__view-name input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;max-width:calc(100% - 23px);border:none;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__view-name input{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__view-name input{background-color:#384047;color:#d5d6d7;box-shadow:none}.cu-data-view-add-dropdown__view-name input:-ms-input-placeholder{color:#b9bec7}.cu-data-view-add-dropdown__view-name input::placeholder{color:#b9bec7}.cu-data-view-add-dropdown__views{min-width:165px;padding:18px 0 4px;background-color:#fff;z-index:1;border:1px solid #e9ebf0;border-top:none;border-radius:0 0 0 6px}.dark-theme .cu-data-view-add-dropdown__views{background-color:#384047;border-color:#1e272e}.cu-data-view-add-dropdown__views-header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d;opacity:.6;text-transform:uppercase;padding:0 19px 15px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__views-header{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__views-header{color:#828588}.cu-data-view-add-dropdown__views-list{margin-bottom:14px;padding:0 10px}.cu-data-view-add-dropdown__views-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;display:flex;border-radius:4px;padding:9px;cursor:pointer;margin-bottom:6px}.cu-data-view-add-dropdown__views-item.cu-data-view-add-dropdown__views-item-disabled{cursor:default}.cu-data-view-add-dropdown__views-item.cu-data-view-add-dropdown__views-item-disabled .cu-data-view-add-dropdown__views-item-title,.cu-data-view-add-dropdown__views-item.cu-data-view-add-dropdown__views-item-disabled .icon{opacity:.3}.cu-data-view-add-dropdown__views-item.cu-data-view-add-dropdown__views-item-disabled:hover{background-color:#fff}.dark-theme .cu-data-view-add-dropdown__views-item.cu-data-view-add-dropdown__views-item-disabled:hover{background-color:#384047}.cu-data-view-add-dropdown__views-item:last-of-type{margin-bottom:0}.cu-data-view-add-dropdown__views-item.active{background-color:var(--theme-main-color)}.cu-data-view-add-dropdown__views-item.active .icon{fill:#fff;stroke:#fff}.cu-data-view-add-dropdown__views-item.active .cu-data-view-add-dropdown__views-item-title,.cu-data-view-add-dropdown__views-item.active .cu-data-view-add-dropdown__views-item-title-beta{color:#fff}.cu-data-view-add-dropdown__views-item.active .cu-data-view-add-dropdown__views-item-title-new{color:#7b68ee;background:#fff}@supports (--theme-main-color:#7b68ee){.cu-data-view-add-dropdown__views-item.active .cu-data-view-add-dropdown__views-item-title-new{color:var(--theme-main-color)}}.cu-data-view-add-dropdown__views-item.active:hover{background-color:var(--theme-main-color)}.cu-data-view-add-dropdown__views-item:hover{background-color:rgba(233,235,240,.4)}.cu-data-view-add-dropdown__views-item-calendar{margin-bottom:11px}.cu-data-view-add-dropdown__views-item-calendar:after{content:"";display:block;position:absolute;width:100%;height:1px;left:0;bottom:-6px;background:#e9ebf0}.dark-theme .cu-data-view-add-dropdown__views-item-calendar:after{background:#1e272e}.cu-data-view-add-dropdown__views-item-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;height:14px;width:14px;fill:#292d34;stroke:#292d34;stroke-width:2px;margin-right:9px}.dark-theme .cu-data-view-add-dropdown__views-item-icon{fill:#d5d6d7;stroke:#d5d6d7}.cu-data-view-add-dropdown__views-item-title{display:flex;align-items:center;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__views-item-title{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__views-item-title{color:#d5d6d7}.cu-data-view-add-dropdown__views-item-title-beta{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;margin:-7px 0 0 3px;color:#7c828d}.dark-theme .cu-data-view-add-dropdown__views-item-title-beta{color:#abaeb0}.cu-data-view-add-dropdown__views-item-title-new{background:#7b68ee;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;margin:0 0 -1px 3px;color:#fff;padding:3px 3px 2px;border-radius:3px}@supports (--theme-main-color:#7b68ee){.cu-data-view-add-dropdown__views-item-title-new{background:var(--theme-main-color)}}.cu-data-view-add-dropdown__description{min-width:485px;padding:36px 0;background-color:#fafbfc;border-radius:0 6px 6px 0;display:flex;justify-content:center;flex-direction:column}.dark-theme .cu-data-view-add-dropdown__description{background-color:#2b343b}.cu-data-view-add-dropdown__description img{width:430px;min-height:198px;height:auto;margin:0 auto 35px}.cu-data-view-add-dropdown__description img.cu-data-view-add-dropdown__description{transform:none}.cu-data-view-add-dropdown__description img.cu-data-view-add-dropdown__description-chat{width:auto;height:192px}.cu-data-view-add-dropdown__description img.cu-data-view-add-dropdown__description-form{width:295px}.cu-data-view-add-dropdown__description img.cu-data-view-add-dropdown__description-calendar{width:422px}.cu-data-view-add-dropdown__description img.cu-data-view-add-dropdown__description_map{width:435px;height:198px}.cu-data-view-add-dropdown__description-content{padding:0 36px}.cu-data-view-add-dropdown__description-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:18px;line-height:1;color:#292d34;padding-bottom:15px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-title{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__description-title{color:#d5d6d7}.cu-data-view-add-dropdown__description-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:22px;color:#292d34;padding-bottom:15px;opacity:.8}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-text{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__description-text{color:#d5d6d7}.cu-data-view-add-dropdown__description-board-groups{display:flex;align-items:center;justify-content:space-between;margin:15px 0 30px}.cu-data-view-add-dropdown__description-board-groups-left{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-board-groups-left{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__description-board-groups-left{color:#828588}.cu-data-view-add-dropdown__description-board-groups-right{background:#fff;border:1px solid #e9ebf0;border-radius:3px;width:270px;display:flex;align-items:center;padding:0 14px;height:32px}.dark-theme .cu-data-view-add-dropdown__description-board-groups-right{background:#384047;border-color:#1e272e}.cu-data-view-add-dropdown__description-board-groups-right-icon{fill:#292d34;width:14px;height:14px;margin-right:8px}.dark-theme .cu-data-view-add-dropdown__description-board-groups-right-icon{fill:#b9bec7}.cu-data-view-add-dropdown__description-board-groups-right span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#292d34;flex-grow:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-board-groups-right span{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__description-board-groups-right span{color:#d5d6d7}.cu-data-view-add-dropdown__description-board-groups-right span em{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:1;font-style:italic;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-board-groups-right span em{font-family:var(--global-font-support)}}.cu-data-view-add-dropdown__description-board-groups-right-dropdown{fill:#b9bec7;width:12px;height:12px}.cu-data-view-add-dropdown__description-board-groups-menu .cu-dropdown-list-item__sort{display:none}.cu-data-view-add-dropdown__description-actions{display:flex;align-items:center;justify-content:space-between}.cu-data-view-add-dropdown__description-actions-checkboxes{display:flex;align-items:center}.cu-data-view-add-dropdown__description-actions-checkboxes-item.cu-data-view-add-dropdown__description-actions-checkboxes-item-paywalled{opacity:.4}.cu-data-view-add-dropdown__description-actions-checkboxes-item:not(:first-child){margin-left:25px}.cu-data-view-add-dropdown__description-actions-checkboxes-item label{cursor:pointer;position:relative}.cu-data-view-add-dropdown__description-actions-checkboxes-item label:hover span:before{border-color:var(--theme-main-color)}.cu-data-view-add-dropdown__description-actions-checkboxes-item input{display:none}.cu-data-view-add-dropdown__description-actions-checkboxes-item input:checked+span:after{background-color:var(--theme-main-color)}.cu-data-view-add-dropdown__description-actions-checkboxes-item span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:#292d34;opacity:.8;padding-left:30px;position:relative;height:18px;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-actions-checkboxes-item span{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-add-dropdown__description-actions-checkboxes-item span{color:#d5d6d7}.cu-data-view-add-dropdown__description-actions-checkboxes-item span:before{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";width:18px;height:18px;border-radius:3px;border:1px solid #b9bec7;position:absolute;display:block;left:0;top:0;background-color:#fff}.cu-data-view-add-dropdown__description-actions-checkboxes-item span:before:hover{transition:none}.dark-theme .cu-data-view-add-dropdown__description-actions-checkboxes-item span:before{background-color:#384047;border-color:#1e272e}.cu-data-view-add-dropdown__description-actions-checkboxes-item span:after{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";width:10px;height:10px;border-radius:3px;position:absolute;display:block;left:4px;top:0;bottom:0;margin:auto 0}.cu-data-view-add-dropdown__description-actions-checkboxes-item span:after:hover{transition:none}.cu-data-view-add-dropdown__description-actions-add{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;background-color:var(--theme-main-color);padding:0 24px;height:36px;display:flex;justify-content:center;line-height:36px;border-radius:4px;color:#fff;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description-actions-add{font-family:var(--global-font-support)}}.cu-data-view-add-dropdown__description-actions-add:hover{background-color:var(--theme-main-color-dark)}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown .gantt-paywall-img{margin-bottom:20px;display:block}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__title{text-align:center;font-size:20px}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__buttons{display:flex;justify-content:center;align-items:center;margin-top:10px}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__buttons .paywall-btn__gantt-free-trial-cancel{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1;color:#fd71af;cursor:pointer;margin-left:15px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__buttons .paywall-btn__gantt-free-trial-cancel{font-family:var(--global-font-support)}}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:16px;text-align:center;padding-bottom:10px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__text{font-family:var(--global-font-support)}}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__text a{color:var(--theme-main-color)}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown__text a:hover{text-decoration:underline}.cu-data-view-add-dropdown__description .gantt-no-access-dropdown{width:100%!important}'],encapsulation:2,changeDetection:0}),t})();var Qt=i("lJxs"),te=i("/uUt"),ee=i("zp1y");const ie=$localize`:@@common_unprotect-view-to-make-changes:Unprotect this view first to make changes`;var ne=i("x1J0"),oe=i("M398"),ae=i("EtbL"),re=i("SA+E"),se=i("TAnz"),ce=i("hmfO");const le=["shareTemplate"],ue=["dropdownOptions"],de=["newTabTemplate"],he=["titleTemplate"];function pe(t,e){1&t&&d.Xb(0,"div",17)}function fe(t,e){1&t&&d.Xb(0,"div",18)}function ge(t,e){1&t&&d.Xb(0,"div",19)}function me(t,e){1&t&&d.Xb(0,"div",20)}function ve(t,e){if(1&t&&d.Xb(0,"div",21),2&t){const t=d.uc(2);d.Dc("icon","cu2-view-"+(null==t.item?null:t.item.viewType))}}function be(t,e){if(1&t&&(d.cc(0,"div",22),d.vc(1,"trustStyle"),d.bc()),2&t){const t=d.uc(2);d.ad("background-image",d.wc(1,2,"url('"+t.item.embed_settings.favicon+"')"))}}function _e(t,e){if(1&t){const t=d.dc();d.cc(0,"a",9),d.qc("click",function(){return d.Uc(t),d.uc().onResetViewState.emit()}),d.vc(1,"dataViewLink"),d.bd(2,pe,1,0,"div",10),d.cc(3,"div",11),d.bd(4,fe,1,0,"div",12),d.bd(5,ge,1,0,"div",13),d.bd(6,me,1,0,"div",14),d.bd(7,ve,1,1,"div",15),d.bd(8,be,2,4,"div",16),d.bc(),d.bc()}if(2&t){const t=d.uc();d.Ob("cu-data-view-item__no-name",!(null!=t.item&&t.item.name)),d.Dc("routerLink",d.wc(1,10,t.item))("cuDraggable",!1),d.Ib(2),d.Dc("ngIf",null==t.item?null:t.item.pinned),d.Ib(2),d.Dc("ngIf",(null==t.item?null:t.item.default)&&((null==t.item?null:t.item.viewType)===t.DataViewType.Doc||(null==t.item?null:t.item.viewType)===t.DataViewType.Embed)),d.Ib(1),d.Dc("ngIf",null==t.item?null:t.item.locked),d.Ib(1),d.Dc("ngIf",null==t.item?null:t.item.pinned),d.Ib(1),d.Dc("ngIf",!(null!=t.item&&null!=t.item.embed_settings&&t.item.embed_settings.favicon)),d.Ib(1),d.Dc("ngIf",null==t.item||null==t.item.embed_settings?null:t.item.embed_settings.favicon)}}function we(t,e){1&t&&d.Xb(0,"div",28)}function ye(t,e){1&t&&(d.cc(0,"div",29),d.dd(1," (required) "),d.bc())}const ke=function(t,e){return{"cu-data-view-item__name_editing":t,"cu-data-view-item__name_not-empty":e}};function xe(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",23),d.bd(2,we,1,0,"div",24),d.cc(3,"cu-editable",25),d.qc("onChange",function(e){return d.Uc(t),d.uc().rename(e)})("onCancel",function(){return d.Uc(t),d.uc().editing=!1}),d.bc(),d.cc(4,"div",26),d.dd(5),d.bc(),d.bc(),d.bd(6,ye,2,0,"div",27),d.Zb()}if(2&t){const t=d.uc();d.Ib(1),d.Dc("ngClass",d.Ic(12,ke,t.editing,null==t.item?null:t.item.name))("cuTooltip",null==t.item?null:t.item.name)("tooltipDisabledIfTextNotTruncated",!0),d.Ib(1),d.Dc("ngIf",!(t.editing||(null==t.item?null:t.item.visibility)!==t.DataViewVisibility.Private||null!=t.item&&t.item.defaultStandardView)),d.Ib(1),d.Ec("placeholder",8===(null==t.item?null:t.item.viewType)?"Topic":"Na\ufeffme"),d.Dc("text",null==t.item?null:t.item.name)("editing",t.editing)("autosize",!1)("allowEmpty",!0)("selectText",t.editingOnInit),d.Ib(2),d.fd(" ",(null==t.item?null:t.item.name)||(t.forShowMore||t.grouped?t.dataViewTypeTitle[null==t.item?null:t.item.viewType]:"")," "),d.Ib(1),d.Dc("ngIf",t.grouped&&(null==t.item?null:t.item.defaultStandardView)&&!t.editing&&!t.item.canDeleteStandardView)}}function Se(t,e){if(1&t){const t=d.dc();d.cc(0,"div",30),d.qc("click",function(){return d.Uc(t),d.uc().pinView()}),d.bc()}}function Te(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",31,32),d.qc("onSelect",function(e){return d.Uc(t),d.uc().selectAction(e)})("onCheck",function(e){return d.Uc(t),d.uc().checkItem(e)})("onClose",function(){d.Uc(t);const e=d.uc();return e.newView=!1,e.onToggleMenu.emit(!1)})("onOpen",function(){return d.Uc(t),d.uc().onToggleMenu.emit(!0)}),d.vc(2,"async"),d.cc(3,"div",33),d.qc("click",function(){return d.Uc(t),d.uc().fetchView()}),d.bc(),d.bc()}if(2&t){const t=d.uc();d.Dc("title",t.newView?t.newViewText:t.viewOptionsText)("items",t.newView?t.newViewItems:t.items)("dropdownCloseOnModal",!0)("titleItems",t.newView?null:t.titleItems)("titleTemplate",d.wc(2,9,t.titleTemplate$))("dropdownHostElement",t.elementRef.nativeElement)("dropdownListToolTipModifier","tooltip_medium")("dropdownCloseOthersOnOpen",!t.grouped&&!t.forShowMore)("showCloseButton",t.newView)}}function Ce(t,e){1&t&&(d.cc(0,"span",37),d.gc(1,38),d.bc())}function De(t,e){1&t&&d.gc(0,42)}function Ie(t,e){if(1&t&&d.gc(0,43),2&t){const t=d.uc(3);d.kc(null==t.item.members?null:t.item.members.length),d.hc(0)}}function Pe(t,e){if(1&t&&(d.cc(0,"span",39),d.bd(1,De,1,0,"ng-template",40),d.bd(2,Ie,1,1,"ng-template",41),d.bc()),2&t){const t=d.uc(2);d.Dc("ngPlural",null==t.item.members?null:t.item.members.length)}}function Me(t,e){if(1&t&&(d.ac(0),d.gc(1,34),d.Zb(),d.dd(2,": "),d.bd(3,Ce,2,0,"span",35),d.bd(4,Pe,3,1,"span",36)),2&t){const t=d.uc();d.Ib(3),d.Dc("ngIf",t.item.visibility===t.DataViewVisibility.Public),d.Ib(1),d.Dc("ngIf",t.item.visibility!==t.DataViewVisibility.Public)}}function Oe(t,e){if(1&t){const t=d.dc();d.cc(0,"div",44),d.qc("click",function(){return d.Uc(t),d.uc().editViewSettings()}),d.gc(1,45),d.bc()}}function $e(t,e){if(1&t&&(d.cc(0,"a",46),d.cc(1,"span",47),d.Xb(2,"span",48),d.cc(3,"span",49),d.gc(4,50),d.bc(),d.bc(),d.bc()),2&t){const t=d.uc();d.Dc("href",t.item.embed_settings.url,d.Xc),d.Ib(2),d.Dc("icon","new-tab")}}var je=function(t){return t.Rename="rename",t.Default="default",t.AddFavorite="add favorite",t.RemoveFavorite="remove favorite",t.Copy="copy",t.CopyPrivate="copyPrivate",t.Lock="lock",t.LockSettings="lockSettings",t.Remove="remove",t.Move="move",t.Share="share",t.ShareViaLink="shareViaLink",t.ShareViaLinkSettings="shareViaLinkSettings",t.Me="me",t.EditCode="edit code",t.Reset="reset",t.CopyLinkToClipboard="copy link to clipboard",t.HelpInfo="help-info",t.AutoSave="auto save",t.Private="private",t.UseTemplate="useTemplate",t.OpenUrl="open-url",t.Save="save",t.Pin="pin",t}({});const Le={id:je.Rename,title:$localize`:@@common_rename:Rename`,icon:"cu2-rename"},Ee={id:"move",title:$localize`:@@common_move:Move`,icon:"cu2-move"},Ne={id:je.Default,title:$localize`:@@cu-data-view-item__menu-item_default-for-everyone:Default for everyone`,icon:"cu2-home",checkType:"switch",helpUrl:"https://docs.clickup.com/clickup-2-0/default-view"},Ae={id:je.Lock,title:$localize`:@@common_protect-view:Protect view`,icon:"cu2-shield",checkType:"switch",helpUrl:"https://docs.clickup.com/clickup-2-0/freeze-layout",customClass:"cu-data-view-item__lock"},Ve={id:je.LockSettings,title:"",customClass:"cu-data-view-item__lock-settings"},ze={id:je.Private,title:$localize`:@@view_permissions--personal-view:Personal view`,checkType:"switch",icon:"cu2-lock2",helpUrl:"https://docs.clickup.com/clickup-2-0/personal-views"},Fe={id:je.ShareViaLink,title:$localize`:@@common_share-via-link:Share via link`,checkType:"switch",icon:"share"},Be={id:je.ShareViaLinkSettings,title:$localize`:@@cu-data-view-item__menu-item_link-settings:Link settings`,customClass:"cu-data-view-item__link-settings"},Re={id:je.Me,title:$localize`:@@cu-data-view-item__menu-item_default-me-mode:Default to Me mode`,icon:"cu2-me",checkType:"switch",tooltip:$localize`:@@cu-data-view-item__menu-item-tooltip_default-me-mode:By default, only show tasks assigned to you. This setting applies to everyone that visits this view.`,tooltipDelay:500,tooltipLifeTime:15e3},Ue={id:je.Pin,title:$localize`:@@common_pin-view:Pin view`,icon:"cu2-thumbtack-light",checkType:"switch",tooltip:$localize`:@@cu-data-view-item__menu-item-tooltip_pin-view:Pin this view to always see it towards the front of the view bar`,tooltipDelay:500,tooltipLifeTime:15e3},Ge={id:je.CopyLinkToClipboard,title:$localize`:@@common_copy-url:Copy URL`,icon:"cu2-copy-link2"},He={id:je.AddFavorite,title:$localize`:@@common_add-to-favorites:Add to Favorites`,icon:"cu2-star2"},We={id:je.RemoveFavorite,title:$localize`:@@common_remove-from-favorites:Remove from Favorites`,icon:"cu2-star2"},qe={id:je.Share,title:$localize`:@@cu-data-view-item__menu-item_edit-perms:Edit permissions`,icon:"cu2-user-lock"},Xe={id:je.Copy,title:$localize`:@@cu-data-view-item__menu-item_copy-new-view:Copy as new view`,icon:"copy"},Ye={id:je.HelpInfo,title:$localize`:@@cu-data-view-item__menu-item_view-required:This view is required.`,customClass:"cu-dropdown-list-item_is-label",helpUrl:"https://docs.clickup.com/clickup-2-0/required-views"},Ke={id:je.Remove,title:$localize`:@@cu-data-view-item__menu-item_delete-view:Delete view`,icon:"cu2-trash"},Ze={id:je.EditCode,title:$localize`:@@cu-data-view-item__menu-item_edit-code:Edit code`,icon:"cu2-code"},Je={id:je.OpenUrl,title:$localize`:@@common_open-in-new-tab:Open in new tab`,icon:"new-tab"},Qe={id:je.Reset,title:$localize`:@@cu-data-view-item__menu-item_reset-view-default:Reset view to defaults`,icon:"cu2-power-off"},ti={id:je.AutoSave,title:$localize`:@@common_autosave-view:Autosave view`,icon:"cu2-save2",checkType:"switch",tooltip:$localize`:@@cu-data-view-item__menu-item-tooltip_autosave-view:Autosave will automatically save any layout changes you make to this view. Each user turns this on independently, but changes saved by Autosave will be seen by everyone.`,tooltipDelay:500,tooltipLifeTime:15e3};let ei=(()=>{class t{constructor(t,e,i,n){this.ngZone=t,this.store=e,this.elementRef=i,this.commonStringsService=n,this.showTitle=!0,this.grouped=!1,this.editingOnInit=!1,this.cancelEditingOnInit=!1,this.isFavorite=!1,this.twoRows=!1,this.groupViews=!1,this.forShowMore=!1,this.canDelete=!0,this.isDarker=!1,this.onResetViewState=new d.o,this.onSelect=new d.o,this.onEdit=new d.o,this.onAfterViewInit=new d.o,this.onEditViewSettings=new d.o,this.onToggleMenu=new d.o,this.onFetchView=new d.o,this.onClearLastCreated=new d.o,this.items=[],this.titleItems=[],this.newViewItems=[],this.editing=!1,this.newView=!1,this.DataViewVisibility=$.j,this.DataViewType=$.i,this.UserRole=H.f,this.dataViewTypeTitle=$.s,this.team$=this.store.select(z.getTeam),this.titleTemplate$=this.team$.pipe(Object(Qt.a)(t=>(null==t?void 0:t.role)<=H.f.ADMIN&&this.item.defaultStandardView&&this.project?this.titleTemplate:null),Object(te.a)()),this.newViewText=$localize`:@@cu-data-view-item__new-view:New View`,this.viewOptionsText=$localize`:@@cu-data-view-item__view-options:View options`,this.reconstructMenuItems$=new B.a,this.setupReconstructMenuItemsListener()}ngAfterViewInit(){requestAnimationFrame(()=>{this.onAfterViewInit.emit()})}ngOnDestroy(){this.editingOnInit&&this.onClearLastCreated.emit(),this.reconstructMenuItems$.complete()}ngOnChanges(t){var e;(t.item||t.isFavorite||t.isGuest)&&this.item&&this.reconstructMenuItems$.next(),t.selected&&this.selected&&!Object(oe.b)()&&this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.elementRef.nativeElement.scrollIntoView({inline:"end",block:"center"})})}),(null===(e=t.editingOnInit)||void 0===e?void 0:e.previousValue)&&this.cancelEditingOnInit&&this.dropdownOptions.isOpen&&this.dropdownOptions.close(),t.openOptionsMenu&&this.openOptionsMenu.open&&this.openOptionsMenu.id===this.item.id&&setTimeout(()=>{this.dropdownOptions&&this.dropdownOptions.open()})}onContextMenu(t){this.dropdownOptions&&this.ngZone.run(()=>{t.preventDefault(),t.stopPropagation(),this.dropdownOptions.open()})}selectAction(t){t.id===je.Rename?this.editing=!0:this.onEdit.emit({action:t.id})}checkItem(t){this.onEdit.emit({action:t.id,data:"check"}),(t.id===je.ShareViaLink||t.id===je.Lock||t.id===je.Private&&this.item.visibility===$.j.Public)&&this.dropdownOptions.close()}fetchView(){this.item&&this.item.id&&!Object(E.rb)(this.item.id)&&!this.item.id.toLowerCase().includes("shared")&&this.onFetchView.emit(this.item.id)}rename(t){(t||"")!==(this.item.name||"")&&(this.item=Object.assign(Object.assign({},this.item),{name:t}),this.onEdit.emit({action:je.Rename,data:t}))}pinView(){this.onEdit.emit({action:je.Pin,data:!0})}editViewSettings(){this.dropdownOptions&&this.dropdownOptions.close(),this.onEditViewSettings.emit()}reconstructMenuItems(t){var e,i,n,o;const a=this.item.locked?null:this.lockPaywallTemplate,r=this.item.visibility!==$.j.Private?this.makePersonalPaywallTemplate:null,s=this.item.default?null:this.makeDefaultPaywallTemplate,c=E.Gb.find(({defaultDataViewAPIPayload:t})=>t.type===this.item.viewType),l=(null==c?void 0:c.contentType)===$.o.Blank;this.titleItems=this.item.defaultStandardView||this.isGuest?[!this.parent||this.parent.permissions&&this.parent.permissions.create_view?Xe:null,!this.parent||this.parent.permissions&&this.parent.permissions.edit_view?Le:null,!this.item.defaultStandardView&&(this.item.permissions&&this.item.permissions.deleteView||this.meUser&&this.item.creator===parseInt(this.meUser.id,10))||this.item.canDeleteStandardView&&!this.isGuest?Ke:null].filter(Boolean):this.item.permissions&&this.item.permissions.deleteView?[Object.assign(Object.assign({},Le),this.item.locked?{disabled:this.item.locked||!(this.item.permissions&&this.item.permissions.editView),tooltip:this.item.locked?ie:this.item.permissions&&this.item.permissions.editView?null:"You don't have permissions to make changes"}:{disabled:!(this.item.permissions&&this.item.permissions.editView),tooltip:this.item.permissions&&this.item.permissions.editView?null:"You don't have permissions to make changes"}),Object.assign(Object.assign({},Xe),{disabled:!(!this.parent||this.parent.permissions&&this.parent.permissions.create_view),tooltip:!this.parent||this.parent.permissions&&this.parent.permissions.create_view?null:"You don't have permissions to create view"}),this.item.locked||!this.canDelete&&!this.onlyDeleteIfOwner&&this.item.creator!==parseInt(this.meUser.id,10)?Object.assign(Object.assign({},Ke),{disabled:this.item.locked||!(this.canDelete||this.onlyDeleteIfOwner||this.item.creator===parseInt(this.meUser.id,10)),tooltip:this.item.locked?ie:this.canDelete||this.onlyDeleteIfOwner||this.item.creator===parseInt(this.meUser.id,10)?null:"You don't have permissions to delete this view"}):Ke].filter(Boolean):[Object.assign(Object.assign({},Le),this.item.locked?{disabled:this.item.locked,tooltip:this.item.locked?ie:null}:{disabled:!(this.item.permissions&&this.item.permissions.editView),tooltip:this.item.permissions&&this.item.permissions.editView?null:"You don't have permissions to make changes"}),Object.assign(Object.assign({},Object.assign(Object.assign({},Xe),{disabled:!(!this.parent||this.parent.permissions&&this.parent.permissions.create_view),tooltip:!this.parent||this.parent.permissions&&this.parent.permissions.create_view?null:"You don't have permissions to create view"})),{disabled:!(!this.parent||this.parent.permissions&&this.parent.permissions.create_view),tooltip:!this.parent||this.parent.permissions&&this.parent.permissions.create_view?null:"You don't have permissions to create view"})].filter(Boolean);const u=[];this.item.viewType===$.i.Embed&&(this.item.embed_settings.url&&u.push(Object.assign(Object.assign({},Je),{dropdownTemplate:this.newTabTemplate})),this.isGuest&&!(null===(e=this.item.permissions)||void 0===e?void 0:e.editView)||u.push(Object.assign(Object.assign({},Ze),{disabled:this.item.locked,tooltip:this.item.locked?ie:null}))),this.item.viewType!==$.i.Form||this.isPaidPlan||(this.titleItems=this.titleItems.filter(t=>t.id!==Xe.id));const d=[this.isGuest?void 0:Object.assign(Object.assign({},ze),{checked:this.item.visibility===$.j.Private,popoverTemplate:r,readonly:!!r,description:this.item.visibility===$.j.Private?"Only I can see this view":void 0,disabled:this.item.default||this.item.locked,tooltip:this.item.default?this.commonStringsService.defaultViewNoticeText:this.item.locked?ie:null}),l?void 0:Object.assign(Object.assign({},Ae),{checked:this.item.locked,popoverTemplate:a,disabled:!(null===(i=this.item.permissions)||void 0===i?void 0:i.canUnprotect),tooltip:a?(null===(n=this.item.permissions)||void 0===n?void 0:n.canUnprotect)?null:"You don't have permissions to unprotect this view":Ae.tooltip,readonly:!!a}),!l&&this.item.locked?Object.assign(Object.assign({},Ve),{title:this.item.canUnfreezeCount>1&&this.item.visibility===$.j.Public?$localize`:@@cu-data-view-item__menu-item_unprotecte-count:${this.item.canUnfreezeCount}:peopleCount: people can unprotect`:this.item.permissions&&this.item.permissions.canUnprotect?$localize`:@@cu-data-view-item__menu-item_edit-perms:Edit permissions`:"",readonly:this.item.visibility!==$.j.Public||this.item.permissions&&!this.item.permissions.canUnprotect}):void 0,l&&this.item.visibility===$.j.Public?qe:void 0,!this.isGuest&&this.item.viewType===$.i.Doc&&this.allowPublicSharing?Object.assign(Object.assign({},Fe),{checked:this.item.public}):void 0,!this.isGuest&&this.item.viewType===$.i.Doc&&this.item.public?Be:void 0].filter(Boolean),h=this.isFavorite?We:He,p=[l?void 0:Object.assign(Object.assign({},ti),{checked:this.item.autoSave,disabled:this.item.locked,tooltip:this.item.locked?ie:ti.tooltip}),Ge,h].filter(Boolean);let f=[...[...u,this.isGuest?void 0:Object.assign(Object.assign({},Ne),{checked:this.item.default,disabled:this.item.visibility===$.j.Private,popoverTemplate:s,readonly:!!s,tooltip:s||this.item.visibility!==$.j.Private?null:$localize`:@@cu-data-view-item__menu-item-tooltip_public-view-default-notice:Only public views can be set to defaults`}),!this.isGuest&&this.groupViews?Object.assign(Object.assign({},Ue),{checked:this.item.pinned,disabled:!this.item.permissions||!this.item.permissions.editView,tooltip:this.item.permissions&&this.item.permissions.editView?null:$localize`:@@cu-data-view-item__menu-item-tooltip_view-edit-no-perms:You don't have edit permissions on this view`}):void 0,l||(null===(o=this.item.mindmapSettings)||void 0===o?void 0:o.custom)||t.personal_team?void 0:Object.assign(Object.assign({},Re),{checked:this.item.alwaysMeView,disabled:this.item.locked,tooltip:this.item.locked?ie:Re.tooltip}),!this.item.locked&&this.item.permissions&&this.item.permissions.editView&&!l?Qe:void 0,(Object(E.qb)(this.item.viewType)||this.item.viewType===$.i.Doc)&&(this.isPaidPlan||this.item.viewType!==$.i.Box)&&this.item.permissions&&this.item.permissions.editView?{id:"templates",title:$localize`:@@common_templates:Templates`,dropdownTemplate:this.templateDropdown,customPayload:this.item}:void 0,!this.isGuest&&!this.item.defaultStandardView&&this.item.permissions&&this.item.permissions.editView&&this.item.viewType!==$.i.Form?Object.assign(Object.assign({},Ee),{dropdownTemplate:this.moveDropdown,customPayload:{view:this.item,moveItems:this.moveItems.filter(t=>this.item.viewType!==$.i.Form&&this.item.viewType!==$.i.Timeline||t.id!==$.e.Team)}}):void 0].filter(Boolean)];if(d.length>0&&(f=[...f,{id:"separatorPermissions",title:"",type:ne.a.Separator},{id:"headerPermissions",title:$localize`:@@common_permissions:Permissions`,type:ne.a.Header},...d]),p.length>0&&(f=[...f,{id:"separatorPersonal",title:"",type:ne.a.Separator},{id:"headerPersonal",title:$localize`:@@cu-data-view-item__menu-item_personal-options:Personal options`,type:ne.a.Header},...p]),this.items=(this.isGuest||this.item.parent&&this.item.parent.type===$.e.SharedSpace&&!this.parent?[Ge,h]:this.item.defaultStandardView&&!this.item.canDeleteStandardView?[Ye,...!this.parent||this.parent.permissions&&this.parent.permissions.edit_view?f:[]]:this.item.permissions&&this.item.permissions.editView?f:[h]).filter(Boolean),this.isGuest){const t=(f||[]).findIndex(t=>"templates"===t.id);-1!==t&&(this.items=[...this.items,f[t]])}this.canOnlyEditPersonalView&&this.item.visibility===$.j.Private&&(this.titleItems.forEach(t=>{t.disabled&&(t.disabled=!1),t.tooltip&&(t.tooltip=null)}),this.items=[Qe,{id:"templates",title:"Templates",dropdownTemplate:this.templateDropdown,customPayload:this.item},{id:"separatorPersonal",title:"",type:ne.a.Separator},{id:"headerPersonal",title:$localize`:@@cu-data-view-item__menu-item_personal-options:Personal options`,type:ne.a.Header},Object.assign(Object.assign({},ti),{checked:this.item.autoSave}),Ge,He])}setupReconstructMenuItemsListener(){this.reconstructMenuItems$.pipe(Object(ee.a)(this.team$)).subscribe(([,t])=>{this.reconstructMenuItems(t)})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(d.B),d.Wb(K.Store),d.Wb(d.m),d.Wb(J.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-data-view-item"]],viewQuery:function(t,e){if(1&t&&(d.jd(le,3),d.jd(ue,1),d.jd(de,3),d.jd(he,3)),2&t){let t;d.Qc(t=d.rc())&&(e.shareTemplate=t.first),d.Qc(t=d.rc())&&(e.dropdownOptions=t.first),d.Qc(t=d.rc())&&(e.newTabTemplate=t.first),d.Qc(t=d.rc())&&(e.titleTemplate=t.first)}},hostAttrs:[1,"cu-data-view-item"],hostVars:8,hostBindings:function(t,e){1&t&&d.qc("contextmenu.out-zone",function(t){return e.onContextMenu(t)}),2&t&&d.Ob("cu-data-view-item_selected",e.selected)("cu-data-view-item_tab",e.twoRows)("cu-data-view-item_grouped",e.grouped)("cu-data-view-item_darker",e.isDarker)},inputs:{item:"item",project:"project",selected:"selected",showTitle:"showTitle",grouped:"grouped",editingOnInit:"editingOnInit",cancelEditingOnInit:"cancelEditingOnInit",isFavorite:"isFavorite",lockPaywallTemplate:"lockPaywallTemplate",makeDefaultPaywallTemplate:"makeDefaultPaywallTemplate",makePersonalPaywallTemplate:"makePersonalPaywallTemplate",templateDropdown:"templateDropdown",moveDropdown:"moveDropdown",moveItems:"moveItems",isGuest:"isGuest",isPaidPlan:"isPaidPlan",parent:"parent",twoRows:"twoRows",groupViews:"groupViews",forShowMore:"forShowMore",onlyDeleteIfOwner:"onlyDeleteIfOwner",canDelete:"canDelete",meUser:"meUser",allowPublicSharing:"allowPublicSharing",openOptionsMenu:"openOptionsMenu",isDarker:"isDarker",canOnlyEditPersonalView:"canOnlyEditPersonalView"},outputs:{onResetViewState:"onResetViewState",onSelect:"onSelect",onEdit:"onEdit",onAfterViewInit:"onAfterViewInit",onEditViewSettings:"onEditViewSettings",onToggleMenu:"onToggleMenu",onFetchView:"onFetchView",onClearLastCreated:"onClearLastCreated"},features:[d.Gb],decls:13,vars:8,consts:function(){let t,e,i,n,o,a;return t=$localize`:@@common_shared-with␟e56e8922e7693a0d78af28a56f0c5d7d27316493␟2755665189814836691:Shared with`,e=$localize`:@@common_everyone␟f522d35580d8c1aa3c7848729a6f164010fc1646␟5916206014523216575: Everyone `,i=$localize`:@@common_only-me␟4bbc1e93c17d5aa04dc6301e7121a0df611cfc1f␟4184089666886512003:Only Me`,n=$localize`:@@cu-data-view-item__shared-with-n-people␟881bc9ea26d4aec2764adb815328bb2ee32627d2␟140911687392783677:${"\ufffd0\ufffd"}:INTERPOLATION: people`,o=$localize`:@@common_default-settings␟7b2c015690b6d1920e3f2101af948d21743ba5b3␟646467758223150407: Default Settings `,a=$localize`:@@common_open-in-new-tab␟9b9b7939afd90f0d509a363cf47571545b4f0f55␟6425566557758830155: Open in new tab `,[[1,"cu-data-view-item__divider"],["class","cu-data-view-item__link cu-data-view-item__link_icon",3,"routerLink","cuDraggable","cu-data-view-item__no-name","click",4,"ngIf"],[1,"cu-data-view-item__link",3,"routerLink","cuDraggable","click"],[4,"ngIf"],["class","cu-data-view-item__pin","icon","cu2-thumbtack-solid",3,"click",4,"ngIf"],["class","cu-data-view-item__dropdown-list",3,"title","items","dropdownCloseOnModal","titleItems","titleTemplate","dropdownHostElement","dropdownListToolTipModifier","dropdownCloseOthersOnOpen","showCloseButton","onSelect","onCheck","onClose","onOpen",4,"ngIf"],["shareTemplate",""],["titleTemplate",""],["newTabTemplate",""],[1,"cu-data-view-item__link","cu-data-view-item__link_icon",3,"routerLink","cuDraggable","click"],["class","cu-data-view-item__handle","icon","handle4-no-color",4,"ngIf"],[1,"cu-data-view-item__icon"],["icon","cu2-home-alt-solid","class","cu-data-view-item__icon-default",4,"ngIf"],["class","cu-data-view-item__icon-lock","icon","cu2-shield-alt",4,"ngIf"],["class","cu-data-view-item__icon-pinned","icon","cu2-thumbtack-solid",4,"ngIf"],[3,"icon",4,"ngIf"],["class","cu-data-view-item__icon-favicon",3,"backgroundImage",4,"ngIf"],["icon","handle4-no-color",1,"cu-data-view-item__handle"],["icon","cu2-home-alt-solid",1,"cu-data-view-item__icon-default"],["icon","cu2-shield-alt",1,"cu-data-view-item__icon-lock"],["icon","cu2-thumbtack-solid",1,"cu-data-view-item__icon-pinned"],[3,"icon"],[1,"cu-data-view-item__icon-favicon"],[1,"cu-data-view-item__name",3,"ngClass","cuTooltip","tooltipDisabledIfTextNotTruncated"],["class","cu-data-view-item__name-private","icon","cu2-lock-alt",4,"ngIf"],[3,"text","editing","autosize","allowEmpty","selectText","placeholder","onChange","onCancel"],[1,"cu-data-view-item__name-text"],["class","cu-data-view-item__name-required",4,"ngIf"],["icon","cu2-lock-alt",1,"cu-data-view-item__name-private"],[1,"cu-data-view-item__name-required"],["icon","cu2-thumbtack-solid",1,"cu-data-view-item__pin",3,"click"],[1,"cu-data-view-item__dropdown-list",3,"title","items","dropdownCloseOnModal","titleItems","titleTemplate","dropdownHostElement","dropdownListToolTipModifier","dropdownCloseOthersOnOpen","showCloseButton","onSelect","onCheck","onClose","onOpen"],["dropdownOptions",""],["icon","ellipsis",1,"cu-data-view-item__settings",3,"click"],t,["class","cu-data-view-item__shared",4,"ngIf"],["class","cu-data-view-item__shared",3,"ngPlural",4,"ngIf"],[1,"cu-data-view-item__shared"],e,[1,"cu-data-view-item__shared",3,"ngPlural"],["ngPluralCase","1"],["ngPluralCase","other"],i,n,[1,"cu2-views-bar__settings",3,"click"],o,["target","_blank",1,"cu-dropdown-list-item__link-container",3,"href"],[1,"cu-dropdown-list-item__link"],[1,"cu-dropdown-list-item__icon","cu-dropdown-list-item__icon_open-url",3,"icon"],[1,"cu-dropdown-list-item__title"],a]},template:function(t,e){1&t&&(d.Xb(0,"div",0),d.bd(1,_e,9,12,"a",1),d.cc(2,"a",2),d.qc("click",function(){return e.onResetViewState.emit()}),d.vc(3,"dataViewLink"),d.bd(4,xe,7,15,"ng-container",3),d.bc(),d.bd(5,Se,1,0,"div",4),d.bd(6,Te,4,11,"cu-dropdown-list",5),d.bd(7,Me,5,2,"ng-template",null,6,d.cd),d.bd(9,Oe,2,0,"ng-template",null,7,d.cd),d.bd(11,$e,5,2,"ng-template",null,8,d.cd)),2&t&&(d.Ib(1),d.Dc("ngIf",!e.grouped),d.Ib(1),d.Dc("routerLink",d.wc(3,6,e.item))("cuDraggable",!1),d.Ib(2),d.Dc("ngIf",e.showTitle),d.Ib(1),d.Dc("ngIf",e.grouped&&(null==e.item||null==e.item.permissions?null:e.item.permissions.editView)&&!e.editing),d.Ib(1),d.Dc("ngIf",!e.editing))},directives:[n.q,P.k,ae.a,nt.a,n.o,ot.a,re.a,rt.a,n.r,n.s],pipes:[se.a,ce.a,n.b],styles:['.cu-data-view-item{display:flex;align-items:center;max-width:250px;height:30px;border-radius:3px;overflow:hidden;margin:0 1px;position:relative;background:#fff}.dark-theme .cu-data-view-item{background:#2b343b}.cu2-views-bar_v6 .cu-data-view-item{overflow:visible}.cu-data-view-item .cu-editable__input{min-width:42px}.cu-data-view-item:hover,.cu-data-view-item_selected{background-color:#f2f2f2}.dark-theme .cu-data-view-item:hover,.dark-theme .cu-data-view-item_selected{background-color:#1e272e}.cu-data-view-item:hover .cu-data-view-item__icon,.cu-data-view-item_selected .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item:hover .cu-data-view-item__icon,.cu-data-view-item_selected .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,94.9%,0) 0,#f2f2f2 70%,#f2f2f2)}.dark-theme .cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.dark-theme .cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e 70%,#1e272e)}.cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__icon{fill:#bcc0c7;stroke:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__icon{fill:#828588;stroke:#828588}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab{background:#f2f4f7}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:before{box-shadow:1px 1px 0 1px #f2f4f7}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:before{box-shadow:1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:before{box-shadow:1px 1px 0 1px #1e272e}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:after{box-shadow:-1px 1px 0 1px #f2f4f7}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:after{box-shadow:-1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:after{box-shadow:-1px 1px 0 1px #1e272e}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list{background:#f2f4f7}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list{background:#eee}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list{background:#1e272e}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(242,244,247,0) 0,#f2f4f7)}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,hsla(0,0%,93.3%,0) 0,#eee)}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e)}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(242,244,247,0) 0,#f2f4f7 70%,#f2f4f7)}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab .cu-data-view-item__dropdown-list{background-color:#f2f4f7}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(250,251,252,0) 0,#f2f4f7)}.cu-data-view-item__pin{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#b9bec7;width:12px;height:15px;padding:2px;cursor:pointer;margin-right:7px;margin-left:4px;display:none}.cu-data-view-item__pin:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__pin:hover{fill:var(--theme-main-color)}}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__pin{fill:#fff}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__pin:hover{fill:#dfdbfb}@supports (--theme-main-color-light:#dfdbfb){.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__pin:hover{fill:var(--theme-main-color-light)}}.cu-data-view-item_tab{height:39px;border-radius:7px 7px 0 0;margin:0;padding:0 5px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-data-view-item_tab{border-bottom-color:#1e272e}.layout-size_compact .cu-data-view-item_tab{height:39px}.layout-size_default .cu-data-view-item_tab{height:44px}.layout-size_large .cu-data-view-item_tab{height:48px}.cu2-views-bar_v6 .cu-data-view-item_tab{height:50px;border:0}.cu-data-view-item_tab+.cu-data-view-item_tab{border-left:0}.cu2-views-bar_v6 .cu-data-view-item_tab:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;opacity:0;z-index:10;width:calc(100% - 26px);height:3px;left:13px;bottom:0;border-radius:3px 3px 0 0;background:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab:before{background:#828588}.cu-data-view-item_tab:hover .cu-data-view-item__handle{display:block}.cu2-views-bar_v6 .cu-data-view-item_tab:hover:before{opacity:1}.cu-data-view-item_tab.cu-data-view-item_selected{border:1px solid #e9ebf0;border-bottom-color:transparent}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected{border-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected{border:0}.cu-data-view-item_tab.cu-data-view-item_selected,.cu-data-view-item_tab:hover{background:#fafbfc}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected,.contrast_high .cu-data-view-item_tab:hover{background:#eee}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected,.dark-theme .cu-data-view-item_tab:hover{background:#1e272e}.contrast_high .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected,.contrast_high .cu2-views-bar_v6 .cu-data-view-item_tab:hover,.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected,.cu2-views-bar_v6 .cu-data-view-item_tab:hover,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab:hover{background:transparent}.cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(250,251,252,0) 0,#fafbfc 70%,#fafbfc)}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.contrast_high .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,93.3%,0) 0,#eee 70%,#eee)}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.dark-theme .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e 70%,#1e272e)}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.cu2-views-bar_v6 .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu-data-view-item_tab:not(.cu-data-view-item_selected):hover .cu-data-view-item__dropdown-list{display:none}.cu-data-view-item_tab:not(.cu-data-view-item_selected):after{content:"";display:block;position:absolute;z-index:10;width:1px;height:17px;right:-1px;margin-top:-2px;background:#e9ebf0}.dark-theme .cu-data-view-item_tab:not(.cu-data-view-item_selected):after{background:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab:not(.cu-data-view-item_selected):after,.cu-data-view-group:last-child .cu-data-view-item_tab:not(.cu-data-view-item_selected):after{display:none}.cu-data-view-item_tab.cu-data-view-item_selected:hover .cu-data-view-item__dropdown-list{display:block}.cu-data-view-item_tab.cu-data-view-item_selected:before{content:"";display:block;position:absolute;z-index:10;width:7px;height:7px;bottom:-1px;left:-7px;border-bottom-right-radius:7px;border-right:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0;box-shadow:1px 1px 0 1px #fafbfc}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected:before{box-shadow:1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected:before{box-shadow:1px 1px 0 1px #1e272e;border-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected:before{background:#7b68ee;opacity:1;width:calc(100% - 26px);height:3px;left:13px;bottom:0;border:0;border-radius:3px 3px 0 0;box-shadow:none}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected:before{background:var(--theme-main-color)}}.cu-data-view-item_tab.cu-data-view-item_selected:after{content:"";display:block;position:absolute;z-index:10;width:7px;height:7px;bottom:-1px;right:-7px;border-bottom-left-radius:7px;border-left:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0;box-shadow:-1px 1px 0 1px #fafbfc}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected:after{box-shadow:-1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected:after{box-shadow:-1px 1px 0 1px #1e272e;border-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected:after{display:none}.cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{position:absolute;right:2px;width:24px;background-color:#fafbfc}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{background-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{background-color:#fff}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{background-color:#2b343b}.cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{content:"";display:block;position:absolute;width:8px;height:100%;pointer-events:none;top:0;left:-8px;background:linear-gradient(90deg,rgba(250,251,252,0) 0,#fafbfc)}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e)}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff)}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b)}.cu-data-view-item.cu-data-view-item_grouped{display:flex;align-items:center;justify-content:space-between;border-radius:4px;padding:0 8px;margin:0 5px;border:0;max-width:none;height:32px}.cu-data-view-item.cu-data-view-item_grouped:not(.cu-data-view-item_selected):after{display:none}.cu-data-view-item.cu-data-view-item_grouped:hover .cu-data-view-item__dropdown-list{display:block}.cu-data-view-item_grouped .cu-data-view-item__name_not-empty:after,.cu-data-view-item_grouped:after,.cu-data-view-item_grouped:before{display:none!important}.cu-data-view-item_grouped.cu-data-view-item_selected,.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item_grouped.cu-data-view-item_selected,.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:var(--theme-main-color)}}.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected,.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected,.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:var(--theme-main-color)}}.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview .cu-data-view-item__name-text,.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview .cu-data-view-item__name .cu-editable__input,.cu-data-view-item_grouped.cu-data-view-item_selected .cu-data-view-item__name-text,.cu-data-view-item_grouped.cu-data-view-item_selected .cu-data-view-item__name .cu-editable__input{color:#fff}.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview .cu-data-view-item__name-required,.cu-data-view-item_grouped.cu-data-view-item_selected .cu-data-view-item__name-required{color:#fff;opacity:.7}.cu-data-view-item_grouped .cu-data-view-item__link{flex:1 0 0}.cu-data-view-item_grouped .cu-data-view-item__name{height:auto}.cu-data-view-item_grouped .cu-data-view-item__name_editing{flex-grow:1}.cu-data-view-item_grouped .cu-data-view-item__dropdown-list{position:relative}.cu-data-view-item_grouped:hover .cu-data-view-item__dropdown-list,.cu-data-view-item_grouped:hover .cu-data-view-item__pin{display:block}.cu-data-view-item__link{display:inline-flex;align-items:center;min-width:0;align-self:stretch}.cu-data-view-item_tab .cu-data-view-item__link{padding-top:6px;padding-bottom:10px}.cu2-views-bar_v6 .cu-data-view-item_tab .cu-data-view-item__link{padding:0}.cu-data-view-item__link_icon{flex-shrink:0}.cu-data-view-item__icon{width:30px;height:30px;padding:8px;fill:#bcc0c7;stroke:#bcc0c7;stroke-width:2px;flex-shrink:0;position:relative}.dark-theme .cu-data-view-item__icon{fill:#828588;stroke:#828588}.layout-size_compact .cu-data-view-item__icon{padding:8px}.layout-size_default .cu-data-view-item__icon,.layout-size_large .cu-data-view-item__icon{padding:7px}.cu2-views-bar_v6 .cu-data-view-item__icon,.layout-size_compact .cu2-views-bar_v6 .cu-data-view-item__icon,.layout-size_default .cu2-views-bar_v6 .cu-data-view-item__icon,.layout-size_large .cu2-views-bar_v6 .cu-data-view-item__icon{padding:8px}.cu-data-view-item__icon-default{fill:#7b68ee;position:absolute;width:8px;height:8px;right:2px;bottom:2px;border-radius:50%}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__icon-default{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-item__icon-default{width:10px;height:10px;padding:1px;right:1px;bottom:1px;background:#fff;fill:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item__icon-default{background:#2b343b;fill:#828588}.cu-data-view-item__icon-lock,.cu-data-view-item__icon-pinned{fill:#7b68ee;position:absolute;width:8px;height:8px;left:2px;top:2px;border-radius:50%}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__icon-lock,.cu-data-view-item__icon-pinned{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-item__icon-lock,.cu2-views-bar_v6 .cu-data-view-item__icon-pinned{width:10px;height:10px;padding:1px;left:1px;top:1px;background:#fff;fill:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item__icon-lock,.dark-theme .cu2-views-bar_v6 .cu-data-view-item__icon-pinned{background:#2b343b;fill:#828588}.cu-data-view-item__icon-lock{left:auto;right:2px}.cu-data-view-item__icon-favicon{background-size:contain;background-position:50%;height:100%;width:100%}.cu-data-view-item__name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;position:relative;color:#343434;height:100%;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-item__name{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-item__name{color:#d5d6d7}.layout-size_compact .cu-data-view-item__name{font-size:13px}.layout-size_default .cu-data-view-item__name,.layout-size_large .cu-data-view-item__name{font-size:14px}.cu-data-view-item__name_not-empty:after{content:"";display:block;position:sticky;right:-1px;width:11px;margin-left:-3px;height:100%;flex-shrink:0;pointer-events:none;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu-data-view-item__name_editing{min-width:42px;color:transparent}.dark-theme .cu-data-view-item__name_editing{color:transparent}.cu-data-view-item__name_editing:after{visibility:hidden;pointer-events:none}.cu-data-view-item__name_editing .cu-data-view-item__name-text{opacity:0}.cu-data-view-item__name-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;position:relative;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-item__name-text{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-item__name-text{color:#d5d6d7}.layout-size_compact .cu-data-view-item__name-text{font-size:13px}.layout-size_default .cu-data-view-item__name-text,.layout-size_large .cu-data-view-item__name-text{font-size:14px}.cu2-views-bar_v6 .cu-data-view-item__name-text,.layout-size_compact .cu2-views-bar_v6 .cu-data-view-item__name-text,.layout-size_default .cu2-views-bar_v6 .cu-data-view-item__name-text,.layout-size_large .cu2-views-bar_v6 .cu-data-view-item__name-text{font-size:13px}.cu-data-view-item__name .cu-editable{display:flex;align-items:center;position:absolute;width:100%;height:100%}.cu-data-view-item__name .cu-editable__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;background:transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-item__name .cu-editable__input{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-item__name .cu-editable__input{background:transparent}.cu-data-view-item__name .cu-editable__input:focus{background:transparent;box-shadow:none}.dark-theme .cu-data-view-item__name .cu-editable__input:focus{background:transparent}.layout-size_compact .cu-data-view-item__name .cu-editable__input{font-size:13px}.layout-size_default .cu-data-view-item__name .cu-editable__input{font-size:14px}.layout-size_large .cu-data-view-item__name .cu-editable__input{font-size:15px}.dark-theme .cu-data-view-item__name .cu-editable__input::selection{background:#384047}.cu-data-view-item__name-required{font:italic 400 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin:0 5px;color:#b9bec7}.dark-theme .cu-data-view-item__name-required{color:#7c828d}.cu-data-view-item__name-private{width:11px;height:11px;display:inline-block;margin-right:3px;fill:#bcc0c7}.dark-theme .cu-data-view-item__name-private{fill:#828588}.cu-data-view-item_selected{background-color:#f2f2f2}.cu-data-view-item_selected .cu-data-view-group__count{background:#7b68ee;margin-top:6px}@supports (--theme-main-color:#7b68ee){.cu-data-view-item_selected .cu-data-view-group__count{background:var(--theme-main-color)}}.layout-size_compact .cu-data-view-item_selected .cu-data-view-group__count{margin-top:6px}.layout-size_default .cu-data-view-item_selected .cu-data-view-group__count,.layout-size_large .cu-data-view-item_selected .cu-data-view-group__count{margin-top:7px}.cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count,.layout-size_compact .cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count{margin-top:5px}.layout-size_default .cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count,.layout-size_large .cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count{margin-top:6px}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-group__count{background:transparent}.dark-theme .cu-data-view-item_selected{background-color:#1e272e}.cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#292d34;stroke:#292d34}.dark-theme .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#d5d6d7;stroke:#d5d6d7}.cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu-data-view-item_selected .cu-data-view-item__icon{fill:#292d34;stroke:#292d34;cursor:default;transition:none}.dark-theme .cu-data-view-item_selected .cu-data-view-item__icon{fill:#d5d6d7;stroke:#d5d6d7}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-default,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-lock,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-pinned,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-private{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-default,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-lock,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-pinned,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-private{fill:var(--theme-main-color)}}.cu-data-view-item_selected .cu-data-view-item__name-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:500}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-text{color:var(--theme-main-color)}}.cu-data-view-item__dropdown-list{width:24px;display:none}.cu-data-view-item__dropdown-list.cu-dropdown-list_opened{display:block}.cu-data-view-item__settings{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:24px;height:24px;padding:3px 4px;fill:#b9bec7;cursor:pointer}.cu-data-view-item_tab .cu-data-view-item__settings{margin-bottom:4px}.cu-data-view-item__settings:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__settings:hover{fill:var(--theme-main-color)}}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__settings{fill:#fff}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__settings:hover{fill:#dfdbfb}@supports (--theme-main-color-light:#dfdbfb){.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__settings:hover{fill:var(--theme-main-color-light)}}.cu-data-view-item .cu-dropdown_open .cu-data-view-item__settings{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item .cu-dropdown_open .cu-data-view-item__settings{fill:var(--theme-main-color)}}.cu-data-view-item__divider{display:none}.cu2-views-bar_v6 .cu-data-view-item__divider{content:"";position:absolute;display:block;left:0;width:1px;height:20px;background:#e9ebf0}.dark-theme .cu2-views-bar_v6 .cu-data-view-item__divider{background:#1e272e}.cu-data-view-item__shared{border-bottom:1px dashed}.cu-data-view-item__link-settings{font-weight:400;font-size:10px;line-height:1;border:1px solid #b9bec7;border-radius:3px;margin:3px 15px 10px}.dark-theme .cu-data-view-item__link-settings{border-color:#828588}.cu-data-view-item__link-settings:hover{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__link-settings:hover{border-color:var(--theme-main-color)}}.cu-data-view-item__link-settings:hover .cu-dropdown-list-item__title{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__link-settings:hover .cu-dropdown-list-item__title{color:var(--theme-main-color)}}.cu-data-view-item__link-settings.cu-dropdown-list-item{min-height:21px}.cu-data-view-item__link-settings .cu-dropdown-list-item__link-container{padding:0}.cu-data-view-item__link-settings .cu-dropdown-list-item__title{font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;justify-content:center}.cu-data-view-item__lock .cu-dropdown-list-item__link-container{padding-bottom:16px}.cu-data-view-item__lock-settings{min-height:0;margin-top:-14px;margin-bottom:10px;cursor:default}.cu-data-view-item__lock-settings.cu-dropdown-list-item{min-height:0}.cu-data-view-item__lock-settings.cu-dropdown-list-item:hover,.dark-theme .cu-data-view-item__lock-settings.cu-dropdown-list-item:hover{background:transparent}.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container{cursor:pointer;padding:0 0 0 22px}.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title{color:var(--theme-main-color)}}.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title-text{border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title-text{border-bottom-color:var(--theme-main-color)}}.cu-data-view-item__lock-settings .cu-dropdown-list-item__title{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 10px/1 Gotham Pro,Proxima Nova,arial,serif;padding:2px 0;color:rgba(34,34,34,.3)}.contrast_high .cu-data-view-item__lock-settings .cu-dropdown-list-item__title{color:#858585}.dark-theme .cu-data-view-item__lock-settings .cu-dropdown-list-item__title{color:#828588}.cu-data-view-item__lock-settings .cu-dropdown-list-item__title-text{border-bottom:1px dashed rgba(34,34,34,.3)}.contrast_high .cu-data-view-item__lock-settings .cu-dropdown-list-item__title-text{border-bottom-color:#858585}.dark-theme .cu-data-view-item__lock-settings .cu-dropdown-list-item__title-text{border-bottom-color:#828588}.cu-data-view-item__handle{display:none;position:absolute;cursor:move;left:1px;width:10px;padding:3px 2px 2px;height:18px;z-index:10;fill:#bcc0c7}.dark-theme .cu-data-view-item__handle{fill:#828588}.cu-data-view-item__handle:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__handle:hover{fill:var(--theme-main-color)}}.cu-data-view-item.cdk-drag-preview{background-color:#f2f2f2;opacity:.7}.cu-data-view-item.cdk-drag-preview .cu-data-view-item__name_not-empty:after{display:none}.cu-data-view-item.cdk-drag-placeholder{opacity:.7}.cdk-drop-list-dragging .cu-data-view-item.cdk-drag:not(.cdk-drag-placeholder){transition:transform .2s cubic-bezier(0,0,.2,1)}.cu-data-view-item.cdk-drag-animating{transition:transform .15s cubic-bezier(0,0,.2,1)}'],encapsulation:2,changeDetection:0}),t})();var ii=i("itXk"),ni=i("xgIS"),oi=i("l5mm"),ai=i("VRyK"),ri=i("Kj3r"),si=i("0RbE"),ci=i("Muja"),li=i("TyK0"),ui=i("Hgwy");const di=["viewList"],hi=["pop"],pi=["showMoreDropdown"],fi=["showMoreDropdownMenu"],gi=["addMoreDropdown"];function mi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",16),d.qc("onResetViewState",function(){return d.Uc(t),d.uc(2).onResetViewState.emit()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(2).onSelect.emit(i)})("onFetchView",function(e){return d.Uc(t),d.uc(2).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(2).onClearLastCreated.emit()})("onEdit",function(i){d.Uc(t);const n=e.$implicit;return d.uc(2).onEdit.emit({action:i.action,data:i.data,view:n})})("onEditViewSettings",function(){return d.Uc(t),d.uc(2).onEditViewSettings.emit()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.bc()}if(2&t){const t=e.$implicit;d.uc();const i=d.Rc(8),n=d.uc();d.Dc("twoRows",n.twoRows)("groupViews",n.groupViews)("item",t)("selected",t.id===(null==n.selectedView?null:n.selectedView.id))("isGuest",n.isGuest)("isPaidPlan",n.isPaidPlan)("project",n.project)("isFavorite",n.favouriteViewIdMap[t.id])("templateDropdown",n.templateDropdown)("moveDropdown",n.moveDropdown)("moveItems",n.moveItems)("lockPaywallTemplate",n.lockPaywallTemplate)("parent",n.parent)("makeDefaultPaywallTemplate",n.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",n.makePersonalPaywallTemplate)("allowPublicSharing",d.wc(1,20,n.allowPublicSharing$))("cdkDragData",t)("cdkDragStartDelay",d.wc(2,22,n.isTouchDevice$)?500:0)("cuDragScrollContainer",i)("canOnlyEditPersonalView",d.wc(3,24,n.canOnlyEditPersonalView$))}}function vi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-group",17),d.qc("onResetViewState",function(){return d.Uc(t),d.uc(2).onResetViewState.emit()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(2).onSelect.emit(i)})("onFetchView",function(e){return d.Uc(t),d.uc(2).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(2).onClearLastCreated.emit()})("onEdit",function(e){return d.Uc(t),d.uc(2).onEdit.emit(e)})("onEditViewSettings",function(){return d.Uc(t),d.uc(2).onEditViewSettings.emit()})("onOpenAddView",function(e){return d.Uc(t),d.uc(2).openAddView(e)})("onDrop",function(e){return d.Uc(t),d.uc(2).dropInGroup(e)})("onOpenGroupList",function(e){return d.Uc(t),d.uc(2).openViewType=e}),d.vc(1,"async"),d.vc(2,"async"),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(2);d.Dc("item",t)("selectedView",i.selectedView)("groupSelection",i.preferenceMap[t.type])("groupViews",i.groupViews)("twoRows",i.twoRows)("isGuest",i.isGuest)("isPaidPlan",i.isPaidPlan)("project",i.project)("meUser",i.meUser)("favouriteViewIdMap",i.favouriteViewIdMap)("templateDropdown",i.templateDropdown)("moveDropdown",i.moveDropdown)("moveItems",i.moveItems)("lockPaywallTemplate",i.lockPaywallTemplate)("parent",i.parent)("isTouchDevice",d.wc(1,20,i.isTouchDevice$))("makeDefaultPaywallTemplate",i.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",i.makePersonalPaywallTemplate)("allowPublicSharing",d.wc(2,22,i.allowPublicSharing$))("canCreateView",!i.isGuest&&((null==i.parent||null==i.parent.permissions?null:i.parent.permissions.create_view)||!i.parent&&(null==i.selectedView||null==i.selectedView.parent?null:i.selectedView.parent.type)!==i.DataViewParentType.SharedSpace))}}const bi=function(t){return{"cu-data-view-list__edge_hidden":t}},_i=function(t){return{"cu-data-view-list__default_two-rows":t}};function wi(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",4),d.cc(2,"div",5),d.qc("click",function(){return d.Uc(t),d.uc().scrollToDirection("left")}),d.cc(3,"div",6),d.Xb(4,"div",7),d.bc(),d.bc(),d.cc(5,"div",8,9),d.qc("onScroll",function(){return d.Uc(t),d.uc().showArrowsWithCheck()}),d.cc(7,"div",10,11),d.qc("cdkDropListDropped",function(e){return d.Uc(t),d.uc().dropPinned(e)}),d.bd(9,mi,4,26,"cu-data-view-item",12),d.bc(),d.bd(10,vi,3,24,"cu-data-view-group",13),d.bc(),d.cc(11,"div",14),d.qc("click",function(){return d.Uc(t),d.uc().scrollToDirection("right")}),d.cc(12,"div",15),d.Xb(13,"div",7),d.bc(),d.bc(),d.bc(),d.Zb()}if(2&t){const t=d.uc();d.Ib(2),d.Dc("ngClass",d.Hc(7,bi,!t.isShowLeftArrow)),d.Ib(5),d.Dc("ngClass",d.Hc(9,_i,t.twoRows)),d.Ib(2),d.Dc("ngForOf",t.pinnedViews)("ngForTrackBy",t.trackById),d.Ib(1),d.Dc("ngForOf",t.groupItems)("ngForTrackBy",t.trackByTypeParent),d.Ib(1),d.Dc("ngClass",d.Hc(11,bi,!t.isShowRightArrow))}}function yi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",24),d.qc("onResetViewState",function(){return d.Uc(t),d.uc(2).onResetViewState.emit()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(2).onSelect.emit(i)})("onFetchView",function(e){return d.Uc(t),d.uc(2).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(2).onClearLastCreated.emit()})("onEdit",function(i){d.Uc(t);const n=e.$implicit;return d.uc(2).onEdit.emit({action:i.action,data:i.data,view:n})})("onEditViewSettings",function(){return d.Uc(t),d.uc(2).onEditViewSettings.emit()}),d.vc(1,"async"),d.vc(2,"async"),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(2);d.Dc("twoRows",i.twoRows)("item",t)("selected",t.id===(null==i.selectedView?null:i.selectedView.id))("isGuest",i.isGuest)("isPaidPlan",i.isPaidPlan)("project",i.project)("isFavorite",i.favouriteViewIdMap[t.id])("templateDropdown",i.templateDropdown)("moveDropdown",i.moveDropdown)("moveItems",i.moveItems)("lockPaywallTemplate",i.lockPaywallTemplate)("parent",i.parent)("makeDefaultPaywallTemplate",i.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",i.makePersonalPaywallTemplate)("allowPublicSharing",d.wc(1,16,i.allowPublicSharing$))("canOnlyEditPersonalView",d.wc(2,18,i.canOnlyEditPersonalView$))}}const ki=function(t){return{"cu-data-view-item_tab":t}};function xi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",25),d.qc("onResetViewState",function(){return d.Uc(t),d.uc(2).onResetViewState.emit()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(2).onSelect.emit(i)})("onEdit",function(i){d.Uc(t);const n=e.$implicit;return d.uc(2).editView(i,n)})("onAfterViewInit",function(){return d.Uc(t),d.uc(2).showArrows()})("onFetchView",function(e){return d.Uc(t),d.uc(2).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(2).onClearLastCreated.emit()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.bc()}if(2&t){const t=e.$implicit;d.uc();const i=d.Rc(5),n=d.uc();d.Dc("ngClass",d.Hc(33,ki,n.twoRows))("twoRows",n.twoRows)("item",t)("project",n.project)("isPaidPlan",n.isPaidPlan)("onlyDeleteIfOwner",n.onlyDeleteIfOwner)("canDelete",n.canDelete)("meUser",n.meUser)("selected",t.id===(null==n.selectedView?null:n.selectedView.id))("editingOnInit",t.id===n.lastCreatedId)("cancelEditingOnInit",!!n.lastCreatedId)("lockPaywallTemplate",n.lockPaywallTemplate)("makeDefaultPaywallTemplate",n.makeDefaultPaywallTemplate)("templateDropdown",n.templateDropdown)("moveDropdown",n.moveDropdown)("moveItems",n.moveItems)("parent",n.parent)("makePersonalPaywallTemplate",n.makePersonalPaywallTemplate)("allowPublicSharing",d.wc(1,27,n.allowPublicSharing$))("cdkDragData",t)("cdkDragStartDelay",d.wc(2,29,n.isTouchDevice$)?500:0)("cuDragScrollContainer",i)("isFavorite",n.favouriteViewIdMap[t.id])("isGuest",n.isGuest)("canOnlyEditPersonalView",d.wc(3,31,n.canOnlyEditPersonalView$)),d.Jb("data-id",t.id)("data-source","view")}}function Si(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",36),d.qc("onResetViewState",function(){return d.Uc(t),d.uc(4).onResetViewState.emit()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(4).onSelect.emit(i)})("onEdit",function(i){d.Uc(t);const n=e.$implicit;return d.uc(4).editView(i,n)})("onAfterViewInit",function(){return d.Uc(t),d.uc(4).showArrows()})("onClearLastCreated",function(){return d.Uc(t),d.uc(4).onClearLastCreated.emit()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.bc()}if(2&t){const t=e.$implicit;d.uc(3);const i=d.Rc(5),n=d.uc();d.Dc("ngClass",d.Hc(34,ki,n.twoRows))("twoRows",n.twoRows)("item",t)("project",n.project)("isPaidPlan",n.isPaidPlan)("selected",t.id===(null==n.selectedView?null:n.selectedView.id))("editingOnInit",t.id===n.lastCreatedId)("cancelEditingOnInit",!!n.lastCreatedId)("lockPaywallTemplate",n.lockPaywallTemplate)("makeDefaultPaywallTemplate",n.makeDefaultPaywallTemplate)("templateDropdown",n.templateDropdown)("moveDropdown",n.moveDropdown)("moveItems",n.moveItems)("onlyDeleteIfOwner",n.onlyDeleteIfOwner)("canDelete",n.canDelete)("meUser",n.meUser)("parent",n.parent)("makePersonalPaywallTemplate",n.makePersonalPaywallTemplate)("allowPublicSharing",d.wc(1,28,n.allowPublicSharing$))("cdkDragData",t)("cdkDragStartDelay",d.wc(2,30,n.isTouchDevice$)?500:0)("cuDragScrollContainer",i)("isFavorite",n.favouriteViewIdMap[t.id])("isGuest",n.isGuest)("forShowMore",!0)("canOnlyEditPersonalView",d.wc(3,32,n.canOnlyEditPersonalView$)),d.Jb("data-id",t.id)("data-source","view")}}const Ti=function(){return["viewList"]};function Ci(t,e){if(1&t){const t=d.dc();d.cc(0,"div",34),d.qc("cdkDropListDropped",function(e){return d.Uc(t),d.uc(3).drop(e)}),d.bd(1,Si,4,36,"cu-data-view-item",35),d.vc(2,"slice"),d.bc()}if(2&t){const t=d.uc(3);d.ad("width",200,"px"),d.Dc("cdkDropListConnectedTo",d.Gc(8,Ti)),d.Ib(1),d.Dc("ngForOf",d.xc(2,5,t.viewItems,t.overflowItemIndex))("ngForTrackBy",t.trackById)}}function Di(t,e){if(1&t){const t=d.dc();d.cc(0,"div",26),d.cc(1,"div",27,28),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc(2).showViewMoreButtonActive=!0})("dropdownClose",function(){return d.Uc(t),d.uc(2).showViewMoreButtonActive=!1}),d.cc(3,"div",29),d.cc(4,"div",30),d.ac(5),d.gc(6,31),d.Zb(),d.Xb(7,"div",32),d.bc(),d.bc(),d.bd(8,Ci,3,9,"div",33),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ob("cu-data-view-show-more-active",t.showViewMoreButtonActive),d.Ib(1),d.Dc("dropdownCloseOnInsideClick",!1)("dropdownCloseOthersOnOpen",!1),d.Ib(5),d.kc(t.hiddenViewsLength),d.hc(6)}}const Ii=function(t){return{"cu-data-view-list__scrollable_no-scrolling":t}},Pi=function(){return["showMoreDropdownMenu"]};function Mi(t,e){if(1&t){const t=d.dc();d.cc(0,"div",18),d.bd(1,yi,3,20,"cu-data-view-item",19),d.vc(2,"slice"),d.bc(),d.cc(3,"div",20),d.cc(4,"div",21,9),d.qc("cdkDropListDropped",function(e){return d.Uc(t),d.uc().drop(e)})("scroll",function(){return d.Uc(t),d.uc().showArrows()}),d.bd(6,xi,4,35,"cu-data-view-item",22),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"slice"),d.vc(11,"slice"),d.bd(12,Di,9,5,"div",23),d.vc(13,"async"),d.vc(14,"async"),d.vc(15,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc();let e=null,i=null;d.Dc("ngClass",d.Hc(31,_i,t.twoRows)),d.Ib(1),d.Dc("ngForOf",d.yc(2,8,t.viewItems,0,t.fixedCount))("ngForTrackBy",t.trackById),d.Ib(3),d.Dc("ngClass",d.Hc(33,Ii,t.twoRows))("cdkDropListConnectedTo",d.Gc(35,Pi)),d.Ib(2),d.Dc("ngForOf",!t.showViewMoreButton||(null==(e=d.wc(7,12,t.user$))?null:e.dashboard)!==t.LayoutVersion.Three&&(null==(e=d.wc(8,14,t.user$))?null:e.dashboard)!==t.LayoutVersion.Four&&(null==(e=d.wc(9,16,t.user$))?null:e.dashboard)!==t.LayoutVersion.Five?d.xc(11,22,t.viewItems,t.fixedCount):d.yc(10,18,t.viewItems,t.fixedCount,t.overflowItemIndex))("ngForTrackBy",t.trackById),d.Ib(6),d.Dc("ngIf",t.showViewMoreButton&&t.hiddenViewsLength&&((null==(i=d.wc(13,25,t.user$))?null:i.dashboard)===t.LayoutVersion.Three||(null==(i=d.wc(14,27,t.user$))?null:i.dashboard)===t.LayoutVersion.Four||(null==(i=d.wc(15,29,t.user$))?null:i.dashboard)===t.LayoutVersion.Five))}}function Oi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-add-dropdown",37,38),d.qc("onHidden",function(){return d.Uc(t),d.uc().onPaywallPopoverHide.emit()})("onSelect",function(e){return d.Uc(t),d.uc().addNewItem(e)})("onClose",function(){return d.Uc(t),d.uc().closeDropdown()}),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.cc(8,"div",39),d.Xb(9,"div",40),d.cc(10,"div",41),d.gc(11,42),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc();let e=null;d.Dc("isAllSpaces",d.wc(3,11,t.isAllSpaces$))("openViewType",t.openViewType)("canOnlyCreatePersonalViews",t.canOnlyCreatePersonalViews)("defaultToPersonalView",(null==(e=d.wc(4,13,t.team$))?null:e.personal_views)&&(null==(e=d.wc(5,15,t.team$))?null:e.plan_id)===t.TeamPlan.ENTERPRISE)("groupViews",t.groupViews)("groupingItems",t.groupingItems)("popover",t.createPaywallTemplate)("outsideClick",!0)("hostElement",t.hostElement)("hasGanttAccess",d.wc(6,17,t.hasGanttAccess$))("team",d.wc(7,19,t.team$))}}let $i=(()=>{class t{constructor(t,e,i){this.store=t,this.cdr=e,this.zone=i,this.DataViewType=$.i,this.DataViewParentType=$.e,this.LayoutVersion=H.b,this.isShowLeftArrow=!1,this.isShowRightArrow=!1,this.fixedCount=1,this.showViewMoreButton=!1,this.showViewMoreButtonActive=!1,this.groupItems=[],this.preferenceMap={},this.TeamPlan=F.f,this.twoRows=!0,this.pinnedViews=[],this.canDelete=!0,this.onResetViewState=new d.o,this.onAdd=new d.o,this.onSelect=new d.o,this.onEdit=new d.o,this.onDrop=new d.o,this.onPaywallPopoverHide=new d.o,this.onEditViewSettings=new d.o,this.onFetchView=new d.o,this.onClearLastCreated=new d.o,this.trackById=Object(j.d)("id"),this.trackByTypeParent=Object(j.a)("type","parentId"),this.hasGanttAccess$=this.store.select(z.ganttHasAccessSelector),this.user$=this.store.select(z.getUser),this.isAllSpaces$=this.store.select(z.getProject).pipe(Object(Qt.a)(t=>!t)),this.team$=this.store.select(z.getTeam),this.allowPublicSharing$=this.store.select(z.getAllowPublicSharing),this.canOnlyEditPersonalView$=Object(ii.a)([this.store.select(z.getUserEnterprisePermissions),this.store.select(z.getTeam)]).pipe(Object(Qt.a)(([t,e])=>e?e.plan_id===F.f.ENTERPRISE&&(!t||t.views===ui.b.OFF):null)),this.destroy$=new B.a,this.favouriteViewIdMap={},this.dataViewTypeTitle=$.s,this.isTouchDevice$=li.a}ngOnInit(){this.showArrowsWithCheck(),this.zone.runOutsideAngular(()=>{Object(ni.a)(window,"resize").pipe(Object(ri.a)(1e3),Object(A.a)(this.destroy$)).subscribe(()=>{this.showArrowsWithCheck(),this.layoutType!==H.b.Four&&this.layoutType!==H.b.Three&&this.layoutType!==H.b.Five||(this.determineShowMore(),this.addMoreDropdown&&this.addMoreDropdown.checkPositioning())})})}ngOnChanges(t){if(t.createDataViewState&&this.createDataViewState===E.b.errorLimitViews&&this.pop.show(),(t.parentType||t.project)&&(this.fixedCount=this.parentType===$.e.SharedSpace||this.parentType===$.e.Team?3:this.project&&this.project.preset_views?this.project.preset_views.length:1),t.items&&(this.groupViews?(this.groupItems=this.items,this.viewItems=[]):(this.viewItems=this.items,this.groupItems=[])),t.groupPreference){const t=this.groupPreference||{};this.preferenceMap=(this.groupItems||[]).reduce((e,i)=>{let n;return t[i.type]&&(n=i.personal.find(e=>e.id===t[i.type]),n||(n=i.workspace.find(e=>e.id===t[i.type]))),n||(i.personal.length?n=i.personal[0]:i.workspace.length&&(n=i.workspace[0])),e[i.type]=n,e},{})}t.items&&t.items.currentValue&&t.items.previousValue&&t.items.currentValue.length!==t.items.previousValue.length&&(this.showArrowsWithCheck(),this.showViewMoreButton&&this.showMoreDropdown&&t.items.currentValue.length>t.items.previousValue.length&&!t.parent&&this.showMoreDropdown.open()),(t.sidebarCollapsed||t.spacesBarCollapsed||t.sidebarWidth||t.spacesBarWidth)&&this.showArrowsWithCheck(250),t.favorites&&(this.favouriteViewIdMap={},(this.favorites||[]).forEach(t=>{this.favouriteViewIdMap[t.view_id]=!0})),this.checkIfNeedDetermineShowMore(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}dropInGroup(t){t.newItems.push(...this.pinnedViews||[]),this.groupItems.forEach(e=>{e.type!==t.item.viewType&&(t.newItems.push(...e.workspace),t.newItems.push(...e.personal))}),this.onDrop.emit(t)}addNewItem(t){this.onAdd.emit({name:"",viewType:t.id,options:t.options})}editView(t,e){this.onEdit.emit({action:t.action,data:t.data,view:e})}scrollToDirection(t){this.animateScroll(0,this.viewList.nativeElement.scrollLeft,this.viewList.nativeElement.clientWidth-70,400,t)}animateScroll(t,e,i,n,o){this.viewList.nativeElement.scrollLeft=this.easeInOutQuad(t+=20,e,i,n,o),this.showArrowsWithCheck(),t<n&&setTimeout(()=>{this.animateScroll(t,e,i,n,o)},20)}easeInOutQuad(t,e,i,n,o="right"){return(t/=n/2)<1?"left"===o?e-i/2*t*t:e+i/2*t*t:(t--,"left"===o?e- -i/2*(t*(t-2)-1):-i/2*(t*(t-2)-1)+e)}showArrows(){if(this.layoutType!==H.b.Two&&!this.groupViews)return;const t=this.viewList.nativeElement.scrollLeft,e=this.viewList.nativeElement.scrollWidth,i=this.viewList.nativeElement.clientWidth;this.isShowLeftArrow=0!==t,this.isShowRightArrow=e!==t+i}drop(t){let e=t.previousIndex+this.fixedCount,i=t.currentIndex+this.fixedCount,n=null,o=null;const a=[...this.viewItems];this.layoutType!==H.b.Three&&this.layoutType!==H.b.Four&&this.layoutType!==H.b.Five||(t.previousContainer===t.container?"showMoreDropdownMenu"===t.container.id&&(e=t.previousIndex+this.visibleViewsLength,i=t.currentIndex+this.visibleViewsLength):("showMoreDropdownMenu"===t.container.id&&(i=t.currentIndex+this.visibleViewsLength-1),"viewList"===t.container.id&&(e=t.previousIndex+this.visibleViewsLength))),Object(I.g)(a,e,i),i>this.fixedCount&&(n=a[i-1]),i<a.length-1&&(o=a[i+1]),this.onDrop.emit({item:t.item.data,fromIndex:e,toIndex:i,newItems:a,prevItem:n,nextItem:o})}dropPinned(t){const e=t.previousIndex,i=t.currentIndex;let n=null,o=null;const a=[...this.pinnedViews];Object(I.g)(a,e,i),i>0&&(n=a[i-1]),i<a.length-1&&(o=a[i+1]),this.items.forEach(t=>{a.push(...t.workspace),a.push(...t.personal)}),this.onDrop.emit({item:t.item.data,fromIndex:e,toIndex:i,newItems:a,prevItem:n,nextItem:o})}showArrowsWithCheck(t=0){setTimeout(()=>{this.showArrows(),this.cdr.detectChanges()},t)}openAddView(t){this.hostElement=t,this.addMoreDropdown&&(this.addMoreDropdown.visible=!1,this.cdr.detectChanges(),this.addMoreDropdown.open())}closeDropdown(){this.openViewType=null,this.addMoreDropdown&&(this.hostElement=null,this.cdr.detectChanges())}checkIfNeedDetermineShowMore(t){if(this.groupViews)return;if(!this.items||this.items.length===this.fixedCount)return void(this.showViewMoreButton=!1);const e=new B.a;Object(oi.a)(100).pipe(Object(A.a)(Object(ai.a)(this.destroy$,e))).subscribe(()=>{this.viewList&&this.viewList.nativeElement.offsetWidth&&(e.next(),this.addMoreDropdown&&this.addMoreDropdown.checkPositioning(),((this.layoutType===H.b.Four||this.layoutType===H.b.Three||this.layoutType===H.b.Five)&&t.items&&t.items.currentValue&&!Object(ci.a)(t.items.currentValue,t.items.previousValue)||t.layoutType&&t.layoutType.currentValue!==t.layoutType.previousValue)&&this.determineShowMore())})}determineShowMore(){if(this.groupViews)return;this.showViewMoreButton=!1;let t=0,e=!1,i=null;const n=document.getElementById("textWidth"),o=document.querySelector(".cu2-views-bar__views").offsetWidth-170;for(let a=0;a<(this.viewItems||[]).length;a++){const r=this.viewItems[a].name?11:-1,s=Object(si.a)(n,this.viewItems[a].name)+r;let c=0;this.selectedView&&this.viewItems[a].id===this.selectedView.id&&(c=27);let l=s+30+10+c;const u=180;if(l=l>u?u:l,t+=l,t>o){e=!0,i=this.viewItems[a].id;break}}e&&i&&(this.overflowItemIndex=this.items.findIndex(t=>t.id===i),-1!==this.overflowItemIndex&&(this.hiddenViewsLength=this.viewItems.length-this.overflowItemIndex,this.visibleViewsLength=this.viewItems.length-this.hiddenViewsLength),this.showViewMoreButton=!0),this.cdr.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(K.Store),d.Wb(d.h),d.Wb(d.B))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-data-view-list"]],viewQuery:function(t,e){if(1&t&&(d.jd(di,1),d.jd(hi,1),d.jd(pi,1),d.jd(fi,1),d.jd(gi,1)),2&t){let t;d.Qc(t=d.rc())&&(e.viewList=t.first),d.Qc(t=d.rc())&&(e.pop=t.first),d.Qc(t=d.rc())&&(e.showMoreDropdown=t.first),d.Qc(t=d.rc())&&(e.showMoreDropdownMenu=t.first),d.Qc(t=d.rc())&&(e.addMoreDropdown=t.first)}},hostAttrs:[1,"cu-data-view-list"],inputs:{items:"items",selectedView:"selectedView",pinnedViews:"pinnedViews",project:"project",lastCreatedId:"lastCreatedId",createDataViewState:"createDataViewState",favorites:"favorites",lockPaywallTemplate:"lockPaywallTemplate",makeDefaultPaywallTemplate:"makeDefaultPaywallTemplate",templateDropdown:"templateDropdown",moveDropdown:"moveDropdown",moveItems:"moveItems",makePersonalPaywallTemplate:"makePersonalPaywallTemplate",createPaywallTemplate:"createPaywallTemplate",isGuest:"isGuest",isPaidPlan:"isPaidPlan",parentType:"parentType",parent:"parent",layoutType:"layoutType",sidebarWidth:"sidebarWidth",canDelete:"canDelete",onlyDeleteIfOwner:"onlyDeleteIfOwner",meUser:"meUser",groupViews:"groupViews",sidebarCollapsed:"sidebarCollapsed",spacesBarCollapsed:"spacesBarCollapsed",spacesBarWidth:"spacesBarWidth",groupPreference:"groupPreference",canOnlyCreatePersonalViews:"canOnlyCreatePersonalViews",team:"team",groupingItems:"groupingItems"},outputs:{onResetViewState:"onResetViewState",onAdd:"onAdd",onSelect:"onSelect",onEdit:"onEdit",onDrop:"onDrop",onPaywallPopoverHide:"onPaywallPopoverHide",onEditViewSettings:"onEditViewSettings",onFetchView:"onFetchView",onClearLastCreated:"onClearLastCreated"},features:[d.Gb],decls:6,vars:5,consts:function(){let t,e,i;return t=$localize`:@@cu-data-view-list__hidden-views-length-more␟4728d05be280f969044fcde11d82c5c42edc0aa2␟8425300401982227924:${"\ufffd0\ufffd"}:INTERPOLATION: more`,e=$localize`:@@common_add-view␟9a8c17c910d649961afa47d68f4c6085a72b48e5␟6038679635145965293:Add View`,i=$localize`:@@common_view␟6829218544e108e152f5fa72cb79c4ccb82e0d06␟2509141182388535183:View`,[[4,"ngIf","ngIfElse"],["showOldViews",""],["containerClass","popover_white popover_no-padding","triggers","","container","body","placement","bottom",3,"isAllSpaces","openViewType","canOnlyCreatePersonalViews","defaultToPersonalView","groupViews","groupingItems","popover","outsideClick","hostElement","hasGanttAccess","team","onHidden","onSelect","onClose",4,"ngIf"],["id","textWidth"],[1,"cu-data-view-list__items","cu-data-view-list__items-group"],[1,"cu-data-view-list__edge","cu-data-view-list__edge_left",3,"ngClass","click"],[1,"cu-data-view-list__edge-arrow","cu-data-view-list__edge-arrow_left"],["icon","cu2-chevron-circle-right",1,"cu-data-view-list__edge-arrow-icon"],["cuPreventScrollNavigation","",1,"cu-data-view-list__scrollable",3,"onScroll"],["viewList",""],["cdkDropList","","cdkDropListOrientation","horizontal",1,"cu-data-view-list__default",3,"ngClass","cdkDropListDropped"],["pinnedList",""],["cdkDrag","","cuDragScroll","",3,"twoRows","groupViews","item","selected","isGuest","isPaidPlan","project","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","cdkDragData","cdkDragStartDelay","cuDragScrollContainer","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item","selectedView","groupSelection","groupViews","twoRows","isGuest","isPaidPlan","project","meUser","favouriteViewIdMap","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","isTouchDevice","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","canCreateView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings","onOpenAddView","onDrop","onOpenGroupList",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-data-view-list__edge","cu-data-view-list__edge_right",3,"ngClass","click"],[1,"cu-data-view-list__edge-arrow"],["cdkDrag","","cuDragScroll","",3,"twoRows","groupViews","item","selected","isGuest","isPaidPlan","project","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","cdkDragData","cdkDragStartDelay","cuDragScrollContainer","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings"],[3,"item","selectedView","groupSelection","groupViews","twoRows","isGuest","isPaidPlan","project","meUser","favouriteViewIdMap","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","isTouchDevice","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","canCreateView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings","onOpenAddView","onDrop","onOpenGroupList"],[1,"cu-data-view-list__default",3,"ngClass"],[3,"twoRows","item","selected","isGuest","isPaidPlan","project","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-data-view-list__items"],["cuPreventScrollNavigation","","id","viewList","cdkDropList","","cdkDropListOrientation","horizontal",1,"cu-data-view-list__scrollable",3,"ngClass","cdkDropListConnectedTo","cdkDropListDropped","scroll"],["cdkDrag","","cuDragScroll","",3,"ngClass","twoRows","item","project","isPaidPlan","onlyDeleteIfOwner","canDelete","meUser","selected","editingOnInit","cancelEditingOnInit","lockPaywallTemplate","makeDefaultPaywallTemplate","templateDropdown","moveDropdown","moveItems","parent","makePersonalPaywallTemplate","allowPublicSharing","cdkDragData","cdkDragStartDelay","cuDragScrollContainer","isFavorite","isGuest","canOnlyEditPersonalView","onResetViewState","onSelect","onEdit","onAfterViewInit","onFetchView","onClearLastCreated",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-data-view-show-more",3,"cu-data-view-show-more-active",4,"ngIf"],[3,"twoRows","item","selected","isGuest","isPaidPlan","project","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings"],["cdkDrag","","cuDragScroll","",3,"ngClass","twoRows","item","project","isPaidPlan","onlyDeleteIfOwner","canDelete","meUser","selected","editingOnInit","cancelEditingOnInit","lockPaywallTemplate","makeDefaultPaywallTemplate","templateDropdown","moveDropdown","moveItems","parent","makePersonalPaywallTemplate","allowPublicSharing","cdkDragData","cdkDragStartDelay","cuDragScrollContainer","isFavorite","isGuest","canOnlyEditPersonalView","onResetViewState","onSelect","onEdit","onAfterViewInit","onFetchView","onClearLastCreated"],[1,"cu-data-view-show-more"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownCloseOthersOnOpen","dropdownOpen","dropdownClose"],["showMoreDropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-data-view-show-more-toggle"],t,["icon","cu2-caret-down"],["id","showMoreDropdownMenu","class","cu-data-view-show-more-dropdown","cdkDropList","","cdkDropListOrientation","vertical",3,"width","cdkDropListConnectedTo","cdkDropListDropped",4,"cuDropdownMenu"],["id","showMoreDropdownMenu","cdkDropList","","cdkDropListOrientation","vertical",1,"cu-data-view-show-more-dropdown",3,"cdkDropListConnectedTo","cdkDropListDropped"],["class","cu-data-view-show-more-dropdown-item","cdkDrag","","cuDragScroll","",3,"ngClass","twoRows","item","project","isPaidPlan","selected","editingOnInit","cancelEditingOnInit","lockPaywallTemplate","makeDefaultPaywallTemplate","templateDropdown","moveDropdown","moveItems","onlyDeleteIfOwner","canDelete","meUser","parent","makePersonalPaywallTemplate","allowPublicSharing","cdkDragData","cdkDragStartDelay","cuDragScrollContainer","isFavorite","isGuest","forShowMore","canOnlyEditPersonalView","onResetViewState","onSelect","onEdit","onAfterViewInit","onClearLastCreated",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cuDragScroll","",1,"cu-data-view-show-more-dropdown-item",3,"ngClass","twoRows","item","project","isPaidPlan","selected","editingOnInit","cancelEditingOnInit","lockPaywallTemplate","makeDefaultPaywallTemplate","templateDropdown","moveDropdown","moveItems","onlyDeleteIfOwner","canDelete","meUser","parent","makePersonalPaywallTemplate","allowPublicSharing","cdkDragData","cdkDragStartDelay","cuDragScrollContainer","isFavorite","isGuest","forShowMore","canOnlyEditPersonalView","onResetViewState","onSelect","onEdit","onAfterViewInit","onClearLastCreated"],["containerClass","popover_white popover_no-padding","triggers","","container","body","placement","bottom",3,"isAllSpaces","openViewType","canOnlyCreatePersonalViews","defaultToPersonalView","groupViews","groupingItems","popover","outsideClick","hostElement","hasGanttAccess","team","onHidden","onSelect","onClose"],["addMoreDropdown","","pop","bs-popover"],["cuTooltip",e,1,"cu-data-view-list__add","cu-data-view-list__add_tab"],["icon","cu2-plus",1,"cu-data-view-list__add-icon"],[1,"cu-data-view-list__add-text"],i]},template:function(t,e){if(1&t&&(d.bd(0,wi,14,13,"ng-container",0),d.bd(1,Mi,16,36,"ng-template",null,1,d.cd),d.bd(3,Oi,12,21,"cu-data-view-add-dropdown",2),d.vc(4,"async"),d.Xb(5,"div",3)),2&t){const t=d.Rc(2);let i=null;d.Dc("ngIf",e.groupViews)("ngIfElse",t),d.Ib(3),d.Dc("ngIf",(null==e.parent||null==e.parent.permissions?null:e.parent.permissions.create_view)||(!e.parent||e.canOnlyCreatePersonalViews)&&e.parentType&&(null==e.selectedView||null==e.selectedView.parent?null:e.selectedView.parent.type)!==e.DataViewParentType.SharedSpace||e.parentType===e.DataViewParentType.SharedSpace&&e.isGuest&&(null==(i=d.wc(4,3,e.team$))||null==i.guest_settings?null:i.guest_settings.can_create_views))}},styles:['.cu-data-view-list{display:flex;align-items:center;padding-right:5px}.cu2-views-bar_v6 .cu-data-view-list{padding:0;height:100%}.cu-data-view-list__default{display:flex;align-items:center;padding:10px 0;position:relative}.cu-data-view-list__default_two-rows{padding:0}.cu-data-view-list__default_two-rows:after{display:none}.cu-data-view-list__default:after{content:"";width:1px;height:16px;background:#e9ebf0;margin:0 0 0 8px}.contrast_high .cu-data-view-list__default:after{background:#dedede}.dark-theme .cu-data-view-list__default:after{background:#828588}.cu-data-view-list__items{display:flex;align-items:center;min-width:0;position:relative;margin-right:-1px;overflow:hidden}.cu2-views-bar_v6 .cu-data-view-list__items{height:100%}.cu-data-view-list__items.cu-data-view-list__items-group .cu-data-view-list__scrollable{margin-bottom:-30px}.cu-data-view-list_two-rows .cu-data-view-list__items{margin-right:0}.cu-data-view-list__edge{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;position:absolute;width:30px;height:100%;top:0;z-index:20;cursor:pointer;opacity:1;overflow:hidden}.cu-data-view-list__edge:hover .cu-data-view-list__edge-arrow-icon{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-data-view-list__edge:hover .cu-data-view-list__edge-arrow-icon{fill:var(--theme-main-color-dark)}}.cu-dashboard__body_v2 .cu-data-view-list__edge:after{display:none}.cu-data-view-list__edge_hidden{opacity:0;width:0}.cu-data-view-list__edge_left{left:0}.cu-data-view-list__edge_left:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:calc(100% - 1px);background:linear-gradient(90deg,#fff 0,#fff 70%,hsla(0,0%,100%,0))}.dark-theme .cu-data-view-list__edge_left:before{background:linear-gradient(90deg,#2b343b 0,#2b343b 70%,rgba(43,52,59,0))}.cu2-views-bar_v6 .cu-data-view-list__edge_left:before{height:100%}.cu-data-view-list__edge_left:after{content:"";display:block;position:absolute;left:0;bottom:0;width:100%;height:1px;background:linear-gradient(90deg,#e9ebf0 0,#e9ebf0 40%,rgba(233,235,240,0) 80%,rgba(233,235,240,0))}.dark-theme .cu-data-view-list__edge_left:after{background:linear-gradient(90deg,#1e272e 0,#1e272e 40%,rgba(30,39,46,0) 80%,rgba(30,39,46,0))}.cu2-views-bar_v6 .cu-data-view-list__edge_left:after{display:none}.cu-data-view-list__edge_right{justify-content:flex-end;right:0}.cu-data-view-list__edge_right:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:calc(100% - 1px);background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 30%,#fff)}.dark-theme .cu-data-view-list__edge_right:before{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 30%,#2b343b)}.cu2-views-bar_v6 .cu-data-view-list__edge_right:before{height:100%}.cu-data-view-list__edge_right:after{content:"";display:block;position:absolute;left:0;bottom:0;width:100%;height:1px;background:linear-gradient(90deg,rgba(233,235,240,0) 0,rgba(233,235,240,0) 40%,#e9ebf0 80%,#e9ebf0)}.dark-theme .cu-data-view-list__edge_right:after{background:linear-gradient(90deg,rgba(30,39,46,0) 0,rgba(30,39,46,0) 40%,#1e272e 80%,#1e272e)}.cu2-views-bar_v6 .cu-data-view-list__edge_right:after{display:none}.cu-data-view-list__edge-arrow{width:20px;height:20px;padding:3px;z-index:10;margin-top:-4px}.cu2-views-bar_v6 .cu-data-view-list__edge-arrow,.cu-dashboard__body_v2 .cu-data-view-list__edge-arrow{margin-top:0}.cu-data-view-list__edge-arrow_left{transform:rotate(180deg)}.cu-data-view-list__edge-arrow-icon{fill:#7b68ee;pointer-events:all}@supports (--theme-main-color:#7b68ee){.cu-data-view-list__edge-arrow-icon{fill:var(--theme-main-color)}}.cu-data-view-list__scrollable{display:inline-flex;align-items:center;padding:0 8px 30px;margin-bottom:-30px;overflow-x:auto}.cu-dashboard__body_v2 .cu-data-view-list__scrollable{padding-top:0}.cu-data-view-list__scrollable::-webkit-scrollbar{display:none;width:0;height:0}@-moz-document url-prefix(){.cu-data-view-list__scrollable{scrollbar-width:none}}.cu-data-view-list__scrollable_no-scrolling{overflow:hidden;max-width:100%;padding:0;margin:0}.cu-data-view-list__add{display:flex;align-items:center;width:auto;height:39px;flex-shrink:0;padding:0 9px 5px;border-radius:7px 7px 0 0;border-bottom:1px solid #e9ebf0}.dark-theme .cu-data-view-list__add{border-bottom-color:#1e272e}.layout-size_compact .cu-data-view-list__add{height:39px;padding:0 9px 5px}.layout-size_default .cu-data-view-list__add{height:44px;padding:0 9px 5px}.layout-size_large .cu-data-view-list__add{padding:0 8px 5px;height:48px}.cu2-views-bar_v6 .cu-data-view-list__add{display:flex;align-items:center;justify-content:center;padding:0 6px;margin:0 0 0 10px;border:0;border-radius:3px;height:25px}.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add,.cu-data-view-list__add:hover{background:#fafbfc}.contrast_high .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add,.contrast_high .cu-data-view-list__add:hover{background:#eee}.dark-theme .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add,.dark-theme .cu-data-view-list__add:hover{background:#1e272e}.cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add,.cu2-views-bar_v6 .cu-data-view-list__add:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add,.dark-theme .cu2-views-bar_v6 .cu-data-view-list__add:hover{background-color:#1e272e}.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-icon,.cu-data-view-list__add:hover .cu-data-view-list__add-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-icon,.cu-data-view-list__add:hover .cu-data-view-list__add-icon{fill:var(--theme-main-color)}}.dark-theme .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-icon,.dark-theme .cu-data-view-list__add:hover .cu-data-view-list__add-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-icon,.dark-theme .cu-data-view-list__add:hover .cu-data-view-list__add-icon{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-icon,.cu2-views-bar_v6 .cu-data-view-list__add:hover .cu-data-view-list__add-icon{fill:#292d34}.dark-theme .cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-icon,.dark-theme .cu2-views-bar_v6 .cu-data-view-list__add:hover .cu-data-view-list__add-icon{fill:#d5d6d7}.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-text,.cu-data-view-list__add:hover .cu-data-view-list__add-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-text,.cu-data-view-list__add:hover .cu-data-view-list__add-text{color:var(--theme-main-color)}}.dark-theme .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-text,.dark-theme .cu-data-view-list__add:hover .cu-data-view-list__add-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-text,.dark-theme .cu-data-view-list__add:hover .cu-data-view-list__add-text{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-text,.cu2-views-bar_v6 .cu-data-view-list__add:hover .cu-data-view-list__add-text{color:#292d34}.dark-theme .cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add .cu-data-view-list__add-text,.dark-theme .cu2-views-bar_v6 .cu-data-view-list__add:hover .cu-data-view-list__add-text{color:#d5d6d7}.cu-data-view-list__add .cu-data-view-list__add-icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86);width:14px;height:14px;padding:1px;margin-right:5px;border-radius:50%;fill:#292d34}.dark-theme .cu-data-view-list__add .cu-data-view-list__add-icon{fill:#d5d6d7}.cu2-views-bar_v6 .cu-data-view-list__add .cu-data-view-list__add-icon{width:13px;height:13px}.cu-data-view-list__add .cu-data-view-list__add-text{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-data-view-list__add .cu-data-view-list__add-text{color:#d5d6d7}.cu-data-view-list__add:before{content:"";display:block;position:absolute;z-index:10;width:1px;height:20px;left:0;background:#e9ebf0}.dark-theme .cu-data-view-list__add:before{background:#1e272e}.cu-data-view-list__add-icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:30px;height:30px;padding:10px;border-radius:3px;fill:#bcc0c7}.dark-theme .cu-data-view-list__add-icon{fill:#828588}.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add-icon,.cu-data-view-list__add-icon:hover{fill:#7b68ee;background-color:#f2f2f2}@supports (--theme-main-color:#7b68ee){.cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add-icon,.cu-data-view-list__add-icon:hover{fill:var(--theme-main-color)}}.dark-theme .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add-icon,.dark-theme .cu-data-view-list__add-icon:hover{background-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-add-dropdown .cu-dropdown_open .cu-data-view-list__add-icon,.cu2-views-bar_v6 .cu-data-view-list__add-icon:hover{background:transparent}.cu-data-view-list #textWidth{position:absolute;visibility:hidden;height:auto;width:auto;white-space:nowrap}.cu-data-view-list .cu-data-view-list__add-v4{flex-grow:1}.cu-data-view-show-more{min-width:85px}.cu-data-view-show-more-toggle{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;cursor:pointer;box-sizing:border-box;height:37px;padding:0 10px 4px;display:flex;align-items:center;justify-content:space-between;border-radius:7px 7px 0 0;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-show-more-toggle{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-show-more-toggle{color:#d5d6d7}.layout-size_compact .cu-data-view-show-more-toggle{height:37px;font-size:13px}.layout-size_default .cu-data-view-show-more-toggle{height:42px;font-size:14px}.layout-size_large .cu-data-view-show-more-toggle{height:46px;font-size:14px}.cu-data-view-show-more-toggle:hover{background:#fafbfc}.contrast_high .cu-data-view-show-more-toggle:hover{background:#eee}.dark-theme .cu-data-view-show-more-toggle:hover{background:#1e272e}.cu-data-view-show-more-toggle .icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:8px;height:13px;margin-left:5px;fill:#7c828d}.dark-theme .cu-data-view-show-more-toggle .icon{fill:#abaeb0}.cu-data-view-show-more.cu-data-view-show-more-active .cu-data-view-show-more-toggle{background:#fafbfc}.contrast_high .cu-data-view-show-more.cu-data-view-show-more-active .cu-data-view-show-more-toggle{background:#eee}.dark-theme .cu-data-view-show-more.cu-data-view-show-more-active .cu-data-view-show-more-toggle{background:#1e272e}.cu-data-view-show-more-dropdown{max-height:70vh;overflow:auto}.cu-os-win .cu-data-view-show-more-dropdown{scrollbar-width:thin}.cu-os-win .cu-data-view-show-more-dropdown::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-data-view-show-more-dropdown::-webkit-scrollbar-track,.cu-os-win .cu-data-view-show-more-dropdown::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-data-view-show-more-dropdown::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-data-view-show-more-dropdown::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-data-view-show-more-dropdown::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar,.cu-os-win .dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar,.cu-os-win.dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-data-view-show-more-dropdown::-webkit-scrollbar-thumb:hover{border-color:#384047}.cu-data-view-show-more-dropdown-item{width:100%;background:#fff!important;border:none!important;border-bottom:1px solid #e9ebf0!important;margin:0!important;border-radius:0!important;max-width:100%!important}.cu-data-view-show-more-dropdown-item:after,.cu-data-view-show-more-dropdown-item:before{display:none!important}.cu-data-view-show-more-dropdown-item .cu-data-view-item__link{padding:0!important}.dark-theme .cu-data-view-show-more-dropdown-item{background:#384047!important;border-bottom:1px solid #1e272e!important}.dark-theme .cu-data-view-show-more-dropdown-item:hover{background:#2b343b!important}.cu-data-view-show-more-dropdown-item:last-of-type{border-bottom:none!important}.cu-data-view-show-more-dropdown-item:hover{background:#fafbfc!important}.cu-data-view-show-more-dropdown-item .cu-data-view-item__name:after{display:none!important}.cu-data-view-show-more-dropdown-item .cu-data-view-item__link{flex-grow:1}.cu-data-view-show-more-dropdown-item .cu-data-view-item__link.cu-data-view-item__link_icon{flex-grow:0}.cu-data-view-show-more-dropdown-item .cu-data-view-item__no-name .cu-data-view-item__link_icon{flex-grow:1}'],encapsulation:2,changeDetection:0}),t})();var ji=i("an+h"),Li=i("LdB9"),Ei=i("T5D4"),Ni=i("y71m"),Ai=i("YbeZ"),Vi=i("pLZG"),zi=i("sf8M");const Fi=["dropdown"];function Bi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",3),d.qc("onResetViewState",function(){return d.Uc(t),d.uc().onResetViewState.emit()})("onSelect",function(){d.Uc(t);const e=d.uc();return e.onSelect.emit(e.singleView)})("onFetchView",function(e){return d.Uc(t),d.uc().onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc().onClearLastCreated.emit()})("onEdit",function(e){d.Uc(t);const i=d.uc();return i.onEdit.emit({action:e.action,data:e.data,view:i.singleView})})("onEditViewSettings",function(){return d.Uc(t),d.uc().onEditViewSettings.emit()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.bc()}if(2&t){const t=d.uc();let e=null;d.Dc("item",t.singleView)("selected",(null==t.selectedView?null:t.selectedView.id)===t.singleView.id)("isGuest",t.isGuest)("twoRows",t.twoRows)("isPaidPlan",t.isPaidPlan)("meUser",t.meUser)("project",t.project)("groupViews",t.groupViews)("isFavorite",t.favouriteViewIdMap[t.singleView.id])("isDarker",d.wc(1,19,t.isActivityView$)&&(null==(e=d.wc(2,21,t.user$))?null:e.dashboard)!==t.LayoutVersion.Six)("templateDropdown",t.templateDropdown)("moveDropdown",t.moveDropdown)("moveItems",t.moveItems)("lockPaywallTemplate",t.lockPaywallTemplate)("parent",t.parent)("makeDefaultPaywallTemplate",t.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",t.makePersonalPaywallTemplate)("allowPublicSharing",t.allowPublicSharing)("canOnlyEditPersonalView",d.wc(3,23,t.canOnlyEditPersonalView$))}}function Ri(t,e){}function Ui(t,e){if(1&t&&(d.cc(0,"div",20),d.bd(1,Ri,0,0,"ng-template",21),d.bc()),2&t){d.uc(2);const t=d.Rc(4);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}function Gi(t,e){if(1&t){const t=d.dc();d.cc(0,"div",4,5),d.qc("dropdownOpen",function(){d.Uc(t);const e=d.uc();return e.onOpenGroupList.emit(e.item.type)}),d.cc(2,"div",6,7),d.vc(4,"async"),d.vc(5,"async"),d.Xb(6,"div",8),d.cc(7,"a",9),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.checkOnOpenDropdown(e.groupSelection,e.selectedView)}),d.vc(8,"dataViewLink"),d.cc(9,"div",10),d.Xb(10,"div",11),d.bc(),d.bc(),d.cc(11,"a",12),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.checkOnOpenDropdown(e.groupSelection,e.selectedView)}),d.vc(12,"dataViewLink"),d.cc(13,"div",13),d.cc(14,"div",14),d.dd(15),d.bc(),d.bc(),d.bc(),d.cc(16,"div",15,16),d.cc(18,"div",17),d.dd(19),d.Xb(20,"div",18),d.vc(21,"async"),d.bc(),d.bc(),d.bc(),d.bd(22,Ui,2,1,"div",19),d.bc()}if(2&t){const t=d.Rc(3),e=d.uc();let i=null,n=null;d.Dc("dropdownCloseOnInsideClick",!1)("dropdownCloseOnModal",!0)("dropdownCloseOthersOnOpen",!0)("dropdownHostElement",t),d.Ib(2),d.Ob("cu-data-view-item_selected",(null==e.selectedView?null:e.selectedView.viewType)===(null==e.item?null:e.item.type)&&!(null!=e.selectedView&&e.selectedView.pinned))("cu-data-view-item_tab",e.twoRows)("cu-data-view-item_darker",d.wc(4,18,e.isActivityView$)&&(null==(i=d.wc(5,20,e.user$))?null:i.dashboard)!==e.LayoutVersion.Six),d.Ib(5),d.Dc("cuDraggable",!1)("routerLink",e.groupSelection?d.wc(8,22,e.groupSelection):null),d.Ib(3),d.Dc("icon","cu2-view-"+(null==e.item?null:e.item.type)),d.Ib(1),d.Dc("routerLink",e.groupSelection?d.wc(12,24,e.groupSelection):null)("cuDraggable",!1),d.Ib(4),d.fd(" ",(null==e.selectedView?null:e.selectedView.viewType)!==(null==e.item?null:e.item.type)||null!=e.selectedView&&e.selectedView.pinned?e.groupSelection?e.groupSelection.name||e.item.title:null==e.item?null:e.item.title:e.selectedView.name||e.item.title," "),d.Ib(4),d.fd(" ",e.item.count," "),d.Ib(1),d.Dc("icon",(null==(n=d.wc(21,26,e.user$))?null:n.dashboard)===e.LayoutVersion.Six?"cu2-caret-down":"arrow-left-bold")}}function Hi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",29),d.qc("onResetViewState",function(){d.Uc(t);const e=d.uc(3);return e.onResetViewState.emit(),e.dropdown.close()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).onSelect.emit(i)})("onFetchView",function(e){return d.Uc(t),d.uc(3).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(3).onClearLastCreated.emit()})("onEdit",function(i){d.Uc(t);const n=e.$implicit;return d.uc(3).onEdit.emit({action:i.action,data:i.data,view:n})})("onEditViewSettings",function(){return d.Uc(t),d.uc(3).onEditViewSettings.emit()}),d.vc(1,"async"),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(3);d.Dc("item",t)("grouped",!0)("selected",(null==i.selectedView?null:i.selectedView.id)===t.id)("isGuest",i.isGuest)("twoRows",!1)("meUser",i.meUser)("isPaidPlan",i.isPaidPlan)("project",i.project)("groupViews",i.groupViews)("isFavorite",i.favouriteViewIdMap[t.id])("templateDropdown",i.templateDropdown)("moveDropdown",i.moveDropdown)("moveItems",i.moveItems)("lockPaywallTemplate",i.lockPaywallTemplate)("parent",i.parent)("makeDefaultPaywallTemplate",i.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",i.makePersonalPaywallTemplate)("allowPublicSharing",i.allowPublicSharing)("openOptionsMenu",i.openOptionsMenu)("cuTooltip",null!=t&&t.defaultStandardView?i.dragDisabledMsg:null)("cdkDragData",t)("cdkDragStartDelay",i.isTouchDevice?500:0)("cdkDragDisabled",null==t?null:t.defaultStandardView)("canOnlyEditPersonalView",d.wc(1,24,i.canOnlyEditPersonalView$))}}function Wi(t,e){if(1&t){const t=d.dc();d.cc(0,"div",25),d.cc(1,"div",26),d.dd(2,"personal views"),d.bc(),d.cc(3,"div",27),d.qc("cdkDropListDropped",function(e){return d.Uc(t),d.uc(2).drop(e,!1)}),d.bd(4,Hi,2,26,"cu-data-view-item",28),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ib(4),d.Dc("ngForOf",t.item.personal)("ngForTrackBy",t.trackById)}}function qi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",29),d.qc("onResetViewState",function(){d.Uc(t);const e=d.uc(4);return e.onResetViewState.emit(),e.dropdown.close()})("onSelect",function(){d.Uc(t);const i=e.ngIf;return d.uc(4).onSelect.emit(i)})("onFetchView",function(e){return d.Uc(t),d.uc(4).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(4).onClearLastCreated.emit()})("onEdit",function(i){d.Uc(t);const n=e.ngIf;return d.uc(4).onEdit.emit({action:i.action,data:i.data,view:n})})("onEditViewSettings",function(){return d.Uc(t),d.uc(4).onEditViewSettings.emit()}),d.vc(1,"async"),d.bc()}if(2&t){const t=e.ngIf,i=d.uc(4);d.Dc("item",t)("grouped",!0)("selected",(null==i.selectedView?null:i.selectedView.id)===t.id)("isGuest",i.isGuest)("twoRows",!1)("meUser",i.meUser)("isPaidPlan",i.isPaidPlan)("project",i.project)("groupViews",i.groupViews)("isFavorite",i.favouriteViewIdMap[t.id])("templateDropdown",i.templateDropdown)("moveDropdown",i.moveDropdown)("moveItems",i.moveItems)("lockPaywallTemplate",i.lockPaywallTemplate)("parent",i.parent)("makeDefaultPaywallTemplate",i.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",i.makePersonalPaywallTemplate)("allowPublicSharing",i.allowPublicSharing)("openOptionsMenu",i.openOptionsMenu)("cuTooltip",null!=t&&t.defaultStandardView?t.canDeleteStandardView?i.cantDragViewText:i.dragDisabledMsg:null)("cdkDragData",t)("cdkDragStartDelay",i.isTouchDevice?500:0)("cdkDragDisabled",null==t?null:t.defaultStandardView)("canOnlyEditPersonalView",d.wc(1,24,i.canOnlyEditPersonalView$))}}function Xi(t,e){if(1&t&&(d.ac(0),d.bd(1,qi,2,26,"cu-data-view-item",31),d.Zb()),2&t){const t=d.uc(3);d.Ib(1),d.Dc("ngIf",t.item.workspace[0])}}function Yi(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-data-view-item",29),d.qc("onResetViewState",function(){d.Uc(t);const e=d.uc(3);return e.onResetViewState.emit(),e.dropdown.close()})("onSelect",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).onSelect.emit(i)})("onFetchView",function(e){return d.Uc(t),d.uc(3).onFetchView.emit(e)})("onClearLastCreated",function(){return d.Uc(t),d.uc(3).onClearLastCreated.emit()})("onEdit",function(i){d.Uc(t);const n=e.$implicit;return d.uc(3).onEdit.emit({action:i.action,data:i.data,view:n})})("onEditViewSettings",function(){return d.Uc(t),d.uc(3).onEditViewSettings.emit()}),d.vc(1,"async"),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(3);d.Dc("item",t)("grouped",!0)("selected",(null==i.selectedView?null:i.selectedView.id)===t.id)("isGuest",i.isGuest)("twoRows",!1)("meUser",i.meUser)("isPaidPlan",i.isPaidPlan)("project",i.project)("groupViews",i.groupViews)("isFavorite",i.favouriteViewIdMap[t.id])("templateDropdown",i.templateDropdown)("moveDropdown",i.moveDropdown)("moveItems",i.moveItems)("lockPaywallTemplate",i.lockPaywallTemplate)("parent",i.parent)("makeDefaultPaywallTemplate",i.makeDefaultPaywallTemplate)("makePersonalPaywallTemplate",i.makePersonalPaywallTemplate)("allowPublicSharing",i.allowPublicSharing)("openOptionsMenu",i.openOptionsMenu)("cuTooltip",null!=t&&t.defaultStandardView?i.dragDisabledMsg:null)("cdkDragData",t)("cdkDragStartDelay",i.isTouchDevice?500:0)("cdkDragDisabled",null==t?null:t.defaultStandardView)("canOnlyEditPersonalView",d.wc(1,24,i.canOnlyEditPersonalView$))}}function Ki(t,e){if(1&t){const t=d.dc();d.cc(0,"div",25),d.cc(1,"div",26),d.dd(2,"views"),d.bc(),d.bd(3,Xi,2,1,"ng-container",30),d.cc(4,"div",27),d.qc("cdkDropListDropped",function(e){d.Uc(t);const i=d.uc(2);return i.drop(e,!0,i.hasRequired)}),d.bd(5,Yi,2,26,"cu-data-view-item",28),d.vc(6,"slice"),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ib(3),d.Dc("ngIf",t.hasRequired),d.Ib(2),d.Dc("ngForOf",d.yc(6,3,t.item.workspace,t.hasRequired?1:0,t.item.workspace.length))("ngForTrackBy",t.trackById)}}function Zi(t,e){if(1&t){const t=d.dc();d.cc(0,"div",32),d.qc("click",function(){return d.Uc(t),d.uc(2).openAddView()}),d.Xb(1,"div",33),d.cc(2,"div",34),d.gc(3,35),d.bc(),d.Xb(4,"div",36),d.bc()}if(2&t){const t=d.uc(2);d.Ib(3),d.kc(t.item.title),d.hc(3)}}function Ji(t,e){if(1&t&&(d.cc(0,"div",22),d.bd(1,Wi,5,2,"div",23),d.bd(2,Ki,7,7,"div",23),d.bc(),d.bd(3,Zi,5,1,"div",24)),2&t){const t=d.uc();d.Ib(1),d.Dc("ngIf",null==t.item||null==t.item.personal?null:t.item.personal.length),d.Ib(1),d.Dc("ngIf",null==t.item||null==t.item.workspace?null:t.item.workspace.length),d.Ib(1),d.Dc("ngIf",t.canCreateView)}}let Qi=(()=>{class t{constructor(t,e){this.element=t,this.store=e,this.dragDisabledMsg=$localize`:@@cu-data-view-group__drag-disabled-msg_required-view:You can't drag a required view`,this.cantDragViewText=$localize`:@@cu-data-view-group__drag-disabled-msg_view:You can't drag this view`,this.openOptionsMenu={open:!1,id:""},this.DataViewParentType=$.e,this.DataViewType=$.i,this.LayoutVersion=H.b,this.selectedView$=this.store.select(X.qb).pipe(Object(Vi.a)(t=>Boolean(t))),this.isActivityView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Activity].includes(t.viewType))),this.user$=this.store.select(z.getUser),this.groupViews=!0,this.twoRows=!1,this.canCreateView=!1,this.isTouchDevice=!1,this.onResetViewState=new d.o,this.onSelect=new d.o,this.onFetchView=new d.o,this.onClearLastCreated=new d.o,this.onEdit=new d.o,this.onDrop=new d.o,this.onOpenAddView=new d.o,this.onOpenGroupList=new d.o,this.onEditViewSettings=new d.o,this.trackById=Object(j.d)("id"),this.canOnlyEditPersonalView$=Object(ii.a)([this.store.select(z.getUserEnterprisePermissions),this.store.select(z.getTeam)]).pipe(Object(Qt.a)(([t,e])=>e?e.plan_id===F.f.ENTERPRISE&&(!t||t.views===ui.b.OFF):null))}onContextMenu(t){1!==this.item.count&&this.dropdown&&(t.preventDefault(),t.stopPropagation(),-1!==this.item.workspace.concat(this.item.personal).findIndex(t=>t.id===this.selectedView.id)&&(this.openOptionsMenu={open:!0,id:this.selectedView.id},this.dropdown.open()))}ngOnInit(){}openAddView(){this.dropdown.close(),this.onOpenAddView.emit(this.element.nativeElement)}ngOnChanges(t){t.item&&(this.singleView=1===this.item.count?this.item.workspace.length?this.item.workspace[0]:this.item.personal[0]:null,this.hasRequired=!!(this.item&&this.item.workspace&&this.item.workspace.some(t=>t.defaultStandardView)))}checkOnOpenDropdown(t,e){t&&e&&t.id===e.id?this.dropdown.open():this.onResetViewState.emit()}drop(t,e=!0,i=!1){const n=i?1:0,o=t.previousIndex+n,a=t.currentIndex+n;let r=null,s=null;const c=e?[...this.item.workspace]:[...this.item.personal],l=e?[...this.item.personal]:[...this.item.workspace];Object(I.g)(c,o,a),a>0&&(r=c[a-1]),a<c.length-1&&(s=c[a+1]),this.onDrop.emit({item:t.item.data,fromIndex:o,toIndex:a,newItems:[...c,...l],prevItem:r,nextItem:s})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(d.m),d.Wb(K.Store))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-data-view-group"]],viewQuery:function(t,e){if(1&t&&d.jd(Fi,1),2&t){let t;d.Qc(t=d.rc())&&(e.dropdown=t.first)}},hostAttrs:[1,"cu-data-view-group"],hostBindings:function(t,e){1&t&&d.qc("contextmenu",function(t){return e.onContextMenu(t)})},inputs:{item:"item",selectedView:"selectedView",groupSelection:"groupSelection",isGuest:"isGuest",isPaidPlan:"isPaidPlan",project:"project",groupViews:"groupViews",favouriteViewIdMap:"favouriteViewIdMap",templateDropdown:"templateDropdown",moveDropdown:"moveDropdown",moveItems:"moveItems",lockPaywallTemplate:"lockPaywallTemplate",parent:"parent",makeDefaultPaywallTemplate:"makeDefaultPaywallTemplate",makePersonalPaywallTemplate:"makePersonalPaywallTemplate",allowPublicSharing:"allowPublicSharing",twoRows:"twoRows",canCreateView:"canCreateView",isTouchDevice:"isTouchDevice",meUser:"meUser"},outputs:{onResetViewState:"onResetViewState",onSelect:"onSelect",onFetchView:"onFetchView",onClearLastCreated:"onClearLastCreated",onEdit:"onEdit",onDrop:"onDrop",onOpenAddView:"onOpenAddView",onOpenGroupList:"onOpenGroupList",onEditViewSettings:"onEditViewSettings"},features:[d.Gb],decls:5,vars:2,consts:function(){let t;return t=$localize`:@@cu-data-view-group__add-view␟f30dc20bfff843411a60cada5f78b5ece4acf72b␟4360971394694164058: Add ${"\ufffd0\ufffd"}:INTERPOLATION: View `,[[3,"item","selected","isGuest","twoRows","isPaidPlan","meUser","project","groupViews","isFavorite","isDarker","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings",4,"ngIf","ngIfElse"],["showViewDropdown",""],["groupListTemplate",""],[3,"item","selected","isGuest","twoRows","isPaidPlan","meUser","project","groupViews","isFavorite","isDarker","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownCloseOnModal","dropdownCloseOthersOnOpen","dropdownHostElement","dropdownOpen"],["dropdown","dropdown"],[1,"cu-data-view-item"],["groupHeader",""],[1,"cu-data-view-item__divider"],[1,"cu-data-view-item__link","cu-data-view-item__link_icon",3,"cuDraggable","routerLink","click"],[1,"cu-data-view-item__icon"],[3,"icon"],[1,"cu-data-view-item__link",3,"routerLink","cuDraggable","click"],[1,"cu-data-view-item__name"],[1,"cu-data-view-item__name-text"],["cuDropdownToggle",""],["dropdownToggle",""],[1,"cu-data-view-group__count"],[1,"cu-data-view-group__count-arrow",3,"icon"],["class","cu-dropdown__menu cu-dropdown__menu_overflow-hidden cu-data-view-group__dropdown",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_overflow-hidden","cu-data-view-group__dropdown"],[3,"ngTemplateOutlet"],[1,"cu-data-view-group__scrollable"],["class","cu-data-view-group__container",4,"ngIf"],["class","cu-data-view-group__add",3,"click",4,"ngIf"],[1,"cu-data-view-group__container"],[1,"cu-data-view-group__header"],["cdkDropList","","cdkDropListOrientation","vertical",3,"cdkDropListDropped"],["cdkDrag","","cuDragScroll","",3,"item","grouped","selected","isGuest","twoRows","meUser","isPaidPlan","project","groupViews","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","openOptionsMenu","cuTooltip","cdkDragData","cdkDragStartDelay","cdkDragDisabled","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cuDragScroll","",3,"item","grouped","selected","isGuest","twoRows","meUser","isPaidPlan","project","groupViews","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","openOptionsMenu","cuTooltip","cdkDragData","cdkDragStartDelay","cdkDragDisabled","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings"],[4,"ngIf"],["cdkDrag","","cuDragScroll","",3,"item","grouped","selected","isGuest","twoRows","meUser","isPaidPlan","project","groupViews","isFavorite","templateDropdown","moveDropdown","moveItems","lockPaywallTemplate","parent","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","allowPublicSharing","openOptionsMenu","cuTooltip","cdkDragData","cdkDragStartDelay","cdkDragDisabled","canOnlyEditPersonalView","onResetViewState","onSelect","onFetchView","onClearLastCreated","onEdit","onEditViewSettings",4,"ngIf"],[1,"cu-data-view-group__add",3,"click"],["icon","cu2-plus",1,"cu-data-view-group__add-icon"],[1,"cu-data-view-group__add-text"],t,["icon","cu2-angle-right",1,"cu-data-view-group__add-arrow"]]},template:function(t,e){if(1&t&&(d.bd(0,Bi,4,25,"cu-data-view-item",0),d.bd(1,Gi,23,28,"ng-template",null,1,d.cd),d.bd(3,Ji,4,3,"ng-template",null,2,d.cd)),2&t){const t=d.Rc(2);d.Dc("ngIf",1===e.item.count)("ngIfElse",t)}},directives:[n.q,ei,tt.b,P.k,ae.a,nt.a,et.a,it.a,n.x,I.d,n.p,I.a,zi.a,ot.a],pipes:[n.b,se.a,n.A],styles:[".cu-data-view-group__container{padding-bottom:5px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-data-view-group__container{border-bottom-color:#1e272e}.cu-data-view-group__count{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;justify-content:center;margin:6px 5px;min-width:18px;height:14px;background:#b9bec7;color:#fff;padding:0 5px;border-radius:4px;font:600 9px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-data-view-group__count{background:#7c828d}.cu2-views-bar_v6 .cu-data-view-group .cu-dropdown_open .cu-data-view-group__count,.cu2-views-bar_v6 .cu-data-view-group__count:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-data-view-group .cu-dropdown_open .cu-data-view-group__count,.dark-theme .cu2-views-bar_v6 .cu-data-view-group__count:hover{background-color:#1e272e}.cu2-views-bar__views_two-rows .cu-data-view-group__count{margin:6px 5px 10px}.layout-size_compact .cu-data-view-group__count{margin-top:6px}.layout-size_default .cu-data-view-group__count,.layout-size_large .cu-data-view-group__count{margin-top:7px}.cu2-views-bar_v6 .cu-data-view-group__count{color:#7b68ee;height:20px;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;background:transparent}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-group__count{color:var(--theme-main-color)}}.cu-data-view-group__count-arrow{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:6px;height:5px;fill:#fff;margin-left:2px;transform:rotate(-90deg)}.cu2-views-bar_v6 .cu-data-view-group__count-arrow{fill:#7b68ee;width:7px;height:11px;margin:-1px 0 0 4px;transform:rotate(0deg)}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-group__count-arrow{fill:var(--theme-main-color)}}.cu-data-view-group .cu-dropdown_open .cu-data-view-group__count-arrow{transform:rotate(90deg)}.cu2-views-bar_v6 .cu-data-view-group .cu-dropdown_open .cu-data-view-group__count-arrow{transform:rotate(180deg)}.cu-data-view-group__dropdown{width:200px;border-radius:6px;overflow:hidden}.cu-data-view-group__header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:sticky;top:0;z-index:10;text-transform:uppercase;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;padding:15px 12px 5px;color:#b9bec7;background:#fff}.dark-theme .cu-data-view-group__header{background:#2b343b}.cu-data-view-group__add{display:flex;align-items:center;height:48px;padding:0 11px;cursor:pointer;position:sticky;bottom:0;margin-top:-1px;border-top:1px solid #e9ebf0;background:#fff}.dark-theme .cu-data-view-group__add{background:#2b343b;border-top-color:#1e272e}.cu-data-view-group__add:hover{background:#f2f2f2}.dark-theme .cu-data-view-group__add:hover{background:#1e272e}.cu-data-view-group__add-icon{background:#7b68ee;width:20px;height:20px;border-radius:5px;padding:4px;fill:#fff;margin-right:8px}@supports (--theme-main-color:#7b68ee){.cu-data-view-group__add-icon{background:var(--theme-main-color)}}.cu-data-view-group__add-text{flex-grow:1;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-data-view-group__add-text{color:#d5d6d7}.cu-data-view-group__add-arrow{width:14px;height:14px;fill:#292d34}.dark-theme .cu-data-view-group__add-arrow{fill:#d5d6d7}.cu-data-view-group__scrollable{overflow-x:hidden;overflow-y:auto;max-height:340px;background:#fff}.cu-os-win .cu-data-view-group__scrollable{scrollbar-width:thin}.cu-os-win .cu-data-view-group__scrollable::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-data-view-group__scrollable::-webkit-scrollbar-track,.cu-os-win .cu-data-view-group__scrollable::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-data-view-group__scrollable::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-data-view-group__scrollable::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-data-view-group__scrollable::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar,.cu-os-win .dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar,.cu-os-win.dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-track{background-color:#2b343b}.cu-os-win.dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-track:hover{background-color:#2b343b}.cu-os-win.dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-data-view-group__scrollable::-webkit-scrollbar-thumb:hover{border-color:#2b343b}.dark-theme .cu-data-view-group__scrollable{background:#2b343b}",'.cu-data-view-item{display:flex;align-items:center;max-width:250px;height:30px;border-radius:3px;overflow:hidden;margin:0 1px;position:relative;background:#fff}.dark-theme .cu-data-view-item{background:#2b343b}.cu2-views-bar_v6 .cu-data-view-item{overflow:visible}.cu-data-view-item .cu-editable__input{min-width:42px}.cu-data-view-item:hover,.cu-data-view-item_selected{background-color:#f2f2f2}.dark-theme .cu-data-view-item:hover,.dark-theme .cu-data-view-item_selected{background-color:#1e272e}.cu-data-view-item:hover .cu-data-view-item__icon,.cu-data-view-item_selected .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item:hover .cu-data-view-item__icon,.cu-data-view-item_selected .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,94.9%,0) 0,#f2f2f2 70%,#f2f2f2)}.dark-theme .cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.dark-theme .cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e 70%,#1e272e)}.cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__name_not-empty:after,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__icon{fill:#bcc0c7;stroke:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item:hover .cu-data-view-item__icon{fill:#828588;stroke:#828588}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab{background:#f2f4f7}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:before{box-shadow:1px 1px 0 1px #f2f4f7}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:before{box-shadow:1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:before{box-shadow:1px 1px 0 1px #1e272e}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:after{box-shadow:-1px 1px 0 1px #f2f4f7}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:after{box-shadow:-1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:after{box-shadow:-1px 1px 0 1px #1e272e}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list{background:#f2f4f7}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list{background:#eee}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list{background:#1e272e}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(242,244,247,0) 0,#f2f4f7)}.contrast_high .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,hsla(0,0%,93.3%,0) 0,#eee)}.dark-theme .cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab:hover .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e)}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(242,244,247,0) 0,#f2f4f7 70%,#f2f4f7)}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab .cu-data-view-item__dropdown-list{background-color:#f2f4f7}.cu-data-view-item_darker.cu-data-view-item_selected.cu-data-view-item_tab .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(250,251,252,0) 0,#f2f4f7)}.cu-data-view-item__pin{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#b9bec7;width:12px;height:15px;padding:2px;cursor:pointer;margin-right:7px;margin-left:4px;display:none}.cu-data-view-item__pin:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__pin:hover{fill:var(--theme-main-color)}}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__pin{fill:#fff}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__pin:hover{fill:#dfdbfb}@supports (--theme-main-color-light:#dfdbfb){.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__pin:hover{fill:var(--theme-main-color-light)}}.cu-data-view-item_tab{height:39px;border-radius:7px 7px 0 0;margin:0;padding:0 5px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-data-view-item_tab{border-bottom-color:#1e272e}.layout-size_compact .cu-data-view-item_tab{height:39px}.layout-size_default .cu-data-view-item_tab{height:44px}.layout-size_large .cu-data-view-item_tab{height:48px}.cu2-views-bar_v6 .cu-data-view-item_tab{height:50px;border:0}.cu-data-view-item_tab+.cu-data-view-item_tab{border-left:0}.cu2-views-bar_v6 .cu-data-view-item_tab:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;opacity:0;z-index:10;width:calc(100% - 26px);height:3px;left:13px;bottom:0;border-radius:3px 3px 0 0;background:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab:before{background:#828588}.cu-data-view-item_tab:hover .cu-data-view-item__handle{display:block}.cu2-views-bar_v6 .cu-data-view-item_tab:hover:before{opacity:1}.cu-data-view-item_tab.cu-data-view-item_selected{border:1px solid #e9ebf0;border-bottom-color:transparent}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected{border-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected{border:0}.cu-data-view-item_tab.cu-data-view-item_selected,.cu-data-view-item_tab:hover{background:#fafbfc}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected,.contrast_high .cu-data-view-item_tab:hover{background:#eee}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected,.dark-theme .cu-data-view-item_tab:hover{background:#1e272e}.contrast_high .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected,.contrast_high .cu2-views-bar_v6 .cu-data-view-item_tab:hover,.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected,.cu2-views-bar_v6 .cu-data-view-item_tab:hover,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab:hover{background:transparent}.cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(250,251,252,0) 0,#fafbfc 70%,#fafbfc)}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.contrast_high .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,93.3%,0) 0,#eee 70%,#eee)}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.dark-theme .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e 70%,#1e272e)}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.cu2-views-bar_v6 .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__name_not-empty:after,.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab:hover .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu-data-view-item_tab:not(.cu-data-view-item_selected):hover .cu-data-view-item__dropdown-list{display:none}.cu-data-view-item_tab:not(.cu-data-view-item_selected):after{content:"";display:block;position:absolute;z-index:10;width:1px;height:17px;right:-1px;margin-top:-2px;background:#e9ebf0}.dark-theme .cu-data-view-item_tab:not(.cu-data-view-item_selected):after{background:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab:not(.cu-data-view-item_selected):after,.cu-data-view-group:last-child .cu-data-view-item_tab:not(.cu-data-view-item_selected):after{display:none}.cu-data-view-item_tab.cu-data-view-item_selected:hover .cu-data-view-item__dropdown-list{display:block}.cu-data-view-item_tab.cu-data-view-item_selected:before{content:"";display:block;position:absolute;z-index:10;width:7px;height:7px;bottom:-1px;left:-7px;border-bottom-right-radius:7px;border-right:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0;box-shadow:1px 1px 0 1px #fafbfc}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected:before{box-shadow:1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected:before{box-shadow:1px 1px 0 1px #1e272e;border-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected:before{background:#7b68ee;opacity:1;width:calc(100% - 26px);height:3px;left:13px;bottom:0;border:0;border-radius:3px 3px 0 0;box-shadow:none}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected:before{background:var(--theme-main-color)}}.cu-data-view-item_tab.cu-data-view-item_selected:after{content:"";display:block;position:absolute;z-index:10;width:7px;height:7px;bottom:-1px;right:-7px;border-bottom-left-radius:7px;border-left:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0;box-shadow:-1px 1px 0 1px #fafbfc}.contrast_high .cu-data-view-item_tab.cu-data-view-item_selected:after{box-shadow:-1px 1px 0 1px #eee}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected:after{box-shadow:-1px 1px 0 1px #1e272e;border-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected:after{display:none}.cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{position:absolute;right:2px;width:24px;background-color:#fafbfc}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{background-color:#1e272e}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{background-color:#fff}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list{background-color:#2b343b}.cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{content:"";display:block;position:absolute;width:8px;height:100%;pointer-events:none;top:0;left:-8px;background:linear-gradient(90deg,rgba(250,251,252,0) 0,#fafbfc)}.dark-theme .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(30,39,46,0) 0,#1e272e)}.cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff)}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_tab.cu-data-view-item_selected .cu-data-view-item__dropdown-list:before{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b)}.cu-data-view-item.cu-data-view-item_grouped{display:flex;align-items:center;justify-content:space-between;border-radius:4px;padding:0 8px;margin:0 5px;border:0;max-width:none;height:32px}.cu-data-view-item.cu-data-view-item_grouped:not(.cu-data-view-item_selected):after{display:none}.cu-data-view-item.cu-data-view-item_grouped:hover .cu-data-view-item__dropdown-list{display:block}.cu-data-view-item_grouped .cu-data-view-item__name_not-empty:after,.cu-data-view-item_grouped:after,.cu-data-view-item_grouped:before{display:none!important}.cu-data-view-item_grouped.cu-data-view-item_selected,.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item_grouped.cu-data-view-item_selected,.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:var(--theme-main-color)}}.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected,.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected,.dark-theme .cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview{background:var(--theme-main-color)}}.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview .cu-data-view-item__name-text,.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview .cu-data-view-item__name .cu-editable__input,.cu-data-view-item_grouped.cu-data-view-item_selected .cu-data-view-item__name-text,.cu-data-view-item_grouped.cu-data-view-item_selected .cu-data-view-item__name .cu-editable__input{color:#fff}.cu-data-view-item_grouped.cu-data-view-item_selected.cdk-drag-preview .cu-data-view-item__name-required,.cu-data-view-item_grouped.cu-data-view-item_selected .cu-data-view-item__name-required{color:#fff;opacity:.7}.cu-data-view-item_grouped .cu-data-view-item__link{flex:1 0 0}.cu-data-view-item_grouped .cu-data-view-item__name{height:auto}.cu-data-view-item_grouped .cu-data-view-item__name_editing{flex-grow:1}.cu-data-view-item_grouped .cu-data-view-item__dropdown-list{position:relative}.cu-data-view-item_grouped:hover .cu-data-view-item__dropdown-list,.cu-data-view-item_grouped:hover .cu-data-view-item__pin{display:block}.cu-data-view-item__link{display:inline-flex;align-items:center;min-width:0;align-self:stretch}.cu-data-view-item_tab .cu-data-view-item__link{padding-top:6px;padding-bottom:10px}.cu2-views-bar_v6 .cu-data-view-item_tab .cu-data-view-item__link{padding:0}.cu-data-view-item__link_icon{flex-shrink:0}.cu-data-view-item__icon{width:30px;height:30px;padding:8px;fill:#bcc0c7;stroke:#bcc0c7;stroke-width:2px;flex-shrink:0;position:relative}.dark-theme .cu-data-view-item__icon{fill:#828588;stroke:#828588}.layout-size_compact .cu-data-view-item__icon{padding:8px}.layout-size_default .cu-data-view-item__icon,.layout-size_large .cu-data-view-item__icon{padding:7px}.cu2-views-bar_v6 .cu-data-view-item__icon,.layout-size_compact .cu2-views-bar_v6 .cu-data-view-item__icon,.layout-size_default .cu2-views-bar_v6 .cu-data-view-item__icon,.layout-size_large .cu2-views-bar_v6 .cu-data-view-item__icon{padding:8px}.cu-data-view-item__icon-default{fill:#7b68ee;position:absolute;width:8px;height:8px;right:2px;bottom:2px;border-radius:50%}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__icon-default{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-item__icon-default{width:10px;height:10px;padding:1px;right:1px;bottom:1px;background:#fff;fill:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item__icon-default{background:#2b343b;fill:#828588}.cu-data-view-item__icon-lock,.cu-data-view-item__icon-pinned{fill:#7b68ee;position:absolute;width:8px;height:8px;left:2px;top:2px;border-radius:50%}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__icon-lock,.cu-data-view-item__icon-pinned{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-item__icon-lock,.cu2-views-bar_v6 .cu-data-view-item__icon-pinned{width:10px;height:10px;padding:1px;left:1px;top:1px;background:#fff;fill:#bcc0c7}.dark-theme .cu2-views-bar_v6 .cu-data-view-item__icon-lock,.dark-theme .cu2-views-bar_v6 .cu-data-view-item__icon-pinned{background:#2b343b;fill:#828588}.cu-data-view-item__icon-lock{left:auto;right:2px}.cu-data-view-item__icon-favicon{background-size:contain;background-position:50%;height:100%;width:100%}.cu-data-view-item__name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;position:relative;color:#343434;height:100%;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-item__name{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-item__name{color:#d5d6d7}.layout-size_compact .cu-data-view-item__name{font-size:13px}.layout-size_default .cu-data-view-item__name,.layout-size_large .cu-data-view-item__name{font-size:14px}.cu-data-view-item__name_not-empty:after{content:"";display:block;position:sticky;right:-1px;width:11px;margin-left:-3px;height:100%;flex-shrink:0;pointer-events:none;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu-data-view-item__name_not-empty:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu-data-view-item__name_editing{min-width:42px;color:transparent}.dark-theme .cu-data-view-item__name_editing{color:transparent}.cu-data-view-item__name_editing:after{visibility:hidden;pointer-events:none}.cu-data-view-item__name_editing .cu-data-view-item__name-text{opacity:0}.cu-data-view-item__name-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;position:relative;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-item__name-text{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-item__name-text{color:#d5d6d7}.layout-size_compact .cu-data-view-item__name-text{font-size:13px}.layout-size_default .cu-data-view-item__name-text,.layout-size_large .cu-data-view-item__name-text{font-size:14px}.cu2-views-bar_v6 .cu-data-view-item__name-text,.layout-size_compact .cu2-views-bar_v6 .cu-data-view-item__name-text,.layout-size_default .cu2-views-bar_v6 .cu-data-view-item__name-text,.layout-size_large .cu2-views-bar_v6 .cu-data-view-item__name-text{font-size:13px}.cu-data-view-item__name .cu-editable{display:flex;align-items:center;position:absolute;width:100%;height:100%}.cu-data-view-item__name .cu-editable__input{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;background:transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-data-view-item__name .cu-editable__input{font-family:var(--global-font-support)}}.dark-theme .cu-data-view-item__name .cu-editable__input{background:transparent}.cu-data-view-item__name .cu-editable__input:focus{background:transparent;box-shadow:none}.dark-theme .cu-data-view-item__name .cu-editable__input:focus{background:transparent}.layout-size_compact .cu-data-view-item__name .cu-editable__input{font-size:13px}.layout-size_default .cu-data-view-item__name .cu-editable__input{font-size:14px}.layout-size_large .cu-data-view-item__name .cu-editable__input{font-size:15px}.dark-theme .cu-data-view-item__name .cu-editable__input::selection{background:#384047}.cu-data-view-item__name-required{font:italic 400 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin:0 5px;color:#b9bec7}.dark-theme .cu-data-view-item__name-required{color:#7c828d}.cu-data-view-item__name-private{width:11px;height:11px;display:inline-block;margin-right:3px;fill:#bcc0c7}.dark-theme .cu-data-view-item__name-private{fill:#828588}.cu-data-view-item_selected{background-color:#f2f2f2}.cu-data-view-item_selected .cu-data-view-group__count{background:#7b68ee;margin-top:6px}@supports (--theme-main-color:#7b68ee){.cu-data-view-item_selected .cu-data-view-group__count{background:var(--theme-main-color)}}.layout-size_compact .cu-data-view-item_selected .cu-data-view-group__count{margin-top:6px}.layout-size_default .cu-data-view-item_selected .cu-data-view-group__count,.layout-size_large .cu-data-view-item_selected .cu-data-view-group__count{margin-top:7px}.cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count,.layout-size_compact .cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count{margin-top:5px}.layout-size_default .cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count,.layout-size_large .cu2-views-bar__views_two-rows .cu-data-view-item_selected .cu-data-view-group__count{margin-top:6px}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-group__count{background:transparent}.dark-theme .cu-data-view-item_selected{background-color:#1e272e}.cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#292d34;stroke:#292d34}.dark-theme .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#d5d6d7;stroke:#d5d6d7}.cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu-data-view-item_selected:hover .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu-data-view-item_selected .cu-data-view-item__icon{fill:#292d34;stroke:#292d34;cursor:default;transition:none}.dark-theme .cu-data-view-item_selected .cu-data-view-item__icon{fill:#d5d6d7;stroke:#d5d6d7}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-default,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-lock,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-pinned,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-private{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-default,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-lock,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__icon-pinned,.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-private{fill:var(--theme-main-color)}}.cu-data-view-item_selected .cu-data-view-item__name-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:500}.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-text{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-data-view-item_selected .cu-data-view-item__name-text{color:var(--theme-main-color)}}.cu-data-view-item__dropdown-list{width:24px;display:none}.cu-data-view-item__dropdown-list.cu-dropdown-list_opened{display:block}.cu-data-view-item__settings{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:24px;height:24px;padding:3px 4px;fill:#b9bec7;cursor:pointer}.cu-data-view-item_tab .cu-data-view-item__settings{margin-bottom:4px}.cu-data-view-item__settings:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__settings:hover{fill:var(--theme-main-color)}}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__settings{fill:#fff}.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__settings:hover{fill:#dfdbfb}@supports (--theme-main-color-light:#dfdbfb){.cu-data-view-item_selected.cu-data-view-item_grouped .cu-data-view-item__settings:hover{fill:var(--theme-main-color-light)}}.cu-data-view-item .cu-dropdown_open .cu-data-view-item__settings{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item .cu-dropdown_open .cu-data-view-item__settings{fill:var(--theme-main-color)}}.cu-data-view-item__divider{display:none}.cu2-views-bar_v6 .cu-data-view-item__divider{content:"";position:absolute;display:block;left:0;width:1px;height:20px;background:#e9ebf0}.dark-theme .cu2-views-bar_v6 .cu-data-view-item__divider{background:#1e272e}.cu-data-view-item__shared{border-bottom:1px dashed}.cu-data-view-item__link-settings{font-weight:400;font-size:10px;line-height:1;border:1px solid #b9bec7;border-radius:3px;margin:3px 15px 10px}.dark-theme .cu-data-view-item__link-settings{border-color:#828588}.cu-data-view-item__link-settings:hover{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__link-settings:hover{border-color:var(--theme-main-color)}}.cu-data-view-item__link-settings:hover .cu-dropdown-list-item__title{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__link-settings:hover .cu-dropdown-list-item__title{color:var(--theme-main-color)}}.cu-data-view-item__link-settings.cu-dropdown-list-item{min-height:21px}.cu-data-view-item__link-settings .cu-dropdown-list-item__link-container{padding:0}.cu-data-view-item__link-settings .cu-dropdown-list-item__title{font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;justify-content:center}.cu-data-view-item__lock .cu-dropdown-list-item__link-container{padding-bottom:16px}.cu-data-view-item__lock-settings{min-height:0;margin-top:-14px;margin-bottom:10px;cursor:default}.cu-data-view-item__lock-settings.cu-dropdown-list-item{min-height:0}.cu-data-view-item__lock-settings.cu-dropdown-list-item:hover,.dark-theme .cu-data-view-item__lock-settings.cu-dropdown-list-item:hover{background:transparent}.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container{cursor:pointer;padding:0 0 0 22px}.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title{color:var(--theme-main-color)}}.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title-text{border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__lock-settings .cu-dropdown-list-item__link-container:hover .cu-dropdown-list-item__title-text{border-bottom-color:var(--theme-main-color)}}.cu-data-view-item__lock-settings .cu-dropdown-list-item__title{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 10px/1 Gotham Pro,Proxima Nova,arial,serif;padding:2px 0;color:rgba(34,34,34,.3)}.contrast_high .cu-data-view-item__lock-settings .cu-dropdown-list-item__title{color:#858585}.dark-theme .cu-data-view-item__lock-settings .cu-dropdown-list-item__title{color:#828588}.cu-data-view-item__lock-settings .cu-dropdown-list-item__title-text{border-bottom:1px dashed rgba(34,34,34,.3)}.contrast_high .cu-data-view-item__lock-settings .cu-dropdown-list-item__title-text{border-bottom-color:#858585}.dark-theme .cu-data-view-item__lock-settings .cu-dropdown-list-item__title-text{border-bottom-color:#828588}.cu-data-view-item__handle{display:none;position:absolute;cursor:move;left:1px;width:10px;padding:3px 2px 2px;height:18px;z-index:10;fill:#bcc0c7}.dark-theme .cu-data-view-item__handle{fill:#828588}.cu-data-view-item__handle:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-data-view-item__handle:hover{fill:var(--theme-main-color)}}.cu-data-view-item.cdk-drag-preview{background-color:#f2f2f2;opacity:.7}.cu-data-view-item.cdk-drag-preview .cu-data-view-item__name_not-empty:after{display:none}.cu-data-view-item.cdk-drag-placeholder{opacity:.7}.cdk-drop-list-dragging .cu-data-view-item.cdk-drag:not(.cdk-drag-placeholder){transition:transform .2s cubic-bezier(0,0,.2,1)}.cu-data-view-item.cdk-drag-animating{transition:transform .15s cubic-bezier(0,0,.2,1)}'],encapsulation:2,changeDetection:0}),t})();var tn=i("bZrb");let en=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,tn.a]]}),t})();var nn=i("mpzy");let on=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,u.a,P.l,g.a,x.a,O.a,l.a,M.a,I.f,ji.a,at.d,Li.a,v.a,Ei.a,Ni.a,Ai.a,D.l,C.a,en]]}),t})();d.Yc($i,[n.q,n.o,nt.a,nn.a,I.d,n.p,ei,I.a,zi.a,Qi,tt.b,et.a,it.a,Jt,at.c,ot.a],[n.b,n.A]);let an=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,D.x,M.a]]}),t})();var rn=i("e9bB"),sn=i("/SUI"),cn=i("4TFr"),ln=i("QwIh"),un=i("X5rV");let dn=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,D.l,P.l,on,an,Li.a,T.a,Ni.a,rn.a,sn.a,M.a,cn.a,u.a,x.a,ln.a,un.a,tn.a,Ai.a,S.a,v.a]]}),t})();var hn=i("8873"),pn=i("73lP"),fn=i("o/e2"),gn=i("Pbuh"),mn=i("bz3s"),vn=i("ql4J"),bn=i("jkgf"),_n=i("IRoT"),wn=i("vF9G"),yn=i("2XVl"),kn=i("EumD"),xn=i("Dvla"),Sn=i("wRSl"),Tn=i("s41p"),Cn=i("qgxu"),Dn=i("6FZh"),In=i("2Wx5"),Pn=i("tGh3"),Mn=i("t3a8"),On=i("gM3s"),$n=i("FWqE");let jn=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,On.a,u.a,l.a,M.a,Pn.a,x.a,Ni.a,$n.a,g.a]]}),t})();var Ln=i("R7XO"),En=i("7A2k"),Nn=i("hby3"),An=i("KsR4"),Vn=i("gC2L"),zn=i("yN//"),Fn=i("Fj0M"),Bn=i("bFKe"),Rn=i("UDEt"),Un=i("bx+h");let Gn=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},providers:[y.a],imports:[[n.c,l.a,Rn.a,sn.a,Bn.b,dn,x.a,hn.a,pn.a,g.a,fn.a,v.a,P.l,at.d,Ni.a,gn.a,mn.a,M.a,k.a,vn.a,O.a,bn.a,_n.a,wn.SearchModule,yn.a,kn.a,xn.b,Sn.a,Tn.a,Cn.a,Dn.a,In.a,Pn.a,Mn.a,jn,$n.a,Ln.a,w,m,f.a,p.a,u.a,Nn.a,En.a,An.a,Vn.a,zn.a,Fn.CreateCustomFieldFormModule,Un.a]]}),t})();var Hn=i("AcQF"),Wn=i("C7Vu"),qn=i("pMok"),Xn=i("0mFS"),Yn=i("SxV6"),Kn=i("eIep"),Zn=i("LRne"),Jn=i("jJW4");let Qn=(()=>{class t{constructor(t,e){this.store=t,this.sharedData=e}canActivate(t,e){const i=t.params.locationType===$.d.Project?$.e.Project:t.params.locationType===$.d.Category?$.e.Category:t.params.locationType===$.d.Team?$.e.Team:t.params.locationType===$.d.Subcategory?$.e.Subcategory:t.params.locationType===$.d.SharedSpace||t.params.locationType===$.d.TasksShared?$.e.SharedSpace:null,n=t.params.locationId,o=t.params.parentId;return i?this.store.pipe(Object(K.select)(z.getQueryParams),Object(Yn.a)(),Object(Kn.a)(e=>{if(i===$.e.Project&&(this.store.dispatch(new Y.Wj({p:n,c:o?E.a:e.p===n?e.c:null,s:o?E.a:e.p===n?e.s:null,checkRedirect:!0})),this.store.dispatch(new Y.dk(!1,!1))),i===$.e.Category&&o&&(this.store.dispatch(new Y.Wj({p:o,c:n,s:o?E.a:e.c===n?e.s:null,checkRedirect:!0})),t.queryParams.pr&&this.store.dispatch(new Y.dk(!1,!1))),i===$.e.Subcategory&&o){const i={p:t.queryParams.pr||e.p,c:o,s:n,checkRedirect:!1};"sh"===t.queryParams.sh&&(i.shared=!0,i.p=E.h),this.store.dispatch(new Y.Wj(i)),t.queryParams.pr&&this.store.dispatch(new Y.dk(!1,!1))}return i===$.e.SharedSpace&&(this.store.dispatch(new Y.fk(t.params.locationType===$.d.TasksShared,!1)),this.store.dispatch(new Y.dk(!0,!1))),this.store.dispatch(new Y.hc({parentId:n,parentType:i,noRedirect:!!o})),Object(Zn.a)(!0)})):(this.store.dispatch(new Xn.d({path:["/",this.sharedData.compatCurrentTeam.id,"v","t",this.sharedData.compatCurrentTeam.id]})),!1)}}return t.\u0275fac=function(e){return new(e||t)(d.nc(K.Store),d.nc(Jn.a))},t.\u0275prov=d.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var to=i("mfsn"),eo=i("lI7e"),io=i("3E0/"),no=i("PBBv"),oo=i("hr9B"),ao=i("pxSR"),ro=i("keZ5"),so=i("vk5f"),co=i("Ll/8"),lo=i("m2AY"),uo=i("gXbQ"),ho=i("AeD3"),po=i("Tm/s"),fo=i("HsHS"),go=i("ZlQq"),mo=i("ILsm"),vo=i("xog/"),bo=i("ZAnn"),_o=i("R0Ic"),wo=i("3I9T"),yo=i("97dl"),ko=i("7ycA"),xo=i("Q/P0"),So=i("HcPq"),To=i("VKdm"),Co=i("2Vo4"),Do=i("UXun"),Io=i("PZkE"),Po=i("5O7O"),Mo=i("cCXi"),Oo=i("cGJt"),$o=i("rLOZ"),jo=i("wA7i"),Lo=i("jACb"),Eo=i("psvB"),No=i("WsdY"),Ao=i("5Mp/"),Vo=i("wF7Z"),zo=i("p080"),Fo=i("BTFG"),Bo=i("pxPQ"),Ro=i("OBnU"),Uo=i("+Kou"),Go=i("nJgP");const Ho=["scrollbar"],Wo=["createProject"],qo=["scrollContainer"],Xo=["projectMenu"],Yo=["layoutStyleModal"],Ko=function(t,e){return{convos:t,docs:e}};function Zo(t,e){if(1&t&&d.Yb(0,7),2&t){const t=d.uc(),e=d.Rc(15);d.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",d.Ic(2,Ko,t.convos,t.docs))}}function Jo(t,e){if(1&t&&(d.ac(0),d.cc(1,"div",13),d.cc(2,"div",14),d.gc(3,15),d.bc(),d.Yb(4,16),d.bc(),d.Zb()),2&t){d.uc(2);const t=d.Rc(11);d.Ib(4),d.Dc("ngTemplateOutlet",t)}}function Qo(t,e){if(1&t&&d.Yb(0,16),2&t){d.uc(3);const t=d.Rc(11);d.Dc("ngTemplateOutlet",t)}}const ta=function(t){return{"sidebar-section__header_active":t}},ea=function(t){return{"sidebar-section__name-link_inactive":t}};function ia(t,e){if(1&t){const t=d.dc();d.cc(0,"div",17),d.qc("contextmenu",function(e){return d.Uc(t),d.uc(2).openSpaceMenu(e)}),d.vc(1,"async"),d.cc(2,"div",18),d.cc(3,"a",19),d.vc(4,"async"),d.vc(5,"async"),d.dd(6),d.vc(7,"async"),d.bc(),d.cc(8,"cu-project-menu",20,21),d.vc(10,"async"),d.Xb(11,"div",22),d.bc(),d.bc(),d.bd(12,Qo,1,1,"ng-container",23),d.vc(13,"async"),d.bc()}if(2&t){const t=d.uc(2);let e=null,i=null;d.Dc("ngClass",d.Hc(18,ta,d.wc(1,6,t.isAllCats$))),d.Ib(3),d.Dc("ngClass",d.Hc(20,ea,d.wc(4,8,t.isAllCats$)))("routerLink",d.wc(5,10,t.projectPath$)),d.Ib(3),d.ed(null==(e=d.wc(7,12,t.project$))?null:e.name),d.Ib(2),d.Dc("project",d.wc(10,14,t.project$)),d.Ib(4),d.Dc("ngIf",(null==(i=d.wc(13,16,t.user$))?null:i.dashboard)===t.LayoutVersion.Two)}}const na=function(t,e){return{allowCollapse:!0,convos:t,docs:e}};function oa(t,e){if(1&t){const t=d.dc();d.cc(0,"cu2-project-list-bar",24),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc(2).dropdownOpen.emit()})("dropdownClose",function(){return d.Uc(t),d.uc(2).dropdownClose.emit()}),d.Yb(1,25),d.Yb(2,26),d.vc(3,"async"),d.vc(4,"async"),d.bc()}if(2&t){const t=d.uc(2),e=d.Rc(11),i=d.Rc(15);d.Dc("convos",t.convos)("docs",t.docs)("convoDocMap",t.convoDocMap),d.Ib(1),d.Dc("ngTemplateOutlet",e),d.Ib(1),d.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.Ic(10,na,d.wc(3,6,t.sharedConvos$),d.wc(4,8,t.sharedDocs$)))}}function aa(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-convo-doc-visibility",37),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc(3).dropdownOpen.emit()})("dropdownClose",function(){return d.Uc(t),d.uc(3).dropdownClose.emit()}),d.bc()}if(2&t){const t=d.uc(3);d.Dc("convos",t.convos)("docs",t.docs)}}function ra(t,e){if(1&t){const t=d.dc();d.cc(0,"div",38),d.ac(1),d.gc(2,39),d.Zb(),d.cc(3,"span",40),d.qc("click",function(){return d.Uc(t),d.uc(3).navService.toggleArchived()}),d.gc(4,41),d.bc(),d.bc()}}function sa(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-nav-category",47,48),d.qc("onDraggingList",function(e){return d.Uc(t),d.uc(5).setDraggingList(e)})("cdkDragStarted",function(e){d.Uc(t);const i=d.uc().$implicit;return d.uc(4).dragStarted(e,i)})("cdkDragEnded",function(e){return d.Uc(t),d.uc(5).dragEnded(e)})("onToggle",function(e){d.Uc(t);const i=d.uc().$implicit;return d.uc(4).toggleOpenState(i,e)})("onDropView",function(e){return d.Uc(t),d.uc(5).dropView(e)})("dropdownOpen",function(){return d.Uc(t),d.uc(5).dropdownOpen.emit()})("dropdownClose",function(){return d.Uc(t),d.uc(5).dropdownClose.emit()}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"async"),d.vc(11,"async"),d.vc(12,"async"),d.vc(13,"async"),d.vc(14,"async"),d.vc(15,"async"),d.bc()}if(2&t){const t=d.Rc(1),e=d.uc().$implicit;d.uc(2);const i=d.Rc(4),n=d.uc(2);let o=null;d.Dc("cdkDragDisabled",t.state.editing||t.subcategoryRenaming||!!d.wc(2,19,n.filterString$))("cdkDragStartDelay",d.wc(3,21,n.isTouchDevice$)?500:0)("cuDragScrollContainer",i)("cdkDragData",e)("category",e)("onlyDeleteIfOwner",d.wc(4,23,n.onlyDeleteIfOwner$))("canDelete",d.wc(5,25,n.canDelete$))("meUser",d.wc(6,27,n.sharedData.currentUser))("isActive",d.wc(7,29,n.selectedCategoryId$)===(null==e?null:e.id))("isOpened",d.wc(8,31,n.isOpenedMap$)[null==e?null:e.id]||d.wc(9,33,n.filterString$))("selectedSubcategory",d.wc(10,35,n.selectedSubcategoryId$))("projectId",null==(o=d.wc(11,37,n.project$))?null:o.id)("scrollContainer",i)("isDraggingList",n.isDraggingList)("isDraggingTask",d.wc(12,39,n.navService.isDraggingTask$))("isDragging",n.isDragging)("dragDisabled",!!d.wc(13,41,n.filterString$))("dragIds",d.wc(14,43,n.dragIds$))("connectedDragIds",d.wc(15,45,n.connectedDragIds$))}}function ca(t,e){if(1&t&&(d.ac(0),d.bd(1,sa,16,47,"cu-nav-category",46),d.Zb()),2&t){const t=e.$implicit;d.Ib(1),d.Dc("ngIf",null==t?null:t.isVisible)}}function la(t,e){if(1&t){const t=d.dc();d.cc(0,"div",42),d.qc("cdkDropListDropped",function(e){return d.Uc(t),d.uc(3).dropCat(e)}),d.cc(1,"cu-lazy-list",43,44),d.bd(3,ca,2,1,"ng-container",45),d.vc(4,"async"),d.bc(),d.bc()}if(2&t){const t=e.ngIf,i=d.Rc(2);d.uc();const n=d.Rc(4),o=d.uc(2);d.Ib(1),d.Dc("items",t)("pageSize",30)("bottomPadding",100)("scrollContainer",n),d.Ib(2),d.Dc("ngForOf",d.wc(4,6,i.lazyItems$))("ngForTrackBy",o.trackById)}}function ua(t,e){1&t&&(d.ac(0),d.gc(1,52),d.Zb())}const da=function(t){return{"sidebar-section__notes-arrow_hidden":t}};function ha(t,e){if(1&t){const t=d.dc();d.cc(0,"div"),d.cc(1,"div",53),d.vc(2,"async"),d.tc(),d.cc(3,"svg",54),d.Xb(4,"path",55),d.bc(),d.bc(),d.sc(),d.ac(5),d.mc(6,56),d.cc(7,"div",57),d.qc("click",function(){return d.Uc(t),d.uc(5).openCreateEndlessList()}),d.bc(),d.Xb(8,"br"),d.jc(),d.Zb(),d.bc()}if(2&t){const t=d.uc(5);let e=null;d.Dc("@loading",void 0),d.Ib(1),d.Dc("ngClass",d.Hc(4,da,null==(e=d.wc(2,2,t.sidebarOptions$))?null:e.showArchived))}}function pa(t,e){if(1&t&&(d.bd(0,ha,9,6,"div",1),d.vc(1,"async")),2&t){const t=d.uc(4);d.Dc("ngIf",!(null!=d.wc(1,1,t.createListStateMap$)[t.FOLDERLESS_ID]&&d.wc(1,1,t.createListStateMap$)[t.FOLDERLESS_ID].creating))}}const fa=function(t){return{"sidebar-section__notes_relative":t}};function ga(t,e){if(1&t&&(d.cc(0,"div",49),d.vc(1,"async"),d.bd(2,ua,2,0,"ng-container",50),d.vc(3,"async"),d.bd(4,pa,2,3,"ng-template",null,51,d.cd),d.bc()),2&t){const t=d.Rc(5),e=d.uc(3);d.Dc("ngClass",d.Hc(7,fa,d.wc(1,3,e.filterString$))),d.Ib(2),d.Dc("ngIf",d.wc(3,5,e.filterString$))("ngIfElse",t)}}function ma(t,e){1&t&&(d.cc(0,"div",58),d.Xb(1,"cu-loader"),d.bc())}const va=function(t){return{"sidebar-section__toolbar_hidden":t}},ba=function(){return{suppressScrollX:!0}};function _a(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",27),d.cc(2,"cu-nav-filter",28),d.qc("onChange",function(e){return d.Uc(t),d.uc(2).filterString$.next(e)}),d.bc(),d.bc(),d.cc(3,"div",29,30),d.bd(6,aa,1,2,"cu-convo-doc-visibility",31),d.bd(7,ra,5,0,"div",32),d.vc(8,"async"),d.bd(9,la,5,8,"div",33),d.vc(10,"async"),d.bd(11,ga,6,9,"div",34),d.vc(12,"async"),d.cc(13,"cu-folderless",35),d.qc("onDraggingList",function(e){return d.Uc(t),d.uc(2).setDraggingList(e)})("cdkDragStarted",function(e){return d.Uc(t),d.uc(2).dragStarted(e)})("cdkDragEnded",function(e){return d.Uc(t),d.uc(2).dragEnded(e)})("onCreateListStateChange",function(e){d.Uc(t);const i=d.uc(2);return i.setCreateListStateChange(i.FOLDERLESS_ID,e)})("onCreateList",function(e){d.Uc(t);const i=d.uc(2);return i.createList(i.FOLDERLESS_ID,e)})("onChangeCreateListError",function(e){d.Uc(t);const i=d.uc(2);return i.changeCreateListError(i.FOLDERLESS_ID,e)})("onDropView",function(e){return d.Uc(t),d.uc(2).dropView(e)})("dropdownOpen",function(){return d.Uc(t),d.uc(2).dropdownOpen.emit()})("dropdownClose",function(){return d.Uc(t),d.uc(2).dropdownClose.emit()}),d.vc(14,"async"),d.vc(15,"async"),d.vc(16,"async"),d.vc(17,"async"),d.vc(18,"async"),d.vc(19,"async"),d.vc(20,"async"),d.vc(21,"async"),d.vc(22,"async"),d.vc(23,"async"),d.bc(),d.bd(24,ma,2,0,"ng-template",null,36,d.cd),d.bc(),d.Zb()}if(2&t){const t=d.Rc(4),e=d.Rc(25),i=d.uc(2);let n=null,o=null,a=null;d.Ib(1),d.Dc("ngClass",d.Hc(47,va,!i.isShowedSearch)),d.Ib(1),d.Dc("focusOnInput",i.isShowedSearch),d.Ib(1),d.Dc("perfectScrollbar",d.Gc(49,ba)),d.Ib(3),d.Dc("ngIf",(null==i.convos?null:i.convos.length)||(null==i.docs?null:i.docs.length)),d.Ib(1),d.Dc("ngIf",null==(n=d.wc(8,21,i.sidebarOptions$))?null:n.showArchived),d.Ib(2),d.Dc("ngIf",d.wc(10,23,i.categories$))("ngIfElse",e),d.Ib(2),d.Dc("ngIf",i.isNoResults&&0===(null==(o=d.wc(12,25,i.folderless$))||null==o.subcategories?null:o.subcategories.length)),d.Ib(2),d.Dc("folderless",d.wc(14,27,i.folderless$))("projectId",null==(a=d.wc(15,29,i.project$))?null:a.id)("onlyDeleteIfOwner",d.wc(16,31,i.onlyDeleteIfOwner$))("canDelete",d.wc(17,33,i.canDelete$))("meUser",d.wc(18,35,i.sharedData.currentUser))("scrollContainer",t)("isDraggingList",i.isDraggingList)("isDragging",i.isDragging)("dragIds",d.wc(19,37,i.dragIds$))("connectedDragIds",d.wc(20,39,i.connectedDragIds$))("createListState",d.wc(21,41,i.createListStateMap$)[i.FOLDERLESS_ID])("selectedSubcategory",d.wc(22,43,i.selectedSubcategoryId$))("dragDisabled",!!d.wc(23,45,i.filterString$))}}function wa(t,e){1&t&&(d.ac(0),d.gc(1,61),d.Zb())}function ya(t,e){1&t&&(d.ac(0),d.gc(1,62),d.Zb())}function ka(t,e){if(1&t&&(d.cc(0,"div",59),d.bd(1,wa,2,0,"ng-container",50),d.vc(2,"async"),d.bd(3,ya,2,0,"ng-template",null,60,d.cd),d.bc()),2&t){const t=d.Rc(4),e=d.uc(2);d.Ib(1),d.Dc("ngIf",!d.wc(2,2,e.isMeTab$))("ngIfElse",t)}}const xa=function(t,e){return{"cu-hidden":t,"cu-sidebar-show-v4-settings":e}};function Sa(t,e){if(1&t&&(d.ac(0),d.cc(1,"div",8),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.cc(6,"div",9),d.bd(7,Jo,5,1,"ng-container",1),d.vc(8,"async"),d.bd(9,ia,14,22,"div",10),d.vc(10,"async"),d.bc(),d.bd(11,oa,5,13,"cu2-project-list-bar",11),d.vc(12,"async"),d.bd(13,_a,26,50,"ng-container",1),d.vc(14,"async"),d.bc(),d.bd(15,ka,5,4,"div",12),d.vc(16,"async"),d.vc(17,"async"),d.Zb()),2&t){const t=d.uc();let e=null,i=null,n=null,o=null,a=null,r=null;d.Ib(1),d.Dc("ngClass",d.Ic(26,xa,!d.wc(2,6,t.project$)&&(null==(e=d.wc(3,8,t.user$))?null:e.dashboard)!==t.LayoutVersion.Five,t.isNoResults&&0===(null==(e=d.wc(4,10,t.folderless$))||null==e.subcategories?null:e.subcategories.length)&&(null==(e=d.wc(5,12,t.user$))?null:e.dashboard)===t.LayoutVersion.Four)),d.Ib(6),d.Dc("ngIf",(null==(i=d.wc(8,14,t.user$))?null:i.dashboard)===t.LayoutVersion.Four),d.Ib(2),d.Dc("ngIf",(null==(n=d.wc(10,16,t.user$))?null:n.dashboard)!==t.LayoutVersion.Five),d.Ib(2),d.Dc("ngIf",(null==(o=d.wc(12,18,t.user$))?null:o.dashboard)===t.LayoutVersion.Five),d.Ib(2),d.Dc("ngIf",(null==(a=d.wc(14,20,t.user$))?null:a.dashboard)!==t.LayoutVersion.Five),d.Ib(2),d.Dc("ngIf",!d.wc(16,22,t.project$)&&(null==(r=d.wc(17,24,t.user$))?null:r.dashboard)!==t.LayoutVersion.Five)}}function Ta(t,e){if(1&t){const t=d.dc();d.cc(0,"div",63),d.Xb(1,"div",64),d.cc(2,"div",65),d.qc("click",function(){return d.Uc(t),d.uc().finishSidebarTour()}),d.tc(),d.cc(3,"svg",66),d.cc(4,"g",67),d.Xb(5,"rect",68),d.Xb(6,"path",69),d.bc(),d.bc(),d.bc(),d.sc(),d.cc(7,"div",70),d.tc(),d.cc(8,"svg",71),d.cc(9,"g",72),d.Xb(10,"path",73),d.Xb(11,"path",74),d.bc(),d.bc(),d.sc(),d.ac(12),d.gc(13,75),d.Zb(),d.bc(),d.bc()}}const Ca=function(t){return{id:"new-sprint-folder",title:t,icon:"sprint-folder"}};function Da(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list-item",76),d.qc("click",function(){return d.Uc(t),d.uc(2).createNewSprintFolder()}),d.bc()}if(2&t){const t=d.uc(2);d.Dc("item",d.Hc(1,Ca,t.commonStringsService.newSprintFolderText))}}const Ia=function(t){return{id:"new-list",title:t,icon:"cu2-new-list"}},Pa=function(t){return{id:"new-folder",title:t,icon:"cu2-create-folder"}},Ma=function(t){return{title:t,customClass:"cu-dropdown-list-item_footer"}};function Oa(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list-item",76),d.qc("click",function(){return d.Uc(t),d.uc().openCreateEndlessList()}),d.bc(),d.cc(1,"cu-dropdown-list-item",76),d.qc("click",function(){return d.Uc(t),d.uc().openNewFolder()}),d.bc(),d.bd(2,Da,1,3,"cu-dropdown-list-item",77),d.vc(3,"async"),d.vc(4,"async"),d.cc(5,"cu-dropdown-list-item",76),d.qc("click",function(){return d.Uc(t),d.uc().openProjectTemplates()}),d.bc()}if(2&t){const t=d.uc();let e=null;d.Dc("item",d.Hc(8,Ia,t.commonStringsService.newListText)),d.Ib(1),d.Dc("item",d.Hc(10,Pa,t.commonStringsService.newFolderText)),d.Ib(1),d.Dc("ngIf",(null==(e=d.wc(3,4,t.project$))||null==e.features||null==e.features.sprints?null:e.features.sprints.enabled)&&(null==(e=d.wc(4,6,t.project$))||null==e.permissions?null:e.permissions.can_create_projects)),d.Ib(3),d.Dc("item",d.Hc(12,Ma,t.fromTemplateText))}}function $a(t,e){1&t&&d.Yb(0)}function ja(t,e){if(1&t){const t=d.dc();d.cc(0,"div",99),d.qc("click",function(){return d.Uc(t),d.uc(3),d.Rc(1).close()}),d.bd(1,$a,1,0,"ng-container",100),d.bc()}if(2&t){d.uc(4);const t=d.Rc(9);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}const La=function(){return["right"]};function Ea(t,e){1&t&&(d.cc(0,"div",93),d.cc(1,"div",94),d.Xb(2,"div",95),d.cc(3,"div",88),d.gc(4,96),d.bc(),d.Xb(5,"div",97),d.bc(),d.bd(6,ja,2,1,"div",98),d.bc()),2&t&&d.Dc("dropdownCloseOnInsideClick",!0)("dropdownPlacement",d.Gc(3,La))("dropdownCloseOnModal",!0)}function Na(t,e){1&t&&(d.ac(0),d.gc(1,101),d.Zb())}function Aa(t,e){1&t&&(d.ac(0),d.gc(1,102),d.Zb())}function Va(t,e){if(1&t){const t=d.dc();d.cc(0,"a",86),d.qc("click",function(){d.Uc(t),d.uc(3);const e=d.Rc(1),i=d.uc();return i.navService.expandAll(i.categoryList),e.close()}),d.Xb(1,"div",104),d.cc(2,"div",88),d.gc(3,105),d.bc(),d.bc()}}function za(t,e){if(1&t){const t=d.dc();d.cc(0,"a",86),d.qc("click",function(){d.Uc(t),d.uc(3);const e=d.Rc(1);return d.uc().navService.collapseAll(),e.close()}),d.Xb(1,"div",106),d.cc(2,"div",88),d.gc(3,107),d.bc(),d.bc()}}function Fa(t,e){if(1&t&&(d.ac(0),d.bd(1,Va,4,0,"a",103),d.vc(2,"async"),d.bd(3,za,4,0,"a",103),d.vc(4,"async"),d.Zb()),2&t){const t=d.uc(3);let e=null,i=null;d.Ib(1),d.Dc("ngIf",!(null!=(e=d.wc(2,2,t.aggregatedOpenedCategories$))&&e.allOpen)),d.Ib(2),d.Dc("ngIf",!(null!=(i=d.wc(4,4,t.aggregatedOpenedCategories$))&&i.allClosed))}}function Ba(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",90),d.qc("click",function(){return d.Uc(t),d.uc(3).toggleSidebarDarkTheme()}),d.Xb(2,"div",108),d.cc(3,"div",88),d.gc(4,109),d.bc(),d.Xb(5,"cu-toggle-switch",110),d.vc(6,"async"),d.bc(),d.Zb()}if(2&t){const t=d.uc(3);let e=null;d.Ib(5),d.Dc("checked",(null==(e=d.wc(6,1,t.user$))?null:e.sidebar_theme)===t.LeftSidebarTheme.Dark)}}function Ra(t,e){if(1&t){const t=d.dc();d.cc(0,"div",82),d.cc(1,"div",83),d.gc(2,84),d.bc(),d.bd(3,Ea,7,4,"div",85),d.vc(4,"async"),d.cc(5,"a",86),d.qc("click",function(){d.Uc(t),d.uc();const e=d.Rc(1);return d.uc().navService.toggleArchived(),e.close()}),d.Xb(6,"div",87),d.cc(7,"div",88),d.bd(8,Na,2,0,"ng-container",50),d.vc(9,"async"),d.bd(10,Aa,2,0,"ng-template",null,89,d.cd),d.bc(),d.bc(),d.bd(12,Fa,5,6,"ng-container",1),d.vc(13,"async"),d.cc(14,"div",90),d.qc("click",function(){return d.Uc(t),d.uc(2).showLayoutStyleModal()}),d.Xb(15,"div",91),d.cc(16,"div",88),d.gc(17,92),d.bc(),d.bc(),d.bd(18,Ba,7,3,"ng-container",1),d.vc(19,"async"),d.bc()}if(2&t){const t=d.Rc(11),e=d.uc(2);let i=null,n=null,o=null;d.Ib(3),d.Dc("ngIf",(null==(i=d.wc(4,5,e.user$))?null:i.dashboard)!==e.LayoutVersion.Five),d.Ib(5),d.Dc("ngIf",null==(n=d.wc(9,7,e.sidebarOptions$))?null:n.showArchived)("ngIfElse",t),d.Ib(4),d.Dc("ngIf",!d.wc(13,9,e.isAllSpaces$)),d.Ib(6),d.Dc("ngIf",!(null!=(o=d.wc(19,11,e.user$))&&o.dark_theme))}}function Ua(t,e){1&t&&d.Yb(0)}function Ga(t,e){if(1&t&&(d.cc(0,"div"),d.bd(1,Ua,1,0,"ng-container",100),d.bc()),2&t){d.uc(4);const t=d.Rc(9);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}const Ha=function(t){return{"nav-category__plus_onboarding":t}};function Wa(t,e){if(1&t){const t=d.dc();d.cc(0,"div",113),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc(3).closeListDetails()}),d.vc(1,"async"),d.Xb(2,"div",114),d.vc(3,"async"),d.bd(4,Ga,2,1,"div",115),d.bc()}if(2&t){const t=d.uc(3);let e=null;d.Dc("ngClass",d.Hc(6,Ha,d.wc(1,2,t.showOnboarding$))),d.Ib(2),d.Dc("tooltipModifier",(null==(e=d.wc(3,4,t.user$))?null:e.dashboard)===t.LayoutVersion.Four?"tooltip_v4-near":"")}}const qa=function(t){return{"sidebar-section__search_active":t}};function Xa(t,e){if(1&t){const t=d.dc();d.ac(0),d.bd(1,Wa,5,8,"div",111),d.vc(2,"async"),d.cc(3,"div",112),d.qc("click",function(){d.Uc(t);const e=d.uc(2);return e.isShowedSearch=!e.isShowedSearch}),d.vc(4,"async"),d.bc(),d.Zb()}if(2&t){const t=d.uc(2);let e=null;d.Ib(1),d.Dc("ngIf",d.wc(2,3,t.project$)),d.Ib(2),d.Dc("ngClass",d.Hc(7,qa,t.isShowedSearch))("tooltipModifier",(null==(e=d.wc(4,5,t.user$))?null:e.dashboard)===t.LayoutVersion.Four?"tooltip_v4-near":"")}}function Ya(t,e){if(1&t){const t=d.dc();d.cc(0,"div",78,79),d.qc("dropdownOpen",function(){d.Uc(t);const e=d.uc();return e.closeListDetails(),e.dropdownOpen.emit()})("dropdownClose",function(){return d.Uc(t),d.uc().dropdownClose.emit()}),d.Xb(2,"div",80),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,Ra,20,13,"div",81),d.bc(),d.bd(6,Xa,5,9,"ng-container",1),d.vc(7,"async")}if(2&t){const t=d.uc();let e=null,i=null;d.Dc("dropdownCloseOnInsideClick",!1)("dropdownDestroyMenuOnClose",!1)("dropdownCloseOnModal",!0),d.Ib(2),d.Dc("tooltipModifier",(null==(e=d.wc(3,5,t.user$))?null:e.dashboard)===t.LayoutVersion.Four||(null==(e=d.wc(4,7,t.user$))?null:e.dashboard)===t.LayoutVersion.Five?"tooltip_v4-near":""),d.Ib(4),d.Dc("ngIf",(null==(i=d.wc(7,9,t.user$))?null:i.dashboard)!==t.LayoutVersion.Five)}}function Ka(t,e){1&t&&d.Xb(0,"cu-layout-style-modal")}function Za(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-shared-nav",116),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc().dropdownOpen.emit()})("dropdownClose",function(){return d.Uc(t),d.uc().dropdownClose.emit()}),d.vc(1,"async"),d.bc()}if(2&t){const t=e.allowCollapse,i=e.docs,n=e.convos,o=d.uc();d.Dc("user",d.wc(1,4,o.user$))("allowCollapse",t)("convos",n)("docs",i)}}let Ja=(()=>{class t{constructor(t,e,i,n,o,a,r,s,c,l,u,h,p){this.navService=t,this.modalService=e,this.navFilter=i,this.sharedData=n,this.conflictService=o,this.store=a,this.injector=r,this.changeDetectorRef=s,this.listDetailsService=c,this.localStorage=l,this.dataService=u,this.commonStringsService=h,this.userService=p,this.destroy$=new B.a,this.shownTemplate=!1,this.filterString$=new Co.a(""),this.user$=this.store.select(z.getUser),this.team$=this.store.select(z.getTeam),this.project$=this.store.select(z.getProject),this.categories$=Object(ii.a)([this.store.select(z.getSidebarCategories),this.filterString$]).pipe(Object(Qt.a)(([t,e])=>this.navFilter.transform(t,e)),Object(Do.a)({refCount:!0,bufferSize:1})),this.selectedCategoryId$=this.store.select(z.getSelectedCategoryId),this.folderless$=Object(ii.a)([this.store.select(z.getSidebarFolderless),this.filterString$]).pipe(Object(Qt.a)(([t,e])=>{const i=e&&e.toLowerCase();return Object.assign(Object.assign({},t),{subcategories:t.subcategories.filter(t=>!i||t.name.toLowerCase().includes(i))})})),this.isMeTab$=this.store.pipe(Object(K.select)(X.Ib),Object(Qt.a)(t=>"me"===t)),this.isAllCats$=this.selectedCategoryId$.pipe(Object(Qt.a)(t=>t===E.a)),this.sidebarOptions$=this.store.select(z.getSidebarOptions),this.isGuestTeam$=this.store.select(z.isGuestTeam),this.sharedSpaceParam$=this.store.select(z.getSharedSpaceParam),this.showShared$=Object(ii.a)([this.isGuestTeam$,this.sharedSpaceParam$]).pipe(Object(Qt.a)(([t,e])=>t||e)),this.isAllSpaces$=Object(ii.a)([this.sharedSpaceParam$,this.project$]).pipe(Object(Qt.a)(([t,e])=>!e&&!t)),this.selectedSubcategoryId$=this.store.select(z.getSelectedSubcategoryId),this.isSharedSpace$=this.store.select(z.getSharedSpaceParam),this.isTouchDevice$=li.a,this.sharedConvos$=this.store.select(X.zb),this.sharedDocs$=this.store.select(X.Ab),this.canDelete$=this.store.pipe(Object(K.select)(z.getUserEnterprisePermissions),Object(Qt.a)(t=>!t||t.delete_items===ui.b.ON)),this.onlyDeleteIfOwner$=this.store.pipe(Object(K.select)(z.getUserEnterprisePermissions),Object(Qt.a)(t=>t&&t.delete_items===ui.b.CREATE)),this.showOnboarding$=Object(ii.a)([this.store.select(z.getUser),this.store.select(z.getTeam),this.store.select(eo.b)]).pipe(Object(Qt.a)(([t,e,i])=>{if(!t||!e||i)return!1;const n=(Date.now()-parseInt(t.date_joined,10))/1e3/60/60;return e.role===H.f.OWNER&&n<24&&(!t.tour_cards_data||!t.tour_cards_data.sidebarPopover)}),Object(te.a)()),this.projectPath$=Object(ii.a)([this.store.select(z.getTeam),this.project$,this.project$.pipe(Object(Vi.a)(t=>!!t),Object(Kn.a)(t=>this.store.select(Object(X.hb)($.e.Project,t.id))))]).pipe(Object(Qt.a)(([t,e,i])=>i||["/",t.id,"v","s",e&&e.id||"","1"])),this.isOpenedMap$=this.navService.categoryOpenMap$,this.connectedDragIds$=Object(ii.a)([this.categories$,this.isOpenedMap$]).pipe(Object(Qt.a)(([t,e])=>t?[E.d,...t.map(t=>t.id)]:[E.d])),this.dragIds$=Object(ii.a)([this.categories$,this.isOpenedMap$]).pipe(Object(Qt.a)(([t,e])=>t?[E.d,...t.filter(t=>e[t.id]).map(t=>t.id)]:[E.d])),this.createListStateMap$=this.store.select(z.getCreateListStateMap),this.isNoResults=!1,this.isShowedSearch=!1,this.isDraggingList=!1,this.isDragging=!1,this.FOLDERLESS_ID=E.d,this.ignoreDrop=!1,this.LayoutVersion=H.b,this.LeftSidebarTheme=H.c,this.trackById=Object(j.d)("id"),this.isCollapsed=!1,this.dropdownOpen=new d.o,this.dropdownClose=new d.o,this.fromTemplateText=$localize`:@@cu-nav-component__title_from-template:From template`}get categories(){return this.categoryList}set categories(t){this.categoryList=t,this.filterString$.value||this.navService.setCategoryList(t)}ngOnInit(){const t=this.project$.pipe(Object(Vi.a)(t=>Boolean(t&&t.id)),Object(Io.a)("id"));t.pipe(Object(A.a)(this.destroy$)).subscribe(t=>{this.space=t;const e=this.localStorage.get(`project-${t.id}-category-open-map`);e?this.navService.categoryOpenMapState$.next(e):this.navService.collapseAll()}),t.pipe(Object(Kn.a)(t=>this.navService.categoryOpenMapState$.pipe(Object(Qt.a)(e=>[e,t]))),Object(A.a)(this.destroy$)).subscribe(([t,e])=>{this.space&&this.space.id===e.id&&this.localStorage.set(`project-${e.id}-category-open-map`,t)}),this.selectedCategoryId$.pipe(Object(A.a)(this.destroy$)).subscribe(t=>{this.navService.expandCurrentCategory$.next(t&&t!==E.a?t:void 0)}),this.createSidebarTour(),this.aggregatedOpenedCategories$=Object(ii.a)([this.categories$,this.isOpenedMap$]).pipe(Object(Qt.a)(([t,e])=>({allClosed:!e||Object.values(e).every(t=>!t),allOpen:t&&t.every(t=>t.id===E.d||e&&e[t.id])}))),this.categories$.pipe(Object(Vi.a)(t=>!!t),Object(A.a)(this.destroy$)).subscribe(t=>{this.categoryList=t,this.isNoResults=t.length&&t.every(t=>!1===t.isVisible)}),Object(ii.a)([this.categories$,this.isOpenedMap$]).pipe(Object(io.a)(0),Object(Vi.a)(()=>!!this.scrollbar),Object(A.a)(this.destroy$)).subscribe(()=>{this.scrollbar.update()}),this.conflictService.onProjectMove.pipe(Object(A.a)(this.destroy$)).subscribe(t=>{this.navService.moveProjectAfterConflictResolution(t.projectId,t.payload.project,t.payload.name)}),this.conflictService.onListMove.pipe(Object(A.a)(this.destroy$)).subscribe(t=>{this.navService.moveListAfterConflictResolution(t.listId,t.projectId,t.name)}),this.navService.onCreateFolderlessList.pipe(Object(A.a)(this.destroy$)).subscribe(()=>{this.openCreateEndlessList()}),this.team$.pipe(Object(A.a)(this.destroy$)).subscribe(t=>this.teamId=t.id)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}createNewSprintFolder(){return t=this,void 0,i=function*(){let t=To.a,e=!0,i=1;const n=yield this.project$.pipe(Object(Yn.a)()).toPromise();for(;e;)-1===(n.categories||[]).findIndex(e=>e.name.toLowerCase()===t.toLowerCase())?e=!1:t=`${To.a} (${i})`,i++;const o={name:t,sprint:!0};this.dataService.createCategory(n.id,o.name,o).subscribe(t=>{this.store.dispatch(new Y.Si(t,!1,!0));const e=this.modalService.openComponent(So.a,this.injector);e.instance.sprintSettingsType=xo.c.CATEGORY,e.instance.emitOnClose=!0,e.instance.category$.next(t),e.instance.onPickSprint.pipe(Object(A.a)(e.instance.destroy$)).subscribe(({numSprints:e})=>{this.newSprint(t,e)}),e.instance.onClose.pipe(Object(A.a)(e.instance.destroy$)).subscribe(e=>{e&&e.fullClose||this.newSprint(t)})})},new((e=void 0)||(e=Promise))(function(n,o){function a(t){try{s(i.next(t))}catch(e){o(e)}}function r(t){try{s(i.throw(t))}catch(e){o(e)}}function s(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(a,r)}s((i=i.apply(t,[])).next())});var t,e,i}newSprint(t,e){const i=this.modalService.openComponent(ko.a,this.injector,{title:this.commonStringsService.createSprintsText,modifier:"cu-sprints-settings__modal"});i.instance.forCreate=!0,i.instance.categoryId=t.id,i.instance.projectId=t.project_id,e&&(i.instance.numSprints=e),i.instance.onCreate.pipe(Object(A.a)(i.instance.destroy$)).subscribe(({sprints:e})=>{this.store.dispatch(new Y.Si(Object.assign(Object.assign({},t),{subcategories:[...t.subcategories,...e]}))),this.store.dispatch(new Y.Nb({categoryId:t.id,data:{subcategories:e}}))})}finishSidebarTour(t=!0){this.createProjectTooltip&&this.createProjectTooltip.hide();const e=this.sharedData.currentUser.value.tour_cards_data||{};e.sidebarPopover=!0,this.store.dispatch(new Y.om({tour_cards_data:e})),t&&this.navService.onOpenCategoryModal.emit({type:"Project",cannotClose:!0,space:null,templateTab:!0})}openNewFolder(){this.navService.onOpenCategoryModal.emit({type:"Project",clearAll:!0})}openProjectTemplates(){this.navService.onOpenCategoryModal.emit({type:"Project",clearAll:!0,templateTab:!0})}createSidebarTour(){this.showOnboarding$.pipe(Object(Vi.a)(()=>!this.isCollapsed&&!!this.sharedData.compatCurrentProject),Object(ee.a)(this.store.select(z.onboardingJustFinishedSelector)),Object(A.a)(this.destroy$)).subscribe(([t,e])=>{if(!e)if(t){if(this.shownTemplate)return;this.shownTemplate=!0,setTimeout(()=>{this.createProjectTooltip&&this.createProjectTooltip.show()})}else this.createProjectTooltip&&this.createProjectTooltip.hide()})}closeModal(){this.modalService.close()}setDraggingList(t){this.isDraggingList=t,this.changeDetectorRef.markForCheck()}dragStarted(t,e){if(e&&e.permission_level<H.e.EDIT)return this.sharedData.addToastItem({title:this.commonStringsService.dndDisabledText,description:"Whoops!  You dont have permission to edit."}),void(this.ignoreDrop=!0);this.isDragging=!0,this.changeDetectorRef.markForCheck()}dragEnded(t){this.isDragging=!1,this.changeDetectorRef.markForCheck()}toggleOpenState(t,e){this.navService.setCategoryOpenState(t.id,e)}dropCat(t){this.ignoreDrop?this.ignoreDrop=!1:t.currentIndex!==t.previousIndex&&this.store.dispatch(new Y.kc({category:t.item.data,fromIndex:t.previousIndex,toIndex:t.currentIndex}))}setCreateListStateChange(t,e){this.store.dispatch(new Y.Yi(t,e))}createList(t,e){this.store.dispatch(new Y.Jb({projectId:this.sharedData.compatCurrentProject.id,id:t,name:e,redirect:!0}))}openCreateEndlessList(){this.setCreateListStateChange(E.d,{index:-1,creating:!0,error:null,saving:!1})}changeCreateListError(t,e){this.setCreateListStateChange(t,{error:e})}dropView({id:t,parent:e}){this.store.dispatch(new Y.we(t,e))}openSpaceMenu(t){this.projectMenu&&this.space&&(t.preventDefault(),t.stopPropagation(),this.projectMenu.project=this.space,this.projectMenu.open())}closeListDetails(){this.listDetailsService.closeSidebar()}showLayoutStyleModal(){this.modalService.open({title:$localize`:@@layout_size-and-style-1:Layout size & style`,content:this.layoutStyleModal,bodyModifier:"cu-modal__body_no-min-height"})}toggleSidebarDarkTheme(){this.userService.setTheme(this.user,!1,!0)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(po.a),d.Wb(Z.a),d.Wb(Po.a),d.Wb(Jn.a),d.Wb(Mo.a),d.Wb(K.Store),d.Wb(d.t),d.Wb(d.h),d.Wb(Oo.a),d.Wb($o.b),d.Wb(ho.a),d.Wb(J.a),d.Wb(uo.c))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-nav-component"]],viewQuery:function(t,e){if(1&t&&(d.jd(Ho,1),d.jd(Wo,1),d.jd(qo,1),d.jd(Xo,1),d.jd(Yo,1)),2&t){let t;d.Qc(t=d.rc())&&(e.scrollbar=t.first),d.Qc(t=d.rc())&&(e.createProjectTooltip=t.first),d.Qc(t=d.rc())&&(e.scrollContainer=t.first),d.Qc(t=d.rc())&&(e.projectMenu=t.first),d.Qc(t=d.rc())&&(e.layoutStyleModal=t.first)}},hostAttrs:[1,"cu-nav-component"],inputs:{user:"user",isCollapsed:"isCollapsed",convos:"convos",docs:"docs",convoDocMap:"convoDocMap"},outputs:{dropdownOpen:"dropdownOpen",dropdownClose:"dropdownClose"},decls:16,vars:10,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,d,h,p,f,g,m,v,b,_,w,y;return t=$localize`:@@common_space␟3a1ef9e27b38e2c34e346c48c1c0226f67c799d7␟2717686775776412287: Space `,e=$localize`:@@cu-nav-component__form-placeholder_search-folder-and-lists␟dd08971359df6ce91f9758cad85fd31a1f624b8e␟6625266948849786369:Search Folders and Lists`,i=$localize`:@@cu-nav-component__tooltip-msg_space-conversations␟d6e2918496924e23b57d23cbaf2aee7ba7382cf8␟9125778021129612553:Conversations in this Space`,n=$localize`:@@cu-nav-component__tooltip-msg_space-docs␟0acae379288f7e3b01c0c89a06c94ac71b847d74␟3381284956617298360:Docs in this Space`,o=$localize`:@@cu-nav-component__sidebar-section-hint_showing-archived-folders-and-lists␟cfd43ca47ac4f9d297a7865fbb58fe19f515ce56␟7025457342508960015:Showing archived Folders & Lists.`,a=$localize`:@@common_hide␟1eede69e18c5ac9c0b0295b72cabb7e64e029e74␟8461609631969932886:Hide`,r=$localize`:@@common_no-results-found␟5a7196216a0c0a6fcb7d1000066cf1c4755a13db␟5141138376167445695: No results found. `,s=$localize`:@@cu-nav-component__create-list_endless␟36b5ab457fdec110f7efb3ff03265ca38c90f83c␟3423937319341239402: Create a ${"\ufffd#7\ufffd"}:START_TAG_DIV: List ${"\ufffd/#7\ufffd"}:CLOSE_TAG_DIV:${"\ufffd#8\ufffd\ufffd/#8\ufffd"}:LINE_BREAK:to get started. `,c=$localize`:@@cu-nav-component__select-space_not-me␟19eb1f4c906d6beb4e3859282d32fd8c6277dabd␟8193754771688769555:Select a Space to show Folders and Workspace members.`,l=$localize`:@@cu-nav-component__select-space_me␟9f574760f7b110d14fcceff24a0f3aae1889b2f0␟702787372024210162:Select a Space to show Folders.`,u=$localize`:@@cu-nav-component__start-with-a-template␟be6330fb06e886b88a6aa03239d6bbe6296ab3f6␟1538904086646247633:Start with a template`,d=$localize`:@@common_sidebar-settings␟219850fe98ddadfa51d645eee93046c660a392be␟3107886190804624906:Sidebar settings`,h=$localize`:@@common_sidebar-settings␟accf25528ce25f871fc2fbf98d1774b5f50f8273␟4532430373028616842: Sidebar settings `,p=$localize`:@@layout_size-and-style␟5710e13eace40bd8525ec0ec9da06d8930f9f5e4␟6637078323937226425: Layout size & style `,f=$localize`:@@common_new␟d81f00c85d3b507f3e3d78bfc617a2c66e028391␟5280218112746407598:New`,g=$localize`:@@common_hide-archived␟af2348e68fa3cee732f296b7192e50a9aa67951f␟5346208167923617108:Hide archived`,m=$localize`:@@common_show-archived␟9837b0caee0ab6f24e881c7d6ddd6bc304d196ae␟1525728150043011845:Show archived`,v=$localize`:@@common_expand-all-folders␟ba5ff2f48bf0e0bbb637bc959ef98e475ba1af54␟759682601442547054: Expand all Folders `,b=$localize`:@@common_close-all-folders␟d5261d268f30a178baf649b6abbe88af9fa0cb11␟7849502746680259381: Close all Folders `,_=$localize`:@@common_dark-sidebar␟20e964ce27855ff27f792070bfa1d5167065c222␟4039390875349538646: Dark side(bar) `,w=$localize`:@@cu-nav-component__tooltip-msg_search-folder-and-lists␟dd08971359df6ce91f9758cad85fd31a1f624b8e␟6625266948849786369:Search Folders and Lists`,y=$localize`:@@common_create-folder-list␟d79b6d4b54e7d24141a6562b70cb95466200906b␟8383219149608386874:Create Folder or List`,[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],["firstStep",""],["newListFolder",""],["sidebarActions",""],["layoutStyleModal",""],["sharedNav",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sidebar-section","sidebar-section_categories",3,"ngClass"],[1,"sidebar-section__header-container"],["class","sidebar-section__header",3,"ngClass","contextmenu",4,"ngIf"],[3,"convos","docs","convoDocMap","dropdownOpen","dropdownClose",4,"ngIf"],["class","sidebar-message",4,"ngIf"],[1,"sidebar-section__subheader"],[1,"sidebar-section__subheader-title"],t,[3,"ngTemplateOutlet"],[1,"sidebar-section__header",3,"ngClass","contextmenu"],[1,"sidebar-section__name"],[1,"sidebar-section__name-link",3,"ngClass","routerLink"],[3,"project"],["projectMenu",""],["icon","ellipsis",1,"nav-menu__toggle"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"convos","docs","convoDocMap","dropdownOpen","dropdownClose"],["actions","",3,"ngTemplateOutlet"],["sharedNav","",3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sidebar-section__toolbar",3,"ngClass"],["placeholder",e,3,"focusOnInput","onChange"],[1,"sidebar-section__scrollable",3,"perfectScrollbar"],["scrollContainer","","scrollbar","ngxPerfectScrollbar"],["convosTooltip",i,"docsTooltip",n,3,"convos","docs","dropdownOpen","dropdownClose",4,"ngIf"],["class","sidebar-section__hint",4,"ngIf"],["class","sidebar-section__body","cdkDropList","","cdkDropListOrientation","vertical",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["class","sidebar-section__notes",3,"ngClass",4,"ngIf"],[3,"folderless","projectId","onlyDeleteIfOwner","canDelete","meUser","scrollContainer","isDraggingList","isDragging","dragIds","connectedDragIds","createListState","selectedSubcategory","dragDisabled","onDraggingList","cdkDragStarted","cdkDragEnded","onCreateListStateChange","onCreateList","onChangeCreateListError","onDropView","dropdownOpen","dropdownClose"],["loader",""],["convosTooltip",i,"docsTooltip",n,3,"convos","docs","dropdownOpen","dropdownClose"],[1,"sidebar-section__hint"],o,[1,"sidebar-section__hint-link",3,"click"],a,["cdkDropList","","cdkDropListOrientation","vertical",1,"sidebar-section__body",3,"cdkDropListDropped"],[3,"items","pageSize","bottomPadding","scrollContainer"],["lazyList",""],[4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cuDragScroll","",3,"cdkDragDisabled","cdkDragStartDelay","cuDragScrollContainer","cdkDragData","category","onlyDeleteIfOwner","canDelete","meUser","isActive","isOpened","selectedSubcategory","projectId","scrollContainer","isDraggingList","isDraggingTask","isDragging","dragDisabled","dragIds","connectedDragIds","onDraggingList","cdkDragStarted","cdkDragEnded","onToggle","onDropView","dropdownOpen","dropdownClose",4,"ngIf"],["cdkDrag","","cuDragScroll","",3,"cdkDragDisabled","cdkDragStartDelay","cuDragScrollContainer","cdkDragData","category","onlyDeleteIfOwner","canDelete","meUser","isActive","isOpened","selectedSubcategory","projectId","scrollContainer","isDraggingList","isDraggingTask","isDragging","dragDisabled","dragIds","connectedDragIds","onDraggingList","cdkDragStarted","cdkDragEnded","onToggle","onDropView","dropdownOpen","dropdownClose"],["navCategory",""],[1,"sidebar-section__notes",3,"ngClass"],[4,"ngIf","ngIfElse"],["noSearch",""],r,[1,"sidebar-section__notes-arrow",3,"ngClass"],["width","73","height","89","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M27.4 56.25a11.12 11.12 0 0 1 1.07-.1c.59-.01 1.16.06 1.69.22 1.05.3 1.9 1 2.03 2.18.18 1.8-1.4 3.77-2.97 5a10.57 10.57 0 0 1-4.43 2l-.21.06h-.2a8.37 8.37 0 0 1-5.15-1.8 6.88 6.88 0 0 1-2.25-3.46 27.3 27.3 0 0 1 10.41-4.1zM66.75 2.78a110.01 110.01 0 0 0-15.84 9.1 119.07 119.07 0 0 0-27.4 26.2c-3.31 4.39-6.62 9.11-8.4 14.08-1.03 2.91-1.4 5.92-.67 8.39A31.97 31.97 0 0 0 4.19 71.08C1.51 75.63.13 80.67.31 85.26c.05 1.13.2 2.23.43 3.29.04.18 1.07.03 1.24.02.1-.01 1.3-.18 1.29-.22-1.88-8.4 2.4-19.03 10.54-25.7.36-.3.74-.6 1.12-.88.4.8.94 1.52 1.65 2.12a8.95 8.95 0 0 0 5.36 2c2.37.13 5.08-.1 7.56-1.2 1.94-.86 3.93-2.46 4.84-4.45.42-.93.51-1.9.16-2.66-.49-1.06-1.64-1.49-2.81-1.65-1.43-.2-2.99-.07-4.5.1-1.35.14-2.71.36-4.08.7a29.3 29.3 0 0 0-6.39 2.5c-.32-1.99-.05-4.23.66-6.45 1.49-4.69 4.46-9.15 7.5-13.33 3.5-4.82 7.43-9.4 11.68-13.67A116.25 116.25 0 0 1 66.55 3.93a58.24 58.24 0 0 0-5.83 7.8 8.8 8.8 0 0 0 2.14-.08c.08 0 .33-.02.39-.1C65.69 7.61 72.33.33 72.4.25c.03-.03-.37-.05-.36-.05a10.04 10.04 0 0 0-1.78.14c-.1.01-7.53 2.05-10.95 2.87-.5.12.37.12.43.12a8.41 8.41 0 0 0 1.73-.17l7.46-1.79c-.37.37-2.1 1.37-2.18 1.4z"],s,[1,"sidebar-section__notes-link",3,"click"],[1,"sidebar-section__loader"],[1,"sidebar-message"],["selectSpaceTmpl",""],c,l,[1,"nav-category__onboarding"],[1,"nav-category__onboarding-back"],[1,"nav-category__onboarding-icon","nav-category__plus","nav-category__plus_onboarding",3,"click"],["width","24","height","24","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],["fill-rule","nonzero","fill","none"],["width","24","height","24","rx","12",1,"cu-fill-background"],["d","M11 11V7a1 1 0 1 1 2 0v4h4a1 1 0 0 1 0 2h-4v4a1 1 0 0 1-2 0v-4H7a1 1 0 1 1 0-2h4z",1,"cu-fill"],[1,"nav-category__onboarding-text"],["width","21","height","17","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd"],["d","M4 7h16a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1z","fill","#FFF"],["stroke","#FFF","stroke-width","3","d","M8.5 1l-6 7.5 6 7.5"],u,[3,"item","click"],[3,"item","click",4,"ngIf"],["cuDropdown","",1,"nav-menu","nav-menu_cog","cu-dropdown",3,"dropdownCloseOnInsideClick","dropdownDestroyMenuOnClose","dropdownCloseOnModal","dropdownOpen","dropdownClose"],["menu","dropdown"],["icon","cu2-cog","cuDropdownToggle","","cuTooltip",d,1,"cu-dropdown__toggle","nav-menu__toggle","nav-menu__toggle_cog",3,"tooltipModifier"],["class","cu-dropdown__menu cu-dropdown__menu_overflow-hidden nav-menu__controls",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_overflow-hidden","nav-menu__controls"],[1,"nav-menu-item__title"],h,["class","nav-menu-item_parent","cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPlacement","dropdownCloseOnModal",4,"ngIf"],["cuLink","","draggable","false",1,"nav-menu-item",3,"click"],["icon","archive2",1,"nav-menu-item__icon","nav-menu-item__icon_archive"],[1,"nav-menu-item__name"],["showArchivedTmpl",""],[1,"nav-menu-item",3,"click"],["icon","cu2-layout-style",1,"nav-menu-item__icon","nav-menu-item__icon_dashboard"],p,["cuDropdown","",1,"nav-menu-item_parent",3,"dropdownCloseOnInsideClick","dropdownPlacement","dropdownCloseOnModal"],["cuDropdownToggle","",1,"nav-menu-item"],["icon","cu2-new",1,"nav-menu-item__icon","nav-menu-item__icon_create"],f,["icon","cu2-angle-right",1,"nav-menu-item__arrow"],[3,"click",4,"cuDropdownMenu"],[3,"click"],[4,"ngTemplateOutlet"],g,m,["class","nav-menu-item","cuLink","","draggable","false",3,"click",4,"ngIf"],["icon","expand",1,"nav-menu-item__icon","nav-menu-item__icon_expand-all"],v,["icon","expand",1,"nav-menu-item__icon","nav-menu-item__icon_close-all"],b,["icon","cu2-darth-vader",1,"nav-menu-item__icon","nav-menu-item__icon_dashboard"],_,[1,"nav-menu-item__toggle-switch","nav-menu-item__toggle-switch_not-clickable",3,"checked"],["cuDropdown","","class","sidebar-section__plus","triggers","","container","body","containerClass","nav-category__onboarding-container","placement","right",3,"ngClass","dropdownOpen",4,"ngIf"],["icon","search","cuTooltip",w,1,"sidebar-section__search",3,"ngClass","tooltipModifier","click"],["cuDropdown","","triggers","","container","body","containerClass","nav-category__onboarding-container","placement","right",1,"sidebar-section__plus",3,"ngClass","dropdownOpen"],["icon","cu2-plus","cuDropdownToggle","","cuTooltip",y,1,"sidebar-section__plus-icon",3,"tooltipModifier"],[4,"cuDropdownMenu"],[3,"user","allowCollapse","convos","docs","dropdownOpen","dropdownClose"]]},template:function(t,e){if(1&t&&(d.bd(0,Zo,1,5,"ng-container",0),d.vc(1,"async"),d.vc(2,"async"),d.bd(3,Sa,18,29,"ng-container",1),d.vc(4,"async"),d.vc(5,"async"),d.bd(6,Ta,14,0,"ng-template",null,2,d.cd),d.bd(8,Oa,6,14,"ng-template",null,3,d.cd),d.bd(10,Ya,8,11,"ng-template",null,4,d.cd),d.bd(12,Ka,1,0,"ng-template",null,5,d.cd),d.bd(14,Za,2,6,"ng-template",null,6,d.cd)),2&t){let t=null,i=null;d.Dc("ngIf",d.wc(1,2,e.showShared$)&&(null==(t=d.wc(2,4,e.user$))?null:t.dashboard)!==e.LayoutVersion.Five),d.Ib(3),d.Dc("ngIf",!d.wc(4,6,e.showShared$)||(null==(i=d.wc(5,8,e.user$))?null:i.dashboard)===e.LayoutVersion.Five)}},directives:[n.q,n.x,n.o,P.k,jo.a,nt.a,Lo.a,Eo.a,Bn.a,No.a,Ao.a,I.d,Vo.a,n.p,zo.a,I.a,zi.a,Fo.a,Bo.a,tt.b,et.a,ot.a,it.a,Ro.a,Uo.a,Go.a],pipes:[n.b],styles:[".cu-nav-component{flex-grow:1;display:grid;grid:1fr/1fr;overflow:hidden}.cu2-sidebar__body_v5 .cu-nav-component{display:block;height:0}"],encapsulation:2,data:{animation:[oo.e]},changeDetection:0}),t})();const Qa=function(t){return{"cu-sidebar-favorites_hidden":t}};function tr(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-sidebar-favorites",6),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc().resizerSliderVisible=!0})("dropdownClose",function(){return d.Uc(t),d.uc().resizerSliderVisible=!1}),d.vc(1,"async"),d.bc()}if(2&t){const t=d.uc();d.Dc("ngClass",d.Hc(4,Qa,d.wc(1,2,t.favoritesPinned$)))("modifier","cu-sidebar-favorites_sidebar")}}function er(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-nav-component",7),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc().resizerSliderVisible=!0})("dropdownClose",function(){return d.Uc(t),d.uc().resizerSliderVisible=!1}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bc()}if(2&t){const t=d.uc();d.Dc("isCollapsed",d.wc(1,4,t.isCollapsed$))("convos",d.wc(2,6,t.convos$))("convoDocMap",d.wc(3,8,t.convoDocMap$))("docs",d.wc(4,10,t.docs$))}}function ir(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-convo-doc-visibility",17),d.qc("dropdownOpen",function(){return d.Uc(t),d.uc(3).resizerSliderVisible=!0})("dropdownClose",function(){return d.Uc(t),d.uc(3).resizerSliderVisible=!1}),d.vc(1,"async"),d.vc(2,"async"),d.bc()}if(2&t){const t=d.uc(3);d.Dc("convos",d.wc(1,4,t.convos$))("docs",d.wc(2,6,t.docs$))("modifier","cu-convo-doc-visibility_absolute")("@loading",void 0)}}function nr(t,e){if(1&t&&(d.cc(0,"div",9),d.bd(1,ir,3,8,"cu-convo-doc-visibility",10),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.Xb(5,"div",11),d.cc(6,"div",12),d.gc(7,13),d.bc(),d.cc(8,"div",14),d.Xb(9,"div",15),d.ac(10),d.gc(11,16),d.Zb(),d.bc(),d.bc()),2&t){const t=d.uc(2);let e=null;d.Dc("@loading",void 0),d.Ib(1),d.Dc("ngIf",!d.wc(2,2,t.isCollapsed$)&&((null==(e=d.wc(3,4,t.convos$))?null:e.length)||(null==(e=d.wc(4,6,t.docs$))?null:e.length)))}}function or(t,e){if(1&t&&(d.bd(0,nr,12,8,"div",8),d.vc(1,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,1,t.isAllSpaces$))}}const ar=function(t,e){return{"cu2-sidebar-resizer_slider":t,"cu2-sidebar-resizer_slider_visible":e}},rr=function(t){return{"cu2-sidebar-resizer-handle_hidden":t}},sr=function(){return{right:!0}},cr=function(t,e,i,n){return{"cu2-sidebar__body_collapsed":t,"cu2-sidebar__body_v4":e,"cu2-sidebar__body_v5":i,"cu2-sidebar__body_favorites-pinned":n}};let lr=(()=>{class t{constructor(t,e,i,n,o){this.sharedData=t,this.store=e,this.preloader=i,this.changeDetectorRef=n,this.renderer=o,this.destroy$=new B.a,this.isCollapsed$=this.store.select(z.getSidebarIsCollapsedOption),this.sidebarWidth$=this.store.select(z.getSidebarWidthOption),this.user$=this.store.select(z.getUser),this.project$=this.store.select(z.getProject),this.sharedSpaceParam$=this.store.select(z.getSharedSpaceParam),this.isGuestTeam$=this.store.select(z.isGuestTeam),this.sidebarAlwaysOpen$=this.store.select(z.getSidebarAlwaysOpen),this.resizerSliderVisible=!1,this.LayoutVersion=H.b,this.convos$=this.store.select(X.n),this.docs$=this.store.select(X.o),this.convoDocMap$=this.store.select(X.l),this.isAllSpaces$=this.store.pipe(Object(K.select)(z.getSelectedProjectId),Object(Qt.a)(t=>t===E.a)),this.favoritesPinned$=this.store.pipe(Object(K.select)(no.g))}ngOnInit(){this.store.dispatch(new Y.le)}ngAfterViewInit(){this.isCollapsed$.pipe(Object(Yn.a)(),Object(A.a)(this.destroy$)).subscribe(t=>{t||setTimeout(()=>this.store.dispatch(new Y.wg(null)),0)}),this.preloader.hide()}onResize(){this.store.dispatch(new Y.yg(window.innerWidth,this.lastWindowWidth||window.innerWidth)),this.lastWindowWidth=window.innerWidth}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}resizeStart(t){this.resizeStartWidth=t.rectangle.width,this.renderer.addClass(document.body,"cu-unselectable")}resizing(t){this.store.dispatch(new Y.wg(this.resizeStartWidth+t.edges.right))}resizeEnded(){this.renderer.removeClass(document.body,"cu-unselectable")}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Jn.a),d.Wb(K.Store),d.Wb(wo.a),d.Wb(d.h),d.Wb(d.H))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu2-sidebar"]],hostAttrs:[1,"cu2-sidebar"],hostBindings:function(t,e){1&t&&d.qc("resize",function(){return e.onResize()},!1,d.Tc)},decls:30,vars:68,consts:function(){let t,e,i,n;return t=$localize`:@@common_conversations-with-access␟b0490b385c1313eb2ee165cd155c851442b35641␟6040164447694449903:All Conversations that you have access to`,e=$localize`:@@common_docs-with-access␟239037ad6ba9bd40f60976bfa1f975a82ccb5f70␟4842177638011947877:All Docs that you have access to`,i=$localize`:@@cu2-sidebar__title_viewing-everything␟30fe4871afd5db8a62098b6696a22e554ac7e0ca␟6132787159433816213: Viewing Everything `,n=$localize`:@@cu2-sidebar__description_select-space␟1cb3e535b09de2b3078ff9ae19233535453e1772␟5477751856693057393:Select a Space to see Lists`,[["mwlResizable","",1,"cu2-sidebar-resizer",3,"ngClass","resizeStart","resizing","resizeEnd"],["mwlResizeHandle","",1,"cu2-sidebar-resizer-handle",3,"ngClass","resizeEdges"],[1,"cu2-sidebar__body",3,"ngClass"],[3,"ngClass","modifier","dropdownOpen","dropdownClose",4,"ngIf"],[3,"isCollapsed","convos","convoDocMap","docs","dropdownOpen","dropdownClose",4,"ngIf","ngIfElse"],["everything",""],[3,"ngClass","modifier","dropdownOpen","dropdownClose"],[3,"isCollapsed","convos","convoDocMap","docs","dropdownOpen","dropdownClose"],["class","cu2-sidebar__everything",4,"ngIf"],[1,"cu2-sidebar__everything"],["convosTooltip",t,"docsTooltip",e,3,"convos","docs","modifier","dropdownOpen","dropdownClose",4,"ngIf"],["icon","cu2-everything",1,"cu2-sidebar__everything-icon"],[1,"cu2-sidebar__everything-title"],i,[1,"cu2-sidebar__everything-description"],["icon","arrow-right-v2",1,"cu2-sidebar__everything-description-icon"],n,["convosTooltip",t,"docsTooltip",e,3,"convos","docs","modifier","dropdownOpen","dropdownClose"]]},template:function(t,e){if(1&t&&(d.cc(0,"div",0),d.qc("resizeStart",function(t){return e.resizeStart(t)})("resizing",function(t){return e.resizing(t)})("resizeEnd",function(){return e.resizeEnded()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.Xb(8,"div",1),d.vc(9,"async"),d.cc(10,"div",2),d.vc(11,"async"),d.vc(12,"async"),d.vc(13,"async"),d.vc(14,"async"),d.vc(15,"async"),d.vc(16,"async"),d.vc(17,"async"),d.vc(18,"async"),d.vc(19,"async"),d.vc(20,"async"),d.bd(21,tr,2,6,"cu-sidebar-favorites",3),d.vc(22,"async"),d.vc(23,"async"),d.bd(24,er,5,12,"cu-nav-component",4),d.vc(25,"async"),d.vc(26,"async"),d.vc(27,"async"),d.bd(28,or,2,3,"ng-template",null,5,d.cd),d.bc(),d.bc()),2&t){const t=d.Rc(29);let i=null,n=null,o=null,a=null,r=null;d.ad("width",d.wc(1,11,e.isCollapsed$)?"0":d.wc(2,13,e.sharedData.loadingState)?null:d.wc(3,15,e.sidebarWidth$)-1,"px"),d.Dc("ngClass",d.Ic(57,ar,d.wc(4,17,e.isCollapsed$)&&(null==(i=d.wc(5,19,e.user$))?null:i.dashboard)===e.LayoutVersion.Five,(e.resizerSliderVisible||d.wc(6,21,e.sidebarAlwaysOpen$))&&(null==(i=d.wc(7,23,e.user$))?null:i.dashboard)===e.LayoutVersion.Five)),d.Ib(8),d.Dc("ngClass",d.Hc(60,rr,d.wc(9,25,e.isCollapsed$)))("resizeEdges",d.Gc(62,sr)),d.Ib(2),d.ad("width",d.wc(11,27,e.isCollapsed$)&&(null==(n=d.wc(12,29,e.user$))?null:n.dashboard)===e.LayoutVersion.Five?d.wc(13,31,e.sharedData.loadingState)?null:d.wc(14,33,e.sidebarWidth$)-1:null,"px"),d.Dc("ngClass",d.Kc(63,cr,d.wc(15,35,e.isCollapsed$),(null==(o=d.wc(16,37,e.user$))?null:o.dashboard)===e.LayoutVersion.Four,(null==(o=d.wc(17,39,e.user$))?null:o.dashboard)===e.LayoutVersion.Five,((null==(o=d.wc(18,41,e.user$))?null:o.dashboard)===e.LayoutVersion.Four||(null==(o=d.wc(19,43,e.user$))?null:o.dashboard)===e.LayoutVersion.Five)&&d.wc(20,45,e.favoritesPinned$))),d.Ib(11),d.Dc("ngIf",(null==(a=d.wc(22,47,e.user$))?null:a.dashboard)===e.LayoutVersion.Five&&!d.wc(23,49,e.favoritesPinned$)),d.Ib(3),d.Dc("ngIf",d.wc(25,51,e.project$)||d.wc(26,53,e.sharedSpaceParam$)||(null==(r=d.wc(27,55,e.user$))?null:r.dashboard)===e.LayoutVersion.Five)("ngIfElse",t)}},directives:[o.a,n.o,o.c,n.q,yo.a,Ja,nt.a,Ao.a],pipes:[n.b],styles:[".cu2-sidebar{min-height:0}.cu2-sidebar__body{display:flex;flex-direction:column;-webkit-user-select:none;-ms-user-select:none;user-select:none;flex-grow:0;flex-shrink:0;order:1;width:100%;height:100%;overflow:hidden;background-color:#fff;border-right:1px solid #e9ebf0}.contrast_high .cu2-sidebar__body{border-right-color:#dedede}.dark-theme .cu2-sidebar__body{background:#2b343b;border-right-color:#1e272e}.cu-left-sidebar.dark-theme .cu2-sidebar__body{background:#20262b}.cu2-sidebar__body_collapsed{border-right-width:0}.cu2-sidebar__body_collapsed.cu2-sidebar__body_v5{border-right-width:1px;width:auto}.cu2-sidebar__body_favorites-pinned:not(.cu2-sidebar__body_collapsed){padding-top:36px}.cu2-sidebar__body_favorites-pinned.cu2-sidebar__body_v5.cu2-sidebar__body_collapsed{padding-top:0}.cu2-sidebar-resizer{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;height:100%;max-width:370px;will-change:transform,width}.cu2-sidebar-resizer_slider .cu2-sidebar__body{transition:transform .2s cubic-bezier(.785,.135,.15,.86) .2s;position:absolute;transform:translate3d(-100%,0,0)}.cu2-sidebar-resizer_slider_visible .cu2-sidebar__body,.cu-left-sidebar:hover:not(.cu-left-sidebar_collapsing) .cu2-sidebar-resizer_slider .cu2-sidebar__body{transform:translateZ(0)}.cu2-sidebar-resizer-handle{transition:background .2s cubic-bezier(.785,.135,.15,.86) .1s;width:9px;height:100%;cursor:col-resize;position:absolute;right:-4px;z-index:20;opacity:.2}.cu2-sidebar-resizer-handle:active,.cu2-sidebar-resizer-handle:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-sidebar-resizer-handle:active,.cu2-sidebar-resizer-handle:hover{background:var(--theme-main-color)}}.cu2-sidebar-resizer-handle_hidden{display:none}.cu2-sidebar__everything{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:hidden;position:relative}.cu2-sidebar__everything-icon{stroke:#7b68ee;width:14px;height:14px;margin-bottom:15px}@supports (--theme-main-color:#7b68ee){.cu2-sidebar__everything-icon{stroke:var(--theme-main-color)}}.cu2-sidebar__everything-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#292d34;font:500 16px/1.2 Gotham Pro,Proxima Nova,arial,serif;text-align:center;padding:0 20px 10px;min-width:150px}.dark-theme .cu2-sidebar__everything-title{color:#d5d6d7}.cu2-sidebar__everything-description{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#7c828d;font:400 14px/1.2 Gotham Pro,Proxima Nova,arial,serif;text-align:center;padding:0 20px;min-width:150px}.dark-theme .cu2-sidebar__everything-description{color:#abaeb0}.cu2-sidebar__everything-description-icon{transform:rotate(180deg);stroke:#7c828d;margin-right:5px;display:inline-block;width:16px;height:14px;margin-bottom:-2px}.dark-theme .cu2-sidebar__everything-description-icon{stroke:#abaeb0}"],encapsulation:2,data:{animation:[Object(_o.m)("sidebarState",[Object(_o.j)("collapsed",Object(_o.k)({width:"0"})),Object(_o.j)("expanded",Object(_o.k)({width:"100%"})),Object(_o.l)("collapsed <=> expanded",[Object(_o.e)("0.2s ease-in")])]),Object(_o.m)("loading",[Object(_o.l)(":enter",[Object(_o.k)({opacity:0}),Object(_o.e)("150ms",Object(_o.k)({opacity:1}))])])]},changeDetection:0}),t})();var ur=i("uxFD");const dr=function(t,e,i,n,o){return{"cu-left-sidebar__toggle_collapsed":t,"cu-left-sidebar__toggle_v4":e,"cu-left-sidebar__toggle_v5":i,"cu-left-sidebar__toggle_favorites":n,"cu-left-sidebar__toggle_dark-sidebar":o}};function hr(t,e){if(1&t){const t=d.dc();d.ac(0),d.Xb(1,"cu2-spaces-bar",3),d.Xb(2,"cu2-sidebar",3),d.cc(3,"div",4),d.qc("click",function(){return d.Uc(t),d.uc().toggleSidebar()}),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"async"),d.vc(11,"async"),d.bc(),d.Zb()}if(2&t){const t=d.uc();let e=null,i=null;d.Ib(3),d.Dc("ngClass",d.Lc(19,dr,t.isSidebarCollapsed,(null==(e=d.wc(4,3,t.user$))?null:e.dashboard)===t.LayoutVersion.Four&&!t.favoritesPinned,(null==(e=d.wc(5,5,t.user$))?null:e.dashboard)===t.LayoutVersion.Five&&!t.favoritesPinned,((null==(e=d.wc(6,7,t.user$))?null:e.dashboard)===t.LayoutVersion.Four||(null==(e=d.wc(7,9,t.user$))?null:e.dashboard)===t.LayoutVersion.Five)&&t.favoritesPinned,t.isSidebarDark&&!(null!=(e=d.wc(8,11,t.user$))&&e.dark_theme)))("cuTooltip",d.wc(9,13,t.isSidebarCollapsedText$))("tooltipModifier",(null==(i=d.wc(10,15,t.user$))?null:i.dashboard)!==t.LayoutVersion.Four&&(null==(i=d.wc(11,17,t.user$))?null:i.dashboard)!==t.LayoutVersion.Five||t.favoritesPinned?"cu-left-sidebar__tooltip":"cu-left-sidebar__tooltip-close")}}function pr(t,e){if(1&t&&(d.Xb(0,"cu-simple-bar",5),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async")),2&t){const t=d.uc();let e=null;d.ad("max-width",null!=(e=d.wc(1,4,t.sidebarOptions$))&&e.isCollapsed?0:d.wc(2,6,t.sidebarWidth$)-1,"px"),d.Dc("isSidebarDark",t.isSidebarDark)("user",d.wc(3,8,t.user$))}}let fr=(()=>{class t{constructor(t,e){this.sharedData=t,this.store=e,this.destroy$=new B.a,this.isSidebarCollapsed$=this.store.select(z.getSidebarIsCollapsedOption),this.isSidebarCollapsed=!1,this.dropdownOpen=!1,this.isSidebarCollapsedText$=this.isSidebarCollapsed$.pipe(Object(Qt.a)(t=>t?$localize`:@@common_sidebar--expand:Expand Sidebar (q)`:$localize`:@@common_sidebar--collapse:Collapse Sidebar (q)`),Object(te.a)()),this.project$=this.store.select(z.getProject),this.sharedSpaceParam$=this.store.select(z.getSharedSpaceParam),this.needShowSidebar=!1,this.user$=this.store.select(z.getUser),this.sidebarWidth$=this.store.select(z.getSidebarWidthOption),this.sidebarOptions$=this.store.select(z.getSidebarOptions),this.LayoutVersion=H.b,this.isSidebarCollapsing=!1,this.isSidebarDark=!1,this.favoritesPinned=!1,this.isSidebarCollapsed$.pipe(Object(A.a)(this.destroy$)).subscribe(t=>{this.isSidebarCollapsed=t})}ngOnInit(){Object(ii.a)([this.project$,this.sharedSpaceParam$]).pipe(Object(A.a)(this.destroy$)).subscribe(([t,e])=>{this.needShowSidebar=!(!t&&!e)})}ngOnDestroy(){this.destroy$.next()}toggleSidebar(){this.store.dispatch(new Y.yl),this.store.dispatch(new Y.zl),setTimeout(()=>{this.store.dispatch(new Y.zl)},400)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Jn.a),d.Wb(K.Store))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-left-sidebar"]],hostAttrs:[1,"cu-left-sidebar"],hostVars:8,hostBindings:function(t,e){2&t&&d.Ob("cu-left-sidebar_collapsing",e.isSidebarCollapsing)("cu-left-sidebar_collapsed",e.isSidebarCollapsed)("cu-left-sidebar_favorites-pinned",e.favoritesPinned)("dark-theme",e.isSidebarDark)},inputs:{isSidebarCollapsing:"isSidebarCollapsing",isSidebarDark:"isSidebarDark",favoritesPinned:"favoritesPinned"},decls:7,vars:8,consts:[[1,"cu-left-sidebar__container"],[4,"ngIf","ngIfElse"],["simpleBar",""],[1,"cu-hidden-print"],["icon","cu2-angle-right",1,"cu-left-sidebar__toggle","cu-hidden-print",3,"ngClass","cuTooltip","tooltipModifier","click"],[1,"cu-hidden-print",3,"isSidebarDark","user"]],template:function(t,e){if(1&t&&(d.cc(0,"div",0),d.bd(1,hr,12,25,"ng-container",1),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,pr,4,10,"ng-template",null,2,d.cd),d.bc()),2&t){const t=d.Rc(6);let i=null;d.Ib(1),d.Dc("ngIf",(null==(i=d.wc(2,2,e.user$))?null:i.dashboard)===e.LayoutVersion.Two||(null==(i=d.wc(3,4,e.user$))?null:i.dashboard)===e.LayoutVersion.Four||(null==(i=d.wc(4,6,e.user$))?null:i.dashboard)===e.LayoutVersion.Five)("ngIfElse",t)}},directives:[n.q,bo.a,lr,nt.a,n.o,ot.a,ur.a],pipes:[n.b],styles:[".cu-left-sidebar{min-height:0;position:relative;z-index:550}.cu-left-sidebar_collapsing{pointer-events:none}.cu-left-sidebar_collapsing .cu-left-sidebar__toggle{display:none}.cu-left-sidebar_collapsed.cu-left-sidebar_favorites-pinned:not(.cu-left-sidebar_collapsing){z-index:570}.cu-left-sidebar_collapsed.cu-left-sidebar_favorites-pinned:not(.cu-left-sidebar_collapsing) .cu2-sidebar{height:calc(100% - 36px);margin-top:36px}.cu-left-sidebar__container{display:grid;grid:1fr/auto auto;height:100%;position:relative}.cu-left-sidebar__toggle{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;top:15px;right:-10px;background-color:#fff;width:20px;height:20px;border-radius:50%;cursor:pointer;z-index:800;padding:3px 3px 3px 4px;transform:rotate(180deg);fill:#82868d;border:1px solid #e9ebf0}.contrast_high .cu-left-sidebar__toggle{border-color:#dedede}.dark-theme .cu-left-sidebar__toggle{background-color:#2b343b;border-color:#1e272e;fill:#828588}.cu-left-sidebar__toggle:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-left-sidebar__toggle:hover{fill:var(--theme-main-color)}}.cu-left-sidebar__toggle_v4,.cu-left-sidebar__toggle_v5,.layout-size_compact .cu-left-sidebar__toggle_v4,.layout-size_compact .cu-left-sidebar__toggle_v5{top:16px}.layout-size_default .cu-left-sidebar__toggle_v4,.layout-size_default .cu-left-sidebar__toggle_v5{top:18px}.layout-size_large .cu-left-sidebar__toggle_v4,.layout-size_large .cu-left-sidebar__toggle_v5{top:21px}.dark-theme .cu-left-sidebar__toggle_dark-sidebar{background:#fff;border-color:rgba(0,0,0,.2)}.cu-left-sidebar__toggle_collapsed{background:#7b68ee;border-color:#7b68ee;fill:#fff;transform:rotate(0deg)}@supports (--theme-main-color:#7b68ee){.cu-left-sidebar__toggle_collapsed{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.dark-theme .cu-left-sidebar__toggle_collapsed{background:#7b68ee;border-color:#7b68ee;fill:#fff}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-left-sidebar__toggle_collapsed{background:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-left-sidebar__toggle_collapsed:hover{background:#5f48ea;border-color:#5f48ea;fill:#fff}@supports (--theme-main-color-dark:#5f48ea){.cu-left-sidebar__toggle_collapsed:hover{background:var(--theme-main-color-dark);border-color:var(--theme-main-color-dark)}}.cu-left-sidebar__toggle_favorites,.layout-size_compact .cu-left-sidebar__toggle_favorites{top:50px}.layout-size_default .cu-left-sidebar__toggle_favorites{top:53px}.layout-size_large .cu-left-sidebar__toggle_favorites{top:55px}.cu-left-sidebar__toggle_favorites:before{display:none}.cu-left-sidebar__toggle.cu-left-sidebar__toggle_favorites.cu-left-sidebar__toggle_collapsed{top:25px}.cu-left-sidebar__tooltip{transform:translate(-15px,-50%)}.cu-left-sidebar__tooltip .tooltip__triangle{left:10px}.cu-left-sidebar__tooltip-close{transform:translate(-15px,-150%)}.cu-left-sidebar__tooltip-close .tooltip__triangle{left:10px}.doc-sidebar-page-dragging .cu-left-sidebar{pointer-events:none}"],encapsulation:2,changeDetection:0}),t})();var gr=i("YwDF"),mr=i("2p4s"),vr=i("N/Rp"),br=i("eKZ6"),_r=i("CgHv"),wr=i("2eDp"),yr=i("VQww"),kr=i("mMFR"),xr=i("1Lli"),Sr=i("XIp8"),Tr=i("Injh"),Cr=i("QKYr"),Dr=i("wa4x"),Ir=i("1eS8"),Pr=i("P3m4"),Mr=i("TqRa"),Or=i("f0Wu"),$r=i.n(Or),jr=i("eDEC"),Lr=i("m2rH"),Er=i("LEq2"),Nr=i("A/Rp"),Ar=i("lypB");let Vr=(()=>{class t{constructor(){this.groupByText=$localize`:@@common_group-by:Group by`,this.saveLayoutText=$localize`:@@layout_save:Save layout`,this.sharingEntityText=$localize`:used as input binding value for ViewPublicSharingBannerComponent@@cu2-views-bar__sharing-entity_view:view`,this.showSubtasksText=$localize`:@@common_show-subtasks:Show subtasks`,this.sortByText=$localize`:@@common_sort-by:Sort By`,this.workloadForGroupingsPaywallTitleText=$localize`:@@paywall_title--workload-groupings:Workload for Groupings`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Sb({token:t,factory:t.\u0275fac}),t})();var zr=i("yLbY"),Fr=i("76Cs"),Br=i("qpQx"),Rr=i("91me"),Ur=i("o0pk"),Gr=i("7G3y"),Hr=i("nLWA"),Wr=i("JcCK"),qr=i("P5sH"),Xr=i("DIUN"),Yr=i("5LUp"),Kr=i("SkDE");function Zr(t,e){if(1&t){const t=d.dc();d.cc(0,"div",11),d.qc("click",function(){return d.Uc(t),d.uc(2).onAction.emit({type:"settings"})}),d.Xb(1,"div",12),d.ac(2),d.gc(3,13),d.Zb(),d.bc()}}function Jr(t,e){if(1&t){const t=d.dc();d.cc(0,"div",4),d.bd(1,Zr,4,0,"div",5),d.cc(2,"div",6),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.status!==e.SprintStatus.DONE&&e.status!==e.SprintStatus.IN_PROGRESS?e.onAction.emit({type:e.SprintStatus.IN_PROGRESS}):null}),d.Xb(3,"div",7),d.ac(4),d.gc(5,8),d.Zb(),d.bc(),d.cc(6,"div",6),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.status!==e.SprintStatus.DONE?e.onAction.emit({type:e.SprintStatus.DONE}):null}),d.Xb(7,"div",9),d.ac(8),d.gc(9,10),d.Zb(),d.bc(),d.bc()}if(2&t){const t=d.uc();d.Ib(1),d.Dc("ngIf",!t.hideSettingsOption),d.Ib(1),d.Ob("cu-sprint-details-menu__item-disabled",t.status===t.SprintStatus.DONE||t.status===t.SprintStatus.IN_PROGRESS),d.Dc("cuTooltip",t.status===t.SprintStatus.IN_PROGRESS?t.sprintInProgressText:t.sprintInProgressCantUndoText)("tooltipAllowHtmlRememberToEscapeXss",!0),d.Ib(4),d.Ob("cu-sprint-details-menu__item-disabled",t.status===t.SprintStatus.DONE),d.Dc("cuTooltip",t.sprintDoneText)("tooltipAllowHtmlRememberToEscapeXss",!0)}}const Qr=["*"];let ts=(()=>{class t{constructor(t,e,i){this.taskService=t,this.store=e,this.customFieldsService=i,this.SprintStatus=xo.d,this.destroy$=new B.a,this.hideSettingsOption=!1,this.onOpen=new d.o,this.onClose=new d.o,this.onAction=new d.o,this.sprintInProgressText=$localize`:@@cu-sprint-details-menu__toolip-msg_sprint-in-progress:Update your Sprint status to to In Progress, so you know it's actively being worked on. <br> This Sprint is already In Progress.`,this.sprintInProgressCantUndoText=$localize`:@@cu-sprint-details-menu__toolip-msg_sprint-in-progress-cant-undo:Update your Sprint status to to In Progress, so you know it's actively being worked on. <br> Warning: You cannot undo this action`,this.sprintDoneText=$localize`:@@cu-sprint-details-menu__tooltip-msg_update-sprint-status-to-done:Update the Sprint status to Done, so you know the Sprint is complete. <br> Warning: You cannot undo this action`}ngOnInit(){this.taskService.onTimeTrackChange.pipe(Object(Vi.a)(t=>this.sprintSettings&&("time_estimate"===this.sprintSettings.estimation||"points"===this.sprintSettings.estimation)&&t&&t.task&&(t.task.subcategory&&t.task.subcategory.id&&t.task.subcategory.id===this.subcategory.id||-1!==(t.task.other_subcategories||[]).findIndex(t=>t.id===this.subcategory.id))),Object(A.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(new Y.Xf(this.subcategory.id,this.subcategory.category,this.subcategory.project_id))}),this.customFieldsService.onChangeCustomFieldValue.pipe(Object(Vi.a)(()=>this.sprintSettings&&"time_estimate"!==this.sprintSettings.estimation&&"points"!==this.sprintSettings.estimation),Object(A.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(new Y.Xf(this.subcategory.id,this.subcategory.category,this.subcategory.project_id))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Fr.a),d.Wb(K.Store),d.Wb(Kr.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-sprint-details-menu"]],inputs:{status:"status",subcategory:"subcategory",sprintSettings:"sprintSettings",hideSettingsOption:"hideSettingsOption"},outputs:{onOpen:"onOpen",onClose:"onClose",onAction:"onAction"},ngContentSelectors:Qr,decls:5,vars:2,consts:function(){let t,e,i;return t=$localize`:@@cu-sprint-details-menu__mark-as-in-progress␟50ad0c28209dee78aa8e664b0b2a955f0ec5fb51␟6423892875059707849: Mark Sprint as In Progress `,e=$localize`:@@cu-sprint-details-menu__mark-as-done␟f0d67543fce97b820b32d7d5e700d35f81c018b0␟1530201390084461938: Mark Sprint as Done `,i=$localize`:@@common_sprint-settings␟bc3c3c0bafaad4a74155f21924ca46141d25d604␟7209554672074340995:Sprint Settings`,[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownDisabled","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle",""],["class","cu-sprint-details-menu",4,"cuDropdownMenu"],[1,"cu-sprint-details-menu"],["class","cu-sprint-details-menu__item",3,"click",4,"ngIf"],[1,"cu-sprint-details-menu__item",3,"cuTooltip","tooltipAllowHtmlRememberToEscapeXss","click"],["icon","sprint",1,"cu-sprint-details-menu__icon","blue"],t,["icon","sprint",1,"cu-sprint-details-menu__icon","green"],e,[1,"cu-sprint-details-menu__item",3,"click"],["icon","sprint",1,"cu-sprint-details-menu__icon","grey"],i]},template:function(t,e){1&t&&(d.Cc(),d.cc(0,"div",0,1),d.qc("dropdownOpen",function(){return e.onOpen.emit()})("dropdownClose",function(){return e.onClose.emit()}),d.cc(2,"div",2),d.Bc(3),d.bc(),d.bd(4,Jr,10,9,"div",3),d.bc()),2&t&&d.Dc("dropdownCloseOnInsideClick",!0)("dropdownDisabled",e.status===e.SprintStatus.DONE)},directives:[tt.b,et.a,it.a,n.q,ot.a,nt.a],styles:['.cu-sprint-details-menu{width:225px}.cu-sprint-details-menu__item{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;display:flex;align-items:center;cursor:pointer;height:48px;padding:0 15px;border-bottom:1px solid #e9ebf0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-sprint-details-menu__item{font-family:var(--global-font-support)}}.cu-sprint-details-menu__item.cu-sprint-details-menu__item-disabled{opacity:.5;cursor:not-allowed}.cu-sprint-details-menu__item:hover{background-color:#f9f9f9}.dark-theme .cu-sprint-details-menu__item:hover{background-color:#2b343b}.dark-theme .cu-sprint-details-menu__item{border-color:#1e272e}.cu-sprint-details-menu__icon{width:14px;height:10px;margin-right:8px}.cu-sprint-details-menu__icon.blue{fill:#4194f6}.cu-sprint-details-menu__icon.grey{fill:#7c828d}.cu-sprint-details-menu__icon.green{fill:#67cb48}'],encapsulation:2,changeDetection:0}),t})();var es=i("cjvU"),is=i("HPyy"),ns=i("loh9"),os=i("zYZY");const as=["colorPickerContainer1"];function rs(t,e){}function ss(t,e){1&t&&d.Yb(0)}function cs(t,e){1&t&&d.Yb(0)}function ls(t,e){if(1&t&&d.bd(0,cs,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(20),i=d.Rc(6);d.Dc("ngIf",t.isSharedTasks)("ngIfThen",e)("ngIfElse",i)}}function us(t,e){1&t&&d.Yb(0)}function ds(t,e){if(1&t&&d.bd(0,us,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(32),i=d.Rc(8);d.Dc("ngIf",t.subcategory)("ngIfThen",e)("ngIfElse",i)}}function hs(t,e){1&t&&d.Yb(0)}function ps(t,e){if(1&t&&d.bd(0,hs,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(10),i=d.Rc(12);d.Dc("ngIf",t.isGuestTeam)("ngIfThen",e)("ngIfElse",i)}}function fs(t,e){1&t&&d.Yb(0)}function gs(t,e){if(1&t&&d.bd(0,fs,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(30),i=d.Rc(22);d.Dc("ngIf",t.category)("ngIfThen",e)("ngIfElse",i)}}function ms(t,e){1&t&&d.Yb(0)}function vs(t,e){if(1&t&&d.bd(0,ms,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(30),i=d.Rc(14);d.Dc("ngIf",t.category)("ngIfThen",e)("ngIfElse",i)}}function bs(t,e){1&t&&d.Yb(0)}function _s(t,e){if(1&t&&d.bd(0,bs,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(28),i=d.Rc(16);d.Dc("ngIf",t.project)("ngIfThen",e)("ngIfElse",i)}}function ws(t,e){1&t&&d.Yb(0)}function ys(t,e){if(1&t&&d.bd(0,ws,1,0,"ng-container",1),2&t){const t=d.uc(),e=d.Rc(24),i=d.Rc(26);d.Dc("ngIf",t.isSharedSpace)("ngIfThen",e)("ngIfElse",i)}}function ks(t,e){}function xs(t,e){1&t&&(d.ac(0),d.gc(1,20),d.Zb())}function Ss(t,e){1&t&&(d.ac(0),d.gc(1,21),d.Zb())}function Ts(t,e){1&t&&(d.ac(0),d.gc(1,22),d.Zb())}function Cs(t,e){1&t&&(d.ac(0),d.gc(1,23),d.Zb())}function Ds(t,e){if(1&t&&(d.cc(0,"cu-project-menu",27),d.vc(1,"async"),d.Xb(2,"cu-project-avatar",33),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.bc()),2&t){const t=d.uc(2);let e=null,i=null,n=null,o=null,a=null;d.Dc("project",d.wc(1,6,t.currentProject$)),d.Ib(2),d.Dc("name",null==(e=d.wc(3,8,t.currentProject$))?null:e.name)("image",null==(i=d.wc(4,10,t.currentProject$))?null:i.avatar)("color",null==(n=d.wc(5,12,t.currentProject$))?null:n.color)("iconSource",null==(o=d.wc(6,14,t.currentProject$))?null:o.avatar_source)("iconName",null==(a=d.wc(7,16,t.currentProject$))?null:a.avatar_value)}}function Is(t,e){1&t&&d.Xb(0,"span",34)}function Ps(t,e){}const Ms=function(){return{location:"views-bar"}};function Os(t,e){if(1&t&&(d.cc(0,"div",35),d.bd(1,Ps,0,0,"ng-template",36),d.bc()),2&t){d.uc(2);const t=d.Rc(42);d.Ib(1),d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,Ms))}}function $s(t,e){if(1&t&&(d.cc(0,"div",24),d.bd(1,Ds,8,18,"cu-project-menu",25),d.vc(2,"async"),d.cc(3,"div",26),d.cc(4,"cu-project-menu",27),d.vc(5,"async"),d.cc(6,"div",28),d.bd(7,Is,1,0,"span",29),d.vc(8,"async"),d.cc(9,"div",30),d.cc(10,"div",31),d.dd(11),d.vc(12,"async"),d.bc(),d.bc(),d.bc(),d.bc(),d.bd(13,Os,2,3,"div",32),d.vc(14,"async"),d.bc(),d.bc()),2&t){const t=d.uc();let e=null,i=null,n=null,o=null;d.Ib(1),d.Dc("ngIf",(null==(e=d.wc(2,5,t.user$))?null:e.dashboard)===t.LayoutVersion.Six),d.Ib(3),d.Dc("project",d.wc(5,7,t.currentProject$)),d.Ib(3),d.Dc("ngIf",(null==(i=d.wc(8,9,t.user$))?null:i.dashboard)!==t.LayoutVersion.Six),d.Ib(4),d.fd(" ",null==(n=d.wc(12,11,t.currentProject$))?null:n.name," "),d.Ib(2),d.Dc("ngIf",(null==(o=d.wc(14,13,t.user$))?null:o.dashboard)===t.LayoutVersion.Six&&(null==t.project||null==t.project.permissions?null:t.project.permissions.can_add_automation)&&!t.isGuestTeam)}}function js(t,e){1&t&&d.Xb(0,"div",41)}function Ls(t,e){1&t&&d.Xb(0,"span",42)}function Es(t,e){}function Ns(t,e){if(1&t&&d.bd(0,Es,0,0,"ng-template",36),2&t){d.uc(3);const t=d.Rc(42);d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,Ms))}}function As(t,e){if(1&t&&(d.cc(0,"div",44),d.gc(1,45),d.bc()),2&t){const t=d.uc(3);d.Ib(1),d.kc(null==t.category||null==t.category.subcategories?null:t.category.subcategories.length)(null==t.category||null==t.category.subcategories?null:t.category.subcategories.length),d.hc(1)}}function Vs(t,e){if(1&t&&(d.cc(0,"div",35),d.bd(1,Ns,1,3,void 0,18),d.bd(2,As,2,2,"div",43),d.bc()),2&t){const t=d.uc(2);d.Ib(1),d.Dc("ngIf",(null==t.project||null==t.project.permissions?null:t.project.permissions.can_add_automation)&&!t.isGuestTeam),d.Ib(1),d.Dc("ngIf",null==t.category||null==t.category.subcategories?null:t.category.subcategories.length)}}function zs(t,e){if(1&t){const t=d.dc();d.cc(0,"div",24),d.bd(1,js,1,0,"div",37),d.vc(2,"async"),d.cc(3,"div",26),d.cc(4,"cu-category-menu",38),d.qc("create",function(){return d.Uc(t),d.uc().createSubcategory()})("rename",function(){return d.Uc(t),d.uc().renameCategory=!0})("onNewSprint",function(e){return d.Uc(t),d.uc().newSprint(e)}),d.cc(5,"div",28),d.bd(6,Ls,1,0,"span",39),d.vc(7,"async"),d.cc(8,"cu-editable",40),d.qc("onCancel",function(){return d.Uc(t),d.uc().renameCategory=!1})("onChange",function(e){return d.Uc(t),d.uc().saveRenameCategory(e)}),d.cc(9,"div",31),d.dd(10),d.bc(),d.bc(),d.bc(),d.bc(),d.bd(11,Vs,3,2,"div",32),d.vc(12,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null;d.Ib(1),d.Dc("ngIf",(null==(e=d.wc(2,9,t.user$))?null:e.dashboard)===t.LayoutVersion.Six),d.Ib(3),d.Dc("category",t.category)("projectId",null==t.project?null:t.project.id)("showSprints",null==t.project||null==t.project.features||null==t.project.features.sprints?null:t.project.features.sprints.enabled),d.Ib(2),d.Dc("ngIf",(null==(i=d.wc(7,11,t.user$))?null:i.dashboard)!==t.LayoutVersion.Six),d.Ib(2),d.Dc("text",null==t.category?null:t.category.name)("editing",t.renameCategory),d.Ib(2),d.fd(" ",null==t.category?null:t.category.name," "),d.Ib(1),d.Dc("ngIf",(null==(n=d.wc(12,13,t.user$))?null:n.dashboard)===t.LayoutVersion.Six)}}function Fs(t,e){1&t&&d.Xb(0,"div",59)}const Bs=function(t){return{color:t}},Rs=function(t){return{"cu-views-bar-title__avatar_list_empty":t}};function Us(t,e){if(1&t){const t=d.dc();d.cc(0,"div",57),d.qc("click",function(){return d.Uc(t),d.uc(2).openColorPicker()}),d.vc(1,"uppercase"),d.vc(2,"uppercase"),d.vc(3,"uppercase"),d.bd(4,Fs,1,0,"div",58),d.bc()}if(2&t){const t=d.uc(2);d.Dc("ngStyle",d.Hc(10,Bs,null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.color))("ngClass",d.Hc(12,Rs,!(null!=t.subcategory&&null!=t.subcategory.status&&t.subcategory.status.color)||"#fff"===(null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.color)||"#ffffff"===(null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.color)))("cuTooltip",d.wc(1,4,null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.status)===d.wc(2,6,null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.color)?t.listColorText:d.wc(3,8,null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.status)),d.Ib(4),d.Dc("ngIf",!(null!=t.subcategory&&null!=t.subcategory.status&&t.subcategory.status.color)||"#fff"===(null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.color)||"#ffffff"===(null==t.subcategory||null==t.subcategory.status?null:t.subcategory.status.color))}}function Gs(t,e){1&t&&(d.ac(0),d.cc(1,"div",63),d.ac(2),d.gc(3,64),d.Zb(),d.Xb(4,"div",65),d.bc(),d.Zb())}function Hs(t,e){1&t&&(d.cc(0,"div",66),d.Xb(1,"div",67),d.bc())}function Ws(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-sprint-details-menu",60),d.qc("onAction",function(e){return d.Uc(t),d.uc(2).sprintMenuActions(e)}),d.vc(1,"async"),d.bd(2,Gs,5,0,"ng-container",61),d.vc(3,"async"),d.bd(4,Hs,2,0,"ng-template",null,62,d.cd),d.bc()}if(2&t){const t=d.Rc(5),e=d.uc(2);let i=null;d.Dc("status",null==e.subcategory?null:e.subcategory.sprint_status)("subcategory",e.subcategory)("sprintSettings",d.wc(1,5,e.sprintSettings$)),d.Ib(2),d.Dc("ngIf",(null==(i=d.wc(3,7,e.user$))?null:i.dashboard)!==e.LayoutVersion.Six)("ngIfElse",t)}}function qs(t,e){if(1&t&&(d.cc(0,"div",74),d.Xb(1,"div",75),d.Xb(2,"cu-datetime",76),d.bc()),2&t){const t=d.uc(3);d.Ib(2),d.Dc("date",null==t.subcategory?null:t.subcategory.due_date)("showTime",!1)("noRelational",!0)}}function Xs(t,e){if(1&t&&(d.cc(0,"div",77),d.Xb(1,"div",78),d.dd(2),d.bc()),2&t){const t=d.uc(3);d.Ib(2),d.fd(" ",null==t.subcategory?null:t.subcategory.comment_count," ")}}function Ys(t,e){if(1&t&&d.Xb(0,"cu-avatar",79),2&t){const t=d.uc(3);d.Dc("user",null==t.subcategory?null:t.subcategory.assignee)("modifier","cu-avatar_14")}}function Ks(t,e){if(1&t&&d.Xb(0,"div",80),2&t){const t=d.uc(3);d.Dc("icon","small"==(null==t.subcategory?null:t.subcategory.content_size)?"text-s":"medium"==(null==t.subcategory?null:t.subcategory.content_size)?"text-m":"long"==(null==t.subcategory?null:t.subcategory.content_size)?"text-l":null)}}function Zs(t,e){}function Js(t,e){if(1&t&&d.bd(0,Zs,0,0,"ng-template",36),2&t){d.uc(3);const t=d.Rc(42);d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,Ms))}}function Qs(t,e){1&t&&(d.cc(0,"div",81),d.gc(1,82),d.bc())}function tc(t,e){if(1&t){const t=d.dc();d.cc(0,"div",68),d.qc("click",function(){return d.Uc(t),d.uc(2).openSubcategoryDetails()}),d.bd(1,qs,3,3,"div",69),d.bd(2,Xs,3,1,"div",70),d.bd(3,Ys,1,2,"cu-avatar",71),d.bd(4,Ks,1,1,"div",72),d.bd(5,Js,1,3,void 0,18),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.bd(9,Qs,2,0,"div",73),d.bc()}if(2&t){const t=d.uc(2);d.Ib(1),d.Dc("ngIf",null==t.subcategory?null:t.subcategory.due_date),d.Ib(1),d.Dc("ngIf",(null==t.subcategory?null:t.subcategory.comment_count)>0),d.Ib(1),d.Dc("ngIf",null==t.subcategory?null:t.subcategory.assignee),d.Ib(1),d.Dc("ngIf",(null==t.subcategory?null:t.subcategory.content_size)&&"none"!=(null==t.subcategory?null:t.subcategory.content_size)),d.Ib(1),d.Dc("ngIf",(d.wc(6,6,t.subcategory$)||d.wc(7,8,t.category$)||d.wc(8,10,t.currentProject$))&&(null==t.project||null==t.project.permissions?null:t.project.permissions.can_add_automation)&&!t.isGuestTeam),d.Ib(4),d.Dc("ngIf",!(null!=t.subcategory&&t.subcategory.due_date||(null==t.subcategory?null:t.subcategory.comment_count)>0||null!=t.subcategory&&t.subcategory.assignee||null!=t.subcategory&&t.subcategory.content_size&&"none"!=(null==t.subcategory?null:t.subcategory.content_size)))}}function ec(t,e){}function ic(t,e){if(1&t&&(d.ac(0),d.bd(1,ec,0,0,"ng-template",83),d.Zb()),2&t){d.uc(2);const t=d.Rc(34);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}function nc(t,e){if(1&t){const t=d.dc();d.cc(0,"div",86),d.qc("click",function(){return d.Uc(t),d.uc(3).openSubcategoryDetails()}),d.Xb(1,"div",87),d.bc()}}function oc(t,e){if(1&t){const t=d.dc();d.cc(0,"div",88),d.qc("click",function(){return d.Uc(t),d.uc(3).closeSubcategoryDetails()}),d.Xb(1,"div",87),d.bc()}}function ac(t,e){if(1&t&&(d.ac(0),d.bd(1,nc,2,0,"div",84),d.vc(2,"async"),d.bd(3,oc,2,0,"ng-template",null,85,d.cd),d.Zb()),2&t){const t=d.Rc(4),e=d.uc(2);d.Ib(1),d.Dc("ngIf",!d.wc(2,2,e.isListDetailsSidebarOpen$))("ngIfElse",t)}}function rc(t,e){}function sc(t,e){if(1&t&&(d.ac(0),d.bd(1,rc,0,0,"ng-template",83),d.Zb()),2&t){d.uc(2);const t=d.Rc(34);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}function cc(t,e){if(1&t){const t=d.dc();d.cc(0,"div",24),d.bd(1,Us,5,14,"div",46),d.vc(2,"async"),d.cc(3,"div",47),d.cc(4,"div",48),d.bd(5,Ws,6,9,"cu-sprint-details-menu",49),d.cc(6,"div",50),d.cc(7,"cu2-list-details-menu",51),d.qc("renameStart",function(){return d.Uc(t),d.uc().renameSubcategory=!0})("createSubcategory",function(){return d.Uc(t),d.uc().createSubcategory()}),d.cc(8,"div",52),d.cc(9,"div",53),d.cc(10,"cu-editable",54),d.qc("onCancel",function(){return d.Uc(t),d.uc().renameSubcategory=!1})("onChange",function(e){return d.Uc(t),d.uc().saveRenameSubcategory(e)}),d.dd(11),d.bc(),d.bc(),d.Xb(12,"div",55),d.bc(),d.bc(),d.bd(13,tc,10,12,"div",56),d.vc(14,"async"),d.bd(15,ic,2,1,"ng-container",18),d.vc(16,"async"),d.bc(),d.bc(),d.bd(17,ac,5,4,"ng-container",18),d.vc(18,"async"),d.bd(19,sc,2,1,"ng-container",18),d.vc(20,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null,o=null,a=null;d.Ib(1),d.Dc("ngIf",(null==(e=d.wc(2,15,t.user$))?null:e.dashboard)===t.LayoutVersion.Six&&!(null!=t.subcategory&&t.subcategory.sprint||(null==t.subcategory||null==t.subcategory.status||!t.subcategory.status.color)&&(null==t.subcategory||null==t.subcategory.permissions||!t.subcategory.permissions.edit_list_details)&&(void 0!==(null==t.subcategory||null==t.subcategory.permissions?null:t.subcategory.permissions.edit_list_details)||null==t.userRoleDefaultPermissions[null==t.subcategory||null==t.subcategory.permissions?null:t.subcategory.permissions.team_role]||!t.userRoleDefaultPermissions[null==t.subcategory||null==t.subcategory.permissions?null:t.subcategory.permissions.team_role].edit_list_details)||null!=t.subcategory&&t.subcategory.archived)),d.Ib(3),d.Ob("cu-views-bar-title__list-body_sprint",null==t.subcategory?null:t.subcategory.sprint),d.Ib(1),d.Dc("ngIf",null==t.subcategory?null:t.subcategory.sprint),d.Ib(2),d.Dc("dirtySubcategory",t.subcategory)("isSprint",null==t.subcategory?null:t.subcategory.sprint)("showSprints",null==t.project||null==t.project.features||null==t.project.features.sprints?null:t.project.features.sprints.enabled),d.Ib(3),d.Dc("text",null==t.subcategory?null:t.subcategory.name)("editing",t.renameSubcategory)("inputModifier","cu-editable__input_without-background"),d.Ib(1),d.fd(" ",null==t.subcategory?null:t.subcategory.name," "),d.Ib(2),d.Dc("ngIf",!(null!=t.subcategory&&t.subcategory.sprint)&&(null==(i=d.wc(14,17,t.user$))?null:i.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==t.subcategory?null:t.subcategory.sprint)&&(null==(n=d.wc(16,19,t.user$))?null:n.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==(o=d.wc(18,21,t.user$))?null:o.dashboard)!==t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==t.subcategory?null:t.subcategory.sprint)&&(null==(a=d.wc(20,23,t.user$))?null:a.dashboard)!==t.LayoutVersion.Six)}}function lc(t,e){if(1&t&&d.Xb(0,"div",98),2&t){const t=d.uc(3);d.ad("width",+(null==t.subcategory?null:t.subcategory.closedtaskcount)/(+(null==t.subcategory?null:t.subcategory.taskcount)+ +(null==t.subcategory?null:t.subcategory.closedtaskcount))*100,"%")}}function uc(t,e){1&t&&d.Xb(0,"div",99)}function dc(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-sprint-details-menu",94),d.qc("onAction",function(e){return d.Uc(t),d.uc(2).sprintMenuActions(e)}),d.vc(1,"async"),d.cc(2,"div",95),d.bd(3,lc,1,2,"div",96),d.bd(4,uc,1,0,"div",97),d.vc(5,"async"),d.dd(6),d.bc(),d.bc()}if(2&t){const t=d.uc(2);let e=null;d.Dc("status",null==t.subcategory?null:t.subcategory.sprint_status)("subcategory",t.subcategory)("sprintSettings",d.wc(1,12,t.sprintSettings$))("hideSettingsOption",!0),d.Ib(2),d.Ob("cu-views-bar-title__sprint-item_sprint-done",t.sprintStatus===t.SprintStatus.DONE)("cu-views-bar-title__sprint-item_sprint-in-progress",t.sprintStatus===t.SprintStatus.IN_PROGRESS),d.Dc("cuTooltip",t.sprintStatus===t.SprintStatus.IN_PROGRESS&&t.sprintTooltip?t.sprintTooltip:null),d.Ib(1),d.Dc("ngIf",t.sprintStatus===t.SprintStatus.IN_PROGRESS),d.Ib(1),d.Dc("ngIf",(null==(e=d.wc(5,14,t.user$))?null:e.dashboard)!==t.LayoutVersion.Six&&(t.sprintStatus===t.SprintStatus.DONE||t.sprintStatus===t.SprintStatus.IN_PROGRESS)),d.Ib(2),d.fd(" ",t.sprintStatus," ")}}function hc(t,e){1&t&&d.Xb(0,"div",75)}function pc(t,e){if(1&t&&(d.cc(0,"div",91),d.dd(1),d.bc()),2&t){const t=e.ngIf;d.Ib(1),d.fd(" ",t," ")}}function fc(t,e){}function gc(t,e){if(1&t&&d.bd(0,fc,0,0,"ng-template",36),2&t){d.uc(2);const t=d.Rc(42);d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,Ms))}}function mc(t,e){if(1&t&&(d.cc(0,"div",89),d.bd(1,dc,7,16,"cu-sprint-details-menu",90),d.cc(2,"div",91),d.bd(3,hc,1,0,"div",92),d.vc(4,"async"),d.dd(5),d.vc(6,"async"),d.vc(7,"async"),d.bc(),d.bd(8,pc,2,1,"div",93),d.vc(9,"async"),d.bd(10,gc,1,3,void 0,18),d.vc(11,"async"),d.bc()),2&t){const t=d.uc();let e=null,i=null,n=null;d.Ib(1),d.Dc("ngIf",null==t.subcategory?null:t.subcategory.sprint),d.Ib(2),d.Dc("ngIf",(null==(e=d.wc(4,6,t.user$))?null:e.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.gd(" ",null==(i=d.wc(6,8,t.sprintDates$))?null:i.start," - ",null==(i=d.wc(7,10,t.sprintDates$))?null:i.end," "),d.Ib(3),d.Dc("ngIf",d.wc(9,12,t.sprintValue$)),d.Ib(2),d.Dc("ngIf",(null==(n=d.wc(11,14,t.user$))?null:n.dashboard)===t.LayoutVersion.Six&&(null==t.project||null==t.project.permissions?null:t.project.permissions.can_add_automation)&&!t.isGuestTeam)}}function vc(t,e){}const bc=function(){return{location:"list-view"}};function _c(t,e){if(1&t&&d.bd(0,vc,0,0,"ng-template",36),2&t){d.uc();const t=d.Rc(42);d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,bc))}}const wc=function(){return["bottom"]};function yc(t,e){if(1&t&&(d.Xb(0,"cu-automation-entity-count",100),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async")),2&t){const t=e.location,i=d.uc();let n=null,o=null;d.Dc("count",i.subcategory?null==i.subcategory?null:i.subcategory.automation_count:d.wc(1,5,i.category$)?d.wc(2,7,i.category$).automation_count:(null==(n=d.wc(3,9,i.currentProject$))?null:n.automation_count)||0)("parentId",null==(o=d.wc(4,11,i.parent$))?null:o.id)("parentType",i.subcategory?i.DataViewParentType.Subcategory:d.wc(5,13,i.category$)?i.DataViewParentType.Category:i.DataViewParentType.Project)("location",t)("tooltipPlacement",d.Gc(15,wc))}}let kc=(()=>{class t{constructor(t,e,i,n,o,a,r,s,c,l){this.listDetailsService=t,this.element=e,this.store=i,this.navService=n,this.timePipe=o,this.injector=a,this.modalService=r,this.dataService=s,this.resolver=c,this.commonStringsService=l,this.selectedView$=this.store.pipe(Object(K.select)(X.qb),Object(Vi.a)(t=>Boolean(t))),this.isListView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.List].includes(t.viewType))),this.DataViewParentType=$.e,this.subcategory$=new Co.a(null),this.currentProject$=this.store.select(z.getProject),this.category$=this.store.select(z.getCategory),this.team$=this.store.select(z.getTeam),this.user$=this.store.select(z.getUser),this.parent$=this.store.select(X.Hb),this.customFields$=this.store.pipe(Object(K.select)(wr.c),Object(Qt.a)(t=>(t||[]).filter(t=>Object(gr.d)(t,[])))),this.sprintSettings$=Object(ii.a)([this.currentProject$,this.category$,this.team$]).pipe(Object(Vi.a)(([t])=>t&&t.features&&t.features.sprints&&t.features.sprints.enabled),Object(Qt.a)(([t,e,i])=>e&&e.features&&e.features.sprints&&e.features.sprints.enabled&&e.features.sprints.settings&&Object(To.g)(e.features.sprints.settings.start_day)?e.features.sprints.settings:i&&i.sprint_settings&&Object(To.g)(i.sprint_settings.start_day)?i.sprint_settings:Rr.i)),this.sprintDates$=Object(ii.a)([this.sprintSettings$,this.subcategory$]).pipe(Object(Vi.a)(([t,e])=>!!e),Object(Qt.a)(([t,e])=>{if(!t||!e||!e.sprint)return null;const i=To.h[t.date_format||Rr.h].full;return{start:$r()(+e.sprint_start_date).format(i),end:$r()(+e.sprint_end_date).format(i)}})),this.sprintValue$=Object(ii.a)([this.sprintSettings$,this.customFields$,this.subcategory$]).pipe(Object(Vi.a)(([t,e,i])=>!!t&&!!i),Object(ee.a)(this.team$),Object(Qt.a)(([[t,e,i],n])=>{switch(t.estimation){case"points":return $localize`:@@cu-views-bar-title__sprint-value_points:Points: ${i.points||0}:pointValue:`;case"time_estimate":const o=i&&i.time_estimate?this.timePipe.transform(i.time_estimate,n.hours_per_day||Hr.a,!1,!0,!0):null;return $localize`:@@cu-views-bar-title__sprint-value_time:Time: ${o||"-"}`;default:const a=(e||[]).find(e=>e.id===t.estimation);return a?`${a.name}: ${i.sprint_estimation||"-"}`:i.sprint_estimation||"-"}})),this.isListDetailsSidebarOpen$=this.store.select(Ur.a),this.renameSubcategory=!1,this.renameCategory=!1,this.SprintStatus=xo.d,this.LayoutVersion=H.b,this.userRoleDefaultPermissions=ui.h,this.destroy$=new B.a,this.listColorText=$localize`:@@common_list-color:List color`}ngOnInit(){}ngOnChanges(t){t.subcategory&&(this.subcategory$.next(this.subcategory),this.subcategory&&(this.sprintTooltip=this.subcategory.closedtaskcount/(parseInt(this.subcategory.taskcount,10)+this.subcategory.closedtaskcount)*100,this.sprintTooltip=this.sprintTooltip?$localize`:@@cu-views-bar-title__tooltip-msg_sprint-progress:${this.sprintTooltip.toFixed(2).toString()}% completed`:""))}openSubcategoryDetails(){this.listDetailsService.openSidebar(this.subcategory.id)}closeSubcategoryDetails(){this.listDetailsService.closeSidebar()}createSubcategory(){this.category.hidden?this.navService.onCreateFolderlessListByModal.emit(this.project.id):this.navService.onRemoveLastSection.emit(this.category.id)}saveRenameSubcategory(t){t&&(this.store.dispatch(new Y.Fm(this.subcategory.id,this.subcategory.category,this.subcategory.project_id,{name:t})),this.subcategory=Object.assign(Object.assign({},this.subcategory),{name:t})),this.renameCategory=!1}saveRenameCategory(t){t&&(this.store.dispatch(new Y.lm(this.category.id,{name:t})),this.category=Object.assign(Object.assign({},this.category),{name:t})),this.renameCategory=!1}sprintMenuActions({type:t}){if("settings"===t){const t=this.modalService.openComponent(So.a,this.injector);t.instance.sprintSettingsType=xo.c.CATEGORY,t.instance.category$.next(this.category),this.dataService.getCategoryById(this.category.id).subscribe(e=>t.instance.category$.next(e))}else t!==xo.d.DONE&&t!==xo.d.IN_PROGRESS||(this.store.dispatch(new Y.Fm(this.subcategory.id,this.category.id,this.project.id,{sprint_status:t})),this.store.dispatch(Object(Gr.B)({category:Object.assign(Object.assign({},this.category),{subcategories:this.category.subcategories.map(e=>e.id===this.subcategory.id?Object.assign(Object.assign({},e),{sprint_status:t}):e)})})))}newSprint(t){const e=this.modalService.openComponent(ko.a,this.injector,{title:this.commonStringsService.createSprintsText,modifier:"cu-sprints-settings__modal"});e.instance.forCreate=!0,e.instance.categoryId=this.category.id,e.instance.projectId=this.category.project_id,t&&t.numSprints&&(e.instance.numSprints=t.numSprints),e.instance.onCreate.pipe(Object(A.a)(e.instance.destroy$)).subscribe(({sprints:t})=>{this.store.dispatch(new Y.Si(Object.assign(Object.assign({},this.category),{subcategories:[...this.category.subcategories,...t]}))),this.store.dispatch(new Y.Nb({categoryId:this.category.id,data:{subcategories:t}}))})}openColorPicker(){if(this.subcategory.permissions.edit_list_details){if(!this.colorPickerDropdown){const t=this.resolver.resolveComponentFactory(Wr.a);this.colorPickerDropdown=this.colorPickerContainer.createComponent(t),this.colorPickerDropdown.instance.onSelect.pipe(Object(A.a)(this.destroy$)).subscribe(t=>{this.subcategory.status=t||null,this.navService.updateSectionStatus(this.subcategory)})}this.colorPickerDropdown.instance.selectedColor=Object(E.jb)(this.subcategory),this.colorPickerDropdown.instance.markForCheck(),setTimeout(()=>this.colorPickerDropdown.instance.open())}}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Oo.a),d.Wb(d.m),d.Wb(K.Store),d.Wb(po.a),d.Wb(y.a),d.Wb(d.t),d.Wb(Z.a),d.Wb(ho.a),d.Wb(d.j),d.Wb(J.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-views-bar-title"]],viewQuery:function(t,e){if(1&t&&d.jd(as,3,d.U),2&t){let t;d.Qc(t=d.rc())&&(e.colorPickerContainer=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&d.Ob("cu-views-bar-title",!0)},inputs:{isSharedSpace:"isSharedSpace",isSharedTasks:"isSharedTasks",isGuestTeam:"isGuestTeam",hideBacklink:"hideBacklink",sprintStatus:"sprintStatus",project:"project",category:"category",subcategory:"subcategory"},features:[d.Gb],decls:43,vars:14,consts:function(){let t,e,i,n,o,a,r,s,c,l;return t=$localize`:@@common_tasks-shared-with-me␟d809729fd2daeb8c201bcc479ae8b54415a03f6d␟1462773331683183582:Tasks shared with me`,e=$localize`:@@cu-views-bar-title__all-tasks␟7dcd9b778c5c12e38adf2870c62c38764646f733␟4357924051773886388:All Tasks`,i=$localize`:@@cu-views-bar-title__all-tasks-shared-with-me␟dd4cd97cdb12ba01e692d83857159506c50f1020␟7711625551534510481:All Tasks shared with me`,n=$localize`:@@common_everything␟faa270eed7e5c6e0f37827211ef6c4808ed0032f␟7689081267731130533:Everything`,o=$localize`:␟d5e5af31c5cbd310a13a82167cee837541c763fb␟3712094775430130947:{VAR_PLURAL, plural, =1 {List} other {Lists}}`,o=d.lc(o,{VAR_PLURAL:"\ufffd1\ufffd"}),a=$localize`:@@cu-views-bar-title__list-count␟53a6a64b77b870c1539eac2965a6600fb871df0d␟5926360729755194522: ${"\ufffd0\ufffd"}:INTERPOLATION: ${o}:ICU: `,r=$localize`:@@common_sprint␟64928df180b59faa812f353df25db41a8a63e891␟8508552938611649591:Sprint`,s=$localize`:@@cu-views-bar-title__add-details␟d8ac54a40b4acb36a2c0f4a435a568cedeccada5␟8483194842497435249: Add details `,c=$localize`:@@common_list-info␟cc1863472a1764a26781494915db6942e737451f␟5013392370184018583:List Info`,l=$localize`:@@common_list-info␟cc1863472a1764a26781494915db6942e737451f␟5013392370184018583:List Info`,[["colorPickerContainer1",""],[4,"ngIf","ngIfThen","ngIfElse"],["title1",""],["title2",""],["title3",""],["title3_1",""],["title3_2",""],["title4",""],["title5",""],["showBacklink",""],["titleSharedWithMe",""],["titleAllTasks",""],["titleAllTasksSahred",""],["titleAllSpaces",""],["titleAllProjects",""],["titleCategory",""],["titleSubcategory",""],["titleSubcategorySprint",""],[4,"ngIf"],["automationEntityCount",""],t,e,i,n,[1,"cu-views-bar-title__container"],[3,"project",4,"ngIf"],[1,"cu-views-bar-title__container-inner"],[3,"project"],[1,"cu-views-bar-title__label"],["class","cu-views-bar-title__icon cu-views-bar-title__icon_space","icon","cu2-space",4,"ngIf"],[1,"cu-views-bar-title__label-inner"],[1,"cu-views-bar-title__label-text"],["class","cu-views-bar-title__list-details cu-views-bar-title__list-details_unclickable",4,"ngIf"],[1,"cu-project-avatar_32",3,"name","image","color","iconSource","iconName"],["icon","cu2-space",1,"cu-views-bar-title__icon","cu-views-bar-title__icon_space"],[1,"cu-views-bar-title__list-details","cu-views-bar-title__list-details_unclickable"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cu-views-bar-title__avatar cu-views-bar-title__avatar_folder","icon","cu3-folder-sidebar",4,"ngIf"],[3,"category","projectId","showSprints","create","rename","onNewSprint"],["class","cu-views-bar-title__icon cu-views-bar-title__icon_folder","icon","cu2-folder-sidebar",4,"ngIf"],[1,"cu-views-bar-title__label-inner",3,"text","editing","onCancel","onChange"],["icon","cu3-folder-sidebar",1,"cu-views-bar-title__avatar","cu-views-bar-title__avatar_folder"],["icon","cu2-folder-sidebar",1,"cu-views-bar-title__icon","cu-views-bar-title__icon_folder"],["class","cu-views-bar-title__list-details-text",4,"ngIf"],[1,"cu-views-bar-title__list-details-text"],a,["class","cu-views-bar-title__avatar cu-views-bar-title__avatar_list","tooltipDelay","200",3,"ngStyle","ngClass","cuTooltip","click",4,"ngIf"],[1,"cu-views-bar-title__list"],[1,"cu-views-bar-title__list-body"],[3,"status","subcategory","sprintSettings","onAction",4,"ngIf"],[1,"cu-views-bar-title__list-body-container"],[3,"dirtySubcategory","isSprint","showSprints","renameStart","createSubcategory"],[1,"cu-views-bar-title__list-btn"],[1,"cu-views-bar-title__list-btn-label"],[3,"text","editing","inputModifier","onCancel","onChange"],["icon","cu2-caret-down",1,"cu-views-bar-title__list-btn-caret"],["class","cu-views-bar-title__list-details",3,"click",4,"ngIf"],["tooltipDelay","200",1,"cu-views-bar-title__avatar","cu-views-bar-title__avatar_list",3,"ngStyle","ngClass","cuTooltip","click"],["icon","cu3-list-no-color","class","cu-views-bar-title__avatar-icon",4,"ngIf"],["icon","cu3-list-no-color",1,"cu-views-bar-title__avatar-icon"],[3,"status","subcategory","sprintSettings","onAction"],[4,"ngIf","ngIfElse"],["sprintDetailsMenuV6",""],[1,"cu-views-bar-title__sprint-details"],r,["icon","ellipsis",1,"cu-data-view-item__settings"],[1,"cu-views-bar-title__sprint-details-menu"],["icon","sprint",1,"cu-views-bar-title__sprint-details-menu-icon"],[1,"cu-views-bar-title__list-details",3,"click"],["class","cu-views-bar-title__list-details-due-date",4,"ngIf"],["class","cu-views-bar-title__list-details-comments",4,"ngIf"],[3,"user","modifier",4,"ngIf"],["class","cu-views-bar-title__list-details-content",3,"icon",4,"ngIf"],["class","cu-views-bar-title__list-details-link",3,"cuPreventDefault",4,"ngIf"],[1,"cu-views-bar-title__list-details-due-date"],["icon","cu3-calend",1,"cu-views-bar-title__list-details-due-date-icon"],[3,"date","showTime","noRelational"],[1,"cu-views-bar-title__list-details-comments"],["icon","cu3-comment",1,"cu-views-bar-title__list-details-comments-icon"],[3,"user","modifier"],[1,"cu-views-bar-title__list-details-content",3,"icon"],[1,"cu-views-bar-title__list-details-link",3,"cuPreventDefault"],s,[3,"ngTemplateOutlet"],["class","cu-views-bar-title__list-icon","cuTooltip",c,3,"click",4,"ngIf","ngIfElse"],["closeSubcategoryDetailsButton",""],["cuTooltip",c,1,"cu-views-bar-title__list-icon",3,"click"],["icon","info2"],["cuTooltip",l,1,"cu-views-bar-title__list-icon",3,"click"],[1,"cu-views-bar-title__sprint"],[3,"status","subcategory","sprintSettings","hideSettingsOption","onAction",4,"ngIf"],[1,"cu-views-bar-title__sprint-item"],["class","cu-views-bar-title__list-details-due-date-icon","icon","cu3-calend",4,"ngIf"],["class","cu-views-bar-title__sprint-item",4,"ngIf"],[3,"status","subcategory","sprintSettings","hideSettingsOption","onAction"],[1,"cu-views-bar-title__sprint-item",3,"cuTooltip"],["class","cu-views-bar-title__sprint-item-progress",3,"width",4,"ngIf"],["class","cu-views-bar-title__sprint-item-icon","icon","sprint",4,"ngIf"],[1,"cu-views-bar-title__sprint-item-progress"],["icon","sprint",1,"cu-views-bar-title__sprint-item-icon"],[3,"cuPreventDefault","count","parentId","parentType","location","tooltipPlacement"]]},template:function(t,e){if(1&t&&(d.bd(0,rs,0,0,"ng-template",null,0,d.cd),d.bd(2,ss,1,0,"ng-container",1),d.bd(3,ls,1,3,"ng-template",null,2,d.cd),d.bd(5,ds,1,3,"ng-template",null,3,d.cd),d.bd(7,ps,1,3,"ng-template",null,4,d.cd),d.bd(9,gs,1,3,"ng-template",null,5,d.cd),d.bd(11,vs,1,3,"ng-template",null,6,d.cd),d.bd(13,_s,1,3,"ng-template",null,7,d.cd),d.bd(15,ys,1,3,"ng-template",null,8,d.cd),d.bd(17,ks,0,0,"ng-template",null,9,d.cd),d.bd(19,xs,2,0,"ng-template",null,10,d.cd),d.bd(21,Ss,2,0,"ng-template",null,11,d.cd),d.bd(23,Ts,2,0,"ng-template",null,12,d.cd),d.bd(25,Cs,2,0,"ng-template",null,13,d.cd),d.bd(27,$s,15,15,"ng-template",null,14,d.cd),d.bd(29,zs,13,15,"ng-template",null,15,d.cd),d.bd(31,cc,21,25,"ng-template",null,16,d.cd),d.bd(33,mc,12,16,"ng-template",null,17,d.cd),d.bd(35,_c,1,3,void 0,18),d.vc(36,"async"),d.vc(37,"async"),d.vc(38,"async"),d.vc(39,"async"),d.vc(40,"async"),d.bd(41,yc,6,16,"ng-template",null,19,d.cd)),2&t){const t=d.Rc(4),i=d.Rc(18);let n=null;d.Ib(2),d.Dc("ngIf",!e.hideBacklink)("ngIfThen",i)("ngIfElse",t),d.Ib(33),d.Dc("ngIf",(null==(n=d.wc(36,4,e.user$))?null:n.dashboard)!==e.LayoutVersion.Six&&d.wc(37,6,e.isListView$)&&(d.wc(38,8,e.subcategory$)||d.wc(39,10,e.category$)||d.wc(40,12,e.currentProject$))&&(null==e.project||null==e.project.permissions?null:e.project.permissions.can_add_automation)&&!e.isGuestTeam)}},directives:[n.q,jo.a,qr.a,nt.a,n.x,Xr.a,re.a,Yr.a,n.t,n.o,ot.a,ts,es.a,is.a,ns.a,os.a],pipes:[n.b,n.B],styles:['.cu-views-bar-title{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:1.2;display:flex;align-items:center;max-width:350px;margin-right:10px;flex-shrink:0;margin-top:8px;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-views-bar-title{font-family:var(--global-font-support)}}.dark-theme .cu-views-bar-title{color:#d5d6d7}.layout-size_compact .cu-views-bar-title{font-size:16px}.layout-size_default .cu-views-bar-title{font-size:17px}.layout-size_large .cu-views-bar-title{font-size:18px}.cu2-views-bar_v6 .cu-views-bar-title{margin-top:0;margin-right:5px;font-size:16px}.layout-size_compact .cu2-views-bar_v6 .cu-views-bar-title,.layout-size_default .cu2-views-bar_v6 .cu-views-bar-title,.layout-size_large .cu2-views-bar_v6 .cu-views-bar-title{font-size:16px}.cu-views-bar-title__sprint{display:flex;align-items:center;max-width:200px;overflow-x:auto}.cu-views-bar-title__sprint-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;display:flex;align-items:center;justify-content:center;padding:4px 8px;border:1px solid rgba(185,190,199,.5);border-radius:3px;margin-left:8px;position:relative;text-transform:capitalize}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-views-bar-title__sprint-item{font-family:var(--global-font-support)}}.cu2-views-bar_v6 .cu-views-bar-title__sprint-item{padding:0;margin-left:6px;border:0;font-weight:400;border-radius:8px;height:15px}.cu-views-bar-title__sprint-item-progress{position:absolute;left:0;top:0;background:rgba(44,171,243,.2);height:100%}.cu-views-bar-title__sprint-item-icon{width:12px;height:8px;margin-right:3px;position:relative;top:1px}.cu-views-bar-title__sprint-item_sprint-done{color:#67cb48;border-color:#67cb48}.cu-views-bar-title__sprint-item_sprint-done .icon{fill:#67cb48}.cu2-views-bar_v6 .cu-views-bar-title__sprint-item_sprint-done{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:auto;padding:0 7px;border:1px solid}.cu-views-bar-title__sprint-item_sprint-in-progress{color:#4194f6;border-color:#4194f6}.cu-views-bar-title__sprint-item_sprint-in-progress .icon{fill:#4194f6}.cu2-views-bar_v6 .cu-views-bar-title__sprint-item_sprint-in-progress{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:auto;padding:0 8px;border:1px solid #2cabf3;color:#2cabf3}.cu-views-bar-title__sprint-details{display:flex;align-items:center;font-size:12px;position:absolute;left:0;top:-18px}.cu-views-bar-title__sprint-details-menu{display:flex;justify-content:center;align-items:center;flex-direction:column;width:32px;height:32px;margin-right:3px;border-radius:5px;background:#e9ebf0}.dark-theme .cu-views-bar-title__sprint-details-menu{background:#1e272e}.cu-views-bar-title .cu-dropdown_open .cu-views-bar-title__sprint-details-menu .cu-views-bar-title__sprint-details-menu-icon,.cu-views-bar-title__sprint-details-menu:hover .cu-views-bar-title__sprint-details-menu-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-views-bar-title .cu-dropdown_open .cu-views-bar-title__sprint-details-menu .cu-views-bar-title__sprint-details-menu-icon,.cu-views-bar-title__sprint-details-menu:hover .cu-views-bar-title__sprint-details-menu-icon{fill:var(--theme-main-color)}}.cu-views-bar-title__sprint-details-menu-icon{width:17px;height:15px;fill:#7c828d}.dark-theme .cu-views-bar-title__sprint-details-menu-icon{fill:#b9bec7}.cu2-views-bar_v6 .cu-views-bar-title__sprint>*+*{display:flex;align-items:center;position:relative;margin-left:13px}.cu2-views-bar_v6 .cu-views-bar-title__sprint>*+:before{content:"";display:block;position:absolute;width:3px;height:3px;left:-8px;border-radius:50%;background:#cdd2d9}.dark-theme .cu2-views-bar_v6 .cu-views-bar-title__sprint>*+:before{background:#384047}.cu-views-bar-title__label{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;line-height:1;padding:4px 4px 3px;border-radius:3px;cursor:pointer;max-width:100%}.cu2-views-bar_v6 .cu-views-bar-title__label{display:inline-flex;padding:3px 4px 2px;margin-bottom:-1px}.cu-views-bar-title__label:hover{background-color:#f2f2f2}.dark-theme .cu-views-bar-title__label:hover{background-color:#1e272e}.cu-views-bar-title__label-text,.cu-views-bar-title__label .cu-editable{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:16px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-views-bar-title__label-text,.cu-views-bar-title__label .cu-editable{font-family:var(--global-font-support)}}.dark-theme .cu-views-bar-title__label-text,.dark-theme .cu-views-bar-title__label .cu-editable{color:#d5d6d7}.layout-size_compact .cu-views-bar-title__label-text,.layout-size_compact .cu-views-bar-title__label .cu-editable{font-size:16px}.layout-size_default .cu-views-bar-title__label-text,.layout-size_default .cu-views-bar-title__label .cu-editable{font-size:17px}.layout-size_large .cu-views-bar-title__label-text,.layout-size_large .cu-views-bar-title__label .cu-editable{font-size:18px}.cu2-views-bar_v6 .cu-views-bar-title__label-text,.cu2-views-bar_v6 .cu-views-bar-title__label .cu-editable,.layout-size_compact .cu2-views-bar_v6 .cu-views-bar-title__label-text,.layout-size_compact .cu2-views-bar_v6 .cu-views-bar-title__label .cu-editable,.layout-size_default .cu2-views-bar_v6 .cu-views-bar-title__label-text,.layout-size_default .cu2-views-bar_v6 .cu-views-bar-title__label .cu-editable,.layout-size_large .cu2-views-bar_v6 .cu-views-bar-title__label-text,.layout-size_large .cu2-views-bar_v6 .cu-views-bar-title__label .cu-editable{font-size:16px}.cu-views-bar-title__label .cu-project-avatar{margin-right:6px}.cu-views-bar-title__label-inner{min-width:0}.cu-views-bar-title__list{display:flex;align-items:center;min-width:0;position:relative}.cu-views-bar-title__list-body{min-width:0;display:flex;flex-direction:column}.cu-views-bar-title__list-body_sprint{flex-direction:row}.cu-views-bar-title__list-body-container{display:flex;flex-direction:column}.cu-views-bar-title__list-btn{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;border:none;min-width:0;border-radius:3px}.cu2-list-details-menu .cu-dropdown_open .cu-views-bar-title__list-btn,.cu-views-bar-title__list-btn:hover{background-color:#f2f2f2}.dark-theme .cu2-list-details-menu .cu-dropdown_open .cu-views-bar-title__list-btn,.dark-theme .cu-views-bar-title__list-btn:hover{background-color:#1e272e}.cu2-views-bar_v6 .cu-views-bar-title__list-btn{padding:3px 4px 2px;margin-bottom:-1px}.cu2-views-bar_v6 .cu-views-bar-title__list-body_sprint .cu-views-bar-title__list-btn{margin-top:-4px;margin-bottom:0}.cu-views-bar-title__list-btn-label{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#343434;padding:9px 5px 8px;border-radius:3px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-views-bar-title__list-btn-label{font-family:var(--global-font-support)}}.dark-theme .cu-views-bar-title__list-btn-label{color:#d5d6d7}.cu2-views-bar_v6 .cu-views-bar-title__list-btn-label{font-weight:500;font-size:15px;line-height:1.15;padding:0}.cu-views-bar-title__list-btn-label .cu-editable{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-views-bar-title__list-btn-label .cu-editable{font-family:var(--global-font-support)}}.dark-theme .cu-views-bar-title__list-btn-label .cu-editable{color:#d5d6d7}.cu2-views-bar_v6 .cu-views-bar-title__list-btn-label .cu-editable{font-weight:500;font-size:15px;line-height:1.15}.cu-views-bar-title__list-btn-caret{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:11px;height:11px;margin-left:2px;fill:#b9bec7}.dark-theme .cu-views-bar-title__list-btn-caret{fill:#828588}.cu2-list-details-menu .cu-dropdown_open .cu-views-bar-title__list-btn-caret{transform:rotate(180deg)}.cu-views-bar-title__list-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;stroke:#bcc0c7;width:22px;min-width:22px;height:30px;padding:9px 5px;border-radius:3px;cursor:pointer;position:relative;z-index:1}.cu-views-bar-title__list-icon:hover{fill:#7b68ee;background-color:#f2f2f2}@supports (--theme-main-color:#7b68ee){.cu-views-bar-title__list-icon:hover{fill:var(--theme-main-color)}}.dark-theme .cu-views-bar-title__list-icon:hover{background-color:#1e272e}.cu-views-bar-title__list-details{display:inline-flex;align-items:center;align-self:flex-start;padding:0 5px;height:20px;border-radius:3px;cursor:pointer}.cu-views-bar-title__list-details:not(.cu-views-bar-title__list-details_unclickable):hover{background-color:#f2f2f2}.dark-theme .cu-views-bar-title__list-details:not(.cu-views-bar-title__list-details_unclickable):hover{background-color:#1e272e}.cu-views-bar-title__list-details_unclickable{cursor:default}.cu-views-bar-title__list-details>:not(.cu-automation-entity-count):not(.cu-views-bar-title__list-details-add){pointer-events:none}.cu-views-bar-title__list-details>*{display:inline-flex;align-items:center}.cu-views-bar-title__list-details>*+*{position:relative;margin-left:13px}.cu-views-bar-title__list-details>*+:before{content:"";display:block;position:absolute;width:3px;height:3px;left:-8px;border-radius:50%;background:#cdd2d9}.dark-theme .cu-views-bar-title__list-details>*+:before{background:#384047}.cu-views-bar-title__list-details-due-date{display:flex;align-items:center}.cu-views-bar-title__list-details-due-date-icon{width:10px;height:9px;margin-right:4px;fill:#7c828d}.dark-theme .cu-views-bar-title__list-details-due-date-icon{fill:#828588}.cu-views-bar-title__list-details-comments{display:flex;align-items:center;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-views-bar-title__list-details-comments{color:#828588}.cu-views-bar-title__list-details-comments-icon{width:9px;height:9px;margin-right:2px;fill:#7c828d}.dark-theme .cu-views-bar-title__list-details-comments-icon{fill:#828588}.cu-views-bar-title__list-details-content{width:12px;height:12px;stroke:#7c828d}.dark-theme .cu-views-bar-title__list-details-content{stroke:#828588}.cu-views-bar-title__list-details-link,.cu-views-bar-title__list-details-text{font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-views-bar-title__list-details-link,.dark-theme .cu-views-bar-title__list-details-text{color:#828588}.cu-views-bar-title__list-details-link:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-views-bar-title__list-details-link:hover{color:var(--theme-main-color)}}.cu-views-bar-title__icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;stroke:#bcc0c7;display:inline-flex;margin-right:5px}.cu-views-bar-title__icon_folder{fill:transparent;stroke-width:2px;width:12px;height:11px}.layout-size_compact .cu-views-bar-title__icon_folder{width:12px;height:11px}.layout-size_default .cu-views-bar-title__icon_folder{width:13px;height:12px}.layout-size_large .cu-views-bar-title__icon_folder{width:14px;height:13px}.cu2-views-bar_v6 .cu-views-bar-title__icon_folder,.layout-size_compact .cu2-views-bar_v6 .cu-views-bar-title__icon_folder,.layout-size_default .cu2-views-bar_v6 .cu-views-bar-title__icon_folder,.layout-size_large .cu2-views-bar_v6 .cu-views-bar-title__icon_folder{width:12px;height:11px}.cu-views-bar-title__icon_space,.layout-size_compact .cu-views-bar-title__icon_space{width:15px;height:10px}.layout-size_default .cu-views-bar-title__icon_space{width:16px;height:11px}.layout-size_large .cu-views-bar-title__icon_space{width:17px;height:12px}.cu2-views-bar_v6 .cu-views-bar-title__icon_space,.layout-size_compact .cu2-views-bar_v6 .cu-views-bar-title__icon_space,.layout-size_default .cu2-views-bar_v6 .cu-views-bar-title__icon_space,.layout-size_large .cu2-views-bar_v6 .cu-views-bar-title__icon_space{width:15px;height:10px}.cu-views-bar-title_is-sprint{overflow:visible;max-width:none}.cu-views-bar-title_is-sprint .cu-views-bar-title__sprint{max-width:none;overflow-x:visible}.cu-views-bar-title_is-sprint .cu-views-bar-title__list-btn-label{padding:0}.cu-views-bar-title_is-sprint .cu-views-bar-title__list-btn-label:hover{background:transparent}.cu-views-bar-title__container{display:flex;align-items:center;min-width:0}.cu-views-bar-title__container .cu-project-avatar{margin-right:2px}.cu-views-bar-title__container .cu-views-bar-title__list-details{height:16px}.cu-views-bar-title__container-inner{min-width:0}.cu-views-bar-title__avatar{display:flex;align-items:center;justify-content:center;position:relative;width:32px;height:32px;margin-right:4px;flex-shrink:0}.cu-views-bar-title__avatar:before{content:"";display:block;position:absolute;border-radius:5px;width:100%;height:100%;top:0;left:0;opacity:.1;background:currentColor}.cu-views-bar-title__avatar_folder{padding:9px;fill:#7c828d}.cu-views-bar-title__avatar_list{cursor:pointer;padding:9px;fill:#7c828d}.cu-views-bar-title__avatar_list:after{content:"";display:block;position:absolute;width:14px;height:14px;border-radius:50%;border:2px solid}.cu-views-bar-title__avatar_list_empty:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-views-bar-title__avatar_list_empty:hover{fill:var(--theme-main-color)}}.cu-views-bar-title__avatar_list_empty:after{display:none}'],encapsulation:2,changeDetection:0}),t})();var xc=i("y5jv"),Sc=i("BR3F"),Tc=i("WluX"),Cc=i("rURA");function Dc(t,e){if(1&t){const t=d.dc();d.cc(0,"div",15),d.qc("click",function(){return d.Uc(t),d.uc().confirmShowPrivacy=!0}),d.gc(1,16),d.bc()}if(2&t){const t=d.uc();d.Ib(1),d.kc(null==t.confirmView?null:t.confirmView.canUnfreezeCount),d.hc(1)}}function Ic(t,e){1&t&&(d.cc(0,"div",17),d.gc(1,18),d.bc())}function Pc(t,e){if(1&t&&(d.ac(0),d.Xb(1,"cu-share-entity",19),d.Zb()),2&t){const t=d.uc();d.Ib(1),d.Dc("item",t.confirmView)("showSearch",!1)("showHeader",!1)}}let Mc=(()=>{class t{constructor(t,e){this.store=t,this.cdr=e,this.confirmFreezeView=new d.o,this.confirmNote="",this.confirmShowPrivacy=!1,this.DataViewVisibility=$.j,this.destroy$=new B.a,this.bulkLockViewPermissions=[{id:"all",title:$localize`:@@cu-lock-view-confirm__permission-item_all-can-unprotect:All members can unprotect`,checkType:"check",customPayload:{isSelected:t=>t.filter(t=>t.role!==H.f.GUEST).every(t=>t.permission_level===H.e.CREATE),select:t=>{this.store.dispatch(new Y.B(this.confirmView.id,t.filter(t=>t.role!==H.f.GUEST).map(t=>({change:{userId:t.user.id,permission:H.e.CREATE,role:t.role},member:t})).filter(t=>t.member.permission_level!==t.change.permission).map(t=>t.change)))}}},{id:"onlyAdmins",title:$localize`:@@permissions_unprotect-admin-only:Only admins can unprotect`,checkType:"check",customPayload:{isSelected:t=>{const e=[H.f.OWNER,H.f.ADMIN],i=t.filter(t=>e.includes(t.role)),n=t.filter(t=>t.role===H.f.USER);return i.every(t=>t.permission_level===H.e.CREATE)&&n.every(t=>t.permission_level!==H.e.CREATE)},select:t=>{this.store.dispatch(new Y.B(this.confirmView.id,t.filter(t=>t.role!==H.f.GUEST).map(t=>({change:{userId:t.user.id,permission:t.role===H.f.USER?H.e.READ:H.e.CREATE,role:t.role},member:t})).filter(t=>t.member.permission_level!==t.change.permission).map(t=>t.change)))}}},{id:"onlyMe",title:$localize`:@@cu-lock-view-confirm__permission-item_only-me-can-unprotect:Only I can unprotect`,checkType:"check",customPayload:{isSelected:(t,e)=>{const i=t.find(t=>t.user.id===e.id),n=t.filter(t=>t.user.id!==e.id);return(!i||i.permission_level===H.e.CREATE)&&n.every(t=>t.permission_level!==H.e.CREATE)},select:(t,e)=>{this.store.dispatch(new Y.B(this.confirmView.id,t.filter(t=>t.role!==H.f.GUEST).map(t=>({change:{userId:t.user.id,permission:t.user.id===e.id?H.e.CREATE:H.e.READ,role:t.role},member:t})).filter(t=>t.member.permission_level!==t.change.permission).map(t=>t.change)))}}}]}ngOnInit(){this.store.select(Object(X.j)(this.confirmView.id)).pipe(Object(ee.a)(this.store.select(z.getUser)),Object(A.a)(this.destroy$)).subscribe(([t,e])=>{this.bulkLockViewPermissions=this.bulkLockViewPermissions.map(i=>Object.assign(Object.assign({},i),{checked:i.customPayload.isSelected(t,e)})),this.selectedBulkItem=this.bulkLockViewPermissions.find(t=>t.checked),this.members=t,this.user=e,this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next()}emitConfirmFreezeView(){this.confirmFreezeView.emit({confirmNote:this.confirmNote})}bulkSelect(t){t.customPayload.select(this.members,this.user)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(K.Store),d.Wb(d.h))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-lock-view-confirm"]],inputs:{confirmView:"confirmView"},outputs:{confirmFreezeView:"confirmFreezeView"},decls:16,vars:5,consts:function(){let t,e,i,n,o,a,r;return t=$localize`:@@common_protect-view␟e950c255187b455dd7f06b4983b4843c9fa41b42␟1181685195236984283: Protect view `,e=$localize`:@@cu-lock-view-confirm__protect-view-notice␟d86ebc01dd9f1ade77469799f6ded4b6e1193ea4␟8265517383597780712: Protecting a view layout will prevent anyone from changing the layout until it's unprotected by a person with permissions to do so. `,i=$localize`:@@cu-lock-view-confirm__form-label_protect-view-reason␟1d29815422cbaed944836cb1d1812121dd251f10␟8561593400510983451: Why are you protecting this view? (optional) `,n=$localize`:@@cu-lock-view-confirm__form-placeholder_protect-view-reason␟556c6d982605d4add46cbca9c7c3317c4dc5f9ec␟3205213019125752525:Add an optional message to people who are unprotecting it...`,o=$localize`:@@cu-lock-view-confirm__btn-txt_protect-layout␟7ad8c5a5ff2abb30dcc00f1b0817691ca81289dd␟3699340283762161837: Protect layout `,a=$localize`:@@cu-lock-view-confirm__can-unprotect-people-count␟e7047623ae87d9f5b115e26dd8900a0fad1437e0␟779315817542257125: ${"\ufffd0\ufffd"}:INTERPOLATION: people can unprotect this view `,r=$localize`:@@cu-lock-view-confirm__personal-view-unprotect␟f4b5befd4191a27ac16d11a4b0d20a72111529ac␟5487448866438879979: This is a personal view, only you can unprotect it `,[[1,"cu-conflict-management"],[1,"cu-conflict-management__icon","cu-view-block__icon_freeze",3,"icon"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],t,[1,"cu-conflict-management__proceed"],e,[1,"cu-conflict-management__subtitle"],i,["placeholder",n,1,"cu-view-block__note",3,"ngModel","ngModelChange"],["class","cu-view-block__wall-link",3,"click",4,"ngIf"],["class","cu-view-block__wall-text",4,"ngIf"],[4,"ngIf"],[1,"cu-conflict-management__footer"],[1,"cu-btn","cu-btn_m","cu-btn_full-width",3,"click"],o,[1,"cu-view-block__wall-link",3,"click"],a,[1,"cu-view-block__wall-text"],r,["type","view",3,"item","showSearch","showHeader"]]},template:function(t,e){1&t&&(d.cc(0,"div",0),d.Xb(1,"div",1),d.cc(2,"div",2),d.gc(3,3),d.bc(),d.cc(4,"div",4),d.gc(5,5),d.bc(),d.cc(6,"div",6),d.gc(7,7),d.bc(),d.cc(8,"textarea",8),d.qc("ngModelChange",function(t){return e.confirmNote=t}),d.dd(9,"  "),d.bc(),d.bd(10,Dc,2,1,"div",9),d.bd(11,Ic,2,0,"div",10),d.bd(12,Pc,2,3,"ng-container",11),d.cc(13,"div",12),d.cc(14,"button",13),d.qc("click",function(){return e.emitConfirmFreezeView()}),d.gc(15,14),d.bc(),d.bc(),d.bc()),2&t&&(d.Ib(1),d.Dc("icon","cu2-shield-alt"),d.Ib(7),d.Dc("ngModel",e.confirmNote),d.Ib(2),d.Dc("ngIf",!e.confirmShowPrivacy&&(null==e.confirmView?null:e.confirmView.visibility)===e.DataViewVisibility.Public),d.Ib(1),d.Dc("ngIf",!e.confirmShowPrivacy&&(null==e.confirmView?null:e.confirmView.visibility)!==e.DataViewVisibility.Public),d.Ib(1),d.Dc("ngIf",(null==e.confirmView?null:e.confirmView.visibility)===e.DataViewVisibility.Public&&e.confirmShowPrivacy))},directives:[nt.a,D.c,D.p,D.s,n.q,Cc.a],styles:[".cu-lock-view-confirm__dropdown-list{position:absolute;right:0}.cu-lock-view-confirm__dropdown-list .cu-dropdown__toggle{display:inline-flex;align-items:center}.cu-lock-view-confirm__dropdown-list-text{flex-grow:1;font:300 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#343434;white-space:nowrap}.dark-theme .cu-lock-view-confirm__dropdown-list-text{color:#d5d6d7}.cu-lock-view-confirm__dropdown-list-angle{transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px}.cu-lock-view-confirm__dropdown-list-angle:hover{transition:none}.dark-theme .cu-lock-view-confirm__dropdown-list-angle{fill:#828588}.cu-dropdown_open>div>.cu-lock-view-confirm__dropdown-list-angle{transform:rotate(-90deg)}"],encapsulation:2,changeDetection:0}),t})();var Oc=i("EP2k");function $c(t,e){if(1&t&&(d.cc(0,"div",14),d.dd(1),d.bc()),2&t){const t=d.uc();d.Ib(1),d.fd(" ",null==t.data?null:t.data.frozenNote," ")}}function jc(t,e){1&t&&(d.mc(0,16,1),d.Yb(1),d.jc())}function Lc(t,e){if(1&t&&(d.cc(0,"div",15),d.ac(1),d.mc(2,16),d.bd(3,jc,2,0,"ng-container",17),d.Xb(4,"div",18),d.vc(5,"username"),d.jc(),d.Zb(),d.Xb(6,"cu-avatar",19),d.bc()),2&t){const t=d.uc();d.Ib(3),d.Dc("ngIf",!(null!=t.data&&t.data.frozenNote)),d.Ib(2),d.kc(d.wc(5,4,null==t.data?null:t.data.frozenBy)),d.hc(2),d.Ib(1),d.Dc("user",null==t.data?null:t.data.frozenBy)("modifier","cu-avatar_sm")}}const Ec=function(t){return{"cu-view-block__wall_no-note":t}};let Nc=(()=>{class t{constructor(){this.onConfirm=new d.o,this.onCancel=new d.o,this.destroy$=new B.a}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-unlock-confirm"]],hostAttrs:[1,"cu-conflict-management"],inputs:{data:"data"},outputs:{onConfirm:"onConfirm",onCancel:"onCancel"},decls:14,vars:6,consts:function(){let t,e,i,n,o;return t=$localize`:@@cu-unlock-confirm__unprotect-view␟f1e112cf443f0b2b2c112b874dabf29e4ab83662␟8976756606189573530: Unprotect view
`,e=$localize`:@@cu-unlock-confirm__question_unprotect-view␟28f3bae703389f3afd15cd3522a2f2fbf7084bf2␟4732756380893002353: Are you sure you want to unprotect this view?
`,i=$localize`:@@cu-unlock-confirm__btn-txt_dupe-as-personal-view␟2828869808f2b49784a2a2e7bb7f9d89b478163a␟6749746231536646425: Duplicate as Personal view `,n=$localize`:@@cu-unlock-confirm__unprotect-view␟45c4257b0a15ed40b0a5a2a25d055e627d7cf227␟76356721271443610: Unprotect view `,o=$localize`:@@cu-unlock-confirm__protected-by␟39eed4fc65e618e58e4b1dfcde63630802441a58␟3607565252678574957:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:Protected ${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_TAG_NG_CONTAINER: by ${"\ufffd#4\ufffd"}:START_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_DIV:`,[[1,"cu-conflict-management__icon","cu-view-block__icon_freeze",3,"icon"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],t,[1,"cu-conflict-management__proceed"],e,[1,"cu-view-block__wall-container"],[1,"cu-view-block__wall",3,"ngClass"],["class","cu-view-block__wall-note",4,"ngIf"],["class","cu-view-block__wall-by",4,"ngIf"],[1,"move-category__footer"],[1,"cu-btn","cu-btn_m","cu-btn_font-size-14","cu-btn_nobg",3,"click"],i,[1,"cu-btn","cu-btn_m",3,"click"],n,[1,"cu-view-block__wall-note"],[1,"cu-view-block__wall-by"],o,[4,"ngIf"],[1,"cu-view-block__wall-by-name"],[3,"user","modifier"]]},template:function(t,e){1&t&&(d.Xb(0,"div",0),d.cc(1,"div",1),d.gc(2,2),d.bc(),d.cc(3,"div",3),d.gc(4,4),d.bc(),d.cc(5,"div",5),d.cc(6,"div",6),d.bd(7,$c,2,1,"div",7),d.bd(8,Lc,7,6,"div",8),d.bc(),d.bc(),d.cc(9,"div",9),d.cc(10,"button",10),d.qc("click",function(){return e.onCancel.emit()}),d.gc(11,11),d.bc(),d.cc(12,"button",12),d.qc("click",function(){return e.onConfirm.emit()}),d.gc(13,13),d.bc(),d.bc()),2&t&&(d.Dc("icon","cu2-shield-alt"),d.Ib(6),d.Dc("ngClass",d.Hc(4,Ec,!(null!=e.data&&e.data.frozenNote))),d.Ib(1),d.Dc("ngIf",null==e.data?null:e.data.frozenNote),d.Ib(1),d.Dc("ngIf",null==e.data?null:e.data.frozenBy))},directives:[nt.a,n.o,n.q,is.a],pipes:[Oc.a],encapsulation:2,changeDetection:0}),t})();i("Yx0S");var Ac=i("vkgz"),Vc=i("5PTc"),zc=i("PoDU"),Fc=i("u+AO"),Bc=i("2TnG"),Rc=i("ouif"),Uc=i("YVXy"),Gc=i("bV87"),Hc=i("hqhL"),Wc=i("TIdT"),qc=i("BjHp"),Xc=i("jbQC"),Yc=i("2eMX"),Kc=i("6kbF");const Zc=["sharePublicDocModal"],Jc=["personalViewConfirmModal"],Qc=["personalStandardViewConfirmModal"],tl=["moveViewModal"],el=["paywallBoxTemplate"],il=["paywallMindMapTemplate"];function nl(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-template-items-dropdown",13),d.qc("onSelect",function(i){d.Uc(t);const n=e.item;return d.uc().openTemplateModal(i.id,n)}),d.bc()}}function ol(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",14,15),d.qc("onSelect",function(i){d.Uc(t);const n=e.item,o=d.Rc(1),a=d.uc();return o.close(),a.openMoveModal(i.id,n.view)}),d.cc(2,"div",16),d.cc(3,"div",17),d.Xb(4,"div",18),d.cc(5,"span",19),d.gc(6,20),d.bc(),d.Xb(7,"div",21),d.bc(),d.bc(),d.bc()}2&t&&(d.Dc("items",e.item.moveItems)("autoClose",!0)("dropdownPlacement","right")("dropdownCloseOthersOnOpen",!1),d.Ib(7),d.Dc("icon","cu2-angle-right"))}function al(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",22),2&t){const t=d.uc();d.Dc("title",t.paywallCommonStringsService.protectViewsText)("image","./assets/images/components/paywall-popover/protected-view.png")("learnMore","https://docs.clickup.com/en/articles/2986479-protect-layout")("amplitudeLabel","Protect Views")}}function rl(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",23),2&t){const t=d.uc();d.Dc("title",t.paywallCommonStringsService.personalViewsText)("image","./assets/images/components/paywall-popover/personal-view.png")("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("learnMore","https://docs.clickup.com/en/articles/3044734-personal-views")("amplitudeLabel","Personal Views")}}function sl(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",24),2&t){const t=d.uc();d.Dc("title",t.defaultViewsPaywallTitleText)("image","./assets/images/components/paywall-popover/default-view.png")("learnMore","https://docs.clickup.com/en/articles/2986549-default-view")("amplitudeLabel","Default Views")}}function cl(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-paywall-modal",25),d.qc("trialClick",function(){return d.Uc(t),d.uc().startTrial()}),d.bc()}if(2&t){const t=d.uc();d.Dc("featureTitle",t.boxViewPaywallModalMeta.title)("description",t.boxViewPaywallModalMeta.description)("features",t.boxViewPaywallModalMeta.features)("image",t.boxViewPaywallModalMeta.image)}}function ll(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-paywall-modal",26),d.qc("trialClick",function(){return d.Uc(t),d.uc().startMindMapTrial()}),d.bc()}if(2&t){const t=d.uc();d.Dc("featureTitle",t.mindMapsPaywallData.title)("boldDescription",t.mindMapsPaywallData.boldDescription)("description",t.mindMapsPaywallData.description)("features",t.mindMapsPaywallData.features)("image",t.mindMapsPaywallData.image)("plan",t.mindMapsPaywallData.plan)}}function ul(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",27),2&t){const t=d.uc();d.Dc("title",t.commonStringsService.whoopsText)("amplitudeLabel","100 Views")}}function dl(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"cu-share-public-doc",29),d.qc("setIsPublic",function(i){d.Uc(t);const n=e.ngIf;return d.uc(2).updateDataView(n.id,{public:i},!0)})("setIsSeoOptimised",function(i){d.Uc(t);const n=e.ngIf;return d.uc(2).updateDataView(n.id,{seoOptimized:i},!0)}),d.vc(2,"dataViewLink"),d.bc(),d.Zb()}if(2&t){const t=e.ngIf;d.Ib(1),d.Dc("isPublic",t.public)("modifier","cu-share-public-doc_share-entity")("isSeoOptimised",t.seoOptimized)("sharingLink",t.publicSharingUrl)("privateLink",d.xc(2,6,t,!0))("publicKey",t.publicKey)}}function hl(t,e){if(1&t&&(d.bd(0,dl,3,9,"ng-container",28),d.vc(1,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,1,t.shareView$))}}function pl(t,e){if(1&t){const t=d.dc();d.cc(0,"div",30),d.Xb(1,"div",31),d.cc(2,"div",32),d.gc(3,33),d.bc(),d.cc(4,"div",34),d.gc(5,35),d.bc(),d.cc(6,"div",36),d.cc(7,"div",37),d.qc("click",function(){return d.Uc(t),d.uc().confirmCopyViewPrivate()}),d.gc(8,38),d.bc(),d.cc(9,"button",39),d.qc("click",function(){return d.Uc(t),d.uc().confirmMakeViewPrivate()}),d.gc(10,40),d.bc(),d.bc(),d.bc()}2&t&&(d.Ib(1),d.Dc("icon","cu2-lock"))}function fl(t,e){if(1&t){const t=d.dc();d.cc(0,"div",30),d.cc(1,"div",41),d.gc(2,42),d.bc(),d.cc(3,"div",34),d.gc(4,43),d.bc(),d.cc(5,"div",44),d.cc(6,"button",45),d.qc("click",function(){return d.Uc(t),d.uc().closeModal()}),d.gc(7,46),d.bc(),d.cc(8,"button",47),d.qc("click",function(){return d.Uc(t),d.uc().confirmCopyViewPrivate()}),d.gc(9,48),d.bc(),d.bc(),d.bc()}}function gl(t,e){if(1&t){const t=d.dc();d.cc(0,"div",55),d.cc(1,"div",56),d.dd(2,"Space"),d.bc(),d.cc(3,"cu-project-list-dropdown",57),d.qc("projectSelected",function(e){return d.Uc(t),d.uc(2).moveViewSelectData({project:e})}),d.bc(),d.bc()}2&t&&(d.Ib(3),d.Dc("initSelectedProject",!1))}function ml(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-category-list-legacy",58),d.qc("onSelect",function(e){return d.Uc(t),d.uc(2).moveViewSelectData(e)})("onChangeProject",function(e){return d.Uc(t),d.uc(2).moveViewSelectData({project:e})}),d.bc()}if(2&t){const t=d.uc(2);d.Dc("mode",t.moveType===t.DataViewParentType.Category?"project":"list")}}function vl(t,e){if(1&t){const t=d.dc();d.cc(0,"div",30),d.bd(1,gl,4,1,"div",49),d.bd(2,ml,1,1,"cu-category-list-legacy",50),d.cc(3,"div",44),d.cc(4,"button",51),d.qc("click",function(){return d.Uc(t),d.uc().closeModal()}),d.gc(5,52),d.bc(),d.cc(6,"button",53),d.qc("click",function(){return d.Uc(t),d.uc().confirmMoveView()}),d.gc(7,54),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc();d.Ib(1),d.Dc("ngIf",t.moveType===t.DataViewParentType.Project),d.Ib(1),d.Dc("ngIf",t.moveType!==t.DataViewParentType.Project),d.Ib(4),d.Dc("disabled",t.moveType===t.DataViewParentType.Subcategory&&!(null!=t.moveViewData&&t.moveViewData.subcategory)||t.moveType===t.DataViewParentType.Category&&!(null!=t.moveViewData&&t.moveViewData.category)||t.moveType===t.DataViewParentType.Project&&!(null!=t.moveViewData&&t.moveViewData.project))}}let bl=(()=>{class t{constructor(t,e,i,n,o,a,r,s,c,l){this.store=t,this.modal=e,this.injector=i,this.navFavoritesService=n,this.clipboardService=o,this.dataViewPipe=a,this.sharedData=r,this.docService=s,this.commonStringsService=c,this.paywallCommonStringsService=l,this.onEditViewSettings=new d.o,this.onOpenTemplatesInSettings=new d.o,this.groupViews=mr.a.groupViews,this.destroy$=new B.a,this.isGuest$=this.store.select(z.isGuestTeam),this.team$=this.store.select(z.getTeam),this.sharedSpace$=this.store.select(z.getSharedSpaceParam),this.isFreeOrUnlimitedTeam$=this.team$.pipe(Object(Qt.a)(t=>!t||t.plan_id===F.f.FREE||t.plan_id===F.f.UNLIMITED)),this.views$=this.store.select(X.db),this.pinnedViews$=this.store.select(X.nb),this.viewGroups$=this.store.select(X.eb),this.loadedViews$=Object(ii.a)([this.views$,this.viewGroups$]).pipe(Object(Vi.a)(([t,e])=>!!t&&!!e),Object(Qt.a)(([t,e])=>this.groupViews?e:t)),this.groupPreference$=this.store.select(X.lb),this.project$=this.store.select(z.getProject),this.category$=this.store.select(z.getCategory),this.subcategory$=this.store.select(z.getSubcategory),this.canDelete$=this.store.pipe(Object(K.select)(z.getUserEnterprisePermissions),Object(Qt.a)(t=>!t||t.delete_items===ui.b.ON)),this.onlyDeleteIfOwner$=this.store.pipe(Object(K.select)(z.getUserEnterprisePermissions),Object(Qt.a)(t=>t&&t.delete_items===ui.b.CREATE)),this.isPaidPlan$=this.store.select(z.isOnUnlimitedorHigher),this.parentType$=this.views$.pipe(Object(Qt.a)(t=>t&&t.length&&t[0].parent.type)),this.parent$=this.store.select(X.Hb),this.selectedView$=this.store.select(X.qb),this.lastCreatedId$=this.store.select(X.kb),this.createDataViewState$=this.store.select(X.m),this.users$=this.store.select(z.getSelectedProjectCategoryAndSubcategoryIds).pipe(Object(Kn.a)(({selectedProjectId:t,selectedCategoryId:e,selectedSubCategoryId:i})=>this.store.pipe(Object(K.select)(Object(Tc.e)(t,e,i))))),this.favorites$=this.store.pipe(Object(K.select)(no.k),Object(Qt.a)(t=>t&&t.length?t:null)),this.canOnlyCreatePersonalViews$=Object(ii.a)([this.store.select(z.getUserEnterprisePermissions),this.team$]).pipe(Object(Qt.a)(([t,e])=>t&&!t.views&&e.role!==H.f.GUEST)),this.shareViewId$=new Co.a(null),this.shareView$=Object(ii.a)([this.views$,this.shareViewId$]).pipe(Object(Qt.a)(([t,e])=>t&&e&&t.find(t=>t.id===e))),this.user$=this.store.select(z.getUser),this.isSidebarCollapsed$=this.store.select(z.getSidebarIsCollapsedOption),this.sidebarWidth$=this.store.select(z.getSidebarWidthOption),this.isSpacesBarCollapsed$=this.store.pipe(Object(K.select)(z.getSpacesBarIsCollapsedOption)),this.spacesBarWidth$=this.store.select(z.getSpacesBarWidthOption),this.TeamPlan=F.f,this.UserRole=H.f,this.confirmViewDocAlso=!0,this.DataViewVisibility=$.j,this.moveItems=[{id:$.e.Team,title:$localize`:@@common_everything:Everything`,type:ne.a.Item},{id:$.e.Project,title:"Space",type:ne.a.Item},{id:$.e.Category,title:$localize`:@@common_folder:Folder`,type:ne.a.Item},{id:$.e.Subcategory,title:$localize`:@@common_list:List`,type:ne.a.Item}],this.DataViewParentType=$.e,this.CreateDataViewState=E.b,this.DataViewType=$.i,this.boxViewPaywallModalMeta=Fc.b,this.mindMapsPaywallData=Bc.b,this.defaultViewsPaywallTitleText=$localize`:@@paywall_title--default-views:Default views`}ngOnInit(){this.createDataViewState$.pipe(Object(Vi.a)(t=>t===E.b.errorLimitBox||t===E.b.errorLimitMindMap),Object(Ac.a)(t=>this.openPaywallModal(t)),Object(Kn.a)(()=>this.modal.closeModal.pipe(Object(N.a)(1))),Object(A.a)(this.destroy$)).subscribe(()=>{this.paywallPopoverHide()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getNewViewData(t,e,i){return Object(ii.a)([this.team$.pipe(Object(Yn.a)()),this.users$.pipe(Object(Yn.a)()),this.store.select(z.getProject).pipe(Object(Yn.a)()),this.store.select(z.getCategory).pipe(Object(Yn.a)()),this.store.select(z.getSubcategory).pipe(Object(Yn.a)()),this.store.select(z.getCategories),this.sharedSpace$.pipe(Object(Yn.a)())]).pipe(Object(Qt.a)(([n,o,a,r,s,c,l])=>{let u=$.e.Team,d=this.teamId,h=null;this.subcategoryId&&this.subcategoryId!==E.a?(u=$.e.Subcategory,d=this.subcategoryId,h=s):this.categoryId&&this.categoryId!==E.a?(u=$.e.Category,d=this.categoryId,h=r):this.projectId&&this.projectId!==E.a?(u=$.e.Project,d=this.projectId,h=a):l&&(u=$.e.SharedSpace);let p=E.Gb.find(t=>t.defaultDataViewAPIPayload.type===e).defaultDataViewAPIPayload;u!==$.e.Team&&a&&h&&(p=Object(E.bb)(p,a,h),p.locked=!1);const f={id:d,type:u},g=Object(E.R)(n,a,h,o,$.q[e]+"_template",p.columns);i&&i.name&&(t=i.name);const m=Object.assign(Object.assign({},p),{name:t||p.name,parent:f,columns:g,form_settings:Object(E.db)(p.form_settings,f,c,n),visibility:i&&i.personalView?$.j.Private:$.j.Public,pinned:i&&i.pinned});return i&&i.grouping&&(m.grouping=i.grouping),e===$.i.Gantt&&(m.filters={fields:[],op:null,show_closed:!0}),m}))}addView({name:t,viewType:e,options:i}){this.getNewViewData(t,e,i).pipe(Object(Yn.a)()).subscribe(t=>{e===$.i.Embed?this.openEmbedViewModal(t):this.createDataView(t)})}clearLastCreated(){this.store.dispatch(new Y.Nj(null))}editView(t){const e=t.view;switch(t.action){case je.Pin:this.store.dispatch(new Y.qm(e.id,{pinned:e?!e.pinned:t.data}));break;case je.Rename:this.store.dispatch(new Y.qm(e.id,{name:t.data}));break;case je.Copy:this.copyView(Object.assign(Object.assign({},e),{locked:!1}));break;case je.Remove:this.confirmView=e,this.deleteView();break;case je.LockSettings:case je.Share:if(e.visibility===$.j.Public){let t;Object(E.C)(e)?(this.store.dispatch(new Y.Li(e.id,{},!0)),t=this.selectedView$.pipe(Object(Vi.a)(t=>t&&!Object(E.C)(t)))):t=Object(Zn.a)(e),t.pipe(Object(N.a)(1),Object(A.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new Y.Le("view",t))})}break;case je.ShareViaLinkSettings:this.sharePublicDocView(e);break;case je.ShareViaLink:e.public||this.sharePublicDocView(e),this.updateDataView(e.id,{public:!e.public},!0);break;case je.Default:this.store.dispatch(new Y.oj(e.id,!e.default));break;case je.Lock:if(e.locked){const t=this.modal.openComponent(Nc,this.injector,{bodyModifier:"cu-modal__body_no-min-height"});t.instance.data=e,t.instance.onCancel.pipe(Object(A.a)(t.instance.destroy$)).subscribe(()=>{this.confirmCopyViewPrivate()}),t.instance.onConfirm.pipe(Object(A.a)(t.instance.destroy$)).subscribe(()=>{this.confirmFreezeView(e,!1)})}else{let t;Object(E.C)(e)?(this.store.dispatch(new Y.Li(e.id,{},!0)),t=this.selectedView$.pipe(Object(Vi.a)(t=>t&&!Object(E.C)(t)))):t=Object(Zn.a)(e),t.pipe(Object(N.a)(1),Object(A.a)(this.destroy$)).subscribe(t=>{const e=this.modal.openComponent(Mc,this.injector,{bodyModifier:"cu-modal__body_no-min-height"});e.instance.confirmView=t,e.instance.confirmFreezeView.pipe(Object(A.a)(e.instance.destroy$)).subscribe(({confirmNote:e})=>{this.confirmFreezeView(t,!0,e)})})}break;case je.Me:this.store.dispatch(new Y.hj(e.id,!e.alwaysMeView));break;case je.EditCode:this.openEmbedViewModal(Object(E.D)(e,[]),e.originalPayload.embed_settings);break;case je.AddFavorite:this.openFavoritesModal(e);break;case je.RemoveFavorite:this.store.dispatch(Object(Gr.t)({teamId:this.teamId,viewId:e.id}));break;case je.Reset:this.store.dispatch(new Y.ug(e.id));break;case je.CopyLinkToClipboard:this.clipboardService.copyFromContent(this.dataViewPipe.getUrl(e));break;case je.AutoSave:this.toggleAutoSave(e,!e.autoSave);break;case je.Private:e.defaultStandardView?(this.confirmView=e,this.modal.open({content:this.personalStandardViewConfirmModal,modifier:"cu-modal_higher-stack",bodyModifier:"cu-modal__body_no-min-height"})):e.visibility===$.j.Public?(this.confirmView=e,this.modal.open({content:this.personalViewConfirmModal,modifier:"cu-modal_higher-stack",bodyModifier:"cu-modal__body_no-min-height"})):this.store.dispatch(new Y.Ij(e.id,$.j.Public));break;case je.UseTemplate:this.openTemplateModal("loadTemplate",e)}this.store.dispatch(new Y.Nj(null))}confirmMakeViewPrivate(){this.modal.close(),this.store.dispatch(new Y.Ij(this.confirmView.id,$.j.Private))}confirmCopyViewPrivate(){this.modal.close(),this.store.dispatch(new Y.mc(this.confirmView.id,!0))}copyView(t){this.resetViewState(),this.store.dispatch(new Y.mc(t.id,!1))}dropView(t){this.store.dispatch(new Y.yj(t))}openTemplateModal(t,e){Object(ii.a)([this.store.pipe(Object(K.select)(z.getMembers),Object(Qt.a)(t=>t.map(t=>t.user))),this.store.select(z.getUser)]).pipe(Object(N.a)(1)).subscribe(([i,n])=>{this.store.dispatch(new Y.Oe("loadTemplate"===t?{open:!0,parent:e,parentType:e.viewType===$.i.Doc?Gc.d.Doc:Gc.d.View,initialType:e.viewType===$.i.Doc?Gc.d.Doc:Gc.d.View,initialTypeData:e}:"updateExistingTemplate"===t?{open:!0,parent:e,parentType:e.viewType===$.i.Doc?Gc.d.Doc:Gc.d.View,initialType:e.viewType===$.i.Doc?Gc.d.Doc:Gc.d.View,itemToSave:e,updateExisting:!0}:{open:!0,parent:e,parentType:e.viewType===$.i.Doc?Gc.d.Doc:Gc.d.View,initialType:e.viewType===$.i.Doc?Gc.d.Doc:Gc.d.View,itemToSave:e}))})}openTemplateManager(t,e,i=!0,n){const o=this.modal.openComponent(xc.a,this.injector,{name:"templateSelector",cannotClose:!1,preventExternalClick:!0,modifier:"cu-folder-list-template-selector__modal",dialogModifier:"",bodyModifier:""});o.instance.initTemplateId=e&&e.id,o.instance.initTemplateType=t,o.instance.viewType=e&&e.viewType||n&&n.viewType,o.instance.editOnly=i,o.instance.onOpenTemplatesInSettings.pipe(Object(A.a)(o.instance.destroy$)).subscribe(()=>{this.onOpenTemplatesInSettings.emit()}),o.instance.onViewTemplateSelected.pipe(Object(A.a)(o.instance.destroy$)).subscribe(t=>{const e=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}(t,["id"]);e.viewType===$.i.Doc?this.docService.getPages(n.id).pipe(Object(N.a)(1)).subscribe(t=>{t.pages&&1===t.pages.length&&Object(Rc.d)(t.pages[0].content)&&this.store.dispatch(new Uc.M(n.id,{pageId:t.pages[0].id,name:t.pages[0].name})),this.store.dispatch(new Y.Li(n.id,Object.assign(Object.assign({},e),{public:n.public,name:n.name,visibility:n.visibility}),!1,!1,!1,!1,!0))}):this.store.dispatch(new Y.Li(n.id,Object.assign(Object.assign({},e),{parent:Object.assign({},n.parent),name:n.name,originalPayload:Object.assign(Object.assign({},e.originalPayload),{parent:Object.assign({},n.parent)})}),!1,!1,!0,null,null,t.id)),t.viewType===$.i.Gantt&&this.store.dispatch(Sc.ganttLoadTemplate({load:!0,preferences:t.ganttSettings}))})}openMoveModal(t,e){this.moveType=t,this.moveView=e,this.moveViewData=null,t===$.e.Team?this.confirmMoveView():this.modal.open({title:$localize`:@@cu-view-block__title_move-view:Move View`,content:this.moveViewModal,bodyModifier:"cu-modal__body_no-min-height"})}moveViewSelectData(t){this.moveViewData=t}confirmMoveView(){this.modal.close();const t=this.moveType===$.e.Team?this.teamId:this.moveType===$.e.Project?this.moveViewData&&this.moveViewData.project&&this.moveViewData.project.id:this.moveType===$.e.Category?this.moveViewData&&this.moveViewData.category&&this.moveViewData.category.id:this.moveType===$.e.Subcategory?this.moveViewData&&this.moveViewData.subcategory&&this.moveViewData.subcategory.id:null;t&&this.moveView&&this.moveView.parent&&(this.moveView.parent.id!==t||this.moveView.parent.type!==this.moveType)&&this.store.dispatch(new Y.we(this.moveView.id,{id:t,type:this.moveType}))}resetViewState(){this.store.dispatch(new Y.vg)}paywallPopoverHide(){this.store.dispatch(new Y.Xi)}openPaywallModal(t){t===E.b.errorLimitBox?this.modal.open({modifier:"cu-modal_fullwidth",content:this.paywallBoxTemplate}):t===E.b.errorLimitMindMap&&this.modal.open({modifier:"cu-modal_fullwidth",content:this.paywallMindMapTemplate})}toggleAutoSave(t,e){this.store.dispatch(new Y.qm(t.id,{autoSave:e}))}sharePublicDocView(t){this.shareViewId$.next(t.id),this.modal.open({title:$localize`:@@common_share-via-link:Share via link`,content:this.sharePublicDocModal,bodyModifier:"cu-modal__body_no-min-height",modifier:"cu-modal__doc-share"})}updateDataView(t,e,i){this.store.dispatch(new Y.qm(t,e,i))}closeModal(){this.modal.close()}startTrial(){this.getNewViewData("",$.i.Box).pipe(Object(Yn.a)()).subscribe(t=>{this.store.dispatch(new Y.Rk([new Y.Gb(t,!0)]))}),this.closeModal()}startMindMapTrial(){this.getNewViewData("",$.i.MindMap).pipe(Object(Yn.a)()).subscribe(t=>{this.store.dispatch(new Y.Rk([new Y.Gb(t,!0)],F.f.BUSINESS))}),this.closeModal()}fetchViewForPermissions(t){this.store.dispatch(new Y.ce(t,!0))}createDataView(t){this.store.dispatch(new Y.Gb(t,!0))}openEmbedViewModal(t,e){const i=this.modal.openComponent(Vc.a,this.injector,{title:$localize`:@@cu-view-block__title_embed-view:Embed View`,modifier:"cu-modal_embed-view",helpUrl:"https://docs.clickup.com/clickup-2-0/embed-view"});e&&i.instance.setInitialData(e),i.instance.output.pipe(Object(N.a)(1),Object(Vi.a)(t=>t.type!==zc.a.Cancel),Object(A.a)(i.instance.destroy$)).subscribe(i=>{const n={embed_settings:{}};switch(i.type){case zc.a.HTML:n.embed_settings.html=i.payload;break;case zc.a.URL:n.embed_settings.url=i.payload}e?this.updateDataView(t.id,n):this.createDataView(Object.assign(Object.assign({},t),n))})}openFavoritesModal(t){this.navFavoritesService.addToFavorites({projectId:this.projectId,teamId:this.teamId,categoryId:this.categoryId},t)}confirmFreezeView(t,e,i){this.modal.close(),this.store.dispatch(new Y.vj(t.id,e,e?i:t.frozenNote))}deleteView(){this.store.dispatch(this.confirmView.viewType!==$.i.Doc||this.confirmViewDocAlso?this.confirmView.defaultStandardView&&this.confirmView.canDeleteStandardView?new Y.Km(this.teamId,{hide_everything_calendar:!0}):new Y.fg(this.confirmView.id,this.confirmView.name):new Y.we(this.confirmView.id,{id:this.teamId,type:$.e.DocsHome},!1,null,!1,!0))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(K.Store),d.Wb(Z.a),d.Wb(d.t),d.Wb(Hc.a),d.Wb(xn.c),d.Wb(se.a),d.Wb(Jn.a),d.Wb(Wc.a),d.Wb(J.a),d.Wb(Q.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-view-block"]],viewQuery:function(t,e){if(1&t&&(d.jd(Zc,3),d.jd(Jc,3),d.jd(Qc,3),d.jd(tl,3),d.jd(el,3),d.jd(il,3)),2&t){let t;d.Qc(t=d.rc())&&(e.sharePublicDocModal=t.first),d.Qc(t=d.rc())&&(e.personalViewConfirmModal=t.first),d.Qc(t=d.rc())&&(e.personalStandardViewConfirmModal=t.first),d.Qc(t=d.rc())&&(e.moveViewModal=t.first),d.Qc(t=d.rc())&&(e.paywallBoxTemplate=t.first),d.Qc(t=d.rc())&&(e.paywallMindMapTemplate=t.first)}},hostAttrs:[1,"cu-view-block"],inputs:{teamId:"teamId",projectId:"projectId",categoryId:"categoryId",subcategoryId:"subcategoryId",groupingItems:"groupingItems"},outputs:{onEditViewSettings:"onEditViewSettings",onOpenTemplatesInSettings:"onOpenTemplatesInSettings"},features:[d.Hb([se.a])],decls:51,vars:83,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,d,h,p,f,g,m,v,b,_,w,y,k,x,S;return t=$localize`:dropdown title@@cu-view-block__title_move-to␟50a3f6e84659286ac4f27f4bd7c5d35ea2872999␟8633968067722072928:Move to`,e=$localize`:@@common_move␟57cf305f9bfd681c70dc26e914108d06384ade9f␟2354817630223808522:Move`,i=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,n=$localize`:@@paywall_text--protect-views␟b4dd8d053ee05799919b56f5cab0a9d4f6adf180␟8331863455270593886:Upgrade to Business to protect views and prevent unwanted changes.`,o=$localize`:@@paywall_email-subject--protect-views␟1f7477b8f6345498e9ca3f41af1faf5d65aabdaf␟5562490287161458785:Please upgrade ClickUp so we can protect views`,a=$localize`:@@paywall_upgrade-button-txt--upgrade-to-business␟e7a6fa35e2b9dfc4422b056ce3b1d60c5a5a13c6␟1249386464832739026:Upgrade to Business`,r=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,s=$localize`:@@paywall_text--personal-views␟cfc68ed3817ae0c6c3ae4cf8768ad34eec13a4dd␟6721321494800710974:Upgrade to Business to make Personal views.`,c=$localize`:@@paywall_email-subject--protect-views␟1f7477b8f6345498e9ca3f41af1faf5d65aabdaf␟5562490287161458785:Please upgrade ClickUp so we can protect views`,l=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,u=$localize`:@@paywall_text--default-views␟b66b98d96ec5f83943d32b3350b5b533b6de6de4␟561270630472409088:Choose which view is loaded by default for anyone going to this location.`,d=$localize`:@@paywall_email-subject--default-views␟76a625d9c8d3a7d3cd8b862785b5c8c2dcc05a47␟7853788883063851397:Please upgrade ClickUp so we can make default views`,h=$localize`:@@paywall_upgrade-button-txt--upgrade-to-business␟e7a6fa35e2b9dfc4422b056ce3b1d60c5a5a13c6␟1249386464832739026:Upgrade to Business`,p=$localize`:@@paywall_text--free-plans-views-limitation␟a76a41b24e74f3f6bf099e52a17e9d17a3944946␟8302349538565218365:Free Forever plans are limited to 100 views. To get Unlimited everything: `,f=$localize`:@@paywall_email-subject--free-plans-views-limitation␟1f825c97f04dff8da540da96f94335c90cf634d6␟7959701809020103153:Please upgrade ClickUp so we can make unlimited views`,g=$localize`:@@cu-view-block__convert-to-personal-view␟c93574a22cb1e08359e7d491faf2179262617875␟6009743753909653974: Convert to Personal view `,m=$localize`:@@cu-view-block__convert-to-personal-view_description␟ba372c4ab9a25c60f1be5c8733e72dd0b257fc1f␟7775138768472025943: Personal views are only visible to you. If you want other people to still have access, you can duplicate this view into a new Personal view instead. `,v=$localize`:@@common_duplicate-view␟0295ee82964fe71bc896e07df3755b639a09466c␟7319160154551338980: Duplicate View `,b=$localize`:@@cu-view-block__btn-txt_convert-view␟d6df0a143263dcbab0f1812b2fc5c133f38d694e␟1849427069372843912: Convert View `,_=$localize`:@@cu-view-block__required-views-cant-be-personal␟af6bc96c61db7a6892911ffc75a2a20fdd3a702e␟4983540119537326831: Required views can’t be Personal views `,w=$localize`:@@cu-view-block__required-views-cant-be-personal_description␟816948de9cee0b132a7f3399bdfef13690004bb4␟2633047019533278661: To ensure everyone has access to at least one view, required views can’t be Personal views. However, you can duplicate this view as a new Personal view. `,y=$localize`:@@common_cancel␟a5433ae2324496bea9537caa5e8a2719d8e958d8␟4134917114666618814: Cancel `,k=$localize`:@@cu-view-block__btn-txt_duplicate-view-personal␟e6aa26caf8c641ef81a8b016044f72a99e2163bb␟2228802960151128615: Duplicate as Personal view instead `,x=$localize`:@@common_cancel␟a5433ae2324496bea9537caa5e8a2719d8e958d8␟4134917114666618814: Cancel `,S=$localize`:@@cu-view-block__btn-txt_move-view␟25901a8a9fc1b30496db93ef758a21210b43f052␟5631341415041614664: Move view `,[[3,"items","pinnedViews","selectedView","lastCreatedId","createDataViewState","isPaidPlan","favorites","project","lockPaywallTemplate","makeDefaultPaywallTemplate","makePersonalPaywallTemplate","createPaywallTemplate","templateDropdown","moveDropdown","moveItems","isGuest","parentType","parent","layoutType","meUser","canDelete","onlyDeleteIfOwner","sidebarCollapsed","spacesBarCollapsed","sidebarWidth","spacesBarWidth","groupViews","groupPreference","groupingItems","canOnlyCreatePersonalViews","team","onAdd","onEdit","onDrop","onResetViewState","onPaywallPopoverHide","onEditViewSettings","onFetchView","onClearLastCreated"],["templateDropdown",""],["moveDropdown",""],["paywallLockTemplate",""],["paywallMakePersonalTemplate",""],["paywallMakeDefaultTemplate",""],["paywallBoxTemplate",""],["paywallMindMapTemplate",""],["paywallLimitTemplate",""],["sharePublicDocModal",""],["personalViewConfirmModal",""],["personalStandardViewConfirmModal",""],["moveViewModal",""],[3,"onSelect"],["title",t,1,"cu2-views-bar__btn",3,"items","autoClose","dropdownPlacement","dropdownCloseOthersOnOpen","onSelect"],["menu",""],[1,"cu-dropdown-list-item__link-container"],[1,"cu-dropdown-list-item__link"],["icon","cu2-move",1,"cu-dropdown-list-item__icon"],[1,"cu-dropdown-list-item__title"],e,[1,"cu-dropdown-list-item__submenu",3,"icon"],["badge",i,"text",n,"emailSubject",o,"upgradeButtonText",a,3,"title","image","learnMore","amplitudeLabel"],["badge",r,"text",s,"emailSubject",c,3,"title","image","upgradeButtonText","learnMore","amplitudeLabel"],["badge",l,"text",u,"emailSubject",d,"upgradeButtonText",h,3,"title","image","learnMore","amplitudeLabel"],[3,"featureTitle","description","features","image","trialClick"],[3,"featureTitle","boldDescription","description","features","image","plan","trialClick"],["text",p,"emailSubject",f,3,"title","amplitudeLabel"],[4,"ngIf"],[3,"isPublic","modifier","isSeoOptimised","sharingLink","privateLink","publicKey","setIsPublic","setIsSeoOptimised"],[1,"cu-conflict-management"],[1,"cu-conflict-management__icon",3,"icon"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],g,[1,"cu-conflict-management__proceed"],m,[1,"move-category__footer","move-category__footer-less-margin"],[1,"cu-btn","cu-btn_m","cu-btn_outline",3,"click"],v,[1,"cu-btn","cu-btn_m",3,"click"],b,[1,"cu-conflict-management__warning"],_,w,[1,"move-category__footer"],[1,"cu-btn","cu-btn_md","cu-conflict-management__cancel",3,"click"],y,[1,"cu-btn","cu-btn_md",3,"click"],k,["class","category-copy__project",4,"ngIf"],["class","category-copy__category-list",3,"mode","onSelect","onChangeProject",4,"ngIf"],[1,"cu-btn","cu-conflict-management__cancel",3,"click"],x,[1,"cu-btn",3,"disabled","click"],S,[1,"category-copy__project"],[1,"category-copy__space"],[3,"initSelectedProject","projectSelected"],[1,"category-copy__category-list",3,"mode","onSelect","onChangeProject"]]},template:function(t,e){if(1&t&&(d.cc(0,"cu-data-view-list",0),d.qc("onAdd",function(t){return e.addView(t)})("onEdit",function(t){return e.editView(t)})("onDrop",function(t){return e.dropView(t)})("onResetViewState",function(){return e.resetViewState()})("onPaywallPopoverHide",function(){return e.paywallPopoverHide()})("onEditViewSettings",function(){return e.onEditViewSettings.emit()})("onFetchView",function(t){return e.fetchViewForPermissions(t)})("onClearLastCreated",function(){return e.clearLastCreated()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"async"),d.vc(11,"async"),d.vc(12,"async"),d.vc(13,"async"),d.vc(14,"async"),d.vc(15,"async"),d.vc(16,"async"),d.vc(17,"async"),d.vc(18,"async"),d.vc(19,"async"),d.vc(20,"async"),d.vc(21,"async"),d.vc(22,"async"),d.vc(23,"async"),d.vc(24,"async"),d.vc(25,"async"),d.vc(26,"async"),d.bc(),d.bd(27,nl,1,0,"ng-template",null,1,d.cd),d.bd(29,ol,8,5,"ng-template",null,2,d.cd),d.bd(31,al,1,4,"ng-template",null,3,d.cd),d.bd(33,rl,1,5,"ng-template",null,4,d.cd),d.bd(35,sl,1,4,"ng-template",null,5,d.cd),d.bd(37,cl,1,4,"ng-template",null,6,d.cd),d.bd(39,ll,1,6,"ng-template",null,7,d.cd),d.bd(41,ul,1,2,"ng-template",null,8,d.cd),d.bd(43,hl,2,3,"ng-template",null,9,d.cd),d.bd(45,pl,11,1,"ng-template",null,10,d.cd),d.bd(47,fl,10,0,"ng-template",null,11,d.cd),d.bd(49,vl,8,3,"ng-template",null,12,d.cd)),2&t){const t=d.Rc(28),i=d.Rc(30),n=d.Rc(32),o=d.Rc(34),a=d.Rc(36),r=d.Rc(42);let s=null,c=null;d.Dc("items",d.wc(1,31,e.loadedViews$))("pinnedViews",d.wc(2,33,e.pinnedViews$))("selectedView",d.wc(3,35,e.selectedView$))("lastCreatedId",d.wc(4,37,e.lastCreatedId$))("createDataViewState",d.wc(5,39,e.createDataViewState$))("isPaidPlan",d.wc(6,41,e.isPaidPlan$))("favorites",d.wc(7,43,e.favorites$))("project",d.wc(8,45,e.project$))("lockPaywallTemplate",d.wc(9,47,e.isFreeOrUnlimitedTeam$)?n:null)("makeDefaultPaywallTemplate",d.wc(10,49,e.isFreeOrUnlimitedTeam$)?a:null)("makePersonalPaywallTemplate",d.wc(11,51,e.isFreeOrUnlimitedTeam$)?o:null)("createPaywallTemplate",r)("templateDropdown",t)("moveDropdown",i)("moveItems",e.moveItems)("isGuest",d.wc(12,53,e.isGuest$))("parentType",d.wc(13,55,e.parentType$))("parent",d.wc(14,57,e.parent$))("layoutType",null==(s=d.wc(15,59,e.user$))?null:s.dashboard)("meUser",d.wc(16,61,e.user$))("canDelete",d.wc(17,63,e.canDelete$))("onlyDeleteIfOwner",d.wc(18,65,e.onlyDeleteIfOwner$))("sidebarCollapsed",d.wc(19,67,e.isSidebarCollapsed$))("spacesBarCollapsed",d.wc(20,69,e.isSpacesBarCollapsed$))("sidebarWidth",d.wc(21,71,e.sidebarWidth$))("spacesBarWidth",d.wc(22,73,e.spacesBarWidth$))("groupViews",e.groupViews)("groupPreference",d.wc(23,75,e.groupPreference$)[null==(c=d.wc(24,77,e.selectedView$))||null==c.parent?null:c.parent.id])("groupingItems",e.groupingItems)("canOnlyCreatePersonalViews",d.wc(25,79,e.canOnlyCreatePersonalViews$))("team",d.wc(26,81,e.team$))}},directives:[$i,qc.a,rt.a,nt.a,st.a,V.a,n.q,Xc.a,Yc.a,Kc.a],pipes:[n.b,se.a],styles:['.cu-view-block__template{display:flex;align-items:center;flex:1 0 0;padding:8px 15px}.cu-view-block__template-text{flex:1 0 0}.cu-view-block__template-load{width:12px;height:14px;fill:#bcc0c7;margin-right:7px}.cu-view-block__template-icon{width:14px;height:14px;flex-shrink:0;margin-right:-5px;margin-left:5px}.cu-view-block__template-icon use{stroke:#bcc0c7}.cu-view-block__wall{background:#e9ebf0;border-radius:4px;padding:25px 50px;width:auto;margin:20px auto 0;text-align:center}.dark-theme .cu-view-block__wall{background:#2b343b}.cu-view-block__wall_no-note{padding:15px 20px}.cu-view-block__wall-container{display:flex;align-items:center;justify-content:center}.cu-view-block__wall-note{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:16px;line-height:20px;color:#292d34;margin-bottom:10px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-view-block__wall-note{font-family:var(--global-font-support)}}.dark-theme .cu-view-block__wall-note{color:#d5d6d7}.cu-view-block__wall-link{color:#7b68ee;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-top:-10px;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-view-block__wall-link{color:var(--theme-main-color)}}.cu-view-block__wall-link:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-view-block__wall-link:hover{color:var(--theme-main-color-dark)}}.cu-view-block__wall-text{color:#000;font:500 13px/1 Gotham Pro,Proxima Nova,arial,serif;margin-top:-10px}.dark-theme .cu-view-block__wall-text{color:#d5d6d7}.cu-view-block__wall-by{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;display:flex;align-items:center;justify-content:center;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-view-block__wall-by{font-family:var(--global-font-support)}}.cu-view-block__wall-by-name{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;margin:0 4px;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-view-block__wall-by-name{font-family:var(--global-font-support)}}.cu-view-block__note{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:100%;min-height:60px;border-radius:4px;border:1px solid #d8d8d8;resize:none;font:400 14px/18px Gotham Pro,Proxima Nova,arial,serif;background:transparent;padding:10px;margin-bottom:20px;color:#343434}.cu-view-block__note::-webkit-input-placeholder{color:rgba(0,0,0,.2);font-size:"initial"}.cu-view-block__note::-moz-placeholder{color:rgba(0,0,0,.2);opacity:1;font-size:"initial"}.cu-view-block__note:-ms-input-placeholder{color:rgba(0,0,0,.2);font-size:"initial"}.cu-view-block__note:-moz-placeholder{color:rgba(0,0,0,.2);opacity:1;font-size:"initial"}.dark-theme .cu-view-block__note{color:#d5d6d7;border-color:#1e272e;background:#2b343b}.dark-theme .cu-view-block__note::-webkit-input-placeholder{color:hsla(0,0%,100%,.4);font-size:"initial"}.dark-theme .cu-view-block__note::-moz-placeholder{color:hsla(0,0%,100%,.4);opacity:1;font-size:"initial"}.dark-theme .cu-view-block__note:-ms-input-placeholder{color:hsla(0,0%,100%,.4);font-size:"initial"}.dark-theme .cu-view-block__note:-moz-placeholder{color:hsla(0,0%,100%,.4);opacity:1;font-size:"initial"}.cu-view-block__icon_freeze{width:30px;height:30px;fill:#7c828d}'],encapsulation:2,changeDetection:0}),t})();var _l=i("7YP0"),wl=i("S8g8"),yl=i("3vfw"),kl=i("nYR2"),xl=i("WoFS"),Sl=i("7kSr");const Tl=["dropdown"];function Cl(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-checkbox",20),d.qc("onChange",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).update(i)}),d.vc(1,"async"),d.Xb(2,"cu-task-recent-item",21),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(3);d.Dc("checked",d.wc(1,3,i.selectedTasksMap$)[null==t?null:t.id]),d.Ib(2),d.Dc("task",t)("showGroups",!1)}}function Dl(t,e){1&t&&(d.ac(0),d.gc(1,22),d.Zb())}function Il(t,e){1&t&&(d.ac(0),d.gc(1,23),d.Zb())}function Pl(t,e){if(1&t&&d.bd(0,Il,2,0,"ng-container",17),2&t){d.uc();const t=d.Rc(14),e=d.uc(2);d.Dc("ngIf",e.nextSprint)("ngIfElse",t)}}function Ml(t,e){1&t&&(d.ac(0),d.gc(1,24),d.Zb())}function Ol(t,e){if(1&t){const t=d.dc();d.cc(0,"div",11),d.ac(1),d.gc(2,12),d.Zb(),d.cc(3,"div",13),d.bd(4,Cl,3,5,"cu-checkbox",14),d.bc(),d.cc(5,"div",15),d.cc(6,"button",16),d.qc("click",function(){return d.Uc(t),d.uc(2).move()}),d.vc(7,"async"),d.vc(8,"async"),d.bd(9,Dl,2,0,"ng-container",17),d.vc(10,"async"),d.bd(11,Pl,1,2,"ng-template",null,18,d.cd),d.bd(13,Ml,2,0,"ng-template",null,19,d.cd),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.Rc(12),e=d.uc(2);d.Ib(2),d.kc(null==e.unfinishedTasks?null:e.unfinishedTasks.length),d.hc(2),d.Ib(2),d.Dc("ngForOf",e.unfinishedTasks)("ngForTrackBy",e.trackById),d.Ib(1),d.Dc("cuTooltip",e.sprintStatus!==e.SprintStatus.DONE?e.markSprintDoneText:null),d.Ib(1),d.Dc("disabled",e.sprintStatus!==e.SprintStatus.DONE||d.wc(7,7,e.notReadyToMove$)||d.wc(8,9,e.loading$)),d.Ib(3),d.Dc("ngIf",d.wc(10,11,e.loading$))("ngIfElse",t)}}function $l(t,e){1&t&&d.Xb(0,"cu-loader")}function jl(t,e){if(1&t&&(d.cc(0,"div",8),d.bd(1,Ol,15,13,"div",9),d.bd(2,$l,1,0,"ng-template",null,10,d.cd),d.bc()),2&t){const t=d.Rc(3),e=d.uc();d.Ib(1),d.Dc("ngIf",null==e.unfinishedTasks?null:e.unfinishedTasks.length)("ngIfElse",t)}}let Ll=(()=>{class t{constructor(t,e){this.dataService=t,this.store=e,this.selectedTasksMap$=new Co.a({}),this.loading$=new Co.a(!1),this.notReadyToMove$=this.selectedTasksMap$.pipe(Object(Qt.a)(t=>0===Object.keys(t).filter(e=>t[e]).length)),this.SprintStatus=xo.d,this.onFetchUnfinished=new d.o,this.onMoveTasks=new d.o,this.onMoveToAdditionalList=new d.o,this.trackById=Object(j.d)("id"),this.markSprintDoneText=$localize`:@@cu-sprint-finish__tooltip-msg_mark-sprint-done:Mark sprint as done before moving tasks`}ngOnInit(){}ngOnChanges(t){if(t.unfinishedTasks){const t={};(this.unfinishedTasks||[]).forEach(e=>{!1!==this.selectedTasksMap$.value[e.id]&&(t[e.id]=!0)}),this.selectedTasksMap$.next(t)}}fetch(){this.onFetchUnfinished.emit({subcategoryId:this.subcategoryId,categoryId:this.categoryId,projectId:this.projectId})}update(t){this.selectedTasksMap$.next(Object.assign(Object.assign({},this.selectedTasksMap$.value),{[t.id]:!this.selectedTasksMap$.value[t.id]}))}move(){const t=[],e=Object.entries(this.selectedTasksMap$.value).map(([t,e])=>e?this.unfinishedTasks.find(e=>e.id===t):null).filter(Boolean),i=[];e.forEach(e=>{e.other_subcategories&&e.other_subcategories.find(t=>t.id===this.subcategoryId)?i.push(e):t.push(e)}),this.nextSprint?(t.length&&this.onMoveTasks.emit({tasks:t,nextSprint:this.nextSprint}),i.length&&this.onMoveToAdditionalList.emit({tasks:i,additionalList:this.nextSprint,currentList:this.subcategoryId}),this.dropdown.close()):this.newSprint&&(this.loading$.next(!0),this.dataService.updateCategorySprints(this.categoryId,{subcategories:[this.newSprint]}).pipe(Object(kl.a)(()=>this.loading$.next(!1))).subscribe(({category:e})=>{this.store.dispatch(new Y.Si(e));const n=e.subcategories.find(t=>t.sprint_index===this.sprintIndex+1);n&&(t.length&&this.onMoveTasks.emit({tasks:t,nextSprint:n}),i.length&&this.onMoveToAdditionalList.emit({tasks:i,additionalList:n,currentList:this.subcategoryId}),this.dropdown.close())}))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(ho.a),d.Wb(K.Store))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-sprint-finish"]],viewQuery:function(t,e){if(1&t&&d.jd(Tl,3),2&t){let t;d.Qc(t=d.rc())&&(e.dropdown=t.first)}},inputs:{numTasks:"numTasks",subcategoryId:"subcategoryId",categoryId:"categoryId",projectId:"projectId",unfinishedTasks:"unfinishedTasks",sprintStatus:"sprintStatus",nextSprint:"nextSprint",newSprint:"newSprint",sprintIndex:"sprintIndex"},outputs:{onFetchUnfinished:"onFetchUnfinished",onMoveTasks:"onMoveTasks",onMoveToAdditionalList:"onMoveToAdditionalList"},features:[d.Gb],decls:9,vars:3,consts:function(){let t,e,i,n,o,a,r;return t=$localize`:@@cu-sprint-finish__sprint-task-count␟ae04da5dec6730c6a93232dc33c5457cb595bf49␟6953355246494363951: This sprint has ${"\ufffd0\ufffd"}:INTERPOLATION: `,e=$localize`:␟11b7afb284be3ca2f1ad034fc5a05bdfd6df960c␟2997060973080862124:{VAR_PLURAL, plural, =1 {task} other {tasks}}`,e=d.lc(e,{VAR_PLURAL:"\ufffd0\ufffd"}),i=$localize`:@@cu-sprint-finish__unfinished-tasks-count␟4ed2bb0ecdfeef53b1e3ce0d4bec8820be8a5450␟8598945475571354771:unfinished ${e}:ICU:`,n=$localize`:@@cu-sprint-finish__unfinished-tasks-count-1␟0a1ffca08d8a52d06a4ed5cf66e865f865417df5␟725984361921916572: ${"\ufffd0\ufffd"}:INTERPOLATION: UNFINISHED TASKS `,o=$localize`:@@common_creating␟7ac78ecbb9c14b6a423829e71bf78bc945a40d34␟4392937809790226797:Creating...`,a=$localize`:@@cu-sprint-finish__btn-txt_move-tasks-to-next-sprint␟15d502e87cd1cf2309295e655105db9f30b2de1e␟2633138345503632336:Move tasks to next sprint`,r=$localize`:@@cu-sprint-finish__btn-txt_create-sprint-and-move-tasks␟d8c828df9f79d4e5c7f7b4981b71acaea7f02c1d␟5784587841392742639:Create next sprint and move tasks`,[[1,"cu-sprint-finish"],t,["cuDropdown","",3,"dropdownCloseOnInsideClick"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-sprint-finish__tasks",3,"click"],i,["class","cu-sprint-finish__unfinished cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],[1,"cu-sprint-finish__unfinished","cu-dropdown__menu_overflow-hidden"],["class","cu-sprint-finish__unfinished-title",4,"ngIf","ngIfElse"],["tasksLoading",""],[1,"cu-sprint-finish__unfinished-title"],n,[1,"cu-sprint-finish__unfinished-tasks"],[3,"checked","onChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-sprint-finish__button",3,"cuTooltip"],[1,"cu-btn","cu-btn_sm",3,"disabled","click"],[4,"ngIf","ngIfElse"],["nextSprintTmpl",""],["nextSprintCreateTmpl",""],[3,"checked","onChange"],[3,"task","showGroups"],o,a,r]},template:function(t,e){1&t&&(d.cc(0,"div",0),d.ac(1),d.gc(2,1),d.Zb(),d.cc(3,"div",2,3),d.cc(5,"div",4),d.cc(6,"span",5),d.qc("click",function(){return e.fetch()}),d.gc(7,6),d.bc(),d.bc(),d.bd(8,jl,4,2,"div",7),d.bc(),d.bc()),2&t&&(d.Ib(2),d.kc(e.numTasks),d.hc(2),d.Ib(1),d.Dc("dropdownCloseOnInsideClick",!1),d.Ib(4),d.kc(e.numTasks),d.hc(7))},directives:[tt.b,et.a,it.a,n.q,n.p,ot.a,xl.a,Sl.a,Fo.a],pipes:[n.b],styles:['.cu-sprint-finish{display:flex;align-items:center;justify-content:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;height:32px;background:#fd71af;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-sprint-finish{font-family:var(--global-font-support)}}.cu-sprint-finish__tasks{border-bottom:1px dashed #fff;margin-left:4px;color:#fff;cursor:pointer}.cu-sprint-finish__button{margin-top:15px}.cu-sprint-finish__button .cu-btn{width:100%}.cu-sprint-finish__unfinished{padding:16px;width:350px}.cu-sprint-finish__unfinished-tasks{width:100%;margin-top:15px}.cu-sprint-finish__unfinished-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;color:#7c828d;display:block}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-sprint-finish__unfinished-title{font-family:var(--global-font-support)}}.cu-sprint-finish__unfinished .cu-task-recent-item{padding:0}.cu-sprint-finish__unfinished .cu-task-recent-item:before{display:none!important}.cu-sprint-finish__unfinished .cu-checkbox{margin-bottom:10px}.cu-sprint-finish__unfinished .cu-checkbox__label{overflow:hidden}'],encapsulation:2,changeDetection:0}),t})();var El=i("wL+j"),Nl=i("ayLl"),Al=i("Hf40"),Vl=i("sWMA"),zl=i("JtyI"),Fl=i("uK3R"),Bl=i("02gd"),Rl=i("yfGu"),Ul=i("Qfhi"),Gl=i("5b//"),Hl=i("1rLx"),Wl=i("HHlo"),ql=i("Ev0y"),Xl=i("rsiN"),Yl=i("JLDm"),Kl=i("b+fk");const Zl=["locationCFDropdown"];function Jl(t,e){if(1&t&&(d.ac(0,13),d.dd(1),d.Zb()),2&t){const t=e.$implicit;d.Ib(1),d.fd(" ",t.name," ")}}function Ql(t,e){if(1&t&&(d.ac(0),d.bd(1,Jl,2,1,"ng-container",12),d.vc(2,"async"),d.Zb()),2&t){const t=d.uc(2);d.Ib(1),d.Dc("ngForOf",d.wc(2,2,t.selectedField$))("ngForTrackBy",t.trackById)}}function tu(t,e){1&t&&(d.ac(0),d.gc(1,14),d.Zb())}function eu(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",2),d.qc("click",function(){return d.Uc(t),d.uc().openLocationFieldLists()}),d.cc(2,"div",3),d.Xb(3,"div",4),d.cc(4,"div",5),d.bd(5,Ql,3,4,"ng-container",0),d.vc(6,"async"),d.bd(7,tu,2,0,"ng-container",0),d.vc(8,"async"),d.bc(),d.bc(),d.cc(9,"cu-select-or-create-location-cf-dropdown",6,7),d.qc("onSelected",function(e){return d.Uc(t),d.uc().selectCustomField(e)})("onCreateLocation",function(e){return d.Uc(t),d.uc().createNewLocation(e)}),d.vc(11,"async"),d.vc(12,"async"),d.bc(),d.bc(),d.cc(13,"cu-dropdown-list",8),d.qc("onSelect",function(e){return d.Uc(t),d.uc().setColorPref(e.id)}),d.vc(14,"async"),d.cc(15,"div",9),d.Xb(16,"div",10),d.cc(17,"div",5),d.gc(18,11),d.bc(),d.bc(),d.bc(),d.Zb()}if(2&t){const t=d.uc(),e=d.Rc(2);let i=null,n=null;d.Ib(5),d.Dc("ngIf",null==(i=d.wc(6,11,t.selectedField$))?null:i.length),d.Ib(2),d.Dc("ngIf",!d.wc(8,13,t.selectedField$).length),d.Ib(2),d.Dc("locationFields",d.wc(11,15,t.locationFields$))("selectedFields",null==(n=d.wc(12,17,t.settings$))?null:n.field_ids),d.Ib(4),d.Dc("title",t.colorSchemeText)("items",d.wc(14,19,t.items$))("autoClose",!0)("dropdownDisabled",null==t.view?null:t.view.locked)("footerTemplate",e)("menuContainerModifier","cu-map-preferences__btn-dropdown-menu"),d.Ib(2),d.Dc("cuTooltip",null!=t.view&&t.view.locked?t.frozenViewToolTip:t.colorSchemeText)}}function iu(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-color-picker-panel",15),d.qc("selectedColorChange",function(e){return d.Uc(t),d.uc().setColorPref(e)}),d.vc(1,"async"),d.bc()}if(2&t){const t=d.uc();d.Dc("presetColors",t.presetColors)("onlyPickFromPresets",!0)("selectedColor",d.wc(1,4,t.selectedColor$))("inline",!0)}}let nu=(()=>{class t{constructor(t,e,i,n,o,a){this.mapViewFacade=t,this.sharedData=e,this.customFieldsService=i,this.store=n,this.mapStore=o,this.commonStringsService=a,this.shareView=new d.o,this.presetColors=Gl.b,this.trackById=Object(j.d)("id"),this.locationFields$=this.mapViewFacade.locationCustomFields$,this.settings$=this.mapViewFacade.settings$,this.entity$=this.store.select(z.getCurrentHierarchyEntity),this.selectedField$=Object(ii.a)([this.mapViewFacade.locationCustomFields$,this.settings$]).pipe(Object(Qt.a)(([t,e])=>e.field_ids?t.filter(t=>e.field_ids.includes(t.id)):[])),this.selectedColor$=this.mapViewFacade.colorSetting$,this.items$=Object(ii.a)([this.selectedColor$,this.mapStore.select(ql.f)]).pipe(Object(Qt.a)(([t,e])=>[{id:Hl.a.Default,title:$localize`:@@common_default:Default`,checkType:"check",checked:t===Hl.a.Default},{id:Hl.a.Priority,title:this.commonStringsService.priorityText,checkType:"check",checked:t===Hl.a.Priority},{id:Hl.a.Status,title:$localize`:@@common_status:Status`,checkType:"check",checked:t===Hl.a.Status},{id:"custom field",title:this.commonStringsService.customFieldsText,checkType:"check",tooltip:e.length?null:$localize`:@@common_location-no-dropdown-fields-with-colors:The location you're viewing doesn't have any dropdown fields with colors`,disabled:!e.length,checked:t&&"string"==typeof t&&t.startsWith("cf_"),subitems:e.map(e=>({field:e,id:"cf_"+e.id,title:e.name,checked:"cf_"+e.id===t,checkType:"check"}))}])),this.destroy$=new B.a,this.frozenViewToolTip=$localize`:@@common_unprotect-view-to-make-changes:Unprotect this view first to make changes`,this.colorSchemeText=$localize`:@@common_color-scheme:Color Scheme`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setColorPref(t){this.mapViewFacade.update({color:"string"==typeof t?"#fff"===t?this.sharedData.userData.value.user.theme_color:t:t.id},!1,!0)}selectCustomField(t){this.mapViewFacade.updateFieldIds({field_ids:[t.id]},!0),this.locationCFDropdown.close()}openLocationFieldLists(){this.locationCFDropdown.open()}createNewLocation(t){let e;return this.view.parent.type===$.e.Project?e={project_id:this.view.parent.id}:this.view.parent.type===$.e.Category&&(e={category_id:this.view.parent.id}),e={subcategory_id:this.view.parent.id},this.customFieldsService.createEntityField(Object.assign({name:t,type:gr.a.Location},e)).pipe(Object(ee.a)(this.entity$),Object(Ac.a)(([t,e])=>{this.store.dispatch(Object(Wl.c)({field:t,entity:e}))}),Object(Qt.a)(([t])=>t),Object(A.a)(this.destroy$)).subscribe(t=>{this.mapViewFacade.updateFieldIds({field_ids:[t.id]},!1,!1),this.mapViewFacade.refresh(),this.locationCFDropdown.close()})}saveDefaultView(){this.mapViewFacade.triggerSaveDefaultView()}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Xl.a),d.Wb(Jn.a),d.Wb(Kr.a),d.Wb(K.Store),d.Wb(K.Store),d.Wb(J.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-map-preferences"]],viewQuery:function(t,e){if(1&t&&d.jd(Zl,1),2&t){let t;d.Qc(t=d.rc())&&(e.locationCFDropdown=t.first)}},hostAttrs:[1,"cu-map-preferences"],hostVars:2,hostBindings:function(t,e){2&t&&d.Ob("cu-map-preferences_public",e.isPublic)},inputs:{view:"view",team:"team",user:"user",canShareView:"canShareView",isPublic:"isPublic"},outputs:{shareView:"shareView"},decls:3,vars:1,consts:function(){let t,e;return t=$localize`:@@cu-map-preferences_dropdown-placeholder_color␟cf0fed298e74e8d77492957267eaa79d059d3744␟549965514534071566: Color `,e=$localize`:@@cu-map-preferences__btn-txt_select-location␟8038af68913533594248c733cfb4d8ae7c33fcdc␟1752496350813064987: Select Location `,[[4,"ngIf"],["colorFooter",""],[1,"cu-map-preferences__location-fields",3,"click"],[1,"cu-map-preferences__btn"],["icon","field-location",1,"cu-map-preferences__btn-icon","cu-map-preferences__btn-icon_location"],[1,"cu-map-preferences__btn-label"],[3,"locationFields","selectedFields","onSelected","onCreateLocation"],["locationCFDropdown",""],[1,"cu-map-preferences__btn",3,"title","items","autoClose","dropdownDisabled","footerTemplate","menuContainerModifier","onSelect"],[1,"cu-map-preferences__btn-container",3,"cuTooltip"],["icon","view-block-color",1,"cu-map-preferences__btn-icon"],t,["class","",4,"ngFor","ngForOf","ngForTrackBy"],[1,""],e,[1,"cu-map-preferences__color-picker",3,"presetColors","onlyPickFromPresets","selectedColor","inline","selectedColorChange"]]},template:function(t,e){1&t&&(d.bd(0,eu,19,21,"ng-container",0),d.bd(1,iu,2,6,"ng-template",null,1,d.cd)),2&t&&d.Dc("ngIf",!e.isPublic)},directives:[n.q,nt.a,Yl.a,rt.a,ot.a,n.p,Kl.a],pipes:[n.b],styles:['.cu-map-preferences,.cu-map-preferences__btn{display:flex;align-items:center}.cu-map-preferences__btn{justify-content:center;position:relative;border-radius:4px;cursor:pointer;margin-right:10px;overflow:hidden;padding:0 6px;height:24px}.cu-map-preferences__btn.cu-dropdown-list_opened:before,.cu-map-preferences__btn.cu-dropdown_open:before,.cu-map-preferences__btn:hover:before{opacity:1}.cu-map-preferences__btn-border{border-radius:3px;border:1px solid #d8dce2}.contrast_high .cu-map-preferences__btn-border{border-color:#b9bec7}.dark-theme .cu-map-preferences__btn-border{border-color:#384047}.cu-map-preferences__btn-dropdown-menu{width:200px}.cu-map-preferences__btn-container{display:flex;align-items:center;justify-content:center}.cu-map-preferences__btn:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:100%;height:100%;border-radius:6px;left:0;opacity:0;background-color:#f2f2f2}.dark-theme .cu-map-preferences__btn:before{background-color:#1e272e}.cu-map-preferences__btn-icon{position:relative;width:9px;height:10px;margin-right:5px;fill:#7c828d}.dark-theme .cu-map-preferences__btn-icon{fill:#7c828d}.cu-map-preferences__btn-icon_location{width:11px;height:14px}.cu2-views-bar_v6 .cu-map-preferences__btn-icon{fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-map-preferences__btn-icon{fill:#abaeb0}.cu-map-preferences__btn-label{position:relative;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;color:#82868d}.dark-theme .cu-map-preferences__btn-label{color:#abaeb0}.cu2-views-bar_v6 .cu-map-preferences__btn-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar_v6 .cu-map-preferences__btn-label{color:#abaeb0}.cu2-views-bar_v6 .cu-map-preferences__btn-label_unsaved{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-map-preferences__btn-label_unsaved{color:var(--theme-main-color)}}.cu-map-preferences__color-picker{display:block;margin-top:5px;padding:10px;border-top:1px solid #e9ebf0}.dark-theme .cu-map-preferences__color-picker{border-top-color:#1e272e}'],encapsulation:2,changeDetection:0}),t})();var ou=i("XNeh"),au=i("LoqN"),ru=i("y83z"),su=i("e3gV");let cu=(()=>{class t{constructor(){this.dayText=$localize`:@@common_time-unit--day:Day`,this.monthText=$localize`:@@common_time-unit--month:Month`,this.oneWeekText=$localize`:@@common_time-length--1-week:1 week`,this.twoWeeksText=$localize`:@@common_time-length--2-weeks:2 weeks`,this.weekText=$localize`:@@common_time-unit--week:Week`,this.workloadForOtherGroupsPaywallTitleText=$localize`:@@paywall_title--other-group-workload:Workload for other groups`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Sb({token:t,factory:t.\u0275fac}),t})();var lu=i("wNhb"),uu=i("VhLi");const du=function(t,e){return{id:"1-week",title:t,checkType:"check",checked:e}},hu=function(t,e){return{id:"2-weeks",title:t,checkType:"check",checked:e}};function pu(t,e){if(1&t){const t=d.dc();d.cc(0,"div"),d.cc(1,"cu-dropdown-list-item",19),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).setDisplayWeeks(1)}),d.vc(2,"async"),d.bc(),d.cc(3,"cu-dropdown-list-item",19),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).setDisplayWeeks(2)}),d.vc(4,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.Ib(1),d.Dc("item",d.Ic(6,du,t.timelineViewsBarSettingsService.oneWeekText,1===d.wc(2,2,t.displayWeeks$))),d.Ib(2),d.Dc("item",d.Ic(9,hu,t.timelineViewsBarSettingsService.twoWeeksText,2===d.wc(4,4,t.displayWeeks$)))}}function fu(t,e){if(1&t){const t=d.dc();d.cc(0,"div",6),d.cc(1,"div",7),d.dd(2),d.vc(3,"momentDate"),d.vc(4,"async"),d.vc(5,"momentDate"),d.vc(6,"async"),d.bc(),d.cc(7,"div",8),d.cc(8,"div",9),d.qc("click",function(){return d.Uc(t),d.uc().previousDateRange()}),d.Xb(9,"div",10),d.bc(),d.bc(),d.cc(10,"div",8),d.cc(11,"div",11),d.qc("click",function(){return d.Uc(t),d.uc().nextDateRange()}),d.Xb(12,"div",10),d.bc(),d.bc(),d.cc(13,"div",12),d.qc("click",function(){return d.Uc(t),d.uc().today()}),d.cc(14,"div",13),d.gc(15,14),d.bc(),d.bc(),d.cc(16,"div",15),d.vc(17,"async"),d.vc(18,"async"),d.cc(19,"div",16),d.dd(20),d.vc(21,"async"),d.Xb(22,"div",17),d.vc(23,"async"),d.bc(),d.bd(24,pu,5,12,"div",18),d.bc(),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null,o=null;d.Ib(2),d.gd(" ",d.xc(3,6,null==(e=d.wc(4,9,t.viewDateRange$))?null:e.start,"MMM D")," - ",d.xc(5,11,null==(e=d.wc(6,14,t.viewDateRange$))?null:e.end,"MMM D")," "),d.Ib(14),d.Dc("dropdownDisabled",null==(i=d.wc(17,16,t.dataView$))?null:i.locked)("cuTooltip",null!=(n=d.wc(18,18,t.dataView$))&&n.locked?t.commonStringsService.unprotectThisViewChangesText:""),d.Ib(4),d.fd(" ",d.wc(21,20,t.displayWeeksText$)," "),d.Ib(2),d.Dc("icon",(null==(o=d.wc(23,22,t.user$))?null:o.dashboard)===t.LayoutVersion.Six?"cu2-caret-down":"angle-right-no-padding")}}function gu(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",20),2&t){const t=d.uc();d.Dc("title",t.timelineViewsBarSettingsService.workloadForOtherGroupsPaywallTitleText)("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("amplitudeLabel","Workload for Other Groups")}}function mu(t,e){1&t&&(d.ac(0),d.gc(1,26),d.Zb())}function vu(t,e){1&t&&(d.ac(0),d.gc(1,27),d.Zb())}function bu(t,e){1&t&&(d.ac(0),d.gc(1,28),d.Zb())}const _u=function(t,e){return{id:"day",title:t,checkType:"check",checked:e}},wu=function(t,e){return{id:"week",title:t,checkType:"check",checked:e}},yu=function(t,e){return{id:"month",title:t,checkType:"check",checked:e}};function ku(t,e){if(1&t){const t=d.dc();d.cc(0,"div"),d.cc(1,"cu-dropdown-list-item",19),d.qc("onSelect",function(){return d.Uc(t),d.uc(3).setScaleAndColumnSize("month","medium")}),d.vc(2,"async"),d.vc(3,"async"),d.bc(),d.cc(4,"cu-dropdown-list-item",19),d.qc("onSelect",function(){return d.Uc(t),d.uc(3).setScaleAndColumnSize("week","medium")}),d.vc(5,"async"),d.bc(),d.cc(6,"cu-dropdown-list-item",19),d.qc("onSelect",function(){return d.Uc(t),d.uc(3).setScaleAndColumnSize("month","small")}),d.vc(7,"async"),d.vc(8,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc(3);d.Ib(1),d.Dc("item",d.Ic(13,_u,t.timelineViewsBarSettingsService.dayText,"month"===d.wc(2,3,t.scale$)&&"medium"===d.wc(3,5,t.columnSize$))),d.Ib(3),d.Dc("item",d.Ic(16,wu,t.timelineViewsBarSettingsService.weekText,"week"===d.wc(5,7,t.scale$))),d.Ib(2),d.Dc("item",d.Ic(19,yu,t.timelineViewsBarSettingsService.monthText,"month"===d.wc(7,9,t.scale$)&&"small"===d.wc(8,11,t.columnSize$)))}}function xu(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"button",23),d.qc("click",function(){return d.Uc(t),d.uc(2).zoomOut()}),d.vc(2,"async"),d.Xb(3,"div",24),d.bc(),d.cc(4,"button",25),d.qc("click",function(){return d.Uc(t),d.uc(2).zoomIn()}),d.vc(5,"async"),d.Xb(6,"div",24),d.bc(),d.cc(7,"div",15),d.vc(8,"async"),d.vc(9,"async"),d.cc(10,"div",16),d.bd(11,mu,2,0,"ng-container",22),d.vc(12,"async"),d.vc(13,"async"),d.vc(14,"async"),d.bd(15,vu,2,0,"ng-container",22),d.vc(16,"async"),d.bd(17,bu,2,0,"ng-container",22),d.vc(18,"async"),d.vc(19,"async"),d.Xb(20,"div",17),d.vc(21,"async"),d.bc(),d.bd(22,ku,9,22,"div",18),d.bc(),d.Zb()}if(2&t){const t=d.uc(2);let e=null,i=null,n=null;d.Ib(1),d.Dc("disabled","small"===d.wc(2,10,t.columnSize$)),d.Ib(2),d.Dc("icon","cu2-minus-2"),d.Ib(1),d.Dc("disabled","large"===d.wc(5,12,t.columnSize$)),d.Ib(2),d.Dc("icon","cu2-plus-3"),d.Ib(1),d.Dc("dropdownDisabled",null==(e=d.wc(8,14,t.dataView$))?null:e.locked)("cuTooltip",null!=(i=d.wc(9,16,t.dataView$))&&i.locked?t.commonStringsService.unprotectThisViewChangesText:""),d.Ib(4),d.Dc("ngIf","month"===d.wc(12,18,t.scale$)&&("medium"===d.wc(13,20,t.columnSize$)||"large"===d.wc(14,22,t.columnSize$))),d.Ib(4),d.Dc("ngIf","week"===d.wc(16,24,t.scale$)),d.Ib(2),d.Dc("ngIf","month"===d.wc(18,26,t.scale$)&&"small"===d.wc(19,28,t.columnSize$)),d.Ib(3),d.Dc("icon",(null==(n=d.wc(21,30,t.user$))?null:n.dashboard)===t.LayoutVersion.Six?"cu2-caret-down":"angle-right-no-padding")}}function Su(t,e){if(1&t){const t=d.dc();d.cc(0,"div",6),d.cc(1,"div",12),d.qc("click",function(){return d.Uc(t),d.uc().today()}),d.cc(2,"div",13),d.gc(3,21),d.bc(),d.bc(),d.bd(4,xu,23,32,"ng-container",22),d.bc()}if(2&t){const t=d.uc();d.Ib(4),d.Dc("ngIf",!t.isSharingApp)}}function Tu(t,e){if(1&t&&d.Xb(0,"cu-toggle-switch",36),2&t){d.uc();const t=d.Rc(4);d.uc();const e=d.Rc(3);d.Dc("updateImmediately",!1)("checked",!1)("disabled",!0)("cuPopover",e)("outsideClick",!0)("hostElement",t)}}function Cu(t,e){if(1&t&&(d.ac(0),d.Xb(1,"div",37),d.cc(2,"div",38),d.Xb(3,"div",39),d.vc(4,"async"),d.vc(5,"async"),d.Xb(6,"div",40),d.bc(),d.Zb()),2&t){const t=d.uc(2);d.Ib(3),d.Mb("cu-timeline-views-bar-settings__workload-toggle-icon cu-timeline-views-bar-settings__workload-toggle-icon_",d.wc(4,4,t.workloadSelectedItem$).id," icon"),d.Dc("icon",d.wc(5,6,t.workloadSelectedItem$).icon)}}const Du=function(){return["bottom-right","auto"]};function Iu(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",29),d.qc("onSelect",function(e){return d.Uc(t),d.uc().updateWorkloadSettings(e.customPayload)})("onCheck",function(e){return d.Uc(t),d.uc().updateWorkloadSettings(e.customPayload)}),d.vc(1,"async"),d.vc(2,"async"),d.cc(3,"div",30,31),d.Xb(5,"div",32),d.cc(6,"span",33),d.gc(7,34),d.bc(),d.bd(8,Tu,1,6,"cu-toggle-switch",35),d.vc(9,"async"),d.bd(10,Cu,7,8,"ng-container",22),d.vc(11,"async"),d.vc(12,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc();d.Dc("items",d.wc(1,5,t.workloadMenuItems$))("dropdownPlacement",d.Gc(15,Du))("dropdownDisabled",d.wc(2,7,t.showWorkloadPaywall$)),d.Ib(8),d.Dc("ngIf",d.wc(9,9,t.showWorkloadPaywall$)),d.Ib(2),d.Dc("ngIf",d.wc(11,11,t.workloadSelectedItem$)&&!d.wc(12,13,t.showWorkloadPaywall$))}}function Pu(t,e){}function Mu(t,e){}function Ou(t,e){}function $u(t,e){}function ju(t,e){if(1&t&&d.Xb(0,"div",44),2&t){const t=d.uc(2);d.Dc("icon","cu2-ellipsis")("cuTooltip",t.commonStringsService.viewSettingsText)}}function Lu(t,e){1&t&&(d.ac(0),d.Xb(1,"div",45),d.cc(2,"div",46),d.gc(3,47),d.bc(),d.Zb())}function Eu(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",41,42),d.qc("onSelect",function(e){d.Uc(t);const i=d.Rc(1);return d.uc().menuItemSelected(e,i)})("onCheck",function(e){d.Uc(t);const i=d.Rc(1);return d.uc().menuItemSelected(e,i)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,ju,1,2,"div",43),d.vc(6,"async"),d.bd(7,Lu,4,0,"ng-container",22),d.vc(8,"async"),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null,o=null;d.Ob("cu2-views-bar__btn_label",(null==(e=d.wc(2,8,t.user$))?null:e.dashboard)===t.LayoutVersion.Six),d.Dc("items",d.wc(3,10,t.settingsMenuItems$))("dropdownPlacement",d.Gc(18,Du))("autoClose",!1)("toggleModifier",(null==(i=d.wc(4,12,t.user$))?null:i.dashboard)===t.LayoutVersion.Six?"cu2-views-bar__btn-dropdown-list-toggle":null),d.Ib(5),d.Dc("ngIf",(null==(n=d.wc(6,14,t.user$))?null:n.dashboard)!==t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==(o=d.wc(8,16,t.user$))?null:o.dashboard)===t.LayoutVersion.Six)}}const Nu=[[["","timelineViewViewOptions",""]],[["","timelineViewFilter",""]]],Au=["[timelineViewViewOptions]","[timelineViewFilter]"];let Vu=(()=>{class t{constructor(t,e,i,n){this.commonStringsService=t,this.store=e,this.timelineViewsBarSettingsService=i,this.paywallCommonStringsService=n,this.isSharingApp=Mr.k,this.viewDateRange$=this.store.select(ru.O),this.colorByCustomFields$=this.store.select(ru.c),this.showWorkloadPaywall$=this.store.select(ru.cb),this.user$=this.store.select(z.getUser),this.team$=this.store.select(z.getTeam),this.scale$=this.store.select(ru.l),this.columnSize$=this.store.select(ru.d),this.displayWeeks$=this.store.select(ru.e),this.displayWeeksText$=this.displayWeeks$.pipe(Object(Qt.a)(t=>t>1?$localize`:@@cu-timeline-views-bar-settings__week-display_many:${t} weeks`:$localize`:@@cu-timeline-views-bar-settings__week-display:${t} week`),Object(te.a)()),this.isWorkload$=this.store.select(X.qb).pipe(Object(Qt.a)(t=>t&&t.viewType===$.i.Workload)),this.dataView$=this.store.select(X.qb).pipe(Object(Vi.a)(t=>Boolean(t&&(t.timelineSettings||t.workloadSettings)))),this.workloadMenuItems$=Object(ii.a)([this.store.select(ru.ab),this.dataView$,this.store.select(ru.Y),this.store.select(z.getProject),Object(ii.a)([this.store.select(Object(ru.k)("time_estimates")),this.store.select(Object(ru.k)("points")),this.store.select(Object(ru.k)("custom_fields"))])]).pipe(Object(Qt.a)(([t,e,i,n,[o,a,r]])=>e.workloadSettings?[{id:"workload-header",type:ne.a.Header,title:$localize`:@@cu-timeline-views-bar-settings__title_workload-settings:Workload settings`},o||n?{id:"time",icon:"cu2-hourglass-2",title:$localize`:@@common_time:Time`,checked:"time_estimate"===i,checkType:"check",customPayload:{capacity:{type:"time_estimate",customFieldId:null}},disabled:!o,tooltip:o?null:$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_clickapp-turned-off-on-the-space:The ClickApp is turned off on the Space`}:null,{id:"tasks",icon:"cu2-check-square",title:"Tasks",checked:"tasks"===i,checkType:"check",customPayload:{capacity:{type:"tasks",customFieldId:null}}},a||n?{id:"points",icon:"cu2-points-clickapp",title:$localize`:@@cu-timeline-views-bar-settings__title_points-clickapp:Points (ClickApp)`,checked:"points"===i,checkType:"check",customPayload:{capacity:{type:"points",customFieldId:null}},disabled:!a,tooltip:a?null:$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_clickapp-turned-off-on-the-space:The ClickApp is turned off on the Space`}:null,r||n?{id:"custom-field",icon:"cu2-custom-field",title:"Custom field",checked:"custom_field"===i,disabled:!t||0===t.length||!r,tooltip:r?t&&0!==t.length?null:$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_no-compatible-cf-current-level:There are no compatible Custom Fields at this level`:$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_clickapp-turned-off-on-the-space:The ClickApp is turned off on the Space`,subitems:t.map(t=>({id:t.id,title:t.name,icon:"field-"+t.type,checked:e.workloadSettings.capacity.customFieldId===t.id,checkType:"check",customPayload:{capacity:{type:"custom_field",customFieldId:t.id}}}))}:null,null,null].filter(Boolean):[])),this.workloadSelectedItem$=this.workloadMenuItems$.pipe(Object(Qt.a)(t=>t.find(t=>t.checked))),this.settingsMenuItems$=Object(ii.a)([this.colorByCustomFields$,this.store.select(z.getProjectFeatures),this.dataView$,this.store.select(ru.P)]).pipe(Object(Qt.a)(([t,e,i,n])=>{const o=i.viewType===$.i.Timeline,a=o?"timelineSettings":"workloadSettings";return[{id:"settings-header",type:ne.a.Header,title:o?$localize`:@@cu-timeline-views-bar-settings__title_timeline-settings:Timeline settings`:$localize`:@@cu-timeline-views-bar-settings__title_workload-settings:Workload settings`},{id:"color",icon:"cu2-color",title:$localize`:@@common_color-tasks-by:Color tasks by`,subitems:[{id:"list",title:$localize`:@@common_list:List`,checkType:"check",checked:"subcategoryStatus"===i[a].colorTasksBy.source,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{colorTasksBy:{source:"subcategoryStatus",customFieldDropdownId:null}})}},{id:"status",title:$localize`:@@common_status:Status`,checkType:"check",checked:"taskStatus"===i[a].colorTasksBy.source,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{colorTasksBy:{source:"taskStatus",customFieldDropdownId:null}})}},t&&t.length>0&&e.custom_fields&&e.custom_fields.enabled?{id:"custom-fields-color",title:$localize`:@@common_custom-field-1:Custom Field`,subitems:(t||[]).map(t=>({id:t.id,title:t.name,icon:"field-"+t.type,checkType:"check",checked:"customFieldDropdown"===i[a].colorTasksBy.source&&i[a].colorTasksBy.customFieldDropdownId===t.id,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{colorTasksBy:{source:"customFieldDropdown",customFieldDropdownId:t.id}})}}))}:null].filter(Boolean)},o?null:{id:"stay-on-date",title:$localize`:@@common_always-stay-on-date:Always stay on this date`,checkType:"switch",checked:!!i[a].viewDate,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{viewDate:i[a].viewDate?null:n})}},{id:"send-notifications",title:$localize`:@@common_send-notifications:Send notifications`,checkType:"switch",tooltip:$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_disable-send-notifications:Disable to stop people from being notified about changes to start dates, due dates and group changes.`,checked:!i[a].disableSendNotifications,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{disableSendNotifications:!i[a].disableSendNotifications})}},o&&"large"!==i.timelineSettings.columnSize?{id:"show-names-outside-task",title:$localize`:@@cu-timeline-views-bar-settings__title_expand-task-names:Expand task names`,checkType:"switch",checked:i.timelineSettings.showNamesOutsideOfTask,customPayload:{[a]:Object.assign(Object.assign({},i.timelineSettings),{showNamesOutsideOfTask:!i.timelineSettings.showNamesOutsideOfTask})}}:null,o?null:{id:"ignore-rollups",title:$localize`:@@cu-timeline-views-bar-settings__title_ignore-rollups:Ignore rollups`,checkType:"switch",checked:i.workloadSettings.ignoreWorkloadRollups&&i.settings.showSubtasksType===$.h.None,customPayload:{workloadSettings:Object.assign(Object.assign({},i.workloadSettings),{ignoreWorkloadRollups:!i.workloadSettings.ignoreWorkloadRollups})},disabled:i.settings.showSubtasksType===$.h.StandAlone,tooltip:i.settings.showSubtasksType===$.h.StandAlone?$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_ignore-rollups:You cannot ignore rollups when showing subtasks`:null},{id:"show-recurring-tasks",title:$localize`:@@common_show-recurring-tasks:Show recurring tasks`,checkType:"switch",checked:i[a].showRecurringTasks,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{showRecurringTasks:!i[a].showRecurringTasks})}},{id:"separator",type:ne.a.Separator,title:""},{id:"show",title:this.commonStringsService.showText,type:ne.a.Header},{id:"weekends",title:$localize`:@@cu-timeline-views-bar-settings__title_weekends:Weekends`,checkType:"switch",checked:i[a].showWeekends,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{showWeekends:!i[a].showWeekends})}},{id:"subtasks",title:$localize`:@@common_subtasks:Subtasks`,checkType:"switch",checked:i.settings.showSubtasksType===$.h.StandAlone,customPayload:{settings:Object.assign(Object.assign({},i.settings),{showSubtasksType:i.settings.showSubtasksType===$.h.StandAlone?$.h.None:$.h.StandAlone})}},{id:"closed",title:$localize`:@@cu-timeline-views-bar-settings__title_closed-tasks:Closed tasks`,checkType:"switch",checked:i.filter.showClosed,customPayload:{filter:Object.assign(Object.assign({},i.filter),{showClosed:!i.filter.showClosed})}},{id:"location",title:$localize`:@@common_location:Location`,checkType:"switch",checked:i[a].showEventItems.location,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{showEventItems:Object.assign(Object.assign({},i[a].showEventItems),{location:!i[a].showEventItems.location})})}},{id:"parents",title:$localize`:@@cu-timeline-views-bar-settings__title_parent-names:Parent names`,checkType:"switch",checked:i[a].showEventItems&&i[a].showEventItems.parentName,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{showEventItems:Object.assign(Object.assign({},i[a].showEventItems),{parentName:!(i[a].showEventItems&&i[a].showEventItems.parentName)})})}},{id:"assignees",title:$localize`:@@common_assignees:Assignees`,checkType:"switch",checked:i[a].showEventItems.assignee,customPayload:{[a]:Object.assign(Object.assign({},i[a]),{showEventItems:Object.assign(Object.assign({},i[a].showEventItems),{assignee:!i[a].showEventItems.assignee})})}}].filter(Boolean)})),this.LayoutVersion=H.b}ngOnInit(){}previousDateRange(){this.store.dispatch(Object(su.d)())}nextDateRange(){this.store.dispatch(Object(su.c)())}today(){this.store.dispatch(Object(su.e)())}setScaleAndColumnSize(t,e){this.store.dispatch(su.y({scale:t,columnSize:e}))}updateWorkloadSettings(t){this.store.dispatch(new Y.qm(this.dataView.id,{workloadSettings:Object.assign(Object.assign({},this.dataView.workloadSettings),t)},!0))}menuItemSelected(t,e){t.customPayload?this.store.dispatch(new Y.qm(this.dataView.id,t.customPayload,!0)):e.close()}zoomIn(){Object(ii.a)([this.scale$,this.columnSize$]).pipe(Object(N.a)(1)).subscribe(([t,e])=>{"week"===t?this.setScaleAndColumnSize("month","medium"):"medium"===e?this.setScaleAndColumnSize("month","large"):"small"===e&&this.setScaleAndColumnSize("week","medium")})}zoomOut(){Object(ii.a)([this.scale$,this.columnSize$]).pipe(Object(N.a)(1)).subscribe(([t,e])=>{"week"===t?this.setScaleAndColumnSize("month","small"):"medium"===e?this.setScaleAndColumnSize("week","medium"):"large"===e&&this.setScaleAndColumnSize("month","medium")})}setDisplayWeeks(t){this.store.dispatch(new Y.qm(this.dataView.id,{workloadSettings:Object.assign(Object.assign({},this.dataView.workloadSettings),{displayWeeks:t})},!0))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(J.a),d.Wb(K.Store),d.Wb(cu),d.Wb(Q.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-timeline-views-bar-settings"]],hostAttrs:[1,"cu-timeline-views-bar-settings"],inputs:{dataView:"dataView",sortByTemplate:"sortByTemplate",assigneesFilterTemplate:"assigneesFilterTemplate",groupByTemplate:"groupByTemplate",sharingTemplate:"sharingTemplate"},features:[d.Hb([cu])],ngContentSelectors:Au,decls:17,vars:16,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,d,h,p;return t=$localize`:@@cu-timeline-views-bar-settings__tooltip-msg_previous␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,e=$localize`:@@common_next␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,i=$localize`:@@common_today␟5a0265c7386cb629bf6b50b3c0d56b936523c485␟5646875768870805000: Today `,n=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,o=$localize`:@@paywall_text--business-features␟95d72c6f223792033b7d92e694f096b1d96d975b␟3178463575610512972:Upgrade to get this and many more Business features.`,a=$localize`:@@paywall_email-subject--timeline-view␟9d3c122a17162c169c50efd3087366cbf881a3cf␟7922288416891733893:Please upgrade ClickUp so we can use Timeline view`,r=$localize`:@@common_today␟5a0265c7386cb629bf6b50b3c0d56b936523c485␟5646875768870805000: Today `,s=$localize`:@@common_zoom-out␟a3dfc58748f790fa096cf3c5fc331f90846e1772␟944767796496567082:Zoom out`,c=$localize`:@@common_zoom-in␟e28ee80cd3a124e109793180dfd1f8d8067dcc6b␟6500061599200357251:Zoom in`,l=$localize`:@@common_time-unit--day␟8af26a23f1a893548e068bfa750ed9ec28932a09␟5012076874544249723: Day `,u=$localize`:@@common_time-unit--week␟c24ed5890478a9825d2f4dd71df9416b7f4d4503␟5762965520104806478: Week `,d=$localize`:@@common_time-unit--month␟84ea560d5bd9b4f00f92468932cec098c8dfc72c␟3516722829876936980: Month `,h=$localize`:@@common_workload␟e471dea547901c3745903e7b329fb4ecd541ee92␟3234861579450376190: Workload `,p=$localize`:@@common_show␟2aba1e87039819aca3b70faa9aa848c12bf139ca␟8461842260159597706:Show`,[["class","cu-timeline-views-bar-settings__left",4,"ngIf"],["paywallTemplate",""],[1,"cu-timeline-views-bar-settings__right"],[3,"items","dropdownPlacement","dropdownDisabled","onSelect","onCheck",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"cu2-views-bar__btn_label","items","dropdownPlacement","autoClose","toggleModifier","onSelect","onCheck",4,"ngIf"],[1,"cu-timeline-views-bar-settings__left"],[1,"cu-timeline-views-bar-settings__dates"],[1,"cu-timeline-views-bar-settings__dates-arrow"],["cuTooltip",t,1,"cu-timeline-views-bar-settings__dates-arrow-button",3,"click"],["icon","arrow-left-bold"],["cuTooltip",e,1,"cu-timeline-views-bar-settings__dates-arrow-button","cu-timeline-views-bar-settings__dates-arrow-button_next",3,"click"],[1,"cu-timeline-views-bar-settings__today",3,"click"],[1,"cu-timeline-views-bar-settings__today-label"],i,["cuDropdown","",1,"cu-timeline-views-bar-settings__period",3,"dropdownDisabled","cuTooltip"],["cuDropdownToggle","",1,"cu-timeline-views-bar-settings__period-toggle"],[1,"cu-timeline-views-bar-settings__period-arrow",3,"icon"],[4,"cuDropdownMenu"],[3,"item","onSelect"],["badge",n,"text",o,"emailSubject",a,3,"title","upgradeButtonText","amplitudeLabel"],r,[4,"ngIf"],["cuTooltip",s,1,"cu-timeline-views-bar-settings__zoom",3,"disabled","click"],[1,"cu-timeline-views-bar-settings__zoom-icon",3,"icon"],["cuTooltip",c,1,"cu-timeline-views-bar-settings__zoom",3,"disabled","click"],l,u,d,[3,"items","dropdownPlacement","dropdownDisabled","onSelect","onCheck"],[1,"cu-timeline-views-bar-settings__workload"],["workloadElement",""],["icon","cu2-workload-2",1,"cu-timeline-views-bar-settings__workload-icon"],[1,"cu-timeline-views-bar-settings__workload-label"],h,["containerClass","popover_white popover_no-max-width popover_no-padding",3,"updateImmediately","checked","disabled","cuPopover","outsideClick","hostElement",4,"ngIf"],["containerClass","popover_white popover_no-max-width popover_no-padding",3,"updateImmediately","checked","disabled","cuPopover","outsideClick","hostElement"],[1,"cu-timeline-views-bar-settings__workload-divider"],[1,"cu-timeline-views-bar-settings__workload-toggle"],[3,"icon"],["icon","cu2-caret-down",1,"cu-timeline-views-bar-settings__workload-toggle-arrow"],[3,"items","dropdownPlacement","autoClose","toggleModifier","onSelect","onCheck"],["settingsDropdown",""],["class","cu2-views-bar__btn-toggle cu2-views-bar__btn-toggle_ellipsis cu2-views-bar__btn-toggle_view-settings-two-rows",3,"icon","cuTooltip",4,"ngIf"],[1,"cu2-views-bar__btn-toggle","cu2-views-bar__btn-toggle_ellipsis","cu2-views-bar__btn-toggle_view-settings-two-rows",3,"icon","cuTooltip"],["icon","cu3-eye",1,"cu2-views-bar__btn-icon"],[1,"cu2-views-bar__btn-title"],p]},template:function(t,e){if(1&t&&(d.Cc(Nu),d.bd(0,fu,25,24,"div",0),d.vc(1,"async"),d.bd(2,gu,1,3,"ng-template",null,1,d.cd),d.bd(4,Su,5,1,"div",0),d.vc(5,"async"),d.cc(6,"div",2),d.Bc(7),d.Bc(8,1),d.bd(9,Iu,13,16,"cu-dropdown-list",3),d.vc(10,"async"),d.vc(11,"async"),d.bd(12,Pu,0,0,"ng-template",4),d.bd(13,Mu,0,0,"ng-template",4),d.bd(14,Ou,0,0,"ng-template",4),d.bd(15,$u,0,0,"ng-template",4),d.bd(16,Eu,9,19,"cu-dropdown-list",5),d.bc()),2&t){let t=null;d.Dc("ngIf",d.wc(1,8,e.isWorkload$)),d.Ib(4),d.Dc("ngIf",!d.wc(5,10,e.isWorkload$)),d.Ib(5),d.Dc("ngIf",d.wc(10,12,e.isWorkload$)&&(null==(t=d.wc(11,14,e.workloadMenuItems$))?null:t.length)>2),d.Ib(3),d.Dc("ngTemplateOutlet",e.groupByTemplate),d.Ib(1),d.Dc("ngTemplateOutlet",e.sortByTemplate),d.Ib(1),d.Dc("ngTemplateOutlet",e.assigneesFilterTemplate),d.Ib(1),d.Dc("ngTemplateOutlet",e.sharingTemplate),d.Ib(1),d.Dc("ngIf",!e.isSharingApp)}},directives:[n.q,n.x,ot.a,nt.a,tt.b,et.a,it.a,Bo.a,st.a,rt.a,Ro.a,lu.a],pipes:[n.b,uu.a],styles:[".cu-calendar-view-previous{height:24px;border-radius:12px;display:inline-flex;align-items:center;margin-right:6px;background:#fff;border:1px solid #e9ebf0}.dark-theme .cu-calendar-view-previous{background:#2b343b;border-color:#2b343b}.cu-calendar-view-previous_v2{height:30px;border-radius:15px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);margin-right:8px;border:0}.cu2-views-bar__options_v6 .cu-calendar-view-previous{width:24px;height:24px;margin-right:0;border:0;border-radius:6px;overflow:hidden;display:inline-flex;align-items:center;background:transparent}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-previous{background:transparent}.cu-calendar-view-previous__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;width:24px;height:24px;cursor:pointer;padding:7px 8px 7px 6px}.cu-calendar-view-previous__button:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-previous__button:hover{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-calendar-view-previous__button:hover{background-color:#f2f2f2;fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-previous__button:hover{background-color:#1e272e;fill:#abaeb0}.cu-calendar-view-previous_v2 .cu-calendar-view-previous__button{width:30px;height:30px;padding:10px 11px 10px 9px}.cu2-views-bar__options_v6 .cu-calendar-view-previous__button{padding:7px 6px 7px 8px;transform:rotate(180deg);fill:#7c828d}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-previous__button{fill:#abaeb0}",".cu-calendar-view-next{height:24px;border-radius:12px;display:inline-flex;align-items:center;margin-right:10px;background:#fff;border:1px solid #e9ebf0}.dark-theme .cu-calendar-view-next{background:#2b343b;border-color:#2b343b}.cu-calendar-view-next_v2{height:30px;border-radius:15px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);margin-right:20px;border:0}.cu2-views-bar__options_v6 .cu-calendar-view-next{width:24px;height:24px;margin-right:0;border:0;border-radius:6px;overflow:hidden;display:inline-flex;align-items:center;background:transparent}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-next{background:transparent}.cu-calendar-view-next__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;width:24px;height:24px;cursor:pointer;padding:7px 8px 7px 6px;transform:rotate(180deg)}.cu-calendar-view-next__button:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-next__button:hover{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-calendar-view-next__button:hover{background-color:#f2f2f2;fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-next__button:hover{background-color:#1e272e;fill:#abaeb0}.cu-calendar-view-next_v2 .cu-calendar-view-next__button{width:30px;height:30px;padding:10px 11px 10px 9px}.cu2-views-bar__options_v6 .cu-calendar-view-next__button{padding:7px 6px 7px 8px;transform:rotate(0deg);fill:#7c828d}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-next__button{fill:#abaeb0}",".cu-calendar-view-title:not(.cu-calendar-view-title_v2){margin:0 20px}.cu2-views-bar_v6 .cu-calendar-view-title{margin:0 0 0 5px}.cu-calendar-view-title__view-label{font:400 20px/1 Gotham Pro,Proxima Nova,arial,serif}.cu2-views-bar_v6 .cu-calendar-view-title__view-label{font:400 15px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-calendar-view-title__month-year.cu-dropdown_open .cu-calendar-view-title__month-year-value{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-title__month-year.cu-dropdown_open .cu-calendar-view-title__month-year-value{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-calendar-view-title__month-year-value{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;color:#343434;border-bottom:1px dashed #6a6a6a}.dark-theme .cu-calendar-view-title__month-year-value{color:#d5d6d7;border-bottom:1px dashed #828588}.cu-calendar-view-title__month-year-value:hover{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-title__month-year-value:hover{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}",".cu-calendar-today{display:inline-flex;align-items:center;margin-right:10px}.cu-calendar-today_v2{margin-right:15px;height:30px;border-radius:15px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);border:0;background:#fff}.dark-theme .cu-calendar-today_v2{background:#2b343b}.cu2-views-bar__options_v6 .cu-calendar-today{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;height:24px;padding:0 6px;margin-right:0;border-radius:6px}.cu2-views-bar__options_v6 .cu-calendar-today:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-today:hover{background-color:#1e272e}.cu-calendar-today__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7c828d;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;padding:4px}.dark-theme .cu-calendar-today__button{color:#d5d6d7}.cu-calendar-today__button:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-today__button:hover{color:var(--theme-main-color)}}.cu-calendar-today:not(.cu-calendar-today_v2) .cu-calendar-today__button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.cu-calendar-today_v2 .cu-calendar-today__button{padding:4px 14px;color:#292d34;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-calendar-today_v2 .cu-calendar-today__button{color:#d5d6d7}.cu2-views-bar__options_v6 .cu-calendar-today__button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-ms-user-select:none;user-select:none;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-today__button{color:#abaeb0}",'.cu-calendar-period{display:inline-flex;align-items:center;margin-right:15px}.cu2-views-bar_v6 .cu-calendar-period{margin-right:4px}.cu-calendar-period__selector{height:100%}.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{fill:#abaeb0}.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-label span,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-label span{color:#abaeb0}.cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{transform:rotate(270deg)}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-arrow,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-arrow{transform:rotate(180deg)}.cu2-views-bar_v6 .cu-calendar-period__selector.cu-dropdown_open .cu-calendar-period__selector-toggle:before,.cu2-views-bar_v6 .cu-calendar-period__selector .cu-dropdown_open .cu-calendar-period__selector-toggle:before{opacity:1}.cu-calendar-period__selector-toggle{display:flex;align-items:center;height:100%;padding:3px 4px}.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:var(--theme-main-color)}}.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle{position:relative;padding:0 6px;border-radius:6px;height:24px;overflow:hidden}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-arrow{fill:#abaeb0}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label,.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover .cu-calendar-period__selector-label span{color:#abaeb0}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:hover:before{opacity:1}.cu2-views-bar_v6 .cu-calendar-period__selector-toggle:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-toggle:before{background-color:#1e272e}.cu-calendar-period__selector-arrow{position:relative;transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);margin-left:7px;width:9px;height:9px;transform:rotate(90deg);fill:#7c828d}.dark-theme .cu-calendar-period__selector-arrow{fill:#d5d6d7}.cu2-views-bar_v6 .cu-calendar-period__selector-arrow{margin-left:3px;transform:rotate(0deg);fill:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-arrow{fill:#abaeb0}.cu-calendar-period__selector-label{position:relative}.cu-calendar-period__selector-label span{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:block;color:#7c828d;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-calendar-period__selector-label span{color:#d5d6d7}.cu2-views-bar_v6 .cu-calendar-period__selector-label span{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:0;color:#333}.dark-theme .cu2-views-bar_v6 .cu-calendar-period__selector-label span{color:#abaeb0}','.cu-timeline-views-bar-settings{display:flex;flex-grow:1}.cu-timeline-views-bar-settings__left{display:flex;align-items:center}.cu-timeline-views-bar-settings__right{display:flex;align-items:center;justify-content:flex-end;flex-grow:1}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__right{flex-grow:0;margin-left:auto}.cu-timeline-views-bar-settings__right .cu-timeline-views-bar-settings__today+*{margin-left:auto}.cu-timeline-views-bar-settings__dates{flex-shrink:0;padding-right:15px;text-align:right;white-space:nowrap;font:400 20px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-timeline-views-bar-settings__dates{color:#d5d6d7}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 14px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:4px;padding:0}.cu-timeline-views-bar-settings__dates-arrow{height:24px;border-radius:12px;display:inline-flex;align-items:center;margin-right:6px;background:#fff;border:1px solid #e9ebf0}.dark-theme .cu-timeline-views-bar-settings__dates-arrow{background:#2b343b;border-color:#2b343b}.cu-timeline-views-bar-settings__dates-arrow_next{margin-right:10px}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow{width:24px;height:24px;margin-right:0;border:0;border-radius:6px}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow:hover{background-color:#1e272e}.cu-timeline-views-bar-settings__dates-arrow-button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;width:24px;height:24px;cursor:pointer;padding:7px 8px 7px 6px}.cu-timeline-views-bar-settings__dates-arrow-button_next{transform:rotate(180deg)}.cu-timeline-views-bar-settings__dates-arrow-button:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-timeline-views-bar-settings__dates-arrow-button:hover{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow-button:hover{fill:#7c828d}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow-button:hover{fill:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow-button{padding:0;height:9px;fill:#7c828d}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__dates-arrow-button{fill:#abaeb0}.cu-timeline-views-bar-settings__today,.cu-timeline-views-bar-settings__zoom{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;margin-right:10px;height:26px;border-radius:3px;padding:1px 8px 0;cursor:pointer;border:1px solid #d8dce2}.contrast_high .cu-timeline-views-bar-settings__today,.contrast_high .cu-timeline-views-bar-settings__zoom{border-color:#b9bec7}.dark-theme .cu-timeline-views-bar-settings__today,.dark-theme .cu-timeline-views-bar-settings__zoom{border-color:#384047}.cu-timeline-views-bar-settings__today:not(:disabled):hover,.cu-timeline-views-bar-settings__zoom:not(:disabled):hover{background-color:#f2f2f2}.dark-theme .cu-timeline-views-bar-settings__today:not(:disabled):hover,.dark-theme .cu-timeline-views-bar-settings__zoom:not(:disabled):hover{background-color:#2b343b}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__today:not(:disabled):hover,.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom:not(:disabled):hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__today:not(:disabled):hover,.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom:not(:disabled):hover{background-color:#1e272e}.cu-timeline-views-bar-settings__today:disabled,.cu-timeline-views-bar-settings__zoom:disabled{opacity:.3;cursor:default}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__today,.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom{height:24px;padding:0 6px;margin-right:0;border-radius:6px;border:0}.cu-timeline-views-bar-settings__today-label,.cu-timeline-views-bar-settings__zoom-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-ms-user-select:none;user-select:none;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-timeline-views-bar-settings__today-label,.dark-theme .cu-timeline-views-bar-settings__zoom-label{color:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__today-label,.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom-label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__today-label,.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom-label{color:#abaeb0}.cu-timeline-views-bar-settings__zoom{margin-left:0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom{width:24px}.cu-timeline-views-bar-settings__zoom-icon{width:10px;height:10px;fill:#7c828d}.dark-theme .cu-timeline-views-bar-settings__zoom-icon{fill:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom-icon{fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__zoom-icon{fill:#abaeb0}.cu-timeline-views-bar-settings__period{height:100%}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period{height:24px;padding:0 6px;margin:0 4px;border-radius:6px}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period.cu-dropdown_open,.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period .cu-dropdown_open,.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period.cu-dropdown_open,.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period .cu-dropdown_open,.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period:hover{background-color:#1e272e}.cu-timeline-views-bar-settings__period.cu-dropdown_open .cu-timeline-views-bar-settings__period-arrow,.cu-timeline-views-bar-settings__period .cu-dropdown_open .cu-timeline-views-bar-settings__period-arrow{fill:#7b68ee;transform:rotate(270deg)}@supports (--theme-main-color:#7b68ee){.cu-timeline-views-bar-settings__period.cu-dropdown_open .cu-timeline-views-bar-settings__period-arrow,.cu-timeline-views-bar-settings__period .cu-dropdown_open .cu-timeline-views-bar-settings__period-arrow{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period.cu-dropdown_open .cu-timeline-views-bar-settings__period-arrow,.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period .cu-dropdown_open .cu-timeline-views-bar-settings__period-arrow{transform:rotate(180deg)}.cu-timeline-views-bar-settings__period-toggle{display:flex;align-items:center;height:100%;padding:3px 4px}.cu-timeline-views-bar-settings__period-toggle:hover .cu-timeline-views-bar-settings__period-arrow{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-timeline-views-bar-settings__period-toggle:hover .cu-timeline-views-bar-settings__period-arrow{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period-toggle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:0;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period-toggle{color:#abaeb0}.cu-timeline-views-bar-settings__period-arrow{transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);margin-left:7px;width:9px;height:9px;transform:rotate(90deg);fill:#7c828d}.dark-theme .cu-timeline-views-bar-settings__period-arrow{fill:#d5d6d7}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period-arrow{transform:rotate(0deg);margin-left:3px;fill:#b9bec7}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__period-arrow{fill:#828588}.cu-timeline-views-bar-settings__workload{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;margin-right:15px;height:26px;border-radius:3px;padding:0 0 0 8px;border:1px solid #d8dce2}.dark-theme .cu-timeline-views-bar-settings__workload{border-color:#384047}.cu-timeline-views-bar-settings__workload:hover{background-color:#f2f2f2}.dark-theme .cu-timeline-views-bar-settings__workload:hover{background-color:#2b343b}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload:hover{background-color:#1e272e}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload{height:24px;margin-right:4px;border-radius:6px;padding-left:6px;border:0}.cu-timeline-views-bar-settings__workload-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;padding-top:1px;color:#7c828d}.dark-theme .cu-timeline-views-bar-settings__workload-label{color:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-label{padding:0;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-label{color:#abaeb0}.cu-timeline-views-bar-settings__workload-icon{width:12px;height:12px;margin-right:3px;fill:#7c828d}.dark-theme .cu-timeline-views-bar-settings__workload-icon{fill:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-icon{fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-icon{fill:#abaeb0}.cu-timeline-views-bar-settings__workload-divider{width:1px;height:15px;background:#e9ebf0;margin-left:8px;flex-shrink:0}.dark-theme .cu-timeline-views-bar-settings__workload-divider{background:#384047}.cu2-views-bar_v6 .cu-timeline-views-bar-settings__workload-divider{display:none}.cu-timeline-views-bar-settings__workload-toggle{display:flex;align-items:center;position:relative;padding:0 7px}.cu2-views-bar_v6 .cu-timeline-views-bar-settings__workload-toggle{padding:0 6px 0 8px;margin-left:6px}.cu2-views-bar_v6 .cu-timeline-views-bar-settings__workload-toggle:before{content:"";display:block;position:absolute;width:3px;height:3px;left:0;border-radius:50%;background:#cdd2d9}.dark-theme .cu2-views-bar_v6 .cu-timeline-views-bar-settings__workload-toggle:before{background:#384047}.cu-timeline-views-bar-settings__workload-toggle-icon{width:14px;height:14px;fill:#7c828d}.dark-theme .cu-timeline-views-bar-settings__workload-toggle-icon{fill:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-toggle-icon{fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-toggle-icon{fill:#abaeb0}.cu-timeline-views-bar-settings__workload-toggle-icon_time{height:12px}.cu-timeline-views-bar-settings__workload-toggle-arrow{width:7px;height:12px;margin-left:4px;fill:#7c828d}.dark-theme .cu-timeline-views-bar-settings__workload-toggle-arrow{fill:#abaeb0}.cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-toggle-arrow{margin-left:3px;fill:#b9bec7}.dark-theme .cu2-views-bar__options_v6 .cu-timeline-views-bar-settings__workload-toggle-arrow{fill:#828588}'],encapsulation:2,changeDetection:0}),t})();var zu=i("aGrj"),Fu=i("lU5h");let Bu=(()=>{class t{constructor(){this.allColsText=$localize`:@@cu-export-view__title_all-cols:All columns`,this.csvText=$localize`:@@cu-export-view__title_csv:CSV`,this.isoText=$localize`:@@cu-export-view__title_iso:ISO`,this.normalText=$localize`:@@common_normal:Normal`,this.posixText=$localize`:@@cu-export-view__title_posix:POSIX`,this.taskNamesOnlyText=$localize`:@@cu-export-view__title_task-names-only:Task names only`,this.visibleColsText=$localize`:@@cu-export-view__title_visible-cols:Visible columns`,this.excelText=$localize`:@@cu-export-view__title_excel:Excel`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Sb({token:t,factory:t.\u0275fac}),t})();var Ru=i("4F4K"),Uu=i("KoB5"),Gu=i("WwCI"),Hu=i("9gfC");const Wu=function(t,e){return{id:"csv",title:t,checkType:"radio",checked:e}},qu=function(t,e){return{id:"excel",title:t,icon:"excel",checkType:"radio",checked:e}};function Xu(t,e){if(1&t){const t=d.dc();d.ac(0),d.Xb(1,"cu-dropdown-list-title",16),d.cc(2,"cu-dropdown-list-item",5),d.qc("onSelect",function(){d.Uc(t);const e=d.uc(2);return e.exportSettings.fileFormat="csv",e.toggleDateAndTimeFormat()}),d.bc(),d.cc(3,"cu-dropdown-list-item",5),d.qc("onSelect",function(){d.Uc(t);const e=d.uc(2);return e.exportSettings.fileFormat="excel",e.toggleDateAndTimeFormat()}),d.bc(),d.Zb()}if(2&t){const t=d.uc(2);d.Ib(2),d.Dc("item",d.Ic(2,Wu,t.exportViewStringsService.csvText,"csv"===t.exportSettings.fileFormat)),d.Ib(1),d.Dc("item",d.Ic(5,qu,t.exportViewStringsService.excelText,"excel"===t.exportSettings.fileFormat))}}const Yu=function(t,e){return{id:"normal",title:t,checkType:"radio",checked:e}},Ku=function(t,e){return{id:"iso",title:t,checkType:"radio",checked:e,helpUrl:"https://en.wikipedia.org/wiki/ISO_8601"}},Zu=function(t,e){return{id:"posix",title:t,checkType:"radio",checked:e,helpUrl:"https://en.wikipedia.org/wiki/Unix_time"}};function Ju(t,e){if(1&t){const t=d.dc();d.ac(0),d.Xb(1,"cu-dropdown-list-title",17),d.cc(2,"cu-dropdown-list-item",18),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).exportSettings.dateFormat="normal"}),d.bc(),d.cc(3,"cu-dropdown-list-item",5),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).exportSettings.dateFormat="iso"}),d.bc(),d.cc(4,"cu-dropdown-list-item",5),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).exportSettings.dateFormat="posix"}),d.bc(),d.Zb()}if(2&t){const t=d.uc(2);d.Ib(1),d.Dc("helpUrl","https://docs.clickup.com/clickup-2-0/date-formats"),d.Ib(1),d.Dc("item",d.Ic(4,Yu,t.exportViewStringsService.normalText,"normal"===t.exportSettings.dateFormat)),d.Ib(1),d.Dc("item",d.Ic(7,Ku,t.exportViewStringsService.isoText,"iso"===t.exportSettings.dateFormat)),d.Ib(1),d.Dc("item",d.Ic(10,Zu,t.exportViewStringsService.posixText,"posix"===t.exportSettings.dateFormat))}}const Qu=function(t){return{id:"hours",title:"hh:mm",checkType:"radio",checked:t}};function td(t,e){if(1&t){const t=d.dc();d.ac(0),d.Xb(1,"cu-dropdown-list-title",19),d.cc(2,"cu-dropdown-list-item",20),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).exportSettings.timeFormat="normal"}),d.bc(),d.cc(3,"cu-dropdown-list-item",21),d.qc("onSelect",function(){return d.Uc(t),d.uc(2).exportSettings.timeFormat="hours"}),d.bc(),d.Zb()}if(2&t){const t=d.uc(2);d.Ib(2),d.Dc("item",d.Ic(2,Yu,t.exportViewStringsService.normalText,"normal"===t.exportSettings.timeFormat)),d.Ib(1),d.Dc("item",d.Hc(5,Qu,"hours"===t.exportSettings.timeFormat))}}function ed(t,e){1&t&&(d.cc(0,"div",22),d.Xb(1,"div",23),d.cc(2,"div",24),d.gc(3,25),d.bc(),d.bc()),2&t&&(d.Ib(1),d.Dc("icon","exclamation3"))}const id=function(t,e){return{id:"view",title:t,checkType:"radio",checked:e}},nd=function(t,e){return{id:"task-names",title:t,checkType:"radio",checked:e}},od=function(t,e){return{id:"everything",title:t,checkType:"radio",checked:e}};function ad(t,e){if(1&t){const t=d.dc();d.cc(0,"div"),d.Xb(1,"cu-dropdown-list-title",4),d.cc(2,"cu-dropdown-list-item",5),d.qc("onSelect",function(){return d.Uc(t),d.uc().exportSettings.export="view"}),d.bc(),d.cc(3,"cu-dropdown-list-item",5),d.qc("onSelect",function(){return d.Uc(t),d.uc().exportSettings.export="task-names"}),d.bc(),d.cc(4,"cu-dropdown-list-item",5),d.qc("onSelect",function(){return d.Uc(t),d.uc().exportSettings.export="everything"}),d.bc(),d.bd(5,Xu,4,8,"ng-container",6),d.bd(6,Ju,5,13,"ng-container",6),d.bd(7,td,4,7,"ng-container",6),d.cc(8,"button",7,8),d.qc("click",function(){d.Uc(t);const e=d.Rc(9);return d.uc().doExport(e)}),d.cc(10,"div",9),d.gc(11,10),d.bc(),d.cc(12,"div",11),d.Xb(13,"div",12),d.Xb(14,"div",13),d.Xb(15,"div",14),d.bc(),d.bc(),d.bd(16,ed,4,1,"div",15),d.vc(17,"async"),d.vc(18,"async"),d.bc()}if(2&t){const t=d.uc(),e=d.Rc(5);d.Ib(1),d.Dc("title","What to export")("helpUrl","https://docs.clickup.com/clickup-2-0/export-list-view"),d.Ib(1),d.Dc("item",d.Ic(15,id,t.exportViewStringsService.visibleColsText,"view"===t.exportSettings.export)),d.Ib(1),d.Dc("item",d.Ic(18,nd,t.exportViewStringsService.taskNamesOnlyText,"task-names"===t.exportSettings.export)),d.Ib(1),d.Dc("item",d.Ic(21,od,t.exportViewStringsService.allColsText,"everything"===t.exportSettings.export)),d.Ib(1),d.Dc("ngIf",(null==t.view?null:t.view.viewType)===t.DataViewType.List||(null==t.view?null:t.view.viewType)===t.DataViewType.Grid),d.Ib(1),d.Dc("ngIf",t.showDateAndTimeFormat),d.Ib(1),d.Dc("ngIf",t.showDateAndTimeFormat),d.Ib(1),d.Dc("disabled",t.loading)("popover",e),d.Ib(8),d.Dc("ngIf",d.wc(17,11,t.team$).plan_id===t.TeamPlan.FREE||d.wc(18,13,t.team$).plan_id===t.TeamPlan.UNLIMITED)}}function rd(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",26),2&t){const t=d.uc();d.Dc("title",t.paywallCommonStringsService.easyExportViewTitleText)("image","./assets/images/components/paywall-popover/easy-export-view.png")("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("learnMore","https://docs.clickup.com/clickup-2-0/export-list-view")("amplitudeLabel","Easy Export View")}}const sd=["*"];let cd=(()=>{class t{constructor(t,e,i,n,o,a,r){this.exportViewStringsService=t,this.dataViewService=e,this.cdr=i,this.window=n,this.store=o,this.websocketService=a,this.paywallCommonStringsService=r,this.loading=!1,this.team$=this.store.select(z.getTeam),this.TeamPlan=F.f,this.showDateAndTimeFormat=!0,this.destroy$=new B.a,this.DataViewType=$.i,this.isStaging=Object(Fu.f)(),this.resetExportSettings()}ngOnDestroy(){this.destroy$.next()}resetExportSettings(){this.exportSettings=!this.view||this.view.viewType!==$.i.List&&this.view.viewType!==$.i.Grid?{export:"view",dateFormat:"normal",timeFormat:"normal"}:{export:"view",dateFormat:"normal",timeFormat:"normal",fileFormat:"csv"}}toggleDateAndTimeFormat(){this.showDateAndTimeFormat="excel"!==this.exportSettings.fileFormat}doExport(t){this.loading=!0,this.store.select(X.G).pipe(Object(N.a)(1),Object(ee.a)(this.store.select(z.getSidebarOptions),this.store.select(ao.w),this.store.select(Ru.b)),Object(Kn.a)(([t,e,i,n])=>this.dataViewService.exportView(Object(E.D)(this.view,t,!0),this.exportSettings.dateFormat,this.exportSettings.timeFormat,{nameOnly:"task-names"===this.exportSettings.export,allColumns:"everything"===this.exportSettings.export,includeArchived:e.showArchived,expandedSubtaskIds:this.view.viewType===$.i.List?Object.entries(i).filter(([,t])=>t).map(([t])=>{var e;return(null===(e=n[t])||void 0===e?void 0:e.map(t=>t.id))||[]}).flat():void 0},this.team,this.exportSettings.fileFormat,this.isStaging).pipe(Object(zu.a)(this.websocketService.onChange.pipe(Object(Vi.a)(t=>t&&"exportDone"===t.type&&"view_export"===t.payload.type),Object(N.a)(1))))),Object(ee.a)(this.team$),Object(kl.a)(()=>{this.loading=!1,this.cdr.detectChanges()}),Object(A.a)(this.destroy$)).subscribe(([t,e])=>{this.window.nativeWindow.location.href=t.payload.url,this.dropdown.close(),void 0!==e.list_export_usages_remaining&&this.store.dispatch(new Y.Mm(e.id,{list_export_usages_remaining:Math.max(0,e.list_export_usages_remaining-1)}))},e=>{"EXPORT_007"===e.ECODE&&t.show()})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Bu),d.Wb(Uu.a),d.Wb(d.h),d.Wb(Gu.a),d.Wb(K.Store),d.Wb(mo.WebsocketService),d.Wb(Q.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-export-view"]],viewQuery:function(t,e){if(1&t&&d.jd(tt.b,3),2&t){let t;d.Qc(t=d.rc())&&(e.dropdown=t.first)}},hostAttrs:[1,"cu-export-view"],inputs:{view:"view",customFields:"customFields",project:"project",team:"team"},features:[d.Hb([Bu])],ngContentSelectors:sd,decls:6,vars:1,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,d,h;return t=$localize`:@@common_download␟dc75033a5238fdc4f462212c847a45ba8018a3fd␟3099741642167775297:Download`,e=$localize`:@@cu-export-view__title_file-format␟f37a670ded0eda30658e2a1357237aa9e0405810␟16507589019357869:File Format`,i=$localize`:@@common_date-format␟7df4de0d0704a06a302d853e31f2580eba98f127␟3733378544613473393:Date format`,n=$localize`:@@cu-export-view__tooltip-msg_date-format␟bc13247a71d44198bebd37ac45a53281a1e655bc␟5021637742604322726:Choose how you want dates (such as Due Dates) displayed`,o=$localize`:@@cu-export-view__tooltip-msg_date-format-human-readable␟d27c074a939e32fa553b9bb0e2ef20c758c74584␟1598263543614961989:Human readable date formats (easy to read)`,a=$localize`:@@common_time-format␟0f410de7a402831ef90c5a9621296eae767afe95␟6032103762513704849:Time format`,r=$localize`:@@cu-export-view__tooltip-msg_time-format␟de6a1f0514c543d8c8c14b55e4c88f74ca1147aa␟7763213288509419117:For Time Estimates and Time Tracking`,s=$localize`:@@cu-export-view__tooltip-msg_time-format-normal␟38d7e6a2d3fea6731a27c0fbdf2aecf015beeb29␟2938735180614928794:Easily readable times like “2 hours” or “10 minutes”`,c=$localize`:@@cu-export-view__tooltip-msg_time-format-human-readable␟dfd641dc6e21ea8b48a7da3640872220a86a1c5a␟440484443255327828:Use hours and minutes in a standard format like “4:30” to indicate 4 hours and 30 minutes`,l=$localize`:@@common_business-feature-1␟627275324da402c4cf1ce1408a0da2d5b8df9a49␟9200811652255351295: Business feature `,u=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,d=$localize`:@@paywall_text--easy-export-view␟f5ec9bc1a1236dd61eb205e914fb3e2ca0e859fe␟2078306260493487154:Business plans can export views exactly as you see them, or include information you don't see.`,h=$localize`:@@paywall_email-subject--easy-export-view␟4890c7b0f94894c9a0f7a43a9f6019d85a6b037d␟2518962672498340378:Please upgrade ClickUp so we can export tasks`,[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownOpen"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],["paywallPopoverTemplate",""],[3,"title","helpUrl"],[3,"item","onSelect"],[4,"ngIf"],["containerClass","popover_white popover_no-max-width popover_no-padding","placement","left","outsideClick","true","container","body","triggers","",1,"cu-btn","cu-btn_sm","cu-btn_block","cu-btn_spinner","cu-export-view__btn",3,"disabled","popover","click"],["paywallPopover","bs-popover"],[1,"cu-btn__text"],t,[1,"cu-btn__spinner"],[1,"cu-btn__bounce1"],[1,"cu-btn__bounce2"],[1,"cu-btn__bounce3"],["class","cu-export-view__warning",4,"ngIf"],["title",e],["title",i,"cuTooltip",n,"tooltipLifeTime","15000",3,"helpUrl"],["cuTooltip",o,"tooltipLifeTime","15000",3,"item","onSelect"],["title",a,"cuTooltip",r,"tooltipLifeTime","15000"],["cuTooltip",s,"tooltipLifeTime","15000",3,"item","onSelect"],["cuTooltip",c,"tooltipLifeTime","15000",3,"item","onSelect"],[1,"cu-export-view__warning"],[1,"cu-export-view__warning-icon",3,"icon"],[1,"cu-export-view__warning-text"],l,["badge",u,"text",d,"emailSubject",h,3,"title","image","upgradeButtonText","learnMore","amplitudeLabel"]]},template:function(t,e){1&t&&(d.Cc(),d.cc(0,"div",0),d.qc("dropdownOpen",function(){return e.resetExportSettings()}),d.cc(1,"div",1),d.Bc(2),d.bc(),d.bd(3,ad,19,24,"div",2),d.bc(),d.bd(4,rd,1,5,"ng-template",null,3,d.cd)),2&t&&d.Dc("dropdownCloseOnInsideClick",!1)},directives:[tt.b,et.a,it.a,Hu.a,Bo.a,n.q,at.c,ot.a,nt.a,st.a],pipes:[n.b],styles:[".cu-dropdown-list-item__title .cu-export-view{width:100%;height:32px;margin:-8px 0}.cu-dropdown-list-item__title .cu-export-view .cu-dropdown,.cu-dropdown-list-item__title .cu-export-view .cu-dropdown__toggle{height:100%}.cu-export-view__btn.cu-btn{margin:10px 15px 15px;width:calc(100% - 30px);min-width:140px}.cu-export-view__warning{display:flex;align-items:center;justify-content:center;margin-bottom:10px}.cu-export-view__warning-icon{width:15px;height:15px;margin-right:4px}.cu-export-view__warning-icon use{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-export-view__warning-icon use{fill:var(--theme-main-color)}}.cu-export-view__warning-text{color:#7b68ee;font:400 10px/1.4 Gotham Pro,Proxima Nova,arial,serif}@supports (--theme-main-color:#7b68ee){.cu-export-view__warning-text{color:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),t})();var ld=i("H3/u"),ud=i("IrHl"),dd=i("/hvl");function hd(t,e){1&t&&(d.ac(0),d.gc(1,9),d.Zb())}function pd(t,e){1&t&&(d.ac(0),d.gc(1,10),d.Zb())}function fd(t,e){if(1&t){const t=d.dc();d.cc(0,"div",6),d.qc("click",function(){return d.Uc(t),d.uc(2).toggleClosed()}),d.bd(1,hd,2,0,"ng-container",7),d.bd(2,pd,2,0,"ng-template",null,8,d.cd),d.bc()}if(2&t){const t=d.Rc(3),e=d.uc(2);d.Ib(1),d.Dc("ngIf",null==e.value?null:e.value.showClosed)("ngIfElse",t)}}function gd(t,e){if(1&t&&d.Yb(0,11),2&t){d.uc(2);const t=d.Rc(3);d.Dc("ngTemplateOutlet",t)}}function md(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-search-filter",3),d.qc("onChange",function(e){return d.Uc(t),d.uc().changeSearch(e)}),d.bd(1,fd,4,2,"div",4),d.bd(2,gd,1,1,"ng-container",5),d.bc()}if(2&t){const t=d.uc();d.Dc("value",null==t.value?null:t.value.search)("closeModifier","cu-search-filter__close_btn")("layoutVersion",t.layoutVersion)("placeholder",t.searchPlaceholder||(t.layoutVersion===t.LayoutVersion.Four||t.layoutVersion===t.LayoutVersion.Five?t.filterByTasknameText:t.filterText))("activeFilters",null==t.value||null==t.value.filters?null:t.value.filters.length)("showSearchIcon",t.showSearchIcon),d.Ib(1),d.Dc("ngIf",t.showClosedToggle&&t.allowClosedToggle),d.Ib(1),d.Dc("ngIf",!t.onlySearch)}}function vd(t,e){if(1&t&&(d.cc(0,"div",12),d.Yb(1,11),d.bc()),2&t){const t=d.uc(),e=d.Rc(3);d.Ob("cu-filter-block__extra_v6",t.layoutVersion===t.LayoutVersion.Six)("cu-filter-block__extra_active",null==t.value||null==t.value.filters?null:t.value.filters.length),d.Ib(1),d.Dc("ngTemplateOutlet",e)}}function bd(t,e){if(1&t&&d.Xb(0,"div",21),2&t){const t=d.uc(3);d.Ob("cu-filter-block__extra-icon-down-reverse",t.dropdownOpen)}}function _d(t,e){1&t&&(d.cc(0,"div",22),d.gc(1,23),d.bc())}function wd(t,e){if(1&t&&(d.cc(0,"div",24),d.dd(1),d.bc()),2&t){const t=d.uc(3);d.Ib(1),d.fd(" ",null==t.value||null==t.value.filters?null:t.value.filters.length," ")}}function yd(t,e){if(1&t&&(d.cc(0,"div",16),d.Xb(1,"div",17),d.bd(2,bd,1,2,"div",18),d.bd(3,_d,2,0,"div",19),d.bd(4,wd,2,1,"div",20),d.bc()),2&t){const t=d.uc(2);d.Dc("cuTooltip",t.disabledTooltip?null:t.filterTasksText),d.Ib(1),d.Dc("icon",t.layoutVersion===t.LayoutVersion.Six?"cu3-filter":"filter"),d.Ib(1),d.Dc("ngIf",t.layoutVersion===t.LayoutVersion.Four||t.layoutVersion===t.LayoutVersion.Five),d.Ib(1),d.Dc("ngIf",t.layoutVersion===t.LayoutVersion.Six&&!(null!=t.value&&null!=t.value.filters&&t.value.filters.length)),d.Ib(1),d.Dc("ngIf",t.layoutVersion===t.LayoutVersion.Six&&(null==t.value||null==t.value.filters?null:t.value.filters.length)>0)}}function kd(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-filter-message",25),d.qc("onClear",function(){return d.Uc(t),d.uc(2).onClear.emit()}),d.bc()}if(2&t){const t=d.uc(2);d.Dc("filterCount",null==t.value||null==t.value.filters?null:t.value.filters.length)("selectedFilterName",t.selectedFilterName)}}function xd(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-filter-value-list-dropdown",13),d.qc("onChange",function(e){return d.Uc(t),d.uc().changeFilters(e)})("onLoadUsers",function(e){return d.Uc(t),d.uc().onLoadUsers.emit(e)})("onLoadStatuses",function(e){return d.Uc(t),d.uc().onLoadStatuses.emit(e)})("onLoadTags",function(e){return d.Uc(t),d.uc().onLoadTags.emit(e)})("onEditTags",function(e){return d.Uc(t),d.uc().onEditTags.emit(e)})("onLoadLocation",function(){return d.Uc(t),d.uc().onLoadLocation.emit()})("onDropDownClose",function(){return d.Uc(t),d.uc().dropdownOpen=!1})("onDropDownOpen",function(){return d.Uc(t),d.uc().dropdownOpen=!0})("onApplySavedFilter",function(e){return d.Uc(t),d.uc().onApplySavedFilter.emit(e)}),d.bd(1,yd,5,5,"div",14),d.bd(2,kd,1,2,"cu-filter-message",15),d.bc()}if(2&t){const t=d.uc();d.Dc("users",t.users)("teamUsers",t.teamUsers)("userGroups",t.userGroups)("guestMap",t.guestMap)("statuses",t.statuses)("tags",t.tags)("tagsLoading",t.tagsLoading)("fields",t.fields)("alwaysCollapseStatusGroups",t.alwaysCollapseStatusGroups)("customFields",t.customFields)("value",t.value)("dateFormat",t.dateFormat)("weekStart",t.weekStart)("disabledTooltip",t.disabledTooltip)("cuTooltip",t.disabledTooltip)("projectId",null==t.project?null:t.project.id)("hierarchies",t.hierarchies)("currentLocation",t.currentLocation)("viewPayload",t.viewPayload),d.Ib(1),d.Dc("ngIf",t.layoutVersion===t.LayoutVersion.Six||!(null!=t.value&&null!=t.value.filters&&t.value.filters.length)),d.Ib(1),d.Dc("ngIf",t.layoutVersion!==t.LayoutVersion.Six&&(null==t.value||null==t.value.filters?null:t.value.filters.length))}}let Sd=(()=>{class t{constructor(){this.alwaysCollapseStatusGroups=!0,this.hierarchies=[],this.dateFormat="m/d/y",this.weekStart=0,this.currentLocation={},this.showClosedToggle=!1,this.onlySearch=!1,this.onlyExtra=!1,this.onLoadUsers=new d.o,this.onLoadStatuses=new d.o,this.onLoadTags=new d.o,this.onEditTags=new d.o,this.onLoadLocation=new d.o,this.onChange=new d.o,this.onClear=new d.o,this.onApplySavedFilter=new d.o,this.trackByKey=Object(j.d)("key"),this.allowClosedToggle=!1,this.LayoutVersion=H.b,this.dropdownOpen=!1,this.destroy$=new B.a,this.filterByTasknameText=$localize`:form input placeholder@@cu-filter-block__form-placeholder_filter-by-task-name:Filter by task n&#xfeff;ame...`,this.filterTasksText=$localize`:used in tooltip@@common_filter-tasks--tooltip-text-1:Filter tasks`,this.filterText=$localize`:form input placeholder@@forms_placeholder--filter:Filter...`,this.trackByFieldId=t=>t.field?t.field.id:t}ngOnInit(){}ngOnChanges(t){t.value&&(this.allowClosedToggle=!this.value||!this.value.filters||!this.value.filters.some(t=>t.field.name===_r.S.name))}ngOnDestroy(){this.destroy$.next()}updateCustomFieldFilter(t,e){}changeSearch(t){this.onChange.emit(Object.assign(Object.assign({},this.value),{search:t}))}changeFilters(t){this.onChange.emit(Object.assign(Object.assign({},this.value),t))}toggleClosed(){this.onChange.emit(Object.assign(Object.assign({},this.value),{showClosed:!this.value.showClosed}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-filter-block"]],hostAttrs:[1,"cu-filter-block"],hostVars:2,hostBindings:function(t,e){2&t&&d.Ob("cu-filter-block_disabled",!!e.disabledTooltip)},inputs:{users:"users",teamUsers:"teamUsers",alwaysCollapseStatusGroups:"alwaysCollapseStatusGroups",userGroups:"userGroups",guestMap:"guestMap",statuses:"statuses",tags:"tags",tagsLoading:"tagsLoading",team:"team",project:"project",hierarchies:"hierarchies",features:"features",dateFormat:"dateFormat",weekStart:"weekStart",currentLocation:"currentLocation",fields:"fields",customFields:"customFields",value:"value",disabledTooltip:"disabledTooltip",selectedFilterName:"selectedFilterName",showClosedToggle:"showClosedToggle",layoutVersion:"layoutVersion",viewPayload:"viewPayload",onlySearch:"onlySearch",onlyExtra:"onlyExtra",searchPlaceholder:"searchPlaceholder",showSearchIcon:"showSearchIcon"},outputs:{onLoadUsers:"onLoadUsers",onLoadStatuses:"onLoadStatuses",onLoadTags:"onLoadTags",onEditTags:"onEditTags",onLoadLocation:"onLoadLocation",onChange:"onChange",onClear:"onClear",onApplySavedFilter:"onApplySavedFilter"},features:[d.Gb],decls:4,vars:2,consts:function(){let t,e,i;return t=$localize`:@@common_hide-closed␟50980ec3209de9dd19fe39b5a1bb83b9e7b445c4␟8980010651553616205:Hide closed`,e=$localize`:@@common_show-closed␟d8aba99cf74cbee70183f2fcae0e3ddc6becc461␟3942220613249867720:Show closed`,i=$localize`:@@common_filter-1␟890f3af868002a6cb5a294ffb31c9f4e2e0cde62␟3562270839315800892: Filter `,[[3,"value","closeModifier","layoutVersion","placeholder","activeFilters","showSearchIcon","onChange",4,"ngIf"],["class","cu-filter-block__extra",3,"cu-filter-block__extra_v6","cu-filter-block__extra_active",4,"ngIf"],["filterValueListDropdown",""],[3,"value","closeModifier","layoutVersion","placeholder","activeFilters","showSearchIcon","onChange"],["class","cu-filter-block__closed",3,"click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"cu-filter-block__closed",3,"click"],[4,"ngIf","ngIfElse"],["showClosed",""],t,e,[3,"ngTemplateOutlet"],[1,"cu-filter-block__extra"],["tooltipModifier","tooltip_nowrap",3,"users","teamUsers","userGroups","guestMap","statuses","tags","tagsLoading","fields","alwaysCollapseStatusGroups","customFields","value","dateFormat","weekStart","disabledTooltip","cuTooltip","projectId","hierarchies","currentLocation","viewPayload","onChange","onLoadUsers","onLoadStatuses","onLoadTags","onEditTags","onLoadLocation","onDropDownClose","onDropDownOpen","onApplySavedFilter"],["class","cu-filter-block__extra-icon-container",3,"cuTooltip",4,"ngIf"],[3,"filterCount","selectedFilterName","onClear",4,"ngIf"],[1,"cu-filter-block__extra-icon-container",3,"cuTooltip"],[1,"cu-filter-block__extra-icon",3,"icon"],["class","cu-filter-block__extra-icon-down","icon","cu2-caret-down",3,"cu-filter-block__extra-icon-down-reverse",4,"ngIf"],["class","cu-filter-block__extra-label",4,"ngIf"],["class","cu-filter-block__extra-count",4,"ngIf"],["icon","cu2-caret-down",1,"cu-filter-block__extra-icon-down"],[1,"cu-filter-block__extra-label"],i,[1,"cu-filter-block__extra-count"],[3,"filterCount","selectedFilterName","onClear"]]},template:function(t,e){1&t&&(d.bd(0,md,3,8,"cu-search-filter",0),d.bd(1,vd,2,5,"div",1),d.bd(2,xd,3,21,"ng-template",null,2,d.cd)),2&t&&(d.Dc("ngIf",!e.onlyExtra),d.Ib(1),d.Dc("ngIf",e.onlyExtra))},directives:[n.q,ld.a,n.x,ud.a,ot.a,nt.a,dd.a],styles:['.cu-filter-block{display:block}.cu-filter-block__closed{color:#7b68ee;font-weight:400;font-size:12px;padding:0 5px;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-filter-block__closed{color:var(--theme-main-color)}}.cu-filter-block__extra .cu-dropdown_open .cu-filter-block__extra-icon,.cu-filter-block__extra:hover .cu-filter-block__extra-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-block__extra .cu-dropdown_open .cu-filter-block__extra-icon,.cu-filter-block__extra:hover .cu-filter-block__extra-icon{fill:var(--theme-main-color)}}.cu-filter-block__extra_v6{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;margin-right:4px;border-radius:6px;height:24px;overflow:hidden}.cu-filter-block__extra_v6 .cu-dropdown_open,.cu-filter-block__extra_v6:hover{background-color:#f2f2f2}.dark-theme .cu-filter-block__extra_v6 .cu-dropdown_open,.dark-theme .cu-filter-block__extra_v6:hover{background-color:#1e272e}.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-icon,.cu-filter-block__extra_v6:hover .cu-filter-block__extra-icon{fill:#53575e}.dark-theme .cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-icon,.dark-theme .cu-filter-block__extra_v6:hover .cu-filter-block__extra-icon{fill:#abaeb0}.cu-filter-block__extra_v6 .cu-filter-value-list-dropdown__toggle{padding:0 8px;height:24px}.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open,.cu-filter-block__extra_active.cu-filter-block__extra_v6:hover{background:transparent}.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-icon,.cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-icon{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-icon,.cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-icon{fill:var(--theme-main-color-dark)}}.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-icon,.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-icon{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-icon,.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-icon{fill:var(--theme-main-color-dark)}}.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-count,.cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-count{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-count,.cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-count{color:var(--theme-main-color-dark)}}.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-count,.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-count{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-dropdown_open .cu-filter-block__extra-count,.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6:hover .cu-filter-block__extra-count{color:var(--theme-main-color-dark)}}.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-filter-block__extra-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-filter-block__extra-icon{fill:var(--theme-main-color)}}.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-filter-block__extra-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-filter-block__extra_active.cu-filter-block__extra_v6 .cu-filter-block__extra-icon{fill:var(--theme-main-color)}}.cu-filter-block__extra_active.cu-filter-block__extra_v6:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;background:#7b68ee;width:100%;height:100%;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu-filter-block__extra_active.cu-filter-block__extra_v6:before{background:var(--theme-main-color)}}.cu-filter-block__extra-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:30px;height:28px;padding:8px 10px 8px 8px;border-radius:0 14px 14px 0;fill:#bcc0c7;border-left:1px solid #e4e4e4}.dark-theme .cu-filter-block__extra-icon{border-color:#1e272e;fill:#828588}.cu-filter-block__extra_v6 .cu-filter-block__extra-icon{width:10px;height:8px;padding:0;margin-right:6px;border:0;fill:#53575e}.dark-theme .cu-filter-block__extra_v6 .cu-filter-block__extra-icon{fill:#abaeb0}.cu-filter-block__extra_v6 .cu-filter-block__extra-icon-container{display:flex;align-items:center;justify-content:center}.cu-filter-block__extra_v6 .cu-filter-block__extra-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu-filter-block__extra_v6 .cu-filter-block__extra-label{color:#abaeb0}.cu-filter-block__extra_v6 .cu-filter-block__extra-count{color:#7b68ee;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif}@supports (--theme-main-color:#7b68ee){.cu-filter-block__extra_v6 .cu-filter-block__extra-count{color:var(--theme-main-color)}}'],encapsulation:2,changeDetection:0}),t})();var Td=i("KDRc"),Cd=i("0Dyw"),Dd=i("iNWM"),Id=i("NV0y"),Pd=i("ugB3"),Md=i("l79I");const Od=["settingsMenu"],$d=["defaultGroupByTemplate"],jd=["sortDropdown"],Ld=["frozenPop"],Ed=["unfreezeViewConfirmModal"],Nd=["editProjectModal"],Ad=["boardSettingsDropdown"],Vd=["settingsDropdown"],zd=["mapViewSettingsDropdown"],Fd=["ganttViewBar"],Bd=["viewBlock"],Rd=["viewSettingsDropdown"],Ud=["paywallLockTemplate"],Gd=["paywallMakePersonalTemplate"],Hd=["customExportListViewTemplate"],Wd=["sharePublicViewModal"],qd=["newCfForm"];function Xd(t,e){1&t&&d.Xb(0,"cu-collapsed-sidebar")}function Yd(t,e){1&t&&(d.ac(0),d.Xb(1,"cu2-search",42),d.Xb(2,"cu-header-quick-switcher",43),d.Zb()),2&t&&(d.Ib(1),d.Dc("iconModifier","cu2-search2"),d.Ib(1),d.Dc("iconModifier","cu2-quick-switch"))}function Kd(t,e){if(1&t&&(d.ac(0),d.Yb(1,44),d.Zb()),2&t){d.uc();const t=d.Rc(69);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}function Zd(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-sprint-finish",45),d.qc("onFetchUnfinished",function(e){return d.Uc(t),d.uc().fetchUnfinished(e)})("onMoveTasks",function(e){return d.Uc(t),d.uc().moveTasks(e)})("onMoveToAdditionalList",function(e){return d.Uc(t),d.uc().moveTasksToOtherList(e)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null,o=null,a=null,r=null,s=null;d.Dc("numTasks",+(null==(e=d.wc(1,9,t.subcategory$))?null:e.unfinishedtaskcount))("projectId",null==(i=d.wc(2,11,t.project$))?null:i.id)("categoryId",null==(n=d.wc(3,13,t.category$))?null:n.id)("subcategoryId",null==(o=d.wc(4,15,t.subcategory$))?null:o.id)("sprintIndex",null==(a=d.wc(5,17,t.subcategory$))?null:a.sprint_index)("unfinishedTasks",d.wc(6,19,t.unfinishedTasks$))("sprintStatus",d.wc(7,21,t.sprintStatus$))("nextSprint",null==(r=d.wc(8,23,t.nextSprint$))?null:r.nextSprint)("newSprint",null==(s=d.wc(9,25,t.nextSprint$))?null:s.newSprint)}}function Jd(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-view-public-sharing-banner",46),d.qc("onLinkClick",function(){return d.Uc(t),d.uc().shareView(null,null)}),d.vc(1,"async"),d.vc(2,"async"),d.bc()}if(2&t){const t=d.uc();let e=null,i=null;d.Dc("seoOptimized",null==(e=d.wc(1,4,t.selectedView$))?null:e.seoOptimized)("sharingLink",null==(i=d.wc(2,6,t.selectedView$))?null:i.publicSharingUrl)("sharingEntity",t.viewsBarStringsService.sharingEntityText)("openModalOnClick",!0)}}function Qd(t,e){}function th(t,e){1&t&&d.bd(0,Qd,0,0,"ng-template")}function eh(t,e){1&t&&(d.cc(0,"div",53),d.Xb(1,"div",54),d.ac(2),d.gc(3,55),d.Zb(),d.bc())}function ih(t,e){if(1&t){const t=d.dc();d.cc(0,"div",62),d.dd(1," : "),d.ac(2),d.gc(3,63),d.Zb(),d.cc(4,"div",64),d.qc("click",function(){return d.Uc(t),d.uc(4).cancelChanges()}),d.gc(5,65),d.bc(),d.bc()}2&t&&d.Dc("@protected",void 0)}function nh(t,e){if(1&t){const t=d.dc();d.cc(0,"div",57,58),d.qc("mouseenter",function(){return d.Uc(t),d.uc(3).setPopState(!0)})("mouseleave",function(){return d.Uc(t),d.uc(3).checkPopState()}),d.Xb(2,"div",59),d.ac(3),d.gc(4,60),d.Zb(),d.bd(5,ih,6,1,"div",61),d.vc(6,"async"),d.bc()}if(2&t){const t=d.uc(3),e=d.Rc(91);d.Dc("popover",e),d.Ib(5),d.Dc("ngIf",d.wc(6,2,t.hasChanges$))}}function oh(t,e){if(1&t){const t=d.dc();d.cc(0,"div",68),d.qc("click",function(){d.Uc(t);const e=d.uc(4),i=d.Rc(81);return e.showViewChangesModal(i)}),d.vc(1,"async"),d.vc(2,"async"),d.bc()}if(2&t){const t=d.uc(4);d.Ob("cu2-views-bar__selected-view-options-icon_spinner",d.wc(1,3,t.isAutoSaving$)),d.Dc("icon",d.wc(2,5,t.isAutoSaving$)?"cu2-spinner":"cu2-save")}}function ah(t,e){1&t&&d.Xb(0,"div",74)}function rh(t,e){1&t&&(d.ac(0),d.gc(1,75),d.Zb())}function sh(t,e){if(1&t){const t=d.dc();d.ac(0),d.ac(1),d.gc(2,76),d.Zb(),d.cc(3,"cu-dropdown-list",77),d.qc("onSelect",function(e){return d.Uc(t),d.uc(6).saveView(e.id)})("onCheck",function(e){return d.Uc(t),d.uc(6).editView(e.id)}),d.vc(4,"async"),d.cc(5,"div",78),d.gc(6,79),d.bc(),d.bc(),d.cc(7,"div",80),d.ac(8),d.gc(9,81),d.Zb(),d.cc(10,"div",82),d.qc("click",function(){return d.Uc(t),d.uc(6).cancelChanges()}),d.gc(11,83),d.bc(),d.bc(),d.Zb()}if(2&t){const t=d.uc(6);d.Ib(3),d.Dc("items",d.wc(4,2,t.viewSettingsSaveItems$))("autoClose",!0)}}function ch(t,e){if(1&t){const t=d.dc();d.ac(0),d.ac(1),d.gc(2,84),d.Zb(),d.cc(3,"div",64),d.qc("click",function(){return d.Uc(t),d.uc(6).cancelChanges()}),d.gc(4,85),d.bc(),d.Zb()}}function lh(t,e){if(1&t&&(d.bd(0,sh,12,4,"ng-container",1),d.vc(1,"async"),d.vc(2,"async"),d.bd(3,ch,5,0,"ng-container",1),d.vc(4,"async"),d.vc(5,"async")),2&t){const t=d.uc(5);let e=null,i=null;d.Dc("ngIf",(null==(e=d.wc(1,2,t.selectedView$))||null==e.permissions?null:e.permissions.editView)||d.wc(2,4,t.canOnlyEditPersonalView$)),d.Ib(3),d.Dc("ngIf",!(null!=(i=d.wc(4,6,t.selectedView$))&&null!=i.permissions&&i.permissions.editView||d.wc(5,8,t.canOnlyEditPersonalView$)))}}function uh(t,e){if(1&t&&(d.cc(0,"div",69),d.bd(1,ah,1,0,"div",70),d.vc(2,"async"),d.cc(3,"div",71),d.bd(4,rh,2,0,"ng-container",72),d.vc(5,"async"),d.bd(6,lh,6,10,"ng-template",null,73,d.cd),d.bc(),d.bc()),2&t){const t=d.Rc(7),e=d.uc(4);let i=null;d.Ib(1),d.Dc("ngIf",null==(i=d.wc(2,3,e.selectedView$))||null==i.permissions?null:i.permissions.editView),d.Ib(3),d.Dc("ngIf",d.wc(5,5,e.isGuestOrSharedNoParent$))("ngIfElse",t)}}function dh(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",69),d.cc(2,"div",86),d.Xb(3,"div",87),d.ac(4),d.gc(5,88),d.Zb(),d.bc(),d.bc(),d.Xb(6,"div",52),d.cc(7,"div",69),d.cc(8,"div",89),d.cc(9,"cu-checkbox",90),d.qc("onChange",function(e){return d.Uc(t),d.uc(4).setAutoSave(e)}),d.vc(10,"async"),d.ac(11),d.gc(12,91),d.Zb(),d.bc(),d.bc(),d.bc(),d.Zb()}if(2&t){const t=d.uc(4);let e=null;d.Ib(9),d.Dc("checked",null==(e=d.wc(10,1,t.selectedView$))?null:e.autoSave)}}function hh(t,e){if(1&t&&(d.ac(0),d.bd(1,oh,3,7,"div",66),d.vc(2,"async"),d.bd(3,uh,8,7,"div",67),d.vc(4,"async"),d.bd(5,dh,13,3,"ng-container",1),d.vc(6,"async"),d.vc(7,"async"),d.Zb()),2&t){const t=d.uc(3);let e=null;d.Ib(1),d.Dc("ngIf",null==(e=d.wc(2,3,t.selectedView$))?null:e.autoSave),d.Ib(2),d.Dc("ngIf",d.wc(4,5,t.hasChanges$)),d.Ib(2),d.Dc("ngIf",d.wc(6,7,t.showAutoSaveCheckbox$)&&!d.wc(7,9,t.hasChanges$))}}function ph(t,e){if(1&t&&(d.ac(0),d.bd(1,nh,7,4,"div",56),d.vc(2,"async"),d.bd(3,hh,8,11,"ng-container",1),d.vc(4,"async"),d.Zb()),2&t){const t=d.uc(2);let e=null,i=null;d.Ib(1),d.Dc("ngIf",null==(e=d.wc(2,2,t.selectedView$))?null:e.locked),d.Ib(2),d.Dc("ngIf",!(null!=(i=d.wc(4,4,t.selectedView$))&&i.locked))}}function fh(t,e){}function gh(t,e){1&t&&d.bd(0,fh,0,0,"ng-template")}const mh=function(t){return{"cu2-views-bar__selected-view-options_saved":t}},vh=function(){return{modifier:"cu2-views-bar__selected-view-options-icon cu2-views-bar__selected-view-options-icon_default icon",icon:"cu2-home-alt-solid"}},bh=function(){return{iconModifier:"cu2-views-bar__selected-view-options-ellipsis icon"}};function _h(t,e){if(1&t&&(d.cc(0,"div",47),d.cc(1,"div",48),d.vc(2,"async"),d.vc(3,"async"),d.cc(4,"div",49),d.bd(5,th,1,0,void 0,50),d.bd(6,eh,4,0,"div",51),d.vc(7,"async"),d.bd(8,ph,5,6,"ng-container",1),d.vc(9,"async"),d.Xb(10,"div",52),d.bd(11,gh,1,0,void 0,50),d.bc(),d.bc(),d.bc()),2&t){const t=d.uc(),e=d.Rc(105),i=d.Rc(103);let n=null;d.Dc("@loading",void 0),d.Ib(1),d.Dc("ngClass",d.Hc(16,mh,d.wc(2,8,t.showAutoSaveCheckbox$)&&!d.wc(3,10,t.hasChanges$))),d.Ib(4),d.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",d.Gc(18,vh)),d.Ib(1),d.Dc("ngIf",(null==(n=d.wc(7,12,t.selectedView$))?null:n.visibility)===t.DataViewVisibility.Private),d.Ib(2),d.Dc("ngIf",!d.wc(9,14,t.isGuestOrSharedNoParent$)),d.Ib(3),d.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.Gc(19,bh))}}function wh(t,e){1&t&&d.Yb(0)}function yh(t,e){if(1&t&&(d.ac(0),d.Xb(1,"cu-calendar-today"),d.Xb(2,"cu-calendar-view-previous",97),d.vc(3,"async"),d.Xb(4,"cu-calendar-view-next",97),d.vc(5,"async"),d.Xb(6,"cu-calendar-view-title"),d.Zb()),2&t){const t=d.uc(2);let e=null,i=null;d.Ib(2),d.Dc("layoutVersion",null==(e=d.wc(3,2,t.user$))?null:e.dashboard),d.Ib(2),d.Dc("layoutVersion",null==(i=d.wc(5,4,t.user$))?null:i.dashboard)}}function kh(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"div",98),d.qc("click",function(){return d.Uc(t),d.uc(2).ganttTodayClick()}),d.cc(2,"div",99),d.gc(3,100),d.bc(),d.bc(),d.Zb()}}function xh(t,e){if(1&t&&(d.Xb(0,"cu-box-settings",101),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async")),2&t){const t=d.uc(2);let e=null,i=null;d.Dc("field",null==(e=d.wc(1,4,t.boxSettings$))||null==e.workload?null:e.workload.field)("disableTimeEstimate",d.wc(2,6,t.isGuestTeam$)&&!(null!=d.wc(3,8,t.team$).guest_settings&&d.wc(3,8,t.team$).guest_settings.can_see_time_estimated))("customFields",d.wc(4,10,t.numericFields$))("customFieldId",null==(i=d.wc(5,12,t.boxSettings$))?null:i.scrumFieldId)}}function Sh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(73);d.Dc("ngTemplateOutlet",t)}}function Th(t,e){1&t&&d.Xb(0,"div",102)}function Ch(t,e){1&t&&d.Yb(0)}function Dh(t,e){1&t&&d.Yb(0)}const Ih=function(){return{onlyExtra:!0}};function Ph(t,e){if(1&t&&(d.ac(0),d.bd(1,Ch,1,0,"ng-container",103),d.bd(2,Dh,1,0,"ng-container",50),d.Zb()),2&t){d.uc(3);const t=d.Rc(107),e=d.Rc(61);d.Ib(1),d.Dc("ngTemplateOutlet",t),d.Ib(1),d.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",d.Gc(3,Ih))}}function Mh(t,e){if(1&t&&(d.ac(0),d.Xb(1,"cu-calendar-period",104),d.vc(2,"async"),d.Zb()),2&t){const t=d.uc(3);let e=null;d.Ib(1),d.Dc("layoutVersion",null==(e=d.wc(2,1,t.user$))?null:e.dashboard)}}function Oh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(3);const t=d.Rc(53);d.Dc("ngTemplateOutlet",t)}}function $h(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(3);const t=d.Rc(73);d.Dc("ngTemplateOutlet",t)}}function jh(t,e){if(1&t&&(d.ac(0),d.bd(1,Ph,3,4,"ng-container",1),d.vc(2,"async"),d.bd(3,Mh,3,3,"ng-container",1),d.vc(4,"async"),d.bd(5,Oh,1,1,"ng-container",94),d.vc(6,"async"),d.bd(7,$h,1,1,"ng-container",94),d.vc(8,"async"),d.Zb()),2&t){const t=d.uc(2);d.Ib(1),d.Dc("ngIf",!d.wc(2,4,t.isTimelineOrWorkloadView$)),d.Ib(2),d.Dc("ngIf",d.wc(4,6,t.isCalendarView$)),d.Ib(2),d.Dc("ngIf",d.wc(6,8,t.isCalendarView$)),d.Ib(2),d.Dc("ngIf",d.wc(8,10,t.isActivityView$))}}function Lh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(63);d.Dc("ngTemplateOutlet",t)}}function Eh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(49);d.Dc("ngTemplateOutlet",t)}}function Nh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(47);d.Dc("ngTemplateOutlet",t)}}function Ah(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(55);d.Dc("ngTemplateOutlet",t)}}function Vh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(57);d.Dc("ngTemplateOutlet",t)}}const zh=function(){return{modifier:"cu-filter-assignees_two-rows"}};function Fh(t,e){if(1&t&&d.Yb(0,105),2&t){d.uc(2);const t=d.Rc(79);d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,zh))}}function Bh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(69);d.Dc("ngTemplateOutlet",t)}}function Rh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(53);d.Dc("ngTemplateOutlet",t)}}function Uh(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(51);d.Dc("ngTemplateOutlet",t)}}function Gh(t,e){1&t&&d.Yb(0)}function Hh(t,e){}function Wh(t,e){1&t&&d.bd(0,Hh,0,0,"ng-template")}const qh=function(){return{modifier:"cu2-views-bar__btn cu2-views-bar__btn_label",iconModifier:"cu2-views-bar__btn-icon cu2-views-bar__btn-icon_ellipsis icon"}};function Xh(t,e){if(1&t&&(d.ac(0),d.bd(1,Wh,1,0,void 0,50),d.Zb()),2&t){d.uc(2);const t=d.Rc(103);d.Ib(1),d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,qh))}}const Yh=function(t,e,i){return{"cu2-views-bar__options_team-sidebar-opened":t,"cu2-views-bar__options-gantt":e,"cu2-views-bar__options_activity":i}},Kh=function(){return{onlyExtra:!1}},Zh=function(){return{modifier:"cu2-views-bar__btn-toggle_view-settings-two-rows"}};function Jh(t,e){if(1&t&&(d.cc(0,"div",92),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.bd(6,wh,1,0,"ng-container",50),d.bd(7,yh,7,6,"ng-container",1),d.vc(8,"async"),d.vc(9,"async"),d.bd(10,kh,4,0,"ng-container",1),d.vc(11,"async"),d.vc(12,"async"),d.bd(13,xh,6,14,"cu-box-settings",93),d.vc(14,"async"),d.vc(15,"async"),d.bd(16,Sh,1,1,"ng-container",94),d.vc(17,"async"),d.vc(18,"async"),d.bd(19,Th,1,0,"div",95),d.vc(20,"async"),d.bd(21,jh,9,12,"ng-container",1),d.vc(22,"async"),d.bd(23,Lh,1,1,"ng-container",94),d.vc(24,"async"),d.bd(25,Eh,1,1,"ng-container",94),d.vc(26,"async"),d.Yb(27,44),d.Yb(28,44),d.bd(29,Nh,1,1,"ng-container",94),d.vc(30,"async"),d.vc(31,"async"),d.bd(32,Ah,1,1,"ng-container",94),d.vc(33,"async"),d.bd(34,Vh,1,1,"ng-container",94),d.vc(35,"async"),d.bd(36,Fh,1,3,"ng-container",96),d.vc(37,"async"),d.bd(38,Bh,1,1,"ng-container",94),d.vc(39,"async"),d.vc(40,"async"),d.vc(41,"async"),d.bd(42,Rh,1,1,"ng-container",94),d.vc(43,"async"),d.vc(44,"async"),d.bd(45,Uh,1,1,"ng-container",94),d.vc(46,"async"),d.Yb(47,44),d.vc(48,"async"),d.bd(49,Gh,1,0,"ng-container",50),d.bd(50,Xh,2,3,"ng-container",1),d.vc(51,"async"),d.vc(52,"async"),d.vc(53,"async"),d.vc(54,"async"),d.bc()),2&t){const t=d.uc(),e=d.Rc(61),i=d.Rc(65),n=d.Rc(71),o=d.Rc(77);let a=null,r=null,s=null,c=null,l=null,u=null,h=null,p=null,f=null,g=null,m=null;d.Ob("cu2-views-bar__options_v6",(null==(a=d.wc(1,26,t.user$))?null:a.dashboard)===t.LayoutVersion.Six),d.Dc("ngClass",d.Jc(92,Yh,d.wc(2,28,t.isTeamSidebarOpen$),d.wc(3,30,t.isGanttView$)&&(null==(r=d.wc(4,32,t.user$))?null:r.dashboard)!==t.LayoutVersion.Six,d.wc(5,34,t.isActivityView$))),d.Ib(6),d.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",d.Gc(96,Kh)),d.Ib(1),d.Dc("ngIf",(null==(s=d.wc(8,36,t.user$))?null:s.dashboard)===t.LayoutVersion.Six&&d.wc(9,38,t.isCalendarView$)),d.Ib(3),d.Dc("ngIf",(null==(c=d.wc(11,40,t.user$))?null:c.dashboard)===t.LayoutVersion.Six&&d.wc(12,42,t.isGanttView$)),d.Ib(3),d.Dc("ngIf",d.wc(14,44,t.isBoxView$)&&(null==(l=d.wc(15,46,t.user$))?null:l.dashboard)===t.LayoutVersion.Six),d.Ib(3),d.Dc("ngIf",d.wc(17,48,t.isActivityView$)&&(null==(u=d.wc(18,50,t.user$))?null:u.dashboard)!==t.LayoutVersion.Six),d.Ib(3),d.Dc("ngIf",!d.wc(20,52,t.isTimelineOrWorkloadView$)),d.Ib(2),d.Dc("ngIf",(null==(h=d.wc(22,54,t.user$))?null:h.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",!d.wc(24,56,t.isTimelineOrWorkloadView$)),d.Ib(2),d.Dc("ngIf",d.wc(26,58,t.isMapView$)),d.Ib(2),d.Dc("ngTemplateOutlet",i),d.Ib(1),d.Dc("ngTemplateOutlet",n),d.Ib(1),d.Dc("ngIf",(null==(p=d.wc(30,60,t.user$))?null:p.dashboard)!==t.LayoutVersion.Six&&d.wc(31,62,t.isCalendarView$)),d.Ib(3),d.Dc("ngIf",d.wc(33,64,t.isGanttView$)),d.Ib(2),d.Dc("ngIf",d.wc(35,66,t.isTimelineOrWorkloadView$)),d.Ib(2),d.Dc("ngIf",!d.wc(37,68,t.isTimelineOrWorkloadView$)),d.Ib(2),d.Dc("ngIf",!d.wc(39,70,t.isTimelineOrWorkloadView$)&&!d.wc(40,72,t.isGanttView$)&&(null==(f=d.wc(41,74,t.user$))?null:f.dashboard)!==t.LayoutVersion.Six),d.Ib(4),d.Dc("ngIf",d.wc(43,76,t.isCalendarView$)&&(null==(g=d.wc(44,78,t.user$))?null:g.dashboard)!==t.LayoutVersion.Six),d.Ib(3),d.Dc("ngIf",d.wc(46,80,t.isMapView$)),d.Ib(2),d.Dc("ngTemplateOutlet",d.wc(48,82,t.viewsBarService.headerTemplate$)),d.Ib(2),d.Dc("ngTemplateOutlet",o)("ngTemplateOutletContext",d.Gc(97,Zh)),d.Ib(1),d.Dc("ngIf",!d.wc(51,84,t.isGuestTeam$)&&!d.wc(52,86,t.isBlankView$)&&!d.wc(53,88,t.isMindmapViewCustom$)&&(null==(m=d.wc(54,90,t.user$))?null:m.dashboard)===t.LayoutVersion.Six)}}function Qh(t,e){if(1&t&&(d.Xb(0,"cu-me-settings",106),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async")),2&t){const t=d.uc();d.Dc("isGanttView",d.wc(1,5,t.isGanttView$))("isCalendarView",d.wc(2,7,t.isCalendarView$))("isGridView",d.wc(3,9,t.isGridView$))("isTimelineOrWorkloadView",d.wc(4,11,t.isTimelineOrWorkloadView$))("@loading",void 0)}}function tp(t,e){if(1&t&&(d.Xb(0,"cu-calendar-view-title"),d.Xb(1,"cu-calendar-view-previous",97),d.vc(2,"async"),d.Xb(3,"cu-calendar-view-next",97),d.vc(4,"async"),d.Xb(5,"cu-calendar-today"),d.Xb(6,"cu-calendar-period",104),d.vc(7,"async")),2&t){const t=d.uc();let e=null,i=null,n=null;d.Ib(1),d.Dc("layoutVersion",null==(e=d.wc(2,3,t.user$))?null:e.dashboard),d.Ib(2),d.Dc("layoutVersion",null==(i=d.wc(4,5,t.user$))?null:i.dashboard),d.Ib(3),d.Dc("layoutVersion",null==(n=d.wc(7,7,t.user$))?null:n.dashboard)}}function ep(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-map-preferences",107),d.qc("shareView",function(e){d.Uc(t);const i=d.uc();return i.shareView(i.DataViewType.Map,e)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bc()}if(2&t){const t=d.uc();d.Dc("view",d.wc(1,4,t.selectedView$))("team",d.wc(2,6,t.team$))("user",d.wc(3,8,t.user$))("canShareView",d.wc(4,10,t.showSharing$))}}function ip(t,e){}function np(t,e){1&t&&d.bd(0,ip,0,0,"ng-template")}function op(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",108,109),d.qc("onCheck",function(e){return d.Uc(t),d.uc().changeSettings(e.id)})("onEditViewSettings",function(e){return d.Uc(t),d.uc().editViewSettings(e)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.bd(10,np,1,0,void 0,50),d.bc()}if(2&t){const t=d.uc(),e=d.Rc(89),i=d.Rc(75);let n=null,o=null,a=null,r=null;d.Ob("cu2-views-bar__btn_label",(null==(n=d.wc(2,10,t.user$))?null:n.dashboard)===t.LayoutVersion.Six),d.Dc("title",(null==(o=d.wc(3,12,t.user$))?null:o.dashboard)===t.LayoutVersion.Six?t.commonStringsService.showText:t.commonStringsService.viewSettingsText)("titleTemplate",(null==(a=d.wc(4,14,t.sharedData.compatCurrentTeam$))?null:a.role)<=t.UserRole.ADMIN&&d.wc(5,16,t.project$)&&(null==(a=d.wc(6,18,t.selectedView$))?null:a.viewType)===t.DataViewType.List?e:null)("toggleModifier",(null==(r=d.wc(7,20,t.user$))?null:r.dashboard)===t.LayoutVersion.Six?"cu2-views-bar__btn-dropdown-list-toggle":null)("items",d.wc(8,22,t.mapSettingItems$))("autoClose",!1)("dropdownDisabled",!!d.wc(9,24,t.lockedTooltip$)),d.Ib(10),d.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.Gc(26,Zh))}}function ap(t,e){if(1&t&&d.Xb(0,"div",114),2&t){const t=d.uc(2);d.Dc("icon",null!=t.settingsMenu&&t.settingsMenu.customFieldsMenuVisible?"close-bold":"ellipsis")}}function rp(t,e){1&t&&(d.ac(0),d.Xb(1,"div",115),d.cc(2,"div",116),d.gc(3,117),d.bc(),d.Zb())}function sp(t,e){if(1&t){const t=d.dc();d.cc(0,"div",118),d.cc(1,"cu-calendar-settings-menu",119,120),d.qc("onChangeShowSubtasks",function(e){return d.Uc(t),d.uc(2).changeShowSubtasks(e)})("updateViewPreferences",function(e){return d.Uc(t),d.uc(2).updateCalendarSettings(e)}),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc(2),e=d.Rc(89);let i=null;d.Ib(1),d.Dc("customFields",d.wc(3,7,t.allCustomFields$))("titleTemplate",(null==(i=d.wc(4,9,t.sharedData.compatCurrentTeam$))?null:i.role)<=t.UserRole.ADMIN&&d.wc(5,11,t.project$)?e:null)("viewPreferences",d.wc(6,13,t.calendarViewPreferences$))("showViewSettings",!0)("showTaskCardSettings",!0)("colorByFields",d.wc(7,15,t.colorByFields$))("subtasksType",d.wc(8,17,t.subtasksType$))}}const cp=function(){return["bottom-right","auto"]};function lp(t,e){if(1&t&&(d.cc(0,"div",110),d.vc(1,"async"),d.vc(2,"async"),d.cc(3,"div",111),d.vc(4,"async"),d.bd(5,ap,1,1,"div",112),d.vc(6,"async"),d.vc(7,"async"),d.bd(8,rp,4,0,"ng-container",1),d.vc(9,"async"),d.bc(),d.bd(10,sp,9,19,"div",113),d.bc()),2&t){const t=d.uc();let e=null,i=null,n=null,o=null;d.Ob("cu2-views-bar__btn_label",(null==(e=d.wc(1,10,t.user$))?null:e.dashboard)===t.LayoutVersion.Six),d.Dc("dropdownCloseOnInsideClick",!1)("dropdownPlacement",d.Gc(22,cp))("cuTooltip",d.wc(2,12,t.lockedTooltip$))("dropdownCloseOnModal",!0),d.Ib(3),d.Ob("cu2-views-bar__btn-dropdown-list-toggle",(null==(i=d.wc(4,14,t.user$))?null:i.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==(n=d.wc(6,16,t.user$))?null:n.dashboard)===t.LayoutVersion.Four||(null==(n=d.wc(7,18,t.user$))?null:n.dashboard)===t.LayoutVersion.Five),d.Ib(3),d.Dc("ngIf",(null==(o=d.wc(9,20,t.user$))?null:o.dashboard)===t.LayoutVersion.Six)}}function up(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-gantt-preferences",121,122),d.qc("shareView",function(e){d.Uc(t);const i=d.uc();return i.shareView(i.DataViewType.Gantt,e)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.bc()}if(2&t){const t=d.uc();d.Dc("preferences",d.wc(2,5,t.ganttPreferences$))("view",d.wc(3,7,t.selectedView$))("team",d.wc(4,9,t.team$))("user",d.wc(5,11,t.user$))("canShareView",d.wc(6,13,t.showSharing$))}}function dp(t,e){1&t&&d.Yb(0)}function hp(t,e){if(1&t&&(d.ac(0,126),d.bd(1,dp,1,0,"ng-container",103),d.Zb()),2&t){d.uc(2);const t=d.Rc(107);d.Ib(1),d.Dc("ngTemplateOutlet",t)}}function pp(t,e){1&t&&d.Yb(0)}function fp(t,e){if(1&t&&(d.ac(0,127),d.bd(1,pp,1,0,"ng-container",50),d.Zb()),2&t){d.uc(2);const t=d.Rc(61);d.Ib(1),d.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.Gc(2,Ih))}}function gp(t,e){if(1&t&&(d.cc(0,"cu-timeline-views-bar-settings",123),d.vc(1,"async"),d.vc(2,"async"),d.bd(3,hp,2,1,"ng-container",124),d.vc(4,"async"),d.vc(5,"async"),d.bd(6,fp,2,3,"ng-container",125),d.vc(7,"async"),d.vc(8,"async"),d.bc()),2&t){const t=d.uc(),e=d.Rc(63),i=d.Rc(79),n=d.Rc(67),o=d.Rc(69);let a=null,r=null,s=null;d.Dc("dataView",d.wc(1,7,t.selectedView$))("sortByTemplate",e)("assigneesFilterTemplate",i)("groupByTemplate",n)("sharingTemplate",(null==(a=d.wc(2,9,t.user$))?null:a.dashboard)!==t.LayoutVersion.Six?o:null),d.Ib(3),d.Dc("ngIf",(null==(r=d.wc(4,11,t.user$))?null:r.dashboard)===t.LayoutVersion.Six&&d.wc(5,13,t.isTimelineOrWorkloadView$)),d.Ib(3),d.Dc("ngIf",(null==(s=d.wc(7,15,t.user$))?null:s.dashboard)===t.LayoutVersion.Six&&d.wc(8,17,t.isTimelineOrWorkloadView$))}}function mp(t,e){1&t&&(d.ac(0),d.Xb(1,"div",130),d.cc(2,"span",131),d.gc(3,132),d.bc(),d.Xb(4,"div",133),d.Zb()),2&t&&(d.Ib(4),d.Dc("icon","cu2-angle-right"))}function vp(t,e){1&t&&d.Xb(0,"div",134)}function bp(t,e){if(1&t&&(d.cc(0,"cu-export-view",128),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,mp,5,1,"ng-container",72),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.bd(9,vp,1,0,"ng-template",null,129,d.cd),d.bc()),2&t){const t=d.Rc(10),e=d.uc();let i=null;d.Dc("view",d.wc(1,6,e.selectedView$))("customFields",d.wc(2,8,e.allCustomFields$))("project",d.wc(3,10,e.project$))("team",d.wc(4,12,e.sharedData.compatCurrentTeam$)),d.Ib(5),d.Dc("ngIf",(null==(i=d.wc(6,14,e.user$))?null:i.dashboard)===e.LayoutVersion.Four||(null==(i=d.wc(7,16,e.user$))?null:i.dashboard)===e.LayoutVersion.Five||(null==(i=d.wc(8,18,e.user$))?null:i.dashboard)===e.LayoutVersion.Six)("ngIfElse",t)}}function _p(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-filter-block",136),d.qc("onChange",function(e){return d.Uc(t),d.uc(2).changeFilters(e)})("onClear",function(){return d.Uc(t),d.uc(2).clearFilters()})("onLoadTags",function(e){return d.Uc(t),d.uc(2).loadTags(e)})("onEditTags",function(e){return d.Uc(t),d.uc(2).editTags(e)})("onLoadLocation",function(){return d.Uc(t),d.uc(2).loadHierarchies()})("onApplySavedFilter",function(e){return d.Uc(t),d.uc(2).applySavedFilter(e)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"async"),d.vc(11,"async"),d.vc(12,"async"),d.vc(13,"async"),d.vc(14,"async"),d.vc(15,"async"),d.vc(16,"async"),d.vc(17,"async"),d.vc(18,"async"),d.vc(19,"async"),d.vc(20,"async"),d.vc(21,"async"),d.bc()}if(2&t){const t=d.uc().onlyExtra,e=d.uc();let i=null,n=null,o=null,a=null,r=null;d.Dc("users",d.wc(1,24,e.users$))("teamUsers",d.wc(2,26,e.teamUsers$))("statuses",d.wc(3,28,e.statuses$))("tags",e.tags)("tagsLoading",e.tagsLoading)("team",d.wc(4,30,e.team$))("project",d.wc(5,32,e.project$))("alwaysCollapseStatusGroups",!d.wc(6,34,e.isBoardView$))("hierarchies",d.wc(7,36,e.hierarchies$))("currentLocation",d.wc(8,38,e.currentLocation$))("fields",d.wc(9,40,e.listviewFilterFields$))("customFields",d.wc(10,42,e.allCustomFields$))("value",d.wc(11,44,e.filterValue$))("selectedFilterName",d.wc(12,46,e.selectedDataViewFilterName$))("disabledTooltip",d.wc(13,48,e.lockedTooltip$))("dateFormat",(null==(i=d.wc(14,50,e.user$))?null:i.date_format)||"m/d/y")("userGroups",d.wc(15,52,e.userGroups$))("weekStart",(null==(n=d.wc(16,54,e.user$))?null:n.week_start_day)||0)("layoutVersion",null==(o=d.wc(17,56,e.user$))?null:o.dashboard)("viewPayload",d.wc(18,58,e.viewPayload$))("guestMap",d.wc(19,60,e.guestMap$))("onlySearch",(null==(a=d.wc(20,62,e.user$))?null:a.dashboard)===e.LayoutVersion.Six)("onlyExtra",t)("showSearchIcon",(null==(r=d.wc(21,64,e.user$))?null:r.dashboard)===e.LayoutVersion.Six)}}function wp(t,e){if(1&t&&(d.bd(0,_p,22,66,"cu-filter-block",135),d.vc(1,"async")),2&t){const t=d.uc();d.Dc("ngIf",!d.wc(1,1,t.isMindmapViewCustom$))}}function yp(t,e){1&t&&d.Xb(0,"div",144)}function kp(t,e){1&t&&(d.ac(0),d.dd(1,":"),d.Zb())}function xp(t,e){if(1&t&&(d.cc(0,"div",145),d.dd(1),d.vc(2,"async"),d.bc()),2&t){const t=d.uc(3);d.Ib(1),d.fd(" ",d.wc(2,1,t.sortingTitle$)," ")}}function Sp(t,e){1&t&&d.Xb(0,"div",146)}function Tp(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",138,139),d.qc("onSelect",function(e){return d.Uc(t),d.uc(2).changeGroupSort(e.id)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,yp,1,0,"div",140),d.vc(6,"async"),d.cc(7,"div",116),d.ac(8),d.gc(9,141),d.Zb(),d.bd(10,kp,2,0,"ng-container",1),d.vc(11,"async"),d.vc(12,"async"),d.bc(),d.bd(13,xp,3,3,"div",142),d.vc(14,"async"),d.bd(15,Sp,1,0,"div",143),d.vc(16,"async"),d.bc()}if(2&t){const t=d.uc(2);let e=null,i=null,n=null,o=null;d.Ob("cu2-views-bar__btn_active",d.wc(2,11,t.sortingTitle$)),d.Dc("title",t.viewsBarStringsService.sortByText)("items",d.wc(3,13,t.sortingItems$))("autoClose",!1)("dropdownDisabled",!!d.wc(4,15,t.lockedTooltip$))("toggleModifier","cu2-views-bar__btn-dropdown-list-toggle"),d.Ib(5),d.Dc("ngIf",(null==(e=d.wc(6,17,t.user$))?null:e.dashboard)===t.LayoutVersion.Six),d.Ib(5),d.Dc("ngIf",(null==(i=d.wc(11,19,t.user$))?null:i.dashboard)===t.LayoutVersion.Six&&d.wc(12,21,t.sortingTitle$)),d.Ib(3),d.Dc("ngIf",(null==(n=d.wc(14,23,t.user$))?null:n.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==(o=d.wc(16,25,t.user$))?null:o.dashboard)!==t.LayoutVersion.Six)}}function Cp(t,e){if(1&t&&(d.bd(0,Tp,17,27,"cu-dropdown-list",137),d.vc(1,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,1,t.showSorting$))}}function Dp(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc(2);const t=d.Rc(67);d.Dc("ngTemplateOutlet",t)}}function Ip(t,e){if(1&t&&(d.bd(0,Dp,1,1,"ng-container",94),d.vc(1,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,1,t.showGrouping$))}}function Pp(t,e){1&t&&d.Xb(0,"div",150)}function Mp(t,e){if(1&t&&(d.cc(0,"div",145),d.dd(1),d.vc(2,"async"),d.bc()),2&t){const t=d.uc(2);d.Ib(1),d.fd(" ",d.wc(2,1,t.groupingFieldTitle$)," ")}}function Op(t,e){1&t&&d.Xb(0,"div",146)}const $p=function(){return["bottom"]};function jp(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",147),d.qc("onSelect",function(e){return d.Uc(t),d.uc().changeGroupBy(e.id)})("onAddClick",function(e){return d.Uc(t),d.uc().dropdownAddClick(e)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.bd(7,Pp,1,0,"div",148),d.vc(8,"async"),d.cc(9,"div",116),d.ac(10),d.gc(11,149),d.Zb(),d.dd(12,": "),d.bc(),d.bd(13,Mp,3,3,"div",142),d.vc(14,"async"),d.bd(15,Op,1,0,"div",143),d.vc(16,"async"),d.bc()}if(2&t){const t=d.uc(),e=d.Rc(97);let i=null,n=null;d.Ob("cu2-views-bar__btn_active",d.wc(1,17,t.groupingFieldTitle$)&&"None"!==d.wc(2,19,t.groupingFieldTitle$)),d.Dc("title",t.viewsBarStringsService.groupByText)("titleHelpUrl","https://docs.clickup.com/clickup-2-0/task-view-grouping")("items",d.wc(3,21,t.groupingItems$))("autoClose",!0)("menuModifier","cu2-views-bar__group-by")("toggleModifier","cu2-views-bar__btn-dropdown-list-toggle")("dropdownDisabled",!!d.wc(4,23,t.lockedTooltip$)||d.wc(5,25,t.showGroupByPaywall$))("cuPopover",e)("containerClass","popover_white popover_no-max-width popover_no-padding")("outsideClick",!0)("trigger",d.wc(6,27,t.showGroupByPaywall$)?"click":null)("placement",d.Gc(35,$p)),d.Ib(7),d.Dc("ngIf",(null==(i=d.wc(8,29,t.user$))?null:i.dashboard)===t.LayoutVersion.Six),d.Ib(6),d.Dc("ngIf",d.wc(14,31,t.groupingFieldTitle$)),d.Ib(2),d.Dc("ngIf",(null==(n=d.wc(16,33,t.user$))?null:n.dashboard)!==t.LayoutVersion.Six)}}function Lp(t,e){if(1&t){const t=d.dc();d.cc(0,"div",152),d.qc("click",function(){return d.Uc(t),d.uc(2).shareView(null,null)}),d.Xb(1,"div",153),d.cc(2,"div",154),d.gc(3,155),d.bc(),d.bc()}}function Ep(t,e){if(1&t&&(d.bd(0,Lp,4,0,"div",151),d.vc(1,"async"),d.vc(2,"async")),2&t){const t=d.uc();let e=null;d.Dc("ngIf",d.wc(1,1,t.showSharing$)&&(null==(e=d.wc(2,3,t.selectedView$))?null:e.visibility)!==t.DataViewVisibility.Private)}}function Np(t,e){if(1&t){const t=d.dc();d.cc(0,"div",158),d.qc("click",function(){d.Uc(t);const e=d.uc(3);return e.changeShowSubtasks(e.DataViewSubtasks.None)}),d.Xb(1,"div",159),d.vc(2,"async"),d.cc(3,"div",116),d.gc(4,160),d.bc(),d.bc()}if(2&t){const t=d.uc(3);let e=null;d.Ib(1),d.Dc("icon",(null==(e=d.wc(2,1,t.user$))?null:e.dashboard)===t.LayoutVersion.Six?"cu2-subtask":"cu2-subtasks")}}function Ap(t,e){if(1&t){const t=d.dc();d.cc(0,"div",158),d.qc("click",function(){d.Uc(t);const e=d.uc(3);return e.changeShowSubtasks(e.DataViewSubtasks.StandAlone)}),d.Xb(1,"div",159),d.vc(2,"async"),d.cc(3,"div",116),d.gc(4,161),d.bc(),d.bc()}if(2&t){const t=d.uc(3);let e=null;d.Ib(1),d.Dc("icon",(null==(e=d.wc(2,1,t.user$))?null:e.dashboard)===t.LayoutVersion.Six?"cu2-subtask":"cu2-subtasks")}}function Vp(t,e){if(1&t&&(d.ac(0),d.bd(1,Np,5,3,"div",157),d.vc(2,"async"),d.bd(3,Ap,5,3,"div",157),d.vc(4,"async"),d.Zb()),2&t){const t=d.uc(2);d.Ib(1),d.Dc("ngIf",d.wc(2,2,t.subtasksType$)!=t.DataViewSubtasks.None),d.Ib(2),d.Dc("ngIf",d.wc(4,4,t.subtasksType$)===t.DataViewSubtasks.None)}}function zp(t,e){if(1&t&&(d.ac(0,145),d.dd(1),d.vc(2,"async"),d.Zb()),2&t){const t=d.uc(4);d.Ib(1),d.fd(": ",d.wc(2,1,t.subtasksTitleV6$)," ")}}function Fp(t,e){if(1&t&&(d.ac(0),d.Xb(1,"div",163),d.cc(2,"div",116),d.ac(3),d.gc(4,164),d.Zb(),d.bd(5,zp,3,3,"ng-container",142),d.vc(6,"async"),d.vc(7,"async"),d.bc(),d.Zb()),2&t){const t=d.uc(3);d.Ib(5),d.Dc("ngIf",d.wc(6,1,t.subtasksTitleV6$)&&d.wc(7,3,t.subtasksType$)!==t.DataViewSubtasks.None)}}function Bp(t,e){if(1&t&&(d.cc(0,"div",145),d.dd(1),d.vc(2,"async"),d.bc()),2&t){const t=d.uc(4);d.Ib(1),d.fd(" ",d.wc(2,1,t.subtasksTitle$)," ")}}function Rp(t,e){if(1&t&&(d.ac(0),d.cc(1,"div",116),d.ac(2),d.gc(3,165),d.Zb(),d.dd(4,": "),d.bc(),d.bd(5,Bp,3,3,"div",142),d.vc(6,"async"),d.Xb(7,"div",146),d.Zb()),2&t){const t=d.uc(3);d.Ib(5),d.Dc("ngIf",d.wc(6,1,t.subtasksTitle$))}}function Up(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",162),d.qc("onSelect",function(e){return d.Uc(t),d.uc(2).changeShowSubtasks(e.id)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,Fp,8,5,"ng-container",1),d.vc(6,"async"),d.bd(7,Rp,8,3,"ng-container",1),d.vc(8,"async"),d.bc()}if(2&t){const t=d.uc(2);let e=null,i=null,n=null;d.Ob("cu2-views-bar__btn_active",(null==(e=d.wc(1,9,t.user$))?null:e.dashboard)===t.LayoutVersion.Six&&d.wc(2,11,t.subtasksType$)!==t.DataViewSubtasks.None),d.Dc("title",t.viewsBarStringsService.showSubtasksText)("items",d.wc(3,13,t.showSubtaskItems$))("autoClose",!0)("toggleModifier","cu2-views-bar__btn-dropdown-list-toggle")("dropdownDisabled",!!d.wc(4,15,t.lockedTooltip$)),d.Ib(5),d.Dc("ngIf",(null==(i=d.wc(6,17,t.user$))?null:i.dashboard)===t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==(n=d.wc(8,19,t.user$))?null:n.dashboard)!==t.LayoutVersion.Six)}}function Gp(t,e){if(1&t&&(d.bd(0,Vp,5,6,"ng-container",1),d.vc(1,"async"),d.vc(2,"async"),d.bd(3,Up,9,21,"cu-dropdown-list",156),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,2,t.isActivityView$)||d.wc(2,4,t.isGridView$)),d.Ib(3),d.Dc("ngIf",!(d.wc(4,6,t.isGanttView$)||d.wc(5,8,t.isCalendarView$)||d.wc(6,10,t.isActivityView$)||d.wc(7,12,t.isGridView$)||d.wc(8,14,t.isTimelineOrWorkloadView$)||d.wc(9,16,t.isMindmapView$)))}}function Hp(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-activity-fields-filter",166),d.qc("onChangeValues",function(e){return d.Uc(t),d.uc().setActivityFilter("fields",e)})("onChangeAssignedCommentUserIds",function(e){return d.Uc(t),d.uc().setActivityFilter("assigned_comment_users",e)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null;d.Dc("values",null==(e=d.wc(1,4,t.activityFilters$))?null:e.fields)("layoutVersion",null==(i=d.wc(2,6,t.user$))?null:i.dashboard)("allUsers",d.wc(3,8,t.users$))("assignedCommentUserIds",null==(n=d.wc(4,10,t.activityFilters$))?null:n.assigned_comment_users)}}function Wp(t,e){if(1&t&&(d.Xb(0,"div",168),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async")),2&t){const t=d.uc().modifier,e=d.uc();let i=null;d.Dc("ngClass",t)("icon",(null==(i=d.wc(1,3,e.user$))?null:i.dashboard)===e.LayoutVersion.Three||(null==(i=d.wc(2,5,e.user$))?null:i.dashboard)===e.LayoutVersion.Four||(null==(i=d.wc(3,7,e.user$))?null:i.dashboard)===e.LayoutVersion.Five?"cu2-ellipsis":"cu2-cog")("cuTooltip",d.wc(4,9,e.lockedTooltip$)||e.commonStringsService.viewSettingsText)}}function qp(t,e){1&t&&(d.ac(0),d.Xb(1,"div",169),d.cc(2,"div",116),d.gc(3,170),d.bc(),d.Zb())}function Xp(t,e){if(1&t&&(d.bd(0,Wp,5,11,"div",167),d.vc(1,"async"),d.bd(2,qp,4,0,"ng-container",1),d.vc(3,"async")),2&t){const t=d.uc();let e=null,i=null;d.Dc("ngIf",(null==(e=d.wc(1,2,t.user$))?null:e.dashboard)!==t.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",(null==(i=d.wc(3,4,t.user$))?null:i.dashboard)===t.LayoutVersion.Six)}}function Yp(t,e){}function Kp(t,e){1&t&&d.bd(0,Yp,0,0,"ng-template")}const Zp=function(t){return{modifier:t}};function Jp(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",175,176),d.qc("onCheck",function(e){return d.Uc(t),d.uc(2).changeSettings(e.id)})("onEditViewSettings",function(e){return d.Uc(t),d.uc(2).editViewSettings(e)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.bd(10,Kp,1,0,void 0,50),d.bc()}if(2&t){const t=d.uc().modifier,e=d.uc(),i=d.Rc(89),n=d.Rc(75);let o=null,a=null,r=null,s=null;d.Ob("cu2-views-bar__btn_label",(null==(o=d.wc(2,11,e.user$))?null:o.dashboard)===e.LayoutVersion.Six),d.Dc("title",(null==(a=d.wc(3,13,e.user$))?null:a.dashboard)===e.LayoutVersion.Six?e.commonStringsService.showText:e.commonStringsService.viewSettingsText)("titleTemplate",(null==(r=d.wc(4,15,e.sharedData.compatCurrentTeam$))?null:r.role)<=e.UserRole.ADMIN&&d.wc(5,17,e.project$)&&(null==(r=d.wc(6,19,e.selectedView$))?null:r.viewType)===e.DataViewType.List?i:null)("toggleModifier",(null==(s=d.wc(7,21,e.user$))?null:s.dashboard)===e.LayoutVersion.Six?"cu2-views-bar__btn-dropdown-list-toggle":null)("menuContainerModifier","cu-dropdown__menu_overflow-hidden")("items",d.wc(8,23,e.settingItems$))("autoClose",!1)("dropdownDisabled",!!d.wc(9,25,e.lockedTooltip$)),d.Ib(10),d.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",d.Hc(27,Zp,t))}}function Qp(t,e){}function tf(t,e){1&t&&d.bd(0,Qp,0,0,"ng-template")}function ef(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",177,176),d.qc("onCheck",function(e){return d.Uc(t),d.uc(2).changeBoxSettings(e.id)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.bd(10,tf,1,0,void 0,50),d.bc()}if(2&t){const t=d.uc().modifier,e=d.uc(),i=d.Rc(89),n=d.Rc(75);let o=null,a=null,r=null,s=null;d.Ob("cu2-views-bar__btn_label",(null==(o=d.wc(2,10,e.user$))?null:o.dashboard)===e.LayoutVersion.Six),d.Dc("title",(null==(a=d.wc(3,12,e.user$))?null:a.dashboard)===e.LayoutVersion.Six?e.commonStringsService.showText:e.commonStringsService.viewSettingsText)("titleTemplate",(null==(r=d.wc(4,14,e.sharedData.compatCurrentTeam$))?null:r.role)<=e.UserRole.ADMIN&&d.wc(5,16,e.project$)&&(null==(r=d.wc(6,18,e.selectedView$))?null:r.viewType)===e.DataViewType.Box?i:null)("toggleModifier",(null==(s=d.wc(7,20,e.user$))?null:s.dashboard)===e.LayoutVersion.Six?"cu2-views-bar__btn-dropdown-list-toggle":null)("items",d.wc(8,22,e.boxSettingItems$))("autoClose",!1)("dropdownDisabled",!!d.wc(9,24,e.lockedTooltip$)),d.Ib(10),d.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",d.Hc(26,Zp,t))}}function nf(t,e){}function of(t,e){1&t&&d.bd(0,nf,0,0,"ng-template")}function af(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list-item",188),d.qc("onCheck",function(){d.Uc(t);const i=e.$implicit;return d.uc(5).changeSettings(i.id)}),d.bc()}if(2&t){const t=e.$implicit;d.Dc("item",t)("ngClass","cu-dropdown-list-item_id-"+t.id)}}function rf(t,e){if(1&t&&(d.cc(0,"div",194),d.dd(1),d.vc(2,"async"),d.bc()),2&t){const t=d.uc(6);d.Ib(1),d.fd(" ",d.wc(2,1,t.totalCustomFieldsVisible$)," ")}}function sf(t,e){1&t&&d.Xb(0,"div",195),2&t&&d.Dc("icon","dropdown-settings_mark")}function cf(t,e){1&t&&d.Xb(0,"div",195),2&t&&d.Dc("icon","arrow-down")}function lf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",189),d.qc("click",function(){return d.Uc(t),d.uc(5).customFieldsMenuVisible=!0}),d.cc(1,"div",190),d.cc(2,"div",131),d.gc(3,191),d.bc(),d.bd(4,rf,3,3,"div",192),d.vc(5,"async"),d.bd(6,sf,1,1,"div",193),d.vc(7,"async"),d.bd(8,cf,1,1,"div",193),d.vc(9,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc(5);d.Ib(4),d.Dc("ngIf",d.wc(5,3,t.totalCustomFieldsVisible$)),d.Ib(2),d.Dc("ngIf",d.wc(7,5,t.totalCustomFieldsVisible$)),d.Ib(2),d.Dc("ngIf",!d.wc(9,7,t.totalCustomFieldsVisible$))}}function uf(t,e){if(1&t&&(d.cc(0,"div",184),d.Xb(1,"cu-dropdown-list-title",185),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.bd(5,af,1,2,"cu-dropdown-list-item",186),d.vc(6,"async"),d.bd(7,lf,10,9,"div",187),d.vc(8,"async"),d.bc()),2&t){const t=d.uc(4),e=d.Rc(89);let i=null,n=null,o=null;d.Ib(1),d.Dc("title",(null==(i=d.wc(2,5,t.user$))?null:i.dashboard)===t.LayoutVersion.Six?t.commonStringsService.showText:t.commonStringsService.viewSettingsText)("titleTemplate",(null==(n=d.wc(3,7,t.sharedData.compatCurrentTeam$))?null:n.role)<=t.UserRole.ADMIN&&d.wc(4,9,t.project$)?e:null),d.Ib(4),d.Dc("ngForOf",d.wc(6,11,t.settingItems$))("ngForTrackBy",t.trackById),d.Ib(2),d.Dc("ngIf",null==(o=d.wc(8,13,t.projectFeatures$))||null==o.custom_fields?null:o.custom_fields.enabled)}}function df(t,e){1&t&&d.Xb(0,"div",209),2&t&&d.Dc("icon","dropdown-settings_mark")}function hf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",204),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(5).toggleCustomFieldVisible(i)}),d.cc(1,"div",205),d.Xb(2,"cu-custom-field-icon",206),d.cc(3,"div",207),d.dd(4),d.bc(),d.bc(),d.bd(5,df,1,1,"div",208),d.vc(6,"async"),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(5);d.Ib(2),d.Dc("field",t),d.Ib(1),d.Dc("cuTooltip",t.name)("tooltipDisabledIfTextNotTruncated",!0),d.Ib(1),d.fd(" ",t.name," "),d.Ib(1),d.Dc("ngIf",d.wc(6,5,i.boardViewCustomFieldsMap$)[t.id])}}function pf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",196),d.cc(1,"div",197),d.qc("click",function(){return d.Uc(t),d.uc(4).customFieldsMenuVisible=!1}),d.Xb(2,"div",198),d.ac(3),d.gc(4,199),d.Zb(),d.bc(),d.cc(5,"div",200),d.gc(6,201),d.bc(),d.cc(7,"div",202),d.bd(8,hf,7,7,"div",203),d.vc(9,"async"),d.bc(),d.bc()}if(2&t){const t=d.uc(4);d.Ib(8),d.Dc("ngForOf",d.wc(9,2,t.allCustomFields$))("ngForTrackBy",t.trackById)}}function ff(t,e){if(1&t&&(d.cc(0,"div"),d.bd(1,uf,9,15,"div",182),d.bd(2,pf,10,4,"div",183),d.bc()),2&t){const t=d.uc(3);d.Ib(1),d.Dc("ngIf",!t.customFieldsMenuVisible),d.Ib(1),d.Dc("ngIf",t.customFieldsMenuVisible)}}function gf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",178,179),d.qc("dropdownClose",function(){return d.Uc(t),d.uc(2).customFieldsMenuVisible=!1}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.cc(5,"div",180),d.vc(6,"async"),d.bd(7,of,1,0,void 0,50),d.bc(),d.bd(8,ff,3,2,"div",181),d.bc()}if(2&t){const t=d.uc().modifier,e=d.uc(),i=d.Rc(75);let n=null,o=null,a=null;d.Ob("cu2-views-bar__btn",(null==(n=d.wc(2,10,e.user$))?null:n.dashboard)===e.LayoutVersion.Six)("cu2-views-bar__btn_label",(null==(o=d.wc(3,12,e.user$))?null:o.dashboard)===e.LayoutVersion.Six),d.Dc("dropdownCloseOnInsideClick",!1)("dropdownDisabled",!!d.wc(4,14,e.lockedTooltip$)),d.Ib(5),d.Ob("cu2-views-bar__btn-dropdown-list-toggle",(null==(a=d.wc(6,16,e.user$))?null:a.dashboard)===e.LayoutVersion.Six),d.Ib(2),d.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.Hc(18,Zp,t))}}function mf(t,e){}function vf(t,e){1&t&&d.bd(0,mf,0,0,"ng-template")}function bf(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",210,176),d.qc("onCheck",function(e){return d.Uc(t),d.uc(2).changeSettings(e.id)})("onSelect",function(e){return d.Uc(t),d.uc(2).selectSettings(e.id)})("onEditViewSettings",function(e){return d.Uc(t),d.uc(2).editViewSettings(e)}),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.bd(9,vf,1,0,void 0,50),d.bc()}if(2&t){const t=d.uc().modifier,e=d.uc(),i=d.Rc(89),n=d.Rc(75);let o=null,a=null,r=null;d.Ob("cu2-views-bar__btn_label",(null==(o=d.wc(2,10,e.user$))?null:o.dashboard)===e.LayoutVersion.Six),d.Dc("title",e.commonStringsService.viewSettingsText)("titleTemplate",(null==(a=d.wc(3,12,e.sharedData.compatCurrentTeam$))?null:a.role)<=e.UserRole.ADMIN&&d.wc(4,14,e.project$)&&(null==(a=d.wc(5,16,e.selectedView$))?null:a.viewType)===e.DataViewType.Grid?i:null)("items",d.wc(6,18,e.settingItems$))("autoClose",!1)("dropdownDisabled",!!d.wc(7,20,e.lockedTooltip$))("toggleModifier",(null==(r=d.wc(8,22,e.user$))?null:r.dashboard)===e.LayoutVersion.Six?"cu2-views-bar__btn-dropdown-list-toggle":null),d.Ib(9),d.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",d.Hc(24,Zp,t))}}function _f(t,e){if(1&t&&(d.bd(0,Jp,11,29,"cu-dropdown-list",171),d.vc(1,"async"),d.bd(2,ef,11,28,"cu-dropdown-list",172),d.vc(3,"async"),d.bd(4,gf,9,20,"div",173),d.vc(5,"async"),d.bd(6,bf,10,26,"cu-dropdown-list",174),d.vc(7,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,4,t.isListView$)),d.Ib(2),d.Dc("ngIf",d.wc(3,6,t.isBoxView$)),d.Ib(2),d.Dc("ngIf",d.wc(5,8,t.isBoardView$)),d.Ib(2),d.Dc("ngIf",d.wc(7,10,t.isGridView$))}}function wf(t,e){if(1&t&&(d.Xb(0,"cu-filter-assignees",212),d.vc(1,"async"),d.vc(2,"async")),2&t){const t=d.uc().modifier,e=d.uc();d.Dc("isMeView",d.wc(1,3,e.meView$))("userIds",d.wc(2,5,e.filteredUserIds$))("modifier",t)}}function yf(t,e){if(1&t&&(d.bd(0,wf,3,7,"cu-filter-assignees",211),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async")),2&t){const t=d.uc();let e=null;d.Dc("ngIf",!(null!=(e=d.wc(1,1,t.team$))&&e.personal_team||d.wc(2,3,t.isGanttView$)||d.wc(3,5,t.isMindmapViewCustom$)))}}function kf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",213),d.gc(1,214),d.bc(),d.Xb(2,"br"),d.cc(3,"cu-checkbox",215),d.qc("onChange",function(e){return d.Uc(t),d.uc().setAutoSave(e)}),d.gc(4,216),d.vc(5,"async"),d.bc()}if(2&t){const t=d.uc();let e=null;d.Ib(3),d.Dc("checked",null==(e=d.wc(5,1,t.selectedView$))?null:e.autoSave)}}function xf(t,e){1&t&&(d.ac(0),d.gc(1,220),d.Zb())}function Sf(t,e){1&t&&(d.ac(0),d.dd(1,"Assignee"),d.Zb())}function Tf(t,e){1&t&&(d.ac(0),d.gc(1,221),d.Zb())}function Cf(t,e){if(1&t&&(d.cc(0,"span",217),d.bd(1,xf,2,0,"ng-container",1),d.vc(2,"async"),d.vc(3,"async"),d.bd(4,Sf,2,0,"ng-container",1),d.vc(5,"async"),d.bd(6,Tf,2,0,"ng-container",1),d.vc(7,"async"),d.vc(8,"async"),d.bc(),d.cc(9,"span",218),d.dd(10,"("),d.ac(11),d.gc(12,219),d.Zb(),d.dd(13,")"),d.bc()),2&t){const t=d.uc();d.Ib(1),d.Dc("ngIf",d.wc(2,3,t.isTimelineView$)||d.wc(3,5,t.isGridView$)),d.Ib(3),d.Dc("ngIf",d.wc(5,7,t.isWorkloadView$)),d.Ib(2),d.Dc("ngIf",!d.wc(7,9,t.isTimelineOrWorkloadView$)&&!d.wc(8,11,t.isGridView$))}}function Df(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-unlock-confirm",222),d.qc("onCancel",function(){return d.Uc(t),d.uc().confirmCopyViewPrivate()})("onConfirm",function(){return d.Uc(t),d.uc().unfreezeView()}),d.bc()}if(2&t){const t=d.uc();d.Dc("data",t.confirmView)}}function If(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-create-project-modal",223),d.qc("onCancel",function(){return d.Uc(t),d.uc().modal.closeAll()}),d.vc(1,"async"),d.bc()}if(2&t){const t=d.uc();d.Dc("team",d.wc(1,6,t.team$))("project",t.spaceToEdit.space)("viewType",t.spaceToEdit.viewType)("currentStage",t.spaceToEdit.stage)("closeAll",!0)("viewSettingsTab",t.spaceToEdit.viewSettingsTab)}}function Pf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",224),d.qc("click",function(){return d.Uc(t),d.uc().editViewSettings()}),d.gc(1,225),d.bc()}}function Mf(t,e){1&t&&(d.mc(0,227,1),d.Yb(1),d.jc())}const Of=function(){return["500"]};function $f(t,e){if(1&t&&(d.mc(0,227,2),d.Yb(1),d.vc(2,"truncate"),d.vc(3,"async"),d.jc()),2&t){const t=d.uc(2);let e=null;d.Ib(3),d.kc(d.xc(2,1,null==(e=d.wc(3,4,t.selectedView$))?null:e.frozenNote,d.Gc(6,Of))),d.hc(0)}}function jf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",226),d.qc("mouseenter",function(){return d.Uc(t),d.uc().setPopState("true")})("mouseleave",function(){return d.Uc(t),d.uc().checkPopState()}),d.ac(1),d.mc(2,227),d.cc(3,"div",228),d.vc(4,"username"),d.vc(5,"async"),d.bd(6,Mf,2,0,"ng-container",1),d.vc(7,"async"),d.bc(),d.bd(8,$f,4,7,"ng-container",1),d.vc(9,"async"),d.jc(),d.Zb(),d.cc(10,"a",229),d.gc(11,230),d.bc(),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null;d.Ib(6),d.Dc("ngIf",!(null!=(e=d.wc(7,7,t.selectedView$))&&e.frozenNote)),d.Ib(2),d.Dc("ngIf",null==(i=d.wc(9,9,t.selectedView$))?null:i.frozenNote),d.Ib(1),d.kc(d.wc(4,3,null==(n=d.wc(5,5,t.selectedView$))?null:n.frozenBy)),d.hc(2)}}function Lf(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",231),2&t){const t=d.uc();d.Dc("title",t.paywallCommonStringsService.protectViewsText)("image","./assets/images/components/paywall-popover/protected-view.png")("learnMore","https://docs.clickup.com/en/articles/2986479-protect-layout")("amplitudeLabel","Protect Views")}}function Ef(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",232),2&t){const t=d.uc();d.Dc("title",t.paywallCommonStringsService.personalViewsText)("image","./assets/images/components/paywall-popover/personal-view.png")("upgradeButtonText",t.paywallCommonStringsService.upgradeToBusinessText)("learnMore","https://docs.clickup.com/en/articles/3044734-personal-views")("amplitudeLabel","Personal Views")}}function Nf(t,e){if(1&t&&d.Xb(0,"cu-paywall-popover",233),2&t){const t=d.uc();d.Dc("title",t.viewsBarStringsService.workloadForGroupingsPaywallTitleText)("amplitudeLabel","Workload for Groupings")}}function Af(t,e){if(1&t&&d.Yb(0,44),2&t){d.uc();const t=d.Rc(59);d.Dc("ngTemplateOutlet",t)}}function Vf(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-share-view-modal",234),d.qc("setIsPublic",function(e){return d.Uc(t),d.uc().updateView({public:e.public,publicShareExpiresOn:e.expiresOn},!0)})("setIsSeoOptimised",function(e){return d.Uc(t),d.uc().updateView({seoOptimized:e},!0)})("setSharingExpiresOn",function(e){return d.Uc(t),d.uc().updateView({publicShareExpiresOn:e},!0)})("setPublicTaskFields",function(e){return d.Uc(t),d.uc().updateView({shareTaskFields:e},!0)})("setDefaultPublicTaskFields",function(e){return d.Uc(t),d.uc().setDefaultPublicTaskFields(e)})("setShareViewTasks",function(e){return d.Uc(t),d.uc().updateView({shareTasks:e},!0)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null,o=null,a=null,r=null,s=null;d.Dc("isPublic",null==(e=d.wc(1,10,t.selectedView$))?null:e.public)("isSeoOptimised",null==(i=d.wc(2,12,t.selectedView$))?null:i.seoOptimized)("sharingLink",null==(n=d.wc(3,14,t.selectedView$))?null:n.publicSharingUrl)("view",d.wc(4,16,t.selectedView$))("publicToken",null==(o=d.wc(5,18,t.selectedView$))?null:o.publicKey)("sharingExpiresOn",null==(a=d.wc(6,20,t.selectedView$))?null:a.publicShareExpiresOn)("publicTaskFields",null==(r=d.wc(7,22,t.selectedView$))?null:r.shareTaskFields)("defaultPublicTaskFields",t.defaultPublicTaskFields)("shareViewTasks",null==(s=d.wc(8,24,t.selectedView$))?null:s.shareTasks)("team",d.wc(9,26,t.team$))}}function zf(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-dropdown-list",236,237),d.qc("onSelect",function(e){return d.Uc(t),d.uc(2).saveView(e.id)})("onCheck",function(e){return d.Uc(t),d.uc(2).editView(e.id)}),d.vc(2,"async"),d.vc(3,"async"),d.Xb(4,"div",238),d.bc()}if(2&t){const t=d.uc(),e=t.modifier,i=t.iconModifier,n=d.uc();let o=null;d.Lb(e),d.Dc("title",n.commonStringsService.viewSettingsText)("items",d.wc(2,8,n.viewSettingsItems$))("autoClose",!1)("toggleModifier",(null==(o=d.wc(3,10,n.user$))?null:o.dashboard)===n.LayoutVersion.Six?"cu2-views-bar__btn-dropdown-list-toggle":null),d.Ib(4),d.Lb(i)}}function Ff(t,e){if(1&t&&(d.bd(0,zf,5,12,"cu-dropdown-list",235),d.vc(1,"async")),2&t){const t=d.uc();let e=null;d.Dc("ngIf",null==(e=d.wc(1,1,t.viewSettingsItems$))?null:e.length)}}function Bf(t,e){if(1&t&&d.Xb(0,"div",240),2&t){const t=d.uc(),e=t.icon;d.Lb(t.modifier),d.Dc("icon",e)}}function Rf(t,e){if(1&t&&(d.bd(0,Bf,1,3,"div",239),d.vc(1,"async")),2&t){const t=d.uc();let e=null;d.Dc("ngIf",null==(e=d.wc(1,1,t.selectedView$))?null:e.default)}}function Uf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",246),d.qc("click",function(){d.Uc(t);const e=d.uc(5),i=d.Rc(81);return e.showViewChangesModal(i)}),d.vc(1,"async"),d.vc(2,"async"),d.bc()}if(2&t){const t=d.uc(5);d.Ob("cu2-views-bar__selected-options-icon_spinner",d.wc(1,3,t.isAutoSaving$)),d.Dc("icon",d.wc(2,5,t.isAutoSaving$)?"cu2-spinner":"cu3-save-view")}}function Gf(t,e){1&t&&d.Xb(0,"div",247)}function Hf(t,e){1&t&&d.Xb(0,"div",249)}function Wf(t,e){if(1&t&&(d.ac(0),d.bd(1,Hf,1,0,"div",248),d.vc(2,"async"),d.Zb()),2&t){const t=d.uc(6);let e=null;d.Ib(1),d.Dc("ngIf",null==(e=d.wc(2,1,t.selectedView$))||null==e.permissions?null:e.permissions.editView)}}function qf(t,e){if(1&t){const t=d.dc();d.ac(0),d.cc(1,"cu-dropdown-list",251),d.qc("onSelect",function(e){return d.Uc(t),d.uc(7).saveView(e.id)})("onCheck",function(e){return d.Uc(t),d.uc(7).editView(e.id)}),d.vc(2,"async"),d.Xb(3,"div",252),d.cc(4,"div",253),d.gc(5,254),d.bc(),d.bc(),d.cc(6,"div",255),d.qc("click",function(){return d.Uc(t),d.uc(7).cancelChanges()}),d.bc(),d.Zb()}if(2&t){const t=d.uc(7);d.Ib(1),d.Dc("title",t.viewsBarStringsService.saveLayoutText)("items",d.wc(2,4,t.viewSettingsSaveItems$))("autoClose",!0)("toggleModifier","cu2-views-bar__btn-dropdown-list-toggle")}}function Xf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",256),d.qc("click",function(){return d.Uc(t),d.uc(7).cancelChanges()}),d.bc()}}function Yf(t,e){if(1&t&&(d.bd(0,qf,7,6,"ng-container",1),d.vc(1,"async"),d.bd(2,Xf,1,0,"div",250),d.vc(3,"async")),2&t){const t=d.uc(6);let e=null,i=null;d.Dc("ngIf",null==(e=d.wc(1,2,t.selectedView$))||null==e.permissions?null:e.permissions.editView),d.Ib(2),d.Dc("ngIf",!(null!=(i=d.wc(3,4,t.selectedView$))&&null!=i.permissions&&i.permissions.editView))}}function Kf(t,e){if(1&t&&(d.ac(0),d.bd(1,Wf,3,3,"ng-container",72),d.vc(2,"async"),d.bd(3,Yf,4,6,"ng-template",null,73,d.cd),d.Zb()),2&t){const t=d.Rc(4),e=d.uc(5);d.Ib(1),d.Dc("ngIf",d.wc(2,2,e.isGuestOrSharedNoParent$))("ngIfElse",t)}}function Zf(t,e){if(1&t&&(d.ac(0),d.bd(1,Uf,3,7,"div",244),d.vc(2,"async"),d.bd(3,Gf,1,0,"div",245),d.vc(4,"async"),d.vc(5,"async"),d.bd(6,Kf,5,4,"ng-container",1),d.vc(7,"async"),d.Zb()),2&t){const t=d.uc(4);let e=null;d.Ib(1),d.Dc("ngIf",null==(e=d.wc(2,3,t.selectedView$))?null:e.autoSave),d.Ib(2),d.Dc("ngIf",d.wc(4,5,t.showAutoSaveCheckbox$)&&!d.wc(5,7,t.hasChanges$)),d.Ib(3),d.Dc("ngIf",d.wc(7,9,t.hasChanges$))}}function Jf(t,e){if(1&t){const t=d.dc();d.cc(0,"div",259),d.qc("click",function(){return d.Uc(t),d.uc(5).cancelChanges()}),d.bc()}2&t&&d.Dc("@protected",void 0)}function Qf(t,e){if(1&t){const t=d.dc();d.ac(0),d.bd(1,Jf,1,1,"div",257),d.vc(2,"async"),d.cc(3,"div",258,58),d.qc("mouseenter",function(){return d.Uc(t),d.uc(4).setPopState(!0)})("mouseleave",function(){return d.Uc(t),d.uc(4).checkPopState()}),d.bc(),d.Zb()}if(2&t){const t=d.uc(4),e=d.Rc(91);d.Ib(1),d.Dc("ngIf",d.wc(2,2,t.hasChanges$)),d.Ib(2),d.Dc("popover",e)}}function tg(t,e){if(1&t&&(d.ac(0),d.bd(1,Zf,8,11,"ng-container",1),d.vc(2,"async"),d.bd(3,Qf,5,4,"ng-container",1),d.vc(4,"async"),d.Zb()),2&t){const t=d.uc(3);let e=null,i=null;d.Ib(1),d.Dc("ngIf",!(null!=(e=d.wc(2,2,t.selectedView$))&&e.locked)),d.Ib(2),d.Dc("ngIf",null==(i=d.wc(4,4,t.selectedView$))?null:i.locked)}}function eg(t,e){}function ig(t,e){1&t&&d.bd(0,eg,0,0,"ng-template")}function ng(t,e){1&t&&d.Xb(0,"div",260)}const og=function(){return{modifier:"cu2-views-bar__selected-options-icon icon",icon:"cu2-home"}};function ag(t,e){if(1&t&&(d.cc(0,"div",242),d.bd(1,tg,5,6,"ng-container",1),d.vc(2,"async"),d.bd(3,ig,1,0,void 0,50),d.bd(4,ng,1,0,"div",243),d.vc(5,"async"),d.bc()),2&t){const t=d.uc(2),e=d.Rc(105);let i=null;d.Dc("@loading",void 0),d.Ib(1),d.Dc("ngIf",!d.wc(2,5,t.isGuestOrSharedNoParent$)),d.Ib(2),d.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",d.Gc(9,og)),d.Ib(1),d.Dc("ngIf",(null==(i=d.wc(5,7,t.selectedView$))?null:i.visibility)===t.DataViewVisibility.Private)}}function rg(t,e){if(1&t&&(d.bd(0,ag,6,10,"div",241),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async")),2&t){const t=d.uc();d.Dc("ngIf",d.wc(1,1,t.showSelectedViewOptionsBar$)&&!d.wc(2,3,t.isBlankView$)&&!d.wc(3,5,t.isMindmapViewCustom$))}}const sg=function(){return[]};function cg(t,e){if(1&t){const t=d.dc();d.cc(0,"div"),d.cc(1,"div",269),d.cc(2,"div",270),d.gc(3,271),d.bc(),d.cc(4,"cu-create-custom-field-form",272),d.qc("cancel",function(){return d.Uc(t),d.uc(),d.Rc(1).close()})("onCfCreated",function(){return d.Uc(t),d.uc(),d.Rc(1).close()}),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc(2);d.ad("width",570,"px"),d.Ib(4),d.Dc("customFields",d.wc(5,17,t.customFields$))("allowRequireChange",d.wc(6,19,t.allowRequireChange$))("notBusinessPlus",d.wc(7,21,t.notBusinessPlus$))("entity",d.wc(8,23,t.entity$))("createNewType",!0)("availableColumns",d.Gc(27,sg))("isInlineForm",!0)("country",d.wc(9,25,t.currentCountry$))("addCreatedColumn",!1)("forTaskListHeader",!0)("showPin",!1)("autoFocusInput",!0)("stickyFooter",!1)("checkEmptyType",!1)("groupCustomFieldTypes",t.groupCustomFieldTypes)}}const lg=function(){return["auto"]};function ug(t,e){1&t&&(d.cc(0,"div",261,262),d.cc(2,"div",180),d.cc(3,"div",263),d.cc(4,"div",264),d.Xb(5,"div",265),d.bc(),d.cc(6,"div",266),d.gc(7,267),d.bc(),d.bc(),d.bc(),d.bd(8,cg,10,28,"div",268),d.bc()),2&t&&d.Dc("dropdownCloseOnInsideClick",!1)("dropdownPlacement",d.Gc(2,lg))}const dg=function(t){return{"cu-views-bar-title_is-sprint":t}},hg=(t,e)=>!t||!t.name||t.name.toLocaleLowerCase().includes(e);let pg=(()=>{class t{constructor(t,e,i,n,o,a,r,s,c,l,u,d){this.dataService=t,this.sharedData=e,this.commonStringsService=i,this.store=n,this.modal=o,this.injector=a,this.localStorage=r,this.viewsBarService=s,this.taskService=c,this.locationService=l,this.paywallCommonStringsService=u,this.viewsBarStringsService=d,this.groupCustomFieldTypes=[gr.a.Checkbox,gr.a.Date,gr.a.Dropdown,gr.a.Labels,gr.a.Users,gr.a.Emoji],this.isGuestTeam$=this.store.select(z.isGuestTeam),this.isGuest$=this.store.select(z.isGuestTeam),this.isSharedTasks$=this.store.select(z.getSharedTasksParam),this.isSharedSpace$=this.store.select(z.getSharedSpaceParam),this.project$=this.store.select(z.getProject),this.projects$=this.store.select(z.getProjects),this.category$=this.store.select(z.getCategory),this.subcategory$=this.store.select(z.getSubcategory),this.sprintSettings$=this.store.select(z.getSprintSettings),this.sprintStatus$=this.subcategory$.pipe(Object(Qt.a)(t=>t&&t.sprint?t.sprint_status===xo.d.DONE?xo.d.DONE:t.sprint_status===xo.d.IN_PROGRESS||$r()().isAfter($r()(+t.sprint_start_date))?xo.d.IN_PROGRESS:xo.d.NOT_STARTED:null)),this.showSprintFinish$=Object(ii.a)([this.subcategory$,this.sprintStatus$]).pipe(Object(Qt.a)(([t,e])=>!(!t||!t.sprint)&&!!+t.unfinishedtaskcount&&($r.a.duration($r()(+t.sprint_end_date).diff($r()())).asHours()<24||e===xo.d.DONE))),this.nextSprint$=Object(ii.a)([this.showSprintFinish$,this.subcategory$,this.category$,this.sprintSettings$]).pipe(Object(Vi.a)(([t,e,i,n])=>!(!t||!n)),Object(Qt.a)(([t,e,i,n])=>{if(!e)return{nextSprint:null,newSprint:null};const o=(i.subcategories||[]).find(t=>t.sprint_index===e.sprint_index+1);if(o)return{nextSprint:o,newSprint:null};const a=$r()(+e.sprint_end_date).add(1,"day").startOf("day"),r=a.clone().add(n.duration_number,n.duration_timeframe).endOf("day").subtract(1,"d");return{nextSprint:o,newSprint:Object(To.c)(!0,a.valueOf(),r.valueOf(),n.name_format,n.date_format,e.sprint_index+1)}})),this.unfinishedTasks$=this.store.select(z.getSubcategoryUnfinishedTasks),this.categories$=this.store.select(z.getCategories),this.categoriesMap$=this.store.select(z.getCategoriesMap),this.isTeamSidebarOpen$=this.store.select(z.getTeamSidebarOptionsOpened),this.dataView$=this.store.select(X.qb),this.userGroups$=this.store.select(Dr.c),this.guestMap$=this.store.select(z.getGuestMap),this.calendarViewPreferences$=this.store.select(Er.bb),this.projectFeatures$=this.store.select(z.getProjectFeatures),this.colorByFields$=Object(ii.a)([this.store.select(Er.f),this.calendarViewPreferences$,this.projectFeatures$]).pipe(Object(Qt.a)(([t,e,i])=>{if(i.custom_fields&&i.custom_fields.enabled)return t.map(t=>({field:t,id:t.id,title:t.name,checked:t.id===e.colorTasksBy.customFieldDropdownId,checkType:"check"}))})),this.trackById=Object(j.d)("id"),this.destroy$=new B.a,this.user$=this.store.select(z.getUser),this.team$=this.store.select(z.getTeam),this.locationIds$=this.store.pipe(Object(K.select)(z.getSelectedProjectCategoryAndSubcategoryIds)),this.selectedView$=this.store.pipe(Object(K.select)(X.qb),Object(Vi.a)(t=>Boolean(t))),this.meView$=this.store.select(X.R),this.users$=this.store.select(X.xb),this.teamUsers$=this.store.select(z.getTeamUsers),this.filteredUserIdsNoUnassign$=this.store.pipe(Object(K.select)(X.w)),this.filterAssigneesShowUnassigned$=this.store.pipe(Object(K.select)(X.u)),this.filteredUserIds$=Object(ii.a)([this.filteredUserIdsNoUnassign$,this.filterAssigneesShowUnassigned$]).pipe(Object(Qt.a)(([t,e])=>{const i=[...t||[]];return e&&i.push("-1"),i})),this.statuses$=this.store.pipe(Object(K.select)(z.getDashboardStatuses),Object(Qt.a)(t=>t||vo.a)),this.settingItems$=Object(ii.a)([this.store.select(X.V),this.selectedView$,this.subcategory$,this.user$,this.isGuest$,this.team$]).pipe(Object(Qt.a)(([t,e,i,n,o,a])=>{let r=e.viewType===$.i.Grid?[{id:Pr.a.AutosizeAll,title:$localize`:@@cu2-views-bar__title_autosize-all-cols:Autosize all columns`},{id:Pr.a.Reset,title:$localize`:@@cu2-views-bar__title_reset-col-width:Reset column width`},{id:"showClosed",title:$localize`:@@cu2-views-bar__title_show-closed-tasks:Show closed tasks`,checkType:"switch"}]:[{id:"showTaskLocations",title:$localize`:@@common_task-locations:Task locations`,checkType:"switch",tooltip:"Show locations on tasks",tooltipDelay:50},{id:"showSubtaskParentNames",title:$localize`:@@common_show-subtask-parent-names:Show subtask parent names`,checkType:"switch"},{id:"showClosed",title:$localize`:@@cu2-views-bar__title_show-closed-tasks:Show closed tasks`,checkType:"switch"},{id:"showClosedSubtasks",title:$localize`:@@cu2-views-bar__title_show-closed-subtasks:Show closed subtasks`,checkType:"switch"}];if(!(e.viewType!==$.i.List&&e.viewType!==$.i.Grid||n.dashboard!==H.b.Four&&n.dashboard!==H.b.Five&&n.dashboard!==H.b.Six||o)){const t={id:"showTasksInMultipleLists",title:$localize`:@@cu2-views-bar__title_show-tasks-in-multiple-lists:Show tasks in multiple Lists`,checkType:"switch",tooltip:$localize`:@@cu2-views-bar__tooltip-msg_show-tasks-in-multiple-lists:When enabled, we'll display tasks that are in multiple Lists more than once. Otherwise, tasks will only appear once in this view`};r=[...r,a&&a.tasks_in_multiple_lists&&e.viewType===$.i.List?t:null,e.viewType===$.i.List?{id:"showEmptyStatuses",title:$localize`:@@cu2-views-bar__title_show-empty-statuses:Show empty statuses`,checkType:"switch"}:null,e.viewType===$.i.List?{id:"autoWrap",title:$localize`:@@cu2-views-bar__title_auto-wrap:Auto-wrap`,checkType:"switch",tooltip:$localize`:@@cu2-views-bar__tooltip-msg_auto-wrap:Automatically wrap and expand the content of your tasks to reveal everything`}:null,n.dashboard!==H.b.Six?{id:"-",title:"",type:ne.a.Separator}:null,n.dashboard!==H.b.Six?{id:"export-list-view",title:this.commonStringsService.customText,textTemplate:this.customExportListViewTemplate}:null].filter(Boolean)}if(e.viewType===$.i.Board){const t=e.grouping&&e.grouping.field!==$.c.Status?r:r.filter(t=>"showClosed"!==t.id);r=[...t,{id:"showAssignees",title:$localize`:@@common_show-assignees:Show assignees`,checkType:"switch"},{id:"collapseEmpties",title:$localize`:@@common_collapse-empty-cols:Collapse empty columns`,checkType:"switch"},{id:"showImages",title:$localize`:@@cu2-views-bar__title_show-images-on-cards:Show images on cards`,checkType:"switch"},{id:"showTaskIds",title:$localize`:@@common_show-task-ids:Show task IDs`,checkType:"switch"},{id:"showTimer",title:$localize`:@@common_show-time-tracker:Show time tracker`,checkType:"switch"}]}const s=!!(e&&e.filter&&(e.filter.filters||[]).find(t=>"status"===t.field));return r.reduce((i,n)=>"showClosed"!==n.id&&"showClosedSubtasks"!==n.id||!s?(i.push(Object.assign(Object.assign({},n),"showTasksInMultipleLists"===n.id?{checked:!e||!e.exclude_multiple_lists||!e.exclude_multiple_lists}:{checked:t&&t[n.id]})),i):i,[])})),this.mapSettingItems$=this.selectedView$.pipe(Object(Qt.a)(t=>[{id:"showClosed",title:$localize`:@@cu2-views-bar__title_show-closed-tasks:Show closed tasks`,checkType:"switch",checked:t&&t.filter&&t.filter.showClosed}].map(t=>Object.assign({},t)))),this.boxSettings$=this.store.select(X.z),this.boxSettingItems$=this.boxSettings$.pipe(Object(Qt.a)(t=>[{id:"showBreadcrumbs",title:$localize`:@@common_task-locations:Task locations`,checkType:"switch"},{id:"showSubtaskParentNames",title:$localize`:@@common_show-subtask-parent-names:Show subtask parent names`,checkType:"switch"},{id:"showAssignedComments",title:$localize`:@@common_show-assigned-comments:Show assigned comments`,checkType:"switch"}].map(e=>Object.assign(Object.assign({},e),{checked:t&&t[e.id]})))),this.isListView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.List].includes(t.viewType))),this.isCalendarView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Calendar].includes(t.viewType))),this.isMapView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Map].includes(t.viewType))),this.isBoardView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Board].includes(t.viewType))),this.isBoxView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Box].includes(t.viewType))),this.isFormView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Form].includes(t.viewType))),this.parent$=this.store.select(X.Hb),this.isPageView$=this.store.select(X.Mb),this.isMeModeBarVisible$=this.store.select(z.getMeModeBarVisibleOption),this.subtasksType$=this.store.select(X.bb),this.subtasksTitle$=this.subtasksType$.pipe(Object(Qt.a)(t=>t===$.h.None?$localize`:@@common_hide:Hide`:$localize`:@@common_show:Show`)),this.subtasksTitleV6$=this.subtasksType$.pipe(Object(Qt.a)(t=>t===$.h.BelowParent?$localize`:@@common_expand-all-1:Expand All`:t===$.h.StandAlone?$localize`:@@cu2-views-bar__title_separately:Separately`:"")),this.showSubtaskItems$=Object(ii.a)([this.subtasksType$,this.isCalendarView$,this.isBoxView$,this.isMapView$]).pipe(Object(Qt.a)(([t,e,i,n])=>{const o=e||i||n;return[{id:$.h.None,title:$localize`:@@subtasks_collapse-all:Collapse all`,checkType:"check",checked:t===$.h.None,default:!0},{id:$.h.BelowParent,title:$localize`:@@common_expand-all:Expand all`,checkType:"check",checked:t===$.h.BelowParent},{id:$.h.StandAlone,title:$localize`:@@cu2-views-bar__title_separate-tasks:As separate tasks`,description:o?"":$localize`:@@cu2-views-bar__subtask-item-description_use-as-filter:Use this to filter subtasks`,checkType:"check",checked:t===$.h.StandAlone}].filter(t=>!o||t.id!==$.h.BelowParent)})),this.groupingField$=this.store.select(X.L),this.allCustomFields$=this.store.select(wr.n),this.dataViewFilterFields$=this.store.select(X.fb),this.groupingFieldTitle$=Object(ii.a)([this.groupingField$,this.store.select(X.H)]).pipe(Object(Qt.a)(([t,e])=>{if(t)return e})),this.sortBy$=this.store.select(X.Z),this.isTimelineView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Timeline].includes(t.viewType))),this.isWorkloadView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Workload].includes(t.viewType))),this.isTimelineOrWorkloadView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Timeline,$.i.Workload].includes(t.viewType))),this.isGridView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Grid].includes(t.viewType))),this.groupingItems$=Object(ii.a)([this.groupingField$,this.store.select(X.K),this.dataViewFilterFields$,this.isTimelineView$,this.isWorkloadView$,this.isGridView$,this.subcategory$,this.project$]).pipe(Object(Vi.a)(([t])=>!!t),Object(Qt.a)(([t,e,i,n,o,a,r,s])=>{const c=Object(E.K)(i);let l=_r.nb.filter(t=>!(s&&s.features&&(!s.features.priorities||!s.features.priorities.enabled))||t.name!==_r.M.name);n?(l=[_r.H,_r.S,_r.k,_r.U],(!s||s.features&&s.features.priorities&&s.features.priorities.enabled)&&l.push(_r.M),r||l.push(_r.T)):o?(l=[_r.k,_r.S,_r.U],(!s||s.features&&s.features.priorities&&s.features.priorities.enabled)&&l.push(_r.M),r||l.push(_r.T)):a&&(l=[_r.H,_r.S,_r.k,_r.U,_r.w],(!s||s.features&&s.features.priorities&&s.features.priorities.enabled)&&l.push(_r.M));const u=l[0],d=l.map(i=>({id:i.name,title:i.title,icon:i.icon,checkType:"check",checked:i.name===t,sortIcon:!0,sortDirection:i.name===t&&i.name!==_r.H.name?e===br.a.Desc?"desc":"asc":null,textTemplate:i.name===u.name?this.defaultGroupByTemplate:null}));let h=[];return c.length&&(h=[...Object(xr.a)(c.filter(t=>t.required),[t=>t.name.toLowerCase()]),...Object(xr.a)(c.filter(t=>t.pinned&&!t.required),[t=>t.name.toLowerCase()]),...Object(xr.a)(c.filter(t=>!t.pinned&&!t.required),[t=>t.name.toLowerCase()])]),d.push({id:"custom_field",title:$localize`:@@common_custom-field-1:Custom Field`,icon:"activity-custom-field",checkType:"check",checked:t.includes("cf_"),sortIcon:!1,showSearch:!0,showAddButton:!0,addButtonText:$localize`:@@common_add-custom-field:Add custom field`,addButtonAction:"customField",subitemsFooterTemplate:this.newCfForm,subitems:h.map(i=>({id:i.id,title:i.name,checkType:"check",checked:t.replace("cf_","")===i.id,sortIcon:!0,icon:"field-"+i.type,sortDirection:t.replace("cf_","")===i.id?e===br.a.Desc?"desc":"asc":null}))}),d})),this.customFields$=this.store.select(wr.j),this.entity$=this.store.select(z.getCurrentHierarchyEntity),this.notBusinessPlus$=this.store.pipe(Object(K.select)(z.getIsBusinessOrEnterprisePlan),Object(Qt.a)(t=>!t)),this.isAdmin$=this.store.select(z.getIsAdmin),this.canRequire$=this.store.select(z.getCanRequireCustomFields),this.allowRequireChange$=Object(ii.a)([this.isAdmin$,this.canRequire$,this.team$]).pipe(Object(Qt.a)(([t,e,i])=>i&&i.plan_id===F.f.ENTERPRISE?e:t)),this.currentCountry$=this.locationService.currentCountry$,this.sortingItems$=Object(ii.a)([this.sortBy$,this.store.select(X.A),this.selectedView$,this.boxSettings$,this.dataViewFilterFields$]).pipe(Object(Qt.a)(([t,e,i,n,o])=>{let a=[],r=t,s=[];i.viewType===$.i.Board||i.viewType===$.i.Timeline||i.viewType===$.i.Workload?(a=[...co.b],t.length&&(a=[co.o,...a]),i.viewType===$.i.Board&&(s="staging"===mr.a.name||"development"===mr.a.name?o.filter(t=>t.type===gr.a.Number):[],s.length&&(s=[...Object(xr.a)(s.filter(t=>t.required),[t=>t.name.toLowerCase()]),...Object(xr.a)(s.filter(t=>t.pinned&&!t.required),[t=>t.name.toLowerCase()]),...Object(xr.a)(s.filter(t=>!t.pinned&&!t.required),[t=>t.name.toLowerCase()])]))):i.viewType===$.i.Box&&(a=[{name:"taskCount",title:$localize`:@@common_number-of-tasks:Number of tasks`},{name:"incomplete",title:$localize`:@@cu2-views-bar__sort-field-item_numberof-incomplete:Number of incomplete`},{name:"timeEstimate",title:$localize`:@@common_time-estimate:Time Estimate`},{name:"name",title:$localize`:@@common_name:Name`}],n&&n.scrumFieldId&&a.push({name:"scrum",title:$localize`:@@common_scrum-points:Scrum points`}),r=e?[e]:[]);let c=a.map(t=>{const e=r.findIndex(e=>e.field===t.name);return{id:t.name,title:t.title,checkType:"check",checked:-1!==e,sortIcon:!0,sortDirection:-1!==e?r[e].dir===br.a.Desc?"desc":"asc":null,default:t.default}});if(s.length){const t=s.map(t=>{const e=r.findIndex(e=>e.field.replace("cf_","")===t.id);return{id:"cf_"+t.id,title:t.name,checkType:"check",checked:-1!==e,sortIcon:!0,icon:"field-"+t.type,sortDirection:-1!==e?r[e].dir===br.a.Desc?"desc":"asc":null}});c=[...c,...t]}return c})),this.sortingTitle$=this.sortingItems$.pipe(Object(Qt.a)(t=>{const e=t.findIndex(t=>t.checked);return-1===e?null:t[e].title})),this.lockedTooltip$=Object(Zn.a)(null),this.isBlankView$=this.store.select(X.jb),this.showGroupByPaywall$=Object(ii.a)([this.selectedView$,this.team$]).pipe(Object(Qt.a)(([t,e])=>t.viewType===$.i.Workload&&e.plan_id!==F.f.ENTERPRISE)),this.selectedDataViewFilterName$=this.store.select(X.rb),this.showGrouping$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.List,$.i.Grid,$.i.Board].includes(t.viewType))),this.showSharing$=Object(ii.a)([this.selectedView$,this.store.select(z.getAllowPublicSharing)]).pipe(Object(Qt.a)(([t,e])=>e&&Object(Mr.b)(t))),this.showSorting$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Board,$.i.Box].includes(t.viewType))),this.isGanttView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Gantt].includes(t.viewType))),this.isDocView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Doc].includes(t.viewType))),this.isActivityView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.Activity].includes(t.viewType))),this.isMindmapView$=this.selectedView$.pipe(Object(Qt.a)(t=>[$.i.MindMap].includes(t.viewType))),this.isMindmapViewCustom$=Object(ii.a)([this.isMindmapView$,this.selectedView$]).pipe(Object(Qt.a)(([t,e])=>t&&e&&e.mindmapSettings&&e.mindmapSettings.custom)),this.showViewOptions$=Object(ii.a)([this.isBlankView$,this.selectedView$,this.isMindmapViewCustom$,this.showSharing$]).pipe(Object(Qt.a)(([t,e,i,n])=>!t&&(!i||n))),this.boardViewCustomFieldsMap$=this.store.select(X.Jb),this.totalCustomFieldsVisible$=this.store.pipe(Object(K.select)(X.D),Object(Qt.a)(t=>t.filter(t=>t.customField&&t.state===vr.b.Visible).length)),this.numericFields$=this.store.select(wr.m),this.hasChanges$=this.store.select(X.Lb),this.viewChanges$=this.store.select(X.yb),this.isGuestOrSharedNoParent$=this.store.select(z.getIsSharedSpaceNoParentOrGuest),this.isAutoSaving$=this.store.select(X.ib).pipe(Object(te.a)()),this.showAutoSaveCheckbox$=this.store.select(X.Bb),this.showSelectedViewOptionsBar$=this.store.select(X.Db),this.customFieldsMenuVisible=!1,this.frozenPopState=!1,this.DataViewType=$.i,this.DataViewVisibility=$.j,this.DataViewSubtasks=$.h,this.UserRole=H.f,this.DataViewParentType=$.e,this.defaultPublicTaskFields=this.localStorage.get(Ar.a),this.viewSettingsOnlyUser$=this.store.select(z.viewSettingsOnlyUserSelector),this.listviewFilterFields$=this.store.select(X.mb),this.hierarchiesFull$=new Co.a([]),this.hierarchies$=Object(ii.a)([this.project$,this.categories$,this.hierarchiesFull$,this.projects$,this.categoriesMap$,this.store.select(z.getSharedData)]).pipe(Object(Qt.a)(([t,e,i,n,o,a])=>{const r=Object(Ir.s)(a);let s;if(r.length>0&&(s=Object(Ir.E)(r)),i&&i.length)return s?[...i,s]:i;const c=(n||[]).map(t=>Object.assign(Object.assign({},t),{categories:o[t.id]||[]}));return s&&c.push(s),c})),this.currentLocation$=Object(ii.a)([this.project$,this.category$,this.subcategory$]).pipe(Object(Qt.a)(([t,e,i])=>({projectId:t&&t.id,categoryId:e&&e.id,subcategoryId:i&&i.id}))),this.filterValue$=Object(ii.a)([this.store.select(X.F),this.listviewFilterFields$]).pipe(Object(Qt.a)(([t,e])=>Object(E.A)(t,e))),this.viewSettingsItems$=Object(ii.a)([this.selectedView$,this.isGuestOrSharedNoParent$,this.team$,this.user$,this.hasChanges$,this.parent$,this.store.select(z.getUserEnterprisePermissions)]).pipe(Object(Qt.a)(([t,e,i,n,o,a,r])=>{var s;const c=!i||i.plan_id===F.f.FREE||i.plan_id===F.f.UNLIMITED,l=[];return e||(o&&(!t.locked&&t&&t.permissions&&t.permissions.editView||i.plan_id===F.f.ENTERPRISE&&(!r||r.views===ui.b.OFF)&&t.visibility===$.j.Private)&&l.push({id:je.Save,title:t.visibility===$.j.Public?$localize`:@@cu2-views-bar__save-for-everyone:Save for everyone`:$localize`:@@cu2-views-bar__save-for-me:Save for me`}),a&&!(null===(s=a.permissions)||void 0===s?void 0:s.create_view)||l.push({id:"copyAs",title:$localize`:@@common_duplicate-view:Duplicate view`,subitems:[{id:je.CopyPrivate,title:$localize`:@@view_permissions--personal-view:Personal view`,readonly:c,popoverTemplate:c?this.paywallMakePersonalTemplate:null},{id:je.Copy,title:$localize`:@@cu2-views-bar__everyone-view:Everyone view`}]}),t&&t.permissions&&t.permissions.editView&&(l.push(Object.assign(Object.assign({},ze),{checked:t.visibility===$.j.Private,disabled:t.default||t.locked,readonly:c,popoverTemplate:c?this.paywallMakePersonalTemplate:null,tooltip:t.default?this.commonStringsService.defaultViewNoticeText:t.locked?ie:null})),l.push(Object.assign(Object.assign({},Ae),{checked:t.locked,readonly:c,popoverTemplate:c?this.paywallLockTemplate:null,customClass:null})),l.push(Object.assign(Object.assign({},ti),{checked:t.autoSave,disabled:t.locked,tooltip:t.locked?ie:ti.tooltip}))),t.viewType!==$.i.List&&t.viewType!==$.i.Grid||n.dashboard!==H.b.Six||l.push({id:"-",title:"",type:ne.a.Separator},{id:"export-list-view",title:$localize`:@@common_custom:Custom`,textTemplate:this.customExportListViewTemplate})),l})),this.viewSettingsSaveItems$=this.viewSettingsItems$.pipe(Object(Qt.a)(t=>t&&t.filter(t=>![ze.id,Ae.id].includes(t.id)))),this.viewPayload$=Object(ii.a)([this.selectedView$,this.dataViewFilterFields$]).pipe(Object(Qt.a)(([t,e])=>{const i=Object(E.D)(t,e);return{filters:i.filters,sorting:i.sorting,columns:i.columns}})),this.activityFilters$=this.selectedView$.pipe(Object(Qt.a)(t=>Object.fromEntries((t.activityFilters||[]).map(t=>[t.field,t.values])))),this.ganttPreferences$=this.store.pipe(Object(K.select)(Cr.k)),this.isSidebarCollapsed$=this.store.select(z.getSidebarIsCollapsedOption),this.filterFieldFn=hg,this.LayoutVersion=H.b,this.canOnlyEditPersonalView$=Object(ii.a)([this.store.select(z.getUserEnterprisePermissions),this.store.select(z.getTeam),this.selectedView$]).pipe(Object(Qt.a)(([t,e,i])=>e?e.plan_id===F.f.ENTERPRISE&&(!t||t.views===ui.b.OFF)&&i.visibility===$.j.Private:null))}ngOnInit(){this.team$.pipe(Object(Vi.a)(t=>Boolean(t)),Object(Io.a)("id"),Object(A.a)(this.destroy$)).subscribe(()=>{this.loadTags()}),this.selectedView$.pipe(Object(Vi.a)(t=>Boolean(t&&t.id)),Object(Io.a)("id"),Object(ee.a)(this.store.select(X.pb)),Object(A.a)(this.destroy$)).subscribe(([t,e])=>{e?this.store.dispatch(new Y.Yj(!1)):this.hideAutoSaveViewCheckbox()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}changeBoxSettings(t){"showSubtaskParentNames"===t?this.changeSettings(t):this.store.dispatch(new Y.nl(t))}changeShowSubtasks(t){setTimeout(()=>{this.store.dispatch(new Y.Aj(t))},20)}changeGroupBy(t){this.isDataViewGroupType(t)||(t="cf_"+t),this.store.dispatch(new Y.tl(t))}isDataViewGroupType(t){return-1!==[$.c.Subcategory,$.c.Assignee,$.c.Priority,$.c.Status,$.c.Tag,$.c.DueDate,$.c.None].indexOf(t)}changeFilters(t){this.store.dispatch(new Y.rj(Object(E.L)(t)))}clearFilters(){this.store.dispatch(new Y.rj(E.G))}loadTags(t){if(this.sharedData.compatCurrentProject){const e=this.sharedData.compatCurrentProject.id;this.store.dispatch(Object(yr.e)({projectId:e,paging:t}))}else this.store.dispatch(Object(yr.h)({teamId:this.sharedData.compatCurrentTeam.id,paging:t}))}renameTag(t){this.store.dispatch(Object(yr.o)({projectId:this.sharedData.compatCurrentProject.id,newName:t.newName,tag:t.tag}))}removeTag(t){this.store.dispatch(this.sharedData.compatCurrentProject?Object(yr.d)({projectId:this.sharedData.compatCurrentProject.id,tagName:t.name}):Object(yr.d)({teamId:this.sharedData.compatCurrentTeam.id,tagName:t.name}))}moveTasks(t){this.taskService.move(t.tasks,t.nextSprint)}openDeleteConfirm(t){const e=this.modal.openComponent(kr.a,this.injector,{name:""});e.instance.tagName=t.name,e.instance.allSpaces=!this.sharedData.compatCurrentProject,e.instance.onConfirm.pipe(Object(A.a)(e.instance.destroy$)).subscribe(()=>{this.removeTag(t)})}changeColor(t){this.store.dispatch(Object(yr.c)({projectId:this.sharedData.compatCurrentProject.id,newColor:t.newColor,tag:t.tag}))}editTags({op:t,value:e}){switch(t){case"rename":this.renameTag(e);break;case"remove":this.removeTag(e);break;case"deleteConfirm":this.openDeleteConfirm(e);break;case"changeColor":this.changeColor(e)}}changeColSorting(t){this.store.dispatch(new Y.pl(t.name))}changeGroupSort(t){this.selectedView$.pipe(Object(Yn.a)()).subscribe(e=>{e.viewType===$.i.Board||e.viewType===$.i.Timeline||e.viewType===$.i.Workload?this.changeBoardGroupSort(t):e.viewType===$.i.Box&&this.changeBoxGroupSort(t)})}changeBoxGroupSort(t){this.store.dispatch(new Y.ol(t))}changeBoardGroupSort(t){t===co.o.name&&this.sortDropdown.dropdown.close(),this.store.dispatch(new Y.pl(t))}clearColSorting(t){this.store.dispatch(new Y.ub(t.name))}toggleCustomFieldVisible(t){this.boardViewCustomFieldsMap$.pipe(Object(N.a)(1)).subscribe(e=>{this.store.dispatch(new Y.lj(Object(_r.pb)(t,this.sharedData.compatCurrentTeam),e[t.id]?vr.b.Hidden:vr.b.Visible))})}saveChanges(){this.store.dispatch(new Y.Mi),this.store.dispatch(new Y.ik(!0))}cancelChanges(){this.store.dispatch(new Y.gg),this.hideAutoSaveViewCheckbox()}editViewSettings(t=!0,e=!1){this.boardSettingsDropdown&&this.boardSettingsDropdown.close(),this.settingsDropdown&&this.settingsDropdown.dropdown&&this.settingsDropdown.dropdown.close(),this.mapViewSettingsDropdown&&this.mapViewSettingsDropdown.dropdown&&this.mapViewSettingsDropdown.dropdown.close(),Object(ii.a)([this.store.select(X.qb).pipe(Object(Yn.a)()),this.store.select(z.getProject).pipe(Object(Yn.a)())]).subscribe(([i,n])=>{i&&n&&(this.spaceToEdit=t?{space:Object.assign({},n),stage:null,viewType:i.viewType}:{space:Object.assign({},n),stage:Tr.a.Views,viewSettingsTab:e?"default":"required",viewType:null},this.modal.open({name:"create-project",modifier:"cu-modal__create-new-space",content:this.editProjectModal,bodyModifier:"cu-modal__body_no-min-height"}))})}unfreezeView(){this.modal.close(),Object(ii.a)([this.selectedView$.pipe(Object(Yn.a)()),this.isAutoSaving$.pipe(Object(Yn.a)()),this.hasChanges$.pipe(Object(Yn.a)())]).subscribe(([t,e,i])=>{this.store.dispatch(new Y.vj(t.id,!1)),e&&i&&this.saveChanges()})}confirmCopyViewPrivate(){this.modal.close(),this.store.dispatch(new Y.mc(this.confirmView.id,!0))}setAutoSave(t){this.selectedView$.pipe(Object(N.a)(1)).subscribe(e=>{this.store.dispatch(new Y.qm(e.id,{autoSave:t}))}),this.hideAutoSaveViewCheckbox()}showViewChangesModal(t){this.modal.open({content:t,title:$localize`:@@cu2-views-bar__title_view-changes:View changes`,bodyModifier:"cu-modal__body_no-min-height"})}hideAutoSaveViewCheckbox(){this.store.dispatch(new Y.ik(!1))}setPopState(t){this.frozenPop&&(t?(this.frozenPopState=!0,this.frozenPop.show()):(this.frozenPopState=!1,this.frozenPop.hide()))}checkPopState(){this.frozenPop&&(this.frozenPopState=!1,setTimeout(()=>{this.frozenPopState?this.frozenPop.show():this.frozenPop.hide()},500))}saveView(t){switch(t){case je.CopyPrivate:case je.Copy:this.selectedView$.pipe(Object(Yn.a)(),Object(Vi.a)(Boolean)).subscribe(e=>{this.store.dispatch(new Y.mc(e.id,t===je.CopyPrivate))});break;case je.Save:this.saveChanges()}}editView(t){this.selectedView$.pipe(Object(Yn.a)(),Object(Vi.a)(Boolean)).subscribe(e=>{this.viewSettingsDropdown&&(t===je.Lock||t===je.Private&&e.visibility===$.j.Public)&&this.viewSettingsDropdown.close(),this.viewBlock&&this.viewBlock.editView({view:e,action:t})})}changeSettings(t){this.store.dispatch(new Y.ul(t))}selectSettings(t){[String(Pr.a.AutosizeAll),String(Pr.a.Reset)].includes(t)&&this.store.dispatch(new Y.sl(t))}loadHierarchies(){Object(ii.a)([this.team$,this.project$]).pipe(Object(N.a)(1)).subscribe(([t,e])=>{e||this.dataService.getHierarchy(t.id).subscribe(t=>{this.hierarchiesFull$.next(t.projects)})})}applySavedFilter(t){this.store.dispatch(new Y.F(Object(Sr.a)(t)))}shareView(t,e){t&&e&&t===$.i.Gantt&&e.settings&&e.settings.showSubtasksType!==$.h.StandAlone&&(e.settings.showSubtasksType=$.h.StandAlone,this.updateView({settings:e.settings})),this.modal.open({content:this.sharePublicViewModal,bodyModifier:"cu-modal__body_no-min-height",blank:!0})}updateView(t,e=!1){t.shareTasks&&this.defaultPublicTaskFields&&(t.shareTaskFields=this.defaultPublicTaskFields),this.selectedView$.pipe(Object(N.a)(1)).subscribe(i=>{this.store.dispatch(new Y.qm(i.id,t,e))})}setDefaultPublicTaskFields(t){t?this.localStorage.set(Ar.a,t):this.localStorage.remove(Ar.a),this.defaultPublicTaskFields=t}setActivityFilter(t,e){this.selectedView$.pipe(Object(N.a)(1)).subscribe(i=>{this.store.dispatch(new Y.qm(i.id,{activityFilters:[...(i.activityFilters||[]).filter(e=>e.field!==t),{field:t,values:e}]}))}),this.hideAutoSaveViewCheckbox()}fetchUnfinished(t){this.store.dispatch(new Y.fd(t))}moveTasksToOtherList(t){const e=t.tasks.map(t=>t.id);this.store.dispatch(new jr.cb({task_ids:e,fromList:t.currentList,toList:t.additionalList.id,emitChange:!0,tasks:t.tasks,list:t.additionalList})),this.store.dispatch(new Lr.n({ids:e}))}updateCalendarSettings(t){this.store.dispatch(new Nr.Eb({updates:t}))}dropdownAddClick(t){"customField"===t.action&&this.openCreateCustomField()}openCreateCustomField(){this.dataView$.pipe(Object(N.a)(1)).subscribe(t=>{if(t&&t.parent){const e={type:Object(W.b)(t.parent.type),id:t.parent.id,name:t.name,access:t.permissions.editView},i=this.modal.openComponent(q.a,this.injector,{title:this.commonStringsService.manageCustomFieldText(e.name),dialogModifier:"cu-modal__dialog-custom-fields",preventExternalClick:!0,bodyModifier:"cu-modal__body_no-min-height",modifier:"cu-modal__max-index"});i.instance.closeOnCreate=!0,i.instance.setEntity(e),i.instance.startCreate()}})}ganttTodayClick(){this.ganttViewBar&&this.ganttViewBar.goToToday()}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(ho.a),d.Wb(Jn.a),d.Wb(J.a),d.Wb(K.Store),d.Wb(Z.a),d.Wb(d.t),d.Wb($o.b),d.Wb(zr.a),d.Wb(Fr.a),d.Wb(Br.a),d.Wb(Q.a),d.Wb(Vr))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu2-views-bar"]],viewQuery:function(t,e){if(1&t&&(d.jd(Od,1),d.jd($d,3),d.jd(jd,1),d.jd(Ld,1),d.jd(Ed,1),d.jd(Nd,1),d.jd(Ad,1),d.jd(Vd,1),d.jd(zd,1),d.jd(Fd,1),d.jd(Bd,1),d.jd(Rd,1),d.jd(Ud,3),d.jd(Gd,3),d.jd(Hd,3),d.jd(Wd,3),d.jd(qd,3)),2&t){let t;d.Qc(t=d.rc())&&(e.settingsMenu=t.first),d.Qc(t=d.rc())&&(e.defaultGroupByTemplate=t.first),d.Qc(t=d.rc())&&(e.sortDropdown=t.first),d.Qc(t=d.rc())&&(e.frozenPop=t.first),d.Qc(t=d.rc())&&(e.unfreezeViewConfirmModal=t.first),d.Qc(t=d.rc())&&(e.editProjectModal=t.first),d.Qc(t=d.rc())&&(e.boardSettingsDropdown=t.first),d.Qc(t=d.rc())&&(e.settingsDropdown=t.first),d.Qc(t=d.rc())&&(e.mapViewSettingsDropdown=t.first),d.Qc(t=d.rc())&&(e.ganttViewBar=t.first),d.Qc(t=d.rc())&&(e.viewBlock=t.first),d.Qc(t=d.rc())&&(e.viewSettingsDropdown=t.first),d.Qc(t=d.rc())&&(e.paywallLockTemplate=t.first),d.Qc(t=d.rc())&&(e.paywallMakePersonalTemplate=t.first),d.Qc(t=d.rc())&&(e.customExportListViewTemplate=t.first),d.Qc(t=d.rc())&&(e.sharePublicViewModal=t.first),d.Qc(t=d.rc())&&(e.newCfForm=t.first)}},hostAttrs:[1,"cu2-views-bar"],inputs:{tags:"tags",tagsLoading:"tagsLoading",project:"project"},features:[d.Hb([Vr])],decls:110,vars:92,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,h,p,f,g,m,v,b,_,w,y,k,x,S,T,C,D,I,P,M,O,$,j,L,E,N,A,V,z,F,B,R,U,G,H,W,q,X,Y,K,Z,J,Q,tt,et,it,nt,ot,at,rt,st,ct,lt,ut,dt,ht;return t=$localize`:@@common_hotkey-search␟11ce1ba4ebf50fe6eae2d6aea73c0c8222ae772e␟1184355986361339598:Search (s)`,e=$localize`:@@common_hotkey-quickswitch␟f5239eb78702b497d1b63ee230f104f4cc70a241␟1993309532856959264:QuickSwitch (k)`,i=$localize`:@@view_permissions--personal-view␟e88813958f8f347f8e59129182dac4c738f7503b␟1154685093208733050:Personal view`,n=$localize`:@@view_permissions--personal-view␟e88813958f8f347f8e59129182dac4c738f7503b␟1154685093208733050:Personal view`,o=$localize`:@@view_permissions--protected-view␟eb86625d6c4804762c3a8714d7abaf7d99a1e57e␟2525679108453359323:Protected view`,a=$localize`:@@layout_changes-prevented␟02e2ca38723129f227adbcce2e71960c3bf1140a␟4307208612180230809: You can't save layout changes. `,r=$localize`:@@common_reload␟c28e9f2cf20094be8d158abea07e94c788d14e7f␟3189619108608054296: Reload `,s=$localize`:@@common_autosave-view␟2cb711a2c724c432c36f9f5926954b59a0b43586␟1807635378667869555:Autosave view`,c=$localize`:@@layout_changes-prevented-guests␟35310965069853e877aaeada023c9204e4193c03␟7263030924711247274: Guests can't save layouts. `,l=$localize`:@@layout_user-changed-layout␟26fbd9a1637ba80007d49f3324f6279c0a632457␟3400302179750751910: You changed the layout. `,u=$localize`:@@layout_save␟004d8e2ef555f329564375dacdb94834fe7e5d5c␟2532883032924797637:Save layout`,h=$localize`:@@common_save␟c9ead4422f32b38b608786e6dd8df1e4e8102915␟4754783447566981224: Save `,p=$localize`:@@common_or␟053e81597467a642e04109eebe934c84e6a1f467␟6627551976444260400:or`,f=$localize`:@@layout_tooltip-msg--clear-layout-changes␟d9f8648876726ce54aff2dd602a9d754ba8fab8a␟799546838905470778:Clear your layout changes to go back to the last saved layout (tasks are unaffected, this is for the layout only)`,g=$localize`:@@common_reload␟0c67adc2f4708ac9aa9852c0812ae5eda19a6789␟4903124378985638574: reload `,m=$localize`:@@layout_changes-prevented-here␟d93fdb4283c7a177eb722ac9eacd5b8fb8117dbf␟8045030464067308086:You can't save layouts here.`,v=$localize`:@@layout_remove-changes␟985530079832294957b3da89483894ae25f6f894␟8206736959318802173: Remove changes `,b=$localize`:@@layout_saved␟0993510e86800c4755d31919e48ff5e48bbe2e6b␟7413783649881456349:Layout saved!`,_=$localize`:@@help_layout--changes-notice␟0dc150504ec3d2e29c2fd4d7e20acf65c34faf95␟2453481317410430020:When making changes to views, instead of clicking 'save', all changes you make will be saved immediately. This setting is for you only, not your entire team.`,w=$localize`:@@layout_autosave-my-changes␟cd41006aac9b5f3fb46e922001c760eefa37a2fd␟1580162655646192666:Autosave my changes on this view.`,y=$localize`:@@common_today␟29bdc72a201caf715627c50688b06d02f8565359␟6861283367474187404: Today `,k=$localize`:@@common_settings␟f2d11ba5c599061eca2405ac09dc467f7c3adbcf␟4343618064306746483: Settings `,x=$localize`:@@cu2-views-bar__export-view␟a257918e2a8dd707246175288f71b4914ec1ec6c␟2016279295317949903:Export view`,S=$localize`:@@common_export␟5f19586aba912ec6eb123ec5ab609a3bcc073066␟7462301153729425254:Export`,T=$localize`:@@cu2-views-bar__form-placeholder_filter-by-task-name␟5a8d05c2c905424fbf33fc27daf1ad438eadfdab␟2965039093337985465:Filter by task name...`,C=$localize`:@@common_sort-by-1␟ec97f67072a83aaa972536b18d83179f6e4bbec9␟7699622144571229146:Sort by`,D=$localize`:@@common_group-by␟788a575e9f2466abeee0e51ab8f77e9cf19243de␟3653048554215358825:Group by`,I=$localize`:@@common_share␟0bd8b27f60a1f098a53e06328426d818e3508ff9␟7419704019640008953:Share`,P=$localize`:@@common_showing-subtasks␟d9dd594384e2cd8cdf82629d971b4e655e41fe6d␟3983281359965104466: Showing Subtasks `,M=$localize`:@@common_hiding-subtasks␟4659e26fd6f0f46dee597c8b5fc0474fdbf655b4␟1660836487945749873: Hiding Subtasks `,O=$localize`:@@common_subtasks␟83efb157e6da28ea41b257d0f2b8c3cd8b5a6d72␟7541717649355997013:Subtasks`,$=$localize`:@@common_subtasks␟83efb157e6da28ea41b257d0f2b8c3cd8b5a6d72␟7541717649355997013:Subtasks`,j=$localize`:@@common_show␟2aba1e87039819aca3b70faa9aa848c12bf139ca␟8461842260159597706:Show`,L=$localize`:@@common_custom-fields␟986e88935b2c7b563352ab87ce162709b3e8b30f␟1003581798103245690: Custom Fields `,E=$localize`:@@common_custom-fields␟9ae9a74ed936df647c4acfbb0c8009f8cb6416ab␟4104549870774704741: Custom Fields `,N=$localize`:@@help_custom-fields--hierarchy␟67c1f7e4360080c6bc14957e432baf157e6f2b8d␟6787238196841718486: You can show custom fields that are set at or above this hierarchy level. `,A=$localize`:@@help_layout--changes-notice␟ca61099372c88a1f733edc1616fb13aede0718e2␟3758462146417634102: When making changes to views, instead of clicking 'save', all changes you make will be saved immediately. This setting is for you only, not your entire team. `,V=$localize`:@@layout_autosave-my-changes-2␟b66746d1b621acf45aa8bcd2950d5f74ef6aa3a9␟3562294454972830658: Save changes automatically `,z=$localize`:@@common_default-1␟deca31fc7adad40d00bd63881d0c17124cd05beb␟6855462350544488601:default`,F=$localize`:@@common_none␟a2f14a73f7a6e94479f67423cc51102da8d6f524␟6252070156626006029:None`,B=$localize`:@@common_status␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,R=$localize`:@@common_default-settings␟7b2c015690b6d1920e3f2101af948d21743ba5b3␟646467758223150407: Default Settings `,U=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,G=$localize`:@@cu2-views-bar__frozen-note-protected-by␟fa946aec8e855d3095c8acfef0cc7cc65c0cb0b0␟365594682133953876: Protected by ${"\ufffd#3\ufffd"}:START_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION:﻿${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:.${"[\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd/#3\ufffd"}:CLOSE_TAG_DIV:${"\ufffd*8:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1:: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1:.${"[\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,G=d.lc(G),H=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,W=$localize`:@@paywall_text--protect-views␟b4dd8d053ee05799919b56f5cab0a9d4f6adf180␟8331863455270593886:Upgrade to Business to protect views and prevent unwanted changes.`,q=$localize`:@@paywall_email-subject--protect-views␟1f7477b8f6345498e9ca3f41af1faf5d65aabdaf␟5562490287161458785:Please upgrade ClickUp so we can protect views`,X=$localize`:@@paywall_upgrade-button-txt--upgrade-to-business␟e7a6fa35e2b9dfc4422b056ce3b1d60c5a5a13c6␟1249386464832739026:Upgrade to Business`,Y=$localize`:@@common_plans--business␟e45bb24e9faf557d26abd6822d6a6da37e3ff171␟4607581465689784056:Business`,K=$localize`:@@paywall_text--personal-views␟cfc68ed3817ae0c6c3ae4cf8768ad34eec13a4dd␟6721321494800710974:Upgrade to Business to make Personal views.`,Z=$localize`:@@paywall_email-subject--protect-views␟1f7477b8f6345498e9ca3f41af1faf5d65aabdaf␟5562490287161458785:Please upgrade ClickUp so we can protect views`,J=$localize`:@@common_plans--enterprise␟47658bc95e211b91814febd224da550ae3df5521␟8041427397457443304:Enterprise`,Q=$localize`:@@paywall_text--workload-groupings␟e0715a5b00e2c4a1576f9a1963a94c5ba3227872␟557723742802081188:Upgrade to Enterprise to see effort (task, time, point) totals for other grouping types, such as status, priority, tag and custom field groups.`,tt=$localize`:@@paywall_email-subject--workload-groupings␟b891e1270caedf0b05f0ed23942d12ddf07ceb41␟1021664439244316047:Please upgrade ClickUp so we can use more workload view features`,et=$localize`:@@paywall_upgrade-button-txt--upgrade-to-enterprise␟5da61bb20646f764d943c4ca1c400dc9426286be␟3641536827925424330:Upgrade to Enterprise`,it=$localize`:@@cu2-views-bar__tooltip-msg_default-view-everyone␟8446a28e7293f6d2fa41f85df82d6c0607f46b6a␟3040441451968102808:This view is default for everyone`,nt=$localize`:@@cu2-views-bar__tooltip-msg_personal-view␟e88813958f8f347f8e59129182dac4c738f7503b␟1154685093208733050:Personal view`,ot=$localize`:@@common_autosave-view␟2cb711a2c724c432c36f9f5926954b59a0b43586␟1807635378667869555:Autosave view`,at=$localize`:@@layout_changes-prevented-guests␟a23b4aba8235dc4ed462af0c563395cfbc1e4ebf␟3448485478219447387:Guests can't save layouts.`,rt=$localize`:@@cu2-views-bar__tooltip-msg_remove-changes-reload-view␟161e309f66b7925ee6ea18d22df4a8e110d338dd␟5427851749167988384:Remove changes. You can't save layouts here.`,st=$localize`:@@layout_save-view␟6899e307c40cb356205f1abacd95f31103ad7a39␟3813301345022572548: Save View `,ct=$localize`:@@layout_tooltip-msg--clear-layout-changes␟d9f8648876726ce54aff2dd602a9d754ba8fab8a␟799546838905470778:Clear your layout changes to go back to the last saved layout (tasks are unaffected, this is for the layout only)`,lt=$localize`:@@cu2-views-bar__tooltip-msg_reload-view␟9c3bb9fd7e32e1433c9848c316109a6ccde13d11␟429529600286192248:Reload. You can't save layout changes.`,ut=$localize`:@@common_add-custom-field␟8e7664f2c726fdc99398f131f50140c23acfb2a3␟6342530220932146533: Add Custom Field `,dt=$localize`:@@common_add-custom-field␟8e7664f2c726fdc99398f131f50140c23acfb2a3␟6342530220932146533: Add Custom Field `,ht=$localize`:@@common_add-custom-field␟d61c96b6a32e373de49127b1e3d9150ce2c58946␟3373165770056887797:Add Custom Field`,[[1,"cu2-views-bar__container"],[4,"ngIf"],[3,"ngClass","isSharedSpace","isSharedTasks","isGuestTeam","project","category","subcategory","sprintStatus","hideBacklink"],[1,"cu2-views-bar__views",3,"subcategoryId","categoryId","projectId","teamId","groupingItems","onEditViewSettings","onOpenTemplatesInSettings"],["viewBlock",""],[3,"numTasks","projectId","categoryId","subcategoryId","sprintIndex","unfinishedTasks","sprintStatus","nextSprint","newSprint","onFetchUnfinished","onMoveTasks","onMoveToAdditionalList",4,"ngIf"],[3,"seoOptimized","sharingLink","sharingEntity","openModalOnClick","onLinkClick",4,"ngIf"],["class","cu2-views-bar__selected-view-options-container",4,"ngIf"],["class","cu2-views-bar__options",3,"ngClass","cu2-views-bar__options_v6",4,"ngIf"],[3,"isGanttView","isCalendarView","isGridView","isTimelineOrWorkloadView",4,"ngIf"],["calendarViewDateSelectors",""],["mapViewDateSelectors",""],["mapViewOptions",""],["calendarViewOptions",""],["ganttViewOptions",""],["timelineViewOptions",""],["viewOptionExport",""],["viewFilter",""],["viewOptionSortBy",""],["viewOptionGroupBy",""],["groupBy",""],["viewOptionSharing",""],["viewOptionShowSubtasks",""],["activityFields",""],["settingsCog",""],["viewSettings",""],["viewOptionFilterAssignees",""],["viewChangesModalTemplate",""],["defaultGroupByTemplate",""],["unfreezeViewConfirmModal",""],["editProjectModal",""],["titleTemplateSettings",""],["frozenPopover",""],["paywallLockTemplate",""],["paywallMakePersonalTemplate",""],["paywallTimelineGroupBy",""],["customExportListViewTemplate",""],["sharePublicViewModal",""],["viewSettingsDropdownTemplate",""],["selectedViewDefaultIconTemplate",""],["viewSelectedOptions",""],["newCfForm",""],["cuTooltip",t,"tooltipModifier","tooltip_left","tooltipDelay","600",3,"iconModifier"],["cuTooltip",e,"tooltipModifier","tooltip_left","tooltipDelay","600",3,"iconModifier"],[3,"ngTemplateOutlet"],[3,"numTasks","projectId","categoryId","subcategoryId","sprintIndex","unfinishedTasks","sprintStatus","nextSprint","newSprint","onFetchUnfinished","onMoveTasks","onMoveToAdditionalList"],[3,"seoOptimized","sharingLink","sharingEntity","openModalOnClick","onLinkClick"],[1,"cu2-views-bar__selected-view-options-container"],[1,"cu2-views-bar__selected-view-options",3,"ngClass"],[1,"cu2-views-bar__selected-view-options-row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cu2-views-bar__selected-view-options-item",4,"ngIf"],[1,"cu2-views-bar__selected-view-options-divider"],[1,"cu2-views-bar__selected-view-options-item"],["icon","cu2-lock","cuTooltip",i,1,"cu2-views-bar__selected-view-options-icon","cu2-views-bar__selected-view-options-icon_private"],n,["class","cu2-views-bar__selected-view-options-item","containerClass","markdown-tooltip cu2-views-bar__frozen-tooltip","placement","bottom",3,"popover","mouseenter","mouseleave",4,"ngIf"],["containerClass","markdown-tooltip cu2-views-bar__frozen-tooltip","placement","bottom",1,"cu2-views-bar__selected-view-options-item",3,"popover","mouseenter","mouseleave"],["frozenPop","bs-popover"],["icon","cu2-shield-alt",1,"cu2-views-bar__selected-view-options-icon","cu2-views-bar__selected-view-options-icon_lock"],o,["class","cu2-views-bar__selected-view-options-item-settings",4,"ngIf"],[1,"cu2-views-bar__selected-view-options-item-settings"],a,[1,"cu2-views-bar__selected-view-options-option",3,"click"],r,["class","cu2-views-bar__selected-view-options-icon cu2-views-bar__selected-view-options-icon_autosave cu2-views-bar__selected-view-options-icon_clickable","cuTooltip",s,3,"cu2-views-bar__selected-view-options-icon_spinner","icon","click",4,"ngIf"],["class","cu2-views-bar__selected-view-options-changes",4,"ngIf"],["cuTooltip",s,1,"cu2-views-bar__selected-view-options-icon","cu2-views-bar__selected-view-options-icon_autosave","cu2-views-bar__selected-view-options-icon_clickable",3,"icon","click"],[1,"cu2-views-bar__selected-view-options-changes"],["class","cu2-views-bar__selected-view-options-icon cu2-views-bar__selected-view-options-icon_unsaved","icon","cu2-save",4,"ngIf"],[1,"cu2-views-bar__selected-view-options-text"],[4,"ngIf","ngIfElse"],["fullMember",""],["icon","cu2-save",1,"cu2-views-bar__selected-view-options-icon","cu2-views-bar__selected-view-options-icon_unsaved"],c,l,["title",u,3,"items","autoClose","onSelect","onCheck"],[1,"cu2-views-bar__selected-view-options-option","cu2-views-bar__selected-view-options-option_single"],h,[1,"cu2-views-bar__selected-view-options-text","cu2-views-bar__selected-view-options-changes_cancel"],p,["cuTooltip",f,"tooltipDelay","500","tooltipLifeTime","15000",1,"cu2-views-bar__selected-view-options-option",3,"click"],g,m,v,[1,"cu2-views-bar__selected-view-options-changes-saved"],["icon","cu2-save",1,"cu2-views-bar__selected-view-options-icon","cu2-views-bar__selected-view-options-icon_saved"],b,[1,"cu2-views-bar__save-changes-option"],["cuTooltip",_,"tooltipLifeTime","15000",3,"checked","onChange"],w,[1,"cu2-views-bar__options",3,"ngClass"],[3,"field","disableTimeEstimate","customFields","customFieldId",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],["class","cu2-views-bar__options-divider",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"layoutVersion"],[1,"cu2-views-bar__options-today",3,"click"],[1,"cu2-views-bar__options-today-label"],y,[3,"field","disableTimeEstimate","customFields","customFieldId"],[1,"cu2-views-bar__options-divider"],[4,"ngTemplateOutlet"],["cuCalendarMultiSelectCancelExclude","",3,"layoutVersion"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"isGanttView","isCalendarView","isGridView","isTimelineOrWorkloadView"],[3,"view","team","user","canShareView","shareView"],[1,"cu2-views-bar__btn",3,"title","titleTemplate","toggleModifier","items","autoClose","dropdownDisabled","onCheck","onEditViewSettings"],["mapViewSettingsDropdown",""],["cuDropdown","",1,"cu2-views-bar__btn",3,"dropdownCloseOnInsideClick","dropdownPlacement","cuTooltip","dropdownCloseOnModal"],["cuDropdownToggle","",1,"cu-dropdown__toggle"],["class","cu2-views-bar__btn-toggle cu2-views-bar__btn-toggle_ellipsis cu2-views-bar__btn-toggle_view-settings-two-rows",3,"icon",4,"ngIf"],["class","cu-dropdown__menu cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],[1,"cu2-views-bar__btn-toggle","cu2-views-bar__btn-toggle_ellipsis","cu2-views-bar__btn-toggle_view-settings-two-rows",3,"icon"],["icon","cu3-cog-2",1,"cu2-views-bar__btn-icon"],[1,"cu2-views-bar__btn-title"],k,[1,"cu-dropdown__menu","cu-dropdown__menu_overflow-hidden"],[3,"customFields","titleTemplate","viewPreferences","showViewSettings","showTaskCardSettings","colorByFields","subtasksType","onChangeShowSubtasks","updateViewPreferences"],["settingsMenu",""],[3,"preferences","view","team","user","canShareView","shareView"],["ganttViewBar",""],[3,"dataView","sortByTemplate","assigneesFilterTemplate","groupByTemplate","sharingTemplate"],["timelineViewViewOptions","",4,"ngIf"],["timelineViewFilter","",4,"ngIf"],["timelineViewViewOptions",""],["timelineViewFilter",""],[1,"cu2-views-bar__btn",3,"view","customFields","project","team"],["viewOptionExportBtn",""],["icon","cu2-export2",1,"cu-dropdown-list-item__icon","cu-dropdown-list-item__icon_template"],[1,"cu-dropdown-list-item__title"],x,[1,"cu-dropdown-list-item__submenu",3,"icon"],["icon","cu2-export","cuTooltip",S,1,"cu2-views-bar__btn-toggle","cu2-views-bar__btn-toggle_export"],["class","cu-hidden-print","searchPlaceholder",T,3,"users","teamUsers","statuses","tags","tagsLoading","team","project","alwaysCollapseStatusGroups","hierarchies","currentLocation","fields","customFields","value","selectedFilterName","disabledTooltip","dateFormat","userGroups","weekStart","layoutVersion","viewPayload","guestMap","onlySearch","onlyExtra","showSearchIcon","onChange","onClear","onLoadTags","onEditTags","onLoadLocation","onApplySavedFilter",4,"ngIf"],["searchPlaceholder",T,1,"cu-hidden-print",3,"users","teamUsers","statuses","tags","tagsLoading","team","project","alwaysCollapseStatusGroups","hierarchies","currentLocation","fields","customFields","value","selectedFilterName","disabledTooltip","dateFormat","userGroups","weekStart","layoutVersion","viewPayload","guestMap","onlySearch","onlyExtra","showSearchIcon","onChange","onClear","onLoadTags","onEditTags","onLoadLocation","onApplySavedFilter"],["class","cu2-views-bar__btn cu2-views-bar__btn_label",3,"cu2-views-bar__btn_active","title","items","autoClose","dropdownDisabled","toggleModifier","onSelect",4,"ngIf"],[1,"cu2-views-bar__btn","cu2-views-bar__btn_label",3,"title","items","autoClose","dropdownDisabled","toggleModifier","onSelect"],["sortDropdown",""],["class","cu2-views-bar__btn-icon","icon","cu3-sort",4,"ngIf"],C,["class","cu2-views-bar__btn-label",4,"ngIf"],["class","cu2-views-bar__btn-caret-down","icon","cu2-caret-down",4,"ngIf"],["icon","cu3-sort",1,"cu2-views-bar__btn-icon"],[1,"cu2-views-bar__btn-label"],["icon","cu2-caret-down",1,"cu2-views-bar__btn-caret-down"],[1,"cu2-views-bar__btn","cu2-views-bar__btn_label",3,"title","titleHelpUrl","items","autoClose","menuModifier","toggleModifier","dropdownDisabled","cuPopover","containerClass","outsideClick","trigger","placement","onSelect","onAddClick"],["class","cu2-views-bar__btn-icon","icon","cu3-group",4,"ngIf"],D,["icon","cu3-group",1,"cu2-views-bar__btn-icon"],["class","cu2-views-bar__share",3,"click",4,"ngIf"],[1,"cu2-views-bar__share",3,"click"],["icon","cu2-share",1,"cu2-views-bar__share-icon"],[1,"cu2-views-bar__share-label"],I,["class","cu2-views-bar__btn cu2-views-bar__btn_label",3,"cu2-views-bar__btn_active","title","items","autoClose","toggleModifier","dropdownDisabled","onSelect",4,"ngIf"],["class","cu2-views-bar__btn cu2-views-bar__btn_toggle",3,"click",4,"ngIf"],[1,"cu2-views-bar__btn","cu2-views-bar__btn_toggle",3,"click"],[1,"cu2-views-bar__btn-icon",3,"icon"],P,M,[1,"cu2-views-bar__btn","cu2-views-bar__btn_label",3,"title","items","autoClose","toggleModifier","dropdownDisabled","onSelect"],["icon","cu2-subtask",1,"cu2-views-bar__btn-icon","cu2-views-bar__btn-icon_subtasks"],O,$,[3,"values","layoutVersion","allUsers","assignedCommentUserIds","onChangeValues","onChangeAssignedCommentUserIds"],["class","cu2-views-bar__btn-toggle",3,"ngClass","icon","cuTooltip",4,"ngIf"],[1,"cu2-views-bar__btn-toggle",3,"ngClass","icon","cuTooltip"],["icon","cu3-eye",1,"cu2-views-bar__btn-icon"],j,["class","cu2-views-bar__btn",3,"cu2-views-bar__btn_label","title","titleTemplate","toggleModifier","menuContainerModifier","items","autoClose","dropdownDisabled","onCheck","onEditViewSettings",4,"ngIf"],["class","cu2-views-bar__btn",3,"cu2-views-bar__btn_label","title","titleTemplate","toggleModifier","items","autoClose","dropdownDisabled","onCheck",4,"ngIf"],["cuDropdown","",3,"cu2-views-bar__btn","cu2-views-bar__btn_label","dropdownCloseOnInsideClick","dropdownDisabled","dropdownClose",4,"ngIf"],["class","cu2-views-bar__btn",3,"cu2-views-bar__btn_label","title","titleTemplate","items","autoClose","dropdownDisabled","toggleModifier","onCheck","onSelect","onEditViewSettings",4,"ngIf"],[1,"cu2-views-bar__btn",3,"title","titleTemplate","toggleModifier","menuContainerModifier","items","autoClose","dropdownDisabled","onCheck","onEditViewSettings"],["settingsDropdown",""],[1,"cu2-views-bar__btn",3,"title","titleTemplate","toggleModifier","items","autoClose","dropdownDisabled","onCheck"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownDisabled","dropdownClose"],["boardSettingsDropdown","dropdown"],["cuDropdownToggle",""],[4,"cuDropdownMenu"],["class","cu-dropdown-list__menu",4,"ngIf"],["class","columns-list",4,"ngIf"],[1,"cu-dropdown-list__menu"],[3,"title","titleTemplate"],[3,"item","ngClass","onCheck",4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-dropdown-list-item",3,"click",4,"ngIf"],[3,"item","ngClass","onCheck"],[1,"cu-dropdown-list-item",3,"click"],[1,"cu-dropdown-list-item__link"],L,["class","columns-list__item-name-count",4,"ngIf"],["class","cu-dropdown-list-item__check",3,"icon",4,"ngIf"],[1,"columns-list__item-name-count"],[1,"cu-dropdown-list-item__check",3,"icon"],[1,"columns-list"],[1,"columns-list__header","columns-list__header_clickable",3,"click"],["icon","arrow-back",1,"columns-list__header-back"],E,[1,"columns-list__help-info"],N,[1,"columns-list__body",3,"perfectScrollbar"],["class","columns-list__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"columns-list__item",3,"click"],[1,"columns-list__item-name"],["modifier","cu-custom-fields__list-item-icon",3,"field"],[1,"columns-list__item-name-text",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["class","columns-list__item-check",3,"icon",4,"ngIf"],[1,"columns-list__item-check",3,"icon"],[1,"cu2-views-bar__btn",3,"title","titleTemplate","items","autoClose","dropdownDisabled","toggleModifier","onCheck","onSelect","onEditViewSettings"],[3,"isMeView","userIds","modifier",4,"ngIf"],[3,"isMeView","userIds","modifier"],[1,"co-modal__body-text"],A,[3,"checked","onChange"],V,[1,"cu2-views-bar__default-text"],[1,"cu2-views-bar__default-italic"],z,F,B,[3,"data","onCancel","onConfirm"],[3,"team","project","viewType","currentStage","closeAll","viewSettingsTab","onCancel"],["cuTooltip","Set defaults for these settings to avoid having to change them on every view.","tooltipDelay","50",1,"cu2-views-bar__settings",3,"click"],R,[1,"cu2-views-bar__frozen-tooltip-body",3,"mouseenter","mouseleave"],G,[1,"cu2-views-bar__frozen-tooltip-body-by"],["href","https://docs.clickup.com/articles/2986479-freeze-layout","target","_blank"],U,["badge",H,"text",W,"emailSubject",q,"upgradeButtonText",X,3,"title","image","learnMore","amplitudeLabel"],["badge",Y,"text",K,"emailSubject",Z,3,"title","image","upgradeButtonText","learnMore","amplitudeLabel"],["badge",J,"text",Q,"emailSubject",tt,"upgradeButtonText",et,2,"max-width","290px",3,"title","amplitudeLabel"],[3,"isPublic","isSeoOptimised","sharingLink","view","publicToken","sharingExpiresOn","publicTaskFields","defaultPublicTaskFields","shareViewTasks","team","setIsPublic","setIsSeoOptimised","setSharingExpiresOn","setPublicTaskFields","setDefaultPublicTaskFields","setShareViewTasks"],[3,"class","title","items","autoClose","toggleModifier","onSelect","onCheck",4,"ngIf"],[3,"title","items","autoClose","toggleModifier","onSelect","onCheck"],["viewSettingsDropdown",""],["icon","cu2-ellipsis"],["cuTooltip",it,3,"icon","class",4,"ngIf"],["cuTooltip",it,3,"icon"],["class","cu2-views-bar__selected-options",4,"ngIf"],[1,"cu2-views-bar__selected-options"],["class","cu2-views-bar__selected-options-icon","icon","cu3-personal-view","cuTooltip",nt,4,"ngIf"],["class","cu2-views-bar__selected-options-icon cu2-views-bar__selected-options-icon_autosave cu2-views-bar__selected-options-icon_pointer","cuTooltip",ot,3,"cu2-views-bar__selected-options-icon_spinner","icon","click",4,"ngIf"],["class","cu2-views-bar__selected-options-icon cu2-views-bar__selected-options-icon_saved","icon","cu3-save-view",4,"ngIf"],["cuTooltip",ot,1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_autosave","cu2-views-bar__selected-options-icon_pointer",3,"icon","click"],["icon","cu3-save-view",1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_saved"],["class","cu2-views-bar__selected-options-icon cu2-views-bar__selected-options-icon_unsaved","icon","cu3-save-view","cuTooltip",at,4,"ngIf"],["icon","cu3-save-view","cuTooltip",at,1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_unsaved"],["class","cu2-views-bar__selected-options-icon cu2-views-bar__selected-options-icon_pointer","cuTooltip",rt,"tooltipDelay","500","tooltipLifeTime","15000","icon","cu3-reload-view",3,"click",4,"ngIf"],[1,"cu2-views-bar__btn","cu2-views-bar__btn_label","cu2-views-bar__btn_label_unsaved",3,"title","items","autoClose","toggleModifier","onSelect","onCheck"],["icon","cu3-save-view",1,"cu2-views-bar__btn-icon","cu2-views-bar__btn-icon_unsaved"],[1,"cu2-views-bar__btn-title","cu2-views-bar__btn-title_unsaved"],st,["cuTooltip",ct,"tooltipDelay","500","tooltipLifeTime","15000","icon","cu3-reload-view",1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_pointer",3,"click"],["cuTooltip",rt,"tooltipDelay","500","tooltipLifeTime","15000","icon","cu3-reload-view",1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_pointer",3,"click"],["class","cu2-views-bar__selected-options-icon cu2-views-bar__selected-options-icon_pointer","cuTooltip",lt,"icon","cu3-reload-view",3,"click",4,"ngIf"],["icon","cu2-shield","containerClass","markdown-tooltip cu2-views-bar__frozen-tooltip","placement","top",1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_shield",3,"popover","mouseenter","mouseleave"],["cuTooltip",lt,"icon","cu3-reload-view",1,"cu2-views-bar__selected-options-icon","cu2-views-bar__selected-options-icon_pointer",3,"click"],["icon","cu3-personal-view","cuTooltip",nt,1,"cu2-views-bar__selected-options-icon"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownPlacement"],["newCfDropdown","dropdown"],[1,"cu-dropdown-list__body-add-section"],[1,"cu-dropdown-list__body-add-section-icon"],["icon","cu2-plus"],[1,"cu-dropdown-list__body-add-section-text"],ut,[3,"width",4,"cuDropdownMenu"],[1,"cu-task-list-header-settings__add-new-type","cu-task-list-header-settings__add-new-type-shorter"],[1,"cu-task-list-header-settings__add-new-type-header"],dt,["createButtonText",ht,3,"customFields","allowRequireChange","notBusinessPlus","entity","createNewType","availableColumns","isInlineForm","country","addCreatedColumn","forTaskListHeader","showPin","autoFocusInput","stickyFooter","checkEmptyType","groupCustomFieldTypes","cancel","onCfCreated"]]},template:function(t,e){if(1&t&&(d.cc(0,"div",0),d.bd(1,Xd,1,0,"cu-collapsed-sidebar",1),d.vc(2,"async"),d.vc(3,"async"),d.Xb(4,"cu-views-bar-title",2),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"async"),d.vc(11,"async"),d.vc(12,"async"),d.cc(13,"cu-view-block",3,4),d.qc("onEditViewSettings",function(){return e.editViewSettings(!1)})("onOpenTemplatesInSettings",function(){return e.editViewSettings(!1,!0)}),d.vc(15,"async"),d.vc(16,"async"),d.vc(17,"async"),d.vc(18,"async"),d.vc(19,"async"),d.bc(),d.bd(20,Yd,3,2,"ng-container",1),d.vc(21,"async"),d.vc(22,"async"),d.bd(23,Kd,2,1,"ng-container",1),d.vc(24,"async"),d.bc(),d.bd(25,Zd,10,27,"cu-sprint-finish",5),d.vc(26,"async"),d.bd(27,Jd,3,8,"cu-view-public-sharing-banner",6),d.vc(28,"async"),d.vc(29,"async"),d.vc(30,"async"),d.bd(31,_h,12,20,"div",7),d.vc(32,"async"),d.vc(33,"async"),d.vc(34,"async"),d.vc(35,"async"),d.bd(36,Jh,55,98,"div",8),d.vc(37,"async"),d.bd(38,Qh,5,13,"cu-me-settings",9),d.vc(39,"async"),d.vc(40,"async"),d.vc(41,"async"),d.vc(42,"async"),d.vc(43,"async"),d.vc(44,"async"),d.vc(45,"async"),d.bd(46,tp,8,9,"ng-template",null,10,d.cd),d.bd(48,ep,5,12,"ng-template",null,11,d.cd),d.bd(50,op,11,27,"ng-template",null,12,d.cd),d.bd(52,lp,11,23,"ng-template",null,13,d.cd),d.bd(54,up,7,15,"ng-template",null,14,d.cd),d.bd(56,gp,9,19,"ng-template",null,15,d.cd),d.bd(58,bp,11,20,"ng-template",null,16,d.cd),d.bd(60,wp,2,3,"ng-template",null,17,d.cd),d.bd(62,Cp,2,3,"ng-template",null,18,d.cd),d.bd(64,Ip,2,3,"ng-template",null,19,d.cd),d.bd(66,jp,17,36,"ng-template",null,20,d.cd),d.bd(68,Ep,3,5,"ng-template",null,21,d.cd),d.bd(70,Gp,10,18,"ng-template",null,22,d.cd),d.bd(72,Hp,5,12,"ng-template",null,23,d.cd),d.bd(74,Xp,4,6,"ng-template",null,24,d.cd),d.bd(76,_f,8,12,"ng-template",null,25,d.cd),d.bd(78,yf,4,7,"ng-template",null,26,d.cd),d.bd(80,kf,6,3,"ng-template",null,27,d.cd),d.bd(82,Cf,14,13,"ng-template",null,28,d.cd),d.bd(84,Df,1,1,"ng-template",null,29,d.cd),d.bd(86,If,2,8,"ng-template",null,30,d.cd),d.bd(88,Pf,2,0,"ng-template",null,31,d.cd),d.bd(90,jf,12,11,"ng-template",null,32,d.cd),d.bd(92,Lf,1,4,"ng-template",null,33,d.cd),d.bd(94,Ef,1,5,"ng-template",null,34,d.cd),d.bd(96,Nf,1,2,"ng-template",null,35,d.cd),d.bd(98,Af,1,1,"ng-template",null,36,d.cd),d.bd(100,Vf,10,28,"ng-template",null,37,d.cd),d.bd(102,Ff,2,3,"ng-template",null,38,d.cd),d.bd(104,Rf,2,3,"ng-template",null,39,d.cd),d.bd(106,rg,4,7,"ng-template",null,40,d.cd),d.bd(108,ug,9,3,"ng-template",null,41,d.cd)),2&t){let t=null,i=null,n=null,o=null,a=null,r=null,s=null,c=null,l=null,u=null;d.Ib(1),d.Dc("ngIf",(null==(t=d.wc(2,22,e.user$))?null:t.dashboard)===e.LayoutVersion.Six&&d.wc(3,24,e.isSidebarCollapsed$)),d.Ib(3),d.Dc("ngClass",d.Hc(90,dg,null==(i=d.wc(5,26,e.subcategory$))?null:i.sprint))("isSharedSpace",d.wc(6,28,e.isSharedSpace$))("isSharedTasks",d.wc(7,30,e.isSharedTasks$))("isGuestTeam",d.wc(8,32,e.isGuestTeam$))("project",d.wc(9,34,e.project$))("category",d.wc(10,36,e.category$))("subcategory",d.wc(11,38,e.subcategory$))("sprintStatus",d.wc(12,40,e.sprintStatus$))("hideBacklink",!0),d.Ib(9),d.Dc("subcategoryId",null==(n=d.wc(15,42,e.locationIds$))?null:n.selectedSubCategoryId)("categoryId",null==(o=d.wc(16,44,e.locationIds$))?null:o.selectedCategoryId)("projectId",null==(a=d.wc(17,46,e.locationIds$))?null:a.selectedProjectId)("teamId",null==(r=d.wc(18,48,e.team$))?null:r.id)("groupingItems",d.wc(19,50,e.groupingItems$)),d.Ib(7),d.Dc("ngIf",(null==(s=d.wc(21,52,e.user$))?null:s.dashboard)===e.LayoutVersion.Four||(null==(s=d.wc(22,54,e.user$))?null:s.dashboard)===e.LayoutVersion.Five),d.Ib(3),d.Dc("ngIf",(null==(c=d.wc(24,56,e.user$))?null:c.dashboard)===e.LayoutVersion.Six),d.Ib(2),d.Dc("ngIf",d.wc(26,58,e.showSprintFinish$)),d.Ib(2),d.Dc("ngIf",(null==(l=d.wc(28,60,e.selectedView$))?null:l.public)&&(null==(l=d.wc(29,62,e.selectedView$))||null==l.permissions?null:l.permissions.editView)&&d.wc(30,64,e.showSharing$)),d.Ib(4),d.Dc("ngIf",(null==(u=d.wc(32,66,e.user$))?null:u.dashboard)!==e.LayoutVersion.Six&&d.wc(33,68,e.showSelectedViewOptionsBar$)&&!d.wc(34,70,e.isBlankView$)&&!d.wc(35,72,e.isMindmapViewCustom$)),d.Ib(5),d.Dc("ngIf",d.wc(37,74,e.showViewOptions$)),d.Ib(2),d.Dc("ngIf",d.wc(39,76,e.meView$)&&d.wc(40,78,e.isMeModeBarVisible$)&&!d.wc(41,80,e.isPageView$)&&!d.wc(42,82,e.isListView$)&&!d.wc(43,84,e.isFormView$)&&!d.wc(44,86,e.isActivityView$)&&!d.wc(45,88,e.isMindmapViewCustom$))}},directives:[n.q,kc,n.o,bl,_l.a,wl.a,ot.a,yl.a,n.x,Ll,El.a,nt.a,at.c,rt.a,xl.a,Nl.a,Al.a,Vl.a,zl.a,Fl.a,Bl.a,Rl.a,Ul.a,nu,tt.b,et.a,it.a,ou.a,au.a,Vu,cd,Sd,lu.a,Td.a,Hu.a,n.p,Bo.a,Bn.a,Cd.a,Dd.a,Nc,Id.a,st.a,Ar.b,Pd.a],pipes:[n.b,Oc.a,Md.a],styles:['.cu2-views-bar{min-height:51px}.cu2-views-bar__settings{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;position:relative;padding-bottom:1px;flex-shrink:0}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__settings{color:var(--theme-main-color)}}.cu2-views-bar__settings:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu2-views-bar__settings:hover{color:var(--theme-main-color-dark)}}.cu2-views-bar__settings:after{content:"";display:block;position:absolute;transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;bottom:0;left:0;width:100%;height:1px}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__settings:after{background-color:var(--theme-main-color)}}.cu2-views-bar__settings:hover:after{opacity:0}.cu2-views-bar__container{display:flex;align-items:center;min-width:0;height:51px;background:#fff;border-bottom:1px solid #e9ebf0;padding:0 10px 0 15px}.dark-theme .cu2-views-bar__container{background:#2b343b;border-bottom-color:#1e272e}.layout-size_compact .cu2-views-bar__container{height:51px}.layout-size_default .cu2-views-bar__container{height:56px}.layout-size_large .cu2-views-bar__container{height:60px}.cu2-views-bar_v6 .cu2-views-bar__container{padding-right:18px;height:51px}.layout-size_compact .cu2-views-bar_v6 .cu2-views-bar__container,.layout-size_default .cu2-views-bar_v6 .cu2-views-bar__container,.layout-size_large .cu2-views-bar_v6 .cu2-views-bar__container{height:51px}.cu2-views-bar__options{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;min-width:0;min-height:51px;padding:10px 17px 10px 0}.cu2-views-bar_v6 .cu2-views-bar__options{min-height:35px;padding:0 12px 0 0;background:#fff;border-bottom:1px solid #e9ebf0}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__options{background:#2b343b;border-bottom-color:#1e272e}.cu2-views-bar__options-today{display:flex;align-items:center;justify-content:center;cursor:pointer}.cu2-views-bar__options_v6 .cu2-views-bar__options-today{height:24px;padding:0 6px;margin-right:4px;border-radius:6px}.cu2-views-bar__options_v6 .cu2-views-bar__options-today:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu2-views-bar__options-today:hover{background-color:#1e272e}.cu2-views-bar__options-today-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-ms-user-select:none;user-select:none}.cu2-views-bar__options_v6 .cu2-views-bar__options-today-label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu2-views-bar__options-today-label{color:#abaeb0}.cu2-views-bar__options-divider{flex-grow:1}.cu2-views-bar__options .cu2-views-bar__btn_label{margin-right:26px}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label{position:relative;margin-right:4px;border-radius:6px;height:24px;overflow:hidden}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label.cu-dropdown-list_opened:before,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label.cu-dropdown_open:before,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label:hover:before{opacity:1}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;width:100%;height:100%;opacity:0;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label:before{background-color:#1e272e}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label_unsaved{margin-right:0}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label+.cu2-views-bar__selected-options-icon{margin-left:0}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_label .cu2-views-bar__btn-dropdown-list-toggle{display:flex;align-items:center;padding:0 6px;height:24px;position:relative}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:before{background:#7b68ee;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:before{background:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:before{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:before{background:var(--theme-main-color)}}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active .cu2-views-bar__btn-label,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active .cu2-views-bar__btn-title{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active .cu2-views-bar__btn-label,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active .cu2-views-bar__btn-title{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active .cu2-views-bar__btn-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active .cu2-views-bar__btn-icon{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened:before,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover:before{opacity:.1}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened .cu2-views-bar__btn-label,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened .cu2-views-bar__btn-title,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover .cu2-views-bar__btn-label,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover .cu2-views-bar__btn-title{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened .cu2-views-bar__btn-label,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened .cu2-views-bar__btn-title,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover .cu2-views-bar__btn-label,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover .cu2-views-bar__btn-title{color:var(--theme-main-color-dark)}}.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened .cu2-views-bar__btn-icon,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover .cu2-views-bar__btn-icon{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active.cu-dropdown-list_opened .cu2-views-bar__btn-icon,.cu2-views-bar_v6 .cu2-views-bar__options .cu2-views-bar__btn_active:hover .cu2-views-bar__btn-icon{fill:var(--theme-main-color-dark)}}.cu2-views-bar__options_team-sidebar-opened{transition:margin-right .3s cubic-bezier(.785,.135,.15,.86) 0s;margin-right:55px}.cu2-views-bar__options_team-sidebar-opened.cu2-views-bar__options_v6{margin-right:243px}.cu2-views-bar__options_activity{background:#f2f4f7}.contrast_high .cu2-views-bar__options_activity{background:#eee}.dark-theme .cu2-views-bar__options_activity{background:#1e272e}.cu2-views-bar__options_activity .cu-search-filter__close_btn:before{background:linear-gradient(90deg,rgba(242,244,247,0) 0,#f2f4f7)}.cu2-views-bar__views{flex-grow:1;min-width:0;align-self:flex-end;margin-bottom:-1px}.cu2-views-bar_v6 .cu2-views-bar__views{align-self:center;margin:0;height:100%}.cu2-views-bar__reset{width:26px;height:26px;padding:6px;cursor:pointer;fill:#bcc0c7}.dark-theme .cu2-views-bar__reset{fill:#828588}.cu2-views-bar__reset:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__reset:hover{fill:var(--theme-main-color)}}.cu2-views-bar__btn{flex-shrink:0}.cu2-views-bar__btn-toggle{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:26px;height:26px;fill:#bcc0c7}.dark-theme .cu2-views-bar__btn-toggle{fill:#828588}.cu2-views-bar__btn-toggle.view-sorting-active,.cu2-views-bar__btn-toggle:hover,.cu2-views-bar__btn-toggle_active{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn-toggle.view-sorting-active,.cu2-views-bar__btn-toggle:hover,.cu2-views-bar__btn-toggle_active{fill:var(--theme-main-color)}}.cu2-views-bar__btn-toggle_group-by{padding:7px}.cu2-views-bar__btn-toggle_subtasks{padding:6px 7px}.cu2-views-bar__btn-toggle_view-settings{transform:rotate(90deg);padding:6px}.cu2-views-bar__btn-toggle_view-settings-two-rows{width:25px;height:25px;padding:5px;fill:#7c828d;margin-left:15px}.cu2-views-bar__btn-toggle_ellipsis{padding:5px}.cu2-views-bar__btn-toggle_date-scale{padding:6px}.cu2-views-bar__btn-toggle_color{padding:7px 6px 6px}.cu2-views-bar__btn-toggle_export{padding:5px;stroke-width:1.8;fill:transparent;stroke:#bcc0c7}.dark-theme .cu2-views-bar__btn-toggle_export{fill:transparent;stroke:#828588}.cu2-views-bar__btn-toggle_export:hover,.cu-export-view .cu-dropdown_open .cu2-views-bar__btn-toggle_export{stroke:#7b68ee;fill:transparent}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn-toggle_export:hover,.cu-export-view .cu-dropdown_open .cu2-views-bar__btn-toggle_export{stroke:var(--theme-main-color)}}.cu2-views-bar__btn-label{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;white-space:nowrap;cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#82868d;margin-right:6px}.dark-theme .cu2-views-bar__btn-label{color:#828588}.cu2-views-bar__btn-label+.cu2-views-bar__btn-label{margin-left:-2px}.cu2-views-bar_v6 .cu2-views-bar__btn-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0 0 0 4px;color:#333}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__btn-label{color:#abaeb0}.cu2-views-bar__btn-label span{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#292d34}.dark-theme .cu2-views-bar__btn-label span{color:#d5d6d7}.cu2-views-bar__btn-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-right:5px;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;white-space:nowrap;color:#7c828d}.dark-theme .cu2-views-bar__btn-title{color:#abaeb0}.cu2-views-bar_v6 .cu2-views-bar__btn-title{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-left:4px;margin-right:0;color:#333}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__btn-title{color:#abaeb0}.cu2-views-bar_v6 .cu2-views-bar__btn-title_unsaved{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu2-views-bar__btn-title_unsaved{color:var(--theme-main-color)}}.cu2-views-bar__btn-caret-down{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:8px;height:13px;fill:#7c828d}.dark-theme .cu2-views-bar__btn-caret-down{fill:#abaeb0}.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-toggle,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-toggle{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-toggle,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-toggle{fill:var(--theme-main-color)}}.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-caret-down,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-caret-down{fill:#7b68ee;transform:rotate(180deg)}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-caret-down,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-caret-down{fill:var(--theme-main-color)}}.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-label,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-label,.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-label span,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-label span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-label,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-label,.cu2-views-bar__btn.cu-dropdown_open .cu2-views-bar__btn-label span,.cu2-views-bar__btn .cu-dropdown_open .cu2-views-bar__btn-label span{color:var(--theme-main-color)}}.cu2-views-bar__btn .cu-dropdown__toggle{display:flex;align-items:center}.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-caret-down,.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-toggle{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-caret-down,.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-toggle{fill:var(--theme-main-color)}}.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-label,.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-label span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-label,.cu2-views-bar__btn .cu-dropdown__toggle:hover .cu2-views-bar__btn-label span{color:var(--theme-main-color)}}.cu2-views-bar__btn_row{display:flex;align-items:center}.cu2-views-bar__btn_row cu-toggle-switch{display:flex}.cu2-views-bar__btn_toggle{display:flex;align-items:center;margin-left:10px;border-radius:4px;height:22px;padding:2px 6px 0;cursor:pointer;margin-right:25px}.cu2-views-bar__btn_toggle:hover{background:#f2f2f2}.dark-theme .cu2-views-bar__btn_toggle:hover{background:#2b343b}.cu2-views-bar_v6 .cu2-views-bar__btn_toggle{border-radius:6px;height:24px;padding:0 6px;margin-left:0;margin-right:4px}.cu2-views-bar__btn_toggle .cu2-views-bar__btn-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-transform:uppercase;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu2-views-bar__btn_toggle .cu2-views-bar__btn-title{color:#7c828d}.cu2-views-bar_v6 .cu2-views-bar__btn_toggle .cu2-views-bar__btn-title{text-transform:none;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__btn_toggle .cu2-views-bar__btn-title{color:#abaeb0}.cu2-views-bar__btn-icon{width:11px;height:11px;margin-right:5px;fill:#b9bec7}.dark-theme .cu2-views-bar__btn-icon{fill:#7c828d}.cu2-views-bar_v6 .cu2-views-bar__btn-icon{width:12px;height:12px;margin-right:0;fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__btn-icon{fill:#abaeb0}.cu2-views-bar_v6 .cu2-views-bar__btn-icon_ellipsis{width:13px}.cu2-views-bar_v6 .cu2-views-bar__btn-icon_subtasks{width:14px;height:14px}.cu2-views-bar_v6 .cu2-views-bar__btn-icon_unsaved{fill:#7b68ee;width:16px;height:16px}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu2-views-bar__btn-icon_unsaved{fill:var(--theme-main-color)}}.cu2-views-bar__share{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;position:relative;height:24px;padding:0 5px;margin-left:10px;cursor:pointer;border-radius:3px;border:1px solid #d8dce2}.contrast_high .cu2-views-bar__share{border-color:#b9bec7}.dark-theme .cu2-views-bar__share{border-color:#384047}.cu2-views-bar_v6 .cu2-views-bar__share{border:0;margin-left:14px}.cu2-views-bar_v6 .cu2-views-bar__share:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__share:hover{background-color:#1e272e}.cu2-views-bar_v6 .cu-automation-entity-count+.cu2-views-bar__share:before{content:"";display:block;position:absolute;left:-7px;width:1px;height:20px;background:#e9ebf0}.dark-theme .cu2-views-bar_v6 .cu-automation-entity-count+.cu2-views-bar__share:before{background:#1e272e}.cu2-views-bar__share:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__share:hover{background-color:#2b343b}.cu2-views-bar__share-icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;fill:#7c828d;stroke:#7c828d}.dark-theme .cu2-views-bar__share-icon{fill:#b9bec7;stroke:#b9bec7}.cu2-views-bar_v6 .cu2-views-bar__share-icon{fill:#7c828d;stroke:#7c828d}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__share-icon{fill:#828588;stroke:#828588}.cu2-views-bar__share-label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;margin-left:5px;margin-bottom:-1px;color:#7c828d}.cu2-views-bar_v6 .cu2-views-bar__share-label{-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#53575e}.dark-theme .cu2-views-bar_v6 .cu2-views-bar__share-label{color:#828588}.cu2-views-bar__me-team{display:flex;align-items:center;cursor:pointer}.cu2-views-bar__me-team_selected{cursor:default}.cu2-views-bar__me-team_selected .cu2-views-bar__me-team-label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__me-team_selected .cu2-views-bar__me-team-label{color:var(--theme-main-color)}}.dark-theme .cu2-views-bar__me-team_selected .cu2-views-bar__me-team-label{color:#d5d6d7}.cu2-views-bar__me-team_selected .cu2-views-bar__me-team-label:hover{color:#292d34}.dark-theme .cu2-views-bar__me-team_selected .cu2-views-bar__me-team-label:hover{color:#d5d6d7}.cu2-views-bar__me-team_clickable{cursor:pointer}.cu2-views-bar__me-team_clickable:hover .cu2-views-bar__me-team-label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__me-team_clickable:hover .cu2-views-bar__me-team-label{color:var(--theme-main-color)}}.dark-theme .cu2-views-bar__me-team_clickable:hover .cu2-views-bar__me-team-label{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar__me-team_clickable:hover .cu2-views-bar__me-team-label{color:var(--theme-main-color)}}.cu2-views-bar__me-team-label{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;white-space:nowrap;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#82868d}.dark-theme .cu2-views-bar__me-team-label{color:#828588}.cu2-views-bar__me-team-label:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__me-team-label:hover{color:var(--theme-main-color)}}.cu2-views-bar__me-team-container{display:flex;align-items:center;margin-left:6px}.cu2-views-bar__me-team-container_disabled>*{pointer-events:none}.cu2-views-bar__me-team-divider{width:1px;height:16px;background:#e9ebf0;margin:0 16px 0 13px}.dark-theme .cu2-views-bar__me-team-divider{background:#828588}.cu2-views-bar__me-team-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:18px;height:18px;fill:#bcc0c7;margin-left:6px;padding:3px;cursor:pointer}.dark-theme .cu2-views-bar__me-team-icon{fill:#828588}.cu2-views-bar__me-team-icon:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__me-team-icon:hover{fill:var(--theme-main-color)}}.cu2-views-bar__default-badge{padding:3px 4px;border-radius:4px;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff;margin-left:4px;background:#bcc0c7}.dark-theme .cu2-views-bar__default-badge{background:#828588}.cu2-views-bar__default-text{font-weight:600;font-size:12px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu2-views-bar__default-text{font-family:var(--global-font-support)}}.cu2-views-bar__default-italic{font-weight:400;font-size:11px;line-height:1;font-family:Gotham Pro,Proxima Nova,arial,serif;color:#818193;padding:0 5px;font-style:italic}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu2-views-bar__default-italic{font-family:var(--global-font-support)}}.cu2-views-bar__group-by .cu-dropdown-list-item__check{width:12px;height:12px}.cu2-views-bar__selected-view-options{display:flex;align-items:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;flex-direction:column;color:#7c828d;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding:0 9px;border-radius:0 0 3px 3px;position:relative;background:#fff}.dark-theme .cu2-views-bar__selected-view-options{color:#828588;background:#2b343b}.cu2-views-bar__selected-view-options_saved{animation:fadeOut .3s linear 3s forwards,layoutSaved .1s linear 3.5s forwards}.cu2-views-bar__selected-view-options_saved:hover{animation:none}@keyframes layoutSaved{0%{max-height:20px}to{max-height:0;min-height:0;overflow:hidden}}.cu2-views-bar__selected-view-options:before{content:"";display:block;position:absolute;width:100%;height:100%;bottom:0;left:0;border:1px solid #e9ebf0;border-top:0;border-radius:0 0 3px 3px}.dark-theme .cu2-views-bar__selected-view-options:before{border-color:#1e272e}.cu2-views-bar__selected-view-options-row{display:flex;align-items:center;height:19px}.cu2-views-bar__selected-view-options-container{position:absolute;min-height:17px;left:50%;transform:translate(-50%,-1px);display:flex;justify-content:center;align-items:center;z-index:20;-webkit-user-select:none;-ms-user-select:none;user-select:none}.cu2-views-bar__selected-view-options-item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;margin-right:8px;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#82868d;position:relative}.dark-theme .cu2-views-bar__selected-view-options-item{color:#828588}.cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-item{margin-left:9px}.cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-item:before{content:"";display:block;position:absolute;width:1px;height:7px;left:-9px;background:#e9ebf0}.dark-theme .cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-item:before{background:#828588}.cu2-views-bar__selected-view-options-item-settings{display:inline-flex;color:#585c63;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin-top:2px}.dark-theme .cu2-views-bar__selected-view-options-item-settings{color:#828588}.cu2-views-bar__selected-view-options-icon{fill:#82868d;margin-top:-1px;position:relative}.dark-theme .cu2-views-bar__selected-view-options-icon{fill:#828588}.cu2-views-bar__selected-view-options-icon_default{width:14px;height:14px;margin-right:10px}.cu2-views-bar__selected-view-options-icon_lock,.cu2-views-bar__selected-view-options-icon_private{width:11px;height:12px;margin-right:4px}.cu2-views-bar__selected-view-options-icon_saved{width:11px;height:11px;margin-right:5px;animation:iconSaved .5s ease-out 1.5s forwards;fill:#67cb48}.dark-theme .cu2-views-bar__selected-view-options-icon_saved{fill:#67cb48}@keyframes iconSaved{0%{fill:#67cb48}to{fill:#bcc0c7}}.cu2-views-bar__selected-view-options-icon_unsaved{width:11px;height:11px;margin-right:5px;fill:#d64c4c}.dark-theme .cu2-views-bar__selected-view-options-icon_unsaved{fill:#d64c4c}.cu2-views-bar__selected-view-options-icon_autosave{width:13px;height:12px;margin-right:8px;fill:#bcc0c7}.dark-theme .cu2-views-bar__selected-view-options-icon_autosave{fill:#bcc0c7}.cu2-views-bar__selected-view-options-icon_autosave:not(.cu2-views-bar__selected-view-options-icon_spinner){animation:iconAutoSave .5s ease-out forwards}@keyframes iconAutoSave{0%{fill:#67cb48;transform:scale(1)}50%{fill:#67cb48;transform:scale(1.15)}to{transform:scale(1);fill:#bcc0c7}}.cu2-views-bar__selected-view-options-icon_close{width:10px;height:10px;margin-right:5px;padding:1px;fill:#82868d}.dark-theme .cu2-views-bar__selected-view-options-icon_close{fill:#828588}.cu2-views-bar__selected-view-options-icon_clickable{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer}.cu2-views-bar__selected-view-options-icon_clickable:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__selected-view-options-icon_clickable:hover{fill:var(--theme-main-color)}}.cu2-views-bar__selected-view-options-icon_spinner,.dark-theme .cu2-views-bar__selected-view-options-icon_spinner{fill:#67cb48}.cu2-views-bar__selected-view-options-icon_spinner>svg{animation:spinner 1.5s linear infinite}.cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-icon{margin-left:9px}.cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-icon:before{content:"";display:block;position:absolute;width:1px;height:7px;left:-9px;background:#e9ebf0}.dark-theme .cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-icon:before{background:#828588}.cu2-views-bar__selected-view-options-question{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;cursor:pointer;margin-top:-1px;margin-left:4px;pointer-events:all;fill:#bcc0c7;position:relative}.dark-theme .cu2-views-bar__selected-view-options-question{fill:#828588}.cu2-views-bar__selected-view-options-question:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__selected-view-options-question:hover{fill:var(--theme-main-color)}}.cu2-views-bar__selected-view-options-changes{display:flex;align-items:center;height:13px;position:relative}.cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-changes{margin-left:9px}.cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-changes:before{content:"";display:block;position:absolute;width:1px;height:7px;left:-9px;background:#e9ebf0}.dark-theme .cu2-views-bar__selected-view-options-item+.cu2-views-bar__selected-view-options-changes:before{background:#828588}.cu2-views-bar__selected-view-options-icon+.cu2-views-bar__selected-view-options-changes{border-left:1px solid #e9ebf0;padding-left:10px}.contrast_high .cu2-views-bar__selected-view-options-icon+.cu2-views-bar__selected-view-options-changes{border-left-color:#dedede}.dark-theme .cu2-views-bar__selected-view-options-icon+.cu2-views-bar__selected-view-options-changes{border-left-color:#828588}.cu2-views-bar__selected-view-options-changes .cu2-views-bar__save-changes-option{display:flex;align-items:center;height:13px;margin-right:8px}.cu2-views-bar__selected-view-options-changes .cu2-views-bar__save-changes-option .cu-checkbox__label:hover:after{opacity:1}.cu2-views-bar__selected-view-options-changes .cu2-views-bar__save-changes-option .cu-checkbox__label:before{top:2px;width:12px;height:12px;border-radius:3px;border-color:#b9bec7}.cu2-views-bar__selected-view-options-changes .cu2-views-bar__save-changes-option .cu-checkbox__label:after{left:3px;top:5px;width:6px;height:6px;border-radius:1px}.cu2-views-bar__selected-view-options-changes-saved{display:flex;align-items:center;color:#585c63;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;-webkit-user-select:none;-ms-user-select:none;user-select:none;text-transform:none;overflow:hidden;margin-right:8px;transform:translateZ(0)}.dark-theme .cu2-views-bar__selected-view-options-changes-saved{color:#828588}.cu2-views-bar__selected-view-options-text{display:flex;align-items:center;position:relative;color:#7c828d}.cu2-views-bar__selected-view-options-option{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;color:inherit;margin:1px 4px 0;position:relative;padding-bottom:1px}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__selected-view-options-option{color:var(--theme-main-color)}}.cu2-views-bar__selected-view-options-option:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu2-views-bar__selected-view-options-option:hover{color:var(--theme-main-color-dark)}}.cu2-views-bar__selected-view-options-option:last-child:not(.cu2-views-bar__selected-view-options-option_single){margin-right:8px}.cu2-views-bar__selected-view-options-option:after{content:"";display:block;position:absolute;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;bottom:0;left:0;width:100%;height:0;border-bottom:1px dotted}.cu2-views-bar__selected-view-options-option:after:hover{transition:none}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__selected-view-options-option:after{border-bottom-color:var(--theme-main-color)}}.cu2-views-bar__selected-view-options-option:hover:after{opacity:0}.cu2-views-bar__selected-view-options .cu-checkbox{position:relative}.cu2-views-bar__selected-view-options .cu-checkbox__label{color:#585c63;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;-webkit-user-select:none;-ms-user-select:none;user-select:none;text-transform:none;padding-left:20px;transform:translateZ(0)}.dark-theme .cu2-views-bar__selected-view-options .cu-checkbox__label{color:#828588}.cu2-views-bar__selected-view-options-divider{width:1px;height:7px;margin:0 8px 0 0;flex-shrink:0;background:#e9ebf0}.dark-theme .cu2-views-bar__selected-view-options-divider{background:#828588}.cu2-views-bar__selected-view-options-ellipsis{width:20px;height:16px;padding:3px;margin:0 -3px;fill:#bcc0c7;cursor:pointer;position:relative}.dark-theme .cu2-views-bar__selected-view-options-ellipsis{fill:#828588}.cu2-views-bar__selected-view-options-ellipsis:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__selected-view-options-ellipsis:hover{fill:var(--theme-main-color)}}.cu2-views-bar__frozen-tooltip{z-index:20;width:100%;min-width:250px;justify-content:center}.cu2-views-bar__frozen-tooltip-body{font:400 12px/1.4 Gotham Pro,Proxima Nova,arial,serif;-webkit-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.dark-theme .cu2-views-bar__frozen-tooltip-body{color:#2b343b}.cu2-views-bar__frozen-tooltip-body-by{font-weight:500;display:inline-block;color:#fff}.dark-theme .cu2-views-bar__frozen-tooltip-body-by{color:#2b343b}.cu2-views-bar__options-gantt{background-color:#fff;min-height:60px;height:60px;padding:0 12px;justify-content:space-between;flex-wrap:nowrap}.dark-theme .cu2-views-bar__options-gantt{background-color:#2b343b}.cu-gantt__fullscreen .cu2-views-bar__options-gantt{margin-right:0}.cu2-views-bar__options-gantt .cu2-views-bar__options-divider{display:none}.cu2-views-bar__options-gantt .cu-filter-block{position:relative}.cu2-views-bar__options-gantt .cu-filter-block:after{content:"";position:absolute;right:0;top:7px;width:1px;height:15px;background:#e9ebf0}.dark-theme .cu2-views-bar__options-gantt .cu-filter-block:after{background-color:#1e272e}.cu2-views-bar__options-gantt .cu-search-filter{margin:0}.cu2-views-bar__options-gantt .cu-filter-block__extra-icon-container{transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;width:34px;height:28px;border:1px solid #e9ebf0;border-radius:3px}.dark-theme .cu2-views-bar__options-gantt .cu-filter-block__extra-icon-container{border-color:#1e272e}.cu2-views-bar__options-gantt .cu-filter-block__extra-icon-container:hover{background-color:var(--theme-main-color)}.cu2-views-bar__options-gantt .cu-filter-block__extra-icon-container:hover .icon{fill:#fff!important}.cu2-views-bar__options-gantt .cu-filter-block__extra-icon{padding:9px 0!important;width:24px!important}.dark-theme .cu2-views-bar__options-gantt .cu-filter-block__extra-icon{fill:#d5d6d7!important}.cu2-views-bar__options-gantt .cu-filter-block__extra-icon-down{position:absolute;right:3px}.dark-theme .cu2-views-bar__options-gantt .cu-filter-block__extra-icon-down{fill:#d5d6d7!important}.cu2-views-bar__options-gantt .cu-search-filter__input{width:210px!important}.dark-theme .cu2-views-bar__options-gantt .cu-search-filter__input{color:#d5d6d7!important}.cu2-views-bar__selected-options{display:flex;align-items:center;position:relative;margin-right:4px;padding-right:8px}.cu2-views-bar__selected-options:before{content:"";display:block;position:absolute;right:0;width:1px;height:16px;background:#e9ebf0}.dark-theme .cu2-views-bar__selected-options:before{background-color:#1e272e}.cu2-views-bar__selected-options-dropdown-list{position:relative;margin-right:4px;border-radius:6px;height:24px;overflow:hidden}.cu2-views-bar__selected-options-dropdown-list.cu-dropdown-list_opened:before,.cu2-views-bar__selected-options-dropdown-list:hover:before{opacity:1}.cu2-views-bar__selected-options-dropdown-list:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;width:100%;height:100%;opacity:0;background-color:#f2f2f2}.dark-theme .cu2-views-bar__selected-options-dropdown-list:before{background-color:#1e272e}.cu2-views-bar__selected-options-dropdown-list-toggle{display:flex;align-items:center;padding:0 4px 0 2px;height:24px;cursor:pointer}.cu2-views-bar__selected-options-dropdown-list-toggle .cu2-views-bar__selected-options-icon{margin-left:0}.cu2-views-bar__selected-options-icon{position:relative;margin-left:6px;width:24px;height:24px;padding:4px;fill:#53575e}.dark-theme .cu2-views-bar__selected-options-icon{fill:#abaeb0}.cu2-views-bar__selected-options-icon+.cu2-views-bar__selected-options-icon:before{content:"";display:block;position:absolute;width:3px;height:3px;left:-4px;border-radius:50%;background:#cdd2d9}.dark-theme .cu2-views-bar__selected-options-icon+.cu2-views-bar__selected-options-icon:before{background:#384047}.cu2-views-bar__selected-options-icon_pointer{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;border-radius:6px}.cu2-views-bar__selected-options-icon_pointer:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__selected-options-icon_pointer:hover{background-color:#1e272e}.cu2-views-bar__selected-options-icon_shield{padding:5px}.cu2-views-bar__selected-options-icon_saved{animation:iconSaved .5s ease-out 1.5s forwards;fill:#67cb48}.dark-theme .cu2-views-bar__selected-options-icon_saved{fill:#67cb48}.cu2-views-bar__selected-options-icon_unsaved,.dark-theme .cu2-views-bar__selected-options-icon_unsaved{fill:#d64c4c}.cu2-views-bar__selected-options-icon_autosave:not(.cu2-views-bar__selected-options-icon_spinner){animation:iconAutoSave .5s ease-out forwards}.cu2-views-bar__selected-options-icon_spinner,.dark-theme .cu2-views-bar__selected-options-icon_spinner{fill:#67cb48}.cu2-views-bar__selected-options-icon_spinner>svg{animation:spinner 1.5s linear infinite}.cu-task-list-header-settings__add-new-type{display:flex;flex-direction:column;min-width:500px;max-height:480px;overflow:auto;padding:15px 20px}.cu-task-list-header-settings__add-new-type-shorter{max-height:370px;min-height:200px}.cu-task-list-header-settings__add-new-type-shorter form.cu-custom-fields__form-row-value{min-height:285px}.cu-task-list-header-settings__add-new-type-header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;flex-shrink:0;text-transform:uppercase;font:500 11px Gotham Pro,Proxima Nova,arial,serif;color:rgba(34,34,34,.3);margin-bottom:17px}.contrast_high .cu-task-list-header-settings__add-new-type-header{color:#858585}.dark-theme .cu-task-list-header-settings__add-new-type-header{color:#828588}.cu-task-list-header-settings__add-new-type-body{flex:0 1 auto;position:relative}'],encapsulation:2,data:{animation:[oo.e,Object(_o.m)("protected",[Object(_o.l)(":enter",[Object(_o.k)({opacity:0}),Object(_o.e)("100ms 200ms",Object(_o.k)({opacity:1}))]),Object(_o.l)(":leave",[Object(_o.k)({opacity:1}),Object(_o.e)("100ms",Object(_o.k)({opacity:0}))])])]}}),t})();var fg=i("lGbC"),gg=i("yECk");let mg=(()=>{class t{transform(t){return t===$.e.Subcategory?"List":t===$.e.Category?"Folder":t===$.e.Project?"Space":""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Vb({name:"parentTypeToString",type:t,pure:!0}),t})();function vg(t,e){if(1&t){const t=d.dc();d.cc(0,"div",23),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(2).toggleProperty(i.id)}),d.Xb(1,"div",24),d.cc(2,"div",25),d.dd(3),d.bc(),d.Xb(4,"div",26),d.bc()}if(2&t){const t=e.$implicit;d.Ib(1),d.Dc("icon",t.icon),d.Ib(2),d.fd(" ",t.name," "),d.Ib(1),d.Ob("cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle-active",t.selected)}}function bg(t,e){if(1&t&&(d.cc(0,"div",19),d.cc(1,"div",20),d.gc(2,21),d.vc(3,"parentTypeToString"),d.bc(),d.bd(4,vg,5,4,"div",22),d.bc()),2&t){const t=d.uc();d.ad("width",200,"px"),d.Ib(3),d.kc(d.wc(3,5,t.type)),d.hc(2),d.Ib(1),d.Dc("ngForOf",t.properties)("ngForTrackBy",t.trackById)}}let _g=(()=>{class t{constructor(t,e){this.cdr=t,this.commonStringsService=e,this.onRemovePrompt=new d.o,this.onPromptApply=new d.o,this.selectedHierarchyText=$localize`:@@cu-new-hierarchy-item-prompt__select-location:Select location...`,this.selectedPropertyText="Select properties...",this.selectedProperties=[],this.properties=[{id:"statuses",name:$localize`:@@common_statuses:Statuses`,icon:"activity-status",selected:!0},{id:"views",name:$localize`:@@common_views:Views`,icon:"cu2-views",selected:!0},{id:"automations",name:$localize`:@@common_automations:Automations`,icon:"cu2-robot",selected:!1},{id:"custom_fields",name:this.commonStringsService.customFieldsText,icon:"activity-custom-field",selected:!1}],this.trackById=Object(j.d)("id")}ngOnChanges(t){t.item&&this.getInitialHierarchyItem()}ngOnInit(){this.getSelectedPropertyText()}ngOnDestroy(){}onHierarchySelect(t){this.selectedHierarchyItem=t,"subcategory"===t.type&&(this.selectedHierarchyText=t.subcategory.name,this.from=t.subcategory,this.fromType=$.e.Subcategory),"category"===t.type&&(this.selectedHierarchyText=t.category.name,this.from=t.category,this.fromType=$.e.Category),"project"===t.type&&(this.selectedHierarchyText=t.project.name,this.from=t.project,this.fromType=$.e.Project)}applyPrompt(){const t={properties:this.selectedProperties.map(t=>t.id),item:this.item,from:this.from,type:this.type,fromType:this.fromType};this.onPromptApply.emit(t)}toggleProperty(t){const e=this.properties.findIndex(e=>e.id===t);-1!==e&&(this.properties[e].selected=!this.properties[e].selected,this.properties=[...this.properties]),this.getSelectedPropertyText()}getSelectedPropertyText(){switch(this.selectedProperties=this.properties.filter(t=>t.selected),this.selectedProperties.length){case 1:this.selectedPropertyText=""+this.selectedProperties[0].name;break;case 2:this.selectedPropertyText=`${this.selectedProperties[0].name} and ${this.selectedProperties[1].name}`;break;case 3:this.selectedPropertyText=`${this.selectedProperties[0].name}, ${this.selectedProperties[1].name} and one more`;break;case 4:this.selectedPropertyText=`${this.selectedProperties[0].name}, ${this.selectedProperties[1].name} and two more`;break;default:this.selectedPropertyText="Select properties..."}this.cdr.detectChanges()}getInitialHierarchyItem(){if(this.from&&this.fromType){switch(this.fromType){case $.e.Project:this.selectedHierarchyItem={project:this.from};break;case $.e.Category:this.selectedHierarchyItem={project:{id:this.from.project_id},category:{id:this.from.id}};break;case $.e.Subcategory:this.selectedHierarchyItem={project:{id:this.from.project_id},category:{id:this.from.category_details},subcategory:this.from};break;default:this.selectedHierarchyItem=null}this.selectedHierarchyText=this.from?this.from.name:$localize`:@@cu-new-hierarchy-item-prompt__select-location:Select location...`,this.cdr.detectChanges()}}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(d.h),d.Wb(J.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-new-hierarchy-item-prompt"]],hostAttrs:[1,"cu-new-hierarchy-item-prompt"],inputs:{item:"item",type:"type",from:"from",fromType:"fromType"},outputs:{onRemovePrompt:"onRemovePrompt",onPromptApply:"onPromptApply"},features:[d.Gb],decls:27,vars:15,consts:function(){let t,e,i;return t=$localize`:@@cu-new-hierarchy-item-prompt__start-from-scratch-inherit␟2bb4f103468448a29c2c0d5561d45542fba3be2c␟5212634481877662419:${"\ufffd#4\ufffd"}:START_LINK:Start from scratch${"\ufffd/#4\ufffd"}:CLOSE_LINK: or inherit `,e=$localize`:@@common_apply␟ca8f64edf1372f3c7efc87ad903bc72e9999c358␟650235993006542792: Apply `,i=$localize`:@@cu-new-hierarchy-item-prompt__type␟7ce9754fb1422f63dd072119b7c17c26cb9bcb2d␟3910959568158635116: ${"\ufffd0\ufffd"}:INTERPOLATION: PROPERTIES `,[[1,"cu-new-hierarchy-item-prompt-left"],[1,"cu-new-hierarchy-item-prompt-text"],t,[3,"click"],["cuDropdown","",3,"dropdownCloseOnInsideClick"],["cuDropdownToggle",""],[1,"cu-new-hierarchy-item-prompt-dropdown","cu-new-hierarchy-item-prompt-dropdown-first"],[1,"cu-new-hierarchy-item-prompt-dropdown-text"],["icon","cu2-angle-down-2"],["class","cu-new-hierarchy-item-prompt-dropdown-menu cu-dropdown__menu_overflow-hidden",3,"width",4,"cuDropdownMenu"],[1,"task-container__header-add-list__category-list",3,"selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","individualSelection","onSelect"],[1,"cu-new-hierarchy-item-prompt-dropdown","cu-new-hierarchy-item-prompt-dropdown-last"],["icon","cu2-angle-down-2",1,"cu-new-hierarchy-item-prompt-dropdown-arrow"],[1,"cu-new-hierarchy-item-prompt-right"],[1,"cu-new-hierarchy-item-prompt-button",3,"click"],e,[1,"cu-new-hierarchy-item-prompt-exit"],[1,"cu-new-hierarchy-item-prompt-exit-icon-container",3,"click"],["icon","cu2-close"],[1,"cu-new-hierarchy-item-prompt-dropdown-menu","cu-dropdown__menu_overflow-hidden"],[1,"cu-new-hierarchy-item-prompt-dropdown-menu-header"],i,["class","cu-new-hierarchy-item-prompt-dropdown-menu-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-new-hierarchy-item-prompt-dropdown-menu-item",3,"click"],[3,"icon"],[1,"cu-new-hierarchy-item-prompt-dropdown-menu-item-text"],[1,"cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle"]]},template:function(t,e){1&t&&(d.cc(0,"div",0),d.cc(1,"div",1),d.ac(2),d.mc(3,2),d.cc(4,"a",3),d.qc("click",function(){return e.onRemovePrompt.emit({id:e.item.id})}),d.bc(),d.jc(),d.Zb(),d.dd(5,": "),d.bc(),d.cc(6,"div",4),d.cc(7,"div",5),d.cc(8,"div",6),d.cc(9,"div",7),d.dd(10),d.bc(),d.Xb(11,"div",8),d.bc(),d.bc(),d.bd(12,bg,5,7,"div",9),d.bc(),d.cc(13,"div",1),d.cc(14,"span"),d.dd(15,"from"),d.bc(),d.bc(),d.cc(16,"cu-category-list-dropdown",10),d.qc("onSelect",function(t){return e.onHierarchySelect(t)}),d.cc(17,"div",11),d.cc(18,"div",7),d.dd(19),d.bc(),d.Xb(20,"div",12),d.bc(),d.bc(),d.bc(),d.cc(21,"div",13),d.cc(22,"div",14),d.qc("click",function(){return e.applyPrompt()}),d.gc(23,15),d.bc(),d.cc(24,"div",16),d.cc(25,"div",17),d.qc("click",function(){return e.onRemovePrompt.emit({id:e.item.id})}),d.Xb(26,"div",18),d.bc(),d.bc(),d.bc()),2&t&&(d.Ib(6),d.Dc("dropdownCloseOnInsideClick",!1),d.Ib(3),d.Ob("cu-new-hierarchy-item-prompt-text-fade","Select properties..."===e.selectedPropertyText),d.Ib(1),d.fd(" ",e.selectedPropertyText," "),d.Ib(6),d.Dc("selectableProject",!0)("defaultProject",null==e.selectedHierarchyItem?null:e.selectedHierarchyItem.project)("selectedCategory",null==e.selectedHierarchyItem||null==e.selectedHierarchyItem.category?null:e.selectedHierarchyItem.category.id)("selectedSubcategory",null==e.selectedHierarchyItem||null==e.selectedHierarchyItem.subcategory?null:e.selectedHierarchyItem.subcategory.id)("singleCategory",!1)("individualSelection",!0),d.Ib(2),d.Ob("cu-new-hierarchy-item-prompt-text-fade",!e.from),d.Ib(1),d.fd(" ",e.selectedHierarchyText," "),d.Ib(3),d.Ob("cu-new-hierarchy-item-prompt-button-disabled",!e.selectedProperties.length||!e.from))},directives:[tt.b,et.a,nt.a,it.a,gg.a,n.p],pipes:[mg],styles:['.cu-new-hierarchy-item-prompt{width:calc(100% - 60px);height:56px;position:relative;padding:0 16px 0 22px;display:flex;align-items:center;z-index:1;border-radius:6px;margin:10px 25px 10px 35px;border:1px solid var(--theme-main-color-light);justify-content:space-between}.dark-theme .cu-new-hierarchy-item-prompt{border-color:#2b343b;opacity:1}.cu-new-hierarchy-item-prompt:before{background-color:#7b68ee;content:"";width:100%;height:100%;opacity:.1;left:0;top:0;position:absolute;border-radius:4px;z-index:-1}@supports (--theme-main-color:#7b68ee){.cu-new-hierarchy-item-prompt:before{background-color:var(--theme-main-color)}}.dark-theme .cu-new-hierarchy-item-prompt:before{background-color:#384047;opacity:1}.cu-new-hierarchy-item-prompt-left,.cu-new-hierarchy-item-prompt-right{display:flex;align-items:center}.cu-new-hierarchy-item-prompt-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-new-hierarchy-item-prompt-text{font-family:var(--global-font-support)}}.dark-theme .cu-new-hierarchy-item-prompt-text{color:#d5d6d7}.cu-new-hierarchy-item-prompt-text a{border-bottom:1px dashed #292d34;cursor:pointer}.dark-theme .cu-new-hierarchy-item-prompt-text a{border-color:#d5d6d7}.cu-new-hierarchy-item-prompt-text a:hover{color:var(--theme-main-color);border-color:var(--theme-main-color)}.cu-new-hierarchy-item-prompt-text span{opacity:.8}.cu-new-hierarchy-item-prompt-text-fade{opacity:.4}.cu-new-hierarchy-item-prompt-dropdown{display:flex;align-items:center;padding:0 12px;height:32px;background-color:#fff;border:1px solid rgba(185,190,199,.5);border-radius:4px;margin:0 12px}.dark-theme .cu-new-hierarchy-item-prompt-dropdown{background-color:#1e272e;border:none}.cu-new-hierarchy-item-prompt-dropdown-menu{margin-left:67px!important;margin-top:0!important;padding:16px 0 8px}.cu-new-hierarchy-item-prompt-dropdown-menu-header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1;text-transform:uppercase;color:#b9bec7;margin-bottom:10px;padding:0 12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-new-hierarchy-item-prompt-dropdown-menu-header{font-family:var(--global-font-support)}}.dark-theme .cu-new-hierarchy-item-prompt-dropdown-menu-header{color:#d5d6d7}.cu-new-hierarchy-item-prompt-dropdown-menu-item{height:32px;display:flex;align-items:center;cursor:pointer;padding:0 12px}.cu-new-hierarchy-item-prompt-dropdown-menu-item:hover{background-color:#fafbfc}.dark-theme .cu-new-hierarchy-item-prompt-dropdown-menu-item:hover{background:#2b343b}.cu-new-hierarchy-item-prompt-dropdown-menu-item-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;margin-right:auto;padding-right:5px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-new-hierarchy-item-prompt-dropdown-menu-item-text{font-family:var(--global-font-support)}}.dark-theme .cu-new-hierarchy-item-prompt-dropdown-menu-item-text{color:#d5d6d7}.cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle{width:13px;height:13px;border:1px solid #b9bec7;border-radius:3px;position:relative}.dark-theme .cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle{border-color:#d5d6d7}.cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle:before{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;content:"";position:absolute;border-radius:2px;opacity:0;width:7px;height:7px;top:1px;left:-1px;right:0;bottom:0;margin:auto;background-color:var(--theme-main-color)}.cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle:before:hover{transition:none}.cu-new-hierarchy-item-prompt-dropdown-menu-item-toggle-active:before{opacity:1}.cu-new-hierarchy-item-prompt-dropdown-menu .icon{width:13px;height:13px;fill:#7c828d;margin-right:13px}.cu-new-hierarchy-item-prompt-dropdown-first{width:275px}.cu-new-hierarchy-item-prompt-dropdown-last{width:208px}.cu-new-hierarchy-item-prompt-dropdown-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;padding-right:5px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-new-hierarchy-item-prompt-dropdown-text{font-family:var(--global-font-support)}}.dark-theme .cu-new-hierarchy-item-prompt-dropdown-text{color:#d5d6d7}.cu-new-hierarchy-item-prompt-dropdown .icon{width:16px;height:16px;margin-left:auto;fill:#292d34;padding:3px}.dark-theme .cu-new-hierarchy-item-prompt-dropdown .icon{fill:#d5d6d7}.cu-new-hierarchy-item-prompt-button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;width:72px;height:32px;border-radius:4px;cursor:pointer;background-color:var(--theme-main-color);color:#fff;margin-right:16px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-new-hierarchy-item-prompt-button{font-family:var(--global-font-support)}}.cu-new-hierarchy-item-prompt-button:hover{background-color:var(--theme-main-color-dark)}.cu-new-hierarchy-item-prompt-button-disabled{opacity:.2;pointer-events:none}.cu-new-hierarchy-item-prompt-exit{height:32px;border-left:1px solid var(--theme-main-color-light)}.dark-theme .cu-new-hierarchy-item-prompt-exit{border-left:#2b343b}.cu-new-hierarchy-item-prompt-exit-icon-container{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:32px;height:32px;border-radius:6px;border:1px solid transparent;background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-left:8px}.cu-new-hierarchy-item-prompt-exit-icon-container:hover{background:rgba(123,104,238,.05);border:1px solid rgba(123,104,238,.1)}.cu-new-hierarchy-item-prompt-exit-icon-container .icon{height:10px;width:10px;fill:var(--theme-main-color)}'],encapsulation:2,changeDetection:0}),t})();var wg=i("G2WA");let yg=(()=>{class t{constructor(t,e,i){this.viewContainer=t,this.templateRef=e,this.sharedTaskService=i,this.destroy$=new B.a}ngOnInit(){this.sharedTaskService.isOpen||this.displayView(),this.sharedTaskService.onOpen.pipe(Object(A.a)(this.destroy$)).subscribe(()=>{this.hideView()}),this.sharedTaskService.onClose.pipe(Object(A.a)(this.destroy$)).subscribe(()=>{this.displayView()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.view&&(this.view.destroy(),this.view=null)}displayView(){this.view||(this.view=this.templateRef.createEmbeddedView(null)),this.viewContainer.insert(this.view),this.view.markForCheck();const t=this.getScrollContainer();this.scrollTo&&t&&(t.scrollTop=this.scrollTo)}hideView(){const t=this.getScrollContainer();this.scrollTo=t?t.scrollTop:0,this.viewContainer.detach()}getScrollContainer(){return document.querySelector(".cu-if-not-task-view-scroll")}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(d.U),d.Wb(d.Q),d.Wb(wg.a))},t.\u0275dir=d.Rb({type:t,selectors:[["","cuIfNotTaskView",""]]}),t})();var kg=i("AQW5"),xg=i("7XkT"),Sg=i("2OkI"),Tg=i("HqON");function Cg(t,e){if(1&t&&(d.cc(0,"div",7),d.dd(1),d.bc()),2&t){const t=d.uc();d.Dc("@loading",void 0),d.Ib(1),d.fd(" ",null==t.user?null:t.user.taskCount," ")}}function Dg(t,e){if(1&t){const t=d.dc();d.cc(0,"div",8),d.qc("click",function(e){return d.Uc(t),d.uc().openProfile(e)}),d.gc(1,9),d.bc()}}let Ig=(()=>{class t{constructor(t){this.commonStringsService=t,this.displayProfile=!0,this.onSelect=new d.o,this.onOpenProfile=new d.o}ngOnInit(){}click(){this.onSelect.emit(!this.selected)}openProfile(t){t.preventDefault(),t.stopPropagation(),this.onOpenProfile.emit()}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(J.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-team-user-item"]],hostAttrs:[1,"cu-team-user-item"],hostVars:6,hostBindings:function(t,e){1&t&&d.qc("click",function(){return e.click()}),2&t&&d.Ob("cu-team-user-item_selected-collapsed",e.selected&&e.collapsed)("cu-team-user-item_selected",e.selected&&!e.collapsed)("cu-team-user-item_collapsed",e.collapsed)},inputs:{user:"user",selected:"selected",collapsed:"collapsed",displayProfile:"displayProfile"},outputs:{onSelect:"onSelect",onOpenProfile:"onOpenProfile"},decls:11,vars:13,consts:function(){let t;return t=$localize`:@@common_profile␟b57c09ece5152329a067b7c7614901490e99383c␟4414197878794367625: Profile
`,[["tooltipModifier","tooltip_left","tooltipDelay","300",1,"cu-team-user-item__avatar-container",3,"cuTooltip"],[1,"cu-team-user-item__avatar",3,"user","modifier"],["class","cu-team-user-item__avatar-count",4,"ngIf"],[1,"cu-team-user-item__name"],["class","cu-team-user-item__profile",3,"click",4,"ngIf"],[1,"cu-team-user-item__count"],["icon","cu2-times",1,"cu-team-user-item__close"],[1,"cu-team-user-item__avatar-count"],[1,"cu-team-user-item__profile",3,"click"],t]},template:function(t,e){1&t&&(d.cc(0,"div",0),d.vc(1,"username"),d.Xb(2,"cu-avatar",1),d.bd(3,Cg,2,2,"div",2),d.bc(),d.cc(4,"div",3),d.dd(5),d.vc(6,"username"),d.bc(),d.bd(7,Dg,2,0,"div",4),d.cc(8,"div",5),d.dd(9),d.bc(),d.Xb(10,"div",6)),2&t&&(d.Dc("cuTooltip",e.collapsed?d.xc(1,7,e.user,e.commonStringsService.meText):null),d.Ib(2),d.Dc("user",e.user)("modifier","cu-avatar_34"),d.Ib(1),d.Dc("ngIf",e.collapsed&&(null==e.user?null:e.user.taskCount)),d.Ib(2),d.fd(" ",d.xc(6,10,e.user,e.commonStringsService.meText),"\n"),d.Ib(2),d.Dc("ngIf",e.displayProfile),d.Ib(2),d.ed(null==e.user?null:e.user.taskCount))},directives:[ot.a,is.a,n.q,nt.a],pipes:[Oc.a],styles:[".cu-team-user-item{transition:background .1s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;cursor:pointer;align-items:center;margin-top:10px;border-radius:20px 3px 3px 20px;flex-shrink:0}.cu-team-user-item:hover{background-color:#f2f2f2}.dark-theme .cu-team-user-item:hover{background-color:#1e272e}.cu-team-user-item:hover .cu-team-user-item__count,.cu-team-user-item:hover .cu-team-user-item__name{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-user-item:hover .cu-team-user-item__count,.cu-team-user-item:hover .cu-team-user-item__name{color:var(--theme-main-color)}}.cu-team-user-item_collapsed .cu-team-user-item__avatar{padding:1px}.cu-team-user-item_collapsed:hover,.dark-theme .cu-team-user-item_collapsed:hover{background-color:inherit}.cu-team-user-item_collapsed .cu-team-user-item__close,.cu-team-user-item_collapsed .cu-team-user-item__count,.cu-team-user-item_collapsed .cu-team-user-item__name,.cu-team-user-item_collapsed .cu-team-user-item__profile{display:none}.cu-team-user-item_selected-collapsed .cu-team-user-item__avatar{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-user-item_selected-collapsed .cu-team-user-item__avatar{border-color:var(--theme-main-color)}}.dark-theme .cu-team-user-item_selected-collapsed .cu-team-user-item__avatar{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-team-user-item_selected-collapsed .cu-team-user-item__avatar{border-color:var(--theme-main-color)}}.cu-team-user-item_selected{background:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.cu-team-user-item_selected{background:var(--theme-main-color)}}.cu-team-user-item_selected:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-user-item_selected:hover{background:var(--theme-main-color)}}.dark-theme .cu-team-user-item_selected:hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-team-user-item_selected:hover{background:var(--theme-main-color)}}.cu-team-user-item_selected .cu-team-user-item__count,.cu-team-user-item_selected .cu-team-user-item__name,.cu-team-user-item_selected:hover .cu-team-user-item__count,.cu-team-user-item_selected:hover .cu-team-user-item__name,.dark-theme .cu-team-user-item_selected .cu-team-user-item__count,.dark-theme .cu-team-user-item_selected .cu-team-user-item__name{color:#fff}.cu-team-user-item_selected .cu-team-user-item__close{opacity:1}.cu-team-user-item_selected .cu-team-user-item__profile{color:#fff;border-bottom-color:#fff}.cu-team-user-item__name{transition:color .1s cubic-bezier(.785,.135,.15,.86) 0s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;padding-left:10px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-team-user-item__name{color:#abaeb0}.cu-team-user-item__count{transition:color .1s cubic-bezier(.785,.135,.15,.86) 0s;width:50px;padding-left:10px;text-align:right;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#585c63}.dark-theme .cu-team-user-item__count{color:#abaeb0}.cu-team-user-item__avatar{border:2px solid #fff;border-radius:50%;margin:-2px 0}.dark-theme .cu-team-user-item__avatar{border-color:#384047}.cu-team-user-item__avatar-container{display:flex;align-items:center;justify-content:center;position:relative}.cu-team-user-item__avatar-count{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;bottom:-5px;background:#fff;padding:3px 2px 2px;min-width:20px;height:15px;text-align:center;box-shadow:0 2px 5px 0 rgba(0,0,0,.1);color:#7c828d;border-radius:9px;font:600 10px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-team-user-item__avatar-count{background:#1e272e;color:#d5d6d7}.cu-team-user-item__unassign-icon{width:34px;height:34px;border:2px solid #fff;border-radius:50%;margin:-2px 0}.dark-theme .cu-team-user-item__unassign-icon{border-color:#384047}.cu-team-user-item__close{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;margin:0 8px 0 13px;fill:#fff;opacity:0}.cu-team-user-item__profile{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;display:none;margin:0 0 2px 7px;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;border-bottom:1px dashed}@supports (--theme-main-color:#7b68ee){.cu-team-user-item__profile{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-team-user-item:hover:not(.cu-team-user-item_collapsed) .cu-team-user-item__profile{display:block}"],encapsulation:2,data:{animation:[oo.e]},changeDetection:0}),t})();var Pg=i("WkAz");const Mg=["searchInput"],Og=["usersScrollbar"],$g=["groupsScrollbar"],jg=function(t,e){return["/",t,"settings","team",e,"users"]};function Lg(t,e){if(1&t&&(d.cc(0,"div",24),d.gc(1,25),d.bc()),2&t){const t=d.uc(3);d.Dc("routerLink",d.Ic(1,jg,(null==t.team?null:t.team.id)||"",null==t.team?null:t.team.id))}}function Eg(t,e){if(1&t&&(d.cc(0,"div",20),d.cc(1,"div",21),d.gc(2,22),d.bc(),d.bd(3,Lg,2,4,"div",23),d.bc()),2&t){const t=d.uc(2);d.Ib(3),d.Dc("ngIf",(null==t.team?null:t.team.role)<3)}}function Ng(t,e){if(1&t&&(d.cc(0,"div",26),d.dd(1),d.bc()),2&t){const t=d.uc(2);d.Ib(1),d.fd(" ",t.lockedText," ")}}function Ag(t,e){if(1&t&&(d.cc(0,"div",35),d.dd(1),d.bc()),2&t){const t=d.uc(3);d.Ib(1),d.fd(" ",t.unassignedCount," ")}}const Vg=function(t,e){return{"cu-team-users-block__list-item_selected":t,"cu-team-users-block__list-item_collapsed":e}};function zg(t,e){if(1&t){const t=d.dc();d.cc(0,"div",27),d.qc("click",function(){d.Uc(t);const e=d.uc(2);return e.onShowUnassignedChange.emit(!e.showUnassigned)}),d.cc(1,"div",28),d.Xb(2,"div",29),d.bd(3,Ag,2,1,"div",30),d.bc(),d.cc(4,"div",31),d.gc(5,32),d.bc(),d.cc(6,"div",33),d.dd(7),d.bc(),d.Xb(8,"div",34),d.bc()}if(2&t){const t=d.uc(2);d.Dc("cuTooltip",t.isLocked?t.lockedText:null)("ngClass",d.Ic(4,Vg,t.showUnassigned,t.collapsed)),d.Ib(3),d.Dc("ngIf",t.collapsed&&t.unassignedCount),d.Ib(4),d.fd(" ",t.unassignedCount," ")}}function Fg(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-team-user-item",38),d.qc("onOpenProfile",function(){d.Uc(t);const e=d.uc().$implicit;return d.uc(2).onOpenProfile.emit(e.user)})("onSelect",function(e){d.Uc(t);const i=d.uc().$implicit;return d.uc(2).onSelectUser.emit({id:i.user.id,selected:e})}),d.bc()}if(2&t){const t=d.uc().$implicit,e=d.uc(2);d.Dc("user",t.user)("selected",e.selectedMap[null==t.user?null:t.user.id])("collapsed",e.collapsed)("displayProfile",e.displayProfile)("cuTooltip",e.isLocked?e.lockedText:null)}}function Bg(t,e){if(1&t&&(d.cc(0,"div",46),d.dd(1),d.bc()),2&t){const t=d.uc(2).$implicit;d.Dc("@loading",void 0),d.Ib(1),d.fd(" ",null==t.group?null:t.group.taskCount," ")}}function Rg(t,e){if(1&t){const t=d.dc();d.cc(0,"div",39),d.qc("click",function(){d.Uc(t);const e=d.uc().$implicit,i=d.uc(2);return i.onSelectUserGroup.emit({id:e.group.id,selected:!i.selectedMap[null==e.group?null:e.group.id]})}),d.cc(1,"div",40),d.Xb(2,"cu-user-group-avatar",41),d.bd(3,Bg,2,2,"div",42),d.bc(),d.cc(4,"div",43),d.dd(5),d.bc(),d.cc(6,"div",44),d.dd(7),d.bc(),d.Xb(8,"div",45),d.bc()}if(2&t){const t=d.uc().$implicit,e=d.uc(2);d.Ob("cu-team-user-item_selected-collapsed",e.selectedMap[null==t.group?null:t.group.id]&&e.collapsed)("cu-team-user-item_selected",e.selectedMap[null==t.group?null:t.group.id]&&!e.collapsed)("cu-team-user-item_collapsed",e.collapsed),d.Ib(1),d.Dc("cuTooltip",e.collapsed?t.group.name:null),d.Ib(1),d.Dc("group",t.group)("avatarSize",34)("bordered",!1),d.Ib(1),d.Dc("ngIf",e.collapsed&&(null==t.group?null:t.group.taskCount)),d.Ib(2),d.ed(t.group.name),d.Ib(2),d.fd(" ",null==t.group?null:t.group.taskCount," ")}}function Ug(t,e){if(1&t&&(d.ac(0),d.bd(1,Fg,1,5,"cu-team-user-item",36),d.bd(2,Rg,9,13,"div",37),d.Zb()),2&t){const t=e.$implicit;d.Ib(1),d.Dc("ngIf","user"===t.type),d.Ib(1),d.Dc("ngIf","group"===t.type)}}function Gg(t,e){1&t&&(d.ac(0),d.gc(1,50),d.Zb())}function Hg(t,e){1&t&&(d.ac(0),d.gc(1,51),d.Zb())}function Wg(t,e){if(1&t){const t=d.dc();d.cc(0,"div",47),d.qc("click",function(){d.Uc(t);const e=d.uc(2);return e.onShowAllUsersChange.emit(!e.showAllUsers)}),d.bd(1,Gg,2,0,"ng-container",48),d.bd(2,Hg,2,0,"ng-template",null,49,d.cd),d.bc()}if(2&t){const t=d.Rc(3),e=d.uc(2);d.Ib(1),d.Dc("ngIf",e.showAllUsers)("ngIfElse",t)}}function qg(t,e){if(1&t&&(d.ac(0),d.gc(1,54),d.Zb()),2&t){const t=d.uc(3);d.Ib(1),d.kc(t.moreCount),d.hc(1)}}function Xg(t,e){if(1&t&&(d.ac(0),d.mc(1,55),d.Xb(2,"br"),d.jc(),d.Zb()),2&t){const t=d.uc(4);d.Ib(2),d.kc(t.moreCount),d.hc(1)}}function Yg(t,e){if(1&t&&d.bd(0,Xg,3,1,"ng-container",1),2&t){const t=d.uc(3);d.Dc("ngIf",t.moreCount)}}function Kg(t,e){if(1&t){const t=d.dc();d.cc(0,"div",52),d.qc("click",function(){d.Uc(t);const e=d.uc(2);return e.onShowAllUsersChange.emit(!e.showAllUsers)}),d.bd(1,qg,2,1,"ng-container",48),d.bd(2,Yg,1,1,"ng-template",null,53,d.cd),d.bc()}if(2&t){const t=d.Rc(3),e=d.uc(2);d.Ib(1),d.Dc("ngIf",e.showAllUsers)("ngIfElse",t)}}function Zg(t,e){1&t&&(d.ac(0),d.gc(1,56),d.Zb())}const Jg=function(){return{suppressScrollX:!0}},Qg=function(t){return{"cu-team-users-block__footer_task-tray":t}};function tm(t,e){if(1&t){const t=d.dc();d.cc(0,"div",4),d.bd(1,Eg,4,1,"div",5),d.bd(2,Ng,2,1,"div",6),d.cc(3,"cu-search-list",7,8),d.qc("onUpdate",function(){return d.Uc(t),d.Rc(6).update()}),d.cc(5,"div",9,10),d.bd(7,zg,9,7,"div",11),d.bd(8,Ug,3,2,"ng-container",12),d.cc(9,"div",13),d.cc(10,"div",14),d.bd(11,Wg,4,2,"div",15),d.bd(12,Kg,4,2,"ng-template",null,16,d.cd),d.bc(),d.bc(),d.bc(),d.bc(),d.cc(14,"div",17),d.vc(15,"async"),d.cc(16,"div",18),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.isLocked?null:e.onAssignedCommentsChange.emit(!e.assignedComments)}),d.Xb(17,"div",19),d.bd(18,Zg,2,0,"ng-container",1),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.Rc(4),e=d.Rc(13),i=d.uc();let n=null;d.Ob("cu-team-users-block__container_collapsed",i.collapsed),d.Ib(1),d.Dc("ngIf",!i.collapsed),d.Ib(1),d.Dc("ngIf",i.isLocked),d.Ib(1),d.Dc("filterfn",i.filterUserFn)("specialCaseData",i.currentUser)("items",i.usersAndGroups)("modifierSearchInput",i.collapsed?"cu-team-users-block__list-search":"cu-team-users-block__list-search not-collapsed"),d.Ib(2),d.Ob("cu-team-users-block__scrollable_collapsed",i.collapsed),d.Dc("perfectScrollbar",d.Gc(25,Jg)),d.Ib(2),d.Dc("ngIf",i.unassignedCount),d.Ib(1),d.Dc("ngForOf",t.filteredItems)("ngForTrackBy",i.trackById),d.Ib(3),d.Dc("ngIf",!i.collapsed)("ngIfElse",e),d.Ib(3),d.Dc("ngClass",d.Hc(26,Qg,null==(n=d.wc(15,23,i.trayTasks$))||null==n.fullTeamTray?null:n.fullTeamTray.length)),d.Ib(2),d.Ob("cu-team-users-block__footer-assigned_on",i.assignedComments),d.Ib(1),d.Ob("cu-team-users-block__footer-assigned-icon_collapsed",i.collapsed),d.Dc("cuTooltip",i.isLocked?i.lockedText:i.collapsed?i.showTasksWithAcsText:null),d.Ib(1),d.Dc("ngIf",!i.collapsed)}}function em(t,e){1&t&&d.Xb(0,"cu-loader")}function im(t,e){if(1&t&&(d.cc(0,"div",83),d.dd(1),d.bc()),2&t){const t=d.uc(2);d.Ib(1),d.fd(" ",t.lockedText," ")}}function nm(t,e){if(1&t){const t=d.dc();d.cc(0,"div",84),d.qc("click",function(){return d.Uc(t),d.uc(2).resetSearch()}),d.bc()}2&t&&d.Dc("cuTooltip","clearSearch")}function om(t,e){1&t&&(d.ac(0),d.gc(1,85),d.Zb())}function am(t,e){if(1&t){const t=d.dc();d.cc(0,"div",90),d.qc("click",function(){d.Uc(t);const e=d.uc(3);return e.isLocked?null:e.onShowUnassignedChange.emit(!e.showUnassigned)}),d.cc(1,"div",91),d.Xb(2,"div",92),d.bc(),d.cc(3,"div",93),d.cc(4,"div",94),d.gc(5,95),d.bc(),d.cc(6,"div",96),d.mc(7,97),d.Xb(8,"span"),d.jc(),d.bc(),d.bc(),d.cc(9,"div",98),d.Xb(10,"div",99),d.bc(),d.bc()}if(2&t){const t=d.uc(3);d.Ob("cu-team-users-block__simple-body-item-active",t.showUnassigned),d.Dc("cuTooltip",t.isLocked?t.lockedText:null),d.Ib(8),d.kc(t.unassignedCount),d.hc(7)}}function rm(t,e){if(1&t){const t=d.dc();d.cc(0,"div",90),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).selectItem(i)}),d.cc(1,"cu-avatar",100),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).openProfile(i)}),d.bc(),d.cc(2,"div",93),d.cc(3,"div",101),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).openProfile(i)}),d.dd(4),d.bc(),d.cc(5,"div",96),d.mc(6,102),d.Xb(7,"span"),d.jc(),d.bc(),d.bc(),d.cc(8,"div",98),d.Xb(9,"div",99),d.bc(),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(3);d.Ob("cu-team-users-block__simple-body-item-active",i.selectedMap[null==t?null:t.id]),d.Dc("cuTooltip",i.isLocked?i.lockedText:null),d.Ib(1),d.Dc("user",t)("modifier","cu-avatar_28"),d.Ib(3),d.fd(" ",null==t?null:t.username," "),d.Ib(3),d.kc(null==t?null:t.taskCount),d.hc(6)}}function sm(t,e){if(1&t&&(d.cc(0,"div",86,87),d.bd(2,am,11,4,"div",88),d.bd(3,rm,10,7,"div",89),d.bc()),2&t){const t=d.uc(2);d.Dc("perfectScrollbar",d.Gc(4,Jg)),d.Ib(2),d.Dc("ngIf",t.unassignedCount&&!t.searching),d.Ib(1),d.Dc("ngForOf",t.searching?t.filteredUsers:t.users)("ngForTrackBy",t.trackById)}}function cm(t,e){1&t&&(d.ac(0),d.gc(1,103),d.Zb())}function lm(t,e){if(1&t){const t=d.dc();d.cc(0,"div",90),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).selectItem(i)}),d.Xb(1,"cu-user-group-avatar",105),d.cc(2,"div",93),d.cc(3,"div",106),d.dd(4),d.bc(),d.cc(5,"div",96),d.mc(6,107),d.Xb(7,"span"),d.Xb(8,"span"),d.jc(),d.bc(),d.bc(),d.cc(9,"div",98),d.Xb(10,"div",99),d.bc(),d.bc()}if(2&t){const t=e.$implicit,i=d.uc(3);d.Ob("cu-team-users-block__simple-body-item-active",i.selectedMap[null==t?null:t.id]),d.Dc("cuTooltip",i.isLocked?i.lockedText:null),d.Ib(1),d.Dc("group",t)("avatarSize",28)("bordered",!1),d.Ib(3),d.fd(" ",null==t?null:t.name," "),d.Ib(4),d.kc(null==t?null:t.taskCount)(null==t||null==t.members?null:t.members.length),d.hc(6)}}function um(t,e){if(1&t&&(d.cc(0,"div",86,104),d.bd(2,lm,11,9,"div",89),d.bc()),2&t){const t=d.uc(2);d.Dc("perfectScrollbar",d.Gc(3,Jg)),d.Ib(2),d.Dc("ngForOf",t.searching?t.filteredGroups:t.groups)("ngForTrackBy",t.trackById)}}function dm(t,e){if(1&t){const t=d.dc();d.cc(0,"div",57),d.cc(1,"div",58),d.cc(2,"div",59),d.ac(3),d.gc(4,60),d.Zb(),d.cc(5,"div",61),d.qc("click",function(){return d.Uc(t),d.uc().onClose.emit()}),d.bc(),d.bc(),d.bd(6,im,2,1,"div",62),d.cc(7,"div",63),d.Xb(8,"div",64),d.cc(9,"input",65,66),d.qc("ngModelChange",function(e){return d.Uc(t),d.uc().searchString=e})("ngModelChange",function(e){return d.Uc(t),d.uc().debounceSearch$.next(e)}),d.bc(),d.bd(11,nm,1,1,"div",67),d.bc(),d.bc(),d.cc(12,"div",68),d.cc(13,"div",69),d.cc(14,"div",70),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.usersExpanded=!e.usersExpanded}),d.cc(15,"div",71),d.gc(16,72),d.bc(),d.cc(17,"span",73),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.chooseAll("users"),e.scrollToTop()}),d.bd(18,om,2,0,"ng-container",48),d.bc(),d.bc(),d.bd(19,sm,4,5,"div",74),d.bc(),d.cc(20,"div",75),d.cc(21,"div",70),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.groupsExpanded=!e.groupsExpanded}),d.cc(22,"div",71),d.gc(23,76),d.bc(),d.cc(24,"span",73),d.qc("click",function(){d.Uc(t);const e=d.uc();return e.chooseAll("groups"),e.scrollToTop()}),d.bd(25,cm,2,0,"ng-container",48),d.bc(),d.bc(),d.bd(26,um,3,4,"div",74),d.bc(),d.bc(),d.cc(27,"div",77),d.cc(28,"div",78),d.Xb(29,"div",79),d.cc(30,"div",80),d.gc(31,81),d.bc(),d.cc(32,"cu-toggle-switch",82),d.qc("onChange",function(){d.Uc(t);const e=d.uc();return e.onAssignedCommentsChange.emit(!e.assignedComments)}),d.bc(),d.bc(),d.bc(),d.bc()}if(2&t){const t=d.uc(),e=d.Rc(4);d.Ib(6),d.Dc("ngIf",t.isLocked),d.Ib(3),d.Dc("ngModel",t.searchString)("disabled",t.isLocked),d.Ib(2),d.Dc("ngIf",t.searching),d.Ib(1),d.Ob("cu-team-users-block__simple-body-half",t.groupsExpanded&&t.usersExpanded),d.Ib(1),d.Ob("cu-team-users-block__simple-body-users-collapsed",!t.usersExpanded),d.Ib(1),d.Ob("cu-team-users-block__simple-body-section-title-collapsed",!t.usersExpanded),d.Ib(1),d.Dc("cuTooltip",t.usersExpanded?t.collapseText:t.expandText),d.Ib(3),d.Dc("ngIf",t.selectedAllUsers)("ngIfElse",e),d.Ib(1),d.Dc("ngIf",t.usersExpanded),d.Ib(1),d.Ob("cu-team-users-block__simple-body-groups-collapsed",!t.groupsExpanded),d.Ib(1),d.Ob("cu-team-users-block__simple-body-section-title-collapsed",!t.groupsExpanded),d.Ib(1),d.Dc("cuTooltip",t.groupsExpanded?t.collapseText:t.expandText),d.Ib(3),d.Dc("ngIf",t.selectedAllGroups)("ngIfElse",e),d.Ib(1),d.Dc("ngIf",t.groupsExpanded),d.Ib(2),d.Ob("cu-team-users-block__simple-footer-bot-active",t.assignedComments),d.Ib(4),d.Dc("cuTooltip",t.isLocked?t.lockedText:t.showTasksWithAcsText)("checked",t.assignedComments)("disabled",t.isLocked)}}function hm(t,e){1&t&&(d.ac(0),d.dd(1,"select all"),d.Zb())}const pm=(t,e,i)=>!t||("user"===t.type?t.user.username&&t.user.username.toLocaleLowerCase().includes(e)||t.user.email&&t.user.email.toLocaleLowerCase().includes(e)||i&&e&&"me"===e.toLocaleLowerCase()&&i.id===t.user.id:t.group.name&&t.group.name.toLocaleLowerCase().includes(e));let fm=(()=>{class t{constructor(t,e,i){this.userProfileService=t,this.store=e,this.cdr=i,this.displayProfile=!0,this.allUsers=[],this.allGroups=[],this.onSelectUser=new d.o,this.onSelectUserGroup=new d.o,this.onAssignedCommentsChange=new d.o,this.onShowUnassignedChange=new d.o,this.onShowAllUsersChange=new d.o,this.onOpenProfile=new d.o,this.onClose=new d.o,this.onChooseAll=new d.o,this.lockedText=$localize`:@@cu-team-users-block__locked-msg:This view is protected. You can't change assignee when layouts are protected.`,this.collapseText=$localize`:@@common_collapse:Collapse`,this.expandText=$localize`:@@cu-team-users-block__tooltip-msg_expand:Expand`,this.showTasksWithAcsText=$localize`:@@cu-team-users-block__show-tasks-with-acs:Show tasks with assigned comments`,this.selectedMap={},this.trayTasks$=this.store.select(so.d),this.trackById=Object(j.d)("id"),this.filterUserFn=pm,this.debounceSearch$=new B.a,this.destroy$=new B.a,this.filteredUsers=[],this.filteredGroups=[],this.searching=!1,this.searchString="",this.selectedAllUsers=!1,this.selectedAllGroups=!1,this.users=[],this.groups=[],this.usersExpanded=!0,this.groupsExpanded=!1}ngOnInit(){this.debounceSearch$.pipe(Object(ri.a)(200),Object(A.a)(this.destroy$)).subscribe(t=>this.search(t))}ngOnChanges(t){t.selectedIds&&(this.selectedMap=this.selectedIds?this.selectedIds.reduce((t,e)=>(t[e]=!0,t),{}):{}),(t.allUsers||t.allGroups)&&this.distribute()}selectItem(t){this.isLocked||(t.username?this.onSelectUser.emit({id:t.id,selected:!this.selectedMap[t.id]}):this.onSelectUserGroup.emit({id:t.id,selected:!this.selectedMap[t.id]}))}search(t){if(!t)return void this.resetSearch();this.searching=!0,this.usersExpanded=!0,this.groupsExpanded=!0;const e=[],i=[];this.allUsers.forEach(i=>{var n;(null===(n=null==i?void 0:i.username)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))&&e.push(i)}),this.allGroups.forEach(e=>{var n;(null===(n=null==e?void 0:e.name)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))&&i.push(e)}),this.filteredUsers=[...e],this.filteredGroups=[...i],this.cdr.detectChanges(),this.scrollToTop()}resetSearch(){this.searchString="",this.searching=!1,this.filteredUsers=[],this.filteredGroups=[],this.cdr.detectChanges(),this.scrollToTop()}scrollToTop(){this.usersScrollbar&&this.usersScrollbar.scrollToTop(),this.groupsScrollbar&&this.groupsScrollbar.scrollToTop()}chooseAll(t){"users"===t?(this.onShowUnassignedChange.emit(!this.showUnassigned),this.selectedAllUsers=!this.selectedAllUsers,this.onChooseAll.emit({selectAllUsers:this.selectedAllUsers,userIds:this.allUsers.map(t=>t.id),groupIds:[]})):"groups"===t&&(this.selectedAllGroups=!this.selectedAllGroups,this.onChooseAll.emit({selectAllGroups:this.selectedAllGroups,userIds:[],groupIds:this.allGroups.map(t=>t.id)}))}distribute(){const t=[],e=[];this.allUsers.forEach(e=>{t.push(e)}),this.allGroups.forEach(t=>{e.push(t)}),this.users=[...t],this.groups=[...e],this.cdr.detectChanges()}openProfile(t){this.userProfileService.openProfile(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(xg.UserProfileService),d.Wb(K.Store),d.Wb(d.h))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-team-users-block"]],viewQuery:function(t,e){if(1&t&&(d.jd(Mg,1),d.jd(Og,1),d.jd($g,1)),2&t){let t;d.Qc(t=d.rc())&&(e.searchInput=t.first),d.Qc(t=d.rc())&&(e.usersScrollbar=t.first),d.Qc(t=d.rc())&&(e.groupsScrollbar=t.first)}},hostAttrs:[1,"cu-team-users-block"],inputs:{team:"team",usersAndGroups:"usersAndGroups",moreCount:"moreCount",selectedIds:"selectedIds",assignedComments:"assignedComments",showUnassigned:"showUnassigned",showAllUsers:"showAllUsers",unassignedCount:"unassignedCount",loading:"loading",displayProfile:"displayProfile",isLocked:"isLocked",collapsed:"collapsed",currentUser:"currentUser",simpleLayout:"simpleLayout",allUsers:"allUsers",allGroups:"allGroups"},outputs:{onSelectUser:"onSelectUser",onSelectUserGroup:"onSelectUserGroup",onAssignedCommentsChange:"onAssignedCommentsChange",onShowUnassignedChange:"onShowUnassignedChange",onShowAllUsersChange:"onShowAllUsersChange",onOpenProfile:"onOpenProfile",onClose:"onClose",onChooseAll:"onChooseAll"},features:[d.Gb],decls:5,vars:3,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,h,p,f,g,m,v,b,_;return t=$localize`:@@common_assignees␟9cfd9ca3f0950c8478271a003373d07d9f5abc24␟345414486074854104: Assignees `,e=$localize`:@@cu-team-users-block__link-txt_invite-people␟14c9720004994054fa801038add8c476e10e91a1␟8541371887328450930: Invite people `,i=$localize`:@@common_unassigned␟903f8482331a9f4406cdb75df5ab233977a93c90␟2076988741368851232: Unassigned `,n=$localize`:@@cu-team-users-block__all-users-link_hide␟d3869533a2c6fc99ebfbdfc3f98f8385a0bbd3e2␟2502979791360413182:Hide people and teams without tasks`,o=$localize`:@@cu-team-users-block__all-users-link_show␟18d325d2db98460a9fb9a21f21db962aca625edc␟8395473234555086376:Show all people and teams`,a=$localize`:@@cu-team-users-block__show-all-users_hide-more␟7e13aa63b7021229c75fe954e0e68bb7a0bbc2bd␟1675403046872903557: Hide ${"\ufffd0\ufffd"}:INTERPOLATION: `,r=$localize`:@@cu-team-users-block__show-all-users_plus-more␟0ba82ca9bf08784499810fe33687c6d0c6404031␟6502364768319963004: +${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:LINE_BREAK: more `,s=$localize`:@@cu-team-users-block__include-assigned-comments␟11a25f16e95cd996b1b94be16b7dce4955200cc7␟2313572125904988388:Include assigned comments`,c=$localize`:@@common_assignees␟08aa105c3d4e16ceb89604253218a1f467bbbe66␟4580853214337140621:Assignees`,l=$localize`:form input placeholder@@forms_placeholder--search␟7e892ba15f2c6c17e83510e273b3e10fc32ea016␟4580988005648117665:Search`,u=$localize`:@@common_assignees-1␟b00d094b2474f659026d35c24e623d7288cbcc6e␟3673856139143738806: ASSIGNEES `,h=$localize`:@@common_teams-1␟92aa22e9ec996f6447be309d207676721275f2f9␟4235948184245953681: TEAMS `,p=$localize`:@@common_assigned-comments␟4ccdd8f43c01d5a2f7e74ebba0f181d215bf5a32␟4405514784773604359: Assigned comments `,f=$localize`:@@common_clear-all␟a57f630ae3bc49934ea3012631f815b1140cab45␟1195959054967152367:clear all`,g=$localize`:@@common_unassigned␟207bb7a6c1549daaf9425c77062a18a04755d49c␟3360808705932143457: Unassigned `,m=$localize`:@@cu-team-users-block__unassigned-task-count␟cd1c5585dff73a99c59da4a1e9630cc3dc0dc8e0␟8316341769449120736:${"\ufffd#8\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#8\ufffd"}:CLOSE_TAG_SPAN: tasks `,v=$localize`:@@cu-team-users-block__task-count␟848825809215469a7e4496bc3dbf397674191b79␟1466148386394074789:${"\ufffd#7\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#7\ufffd"}:CLOSE_TAG_SPAN: tasks `,b=$localize`:@@common_clear-all␟a57f630ae3bc49934ea3012631f815b1140cab45␟1195959054967152367:clear all`,_=$localize`:@@cu-team-users-block__task-count-with-members␟837ab871c29ff27a60977dc72518fdfa20b88d88␟7294435435838213002:${"[\ufffd#7\ufffd|\ufffd#8\ufffd]"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#7\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_SPAN: tasks • ${"[\ufffd#7\ufffd|\ufffd#8\ufffd]"}:START_TAG_SPAN:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#7\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_SPAN: members `,_=d.lc(_),[["class","cu-team-users-block__container",3,"cu-team-users-block__container_collapsed",4,"ngIf"],[4,"ngIf"],["class","cu-team-users-block__simple",4,"ngIf"],["selectAllTmpl",""],[1,"cu-team-users-block__container"],["class","cu-team-users-block__header",4,"ngIf"],["class","cu-team-users-block__locked",4,"ngIf"],[1,"cu-team-users-block__list",3,"filterfn","specialCaseData","items","modifierSearchInput","onUpdate"],["searchList",""],[1,"cu-team-users-block__scrollable",3,"perfectScrollbar"],["scrollbar","ngxPerfectScrollbar"],["class","cu-team-users-block__list-item",3,"cuTooltip","ngClass","click",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-team-users-block__scrollable-footer"],[1,"cu-team-users-block__all-users"],["class","cu-team-users-block__all-users-link",3,"click",4,"ngIf","ngIfElse"],["notCollapsedShowAll",""],[1,"cu-team-users-block__footer",3,"ngClass"],[1,"cu-team-users-block__footer-assigned",3,"click"],["icon","assigned-comment2","tooltipModifier","tooltip_left-nowrap",1,"cu-team-users-block__footer-assigned-icon",3,"cuTooltip"],[1,"cu-team-users-block__header"],[1,"cu-team-users-block__title"],t,["class","cu-team-users-block__invite","draggable","false",3,"routerLink",4,"ngIf"],["draggable","false",1,"cu-team-users-block__invite",3,"routerLink"],e,[1,"cu-team-users-block__locked"],[1,"cu-team-users-block__list-item",3,"cuTooltip","ngClass","click"],[1,"cu-team-users-block__list-item-unassign-icon-container"],["icon","unassigned",1,"cu-team-users-block__list-item-unassign-icon"],["class","cu-team-users-block__list-item-unassign-icon-count",4,"ngIf"],[1,"cu-team-users-block__list-item-name"],i,[1,"cu-team-users-block__list-item-count"],["icon","cu2-times",1,"cu-team-users-block__list-item-close"],[1,"cu-team-users-block__list-item-unassign-icon-count"],[3,"user","selected","collapsed","displayProfile","cuTooltip","onOpenProfile","onSelect",4,"ngIf"],["class","cu-team-user-item",3,"cu-team-user-item_selected-collapsed","cu-team-user-item_selected","cu-team-user-item_collapsed","click",4,"ngIf"],[3,"user","selected","collapsed","displayProfile","cuTooltip","onOpenProfile","onSelect"],[1,"cu-team-user-item",3,"click"],["tooltipModifier","tooltip_left","tooltipDelay","300",1,"cu-team-user-item__avatar-container",3,"cuTooltip"],[1,"cu-team-user-item__avatar",3,"group","avatarSize","bordered"],["class","cu-team-user-item__avatar-count",4,"ngIf"],[1,"cu-team-user-item__name"],[1,"cu-team-user-item__count"],["icon","cu2-times",1,"cu-team-user-item__close"],[1,"cu-team-user-item__avatar-count"],[1,"cu-team-users-block__all-users-link",3,"click"],[4,"ngIf","ngIfElse"],["showAllUsersTmpl",""],n,o,[1,"cu-team-users-block__all-users-link","cu-team-users-block__all-users-link_collapsed",3,"click"],["notShowAllUsers",""],a,r,s,[1,"cu-team-users-block__simple"],[1,"cu-team-users-block__simple-header"],[1,"cu-team-users-block__simple-header-top"],c,["icon","cu3-chevron-double-left",1,"cu-team-users-block__simple-header-top-toggle",3,"click"],["class","cu-team-users-block__simple-header-locked",4,"ngIf"],[1,"cu-team-users-block__simple-header-search"],["icon","cu2-search",1,"cu-team-users-block__simple-header-search-mag"],["placeholder",l,3,"ngModel","disabled","ngModelChange"],["searchInput",""],["class","cu-team-users-block__simple-header-search-close","icon","cu2-times",3,"cuTooltip","click",4,"ngIf"],[1,"cu-team-users-block__simple-body"],[1,"cu-team-users-block__simple-body-users"],[1,"cu-team-users-block__simple-body-section-title",3,"click"],[1,"cu-team-users-block__simple-body-section-title-text",3,"cuTooltip"],u,[3,"cuPreventDefault","click"],["class","cu-team-users-block__simple-body-users-scroll",3,"perfectScrollbar",4,"ngIf"],[1,"cu-team-users-block__simple-body-groups"],h,[1,"cu-team-users-block__simple-footer"],[1,"cu-team-users-block__simple-footer-bot"],["icon","cu2-assign-2"],[1,"cu-team-users-block__simple-footer-bot-text"],p,[1,"cu-team-users-block__simple-footer-bot-toggle",3,"cuTooltip","checked","disabled","onChange"],[1,"cu-team-users-block__simple-header-locked"],["icon","cu2-times",1,"cu-team-users-block__simple-header-search-close",3,"cuTooltip","click"],f,[1,"cu-team-users-block__simple-body-users-scroll",3,"perfectScrollbar"],["usersScrollbar","ngxPerfectScrollbar"],["class","cu-team-users-block__simple-body-item",3,"cu-team-users-block__simple-body-item-active","cuTooltip","click",4,"ngIf"],["class","cu-team-users-block__simple-body-item",3,"cu-team-users-block__simple-body-item-active","cuTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-team-users-block__simple-body-item",3,"cuTooltip","click"],[1,"cu-team-users-block__simple-body-item-avatar","cu-team-users-block__simple-body-item-avatar-unassigned"],["icon","unassigned"],[1,"cu-team-users-block__simple-body-item-info"],[1,"cu-team-users-block__simple-body-item-info-top","cu-team-users-block__simple-body-item-info-top_no-border"],g,[1,"cu-team-users-block__simple-body-item-info-bot"],m,[1,"cu-team-users-block__simple-body-item-check"],["icon","cu2-check-3"],[1,"cu-team-user-item__avatar","cu-team-users-block__simple-body-item-avatar",3,"user","modifier","cuPreventDefault","click"],[1,"cu-team-users-block__simple-body-item-info-top",3,"cuPreventDefault","click"],v,b,["groupsScrollbar","ngxPerfectScrollbar"],[1,"cu-team-user-item__avatar","cu-team-users-block__simple-body-item-avatar",3,"group","avatarSize","bordered"],[1,"cu-team-users-block__simple-body-item-info-top"],_]},template:function(t,e){1&t&&(d.bd(0,tm,19,28,"div",0),d.bd(1,em,1,0,"cu-loader",1),d.bd(2,dm,33,27,"div",2),d.bd(3,hm,2,0,"ng-template",null,3,d.cd)),2&t&&(d.Dc("ngIf",!e.loading&&!e.simpleLayout),d.Ib(1),d.Dc("ngIf",e.loading),d.Ib(1),d.Dc("ngIf",!e.loading&&e.simpleLayout))},directives:[n.q,Tg.a,Bn.a,n.p,n.o,nt.a,ot.a,P.i,Ig,Pg.a,Fo.a,D.c,D.p,D.s,ns.a,Ro.a,is.a],pipes:[n.b],styles:['.cu-team-users-block{height:100%}.cu-team-users-block__container{display:grid;grid:auto 1fr auto/1fr;height:100%}.cu-team-users-block__container_collapsed{grid:1fr auto/1fr}.cu-team-users-block__locked{text-align:center;padding:0 20px 15px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-team-users-block__header{display:flex;justify-content:space-between;align-items:center;margin:30px 30px 20px}.cu-team-users-block__title{color:#292d34;font:400 18px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-team-users-block__title{color:#d5d6d7}.cu-team-users-block__invite{color:#7b68ee;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;margin-right:20px}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__invite{color:var(--theme-main-color)}}.cu-team-users-block__invite:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-team-users-block__invite:hover{color:var(--theme-main-color-dark)}}.cu-team-users-block__all-users{display:flex;justify-content:center;align-items:center}.cu-team-users-block__all-users-tip{font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;font-style:italic;padding:10px 5px 9px 0;color:#858585}.dark-theme .cu-team-users-block__all-users-tip{color:#abaeb0}.cu-team-users-block__all-users-link{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif;padding:10px 0;cursor:pointer;color:#b9bec7}.cu-team-users-block__all-users-link:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__all-users-link:hover{color:var(--theme-main-color)}}.cu-team-users-block__all-users-link_collapsed{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:100%;text-align:center;font:600 10px/1.2 Gotham Pro,Proxima Nova,arial,serif;padding-bottom:5px}.cu-team-users-block__scrollable{flex-grow:1;padding:0 15px 0 30px}.cu-team-users-block__scrollable_collapsed{display:flex;flex-direction:column;align-items:center;padding:0}.cu-team-users-block__scrollable_collapsed .cu-team-users-block__list-item-close,.cu-team-users-block__scrollable_collapsed .cu-team-users-block__list-item-count,.cu-team-users-block__scrollable_collapsed .cu-team-users-block__list-item-name{display:none}.cu-team-users-block__scrollable:before{content:"";display:block;position:sticky;width:100%;top:0;height:8px;flex-shrink:0;margin-bottom:-8px;z-index:1;pointer-events:none;background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0))}.dark-theme .cu-team-users-block__scrollable:before{background:linear-gradient(180deg,#384047 0,rgba(56,64,71,0))}.cu-team-users-block__scrollable-footer{width:100%;position:sticky;bottom:0;background:#fff;margin-top:10px}.dark-theme .cu-team-users-block__scrollable-footer{background:#384047}.cu-team-users-block__scrollable-footer:before{content:"";display:block;position:absolute;width:100%;top:-8px;height:8px;flex-shrink:0;z-index:1;pointer-events:none;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,#fff)}.dark-theme .cu-team-users-block__scrollable-footer:before{background:linear-gradient(180deg,rgba(56,64,71,0) 0,#384047)}.cu-team-users-block__list{display:flex;flex-direction:column;min-width:0;min-height:0}.cu-team-users-block__list-search{margin:0 20px 5px}.cu-team-users-block__list-search.cu-search-input__inner{visibility:hidden;opacity:0}.cu-team-users-block__list-search.not-collapsed.cu-search-input__inner{visibility:visible;opacity:1}.cu-team-users-block__list-item{transition:background .1s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;cursor:pointer;align-items:center;margin-top:10px;flex-shrink:0;border-radius:15px 3px 3px 15px}.cu-team-users-block__list-item:hover:not(.cu-team-users-block__list-item_collapsed){background-color:#f2f2f2}.dark-theme .cu-team-users-block__list-item:hover:not(.cu-team-users-block__list-item_collapsed){background-color:#1e272e}.cu-team-users-block__list-item:hover:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-count,.cu-team-users-block__list-item:hover:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-name{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__list-item:hover:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-count,.cu-team-users-block__list-item:hover:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-name{color:var(--theme-main-color)}}.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed){background:#7b68ee;color:#fff}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed){background:var(--theme-main-color)}}.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed):hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed):hover{background:var(--theme-main-color)}}.dark-theme .cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed):hover{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed):hover{background:var(--theme-main-color)}}.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-count,.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-name,.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed):hover .cu-team-users-block__list-item-count,.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed):hover .cu-team-users-block__list-item-name,.dark-theme .cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-count,.dark-theme .cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-name{color:#fff}.cu-team-users-block__list-item_selected:not(.cu-team-users-block__list-item_collapsed) .cu-team-users-block__list-item-close{opacity:1}.cu-team-users-block__list-item_selected.cu-team-users-block__list-item_collapsed .cu-team-users-block__list-item-unassign-icon:before{content:"";display:block;position:absolute;width:calc(100% + 6px);height:calc(100% + 6px);border:2px solid;border-radius:50%}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__list-item_selected.cu-team-users-block__list-item_collapsed .cu-team-users-block__list-item-unassign-icon:before{border-color:var(--theme-main-color)}}.cu-team-users-block__list-item_collapsed{margin-top:25px}.cu-team-users-block__list-item-name{transition:color .1s cubic-bezier(.785,.135,.15,.86) 0s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;padding-left:10px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-team-users-block__list-item-name{color:#abaeb0}.cu-team-users-block__list-item-count{transition:color .1s cubic-bezier(.785,.135,.15,.86) 0s;width:50px;padding-left:10px;text-align:right;font:400 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#585c63}.dark-theme .cu-team-users-block__list-item-count{color:#abaeb0}.cu-team-users-block__list-item-unassign-icon{position:relative;width:38px;height:38px;border:2px solid #fff;border-radius:50%;margin:-2px 0}.dark-theme .cu-team-users-block__list-item-unassign-icon{border-color:#384047}.cu-team-users-block__list-item-unassign-icon-container{display:flex;align-items:center;justify-content:center;position:relative}.cu-team-users-block__list-item-unassign-icon-count{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;bottom:-5px;background:#fff;padding:3px 2px 2px;min-width:20px;height:15px;text-align:center;box-shadow:0 2px 5px 0 rgba(0,0,0,.1);color:#7c828d;border-radius:9px;font:600 10px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-team-users-block__list-item-unassign-icon-count{background:#1e272e;color:#d5d6d7}.cu-team-users-block__list-item-close{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;width:14px;height:14px;margin:0 8px 0 13px;fill:#fff;opacity:0}.cu-team-users-block__footer{display:flex;align-items:center;justify-content:center;padding:15px 0 20px;border-top:1px solid #e9ebf0}.contrast_high .cu-team-users-block__footer{border-top-color:#dedede}.dark-theme .cu-team-users-block__footer{border-top-color:#1e272e}.cu-team-users-block__footer_task-tray{padding-bottom:70px}.cu-team-users-block__footer-assigned{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;color:#b9bec7}.cu-team-users-block__footer-assigned:hover,.cu-team-users-block__footer-assigned_on{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__footer-assigned:hover,.cu-team-users-block__footer-assigned_on{color:var(--theme-main-color)}}.cu-team-users-block__footer-assigned:hover .cu-team-users-block__footer-assigned-icon,.cu-team-users-block__footer-assigned_on .cu-team-users-block__footer-assigned-icon{fill:#7b68ee;stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__footer-assigned:hover .cu-team-users-block__footer-assigned-icon,.cu-team-users-block__footer-assigned_on .cu-team-users-block__footer-assigned-icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}.cu-team-users-block__footer-assigned-icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86),stroke .2s cubic-bezier(.785,.135,.15,.86);cursor:pointer;width:28px;height:28px;padding:2px;margin-right:7px;fill:#b9bec7;stroke:#b9bec7}.cu-team-users-block__footer-assigned-icon_collapsed{margin-right:0}.cu-team-users-block__checkbox-label{text-transform:none;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-team-users-block__checkbox-label{color:#d5d6d7}.cu-team-users-block .cu-btn__spinner_loader{padding:30px 0}.cu-team-users-block__simple{display:grid;grid-template-rows:auto 1fr 98px;min-height:0;max-height:100%}.cu-team-users-block__simple-header{padding:15px 12px 0}.cu-team-users-block__simple-header-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:15px;line-height:1;color:#292d34;display:flex;align-items:center;justify-content:space-between}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-header-top{font-family:var(--global-font-support)}}.dark-theme .cu-team-users-block__simple-header-top{color:#d5d6d7}.cu-team-users-block__simple-header-top-toggle{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#7b68ee;transform:rotate(180deg);width:26px;height:26px;padding:7px;margin-left:5px;cursor:pointer;border-radius:3px}@supports (--theme-main-color:#7b68ee){.cu-team-users-block__simple-header-top-toggle{fill:var(--theme-main-color)}}.cu-team-users-block__simple-header-top-toggle:hover{background-color:#f2f2f2}.dark-theme .cu-team-users-block__simple-header-top-toggle:hover{background:#1e272e}.cu-team-users-block__simple-header-locked{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;padding:15px 0 0;text-align:center;font-style:italic}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-header-locked{font-family:var(--global-font-support)}}.cu-team-users-block__simple-header-search{width:100%;position:relative;height:32px;margin:16px 0 7px}.cu-team-users-block__simple-header-search-mag{position:absolute;left:12px;top:8px;width:15px;height:15px;fill:#b9bec7}.cu-team-users-block__simple-header-search-close{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:13px;height:13px;top:10px;right:12px;position:absolute;fill:#b9bec7;cursor:pointer;border-radius:5px}.cu-team-users-block__simple-header-search-close:hover{transform:rotate(180deg)}.cu-team-users-block__simple-header-search input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;width:100%;padding:0 20px 0 37px;height:32px;border:none;border-radius:5px;color:#292d34;background:#f6f7f9}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-header-search input{font-family:var(--global-font-support)}}.dark-theme .cu-team-users-block__simple-header-search input{background:#2b343b}.cu-team-users-block__simple-header-search input:-ms-input-placeholder{opacity:.7}.cu-team-users-block__simple-header-search input::placeholder{opacity:.7}.cu-team-users-block__simple-header-search input:active,.cu-team-users-block__simple-header-search input:focus{box-shadow:none}.cu-team-users-block__simple-body{display:grid;grid-template-rows:auto auto;min-height:0;min-width:0}.cu-team-users-block__simple-body.cu-team-users-block__simple-body-half{grid-template-rows:1fr 1fr}.cu-team-users-block__simple-body-section-title{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:space-between;min-height:35px;padding:0 12px;cursor:pointer}.cu-team-users-block__simple-body-section-title:hover .cu-team-users-block__simple-body-section-title-text{color:var(--theme-main-color)!important}.cu-team-users-block__simple-body-section-title-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:1;color:#292d34;opacity:.7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-body-section-title-text{font-family:var(--global-font-support)}}.dark-theme .cu-team-users-block__simple-body-section-title-text{color:#d5d6d7}.cu-team-users-block__simple-body-section-title span{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:var(--theme-main-color);cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-body-section-title span{font-family:var(--global-font-support)}}.cu-team-users-block__simple-body-section-title span:hover{text-decoration:underline}.cu-team-users-block__simple-body-users{display:flex;flex-direction:column;max-height:none;min-height:0;min-width:0;border-bottom:1px solid #e9ebf0;position:relative}.dark-theme .cu-team-users-block__simple-body-users{border-color:#1e272e}.cu-team-users-block__simple-body-users.cu-team-users-block__simple-body-users-collapsed:before{display:none}.cu-team-users-block__simple-body-users:before{content:"";position:absolute;display:block;left:0;bottom:0;width:100%;height:15px;background-image:linear-gradient(-180deg,transparent,rgba(0,0,0,.02))}.cu-team-users-block__simple-body-groups{display:flex;flex-direction:column;max-height:none;min-height:0;min-width:0;position:relative}.cu-team-users-block__simple-body-groups.cu-team-users-block__simple-body-groups-collapsed:before{display:none}.cu-team-users-block__simple-body-groups .cu-team-users-block__simple-body-section-title{border-bottom:none}.cu-team-users-block__simple-body-groups:before{content:"";display:block;position:absolute;left:0;bottom:0;width:100%;height:15px;background-image:linear-gradient(-180deg,transparent,rgba(0,0,0,.02))}.cu-team-users-block__simple-body-item{width:calc(100% - 24px);display:flex;align-items:center;position:relative;padding:5px;cursor:pointer;margin:0 12px 12px}.cu-team-users-block__simple-body-item:before{content:"";display:none;pointer-events:none;position:absolute;left:0;top:0;height:100%;width:100%;opacity:.1;border-radius:6px;background-color:var(--theme-main-color)}.cu-team-users-block__simple-body-item.cu-team-users-block__simple-body-item-active:before,.cu-team-users-block__simple-body-item:hover:before{display:block}.cu-team-users-block__simple-body-item.cu-team-users-block__simple-body-item-active .cu-team-users-block__simple-body-item-check{opacity:1}.cu-team-users-block__simple-body-item.cu-team-users-block__simple-body-item-active .cu-team-users-block__simple-body-item-info-top{font-weight:500;color:var(--theme-main-color)}.cu-team-users-block__simple-body-item-avatar{position:relative;margin-right:10px}.cu-team-users-block__simple-body-item-avatar-unassigned{fill:#b9bec7;height:28px;width:28px}.cu-team-users-block__simple-body-item-info{position:relative;flex-grow:1;min-width:0}.cu-team-users-block__simple-body-item-info-top{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400px;font-size:13px;line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;max-width:100%;border-bottom:1px dashed transparent}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-body-item-info-top{font-family:var(--global-font-support)}}.cu-team-users-block__simple-body-item-info-top:hover{border-bottom-color:currentColor}.cu-team-users-block__simple-body-item-info-top_no-border{border-bottom:0;margin-bottom:1px}.cu-team-users-block__simple-body-item-info-bot{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400px;font-size:10px;line-height:1;color:#b9bec7}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-body-item-info-bot{font-family:var(--global-font-support)}}.cu-team-users-block__simple-body-item-info-bot span{color:#b9bec7;font-weight:500}.cu-team-users-block__simple-body-item-check{position:relative;border-radius:50%;background-color:var(--theme-main-color);opacity:.1;display:flex;align-items:center;justify-content:center;width:16px;height:16px;margin-right:5px;flex-shrink:0}.cu-team-users-block__simple-body-item-check .icon{fill:#fff;width:10px;height:10px}.cu-team-users-block__simple-footer{padding:15px 20px;border-top:1px solid #e9ebf0}.dark-theme .cu-team-users-block__simple-footer{border-color:#1e272e}.cu-team-users-block__simple-footer-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.cu-team-users-block__simple-footer-top-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;opacity:.5}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-footer-top-text{font-family:var(--global-font-support)}}.dark-theme .cu-team-users-block__simple-footer-top-text{color:#d5d6d7}.cu-team-users-block__simple-footer-top span{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;color:var(--theme-main-color);cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-footer-top span{font-family:var(--global-font-support)}}.cu-team-users-block__simple-footer-top span:hover{text-decoration:underline}.cu-team-users-block__simple-footer-bot{display:flex;align-items:center}.cu-team-users-block__simple-footer-bot.cu-team-users-block__simple-footer-bot-active .cu-team-users-block__simple-footer-bot-text{color:var(--theme-main-color);opacity:1}.cu-team-users-block__simple-footer-bot.cu-team-users-block__simple-footer-bot-active .icon{fill:var(--theme-main-color)}.cu-team-users-block__simple-footer-bot-text{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:1;color:#292d34;opacity:.5}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-team-users-block__simple-footer-bot-text{font-family:var(--global-font-support)}}.dark-theme .cu-team-users-block__simple-footer-bot-text{color:#d5d6d7}.cu-team-users-block__simple-footer-bot .icon{width:14px;height:14px;fill:#b9bec7;margin-right:5px}.cu-team-users-block__simple-footer-bot-toggle{margin-left:auto}'],encapsulation:2,data:{animation:[oo.e]},changeDetection:0}),t})(),gm=(()=>{class t{constructor(t,e,i){this.store=t,this.userProfileService=e,this.taskService=i,this.destroy$=new B.a,this.team$=this.store.select(z.getTeam),this.users$=this.store.select(z.getSelectedProjectCategoryAndSubcategoryIds).pipe(Object(Kn.a)(({selectedProjectId:t,selectedCategoryId:e,selectedSubCategoryId:i})=>this.store.pipe(Object(K.select)(Object(Tc.e)(t,e,i))))),this.userGroups$=Object(ii.a)([this.store.select(Dr.c),this.users$]).pipe(Object(Qt.a)(([t,e])=>{if(t&&e){const i=e.map(t=>t.id);return t.filter(t=>t.members.some(t=>i.includes(t.id)))}})),this.meUser$=this.store.select(z.getUser),this.collapsed$=this.store.select(z.getCollapseAssigneeSidebar),this.teamUsersData$=this.store.select(z.getTeamUsersData),this.teamUnassignedCount$=this.teamUsersData$.pipe(Object(Qt.a)(t=>t&&t.unassignedCount)),this.selectedIds$=this.store.select(X.cb).pipe(Object(Qt.a)(t=>{if(t)return[...t.userIds||[],...t.userGroupIds||[]]})),this.filterAssigneesAssignedComments$=this.store.pipe(Object(K.select)(X.t)),this.filterAssigneesShowUnassigned$=this.store.pipe(Object(K.select)(X.u)),this.filterAssigneesShowAllUsers$=this.store.pipe(Object(K.select)(z.getTeamSidebarOptionsShowAllUsers)),this.teamUsers$=Object(ii.a)([this.teamUsersData$.pipe(Object(Qt.a)(t=>t&&t.users)),this.filterAssigneesShowAllUsers$,this.users$]).pipe(Object(Qt.a)(([t,e,i])=>{if(!t)return t;const n=t.filter(t=>e||i.some(e=>e.id===t.id));return e&&i&&i.forEach(t=>{n.find(e=>e.id===t.id)||n.push(Object.assign(Object.assign({},t),{taskCount:0}))}),n.sort(Object(kg.a)()),n})),this.teamUserGroups$=Object(ii.a)([this.teamUsersData$.pipe(Object(Qt.a)(t=>t&&t.userGroups)),this.filterAssigneesShowAllUsers$,this.userGroups$]).pipe(Object(Qt.a)(([t,e,i])=>{if(!t)return t;const n=t.filter(t=>e||i.some(e=>e.id===t.id));return e&&i&&i.forEach(t=>{n.find(e=>e.id===t.id)||n.push(Object.assign(Object.assign({},t),{taskCount:0}))}),n.sort(Object(kg.a)()),n})),this.usersAndGroups$=Object(ii.a)([this.teamUsers$,this.teamUserGroups$]).pipe(Object(Vi.a)(([t,e])=>Boolean(t&&e)),Object(Qt.a)(([t,e])=>[...t.map(t=>({user:t,type:"user"})),...e.map(t=>({group:t,type:"group"}))])),this.teamUsersTotal$=Object(ii.a)([this.teamUsersData$.pipe(Object(Qt.a)(t=>t&&t.users)),this.users$]).pipe(Object(Qt.a)(([t,e])=>{if(t){const i=t.filter(t=>e.some(e=>e.id===t.id));return e&&e.forEach(t=>{i.find(e=>e.id===t.id)||i.push(Object.assign(Object.assign({},t),{taskCount:0}))}),i}return[]})),this.teamUserGroupsTotal$=Object(ii.a)([this.teamUsersData$.pipe(Object(Qt.a)(t=>t&&t.userGroups)),this.userGroups$]).pipe(Object(Qt.a)(([t,e])=>{if(t){const i=t.filter(t=>e.some(e=>e.id===t.id));return e&&e.forEach(t=>{i.find(e=>e.id===t.id)||i.push(Object.assign(Object.assign({},t),{taskCount:0}))}),i}return[]})),this.moreCount$=Object(ii.a)([this.teamUsersData$,this.filterAssigneesShowAllUsers$,this.users$,this.userGroups$]).pipe(Object(Qt.a)(([t,e,i,n])=>{if(e||!t||!t.users||!t.userGroups)return 0;const o=[...t.users,...t.userGroups];return i&&i.forEach(t=>{o.find(e=>e.id===t.id)||o.push(Object.assign(Object.assign({},t),{taskCount:0}))}),n&&n.forEach(t=>{o.find(e=>e.id===t.id)||o.push(Object.assign(Object.assign({},t),{taskCount:0}))}),o.filter(t=>!t.taskCount).length})),this.filterAssigneesLoading$=Object(ii.a)([this.teamUsers$,this.teamUserGroups$]).pipe(Object(Qt.a)((t,e)=>!t||!e)),this.isLocked$=this.store.select(X.ub),this.dataViewReloadData$=this.store.pipe(Object(K.select)(X.U),Object(Vi.a)(t=>!!t),Object(te.a)(ci.a))}ngOnInit(){this.dataViewReloadData$.pipe(Object(A.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(new Y.qe)}),this.taskService.onAssigneesChange.pipe(Object(A.a)(this.destroy$)).subscribe(()=>this.store.dispatch(new Y.qe))}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}selectUser({id:t,selected:e}){this.store.dispatch(new Y.vl(t,e,"user")),this.store.dispatch(new Y.wj(!1))}selectUserGroup({id:t,selected:e}){this.store.dispatch(new Y.vl(t,e,"group")),this.store.dispatch(new Y.wj(!1))}assignedCommentsChange(t){this.store.dispatch(new Y.Fj(t)),this.store.dispatch(new Y.wj(!1))}showUnassignedChange(t){this.store.dispatch(new Y.Hj(t)),this.store.dispatch(new Y.wj(!1))}showAllUsersChange(t){this.store.dispatch(new Y.Ej(t))}closeSidebar(){this.store.dispatch(new Y.Gj(!1))}toggleSidebar(){this.store.dispatch(new Y.xl)}openProfile(t){this.userProfileService.openProfile(t)}chooseAll(t){this.store.dispatch(new Y.vl(null,null,null,t.selectAllUsers,t.selectAllGroups,t.userIds,t.groupIds)),this.store.dispatch(new Y.wj(!1))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(K.Store),d.Wb(xg.UserProfileService),d.Wb(Fr.a))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-team-users-sidebar"]],hostAttrs:[1,"cu-team-users-sidebar"],hostBindings:function(t,e){1&t&&d.qc("keyup.esc",function(){return e.closeSidebar()},!1,d.Sc)},inputs:{simpleLayout:"simpleLayout"},decls:17,vars:49,consts:[["zIndex","490",3,"collapsed","modifier","simpleLayout","closeSidebar","toggleSidebar"],[3,"team","usersAndGroups","moreCount","collapsed","currentUser","selectedIds","assignedComments","unassignedCount","showUnassigned","showAllUsers","loading","displayProfile","isLocked","simpleLayout","allUsers","allGroups","onSelectUser","onSelectUserGroup","onAssignedCommentsChange","onShowUnassignedChange","onShowAllUsersChange","onOpenProfile","onClose","onChooseAll"]],template:function(t,e){1&t&&(d.cc(0,"cu2-right-sidebar",0),d.qc("closeSidebar",function(){return e.closeSidebar()})("toggleSidebar",function(){return e.toggleSidebar()}),d.vc(1,"async"),d.cc(2,"cu-team-users-block",1),d.qc("onSelectUser",function(t){return e.selectUser(t)})("onSelectUserGroup",function(t){return e.selectUserGroup(t)})("onAssignedCommentsChange",function(t){return e.assignedCommentsChange(t)})("onShowUnassignedChange",function(t){return e.showUnassignedChange(t)})("onShowAllUsersChange",function(t){return e.showAllUsersChange(t)})("onOpenProfile",function(t){return e.openProfile(t)})("onClose",function(){return e.closeSidebar()})("onChooseAll",function(t){return e.chooseAll(t)}),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async"),d.vc(10,"async"),d.vc(11,"async"),d.vc(12,"async"),d.vc(13,"async"),d.vc(14,"async"),d.vc(15,"async"),d.vc(16,"async"),d.bc(),d.bc()),2&t&&(d.Dc("collapsed",d.wc(1,19,e.collapsed$))("modifier","cu2-right-sidebar_team-users-sidebar")("simpleLayout",e.simpleLayout),d.Ib(2),d.Dc("team",d.wc(3,21,e.team$))("usersAndGroups",d.wc(4,23,e.usersAndGroups$))("moreCount",d.wc(5,25,e.moreCount$))("collapsed",d.wc(6,27,e.collapsed$))("currentUser",d.wc(7,29,e.meUser$))("selectedIds",d.wc(8,31,e.selectedIds$))("assignedComments",d.wc(9,33,e.filterAssigneesAssignedComments$))("unassignedCount",d.wc(10,35,e.teamUnassignedCount$))("showUnassigned",d.wc(11,37,e.filterAssigneesShowUnassigned$))("showAllUsers",d.wc(12,39,e.filterAssigneesShowAllUsers$))("loading",d.wc(13,41,e.filterAssigneesLoading$))("displayProfile",d.wc(14,43,e.userProfileService.enabled$))("isLocked",!1)("simpleLayout",e.simpleLayout)("allUsers",d.wc(15,45,e.teamUsersTotal$))("allGroups",d.wc(16,47,e.teamUserGroupsTotal$)))},directives:[Sg.a,fm],pipes:[n.b],encapsulation:2,changeDetection:0}),t})();var mm=i("Bar4");function vm(t,e){if(1&t&&(d.cc(0,"div",12),d.dd(1),d.bc()),2&t){const t=d.uc().index;d.Ib(1),d.fd(" ",t+1," ")}}function bm(t,e){1&t&&d.Xb(0,"div",13)}function _m(t,e){if(1&t){const t=d.dc();d.cc(0,"div",9),d.qc("click",function(){d.Uc(t);const i=e.$implicit;return d.uc(3).itemClicked(i)}),d.bd(1,vm,2,1,"div",10),d.bd(2,bm,1,0,"div",11),d.bc()}if(2&t){const t=e.$implicit;d.Ob("cu-onboarding-bubbles-steps-item-complete",t.completed),d.Dc("cuTooltip",t.text),d.Ib(1),d.Dc("ngIf",!t.completed),d.Ib(1),d.Dc("ngIf",t.completed)}}function wm(t,e){if(1&t&&(d.cc(0,"div",7),d.bd(1,_m,3,5,"div",8),d.bc()),2&t){const t=d.uc(2);d.Ib(1),d.Dc("ngForOf",t.onboardingSteps)("ngForTrackBy",t.trackByStep)}}function ym(t,e){if(1&t){const t=d.dc();d.cc(0,"div",1),d.cc(1,"div",2),d.qc("click",function(){return d.Uc(t),d.uc().toggleSteps()}),d.Xb(2,"div",3),d.cc(3,"div",4),d.qc("click",function(e){return d.Uc(t),d.uc().optOut(e)}),d.Xb(4,"div",5),d.bc(),d.bc(),d.bd(5,wm,2,2,"div",6),d.bc()}if(2&t){const t=d.uc();d.Ob("cu-onboarding-bubbles-complete",t.completed)("cu-onboarding-bubbles-has-tray-tasks",t.hasTrayTasks),d.Ib(5),d.Dc("ngIf",t.showSteps)}}let km=(()=>{class t{constructor(t,e){this.store=t,this.helpers=e,this.exitOut=new d.o,this.showSteps=!1,this.completed=!1,this.currentStep=1,this.showCap=!0,this.trackByStep=Object(j.d)("currentStep"),this.onboardingSteps=lo.a}ngOnChanges(t){t.user&&(this.initSteps(),this.showCap=this.checkEngagementScore())}ngOnInit(){"true"===this.helpers.getCookie("remote_work")&&(this.onboardingSteps=lo.b),this.initSteps(),this.showCap=this.checkEngagementScore()}ngOnDestroy(){}itemClicked(t){this.store.dispatch(new mm.f({show:!0,id:t.wistiaId,miscData:"forOnboardingVideos"})),this.currentStep=t.number+1;let e=this.user.onboarding_video_steps||[];e.includes(t.number)||(e=e.concat(t.number));const i=localStorage.getItem("bonusClaimed");e.length!==this.onboardingSteps.length||!this.user.onboarding_bonus_claimed&&"true"!==i||this.store.dispatch(new Y.Je(!0))}toggleSteps(){this.showSteps=!this.showSteps}exit(){this.store.dispatch(new Y.om({onboarding_opt_out:!0}))}initSteps(){const t=this.user.onboarding_video_steps;let e=!0;if(t){this.onboardingSteps.forEach(e=>{t.includes(e.number)&&(e.completed=!0)});for(let t=0;t<this.onboardingSteps.length;t++)if(!this.onboardingSteps[t].completed){this.currentStep=this.onboardingSteps[t].number,e=!1;break}this.completed=!!e}}optOut(t){this.store.dispatch(new Y.Lk(!1)),localStorage.setItem("showOnboardingBubbles","false"),this.exitOut.emit()}checkEngagementScore(){if(!this.user||!this.user.date_joined)return!0;const t=Or(),e=Or(parseInt(this.user.date_joined,10)),i=t.diff(e,"days");return i<7||!(i>=7&&this.user.engagement_score>50)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(K.Store),d.Wb(vo.b))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-onboarding-bubbles"]],inputs:{user:"user",team:"team",hasTrayTasks:"hasTrayTasks"},outputs:{exitOut:"exitOut"},features:[d.Gb],decls:1,vars:1,consts:function(){let t;return t=$localize`:@@cu-onboarding-bubbles__tooltip-msg_exit␟f65cd8b3e83e39ef08d97d02298eb222a5b04f2f␟5045200874122539692:Exit`,[["class","cu-onboarding-bubbles cu-hidden-print",3,"cu-onboarding-bubbles-complete","cu-onboarding-bubbles-has-tray-tasks",4,"ngIf"],[1,"cu-onboarding-bubbles","cu-hidden-print"],[1,"cu-onboarding-bubbles-toggle",3,"click"],["icon","graduation-cap",1,"cu-onboarding-bubbles-toggle-cap"],["cuTooltip",t,1,"cu-onboarding-bubbles-toggle-exit",3,"click"],["icon","cu2-times"],["class","cu-onboarding-bubbles-steps",4,"ngIf"],[1,"cu-onboarding-bubbles-steps"],["class","cu-onboarding-bubbles-steps-item",3,"cu-onboarding-bubbles-steps-item-complete","cuTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-onboarding-bubbles-steps-item",3,"cuTooltip","click"],["class","cu-onboarding-bubbles-steps-item-number",4,"ngIf"],["icon","check-o-green",4,"ngIf"],[1,"cu-onboarding-bubbles-steps-item-number"],["icon","check-o-green"]]},template:function(t,e){1&t&&d.bd(0,ym,6,5,"div",0),2&t&&d.Dc("ngIf",e.showCap)},directives:[n.q,nt.a,ot.a,n.p],styles:['.cu-onboarding-bubbles{position:absolute;bottom:15px;left:15px;display:flex;align-items:center}.cu-onboarding-bubbles:hover .cu-onboarding-bubbles-toggle-exit{opacity:1}.cu-onboarding-bubbles-complete .cu-onboarding-bubbles-toggle,.cu-onboarding-bubbles-complete .cu-onboarding-bubbles-toggle:hover{background-color:#67cb48}.cu-onboarding-bubbles-has-tray-tasks{bottom:45px}.cu-onboarding-bubbles-toggle{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;width:65px;height:65px;border-radius:50%;box-shadow:0 0 10px 0 rgba(0,0,0,.15);background-color:var(--theme-main-color);display:flex;justify-content:center;align-items:center;cursor:pointer;position:relative}.cu-onboarding-bubbles-toggle:hover{background-color:var(--theme-main-color-dark)}.cu-onboarding-bubbles-toggle-cap{width:31px;height:28px;fill:#fff}.cu-onboarding-bubbles-toggle-exit{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;opacity:0;position:absolute;top:0;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer;border-radius:50%;width:20px;height:20px;background-color:#b9bec7}.cu-onboarding-bubbles-toggle-exit:hover{transform:rotate(180deg)}.cu-onboarding-bubbles-toggle-exit .icon{width:12px;height:12px;fill:#343434}.cu-onboarding-bubbles-steps{display:flex;align-items:center}.cu-onboarding-bubbles-steps-item{animation:fadeIn .2s ease-in forwards;opacity:0;margin-left:20px;width:36px;height:36px;border-radius:50%;box-shadow:0 0 10px 0 rgba(0,0,0,.15);background-color:var(--theme-main-color);display:flex;justify-content:center;align-items:center;cursor:pointer;position:relative}.cu-onboarding-bubbles-steps-item:hover{background-color:var(--theme-main-color-dark)}.cu-onboarding-bubbles-steps-item:first-of-type{animation-delay:0s}.cu-onboarding-bubbles-steps-item:nth-of-type(2){animation-delay:.1s}.cu-onboarding-bubbles-steps-item:nth-of-type(3){animation-delay:.2s}.cu-onboarding-bubbles-steps-item-number{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:600;font-size:18px;line-height:1;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-onboarding-bubbles-steps-item-number{font-family:var(--global-font-support)}}.cu-onboarding-bubbles-steps-item-no-click{pointer-events:none;background-color:var(--theme-main-color-light)}'],encapsulation:2,changeDetection:0}),t})();const xm=["subcategoryPrompt"],Sm=function(t,e){return{width:t,marginLeft:e}};function Tm(t,e){if(1&t&&(d.Xb(0,"cu-nav-favorites-bar",9),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.vc(9,"async")),2&t){const t=d.uc();let e=null,i=null;d.Dc("ngStyle",d.Ic(21,Sm,(null==(e=d.wc(1,3,t.user$))?null:e.dashboard)!==t.LayoutVersion.Four&&(null==(e=d.wc(2,5,t.user$))?null:e.dashboard)!==t.LayoutVersion.Five||d.wc(3,7,t.sidebarOptions$).isCollapsed?"auto":"calc(100% + "+((null==(e=d.wc(4,9,t.sidebarOptions$))?null:e.width)-1)+"px)",(null==(e=d.wc(5,11,t.user$))?null:e.dashboard)!==t.LayoutVersion.Four&&(null==(e=d.wc(6,13,t.user$))?null:e.dashboard)!==t.LayoutVersion.Five||d.wc(7,15,t.sidebarOptions$).isCollapsed?"0":"-"+((null==(e=d.wc(8,17,t.sidebarOptions$))?null:e.width)-1)+"px"))("isSidebarDark",(null==(i=d.wc(9,19,t.user$))?null:i.sidebar_theme)===t.LeftSidebarTheme.Dark)("@loading",void 0)}}function Cm(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-new-hierarchy-item-prompt",10),d.qc("onRemovePrompt",function(e){return d.Uc(t),d.uc().removePrompt(e)})("onPromptApply",function(e){return d.Uc(t),d.uc().applyInheritedItems(e)}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.vc(5,"async"),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.bc()}if(2&t){const t=d.uc();let e=null,i=null,n=null,o=null;d.Dc("item",null==d.wc(1,4,t.newHierarchyItemPrompt$)[null==(e=d.wc(2,6,t.selectedView$))||null==e.parent?null:e.parent.id]?null:d.wc(1,4,t.newHierarchyItemPrompt$)[null==(e=e)||null==e.parent?null:e.parent.id].item)("type",null==d.wc(3,8,t.newHierarchyItemPrompt$)[null==(i=d.wc(4,10,t.selectedView$))||null==i.parent?null:i.parent.id]?null:d.wc(3,8,t.newHierarchyItemPrompt$)[null==(i=i)||null==i.parent?null:i.parent.id].type)("from",null==d.wc(5,12,t.newHierarchyItemPrompt$)[null==(n=d.wc(6,14,t.selectedView$))||null==n.parent?null:n.parent.id]?null:d.wc(5,12,t.newHierarchyItemPrompt$)[null==(n=n)||null==n.parent?null:n.parent.id].from)("fromType",null==d.wc(7,16,t.newHierarchyItemPrompt$)[null==(o=d.wc(8,18,t.selectedView$))||null==o.parent?null:o.parent.id]?null:d.wc(7,16,t.newHierarchyItemPrompt$)[null==(o=o)||null==o.parent?null:o.parent.id].fromType)}}function Dm(t,e){1&t&&d.Xb(0,"router-outlet")}function Im(t,e){1&t&&(d.ac(0),d.bd(1,Dm,1,0,"router-outlet",11),d.Zb())}function Pm(t,e){1&t&&d.Xb(0,"router-outlet")}function Mm(t,e){1&t&&(d.ac(0),d.Xb(1,"cu-loader"),d.Zb()),2&t&&(d.Ib(1),d.Dc("@loading",void 0))}function Om(t,e){if(1&t&&(d.Xb(0,"cu-team-users-sidebar",12),d.vc(1,"async")),2&t){const t=d.uc();let e=null;d.Dc("simpleLayout",(null==(e=d.wc(1,2,t.user$))?null:e.dashboard)===t.LayoutVersion.Six)("@rightSidebar",void 0)}}function $m(t,e){if(1&t){const t=d.dc();d.cc(0,"cu-onboarding-bubbles",13),d.qc("exitOut",function(){return d.Uc(t),d.uc().checkShowOnboarding()}),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.bc()}if(2&t){const t=d.uc();let e=null;d.Dc("user",d.wc(1,3,t.user$))("team",d.wc(2,5,t.team$))("hasTrayTasks",(null==(e=d.wc(3,7,t.trayTasks$))||null==e.fullTeamTray?null:e.fullTeamTray.length)>0)}}const jm=function(t,e){return{"cu-hidden":t,"cu-dashboard__router-outlet_team-sidebar-opened":e}};let Lm=(()=>{class t{constructor(t,e,i,n,o,a,r,s,c,l,u){this.sharedData=t,this.route=e,this.store=i,this.userService=n,this.dataService=o,this.navService=a,this.renderHelperService=r,this.injector=s,this.sharedDocService=c,this.websocketService=l,this.helpers=u,this.destroy$=new B.a,this.subcategory$=this.store.select(z.getSubcategory),this.meView$=this.store.select(X.R),this.determiningViews$=this.store.select(z.getIsDeterminingViews).pipe(Object(io.a)(10)),this.isPageView$=this.store.select(X.Mb),this.denyRender$=this.renderHelperService.denyRender$,this.favoritesPinned$=this.store.select(no.g),this.team$=this.store.select(z.getTeam),this.project$=this.store.select(z.getProject),this.tagsMap$=this.store.select(ro.d),this.tagsLoadingMap$=this.store.select(ro.c),this.tagsTeamLoadingMap$=this.store.select(ro.f),this.tagsTeamMap$=this.store.select(ro.g),this.user$=this.store.select(z.getUser),this.sidebarOptions$=this.store.select(z.getSidebarOptions),this.LayoutVersion=H.b,this.LeftSidebarTheme=H.c,this.isListView$=this.store.select(eo.o),this.listViewLoad$=Object(ii.a)([this.store.select(ao.p),this.store.select(ao.d),this.isListView$]).pipe(Object(Qt.a)(([t,e,i])=>(t||!e)&&i)),this.boardLoading$=Object(ii.a)([this.store.select(to.A),this.store.select(eo.j)]).pipe(Object(Qt.a)(([t,e])=>!(!e||!t))),this.viewLoad$=Object(ii.a)([this.boardLoading$,this.listViewLoad$,this.determiningViews$]).pipe(Object(Qt.a)(([t,e,i])=>t||e||i)),this.selectedView$=this.store.select(X.qb).pipe(Object(Vi.a)(t=>Boolean(t))),this.isTeamSidebarOpen$=this.store.select(z.getTeamSidebarOptionsOpened),this.isSidebarCollapsing$=this.store.select(z.getSidebarIsCollapsingOption),this.isBlankView$=this.store.select(X.jb),this.trayTasks$=this.store.select(so.d),this.showOnboardingBubbles$=this.store.select(z.showOnboardingBubblesState),this.newHierarchyItemPrompt$=this.store.select(z.getNewHierarchyItemPrompt),this.showOnboarding=!1,this.UserRole=H.f,this.isSafari=Object(co.n)(),this.onboardingSteps=lo.a}ngOnInit(){this.store.select(X.qb).pipe(Object(A.a)(this.destroy$)).subscribe(t=>{const e=t&&t.id,i=this.lastView&&this.lastView.id;e!==i&&(i&&this.websocketService.sendNonConvoViewingMessage(this.lastView,!1),e&&this.websocketService.sendNonConvoViewingMessage(t,!0)),this.lastView=t}),this.route.snapshot.firstChild&&this.route.snapshot.firstChild.firstChild&&this.route.snapshot.firstChild.firstChild.params.viewId&&this.store.dispatch(new Y.ak(this.route.snapshot.firstChild.firstChild.params.viewId)),this.userService.getUser(!1).pipe(Object(A.a)(this.destroy$)).subscribe(t=>{t.user.tour_cards_done||this.sharedData.currentUser.value.tour_cards_done||!this.sharedData.setTools||(this.sharedData.setTools=!1)}),this.sharedDocService.pendingOpen$.pipe(Object(Vi.a)(t=>!!t),Object(ri.a)(50),Object(A.a)(this.destroy$)).subscribe(t=>{this.sharedDocService.openDoc(this.injector,t.teamId,t.viewId,t.pageId),this.sharedDocService.pendingOpen$.next(null)}),this.checkShowOnboarding(),"true"===this.helpers.getCookie("remote_work")&&(this.onboardingSteps=lo.b)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.lastView&&this.websocketService.sendNonConvoViewingMessage(this.lastView,!1),this.lastView=null}checkShowOnboarding(){const t=localStorage.getItem("showOnboardingBubbles");this.showOnboarding="true"===t}removePrompt(t){this.store.dispatch(new Y.jg({id:t.id}))}applyInheritedItems(t){this.removePrompt({id:t.item.id});const e={copy_fields:t.properties,copy_locations:[{id:t.from.id,type:t.fromType}]};t.properties.includes("statuses")&&(e.override_statuses=!0);let i=!1,n=!1;t.properties.includes("custom_fields")&&(i=!0),t.properties.includes("views")&&(n=!0),t.type===$.e.Subcategory&&this.store.dispatch(new Y.Fm(t.item.id,t.item.category,t.item.project_id,e,!0,t.item,n,i)),t.type===$.e.Category&&this.store.dispatch(new Y.lm(t.item.id,e,!1,!0)),t.type===$.e.Project&&this.store.dispatch(new Y.ym({id:t.item.id,data:e,reloadViews:n,reloadCustomFields:i}))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(Jn.a),d.Wb(P.a),d.Wb(K.Store),d.Wb(uo.c),d.Wb(ho.a),d.Wb(po.a),d.Wb(fo.a),d.Wb(d.t),d.Wb(go.a),d.Wb(mo.WebsocketService),d.Wb(vo.b))},t.\u0275cmp=d.Qb({type:t,selectors:[["cu-dashboard"]],viewQuery:function(t,e){if(1&t&&d.jd(xm,3),2&t){let t;d.Qc(t=d.rc())&&(e.subcategoryPrompt=t.first)}},hostAttrs:[1,"cu-dashboard"],decls:46,vars:97,consts:[[3,"isSidebarCollapsing","favoritesPinned","isSidebarDark"],[1,"cu-dashboard__body"],["class","cu-dashboard-fullscreen_hidden",3,"ngStyle","isSidebarDark",4,"ngIf"],[1,"cu-hidden-print",3,"tags","tagsLoading","project"],[3,"item","type","from","fromType","onRemovePrompt","onPromptApply",4,"ngIf"],[1,"cu-dashboard__router-outlet",3,"ngClass"],[4,"ngIf"],[3,"simpleLayout",4,"ngIf"],[3,"user","team","hasTrayTasks","exitOut",4,"ngIf"],[1,"cu-dashboard-fullscreen_hidden",3,"ngStyle","isSidebarDark"],[3,"item","type","from","fromType","onRemovePrompt","onPromptApply"],[4,"cuIfNotTaskView"],[3,"simpleLayout"],[3,"user","team","hasTrayTasks","exitOut"]],template:function(t,e){if(1&t&&(d.Xb(0,"cu-left-sidebar",0),d.vc(1,"async"),d.vc(2,"async"),d.vc(3,"async"),d.vc(4,"async"),d.cc(5,"div",1),d.vc(6,"async"),d.vc(7,"async"),d.vc(8,"async"),d.bd(9,Tm,10,24,"cu-nav-favorites-bar",2),d.vc(10,"async"),d.vc(11,"async"),d.vc(12,"async"),d.Xb(13,"cu2-views-bar",3),d.vc(14,"async"),d.vc(15,"async"),d.vc(16,"async"),d.vc(17,"async"),d.vc(18,"async"),d.vc(19,"async"),d.vc(20,"async"),d.vc(21,"async"),d.vc(22,"async"),d.vc(23,"async"),d.vc(24,"async"),d.vc(25,"async"),d.bd(26,Cm,9,20,"cu-new-hierarchy-item-prompt",4),d.vc(27,"async"),d.vc(28,"async"),d.cc(29,"div",5),d.vc(30,"async"),d.vc(31,"async"),d.vc(32,"async"),d.bd(33,Im,2,0,"ng-container",6),d.vc(34,"async"),d.bd(35,Pm,1,0,"router-outlet",6),d.vc(36,"async"),d.bc(),d.bd(37,Mm,2,1,"ng-container",6),d.vc(38,"async"),d.bd(39,Om,2,4,"cu-team-users-sidebar",7),d.vc(40,"async"),d.vc(41,"async"),d.bd(42,$m,4,9,"cu-onboarding-bubbles",8),d.vc(43,"async"),d.vc(44,"async"),d.vc(45,"async"),d.bc()),2&t){let t=null,i=null,n=null,o=null,a=null,r=null,s=null,c=null,l=null,u=null,h=null;d.Dc("isSidebarCollapsing",d.wc(1,24,e.isSidebarCollapsing$))("favoritesPinned",d.wc(2,26,e.favoritesPinned$))("isSidebarDark",(null==(t=d.wc(3,28,e.user$))?null:t.sidebar_theme)===e.LeftSidebarTheme.Dark&&!(null!=(t=d.wc(4,30,e.user$))&&t.dark_theme)),d.Ib(5),d.Ob("cu-dashboard__body_v4",(null==(i=d.wc(6,32,e.user$))?null:i.dashboard)===e.LayoutVersion.Four)("cu-dashboard__body_v5",(null==(n=d.wc(7,34,e.user$))?null:n.dashboard)===e.LayoutVersion.Five)("cu-dashboard__body_v6",(null==(o=d.wc(8,36,e.user$))?null:o.dashboard)===e.LayoutVersion.Six),d.Ib(4),d.Dc("ngIf",((null==(a=d.wc(10,38,e.user$))?null:a.dashboard)===e.LayoutVersion.Four||(null==(a=d.wc(11,40,e.user$))?null:a.dashboard)===e.LayoutVersion.Five)&&d.wc(12,42,e.favoritesPinned$)),d.Ib(4),d.Ob("cu2-views-bar_v6",(null==(r=d.wc(14,44,e.user$))?null:r.dashboard)===e.LayoutVersion.Six),d.Dc("tags",d.wc(15,46,e.project$)?d.wc(16,48,e.tagsMap$)[null==(s=d.wc(17,50,e.project$))?null:s.id]:d.wc(18,52,e.tagsTeamMap$)[null==(s=d.wc(19,54,e.team$))?null:s.id])("tagsLoading",d.wc(20,56,e.project$)?d.wc(21,58,e.tagsLoadingMap$)[null==(c=d.wc(22,60,e.project$))?null:c.id]:d.wc(23,62,e.tagsTeamLoadingMap$)[null==(c=d.wc(24,64,e.team$))?null:c.id])("project",d.wc(25,66,e.project$)),d.Ib(13),d.Dc("ngIf",d.wc(27,68,e.newHierarchyItemPrompt$)[null==(l=d.wc(28,70,e.selectedView$))||null==l.parent?null:l.parent.id]),d.Ib(3),d.Ob("cu-dashboard__router-outlet_v6",(null==(u=d.wc(30,72,e.user$))?null:u.dashboard)===e.LayoutVersion.Six),d.Dc("ngClass",d.Ic(94,jm,d.wc(31,74,e.viewLoad$),d.wc(32,76,e.isTeamSidebarOpen$))),d.Ib(4),d.Dc("ngIf",d.wc(34,78,e.isListView$)),d.Ib(2),d.Dc("ngIf",!d.wc(36,80,e.isListView$)),d.Ib(2),d.Dc("ngIf",d.wc(38,82,e.viewLoad$)),d.Ib(2),d.Dc("ngIf",d.wc(40,84,e.isTeamSidebarOpen$)&&!d.wc(41,86,e.isBlankView$)),d.Ib(3),d.Dc("ngIf",(null==(h=d.wc(43,88,e.team$))?null:h.role)!==e.UserRole.GUEST&&(d.wc(44,90,e.showOnboardingBubbles$)||e.showOnboarding)&&(null==d.wc(45,92,e.user$).onboarding_video_steps?null:d.wc(45,92,e.user$).onboarding_video_steps.length)!==e.onboardingSteps.length)}},directives:[fr,n.q,pg,n.o,fg.a,n.t,_g,yg,P.m,Fo.a,gm,km],pipes:[n.b],styles:[".cu-dashboard{width:100%;height:100%;overflow-x:hidden;display:grid;grid:1fr/auto 1fr 0}@media print{.cu-dashboard{height:auto}}.cu-dashboard__body{height:100%;min-width:0;min-height:0;display:flex;flex-direction:column;position:relative}.cu-dashboard__router-outlet{position:relative;flex-grow:1;min-height:0;height:0}@media print{.cu-dashboard__router-outlet{height:auto}}.cu-dashboard__router-outlet_team-sidebar-opened{transition:margin-right .3s cubic-bezier(.785,.135,.15,.86) 0s;margin-right:55px}.cu-dashboard__router-outlet_team-sidebar-opened.cu-dashboard__router-outlet_v6{margin-right:243px}"],encapsulation:2,data:{animation:[oo.a,oo.e,oo.g]},changeDetection:0}),t})();var Em=i("cp0P"),Nm=i("0btJ");const Am=P.l.forChild([{path:"",component:Lm,canActivate:[(()=>{class t{constructor(t,e){this.sharedData=t,this.store=e}canActivate(t,e){let i=t.queryParams.p||null,n=t.queryParams.c||null,o=t.queryParams.s||null;const a=["/",this.sharedData.compatCurrentTeam?this.sharedData.compatCurrentTeam.id:"","v"];return o&&o!==E.a?a.push($.d.Subcategory,o):n&&n!==E.a?a.push($.d.Category,n):i&&i!==E.a&&a.push($.d.Project,i),5===a.length?(this.store.dispatch(new Xn.d({path:a})),!1):("true"===t.queryParams.showArchived&&this.store.dispatch(new Y.wl(!1)),this.store.pipe(Object(K.select)(z.getTeam),Object(Yn.a)(),Object(ee.a)(this.store.select(z.getQueryParams),this.store.select(eo.c),this.store.select(eo.f)),Object(Kn.a)(([t,e,i,n])=>this.getProjects$(t.role===H.f.GUEST).pipe(Object(Qt.a)(o=>[t,o,e,i,n]))),Object(Kn.a)(([t,e,i,n,o])=>this.getSharedData$(t.role===H.f.GUEST,t).pipe(Object(Qt.a)(a=>[t,e,i,n,o,a])))).pipe(Object(Kn.a)(([t,e,a,r,s,c])=>{i=a.p,n=a.c,o=a.s,e=e||[];const l=Object(E.Y)(e,t,i)||E.a;let u=null,d=Object(Zn.a)(null);return l!==E.a&&(u=e.find(t=>t.id===l),d=this.getCategories$(t.role===H.f.GUEST,l)),Object(Em.a)([d,this.store.pipe(Object(K.select)(z.isGuestTeam),Object(Yn.a)()),this.store.pipe(Object(K.select)(z.getSharedSpaceParam),Object(Yn.a)())]).pipe(Object(Qt.a)(([e,i,n])=>[l,e,i,n,t,u,r,s,c]))}),Object(Qt.a)(([e,i,r,s,c,l,u,d,h])=>{if(u.params&&(u.params.locationId||u.params.viewId))return!0;const{newCategoryId:p,newSubcategoryId:f}=Object(E.V)(l,i,n,o);i&&0!==i.length||!r&&!s||(e=E.a);const g=l&&!1===l.access;this.store.dispatch(new Y.dk(g,!1)),g&&"1"===localStorage.getItem(Nm.c)&&this.store.dispatch(new Y.fk(!0,!1));const m=Object.assign({p:null,c:null,s:null},Object(E.tb)({p:e,c:p,s:f}));c.role===H.f.GUEST?h&&h.subcategories&&1===h.subcategories.length?a.push("li",h.subcategories[0].id,h.subcategories[0].category):a.push("1"===localStorage.getItem(Nm.c)?$.d.TasksShared:$.d.SharedSpace,"1"===localStorage.getItem(Nm.c)?"1":"2"):m.s&&m.s!==E.a?a.push($.d.Subcategory,m.s):m.c&&m.c!==E.a?a.push($.d.Category,m.c):m.p&&m.p!==E.a||m.p&&m.p!==E.a?a.push($.d.Project,m.p):a.push($.d.Team,c.id),this.store.dispatch(new Y.Wj(Object.assign(Object.assign({},m),{checkRedirect:!0})));const v={};return t.queryParams&&t.queryParams.pendo&&(v.pendo=t.queryParams.pendo),this.store.dispatch(new Xn.d({path:a,query:v})),!1})))}getProjects$(t){return this.store.dispatch(new Y.Tf),this.store.dispatch(new Y.Uf),this.store.pipe(Object(K.select)(z.getAllProjectsOrNull),Object(Vi.a)(e=>!!e||t),Object(Yn.a)())}getSharedData$(t,e){return this.store.dispatch(new Y.Wf(e.id,"guard")),this.store.select(z.getSharedData).pipe(Object(Vi.a)(e=>!t||!!e),Object(Yn.a)())}getCategories$(t,e){return this.store.dispatch(new Y.Lf(e)),this.store.pipe(Object(K.select)(Object(z.getCategoriesByIdWithSharedLinear)(e))).pipe(Object(Vi.a)(t=>!!t),Object(Yn.a)())}}return t.\u0275fac=function(e){return new(e||t)(d.nc(Jn.a),d.nc(K.Store))},t.\u0275prov=d.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()],data:{isDashboard:!0},children:[{path:"l",loadChildren:()=>Promise.all([i.e(15),i.e(31),i.e(0),i.e(77)]).then(i.bind(null,"QvV3")).then(t=>t.DashboardTableRoutingModule),data:{title:"List",showSidebarContextInTitle:!0,isListView:!0}},{path:"b",loadChildren:()=>Promise.all([i.e(30),i.e(0),i.e(104)]).then(i.bind(null,"kgv9")).then(t=>t.DashboardBoardRoutingModule),data:{title:"Board",showSidebarContextInTitle:!0,isBoard:!0}},{path:"c",loadChildren:()=>Promise.all([i.e(0),i.e(92)]).then(i.bind(null,"+WGD")).then(t=>t.DashboardCalendarRoutingModule),data:{title:"Calendar",showSidebarContextInTitle:!0,isCalendar:!0}},{path:"m",loadChildren:()=>Promise.all([i.e(0),i.e(88)]).then(i.bind(null,"CBMk")).then(t=>t.DashboardMapRoutingModule),data:{title:"Map",showSidebarContextInTitle:!0,isMap:!0}},{path:"x",loadChildren:()=>Promise.all([i.e(0),i.e(86)]).then(i.bind(null,"xmXZ")).then(t=>t.DashboardBoxModule),data:{title:"Box",showSidebarContextInTitle:!0,isBox:!0,preload:!0}},{path:"g",loadChildren:()=>Promise.all([i.e(0),i.e(81)]).then(i.bind(null,"4bIY")).then(t=>t.DashboardGanttRoutingModule),data:{title:"Gantt",showSidebarContextInTitle:!0,isGantt:!0}},{path:"cn",loadChildren:()=>Promise.all([i.e(0),i.e(87)]).then(i.bind(null,"hzU7")).then(t=>t.DashboardConversationModule),data:{title:"Conversation",showSidebarContextInTitle:!0}},{path:"e",loadChildren:()=>Promise.all([i.e(0),i.e(94)]).then(i.bind(null,"zl6w")).then(t=>t.DashboardEmbedModule),data:{title:"Embed",showSidebarContextInTitle:!0}},{path:"dc",loadChildren:()=>Promise.all([i.e(17),i.e(32),i.e(40),i.e(93)]).then(i.bind(null,"1iWj")).then(t=>t.DashboardDocModule),data:{title:"Doc",showSidebarContextInTitle:!0}},{path:"fm",loadChildren:()=>Promise.all([i.e(15),i.e(18),i.e(76)]).then(i.bind(null,"HXUg")).then(t=>t.DashboardFormModule),data:{title:"Form",showSidebarContextInTitle:!0}},{path:"a",loadChildren:()=>i.e(85).then(i.bind(null,"9FTD")).then(t=>t.DashboardActivityModule),data:{title:"Activity",showSidebarContextInTitle:!0}},{path:"mm",loadChildren:()=>i.e(89).then(i.bind(null,"OThD")).then(t=>t.DashboardMindmapRoutingModule),data:{title:"Mind map",showSidebarContextInTitle:!0}},{path:"gr",loadChildren:()=>Promise.all([i.e(31),i.e(0),i.e(78)]).then(i.bind(null,"RXyh")).then(t=>t.DashboardGridRoutingModule),data:{title:"Grid",showSidebarContextInTitle:!0}},{path:"tl",loadChildren:()=>Promise.all([i.e(30),i.e(45),i.e(105)]).then(i.bind(null,"h3EX")).then(t=>t.DashboardTimelineRoutingModule),data:{title:"Timeline",showSidebarContextInTitle:!0,isTimeline:!0}},{path:"wl",loadChildren:()=>Promise.all([i.e(30),i.e(45),i.e(106)]).then(i.bind(null,"gsXF")).then(t=>t.DashboardWorkloadRoutingModule),data:{title:"Workload",showSidebarContextInTitle:!0,isWorkload:!0}},{path:":locationType/:locationId/:parentId",canActivate:[Qn],component:Fo.a,data:{determiningView:!0}},{path:":locationType/:locationId",canActivate:[Qn],component:Fo.a,data:{determiningView:!0}}]}]);var Vm=i("Vlmb"),zm=i("vi4T");let Fm=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,g.a,zm.a,b.LoaderModule,u.a]]}),t})();var Bm=i("mSrN"),Rm=i("8Sgp"),Um=i("Ylm9");let Gm=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,Rm.a,u.a,l.a,Um.a]]}),t})(),Hm=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})(),Wm=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,g.a,u.a,un.a,M.a]]}),t})(),qm=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,b.LoaderModule,u.a,l.a,Bn.b,Am,Wn.a,Hn.a,o.b,qn.a,h,Gn,Vm.a,Fm,T.a,Bm.a,Gm,Hm,Wm]]}),t})()},"8FmH":function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return u});var n=i("l7P3"),o=i("pugF"),a=i("eKZ6"),r=i("1rLx");const s="dashboardMapView",c={settings:{field_ids:[],sidebarWidth:300,color:r.a.Default},map_tasks:{},tasks:[],group:[],loading:!1,sidebarSettings:{loading:!1,sortBy:{field:"status",dir:a.a.Asc},searchText:null}},l=Object(n.createReducer)(c,Object(n.on)(o.e,(t,{color:e,field_ids:i,defaultMap:n,sidebarWidth:o})=>Object.assign(Object.assign({},t),{settings:{color:e,field_ids:i,sidebarWidth:o,defaultMap:n}})),Object(n.on)(o.a,(t,{update:e})=>Object.assign(Object.assign({},t),{map_tasks:Object.assign(Object.assign({},t.map_tasks),Object.keys(e).reduce((i,n)=>Object.assign(Object.assign({},i),{[n]:[...t.map_tasks[n]||[],...e[n]]}),{}))})),Object(n.on)(o.r,(t,{field:e})=>Object.assign(Object.assign({},t),{sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{sortBy:Object.assign(Object.assign({},t.sidebarSettings.sortBy),{field:e})})})),Object(n.on)(o.s,(t,{updates:e})=>Object.assign(Object.assign({},t),{settings:Object.assign(Object.assign({},t.settings),e)})),Object(n.on)(o.q,t=>Object.assign(Object.assign({},t),{sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{sortBy:Object.assign(Object.assign({},t.sidebarSettings.sortBy),{dir:t.sidebarSettings.sortBy.dir===a.a.Asc?a.a.Desc:a.a.Asc})})})),Object(n.on)(o.h,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(n.on)(o.k,(t,{settings:e})=>Object.assign(Object.assign({},t),{settings:Object.assign({},e)})),Object(n.on)(o.p,(t,{searchText:e})=>Object.assign(Object.assign({},t),{sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{searchText:e})})),Object(n.on)(o.f,t=>Object.assign(Object.assign({},t),{loading:!0,sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{loading:!0})})),Object(n.on)(o.g,t=>Object.assign(Object.assign({},t),{loading:!1,sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{loading:!1})})),Object(n.on)(o.l,(t,{groups:e})=>Object.assign(Object.assign({},t),{group:e})),Object(n.on)(o.m,(t,{mapTasks:e})=>Object.assign(Object.assign({},t),{map_tasks:e})),Object(n.on)(o.c,t=>Object.assign(Object.assign({},t),{loading:!1,sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{loading:!1})})),Object(n.on)(o.i,t=>Object.assign(Object.assign({},t),{sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{loading:!0})})),Object(n.on)(o.b,(t,{tasks:e})=>{const i=e.map(t=>t.id);return Object.assign(Object.assign({},t),{loading:!1,tasks:[...t.tasks.filter(t=>!i.includes(t.id)),...e],sidebarSettings:Object.assign(Object.assign({},t.sidebarSettings),{loading:!1})})}),Object(n.on)(o.o,(t,{tasks:e})=>Object.assign(Object.assign({},t),{tasks:e||[]})),Object(n.on)(o.n,(t,{width:e})=>Object.assign(Object.assign({},t),{settings:Object.assign(Object.assign({},t.settings),{sidebarWidth:e})})));function u(t,e){return l(t,e)}},EIuK:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return r});var n=i("lE2N");function o(t,e){return Object.assign(Object.assign({},t),{tags:Object(n.a)([...t.tags,e],"name")})}function a(t,e){return Object.assign(Object.assign({},t),{tags:t.tags.filter(t=>t.name!==e)})}function r(t,e){return t.tags&&t.tags.some(t=>t.name===e)}},Ev0y:function(t,e,i){"use strict";i.d(e,"j",function(){return h}),i.d(e,"g",function(){return p}),i.d(e,"h",function(){return f}),i.d(e,"i",function(){return g}),i.d(e,"r",function(){return b}),i.d(e,"s",function(){return _}),i.d(e,"m",function(){return w}),i.d(e,"q",function(){return y}),i.d(e,"p",function(){return k}),i.d(e,"c",function(){return S}),i.d(e,"d",function(){return T}),i.d(e,"e",function(){return D}),i.d(e,"o",function(){return P}),i.d(e,"k",function(){return M}),i.d(e,"l",function(){return O}),i.d(e,"b",function(){return $}),i.d(e,"f",function(){return j}),i.d(e,"a",function(){return L}),i.d(e,"n",function(){return E});var n=i("l7P3"),o=i("lE2N"),a=i("xWuZ"),r=i("IlGD"),s=i("c3rA"),c=i("YwDF");const l=[{title:$localize`:@@common_due-date:Due date`,name:"due_date",apiOrderBy:"dueDate"},{title:"Status",name:"status",apiOrderBy:"status"},{title:$localize`:@@common_strings:Priority`,name:"priority",apiOrderBy:"priority"},{title:$localize`:@@common_assignees:Assignees`,name:"assignees",apiOrderBy:"assignee"},{title:$localize`:@@common_name:Name`,name:"name",apiOrderBy:"name"},{title:$localize`:@@common_list-name:List name`,name:"subcategory",apiOrderBy:"subcategory"}];var u=i("8FmH");const d=Object(n.createFeatureSelector)(u.a),h=Object(n.createSelector)(d,t=>t.settings),p=Object(n.createSelector)(h,t=>t.defaultMap||{}),f=Object(n.createSelector)(p,t=>t.mapTypeId),g=Object(n.createSelector)(h,t=>t.color),m=Object(n.createSelector)(d,t=>t.map_tasks||[]),v=Object(n.createSelector)(d,t=>t.sidebarSettings),b=Object(n.createSelector)(v,t=>t.searchText),_=Object(n.createSelector)(v,t=>t.sortBy),w=Object(n.createSelector)(_,t=>l.find(e=>e.name===t.field)),y=Object(n.createSelector)(d,t=>t.loading),k=Object(n.createSelector)(d,t=>t.loading),x=Object(n.createSelector)(d,t=>t.group),S=Object(n.createSelector)(m,t=>Object.keys(t).reduce((e,i)=>{for(const n of t[i]||[])n&&e.push(n);return e},[])),T=Object(n.createSelector)(S,t=>t.map(t=>t.id)),C=Object(n.createSelector)(T,x,(t,e)=>e.map(e=>({id:e.id,taskIds:e.taskIds.filter(e=>!t.includes(e))}))),D=Object(n.createSelector)(C,t=>t.reduce((t,e)=>[...t,...e.taskIds],[])),I=Object(n.createSelector)(d,t=>t.tasks),P=Object(n.createSelector)(I,t=>{const e={};return t.forEach(t=>{e[t.id]=t}),e}),M=Object(n.createSelector)(P,C,(t,e)=>e.map(e=>({id:e.id,tasks:e.taskIds.filter(e=>t[e]).map(e=>t[e])}))),O=Object(n.createSelector)(M,t=>t.flatMap(t=>t.tasks)),$=Object(n.createSelector)(D,O,(t,e)=>t.length!==e.length),j=Object(n.createSelector)(I,t=>Object(o.a)(Object(a.a)(t.map(t=>t.customFields||[])),"id").filter(t=>r.e[t.type].hasColors&&t.type===c.a.Dropdown&&t.type_config.options.some(t=>!!t.color))),L=Object(n.createSelector)(s.getSharedTasksParam,s.getIsSharedSpaceOrGuest,(t,e)=>!t&&!e),E=Object(n.createSelector)(s.getSharedTasksParam,s.getIsSharedSpaceOrGuest,(t,e)=>{const i=["assignees","dependency_state","simple_statuses","subtasks_by_status","tags","customFields","totalTimeSpent","rolledUpTimeSpent","rolledUpTimeEstimate","rolledUpPointsEstimate","followers"];return t||e||i.push("statuses"),i})},Hf40:function(t,e,i){"use strict";i.d(e,"a",function(){return f});var n=i("A/Rp"),o=i("LEq2"),a=i("uFGp"),r=i("dTHz"),s=i("fXoL"),c=i("l7P3"),l=i("kRoH"),u=i("NsZK"),d=i("UdVN"),h=i("ofXK");const p=["previousView"];let f=(()=>{class t{constructor(t){this.store=t,this.isOriginalLayout=!1,this.excludeDays$=this.store.select(o.m),this.viewDate$=this.store.select(o.Z),this.view$=this.store.select(o.Y),this.viewPreferences$=this.store.select(o.bb),this.LayoutVersion=r.b}ngOnInit(){}setViewDate(t){this.store.dispatch(new n.ub({viewDate:t}))}onArrowLeft(t){Object(a.b)(t)&&this.previousView.nativeElement.click()}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(c.Store))},t.\u0275cmp=s.Qb({type:t,selectors:[["cu-calendar-view-previous"]],viewQuery:function(t,e){if(1&t&&s.jd(p,1),2&t){let t;s.Qc(t=s.rc())&&(e.previousView=t.first)}},hostAttrs:[1,"cu-calendar-view-previous"],hostVars:2,hostBindings:function(t,e){1&t&&s.qc("keyup.ArrowLeft",function(t){return e.onArrowLeft(t)},!1,s.Sc),2&t&&s.Ob("cu-calendar-view-previous_v2",e.isOriginalLayout)},inputs:{isOriginalLayout:"isOriginalLayout",layoutVersion:"layoutVersion"},decls:7,vars:13,consts:function(){let t;return t=$localize`:@@cu-calendar-view-previous__tooltip-msg_previous-left-arrow␟3d97af88e776fc5b39a8f3c0b761de723497d68d␟1589747607048824884:Previous (left arrow key)`,[["mwlCalendarPreviousView","","cuTooltip",t,1,"cu-calendar-view-previous__button",3,"view","viewDate","excludeDays","daysInWeek","viewDateChange"],["previousView",""],[3,"icon"]]},template:function(t,e){1&t&&(s.cc(0,"div",0,1),s.qc("viewDateChange",function(t){return e.setViewDate(t)}),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.vc(5,"async"),s.Xb(6,"div",2),s.bc()),2&t&&(s.Dc("view",s.wc(2,5,e.view$))("viewDate",s.wc(3,7,e.viewDate$))("excludeDays",s.wc(4,9,e.excludeDays$))("daysInWeek",s.wc(5,11,e.viewPreferences$).fourDayWeekView?4:null),s.Ib(6),s.Dc("icon",e.layoutVersion===e.LayoutVersion.Six?"angle-right-no-padding":"arrow-left-bold"))},directives:[l.n,u.a,d.a],pipes:[h.b],styles:[".cu-calendar-view-previous{height:24px;border-radius:12px;display:inline-flex;align-items:center;margin-right:6px;background:#fff;border:1px solid #e9ebf0}.dark-theme .cu-calendar-view-previous{background:#2b343b;border-color:#2b343b}.cu-calendar-view-previous_v2{height:30px;border-radius:15px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);margin-right:8px;border:0}.cu2-views-bar__options_v6 .cu-calendar-view-previous{width:24px;height:24px;margin-right:0;border:0;border-radius:6px;overflow:hidden;display:inline-flex;align-items:center;background:transparent}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-previous{background:transparent}.cu-calendar-view-previous__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;width:24px;height:24px;cursor:pointer;padding:7px 8px 7px 6px}.cu-calendar-view-previous__button:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-previous__button:hover{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-calendar-view-previous__button:hover{background-color:#f2f2f2;fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-previous__button:hover{background-color:#1e272e;fill:#abaeb0}.cu-calendar-view-previous_v2 .cu-calendar-view-previous__button{width:30px;height:30px;padding:10px 11px 10px 9px}.cu2-views-bar__options_v6 .cu-calendar-view-previous__button{padding:7px 6px 7px 8px;transform:rotate(180deg);fill:#7c828d}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-previous__button{fill:#abaeb0}"],encapsulation:2,changeDetection:0}),t})()},IKGe:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i("ofXK"),o=i("fXoL");let a=(()=>{class t{}return t.\u0275mod=o.Ub({type:t}),t.\u0275inj=o.Tb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()},JLDm:function(t,e,i){"use strict";i.d(e,"a",function(){return N});var n=i("fXoL"),o=i("o7Ov"),a=i("lJxs"),r=i("pLZG"),s=i("IzEk"),c=i("dTHz"),l=i("c3rA"),u=i("YwDF"),d=i("jJQC"),h=i("l7P3"),p=i("LdyQ"),f=i("MJvn"),g=i("n+1/"),m=i("ofXK"),v=i("UdVN"),b=i("3Pt+"),_=i("bFKe"),w=i("ugB3");let y=(()=>{class t{transform(t,e){return t&&e?t.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Vb({name:"cuLocationNameFilter",type:t,pure:!0}),t})();const k=["dropdown"],x=["searchInput"];function S(t,e){if(1&t){const t=n.dc();n.cc(0,"div",9),n.Xb(1,"div",10),n.cc(2,"input",11,12),n.qc("ngModelChange",function(e){return n.Uc(t),n.uc(4).searchText=e})("keydown.enter",function(){return n.Uc(t),n.uc(4).onSearchComplete()}),n.bc(),n.bc()}if(2&t){const t=n.uc(4);n.Ib(1),n.Dc("icon","cu2-search"),n.Ib(1),n.Dc("ngModel",t.searchText)}}function T(t,e){1&t&&(n.cc(0,"div",16),n.gc(1,17),n.bc())}function C(t,e){if(1&t){const t=n.dc();n.cc(0,"div",19),n.qc("click",function(){n.Uc(t);const i=e.$implicit;return n.uc(6).onSelected.emit(i)}),n.Xb(1,"div",20),n.dd(2),n.bc()}if(2&t){const t=e.$implicit,i=n.uc(6);n.Ob("selected",i.selectedFields?t.id===i.selectedFields[0]:null),n.Ib(1),n.Dc("icon","field-location"),n.Ib(1),n.fd(" ",t.name," ")}}function D(t,e){if(1&t&&(n.ac(0),n.bd(1,C,3,4,"div",18),n.vc(2,"cuLocationNameFilter"),n.Zb()),2&t){const t=n.uc(5);n.Ib(1),n.Dc("ngForOf",n.xc(2,2,t.locationFields,t.searchText))("ngForTrackBy",t.trackById)}}function I(t,e){if(1&t&&(n.cc(0,"div",13),n.bd(1,T,2,0,"div",14),n.cc(2,"div",15),n.bd(3,D,3,5,"ng-container",5),n.bc(),n.bc()),2&t){const t=n.uc(4);n.Ib(1),n.Dc("ngIf",t.locationFields.length),n.Ib(2),n.Dc("ngIf",t.locationFields.length)}}function P(t,e){1&t&&(n.cc(0,"div",21),n.cc(1,"div",16),n.gc(2,22),n.bc(),n.bc())}function M(t,e){if(1&t&&(n.ac(0),n.bd(1,S,4,2,"div",6),n.bd(2,I,4,2,"div",7),n.bd(3,P,3,0,"div",8),n.vc(4,"cuLocationNameFilter"),n.Zb()),2&t){const t=n.uc(3);n.Ib(1),n.Dc("ngIf",t.locationFields.length),n.Ib(1),n.Dc("ngIf",t.locationFields.length),n.Ib(1),n.Dc("ngIf",t.searchText&&!n.xc(4,3,t.locationFields,t.searchText).length)}}function O(t,e){if(1&t){const t=n.dc();n.ac(0),n.cc(1,"cu-create-custom-field-form",23),n.qc("cancel",function(){return n.Uc(t),n.uc(3).closeAddField()})("save",function(e){return n.Uc(t),n.uc(3).newFieldCreated(e)}),n.vc(2,"async"),n.vc(3,"async"),n.bc(),n.Zb()}if(2&t){const t=n.uc(3);n.Ib(1),n.Dc("entity",n.wc(2,7,t.entity$))("createNewTypeOnly",!0)("createNewType",t.createNewType)("isInlineForm",!1)("addCreatedColumn",!1)("forTaskListHeader",!0)("notBusinessPlus",n.wc(3,9,t.notBusinessPlus$))}}function $(t,e){if(1&t&&(n.ac(0),n.bd(1,M,5,6,"ng-container",5),n.bd(2,O,4,11,"ng-container",5),n.Zb()),2&t){const t=n.uc(2);n.Ib(1),n.Dc("ngIf",!t.showCreateCustomField&&t.locationFields.length),n.Ib(1),n.Dc("ngIf",!(t.locationFields.length&&!t.showCreateCustomField))}}function j(t,e){if(1&t){const t=n.dc();n.ac(0),n.cc(1,"button",31),n.qc("click",function(){return n.Uc(t),n.uc(3).enableCustomFieldsClickapp()}),n.gc(2,32),n.bc(),n.Zb()}}function L(t,e){if(1&t&&(n.ac(0),n.cc(1,"div",15),n.cc(2,"div",24),n.Xb(3,"img",25),n.cc(4,"div",26),n.gc(5,27),n.bc(),n.bd(6,j,3,0,"ng-container",5),n.vc(7,"async"),n.vc(8,"async"),n.cc(9,"div",28),n.mc(10,29),n.Xb(11,"a",30),n.jc(),n.bc(),n.bc(),n.bc(),n.Zb()),2&t){const t=n.uc(2);let e=null;n.Ib(6),n.Dc("ngIf",(null==(e=n.wc(7,1,t.team$))?null:e.role)===t.UserRole.ADMIN||n.wc(8,3,t.team$).role===t.UserRole.OWNER)}}function E(t,e){if(1&t&&(n.cc(0,"div",4),n.bd(1,$,3,2,"ng-container",5),n.vc(2,"async"),n.bd(3,L,12,5,"ng-container",5),n.vc(4,"async"),n.bc()),2&t){const t=n.uc();let e=null,i=null;n.Ib(1),n.Dc("ngIf",null==(e=n.wc(2,2,t.projectFeatures$))||null==e.custom_fields?null:e.custom_fields.enabled),n.Ib(2),n.Dc("ngIf",!(null!=(i=n.wc(4,4,t.projectFeatures$))&&null!=i.custom_fields&&i.custom_fields.enabled))}}let N=(()=>{class t{constructor(t){this.store=t,this.locationFields=[],this.onSelected=new n.o,this.onCreateLocation=new n.o,this.trackById=Object(d.d)("id"),this.notBusinessPlus$=this.store.select(l.getIsBusinessOrEnterprisePlan).pipe(Object(a.a)(t=>!t)),this.showCreateCustomField=!1,this.entity$=this.store.select(l.getCurrentHierarchyEntity),this.createNewType=u.a.Location,this.projectFeatures$=this.store.select(l.getProjectFeatures),this.project$=this.store.select(l.getProject),this.isAdmin$=this.store.select(l.getIsAdmin),this.team$=this.store.select(l.getTeam),this.UserRole=c.f}ngOnInit(){}open(){this.dropdown.open()}close(){this.dropdown.close()}onSearchComplete(){if(this.searchText){const t=this.locationFields.find(t=>t.name.toLowerCase()===this.searchText.toLocaleLowerCase());t?this.onSelected.emit(t):this.onCreateLocation.emit(this.searchText)}}focusSearch(){this.searchInput&&setTimeout(()=>{this.searchInput.nativeElement.focus()},100)}closeAddField(){this.showCreateCustomField=!1,this.close()}newFieldCreated(t){this.onSelected.emit(t.field),this.showCreateCustomField=!1,this.close()}enableCustomFieldsClickapp(){this.project$.pipe(Object(r.a)(t=>!!t),Object(s.a)(1)).subscribe(t=>{this.store.dispatch(new o.ym({id:t.id,data:{features:Object.assign(Object.assign({},t.features),{custom_fields:{enabled:!0}})}}))})}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(h.Store))},t.\u0275cmp=n.Qb({type:t,selectors:[["cu-select-or-create-location-cf-dropdown"]],viewQuery:function(t,e){if(1&t&&(n.jd(k,3),n.jd(x,3)),2&t){let t;n.Qc(t=n.rc())&&(e.dropdown=t.first),n.Qc(t=n.rc())&&(e.searchInput=t.first)}},hostAttrs:[1,"cu-select-or-create-location-cf-dropdown"],inputs:{locationFields:"locationFields",selectedFields:"selectedFields"},outputs:{onSelected:"onSelected",onCreateLocation:"onCreateLocation"},decls:4,vars:5,consts:function(){let t,e,i,n,o,a,r;return t=$localize`:@@cu-select-or-create-location-cf-dropdown__form-placeholder_search-or-create␟705148e9732510603e37d0265f71d60264f6c8cc␟2136317043850234357:Search or create`,e=$localize`:@@cu-select-or-create-location-cf-dropdown__location-fields␟7244c05aa8b2a2df570a79885bf0368eecf823ed␟2583152405032514237: Location Fields `,i=$localize`:@@common_no-results␟4df41f7f554e7ec50d54e234cf6a42521bf98db7␟3166378250698646227: No Results `,n=$localize`:@@cu-select-or-create-location-cf-dropdown__btn-txt_add-location␟c74facc0baeeac867451dcc6014bfc2bd7ea2690␟3429765269839676766:Add Location`,o=$localize`:@@cu-select-or-create-location-cf-dropdown__enable-cf-notice␟74ab26a78f54b6b15310765af7c607880be3c524␟6827519131426524311: Enable Custom Fields to use Map View. `,a=$localize`:@@cu-select-or-create-location-cf-dropdown__learn-more␟9b06db07e788803be507bb22e502dbff61639ccb␟1444668890988856623: or ${"\ufffd#11\ufffd"}:START_LINK:Learn more${"\ufffd/#11\ufffd"}:CLOSE_LINK:`,r=$localize`:@@common_enable␟db46cf70a8ab85efe599d5000569f3d3f63294c6␟9072009322399250697: Enable `,[["cuDropdown","",1,"cu-select-or-create-location-cf-dropdown__inner","cu-dropdown_left",3,"dropdownPreventDocumentScroll","dropdownCloseOnInsideClick","dropdownCloseOnModal","dropdownPlacement","dropdownRepositionFlag","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-select-or-create-location-cf-dropdown__toggle"],["class","cu-select-or-create-location-cf-dropdown__menu",4,"cuDropdownMenu"],[1,"cu-select-or-create-location-cf-dropdown__menu"],[4,"ngIf"],["class","cu-select-or-create-location-cf-dropdown__search",4,"ngIf"],["class","filter-list filter-list_saved-filters",3,"perfectScrollbar",4,"ngIf"],["class","filter-list filter-list_saved-filters",4,"ngIf"],[1,"cu-select-or-create-location-cf-dropdown__search"],[1,"cu-select-or-create-location-cf-dropdown__search-icon",3,"icon"],["placeholder",t,3,"ngModel","ngModelChange","keydown.enter"],["searchInput",""],[1,"filter-list","filter-list_saved-filters",3,"perfectScrollbar"],["class","filter-list__header",4,"ngIf"],[1,"filter-list__body"],[1,"filter-list__header"],e,["class","filter-list__item",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-list__item",3,"click"],[1,"cu-custom-fields__list-item-icon",3,"icon"],[1,"filter-list","filter-list_saved-filters"],i,["createButtonText",n,3,"entity","createNewTypeOnly","createNewType","isInlineForm","addCreatedColumn","forTaskListHeader","notBusinessPlus","cancel","save"],[1,"cu-edit-form-fields-list__cf-disabled"],["src","./assets/images/illustrations/cf-forms-placeholder.svg","alt",""],[1,"cu-edit-form-fields-list__cf-disabled-text"],o,[1,"cu-edit-form-fields-list__cf-disabled-link"],a,["href","https://docs.clickup.com/en/articles/2310503-custom-fields","target","_blank"],[1,"cu-btn",3,"click"],r]},template:function(t,e){1&t&&(n.cc(0,"div",0,1),n.qc("dropdownOpen",function(){return e.focusSearch()}),n.Xb(2,"div",2),n.bd(3,E,5,6,"div",3),n.bc()),2&t&&n.Dc("dropdownPreventDocumentScroll",!1)("dropdownCloseOnInsideClick",!1)("dropdownCloseOnModal",!0)("dropdownPlacement","bottom")("dropdownRepositionFlag",e.showCreateCustomField)},directives:[p.b,f.a,g.a,m.q,v.a,b.c,b.p,b.s,_.a,m.p,w.a],pipes:[m.b,y],styles:['.cu-select-or-create-location-cf-dropdown,.cu-select-or-create-location-cf-dropdown__inner{width:100%;height:100%}.cu-select-or-create-location-cf-dropdown__search{height:40px;display:flex;align-items:center;background-color:#fafbfc;border-bottom:1px solid #e9ebf0;padding:0 13px}.dark-theme .cu-select-or-create-location-cf-dropdown__search{border-color:#1e272e}.cu-select-or-create-location-cf-dropdown__search-icon{width:13px;height:13px;fill:#b9bec7;margin-right:12px}.cu-select-or-create-location-cf-dropdown__search input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;background-color:transparent;border:0;box-shadow:none!important;width:100%}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-select-or-create-location-cf-dropdown__search input{font-family:var(--global-font-support)}}.dark-theme .cu-select-or-create-location-cf-dropdown__search{background-color:#2b343b}.cu-select-or-create-location-cf-dropdown__toggle{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.cu-select-or-create-location-cf-dropdown__toggle:hover .cu-select-or-create-location-cf-dropdown__save{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-select-or-create-location-cf-dropdown__toggle:hover .cu-select-or-create-location-cf-dropdown__save{fill:var(--theme-main-color)}}.cu-select-or-create-location-cf-dropdown__save{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#c4c4c4;width:14px;height:14px}.dark-theme .cu-select-or-create-location-cf-dropdown__save{fill:#828588}.cu-select-or-create-location-cf-dropdown__menu .cu-create-custom-field-form{width:500px;display:block;padding:20px}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled{font-family:Gotham Pro,Proxima Nova,arial,serif;width:150px;margin:20px auto;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled{font-family:var(--global-font-support)}}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled img{width:105px;height:auto;margin:0 auto 20px}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled-text{font-weight:500;font-size:11px;line-height:1.2;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#292d34;padding-bottom:10px}.dark-theme .cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled-text{color:#d5d6d7}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled .cu-btn{font-weight:500;font-size:12px;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:98px;height:28px;margin-bottom:10px}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled-link{font-weight:400;font-size:11px;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#292d34}.dark-theme .cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled-link{color:#d5d6d7}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled-link a{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:var(--theme-main-color);cursor:pointer;border-bottom:1px dotted var(--theme-main-color)}.cu-select-or-create-location-cf-dropdown__menu .cu-edit-form-fields-list__cf-disabled-link a:hover{color:var(--theme-main-color-dark);border-color:var(--theme-main-color-dark)}'],encapsulation:2,changeDetection:0}),t})()},JXFF:function(t,e,i){"use strict";i.d(e,"g",function(){return o}),i.d(e,"v",function(){return a}),i.d(e,"p",function(){return r}),i.d(e,"h",function(){return s}),i.d(e,"s",function(){return c}),i.d(e,"u",function(){return l}),i.d(e,"r",function(){return u}),i.d(e,"t",function(){return d}),i.d(e,"q",function(){return h}),i.d(e,"o",function(){return p}),i.d(e,"l",function(){return f}),i.d(e,"d",function(){return g}),i.d(e,"A",function(){return m}),i.d(e,"j",function(){return v}),i.d(e,"B",function(){return b}),i.d(e,"m",function(){return _}),i.d(e,"b",function(){return w}),i.d(e,"a",function(){return y}),i.d(e,"e",function(){return k}),i.d(e,"f",function(){return x}),i.d(e,"n",function(){return S}),i.d(e,"y",function(){return T}),i.d(e,"z",function(){return C}),i.d(e,"c",function(){return D}),i.d(e,"x",function(){return I}),i.d(e,"i",function(){return P}),i.d(e,"w",function(){return M}),i.d(e,"k",function(){return O});var n=i("l7P3");const o=Object(n.createAction)("[MINDMAP VIEW] Load Mindmap data",Object(n.props)()),a=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap view",Object(n.props)()),r=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap loading",Object(n.props)()),s=Object(n.createAction)("[MINDMAP VIEW] Load Mindmap Node",Object(n.props)()),c=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap tasks",Object(n.props)()),l=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap tasks map",Object(n.props)()),u=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap task ids",Object(n.props)()),d=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap tasks loading",Object(n.props)()),h=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap subcategories",Object(n.props)()),p=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap expanded",Object(n.props)()),f=Object(n.createAction)("[MINDMAP VIEW] Rename Mindmap node",Object(n.props)()),g=Object(n.createAction)("[MINDMAP VIEW] Delete Mindmap node",Object(n.props)()),m=Object(n.createAction)("[MINDMAP VIEW] Update Task",Object(n.props)()),v=Object(n.createAction)("[MINDMAP VIEW] Move Task",Object(n.props)()),b=Object(n.createAction)("[MINDMAP VIEW] Update Tasks state",Object(n.props)()),_=Object(n.createAction)("[MINDMAP VIEW] Set Adding to",Object(n.props)()),w=Object(n.createAction)("[MINDMAP VIEW] Create task",Object(n.props)()),y=Object(n.createAction)("[MINDMAP VIEW] Create custom node",Object(n.props)()),k=Object(n.createAction)("[MINDMAP VIEW] Delete task",Object(n.props)()),x=Object(n.createAction)("[MINDMAP VIEW] Delete task state",Object(n.props)()),S=Object(n.createAction)("[MINDMAP VIEW] Set Mindmap custom nodes",Object(n.props)()),T=Object(n.createAction)("[MINDMAP VIEW] Update custom nodes",Object(n.props)()),C=Object(n.createAction)("[MINDMAP VIEW] Update custom nodes state",Object(n.props)()),D=Object(n.createAction)("[MINDMAP VIEW] Delete custom node",Object(n.props)()),I=Object(n.createAction)("[MINDMAP VIEW] Undo delete custom node",Object(n.props)()),P=Object(n.createAction)("[MINDMAP VIEW] Load Subtasks",Object(n.props)()),M=Object(n.createAction)("[MINDMAP VIEW] Set Paywall",Object(n.props)()),O=Object(n.createAction)("[MINDMAP VIEW] Reload tasks",Object(n.props)());Object(n.union)({loadMindmapData:o,setMindmapView:a,setMindmapLoading:r,loadMindmapNode:s,setMindmapTasks:c,setMindmapSubcategories:h,setMindmapExpanded:p,setMindmapTaskIds:u,setMindmapTasksMap:l,renameMindmapNode:f,deleteMindmapNode:g,updateTask:m,moveTask:v,updateTasksState:b,setAddingTo:_,createTask:w,deleteTask:k,deleteTaskState:x,createCustomNode:y,setMindmapCustomNodes:S,updateCustomNodes:T,updateCustomNodesState:C,deleteCustomNode:D,undoDeleteCustomNode:I,loadSubtasks:P,setPaywall:M,reloadTasks:O})},JtyI:function(t,e,i){"use strict";i.d(e,"a",function(){return x});var n=i("kRoH"),o=i("LEq2"),a=i("A/Rp"),r=i("c3rA"),s=i("fXoL"),c=i("l7P3"),l=i("ofXK"),u=i("LdyQ"),d=i("MJvn"),h=i("n+1/"),p=i("f0Wu"),f=i("jJQC"),g=i("UdVN");function m(t,e){if(1&t){const t=s.dc();s.cc(0,"div",6),s.qc("click",function(i){s.Uc(t);const n=e.$implicit;return s.uc().changeMonth(i,n.number)}),s.dd(1),s.bc()}if(2&t){const t=e.$implicit,i=s.uc();s.Ob("active",t.number===i.activeDate.month),s.Ib(1),s.fd(" ",t.label," ")}}let v=(()=>{class t{constructor(){this.viewDateChange=new s.o,this.months=Array.from(Array(12).keys()).map((t,e)=>({number:e,label:p().startOf("year").add(e,"months").format("MMM")})),this.trackByNumber=Object(f.d)("number")}ngOnChanges(t){if(t.viewDate){const t=p(this.viewDate);this.activeDate={month:t.month(),year:t.year()}}}changeYear(t,e){t.stopPropagation(),this.viewDateChange.emit(p(this.viewDate).year(e).toDate())}changeMonth(t,e){t.stopPropagation(),this.viewDateChange.emit(p(this.viewDate).month(e).toDate())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Qb({type:t,selectors:[["cu-calendar-month-picker"]],inputs:{viewDate:"viewDate"},outputs:{viewDateChange:"viewDateChange"},features:[s.Gb],decls:7,vars:3,consts:[[1,"cu-dashboard-time__month-picker__header"],["icon","angle-left",1,"cu-dashboard-time__month-picker__header__button-prev",3,"click"],[1,"cu-dashboard-time__month-picker__header__year"],["icon","angle-right",1,"cu-dashboard-time__month-picker__header__button-next",3,"click"],[1,"cu-dashboard-time__month-picker__body"],["class","cu-dashboard-time__month-picker__body__month",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-dashboard-time__month-picker__body__month",3,"click"]],template:function(t,e){1&t&&(s.cc(0,"div",0),s.cc(1,"div",1),s.qc("click",function(t){return e.changeYear(t,e.activeDate.year-1)}),s.bc(),s.cc(2,"div",2),s.dd(3),s.bc(),s.cc(4,"div",3),s.qc("click",function(t){return e.changeYear(t,e.activeDate.year+1)}),s.bc(),s.bc(),s.cc(5,"div",4),s.bd(6,m,2,3,"div",5),s.bc()),2&t&&(s.Ib(3),s.fd(" ",e.activeDate.year," "),s.Ib(3),s.Dc("ngForOf",e.months)("ngForTrackBy",e.trackByNumber))},directives:[g.a,l.p],encapsulation:2}),t})();var b=i("VhLi");function _(t,e){if(1&t){const t=s.dc();s.cc(0,"div",7),s.cc(1,"cu-calendar-month-picker",8),s.qc("viewDateChange",function(e){return s.Uc(t),s.uc(2).setViewDate(e)}),s.vc(2,"async"),s.bc(),s.bc()}if(2&t){const t=s.uc(2);s.Ib(1),s.Dc("viewDate",s.wc(2,1,t.viewDate$))}}function w(t,e){if(1&t&&(s.cc(0,"span",3),s.cc(1,"span",4),s.cc(2,"span",5),s.dd(3),s.vc(4,"momentDate"),s.vc(5,"async"),s.bc(),s.cc(6,"span",5),s.dd(7),s.vc(8,"momentDate"),s.vc(9,"async"),s.bc(),s.bc(),s.bd(10,_,3,3,"div",6),s.bc()),2&t){const t=s.uc();s.Dc("dropdownCloseOnInsideClick",!1),s.Ib(3),s.fd("",s.xc(4,3,s.wc(5,6,t.viewDate$),"MMMM")," "),s.Ib(4),s.ed(s.xc(8,8,s.wc(9,11,t.viewDate$),"YYYY"))}}const y=function(t,e,i,n,o){return[t,e,"en",i,n,o]};function k(t,e){if(1&t&&(s.ac(0),s.dd(1),s.vc(2,"calendarDate"),s.vc(3,"async"),s.vc(4,"async"),s.vc(5,"async"),s.vc(6,"async"),s.vc(7,"async"),s.Zb()),2&t){const t=s.uc();s.Ib(1),s.fd(" ",s.Ac(2,1,s.Lc(18,y,s.wc(3,8,t.viewDate$),s.wc(4,10,t.view$)+"ViewTitle",s.wc(5,12,t.weekStartsOn$),s.wc(6,14,t.excludeDays$),s.wc(7,16,t.viewPreferences$).fourDayWeekView?4:null))," ")}}let x=(()=>{class t{constructor(t){this.store=t,this.isOriginalLayout=!1,this.CalendarView=n.h,this.viewDate$=this.store.select(o.Z),this.view$=this.store.select(o.Y),this.weekStartsOn$=this.store.select(r.getWeekStartsOn),this.excludeDays$=this.store.select(o.m),this.viewPreferences$=this.store.select(o.bb)}ngOnInit(){}setViewDate(t){this.store.dispatch(new a.ub({viewDate:t}))}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(c.Store))},t.\u0275cmp=s.Qb({type:t,selectors:[["cu-calendar-view-title"]],hostAttrs:[1,"cu-calendar-view-title"],hostVars:2,hostBindings:function(t,e){2&t&&s.Ob("cu-calendar-view-title_v2",e.isOriginalLayout)},inputs:{isOriginalLayout:"isOriginalLayout"},decls:6,vars:8,consts:[[1,"cu-calendar-view-title__view-label"],["class","cu-calendar-view-title__month-year cu-dropdown","cuDropdown","",3,"dropdownCloseOnInsideClick",4,"ngIf"],[4,"ngIf"],["cuDropdown","",1,"cu-calendar-view-title__month-year","cu-dropdown",3,"dropdownCloseOnInsideClick"],["cuDropdownToggle",""],[1,"cu-calendar-view-title__month-year-value"],["class","cu-dropdown__menu cu-dropdown__menu_left","style","width: 220px",4,"cuDropdownMenu"],[1,"cu-dropdown__menu","cu-dropdown__menu_left",2,"width","220px"],[3,"viewDate","viewDateChange"]],template:function(t,e){1&t&&(s.cc(0,"div",0),s.bd(1,w,11,13,"span",1),s.vc(2,"async"),s.bd(3,k,8,24,"ng-container",2),s.vc(4,"async"),s.vc(5,"async"),s.bc()),2&t&&(s.Ib(1),s.Dc("ngIf",s.wc(2,2,e.view$)===e.CalendarView.Month),s.Ib(2),s.Dc("ngIf",s.wc(4,4,e.view$)===e.CalendarView.Week||s.wc(5,6,e.view$)===e.CalendarView.Day))},directives:[l.q,u.b,d.a,h.a,v],pipes:[l.b,b.a,n.q],styles:[".cu-calendar-view-title:not(.cu-calendar-view-title_v2){margin:0 20px}.cu2-views-bar_v6 .cu-calendar-view-title{margin:0 0 0 5px}.cu-calendar-view-title__view-label{font:400 20px/1 Gotham Pro,Proxima Nova,arial,serif}.cu2-views-bar_v6 .cu-calendar-view-title__view-label{font:400 15px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-calendar-view-title__month-year.cu-dropdown_open .cu-calendar-view-title__month-year-value{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-title__month-year.cu-dropdown_open .cu-calendar-view-title__month-year-value{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-calendar-view-title__month-year-value{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;cursor:pointer;color:#343434;border-bottom:1px dashed #6a6a6a}.dark-theme .cu-calendar-view-title__month-year-value{color:#d5d6d7;border-bottom:1px dashed #828588}.cu-calendar-view-title__month-year-value:hover{color:#7b68ee;border-bottom-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-title__month-year-value:hover{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),t})()},LWF4:function(t,e,i){"use strict";i.d(e,"a",function(){return E});var n=i("9jGm"),o=i("l7P3"),a=i("pugF"),r=i("zp1y"),s=i("lJxs"),c=i("eIep"),l=i("CqXF"),u=i("IzEk"),d=i("5+tZ"),h=i("IAdc"),p=i("pLZG"),f=i("JIr8"),g=i("c3rA"),m=i("Ev0y"),v=i("XIp8"),b=i("xWuZ"),_=i("MguC"),w=i("EY2u"),y=i("Cfvw"),k=i("itXk"),x=i("LRne"),S=i("Gj5t"),T=i("Msbh"),C=i("m2rH"),D=i("o7Ov"),I=i("GkwO"),P=i("fXoL"),M=i("PSyB"),O=i("xog/");let $=(()=>{class t{constructor(t,e,i,o,u){this.actions$=t,this.store=e,this.dashboardMapStore=i,this.publicViewHelper=o,this.helpers=u,this.loadMapData$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.h),Object(r.a)(this.store.select(I.qb),this.store.select(I.G),this.store.select(g.getProject),this.store.select(g.getTeam),this.store.select(I.w),this.store.select(I.t),this.store.select(I.t),this.store.select(I.bb),this.dashboardMapStore.select(m.j)),Object(s.a)(([t,e,i,n,o,a,r,s,c,l])=>({payload:t,view:e,customFields:i,project:n,team:o,userIds:a,assignedComments:r,showUnassigned:s,subtasks:c,mapSettings:l})),Object(c.a)(({payload:t,view:e,customFields:i,project:n,team:o,userIds:r,showUnassigned:s,mapSettings:l})=>{if(!e)return w.a;if(e.viewType!==_.i.Map)return w.a;const{fetchTasks:u,freshReq:d}=t;return this.publicViewHelper.getPublicOrPrivateGenericView(Object(S.D)(Object.assign(Object.assign({},e),{grouping:{field:"none",dir:null,collapsed:[],ignore:!1},mapSettings:Object.assign({},l)}),i,!0,void 0,o),{assignees:e.meView?null:r,assignedComments:null,unassignedTasks:e.meView?null:s,firstPage:u,tops:u,includeEmpties:!0,includeArchived:!1,skipMaxLength:!0,belowParent:!1,showClosedSubtasks:!1,freshReq:d,fieldOrderIndex:void 0},n).pipe(Object(c.a)(t=>{const e=[Object(a.m)({mapTasks:t.map_tasks}),Object(a.o)({tasks:t.tasks||[]})];return t.map&&t.map.groups&&e.push(Object(a.l)({groups:t.map.groups.map((t,e)=>({id:e,taskIds:t.task_ids}))}),Object(a.f)()),e}))}))),this.updateSettings$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.s),Object(r.a)(this.dashboardMapStore.select(m.j),this.store.select(I.qb)),Object(c.a)(([t,e,i])=>{if(i&&i.id){const n=[],o=Object(v.a)(Object.assign(Object.assign({},e),t.updates));return n.push(new D.qm(i.id,{mapSettings:o},t.forceUpdate,!1,t.instantSave)),t.refresh&&n.push(a.h({fetchTasks:!0,fullReload:!0,freshReq:!1})),n}return[]}))),this.sidebarSearch$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.p),Object(c.a)(()=>this.getSidebarSearchGroups(!1).pipe(Object(c.a)(({groups:t,tasks:e})=>[a.l({groups:t.map((t,e)=>({id:e.toString(),taskIds:t.task_ids}))}),a.o({tasks:e})]))))),this.loadSidebar$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.f),Object(r.a)(this.dashboardMapStore.select(m.e)),Object(c.a)(([,t])=>this.getTasks(t,{pageSize:50,maxPages:1}).pipe(Object(s.a)(e=>({tasks:e,sidebarIds:t})))),Object(c.a)(t=>[a.b({tasks:t.tasks}),a.g()]))),this.restMapViewSettings$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.k),Object(l.a)(a.h({fetchTasks:!0,fullReload:!0,freshReq:!1})))),this.deleteTask$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.d),Object(s.a)(t=>new C.E([t.taskId])))),this.initialLoad$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.e),Object(l.a)(a.h({fetchTasks:!0,fullReload:!0,freshReq:!1})))),this.sortBy$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.q,a.r),Object(c.a)(()=>this.getSidebarSearchGroups(!1).pipe(Object(c.a)(({groups:t,tasks:e})=>[a.l({groups:t.map((t,e)=>({id:e.toString(),taskIds:t.task_ids}))}),a.o({tasks:e})]))))),this.resizeSidebar$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.t),Object(s.a)(t=>{const e=t.width,i={sidebarWidth:e};return e<270?i.sidebarWidth=270:e>390&&(i.sidebarWidth=390),t.save?a.s({updates:i,forceUpdate:!1}):a.n({width:i.sidebarWidth})}))),this.loadMoreSidebarTasks$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(a.i),Object(c.a)(()=>this.loadMoreSidebarTasks())))}getTasks(t,{pageSize:e=100,maxPages:i}={}){return this.store.select(m.n).pipe(Object(u.a)(1),Object(c.a)(n=>{const o=this.helpers.chunkArray([...t],e);return Object(y.a)(i?o.slice(0,i):o).pipe(Object(d.a)(t=>this.publicViewHelper.getTasks(t,{taskFields:n}),2),Object(h.a)(),Object(s.a)(b.a))}))}getSidebarSearchGroups(t=!1){return this.store.select(I.qb).pipe(Object(p.a)(t=>!!t&&t.viewType===_.i.Map),Object(u.a)(1),Object(r.a)(this.store.select(I.cb).pipe(Object(s.a)(t=>t||{userIds:[],assignedComments:!1,showUnassigned:!1})),this.store.select(I.G),this.store.select(g.getIsSharedSpaceParamSet),this.dashboardMapStore.select(m.s),this.dashboardMapStore.select(m.r),this.dashboardMapStore.select(m.m)),Object(c.a)(([e,i,n,o,a,r,l])=>{if(e.viewType!==_.i.Map)return w.a;const u=Object(S.D)(Object.assign(Object.assign({},e),{mapSettings:Object.assign(Object.assign({},e.mapSettings),{sidebar_only:!0})}),n,!0,o);return this.publicViewHelper.getPublicOrPrivateGenericView(Object.assign(Object.assign({},u),{filters:Object.assign(Object.assign({},u.filters),{search:r||u.filters.search}),grouping:Object.assign(Object.assign({},u.grouping),{field:null})}),{assignees:e.meView?null:i.userIds,assignedComments:e.meView?null:i.assignedComments,unassignedTasks:e.meView?null:i.showUnassigned,includeArchived:!1,skipMaxLength:!0,freshReq:t},null,!1,{sorting:{fields:[Object.assign(Object.assign({},Object(S.Bb)(a)),{field:l.apiOrderBy})]}}).pipe(Object(c.a)(t=>{const e=t.map.groups.flatMap(t=>t.task_ids);return this.getTasks(e,{pageSize:T.a}).pipe(Object(s.a)(e=>({groups:t.map.groups,tasks:e})))}))}))}loadMoreSidebarTasks(){return Object(k.a)([this.dashboardMapStore.select(m.e),this.dashboardMapStore.select(m.o)]).pipe(Object(u.a)(1),Object(c.a)(([t,e])=>{const i=t.filter(t=>!e[t]).slice(0,50);return this.getTasks(i,{pageSize:50,maxPages:1}).pipe(Object(s.a)(t=>a.b({tasks:t})),Object(f.a)(t=>Object(x.a)(a.c())))}))}}return t.\u0275fac=function(e){return new(e||t)(P.nc(n.a),P.nc(o.Store),P.nc(o.Store),P.nc(M.a),P.nc(O.b))},t.\u0275prov=P.Sb({token:t,factory:t.\u0275fac}),t})();var j=i("rsiN"),L=i("8FmH");let E=(()=>{class t{}return t.\u0275mod=P.Ub({type:t}),t.\u0275inj=P.Tb({factory:function(e){return new(e||t)},providers:[j.a],imports:[[o.StoreModule.forFeature(L.a,L.b),n.b.forFeature([$])]]}),t})()},LoqN:function(t,e,i){"use strict";i.d(e,"a",function(){return ft});var n=i("fXoL"),o=i("XNiG"),a=i("l7P3"),r=i("BR3F"),s=i("QKYr"),c=i("c3rA"),l=i("pLZG"),u=i("lJxs"),d=i("/uUt"),h=i("IzEk"),p=i("cs9d"),f=i("qJCC"),g=i("v7a3"),m=i("jJQC"),v=i("f0Wu"),b=i("dTHz"),_=i("GkwO"),w=i("o7Ov"),y=i("8it8"),k=i("RdFi"),x=i("ofXK"),S=i("O5gs"),T=i("NsZK"),C=i("UdVN"),D=i("LdyQ"),I=i("MJvn"),P=i("n+1/"),M=i("OBnU"),O=i("uslN"),$=i("D1cy"),j=i("tyNb"),L=i("3Pt+");const E=["fileNameInput"];function N(t,e){if(1&t&&n.Yb(0,3),2&t){n.uc();const t=n.Rc(3);n.Dc("ngTemplateOutlet",t)}}function A(t,e){if(1&t&&n.Yb(0,3),2&t){n.uc();const t=n.Rc(5);n.Dc("ngTemplateOutlet",t)}}const V=function(t){return["/",t,"settings","billing"]};function z(t,e){if(1&t&&(n.cc(0,"div",4),n.cc(1,"div",5),n.gc(2,6),n.bc(),n.cc(3,"div",7),n.gc(4,8),n.bc(),n.cc(5,"a",9),n.gc(6,10),n.bc(),n.bc()),2&t){const t=n.uc();n.Ib(5),n.Dc("routerLink",n.Hc(1,V,null==t.team?null:t.team.id))}}function F(t,e){1&t&&(n.cc(0,"div",12),n.cc(1,"div",20),n.gc(2,21),n.bc(),n.bc())}function B(t,e){if(1&t){const t=n.dc();n.cc(0,"div",11),n.cc(1,"div",12),n.cc(2,"div",13),n.gc(3,14),n.bc(),n.cc(4,"input",15,16),n.qc("ngModelChange",function(e){return n.Uc(t),n.uc().fileName=e})("keyup.Enter",function(){return n.Uc(t),n.uc().submit()})("focus",function(){n.Uc(t);const e=n.uc();return e.fileName=e.fileName}),n.bc(),n.bc(),n.bd(6,F,3,0,"div",17),n.cc(7,"div",12),n.cc(8,"div",18),n.qc("click",function(){return n.Uc(t),n.uc().submit()}),n.gc(9,19),n.bc(),n.bc(),n.bc()}if(2&t){const t=n.uc();n.Ib(4),n.Dc("ngModel",t.fileName),n.Ib(2),n.Dc("ngIf",t.showWarning)}}let R=(()=>{class t{constructor(t){this.ganttUtilities=t,this.onClose=new n.o,this.onToggleFullscreen=new n.o,this.fileName=null,this.startedLoading=!1,this.TeamPlan=O.f,this.showWarning=!1}ngOnInit(){const t=v();this.fileName=`ClickUp-Gantt-${t.format("YYYY")}-${t.format("M")}-${t.format("D")}.pdf`,this.determineSize()}submit(){this.isFullScreen&&this.onToggleFullscreen.emit(),this.startedLoading=!0;const t=document.querySelector(".cu-gantt__chart"),e=document.querySelector(".cu-gantt__chart-container");this.ganttUtilities.prepareGanttForPdf(e,this.preferences,this.user.dark_theme),this.ganttUtilities.saveGanttAsPdf(t,this.fileName,this.preferences,Object(g.l)(this.hierarchies.concat(this.tasks)),this.user.dark_theme),this.onClose.emit()}focus(){this.fileNameInput&&setTimeout(()=>{this.fileNameInput.nativeElement.focus(),this.fileNameInput.nativeElement.select()},0)}determineSize(){const t=p.gantt.getSubtaskDates();let e=v(t.start_date).subtract(1,"days"),i=v(t.end_date).add(3,"days"),n=i.diff(e,"days");this.preferences.viewSettings.dateScale===f.b.Hour&&(e=v(t.start_date).subtract(1,"hours"),i=v(t.end_date).add(3,"hours"),n=i.diff(e,"hours"));const o=p.gantt.getVisibleTaskCount(),a=Object(g.d)(n,o,$.e.minColumnWidth[this.preferences.v2.viewSettings.dateScale],$.e.rowHeight);"a0"!==a&&"b0"!==a&&"c0"!==a||(this.showWarning=!0)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(k.a))},t.\u0275cmp=n.Qb({type:t,selectors:[["cu-gantt-export-menu"]],viewQuery:function(t,e){if(1&t&&n.jd(E,1),2&t){let t;n.Qc(t=n.rc())&&(e.fileNameInput=t.first)}},hostAttrs:[1,"cu-gantt-export-menu"],inputs:{view:"view",hierarchies:"hierarchies",tasks:"tasks",preferences:"preferences",team:"team",user:"user",isFullScreen:"isFullScreen"},outputs:{onClose:"onClose",onToggleFullscreen:"onToggleFullscreen"},decls:6,vars:2,consts:function(){let t,e,i,n,o,a,r;return t=$localize`:@@cu-gantt-export-menu__paywall-label_business-plan-feature␟1b6b32b3f028bc7e1c520412b902730856972ef2␟2390162076677532372:Business Plan Feature`,e=$localize`:@@cu-gantt-export-menu__paywall-text_business-plan-feature␟f14008068078df118fa493316fc8583f28911883␟2581784613688008673:Upgrade to get instant access to PDF exports.`,i=$localize`:@@cu-gantt-export-menu__paywall-text_upgrade-now␟658482e8f8a20e69a5a9d2419a9ef56470376d99␟767995344453445163:Upgrade Now`,n=$localize`:@@cu-gantt-export-menu__form-label_pdf-name␟4fc4f6d3d5cec7984b6372c8bb1fd167a13efb7c␟8779190095945081812:PDF Name`,o=$localize`:@@cu-gantt-export-menu__form-placeholder_enter-pdf-name␟1a3b51e3685909f1598fa4cb82615da3f728a7a1␟6681576908018221398:Enter PDF name`,a=$localize`:@@common_export␟5f19586aba912ec6eb123ec5ab609a3bcc073066␟7462301153729425254:Export`,r=$localize`:@@cu-gantt-export-menu__form-error_pdf-big␟810abde5055697163b34e79846cc1a8625e97177␟7825990964282982094: Your PDF is big! consider shortening your Gantt view. `,[[3,"ngTemplateOutlet",4,"ngIf"],["paywall",""],["pdf",""],[3,"ngTemplateOutlet"],[1,"cu-gantt-export-menu__paywall"],[1,"cu-gantt-export-menu__paywall-label"],t,[1,"cu-gantt-export-menu__paywall-text"],e,[1,"cu-gantt-export-menu__paywall-upgrade",3,"routerLink"],i,[1,"cu-gantt-export-menu__menu"],[1,"cu-gantt-export-menu__row"],[1,"cu-gantt-export-menu__row-header"],n,["type","text","placeholder",o,1,"cu-gantt-export-menu__row-input",3,"ngModel","ngModelChange","keyup.Enter","focus"],["fileNameInput",""],["class","cu-gantt-export-menu__row",4,"ngIf"],[1,"cu-gantt-export-menu__button",3,"click"],a,[1,"cu-gantt-export-menu__warning"],r]},template:function(t,e){1&t&&(n.bd(0,N,1,1,"ng-container",0),n.bd(1,A,1,1,"ng-container",0),n.bd(2,z,7,3,"ng-template",null,1,n.cd),n.bd(4,B,10,2,"ng-template",null,2,n.cd)),2&t&&(n.Dc("ngIf",(null==e.team?null:e.team.plan_id)===e.TeamPlan.FREE||(null==e.team?null:e.team.plan_id)===e.TeamPlan.UNLIMITED),n.Ib(1),n.Dc("ngIf",(null==e.team?null:e.team.plan_id)!==e.TeamPlan.FREE&&(null==e.team?null:e.team.plan_id)!==e.TeamPlan.UNLIMITED))},directives:[x.q,x.x,j.k,L.c,L.p,L.s],styles:['.cu-gantt-export-menu__menu{padding:6px 12px;width:230px;max-width:100%}.cu-gantt-export-menu__row{padding:6px 0}.cu-gantt-export-menu__row-header{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:11px;padding:0 0 12px;text-transform:uppercase}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__row-header{font-family:var(--global-font-support)}}.cu-gantt-export-menu__row-input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:12px;width:100%;border:1px solid #e9ebf0;box-shadow:none!important;background-color:transparent;padding:12px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__row-input{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-export-menu__row-input{border-color:#1e272e}.cu-gantt-export-menu__button{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;height:30px;width:80px;border-radius:4px;background-color:var(--theme-main-color);cursor:pointer;margin-left:auto;display:flex;align-items:center;justify-content:center;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__button{font-family:var(--global-font-support)}}.cu-gantt-export-menu__button:hover{background-color:var(--theme-main-color-dark)}.cu-gantt-export-menu .cu-btn__spinner{padding:0}.cu-gantt-export-menu .cu-btn__spinner div{background-color:#fff}.cu-gantt-export-menu__paywall{padding:12px;width:200px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}.cu-gantt-export-menu__paywall-label{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:11px;background:var(--theme-main-color);display:flex;align-items:center;color:#fff;height:18px;width:145px;border-radius:10px;padding:0 10px;position:absolute;top:-9px;justify-content:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__paywall-label{font-family:var(--global-font-support)}}.cu-gantt-export-menu__paywall-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:18px;color:#292d34;padding:10px 0;text-align:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__paywall-text{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-export-menu__paywall-text{color:#d5d6d7}.cu-gantt-export-menu__paywall-upgrade{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;height:30px;width:105px;border-radius:4px;background-color:var(--theme-main-color);cursor:pointer;display:flex;align-items:center;justify-content:center;color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__paywall-upgrade{font-family:var(--global-font-support)}}.cu-gantt-export-menu__paywall-upgrade:hover{background-color:var(--theme-main-color-dark)}.cu-gantt-export-menu__paywall-dropdown{overflow:visible}.cu-gantt-export-menu__warning{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:1.2;color:#fc0}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-export-menu__warning{font-family:var(--global-font-support)}}'],encapsulation:2,changeDetection:0}),t})();var U=i("iNWM"),G=i("fEov"),H=i("DkC/"),W=Object(G.a)(function(t,e,i){return t+(i?" ":"")+Object(H.a)(e)});let q=(()=>{class t{constructor(t){this.commonStringsService=t}transform(t){return t===f.d.StartDate?this.commonStringsService.startDateText:t===f.d.DueDate?this.commonStringsService.dueDateText:t===f.d.Name?$localize`:@@common_name:Name`:W(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(y.a))},t.\u0275pipe=n.Vb({name:"ganttSortValue",type:t,pure:!0}),t})();const X=["exportMenu"];function Y(t,e){if(1&t){const t=n.dc();n.ac(0),n.cc(1,"div",8),n.qc("click",function(){return n.Uc(t),n.uc().goToToday()}),n.cc(2,"div",9),n.gc(3,10),n.bc(),n.bc(),n.Zb()}}function K(t,e){if(1&t&&(n.cc(0,"div",15),n.Xb(1,"div",16),n.cc(2,"div",17),n.gc(3,18),n.bc(),n.bc()),2&t){const t=n.uc(3);n.Ib(1),n.Dc("cuTooltip",null!=t.view&&t.view.locked?t.frozenViewToolTip:t.sortingText)}}function Z(t,e){if(1&t){const t=n.dc();n.cc(0,"div",19),n.cc(1,"div",20),n.qc("click",function(e){return n.Uc(t),n.uc(3).changeSortDirection(e)}),n.bc(),n.cc(2,"div",21),n.dd(3),n.vc(4,"ganttSortValue"),n.bc(),n.cc(5,"div",22),n.qc("click",function(e){return n.Uc(t),n.uc(3).clearSort(e)}),n.bc(),n.bc()}if(2&t){const t=n.uc(3);n.Ob("active",null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettingsUser?null:t.preferences.v2.viewSettingsUser.sortOn),n.Ib(1),n.Ob("active",null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettingsUser?null:t.preferences.v2.viewSettingsUser.sortOn)("rotate","desc"===(null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettingsUser?null:t.preferences.v2.viewSettingsUser.sortDirection)),n.Ib(2),n.ed(n.wc(4,7,null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettingsUser?null:t.preferences.v2.viewSettingsUser.sortValue))}}function J(t,e){if(1&t){const t=n.dc();n.cc(0,"cu-dropdown-list",12),n.qc("onSelect",function(e){return n.Uc(t),n.uc(2).sort(e.id)}),n.bd(1,K,4,1,"div",13),n.bd(2,Z,6,9,"div",14),n.bc()}if(2&t){const t=n.uc(2);n.Dc("title",t.sortingText)("items",t.sortItems)("autoClose",!0)("dropdownDisabled",null==t.view?null:t.view.locked),n.Ib(1),n.Dc("ngIf",!(null!=t.preferences&&null!=t.preferences.v2&&null!=t.preferences.v2.viewSettingsUser&&t.preferences.v2.viewSettingsUser.sortOn)),n.Ib(1),n.Dc("ngIf",null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettingsUser?null:t.preferences.v2.viewSettingsUser.sortOn)}}function Q(t,e){if(1&t&&n.Yb(0,23),2&t){n.uc(2);const t=n.Rc(11);n.Dc("ngTemplateOutlet",t)}}function tt(t,e){if(1&t&&(n.ac(0),n.bd(1,J,3,6,"cu-dropdown-list",11),n.bd(2,Q,1,1,"ng-container",5),n.Zb()),2&t){const t=n.uc();n.Ib(1),n.Dc("ngIf",!t.isPublic),n.Ib(1),n.Dc("ngIf",(null==t.user?null:t.user.dashboard)!==t.LayoutVersion.Six)}}function et(t,e){if(1&t&&n.Yb(0,23),2&t){n.uc();const t=n.Rc(13);n.Dc("ngTemplateOutlet",t)}}function it(t,e){if(1&t){const t=n.dc();n.cc(0,"div",43),n.cc(1,"div",44),n.dd(2),n.bc(),n.cc(3,"cu-toggle-switch",45),n.qc("onChange",function(){n.Uc(t);const i=e.$implicit;return n.uc(3).toggleViewSetting(i.id)}),n.bc(),n.bc()}if(2&t){const t=e.$implicit,i=n.uc(3);n.Ib(1),n.Dc("cuTooltip",t.tooltip),n.Ib(1),n.ed(t.title),n.Ib(1),n.Dc("checked",null==i.preferences||null==i.preferences.v2?null:i.preferences.v2.viewSettings[t.id])}}function nt(t,e){if(1&t&&(n.cc(0,"div"),n.cc(1,"div",36),n.cc(2,"div",37),n.gc(3,38),n.bc(),n.cc(4,"div",39),n.gc(5,40),n.bc(),n.bc(),n.cc(6,"div",41),n.bd(7,it,4,3,"div",42),n.bc(),n.bc()),2&t){const t=n.uc(2);n.ad("width",225,"px"),n.Ib(7),n.Dc("ngForOf",t.pathCalculationItems)("ngForTrackBy",t.trackById)}}function ot(t,e){if(1&t){const t=n.dc();n.cc(0,"div"),n.cc(1,"cu-gantt-export-menu",46,47),n.qc("onToggleFullscreen",function(){return n.Uc(t),n.uc(2).toggleFullScreen()})("onClose",function(){return n.Uc(t),n.uc(),n.Rc(8).close()}),n.vc(3,"async"),n.vc(4,"async"),n.vc(5,"async"),n.bc(),n.bc()}if(2&t){const t=n.uc(2);n.ad("width",200,"px"),n.Ib(1),n.Dc("hierarchies",n.wc(3,9,t.ganttHierarchies$))("tasks",n.wc(4,11,t.ganttTasks$))("view",t.view)("preferences",t.preferences)("team",t.team)("user",t.user)("isFullScreen",n.wc(5,13,t.ganttFullScreen$))}}function at(t,e){if(1&t){const t=n.dc();n.cc(0,"div",48),n.qc("click",function(){n.Uc(t);const e=n.uc(2);return e.shareView.emit(e.view)}),n.cc(1,"div",49),n.Xb(2,"div",50),n.cc(3,"div",51),n.gc(4,52),n.bc(),n.bc(),n.bc()}}function rt(t,e){if(1&t&&n.Yb(0,23),2&t){n.uc(2);const t=n.Rc(11);n.Dc("ngTemplateOutlet",t)}}function st(t,e){if(1&t&&n.Xb(0,"div",53),2&t){const t=n.uc(2);n.Dc("cuTooltip",null!=t.view&&t.view.locked?t.frozenViewToolTip:t.commonStringsService.viewSettingsText)}}function ct(t,e){1&t&&(n.ac(0),n.cc(1,"div",54),n.Xb(2,"div",55),n.cc(3,"div",56),n.gc(4,57),n.bc(),n.bc(),n.Zb())}function lt(t,e){if(1&t){const t=n.dc();n.ac(0),n.cc(1,"div",24),n.cc(2,"div",25),n.Xb(3,"div",26),n.bc(),n.bd(4,nt,8,4,"div",27),n.bc(),n.cc(5,"cu-dropdown-list",28),n.qc("onSelect",function(e){return n.Uc(t),n.uc().changeColor(e.id)}),n.Xb(6,"div",29),n.bc(),n.cc(7,"div",30,31),n.qc("dropdownOpen",function(){return n.Uc(t),n.uc().exportMenu.focus()}),n.cc(9,"div",32),n.Xb(10,"div",33),n.bc(),n.bd(11,ot,6,15,"div",27),n.bc(),n.bd(12,at,5,0,"div",34),n.bd(13,rt,1,1,"ng-container",5),n.cc(14,"cu-dropdown-list",28),n.qc("onSelect",function(e){return n.Uc(t),n.uc().toggleViewSetting(e.id)}),n.bd(15,st,1,1,"div",35),n.bd(16,ct,5,0,"ng-container",0),n.bc(),n.Zb()}if(2&t){const t=n.uc();n.Ib(1),n.Dc("dropdownCloseOnInsideClick",!1),n.Ib(2),n.Ob("active",(null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettings?null:t.preferences.v2.viewSettings.criticalPath)||(null==t.preferences||null==t.preferences.v2||null==t.preferences.v2.viewSettings?null:t.preferences.v2.viewSettings.showSlackTime)),n.Ib(2),n.Dc("title",t.colorSchemeText)("items",t.colorItems)("autoClose",!0)("dropdownDisabled",null==t.view?null:t.view.locked)("toggleModifier","bordered-middle"),n.Ib(1),n.Dc("cuTooltip",null!=t.view&&t.view.locked?t.frozenViewToolTip:t.colorSchemeText),n.Ib(1),n.Dc("dropdownCloseOnInsideClick",!1)("dropdownRightEdgePadding",10)("dropdownModifierClass","cu-gantt-export-menu__paywall-dropdown"),n.Ib(5),n.Dc("ngIf",t.canShareView&&(null==t.user?null:t.user.dashboard)!==t.LayoutVersion.Six),n.Ib(1),n.Dc("ngIf",(null==t.user?null:t.user.dashboard)===t.LayoutVersion.Six),n.Ib(1),n.Lb((null==t.user?null:t.user.dashboard)===t.LayoutVersion.Six?"cu2-views-bar__btn cu2-views-bar__btn_label":null),n.Dc("title",(null==t.user?null:t.user.dashboard)===t.LayoutVersion.Six?t.commonStringsService.showText:t.commonStringsService.viewSettingsText)("items",t.viewSettingsItems)("autoClose",!0)("dropdownDisabled",null==t.view?null:t.view.locked)("toggleModifier","cu-gantt-preferences__toggle-settings"),n.Ib(1),n.Dc("ngIf",(null==t.user?null:t.user.dashboard)!==t.LayoutVersion.Six),n.Ib(1),n.Dc("ngIf",(null==t.user?null:t.user.dashboard)===t.LayoutVersion.Six)}}function ut(t,e){if(1&t&&n.Yb(0,23),2&t){n.uc();const t=n.Rc(13);n.Dc("ngTemplateOutlet",t)}}function dt(t,e){if(1&t&&(n.Xb(0,"cu-filter-assignees",59),n.vc(1,"async"),n.vc(2,"async")),2&t){const t=n.uc(2);n.Dc("isMeView",n.wc(1,3,t.meView$))("userIds",n.wc(2,5,t.filteredUserIds$))("modifier","cu-filter-assignees_two-rows")}}function ht(t,e){if(1&t&&(n.bd(0,dt,3,7,"cu-filter-assignees",58),n.vc(1,"async")),2&t){const t=n.uc();let e=null;n.Dc("ngIf",!(null!=(e=n.wc(1,1,t.team$))&&e.personal_team))}}function pt(t,e){if(1&t){const t=n.dc();n.cc(0,"div",60),n.cc(1,"div",61),n.cc(2,"div",62),n.qc("click",function(){return n.Uc(t),n.uc().zoomToFit()}),n.vc(3,"async"),n.vc(4,"async"),n.bc(),n.bc(),n.cc(5,"div",63),n.cc(6,"div",64),n.qc("click",function(){return n.Uc(t),n.uc().toggleFullScreen()}),n.vc(7,"async"),n.bc(),n.bc(),n.bc()}if(2&t){const t=n.uc();n.Ib(2),n.Ob("active",n.wc(3,5,t.ganttZoomToFit$)),n.Dc("cuTooltip",n.wc(4,7,t.ganttZoomToFitText$)),n.Ib(4),n.Ob("active",n.wc(7,9,t.ganttFullScreen$))}}let ft=(()=>{class t{constructor(t,e,i){this.commonStringsService=t,this.store=e,this.ganttUtilities=i,this.shareView=new n.o,this.frozenViewToolTip=$localize`:@@common_unprotect-view-to-make-changes:Unprotect this view first to make changes`,this.colorSchemeText=$localize`:@@common_color-scheme:Color Scheme`,this.dateScaleText=$localize`:@@cu-gantt-preferences__date-scale:Date Scale`,this.sortingText=$localize`:@@common_sorting:Sorting`,this.team$=this.store.select(c.getTeam),this.meView$=this.store.select(_.R),this.filteredUserIds$=this.store.select(_.w),this.selectedDataView$=this.store.select(_.qb),this.filter$=this.selectedDataView$.pipe(Object(l.a)(t=>!!t),Object(u.a)(t=>t.filter)),this.showClosed$=this.filter$.pipe(Object(l.a)(t=>!!t),Object(u.a)(t=>t.showClosed)),this.ganttHierarchies$=this.store.pipe(Object(a.select)(s.d)),this.ganttTasks$=this.store.pipe(Object(a.select)(s.o)),this.ganttZoomToFit$=this.store.pipe(Object(a.select)(s.p)),this.ganttFullScreen$=this.store.pipe(Object(a.select)(s.c)),this.destroy$=new o.a,this.ganttZoomToFitText$=this.ganttZoomToFit$.pipe(Object(u.a)(t=>t?$localize`:@@cu-gantt-preferences__zoom-to-fit_active:Zoom to fit (active)`:$localize`:@@cu-gantt-preferences__zoom-to-fit:Zoom to fit`),Object(d.a)()),this.sortItems=[],this.colorItems=[],this.dateScaleItems=[],this.viewSettingsItems=[],this.pathCalculationItems=[],this.LayoutVersion=b.b,this.trackById=Object(m.d)("id")}ngOnChanges(t){t.preferences&&t.preferences.currentValue&&(this.updateSortItems(),this.updateColorItems(),this.updateDateScaleItems(),this.updateViewSettingsItems(),this.updatePathCalculationItems())}ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}updateSortItems(){this.sortItems=[{id:f.d.Assignees,title:$localize`:@@common_assignees:Assignees`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.Assignees},{id:f.d.DateCreated,title:$localize`:@@common_date-created-1:Date Created`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.DateCreated},{id:f.d.DateUpdated,title:$localize`:@@common_date-updated:Date Updated`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.DateUpdated},{id:f.d.DueDate,title:this.commonStringsService.dueDateText,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.DueDate},{id:f.d.Id,title:$localize`:@@common_id:ID`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.Id},{id:f.d.Index,title:$localize`:@@cu-gantt-preferences__dropdown-item_index:Index`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.Index},{id:f.d.Name,title:$localize`:@@common_name:Name`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.Name},{id:f.d.Priority,title:this.commonStringsService.priorityText,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.Priority},{id:f.d.StartDate,title:this.commonStringsService.startDateText,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.StartDate},{id:f.d.Status,title:$localize`:@@common_status:Status`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.Status},{id:f.d.TimeEstimate,title:$localize`:@@common_time-estimate:Time Estimate`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.TimeEstimate},{id:f.d.TimeLogged,title:$localize`:@@common_time-tracked:Time Tracked`,checkType:"check",checked:this.preferences.v2.viewSettingsUser.sortOn&&this.preferences.v2.viewSettingsUser.sortValue===f.d.TimeLogged}]}sort(t){this.preferences.v2.viewSettingsUser.sortOn||this.store.dispatch(r.ganttUpdateUserPreference({property:"sortOn",value:!0})),this.store.dispatch(r.ganttUpdateUserPreference({property:"sortValue",value:t}))}changeSortDirection(t){t.preventDefault(),t.stopPropagation(),this.store.dispatch(r.ganttUpdateUserPreference({property:"sortDirection",value:"asc"===this.preferences.v2.viewSettingsUser.sortDirection?"desc":"asc"}))}clearSort(t){t.preventDefault(),t.stopPropagation(),this.store.dispatch(r.ganttUpdateUserPreference({property:"sortDirection",value:"desc"})),this.store.dispatch(r.ganttUpdateUserPreference({property:"sortOn",value:!1})),this.store.dispatch(r.ganttUpdateUserPreference({property:"sortValue",value:f.d.Index}))}updateColorItems(){this.colorItems=[{id:f.a.Default,title:$localize`:@@common_default:Default`,checkType:"check",checked:this.preferences.v2.viewSettings.colorScheme===f.a.Default},{id:f.a.Priority,title:this.commonStringsService.priorityText,checkType:"check",checked:this.preferences.v2.viewSettings.colorScheme===f.a.Priority},{id:f.a.Status,title:$localize`:@@common_status:Status`,checkType:"check",checked:this.preferences.v2.viewSettings.colorScheme===f.a.Status},{id:f.a.List,title:$localize`:@@common_list:List`,checkType:"check",checked:this.preferences.v2.viewSettings.colorScheme===f.a.List}]}changeColor(t){this.store.dispatch(r.ganttUpdateColorScheme({scheme:t}))}updateDateScaleItems(){this.dateScaleItems=[{id:f.b.Hour,title:$localize`:@@cu-gantt-preferences__dropdown-item_hour:Hour`,checkType:"check",checked:this.preferences.v2.viewSettings.dateScale===f.b.Hour},{id:f.b.Day,title:$localize`:@@common_time-unit--day:Day`,checkType:"check",checked:this.preferences.v2.viewSettings.dateScale===f.b.Day},{id:f.b.Week,title:$localize`:@@common_time-unit--week:Week`,checkType:"check",checked:this.preferences.v2.viewSettings.dateScale===f.b.Week},{id:f.b.Month,title:$localize`:@@common_time-unit--month:Month`,checkType:"check",checked:this.preferences.v2.viewSettings.dateScale===f.b.Month},{id:f.b.Year,title:$localize`:@@common_time-unit--year:Year`,checkType:"check",checked:this.preferences.v2.viewSettings.dateScale===f.b.Year}]}changeDateScale(t){this.store.dispatch(r.ganttUpdateViewPreference({property:"dateScale",value:t}))}goToToday(){const t=v().startOf("day").toDate();if(Object(g.c)(v(),v(p.gantt.config.start_date),v(p.gantt.config.end_date)))p.gantt.showDate(t);else{const e=v(p.gantt.config.start_date),i=v(p.gantt.config.end_date);if(v().valueOf()<e.valueOf()){const t=e.diff(v(),"days"),i=e.subtract(t+30,"days");p.gantt.config.start_date=i.toDate()}else if(v().valueOf()>i.valueOf()){const t=v().diff(i,"days"),e=i.add(t+30,"days");p.gantt.config.end_date=e.toDate()}this.ganttUtilities.initTodayMarker(),p.gantt.render(),p.gantt.showDate(t)}}updateViewSettingsItems(){this.viewSettingsItems=[{id:"hideWeekends",title:$localize`:@@cu-gantt-preferences__dropdown-item_hide-skip-weekends:Hide and skip weekends`,checkType:"check",checked:this.preferences.v2.viewSettings.hideWeekends,tooltip:$localize`:@@cu-gantt-preferences__dropdown-item-description_hide-skip-weekends:Hide and skip weekends from the date scale.`},{id:"rescheduleDependencies",title:$localize`:@@common_reschedule-deps:Reschedule dependencies`,checkType:"check",checked:this.preferences.v2.viewSettings.rescheduleDependencies,tooltip:$localize`:@@cu-gantt-preferences__dropdown-item-description_reschedule-deps:Move dependent tasks with dragged task.`},{id:"allowWebsockets",title:$localize`:@@cu-gantt-preferences__dropdown-item_websockets:Allow Live Updates`,checkType:"check",checked:this.preferences.v2.viewSettings.allowWebsockets,tooltip:$localize`:@@cu-gantt-preferences__dropdown-item-description_websockets:Enable live updates to tasks from other users within the app. Performance may be affected.`},{id:"highlightTaskPositionOnDrag",title:$localize`:@@cu-gantt-preferences__dropdown-item_highlight-pos-on-drag:Highlight task position on drag`,checkType:"check",checked:this.preferences.v2.viewSettings.highlightTaskPositionOnDrag,tooltip:$localize`:@@cu-gantt-preferences__dropdown-item-description_highlight-pos-on-drag:Add layer to tasks on drag for easier rescheduling.`},{id:"showPlannedListBars",title:$localize`:@@cu-gantt-preferences__dropdown-item_show-planned-list-bars:Show Planned List Bars`,checkType:"check",checked:this.preferences.v2.viewSettings.showPlannedListBars,tooltip:$localize`:@@cu-gantt-preferences__dropdown-item-description_show-planned-list-bars:Show planned List dates if they exist.`}]}toggleViewSetting(t){this.store.dispatch(r.ganttUpdateViewPreference({property:t,value:!this.preferences.v2.viewSettings[t]}))}toggleFullScreen(){this.ganttFullScreen$.pipe(Object(h.a)(1)).subscribe(t=>{t?p.gantt.collapse():(document.body.classList.add("cu-gantt__fullscreen"),this.store.dispatch(r.ganttFullScreen({fullScreen:!0})),p.gantt.expand())})}zoomToFit(){this.ganttZoomToFit$.pipe(Object(h.a)(1)).subscribe(t=>{this.ganttUtilities.toggleZoomToFit(t,this.preferences.v2.viewSettings.dateScale,!0)})}updatePathCalculationItems(){this.pathCalculationItems=[{id:"criticalPath",title:$localize`:@@cu-gantt-preferences__dropdown-item_critical-path:Critical Path`,checkType:"check",checked:this.preferences.v2.viewSettings.criticalPath},{id:"showSlackTime",title:$localize`:@@cu-gantt-preferences__dropdown-item_show-slack-time:Show Slack Time`,checkType:"check",checked:this.preferences.v2.viewSettings.showSlackTime,tooltip:$localize`:@@cu-gantt-preferences__dropdown-item-description_show-slack-time:Show the time that a task can be increased without affecting the next task it is connected with.`}]}toggleShowClosed(){this.filter$.pipe(Object(h.a)(1)).subscribe(t=>{this.store.dispatch(new w.rj(Object.assign(Object.assign({},t),{showClosed:!t.showClosed})))})}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(y.a),n.Wb(a.Store),n.Wb(k.a))},t.\u0275cmp=n.Qb({type:t,selectors:[["cu-gantt-preferences"]],viewQuery:function(t,e){if(1&t&&n.jd(X,1),2&t){let t;n.Qc(t=n.rc())&&(e.exportMenu=t.first)}},hostAttrs:[1,"cu-gantt-preferences"],hostVars:2,hostBindings:function(t,e){2&t&&n.Ob("cu-gantt-preferences_public",e.isPublic)},inputs:{preferences:"preferences",view:"view",team:"team",user:"user",canShareView:"canShareView",isPublic:"isPublic"},outputs:{shareView:"shareView"},features:[n.Gb],decls:14,vars:11,consts:function(){let t,e,i,n,o,a,r,s,c,l;return t=$localize`:@@common_today␟7fb1099e29660162f9154d5b2feee7743a423df6␟6048892649018070225:Today`,e=$localize`:@@common_sort-by-1␟ec97f67072a83aaa972536b18d83179f6e4bbec9␟7699622144571229146:Sort by`,i=$localize`:@@cu-gantt-preferences__path-calculations␟e4b264d59404cb261026c48970b300c09f3fe4ca␟164388383445569015:Path calculations`,n=$localize`:@@cu-gantt-preferences__tooltip-msg_export-to-pdf␟81386181a7febaab3a3a2b4ea21c7e174f1d284a␟5911961965521706333:Export To PDF`,o=$localize`:@@common_share␟0bd8b27f60a1f098a53e06328426d818e3508ff9␟7419704019640008953:Share`,a=$localize`:@@cu-gantt-preferences__path-calculations␟e4b264d59404cb261026c48970b300c09f3fe4ca␟164388383445569015:Path calculations`,r=$localize`:@@cu-gantt-preferences__path-calculations_description␟a80ddfb7bca31536d96799fb40226210ef0f7e16␟550689471586641885: Path is calculated on all tasks in view. `,s=$localize`:@@common_share␟0bd8b27f60a1f098a53e06328426d818e3508ff9␟7419704019640008953:Share`,c=$localize`:@@common_show␟2aba1e87039819aca3b70faa9aa848c12bf139ca␟8461842260159597706:Show`,l=$localize`:@@cu-gantt-preferences__tooltip-msg_toogle-fullscreen␟84b758f4d341a9697253aef40a5390a44693f7a3␟3710774007246767652:Toggle Full screen`,[[4,"ngIf"],[1,"cu-gantt-preferences__dropdown-date-scale",3,"title","items","autoClose","dropdownDisabled","onSelect"],[1,"cu-gantt-preferences__text"],[1,"cu-gantt-preferences__dropdown-text","date-scale",3,"cuTooltip"],["icon","cu2-angle-right",1,"cu-gantt-preferences__arrow"],[3,"ngTemplateOutlet",4,"ngIf"],["meEveryoneFilter",""],["viewSizes",""],[1,"cu-gantt-preferences__text","today",3,"click"],[1,"cu-gantt-preferences__dropdown-text"],t,["class","cu-gantt-preferences__dropdown-sort",3,"title","items","autoClose","dropdownDisabled","onSelect",4,"ngIf"],[1,"cu-gantt-preferences__dropdown-sort",3,"title","items","autoClose","dropdownDisabled","onSelect"],["class","cu-gantt-preferences__sort",4,"ngIf"],["class","cu-gantt-preferences__sort-value",3,"active",4,"ngIf"],[1,"cu-gantt-preferences__sort"],["icon","cu2-sort-2",1,"cu-gantt-preferences__sort-icon",3,"cuTooltip"],[1,"cu-gantt-preferences__sort-text"],e,[1,"cu-gantt-preferences__sort-value"],["icon","sort-menu",1,"cu-gantt-preferences__toggle","sort",3,"click"],[1,"cu-gantt-preferences__sort-value-text"],["icon","close-o",1,"cu-gantt-preferences__sort-value-icon",3,"click"],[3,"ngTemplateOutlet"],["cuDropdown","",1,"cu-dropdown",3,"dropdownCloseOnInsideClick"],["cuDropdownToggle","",1,"cu-dropdown__toggle","bordered-left"],["cuTooltip",i,"icon","critical-path-2",1,"cu-gantt-preferences__toggle","path-calculation"],[3,"width",4,"cuDropdownMenu"],[3,"title","items","autoClose","dropdownDisabled","toggleModifier","onSelect"],["icon","view-block-color",1,"cu-gantt-preferences__toggle","color",3,"cuTooltip"],["cuDropdown","",1,"cu-dropdown",3,"dropdownCloseOnInsideClick","dropdownRightEdgePadding","dropdownModifierClass","dropdownOpen"],["exportMenuDropdown","dropdown"],["cuDropdownToggle","",1,"cu-dropdown__toggle","bordered-right"],["cuTooltip",n,"icon","cu2-export3",1,"cu-gantt-preferences__toggle","export"],["class","cu-gantt-preferences__toggle share","cuTooltip",o,3,"click",4,"ngIf"],["class","cu-gantt-preferences__toggle settings","icon","cu2-ellipsis",3,"cuTooltip",4,"ngIf"],[1,"cu-gantt-preferences__path-calculations-top"],[1,"cu-gantt-preferences__path-calculations-header"],a,[1,"cu-gantt-preferences__path-calculations-subheader"],r,[1,"cu-gantt-preferences__path-calculations-bot"],["class","cu-gantt-preferences__path-calculations-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-gantt-preferences__path-calculations-item"],[1,"cu-gantt-preferences__path-calculations-item-name",3,"cuTooltip"],[3,"checked","onChange"],[3,"hierarchies","tasks","view","preferences","team","user","isFullScreen","onToggleFullscreen","onClose"],["exportMenu",""],["cuTooltip",o,1,"cu-gantt-preferences__toggle","share",3,"click"],[1,"cu2-views-bar__share"],["icon","cu2-share",1,"cu2-views-bar__share-icon","icon"],[1,"cu2-views-bar__share-label"],s,["icon","cu2-ellipsis",1,"cu-gantt-preferences__toggle","settings",3,"cuTooltip"],[1,"cu2-views-bar__btn-dropdown-list-toggle"],["icon","cu3-eye",1,"cu2-views-bar__btn-icon"],[1,"cu2-views-bar__btn-title"],c,[3,"isMeView","userIds","modifier",4,"ngIf"],[3,"isMeView","userIds","modifier"],[1,"cu-gantt-preferences__sizes"],[1,"cu-gantt-preferences__zoom-to-fit"],["icon","cu2-zoom-to-fit",1,"cu-gantt-preferences__toggle","zoom-to-fit",3,"cuTooltip","click"],[1,"cu-gantt-preferences__full-screen"],["cuTooltip",l,"icon","cu2-full-screen",1,"cu-gantt-preferences__toggle","fullscreen",3,"click"]]},template:function(t,e){1&t&&(n.bd(0,Y,4,0,"ng-container",0),n.cc(1,"cu-dropdown-list",1),n.qc("onSelect",function(t){return e.changeDateScale(t.id)}),n.cc(2,"div",2),n.cc(3,"div",3),n.dd(4),n.bc(),n.Xb(5,"div",4),n.bc(),n.bc(),n.bd(6,tt,3,2,"ng-container",0),n.bd(7,et,1,1,"ng-container",5),n.bd(8,lt,17,23,"ng-container",0),n.bd(9,ut,1,1,"ng-container",5),n.bd(10,ht,2,3,"ng-template",null,6,n.cd),n.bd(12,pt,8,11,"ng-template",null,7,n.cd)),2&t&&(n.Dc("ngIf",(null==e.user?null:e.user.dashboard)!==e.LayoutVersion.Six),n.Ib(1),n.Dc("title",e.dateScaleText)("items",e.dateScaleItems)("autoClose",!0)("dropdownDisabled",null==e.view?null:e.view.locked),n.Ib(2),n.Dc("cuTooltip",null!=e.view&&e.view.locked?e.frozenViewToolTip:e.dateScaleText),n.Ib(1),n.ed(null==e.preferences||null==e.preferences.v2||null==e.preferences.v2.viewSettings?null:e.preferences.v2.viewSettings.dateScale),n.Ib(2),n.Dc("ngIf",!e.isPublic),n.Ib(1),n.Dc("ngIf",(null==e.user?null:e.user.dashboard)!==e.LayoutVersion.Six),n.Ib(1),n.Dc("ngIf",!e.isPublic),n.Ib(1),n.Dc("ngIf",(null==e.user?null:e.user.dashboard)===e.LayoutVersion.Six))},directives:[x.q,S.a,T.a,C.a,x.x,D.b,I.a,P.a,x.p,M.a,R,U.a],pipes:[q,x.b],styles:['.cu-gantt-preferences{display:flex;width:100%;padding-left:15px}.cu-gantt-preferences_public{margin-bottom:10px}.cu2-views-bar__options_v6 .cu-gantt-preferences{width:auto;align-items:center;padding:0}.cu-gantt-preferences__toggle{position:relative;cursor:pointer;padding:6px;width:26px;height:26px;fill:#7c828d}.dark-theme .cu-gantt-preferences__toggle{fill:#d5d6d7}.cu-gantt-preferences__toggle:hover{fill:var(--theme-main-color)}.cu2-views-bar_v6 .cu-gantt-preferences__toggle:hover:before{display:block}.cu-gantt-preferences__toggle.color{padding:7px}.cu-gantt-preferences__toggle.fullscreen{padding:6px}.cu-dropdown-list_opened .cu-gantt-preferences__toggle,.cu-dropdown_open .cu-gantt-preferences__toggle,.cu-gantt-preferences__toggle.active{fill:var(--theme-main-color)}.cu-gantt-preferences__toggle.active.rotate{transform:rotate(180deg)}.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active{fill:var(--theme-main-color)}}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:before{background:#7b68ee;display:block;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:before{background:var(--theme-main-color)}}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:before{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:before{background:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active.cu-dropdown-list_opened,.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:hover{fill:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active.cu-dropdown-list_opened,.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:hover{fill:var(--theme-main-color-dark)}}.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active.cu-dropdown-list_opened:before,.cu2-views-bar__options_v6 .cu-gantt-preferences__toggle.active:hover:before{opacity:.1}.cu2-views-bar__options_v6 .cu-gantt-preferences .cu-dropdown_open .cu-gantt-preferences__toggle:before{display:block}.cu-gantt-preferences__toggle.share{width:auto;height:auto;padding:0}.cu-gantt-preferences__toggle.share .cu2-views-bar__share{height:26px;margin-left:8px}.dark-theme .cu-gantt-preferences__toggle.share .cu2-views-bar__share{border-color:#1e272e}.cu-gantt-preferences__toggle.share .cu2-views-bar__share:hover{background-color:transparent}.cu-gantt-preferences__toggle.share .cu2-views-bar__share:hover .icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}.cu-gantt-preferences__toggle.share .cu2-views-bar__share:hover .cu2-views-bar__share-label{color:var(--theme-main-color)}.cu-gantt-preferences__toggle.share .cu2-views-bar__share-icon{transition:none!important;fill:#7c828d;stroke:#7c828d}.dark-theme .cu-gantt-preferences__toggle.share .cu2-views-bar__share-icon{fill:#d5d6d7;stroke:#d5d6d7}.cu-gantt-preferences__toggle.share .cu2-views-bar__share-label{transition:none!important}.dark-theme .cu-gantt-preferences__toggle.share .cu2-views-bar__share-label{color:#d5d6d7}.cu2-views-bar_v6 .cu-gantt-preferences__toggle{border:0;height:24px;margin-right:4px;fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__toggle{fill:#abaeb0}.cu2-views-bar_v6 .cu-gantt-preferences__toggle:before{content:"";display:block;position:absolute;display:none;width:100%;height:100%;top:0;left:0;border-radius:6px;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__toggle:before{background-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences__toggle svg{position:relative}.cu-gantt-preferences__sort{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;padding:0 10px 0 7px;height:28px;border:1px solid #e9ebf0;border-radius:3px;margin-right:8px}.dark-theme .cu-gantt-preferences__sort{border-color:#1e272e}.cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort,.cu-gantt-preferences__sort:hover{border-color:var(--theme-main-color)}.cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort .cu-gantt-preferences__sort-text,.cu-gantt-preferences__sort:hover .cu-gantt-preferences__sort-text{color:var(--theme-main-color)}.cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort .icon,.cu-gantt-preferences__sort:hover .icon{fill:var(--theme-main-color)}.cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort:before,.cu2-views-bar_v6 .cu-gantt-preferences__sort:hover:before{opacity:1}.cu2-views-bar_v6 .cu-gantt-preferences__sort{border:0;padding:0 6px;margin:0;border-radius:0;height:24px}.cu2-views-bar_v6 .cu-gantt-preferences__sort:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;width:100%;height:100%;left:0;opacity:0;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__sort:before{background-color:#1e272e}.cu-gantt-preferences__sort .cu-gantt-preferences__sort-text,.cu-gantt-preferences__sort .icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative}.cu-gantt-preferences__sort-icon{width:12px;height:12px;fill:#7c828d}.dark-theme .cu-gantt-preferences__sort-icon{fill:#d5d6d7}.cu2-views-bar_v6 .cu-gantt-preferences__sort-icon{fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__sort-icon{fill:#abaeb0}.cu-gantt-preferences__sort-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;line-height:11px;transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;padding-left:5px;color:#7c828d}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-preferences__sort-text{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-preferences__sort-text{color:#d5d6d7}.cu2-views-bar_v6 .cu-gantt-preferences__sort-text{color:#333}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__sort-text{color:#abaeb0}.cu-gantt-preferences__sort-value{display:flex;align-items:center;justify-content:center;padding:0 10px 0 2px;height:28px;border:1px solid #e9ebf0;border-radius:3px;margin-right:8px}.dark-theme .cu-gantt-preferences__sort-value{border-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences__sort-value:hover:before{opacity:1}.cu2-views-bar_v6 .cu-gantt-preferences__sort-value{position:relative;padding:0 6px 0 0;height:24px;border:0;border-radius:0;margin:0}.cu2-views-bar_v6 .cu-gantt-preferences__sort-value:before{transition:opacity .1s cubic-bezier(.785,.135,.15,.86) 0s;content:"";display:block;position:absolute;width:100%;height:100%;left:0;opacity:0;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__sort-value:before{background-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences__sort-value .cu-gantt-preferences__toggle.sort{margin:0}.cu2-views-bar_v6 .cu-gantt-preferences__sort-value .cu-gantt-preferences__toggle.sort:before{display:none}.cu-gantt-preferences__sort-value.active{border-color:var(--theme-main-color)}.cu2-views-bar_v6 .cu-gantt-preferences__sort-value.active:before{background:#7b68ee;opacity:.1}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-gantt-preferences__sort-value.active:before{background:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__sort-value.active:before{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__sort-value.active:before{background:var(--theme-main-color)}}.cu-gantt-preferences__sort-value-text{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:11px;position:relative;cursor:pointer;text-transform:capitalize;color:var(--theme-main-color);margin-right:8px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-preferences__sort-value-text{font-family:var(--global-font-support)}}.cu-gantt-preferences__sort-value-text:hover{color:var(--theme-main-color-dark)}.cu-gantt-preferences__sort-value-icon{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:relative;width:11px;height:11px;fill:var(--theme-main-color)}.cu-gantt-preferences__sort-value-icon:hover{fill:var(--theme-main-color-dark);transform:rotate(180deg)}.cu-gantt-preferences__sort-value .cu-gantt-preferences__toggle:hover{fill:var(--theme-main-color-dark)}.cu-gantt-preferences .cu-dropdown-list,.cu-gantt-preferences__text{display:flex;align-items:center;cursor:pointer}.cu-gantt-preferences__text{transition:border-color .2s cubic-bezier(.785,.135,.15,.86) 0s;justify-content:center;padding:0 10px;height:28px;border:1px solid #e9ebf0;border-radius:3px}.dark-theme .cu-gantt-preferences__text{border-color:#1e272e}.cu2-views-bar__options_v6 .cu-gantt-preferences__text{height:24px;border:0;padding:0 6px;margin-right:4px;border-radius:6px}.cu-gantt-preferences__text:hover{border-color:var(--theme-main-color)}.cu2-views-bar__options_v6 .cu-gantt-preferences__text:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__text:hover{background-color:#1e272e}.cu-gantt-preferences__text:hover .cu-gantt-preferences__dropdown-text{color:var(--theme-main-color)}.cu2-views-bar__options_v6 .cu-gantt-preferences__text:hover .cu-gantt-preferences__dropdown-text{color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__text:hover .cu-gantt-preferences__dropdown-text{color:#abaeb0}.cu-gantt-preferences__text:hover .icon{fill:var(--theme-main-color)}.cu2-views-bar__options_v6 .cu-gantt-preferences__text:hover .icon{fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__text:hover .icon{fill:#abaeb0}.cu-gantt-preferences__text.today{margin-right:8px}.cu-gantt-preferences__dropdown-text{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:11px;color:#7c828d;text-transform:capitalize;cursor:pointer}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-preferences__dropdown-text{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-preferences__dropdown-text{color:#d5d6d7}.cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-text{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-text{color:#abaeb0}.cu-gantt-preferences__dropdown-text.date-scale{padding-right:5px}.cu-gantt-preferences__dropdown-date-scale{margin-right:auto}.cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__text{border-color:var(--theme-main-color)}.cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__text{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__text{background-color:#1e272e}.cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__dropdown-text{color:var(--theme-main-color)}.cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__dropdown-text{color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__dropdown-text{color:#abaeb0}.cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__arrow{fill:var(--theme-main-color)}.cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__arrow{fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-gantt-preferences__dropdown-date-scale.cu-dropdown-list_opened .cu-gantt-preferences__arrow{fill:#abaeb0}.cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort,.cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort{border-color:var(--theme-main-color)}.cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort-icon,.cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort-icon{fill:var(--theme-main-color)}.cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort-text,.cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort-text{color:var(--theme-main-color)}.cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort-icon,.cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort-icon{fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort-icon,.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort-icon{fill:#abaeb0}.cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort-text,.cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort-text{color:#333}.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort.cu-dropdown-list_opened .cu-gantt-preferences__sort-text,.dark-theme .cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort:hover .cu-gantt-preferences__sort-text{color:#abaeb0}.cu2-views-bar_v6 .cu-gantt-preferences__dropdown-sort{display:flex;align-items:center;position:relative;margin-right:4px;border-radius:6px;overflow:hidden;height:24px}.cu-gantt-preferences__arrow{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;fill:#7c828d;transform:rotate(90deg);margin-left:0;position:relative;top:1px}.cu-gantt-preferences__arrow:hover{transition:none}.dark-theme .cu-gantt-preferences__arrow{fill:#d5d6d7}.cu-dropdown-list_opened .cu-gantt-preferences__arrow{transform:rotate(270deg)}.cu-gantt-preferences__sizes{display:flex;height:28px;margin-right:8px}.cu2-views-bar_v6 .cu-gantt-preferences__sizes{margin:0;height:24px}.cu-gantt-preferences__closed{border:1px solid #e9ebf0;display:flex;height:28px;margin-right:8px}.dark-theme .cu-gantt-preferences__closed{border-color:#1e272e}.cu-gantt-preferences__full-screen{border-radius:0 3px 3px 0;border:1px solid #e9ebf0;border-left-width:0}.dark-theme .cu-gantt-preferences__full-screen{border-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences__full-screen{margin:0;height:24px;border:0;border-radius:0}.cu-gantt-preferences__zoom-to-fit{border:1px solid #e9ebf0;border-radius:3px 0 0 3px}.dark-theme .cu-gantt-preferences__zoom-to-fit{border-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences__zoom-to-fit{margin:0;height:24px;border:0;border-radius:0}.cu-gantt-preferences .cu-filter-assignees{height:28px;margin-right:8px}.cu2-views-bar_v6 .cu-gantt-preferences .cu-filter-assignees{height:24px;margin-right:4px}.dark-theme .cu-gantt-preferences .cu-filter-assignees__item{border-color:#1e272e}.cu-gantt-preferences .cu-filter-assignees__icon{fill:#7c828d}.dark-theme .cu-gantt-preferences .cu-filter-assignees__icon{fill:#d5d6d7}.cu-gantt-preferences .cu-filter-assignees__label{color:#7c828d}.dark-theme .cu-gantt-preferences .cu-filter-assignees__label{color:#d5d6d7}.cu-gantt-preferences__path-calculations{width:100%}.cu-gantt-preferences__path-calculations-top{padding:16px 12px;border-bottom:1px solid #e9ebf0}.dark-theme .cu-gantt-preferences__path-calculations-top{border-color:#1e272e}.cu-gantt-preferences__path-calculations-bot{padding:8px 12px}.cu-gantt-preferences__path-calculations-header{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:11px;line-height:11px;color:#b9bec7;text-transform:uppercase;padding-bottom:8px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-preferences__path-calculations-header{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-preferences__path-calculations-header{color:#d5d6d7}.cu-gantt-preferences__path-calculations-subheader{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:10px;line-height:10px;color:#292d34;display:flex}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-preferences__path-calculations-subheader{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-preferences__path-calculations-subheader{color:#828588}.cu-gantt-preferences__path-calculations-subheader .icon{width:10px;height:10px;fill:#b9bec7;margin-left:5px}.dark-theme .cu-gantt-preferences__path-calculations-subheader .icon{fill:#828588}.cu-gantt-preferences__path-calculations-item{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:13px;line-height:13px;display:flex;justify-content:space-between;align-items:center;color:#292d34;height:32px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-gantt-preferences__path-calculations-item{font-family:var(--global-font-support)}}.dark-theme .cu-gantt-preferences__path-calculations-item{fill:#d5d6d7}.cu-gantt-preferences .cu-dropdown__toggle.bordered-left{border:1px solid #e9ebf0;border-radius:3px 0 0 3px}.dark-theme .cu-gantt-preferences .cu-dropdown__toggle.bordered-left{border-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences .cu-dropdown__toggle.bordered-left{border:0;border-radius:0}.cu-gantt-preferences .cu-dropdown__toggle.bordered-middle{border-top:1px solid #e9ebf0;border-bottom:1px solid #e9ebf0}.dark-theme .cu-gantt-preferences .cu-dropdown__toggle.bordered-middle{border-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences .cu-dropdown__toggle.bordered-middle{border:0;border-radius:0}.cu-gantt-preferences .cu-dropdown__toggle.bordered-right{border:1px solid #e9ebf0;border-radius:0 3px 3px 0}.dark-theme .cu-gantt-preferences .cu-dropdown__toggle.bordered-right{border-color:#1e272e}.cu2-views-bar_v6 .cu-gantt-preferences .cu-dropdown__toggle.bordered-right{border:0;border-radius:0}.cu-gantt-preferences .cu-dropdown__toggle.cu-gantt-preferences__toggle-settings{margin-left:5px}.cu2-views-bar_v6 .cu-gantt-preferences .cu-dropdown__toggle.cu-gantt-preferences__toggle-settings{margin:0}'],encapsulation:2,changeDetection:0}),t})()},Msbh:function(t,e,i){"use strict";i.d(e,"a",function(){return c}),i.d(e,"b",function(){return d});var n=i("l7P3"),o=i("e3gV"),a=i("MguC"),r=i("eKZ6"),s=i("BeL+");const c=40,l={viewDate:null,showLoading:!1,viewData:{},capacity:{},sidebarData:{},sidebarTaskType:"unscheduled",sidebarSearchText:"",sidebarSorting:{unscheduled:{field:"status",dir:r.a.Asc},"no-effort":{field:"status",dir:r.a.Asc},overdue:{field:"due_date",dir:r.a.Asc}},viewLoadingMore:{left:!1,right:!1}},u=Object(n.createReducer)(l,Object(n.on)(o.r,(t,{showLoading:e,resetSidebarUser:i})=>Object.assign(Object.assign({},t),{showLoading:e||t.showLoading,sidebarAssigneeFilter:i?void 0:t.sidebarAssigneeFilter})),Object(n.on)(o.q,t=>Object.assign(Object.assign({},t),{showLoading:!1})),Object(n.on)(o.s,(t,{viewData:e,groupBy:i,isMeMode:n,loadedDateRange:o,viewDataKey:r,recurringGroups:s})=>{let c=e.groups;if(i===a.c.Assignee){const t=e.groups.find(t=>"null"===String(t.id))||{id:"null",collapsed:!1,data:[],task_ids:[]};t.data=t.data||[],c=[...e.groups.filter(e=>!(e===t||e.data[0]&&e.data[0].group)),t],n&&(c=c.filter(e=>e!==t))}else 0===c.length&&(c=[{id:"0",collapsed:!1,data:{id:"0"},task_ids:[]}]);return Object.assign(Object.assign({},t),{viewData:Object.assign(Object.assign({},t.viewData),{[r]:{groups:c,loadedDateRange:o,recurringGroups:s}}),showLoading:!1,groupBy:i})}),Object(n.on)(o.a,(t,{oldGroup:e,newGroup:i,task:n,groupBy:o,viewDataKey:r})=>{const s=o===a.c.Assignee&&0===i.data.length&&t.viewData[r].groups.filter(t=>t.task_ids.includes(n.id)).length>=2;return Object.assign(Object.assign({},t),{viewData:Object.assign(Object.assign({},t.viewData),{[r]:Object.assign(Object.assign({},t.viewData[r]),{groups:t.viewData[r].groups.map(t=>e&&t.id===e.id?Object.assign(Object.assign({},t),{task_ids:t.task_ids.filter(t=>t!==n.id)}):t.id!==i.id||s||t.task_ids.includes(n.id)?t:Object.assign(Object.assign({},t),{task_ids:[...t.task_ids,n.id]}))})})})}),Object(n.on)(o.D,(t,{date:e})=>Object.assign(Object.assign({},t),{viewDate:e})),Object(n.on)(o.b,(t,{taskId:e})=>{const i=Object.assign({},t.viewData);function n(t){return Object.assign(Object.assign({},t),{task_ids:t.task_ids.filter(t=>t!==e)})}return Object.entries(i).forEach(([t,e])=>{i[t]=Object.assign(Object.assign({},i[t]),{groups:i[t].groups.map(n),recurringGroups:i[t].recurringGroups.map(n)})}),Object.assign(Object.assign({},t),{viewData:i})}),Object(n.on)(o.h,(t,{capacity:e})=>Object.assign(Object.assign({},t),{capacity:Object.assign(Object.assign({},t.capacity),e)})),Object(n.on)(o.w,(t,{capacity:e,userIds:i})=>{const n=Object.assign({},t.capacity);return i.forEach(i=>{n[i]=Object.assign(Object.assign({},t.capacity[i]),e)}),Object.assign(Object.assign({},t),{capacity:n})}),Object(n.on)(o.n,(t,{sidebarDataKey:e,showLoading:i})=>Object.assign(Object.assign({},t),{sidebarData:Object.assign(Object.assign({},t.sidebarData),{[e]:i?void 0:t.sidebarData[e]})})),Object(n.on)(o.o,(t,{sidebarDataKey:e,taskIds:i})=>Object.assign(Object.assign({},t),{sidebarData:Object.assign(Object.assign({},t.sidebarData),{[e]:{taskIds:i,pageCursor:0}})})),Object(n.on)(o.p,(t,{sidebarDataKey:e})=>Object.assign(Object.assign({},t),{sidebarData:Object.assign(Object.assign({},t.sidebarData),{[e]:Object.assign(Object.assign({},t.sidebarData[e]),{pageCursor:(t.sidebarData[e]?t.sidebarData[e].pageCursor:0)+c})})})),Object(n.on)(o.C,(t,{sidebarTaskType:e})=>Object.assign(Object.assign({},t),{sidebarTaskType:e})),Object(n.on)(o.A,(t,{searchText:e})=>Object.assign(Object.assign({},t),{sidebarSearchText:e})),Object(n.on)(o.H,t=>Object.assign(Object.assign({},t),{sidebarSorting:Object.assign(Object.assign({},t.sidebarSorting),{[t.sidebarTaskType]:Object.assign(Object.assign({},t.sidebarSorting[t.sidebarTaskType]),{dir:t.sidebarSorting[t.sidebarTaskType].dir===r.a.Asc?r.a.Desc:r.a.Asc})})})),Object(n.on)(o.B,(t,{field:e})=>Object.assign(Object.assign({},t),{sidebarSorting:Object.assign(Object.assign({},t.sidebarSorting),{[t.sidebarTaskType]:Object.assign(Object.assign({},t.sidebarSorting[t.sidebarTaskType]),{field:e})})})),Object(n.on)(o.j,(t,{direction:e})=>Object.assign(Object.assign({},t),{viewLoadingMore:Object.assign(Object.assign({},t.viewLoadingMore),{[e]:!0})})),Object(n.on)(o.k,(t,{direction:e,viewDataKey:i,groups:n,groupDateRange:o})=>{const a=t.viewData[i].groups.map(t=>{const e=n.find(e=>e.id===t.id);return e?Object.assign(Object.assign({},t),{task_ids:Object(s.a)([...t.task_ids,...e.task_ids])}):t}),r=n.filter(e=>!t.viewData[i].groups.some(t=>t.id===e.id)),c=Object.assign({},t.viewData[i].loadedDateRange);return"left"===e?c.start=o.start:c.end=o.end,Object.assign(Object.assign({},t),{viewLoadingMore:Object.assign(Object.assign({},t.viewLoadingMore),{[e]:!1}),viewData:Object.assign(Object.assign({},t.viewData),{[i]:Object.assign(Object.assign({},t.viewData[i]),{groups:[...a,...r],loadedDateRange:c})})})}),Object(n.on)(o.i,(t,{direction:e})=>Object.assign(Object.assign({},t),{viewLoadingMore:Object.assign(Object.assign({},t.viewLoadingMore),{[e]:!1})})),Object(n.on)(o.z,(t,{sidebarAssigneeFilter:e})=>Object.assign(Object.assign({},t),{sidebarAssigneeFilter:e})));function d(t,e){return u(t,e)}},Pbuh:function(t,e,i){"use strict";i.d(e,"a",function(){return h});var n=i("ofXK"),o=i("mcWp"),a=i("1M0N"),r=i("Fv+p"),s=i("K0KF"),c=i("csDc"),l=i("gb9A"),u=i("bx+h"),d=i("fXoL");let h=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},imports:[[n.c,o.a,a.a,r.a,s.a,c.a,l.a,u.a]]}),t})()},QKYr:function(t,e,i){"use strict";i.d(e,"i",function(){return r}),i.d(e,"a",function(){return s}),i.d(e,"d",function(){return c}),i.d(e,"o",function(){return l}),i.d(e,"f",function(){return u}),i.d(e,"k",function(){return d}),i.d(e,"n",function(){return h}),i.d(e,"b",function(){return p}),i.d(e,"h",function(){return f}),i.d(e,"c",function(){return g}),i.d(e,"p",function(){return m}),i.d(e,"j",function(){return v}),i.d(e,"l",function(){return b}),i.d(e,"m",function(){return _}),i.d(e,"e",function(){return w}),i.d(e,"g",function(){return y});var n=i("l7P3"),o=i("D1cy");const a=Object(n.createFeatureSelector)("ganttView"),r=Object(n.createSelector)(a,t=>t.loading),s=Object(n.createSelector)(a,t=>t.chartLoading),c=Object(n.createSelector)(a,t=>t.hierarchies),l=Object(n.createSelector)(a,t=>t.tasks),u=Object(n.createSelector)(a,t=>t.links),d=Object(n.createSelector)(a,t=>t?t.preferences:o.h),h=Object(n.createSelector)(a,t=>t.taskIds),p=Object(n.createSelector)(a,t=>t.componentToOpen),f=Object(n.createSelector)(a,t=>t.loadedLists),g=Object(n.createSelector)(a,t=>!!t&&t.fullScreen),m=Object(n.createSelector)(a,t=>!!t&&t.zoomToFit),v=Object(n.createSelector)(a,t=>t.pdfLoading),b=Object(n.createSelector)(a,t=>t.preventOnOpenEvent),_=Object(n.createSelector)(a,t=>t.taskIdsLoading),w=Object(n.createSelector)(a,t=>t.hierarchyFilterActive),y=Object(n.createSelector)(a,t=>t.loadFromTemplate)},Qfhi:function(t,e,i){"use strict";i.d(e,"a",function(){return h});var n=i("o7Ov"),o=i("l7P3"),a=i("lJxs"),r=i("jJQC"),s=i("GkwO"),c=i("fXoL"),l=i("ofXK"),u=i("WoFS");function d(t,e){if(1&t){const t=c.dc();c.cc(0,"cu-checkbox",6),c.qc("onChange",function(){c.Uc(t);const i=e.$implicit;return c.uc().changeSettings(i.id)}),c.dd(1),c.bc()}if(2&t){const t=e.$implicit;c.Dc("checked",t.checked),c.Ib(1),c.fd(" ",t.title," ")}}let h=(()=>{class t{constructor(t){this.store=t,this.meItems$=this.store.pipe(Object(o.select)(s.V),Object(a.a)(t=>[{id:"meComments",title:$localize`:@@common_comments:Comments`,checkType:"switch",checked:t&&t.meComments},{id:"meSubtasks",title:$localize`:@@common_subtasks:Subtasks`,checkType:"switch",checked:t&&t.meSubtasks},{id:"meChecklists",title:$localize`:@@common_checklists:Checklists`,checkType:"switch",checked:t&&t.meChecklists}])),this.trackById=Object(r.d)("id"),this.modifier=""}changeSettings(t){this.store.dispatch(new n.ul(t))}clearMeMode(){this.store.dispatch(new n.wj(!1)),this.store.dispatch(new n.Hj(!1)),this.store.dispatch(new n.Gj(!1)),this.store.dispatch(new n.Dj([],[]))}hideMeModeBar(){this.store.dispatch(new n.Oj(!1)),localStorage.setItem("isMeModeBarHidden","true")}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(o.Store))},t.\u0275cmp=c.Qb({type:t,selectors:[["cu-me-settings"]],hostVars:12,hostBindings:function(t,e){2&t&&(c.Lb(e.modifier),c.Ob("cu-me-settings",!0)("cu-me-settings_gantt",e.isGanttView)("cu-me-settings_calendar",e.isCalendarView)("cu-me-settings_table",e.isGridView)("cu-me-settings_timeline-or-workload",e.isTimelineOrWorkloadView))},inputs:{modifier:"modifier",isGanttView:"isGanttView",isCalendarView:"isCalendarView",isGridView:"isGridView",isTimelineOrWorkloadView:"isTimelineOrWorkloadView"},decls:8,vars:4,consts:function(){let t,e;return t=$localize`:@@cu-me-settings__title␟0573ef6393ae15c5f1f3f00acf8169540ff3b577␟1833332348922563539:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:Me mode:${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT: tasks where I have assigned `,e=$localize`:@@common_hide-1␟ae7a4fb4460bca8742ecb2544e281d13ea46d433␟9118379122713505018: hide
`,[[1,"cu-me-settings__inner"],[1,"cu-me-settings__title"],t,[3,"checked","onChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-me-settings__close",3,"click"],e,[3,"checked","onChange"]]},template:function(t,e){1&t&&(c.cc(0,"div",0),c.cc(1,"div",1),c.mc(2,2),c.Xb(3,"b"),c.jc(),c.bc(),c.bd(4,d,2,2,"cu-checkbox",3),c.vc(5,"async"),c.bc(),c.cc(6,"div",4),c.qc("click",function(){return e.hideMeModeBar()}),c.gc(7,5),c.bc()),2&t&&(c.Ib(4),c.Dc("ngForOf",c.wc(5,2,e.meItems$))("ngForTrackBy",e.trackById))},directives:[l.p,u.a],pipes:[l.b],styles:['.cu-me-settings{position:relative;display:flex;justify-content:space-between;align-items:center;padding:11px 15px;margin:0 0 15px 20px;width:calc(100% - 40px);min-height:36px;z-index:10;border-radius:3px;background:#fafbfc}.contrast_high .cu-me-settings{background:#eee}.dark-theme .cu-me-settings{background:#1e272e}.cu-dashboard__body_v3 .cu-me-settings,.cu-dashboard__body_v4 .cu-me-settings{margin-top:0}.cu2-views-bar_v6 .cu-me-settings{margin-top:10px;margin-bottom:0}.cu-me-settings_list-view{margin:0 -5px 20px -15px;width:calc(100% + 20px)}.cu-me-settings_gantt{background:#fff;margin:10px auto;width:calc(100% - 24px)}.dark-theme .cu-me-settings_gantt{background:transparent}.cu2-views-bar_v6 .cu-me-settings_calendar,.cu2-views-bar_v6 .cu-me-settings_gantt{margin-bottom:10px}.cu2-views-bar_v6 .cu-me-settings_table{margin-top:10px;margin-bottom:10px}.cu2-views-bar_v6 .cu-me-settings_timeline-or-workload{margin-bottom:10px}.cu-me-settings__close{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;padding:2px;z-index:700;transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;border:none;outline:none;cursor:pointer;position:sticky;right:25px}.cu-me-settings:before{content:"";display:block;position:absolute;background:#7b68ee;width:100%;height:100%;border:1px solid;border-radius:3px;opacity:.2;top:0;left:0}@supports (--theme-main-color:#7b68ee){.cu-me-settings:before{background:var(--theme-main-color)}}@supports (--theme-main-color-dark:#5f48ea){.cu-me-settings:before{border-color:var(--theme-main-color-dark)}}.cu-me-settings__inner{display:flex;align-items:center;position:sticky;left:15px}.cu-me-settings__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34;margin-right:10px;position:relative}.dark-theme .cu-me-settings__title{color:#d5d6d7}.cu-me-settings__title b{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:500}.cu-me-settings .cu-checkbox{position:relative}.cu-me-settings .cu-checkbox__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;padding-left:24px;text-transform:capitalize;margin-right:15px;color:#292d34}.dark-theme .cu-me-settings .cu-checkbox__label{color:#d5d6d7}.cu-me-settings .cu-checkbox__label:before{border-color:#b9bec7;width:18px;height:18px}.cu-me-settings .cu-checkbox__label:after{left:4px;top:4px}.cu-me-settings .cu-checkbox__input:checked+.cu-checkbox__label:before{background:#fff}.dark-theme .cu-me-settings .cu-checkbox__input:checked+.cu-checkbox__label:before{background:transparent}'],encapsulation:2,changeDetection:0}),t})()},RKAz:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var n=i("ofXK"),o=i("3Pt+"),a=i("1M0N"),r=i("K0KF"),s=i("C8uC"),c=i("tGh3"),l=i("gb9A"),u=i("bFKe"),d=i("Fj0M"),h=i("fXoL");let p=(()=>{class t{}return t.\u0275mod=h.Ub({type:t}),t.\u0275inj=h.Tb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,o.l,r.a,a.a,l.a,c.a,s.LoaderModule,u.b,d.CreateCustomFieldFormModule]]}),t})()},RdFi:function(t,e,i){"use strict";i.d(e,"a",function(){return D});var n=i("IzEk"),o=i("pLZG"),a=i("zp1y"),r=i("QKYr"),s=i("BR3F"),c=i("cs9d"),l=i("D1cy"),u=i("qJCC"),d=i("v7a3"),h=i("O5Dz"),p=i("f0Wu"),f=i("2aXo"),g=i.n(f),m=i("pHS2"),v=i("L5Tv"),b=i("MguC"),_=i("TqRa"),w=i("c3rA"),y=i("Gj5t"),k=i("fXoL"),x=i("l7P3"),S=i("jJW4"),T=i("oPGG"),C=i("Jf2N");let D=(()=>{class t{constructor(t,e,i,n,o){this.store=t,this.sharedDataService=e,this.ganttService=i,this.modalService=n,this.injector=o,this.taskPositionLayer=null,this.slackLayers=null,this.plannedListBars=null,this.publicViewData$=this.store.select(w.getPublicViewData)}formatList(t,e,i,n,o=!0,a){const r=[],s=t.gantt_start||t.gantt_end,c={id:Object(d.v)(),kind:"addTask",folder:t.category,originalParent:t.id,parent:t.id,start_date:s?this.formatDate(s,"start","day"):new Date,space:t.project_id,text:"+ Add task",type:"task",unscheduled:!0},l=t.status?t.status.color:null,u=t.taskcount?t.taskcount:t.taskCount?t.taskCount:"0",p={color:Object(d.f)(l,n).color,denominator:t.gantt_progress_denominator,end_date:t.gantt_end?this.formatDate(t.gantt_end,"end","day"):"",folder:t.category,id:t.id,kind:"list",listColor:t.status?t.status.color:null,numerator:t.gantt_progress_numerator,orderIndex:i&&void 0!==a?a+9999:i?t.orderindex+9999:t.orderindex,originalStart:t.gantt_start,originalEnd:this.ganttMaxDate(t.gantt_end),originalParent:e?i?t.project_id:t.category.id||t.category:null,override_statuses:t.override_statuses,parent:e?i?t.project_id:t.category.id||t.category:null,permissions:t.permissions,permissionLevel:t.permission_level,plannedEnd:this.formatDate(t.due_date,"start","day"),plannedStart:this.formatDate(t.start_date,"end","day"),progress:parseInt(t.gantt_progress_numerator,10)/parseInt(t.gantt_progress_denominator,10),progressColor:Object(d.f)(l,n).progressColor,space:t.project_id,start_date:t.gantt_start?this.formatDate(t.gantt_start,"start","day"):"",status:t.status?t.status:null,statuses:t.statuses,taskCount:parseInt(u,10),text:t.name.includes(">")||t.name.includes("<")?Object(h.b)(t.name):t.name,timeEstimate:t.time_estimate,timeLogged:t.time_spent,type:"task",unscheduled:!t.gantt_start&&!t.gantt_end};return r.push(p),o&&r.push(c),r}formatFolder(t,e,i,n=!0){let o,a=[],r=0,s=0,c=0;const u=[];if(t.subcategories.forEach(e=>{e&&(r+=parseInt(e.gantt_progress_numerator,10),s+=parseInt(e.gantt_progress_denominator,10),a=a.concat(this.formatList(e,!0,t.hidden,i,n,t.orderindex)),e.gantt_start||e.gantt_end||(c+=1),o=e.gantt_start||e.gantt_end,u.push(e.id))}),!t.hidden){const i={id:Object(d.v)(),kind:"addList",folder:t.id,originalParent:t.id,parent:t.id,start_date:o?this.formatDate(o,"start","day"):new Date,space:t.project_id,text:"+ Add List",type:"task",unscheduled:!0},p={color:l.b.folder,id:t.id,kind:"folder",lists:u,orderIndex:t.orderindex,originalParent:e?t.project_id:null,override_statuses:t.override_statuses,parent:e?t.project_id:null,permissions:t.permissions,permissionLevel:t.permission_level,progress:r/s,progressColor:l.b.folderProgressColor,space:t.project_id,statuses:t.statuses,text:t.name.includes(">")||t.name.includes("<")?Object(h.b)(t.name):t.name,type:"project",unscheduled:c===t.subcategories.length};a.unshift(p),n&&a.push(i)}return a}formatSpace(t,e,i=!0){let n,o=[],a=0,r=0,s=0,c=0;const u=[],p=[];t.categories.forEach(t=>{o=o.concat(this.formatFolder(t,!0,e,i)),r+=t.subcategories.length,p.push(t.id),t.subcategories.forEach(t=>{t.gantt_start||t.gantt_end||(a+=1),n=t.gantt_start||t.gantt_end,u.push(t.id),s+=parseInt(t.gantt_progress_numerator,10),c+=parseInt(t.gantt_progress_denominator,10)})});const f={id:Object(d.v)(),kind:"addFolder",folder:"",originalParent:t.id,parent:t.id,start_date:n?this.formatDate(n,"start","day"):new Date,space:t.id,text:"+ Add Folder",type:"task",unscheduled:!0},g={color:l.b.space,features:t.features,folders:p,id:t.id,kind:"space",lists:u,orderIndex:t.orderindex,originalParent:null,parent:null,permissions:t.permissions,permissionLevel:t.permission_level,progress:s/c,progressColor:l.b.spaceProgressColor,spaceColor:t.color,statuses:t.statuses,text:t.name.includes(">")||t.name.includes("<")?Object(h.b)(t.name):t.name,type:"project",unscheduled:a===r};return o.unshift(g),i&&o.push(f),o}formatHierarchy(t,e){let i=[];return t.projects.forEach(t=>{i=i.concat(this.formatSpace(t,e))}),i}formatTaskIds(t){const e={};return t.forEach(t=>{e[t.id]=t.task_ids}),e}formatTask(t,e,i,n,o){var a,r,s,c,l,u,p,f,g;let m=[];t.dependencies&&t.dependencies.length&&t.dependencies.forEach(e=>{m=m.concat(this.formatLink(e,t.id,i))});let b="",_="";t.start_date&&(b=this.formatDate(t.start_date,"start","day"),t.due_date||(_=this.formatHalfDate(t.start_date,"start"))),t.due_date&&(_=this.formatDate(t.due_date,"end","day"),t.start_date||(b=this.formatHalfDate(t.due_date,"end"))),t.custom_type===v.a.MILESTONE&&((null===(a=t.project)||void 0===a?void 0:a.milestones)||t.milestones)&&(b=this.getMilestoneStartDate(t));const w=t.subcategory&&t.subcategory.status?t.subcategory.status.color:null;let k="0";t.assignees&&t.assignees.length&&(k=t.assignees.length.toString(),t.assignees.forEach(t=>{k+=t.username}));const x={assignees:t.assignees,assigneeOrder:k,groupAssignees:t.group_assignees,color:Object(d.g)(t,w,e),creator:t.creator,dateCreated:t.date_created,dateUpdated:t.date_updated,end_date:_,end_date_original:_,endDateHour:t.due_date&&t.due_date_time?Object(d.m)(t.due_date):_,endDateTime:t.due_date_time,folder:t.category&&!t.category.hidden?t.category.id:y.d,id:i?`${t.id}_${i}`:t.id,inOtherLists:t.other_subcategories&&0!==t.other_subcategories.length||(null===(r=t.parent_task)||void 0===r?void 0:r.other_subcategories)&&0!==(null===(s=t.parent_task)||void 0===s?void 0:s.other_subcategories.length),isMilestone:t.custom_type===v.a.MILESTONE&&((null===(c=t.project)||void 0===c?void 0:c.milestones)||t.milestones),isSubtask:null!=t.parent||null!=t.parent_task||null!=t.subtask_parent,kind:"task",list:t.subcategory.id,listColor:w,orderIndex:t.orderindex,originalStart:t.start_date,originalEnd:t.due_date,otherList:i,otherLists:(null===(l=t.other_subcategories)||void 0===l?void 0:l.length)?t.other_subcategories:(null===(p=null===(u=t.parent_task)||void 0===u?void 0:u.other_subcategories)||void 0===p?void 0:p.length)?null===(f=t.parent_task)||void 0===f?void 0:f.other_subcategories:[],parent:t.subtask_parent?t.subtask_parent:t.parent?t.parent:i||t.subcategory.id,parentName:t.subtask_parent_task?t.subtask_parent_task.name:t.parent_task?t.parent_task.name:null,permissions:t.permissions,permissionLevel:t.permission_level,points:t.points,priority:t.priority,private:t.private,pointsRollUp:t.rolled_up_points_estimate,space:t.project_id,status:t.status,statusName:t.status.status,start_date:b,start_date_original:b,startDateHour:t.start_date&&t.start_date_time?Object(d.m)(t.start_date):b,startDateTime:t.start_date_time,subtaskParent:t.subtask_parent,text:t.name.includes(">")||t.name.includes("<")?Object(h.b)(t.name):t.name,timeEstimate:t.time_estimate,timeEstimateRollup:t.rolled_up_time_estimate,timeLogged:t.total_time_spent,timeLoggedRollup:t.rolled_up_time_spent,type:t.custom_type===v.a.MILESTONE&&((null===(g=t.project)||void 0===g?void 0:g.milestones)||t.milestones)?"milestone":"task",unscheduled:!t.start_date&&!t.due_date,customId:t.custom_id,teamId:t.team};return x.isSubtask&&i&&(x.parent=`${x.parent}_${i}`),n&&o&&o.length&&!x.isSubtask&&-1===o.findIndex(t=>t.id===x.parent)&&(x.parent="420"),{task:x,links:m}}formatTasks(t,e,i,n){let o=[];const a=[];return t.forEach(t=>{var r,s,c;const l=this.formatTask(t,e,null,i,n);a.push(l.task),o=o.concat(l.links),t.other_subcategories&&t.other_subcategories.length&&t.other_subcategories.forEach(i=>{const n=this.formatTask(t,e,i.id);a.push(n.task),o=o.concat(n.links)}),(null===(s=null===(r=t.parent_task)||void 0===r?void 0:r.other_subcategories)||void 0===s?void 0:s.length)&&(null===(c=t.parent_task)||void 0===c||c.other_subcategories.forEach(i=>{const n=this.formatTask(t,e,i.id);a.push(n.task),o=o.concat(n.links)}))}),{tasks:a,links:o}}formatLink(t,e,i){const n=[];if(i){const e={id:Object(d.v)(),source:`${t.depends_on}_${i}`,target:`${t.task_id}_${i}`,type:"0"},o={id:Object(d.v)(),source:t.depends_on,target:`${t.task_id}_${i}`,type:"0"},a={id:Object(d.v)(),source:`${t.depends_on}_${i}`,target:t.task_id,type:"0"};n.push(e),n.push(o),n.push(a)}const o={id:Object(d.v)(),source:t.depends_on,target:t.task_id,type:"0"};return n.push(o),n}formatDate(t,e,i){if(!t)return;"string"==typeof t&&(t=parseInt(t,10));const n=p(t);let o;const a=p().add(10,"years").valueOf();if(n.valueOf()>a)return p().add(10,"years").format(l.f);const r=p().subtract(10,"years").valueOf();return n.valueOf()<r?p().subtract(10,"years").format(l.f):("start"===e?o=n.startOf(i):"end"===e&&(o=n.endOf(i)),o.format(l.f))}formatHalfDate(t,e){if(!t)return;"string"==typeof t&&(t=parseInt(t,10));const i=p(t);let n;const o=p().add(10,"years").valueOf();if(i.valueOf()>o)return p().add(10,"years").format(l.f);const a=p().subtract(10,"years").valueOf();return i.valueOf()<a?p().subtract(10,"years").format(l.f):("start"===e?n=i.startOf("day").add(12,"hours"):"end"===e&&(n=i.endOf("day").subtract(12,"hours")),n.format(l.f))}ganttMaxDate(t){if(!t)return null;"string"==typeof t&&(t=parseInt(t,10));const e=p(t),i=p().add(10,"years").valueOf();return e.valueOf()>i?p().add(10,"years").valueOf().toString():t.toString()}loadListTasks(t){this.store.select(r.n).pipe(Object(n.a)(1)).subscribe(e=>{e[t]&&(this.store.dispatch(s.ganttChartLoading({loading:!0})),this.store.dispatch(s.ganttGetTasksData({taskIds:e[t]||[],replace:!1})))})}updateTaskDates(t,e,i,n){let o=null,a=null;if(t.start_date){const e=p(t.start_date);if(i===u.b.Hour)o=e.valueOf();else if(t.startDateTime&&t.originalStart){const i=Object(d.r)(t.originalStart);o=e.add(i,"milliseconds").valueOf()}else o=e.add(4,"hours").valueOf()}if(t.end_date){let e=p(t.end_date);if(59===p(t.end_date).seconds()&&(e=p(t.end_date).add(1,"second")),i===u.b.Hour)a=e.valueOf();else if(t.endDateTime&&t.originalEnd){const i=Object(d.r)(t.originalEnd);a=e.subtract(1,"day").add(i,"milliseconds").valueOf()}else a=e.subtract(1,"day").add(4,"hours").valueOf()}let r={start_date:t.isMilestone?null:o,due_date:a};if(i===u.b.Hour){let e=p(t.start_date).valueOf(),i=p(t.end_date).valueOf();if("start"===n&&(r={start_date:t.isMilestone?null:e,start_date_time:!0}),"end"===n&&(r={due_date:i,due_date_time:!0}),"both"===n){const n=c.gantt.roundDate(p(t.start_date).toDate());e=p(n).valueOf();const o=c.gantt.roundDate(p(t.end_date).toDate());i=p(o).valueOf(),r={start_date:t.isMilestone?null:e,start_date_time:!0,due_date:i,due_date_time:!0}}}if(e)return r;this.store.dispatch(s.ganttEditTask({id:t.id,body:r}))}addLink(t){const e=c.gantt.getLinks(),i=c.gantt.getTask(t.source),n=c.gantt.getTask(t.target);if(Object(d.p)(i.id)===Object(d.p)(n.id))return this.addToastItem("Cannot create links between same tasks"),!1;if(i&&"task"!==i.kind||n&&"task"!==n.kind)return this.addToastItem("Can only create links between tasks"),!1;if(!i||!i.permissions.add_dependencies)return this.addToastItem("You don't have permission to add this link"),!1;if(!n||!n.permissions.add_dependencies)return this.addToastItem("You don't have permission to add this link"),!1;if(e.some(e=>e.source===Object(d.p)(t.source)&&e.target===Object(d.p)(t.target))||e.some(e=>e.source===Object(d.p)(t.target)&&e.target===Object(d.p)(t.source)))return this.addToastItem("Link already exists!"),!1;const o={task_id:Object(d.p)(t.target),depends_on:Object(d.p)(t.source)};return this.store.dispatch(s.ganttAddLink({body:o,taskIds:[Object(d.p)(t.target),Object(d.p)(t.source)]})),!1}deleteLink(t){const e=c.gantt.getLink(t),i=c.gantt.getTask(e.source),n=c.gantt.getTask(e.target);i&&i.permissions.remove_dependencies&&n&&n.permissions.remove_dependencies?this.openGanttModal("Delete Dependency",`Delete dependency from ${i.text} to ${n.text}?`,"ganttDeleteLink",{task_id:e.target,depends_on:e.source,link:e},"","Delete","Cancel"):this.addToastItem("You don't have permission to delete this link")}clearGantt(){c.gantt.clearAll(),this.store.dispatch(s.ganttResetState())}addToastItem(t){this.sharedDataService.addToastItem({title:t})}openGanttModal(t,e,i,n,o="",a,r){c.gantt.modalbox({title:t,text:e,buttons:[{label:a,css:""+o,value:"ok"},{label:r,css:""+o,value:"cancel"}],callback:t=>{"ok"===t&&this.store.dispatch(s[i](n))}})}initPosition(t){Object(d.c)(p(),p(c.gantt.config.start_date),p(c.gantt.config.end_date))?c.gantt.showDate(new Date):t.first&&c.gantt.showTask(t.first.id)}updateGanttColumns(t,e){const i=["text","arrow","columnMenu","sidebarToggle"];let n=0;c.gantt.config.columns.forEach((e,o)=>{t[e.name]||i.includes(e.name)?(c.gantt.config.columns[o].hide=!1,n+=c.gantt.config.columns[o].width):t[e.name]||i.includes(e.name)||(c.gantt.config.columns[o].hide=!0)}),c.gantt.config.grid_width=n,e&&c.gantt.render()}toggleCollapseSidebar(t,e,i){e?(c.gantt.config.columns.forEach((t,e)=>{"sidebarToggle"!==t.name&&(c.gantt.config.columns[e].hide=!0)}),c.gantt.config.grid_width=20,i&&c.gantt.render()):this.updateGanttColumns(t,i)}updateDateScale(t,e,i,n){c.gantt.config.scales=l.e.scales[t],c.gantt.config.min_column_width=l.e.minColumnWidth[t],c.gantt.config.min_duration=l.k.day,this.updateScaleFromCaps(t,e,!1),t===u.b.Hour&&(c.gantt.config.min_duration=l.k.hour,n.twenty_four_hr_setting&&(c.gantt.config.scales=l.e.scales.hour24)),c.gantt.config.round_dnd_dates=t===u.b.Hour||t===u.b.Day||t===u.b.Week,i?this.toggleZoomToFit(!1,t,!1):c.gantt.render()}updateScaleFromCaps(t,e,i){const n=p(e.first?parseInt(e.first.originalStart,10):new Date),o=p(e.last?parseInt(e.last.originalEnd,10):new Date);c.gantt.config.start_date=n.subtract(l.i[t],"ms").toDate(),c.gantt.config.end_date=o.add(l.i[t],"ms").toDate(),i&&c.gantt.render()}toggleZoomToFit(t,e,i){if(t&&(c.gantt.config.scales=l.e.scales[e],c.gantt.config.min_column_width=l.e.minColumnWidth[e],c.gantt.render()),!t){const t=p(c.gantt.config.start_date),i=p(c.gantt.config.end_date).diff(t,"days"),n=document.querySelector(".gantt_task");let o=window.innerWidth;n&&(o=n.offsetWidth),e===u.b.Day&&(c.gantt.config.scales=l.e.smallScales.day);const a=Math.floor(o/i);a<15&&(c.gantt.config.scales=l.e.scales.month),c.gantt.config.min_column_width=a,c.gantt.render()}i&&this.store.dispatch(s.ganttZoomToFit({zoom:!t}))}toggleWeekends(t,e){!t||e!==u.b.Day&&e!==u.b.Week&&e!==u.b.Hour?(c.gantt.config.work_time=!1,c.gantt.config.skip_off_time=!1):(c.gantt.config.work_time=!0,c.gantt.config.skip_off_time=!0),c.gantt.setWorkTime({hours:[0,24]}),c.gantt.render()}initTodayMarker(){const t=p().startOf("day").toDate();c.gantt.addMarker({start_date:t,css:"today-marker",text:"Today"})}bulkUpdateTaskDates(t,e,i){let n=Object(d.i)(e,t.end_date);i===u.b.Hour&&(n=Object(d.j)(e,t.end_date)),0!==n&&(this.store.dispatch(s.ganttChartLoading({loading:!0})),this.store.dispatch(s.ganttGetIdsForBulkEditDates({kind:t.kind,spaceId:"space"===t.kind?t.id:null,folderId:"folder"===t.kind?t.id:null,listId:"list"===t.kind?t.id:null,taskId:"task"===t.kind?t.id:null,timeToAdd:n})))}bulkUpdateDependencyDates(t,e,i,n,o,a){this.ganttService.editTask(t.id,this.updateTaskDates(t,!0,n)).subscribe(r=>{let l=Object(d.i)(e,t.end_date);n===u.b.Hour&&(l=Object(d.j)(e,t.end_date));const h=Array.from(new Set(i));if(!h.length)return;const p=[];o&&h.forEach(t=>{const e=c.gantt.getTask(t);e&&p.push(e)}),this.store.dispatch(s.ganttGetDataForBulkEditDates({taskIds:h,timeToAdd:l,draggedTask:r.task,skipWeekends:o,rescheduledGanttTasks:p,dateScale:n,side:a}))})}toggleCriticalPath(t,e){c.gantt.config.highlight_critical_path=t,e&&c.gantt.render()}createTaskPositionLayer(t){t?this.taskPositionLayer=c.gantt.addTaskLayer({renderer:function(t){if("addTask"===t.kind||"addList"===t.kind||"addFolder"===t.kind)return;const e=document.querySelector(".gantt_task_bg");let i=e?e.offsetHeight:window.innerHeight;i<window.innerHeight&&(i=window.innerHeight);const n=c.gantt.getTaskPosition(t,t.start_date,t.end_date),o=document.createElement("div");return o.className="cu-gantt__chart-task-position-layer",o.style.left=n.left+"px",o.style.width=n.width+"px",o.style.height=i+"px",o},filter:t=>t.id===c.gantt.getState().drag_id}):this.removeTaskLayer(this.taskPositionLayer)}addSlackLayers(t){t?this.slackLayers=c.gantt.addTaskLayer(function(t){if("addTask"===t.kind||"addList"===t.kind||"addFolder"===t.kind||t.unscheduled)return;const e=c.gantt.getFreeSlack(t);if(!e)return null;const i=c.gantt.getState().drag_mode;if("resize"===i||"move"===i)return null;const n=new Date(t.end_date),o=c.gantt.calculateEndDate({start_date:n,duration:e}),a=c.gantt.getTaskPosition(t,n,o),r=document.createElement("div");return r.className="cu-gantt__chart-slack-layer",r.style.left=a.left+"px",r.style.top=a.top+2+"px",r.style.width=a.width+"px",r.style.height=a.height+"px",r}):this.removeTaskLayer(this.slackLayers)}addPlannedListBars(t,e){if(!t)return void this.removeTaskLayer(this.plannedListBars);const i=this.getGanttDateFormat(e);this.plannedListBars=c.gantt.addTaskLayer(function(t){if("list"===t.kind&&t.plannedStart&&t.plannedEnd){const e=new Date(t.plannedStart),n=new Date(t.plannedEnd),o=p(e).format(i),a=p(n).format(i),r=p(e).subtract(1,"day").toDate(),s=p(n).add(1,"day").toDate(),u=c.gantt.getTaskPosition(t,r,s),d=document.createElement("div");d.className="cu-gantt__chart-planned-list-bar "+t.id,d.style.left=u.left+"px",d.style.width=u.width+"px",d.style.top=u.top+30+"px",d.style.backgroundColor=l.b.plannedListBar;const h=document.createElement("span");h.className="cu-gantt__tooltip extra-padding no-max-width";const f=document.createTextNode(`${t.text} planned dates: ${o} - ${a}`);return h.appendChild(f),d.appendChild(h),d}return!1})}refreshSlackLayers(t){t&&(c.gantt.addTask({id:"42069",text:"",parent:"-1"}),c.gantt.deleteTask("42069"))}removeTaskLayer(t){c.gantt.removeTaskLayer(t)}prepareGanttForPdf(t,e,i){document.querySelector(".cu-gantt__chart").classList.add("show-branding");const n=e.v2.viewSettings.dateScale;this.scrollState=c.gantt.getScrollState(),this.store.dispatch(s.ganttPdfLoading({loading:!0})),i&&document.body.classList.remove("dark-theme");const o=c.gantt.getSubtaskDates();c.gantt.config.start_date=o.start_date?p(o.start_date).subtract(10,"days").toDate():p().subtract(10,"days").toDate(),c.gantt.config.end_date=o.end_date?p(o.end_date).add(30,"days").toDate():p().add(30,"days").toDate();const a=p(c.gantt.config.start_date),r=p(c.gantt.config.end_date);let h=r.diff(a,"days");n===u.b.Hour&&(c.gantt.config.start_date=p(o.start_date).subtract(1,"hours").toDate(),c.gantt.config.end_date=p(o.end_date).add(3,"hours").toDate(),h=r.diff(a,"hours"));const f=c.gantt.getVisibleTaskCount();this.pdfSize=Object(d.d)(h,f,l.e.minColumnWidth[n],l.e.rowHeight),t.classList.add(this.pdfSize),t.classList.add("pdf"),c.gantt.render(),n!==u.b.Hour&&n!==u.b.Day&&n!==u.b.Week||(c.gantt.config.grid_width+h*l.e.minColumnWidth[n]>t.offsetWidth&&(c.gantt.config.min_column_width=Math.floor(t.offsetWidth/h)),l.e.scaleHeight+f*l.e.rowHeight>t.offsetHeight&&(c.gantt.config.row_height=Math.floor((t.offsetHeight-l.e.scaleHeight)/f)),c.gantt.render())}resetGanttFromPdf(t,e,i,n){i.classList.remove("show-branding");const o=document.querySelector(".cu-gantt__chart-container");o.classList.remove("pdf"),o.classList.remove(this.pdfSize),n&&document.body.classList.add("dark-theme"),c.gantt.config.scales=l.e.scales[t.v2.viewSettings.dateScale],c.gantt.config.min_column_width=l.e.minColumnWidth[t.v2.viewSettings.dateScale],c.gantt.config.row_height=l.e.rowHeight;const a=p(e.first?parseInt(e.first.originalStart,10):new Date),r=p(e.last?parseInt(e.last.originalEnd,10):new Date);c.gantt.config.start_date=a.subtract(l.i[t.v2.viewSettings.dateScale],"ms").toDate(),c.gantt.config.end_date=r.add(l.i[t.v2.viewSettings.dateScale],"ms").toDate(),c.gantt.render(),c.gantt.scrollTo(this.scrollState.x,this.scrollState.y),this.store.dispatch(s.ganttPdfLoading({loading:!1}))}saveGanttAsPdf(t,e,n,o,a){return r=this,void 0,c=function*(){const r=(yield i.e(44).then(i.t.bind(null,"1n7x",7))).default,s={margin:.42,filename:g()(e),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,foreignObjectRendering:!0,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:this.pdfSize,orientation:"landscape"}};r().set(s).from(t).save().then(()=>{this.resetGanttFromPdf(n,o,t,a)})},new((s=void 0)||(s=Promise))(function(t,e){function i(t){try{o(c.next(t))}catch(i){e(i)}}function n(t){try{o(c.throw(t))}catch(i){e(i)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof s?o:new s(function(t){t(o)})).then(i,n)}o((c=c.apply(r,[])).next())});var r,s,c}openInitialItems(t,e){if(_.k)return void this.publicViewData$.pipe(Object(n.a)(1)).subscribe(t=>{c.gantt.isTaskExists(t.viewParent.id)&&c.gantt.open(t.viewParent.id)});let i=null;e.parent&&(i=c.gantt.getTask(e.parent.id)),this.store.dispatch(s.ganttPreventOnOpenEvent({prevent:!0})),i&&(c.gantt.open(i.id),this.store.dispatch(s.ganttUpdateOpenedItems({kind:i.kind,id:i.id,value:"open"})));const l=t.v2.openedItems.list,u=[];e.parent&&e.parent.type===b.e.Subcategory&&(l.push(i.id),c.gantt.showTask(i.id)),this.store.select(r.m).pipe(Object(o.a)(t=>!1===t),Object(a.a)(this.store.select(r.n)),Object(n.a)(1)).subscribe(([t,e])=>{let i=[];l.forEach(t=>{e[t]&&c.gantt.isTaskExists(t)&&(u.push(t),i=i.concat(e[t]),this.store.dispatch(s.ganttAddToLoadedLists({id:t})),this.store.dispatch(s.ganttUpdateOpenedItems({kind:"list",id:t,value:"open"})))}),i.length&&(this.store.dispatch(s.ganttBulkUpdateItems({kind:"list",ids:u,values:{type:"project"}})),this.store.dispatch(s.ganttChartLoading({loading:!0})),this.store.dispatch(s.ganttGetTasksData({taskIds:i||[],replace:!0})))}),this.store.dispatch(s.ganttPreventOnOpenEvent({prevent:!1}))}checkNeedExtendDateScale(t,e){if(!e.first||!e.last)return;const i=p(c.gantt.config.start_date).valueOf(),n=p(c.gantt.config.end_date).valueOf();let o=!1;parseInt(e.first.originalStart,10)-i==0&&(o=!0),parseInt(e.last.originalEnd,10)-n==0&&(o=!0),o&&this.updateScaleFromCaps(t,e,!0)}checkHierarchyFilter(t,e,i){let n=!1;const o=[],a=[];t&&t.filter&&t.filter.filters&&(t.filter.filters.forEach(t=>{"location"===t.field&&"EQ"===t.op?(n=!0,t.values.forEach(t=>{o.push(t.id)})):"location"===t.field&&"NOT"===t.op&&(n=!0,t.values.forEach(t=>{a.push(t.id)}))}),!n&&i?(e.forEach(t=>{t.parent="originalParent"in t?t.originalParent:null}),this.store.dispatch(s.ganttHierarchyFilterActive({active:!1})),this.store.dispatch(s.ganttUpdateHierarchies({hierarchies:e}))):n&&(o.length&&e.forEach(t=>{t.parent=o.includes(t.id)||"folder"in t&&o.includes(t.folder)||"space"in t&&o.includes(t.space)||o.includes(t.parent)||"originalParent"in t&&o.includes(t.originalParent)||"addList"===t.kind||"addFolder"===t.kind||"folders"in t&&t.folders&&o.some(e=>t.folders.includes(e))||"lists"in t&&t.lists&&o.some(e=>t.lists.includes(e))?"originalParent"in t?t.originalParent:null:"-1"}),a.length&&e.forEach(t=>{t.parent=a.includes(t.id)||"folder"in t&&a.includes(t.folder)||"space"in t&&a.includes(t.space)?"-1":"originalParent"in t?t.originalParent:null}),this.store.dispatch(s.ganttHierarchyFilterActive({active:!0})),this.store.dispatch(s.ganttUpdateHierarchies({hierarchies:e}))))}getMilestoneStartDate(t){return t.due_date?this.formatDate(t.due_date,"end","day"):t.start_date?this.formatDate(t.start_date,"start","day"):null}getHierarchyFromPublicView(t,e,i){if(e===b.e.Subcategory)return this.formatList(t.groups[0].data,!1,!1,i.v2.viewSettings.colorScheme,!1);if(e===b.e.Category){const e=Object.assign(Object.assign({},t.groups[0].data.category),{subcategories:t.groups.map(t=>t.data)});return this.formatFolder(e,!1,i.v2.viewSettings.colorScheme,!1)}return e===b.e.Project||e===b.e.Team?Object.values(Object(m.a)(t.groups,t=>t.data.project.id)).map(t=>{const e=Object.assign(Object.assign({},t[0].data.project),{categories:Object.values(Object(m.a)(t,t=>t.data.category.id)).map(t=>Object.assign(Object.assign({},t[0].data.category),{project_id:t[0].data.project.id,subcategories:t.map(e=>(e.data.category.hidden&&(e.data.project_id=t[0].data.project.id),e.data))}))});return this.formatSpace(e,i.v2.viewSettings.colorScheme,!1)}).flat():[]}addDatesToScale(t,e){if("end"===t){const t=p(c.gantt.config.end_date);c.gantt.config.end_date=t.add(l.i[e],"ms").toDate(),c.gantt.render()}}addDatesToScaleBeforeDrag(t){const e=p(c.gantt.config.end_date);c.gantt.config.end_date=e.add(l.a[t],"ms").toDate(),c.gantt.render()}getTaskFromMouseEvent(t){const e=document.querySelector(".cu-gantt__chart-container");if(!e)return null;const i=e.getBoundingClientRect(),n=t.clientY-i.top-l.e.scaleHeight+c.gantt.getScrollState().y,o=Math.floor(n/l.e.rowHeight);return c.gantt.getTaskByIndex(o)}getGanttDateFormat(t){if(!t)return"M/D/YY";let e="";switch(t.date_format){case"m/d/y":e="M/D/YY";break;case"d/m/y":e="D/M/YY";break;case"y/m/d":e="YY/M/D";break;default:e="MMM D YYYY"}return e}adjustDateForSkipWeekends(t,e,i,n,o,a){if(!t)return null;const r=i.findIndex(t=>t.id===e.id);if(-1===r)return t;const s=i[r],l=c.gantt.roundDate(s.start_date),u=p(l);6===u.day()&&(s.start_date=u.add(2,"days").toDate());const d=this.updateTaskDates(s,!0,n,o);return"due"===a?d.due_date:"start"===a?d.start_date:void 0}formatSharedData(t=[],e=[],i){let n=u.a.Default;i.ganttSettings.v2?n=i.ganttSettings.v2.viewSettings.colorScheme:i.ganttSettings.viewSettings&&(n=i.ganttSettings.viewSettings.colorScheme);let o=[];t.forEach(t=>{const e=this.formatFolder(t,!1,n);o=o.concat(e)}),e.forEach(t=>{const e=this.formatList(t,!1,!0,n,!1);o=o.concat(e)}),o.push({color:"#fff",denominator:0,end_date:"",folder:"",id:"420",kind:"list",listColor:"#fff",numerator:0,orderIndex:999999,originalStart:"",originalEnd:"",originalParent:"",override_statuses:!1,parent:"",permissions:null,permissionLevel:null,plannedEnd:"",plannedStart:"",progress:0,progressColor:"#fff",space:"",start_date:"",status:null,statuses:[],taskCount:0,text:"Shared with me",timeEstimate:0,timeLogged:0,type:"project",unscheduled:!0}),this.store.dispatch(s.ganttSetHierarchies({hierarchies:o}))}}return t.\u0275fac=function(e){return new(e||t)(k.nc(x.Store),k.nc(S.a),k.nc(T.a),k.nc(C.a),k.nc(k.t))},t.\u0275prov=k.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},TuBq:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return c});var n=i("fXoL"),o=i("b3AA");const a=["ngDiagram"],r=["ngOverview"];let s=(()=>{class t{constructor(t,e,i){this._differs=t,this._kvdiffers=e,this.zone=i,this.linkDataArray=null,this.modelData=null,this.modelChangedListener=null,this.skipsDiagramUpdate=!1,this.modelChange=new n.o,this.diagram=null,this._ndaDiffer=this._kvdiffers.find([]).create(),this._ldaDiffer=this._kvdiffers.find([]).create()}ngOnInit(){this.modelData&&(this._mdDiffer=this._kvdiffers.find(this.modelData).create())}ngAfterViewInit(){this.diagram=this.initDiagram(),this.diagram.addEventListener=(t,e,i,n)=>{const a=o.Diagram.prototype.addEventListener;"mousemove"===e?this.zone.runOutsideAngular(()=>a.call(this,t,e,i,n)):this.zone.run(()=>{a.call(this,t,e,i,n)})};const t=this.diagramDiv.nativeElement;null!==t&&(this.diagram.div=t,this.diagram.delayInitialization(()=>{this.diagram.model.commit(t=>{t.mergeNodeDataArray(t.cloneDeep(this.nodeDataArray)),this.linkDataArray&&t instanceof o.GraphLinksModel&&t.mergeLinkDataArray(t.cloneDeep(this.linkDataArray)),this.modelData&&t.assignAllDataProperties(t.modelData,this.modelData)},null)}),this.modelChangedListener=t=>{t.isTransactionFinished&&this.zone.run(()=>{const e=t.model.toIncrementalData(t);this.modelChange.emit(e)})},this.diagram.addModelChangedListener(this.modelChangedListener))}ngDoCheck(){if(this.skipsDiagramUpdate)return;function t(e,i){for(const n in e){if(e.hasOwnProperty(n)!==i.hasOwnProperty(n))return!1;switch(typeof e[n]){case"object":if(!t(e[n],i[n]))return!1;break;case"function":if(void 0===i[n]||"compare"!==n&&e[n].toString()!==i[n].toString())return!1;break;default:if(e[n]!==i[n])return!1}}for(const t in i)if(void 0===e[t])return!1;return!0}function e(e){let i=0,n=0;if(e){let o=0;e.forEachAddedItem(t=>{o++});let a=0;if(e.forEachRemovedItem(t=>{a++}),o>0||a>0)return!0;e.forEachChangedItem(e=>{const o=t(e.currentValue,e.previousValue);i++,o&&n++})}return!(!e||n===i)}let i=this._ndaDiffer.diff(this.nodeDataArray);e(i)||(i=null);let n=this._ldaDiffer.diff(this.linkDataArray);e(n)||(n=null);let o=null;this._mdDiffer&&(o=this._mdDiffer.diff(this.modelData),e(o)||(o=null)),(i||n||o)&&this.updateFromAppData()}updateFromAppData(){if(!this.diagram)return;const t=this.diagram.model;null!==this.modelChangedListener&&t.removeChangedListener(this.modelChangedListener),t.startTransaction("update data"),t.mergeNodeDataArray(t.cloneDeep(this.nodeDataArray)),this.linkDataArray&&t instanceof o.GraphLinksModel&&t.mergeLinkDataArray(t.cloneDeep(this.linkDataArray)),this.modelData&&t.assignAllDataProperties(t.modelData,this.modelData),t.commitTransaction("update data"),null!==this.modelChangedListener&&t.addChangedListener(this.modelChangedListener)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(n.u),n.Wb(n.v),n.Wb(n.B))},t.\u0275cmp=n.Qb({type:t,selectors:[["gojs-diagram"]],viewQuery:function(t,e){if(1&t&&n.jd(a,3),2&t){let t;n.Qc(t=n.rc())&&(e.diagramDiv=t.first)}},inputs:{linkDataArray:"linkDataArray",modelData:"modelData",modelChangedListener:"modelChangedListener",skipsDiagramUpdate:"skipsDiagramUpdate",initDiagram:"initDiagram",nodeDataArray:"nodeDataArray",divClassName:"divClassName"},outputs:{modelChange:"modelChange"},decls:2,vars:1,consts:[[3,"className"],["ngDiagram",""]],template:function(t,e){1&t&&n.Xb(0,"div",0,1),2&t&&n.Dc("className",e.divClassName)},encapsulation:2}),t})(),c=(()=>{class t{constructor(t){this.zone=t,this.observedDiagram=null,this.overview=null}ngAfterViewInit(){this.overviewDiv&&(this.initOverview?this.overview=this.initOverview():(this.overview=new o.Overview,this.overview.contentAlignment=o.Spot.Center),this.overview.addEventListener=(t,e,i,n)=>{const a=o.Diagram.prototype.addEventListener;"mousemove"===e?this.zone.runOutsideAngular(()=>a.call(this,t,e,i,n)):this.zone.run(()=>{a.call(this,t,e,i,n)})},this.overview.div=this.overviewDiv.nativeElement)}ngOnChanges(t){this.overview&&t&&t.observedDiagram&&t.observedDiagram.currentValue!==t.observedDiagram.previousValue&&(this.overview.observed=t.observedDiagram.currentValue)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(n.B))},t.\u0275cmp=n.Qb({type:t,selectors:[["gojs-overview"]],viewQuery:function(t,e){if(1&t&&n.jd(r,3),2&t){let t;n.Qc(t=n.rc())&&(e.overviewDiv=t.first)}},inputs:{observedDiagram:"observedDiagram",initOverview:"initOverview",divClassName:"divClassName"},features:[n.Gb],decls:2,vars:1,consts:[[3,"className"],["ngOverview",""]],template:function(t,e){1&t&&n.Xb(0,"div",0,1),2&t&&n.Dc("className",e.divClassName)},encapsulation:2}),t})(),l=(()=>{class t{}return t.\u0275mod=n.Ub({type:t}),t.\u0275inj=n.Tb({factory:function(e){return new(e||t)},imports:[[]]}),t})()},WvjT:function(t,e,i){"use strict";i.d(e,"a",function(){return H});var n=i("dTHz"),o=i("fXoL"),a=i("jJQC"),r=i("itXk"),s=i("IzEk"),c=i("l7P3"),l=i("TqRa"),u=i("MguC"),d=i("Gj5t"),h=i("c3rA"),p=i("GkwO"),f=i("o7Ov"),g=i("Tm/s"),m=i("ofXK"),v=i("EP2k");function b(t,e){1&t&&o.Yb(0)}function _(t,e){1&t&&o.Yb(0)}function w(t,e){if(1&t&&o.bd(0,_,1,0,"ng-container",0),2&t){const t=o.uc(),e=o.Rc(4),i=o.Rc(8);o.Dc("ngIf",t.isGuestTeam||t.isSharedSpace)("ngIfThen",e)("ngIfElse",i)}}function y(t,e){1&t&&(o.mc(0,82,1),o.Yb(1),o.jc())}function k(t,e){if(1&t&&(o.cc(0,"div",5),o.tc(),o.cc(1,"svg",6),o.cc(2,"defs"),o.Xb(3,"path",7),o.bc(),o.cc(4,"g",8),o.Xb(5,"path",9),o.Xb(6,"path",10),o.Xb(7,"path",11),o.Xb(8,"path",12),o.Xb(9,"path",13),o.Xb(10,"path",14),o.Xb(11,"path",15),o.Xb(12,"path",16),o.Xb(13,"path",17),o.Xb(14,"path",18),o.Xb(15,"path",19),o.Xb(16,"path",20),o.Xb(17,"path",21),o.Xb(18,"path",22),o.Xb(19,"path",23),o.Xb(20,"path",24),o.Xb(21,"path",25),o.Xb(22,"path",26),o.Xb(23,"path",27),o.Xb(24,"path",28),o.cc(25,"g",29),o.cc(26,"mask",30),o.Xb(27,"use",31),o.bc(),o.Xb(28,"path",32),o.Xb(29,"path",33),o.Xb(30,"path",34),o.Xb(31,"path",35),o.Xb(32,"path",36),o.Xb(33,"path",37),o.Xb(34,"path",38),o.Xb(35,"path",39),o.Xb(36,"path",40),o.Xb(37,"path",41),o.Xb(38,"path",42),o.Xb(39,"path",43),o.Xb(40,"path",44),o.Xb(41,"path",45),o.Xb(42,"path",46),o.Xb(43,"path",47),o.Xb(44,"path",48),o.Xb(45,"path",49),o.Xb(46,"path",50),o.Xb(47,"path",51),o.bc(),o.Xb(48,"path",52),o.Xb(49,"path",53),o.Xb(50,"path",54),o.Xb(51,"path",55),o.Xb(52,"path",56),o.Xb(53,"path",57),o.Xb(54,"path",58),o.Xb(55,"path",59),o.Xb(56,"path",60),o.Xb(57,"path",61),o.Xb(58,"path",62),o.Xb(59,"path",63),o.Xb(60,"path",64),o.Xb(61,"path",65),o.Xb(62,"path",66),o.Xb(63,"path",67),o.Xb(64,"path",68),o.Xb(65,"path",69),o.Xb(66,"path",70),o.Xb(67,"path",71),o.Xb(68,"path",72),o.Xb(69,"path",73),o.Xb(70,"path",74),o.Xb(71,"path",75),o.Xb(72,"path",76),o.Xb(73,"path",77),o.Xb(74,"path",78),o.bc(),o.bc(),o.bc(),o.sc(),o.cc(75,"div",79),o.gc(76,80),o.bc(),o.cc(77,"div",81),o.mc(78,82),o.bd(79,y,2,0,"ng-container",83),o.jc(),o.bc()),2&t){const t=o.uc();o.Ib(79),o.Dc("ngIf",!t.isListExists)}}function x(t,e){if(1&t){const t=o.dc();o.ac(0),o.cc(1,"div",84),o.Xb(2,"img",85),o.bc(),o.cc(3,"div",79),o.gc(4,86),o.bc(),o.cc(5,"div",81),o.mc(6,87),o.cc(7,"a",88),o.qc("click",function(){return o.Uc(t),o.uc(2).onSwitchToTeam.emit()}),o.bc(),o.jc(),o.bc(),o.Zb()}}function S(t,e){if(1&t){const t=o.dc();o.cc(0,"div",81),o.cc(1,"a",92),o.qc("click",function(){return o.Uc(t),o.uc(3).onClearFilter.emit()}),o.gc(2,93),o.bc(),o.bc()}}function T(t,e){if(1&t&&(o.ac(0),o.cc(1,"div",84),o.Xb(2,"img",89),o.bc(),o.cc(3,"div",79),o.gc(4,90),o.vc(5,"username"),o.bc(),o.bd(6,S,3,0,"div",91),o.Zb()),2&t){const t=o.uc(2);o.Ib(2),o.Dc("src",t.noFilterResultsImg,o.Xc),o.Ib(3),o.kc(o.xc(5,3,t.selectedUser,"Me")),o.hc(4),o.Ib(1),o.Dc("ngIf",!t.isFrozenView)}}function C(t,e){if(1&t&&(o.bd(0,x,8,0,"ng-container",83),o.bd(1,T,7,6,"ng-container",83)),2&t){const t=o.uc();o.Dc("ngIf",t.isMeTabSelected),o.Ib(1),o.Dc("ngIf",!t.isMeTabSelected)}}function D(t,e){if(1&t){const t=o.dc();o.cc(0,"div",96),o.qc("click",function(){return o.Uc(t),o.uc(2).createSpace()}),o.cc(1,"div",97),o.tc(),o.cc(2,"svg",98),o.cc(3,"g",99),o.Xb(4,"rect",100),o.Xb(5,"rect",101),o.Xb(6,"rect",102),o.bc(),o.bc(),o.bc(),o.sc(),o.cc(7,"div",79),o.gc(8,103),o.bc(),o.bc()}}function I(t,e){if(1&t){const t=o.dc();o.ac(0),o.cc(1,"a",92),o.qc("click",function(){return o.Uc(t),o.uc(7).onClearFilter.emit()}),o.gc(2,109),o.bc(),o.dd(3,". "),o.Zb()}}function P(t,e){if(1&t&&(o.ac(0),o.ac(1),o.gc(2,108),o.Zb(),o.bd(3,I,4,0,"ng-container",83),o.Zb()),2&t){const t=o.uc(6);o.Ib(3),o.Dc("ngIf",!t.isFrozenView)}}function M(t,e){if(1&t){const t=o.dc();o.ac(0),o.cc(1,"a",92),o.qc("click",function(){return o.Uc(t),o.uc(7).onClearFilter.emit()}),o.gc(2,111),o.bc(),o.dd(3,". "),o.Zb()}}function O(t,e){if(1&t&&(o.ac(0),o.ac(1),o.gc(2,110),o.Zb(),o.bd(3,M,4,0,"ng-container",83),o.Zb()),2&t){const t=o.uc(6);o.Ib(3),o.Dc("ngIf",!t.isFrozenView)}}function $(t,e){if(1&t){const t=o.dc();o.ac(0),o.cc(1,"a",92),o.qc("click",function(){return o.Uc(t),o.uc(6).onUnfreeze.emit()}),o.gc(2,112),o.bc(),o.dd(3,". "),o.Zb()}}function j(t,e){if(1&t&&(o.ac(0),o.bd(1,P,4,1,"ng-container",106),o.bd(2,O,4,1,"ng-template",null,107,o.cd),o.bd(4,$,4,0,"ng-container",83),o.vc(5,"async"),o.Zb()),2&t){const t=o.Rc(3),e=o.uc(5);o.Ib(1),o.Dc("ngIf",e.isSharingApp)("ngIfElse",t),o.Ib(3),o.Dc("ngIf",e.isFrozenView&&o.wc(5,3,e.userProtectionPermission$)===e.UserPermission.CREATE)}}function L(t,e){1&t&&(o.ac(0),o.gc(1,113),o.Zb())}function E(t,e){if(1&t&&(o.cc(0,"div",81),o.bd(1,j,6,5,"ng-container",83),o.bd(2,L,2,0,"ng-container",83),o.bc()),2&t){const t=o.uc(4);o.Ib(1),o.Dc("ngIf",t.isFilter),o.Ib(1),o.Dc("ngIf",!t.isFilter)}}function N(t,e){1&t&&(o.mc(0,114,2),o.Yb(1),o.jc())}function A(t,e){if(1&t&&(o.mc(0,114,1),o.ac(1),o.bd(2,N,2,0,"ng-container",83),o.Zb(),o.jc()),2&t){const t=e.$implicit,i=e.last;o.Ib(2),o.Dc("ngIf",!i),o.kc(t.username),o.hc(0)}}function V(t,e){if(1&t){const t=o.dc();o.cc(0,"div",81),o.mc(1,114),o.bd(2,A,3,2,"ng-container",115),o.cc(3,"a",92),o.qc("click",function(){return o.Uc(t),o.uc(4).clearDataViewUsersFilter.emit()}),o.bc(),o.jc(),o.bc()}if(2&t){const t=o.uc(4);o.Ib(2),o.Dc("ngForOf",t.filterAssigneesUsers)("ngForTrackBy",t.trackById)}}function z(t,e){if(1&t&&(o.ac(0),o.cc(1,"div",84),o.Xb(2,"img",89),o.bc(),o.bd(3,E,3,2,"div",104),o.bd(4,V,4,2,"ng-template",null,105,o.cd),o.Zb()),2&t){const t=o.Rc(5),e=o.uc(3);o.Ib(2),o.Dc("src",e.noFilterResultsImg,o.Xc),o.Ib(1),o.Dc("ngIf",0===e.filterAssigneesUsers.length)("ngIfElse",t)}}function F(t,e){1&t&&(o.ac(0),o.gc(1,120),o.Zb())}function B(t,e){1&t&&(o.ac(0),o.gc(1,121),o.Zb())}function R(t,e){if(1&t){const t=o.dc();o.cc(0,"div"),o.cc(1,"div",84),o.Xb(2,"img",116),o.bc(),o.cc(3,"div",81),o.bd(4,F,2,0,"ng-container",106),o.vc(5,"async"),o.bd(6,B,2,0,"ng-template",null,117,o.cd),o.bc(),o.cc(8,"div",118),o.qc("click",function(){return o.Uc(t),o.uc(3).createList()}),o.dd(9," + "),o.ac(10),o.gc(11,119),o.Zb(),o.bc(),o.bc()}if(2&t){const t=o.Rc(7),e=o.uc(3);let i=null;o.Ib(4),o.Dc("ngIf",(null==(i=o.wc(5,2,e.dataView$))||null==i.parent?null:i.parent.type)===e.DataViewParentType.Project)("ngIfElse",t)}}function U(t,e){if(1&t&&(o.bd(0,z,6,3,"ng-container",83),o.bd(1,R,12,4,"div",83)),2&t){const t=o.uc(2);o.Dc("ngIf",t.isFilter||t.isListExists),o.Ib(1),o.Dc("ngIf",!t.isListExists&&!t.isFilter)}}function G(t,e){if(1&t&&(o.bd(0,D,9,0,"div",94),o.bd(1,U,2,2,"ng-template",null,95,o.cd)),2&t){const t=o.Rc(2),e=o.uc();o.Dc("ngIf",!e.isSpaceExists)("ngIfElse",t)}}let H=(()=>{class t{constructor(t,e){this.navService=t,this.store=e,this.onClearFilter=new o.o,this.onUnfreeze=new o.o,this.onSwitchToTeam=new o.o,this.clearDataViewUsersFilter=new o.o,this.trackById=Object(a.d)("id"),this.isSharingApp=l.k,this.isSidebarCollapsed$=this.store.select(h.getSidebarIsCollapsedOption),this.userProtectionPermission$=this.store.pipe(Object(c.select)(p.Gb)),this.dataView$=this.store.select(p.qb),this.DataViewParentType=u.e,this.UserPermission=n.e,this.noFilterResultsImg=i("MHI1")}createSpace(){this.navService.onSpaceCreate.emit()}createSubcategory(t=!1){t&&this.store.dispatch(new f.yl),Object(r.a)([this.store.select(h.getCategory),this.store.select(h.getCategoriesWithoutFolderless)]).pipe(Object(s.a)(1)).subscribe(([t,e])=>{if(t)this.navService.onRemoveLastSection.emit(t.id);else if(e&&e.length){const t=e.find(t=>!t.subcategories||!t.subcategories.length);t&&this.navService.onRemoveLastSection.emit(t.id)}else this.navService.onCreateFolderlessList.emit()})}createFromTemplate(){this.navService.onOpenProjectTemplates.emit()}createList(){this.dataView$.pipe(Object(s.a)(1)).subscribe(t=>{t&&t.parent&&(t.parent.type===u.e.Project&&(this.navService.setProjectOpenState(t.parent.id,!0),this.store.dispatch(new f.Jb({projectId:t.parent.id,id:d.d,name:"List",redirect:!0,renameOnInit:!0}))),t.parent.type===u.e.Category&&(this.navService.setCategoryOpenState(t.parent.id,!0),this.navService.onCreateFromEmptyFolder.emit({folderId:t.parent.id,name:"List"})))})}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(g.a),o.Wb(c.Store))},t.\u0275cmp=o.Qb({type:t,selectors:[["cu-table-placeholder"]],inputs:{isMeTabSelected:"isMeTabSelected",isFilter:"isFilter",isAssigneeFilter:"isAssigneeFilter",isGuestTeam:"isGuestTeam",isSharedSpace:"isSharedSpace",isListExists:"isListExists",isProjectExists:"isProjectExists",isSpaceExists:"isSpaceExists",selectedUser:"selectedUser",isFrozenView:"isFrozenView",filterAssigneesUsers:"filterAssigneesUsers"},outputs:{onClearFilter:"onClearFilter",onUnfreeze:"onUnfreeze",onSwitchToTeam:"onSwitchToTeam",clearDataViewUsersFilter:"clearDataViewUsersFilter"},decls:9,vars:3,consts:function(){let t,e,i,n,a,r,s,c,l,u,d,h,p,f,g,m,v;return t=$localize`:@@common_empty-contents␟2660e2d57615c481b5f7ddbfdefc23fb907b43f9␟8790032278228598337: Nothing to see here. `,e=$localize`:@@cu-table-placeholder__no-lists-or-tasks-shared-with-you␟43cec81a2940b45fd27bbb280ecb925e7154e73d␟8756195478777568390: You don't have any ${"\ufffd*79:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:Lists or ${"\ufffd/#1:1\ufffd\ufffd/*79:1\ufffd"}:CLOSE_TAG_NG_CONTAINER: Tasks shared with you. `,i=$localize`:@@cu-table-placeholder__no-tasks-assigned-to-you␟36123a046d26d3d7b82093413df3e522ba874b38␟7105667651584268720: You don't have any tasks assigned to you `,n=$localize`:@@cu-table-placeholder__turn-off-me-mode␟e03ff75c58399a79fbc3a6e48abae7e545e268a6␟2668299330834301277: To see all tasks, ${"\ufffd#7\ufffd"}:START_LINK:turn off Me mode${"\ufffd/#7\ufffd"}:CLOSE_LINK:. `,a=$localize`:@@cu-table-placeholder__no-tasks-assigned-to-user␟52d47fad7916d60f46657dfa0666727d6e801f0d␟3618033766961113877: No tasks assigned to ${"\ufffd0\ufffd"}:INTERPOLATION: `,r=$localize`:@@common_clear-filter␟fe8dc1ef5b4a8b389ecaff0f4ac72f3e4f2c1a5c␟4965562695253171955:Clear filter`,s=$localize`:@@common_no-spaces␟811e08b4d27efb1cf17a000928112d0f811642e2␟9157893609981816307:No Spaces`,c=$localize`:@@cu-table-placeholder__search-applied-notice␟d5e7e04a52fac0a67bd1b3feebeee963fce3f6b8␟4989136804837321103: Search applied, some tasks are hidden. `,l=$localize`:@@cu-table-placeholder__link-txt_clear-search␟4e79cff7eaf245b6fb30f05c4b3b5fce0de16140␟8597591013614459698: Clear search`,u=$localize`:@@cu-table-placeholder__filter-applied-notice␟f534b91007163827c88602a16682a07ec5f5336b␟7133958977959089759: Filter applied, some tasks are hidden. `,d=$localize`:@@common_clear-filter␟97389019f97ebb6a0724bae67c6ef546841efbae␟3735644325371114648: Clear filter`,h=$localize`:@@cu-table-placeholder__unprotect-layout-for-filter-adjustment␟e61a89ce8c3c8514044b4ae0e35a17aa9534d379␟3848308010293126213:Unprotect layout to adjust filters`,p=$localize`:@@common_empty-contents␟b03f0a8bf85b20ddb7ba7107f1967ec32d72a3e9␟510879027734114335:Nothing to see here.`,f=$localize`:@@cu-table-placeholder__no-tasks-assigned-to-users␟52e24116d5cc08ce74dd3d81e90f5dd1ad0bd41d␟1432371366815721580: No tasks assigned to ${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER_1:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd*2:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:, ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_NG_CONTAINER:. ${"\ufffd#3\ufffd"}:START_LINK:See everyone${"\ufffd/#3\ufffd"}:CLOSE_LINK:. `,f=o.lc(f),g=$localize`:@@common_create-list␟11ba41c5e7b325cff39440c3bd09f4830676f1f3␟6624617695951243415:Create List`,m=$localize`:@@cu-table-placeholder__empty-space␟fec9c4fa97e5e147ea59bebc7ea228e5f9d56682␟66359172573378588: This Space is empty. Create a List to get started. `,v=$localize`:@@cu-table-placeholder__empty-folder␟e68db7820ac19a6b65b60e7e5b83d4988ad40fb9␟3076192947579348111:This Folder is empty. Create a List to get started.`,[[4,"ngIf","ngIfThen","ngIfElse"],["empty2",""],["emptyGuest",""],["emptyUser",""],["empty",""],[1,"lv-empty_img","lv-empty_img-me","icon"],["width","233","height","166","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["d","M6.98 32.32c-1.41-2.45-2.73-5-3.6-7.7-.89-2.83-1.44-5.74-2.3-8.56-.84-2.7-.8-5.93-.87-6.72-.02-.16 5.14-.27 6.74-.23 6.55.15 18.87.66 30-.13 3.95-.28 7.81-6.64 10-8.95A34.56 34.56 0 0 0 50.9 6.7a22.08 22.08 0 0 0 6.85 5.78 36.2 36.2 0 0 0 7.93 3.32c2.07.59 4.24.88 6.3.43l-.28.43a55.7 55.7 0 0 1-9.73 11.33 46.47 46.47 0 0 1-4.66 3.64c-.66.45-1.55.79-2.15 1.28-.72.59-1.03 1.79-1.39 2.62-.41.96-.96 1.95-1.87 2.45-.84.45-1.88.42-2.78.13-.83-.27-1.79-1.22-2.58-1.27-.96-.07-2.43.68-3.39.9-2.27.49-4.58.8-6.9.92-8.83.5-10.46.16-25.1-.08-1.31-2.13-2.92-4.07-4.18-6.25","id","a"],["fill","none","fill-rule","evenodd"],["d","M.02 162.9c.19.34 1.6.7 4.6 1.09 21.01 2.73 45.83 1.88 67.43 1.9 40.59.03 81.17-.56 121.72-.56 25.3-.58 54.76-2.03 29.7-4.02-28.5-2.27-59.43-1.94-88.27-2.2a2457.7 2457.7 0 0 0-78.36.52c-4.43.1-57.88 1.44-56.82 3.28","fill","#F9F9F9"],["d","M125.6 90.15c-6.01.06-11.46-2.75-17.26-3.83-4.04-.75-8.73-.45-10.32 3.84-.2.52 1.16.37 1.34-.12 1.65-4.45 7.18-3.3 10.85-2.3 4.89 1.31 9.75 3.3 14.9 3.26.58 0 1.39-.86.49-.85","fill","#637082"],["d","M53 110c-8.36 1.9-18.97 4.49-27.3 6.53-3.64.9-7.31 1.69-10.96 2.52-2.3.53-5.22 1.67-4.67 4.5.74 3.88 4.12 4.45 7.35 4.45l23.56-.01L53 110","fill","#FFF"],["d","M50.32 111.04c-11.25 2.66-22.4 5.68-33.65 8.32-2.64.62-7.83 1.38-7.67 5.18.17 3.89 3.72 5.22 6.98 5.35 6.29.25 12.63 0 18.93 0 .47 0 1.42-.71.53-.71h-14.9c-3.42.01-8.48.66-9.9-3.48-1.71-4.98 5.12-5.47 8.28-6.22 4.97-1.16 9.91-2.45 14.86-3.7 5.56-1.42 11.12-2.8 16.7-4.13.8-.19.63-.8-.16-.61","fill","#637082"],["d","M20.75 160.75a4.2 4.2 0 0 0 5.34-2.43l6.66-17.85a4.05 4.05 0 0 0-2.5-5.22 4.2 4.2 0 0 0-5.34 2.43l-6.66 17.85a4.05 4.05 0 0 0 2.5 5.22","fill","#EFEFEF"],["d","M22.41 144H31l-5.17 14.32a4.03 4.03 0 0 1-5.17 2.43 4.08 4.08 0 0 1-2.42-5.21L22.41 144","fill","#F9F9F9"],["d","M22.15 144.57l-2.51 6.85c-.82 2.24-2.46 5.05-1.15 7.38 1.94 3.48 7.11 2.56 8.5-.86.82-2.04 1.51-4.14 2.27-6.2l2.72-7.44c.18-.49-1.12-.34-1.29.13l-4.57 12.47c-.24.68-.45 1.43-.88 2.02-1.72 2.35-5.16 1.16-5.86-1.4-.54-1.96.93-4.55 1.6-6.35l2.46-6.74c.18-.48-1.12-.33-1.29.14","fill","#637082"],["d","M144.25 160.75a4.2 4.2 0 0 1-5.34-2.43l-6.66-17.85a4.05 4.05 0 0 1 2.5-5.22 4.2 4.2 0 0 1 5.34 2.43l6.66 17.85a4.05 4.05 0 0 1-2.5 5.22","fill","#EFEFEF"],["d","M140.7 140l6.05 16.48a4.1 4.1 0 0 1-2.48 5.27 4.15 4.15 0 0 1-5.3-2.46L133 143.03c2.8-.36 5.5-1.2 7.7-3.03","fill","#F9F9F9"],["d","M139.76 140.54c1.84 5.11 3.7 10.22 5.5 15.34.6 1.68.6 3.53-.85 4.8-2.03 1.75-4.57.04-5.36-2.08-.98-2.65-1.91-5.33-2.87-8-.95-2.67-1.9-5.33-2.87-8-.15-.42-1.44-.03-1.3.36 1.94 5.4 3.68 10.91 5.82 16.23 1.8 4.48 9.1 3.36 9.17-1.63.02-1.08-.44-2.08-.8-3.07l-1.78-4.98-3.35-9.33c-.15-.42-1.44-.03-1.3.36","fill","#637082"],["d","M13.8 142h103.37c21 0 40.43-11.36 50.68-29.64l15.28-27.26a6.77 6.77 0 0 0-2.62-9.24 6.82 6.82 0 0 0-9.26 2.62l-15.29 27.26a44.5 44.5 0 0 1-38.79 22.69H13.81a6.8 6.8 0 1 0 0 13.57","fill","#EFEFEF"],["d","M52.04 141.61c.02.12.07.22.15.3.15.15.56.07.78.07H115.51a57.8 57.8 0 0 0 50.42-29.63l15.2-27.26a6.77 6.77 0 1 0-11.82-6.62l-8.58 15.1c-2.9 5.1-4.45 10.83-7.33 15.94a34.68 34.68 0 0 1-8 9.7c-2.06 1.7-4.29 3.2-6.26 5-1.83 1.66-3.08 4.49-5.27 5.65-2.81 1.5-6.58 1.07-9.69 1.18a349.86 349.86 0 0 1-34.59-.44c-6.8-.4-13.82-.59-20.4 1.47-1.27.38-3 1.03-4.34.82-1.22-.19-2.17-1.32-3.46-1.3-3.13.04-9.96 6.69-9.35 10.02M57 130.56c-2.58-1.04-3.88-.4-6.67-.48-6.14-.17-14.98.47-21.13.3-6.03-.16-10.9-.42-15.43-1.3-3.68-.7-6.77 3.12-6.77 6.96a6.86 6.86 0 0 0 6.77 6.96h34.65L57 130.56","fill","#F9F9F9"],["d","M119.34 143c18.8-1 36.46-11.03 46.67-27.03 2.4-3.75 4.44-7.76 6.6-11.65l8.72-15.74c.8-1.45 1.88-2.98 2.36-4.58 1.52-5.02-2.83-9.46-7.75-8.96-.39.04-1.4.7-.54.61 5.13-.52 8.83 4.93 6.6 9.58-.5 1-1.09 1.97-1.63 2.95l-8.06 14.53c-1.9 3.42-3.78 6.85-5.69 10.27a58.13 58.13 0 0 1-17.29 19.25 56.49 56.49 0 0 1-29.44 10.15c-.4.02-1.42.66-.55.62M52.35 143h61.75c.41 0 1.43-1 .55-1H52.9c-.41 0-1.43 1-.55 1M11.98 129.04c-3.77.88-6.62 4.33-5.85 8.32.65 3.42 3.7 5.58 7.08 5.62 4.75.05 9.5 0 14.24 0h5.66c.41 0 1.41-.61.55-.61H15.39c-2.1 0-4.05-.09-5.76-1.56-3.84-3.3-2.63-10.07 2.48-11.27.78-.18.64-.68-.13-.5","fill","#637082"],["d","M35.83 137.28c.27-1.73.48-3.47 1.03-5.13 6.74-20.25 29.1-32 50.41-35.2 11.11-1.68 22.37-2 33.58-2.8 6.2-.42 9.44-3.34 12.22-8.68 2.9-5.56 5.97-11.03 9.2-16.42 2.94-4.93 5.73-9.13 11.4-11.23 1.68-.62 3.46-.92 5.25-.8.93.08 1.85.26 2.74.54.7.21 1.9 1.1 2.56 1.1.7 0 1.91 1.36 2.35 1.83.73.79 1.32 1.69 1.8 2.65a17.34 17.34 0 0 1 1.61 7.07c.24 6.71-2.27 13.12-5.35 18.97-3.14 5.94-6.2 12.04-9.96 17.63-.62.93-1.27 1.84-1.94 2.74-5.43 7.24-12.47 13.33-21.06 16.53a43.11 43.11 0 0 1-12.65 2.59c-10.6.59-10.9 0-35.31-.2-7.8-.06-17.5-.97-24.81 2.6-8.72 4.27-11.2 15.55-14.98 23.57-.8 1.7-1.7 3.48-3.29 4.51-4.6 3.02-5.48-2.72-5.58-6.01a88.62 88.62 0 0 1 .78-15.86","fill","#EFEFEF"],["d","M59.81 118.54a54.98 54.98 0 0 1-3.47-6.23 43.7 43.7 0 0 0-1.34-2.75c9.47-6.64 21.22-10.83 32.67-12.55 11.12-1.68 22.38-2 33.6-2.79 6.2-.43 9.44-3.34 12.23-8.69 1.54-2.94 3.12-5.86 4.75-8.76 1.74.9 3.49 1.77 5.35 2.38 3 1 6.28 1.02 9.4.92 3.12-.1 6.24-.5 9.25-1.36 1.33-.38 2.62-.82 3.88-1.39 1.26-.56 2.5-1.15 3.87-1.32-.83 4.63-2.73 9.08-4.93 13.24-3.14 5.95-6.2 12.05-9.96 17.64-.63.93-1.27 1.84-1.94 2.74-5.44 7.24-12.48 13.33-21.07 16.53a43.14 43.14 0 0 1-12.67 2.6c-10.6.58-10.9 0-35.32-.2-5.36-.05-11.63-.49-17.4.4-2.9-2.9-4.76-6.98-6.9-10.41","fill","#EFEFEF"],["d","M35.83 137.3c.26-1.73.47-3.48 1.02-5.13 6.71-20.24 28.98-31.98 50.2-35.19 11.07-1.67 22.28-2 33.44-2.78 6.18-.43 9.4-3.34 12.18-8.68 1.53-2.94 3.1-5.86 4.73-8.75a37 37 0 0 0 5.33 2.38c2.97.99 6.24 1.02 9.35.92 3.1-.1 6.21-.5 9.2-1.36 1.33-.38 2.61-.83 3.87-1.4 1.25-.55 2.48-1.14 3.85-1.31-.83 4.63-2.72 9.07-4.9 13.22-3.13 5.94-6.19 12.04-9.92 17.63a63.7 63.7 0 0 1-1.94 2.73c-5.4 7.24-12.42 13.32-20.96 16.52a42.8 42.8 0 0 1-12.6 2.59c-10.56.59-10.86 0-35.17-.2-7.76-.06-17.44-.97-24.71 2.6-8.68 4.26-11.16 15.53-14.92 23.55-.8 1.7-1.7 3.48-3.27 4.51-4.59 3.01-5.46-2.71-5.56-6a88.9 88.9 0 0 1 .78-15.86","fill","#FFF"],["d","M35.83 137.23c.26-1.73.47-3.48 1.01-5.13 2.82-8.55 8.38-15.58 15.45-21.1.6 1.16 1.09 2.38 1.65 3.55 1 2.1 2.26 4.08 3.49 6.06 1.8 2.9 3.37 6.16 5.57 8.83-1.5.4-2.94.9-4.3 1.58-8.64 4.27-11.11 15.57-14.85 23.6-.8 1.72-1.7 3.5-3.26 4.53-4.57 3.02-5.44-2.72-5.54-6.02a89.71 89.71 0 0 1 .78-15.9","fill","#EFEFEF"],["d","M35.85 137.23c.27-1.73.48-3.48 1.04-5.13 2.74-8.12 9.1-15.71 15.83-21.1 1.01 2.45 2.68 5.6 3.48 7.54.5 1.23 4.33 8.81 3.74 10.14-.36.8-1.21.82-1.94 1.08-.94.33-1.85.88-2.64 1.48-9.06 6.92-9.25 18.44-13.09 26.47-.81 1.71.06.4-1.55 1.44-4.68 3.02-5.57-2.72-5.66-6.02a87.57 87.57 0 0 1 .79-15.9","fill","#FFF"],["d","M90.14 122.39a40.27 40.27 0 0 1-3.59-7.73c-.9-2.83-1.44-5.75-2.3-8.59-.84-2.7-1.54-5.22-1.13-8.08.02-.16.02-.32 0-.46 1.59-.31 3.18-.59 4.75-.83 11.02-1.69 22.19-2.02 33.3-2.8 3.93-.29 6.66-1.59 8.84-3.9a34.7 34.7 0 0 0 3.95 6.68 22.06 22.06 0 0 0 6.84 5.8c2.46 1.4 5.2 2.56 7.92 3.33a13 13 0 0 0 6.28.42l-.28.44c-.62.94-1.26 1.86-1.93 2.76a55.55 55.55 0 0 1-8 8.8c-2.64 2.32-7.23 4.18-8.66 7.53-.48 1.12-1.06 2.4-2.22 2.73-2.04.56-3.57-1.7-5.72-1.26-2.97.6-5.77 1.34-8.83 1.51-8.82.5-10.45.16-25.06-.08-1.3-2.14-2.91-4.08-4.16-6.27","fill","#EFEFEF"],["d","M89.8 122.39a40.17 40.17 0 0 1-3.61-7.73c-.9-2.83-1.45-5.75-2.32-8.59-.84-2.7-.79-5.94-.87-6.73-.02-.17 5.16-.27 6.76-.24 6.57.16 18.92.67 30.1-.12 3.95-.28 7.83-6.67 10.02-8.98a34.67 34.67 0 0 0 3.97 6.68 22.15 22.15 0 0 0 6.88 5.8 36.3 36.3 0 0 0 7.95 3.33c2.08.58 4.25.87 6.32.42l-.28.44c-.63.94-1.27 1.86-1.94 2.76a55.87 55.87 0 0 1-7.82 8.6 46.6 46.6 0 0 1-4.68 3.66c-.66.45-1.55.79-2.15 1.28-.73.59-1.04 1.8-1.4 2.63-.4.96-.96 1.95-1.88 2.45-.84.46-1.87.43-2.78.13-.83-.26-1.8-1.21-2.6-1.27-.95-.06-2.43.69-3.39.9-2.27.5-4.59.8-6.91.93-8.87.5-10.5.16-25.2-.08-1.3-2.14-2.92-4.08-4.18-6.27","fill","#FFF"],["transform","translate(83 90)"],["id","b","fill","#fff"],[0,"xlink","href","#a"],["d","M16.17 22.78l.15.04.18.06.2.05a7.89 7.89 0 0 0 1.45.16c.64.01 1.4-.05 2.25-.05a7.42 7.42 0 0 1 2.65.4c1.7.57 3.26 1.51 4.23 2.44a5.5 5.5 0 0 1 1.28 1.8l-.08-.15a5.38 5.38 0 0 0-1.32-1.52c-1.01-.82-2.6-1.6-4.27-2.01-.41-.1-.84-.18-1.23-.2-.4 0-.82.03-1.21.07-.8.1-1.56.25-2.24.32a9.2 9.2 0 0 1-1.72.01l-.3-.04c-.08 0-.14-.02-.19-.03l-.15-.03a.68.68 0 1 1 .32-1.32M49.67 30.34l-.08-.14-.1-.16-.11-.18-.38-.49c-.16-.19-.35-.4-.58-.61-.46-.44-1.06-.92-1.68-1.5a7.56 7.56 0 0 1-1.68-2.1 12 12 0 0 1-1.47-4.68 5.55 5.55 0 0 1 .21-2.05l.06-.15-.04.16-.09.44c-.05.38-.07.93.04 1.58.19 1.3.83 2.96 1.78 4.4.23.35.5.7.77.98.3.29.62.54.94.78.65.47 1.31.88 1.86 1.3a9.25 9.25 0 0 1 1.28 1.16l.19.23.11.16.1.12c.22.3.16.73-.14.96a.67.67 0 0 1-1-.2M1.14 18.13l.12-.1.14-.13.15-.14a8.07 8.07 0 0 0 .9-1.15c.36-.53.73-1.2 1.18-1.93a7.51 7.51 0 0 1 1.76-2.04 11.82 11.82 0 0 1 4.3-2.29 5.43 5.43 0 0 1 2.2-.11l-.16-.02h-.44c-.38 0-.93.1-1.54.3a11.48 11.48 0 0 0-3.98 2.55c-.3.3-.6.62-.83.94-.22.35-.41.71-.59 1.07-.34.73-.63 1.46-.94 2.08a9.3 9.3 0 0 1-.9 1.47l-.2.23-.13.14-.11.12a.67.67 0 0 1-.96.03.69.69 0 0 1 .03-1.02M20.63 41.87l-.12-.1-.15-.12-.17-.12a8.08 8.08 0 0 0-1.29-.68c-.58-.25-1.3-.49-2.1-.8a7.51 7.51 0 0 1-2.32-1.36 11.93 11.93 0 0 1-3.03-3.83 5.53 5.53 0 0 1-.52-2v-.15.16l.08.44c.09.37.27.9.6 1.46a11.55 11.55 0 0 0 3.23 3.46c.34.25.71.48 1.07.64.37.17.77.29 1.15.39.78.2 1.54.35 2.2.54a9.2 9.2 0 0 1 1.6.63l.27.15.16.1.13.08c.32.2.41.63.21.95a.67.67 0 0 1-1 .16M68.4 12.45l-.13.07a108.6 108.6 0 0 0-.35.2 8.1 8.1 0 0 0-1.15.9c-.46.44-.97 1.01-1.57 1.61a7.47 7.47 0 0 1-2.18 1.58c-1.62.8-3.38 1.2-4.72 1.23a5.42 5.42 0 0 1-2.16-.4l.15.05a5.32 5.32 0 0 0 2 .16c1.3-.12 2.98-.67 4.46-1.55.36-.22.72-.46 1.01-.72.3-.28.57-.6.83-.91.5-.63.94-1.27 1.38-1.8a9.33 9.33 0 0 1 1.22-1.22l.25-.18.16-.1.13-.1a.69.69 0 1 1 .68 1.18M35.3.58l-.05.14-.07.18-.07.2-.16.6c-.05.24-.09.52-.12.84-.07.63-.08 1.4-.15 2.26a7.6 7.6 0 0 1-.62 2.63 11.95 11.95 0 0 1-2.79 4.02 5.47 5.47 0 0 1-1.88 1.13l.14-.06a5.37 5.37 0 0 0 1.62-1.2 11.6 11.6 0 0 0 2.37-4.1c.13-.41.24-.83.3-1.22.04-.41.04-.83.03-1.23-.03-.8-.1-1.58-.11-2.27a9.34 9.34 0 0 1 .13-1.73l.07-.3.05-.18.04-.16a.68.68 0 1 1 1.28.45","fill","#B9F7BA","mask","url(#b)"],["d","M25.94 25.2a5.68 5.68 0 0 1-2.85 2.47c-1.12.37-2.16.3-3.34.38.91 1.49 2.43 1.64 3.58 1.22a3.92 3.92 0 0 0 2.68-3.4c.02-.21.05-.48-.07-.66","fill","#B9F7BA","mask","url(#b)"],["d","M26.17 25.32c0 .1.32.43.38.52.1.15.21.3.3.47.15.26.27.53.34.82.2.84.1 1.8-.29 2.56-.75 1.5-2.28 1.72-3.79 1.57a5.18 5.18 0 0 0 2.38-2.63c.37-.88.52-1.84.63-2.79l.05-.52M25.84 25.08a5.72 5.72 0 0 0-1.76-3.34c-.9-.76-1.9-1.07-2.97-1.58 1.39-1.06 2.85-.64 3.77.18a3.93 3.93 0 0 1 1.26 4.16c-.07.2-.13.45-.3.58","fill","#B9F7BA","mask","url(#b)"],["d","M26.1 25.06c.02-.09.44-.28.53-.34.16-.1.3-.2.45-.32.23-.19.45-.4.61-.64.49-.71.75-1.64.66-2.5-.15-1.66-1.5-2.43-2.95-2.86.82.8 1.23 2.26 1.25 3.33.03.96-.18 1.9-.42 2.83l-.14.5M26.24 25.32c.07.07.31.08.4.1.98.28 1.9.73 2.36 1.7.4.83.34 1.82-.19 2.57-.23.33-.56.6-.94.7a6.13 6.13 0 0 0-1.37-4.81l-.26-.26","fill","#B9F7BA","mask","url(#b)"],["d","M26.09 25.22c.08-.04.33.03.43.04 1.07.1 2.16-.01 2.98-.8.7-.69 1-1.7.75-2.64a1.8 1.8 0 0 0-.7-1.04 6.48 6.48 0 0 1-3.12 4.28l-.34.16M44.12 21.88a5.62 5.62 0 0 1 3.75.14c1.08.49 1.79 1.26 2.71 2a2.9 2.9 0 0 0-1.8-3.34 3.86 3.86 0 0 0-4.26.67c-.16.14-.36.32-.4.53","fill","#B9F7BA","mask","url(#b)"],["d","M44.03 21.64c.07-.06.05-.53.07-.64.02-.18.05-.37.1-.55.06-.29.15-.58.3-.84a3.86 3.86 0 0 1 1.93-1.68c1.56-.58 2.84.3 3.84 1.43a5.12 5.12 0 0 0-3.51.32c-.87.4-1.62 1-2.34 1.61l-.4.35M44.12 22.05a5.74 5.74 0 0 0-.96 3.65c.15 1.18.68 2.1 1.11 3.2-1.72-.18-2.52-1.49-2.64-2.71a3.9 3.9 0 0 1 1.87-3.91c.18-.11.4-.26.62-.23","fill","#B9F7BA","mask","url(#b)"],["d","M43.91 21.89c-.08.05-.51-.1-.62-.12a6.07 6.07 0 0 0-.55-.07c-.3-.02-.6-.02-.88.05-.84.2-1.65.7-2.16 1.38-1 1.33-.54 2.82.24 4.12a5.21 5.21 0 0 1 1.32-3.3 10.2 10.2 0 0 1 2.21-1.79l.44-.27M43.98 21.59c0-.09-.18-.27-.22-.35-.54-.87-.91-1.83-.6-2.86.27-.87.97-1.56 1.87-1.76.39-.08.81-.05 1.16.14a6.11 6.11 0 0 0-2.23 4.47l.02.36","fill","#B9F7BA","mask","url(#b)"],["d","M44.02 21.78c-.09-.03-.22-.26-.29-.33-.73-.8-1.6-1.47-2.73-1.44-.97.02-1.87.55-2.33 1.42-.2.38-.28.82-.19 1.23a6.4 6.4 0 0 1 5.18-1l.36.12M8.42 11.13c.56 1.05.82 2.6.53 3.75-.29 1.15-.92 2-1.48 3.04 1.74.03 2.68-1.18 2.95-2.39A3.91 3.91 0 0 0 9 11.43c-.17-.13-.37-.3-.59-.3","fill","#B9F7BA","mask","url(#b)"],["d","M8.64 11c.08.06.53-.04.64-.05h.55c.3.01.6.05.87.15.8.29 1.55.89 1.99 1.63.84 1.44.2 2.86-.72 4.06a5.22 5.22 0 0 0-.93-3.43 10.22 10.22 0 0 0-2-2.04l-.4-.32M8.26 11.16a5.63 5.63 0 0 0-3.74-.3c-1.13.36-1.92 1.04-2.93 1.66a2.9 2.9 0 0 1 2.19-3.1c.71-.2 1.48-.25 2.2-.06a3.87 3.87 0 0 1 1.95 1.23c.14.16.31.35.33.57","fill","#B9F7BA","mask","url(#b)"],["d","M8.38 10.93c-.06-.07 0-.53 0-.64 0-.19 0-.38-.03-.56-.03-.3-.09-.6-.2-.87a3.87 3.87 0 0 0-1.73-1.9c-1.48-.76-2.85-.03-3.98.97 1.1-.26 2.54.18 3.45.73.82.5 1.5 1.18 2.14 1.88l.35.39M8.68 10.94c.09-.02.23-.22.3-.28.75-.69 1.63-1.23 2.69-1.1.9.11 1.7.69 2.05 1.54.15.37.2.8.07 1.18a6.02 6.02 0 0 0-4.76-1.42l-.35.08","fill","#B9F7BA","mask","url(#b)"],["d","M8.5 11.01c.02-.09.22-.26.28-.34.65-.86 1.14-1.84.92-2.96a2.7 2.7 0 0 0-1.8-2.06c-.4-.13-.85-.14-1.24.03a6.5 6.5 0 0 1 1.9 4.95l-.05.38M12.45 35.97A5.64 5.64 0 0 1 16 34.75c1.18.07 2.12.53 3.24.89a2.88 2.88 0 0 0-2.88-2.47 3.88 3.88 0 0 0-3.74 2.17c-.09.19-.21.42-.17.63","fill","#B9F7BA","mask","url(#b)"],["d","M12.27 35.78c.05-.08-.13-.51-.16-.62a6.33 6.33 0 0 1-.1-.55c-.05-.3-.06-.6-.02-.89.13-.85.57-1.7 1.21-2.27 1.25-1.1 2.75-.74 4.1-.05-1.14.02-2.42.8-3.17 1.57-.67.68-1.16 1.51-1.61 2.35l-.25.46M12.5 36.13a5.75 5.75 0 0 0 .4 3.76c.57 1.04 1.39 1.7 2.18 2.58-1.67.46-2.88-.48-3.43-1.58a3.93 3.93 0 0 1 .36-4.33c.13-.16.28-.37.49-.43","fill","#B9F7BA","mask","url(#b)"],["d","M12.25 36.05c-.05.08-.51.1-.62.12-.18.03-.36.08-.54.13-.28.09-.56.2-.8.37a3.88 3.88 0 0 0-1.53 2.07c-.46 1.6.5 2.82 1.7 3.75a5.23 5.23 0 0 1 .05-3.55c.33-.9.87-1.7 1.43-2.47l.31-.42M12.21 35.75c-.04-.08-.26-.18-.33-.24-.81-.62-1.5-1.38-1.57-2.46a2.55 2.55 0 0 1 1.12-2.31c.33-.22.73-.35 1.13-.29a6.14 6.14 0 0 0-.5 4.97l.15.33","fill","#B9F7BA","mask","url(#b)"],["d","M12.32 35.91c-.1 0-.3-.16-.39-.2-.96-.49-2.01-.8-3.06-.36a2.7 2.7 0 0 0-1.67 2.17c-.05.42.02.87.26 1.22a6.42 6.42 0 0 1 4.47-2.81l.39-.02M59.72 17.58c-.3-1.15-.2-2.72.34-3.77.55-1.06 1.35-1.73 2.13-2.62-1.68-.43-2.87.53-3.4 1.64a3.92 3.92 0 0 0 .44 4.32c.12.16.28.37.5.43","fill","#B9F7BA","mask","url(#b)"],["d","M59.48 17.65c-.06-.07-.52-.08-.63-.1a6.04 6.04 0 0 1-.54-.12c-.28-.09-.56-.2-.81-.36a3.88 3.88 0 0 1-1.57-2.04c-.49-1.6.45-2.83 1.63-3.78a5.23 5.23 0 0 0 .12 3.55c.35.9.9 1.69 1.48 2.44l.32.41M59.89 17.59c.93.73 2.4 1.25 3.57 1.16 1.18-.1 2.1-.57 3.23-.95a2.88 2.88 0 0 1-2.84 2.52 3.88 3.88 0 0 1-3.78-2.1c-.09-.19-.22-.42-.18-.63","fill","#B9F7BA","mask","url(#b)"],["d","M59.72 17.78c.04.09-.13.52-.15.63-.04.18-.08.36-.1.55-.04.3-.05.6 0 .89.15.84.6 1.69 1.25 2.24 1.27 1.09 2.77.7 4.1-.02a5.14 5.14 0 0 1-3.2-1.5c-.68-.68-1.19-1.5-1.65-2.33l-.25-.46M59.43 17.7c-.09 0-.28.16-.36.2-.89.5-1.86.82-2.87.45a2.54 2.54 0 0 1-1.64-1.97c-.06-.4 0-.82.2-1.16a6.04 6.04 0 0 0 4.3 2.48h.37","fill","#B9F7BA","mask","url(#b)"],["d","M59.61 17.67c-.03.09-.26.2-.34.27-.83.7-1.54 1.53-1.57 2.67-.03.98.44 1.92 1.28 2.42.36.22.8.33 1.21.26a6.52 6.52 0 0 1-.72-5.26l.14-.36M32.05 10.17a5.7 5.7 0 0 1-2.18-3.08c-.28-1.15-.1-2.2-.09-3.38-1.55.78-1.83 2.29-1.51 3.48a3.86 3.86 0 0 0 3.13 2.99c.2.03.46.09.65 0","fill","#B9F7BA","mask","url(#b)"],["d","M31.92 10.4c-.1-.03-.45.27-.54.33-.16.1-.33.18-.5.26-.26.12-.55.22-.84.27a3.83 3.83 0 0 1-2.5-.52c-1.41-.89-1.5-2.44-1.23-3.94a5.18 5.18 0 0 0 2.4 2.61c.84.45 1.77.69 2.7.88l.5.1M32.18 10.07a5.64 5.64 0 0 0 3.46-1.47c.83-.84 1.23-1.82 1.83-2.84a2.91 2.91 0 0 1-.51 3.77 3.84 3.84 0 0 1-4.22.9c-.2-.08-.44-.17-.56-.36","fill","#B9F7BA","mask","url(#b)"],["d","M32.18 10.33c.1.04.24.48.29.57l.28.49c.17.24.36.48.58.67.66.54 1.55.88 2.4.88 1.67-.02 2.55-1.3 3.1-2.72a5.13 5.13 0 0 1-3.4.97c-.95-.06-1.87-.36-2.76-.68l-.49-.18M31.91 10.46c-.07.06-.1.3-.14.39-.35.96-.88 1.84-1.88 2.22-.85.33-1.82.19-2.52-.41a1.7 1.7 0 0 1-.6-1.01c1.71.32 3.43.13 4.87-.95l.27-.24","fill","#B9F7BA","mask","url(#b)"],["d","M32.03 10.31c.03.1-.06.34-.08.43-.19 1.08-.18 2.17.54 3.06a2.68 2.68 0 0 0 2.53.99c.42-.07.83-.27 1.1-.6a6.45 6.45 0 0 1-3.96-3.51l-.13-.37","fill","#B9F7BA","mask","url(#b)"],["d","M136.7 123.58a25.7 25.7 0 0 1-1.94 3.08c-.54.7-1.05 1.53-1.97 1.4-1.34-.16-2.75-.9-3.96-1.45-.9-.4-2.41-.85-3.08-1.61-.9-1.02-.12-3.4-.06-4.65.03-.6-1.3-.35-1.33.15-.07 1.4-.91 4 .25 5.12 1.14 1.08 3.14 1.7 4.56 2.27 1.18.47 2.8 1.31 4.12 1.07 2.18-.41 3.7-3.6 4.66-5.3.33-.6-1-.5-1.25-.08M62.77 130.05a19.37 19.37 0 0 0-8.88 5.59c-2.29 2.6-3.91 5.7-5.3 8.84-1.46 3.28-2.65 6.67-4.11 9.95-.86 1.92-1.79 4.12-3.64 5.3-1.63 1.02-2.84.32-3.52-1.31-1.31-3.1-.93-7.12-.86-10.37.1-4.62.57-9.25 1.76-13.73 2.36-8.9 8-16.35 15.09-22.13 8.4-6.85 18.58-11.35 29.17-13.52.8-.16.62-.8-.17-.64a70.73 70.73 0 0 0-27.1 11.7c-7.45 5.35-13.99 12.5-17.18 21.19a50.29 50.29 0 0 0-2.77 14.47c-.23 3.85-.57 8.14.3 11.95.57 2.5 2.13 4.4 4.87 3.38 3.6-1.34 5-5.47 6.33-8.72 1.66-4.07 3.13-8.25 5.34-12.07 2.53-4.39 5.94-7.66 10.84-9.23.77-.25.62-.9-.17-.65M161.74 94.33c-5.46 10.37-11.59 20.46-21.5 27.16-.73.49.4.65.8.38 10.1-6.82 16.35-16.96 21.92-27.51.28-.54-1.02-.4-1.22-.03M126.91 93.91a15.32 15.32 0 0 0 6.73-6.16c2.28-3.68 4.16-7.63 6.31-11.4.31-.53-1.04-.4-1.26-.02-1.94 3.39-3.75 6.84-5.64 10.25-1.58 2.83-3.61 5.42-6.67 6.8-.86.38-.07.8.53.53","fill","#637082"],["d","M52 110.98c8.52-6.53 20.4-10.82 31.22-12.98.26.96-.73 12.07 10.78 31.26-2.8-.05-6.08-.09-9.97-.12-2.9-.03-5.76-.22-8.65.16a33.47 33.47 0 0 0-8.83 2.47c-.35.15-.74.31-1.1.19-.35-.12-12.15-18.67-13.45-20.98","fill","#E5E1F6"],["d","M91.6 128.27l-8.2-.1c-2.78-.04-5.56-.2-8.3.18-2.53.33-5 .95-7.39 1.84-.49.18-1.95.94-2.13.87-.15-.07-.34-.48-.43-.6-3.21-4.65-6.17-9.5-9.17-14.28-1.26-2-2.56-3.99-3.72-6.04l-.17.57c8.89-6.78 19.77-10.63 30.6-12.82.82-.17.58-1.03-.23-.87-11.05 2.24-22.16 6.2-31.23 13.12-.2.15-.3.35-.18.57 2.64 4.67 5.66 9.14 8.55 13.65 1.38 2.16 2.76 4.34 4.2 6.46.22.31.46.82.79 1.02.63.4 1.53-.04 2.12-.29 1.44-.6 2.9-1.1 4.4-1.5 3.4-.9 6.78-1.06 10.29-.98 3.24.07 6.48.08 9.73.12.6.01 1.35-.91.46-.92M149.8 105.43a23.12 23.12 0 0 1-16.46-11.3c-.2-.35-1.46.1-1.33.34 3.34 6.08 9.93 10.5 16.94 11.53.32.04 1.53-.47.85-.57","fill","#637082"],["d","M136.58 86.38l.08.04c.66.33 2.16 1.08 2.33 1.94.11.58-.55 1.29-.9 1.68a3.1 3.1 0 0 1-2 .95 1.7 1.7 0 0 1-1.17-.27 1.9 1.9 0 0 1-.64-.93 4.5 4.5 0 0 1 0-3.1c.41-1.04 1.52-.69 2.3-.31","fill","#6A79A8"],["d","M157.8 77l.16.14c.1.1.27.23.45.42.18.19.41.43.63.72.11.15.23.3.34.47l.35.55.32.62.3.69.25.74.2.8c.05.27.1.55.13.84a10.09 10.09 0 0 1-.04 2.65c-.04.3-.11.58-.17.88a11.05 11.05 0 0 1-.93 2.44c-.5.96-1.01 1.77-1.38 2.48a8.27 8.27 0 0 0-.82 2.11l-.05.25-.04.2-.1-.19a4.62 4.62 0 0 1-.4-1.49c0-.36 0-.77.05-1.21.06-.44.16-.91.28-1.39a33.6 33.6 0 0 1 .66-2.17l.06-.2.02-.04v-.01l.03-.12.1-.36.16-.73c.04-.25.1-.5.13-.75s.08-.5.1-.75c0-.13.02-.25.03-.38l.02-.37c.04-.5.03-1 .03-1.48 0-.24-.03-.47-.04-.7l-.06-.7-.08-.64-.09-.62c-.07-.4-.14-.76-.22-1.08-.06-.34-.14-.6-.2-.85l-.14-.57-.05-.2M162.13 76l.2.08c.12.06.3.15.5.31.22.16.46.4.7.72.24.32.46.71.65 1.2a8.21 8.21 0 0 1 .57 2.45l.04.45.02.22v.25l.03.45-.01.5a20.82 20.82 0 0 1-.39 2.9l-.4 1.8c-.12.58-.25 1.13-.34 1.66a16.6 16.6 0 0 0-.19 1.53v.16l-.01.19v.3c.01.2.05.4.08.6.15.8.49 1.4.81 1.75.17.16.32.29.43.35l.18.11-.2.02c-.13 0-.34 0-.59-.09a2.4 2.4 0 0 1-.84-.52 3.9 3.9 0 0 1-.82-1.12c-.1-.24-.21-.5-.3-.78-.04-.13-.07-.3-.1-.46l-.05-.2-.01-.1v-.03l-.01-.01v-.01-.09c-.08-.59-.1-1.2-.07-1.84.04-.63.11-1.27.22-1.9.1-.62.23-1.23.35-1.83.13-.6.24-1.18.34-1.74l.06-.41.06-.4.05-.39.03-.44v-.05l.01-.03v-.02.03-.11l.02-.21.02-.41.02-.77c0-.5-.01-.95-.07-1.4a6.5 6.5 0 0 0-.56-1.97c-.11-.23-.22-.4-.3-.52l-.13-.18M166 74.06s.07 0 .2-.03c.13-.02.34-.04.6-.02.26.03.58.09.93.23.35.15.72.36 1.07.66a4.84 4.84 0 0 1 1.17 1.5l.17.34a9 9 0 0 1 .58 2.4c.05.52.07 1.06.09 1.57 0 .51.03 1 .05 1.46l.07.68c.02.22.06.43.1.64a5.13 5.13 0 0 0 .59 1.6c.09.15.2.28.3.42a3.7 3.7 0 0 0 1.36 1.04c.21.08.4.14.52.16l.2.04-.19.08c-.12.05-.32.12-.58.15-.26.03-.6.03-.97-.04a3.87 3.87 0 0 1-1.79-.9 5.28 5.28 0 0 1-1.38-2.01 7.45 7.45 0 0 1-.41-1.63c-.09-.55-.12-1.1-.14-1.63l-.02-1.52-.02-.7-.05-.66c-.02-.21-.06-.43-.1-.61 0-.08-.03-.2-.06-.32l-.07-.26a4.83 4.83 0 0 0-.98-1.77 3.72 3.72 0 0 0-1.24-.87M170 73.08l.14-.02c.1-.01.23-.05.4-.05.18-.02.4-.01.64.01l.4.06c.13.02.27.06.42.1a5.4 5.4 0 0 1 2.71 1.8c.26.31.5.66.68 1.03l.13.27c.04.07.08.2.12.3.09.2.13.4.2.6a5.86 5.86 0 0 1 .08 2.27c-.06.34-.15.65-.26.93l-.17.4-.2.33c-.12.2-.25.38-.36.5-.11.14-.22.23-.29.3l-.1.09-.02-.14-.04-.39-.06-.56c-.02-.22-.06-.45-.1-.7l-.15-.76c-.06-.27-.14-.54-.22-.81-.08-.27-.18-.54-.28-.81-.06-.14-.11-.28-.17-.39l-.09-.2-.1-.2a11.78 11.78 0 0 0-.92-1.48l-.53-.66-.53-.58a22 22 0 0 0-.5-.5l-.43-.38-.3-.26-.1-.1","fill","#637082"],["d","M164 74l.23.06.26.09.36.15a5.06 5.06 0 0 1 1.92 1.62 8 8 0 0 1 1.3 3.43c.11.66.17 1.33.19 2 .03.68 0 1.35 0 2.02l-.09 1.94c-.02.62-.04 1.23-.02 1.8a14.12 14.12 0 0 0 .44 3.08 9.08 9.08 0 0 0 .9 2.07c.14.24.27.43.37.55l.14.19-.22-.1a5.1 5.1 0 0 1-1.42-1.03c-.28-.3-.58-.69-.86-1.14a8.44 8.44 0 0 1-.72-1.56c-.2-.57-.36-1.23-.46-1.87-.1-.66-.15-1.34-.16-2.01-.01-.67 0-1.34.03-2l.07-1.93c.01-.62.02-1.23 0-1.8a9.51 9.51 0 0 0-.52-3.01 6.63 6.63 0 0 0-1.57-2.38L164 74","fill","#637082"],["d","M146.47 77.38a27.05 27.05 0 0 1-8.21-3.39c-1.78-1.1-6.68-3.82-6.23-6.47.27-1.59 3.23-2.3 4.45-2.8 1.49-.61 3-1.18 4.51-1.72 5.35 1.31 10.46 2.95 15.8 4.26l11.62 2.85c.9.21 3.98 1.12 5.4 1.54.24.07.25.4.02.49-2.26.88-9.19 3.54-9.7 3.7-5.24 1.56-10.8 2.77-16.25 1.83-.47-.08-.94-.18-1.4-.29","fill","#E5E1F6"],["d","M140.29 64.86c-1.18-1.65 1.58-5.73 2.5-6.94 2.87-3.83 7.22-5.99 11.81-6.7 12.44-1.93 21.5 9.06 18.98 21.45-12.46 1.49-29.32-2.26-33.3-7.81","fill","#FFF"],["d","M168.3 71.64a61.33 61.33 0 0 1-15.79-2.06c-3.64-1-7.92-2.34-10.59-5.15-1.36-1.44-.71-3.03.12-4.62.9-1.72 2.08-3.36 3.51-4.68a17.36 17.36 0 0 1 13.13-4.43c8.15.76 14.1 7.2 14.84 15.26a19.16 19.16 0 0 1-.18 4.99c-.14.76 0 .68-.5.96-1.44.8-3.28 1.23-4.82 1.8-3.88 1.45-7.43 2.63-11.6 3.25-6.5.98-12.94-.34-18.55-3.76a27.28 27.28 0 0 1-3.63-2.65c-.92-.79-2.36-1.98-1.92-3.36.34-1.09 1.8-1.5 2.78-1.85 1.26-.45 2.5-.94 3.76-1.4.86-.32.06-.67-.5-.46-2.01.74-4.58 1.33-6.33 2.61-1.93 1.43-.82 3.34.64 4.66a28.62 28.62 0 0 0 16.28 7.14c5.34.47 11.05-.6 16.06-2.42 1.84-.67 3.68-1.36 5.52-2.05 1.11-.41 3.6-.8 4-2.06.73-2.22.5-5.17.08-7.42a17.89 17.89 0 0 0-2.52-6.42c-2.38-3.72-6.43-6.68-10.88-7.31-8.43-1.2-18.22 2.8-21.15 11.3-.71 2.05.2 3.23 1.83 4.47a23.98 23.98 0 0 0 6.83 3.36 60.19 60.19 0 0 0 19.06 2.98c.45 0 1.4-.67.53-.68","fill","#6A79A8"],["d","M169 69.49c-.12-6.53-2.2-12.53-7.81-16.4-.45-.32-1.62.3-1.02.72 5.38 3.72 7.38 9.53 7.5 15.79.01.65 1.34.43 1.33-.11M157.34 53.05c-6.18 1.74-10.07 6.35-13.3 11.67-.28.46 1.01.29 1.2-.03 2.97-4.88 6.52-9.48 12.25-11.1.77-.2.63-.76-.15-.54","fill","#E3E3E3"],["d","M157.44 69.5A95.7 95.7 0 0 0 160 53.39c.04-.63-1.4-.4-1.43.13a95.73 95.73 0 0 1-2.56 16.13c-.14.58 1.3.4 1.43-.13","fill","#E3E3E3"],["d","M97.43 145.03v4.83h1.04a3.6 3.6 0 0 1 3.53 3.66v.1c0 2.1-1.64 3.78-3.66 3.78h-.93l-.01 5.36c0 .68-.55 1.24-1.21 1.24l-11.72-.03a1.5 1.5 0 0 1-1.47-1.52l.04-17.45 14.4.03","fill","#FFF"],["d","M101.66 154.96c-.5 1.94-1.94 2.55-3.77 2.55-.23 0-.92.12-.92.47l-.01 3.97c0 .5.06 1.05 0 1.54-.14.92-.19.62-.75.68-1.3.14-2.68 0-3.99 0l-5-.02c-.92 0-2.03.17-2.94 0-1.13-.22-.95-1.28-.94-2.14 0-3.05 0-6.1.02-9.15l.01-7.54-.92.47 14.95.04-.4-.32-.02 4.86c0 .23.2.32.41.32 1.44 0 2.63.2 3.62 1.38.31.37 1.6-.12 1.24-.54-1.17-1.39-2.63-1.63-4.35-1.63l.42.32v-4.87c0-.23-.2-.32-.4-.32-5 0-9.98-.02-14.96-.03-.22 0-.92.13-.92.48L82 162.62c0 1.13.23 2.12 1.56 2.3.87.12 1.81.02 2.7.02 3.22.01 6.47.11 9.7.03 1.45-.04 2.33-.7 2.33-2.19l.01-4.95-.92.47c2.53 0 4.9-.77 5.61-3.5.13-.51-1.21-.32-1.33.16","fill","#637082"],["d","M92.11 141l.25-.09a5.76 5.76 0 0 0 1.58-.92 5.2 5.2 0 0 0 1.3-1.69 4.04 4.04 0 0 0 .33-2.42 4.81 4.81 0 0 0-1.15-2.37l-.08-.08-.01-.01c.03.03 0 0 0 0l-.02-.02-.05-.04c-.06-.06-.14-.14-.2-.18l-.16-.13-.2-.14c-.51-.37-1.13-.68-1.77-1-.63-.33-1.3-.67-1.9-1.1l-.06-.04-.05-.04-.02-.02-.1-.07-.2-.16-.42-.38-.37-.38c-.1-.14-.22-.26-.33-.4a7.46 7.46 0 0 1-1.38-3.13 6.06 6.06 0 0 1-.04-1.93l.04-.26.05.26c.03.17.1.41.17.71a8.8 8.8 0 0 0 1.05 2.3c.28.42.63.86 1.04 1.26l.31.3.35.28.35.25.2.14.11.07.03.02-.01-.01.02.01.05.03c.53.31 1.15.58 1.8.88.66.3 1.36.64 2.03 1.1l.24.19.26.2.21.2.07.07.04.03.01.01.1.12a5.45 5.45 0 0 1 1.35 4.45c-.05.35-.16.78-.27 1.04l-.01.03-.02.03v.02l-.03.06-.05.12-.12.23a5.01 5.01 0 0 1-3.29 2.51 4.3 4.3 0 0 1-.76.09h-.27","fill","#FFF"],["d","M88.69 143h-.16a2.73 2.73 0 0 1-2.47-3.27 3.06 3.06 0 0 1 1.18-1.86c.2-.15.42-.27.61-.38.4-.2.73-.36.95-.52l.12-.09.07-.06c.04-.05.08-.06.13-.12l.15-.16.13-.18a3.2 3.2 0 0 0 .3-2.86l-.09-.21-.08-.16-.07-.13.14.07c.09.05.23.12.37.25a3.11 3.11 0 0 1 .36.35l.12.16a3.02 3.02 0 0 1 .55 1.92c-.02.4-.1.82-.3 1.24l-.16.31-.2.3c-.14.2-.4.45-.52.54-.4.35-.83.53-1.16.72-.34.17-.54.31-.74.51a2.24 2.24 0 0 0-.6 1.49c0 .26.07.51.16.75.18.46.5.83.75 1.06.14.1.24.2.33.24l.13.09","fill","#FFF"],["d","M98.04 155.71c.35.27.8.32 1.24.27.52-.05 1.11-.22 1.46-.58.6-.62.07-1.41-.8-1.4-.31 0-.69.07-.96.23-.2.12-.2.26.07.26.4-.01.65.43.58.74a.68.68 0 0 1-.1.24c-.1.15-.3.2.08.1.4-.1.17-.04 0-.1-.1-.04-.2-.1-.28-.17-.19-.14-.68.02-.88.08-.09.03-.59.2-.41.33M129.74 127.3a103.37 103.37 0 0 1-14.01 15.78c-4.7 4.41-9.73 8.85-16.2 10.33-.8.18-.65.74.14.55 6.52-1.49 11.7-5.7 16.46-10.14 5.44-5.06 10.55-10.47 14.82-16.55.31-.43-1-.29-1.21.03M125.31 127.18c-6.46 1.32-13.22 1.16-19.79 1l-5.37-.13-3.19-.06c-.68-.02-1.39.02-2.06-.04-.62-.06-.9-.28-1.28-.72-1.41-1.66-2.42-3.75-3.42-5.67a65.62 65.62 0 0 1-6.89-22.35c-.05-.43-1.37-.14-1.3.35.63 5.2 1.86 10.3 3.7 15.19 1.62 4.33 3.62 9 6.45 12.69.4.5.7.96 1.35 1.15 1.05.3 2.35.12 3.43.14 2.16.04 4.31.1 6.47.15 2.95.07 5.9.15 8.85.1 4.43-.06 8.87-.26 13.22-1.15.8-.16.62-.8-.17-.65","fill","#637082"],["d","M88 94.58L77.97 58a5.38 5.38 0 0 0-3.78 6.61L82.8 96 88 94.58","fill","#FFF"],["d","M81 92.1s.95 5.2 3.77 5.6c.82.11 7.06.22 11.75.22 6.3 0 12.58.16 18.87.03 2.69-.06 5.84-.59 7.61-2.74.64-.77 1.79-2.68.19-3.1-.9-.24-2.21 0-3.13 0H81","fill","#EFEFEF"],["d","M81 92.07s.95 3.46 3.77 3.73c.82.08 7.06.15 11.75.15 6.3 0 12.58.1 18.87.02 2.69-.04 5.84-.4 7.61-1.83.64-.51 1.79-1.78.19-2.07-.9-.16-2.21 0-3.13 0H81","fill","#FFF"],["d","M85.17 97.98c9.83 0 19.66.04 29.48 0 3-.01 6.35-.58 8.63-2.6.61-.54 2.6-2.86 1.27-3.6-.54-.31-1.76-.08-2.33-.08H91.41c-.97 0-3.46.35-3.93-.6-.14-.3-1.4.15-1.31.33.44.91.86.79 1.8.76.41-.02.82 0 1.23 0h33.18c.76 0 1.3-.1 1.21.88-.27 2.75-4.05 4.12-6.38 4.35-2.27.22-4.61.07-6.89.07H86.04c-.27 0-1.49.49-.87.49","fill","#637082"],["d","M87 89.62l-7.48-27.55-1.08-3.98c-.06-.22-.8.03-.88.05-2.54.8-4.9 2.92-4.52 5.84.27 2.1 1.12 4.27 1.67 6.31l1.86 6.85 3.56 13.1c.7 2.62.89 6.22 3.5 7.72.3.18 1.35-.36 1.23-.43-2.39-1.38-2.62-4.55-3.24-6.97-1-3.9-2.11-7.78-3.17-11.67L75.31 67.3c-.42-1.53-1.2-3.27-.96-4.9A5.14 5.14 0 0 1 78 58.39l-.87.06L84.6 86l1.08 3.98c.06.25 1.38-.1 1.3-.36","fill","#637082"],["d","M84.24 66.79c5.72-4.7 11.3-9.59 16.71-14.62.3-.29-.94-.17-1.19.06-5.42 5.04-10.99 9.91-16.71 14.62-.3.25.93.15 1.19-.06M88.46 72.96l26.82-5.44c.5-.1 1.2-.67.26-.48l-26.82 5.44c-.5.1-1.2.67-.26.48M90.37 78.66a394.7 394.7 0 0 1 26.74.34c.52.02 1.4-.53.51-.57-8.9-.42-17.82-.53-26.74-.34-.5 0-1.39.59-.5.57M84.34 58.6L91 42.22c.15-.38-1.17-.23-1.33.18L83 58.78c-.15.38 1.17.23 1.33-.18","fill","#FFF"],["d","M63.18 6.74c4.95 5.75 6.8 14.16 2.13 21.05-3.9 5.74-11.04 9-17.8 8.04A18.57 18.57 0 0 1 32.71 23c-1.99-6.68.23-14.49 5.46-18.97A17.26 17.26 0 0 1 50.8.06c4.8.42 9.23 3 12.4 6.68","fill","#FFEEA7"],["d","M204.18 150.57l-12.33.43L189 98.69a5.48 5.48 0 0 1 6.82-5.53l2.35.57a11.41 11.41 0 0 1 8.8 11.74l-2.8 45.1","fill","#96E296"],["d","M187.8 162.12l-4.76-25.93a2.75 2.75 0 0 1 2.74-3.19h25.44a2.75 2.75 0 0 1 2.74 3.19l-4.14 25.24S204.25 163 198.5 163c-5.31 0-10.7-.88-10.7-.88","fill","#FFF"],["d","M187.76 162.4l-2.8-16.85-1.45-8.7c-.2-1.15-.47-2.71 1.16-3 .6-.12 1.3 0 1.9 0h20.65c1.86 0 5.73-.7 5.44 2.3-.2 2.14-.71 4.29-1.06 6.4l-3.26 19.58c-.1.57 1.24.36 1.32-.14l3.06-18.37c.41-2.5.93-5 1.24-7.5.39-3.04-2.4-3.1-4.52-3.1h-21.57c-2.12 0-5.8-.39-5.87 2.73-.01.64.17 1.31.28 1.93l.7 4.19c1.15 6.96 2.3 13.92 3.47 20.88.08.5 1.4.18 1.3-.36M199 93.53l-1.6-4.41c-.1-.32-1.5.06-1.4.35l1.6 4.41c.1.32 1.5-.06 1.4-.35M191.85 95.16l-3.7-3.06c-.42-.35-1.56.27-1 .74l3.7 3.06c.42.35 1.56-.27 1-.74M205.79 128.94l2.56-.51c.14-.03.7-.16.65-.33-.07-.18-.66-.07-.79-.04l-2.56.51c-.14.03-.7.16-.65.33.07.18.66.07.79.04M202.7 102.95c1.8-.57 3.49-1.34 5.06-2.34.72-.46-.35-.8-.84-.49a18.9 18.9 0 0 1-4.44 2.08c-.76.24-.56 1 .22.75M201.43 110.63l2.5-4.07c.4-.67-1.02-.74-1.36-.2l-2.5 4.08c-.4.67 1.02.74 1.36.2M191 118.54l-2.7-3.45c-.26-.31-1.36.29-1.3.37l2.7 3.45c.26.31 1.36-.29 1.3-.37M204.7 115.97l6.79-1.38c.8-.16.61-.72-.18-.56l-6.8 1.38c-.8.16-.61.72.18.56M198.95 120.44a3.15 3.15 0 0 1-.87-2.16c0-.5-1.08-.26-1.08.14 0 .95.31 1.81.94 2.48.28.3 1.3-.14 1-.46M192.75 128.4l-5.67-1.39c-.44-.1-1.58.4-.83.59l5.67 1.39c.45.1 1.58-.4.83-.59M198.18 128.67l.78-1.34c.14-.24-.12-.33-.33-.33-.24 0-.68.1-.81.33l-.78 1.34c-.14.24.12.33.32.33.25 0 .69-.1.82-.33M203.19 96.73a15.8 15.8 0 0 1 3.68-3.5c.53-.36-.73-.23-.97-.06a16.5 16.5 0 0 0-3.86 3.64c-.26.34.96.17 1.15-.08M204.2 123.69l2.68-3.04c.21-.24.12-.51-.14-.61-.3-.11-.72.03-.93.27l-2.7 3.04c-.2.24-.11.51.15.61.3.11.72-.03.93-.27M191.78 110.31a5.17 5.17 0 0 1-2.6-1.23c-.32-.28-1.43.23-1.13.5a5.95 5.95 0 0 0 2.98 1.4c.27.05.66-.02.86-.24.16-.18.17-.39-.1-.43M198 104.46l-.35-4.3c-.03-.35-1.69-.09-1.65.38l.35 4.3c.03.35 1.69.09 1.65-.38M191 102.58l-.94-2.47c-.1-.3-1.14.08-1.05.31.3.83.62 1.65.93 2.47.1.3 1.14-.08 1.05-.31","fill","#637082"],["d","M187.24 162.85a33.41 33.41 0 0 0 17.23.04c.81-.2.64-.96-.17-.75a31.5 31.5 0 0 1-16.23-.13c-.4-.1-1.57.64-.83.84","fill","#637082"],[1,"lv-empty_title"],t,[1,"lv-empty_desc"],e,[4,"ngIf"],[1,"lv-empty_img"],["width","312","height","257","src","./assets/images/illustrations/no-results-me-mode.svg","alt",""],i,n,["cuLink","",1,"lv-empty_link",3,"click"],["width","163","height","257","alt","",3,"src"],a,["class","lv-empty_desc",4,"ngIf"],[1,"lv-empty_link",3,"click"],r,[3,"click",4,"ngIf","ngIfElse"],["otherEmpty",""],[3,"click"],[1,"lv-empty_img","lv-empty_img-no-data","icon"],["viewBox","0 0 102 102","xmlns","http://www.w3.org/2000/svg"],["transform","translate(1 1)","fill","none","fill-rule","evenodd"],["stroke-width","2","stroke-dasharray","6","width","100","height","100","rx","50",1,"cu-stroke"],["fill-rule","nonzero","x","49","y","35","width","2","height","30","rx","1",1,"cu-fill"],["fill-rule","nonzero","x","35","y","50","width","30","height","2","rx","1",1,"cu-fill"],s,["class","lv-empty_desc",4,"ngIf","ngIfElse"],["hasFilterAssignees",""],[4,"ngIf","ngIfElse"],["notSharingAppTmpl",""],c,l,u,d,h,p,f,[4,"ngFor","ngForOf","ngForTrackBy"],["width","514","height","306","src","./assets/images/illustrations/no-lists.svg","alt",""],["emptyFolderMsgTmpl",""],[1,"lv-empty_btn",3,"click"],g,m,v]},template:function(t,e){if(1&t&&(o.bd(0,b,1,0,"ng-container",0),o.bd(1,w,1,3,"ng-template",null,1,o.cd),o.bd(3,k,80,1,"ng-template",null,2,o.cd),o.bd(5,C,2,2,"ng-template",null,3,o.cd),o.bd(7,G,3,2,"ng-template",null,4,o.cd)),2&t){const t=o.Rc(2),i=o.Rc(6);o.Dc("ngIf",!e.isFilter&&(e.isAssigneeFilter||e.isMeTabSelected))("ngIfThen",i)("ngIfElse",t)}},directives:[m.q,m.p],pipes:[v.a,m.b],encapsulation:2,changeDetection:0}),t})()},X4Xz:function(t,e,i){"use strict";i.d(e,"g",function(){return n}),i.d(e,"B",function(){return o}),i.d(e,"j",function(){return a}),i.d(e,"q",function(){return r}),i.d(e,"r",function(){return s}),i.d(e,"I",function(){return c}),i.d(e,"s",function(){return l}),i.d(e,"w",function(){return u}),i.d(e,"x",function(){return d}),i.d(e,"A",function(){return h}),i.d(e,"y",function(){return p}),i.d(e,"h",function(){return f}),i.d(e,"i",function(){return g}),i.d(e,"c",function(){return m}),i.d(e,"z",function(){return v}),i.d(e,"a",function(){return b}),i.d(e,"o",function(){return _}),i.d(e,"C",function(){return w}),i.d(e,"e",function(){return y}),i.d(e,"k",function(){return k}),i.d(e,"n",function(){return x}),i.d(e,"t",function(){return S}),i.d(e,"u",function(){return T}),i.d(e,"J",function(){return C}),i.d(e,"v",function(){return D}),i.d(e,"D",function(){return I}),i.d(e,"E",function(){return P}),i.d(e,"G",function(){return M}),i.d(e,"l",function(){return O}),i.d(e,"m",function(){return $}),i.d(e,"d",function(){return j}),i.d(e,"F",function(){return L}),i.d(e,"b",function(){return E}),i.d(e,"p",function(){return N}),i.d(e,"H",function(){return A}),i.d(e,"f",function(){return V});const n="[BOX VIEW] Load data",o="[BOX VIEW] Set loading",a="[BOX VIEW] Load task ids",r="[BOX VIEW] Reload tasks",s="[BOX VIEW] Reload tasks by ids",c="[BOX VIEW] Update tasks state",l="[BOX VIEW] Remove tasks state",u="[BOX VIEW] Set divisions",d="[BOX VIEW] Set divisions state",h="[BOX VIEW] Set group tasks",p="[BOX VIEW] Set group ids",f="[BOX VIEW] Load next page",g="[BOX VIEW] Load next page if not loading",m="[BOX VIEW] Expand box group",v="[BOX VIEW] Set group loading",b="[BOX VIEW] Drop tasks",_="[BOX VIEW] Move tasks",w="[BOX VIEW] Set workload visibility",y="[BOX VIEW] Get workload visibility";class k{constructor(t,e,i,o){this.fullReload=t,this.silent=e,this.tag=i,this.freshReq=o,this.type=n}}class x{constructor(t,e,i,n){this.fullReload=t,this.silent=e,this.pendingIds=i,this.freshReq=n,this.type=a}}class S{constructor(t){this.tasks=t,this.type=r}}class T{constructor(t,e){this.ids=t,this.groupId=e,this.type=s}}class C{constructor(t,e,i){this.tasks=t,this.field=e,this.groupId=i,this.type=c}}class D{constructor(t){this.ids=t,this.type=l}}class I{constructor(t,e){this.viewId=t,this.divisions=e,this.type=u}}class P{constructor(t){this.ids=t,this.type=p}}class M{constructor(t){this.tasks=t,this.type=h}}class O{constructor(t){this.payload=t,this.type=f}}class ${constructor(t,e){this.payload=t,this.tag=e,this.type=g}}class j{constructor(t){this.payload=t,this.type=m}}class L{constructor(t,e){this.groupId=t,this.loading=e,this.type=v}}class E{constructor(t){this.payload=t,this.type=b}}class N{constructor(t){this.payload=t,this.type=_}}class A{constructor(t){this.payload=t,this.type=w}}class V{constructor(t){this.payload=t,this.type=y}}},XeJJ:function(t,e,i){"use strict";i.d(e,"k",function(){return l}),i.d(e,"j",function(){return u}),i.d(e,"h",function(){return d}),i.d(e,"b",function(){return p}),i.d(e,"c",function(){return g}),i.d(e,"e",function(){return m}),i.d(e,"d",function(){return v}),i.d(e,"f",function(){return _}),i.d(e,"l",function(){return w}),i.d(e,"m",function(){return y}),i.d(e,"i",function(){return k}),i.d(e,"a",function(){return x}),i.d(e,"n",function(){return S}),i.d(e,"g",function(){return T});var n=i("l7P3"),o=i("xWuZ"),a=i("MguC"),r=i("LKfL"),s=i("GkwO");const c=Object(n.createFeatureSelector)("boxView"),l=Object(n.createSelector)(c,t=>t.needClearData),u=Object(n.createSelector)(c,t=>t.loading),d=Object(n.createSelector)(c,t=>t&&t.isWorkloadHidden),h=(Object(n.createSelector)(u,t=>t),Object(n.createSelector)(c,t=>t.divisionsMap)),p=Object(n.createSelector)(h,s.tb,(t,e)=>t[e]&&t[e].divisions),f=Object(n.createSelector)(p,t=>t||[]),g=Object(n.createSelector)(c,t=>t.groupIdsMap),m=Object(n.createSelector)(c,t=>t.groupTasksMap),v=Object(n.createSelector)(c,t=>t.groupLoadingMap),b=Object(n.createSelector)(f,t=>Object(o.a)(t.map(t=>t.groups))),_=Object(n.createSelector)(f,t=>Object(o.a)(t.map(t=>{const e=Object(r.c)(t.id);return[...t.groups||[],{id:e}]}))),w=Object(n.createSelector)(b,g,s.J,(t,e,i)=>Object(o.a)(t.map(t=>i[t.id]?[]:e[t.id]||[]))),y=Object(n.createSelector)(b,m,s.J,(t,e,i)=>Object(o.a)(t.map(t=>i[t.id]?[]:e[t.id]||[]))),k=Object(n.createSelector)(f,g,m,s.y,(t,e,i,n)=>{const o=[];for(const a of t){const t=[];for(const o of a.groups){const r=!(n&&n.users[a.id]&&n.users[a.id].expandedStatuses&&-1!==n.users[a.id].expandedStatuses.indexOf(o.id)),s=r?[]:o.includesFirstTask?i[o.id]:null,c=e[o.id]||[];t.push(Object.assign(Object.assign({},o),{ids:c,tasks:s,collapsed:r}))}o.push(Object.assign(Object.assign({},a),{groups:t}))}return o}),x=Object(n.createSelector)(s.T,s.z,(t,e)=>{if(t&&t.viewType===a.i.Box)return Object.assign(Object.assign({},t),{showAssignedComments:e.showAssignedComments,showScrumPoints:e.showScrumPoints,showTimeEstimate:e.showTimeEstimate,scrumFieldId:e.scrumFieldId,sort:e.sort,unassignedSort:e.unassignedSort,workload:e.workload})}),S=Object(n.createSelector)(f,m,(t,e)=>t&&t.reduce((t,i)=>{const n=Object(r.c)(i.id);return t[i.id]=e[n],t},{})),T=Object(n.createSelector)(f,g,(t,e)=>t&&t.reduce((t,i)=>{const n=Object(r.c)(i.id);return t[i.id]=e[n],t},{}))},Yyou:function(t,e,i){"use strict";i.d(e,"k",function(){return p}),i.d(e,"j",function(){return f}),i.d(e,"i",function(){return g}),i.d(e,"d",function(){return m}),i.d(e,"c",function(){return v}),i.d(e,"b",function(){return b}),i.d(e,"f",function(){return _}),i.d(e,"h",function(){return w}),i.d(e,"a",function(){return y}),i.d(e,"e",function(){return k}),i.d(e,"g",function(){return x});var n=i("l7P3"),o=i("Hgwy"),a=i("GkwO"),r=i("c3rA"),s=i("4F4K"),c=i("Gj5t"),l=i("feEP");const u=Object(n.createFeatureSelector)("mindmapView"),d=Object(n.createSelector)(u,s.g,({dataMap:t},e)=>{for(const i in t)if(t[i].tasksMap){const n=t[i];n.tasksMap=Object.keys(n.tasksMap).reduce((t,i)=>{const o=n.tasksMap[i];return o&&o.length&&(t[i]=o.map(t=>e[t.id]?e[t.id]:t)),t},{})}return t}),h=t=>Object(n.createSelector)(d,e=>e[t]),p=t=>Object(n.createSelector)(d,e=>{const i=e[t];return i&&i.view}),f=t=>Object(n.createSelector)(d,e=>{const i=e[t];return i&&i.tasksMap||{}}),g=t=>Object(n.createSelector)(d,e=>{const i=e[t];return i&&i.taskIdsMap||{}}),m=t=>Object(n.createSelector)(d,e=>{const i=e[t];return i&&i.expandedMap||{}}),v=t=>Object(n.createSelector)(d,e=>{const i=e[t];return i&&i.customNodes}),b=t=>Object(n.createSelector)(p(t),t=>t&&t.mindmapSettings&&t.mindmapSettings.custom),_=t=>Object(n.createSelector)(p(t),d,r.getTeam,r.getProjects,r.getCategoriesMap,r.getUser,r.getUserEnterprisePermissions,r.canCreateTask,(e,i,n,a,r,s,c,u)=>{const d={canEdit:e&&e.permissions&&e.permissions.editView&&!e.locked,canDelete:!c||c.delete_items===o.b.ON,canDeleteOwn:!c||c.delete_items===o.b.CREATE,canCreate:u};return e&&e.mindmapSettings&&e.mindmapSettings.custom?Object(l.c)(i[t],d,s.dark_theme):Object(l.e)(i[t],s,n,a,r,s.dark_theme,d)}),w=t=>Object(n.createSelector)(p(t),a.G,r.getSidebarShowArchivedOption,(t,e,i)=>t?t.mindmapSettings&&t.mindmapSettings.custom?{id:t.id,parent:t.parent}:{id:t.id,parent:t.parent,filter:Object(c.w)(t.filter,e),viewType:t.viewType,meView:t.meView,settings:{showSubtasksType:t.settings.showSubtasksType,meComments:t.settings.meComments,meSubtasks:t.settings.meSubtasks,meChecklists:t.settings.meChecklists,showClosedSubtasks:t.settings.showClosedSubtasks},sorting:t.sorting,teamSidebar:t.teamSidebar?{userIds:t.teamSidebar.userIds,showUnassigned:t.teamSidebar.showUnassigned,assignedComments:t.teamSidebar.assignedComments}:null,sidebarShowArchived:i}:t),y=t=>Object(n.createSelector)(h(t),b(t),(t,e)=>t&&t.addingTo),k=t=>Object(n.createSelector)((t=>Object(n.createSelector)(d,e=>{const i=e[t];return i&&i.subcategories}))(t),b(t),(t,e)=>t&&0===t.length&&!e),x=t=>Object(n.createSelector)(h(t),t=>t&&t.paywall)},ayLl:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i("A/Rp"),o=i("LEq2"),a=i("fXoL"),r=i("l7P3"),s=i("kRoH"),c=i("ofXK");let l=(()=>{class t{constructor(t){this.store=t,this.isOriginalLayout=!1,this.viewDate$=this.store.select(o.Z)}ngOnInit(){}setViewDate(t){this.store.dispatch(new n.ub({viewDate:t}))}todayClick(){this.store.dispatch(new n.u)}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.Store))},t.\u0275cmp=a.Qb({type:t,selectors:[["cu-calendar-today"]],hostAttrs:[1,"cu-calendar-today"],hostVars:2,hostBindings:function(t,e){2&t&&a.Ob("cu-calendar-today_v2",e.isOriginalLayout)},inputs:{isOriginalLayout:"isOriginalLayout"},decls:3,vars:3,consts:function(){let t;return t=$localize`:@@common_today␟c4453e295c9894a3e1734bea11586f6b51dde608␟7029179874585839502: Today
`,[["mwlCalendarToday","",1,"cu-calendar-today__button",3,"viewDate","viewDateChange","click"],t]},template:function(t,e){1&t&&(a.cc(0,"div",0),a.qc("viewDateChange",function(t){return e.setViewDate(t)})("click",function(){return e.todayClick()}),a.gc(1,1),a.vc(2,"async"),a.bc()),2&t&&a.Dc("viewDate",a.wc(2,1,e.viewDate$))},directives:[s.p],pipes:[c.b],styles:[".cu-calendar-today{display:inline-flex;align-items:center;margin-right:10px}.cu-calendar-today_v2{margin-right:15px;height:30px;border-radius:15px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);border:0;background:#fff}.dark-theme .cu-calendar-today_v2{background:#2b343b}.cu2-views-bar__options_v6 .cu-calendar-today{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;height:24px;padding:0 6px;margin-right:0;border-radius:6px}.cu2-views-bar__options_v6 .cu-calendar-today:hover{background-color:#f2f2f2}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-today:hover{background-color:#1e272e}.cu-calendar-today__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7c828d;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;cursor:pointer;padding:4px}.dark-theme .cu-calendar-today__button{color:#d5d6d7}.cu-calendar-today__button:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-today__button:hover{color:var(--theme-main-color)}}.cu-calendar-today:not(.cu-calendar-today_v2) .cu-calendar-today__button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.cu-calendar-today_v2 .cu-calendar-today__button{padding:4px 14px;color:#292d34;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-calendar-today_v2 .cu-calendar-today__button{color:#d5d6d7}.cu2-views-bar__options_v6 .cu-calendar-today__button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-ms-user-select:none;user-select:none;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#333}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-today__button{color:#abaeb0}"],encapsulation:2,changeDetection:0}),t})()},b3AA:function(t,e,i){(function(e){!function(){var i;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}function a(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var r,s="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var c;t:{var l={};try{l.__proto__={a:!0},c=l.a;break t}catch(Pm){}c=!1}r=c?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var u=r;function d(t,e){if(t.prototype=s(e.prototype),t.prototype.constructor=t,u)u(t,e);else for(var i in e)if("prototype"!=i)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.OA=e.prototype}var h="undefined"!=typeof window&&window===self?self:void 0!==e&&null!=e?e:self,p="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};!function(t){if(t){for(var e=h,i=["Array","prototype","fill"],n=0;n<i.length-1;n++){var o=i[n];o in e||(e[o]={}),e=e[o]}(t=t(n=e[i=i[i.length-1]]))!=n&&null!=t&&p(e,i,{writable:!0,value:t})}}(function(t){return t||function(t,e,i){var n=this.length||0;for(0>e&&(e=Math.max(0,n+e)),(null==i||i>n)&&(i=n),0>(i=Number(i))&&(i=Math.max(0,n+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}});var f="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||"object"==typeof window&&window.window===window&&window||{};function g(){}function m(t,e){var i=-1;return function(){var n=this,o=arguments;-1!==i&&f.clearTimeout(i),i=v(function(){i=-1,t.apply(n,o)},e)}}function v(t,e){return f.setTimeout(t,e)}function b(t){return f.document.createElement(t)}function _(t){throw Error(t)}function w(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),_(t)}function y(t,e,i,n){i=null===i?"*":"string"==typeof i?i:"function"==typeof i&&"string"==typeof i.className?i.className:"",void 0!==n&&(i+="."+n),_(i+" is not in the range "+e+": "+t)}function k(t){f.console&&f.console.log(t)}function x(){f.console&&f.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")}function S(t){return"object"==typeof t&&null!==t}function T(t){return Array.isArray(t)||f.NodeList&&t instanceof f.NodeList||f.HTMLCollection&&t instanceof f.HTMLCollection}function C(t){return Array.prototype.slice.call(t)}function D(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):_("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function I(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):_("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function P(){var t=U.pop();return void 0===t?[]:t}function M(t){t.length=0,U.push(t)}function O(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(S(t)&&t.constructor)return O(t.constructor);return typeof t}function $(t){var e=t;return S(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function j(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.IA;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function L(t,e,i){Object.defineProperty(Mi.prototype,t,{get:e,set:i})}function E(){var t=H;if(0===t.length)for(var e=f.document.getElementsByTagName("canvas"),i=e.length,n=0;n<i;n++){var o=e[n];o.parentElement&&o.parentElement.B&&t.push(o.parentElement.B)}return t}function N(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,o=0;o<t.length;o+=2)i[n++]=e[t.substr(o,2)];for(t=""===(t=i.join(""))?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)o=e[i],e[i]=e[n=(n+e[i]+119)%256],e[n]=o;n=i=0;for(var a="",r=0;r<t.length;r++)o=e[i=(i+1)%256],e[i]=e[n=(n+e[i])%256],e[n]=o,a+=String.fromCharCode(t.charCodeAt(r)^e[(e[i]+e[n])%256]);return a}void 0===f.requestAnimationFrame&&(f.requestAnimationFrame=f.setImmediate);var A=void 0!==f.navigator&&0<f.navigator.userAgent.indexOf("MSIE 9.0"),V=void 0!==f.navigator&&0<f.navigator.userAgent.indexOf("MSIE 10.0"),z=void 0!==f.navigator&&0<f.navigator.userAgent.indexOf("Trident/7"),F=void 0!==f.navigator&&0<f.navigator.userAgent.indexOf("Edge/"),B=void 0!==f.navigator&&void 0!==f.navigator.platform&&0<=f.navigator.platform.toUpperCase().indexOf("MAC"),R=void 0!==f.navigator&&void 0!==f.navigator.platform&&null!==f.navigator.platform.match(/(iPhone|iPod|iPad)/i),U=[];Object.freeze([]);var G,H=[];function W(t,e,i){nt(this),this.l=t,this.Qa=e,this.u=i}function q(t,e){return null==e||""===e?null:t[e]}function X(){this.Qw=[]}function Y(){}function K(){}function Z(t){this.key=-1,this.value=t}function J(t){this.nb=t,this.$e=null,t.Fa=null,this.ia=t.Aa,this.Oa=-1}function Q(t){this.nb=t,t.Zg=null,this.ia=t.Aa,this.Oa=t.j.length}function tt(t){nt(this),this.s=!1,this.j=[],this.Aa=0,this.Zg=this.Fa=null,void 0!==t&&("function"==typeof t||"string"==typeof t?x():this.addAll(t))}function et(t){this.og=t,t.Fa=null,this.ia=t.Aa,this.la=null}function it(t){nt(this),this.s=!1,this.Fb={},this.Db=0,this.Fa=null,this.Aa=0,this.Ue=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?x():this.addAll(t))}function nt(t){t.__gohashid=rt++}function ot(t){var e=t.__gohashid;return void 0===e&&(e=rt++,t.__gohashid=e),e}function at(t){return t.__gohashid}g.className="Util",g.Dx="32ab5ff3b26f42dc0ed90f21442913b5",g.adym="gojs.net",g.vfo="28e647fdb261",g.className="Util",W.prototype.toString=function(){return"EnumValue."+this.Qa},h.Object.defineProperties(W.prototype,{classType:{get:function(){return this.l}},name:{get:function(){return this.Qa}},value:{get:function(){return this.u}}}),W.className="EnumValue",X.prototype.toString=function(){return this.Qw.join("")},X.prototype.add=function(t){""!==t&&this.Qw.push(t)},X.className="StringBuilder",Y.className="PropertyCollection",K.prototype.reset=function(){},K.prototype.next=function(){return!1},K.prototype.ed=function(){return!1},K.prototype.first=function(){return null},K.prototype.any=function(){return!1},K.prototype.all=function(){return!0},K.prototype.each=function(){return this},K.prototype.map=function(){return this},K.prototype.filter=function(){return this},K.prototype.Dd=function(){},K.prototype.toString=function(){return"EmptyIterator"},h.Object.defineProperties(K.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),K.prototype.first=K.prototype.first,K.prototype.hasNext=K.prototype.ed,K.prototype.next=K.prototype.next,K.prototype.reset=K.prototype.reset,K.className="EmptyIterator",G=new K,Z.prototype.reset=function(){this.key=-1},Z.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},Z.prototype.ed=function(){return this.next()},Z.prototype.first=function(){return this.key=0,this.value},Z.prototype.any=function(t){return this.key=-1,t(this.value)},Z.prototype.all=function(t){return this.key=-1,t(this.value)},Z.prototype.each=function(t){return this.key=-1,t(this.value),this},Z.prototype.map=function(t){return new Z(t(this.value))},Z.prototype.filter=function(t){return t(this.value)?new Z(this.value):G},Z.prototype.Dd=function(){this.value=null},Z.prototype.toString=function(){return"SingletonIterator("+this.value+")"},h.Object.defineProperties(Z.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Z.prototype.first=Z.prototype.first,Z.prototype.hasNext=Z.prototype.ed,Z.prototype.next=Z.prototype.next,Z.prototype.reset=Z.prototype.reset,Z.className="SingletonIterator",J.prototype.reset=function(){var t=this.nb;t.Fa=null,this.ia=t.Aa,this.Oa=-1},J.prototype.next=function(){var t=this.nb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=(t=t.j).length,i=++this.Oa,n=this.$e;if(null!==n)for(;i<e;){var o=t[i];if(n(o))return this.key=this.Oa=i,this.value=o,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.Dd()}return!1},J.prototype.ed=function(){return this.next()},J.prototype.first=function(){var t=this.nb;this.ia=t.Aa,this.Oa=0;var e=(t=t.j).length,i=this.$e;if(null!==i){for(var n=0;n<e;){var o=t[n];if(i(o))return this.key=this.Oa=n,this.value=o;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},J.prototype.any=function(t){var e=this.nb;e.Fa=null,this.Oa=-1;for(var i=(e=e.j).length,n=this.$e,o=0;o<i;o++){var a=e[o];if((null===n||n(a))&&t(a))return!0}return!1},J.prototype.all=function(t){var e=this.nb;e.Fa=null,this.Oa=-1;for(var i=(e=e.j).length,n=this.$e,o=0;o<i;o++){var a=e[o];if((null===n||n(a))&&!t(a))return!1}return!0},J.prototype.each=function(t){var e=this.nb;e.Fa=null,this.Oa=-1;for(var i=(e=e.j).length,n=this.$e,o=0;o<i;o++){var a=e[o];(null===n||n(a))&&t(a)}return this},J.prototype.map=function(t){var e=this.nb;e.Fa=null,this.Oa=-1;for(var i=[],n=(e=e.j).length,o=this.$e,a=0;a<n;a++){var r=e[a];(null===o||o(r))&&i.push(t(r))}return(t=new tt).j=i,t.jb(),t.iterator},J.prototype.filter=function(t){var e=this.nb;e.Fa=null,this.Oa=-1;for(var i=[],n=(e=e.j).length,o=this.$e,a=0;a<n;a++){var r=e[a];(null===o||o(r))&&t(r)&&i.push(r)}return(t=new tt).j=i,t.jb(),t.iterator},J.prototype.Dd=function(){this.key=-1,this.value=null,this.ia=-1,this.$e=null,this.nb.Fa=this},J.prototype.toString=function(){return"ListIterator@"+this.Oa+"/"+this.nb.count},h.Object.defineProperties(J.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.$e},set:function(t){this.$e=t}},count:{get:function(){var t=this.$e;if(null!==t){for(var e=0,i=this.nb.j,n=i.length,o=0;o<n;o++)t(i[o])&&e++;return e}return this.nb.j.length}}}),J.prototype.first=J.prototype.first,J.prototype.hasNext=J.prototype.ed,J.prototype.next=J.prototype.next,J.prototype.reset=J.prototype.reset,J.className="ListIterator",Q.prototype.reset=function(){var t=this.nb;t.Zg=null,this.ia=t.Aa,this.Oa=t.j.length},Q.prototype.next=function(){var t=this.nb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=--this.Oa;return 0<=e?(this.key=e,this.value=t.j[e],!0):(this.Dd(),!1)},Q.prototype.ed=function(){return this.next()},Q.prototype.first=function(){var t=this.nb;this.ia=t.Aa;var e=t.j;return this.Oa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},Q.prototype.any=function(t){var e=this.nb;e.Zg=null;var i=(e=e.j).length;for(this.Oa=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},Q.prototype.all=function(t){var e=this.nb;e.Zg=null;var i=(e=e.j).length;for(this.Oa=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},Q.prototype.each=function(t){var e=this.nb;e.Zg=null;var i=(e=e.j).length;for(this.Oa=i,--i;0<=i;i--)t(e[i]);return this},Q.prototype.map=function(t){var e=this.nb;e.Zg=null;var i=[],n=(e=e.j).length;for(this.Oa=n,--n;0<=n;n--)i.push(t(e[n]));return(t=new tt).j=i,t.jb(),t.iterator},Q.prototype.filter=function(t){var e=this.nb;e.Zg=null;var i=[],n=(e=e.j).length;for(this.Oa=n,--n;0<=n;n--){var o=e[n];t(o)&&i.push(o)}return(t=new tt).j=i,t.jb(),t.iterator},Q.prototype.Dd=function(){this.key=-1,this.value=null,this.ia=-1,this.nb.Zg=this},Q.prototype.toString=function(){return"ListIteratorBackwards("+this.Oa+"/"+this.nb.count+")"},h.Object.defineProperties(Q.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.nb.j.length}}}),Q.prototype.first=Q.prototype.first,Q.prototype.hasNext=Q.prototype.ed,Q.prototype.next=Q.prototype.next,Q.prototype.reset=Q.prototype.reset,Q.className="ListIteratorBackwards",(i=tt.prototype).jb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},i.freeze=function(){return this.s=!0,this},i.ea=function(){return this.s=!1,this},i.toString=function(){return"List()#"+at(this)},i.add=function(t){return null===t||(this.s&&w(this,t),this.j.push(t),this.jb()),this},i.push=function(t){this.add(t)},i.addAll=function(t){if(null===t)return this;this.s&&w(this);var e=this.j;if(T(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.jb(),this},i.clear=function(){this.s&&w(this),this.j.length=0,this.jb()},i.contains=function(t){return null!==t&&-1!==this.j.indexOf(t)},i.has=function(t){return this.contains(t)},i.indexOf=function(t){return null===t?-1:this.j.indexOf(t)},i.L=function(t){var e=this.j;return(0>t||t>=e.length)&&y(t,"0 <= i < length",tt,"elt:i"),e[t]},i.get=function(t){return this.L(t)},i.hd=function(t,e){var i=this.j;(0>t||t>=i.length)&&y(t,"0 <= i < length",tt,"setElt:i"),this.s&&w(this,t),i[t]=e},i.set=function(t,e){this.hd(t,e)},i.first=function(){var t=this.j;return 0===t.length?null:t[0]},i.Xb=function(){var t=this.j,e=t.length;return 0<e?t[e-1]:null},i.pop=function(){this.s&&w(this);var t=this.j;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.j,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.j,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.j,i=e.length,n=0;n<i;n++)t(e[n]);return this},tt.prototype.map=function(t){for(var e=new tt,i=[],n=this.j,o=n.length,a=0;a<o;a++)i.push(t(n[a]));return e.j=i,e.jb(),e},tt.prototype.filter=function(t){for(var e=new tt,i=[],n=this.j,o=n.length,a=0;a<o;a++){var r=n[a];t(r)&&i.push(r)}return e.j=i,e.jb(),e},(i=tt.prototype).tb=function(t,e){0>t&&y(t,">= 0",tt,"insertAt:i"),this.s&&w(this,t);var i=this.j;t>=i.length?i.push(e):i.splice(t,0,e),this.jb()},i.remove=function(t){if(null===t)return!1;this.s&&w(this,t);var e=this.j;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.jb(),!0)},i.delete=function(t){return this.remove(t)},i.Za=function(t){var e=this.j;(0>t||t>=e.length)&&y(t,"0 <= i < length",tt,"removeAt:i"),this.s&&w(this,t),t===e.length-1?e.pop():e.splice(t,1),this.jb()},i.removeRange=function(t,e){var i=this.j,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this.s&&w(this);for(var o=t,a=e+1;a<n;)i[o++]=i[a++];return i.length=n-(e-t+1),this.jb(),this},tt.prototype.copy=function(){var t=new tt,e=this.j;return 0<e.length&&(t.j=Array.prototype.slice.call(e)),t},(i=tt.prototype).na=function(){for(var t=this.j,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},i.pw=function(){for(var t=new it,e=this.j,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},i.sort=function(t){return this.s&&w(this),this.j.sort(t),this.jb(),this},i.ej=function(t,e,i){var n=this.j,o=n.length;void 0===e&&(e=0),void 0===i&&(i=o),this.s&&w(this);var a=i-e;if(1>=a)return this;if((0>e||e>=o-1)&&y(e,"0 <= from < length",tt,"sortRange:from"),2===a)return 0<t(i=n[e],o=n[e+1])&&(n[e]=o,n[e+1]=i,this.jb()),this;if(0===e)if(i>=o)n.sort(t);else for((e=n.slice(0,i)).sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=o)for((i=n.slice(e)).sort(t),t=e;t<o;t++)n[t]=i[t-e];else for((o=n.slice(e,i)).sort(t),t=e;t<i;t++)n[t]=o[t-e];return this.jb(),this},i.reverse=function(){return this.s&&w(this),this.j.reverse(),this.jb(),this},h.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.j}},count:{get:function(){return this.j.length}},size:{get:function(){return this.j.length}},length:{get:function(){return this.j.length}},iterator:{get:function(){if(0>=this.j.length)return G;var t=this.Fa;return null!==t?(t.reset(),t):new J(this)}},iteratorBackwards:{get:function(){if(0>=this.j.length)return G;var t=this.Zg;return null!==t?(t.reset(),t):new Q(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.ej,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.pw,tt.prototype.toArray=tt.prototype.na,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.Za,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.tb,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.Xb,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.hd,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.L,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.ea,tt.prototype.freeze=tt.prototype.freeze,tt.className="List",et.prototype.reset=function(){var t=this.og;t.Fa=null,this.ia=t.Aa,this.la=null},et.prototype.next=function(){var t=this.og;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.value=e.value,this.key=e.key,!0):(this.Dd(),!1)},et.prototype.ed=function(){return this.next()},et.prototype.first=function(){var t=this.og;if(this.ia=t.Aa,null!==(t=t.ba)){this.la=t;var e=t.value;return this.key=t.key,this.value=e}return null},et.prototype.any=function(t){var e=this.og;for(this.la=e.Fa=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},et.prototype.all=function(t){var e=this.og;for(this.la=e.Fa=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},et.prototype.each=function(t){var e=this.og;for(this.la=e.Fa=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},et.prototype.map=function(t){var e=this.og;e.Fa=null;var i=new tt;for(e=e.ba;null!==e;)i.add(t(e.value)),e=e.oa;return i.iterator},et.prototype.filter=function(t){var e=this.og;e.Fa=null;var i=new tt;for(e=e.ba;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},et.prototype.Dd=function(){this.value=this.key=null,this.ia=-1,this.og.Fa=this},et.prototype.toString=function(){return null!==this.la?"SetIterator@"+this.la.value:"SetIterator"},h.Object.defineProperties(et.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.og.Db}}}),et.prototype.first=et.prototype.first,et.prototype.hasNext=et.prototype.ed,et.prototype.next=et.prototype.next,et.prototype.reset=et.prototype.reset,et.className="SetIterator",(i=it.prototype).jb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},i.freeze=function(){return this.s=!0,this},i.ea=function(){return this.s=!1,this},i.toString=function(){return"Set()#"+at(this)},i.add=function(t){if(null===t)return this;this.s&&w(this,t);var e=t;return S(t)&&(e=ot(t)),void 0===this.Fb[e]&&(this.Db++,t=new ut(t,t),this.Fb[e]=t,null===(e=this.Ue)?this.ba=t:(t.Cl=e,e.oa=t),this.Ue=t,this.jb()),this},i.addAll=function(t){if(null===t)return this;if(this.s&&w(this),T(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},i.contains=function(t){if(null===t)return!1;var e=t;return(!S(t)||void 0!==(e=at(t)))&&void 0!==this.Fb[e]},i.has=function(t){return this.contains(t)},i.Wy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},i.Xy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},i.first=function(){var t=this.ba;return null===t?null:t.value},it.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},it.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},it.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},it.prototype.map=function(t){for(var e=new it,i=this.ba;null!==i;)e.add(t(i.value)),i=i.oa;return e},it.prototype.filter=function(t){for(var e=new it,i=this.ba;null!==i;){var n=i.value;t(n)&&e.add(n),i=i.oa}return e},(i=it.prototype).remove=function(t){if(null===t)return!1;this.s&&w(this,t);var e=t;if(S(t)&&void 0===(e=at(t)))return!1;if(void 0===(t=this.Fb[e]))return!1;var i=t.oa,n=t.Cl;return null!==i&&(i.Cl=n),null!==n&&(n.oa=i),this.ba===t&&(this.ba=i),this.Ue===t&&(this.Ue=n),delete this.Fb[e],this.Db--,this.jb(),!0},i.delete=function(t){return this.remove(t)},i.Gq=function(t){if(null===t)return this;if(this.s&&w(this),T(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},i.tA=function(t){if(null===t||0===this.count)return this;this.s&&w(this);var e=new it;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.Gq(t),this},i.clear=function(){this.s&&w(this),this.Fb={},this.Db=0,null!==this.Fa&&this.Fa.reset(),this.Ue=this.ba=null,this.jb()},it.prototype.copy=function(){var t,e=new it,i=this.Fb;for(t in i)e.add(i[t].value);return e},it.prototype.na=function(){var t,e=Array(this.Db),i=this.Fb,n=0;for(t in i)e[n]=i[t].value,n++;return e},it.prototype.ow=function(){var t,e=new tt,i=this.Fb;for(t in i)e.add(i[t].value);return e},h.Object.defineProperties(it.prototype,{count:{get:function(){return this.Db}},size:{get:function(){return this.Db}},iterator:{get:function(){if(0>=this.Db)return G;var t=this.Fa;return null!==t?(t.reset(),t):new et(this)}}}),it.prototype.toList=it.prototype.ow,it.prototype.toArray=it.prototype.na,it.prototype.clear=it.prototype.clear,it.prototype.retainAll=it.prototype.tA,it.prototype.removeAll=it.prototype.Gq,it.prototype.delete=it.prototype.delete,it.prototype.remove=it.prototype.remove,it.prototype.first=it.prototype.first,it.prototype.containsAny=it.prototype.Xy,it.prototype.containsAll=it.prototype.Wy,it.prototype.has=it.prototype.has,it.prototype.contains=it.prototype.contains,it.prototype.addAll=it.prototype.addAll,it.prototype.add=it.prototype.add,it.prototype.thaw=it.prototype.ea,it.prototype.freeze=it.prototype.freeze;var rt=1;function st(t){this.fa=t,this.ia=t.Aa,this.la=null}function ct(t){it.call(this),nt(this),this.s=!0,this.fa=t}function lt(t){this.fa=t,t.Te=null,this.ia=t.Aa,this.la=null}function ut(t,e){this.key=t,this.value=e,this.Cl=this.oa=null}function dt(t){this.fa=t,t.Fa=null,this.ia=t.Aa,this.la=null}function ht(t){nt(this),this.s=!1,this.Fb={},this.Db=0,this.Te=this.Fa=null,this.Aa=0,this.Ue=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?x():this.addAll(t))}function pt(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):_("Invalid arguments to Point constructor: "+t+", "+e),this.s=!1}function ft(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new pt(i,o)}return new pt}function gt(t){return t.x.toString()+" "+t.y.toString()}function mt(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}function vt(t,e){return e.Wd(t),t}function bt(t,e,i,n,o,a){var r=o-i,s=a-n,c=r*r+s*s,l=-(i-=t)*r-(n-=e)*s;return 0>=l||l>=c?(r=o-t,s=a-e,Math.min(i*i+n*n,r*r+s*s)):(t=r*n-s*i)*t/c}function _t(t,e,i,n){return(t=i-t)*t+(e=n-e)*e}function wt(t,e,i,n){return e=n-e,0==(t=i-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}it.className="Set",it.uniqueHash=nt,it.hashIdUnique=ot,it.hashId=at,st.prototype.reset=function(){this.ia=this.fa.Aa,this.la=null},st.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.value=this.key=t=e.key,!0):(this.Dd(),!1)},st.prototype.ed=function(){return this.next()},st.prototype.first=function(){var t=this.fa;return this.ia=t.Aa,null!==(t=t.ba)?(this.la=t,this.value=this.key=t=t.key):null},st.prototype.any=function(t){var e=this.fa;for(this.la=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},st.prototype.all=function(t){var e=this.fa;for(this.la=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},st.prototype.each=function(t){var e=this.fa;for(this.la=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},st.prototype.map=function(t){var e=this.fa;this.la=null;var i=new tt;for(e=e.ba;null!==e;)i.add(t(e.key)),e=e.oa;return i.iterator},st.prototype.filter=function(t){var e=this.fa;this.la=null;var i=new tt;for(e=e.ba;null!==e;){var n=e.key;t(n)&&i.add(n),e=e.oa}return i.iterator},st.prototype.Dd=function(){this.value=this.key=null,this.ia=-1},st.prototype.toString=function(){return null!==this.la?"MapKeySetIterator@"+this.la.value:"MapKeySetIterator"},h.Object.defineProperties(st.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Db}}}),st.prototype.first=st.prototype.first,st.prototype.hasNext=st.prototype.ed,st.prototype.next=st.prototype.next,st.prototype.reset=st.prototype.reset,st.className="MapKeySetIterator",d(ct,it),(i=ct.prototype).freeze=function(){return this},i.ea=function(){return this},i.toString=function(){return"MapKeySet("+this.fa.toString()+")"},i.add=function(){return _("This Set is read-only: "+this.toString()),this},i.contains=function(t){return this.fa.contains(t)},i.has=function(t){return this.contains(t)},i.remove=function(){return _("This Set is read-only: "+this.toString()),!1},i.delete=function(t){return this.remove(t)},i.clear=function(){_("This Set is read-only: "+this.toString())},i.first=function(){var t=this.fa.ba;return null!==t?t.key:null},ct.prototype.any=function(t){for(var e=this.fa.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},ct.prototype.all=function(t){for(var e=this.fa.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},ct.prototype.each=function(t){for(var e=this.fa.ba;null!==e;)t(e.key),e=e.oa;return this},ct.prototype.map=function(t){for(var e=new it,i=this.fa.ba;null!==i;)e.add(t(i.key)),i=i.oa;return e},ct.prototype.filter=function(t){for(var e=new it,i=this.fa.ba;null!==i;){var n=i.key;t(n)&&e.add(n),i=i.oa}return e},ct.prototype.copy=function(){return new ct(this.fa)},ct.prototype.pw=function(){var t,e=new it,i=this.fa.Fb;for(t in i)e.add(i[t].key);return e},ct.prototype.na=function(){var t,e=this.fa.Fb,i=Array(this.fa.Db),n=0;for(t in e)i[n]=e[t].key,n++;return i},ct.prototype.ow=function(){var t,e=new tt,i=this.fa.Fb;for(t in i)e.add(i[t].key);return e},h.Object.defineProperties(ct.prototype,{count:{get:function(){return this.fa.Db}},size:{get:function(){return this.fa.Db}},iterator:{get:function(){return 0>=this.fa.Db?G:new st(this.fa)}}}),ct.prototype.toList=ct.prototype.ow,ct.prototype.toArray=ct.prototype.na,ct.prototype.toSet=ct.prototype.pw,ct.prototype.first=ct.prototype.first,ct.prototype.clear=ct.prototype.clear,ct.prototype.delete=ct.prototype.delete,ct.prototype.remove=ct.prototype.remove,ct.prototype.has=ct.prototype.has,ct.prototype.contains=ct.prototype.contains,ct.prototype.add=ct.prototype.add,ct.prototype.thaw=ct.prototype.ea,ct.prototype.freeze=ct.prototype.freeze,ct.className="MapKeySet",lt.prototype.reset=function(){var t=this.fa;t.Te=null,this.ia=t.Aa,this.la=null},lt.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.value=e.value,this.key=e.key,!0):(this.Dd(),!1)},lt.prototype.ed=function(){return this.next()},lt.prototype.first=function(){var t=this.fa;if(this.ia=t.Aa,null!==(t=t.ba)){this.la=t;var e=t.value;return this.key=t.key,this.value=e}return null},lt.prototype.any=function(t){var e=this.fa;for(this.la=e.Te=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},lt.prototype.all=function(t){var e=this.fa;for(this.la=e.Te=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},lt.prototype.each=function(t){var e=this.fa;for(this.la=e.Te=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},lt.prototype.map=function(t){var e=this.fa;this.la=e.Te=null;var i=new tt;for(e=e.ba;null!==e;)i.add(t(e.value)),e=e.oa;return i.iterator},lt.prototype.filter=function(t){var e=this.fa;this.la=e.Te=null;var i=new tt;for(e=e.ba;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},lt.prototype.Dd=function(){this.value=this.key=null,this.ia=-1,this.fa.Te=this},lt.prototype.toString=function(){return null!==this.la?"MapValueSetIterator@"+this.la.value:"MapValueSetIterator"},h.Object.defineProperties(lt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Db}}}),lt.prototype.first=lt.prototype.first,lt.prototype.hasNext=lt.prototype.ed,lt.prototype.next=lt.prototype.next,lt.prototype.reset=lt.prototype.reset,lt.className="MapValueSetIterator",ut.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},ut.className="KeyValuePair",dt.prototype.reset=function(){var t=this.fa;t.Fa=null,this.ia=t.Aa,this.la=null},dt.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.la;return null!==(e=null===e?t.ba:e.oa)?(this.la=e,this.key=e.key,this.value=e.value,!0):(this.Dd(),!1)},dt.prototype.ed=function(){return this.next()},dt.prototype.first=function(){var t=this.fa;return this.ia=t.Aa,null!==(t=t.ba)?(this.la=t,this.key=t.key,this.value=t.value,t):null},dt.prototype.any=function(t){var e=this.fa;for(this.la=e.Fa=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},dt.prototype.all=function(t){var e=this.fa;for(this.la=e.Fa=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},dt.prototype.each=function(t){var e=this.fa;for(this.la=e.Fa=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},dt.prototype.map=function(t){var e=this.fa;this.la=e.Fa=null;var i=new tt;for(e=e.ba;null!==e;)i.add(t(e)),e=e.oa;return i.iterator},dt.prototype.filter=function(t){var e=this.fa;this.la=e.Fa=null;var i=new tt;for(e=e.ba;null!==e;)t(e)&&i.add(e),e=e.oa;return i.iterator},dt.prototype.Dd=function(){this.value=this.key=null,this.ia=-1,this.fa.Fa=this},dt.prototype.toString=function(){return null!==this.la?"MapIterator@"+this.la:"MapIterator"},h.Object.defineProperties(dt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Db}}}),dt.prototype.first=dt.prototype.first,dt.prototype.hasNext=dt.prototype.ed,dt.prototype.next=dt.prototype.next,dt.prototype.reset=dt.prototype.reset,dt.className="MapIterator",(i=ht.prototype).jb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},i.freeze=function(){return this.s=!0,this},i.ea=function(){return this.s=!1,this},i.toString=function(){return"Map()#"+at(this)},i.add=function(t,e){this.s&&w(this,t);var i=t;S(t)&&(i=ot(t));var n=this.Fb[i];return void 0===n?(this.Db++,t=new ut(t,e),this.Fb[i]=t,null===(i=this.Ue)?this.ba=t:(t.Cl=i,i.oa=t),this.Ue=t,this.jb()):n.value=e,this},i.set=function(t,e){return this.add(t,e)},i.addAll=function(t){if(null===t)return this;if(T(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof ht)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},i.first=function(){return this.ba},ht.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},ht.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},ht.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},ht.prototype.map=function(t){for(var e=new ht,i=this.ba;null!==i;)e.add(i.key,t(i)),i=i.oa;return e},ht.prototype.filter=function(t){for(var e=new ht,i=this.ba;null!==i;)t(i)&&e.add(i.key,i.value),i=i.oa;return e},(i=ht.prototype).contains=function(t){var e=t;return(!S(t)||void 0!==(e=at(t)))&&void 0!==this.Fb[e]},i.has=function(t){return this.contains(t)},i.H=function(t){var e=t;return S(t)&&void 0===(e=at(t))||void 0===(t=this.Fb[e])?null:t.value},i.get=function(t){return this.H(t)},i.remove=function(t){if(null===t)return!1;this.s&&w(this,t);var e=t;if(S(t)&&void 0===(e=at(t)))return!1;if(void 0===(t=this.Fb[e]))return!1;var i=t.oa,n=t.Cl;return null!==i&&(i.Cl=n),null!==n&&(n.oa=i),this.ba===t&&(this.ba=i),this.Ue===t&&(this.Ue=n),delete this.Fb[e],this.Db--,this.jb(),!0},i.delete=function(t){return this.remove(t)},i.clear=function(){this.s&&w(this),this.Fb={},this.Db=0,null!==this.Fa&&this.Fa.reset(),null!==this.Te&&this.Te.reset(),this.Ue=this.ba=null,this.jb()},ht.prototype.copy=function(){var t,e=new ht,i=this.Fb;for(t in i){var n=i[t];e.add(n.key,n.value)}return e},ht.prototype.na=function(){var t,e=this.Fb,i=Array(this.Db),n=0;for(t in e){var o=e[t];i[n]=new ut(o.key,o.value),n++}return i},ht.prototype.Cf=function(){return new ct(this)},h.Object.defineProperties(ht.prototype,{count:{get:function(){return this.Db}},size:{get:function(){return this.Db}},iterator:{get:function(){if(0>=this.count)return G;var t=this.Fa;return null!==t?(t.reset(),t):new dt(this)}},iteratorKeys:{get:function(){return 0>=this.count?G:new st(this)}},iteratorValues:{get:function(){if(0>=this.count)return G;var t=this.Te;return null!==t?(t.reset(),t):new lt(this)}}}),ht.prototype.toKeySet=ht.prototype.Cf,ht.prototype.toArray=ht.prototype.na,ht.prototype.clear=ht.prototype.clear,ht.prototype.delete=ht.prototype.delete,ht.prototype.remove=ht.prototype.remove,ht.prototype.get=ht.prototype.get,ht.prototype.getValue=ht.prototype.H,ht.prototype.has=ht.prototype.has,ht.prototype.contains=ht.prototype.contains,ht.prototype.first=ht.prototype.first,ht.prototype.addAll=ht.prototype.addAll,ht.prototype.set=ht.prototype.set,ht.prototype.add=ht.prototype.add,ht.prototype.thaw=ht.prototype.ea,ht.prototype.freeze=ht.prototype.freeze,ht.className="Map",pt.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},pt.prototype.h=function(t,e){return this.x=t,this.y=e,this},pt.prototype.Cg=function(t,e){return this.x=t,this.y=e,this},pt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},pt.prototype.copy=function(){var t=new pt;return t.x=this.x,t.y=this.y,t},(i=pt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},i.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},i.freeze=function(){return this.s=!0,this},i.ea=function(){return Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1,this},i.toString=function(){return"Point("+this.x+","+this.y+")"},i.w=function(t){return t instanceof pt&&this.x===t.x&&this.y===t.y},i.Ri=function(t,e){return this.x===t&&this.y===e},i.Ma=function(t){return qe.A(this.x,t.x)&&qe.A(this.y,t.y)},i.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.ae=function(t){return this.x-=t.x,this.y-=t.y,this},i.offset=function(t,e){return this.x+=t,this.y+=e,this},pt.prototype.rotate=function(t){if(0===t)return this;var e=this.x,i=this.y;if(0===e&&0===i)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},(i=pt.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},i.Ce=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},i.dd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},i.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},i.Sa=function(t){return mt(t.x-this.x,t.y-this.y)},i.direction=function(t,e){return mt(t-this.x,e-this.y)},i.mA=function(t,e,i,n){return qe.Ih(t,e,i,n,this.x,this.y,this),this},i.nA=function(t,e){return qe.Ih(t.x,t.y,e.x,e.y,this.x,this.y,this),this},i.zA=function(t,e,i,n){return qe.nq(this.x,this.y,t,e,i,n,this),this},i.AA=function(t,e){return qe.nq(this.x,this.y,t.x,t.y,e.width,e.height,this),this},i.dj=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},i.xk=function(t,e,i,n,o){return this.x=t+o.x*i+o.offsetX,this.y=e+o.y*n+o.offsetY,this},i.transform=function(t){return t.ra(this),this},i.v=function(){return isFinite(this.x)&&isFinite(this.y)},pt.alloc=function(){var t=jt.pop();return void 0===t?new pt:t},pt.allocAt=function(t,e){var i=jt.pop();return void 0===i?new pt(t,e):(i.x=t,i.y=e,i)},pt.free=function(t){jt.push(t)},pt.prototype.isReal=pt.prototype.v,pt.prototype.setSpot=pt.prototype.xk,pt.prototype.setRectSpot=pt.prototype.dj,pt.prototype.snapToGridPoint=pt.prototype.AA,pt.prototype.snapToGrid=pt.prototype.zA,pt.prototype.projectOntoLineSegmentPoint=pt.prototype.nA,pt.prototype.projectOntoLineSegment=pt.prototype.mA,pt.intersectingLineSegments=function(t,e,i,n,o,a,r,s){return qe.tq(t,e,i,n,o,a,r,s)},pt.prototype.direction=pt.prototype.direction,pt.prototype.directionPoint=pt.prototype.Sa,pt.prototype.normalize=pt.prototype.normalize,pt.prototype.distanceSquared=pt.prototype.dd,pt.prototype.distanceSquaredPoint=pt.prototype.Ce,pt.prototype.scale=pt.prototype.scale,pt.prototype.rotate=pt.prototype.rotate,pt.prototype.offset=pt.prototype.offset,pt.prototype.subtract=pt.prototype.ae,pt.prototype.add=pt.prototype.add,pt.prototype.equalsApprox=pt.prototype.Ma,pt.prototype.equalTo=pt.prototype.Ri,pt.prototype.equals=pt.prototype.w,pt.prototype.set=pt.prototype.set,pt.prototype.setTo=pt.prototype.Cg;var yt,kt,xt,St,Tt,Ct,Dt,It,Pt,Mt,Ot,$t,jt=[];function Lt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):_("Invalid arguments to Size constructor: "+t+", "+e),this.s=!1}function Et(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new Lt(i,o)}return new Lt}function Nt(t){return t.width.toString()+" "+t.height.toString()}pt.className="Point",pt.parse=ft,pt.stringify=gt,pt.distanceLineSegmentSquared=bt,pt.distanceSquared=_t,pt.direction=wt,pt.Origin=yt=new pt(0,0).ca(),pt.InfiniteTopLeft=kt=new pt(-1/0,-1/0).ca(),pt.InfiniteBottomRight=xt=new pt(1/0,1/0).ca(),pt.SixPoint=St=new pt(6,6).ca(),pt.NoPoint=Tt=new pt(NaN,NaN).ca(),pt.parse=ft,pt.stringify=gt,pt.distanceLineSegmentSquared=bt,pt.distanceSquared=_t,pt.direction=wt,Lt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},Lt.prototype.h=function(t,e){return this.width=t,this.height=e,this},Lt.prototype.Cg=function(t,e){return this.width=t,this.height=e,this},Lt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},Lt.prototype.copy=function(){var t=new Lt;return t.width=this.width,t.height=this.height,t},(i=Lt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},i.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},i.freeze=function(){return this.s=!0,this},i.ea=function(){return Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1,this},i.toString=function(){return"Size("+this.width+","+this.height+")"},i.w=function(t){return t instanceof Lt&&this.width===t.width&&this.height===t.height},i.Ri=function(t,e){return this.width===t&&this.height===e},i.Ma=function(t){return qe.A(this.width,t.width)&&qe.A(this.height,t.height)},i.v=function(){return isFinite(this.width)&&isFinite(this.height)},Lt.alloc=function(){var t=At.pop();return void 0===t?new Lt:t},Lt.free=function(t){At.push(t)},Lt.prototype.isReal=Lt.prototype.v,Lt.prototype.equalsApprox=Lt.prototype.Ma,Lt.prototype.equalTo=Lt.prototype.Ri,Lt.prototype.equals=Lt.prototype.w,Lt.prototype.set=Lt.prototype.set,Lt.prototype.setTo=Lt.prototype.Cg;var At=[];function Vt(t,e,i,n){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof pt?(i=t.x,t=t.y,e instanceof pt?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof Lt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):_("Incorrect arguments supplied to Rect constructor")):"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&(0<=i||isNaN(i))&&"number"==typeof n&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):_("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this.s=!1}function zt(t,e,i){t.width=e,t.height=i}function Ft(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;(n=t[e++])&&(o=parseFloat(n));for(var a=0;""===t[e];)e++;(n=t[e++])&&(a=parseFloat(n));for(var r=0;""===t[e];)e++;return(n=t[e++])&&(r=parseFloat(n)),new Vt(i,o,a,r)}return new Vt}function Bt(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Rt(t,e){return qe.$(t.x,e.x)&&qe.$(t.y,e.y)&&qe.$(t.width,e.width)&&qe.$(t.height,e.height)}function Ut(t,e,i,n,o){var a=t.width;return i+o<=-a?(t.x+=a/2,t.width=0):(t.x-=o,t.width+=i+o),e+n<=-(i=t.height)?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}function Gt(t,e,i,n,o){var a=Math.max(t.x,e),r=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+o),t.x=a,t.y=r,t.width=Math.max(0,e-a),t.height=Math.max(0,i-r),t}function Ht(t,e){var i=t.width,n=t.x,o=e.x-10;return!(n>e.width+10+10+o||o>i+n||(i=t.height,(t=t.y)>e.height+10+10+(n=e.y-10)||n>i+t))}function Wt(t,e,i,n,o){var a=Math.min(t.x,e),r=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+o),t.x=a,t.y=r,t.width=e-a,t.height=i-r,t}function qt(t,e,i,n,o,a,r,s){return void 0===r&&(r=0),void 0===s&&(s=0),t<=o&&o+r<=t+i&&e<=a&&a+s<=e+n}function Xt(t,e,i,n,o,a,r,s){return!(t>r+o||o>i+t||e>s+a||a>n+e)}Lt.className="Size",Lt.parse=Et,Lt.stringify=Nt,Lt.ZeroSize=Ct=new Lt(0,0).ca(),Lt.OneSize=Dt=new Lt(1,1).ca(),Lt.SixSize=It=new Lt(6,6).ca(),Lt.EightSize=Pt=new Lt(8,8).ca(),Lt.TenSize=Mt=new Lt(10,10).ca(),Lt.InfiniteSize=Ot=new Lt(1/0,1/0).ca(),Lt.NoSize=$t=new Lt(NaN,NaN).ca(),Lt.parse=Et,Lt.stringify=Nt,(i=Vt.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},i.Cg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},i.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.jd=function(t){return this.x=t.x,this.y=t.y,this},i.xA=function(t){return this.width=t.width,this.height=t.height,this},Vt.prototype.copy=function(){var t=new Vt;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(i=Vt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},i.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},i.freeze=function(){return this.s=!0,this},i.ea=function(){return Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1,this},i.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},i.w=function(t){return t instanceof Vt&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.Ri=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},i.Ma=function(t){return qe.A(this.x,t.x)&&qe.A(this.y,t.y)&&qe.A(this.width,t.width)&&qe.A(this.height,t.height)},i.aa=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},i.Be=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},i.contains=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},i.offset=function(t,e){return this.x+=t,this.y+=e,this},i.Vc=function(t,e){return Ut(this,e,t,e,t)},i.eq=function(t){return Ut(this,t.top,t.right,t.bottom,t.left)},i.nw=function(t){return Ut(this,-t.top,-t.right,-t.bottom,-t.left)},i.Qz=function(t,e,i,n){return Ut(this,t,e,i,n)},i.Uz=function(t){return Gt(this,t.x,t.y,t.width,t.height)},i.Hv=function(t,e,i,n){return Gt(this,t,e,i,n)},i.Gc=function(t){return this.Iv(t.x,t.y,t.width,t.height)},i.Iv=function(t,e,i,n){var o=this.width,a=this.x;return!(1/0!==o&&1/0!==i&&(o+=a,i+=t,isNaN(i)||isNaN(o)||a>i||t>o)||(i=this.y,1/0!==(t=this.height)&&1/0!==n&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))},i.Ie=function(t){return Wt(this,t.x,t.y,0,0)},i.Hc=function(t){return Wt(this,t.x,t.y,t.width,t.height)},i.uw=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),Wt(this,t,e,i,n)},i.xk=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this},i.v=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},i.Wz=function(){return 0===this.width&&0===this.height},Vt.alloc=function(){var t=Zt.pop();return void 0===t?new Vt:t},Vt.allocAt=function(t,e,i,n){var o=Zt.pop();return void 0===o?new Vt(t,e,i,n):o.h(t,e,i,n)},Vt.free=function(t){Zt.push(t)},h.Object.defineProperties(Vt.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new pt(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new Lt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new pt(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),Vt.prototype.isEmpty=Vt.prototype.Wz,Vt.prototype.isReal=Vt.prototype.v,Vt.intersectsLineSegment=function(t,e,i,n,o,a,r,s){return qe.Tx(t,e,i,n,o,a,r,s)},Vt.prototype.setSpot=Vt.prototype.xk,Vt.prototype.union=Vt.prototype.uw,Vt.prototype.unionRect=Vt.prototype.Hc,Vt.prototype.unionPoint=Vt.prototype.Ie,Vt.prototype.intersects=Vt.prototype.Iv,Vt.prototype.intersectsRect=Vt.prototype.Gc,Vt.prototype.intersect=Vt.prototype.Hv,Vt.prototype.intersectRect=Vt.prototype.Uz,Vt.prototype.grow=Vt.prototype.Qz,Vt.prototype.subtractMargin=Vt.prototype.nw,Vt.prototype.addMargin=Vt.prototype.eq,Vt.prototype.inflate=Vt.prototype.Vc,Vt.prototype.offset=Vt.prototype.offset,Vt.prototype.contains=Vt.prototype.contains,Vt.prototype.containsRect=Vt.prototype.Be,Vt.prototype.containsPoint=Vt.prototype.aa,Vt.prototype.equalsApprox=Vt.prototype.Ma,Vt.prototype.equalTo=Vt.prototype.Ri,Vt.prototype.equals=Vt.prototype.w,Vt.prototype.setSize=Vt.prototype.xA,Vt.prototype.setPoint=Vt.prototype.jd,Vt.prototype.set=Vt.prototype.set,Vt.prototype.setTo=Vt.prototype.Cg;var Yt,Kt,Zt=[];function Jt(t,e,i,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===i?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==n?(this.top=t,this.right=e,this.bottom=i,this.left=n):_("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this.s=!1}function Qt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=NaN;""===t[e];)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Jt;for(var o=NaN;""===t[e];)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new Jt(i);for(var a=NaN;""===t[e];)e++;if((n=t[e++])&&(a=parseFloat(n)),isNaN(a))return new Jt(i,o);for(var r=NaN;""===t[e];)e++;return(n=t[e++])&&(r=parseFloat(n)),isNaN(r)?new Jt(i,o):new Jt(i,o,a,r)}return new Jt}function te(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}Vt.className="Rect",Vt.parse=Ft,Vt.stringify=Bt,Vt.contains=qt,Vt.intersects=Xt,Vt.ZeroRect=Yt=new Vt(0,0,0,0).ca(),Vt.NoRect=Kt=new Vt(NaN,NaN,NaN,NaN).ca(),Vt.parse=Ft,Vt.stringify=Bt,Vt.contains=qt,Vt.intersects=Xt,Jt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Jt.prototype.Cg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Jt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Jt.prototype.copy=function(){var t=new Jt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(i=Jt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},i.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},i.freeze=function(){return this.s=!0,this},i.ea=function(){return Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1,this},i.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},i.w=function(t){return t instanceof Jt&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},i.Ri=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},i.Ma=function(t){return qe.A(this.top,t.top)&&qe.A(this.right,t.right)&&qe.A(this.bottom,t.bottom)&&qe.A(this.left,t.left)},i.v=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Jt.alloc=function(){var t=ze.pop();return void 0===t?new Jt:t},Jt.free=function(t){ze.push(t)},Jt.prototype.isReal=Jt.prototype.v,Jt.prototype.equalsApprox=Jt.prototype.Ma,Jt.prototype.equalTo=Jt.prototype.Ri,Jt.prototype.equals=Jt.prototype.w,Jt.prototype.set=Jt.prototype.set,Jt.prototype.setTo=Jt.prototype.Cg;var ee,ie,ne,oe,ae,re,se,ce,le,ue,de,he,pe,fe,ge,me,ve,be,_e,we,ye,ke,xe,Se,Te,Ce,De,Ie,Pe,Me,Oe,$e,je,Le,Ee,Ne,Ae,Ve,ze=[];function Fe(t,e,i,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this.s=!1}function Be(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Re(t){if("string"==typeof t){if("None"===(t=t.trim()))return ne;if("TopLeft"===t)return oe;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return ae;if("TopRight"===t)return re;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return se;if("Center"===t)return ce;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return le;if("BottomLeft"===t)return ue;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return de;if("BottomRight"===t)return he;if("TopSide"===t)return pe;if("LeftSide"===t)return fe;if("RightSide"===t)return ge;if("BottomSide"===t)return me;if("TopBottomSides"===t)return ve;if("LeftRightSides"===t)return be;if("TopLeftSides"===t)return _e;if("TopRightSides"===t)return we;if("BottomLeftSides"===t)return ye;if("BottomRightSides"===t)return ke;if("NotTopSide"===t)return xe;if("NotLeftSide"===t)return Se;if("NotRightSide"===t)return Te;if("NotBottomSide"===t)return Ce;if("AllSides"===t)return De;if("Default"===t)return Ie;t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];void 0!==n&&0<n.length&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(o=parseFloat(n));for(var a=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(a=parseFloat(n));for(var r=0;""===t[e];)e++;return void 0!==(n=t[e++])&&0<n.length&&(r=parseFloat(n)),new Fe(i,o,a,r)}return new Fe}function Ue(t){return t.fb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Jt.className="Margin",Jt.parse=Qt,Jt.stringify=te,Jt.ZeroMargin=ee=new Jt(0,0,0,0).ca(),Jt.TwoMargin=ie=new Jt(2,2,2,2).ca(),Jt.parse=Qt,Jt.stringify=te,Fe.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},Fe.prototype.Cg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},Fe.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},Fe.prototype.copy=function(){var t=new Fe;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(i=Fe.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},i.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},i.freeze=function(){return this.s=!0,this},i.ea=function(){return Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1,this},i.toString=function(){return this.fb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.w(ne)?"None":this.w(oe)?"TopLeft":this.w(ae)?"Top":this.w(re)?"TopRight":this.w(se)?"Left":this.w(ce)?"Center":this.w(le)?"Right":this.w(ue)?"BottomLeft":this.w(de)?"Bottom":this.w(he)?"BottomRight":this.w(pe)?"TopSide":this.w(fe)?"LeftSide":this.w(ge)?"RightSide":this.w(me)?"BottomSide":this.w(ve)?"TopBottomSides":this.w(be)?"LeftRightSides":this.w(_e)?"TopLeftSides":this.w(we)?"TopRightSides":this.w(ye)?"BottomLeftSides":this.w(ke)?"BottomRightSides":this.w(xe)?"NotTopSide":this.w(Se)?"NotLeftSide":this.w(Te)?"NotRightSide":this.w(Ce)?"NotBottomSide":this.w(De)?"AllSides":this.w(Ie)?"Default":"None"},i.w=function(t){return t instanceof Fe&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},i.Tv=function(){return new Fe(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},i.wf=function(t){if(!this.gd())return!1;if(!t.gd())if(t.w(Pe))t=fe;else if(t.w(Me))t=ge;else if(t.w(Oe))t=pe;else{if(!t.w($e))return!1;t=me}return(this.offsetY&(t=t.offsetY))===t},i.fb=function(){return!isNaN(this.x)&&!isNaN(this.y)},i.jc=function(){return isNaN(this.x)||isNaN(this.y)},i.gd=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},i.yt=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},i.Mb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},Fe.alloc=function(){var t=Ge.pop();return void 0===t?new Fe:t},Fe.free=function(t){Ge.push(t)},Fe.prototype.isDefault=Fe.prototype.Mb,Fe.prototype.isNone=Fe.prototype.yt,Fe.prototype.isSide=Fe.prototype.gd,Fe.prototype.isNoSpot=Fe.prototype.jc,Fe.prototype.isSpot=Fe.prototype.fb,Fe.prototype.includesSide=Fe.prototype.wf,Fe.prototype.opposite=Fe.prototype.Tv,Fe.prototype.equals=Fe.prototype.w,Fe.prototype.set=Fe.prototype.set,Fe.prototype.setTo=Fe.prototype.Cg;var Ge=[];function He(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}Fe.className="Spot",Fe.parse=Re,Fe.stringify=Ue,Fe.None=ne=Be(new Fe(0,0,0,0),0).ca(),Fe.Default=Ie=Be(new Fe(0,0,-1,0),-1).ca(),Fe.TopLeft=oe=new Fe(0,0,0,0).ca(),Fe.TopCenter=ae=new Fe(.5,0,0,0).ca(),Fe.TopRight=re=new Fe(1,0,0,0).ca(),Fe.LeftCenter=se=new Fe(0,.5,0,0).ca(),Fe.Center=ce=new Fe(.5,.5,0,0).ca(),Fe.RightCenter=le=new Fe(1,.5,0,0).ca(),Fe.BottomLeft=ue=new Fe(0,1,0,0).ca(),Fe.BottomCenter=de=new Fe(.5,1,0,0).ca(),Fe.BottomRight=he=new Fe(1,1,0,0).ca(),Fe.MiddleTop=je=ae,Fe.MiddleLeft=Le=se,Fe.MiddleRight=Ee=le,Fe.MiddleBottom=Ne=de,Fe.Top=Oe=ae,Fe.Left=Pe=se,Fe.Right=Me=le,Fe.Bottom=$e=de,Fe.TopSide=pe=Be(new Fe(0,0,1,1),1).ca(),Fe.LeftSide=fe=Be(new Fe(0,0,1,2),1).ca(),Fe.RightSide=ge=Be(new Fe(0,0,1,4),1).ca(),Fe.BottomSide=me=Be(new Fe(0,0,1,8),1).ca(),Fe.TopBottomSides=ve=Be(new Fe(0,0,1,9),1).ca(),Fe.LeftRightSides=be=Be(new Fe(0,0,1,6),1).ca(),Fe.TopLeftSides=_e=Be(new Fe(0,0,1,3),1).ca(),Fe.TopRightSides=we=Be(new Fe(0,0,1,5),1).ca(),Fe.BottomLeftSides=ye=Be(new Fe(0,0,1,10),1).ca(),Fe.BottomRightSides=ke=Be(new Fe(0,0,1,12),1).ca(),Fe.NotTopSide=xe=Be(new Fe(0,0,1,14),1).ca(),Fe.NotLeftSide=Se=Be(new Fe(0,0,1,13),1).ca(),Fe.NotRightSide=Te=Be(new Fe(0,0,1,11),1).ca(),Fe.NotBottomSide=Ce=Be(new Fe(0,0,1,7),1).ca(),Fe.AllSides=De=Be(new Fe(0,0,1,15),1).ca(),Ae=new Fe(.156,.156).ca(),Ve=new Fe(.844,.844).ca(),Fe.parse=Re,Fe.stringify=Ue,He.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},He.prototype.copy=function(){var t=new He;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},(i=He.prototype).toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},i.w=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},i.wt=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},i.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},i.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,o=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=o,this},i.Pv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,o=-t.m21*e,a=t.m11*e,r=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*o+this.m21*a,o=this.m12*o+this.m22*a,this.dx=this.m11*r+this.m21*t+this.dx,this.dy=this.m12*r+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=o,this},i.vt=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),a=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=a,this},He.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,i),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var o=this.m12*t+this.m22*n,a=this.m11*-n+this.m21*t,r=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=o,this.m21=a,this.m22=r,this.translate(-e,-i),this},(i=He.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},i.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},i.ra=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},i.Wd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},i.tw=function(t){var e=t.x,i=t.y,n=e+t.width,o=i+t.height,a=this.m11,r=this.m12,s=this.m21,c=this.m22,l=this.dx,u=this.dy,d=e*a+i*s+l,h=e*r+i*c+u,p=n*a+i*s+l,f=n*r+i*c+u;return i=e*a+o*s+l,e=e*r+o*c+u,a=n*a+o*s+l,n=n*r+o*c+u,o=Math.min(d,p),d=Math.max(d,p),p=Math.min(h,f),h=Math.max(h,f),o=Math.min(o,i),d=Math.max(d,i),p=Math.min(p,e),h=Math.max(h,e),o=Math.min(o,a),d=Math.max(d,a),p=Math.min(p,n),h=Math.max(h,n),t.h(o,p,d-o,h-p),t},He.alloc=function(){var t=We.pop();return void 0===t?new He:t},He.free=function(t){We.push(t)},He.prototype.transformRect=He.prototype.tw,He.prototype.invertedTransformPoint=He.prototype.Wd,He.prototype.transformPoint=He.prototype.ra,He.prototype.scale=He.prototype.scale,He.prototype.translate=He.prototype.translate,He.prototype.rotate=He.prototype.rotate,He.prototype.invert=He.prototype.vt,He.prototype.multiplyInverted=He.prototype.Pv,He.prototype.multiply=He.prototype.multiply,He.prototype.reset=He.prototype.reset,He.prototype.isIdentity=He.prototype.wt,He.prototype.equals=He.prototype.w,He.prototype.set=He.prototype.set;var We=[];He.className="Transform",He.xF="54a702f3e53909c447824c6706603faf4c";var qe={GA:"7da71ca0ad381e90",Fg:(Math.sqrt(2)-1)/3*4,Jw:null,sqrt:function(t){if(0>=t)return 0;var e=qe.Jw;if(null===e){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);qe.Jw=e}return 1>t?2e3>=(i=1/t)?1/e[0|i]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},A:function(t,e){return.5>(t-=e)&&-.5<t},$:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Nb:function(t,e,i,n,o,a,r){if(0>=o&&(o=1e-6),t<i)var s=t,c=i;else s=i,c=t;if(e<n)var l=e,u=n;else l=n,u=e;if(t===i)return l<=r&&r<=u&&t-o<=a&&a<=t+o;if(e===n)return s<=a&&a<=c&&e-o<=r&&r<=e+o;if(c+=o,(s-=o)<=a&&a<=c&&(u+=o,(l-=o)<=r&&r<=u))if(c-s>u-l){if(!(t-i>o||i-t>o))return!0;if((a=(n-e)/(i-t)*(a-t)+e)-o<=r&&r<=a+o)return!0}else{if(!(e-n>o||n-e>o))return!0;if((r=(i-t)/(n-e)*(r-e)+t)-o<=a&&a<=r+o)return!0}return!1},ct:function(t,e,i,n,o,a,r,s,c,l,u,d){if(qe.Nb(t,e,r,s,d,i,n)&&qe.Nb(t,e,r,s,d,o,a))return qe.Nb(t,e,r,s,d,l,u);var h=(t+i)/2,p=(e+n)/2,f=(i+o)/2,g=(n+a)/2,m=((n=(h+f)/2)+(f=(f+(o=(o+r)/2))/2))/2,v=((i=(p+g)/2)+(g=(g+(a=(a+s)/2))/2))/2;return qe.ct(t,e,h,p,n,i,m,v,c,l,u,d)||qe.ct(m,v,f,g,o,a,r,s,c,l,u,d)},Sy:function(t,e,i,n,o,a,r,s,c){var l=(i+o)/2,u=(n+a)/2;return c.h((((t+i)/2+l)/2+(l+(o+r)/2)/2)/2,(((e+n)/2+u)/2+(u+(a+s)/2)/2)/2),c},Ry:function(t,e,i,n,o,a,r,s){var c=(i+o)/2,l=(n+a)/2;return wt(((t+i)/2+c)/2,((e+n)/2+l)/2,(c+(o+r)/2)/2,(l+(a+s)/2)/2)},am:function(t,e,i,n,o,a,r,s,c,l){if(qe.Nb(t,e,r,s,c,i,n)&&qe.Nb(t,e,r,s,c,o,a))Wt(l,t,e,0,0),Wt(l,r,s,0,0);else{var u=(t+i)/2,d=(e+n)/2,h=(i+o)/2,p=(n+a)/2,f=((n=(u+h)/2)+(h=(h+(o=(o+r)/2))/2))/2,g=((i=(d+p)/2)+(p=(p+(a=(a+s)/2))/2))/2;qe.am(t,e,u,d,n,i,f,g,c,l),qe.am(f,g,h,p,o,a,r,s,c,l)}return l},Ae:function(t,e,i,n,o,a,r,s,c,l){if(qe.Nb(t,e,r,s,c,i,n)&&qe.Nb(t,e,r,s,c,o,a))0===l.length&&(l.push(t),l.push(e)),l.push(r),l.push(s);else{var u=(t+i)/2,d=(e+n)/2,h=(i+o)/2,p=(n+a)/2,f=((n=(u+h)/2)+(h=(h+(o=(o+r)/2))/2))/2,g=((i=(d+p)/2)+(p=(p+(a=(a+s)/2))/2))/2;qe.Ae(t,e,u,d,n,i,f,g,c,l),qe.Ae(f,g,h,p,o,a,r,s,c,l)}return l},Wv:function(t,e,i,n,o,a,r,s,c,l){if(qe.Nb(t,e,o,a,l,i,n))return qe.Nb(t,e,o,a,l,s,c);var u=(t+i)/2,d=(e+n)/2,h=(u+(i=(i+o)/2))/2,p=(d+(n=(n+a)/2))/2;return qe.Wv(t,e,u,d,h,p,r,s,c,l)||qe.Wv(h,p,i,n,o,a,r,s,c,l)},MA:function(t,e,i,n,o,a,r){return r.h(((t+i)/2+(i+o)/2)/2,((e+n)/2+(n+a)/2)/2),r},Vv:function(t,e,i,n,o,a,r,s){if(qe.Nb(t,e,o,a,r,i,n))Wt(s,t,e,0,0),Wt(s,o,a,0,0);else{var c=(t+i)/2,l=(e+n)/2,u=(c+(i=(i+o)/2))/2,d=(l+(n=(n+a)/2))/2;qe.Vv(t,e,c,l,u,d,r,s),qe.Vv(u,d,i,n,o,a,r,s)}return s},Dq:function(t,e,i,n,o,a,r,s){if(qe.Nb(t,e,o,a,r,i,n))0===s.length&&(s.push(t),s.push(e)),s.push(o),s.push(a);else{var c=(t+i)/2,l=(e+n)/2,u=(c+(i=(i+o)/2))/2,d=(l+(n=(n+a)/2))/2;qe.Dq(t,e,c,l,u,d,r,s),qe.Dq(u,d,i,n,o,a,r,s)}return s},fq:function(t,e,i,n,o,a,r,s,c,l,u,d,h,p){if(qe.Nb(t,e,r,s,h,i,n)&&qe.Nb(t,e,r,s,h,o,a)){var f=(t-r)*(l-d)-(e-s)*(c-u);if(0===f)return!1;if(h=((t*s-e*r)*(c-u)-(t-r)*(c*d-l*u))/f,f=((t*s-e*r)*(l-d)-(e-s)*(c*d-l*u))/f,(c>u?c-u:u-c)<(l>d?l-d:d-l)){if(e<s?r=e:(r=s,s=e),f<r||f>s)return!1}else if(t<r?s=t:(s=r,r=t),h<s||h>r)return!1;return p.h(h,f),!0}var g=(e+n)/2,m=((f=(t+i)/2)+(i=(i+o)/2))/2,v=(g+(n=(n+a)/2))/2,b=(m+(i=(i+(o=(o+r)/2))/2))/2,_=(v+(n=(n+(a=(a+s)/2))/2))/2,w=(u-c)*(u-c)+(d-l)*(d-l),y=!1;return qe.fq(t,e,f,g,m,v,b,_,c,l,u,d,h,p)&&(t=(p.x-c)*(p.x-c)+(p.y-l)*(p.y-l))<w&&(w=t,y=!0),t=p.x,e=p.y,qe.fq(b,_,i,n,o,a,r,s,c,l,u,d,h,p)&&((p.x-c)*(p.x-c)+(p.y-l)*(p.y-l)<w?y=!0:p.h(t,e)),y},gq:function(t,e,i,n,o,a,r,s,c,l,u,d,h){var p=0;if(qe.Nb(t,e,r,s,h,i,n)&&qe.Nb(t,e,r,s,h,o,a)){if(0==(h=(t-r)*(l-d)-(e-s)*(c-u)))return p;var f=((t*s-e*r)*(c-u)-(t-r)*(c*d-l*u))/h,g=((t*s-e*r)*(l-d)-(e-s)*(c*d-l*u))/h;if(f>=u)return p;if((c>u?c-u:u-c)<(l>d?l-d:d-l)){if(e<s?(t=e,e=s):t=s,g<t||g>e)return p}else if(t<r?(e=t,t=r):e=r,f<e||f>t)return p;0<h?p++:0>h&&p--}else{g=(e+n)/2;var m=(i+o)/2,v=(n+a)/2,b=((n=((f=(t+i)/2)+m)/2)+(m=(m+(o=(o+r)/2))/2))/2,_=((i=(g+v)/2)+(v=(v+(a=(a+s)/2))/2))/2;p+=qe.gq(t,e,f,g,n,i,b,_,c,l,u,d,h),p+=qe.gq(b,_,m,v,o,a,r,s,c,l,u,d,h)}return p},Ih:function(t,e,i,n,o,a,r){return qe.$(t,i)?(e<n?(i=e,e=n):i=n,a<i?(r.h(t,i),!1):a>e?(r.h(t,e),!1):(r.h(t,a),!0)):qe.$(e,n)?(t<i?(n=t,t=i):n=i,o<n?(r.h(n,e),!1):o>t?(r.h(t,e),!1):(r.h(o,e),!0)):-5e-6>(o=((t-o)*(t-i)+(e-a)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)))?(r.h(t,e),!1):1.000005<o?(r.h(i,n),!1):(r.h(t+o*(i-t),e+o*(n-e)),!0)},Fe:function(t,e,i,n,o,a,r,s,c){return qe.A(t,i)&&qe.A(e,n)?(c.h(t,e),!1):qe.$(o,r)?qe.$(t,i)?(qe.Ih(t,e,i,n,o,a,c),!1):qe.Ih(t,e,i,n,o,(n-e)/(i-t)*(o-t)+e,c):(s=(s-a)/(r-o),qe.$(t,i)?(i=s*(t-o)+a,e<n?(o=e,e=n):o=n,i<o?(c.h(t,o),!1):i>e?(c.h(t,e),!1):(c.h(t,i),!0)):qe.$(s,r=(n-e)/(i-t))?(qe.Ih(t,e,i,n,o,a,c),!1):(o=(r*t-s*o+a-e)/(r-s),qe.$(r,0)?(t<i?(n=t,t=i):n=i,o<n?(c.h(n,e),!1):o>t?(c.h(t,e),!1):(c.h(o,e),!0)):qe.Ih(t,e,i,n,o,r*(o-t)+e,c)))},LA:function(t,e,i,n,o){return qe.Fe(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,o)},KA:function(t,e,i,n,o,a,r,s,c,l){function u(i,n){var o=(i-t)*(i-t)+(n-e)*(n-e);o<d&&(d=o,c.h(i,n))}var d=1/0;u(c.x,c.y);var h=0,p=0,f=0,g=0;if(o<r?(h=o,p=r):(h=r,p=o),a<s?(f=o,g=r):(f=r,g=o),h=(p-h)/2+l,l=(g-f)/2+l,o=(o+r)/2,a=(a+s)/2,0===h||0===l)return c;if(.5>(i>t?i-t:t-i)){if(0>(h=1-(i-o)*(i-o)/(h*h)))return c;n=-l*(h=Math.sqrt(h))+a,u(i,l*h+a),u(i,n)}else{if(0>(h=(s=2*(i=(n-e)/(i-t))*(e-i*t)/(l*l)-2*i*a/(l*l)-2*o/(h*h))*s-4*(n=1/(h*h)+i*i/(l*l))*(2*i*t*a/(l*l)-2*e*a/(l*l)+a*a/(l*l)+o*o/(h*h)-1+(e-i*t)*(e-i*t)/(l*l))))return c;u(l=(-s+(h=Math.sqrt(h)))/(2*n),i*l-i*t+e),u(h=(-s-h)/(2*n),i*h-i*t+e)}return c},Uc:function(t,e,i,n,o,a,r,s,c){var l=1e21,u=t,d=e;if(qe.Fe(t,e,t,n,o,a,r,s,c)){var h=(c.x-o)*(c.x-o)+(c.y-a)*(c.y-a);h<l&&(l=h,u=c.x,d=c.y)}return qe.Fe(i,e,i,n,o,a,r,s,c)&&(h=(c.x-o)*(c.x-o)+(c.y-a)*(c.y-a))<l&&(l=h,u=c.x,d=c.y),qe.Fe(t,e,i,e,o,a,r,s,c)&&(e=(c.x-o)*(c.x-o)+(c.y-a)*(c.y-a))<l&&(l=e,u=c.x,d=c.y),qe.Fe(t,n,i,n,o,a,r,s,c)&&(t=(c.x-o)*(c.x-o)+(c.y-a)*(c.y-a))<l&&(l=t,u=c.x,d=c.y),c.h(u,d),1e21>l},JA:function(t,e,i,n,o,a,r,s,c){return r=o-r,o=0==(i=t-i)||0===r?0===i?(e=(a-s)/r)*(s=t)+(a-e*o):(a=(e-n)/i)*(s=o)+(e-a*t):(n=(e-n)/i)*(s=(a-(s=(a-s)/r)*o-(t=e-n*t))/(n-s))+t,c.h(s,o),c},tt:function(t,e,i){return qe.Tx(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Tx:function(t,e,i,n,o,a,r,s){var c=t+i,l=e+n;return o===r?(a<s?(r=a,a=s):r=s,t<=o&&o<=c&&r<=l&&a>=e):a===s?(o<r?(s=o,o=r):s=r,e<=a&&a<=l&&s<=c&&o>=t):!!(qt(t,e,i,n,o,a)||qt(t,e,i,n,r,s)||qe.tq(t,e,c,e,o,a,r,s)||qe.tq(c,e,c,l,o,a,r,s)||qe.tq(c,l,t,l,o,a,r,s)||qe.tq(t,l,t,e,o,a,r,s))},tq:function(t,e,i,n,o,a,r,s){return 0>=qe.ft(t,e,i,n,o,a)*qe.ft(t,e,i,n,r,s)&&0>=qe.ft(o,a,r,s,t,e)*qe.ft(o,a,r,s,i,n)},ft:function(t,e,i,n,o,a){return i-=t,0==(a=(t=o-t)*(n-=e)-(e=a-e)*i)&&0<(a=t*i+e*n)&&0>(a=(t-i)*i+(e-n)*n)&&(a=0),0>a?-1:0<a?1:0},Aq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Fx:function(t,e,i,n,o,a){var r=Math.PI;a||(n*=r/180,o*=r/180);var s=n>o?-1:1;a=[];var c=r/2,l=n;if(1e-5>(n=Math.min(2*r,Math.abs(o-n))))return c=l+s*Math.min(n,c),s=t+i*Math.cos(l),l=e+i*Math.sin(l),t+=i*Math.cos(c),e+=i*Math.sin(c),a.push([s,l,i=(s+t)/2,c=(l+e)/2,i,c,t,e]),a;for(;1e-5<n;)o=l+s*Math.min(n,c),a.push(qe.Zy(i,l,o,t,e)),n-=Math.abs(o-l),l=o;return a},Zy:function(t,e,i,n,o){var a=(i-e)/2,r=t*Math.cos(a),s=t*Math.sin(a),c=-s,l=r*r+c*c,u=l+r*r+c*s;return s=r-(l=4/3*(Math.sqrt(2*l*u)-u)/(r*s-c*r))*c,c=-(r=c+l*r),l=a+e,a=Math.cos(l),l=Math.sin(l),[n+t*Math.cos(e),o+t*Math.sin(e),n+s*a-r*l,o+s*l+r*a,n+s*a-c*l,o+s*l+c*a,n+t*Math.cos(i),o+t*Math.sin(i)]},nq:function(t,e,i,n,o,a,r){var s=i=Math.floor((t-i)/o)*o+i;return i+o-t<o/2&&(s=i+o),t=n=Math.floor((e-n)/a)*a+n,n+a-e<a/2&&(t=n+a),r.h(s,t),r},Px:function(t,e){var i,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=i=t,t=e}while(0<e);return i},dz:function(t,e,i,n){var o=0>i,a=0>n;if(t<e)var r=1,s=0;else r=0,s=1;var c=0===r?t:e,l=0===r?i:n;return(0===r?o:a)&&(l=-l),i=0===(r=s)?i:n,(0===r?o:a)&&(i=-i),qe.ez(c,0===r?t:e,l,i,0,0)},ez:function(t,e,i,n,o,a){if(0<n)if(0<i){o=t*t,t*=i;var r=e*n,s=-(a=e*e)+r,c=-a+Math.sqrt(t*t+r*r);e=s;for(var l=0;9999999999>l&&(e=.5*(s+c))!==s&&e!==c;++l){var u=t/(e+o),d=r/(e+a);if(0<(u=u*u+d*d-1))s=e;else{if(!(0>u))break;c=e}}i=o*i/(e+o)-i,n=a*n/(e+a)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else(a=t*i)<(n=t*t-e*e)?(n=a/n,a=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+a*a)):i=Math.abs(i-t);return i},Je:new Y,Mm:new Y,Mh:new Y,Nh:0};function Xe(t){nt(this),this.s=!1,void 0===t&&(t=ci),this.pa=t,this.mc=this.ec=this.Sc=this.Rc=0,this.rj=new tt,this.Er=this.rj.Aa,this.lr=(new Vt).freeze(),this.qa=!0,this.Tm=this.Gk=null,this.Um=NaN,this.hf=oe,this.jf=he,this.il=this.jl=NaN,this.Nf=Ya}function Ye(t,e){return t.type===ai&&e.type===ci&&!!(1===e.figures.count&&(e=e.figures.L(0),1===e.segments.count&&qe.A(t.startX,e.startX)&&qe.A(t.startY,e.startY)&&(e=e.segments.L(0),e.type===fi&&qe.A(t.endX,e.endX)&&qe.A(t.endY,e.endY))))}function Ke(t){return t.toString()}function Ze(t,e){function i(){return g>=w-1||null!==c[g+1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)}function n(){return g++,c[g]}function o(){var t=new pt(parseFloat(n()),parseFloat(n()));return m===m.toLowerCase()&&(t.x=_.x+t.x,t.y=_.y+t.y),t}function a(){return _=o()}function r(){return b=o()}function s(){var t=v.toLowerCase();return"c"!==t&&"s"!==t&&"q"!==t&&"t"!==t?_:new pt(2*_.x-b.x,2*_.y-b.y)}void 0===e&&(e=!1);var c=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm,"$1 $2")).replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<c.length;t++){var l=c[t];if(null!==l.match(/(\.[0-9]*)(\.)/gm)){for(var u=P(),d="",h=!1,p=0;p<l.length;p++){var f=l[p];"."!==f||h?"."===f?(u.push(d),d="."):d+=f:(h=!0,d+=f)}for(u.push(d),c.splice(t,1),l=0;l<u.length;l++)c.splice(t+l,0,u[l]);t+=u.length-1,M(u)}}var g=-1,m="",v="";u=new pt(0,0);var b=new pt(0,0),_=new pt(0,0),w=c.length;for(t=ou(null),d=l=!1,h=!0,p=null;!(g>=w-1);)if(v=m,""!==(m=n()))switch(m.toUpperCase()){case"X":h=!0,d=l=!1;break;case"M":for(p=a(),null===t.fc||!0===h?(Ql(t,p.x,p.y,l,!d),h=!1):t.moveTo(p.x,p.y),u=_;!i();)p=a(),t.lineTo(p.x,p.y);break;case"L":for(;!i();)p=a(),t.lineTo(p.x,p.y);break;case"H":for(;!i();)_=new pt((m===m.toLowerCase()?_.x:0)+parseFloat(n()),_.y),t.lineTo(_.x,_.y);break;case"V":for(;!i();)_=new pt(_.x,(m===m.toLowerCase()?_.y:0)+parseFloat(n())),t.lineTo(_.x,_.y);break;case"C":for(;!i();){p=o(),f=r();var y=a();eu(t,p.x,p.y,f.x,f.y,y.x,y.y)}break;case"S":for(;!i();)p=s(),f=r(),y=a(),eu(t,p.x,p.y,f.x,f.y,y.x,y.y);break;case"Q":for(;!i();)p=r(),f=a(),iu(t,p.x,p.y,f.x,f.y);break;case"T":for(;!i();)b=p=s(),f=a(),iu(t,p.x,p.y,f.x,f.y);break;case"B":for(;!i();){p=parseFloat(n()),f=parseFloat(n()),y=parseFloat(n());var k=parseFloat(n()),x=parseFloat(n()),S=x,T=!1;i()||(S=parseFloat(n()),i()||(T=0!==parseFloat(n()))),m===m.toLowerCase()&&(y+=_.x,k+=_.y),t.arcTo(p,f,y,k,x,S,T)}break;case"A":for(;!i();)nu(t,p=Math.abs(parseFloat(n())),f=Math.abs(parseFloat(n())),y=parseFloat(n()),k=!!parseFloat(n()),x=!!parseFloat(n()),(S=a()).x,S.y);break;case"Z":tu(t),_=u;break;case"F":for(p="",f=1;c[g+f];)if(null!==c[g+f].match(/[Uu]/))f++;else{if(null!==c[g+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){p=c[g+f];break}f++}p.match(/[Mm]/)?l=!0:0<t.fc.segments.length&&(t.fc.isFilled=!0);break;case"U":for(p="",f=1;c[g+f];)if(null!==c[g+f].match(/[Ff]/))f++;else{if(null!==c[g+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){p=c[g+f];break}f++}p.match(/[Mm]/)?d=!0:t.Mq(!1)}if(u=t.ot,au=t,e)for(e=u.figures.iterator;e.next();)e.value.isFilled=!0;return u}function Je(t,e){for(var i=t.length,n=pt.alloc(),o=0;o<i;o++){var a=t[o];n.x=a[0],n.y=a[1],e.ra(n),a[0]=n.x,a[1]=n.y,n.x=a[2],n.y=a[3],e.ra(n),a[2]=n.x,a[3]=n.y,n.x=a[4],n.y=a[5],e.ra(n),a[4]=n.x,a[5]=n.y,n.x=a[6],n.y=a[7],e.ra(n),a[6]=n.x,a[7]=n.y}pt.free(n)}function Qe(t,e,i){switch(t.type){case ai:case ri:case si:i?e.h(t.Rc,t.Sc,0,0):Wt(e,t.Rc,t.Sc,0,0),Wt(e,t.ec,t.mc,0,0);break;case ci:var n=t.figures;t=n.j,n=n.length;for(var o=0;o<n;o++){var a=t[o];i&&0===o?e.h(a.startX,a.startY,0,0):Wt(e,a.startX,a.startY,0,0);for(var r=a.segments.j,s=r.length,c=a.startX,l=a.startY,u=0;u<s;u++){var d=r[u];switch(d.type){case fi:case pi:Wt(e,c=d.endX,l=d.endY,0,0);break;case gi:qe.am(c,l,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),c=d.endX,l=d.endY;break;case mi:qe.Vv(c,l,d.point1X,d.point1Y,d.endX,d.endY,.5,e),c=d.endX,l=d.endY;break;case vi:case bi:var h=d.type===vi?di(d,a):hi(d,a,c,l),p=h.length;if(0===p){Wt(e,c=d.centerX,l=d.centerY,0,0);break}d=null;for(var f=0;f<p;f++)qe.am((d=h[f])[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);null!==d&&(c=d[6],l=d[7]);break;default:_("Unknown Segment type: "+d.type)}}}break;default:_("Unknown Geometry type: "+t.type)}}function ti(t,e,i,n,o){var a=e.x;e=e.y;for(var r,s,c,l,u=t.bounds.x-20,d=0,h=t.figures.j,p=h.length,f=0;f<p;f++){var g=h[f];if(g.isFilled){if(n&&g.aa(a,e,i))return!0;for(var m=g.segments,v=r=g.startX,b=s=g.startY,w=m.j,y=0;y<=m.length;y++){var k=void 0;if(y!==m.length){var x=(k=w[y]).type;t=k.endX,l=k.endY}else x=fi,t=v,l=b;switch(x){case pi:if(v=ei(a,e,u,e,r,s,v,b),isNaN(v))return!0;d+=v,v=t,b=l;break;case fi:if(r=ei(a,e,u,e,r,s,t,l),isNaN(r))return!0;d+=r;break;case gi:d+=c=qe.gq(r,s,k.point1X,k.point1Y,k.point2X,k.point2Y,t,l,u,e,a,e,.5);break;case mi:d+=c=qe.gq(r,s,(r+2*k.point1X)/3,(s+2*k.point1Y)/3,(2*k.point1X+t)/3,(2*k.point1Y+l)/3,t,l,u,e,a,e,.5);break;case vi:case bi:var S=(x=k.type===vi?di(k,g):hi(k,g,r,s)).length;if(0===S){if(r=ei(a,e,u,e,r,s,k.centerX,k.centerY),isNaN(r))return!0;d+=r;break}k=null;for(var T=0;T<S;T++){if(k=x[T],0===T){if(c=ei(a,e,u,e,r,s,k[0],k[1]),isNaN(c))return!0;d+=c}d+=c=qe.gq(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],u,e,a,e,.5)}null!==k&&(t=k[6],l=k[7]);break;default:_("Unknown Segment type: "+k.type)}r=t,s=l}if(0!==d)return!0;d=0}else if(g.aa(a,e,o?i:i+2))return!0}return 0!==d}function ei(t,e,i,n,o,a,r,s){if(qe.Nb(o,a,r,s,.05,t,e))return NaN;var c=(t-i)*(a-s);if(0===c)return 0;var l=((t*n-e*i)*(o-r)-(t-i)*(o*s-a*r))/c;if(e=(t*n-e*i)*(a-s)/c,l>=t)return 0;if((o>r?o-r:r-o)<(a>s?a-s:s-a)){if(a<s){if(e<a||e>s)return 0}else if(e<s||e>a)return 0}else if(o<r){if(l<o||l>r)return 0}else if(l<r||l>o)return 0;return 0<c?1:-1}function ii(t,e,i,n){for(var o=(t=t.figures.j).length,a=0;a<o;a++)if(t[a].aa(e,i,n))return!0;return!1}function ni(t){if(null===t.Gk){var e=t.Gk=[],i=t.Tm=[],n=[],o=[];if(t.type===ai)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),o.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(o);else if(t.type===ri)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),i.push(o);else if(t.type===si){var a=new li;a.startX=t.endX,a.startY=(t.startY+t.endY)/2;var r=new ui(vi);if(r.startAngle=0,r.sweepAngle=360,r.centerX=(t.startX+t.endX)/2,r.centerY=(t.startY+t.endY)/2,r.radiusX=Math.abs(t.startX-t.endX)/2,r.radiusY=Math.abs(t.startY-t.endY)/2,a.add(r),0===(o=(t=di(r,a)).length))n.push(r.centerX),n.push(r.centerY);else{r=a.startX,a=a.startY;for(var s=0;s<o;s++){var c=t[s];qe.Ae(r,a,c[2],c[3],c[4],c[5],c[6],c[7],.5,n),r=c[6],a=c[7]}}e.push(n),i.push(oi(n))}else for(t=t.figures.iterator;t.next();){(n=[]).push((o=t.value).startX),n.push(o.startY),s=r=o.startX,c=a=o.startY;for(var l=o.segments.j,u=l.length,d=0;d<u;d++){var h=l[d];switch(h.type){case pi:4<=n.length&&(e.push(n),i.push(oi(n))),(n=[]).push(h.endX),n.push(h.endY),s=r=h.endX,c=a=h.endY;break;case fi:n.push(h.endX),n.push(h.endY),r=h.endX,a=h.endY;break;case gi:qe.Ae(r,a,h.point1X,h.point1Y,h.point2X,h.point2Y,h.endX,h.endY,.5,n),r=h.endX,a=h.endY;break;case mi:qe.Dq(r,a,h.point1X,h.point1Y,h.endX,h.endY,.5,n),r=h.endX,a=h.endY;break;case vi:var p=di(h,o),f=p.length;if(0===f){n.push(h.centerX),n.push(h.centerY),r=h.centerX,a=h.centerY;break}for(var g=0;g<f;g++){var m=p[g];qe.Ae(r,a,m[2],m[3],m[4],m[5],m[6],m[7],.5,n),r=m[6],a=m[7]}break;case bi:if(0===(f=(p=hi(h,o,r,a)).length)){n.push(h.centerX),n.push(h.centerY),r=h.centerX,a=h.centerY;break}for(g=0;g<f;g++)qe.Ae(r,a,(m=p[g])[2],m[3],m[4],m[5],m[6],m[7],.5,n),r=m[6],a=m[7];break;default:_("Segment not of valid type: "+h.type)}h.isClosed&&(n.push(s),n.push(c))}4<=n.length&&(e.push(n),i.push(oi(n)))}}}function oi(t){for(var e=[],i=0,n=0,o=t.length,a=0;a<o;a+=2){var r=t[a],s=t[a+1];0!==a&&e.push(Math.sqrt(_t(i,n,r,s))),i=r,n=s}return e}qe.za=qe.GA,Xe.prototype.copy=function(){var t=new Xe;t.pa=this.pa,t.Rc=this.Rc,t.Sc=this.Sc,t.ec=this.ec,t.mc=this.mc;for(var e=this.rj.j,i=e.length,n=t.rj,o=0;o<i;o++){var a=e[o].copy();n.add(a)}return t.Er=this.Er,t.lr.assign(this.lr),t.qa=this.qa,t.Gk=this.Gk,t.Tm=this.Tm,t.Um=this.Um,t.hf=this.hf.G(),t.jf=this.jf.G(),t.jl=this.jl,t.il=this.il,t.Nf=this.Nf,t},(i=Xe.prototype).ca=function(){return this.freeze(),Object.freeze(this),this},i.freeze=function(){this.s=!0;var t=this.figures;t.freeze();for(var e=(t=t.j).length,i=0;i<e;i++)t[i].freeze();return this},i.ea=function(){Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1;var t=this.figures;t.ea();for(var e=(t=t.j).length,i=0;i<e;i++)t[i].ea();return this},i.Ma=function(t){if(!(t instanceof Xe))return!1;if(this.type!==t.type)return this.type===ai&&t.type===ci?Ye(this,t):t.type===ai&&this.type===ci&&Ye(t,this);if(this.type===ci){var e=this.figures.j,i=e.length;if(i!==(t=t.figures.j).length)return!1;for(var n=0;n<i;n++)if(!e[n].Ma(t[n]))return!1;return!0}return qe.A(this.startX,t.startX)&&qe.A(this.startY,t.startY)&&qe.A(this.endX,t.endX)&&qe.A(this.endY,t.endY)},i.eb=function(t){t.classType===Xe&&(this.type=t)},i.toString=function(t){switch(void 0===t&&(t=-1),this.type){case ai:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case ri:var e=new Vt(this.startX,this.startY,0,0);return e.uw(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case si:if((e=new Vt(this.startX,this.startY,0,0)).uw(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case ci:e="";for(var n=(i=this.figures.j).length,o=0;o<n;o++){var a=i[o];0<o&&(e+=" x "),a.isFilled&&(e+="F "),e+=a.toString(t)}return e;default:return this.type.toString()}},i.Mv=function(){if(this.qa||this.Er!==this.figures.Aa)return!0;for(var t=this.figures.j,e=t.length,i=0;i<e;i++)if(t[i].Mv())return!0;return!1},Xe.prototype.computeBounds=function(){this.qa=!1,this.Tm=this.Gk=null,this.Um=NaN,this.Er=this.figures.Aa;for(var t=this.figures.j,e=t.length,i=0;i<e;i++){var n=t[i];n.qa=!1;var o=n.segments;n.Ks=o.Aa,o=(n=o.j).length;for(var a=0;a<o;a++){var r=n[a];r.qa=!1,r.Le=null}}(t=this.lr).ea(),isNaN(this.jl)||isNaN(this.il)?t.h(0,0,0,0):t.h(0,0,this.jl,this.il),Qe(this,t,!1),Wt(t,0,0,0,0),t.freeze()},Xe.prototype.Ex=function(){var t=new Vt;return Qe(this,t,!0),t},Xe.prototype.normalize=function(){this.s&&w(this);var t=this.Ex();return this.offset(-t.x,-t.y),new pt(-t.x,-t.y)},Xe.prototype.offset=function(t,e){return this.s&&w(this),this.transform(1,0,0,1,t,e),this},Xe.prototype.scale=function(t,e){return this.s&&w(this),this.transform(t,0,0,e,0,0),this},Xe.prototype.rotate=function(t,e,i){this.s&&w(this),void 0===e&&(e=0),void 0===i&&(i=0);var n=He.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),He.free(n),this},(i=Xe.prototype).transform=function(t,e,i,n,o,a){switch(this.type){case ai:case ri:case si:var r=this.Rc,s=this.Sc;this.Rc=r*t+s*i+o,this.Sc=r*e+s*n+a,this.ec=(r=this.ec)*t+(s=this.mc)*i+o,this.mc=r*e+s*n+a;break;case ci:for(var c=this.figures.j,l=c.length,u=0;u<l;u++){var d=c[u];d.startX=(r=d.startX)*t+(s=d.startY)*i+o,d.startY=r*e+s*n+a;for(var h=(d=d.segments.j).length,p=0;p<h;p++){var f=d[p];switch(f.type){case fi:case pi:f.endX=(r=f.endX)*t+(s=f.endY)*i+o,f.endY=r*e+s*n+a;break;case gi:f.point1X=(r=f.point1X)*t+(s=f.point1Y)*i+o,f.point1Y=r*e+s*n+a,f.point2X=(r=f.point2X)*t+(s=f.point2Y)*i+o,f.point2Y=r*e+s*n+a,f.endX=(r=f.endX)*t+(s=f.endY)*i+o,f.endY=r*e+s*n+a;break;case mi:f.point1X=(r=f.point1X)*t+(s=f.point1Y)*i+o,f.point1Y=r*e+s*n+a,f.endX=(r=f.endX)*t+(s=f.endY)*i+o,f.endY=r*e+s*n+a;break;case vi:f.centerX=(r=f.centerX)*t+(s=f.centerY)*i+o,f.centerY=r*e+s*n+a,0!==e&&(0>(r=180*Math.atan2(e,t)/Math.PI)&&(r+=360),f.startAngle+=r),0>t&&(f.startAngle=180-f.startAngle,f.sweepAngle=-f.sweepAngle),0>n&&(f.startAngle=-f.startAngle,f.sweepAngle=-f.sweepAngle),f.radiusX*=Math.sqrt(t*t+i*i),void 0!==f.radiusY&&(f.radiusY*=Math.sqrt(e*e+n*n));break;case bi:f.endX=(r=f.endX)*t+(s=f.endY)*i+o,f.endY=r*e+s*n+a,0!==e&&(0>(r=180*Math.atan2(e,t)/Math.PI)&&(r+=360),f.xAxisRotation+=r),0>t&&(f.xAxisRotation=180-f.xAxisRotation,f.isClockwiseArc=!f.isClockwiseArc),0>n&&(f.xAxisRotation=-f.xAxisRotation,f.isClockwiseArc=!f.isClockwiseArc),f.radiusX*=Math.sqrt(t*t+i*i),f.radiusY*=Math.sqrt(e*e+n*n);break;default:_("Unknown Segment type: "+f.type)}}}}return this.qa=!0,this},i.aa=function(t,e){void 0===e&&(e=0);var i=this.Rc,n=this.Sc,o=this.ec,a=this.mc;switch(this.type){case ai:return qe.Nb(i,n,o,a,e,t.x,t.y);case ri:var r=Vt.allocAt(Math.min(i,o)-e,Math.min(n,a)-e,Math.abs(o-i)+2*e,Math.abs(a-n)+2*e);return t=r.aa(t),Vt.free(r),t;case si:r=Math.min(i,o)-e;var s=Math.min(n,a)-e;return i=(Math.abs(o-i)+2*e)/2,e=(Math.abs(a-n)+2*e)/2,!(0>=i||0>=e)&&1>=(r=t.x-(r+i))*r/(i*i)+(s=t.y-(s+e))*s/(e*e);case ci:return ti(this,t,e,!0,!1);default:return!1}},i.Cv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new pt),this.type===ai)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,o=i.length,a=this.flattenedTotalLength*t,r=0,s=0;s<o;s++){var c=n[s],l=c.length;for(t=0;t<l;t++){var u=c[t];if(r+u>=a)return n=a-r,e.h((s=(i=i[s])[2*t])+(i[2*t+2]-s)*(n=0===u?0:n/u),(o=i[2*t+1])+(i[2*t+3]-o)*n),e;r+=u}}return e},i.Qx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===ai)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,o=this.flattenedTotalLength*t,a=0,r=0;r<n;r++){var s=i[r],c=s.length;for(t=0;t<c;t++){var l=s[t];if(a+l>=o)return e=(o=e[r])[2*t],i=o[2*t+1],n=o[2*t+2],t=o[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;a+=l}}return NaN},i.Dv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===ai)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,o=i.length,a=this.flattenedTotalLength*t,r=0,s=0;s<o;s++){var c=n[s],l=c.length;for(t=0;t<l;t++){var u=c[t];if(r+u>=a)return n=a-r,n=0===u?0:n/u,i=(u=i[s])[2*t],s=u[2*t+1],o=u[2*t+2],t=u[2*t+3],e[0]=i+(o-i)*n,e[1]=s+(t-s)*n,e[2]=1>Math.abs(o-i)&&1>Math.abs(t-s)?0:1>Math.abs(o-i)?0<=t-s?90:270:1>Math.abs(t-s)?0<=o-i?0:180:180*Math.atan2(t-s,o-i)/Math.PI,e;r+=u}}return e},i.Rx=function(t){if(this.type===ai){var e=this.startX,i=this.startY,n=this.endX,o=this.endY;if(e!==n||i!==o){var a=t.x;if(t=t.y,e===n){if(i<o){var r=i;n=o}else r=o,n=i;return t<=r?r===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-r)}if(i===o)return e<n?r=e:(r=n,n=e),a<=r?r===e?0:1:a>=n?n===e?0:1:Math.abs(a-e)/(n-r);r=(n-e)*(n-e)+(o-i)*(o-i);var s=pt.alloc();return qe.Ih(e,i,n,o,a,t,s),t=s.x,a=s.y,pt.free(s),Math.sqrt(((t-e)*(t-e)+(a-i)*(a-i))/r)}}else{if(this.type!==ri){e=this.flattenedSegments,i=this.flattenedLengths,a=this.flattenedTotalLength,n=pt.alloc(),o=1/0,s=r=0,v=e.length;for(var c=b=0,l=0;l<v;l++)for(var u=e[l],d=i[l],h=u.length,p=0;p<h;p+=2){var f=u[p],g=u[p+1];if(0!==p){qe.Ih(b,c,f,g,t.x,t.y,n);var m=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);m<o&&(o=m,r=s,r+=Math.sqrt((n.x-b)*(n.x-b)+(n.y-c)*(n.y-c))),s+=d[(p-2)/2]}b=f,c=g}return pt.free(n),0>(t=r/a)?0:1<t?1:t}s=this.startY;var v=this.endX;if(o=this.endY,(r=this.startX)!==v||s!==o){a=2*(e=v-r)+2*(i=o-s),n=t.x,t=t.y,n=Math.min(Math.max(n,r),v),t=Math.min(Math.max(t,s),o),r=Math.abs(n-r),v=Math.abs(n-v),s=Math.abs(t-s),o=Math.abs(t-o);var b=Math.min(r,v,s,o);if(b===s)return n/a;if(b===v)return(e+t)/a;if(b===o)return(2*e+i-n)/a;if(b===r)return(2*e+2*i-t)/a}}return 0},i.add=function(t){return this.rj.add(t),this},i.Im=function(t,e,i,n,o,a,r,s){return this.s&&w(this),this.hf=new Fe(t,e,o,a).freeze(),this.jf=new Fe(i,n,r,s).freeze(),this},h.Object.defineProperties(Xe.prototype,{flattenedSegments:{get:function(){return ni(this),this.Gk}},flattenedLengths:{get:function(){return ni(this),this.Tm}},flattenedTotalLength:{get:function(){var t=this.Um;if(isNaN(t)){if(this.type===ai){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===ri)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var i=(e=this.flattenedLengths).length,n=t=0;n<i;n++)for(var o=e[n],a=o.length,r=0;r<a;r++)t+=o[r];this.Um=t}return t}},type:{get:function(){return this.pa},set:function(t){this.pa!==t&&(this.s&&w(this,t),this.pa=t,this.qa=!0)}},startX:{get:function(){return this.Rc},set:function(t){this.Rc!==t&&(this.s&&w(this,t),this.Rc=t,this.qa=!0)}},startY:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.s&&w(this,t),this.Sc=t,this.qa=!0)}},endX:{get:function(){return this.ec},set:function(t){this.ec!==t&&(this.s&&w(this,t),this.ec=t,this.qa=!0)}},endY:{get:function(){return this.mc},set:function(t){this.mc!==t&&(this.s&&w(this,t),this.mc=t,this.qa=!0)}},figures:{get:function(){return this.rj},set:function(t){this.rj!==t&&(this.s&&w(this,t),this.rj=t,this.qa=!0)}},spot1:{get:function(){return this.hf},set:function(t){this.s&&w(this,t),this.hf=t.G()}},spot2:{get:function(){return this.jf},set:function(t){this.s&&w(this,t),this.jf=t.G()}},defaultStretch:{get:function(){return this.Nf},set:function(t){this.s&&w(this,t),this.Nf=t}},bounds:{get:function(){return this.Mv()&&this.computeBounds(),this.lr}}}),Xe.prototype.setSpots=Xe.prototype.Im,Xe.prototype.add=Xe.prototype.add,Xe.prototype.getFractionForPoint=Xe.prototype.Rx,Xe.prototype.getPointAndAngleAlongPath=Xe.prototype.Dv,Xe.prototype.getAngleAlongPath=Xe.prototype.Qx,Xe.prototype.getPointAlongPath=Xe.prototype.Cv,Xe.prototype.containsPoint=Xe.prototype.aa,Xe.prototype.transform=Xe.prototype.transform,Xe.prototype.rotate=Xe.prototype.rotate,Xe.prototype.scale=Xe.prototype.scale,Xe.prototype.offset=Xe.prototype.offset,Xe.prototype.normalize=Xe.prototype.normalize,Xe.prototype.computeBoundsWithoutOrigin=Xe.prototype.Ex,Xe.prototype.equalsApprox=Xe.prototype.Ma;var ai=new W(Xe,"Line",0),ri=new W(Xe,"Rectangle",1),si=new W(Xe,"Ellipse",2),ci=new W(Xe,"Path",3);function li(t,e,i,n){nt(this),this.s=!1,void 0===i&&(i=!0),this.Pr=i,void 0===n&&(n=!0),this.Tr=n,this.Rc=void 0!==t?t:0,this.Sc=void 0!==e?e:0,this.Jl=new tt,this.Ks=this.Jl.Aa,this.qa=!0}function ui(t,e,i,n,o,a,r,s){nt(this),this.s=!1,void 0===t&&(t=fi),this.pa=t,this.ec=void 0!==e?e:0,this.mc=void 0!==i?i:0,void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=0),t===bi?(0>(t=a%360)&&(t+=360),this.we=t,this.Di=0,this.Ei=Math.max(n,0),this.hh=Math.max(o,0),this.rl="boolean"==typeof r&&!!r,this.Kk=!!s):(this.we=n,this.Di=o,t===vi&&(a=Math.max(a,0)),this.Ei=a,"number"==typeof r?(t===vi&&(r=Math.max(r,0)),this.hh=r):this.hh=0,this.Kk=this.rl=!1),this.wj=!1,this.qa=!0,this.Le=null}function di(t,e){if(null!==t.Le&&!1===e.qa)return t.Le;var i=t.radiusX,n=t.radiusY;if(void 0===n&&(n=i),0===i||0===n)return t.Le=[],t.Le;e=t.we;var o=t.Di,a=qe.Fx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var r=He.alloc();r.reset(),i<n?r.scale(1,n/i):r.scale(i/n,1),Je(a,r),He.free(r)}for(i=a.length,n=0;n<i;n++)(r=a[n])[0]+=e,r[1]+=o,r[2]+=e,r[3]+=o,r[4]+=e,r[5]+=o,r[6]+=e,r[7]+=o;return t.Le=a,t.Le}function hi(t,e,i,n){function o(t,e,i,n){return(t*n<e*i?-1:1)*Math.acos((t*i+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n)))}if(null!==t.Le&&!1===e.qa)return t.Le;var a=t.hh;0===(e=t.Ei)&&(e=1e-4),0===a&&(a=1e-4);var r=Math.PI/180*t.we,s=t.rl,c=t.Kk,l=t.ec,u=t.mc,d=Math.cos(r),h=Math.sin(r),p=d*(i-l)/2+h*(n-u)/2,f=p*p/(e*e)+(r=-h*(i-l)/2+d*(n-u)/2)*r/(a*a);return 1<f&&(e*=Math.sqrt(f),a*=Math.sqrt(f)),f=(s===c?-1:1)*Math.sqrt((e*e*a*a-e*e*r*r-a*a*p*p)/(e*e*r*r+a*a*p*p)),isNaN(f)&&(f=0),s=f*e*r/a,f=f*-a*p/e,isNaN(s)&&(s=0),isNaN(f)&&(f=0),i=(i+l)/2+d*s-h*f,n=(n+u)/2+h*s+d*f,u=o(1,0,(p-s)/e,(r-f)/a),r=o(d=(p-s)/e,l=(r-f)/a,p=(-p-s)/e,s=(-r-f)/a),-1>=(p=(d*p+l*s)/(Math.sqrt(d*d+l*l)*Math.sqrt(p*p+s*s)))?r=Math.PI:1<=p&&(r=0),!c&&0<r&&(r-=2*Math.PI),c&&0>r&&(r+=2*Math.PI),c=e>a?1:e/a,p=e>a?a/e:1,e=qe.Fx(0,0,e>a?e:a,u,u+r,!0),(a=He.alloc()).reset(),a.translate(i,n),a.rotate(t.we,0,0),a.scale(c,p),Je(e,a),He.free(a),t.Le=e,t.Le}Xe.className="Geometry",Xe.stringify=Ke,Xe.fillPath=function(t){for(var e=(t=t.split(/[Xx]/)).length,i="",n=0;n<e;n++){var o=t[n];i=null!==o.match(/[Ff]/)?0===n?i+o:i+"X"+(" "===o[0]?"":" ")+o:i+(0===n?"":"X ")+"F"+(" "===o[0]?"":" ")+o}return i},Xe.parse=Ze,Xe.Line=ai,Xe.Rectangle=ri,Xe.Ellipse=si,Xe.Path=ci,li.prototype.copy=function(){var t=new li;t.Pr=this.Pr,t.Tr=this.Tr,t.Rc=this.Rc,t.Sc=this.Sc;for(var e=this.Jl.j,i=e.length,n=t.Jl,o=0;o<i;o++){var a=e[o].copy();n.add(a)}return t.Ks=this.Ks,t.qa=this.qa,t},(i=li.prototype).Ma=function(t){if(!(t instanceof li&&qe.A(this.startX,t.startX)&&qe.A(this.startY,t.startY)))return!1;var e=this.segments.j,i=e.length;if(i!==(t=t.segments.j).length)return!1;for(var n=0;n<i;n++)if(!e[n].Ma(t[n]))return!1;return!0},i.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.j,n=i.length,o=0;o<n;o++)e+=" "+i[o].toString(t);return e},i.freeze=function(){this.s=!0;var t=this.segments;t.freeze();var e=t.j;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},i.ea=function(){this.s=!1;var t=this.segments;t.ea();for(var e=(t=t.j).length,i=0;i<e;i++)t[i].ea();return this},i.Mv=function(){if(this.qa)return!0;var t=this.segments;if(this.Ks!==t.Aa)return!0;for(var e=(t=t.j).length,i=0;i<e;i++)if(t[i].qa)return!0;return!1},i.add=function(t){return this.Jl.add(t),this},i.aa=function(t,e,i){for(var n=this.startX,o=this.startY,a=n,r=o,s=this.segments.j,c=s.length,l=0;l<c;l++){var u=s[l];switch(u.type){case pi:a=u.endX,r=u.endY,n=u.endX,o=u.endY;break;case fi:if(qe.Nb(n,o,u.endX,u.endY,i,t,e))return!0;n=u.endX,o=u.endY;break;case gi:if(qe.ct(n,o,u.point1X,u.point1Y,u.point2X,u.point2Y,u.endX,u.endY,.5,t,e,i))return!0;n=u.endX,o=u.endY;break;case mi:if(qe.Wv(n,o,u.point1X,u.point1Y,u.endX,u.endY,.5,t,e,i))return!0;n=u.endX,o=u.endY;break;case vi:case bi:var d=u.type===vi?di(u,this):hi(u,this,n,o),h=d.length;if(0===h){if(qe.Nb(n,o,u.centerX,u.centerY,i,t,e))return!0;n=u.centerX,o=u.centerY;break}for(var p=null,f=0;f<h;f++)if(p=d[f],0===f&&qe.Nb(n,o,p[0],p[1],i,t,e)||qe.ct(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,t,e,i))return!0;null!==p&&(n=p[6],o=p[7]);break;default:_("Unknown Segment type: "+u.type)}if(u.isClosed&&(n!==a||o!==r)&&qe.Nb(n,o,a,r,i,t,e))return!0}return!1},h.Object.defineProperties(li.prototype,{isFilled:{get:function(){return this.Pr},set:function(t){this.s&&w(this,t),this.Pr=t}},isShadowed:{get:function(){return this.Tr},set:function(t){this.s&&w(this,t),this.Tr=t}},startX:{get:function(){return this.Rc},set:function(t){this.s&&w(this,t),this.Rc=t,this.qa=!0}},startY:{get:function(){return this.Sc},set:function(t){this.s&&w(this,t),this.Sc=t,this.qa=!0}},segments:{get:function(){return this.Jl},set:function(t){this.s&&w(this,t),this.Jl=t,this.qa=!0}}}),li.prototype.add=li.prototype.add,li.prototype.equalsApprox=li.prototype.Ma,li.className="PathFigure",ui.prototype.copy=function(){var t=new ui;return t.pa=this.pa,t.ec=this.ec,t.mc=this.mc,t.we=this.we,t.Di=this.Di,t.Ei=this.Ei,t.hh=this.hh,t.rl=this.rl,t.Kk=this.Kk,t.wj=this.wj,t.qa=this.qa,t},(i=ui.prototype).Ma=function(t){if(!(t instanceof ui)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case pi:case fi:return qe.A(this.endX,t.endX)&&qe.A(this.endY,t.endY);case gi:return qe.A(this.endX,t.endX)&&qe.A(this.endY,t.endY)&&qe.A(this.point1X,t.point1X)&&qe.A(this.point1Y,t.point1Y)&&qe.A(this.point2X,t.point2X)&&qe.A(this.point2Y,t.point2Y);case mi:return qe.A(this.endX,t.endX)&&qe.A(this.endY,t.endY)&&qe.A(this.point1X,t.point1X)&&qe.A(this.point1Y,t.point1Y);case vi:return qe.A(this.startAngle,t.startAngle)&&qe.A(this.sweepAngle,t.sweepAngle)&&qe.A(this.centerX,t.centerX)&&qe.A(this.centerY,t.centerY)&&qe.A(this.radiusX,t.radiusX)&&qe.A(this.radiusY,t.radiusY);case bi:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&qe.A(this.xAxisRotation,t.xAxisRotation)&&qe.A(this.endX,t.endX)&&qe.A(this.endY,t.endY)&&qe.A(this.radiusX,t.radiusX)&&qe.A(this.radiusY,t.radiusY);default:return!1}},i.eb=function(t){t.classType===ui&&(this.type=t)},i.toString=function(t){switch(void 0===t&&(t=-1),this.type){case pi:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case fi:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case gi:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case mi:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case vi:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case bi:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.wj?"z":"")},i.freeze=function(){return this.s=!0,this},i.ea=function(){return this.s=!1,this},i.close=function(){return this.wj=!0,this},h.Object.defineProperties(ui.prototype,{isClosed:{get:function(){return this.wj},set:function(t){this.wj!==t&&(this.wj=t,this.qa=!0)}},type:{get:function(){return this.pa},set:function(t){this.s&&w(this,t),this.pa=t,this.qa=!0}},endX:{get:function(){return this.ec},set:function(t){this.s&&w(this,t),this.ec=t,this.qa=!0}},endY:{get:function(){return this.mc},set:function(t){this.s&&w(this,t),this.mc=t,this.qa=!0}},point1X:{get:function(){return this.we},set:function(t){this.s&&w(this,t),this.we=t,this.qa=!0}},point1Y:{get:function(){return this.Di},set:function(t){this.s&&w(this,t),this.Di=t,this.qa=!0}},point2X:{get:function(){return this.Ei},set:function(t){this.s&&w(this,t),this.Ei=t,this.qa=!0}},point2Y:{get:function(){return this.hh},set:function(t){this.s&&w(this,t),this.hh=t,this.qa=!0}},centerX:{get:function(){return this.we},set:function(t){this.s&&w(this,t),this.we=t,this.qa=!0}},centerY:{get:function(){return this.Di},set:function(t){this.s&&w(this,t),this.Di=t,this.qa=!0}},radiusX:{get:function(){return this.Ei},set:function(t){0>t&&y(t,">= zero",ui,"radiusX"),this.s&&w(this,t),this.Ei=t,this.qa=!0}},radiusY:{get:function(){return this.hh},set:function(t){0>t&&y(t,">= zero",ui,"radiusY"),this.s&&w(this,t),this.hh=t,this.qa=!0}},startAngle:{get:function(){return this.ec},set:function(t){this.ec!==t&&(this.s&&w(this,t),0>(t%=360)&&(t+=360),this.ec=t,this.qa=!0)}},sweepAngle:{get:function(){return this.mc},set:function(t){this.s&&w(this,t),360<t&&(t=360),-360>t&&(t=-360),this.mc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Kk},set:function(t){this.s&&w(this,t),this.Kk=t,this.qa=!0}},isLargeArc:{get:function(){return this.rl},set:function(t){this.s&&w(this,t),this.rl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.we},set:function(t){0>(t%=360)&&(t+=360),this.s&&w(this,t),this.we=t,this.qa=!0}}}),ui.prototype.equalsApprox=ui.prototype.Ma;var pi=new W(ui,"Move",0),fi=new W(ui,"Line",1),gi=new W(ui,"Bezier",2),mi=new W(ui,"QuadraticBezier",3),vi=new W(ui,"Arc",4),bi=new W(ui,"SvgArc",4);function _i(){this.B=null,this.bv=new pt(0,0).freeze(),this.lu=new pt(0,0).freeze(),this.dr=this.gs=0,this.er=1,this.Xr="",this.Ys=this.yr=!1,this.vr=this.gr=0,this.Jg=this.Ir=this.Rr=!1,this.Dr=null,this.Ts=0,this.bd=this.Ss=null}function wi(){this.B=null,this.Qa="",this.rs=this.Rs=null}function yi(){this.dn=xi,this.af=this.fs="",this.Po=this.Qo=this.Wo=this.Xo=this.Vo=this.B=this.ac=null}ui.className="PathSegment",ui.Move=pi,ui.Line=fi,ui.Bezier=gi,ui.QuadraticBezier=mi,ui.Arc=vi,ui.SvgArc=bi,_i.prototype.copy=function(){var t=new _i;return this.clone(t)},_i.prototype.clone=function(t){return t.B=this.B,t.bv.assign(this.viewPoint),t.lu.assign(this.documentPoint),t.gs=this.gs,t.dr=this.dr,t.er=this.er,t.Xr=this.Xr,t.yr=this.yr,t.Ys=this.Ys,t.gr=this.gr,t.vr=this.vr,t.Rr=this.Rr,t.Ir=this.Ir,t.Jg=this.Jg,t.Dr=this.Dr,t.Ts=this.Ts,t.Ss=this.Ss,t.bd=this.bd,t},_i.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},_i.prototype.pq=function(t,e){var i=this.diagram;return null===i||oa(i,this.event,t,e),e},_i.prototype.Gz=function(t,e){var i=this.diagram;return null===i||(oa(i,this.event,t,e),e.assign(i.St(e))),e},h.Object.defineProperties(_i.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},viewPoint:{get:function(){return this.bv},set:function(t){this.bv.assign(t)}},documentPoint:{get:function(){return this.lu},set:function(t){this.lu.assign(t)}},modifiers:{get:function(){return this.gs},set:function(t){this.gs=t}},button:{get:function(){return this.dr},set:function(t){if(this.dr=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.er},set:function(t){this.er=t}},key:{get:function(){return this.Xr},set:function(t){this.Xr=t}},down:{get:function(){return this.yr},set:function(t){this.yr=t}},up:{get:function(){return this.Ys},set:function(t){this.Ys=t}},clickCount:{get:function(){return this.gr},set:function(t){this.gr=t}},delta:{get:function(){return this.vr},set:function(t){this.vr=t}},isMultiTouch:{get:function(){return this.Rr},set:function(t){this.Rr=t}},handled:{get:function(){return this.Ir},set:function(t){this.Ir=t}},bubbles:{get:function(){return this.Jg},set:function(t){this.Jg=t}},event:{get:function(){return this.Dr},set:function(t){this.Dr=t}},isTouchEvent:{get:function(){var t=f.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=f.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.Ts},set:function(t){this.Ts=t}},targetDiagram:{get:function(){return this.Ss},set:function(t){this.Ss=t}},targetObject:{get:function(){return this.bd},set:function(t){this.bd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),_i.prototype.getMultiTouchDocumentPoint=_i.prototype.Gz,_i.prototype.getMultiTouchViewPoint=_i.prototype.pq,_i.className="InputEvent",wi.prototype.copy=function(){var t=new wi;return t.B=this.B,t.Qa=this.Qa,t.Rs=this.Rs,t.rs=this.rs,t},wi.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},h.Object.defineProperties(wi.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},subject:{get:function(){return this.Rs},set:function(t){this.Rs=t}},parameter:{get:function(){return this.rs},set:function(t){this.rs=t}}}),wi.className="DiagramEvent",yi.prototype.clear=function(){this.Po=this.Qo=this.Wo=this.Xo=this.Vo=this.B=this.ac=null},yi.prototype.copy=function(){var t=new yi;t.dn=this.dn,t.fs=this.fs,t.af=this.af,t.ac=this.ac,t.B=this.B,t.Vo=this.Vo;var e=this.Xo;return t.Xo=S(e)&&"function"==typeof e.G?e.G():e,t.Wo=S(e=this.Wo)&&"function"==typeof e.G?e.G():e,t.Qo=S(e=this.Qo)&&"function"==typeof e.G?e.G():e,t.Po=S(e=this.Po)&&"function"==typeof e.G?e.G():e,t},yi.prototype.eb=function(t){t.classType===yi&&(this.change=t)},yi.prototype.toString=function(){var t="";return t=this.change===ki?t+"* ":this.change===xi?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===ki?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=$(this.object)),null!==this.oldValue&&(t+="  old: "+$(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+$(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},yi.prototype.H=function(t){return t?this.oldValue:this.newValue},yi.prototype.Iz=function(t){return t?this.oldParam:this.newParam},yi.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},yi.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},yi.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},yi.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},h.Object.defineProperties(yi.prototype,{model:{get:function(){return this.ac},set:function(t){this.ac=t}},diagram:{get:function(){return this.B},set:function(t){this.B=t}},change:{get:function(){return this.dn},set:function(t){this.dn=t}},modelChange:{get:function(){return this.fs},set:function(t){this.fs=t}},propertyName:{get:function(){return this.af},set:function(t){this.af=t}},isTransactionFinished:{get:function(){return this.dn===ki&&("CommittedTransaction"===this.af||"FinishedUndo"===this.af||"FinishedRedo"===this.af)}},object:{get:function(){return this.Vo},set:function(t){this.Vo=t}},oldValue:{get:function(){return this.Xo},set:function(t){this.Xo=t}},oldParam:{get:function(){return this.Wo},set:function(t){this.Wo=t}},newValue:{get:function(){return this.Qo},set:function(t){this.Qo=t}},newParam:{get:function(){return this.Po},set:function(t){this.Po=t}}}),yi.prototype.redo=yi.prototype.redo,yi.prototype.canRedo=yi.prototype.canRedo,yi.prototype.undo=yi.prototype.undo,yi.prototype.canUndo=yi.prototype.canUndo,yi.prototype.getParam=yi.prototype.Iz,yi.prototype.getValue=yi.prototype.H,yi.prototype.clear=yi.prototype.clear;var ki=new W(yi,"Transaction",-1),xi=new W(yi,"Property",0),Si=new W(yi,"Insert",1),Ti=new W(yi,"Remove",2);function Ci(){this.u=(new tt).freeze(),this.Qa="",this.l=!1}function Di(){this.Ku=new it,this.Mc=!1,this.I=(new tt).freeze(),this.Jd=-1,this.u=999,this.me=!1,this.sr=null,this.Li=0,this.l=!1,this.se=(new tt).freeze(),this.zl=new tt,this.su=!0,this.Eu=this.Cu=this.Bu=!1}function Ii(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&k("Ending transaction without having started a transaction: "+i);var n=1===t.transactionLevel,o=t.currentTransaction;n&&e&&t.yb("CommittingTransaction",i,o);var a=0;if(0<t.transactionLevel&&(t.Li--,t.isEnabled)){var r=t.se.count;0<r&&(""===i&&(i=t.se.L(0)),t.se.ea(),t.se.Za(r-1),t.se.freeze()),0<(r=t.zl.count)&&(a=t.zl.L(r-1),t.zl.Za(r-1))}if(n){if(e){if(t.Eu=!1,t.isEnabled&&null!==o){for(o.isComplete=!0,o.name=i,(e=t.history).ea(),n=e.count-1;n>t.historyIndex;n--)null!==(a=e.L(n))&&a.clear(),e.Za(n),t.Eu=!0;0<=(n=t.maxHistoryLength)&&(0===n?e.clear():e.count>=n&&(null!==(a=e.L(0))&&a.clear(),e.Za(0),t.Jd--)),0!==n&&(e.add(o),t.Jd++),e.freeze()}t.yb("CommittedTransaction",i,o)}else{t.me=!0;try{t.isEnabled&&null!==o&&(o.isComplete=!0,o.undo())}finally{t.yb("RolledBackTransaction",i,o),t.me=!1}null!==o&&o.clear()}return t.sr=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==o){for(t=a,o=(i=o.changes).count-1;o>=t;o--)null!==(e=i.L(o))&&e.undo(),i.ea(),i.Za(o);i.freeze()}return!1}function Pi(){nt(this),this.B=ar,this.Qa="",this.Mc=!0,this.kd=!1,this.Iw=null,this.Gy=new _i,this.at=-1}function Mi(){Pi.call(this),this.name="ToolManager",this.Ic=new tt,this.Yc=new tt,this.Df=new tt,this.W=this.Ha=850,this.u=new Lt(2,2).ca(),this.$a=5e3,this.Ia=$i,this.I=Ei,this.rr=this.l=null,this.Qj=-1}function Oi(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}yi.className="ChangedEvent",yi.Transaction=ki,yi.Property=xi,yi.Insert=Si,yi.Remove=Ti,Ci.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.L(i);null!==n&&(e+="\n  "+n.toString())}}return e},Ci.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.L(e);null!==i&&i.clear()}t.clear(),t.freeze()},Ci.prototype.canUndo=function(){return this.isComplete},Ci.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.L(t);null!==e&&e.undo()}},Ci.prototype.canRedo=function(){return this.isComplete},Ci.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.L(e);null!==i&&i.redo()}},h.Object.defineProperties(Ci.prototype,{changes:{get:function(){return this.u}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isComplete:{get:function(){return this.l},set:function(t){this.l=t}}}),Ci.prototype.redo=Ci.prototype.redo,Ci.prototype.canRedo=Ci.prototype.canRedo,Ci.prototype.undo=Ci.prototype.undo,Ci.prototype.canUndo=Ci.prototype.canUndo,Ci.prototype.clear=Ci.prototype.clear,Ci.className="Transaction",Di.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.L(n);if(e+="]",void 0!==t&&0<t)for(i=this.history.count,n=0;n<i;n++)e+="\n "+this.history.L(n).toString(t-1);return e},Di.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.L(e);null!==i&&i.clear()}t.clear(),this.Jd=-1,t.freeze(),this.me=!1,this.sr=null,this.Li=0,this.se.ea(),this.se.clear(),this.se.freeze(),this.zl.clear(),this.Cu=this.Bu=!1},Di.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(i=Di.prototype).wx=function(t){this.Ku.add(t)},i.gy=function(t){this.Ku.remove(t)},i.ua=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.su&&(this.su=!1,this.Li++,this.yb("StartingFirstTransaction",t,this.currentTransaction),0<this.Li&&this.Li--),this.isEnabled&&(this.se.ea(),this.se.add(t),this.se.freeze(),this.zl.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.Li++;var e=1===this.transactionLevel;return e&&this.yb("StartedTransaction",t,this.currentTransaction),e},i.Ua=function(t){return void 0===t&&(t=""),Ii(this,!0,t)},i.Af=function(){return Ii(this,!1,"")},Di.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Di.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.me=!0,this.yb("StartingUndo","Undo",t),this.Jd--,t.undo()}catch(e){k("undo error: "+e.toString())}finally{this.yb("FinishedUndo","Undo",t),this.me=!1}}},Di.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Di.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.me=!0,this.yb("StartingRedo","Redo",t),this.Jd++,t.redo()}catch(e){k("redo error: "+e.toString())}finally{this.yb("FinishedRedo","Redo",t),this.me=!1}}},Di.prototype.yb=function(t,e,i){void 0===i&&(i=null);var n=new yi;for(n.change=ki,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)n.model=e=t.value,e.dt(n)},Di.prototype.Gv=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.sr=e=new Ci);var i=t.copy();(e=e.changes).ea(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.su&&(null!==(t=t.diagram)&&!1===t.kk||k("Change not within a transaction: "+i.toString()))}},Di.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},h.Object.defineProperties(Di.prototype,{models:{get:function(){return this.Ku.iterator}},isEnabled:{get:function(){return this.Mc},set:function(t){this.Mc=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.L(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.L(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.me}},history:{get:function(){return this.I}},maxHistoryLength:{get:function(){return this.u},set:function(t){this.u=t}},historyIndex:{get:function(){return this.Jd}},currentTransaction:{get:function(){return this.sr}},transactionLevel:{get:function(){return this.Li}},isInTransaction:{get:function(){return 0<this.Li}},checksTransactionLevel:{get:function(){return this.l},set:function(t){this.l=t}},nestedTransactionNames:{get:function(){return this.se}},isPendingClear:{get:function(){return this.Bu},set:function(t){this.Bu=t}},isPendingUnmodified:{get:function(){return this.Cu},set:function(t){this.Cu=t}}}),Di.prototype.handleChanged=Di.prototype.Gv,Di.prototype.redo=Di.prototype.redo,Di.prototype.undo=Di.prototype.undo,Di.prototype.canUndo=Di.prototype.canUndo,Di.prototype.rollbackTransaction=Di.prototype.Af,Di.prototype.commitTransaction=Di.prototype.Ua,Di.prototype.startTransaction=Di.prototype.ua,Di.prototype.removeModel=Di.prototype.gy,Di.prototype.addModel=Di.prototype.wx,Di.prototype.clear=Di.prototype.clear,Di.className="UndoManager",Pi.prototype.toString=function(){return""!==this.name?this.name+" Tool":O(this.constructor)},Pi.prototype.updateAdornments=function(){},Pi.prototype.canStart=function(){return this.isEnabled},Pi.prototype.doStart=function(){},Pi.prototype.doActivate=function(){this.isActive=!0},Pi.prototype.doDeactivate=function(){this.isActive=!1},Pi.prototype.doStop=function(){},Pi.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Pi.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Pi.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Pi.prototype.doMouseMove=function(){},Pi.prototype.doMouseUp=function(){this.stopTool()},Pi.prototype.doMouseWheel=function(){},Pi.prototype.canStartMultiTouch=function(){return!0},Pi.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.pq(0,pt.allocAt(NaN,NaN)),n=e.pq(1,pt.allocAt(NaN,NaN));if(i.v()&&n.v()&&(this.doCancel(),t.lm("hasGestureZoom"))){t.Bl=t.scale;var o=n.x-i.x,a=n.y-i.y;t.Wu=Math.sqrt(o*o+a*a),e.bubbles=!1}pt.free(i),pt.free(n)},Pi.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.pq(0,pt.allocAt(NaN,NaN)),n=e.pq(1,pt.allocAt(NaN,NaN));if(i.v()&&n.v()&&(this.doCancel(),t.lm("hasGestureZoom"))){var o=n.x-i.x,a=n.y-i.y;a=Math.sqrt(o*o+a*a)/t.Wu,o=new pt((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2);var r=t.commandHandler;if((a*=t.Bl)!==t.scale&&r.canResetZoom(a)){var s=t.zoomPoint;t.zoomPoint=o,r.resetZoom(a),t.zoomPoint=s}e.bubbles=!1}pt.free(i),pt.free(n)},Pi.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Pi.prototype.doKeyUp=function(){},Pi.prototype.ua=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.ua(t)},Pi.prototype.Eg=function(){var t=this.diagram;return null===this.transactionResult?t.Af():t.Ua(this.transactionResult)},Pi.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.im(e.documentPoint,!1);if(null!==i){if(B?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.R("ChangingSelection",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(B?e.meta:e.control)||e.shift||t.clearSelection()}},Pi.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.Ub(n.documentPoint,t,e),n.targetObject=t,function(t,e,i){if(e.handled=!1,null===t||t.Bg()){var n=0;e.left?n=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(n=3);var o="ObjectSingleClicked";if(null!==t){switch(n){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==n&&i.R(o,t)}else{switch(n){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==n&&i.R(o)}if(null!==t)for(;null!==t;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(null!==i&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}null!==t&&t(e)}}}(t,n,i),n.handled},Pi.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.qc){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.aa(e.documentPoint)?t.Ub(e.documentPoint,null,null):null;e.targetObject=n;var o=!1;if(n!==t.mj){var a=t.mj,r=a;for(t.mj=n,this.doCurrentObjectChanged(a,n),e.handled=!1;null!==a;){var s=a.mouseLeave;if(null!==s){if(n===a)break;if(null!==n&&n.Ag(a))break;if(s(e,a,n),o=!0,e.handled)break}a=a.panel}for(a=r,e.handled=!1;null!==n;){if(null!==(r=n.mouseEnter)){if(a===n)break;if(null!==a&&a.Ag(n))break;if(r(e,n,a),o=!0,e.handled)break}n=n.panel}n=t.mj}if(null!==n){for(a=n,r="";null!==a&&""===(r=a.cursor);)a=a.panel;for(t.currentCursor=r,e.handled=!1,a=n;null!==a&&(null===(n=a.mouseOver)||(n(e,a),o=!0,!e.handled));)a=a.panel}else t.currentCursor="",null!==(n=t.mouseOver)&&(n(e),o=!0);o&&t.Pb(),t.skipsUndoManager=i}},Pi.prototype.doCurrentObjectChanged=function(){},Pi.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(0!==i&&t.documentBounds.v()){var n=t.commandHandler,o=t.toolManager.mouseWheelBehavior;if(null!==n&&(o===ji&&!e.shift||o===$i&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(o=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=o),e.bubbles=!1;else if(o===ji&&e.shift||o===$i&&!e.control){n=t.position.copy();var a=0<i?i:-i,r=e.event,s=r.deltaMode;if(o=r.deltaX,r=r.deltaY,(V||z||F)&&(s=1,0<o&&(o=3),0>o&&(o=-3),0<r&&(r=3),0>r&&(r=-3)),void 0===s||void 0===o||void 0===r||0===o&&0===r||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<i?"up":"down",a=3*a*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<i?"left":"right",a=3*a*t.scrollHorizontalLineChange);else{switch(s){case 0:i="pixel";break;case 1:i="line";break;case 2:i="page";break;default:i="pixel"}0!==o&&t.allowHorizontalScroll&&(0<(o*=t.scrollHorizontalLineChange/16)?t.scroll(i,"left",-o):t.scroll(i,"right",o)),0!==r&&t.allowVerticalScroll&&(0<(r*=t.scrollVerticalLineChange/16)?t.scroll(i,"up",-r):t.scroll(i,"down",r))}t.position.w(n)||(e.bubbles=!1)}}},Pi.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.Gy);this.at=v(function(){i.doWaitAfter(n)},t)},Pi.prototype.cancelWaitAfter=function(){-1!==this.at&&f.clearTimeout(this.at),this.at=-1},Pi.prototype.doWaitAfter=function(){},Pi.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Ub(t,function(t){for(;null!==t&&!(t.panel instanceof Mu);)t=t.panel;return t}))?null:t.part.category===e?t:null},Pi.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;void 0===t&&(t=i.firstInput.viewPoint),void 0===e&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,o=n.width;return n=n.height,i.firstInput.isTouchEvent&&(o+=6,n+=6),Math.abs(e.x-t.x)>o||Math.abs(e.y-t.y)>n},h.Object.defineProperties(Pi.prototype,{diagram:{get:function(){return this.B},set:function(t){t instanceof Eo&&(this.B=t)}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isEnabled:{get:function(){return this.Mc},set:function(t){this.Mc=t}},isActive:{get:function(){return this.kd},set:function(t){this.kd=t}},transactionResult:{get:function(){return this.Iw},set:function(t){this.Iw=t}}}),Pi.prototype.stopTransaction=Pi.prototype.Eg,Pi.prototype.startTransaction=Pi.prototype.ua,Pi.className="Tool",d(Mi,Pi),Mi.prototype.initializeStandardTools=function(){},Mi.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Mu&&this.rr===t){var i=e.adornedObject;(null!==t?i.part===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}},Mi.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Ni&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Ai)return void(e.bubbles=!0);if(this.gestureBehavior===Ni)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var o=this.mouseDownTools.L(n);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===$i?this.mouseWheelBehavior=ji:this.mouseWheelBehavior===ji&&(this.mouseWheelBehavior=$i)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Mi.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Ai)return void(e.bubbles=!0);if(this.gestureBehavior===Ni)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var o=this.mouseMoveTools.L(n);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseMove()))}Oi(this,t),null===(t=e.event)||"mousemove"!==t.type&&"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Mi.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Mu&&(e===t||e.Ag(t))||this.hideToolTip()},Mi.prototype.doWaitAfter=function(t){var e=this.diagram;e.sa&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.Pj=!0,e.doMouseUp()))},Mi.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Ub(e.documentPoint,null,null));var i=e.targetObject;if(null!==i)for(e.handled=!1;null!==i&&(null===(t=this.isActive?i.mouseHold:i.mouseHover)||(t(e,i),!e.handled));)i=i.panel;else null!==(i=this.isActive?t.mouseHold:t.mouseHover)&&i(e)},Mi.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Ub(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Mu)||e!==t&&!e.Ag(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Mi.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Mu){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.zb(),this.positionToolTip(t,e)}else t instanceof On&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,-1!==this.Qj&&(f.clearTimeout(this.Qj),this.Qj=-1),0<(t=this.toolTipDuration)&&1/0!==t){var o=this;this.Qj=v(function(){o.hideToolTip()},t)}},Mi.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,o=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5/e.scale),i.x<o.x&&(i.x=o.x),i.y=i.y+20/e.scale+n.height>o.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<o.y&&(i.y=o.y),t.position=i}},Mi.prototype.hideToolTip=function(){-1!==this.Qj&&(f.clearTimeout(this.Qj),this.Qj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Mu?(t.remove(e),null!==this.rr&&this.rr.zf(e.category),e.data=null,e.adornedObject=null):e instanceof On&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Mi.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.L(i);if(n.diagram=this.diagram,n.canStart())return t.doFocus(),t.currentTool=n,void(t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()},Mi.prototype.doMouseWheel=function(){this.standardMouseWheel()},Mi.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Mi.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Mi.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.L(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if((n=this.mouseMoveTools.L(i)).name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if((n=this.mouseUpTools.L(i)).name===t)return n;return null},Mi.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var o=this.mouseDownTools.L(n);if(o.name===t)return null!==e?this.mouseDownTools.hd(n,e):this.mouseDownTools.Za(n),o}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if((o=this.mouseMoveTools.L(n)).name===t)return null!==e?this.mouseMoveTools.hd(n,e):this.mouseMoveTools.Za(n),o;for(i=this.mouseUpTools.length,n=0;n<i;n++)if((o=this.mouseUpTools.L(n)).name===t)return null!==e?this.mouseUpTools.hd(n,e):this.mouseUpTools.Za(n),o;return null},Mi.prototype.Va=function(t,e,i){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&i.add(e)},h.Object.defineProperties(Mi.prototype,{mouseWheelBehavior:{get:function(){return this.Ia},set:function(t){this.Ia=t}},gestureBehavior:{get:function(){return this.I},set:function(t){this.I=t}},currentToolTip:{get:function(){return this.l},set:function(t){this.l=t,this.rr=null!==t&&t instanceof Mu?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Ic}},mouseMoveTools:{get:function(){return this.Yc}},mouseUpTools:{get:function(){return this.Df}},hoverDelay:{get:function(){return this.Ha},set:function(t){this.Ha=t}},holdDelay:{get:function(){return this.W},set:function(t){this.W=t}},dragSize:{get:function(){return this.u},set:function(t){this.u=t.G()}},toolTipDuration:{get:function(){return this.$a},set:function(t){this.$a=t}}}),Mi.prototype.replaceStandardTool=Mi.prototype.Va;var $i=new W(Mi,"WheelScroll",0),ji=new W(Mi,"WheelZoom",1),Li=new W(Mi,"WheelNone",2),Ei=new W(Mi,"GestureZoom",3),Ni=new W(Mi,"GestureCancel",4),Ai=new W(Mi,"GestureNone",5);function Vi(){Pi.call(this),this.name="Dragging",this.I=this.Yc=!0,this.u=this.$a=this.Ha=this.lg=null,this.Bn=this.Df=!1,this.Pl=new pt(NaN,NaN),this.Ps=new pt,this.Ic=!0,this.Vk=100,this.Qg=[],this.Tq=(new it).freeze(),this.Ia=new Nr,this.lo=null,this.W="copy",this.Lh="",this.Oh="no-drop"}function zi(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.ik()&&1===e.count&&e.first()instanceof id?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Yj(),t.lg=i.toolManager.findTool("Relinking"),null===t.lg&&(t.lg=new mn,t.lg.diagram=i)):(t.draggedLink=null,t.lg=null))}}function Fi(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,Yi(t,e.lastInput,null),e.skipsUndoManager=i,t.Qg.length=0}function Bi(){var t=an;Gi(t),qi(t);var e=t.diagram;t.Pl.v()&&(e.position=t.Pl),e.Bf()}function Ri(t,e){var i=1/0,n=1/0,o=-1/0,a=-1/0;for(t=t.iterator;t.next();){var r=t.value;if(r.Wb()&&r.isVisible()){var s=r.location;r=s.x,s=s.y,isNaN(r)||isNaN(s)||(r<i&&(i=r),s<n&&(n=s),r>o&&(o=r),s>a&&(a=s))}}1/0===i?e.h(0,0,0,0):e.h(i,n,o-i,a-n)}function Ui(t,e){if(null===t.copiedParts){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&null!==t.draggedParts){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?null!==n.currentTransaction&&0<n.currentTransaction.changes.count&&(i.undoManager.Af(),i.ua("Drag")):qi(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Cf():i.selection,e=(i=i.ck(e,i,!0)).iterator;e.next();)e.value.location=e.key.location;for(Ri(i,e=Vt.alloc()),Vt.free(e),e=new ht,n=t.draggedParts.iterator;n.next();){var o=n.key;o.Wb()&&o.canCopy()&&null!==(o=i.H(o))&&(o.zb(),e.add(o,t.td(o.location)))}for(i=i.iterator;i.next();)(n=i.value)instanceof id&&n.canCopy()&&e.add(n,t.td());t.copiedParts=e,zi(t,e.Cf()),null!==t.draggedLink&&ad(i=t.draggedLink,t.startPoint.x-((e=i.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2))}}}function Gi(t){var e=t.diagram;if(null!==t.copiedParts&&(e.Lt(t.copiedParts.Cf(),!1),t.copiedParts=null,null!==t.draggedParts))for(var i=t.draggedParts.iterator;i.next();)i.key instanceof id&&(i.value.point=new pt(0,0));e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Hi(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.lg){var e=t.lg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.lg=null}}function Wi(t,e,i){var n=t.diagram,o=t.startPoint,a=pt.alloc();a.assign(n.lastInput.documentPoint),t.moveParts(e,a.ae(o),i),pt.free(a),!0===n.De("temporaryPixelRatio")&&null===n.rh&&30<n.zx&&(zo(n),n.Jt())}function qi(t){if(null!==t.draggedParts){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Wb()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if((n=i.key)instanceof id&&n.suspendsRouting){var o=i.value.point;t.draggedParts.add(n,t.td()),ad(n,-o.x,-o.y)}e.Wc()}}function Xi(t,e){var i=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Ji(t,!1));var n=t.findDragOverObject(e),o=i.lastInput;o.targetObject=n,t.doUpdateCursor(n);var a=i.skipsUndoManager,r=!1;try{if(i.skipsUndoManager=!0,r=Yi(t,o,n),!t.isActive&&null===an)return;var s=null!==n?n.part:null;if(null===s||i.handlesDragDropForTopLevelParts&&s.isTopLevel&&!(s instanceof Ku)){var c=i.mouseDragOver;null!==c&&(c(o),r=!0)}if(!t.isActive&&null===an)return;if(t.doDragOver(e,n),!t.isActive&&null===an)return}finally{i.skipsUndoManager=a,r&&i.Wc()}t.lo=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.it(o.viewPoint)}function Yi(t,e,i){var n=!1,o=t.Qg.length,a=0<o?t.Qg[0]:null;if(i===a)return!1;e.handled=!1;for(var r=0;r<o;r++){var s=t.Qg[r],c=s.mouseDragLeave;if(null!==c&&(c(e,s,i),n=!0,e.handled))break}if(t.Qg.length=0,!t.isActive&&null===an||null===i)return n;for(e.handled=!1,o=i;null!==o;)t.Qg.push(o),o=Ki(o);for(o=t.Qg.length,i=0;i<o&&(null===(s=(r=t.Qg[i]).mouseDragEnter)||(s(e,r,a),n=!0,!e.handled));i++);return n}function Ki(t){var e=t.panel;return null!==e?e:t instanceof su&&!(t instanceof Ku)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function Zi(t,e,i){var n=t.lg;if(null===n)return null;var o=t.diagram.xg(e,n.portGravity,function(t){return n.findValidLinkablePort(t,i)});t=pt.alloc();var a=1/0,r=null;for(o=o.iterator;o.next();){var s=o.value;if(null!==s.part){var c=s.ga(ce,t);(c=e.Ce(c))<a&&(r=s,a=c)}}return pt.free(t),r}function Ji(t,e){var i=t.draggedLink;if(null!==i&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var o=t.lg;if(null!==o){var a=null,r=null;null===i.fromNode&&null!==(a=Zi(t,i.i(0),!1))&&(r=a.part);var s=null,c=null;null===i.toNode&&null!==(s=Zi(t,i.i(i.pointsCount-1),!0))&&(c=s.part),o.isValidLink(r,a,c,s)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=r,null!==a&&(i.fromPortId=a.portId),i.toNode=c,null!==s&&(i.toPortId=s.portId),i.fromPort!==n.Zx&&n.R("LinkRelinked",i,n.Zx),i.toPort!==n.$x&&n.R("LinkRelinked",i,n.$x)):vn(o,r,a,c,s):vn(o,null,null,null,null)}}}}function Qi(t,e){var i=t.diagram;t.dragsLink&&Ji(t,!0),Fi(t);var n=t.findDragOverObject(e),o=i.lastInput;if(o.targetObject=n,null!==n){o.handled=!1;for(var a=n;null!==a;){var r=a.mouseDrop;if(null!==r&&(r(o,a),o.handled))break;tn(t,o,a),a=Ki(a)}}else null!==(a=i.mouseDrop)&&a(o);if(t.isActive||null!==an){for(o=(t.copiedParts||t.draggedParts).iterator;o.next();)(a=o.key)instanceof Ou&&a.linksConnected.each(function(t){t.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||null!==an){for(t=Vt.alloc(),e=i.selection.iterator;e.next();)(n=e.value)instanceof Ou&&en(i,n,t);Vt.free(t)}}}function tn(t,e,i){i=i.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof Ku||null!==(i=t.mouseDrop)&&i(e)}function en(t,e,i){var n=!1;if(e.getAvoidableRect(i),t.viewportBounds.Be(i)&&(n=!0),0!==(t=t.yv(i,function(t){return t.part},function(t){return t instanceof id},!0,function(t){return t instanceof id},n)).count)for(t=t.iterator;t.next();)!(i=t.value).Xd(e)&&i.isAvoiding&&i.Ta()}function nn(t,e,i,n){if(null===t.copiedParts){var o=t.diagram;if(!o.isReadOnly&&!o.isModelReadOnly){o.skipsUndoManager=!i,o.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=o.ck(e,o,!0);var a=Vt.alloc();Ri(e,a),n=a.x+a.width/2,o=a.y+a.height/2,Vt.free(a),a=t.Ps;var r=new ht,s=pt.alloc();for(e=e.iterator;e.next();){var c=e.value,l=i.H(c);c.Wb()&&c.canCopy()?(s.h(a.x-(n-(c=c.location).x),a.y-(o-c.y)),l.location=s,l.zb(),r.add(l,t.td(s))):l instanceof id&&c.canCopy()&&(ad(l,a.x-n,a.y-o),r.add(l,t.td()))}pt.free(s),t.copiedParts=r,zi(t,r.Cf()),null!==t.draggedLink&&ad(i=t.draggedLink,t.startPoint.x-((n=i.routeBounds).x+n.width/2),t.startPoint.y-(n.y+n.height/2))}}}Mi.className="ToolManager",Mi.WheelScroll=$i,Mi.WheelZoom=ji,Mi.WheelNone=Li,Mi.GestureZoom=Ei,Mi.GestureCancel=Ni,Mi.GestureNone=Ai,d(Vi,Pi),Vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Vk))&&null!==this.findDraggablePart()},Vi.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.im(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},Vi.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.im(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(B?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},Vi.prototype.doActivate=function(){var t=this.diagram;this.lo=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(an=null,this.isActive=!0,this.Pl.set(t.position),zi(this,t.selection),this.Qg.length=0,this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.Rt=!0,!0===t.De("temporaryPixelRatio")&&30<t.zx&&zo(t),ka(t,this.draggedParts),this.ua("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Bn=!1,an=this,rn=this.diagram,this.doSimulatedDragOut()))},Vi.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Vi.prototype.td=function(t){return new Lr(void 0===t?yt:this.isGridSnapEnabled?new pt(Math.round(t.x),Math.round(t.y)):t.copy())},Vi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.Bf(),Fi(this),xa(t,this.draggedParts),this.draggedParts=this.currentPart=this.lo=null,this.Bn=this.isDragOutStarted=!1,0<on.count){for(var e=on,i=e.length,n=0;n<i;n++){var o=e.L(n);Hi(o),Gi(o),Fi(o),o.diagram.Bf()}e.clear()}Hi(this),this.Pl.h(NaN,NaN),an=rn=null,Gi(this),t.isMouseCaptured=!1,t.currentCursor="",t.Rt=!1,this.Eg(),Fo(t,!0)},Vi.prototype.doCancel=function(){Gi(this),qi(this);var t=this.diagram;this.Pl.v()&&(t.position=this.Pl),this.stopTool()},Vi.prototype.doKeyDown=function(){this.isActive&&("Esc"===this.diagram.lastInput.key?this.doCancel():this.doMouseMove())},Vi.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},Vi.prototype.moveParts=function(t,e,i){var n=this.diagram;null!==n&&_a(n,t,e,this.dragOptions,i)},Vi.prototype.findDragOverObject=function(t){var e=this;return Ko(this.diagram,t,null,function(t){return!(t=null===t||!!(null===(t=t.part)||t instanceof Mu||t.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(t)||e.copiedParts&&e.copiedParts.contains(t)))})},Vi.prototype.doUpdateCursor=function(t){var e=this.diagram;this.lo!==t&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))},Vi.prototype.doDragOver=function(){},Vi.prototype.doDropOnto=function(){},Vi.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Ui(this,!1),ka(t,this.copiedParts),Wi(this,this.copiedParts,!1),xa(t,this.copiedParts)):this.mayMove()?(Gi(this),Wi(this,this.draggedParts,!0)):this.mayDragOut()?(Ui(this,!1),Wi(this,this.copiedParts,!1)):Gi(this),Xi(this,t.lastInput.documentPoint))}},Vi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&null!==this.copiedParts?(Gi(this),Ui(this,!0),ka(t,this.copiedParts),Wi(this,this.copiedParts,!1),xa(t,this.copiedParts),null!==this.copiedParts&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(t){t.isSelected=!0}))):(e=!0,Gi(this),this.mayMove()&&(Wi(this,this.draggedParts,!0),Xi(this,t.lastInput.documentPoint))),this.Bn=!0,Qi(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Cf():this.draggedParts.Cf();this.copiedParts=null,e&&function(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof Ou&&(null===(i=i.containingGroup)||null===i.placeholder||t.draggedParts.contains(i)||i.placeholder.o())}}(this),t.Na(),xa(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.R(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.R("ChangedSelection",t.selection)}}},Vi.prototype.simulatedMouseMove=function(t,e,i){if(null===an)return!1;var n=an.diagram;i instanceof Eo||(i=null);var o=rn;return i!==o&&(null!==o&&o!==n&&(o.Bf(),an.isDragOutStarted=!1,null!==(o=o.toolManager.findTool("Dragging"))&&o.doSimulatedDragLeave()),rn=i,null!==i&&i!==n&&(Bi(),null!==(o=i.toolManager.findTool("Dragging"))&&(on.contains(o)||on.add(o),o.doSimulatedDragEnter()))),!(null===i||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert||(null!==(n=i.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.Oq(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),0))},Vi.prototype.simulatedMouseUp=function(t,e,i){if(null===an)return!1;var n=rn,o=an.diagram;if(null===i)return an.doCancel(),!0;if(i!==n){var a=n.toolManager.findTool("Dragging");if(null!==n&&n!==o&&null!==a)return n.Bf(),an.isDragOutStarted=!1,a.doSimulatedDragLeave(),!1;rn=i,null!==(n=i.toolManager.findTool("Dragging"))&&(Bi(),on.contains(n)||on.add(n),n.doSimulatedDragEnter())}return i!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):null===e&&(e=new pt),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.Oq(e),i.lastInput.down=!1,i.lastInput.up=!0,null!==(t=i.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=an)&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0)},Vi.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(B?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canCopy())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Vi.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canCopy())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Vi.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canMove())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},Vi.prototype.computeBorder=function(t,e,i){return this.Bn||null===this.draggedParts||this.draggedParts.contains(t)?null:i.assign(e)},Vi.prototype.Dz=function(){return an},Vi.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&null!==an&&an.diagram.model.dataFormat===t.model.dataFormat},Vi.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Xc(),ra(t),t.animationManager.Xc(),null!==an&&(an.diagram.Rt=!1),this.doUpdateCursor(t.grid)}},Vi.prototype.doSimulatedDragLeave=function(){null!==an&&an.doSimulatedDragOut(),this.doCancel()},Vi.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.bn=!0;var e=an;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;nn(this,e.draggedParts.Cf(),!1,t.firstInput),Wi(this,this.copiedParts,!1),Xi(this,t.lastInput.documentPoint)}t.animationManager.bn=!1},Vi.prototype.doSimulatedDrop=function(){var t=this.diagram,e=an;if(null!==e){var i=e.diagram;if(e.Bn=!0,Gi(this),!this.mayDragIn())return;t.animationManager.bn=!0,t.R("ChangingSelection",t.selection),this.ua("Drop"),nn(this,e.draggedParts.Cf(),!0,t.lastInput),Wi(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(t){t.isSelected=!0})),Qi(this,t.lastInput.documentPoint),t.Na(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new it,this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",e,i),this.Eg(),t.R("ChangedSelection",t.selection)}t.animationManager.bn=!1},Vi.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Rt=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.lo=null},Vi.prototype.computeMove=function(t,e,i,n){return null!==(i=this.diagram)?i.computeMove(t,e,this.dragOptions,n):new pt},h.Object.defineProperties(Vi.prototype,{isCopyEnabled:{get:function(){return this.Yc},set:function(t){this.Yc=t}},copiesEffectiveCollection:{get:function(){return this.I},set:function(t){this.I=t}},dragOptions:{get:function(){return this.Ia},set:function(t){this.Ia=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Ic},set:function(t){this.Ic=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.w(t)||(t=t.G(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.W},set:function(t){this.W=t}},moveCursor:{get:function(){return this.Lh},set:function(t){this.Lh=t}},nodropCursor:{get:function(){return this.Oh},set:function(t){this.Oh=t}},currentPart:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiedParts:{get:function(){return this.u},set:function(t){this.u=t}},draggedParts:{get:function(){return this.$a},set:function(t){this.$a=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Cf():null!==this.draggedParts?this.draggedParts.Cf():this.Tq}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Df},set:function(t){this.Df=t}},startPoint:{get:function(){return this.Ps},set:function(t){this.Ps.w(t)||this.Ps.assign(t)}},delay:{get:function(){return this.Vk},set:function(t){this.Vk=t}}}),Vi.prototype.getDraggingSource=Vi.prototype.Dz;var on=null,an=null,rn=null;function sn(){Pi.call(this),this.Oh=100,this.Ia=!1,this.fi="pointer";var t=new id,e=new al;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new al).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.Gw=t,t=new Ou,(e=new al).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Dt,t.add(e),t.selectable=!1,t.layerName="Tool",this.Fw=t,this.l=e,t=new Ou,(e=new al).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Dt,t.add(e),t.selectable=!1,t.layerName="Tool",this.Hw=t,this.u=e,this.Lh=this.Df=this.Ic=this.$a=this.Yc=null,this.Ha=!0,this.xy=new ht,this.Tq=this.xi=this.Ew=null}function cn(t,e,i,n){if(e===i)return!0;var o=e.fromNode;return!(null===o||!o.isLinkLabel||(n.add(o),!cn(t,o.labeledLink,i,n)))||!(null===(e=e.toNode)||!e.isLinkLabel||(n.add(e),!cn(t,e.labeledLink,i,n)))}function ln(t,e,i,n,o){if(e===i)return!0;if(null===e||null===i)return!1;for(var a=e.linksConnected;a.next();){var r=a.value;if(r!==n&&(!o||r.isTreeLink)&&r.toNode===e&&(r=r.fromNode)!==e&&ln(t,r,i,n,o))return!0}return!1}function un(t,e,i,n,o){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var a=i.linksConnected;a.next();){var r=a.value;if(r!==o&&r.toNode===i&&(r=r.fromNode)!==i&&un(t,e,r,n,o))return!0}return!1}function dn(t,e,i,n,o){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var a=i.linksConnected;a.next();){var r=a.value;if(r!==o){var s=r.fromNode;if(r=r.toNode,(s=s===i?r:s)!==i&&dn(t,e,s,n,o))return!0}}return!1}function hn(){sn.call(this),this.name="Linking",this.W={},this.I=null,this.J=pn,this.Nm=null}Vi.className="DraggingTool",on=new tt,L("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Va("Dragging",t,this.mouseMoveTools)}),Mi.prototype.doCancel=function(){null!==an&&an.doCancel(),Pi.prototype.doCancel.call(this)},d(sn,Pi),sn.prototype.doStop=function(){this.diagram.Bf(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},sn.prototype.copyPortProperties=function(t,e,i,n,o){if(null!==t&&null!==e&&null!==i&&null!==n){var a=e.uf(),r=Lt.alloc();r.width=e.naturalBounds.width*a,r.height=e.naturalBounds.height*a,n.desiredSize=r,Lt.free(r),o?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=ce,a=pt.alloc(),i.location=e.ga(ce,a),pt.free(a),n.angle=e.Xi(),null!==this.portTargeted&&this.portTargeted(t,e,i,n,o)}},sn.prototype.setNoTargetPortProperties=function(t,e,i){null!==e&&(e.desiredSize=Dt,e.fromSpot=ne,e.toSpot=ne),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,i)},sn.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},sn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof Ou){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.it(t.lastInput.viewPoint)}},sn.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var i=t.part;if(!(i instanceof Ou))return null;for(;null!==t;){var n=e?t.toLinkable:t.fromLinkable;if(!0===n&&(null!==t.portId||t instanceof Ou)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)break;t=t.panel}return null},sn.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var o=this,a=e.xg(i,n,function(e){return o.findValidLinkablePort(e,t)},null,!0);for(n=1/0,e=null,a=a.iterator;a.next();){var r=a.value,s=r.part;if(s instanceof Ou){var c=r.ga(ce,pt.alloc()),l=i.x-c.x,u=i.y-c.y;pt.free(c),(c=l*l+u*u)<n&&(null!==(l=this.validPortsCache.H(r))?l&&(e=r,n=c):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,s,r)||!t&&this.isValidLink(s,r,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(r,!0),e=r,n=c):this.validPortsCache.add(r,!1))}}return null!==e&&(i=e.part)instanceof Ou&&(null===i.layer||i.layer.allowLink)?e:null},sn.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var i=e.fromMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.mq(e).count>=i)return!1}return!0},sn.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var i=e.toMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.xd(e).count>=i)return!1}return!0},sn.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},sn.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var i=t.part;if(!(i instanceof Ou))return!1;null===(t=t.portId)&&(t="");var n=e.part;if(!(n instanceof Ou))return!1;for(null===(e=e.portId)&&(e=""),e=n.xd(e);e.next();)if((n=e.value).fromNode===i&&n.fromPortId===t)return!0;return!1},sn.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(null===e||null===n||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==i&&this.isLabelDependentOnLink(i,this.originalLink))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.originalLink))return!1;if(null!==t){var o=t.linkValidation;if(null!==o&&!o(t,e,i,n,this.originalLink))return!1}return!(null!==i&&null!==(o=i.linkValidation)&&!o(t,e,i,n,this.originalLink))&&(null===(o=this.linkValidation)||o(t,e,i,n,this.originalLink))},sn.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var i=t.labeledLink;if(null===i)return!1;if(i===e)return!0;var n=new it;return n.add(t),cn(this,i,e,n)},sn.prototype.isValidCycle=function(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==gr){if(n===_r){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var o=n.value;if(o!==i&&o.isTreeLink&&o.toNode===e)return!1}return!ln(this,t,e,i,!0)}if(n===wr){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if((o=n.value)!==i&&o.isTreeLink&&o.fromNode===t)return!1;return!ln(this,t,e,i,!0)}if(n===mr)return t===e?t=!0:((n=new it).add(e),t=un(this,n,t,e,i)),!t;if(n===vr)return!ln(this,t,e,i,!1);if(n===br)return t===e?t=!0:((n=new it).add(e),t=dn(this,n,t,e,i)),!t}return!0},h.Object.defineProperties(sn.prototype,{portGravity:{get:function(){return this.Oh},set:function(t){0<=t&&(this.Oh=t)}},isUnconnectedLinkValid:{get:function(){return this.Ia},set:function(t){this.Ia=t}},linkingCursor:{get:function(){return this.fi},set:function(t){this.fi=t}},temporaryLink:{get:function(){return this.Gw},set:function(t){this.Gw=t}},temporaryFromNode:{get:function(){return this.Fw},set:function(t){(this.Fw=t)&&(this.l=t.port)}},temporaryFromPort:{get:function(){return this.l},set:function(t){if(null!==this.l){var e=this.l.panel;if(null!==e){var i=e.V.indexOf(this.l);e.Za(i),e.tb(i,t)}}this.l=t}},temporaryToNode:{get:function(){return this.Hw},set:function(t){(this.Hw=t)&&(this.u=t.port)}},temporaryToPort:{get:function(){return this.u},set:function(t){if(null!==this.u){var e=this.u.panel;if(null!==e){var i=e.V.indexOf(this.u);e.Za(i),e.tb(i,t)}}this.u=t}},originalLink:{get:function(){return this.Yc},set:function(t){this.Yc=t}},originalFromNode:{get:function(){return this.$a},set:function(t){this.$a=t}},originalFromPort:{get:function(){return this.Ic},set:function(t){this.Ic=t}},originalToNode:{get:function(){return this.Df},set:function(t){this.Df=t}},originalToPort:{get:function(){return this.Lh},set:function(t){this.Lh=t}},isForwards:{get:function(){return this.Ha},set:function(t){this.Ha=t}},validPortsCache:{get:function(){return this.xy}},targetPort:{get:function(){return this.Ew},set:function(t){this.Ew=t}},linkValidation:{get:function(){return this.xi},set:function(t){this.xi=t}},portTargeted:{get:function(){return this.Tq},set:function(t){this.Tq=t}}}),sn.className="LinkingBaseTool",d(hn,sn),hn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.xt()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},hn.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Ub(t.firstInput.documentPoint,null,null)),null===e||!(e.part instanceof Ou))return null;if((t=this.direction)===pn||t===fn){var i=this.findValidLinkablePort(e,!1);if(null!==i)return this.isForwards=!0,i}return t!==pn&&t!==gn||null===(e=this.findValidLinkablePort(e,!0))?null:(this.isForwards=!1,e)},hn.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null!==e&&(this.ua(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.v()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof Ou&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.v()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof Ou&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ta(),t.add(this.temporaryLink)),this.isActive=!0)},hn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Eg()},hn.prototype.doStop=function(){sn.prototype.doStop.call(this),this.startObject=null},hn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.transactionResult=null,i=null,n=null,o=null,a=null;try{var r=this.targetPort=this.findTargetPort(this.isForwards);if(null!==r){var s=r.part;s instanceof Ou&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,i=this.originalFromPort),n=s,o=r):(e=s,i=r,null!==this.originalToNode&&(n=this.originalToNode,o=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(n=this.originalToNode,o=this.originalToPort);null!==e||null!==n?null!==(a=this.insertLink(e,i,n,o))?(null===r&&(this.isForwards?a.defaultToPoint=t.lastInput.documentPoint:a.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),a.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",a)):(t.model.hq(),this.doNoLink(e,i,n,o)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),a&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},hn.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof id)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},hn.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},hn.prototype.doNoLink=function(){},h.Object.defineProperties(hn.prototype,{archetypeLinkData:{get:function(){return this.W},set:function(t){this.W=t}},archetypeLabelNodeData:{get:function(){return this.I},set:function(t){this.I=t}},direction:{get:function(){return this.J},set:function(t){this.J=t}},startObject:{get:function(){return this.Nm},set:function(t){this.Nm=t}}});var pn=new W(hn,"Either",0),fn=new W(hn,"ForwardsOnly",0),gn=new W(hn,"BackwardsOnly",0);function mn(){sn.call(this),this.name="Relinking";var t=new al;t.figure="Diamond",t.desiredSize=Pt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.W=t,(t=new al).figure="Diamond",t.desiredSize=Pt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Nm=t,this.I=null,this.ix=new Vt}function vn(t,e,i,n,o){null!==e?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==n?(t.copyPortProperties(n,o,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function bn(){Pi.call(this),this.name="LinkReshaping";var t=new al;t.figure="Rectangle",t.desiredSize=It,t.fill="lightblue",t.stroke="dodgerblue",this.u=t,(t=new al).figure="Diamond",t.desiredSize=Pt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.I=t,this.W=3,this.$t=this.l=null,this.jx=new pt,this.qs=new tt}function _n(t,e,i,n,o,a){return a?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-o.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-o.x)<t.resegmentingDistance}hn.className="LinkingTool",hn.Either=pn,hn.ForwardsOnly=fn,hn.BackwardsOnly=gn,d(mn,sn),mn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof id){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;null!==n&&t.canRelinkFrom()&&t.actualBounds.v()&&t.isVisible()&&n.actualBounds.v()&&n.yf()&&null===(i=t.fk(e))&&(i=this.makeAdornment(n,!1),t.zh(e,i))}null===i&&t.zf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(n=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.v()&&t.isVisible()&&n.actualBounds.v()&&n.yf()&&(null===(i=t.fk(e))?(i=this.makeAdornment(n,!0),t.zh(e,i)):i.o()),null===i&&t.zf(e)}},mn.prototype.makeAdornment=function(t,e){var i=new Mu;return i.type=Ic.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&i.add(e.copy()),i.adornedObject=t,i},mn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.xt()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},mn.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var i=e.part;if(!(i instanceof Mu&&i.adornedPart instanceof id))return;this.handle=e,this.isForwards=null===i||"RelinkTo"===i.category,this.originalLink=i.adornedPart}this.ua(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.ix.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Ct),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Ct),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ta(),t.add(this.temporaryLink)),this.isActive=!0},mn.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;i!==Pd&&i!==Id||(i=Cd),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},mn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Eg()},mn.prototype.doStop=function(){sn.prototype.doStop.call(this),this.handle=null},mn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,o=this.originalToPort,a=this.originalLink;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var r=this.targetPort.part;r instanceof Ou&&(this.isForwards?(n=r,o=this.targetPort):(e=r,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?o=n=null:i=e=null:a=null;null!==a?(this.reconnectLink(a,this.isForwards?n:e,this.isForwards?o:i,this.isForwards),null===this.targetPort&&(this.isForwards?a.defaultToPoint=t.lastInput.documentPoint:a.defaultFromPoint=t.lastInput.documentPoint,a.Ta()),t.allowSelect&&(a.isSelected=!0),this.transactionResult=this.name,t.R("LinkRelinked",a,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.uq(this.ix)}this.stopTool()},mn.prototype.reconnectLink=function(t,e,i,n){return i=null!==i&&null!==i.portId?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},mn.prototype.doNoRelink=function(){},h.Object.defineProperties(mn.prototype,{fromHandleArchetype:{get:function(){return this.W},set:function(t){this.W=t}},toHandleArchetype:{get:function(){return this.Nm},set:function(t){this.Nm=t}},handle:{get:function(){return this.I},set:function(t){if(null!==t&&!(t.part instanceof Mu))throw Error("new handle is not in an Adornment: "+t);this.I=t}}}),mn.className="RelinkingTool",L("linkingTool",function(){return this.findTool("Linking")},function(t){this.Va("Linking",t,this.mouseMoveTools)}),L("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Va("Relinking",t,this.mouseDownTools)}),d(bn,Pi),bn.prototype.Ev=function(t){return t&&t.xs&&0!==t.xs.value?t.xs:wn},bn.prototype.Hm=function(t,e){t.xs=e},bn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof id){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;null!==i&&t.canReshape()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.yf()&&(null===(e=t.fk(this.name))||e.ex!==t.pointsCount||e.tx!==t.resegmentable)&&null!==(e=this.makeAdornment(i))&&(e.ex=t.pointsCount,e.tx=t.resegmentable,t.zh(this.name,e))}null===e&&t.zf(this.name)}},bn.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,o=null;if(null!==e.points&&1<i){(o=new Mu).type=Ic.Link,i=e.firstPickIndex;var a=e.lastPickIndex,r=n?1:0;if(e.resegmentable&&e.computeCurve()!==Dd)for(var s=i+r;s<a-r;s++){var c=this.makeResegmentHandle(t,s);null!==c&&(c.segmentIndex=s,c.segmentFraction=.5,c.fromMaxLinks=999,o.add(c))}for(r=i+1;r<a;r++)if(null!==(s=this.makeHandle(t,r))){if(s.segmentIndex=r,r!==i)if(r===i+1&&n){c=e.i(i);var l=e.i(i+1);qe.A(c.x,l.x)&&qe.A(c.y,l.y)&&(l=e.i(i-1)),qe.A(c.x,l.x)?(this.Hm(s,kn),s.cursor="n-resize"):qe.A(c.y,l.y)&&(this.Hm(s,yn),s.cursor="w-resize")}else r===a-1&&n?(c=e.i(a-1),l=e.i(a),qe.A(c.x,l.x)&&qe.A(c.y,l.y)&&(c=e.i(a+1)),qe.A(c.x,l.x)?(this.Hm(s,kn),s.cursor="n-resize"):qe.A(c.y,l.y)&&(this.Hm(s,yn),s.cursor="w-resize")):r!==a&&(this.Hm(s,xn),s.cursor="move");o.add(s)}o.adornedObject=t}return o},bn.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},bn.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},bn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},bn.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof id){if(this.$t=e,t.isMouseCaptured=!0,this.ua(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.tb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.tb(this.handle.segmentIndex+1,n),e.points=i,e.Lb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.jx=e.i(this.handle.segmentIndex),this.qs=e.points.copy(),this.isActive=!0}}},bn.prototype.doDeactivate=function(){this.Eg(),this.$t=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},bn.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.qs),this.stopTool()},bn.prototype.getResegmentingPoint=function(){return this.handle.ga(ce)},bn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},bn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),o=e.i(i),a=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var r=e.i(i-2);if(Math.abs(n.x-o.x)<this.resegmentingDistance&&Math.abs(n.y-o.y)<this.resegmentingDistance&&(_n(this,r,n,o,a,!0)||_n(this,r,n,o,a,!1))){var s=e.points.copy();_n(this,r,n,o,a,!0)?(s.hd(i-2,new pt(r.x,(a.y+r.y)/2)),s.hd(i+1,new pt(a.x,(a.y+r.y)/2))):(s.hd(i-2,new pt((a.x+r.x)/2,r.y)),s.hd(i+1,new pt((a.x+r.x)/2,a.y))),s.Za(i),s.Za(i-1),e.points=s,e.Lb()}else r=e.i(i+2),Math.abs(o.x-a.x)<this.resegmentingDistance&&Math.abs(o.y-a.y)<this.resegmentingDistance&&(_n(this,n,o,a,r,!0)||_n(this,n,o,a,r,!1))&&(s=e.points.copy(),_n(this,n,o,a,r,!0)?(s.hd(i-1,new pt(n.x,(n.y+r.y)/2)),s.hd(i+2,new pt(r.x,(n.y+r.y)/2))):(s.hd(i-1,new pt((n.x+r.x)/2,n.y)),s.hd(i+2,new pt((n.x+r.x)/2,r.y))),s.Za(i+1),s.Za(i),e.points=s,e.Lb())}}else r=pt.alloc(),qe.Ih(n.x,n.y,a.x,a.y,o.x,o.y,r)&&r.Ce(o)<this.resegmentingDistance*this.resegmentingDistance&&((n=e.points.copy()).Za(i),e.points=n,e.Lb()),pt.free(r)}t.Na(),this.transactionResult=this.name,t.R("LinkReshaped",this.adornedLink,this.qs)}this.stopTool()},bn.prototype.reshape=function(t){var e=this.adornedLink;e.Kh();var i=this.handle.segmentIndex,n=this.Ev(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===kn?(e.K(i,e.i(i-1).x,t.y),e.K(i+1,e.i(i+2).x,t.y)):n===yn&&(e.K(i,t.x,e.i(i-1).y),e.K(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===kn?(e.K(i-1,e.i(i-2).x,t.y),e.K(i,e.i(i+1).x,t.y)):n===yn&&(e.K(i-1,t.x,e.i(i-2).y),e.K(i,t.x,e.i(i+1).y));else{var o=e.i(n=i),a=e.i(n-1),r=e.i(n+1);qe.A(a.x,o.x)&&qe.A(o.y,r.y)?(qe.A(a.x,e.i(n-2).x)&&!qe.A(a.y,e.i(n-2).y)?(e.m(n,t.x,a.y),i++,n++):e.K(n-1,t.x,a.y),qe.A(r.y,e.i(n+2).y)&&!qe.A(r.x,e.i(n+2).x)?e.m(n+1,r.x,t.y):e.K(n+1,r.x,t.y)):qe.A(a.y,o.y)&&qe.A(o.x,r.x)?(qe.A(a.y,e.i(n-2).y)&&!qe.A(a.x,e.i(n-2).x)?(e.m(n,a.x,t.y),i++,n++):e.K(n-1,a.x,t.y),qe.A(r.x,e.i(n+2).x)&&!qe.A(r.y,e.i(n+2).y)?e.m(n+1,t.x,r.y):e.K(n+1,t.x,r.y)):qe.A(a.x,o.x)&&qe.A(o.x,r.x)?(qe.A(a.x,e.i(n-2).x)&&!qe.A(a.y,e.i(n-2).y)?(e.m(n,t.x,a.y),i++,n++):e.K(n-1,t.x,a.y),qe.A(r.x,e.i(n+2).x)&&!qe.A(r.y,e.i(n+2).y)?e.m(n+1,t.x,r.y):e.K(n+1,t.x,r.y)):qe.A(a.y,o.y)&&qe.A(o.y,r.y)&&(qe.A(a.y,e.i(n-2).y)&&!qe.A(a.x,e.i(n-2).x)?(e.m(n,a.x,t.y),i++,n++):e.K(n-1,a.x,t.y),qe.A(r.y,e.i(n+2).y)&&!qe.A(r.x,e.i(n+2).x)?e.m(n+1,r.x,t.y):e.K(n+1,r.x,t.y)),e.K(i,t.x,t.y)}else e.K(i,t.x,t.y),o=e.fromPort,null!==(n=e.fromNode)&&null!==(a=n.findVisibleNode())&&a!==n&&(o=(n=a).port),1===i&&e.computeSpot(!0,o).jc()&&(a=o.ga(ce,pt.alloc()),n=e.getLinkPointFromPoint(n,o,a,t,!0,pt.alloc()),e.K(0,n.x,n.y),pt.free(a),pt.free(n)),o=e.toPort,null!==(n=e.toNode)&&null!==(a=n.findVisibleNode())&&a!==n&&(o=(n=a).port),i===e.pointsCount-2&&e.computeSpot(!1,o).jc()&&(i=o.ga(ce,pt.alloc()),t=e.getLinkPointFromPoint(n,o,i,t,!1,pt.alloc()),e.K(e.pointsCount-1,t.x,t.y),pt.free(i),pt.free(t));e.rf()},bn.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Ev(this.handle)){case xn:return t;case kn:return new pt(e.i(i).x,t.y);case yn:return new pt(t.x,e.i(i).y);default:case wn:return e.i(i)}},h.Object.defineProperties(bn.prototype,{handleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},midHandleArchetype:{get:function(){return this.I},set:function(t){this.I=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Mu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedLink:{get:function(){return this.$t}},resegmentingDistance:{get:function(){return this.W},set:function(t){this.W=t}},originalPoint:{get:function(){return this.jx}},originalPoints:{get:function(){return this.qs}}}),bn.prototype.setReshapingBehavior=bn.prototype.Hm,bn.prototype.getReshapingBehavior=bn.prototype.Ev;var wn=new W(bn,"None",0),yn=new W(bn,"Horizontal",1),kn=new W(bn,"Vertical",2),xn=new W(bn,"All",3);function Sn(){Pi.call(this),this.name="Resizing",this.bg=new Lt(1,1).freeze(),this.ag=new Lt(9999,9999).freeze(),this.Kg=new Lt(NaN,NaN).freeze(),this.I=!1,this.ce=null;var t=new al;t.alignmentFocus=ce,t.figure="Rectangle",t.desiredSize=It,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.u=t,this.l=null,this.ps=new pt,this.hx=new Lt,this.Yo=new pt,this.qu=new Lt(0,0),this.pu=new Lt(1/0,1/0),this.ou=new Lt(1,1),this.bx=!0}function Tn(){Pi.call(this),this.name="Rotating",this.Ia=45,this.Ha=2,this.Yo=new pt,this.ce=null;var t=new al;t.figure="Ellipse",t.desiredSize=Pt,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.u=t,this.l=null,this.gx=0,this.Qu=new pt(NaN,NaN),this.I=0,this.W=50}function Cn(){Pi.call(this),this.name="ClickSelecting"}function Dn(){Pi.call(this),this.name="Action",this.Bk=null}function In(){Pi.call(this),this.name="ClickCreating",this.ij=null,this.u=!0,this.l=!1,this.Ww=new pt(0,0)}function Pn(){Pi.call(this),this.name="DragSelecting",this.Vk=175,this.u=!1;var t=new su;t.layerName="Tool",t.selectable=!1;var e=new al;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.l=t}function Mn(){Pi.call(this),this.name="Panning",this.Nu=new pt,this.Fy=new pt,this.Jg=!1;var t=this;this.mx=function(){var e=t.diagram;null!==e&&e.removeEventListener(f.document,"scroll",t.mx,!1),t.stopTool()}}function On(){this.W=this.I=this.l=this.u=null}function $n(t,e,i){this.text=t,this.Cx=e,this.visible=i}function jn(){Pi.call(this),this.name="ContextMenu",this.u=this.fu=this.l=null,this.ax=new pt,this.gu=null,this.Au=!1;var t=this;this.$u=function(){t.stopTool()}}function Ln(t){return t.preventDefault(),!1}function En(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(null!==i){if(!(i instanceof On)){var n=e.Ub(e.lastInput.documentPoint,null,null);null!==n&&n.Ag(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(Nn(t,!0),t.isActive||t.stopTool())}function Nn(t,e,i){if(void 0===i&&(i=null),!t.Au&&(t.Au=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Au=!1,!e))if(t.isActive=!0,e=An,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var n=i.contextMenu;null!==n?(t.currentObject=i instanceof qr?i:null,t.showContextMenu(n,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null)}bn.className="LinkReshapingTool",bn.None=wn,bn.Horizontal=yn,bn.Vertical=kn,bn.All=xn,L("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Va("LinkReshaping",t,this.mouseDownTools)}),d(Sn,Pi),Sn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof id)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.fk(this.name);if(null!==e&&t.canResize()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.yf()&&(null!==i&&i.adornedObject===e||(i=this.makeAdornment(e)),null!==i))return e=e.Xi(),ku(t)&&this.updateResizeHandles(i,e),void t.zh(this.name,i)}t.zf(this.name)}},Sn.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Mu).type=Ic.Spot,e.locationSpot=ce;var i=new ed;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,oe)),e.add(this.makeHandle(t,re)),e.add(this.makeHandle(t,he)),e.add(this.makeHandle(t,ue)),e.add(this.makeHandle(t,je)),e.add(this.makeHandle(t,Ee)),e.add(this.makeHandle(t,Ne)),e.add(this.makeHandle(t,Le))}else if(Hc(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Sn.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},Sn.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Mb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.jc()&&(i=ce),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else{if(!(1<=i.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof Ic)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},Sn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Sn.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(this.ps.set(this.adornedObject.ga(this.handle.alignment.Tv())),this.Yo.set(this.adornedObject.part.location),this.hx.set(this.adornedObject.desiredSize),this.ou=this.computeCellSize(),this.qu=this.computeMinSize(),this.pu=this.computeMaxSize(),t.isMouseCaptured=!0,this.bx=t.animationManager.isEnabled,t.animationManager.isEnabled=!1,this.ua(this.name),this.isActive=!0))},Sn.prototype.doDeactivate=function(){var t=this.diagram;this.Eg(),this.ce=this.handle=null,this.isActive=t.isMouseCaptured=!1,t.animationManager.isEnabled=this.bx},Sn.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},Sn.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.qu,i=this.pu,n=this.ou,o=this.adornedObject.qt(t.lastInput.documentPoint,pt.alloc()),a=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,i,n,a),this.resize(e),t.Wc(),pt.free(o)}},Sn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.qu,i=this.pu,n=this.ou,o=this.adornedObject.qt(t.lastInput.documentPoint,pt.alloc()),a=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,i,n,a),this.resize(e),pt.free(o),t.Na(),this.transactionResult=this.name,t.R("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},Sn.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(null!==i){if(i.desiredSize=t.size,(t=i.part).zb(),i=i.ga(this.handle.alignment.Tv()),t instanceof Ku){var n=new tt;n.add(t),e.moveParts(n,this.oppositePoint.copy().ae(i),!0)}else t.location=t.location.copy().ae(i).add(this.oppositePoint);e.Wc()}},Sn.prototype.computeResize=function(t,e,i,n,o,a){e.jc()&&(e=ce);var r=this.adornedObject.naturalBounds,s=r.x,c=r.y,l=r.x+r.width,u=r.y+r.height,d=1;if(!a){var h=r.height;0>=(d=r.width)&&(d=1),0>=h&&(h=1),d=h/d}return h=pt.alloc(),qe.nq(t.x,t.y,s,c,o.width,o.height,h),t=r.copy(),0>=e.x?0>=e.y?(t.x=Math.max(h.x,l-n.width),t.x=Math.min(t.x,l-i.width),t.width=Math.max(l-t.x,i.width),t.y=Math.max(h.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=l-t.width,t.y=u-t.height)):1<=e.y?(t.x=Math.max(h.x,l-n.width),t.x=Math.min(t.x,l-i.width),t.width=Math.max(l-t.x,i.width),t.height=Math.max(Math.min(h.y-c,n.height),i.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=l-t.width)):(t.x=Math.max(h.x,l-n.width),t.x=Math.min(t.x,l-i.width),t.width=l-t.x,a||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=c+.5*(u-c-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(h.x-s,n.width),i.width),t.y=Math.max(h.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.y=u-t.height)):1<=e.y?(t.width=Math.max(Math.min(h.x-s,n.width),i.width),t.height=Math.max(Math.min(h.y-c,n.height),i.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width))):(t.width=Math.max(Math.min(h.x-s,n.width),i.width),a||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=c+.5*(u-c-t.height))):0>=e.y?(t.y=Math.max(h.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=u-t.y,a||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=s+.5*(l-s-t.width))):1<=e.y&&(t.height=Math.max(Math.min(h.y-c,n.height),i.height),a||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=s+.5*(l-s-t.width))),pt.free(h),t},Sn.prototype.computeReshape=function(){var t=Ka;return this.adornedObject instanceof al&&(t=sl(this.adornedObject)),!(t===Za||this.diagram.lastInput.shift)},Sn.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Sn.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Sn.prototype.computeCellSize=function(){var t=new Lt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},h.Object.defineProperties(Sn.prototype,{handleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Mu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ce},set:function(t){if(null!==t&&t.part instanceof Mu)throw Error("new handle must not be in an Adornment: "+t);this.ce=t}},minSize:{get:function(){return this.bg},set:function(t){if(!this.bg.w(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.bg.h(e,t)}}},maxSize:{get:function(){return this.ag},set:function(t){if(!this.ag.w(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.ag.h(e,t)}}},cellSize:{get:function(){return this.Kg},set:function(t){this.Kg.w(t)||this.Kg.assign(t)}},isGridSnapEnabled:{get:function(){return this.I},set:function(t){this.I=t}},oppositePoint:{get:function(){return this.ps},set:function(t){this.ps.w(t)||this.ps.assign(t)}},originalDesiredSize:{get:function(){return this.hx}},originalLocation:{get:function(){return this.Yo}}}),Sn.className="ResizingTool",L("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Va("Resizing",t,this.mouseDownTools)}),d(Tn,Pi),Tn.prototype.updateAdornments=function(t){if(null!==t){if(t.Hh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.yf()){var i=t.fk(this.name);if(null!==i&&i.adornedObject===e||(i=this.makeAdornment(e)),null!==i)return i.angle=e.Xi(),null===i.placeholder&&(i.location=this.computeAdornmentLocation(e)),void t.zh(this.name,i)}t.zf(this.name)}},Tn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Mu).type=Ic.Position,e.locationSpot=ce;var i=this.handleArchetype;null!==i&&e.add(i.copy())}else if(Hc(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Tn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Tn.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(this.gx=this.adornedObject.angle,this.Qu=this.computeRotationPoint(this.adornedObject),this.Yo=this.adornedObject.part.location.copy(),t.isMouseCaptured=!0,t.delaysLayout=!0,this.ua(this.name),this.isActive=!0)},Tn.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.fb()?t.ga(e.rotationSpot):t===e||t===i?i.ga(e.locationSpot):t.ga(ce)},Tn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.v()||(e=this.computeRotationPoint(t)),e=t.qt(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return 0===i?e.x=t.naturalBounds.width+n:45===i?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):90===i?e.y=t.naturalBounds.height+n:135===i?(e.x=-n,e.y=t.naturalBounds.height+n):180===i?e.x=-n:225===i?(e.x=-n,e.y=-n):270===i?e.y=-n:315===i&&(e.x=t.naturalBounds.width+n,e.y=-n),t.ga(e)},Tn.prototype.doDeactivate=function(){var t=this.diagram;this.Eg(),this.ce=this.handle=null,this.Qu=new pt(NaN,NaN),this.isActive=t.isMouseCaptured=!1},Tn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},Tn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},Tn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Na(),this.transactionResult=this.name,t.R("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},Tn.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).zb();var i=e.locationObject,n=e.rotateObject;(i===n||i.Ag(n))&&(i=this.Yo.copy(),e.location=i.ae(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.Wc()}},Tn.prototype.computeRotate=function(t){t=this.rotationPoint.Sa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.Xi()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},h.Object.defineProperties(Tn.prototype,{handleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof Mu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ce},set:function(t){if(null!==t&&t.part instanceof Mu)throw Error("new handle must not be in an Adornment: "+t);this.ce=t}},snapAngleMultiple:{get:function(){return this.Ia},set:function(t){this.Ia=t}},snapAngleEpsilon:{get:function(){return this.Ha},set:function(t){this.Ha=t}},originalAngle:{get:function(){return this.gx}},rotationPoint:{get:function(){return this.Qu}},handleAngle:{get:function(){return this.I},set:function(t){this.I=t}},handleDistance:{get:function(){return this.W},set:function(t){this.W=t}}}),Tn.className="RotatingTool",L("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Va("Rotating",t,this.mouseDownTools)}),d(Cn,Pi),Cn.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Cn.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Cn.className="ClickSelectingTool",d(Dn,Pi),Dn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.Ub(e.documentPoint,function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t});return null!==i&&!!i.isActionable&&(this.Bk=i,t.mj=t.Ub(e.documentPoint,null,null),!0)},Dn.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Bk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Dn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Bk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},Dn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Bk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(t){for(;null!==t.panel&&(!t.isActionable||t!==e);)t=t.panel;return t},function(t){return t===e})}this.stopTool()},Dn.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Bk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},Dn.prototype.doStop=function(){this.Bk=null},Dn.className="ActionTool",d(In,Pi),In.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.Ww=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.Ww))return!1}else if(1!==t.lastInput.clickCount)return!1;return t.currentTool===this||null===t.im(t.lastInput.documentPoint,!0)},In.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},In.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(null===i)return null;var n=null;try{if(e.R("ChangingSelection",e.selection),this.ua(this.name),i instanceof su)i.Wb()&&(Hc(i),null!==(n=i.copy())&&e.add(n));else if(null!==i){var o=e.model.copyNodeData(i);S(o)&&(e.model.pf(o),n=e.wc(o))}if(null!==n){var a=pt.allocAt(t.x,t.y);this.isGridSnapEnabled&&ya(this.diagram,n,t,a),n.location=a,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),pt.free(a)}e.Na(),this.transactionResult=this.name,e.R("PartCreated",n)}finally{this.Eg(),e.R("ChangedSelection",e.selection)}return n},h.Object.defineProperties(In.prototype,{archetypeNodeData:{get:function(){return this.ij},set:function(t){this.ij=t}},isDoubleClick:{get:function(){return this.u},set:function(t){this.u=t}},isGridSnapEnabled:{get:function(){return this.l},set:function(t){this.l=t}}}),In.className="ClickCreatingTool",d(Pn,Pi),Pn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.im(e.documentPoint,!0)))},Pn.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Pn.prototype.doDeactivate=function(){var t=this.diagram;t.Bf(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Pn.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),i=this.box.Xa("SHAPE");null===i&&(i=this.box.Ab());var n=Lt.alloc().h(e.width,e.height);e=pt.allocAt(e.x,e.y),i.desiredSize=n,this.box.position=e,Lt.free(n),pt.free(e),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.it(t.lastInput.viewPoint)}},Pn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Pn.prototype.computeBoxBounds=function(){var t=this.diagram;return new Vt(t.firstInput.documentPoint,t.lastInput.documentPoint)},Pn.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.Ox(t,this.isPartialInclusion),B?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(i=new tt,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},h.Object.defineProperties(Pn.prototype,{delay:{get:function(){return this.Vk},set:function(t){this.Vk=t}},isPartialInclusion:{get:function(){return this.u},set:function(t){this.u=t}},box:{get:function(){return this.l},set:function(t){this.l=t}}}),Pn.className="DragSelectingTool",d(Mn,Pi),Mn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Mn.prototype.doActivate=function(){var t=this.diagram;this.Jg?(t.lastInput.bubbles=!0,t.addEventListener(f.document,"scroll",this.mx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Nu.assign(t.position)),this.isActive=!0},Mn.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Mn.prototype.doCancel=function(){var t=this.diagram;t.position=this.Nu,t.isMouseCaptured=!1,this.stopTool()},Mn.prototype.doMouseMove=function(){this.move()},Mn.prototype.doMouseUp=function(){this.move(),this.stopTool()},Mn.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.Jg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,o=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(o=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.Fy.h(o,i)}},h.Object.defineProperties(Mn.prototype,{bubbles:{get:function(){return this.Jg},set:function(t){this.Jg=t}},originalPosition:{get:function(){return this.Nu}}}),Mn.className="PanningTool",L("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Va("ClickCreating",t,this.mouseUpTools)}),L("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Va("ClickSelecting",t,this.mouseUpTools)}),L("panningTool",function(){return this.findTool("Panning")},function(t){this.Va("Panning",t,this.mouseMoveTools)}),L("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Va("DragSelecting",t,this.mouseMoveTools)}),L("actionTool",function(){return this.findTool("Action")},function(t){this.Va("Action",t,this.mouseDownTools)}),h.Object.defineProperties(On.prototype,{mainElement:{get:function(){return this.I},set:function(t){this.I=t}},show:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},hide:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},valueFunction:{get:function(){return this.W},set:function(t){this.W=t}}}),On.className="HTMLInfo",$n.className="ContextMenuButtonInfo",d(jn,Pi),jn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},jn.prototype.doStart=function(){this.ax.set(this.diagram.firstInput.documentPoint)},jn.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},jn.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,i=null;if(t instanceof Eo||(i=t instanceof qr?t:e.Ub(e.lastInput.documentPoint,null,function(t){return!t.layer.isTemporary})),null!==i){for(t=i;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(null!==e.contextMenu)return e;return null},jn.prototype.doActivate=function(){},jn.prototype.doMouseDown=function(){if(Pi.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Mu){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&En(this)},jn.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Mu){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}En(this)},jn.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},jn.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Mu){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.zb(),this.positionContextMenu(t,e)}else t instanceof On&&t.show(e,i,this);this.currentContextMenu=t},jn.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,o=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5/e.scale),i.x<o.x&&(i.x=o.x),i.y+n.height>o.bottom&&(i.y-=n.height+5/e.scale),i.y<o.y&&(i.y=o.y),t.position=i}},jn.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Mu?(t.remove(e),null!==this.fu&&this.fu.zf(e.category),e.data=null,e.adornedObject=null):e instanceof On&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},jn.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.gu&&(this.gu=function(t){var e=new tt;return e.add(new $n("Copy",function(t){t.commandHandler.copySelection()},function(t){return t.commandHandler.canCopySelection()})),e.add(new $n("Cut",function(t){t.commandHandler.cutSelection()},function(t){return t.commandHandler.canCutSelection()})),e.add(new $n("Delete",function(t){t.commandHandler.deleteSelection()},function(t){return t.commandHandler.canDeleteSelection()})),e.add(new $n("Paste",function(e){e.commandHandler.pasteSelection(t.mouseDownPoint)},function(e){return e.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new $n("Select All",function(t){t.commandHandler.selectAll()},function(t){return t.commandHandler.canSelectAll()})),e.add(new $n("Undo",function(t){t.commandHandler.undo()},function(t){return t.commandHandler.canUndo()})),e.add(new $n("Redo",function(t){t.commandHandler.redo()},function(t){return t.commandHandler.canRedo()})),e.add(new $n("Scroll To Part",function(t){t.commandHandler.scrollToPart()},function(t){return t.commandHandler.canScrollToPart()})),e.add(new $n("Zoom To Fit",function(t){t.commandHandler.zoomToFit()},function(t){return t.commandHandler.canZoomToFit()})),e.add(new $n("Reset Zoom",function(t){t.commandHandler.resetZoom()},function(t){return t.commandHandler.canResetZoom()})),e.add(new $n("Group Selection",function(t){t.commandHandler.groupSelection()},function(t){return t.commandHandler.canGroupSelection()})),e.add(new $n("Ungroup Selection",function(t){t.commandHandler.ungroupSelection()},function(t){return t.commandHandler.canUngroupSelection()})),e.add(new $n("Edit Text",function(t){t.commandHandler.editTextBlock()},function(t){return t.commandHandler.canEditTextBlock()})),e}(this)),Fn.innerHTML="",zn.addEventListener("click",this.$u,!1);var e=this,i=b("ul");i.className="goCXul",Fn.appendChild(i),i.innerHTML="";for(var n=this.gu.iterator;n.next();){var o=n.value,a=o.visible;if("function"==typeof o.Cx&&("function"!=typeof a||a(t))){(a=b("li")).className="goCXli";var r=b("a");r.className="goCXa",r.href="#",r.zy=o.Cx,r.addEventListener("click",function(i){return this.zy(t),e.stopTool(),i.preventDefault(),!1},!1),r.textContent=o.text,a.appendChild(r),i.appendChild(a)}}Fn.style.display="block",zn.style.display="block"},jn.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===An){Fn.style.display="none",zn.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(zn,"click",this.$u,!1),this.currentContextMenu=null}},h.Object.defineProperties(jn.prototype,{currentContextMenu:{get:function(){return this.l},set:function(t){this.l=t,this.fu=t instanceof Mu?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Vn&&null===An&&lr&&function(t){var e=new On;e.show=function(t,e,i){i.showDefaultContextMenu()},e.hide=function(t,e){e.hideDefaultContextMenu()},An=e,t.$u=function(){t.stopTool()},e=b("div");var i=b("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=b("style");f.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(n=t.diagram)&&(n.addEventListener(e,"contextmenu",Ln,!1),n.addEventListener(e,"selectstart",Ln,!1),n.addEventListener(i,"contextmenu",Ln,!1)),e.className="goCXforeground",i.className="goCXbackground",f.document.body&&(f.document.body.appendChild(e),f.document.body.appendChild(i)),Fn=e,zn=i,Vn=!0}(this),An},set:function(t){null===t&&(Vn=!0),An=t}},currentObject:{get:function(){return this.u},set:function(t){this.u=t}},mouseDownPoint:{get:function(){return this.ax}}});var An=null,Vn=!1,zn=null,Fn=null;function Bn(){Pi.call(this),this.name="TextEditing",this.sh=new gl,this.Ia=null,this.Ha=Xn,this.Ji=null,this.ia=Kn,this.I=1,this.W=!0,this.u=null,this.l=new On,this.ku=null,function(t,e){if(lr){var i=b("textarea");t.ku=i,i.addEventListener("input",function(){if(null!==t.textBlock){var e=t.Yx(this.value);this.style.width=20+e.measuredBounds.width*this.BA+"px",this.rows=e.lineCount}},!1),i.addEventListener("keydown",function(e){if(null!==t.textBlock){var i=e.which;13===i?(!1===t.textBlock.isMultiline&&e.preventDefault(),t.acceptText(Wn)):9===i?(t.acceptText(Hn),e.preventDefault()):27===i&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==Kn){var e=t.ku;t.ia===Zn&&(t.ia=Jn),"function"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==Kn){var e=t.ku;"function"==typeof e.focus&&e.focus(),"function"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(t,e,n){if(t instanceof gl&&n instanceof Bn)if(n.state===to)i.style.border="3px solid red",i.focus();else{var o=t.ga(ce),a=e.position,r=e.scale,s=t.uf()*r;s<n.minimumEditorScale&&(s=n.minimumEditorScale);var c=t.naturalBounds.width*s+6,l=t.naturalBounds.height*s+2,u=(o.x-a.x)*r;o=(o.y-a.y)*r,i.value=t.text,e.div.style.font=t.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*s+"%",i.style.lineHeight="normal",i.style.width=c+"px",i.style.left=(u-c/2|0)-1+"px",i.style.top=(o-l/2|0)-1+"px",i.style.textAlign=t.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=t.lineCount,i.BA=s,i.className="goTXarea",e.div.appendChild(i),i.focus(),n.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(t){t.div.removeChild(i)}}}(this,this.l)}function Rn(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(null!==e&&null!==n){var o=e.text,a="";if(null!==n.valueFunction&&(a=n.valueFunction()),t.isValidText(e,o,a))t.ua(t.name),t.ia=eo,t.transactionResult=t.name,e.text=a,null!==(n=t.textBlock).textEdited&&n.textEdited(n,o,a),null!==i&&i.R("TextEdited",e,o),t.Eg(),t.stopTool(),null!==i&&i.doFocus();else{t.ia=to;var r=t.textBlock;null!==r.errorFunction&&r.errorFunction(t,o,a),n.show(e,i,t)}}}jn.className="ContextMenuTool",L("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Va("ContextMenu",t,this.mouseUpTools)}),d(Bn,Pi),Bn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||io&&io!==this&&(io.acceptText(Gn),io&&io!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Ub(t.lastInput.documentPoint);return!!(null!==e&&e instanceof gl&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===Xn&&!e.isSelected||this.starting===Yn&&2>t.lastInput.clickCount)},Bn.prototype.doStart=function(){io=this,null!==this.textBlock&&this.doActivate()},Bn.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Ub(t.lastInput.documentPoint)),null!==e&&e instanceof gl&&(this.textBlock=e,null!==e.part)){this.isActive=!0,this.ia=Zn;var i=this.defaultTextEditor;null!==e.textEditor&&(i=e.textEditor),this.sh=this.textBlock.copy();var n=new Vt(this.textBlock.ga(oe),this.textBlock.ga(he));t.gw(n),i.show(e,t,this),this.currentTextEditor=i}}}},Bn.prototype.doCancel=function(){this.stopTool()},Bn.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Bn.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Gn)},Bn.prototype.acceptText=function(t){switch(t){case Gn:this.ia===eo?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():this.ia!==Zn&&this.ia!==to&&this.ia!==Jn||(this.ia=Qn,Rn(this));break;case Un:case Wn:case Hn:Wn===t&&!0===this.textBlock.isMultiline||this.ia!==Zn&&this.ia!==to&&this.ia!==Jn||(this.ia=Qn,Rn(this))}},Bn.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ia=Kn,this.textBlock=null,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.isActive=!1)},Bn.prototype.doStop=function(){io=null},Bn.prototype.isValidText=function(t,e,i){var n=this.textValidation;return!(null!==n&&!n(t,e,i)||null!==(n=t.textValidation)&&!n(t,e,i))},Bn.prototype.Yx=function(t){var e=this.sh;return e.text=t,e.measure(this.textBlock.ti,1/0),e},h.Object.defineProperties(Bn.prototype,{textBlock:{get:function(){return this.Ia},set:function(t){this.Ia=t}},currentTextEditor:{get:function(){return this.u},set:function(t){this.u=t}},defaultTextEditor:{get:function(){return this.l},set:function(t){this.l=t}},starting:{get:function(){return this.Ha},set:function(t){this.Ha=t}},textValidation:{get:function(){return this.Ji},set:function(t){this.Ji=t}},minimumEditorScale:{get:function(){return this.I},set:function(t){this.I=t}},selectsTextOnActivate:{get:function(){return this.W},set:function(t){this.W=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),Bn.prototype.measureTemporaryTextBlock=Bn.prototype.Yx;var Un=new W(Bn,"LostFocus",0),Gn=new W(Bn,"MouseDown",1),Hn=new W(Bn,"Tab",2),Wn=new W(Bn,"Enter",3),qn=new W(Bn,"SingleClick",0),Xn=new W(Bn,"SingleClickSelected",1),Yn=new W(Bn,"DoubleClick",2),Kn=new W(Bn,"StateNone",0),Zn=new W(Bn,"StateActive",1),Jn=new W(Bn,"StateEditing",2),Qn=new W(Bn,"StateValidating",3),to=new W(Bn,"StateInvalid",4),eo=new W(Bn,"StateValidated",5),io=null;function no(){go||(po(),go=!0),this.B=ar,this.fl=this.Ze=this.qc=this.Ur=this.hc=!1,this.sx=!0,this.gl=mo,this.bn=!1,this.oi=this.Mc=!0,this.Rg=600,this.Ow=this.qx=!1,this.Ke=new it,this.Cd=new _o,this.Cd.Jc=this,this.Ck=new it,this.Xu=new it,this.Us=new it}function oo(t,e){ao(t,e)&&(t.Ze=!0)}function ao(t,e){return!(!t.Mc||!t.canStart(e))&&(t.Ke.add(e),t.defaultAnimation.isAnimating&&t.Xc(),t.qc=!0)}function ro(t){if(t.Mc&&t.qc){var e=t.Cd,i=t.B,n=t.Ke.contains("Model");n&&(t.fl=!0,t.gl===mo?(e.isViewportUnconstrained=!0,e.pc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.gl===bo&&e.pc.clear(),t.sx=!(t.gl!==vo||!i.Bs.w(i.ma)),i.R("InitialAnimationStarting",t)),n&&!t.oi||0===e.pc.count?(t.Ke.clear(),t.qc=!1,t.Ze=!1,e.pc.clear(),wo(e),t.fl=!1,i.M()):(t.Ke.clear(),i.ye=!1,f.requestAnimationFrame(function(){!1===t.qc||e.hc||(i.De("temporaryPixelRatio")&&zo(i),Bo(i),t.qc=!1,t.Ze=!1,e.start(),co(t),i.Na(),So(e,0),ra(i,!0),lo(t),i.R("AnimationStarting",t))}))}}function so(t,e,i,n){e instanceof id&&(null!==e.fromNode||null!==e.toNode)||t.Cd.add(e,"position",i,n,!1)}function co(t){if(!t.Ur){var e=t.B;t.qx=e.skipsUndoManager,t.Ow=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Ur=!0}}function lo(t){var e=t.B;e.skipsUndoManager=t.qx,e.skipsModelSourceBindings=t.Ow,t.Ur=!1}function uo(t,e,i){t.Ze&&!e.w(i)&&(t.B.kk||(e=i.copy()),yo(t.Cd,t.B,"position",e,i))}function ho(t,e,i,n,o){null===t&&(t="rgba(0,0,0,0)"),null===e&&(e="rgba(0,0,0,0)"),Gs(t),Hs();var a=lc.l,r=lc.I,s=lc.u;t=lc.W,Gs(e),Hs();var c=lc.I,l=lc.u;return e=lc.W,"hsla("+(a=o(i,a,lc.l-a,n))+", "+(r=o(i,r,c-r,n))+"%, "+(s=o(i,s,l-s,n))+"%, "+(i=o(i,t,e-t,n))+")"}function po(){var t=new ht;t.add("position:diagram",function(t,e,i,n,o,a){t.position=new pt(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a))}),t.add("position",function(t,e,i,n,o,a){o<a?t.Lq(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a),!1):t.position=new pt(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a))}),t.add("location",function(t,e,i,n,o,a){o<a?t.Lq(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a),!0):t.location=new pt(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a))}),t.add("position:placeholder",function(t,e,i,n,o,a){o<a?t.Lq(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a),!1):t.position=new pt(n(o,e.x,i.x-e.x,a),n(o,e.y,i.y-e.y,a))}),t.add("position:node",function(t,e,i,n,o,a){var r=t.actualBounds,s=i.actualBounds;i=s.x+s.width/2-r.width/2,r=s.y+s.height/2-r.height/2,o<a?t.Lq(n(o,e.x,i-e.x,a),n(o,e.y,r-e.y,a),!1):t.position=new pt(n(o,e.x,i-e.x,a),n(o,e.y,r-e.y,a))}),t.add("desiredSize",function(t,e,i,n,o,a){t.desiredSize=new Vt(n(o,e.width,i.width-e.width,a),n(o,e.height,i.height-e.height,a))}),t.add("width",function(t,e,i,n,o,a){t.width=n(o,e,i-e,a)}),t.add("height",function(t,e,i,n,o,a){t.height=n(o,e,i-e,a)}),t.add("fill",function(t,e,i,n,o,a){t.fill=ho(e,i,o,a,n)}),t.add("stroke",function(t,e,i,n,o,a){t.stroke=ho(e,i,o,a,n)}),t.add("strokeWidth",function(t,e,i,n,o,a){t.strokeWidth=n(o,e,i-e,a)}),t.add("strokeDashOffset",function(t,e,i,n,o,a){t.strokeDashOffset=n(o,e,i-e,a)}),t.add("background",function(t,e,i,n,o,a){t.background=ho(e,i,o,a,n)}),t.add("areaBackground",function(t,e,i,n,o,a){t.areaBackground=ho(e,i,o,a,n)}),t.add("opacity",function(t,e,i,n,o,a){t.opacity=n(o,e,i-e,a)}),t.add("scale",function(t,e,i,n,o,a){t.scale=n(o,e,i-e,a)}),t.add("angle",function(t,e,i,n,o,a){t.angle=n(o,e,i-e,a)}),fo=t}Bn.className="TextEditingTool",Bn.LostFocus=Un,Bn.MouseDown=Gn,Bn.Tab=Hn,Bn.Enter=Wn,Bn.SingleClick=qn,Bn.SingleClickSelected=Xn,Bn.DoubleClick=Yn,Bn.StateNone=Kn,Bn.StateActive=Zn,Bn.StateEditing=Jn,Bn.StateValidating=Qn,Bn.StateInvalid=to,Bn.StateValidated=eo,L("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Va("TextEditing",t,this.mouseUpTools)}),no.prototype.$d=function(t){this.B=t},no.prototype.canStart=function(){return!0},(i=no.prototype).Ft=function(t){return this.Cd.Ft(t)},i.Kv=function(t){return this.Cd.Kv(t)},i.Xc=function(t){var e=this.Cd;if(!0===this.qc&&(this.fl=this.Ze=this.qc=!1,this.Ke.clear(),0<e.pc.count&&this.B.Pb()),this.hc&&this.Mc){if(e.fm(!0),e.pc.clear(),wo(e),!0===t)for(t=this.Ck.na(),e=0;e<t.length;e++)t[e].fm(!0)}else e.pc.clear(),wo(e)},i.fm=function(t){t===this.defaultAnimation&&this.defaultAnimation.pc.clear(),this.Ck.remove(t),0===this.Ck.count&&(this.hc=!1,this.B.Pb()),t===this.defaultAnimation&&(this.defaultAnimation.pc.clear(),this.B.R("AnimationFinished",this))},i.Vj=function(t,e){this.Ze&&(this.Ke.contains("Expand Tree")||this.Ke.contains("Expand SubGraph"))&&this.Cd.Vj(t,e)},i.Tj=function(t,e){this.Ze&&(this.Ke.contains("Collapse Tree")||this.Ke.contains("Collapse SubGraph"))&&(this.Cd.Tj(t,e),yo(this.Cd,e,"position",e.position,e.position))},h.Object.defineProperties(no.prototype,{animationReasons:{get:function(){return this.Ke}},isEnabled:{get:function(){return this.Mc},set:function(t){this.Mc=t}},duration:{get:function(){return this.Rg},set:function(t){1>t&&y(t,">= 1",no,"duration"),this.Rg=t}},isAnimating:{get:function(){return this.hc}},isTicking:{get:function(){return this.Ur}},isInitial:{get:function(){return this.oi},set:function(t){this.oi=t}},defaultAnimation:{get:function(){return this.Cd}},activeAnimations:{get:function(){return this.Ck}},initialAnimationStyle:{get:function(){return this.gl},set:function(t){this.gl=t}}}),no.prototype.stopAnimation=no.prototype.Xc;var fo=null,go=!1,mo=new W(no,"Default",1),vo=new W(no,"AnimateLocations",2),bo=new W(no,"None",3);function _o(){this.av=this.px=this.Jc=this.B=null,this.ol=this.hc=this.l=!1,this.Hn=this.ud=0,this.pr=this.nu=To,this.nl=this.mp=!1,this.Ru=1,this.Pu=0,this.nd=this.Rg=NaN,this.Rw=0,this.In=null,this.u=yt,this.pc=new ht,this.Lu=new ht,this.Wl=new it,this.Mu=new it,this.Pw=yr}function wo(t){t.Lu.clear(),t.nl=!1,t.Pu=0,t.nd=NaN,0<t.Wl.count&&t.Wl.clear(),0<t.Mu.count&&t.Mu.clear()}function yo(t,e,i,n,o,a){var r=t.pc;if(e instanceof Eo&&"position"===i&&(i="position:diagram"),r.contains(e)){var s=r.H(e),c=s.start,l=s.end;void 0===c[i]&&(c[i]=ko(n)),l[i]=ko(o)}else l={},(c={})[i]=ko(n),l[i]=ko(o),s=c.position,e instanceof qr&&s instanceof pt&&!s.v()&&e.diagram.animationManager.Ke.contains("Expand SubGraph")&&s.assign(l.position),s=new Do(c,l,a),r.add(e,s);(r=c[i])instanceof pt&&!r.v()&&r.assign(t.u),a&&0===i.indexOf("position:")&&e instanceof su?s.tv.location=ko(e.location):a&&(s.tv[i]=ko(n))}function ko(t){return t instanceof pt||t instanceof Lt?t.copy():t}function xo(t,e){if(!t.ol||e){var i=t.Jc;if(!1!==t.hc){var n=+new Date,o=n>t.Hn?t.nd:n-t.ud;e&&((o=t.Rw)<t.nd?(t.ud=+new Date-o,t.Hn=t.ud+t.nd):o=t.nd),co(i),So(t,o),ra(t.B,!0),lo(i),n>t.Hn&&(t.mp&&!t.nl?(t.ud=+new Date,t.Hn=t.ud+t.nd,t.nl=!0):t.fm(!1))}}}function So(t,e){for(var i=t.nd,n=t.pc.iterator,o=t.nl;n.next();){var a=n.key;if(!(a instanceof qr&&null===a.diagram)){var r=n.value,s=o?r.end:r.start;r=o?r.start:r.end;var c,l=fo;for(c in r)"position"===c&&(r["position:placeholder"]||r["position:node"])||null===l.get(c)||l.get(c)(a,s[c],r[c],t.pr,e,i,t)}}}function To(t,e,i,n){return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function Co(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function Do(t,e,i){this.start=t,this.end=e,this.tv={},this.ov=i,this.Yv=!1}function Io(t,e,i){this.bd=null,this.af=t,this.Np=i||Po,this.Hk=null,void 0!==e&&(this.Hk=e,void 0===i&&(this.Np=Mo))}no.className="AnimationManager",no.defineAnimationEffect=function(t,e){go||(po(),go=!0),fo.add(t,e)},no.Default=mo,no.AnimateLocations=vo,no.None=bo,_o.prototype.suspend=function(){this.ol=!0},_o.prototype.advanceTo=function(t,e){e&&(this.ol=!1),this.mp&&t>=this.nd&&(this.nl=!0,t-=this.nd),this.Rw=t,xo(this,!0),co(this.Jc),ra(this.B),lo(this.Jc),this.B.Zd()},(i=_o.prototype).start=function(){if(0!==this.pc.count&&!this.hc){for(var t=this.B,e=this.pc.iterator;e.next();){var i=e.value.end,n=e.key;if(i["position:placeholder"]){var o=n.findVisibleNode();if(o instanceof Ku&&null!==o.placeholder){var a=o.placeholder;(o=a.ga(oe)).x+=(a=a.padding).left,o.y+=a.top,i["position:placeholder"]=o}}null===t&&(n instanceof Eo?t=n:n instanceof qr&&(t=n.diagram))}null!==t&&(this.B=t,e=this.Jc=t.animationManager,this.nd=isNaN(this.Rg)?e.duration:this.Rg,this.pr=this.nu,e.fl&&e.gl===mo&&this===e.defaultAnimation&&(this.pr=Co,this.nd=isNaN(this.Rg)?600===e.duration?900:e.duration:this.Rg),this.Pw=t.scrollMode,this.isViewportUnconstrained&&(t.Gi=kr),co(e),this.Wl.each(function(e){e.data=null,t.add(e)}),lo(e),this.hc=!0,this.ud=+new Date,this.Hn=this.ud+this.nd,function(t,e){function i(){if(0<o.Us.count&&(n.addAll(o.Us),o.Us.clear(),o.hc=!0),!1!==o.hc&&0!==n.count){o.Xu.addAll(n);for(var t=o.Xu.iterator;t.next();){var e=t.value;if(!1!==e.hc){t:if(0<e.Wl.count)var a=!0;else{for(a=e.pc.iterator;a.next();){var r=a.key;if(r instanceof qr&&null!==r.diagram||r instanceof Eo){a=!0;break t}}a=!1}a?xo(e,!1):e.ol=!0}}o.Xu.clear(),co(o),ra(o.B),lo(o),f.requestAnimationFrame(i)}}var n=t.Ck,o=t;t.hc?t.Us.add(e):(t.hc=!0,n.add(e),f.requestAnimationFrame(function(){i()}))}(e,this))}},i.Ny=function(t,e){t.Wb()&&(this.Wl.add(t),this.B=e)},i.add=function(t,e,i,n,o){"position"===e&&i.w(n)||(null===this.B&&(t instanceof Eo?this.B=t:t instanceof qr&&null!==t.diagram&&(this.B=t.diagram)),t instanceof su&&!t.isAnimated||yo(this,t,e,i,n,o))},i.Ft=function(t){return!!this.hc&&null!==(t=this.pc.H(t))&&t.Yv},i.Kv=function(t){return!!this.hc&&null!==(t=this.pc.H(t))&&(t.start.position||t.start.location)},i.stop=function(){this.hc&&this.fm(!0)},i.fm=function(t){if(null!==this.av&&this.av.tp.remove(this.px),this.hc){var e=this.B,i=this.Jc;this.ol=this.hc=i.fl=!1,co(i);for(var n=this.pc,o=this.Wl.iterator;o.next();)e.remove(o.value);for(o=this.Mu.iterator;o.next();)o.value.o();o=this.mp,n=n.iterator;for(var a=fo;n.next();){var r,s=n.key,c=n.value,l=o?c.end:c.start,u=o?c.start:c.end,d=c.tv;for(r in u)if(null!==a.get(r)){var h=r;!c.ov||"position:node"!==h&&"position:placeholder"!==h||(h="position"),a.get(h)(s,l[r],void 0!==d[r]?d[r]:c.ov?l[r]:u[r],this.pr,this.nd,this.nd,this)}c.ov&&void 0!==d.location&&s instanceof su&&(s.location=d.location),c.Yv&&s instanceof su&&s.Ob(!1)}if(i.defaultAnimation===this)for(r=this.B.links;r.next();)null===(o=r.value).lh?null!==(n=o.path)&&(o.ld=!1,o.o(),n.o()):(o.points=o.lh,o.lh=null);e.At.clear(),Fo(e,!1),e.Na(),e.M(),ra(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.Pw),lo(i),this.Pu++,!t&&this.Ru>this.Pu?(this.nl=!1,this.start()):(this.In&&this.In(this),wo(this),i.fm(this),e.Pb())}},i.Vj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof Ku&&(n=e.placeholder),null!==n?((i=n.ga(oe)).x+=(n=n.padding).left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new pt(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof Ku)for(t=t.memberParts;t.next();)(n=t.value)instanceof Ou&&this.Vj(n,e)},i.Tj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof Ku&&(i=e.placeholder),null!==i?this.add(t,"position:placeholder",t.position,i,!0):this.add(t,"position:node",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(i=this.pc).contains(t)&&(i.H(t).Yv=!0),t instanceof Ku)for(t=t.memberParts;t.next();)(i=t.value)instanceof Ou&&this.Tj(i,e)}},i.Jz=function(t){var e=this.Lu.get(t);return null===e&&this.Lu.add(t,e={}),e},h.Object.defineProperties(_o.prototype,{duration:{get:function(){return this.Rg},set:function(t){1>t&&y(t,">= 1",_o,"duration"),this.Rg=t}},reversible:{get:function(){return this.mp},set:function(t){this.mp=t}},runCount:{get:function(){return this.Ru},set:function(t){0<t?this.Ru=t:_("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.In},set:function(t){this.In!==t&&(this.In=t)}},easing:{get:function(){return this.nu},set:function(t){this.nu=t}},isViewportUnconstrained:{get:function(){return this.l},set:function(t){this.l=t}},isAnimating:{get:function(){return this.hc}}}),_o.prototype.getTemporaryState=_o.prototype.Jz,_o.prototype.stop=_o.prototype.stop,_o.prototype.add=_o.prototype.add,_o.prototype.addTemporaryPart=_o.prototype.Ny,_o.className="Animation",_o.EaseLinear=function(t,e,i,n){return i*t/n+e},_o.EaseInOutQuad=To,_o.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},_o.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},_o.EaseInExpo=function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},_o.EaseOutExpo=Co,Do.className="AnimationState",Io.prototype.copy=function(){var t=new Io(this.af);t.Np=this.Np;var e=this.Hk;if(null!==e){var i={};void 0!==e.duration&&(i.Jx=e.duration),void 0!==e.finished&&(i.Jx=e.finished),void 0!==e.easing&&(i.Jx=e.easing),t.Hk=i}return t},h.Object.defineProperties(Io.prototype,{propertyName:{get:function(){return this.af},set:function(t){this.af=t}},animationSettings:{get:function(){return this.Hk},set:function(t){this.Hk=t}},startCondition:{get:function(){return this.Np},set:function(t){this.Np=t}}});var Po=new W(Io,"Default",1),Mo=new W(Io,"Immediate",2),Oo=new W(Io,"Bundled",3);function $o(){nt(this),this.B=null,this.Ca=new tt,this.Qa="",this.qb=1,this.u=!1,this.Bi=this.I=this.$h=this.Zh=this.Yh=this.Xh=this.Vh=this.Wh=this.Uh=this.bi=this.Th=this.ai=this.Sh=this.Rh=!0,this.l=!1,this.Zo=[]}function jo(t,e){var i=1;return 1!==t.qb&&(e.globalAlpha=(i=e.globalAlpha)*t.qb),i}function Lo(t,e,i){if(e=function(t,e,i){var n=i.zOrder;if(isNaN(n))return e;var o=(t=t.Ca).count;if(1>=o)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var a=e-1,r=NaN;0<=a&&(r=t.L(a).zOrder,isNaN(r));)a--;for(var s=e+1,c=NaN;s<o&&(c=t.L(s).zOrder,isNaN(c));)s++;if(!isNaN(r)&&r>n)for(;;){if(-1===a||r<=n){if(++a===e)break;return t.Za(e),t.tb(a,i),a}for(r=NaN;0<=--a&&(r=t.L(a).zOrder,isNaN(r)););}else if(!isNaN(c)&&c<n)for(;;){if(s===o||c>=n){if(--s===e)break;return t.Za(e),t.tb(s,i),s}for(c=NaN;++s<o&&(c=t.L(s).zOrder,isNaN(c)););}return e}(t,e,i),i instanceof Ku&&null!==i&&isNaN(i.zOrder)){if(0!==i.memberParts.count){for(var n=-1,o=t.Ca.j,a=o.length,r=0;r<a;r++){var s=o[r];if(s===i&&(e=r,0<=n))break;if(0>n&&s.containingGroup===i&&(n=r,0<=e))break}!(0>n)&&n<e&&((o=t.Ca).Za(e),o.tb(n,i))}null!==(i=i.containingGroup)&&Lo(t,-1,i)}}function Eo(t){function e(){i.removeEventListener(f.document,"DOMContentLoaded",e,!1),i.setRTL()}1<arguments.length&&_("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),Pr||(Mr(),Pr=!0),nt(this),ar=this,H=[],this.Rb=!0,this.Jc=new no,this.Jc.$d(this),this.kb=17,this.ml=this.Tu=!1,this.As="default",this.La=null;var i=this;lr&&(null!==f.document.body?this.setRTL():i.addEventListener(f.document,"DOMContentLoaded",e,!1)),this.Ja=new tt,this.va=this.wa=0,this.sa=null,this.lx=new ht,this.bf=this.Eb=null,this.ew(),this.vj=null,this.dw(),this.qb=1,this.ma=new pt(NaN,NaN).freeze(),this.Bs=new pt(NaN,NaN),this.yn=this.ya=1,this.Lr=new pt(NaN,NaN).freeze(),this.Mr=NaN,this.es=1e-4,this.cs=100,this.lb=new He,this.bt=new pt(NaN,NaN).freeze(),this.Gr=new Vt(NaN,NaN,NaN,NaN).freeze(),this.Fi=new Jt(0,0,0,0).freeze(),this.Gi=yr,this.Js=!1,this.Cs=this.ws=null,this.Ig=hr,this.lj=Ie,this.Uf=hr,this.Yn=Ie,this.Nr=this.Kr=oe,this.Ac=!0,this.kl=!1,this.od=new it,this.Pg=new ht,this.Xk=!0,this.Zm=250,this.jj=-1,this.an=new Jt(16,16,16,16).freeze(),this.pj=this.ye=!1,this.sj=!0,this.Rf=new _i,this.Rf.diagram=this,this.Rd=new _i,this.Rd.diagram=this,this.$g=new _i,this.$g.diagram=this,this.qe=this.Jf=null,this.Pj=!1,this.wr=this.xr=null,this.Vm=f.PointerEvent&&(V||z||F)&&f.navigator&&!1!==f.navigator.msPointerEnabled,Va(this),this.wh=new it,this.Vr=!0,this.Xs=xr,this.xu=!1,this.Zs=gr,this.Ia=null,rr.add("Model",Dh),this.qr=this.tr=this.Vs=null,this.xn=this.nr="auto",this.cg=this.hs=this.eg=this.fg=this.hg=this.Lf=this.Pf=this.Kf=null,this.Jr=!1,this.Mf=this.rg=this.gg=this.dg=null,this.js=!1,this.us={},this.Kj=[null,null],this.hr=null,this.ur=this.Ns=this.Vu=this.pg=!1,this.Du=!0,this.ni=this.Bc=!1,this.ac=null;var n=this;this.kd=function(t){var e=n.partManager;if(t.model===e.diagram.model&&e.diagram.Z){e.diagram.Z=!1;try{""===t.modelChange&&t.change===xi&&e.updateDataBindings(t.object,t.propertyName)}finally{e.diagram.Z=!0}}},this.Ic=function(t){n.partManager.doModelChanged(t)},this.dv=!0,this.Jd=-2,this.Ci=new ht,this.ts=new tt,this.Wf=!1,this.Sh=this.Rh=this.Vq=this.Mc=!0,this.Wq=!1,this.br=this.$q=this.$h=this.Zh=this.Yh=this.Xh=this.Vh=this.Wh=this.Uh=this.Zq=this.bi=this.Th=this.ai=this.Xq=!0,this.Vf=this.zu=!1,this.ar=this.Yq=this.cl=this.bl=!0,this.Is=this.Es=16,this.Ds=this.wp=!1,this.xp=this.Gs=null,this.Fs=this.Hs=0,this.cb=new Jt(5).freeze(),this.Uu=(new it).freeze(),this.ds=999999999,this.uu=(new it).freeze(),this.mi=this.li=this.ki=!0,this.Se=this.je=!1,this.ic=null,this.Ff=!0,this.ke=!1,this.$w=new it,this.vu=new it,this.Hb=null,this.Bl=1,this.Wu=0,this.Sd={scale:1,position:new pt,bounds:new Vt,Nv:!1},this.cv=new Vt(NaN,NaN,NaN,NaN).freeze(),this.Yl=new Lt(NaN,NaN).freeze(),this.zn=new Vt(NaN,NaN,NaN,NaN).freeze(),this.Wr=!1,this.ro=this.Wn=this.So=this.iu=this.hu=this.ju=this.Yf=this.Yg=this.Ye=this.Ar=null,Vo(this),this.Gb=null,this.Vn=!1,this.mj=null,this.partManager=new Dh,this.toolManager=new Mi,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.zr=null,this.Qk=new Nr,this.os=this.ns=null,this.Pp=!1,this.commandHandler=Ao(),this.model=hp(),this.pg=!0,Ro(this),this.layout=new rh,this.pg=!1,this.Tw=this.mu=null,this.Sb=1,this.rh=null,this.Co=1,this.Jo=0,this.Ko=[0,0,0,0,0],this.Lo=0,this.pd=1,this.Aj=0,this.mo=new pt,this.Ws=500,this.$m=new pt,this.le=!1,this.preventDefault=this.Jt=this.um=this.vm=this.tm=this.sm=this.rk=this.tk=this.sk=this.pk=this.qk=this.yw=this.qw=this.rw=this.sw=this.kh=this.Fl=this.jh=this.El=null,this.ao=!1,this.ji=new Or,this.Qp=!1,void 0!==t&&jr(this,t),this.Jn=null,this.Kn=Tt,this.Rb=!1}function No(t,e){t.animationManager.Xc(!0),t.Uu=(new it).freeze(),t.uu=(new it).freeze();var i=t.skipsUndoManager;null!==t.model&&(t.skipsUndoManager=!0);var n=null;null!==t.Gb&&null!==(n=t.Gb.part)&&t.remove(n);var o=[],a=t.Ja.length;if(e){for(e=0;e<a;e++)for(var r=t.Ja.j[e].parts;r.next();){var s=r.value;s!==n&&null===s.data&&o.push(s)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<a;e++)t.Ja.j[e].clear();return t.partManager.clear(),t.od.clear(),t.Pg.clear(),t.wh.clear(),t.mj=null,U=[],null!==n&&(t.add(n),t.partManager.parts.remove(n)),null!==t.model&&(t.skipsUndoManager=i),o}function Ao(){return null}function Vo(t){t.Ye=new ht;var e=new Ou,i=new gl;i.bind(new _p("text","",$)),e.add(i),t.ju=e,t.Ye.add("",e),e=new Ou,(i=new gl).stroke="brown",i.bind(new _p("text","",$)),e.add(i),t.Ye.add("Comment",e),(e=new Ou).selectable=!1,e.avoidable=!1,(i=new al).figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new Lt(3,3).ca(),e.add(i),t.Ye.add("LinkLabel",e),t.Yg=new ht,(e=new Ku).selectionObjectName="GROUPPANEL",e.type=Ic.Vertical,(i=new gl).font="bold 12pt sans-serif",i.bind(new _p("text","",$)),e.add(i),(i=new Ic(Ic.Auto)).name="GROUPPANEL";var n=new al;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),(n=new ed).padding=new Jt(5,5,5,5).ca(),i.add(n),e.add(i),t.hu=e,t.Yg.add("",e),t.Yf=new ht,e=new id,(i=new al).isPanelMain=!0,e.add(i),(i=new al).toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.iu=e,t.Yf.add("",e),e=new id,(i=new al).isPanelMain=!0,i.stroke="brown",e.add(i),t.Yf.add("Comment",e),(e=new Mu).type=Ic.Auto,(i=new al).fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),(i=new ed).margin=new Jt(1.5,1.5,1.5,1.5).ca(),e.add(i),t.So=e,t.Wn=e,(e=new Mu).type=Ic.Link,(i=new al).isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.ro=e}function zo(t){30<t.Jo&&(t.rh=1)}function Fo(t,e){null!==t.rh&&(t.rh=null,e&&t.Jt(),t.Jo=0,t.Ko=[0,0,0,0,0],t.Lo=0)}function Bo(t){if(null!==t.sa){var e=t.La;if(0!==e.clientWidth&&0!==e.clientHeight){t.Tu||t.setScrollWidth();var i=t.Se?t.kb:0,n=t.je?t.kb:0,o=t.Sb;t.Sb=t.computePixelRatio(),t.Sb!==o&&(t.kl=!0,t.Pb()),e.clientWidth===t.wa+i&&e.clientHeight===t.va+n||(t.li=!0,t.Ac=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===hr&&(t.pj=!0,e.C()),t.Bc||t.Pb())}}}function Ro(t){var e=new $o;e.name="Background",t.Zl(e),(e=new $o).name="",t.Zl(e),(e=new $o).name="Foreground",t.Zl(e),(e=new $o).name="Adornment",e.isTemporary=!0,t.Zl(e),(e=new $o).name="Tool",e.isTemporary=!0,e.isBoundsIncluded=!0,t.Zl(e),(e=new $o).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,t.vx(e,t.hm("Background"))}function Uo(t){t.Gb=new Ic(Ic.Grid),t.Gb.name="GRID";var e=new al;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Gb.add(e),(e=new al).figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Gb.add(e),(e=new al).figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Gb.add(e),(e=new al).figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Gb.add(e),(e=new al).figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Gb.add(e),(e=new al).figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Gb.add(e),(e=new su).add(t.Gb),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Gb.visible=!1}function Go(){this.B.Ds?this.B.Ds=!1:this.B.isEnabled?this.B.Gx(this):ma(this.B)}function Ho(t){this.B.isEnabled?(this.B.Hs=t.target.scrollTop,this.B.Fs=t.target.scrollLeft):ma(this.B)}function Wo(t){if(t.fixedBounds.v()){var e=t.fixedBounds.copy();return e.eq(t.cb),e}for(var i=!0,n=t.Ja.j,o=n.length,a=0;a<o;a++){var r=n[a];if(r.visible&&(!r.isTemporary||r.isBoundsIncluded))for(var s=(r=r.Ca.j).length,c=0;c<s;c++){var l=r[c];l.isInDocumentBounds&&l.isVisible()&&(l=l.actualBounds).v()&&(i?(i=!1,e=l.copy()):e.Hc(l))}}return i&&(e=new Vt(0,0,0,0)),e.eq(t.cb),e}function qo(t,e){if((e||t.ke)&&!t.Rb&&null!==t.sa&&t.documentBounds.v()){if(e){var i=t.initialPosition;if(i.v())return void(t.position=i);(i=pt.alloc()).dj(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=Vt.allocAt(0,0,n.width,n.height);var o=pt.alloc();o.dj(n,t.initialViewportSpot),o.h(i.x-o.x,i.y-o.y),t.position=o,Vt.free(n),pt.free(o),pt.free(i)}t.Rb=!0,i=t.Ig,e&&t.Uf!==hr&&(i=t.Uf),n=i!==hr?Xo(t,i):t.scale,i=t.viewportBounds.copy(),o=t.wa/n;var a=t.va/n,r=t.lj,s=t.Yn;e&&!r.fb()&&(s.fb()||s.Mb())&&(r=s.Mb()?ce:s),Yo(t,t.documentBounds,o,a,r,e),e=t.scale,t.scale=n,t.Rb=!1,(n=t.viewportBounds).Ma(i)||t.Cq(i,n,e,!1),ha(t),aa(t,!0,!1)}}function Xo(t,e){var i=t.yn;if(null===t.sa)return i;ja(t);var n=t.documentBounds;if(!n.v())return i;var o=n.width,a=t.wa+(t.Se?t.kb:0),r=t.va+(t.je?t.kb:0),s=a/o,c=r/(n=n.height);return e===pr?((e=Math.min(c,s))>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===fr?((e=c>s?(r-t.kb)/n:(a-t.kb)/o)>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Yo(t,e,i,n,o,a){var r=pt.allocAt(t.ma.x,t.ma.y),s=r.x,c=r.y;if(null!==t.Jn){var l=pt.alloc();s=(l=t.Jn.ga(oe,l)).x-t.Kn.x/t.scale,c=l.y-t.Kn.y/t.scale,o=ne,pt.free(l)}(a||t.scrollMode===yr)&&(o.fb()&&(i>e.width&&(s=e.x+(o.x*e.width+o.offsetX)-(o.x*i-o.offsetX)),n>e.height&&(c=e.y+(o.y*e.height+o.offsetY)-(o.y*n-o.offsetY))),a=i-e.width,i<e.width+(o=t.Fi).left+o.right?(s=Math.min(s+i/2,e.right+Math.max(a,o.right)-i/2),s=Math.max(s,e.left-Math.max(a,o.left)+i/2),s-=i/2):s>e.left?s=e.left:s<e.right-i&&(s=e.right-i),i=n-e.height,n<e.height+o.top+o.bottom?(c=Math.min(c+n/2,e.bottom+Math.max(i,o.bottom)-n/2),c=Math.max(c,e.top-Math.max(i,o.top)+n/2),c-=n/2):c>e.top?c=e.top:c<e.bottom-n&&(c=e.bottom-n)),r.x=isFinite(s)?s:-t.cb.left,r.y=isFinite(c)?c:-t.cb.top,null!==t.positionComputation&&(e=t.positionComputation(t,r),r.x=e.x,r.y=e.y),t.Jc.qc&&uo(t.Jc,t.ma,r),t.ma.h(r.x,r.y),pt.free(r)}function Ko(t,e,i,n){for(void 0===i&&(i=null),void 0===n&&(n=null),sa(t),t=t.Ja.iteratorBackwards;t.next();){var o=t.value;if(o.visible&&!o.isTemporary&&null!==(o=o.Ub(e,i,n)))return o}return null}function Zo(t,e,i){var n=t.Rd;return t.Rd=t.$g,t.$g=n,n.diagram=t,n.event=e,i?na(t,e,n):(n.viewPoint=t.Rd.viewPoint,n.documentPoint=t.Rd.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,void 0===e.buttons||A||(n.buttons=e.buttons),B&&0===e.button&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=Jo(e),n.targetObject=null,n}function Jo(t){var e=t.target.B;if(!e){var i=t.path;i||"function"!=typeof t.composedPath||(i=t.composedPath()),i&&i[0]&&(e=i[0].B)}return e||null}function Qo(t,e,i,n){var o=ea(t,e,!0,!1,!0,n);return na(t,i,o),o.targetDiagram=Jo(e),o.targetObject=null,n||o.clone(t.Rf),o}function ta(t,e,i,n){var o;return n=ea(t,e,!1,!1,!1,n),null!==i?((o=f.document.elementFromPoint(i.clientX,i.clientY))&&o.B?(e=i,i=o.B):(e=void 0!==e.targetTouches?e.targetTouches[0]:e,i=t),n.targetDiagram=i,na(t,e,n)):null!==t.Rd?(n.documentPoint=t.Rd.documentPoint,n.viewPoint=t.Rd.viewPoint,n.targetDiagram=t.Rd.targetDiagram):null!==t.Rf&&(n.documentPoint=t.Rf.documentPoint,n.viewPoint=t.Rf.viewPoint,n.targetDiagram=t.Rf.targetDiagram),n.targetObject=null,n}function ea(t,e,i,n,o,a){var r=t.Rd;t.Rd=t.$g,t.$g=r,r.diagram=t,r.clickCount=1;var s=r.delta=0;return e.ctrlKey&&(s+=1),e.altKey&&(s+=2),e.shiftKey&&(s+=4),e.metaKey&&(s+=8),r.modifiers=s,r.button=0,r.buttons=1,r.event=e,r.timestamp=e.timeStamp,t.Vm&&e instanceof f.PointerEvent&&"touch"!==e.pointerType&&(r.button=e.button,void 0===e.buttons||A||(r.buttons=e.buttons),B&&0===e.button&&e.ctrlKey&&(r.button=2)),r.down=i,r.up=n,r.handled=!1,r.bubbles=o,r.isMultiTouch=a,r}function ia(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function na(t,e,i){var n=t.sa,o=t.wa,a=t.va,r=0,s=0;null!==n&&(n=n.getBoundingClientRect(),r=e.clientX-o/n.width*n.left,s=e.clientY-a/n.height*n.top),i.viewPoint.h(r,s),null!==t.lb?(e=pt.allocAt(r,s),t.lb.Wd(e),i.documentPoint.assign(e),pt.free(e)):i.documentPoint.h(r,s)}function oa(t,e,i,n){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[i]}else{if(null===t.Kj[0])return;e=t.Kj[i]}null!==(i=t.sa)&&(i=i.getBoundingClientRect(),n.h(e.clientX-t.wa/i.width*i.left,e.clientY-t.va/i.height*i.top))}function aa(t,e,i){t.animationManager.defaultAnimation.isAnimating||t.Rb||!t.li||ma(t)||(e&&sa(t),i&&qo(t,!1))}function ra(t,e){if(!t.Bc&&(t.ye=!1,null!==t.La||t.Yl.v())){t.Bc=!0;var i=t.animationManager,n=t.ts;if(!i.isAnimating&&0!==n.length){for(var o=n.j,a=o.length,r=0;r<a;r++){var s=o[r];ps(s,!1),s.o()}n.clear()}0<(n=t.vu).count&&(n.each(function(t){t.xw()}),n.clear()),o=n=!1,i.isAnimating&&(o=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.qc||Bo(t),aa(t,!1,!1),null!==t.Gb&&(t.Gb.visible&&!t.Vn&&(Da(t),t.Vn=!0),!t.Gb.visible&&t.Vn&&(t.Vn=!1)),sa(t),a=!1,t.ke&&!t.Ff||(t.ke?Na(t,!t.pj):(t.ua("Initial Layout"),!1===i.isEnabled&&i.Xc(),Na(t,!1)),a=!0),t.pj=!1,sa(t),t.Ns||function(t){t.Bc||sa(t),ja(t)}(t),aa(t,!0,!1),r=!1,a?(t.ke||(r=t.ke=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function(t){var e=t.ya;if(t.Uf!==hr)t.scale=Xo(t,t.Uf);else if(t.Ig!==hr)t.scale=Xo(t,t.Ig);else{var i=t.initialScale;isFinite(i)&&0<i&&(t.scale=i)}t.ya!==e&&(ha(t),aa(t,!0,!1)),qo(t,!0),t.Ad(e=t.Ja.j,e.length,t),t.R("InitialLayoutCompleted"),t.Bs.assign(t.ma),Da(t)}(t)),t.R("LayoutCompleted")):i.fl&&i.sx&&(t.Uf!==hr?t.scale=Xo(t,t.Uf):t.Ig!==hr?t.scale=Xo(t,t.Ig):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),qo(t,!0)),sa(t),a&&r&&t.Ua("Initial Layout"),t.kv(),e||t.bc(t.Eb),o&&(t.skipsUndoManager=n),t.Bc=!1}}function sa(t){if((t.Bc||!t.animationManager.isTicking)&&0!==t.od.count){for(var e=0;23>e;e++){var i=t.od.iterator;if(null===i||0===t.od.count)break;t.od=new it,t.xw(i,t.od)}t.nodes.each(function(t){t instanceof Ku&&0!=(65536&t.P)!=0&&(t.P=65536^t.P)})}}function ca(t,e){for(var i=P(),n=P(),o=e.memberParts;o.next();){var a=o.value;a.isVisible()&&(a instanceof Ku?(hs(a)||fs(a)||_u(a))&&ca(t,a):a instanceof id?a.fromNode===e||a.toNode===e?n.push(a):i.push(a):(a.measure(1/0,1/0),a.arrange()))}for(t=i.length,o=0;o<t;o++)(a=i[o]).measure(1/0,1/0),a.arrange();for(M(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)(i=n[e]).measure(1/0,1/0),i.arrange();M(n)}function la(t,e,i,n,o,a,r,s,c,l){if(null!==t.La){null===t.sa&&_("No canvas specified"),void 0===r&&(r=null),void 0===s&&(s=null),void 0===c&&(c=!1),void 0===l&&(l=!1),fa(t),t.Eb.sc(!0),pa(t),t.ni=!0;var u=t.ya;t.ya=o;var d=t.Ja.j,h=d.length;try{var p=new Vt(a.x,a.y,n.width/o,n.height/o),f=p.copy();f.eq(i),Da(t,f),sa(t),t.Ad(d,h,t,p);var g=t.Sb;e.setTransform(1,0,0,1,0,0),e.scale(g,g),e.clearRect(0,0,n.width,n.height),null!==s&&""!==s&&(e.fillStyle=s,e.fillRect(0,0,n.width,n.height));var m=He.alloc();if(m.reset(),m.translate(i.left,i.top),m.scale(o),0===a.x&&0===a.y||m.translate(-a.x,-a.y),e.setTransform(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),He.free(m),ua(t,e),e.globalAlpha=t.qb,null!==r){var v=new it,b=r.iterator;for(b.reset();b.next();){var w=b.value;!1===l&&"Grid"===w.layer.name||null===w||v.add(w)}var y=function(i){if(i.visible&&0!==i.qb&&(c||!i.isTemporary)){var n=i.Ca.j,o=n.length;if(0!==o){var a=jo(i,e),r=i.Zo;r.length=0;for(var s=t.scale,l=Vt.alloc(),u=0;u<o;u++){var d=n[u];v.contains(d)&&i.Pi(e,d,t,r,s,l)}Vt.free(l),e.globalAlpha=a}}}}else if(!c&&l){var k=t.grid.part,x=k.layer;y=function(i){i===x?k.bc(e,t):i.bc(e,t,c)}}else y=function(i){i.bc(e,t,c)};for(i=0;i<h;i++)y(d[i]);t.ni=!1,t.ji&&$r(t.ji,t)&&t.Ar()}finally{t.ya=u,t.Eb.sc(!0),pa(t),t.Ad(d,h,t),Da(t)}}}function ua(t,e){null!==(t=t.bf)&&(void 0!==t.imageSmoothingEnabled&&e.my(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function da(t,e){var i,n=t instanceof Ic,o=t instanceof Eo;for(i in e){""===i&&_("Setting properties requires non-empty property names");var a=t,r=i;if(n||o){var s=i.indexOf(".");if(0<s){var c=i.substring(0,s);n?a=t.Xa(c):null==(a=t[c])&&(a=t.toolManager[c]),S(a)?r=i.substr(s+1):_("Unable to find object named: "+c+" in "+t.toString()+" when trying to set property: "+i)}}if("_"!==r[0]&&!j(a,r)){if(o&&"ModelChanged"===r){t.xx(e[r]);continue}if(o&&"Changed"===r){t.Ah(e[r]);continue}if(o&&j(t.toolManager,r))a=t.toolManager;else{if(o&&za(t,r)){t.Uj(r,e[r]);continue}if(t instanceof Gh&&"Changed"===r){t.Ah(e[r]);continue}_('Trying to set undefined property "'+r+'" on object: '+a.toString())}}a[r]=e[i],"_"===r[0]&&a instanceof qr&&a.ux(r)}}function ha(t){!1===t.li&&(t.li=!0)}function pa(t){!1===t.mi&&(t.mi=!0)}function fa(t){!1!==t.kl&&(t.kl=!1,ga(t,t.wa,t.va))}function ga(t,e,i){var n=t.Sb;t.sa.resize(e*n,i*n,e,i)&&(t.Ac=!0,t.Eb.sc(!0))}function ma(t){var e=t.sa;if(null===e)return!0;var i=t.La,n=t.wa,o=t.va,a=t.cv.copy();if(!a.v())return!0;var r=!1,s=t.Se?t.kb:0,c=t.je?t.kb:0,l=i.clientWidth||n+s,u=i.clientHeight||o+c;if(l===n+s&&u===o+c||(t.Se=!1,t.je=!1,c=s=0,t.wa=l,t.va=u,r=t.kl=!0),!(r||t.Se||t.je||t.bl||t.cl))return!0;t.li=!1;var d=t.viewportBounds,h=t.documentBounds,p=0,f=0,g=0,m=0;i=d.width;var v=d.height,b=t.Fi;t.contentAlignment.fb()?(h.width>i&&(p=b.left,f=b.right),h.height>v&&(g=b.top,m=b.bottom)):(p=b.left,f=b.right,g=b.top,m=b.bottom),b=h.width+p+f;var _=h.height+g+m;p=h.x-p;var w=d.x;f=h.right+f;var y=d.right+s;g=h.y-g;var k=d.y;h=h.bottom+m,d=d.bottom+c;var x="1px",S="1px";if(l=b>l/(m=t.scale),u=_>u/m,t.scrollMode===yr&&(l||u)&&(l&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(l=1,p+1<w&&(l=Math.max((w-p)*m+t.wa,l)),f>y+1&&(l=Math.max((f-y)*m+t.wa,l)),i+s+1<b&&(l=Math.max((b-i)*m+t.wa,l)),x=l.toString()+"px"),u&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(l=1,g+1<k&&(l=Math.max((k-g)*m+t.va,l)),h>d+1&&(l=Math.max((h-d)*m+t.va,l)),v+c+1<_&&(l=Math.max((_-v)*m+t.va,l)),S=l.toString()+"px")),u="1px"!==S,(l="1px"!==x)&&u||!l&&!u||(u&&(y-=t.kb),l&&(d-=t.kb),b<i+s||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(s=1,p+1<w&&(s=Math.max((w-p)*m+t.wa,s)),f>y+1&&(s=Math.max((f-y)*m+t.wa,s)),i+1<b&&(s=Math.max((b-i)*m+t.wa,s)),x=s.toString()+"px"),s=t.va,(l="1px"!==x)!==t.je&&(s=l?t.va-t.kb:t.va+t.kb),_<v+c||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(c=1,g+1<k&&(c=Math.max((k-g)*m+s,c)),h>d+1&&(c=Math.max((h-d)*m+s,c)),v+1<_&&(c=Math.max((_-v)*m+s,c)),S=c.toString()+"px"),u="1px"!==S),t.wp&&l===t.je&&u===t.Se)return n===t.wa&&o===t.va||t.Wc(),!1;if(l!==t.je&&(t.va="1px"===x?t.va+t.kb:Math.max(t.va-t.kb,1),r=!0),t.je=l,t.xp.style.width=x,u!==t.Se&&(t.wa="1px"===S?t.wa+t.kb:Math.max(t.wa-t.kb,1),r=!0,t.ml&&(c=pt.alloc(),u?(e.style.left=t.kb+"px",t.position=c.h(t.ma.x+t.kb/t.scale,t.ma.y)):(e.style.left="0px",t.position=c.h(t.ma.x-t.kb/t.scale,t.ma.y)),pt.free(c))),t.Se=u,t.xp.style.height=S,t.Ds=!0,r&&(t.kl=!0),c=(e=t.Gs).scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(i+1<b?c=(t.position.x-p)*m:p+1<w?c=e.scrollWidth-e.clientWidth:f>y+1&&(c=t.position.x*m)),t.ml)switch(t.As){case"negative":c=-(e.scrollWidth-c-e.clientWidth);break;case"reverse":c=e.scrollWidth-c-e.clientWidth}return e.scrollLeft=c,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(v+1<_?e.scrollTop=(t.position.y-g)*m:g+1<k?e.scrollTop=e.scrollHeight-e.clientHeight:h>d+1&&(e.scrollTop=t.position.y*m)),u=t.va,e.style.width=(l=t.wa)+(t.Se?t.kb:0)+"px",e.style.height=u+(t.je?t.kb:0)+"px",n===l&&o===u&&!t.animationManager.qc||(t.Cq(a,t.viewportBounds,m,r),!1)}function va(t,e,i){var n=e.layer;null!==n&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),i&&e.dk(),0<=(i=n.Fc(-1,e,!1))&&t.Ya(Ti,"parts",n,e,null,i,null),null!==(t=e.layerChanged)&&t(e,n,null))}function ba(t,e,i,n,o,a){if(!e.contains(i)&&(void 0===a&&(a=!1),!n||a||i.canMove()||i.canCopy()))if(void 0===o&&(o=wa(t)),i instanceof Ou){if(e.add(i,t.td(o,i,i.location)),i instanceof Ku)for(a=i.memberParts;a.next();)ba(t,e,a.value,n,o,o.Oz);for(a=i.linksConnected;a.next();){var r=a.value;if(!e.contains(r)){var s=r.fromNode,c=r.toNode;null!==s&&e.contains(s)&&null!==c&&e.contains(c)&&ba(t,e,r,n,o)}}if(o.dragsTree)for(i=i.zv();i.next();)ba(t,e,i.value,n,o)}else if(i instanceof id)for(e.add(i,t.td(o,i)),i=i.labelNodes;i.next();)ba(t,e,i.value,n,o);else i instanceof Mu||e.add(i,t.td(o,i,i.location))}function _a(t,e,i,n,o){if(null!==e&&0!==e.count){var a=pt.alloc(),r=pt.alloc();r.assign(i),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),(i=t.Pp)||ka(t,e);for(var s=P(),c=P(),l=e.iterator,u=pt.alloc();l.next();){var d=l.key,h=l.value;if(d.Wb()){var p=Sa(t,d,e);null!==p?s.push(new Er(d,h,p)):o&&!d.canMove()||(a.assign(p=h.point),t.computeMove(d,a.add(r),n,u),d.location=u,void 0===h.shifted&&(h.shifted=new pt),h.shifted.assign(u.ae(p)))}else l.key instanceof id&&c.push(l.la)}for(pt.free(u),o=s.length,l=0;l<o;l++)a.assign((d=s[l]).info.point),void 0===d.Fv.shifted&&(d.Fv.shifted=new pt),d.node.location=a.add(d.Fv.shifted);for(o=pt.alloc(),l=pt.alloc(),d=c.length,h=0;h<d;h++){var f=c[h];if((p=f.key)instanceof id)if(p.suspendsRouting){p.lh=null,u=p.fromNode;var g=p.toNode;if(null!==t.draggedLink&&n.dragsLink)if(g=f.value.point,null===p.dragComputation)e.add(p,t.td(n,p,r)),ad(p,r.x-g.x,r.y-g.y);else{f=pt.allocAt(0,0),(u=p.i(0))&&u.v()&&f.assign(u);var m=u=pt.alloc().assign(f).add(r);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&ya(t,p,u,m=pt.alloc(),n),u.assign(p.dragComputation(p,u,m)).ae(f),e.add(p,t.td(n,p,u)),ad(p,u.x-g.x,u.y-g.y),pt.free(f),pt.free(u),m!==u&&pt.free(m)}else null!==u&&(o.assign(u.location),null!==(m=e.H(u))&&o.ae(m.point)),null!==g&&(l.assign(g.location),null!==(m=e.H(g))&&l.ae(m.point)),null!==u&&null!==g?o.Ma(l)?(u=f.value.point,(g=a).assign(o),g.ae(u),e.add(p,t.td(n,p,o)),ad(p,g.x,g.y)):(p.suspendsRouting=!1,p.Ta()):(f=f.value.point,e.add(p,t.td(n,p,u=null!==u?o:null!==g?l:r)),ad(p,u.x-f.x,u.y-f.y))}else null!==p.fromNode&&null!==p.toNode||(u=f.value.point,e.add(p,t.td(n,p,r)),ad(p,r.x-u.x,r.y-u.y))}pt.free(a),pt.free(r),pt.free(o),pt.free(l),M(s),M(c),i||(sa(t),xa(t,e))}}function wa(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.Qk}function ya(t,e,i,n,o){if(void 0===o&&(o=wa(t)),n.assign(i),null!==e){var a=t.grid;t=(e=o.gridSnapCellSize).width,e=e.height;var r=o.gridSnapOrigin,s=r.x;if(r=r.y,o=o.gridSnapCellSpot,null!==a){var c=a.gridCellSize;isNaN(t)&&(t=c.width),isNaN(e)&&(e=c.height),a=a.gridOrigin,isNaN(s)&&(s=a.x),isNaN(r)&&(r=a.y)}(a=pt.allocAt(0,0)).xk(0,0,t,e,o),qe.nq(i.x,i.y,s+a.x,r+a.y,t,e,n),pt.free(a)}}function ka(t,e){if(null!==e)for(t.Pp=!0,t=e.iterator;t.next();)(e=t.key)instanceof id&&(e.suspendsRouting=!0)}function xa(t,e){if(null!==e){for(e=e.iterator;e.next();){var i=e.key;i instanceof id&&(i.suspendsRouting=!1,ud(i)&&i.Ta())}t.Pp=!1}}function Sa(t,e,i){if(null!==(e=e.containingGroup)){if(null!==(t=Sa(t,e,i)))return t;if(null!==(t=i.H(e)))return t}return null}function Ta(t,e,i){if(null!==e.diagram&&e.diagram!==t&&_("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===i?null!==e.diagram&&_("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&_("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&_("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,i=(t=t.Ja).count;for(var n=0;n<i;n++)t.L(n).name===e&&_("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function Ca(t,e,i){var n=t.animationManager;if(t.Rb||t.Bc)t.ya=i,n.Ze&&n.Cd.add(n.B,"scale",e,t.ya);else if(t.Rb=!0,null===t.sa)t.ya=i;else{var o=t.viewportBounds.copy(),a=t.wa,r=t.va;o.width=t.wa/e,o.height=t.va/e;var s=t.zoomPoint.x,c=t.zoomPoint.y,l=t.contentAlignment;isNaN(s)&&(l.gd()?l.wf(fe)?s=0:l.wf(ge)&&(s=a-1):s=l.fb()?l.x*(a-1):a/2),isNaN(c)&&(l.gd()?l.wf(pe)?c=0:l.wf(me)&&(c=r-1):c=l.fb()?l.y*(r-1):r/2),null===t.scaleComputation||t.animationManager.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),a=pt.allocAt(t.ma.x+s/e-s/i,t.ma.y+c/e-c/i),t.position=a,pt.free(a),t.ya=i,t.Cq(o,t.viewportBounds,e,!1),t.Rb=!1,qo(t,!1),n.Ze&&n.Cd.add(n.B,"scale",e,t.ya),t.M(),ha(t)}}function Da(t,e){void 0===e&&(e=null);var i=t.Gb;if(null!==i&&i.visible){for(var n=Lt.alloc(),o=1,a=1,r=i.V.j,s=r.length,c=0;c<s;c++){var l=r[c],u=l.interval;2>u||($c(l.figure)?a=a*u/qe.Px(a,u):o=o*u/qe.Px(o,u))}if(n.h(a*(r=i.gridCellSize).width,o*r.height),null!==e)o=e.width,a=e.height,t=e.x,r=e.y;else{if((e=Vt.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.v())return void Vt.free(e);o=e.width,a=e.height,t=e.x,r=e.y,Vt.free(e)}i.width=o+2*n.width,i.height=a+2*n.height,e=pt.alloc(),qe.nq(t,r,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),Lt.free(n),i.part.location=e,pt.free(e)}}function Ia(t){var e=t.isModified;t.dv!==e&&(t.dv=e,t.R("Modified"))}function Pa(t,e){for(var i=(e=e.V.j).length,n=0;n<i;n++)Ma(t,e[n])}function Ma(t,e){if(e instanceof Rl){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){var n=e.Sg;if(null!==n&&(n.al instanceof Event&&null!==e.zc&&e.zc(e,n.al),!0===n.Qr&&(null!==e.kf&&e.kf(e,n.Su),null!==e.diagram&&e.diagram.ts.add(e))),i=i.getAttribute("src"),null===(n=t.Ci.H(i)))(n=[]).push(e),t.Ci.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function Oa(t,e){if(e instanceof Rl){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){i=i.getAttribute("src");var n=t.Ci.H(i);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===e){n.splice(o,1),0===n.length&&(t.Ci.remove(i),Ul(i));break}}}}function $a(t,e){t.ki=!1;var i=t.zn;i.w(e)||(e=e.G(),t.zn=e,qo(t,!1),t.R("DocumentBoundsChanged",null,i.copy()),ha(t))}function ja(t){t.ki&&$a(t,t.computeBounds())}function La(t,e){for(var i=t.wh.iterator;i.next();)Ea(t,i.value,e);null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function Ea(t,e,i){if(null!==e){for(var n=e.yl.iterator;n.next();)Ea(t,n.value,i);null!==e.layout&&(i?e.layout.isValidLayout=!1:e.layout.C())}}function Na(t,e){if(t.Ff&&!t.ur){var i=t.Z;t.Z=!0;var n=t.undoManager.transactionLevel,o=t.layout;try{0===n&&t.ua("Layout");var a=t.animationManager;1>=n&&!a.isAnimating&&!a.qc&&(e||oo(a,"Layout")),t.Ff=!1;for(var r=t.wh.iterator;r.next();)Aa(t,r.value,e,n);o.isValidLayout||(!e||o.isRealtime||null===o.isRealtime||0===n?(o.doLayout(t),sa(t),o.isValidLayout=!0):t.Ff=!0)}finally{0===n&&t.Ua("Layout"),t.Ff=!o.isValidLayout,t.Z=i}}}function Aa(t,e,i,n){if(null!==e){for(var o=e.yl.iterator;o.next();)Aa(t,o.value,i,n);null===(o=e.layout)||o.isValidLayout||(!i||o.isRealtime||0===n?(e.uk=!e.location.v(),o.doLayout(e),e.C(32),ca(t,e),o.isValidLayout=!0):t.Ff=!0)}}function Va(t){function e(t){var e=t.toLowerCase(),o=new tt;i.add(t,o),i.add(e,o),n.add(t,t),n.add(e,t)}var i=new ht,n=new ht;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.xr=i,t.wr=n}function za(t,e){var i=t.wr.H(e);return null!==i?i:t.wr.H(e.toLowerCase())}function Fa(t,e){var i=t.xr.H(e);return null!==i||null!==(i=t.xr.H(e.toLowerCase()))?i:void _("Unknown DiagramEvent name: "+e)}function Ba(t){if(t.animationManager.isAnimating)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.Pp||e.isComplexRoutingRealtime}function Ra(t,e,i,n){if(null===t.Hb&&(t.Hb=new Rd),t.Hb.ut||t.Hb.group!==i||t.Hb.qy!==n){if(null===i){(e=t.computeOccupiedArea()).Vc(100,100),t.Hb.initialize(e),e=Vt.alloc();for(var o=t.nodes;o.next();){var a=o.value,r=a.layer;null!==r&&r.visible&&!r.isTemporary&&Ua(t,a,n,e)}Vt.free(e)}else{for(0<i.memberParts.count&&((e=t.computePartsBounds(i.memberParts,!1)).Vc(20,20),t.Hb.initialize(e)),e=Vt.alloc(),o=i.memberParts;o.next();)(a=o.value)instanceof Ou&&Ua(t,a,n,e);Vt.free(e)}t.Hb.group=i,t.Hb.qy=n,t.Hb.ut=!1}else e&&Wd(t.Hb);return t.Hb}function Ua(t,e,i,n){if(e!==i)if(e.isVisible()&&e.avoidable&&!e.isLinkLabel){var o=e.getAvoidableRect(n),a=t.Hb.cm;i=t.Hb.bm,n=o.x+o.width,e=o.y+o.height;for(var r=o.x;r<n;r+=a){for(var s=o.y;s<e;s+=i)Hd(t.Hb,r,s);Hd(t.Hb,r,e)}for(o=o.y;o<e;o+=i)Hd(t.Hb,n,o);Hd(t.Hb,n,e)}else if(e instanceof Ku)for(e=e.memberParts;e.next();)(o=e.value)instanceof Ou&&Ua(t,o,i,n)}function Ga(t,e){null!==t.Hb&&!t.Hb.ut&&(void 0===e&&(e=null),null===e||e.avoidable&&!e.isLinkLabel)&&(t.Hb.ut=!0)}function Ha(t){-1===t.jj&&(t.jj=v(function(){if(-1!==t.jj&&(t.Bf(),null!==t.lastInput.event)){var e=Wa(t,t.$m);e.Ma(t.position)||(t.position=e,t.lastInput.documentPoint=t.St(t.$m),t.doMouseMove(),t.ki=!0,$a(t,t.documentBounds.copy().Hc(t.computeBounds())),t.Ac=!0,t.Wc(),Ha(t))}},t.Zm))}function Wa(t,e){var i=t.position,n=t.an;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return i;var o=t.viewportBounds,a=t.scale;o=Vt.allocAt(0,0,o.width*a,o.height*a);var r=pt.allocAt(0,0);if(e.x>=o.x&&e.x<o.x+n.left){var s=Math.max(t.scrollHorizontalLineChange,1);r.x-=s|=0,e.x<o.x+n.left/2&&(r.x-=s),e.x<o.x+n.left/4&&(r.x-=4*s)}else e.x<=o.x+o.width&&e.x>o.x+o.width-n.right&&(s=Math.max(t.scrollHorizontalLineChange,1),r.x+=s|=0,e.x>o.x+o.width-n.right/2&&(r.x+=s),e.x>o.x+o.width-n.right/4&&(r.x+=4*s));return e.y>=o.y&&e.y<o.y+n.top?(t=Math.max(t.scrollVerticalLineChange,1),r.y-=t|=0,e.y<o.y+n.top/2&&(r.y-=t),e.y<o.y+n.top/4&&(r.y-=4*t)):e.y<=o.y+o.height&&e.y>o.y+o.height-n.bottom&&(t=Math.max(t.scrollVerticalLineChange,1),r.y+=t|=0,e.y>o.y+o.height-n.bottom/2&&(r.y+=t),e.y>o.y+o.height-n.bottom/4&&(r.y+=4*t)),r.Ma(yt)||(i=new pt(i.x+r.x/a,i.y+r.y/a)),Vt.free(o),pt.free(r),i}function qa(t,e,i){function n(){var t=+new Date;for(a=!0,r.reset();r.next();)if(!r.value[0].ul){a=!1;break}a||t-l>c?e(i,o,s):f.requestAnimationFrame(n)}for(var o=i.callback,a=!0,r=t.Ci.iterator;r.next();)if(!r.value[0].ul){a=!1;break}if("function"!=typeof o||a)return e(i,o,t);var s=t,c=i.callbackTimeout||300,l=+new Date;return f.requestAnimationFrame(function(){n()}),null}function Xa(t,e,i,n){if(t.animationManager.Xc(),t.Wc(),null===t.sa)return null;"object"!=typeof e&&_("properties argument must be an Object.");var o=e.size||null,a=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(a="NaN");var r=e.maxSize;void 0===e.maxSize&&(r="SVG"===i?new Lt(1/0,1/0):new Lt(2e3,2e3));var s=e.position||null,c=e.parts||null,l=void 0===e.padding?1:e.padding,u=e.background||null,d=e.omitTemporary;void 0===d&&(d=!0);var h=e.document||document,p=e.elementFinished||null,f=e.showTemporary;void 0===f&&(f=!d),void 0===(e=e.showGrid)&&(e=f),null!==o&&isNaN(o.width)&&isNaN(o.height)&&(o=null),"number"==typeof l?l=new Jt(l):l instanceof Jt||_("MakeImage padding must be a Margin or a number."),l.left=Math.max(l.left,0),l.right=Math.max(l.right,0),l.top=Math.max(l.top,0),l.bottom=Math.max(l.bottom,0),t.Eb.sc(!0);var g=(d=new Ls(null,h)).context;if(!(o||a||c||s))return d.width=t.wa+Math.ceil(l.left+l.right),d.height=t.va+Math.ceil(l.top+l.bottom),"SVG"===i?null===n?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=h,n.kq=p,la(t,n.context,l,new Lt(d.width,d.height),t.ya,t.ma,c,u,f,e),n.context):(t.Xk=!1,la(t,g,l,new Lt(d.width,d.height),t.ya,t.ma,c,u,f,e),t.Xk=!0,d.context);var m=t.yn,v=t.documentBounds.copy();if(v.nw(t.cb),f)for(var b=t.Ja.j,w=b.length,y=0;y<w;y++){var k=b[y];if(k.visible&&k.isTemporary)for(var x=(k=k.Ca.j).length,S=0;S<x;S++){var T=k[S];T.isInDocumentBounds&&T.isVisible()&&(T=T.actualBounds).v()&&v.Hc(T)}}if(b=new pt(v.x,v.y),null!==c){for(w=!0,(y=c.iterator).reset();y.next();)if((k=y.value)instanceof su&&(null===(x=k.layer)||x.visible)&&(null===x||f||!x.isTemporary)&&k.isVisible()&&(k=k.actualBounds).v())if(w){w=!1;var C=k.copy()}else C.Hc(k);w&&(C=new Vt(0,0,0,0)),v.width=C.width,v.height=C.height,b.x=C.x,b.y=C.y}return null!==s&&s.v()&&(b=s,a||(a=m)),C=s=0,null!==l&&(s=l.left+l.right,C=l.top+l.bottom),w=y=0,null!==o&&(y=o.width,w=o.height,isFinite(y)&&(y=Math.max(0,y-s)),isFinite(w)&&(w=Math.max(0,w-C))),null!==o&&null!==a?("NaN"===a&&(a=m),o.v()?(o=y,v=w):isNaN(w)?(o=y,v=v.height*a):(o=v.width*a,v=w)):null!==o?o.v()?(a=Math.min(y/v.width,w/v.height),o=y,v=w):isNaN(w)?(o=y,v=v.height*(a=y/v.width)):(o=v.width*(a=w/v.height),v=w):null!==a?"NaN"===a&&r.v()?(a=Math.min((r.width-s)/v.width,(r.height-C)/v.height))>m?(a=m,o=v.width,v=v.height):(o=r.width,v=r.height):(o=v.width*a,v=v.height*a):(a=m,o=v.width,v=v.height),null!==l?(o+=s,v+=C):l=new Jt(0),null!==r&&(m=r.width,r=r.height,isNaN(m)&&(m=2e3),isNaN(r)&&(r=2e3),isFinite(m)&&(o=Math.min(o,m)),isFinite(r)&&(v=Math.min(v,r))),d.width=Math.ceil(o),d.height=Math.ceil(v),"SVG"===i?null===n?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=h,n.kq=p,la(t,n.context,l,new Lt(Math.ceil(o),Math.ceil(v)),a,b,c,u,f,e),n.context):(t.Xk=!1,la(t,g,l,new Lt(Math.ceil(o),Math.ceil(v)),a,b,c,u,f,e),t.Xk=!0,d.context)}Io.className="AnimationTrigger",Io.Default=Po,Io.Immediate=Mo,Io.Bundled=Oo,(i=$o.prototype).clear=function(){this.Ca.clear(),this.Zo.length=0},i.$d=function(t){this.B=t},i.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,o=0,a=0,r=0,s=this.Ca.iterator;s.next();){var c=s.value;c instanceof Ku?o++:c instanceof Ou?n++:c instanceof id?a++:c instanceof Mu?r++:i++}if(s="",0<i&&(s+=i+" Parts "),0<n&&(s+=n+" Nodes "),0<o&&(s+=o+" Groups "),0<a&&(s+=a+" Links "),0<r&&(s+=r+" Adornments "),1<t)for(t=this.Ca.iterator;t.next();)s+="\n    "+(i=t.value).toString(),null!==(n=i.data)&&at(n)&&(s+=" #"+at(n)),i instanceof Ou?s+=" "+$(n):i instanceof id&&(s+=" "+$(i.fromNode)+" "+$(i.toNode));return e+" "+this.Ca.count+": "+s},i.Ub=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.Bi)return null;var n=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(n=!0);for(var o=pt.alloc(),a=this.Ca.j,r=a.length;r--;){var s=a[r];if((!0!==n||!1!==ku(s))&&s.isVisible()&&(o.assign(t),vt(o,s.wd),null!==(s=s.Ub(o,e,i))&&(null!==e&&(s=e(s)),null!==s&&(null===i||i(s)))))return pt.free(o),s}return pt.free(o),null},i.Ti=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),n instanceof tt||n instanceof it||(n=new it),!1===this.Bi)return n;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(o=!0);for(var a=pt.alloc(),r=this.Ca.j,s=r.length;s--;){var c=r[s];if((!0!==o||!1!==ku(c))&&c.isVisible()){a.assign(t),vt(a,c.wd);var l=c;c.Ti(a,e,i,n)&&(null!==e&&(l=e(l)),null===l||null!==i&&!i(l)||n.add(l))}}return pt.free(a),n},i.tf=function(t,e,i,n,o){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof tt||o instanceof it||(o=new it),!1===this.Bi)return o;var a=!1;null!==this.diagram&&this.diagram.viewportBounds.Be(t)&&(a=!0);for(var r=this.Ca.j,s=r.length;s--;){var c=r[s];if((!0!==a||!1!==ku(c))&&c.isVisible()){var l=c;c.tf(t,e,i,n,o)&&(null!==e&&(l=e(l)),null===l||null!==i&&!i(l)||o.add(l))}}return o},i.yv=function(t,e,i,n,o,a,r){if(!1===this.Bi)return o;for(var s=this.Ca.j,c=s.length;c--;){var l=s[c];if((!0!==r||!1!==ku(l))&&a(l)&&l.isVisible()){var u=l;l.tf(t,e,i,n,o)&&(null!==e&&(u=e(u)),null===u||null!==i&&!i(u)||o.add(u))}}return o},i.xg=function(t,e,i,n,o,a){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof tt||o instanceof it)&&(a=o),o=!0),a instanceof tt||a instanceof it||(a=new it),!1===this.Bi)return a;var r=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(r=!0);for(var s=pt.alloc(),c=pt.alloc(),l=this.Ca.j,u=l.length;u--;){var d=l[u];if((!0!==r||!1!==ku(d))&&d.isVisible()){s.assign(t),vt(s,d.wd),c.h(t.x+e,t.y),vt(c,d.wd);var h=d;d.xg(s,c,i,n,o,a)&&(null!==i&&(h=i(h)),null===h||null!==n&&!n(h)||a.add(h))}}return pt.free(s),pt.free(c),a},i.Ad=function(t,e){if(this.visible){var i=void 0===e?t.viewportBounds:e,n=this.Ca.j,o=n.length;t=P(),e=P();for(var a=0;a<o;a++){var r=n[a];r.Zw=a,r instanceof id&&!1===r.ld||r instanceof Mu&&null!==r.adornedPart||(Ht(r.actualBounds,i)?(r.Ad(!0),t.push(r)):(r.Ad(!1),null!==r.adornments&&0<r.adornments.count&&e.push(r)))}for(i=0;i<t.length;i++)for(cu(n=t[i]),n=n.adornments;n.next();)(o=n.value).measure(1/0,1/0),o.arrange(),o.Ad(!0);for(i=0;i<e.length;i++)(n=e[i]).updateAdornments(),bu(n,!0);M(t),M(e)}},i.bc=function(t,e,i){if(this.visible&&0!==this.qb&&(void 0===i&&(i=!0),i||!this.isTemporary)){var n=(i=this.Ca.j).length;if(0!==n){var o=jo(this,t),a=this.Zo;a.length=0;for(var r=e.scale,s=Vt.alloc(),c=0;c<n;c++)this.Pi(t,i[c],e,a,r,s);Vt.free(s),t.globalAlpha=o}}},i.Pi=function(t,e,i,n,o,a){if(!(null!==n&&e instanceof id&&(e.isOrthogonal&&n.push(e),!1===e.ld))){var r=e.actualBounds;n=!1;var s=e.containingGroup;if(null!==s&&s.isClipping&&s.type!==Ic.Spot){if(s.locationObject.km(a),!a.Gc(r))return;n=!a.Be(r)}n&&(t.save(),t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.clip()),r.width*o>i.Co||r.height*o>i.Co?e.bc(t,i):(a=e.naturalBounds,0===(o=e.actualBounds).width||0===o.height||isNaN(o.x)||isNaN(o.y)||!e.isVisible()||(i=e.transform,null!==e.areaBackground&&(ts(e,t,e.areaBackground,!0,!0,a,o),t.fillRect(o.x,o.y,o.width,o.height)),null===e.areaBackground&&null===e.background&&(ts(e,t,"rgba(0,0,0,0.3)",!0,!1,a,o),t.fillRect(o.x,o.y,o.width,o.height)),null!==e.background&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),ts(e,t,e.background,!0,!1,a,o),t.fillRect(0,0,a.width/2,a.height/2),i.wt()||t.transform(i.m22*(e=1/(i.m11*i.m22-i.m12*i.m21)),-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy))))),n&&(t.restore(),t.sc(!0))}},i.g=function(t,e,i,n,o){var a=this.diagram;null!==a&&a.Ya(xi,t,this,e,i,n,o)},i.aj=function(t,e,i){var n=this.Ca;if(e.ui=this,t>=n.count)t=n.count;else if(n.L(t)===e)return-1;return n.tb(t,e),e.rq(i),null!==(n=this.diagram)&&(i?n.M():n.aj(e)),Lo(this,t,e),t},i.Fc=function(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.Fc(t,e,i);var n=this.Ca;if(0>t||t>=n.length){if(0>(t=n.indexOf(e)))return-1}else if(n.L(t)!==e&&0>(t=n.indexOf(e)))return-1;return e.sq(i),n.Za(t),null!==(n=this.diagram)&&(i?n.M():n.Fc(e)),e.ui=null,t},h.Object.defineProperties($o.prototype,{parts:{get:function(){return this.Ca.iterator}},partsBackwards:{get:function(){return this.Ca.iteratorBackwards}},diagram:{get:function(){return this.B}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;if(e!==t){var i=this.diagram;if(null!==i)for(""===e&&_("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&_("Layer.name is already present in this diagram: "+t);for(this.Qa=t,this.g("name",e,t),t=this.Ca.iterator;t.next();)t.value.layerName=this.Qa}}},opacity:{get:function(){return this.qb},set:function(t){var e=this.qb;e!==t&&((0>t||1<t)&&y(t,"0 <= value <= 1",$o,"opacity"),this.qb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.M())}},isTemporary:{get:function(){return this.u},set:function(t){var e=this.u;e!==t&&(this.u=t,this.g("isTemporary",e,t))}},visible:{get:function(){return this.I},set:function(t){var e=this.I;if(e!==t){for(this.I=t,this.g("visible",e,t),e=this.Ca.iterator;e.next();)e.value.Ob(t);null!==(t=this.diagram)&&t.M()}}},pickable:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("pickable",e,t))}},isBoundsIncluded:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==this.diagram&&this.diagram.Na())}},allowCopy:{get:function(){return this.Rh},set:function(t){var e=this.Rh;e!==t&&(this.Rh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Sh},set:function(t){var e=this.Sh;e!==t&&(this.Sh=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Uh},set:function(t){var e=this.Uh;e!==t&&(this.Uh=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Wh},set:function(t){var e=this.Wh;e!==t&&(this.Wh=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Vh},set:function(t){var e=this.Vh;e!==t&&(this.Vh=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Xh},set:function(t){var e=this.Xh;e!==t&&(this.Xh=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowSelect",e,t))}}}),$o.prototype.findObjectsNear=$o.prototype.xg,$o.prototype.findObjectsIn=$o.prototype.tf,$o.prototype.findObjectsAt=$o.prototype.Ti,$o.prototype.findObjectAt=$o.prototype.Ub,$o.className="Layer",Eo.prototype.clear=function(){this.animationManager.Xc(),this.model.clear(),ur=null,dr="",No(this,!1),this.Na(),ja(this),this.M()},Eo.prototype.reset=function(){this.clear(),this.Rb=!0,this.Jc=new no,this.Jc.$d(this),this.kb=17,this.ml=this.Tu=!1,this.As="default",this.Ja=new tt,this.lx=new ht,this.bf=null,this.ew(),this.vj=null,this.dw(),this.qb=1,this.ma=new pt(NaN,NaN).freeze(),this.Bs=new pt(NaN,NaN),this.yn=this.ya=1,this.Lr=new pt(NaN,NaN).freeze(),this.Mr=NaN,this.es=1e-4,this.cs=100,this.lb=new He,this.bt=new pt(NaN,NaN).freeze(),this.Gr=new Vt(NaN,NaN,NaN,NaN).freeze(),this.Fi=new Jt(0,0,0,0).freeze(),this.Gi=yr,this.Js=!1,this.Cs=this.ws=null,this.Ig=hr,this.lj=Ie,this.Uf=hr,this.Yn=Ie,this.Nr=this.Kr=oe,this.Ac=!0,this.kl=!1,this.od=new it,this.Pg=new ht,this.Xk=!0,this.Zm=250,this.jj=-1,this.an=new Jt(16,16,16,16).freeze(),this.pj=this.ye=!1,this.sj=!0,this.Rf=new _i,this.Rf.diagram=this,this.Rd=new _i,this.Rd.diagram=this,this.$g=new _i,this.$g.diagram=this,this.qe=this.Jf=null,this.Pj=!1,this.wr=this.xr=null,this.Vm=f.PointerEvent&&(V||z||F)&&f.navigator&&!1!==f.navigator.msPointerEnabled,Va(this),this.wh=new it,this.Vr=!0,this.Xs=xr,this.xu=!1,this.Zs=gr,this.qr=this.tr=this.Vs=null,this.xn=this.nr="auto",this.cg=this.hs=this.eg=this.fg=this.hg=this.Lf=this.Pf=this.Kf=null,this.Jr=!1,this.Mf=this.rg=this.gg=this.dg=null,this.js=!1,this.us={},this.Kj=[null,null],this.hr=null,this.ur=this.Ns=this.Vu=this.pg=!1,this.Du=!0,this.ni=this.Bc=!1,this.dv=!0,this.Jd=-2,this.Ci=new ht,this.ts=new tt,this.Wf=!1,this.Sh=this.Rh=this.Vq=this.Mc=!0,this.Wq=!1,this.br=this.$q=this.$h=this.Zh=this.Yh=this.Xh=this.Vh=this.Wh=this.Uh=this.Zq=this.bi=this.Th=this.ai=this.Xq=!0,this.Vf=this.zu=!1,this.ar=this.Yq=this.cl=this.bl=!0,this.Is=this.Es=16,this.Ds=this.wp=!1,this.Fs=this.Hs=0,this.cb=new Jt(5).freeze(),this.Uu=(new it).freeze(),this.ds=999999999,this.uu=(new it).freeze(),this.mi=this.li=this.ki=!0,this.Se=this.je=!1,this.ic=null,this.Ff=!0,this.ke=!1,this.$w=new it,this.vu=new it,this.Hb=null,this.Bl=1,this.Wu=0,this.Sd={scale:1,position:new pt,bounds:new Vt,Nv:!1},this.cv=new Vt(NaN,NaN,NaN,NaN).freeze(),this.Yl=new Lt(NaN,NaN).freeze(),this.zn=new Vt(NaN,NaN,NaN,NaN).freeze(),this.Wr=!1,this.ro=this.Wn=this.So=this.iu=this.hu=this.ju=this.Yf=this.Yg=this.Ye=null,Vo(this),this.Gb=null,this.Vn=!1,this.mj=null,this.partManager=new Dh,this.toolManager=new Mi,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.zr=null,this.Qk=new Nr,this.os=this.ns=null,this.Pp=!1,this.commandHandler=Ao(),this.pg=!0,Ro(this),this.layout=new rh,this.pg=!1,this.model=hp(),this.model.undoManager=new Di,this.ke=!1,this.sj=!0,this.ye=!1,this.Sb=1,this.rh=null,this.Co=1,this.Jo=0,this.Ko=[0,0,0,0,0],this.Lo=0,this.pd=1,this.Aj=0,this.mo=new pt,this.Ws=500,this.$m=new pt,this.le=!1,this.kh=this.Fl=this.jh=this.El=null,this.Qp=this.ao=!1,this.Jn=null,this.Kn=Tt,this.Rb=!1,this.M()},Eo.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=f.document.body);var e=b("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,0===e.scrollLeft&&(i="negative")),t.removeChild(e),this.As=i},Eo.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=f.document.body);var e=0;if(lr){var i=cr;e=sr,null===i&&((i=cr=b("p")).style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",(e=sr=b("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",n===(i=i.offsetWidth)&&(i=e.clientWidth),t.removeChild(e),0!=(e=n-i)||R||(e=11)}this.kb=e,this.Tu=!0},Eo.prototype.eb=function(t){t.classType===Eo&&(this.autoScale=t)},Eo.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Ja.iterator;i.next();)e+="\n  "+i.value.toString(t-1);return e},Eo.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,n)},Eo.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,n)},Eo.prototype.computePixelRatio=function(){return null!==this.rh?this.rh:f.devicePixelRatio||1},Eo.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},Eo.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},Eo.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},Eo.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},Eo.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},Eo.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},Eo.prototype.doFocus=function(){this.focus()},Eo.prototype.focus=function(){if(this.sa)if(this.scrollsPageOnFocus)this.sa.focus();else{var t=f.scrollX||f.pageXOffset,e=f.scrollY||f.pageYOffset;this.sa.focus(),f.scrollTo(t,e)}},Eo.prototype.Uy=function(){this.B.R("GainedFocus")},Eo.prototype.Ty=function(){this.B.R("LostFocus")},Eo.prototype.Gx=function(t){if(null!==this.sa){this.wp=!0;var e=this.documentBounds,i=this.viewportBounds,n=this.Fi,o=e.x-n.left,a=e.y-n.top,r=e.width+n.left+n.right,s=e.height+n.top+n.bottom,c=e.right+n.right;n=e.bottom+n.bottom;var l=i.x;e=i.y;var u=i.width,d=i.height,h=i.right,p=i.bottom;i=this.scale;var f=t.scrollLeft;if(this.ml)switch(this.As){case"negative":f=f+t.scrollWidth-t.clientWidth;break;case"reverse":f=t.scrollWidth-f-t.clientWidth}var g=f;u<r||d<s?(f=pt.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Fs!==g&&(f.x=g/i+o,this.Fs=g),this.allowVerticalScroll&&this.Hs!==t.scrollTop&&(f.y=t.scrollTop/i+a,this.Hs=t.scrollTop),this.position=f,pt.free(f),this.li=this.wp=!1):(f=pt.alloc(),t.Cy&&this.allowHorizontalScroll&&(o<l&&(this.position=f.h(g+o,this.position.y)),c>h&&(this.position=f.h(-(this.Gs.scrollWidth-this.wa)+g-this.wa/i+c,this.position.y))),t.Dy&&this.allowVerticalScroll&&(a<e&&(this.position=f.h(this.position.x,t.scrollTop+a)),n>p&&(this.position=f.h(this.position.x,-(this.Gs.scrollHeight-this.va)+t.scrollTop-this.va/i+n))),pt.free(f),pa(this),this.li=this.wp=!1,c=(e=this.documentBounds).right,h=(i=this.viewportBounds).right,n=e.bottom,p=i.bottom,o=e.x,l=i.x,a=e.y,e=i.y,u>=r&&o>=l&&c<=h&&(this.xp.style.width="1px"),d>=s&&a>=e&&n<=p&&(this.xp.style.height="1px"))}},Eo.prototype.computeBounds=function(){return 0<this.od.count&&sa(this),Wo(this)},Eo.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var i=null;if(T(t))for(var n=0;n<t.length;n++){var o=t[n];!e&&o instanceof id||(o.zb(),null===i?i=o.actualBounds.copy():i.Hc(o.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof id||(n.zb(),null===i?i=n.actualBounds.copy():i.Hc(n.actualBounds));return null===i?new Vt(NaN,NaN,0,0):i},Eo.prototype.zoomToFit=function(){var t=this.Gi;this.Gi=yr,this.scale=Xo(this,pr),t!==yr&&(qo(this,!1),Yo(this,this.documentBounds,this.wa/this.ya,this.va/this.ya,this.lj,!1)),this.Gi=t},(i=Eo.prototype).HA=function(t,e){void 0===e&&(e=pr);var i=t.width,n=t.height;if(!(0===i||0===n||isNaN(i)&&isNaN(n))){var o=1;if(e===pr||e===fr)if(isNaN(i))o=this.viewportBounds.height*this.scale/n;else if(isNaN(n))o=this.viewportBounds.width*this.scale/i;else{o=this.wa;var a=this.va;o=e===fr?a/n>o/i?(a-(this.je?this.kb:0))/n:(o-(this.Se?this.kb:0))/i:Math.min(a/n,o/i)}this.scale=o,this.position=new pt(t.x,t.y)}},i.Oy=function(t,e){ja(this);var i=this.documentBounds,n=this.viewportBounds;this.position=new pt(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},i.Cz=function(t){if(t instanceof qr){this.Jn=t;var e=pt.alloc();this.Kn=this.Oq(t.ga(oe,e)),pt.free(e)}else this.Jn=null,this.Kn=Tt},i.im=function(t,e){if(void 0===e&&(e=!0),e){if((t=Ko(this,t,function(t){return t.part},function(t){return t.canSelect()}))instanceof su)return t}else if((t=Ko(this,t,function(t){return t.part}))instanceof su)return t;return null},i.Ub=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),sa(this);for(var n=this.Ja.iteratorBackwards;n.next();){var o=n.value;if(o.visible&&null!==(o=o.Ub(t,e,i)))return o}return null},i.pz=function(t,e,i){return void 0===e&&(e=!0),function(t,e,i,n,o){for(void 0===i&&(i=null),void 0===n&&(n=null),o instanceof tt||o instanceof it||(o=new it),sa(t),t=t.Ja.iteratorBackwards;t.next();){var a=t.value;a.visible&&!a.isTemporary&&a.Ti(e,i,n,o)}return o}(this,t,function(t){return t.part},e?function(t){return t instanceof su&&t.canSelect()}:null,i)},i.Ti=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),n instanceof tt||n instanceof it||(n=new it),sa(this);for(var o=this.Ja.iteratorBackwards;o.next();){var a=o.value;a.visible&&a.Ti(t,e,i,n)}return n},i.Ox=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i=!0),function(t,e,i,n,o){var a=null;for(void 0===a&&(a=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof tt||o instanceof it||(o=new it),sa(t),t=t.Ja.iteratorBackwards;t.next();){var r=t.value;r.visible&&!r.isTemporary&&r.tf(e,a,i,n,o)}return o}(this,t,function(t){return t instanceof su&&(!i||t.canSelect())},e,n)},i.tf=function(t,e,i,n,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof tt||o instanceof it||(o=new it),sa(this);for(var a=this.Ja.iteratorBackwards;a.next();){var r=a.value;r.visible&&r.tf(t,e,i,n,o)}return o},i.yv=function(t,e,i,n,o,a){var r=new it;sa(this);for(var s=this.Ja.iteratorBackwards;s.next();){var c=s.value;c.visible&&c.yv(t,e,i,n,r,o,a)}return r},i.qz=function(t,e,i,n,o){return void 0===i&&(i=!0),void 0===n&&(n=!0),function(t,e,i,n,o,a){var r=null;for(void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof tt||o instanceof it)&&(a=o),o=!0),a instanceof tt||a instanceof it||(a=new it),sa(t),t=t.Ja.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.xg(e,i,r,n,o,a)}return a}(this,t,e,function(t){return t instanceof su&&(!n||t.canSelect())},i,o)},i.xg=function(t,e,i,n,o,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof tt||o instanceof it)&&(a=o),o=!0),a instanceof tt||a instanceof it||(a=new it),sa(this);for(var r=this.Ja.iteratorBackwards;r.next();){var s=r.value;s.visible&&s.xg(t,e,i,n,o,a)}return a},Eo.prototype.acceptEvent=function(t){return Zo(this,t,t instanceof MouseEvent)},Eo.prototype.Zz=function(t){var e=this.B;if(!this.B.isEnabled)return!1;var i=Zo(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),ia(i,t)},Eo.prototype.$z=function(t){var e=this.B;if(!e.isEnabled)return!1;var i=Zo(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),ia(i,t)},Eo.prototype.fz=function(t){var e=this.B;if(!e.isEnabled)return!1;var i=Zo(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(i),ia(i,t)},Eo.prototype.gz=function(t){var e=this.B;if(!e.isEnabled)return!1;var i=Zo(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(i),ia(i,t)},Eo.prototype.getMouse=function(t){var e=this.sa;if(null===e)return new pt(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.wa/i.width*i.left,t=t.clientY-this.va/i.height*i.top,null!==this.lb?vt(new pt(e,t),this.lb):new pt(e,t)},(i=Eo.prototype).Na=function(){this.ki||(this.ki=!0,this.Pb(!0))},i.Zd=function(){this.Rb||this.Bc||(this.M(),ha(this),pa(this),this.Na(),this.Wc())},i.Yz=function(){return this.ye},i.az=function(t){void 0===t&&(t=null);var e=this.animationManager,i=e.isEnabled;e.Xc(),e.isEnabled=!1,ra(this),this.ke=!1,this.Bs=new pt(NaN,NaN),e.isEnabled=i,null!==t&&v(function(){oo(e,"Model"),t()},1)},i.Pb=function(t){if(void 0===t&&(t=!1),!0!==this.ye&&!(this.Rb||!1===t&&this.Bc)){this.ye=!0;var e=this;f.requestAnimationFrame(function(){e.ye&&e.Wc()})}},i.Wc=function(){this.sj&&!this.ye||(this.sj&&(this.sj=!1),ra(this))},i.xw=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Wb()||i instanceof Ku||(i.bj()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)(i=t.value)instanceof Ku&&i.isVisible()&&ca(this,i);for(t.reset();t.next();)(i=t.value)instanceof id&&i.isVisible()&&(i.bj()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)(i=t.value)instanceof Mu&&i.isVisible()&&(i.bj()?(i.measure(1/0,1/0),i.arrange()):e.add(i))},i.Ad=function(t,e,i,n){if(this.mi||this.animationManager.isAnimating)for(var o=0;o<e;o++)t[o].Ad(i,n)},i.bc=function(t,e){if(void 0===e&&(e=null),null!==this.La){null===this.sa&&_("No canvas specified");var i=this.animationManager;if(!i.qc&&(!i.isAnimating||i.isTicking)){var n=new Date;if(fa(this),"0"!==this.La.style.opacity){var o=t!==this.Eb,a=this.Ja.j,r=a.length,s=this;if(this.Ad(a,r,s),o)t.sc(!0),pa(this);else if(!this.Ac&&null===e&&!i.isAnimating)return;r=this.ma;var c=this.ya,l=Math.round(r.x*c)/c,u=Math.round(r.y*c)/c;for((i=this.lb).reset(),1!==c&&i.scale(c),0===r.x&&0===r.y||i.translate(-l,-u),c=this.Sb,t.setTransform(1,0,0,1,0,0),t.scale(c,c),t.clearRect(0,0,this.wa,this.va),t.setTransform(1,0,0,1,0,0),t.scale(c,c),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),ua(this,t),t.globalAlpha=this.qb,l=null!==e?function(i){var n=e;if(i.visible&&0!==i.qb){var o=i.Ca.j,a=o.length;if(0!==a){var r=jo(i,t),c=i.Zo;c.length=0;for(var l=s.scale,u=Vt.alloc(),d=0;d<a;d++){var h=o[d];n.contains(h)||i.Pi(t,h,s,c,l,u)}Vt.free(u),t.globalAlpha=r}}}:function(e){e.bc(t,s)},r=a.length,u=0;u<r;u++)t.setTransform(1,0,0,1,0,0),t.scale(c,c),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),l(a[u]);if(this.ji&&$r(this.ji,this)&&this.Ar(),o?(this.Eb.sc(!0),pa(this)):this.Ac=this.mi=!1,o=+new Date-+n,null===this.rh){for((n=this.Ko)[this.Lo]=o,this.Lo=(this.Lo+1)%n.length,a=o=0;a<this.Ko.length;a++)o+=this.Ko[a];this.Jo=o/n.length}}}}},i.De=function(t){return this.bf[t]},i.ny=function(t,e){"minDrawingLength"===t&&(this.Co=e),this.bf[t]=e,this.Zd()},i.ew=function(){this.bf=new Y,this.bf.drawShadows=!0,this.bf.textGreeking=!0,this.bf.viewportOptimizations=!(R||V||z),this.bf.temporaryPixelRatio=!0,this.bf.pictureRatioOptimization=!0,this.Co=this.bf.minDrawingLength=1},i.lm=function(t){return this.vj[t]},i.wA=function(t,e){this.vj[t]=e},i.dw=function(){this.vj=new Y,this.vj.extraTouchArea=10,this.vj.extraTouchThreshold=10,this.vj.hasGestureZoom=!0},i.lw=function(t){da(this,t)},i.kv=function(){if(0===this.undoManager.transactionLevel&&0!==this.Pg.count){for(;0<this.Pg.count;){var t=this.Pg;for(this.Pg=new ht,t=t.iterator;t.next();){var e=t.key;e.uq(t.value),e.cc()}}this.M()}},i.M=function(t){if(void 0===t&&(t=null),null===t)this.Ac=!0,this.Pb();else{var e=this.viewportBounds;null!==t&&t.v()&&e.Gc(t)&&(this.Ac=!0,this.Pb())}this.R("InvalidateDraw")},i.Ux=function(t,e){if(!0!==this.Ac){this.Ac=!0;var i=!0===this.De("temporaryPixelRatio");if(!0===this.De("viewportOptimizations")&&this.scrollMode!==kr&&this.Fi.Ri(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,o=Math.max(t.x,e.x),a=Math.max(t.y,e.y);if(n=Vt.allocAt(o,a,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-o)*n,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-a)*n),!this.Qp&&0<n.width&&0<n.height){if(!(this.Bc||(this.ye=!1,null===this.La||(this.Bc=!0,this.kv(),this.documentBounds.v()||$a(this,this.computeBounds()),o=this.sa,null===o||o instanceof Ds)))){var r=this.Sb;a=this.wa*r;var s=this.va*r,c=this.scale*r,l=Math.round(Math.round(e.x*c)-Math.round(t.x*c));e=Math.round(Math.round(e.y*c)-Math.round(t.y*c)),t=this.Tw,(c=this.mu).width!==a&&(c.width=a),c.height!==s&&(c.height=s),t.clearRect(0,0,a,s),c=190*r;var u=70*r,d=Math.max(l,0),h=Math.max(e,0),p=Math.floor(a-d),f=Math.floor(s-h);t.drawImage(o.Ea,d,h,p,f,0,0,p,f),$r(this.ji,this)&&t.clearRect(0,0,c,u),o=P(),t=P(),f=Math.abs(l),p=Math.abs(e);var g=0===d?0:a-f;d=pt.allocAt(g,0),f=pt.allocAt(f+g,s),t.push(new Vt(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y)));var m=this.lb;if(m.reset(),m.scale(r,r),1!==this.ya&&m.scale(this.ya),(0!==(r=this.ma).x||0!==r.y)&&isFinite(r.x)&&isFinite(r.y)&&m.translate(-r.x,-r.y),vt(d,m),vt(f,m),o.push(new Vt(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),d.h(0,g=0===h?0:s-p),f.h(a,p+g),t.push(new Vt(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),vt(d,m),vt(f,m),o.push(new Vt(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),$r(this.ji,this)&&(d.h(a=0<l?0:-l,s=0<e?0:-e),f.h(c+a,u+s),t.push(new Vt(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),vt(d,m),vt(f,m),o.push(new Vt(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y)))),pt.free(d),pt.free(f),aa(this,!1,!0),null===this.La&&_("No div specified"),null===this.sa&&_("No canvas specified"),!this.animationManager.qc&&(a=this.Eb,this.Ac)){for(fa(this),s=this.Sb,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.wa*s,this.va*s),a.drawImage(this.mu.Ea,0<l?0:Math.round(-l),0<e?0:Math.round(-e)),l=this.ma,r=this.ya,c=Math.round(l.x*r)/r,u=Math.round(l.y*r)/r,(e=this.lb).reset(),1!==r&&e.scale(r),0===l.x&&0===l.y||e.translate(-c,-u),a.save(),a.beginPath(),l=t.length,r=0;r<l;r++)0!==(c=t[r]).width&&0!==c.height&&a.rect(Math.floor(c.x),Math.floor(c.y),Math.ceil(c.width),Math.ceil(c.height));for(a.clip(),a.setTransform(1,0,0,1,0,0),a.scale(s,s),a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.Ad(e=this.Ja.j,l=e.length,this),ua(this,a),a.globalAlpha=this.qb,s=0;s<l;s++)if(c=o,(r=e[s]).visible&&0!==r.qb){u=jo(r,a),(h=r.Zo).length=0,d=this.scale,p=Vt.alloc(),m=(f=r.Ca.j).length,g=c.length;for(var v=0;v<m;v++){var b=f[v],w=du(b,b.actualBounds);t:{for(var y=2/d,k=4/d,x=0;x<g;x++){var S=c[x];if(0!==S.width&&0!==S.height&&w.Iv(S.x-y,S.y-y,S.width+k,S.height+k)){w=!0;break t}}w=!1}w&&r.Pi(a,b,this,h,d,p)}Vt.free(p),a.globalAlpha=u}a.restore(),a.sc(!0),this.ji&&$r(this.ji,this)&&this.Ar(),this.Ac=this.mi=!1,this.Jt()}M(o),M(t),this.Bc=!1}}else this.Wc();Vt.free(n),i&&(zo(this),this.Wc(),Fo(this,!0))}else i?(zo(this),this.Wc(),Fo(this,!0)):this.Wc()}},i.add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&_("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.hm(t.layerName))&&(e=this.hm("")),null===e&&_('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.aj(99999999,t,t.diagram===this);0<=i&&this.Ya(Si,"parts",e,null,t,null,i),e.isTemporary||this.Na(),t.C(1),null!==(i=t.layerChanged)&&i(t,null,e)}},i.aj=function(t){this.partManager.aj(t);var e=this;Lc(t,function(t){Pa(e,t)}),(t instanceof Mu||t instanceof Ku&&null!==t.placeholder)&&t.o(),null!==t.data&&Lc(t,function(t){$h(e.partManager,t)}),!0!==fs(t)&&!0!==_u(t)||this.od.add(t),mu(t,!0,this),Du(t)?(t.actualBounds.v()&&this.M(du(t,t.actualBounds)),this.Na()):t.isVisible()&&t.actualBounds.v()&&this.M(du(t,t.actualBounds)),this.Pb()},i.Fc=function(t){t.Yj(),this.partManager.Fc(t);var e=this;null!==t.data&&Lc(t,function(t){jh(e.partManager,t,e)}),this.od.remove(t),Du(t)?(t.actualBounds.v()&&this.M(du(t,t.actualBounds)),this.Na()):t.isVisible()&&t.actualBounds.v()&&this.M(du(t,t.actualBounds)),this.Pb()},i.remove=function(t){va(this,t,!0)},i.Lt=function(t,e){if(T(t))for(var i=t.length,n=0;n<i;n++){var o=t[n];e&&!o.canDelete()||this.remove(o)}else for((i=new it).addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},i.ck=function(t,e,i){return this.partManager.ck(t,e,i)},Eo.prototype.moveParts=function(t,e,i,n){if(void 0===n&&(n=wa(this)),null!==this.toolManager){var o=new ht;if(null!==t)if(T(t))for(var a=0;a<t.length;a++)ba(this,o,t[a],i,n);else for(t=t.iterator;t.next();)ba(this,o,t.value,i,n);else{for(t=this.parts;t.next();)ba(this,o,t.value,i,n);for(t=this.nodes;t.next();)ba(this,o,t.value,i,n);for(t=this.links;t.next();)ba(this,o,t.value,i,n)}_a(this,o,e,n,i)}},Eo.prototype.computeMove=function(t,e,i,n){if(void 0===n&&(n=new pt),n.assign(e),null===t)return n;var o=e,a=i.isGridSnapEnabled;a&&(i.isGridSnapRealtime||this.lastInput.up)&&ya(this,t,e,o=pt.alloc(),i),i=null!==t.dragComputation?t.dragComputation(t,e,o):o;var r=t.minLocation,s=r.x;isNaN(s)&&(s=a?Math.round(t.location.x):t.location.x),r=r.y,isNaN(r)&&(r=a?Math.round(t.location.y):t.location.y);var c=t.maxLocation,l=c.x;return isNaN(l)&&(l=a?Math.round(t.location.x):t.location.x),c=c.y,isNaN(c)&&(c=a?Math.round(t.location.y):t.location.y),n.h(Math.max(s,Math.min(i.x,l)),Math.max(r,Math.min(i.y,c))),o!==e&&pt.free(o),n},(i=Eo.prototype).td=function(t,e,i){if(void 0===i)return new Lr(yt);var n=t.isGridSnapEnabled;return t.Pz||null===e.containingGroup||(n=!1),new Lr(n?new pt(Math.round(i.x),Math.round(i.y)):i.copy())},i.Zl=function(t){Ta(this,t,null),t.$d(this);var e=this.Ja,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.L(i).isTemporary;)i--;e.tb(i+1,t),null!==this.ac&&this.Ya(Si,"layers",this,null,t,null,i+1),this.M(),this.Na()},i.vx=function(t,e){Ta(this,t,e),t.$d(this);var i=this.Ja,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.ac&&this.Ya(Ti,"layers",this,t,null,n,null));var o,a=i.count;for(o=0;o<a;o++)if(i.L(o)===e){i.tb(o,t);break}null!==this.ac&&this.Ya(Si,"layers",this,null,t,null,o),this.M(),0>n&&this.Na()},i.Iy=function(t,e){Ta(this,t,e),t.$d(this);var i=this.Ja,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.ac&&this.Ya(Ti,"layers",this,t,null,n,null));var o,a=i.count;for(o=0;o<a;o++)if(i.L(o)===e){i.tb(o+1,t);break}null!==this.ac&&this.Ya(Si,"layers",this,null,t,null,o+1),this.M(),0>n&&this.Na()},i.pA=function(t){if(t.diagram!==this&&_("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Ja,i=e.indexOf(t);if(e.remove(t)){for(e=t.Ca.copy().iterator;e.next();){var n=e.value,o=n.layerName;n.layerName=o!==t.name?o:""}null!==this.ac&&this.Ya(Ti,"layers",this,t,null,i,null),this.M(),this.Na()}}},i.hm=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},i.xx=function(t){null===this.qe&&(this.qe=new tt),this.qe.add(t),this.model.Ah(t)},i.rA=function(t){null!==this.qe&&(this.qe.remove(t),0===this.qe.count&&(this.qe=null)),this.model.wk(t)},i.Ah=function(t){null===this.Jf&&(this.Jf=new tt),this.Jf.add(t)},i.wk=function(t){null!==this.Jf&&(this.Jf.remove(t),0===this.Jf.count&&(this.Jf=null))},i.dt=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Gv(t),t.change!==ki&&(this.isModified=!0),null!==this.Jf)for(var e=this.Jf,i=e.length,n=0;n<i;n++)e.L(n)(t)},i.Ya=function(t,e,i,n,o,a,r){void 0===a&&(a=null),void 0===r&&(r=null);var s=new yi;s.diagram=this,s.change=t,s.propertyName=e,s.object=i,s.oldValue=n,s.oldParam=a,s.newValue=o,s.newParam=r,this.dt(s)},i.g=function(t,e,i,n,o){this.Ya(xi,t,this,e,i,n,o)},Eo.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===xi){var o=t.object;if(mp(o,t.propertyName,t.H(e)),o instanceof qr){var a=o.part;null!==a&&a.Lb()}this.isModified=!0}else if(n===Si){var r=t.object,s=t.newParam,c=t.newValue;if(r instanceof Ic){if("number"==typeof s&&c instanceof qr){e?r.Fc(s):r.tb(s,c);var l=r.part;null!==l&&l.Lb()}else if("number"==typeof s&&c instanceof tl)if(e)c.isRow?r.bw(s):r.$v(s);else{var u=c.isRow?r.getRowDefinition(c.index):r.getColumnDefinition(c.index);u.gt(c)}}else if(r instanceof $o){var d=!0===t.oldParam;"number"==typeof s&&c instanceof su&&(e?(c.isSelected=!1,c.isHighlighted=!1,c.Lb(),r.Fc(d?s:-1,c,d)):r.aj(s,c,d))}else r instanceof Eo?"number"==typeof s&&c instanceof $o&&(e?this.Ja.Za(s):(c.$d(this),this.Ja.tb(s,c))):_("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Ti){var h=t.object,p=t.oldParam,f=t.oldValue;if(h instanceof Ic)"number"==typeof p&&f instanceof qr?e?h.tb(p,f):h.Fc(p):"number"==typeof p&&f instanceof tl&&(e?(u=f.isRow?h.getRowDefinition(f.index):h.getColumnDefinition(f.index)).gt(f):f.isRow?h.bw(p):h.$v(p));else if(h instanceof $o){var g=!0===t.newParam;"number"==typeof p&&f instanceof su&&(e?0>h.Ca.indexOf(f)&&h.aj(p,f,g):(f.isSelected=!1,f.isHighlighted=!1,f.Lb(),h.Fc(g?p:-1,f,g)))}else h instanceof Eo?"number"==typeof p&&f instanceof $o&&(e?(f.$d(this),this.Ja.tb(p,f)):this.Ja.Za(p)):_("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==ki&&_("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},Eo.prototype.ua=function(t){return this.undoManager.ua(t)},Eo.prototype.Ua=function(t){return this.undoManager.Ua(t)},Eo.prototype.Af=function(){return this.undoManager.Af()},Eo.prototype.commit=function(t,e){void 0===e&&(e="");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.ua(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Ua(e):this.undoManager.Af(),this.skipsUndoManager=i}},Eo.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},Eo.prototype.Qq=function(){this.partManager.Qq()},Eo.prototype.Cq=function(t,e,i,n){if(!t.w(e)){void 0===n&&(n=!1),n||ha(this),pa(this);var o=this.layout;null===o||!o.isViewportSized||this.autoScale!==hr||n||t.width===e.width&&t.height===e.height||o.C(),o=this.currentTool,!0===this.Vf&&o instanceof Mi&&(this.lastInput.documentPoint=this.St(this.lastInput.viewPoint),Oi(o,this)),this.Rb||this.Ux(t,e),Da(this),this.Sd.scale=i,this.Sd.position.x=t.x,this.Sd.position.y=t.y,this.Sd.bounds.assign(t),this.Sd.Nv=n,this.R("ViewportBoundsChanged",this.Sd,t),this.isVirtualized&&this.links.each(function(t){t.isAvoiding&&t.actualBounds.Gc(e)&&t.Ta()})}},Eo.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.R("ChangingSelection",e);for(var i=e.na(),n=i.length,o=0;o<n;o++)i[o].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},Eo.prototype.select=function(t){null!==t&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},Eo.prototype.vA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),T(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof su||_("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof su||_("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},Eo.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.na(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},(i=Eo.prototype).Rz=function(t){null!==t&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},i.Sz=function(t){t=(new it).addAll(t);for(var e=this.highlighteds.copy().Gq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof su||_("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},i.scroll=function(t,e,i){void 0===i&&(i=1);var n="up"===e||"down"===e,o=0;if("pixel"===t)o=i;else if("line"===t)o=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=n?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(o=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return o=this.documentBounds,i=this.viewportBounds,n=pt.alloc(),"up"===e?this.position=n.h(i.x,o.y):"left"===e?this.position=n.h(o.x,i.y):"down"===e?this.position=n.h(i.x,o.bottom-i.height):"right"===e&&(this.position=n.h(o.right-i.width,i.y)),void pt.free(n);_("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,i=this.position.copy(),"up"===e?i.y=this.position.y-o:"down"===e?i.y=this.position.y+o:"left"===e?i.x=this.position.x-o:"right"===e?i.x=this.position.x+o:_("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=i},i.gw=function(t){var e=this.viewportBounds;e.Be(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},i.et=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},i.Oq=function(t){var e=this.lb;e.reset(),1!==this.ya&&e.scale(this.ya);var i=this.ma;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.lb)},i.EA=function(t){var e=this.lb,i=t.x,n=t.y,o=i+t.width,a=n+t.height,r=e.m11,s=e.m12,c=e.m21,l=e.m22,u=e.dx,d=e.dy,h=i*r+n*c+u;e=i*s+n*l+d;var p=o*r+n*c+u;return t=o*s+n*l+d,n=i*r+a*c+u,i=i*s+a*l+d,r=o*r+a*c+u,o=o*s+a*l+d,a=Math.min(h,p),h=Math.max(h,p),p=Math.min(e,t),e=Math.max(e,t),a=Math.min(a,n),h=Math.max(h,n),p=Math.min(p,i),e=Math.max(e,i),a=Math.min(a,r),h=Math.max(h,r),new Vt(a,p=Math.min(p,o),h-a,(e=Math.max(e,o))-p)},i.St=function(t){var e=this.lb;e.reset(),1!==this.ya&&e.scale(this.ya);var i=this.ma;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),vt(t.copy(),this.lb)},Eo.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===ki&&"S"===n[0])if("StartingFirstTransaction"===n){var o=this;(t=this.toolManager).mouseDownTools.each(function(t){t.diagram=o}),t.mouseMoveTools.each(function(t){t.diagram=o}),t.mouseUpTools.each(function(t){t.diagram=o}),this.Bc||this.ke||(this.pj=!0,this.sj&&(this.ye=!0))}else"StartingUndo"===n||"StartingRedo"===n?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Xc(),this.R("ChangingSelection",this.selection)):"StartedTransaction"===n&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Xc();else if(this.Z){this.Z=!1;try{if(""===t.modelChange&&i===ki){"FinishedUndo"!==n&&"FinishedRedo"!==n||(this.R("ChangedSelection",this.selection),sa(this));var a=this.animationManager;"RolledBackTransaction"===n&&a.Xc(),this.pj=!0,this.Wc(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||ro(a),"CommittedTransaction"===n&&this.undoManager.Eu&&(this.Jd=Math.min(this.Jd,this.undoManager.historyIndex-1)),"CommittedTransaction"!==n&&"RolledBackTransaction"!==n||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var r=t.isTransactionFinished;if(r&&(Ia(this),this.At.clear(),function(t){for(t=t.Ck.iterator;t.next();)t.value.ol=!1}(this.animationManager)),!this.js&&r){this.js=!0;var s=this;v(function(){s.currentTool.standardMouseOver(),s.js=!1},10)}}}finally{this.Z=!0}}}},Eo.prototype.zd=function(){this.partManager.zd()},Eo.prototype.Tj=function(t,e){this.Jc.Tj(t,e)},Eo.prototype.Vj=function(t,e){this.Jc.Vj(t,e)},Eo.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},Eo.prototype.Kb=function(t){return this.partManager.Kb(t)},Eo.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(i=Eo.prototype).wc=function(t){return this.partManager.wc(t)},i.Si=function(t){return this.partManager.Si(t)},i.vc=function(t){return this.partManager.vc(t)},i.mt=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.mt.apply(this.partManager,e instanceof Array?e:a(o(e)))},i.lt=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.lt.apply(this.partManager,e instanceof Array?e:a(o(e)))},i.vz=function(){for(var t=new it,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)(i=e.value).isTopLevel&&t.add(i);return t.iterator},i.uz=function(){return this.wh.iterator},i.cA=function(t){sa(this),t&&La(this,!0),this.pj=!0,ra(this)},i.Bz=function(){for(var t=new tt,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&null===i.Vi()&&t.add(i)}return t.iterator},i.Uj=function(t,e){null!==(t=Fa(this,t))&&t.add(e)},i.xm=function(t,e){null!==(t=Fa(this,t))&&t.remove(e)},i.R=function(t,e,i){var n=Fa(this,t),o=new wi;if(o.diagram=this,null!==(t=za(this,t))&&(o.name=t),void 0!==e&&(o.subject=e),void 0!==i&&(o.parameter=i),1===(e=n.length))n.L(0)(o);else if(0!==e)for(n=n.na(),i=0;i<e;i++)(0,n[i])(o)},i.lk=function(t,e){return void 0===e&&(e=null),Ra(this,!1,null,e).lk(t.x,t.y,t.width,t.height)},Eo.prototype.computeOccupiedArea=function(){return this.isVirtualized?this.viewportBounds.copy():this.ki?Wo(this):this.documentBounds.copy()},(i=Eo.prototype).it=function(t){this.$m.assign(t),Wa(this,this.$m).Ma(this.position)?this.Bf():Ha(this)},i.Bf=function(){-1!==this.jj&&(f.clearTimeout(this.jj),this.jj=-1)},i.Ct=function(){return null},i.Ov=function(){return null},i.My=function(t,e){this.lx.add(t,e)},i.eA=function(t){return lr?(void 0===t&&(t=new Y),t.returnType="Image",this.Wx(t)):null},i.Wx=function(t){return void 0===t&&(t=new Y),qa(this,this.fA,t)},i.fA=function(t,e,i){var n=Xa(i,t,"canvas",null);if(null===n)return null;var o=null;if(null!==(i=n.Y.canvas))switch(o=t.returnType,o=void 0===o?"string":o.toLowerCase(),o){case"imagedata":o=n.getImageData(0,0,i.width,i.height);break;case"image":(n=(t.document||document).createElement("img")).src=i.toDataURL(t.type,t.details),o=n;break;case"blob":return"function"!=typeof e&&_('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof i.toBlob?(i.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof i.msToBlob?(e(i.msToBlob()),"msToBlob"):(e(null),null);default:o=i.toDataURL(t.type,t.details)}return"function"==typeof e?(e(o),null):o},h.Object.defineProperties(Eo.prototype,{div:{get:function(){return this.La},set:function(t){if(this.La!==t){H=[];var e=this.La;null!==e?(e.B=void 0,e.innerHTML="",null!==this.sa&&(this.removeEventListener(e=this.sa.Ea,"touchstart",this.sw,!1),this.removeEventListener(e,"touchmove",this.rw,!1),this.removeEventListener(e,"touchend",this.qw,!1),this.sa.Hx()),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(t){t.cancelWaitAfter()}),e.mouseMoveTools.each(function(t){t.cancelWaitAfter()}),e.mouseUpTools.each(function(t){t.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Eb=this.sa=null,this.removeEventListener(f,"resize",this.yw,!1),this.removeEventListener(f,"mousemove",this.qk,!0),this.removeEventListener(f,"mousedown",this.pk,!0),this.removeEventListener(f,"mouseup",this.sk,!0),this.removeEventListener(f,"wheel",this.tk,!0),this.removeEventListener(f,"mouseout",this.rk,!0),ar===this&&(ar=null)):this.ke=!1,this.La=null,null!==t&&((e=t.B)&&(e.div=null),jr(this,t),this.Zd())}}},zx:{get:function(){return this.Jo}},kk:{get:function(){return this.ke}},draggedLink:{get:function(){return this.zr},set:function(t){this.zr!==t&&(this.zr=t,null!==t&&(this.ns=t.fromPort,this.os=t.toPort))}},Zx:{get:function(){return this.ns},set:function(t){this.ns=t}},$x:{get:function(){return this.os},set:function(t){this.os=t}},animationManager:{get:function(){return this.Jc}},undoManager:{get:function(){return this.ac.undoManager}},skipsUndoManager:{get:function(){return this.pg},set:function(t){this.pg=t,this.ac.skipsUndoManager=t}},delaysLayout:{get:function(){return this.ur},set:function(t){this.ur=t}},opacity:{get:function(){return this.qb},set:function(t){var e=this.qb;e!==t&&((0>t||1<t)&&y(t,"0 <= value <= 1",Eo,"opacity"),this.qb=t,this.g("opacity",e,t),this.M())}},validCycle:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Ja.iterator}},isModelReadOnly:{get:function(){var t=this.ac;return null!==t&&t.isReadOnly},set:function(t){var e=this.ac;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Wf},set:function(t){var e=this.Wf;e!==t&&(this.Wf=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Mc},set:function(t){var e=this.Mc;e!==t&&(this.Mc=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Vq},set:function(t){var e=this.Vq;e!==t&&(this.Vq=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Rh},set:function(t){var e=this.Rh;e!==t&&(this.Rh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Sh},set:function(t){var e=this.Sh;e!==t&&(this.Sh=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Wq},set:function(t){var e=this.Wq;e!==t&&(this.Wq=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Xq},set:function(t){var e=this.Xq;e!==t&&(this.Xq=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Zq},set:function(t){var e=this.Zq;e!==t&&(this.Zq=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Uh},set:function(t){var e=this.Uh;e!==t&&(this.Uh=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Wh},set:function(t){var e=this.Wh;e!==t&&(this.Wh=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Vh},set:function(t){var e=this.Vh;e!==t&&(this.Vh=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Xh},set:function(t){var e=this.Xh;e!==t&&(this.Xh=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.$q},set:function(t){var e=this.$q;e!==t&&(this.$q=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.br},set:function(t){var e=this.br;e!==t&&(this.br=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.cl},set:function(t){var e=this.cl;e!==t&&(this.cl=t,ha(this),this.M(),this.g("hasVerticalScrollbar",e,t),qo(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.bl},set:function(t){var e=this.bl;e!==t&&(this.bl=t,ha(this),this.M(),this.g("hasHorizontalScrollbar",e,t),qo(this,!1))}},allowHorizontalScroll:{get:function(){return this.Yq},set:function(t){var e=this.Yq;e!==t&&(this.Yq=t,this.g("allowHorizontalScroll",e,t),qo(this,!1))}},allowVerticalScroll:{get:function(){return this.ar},set:function(t){var e=this.ar;e!==t&&(this.ar=t,this.g("allowVerticalScroll",e,t),qo(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Es},set:function(t){var e=this.Es;e!==t&&(0>t&&y(t,">= 0",Eo,"scrollHorizontalLineChange"),this.Es=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.Is},set:function(t){var e=this.Is;e!==t&&(0>t&&y(t,">= 0",Eo,"scrollVerticalLineChange"),this.Is=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.$g},set:function(t){this.$g=t}},firstInput:{get:function(){return this.Rf},set:function(t){this.Rf=t}},currentCursor:{get:function(){return this.nr},set:function(t){if(""===t&&(t=this.xn),this.nr!==t){var e=this.sa,i=this.La;if(null!==e){this.nr=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.xn},set:function(t){""===t&&(t="auto");var e=this.xn;e!==t&&(this.xn=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Kf},set:function(t){var e=this.Kf;e!==t&&(this.Kf=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Pf},set:function(t){var e=this.Pf;e!==t&&(this.Pf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Lf},set:function(t){var e=this.Lf;e!==t&&(this.Lf=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.fg},set:function(t){var e=this.fg;e!==t&&(this.fg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.eg},set:function(t){var e=this.eg;e!==t&&(this.eg=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.hs},set:function(t){var e=this.hs;e!==t&&(this.hs=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.cg},set:function(t){var e=this.cg;e!==t&&(this.cg=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.Jr},set:function(t){var e=this.Jr;e!==t&&(this.Jr=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.dg},set:function(t){var e=this.dg;e!==t&&(this.dg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.gg},set:function(t){var e=this.gg;e!==t&&(this.gg=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.rg},set:function(t){var e=this.rg;e!==t&&(this.rg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Mf},set:function(t){var e=this.Mf;e!==t&&(this.Mf=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.hr},set:function(t){this.hr!==t&&(this.hr=t,t.$d(this))}},toolManager:{get:function(){return this.Vs},set:function(t){this.Vs!==t&&(this.Vs=t,t.diagram=this)}},defaultTool:{get:function(){return this.tr},set:function(t){var e=this.tr;e!==t&&(this.tr=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.qr},set:function(t){var e=this.qr;null!==e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.qr=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.Uu}},maxSelectionCount:{get:function(){return this.ds},set:function(t){var e=this.ds;if(e!==t)if(0<=t&&!isNaN(t)){if(this.ds=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.R("ChangingSelection",this.selection),e=this.selection.na();for(var i=0;i<t;i++)e[i].isSelected=!1;this.R("ChangedSelection",this.selection)}}else y(t,">= 0",Eo,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.So},set:function(t){var e=this.So;e!==t&&(this.So=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Wn},set:function(t){var e=this.Wn;e!==t&&(this.Wn=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.uu}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.ao&&this.Jd!==t.historyIndex:this.ao},set:function(t){if(this.ao!==t){this.ao=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Jd=e.historyIndex),t||Ia(this)}}},model:{get:function(){return this.ac},set:function(t){var e=this.ac;if(e!==t){this.currentTool.doCancel(),null!==e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&_("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Xc(!0);var i=No(this,!0);this.ke=!1,this.sj=!0,this.Jd=-2,this.ye=!1;var n=this.Bc;this.Bc=!0,oo(this.animationManager,"Model"),null!==e&&(null!==this.qe&&this.qe.each(function(t){e.wk(t)}),e.wk(this.Ic)),this.ac=t,this.partManager=function(t){return null!==(t=rr.get(t))?new t:new Dh}(this.ac.constructor.type);for(var o=0;o<i.length;o++)this.add(i[o]);t.Ah(this.kd),this.partManager.addAllModeledParts(),t.wk(this.kd),t.Ah(this.Ic),null!==this.qe&&this.qe.each(function(e){t.Ah(e)}),this.Bc=n,this.Rb||this.M(),null!==e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.Du},set:function(t){this.Du=t}},At:{get:function(){return this.$w}},skipsModelSourceBindings:{get:function(){return this.Vu},set:function(t){this.Vu=t}},Rt:{get:function(){return this.Ns},set:function(t){this.Ns=t}},nodeTemplate:{get:function(){return this.Ye.H("")},set:function(t){var e=this.Ye.H("");e!==t&&(this.Ye.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.zd())}},nodeTemplateMap:{get:function(){return this.Ye},set:function(t){var e=this.Ye;e!==t&&(this.Ye=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.zd())}},groupTemplate:{get:function(){return this.Yg.H("")},set:function(t){var e=this.Yg.H("");e!==t&&(this.Yg.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.zd())}},groupTemplateMap:{get:function(){return this.Yg},set:function(t){var e=this.Yg;e!==t&&(this.Yg=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.zd())}},linkTemplate:{get:function(){return this.Yf.H("")},set:function(t){var e=this.Yf.H("");e!==t&&(this.Yf.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.zd())}},linkTemplateMap:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e!==t&&(this.Yf=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.zd())}},isMouseCaptured:{get:function(){return this.zu},set:function(t){var e=this.sa;null!==e&&((e=e.Ea)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.Vm?(this.removeEventListener(e,"pointermove",this.tm,!1),this.removeEventListener(e,"pointerdown",this.sm,!1),this.removeEventListener(e,"pointerup",this.vm,!1),this.removeEventListener(e,"pointerout",this.um,!1),this.addEventListener(f,"pointermove",this.tm,!0),this.addEventListener(f,"pointerdown",this.sm,!0),this.addEventListener(f,"pointerup",this.vm,!0),this.addEventListener(f,"pointerout",this.um,!0)):(this.removeEventListener(e,"mousemove",this.qk,!1),this.removeEventListener(e,"mousedown",this.pk,!1),this.removeEventListener(e,"mouseup",this.sk,!1),this.removeEventListener(e,"mouseout",this.rk,!1),this.addEventListener(f,"mousemove",this.qk,!0),this.addEventListener(f,"mousedown",this.pk,!0),this.addEventListener(f,"mouseup",this.sk,!0),this.addEventListener(f,"mouseout",this.rk,!0)),this.removeEventListener(e,"wheel",this.tk,!1),this.addEventListener(f,"wheel",this.tk,!0),this.addEventListener(f,"selectstart",this.preventDefault,!1)):(this.Vm?(this.removeEventListener(f,"pointermove",this.tm,!0),this.removeEventListener(f,"pointerdown",this.sm,!0),this.removeEventListener(f,"pointerup",this.vm,!0),this.removeEventListener(f,"pointerout",this.um,!0),this.addEventListener(e,"pointermove",this.tm,!1),this.addEventListener(e,"pointerdown",this.sm,!1),this.addEventListener(e,"pointerup",this.vm,!1),this.addEventListener(e,"pointerout",this.um,!1)):(this.removeEventListener(f,"mousemove",this.qk,!0),this.removeEventListener(f,"mousedown",this.pk,!0),this.removeEventListener(f,"mouseup",this.sk,!0),this.removeEventListener(f,"mouseout",this.rk,!0),this.addEventListener(e,"mousemove",this.qk,!1),this.addEventListener(e,"mousedown",this.pk,!1),this.addEventListener(e,"mouseup",this.sk,!1),this.addEventListener(e,"mouseout",this.rk,!1)),this.removeEventListener(f,"wheel",this.tk,!0),this.removeEventListener(f,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.tk,!1)),this.zu=t))}},position:{get:function(){return this.ma},set:function(t){var e=pt.alloc().assign(this.ma);if(!e.w(t)){var i=this.viewportBounds.copy();this.ma.assign(t),uo(this.animationManager,e,this.ma),this.Rb||null===this.sa&&!this.Yl.v()||(this.Rb=!0,Yo(this,this.zn,this.wa/(t=this.scale),this.va/t,this.lj,!1),this.Rb=!1),this.Rb||this.Cq(i,this.viewportBounds,this.ya,!1)}pt.free(e)}},initialPosition:{get:function(){return this.Lr},set:function(t){this.Lr.w(t)||(this.Lr=t.G())}},initialScale:{get:function(){return this.Mr},set:function(t){this.Mr!==t&&(this.Mr=t)}},grid:{get:function(){return null===this.Gb&&Uo(this),this.Gb},set:function(t){var e=this.Gb;if(e!==t){null===e&&(Uo(this),e=this.Gb),t.type!==Ic.Grid&&_("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;null!==i&&i.remove(e),this.Gb=t,t.name="GRID",null!==i&&i.add(t),Da(this),this.M(),this.g("grid",e,t)}}},viewportBounds:{get:function(){var t=this.cv,e=this.ma,i=this.ya;return null===this.sa?(this.Yl.v()&&t.h(e.x,e.y,this.wa/i,this.va/i),t):(t.h(e.x,e.y,Math.max(this.wa,0)/i,Math.max(this.va,0)/i),t)}},viewSize:{get:function(){return this.Yl},set:function(t){var e=this.viewSize;e.w(t)||(this.Yl=t=t.G(),this.wa=t.width,this.va=t.height,this.Na(),this.g("viewSize",e,t))}},fixedBounds:{get:function(){return this.Gr},set:function(t){var e=this.Gr;e.w(t)||(-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||_("fixedBounds width/height must not be Infinity"),this.Gr=t=t.G(),this.Na(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Fi},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.Fi;e.w(t)||(this.Fi=t=t.G(),this.g("scrollMargin",e,t),this.Zd())}},scrollMode:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,t===yr&&qo(this,!1),this.g("scrollMode",e,t),this.M())}},scrollsPageOnFocus:{get:function(){return this.Js},set:function(t){var e=this.Js;e!==t&&(this.Js=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.ws},set:function(t){var e=this.ws;e!==t&&(this.ws=t,qo(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Cs},set:function(t){var e=this.Cs;e!==t&&(this.Cs=t,Ca(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.zn}},isVirtualized:{get:function(){return this.Wr},set:function(t){var e=this.Wr;e!==t&&(this.Wr=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&Ca(this,e,t)}},defaultScale:{get:function(){return this.yn},set:function(t){this.yn=t}},autoScale:{get:function(){return this.Ig},set:function(t){var e=this.Ig;e!==t&&(this.Ig=t,this.g("autoScale",e,t),t!==hr&&qo(this,!1))}},initialAutoScale:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Nr},set:function(t){var e=this.Nr;e!==t&&(t.fb()||_("initialViewportSpot must be a specific Spot: "+t),this.Nr=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.Kr},set:function(t){var e=this.Kr;e!==t&&(t.fb()||_("initialViewportSpot must be a specific Spot: "+t),this.Kr=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.es},set:function(t){var e=this.es;e!==t&&(0<t?(this.es=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):y(t,"> 0",Eo,"minScale"))}},maxScale:{get:function(){return this.cs},set:function(t){var e=this.cs;e!==t&&(0<t?(this.cs=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):y(t,"> 0",Eo,"maxScale"))}},zoomPoint:{get:function(){return this.bt},set:function(t){this.bt.w(t)||(this.bt=t=t.G())}},contentAlignment:{get:function(){return this.lj},set:function(t){var e=this.lj;e.w(t)||(this.lj=t=t.G(),this.g("contentAlignment",e,t),qo(this,!1))}},initialContentAlignment:{get:function(){return this.Yn},set:function(t){var e=this.Yn;e.w(t)||(this.Yn=t=t.G(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.cb},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.cb;e.w(t)||(this.cb=t=t.G(),this.Na(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ia},set:function(t){var e=this.Ia;e!==t&&(null!==t.diagram&&_("Cannot share PartManagers between Diagrams: "+t.toString()),null!==e&&e.$d(null),this.Ia=t,t.$d(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.ic},set:function(t){var e=this.ic;e!==t&&(this.ic=t,t.diagram=this,t.group=null,this.Ff=!0,this.g("layout",e,t),this.Pb())}},isTreePathToChildren:{get:function(){return this.Vr},set:function(t){var e=this.Vr;if(e!==t&&(this.Vr=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)zu(t.value)}},treeCollapsePolicy:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e!==t&&(t!==xr&&t!==Sr&&t!==Tr&&_("Unknown Diagram.treeCollapsePolicy: "+t),this.Xs=t,this.g("treeCollapsePolicy",e,t))}},Ee:{get:function(){return this.xu},set:function(t){this.xu=t}},autoScrollInterval:{get:function(){return this.Zm},set:function(t){var e=this.Zm;e!==t&&(this.Zm=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.an},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.an;e.w(t)||(this.an=t=t.G(),this.Na(),this.g("autoScrollRegion",e,t))}}}),h.Object.defineProperties(Eo,{licenseKey:{get:function(){return Cr.Xb()},set:function(t){Cr.add(t)}},version:{get:function(){return Dr}}}),Eo.prototype.makeImageData=Eo.prototype.Wx,Eo.prototype.makeImage=Eo.prototype.eA,Eo.prototype.addRenderer=Eo.prototype.My,Eo.prototype.makeSVG=Eo.prototype.Ov,Eo.prototype.makeSvg=Eo.prototype.Ct,Eo.prototype.stopAutoScroll=Eo.prototype.Bf,Eo.prototype.doAutoScroll=Eo.prototype.it,Eo.prototype.isUnoccupied=Eo.prototype.lk,Eo.prototype.raiseDiagramEvent=Eo.prototype.R,Eo.prototype.removeDiagramListener=Eo.prototype.xm,Eo.prototype.addDiagramListener=Eo.prototype.Uj,Eo.prototype.findTreeRoots=Eo.prototype.Bz,Eo.prototype.layoutDiagram=Eo.prototype.cA,Eo.prototype.findTopLevelGroups=Eo.prototype.uz,Eo.prototype.findTopLevelNodesAndLinks=Eo.prototype.vz,Eo.prototype.findLinksByExample=Eo.prototype.lt,Eo.prototype.findNodesByExample=Eo.prototype.mt,Eo.prototype.findLinkForData=Eo.prototype.vc,Eo.prototype.findNodeForData=Eo.prototype.Si,Eo.prototype.findPartForData=Eo.prototype.wc,Eo.prototype.findLinkForKey=Eo.prototype.findLinkForKey,Eo.prototype.findNodeForKey=Eo.prototype.Kb,Eo.prototype.findPartForKey=Eo.prototype.findPartForKey,Eo.prototype.rebuildParts=Eo.prototype.zd,Eo.prototype.transformViewToDoc=Eo.prototype.St,Eo.prototype.transformRectDocToView=Eo.prototype.EA,Eo.prototype.transformDocToView=Eo.prototype.Oq,Eo.prototype.centerRect=Eo.prototype.et,Eo.prototype.scrollToRect=Eo.prototype.gw,Eo.prototype.scroll=Eo.prototype.scroll,Eo.prototype.highlightCollection=Eo.prototype.Sz,Eo.prototype.highlight=Eo.prototype.Rz,Eo.prototype.selectCollection=Eo.prototype.vA,Eo.prototype.select=Eo.prototype.select,Eo.prototype.updateAllRelationshipsFromData=Eo.prototype.Qq,Eo.prototype.updateAllTargetBindings=Eo.prototype.updateAllTargetBindings,Eo.prototype.commit=Eo.prototype.commit,Eo.prototype.rollbackTransaction=Eo.prototype.Af,Eo.prototype.commitTransaction=Eo.prototype.Ua,Eo.prototype.startTransaction=Eo.prototype.ua,Eo.prototype.raiseChanged=Eo.prototype.g,Eo.prototype.raiseChangedEvent=Eo.prototype.Ya,Eo.prototype.removeChangedListener=Eo.prototype.wk,Eo.prototype.addChangedListener=Eo.prototype.Ah,Eo.prototype.removeModelChangedListener=Eo.prototype.rA,Eo.prototype.addModelChangedListener=Eo.prototype.xx,Eo.prototype.findLayer=Eo.prototype.hm,Eo.prototype.removeLayer=Eo.prototype.pA,Eo.prototype.addLayerAfter=Eo.prototype.Iy,Eo.prototype.addLayerBefore=Eo.prototype.vx,Eo.prototype.addLayer=Eo.prototype.Zl,Eo.prototype.moveParts=Eo.prototype.moveParts,Eo.prototype.copyParts=Eo.prototype.ck,Eo.prototype.removeParts=Eo.prototype.Lt,Eo.prototype.remove=Eo.prototype.remove,Eo.prototype.add=Eo.prototype.add,Eo.prototype.clearDelayedGeometries=Eo.prototype.kv,Eo.prototype.setProperties=Eo.prototype.lw,Eo.prototype.resetInputOptions=Eo.prototype.dw,Eo.prototype.setInputOption=Eo.prototype.wA,Eo.prototype.getInputOption=Eo.prototype.lm,Eo.prototype.resetRenderingHints=Eo.prototype.ew,Eo.prototype.setRenderingHint=Eo.prototype.ny,Eo.prototype.getRenderingHint=Eo.prototype.De,Eo.prototype.maybeUpdate=Eo.prototype.Wc,Eo.prototype.requestUpdate=Eo.prototype.Pb,Eo.prototype.delayInitialization=Eo.prototype.az,Eo.prototype.isUpdateRequested=Eo.prototype.Yz,Eo.prototype.redraw=Eo.prototype.Zd,Eo.prototype.invalidateDocumentBounds=Eo.prototype.Na,Eo.prototype.findObjectsNear=Eo.prototype.xg,Eo.prototype.findPartsNear=Eo.prototype.qz,Eo.prototype.findObjectsIn=Eo.prototype.tf,Eo.prototype.findPartsIn=Eo.prototype.Ox,Eo.prototype.findObjectsAt=Eo.prototype.Ti,Eo.prototype.findPartsAt=Eo.prototype.pz,Eo.prototype.findObjectAt=Eo.prototype.Ub,Eo.prototype.findPartAt=Eo.prototype.im,Eo.prototype.focusObject=Eo.prototype.Cz,Eo.prototype.alignDocument=Eo.prototype.Oy,Eo.prototype.zoomToRect=Eo.prototype.HA,Eo.prototype.zoomToFit=Eo.prototype.zoomToFit,Eo.prototype.diagramScroll=Eo.prototype.Gx,Eo.prototype.focus=Eo.prototype.focus,Eo.prototype.reset=Eo.prototype.reset,Eo.useDOM=function(t){lr=!!t&&void 0!==f.document},Eo.isUsingDOM=function(){return lr};var Ya,Ka,Za,Ja,Qa,tr,er,ir,nr,or,ar=null,rr=new ht,sr=null,cr=null,lr=void 0!==f.document,ur=null,dr="",hr=new W(Eo,"None",0),pr=new W(Eo,"Uniform",1),fr=new W(Eo,"UniformToFill",2),gr=new W(Eo,"CycleAll",10),mr=new W(Eo,"CycleNotDirected",11),vr=new W(Eo,"CycleNotDirectedFast",12),br=new W(Eo,"CycleNotUndirected",13),_r=new W(Eo,"CycleDestinationTree",14),wr=new W(Eo,"CycleSourceTree",15),yr=new W(Eo,"DocumentScroll",1),kr=new W(Eo,"InfiniteScroll",2),xr=new W(Eo,"TreeParentCollapsed",21),Sr=new W(Eo,"AllParentsCollapsed",22),Tr=new W(Eo,"AnyParentsCollapsed",23),Cr=new tt,Dr="2.1.17",Ir=null,Pr=!1;function Mr(){if(lr){var t=f.document.createElement("canvas"),e=t.getContext("2d"),i=N("7ca11abfd022028846");e[i]=N("398c3597c01238");for(var n=["5da73c80a36455d5038e4972187c3cae51fd22",g.Dx+"4ae6247590da4bb21c324ba3a84e385776",He.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",qe.za],o=1;5>o;o++)e[N("7ca11abfd7330390")](N(n[o-1]),10,15*o);for(e[i]=N("39f046ebb36e4b"),i=1;5>i;i++)e[N("7ca11abfd7330390")](N(n[i-1]),10,15*i);Ir=t}}function Or(){this.Ey=null,this.l="zz@orderNum",this.Pe="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.l=!0:null}function $r(t,e){if(e.Eb.setTransform(e.Sb,0,0,e.Sb,0,0),null===t.Pe){e="f";var i=f[N("76a715b2f73f148a")][N("72ba13b5")];if(t.Pe=!0,lr){var n=Eo[N("76a115b6ed251eaf4692")];if(n)for(var o=Cr.iterator;o.next()&&!(6>(n=N(n=o.value).split(N("39e9"))).length);){var a=N(n[1]).split(".");if("7da71ca0"!==n[4])break;var r=N(g[N("6cae19")]).split(".");if(a[0]>r[0]||a[0]===r[0]&&a[1]>=r[1]){for(a=i[N("76ad18b4f73e")],r=i[N("73a612b6fb191d")](N("35e7"))+2;r<a;r++)e+=i[r];if(0>(a=e[N("73a612b6fb191d")](N(n[2])))&&N(n[2])!==N("7da71ca0ad381e90")&&(a=e[N("73a612b6fb191d")](N("76a715b2ef3e149757"))),0>a&&(a=e[N("73a612b6fb191d")](N("76a715b2ef3e149757"))),0>a&&(a=i[N("73a612b6fb191d")](N("7baa19a6f76c1988428554"))),t.Pe=!(0<=a&&a<e[N("73a612b6fb191d")](N("35"))||-1===e[N("73a612b6fb191d")](N("35"))),!t.Pe)break;if("#"!==(a=N(n[2]))[0])break;r=f.document.createElement("div");for(var s=n[0].replace(/[A-Za-z]/g,"");4>s.length;)s+="9";if(s=s.substr(s.length-4),n="",n+=["gsh","gsf"][parseInt(s.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(s.substr(0,1),10)%4],r[N("79a417a0f0181a8946")]=n,f.document[N("78a712aa")]){if(f.document[N("78a712aa")][N("7bb806b6ed32388c4a875b")](r),s=f.getComputedStyle(r).getPropertyValue(N("78a704b7e62456904c9b12701b6532a8")),f.document[N("78a712aa")][N("68ad1bbcf533388c4a875b")](r),!s)break;if(-1!==s.indexOf(parseInt(a[1]+a[2],16))&&-1!==s.indexOf(parseInt(a[3]+a[4],16))){t.Pe=!1;break}if(A||V||z||F)for(n="."+n,a=0;a<document.styleSheets.length;a++)for(var c in r=document.styleSheets[a].rules||document.styleSheets[a].cssRules)if(n===r[c].selectorText){t.Pe=!1;break}}else t.Pe=null,t.Pe=!1}}else{for(c=i[N("76ad18b4f73e")],o=i[N("73a612b6fb191d")](N("35e7"))+2;o<c;o++)e+=i[o];i=e[N("73a612b6fb191d")](N("7da71ca0ad381e90")),t.Pe=!(0<=i&&i<e[N("73a612b6fb191d")](N("35")))}}}return 0<t.Pe&&t!==t.Ey}function jr(t,e){if(lr){null!=e||_("Diagram setup requires an argument DIV."),null!==t.La&&_("Diagram has already completed setup."),"string"==typeof e?t.La=f.document.getElementById(e):e instanceof HTMLDivElement?t.La=e:_("No DIV or DIV id supplied: "+e),null===t.La&&_("Invalid DIV id; could not get element with id: "+e),void 0!==t.La.B&&_("Invalid div id; div already has a Diagram associated with it."),"static"===f.getComputedStyle(t.La,null).position&&(t.La.style.position="relative"),t.La.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.La.style["-ms-touch-action"]="none",t.La.innerHTML="",t.La.B=t;var i=t.Qp?new Ds(t):new Ls(t);if(void 0!==i.style&&(i.style.position="absolute",i.style.top="0px",i.style.left="0px","rtl"===f.getComputedStyle(t.La,null).getPropertyValue("direction")&&(t.ml=!0),i.style.zIndex="2",i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none"),t.sa=i,t.Eb=i.context,e=t.Eb,t.Sb=t.computePixelRatio(),t.wa=t.La.clientWidth||1,t.va=t.La.clientHeight||1,ga(t,t.wa,t.va),t.Ar=e.Y[N("7eba17a4ca3b1a8346")][N("78a118b7")](e.Y,Ir,4,4),t.La.insertBefore(i.Ea,t.La.firstChild),(i=new Ls(null)).width=1,i.height=1,t.mu=i,t.Tw=i.context,lr){i=b("div");var n=b("div");i.style.position="absolute",i.style.overflow="auto",i.style.width=t.wa+"px",i.style.height=t.va+"px",i.style.zIndex="1",n.style.position="absolute",n.style.width="1px",n.style.height="1px",t.La.appendChild(i),i.appendChild(n),i.onscroll=Go,i.onmousedown=Ho,i.ontouchstart=Ho,i.B=t,i.Cy=!0,i.Dy=!0,t.Gs=i,t.xp=n}t.Jt=m(function(){t.rh=null,t.M()},300),t.yw=m(function(){Bo(t)},250),t.preventDefault=function(t){return t.preventDefault(),!1},t.qk=function(e){if(t.isEnabled){t.Vf=!0;var i=Zo(t,e,!0);t.doMouseMove(),t.currentTool.isBeyondDragSize()&&(t.pd=0),ia(i,e)}},t.pk=function(e){if(t.isEnabled)if(t.Vf=!0,t.le)e.preventDefault();else{var i=Zo(t,e,!0);i.down=!0,i.clickCount=e.detail,(V||z)&&(e.timeStamp-t.Aj<t.Ws&&!t.currentTool.isBeyondDragSize()?t.pd++:t.pd=1,t.Aj=e.timeStamp,i.clickCount=t.pd),i.clone(t.firstInput),t.doMouseDown(),1===e.button?e.preventDefault():ia(i,e)}},t.sk=function(e){if(t.isEnabled)if(t.le&&2===e.button)e.preventDefault();else if(t.le&&0===e.button&&(t.le=!1),t.Pj)e.preventDefault();else{t.Vf=!0;var i=Zo(t,e,!0);i.up=!0,i.clickCount=e.detail,(V||z)&&(i.clickCount=t.pd),i.bubbles=e.bubbles,i.targetDiagram=Jo(e),t.doMouseUp(),t.Bf(),ia(i,e)}},t.tk=function(e){if(t.isEnabled){var i=Zo(t,e,!0);i.bubbles=!0;var n=0,o=0;i.delta=0,void 0!==e.deltaX?(0!==e.deltaX&&(n=0<e.deltaX?1:-1),0!==e.deltaY&&(o=0<e.deltaY?1:-1),i.delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-n:-o):void 0!==e.wheelDeltaX?(0!==e.wheelDeltaX&&(n=0<e.wheelDeltaX?-1:1),0!==e.wheelDeltaY&&(o=0<e.wheelDeltaY?-1:1),i.delta=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?-n:-o):void 0!==e.wheelDelta&&0!==e.wheelDelta&&(i.delta=0<e.wheelDelta?1:-1),t.doMouseWheel(),ia(i,e)}},t.rk=function(e){t.isEnabled&&(t.Vf=!1,Zo(t,e,!0),(e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())},t.sw=function(e){if(t.isEnabled){t.Pj=!1,t.le=!0;var i=Qo(t,e,e.targetTouches[0],1<e.touches.length),n=null;if(0<e.targetTouches.length?n=e.targetTouches[0]:0<e.changedTouches.length&&(n=e.changedTouches[0]),null!==n){var o=n.screenX;n=n.screenY;var a=t.mo;e.timeStamp-t.Aj<t.Ws&&!(25<Math.abs(a.x-o)||25<Math.abs(a.y-n))?t.pd++:t.pd=1,i.clickCount=t.pd,t.Aj=e.timeStamp,t.mo.h(o,n)}t.doMouseDown(),ia(i,e)}},t.rw=function(e){if(t.isEnabled){var i=null;0<e.targetTouches.length?i=e.targetTouches[0]:0<e.changedTouches.length&&(i=e.changedTouches[0]),i=ta(t,e,i,1<e.touches.length),t.doMouseMove(),ia(i,e)}},t.qw=function(e){if(t.isEnabled)if(t.Pj)e.preventDefault();else if(!(1<e.touches.length)){var i=null,n=null;0<e.targetTouches.length?n=e.targetTouches[0]:0<e.changedTouches.length&&(n=e.changedTouches[0]);var o=ea(t,e,!1,!0,!1,!1);null!==n&&(null!==(i=f.document.elementFromPoint(n.clientX,n.clientY))&&i.B instanceof Eo&&i.B!==t&&na(i.B,n,o),na(t,n,o),o.clickCount=t.pd),o.targetDiagram=null===i?Jo(e):i.B?i.B:null,o.targetObject=null,t.doMouseUp(),ia(o,e),t.le=!1}},t.sm=function(e){if(t.isEnabled){t.Vf=!0;var i=t.us;void 0===i[e.pointerId]&&(i[e.pointerId]=e);var n=!1;if(null!==(i=t.Kj)[0]&&i[0].pointerId===e.pointerId)i[0]=e;else if(null!==i[1]&&i[1].pointerId===e.pointerId)i[1]=e,n=!0;else if(null===i[0])i[0]=e;else{if(null!==i[1])return void e.preventDefault();i[1]=e,n=!0}"touch"!==e.pointerType&&"pen"!==e.pointerType||(t.Pj=!1,t.le=!0),i=Qo(t,e,e,n),n=t.mo;var o="touch"===e.pointerType||"pen"===e.pointerType?25:10;e.timeStamp-t.Aj<t.Ws&&!(Math.abs(n.x-e.screenX)>o||Math.abs(n.y-e.screenY)>o)?t.pd++:t.pd=1,i.clickCount=t.pd,t.Aj=e.timeStamp,t.mo.Cg(e.screenX,e.screenY),t.doMouseDown(),1===e.button?e.preventDefault():ia(i,e)}},t.tm=function(e){if(t.isEnabled){t.Vf=!0;var i=t.Kj;if(null!==i[0]&&i[0].pointerId===e.pointerId)i[0]=e;else{if(null!==i[1]&&i[1].pointerId===e.pointerId)return void(i[1]=e);if(null!==i[0])return;i[0]=e}i[0].pointerId===e.pointerId&&((i=ta(t,e,e,null!==i[1])).targetDiagram=Jo(e),t.doMouseMove(),ia(i,e))}},t.vm=function(e){if(t.isEnabled){t.Vf=!0;var i="touch"===e.pointerType||"pen"===e.pointerType,n=t.us;if(i&&t.Pj)delete n[e.pointerId],e.preventDefault();else if(null!==(n=t.Kj)[0]&&n[0].pointerId===e.pointerId){n[0]=null,n=ea(t,e,!1,!0,!0,!1);var o=f.document.elementFromPoint(e.clientX,e.clientY);null!==o&&o.B instanceof Eo&&o.B!==t&&na(o.B,e,n),na(t,e,n),n.clickCount=t.pd,n.targetDiagram=null===o?Jo(e):o.B?o.B:null,n.targetObject=null,t.doMouseUp(),ia(n,e),i&&(t.le=!1)}else null!==n[1]&&n[1].pointerId===e.pointerId&&(n[1]=null)}},t.um=function(e){if(t.isEnabled){t.Vf=!1;var i=t.us;i[e.pointerId]&&delete i[e.pointerId],null!==(i=t.Kj)[0]&&i[0].pointerId===e.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===e.pointerId&&(i[1]=null),"touch"!==e.pointerType&&"pen"!==e.pointerType&&((e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())}},e.sc(!0),function(t){var e=t.sa.Ea;e instanceof HTMLCanvasElement&&(t.Vm?(t.addEventListener(e,"pointerdown",t.sm,!1),t.addEventListener(e,"pointermove",t.tm,!1),t.addEventListener(e,"pointerup",t.vm,!1),t.addEventListener(e,"pointerout",t.um,!1)):(t.addEventListener(e,"touchstart",t.sw,!1),t.addEventListener(e,"touchmove",t.rw,!1),t.addEventListener(e,"touchend",t.qw,!1),t.addEventListener(e,"mousemove",t.qk,!1),t.addEventListener(e,"mousedown",t.pk,!1),t.addEventListener(e,"mouseup",t.sk,!1),t.addEventListener(e,"mouseout",t.rk,!1)),t.addEventListener(e,"mouseenter",t.fz,!1),t.addEventListener(e,"mouseleave",t.gz,!1),t.addEventListener(e,"wheel",t.tk,!1),t.addEventListener(e,"keydown",t.Zz,!1),t.addEventListener(e,"keyup",t.$z,!1),t.addEventListener(e,"blur",t.Ty,!1),t.addEventListener(e,"focus",t.Uy,!1),t.addEventListener(e,"selectstart",function(t){return t.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(t){return t.preventDefault(),!1},!1),t.addEventListener(e,"gesturestart",function(e){t.toolManager.gestureBehavior!==Ai&&(t.toolManager.gestureBehavior===Ni?e.preventDefault():t.le&&t.lastInput.handled||(e.preventDefault(),t.Bl=t.scale,t.currentTool.doCancel()))},!1),t.addEventListener(e,"gesturechange",function(e){if(t.toolManager.gestureBehavior!==Ai)if(t.toolManager.gestureBehavior===Ni)e.preventDefault();else if(!t.le||!t.lastInput.handled){e.preventDefault();var i=e.scale;if(null!==t.Bl){var n=t.sa.getBoundingClientRect();if(e=new pt(e.pageX-window.scrollX-t.wa/n.width*n.left,e.pageY-window.scrollY-t.va/n.height*n.top),n=t.commandHandler,(i*=t.Bl)!==t.scale&&n.canResetZoom(i)){var o=t.zoomPoint;t.zoomPoint=e,n.resetZoom(i),t.zoomPoint=o}}}},!1),t.addEventListener(f,"resize",t.yw,!1))}(t)}}function Lr(t){this.l=void 0===t?new pt:t,this.u=new pt}function Er(t,e,i){this.node=t,this.info=e,this.Fv=i}function Nr(){this.reset()}function Ar(t){1<arguments.length&&_("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Eo.call(this,t),Vr(this)}function Vr(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=ae,t.layout=new vh}function zr(t){1<arguments.length&&_("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Eo.call(this,t);var e=this;this.animationManager.isEnabled=!1,this.Rb=!0,this.Ha=null,this.cl=this.bl=!1,this.u=this.I=!0,this.$a=0,this.W=!1,this.Ll=null,this.ny("drawShadows",!1);var i=new su,n=new al;n.stroke="magenta",n.strokeWidth=2,n.fill="transparent",n.name="BOXSHAPE",i.selectable=!0,i.selectionAdorned=!1,i.selectionObjectName="BOXSHAPE",i.locationObjectName="BOXSHAPE",i.resizeObjectName="BOXSHAPE",i.cursor="move",i.add(n),this.l=i,this.allowDelete=this.allowCopy=!1,this.allowSelect=!0,this.autoScrollRegion=new Jt(0,0,0,0),this.ma.h(0,0),this.toolManager.Va("Dragging",new Ur,this.toolManager.mouseMoveTools),this.click=function(){var t=e.observed;if(null!==t){var i=t.viewportBounds,n=e.lastInput.documentPoint;t.position=new pt(n.x-i.width/2,n.y-i.height/2)}},this.Oh=function(){e.Na(),Rr(e)},this.Df=function(){null!==e.observed&&(e.Na(),e.M())},this.Lh=function(){1>e.updateDelay?e.M():e.W||(e.W=!0,setTimeout(function(){e.W=!1,Fr(e),e.M()},e.updateDelay))},this.Yc=function(){null!==e.observed&&Rr(e)},this.autoScale=pr,this.Rb=!1}function Fr(t){var e=t.sa,i=t.Eb;if(null!==e&&null!==i){if(fa(t),null===t.Ll){var n=new Ls(null);n.width=e.width,n.height=e.height,t.Ll=n}try{t.sa=t.Ll,t.Eb=t.sa.context,t.Eb.sc(!0),t.Eb.setTransform(1,0,0,1,0,0),t.Eb.clearRect(0,0,t.sa.width,t.sa.height),Br(t)}finally{t.sa=e,t.Eb=i}}}function Br(t){var e=t.observed;if(null!==e){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,o=e.grid;n&&null!==o&&o.visible&&!isNaN(o.width)&&!isNaN(o.height)&&(Da(e,o=Vt.alloc().assign(t.viewportBounds).Hc(e.viewportBounds)),Vt.free(o),sa(e));var a=t.lb;a.reset(),1!==t.scale&&a.scale(t.scale),0===t.position.x&&0===t.position.y||a.translate(-t.position.x,-t.position.y),(o=t.Eb).scale(t.Sb,t.Sb),o.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),a=(e=e.Ja.j).length;for(var r=0;r<a;r++){var s=e[r],c=t;if(s.visible&&0!==s.opacity){var l=s.diagram.grid.part;if(!i&&s.isTemporary)n&&l.layer===s&&(s=jo(s,o),l.bc(o,c),o.globalAlpha=s);else{for(var u=jo(s,o),d=c.scale,h=Vt.alloc(),p=s.Ca.j,f=p.length,g=0;g<f;g++){var m=p[g];(n||m!==l)&&s.Pi(o,m,c,null,d,h)}Vt.free(h),o.globalAlpha=u}}}}}function Rr(t){var e=t.box;if(null!==e){var i=t.observed;if(null!==i){t.Ac=!0,i=i.viewportBounds;var n=e.selectionObject,o=Lt.alloc();o.h(i.width,i.height),n.desiredSize=o,Lt.free(o),t=2/t.scale,n instanceof al&&(n.strokeWidth=t),e.location=new pt(i.x-t/2,i.y-t/2),e.isSelected=!0}}}function Ur(){Vi.call(this),this.l=null}function Gr(){nt(this),this.B=ar,this.$a=this.I=this.u=!0,this.W=this.Ha=this.kd=this.Ia=!1,this.yi=this.l=null,this.Yc=1.05,this.Fu=NaN,this.Yw=null,this.fv=NaN,this.ev=Yt,this.mg=null,this.Ic=200}function Hr(t,e,i){if(e.isVisible())return i;if(e instanceof Mu)Hr(t,e.adornedPart,i);else if(e instanceof id){var n=e.fromNode;null!==n&&Hr(t,n,i),null!==(e=e.toNode)&&Hr(t,e,i)}else e instanceof Ou&&(null!==(n=e.labeledLink)&&Hr(t,n,i),null!==(n=e.yg())&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),Hr(t,n,i))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),Hr(t,e,i));return i}function Wr(t){var e=P();for(t=t.iterator;t.next();){var i=t.value;i instanceof id||e.push(i)}t=new it,i=e.length;for(var n=0;n<i;n++){for(var o=e[n],a=!0,r=0;r<i;r++)if(o.Xd(e[r])){a=!1;break}a&&t.add(o)}return M(e),t}function qr(){nt(this),this.F=4225027,this.qb=1,this.kg=null,this.Qa="",this.dc=this.hb=null,this.ma=new pt(NaN,NaN).freeze(),this.Lc=$t,this.bg=Ct,this.ag=Ot,this.lb=new He,this.Qh=new He,this.Zf=new He,this.ya=this.Wk=1,this.Yb=0,this.xe=Ja,this.bh=ee,this.nc=new Vt(NaN,NaN,NaN,NaN).freeze(),this.vb=new Vt(NaN,NaN,NaN,NaN).freeze(),this.oc=new Vt(0,0,NaN,NaN).freeze(),this.O=this.ep=this.fp=null,this.Fk=this.wb=Ie,this.qp=0,this.rp=1,this.Lg=0,this.gn=1,this.Lp=null,this.yp=-1/0,this.Gl=0,this.Hl=yt,this.Il=Cd,this.fi="",this.ab=this.N=null,this.Jk=-1,this.Kl=this.md=this.ei=this.Ol=null,this.xs=Ka,this.tp=this.Hg=this.Jj=null}function Xr(t){null===t.N&&(t.N=new Ss)}function Yr(t,e,i){var n=t.Ui();if(null!==n)for(var o=t.ab.iterator;o.next();){var a=o.value,r=null;if(null!==a.sourceName){if(null===(r=wp(a,n,t)))continue;a.Rq(t,r,i,null)}else if(a.isToModel){var s=e.diagram;null===s||s.skipsModelSourceBindings||a.Rq(t,s.model.modelData,i,n)}else{if(null===(s=n.data))continue;var c=e.diagram;null===c||c.skipsModelSourceBindings||a.Rq(t,s,i,n)}r===t&&null!==(s=n.kt(a.gj))&&a.ww(s,r,i)}}function Kr(t,e,i,n,o){var a=t.nc,r=t.Zf;r.reset(),is(t,r,e,i,n,o),t.Zf=r,a.h(e,i,n,o),r.wt()||r.tw(a)}function Zr(t,e,i,n){return!1!==t.pickable&&(n.multiply(t.transform),i?t.Gc(e,n):t.Dh(e,n))}function Jr(t,e,i,n,o){if(t.vb.h(e,i,n,o),!t.desiredSize.v()){var a=t.nc,r=(i=t.bh).top+i.bottom;switch(i=a.width+(e=i.right+i.left),a=a.height+r,n+=e,o+=r,e=os(t,!0),i===n&&a===o&&(e=Ka),e){case Ka:(i>n||a>o)&&(ps(t,!0),t.measure(i>n?n:i,a>o?o:a,0,0));break;case Ya:ps(t,!0),t.measure(n,o,0,0);break;case Qa:ps(t,!0),t.measure(n,a,0,0);break;case tr:ps(t,!0),t.measure(i,o,0,0)}}}function Qr(t,e,i){var n=t.vb,o=t.oc;null!==t.dc&&(ts(t,e,t.dc,!0,!0,o,n),t.dc instanceof Vs&&t.dc.type===tc?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.Vd(t.dc)):e.fillRect(n.x,n.y,n.width,n.height)),null!==t.hb&&(ts(t,e,t.hb,!0,!1,o,n),t.hb instanceof Vs&&t.hb.type===tc?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.Vd(t.hb)):e.fillRect(n.x,n.y,n.width,n.height)),t.Qi(e,i)}function ts(t,e,i,n,o,a,r){if(null!==i){var s=1,c=1;if("string"==typeof i)n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===Js)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{if(s=a.width,c=a.height,o&&(s=r.width,c=r.height),(a=e instanceof Es)&&i.ee&&(i.type===ec||i.Mk===s&&i.du===c))var l=i.ee;else{var u=0,d=0,h=0,p=0,f=0,g=0;if(g=f=0,o&&(f=r.x,g=r.y),u=i.start.x*s+i.start.offsetX,d=i.start.y*c+i.start.offsetY,h=i.end.x*s+i.end.offsetX,p=i.end.y*c+i.end.offsetY,u+=f,h+=f,d+=g,p+=g,i.type===Qs)l=e.createLinearGradient(u,d,h,p);else if(i.type===tc)g=isNaN(i.endRadius)?Math.max(s,c)/2:i.endRadius,isNaN(i.startRadius)?(f=0,g=Math.max(s,c)/2):f=i.startRadius,l=e.createRadialGradient(u,d,f,h,p,g);else if(i.type===ec)try{l=e.createPattern(i.pattern,"repeat")}catch(b){l=null}if(i.type!==ec&&null!==(o=i.colorStops))for(o=o.iterator;o.next();)l.addColorStop(o.key,o.value);if(a&&(i.ee=l,null!==l&&(i.Mk=s,i.du=c),null===l&&i.type===ec&&-1!==i.Mk)){i.Mk=-1;var m=t.diagram;null!==m&&-1===i.Mk&&v(function(){m.Zd()},600)}}n?e.fillStyle=l:e.strokeStyle=l}}}function es(t){if(0!=(2048&t.F)==1){var e=t.lb;if(e.reset(),!t.vb.v()||!t.nc.v())return void us(t,!1);if(e.translate(t.vb.x-t.nc.x,t.vb.y-t.nc.y),1!==t.scale||0!==t.angle){var i=t.naturalBounds;is(t,e,i.x,i.y,i.width,i.height)}us(t,!1),ds(t,!0)}0!=(4096&t.F)==1&&(null===(e=t.panel)?(t.Qh.set(t.lb),t.Wk=t.scale,ds(t,!1)):null!==e.wd&&((i=t.Qh).reset(),e.be()?i.multiply(e.Qh):null!==e.panel&&i.multiply(e.panel.Qh),i.multiply(t.lb),t.Wk=t.scale*e.Wk,ds(t,!1)))}function is(t,e,i,n,o,a){if(1!==t.scale&&e.scale(t.scale),0!==t.Yb){var r=ce;t.xf()&&t.locationSpot.fb()&&(r=t.locationSpot);var s=pt.alloc();if(t instanceof su&&t.locationObject!==t)for(s.xk((n=(i=t.locationObject).naturalBounds).x,n.y,n.width,n.height,r),i.Zf.ra(s),s.offset(-i.measuredBounds.x,-i.measuredBounds.y),r=i.panel;null!==r&&r!==t;)r.Zf.ra(s),s.offset(-r.measuredBounds.x,-r.measuredBounds.y),r=r.panel;else s.xk(i,n,o,a,r);e.rotate(t.Yb,s.x,s.y),pt.free(s)}}function ns(t){if(!1===fs(t)){var e=t.panel;null!==e?e.o():t.xf()&&null!==(e=t.diagram)&&(e.od.add(t),t instanceof Ou&&t.fd(),e.Pb()),gs(t,!0)}}function os(t,e){var i=t.stretch,n=t.panel;return null!==n&&n.type===Ic.Table?as(t,n.getRowDefinition(t.row),n.getColumnDefinition(t.column),e):null!==n&&n.type===Ic.Auto&&n.Ab()===t?rs(t,Ya,e):i===Ja?null!==n?n.type===Ic.Spot&&n.Ab()===t?rs(t,Ya,e):rs(t,(i=n.defaultStretch)===Ja?Ka:i,e):rs(t,Ka,e):rs(t,i,e)}function as(t,e,i,n){var o=t.stretch;if(o!==Ja)return rs(t,o,n);var a=o=null;switch(e.stretch){case tr:a=!0;break;case Ya:a=!0}switch(i.stretch){case Qa:o=!0;break;case Ya:o=!0}return e=t.panel.defaultStretch,null===o&&(o=e===Qa||e===Ya),null===a&&(a=e===tr||e===Ya),rs(t,!0===o&&!0===a?Ya:!0===o?Qa:!0===a?tr:Ka,n)}function rs(t,e,i){if(i)return e;if(e===Ka)return Ka;if((i=t.desiredSize).v())return Ka;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(e===Qa)return Ka;if(e===Ya)return tr}else{if(e===tr)return Ka;if(e===Ya)return Qa}if(!isNaN(i.height))if(90!==t&&270!==t){if(e===tr)return Ka;if(e===Ya)return Qa}else{if(e===Qa)return Ka;if(e===Ya)return tr}return e}function ss(t,e){t.F=e?512|t.F:-513&t.F}function cs(t){return 0!=(1024&t.F)}function ls(t,e){t.F=e?1024|t.F:-1025&t.F}function us(t,e){t.F=e?2048|t.F:-2049&t.F}function ds(t,e){t.F=e?4096|t.F:-4097&t.F}function hs(t){return 0!=(8192&t.F)}function ps(t,e){t.F=e?8192|t.F:-8193&t.F}function fs(t){return 0!=(16384&t.F)}function gs(t,e){t.F=e?16384|t.F:-16385&t.F}function ms(t){var e=t.part;if(e instanceof Ou&&(null!==t.portId||t===e.port)){var i=e.diagram;null===i||i.undoManager.isUndoingRedoing||Lu(e,t)}}function vs(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof Ic?t instanceof Ou?t.fd():t.Jm(t,function(t){ms(t)}):ms(t))}function bs(t,e){e.bd=t,null===t.Hg&&(t.Hg=new ht),t.Hg.add(e.propertyName,e)}function _s(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,o=null;if("function"==typeof t)o=t;else if("string"==typeof t){var a=xs.H(t);"function"==typeof a?S(n=a(i=C(arguments)))||_('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):o=f.go[t]}if(null===n&&(null!=o&&o.constructor||_("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new o),o=1,n instanceof Eo&&1<i.length){a=n;var r=i[1];("string"==typeof r||r instanceof HTMLDivElement)&&(jr(a,r),o++)}for(;o<i.length;o++)void 0===(a=i[o])?_("Undefined value at argument "+o+" for object being constructed by GraphObject.make: "+n):ws(n,a);return n}function ws(t,e){if("string"==typeof e)if(t instanceof gl)t.text=e;else if(t instanceof al)t.figure=e;else if(t instanceof Rl)t.source=e;else if(t instanceof Ic)null!==(e=Qc.H(e))&&(t.type=e);else if(t instanceof Vs){var i=q(Vs,e);null!==i?t.type=i:_("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof Xe?null!==(e=q(Xe,e))&&(t.type=e):t instanceof ui&&null!==(e=q(ui,e))&&(t.type=e);else if(e instanceof qr)t instanceof Ic||_("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof tl){var n;e.isRow&&"function"==typeof t.getRowDefinition?n=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(n=t.getColumnDefinition(e.index)),n instanceof tl?n.gt(e):_("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof W)"function"==typeof t.eb&&t.eb(e);else if(e instanceof pc)t.type=e;else if(e instanceof _p)t instanceof qr||t instanceof tl?t.bind(e):_("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Io)t instanceof qr?bs(t,e):_("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof li)t instanceof Xe?t.figures.add(e):_("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof ui)t instanceof li?t.segments.add(e):_("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof rh)t instanceof Eo||t instanceof Ku?t.layout=e:_("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)ws(t,e[i]);else if("object"==typeof e&&null!==e)if(t instanceof Vs){for(var o in i=new Y,e)n=parseFloat(o),isNaN(n)?i[o]=e[o]:t.addColorStop(n,e[o]);da(t,i)}else if(t instanceof tl){for(i in void 0!==e.row?((null==(o=e.row)||1/0===o||isNaN(o)||0>o)&&_("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+o),t.isRow=!0,t.index=o):void 0!==e.column&&((null==(o=e.column)||1/0===o||isNaN(o)||0>o)&&_("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+o),t.isRow=!1,t.index=o),o=new Y,e)"row"!==i&&"column"!==i&&(o[i]=e[i]);da(t,o)}else da(t,e);else _('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function ys(t,e){xs.add(t,e)}function ks(t,e,i){void 0===i&&(i=null);var n=t[1];if("function"==typeof i?i(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===e)throw Error("no "+("function"==typeof i?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Eo.className="Diagram",Eo.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=f.document.getElementById(t)),e instanceof HTMLDivElement&&e.B instanceof Eo?e.B:null},Eo.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},Eo.None=hr,Eo.Uniform=pr,Eo.UniformToFill=fr,Eo.CycleAll=gr,Eo.CycleNotDirected=mr,Eo.CycleNotDirectedFast=vr,Eo.CycleNotUndirected=br,Eo.CycleDestinationTree=_r,Eo.CycleSourceTree=wr,Eo.DocumentScroll=yr,Eo.InfiniteScroll=kr,Eo.TreeParentCollapsed=xr,Eo.AllParentsCollapsed=Sr,Eo.AnyParentsCollapsed=Tr,Or.className="DiagramHelper",h.Object.defineProperties(Lr.prototype,{point:{get:function(){return this.l},set:function(t){this.l=t}},shifted:{get:function(){return this.u},set:function(t){this.u=t}}}),Lr.className="DraggingInfo",Er.className="DraggingNodeInfoPair",Nr.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new Lt(NaN,NaN).freeze(),this.gridSnapCellSpot=oe,this.gridSnapOrigin=new pt(NaN,NaN).freeze(),this.Pz=this.dragsTree=this.dragsLink=!1,this.Oz=!0},d(Ar,Eo),Ar.prototype.reset=function(){Eo.prototype.reset.call(this),Vr(this)},Ar.className="Palette",d(zr,Eo),zr.prototype.computePixelRatio=function(){return 1},zr.prototype.bc=function(){if(null===this.La&&_("No div specified"),null===this.sa&&_("No canvas specified"),!(this.sa instanceof Ds)&&(cu(this.box),this.Ac)){var t=this.observed;if(null!==t&&!t.animationManager.isAnimating){fa(this);var e=this.sa;(t=this.Eb).sc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Br(this):null!==this.Ll&&(t.drawImage(this.Ll.Ea,0,0),(e=this.lb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.Sb,this.Sb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var i=(e=this.Ja.j).length,n=0;n<i;n++)e[n].bc(t,this);this.Ac=this.mi=!1}}},zr.prototype.computeBounds=function(){var t=this.observed;if(null===t)return Yt;var e=t.documentBounds.copy();return e.Hc(t.viewportBounds),e},zr.prototype.Ux=function(){!0!==this.Ac&&(this.Ac=!0,this.Pb())},zr.prototype.Cq=function(t,e,i,n){this.Rb||(pa(this),this.M(),ha(this),this.Na(),Rr(this),this.Sd.scale=i,this.Sd.position.x=t.x,this.Sd.position.y=t.y,this.Sd.bounds.assign(t),this.Sd.Nv=n,this.R("ViewportBoundsChanged",this.Sd,t))},h.Object.defineProperties(zr.prototype,{observed:{get:function(){return this.Ha},set:function(t){var e=this.Ha;if(t instanceof zr&&_("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.xm("ViewportBoundsChanged",this.Oh),e.xm("DocumentBoundsChanged",this.Df),e.xm("InvalidateDraw",this.Lh),e.xm("AnimationFinished",this.Yc)),this.Ha=t,null!==t&&(t.Uj("ViewportBoundsChanged",this.Oh),t.Uj("DocumentBoundsChanged",this.Df),t.Uj("InvalidateDraw",this.Lh),t.Uj("AnimationFinished",this.Yc),this.add(this.box),Rr(this)),this.Na(),null===t){this.Ll=null;var i=this.sa,n=this.Eb;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else Fr(this),Rr(this),this.M();this.g("observed",e,t)}}},box:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.remove(e),this.add(this.l),Rr(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,this.Zd())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.Zd())}},updateDelay:{get:function(){return this.$a},set:function(t){0>t&&(t=0),this.$a!==t&&(this.$a=t)}}}),zr.className="Overview",d(Ur,Vi),Ur.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var i=t.lastInput;return!(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.l=new pt((i=e.viewportBounds).width/2,i.height/2),e.position=new pt((t=t.firstInput.documentPoint).x-this.l.x,t.y-this.l.y)),0))},Ur.prototype.doActivate=function(){this.l=null,Vi.prototype.doActivate.call(this)},Ur.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},Ur.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var i=t.box;if(null!==i){if(null===this.l){var n=t.firstInput.documentPoint;this.l=new pt(n.x-(i=i.location).x,n.y-i.y)}e.position=new pt((t=t.lastInput.documentPoint).x-this.l.x,t.y-this.l.y)}}},Ur.className="OverviewDraggingTool",Gr.prototype.toString=function(){return"CommandHandler"},Gr.prototype.$d=function(t){this.B=t},Gr.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=B?e.meta:e.control,n=e.shift,o=e.alt,a=e.key;!i||"C"!==a&&"Insert"!==a?i&&"X"===a||n&&"Del"===a?this.canCutSelection()&&this.cutSelection():i&&"V"===a||n&&"Insert"===a?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===a||o&&n&&"Backspace"===a?this.canRedo()&&this.redo():i&&"Z"===a||o&&"Backspace"===a?this.canUndo()&&this.undo():"Del"===a||"Backspace"===a?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===a?this.canSelectAll()&&this.selectAll():"Esc"===a?this.canStopCommand()&&this.stopCommand():"Up"===a?t.allowVerticalScroll&&t.scroll(i?"pixel":"line","up"):"Down"===a?t.allowVerticalScroll&&t.scroll(i?"pixel":"line","down"):"Left"===a?t.allowHorizontalScroll&&t.scroll(i?"pixel":"line","left"):"Right"===a?t.allowHorizontalScroll&&t.scroll(i?"pixel":"line","right"):"PageUp"===a?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===a?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===a?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===a?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===a?this.canScrollToPart()&&this.scrollToPart():"Subtract"===a?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===a?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===a?this.canResetZoom()&&this.resetZoom():n&&"Z"===a?this.canZoomToFit()&&this.zoomToFit():i&&!n&&"G"===a?this.canGroupSelection()&&this.groupSelection():i&&n&&"G"===a?this.canUngroupSelection()&&this.ungroupSelection():e.event&&113===e.event.which?this.canEditTextBlock()&&this.editTextBlock():e.event&&93===e.event.which?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Gr.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Gr.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Mi&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},Gr.prototype.canStopCommand=function(){return!0},Gr.prototype.selectAll=function(){var t=this.diagram;t.M();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},Gr.prototype.canSelectAll=function(){return this.diagram.allowSelect},Gr.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.ua("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new it,i=t.selection.iterator;i.next();)Iu(e,i.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(t){return t.canDelete()});t.Lt(e,!0),t.R("SelectionDeleted",e)}finally{t.Ua("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},Gr.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},Gr.prototype.copySelection=function(){var t=this.diagram,e=new it;for(t=t.selection.iterator;t.next();)Iu(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(t){return t.canCopy()});this.copyToClipboard(e)},Gr.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},Gr.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Gr.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},Gr.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(null===t)ur=null,dr="";else{i=e.model;var n=!1,o=!1,a=null;try{i.pm()&&(n=i.bk,i.bk=this.copiesParentKey),i.ik()&&(o=i.ak,i.ak=this.copiesGroupKey),a=e.ck(t,null,!0)}finally{i.pm()&&(i.bk=n),i.ik()&&(i.ak=o),(i=new tt).addAll(a),ur=i,dr=e.model.dataFormat}}e.R("ClipboardChanged",i)},Gr.prototype.pasteFromClipboard=function(){var t=new it,e=ur;if(null===e)return t;var i=this.diagram;if(dr!==i.model.dataFormat)return t;var n=i.model,o=!1,a=!1,r=null;try{n.pm()&&(o=n.bk,n.bk=this.copiesParentKey),n.ik()&&(a=n.ak,n.ak=this.copiesGroupKey),r=i.ck(e,i,!1)}finally{for(n.pm()&&(n.bk=o),n.ik()&&(n.ak=a),e=r.iterator;e.next();)n=e.key,(i=e.value).location.v()||(n.location.v()?i.location=n.location:!i.position.v()&&n.position.v()&&(i.position=n.position)),t.add(i)}return t},Gr.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.ua("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(null!==t){var o=e.computePartsBounds(e.selection);o.v()&&_a(e,this.computeEffectiveCollection(e.selection,e.Qk),new pt(t.x-o.centerX,t.y-o.centerY),e.Qk,!1)}e.R("ClipboardPasted",i)}finally{e.Ua("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Gr.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===ur||0===ur.count||dr!==t.model.dataFormat)},Gr.prototype.undo=function(){this.diagram.undoManager.undo()},Gr.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},Gr.prototype.redo=function(){this.diagram.undoManager.redo()},Gr.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},Gr.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===hr&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Gr.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===hr&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Gr.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===hr&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Gr.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===hr&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Gr.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Gr.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},Gr.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Xc(),t.Zd();var i=t.position,n=t.scale;oo(e,"Zoom To Fit"),n===this.fv&&!isNaN(this.Fu)&&t.documentBounds.w(this.ev)?(t.scale=this.Fu,t.position=this.Yw,this.fv=NaN,this.ev=Yt):(this.Fu=n,this.Yw=i.copy(),t.zoomToFit(),this.fv=t.scale,this.ev=t.documentBounds.copy()),ro(e)},Gr.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Gr.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(ja(e),null===t){try{null!==this.mg&&(this.mg.next()?t=this.mg.value:this.mg=null)}catch(c){this.mg=null}null===t&&(0<e.highlighteds.count?this.mg=e.highlighteds.iterator:0<e.selection.count&&(this.mg=e.selection.iterator),null!==this.mg&&this.mg.next()&&(t=this.mg.value))}if(null!==t){var i=e.animationManager;oo(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var o=Hr(this,t,[t]);if(1===o.length)e.ua(),e.et(t.actualBounds),e.Ua("Scroll To Part");else{var a=function(){e.ua();for(var t=o.pop();0<o.length&&t instanceof Ou&&t.isTreeExpanded&&(!(t instanceof Ku)||t.isSubGraphExpanded);)t=o.pop();0<o.length?(t instanceof su&&e.gw(t.actualBounds),t instanceof Ou&&!t.isTreeExpanded&&(t.isTreeExpanded=!0),t instanceof Ku&&!t.isSubGraphExpanded&&(t.isSubGraphExpanded=!0)):(t instanceof su&&e.et(t.actualBounds),e.xm("LayoutCompleted",r)),e.Ua("Scroll To Part")},r=function(){v(a,(i.isEnabled?i.duration:0)+n)};e.Uj("LayoutCompleted",r),a()}}else{var s=e.position.copy();e.et(t.actualBounds),s.Ma(e.position)&&i.Xc()}}},Gr.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof su)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},Gr.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.ua("Collapse Tree"),oo(e.animationManager,"Collapse Tree");var i=new tt;if(null!==t&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof Ou&&o.isTreeExpanded&&(o.collapseTree(),i.add(o))}e.R("TreeCollapsed",i)}finally{e.Ua("Collapse Tree")}},Gr.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Ou&&t.isTreeExpanded))return!1;if(0<t.oq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Ou&&e.isTreeExpanded&&0<e.oq().count)return!0;return!1},Gr.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.ua("Expand Tree"),oo(e.animationManager,"Expand Tree");var i=new tt;if(null===t||t.isTreeExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof Ou&&!o.isTreeExpanded&&(o.expandTree(),i.add(o))}}else t.expandTree(),i.add(t);e.R("TreeExpanded",i)}finally{e.Ua("Expand Tree")}},Gr.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Ou)||t.isTreeExpanded)return!1;if(0<t.oq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Ou&&!e.isTreeExpanded&&0<e.oq().count)return!0;return!1},Gr.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.jk()){var i=this.archetypeGroupData;if(null!==i){var n=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.ua("Group");for(var o=new tt,a=t.selection.iterator;a.next();){var r=a.value;r.Wb()&&r.canGroup()&&o.add(r)}for(var s=new tt,c=o.iterator;c.next();){var l=c.value;a=!1;for(var u=o.iterator;u.next();)if(l.Xd(u.value)){a=!0;break}a||s.add(l)}if(0<s.count){var d=s.first().containingGroup;if(null!==d)for(;null!==d;){o=!1;for(var h=s.iterator;h.next();)if(!h.value.Xd(d)){o=!0;break}if(!o)break;d=d.containingGroup}if(i instanceof Ku)Hc(i),null!==(n=i.copy())&&t.add(n);else if(e.Lv(i)){var p=e.copyNodeData(i);S(p)&&(e.pf(p),n=t.Si(p))}if(null!==n){null!==d&&this.isValidMember(d,n)&&(n.containingGroup=d);for(var f=s.iterator;f.next();){var g=f.value;this.isValidMember(n,g)&&(g.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.R("SelectionGrouped",n)}finally{t.Ua("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},Gr.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.jk()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canGroup())return!0}return!1},Gr.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof id)return!1;if(null!==t){if(t===e||t.Xd(e))return!1;var i=t.memberValidation;if(null!==i&&!i(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(i=this.memberValidation)||i(t,e)},Gr.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.model;if(i.jk())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.ua("Ungroup");var n=new tt;if(null!==t)n.add(t);else for(var o=e.selection.iterator;o.next();){var a=o.value;a instanceof Ku&&a.canUngroup()&&n.add(a)}var r=new tt;if(0<n.count){e.clearSelection(!0);for(var s=n.iterator;s.next();){var c=s.value;c.expandSubGraph();var l=c.containingGroup,u=null!==l&&null!==l.data?i.ja(l.data):void 0;r.addAll(c.memberParts);for(var d=r.iterator;d.next();){var h=d.value;if(h.isSelected=!0,!(h instanceof id)){var p=h.data;null!==p?i.Ot(p,u):h.containingGroup=l}}e.remove(c)}}e.R("SelectionUngrouped",n,r)}finally{e.Ua("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Gr.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.jk())return!1;if(null!==t){if(!(t instanceof Ku))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Ku&&e.canUngroup())return!0;return!1},Gr.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=Wr(t).iterator;t.next();){var n=t.value;null!==n.containingGroup&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},Gr.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.ua("Collapse SubGraph"),oo(e.animationManager,"Collapse SubGraph");var i=new tt;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof Ku&&o.isSubGraphExpanded&&(o.collapseSubGraph(),i.add(o))}e.R("SubGraphCollapsed",i)}finally{e.Ua("Collapse SubGraph")}},Gr.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof Ku&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Ku&&e.isSubGraphExpanded)return!0;return!1},Gr.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.ua("Expand SubGraph"),oo(e.animationManager,"Expand SubGraph");var i=new tt;if(null===t||t.isSubGraphExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof Ku&&!o.isSubGraphExpanded&&(o.expandSubGraph(),i.add(o))}}else t.expandSubGraph(),i.add(t);e.R("SubGraphExpanded",i)}finally{e.Ua("Expand SubGraph")}},Gr.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof Ku&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Ku&&!e.isSubGraphExpanded)return!0;return!1},Gr.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(null!==i){if(null===t){t=null;for(var n=e.selection.iterator;n.next();){var o=n.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.gm(function(t){return t instanceof gl&&t.editable})}null!==t&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},Gr.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof gl))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.gm(function(t){return t instanceof gl&&t.editable})))return!0;return!1},Gr.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=i.findObjectWithContextMenu(t)))){var n=e.lastInput,o=null;t instanceof qr?o=t.ga(ce):e.viewportBounds.aa(n.documentPoint)||(o=new pt((o=e.viewportBounds).x+o.width/2,o.y+o.height/2)),null!==o&&(n.viewPoint=e.Oq(o),n.documentPoint=o,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,Nn(i,!1,t)}},Gr.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==i.findObjectWithContextMenu(t))},Gr.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),o=i.currentTool===n;if(void 0===e&&(e=o?n.dragOptions:i.Qk),n=new ht,null===t)return n;for(var a=t.iterator;a.next();)ba(i,n,a.value,o,e);if(null!==i.draggedLink&&e.dragsLink)return n;for(a=t.iterator;a.next();)(t=a.value)instanceof id&&((null===(e=t.fromNode)||n.contains(e))&&(null===(e=t.toNode)||n.contains(e))||n.remove(t));return n},h.Object.defineProperties(Gr.prototype,{diagram:{get:function(){return this.B}},copiesClipboardData:{get:function(){return this.u},set:function(t){this.u=t}},copiesConnectedLinks:{get:function(){return this.I},set:function(t){this.I=t}},deletesConnectedLinks:{get:function(){return this.$a},set:function(t){this.$a=t}},copiesTree:{get:function(){return this.Ia},set:function(t){this.Ia=t}},deletesTree:{get:function(){return this.kd},set:function(t){this.kd=t}},copiesParentKey:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiesGroupKey:{get:function(){return this.W},set:function(t){this.W=t}},archetypeGroupData:{get:function(){return this.l},set:function(t){this.l=t}},memberValidation:{get:function(){return this.yi},set:function(t){this.yi=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Yc},set:function(t){1<t||_("zoomFactor must be larger than 1.0, not: "+t),this.Yc=t}},scrollToPartPause:{get:function(){return this.Ic},set:function(t){this.Ic=t}}}),Gr.className="CommandHandler",Ao=function(){return new Gr},qr.prototype.cloneProtected=function(t){t.F=6144|this.F,t.qb=this.qb,t.Qa=this.Qa,t.hb=this.hb,t.dc=this.dc,t.Hg=this.Hg,t.ma.assign(this.ma),t.Lc=this.Lc.G(),t.bg=this.bg.G(),t.ag=this.ag.G(),t.Zf=this.Zf.copy(),t.ya=this.ya,t.Yb=this.Yb,t.xe=this.xe,t.bh=this.bh.G(),t.nc.assign(this.nc),t.vb.assign(this.vb),t.oc.assign(this.oc),t.ep=this.ep,null!==this.O&&(t.O=this.O.copy()),t.wb=this.wb.G(),t.Fk=this.Fk.G(),t.qp=this.qp,t.rp=this.rp,t.Lg=this.Lg,t.gn=this.gn,t.Lp=this.Lp,t.yp=this.yp,t.Gl=this.Gl,t.Hl=this.Hl.G(),t.Il=this.Il,t.fi=this.fi,null!==this.N&&(t.N=this.N.copy()),t.ab=this.ab,t.Jk=this.Jk,null!==this.ei&&(t.ei=C(this.ei)),null!==this.md&&(t.md=this.md.copy()),t.Kl=this.Kl},qr.prototype.ux=function(t){var e=this.ei;if(T(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.ei=e=[];e.push(t)},qr.prototype.sf=function(t){t.fp=null,t.Jj=null,t.o()},qr.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.ei)for(var e=0;e<this.ei.length;e++){var i=this.ei[e];t[i]=this[i]}return t},qr.prototype.copy=function(){return this.clone()},(i=qr.prototype).eb=function(t){t.classType===id?0===t.name.indexOf("Orient")?this.segmentOrientation=t:_("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===qr&&(this.stretch=t)},i.toString=function(){return O(this.constructor)+"#"+at(this)},i.Ec=function(){if(null===this.O){var t=new ah;t.Vg=ne,t.vh=ne,t.Tg=10,t.th=10,t.Ug=0,t.uh=0,this.O=t}},i.Ya=function(t,e,i,n,o,a,r){var s=this.part;if(null!==s&&(s.vk(t,e,i,n,o,a,r),i===this&&t===xi&&cs(this)&&Yr(this,s,e),a=this.diagram,null===this.Hg||null===a||!a.kk||a.undoManager.isUndoingRedoing||a.currentTool!==a.toolManager||a.animationManager.bn||null===(t=this.Hg.get(e))||a.animationManager.isTicking||(null===this.tp&&(this.tp=new ht),r=0===a.undoManager.transactionLevel,t.startCondition===Mo?r=!0:t.startCondition===Oo&&(r=!1),r?(function(t,e){null!==(t=t.Hk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,a=new _o),null!==(r=this.tp.get(t))&&r.stop(),this.tp.add(t,a),a.av=this,a.px=t,a.add(this,e,n,o),a.start()):(ao(a.animationManager,"Trigger"),a.animationManager.defaultAnimation.add(this,e,n,o))),this instanceof Ic&&i===s&&0!=(16777216&s.F)&&null!==s.data))for(n=(i=this.V.j).length,o=0;o<n;o++)(s=i[o])instanceof Ic&&Lc(s,function(t){null!==t.data&&0!=(16777216&t.F)&&t.Ba(e)})},i.kt=function(t){return this.Jk===t?this:null},i.g=function(t,e,i){this.Ya(xi,t,this,e,i)},i.Nx=function(t,e,i){if(!1===this.pickable)return!1;var n=this.naturalBounds;return e=t.Ce(e),i?bt(t.x,t.y,0,0,0,n.height)<=e||bt(t.x,t.y,0,n.height,n.width,n.height)<=e||bt(t.x,t.y,n.width,n.height,n.width,0)<=e||bt(t.x,t.y,n.width,0,0,0)<=e:t.dd(0,0)<=e&&t.dd(0,n.height)<=e&&t.dd(n.width,0)<=e&&t.dd(n.width,n.height)<=e},i.be=function(){return!0},i.aa=function(t){var e=pt.alloc();e.assign(t),this.transform.ra(e);var i=this.actualBounds;if(!i.v())return pt.free(e),!1;var n=this.diagram;if(null!==n&&n.le){var o=n.lm("extraTouchThreshold"),a=n.lm("extraTouchArea"),r=a/2,s=this.naturalBounds,c=1/(n=this.uf()*n.scale);if(s.width*n<o&&s.height*n<o)return t=qt(i.x-r*c,i.y-r*c,i.width+a*c,i.height+a*c,e.x,e.y),pt.free(e),t}return o=!1,(this instanceof Mu||this instanceof al?qt(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.aa(e))&&(o=!(this.md&&!this.md.aa(e))&&(!(null===this.dc||!i.aa(e))||!(null===this.hb||!this.oc.aa(t))||this.Eh(t))),pt.free(e),o},i.Eh=function(t){var e=this.naturalBounds;return qt(0,0,e.width,e.height,t.x,t.y)},i.Be=function(t){if(0===this.angle)return this.actualBounds.Be(t);var e=this.naturalBounds;e=Vt.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,o=pt.allocAt(t.x,t.y);return e.aa(i.Wd(o))&&(o.h(t.x,t.bottom),e.aa(i.Wd(o))&&(o.h(t.right,t.bottom),e.aa(i.Wd(o))&&(o.h(t.right,t.y),e.aa(i.Wd(o))&&(n=!0)))),pt.free(o),Vt.free(e),n},i.Dh=function(t,e){if(void 0===e)return t.Be(this.actualBounds);var i=this.naturalBounds,n=!1,o=pt.allocAt(0,0);return t.aa(e.ra(o))&&(o.h(0,i.height),t.aa(e.ra(o))&&(o.h(i.width,i.height),t.aa(e.ra(o))&&(o.h(i.width,0),t.aa(e.ra(o))&&(n=!0)))),pt.free(o),n},i.Gc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Gc(this.actualBounds);var i=this.naturalBounds,n=pt.allocAt(0,0),o=pt.allocAt(0,i.height),a=pt.allocAt(i.width,i.height),r=pt.allocAt(i.width,0),s=!1;if(t.aa(e.ra(n))||t.aa(e.ra(o))||t.aa(e.ra(a))||t.aa(e.ra(r)))s=!0;else{i=Vt.allocAt(0,0,i.width,i.height);var c=pt.allocAt(t.x,t.y);i.aa(e.Wd(c))?s=!0:(c.h(t.x,t.bottom),i.aa(e.Wd(c))?s=!0:(c.h(t.right,t.bottom),i.aa(e.Wd(c))?s=!0:(c.h(t.right,t.y),i.aa(e.Wd(c))&&(s=!0)))),pt.free(c),Vt.free(i),!s&&(qe.tt(t,n,o)||qe.tt(t,o,a)||qe.tt(t,a,r)||qe.tt(t,r,n))&&(s=!0)}return pt.free(n),pt.free(o),pt.free(a),pt.free(r),s},i.ga=function(t,e){if(void 0===e&&(e=new pt),t instanceof Fe){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.wd.ra(e),e},i.km=function(t){void 0===t&&(t=new Vt);var e=this.naturalBounds,i=this.wd,n=pt.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Wt(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Wt(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Wt(t,n.x,n.y,0,0),pt.free(n),t},i.Xi=function(){var t=this.wd;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},i.uf=function(){if(0!=(4096&this.F)==0)return this.Wk;var t=this.ya;return null!==this.panel?t*this.panel.uf():t},i.qt=function(t,e){return void 0===e&&(e=new pt),e.assign(t),this.wd.Wd(e),e},i.Uc=function(t,e,i){return this.hk(t.x,t.y,e.x,e.y,i)},i.hk=function(t,e,i,n,o){var a=this.transform,r=1/(a.m11*a.m22-a.m12*a.m21),s=a.m22*r,c=-a.m12*r,l=-a.m21*r,u=a.m11*r,d=r*(a.m21*a.dy-a.m22*a.dx),h=r*(a.m12*a.dx-a.m11*a.dy);return null!==this.areaBackground?qe.Uc((a=this.actualBounds).left,a.top,a.right,a.bottom,t,e,i,n,o):(r=t*s+e*l+d,t=t*c+e*u+h,e=i*s+n*l+d,i=i*c+n*u+h,o.h(0,0),i=qe.Uc(0,0,(n=this.naturalBounds).width,n.height,r,t,e,i,o),o.transform(a),i)},qr.prototype.measure=function(t,e,i,n){if(!1!==hs(this)){var o=this.bh,a=o.right+o.left;o=o.top+o.bottom,t=Math.max(t-a,0),e=Math.max(e-o,0),i=Math.max((i||0)-a,0),n=Math.max((n||0)-o,0),o=this.desiredSize;var r=0;this instanceof al&&(r=this.strokeWidth),90===(a=this.angle)||270===a?(t=isFinite(o.height)?o.height+r:t,e=isFinite(o.width)?o.width+r:e):(t=isFinite(o.width)?o.width+r:t,e=isFinite(o.height)?o.height+r:e),o=i||0,r=n||0;var s=this instanceof Ic;switch(os(this,!0)){case Ka:r=o=0,s&&(e=t=1/0);break;case Ya:isFinite(t)&&t>i&&(o=t),isFinite(e)&&e>n&&(r=e);break;case Qa:isFinite(t)&&t>i&&(o=t),r=0,s&&(e=1/0);break;case tr:isFinite(e)&&e>n&&(r=e),o=0,s&&(t=1/0)}var c=this.minSize;o>(s=this.maxSize).width&&c.width<s.width&&(o=s.width),r>s.height&&c.height<s.height&&(r=s.height),i=Math.max(o/this.scale,c.width),n=Math.max(r/this.scale,c.height),s.width<i&&(i=Math.min(c.width,i)),s.height<n&&(n=Math.min(c.height,n)),t=Math.min(s.width,t),e=Math.min(s.height,e),t=Math.max(i,t),e=Math.max(n,e),90!==a&&270!==a||(a=t,t=e,e=a,a=i,i=n,n=a),this.nc.ea(),this.rm(t,e,i,n),this.nc.freeze(),this.nc.v()||_("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.nc.toString()),ps(this,!1)}},qr.prototype.rm=function(){},qr.prototype.xf=function(){return!1},qr.prototype.arrange=function(t,e,i,n,o){this.ll();var a=Vt.alloc();a.assign(this.vb),this.vb.ea(),!1===fs(this)?this.vb.h(t,e,i,n):this.Ch(t,e,i,n),this.vb.freeze(),this.md=void 0===o?null:o,i=!1,void 0!==o?i=!0:(null===(o=this.panel)||o.type!==Ic.TableRow&&o.type!==Ic.TableColumn||(o=o.panel),null!==o&&(o=o.oc,n=this.measuredBounds,null!==this.areaBackground&&(n=this.vb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=o.width+.05&&0<=e+.05&&i<=o.height+.05),this instanceof gl&&(this.bs>(t=this.naturalBounds).height||this.pb>t.width))&&(i=!0)),this.F=i?256|this.F:-257&this.F,this.vb.v()||_("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.vb.toString()),this.Gt(a,this.vb),gs(this,!1),Vt.free(a)},(i=qr.prototype).Ch=function(){},i.Gt=function(t,e){var i=this.part;null!==i&&null!==i.diagram&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||yu(i,!0),this.M(),Rt(t,e)||(i.Gh(),this.Uo(i)))},i.Uo=function(t){null!==this.portId&&(yu(t,!0),t instanceof Ou&&Lu(t,this))},i.bc=function(t,e){if(this.visible){var i=this instanceof Ic&&(this.type===Ic.TableRow||this.type===Ic.TableColumn),n=this.vb;if(i||0!==n.width&&0!==n.height&&!isNaN(n.x)&&!isNaN(n.y)){var o=this.opacity;if(0!==o){var a=1;if(1!==o&&(t.globalAlpha=(a=t.globalAlpha)*o),!this.Ix(t,e))if(i)Qr(this,t,e);else{this instanceof id&&this.nk(!1),i=this.transform;var r=this.panel;0!=(4096&this.F)==1&&es(this);var s=this.part,c=!1,l=0;if(s&&e.De("drawShadows")&&(c=s.isShadowed)){var u=s.shadowOffset;l=Math.max(u.y,u.x)*e.scale*e.Sb}if(!(u=e.ni||!this.xf())){var d,h=this.naturalBounds,p=(u=this.Qh).m11,f=u.m21,g=u.dx,m=u.m12,v=u.m22,b=u.dy,_=d=0;u=d*p+_*f+g;var w=d*m+_*v+b,y=(d=h.width+l)*p+(_=0)*f+g;d=d*m+_*v+b,_=Math.min(u,y);var k=Math.min(w,d),x=Math.max(u+0,y)-_,S=Math.max(w+0,d)-k;u=_,w=k,y=(d=h.width+l)*p+(_=h.height+l)*f+g,d=d*m+_*v+b,_=Math.min(u,y),k=Math.min(w,d),x=Math.max(u+x,y)-_,S=Math.max(w+S,d)-k,u=_,w=k,y=(d=0)*p+(_=h.height+l)*f+g,d=d*m+_*v+b,_=Math.min(u,y),k=Math.min(w,d),x=Math.max(u+x,y)-_,S=Math.max(w+S,d)-k,w=k,p=(l=e.viewportBounds).y,u=!((u=_)>l.width+(h=l.x)||h>x+u||w>l.height+p||p>S+w)}if(u){if(u=0!=(256&this.F),t.clipInsteadOfFill&&(u=!1),this instanceof gl&&(t.font=this.font),u){if(w=r.be()?r.naturalBounds:r.actualBounds,null!==this.md?(x=(h=this.md).x,S=h.y,l=h.width,h=h.height):(x=Math.max(n.x,w.x),S=Math.max(n.y,w.y),l=Math.min(n.right,w.right)-x,h=Math.min(n.bottom,w.bottom)-S),x>n.width+n.x||n.x>w.width+w.x)return void(1!==o&&(t.globalAlpha=a));t.save(),t.beginPath(),t.rect(x,S,l,h),t.clip()}if(this.xf()){if(!s.isVisible())return void(1!==o&&(t.globalAlpha=a));c&&(t.mw((w=s.shadowOffset).x*e.scale*e.Sb,w.y*e.scale*e.Sb,s.shadowBlur),js(t),t.shadowColor=s.shadowColor)}!0===this.shadowVisible?js(t):!1===this.shadowVisible&&$s(t),s=this.naturalBounds,null!==this.dc&&(ts(this,t,this.dc,!0,!0,s,n),this.dc instanceof Vs&&this.dc.type===tc?(t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.Vd(this.dc)):t.fillRect(n.x,n.y,n.width,n.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),c&&(null!==r&&0!=(512&r.F)||null!==r&&(r.type===Ic.Auto||r.type===Ic.Spot)&&r.Ab()!==this)&&null===this.shadowVisible&&$s(t),null!==this.hb&&(x=w=0,S=(l=this.naturalBounds).width,l=l.height,h=0,this instanceof al&&(w=(l=this.ka.bounds).x,x=l.y,S=l.width,l=l.height,h=this.strokeWidth),ts(this,t,this.hb,!0,!1,s,n),this.hb instanceof Vs&&this.hb.type===tc?(t.beginPath(),t.rect(w-h/2,x-h/2,S+h,l+h),t.Vd(this.hb)):t.fillRect(w-h/2,x-h/2,S+h,l+h)),c&&(null!==this.hb||null!==this.dc||null!==r&&0!=(512&r.F)||null!==r&&(r.type===Ic.Auto||r.type===Ic.Spot)&&r.Ab()!==this)?(ss(this,!0),null===this.shadowVisible&&$s(t)):ss(this,!1),this.Qi(t,e),c&&0!=(512&this.F)==1&&js(t),this.xf()&&c&&$s(t),u?(t.restore(),t.sc(this instanceof Ic)):i.wt()||t.transform(i.m22*(e=1/(i.m11*i.m22-i.m12*i.m21)),-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy))}}1!==o&&(t.globalAlpha=a)}}}},i.Ix=function(){return!1},i.Qi=function(){},i.Ag=function(t){if(t instanceof Ic)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},i.yf=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.yf()},i.Bg=function(){for(var t=this instanceof Ic?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},i.o=function(t){if(void 0===t&&(t=!1),!0!==hs(this)){ps(this,!0),gs(this,!0);var e=this.panel;null===e||t||e.o()}},i.nm=function(){!0!==hs(this)&&(ps(this,!0),gs(this,!0))},i.ll=function(){0!=(2048&this.F)==0&&(us(this,!0),ds(this,!0))},i.Jv=function(){ds(this,!0)},i.M=function(){var t=this.part;null!==t&&t.M()},i.cj=function(t){this.kg=t},i.Qt=function(){},i.kw=function(t){return this.ma.assign(t),ns(this),!0},i.Lq=function(t,e){this.ma.x===t&&this.ma.y===e||(this.ma.h(t,e),this.ll())},i.bind=function(t){t.bd=this;var e=this.Ui();null!==e&&Gc(e)&&_("Cannot add a Binding to a template that has already been copied: "+t),null===this.ab&&(this.ab=new tt),this.ab.add(t)},i.Ui=function(){for(var t=this instanceof Ic?this:this.panel;null!==t;){if(null!==t.ci)return t;t=t.panel}return null},i.lw=function(t){da(this,t)},h.Object.defineProperties(qr.prototype,{shadowVisible:{get:function(){return this.Kl},set:function(t){var e=this.Kl;e!==t&&(this.Kl=t,this.M(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.N?this.N.En:null},set:function(t){Xr(this);var e=this.N.En;e!==t&&(this.N.En=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Il},set:function(t){var e=this.Il;e!==t&&(this.Il=t,this.o(),this.g("segmentOrientation",e,t),t===Cd&&(this.angle=0))}},segmentIndex:{get:function(){return this.yp},set:function(t){t=Math.round(t);var e=this.yp;e!==t&&(this.yp=t,this.o(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Gl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.Gl;e!==t&&(this.Gl=t,this.o(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Hl},set:function(t){var e=this.Hl;e.w(t)||(this.Hl=t=t.G(),this.o(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.xe},set:function(t){var e=this.xe;e!==t&&(this.xe=t,this.o(),this.g("stretch",e,t))}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,null!==this.part&&(this.part.Fj=null),this.g("name",e,t))}},opacity:{get:function(){return this.qb},set:function(t){var e=this.qb;e!==t&&((0>t||1<t)&&y(t,"0 <= value <= 1",qr,"opacity"),this.qb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.M(du(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.F)},set:function(t){var e=0!=(1&this.F);e!==t&&(this.F^=1,this.g("visible",e,t),null!==(e=this.panel)?e.o():this.xf()&&this.Ob(t),this.M(),vs(this))}},pickable:{get:function(){return 0!=(2&this.F)},set:function(t){var e=0!=(2&this.F);e!==t&&(this.F^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.F)},set:function(t){var e=0!=(4&this.F);e!==t&&(this.F^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.F)},set:function(t){var e=0!=(8&this.F);e!==t&&(this.F^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.F)},set:function(t){var e=0!=(16&this.F);e!==t&&(this.F^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.F)},set:function(t){var e=0!=(32&this.F);e!==t&&(this.F^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.F)},set:function(t){var e=0!=(64&this.F);e!==t&&(this.F^=64,this.o(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.F)},set:function(t){var e=0!=(128&this.F);e!==t&&(this.F^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.dc},set:function(t){var e=this.dc;e!==t&&(null!==t&&Ks(t,"GraphObject.areaBackground"),t instanceof Vs&&t.freeze(),this.dc=t,this.M(),this.g("areaBackground",e,t))}},background:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&(null!==t&&Ks(t,"GraphObject.background"),t instanceof Vs&&t.freeze(),this.hb=t,this.M(),this.g("background",e,t))}},part:{get:function(){if(this.xf())return this;if(null!==this.Jj)return this.Jj;var t;for(t=this.panel;t;){if(t instanceof su)return this.Jj=t;t=t.panel}return null}},svg:{get:function(){return this.Qp},set:function(t){this.Qp=t}},panel:{get:function(){return this.kg}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.ma},set:function(t){var e=t.x,i=t.y,n=this.ma,o=n.x,a=n.y;(o===e||isNaN(o)&&isNaN(e))&&(a===i||isNaN(a)&&isNaN(i))?this.Qt():(t=t.copy(),this.kw(t,n)&&this.g("position",n.copy(),t))}},actualBounds:{get:function(){return this.vb}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&(0>=t&&_("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.ya=t,this.o(),this.g("scale",e,t))}},angle:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Yb=t,vs(this),this.o(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Lc},set:function(t){var e=t.width,i=t.height,n=this.Lc,o=n.width,a=n.height;(o===e||isNaN(o)&&isNaN(e))&&(a===i||isNaN(a)&&isNaN(i))||(this.Lc=t=t.G(),this.o(),this instanceof al&&this.cc(),this.g("desiredSize",n,t),cs(this)&&null!==(t=this.part)&&(Yr(this,t,"width"),Yr(this,t,"height")))}},width:{get:function(){return this.Lc.width},set:function(t){var e=this.Lc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Lc,this.Lc=t=new Lt(t,this.Lc.height).freeze(),this.o(),this instanceof al&&this.cc(),this.g("desiredSize",e,t),cs(this)&&null!==(t=this.part)&&Yr(this,t,"width"))}},height:{get:function(){return this.Lc.height},set:function(t){var e=this.Lc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Lc,this.Lc=t=new Lt(this.Lc.width,t).freeze(),this.o(),this instanceof al&&this.cc(),this.g("desiredSize",e,t),cs(this)&&null!==(t=this.part)&&Yr(this,t,"height"))}},minSize:{get:function(){return this.bg},set:function(t){var e=this.bg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.bg=t,this.o(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.ag},set:function(t){var e=this.ag;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.ag=t,this.o(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.nc}},naturalBounds:{get:function(){return this.oc}},margin:{get:function(){return this.bh},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.bh;e.w(t)||(this.bh=t=t.G(),this.o(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.F)==1&&es(this),this.lb}},wd:{get:function(){return 0!=(4096&this.F)==1&&es(this),this.Qh}},alignment:{get:function(){return this.wb},set:function(t){var e=this.wb;e.w(t)||(t.jc()&&!t.Mb()&&_("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.wb=t=t.G(),ns(this),this.g("alignment",e,t))}},column:{get:function(){return this.Lg},set:function(t){t=Math.round(t);var e=this.Lg;e!==t&&(0>t&&y(t,">= 0",qr,"column"),this.Lg=t,this.o(),this.g("column",e,t))}},columnSpan:{get:function(){return this.gn},set:function(t){t=Math.round(t);var e=this.gn;e!==t&&(1>t&&y(t,">= 1",qr,"columnSpan"),this.gn=t,this.o(),this.g("columnSpan",e,t))}},row:{get:function(){return this.qp},set:function(t){t=Math.round(t);var e=this.qp;e!==t&&(0>t&&y(t,">= 0",qr,"row"),this.qp=t,this.o(),this.g("row",e,t))}},rowSpan:{get:function(){return this.rp},set:function(t){t=Math.round(t);var e=this.rp;e!==t&&(1>t&&y(t,">= 1",qr,"rowSpan"),this.rp=t,this.o(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.Lp},set:function(t){var e=this.Lp;e!==t&&(this.Lp=t,this.o(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.Fk},set:function(t){var e=this.Fk;e.w(t)||(this.Fk=t=t.G(),this.o(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.ep},set:function(t){var e=this.ep;if(e!==t){var i=this.part;null===i||i instanceof Ou||(_("Cannot set portID on a Link: "+t),i=null),null!==e&&null!==i&&Ru(i,this),this.ep=t,null!==t&&null!==i&&(i.Fh=!0,Bu(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.O?this.O.vh:ne},set:function(t){this.Ec();var e=this.O.vh;e.w(t)||(t=t.G(),this.O.vh=t,this.g("toSpot",e,t),ms(this))}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.th:10},set:function(t){this.Ec();var e=this.O.th;e!==t&&(0>t&&y(t,">= 0",qr,"toEndSegmentLength"),this.O.th=t,this.g("toEndSegmentLength",e,t),ms(this))}},toShortLength:{get:function(){return null!==this.O?this.O.uh:0},set:function(t){this.Ec();var e=this.O.uh;e!==t&&(this.O.uh=t,this.g("toShortLength",e,t),ms(this))}},toLinkable:{get:function(){return null!==this.O?this.O.Up:null},set:function(t){this.Ec();var e=this.O.Up;e!==t&&(this.O.Up=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.O?this.O.Vp:1/0},set:function(t){this.Ec();var e=this.O.Vp;e!==t&&(0>t&&y(t,">= 0",qr,"toMaxLinks"),this.O.Vp=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.Vg:ne},set:function(t){this.Ec();var e=this.O.Vg;e.w(t)||(t=t.G(),this.O.Vg=t,this.g("fromSpot",e,t),ms(this))}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.Tg:10},set:function(t){this.Ec();var e=this.O.Tg;e!==t&&(0>t&&y(t,">= 0",qr,"fromEndSegmentLength"),this.O.Tg=t,this.g("fromEndSegmentLength",e,t),ms(this))}},fromShortLength:{get:function(){return null!==this.O?this.O.Ug:0},set:function(t){this.Ec();var e=this.O.Ug;e!==t&&(this.O.Ug=t,this.g("fromShortLength",e,t),ms(this))}},fromLinkable:{get:function(){return null!==this.O?this.O.Ln:null},set:function(t){this.Ec();var e=this.O.Ln;e!==t&&(this.O.Ln=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.O?this.O.Mn:1/0},set:function(t){this.Ec();var e=this.O.Mn;e!==t&&(0>t&&y(t,">= 0",qr,"fromMaxLinks"),this.O.Mn=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.N?this.N.Kf:null},set:function(t){Xr(this);var e=this.N.Kf;e!==t&&(this.N.Kf=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.N?this.N.Pf:null},set:function(t){Xr(this);var e=this.N.Pf;e!==t&&(this.N.Pf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.N?this.N.Lf:null},set:function(t){Xr(this);var e=this.N.Lf;e!==t&&(this.N.Lf=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.N?this.N.dg:null},set:function(t){Xr(this);var e=this.N.dg;e!==t&&(this.N.dg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.N?this.N.gg:null},set:function(t){Xr(this);var e=this.N.gg;e!==t&&(this.N.gg=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.N?this.N.hg:null},set:function(t){Xr(this);var e=this.N.hg;e!==t&&(this.N.hg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.N?this.N.fg:null},set:function(t){Xr(this);var e=this.N.fg;e!==t&&(this.N.fg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.N?this.N.eg:null},set:function(t){Xr(this);var e=this.N.eg;e!==t&&(this.N.eg=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.N?this.N.Go:null},set:function(t){Xr(this);var e=this.N.Go;e!==t&&(this.N.Go=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.N?this.N.Ho:null},set:function(t){Xr(this);var e=this.N.Ho;e!==t&&(this.N.Ho=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.N?this.N.cg:null},set:function(t){Xr(this);var e=this.N.cg;e!==t&&(this.N.cg=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.N?this.N.Pm:null},set:function(t){Xr(this);var e=this.N.Pm;e!==t&&(this.N.Pm=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.N?this.N.Qm:null},set:function(t){Xr(this);var e=this.N.Qm;e!==t&&(this.N.Qm=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.N?this.N.Rm:null},set:function(t){Xr(this);var e=this.N.Rm;e!==t&&(this.N.Rm=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.N?this.N.Om:null},set:function(t){Xr(this);var e=this.N.Om;e!==t&&(this.N.Om=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.N?this.N.rg:null},set:function(t){Xr(this);var e=this.N.rg;e!==t&&(this.N.rg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.N?this.N.Mf:null},set:function(t){Xr(this);var e=this.N.Mf;e!==t&&(this.N.Mf=t,this.g("contextMenu",e,t))}}}),qr.prototype.setProperties=qr.prototype.lw,qr.prototype.findTemplateBinder=qr.prototype.Ui,qr.prototype.bind=qr.prototype.bind,qr.prototype.isEnabledObject=qr.prototype.Bg,qr.prototype.isVisibleObject=qr.prototype.yf,qr.prototype.isContainedBy=qr.prototype.Ag,qr.prototype.getNearestIntersectionPoint=qr.prototype.Uc,qr.prototype.getLocalPoint=qr.prototype.qt,qr.prototype.getDocumentScale=qr.prototype.uf,qr.prototype.getDocumentAngle=qr.prototype.Xi,qr.prototype.getDocumentBounds=qr.prototype.km,qr.prototype.getDocumentPoint=qr.prototype.ga,qr.prototype.intersectsRect=qr.prototype.Gc,qr.prototype.containedInRect=qr.prototype.Dh,qr.prototype.containsRect=qr.prototype.Be,qr.prototype.containsPoint=qr.prototype.aa,qr.prototype.raiseChanged=qr.prototype.g,qr.prototype.raiseChangedEvent=qr.prototype.Ya,qr.prototype.addCopyProperty=qr.prototype.ux;var xs=null;function Ss(){this.En=this.Mf=this.rg=this.Om=this.Rm=this.Qm=this.Pm=this.cg=this.Ho=this.Go=this.eg=this.fg=this.hg=this.gg=this.dg=this.Lf=this.Pf=this.Kf=null}function Ts(){this.Ka=[1,0,0,1,0,0]}function Cs(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Bx=[],this.pattern=null}function Ds(t,e){this.ownerDocument=t=void 0===e?f.document:e,this.jA="http://www.w3.org/2000/svg",void 0!==t&&(this.Ea=this.ub("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Ea.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ea.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.kq=null,this.context=new Is(this)}function Is(t){this.yk=t,this.svg=t.Ea,this.stack=[],this.xc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.df=this.Hp=this.Gp=0,this.vq=null,this.path=[],this.yu=!1,this.oh=null,this.ph=0,this.Ud=new Ts,Os(this,1,0,0,1,0,0);var e=rt++,i=this.ub("clipPath",{id:"mainClip"+e});i.appendChild(this.ub("rect",{x:0,y:0,width:t.width,height:t.height})),this.Hu=i,this.yk.Ea.appendChild(i),this.xc[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.lA={}}function Ps(t,e,i,n,o){1!==t.globalAlpha&&(i.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Cs?i.fill=Ms(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),i.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",i["fill-opacity"]=t[4]):i.fill=t.fillStyle,i.stroke="none"):"stroke"===e&&(i.fill="none",t.strokeStyle instanceof Cs?i.stroke=Ms(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),i.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",i["stroke-opacity"]=e[4]):i.stroke=t.strokeStyle,i["stroke-width"]=t.lineWidth,i["stroke-linecap"]=t.lineCap,i["stroke-linejoin"]=t.lineJoin,i["stroke-miterlimit"]=t.miterLimit),n="matrix("+(n=n.Ka)[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")",void 0!==o&&(n+=o),i.transform=n}function Ms(t,e){var i="GRAD"+rt++;if("linear"===e.type)var n=t.ub("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:i,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");n=t.ub("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:i})}var o=e.Bx;e=o.length;for(var a=[],r=0;r<e;r++){var s=o[r],c=s.color;s={offset:s.offset,"stop-color":c},/^rgba\(/.test(c)&&(c=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(c),s["stop-color"]="rgb("+c[1]+","+c[2]+","+c[3]+")",s["stop-opacity"]=c[4]),a.push(s)}for(a.sort(function(t,e){return t.offset>e.offset?1:-1}),o=0;o<e;o++)n.appendChild(t.ub("stop",a[o]));return t.svg.appendChild(n),"url(#"+i+")"}function Os(t,e,i,n,o,a,r){var s=new Ts;s.Ka=[e,i,n,o,a,r],Ps(t,"g",e={},s),s=t.addElement("g",e),t.xc.push(s)}function $s(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function js(t){t.shadowOffsetX=t.Gp,t.shadowOffsetY=t.Hp,t.shadowBlur=t.df}function Ls(t,e){this.ownerDocument=e=void 0===e?f.document:e,this.kq=null,(e=e.createElement("canvas")).tabIndex=0,this.Ea=e,this.Ea.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Es(e),e.B=t}function Es(t){t.getContext&&t.getContext("2d")||_("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.au=this.cu=this.bu="",this.fn=!1,this.df=this.Hp=this.Gp=0}qr.className="GraphObject",xs=new ht,ys("Button",function(){function t(t,e){return null!==t.diagram.Ub(t.documentPoint,function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t},function(t){return t===e})}var e=_s(Ic,Ic.Auto,{isActionable:!0,enabledChanged:function(t,e){if(t instanceof Ic){var i=t.Xa("ButtonBorder");null!==i&&(i.fill=e?t._buttonFillNormal:t._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},_s(al,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new Fe(0,0,2.76142374915397,2.761423749153969),spot2:new Fe(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(t,e){if(e.Bg()&&e instanceof Ic&&(t=e.Xa("ButtonBorder"))instanceof al){var i=e._buttonFillOver;e._buttonFillNormal=t.fill,t.fill=i,i=e._buttonStrokeOver,e._buttonStrokeNormal=t.stroke,t.stroke=i}},e.mouseLeave=function(t,e){e.Bg()&&e instanceof Ic&&(t=e.Xa("ButtonBorder"))instanceof al&&(t.fill=e._buttonFillNormal,t.stroke=e._buttonStrokeNormal)},e.actionDown=function(t,e){if(e.Bg()&&e instanceof Ic&&null!==e._buttonFillPressed&&0===t.button){var i=e.Xa("ButtonBorder");if(i instanceof al){var n=(t=t.diagram).skipsUndoManager;t.skipsUndoManager=!0;var o=e._buttonFillPressed;e._buttonFillOver=i.fill,i.fill=o,o=e._buttonStrokePressed,e._buttonStrokeOver=i.stroke,i.stroke=o,t.skipsUndoManager=n}}},e.actionUp=function(e,i){if(i.Bg()&&i instanceof Ic&&null!==i._buttonFillPressed&&0===e.button){var n=i.Xa("ButtonBorder");if(n instanceof al){var o=e.diagram,a=o.skipsUndoManager;o.skipsUndoManager=!0,t(e,i)?(n.fill=i._buttonFillOver,n.stroke=i._buttonStrokeOver):(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal),o.skipsUndoManager=a}}},e.actionCancel=function(e,i){if(i.Bg()&&i instanceof Ic&&null!==i._buttonFillPressed){var n=i.Xa("ButtonBorder");if(n instanceof al){var o=e.diagram,a=o.skipsUndoManager;o.skipsUndoManager=!0,t(e,i)?(n.fill=i._buttonFillOver,n.stroke=i._buttonStrokeOver):(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal),o.skipsUndoManager=a}}},e.actionMove=function(e,i){if(i.Bg()&&i instanceof Ic&&null!==i._buttonFillPressed){var n=e.diagram;if(0===n.firstInput.button&&(n.currentTool.standardMouseOver(),t(e,i)&&(e=i.Xa("ButtonBorder"))instanceof al)){var o=n.skipsUndoManager;n.skipsUndoManager=!0;var a=i._buttonFillPressed;e.fill!==a&&(e.fill=a),e.stroke!==(a=i._buttonStrokePressed)&&(e.stroke=a),n.skipsUndoManager=o}}},e}),ys("TreeExpanderButton",function(){var t=_s("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},_s(al,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Pt},new _p("figure","isTreeExpanded",function(t,e){return e=e.panel,t?e._treeExpandedFigure:e._treeCollapsedFigure}).Bq()),{visible:!1},new _p("visible","isTreeLeaf",function(t){return!t}).Bq());return t.click=function(t,e){if((e=e.part)instanceof Mu&&(e=e.adornedPart),e instanceof Ou){var i=e.diagram;if(null!==i){if(i=i.commandHandler,e.isTreeExpanded){if(!i.canCollapseTree(e))return}else if(!i.canExpandTree(e))return;t.handled=!0,e.isTreeExpanded?i.collapseTree(e):i.expandTree(e)}}},t}),ys("SubGraphExpanderButton",function(){var t=_s("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},_s(al,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Pt},new _p("figure","isSubGraphExpanded",function(t,e){return e=e.panel,t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).Bq()));return t.click=function(t,e){if((e=e.part)instanceof Mu&&(e=e.adornedPart),e instanceof Ku){var i=e.diagram;if(null!==i){if(i=i.commandHandler,e.isSubGraphExpanded){if(!i.canCollapseSubGraph(e))return}else if(!i.canExpandSubGraph(e))return;t.handled=!0,e.isSubGraphExpanded?i.collapseSubGraph(e):i.expandSubGraph(e)}}},t}),ys("ToolTip",function(){return _s(Mu,Ic.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new pt(0,3),shadowBlur:5},_s(al,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new Fe(0,0,4,6),spot2:new Fe(1,1,-4,-4)}))}),ys("ContextMenu",function(){return _s(Mu,Ic.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new pt(0,3),shadowBlur:5},new _p("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),ys("ContextMenuButton",function(){var t=_s("Button");t.stretch=Qa;var e=t.Xa("ButtonBorder");return e instanceof al&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new Fe(0,0,2,3),e.spot2=new Fe(1,1,-2,-2)),t}),ys("PanelExpanderButton",function(t){var e=ks(t,"COLLAPSIBLE"),i=_s("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},_s(al,{name:"ButtonIcon",strokeWidth:2},new _p("geometryString","visible",function(t){return t?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Bq(e)));return(t=i.Xa("ButtonBorder"))instanceof al&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(t,i){var n=i.diagram;if(null!==n&&!n.isReadOnly){var o=i.Ui();null===o&&(o=i.part),null!==o&&null!==(i=o.Xa(e))&&(t.handled=!0,n.ua("Collapse/Expand Panel"),i.visible=!i.visible,n.Ua("Collapse/Expand Panel"))}},i}),ys("CheckBoxButton",function(t){var e=ks(t);return(t=_s("Button",{desiredSize:new Lt(14,14)},_s(al,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Ya,geometryStretch:Za,visible:!1},""!==e?new _p("visible",e).Xx():[]))).click=function(t,i){if(i instanceof Ic){var n=t.diagram;if(!(null===n||n.isReadOnly||""!==e&&n.model.isReadOnly)){t.handled=!0;var o=i.Xa("ButtonIcon");n.ua("checkbox"),o.visible=!o.visible,"function"==typeof i._doClick&&i._doClick(t,i),n.Ua("checkbox")}}},t}),ys("CheckBox",function(t){t=_s("CheckBoxButton",t=ks(t),{name:"Button",isActionable:!1,margin:new Jt(0,1,0,0)});var e=_s(Ic,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),qr.None=Ka=new W(qr,"None",0),qr.Default=Ja=new W(qr,"Default",0),qr.Vertical=tr=new W(qr,"Vertical",4),qr.Horizontal=Qa=new W(qr,"Horizontal",5),qr.Fill=Ya=new W(qr,"Fill",3),qr.Uniform=Za=new W(qr,"Uniform",1),qr.UniformToFill=er=new W(qr,"UniformToFill",2),qr.FlipVertical=ir=new W(qr,"FlipVertical",1),qr.FlipHorizontal=nr=new W(qr,"FlipHorizontal",2),qr.FlipBoth=or=new W(qr,"FlipBoth",3),qr.make=_s,qr.getBuilders=function(){var t,e=new ht;for(t in xs)if(t!==t.toLowerCase()){var i=xs.H(t);"function"==typeof i&&e.add(t,i)}return e.freeze(),e},qr.defineBuilder=ys,qr.takeBuilderArgument=ks,Ss.prototype.copy=function(){var t=new Ss;return t.Kf=this.Kf,t.Pf=this.Pf,t.Lf=this.Lf,t.dg=this.dg,t.gg=this.gg,t.hg=this.hg,t.fg=this.fg,t.eg=this.eg,t.Go=this.Go,t.Ho=this.Ho,t.cg=this.cg,t.Pm=this.Pm,t.Qm=this.Qm,t.Rm=this.Rm,t.Om=this.Om,t.rg=this.rg,t.Mf=this.Mf,t.En=this.En,t},Ss.className="GraphObjectEventHandlers",Ts.prototype.copy=function(){var t=new Ts;return t.Ka[0]=this.Ka[0],t.Ka[1]=this.Ka[1],t.Ka[2]=this.Ka[2],t.Ka[3]=this.Ka[3],t.Ka[4]=this.Ka[4],t.Ka[5]=this.Ka[5],t},Ts.prototype.translate=function(t,e){this.Ka[4]+=this.Ka[0]*t+this.Ka[2]*e,this.Ka[5]+=this.Ka[1]*t+this.Ka[3]*e},Ts.prototype.scale=function(t,e){this.Ka[0]*=t,this.Ka[1]*=t,this.Ka[2]*=e,this.Ka[3]*=e},Ts.className="STransform",Cs.prototype.addColorStop=function(t,e){this.Bx.push({offset:t,color:e})},Cs.className="SGradient",Ds.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.style.width=i+"px",this.style.height=n+"px",this.Ea.setAttributeNS(null,"width",i+"px"),this.Ea.setAttributeNS(null,"height",n+"px"),this.Ea.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.Hu.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.Hu.firstElementChild.setAttributeNS(null,"height",n+"px"),!0)},Ds.prototype.ub=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.jA,t),S(e))for(var n in e)t.setAttributeNS("href"===n?"http://www.w3.org/1999/xlink":"",n,e[n]);return void 0!==i&&(t.textContent=i),t},Ds.prototype.getBoundingClientRect=function(){return this.Ea.getBoundingClientRect()},Ds.prototype.focus=function(){this.Ea.focus()},Ds.prototype.Hx=function(){this.ownerDocument=null},h.Object.defineProperties(Ds.prototype,{width:{get:function(){return this.Ea.width.baseVal.value},set:function(t){this.Ea.width=t}},height:{get:function(){return this.Ea.height.baseVal.value},set:function(t){this.Ea.height=t}},style:{get:function(){return this.Ea.style}}}),Ds.className="SVGSurface",(i=Is.prototype).reset=function(){this.stack=[],this.xc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.df=this.Hp=this.Gp=0,this.vq=null,this.path=[],this.Ud=new Ts,Os(this,1,0,0,1,0,0);var t=rt++,e=this.ub("clipPath",{id:"mainClip"+t});e.appendChild(this.ub("rect",{x:0,y:0,width:this.yk.width,height:this.yk.height})),this.Hu=e,this.yk.Ea.appendChild(e),this.xc[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")},i.arc=function(t,e,i,n,o,a,r,s){var c=2*Math.PI,l=c-1e-6,u=i*Math.cos(n),d=i*Math.sin(n),h=t+u,p=e+d,f=a?0:1;n=a?n-o:o-n,(1e-6<Math.abs(r-h)||1e-6<Math.abs(s-p))&&this.path.push(["L",h,+p]),0>n&&(n=n%c+c),n>l?(this.path.push(["A",i,i,0,1,f,t-u,e-d]),this.path.push(["A",i,i,0,1,f,h,p])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),f,t+i*Math.cos(o),e+i*Math.sin(o)])},i.beginPath=function(){this.path=[]},i.bezierCurveTo=function(t,e,i,n,o,a){this.path.push(["C",t,e,i,n,o,a])},i.clearRect=function(){},i.clip=function(){this.addPath("clipPath",this.path,this.Ud),this.addPath("clipPath",this.path,new Ts)},i.closePath=function(){this.path.push(["z"])},i.createLinearGradient=function(t,e,i,n){var o=new Cs("linear");return o.x1=t,o.y1=e,o.x2=i,o.y2=n,o},i.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.lA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+rt++,o={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.ub("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"})).appendChild(this.ub("image",o)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},i.createRadialGradient=function(t,e,i,n,o,a){var r=new Cs("radial");return r.x1=t,r.y1=e,r.r1=i,r.x2=n,r.y2=o,r.r2=a,r},i.drawImage=function(t,e,i,n,o,a,r,s,c){var l="";t instanceof HTMLCanvasElement&&(l=t.toDataURL()),t instanceof HTMLImageElement&&(l=t.getAttribute("src"));var u=t instanceof HTMLImageElement?t.naturalWidth:t.width,d=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===n&&(a=e,r=i,s=n=u,c=o=d),n=n||0,o=o||0,a=a||0,r=r||0,c=c||0,t={x:0,y:0,width:u||n,height:d||o,href:l},qe.$(n,s=s||0)&&qe.$(o,c)?-1===l.toLowerCase().indexOf(".svg")&&-1===l.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",l="",c/=o,0===a&&0===r||(l+=" translate("+a+", "+r+")"),1==(s/=n)&&1===c||(l+=" scale("+s+", "+c+")"),0===e&&0===i||(l+=" translate("+-e+", "+-i+")"),0===e&&0===i&&n===u&&o===d||(a="CLIP"+rt++,(r=this.ub("clipPath",{id:a})).appendChild(this.ub("rect",{x:e,y:i,width:n,height:o})),this.svg.appendChild(r),t["clip-path"]="url(#"+a+")"),Ps(this,"image",t,this.Ud,l),this.addElement("image",t)},i.fill=function(){this.addPath("fill",this.path,this.Ud)},i.Vd=function(){this.clipInsteadOfFill?this.clip():this.fill()},i.fillRect=function(t,e,i,n){Ps(this,"fill",t={x:(t=[t,e,i,n])[0],y:t[1],width:t[2],height:t[3]},this.Ud),this.addElement("rect",t)},i.fillText=function(t,e,i){t=[t,e,i],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),Ps(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Ud),this.addElement("text",e,t[0])},i.lineTo=function(t,e){this.path.push(["L",t,e])},i.moveTo=function(t,e){this.path.push(["M",t,e])},i.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},i.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},i.restore=function(){this.Ud=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},i.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Ud.copy())},i.setTransform=function(t,e,i,n,o,a){1===t&&0===e&&0===i&&1===n&&0===o&&0===a||Os(this,t,e,i,n,o,a)},i.scale=function(t,e){this.Ud.scale(t,e)},i.translate=function(t,e){this.Ud.translate(t,e)},i.transform=function(){},i.stroke=function(){this.addPath("stroke",this.path,this.Ud)},i.fj=function(){this.clipInsteadOfFill||this.stroke()},i.ub=function(t,e,i){return this.yk.ub(t,e,i)},i.addElement=function(t,e,i){return t=this.ub(t,e,i),0<this.xc.length?this.xc[this.xc.length-1].appendChild(t):this.svg.appendChild(t),this.vq=t},i.addPath=function(t,e,i){for(var n=[],o=0;o<e.length;o++){var a=C(e[o]),r=[a.shift()];if("A"===r[0])r.push(a.shift()+","+a.shift(),a.shift(),a.shift()+","+a.shift(),a.shift()+","+a.shift());else for(;a.length;)r.push(a.shift()+","+a.shift());n.push(r.join(" "))}e={d:n.join(" ")},"stroke"===t&&this.yu&&(e["stroke-dasharray"]=this.oh.toString(),e["stroke-dashoffset"]=this.ph),Ps(this,t,e,i),"clipPath"===t?(t="CLIP"+rt++,(i=this.ub("clipPath",{id:t})).appendChild(this.ub("path",e)),this.svg.appendChild(i),0<this.xc.length&&this.xc[this.xc.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},i.Mq=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t="SHADOW"+rt++,e=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=this.ub("feGaussianBlur",{in:"SourceAlpha",result:"blur",NA:this.shadowBlur/2}),n=this.ub("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),o=this.ub("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),a=this.ub("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),r=this.ub("feMerge",{});r.appendChild(this.ub("feMergeNode",{in:"offsetBlur"})),r.appendChild(this.ub("feMergeNode",{in:"SourceGraphic"})),e.appendChild(i),e.appendChild(n),e.appendChild(o),e.appendChild(a),e.appendChild(r),0<this.xc.length&&this.xc[this.xc.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},i.mw=function(t,e,i){this.Gp=t,this.Hp=e,this.df=i},i.jt=function(t,e){this.yu=!0,this.oh=t,this.ph=e},i.ht=function(){this.yu=!1},i.sc=function(){},i.my=function(){},Is.prototype.rotate=function(){},Is.prototype.getImageData=function(){return null},Is.prototype.measureText=function(){return null},Is.className="SVGContext",Eo.prototype.makeSvg=Eo.prototype.Ct=function(t){var e=new Ds(this,f.document);void 0===t&&(t=new Y);var i=this;return qa(this,function(t,n){return t=null!==(t=Xa(i,t,"SVG",e))?t.svg:null,"function"==typeof n?(n(t),null):t},t)},Eo.prototype.makeSVG=Eo.prototype.Ov=function(t){return this.Ct(t)},qr.prototype.Ix=function(t,e){if(!(t instanceof Is))return!1;if(!this.visible)return!0;var i=null,n=t.vq;if(this instanceof Ic&&(this.type===Ic.TableRow||this.type===Ic.TableColumn))return Qr(this,t,e),!0;var o=this.vb;if(0===o.width||0===o.height||isNaN(o.x)||isNaN(o.y))return!0;var a=this.transform,r=this.panel;0!=(4096&this.F)==1&&es(this);var s=0!=(256&this.F),c=!1;if(this instanceof gl&&(t.font=this.font),s){if(c=r.be()?r.naturalBounds:r.actualBounds,null!==this.md){var l=this.md,u=l.x,d=l.y,h=l.width;l=l.height}else u=Math.max(o.x,c.x),d=Math.max(o.y,c.y),h=Math.min(o.right,c.right)-u,l=Math.min(o.bottom,c.bottom)-d;if(u>o.width+o.x||o.x>c.width+c.x||d>o.height+o.y||o.y>c.height+c.y)return!0;c=!0,Os(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(u,d,h,l),t.clip()}if(this.xf()&&!this.isVisible())return!0;if(t.Ud.Ka=[1,0,0,1,0,0],(this instanceof gl&&1<this.lineCount||this instanceof al&&1<this.geometry.figures.length)&&Os(t,1,0,0,1,0,0),u=!1,this.xf()&&this.isShadowed&&e.De("drawShadows")&&(t.mw((d=this.shadowOffset).x*e.scale*e.Sb,d.y*e.scale*e.Sb,this.shadowBlur),js(t),t.shadowColor=this.shadowColor),d=!1,this.part&&e.De("drawShadows")&&(d=this.part.isShadowed),!0===this.shadowVisible?(js(t),!1===u&&d&&(Os(t,1,0,0,1,0,0),t.Mq(),u=!0)):!1===this.shadowVisible&&$s(t),h=this.naturalBounds,null!==this.areaBackground&&(ts(this,t,this.areaBackground,!0,!0,h,o),!1===u&&d&&(Os(t,1,0,0,1,0,0),t.Mq(),u=!0),this.areaBackground instanceof Vs&&this.areaBackground.type===tc?(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.Vd(this.areaBackground)):t.fillRect(o.x,o.y,o.width,o.height)),this instanceof Ic?Os(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):t.Ud.Ka=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],null!==this.background){!1===u&&d&&(Os(t,1,0,0,1,0,0),t.Mq(),u=!0);var p=this.naturalBounds;l=a=0;var f=p.width;p=p.height;var g=0;this instanceof al&&(a=(p=this.geometry.bounds).x,l=p.y,f=p.width,p=p.height,g=this.strokeWidth),ts(this,t,this.background,!0,!1,h,o),this.background instanceof Vs&&this.background.type===tc?(t.beginPath(),t.rect(a-g/2,l-g/2,f+g,p+g),t.Vd(this.background)):t.fillRect(a-g/2,l-g/2,f+g,p+g)}return d&&(null!==this.background||null!==this.areaBackground||null!==r&&0!=(512&r.F)||null!==r&&(r.type===Ic.Auto||r.type===Ic.Spot)&&r.Ab()!==this)?(ss(this,!0),null===this.shadowVisible&&$s(t)):ss(this,!1),this.Qi(t,e),d&&0!=(512&this.F)==1&&js(t),this.xf()&&d&&$s(t),s&&(t.restore(),c&&t.xc.pop()),this instanceof Ic&&(i=t.xc.pop()),!0===u&&t.xc.pop(),(this instanceof gl&&1<this.lineCount||this instanceof al&&1<this.geometry.figures.length)&&(i=t.xc.pop()),null!==t.yk.kq&&(null===i&&(n===t.vq?(Os(t,1,0,0,1,0,0),i=t.xc.pop()):i=t.vq),t.yk.kq(this,i)),this.svg=i,!0},Ls.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0)},Ls.prototype.toDataURL=function(t,e){return this.Ea.toDataURL(t,e)},Ls.prototype.getBoundingClientRect=function(){return this.Ea.getBoundingClientRect()},Ls.prototype.focus=function(){this.Ea.focus()},Ls.prototype.Hx=function(){this.ownerDocument=this.Ea.B=null},h.Object.defineProperties(Ls.prototype,{width:{get:function(){return this.Ea.width},set:function(t){this.Ea.width=t}},height:{get:function(){return this.Ea.height},set:function(t){this.Ea.height=t}},style:{get:function(){return this.Ea.style}}}),Ls.className="CanvasSurface",(i=Es.prototype).my=function(t){this.Y.imageSmoothingEnabled=t},i.arc=function(t,e,i,n,o,a){this.Y.arc(t,e,i,n,o,a)},i.beginPath=function(){this.Y.beginPath()},i.bezierCurveTo=function(t,e,i,n,o,a){this.Y.bezierCurveTo(t,e,i,n,o,a)},i.clearRect=function(t,e,i,n){this.Y.clearRect(t,e,i,n)},i.clip=function(){this.Y.clip()},i.closePath=function(){this.Y.closePath()},i.createLinearGradient=function(t,e,i,n){return this.Y.createLinearGradient(t,e,i,n)},i.createPattern=function(t,e){return this.Y.createPattern(t,e)},i.createRadialGradient=function(t,e,i,n,o,a){return this.Y.createRadialGradient(t,e,i,n,o,a)},i.drawImage=function(t,e,i,n,o,a,r,s,c){void 0===n?this.Y.drawImage(t,e,i):this.Y.drawImage(t,e,i,n,o,a,r,s,c)},i.fill=function(){this.Y.fill()},i.fillRect=function(t,e,i,n){this.Y.fillRect(t,e,i,n)},i.fillText=function(t,e,i){this.Y.fillText(t,e,i)},i.getImageData=function(t,e,i,n){return this.Y.getImageData(t,e,i,n)},i.lineTo=function(t,e){this.Y.lineTo(t,e)},i.measureText=function(t){return this.Y.measureText(t)},i.moveTo=function(t,e){this.Y.moveTo(t,e)},i.quadraticCurveTo=function(t,e,i,n){this.Y.quadraticCurveTo(t,e,i,n)},i.rect=function(t,e,i,n){this.Y.rect(t,e,i,n)},i.restore=function(){this.Y.restore()},Es.prototype.rotate=function(t){this.Y.rotate(t)},(i=Es.prototype).save=function(){this.Y.save()},i.setTransform=function(t,e,i,n,o,a){this.Y.setTransform(t,e,i,n,o,a)},i.scale=function(t,e){this.Y.scale(t,e)},i.stroke=function(){this.Y.stroke()},i.transform=function(t,e,i,n,o,a){1===t&&0===e&&0===i&&1===n&&0===o&&0===a||this.Y.transform(t,e,i,n,o,a)},i.translate=function(t,e){this.Y.translate(t,e)},i.Vd=function(t){if(t instanceof Vs&&t.type===tc){var e=t.Mk;(t=t.du)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.fn?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.fn?this.clip():this.fill()},i.fj=function(){this.fn||this.stroke()},i.mw=function(t,e,i){this.Gp=t,this.Hp=e,this.df=i},i.jt=function(t,e){var i=this.Y;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)},i.ht=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(Ns),t.lineDashOffset=0)},i.sc=function(t){t&&(this.bu=""),this.au=this.cu=""},h.Object.defineProperties(Es.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.au!==t&&(this.au=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.bu!==t&&(this.bu=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.cu!==t&&(this.cu=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.fn},set:function(t){this.fn=t}}});var Ns=Object.freeze([]);function As(){this.W=this.u=this.I=this.l=0}function Vs(t){hc||(Zs(),hc=!0),nt(this),this.s=!1,void 0===t?(this.pa=Js,this.Lk="black"):"string"==typeof t?(this.pa=Js,this.Lk=t):(this.pa=t,this.Lk="black"),(t=this.pa)===Qs?(this.ud=ae,this.Yk=de):this.Yk=this.ud=t===tc?ce:ne,this.Qs=0,this.Cr=NaN,this.ee=this.ss=this.de=null,this.du=this.Mk=0}function zs(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?ic:i,Gs(t),Us(e,i)}function Fs(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?ic:i,Gs(t),Us(-e,i)}function Bs(t,e,i){Gs(t),t=cc.l;var n=cc.I,o=cc.u,a=cc.W;return Gs(e),void 0===i&&(i=.5),"rgba("+Math.round((cc.l-t)*i+t)+", "+Math.round((cc.I-n)*i+n)+", "+Math.round((cc.u-o)*i+o)+", "+Math.round((cc.W-a)*i+a)+")"}function Rs(t){return null===t?null:t instanceof Vs?t.Vx():(Gs(t),128>(299*cc.l+587*cc.I+114*cc.u)/1e3)}function Us(t,e){switch(e){case ic:e=100*Ws(cc.l);var i=100*Ws(cc.I),n=100*Ws(cc.u);return uc.l=.4124564*e+.3575761*i+.1804375*n,uc.I=.2126729*e+.7151522*i+.072175*n,uc.u=.0193339*e+.119192*i+.9503041*n,uc.W=cc.W,e=Xs(uc.l/rc[0]),i=Xs(uc.I/rc[1]),n=Xs(uc.u/rc[2]),dc.l=116*i-16,dc.I=500*(e-i),dc.u=200*(i-n),dc.W=uc.W,dc.l=Math.min(100,Math.max(0,dc.l+100*t)),e=(t=(dc.l+16)/116)-dc.u/200,uc.l=rc[0]*Ys(dc.I/500+t),uc.I=rc[1]*(dc.l>ac*oc?Math.pow(t,3):dc.l/ac),uc.u=rc[2]*Ys(e),uc.W=dc.W,t=-.969266*uc.l+1.8760108*uc.I+.041556*uc.u,e=.0556434*uc.l+-.2040259*uc.I+1.0572252*uc.u,cc.l=255*qs((3.2404542*uc.l+-1.5371385*uc.I+-.4985314*uc.u)/100),cc.I=255*qs(t/100),cc.u=255*qs(e/100),cc.W=uc.W,cc.l=Math.round(cc.l),255<cc.l?cc.l=255:0>cc.l&&(cc.l=0),cc.I=Math.round(cc.I),255<cc.I?cc.I=255:0>cc.I&&(cc.I=0),cc.u=Math.round(cc.u),255<cc.u?cc.u=255:0>cc.u&&(cc.u=0),"rgba("+cc.l+", "+cc.I+", "+cc.u+", "+cc.W+")";case nc:return Hs(),lc.u=Math.min(100,Math.max(0,lc.u+100*t)),"hsla("+lc.l+", "+lc.I+"%, "+lc.u+"%, "+lc.W+")";default:return _("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function Gs(t){hc||(Zs(),hc=!0);var e=sc;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,cc.l=t[0],cc.I=t[1],cc.u=t[2],cc.W=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,cc.l=0,cc.I=0,cc.u=0,cc.W=1)}}function Hs(){var t=cc.l/255,e=cc.I/255,i=cc.u/255,n=Math.max(t,e,i),o=Math.min(t,e,i),a=n-o;if(o=(n+o)/2,0===a)var r=t=0;else{switch(n){case t:r=(e-i)/a%6;break;case e:r=(i-t)/a+2;break;case i:r=(t-e)/a+4}0>(r*=60)&&(r+=360),t=a/(1-Math.abs(2*o-1))}lc.l=Math.round(r),lc.I=Math.round(100*t),lc.u=Math.round(100*o),lc.W=cc.W}function Ws(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function qs(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Xs(t){return t>oc?Math.pow(t,1/3):(ac*t+16)/116}function Ys(t){var e=t*t*t;return e>oc?e:(116*t-16)/ac}function Ks(t,e){"string"!=typeof t&&(t instanceof Vs||_("Value for "+e+" must be a color string or a Brush, not "+t))}function Zs(){sc=lr?new Ls(null).context:null}Es.className="CanvasSurfaceContext",As.className="ColorNumbers",Vs.prototype.copy=function(){var t=new Vs;return t.pa=this.pa,t.Lk=this.Lk,t.ud=this.ud.G(),t.Yk=this.Yk.G(),t.Qs=this.Qs,t.Cr=this.Cr,null!==this.de&&(t.de=this.de.copy()),t.ss=this.ss,t},(i=Vs.prototype).freeze=function(){return this.s=!0,null!==this.de&&this.de.freeze(),this},i.ea=function(){return Object.isFrozen(this)&&_("cannot thaw constant: "+this),this.s=!1,null!==this.de&&this.de.ea(),this},i.eb=function(t){t.classType===Vs&&(this.type=t)},i.toString=function(){var t="Brush(";if(this.type===Js)t+=this.color;else if(t=this.type===Qs?t+"Linear ":this.type===tc?t+"Radial ":this.type===ec?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},i.addColorStop=function(t,e){return this.s&&w(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&y(t,"0 <= loc <= 1",Vs,"addColorStop:loc"),null===this.de&&(this.de=new ht),this.de.add(t,e),this.pa===Js&&(this.type=Qs),this.ee=null,this},i.dA=function(t,e){if(this.s&&w(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?ic:e,this.type===Js)Gs(this.color),this.color=Us(t,e);else if((this.type===Qs||this.type===tc)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)Gs(i.value),this.addColorStop(i.key,Us(t,e));return this},i.$y=function(t,e){if(this.s&&w(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?ic:e,this.type===Js)Gs(this.color),this.color=Us(-t,e);else if((this.type===Qs||this.type===tc)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)Gs(i.value),this.addColorStop(i.key,Us(-t,e));return this},i.Vx=function(){if(this.type===Js)return Rs(this.color);if((this.type===Qs||this.type===tc)&&null!==this.colorStops){var t=this.colorStops;if(this.type===tc)return Rs(t.first().value);if(null!==t.get(.5))return Rs(t.get(.5));if(2===t.count)return Rs(Bs((t=t.na())[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,o=1,a=1;e.next();){var r=e.key,s=Math.abs(.5-e.key);o>a&&s<o?(i=r,o=s):a>=o&&s<a&&(n=r,a=s)}return i>n&&(a=i,i=n,n=a,a=o),o=n-i,Rs(Bs(t.get(i),t.get(n),1-a/o))}return!1},h.Object.defineProperties(Vs.prototype,{type:{get:function(){return this.pa},set:function(t){this.s&&w(this,t),this.pa=t,this.start.jc()&&(t===Qs?this.start=ae:t===tc&&(this.start=ce)),this.end.jc()&&(t===Qs?this.end=de:t===tc&&(this.end=ce)),this.ee=null}},color:{get:function(){return this.Lk},set:function(t){this.s&&w(this,t),this.Lk=t,this.ee=null}},start:{get:function(){return this.ud},set:function(t){this.s&&w(this,t),this.ud=t.G(),this.ee=null}},end:{get:function(){return this.Yk},set:function(t){this.s&&w(this,t),this.Yk=t.G(),this.ee=null}},startRadius:{get:function(){return this.Qs},set:function(t){this.s&&w(this,t),0>t&&y(t,">= zero",Vs,"startRadius"),this.Qs=t,this.ee=null}},endRadius:{get:function(){return this.Cr},set:function(t){this.s&&w(this,t),0>t&&y(t,">= zero",Vs,"endRadius"),this.Cr=t,this.ee=null}},colorStops:{get:function(){return this.de},set:function(t){this.s&&w(this,t),this.de=t,this.ee=null}},pattern:{get:function(){return this.ss},set:function(t){this.s&&w(this,t),this.ss=t,this.ee=null}}}),Vs.prototype.isDark=Vs.prototype.Vx,Vs.prototype.darkenBy=Vs.prototype.$y,Vs.prototype.lightenBy=Vs.prototype.dA,Vs.prototype.addColorStop=Vs.prototype.addColorStop;var Js,Qs,tc,ec,ic,nc,oc=216/24389,ac=24389/27,rc=[95.047,100,108.883],sc=null,cc=new As,lc=new As,uc=new As,dc=new As,hc=!1;function pc(){this.name="Base"}function fc(){this.name="Base",this.name="Position"}function gc(){this.name="Base",this.name="Horizontal"}function mc(){this.name="Base",this.name="Vertical"}function vc(){this.name="Base",this.name="Spot"}function bc(){this.name="Base",this.name="Auto"}function _c(){this.name="Base",this.name="Table"}function wc(){this.name="Base",this.name="TableRow"}function yc(){this.name="Base",this.name="TableColumn"}function kc(){this.name="Base",this.name="Viewbox"}function xc(){this.name="Base",this.name="Grid"}function Sc(t,e,i){if(0>e)return 0==t%e;if(0!=t%e)return!1;e=i.length;for(var n=0;n<e;n++)if(0==t%i[n])return!1;return!0}function Tc(){this.name="Base",this.name="Link"}function Cc(t,e,i,n){if(!1!==hs(n)){var o=n.strokeWidth;0===o&&t instanceof Mu&&t.type===Ic.Link&&t.adornedObject instanceof al&&(o=t.adornedObject.strokeWidth),o*=n.ya,t instanceof id&&null!==t.ka?Kr(n,(t=t.ka.bounds).x-o/2,t.y-o/2,t.width+o,t.height+o):t instanceof Mu&&null!==t.adornedPart.ka?Kr(n,(t=t.adornedPart.ka.bounds).x-o/2,t.y-o/2,t.width+o,t.height+o):Kr(n,-o/2,-o/2,e+o,i+o),ps(n,!1)}}function Dc(){this.name="Base",this.name="Graduated"}function Ic(t){qr.call(this),this.pa=void 0===t?Ic.Position:t,null===this.pa&&_("Panel type not specified or PanelLayout not loaded: "+t),this.V=new tt,this.cb=ee,this.pa===Ic.Grid&&(this.isAtomic=!0),this.un=Ie,this.Nf=Ja,this.pa===Ic.Table&&Pc(this),this.Zp=Za,this.Tn=Mt,this.Un=yt,this.Qn=0,this.Pn=100,this.Sn=10,this.Rn=0,this.ci=this.ib=this.Xg=this.Wg=this.uj=null,this.jo=NaN,this.ne=this.si=null,this.pl="category",this.Ld=null,this.sg=new Vt(NaN,NaN,NaN,NaN),this.sh=this.sp=this.Hi=null,this.Gg=""}function Pc(t){t.nj=ee,t.Og=1,t.ii=null,t.hi=null,t.Ng=1,t.Mg=null,t.gi=null,t.rb=[],t.mb=[],t.Mj=ol,t.kj=ol,t.Ki=0,t.vi=0}function Mc(t,e,i,n){for(var o=n.length,a=t.actualBounds,r=t.naturalBounds,s=!0,c=0;c<o;c++){var l=n[c];if(void 0!==l)if(s)s=!1;else if(0!==l.actual){if(i){if(l.position>a.height)continue}else if(l.position>a.width)continue;var u=l.separatorStrokeWidth;isNaN(u)&&(u=i?t.Og:t.Ng);var d=l.separatorStroke;if(null===d&&(d=i?t.ii:t.Mg),0!==u&&null!==d){ts(t,e,d,!1,!1,r,a),d=!1;var h=l.separatorDashArray;null===h&&(h=i?t.hi:t.gi),null!==h&&(d=!0,e.jt(h,0)),e.beginPath(),h=l.position+u,i?h>a.height&&(u-=h-a.height):h>a.width&&(u-=h-a.width),l=l.position+u/2,e.lineWidth=u,u=t.cb,i?(h=a.width-u.right,e.moveTo(u.left,l+=u.top),e.lineTo(h,l)):(h=a.height-u.bottom,e.moveTo(l+=u.left,u.top),e.lineTo(l,h)),e.stroke(),d&&e.ht()}}}}function Oc(t,e,i,n,o){for(var a=n.length,r=t.actualBounds,s=t.naturalBounds,c=0;c<a;c++){var l=n[c];if(void 0!==l&&null!==l.background&&l.coversSeparators!==o&&0!==l.actual){var u=i?r.height:r.width;if(!(l.position>u)){var d=l.uc(),h=l.separatorStrokeWidth;isNaN(h)&&(h=i?t.Og:t.Ng);var p=l.separatorStroke;null===p&&(p=i?t.ii:t.Mg),null===p&&(h=0),d-=h,(h=l.position+h)+(d+=l.actual)>u&&(d=u-h),0>=d||(u=t.cb,ts(t,e,l.background,!0,!1,s,r),i?e.fillRect(u.left,h+u.top,r.width-(u.left+u.right),d):e.fillRect(h+u.left,u.top,d,r.height-(u.top+u.bottom)))}}}}function $c(t){return"LineV"===t||"BarV"===t}function jc(t){return null!==t.part?t.part.locationObject:null}function Lc(t,e){Ec(t,t,e)}function Ec(t,e,i){i(e);for(var n=(e=e.V.j).length,o=0;o<n;o++){var a=e[o];a instanceof Ic&&Ec(t,a,i)}}function Nc(t,e){Ac(t,t,e)}function Ac(t,e,i){if(i(e),e instanceof Ic)for(var n=(e=e.V.j).length,o=0;o<n;o++)Ac(t,e[o],i)}function Vc(t,e,i){if(i(e))return e;if(e instanceof Ic)for(var n=(e=e.V.j).length,o=0;o<n;o++){var a=Vc(t,e[o],i);if(null!==a)return a}return null}function zc(t){for(var e=(t=t.V.j).length,i=0,n=0;n<e;n++){var o=t[n];o instanceof Ic?i=Math.max(i,zc(o)):o instanceof al&&(i=Math.max(i,o.qh/2*o.Oj*o.uf()))}return i}function Fc(t,e,i,n){for(var o=t.V.j,a=o.length;a--;){var r=o[a];if(r.visible){var s=r.actualBounds,c=t.naturalBounds;s.x>c.width||s.y>c.height||0>s.x+s.width||0>s.y+s.height||(r instanceof Ic&&Fc(r,e,i,n),null!==e&&(r=e(r)),null===r||null!==i&&!i(r)||n.add(r))}}}function Bc(t){var e=null;return t instanceof al&&((e=t.spot1)===Ie&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=oe),e}function Rc(t){var e=null;return t instanceof al&&((e=t.spot2)===Ie&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=he),e}function Uc(t,e){t.F=e?16777216|t.F:-16777217&t.F}function Gc(t){return null!==(t=t.ci)&&t.s}function Hc(t){var e=t.ci;if(null===e)null!==t.data&&_("Template cannot have .data be non-null: "+t),t.ci=e=new tt;else if(e.s)return;var i=new tt;Uc(t,!1),t.Jm(t,function(t,n){var o=n.ab;if(null!==o)for(ls(n,!1),o=o.iterator;o.next();){var a=o.value;a.mode===kp&&ls(n,!0);var r=a.sourceName;null!==r&&("/"===r&&Uc(t,!0),null!==(r=wp(a,t,n))&&(i.add(r),null===r.Ol&&(r.Ol=new tt),r.Ol.add(a))),e.add(a)}if(n instanceof Ic&&n.type===Ic.Table){if(0<n.rb.length)for(o=(t=n.rb).length,a=0;a<o;a++)if(void 0!==(r=t[a])&&null!==r.ab)for(var s=r.ab.iterator;s.next();){var c=s.value;c.bd=r,c.Rp=2,c.Ul=r.index,e.add(c)}if(0<n.mb.length)for(t=(n=n.mb).length,o=0;o<t;o++)if(void 0!==(a=n[o])&&null!==a.ab)for(r=a.ab.iterator;r.next();)(s=r.value).bd=a,s.Rp=1,s.Ul=a.index,e.add(s)}});for(var n=i.iterator;n.next();){var o=n.value;if(null!==o.Ol){ls(o,!0);for(var a=o.Ol.iterator;a.next();){var r=a.value;null===o.ab&&(o.ab=new tt),o.ab.add(r)}}o.Ol=null}for(n=e.iterator;n.next();)if(null!==(a=(o=n.value).bd)){o.bd=null;var s=o.targetProperty,c=s.indexOf(".");0<c&&a instanceof Ic&&(r=s.substring(0,c),s=s.substr(c+1),null!==(c=a.Xa(r))?(a=c,o.targetProperty=s):k('Warning: unable to find GraphObject named "'+r+'" for Binding: '+o.toString())),a instanceof tl?(r=at(a.panel),o.gj=void 0===r?-1:r,a.panel.Jk=o.gj):a instanceof qr?(r=at(a),o.gj=void 0===r?-1:r,a.Jk=o.gj):_("Unknown type of binding target: "+a)}e.freeze(),t instanceof su&&t.Wb()&&t.zb()}function Wc(t){if(t.type===Ic.Spot||t.type===Ic.Auto)return Math.min(t.V.length,1);if(t.type===Ic.Link){for(var e=(t=t.V).length,i=0;i<e;i++){var n=t.L(i);if(!(n instanceof al&&n.isPanelMain))break}return i}return t.type===Ic.Table&&0<t.V.length&&(t=t.V.L(0)).isPanelMain&&t instanceof Ic&&(t.type===Ic.TableRow||t.type===Ic.TableColumn)?1:0}function qc(t,e,i){if(!(null==e||0>i)){var n=function(t,e){if(null===e)return"";if("function"==typeof(t=t.pl))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=gp(e,t)}return void 0===t?"":"string"==typeof t?t:(_("Panel.getCategoryForItemData found a non-string category for "+e+": "+t),"")}(t,e),o=t.itemTemplateMap,a=null;null!==o&&(a=o.H(n)),null===a&&(Zc||(Zc=!0,k('No item template Panel found for category "'+n+'" on '+t),k("  Using default item template."),n=new Ic,(o=new gl).bind(new _p("text","",$)),n.add(o),Jc=n),a=Jc),null!==(n=a)&&(Hc(n),0!=(16777216&(n=n.copy()).F)&&null!==(o=t.Ui())&&Uc(o,!0),"object"==typeof e&&(null===t.Ld&&(t.Ld=new ht),t.Ld.add(e,n)),o=i+Wc(t),t.tb(o,n),n.ib=e,Xc(t,o,i),n.ib=null,n.data=e)}}function Xc(t,e,i){for(t=t.V;e<t.length;){var n=t.L(e);if(n instanceof Ic){var o=e,a=i;n.type===Ic.TableRow?n.row=o:n.type===Ic.TableColumn&&(n.column=o),n.itemIndex=a}e++,i++}}function Yc(t,e,i){var n=e.enabledChanged;if(null!==n&&n(e,i),e instanceof Ic){n=(e=e.V.j).length;for(var o=0;o<n;o++){var a=e[o];i&&a instanceof Ic&&!a.isEnabled||Yc(t,a,i)}}}function Kc(t,e){Qc.add(t,e)}Vs.className="Brush",Vs.Solid=Js=new W(Vs,"Solid",0),Vs.Linear=Qs=new W(Vs,"Linear",1),Vs.Radial=tc=new W(Vs,"Radial",2),Vs.Pattern=ec=new W(Vs,"Pattern",4),Vs.Lab=ic=new W(Vs,"Lab",5),Vs.HSL=nc=new W(Vs,"HSL",6),Vs.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},Vs.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;hc||(Zs(),hc=!0);var e=sc;if(null===e)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i||(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},Vs.lighten=function(t){return zs(t)},Vs.lightenBy=zs,Vs.darken=function(t){return Fs(t)},Vs.darkenBy=Fs,Vs.mix=Bs,Vs.isDark=Rs,pc.prototype.measure=function(){},pc.prototype.gA=function(t,e,i,n,o){t.measure(e,i,n,o)},pc.prototype.arrange=function(){},pc.prototype.Qy=function(t,e,i,n,o,a){t.arrange(e,i,n,o,a)},pc.prototype.bc=function(){},h.Object.defineProperties(pc.prototype,{classType:{get:function(){return Ic}}}),pc.prototype.arrangeElement=pc.prototype.Qy,pc.prototype.measureElement=pc.prototype.gA,pc.className="PanelLayout",d(fc,pc),fc.prototype.measure=function(t,e,i,n,o,a,r){var s=n.length;t=jc(t);for(var c=0;c<s;c++){var l=n[c];if(l.visible||l===t){var u=l.margin,d=u.right+u.left;u=u.top+u.bottom,l.measure(e,i,a,r);var h=l.measuredBounds;d=Math.max(h.width+d,0),u=Math.max(h.height+u,0),h=l.position.x;var p=l.position.y;isFinite(h)||(h=0),isFinite(p)||(p=0),l instanceof al&&l.isGeometryPositioned&&(h-=l=l.strokeWidth/2,p-=l),Wt(o,h,p,d,u)}}},fc.prototype.arrange=function(t,e,i){var n=e.length,o=t.padding;for(t=i.x-o.left,i=i.y-o.top,o=0;o<n;o++){var a=e[o],r=a.measuredBounds,s=a.margin,c=a.position.x,l=a.position.y;if(c=isNaN(c)?-t:c-t,l=isNaN(l)?-i:l-i,a instanceof al&&a.isGeometryPositioned){var u=a.strokeWidth/2;c-=u,l-=u}a.visible&&a.arrange(c+s.left,l+s.top,r.width,r.height)}},d(gc,pc),gc.prototype.measure=function(t,e,i,n,o,a,r){var s=n.length;e=P(),a=jc(t);for(var c=0;c<s;c++){var l=n[c];if(l.visible||l===a){var u=os(l,!1);if(u!==Ka&&u!==Qa)e.push(l);else{l.measure(1/0,i,0,r),u=l.margin,l=l.measuredBounds;var d=Math.max(l.height+u.top+u.bottom,0);o.width+=Math.max(l.width+u.right+u.left,0),o.height=Math.max(o.height,d)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):0!==o.height&&(i=Math.min(o.height,t.maxSize.height)),t=0;t<n;t++)((c=e[t]).visible||c===a)&&(s=(u=c.margin).right+u.left,u=u.top+u.bottom,c.measure(1/0,i,0,r),c=c.measuredBounds,u=Math.max(c.height+u,0),o.width+=Math.max(c.width+s,0),o.height=Math.max(o.height,u));M(e)},gc.prototype.arrange=function(t,e,i){for(var n=e.length,o=t.padding,a=o.top,r=t.isOpposite,s=r?i.width:o.left,c=0;c<n;c++){var l=a,u=e[c];if(u.visible){var d=u.measuredBounds,h=u.margin,p=h.top+h.bottom,f=a+o.bottom,g=d.height,m=os(u,!1);(isNaN(u.desiredSize.height)&&m===Ya||m===tr)&&(g=Math.max(i.height-p-f,0)),p=g+p+f,(f=u.alignment).Mb()&&(f=t.defaultAlignment),f.fb()||(f=ce),r&&(s-=d.width+h.left+h.right),u.arrange(s+f.offsetX+h.left,l+f.offsetY+h.top+(i.height*f.y-p*f.y),d.width,g),r||(s+=d.width+h.left+h.right)}}},d(mc,pc),mc.prototype.measure=function(t,e,i,n,o,a){var r=n.length;i=P();for(var s=jc(t),c=0;c<r;c++){var l=n[c];if(l.visible||l===s){var u=os(l,!1);if(u!==Ka&&u!==tr)i.push(l);else{var d=l.margin;u=d.right+d.left,d=d.top+d.bottom,l.measure(e,1/0,a,0),l=l.measuredBounds,zt(o,Math.max(o.width,Math.max(l.width+u,0)),o.height+Math.max(l.height+d,0))}}}if(0!==(n=i.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==o.width&&(e=Math.min(o.width,t.maxSize.width)),t=0;t<n;t++)((c=i[t]).visible||c===s)&&(r=(l=c.margin).right+l.left,l=l.top+l.bottom,c.measure(e,1/0,a,0),c=c.measuredBounds,l=Math.max(c.height+l,0),o.width=Math.max(o.width,Math.max(c.width+r,0)),o.height+=l);M(i)}},mc.prototype.arrange=function(t,e,i){for(var n=e.length,o=t.padding,a=o.left,r=t.isOpposite,s=r?i.height:o.top,c=0;c<n;c++){var l=a,u=e[c];if(u.visible){var d=u.measuredBounds,h=u.margin,p=h.left+h.right,f=a+o.right,g=d.width,m=os(u,!1);(isNaN(u.desiredSize.width)&&m===Ya||m===Qa)&&(g=Math.max(i.width-p-f,0)),p=g+p+f,(f=u.alignment).Mb()&&(f=t.defaultAlignment),f.fb()||(f=ce),r&&(s-=d.height+h.bottom+h.top),u.arrange(l+f.offsetX+h.left+(i.width*f.x-p*f.x),s+f.offsetY+h.top,g,d.height),r||(s+=d.height+h.bottom+h.top)}}},d(vc,pc),vc.prototype.measure=function(t,e,i,n,o,a,r){var s=n.length,c=t.Ab(),l=c.margin,u=l.right+l.left,d=l.top+l.bottom;c.measure(e,i,a,r);var h=c.measuredBounds;a=h.width,r=h.height;for(var p=Math.max(a+u,0),f=Math.max(r+d,0),g=t.isClipping,m=Vt.allocAt(-l.left,-l.top,p,f),v=!0,b=jc(t),_=0;_<s;_++){var w=n[_];if(w!==c&&(w.visible||w===b)){switch(p=(l=w.margin).right+l.left,f=l.top+l.bottom,h=os(w,!1)){case Ya:e=a,i=r;break;case Qa:e=a;break;case tr:i=r}w.measure(e,i,0,0),h=w.measuredBounds,p=Math.max(h.width+p,0),f=Math.max(h.height+f,0);var y=w.alignment;y.Mb()&&(y=t.defaultAlignment),y.fb()||(y=ce);var k=w.alignmentFocus;k.Mb()&&(k=ce);var x=null;if(w instanceof Ic&&""!==w.Gg&&(w.arrange(0,0,h.width,h.height),(x=w.Xa(w.Gg))===w&&(x=null)),null!==x){for(l=pt.allocAt(k.x*(l=x.naturalBounds).width-k.offsetX-(h=x.margin).left,k.y*l.height-k.offsetY-h.top);x!==w;)x.transform.ra(l),x=x.panel;w=y.x*a+y.offsetX-l.x,h=y.y*r+y.offsetY-l.y,pt.free(l)}else w=y.x*a+y.offsetX-(k.x*h.width+k.offsetX)-l.left,h=y.y*r+y.offsetY-(k.y*h.height+k.offsetY)-l.top;v?(v=!1,o.h(w,h,p,f)):Wt(o,w,h,p,f)}}switch(v?o.assign(m):g?o.Hv(m.x,m.y,m.width,m.height):Wt(o,m.x,m.y,m.width,m.height),Vt.free(m),(h=c.stretch)===Ja&&(h=os(c,!1)),h){case Ka:return;case Ya:if(!isFinite(e)&&!isFinite(i))return;break;case Qa:if(!isFinite(e))return;break;case tr:if(!isFinite(i))return}for(a=(h=c.measuredBounds).width,r=h.height,p=Math.max(a+u,0),f=Math.max(r+d,0),m=Vt.allocAt(-(l=c.margin).left,-l.top,p,f),e=0;e<s;e++)(i=n[e])===c||!i.visible&&i!==b||(p=(l=i.margin).right+l.left,f=l.top+l.bottom,h=i.measuredBounds,p=Math.max(h.width+p,0),f=Math.max(h.height+f,0),(u=i.alignment).Mb()&&(u=t.defaultAlignment),u.fb()||(u=ce),(i=i.alignmentFocus).Mb()&&(i=ce),v?(v=!1,o.h(u.x*a+u.offsetX-(i.x*h.width+i.offsetX)-l.left,u.y*r+u.offsetY-(i.y*h.height+i.offsetY)-l.top,p,f)):Wt(o,u.x*a+u.offsetX-(i.x*h.width+i.offsetX)-l.left,u.y*r+u.offsetY-(i.y*h.height+i.offsetY)-l.top,p,f));v?o.assign(m):g?o.Hv(m.x,m.y,m.width,m.height):Wt(o,m.x,m.y,m.width,m.height),Vt.free(m)},vc.prototype.arrange=function(t,e,i){var n=e.length,o=t.Ab(),a=o.measuredBounds,r=a.width,s=t.padding,c=s.left,l=c-i.x,u=(s=s.top)-i.y;o.arrange(l,u,r,a=a.height);for(var d=0;d<n;d++){var h=e[d];if(h!==o){var p=h.measuredBounds,f=p.width;p=p.height,(u=h.alignment).Mb()&&(u=t.defaultAlignment),u.fb()||(u=ce);var g=h.alignmentFocus;if(g.Mb()&&(g=ce),l=null,h instanceof Ic&&""!==h.Gg&&(l=h.Xa(h.Gg))===h&&(l=null),null!==l){var m=l.naturalBounds;for(g=pt.allocAt(g.x*m.width-g.offsetX,g.y*m.height-g.offsetY);l!==h;)l.transform.ra(g),l=l.panel;l=u.x*r+u.offsetX-g.x,u=u.y*a+u.offsetY-g.y,pt.free(g)}else l=u.x*r+u.offsetX-(g.x*f+g.offsetX),u=u.y*a+u.offsetY-(g.y*p+g.offsetY);l-=i.x,u-=i.y,h.visible&&h.arrange(c+l,s+u,f,p)}}},d(bc,pc),bc.prototype.measure=function(t,e,i,n,o,a,r){var s=n.length,c=t.Ab(),l=c.margin,u=e,d=i,h=l.right+l.left,p=l.top+l.bottom;c.measure(e,i,a,r),l=c.measuredBounds;var f=0,g=null;c instanceof al&&(f=(g=c).strokeWidth*g.scale);var m=Math.max(l.width+h,0);l=Math.max(l.height+p,0);var v=Bc(c),b=v.x*m+v.offsetX;v=v.y*l+v.offsetY;var _=Rc(c),w=_.x*m+_.offsetX;for(_=_.y*l+_.offsetY,isFinite(e)&&(u=Math.max(Math.abs(b-w)-f,0)),isFinite(i)&&(d=Math.max(Math.abs(v-_)-f,0)),(f=Lt.alloc()).h(0,0),t=jc(t),_=0;_<s;_++)(v=n[_])===c||!v.visible&&v!==t||(m=(l=v.margin).right+l.left,b=l.top+l.bottom,v.measure(u,d,0,0),l=v.measuredBounds,m=Math.max(l.width+m,0),l=Math.max(l.height+b,0),f.h(Math.max(m,f.width),Math.max(l,f.height)));if(1===s)o.width=m,o.height=l,Lt.free(f);else{switch(v=Bc(c),s=n=0,(_=Rc(c)).x!==v.x&&_.y!==v.y&&(n=f.width/Math.abs(_.x-v.x),s=f.height/Math.abs(_.y-v.y)),Lt.free(f),f=0,null!==g&&(f=g.strokeWidth*g.scale,sl(g)===Za&&(n=s=Math.max(n,s))),n+=Math.abs(v.offsetX)+Math.abs(_.offsetX)+f,s+=Math.abs(v.offsetY)+Math.abs(_.offsetY)+f,(g=c.stretch)===Ja&&(g=os(c,!1)),g){case Ka:r=a=0;break;case Ya:isFinite(e)&&(n=e),isFinite(i)&&(s=i);break;case Qa:isFinite(e)&&(n=e),r=0;break;case tr:a=0,isFinite(i)&&(s=i)}c.nm(),c.measure(n,s,a,r),o.width=c.measuredBounds.width+h,o.height=c.measuredBounds.height+p}},bc.prototype.arrange=function(t,e){var i=e.length,n=t.Ab(),o=n.measuredBounds,a=Vt.alloc();a.h(0,0,1,1);var r=n.margin,s=r.left,c=t.padding,l=c.left;n.arrange(l+s,(c=c.top)+(r=r.top),o.width,o.height);var u=Bc(n),d=Rc(n),h=u.y*o.height+u.offsetY,p=d.x*o.width+d.offsetX;for(d=d.y*o.height+d.offsetY,a.x=u.x*o.width+u.offsetX,a.y=h,Wt(a,p,d,0,0),a.x+=s+l,a.y+=r+c,o=0;o<i;o++)(s=e[o])!==n&&(l=s.measuredBounds,r=s.margin,c=Math.max(l.width+r.right+r.left,0),u=Math.max(l.height+r.top+r.bottom,0),(h=s.alignment).Mb()&&(h=t.defaultAlignment),h.fb()||(h=ce),c=a.width*h.x+h.offsetX-c*h.x+r.left+a.x,r=a.height*h.y+h.offsetY-u*h.y+r.top+a.y,s.visible&&(qt(a.x,a.y,a.width,a.height,c,r,l.width,l.height)?s.arrange(c,r,l.width,l.height):s.arrange(c,r,l.width,l.height,new Vt(a.x,a.y,a.width,a.height))));Vt.free(a)},d(_c,pc),_c.prototype.measure=function(t,e,i,n,o,a,r){for(var s=n.length,c=P(),l=P(),u=0;u<s;u++){var d=n[u],h=d instanceof Ic?d:null;if(null===h||h.type!==Ic.TableRow&&h.type!==Ic.TableColumn||!d.visible)c.push(d);else{l.push(h);for(var p=h.V.j,f=p.length,g=0;g<f;g++){var m=p[g];h.type===Ic.TableRow?m.row=d.row:h.type===Ic.TableColumn&&(m.column=d.column),c.push(m)}}}0===(s=c.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var v=[],b=0;b<s;b++){var _=c[b];ps(_,!0),gs(_,!0),v[_.row]||(v[_.row]=[]),v[_.row][_.column]||(v[_.row][_.column]=[]),v[_.row][_.column].push(_)}M(c);var w=P(),y=P(),k=P(),x={count:0},S={count:0},T=e,C=i,D=t.rb;s=D.length;for(var I=0;I<s;I++){var O=D[I];void 0!==O&&(O.actual=0)}s=(D=t.mb).length;for(var $=0;$<s;$++)void 0!==(O=D[$])&&(O.actual=0);for(var j=v.length,L=0,E=0;E<j;E++)v[E]&&(L=Math.max(L,v[E].length));var N=Math.min(t.topIndex,j-1),A=Math.min(t.leftIndex,L-1),V=0;j=v.length;for(var z=jc(t),F=0;F<j;F++)if(v[F]){L=v[F].length;for(var B=t.getRowDefinition(F),R=B.actual=0;R<L;R++)if(v[F][R]){var U=t.getColumnDefinition(R);void 0===w[R]&&(U.actual=0,w[R]=!0);for(var G=v[F][R],H=G.length,W=0;W<H;W++){var q=G[W];if(q.visible||q===z){var X=1<q.rowSpan||1<q.columnSpan;X&&(F<N||R<A||y.push(q));var Y=q.margin,K=Y.right+Y.left,Z=Y.top+Y.bottom,J=as(q,B,U,!1),Q=q.desiredSize,tt=!isNaN(Q.height),et=!isNaN(Q.width)&&tt;if(X||J===Ka||et||F<N||R<A||(void 0!==x[R]||J!==Ya&&J!==Qa||(x[R]=-1,x.count++),void 0!==S[F]||J!==Ya&&J!==tr||(S[F]=-1,S.count++),k.push(q)),q.measure(1/0,1/0,0,0),!(F<N||R<A)){var it=q.measuredBounds,nt=Math.max(it.width+K,0),ot=Math.max(it.height+Z,0);if(1===q.rowSpan&&(J===Ka||J===Qa)){var at=(O=t.getRowDefinition(F)).uc();(V=Math.max(ot-O.actual,0))+at>C&&(V=Math.max(C-at,0));var rt=0===O.actual;O.actual=O.actual+V,C=Math.max(C-(V+(rt?at:0)),0)}if(1===q.columnSpan&&(J===Ka||J===tr)){var st=(O=t.getColumnDefinition(R)).uc();(V=Math.max(nt-O.actual,0))+st>T&&(V=Math.max(T-st,0));var ct=0===O.actual;O.actual=O.actual+V,T=Math.max(T-(V+(ct?st:0)),0)}X&&q.nm()}}}}}M(w);var lt=0,ut=0;s=t.columnCount;for(var dt=0;dt<s;dt++){var ht=t.mb[dt];void 0!==ht&&(lt+=ht.ha,0!==ht.ha&&(lt+=ht.uc()))}s=t.rowCount;for(var pt=0;pt<s;pt++){var ft=t.rb[pt];void 0!==ft&&(ut+=ft.ha,0!==ft.ha&&(ut+=ft.uc()))}T=Math.max(e-lt,0);var gt=C=Math.max(i-ut,0),mt=T;s=k.length;for(var vt=0;vt<s;vt++){var bt=k[vt],_t=t.getRowDefinition(bt.row),wt=t.getColumnDefinition(bt.column),yt=bt.measuredBounds,kt=bt.margin,xt=kt.top+kt.bottom;x[bt.column]=0===wt.actual&&void 0!==x[bt.column]?Math.max(yt.width+(kt.right+kt.left),x[bt.column]):null,S[bt.row]=0===_t.actual&&void 0!==S[bt.row]?Math.max(yt.height+xt,S[bt.row]):null}var St,Tt=0,Ct=0;for(St in S)"count"!==St&&(Tt+=S[St]);for(St in x)"count"!==St&&(Ct+=x[St]);for(var Dt=Lt.alloc(),It=0;It<s;It++){var Pt=k[It];if(Pt.visible||Pt===z){var Mt=t.getRowDefinition(Pt.row),Ot=t.getColumnDefinition(Pt.column),$t=0;isFinite(Ot.width)?$t=Ot.width:($t=isFinite(T)&&null!==x[Pt.column]?0===Ct?Ot.actual+T:x[Pt.column]/Ct*mt:null!==x[Pt.column]?T:Ot.actual||T,$t=Math.max(0,$t-Ot.uc()));var jt=0;switch(isFinite(Mt.height)?jt=Mt.height:(jt=isFinite(C)&&null!==S[Pt.row]?0===Tt?Mt.actual+C:S[Pt.row]/Tt*gt:null!==S[Pt.row]?C:Mt.actual||C,jt=Math.max(0,jt-Mt.uc())),Dt.h(Math.max(Ot.minimum,Math.min($t,Ot.maximum)),Math.max(Mt.minimum,Math.min(jt,Mt.maximum))),J=as(Pt,Mt,Ot,!1)){case Qa:Dt.height=Math.max(Dt.height,Mt.actual+C);break;case tr:Dt.width=Math.max(Dt.width,Ot.actual+T)}var Et=Pt.margin,Nt=Et.right+Et.left,At=Et.top+Et.bottom;Pt.nm(),Pt.measure(Dt.width,Dt.height,Ot.minimum,Mt.minimum);var Vt=Pt.measuredBounds,zt=Math.max(Vt.width+Nt,0),Ft=Math.max(Vt.height+At,0);isFinite(T)&&(zt=Math.min(zt,Dt.width)),isFinite(C)&&(Ft=Math.min(Ft,Dt.height));var Bt=0;Bt=Mt.actual,Mt.actual=Math.max(Mt.actual,Ft),V=Mt.actual-Bt,C=Math.max(C-V,0),Bt=Ot.actual,Ot.actual=Math.max(Ot.actual,zt),V=Ot.actual-Bt,T=Math.max(T-V,0)}}M(k);var Rt=Lt.alloc(),Ut=P(),Gt=P();if(0!==(s=y.length))for(var Ht=0;Ht<j;Ht++)if(v[Ht]){L=v[Ht].length;var Wt=t.getRowDefinition(Ht);Ut[Ht]=Wt.actual;for(var qt=0;qt<L;qt++)if(v[Ht][qt]){var Xt=t.getColumnDefinition(qt);Gt[qt]=Xt.actual}}for(var Yt=0;Yt<s;Yt++){var Kt=y[Yt];if(Kt.visible||Kt===z){var Zt=t.getRowDefinition(Kt.row),Jt=t.getColumnDefinition(Kt.column);switch(Dt.h(Math.max(Jt.minimum,Math.min(e,Jt.maximum)),Math.max(Zt.minimum,Math.min(i,Zt.maximum))),J=as(Kt,Zt,Jt,!1)){case Ya:0!==Gt[Jt.index]&&(Dt.width=Math.min(Dt.width,Gt[Jt.index])),0!==Ut[Zt.index]&&(Dt.height=Math.min(Dt.height,Ut[Zt.index]));break;case Qa:0!==Gt[Jt.index]&&(Dt.width=Math.min(Dt.width,Gt[Jt.index]));break;case tr:0!==Ut[Zt.index]&&(Dt.height=Math.min(Dt.height,Ut[Zt.index]))}isFinite(Jt.width)&&(Dt.width=Jt.width),isFinite(Zt.height)&&(Dt.height=Zt.height),Rt.h(0,0);for(var Qt=1;Qt<Kt.rowSpan&&!(Kt.row+Qt>=t.rowCount);Qt++)O=t.getRowDefinition(Kt.row+Qt),V=0,V=J===Ya||J===tr?Math.max(O.minimum,0===Ut[Kt.row+Qt]?O.maximum:Math.min(Ut[Kt.row+Qt],O.maximum)):Math.max(O.minimum,isNaN(O.Pc)?O.maximum:Math.min(O.Pc,O.maximum)),Rt.height+=V;for(var te=1;te<Kt.columnSpan&&!(Kt.column+te>=t.columnCount);te++)O=t.getColumnDefinition(Kt.column+te),V=0,V=J===Ya||J===Qa?Math.max(O.minimum,0===Gt[Kt.column+te]?O.maximum:Math.min(Gt[Kt.column+te],O.maximum)):Math.max(O.minimum,isNaN(O.Pc)?O.maximum:Math.min(O.Pc,O.maximum)),Rt.width+=V;Dt.width+=Rt.width,Dt.height+=Rt.height;var ee=Kt.margin,ie=ee.right+ee.left,ne=ee.top+ee.bottom;Kt.measure(Dt.width,Dt.height,a,r);for(var oe=Kt.measuredBounds,ae=Math.max(oe.width+ie,0),re=Math.max(oe.height+ne,0),se=0,ce=0;ce<Kt.rowSpan&&!(Kt.row+ce>=t.rowCount);ce++)se+=(O=t.getRowDefinition(Kt.row+ce)).total||0;if(se<re){var le=re-se,ue=re-se;if(null!==Kt.spanAllocation)for(var de=Kt.spanAllocation,he=0;he<Kt.rowSpan&&!(0>=le)&&!(Kt.row+he>=t.rowCount);he++){var pe=(O=t.getRowDefinition(Kt.row+he)).ha||0,fe=de(Kt,O,ue);O.actual=Math.min(O.maximum,pe+fe),O.ha!==pe&&(le-=O.ha-pe)}for(;0<le;){var ge=O.ha||0;if(isNaN(O.height)&&O.maximum>ge&&(O.actual=Math.min(O.maximum,ge+le),O.ha!==ge&&(le-=O.ha-ge)),0===O.index)break;O=t.getRowDefinition(O.index-1)}}for(var me=0,ve=0;ve<Kt.columnSpan&&!(Kt.column+ve>=t.columnCount);ve++)me+=(O=t.getColumnDefinition(Kt.column+ve)).total||0;if(me<ae){var be=ae-me,_e=ae-me;if(null!==Kt.spanAllocation)for(var we=Kt.spanAllocation,ye=0;ye<Kt.columnSpan&&!(0>=be)&&!(Kt.column+ye>=t.columnCount);ye++){var ke=(O=t.getColumnDefinition(Kt.column+ye)).ha||0,xe=we(Kt,O,_e);O.actual=Math.min(O.maximum,ke+xe),O.ha!==ke&&(be-=O.ha-ke)}for(;0<be;){var Se=O.ha||0;if(isNaN(O.width)&&O.maximum>Se&&(O.actual=Math.min(O.maximum,Se+be),O.ha!==Se&&(be-=O.ha-Se)),0===O.index)break;O=t.getColumnDefinition(O.index-1)}}}}M(y),Lt.free(Rt),Lt.free(Dt),void 0!==Ut&&M(Ut),void 0!==Gt&&M(Gt);var Te=0,Ce=0,De=t.desiredSize,Ie=t.maxSize;J=os(t,!0);var Pe=ut=lt=0,Me=0;s=t.columnCount;for(var Oe=0;Oe<s;Oe++)void 0!==t.mb[Oe]&&(O=t.getColumnDefinition(Oe),isFinite(O.width)?(Pe+=O.width,Pe+=O.uc()):el(O)===nl?(Pe+=O.ha,Pe+=O.uc()):0!==O.ha&&(lt+=O.ha,lt+=O.uc()));Te=isFinite(De.width)?Math.min(De.width,Ie.width):J!==Ka&&isFinite(e)?e:lt,Te=Math.max(Te,t.minSize.width),Te=Math.max(Te-Pe,0);for(var $e=0===lt?1:Math.max(Te/lt,1),je=0;je<s;je++)void 0!==t.mb[je]&&(O=t.getColumnDefinition(je),isFinite(O.width)||el(O)===nl||(O.actual=O.ha*$e),O.position=o.width,0!==O.ha&&(o.width+=O.ha,o.width+=O.uc()));s=t.rowCount;for(var Le=0;Le<s;Le++)void 0!==t.rb[Le]&&(O=t.getRowDefinition(Le),isFinite(O.height)?(Me+=O.height,Me+=O.uc()):el(O)===nl?(Me+=O.ha,Me+=O.uc()):0!==O.ha&&(ut+=O.ha,0!==O.ha&&(ut+=O.uc())));Ce=isFinite(De.height)?Math.min(De.height,Ie.height):J!==Ka&&isFinite(i)?i:ut,Ce=Math.max(Ce,t.minSize.height),Ce=Math.max(Ce-Me,0);for(var Ee=0===ut?1:Math.max(Ce/ut,1),Ne=0;Ne<s;Ne++)void 0!==t.rb[Ne]&&(O=t.getRowDefinition(Ne),isFinite(O.height)||el(O)===nl||(O.actual=O.ha*Ee),O.position=o.height,0!==O.ha&&(o.height+=O.ha,0!==O.ha&&(o.height+=O.uc())));s=l.length;for(var Ae=0;Ae<s;Ae++){var Ve=l[Ae],ze=0,Fe=0;Ve.type===Ic.TableRow?(ze=o.width,Fe=(O=t.getRowDefinition(Ve.row)).actual):(ze=(O=t.getColumnDefinition(Ve.column)).actual,Fe=o.height),Ve.measuredBounds.h(0,0,ze,Fe),ps(Ve,!1),v[Ve.row]||(v[Ve.row]=[]),v[Ve.row][Ve.column]||(v[Ve.row][Ve.column]=[]),v[Ve.row][Ve.column].push(Ve)}M(l),t.sp=v},_c.prototype.arrange=function(t,e,i){var n=e.length,o=t.padding,a=o.left;o=o.top;for(var r,s,c=t.sp,l=c.length,u=0,d=0;d<l;d++)c[d]&&(u=Math.max(u,c[d].length));for(d=Math.min(t.topIndex,l-1);d!==l&&(void 0===t.rb[d]||0===t.rb[d].ha);)d++;for(d=Math.min(d,l-1),d=-t.rb[d].position,r=Math.min(t.leftIndex,u-1);r!==u&&(void 0===t.mb[r]||0===t.mb[r].ha);)r++;r=Math.min(r,u-1);for(var h=-t.mb[r].position,p=Lt.alloc(),f=0;f<l;f++)if(c[f]){u=c[f].length;var g=t.getRowDefinition(f);s=g.position+d+o,0!==g.ha&&(s+=g.mv());for(var m=0;m<u;m++)if(c[f][m]){var v=t.getColumnDefinition(m);r=v.position+h+a,0!==v.ha&&(r+=v.mv());for(var b=c[f][m],_=b.length,w=0;w<_;w++){var y=b[w],k=y.measuredBounds,x=y instanceof Ic?y:null;if(null===x||x.type!==Ic.TableRow&&x.type!==Ic.TableColumn){p.h(0,0);for(var S=1;S<y.rowSpan&&!(f+S>=t.rowCount);S++)x=t.getRowDefinition(f+S),p.height+=x.total;for(S=1;S<y.columnSpan&&!(m+S>=t.columnCount);S++)x=t.getColumnDefinition(m+S),p.width+=x.total;var T=v.ha+p.width,C=g.ha+p.height;S=r,x=s;var D=T,I=C,P=r,M=s,O=T,$=C;r+T>i.width&&(O=Math.max(i.width-r,0)),s+C>i.height&&($=Math.max(i.height-s,0));var j=y.alignment;if(j.Mb()){(j=t.defaultAlignment).fb()||(j=ce);var L=j.x,E=j.y,N=j.offsetX;j=j.offsetY;var A=v.alignment,V=g.alignment;A.fb()&&(L=A.x,N=A.offsetX),V.fb()&&(E=V.y,j=V.offsetY)}else L=j.x,E=j.y,N=j.offsetX,j=j.offsetY;(isNaN(L)||isNaN(E))&&(E=L=.5,j=N=0),A=k.width,V=k.height;var z=y.margin,F=z.left+z.right,B=z.top+z.bottom,R=as(y,g,v,!1);!isNaN(y.desiredSize.width)||R!==Ya&&R!==Qa||(A=Math.max(T-F,0)),!isNaN(y.desiredSize.height)||R!==Ya&&R!==tr||(V=Math.max(C-B,0)),T=y.maxSize,C=y.minSize,A=Math.min(T.width,A),V=Math.min(T.height,V),A=Math.max(C.width,A),V=Math.max(C.height,V),S+=D*L-(A+F)*L+N+z.left,x+=I*E-(T=V+B)*E+j+z.top,y.visible&&(qt(P,M,O,$,S,x,k.width,k.height)?y.arrange(S,x,A,V):y.arrange(S,x,A,V,new Vt(P,M,O,$)))}else y.ll(),y.actualBounds.ea(),S=Vt.allocAt((D=y.actualBounds).x,D.y,D.width,D.height),D.x=x.type===Ic.TableRow?a:r,D.y=x.type===Ic.TableColumn?o:s,D.width=k.width,D.height=k.height,y.actualBounds.freeze(),gs(y,!1),Rt(S,D)||null!==(k=y.part)&&(k.Gh(),y.Uo(k)),Vt.free(S)}}}for(Lt.free(p),t=0;t<n;t++)null===(a=(i=e[t])instanceof Ic?i:null)||a.type!==Ic.TableRow&&a.type!==Ic.TableColumn||(a=i.actualBounds,i.naturalBounds.ea(),i.naturalBounds.h(0,0,a.width,a.height),i.naturalBounds.freeze())},d(wc,pc),wc.prototype.measure=function(){},wc.prototype.arrange=function(){},d(yc,pc),yc.prototype.measure=function(){},yc.prototype.arrange=function(){},d(kc,pc),kc.prototype.measure=function(t,e,i,n,o,a,r){1<n.length&&_("Viewbox Panel cannot contain more than one GraphObject."),(n=n[0]).ya=1,n.nm(),n.measure(1/0,1/0,a,r);var s=n.measuredBounds,c=n.margin,l=c.right+c.left;if(c=c.top+c.bottom,isFinite(e)||isFinite(i)){var u=n.scale,d=s.width;s=s.height;var h=Math.max(e-l,0),p=Math.max(i-c,0),f=1;t.viewboxStretch===Za?0!==d&&0!==s&&(f=Math.min(h/d,p/s)):0!==d&&0!==s&&(f=Math.max(h/d,p/s)),0===f&&(f=1e-4),n.ya*=f,u!==n.scale&&(ps(n,!0),n.measure(1/0,1/0,a,r))}s=n.measuredBounds,o.width=isFinite(e)?e:Math.max(s.width+l,0),o.height=isFinite(i)?i:Math.max(s.height+c,0)},kc.prototype.arrange=function(t,e,i){var n=(e=e[0]).measuredBounds,o=e.margin,a=Math.max(n.width+(o.right+o.left),0);o=Math.max(n.height+(o.top+o.bottom),0);var r=e.alignment;r.Mb()&&(r=t.defaultAlignment),r.fb()||(r=ce),e.arrange(i.width*r.x-a*r.x+r.offsetX,i.height*r.y-o*r.y+r.offsetY,n.width,n.height)},d(xc,pc),xc.prototype.measure=function(){},xc.prototype.arrange=function(){},xc.prototype.bc=function(t,e,i){0>=(i=t.uf()*i.scale)&&(i=1);var n=t.gridCellSize,o=n.width;n=n.height;var a=t.naturalBounds,r=t.actualBounds,s=a.width,c=a.height,l=Math.ceil(s/o),u=Math.ceil(c/n),d=t.gridOrigin;e.save(),e.beginPath(),e.rect(0,0,s,c),e.clip();for(var h=[],p=t.V.j,f=p.length,g=0;g<f;g++){var m=p[g],v=[];if(h.push(v),m.visible){var b=m.interval;if(!(0>b)){m=$c(m.figure);for(var _=0;_<f;_++)if(_!==g){var w=p[_];w.visible&&$c(w.figure)===m&&(w=w.interval)>b&&v.push(w)}}}}for(f=(p=t.V.j).length,g=0;g<f;g++){var y=p[g];if(y.visible&&(v=y.interval,!(2>o*Math.abs(v)*i))){if(m=1,1!==(b=y.opacity)){if(0===b)continue;e.globalAlpha=(m=e.globalAlpha)*b}_=h[g],w=!1;var k=y.strokeDashArray;if(null!==k&&(w=!0,e.jt(k,y.strokeDashOffset)),"LineV"===y.figure&&null!==y.stroke&&0<y.strokeWidth){for(e.lineWidth=y.strokeWidth,ts(t,e,y.stroke,!1,!1,a,r),e.beginPath(),k=y=Math.floor(-d.x/o);k<=y+l;k++){var x=k*o+d.x;0<=x&&x<=s&&Sc(k,v,_)&&(e.moveTo(x,0),e.lineTo(x,c))}e.stroke()}else if("LineH"===y.figure&&null!==y.stroke&&0<y.strokeWidth){for(e.lineWidth=y.strokeWidth,ts(t,e,y.stroke,!1,!1,a,r),e.beginPath(),k=y=Math.floor(-d.y/n);k<=y+u;k++)0<=(x=k*n+d.y)&&x<=c&&Sc(k,v,_)&&(e.moveTo(0,x),e.lineTo(s,x));e.stroke()}else if("BarV"===y.figure&&null!==y.fill)for(ts(t,e,y.fill,!0,!1,a,r),y=y.width,isNaN(y)&&(y=o),x=k=Math.floor(-d.x/o);x<=k+l;x++){var S=x*o+d.x;0<=S&&S<=s&&Sc(x,v,_)&&e.fillRect(S,0,y,c)}else if("BarH"===y.figure&&null!==y.fill)for(ts(t,e,y.fill,!0,!1,a,r),y=y.height,isNaN(y)&&(y=n),x=k=Math.floor(-d.y/n);x<=k+u;x++)0<=(S=x*n+d.y)&&S<=c&&Sc(x,v,_)&&e.fillRect(0,S,s,y);w&&e.ht(),1!==b&&(e.globalAlpha=m)}}e.restore(),e.sc(!1)},d(Tc,pc),Tc.prototype.measure=function(t,e,i,n,o){if(i=n.length,t instanceof Mu||t instanceof id){var a=null,r=null,s=null;if(t instanceof id&&(r=a=t),t instanceof Mu&&(a=(s=t).adornedPart),a instanceof id){var c=a;if(0===i)zt(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var l=t instanceof Mu?null:a.path,u=a.routeBounds;(e=t.sg).h(0,0,u.width,u.height);var d=c.points;a=a.pointsCount,null!==s?s.nk(!1):null!==r&&r.nk(!1);var h=u.width,p=u.height;t.location.h(u.x,u.y),t.l.length=0,null!==l&&(Cc(t,h,p,l),e.Hc(s=l.measuredBounds),t.l.push(s)),s=He.alloc();for(var f=pt.alloc(),g=pt.alloc(),m=0;m<i;m++){var v=n[m];if(v!==l)if(v.isPanelMain&&v instanceof al){Cc(t,h,p,v);var b=v.measuredBounds;e.Hc(b),t.l.push(b)}else if(2>a)v.measure(1/0,1/0,0,0),e.Hc(b=v.measuredBounds),t.l.push(b);else{var _=v.segmentIndex,w=v.segmentFraction,y=v.alignmentFocus;y.jc()&&(y=ce);var k=v.segmentOrientation,x=v.segmentOffset;if(isNaN(_)){var S=c.ka;b=P(),S.Dv(w,b);var T=pt.allocAt(b[0],b[1]);if(T.add(c.i(0)),S.type===ai||(S=S.figures.first()),T.offset(-S.startX,-S.startY),S=b[2],k!==Cd){var C=c.computeAngle(v,k,S);v.Yb=C}C=T.x-u.x;var D=T.y-u.y;pt.free(T),M(b)}else if(_<-a||_>=a)D=c.midPoint,S=c.midAngle,k!==Cd&&(C=c.computeAngle(v,k,S),v.Yb=C),C=D.x-u.x,D=D.y-u.y;else{if(C=0,0<=_?(D=d.L(_),b=_<a-1?d.L(_+1):D):(D=d.L(C=a+_),b=0<C?d.L(C-1):D),D.Ma(b)){0<=_?(S=0<_?d.L(_-1):D,C=_<a-2?d.L(_+2):b):(S=C<a-1?d.L(C+1):D,C=1<C?d.L(C-2):b),T=S.Ce(D);var I=b.Ce(C);S=T>I+10?0<=_?S.Sa(D):D.Sa(S):I>T+10?0<=_?b.Sa(C):C.Sa(b):0<=_?S.Sa(C):C.Sa(S)}else S=0<=_?D.Sa(b):b.Sa(D);k!==Cd&&(C=c.computeAngle(v,k,S),v.Yb=C),C=D.x+(b.x-D.x)*w-u.x,D=D.y+(b.y-D.y)*w-u.y}v.measure(1/0,1/0,0,0),b=v.measuredBounds;var O=0;v instanceof al&&(O=v.strokeWidth),I=(T=v.naturalBounds).width+O;var $=T.height+O;s.reset(),s.translate(-b.x,-b.y),s.scale(v.scale,v.scale),s.rotate(k===Cd?v.angle:S,I/2,$/2),k!==Ld&&k!==Vd||s.rotate(90,I/2,$/2),k!==Ed&&k!==zd||s.rotate(-90,I/2,$/2),k===Fd&&(45<S&&135>S||225<S&&315>S)&&s.rotate(-S,I/2,$/2),T=new Vt(0,0,I,$),f.dj(T,y),s.ra(f),y=O/2*v.scale-f.x,v=O/2*v.scale-f.y,g.assign(x),O=isNaN(x.x);var j=isNaN(x.y);if(O||j){I=I/2+3,$=$/2+3;var L=45<=S&&135>=S,E=225<=S&&315>=S;k===Cd&&(L||E)?(g.x=j?I:x.y,g.y=O?$:x.x,L?0<=_||isNaN(_)&&.5>w||!O||(g.y=-$):E&&((0<=_||isNaN(_)&&.5>w)&&O&&(g.y=-$),j&&(g.x=-I))):(O&&(g.x=0<=_||isNaN(_)&&.5>w?I:-I),j&&(g.y=-$),g.rotate(S))}else g.rotate(S);C+=g.x,D+=g.y,T.set(b),T.h(C+y,D+v,b.width,b.height),t.l.push(T),e.Hc(T)}}if(null!==r)for(n=r.labelNodes;n.next();)n.value.measure(1/0,1/0);t.sg=e,(t=t.location).h(t.x+e.x,t.y+e.y),zt(o,e.width||0,e.height||0),He.free(s),pt.free(f),pt.free(g)}}}},Tc.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Mu||t instanceof id){var n=null,o=null,a=null;t instanceof id&&(o=n=t),t instanceof Mu&&(n=(a=t).adornedPart);var r=t instanceof Mu?null:n.path;if(0!==t.l.length){var s=t.l,c=0;if(null!==r&&c<t.l.length){var l=s[c];c++,r.arrange(l.x-t.sg.x,l.y-t.sg.y,l.width,l.height)}for(l=0;l<i;l++){var u=e[l];if(u!==r&&c<t.l.length){var d=s[c];c++,u.arrange(d.x-t.sg.x,d.y-t.sg.y,d.width,d.height)}}}if(2<=(i=(e=n.points).count)&&t instanceof id)for(n=t.labelNodes;n.next();){var h=t;s=(r=n.value).segmentIndex,c=r.segmentFraction;var p=r.alignmentFocus;if(l=r.segmentOrientation,u=r.segmentOffset,isNaN(s)){d=h.ka;var f=P();d.Dv(c,f);var g=pt.allocAt(f[0],f[1]);g.add(h.i(0)),d.type===ai||(d=d.figures.first()),g.offset(-d.startX,-d.startY),d=f[2],l!==Cd&&(h=h.computeAngle(r,l,d),r.angle=h),h=g.x;var m=g.y;pt.free(g),M(f)}else if(s<-i||s>=i)m=h.midPoint,d=h.midAngle,l!==Cd&&(h=h.computeAngle(r,l,d),r.angle=h),h=m.x,m=m.y;else{if(g=0,0<=s?(f=e.j[s],m=s<i-1?e.j[s+1]:f):(f=e.j[g=i+s],m=0<g?e.j[g-1]:f),f.Ma(m)){0<=s?(d=0<s?e.j[s-1]:f,g=s<i-2?e.j[s+2]:m):(d=g<i-1?e.j[g+1]:f,g=1<g?e.j[g-2]:m);var v=d.Ce(f),b=m.Ce(g);d=v>b+10?0<=s?d.Sa(f):f.Sa(d):b>v+10?0<=s?m.Sa(g):g.Sa(m):0<=s?d.Sa(g):g.Sa(d)}else d=0<=s?f.Sa(m):m.Sa(f);l!==Cd&&(h=h.computeAngle(r,l,d),r.angle=h),h=f.x+(m.x-f.x)*c,m=f.y+(m.y-f.y)*c}if(p.yt())r.location=new pt(h,m);else{p.jc()&&(p=ce),(f=He.alloc()).reset(),f.scale(r.scale,r.scale),f.rotate(r.angle,0,0);var _=r.naturalBounds;g=Vt.allocAt(0,0,_.width,_.height),(v=pt.alloc()).dj(g,p),f.ra(v),p=-v.x,b=-v.y;var w=_.width,y=_.height;(_=pt.alloc()).assign(u);var k=isNaN(u.x),x=isNaN(u.y);if(k||x){w=w/2+3,y=y/2+3;var S=45<=d&&135>=d,T=225<=d&&315>=d;l===Cd&&(S||T)?(_.x=x?w:u.y,_.y=k?y:u.x,S?0<=s||isNaN(s)&&.5>c||!k||(_.y=-y):T&&((0<=s||isNaN(s)&&.5>c)&&k&&(_.y=-y),x&&(_.x=-w))):(k&&(_.x=0<=s||isNaN(s)&&.5>c?w:-w),x&&(_.y=-y),_.rotate(d))}else _.rotate(d);h+=_.x,m+=_.y,f.tw(g),s=pt.allocAt(h+(p+=g.x),m+(b+=g.y)),r.move(s),pt.free(s),pt.free(_),pt.free(v),Vt.free(g),He.free(f)}}null!==a?a.nk(!1):null!==o&&o.nk(!1)}},d(Dc,pc),Dc.prototype.measure=function(t,e,i,n,o,a,r){var s=t.Ab();t.Wg=[];var c=s.margin,l=c.right+c.left,u=c.top+c.bottom;s.measure(e,i,a,r);var d=s.measuredBounds,h=new Vt(-c.left,-c.top,Math.max(d.width+l,0),Math.max(d.height+u,0));t.Wg.push(h),o.assign(h);for(var p=s.geometry,f=s.strokeWidth,g=p.flattenedSegments,m=p.flattenedLengths,v=p.flattenedTotalLength,b=g.length,_=0,w=0,y=P(),k=0;k<b;k++){var x=g[k],S=[];w=_=0;for(var T=x.length,C=0;C<T;C+=2){var D=x[C],I=x[C+1];if(0!==C){var O=180*Math.atan2(I-w,D-_)/Math.PI;0>O&&(O+=360),S.push(O)}_=D,w=I}y.push(S)}if(null===t.Xg){for(var $=[],j=t.V.j,L=j.length,E=0;E<L;E++){var N=j[E],A=[];if($.push(A),N.visible){var V=N.interval;if(!(0>V))for(var z=0;z<L;z++)if(z!==E){var F=j[z];if(F.visible&&N.constructor===F.constructor){var B=F.interval;B>V&&A.push(B)}}}}t.Xg=$}var R=t.Xg,U=t.V.j,G=U.length,H=0,W=0,q=v;t.uj=[];for(var X,Y=0;Y<G;Y++){var K=U[Y];if(X=[],K.visible&&K!==s){var Z=Math.abs(K.interval),J=t.graduatedTickUnit;if(!(2>J*Z*v/t.graduatedRange)){var Q=m[0][0],tt=0,et=0;W=v*K.graduatedStart-1e-4,q=v*K.graduatedEnd+1e-4;var it=J*Z,nt=t.graduatedTickBase;if(nt<t.graduatedMin){var ot=(t.graduatedMin-nt)/it;nt+=(ot=0==ot%1?ot:Math.floor(ot+1))*it}else nt>t.graduatedMin+it&&(nt-=Math.floor((nt-t.graduatedMin)/it)*it);for(var at=R[Y];nt<=t.graduatedMax;){t:{for(var rt=at.length,st=0;st<rt;st++)if(qe.$((nt-t.graduatedTickBase)%(at[st]*t.graduatedTickUnit),0)){var ct=!1;break t}ct=!0}if(ct&&(null===K.graduatedSkip||!K.graduatedSkip(nt))&&((H=(nt-t.graduatedMin)*v/t.graduatedRange)>v&&(H=v),W<=H&&H<=q)){for(var lt=y[tt][et],ut=m[tt][et];tt<m.length;){for(;H>Q&&et<m[tt].length-1;)et++,lt=y[tt][et],Q+=ut=m[tt][et];if(H<=Q)break;lt=y[++tt][et=0],Q+=ut=m[tt][et]}var dt=g[tt],ht=dt[2*et],ft=dt[2*et+1],gt=(H-(Q-ut))/ut,mt=new pt(ht+(dt[2*et+2]-ht)*gt+f/2-p.bounds.x,ft+(dt[2*et+3]-ft)*gt+f/2-p.bounds.y);mt.scale(s.scale,s.scale);var vt=lt,bt=y[tt];if(1e-4>gt?0<et?vt=bt[et-1]:qe.$(dt[0],dt[dt.length-2])&&qe.$(dt[1],dt[dt.length-1])&&(vt=bt[bt.length-1]):.9999<gt&&(et+1<bt.length?vt=bt[et+1]:qe.$(dt[0],dt[dt.length-2])&&qe.$(dt[1],dt[dt.length-1])&&(vt=bt[0])),lt!==vt&&(180<Math.abs(lt-vt)&&(lt<vt?lt+=360:vt+=360),lt=(lt+vt)/2%360),K instanceof gl){var _t="";""!==(_t=null!==K.graduatedFunction?null!=(_t=K.graduatedFunction(nt))?_t.toString():"":(+nt.toFixed(2)).toString())&&X.push({wm:mt,angle:lt,text:_t})}else X.push({wm:mt,angle:lt})}nt+=it}}}t.uj.push(X)}M(y);var wt=t.uj;if(null!==wt)for(var yt=n.length,kt=0;kt<yt;kt++){var xt=n[kt],St=wt[kt];if(xt.visible&&xt!==s&&0!==St.length){if(xt instanceof al){var Tt=t,Ct=o,Dt=xt.alignmentFocus;Dt.jc()&&(Dt=ae);var It=xt.angle;xt.Yb=0,xt.measure(1/0,1/0,0,0),xt.Yb=It;var Pt=xt.measuredBounds,Mt=Pt.width,Ot=Pt.height,$t=Vt.allocAt(0,0,Mt,Ot),jt=pt.alloc();jt.dj($t,Dt),Vt.free($t);for(var Lt=-jt.x,Et=-jt.y,Nt=new Vt,At=St.length,zt=0;zt<At;zt++)for(var Ft=St[zt],Bt=Ft.wm.x,Rt=Ft.wm.y,Ut=Ft.angle,Gt=0;4>Gt;Gt++){switch(Gt){case 0:jt.h(Lt,Et);break;case 1:jt.h(Lt+Mt,Et);break;case 2:jt.h(Lt,Et+Ot);break;case 3:jt.h(Lt+Mt,Et+Ot)}jt.rotate(Ut+xt.angle),jt.offset(Bt,Rt),0===zt&&0===Gt?Nt.h(jt.x,jt.y,0,0):Nt.Ie(jt),jt.offset(-Bt,-Rt),jt.rotate(-Ut-xt.angle)}pt.free(jt),null!==Tt.Wg&&Tt.Wg.push(Nt),Wt(Ct,Nt.x,Nt.y,Nt.width,Nt.height)}else if(xt instanceof gl){var Ht=t,qt=o;null===Ht.sh&&(Ht.sh=new gl);var Xt=Ht.sh;ml(Xt,xt);var Yt=xt.alignmentFocus;Yt.jc()&&(Yt=ae);for(var Kt=xt.segmentOrientation,Zt=xt.segmentOffset,Jt=new Vt,Qt=0,te=0,ee=0,ie=0,ne=0,oe=St.length,re=0;re<oe;re++){var se=St[re];Qt=se.wm.x,te=se.wm.y,ee=se.angle,ne=ie=xt.angle,Kt!==Cd&&(ie=id.computeAngle(Kt,ne=Kt===jd||Kt===Ad?ee+xt.angle:ee)),Xt.Yb=ie,Xt.text=se.text||"",Xt.measure(1/0,1/0,0,0);var ce=Xt.measuredBounds,le=Xt.naturalBounds,ue=le.width,de=le.height,he=He.alloc();he.reset(),he.translate(-ce.x,-ce.y),he.scale(Xt.scale,Xt.scale),he.rotate(ne,ue/2,de/2),Kt!==Ld&&Kt!==Vd||he.rotate(90,ue/2,de/2),Kt!==Ed&&Kt!==zd||he.rotate(-90,ue/2,de/2),Kt===Fd&&(45<ee&&135>ee||225<ee&&315>ee)&&he.rotate(-ee,ue/2,de/2);var pe=Vt.allocAt(0,0,ue,de),fe=pt.alloc();fe.dj(pe,Yt),he.ra(fe);var ge=-fe.x,me=-fe.y,ve=pt.alloc();ve.assign(Zt),isNaN(ve.x)&&(ve.x=ue/2+3),isNaN(ve.y)&&(ve.y=-(de/2+3)),ve.rotate(ee);var be=new Vt(Qt+=ve.x+ge,te+=ve.y+me,ce.width,ce.height),_e=new Vt(ce.x,ce.y,ce.width,ce.height),we=new Vt(le.x,le.y,le.width,le.height);se.aA=ie,se.lineCount=Xt.lineCount,se.lines=[Xt.pb,Xt.ti,Xt.ie,Xt.ve,Xt.Qb,Xt.gb,Xt.ge],se.actualBounds=be,se.measuredBounds=_e,se.naturalBounds=we,0===re?Jt.assign(be):Jt.Hc(be),pt.free(ve),pt.free(fe),Vt.free(pe),He.free(he)}null!==Ht.Wg&&Ht.Wg.push(Jt),Wt(qt,Jt.x,Jt.y,Jt.width,Jt.height)}ps(xt,!1)}}},Dc.prototype.arrange=function(t,e,i){if(null!==t.Wg){var n=t.Ab(),o=t.uj;if(null!==o){var a=t.Wg,r=0,s=a[r];r++,null!==n&&n.arrange(s.x-i.x,s.y-i.y,s.width,s.height);for(var c=e.length,l=0;l<c;l++){var u=e[l];s=o[l],u.visible&&u!==n&&0!==s.length&&(s=a[r],r++,u.arrange(s.x-i.x,s.y-i.y,s.width,s.height))}t.Wg=null}}},Dc.prototype.bc=function(t,e,i){var n=i.ni;i.ni=!0;var o=t.naturalBounds,a=o.width;o=o.height,e.save(),e.beginPath(),e.rect(-1,-1,a+1,o+1),e.clip(),(a=t.Ab()).bc(e,i),0>=(o=t.uf()*i.scale)&&(o=1);for(var r=a.actualBounds,s=t.V.j,c=t.uj,l=s.length,u=0;u<l;u++){var d=s[u],h=c[u],p=h.length;if(d.visible&&d!==a&&0!==h.length)if(d instanceof al){if(!(2>t.graduatedTickUnit*d.interval*a.geometry.flattenedTotalLength/t.graduatedRange*o)){var f=d.measuredBounds,g=d.strokeWidth*d.scale,m=d.alignmentFocus;m.jc()&&(m=ae);for(var v=0;v<p;v++){var b=h[v].wm,_=h[v].angle,w=m,y=d.lb;y.reset(),y.translate(b.x+r.x,b.y+r.y),y.rotate(_+d.angle,0,0),y.translate(-f.width*w.x+w.offsetX+g/2,-f.height*w.y+w.offsetY+g/2),y.scale(d.scale,d.scale),us(d,!1),d.Qh.set(d.lb),d.Wk=d.scale,ds(d,!1),d.bc(e,i),d.lb.reset()}}}else if(d instanceof gl)for(null===t.sh&&(t.sh=new gl),ml(f=t.sh,d),d=0;d<p;d++)(g=h[d]).actualBounds&&g.measuredBounds&&g.naturalBounds&&(f.Tb=g.text||"",f.Yb=g.aA||0,f.Nc=g.lineCount||0,void 0!==(m=g.lines)&&(f.pb=m[0],f.ti=m[1],f.ie=m[2],f.ve=m[3],f.Qb=m[4],f.gb=m[5],f.ge=m[6]),g.naturalBounds&&(f.oc=g.naturalBounds),g.actualBounds&&f.arrange((m=g.actualBounds).x,m.y,m.width,m.height),f.arrange((m=g.actualBounds).x,m.y,m.width,m.height),v=g.measuredBounds,g=g.naturalBounds,(b=f.lb).reset(),b.translate(m.x+r.x,m.y+r.y),b.translate(-v.x,-v.y),is(f,b,g.x,g.y,g.width,g.height),us(f,!1),f.Qh.set(f.lb),f.Wk=f.scale,ds(f,!1),f.bc(e,i))}i.ni=n,e.restore(),e.sc(!0)},d(Ic,qr),Ic.prototype.cloneProtected=function(t){if(qr.prototype.cloneProtected.call(this,t),t.pa=this.pa,t.cb=this.cb.G(),t.un=this.un.G(),t.Nf=this.Nf,t.pa===Ic.Table){t.nj=this.nj.G(),t.Og=this.Og,t.ii=this.ii,t.hi=this.hi,t.Ng=this.Ng,t.Mg=this.Mg,t.gi=this.gi;var e=[];if(0<this.rb.length)for(var i=this.rb,n=i.length,o=0;o<n;o++)if(void 0!==i[o]){var a=i[o].copy();a.cj(t),e[o]=a}if(t.rb=e,e=[],0<this.mb.length)for(n=(i=this.mb).length,o=0;o<n;o++)void 0!==i[o]&&((a=i[o].copy()).cj(t),e[o]=a);t.mb=e,t.Mj=this.Mj,t.kj=this.kj,t.Ki=this.Ki,t.vi=this.vi}t.Zp=this.Zp,t.Tn=this.Tn.G(),t.Un=this.Un.G(),t.Qn=this.Qn,t.Pn=this.Pn,t.Sn=this.Sn,t.Rn=this.Rn,t.uj=this.uj,t.Xg=this.Xg,t.ib=this.ib,t.ci=this.ci,t.jo=this.jo,t.si=this.si,t.ne=this.ne,t.pl=this.pl,t.sg.assign(this.sg),t.Gg=this.Gg,null!==this.sp&&(t.sp=this.sp)},Ic.prototype.sf=function(t){qr.prototype.sf.call(this,t),t.V=this.V;for(var e=t.V.j,i=e.length,n=0;n<i;n++)e[n].kg=t;t.Hi=null},Ic.prototype.copy=function(){var t=qr.prototype.copy.call(this);if(null!==t){for(var e=this.V.j,i=e.length,n=0;n<i;n++){var o=e[n].copy();o.cj(t),o.Jj=null;var a=t.V,r=a.count;if(a.tb(r,o),null!==(a=t.part)){a.Fj=null,null!==o.portId&&a instanceof Ou&&(a.Fh=!0);var s=t.diagram;null!==s&&s.undoManager.isUndoingRedoing||a.Ya(Si,"elements",t,null,o,null,r)}}return t}return null},(i=Ic.prototype).toString=function(){return"Panel("+this.type+")#"+at(this)},i.Uo=function(t){qr.prototype.Uo.call(this,t);for(var e=this.V.j,i=e.length,n=0;n<i;n++)e[n].Uo(t)},i.Qi=function(t,e){if(this.pa===Ic.Grid)this.pa.bc(this,t,e);else if(this.pa===Ic.Graduated)this.pa.bc(this,t,e);else{this.pa===Ic.Table&&(t.lineCap="butt",Oc(this,t,!0,this.rb,!0),Oc(this,t,!1,this.mb,!0),Mc(this,t,!0,this.rb),Mc(this,t,!1,this.mb),Oc(this,t,!0,this.rb,!1),Oc(this,t,!1,this.mb,!1));var i=this.isClipping&&this.pa===Ic.Spot;i&&t.save();for(var n=this.Ab(),o=this.V.j,a=o.length,r=0;r<a;r++){var s=o[r];i&&s===n&&(t.clipInsteadOfFill=!0),s.bc(t,e),i&&s===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.sc(!0))}},i.hk=function(t,e,i,n,o){var a=this.be(),r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),c=r.m22*s,l=-r.m12*s,u=-r.m21*s,d=r.m11*s,h=s*(r.m21*r.dy-r.m22*r.dx),p=s*(r.m12*r.dx-r.m11*r.dy);if(null!==this.areaBackground)return qe.Uc((r=this.actualBounds).left,r.top,r.right,r.bottom,t,e,i,n,o);if(null!==this.background)return a=t*c+e*u+h,s=t*l+e*d+p,t=i*c+n*u+h,c=i*l+n*d+p,o.h(0,0),a=qe.Uc(0,0,(i=this.naturalBounds).width,i.height,a,s,t,c,o),o.transform(r),a;a||(c=1,u=l=0,d=1,p=h=0),s=t*c+e*u+h,t=t*l+e*d+p,o.h(c=i*c+n*u+h,i=i*l+n*d+p),n=(c-s)*(c-s)+(i-t)*(i-t),l=!1,p=(d=this.V.j).length,u=pt.alloc(),h=null,e=1/0;var f=null,g=this.isClipping&&this.pa===Ic.Spot;g&&(f=pt.alloc(),(l=(h=this.Ab()).hk(s,t,c,i,f))&&(e=(s-f.x)*(s-f.x)+(t-f.y)*(t-f.y)));for(var m=0;m<p;m++){var v=d[m];v.visible&&v!==h&&v.hk(s,t,c,i,u)&&(l=!0,(v=(s-u.x)*(s-u.x)+(t-u.y)*(t-u.y))<n&&(n=v,o.set(u)))}return g&&(e>n&&o.set(f),pt.free(f)),pt.free(u),a&&o.transform(r),l},i.o=function(t){if(!0!==hs(this)){qr.prototype.o.call(this,t),t=null,this.pa!==Ic.Auto&&this.pa!==Ic.Link||(t=this.Ab());for(var e=this.V.j,i=e.length,n=0;n<i;n++){var o=e[n];if((o===t||o.isPanelMain)&&o.o(!0),!o.desiredSize.v()){var a=os(o,!1);(o instanceof ed||o instanceof Ic||o instanceof gl||a!==Ka)&&o.o(!0)}}}},i.nm=function(){if(!1===hs(this)){ps(this,!0),gs(this,!0);for(var t=this.V.j,e=t.length,i=0;i<e;i++)t[i].nm()}},i.ll=function(){if(0!=(2048&this.F)==0){us(this,!0),ds(this,!0);for(var t=this.V.j,e=t.length,i=0;i<e;i++)t[i].Jv()}},i.Jv=function(){ds(this,!0);for(var t=this.V.j,e=t.length,i=0;i<e;i++)t[i].Jv()},i.rm=function(t,e,i,n){var o=this.sg;o.h(0,0,0,0);var a=this.desiredSize,r=this.minSize;void 0===i&&(i=r.width,n=r.height),i=Math.max(i,r.width),n=Math.max(n,r.height);var s=this.maxSize;isNaN(a.width)||(t=Math.min(a.width,s.width)),isNaN(a.height)||(e=Math.min(a.height,s.height)),t=Math.max(i,t),e=Math.max(n,e);var c=this.cb;t=Math.max(t-c.left-c.right,0),e=Math.max(e-c.top-c.bottom,0);var l=this.V.j;0!==l.length&&this.pa.measure(this,t,e,l,o,i,n),t=o.width+c.left+c.right,c=o.height+c.top+c.bottom,isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(c=a.height),t=Math.min(s.width,t),c=Math.min(s.height,c),t=Math.max(r.width,t),c=Math.max(r.height,c),zt(o,t=Math.max(i,t),c=Math.max(n,c)),zt(this.naturalBounds,t,c),Kr(this,0,0,t,c)},i.Ab=function(){if(null===this.Hi){var t=this.V.j,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(!0===n.isPanelMain)return this.Hi=n}this.Hi=t[0]}return this.Hi},i.Ch=function(t,e,i,n){var o=this.V.j;if(this.actualBounds.h(t,e,i,n),0!==o.length){if(!this.desiredSize.v()){t=os(this,!0);var a=this.measuredBounds;e=a.width,a=a.height;var r=this.bh,s=r.left+r.right;switch(r=r.top+r.bottom,e===i&&a===n&&(t=Ka),t){case Ka:(e>i||a>n)&&(this.o(),this.measure(e>i?i:e,a>n?n:a,0,0));break;case Ya:this.o(!0),this.measure(i+s,n+r,0,0);break;case Qa:this.o(!0),this.measure(i+s,a+r,0,0);break;case tr:this.o(!0),this.measure(e+s,n+r,0,0)}}this.pa.arrange(this,o,this.sg)}},i.Eh=function(t){var e=this.naturalBounds,i=jc(this);if(qt(0,0,e.width,e.height,t.x,t.y)){for(var n=(e=this.V.j).length,o=pt.allocAt(0,0);n--;){var a=e[n];if((a.visible||a===i)&&(vt(o.set(t),a.transform),a.aa(o)))return pt.free(o),!0}return pt.free(o),null!==this.hb||null!==this.dc}return!1},i.kt=function(t){if(this.Jk===t)return this;for(var e=this.V.j,i=e.length,n=0;n<i;n++){var o=e[n].kt(t);if(null!==o)return o}return null},i.Jm=function(t,e){if(e(this,t),t instanceof Ic)for(var i=(t=t.V.j).length,n=0;n<i;n++)this.Jm(t[n],e)},i.gm=function(t){return Vc(this,this,t)},i.Xa=function(t){if(this.name===t)return this;var e=this.V.j,i=e.length;null===this.si&&null===this.ne||(i=Wc(this));for(var n=0;n<i;n++){var o=e[n];if(o instanceof Ic){var a=o.Xa(t);if(null!==a)return a}if(o.name===t)return o}return null},i.be=function(){return!(this.type===Ic.TableRow||this.type===Ic.TableColumn)},i.Ub=function(t,e,i){if(!1===this.pickable)return null;if(void 0===e&&(e=null),void 0===i&&(i=null),fs(this))return null;var n=this.naturalBounds,o=1/this.uf(),a=this.be(),r=a?t:vt(pt.allocAt(t.x,t.y),this.transform),s=this.diagram,c=10,l=5;if(null!==s&&(l=(c=s.lm("extraTouchArea"))/2),qt(-l*o,-l*o,n.width+c*o,n.height+c*o,r.x,r.y)){if(!this.isAtomic){var u=(o=this.V.j).length;if(s=pt.alloc(),l=(c=this.isClipping&&this.pa===Ic.Spot)?this.Ab():null,c&&(l.be()?vt(s.set(t),l.transform):s.set(t),!l.aa(s)))return pt.free(s),a||pt.free(r),null;for(var d=jc(this);u--;){var h=o[u];if((h.visible||h===d)&&(h.be()?vt(s.set(t),h.transform):s.set(t),!c||h!==l)){var p=null;if(h instanceof Ic?p=h.Ub(s,e,i):!0===h.pickable&&h.aa(s)&&(p=h),null!==p&&(null!==e&&(p=e(p)),null!==p&&(null===i||i(p))))return pt.free(s),a||pt.free(r),p}}pt.free(s)}return null===this.background&&null===this.areaBackground?(a||pt.free(r),null):(t=qt(0,0,n.width,n.height,r.x,r.y)?this:null,a||pt.free(r),t)}return a||pt.free(r),null},i.Ti=function(t,e,i,n){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var o=this.naturalBounds,a=this.be(),r=a?t:vt(pt.allocAt(t.x,t.y),this.transform);if(o=qt(0,0,o.width,o.height,r.x,r.y),this.type===Ic.TableRow||this.type===Ic.TableColumn||o){if(!this.isAtomic){for(var s=this.V.j,c=s.length,l=pt.alloc(),u=jc(this);c--;){var d=s[c];if(d.visible||d===u){d.be()?vt(l.set(t),d.transform):l.set(t);var h=d;(null!==(d=d instanceof Ic?d:null)?d.Ti(l,e,i,n):h.aa(l))&&!1!==h.pickable&&(null!==e&&(h=e(h)),null===h||null!==i&&!i(h)||n.add(h))}}pt.free(l)}return a||pt.free(r),o&&(null!==this.background||null!==this.areaBackground)}return a||pt.free(r),!1},i.tf=function(t,e,i,n,o,a){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var r=a;if(void 0===a&&(r=He.alloc()).reset(),r.multiply(this.transform),this.Dh(t,r))return Fc(this,e,i,o),void 0===a&&He.free(r),!0;if(this.Gc(t,r)){if(!this.isAtomic)for(var s=jc(this),c=this.V.j,l=c.length;l--;){var u=c[l];if(u.visible||u===s){var d=u.actualBounds,h=this.naturalBounds;d.x>h.width||d.y>h.height||0>d.x+d.width||0>d.y+d.height||(d=u,u=u instanceof Ic?u:null,(h=He.alloc()).set(r),(null!==u?u.tf(t,e,i,n,o,h):Zr(d,t,n,h))&&(null!==e&&(d=e(d)),null===d||null!==i&&!i(d)||o.add(d)),He.free(h))}}return void 0===a&&He.free(r),n}return void 0===a&&He.free(r),!1},i.xg=function(t,e,i,n,o,a){if(!1===this.pickable)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var r=this.naturalBounds,s=this.be(),c=s?t:vt(pt.allocAt(t.x,t.y),this.transform),l=s?e:vt(pt.allocAt(e.x,e.y),this.transform),u=c.Ce(l),d=0<c.x&&c.x<r.width&&0<c.y&&c.y<r.height||bt(c.x,c.y,0,0,0,r.height)<=u||bt(c.x,c.y,0,r.height,r.width,r.height)<=u||bt(c.x,c.y,r.width,r.height,r.width,0)<=u||bt(c.x,c.y,r.width,0,0,0)<=u;if(r=c.dd(0,0)<=u&&c.dd(0,r.height)<=u&&c.dd(r.width,0)<=u&&c.dd(r.width,r.height)<=u,s||(pt.free(c),pt.free(l)),d){if(!this.isAtomic){c=pt.alloc(),l=pt.alloc(),u=jc(this);for(var h=this.V.j,p=h.length;p--;){var f=h[p];if(f.visible||f===u){var g=f.actualBounds,m=this.naturalBounds;s&&(g.x>m.width||g.y>m.height||0>g.x+g.width||0>g.y+g.height)||(f.be()?(g=f.transform,vt(c.set(t),g),vt(l.set(e),g)):(c.set(t),l.set(e)),g=f,(null!==(f=f instanceof Ic?f:null)?f.xg(c,l,i,n,o,a):g.Nx(c,l,o))&&(null!==i&&(g=i(g)),null===g||null!==n&&!n(g)||a.add(g)))}}pt.free(c),pt.free(l)}return o?d:r}return!1},i.add=function(t){this.tb(this.V.count,t)},i.L=function(t){return this.V.L(t)},i.tb=function(t,e){e instanceof su&&_("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.Ag(e))&&(this===e&&_("Cannot make a Panel contain itself: "+this.toString()),_("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(null!==i&&i!==this&&_("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.pa!==Ic.Grid||e instanceof al||_("Can only add Shapes to a Grid Panel, not: "+e),this.pa!==Ic.Graduated||e instanceof al||e instanceof gl||_("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.cj(this),e.Jj=null,null!==this.itemArray){var n=e.data;null!==n&&"object"==typeof n&&(null===this.Ld&&(this.Ld=new ht),this.Ld.add(n,e))}var o=this.V;if(n=-1,i===this){for(var a=-1,r=this.V.j,s=r.length,c=0;c<s;c++)if(r[c]===e){a=c;break}if(-1!==a){if(a===t||a+1>=o.count&&t>=o.count)return;o.Za(a),n=a}else _("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>o.count)&&(t=o.count),o.tb(t,e),(0===t||e.isPanelMain)&&(this.Hi=null),hs(this)||this.o(),e.o(!1),(null!==e.portId||e instanceof Ic&&!0===e.Fh)&&(this.Fh=!0),this.Xg=null,null!==(i=this.part)&&(i.Fj=null,i.dh=NaN,this.Fh&&i instanceof Ou&&(i.Fh=!0),i.Fh&&i instanceof Ou&&(i.rc=null),null!==(o=this.diagram)&&o.undoManager.isUndoingRedoing||(-1!==n&&i.Ya(Ti,"elements",this,e,null,n,null),i.Ya(Si,"elements",this,null,e,null,t),this.Bg()||Yc(this,e,!1)))},i.remove=function(t){for(var e=this.V.j,i=e.length,n=-1,o=0;o<i;o++)if(e[o]===t){n=o;break}-1!==n&&this.Fc(n,!0)},i.Za=function(t){0<=t&&this.Fc(t,!0)},i.Fc=function(t,e){var i=this.V,n=i.L(t);if(n.Jj=null,n.cj(null),null!==this.Ld){var o=n.data;"object"==typeof o&&this.Ld.remove(o)}i.Za(t),ps(this,!1),this.o(),this.Hi===n&&(this.Hi=null),this.Xg=null;var a=this.part;null!==a&&(a.Fj=null,a.dh=NaN,a.Lb(),a instanceof Ou&&(n instanceof Ic?n.Jm(n,function(t,i){Ru(a,i,e)}):Ru(a,n,e)),null!==(i=this.diagram)&&i.undoManager.isUndoingRedoing||a.Ya(Ti,"elements",this,n,null,t,null))},Ic.prototype.getRowDefinition=function(t){0>t&&y(t,">= 0",Ic,"getRowDefinition:idx"),t=Math.round(t);var e=this.rb;if(void 0===e)return null;if(void 0===e[t]){var i=new tl;i.cj(this),i.isRow=!0,i.index=t,e[t]=i}return e[t]},Ic.prototype.bw=function(t){0>t&&y(t,">= 0",Ic,"removeRowDefinition:idx"),t=Math.round(t);var e=this.rb;void 0!==e&&(this.Ya(Ti,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},Ic.prototype.getColumnDefinition=function(t){0>t&&y(t,">= 0",Ic,"getColumnDefinition:idx"),t=Math.round(t);var e=this.mb;if(void 0===e)return null;if(void 0===e[t]){var i=new tl;i.cj(this),i.isRow=!1,i.index=t,e[t]=i}return e[t]},(i=Ic.prototype).$v=function(t){0>t&&y(t,">= 0",Ic,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.mb;void 0!==e&&(this.Ya(Ti,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},i.rz=function(t){if(0>t||this.type!==Ic.Table)return-1;for(var e=0,i=this.rb,n=i.length,o=this.Ki;o<n;o++){var a=i[o];if(void 0!==a&&t<(e+=a.total))break}return o},i.jz=function(t){if(0>t||this.type!==Ic.Table)return-1;for(var e=0,i=this.mb,n=i.length,o=this.vi;o<n;o++){var a=i[o];if(void 0!==a&&t<(e+=a.total))break}return o},i.Mz=function(t,e){if(void 0===e&&(e=new pt(NaN,NaN)),this.type!==Ic.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.Ab();return i.geometry.Cv((t-this.graduatedMin)/this.graduatedRange,e),i.transform.ra(e)},i.Nz=function(t){if(this.type!==Ic.Graduated)return NaN;var e=this.Ab();return e.transform.Wd(t),e.geometry.Rx(t)*this.graduatedRange+this.graduatedMin},i.Yy=function(){var t=this.copy();return Nc(t,function(t){t instanceof Ic&&(t.ci=null,t.ib=null);var e=t.ab;null!==e&&(t.ab=null,e.each(function(e){t.bind(e.copy())})),null!==(e=t.Hg)&&(t.Hg=null,e.each(function(e){bs(t,e.value.copy())}))}),t},i.Ba=function(t){var e=this.ci;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((""===t||""===n||n===t)&&(n=i.targetProperty,null!==i.converter||""!==n)){n=this.data;var o=i.sourceName;if(null!==o)n=""===o||"/"===o||"."===o||".."===o?this:this.Xa(o);else{var a=this.diagram;null!==a&&i.isToModel&&(n=a.model.modelData)}if(null!==n){a=this;var r=i.gj;if(-1!==r){if(null===(a=this.kt(r)))continue}else null!==i.bd&&(a=i.bd);if("/"===o?n=a.part:"."===o?n=a:".."===o&&(n=a.panel),0!==(o=i.Rp)){if(!(a instanceof Ic))continue;1===o?a=a.getColumnDefinition(i.Ul):2===o&&(a=a.getRowDefinition(i.Ul))}void 0!==a&&i.ww(a,n)}}}},i.It=function(){for(var t=Wc(this);this.V.length>t;)this.Fc(this.V.length-1,!1);if(null!==(t=this.itemArray))for(var e=t.length,i=0;i<e;i++)qc(this,t[i],i)},i.Mx=function(t){return null==t||null===this.Ld?null:this.Ld.H(t)},h.Object.defineProperties(Ic.prototype,{type:{get:function(){return this.pa},set:function(t){var e=this.pa;e!==t&&(this.pa=t,this.pa===Ic.Grid?this.isAtomic=!0:this.pa===Ic.Table&&Pc(this),this.o(),this.g("type",e,t))}},elements:{get:function(){return this.V.iterator}},naturalBounds:{get:function(){return this.oc}},padding:{get:function(){return this.cb},set:function(t){"number"==typeof t?(0>t&&y(t,">= 0",Ic,"padding"),t=new Jt(t)):(0>t.left&&y(t.left,">= 0",Ic,"padding:value.left"),0>t.right&&y(t.right,">= 0",Ic,"padding:value.right"),0>t.top&&y(t.top,">= 0",Ic,"padding:value.top"),0>t.bottom&&y(t.bottom,">= 0",Ic,"padding:value.bottom"));var e=this.cb;e.w(t)||(this.cb=t=t.G(),this.o(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.un},set:function(t){var e=this.un;e.w(t)||(this.un=t=t.G(),this.o(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Nf},set:function(t){var e=this.Nf;e!==t&&(this.Nf=t,this.o(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.nj?ee:this.nj},set:function(t){if(void 0!==this.nj){"number"==typeof t&&(t=new Jt(t));var e=this.nj;e.w(t)||(this.nj=t=t.G(),this.o(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.ii?null:this.ii},set:function(t){var e=this.ii;e!==t&&(null===t||"string"==typeof t||t instanceof Vs)&&(t instanceof Vs&&t.freeze(),this.ii=t,this.M(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Og?1:this.Og},set:function(t){if(void 0!==this.Og){var e=this.Og;e!==t&&isFinite(t)&&0<=t&&(this.Og=t,this.o(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.hi?null:this.hi},set:function(t){if(void 0!==this.hi){var e=this.hi;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||_("defaultRowSeparatorDashArray value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.hi=t,this.M(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Mg?null:this.Mg},set:function(t){if(void 0!==this.Mg){var e=this.Mg;e!==t&&(null===t||"string"==typeof t||t instanceof Vs)&&(t instanceof Vs&&t.freeze(),this.Mg=t,this.M(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Ng?1:this.Ng},set:function(t){if(void 0!==this.Ng){var e=this.Ng;e!==t&&isFinite(t)&&0<=t&&(this.Ng=t,this.o(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.gi?null:this.gi},set:function(t){if(void 0!==this.gi){var e=this.gi;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||_("defaultColumnSeparatorDashArray value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.gi=t,this.M(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.Zp},set:function(t){var e=this.Zp;e!==t&&(this.Zp=t,this.o(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Tn},set:function(t){var e=this.Tn;if(!e.w(t)){t.v()&&0!==t.width&&0!==t.height||_("Invalid Panel.gridCellSize: "+t),this.Tn=t.G();var i=this.diagram;null!==i&&this===i.grid&&Da(i),this.M(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Un},set:function(t){var e=this.Un;if(!e.w(t)){t.v()||_("Invalid Panel.gridOrigin: "+t),this.Un=t.G();var i=this.diagram;null!==i&&this===i.grid&&Da(i),this.M(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.Qn},set:function(t){var e=this.Qn;e!==t&&(this.Qn=t,this.o(),this.g("graduatedMin",e,t),cs(this)&&null!==(t=this.part)&&Yr(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,this.o(),this.g("graduatedMax",e,t),cs(this)&&null!==(t=this.part)&&Yr(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&0<t&&(this.Sn=t,this.o(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.o(),this.g("graduatedTickBase",e,t))}},Fh:{get:function(){return 0!=(8388608&this.F)},set:function(t){0!=(8388608&this.F)!==t&&(this.F^=8388608)}},rowCount:{get:function(){return void 0===this.rb?0:this.rb.length}},columnCount:{get:function(){return void 0===this.mb?0:this.mb.length}},rowSizing:{get:function(){return void 0===this.Mj?ol:this.Mj},set:function(t){if(void 0!==this.Mj){var e=this.Mj;e!==t&&(this.Mj=t,this.o(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return void 0===this.kj?ol:this.kj},set:function(t){if(void 0!==this.kj){var e=this.kj;e!==t&&(this.kj=t,this.o(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return void 0===this.Ki?0:this.Ki},set:function(t){if(void 0!==this.Ki){var e=this.Ki;e!==t&&((!isFinite(t)||0>t)&&_("Panel.topIndex must be greater than zero and a real number, not: "+t),this.Ki=t,this.o(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return void 0===this.vi?0:this.vi},set:function(t){if(void 0!==this.vi){var e=this.vi;e!==t&&((!isFinite(t)||0>t)&&_("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.vi=t,this.o(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.ib},set:function(t){var e=this.ib;if(e!==t){var i=this instanceof su&&!(this instanceof Mu);Hc(this),this.ib=t;var n=this.diagram;null!==n&&(i?(i=n.partManager,this instanceof id?(null!==e&&i.Ne.remove(e),null!==t&&i.Ne.add(t,this)):this instanceof su&&(null!==e&&i.Oe.remove(e),null!==t&&i.Oe.add(t,this))):null!==(i=this.panel)&&null!==i.Ld&&(null!==e&&i.Ld.remove(e),null!==t&&i.Ld.add(t,this))),this.g("data",e,t),null!==n&&n.undoManager.isUndoingRedoing||null!==t&&this.Ba()}}},itemIndex:{get:function(){return this.jo},set:function(t){var e=this.jo;e!==t&&(this.jo=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.si},set:function(t){var e=this.si;if(e!==t||null!==t&&function(t,e){for(var i=(t=t.V.j).length,n=e.length,o=0,a=null;o<i&&!((a=t[o])instanceof Ic&&null!==a.data);)a=t[++o];if(i-o!==n)return!0;if(null===a)return 0<n;for(var r=0;o<i&&r<n;){if(!((a=t[o])instanceof Ic)||a.data!==e[r])return!0;o++,r++}return!1}(this,t)){var i=this.diagram;e!==t&&(null!==i&&null!==e&&jh(i.partManager,this,i),this.si=t,null!==i&&null!==t&&$h(i.partManager,this)),this.g("itemArray",e,t),null!==i&&i.undoManager.isUndoingRedoing||this.It()}}},itemTemplate:{get:function(){return null===this.ne?null:this.ne.H("")},set:function(t){if(null===this.ne){if(null===t)return;this.ne=new ht}var e=this.ne.H("");e!==t&&((t instanceof su||t.isPanelMain)&&_("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.ne.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.It())}},itemTemplateMap:{get:function(){return this.ne},set:function(t){var e=this.ne;if(e!==t){for(var i=t.iterator;i.next(););this.ne=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.It()}}},itemCategoryProperty:{get:function(){return this.pl},set:function(t){var e=this.pl;e!==t&&(this.pl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.F)},set:function(t){var e=0!=(1048576&this.F);e!==t&&(this.F^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.F)},set:function(t){var e=0!=(2097152&this.F);e!==t&&(t&&this.type!==Ic.Spot&&k("Warning: Panel.isClipping set on non-Spot Panel: "+this.toString()),this.F^=2097152,this.o(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.F)},set:function(t){var e=0!=(33554432&this.F);e!==t&&(this.F^=33554432,this.o(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.F)},set:function(t){var e=0!=(4194304&this.F);if(e!==t){var i=null===this.panel||this.panel.Bg();this.F^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||i&&Yc(this,this,t)}}},alignmentFocusName:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.o(),this.g("alignmentFocusName",e,t))}}}),h.Object.defineProperties(Ic,{Position:{get:function(){return Qc.H("Position")}},Horizontal:{get:function(){return Qc.H("Horizontal")}},Vertical:{get:function(){return Qc.H("Vertical")}},Spot:{get:function(){return Qc.H("Spot")}},Auto:{get:function(){return Qc.H("Auto")}},Table:{get:function(){return Qc.H("Table")}},Viewbox:{get:function(){return Qc.H("Viewbox")}},TableRow:{get:function(){return Qc.H("TableRow")}},TableColumn:{get:function(){return Qc.H("TableColumn")}},Link:{get:function(){return Qc.H("Link")}},Grid:{get:function(){return Qc.H("Grid")}},Graduated:{get:function(){return Qc.H("Graduated")}}}),Ic.prototype.findItemPanelForData=Ic.prototype.Mx,Ic.prototype.rebuildItemElements=Ic.prototype.It,Ic.prototype.updateTargetBindings=Ic.prototype.Ba,Ic.prototype.copyTemplate=Ic.prototype.Yy,Ic.prototype.graduatedValueForPoint=Ic.prototype.Nz,Ic.prototype.graduatedPointForValue=Ic.prototype.Mz,Ic.prototype.findColumnForLocalX=Ic.prototype.jz,Ic.prototype.findRowForLocalY=Ic.prototype.rz,Ic.prototype.removeColumnDefinition=Ic.prototype.$v,Ic.prototype.removeRowDefinition=Ic.prototype.bw,Ic.prototype.removeAt=Ic.prototype.Za,Ic.prototype.remove=Ic.prototype.remove,Ic.prototype.insertAt=Ic.prototype.tb,Ic.prototype.elt=Ic.prototype.L,Ic.prototype.add=Ic.prototype.add,Ic.prototype.findObject=Ic.prototype.Xa,Ic.prototype.findInVisualTree=Ic.prototype.gm,Ic.prototype.walkVisualTreeFrom=Ic.prototype.Jm,Ic.prototype.findMainElement=Ic.prototype.Ab;var Zc=!1,Jc=null,Qc=new ht;function tl(){nt(this),this.kg=null,this.Sr=!0,this.Oa=0,this.Pc=NaN,this.fh=0,this.eh=1/0,this.wb=Ie,this.ma=this.ha=0,this.ab=null,this.Ip=il,this.xe=Ja,this.Cp=this.ng=null,this.Dp=NaN,this.hb=this.Nj=null,this.qn=!1}function el(t){if(t.sizing===il){var e=t.kg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}Ic.className="Panel",Ic.definePanelLayout=Kc,Kc("Position",new fc),Kc("Vertical",new mc),Kc("Auto",new bc),Kc("Link",new Tc),tl.prototype.copy=function(){var t=new tl;return t.Sr=this.Sr,t.Oa=this.Oa,t.Pc=this.Pc,t.fh=this.fh,t.eh=this.eh,t.wb=this.wb,t.ha=this.ha,t.ma=this.ma,t.xe=this.xe,t.Ip=this.Ip,t.ng=null===this.ng?null:this.ng.G(),t.Cp=this.Cp,t.Dp=this.Dp,t.Nj=null,null!==this.Nj&&(t.separatorDashArray=C(this.separatorDashArray)),t.hb=this.hb,t.qn=this.qn,t.ab=this.ab,t},(i=tl.prototype).gt=function(t){t.isRow?this.height=t.height:this.width=t.width,this.minimum=t.minimum,this.maximum=t.maximum,this.alignment=t.alignment,this.stretch=t.stretch,this.sizing=t.sizing,this.ng=null===t.separatorPadding?null:t.separatorPadding.G(),this.separatorStroke=t.separatorStroke,this.separatorStrokeWidth=t.separatorStrokeWidth,this.Nj=null,t.separatorDashArray&&(this.Nj=C(t.separatorDashArray)),this.background=t.background,this.coversSeparators=t.coversSeparators,this.ab=t.ab},i.eb=function(t){t.classType===tl&&(this.sizing=t)},i.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+at(this)},i.cj=function(t){this.kg=t},i.mv=function(){var t=0,e=0,i=this.kg,n=this.isRow;if(null!==i&&i.type===Ic.Table)for(var o=n?i.rb.length:i.mb.length,a=0;a<o;a++){var r=n?i.rb[a]:i.mb[a];if(void 0!==r){e=r.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==i&&(e=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==i?this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.ng)){if(null===i)return t;e=i.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},i.uc=function(){var t=0,e=this.kg,i=0,n=this.isRow;if(null!==e&&e.type===Ic.Table)for(var o=n?e.rb.length:e.mb.length,a=0;a<o;a++){var r=n?e.rb[a]:e.mb[a];if(void 0!==r){i=r.index;break}}if(this.index!==i&&(null===(i=this.separatorStroke)&&null!==e&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==i&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(n=this.ng)){if(null===e)return t;n=e.defaultSeparatorPadding}return t+(this.isRow?n.top+n.bottom:n.left+n.right)},i.yb=function(t,e,i){var n=this.kg;if(null!==n&&(n.Ya(xi,t,this,e,i,void 0,void 0),null!==this.ab&&null!==(e=n.diagram)&&!e.skipsModelSourceBindings&&null!==(n=n.Ui())&&null!==(e=n.data)))for(i=this.ab.iterator;i.next();)i.value.Rq(this,e,t,n)},i.bind=function(t){t.bd=this;var e=this.panel;if(null!==e){var i=e.Ui();null!==i&&Gc(i)&&_("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}null===this.ab&&(this.ab=new tt),this.ab.add(t)},h.Object.defineProperties(tl.prototype,{panel:{get:function(){return this.kg}},isRow:{get:function(){return this.Sr},set:function(t){this.Sr=t}},index:{get:function(){return this.Oa},set:function(t){this.Oa=t}},height:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(0>t&&y(t,">= 0",tl,"height"),this.Pc=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.yb("height",e,t))}},width:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(0>t&&y(t,">= 0",tl,"width"),this.Pc=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.yb("width",e,t))}},minimum:{get:function(){return this.fh},set:function(t){var e=this.fh;e!==t&&((0>t||!isFinite(t))&&y(t,">= 0",tl,"minimum"),this.fh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.yb("minimum",e,t))}},maximum:{get:function(){return this.eh},set:function(t){var e=this.eh;e!==t&&(0>t&&y(t,">= 0",tl,"maximum"),this.eh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.yb("maximum",e,t))}},alignment:{get:function(){return this.wb},set:function(t){var e=this.wb;e.w(t)||(this.wb=t.G(),null!==this.panel&&this.panel.o(),this.yb("alignment",e,t))}},stretch:{get:function(){return this.xe},set:function(t){var e=this.xe;e!==t&&(this.xe=t,null!==this.panel&&this.panel.o(),this.yb("stretch",e,t))}},separatorPadding:{get:function(){return this.ng},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.ng;null!==t&&null!==e&&e.w(t)||(null!==t&&(t=t.G()),this.ng=t,null!==this.panel&&this.panel.o(),this.yb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e!==t&&(null!==t&&Ks(t,"RowColumnDefinition.separatorStroke"),t instanceof Vs&&t.freeze(),this.Cp=t,null!==this.panel&&this.panel.o(),this.yb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,null!==this.panel&&this.panel.o(),this.yb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.Nj},set:function(t){var e=this.Nj;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||_("separatorDashArray value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.Nj=t,null!==this.panel&&this.panel.M(),this.yb("separatorDashArray",e,t)}}},background:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&(null!==t&&Ks(t,"RowColumnDefinition.background"),t instanceof Vs&&t.freeze(),this.hb=t,null!==this.panel&&this.panel.M(),this.yb("background",e,t))}},coversSeparators:{get:function(){return this.qn},set:function(t){var e=this.qn;e!==t&&(this.qn=t,null!==this.panel&&this.panel.M(),this.yb("coversSeparators",e,t))}},sizing:{get:function(){return this.Ip},set:function(t){var e=this.Ip;e!==t&&(this.Ip=t,null!==this.panel&&this.panel.o(),this.yb("sizing",e,t))}},actual:{get:function(){return this.ha},set:function(t){this.ha=isNaN(this.Pc)?Math.max(Math.min(this.eh,t),this.fh):Math.max(Math.min(this.eh,this.Pc),this.fh)}},total:{get:function(){return this.ha+this.uc()},set:function(t){this.ha=isNaN(this.Pc)?Math.max(Math.min(this.eh,t),this.fh):Math.max(Math.min(this.eh,this.Pc),this.fh),this.ha=Math.max(0,this.ha-this.uc())}},position:{get:function(){return this.ma},set:function(t){this.ma=t}}}),tl.prototype.bind=tl.prototype.bind,tl.prototype.computeEffectiveSpacing=tl.prototype.uc,tl.prototype.computeEffectiveSpacingTop=tl.prototype.mv;var il=new W(tl,"Default",0),nl=new W(tl,"None",1),ol=new W(tl,"ProportionalExtra",2);function al(){qr.call(this),this.vd=this.ka=null,this.Gn="None",this.On=Ja,this.Dc=this.Zk="black",this.qh=1,this.Ql="butt",this.Rl="miter",this.Oj=10,this.oh=null,this.ph=0,this.jf=this.hf=Ie,this.ap=this.$o=NaN,this.$n=!1,this.cp=null,this.$k=this.Xl="None",this.Kd=1,this.Hd=0,this.Fd=1,this.Gd=null}function rl(t,e,i,n){var o=i.length;if(!(4>o)){var a=n.measuredBounds,r=Math.max(1,a.width);a=a.height;for(var s,c,l,u,d,h,p=i[0],f=i[1],g=0,m=P(),v=2;v<o;v+=2)0==(l=(s=i[v])-p)&&(l=.001),u=(p=(c=i[v+1])-f)/l,d=Math.atan2(p,l),h=Math.sqrt(l*l+p*p),m.push([l,d,u,h]),g+=h,p=s,f=c;p=i[0],f=i[1],l=n.measuredBounds.width,n instanceof al&&(l-=n.strokeWidth),1>l&&(l=1),o=i=l,c=0!=(s=r/2),l=(h=m[v=0])[0],d=h[1],u=h[2],h=h[3];for(var b=0;.1<=g;){if(0===b&&(c?(o=i,o-=s,g-=s,c=!1):o=i,0===o&&(o=1)),o>g)return void M(m);o>h?(b=o-h,o=h):b=0;var _=Math.sqrt(o*o/(1+u*u));if(0>l&&(_=-_),t.translate(p+=_,f+=u*_),t.rotate(d),t.translate(-r/2,-a/2),0===b&&n.Qi(t,e),t.translate(r/2,a/2),t.rotate(-d),t.translate(-p,-f),g-=o,h-=o,0!==b){if(++v===m.length)return void M(m);l=(h=m[v])[0],d=h[1],u=h[2],h=h[3],o=b}}M(m)}}function sl(t){var e=t.geometryStretch;return null!==t.vd?e===Ja?Ya:e:e===Ja?fl[t.figure].defaultStretch:e}function cl(t,e,i,n,o){return(e=(t=i.x-t)*t+(e=i.y-e)*e)<n?(o.x=i.x,o.y=i.y,e):n}function ll(t,e,i,n,o,a,r,s,c){var l=!1,u=(o-r)*(e-n)-(a-s)*(t-i);return 0!==u&&(c.x=((o*s-a*r)*(t-i)-(o-r)*(t*n-e*i))/u,c.y=((o*s-a*r)*(e-n)-(a-s)*(t*n-e*i))/u,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(c.y>t||qe.$(c.y,t))&&(c.y<e||qe.$(c.y,e))&&(l=!0)):(e=t<i?t:i,t=t<i?i:t,(c.x>e||qe.$(c.x,e))&&(c.x<t||qe.$(c.x,t))&&(l=!0)),l)}function ul(t,e,i,n){if(!t.Uc(e,i,n))return!1;t=e.x,e=e.y;var o=i.x,a=i.y;return i=n.x,n=n.y,t===o?(e<a?(t=e,e=a):t=a,n>=t&&n<=e):(t<o?(n=t,t=o):n=o,i>=n&&i<=t)}function dl(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=jd,"None"!==t.Xl?(t.segmentIndex=-1,t.alignmentFocus=Ee):"None"!==t.$k&&(t.segmentIndex=0,t.alignmentFocus=new Fe(1-Ee.x,Ee.y)))}function hl(t){var e=pl[t];if(void 0===e){var i=t.toLowerCase();if("none"===i)return"None";if(void 0===(e=pl[i])){var n,o=null;for(n in qe.Mm)if(n.toLowerCase()===i){o=n;break}if(null!==o)return t=Ze(qe.Mm[o],!1),pl[o]=t,i!==o&&(pl[i]=o),o}}return"string"==typeof e?e:e instanceof Xe?t:null}tl.className="RowColumnDefinition",tl.Default=il,tl.None=nl,tl.ProportionalExtra=ol,d(al,qr),al.prototype.cloneProtected=function(t){qr.prototype.cloneProtected.call(this,t),t.ka=this.ka,t.Gn=this.Gn,t.On=this.On,t.vd=this.vd,t.Zk=this.Zk,t.Dc=this.Dc,t.qh=this.qh,t.Ql=this.Ql,t.Rl=this.Rl,t.Oj=this.Oj,null!==this.oh&&(t.oh=C(this.oh)),t.ph=this.ph,t.hf=this.hf.G(),t.jf=this.jf.G(),t.$o=this.$o,t.ap=this.ap,t.$n=this.$n,t.cp=this.cp,t.Xl=this.Xl,t.$k=this.$k,t.Kd=this.Kd,t.Hd=this.Hd,t.Fd=this.Fd,t.Gd=this.Gd},(i=al.prototype).eb=function(t){t===Ka||t===Za||t===er||t===Ja?this.geometryStretch=t:qr.prototype.eb.call(this,t)},i.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+at(this)},i.Qi=function(t,e){var i=this.Dc,n=this.Zk;if(null!==i||null!==n){var o=this.actualBounds,a=this.naturalBounds;null!==n&&ts(this,t,n,!0,!1,a,o);var r=this.part,s=this.qh;null!==i&&0===s&&null!==r&&(s=r.type===Ic.Link&&r instanceof Mu&&"Selection"===r.category&&r.adornedObject instanceof al&&r.adornedPart.Ab()===r.adornedObject?r.adornedObject.strokeWidth:0),null!==i&&0!==s&&(ts(this,t,i,!1,!1,a,o),t.lineWidth=s,t.lineJoin=this.Rl,t.lineCap=this.Ql,t.miterLimit=this.Oj),o=!1,r&&e.De("drawShadows")&&(o=r.isShadowed),r=!0,null===i||null!==n&&"transparent"!==n||(r=!1),a=!1;var c=this.strokeDashArray;null!==c&&(a=!0,t.jt(c,this.ph));var l=this.ka;if(null!==l){if(l.type===ai)t.beginPath(),t.moveTo(l.startX,l.startY),t.lineTo(l.endX,l.endY),null!==n&&t.Vd(n),0!==s&&null!==i&&t.fj();else if(l.type===ri){var u=l.startX;c=l.startY;var d=l.endX,h=l.endY;l=Math.min(u,d);var p=Math.min(c,h);u=Math.abs(d-u),c=Math.abs(h-c),t.beginPath(),t.rect(l,p,u,c),null!==n&&t.Vd(n),null!==i&&(r&&o&&$s(t),0!==s&&(0!==u&&0!==c||(t.beginPath(),t.rect(l,p,Math.max(u,.1),Math.max(c,.1))),t.fj()),r&&o&&js(t))}else if(l.type===si)u=l.startX,c=l.startY,d=l.endX,h=l.endY,l=Math.abs(d-u)/2,p=Math.abs(h-c)/2,u=Math.min(u,d)+l,c=Math.min(c,h)+p,t.beginPath(),t.moveTo(u,c-p),t.bezierCurveTo(u+qe.Fg*l,c-p,u+l,c-qe.Fg*p,u+l,c),t.bezierCurveTo(u+l,c+qe.Fg*p,u+qe.Fg*l,c+p,u,c+p),t.bezierCurveTo(u-qe.Fg*l,c+p,u-l,c+qe.Fg*p,u-l,c),t.bezierCurveTo(u-l,c-qe.Fg*p,u-qe.Fg*l,c-p,u,c-p),t.closePath(),null!==n&&t.Vd(n),0!==s&&null!==i&&(r&&o?($s(t),t.fj(),js(t)):t.fj());else if(l.type===ci)for(l=(c=l.figures).length,p=0;p<l;p++){u=c.j[p],t.beginPath(),t.moveTo(u.startX,u.startY),h=(d=u.segments.j).length;for(var f=null,g=0;g<h;g++){var m=d[g];switch(m.type){case pi:t.moveTo(m.endX,m.endY);break;case fi:t.lineTo(m.endX,m.endY);break;case gi:t.bezierCurveTo(m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY);break;case mi:t.quadraticCurveTo(m.point1X,m.point1Y,m.endX,m.endY);break;case vi:if(m.radiusX===m.radiusY){var v=Math.PI/180;t.arc(m.point1X,m.point1Y,m.radiusX,m.startAngle*v,(m.startAngle+m.sweepAngle)*v,0>m.sweepAngle,null!==f?f.endX:u.startX,null!==f?f.endY:u.startY)}else if(0===(v=(f=di(m,u)).length))t.lineTo(m.centerX,m.centerY);else for(var b=0;b<v;b++){var w=f[b];0===b&&t.lineTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7])}break;case bi:if(b=v=0,null!==f&&f.type===vi){if(0===(w=(f=di(f,u)).length)){t.lineTo(m.centerX,m.centerY);break}null!==(f=f[w-1]||null)&&(v=f[6],b=f[7])}else v=null!==f?f.endX:u.startX,b=null!==f?f.endY:u.startY;if(0===(v=(f=hi(m,u,v,b)).length)){t.lineTo(m.centerX,m.centerY);break}for(b=0;b<v;b++)t.bezierCurveTo((w=f[b])[2],w[3],w[4],w[5],w[6],w[7]);break;default:_("Segment not of valid type: "+m.type)}m.isClosed&&t.closePath(),f=m}o?u.isShadowed?(!0===u.isFilled&&"transparent"!==n&&null!==n&&t.Vd(n),0!==s&&null!==i&&(r&&$s(t),t.fj(),r&&js(t))):(r&&$s(t),!0===u.isFilled&&"transparent"!==n&&null!==n&&t.Vd(n),0!==s&&null!==i&&t.fj(),r&&js(t)):(!0===u.isFilled&&null!==n&&t.Vd(n),0!==s&&null!==i&&t.fj())}if(a&&t.ht(),null!==this.pathPattern){if((i=this.pathPattern).measure(1/0,1/0),i.arrange(0,0,(n=i.measuredBounds).width,n.height),s=this.geometry,t.save(),t.beginPath(),n=P(),s.type===ai)n.push(s.startX),n.push(s.startY),n.push(s.endX),n.push(s.endY),rl(t,e,n,i);else if(s.type===ci)for(s=s.figures.iterator;s.next();){for(o=s.value,n.length=0,n.push(o.startX),n.push(o.startY),c=r=o.startX,l=a=o.startY,u=(p=o.segments.j).length,d=0;d<u;d++){switch((h=p[d]).type){case pi:rl(t,e,n,i),n.length=0,n.push(h.endX),n.push(h.endY),c=r=h.endX,l=a=h.endY;break;case fi:n.push(h.endX),n.push(h.endY),r=h.endX,a=h.endY;break;case gi:qe.Ae(r,a,h.point1X,h.point1Y,h.point2X,h.point2Y,h.endX,h.endY,.5,n),r=h.endX,a=h.endY;break;case mi:qe.Dq(r,a,h.point1X,h.point1Y,h.endX,h.endY,.5,n),r=h.endX,a=h.endY;break;case vi:if(0===(m=(g=di(h,o)).length)){n.push(h.centerX),n.push(h.centerY),r=h.centerX,a=h.centerY;break}for(f=0;f<m;f++)qe.Ae(r,a,(v=g[f])[2],v[3],v[4],v[5],v[6],v[7],.5,n),r=v[6],a=v[7];break;case bi:if(0===(m=(g=hi(h,o,r,a)).length)){n.push(h.centerX),n.push(h.centerY),r=h.centerX,a=h.centerY;break}for(f=0;f<m;f++)qe.Ae(r,a,(v=g[f])[2],v[3],v[4],v[5],v[6],v[7],.5,n),r=v[6],a=v[7];break;default:_("Segment not of valid type: "+h.type)}h.isClosed&&(n.push(c),n.push(l),rl(t,e,n,i))}rl(t,e,n,i)}else if(s.type===ri)n.push(s.startX),n.push(s.startY),n.push(s.endX),n.push(s.startY),n.push(s.endX),n.push(s.endY),n.push(s.startX),n.push(s.endY),n.push(s.startX),n.push(s.startY),rl(t,e,n,i);else if(s.type===si){if((a=new li).startX=s.endX,a.startY=(s.startY+s.endY)/2,(r=new ui(vi)).startAngle=0,r.sweepAngle=360,r.centerX=(s.startX+s.endX)/2,r.centerY=(s.startY+s.endY)/2,r.radiusX=Math.abs(s.startX-s.endX)/2,r.radiusY=Math.abs(s.startY-s.endY)/2,a.add(r),0===(o=(s=di(r,a)).length))n.push(r.centerX),n.push(r.centerY);else for(r=a.startX,a=a.startY,c=0;c<o;c++)qe.Ae(r,a,(l=s[c])[2],l[3],l[4],l[5],l[6],l[7],.5,n),r=l[6],a=l[7];rl(t,e,n,i)}M(n),t.restore(),t.sc(!1)}}}},i.ga=function(t,e){if(void 0===e&&(e=new pt),t instanceof Fe){t.jc()&&_("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.wd.ra(e),e},i.km=function(t){void 0===t&&(t=new Vt);var e=this.naturalBounds,i=this.wd;e=Vt.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Vc(n/2,n/2),n=pt.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Wt(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Wt(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Wt(t,n.x,n.y,0,0),Vt.free(e),pt.free(n),t},i.Eh=function(t,e){var i=this.geometry;if(null===i||null===this.fill&&null===this.stroke)return!1;var n=i.bounds,o=this.strokeWidth/2;i.type!==ai||e||(o+=2);var a=Vt.alloc();if(a.assign(n),a.Vc(o+2,o+2),!a.aa(t))return Vt.free(a),!1;if(n=o+1e-4,i.type===ai)return null!==this.stroke&&(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),!(0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)&&(Vt.free(a),qe.Nb(i.startX,i.startY,i.endX,i.endY,o,t.x,t.y)));if(i.type===ri){e=i.startX;var r=i.startY,s=i.endX;if(i=i.endY,a.x=Math.min(e,s),a.y=Math.min(r,i),a.width=Math.abs(s-e),a.height=Math.abs(i-r),null===this.fill){if(a.Vc(-n,-n),a.aa(t))return Vt.free(a),!1;a.Vc(n,n)}return null!==this.stroke&&a.Vc(o,o),t=a.aa(t),Vt.free(a),t}if(i.type===si){r=i.startX,o=i.startY,s=i.endX;var c=i.endY;if(i=Math.min(r,s),e=Math.min(o,c),r=Math.abs(s-r)/2,o=Math.abs(c-o)/2,i=t.x-(i+r),e=t.y-(e+o),null===this.fill){if(o-=n,0>=(r-=n)||0>=o||1>=i*i/(r*r)+e*e/(o*o))return Vt.free(a),!1;r+=n,o+=n}return null!==this.stroke&&(r+=n,o+=n),Vt.free(a),!(0>=r||0>=o)&&1>=i*i/(r*r)+e*e/(o*o)}return i.type===ci?(Vt.free(a),null===this.fill?ii(i,t.x,t.y,o):ti(i,t,o,1<this.strokeWidth,e)):(_("Unknown Geometry type: "+i.type),!1)},i.rm=function(t,e,i,n){var o=this.desiredSize,a=this.qh;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.vd)var r=this.geometry.bounds;else{var s=this.figure,c=fl[s];if(void 0===c){var l=qe.Je[s];"string"==typeof l&&(l=qe.Je[l]),"function"==typeof l?(c=l(null,100,100),fl[s]=c):_("Unsupported Figure: "+s)}r=c.bounds}s=r.width,c=r.height,l=r.width;var u=r.height;switch(os(this,!0)){case Ka:n=i=0;break;case Ya:l=Math.max(t-a,0),u=Math.max(e-a,0);break;case Qa:l=Math.max(t-a,0),n=0;break;case tr:i=0,u=Math.max(e-a,0)}switch(isFinite(o.width)&&(l=o.width),isFinite(o.height)&&(u=o.height),o=this.maxSize,r=this.minSize,i=Math.max(i-a,r.width),n=Math.max(n-a,r.height),l=Math.min(o.width,l),u=Math.min(o.height,u),l=isFinite(l)?Math.max(i,l):Math.max(s,i),u=isFinite(u)?Math.max(n,u):Math.max(c,n),i=sl(this)){case Ka:break;case Ya:s=l,c=u;break;case Za:i=Math.min(l/s,u/c),isFinite(i)||(i=1),s*=i,c*=i;break;default:_(i+" is not a valid geometryStretch.")}null!==this.vd?(o=s=Math.max(s,.01),n=c=Math.max(c,.01),i=(r=null!==this.vd?this.vd:this.ka).copy(),o/=(r=r.bounds).width,n/=r.height,isFinite(o)||(o=1),isFinite(n)||(n=1),1===o&&1===n||i.scale(o,n),this.ka=i):null!==this.ka&&qe.$(this.ka.jl,t-a)&&qe.$(this.ka.il,e-a)||(this.ka=al.makeGeometry(this,s,c)),r=this.ka.bounds,1/0===t||1/0===e?Kr(this,r.x-a/2,r.y-a/2,0===t&&0===s?0:r.width+a,0===e&&0===c?0:r.height+a):Kr(this,-a/2,-a/2,l+a,u+a)},i.Ch=function(t,e,i,n){Jr(this,t,e,i,n)},i.Uc=function(t,e,i){return this.hk(t.x,t.y,e.x,e.y,i)},i.hk=function(t,e,i,n,o){var a=this.transform,r=1/(a.m11*a.m22-a.m12*a.m21),s=a.m22*r,c=-a.m12*r,l=-a.m21*r,u=a.m11*r,d=r*(a.m21*a.dy-a.m22*a.dx),h=r*(a.m12*a.dx-a.m11*a.dy);if(a=t*s+e*l+d,r=t*c+e*u+h,s=i*s+n*l+d,c=i*c+n*u+h,d=this.qh/2,null===(l=this.ka)&&(this.measure(1/0,1/0),l=this.ka),h=l.bounds,u=!1,l.type===ai)if(1.5>=this.strokeWidth)u=qe.Fe(l.startX,l.startY,l.endX,l.endY,a,r,s,c,o);else{if(l.startX===l.endX?(n=d,u=0):(e=(l.endY-l.startY)/(l.endX-l.startX),n=(u=d/Math.sqrt(1+e*e))*e),e=P(),t=new pt,qe.Fe(l.startX+n,l.startY+u,l.endX+n,l.endY+u,a,r,s,c,t)&&e.push(t),t=new pt,qe.Fe(l.startX-n,l.startY-u,l.endX-n,l.endY-u,a,r,s,c,t)&&e.push(t),t=new pt,qe.Fe(l.startX+n,l.startY+u,l.startX-n,l.startY-u,a,r,s,c,t)&&e.push(t),t=new pt,qe.Fe(l.endX+n,l.endY+u,l.endX-n,l.endY-u,a,r,s,c,t)&&e.push(t),0===(s=e.length))return M(e),!1;for(u=!0,c=1/0,n=0;n<s;n++)(i=((t=e[n]).x-a)*(t.x-a)+(t.y-r)*(t.y-r))<c&&(c=i,o.x=t.x,o.y=t.y);M(e)}else if(l.type===ri)u=qe.Uc(h.x-d,h.y-d,h.x+h.width+d,h.y+h.height+d,a,r,s,c,o);else if(l.type===si){t:if(0===(e=Vt.allocAt(h.x,h.y,h.width,h.height).Vc(d,d)).width)u=qe.Fe(e.x,e.y,e.x,e.y+e.height,a,r,s,c,o);else if(0===e.height)u=qe.Fe(e.x,e.y,e.x+e.width,e.y,a,r,s,c,o);else{if(n=e.x+(t=e.width/2),u=e.y+(l=e.height/2),i=9999,a!==s&&(i=(r-c)/(a-s)),9999>Math.abs(i)){if(0>t*t*i*i+l*l-(c=r-u-i*(a-n))*c){o.x=NaN,o.y=NaN,u=!1;break t}s=(-t*t*i*c+t*l*(d=Math.sqrt(t*t*i*i+l*l-c*c)))/(l*l+t*t*i*i)+n,t=(-t*t*i*c-t*l*d)/(l*l+t*t*i*i)+n,l=i*(s-n)+c+u,c=i*(t-n)+c+u,Math.abs((a-s)*(a-s))+Math.abs((r-l)*(r-l))<Math.abs((a-t)*(a-t))+Math.abs((r-c)*(r-c))?(o.x=s,o.y=l):(o.x=t,o.y=c)}else{if(s=l*l,0>(s-=s/(t*t)*(c=a-n)*c)){o.x=NaN,o.y=NaN,u=!1;break t}s=u+(c=Math.sqrt(s)),c=u-c,Math.abs(s-r)<Math.abs(c-r)?(o.x=a,o.y=s):(o.x=a,o.y=c)}u=!0}Vt.free(e)}else if(l.type===ci){h=pt.alloc();var p=s-a,f=c-r,g=p*p+f*f;o.x=s,o.y=c;for(var m=0;m<l.figures.count;m++)for(var v=l.figures.j[m],b=v.segments,w=p=v.startX,y=f=v.startY,k=0;k<b.count;k++){var x=b.j[k],S=x.type,T=x.endX,C=x.endY,D=!1;switch(S){case pi:w=T,y=C;break;case fi:D=ll(p,f,T,C,a,r,s,c,h);break;case gi:D=qe.fq(p,f,x.point1X,x.point1Y,x.point2X,x.point2Y,T,C,a,r,s,c,.6,h);break;case mi:D=qe.fq(p,f,(p+2*x.point1X)/3,(f+2*x.point1Y)/3,(2*x.point1X+T)/3,(2*x.point1X+T)/3,T,C,a,r,s,c,.6,h);break;case vi:case bi:var I=(S=x.type===vi?di(x,v):hi(x,v,p,f)).length;if(0===I){D=ll(p,f,x.centerX,x.centerY,a,r,s,c,h);break}for(C=null,T=0;T<I;T++){if(C=S[T],0===T&&ll(p,f,C[0],C[1],a,r,s,c,h)){var O=cl(a,r,h,g,o);O<g&&(g=O,u=!0)}qe.fq(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],a,r,s,c,.6,h)&&(O=cl(a,r,h,g,o))<g&&(g=O,u=!0)}T=C[6],C=C[7];break;default:_("Unknown Segment type: "+S)}p=T,f=C,D&&(D=cl(a,r,h,g,o))<g&&(g=D,u=!0),x.isClosed&&ll(p,f,T=w,C=y,a,r,s,c,h)&&(x=cl(a,r,h,g,o))<g&&(g=x,u=!0)}a=i-t,r=n-e,0!==(s=Math.sqrt(a*a+r*r))&&(a/=s,r/=s),o.x-=a*d,o.y-=r*d,pt.free(h)}else _("Unknown Geometry type: "+l.type);return!!u&&(this.transform.ra(o),!0)},i.Dh=function(t,e){if(void 0===e)return t.Be(this.actualBounds);var i=this.ka;null===i&&(this.measure(1/0,1/0),i=this.ka),i=i.bounds;var n=this.strokeWidth/2,o=!1,a=pt.alloc();return a.h(i.x-n,i.y-n),t.aa(e.ra(a))&&(a.h(i.x-n,i.bottom+n),t.aa(e.ra(a))&&(a.h(i.right+n,i.bottom+n),t.aa(e.ra(a))&&(a.h(i.right+n,i.y-n),t.aa(e.ra(a))&&(o=!0)))),pt.free(a),o},i.Gc=function(t,e){if(this.Dh(t,e)||void 0===e&&(e=this.transform,t.Be(this.actualBounds)))return!0;var i=He.alloc();i.set(e),i.vt();var n=t.left,o=t.right,a=t.top;t=t.bottom;var r=pt.alloc();if(r.h(n,a),i.ra(r),this.Eh(r,!0))return pt.free(r),!0;if(r.h(o,a),i.ra(r),this.Eh(r,!0))return pt.free(r),!0;if(r.h(n,t),i.ra(r),this.Eh(r,!0))return pt.free(r),!0;if(r.h(o,t),i.ra(r),this.Eh(r,!0))return pt.free(r),!0;var s=pt.alloc(),c=pt.alloc();return i.set(e),i.Pv(this.transform),i.vt(),s.x=o,s.y=a,s.transform(i),r.x=n,r.y=a,r.transform(i),e=!1,ul(this,r,s,c)?e=!0:(r.x=o,r.y=t,r.transform(i),ul(this,r,s,c)?e=!0:(s.x=n,s.y=t,s.transform(i),ul(this,r,s,c)?e=!0:(r.x=n,r.y=a,r.transform(i),ul(this,r,s,c)&&(e=!0)))),pt.free(r),He.free(i),pt.free(s),pt.free(c),e},i.Nx=function(t,e,i){function n(t,e){for(var i=t.length,n=0;n<i;n+=2)if(e.dd(t[n],t[n+1])>o)return!0;return!1}if(i&&null!==this.fill&&this.Eh(t,!0))return!0;var o=t.Ce(e),a=o;if(1.5<this.strokeWidth&&(o=this.strokeWidth/2+Math.sqrt(o),o*=o),null===(e=this.ka)&&(this.measure(1/0,1/0),null===(e=this.ka)))return!1;if(!i){var r=e.bounds,s=r.x,c=r.y,l=r.x+r.width;if(r=r.y+r.height,_t(t.x,t.y,s,c)<=o&&_t(t.x,t.y,l,c)<=o&&_t(t.x,t.y,s,r)<=o&&_t(t.x,t.y,l,r)<=o)return!0}if(s=e.startX,c=e.startY,l=e.endX,r=e.endY,e.type===ai){if(i=(s-l)*(t.x-l)+(c-r)*(t.y-r),bt(t.x,t.y,s,c,l,r)<=(0<=(l-s)*(t.x-s)+(r-c)*(t.y-c)&&0<=i?o:a))return!0}else{if(e.type===ri)return e=!1,i&&(e=bt(t.x,t.y,s,c,s,r)<=o||bt(t.x,t.y,s,c,l,c)<=o||bt(t.x,t.y,l,c,l,r)<=o||bt(t.x,t.y,s,r,l,r)<=o),e;if(e.type===si){e=t.x-(s+l)/2,a=t.y-(c+r)/2;var u=Math.abs(l-s)/2,d=Math.abs(r-c)/2;if(0===u||0===d)return bt(t.x,t.y,s,c,l,r)<=o;if(!i)return!(_t(e,a,-u,0)>=o||_t(e,a,0,-d)>=o||_t(e,a,0,d)>=o||_t(e,a,u,0)>=o);if((t=qe.dz(u,d,e,a))*t<=o)return!0}else if(e.type===ci){if(a=(l=e.bounds).x,s=l.y,c=l.x+l.width,l=l.y+l.height,t.x>c&&t.x<a&&t.y>l&&t.y<s&&bt(t.x,t.y,a,s,a,l)>o&&bt(t.x,t.y,a,s,c,s)>o&&bt(t.x,t.y,c,l,a,l)>o&&bt(t.x,t.y,c,l,c,s)>o)return!1;if(a=Math.sqrt(o),!i){for(i=e.figures,e=0;e<i.count;e++){if(t.dd(r=(a=i.j[e]).startX,u=a.startY)>o)return!1;for(c=(s=a.segments.j).length,l=0;l<c;l++)switch(d=s[l],d.type){case pi:case fi:if(t.dd(r=d.endX,u=d.endY)>o)return!1;break;case gi:var h=P();if(qe.Ae(r,u,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,h),r=n(h,t),M(h),r)return!1;if(t.dd(r=d.endX,u=d.endY)>o)return!1;break;case mi:if(h=P(),qe.Dq(r,u,d.point1X,d.point1Y,d.endX,d.endY,.8,h),r=n(h,t),M(h),r)return!1;if(t.dd(r=d.endX,u=d.endY)>o)return!1;break;case vi:case bi:var p=(h=d.type===vi?di(d,a):hi(d,a,r,u)).length;if(0===p){if(t.dd(r=d.centerX,u=d.centerY)>o)return!1;break}d=null;for(var f=P(),g=0;g<p;g++)if(d=h[g],f.length=0,qe.Ae(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,f),n(f,t))return M(f),!1;M(f),null!==d&&(r=d[6],u=d[7]);break;default:_("Unknown Segment type: "+d.type)}}return!0}if(null===this.fill?ii(e,t.x,t.y,a):ti(e,t,a,!0,!1))return!0}}return!1},i.cc=function(){this.ka=null},al.makeGeometry=function(t,e,i){if("None"!==t.toArrow)var n=pl[t.toArrow];else"None"!==t.fromArrow?n=pl[t.fromArrow]:("string"==typeof(n=qe.Je[t.figure])&&(n=qe.Je[n]),void 0===n&&_("Unknown Shape.figure: "+t.figure),(n=n(t,e,i)).jl=e,n.il=i);if(null===n){var o=qe.Je.Rectangle;"function"==typeof o&&(n=o(t,e,i))}return n},h.Object.defineProperties(al.prototype,{geometry:{get:function(){return null!==this.ka?this.ka:this.vd},set:function(t){var e=this.ka,i=this.vd;if(e!==t){this.vd=this.ka=null!==t?t.freeze():null;var n=this.part;null!==n&&(n.dh=NaN),this.o(),this.g("geometry",e||i,t),cs(this)&&null!==(t=this.part)&&Yr(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=Ze(t)).normalize();this.geometry=t,this.position=t=pt.allocAt(-e.x,-e.y),pt.free(t)}},isGeometryPositioned:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.o(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Zk},set:function(t){var e=this.Zk;e!==t&&(null!==t&&Ks(t,"Shape.fill"),t instanceof Vs&&t.freeze(),this.Zk=t,this.M(),this.g("fill",e,t))}},stroke:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(null!==t&&Ks(t,"Shape.stroke"),t instanceof Vs&&t.freeze(),this.Dc=t,this.M(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.qh},set:function(t){var e=this.qh;if(e!==t)if(0<=t){this.qh=t,this.o();var i=this.part;null!==i&&(i.dh=NaN),this.g("strokeWidth",e,t)}else y(t,"value >= 0",al,"strokeWidth:value")}},strokeCap:{get:function(){return this.Ql},set:function(t){var e=this.Ql;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?y(t,'"butt", "round", or "square"',al,"strokeCap"):(this.Ql=t,this.M(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Rl},set:function(t){var e=this.Rl;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?y(t,'"miter", "bevel", or "round"',al,"strokeJoin"):(this.Rl=t,this.M(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Oj},set:function(t){var e=this.Oj;if(e!==t&&1<=t){this.Oj=t,this.M();var i=this.part;null!==i&&(i.dh=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.oh},set:function(t){var e=this.oh;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];0<=a&&isFinite(a)||_("strokeDashArray:value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.oh=t,this.M(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.ph},set:function(t){var e=this.ph;e!==t&&0<=t&&(this.ph=t,this.M(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Gn},set:function(t){var e=this.Gn;if(e!==t){var i=qe.Je[t];"function"==typeof i?i=t:(i=qe.Je[t.toLowerCase()])||_("Unknown Shape.figure: "+t),e!==i&&(null!==(t=this.part)&&(t.dh=NaN),this.Gn=i,this.vd=null,this.cc(),this.o(),this.g("figure",e,i))}}},toArrow:{get:function(){return this.Xl},set:function(t){var e=this.Xl;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=hl(t);null===i?_("Unknown Shape.toArrow: "+t):e!==i&&(this.Xl=i,this.vd=null,this.cc(),this.o(),dl(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return this.$k},set:function(t){var e=this.$k;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=hl(t);null===i?_("Unknown Shape.fromArrow: "+t):e!==i&&(this.$k=i,this.vd=null,this.cc(),this.o(),dl(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return this.hf},set:function(t){var e=this.hf;e.w(t)||(this.hf=t=t.G(),this.o(),this.g("spot1",e,t))}},spot2:{get:function(){return this.jf},set:function(t){var e=this.jf;e.w(t)||(this.jf=t=t.G(),this.o(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.$o},set:function(t){var e=this.$o;e!==t&&(this.$o=t,this.cc(),this.o(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.ap},set:function(t){var e=this.ap;e!==t&&(this.ap=t,this.cc(),this.o(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){if(null!==this.ka)return this.oc.assign(this.ka.bounds),this.oc;var t=this.desiredSize;return new Vt(0,0,t.width,t.height)}},pathPattern:{get:function(){return this.cp},set:function(t){var e=this.cp;e!==t&&(this.cp=t,this.M(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(this.On=t,this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Kd},set:function(t){var e=this.Kd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Kd=t;var i=this.diagram;null!==i&&this.panel===i.grid&&Da(i),this.o(),null!==(i=this.panel)&&(i.Xg=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Hd=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Fd},set:function(t){var e=this.Fd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Fd=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Gd},set:function(t){var e=this.Gd;e!==t&&(this.Gd=t,this.o(),this.g("graduatedSkip",e,t))}}}),al.prototype.intersectsRect=al.prototype.Gc,al.prototype.containedInRect=al.prototype.Dh,al.prototype.getNearestIntersectionPoint=al.prototype.Uc,al.prototype.getDocumentBounds=al.prototype.km,al.prototype.getDocumentPoint=al.prototype.ga;var pl=new Y,fl=new Y;function gl(){qr.call(this),Fl||(zl=lr?new Ls(null).context:null,Fl=!0),this.kx=this.Tb="",this.Dc="black",this.he="13px sans-serif",this.Ii="start",this.Ed=Ka,this.Mi=Oe,this.xj=!0,this.pi=this.ri=!1,this.ig=Ml,this.tg=Il,this.bs=this.pb=this.Nc=0,this.Iu=this.Ju=null,this.Dn=!1,this.zc=this.en=this.Sp=this.Ji=this.Tp=null,this.gf=this.ff=0,this.pe=1/0,this.ti=0,this.ie=null,this.ve=0,this.ge=this.gb=this.Qb=null,this.Kd=1,this.Hd=0,this.Fd=1,this.Gd=this.tj=null}function ml(t,e){t.F=6144|e.F,t.qb=e.opacity,t.hb=e.background,t.dc=e.areaBackground,t.Lc=e.desiredSize.G(),t.bg=e.minSize.G(),t.ag=e.maxSize.G(),t.Zf=e.Zf.copy(),t.ya=e.scale,t.Yb=e.angle,t.xe=e.stretch,t.bh=e.margin.G(),t.wb=e.alignment.G(),t.Fk=e.alignmentFocus.G(),t.Gl=e.segmentFraction,t.Hl=e.segmentOffset.G(),t.Il=e.segmentOrientation,null!==e.md&&(t.md=e.md.copy()),t.Kl=e.shadowVisible,e instanceof gl&&(t.Tb=e.Tb,t.Dc=e.Dc,t.he=e.he,t.Ii=e.Ii,t.Ed=e.Ed,t.Mi=e.Mi,t.xj=e.xj,t.ri=e.ri,t.pi=e.pi,t.ig=e.ig,t.tg=e.tg,t.ie=null,t.ff=e.ff,t.gf=e.gf,t.pe=e.pe,t.ti=e.ti,t.Kd=e.Kd,t.Hd=e.Hd,t.Fd=e.Fd,t.tj=e.tj,t.Gd=e.Gd)}function vl(t,e,i){null===t.ge?(t.ge=e,t.pb=i):(null!==t.gb&&null!==t.Qb||(t.gb=[],t.Qb=[],t.gb.push(t.ge),t.Qb.push(t.pb)),t.gb.push(e),t.Qb.push(i))}function bl(t,e,i,n){e=e.trim();var o=0,a=t.he,r=t.ff+t.gf;r=Math.max(0,yl(t)+r);var s=t.ig===Ol?kl(a):0;if(t.Nc>=t.pe)null!==n&&n.h(0,r);else{var c=e;if(t.tg===Cl)if(t.ve=1,a=wl(e),0===s||a<=i)t.pb=Math.max(t.pb,a),vl(t,e,t.pb),null!==n&&n.h(a,r);else{for(a=wl((o=_l(t,c))+(e=_l(t,c=c.substr(o.length))));0<e.length&&a<=i;)a=wl(((o+=e)+(e=_l(t,c=c.substr(e.length)))).trim());for(o+=e.trim(),i=Math.max(1,i-s);wl(o)>i&&1<o.length;)o=o.substr(0,o.length-1);e=wl(o+=Al),t.pb=e,vl(t,o,e),null!==n&&n.h(e,r)}else{for(s=0,0===c.length&&(s=1,vl(t,c,0));0<c.length;){var l=_l(t,c);for(c=c.substr(l.length);wl(l)>i;){var u=1;for(a=wl(l.substr(0,u)),e=0;a<=i;)u++,e=a,a=wl(l.substr(0,u));if(1===u){var d=a;o=Math.max(o,a)}else d=e,o=Math.max(o,e);if(1>--u&&(u=1),vl(t,l.substr(0,u),d),s++,l=l.substr(u),t.Nc+s>t.pe)break}for(a=wl(l+(e=_l(t,c)));0<e.length&&a<=i;)a=wl(((l+=e)+(e=_l(t,c=c.substr(e.length)))).trim());if(""!==(l=l.trim())&&("\xad"===l[l.length-1]&&(l=l.substring(0,l.length-1)+"\u2010"),0===e.length?(u=a,o=Math.max(o,a)):(u=e=wl(l),o=Math.max(o,e)),vl(t,l,u),s++,t.Nc+s>t.pe))break}t.ve=Math.min(t.pe,s),t.pb=Math.max(t.pb,o),null!==n&&n.h(t.pb,r*t.ve)}}}function _l(t,e){if(t.tg===Pl)return e.substr(0,1);t=e.length;for(var i=0,n=$l;i<t&&!n.test(e.charAt(i));)i++;for(;i<t&&n.test(e.charAt(i));)i++;return i>=t?e:e.substr(0,i)}function wl(t){return null===zl?8*t.length:zl.measureText(t).width}function yl(t){if(null!==t.ie)return t.ie;var e=t.he;if(null===zl){var i=16;return t.ie=i}return void 0!==jl[e]&&5e3>Ll?i=jl[e]:(i=1.3*zl.measureText("M").width,jl[e]=i,Ll++),t.ie=i}function kl(t){if(null===zl)return 6;if(void 0!==El[t]&&5e3>Nl)var e=El[t];else e=zl.measureText(Al).width,El[t]=e,Nl++;return e}function xl(t,e){var i=t.Tb.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n=t.ff+t.gf;if(n=Math.max(0,yl(t)+n),0===i.length)return t.pb=0,t.Nc=1,n;if(!t.isMultiline){var o=i.indexOf("\n",0);0<=o&&(i=i.substr(0,o))}o=0;for(var a,r=t.Nc=0,s=!1;!s;){if(-1===(a=i.indexOf("\n",r))&&(a=i.length,s=!0),r<=a){if(r=i.substr(r,a-r),t.tg!==Cl){t.ve=0;var c=Lt.alloc();bl(t,r,e,c),o+=c.height,Lt.free(c),t.Nc+=t.ve}else bl(t,r,e,null),o+=n,t.Nc++;t.Nc===t.pe&&(s=!0)}r=a+1}return t.bs=o}al.className="Shape",al.getFigureGenerators=function(){var t,e=new ht;for(t in qe.Je)t!==t.toLowerCase()&&e.add(t,qe.Je[t]);return e.freeze(),e},al.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=qe.Je;n[t]=e,n[i]=t},al.getArrowheadGeometries=function(){var t=new ht;for(n in qe.Mm)if(void 0===pl[n]){var e=Ze(qe.Mm[n],!1);pl[n]=e,(e=n.toLowerCase())!==n&&(pl[e]=n)}for(var i in pl)if(i!==i.toLowerCase()){var n=pl[i];n instanceof Xe&&t.add(i,n)}return t.freeze(),t},al.defineArrowheadGeometry=function(t,e){var i;i="string"==typeof e?Ze(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||_("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=pl;n[t]=i,n[e]=t},d(gl,qr),gl.prototype.cloneProtected=function(t){qr.prototype.cloneProtected.call(this,t),t.Tb=this.Tb,t.kx=this.kx,t.Dc=this.Dc,t.he=this.he,t.Ii=this.Ii,t.Ed=this.Ed,t.Mi=this.Mi,t.xj=this.xj,t.ri=this.ri,t.pi=this.pi,t.ig=this.ig,t.tg=this.tg,t.Nc=this.Nc,t.bs=this.bs,t.pb=this.pb,t.Ju=this.Ju,t.Iu=this.Iu,t.Dn=this.Dn,t.Tp=this.Tp,t.Ji=this.Ji,t.Sp=this.Sp,t.en=this.en,t.zc=this.zc,t.ff=this.ff,t.gf=this.gf,t.pe=this.pe,t.ie=this.ie,t.ve=this.ve,t.Qb=this.Qb,t.gb=this.gb,t.ge=this.ge,t.ti=this.ti,t.Kd=this.Kd,t.Hd=this.Hd,t.Fd=this.Fd,t.tj=this.tj,t.Gd=this.Gd},(i=gl.prototype).eb=function(t){t.classType===gl?this.wrap=t:qr.prototype.eb.call(this,t)},i.toString=function(){return 22<this.Tb.length?'TextBlock("'+this.Tb.substring(0,20)+'"...)':'TextBlock("'+this.Tb+'")'},i.o=function(){qr.prototype.o.call(this),this.Iu=this.Ju=null},i.Qi=function(t,e){if(null!==this.Dc&&0!==this.Tb.length&&null!==this.he){var i=this.naturalBounds,n=this.actualBounds,o=i.width,a=i.height,r=yl(this),s=t.textAlign=this.Ii,c=e.ml;"start"===s?s=c?"right":"left":"end"===s&&(s=c?"left":"right"),c=this.ri;var l=this.pi;ts(this,t,this.Dc,!0,!1,i,n),(c||l)&&ts(this,t,this.Dc,!1,!1,i,n),n=0,i=!1;var u=pt.allocAt(0,0);this.wd.ra(u);var d=pt.allocAt(0,r);this.wd.ra(d);var h=u.Ce(d);switch(pt.free(u),pt.free(d),8>h*(u=e.scale)*u&&(i=!0),e.Eb!==t&&(i=!1),!1===e.De("textGreeking")&&(i=!1),e=this.ff,h=this.gf,this.flip){case nr:t.translate(o,0),t.scale(-1,1);break;case ir:t.translate(0,a),t.scale(1,-1);break;case or:t.translate(o,a),t.scale(-1,-1)}if(a>(d=(e+r+h)*(u=this.Nc))&&(n=(n=this.Mi).y*a-n.y*d+n.offsetY),1===u&&null!==this.ge)(h=this.pb)>o&&(h=o),this.Pi(this.ge,t,0,n+e,o,r,h,i,s,c,l);else if(null!==this.Qb&&null!==this.gb)for(d=0;d<u;d++){var p=this.Qb[d];p>o&&(p=o),this.Pi(this.gb[d],t,0,n+=e,o,r,p,i,s,c,l),n+=r+h}switch(this.flip){case nr:t.scale(-1,1),t.translate(-o,0);break;case ir:t.scale(1,-1),t.translate(0,-a);break;case or:t.scale(-1,-1),t.translate(-o,-a)}}},i.Pi=function(t,e,i,n,o,a,r,s,c,l,u){var d=0;s?("left"===c?d=0:"right"===c?d=o-r:"center"===c&&(d=(o-r)/2),e.fillRect(i+d,n+.25*a,r,1)):("left"===c?d=0:"right"===c?d=o:"center"===c&&(d=o/2),o=null!==Sl?Sl(this,a):.75*a,e.fillText(t,i+d,n+o),0==(t=a/20|0)&&(t=1),"right"===c?d-=r:"center"===c&&(d-=r/2),l&&(c=null!==Tl?Tl(this,a):.8*a,e.beginPath(),e.lineWidth=t,e.moveTo(i+d,n+c),e.lineTo(i+d+r,n+c),e.stroke()),u&&(e.beginPath(),e.lineWidth=t,n=n+a-a/2.2|0,0!=t%2&&(n+=.5),e.moveTo(i+d,n),e.lineTo(i+d+r,n),e.stroke()))},i.rm=function(t,e,i,n){this.ti=t;var o,a=this.he;if(null!==zl&&Vl!==a&&(Vl=zl.font=a),this.pb=this.ve=0,this.ge=this.gb=this.Qb=this.ie=null,isNaN(this.desiredSize.width)){if(0===(a=this.Tb.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)a=0;else if(this.isMultiline){for(var r=o=0,s=!1;!s;){var c=a.indexOf("\n",r);-1===c&&(c=a.length,s=!0),o=Math.max(o,wl(a.substr(r,c-r).trim())),r=c+1}a=o}else 0<=(o=a.indexOf("\n",0))&&(a=a.substr(0,o)),a=wl(a);a=Math.min(a,t/this.scale),a=Math.max(8,a)}else a=this.desiredSize.width;if(null!==this.panel&&(a=Math.min(a,this.panel.maxSize.width)),o=xl(this,a),r=o=isNaN(this.desiredSize.height)?Math.min(o,e/this.scale):this.desiredSize.height,0!==this.pb&&null!==this.Qb&&null!==this.gb&&this.ig===Ol&&(e=this.he,e=this.ig===Ol?kl(e):0,s=this.ff+this.gf,s=Math.max(0,yl(this)+s),!((r=Math.min(this.maxLines-1,Math.max(Math.floor(r/s+.01)-1,0)))+1>=this.gb.length))){for(s=this.gb[r],e=Math.max(1,t-e);wl(s)>e&&1<s.length;)s=s.substr(0,s.length-1);e=wl(s+=Al),this.gb[r]=s,this.gb=this.gb.slice(0,r+1),this.Qb[r]=e,this.Qb=this.Qb.slice(0,r+1),this.ve=this.gb.length,this.pb=Math.max(this.pb,e),this.Nc=this.ve,1===this.Nc&&(this.ge=this.gb[0])}(this.wrap===Dl||isNaN(this.desiredSize.width))&&(a=isNaN(t)?this.pb:Math.min(t,this.pb),isNaN(this.desiredSize.width)&&(a=Math.max(8,a))),a=Math.max(i,a),o=Math.max(n,o),zt(this.oc,a,o),Kr(this,0,0,a,o)},i.Ch=function(t,e,i,n){Jr(this,t,e,i,n)},h.Object.defineProperties(gl.prototype,{font:{get:function(){return this.he},set:function(t){var e=this.he;e!==t&&(this.he=t,this.ie=null,this.o(),this.g("font",e,t))}},text:{get:function(){return this.Tb},set:function(t){var e=this.Tb;e!==(t=null!=t?t.toString():"")&&(this.Tb=t,this.o(),this.g("text",e,t))}},textAlign:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.Ii=t,this.M(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Ed},set:function(t){var e=this.Ed;e!==t&&(this.Ed=t,this.M(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e.w(t)||(this.Mi=t=t.G(),ns(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.oc.v()){var t=Lt.alloc();bl(this,this.Tb,999999,t);var e=t.width;Lt.free(t),t=xl(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),zt(this.oc,e,t)}return this.oc}},isMultiline:{get:function(){return this.xj},set:function(t){var e=this.xj;e!==t&&(this.xj=t,this.o(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.ri},set:function(t){var e=this.ri;e!==t&&(this.ri=t,this.M(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.pi},set:function(t){var e=this.pi;e!==t&&(this.pi=t,this.M(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.tg},set:function(t){var e=this.tg;e!==t&&(this.tg=t,this.o(),this.g("wrap",e,t))}},overflow:{get:function(){return this.ig},set:function(t){var e=this.ig;e!==t&&(this.ig=t,this.o(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(null!==t&&Ks(t,"TextBlock.stroke"),t instanceof Vs&&t.freeze(),this.Dc=t,this.M(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Nc}},editable:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.Tp},set:function(t){var e=this.Tp;e!==t&&(this.Tp=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(this.zc=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Kd},set:function(t){var e=this.Kd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Kd=t,this.o();var i=this.panel;null!==i&&(i.Xg=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Hd=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Fd},set:function(t){var e=this.Fd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Fd=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.tj},set:function(t){var e=this.tj;e!==t&&(this.tj=t,this.o(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Gd},set:function(t){var e=this.Gd;e!==t&&(this.Gd=t,this.o(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.Sp},set:function(t){var e=this.Sp;e!==t&&(this.Sp=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.ff},set:function(t){var e=this.ff;e!==t&&(this.ff=t,this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.gf},set:function(t){var e=this.gf;e!==t&&(this.gf=t,this.g("spacingBelow",e,t))}},maxLines:{get:function(){return this.pe},set:function(t){var e=this.pe;e!==t&&(0>=(t=Math.floor(t))&&y(t,"> 0",gl,"maxLines"),this.pe=t,this.g("maxLines",e,t),this.o())}},metrics:{get:function(){return{arrSize:null!==this.Qb?this.Qb:[this.pb],arrText:null!==this.gb?this.gb:[this.ge],maxLineWidth:this.pb,fontHeight:this.ie}}},choices:{get:function(){return this.en},set:function(t){var e=this.en;e!==t&&(this.en=t,this.g("choices",e,t))}}});var Sl=null,Tl=null,Cl=new W(gl,"None",0),Dl=new W(gl,"WrapFit",1),Il=new W(gl,"WrapDesiredSize",2),Pl=new W(gl,"WrapBreakAll",3),Ml=new W(gl,"OverflowClip",0),Ol=new W(gl,"OverflowEllipsis",1),$l=/[ \u200b\u00ad]/,jl=new Y,Ll=0,El=new Y,Nl=0,Al="...",Vl="",zl=null,Fl=!1;function Bl(){this.Qb=[],this.gb=[]}function Rl(){qr.call(this),this.Sg=null,this.Kp="",this.nh=Kt,this.el=Ya,this.kf=this.zc=null,this.dl=ce,this.Ed=Ka,this.Tl=null,this.wu=!1,this.Fr=!0,this.ul=!1,this.Ml=null}function Ul(t){void 0===t&&(t=""),""!==t?Wl[t]&&(delete Wl[t],ql--):(Wl=new Y,ql=0)}function Gl(t,e){t.Qr=!0,t.al=!1;for(var i,n=E(),o=n.length,a=0;a<o;a++){var r=n[a];i=t.getAttribute("src");var s=r.Ci.H(i);if(null!==s)for(var c=s.length,l=0;l<c;l++)r.ts.add(i=s[l]),r.Pb(),void 0===t.Su&&(t.Su=e,null!==i.kf&&i.kf(i,e))}}function Hl(t,e){t.al=e;for(var i,n=E(),o=n.length,a=0;a<o;a++){var r=n[a],s=t.getAttribute("src");if(null!==(i=r.Ci.H(s))){r=i.length,s=P();for(var c=0;c<r;c++)s.push(i[c]);for(c=0;c<r;c++)null!==(i=s[c]).zc&&i.zc(i,e);M(s)}}}gl.className="TextBlock",gl.getEllipsis=function(){return Al},gl.setEllipsis=function(t){Al=t,El=new Y,Nl=0},gl.getBaseline=function(){return Sl},gl.setBaseline=function(t){Sl=t;for(var e=(t=E()).length,i=0;i<e;i++)t[i].Zd()},gl.getUnderline=function(){return Tl},gl.setUnderline=function(t){Tl=t;for(var e=(t=E()).length,i=0;i<e;i++)t[i].Zd()},gl.isValidFont=function(t){if(Fl||(zl=lr?new Ls(null).context:null,Fl=!0),null===zl)return!0;var e=zl.font;if(t===e||"10px sans-serif"===t)return!0;zl.font="10px sans-serif",zl.font=t;var i=zl.font;if("10px sans-serif"!==i)return zl.font=e,!0;zl.font="19px serif";var n=zl.font;return zl.font=t,i=zl.font,zl.font=e,i!==n},gl.None=Cl,gl.WrapFit=Dl,gl.WrapDesiredSize=Il,gl.WrapBreakAll=Pl,gl.OverflowClip=Ml,gl.OverflowEllipsis=Ol,Bl.prototype.reset=function(){this.Qb=[],this.gb=[]},Bl.prototype.gt=function(t){this.Qb=C(t.Qb),this.gb=C(t.gb)},Bl.className="TextBlockMetrics",d(Rl,qr),Rl.prototype.cloneProtected=function(t){qr.prototype.cloneProtected.call(this,t),t.element=this.Sg,t.Kp=this.Kp,t.nh=this.nh.G(),t.el=this.el,t.Ed=this.Ed,t.zc=this.zc,t.kf=this.kf,t.dl=this.dl.G(),t.Fr=this.Fr,t.Ml=this.Ml},(i=Rl.prototype).eb=function(t){t===Ka||t===Za||t===er?this.imageStretch=t:qr.prototype.eb.call(this,t)},i.toString=function(){return"Picture("+this.source+")#"+at(this)},i.oA=function(){if(""!==this.source){Ul(this.source);var t=this.source;this.source="",this.source=t}},i.Zd=function(){this.M()},i.Qi=function(t,e){var i=this.Sg;if(null!==i){var n=i.getAttribute("src");if(i instanceof HTMLImageElement&&(null===n||""===n)&&_('Element has no source ("src") attribute: '+i),!(i.al instanceof Event)){n=this.naturalBounds;var o=0,a=0,r=this.wu,s=r?+i.width:i.naturalWidth;if(void 0===s&&i.videoWidth&&(s=i.videoWidth),void 0===(r=r?+i.height:i.naturalHeight)&&i.videoHeight&&(r=i.videoHeight),r=r||n.height,0!==(s=s||n.width)&&0!==r){var c=s,l=r;this.sourceRect.v()&&(o=this.nh.x,a=this.nh.y,s=this.nh.width,r=this.nh.height);var u=s,d=r,h=this.el,p=this.dl;switch(h){case Ka:if(this.sourceRect.v())break;u>=n.width&&(o=o+p.offsetX+(u*p.x-n.width*p.x)),d>=n.height&&(a=a+p.offsetY+(d*p.y-n.height*p.y)),s=Math.min(n.width,u),r=Math.min(n.height,d);break;case Ya:u=n.width,d=n.height;break;case Za:case er:h===Za?(u*=h=Math.min(n.height/d,n.width/u),d*=h):h===er&&((u*=h=Math.max(n.height/d,n.width/u))>=n.width&&(o=(o+p.offsetX+(u*p.x-n.width*p.x)/u)*s),(d*=h)>=n.height&&(a=(a+p.offsetY+(d*p.y-n.height*p.y)/d)*r),s*=1/(u/n.width),r*=1/(d/n.height),u=n.width,d=n.height)}var f=u*(h=this.uf()*e.scale)*d*h,g=s*r/f,m=i.__goCache;if(h=null,i.Qr&&void 0!==m&&4<f&&g>Xl*Xl)for(null===m.Oi&&(Kl(m,4,c,l,i),Kl(m,16,c,l,i)),l=(c=m.Oi).length,f=0;f<l&&c[f].ratio*c[f].ratio<g;f++)h=c[f];if(!e.Xk){if(null===this.Tl)if(null===this.Sg)this.Tl=!1;else{(c=new Ls(null).context).drawImage(this.Sg,0,0);try{c.getImageData(0,0,1,1).data[3]&&(this.Tl=!1),this.Tl=!1}catch(v){this.Tl=!0}}if(this.Tl)return}switch(c=0,u<n.width&&(c=p.offsetX+(n.width*p.x-u*p.x)),l=0,d<n.height&&(l=p.offsetY+(n.height*p.y-d*p.y)),this.flip){case nr:t.translate(Math.min(n.width,u),0),t.scale(-1,1);break;case ir:t.translate(0,Math.min(n.height,d)),t.scale(1,-1);break;case or:t.translate(Math.min(n.width,u),Math.min(n.height,d)),t.scale(-1,-1)}if(e.De("pictureRatioOptimization")&&!e.ni&&void 0!==m&&null!==h&&1!==h.ratio){t.save(),e=h.ratio;try{t.drawImage(h.source,o/e,a/e,Math.min(h.source.width,s/e),Math.min(h.source.height,r/e),c,l,Math.min(n.width,u),Math.min(n.height,d))}catch(v){this.Fr=!1}t.restore()}else try{t.drawImage(i,o,a,s,r,c,l,Math.min(n.width,u),Math.min(n.height,d))}catch(v){this.Fr=!1}switch(this.flip){case nr:t.scale(-1,1),t.translate(-Math.min(n.width,u),0);break;case ir:t.scale(1,-1),t.translate(0,-Math.min(n.height,d));break;case or:t.scale(-1,-1),t.translate(-Math.min(n.width,u),-Math.min(n.height,d))}}}}},i.rm=function(t,e,i,n){var o=this.desiredSize,a=os(this,!0),r=this.Sg,s=this.wu;(s||!this.ul&&r&&r.complete)&&(this.ul=!0),null===r&&(isFinite(o.width)||(t=0),isFinite(o.height)||(e=0)),isFinite(o.width)||a===Ya||a===Qa?(isFinite(t)||(t=this.sourceRect.v()?this.sourceRect.width:s?+r.width:r.naturalWidth),i=0):null!==r&&!1!==this.ul&&(t=this.sourceRect.v()?this.sourceRect.width:s?+r.width:r.naturalWidth),isFinite(o.height)||a===Ya||a===tr?(isFinite(e)||(e=this.sourceRect.v()?this.sourceRect.height:s?+r.height:r.naturalHeight),n=0):null!==r&&!1!==this.ul&&(e=this.sourceRect.v()?this.sourceRect.height:s?+r.height:r.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height),o=this.maxSize,a=this.minSize,i=Math.max(i,a.width),n=Math.max(n,a.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(i,t),e=Math.max(n,e),null===r||r.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),zt(this.oc,t,e),Kr(this,0,0,t,e)},i.Ch=function(t,e,i,n){Jr(this,t,e,i,n)},h.Object.defineProperties(Rl.prototype,{element:{get:function(){return this.Sg},set:function(t){var e=this.Sg;if(e!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||_("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.wu=t instanceof HTMLCanvasElement,this.Sg=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.al instanceof Event&&null!==this.zc&&this.zc(this,t.al),!0===t.Qr&&null!==this.kf&&this.kf(this,t.Su),t.Qr=!0,this.desiredSize.v()||(ps(this,!1),this.o());else{var i=this;t.Xw||(t.addEventListener("load",function(e){Gl(t,e),i.desiredSize.v()||(ps(i,!1),i.o())}),t.addEventListener("error",function(e){Hl(t,e)}),t.Xw=!0)}this.g("element",e,t),this.M()}}},source:{get:function(){return this.Kp},set:function(t){var e=this.Kp;if(e!==t){this.Kp=t;var i=Wl,n=this.diagram,o=null;if(void 0!==i[t])o=i[t];else{30<ql&&(Ul(),i=Wl),o=b("img");var a=this;o.addEventListener("load",function(t){Gl(o,t),a.desiredSize.v()||(ps(a,!1),a.o())}),o.addEventListener("error",function(t){Hl(o,t)}),o.Xw=!0;var r=this.Ml;null!==r&&(o.crossOrigin=r(this)),o.src=t,i[t]=o,ql++}null!==n&&Oa(n,this),this.element=o,null!==n&&Ma(n,this),void 0===o.__goCache&&(o.__goCache=new Yl),this.o(),this.M(),this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Ml},set:function(t){if(this.Ml!==t&&(this.Ml=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.nh},set:function(t){var e=this.nh;e.w(t)||(this.nh=t=t.G(),this.M(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.el},set:function(t){var e=this.el;e!==t&&(this.el=t,this.M(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Ed},set:function(t){var e=this.Ed;e!==t&&(this.Ed=t,this.M(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.dl},set:function(t){var e=this.dl;e.w(t)||(this.dl=t=t.G(),this.o(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(this.zc=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.kf},set:function(t){var e=this.kf;e!==t&&(this.kf=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.oc}}}),Rl.prototype.redraw=Rl.prototype.Zd,Rl.prototype.reloadSource=Rl.prototype.oA;var Wl=null,ql=0,Xl=4;function Yl(){this.Oi=null}function Kl(t,e,i,n,o){null===t.Oi&&(t.Oi=[]);var a=new Ls(null),r=a.context,s=1/e;a.width=i/e,a.height=n/e,0!==a.width&&0!==a.height&&(e=new Zl(a.Ea,e),i=1,0<t.Oi.length&&(o=(i=t.Oi[t.Oi.length-1]).source,i=i.ratio),r.setTransform(s*i,0,0,s*i,0,0),r.drawImage(o,0,0),t.Oi.push(e))}function Zl(t,e){this.source=t,this.ratio=e}function Jl(){this.ot=new Xe,this.fc=null}function Ql(t,e,i,n,o){t.fc=new li,t.fc.startX=e,t.fc.startY=i,t.fc.isFilled=n,t.ot.figures.add(t.fc),void 0!==o&&(t.fc.isShadowed=o)}function tu(t){var e=t.fc.segments.length;0<e&&t.fc.segments.L(e-1).close()}function eu(t,e,i,n,o,a,r){var s;void 0===s&&(s=!1);var c=new ui(gi);c.point1X=e,c.point1Y=i,c.point2X=n,c.point2Y=o,c.endX=a,c.endY=r,s&&c.close(),t.fc.segments.add(c)}function iu(t,e,i,n,o){var a;void 0===a&&(a=!1);var r=new ui(mi);r.point1X=e,r.point1Y=i,r.endX=n,r.endY=o,a&&r.close(),t.fc.segments.add(r)}function nu(t,e,i,n,o,a,r,s){var c;void 0===c&&(c=!1),e=new ui(bi,r,s,e,i,n,o,a),c&&e.close(),t.fc.segments.add(e)}function ou(t){var e=au;return null!==e?(au=null,e.reset(t),e):((e=new Jl).reset(t),e)}Rl.className="Picture",Wl=new Y,Rl.clearCache=Ul,Yl.className="PictureCacheArray",Zl.className="PictureCacheInstance",(i=Jl.prototype).reset=function(t){null!==t?(t.ea(),this.ot=t,t.figures.clear()):this.ot=new Xe,this.fc=null},i.Mq=function(t){this.fc.isShadowed=t},i.moveTo=function(t,e,i){void 0===i&&(i=!1);var n=new ui(pi);n.endX=t,n.endY=e,i&&n.close(),this.fc.segments.add(n)},i.lineTo=function(t,e,i){void 0===i&&(i=!1);var n=new ui(fi);n.endX=t,n.endY=e,i&&n.close(),this.fc.segments.add(n)},i.arcTo=function(t,e,i,n,o,a,r){void 0===a&&(a=0),void 0===r&&(r=!1);var s=new ui(vi);s.startAngle=t,s.sweepAngle=e,s.centerX=i,s.centerY=n,s.radiusX=o,s.radiusY=0!==a?a:o,r&&s.close(),this.fc.segments.add(s)};var au=null;function ru(t,e){var i=t.toLowerCase(),n=qe.Je;n[t]=e,n[i]=t}function su(t){Ic.call(this,t),this.D=2408959,this.ah=this.If="",this.np=this.jp=this.zp=this.no=null,this.Bp="",this.Ef=this.Xn=this.Ap=this.mh=null,this.lp="",this.kp=$t,this.Tb=this.op="",this.ui=this.hn=this.di=null,this.$f=new pt(NaN,NaN).freeze(),this.uo="",this.Xe=null,this.vo=oe,this.pp=Ie,this.Eo=kt,this.wo=xt,this.An=null,this.oo=127,this.Fp=St,this.Ep="gray",this.df=4,this.Zw=-1,this.bq=NaN,this.Ay=new Vt,this.Fj=null,this.dh=NaN}function cu(t){0!=(16384&t.D)!=0&&(t.updateAdornments(),bu(t,!1))}function lu(t){if(!1===_u(t)){wu(t,!0),t.ll();var e=t.diagram;null!==e&&(e.od.add(t),e.Pb())}}function uu(t){if(t.D|=2097152,!1!==_u(t)){var e=t.position,i=t.location;i.v()&&e.v()||pu(t,e,i),i=t.vb;var n=Vt.alloc().assign(i);i.ea(),i.x=e.x,i.y=e.y,i.freeze(),t.Gt(n,i),Vt.free(n),wu(t,!1)}}function du(t,e){var i=t.Ay;isNaN(t.dh)&&(t.dh=zc(t));var n=t.dh,o=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+o,e.height+2+o),i;n=e.x,o=e.y;var a=e.width;e=e.height;var r=t.shadowBlur;return a+=r,e+=r,n-=r/2,o-=r/2,0<(t=t.shadowOffset).x?a+=t.x:(n+=t.x,a-=t.x),0<t.y?e+=t.y:(o+=t.y,e-=t.y),i.h(n-1,o-1,a+2,e+2),i}function hu(t,e,i,n){null===e||t instanceof Mu||(e=e.animationManager).Ze&&so(e,t,n.copy(),i.copy())}function pu(t,e,i){var n=pt.alloc(),o=t.locationSpot,a=t.locationObject;o.jc()&&_("determineOffset: Part's locationSpot must be real: "+o.toString());var r=a.naturalBounds,s=a instanceof al?a.strokeWidth:0;if(n.xk(0,0,r.width+s,r.height+s,o),a!==t)for(n.offset(-s/2,-s/2),a.transform.ra(n),o=a.panel;null!==o&&o!==t;)o.transform.ra(n),o=o.panel;t.Zf.ra(n),n.offset(-t.nc.x,-t.nc.y),o=t.diagram,a=i.v(),r=e.v(),a&&r?0!=(2097152&t.D)?fu(t,e,i,o,n):gu(t,e,i,o,n):a?fu(t,e,i,o,n):r&&gu(t,e,i,o,n),t.D|=2097152,pt.free(n),t.ll()}function fu(t,e,i,n,o){var a=e.x,r=e.y;e.h(i.x-o.x,i.y-o.y),null!==n&&((o=(i=n.animationManager).isAnimating)||!i.Ze||t instanceof Mu||so(i,t,new pt(a,r),e),o||e.x===a&&e.y===r||(i=n.skipsUndoManager,n.skipsUndoManager=!0,t.g("position",new pt(a,r),e),n.skipsUndoManager=i))}function gu(t,e,i,n,o){var a=i.copy();i.h(e.x+o.x,e.y+o.y),i.w(a)||null===n||(e=n.skipsUndoManager,n.skipsUndoManager=!0,t.g("location",a,i.copy()),n.skipsUndoManager=e)}function mu(t,e,i){yu(t,!1),t instanceof Ou&&Ga(i,t),t.layer.isTemporary||e||i.Na(),e=t.vb;var n=i.viewportBounds;n.v()?ku(t)?(Ht(e,n)||t.Ad(!1),t.updateAdornments()):e.Gc(n)?(t.Ad(!0),t.updateAdornments()):t.Lb():i.mi=!0}function vu(t,e,i,n){e.constructor===t.constructor||Pu||(Pu=!0,k('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),k("  Old class: "+O(t.constructor)+", new class: "+O(e.constructor)+", part: "+t.toString())),t.Yj();var o=t.data;i=t.layerName;var a=t.isSelected,r=t.isHighlighted,s=!0,c=!0,l=!1;t instanceof Ou&&(s=t.isTreeLeaf,c=t.isTreeExpanded,l=t.wasTreeExpanded),e.sf(t),e.cloneProtected(t),t.If=n,t.o(),t.M(),n=!0,null!==(e=t.diagram)&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.ib=o,t.D=a?4096|t.D:-4097&t.D,t.D=r?524288|t.D:-524289&t.D,t instanceof Ou&&(t.P=s?4|t.P:-5&t.P,t.P=c?1|t.P:-2&t.P,t.P=l?2|t.P:-3&t.P),null!==o&&t.Ba(),(o=t.layerName)!==i&&(t.ah=i,t.layerName=o),null!==e&&(e.skipsUndoManager=n),t.Wb()&&t.C(64)}function bu(t,e){t.D=e?16384|t.D:-16385&t.D}function _u(t){return 0!=(32768&t.D)}function wu(t,e){t.D=e?32768|t.D:-32769&t.D}function yu(t,e){t.D=e?65536|t.D:-65537&t.D}function ku(t){return 0!=(131072&t.D)}function xu(t,e){t.D=e?1048576|t.D:-1048577&t.D}function Su(t,e){var i=e.containingGroup;return null!==i?1+Su(t,i):e instanceof Ou&&null!==(e=e.labeledLink)?Su(t,e):0}function Tu(t,e){var i=e.containingGroup;return null!==i||e instanceof Ou&&null!==(i=e.labeledLink)?Tu(t,i):e}function Cu(t,e,i){if(e===i||null===i)return!1;var n=e.containingGroup;return!(null===n||n!==i&&!Cu(t,n,i))||e instanceof Ou&&null!==(e=e.labeledLink)&&Cu(t,e,i)}function Du(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function Iu(t,e,i,n,o,a){if(void 0===a&&(a=null),!(t.contains(e)||null!==a&&!a(e)||e instanceof Mu))if(t.add(e),e instanceof Ou){if(i&&e instanceof Ku)for(var r=e.memberParts;r.next();)Iu(t,r.value,i,n,o,a);if(!1!==o)for(r=e.linksConnected;r.next();){var s=r.value;if(!t.contains(s)){var c=s.fromNode,l=s.toNode;c=null===c||t.contains(c),l=null===l||t.contains(l),(o?c&&l:c||l)&&Iu(t,s,i,n,o,a)}}if(1<n)for(e=e.zv();e.next();)Iu(t,e.value,i,n-1,o,a)}else if(e instanceof id)for(e=e.labelNodes;e.next();)Iu(t,e.value,i,n,o,a)}Jl.className="StreamGeometryContext",ru("Rectangle",function(t,e,i){var n=qe.Mh[t="r"+e+","+i];return void 0!==n||((n=new Xe(ri)).endX=e,n.endY=i,50>qe.Nh&&(qe.Mh[t]=n,qe.Nh++)),n}),ru("Square",function(t,e,i){var n=qe.Mh[t="s"+e+","+i];return void 0!==n||((n=new Xe(ri)).endX=e,n.endY=i,n.defaultStretch=Za,50>qe.Nh&&(qe.Mh[t]=n,qe.Nh++)),n}),ru("RoundedRectangle",function(t,e,i){var n=t?t.parameter1:NaN;return(isNaN(n)||0>n)&&(n=5),n=Math.min(n,e/3),t=(n=Math.min(n,i/3))*qe.Fg,e=(new Xe).add(new li(n,0,!0).add(new ui(fi,e-n,0)).add(new ui(gi,e,n,e-t,0,e,t)).add(new ui(fi,e,i-n)).add(new ui(gi,e-n,i,e,i-t,e-t,i)).add(new ui(fi,n,i)).add(new ui(gi,0,i-n,t,i,0,i-t)).add(new ui(fi,0,n)).add(new ui(gi,n,0,0,t,t,0).close())),1<t&&(e.spot1=new Fe(0,0,t,t),e.spot2=new Fe(1,1,-t,-t)),e}),ru("Border","RoundedRectangle"),ru("Ellipse",function(t,e,i){var n=qe.Mh[t="e"+e+","+i];return void 0!==n||((n=new Xe(si)).endX=e,n.endY=i,n.spot1=Ae,n.spot2=Ve,50>qe.Nh&&(qe.Mh[t]=n,qe.Nh++)),n}),ru("Circle",function(t,e,i){var n=qe.Mh[t="c"+e+","+i];return void 0!==n||((n=new Xe(si)).endX=e,n.endY=i,n.spot1=Ae,n.spot2=Ve,n.defaultStretch=Za,50>qe.Nh&&(qe.Mh[t]=n,qe.Nh++)),n}),ru("TriangleRight",function(t,e,i){return(new Xe).add(new li(0,0).add(new ui(fi,e,.5*i)).add(new ui(fi,0,i).close())).Im(0,.25,.5,.75)}),ru("TriangleDown",function(t,e,i){return(new Xe).add(new li(0,0).add(new ui(fi,e,0)).add(new ui(fi,.5*e,i).close())).Im(.25,0,.75,.5)}),ru("TriangleLeft",function(t,e,i){return(new Xe).add(new li(e,i).add(new ui(fi,0,.5*i)).add(new ui(fi,e,0).close())).Im(.5,.25,1,.75)}),ru("TriangleUp",function(t,e,i){return(new Xe).add(new li(e,i).add(new ui(fi,0,i)).add(new ui(fi,.5*e,0).close())).Im(.25,.5,.75,1)}),ru("Triangle","TriangleUp"),ru("Diamond",function(t,e,i){return(new Xe).add(new li(.5*e,0).add(new ui(fi,0,.5*i)).add(new ui(fi,.5*e,i)).add(new ui(fi,e,.5*i).close())).Im(.25,.25,.75,.75)}),ru("LineH",function(t,e,i){return(t=new Xe(ai)).startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),ru("LineV",function(t,e,i){return(t=new Xe(ai)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),ru("None","Rectangle"),ru("BarH","Rectangle"),ru("BarV","Rectangle"),ru("MinusLine","LineH"),ru("PlusLine",function(t,e,i){return(new Xe).add(new li(0,i/2,!1).add(new ui(fi,e,i/2)).add(new ui(pi,e/2,0)).add(new ui(fi,e/2,i)))}),ru("XLine",function(t,e,i){return(new Xe).add(new li(0,i,!1).add(new ui(fi,e,0)).add(new ui(pi,0,0)).add(new ui(fi,e,i)))}),qe.Mm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},d(su,Ic),su.prototype.cloneProtected=function(t){Ic.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.If=this.If,t.ah=this.ah,t.no=this.no,t.zp=this.zp,t.jp=this.jp,t.np=this.np,t.Bp=this.Bp,t.Ap=this.Ap,t.Xn=this.Xn,t.Ef=null,t.lp=this.lp,t.kp=this.kp.G(),t.op=this.op,t.pp=this.pp.G(),t.Tb=this.Tb,t.hn=this.hn,t.$f.assign(this.$f),t.uo=this.uo,t.vo=this.vo.G(),t.Eo=this.Eo.G(),t.wo=this.wo.G(),t.An=this.An,t.oo=this.oo,t.Fp=this.Fp.G(),t.Ep=this.Ep,t.df=this.df,t.bq=this.bq},su.prototype.sf=function(t){Ic.prototype.sf.call(this,t),t.Gh(),t.mh=null,t.Xe=null,t.Fj=null},su.prototype.toString=function(){var t=O(this.constructor)+"#"+at(this);return null!==this.data&&(t+="("+$(this.data)+")"),t},su.prototype.vk=function(t,e,i,n,o,a,r){var s=this.diagram;null!==s&&(t===Si&&"elements"===e?o instanceof Ic?Lc(o,function(t){$h(s.partManager,t),Pa(s,t)}):Ma(s,o):t===Ti&&"elements"===e&&(o instanceof Ic?Lc(o,function(t){jh(s.partManager,t,s)}):Oa(s,o)),s.Ya(t,e,i,n,o,a,r))},su.prototype.Ba=function(t){if(Ic.prototype.Ba.call(this,t),null!==this.data){for(var e=this.V.j,i=e.length,n=0;n<i;n++){var o=e[n];o instanceof Ic&&Lc(o,function(t){null!==t.data&&t.Ba()})}for(e=this.adornments;e.next();)e.value.Ba(t)}},su.prototype.updateRelationshipsFromData=function(){null!==this.data&&this.diagram.partManager.updateRelationshipsFromData(this)},su.prototype.fk=function(t){var e=this.Ef;return null===e?null:e.H(t)},su.prototype.zh=function(t,e){if(null!==e){var i=null,n=this.Ef;if(null!==n&&(i=n.H(t)),i!==e){if(null!==i){var o=i.diagram;null!==o&&o.remove(i)}null===n&&(this.Ef=n=new ht),e.If!==t&&(e.category=t),n.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.Ui())&&(e.data=t.data))}}},su.prototype.zf=function(t){var e=this.Ef;if(null!==e){var i=e.H(t);if(null!==i){var n=i.diagram;null!==n&&n.remove(i)}e.remove(t),0===e.count&&(this.Ef=null)}},su.prototype.Yj=function(){var t=this.Ef;if(null!==t){var e=P();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.zf(e[i]);M(e)}},su.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var i=e.value;i.o(),i.placeholder&&i.placeholder.o()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.v()&&this.isVisible()&&e.yf()&&e.actualBounds.v()){if(null===(i=this.fk("Selection"))){if(null===(i=this.selectionAdornmentTemplate)&&(i=this.Hh()?t.linkSelectionAdornmentTemplate:this instanceof Ku?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Mu))break t;Hc(i),null!==(i=i.copy())&&(this.Hh()&&this.selectionObject===this.path&&(i.type=Ic.Link),i.adornedObject=e)}if(null!==i){i.type===Ic.Link&&i.o(),this.zh("Selection",i);break t}}this.zf("Selection")}for(function(t,e){e.toolManager.mouseDownTools.each(function(e){e.isEnabled&&e.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Ba()}},su.prototype.Lb=function(){var t=this.diagram;null!==t&&(pa(t),0!=(16384&this.D)!=1&&(bu(this,!0),t.Pb()))},su.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},su.prototype.moveTo=function(t,e,i){t=pt.allocAt(t,e),this.move(t,i),pt.free(t)},su.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.Ft(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},(i=su.prototype).Ob=function(t){var e=this.diagram;t?(this.C(4),this.Lb(),null!==e&&e.od.add(this)):(this.C(8),this.Yj()),this.Gh(),null!==e&&(e.Na(),e.M())},i.Xa=function(t){if(this.name===t)return this;var e=this.Fj;if(null===e&&(this.Fj=e=new ht),null!==e.H(t))return e.H(t);var i=Ic.prototype.Xa.call(this,t);return null!==i?(e.set(t,i),i):(e.set(t,null),null)},i.vf=function(t,e,i){void 0===i&&(i=new pt),e=e.jc()?ce:e;var n=t.naturalBounds;if(i.h(n.width*e.x+e.offsetX,n.height*e.y+e.offsetY),null===t||t===this)return i;for(t.transform.ra(i),t=t.panel;null!==t&&t!==this;)t.transform.ra(i),t=t.panel;return this.Zf.ra(i),i.offset(-this.nc.x,-this.nc.y),i},i.km=function(t){return void 0===t&&(t=new Vt),t.assign(this.actualBounds)},i.zb=function(){!0===hs(this)&&this.measure(1/0,1/0),this.arrange()},su.prototype.arrange=function(){if(!1===fs(this))uu(this);else{var t=this.vb,e=Vt.alloc();e.assign(t),t.ea();var i=ku(this);this.Ch(0,0,this.nc.width,this.nc.height);var n=this.position;pu(this,n,this.location),t.x=n.x,t.y=n.y,t.freeze(),this.Gt(e,t),gs(this,!1),e.w(t)?this.Ad(i):!this.Wb()||qe.A(e.width,t.width)&&qe.A(e.height,t.height)||0<=this.Zw&&this.C(16),Vt.free(e),wu(this,!1)}},(i=su.prototype).Gt=function(t,e){var i=this.diagram;if(null!==i){var n=!1;if(!1===i.ki&&t.v()){var o=Vt.alloc();o.assign(i.documentBounds),o.nw(i.padding),t.x>o.x&&t.y>o.y&&t.right<o.right&&t.bottom<o.bottom&&e.x>o.x&&e.y>o.y&&e.right<o.right&&e.bottom<o.bottom&&(n=!0),Vt.free(o)}0!=(65536&this.D)!=1&&t.w(e)||mu(this,n,i),i.M(),Rt(t,e)||(this instanceof Ou&&!i.undoManager.isUndoingRedoing&&this.fd(),this.Gh())}},i.kw=function(t,e){if(this.Hh()||!t.v())return!1;var i=this.diagram;if(null!==i&&(hu(this,i,t,e),!0===i.undoManager.isUndoingRedoing))return!0;if(this.ma=t,this.D&=-2097153,(i=this.$f).v()){var n=i.copy();i.h(i.x+(t.x-e.x),i.y+(t.y-e.y)),this.g("location",n,i.copy())}return!1===_u(this)&&!1===fs(this)&&(lu(this),uu(this)),!0},i.Lq=function(t,e,i){var n=this.$f,o=this.ma;if(i){if(n.x===t&&n.y===e)return;_u(this)||fs(this)?o.h(NaN,NaN):o.h(o.x+t-n.x,o.y+e-n.y),n.h(t,e)}else{if(o.x===t&&o.y===e)return;_u(this)||fs(this)?this.Qt():n.h(n.x+t-o.x,n.y+e-o.y),o.h(t,e)}lu(this)},i.Qt=function(){this.D&=-2097153,lu(this)},i.bj=function(){return!0},i.Wb=function(){return!0},i.Hh=function(){return!1},i.xf=function(){return!0},su.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},su.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},su.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},su.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},su.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},su.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},su.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},su.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},su.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(i=su.prototype).Ad=function(t){this.D=t?131072|this.D:-131073&this.D},i.Gh=function(){var t=this.containingGroup;null!==t&&(t.o(),null!==t.placeholder&&t.placeholder.o(),t.fd())},i.M=function(){var t=this.diagram;null!==t&&!fs(this)&&!_u(this)&&this.isVisible()&&this.vb.v()&&t.M(du(this,this.vb))},i.o=function(){Ic.prototype.o.call(this);var t=this.diagram;null!==t&&(t.od.add(this),this instanceof Ou&&null!==this.labeledLink&&ns(this.labeledLink),t.Pb(!0))},i.rq=function(t){t||null!==(t=this.di)&&Zu(t,this)},i.sq=function(t){t||null!==(t=this.di)&&Ju(t,this)},i.dk=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.zm(t)}},i.sz=function(){return Su(this,this)},i.wz=function(){return Tu(this,this)},i.Xd=function(t){return t instanceof Ku&&Cu(this,this,t)},i.Kx=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof Ku&&xu(e,!0),e instanceof Ou){var i=e.labeledLink;null!==i&&(e=i)}e=e.containingGroup}for(i=null,e=t;null!==e;){if(0!=(1048576&e.D)){i=e;break}e instanceof Ou&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof Ku&&xu(e,!1),e instanceof Ou&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return i},su.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof Ou&&this.isLinkLabel)},su.prototype.C=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof Ou&&this.isLinkLabel||null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.di)){var i=e.layout;null!==i?i.C():e.C(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.C()},h.Object.defineProperties(su.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.ja(this.data)}},adornments:{get:function(){return null===this.Ef?G:this.Ef.iteratorValues}},layer:{get:function(){return this.ui}},diagram:{get:function(){var t=this.ui;return null!==t?t.diagram:null}},layerName:{get:function(){return this.ah},set:function(t){var e=this.ah;if(e!==t){var i=this.diagram;if((null===i||null!==i.hm(t)&&!i.partManager.addsToTemporaryLayer)&&(this.ah=t,null!==i&&i.Na(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(i=e.diagram)&&null!==(t=i.hm(t))&&t!==e)){var n=e.Fc(-1,this,!0);if(0<=n&&i.Ya(Ti,"parts",e,this,null,n,!0),n=t.aj(99999999,this,!0),e.visible!==t.visible&&this.Ob(t.visible),0<=n&&i.Ya(Si,"parts",t,null,this,!0,n),null!==(n=this.layerChanged)){var o=i.Z;i.Z=!0,n(this,e,t),i.Z=o}}}}},layerChanged:{get:function(){return this.no},set:function(t){var e=this.no;e!==t&&(this.no=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.bq},set:function(t){var e=this.bq;if(e!==t){this.bq=t;var i=this.layer;null!==i&&Lo(i,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.M()}}},locationObject:{get:function(){if(null===this.Xe){var t=this.locationObjectName;""!==t?(t=this.Xa(t),this.Xe=null!==t?t:this):this.Xe=this instanceof Mu&&this.type!==Ic.Link&&null!==this.placeholder?this.placeholder:this}return this.Xe.visible?this.Xe:this}},minLocation:{get:function(){return this.Eo},set:function(t){var e=this.Eo;e.w(t)||(this.Eo=t=t.G(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.wo},set:function(t){var e=this.wo;e.w(t)||(this.wo=t=t.G(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.uo},set:function(t){var e=this.uo;e!==t&&(this.uo=t,this.Xe=null,this.o(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.vo},set:function(t){var e=this.vo;e.w(t)||(this.vo=t=t.G(),this.o(),this.g("locationSpot",e,t))}},location:{get:function(){return this.$f},set:function(t){var e=t.x,i=t.y,n=this.$f,o=n.x,a=n.y;(o===e||isNaN(o)&&isNaN(e))&&(a===i||isNaN(a)&&isNaN(i))||(o=t=t.copy(),this.Hh()?e=!1:(this.$f=o,this.D|=2097152,!1===fs(this)&&(lu(this),(e=this.ma).v()&&(i=e.copy(),e.h(e.x+(o.x-n.x),e.y+(o.y-n.y)),hu(this,this.diagram,e,i),null!==(o=this.diagram)?(a=o.skipsUndoManager,o.skipsUndoManager=!0,this.g("position",i,e),o.skipsUndoManager=a):this.g("position",i,e))),e=!0),e&&this.g("location",n.copy(),t.copy()))}},category:{get:function(){return this.If},set:function(t){var e=this.If;if(e!==t){var i=this.diagram,n=this.data,o=null;if(null!==i&&null!==n&&!(this instanceof Mu)){var a=i.model.undoManager;a.isEnabled&&!a.isUndoingRedoing&&(o=this.clone()).V.addAll(this.V)}this.If=t,this.g("category",e,t),null===i||null===n||this instanceof Mu?this instanceof Mu&&null!==(o=this.adornedPart)&&(null!==(t=o.Ef)&&t.remove(e),o.zh(this.category,this)):(a=i.model).undoManager.isUndoingRedoing||(this.Hh()?(i.partManager.setLinkCategoryForData(n,t),null!==(i=i.partManager.findLinkTemplateForCategory(t))&&(Hc(i),null!==(i=i.copy())&&vu(this,i,e,t))):(null!==a&&a.Kq(n,t),null!==(i=Ph(i.partManager,n,t))&&(Hc(i),null===(i=i.copy())||i instanceof id||(n=this.location.copy(),vu(this,i,e,t),this.location.v()||(this.location=n)))),null!==o&&((e=this.clone()).V.addAll(this.V),this.g("self",o,e)))}}},self:{get:function(){return this},set:function(t){vu(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.D)},set:function(t){var e=0!=(1&this.D);e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.D)},set:function(t){var e=0!=(2&this.D);e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.D)},set:function(t){var e=0!=(4&this.D);e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Lb())}},groupable:{get:function(){return 0!=(8&this.D)},set:function(t){var e=0!=(8&this.D);e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.D)},set:function(t){var e=0!=(16&this.D);e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.D)},set:function(t){var e=0!=(32&this.D);e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Lb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.D)},set:function(t){var e=0!=(64&this.D);if(e!==t){this.D^=64;var i=this.diagram;null!==i&&i.Na(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.D)},set:function(t){var e=0!=(128&this.D);e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return 0!=(256&this.D)},set:function(t){var e=0!=(256&this.D);e!==t&&(this.D^=256,this.g("selectable",e,t),this.Lb())}},reshapable:{get:function(){return 0!=(512&this.D)},set:function(t){var e=0!=(512&this.D);e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Lb())}},resizable:{get:function(){return 0!=(1024&this.D)},set:function(t){var e=0!=(1024&this.D);e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Lb())}},rotatable:{get:function(){return 0!=(2048&this.D)},set:function(t){var e=0!=(2048&this.D);e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Lb())}},isSelected:{get:function(){return 0!=(4096&this.D)},set:function(t){var e=0!=(4096&this.D);if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.maxSelectionCount)){this.D^=4096;var n=!1;if(null!==i){n=i.skipsUndoManager,i.skipsUndoManager=!0;var o=i.selection;o.ea(),t?o.add(this):o.remove(this),o.freeze()}this.g("isSelected",e,t),this.Lb(),null!==(t=this.selectionChanged)&&t(this),null!==i&&(i.Pb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return 0!=(524288&this.D)},set:function(t){var e=0!=(524288&this.D);if(e!==t){this.D^=524288;var i=this.diagram;null!==i&&((i=i.highlighteds).ea(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.M(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.D)},set:function(t){var e=0!=(8192&this.D);e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.M())}},isAnimated:{get:function(){return 0!=(262144&this.D)},set:function(t){var e=0!=(262144&this.D);e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.Xn},set:function(t){var e=this.Xn;e!==t&&(this.Xn=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.Bp},set:function(t){var e=this.Bp;e!==t&&(this.Bp=t,this.mh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.mh){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.Xa(t),this.mh=null!==t?t:this):this.mh=this instanceof id&&null!==(t=this.path)?t:this}return this.mh}},selectionChanged:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e!==t&&(this.Ap=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.jp},set:function(t){var e=this.jp;e!==t&&(this.jp=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(this.lp=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.Xa(t))?t:this}},resizeCellSize:{get:function(){return this.kp},set:function(t){var e=this.kp;e.w(t)||(this.kp=t=t.G(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.op},set:function(t){var e=this.op;e!==t&&(this.op=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.Xa(t))?t:this}},rotationSpot:{get:function(){return this.pp},set:function(t){var e=this.pp;e.w(t)||(this.pp=t=t.G(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Tb},set:function(t){var e=this.Tb;e!==t&&(this.Tb=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.di},set:function(t){if(this.Wb()){var e=this.di;if(e!==t){null===t||this!==t&&!t.Xd(this)||(this===t&&_("Cannot make a Group a member of itself: "+this.toString()),_("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var i=this.diagram;if(null!==e?Ju(e,this):this instanceof Ku&&null!==i&&i.wh.remove(this),this.di=t,null!==t?Zu(t,this):this instanceof Ku&&null!==i&&i.wh.add(this),this.C(1),null!==i&&i.Z){var n=this.data,o=i.model;if(null!==n&&o.jk()){var a=o.ja(null!==t?t.data:null);o.Ot(n,a)}}if(null!==(n=this.containingGroupChanged)&&(o=!0,null!==i&&(o=i.Z,i.Z=!0),n(this,e,t),null!==i&&(i.Z=o)),this instanceof Ku)for(Iu(i=new it,this,!0,0,!0),i=i.iterator;i.next();)if((n=i.value)instanceof Ou)for(n=n.linksConnected;n.next();)nd(n.value);if(this instanceof Ou){for(i=this.linksConnected;i.next();)nd(i.value);null!==(i=this.labeledLink)&&nd(i)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&Lo(e,-1,t)}}else _("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof Ou&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.An},set:function(t){var e=this.An;e!==t&&(this.An=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.Fp},set:function(t){var e=this.Fp;e.w(t)||(this.Fp=t=t.G(),this.M(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Ep},set:function(t){var e=this.Ep;e!==t&&(this.Ep=t,this.M(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.df},set:function(t){var e=this.df;e!==t&&(this.df=t,this.M(),this.g("shadowBlur",e,t))}}}),su.prototype.invalidateLayout=su.prototype.C,su.prototype.findCommonContainingGroup=su.prototype.Kx,su.prototype.isMemberOf=su.prototype.Xd,su.prototype.findTopLevelPart=su.prototype.wz,su.prototype.findSubGraphLevel=su.prototype.sz,su.prototype.ensureBounds=su.prototype.zb,su.prototype.getDocumentBounds=su.prototype.km,su.prototype.getRelativePoint=su.prototype.vf,su.prototype.findObject=su.prototype.Xa,su.prototype.moveTo=su.prototype.moveTo,su.prototype.invalidateAdornments=su.prototype.Lb,su.prototype.clearAdornments=su.prototype.Yj,su.prototype.removeAdornment=su.prototype.zf,su.prototype.addAdornment=su.prototype.zh,su.prototype.findAdornment=su.prototype.fk,su.prototype.updateTargetBindings=su.prototype.Ba;var Pu=!1;function Mu(t){su.call(this,t),this.D&=-257,this.ah="Adornment",this.ce=null,this.ex=0,this.tx=!1,this.l=[],this.Ra=null}function Ou(t){su.call(this,t),this.P=13,this.Wa=new tt,this.Xp=this.ql=this.xi=this.qo=this.po=null,this.Ik=ie,this.rc=this.Me=null,this.gp=Xu,this.xh=!1}function $u(t,e){null!==e&&(null===t.Me&&(t.Me=new it),t.Me.add(e))}function ju(t,e,i,n){if(null===e||null===t.Me)return null;for(var o=t.Me.iterator;o.next();){var a=o.value;if(a.Dt===t&&a.Qv===e&&a.ay===i&&a.by===n||a.Dt===e&&a.Qv===t&&a.ay===n&&a.by===i)return a}return null}function Lu(t,e){for(var i=t.linksConnected;i.next();){var n=i.value;n.fromPort!==e&&n.toPort!==e||(Eu(t,n.fromPort),Eu(t,n.toPort),n.Ta())}}function Eu(t,e){null!==e&&(null!==(e=e.fp)&&e.mm(),null===(t=t.containingGroup)||t.isSubGraphExpanded||Eu(t,t.port))}function Nu(t,e,i,n){if(!i.has(e)){i.add(e);var o=!0,a=t.diagram;null!==a&&(o=a.isTreePathToChildren),e.linksConnected.each(function(a){a.isTreeLink?(o?a.fromNode===e:a.toNode===e)&&Nu(t,o?a.toNode:a.fromNode,i,n):n.add(a)})}}function Au(t,e,i){Eu(t,i);var n=t.Wa.contains(e);if(n||t.Wa.add(e),!n||e.fromNode===e.toNode){var o=t.linkConnected;if(null!==o){var a=!0,r=t.diagram;null!==r&&(a=r.Z,r.Z=!0),o(t,e,i),null!==r&&(r.Z=a)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,null!==i&&null!==e&&i!==e&&(n=!0,null!==(t=t.diagram)&&(n=t.isTreePathToChildren),a=n?i:e,(o=n?e:i).xh||(o.xh=a),!a.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(n?i===a&&(a.isTreeLeaf=!1):e===a&&(a.isTreeLeaf=!1))))}function Vu(t,e,i){Eu(t,i);var n=t.Wa.remove(e),o=null;if(n||e.toNode===e.fromNode){var a=t.linkDisconnected;if(o=t.diagram,null!==a){var r=!0;null!==o&&(r=o.Z,o.Z=!0),a(t,e,i),null!==o&&(o.Z=r)}}n&&e.isTreeLink&&(i=!0,null!==o&&(i=o.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,null!==t&&(t.xh=!1),null===e||e.isTreeLeaf||(0===e.Wa.count?(e.xh=null,null!==o&&o.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):zu(e)))}function zu(t){if(t.xh=!1,0!==t.Wa.count){var e=!0,i=t.diagram;if(null===i||!i.undoManager.isUndoingRedoing){for(null!==i&&(e=i.isTreePathToChildren),i=t.Wa.iterator;i.next();){var n=i.value;if(n.isTreeLink)if(e){if(n.fromNode===t)return void(t.isTreeLeaf=!1)}else if(n.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function Fu(t){null===t.rc?t.rc=new ht:t.rc.clear(),t.Jm(t,function(t,e){Bu(t,e)}),0===t.rc.count&&t.rc.add("",t)}function Bu(t,e){var i=e.portId;null!==i&&null!==t.rc&&t.rc.add(i,e)}function Ru(t,e,i){var n=e.portId;if(null!==n&&(null!==t.rc&&t.rc.remove(n),null!==(e=t.diagram)&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,null===i&&(i=P()),i.push(n);if(null!==i){for(t=0;t<i.length;t++)e.remove(i[t]);M(i)}}}function Uu(t,e){return null===(e=e.yg())?0:1+Uu(t,e)}function Gu(t,e,i,n,o,a,r){if(1<n)for(var s=i?t.mq():t.xd();s.next();){var c=s.value;c.isTreeLink&&(null===(c=c.rt(t))||c===t||e.contains(c)||(e.add(c),Gu(c,e,i,n-1,o,a,r)))}else Hu(t,e,i,o,a,r)}function Hu(t,e,i,n,o,a){for(var r=o===t||t.isTreeExpanded,s=i?t.mq():t.xd();s.next();){var c=s.value;if(c.isTreeLink&&null!==(c=c.rt(t))&&c!==t){var l=e.contains(c);l||e.add(c),r&&(a&&n.Tj(c,o),c.Gh(),c.Ob(!1)),c.isTreeExpanded&&(c.wasTreeExpanded=c.isTreeExpanded,l||Hu(c,e,i,n,o,a))}}t.isTreeExpanded=!1}function Wu(t,e,i,n,o,a,r){for(var s=a!==t&&t.isTreeExpanded,c=i?t.mq():t.xd();c.next();){var l=c.value;l.isTreeLink&&(s||l.ld||l.Ta(),null!==(l=l.rt(t))&&l!==t&&!e.contains(l)&&(e.add(l),s||(l.Ob(!0),l.Gh(),r&&o.Vj(l,a)),2<n||l.wasTreeExpanded))&&(l.wasTreeExpanded=!1,Wu(l,e,i,n-1,o,a,r))}t.isTreeExpanded=!0}su.className="Part",su.LayoutNone=0,su.LayoutAdded=1,su.LayoutRemoved=2,su.LayoutShown=4,su.LayoutHidden=8,su.LayoutNodeSized=16,su.LayoutGroupLayout=32,su.LayoutNodeReplaced=64,su.LayoutStandard=127,su.LayoutAll=16777215,d(Mu,su),Mu.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Mu.prototype.updateRelationshipsFromData=function(){},Mu.prototype.nk=function(t){var e=this.adornedObject.part;if(e instanceof id&&this.adornedObject instanceof al){var i=e.path;e.nk(t),t=i.geometry,i=(e=this.V.j).length;for(var n=0;n<i;n++){var o=e[n];o.isPanelMain&&o instanceof al&&(o.ka=t)}}},Mu.prototype.bj=function(){var t=this.ce;return null===t||null===(t=t.part)||!fs(t)},Mu.prototype.Wb=function(){return!1},Mu.prototype.vk=function(t,e,i,n,o,a,r){if(t===Si&&"elements"===e){if(o instanceof ed)null===this.Ra&&(this.Ra=o);else if(o instanceof Ic){var s=o.gm(function(t){return t instanceof ed});s instanceof ed&&null===this.Ra&&(this.Ra=s)}}else t===Ti&&"elements"===e&&null!==this.Ra&&(n===this.Ra||n instanceof Ic&&this.Ra.Ag(n))&&(this.Ra=null);su.prototype.vk.call(this,t,e,i,n,o,a,r)},Mu.prototype.updateAdornments=function(){},Mu.prototype.dk=function(){},h.Object.defineProperties(Mu.prototype,{placeholder:{get:function(){return this.Ra}},adornedObject:{get:function(){return this.ce},set:function(t){var e=this.adornedPart,i=null;null!==t&&(i=t.part),null===e||null!==t&&e===i||e.zf(this.category),this.ce=t,null!==i&&i.zh(this.category,this)}},adornedPart:{get:function(){var t=this.ce;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),Mu.className="Adornment",d(Ou,su),Ou.prototype.cloneProtected=function(t){su.prototype.cloneProtected.call(this,t),t.P=this.P,t.P=-17&this.P,t.po=this.po,t.qo=this.qo,t.xi=this.xi,t.Xp=this.Xp,t.Ik=this.Ik.G(),t.gp=this.gp},(i=Ou.prototype).sf=function(t){su.prototype.sf.call(this,t),t.fd(),t.Me=this.Me,t.rc=null},i.Vz=function(t,e,i){null==e&&(e=""),null==i&&(i=""),null!==(t=ju(this,t,e,i))&&t.mm()},i.vk=function(t,e,i,n,o,a,r){(t===Si&&"elements"===e||t===Ti&&"elements"===e)&&(this.rc=null),su.prototype.vk.call(this,t,e,i,n,o,a,r)},i.fd=function(t){void 0===t&&(t=null);for(var e=this.linksConnected;e.next();){var i=e.value;null!==t&&t.contains(i)||(Eu(this,i.fromPort),Eu(this,i.toPort),i.Ta())}},i.bj=function(){return!0},Ou.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.eq(this.Ik),t},Ou.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},Ou.prototype.isVisible=function(){if(!su.prototype.isVisible.call(this))return!1;var t=!0,e=xr,i=this.diagram;if(null!==i){if(i.animationManager.Ft(this))return!0;t=i.isTreePathToChildren,e=i.treeCollapsePolicy}if(e===xr){if(null!==(t=this.yg())&&!t.isTreeExpanded)return!1}else if(e===Sr){if(0<(t=t?this.wv():this.xv()).count&&t.all(function(t){return!t.isTreeExpanded}))return!1}else if(e===Tr&&0<(t=t?this.wv():this.xv()).count&&t.any(function(t){return!t.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},Ou.prototype.Ob=function(t){su.prototype.Ob.call(this,t);for(var e=this.linksConnected;e.next();)e.value.Ob(t)},Ou.prototype.Lx=function(){var t=new it,e=new it;return Nu(this,this,t,e),e.iterator},Ou.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.Wa.iterator;var e=new J(this.Wa),i=this;return e.predicate=function(e){return e.fromNode===i&&e.fromPortId===t||e.toNode===i&&e.toPortId===t},e},(i=Ou.prototype).mq=function(t){void 0===t&&(t=null);var e=new J(this.Wa),i=this;return e.predicate=function(e){return e.fromNode===i&&(null===t||e.fromPortId===t)},e},i.xd=function(t){void 0===t&&(t=null);var e=new J(this.Wa),i=this;return e.predicate=function(e){return e.toNode===i&&(null===t||e.toPortId===t)},e},i.vv=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.Wa.iterator;n.next();){var o=n.value;o.fromNode===this?null!==t&&o.fromPortId!==t||(o=o.toNode,null!==e?e.add(o):null!==i&&i!==o?((e=new it).add(i),e.add(o)):i=o):o.toNode!==this||null!==t&&o.toPortId!==t||(o=o.fromNode,null!==e?e.add(o):null!==i&&i!==o?((e=new it).add(i),e.add(o)):i=o)}return null!==e?e.iterator:null!==i?new Z(i):G},i.xv=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.Wa.iterator;n.next();){var o=n.value;o.fromNode!==this||null!==t&&o.fromPortId!==t||(o=o.toNode,null!==e?e.add(o):null!==i&&i!==o?((e=new it).add(i),e.add(o)):i=o)}return null!==e?e.iterator:null!==i?new Z(i):G},i.wv=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.Wa.iterator;n.next();){var o=n.value;o.toNode!==this||null!==t&&o.toPortId!==t||(o=o.fromNode,null!==e?e.add(o):null!==i&&i!==o?((e=new it).add(i),e.add(o)):i=o)}return null!==e?e.iterator:null!==i?new Z(i):G},i.nz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new J(this.Wa),o=this;return n.predicate=function(n){return!(n.fromNode!==o||n.toNode!==t||null!==e&&n.fromPortId!==e||null!==i&&n.toPortId!==i)||!(n.fromNode!==t||n.toNode!==o||null!==i&&n.fromPortId!==i||null!==e&&n.toPortId!==e)},n},i.oz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new J(this.Wa),o=this;return n.predicate=function(n){return!(n.fromNode!==o||n.toNode!==t||null!==e&&n.fromPortId!==e||null!==i&&n.toPortId!==i)},n},Ou.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(i=Ou.prototype).rq=function(t){su.prototype.rq.call(this,t),t||(zu(this),null!==(t=this.ql)&&od(t,this))},i.sq=function(t){su.prototype.sq.call(this,t),t||null!==(t=this.ql)&&null!==t.ad&&(t.ad.remove(this),t.o())},i.dk=function(){if(0<this.Wa.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,i=this.Wa.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,su.prototype.dk.call(this)},i.nt=function(t){if(null===this.rc){if(""===t&&!1===this.Fh)return this;Fu(this)}var e=this.rc.H(t);return null!==e||""!==t&&null!==(e=this.rc.H(""))?e:this},i.Xz=function(t){if(null===t||t===this)return!1;var e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.Wa.iterator;n.next();){var o=n.value;if(o.isTreeLink&&(e=o.fromNode)!==i&&e!==this)break}if(e===this||null===e||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.Wa.iterator;n.next()&&(!(o=n.value).isTreeLink||(e=o.toNode)===i||e===this););if(e===this||null===e||e===i)return!1;i=e}return!0},i.Az=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.Wa.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,i=e.Wa.iterator;i.next()&&(!(n=i.value).isTreeLink||(t=n.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},i.kz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)xu(e,!0),e=e.yg();var i=null;for(e=t;null!==e;){if(0!=(1048576&e.D)){i=e;break}e=e.yg()}for(e=this;null!==e;)xu(e,!1),e=e.yg();return i},i.Vi=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.Wa.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},i.yg=function(){var t=this.xh;if(null===t)return null;if(t instanceof Ou)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.Wa.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.xh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.xh=e;return this.xh=null},i.yz=function(){var t=new it;return function t(e,i){if(null!==e){i.add(e);var n=e.Vi();null!==n&&(i.add(n),t(e.yg(),i))}}(this,t),t},i.xz=function(){return Uu(this,this)},i.oq=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new J(this.Wa);var i=this;return e.predicate=t?function(t){return!(!t.isTreeLink||t.fromNode!==i)}:function(t){return!(!t.isTreeLink||t.toNode!==i)},e},i.zv=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var i=e=null,n=this.Wa.iterator;if(t)for(;n.next();)(t=n.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==i&&i!==t?((e=new tt).add(i),e.add(t)):i=t);else for(;n.next();)(t=n.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==i&&i!==t?((e=new tt).add(i),e.add(t)):i=t);return null!==e?e.iterator:null!==i?new Z(i):G},i.zz=function(t){void 0===t&&(t=1/0);var e=new it;return Iu(e,this,!1,t,!0),e},Ou.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ee){e.Ee=!0;var i=new it;i.add(this),Gu(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===xr),e.Ee=!1}},Ou.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ee){e.Ee=!0;var i=new it;i.add(this),Wu(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===xr),e.Ee=!1}},h.Object.defineProperties(Ou.prototype,{portSpreading:{get:function(){return this.gp},set:function(t){var e=this.gp;e!==t&&(this.gp=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.fd())}},avoidable:{get:function(){return 0!=(8&this.P)},set:function(t){var e=0!=(8&this.P);if(e!==t){this.P^=8;var i=this.diagram;null!==i&&Ga(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Ik},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.Ik;if(!e.w(t)){this.Ik=t=t.G();var i=this.diagram;null!==i&&Ga(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.Wa.iterator}},linkConnected:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.qo},set:function(t){var e=this.qo;e!==t&&(this.qo=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.xi},set:function(t){var e=this.xi;e!==t&&(this.xi=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.ql}},labeledLink:{get:function(){return this.ql},set:function(t){var e=this.ql;if(e!==t){var i=this.diagram,n=this.data;if(null!==e){if(null!==e.ad&&(e.ad.remove(this),e.o()),null!==i&&null!==n&&!i.undoManager.isUndoingRedoing){var o=e.data,a=i.model;if(null!==o&&a.om()){var r=a.ja(n);void 0!==r&&a.ey(o,r)}}this.containingGroup=null}this.ql=t,null!==t&&(od(t,this),null===i||null===n||i.undoManager.isUndoingRedoing||(i=i.model,null!==(o=t.data)&&i.om()&&void 0!==(n=i.ja(n))&&i.hv(o,n)),this.containingGroup=t.containingGroup),ns(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.nt("")}},ports:{get:function(){return null===this.rc&&Fu(this),this.rc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.P)},set:function(t){var e=0!=(1&this.P);if(e!==t){this.P^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var n=!0;null!==i&&(n=i.Z,i.Z=!0),e(this),null!==i&&(i.Z=n)}null!==i&&i.undoManager.isUndoingRedoing?this.Ob(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.P)},set:function(t){var e=0!=(2&this.P);e!==t&&(this.P^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Xp},set:function(t){var e=this.Xp;e!==t&&(this.Xp=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.P)},set:function(t){var e=0!=(4&this.P);e!==t&&(this.P^=4,this.g("isTreeLeaf",e,t))}}}),Ou.prototype.expandTree=Ou.prototype.expandTree,Ou.prototype.collapseTree=Ou.prototype.collapseTree,Ou.prototype.findTreeParts=Ou.prototype.zz,Ou.prototype.findTreeChildrenNodes=Ou.prototype.zv,Ou.prototype.findTreeChildrenLinks=Ou.prototype.oq,Ou.prototype.findTreeLevel=Ou.prototype.xz,Ou.prototype.findTreeParentChain=Ou.prototype.yz,Ou.prototype.findTreeParentNode=Ou.prototype.yg,Ou.prototype.findTreeParentLink=Ou.prototype.Vi,Ou.prototype.findCommonTreeParent=Ou.prototype.kz,Ou.prototype.findTreeRoot=Ou.prototype.Az,Ou.prototype.isInTreeOf=Ou.prototype.Xz,Ou.prototype.findPort=Ou.prototype.nt,Ou.prototype.findLinksTo=Ou.prototype.oz,Ou.prototype.findLinksBetween=Ou.prototype.nz,Ou.prototype.findNodesInto=Ou.prototype.wv,Ou.prototype.findNodesOutOf=Ou.prototype.xv,Ou.prototype.findNodesConnected=Ou.prototype.vv,Ou.prototype.findLinksInto=Ou.prototype.xd,Ou.prototype.findLinksOutOf=Ou.prototype.mq,Ou.prototype.findExternalTreeLinksConnected=Ou.prototype.Lx,Ou.prototype.invalidateConnectedLinks=Ou.prototype.fd,Ou.prototype.invalidateLinkBundle=Ou.prototype.Vz;var qu=new W(Ou,"SpreadingNone",10),Xu=new W(Ou,"SpreadingEvenly",11),Yu=new W(Ou,"SpreadingPacked",12);function Ku(t){Ou.call(this,t),this.P|=4608,this.Ao=new it,this.yl=new it,this.Ra=this.Op=this.yi=this.Bo=this.zo=null,this.ic=new rh,this.ic.group=this}function Zu(t,e){if(t.Ao.add(e)){e instanceof Ku&&t.yl.add(e);var i=t.memberAdded;if(null!==i){var n=!0,o=t.diagram;null!==o&&(n=o.Z,o.Z=!0),i(t,e),null!==o&&(o.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!1)}e instanceof id&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function Ju(t,e){if(t.Ao.remove(e)){e instanceof Ku&&t.yl.remove(e);var i=t.memberRemoved;if(null!==i){var n=!0,o=t.diagram;null!==o&&(n=o.Z,o.Z=!0),i(t,e),null!==o&&(o.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!0)}e instanceof id&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function Qu(t,e,i,n){for(var o=t.memberParts;o.next();){var a=o.value;if(a.Ob(!1),a instanceof Ku&&a.isSubGraphExpanded&&(a.wasSubGraphExpanded=a.isSubGraphExpanded,Qu(a,e,i,n)),a instanceof Ou)a.fd(e),i.Tj(a,n);else if(a instanceof id)for(a=a.labelNodes;a.next();)a.value.fd(e)}t.isSubGraphExpanded=!1}function td(t,e,i,n){for(var o=t.memberParts;o.next();){var a=o.value;if(a.Ob(!0),a instanceof Ku&&a.wasSubGraphExpanded&&(a.wasSubGraphExpanded=!1,td(a,e,i,n)),a instanceof Ou)a.fd(e),i.Vj(a,n);else if(a instanceof id)for(a=a.labelNodes;a.next();)a.value.fd(e)}t.isSubGraphExpanded=!0}function ed(){qr.call(this),this.cb=ee,this.vp=new Vt(NaN,NaN,NaN,NaN)}function id(){su.call(this,Ic.Link),this.Pa=8,this.Qe=null,this.Re="",this.lf=this.Nn=null,this.mf="",this.Wp=null,this.Dk=Cd,this.pn=0,this.rn=Cd,this.sn=NaN,this.Lj=kd,this.Jp=.5,this.ad=null,this.xb=(new tt).freeze(),this.lh=this.gh=null,this.Dl=new Vt,this.ka=new Xe,this.Zn=!0,this.I=this.u=this.Hf=this.Qf=null,this.l=[],this.Zu=new pt,this.Hr=this.ox=this.nx=null,this.tu=NaN,this.O=null}function nd(t){var e,i=t.fromNode,n=t.toNode;if(e=null!==i?null!==n?i.Kx(n):i.containingGroup:null!==n?n.containingGroup:null,(n=t.di)!==(i=e)){null!==n&&Ju(n,t),t.di=i,null!==i&&Zu(i,t);var o=t.containingGroupChanged;if(null!==o){var a=!0,r=t.diagram;null!==r&&(a=r.Z,r.Z=!0),o(t,n,i),null!==r&&(r.Z=a)}!t.ld||t.nx!==n&&t.ox!==n||t.Ta()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=e}function od(t,e){null===t.ad&&(t.ad=new it),t.ad.add(e),t.o()}function ad(t,e,i){if(0!==e||0!==i){for(var n=t.ld,o=new tt,a=t.xb.iterator;a.next();){var r=a.value;o.add(new pt(r.x+e,r.y+i).freeze())}o.freeze(),a=t.xb,t.xb=o,r=t.diagram,isNaN(e)||isNaN(i)||null!==r&&r.animationManager.qc?t.o():(t.$f.h(t.$f.x+e,t.$f.y+i),t.ma.h(t.ma.x+e,t.ma.y+i),ns(t)),n&&rd(t),null!==r&&r.animationManager.qc&&(t.lh=o),t.g("points",a,o)}}function rd(t){0===t.xb.count?t.ld=!1:(t.ld=!0,t.Hr=null,t.tu=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),bd(t,!1))}function sd(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function cd(t,e){var i=e.fp;return null===i&&((i=new eh).port=e,i.node=e.part,e.fp=i),nh(i,t)}function ld(t){return t===ne||.5===t.x&&.5===t.y}function ud(t){if(null===t.diagram||!t.isAvoiding||!Ba(t.diagram))return!1;var e=t.points.j,i=e.length;if(4>i)return!1;t=Ra(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var o=e[n],a=e[n+1];if(!t.lk(Math.min(o.x,a.x),Math.min(o.y,a.y),Math.abs(o.x-a.x),Math.abs(o.y-a.y)))return!0}return!1}function dd(t,e,i,n,o,a){var r=e.cm,s=e.bm,c=Gd(e,i,n),l=i,u=n;for(0===o?l+=r:90===o?u+=s:180===o?l-=r:u-=s;c>Jd&&Gd(e,l,u)===c-1;)i=l,n=u,0===o?l+=r:90===o?u+=s:180===o?l-=r:u-=s,--c;a?c>Jd&&(180===o||0===o?i=Math.floor(i/r)*r+r/2:90!==o&&270!==o||(n=Math.floor(n/s)*s+s/2)):(i=Math.floor(i/r)*r+r/2,n=Math.floor(n/s)*s+s/2),c>Jd&&(a=o,l=i,u=n,0===o?(a=90,u+=s):90===o?(a=180,l-=r):180===o?(a=270,u-=s):270===o&&(a=0,l+=r),Gd(e,l,u)===c-1?dd(t,e,l,u,a,!1):(l=i,u=n,0===o?(a=270,u-=s):90===o?(a=0,l+=r):180===o?(a=90,u+=s):270===o&&(a=180,l-=r),Gd(e,l,u)===c-1&&dd(t,e,l,u,a,!1))),t.qf(i,n)}function hd(t,e,i,n){return t=i-t,isNaN(t)||1/0===t||-1/0===t?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||1/0===e||-1/0===e?NaN:(0>e&&(e=-e),qe.$(t,0)?e:qe.$(e,0)?t:Math.sqrt(t*t+e*e)))}function pd(t,e,i,n){var o=t.pointsCount;if(2>o)return e;if(i){var a=t.i(1);if(0===(n=hd(e.x,e.y,i=a.x-n.x,a=a.y-n.y)))return e;o=2===o?.5*n:n,(t=t.computeShortLength(!0))>o&&(t=o),o=t*(a-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=o}else{if(a=t.i(o-2),0===(n=hd(e.x,e.y,i=a.x-n.x,a=a.y-n.y)))return e;o=2===o?.5*n:n,(t=t.computeShortLength(!1))>o&&(t=o),o=t*(e.y-a)/n,e.x-=t*(e.x-i)/n,e.y-=o}return e}function fd(t,e,i,n){for(var o=t.pointsCount,a=e;qe.$(e.x,a.x)&&qe.$(e.y,a.y);){if(i>=o)return o-1;a=t.i(i++)}if(!qe.$(e.x,a.x)&&!qe.$(e.y,a.y))return i-1;for(var r=a;qe.$(e.x,a.x)&&qe.$(a.x,r.x)&&(!n||(e.y>=a.y?a.y>=r.y:a.y<=r.y))||qe.$(e.y,a.y)&&qe.$(a.y,r.y)&&(!n||(e.x>=a.x?a.x>=r.x:a.x<=r.x));){if(i>=o)return o-1;r=t.i(i++)}return i-2}function gd(t,e,i,n,o,a,r){if(!r&&vd(t)){r=[];var s=0;if(t.isVisible()&&(s=function(t,e,i,n){var o=t.diagram;if(null===o||e.w(i))return 0;for(o=o.layers;o.next();){var a=o.value;if(null!==a&&a.visible)for(var r=(a=a.Ca.j).length,s=0;s<r;s++){var c=a[s];if(c instanceof id){if(c===t)return 0<n.length&&n.sort(function(t,e){return t-e}),n.length;if(c.isVisible()&&vd(c)){var l=c.routeBounds;l.v()&&t.routeBounds.Gc(l)&&!t.usesSamePort(c)&&null!==(l=c.path)&&l.yf()&&md(e,i,n,c)}}}}return 0<n.length&&n.sort(function(t,e){return t-e}),n.length}(t,o,a,r)),0<s)if(qe.A(o.y,a.y))if(o.x<a.x)for(var c=0;c<s;){var l=Math.max(o.x,Math.min(r[c++]-5,a.x-10));e.lineTo(l+i,a.y+n);for(var u=l+i,d=Math.min(l+10,a.x);c<s&&(l=r[c])<d+10;)c++,d=Math.min(l+5,a.x);l=a.y-10+n,d+=i;var h=a.y+n;t.curve===Id?Ql(e,d,h,!1):eu(e,u,l,d,l,d,h)}else for(--s;0<=s;){for(c=Math.min(o.x,Math.max(r[s--]+5,a.x+10)),e.lineTo(c+i,a.y+n),u=c+i,l=Math.max(c-10,a.x);0<=s&&(c=r[s])>l-10;)s--,l=Math.max(c-5,a.x);c=a.y-10+n,l+=i,d=a.y+n,t.curve===Id?Ql(e,l,d,!1):eu(e,u,c,l,c,l,d)}else if(qe.A(o.x,a.x))if(o.y<a.y)for(c=0;c<s;){for(l=Math.max(o.y,Math.min(r[c++]-5,a.y-10)),e.lineTo(a.x+i,l+n),u=l+n,l=Math.min(l+10,a.y);c<s&&(d=r[c])<l+10;)c++,l=Math.min(d+5,a.y);d=a.x-10+i,h=a.x+i,l+=n,t.curve===Id?Ql(e,h,l,!1):eu(e,d,u,d,l,h,l)}else for(--s;0<=s;){for(c=Math.min(o.y,Math.max(r[s--]+5,a.y+10)),e.lineTo(a.x+i,c+n),u=c+n,c=Math.max(c-10,a.y);0<=s&&(l=r[s])>c-10;)s--,c=Math.max(l-5,a.y);l=a.x-10+i,d=a.x+i,c+=n,t.curve===Id?Ql(e,d,c,!1):eu(e,l,u,l,c,d,c)}}e.lineTo(a.x+i,a.y+n)}function md(t,e,i,n){for(var o=qe.A(t.y,e.y),a=n.pointsCount,r=n.i(0),s=pt.alloc(),c=1;c<a;c++){var l=n.i(c);if(c<a-1){var u=n.i(c+1);if(r.y===l.y&&l.y===u.y){if(l.x>r.x&&u.x>=l.x||l.x<r.x&&u.x<=l.x)continue}else if(r.x===l.x&&l.x===u.x&&(l.y>r.y&&u.y>=l.y||l.y<r.y&&u.y<=l.y))continue}t:{var d=t.y,h=e.x,p=e.y,f=r.x;r=r.y;var g=l.x,m=l.y;if(qe.A(u=t.x,h)){if(!qe.A(d,p)&&qe.A(r,m)&&Math.min(d,p)<r&&Math.max(d,p)>r&&Math.min(f,g)<u&&Math.max(f,g)>u&&!qe.A(f,g)){s.x=u,s.y=r,u=!0;break t}}else if(qe.A(d,p)&&qe.A(f,g)&&Math.min(u,h)<f&&Math.max(u,h)>f&&Math.min(r,m)<d&&Math.max(r,m)>d&&!qe.A(r,m)){s.x=f,s.y=d,u=!0;break t}s.x=0,s.y=0,u=!1}u&&i.push(o?s.x:s.y),r=l}pt.free(s)}function vd(t){return(t=t.curve)===Pd||t===Id}function bd(t,e){(e||vd(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Pg.contains(t)||0===t.Dl.width&&0===t.Dl.height||e.Pg.add(t,t.Dl.copy()))}function _d(t,e,i){if(null!==e&&null!==e.ka&&vd(e)){var n=e.routeBounds;n.v()&&(t.routeBounds.Gc(n)||i.Gc(n))&&(t.usesSamePort(e)||e.cc())}}function wd(t){var e=t.Qe;if(null!==e){var i=t.lf;if(null!==i){for(var n=t.Re,o=t.mf,a=t=null,r=e.Wa.j,s=r.length,c=0;c<s;c++){var l=r[c];(l.Qe===e&&l.Re===n&&l.lf===i&&l.mf===o||l.Qe===i&&l.Re===o&&l.lf===e&&l.mf===n)&&(null===a?a=l:(null===t&&(t=[]).push(a),t.push(l)))}if(null!==t){for(null===(a=ju(e,i,n,o))&&($u(e,a=new Bd(e,n,i,o)),$u(i,a)),a.links=t,e=0;e<t.length;e++)t[e].Hf=a;a.mm()}}}}function yd(t){var e=t.Hf;null!==e&&(t.Hf=null,0<=(t=e.links.indexOf(t))&&(I(e.links,t),e.mm()))}Ou.className="Node",Ou.SpreadingNone=qu,Ou.SpreadingEvenly=Xu,Ou.SpreadingPacked=Yu,d(Ku,Ou),Ku.prototype.cloneProtected=function(t){Ou.prototype.cloneProtected.call(this,t),this.P=-32769&this.P,t.zo=this.zo,t.Bo=this.Bo,t.yi=this.yi,t.Op=this.Op;var e=t.gm(function(t){return t instanceof ed});t.Ra=e instanceof ed?e:null,null!==this.ic?(t.ic=this.ic.copy(),t.ic.group=t):(null!==t.ic&&(t.ic.group=null),t.ic=null)},(i=Ku.prototype).sf=function(t){Ou.prototype.sf.call(this,t);var e=t.gk();for(t=t.memberParts;t.next();){var i=t.value;if(i.o(),i.C(8),i.Yj(),i instanceof Ou)i.fd(e);else if(i instanceof id)for(i=i.labelNodes;i.next();)i.value.fd(e)}},i.vk=function(t,e,i,n,o,a,r){if(t===Si&&"elements"===e){if(o instanceof ed)null===this.Ra?this.Ra=o:this.Ra!==o&&_("Cannot insert a second Placeholder into the visual tree of a Group.");else if(o instanceof Ic){var s=o.gm(function(t){return t instanceof ed});s instanceof ed&&(null===this.Ra?this.Ra=s:this.Ra!==s&&_("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Ti&&"elements"===e&&null!==this.Ra&&(n===this.Ra||n instanceof Ic&&this.Ra.Ag(n))&&(this.Ra=null);Ou.prototype.vk.call(this,t,e,i,n,o,a,r)},i.Ch=function(t,e,i,n){this.Xe=this.Ra,Ou.prototype.Ch.call(this,t,e,i,n)},i.zb=function(){this.memberParts.each(function(t){t.zb()}),Ou.prototype.zb.call(this)},i.bj=function(){if(!Ou.prototype.bj.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof Ou){if(e.isVisible()&&fs(e))return!1}else if(e instanceof id&&e.isVisible()&&fs(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},i.dk=function(){if(0<this.Ao.count){var t=this.diagram;if(null!==t)for(var e=this.Ao.copy().iterator;e.next();)t.remove(e.value)}Ou.prototype.dk.call(this)},Ku.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Wr(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},Ku.prototype.addMembers=function(t,e){var i=this.diagram;if(null===i)return!1;i=i.commandHandler;var n=!0;for(t=Wr(t).iterator;t.next();){var o=t.value;!e||i.isValidMember(this,o)?o.containingGroup=this:n=!1}return n},Ku.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(i=Ku.prototype).fd=function(t){void 0===t&&(t=null);var e=0!=(65536&this.P);if(Ou.prototype.fd.call(this,t),!e)for(0!=(65536&this.P)!=1&&(this.P=65536^this.P),e=this.uv();e.next();){var i=e.value;if(null===t||!t.contains(i)){var n=i.fromNode;(null!==n&&n!==this&&n.Xd(this)&&!n.isVisible()||null!==(n=i.toNode)&&n!==this&&n.Xd(this)&&!n.isVisible())&&(Eu(n,i.fromPort),Eu(n,i.toPort),i.Ta())}}},i.uv=function(){var t=this.gk();t.add(this);for(var e=new it,i=t.iterator;i.next();){var n=i.value;if(n instanceof Ou)for(n=n.linksConnected;n.next();){var o=n.value;t.contains(o)||e.add(o)}}return e.iterator},i.mz=function(){var t=this.gk();t.add(this);for(var e=new it,i=t.iterator;i.next();){var n=i.value;if(n instanceof Ou)for(n=n.linksConnected;n.next();){var o=n.value,a=o.fromNode;t.contains(a)&&a!==this||e.add(a),t.contains(o=o.toNode)&&o!==this||e.add(o)}}return e.iterator},i.lz=function(){var t=new it;return function t(e,i){null!==e&&(i.add(e),t(e.containingGroup,i))}(this,t),t},i.gk=function(){var t=new it;return Iu(t,this,!0,0,!0),t.remove(this),t},i.Ob=function(t){Ou.prototype.Ob.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ob(t)},Ku.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ee||(t.Ee=!0,Qu(this,this.gk(),t,this),t.Ee=!1)},Ku.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ee||(t.Ee=!0,td(this,this.gk(),t,this),t.Ee=!1)},Ku.prototype.move=function(t,e){void 0===e&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var o=t.x,a=t.y;if(!(n===o||isNaN(n)&&isNaN(o))||!(i===a||isNaN(i)&&isNaN(a))){for(n=o-(isNaN(n)?0:n),i=a-(isNaN(i)?0:i),a=pt.alloc(),Ou.prototype.move.call(this,t,e),t=new it,e=this.gk().iterator;e.next();)(o=e.value)instanceof id&&(o.suspendsRouting&&t.add(o),o.ld||o.fromNode!==this&&o.toNode!==this)&&(o.suspendsRouting=!0);for(e.reset();e.next();)if(!((o=e.value).Hh()||o instanceof Ou&&o.isLinkLabel)){var r=o.position,s=o.location;r.v()?(a.x=r.x+n,a.y=r.y+i,o.position=a):s.v()&&(a.x=s.x+n,a.y=s.y+i,o.location=a)}for(e.reset();e.next();)(o=e.value)instanceof id&&(o.suspendsRouting=t.contains(o),o.ld||o.fromNode!==this&&o.toNode!==this)&&(a.x=(r=o.position).x+n,a.y=r.y+i,a.v()?o.move(a):o.Ta(),ud(o)&&o.Ta());pt.free(a)}},h.Object.defineProperties(Ku.prototype,{placeholder:{get:function(){return this.Ra}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.P)},set:function(t){var e=0!=(2048&this.P);e!==t&&(this.P^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.P)},set:function(t){var e=0!=(4096&this.P);e!==t&&(this.P^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.P)},set:function(t){var e=0!=(8192&this.P);e!==t&&(this.P^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.P)},set:function(t){var e=0!=(16384&this.P);e!==t&&(this.P^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Ao.iterator}},layout:{get:function(){return this.ic},set:function(t){var e=this.ic;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.ic=t;var i=this.diagram;null!==t&&(t.diagram=i,t.group=this),null!==i&&(i.Ff=!0),this.g("layout",e,t),null!==i&&i.Pb()}}},memberAdded:{get:function(){return this.zo},set:function(t){var e=this.zo;e!==t&&(this.zo=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Bo},set:function(t){var e=this.Bo;e!==t&&(this.Bo=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.yi},set:function(t){var e=this.yi;e!==t&&(this.yi=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.P)},set:function(t){var e=0!=(256&this.P);e!==t&&(this.P^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.P)},set:function(t){var e=0!=(512&this.P);if(e!==t){this.P^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var n=!0;null!==i&&(n=i.Z,i.Z=!0),e(this),null!==i&&(i.Z=n)}null!==i&&i.undoManager.isUndoingRedoing?(null!==this.Ra&&this.Ra.o(),this.memberParts.each(function(t){t.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.P)},set:function(t){var e=0!=(1024&this.P);e!==t&&(this.P^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.Op},set:function(t){var e=this.Op;e!==t&&(this.Op=t,this.g("subGraphExpandedChanged",e,t))}},uk:{get:function(){return 0!=(32768&this.P)},set:function(t){0!=(32768&this.P)!==t&&(this.P^=32768)}}}),Ku.prototype.expandSubGraph=Ku.prototype.expandSubGraph,Ku.prototype.collapseSubGraph=Ku.prototype.collapseSubGraph,Ku.prototype.findSubGraphParts=Ku.prototype.gk,Ku.prototype.findContainingGroupChain=Ku.prototype.lz,Ku.prototype.findExternalNodesConnected=Ku.prototype.mz,Ku.prototype.findExternalLinksConnected=Ku.prototype.uv,Ku.prototype.ensureBounds=Ku.prototype.zb,Ku.className="Group",d(ed,qr),ed.prototype.cloneProtected=function(t){qr.prototype.cloneProtected.call(this,t),t.cb=this.cb.G(),t.vp=this.vp.copy()},ed.prototype.Eh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return qt(0,0,e.width,e.height,t.x,t.y)},ed.prototype.rm=function(){var t=this.part;if(null!==t&&(t instanceof Ku||t instanceof Mu)||_("Placeholder is not inside a Group or Adornment."),t instanceof Ku){var e=this.computeBorder(this.vp),i=this.minSize,n=this.oc;for(zt(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),Kr(this,0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||null===n||n.animationManager.Kv(t)||isNaN(e.x)||isNaN(e.y)||((i=pt.alloc()).dj(e,t.locationSpot),i.w(t.location)||(t.location=new pt(i.x,i.y)),pt.free(i))}else{e=this.oc,n=(i=this.cb).left+i.right;var o=i.top+i.bottom,a=t.adornedObject;t.angle=a.Xi();var r=0;a instanceof al&&(r=a.strokeWidth);var s=a.uf(),c=a.naturalBounds,l=(c.width+r)*s;r=(c.height+r)*s,t.type!==Ic.Link&&(a=a.ga("Selection"===t.category?oe:t.locationSpot,pt.alloc()),t.location=a,pt.free(a)),isNaN(l)||isNaN(r)?(l=(t=t.adornedObject).ga(oe,pt.alloc()),(a=Vt.allocAt(l.x,l.y,0,0)).Ie(t.ga(he,l)),a.Ie(t.ga(re,l)),a.Ie(t.ga(ue,l)),zt(e,a.width+n||0,a.height+o||0),Kr(this,-i.left,-i.top,e.width,e.height),pt.free(l),Vt.free(a)):(zt(e,l+n||0,r+o||0),Kr(this,-i.left,-i.top,e.width,e.height))}},ed.prototype.Ch=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},ed.prototype.computeBorder=function(t){var e=this.part,i=e.diagram;if(null!==i&&e instanceof Ku&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.vp.v()){var n=i.toolManager.findTool("Dragging");if(n===i.currentTool&&null!==(i=n.computeBorder(e,this.vp,t)))return i}i=Vt.alloc(),n=this.computeMemberBounds(i);var o=this.cb;return e instanceof Ku&&!e.isSubGraphExpanded?t.h(n.x-o.left,n.y-o.top,0,0):t.h(n.x-o.left,n.y-o.top,Math.max(n.width+o.left+o.right,0),Math.max(n.height+o.top+o.bottom,0)),Vt.free(i),e instanceof Ku&&e.computesBoundsIncludingLocation&&e.location.v()&&t.Ie(e.location),t},ed.prototype.computeMemberBounds=function(t){if(!(this.part instanceof Ku))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,o=-1/0,a=-1/0,r=e.memberParts;r.next();){var s=r.value;if(s.isVisible()){if(s instanceof id){if(!e.computesBoundsIncludingLinks)continue;if(hs(s))continue;if(s.fromNode===e||s.toNode===e)continue}(s=s.actualBounds).left<i&&(i=s.left),s.top<n&&(n=s.top),s.right>o&&(o=s.right),s.bottom>a&&(a=s.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,o-i,a-n):t.h((e=e.location).x,e.y,0,0),t},h.Object.defineProperties(ed.prototype,{padding:{get:function(){return this.cb},set:function(t){"number"==typeof t&&(t=new Jt(t));var e=this.cb;e.w(t)||(this.cb=t=t.G(),this.g("padding",e,t))}}}),ed.className="Placeholder",d(id,su),id.prototype.cloneProtected=function(t){su.prototype.cloneProtected.call(this,t),t.Pa=-113&this.Pa,t.Re=this.Re,t.Nn=this.Nn,t.mf=this.mf,t.Wp=this.Wp,t.Dk=this.Dk,t.pn=this.pn,t.rn=this.rn,t.sn=this.sn,t.Lj=this.Lj,t.Jp=this.Jp,null!==this.O&&(t.O=this.O.copy())},(i=id.prototype).sf=function(t){su.prototype.sf.call(this,t),this.Re=t.Re,this.mf=t.mf,t.gh=null,t.Ta(),t.Hf=this.Hf;var e=t.fromPort;null!==e&&Eu(t.fromNode,e),null!==(e=t.toPort)&&Eu(t.toNode,e)},i.eb=function(t){t.classType===id?2==(2&t.value)?this.routing=t:t===Dd||t===Id||t===Pd?this.curve=t:t===Md||t===Od||t===$d?this.adjusting=t:t!==kd&&t!==Cd&&_("Unknown Link enum value for a Link property: "+t):su.prototype.eb.call(this,t)},i.Ec=function(){null===this.O&&(this.O=new ah)},i.bj=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),fs(t)||_u(t))return!1}return null===(t=this.toNode)||(null!==(e=t.findVisibleNode())&&(t=e),!fs(t)&&!_u(t))},i.kw=function(){return!1},i.Qt=function(){},i.Wb=function(){return!1},id.prototype.computeAngle=function(t,e,i){return id.computeAngle(e,i)},id.computeAngle=function(t,e){switch(t){default:case Cd:t=0;break;case jd:t=e;break;case Ld:t=e+90;break;case Ed:t=e-90;break;case Nd:t=e+180;break;case Ad:90<(t=qe.Aq(e))&&270>t&&(t-=180);break;case Vd:90<(t=qe.Aq(e+90))&&270>t&&(t-=180);break;case zd:90<(t=qe.Aq(e-90))&&270>t&&(t-=180);break;case Fd:if(45<(t=qe.Aq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return qe.Aq(t)},(i=id.prototype).Gh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&su.prototype.Gh.call(this)},i.rt=function(t){var e=this.fromNode;return t===e?this.toNode:e},i.Hz=function(t){var e=this.fromPort;return t===e?this.toPort:e},i.rq=function(t){if(su.prototype.rq.call(this,t),vd(this)&&this.uq(this.actualBounds),!t){var e=null;null!==(t=this.Qe)&&Au(t,this,e=this.fromPort);var i=this.lf;if(null!==i){var n=this.toPort;i===t&&n===e||Au(i,this,n)}wd(this)}},i.sq=function(t){if(su.prototype.sq.call(this,t),vd(this)&&this.uq(this.actualBounds),!t){var e=null;null!==(t=this.Qe)&&Vu(t,this,e=this.fromPort);var i=this.lf;if(null!==i){var n=this.toPort;i===t&&n===e||Vu(i,this,n)}yd(this)}},i.dk=function(){if(this.ld=!0,null!==this.ad){var t=this.diagram;if(null!==t)for(var e=this.ad.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},id.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},id.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var o=i.y;for(isNaN(o)&&(o=0),n=t.x-n,o=t.y-o,!0===e?su.prototype.move.call(this,t,!1):(t=pt.allocAt(i.x+n,i.y+o),su.prototype.move.call(this,t,!1),pt.free(t)),ad(this,n,o),t=this.labelNodes;t.next();)(e=t.value).moveTo((i=e.position).x+n,i.y+o)},id.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},id.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},id.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Tt),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Dd))return this.ka.Cv(.5,t),t.add(this.i(0)),i=this.ka.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===Dd){if(3===e)return this.i(1);if(i=3*((n=(e-1)/3|0)/2|0),1==n%2){n=this.i(i);var o=this.i(i+1),a=this.i(i+2);i=this.i(i+3),qe.Sy(n.x,n.y,o.x,o.y,a.x,a.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var r=this.flattenedLengths;for(i=this.flattenedTotalLength,o=a=n=0;n<i/2&&a<e&&!(n+(o=r[a])>i/2);)n+=o,a++;return e=this.i(a),a=this.i(a+1),1>Math.abs(e.x-a.x)?t.h(e.x,e.y>a.y?e.y-(i/2-n):e.y+(i/2-n)):1>Math.abs(e.y-a.y)?t.h(e.x>a.x?e.x-(i/2-n):e.x+(i/2-n),e.y):t.h(e.x+(i=(i/2-n)/o)*(a.x-e.x),e.y+i*(a.y-e.y)),t},id.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Sa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Dd))return this.ka.Qx(.5);if(this.computeCurve()===Dd&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(1==e%2){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),qe.Ry(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).Sa(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var o,a=0;for(i=0;a<n/2&&i<t&&!(a+(o=e[i])>n/2);)a+=o,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).Sa(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.Sa(n)},(i=id.prototype).i=function(t){return this.xb.j[t]},i.jd=function(t,e){this.xb.hd(t,e)},i.K=function(t,e,i){this.xb.hd(t,new pt(e,i))},i.Tz=function(t,e){this.xb.tb(t,e)},i.m=function(t,e,i){this.xb.tb(t,new pt(e,i))},i.ze=function(t){this.xb.add(t)},i.qf=function(t,e){this.xb.add(new pt(t,e))},i.aw=function(t){this.xb.Za(t)},i.Zj=function(){this.xb.clear()},i.Kh=function(){null===this.gh&&(this.gh=this.xb,this.xb=this.xb.copy())},i.rf=function(){if(null!==this.gh){for(var t=this.gh,e=this.xb,i=1/0,n=1/0,o=t.j,a=o.length,r=0;r<a;r++){var s=o[r];i=Math.min(s.x,i),n=Math.min(s.y,n)}s=r=1/0;for(var c=e.j,l=c.length,u=0;u<l;u++){var d=c[u];r=Math.min(d.x,r),s=Math.min(d.y,s),d.freeze()}if(e.freeze(),l===a){for(a=0;a<l;a++)if((u=o[a]).x-i!=(d=c[a]).x-r||u.y-n!=d.y-s){this.o(),this.cc();break}}else this.o(),this.cc();this.gh=null,null!==(i=this.diagram)&&i.animationManager.qc&&(this.lh=e),rd(this),this.g("points",t,e)}},i.hy=function(){null!==this.gh&&(this.xb=this.gh,this.gh=null)},i.Ta=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.At.contains(this)||t.undoManager.isUndoingRedoing)return;if((t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.lh&&!t.isTicking&&t.isAnimating&&(this.lh=null)}null!==(t=this.path)&&(this.ld=!1,this.o(),t.o())}},i.hj=function(){if(!this.ld&&!this.nv){var t=!0;try{this.nv=!0,this.Kh(),t=this.computePoints()}finally{this.nv=!1,t?this.rf():this.hy()}}},id.prototype.computePoints=function(){var t=this.diagram;if(null===t)return!1;var e=this.fromNode,i=null;if(null===e?(t.jh||(t.El=new al,t.El.desiredSize=Ct,t.El.strokeWidth=0,t.jh=new Ou,t.jh.add(t.El),t.jh.zb()),this.defaultFromPoint&&(t.jh.position=t.jh.location=this.defaultFromPoint,t.jh.zb(),e=t.jh,i=t.El)):i=this.fromPort,null!==i&&!e.isVisible()){var n=e.findVisibleNode();null!==n&&n!==e?(e=n,i=n.port):e=n}if(this.nx=e,null===e||!e.location.v())return!1;for(;!(null===i||i.actualBounds.v()&&i.yf());)i=i.panel;if(null===i)return!1;var o=this.toNode,a=null;if(null===o?(t.kh||(t.Fl=new al,t.Fl.desiredSize=Ct,t.Fl.strokeWidth=0,t.kh=new Ou,t.kh.add(t.Fl),t.kh.zb()),this.defaultToPoint&&(t.kh.position=t.kh.location=this.defaultToPoint,t.kh.zb(),o=t.kh,a=t.Fl)):a=this.toPort,null===a||o.isVisible()||(null!==(t=o.findVisibleNode())&&t!==o?(o=t,a=t.port):o=t),this.ox=o,null===o||!o.location.v())return!1;for(;!(null===a||a.actualBounds.v()&&a.yf());)a=a.panel;if(null===a)return!1;var r=this.pointsCount;n=this.computeSpot(!0,i),t=this.computeSpot(!1,a);var s=ld(n),c=ld(t),l=i===a&&null!==i,u=this.isOrthogonal,d=this.curve===Dd;this.Qf=!(!l||u)&&(d=!0);var h=this.computeAdjusting()===Cd||l;if(!u&&!l&&s&&c){if(s=!1,!h&&3<=r&&(h=this.getLinkPoint(e,i,n,!0,!1,o,a),c=this.getLinkPoint(o,a,t,!1,!1,e,i),s=this.adjustPoints(0,h,r-1,c))&&(h=this.getLinkPoint(e,i,n,!0,!1,o,a),c=this.getLinkPoint(o,a,t,!1,!1,e,i),this.adjustPoints(0,h,r-1,c)),!s)if(this.Zj(),d){r=this.getLinkPoint(e,i,n,!0,!1,o,a),s=(h=this.getLinkPoint(o,a,t,!1,!1,e,i)).x-r.x,c=h.y-r.y,l=this.computeCurviness(),d=u=0;var p=r.x+s/3,f=r.y+c/3,g=p,m=f;qe.A(c,0)?m=0<s?m-l:m+l:(u=-s/c,d=Math.sqrt(l*l/(u*u+1)),0>l&&(d=-d),m=u*((g=(0>c?-1:1)*d+p)-p)+f);var v=p=r.x+2*s/3,b=f=r.y+2*c/3;b=qe.A(c,0)?0<s?b-l:b+l:u*((v=(0>c?-1:1)*d+p)-p)+f,this.Zj(),this.ze(r),this.qf(g,m),this.qf(v,b),this.ze(h),this.jd(0,this.getLinkPoint(e,i,n,!0,!1,o,a)),this.jd(3,this.getLinkPoint(o,a,t,!1,!1,e,i))}else n=this.getLinkPoint(e,i,n,!0,!1,o,a),t=this.getLinkPoint(o,a,t,!1,!1,e,i),this.hasCurviness()?(h=t.x-n.x,o=t.y-n.y,a=this.computeCurviness(),r=e=n.x+h/2,s=i=n.y+o/2,qe.A(o,0)?s=0<h?s-a:s+a:(h=-h/o,r=Math.sqrt(a*a/(h*h+1)),0>a&&(r=-r),s=h*((r=(0>o?-1:1)*r+e)-e)+i),this.ze(n),this.qf(r,s)):this.ze(n),this.ze(t)}else{d=this.isAvoiding,h&&(u&&d||l)&&this.Zj();var _=l?this.computeCurviness():0;d=this.getLinkPoint(e,i,n,!0,u,o,a),p=g=f=0,(u||!s||l)&&(m=this.computeEndSegmentLength(e,i,n,!0),p=this.getLinkDirection(e,i,d,n,!0,u,o,a),l&&(s||n.w(t)||!u&&1===n.x+t.x&&1===n.y+t.y)&&(p-=u?90:30,0>_&&(p-=180)),0>p?p+=360:360<=p&&(p-=360),l&&(m+=Math.abs(_)*(u?1:2)),0===p?f=m:90===p?g=m:180===p?f=-m:270===p?g=-m:(f=m*Math.cos(p*Math.PI/180),g=m*Math.sin(p*Math.PI/180)),n.jc()&&l&&(m=i.ga(ce,pt.alloc()),v=pt.allocAt(m.x+1e3*f,m.y+1e3*g),this.getLinkPointFromPoint(e,i,m,v,!0,d),pt.free(m),pt.free(v))),m=this.getLinkPoint(o,a,t,!1,u,e,i);var w=b=v=0;if(u||!c||l){var y=this.computeEndSegmentLength(o,a,t,!1);w=this.getLinkDirection(o,a,m,t,!1,u,e,i),l&&(c||n.w(t)||!u&&1===n.x+t.x&&1===n.y+t.y)&&(w+=u?0:30,0>_&&(w+=180)),0>w?w+=360:360<=w&&(w-=360),l&&(y+=Math.abs(_)*(u?1:2)),0===w?v=y:90===w?b=y:180===w?v=-y:270===w?b=-y:(v=y*Math.cos(w*Math.PI/180),b=y*Math.sin(w*Math.PI/180)),t.jc()&&l&&(t=a.ga(ce,pt.alloc()),n=pt.allocAt(t.x+1e3*v,t.y+1e3*b),this.getLinkPointFromPoint(o,a,t,n,!1,m),pt.free(t),pt.free(n))}t=d,(u||!s||l)&&(t=new pt(d.x+f,d.y+g)),n=m,(u||!c||l)&&(n=new pt(m.x+v,m.y+b)),!h&&!u&&s&&3<r&&this.adjustPoints(0,d,r-2,n)?this.jd(r-1,m):!h&&!u&&c&&3<r&&this.adjustPoints(1,t,r-1,m)?this.jd(0,d):!h&&(u?6<=r:4<r)&&this.adjustPoints(1,t,r-2,n)?(this.jd(0,d),this.jd(r-1,m)):(this.Zj(),this.ze(d),(u||!s||l)&&this.ze(t),u&&this.addOrthoPoints(t,p,n,w,e,o),(u||!c||l)&&this.ze(n),this.ze(m))}return!0},id.prototype.getLinkPointFromPoint=function(t,e,i,n,o,a){if(void 0===a&&(a=new pt),null===t||null===e)return a.assign(i),a;if(t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(e=o.port),t=null,null===(o=e.panel)||o.be()||(o=o.panel),null===o){o=n.x,n=n.y;var r=i.x;i=i.y}else{var s=-(t=o.wd).m12*(o=1/(t.m11*t.m22-t.m12*t.m21)),c=-t.m21*o,l=t.m11*o,u=o*(t.m21*t.dy-t.m22*t.dx),d=o*(t.m12*t.dx-t.m11*t.dy);o=n.x*(r=t.m22*o)+n.y*c+u,n=n.x*s+n.y*l+d,r=i.x*r+i.y*c+u,i=i.x*s+i.y*l+d}return e.hk(o,n,r,i,a),null!==t&&a.transform(t),a},id.prototype.getLinkPoint=function(t,e,i,n,o,a,r,s){if(void 0===s&&(s=new pt),i.fb()&&!ld(i))return e.ga(i,s),s;if(i.gd()){var c=cd(this,e);if(null!==c){if(s.assign(c.xq),o&&this.routing===Td){var l=cd(this,r);if(null!==l&&c.dm<l.dm){c=pt.alloc(),l=pt.alloc();var u=new Vt(e.ga(oe,c),e.ga(he,l)),d=this.computeSpot(!n,r);t=this.getLinkPoint(a,r,d,!n,o,t,e,l),(i.wf(fe)||i.wf(ge))&&t.y>=u.y&&t.y<=u.y+u.height?s.y=t.y:(i.wf(pe)||i.wf(me))&&t.x>=u.x&&t.x<=u.x+u.width&&(s.x=t.x),pt.free(c),pt.free(l)}}return s}}return i=e.ga(.5===i.x&&.5===i.y?i:ce,pt.alloc()),this.pointsCount>(o?6:2)?(r=this.i(n?1:this.pointsCount-2),o&&(r=sd(i,r.copy()))):(c=this.computeSpot(!n,r),a=pt.alloc(),r=r.ga(.5===c.x&&.5===c.y?c:ce,a),o&&(r=sd(i,r)),pt.free(a)),this.getLinkPointFromPoint(t,e,i,r,n,s),pt.free(i),s},id.prototype.getLinkDirection=function(t,e,i,n,o,a,r,s){t:if(n.fb())var c=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.gd()&&null!==(c=cd(this,e)))switch(c.yc){case 1:c=270;break t;case 2:c=180;break t;default:case 4:c=0;break t;case 8:c=90;break t}c=e.ga(ce,pt.alloc()),this.pointsCount>(a?6:2)?(s=this.i(o?1:this.pointsCount-2),s=a?sd(c,s.copy()):i):(i=pt.alloc(),s=s.ga(ce,i),pt.free(i)),i=Math.abs(s.x-c.x)>Math.abs(s.y-c.y)?s.x>=c.x?0:180:s.y>=c.y?90:270,pt.free(c),c=i}return n.jc()&&r.Xd(t)&&360<=(c+=180)&&(c-=360),ld(n)||0===(t=e.Xi())||(45<=t&&135>t?c+=90:135<=t&&225>t?c+=180:225<=t&&315>t&&(c+=270),360<=c&&(c-=360)),c},id.prototype.computeEndSegmentLength=function(t,e,i,n){return null!==e&&i.gd()&&null!==(t=cd(this,e))?t.sv:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},id.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=ce:((e=this.fromSpot).Mb()&&(e=t.fromSpot),t=e===Ie?ne:e):null===(t=e||this.toPort)?t=ce:((e=this.toSpot).Mb()&&(e=t.toSpot),t=e===Ie?ne:e),t},id.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Cd&&4<this.pointsCount?this.computeMidPoint(new pt):(t=e.ga(ce),null!==(e=null!==(e=e.fp)?nh(e,this):null)&&(t=e.xq),t)},id.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},id.prototype.tf=function(t,e,i,n,o,a){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var r=a;if(void 0===a&&(r=He.alloc()).reset(),r.multiply(this.transform),this.Dh(t,r))return Fc(this,e,i,o),void 0===a&&He.free(r),!0;if(this.Gc(t,r)){var s=!1;if(!this.isAtomic)for(var c=this.V.j,l=c.length;l--;){var u=c[l];if(u.visible||u===this.locationObject){var d=u.actualBounds,h=this.naturalBounds;if(!(d.x>h.width||d.y>h.height||0>d.x+d.width||0>d.y+d.height)){if((d=He.alloc()).set(r),u instanceof Ic)s=u.tf(t,e,i,n,o,d);else if(this.path===u){if(u instanceof al)if(s=t,h=n,!1===u.pickable)s=!1;else if(d.multiply(u.transform),h)t:{var p=s,f=d;if(u.Dh(p,f))s=!0;else{if(void 0===f&&(f=u.transform,p.Be(u.actualBounds))){s=!0;break t}s=p.left,h=p.right;var g=p.top;p=p.bottom;var m=pt.alloc(),v=pt.alloc(),b=pt.alloc(),_=He.alloc();_.set(f),_.Pv(u.transform),_.vt(),v.x=h,v.y=g,v.transform(_),m.x=s,m.y=g,m.transform(_),f=!1,ul(u,m,v,b)?f=!0:(m.x=h,m.y=p,m.transform(_),ul(u,m,v,b)?f=!0:(v.x=s,v.y=p,v.transform(_),ul(u,m,v,b)?f=!0:(m.x=s,m.y=g,m.transform(_),ul(u,m,v,b)&&(f=!0)))),He.free(_),pt.free(m),pt.free(v),pt.free(b),s=f}}else s=u.Dh(s,d)}else s=Zr(u,t,n,d);s&&(h=u,null!==e&&(h=e(u)),h&&(null===i||i(h))&&o.add(h)),He.free(d)}}}return void 0===a&&He.free(r),s||null!==this.background||null!==this.areaBackground}return void 0===a&&He.free(r),!1},id.prototype.computeCurve=function(){if(null===this.Qf){var t=this.fromPort;this.Qf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Qf?Dd:this.curve},id.prototype.computeCorner=function(){if(this.curve===Dd)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},id.prototype.findMidLabel=function(){for(var t=this.path,e=this.V.j,i=e.length,n=0;n<i;n++){var o=e[n];if(o!==t&&!o.isPanelMain&&(-1/0===o.segmentIndex||isNaN(o.segmentIndex)))return o}for(t=this.labelNodes;t.next();)if(-1/0===(e=t.value).segmentIndex||isNaN(e.segmentIndex))return e;return null},id.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Math.max(14,this.computeThickness()),e=this.fromPort,i=this.toPort;if(null!==e&&null!==i){var n=this.findMidLabel();if(null!==n){var o=n.naturalBounds,a=n.margin,r=isNaN(o.width)?30:o.width*n.scale+a.left+a.right;o=isNaN(o.height)?14:o.height*n.scale+a.top+a.bottom,(n=n.segmentOrientation)===jd||n===Ad||n===Nd?t=Math.max(t,o):n===Ed||n===zd||n===Ld||n===Vd?t=Math.max(t,r):(e=e.ga(ce).Sa(i.ga(ce))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*r)+Math.abs(Math.cos(e)*o)+1)),this.curve===Dd&&(t*=1.333)}}return t},id.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Cd&&i.Ta()}},id.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=16;var e=this.Hf;if(null!==e){for(var i=P(),n=0,o=e.links,a=0;a<o.length;a++){var r=o[a].computeSpacing();i.push(r),n+=r}for(n=-n/2,a=0;a<o.length;a++){if(o[a]===this){t=n+i[a]/2;break}n+=i[a]}e.Dt===this.fromNode&&(t=-t),M(i)}}return t},id.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},id.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Hf},id.prototype.adjustPoints=function(t,e,i,n){var o=this.computeAdjusting();if(this.isOrthogonal){if(o===Od)return!1;o===$d&&(o=Md)}switch(o){case Od:var a=this.i(t),r=this.i(i);if(!a.Ma(e)||!r.Ma(n)){var s=r.x-(o=a.x),c=r.y-(a=a.y),l=Math.sqrt(s*s+c*c);if(!qe.$(l,0)){if(qe.$(s,0))var u=0>c?-Math.PI/2:Math.PI/2;else u=Math.atan(c/Math.abs(s)),0>s&&(u=Math.PI-u);var d=e.y;s=n.x-(r=e.x);var h=n.y-d;for(c=Math.sqrt(s*s+h*h),qe.$(s,0)?h=0>h?-Math.PI/2:Math.PI/2:(h=Math.atan(h/Math.abs(s)),0>s&&(h=Math.PI-h)),l=c/l,u=h-u,this.jd(t,e),t+=1;t<i;t++)s=(e=this.i(t)).x-o,c=e.y-a,e=Math.sqrt(s*s+c*c),qe.$(e,0)||(qe.$(s,0)?c=0>c?-Math.PI/2:Math.PI/2:(c=Math.atan(c/Math.abs(s)),0>s&&(c=Math.PI-c)),s=c+u,this.K(t,r+(e*=l)*Math.cos(s),d+e*Math.sin(s)));this.jd(i,n)}}return!0;case $d:if(a=this.i(t),d=this.i(i),!a.Ma(e)||!d.Ma(n)){l=((r=d.x)-(o=a.x))*(r-o)+((d=d.y)-(a=a.y))*(d-a),u=e.y,h=n.y;var p=1;if(0!=(c=n.x)-(s=e.x)){var f=(h-u)/(c-s);p=Math.sqrt(1+1/(f*f))}else f=9e9;for(this.jd(t,e),t+=1;t<i;t++){var g=(e=this.i(t)).x,m=e.y,v=.5;0!==l&&(v=((o-g)*(o-r)+(a-m)*(a-d))/l);var b=o+v*(r-o),_=a+v*(d-a);e=Math.sqrt((g-b)*(g-b)+(m-_)*(m-_)),m<f*(g-b)+_&&(e=-e),0<f&&(e=-e),g=s+v*(c-s),v=u+v*(h-u),0!==f?this.K(t,e=g+e/p,v-(e-g)/f):this.K(t,g,v+e)}this.jd(i,n)}return!0;case Md:return this.isOrthogonal&&(o=this.i(t),a=this.i(t+1),r=this.i(t+2),d=s=a.x,l=u=a.y,qe.A(o.y,a.y)?qe.A(a.x,r.x)?u=e.y:qe.A(a.y,r.y)&&(s=e.x):qe.A(o.x,a.x)&&(qe.A(a.y,r.y)?s=e.x:qe.A(a.x,r.x)&&(u=e.y)),this.K(t+1,s,u),o=this.i(i),a=this.i(i-1),r=this.i(i-2),c=s=a.x,h=u=a.y,qe.A(o.y,a.y)?qe.A(a.x,r.x)?u=n.y:qe.A(a.y,r.y)&&(s=n.x):qe.A(o.x,a.x)&&(qe.A(a.y,r.y)?s=n.x:qe.A(a.x,r.x)&&(u=n.y)),this.K(i-1,s,u),ud(this))?(this.K(t+1,d,l),this.K(i-1,c,h),i=!1):(this.jd(t,e),this.jd(i,n),i=!0),i;default:return!1}},id.prototype.addOrthoPoints=function(t,e,i,n,o,a){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=-45<=n&&45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var r=o.actualBounds.copy(),s=a.actualBounds.copy();if(r.v()&&s.v()){if(r.Vc(8,8),s.Vc(8,8),r.Ie(t),s.Ie(i),0===e)if(i.x>t.x||270===n&&i.y<t.y&&s.right>t.x||90===n&&i.y>t.y&&s.right>t.x){var c=new pt(i.x,t.y),l=new pt(i.x,(t.y+i.y)/2);180===n?(c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),l.x=c.x,l.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(c.x=t.x<s.left?this.computeMidOrthoPosition(t.x,t.y,s.left,i.y,!1):t.x<s.right&&(270===n&&t.y<s.top||90===n&&t.y>s.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):s.right,l.x=c.x,l.y=i.y):0===n&&t.x<s.left&&t.y>s.top&&t.y<s.bottom&&(c.x=t.x,c.y=t.y<i.y?Math.min(i.y,s.top):Math.max(i.y,s.bottom),l.y=c.y)}else c=new pt(t.x,i.y),l=new pt((t.x+i.x)/2,i.y),(180===n||90===n&&i.y<r.top||270===n&&i.y>r.bottom)&&(180===n&&(s.aa(t)||r.aa(i))?c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(180===n||90===n)?c.y=this.computeMidOrthoPosition(t.x,r.top,i.x,Math.max(i.y,s.bottom),!0):i.y>t.y&&(180===n||270===n)&&(c.y=this.computeMidOrthoPosition(t.x,r.bottom,i.x,Math.min(i.y,s.top),!0)),l.x=i.x,l.y=c.y),c.y>r.top&&c.y<r.bottom&&(i.x>=r.left&&i.x<=t.x||t.x<=s.right&&t.x>=i.x?90!==n&&270!==n||(c=new pt(Math.max((t.x+i.x)/2,t.x),t.y),l=new pt(c.x,i.y)):(c.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,0===n?r.top:Math.min(r.top,s.top)):Math.max(i.y,0===n?r.bottom:Math.max(r.bottom,s.bottom)),l.x=i.x,l.y=c.y));else 180===e?i.x<t.x||270===n&&i.y<t.y&&s.left<t.x||90===n&&i.y>t.y&&s.left<t.x?(c=new pt(i.x,t.y),l=new pt(i.x,(t.y+i.y)/2),0===n?(c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),l.x=c.x,l.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(c.x=t.x>s.right?this.computeMidOrthoPosition(t.x,t.y,s.right,i.y,!1):t.x>s.left&&(270===n&&t.y<s.top||90===n&&t.y>s.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):s.left,l.x=c.x,l.y=i.y):180===n&&t.x>s.right&&t.y>s.top&&t.y<s.bottom&&(c.x=t.x,c.y=t.y<i.y?Math.min(i.y,s.top):Math.max(i.y,s.bottom),l.y=c.y)):(c=new pt(t.x,i.y),l=new pt((t.x+i.x)/2,i.y),(0===n||90===n&&i.y<r.top||270===n&&i.y>r.bottom)&&(0===n&&(s.aa(t)||r.aa(i))?c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(0===n||90===n)?c.y=this.computeMidOrthoPosition(t.x,r.top,i.x,Math.max(i.y,s.bottom),!0):i.y>t.y&&(0===n||270===n)&&(c.y=this.computeMidOrthoPosition(t.x,r.bottom,i.x,Math.min(i.y,s.top),!0)),l.x=i.x,l.y=c.y),c.y>r.top&&c.y<r.bottom&&(i.x<=r.right&&i.x>=t.x||t.x>=s.left&&t.x<=i.x?90!==n&&270!==n||(c=new pt(Math.min((t.x+i.x)/2,t.x),t.y),l=new pt(c.x,i.y)):(c.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,180===n?r.top:Math.min(r.top,s.top)):Math.max(i.y,180===n?r.bottom:Math.max(r.bottom,s.bottom)),l.x=i.x,l.y=c.y))):90===e?i.y>t.y||180===n&&i.x<t.x&&s.bottom>t.y||0===n&&i.x>t.x&&s.bottom>t.y?(c=new pt(t.x,i.y),l=new pt((t.x+i.x)/2,i.y),270===n?(c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),l.x=i.x,l.y=c.y):180===n&&i.x<t.x||0===n&&i.x>t.x?(c.y=t.y<s.top?this.computeMidOrthoPosition(t.x,t.y,i.x,s.top,!0):t.y<s.bottom&&(180===n&&t.x<s.left||0===n&&t.x>s.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):s.bottom,l.x=i.x,l.y=c.y):90===n&&t.y<s.top&&t.x>s.left&&t.x<s.right&&(c.x=t.x<i.x?Math.min(i.x,s.left):Math.max(i.x,s.right),c.y=t.y,l.x=c.x)):(c=new pt(i.x,t.y),l=new pt(i.x,(t.y+i.y)/2),(270===n||0===n&&i.x<r.left||180===n&&i.x>r.right)&&(270===n&&(s.aa(t)||r.aa(i))?c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(270===n||0===n)?c.x=this.computeMidOrthoPosition(r.left,t.y,Math.max(i.x,s.right),i.y,!1):i.x>t.x&&(270===n||180===n)&&(c.x=this.computeMidOrthoPosition(r.right,t.y,Math.min(i.x,s.left),i.y,!1)),l.x=c.x,l.y=i.y),c.x>r.left&&c.x<r.right&&(i.y>=r.top&&i.y<=t.y||t.y<=s.bottom&&t.y>=i.y?0!==n&&180!==n||(c=new pt(t.x,Math.max((t.y+i.y)/2,t.y)),l=new pt(i.x,c.y)):(c.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,90===n?r.left:Math.min(r.left,s.left)):Math.max(i.x,90===n?r.right:Math.max(r.right,s.right)),l.x=c.x,l.y=i.y))):i.y<t.y||180===n&&i.x<t.x&&s.top<t.y||0===n&&i.x>t.x&&s.top<t.y?(c=new pt(t.x,i.y),l=new pt((t.x+i.x)/2,i.y),90===n?(c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),l.x=i.x,l.y=c.y):180===n&&i.x<t.x||0===n&&i.x>=t.x?(c.y=t.y>s.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,s.bottom,!0):t.y>s.top&&(180===n&&t.x<s.left||0===n&&t.x>s.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):s.top,l.x=i.x,l.y=c.y):270===n&&t.y>s.bottom&&t.x>s.left&&t.x<s.right&&(c.x=t.x<i.x?Math.min(i.x,s.left):Math.max(i.x,s.right),c.y=t.y,l.x=c.x)):(c=new pt(i.x,t.y),l=new pt(i.x,(t.y+i.y)/2),(90===n||0===n&&i.x<r.left||180===n&&i.x>r.right)&&(90===n&&(s.aa(t)||r.aa(i))?c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(90===n||0===n)?c.x=this.computeMidOrthoPosition(r.left,t.y,Math.max(i.x,s.right),i.y,!1):i.x>t.x&&(90===n||180===n)&&(c.x=this.computeMidOrthoPosition(r.right,t.y,Math.min(i.x,s.left),i.y,!1)),l.x=c.x,l.y=i.y),c.x>r.left&&c.x<r.right&&(i.y<=r.bottom&&i.y>=t.y||t.y>=s.top&&t.y<=i.y?0!==n&&180!==n||(c=new pt(t.x,Math.min((t.y+i.y)/2,t.y)),l=new pt(i.x,c.y)):(c.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,270===n?r.left:Math.min(r.left,s.left)):Math.max(i.x,270===n?r.right:Math.max(r.right,s.right)),l.x=c.x,l.y=i.y)));var u=c,d=l,h=i;if(this.isAvoiding){var p=this.diagram;if(null===p||!Ba(p)||r.aa(h)&&!a.Xd(o)||s.aa(t)&&!o.Xd(a)||o===a||this.layer.isTemporary)e=!1;else{var f=Ra(p,!0,this.containingGroup,null);if(17!==this.segmentIndex&&f.lk(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&f.lk(Math.min(u.x,d.x),Math.min(u.y,d.y),Math.abs(u.x-d.x),Math.abs(u.y-d.y))&&f.lk(Math.min(d.x,h.x),Math.min(d.y,h.y),Math.abs(d.x-h.x),Math.abs(d.y-h.y)))e=!1;else{o=t,a=h;var g=i=null;if(p.isVirtualized){(p=f.bounds.copy()).Vc(-f.cm,-f.bm);var m=pt.alloc();Ud(f,t.x,t.y)||(qe.Uc(p.x,p.y,p.x+p.width,p.y+p.height,t.x,t.y,u.x,u.y,m)?(i=t=m.copy(),e=m.Sa(u)):qe.Uc(p.x,p.y,p.x+p.width,p.y+p.height,u.x,u.y,d.x,d.y,m)?(i=t=m.copy(),e=m.Sa(d)):qe.Uc(p.x,p.y,p.x+p.width,p.y+p.height,d.x,d.y,h.x,h.y,m)&&(i=t=m.copy(),e=m.Sa(h))),Ud(f,h.x,h.y)||(qe.Uc(p.x,p.y,p.x+p.width,p.y+p.height,h.x,h.y,d.x,d.y,m)?(g=h=m.copy(),n=d.Sa(m)):qe.Uc(p.x,p.y,p.x+p.width,p.y+p.height,d.x,d.y,u.x,u.y,m)?(g=h=m.copy(),n=u.Sa(m)):qe.Uc(p.x,p.y,p.x+p.width,p.y+p.height,u.x,u.y,t.x,t.y,m)&&(g=h=m.copy(),n=t.Sa(m))),pt.free(m)}(r=r.copy().Hc(s)).Vc(f.cm*(s=f.yA),f.bm*s),Kd(f,t,e,h,n,r),s=Gd(f,h.x,h.y),!f.abort&&s>=Qd&&(Wd(f),r.Vc(f.cm*(s=f.bA),f.bm*s),Kd(f,t,e,h,n,r),s=Gd(f,h.x,h.y)),!f.abort&&s>=Qd&&f.FA&&(Wd(f),Kd(f,t,e,h,n,f.bounds),s=Gd(f,h.x,h.y)),!f.abort&&s<Qd&&Gd(f,h.x,h.y)!==Zd?(dd(this,f,h.x,h.y,n,!0),r=this.i(2),4>this.pointsCount?(0===e||180===e?(r.x=t.x,r.y=h.y):(r.x=h.x,r.y=t.y),this.K(2,r.x,r.y),this.m(3,r.x,r.y)):(h=this.i(3),0===e||180===e?qe.A(r.x,h.x)?(r=0===e?Math.max(r.x,t.x):Math.min(r.x,t.x),this.K(2,r,t.y),this.K(3,r,h.y)):qe.A(r.y,h.y)?(Math.abs(t.y-r.y)<=f.bm/2&&(this.K(2,r.x,t.y),this.K(3,h.x,t.y)),this.m(2,r.x,t.y)):this.K(2,t.x,r.y):90!==e&&270!==e||(qe.A(r.y,h.y)?(r=90===e?Math.max(r.y,t.y):Math.min(r.y,t.y),this.K(2,t.x,r),this.K(3,h.x,r)):qe.A(r.x,h.x)?(Math.abs(t.x-r.x)<=f.cm/2&&(this.K(2,t.x,r.y),this.K(3,t.x,h.y)),this.m(2,t.x,r.y)):this.K(2,r.x,t.y))),null!==i&&(t=this.i(1),h=this.i(2),t.x!==h.x&&t.y!==h.y?0===e||180===e?this.m(2,t.x,h.y):this.m(2,h.x,t.y):0===e||180===e?this.m(2,o.x,i.y):this.m(2,i.x,o.y)),null!==g&&(0===n||180===n?this.qf(a.x,g.y):this.qf(g.x,a.y)),e=!0):e=!1}}}else e=!1;e||(this.ze(c),this.ze(l))}},id.prototype.computeMidOrthoPosition=function(t,e,i,n,o){var a=0;return this.hasCurviness()&&(a=this.computeCurviness()),o?(e+n)/2+a:(t+i)/2+a},id.prototype.iz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),o=bt(e,t,i.x,i.y,n.x,n.y),a=0,r=1;r<this.pointsCount-1;r++){i=this.i(r+1);var s=bt(e,t,n.x,n.y,i.x,i.y);n=i,s<o&&(a=r,o=s)}return a},id.prototype.cc=function(){this.Zn=!0},id.prototype.nk=function(t){if(!t){if(!1===this.ld)return;if(t=this.Ab(),!this.Zn&&(null===t||null!==t.geometry))return}if(this.ka=this.makeGeometry(),null!==(t=this.path)){t.ka=this.ka;for(var e=this.V.j,i=e.length,n=0;n<i;n++){var o=e[n];o!==t&&o.isPanelMain&&o instanceof al&&(o.ka=this.ka)}}},id.prototype.makeGeometry=function(){var t=this.ka,e=this.pointsCount;if(2>e)return t.type=ai,this.Zn=!1,t;var i=!1,n=this.diagram;null!==n&&vd(this)&&n.Pg.contains(this)&&(0!==this.Dl.width||0!==this.Dl.height)&&(i=!0);var o=this.i(0).copy(),a=o.copy();n=this.xb.j;var r=this.computeCurve();if(r===Dd&&3<=e&&!qe.$(this.smoothness,0))if(3===e){var s=this.i(1);n=Math.min(o.x,s.x);var c=Math.min(o.y,s.y);s=this.i(2),n=Math.min(n,s.x),c=Math.min(c,s.y)}else{if(this.isOrthogonal)for(c=0;c<e;c++)s=n[c],a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),c=this.i(n),a.x=Math.min(c.x,a.x),a.y=Math.min(c.y,a.y);n=a.x,c=a.y}else{for(c=0;c<e;c++)s=n[c],a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y);n=a.x,c=a.y}if(c-=this.Zu.y,o.x-=n-=this.Zu.x,o.y-=c,2!==e||vd(this)){if(t.type=ci,s=ou(t),0!==this.computeShortLength(!0)&&(o=pd(this,o,!0,a)),Ql(s,o.x,o.y,!1),r===Dd&&3<=e&&!qe.$(this.smoothness,0))if(3===e)e=(i=this.i(1)).x-n,i=i.y-c,(o=this.i(2).copy()).x-=n,o.y-=c,0!==this.computeShortLength(!1)&&(o=pd(this,o,!1,a)),eu(s,e,i,e,i,o.x,o.y);else if(this.isOrthogonal){a=new pt(n,c),o=this.i(1).copy(),r=new pt(n,c),e=new pt(n,c),i=this.i(0);for(var l,u=this.smoothness/3,d=1;d<this.pointsCount-1;d++){var h=i,p=l=this.i(d),f=this.i(fd(this,l,d,!1));if(!(qe.$(h.x,p.x)&&qe.$(p.x,f.x)||qe.$(h.y,p.y)&&qe.$(p.y,f.y))){var g=u;isNaN(g)&&(g=this.smoothness/3);var m=h.x,v=p.x,b=f.x;f=f.y;var _=g*hd(m,h=h.y,v,p=p.y);g*=hd(v,p,b,f),qe.$(h,p)&&qe.$(v,b)&&(v>m?f>p?(r.x=v-_,r.y=p-_,e.x=v+g,e.y=p+g):(r.x=v-_,r.y=p+_,e.x=v+g,e.y=p-g):f>p?(r.x=v+_,r.y=p-_,e.x=v-g,e.y=p+g):(r.x=v+_,r.y=p+_,e.x=v-g,e.y=p-g)),qe.$(m,v)&&qe.$(p,f)&&(p>h?(b>v?(r.x=v-_,r.y=p-_,e.x=v+g):(r.x=v+_,r.y=p-_,e.x=v-g),e.y=p+g):(b>v?(r.x=v-_,r.y=p+_,e.x=v+g):(r.x=v+_,r.y=p+_,e.x=v-g),e.y=p-g)),(qe.$(m,v)&&qe.$(v,b)||qe.$(h,p)&&qe.$(p,f))&&(h=.5*(h+f),r.x=m=.5*(m+b),r.y=h,e.x=m,e.y=h),(1===d||2===d&&qe.$(i.x,this.i(0).x)&&qe.$(i.y,this.i(0).y))&&(o.x=.5*(i.x+l.x),o.y=.5*(i.y+l.y)),eu(s,o.x-n,o.y-c,r.x-n,r.y-c,l.x-n,l.y-c),a.set(r),o.set(e),i=l}}a=i.x,i=i.y,o=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(o=pd(this,o.copy(),!1,yt)),eu(s,e.x-n,e.y-c,(a=.5*(a+o.x))-n,(i=.5*(i+o.y))-c,o.x-n,o.y-c)}else for(i=3;i<e;i+=3)a=this.i(i-2),i+3>=e&&(i=e-1),o=this.i(i-1),r=this.i(i),i===e-1&&0!==this.computeShortLength(!1)&&(r=pd(this,r.copy(),!1,yt)),eu(s,a.x-n,a.y-c,o.x-n,o.y-c,r.x-n,r.y-c);else{for((a=pt.alloc()).assign(this.i(0)),(o=pt.alloc()).assign(a),r=this.computeCorner(),d=1,l=0;d<e;){if(d=fd(this,a,d,1<d),u=this.i(d),d>=e-1){if(a.w(u)){if(0===l)for(d=1;d<e;)o.assign(a),gd(this,s,-n,-c,a,u=this.i(d++),i),a.assign(u)}else 0!==this.computeShortLength(!1)&&(u=pd(this,u.copy(),!1,yt)),gd(this,s,-n,-c,a,u,i);break}if(l=fd(this,u,d+1,d<e-3),d=-n,m=-c,h=u,g=this.i(l),v=i,qe.A(a.y,h.y)&&qe.A(h.x,g.x))if(p=Math.min(r,Math.abs(h.x-o.x)/2),p=b=Math.min(p,Math.abs(g.y-h.y)/2),qe.A(p,0))gd(this,s,d,m,a,h,v),a.assign(h);else{var w=f=h.x,y=_=h.y;y=g.y>h.y?h.y+b:h.y-b,gd(this,s,d,m,a,new pt(f=h.x>a.x?h.x-p:h.x+p,_),v),iu(s,h.x+d,h.y+m,w+d,y+m),a.h(w,y)}else qe.A(a.x,h.x)&&qe.A(h.y,g.y)?(p=Math.min(r,Math.abs(h.y-o.y)/2),p=b=Math.min(p,Math.abs(g.x-h.x)/2),qe.A(b,0)?(gd(this,s,d,m,a,h,v),a.assign(h)):(w=f=h.x,y=_=h.y,w=g.x>h.x?h.x+b:h.x-b,gd(this,s,d,m,a,new pt(f,_=h.y>a.y?h.y-p:h.y+p),v),iu(s,h.x+d,h.y+m,w+d,y+m),a.h(w,y))):(gd(this,s,d,m,a,h,v),a.assign(h));o.assign(u),d=l}pt.free(a)}au=s}else(s=this.i(1).copy()).x-=n,s.y-=c,0!==this.computeShortLength(!0)&&(o=pd(this,o,!0,a)),0!==this.computeShortLength(!1)&&(s=pd(this,s,!1,a)),t.type=ai,t.startX=o.x,t.startY=o.y,t.endX=s.x,t.endY=s.y;return this.Zn=!1,t},id.prototype.uq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var i=e.diagram;if(null!==i&&!i.animationManager.isAnimating){var n=!1;for(i=i.layers;i.next();){var o=i.value;if(o.visible)if(o===e){n=!0;for(var a=!1,r=(o=o.Ca.j).length,s=0;s<r;s++){var c=o[s];c instanceof id&&(c===this?a=!0:a&&_d(this,c,t))}}else if(n)for(o=(a=o.Ca.j).length,r=0;r<o;r++)(s=a[r])instanceof id&&_d(this,s,t)}}}},id.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),o=t.i(0);if(n.Ma(o))return!0;if(e=this.i(e-1),t=t.i(i-1),e.Ma(t)||n.Ma(t)||e.Ma(o))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},id.prototype.isVisible=function(){if(!su.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),null!==(i=this.fromNode)){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;null!==n;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(null===(i=i.findVisibleNode())||i===t)return!1}if(null!==(i=this.toNode)){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=i.findVisibleNode())||e===t)return!1}return!0},id.prototype.Ob=function(t){if(su.prototype.Ob.call(this,t),null!==this.Hf&&this.Hf.mm(),null!==this.ad)for(var e=this.ad.iterator;e.next();)e.value.Ob(t)},id.prototype.computeAdjusting=function(){return null!==this.diagram&&this.diagram.animationManager.isAnimating?Md:this.Dk},id.prototype.Hh=function(){return!0},h.Object.defineProperties(id.prototype,{fromNode:{get:function(){return this.Qe},set:function(t){var e=this.Qe;if(e!==t){var i=this.fromPort;null!==e&&(this.lf!==e&&Vu(e,this,i),yd(this),this.C(2)),this.Qe=t,null!==t&&this.Ob(t.isVisible()),this.Qf=null,this.Ta();var n=this.diagram;null!==n&&n.Z&&n.partManager.setFromNodeForLink(this,t,e);var o=this.fromPort,a=this.fromPortChanged;if(null!==a){var r=!0;null!==n&&(r=n.Z,n.Z=!0),a(this,i,o),null!==n&&(n.Z=r)}null!==t&&(this.lf!==t&&Au(t,this,o),wd(this),this.C(1)),this.g("fromNode",e,t),nd(this)}}},fromPortId:{get:function(){return this.Re},set:function(t){var e=this.Re;if(e!==t){var i=this.fromPort;null!==i&&Eu(this.fromNode,i),yd(this),this.Re=t;var n=this.fromPort;null!==n&&Eu(this.fromNode,n);var o=this.diagram;if(null!==o){var a=this.data,r=o.model;null!==a&&r.om()&&r.ly(a,t)}i!==n&&(this.Qf=null,this.Ta(),null!==(a=this.fromPortChanged)&&(r=!0,null!==o&&(r=o.Z,o.Z=!0),a(this,i,n),null!==o&&(o.Z=r))),wd(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Qe;return null===t?null:t.nt(this.Re)}},fromPortChanged:{get:function(){return this.Nn},set:function(t){var e=this.Nn;e!==t&&(this.Nn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.lf},set:function(t){var e=this.lf;if(e!==t){var i=this.toPort;null!==e&&(this.Qe!==e&&Vu(e,this,i),yd(this),this.C(2)),this.lf=t,null!==t&&this.Ob(t.isVisible()),this.Qf=null,this.Ta();var n=this.diagram;null!==n&&n.Z&&n.partManager.setToNodeForLink(this,t,e);var o=this.toPort,a=this.toPortChanged;if(null!==a){var r=!0;null!==n&&(r=n.Z,n.Z=!0),a(this,i,o),null!==n&&(n.Z=r)}null!==t&&(this.Qe!==t&&Au(t,this,o),wd(this),this.C(1)),this.g("toNode",e,t),nd(this)}}},toPortId:{get:function(){return this.mf},set:function(t){var e=this.mf;if(e!==t){var i=this.toPort;null!==i&&Eu(this.toNode,i),yd(this),this.mf=t;var n=this.toPort;null!==n&&Eu(this.toNode,n);var o=this.diagram;if(null!==o){var a=this.data,r=o.model;null!==a&&r.om()&&r.py(a,t)}i!==n&&(this.Qf=null,this.Ta(),null!==(a=this.toPortChanged)&&(r=!0,null!==o&&(r=o.Z,o.Z=!0),a(this,i,n),null!==o&&(o.Z=r))),wd(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.lf;return null===t?null:t.nt(this.mf)}},toPortChanged:{get:function(){return this.Wp},set:function(t){var e=this.Wp;e!==t&&(this.Wp=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.Vg:Ie},set:function(t){this.Ec();var e=this.O.Vg;e.w(t)||(t=t.G(),this.O.Vg=t,this.g("fromSpot",e,t),(e.gd()||t.gd())&&null!==(t=this.fromNode)&&Eu(t,this.fromPort),this.Ta())}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.Tg:NaN},set:function(t){this.Ec();var e=this.O.Tg;e!==t&&(0>t&&y(t,">= 0",id,"fromEndSegmentLength"),this.O.Tg=t,this.g("fromEndSegmentLength",e,t),this.Ta())}},fromShortLength:{get:function(){return null!==this.O?this.O.Ug:NaN},set:function(t){this.Ec();var e=this.O.Ug;e!==t&&(this.O.Ug=t,this.g("fromShortLength",e,t),this.cc())}},toSpot:{get:function(){return null!==this.O?this.O.vh:Ie},set:function(t){this.Ec();var e=this.O.vh;e.w(t)||(t=t.G(),this.O.vh=t,this.g("toSpot",e,t),(e.gd()||t.gd())&&null!==(t=this.toNode)&&Eu(t,this.toPort),this.Ta())}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.th:NaN},set:function(t){this.Ec();var e=this.O.th;e!==t&&(0>t&&y(t,">= 0",id,"toEndSegmentLength"),this.O.th=t,this.g("toEndSegmentLength",e,t),this.Ta())}},toShortLength:{get:function(){return null!==this.O?this.O.uh:NaN},set:function(t){this.Ec();var e=this.O.uh;e!==t&&(this.O.uh=t,this.g("toShortLength",e,t),this.cc())}},isLabeledLink:{get:function(){return null!==this.ad&&0<this.ad.count}},labelNodes:{get:function(){return null===this.ad?G:this.ad.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Pa)},set:function(t){var e=0!=(1&this.Pa);e!==t&&(this.Pa^=1,this.g("relinkableFrom",e,t),this.Lb())}},relinkableTo:{get:function(){return 0!=(2&this.Pa)},set:function(t){var e=0!=(2&this.Pa);e!==t&&(this.Pa^=2,this.g("relinkableTo",e,t),this.Lb())}},resegmentable:{get:function(){return 0!=(4&this.Pa)},set:function(t){var e=0!=(4&this.Pa);e!==t&&(this.Pa^=4,this.g("resegmentable",e,t),this.Lb())}},isTreeLink:{get:function(){return 0!=(8&this.Pa)},set:function(t){var e=0!=(8&this.Pa);e!==t&&(this.Pa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&zu(this.fromNode),null!==this.toNode&&zu(this.toNode))}},path:{get:function(){var t=this.Ab();return t instanceof al?t:null}},routeBounds:{get:function(){this.hj();var t=this.Dl,e=1/0,i=1/0,n=this.pointsCount;if(0===n)t.h(NaN,NaN,0,0);else{if(1===n)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(2===n){n=this.i(0);var o=this.i(1);e=Math.min(n.x,o.x),i=Math.min(n.y,o.y),t.h(n.x,n.y,0,0),t.Ie(o)}else if(this.computeCurve()===Dd&&3<=n&&!this.isOrthogonal)if(o=this.i(0),t.h(e=o.x,i=o.y,0,0),3===n){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var a=this.i(2);e=Math.min(a.x,e),i=Math.min(a.y,i),qe.am(o.x,o.y,n.x,n.y,n.x,n.y,a.x,a.y,.5,t)}else for(a=3;a<n;a+=3){var r=this.i(a-2);a+3>=n&&(a=n-1);var s=this.i(a-1),c=this.i(a);qe.am(o.x,o.y,r.x,r.y,s.x,s.y,c.x,c.y,.5,t),e=Math.min(c.x,e),i=Math.min(c.y,i),o=c}else for(o=this.i(0),a=this.i(1),e=Math.min(o.x,a.x),i=Math.min(o.y,a.y),t.h(o.x,o.y,0,0),t.Ie(a),o=2;o<n;o++)a=this.i(o),e=Math.min(a.x,e),i=Math.min(a.y,i),t.Ie(a);this.Zu.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.hj(),this.computeMidPoint(new pt)}},midAngle:{get:function(){return this.hj(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.Hr){this.ld||rd(this);for(var t=this.Hr=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),o=this.i(i+1);qe.$(n.x,o.x)?0>(n=o.y-n.y)&&(n=-n):qe.$(n.y,o.y)?0>(n=o.x-n.x)&&(n=-n):n=Math.sqrt(n.Ce(o)),t.push(n)}}return this.Hr}},flattenedTotalLength:{get:function(){var t=this.tu;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.tu=t}return t}},points:{get:function(){return this.xb},set:function(t){var e=this.xb;if(e!==t){var i=null;if(Array.isArray(t)){var n=0==t.length%2;if(n)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){n=!1;break}if(n)for(i=new tt,n=0;n<t.length/2;n++)o=new pt(t[2*n],t[2*n+1]).freeze(),i.add(o);else{for(n=!0,o=0;o<t.length;o++){var a=t[o];if(!S(a)||"number"!=typeof a.x||isNaN(a.x)||"number"!=typeof a.y||isNaN(a.y)){n=!1;break}}if(n)for(i=new tt,n=0;n<t.length;n++)i.add(new pt((o=t[n]).x,o.y).freeze())}}else if(t instanceof tt)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else _("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.xb=i,this.cc(),this.o(),rd(this),null!==(t=this.diagram)&&(t.kk||t.undoManager.isUndoingRedoing||t.At.add(this),t.animationManager.qc&&(this.lh=i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.xb.count}},ld:{get:function(){return 0!=(16&this.Pa)},set:function(t){0!=(16&this.Pa)!==t&&(this.Pa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Pa)},set:function(t){0!=(32&this.Pa)!==t&&(this.Pa^=32)}},nv:{get:function(){return 0!=(64&this.Pa)},set:function(t){0!=(64&this.Pa)!==t&&(this.Pa^=64)}},defaultFromPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},defaultToPoint:{get:function(){return this.I},set:function(t){this.I=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.Lj.value)}},isAvoiding:{get:function(){return 4==(4&this.Lj.value)}},geometry:{get:function(){return this.Zn&&(this.hj(),this.ka=this.makeGeometry()),this.ka}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!ld(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!ld(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Dk},set:function(t){var e=this.Dk;e!==t&&(this.Dk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.pn},set:function(t){var e=this.pn;e!==t&&(this.pn=t,this.cc(),this.g("corner",e,t))}},curve:{get:function(){return this.rn},set:function(t){var e=this.rn;e!==t&&(this.rn=t,this.Ta(),this.cc(),bd(this,e===Id||e===Pd||t===Id||t===Pd),this.g("curve",e,t))}},curviness:{get:function(){return this.sn},set:function(t){var e=this.sn;e!==t&&(this.sn=t,this.Ta(),this.cc(),this.g("curviness",e,t))}},routing:{get:function(){return this.Lj},set:function(t){var e=this.Lj;e!==t&&(this.Lj=t,this.Qf=null,this.Ta(),bd(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Jp},set:function(t){var e=this.Jp;e!==t&&(this.Jp=t,this.cc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.om())return t.model.Vb(this.data)}}}),id.prototype.invalidateOtherJumpOvers=id.prototype.uq,id.prototype.findClosestSegment=id.prototype.iz,id.prototype.updateRoute=id.prototype.hj,id.prototype.invalidateRoute=id.prototype.Ta,id.prototype.rollbackRoute=id.prototype.hy,id.prototype.commitRoute=id.prototype.rf,id.prototype.startRoute=id.prototype.Kh,id.prototype.clearPoints=id.prototype.Zj,id.prototype.removePoint=id.prototype.aw,id.prototype.addPointAt=id.prototype.qf,id.prototype.addPoint=id.prototype.ze,id.prototype.insertPointAt=id.prototype.m,id.prototype.insertPoint=id.prototype.Tz,id.prototype.setPointAt=id.prototype.K,id.prototype.setPoint=id.prototype.jd,id.prototype.getPoint=id.prototype.i,id.prototype.getOtherPort=id.prototype.Hz,id.prototype.getOtherNode=id.prototype.rt;var kd=new W(id,"Normal",1),xd=new W(id,"Orthogonal",2),Sd=new W(id,"AvoidsNodes",6),Td=new W(id,"AvoidsNodesStraight",7),Cd=new W(id,"None",0),Dd=new W(id,"Bezier",9),Id=new W(id,"JumpGap",10),Pd=new W(id,"JumpOver",11),Md=new W(id,"End",17),Od=new W(id,"Scale",18),$d=new W(id,"Stretch",19),jd=new W(id,"OrientAlong",21),Ld=new W(id,"OrientPlus90",22),Ed=new W(id,"OrientMinus90",23),Nd=new W(id,"OrientOpposite",24),Ad=new W(id,"OrientUpright",25),Vd=new W(id,"OrientPlus90Upright",26),zd=new W(id,"OrientMinus90Upright",27),Fd=new W(id,"OrientUpright45",28);function Bd(t,e,i,n){nt(this),this.me=this.Or=!1,this.Dt=t,this.ay=e,this.Qv=i,this.by=n,this.links=[]}function Rd(){nt(this),this.qy=this.group=null,this.ut=!0,this.abort=!1,this.Pd=this.Od=1,this.yo=this.xo=-1,this.lc=this.kc=8,this.Cb=[[]],this.Sj=this.Rj=0,this.FA=!1,this.yA=22,this.bA=111}function Ud(t,e,i){return t.Od<=e&&e<=t.xo&&t.Pd<=i&&i<=t.yo}function Gd(t,e,i){return Ud(t,e,i)?(e-=t.Od,i-=t.Pd,t.Cb[0|(e/=t.kc)][0|(i/=t.lc)]):th}function Hd(t,e,i){Ud(t,e,i)&&(e-=t.Od,i-=t.Pd,t.Cb[0|(e/=t.kc)][0|(i/=t.lc)]=Zd)}function Wd(t){if(null!==t.Cb)for(var e=0;e<=t.Rj;e++)for(var i=0;i<=t.Sj;i++)t.Cb[e][i]>=Jd&&(t.Cb[e][i]=th)}function qd(t,e,i,n,o,a,r,s,c){if(!(e<a||e>r||i<s||i>c)){var l=0|e,u=0|i,d=t.Cb[l][u];if(d>=Jd&&d<Qd)for(o?u+=n:l+=n,d+=1;a<=l&&l<=r&&s<=u&&u<=c&&!(d>=t.Cb[l][u]);)t.Cb[l][u]=d,d+=1,o?u+=n:l+=n;if(l=o?u:l,o)if(0<n)for(i+=n;i<l;i+=n)qd(t,e,i,1,!o,a,r,s,c),qd(t,e,i,-1,!o,a,r,s,c);else for(i+=n;i>l;i+=n)qd(t,e,i,1,!o,a,r,s,c),qd(t,e,i,-1,!o,a,r,s,c);else if(0<n)for(e+=n;e<l;e+=n)qd(t,e,i,1,!o,a,r,s,c),qd(t,e,i,-1,!o,a,r,s,c);else for(e+=n;e>l;e+=n)qd(t,e,i,1,!o,a,r,s,c),qd(t,e,i,-1,!o,a,r,s,c)}}function Xd(t,e,i,n,o,a,r,s,c){var l=Zd,u=Jd;for(t.Cb[e|=0][i|=0]=u;l===Zd&&e>a&&e<r&&i>s&&i<c;)t.Cb[e][i]=u+=1,o?i+=n:e+=n,l=t.Cb[e][i]}function Yd(t,e,i,n,o,a,r,s,c){var l=Zd,u=Qd;for(t.Cb[e|=0][i|=0]=u;l===Zd&&e>a&&e<r&&i>s&&i<c;)t.Cb[e][i]=u,o?i+=n:e+=n,l=t.Cb[e][i]}function Kd(t,e,i,n,o,a){if(null!==t.Cb){t.abort=!1;var r=e.x,s=e.y;if(Ud(t,r,s)&&(r-=t.Od,r/=t.kc,s-=t.Pd,s/=t.lc,Ud(t,e=n.x,n=n.y)))if(e-=t.Od,e/=t.kc,n-=t.Pd,n/=t.lc,1>=Math.abs(r-e)&&1>=Math.abs(s-n))t.abort=!0;else{var c=a.x,l=a.y,u=a.x+a.width,d=a.y+a.height;c-=t.Od,c/=t.kc,l-=t.Pd,l/=t.lc,u-=t.Od,u/=t.kc,d-=t.Pd,d/=t.lc,a=Math.max(0,Math.min(t.Rj,0|c)),u=Math.min(t.Rj,Math.max(0,0|u)),l=Math.max(0,Math.min(t.Sj,0|l)),d=Math.min(t.Sj,Math.max(0,0|d)),e|=0,n|=0,c=0===i||90===i?1:-1,i=90===i||270===i,t.Cb[r|=0][s|=0]===Zd?(Xd(t,r,s,c,i,a,u,l,d),Xd(t,r,s,1,!i,a,u,l,d),Xd(t,r,s,-1,!i,a,u,l,d)):Xd(t,r,s,c,i,r,s,r,s),t.Cb[e][n]===Zd?(Yd(t,e,n,0===o||90===o?1:-1,90===o||270===o,a,u,l,d),Yd(t,e,n,1,!(90===o||270===o),a,u,l,d),Yd(t,e,n,-1,!(90===o||270===o),a,u,l,d)):Yd(t,e,n,c,i,e,n,e,n),t.abort||(qd(t,r,s,1,!1,a,u,l,d),qd(t,r,s,-1,!1,a,u,l,d),qd(t,r,s,1,!0,a,u,l,d),qd(t,r,s,-1,!0,a,u,l,d))}}}id.className="Link",id.Normal=kd,id.Orthogonal=xd,id.AvoidsNodes=Sd,id.AvoidsNodesStraight=Td,id.None=Cd,id.Bezier=Dd,id.JumpGap=Id,id.JumpOver=Pd,id.End=Md,id.Scale=Od,id.Stretch=$d,id.OrientAlong=jd,id.OrientPlus90=Ld,id.OrientMinus90=Ed,id.OrientOpposite=Nd,id.OrientUpright=Ad,id.OrientPlus90Upright=Vd,id.OrientMinus90Upright=zd,id.OrientUpright45=Fd,Bd.prototype.mm=function(){if(!this.Or){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.vu.add(this),this.me=t.undoManager.isUndoingRedoing)}this.Or=!0},Bd.prototype.xw=function(){if(this.Or){this.Or=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=null===i||i.kk&&!this.me,this.me=!1,e.arrangeBundledLinks(t,i),1===t.length&&(e.Hf=null,t.length=0)}0===t.length&&(t=this.Dt,null!==this&&null!==t.Me&&t.Me.remove(this),t=this.Qv,null!==this&&null!==t.Me&&t.Me.remove(this))}},Bd.className="LinkBundle",Rd.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Od=Math.floor((t.x-this.kc)/this.kc)*this.kc,this.Pd=Math.floor((e-this.lc)/this.lc)*this.lc,this.xo=Math.ceil((i+2*this.kc)/this.kc)*this.kc,this.yo=Math.ceil((n+2*this.lc)/this.lc)*this.lc,t=1+(0|Math.ceil((this.xo-this.Od)/this.kc)),e=1+(0|Math.ceil((this.yo-this.Pd)/this.lc)),null===this.Cb||this.Rj<t-1||this.Sj<e-1){for(i=[],n=0;n<=t;n++)i[n]=[];this.Cb=i,this.Rj=t-1,this.Sj=e-1}if(t=th,null!==this.Cb)for(e=0;e<=this.Rj;e++)for(i=0;i<=this.Sj;i++)this.Cb[e][i]=t}},Rd.prototype.lk=function(t,e,i,n){if(t>this.xo||t+i<this.Od||e>this.yo||e+n<this.Pd)return!0;t=(t-this.Od)/this.kc|0,e=(e-this.Pd)/this.lc|0,i=Math.max(0,i)/this.kc+1|0;var o=Math.max(0,n)/this.lc+1|0;if(0>t&&(i+=t,t=0),0>e&&(o+=e,e=0),0>i||0>o)return!0;for(n=0|Math.min(t+i-1,this.Rj),i=0|Math.min(e+o-1,this.Sj);t<=n;t++)for(o=e;o<=i;o++)if(this.Cb[t][o]===Zd)return!1;return!0},h.Object.defineProperties(Rd.prototype,{bounds:{get:function(){return new Vt(this.Od,this.Pd,this.xo-this.Od,this.yo-this.Pd)}},cm:{get:function(){return this.kc},set:function(t){0<t&&t!==this.kc&&(this.kc=t,this.initialize(this.bounds))}},bm:{get:function(){return this.lc},set:function(t){0<t&&t!==this.lc&&(this.lc=t,this.initialize(this.bounds))}}});var Zd=0,Jd=1,Qd=999999,th=Qd+1;function eh(){nt(this),this.port=this.node=null,this.Yd=[],this.zq=!1}function ih(t,e,i,n){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&15!==e&&0>(i-=15)&&(i+=360),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function nh(t,e){var i=t.Yd;if(0===i.length){t:if(!t.zq){i=t.zq,t.zq=!0;var n=null,o=t.node,a=o instanceof Ku?o:null;if(null===a||a.isSubGraphExpanded)var r=o.isTreeExpanded?o.findLinksConnected(t.port.portId):o.Lx();else{if(!a.actualBounds.v()){t.zq=i;break t}r=(n=a).uv()}a=t.Yd.length=0;var s=t.port.ga(oe,pt.alloc()),c=t.port.ga(he,pt.alloc());for((o=Vt.allocAt(s.x,s.y,0,0)).Ie(c),pt.free(s),pt.free(c),s=pt.allocAt(o.x+o.width/2,o.y+o.height/2),c=t.port.Xi(),r=r.iterator;r.next();){var l=r.value;if(l.isVisible()&&l.fromPort!==l.toPort){var u=l.fromPort===t.port||null!==l.fromNode&&l.fromNode.Xd(n),d=l.computeSpot(u,t.port);if(d.gd()&&null!==(u=u?l.toPort:l.fromPort)){var h=u.part;if(null!==h){var p=h.findVisibleNode();null!==p&&p!==h&&(u=(h=p).port),u=l.computeOtherPoint(h,u),h=s.Sa(u),0>(h-=c)&&(h+=360),0===(d=ih(o,d,h,l.isOrthogonal))?(d=4,180<h&&(h-=360)):d=90===d?8:180===d?2:1,void 0===(p=t.Yd[a])?(p=new oh(l,h,d),t.Yd[a]=p):(p.link=l,p.angle=h,p.yc=d),p.Uv.set(u),a++}}}}for(pt.free(s),t.Yd.sort(eh.prototype.l),c=t.Yd.length,n=-1,a=s=0;a<c;a++)void 0!==(r=t.Yd[a])&&(r.yc!==n&&(n=r.yc,s=0),r.qq=s,s++);for(n=-1,s=0,a=c-1;0<=a;a--)void 0!==(c=t.Yd[a])&&(c.yc!==n&&(n=c.yc,s=c.qq+1),c.dm=s);if(a=t.Yd,d=t.port,n=t.node.portSpreading,s=pt.alloc(),c=pt.alloc(),r=pt.alloc(),l=pt.alloc(),d.ga(oe,s),d.ga(re,c),d.ga(he,r),d.ga(ue,l),p=h=u=d=0,n===Yu)for(var f=0;f<a.length;f++){var g=a[f];if(null!==g){var m=g.link.computeThickness();switch(g.yc){case 8:h+=m;break;case 2:p+=m;break;case 1:d+=m;break;default:case 4:u+=m}}}var v=f=0,b=1,_=g=0;for(m=0;m<a.length;m++){var w=a[m];if(null!==w){if(f!==w.yc){switch(f=w.yc){case 8:var y=r;v=l;break;case 2:y=l,v=s;break;case 1:y=s,v=c;break;default:case 4:y=c,v=r}switch(g=v.x-y.x,_=v.y-y.y,f){case 8:h>Math.abs(g)?(b=Math.abs(g)/h,h=Math.abs(g)):b=1;break;case 2:p>Math.abs(_)?(b=Math.abs(_)/p,p=Math.abs(_)):b=1;break;case 1:d>Math.abs(g)?(b=Math.abs(g)/d,d=Math.abs(g)):b=1;break;default:case 4:u>Math.abs(_)?(b=Math.abs(_)/u,u=Math.abs(_)):b=1}v=0}var k=w.xq;if(n===Yu){switch(w=w.link.computeThickness(),w*=b,k.set(y),f){case 8:k.x=y.x+g/2+h/2-v-w/2;break;case 2:k.y=y.y+_/2+p/2-v-w/2;break;case 1:k.x=y.x+g/2-d/2+v+w/2;break;default:case 4:k.y=y.y+_/2-u/2+v+w/2}v+=w}else{var x=.5;n===Xu&&(x=(w.qq+1)/(w.dm+1)),k.x=y.x+g*x,k.y=y.y+_*x}}}for(pt.free(s),pt.free(c),pt.free(r),pt.free(l),y=t.Yd,a=0;a<y.length;a++)null!==(n=y[a])&&(n.sv=t.computeEndSegmentLength(n));t.zq=i,Vt.free(o)}i=t.Yd}for(t=0;t<i.length;t++)if(null!==(o=i[t])&&o.link===e)return o;return null}function oh(t,e,i){this.link=t,this.angle=e,this.yc=i,this.Uv=new pt,this.dm=this.qq=0,this.xq=new pt,this.sv=0}function ah(){this.vh=this.Vg=Ie,this.uh=this.Ug=this.th=this.Tg=NaN,this.Up=this.Ln=null,this.Vp=this.Mn=1/0}function rh(){nt(this),this.I=this.B=null,this.oi=this.bo=!0,this.io=!1,this.Wm=new pt(0,0).freeze(),this.eo=!0,this.co=null,this.Sw="",this.u=null,this.ho=!1,this.l=null}function sh(t,e,i,n,o,a,r,s){for(i=i.iterator;i.next();){var c=i.value;n&&!c.isTopLevel||null!==o&&!o(c)||!c.canLayout()||(a&&c instanceof Ou?c.isLinkLabel||(c instanceof Ku&&null===c.layout?sh(t,e,c.memberParts,!1,o,a,r,s):(ch(c),e.add(c))):r&&c instanceof id?e.add(c):!s||!c.Wb()||c instanceof Ou||(ch(c),e.add(c)))}}function ch(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.zb()}function lh(t){nt(this),this.ic=t,this.nf=new it,this.fe=new it,this.Et=new ht,this.zt=new ht}function uh(t,e){if(null===e)return!1;var i=t.nf.remove(e);return i&&null!==(e=e.node)&&t.Et.remove(e),i}function dh(t,e){if(null!==e){t.fe.add(e);var i=e.link;null!==i&&null===t.lq(i)&&t.zt.add(i,e),e.network=t}}function hh(t,e){null!==e&&t.fe.remove(e)&&null!==(e=e.link)&&t.zt.remove(e)}function ph(t,e,i){if(null!==i&&i.network!==e){uh(t,i),e.Bh(i);for(var n=i.sourceEdges;n.next();){var o=n.value;o.network!==e&&(hh(t,o),dh(e,o),ph(t,e,o.fromVertex))}for(n=i.destinationEdges;n.next();)(i=n.value).network!==e&&(hh(t,i),dh(e,i),ph(t,e,i.toVertex))}}function fh(t){nt(this),this.Yc=t,this.l=new Vt(0,0,10,10).freeze(),this.u=new pt(5,5).freeze(),this.zi=this.ib=null,this.Dg=new tt,this.vg=new tt}function gh(t,e){return e=e.zi,(t=t.zi)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function mh(t){nt(this),this.kd=t,this.qg=this.Sf=this.tl=this.ib=null}function vh(){rh.call(this),this.isViewportSized=!0,this.$p=this.aq=NaN,this.Kg=new Lt(NaN,NaN).freeze(),this.ef=new Lt(10,10).freeze(),this.wb=wh,this.Bb=yh,this.Qc=Th,this.Kc=bh}function bh(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Rd.className="PositionArray",eh.prototype.toString=function(){for(var t=this.Yd,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];null!==n&&(e+="\n  "+n.toString())}return e},eh.prototype.mm=function(){this.Yd.length=0},eh.prototype.l=function(t,e){return t===e?0:null===t?-1:null===e?1:t.yc<e.yc?-1:t.yc>e.yc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},eh.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,ne,e.fromPort===this.port),n=t.qq;if(0>n)return i;var o=t.dm;if(1>=o||!e.isOrthogonal)return i;e=t.Uv;var a=t.xq;return 2!==t.yc&&8!==t.yc||(n=o-1-n),((t=2===t.yc||4===t.yc)?e.y<a.y:e.x<a.x)?i+8*n:(t?e.y===a.y:e.x===a.x)?i:i+8*(o-1-n)},eh.className="Knot",oh.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.yc.toString()+":"+this.qq.toString()+"/"+this.dm.toString()+" "+this.xq.toString()+" "+this.sv.toString()+" "+this.Uv.toString()},oh.className="LinkInfo",ah.prototype.copy=function(){var t=new ah;return t.Vg=this.Vg.G(),t.vh=this.vh.G(),t.Tg=this.Tg,t.th=this.th,t.Ug=this.Ug,t.uh=this.uh,t.Ln=this.Ln,t.Up=this.Up,t.Mn=this.Mn,t.Vp=this.Vp,t},ah.className="LinkSettings",rh.prototype.cloneProtected=function(t){t.bo=this.bo,t.oi=this.oi,t.io=this.io,t.Wm.assign(this.Wm),t.eo=this.eo,t.co=this.co,t.Sw=this.Sw,t.ho=!0},rh.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},rh.prototype.eb=function(){},rh.prototype.toString=function(){var t=O(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},rh.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Xc(),this.isOngoing&&t.kk||this.isInitial&&!t.kk)&&(this.isValidLayout=!1,t.Pb())}}},rh.prototype.createNetwork=function(){return new lh(this)},rh.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof Eo?(e.ug(t.nodes,!0),e.ug(t.links,!0)):e.ug(t instanceof Ku?t.memberParts:t.iterator),e},rh.prototype.updateParts=function(){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(null!==i&&null!==(t=i.diagram))break}this.isValidLayout=!0;try{null!==t&&t.ua("Layout"),this.commitLayout()}finally{null!==t&&t.Ua("Layout")}},rh.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},rh.prototype.doLayout=function(t){var e=new it;t instanceof Eo?(sh(this,e,t.nodes,!0,this.uk,!0,!1,!0),sh(this,e,t.parts,!0,this.uk,!0,!1,!0)):t instanceof Ku?sh(this,e,t.memberParts,!1,this.uk,!0,!1,!0):e.addAll(t.iterator);var i=e.count;if(0<i){null!==(t=this.diagram)&&t.ua("Layout"),i=Math.ceil(Math.sqrt(i)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,o=n,a=this.arrangementOrigin.y,r=0,s=0;for(e=e.iterator;e.next();){var c=e.value;ch(c);var l=c.measuredBounds,u=l.width;l=l.height,c.moveTo(o,a),c instanceof Ku&&(c.uk=!1),o+=Math.max(u,50)+20,s=Math.max(s,Math.max(l,50)),r>=i-1?(r=0,o=n,a+=s+20,s=0):r++}null!==t&&t.Ua("Layout")}this.isValidLayout=!0},rh.prototype.uk=function(t){return!(t.location.v()&&!(t instanceof Ku&&t.uk))},rh.prototype.Zi=function(t,e){var i=this.boundsComputation;return null!==i?(e||(e=new Vt),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},rh.prototype.Ax=function(t){var e=new it;return t instanceof Eo?(sh(this,e,t.nodes,!0,null,!0,!0,!0),sh(this,e,t.links,!0,null,!0,!0,!0),sh(this,e,t.parts,!0,null,!0,!0,!0)):sh(this,e,t instanceof Ku?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},rh.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),null!==(e=e.placeholder)&&(i=e.ga(oe),(isNaN(i.x)||isNaN(i.y))&&i.set(t),i.x+=(t=e.padding).left,i.y+=t.top),i}return t},h.Object.defineProperties(rh.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},group:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,null!==t&&(this.B=t.diagram))}},isOngoing:{get:function(){return this.bo},set:function(t){this.bo!==t&&(this.bo=t)}},isInitial:{get:function(){return this.oi},set:function(t){this.oi=t,t||(this.ho=!0)}},isViewportSized:{get:function(){return this.io},set:function(t){this.io!==t&&(this.io=t)&&this.C()}},isRouting:{get:function(){return this.eo},set:function(t){this.eo!==t&&(this.eo=t)}},isRealtime:{get:function(){return this.co},set:function(t){this.co!==t&&(this.co=t)}},isValidLayout:{get:function(){return this.ho},set:function(t){this.ho!==t&&(this.ho=t,t||null!==(t=this.diagram)&&(t.Ff=!0))}},network:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.C())}},arrangementOrigin:{get:function(){return this.Wm},set:function(t){this.Wm.w(t)||(this.Wm.assign(t),this.C())}}}),rh.prototype.collectParts=rh.prototype.Ax,rh.prototype.getLayoutBounds=rh.prototype.Zi,rh.prototype.invalidateLayout=rh.prototype.C,rh.className="Layout",lh.prototype.clear=function(){if(this.nf)for(var t=this.nf.iterator;t.next();)t.value.clear();if(this.fe)for(t=this.fe.iterator;t.next();)t.value.clear();this.nf=new it,this.fe=new it,this.Et=new ht,this.zt=new ht},lh.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.nf.count+" edges: "+this.fe.count,1<t){for(var i=this.nf.iterator;i.next();)e+="\n    "+i.value.toString(t-1);for(i=this.fe.iterator;i.next();)e+="\n    "+i.value.toString(t-1)}return e},lh.prototype.createVertex=function(){return new fh(this)},lh.prototype.createEdge=function(){return new mh(this)},lh.prototype.ug=function(t,e,i){if(null!==t){for(void 0===e&&(e=!1),void 0===i&&(i=null),null===i&&(i=function(t){if(t instanceof Ou)return!t.isLinkLabel;if(t instanceof id){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&null!==(t=t.toNode)&&!t.isLinkLabel}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof Ou&&(!e||n.isTopLevel)&&n.canLayout()&&i(n))if(n instanceof Ku&&null===n.layout)this.ug(n.memberParts,!1);else if(null===this.Wi(n)){var o=this.createVertex();o.node=n,this.Bh(o)}}for(t.reset();t.next();)if((n=t.value)instanceof id&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&null===this.lq(n)){var a=n.fromNode;o=n.toNode,null!==a&&null!==o&&a!==o&&(a=this.findGroupVertex(a),o=this.findGroupVertex(o),null!==a&&null!==o&&this.mk(a,o,n))}}},lh.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.Wi(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.Wi(e)))return t;e=e.containingGroup}return null},(i=lh.prototype).Bh=function(t){if(null!==t){this.nf.add(t);var e=t.node;null!==e&&this.Et.add(e,t),t.network=this}},i.$l=function(t){if(null===t)return null;var e=this.Wi(t);return null===e&&((e=this.createVertex()).node=t,this.Bh(e)),e},i.rv=function(t){if(null!==t&&uh(this,t)){for(var e=t.Dg,i=e.count-1;0<=i;i--){var n=e.L(i);this.ek(n)}for(t=(e=t.vg).count-1;0<=t;t--)i=e.L(t),this.ek(i)}},i.cz=function(t){null!==t&&null!==(t=this.Wi(t))&&this.rv(t)},i.Wi=function(t){return null===t?null:this.Et.H(t)},i.cq=function(t){if(null!==t){dh(this,t);var e=t.toVertex;null!==e&&e.iv(t),null!==(e=t.fromVertex)&&e.gv(t)}},i.Jy=function(t){if(null===t)return null;var e=t.fromNode,i=t.toNode,n=this.lq(t);return null===n?((n=this.createEdge()).link=t,null!==e&&(n.fromVertex=this.$l(e)),null!==i&&(n.toVertex=this.$l(i)),this.cq(n)):(n.fromVertex=null!==e?this.$l(e):null,n.toVertex=null!==i?this.$l(i):null),n},i.ek=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.qv(t),null!==(e=t.fromVertex)&&e.pv(t),hh(this,t)}},i.bz=function(t){null!==t&&null!==(t=this.lq(t))&&this.ek(t)},i.lq=function(t){return null===t?null:this.zt.H(t)},i.mk=function(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.cq(n),n}return null},i.Dm=function(t){if(null!==t){var e=t.fromVertex,i=t.toVertex;null!==e&&null!==i&&(e.pv(t),i.qv(t),t.Dm(),e.iv(t),i.gv(t))}},i.jq=function(){for(var t=P(),e=this.fe.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.ek(t[i]);M(t)},lh.prototype.deleteArtificialVertexes=function(){for(var t=P(),e=this.nf.iterator;e.next();){var i=e.value;null===i.node&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.rv(t[e]);for(e=P(),i=this.fe.iterator;i.next();){var n=i.value;null===n.link&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.ek(e[n]);M(t),M(e)},lh.prototype.sy=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function(t){for(var e=P(),i=t.fe.iterator;i.next();){var n=i.value;null!==n.fromVertex&&null!==n.toVertex||e.push(n)}for(i=e.length,n=0;n<i;n++)t.ek(e[n]);M(e)}(this),this.jq()),t=new tt;for(var e=!0;e;){e=!1;for(var i=this.nf.iterator;i.next();){var n=i.value;if(0<n.Dg.count||0<n.vg.count){e=this.layout.createNetwork(),t.add(e),ph(this,e,n),e=!0;break}}}return t.sort(function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count}),t},lh.prototype.hz=function(){for(var t=new it,e=this.nf.iterator;e.next();)t.add(e.value.node);for(e=this.fe.iterator;e.next();)t.add(e.value.link);return t},h.Object.defineProperties(lh.prototype,{layout:{get:function(){return this.ic},set:function(t){null!==t&&(this.ic=t)}},vertexes:{get:function(){return this.nf}},edges:{get:function(){return this.fe}}}),lh.prototype.findAllParts=lh.prototype.hz,lh.prototype.splitIntoSubNetworks=lh.prototype.sy,lh.prototype.deleteSelfEdges=lh.prototype.jq,lh.prototype.reverseEdge=lh.prototype.Dm,lh.prototype.linkVertexes=lh.prototype.mk,lh.prototype.findEdge=lh.prototype.lq,lh.prototype.deleteLink=lh.prototype.bz,lh.prototype.deleteEdge=lh.prototype.ek,lh.prototype.addLink=lh.prototype.Jy,lh.prototype.addEdge=lh.prototype.cq,lh.prototype.findVertex=lh.prototype.Wi,lh.prototype.deleteNode=lh.prototype.cz,lh.prototype.deleteVertex=lh.prototype.rv,lh.prototype.addNode=lh.prototype.$l,lh.prototype.addVertex=lh.prototype.Bh,lh.prototype.addParts=lh.prototype.ug,lh.className="LayoutNetwork",fh.prototype.clear=function(){this.zi=this.ib=null,this.Dg=new tt,this.vg=new tt},fh.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+at(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.Dg.iterator;n.next();){var o=n.value;i?i=!1:t+=",",t+=o.toString(0)}for(o="",i=!0,n=this.vg.iterator;n.next();)i?i=!1:o+=",",o+=n.value.toString(0);e+=" sources: "+t+" destinations: "+o}return e},fh.prototype.commit=function(){var t=this.ib;if(null!==t){var e=this.bounds,i=t.bounds;S(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof Ku)){i=Vt.alloc();var n=this.network.layout.Zi(t,i),o=t.locationObject.ga(ce);if(n.v()&&o.v())return t.moveTo(e.x+this.focusX-(o.x-n.x),e.y+this.focusY-(o.y-n.y)),void Vt.free(i);Vt.free(i)}t.moveTo(e.x,e.y)}},fh.prototype.iv=function(t){null!==t&&(this.Dg.contains(t)||this.Dg.add(t))},fh.prototype.qv=function(t){null!==t&&this.Dg.remove(t)},fh.prototype.gv=function(t){null!==t&&(this.vg.contains(t)||this.vg.add(t))},fh.prototype.pv=function(t){null!==t&&this.vg.remove(t)},h.Object.defineProperties(fh.prototype,{sourceEdgesArrayAccess:{get:function(){return this.Dg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.vg._dataArray}},data:{get:function(){return this.ib},set:function(t){if(this.ib=t,null!==t){var e=t.bounds;t=e.x;var i=e.y,n=e.width;this.u.h(n/2,(e=e.height)/2),this.l.h(t,i,n,e)}}},node:{get:function(){return this.zi},set:function(t){if(this.zi!==t){this.zi=t,t.zb();var e=this.network.layout,i=Vt.alloc(),n=e.Zi(t,i);e=n.x;var o=n.y,a=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(o)&&(o=0),this.l.h(e,o,a,n),Vt.free(i),!(t instanceof Ku)&&(t=t.locationObject.ga(ce)).v())return void this.u.h(t.x-e,t.y-o);this.u.h(a/2,n/2)}}},bounds:{get:function(){return this.l},set:function(t){this.l.w(t)||this.l.assign(t)}},focus:{get:function(){return this.u},set:function(t){this.u.w(t)||this.u.assign(t)}},centerX:{get:function(){return this.l.x+this.u.x},set:function(t){var e=this.l;e.x+this.u.x!==t&&(e.ea(),e.x=t-this.u.x,e.freeze())}},centerY:{get:function(){return this.l.y+this.u.y},set:function(t){var e=this.l;e.y+this.u.y!==t&&(e.ea(),e.y=t-this.u.y,e.freeze())}},focusX:{get:function(){return this.u.x},set:function(t){var e=this.u;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.u.y},set:function(t){var e=this.u;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.l.x},set:function(t){var e=this.l;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.l.y},set:function(t){var e=this.l;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.l.width},set:function(t){var e=this.l;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.l.height},set:function(t){var e=this.l;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Yc},set:function(t){this.Yc=t}},sourceVertexes:{get:function(){for(var t=new it,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new it,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new it,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.Dg.iterator}},destinationEdges:{get:function(){return this.vg.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.Dg.count+this.vg.count}}}),fh.prototype.deleteDestinationEdge=fh.prototype.pv,fh.prototype.addDestinationEdge=fh.prototype.gv,fh.prototype.deleteSourceEdge=fh.prototype.qv,fh.prototype.addSourceEdge=fh.prototype.iv,fh.className="LayoutVertex",fh.standardComparer=gh,fh.smartComparer=function(t,e){if(null!==t){if(null!==e){var i=e.zi;if(null!==(t=t.zi)){if(null!==i){for(e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),i=0;i<e.length;i++)if(""!==t[i]&&void 0!==t[i]){var n=parseFloat(e[i]),o=parseFloat(t[i]);if(isNaN(n)){if(!isNaN(o))return 1;if(0!==e[i].localeCompare(t[i]))return e[i].localeCompare(t[i])}else{if(isNaN(o))return-1;if(0!=n-o)return n-o}}else if(""!==e[i])return 1;return""!==t[i]&&void 0!==t[i]?-1:0}return 1}return null!==i?-1:0}return 1}return null!==e?-1:0},mh.prototype.clear=function(){this.qg=this.Sf=this.tl=this.ib=null},mh.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+at(this);return 0<t&&(e+=null!==this.tl?"("+this.tl.toString()+")":"",1<t&&(e+=" "+(this.Sf?this.Sf.toString():"null")+" --\x3e "+(this.qg?this.qg.toString():"null"))),e},mh.prototype.Dm=function(){var t=this.Sf;this.Sf=this.qg,this.qg=t},mh.prototype.commit=function(){},mh.prototype.Sx=function(t){return this.qg===t?this.Sf:this.Sf===t?this.qg:null},h.Object.defineProperties(mh.prototype,{network:{get:function(){return this.kd},set:function(t){this.kd=t}},data:{get:function(){return this.ib},set:function(t){this.ib!==t&&(this.ib=t)}},link:{get:function(){return this.tl},set:function(t){this.tl!==t&&(this.tl=t)}},fromVertex:{get:function(){return this.Sf},set:function(t){this.Sf!==t&&(this.Sf=t)}},toVertex:{get:function(){return this.qg},set:function(t){this.qg!==t&&(this.qg=t)}}}),mh.prototype.getOtherVertex=mh.prototype.Sx,mh.className="LayoutEdge",d(vh,rh),vh.prototype.cloneProtected=function(t){rh.prototype.cloneProtected.call(this,t),t.aq=this.aq,t.$p=this.$p,t.Kg.assign(this.Kg),t.ef.assign(this.ef),t.wb=this.wb,t.Bb=this.Bb,t.Qc=this.Qc,t.Kc=this.Kc},vh.prototype.eb=function(t){t.classType===vh?t===Th||t===Ch||t===xh||t===Sh?this.sorting=t:t===yh||t===kh?this.arrangement=t:t===wh||t===_h?this.alignment=t:_("Unknown enum value: "+t):rh.prototype.eb.call(this,t)},vh.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Ax(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.Hh()||null===n.fromNode&&null===n.toNode){if(n.zb(),n instanceof Ku)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var o=e.na();if(0!==o.length){switch(this.sorting){case Sh:o.reverse();break;case Th:o.sort(this.comparer);break;case Ch:o.sort(this.comparer),o.reverse()}var a=this.wrappingColumn;isNaN(a)&&(a=0);var r=this.wrappingWidth;switch(isNaN(r)&&null!==t?(e=t.padding,r=Math.max(t.viewportBounds.width-e.left-e.right,0)):r=Math.max(this.wrappingWidth,0),0>=a&&0>=r&&(a=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),null!==t&&t.ua("Layout"),n=[],this.alignment){case _h:var s=e,c=i,l=Vt.alloc(),u=Math.max(this.cellSize.width,1);if(!isFinite(u))for(var d=u=0;d<o.length;d++){var h=this.Zi(o[d],l);u=Math.max(u,h.width)}if(u=Math.max(u+s,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(h=d=0;h<o.length;h++){var p=this.Zi(o[h],l);d=Math.max(d,p.height)}d=Math.max(d+c,1),h=this.arrangement;for(var f=p=this.arrangementOrigin.x,g=this.arrangementOrigin.y,m=0,v=0,b=0;b<o.length;b++){var _=o[b],w=this.Zi(_,l),y=Math.ceil((w.width+s)/u)*u,k=Math.ceil((w.height+c)/d)*d;switch(h){case kh:var x=Math.abs(f-w.width);break;default:x=f+w.width}switch((0<a&&m>a-1||0<r&&0<m&&x-p>r)&&(n.push(new Vt(0,g,r+s,v)),m=0,f=p,g+=v,v=0),v=Math.max(v,k),h){case kh:w=-w.width;break;default:w=0}switch(_.moveTo(f+w,g),h){case kh:f-=y;break;default:f+=y}m++}n.push(new Vt(0,g,r+s,v)),Vt.free(l);break;case wh:for(c=r,u=a,d=e,h=i,r=Vt.alloc(),p=Math.max(this.cellSize.width,1),a=g=l=0,s=pt.alloc(),f=0;f<o.length;f++)m=this.Zi(v=o[f],r),v=v.vf(v.locationObject,v.locationSpot,s),l=Math.max(l,v.x),g=Math.max(g,m.width-v.x),a=Math.max(a,v.y);switch(f=this.arrangement){case kh:l+=d;break;default:g+=d}p=isFinite(p)?Math.max(p+d,1):Math.max(l+g,1);var S=v=this.arrangementOrigin.x;for(b=this.arrangementOrigin.y,g=0,c>=l&&(c-=l),l=_=0,y=Math.max(this.cellSize.height,1),w=a=0,k=!0,m=pt.alloc(),x=0;x<o.length;x++){var T=o[x],C=this.Zi(T,r),D=T.vf(T.locationObject,T.locationSpot,s);if(0<g)switch(f){case kh:S=(S-v-(C.width-D.x))/p,S=(S=qe.$(Math.round(S),S)?Math.round(S):Math.floor(S))*p+v;break;default:S=(S-v+D.x)/p,S=(S=qe.$(Math.round(S),S)?Math.round(S):Math.ceil(S))*p+v}else switch(f){case kh:_=S+D.x+C.width;break;default:_=S-D.x}switch(f){case kh:var I=-(S+D.x)+_;break;default:I=S+C.width-D.x-_}if(0<u&&g>u-1||0<c&&0<g&&I>c){for(n.push(new Vt(0,k?b-a:b,c+d,w+a+h)),S=0;S<g&&x!==g;S++){var P=(I=o[x-g+S]).vf(I.locationObject,I.locationSpot,m);I.moveTo(I.position.x,I.position.y+a-P.y)}w+=h,b=k?b+w:b+(w+a),g=w=a=0,S=v,k=!1}switch(S===v&&(l=f===kh?Math.max(l,C.width-D.x):Math.min(l,-D.x)),a=Math.max(a,D.y),w=Math.max(w,C.height-D.y),isFinite(y)&&(w=Math.max(w,Math.max(C.height,y)-D.y)),T.moveTo(S-D.x,k?b-D.y:b),f){case kh:S-=D.x+d;break;default:S+=C.width-D.x+d}g++}if(n.push(new Vt(0,b,c+d,(k?w:w+a)+h)),o.length!==g)for(c=0;c<g;c++)d=(u=o[o.length-g+c]).vf(u.locationObject,u.locationSpot,s),u.moveTo(u.position.x,u.position.y+a-d.y);if(pt.free(s),pt.free(m),f===kh)for(o=0;o<n.length;o++)(a=n[o]).width+=l,a.x-=l;else for(o=0;o<n.length;o++)(a=n[o]).x>l&&(a.width+=a.x-l,a.x=l);Vt.free(r)}for(s=a=r=o=0;s<n.length;s++)c=n[s],o=Math.min(o,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x+c.width);this.commitLayers(n,new pt(this.arrangement===kh?o+e/2-(a+o):o-e/2,r-i/2)),null!==t&&t.Ua("Layout"),this.isValidLayout=!0}},vh.prototype.commitLayers=function(){},h.Object.defineProperties(vh.prototype,{wrappingWidth:{get:function(){return this.aq},set:function(t){this.aq!==t&&(0<t||isNaN(t))&&(this.aq=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.$p},set:function(t){this.$p!==t&&(0<t||isNaN(t))&&(this.$p=t,this.C())}},cellSize:{get:function(){return this.Kg},set:function(t){this.Kg.w(t)||(this.Kg.assign(t),this.C())}},spacing:{get:function(){return this.ef},set:function(t){this.ef.w(t)||(this.ef.assign(t),this.C())}},alignment:{get:function(){return this.wb},set:function(t){this.wb===t||t!==wh&&t!==_h||(this.wb=t,this.C())}},arrangement:{get:function(){return this.Bb},set:function(t){this.Bb===t||t!==yh&&t!==kh||(this.Bb=t,this.C())}},sorting:{get:function(){return this.Qc},set:function(t){this.Qc===t||t!==xh&&t!==Sh&&t!==Th&&t!==Ch||(this.Qc=t,this.C())}},comparer:{get:function(){return this.Kc},set:function(t){this.Kc!==t&&(this.Kc=t,this.C())}}});var _h=new W(vh,"Position",0),wh=new W(vh,"Location",1),yh=new W(vh,"LeftToRight",2),kh=new W(vh,"RightToLeft",3),xh=new W(vh,"Forward",4),Sh=new W(vh,"Reverse",5),Th=new W(vh,"Ascending",6),Ch=new W(vh,"Descending",7);function Dh(){this.To=new it,this.to=new it,this.Ca=new it,this.Oe=new ht,this.Ne=new ht,this.yj=new ht,this.B=null,this.Uq=!1}function Ih(t,e,i){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Oe.contains(e)){void 0===i&&(i=!0);t:{if(null!=e&&!t.B.undoManager.isUndoingRedoing&&!t.Oe.contains(e)){var n=t.pt(e),o=Ph(t,e,n);if(null!==o&&(Hc(o),null!==(o=o.copy()))){var a=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,o.If=n,o.ib=e,t.Uq&&(o.ah="Tool"),t.diagram.add(o),o.ib=null,o.data=e,t.diagram.skipsModelSourceBindings=a,n=o;break t}}n=null}null!==n&&i&&t.resolveReferencesForData(e)}}function Ph(t,e,i){var n=(t=t.B).model;return n.jk()&&n.Lv(e)?null===(e=t.groupTemplateMap.H(i))&&null===(e=t.groupTemplateMap.H(""))&&(Nh||(Nh=!0,k('No Group template found for category "'+i+'"'),k("  Using default group template")),e=t.hu):null===(e=t.nodeTemplateMap.H(i))&&null===(e=t.nodeTemplateMap.H(""))&&(Eh||(Eh=!0,k('No Node template found for category "'+i+'"'),k("  Using default node template")),e=t.ju),e}function Mh(t,e,i){for(var n in i){var o=e[n],a=i[n];if(T(a)){if(!T(o)||o.length<a.length)return!1;for(var r=0;r<o.length;r++){var s=a[r];if(void 0!==s&&!Oh(t,o[r],s))return!1}}else if(!Oh(t,o,a))return!1}return!0}function Oh(t,e,i){if("function"==typeof i){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(S(e)&&S(i)){if(!Mh(t,e,i))return!1}else if(e!==i)return!1;return!0}function $h(t,e){var i=e.si;if(T(i)){var n=t.yj.H(i);if(null===n)(n=[]).push(e),t.yj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function jh(t,e,i){Lc(e,function(t){for(var e=(t=t.V.j).length,n=0;n<e;n++)Oa(i,t[n])});var n=e.si;if(T(n)){var o=t.yj.H(n);if(null!==o)for(var a=0;a<o.length;a++)if(o[a]===e){o.splice(a,1),0===o.length&&t.yj.remove(n);break}}}function Lh(t,e,i,n,o){if(null===e||o&&!e.canCopy())return null;if(n.contains(e))return n.H(e);var a=t.copyPartData(e,i);if(!(a instanceof su))return null;if(a.isSelected=!1,a.isHighlighted=!1,n.add(e,a),e instanceof Ou){for(var r=e.linksConnected;r.next();){var s=r.value;if(s.fromNode===e){var c=n.H(s);null!==c&&(c.fromNode=a)}s.toNode===e&&null!==(s=n.H(s))&&(s.toNode=a)}if(e instanceof Ku&&a instanceof Ku)for(e=e.memberParts;e.next();)(r=Lh(t,e.value,i,n,o))instanceof id||null===r||(r.containingGroup=a)}else if(e instanceof id&&a instanceof id)for(null!==(r=e.fromNode)&&null!==(r=n.H(r))&&(a.fromNode=r),null!==(r=e.toNode)&&null!==(r=n.H(r))&&(a.toNode=r),e=e.labelNodes;e.next();)null!==(r=Lh(t,e.value,i,n,o))&&r instanceof Ou&&(r.labeledLink=a);return a}vh.className="GridLayout",vh.standardComparer=bh,vh.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var i=0;i<t.length;i++)if(""!==e[i]&&void 0!==e[i]){var n=parseFloat(t[i]),o=parseFloat(e[i]);if(isNaN(n)){if(!isNaN(o))return 1;if(0!==t[i].localeCompare(e[i]))return t[i].localeCompare(e[i])}else{if(isNaN(o))return-1;if(0!=n-o)return n-o}}else if(""!==t[i])return 1;return""!==e[i]&&void 0!==e[i]?-1:0}return 1}return null!==e?-1:0},vh.Position=_h,vh.Location=wh,vh.LeftToRight=yh,vh.RightToLeft=kh,vh.Forward=xh,vh.Reverse=Sh,vh.Ascending=Th,vh.Descending=Ch,(i=Dh.prototype).clear=function(){this.To.clear(),this.to.clear(),this.Ca.clear(),this.Oe.clear(),this.Ne.clear(),this.yj.clear()},i.$d=function(t){this.B=t},i.aj=function(t){if(t instanceof Ou){if(this.To.add(t),t instanceof Ku){var e=t.containingGroup;null===e?this.B.wh.add(t):e.yl.add(t),null!==(e=t.layout)&&(e.diagram=this.B)}}else t instanceof id?this.to.add(t):t instanceof Mu||this.Ca.add(t);null===(e=t.data)||t instanceof Mu||(t instanceof id?this.Ne.add(e,t):this.Oe.add(e,t))},i.Fc=function(t){if(t.Yj(),t instanceof Ou){if(this.To.remove(t),t instanceof Ku){var e=t.containingGroup;null===e?this.B.wh.remove(t):e.yl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof id?this.to.remove(t):t instanceof Mu||this.Ca.remove(t);null===(e=t.data)||t instanceof Mu||(t instanceof id?this.Ne.remove(e):this.Oe.remove(e))},i.zd=function(){for(var t=this.B.nodeTemplateMap.iterator;t.next();){var e=t.value,i=t.key;(!e.Wb()||e instanceof Ku)&&_('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.B.groupTemplateMap.iterator;t.next();)i=t.key,(e=t.value)instanceof Ku||_('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+e);for(t=this.B.linkTemplateMap.iterator;t.next();)i=t.key,(e=t.value)instanceof id||_('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+e);for(t=P(),e=this.B.selection.iterator;e.next();)(i=e.value.data)&&t.push(i);for(e=P(),i=this.B.highlighteds.iterator;i.next();){var n=i.value.data;n&&e.push(n)}for(i=P(),n=this.nodes.iterator;n.next();){var o=n.value;null!==o.data&&(i.push(o.data),i.push(o.location))}for(n=this.links.iterator;n.next();)null!==(o=n.value).data&&(i.push(o.data),i.push(o.location));for(n=this.parts.iterator;n.next();)null!==(o=n.value).data&&(i.push(o.data),i.push(o.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<t.length;n++)null!==(o=this.wc(t[n]))&&(o.isSelected=!0);for(n=0;n<e.length;n++)null!==(o=this.wc(e[n]))&&(o.isHighlighted=!0);for(n=0;n<i.length;n+=2)null!==(o=this.wc(i[n]))&&(o.location=i[n+1]);M(t),M(e),M(i)},Dh.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Dh.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(t){n.sb(t)&&Ih(i,t,!1)}),t.forEach(function(t){n.sb(t)&&i.resolveReferencesForData(t)}),!1!==e&&La(this.diagram,!1)},Dh.prototype.insertLink=function(){return null},Dh.prototype.resolveReferencesForData=function(){},Dh.prototype.pt=function(t){return this.B.model.pt(t)},Dh.prototype.getLinkCategoryForData=function(){return""},Dh.prototype.setLinkCategoryForData=function(){},Dh.prototype.setFromNodeForLink=function(){},Dh.prototype.setToNodeForLink=function(){},Dh.prototype.findLinkTemplateForCategory=function(t){var e=this.B.linkTemplateMap.H(t);return null===e&&null===(e=this.B.linkTemplateMap.H(""))&&(Ah||(Ah=!0,k('No Link template found for category "'+t+'"'),k("  Using default link template")),e=this.B.iu),e},Dh.prototype.removeAllModeledParts=function(){this.Kt(this.diagram.model.nodeDataArray)},Dh.prototype.Kt=function(t){var e=this;t.forEach(function(t){e.Hq(t)})},Dh.prototype.Hq=function(t){null!==(t=this.wc(t))&&(va(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Dh.prototype.unresolveReferencesForPart=function(){},Dh.prototype.removeDataForLink=function(){},Dh.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.B.model.Jb(t))?this.Oe.H(t):null},Dh.prototype.Kb=function(t){return null==t||null===(t=this.B.model.Jb(t))?null:(t=this.Oe.H(t))instanceof Ou?t:null},Dh.prototype.findLinkForKey=function(){return null},(i=Dh.prototype).wc=function(t){if(null===t)return null;var e=this.Oe.H(t);return null!==e?e:e=this.Ne.H(t)},i.Si=function(t){return null===t?null:(t=this.Oe.H(t))instanceof Ou?t:null},i.vc=function(t){return null===t?null:this.Ne.H(t)},i.mt=function(t){for(var e=0;e<arguments.length;++e);e=new it;for(var i=this.To.iterator;i.next();){var n=i.value,o=n.data;if(null!==o)for(var a=0;a<arguments.length;a++){var r=arguments[a];if(S(r)&&Mh(this,o,r)){e.add(n);break}}}return e.iterator},i.lt=function(t){for(var e=0;e<arguments.length;++e);e=new it;for(var i=this.to.iterator;i.next();){var n=i.value,o=n.data;if(null!==o)for(var a=0;a<arguments.length;a++){var r=arguments[a];if(S(r)&&Mh(this,o,r)){e.add(n);break}}}return e.iterator},Dh.prototype.doModelChanged=function(t){if(this.B){var e=this.B;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var n=t.modelChange;if(""!==n)if(i===xi){if("nodeCategory"===n){var o=this.wc(t.object),a=t.newValue;null!==o&&"string"==typeof a&&(o.category=a)}else"nodeDataArray"===n&&(this.Kt(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===Si){var r=t.newValue;"nodeDataArray"===n&&S(r)&&Ih(this,r),e.isModified=!0}else if(i===Ti){var s=t.oldValue;"nodeDataArray"===n&&S(s)&&this.Hq(s),e.isModified=!0}else i===ki&&("SourceChanged"===n?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.Qq(),this.updateAllTargetBindings()):"ModelDisplaced"===n&&this.zd());else if(i===xi){var c=t.propertyName,l=t.object;l===e.model?"nodeKeyProperty"!==c&&"nodeCategoryProperty"!==c||e.undoManager.isUndoingRedoing||this.zd():this.updateDataBindings(l,c),e.isModified=!0}else if(i===Si||i===Ti){var u=t.change===Si,d=u?t.newParam:t.oldParam,h=u?t.newValue:t.oldValue,p=this.yj.H(t.object);if(Array.isArray(p))for(t=0;t<p.length;t++){var f=p[t];if(u)qc(f,h,d);else if(!(0>d)){var g=d+Wc(f);f.Fc(g,!0),Xc(f,g,d)}}e.isModified=!0}}finally{e.Z=!0}}}}},Dh.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ba(t);for(e=this.nodes.iterator;e.next();)e.value.Ba(t);for(e=this.links.iterator;e.next();)e.value.Ba(t)},Dh.prototype.Qq=function(){for(var t=this.B.model,e=new it,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var o=[];for(this.nodes.each(function(t){null===t.data||e.contains(t.data)||o.push(t.data)}),this.parts.each(function(t){null===t.data||e.contains(t.data)||o.push(t.data)}),o.forEach(function(e){sp(t,e,!1)}),n=0;n<i.length;n++){var a=i[n];null===this.wc(a)&&rp(t,a,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Dh.prototype.refreshDataBoundLinks=function(){},Dh.prototype.updateRelationshipsFromData=function(){},Dh.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var i=this.wc(t);if(null!==i)i.Ba(e);else{i=null;for(var n=this.yj.iterator;n.next();){for(var o=n.value,a=0;a<o.length;a++){var r=o[a].Mx(t);null!==r&&(null===i&&(i=P()),i.push(r))}if(null!==i)break}if(null!==i){for(n=0;n<i.length;n++)i[n].Ba(e);M(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Dh.prototype.ck=function(t,e,i){var n=new ht;if(T(t))for(var o=0;o<t.length;o++)Lh(this,t[o],e,n,i);else for(t=t.iterator;t.next();)Lh(this,t.value,e,n,i);if(null!==e){i=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.Qk.dragsLink,o=new it;for(var a=new ht,r=n.iterator;r.next();){var s=r.value;if(s instanceof id)t||null!==s.fromNode&&null!==s.toNode||o.add(s);else if(s instanceof Ou&&null!==s.data&&i.pm()){var c=s,l=(s=r.key).yg();null!==l&&(null!==(l=n.H(l))?(i.He(c.data,i.ja(l.data)),c=e.vc(c.data),null!==(s=s.Vi())&&null!==c&&a.add(s,c)):i.He(c.data,void 0))}}if(0<o.count&&e.Lt(o,!1),0<a.count)for(i=a.iterator;i.next();)n.add(i.key,i.value)}if(null!==e&&null!==this.B&&null!==(i=(e=e.model).afterCopyFunction)){var u=new ht;n.each(function(t){null!==t.key.data&&u.add(t.key.data,t.value.data)}),i(u,e,this.B.model)}for(e=n.iterator;e.next();)e.value.Ba();return n},Dh.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(null!==n&&null!==e){var o=e.model;t instanceof id||S(n=o.copyNodeData(n))&&(o.pf(n),i=e.wc(n))}else Hc(t),null!==(i=t.copy())&&(o=this.B,null!==e?e.add(i):null!==n&&null!==o&&null!==o.commandHandler&&o.commandHandler.copiesClipboardData&&(e=o.model,o=null,i instanceof id||(o=e.copyNodeData(n)),S(o)&&(i.data=o)));return i},h.Object.defineProperties(Dh.prototype,{nodes:{get:function(){return this.To}},links:{get:function(){return this.to}},parts:{get:function(){return this.Ca}},diagram:{get:function(){return this.B}},addsToTemporaryLayer:{get:function(){return this.Uq},set:function(t){this.Uq=t}}}),Dh.prototype.updateAllRelationshipsFromData=Dh.prototype.Qq,Dh.prototype.findLinksByExample=Dh.prototype.lt,Dh.prototype.findNodesByExample=Dh.prototype.mt,Dh.prototype.findLinkForData=Dh.prototype.vc,Dh.prototype.findNodeForData=Dh.prototype.Si,Dh.prototype.findPartForData=Dh.prototype.wc,Dh.prototype.findNodeForKey=Dh.prototype.Kb,Dh.prototype.removeModeledPart=Dh.prototype.Hq,Dh.prototype.removeModeledParts=Dh.prototype.Kt,Dh.prototype.rebuildParts=Dh.prototype.zd;var Eh=!1,Nh=!1,Ah=!1;function Vh(t){Dh.apply(this,arguments)}function zh(t,e){e.forEach(function(e){Fh(t,e)}),La(t.diagram,!1)}function Fh(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ne.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(null!==n){Hc(n);var o=n.copy();if(null!==o){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,o.If=i,o.ib=e;var a=Dp(i=t.diagram.model,e,!0);""!==a&&(o.fromPortId=a),void 0!==(a=Tp(i,e,!0))&&(a=t.Kb(a))instanceof Ou&&(o.fromNode=a),""!==(a=Dp(i,e,!1))&&(o.toPortId=a),void 0!==(a=Tp(i,e,!1))&&(a=t.Kb(a))instanceof Ou&&(o.toNode=a),i=i.zg(e),Array.isArray(i)&&i.forEach(function(e){null!==(e=t.Kb(e))&&(e.labeledLink=o)}),t.Uq&&(o.ah="Tool"),t.diagram.add(o),o.ib=null,o.data=e,t.diagram.skipsModelSourceBindings=n}}}}function Bh(t,e){e.forEach(function(e){t.Hq(e)})}function Rh(){Dh.apply(this,arguments),this.ih=null}function Uh(t,e,i){if(null!==e&&null!==i){var n=t.diagram.toolManager.findTool("Linking"),o=e,a=i;if(t.diagram.isTreePathToChildren){for(e=a.linksConnected;e.next();)if(e.value.toNode===a)return}else for(a=e,e=(o=i).linksConnected;e.next();)if(e.value.fromNode===o)return;if((null===n||!ln(n,o,a,null,!0))&&(n=t.getLinkCategoryForData(i.data),null!==(e=t.findLinkTemplateForCategory(n))&&(Hc(e),null!==(e=e.copy())))){var r=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.If=n,e.ib=i.data,e.fromNode=o,e.toNode=a,t.diagram.add(e),e.ib=null,e.data=i.data,t.diagram.skipsModelSourceBindings=r}}}function Gh(t){this.Xt=',\n  "insertedNodeKeys": ',this.Lw=',\n  "modifiedNodeData": ',this.Zt=',\n  "removedNodeKeys": ',this.Ph=null,nt(this),this.tn=this.Qa="",this.Wf=!1,this.l={},this.Cc=[],this.bb=new ht,this.Ai="key",this.Ok=this.vl=null,this.kn=this.ln=!1,this.nn=!0,this.Sm=null,this.Gj="category",this.Of=new ht,this.Gu=new tt,this.pg=!1,this.u=null,this.undoManager=new Di,void 0!==t&&(this.nodeDataArray=t)}function Hh(t,e,i,n,o,a){function r(t,i){s?(void 0===t.__gohashid&&a.push(t),n.set(t,i)):(t=rt++,n.set(t,i),o.set(t,e))}if(!S(e))return e;a||(a=[]);var s=Object.isExtensible(e);if(n||(n=new ht),s){var c=n.get(e);if(c)return c}else for(o||(o=new ht),c=o.iterator;c.next();){var l=c.key;if(c.value===e&&(l=n.get(l)))return l}if(Array.isArray(e)){r(e,c=[]);for(var u=0;u<e.length;u++)c.push(Hh(t,e[u],!1,n,o,a))}else if(e instanceof pt||e instanceof Lt||e instanceof Vt||e instanceof Jt||e instanceof Fe)c=e.copy(),r(e,c);else{if(e instanceof Vs||e instanceof Xe||e instanceof W)return e;if(e instanceof tt)c=(new tt).addAll(Hh(t,e.na(),!1,n,o,a)),r(e,c);else if(e instanceof it)c=(new it).addAll(Hh(t,e.na(),!1,n,o,a)),r(e,c);else if(e instanceof ht)c=(new ht).addAll(Hh(t,e.na(),!1,n,o,a)),r(e,c);else if(e instanceof Date)c=new Date(e.getTime()),r(e,c);else if(e instanceof RegExp)c=new RegExp(e),r(e,c),c.lastIndex=e.lastIndex;else if("function"==typeof e.copy)c=e.copy(),r(e,c);else for(u in r(e,c={}),e)"__gohashid"!==u&&(c[u]=Hh(t,e[u],!1,n,o,a))}return i&&a.forEach(function(t){delete t.__gohashid}),c}function Wh(t){return',\n  "modelData": '+ip(t,t.modelData)}function qh(t,e){S(e=e.modelData)&&(t.Am(e),t.modelData=e)}function Xh(t,e,i,n){if(e===i)return!0;if(typeof e!=typeof i||"function"==typeof e||"function"==typeof i)return!1;if(Array.isArray(e)&&Array.isArray(i)){if(n.H(e)===i)return!0;if(n.add(e,i),e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(!Xh(t,e[o],i[o],n))return!1;return!0}if(S(e)&&S(i)){if(n.H(e)===i)return!0;for(var a in n.add(e,i),e){var r=e[a];if(!tp(a,r)){var s=i[a];if(void 0===s||!Xh(t,r,s,n))return!1}}for(o in i)if(!(tp(o,a=i[o])||void 0!==(r=e[o])&&Xh(t,r,a,n)))return!1;return!0}return!1}function Yh(t,e,i){t[i]!==e[i]&&_("Model.computeJsonDifference: Model."+i+' is not the same in both models: "'+t[i]+'" and "'+e[i]+'"')}function Kh(t,e){function i(t,e){if(t!==(e=e.part.data)){var i=n.get(t);null===i?((i=new it).add(e),n.add(t,i)):i.add(e)}}var n=t.Ph;null===n&&(n=new ht,e.changes.each(function(t){if(null!==t.diagram){var e=t.change;e===xi?(t=t.object.panel)&&(e=t.data)&&i(e,t):e!==Si&&e!==Ti||(e=(t=t.object).itemArray)&&i(e,t)}}),t.Ph=n)}function Zh(t,e){for(var i=new it,n=0;n<t.nodeDataArray.length;n++){var o=t.nodeDataArray[n];Jh(t,e,o,o,i)}return i}function Jh(t,e,i,n,o){if(Array.isArray(i))for(var a=0;a<i.length;a++){var r=i[a];if(r===e)return o.add(n),!0;if(Jh(t,e,r,n,o))return!0}else if(S(i)&&Object.getPrototypeOf(i)===Object.prototype)for(a in i){if((r=i[a])===e)return o.add(n),!0;if(Jh(t,e,r,n,o))return!0}return!1}function Qh(t,e,i){void 0===i&&(i=!1);var n=e.length;if(0>=n)return"[]";var o=new X;o.add("[ "),i&&1<n&&o.add("\n");for(var a=0;a<n;a++){var r=e[a];void 0!==r&&(0<a&&(o.add(","),i&&o.add("\n")),o.add(t.Km(r)))}return i&&1<n&&o.add("\n"),o.add(" ]"),o.toString()}function tp(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function ep(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function ip(t,e){var i=e;if(i instanceof pt)e={class:"go.Point",x:ep(i.x),y:ep(i.y)};else if(i instanceof Lt)e={class:"go.Size",width:ep(i.width),height:ep(i.height)};else if(i instanceof Vt)e={class:"go.Rect",x:ep(i.x),y:ep(i.y),width:ep(i.width),height:ep(i.height)};else if(i instanceof Jt)e={class:"go.Margin",top:ep(i.top),right:ep(i.right),bottom:ep(i.bottom),left:ep(i.left)};else if(i instanceof Fe)e=i.fb()?{class:"go.Spot",x:ep(i.x),y:ep(i.y),offsetX:ep(i.offsetX),offsetY:ep(i.offsetY)}:{class:"go.Spot",enum:i.toString()};else if(i instanceof Vs){if(e={class:"go.Brush",type:i.type.name},i.type===Js?e.color=i.color:i.type!==Qs&&i.type!==tc||(e.start=i.start,e.end=i.end,i.type===tc&&(0!==i.startRadius&&(e.startRadius=ep(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=ep(i.endRadius)))),null!==i.colorStops){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof Xe?(e={class:"go.Geometry",type:i.type.name},0!==i.startX&&(e.startX=ep(i.startX)),0!==i.startY&&(e.startY=ep(i.startY)),0!==i.endX&&(e.endX=ep(i.endX)),0!==i.endY&&(e.endY=ep(i.endY)),i.spot1.w(oe)||(e.spot1=i.spot1),i.spot2.w(he)||(e.spot2=i.spot2),i.type===ci&&(e.path=Ke(i))):i instanceof W&&(e={class:"go.EnumValue",classType:pp(t,i.classType),name:i.name});for(var o in n="{",i=!0,e){var a=gp(e,o);if(!tp(o,a))if(i?i=!1:n+=", ",n+='"'+o+'":',"points"===o&&a instanceof tt){var r="[";for(a=a.iterator;a.next();){var s=a.value;1<r.length&&(r+=","),r+=t.Km(s.x),r+=",",r+=t.Km(s.y)}n+=r+="]"}else n+=t.Km(a)}return n+"}"}function np(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function op(t,e,i,n,o,a,r,s,c){void 0===s&&(s=null),void 0===c&&(c=null);var l=new yi;l.model=t,l.change=i,l.modelChange=e,l.propertyName=n,l.object=o,l.oldValue=a,l.oldParam=s,l.newValue=r,l.newParam=c,t.dt(l)}function ap(t){return"number"==typeof t||"string"==typeof t}function rp(t,e,i){var n=t.ja(e);void 0!==n&&t.bb.H(n)===e||(t.Bt(e),void 0===(n=t.ja(e))?_("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.bb.add(n,e),n=null,i&&D(t.Cc,n=t.Cc.length,e),op(t,"nodeDataArray",Si,"nodeDataArray",t,null,e,null,n),t.Cm(e),t.Bm(e)))}function sp(t,e,i){var n=t.ja(e);if(void 0!==n&&t.bb.remove(n),n=null,i){t:if(i=t.Cc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var o=0;o<n;o++)if(i[o]===e){n=o;break t}n=-1}if(0>n)return;I(t.Cc,n)}op(t,"nodeDataArray",Ti,"nodeDataArray",t,e,null,n,null),t.Pq(e)}function cp(t,e,i){if(void 0!==e){var n=t.Of.H(e);null===n&&(n=new it,t.Of.add(e,n)),n.add(i)}}function lp(t,e,i){if(void 0!==e){var n=t.Of.H(e);n instanceof it&&(null==i?t.Of.remove(e):(n.remove(i),0===n.count&&t.Of.remove(e)))}}function up(t,e){return void 0===e?null:(t=t.Of.H(e))instanceof it?t:null}function dp(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var o=dp(t,e[i],t.copiesArrayObjects);n.push(o)}return nt(n),n}if(i&&S(e)){for(n in i=(i=e.constructor)?new i:{},o=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===n)i.__gohashid=void 0;else if(n===o)i[o]=void 0;else{var a=gp(e,n),r=pp(t,a);"GraphObject"===r||"Diagram"===r||"Layer"===r||"RowColumnDefinition"===r||"AnimationManager"===r||"Tool"===r||"CommandHandler"===r||"Layout"===r||"InputEvent"===r||"DiagramEvent"===r||a instanceof Gh||a instanceof Di||a instanceof Ci||a instanceof yi||(a=dp(t,a,!1)),mp(i,n,a)}return nt(i),i}return e instanceof pt||e instanceof Lt||e instanceof Vt||e instanceof Fe||e instanceof Jt?e.copy():e}function hp(){return new Gh}function pp(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return pp(t,e.constructor);return typeof e}function fp(t){return bp[t]?bp[t]:void 0!==f.go&&f.go[t]?f.go[t]:null}function gp(t,e){if(!t||!e)return null;try{if("function"==typeof e)var i=e(t);else"function"==typeof t.getAttribute?null===(i=t.getAttribute(e))&&(i=void 0):i=t[e]}catch(n){}return i}function mp(t,e,i){if(t&&e)try{"function"==typeof e?e(t,i):"function"==typeof t.setAttribute?t.setAttribute(e,i):t[e]=i}catch(n){}}Dh.className="PartManager",d(Vh,Dh),Vh.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),zh(this,t.linkDataArray)},Vh.prototype.addModeledParts=function(t){for(Dh.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)nd(t.value);La(this.diagram,!1)},Vh.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Bh(this,t.linkDataArray),this.Kt(t.nodeDataArray)},Vh.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Av(t)},Vh.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Nt(t,e)},Vh.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.ky(t.data,i.ja(null!==e?e.data:null))},Vh.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.oy(t.data,i.ja(null!==e?e.data:null))},Vh.prototype.removeDataForLink=function(t){this.diagram.model.ym(t.data)},Vh.prototype.findPartForKey=function(t){var e=Dh.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.wg(t))?this.Ne.H(t):e},Vh.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.wg(t))?this.Ne.H(t):null},Vh.prototype.doModelChanged=function(t){var e=this;if(Dh.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.Z){i.Z=!1;try{var o=t.modelChange;if(""!==o){if(n===xi){if("linkFromKey"===o){var a=this.vc(t.object);if(null!==a){var r=this.Kb(t.newValue);a.fromNode=r}}else if("linkToKey"===o){var s=this.vc(t.object);if(null!==s){var c=this.Kb(t.newValue);s.toNode=c}}else if("linkFromPortId"===o){var l=this.vc(t.object);if(null!==l){var u=t.newValue;"string"==typeof u&&(l.fromPortId=u)}}else if("linkToPortId"===o){var d=this.vc(t.object);if(null!==d){var h=t.newValue;"string"==typeof h&&(d.toPortId=h)}}else if("nodeGroupKey"===o){var p=this.wc(t.object);if(null!==p){var f=t.newValue;if(void 0!==f){var g=this.Kb(f);p.containingGroup=g instanceof Ku?g:null}else p.containingGroup=null}}else if("linkLabelKeys"===o){var m=this.vc(t.object);if(null!==m){var v=t.oldValue,b=t.newValue;Array.isArray(v)&&v.forEach(function(t){null!==(t=e.Kb(t))&&(t.labeledLink=null)}),Array.isArray(b)&&b.forEach(function(t){null!==(t=e.Kb(t))&&(t.labeledLink=m)})}}else if("linkCategory"===o){var _=this.vc(t.object),w=t.newValue;null!==_&&"string"==typeof w&&(_.category=w)}else"linkDataArray"===o&&(Bh(this,t.oldValue),zh(this,t.newValue));i.isModified=!0}else if(n===Si){var y=t.newValue;if("linkDataArray"===o&&"object"==typeof y&&null!==y)Fh(this,y);else if("linkLabelKeys"===o&&ap(y)){var k=this.vc(t.object),x=this.Kb(y);null!==k&&null!==x&&(x.labeledLink=k)}i.isModified=!0}else if(n===Ti){var S=t.oldValue;if("linkDataArray"===o&&"object"==typeof S&&null!==S)this.Hq(S);else if("linkLabelKeys"===o&&ap(S)){var T=this.Kb(S);null!==T&&(T.labeledLink=null)}i.isModified=!0}}else if(n===xi){var C=t.propertyName;t.object!==i.model||"linkFromKeyProperty"!==C&&"linkToKeyProperty"!==C&&"linkFromPortIdProperty"!==C&&"linkToPortIdProperty"!==C&&"linkLabelKeysProperty"!==C&&"nodeIsGroupProperty"!==C&&"nodeGroupKeyProperty"!==C&&"linkCategoryProperty"!==C||i.undoManager.isUndoingRedoing||this.zd(),i.isModified=!0}}finally{i.Z=!0}}}}},Vh.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new it,n=e.linkDataArray;n.forEach(function(t){i.add(t)});var o=[];this.links.each(function(t){null===t.data||i.contains(t.data)||o.push(t.data)}),o.forEach(function(t){Mp(e,t,!1)}),n.forEach(function(i){null===t.vc(i)&&Pp(e,i,!1)})},Vh.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;if(t instanceof id){var o=Tp(n,e,!0);if(o=i.Kb(o),t.fromNode=o,o=Tp(n,e,!1),o=i.Kb(o),t.toNode=o,0<(e=n.zg(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){o=e[0];var a=t.labelNodes.first();if(n.ja(a.data)===o)return}o=(new it).addAll(e);var r=new it;t.labelNodes.each(function(t){null!==t.data&&void 0!==(t=n.ja(t.data))&&r.add(t)}),(e=r.copy()).Gq(o),(o=o.copy()).Gq(r),(0<e.count||0<o.count)&&(e.each(function(e){null!==(e=i.Kb(e))&&e.labeledLink===t&&(e.labeledLink=null)}),o.each(function(e){null!==(e=i.Kb(e))&&e.labeledLink!==t&&(e.labeledLink=t)}))}}else!(t instanceof Mu)&&(e=n.Yi(e),null===(e=i.findPartForKey(e))||e instanceof Ku)&&(t.containingGroup=e)}}},Vh.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.ja(t);if(void 0!==i){var n=up(e,i),o=this.wc(t);if(null!==n&&null!==o){n=n.iterator;for(var a={};n.next();){var r=n.value;e.sb(r)?o instanceof Ku&&e.Yi(r)===i&&null!==(r=this.wc(r))&&(r.containingGroup=o):(a.link=this.vc(r),null!==a.link&&o instanceof Ou&&(Tp(e,r,!0)===i&&(a.link.fromNode=o),Tp(e,r,!1)===i&&(a.link.toNode=o),r=e.zg(r),Array.isArray(r)&&r.some(function(t){return function(e){return e===i&&(o.labeledLink=t.link,!0)}}(a)))),a={link:a.link}}lp(e,i)}void 0!==(t=e.Yi(t))&&(t=this.Kb(t))instanceof Ku&&(o.containingGroup=t)}},Vh.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Ou){var i=e.ja(t.data);if(void 0!==i){for(var n=t.linksConnected;n.next();)cp(e,i,n.value.data);if(t.isLinkLabel&&null!==(n=t.labeledLink)&&cp(e,i,n.data),t instanceof Ku)for(t=t.memberParts;t.next();)e.sb(n=t.value.data)&&cp(e,i,n)}}},Vh.prototype.copyPartData=function(t,e){var i=Dh.prototype.copyPartData.call(this,t,e);if(t instanceof id)if(null!==(t=t.data)&&null!==e){var n=e.model;"object"==typeof(t=n.iq(t))&&null!==t&&(n.Ni(t),i=e.vc(t))}else null!==i&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.iq(t))&&null!==e&&(i.data=e));return i},Vh.prototype.insertLink=function(t,e,i,n){var o=this.diagram,a=o.model,r=o.toolManager.findTool("Linking"),s="";if(null!==t&&(null===e&&(e=t),null===(s=e.portId)&&(s="")),e="",null!==i&&(null===n&&(n=i),null===(e=n.portId)&&(e="")),(n=r.archetypeLinkData)instanceof id){if(Hc(n),null!==(a=n.copy()))return a.fromNode=t,a.fromPortId=s,a.toNode=i,a.toPortId=e,o.add(a),(t=r.archetypeLabelNodeData)instanceof Ou&&(Hc(t),null!==(t=t.copy())&&(t.labeledLink=a,o.add(t))),a}else if(null!==n&&"object"==typeof(n=a.iq(n))&&null!==n)return null!==t&&Cp(a,n,a.ja(t.data),!0),Ip(a,n,s,!0),null!==i&&Cp(a,n,a.ja(i.data),!1),Ip(a,n,e,!1),a.Ni(n),null===(t=r.archetypeLabelNodeData)||t instanceof Ou||"object"==typeof(t=a.copyNodeData(t))&&null!==t&&(a.pf(t),void 0!==(t=a.ja(t))&&a.hv(n,t)),o.vc(n);return null},Vh.prototype.findLinkForKey=Vh.prototype.findLinkForKey,Vh.prototype.findPartForKey=Vh.prototype.findPartForKey,Vh.prototype.removeAllModeledParts=Vh.prototype.removeAllModeledParts,Vh.prototype.addModeledParts=Vh.prototype.addModeledParts,Vh.prototype.addAllModeledParts=Vh.prototype.addAllModeledParts,Vh.className="GraphLinksPartManager",d(Rh,Dh),Rh.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Bv(t)},Rh.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.iw(t,e)},Rh.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)n.He(t.data,n.ja(e));else{var o=this.ih;this.ih=t,null!==i&&n.He(i.data,void 0),n.He(e,n.ja(null!==t.toNode?t.toNode.data:null)),this.ih=o}},Rh.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var o=this.ih;this.ih=t,null!==i&&n.He(i.data,void 0),n.He(e,n.ja(null!==t.fromNode?t.fromNode.data:null)),this.ih=o}else n.He(t.data,n.ja(e))},Rh.prototype.removeDataForLink=function(t){this.diagram.model.He(t.data,void 0)},Rh.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Jb(t))?this.Ne.H(t):null},Rh.prototype.doModelChanged=function(t){if(Dh.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.Z){e.Z=!1;try{var n=t.modelChange;if(""!==n){if(i===xi){if("nodeParentKey"===n){var o=t.object,a=this.Kb(t.newValue),r=this.Si(o);if(null!==this.ih)null!==a&&(this.ih.data=o,this.ih.category=this.getLinkCategoryForData(o));else if(null!==r){var s=r.Vi();null!==s?null===a?e.remove(s):e.isTreePathToChildren?s.fromNode=a:s.toNode=a:Uh(this,a,r)}}else if("parentLinkCategory"===n){var c=this.Si(t.object),l=t.newValue;if(null!==c&&"string"==typeof l){var u=c.Vi();null!==u&&(u.category=l)}}e.isModified=!0}}else i===xi&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.zd()),e.isModified=!0)}finally{e.Z=!0}}}}},Rh.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;t instanceof Ou&&(e=n.$i(e),(e=i.Kb(e))!==(n=t.yg())&&(n=t.Vi(),null!==e?null!==n?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:Uh(this,e,t):null!==n&&va(i,n,!1)))}}},Rh.prototype.updateDataBindings=function(t,e){Dh.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.wc(t)&&null!==(t=this.vc(t))&&t.Ba(e)},Rh.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.ja(t);if(void 0!==i){var n=up(e,i),o=this.wc(t);if(null!==n&&null!==o){for(n=n.iterator;n.next();){var a=n.value;e.sb(a)&&o instanceof Ou&&e.$i(a)===i&&Uh(this,o,this.Si(a))}lp(e,i)}void 0!==(t=e.$i(t))&&o instanceof Ou&&Uh(this,t=this.Kb(t),o)}},Rh.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Ou){var i=e.ja(t.data),n=this.vc(t.data);if(null!==n){n.isSelected=!1,n.isHighlighted=!1;var o=n.layer;if(null!==o){var a=o.Fc(-1,n,!1);0<=a&&this.diagram.Ya(Ti,"parts",o,n,null,a,null),null!==(a=n.layerChanged)&&a(n,o,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)o=t.value,e.sb(o=(n?o.toNode:o.fromNode).data)&&cp(e,i,o)}},Rh.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,o=i;return this.diagram.isTreePathToChildren||(n=i,o=t),null!==n&&null!==o?(e.He(o.data,e.ja(n.data)),o.Vi()):null},Rh.prototype.findLinkForKey=Rh.prototype.findLinkForKey,Rh.className="TreePartManager",Gh.prototype.cloneProtected=function(t){t.Qa=this.Qa,t.tn=this.tn,t.Wf=this.Wf,t.Ai=this.Ai,t.vl=this.vl,t.Ok=this.Ok,t.ln=this.ln,t.kn=this.kn,t.nn=this.nn,t.Sm=this.Sm,t.Gj=this.Gj},Gh.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Gh.prototype.clear=function(){this.Cc=[],this.bb.clear(),this.Of.clear(),this.undoManager.clear()},Gh.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.Nq();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var o=t[n];e+=" "+this.ja(o)+":"+$(o)}}return e},Gh.prototype.CA=function(t){t.change!==ki&&_("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Ci?(Kh(this,e),t=this.Aw(e,"FinishedUndo"===t.propertyName),this.Ph=null,t):null},Gh.prototype.Aw=function(t,e){var i=this,n=!1,o=new it,a=new it,r=new it,s=this.Ph;t.changes.each(function(t){t.model===i&&("nodeDataArray"===t.modelChange?t.change===Si?o.add(t.newValue):t.change===Ti&&r.add(t.oldValue):i.sb(t.object)?a.add(t.object):t.change!==xi||i.modelData!==t.object&&"modelData"!==t.propertyName?null!==t.object&&(s&&s.contains(t.object)?s.get(t.object).each(function(t){i.sb(t)&&a.add(t)}):Zh(i,t.object).each(function(t){a.add(t)})):n=!0)});var c=new it;o.each(function(t){c.add(i.ja(t)),e||a.add(t)});var l=new it;r.each(function(t){l.add(i.ja(t)),e&&a.add(t)}),t=i.cloneDeep(a.na());var u=null;return n&&(null===u&&(u={}),u.modelData=this.cloneDeep(this.modelData)),0<c.count&&(null===u&&(u={}),e?u.removedNodeKeys=c.na():u.insertedNodeKeys=c.na()),0<t.length&&(null===u&&(u={}),u.modifiedNodeData=t),0<l.count&&(null===u&&(u={}),e?u.insertedNodeKeys=l.na():u.removedNodeKeys=l.na()),u},Gh.prototype.cloneDeep=function(t){return Hh(this,t,!0)},(i=Gh.prototype).zk=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},i.Fq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},i.Bw=function(){var t,e=this.modelData,i=!1;for(t in e)if(!tp(t,e[t])){i=!0;break}return e="",i&&(e=Wh(this)),e+',\n  "nodeDataArray": '+Qh(this,this.nodeDataArray,!0)},i.Xv=function(t){qh(this,t),T(t=t.nodeDataArray)&&(this.Am(t),this.nodeDataArray=t)},i.Sq=function(t){Yh(this,t,"nodeKeyProperty");for(var e=new it,i=new it,n=(new it).addAll(this.bb.iteratorKeys),o=new ht,a=t.nodeDataArray,r=a.length,s=0;s<r;s++){var c=a[s],l=t.ja(c);if(void 0!==l){n.remove(l);var u=this.Jb(l);null===u?(e.add(l),i.add(c)):Xh(this,u,c,o)||i.add(c)}else this.Bt(c),l=this.ja(c),e.add(l),i.add(c)}return a="",Xh(this,this.modelData,t.modelData,o)||(a+=Wh(this)),0<e.count&&(a+=this.Xt+Qh(this,e.na(),!0)),0<i.count&&(a+=this.Lw+Qh(this,i.na(),!0)),0<n.count&&(a+=this.Zt+Qh(this,n.na(),!0)),a},i.Vy=function(t,e){return void 0===e&&(e=pp(this,this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.zk()+this.Sq(t)+"}"},i.zw=function(t,e){var i=this,n=!1,o=new it,a=new it,r=new it,s=this.Ph;t.changes.each(function(t){t.model===i&&("nodeDataArray"===t.modelChange?t.change===Si?o.add(t.newValue):t.change===Ti&&r.add(t.oldValue):i.sb(t.object)?a.add(t.object):t.change!==xi||i.modelData!==t.object&&"modelData"!==t.propertyName?null!==t.object&&(s&&s.contains(t.object)?s.get(t.object).each(function(t){i.sb(t)&&a.add(t)}):Zh(i,t.object).each(function(t){a.add(t)})):n=!0)});var c=new it;o.each(function(t){c.add(i.ja(t)),e||a.add(t)});var l=new it;return r.each(function(t){l.add(i.ja(t)),e&&a.add(t)}),t="",n&&(t+=Wh(this)),0<c.count&&(t+=(e?this.Zt:this.Xt)+Qh(this,c.na(),!0)),0<a.count&&(t+=this.Lw+Qh(this,a.na(),!0)),0<l.count&&(t+=(e?this.Xt:this.Zt)+Qh(this,l.na(),!0)),t},i.Eq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&_("applyIncrementalJson cannot change Model properties"),qh(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new ht;if(Array.isArray(i))for(var o=0;o<i.length;o++){var a=i[o],r=this.ja(a);null!=r&&n.set(r,a)}if(Array.isArray(e))for(o=e.length,a=0;a<o;a++){var s=this.Jb(r=e[a]);null===s&&(s=(s=n.get(r))?s:this.copyNodeData({}),this.Gm(s,r),this.pf(s))}if(Array.isArray(i))for(e=i.length,n=0;n<e;n++)if(a=this.ja(o=i[n]),null!==(a=this.Jb(a)))for(var c in o)"__gohashid"===c||c===this.nodeKeyProperty||this.ik()&&c===this.nodeIsGroupProperty||this.setDataProperty(a,c,o[c]);if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,c=0;c<i;c++)null!==(e=this.Jb(t[c]))&&this.zm(e)},i.ty=function(t,e){t.change!==ki&&_("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof Ci?(void 0===e&&(e=pp(this,this)),Kh(this,i),t=this.zw(i,"FinishedUndo"===t.propertyName),this.Ph=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.zk()+t+"}"):'{ "incremental": 0 }'},i.DA=function(t,e){return this.ty(t,e)},i.Nq=function(t){return void 0===t&&(t=pp(this,this)),'{ "class": '+this.quote(t)+this.zk()+this.Bw()+"}"},i.toJSON=function(t){return this.Nq(t)},i.yx=function(t){var e=null;if("string"==typeof t)try{e=f.JSON.parse(t)}catch(n){}else"object"==typeof t?e=t:_("Unable to modify a Model from: "+t);var i=e.incremental;"number"!=typeof i&&_("Unable to apply non-incremental changes to Model: "+t),0!==i&&(this.ua("applyIncrementalJson"),this.Eq(e),this.Ua("applyIncrementalJson"))},i.Py=function(t){return this.yx(t)},Gh.constructGraphLinksModel=function(){return new Gh},(i=Gh.prototype).Am=function(t){if(T(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(S(n)){var o=i;n=this.Am(n),Array.isArray(t)?t[o]=n:_("Cannot replace an object in an HTMLCollection or NodeList at "+o)}}else if(S(t)){for(i in t)if(S(o=t[i])&&(o=this.Am(o),t[i]=o,"points"===i&&Array.isArray(o))){n=0==o.length%2;for(var a=0;a<o.length;a++)if("number"!=typeof o[a]){n=!1;break}if(n){for(n=new tt,a=0;a<o.length/2;a++)n.add(new pt(o[2*a],o[2*a+1]));n.freeze(),t[i]=n}}if("object"==typeof t){if(i=t,0===(o=t.class||"").indexOf("go.")&&(o=o.substr(3)),"NaN"===o)i=NaN;else if("Date"===o)i=new Date(t.value);else if("Point"===o)i=new pt(np(t.x),np(t.y));else if("Size"===o)i=new Lt(np(t.width),np(t.height));else if("Rect"===o)i=new Vt(np(t.x),np(t.y),np(t.width),np(t.height));else if("Margin"===o)i=new Jt(np(t.top),np(t.right),np(t.bottom),np(t.left));else if("Spot"===o)i="string"==typeof t.enum?Re(t.enum):new Fe(np(t.x),np(t.y),np(t.offsetX),np(t.offsetY));else if("Brush"===o){if((i=new Vs).type=q(Vs,t.type),"string"==typeof t.color&&(i.color=t.color),t.start instanceof Fe&&(i.start=t.start),t.end instanceof Fe&&(i.end=t.end),"number"==typeof t.startRadius&&(i.startRadius=np(t.startRadius)),"number"==typeof t.endRadius&&(i.endRadius=np(t.endRadius)),S(t=t.colorStops))for(e in t)i.addColorStop(parseFloat(e),t[e])}else"Geometry"===o?(e=null,(e="string"==typeof t.path?Ze(t.path):new Xe).type=q(Xe,t.type),"number"==typeof t.startX&&(e.startX=np(t.startX)),"number"==typeof t.startY&&(e.startY=np(t.startY)),"number"==typeof t.endX&&(e.endX=np(t.endX)),"number"==typeof t.endY&&(e.endY=np(t.endY)),t.spot1 instanceof Fe&&(e.spot1=t.spot1),t.spot2 instanceof Fe&&(e.spot2=t.spot2),i=e):"EnumValue"===o&&(0===(e=t.classType).indexOf("go.")&&(e=e.substr(3)),"function"==typeof(e=fp(e))&&(i=q(e,t.name)));t=i}}return t},i.quote=function(t){for(var e="",i=t.length,n=0;n<i;n++){var o=t[n];if('"'===o||"\\"===o)e+="\\"+o;else if("\b"===o)e+="\\b";else if("\f"===o)e+="\\f";else if("\n"===o)e+="\\n";else if("\r"===o)e+="\\r";else if("\t"===o)e+="\\t";else{var a=t.charCodeAt(n);e=16>a?e+"\\u000"+t.charCodeAt(n).toString(16):32>a?e+"\\u00"+t.charCodeAt(n).toString(16):8232===a?e+"\\u2028":8233===a?e+"\\u2029":e+o}}return'"'+e+'"'},i.Km=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Km(t.valueOf()):T(t)?Qh(this,t):S(t)?ip(this,t):"function"==typeof t?"null":t.toString()},i.Ah=function(t){this.Gu.add(t)},i.wk=function(t){this.Gu.remove(t)},i.dt=function(t){this.skipsUndoManager||this.undoManager.Gv(t);for(var e=this.Gu,i=e.length,n=0;n<i;n++)e.L(n)(t)},i.Ya=function(t,e,i,n,o,a,r){op(this,"",t,e,i,n,o,a,r)},i.g=function(t,e,i,n,o){op(this,"",xi,t,this,e,i,n,o)},i.Ht=function(t,e,i,n,o,a){op(this,"",xi,e,t,i,n,o,a)},Gh.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===xi)mp(t.object,t.propertyName,t.H(e));else if(t.change===Si){var i=t.newParam;if("nodeDataArray"===t.modelChange){if(S(t=t.newValue)&&"number"==typeof i){var n=this.ja(t);e?(this.Cc[i]===t&&I(this.Cc,i),void 0!==n&&this.bb.remove(n)):(this.Cc[i]!==t&&D(this.Cc,i,t),void 0!==n&&this.bb.add(n,t))}}else""===t.modelChange?((n=t.object)&&!T(n)&&t.propertyName&&(n=gp(t.object,t.propertyName)),T(n)&&"number"==typeof i&&(t=t.newValue,e?I(n,i):D(n,i,t))):_("unknown ChangedEvent.Insert modelChange: "+t.toString())}else t.change===Ti?(i=t.oldParam,"nodeDataArray"===t.modelChange?S(t=t.oldValue)&&"number"==typeof i&&(n=this.ja(t),e?(this.Cc[i]!==t&&D(this.Cc,i,t),void 0!==n&&this.bb.add(n,t)):(this.Cc[i]===t&&I(this.Cc,i),void 0!==n&&this.bb.remove(n))):""===t.modelChange?((n=t.object)&&!T(n)&&t.propertyName&&(n=gp(t.object,t.propertyName)),T(n)&&"number"==typeof i&&(t=t.oldValue,e?D(n,i,t):I(n,i))):_("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==ki&&_("unknown ChangedEvent: "+t.toString())},Gh.prototype.ua=function(t){return this.undoManager.ua(t)},Gh.prototype.Ua=function(t){return this.undoManager.Ua(t)},Gh.prototype.Af=function(){return this.undoManager.Af()},Gh.prototype.commit=function(t,e){void 0===e&&(e="");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.ua(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Ua(e):this.undoManager.Af(),this.skipsUndoManager=i}},(i=Gh.prototype).Ba=function(t,e){void 0===e&&(e=""),op(this,"SourceChanged",ki,e,t,null,null)},i.ja=function(t){if(null!==t){var e=this.Ai;if(""!==e&&void 0!==(e=gp(t,e))){if(ap(e))return e;_("Key value for node data "+t+" is not a number or a string: "+e)}}},i.Gm=function(t,e){if(null!==t){var i=this.Ai;if(""!==i)if(this.sb(t)){var n=gp(t,i);n!==e&&null===this.Jb(e)&&(mp(t,i,e),void 0!==n&&this.bb.remove(n),this.bb.add(e,t),op(this,"nodeKey",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i),this.Iq(n,e))}else mp(t,i,e)}},i.sb=function(t){var e=this.ja(t);return void 0!==e&&this.bb.H(e)===t},i.Jb=function(t){return null===t&&_("Model.findNodeDataForKey:key must not be null"),void 0!==t&&ap(t)?this.bb.H(t):null},i.Bt=function(t){if(null!==t){var e=this.Ai;if(""!==e){var i=this.ja(t);if(void 0===i||this.bb.contains(i)){var n=this.vl;if(null!==n&&null!=(i=n(this,t))&&!this.bb.contains(i))return void mp(t,e,i);if("string"==typeof i){for(n=2;this.bb.contains(i+n);)n++;mp(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(i=-this.bb.count-1;this.bb.contains(i);)i--;mp(t,e,i)}}}}},i.pf=function(t){null!==t&&(ot(t),this.sb(t)||rp(this,t,!0))},i.Ly=function(t){if(T(t))for(var e=t.length,i=0;i<e;i++)this.pf(t[i]);else for(t=t.iterator;t.next();)this.pf(t.value)},i.zm=function(t){null!==t&&sp(this,t,!0)},i.sA=function(t){if(T(t))for(var e=t.length,i=0;i<e;i++)this.zm(t[i]);else for(t=t.iterator;t.next();)this.zm(t.value)},i.iA=function(t){if(T(t)){for(var e=new it(this.bb.iteratorKeys),i=new it,n=t.length,o=0;o<n;o++){var a=t[o],r=this.ja(a);if(void 0!==r){i.add(r);var s=this.Jb(r);null!==s?this.Xj(s,a):(this.Gm(s={},r),this.Xj(s,a),this.pf(s))}else this.pf(a),i.add(this.ja(a))}for(t=e.iterator;t.next();)i.contains(e=t.value)||(e=this.Jb(e))&&this.zm(e);this.hq()}},i.Iq=function(t,e){void 0!==e&&(t=up(this,t))instanceof it&&this.Of.add(e,t)},i.vw=function(){},i.Cm=function(){},i.Bm=function(){},i.Pq=function(){},i.hq=function(t){void 0===t?this.Of.clear():this.Of.remove(t)},Gh.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Ok;return S(t=null!==e?e(t,this):dp(this,t,!0))&&nt(t),t},Gh.prototype.setDataProperty=function(t,e,i){if(this.sb(t)){if(e===this.nodeKeyProperty)this.Gm(t,i);else if(e===this.nodeCategoryProperty)return void this.Kq(t,i)}else!vp&&t instanceof qr&&(vp=!0,k('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),k("  Is that really your intent?"));var n=gp(t,e);n!==i&&(mp(t,e,i),this.Ht(t,e,n,i))},(i=Gh.prototype).set=function(t,e,i){this.setDataProperty(t,e,i)},i.Xj=function(t,e){if(e){var i,n=this.sb(t);for(i in e)"__gohashid"===i||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},i.Hy=function(t,e){this.st(t,-1,e)},i.st=function(t,e,i){0>e&&(e=t.length),D(t,e,i),op(this,"",Si,"",t,null,i,null,e)},i.Zv=function(t,e){void 0===e&&(e=-1),t===this.Cc&&_("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var i=t[e];I(t,e),op(this,"",Ti,"",t,i,null,e,null)},i.pt=function(t){if(null===t)return"";var e=this.Gj;return""===e||void 0===(e=gp(t,e))?"":"string"==typeof e?e:(_("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},i.Kq=function(t,e){if(null!==t){var i=this.Gj;if(""!==i)if(this.sb(t)){var n=gp(t,i);void 0===n&&(n=""),n!==e&&(mp(t,i,e),op(this,"nodeCategory",xi,i,t,n,e))}else mp(t,i,e)}},i.pm=function(){return!1},i.ik=function(){return!1},i.om=function(){return!1},i.xt=function(){return!1},i.jk=function(){return!1},h.Object.defineProperties(Gh.prototype,{name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.tn},set:function(t){var e=this.tn;e!==t&&(this.tn=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Wf},set:function(t){var e=this.Wf;e!==t&&(this.Wf=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.g("modelData",e,t),this.Ba(t))}},undoManager:{get:function(){return this.u},set:function(t){var e=this.u;e!==t&&(null!==e&&e.gy(this),this.u=t,null!==t&&t.wx(this))}},skipsUndoManager:{get:function(){return this.pg},set:function(t){this.pg=t}},nodeKeyProperty:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(""===t&&_("Model.nodeKeyProperty may not be the empty string"),0<this.bb.count&&_("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Ai=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.vl},set:function(t){var e=this.vl;e!==t&&(this.vl=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Cc},set:function(t){var e=this.Cc;if(e!==t){this.bb.clear(),this.vw();for(var i=t.length,n=0;n<i;n++){var o=t[n];if(!S(o))return void _("Model.nodeDataArray must only contain Objects, not: "+o);ot(o)}for(this.Cc=t,n=new tt,o=0;o<i;o++){var a=t[o],r=this.ja(a);void 0===r||null!==this.bb.H(r)?n.add(a):this.bb.add(r,a)}for(n=n.iterator;n.next();)this.Bt(o=n.value),void 0!==(a=this.ja(o))&&this.bb.add(a,o);for(op(this,"nodeDataArray",xi,"nodeDataArray",this,e,t),e=0;e<i;e++)this.Cm(n=t[e]),this.Bm(n);this.hq(),Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Ok},set:function(t){var e=this.Ok;e!==t&&(this.Ok=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.ln},set:function(t){var e=this.ln;e!==t&&(this.ln=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.Sm},set:function(t){var e=this.Sm;e!==t&&(this.Sm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Gj},set:function(t){var e=this.Gj;e!==t&&(this.Gj=t,this.g("nodeCategoryProperty",e,t))}}}),h.Object.defineProperties(Gh,{type:{get:function(){return"Model"}}}),Gh.prototype.setCategoryForNodeData=Gh.prototype.Kq,Gh.prototype.getCategoryForNodeData=Gh.prototype.pt,Gh.prototype.removeArrayItem=Gh.prototype.Zv,Gh.prototype.insertArrayItem=Gh.prototype.st,Gh.prototype.addArrayItem=Gh.prototype.Hy,Gh.prototype.assignAllDataProperties=Gh.prototype.Xj,Gh.prototype.set=Gh.prototype.set,Gh.prototype.clearUnresolvedReferences=Gh.prototype.hq,Gh.prototype.mergeNodeDataArray=Gh.prototype.iA,Gh.prototype.removeNodeDataCollection=Gh.prototype.sA,Gh.prototype.removeNodeData=Gh.prototype.zm,Gh.prototype.addNodeDataCollection=Gh.prototype.Ly,Gh.prototype.addNodeData=Gh.prototype.pf,Gh.prototype.makeNodeDataKeyUnique=Gh.prototype.Bt,Gh.prototype.findNodeDataForKey=Gh.prototype.Jb,Gh.prototype.containsNodeData=Gh.prototype.sb,Gh.prototype.setKeyForNodeData=Gh.prototype.Gm,Gh.prototype.getKeyForNodeData=Gh.prototype.ja,Gh.prototype.updateTargetBindings=Gh.prototype.Ba,Gh.prototype.commit=Gh.prototype.commit,Gh.prototype.rollbackTransaction=Gh.prototype.Af,Gh.prototype.commitTransaction=Gh.prototype.Ua,Gh.prototype.startTransaction=Gh.prototype.ua,Gh.prototype.raiseDataChanged=Gh.prototype.Ht,Gh.prototype.raiseChanged=Gh.prototype.g,Gh.prototype.raiseChangedEvent=Gh.prototype.Ya,Gh.prototype.removeChangedListener=Gh.prototype.wk,Gh.prototype.addChangedListener=Gh.prototype.Ah,Gh.prototype.writeJsonValue=Gh.prototype.Km,Gh.prototype.replaceJsonObjects=Gh.prototype.Am,Gh.prototype.applyIncrementalJSON=Gh.prototype.Py,Gh.prototype.applyIncrementalJson=Gh.prototype.yx,Gh.prototype.toJSON=Gh.prototype.toJSON,Gh.prototype.toJson=Gh.prototype.Nq,Gh.prototype.toIncrementalJSON=Gh.prototype.DA,Gh.prototype.toIncrementalJson=Gh.prototype.ty,Gh.prototype.computeJsonDifference=Gh.prototype.Vy,Gh.prototype.toIncrementalData=Gh.prototype.CA,Gh.prototype.clear=Gh.prototype.clear;var vp=!1,bp={};function _p(t,e,i){nt(this),this.s=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===i&&(i=null),this.l=-1,this.bd=null,this.Vl=t,this.Ul=this.Rp=0,this.Os=null,this.fo=!1,this.Nl=e,this.jn=i,this.Fo=yp,this.cn=null,this.ru=new it}function wp(t,e,i){return null===(t=t.sourceName)||""===t?e:"/"===t?i.part:"."===t?i:".."===t?i.panel:e.Xa(t)}Gh.className="Model",Gh.fromJSON=Gh.fromJson=function(t,e){void 0===e&&(e=null);var i=null;if("string"==typeof t)try{i=f.JSON.parse(t)}catch(a){}else"object"==typeof t?i=t:_("Unable to construct a Model from: "+t);if(null===e){t=null;var n=i.class;if("string"==typeof n)try{var o=null;0===n.indexOf("go.")?o=fp(n=n.substr(3)):null===(o=fp(n))&&(o=f[n]),"function"==typeof o&&(t=new o)}catch(a){}null===t||t instanceof Gh?e=t:_("Unable to construct a Model of declared class: "+i.class)}return null===e&&(e=Gh.constructGraphLinksModel()),e.Fq(i),e.Xv(i),e},Gh.safePropertyValue=gp,Gh.safePropertySet=mp,bp.Brush=Vs,bp.ChangedEvent=yi,bp.Geometry=Xe,bp.Margin=Jt,bp.Panel=Ic,bp.Point=pt,bp.Rect=Vt,bp.Size=Lt,bp.Spot=Fe,bp.Transaction=Ci,bp.UndoManager=Di,_p.prototype.copy=function(){var t=new _p;return t.Vl=this.Vl,t.Rp=this.Rp,t.Ul=this.Ul,t.Os=this.Os,t.fo=this.fo,t.Nl=this.Nl,t.jn=this.jn,t.Fo=this.Fo,t.cn=this.cn,t},(i=_p.prototype).eb=function(t){t.classType===_p&&(this.mode=t)},i.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.gj?" "+this.gj:"")+" "+this.mode.name+")"},i.freeze=function(){return this.s=!0,this},i.ea=function(){return this.s=!1,this},i.Xx=function(t){return void 0===t&&(t=null),this.mode=kp,this.backConverter=t,this},i.Bq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},i.kA=function(){return this.sourceName=null,this.isToModel=!0,this},i.ww=function(t,e,i){var n=this.Nl;if(void 0===i||""===n||n===i){i=this.Vl;var o=this.jn;if(null===o&&""===i)k("Binding error: target property is the empty string: "+this.toString());else{var a=e;if(""!==n&&(a=gp(e,n)),void 0!==a)if(null===o)""!==i&&mp(t,i,a);else try{""!==i?mp(t,i,o(a,t)):o(a,t)}catch(r){}}}},i.Rq=function(t,e,i,n){if(this.Fo===kp){var o=this.Vl;if(void 0===i||o===i){i=this.Nl;var a=this.cn,r=t;if(""!==o&&(r=gp(t,o)),void 0!==r&&!this.ru.contains(t))try{this.ru.add(t);var s=null!==n?n.diagram:null,c=null!==s?s.model:null;if(null===a){if(""!==i)null!==c?c.setDataProperty(e,i,r):mp(e,i,r);else if(null!==c&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var l=n.itemIndex,u=n.panel.itemArray;c.Zv(u,l),c.st(u,l,r)}}else try{if(""!==i){var d=a(r,e,c);null!==c?c.setDataProperty(e,i,d):mp(e,i,d)}else{var h=a(r,e,c);if(void 0!==h&&null!==c&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var p=n.itemIndex,f=n.panel.itemArray;c.Zv(f,p),c.st(f,p,h)}}}catch(g){}}finally{this.ru.remove(t)}}}},h.Object.defineProperties(_p.prototype,{gj:{get:function(){return this.l},set:function(t){this.s&&w(this),this.l=t}},targetProperty:{get:function(){return this.Vl},set:function(t){this.s&&w(this),this.Vl=t}},sourceName:{get:function(){return this.Os},set:function(t){this.s&&w(this),this.Os=t,null!==t&&(this.fo=!1)}},isToModel:{get:function(){return this.fo},set:function(t){this.s&&w(this),this.fo=t}},sourceProperty:{get:function(){return this.Nl},set:function(t){this.s&&w(this),this.Nl=t}},converter:{get:function(){return this.jn},set:function(t){this.s&&w(this),this.jn=t}},backConverter:{get:function(){return this.cn},set:function(t){this.s&&w(this),this.cn=t}},mode:{get:function(){return this.Fo},set:function(t){this.s&&w(this),this.Fo=t}}}),_p.prototype.updateSource=_p.prototype.Rq,_p.prototype.updateTarget=_p.prototype.ww,_p.prototype.ofModel=_p.prototype.kA,_p.prototype.ofObject=_p.prototype.Bq,_p.prototype.makeTwoWay=_p.prototype.Xx;var yp=new W(_p,"OneWay",1),kp=new W(_p,"TwoWay",2);function xp(t,e){Gh.call(this),this.Wt=',\n  "insertedLinkKeys": ',this.Kw=',\n  "modifiedLinkData": ',this.Yt=',\n  "removedLinkKeys": ',this.Oc=[],this.Xf=new it,this.ob=new ht,this.wi="",this.ij=this.Nk=this.wl=null,this.Ve="from",this.We="to",this.Dj=this.Cj="",this.Bj="category",this.Nd="",this.Al="isGroup",this.te="group",this.mn=!1,void 0!==t&&(this.nodeDataArray=t),void 0!==e&&(this.linkDataArray=e)}function Sp(t,e){for(var i=new it,n=0;n<t.linkDataArray.length;n++){var o=t.linkDataArray[n];Jh(t,e,o,o,i)}return i}function Tp(t,e,i){if(null!==e&&""!==(t=i?t.Ve:t.We)&&void 0!==(t=gp(e,t))){if(ap(t))return t;_((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Cp(t,e,i,n){if(null===i&&(i=void 0),null!==e){var o=n?t.Ve:t.We;if(""!==o)if(i=t.qm(i),t.cd(e)){var a=gp(e,o);a!==i&&(lp(t,a,e),mp(e,o,i),null===t.Jb(i)&&cp(t,i,e),op(t,n?"linkFromKey":"linkToKey",xi,o,e,a,i),"string"==typeof o&&t.Ba(e,o))}else mp(e,o,i)}}function Dp(t,e,i){return null===e||""===(t=i?t.Cj:t.Dj)||void 0===(e=gp(e,t))?"":e}function Ip(t,e,i,n){if(null!==e){var o=n?t.Cj:t.Dj;if(""!==o)if(t.cd(e)){var a=gp(e,o);void 0===a&&(a=""),a!==i&&(mp(e,o,i),op(t,n?"linkFromPortId":"linkToPortId",xi,o,e,a,i),"string"==typeof o&&t.Ba(e,o))}else mp(e,o,i)}}function Pp(t,e,i){if(""!==t.linkKeyProperty){var n=t.Vb(e);if(void 0!==n&&t.ob.H(n)===e)return;if(t.yq(e),void 0===(n=t.Vb(e)))return void _("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.ob.add(n,e)}t.Xf.add(e),n=null,i&&t.Oc.splice(n=t.Oc.length,0,e),op(t,"linkDataArray",Si,"linkDataArray",t,null,e,null,n),Op(t,e)}function Mp(t,e,i){t.Xf.remove(e);var n=t.Vb(e);if(void 0!==n&&t.ob.remove(n),n=null,i){if(0>(n=t.Oc.indexOf(e)))return;t.Oc.splice(n,1)}if(op(t,"linkDataArray",Ti,"linkDataArray",t,e,null,n,null),lp(t,i=Tp(t,e,!0),e),lp(t,i=Tp(t,e,!1),e),n=t.zg(e),Array.isArray(n))for(var o=n.length,a=0;a<o;a++)lp(t,i=n[a],e)}function Op(t,e){var i=Tp(t,e,!0);i=t.qm(i),null===t.Jb(i)&&cp(t,i,e),i=Tp(t,e,!1),i=t.qm(i),null===t.Jb(i)&&cp(t,i,e);var n=t.zg(e);if(Array.isArray(n))for(var o=n.length,a=0;a<o;a++)null===t.Jb(i=n[a])&&cp(t,i,e)}_p.className="Binding",_p.parseEnum=function(t,e){return function(i){return null===(i=q(t,i))?e:i}},_p.toString=$,_p.OneWay=yp,_p.TwoWay=kp,d(xp,Gh),xp.constructGraphLinksModel=Gh.constructGraphLinksModel,xp.prototype.cloneProtected=function(t){Gh.prototype.cloneProtected.call(this,t),t.wi=this.wi,t.wl=this.wl,t.Nk=this.Nk,t.Ve=this.Ve,t.We=this.We,t.Cj=this.Cj,t.Dj=this.Dj,t.Bj=this.Bj,t.Nd=this.Nd,t.Al=this.Al,t.te=this.te,t.mn=this.mn},(i=xp.prototype).clear=function(){Gh.prototype.clear.call(this),this.Oc=[],this.ob.clear(),this.Xf.clear()},i.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Nq();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var i,n=(t=this.nodeDataArray).length;for(i=0;i<n;i++){var o=t[i];e+=" "+this.ja(o)+":"+$(o)}for(e+="\n link data:",n=(t=this.linkDataArray).length,i=0;i<n;i++)e+=" "+Tp(this,o=t[i],!0)+"--\x3e"+Tp(this,o,!1)}return e},i.Aw=function(t,e){""===this.linkKeyProperty&&_("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=Gh.prototype.Aw.call(this,t,e),n=this,o=new it,a=new it,r=new it,s=this.Ph;t.changes.each(function(t){t.model===n&&("linkDataArray"===t.modelChange?t.change===Si?o.add(t.newValue):t.change===Ti&&r.add(t.oldValue):n.cd(t.object)?a.add(t.object):null!==t.object&&(null!==t.object&&s&&s.contains(t.object)?s.get(t.object).each(function(t){n.cd(t)&&a.add(t)}):Sp(n,t.object).each(function(t){a.add(t)})))});var c=new it;o.each(function(t){c.add(n.Vb(t)),e||a.add(t)});var l=new it;return r.each(function(t){l.add(n.Vb(t)),e&&a.add(t)}),t=n.cloneDeep(a.na()),0<c.count&&(null===i&&(i={}),e?i.removedLinkKeys=c.na():i.insertedLinkKeys=c.na()),0<t.length&&(null===i&&(i={}),i.modifiedLinkData=t),0<l.count&&(null===i&&(i={}),e?i.insertedLinkKeys=l.na():i.removedLinkKeys=l.na()),i},i.zk=function(){var t=Gh.prototype.zk.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},i.Fq=function(t){Gh.prototype.Fq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},i.Bw=function(){return Gh.prototype.Bw.call(this)+',\n  "linkDataArray": '+Qh(this,this.linkDataArray,!0)},i.Xv=function(t){Gh.prototype.Xv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Am(t),this.linkDataArray=t)},i.Sq=function(t){if(!(t instanceof xp))return _("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.linkKeyProperty&&_("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=Gh.prototype.Sq.call(this,t);Yh(this,t,"linkKeyProperty"),Yh(this,t,"linkFromKeyProperty"),Yh(this,t,"linkToKeyProperty"),Yh(this,t,"linkLabelKeysProperty"),Yh(this,t,"nodeIsGroupProperty"),Yh(this,t,"nodeGroupKeyProperty");for(var i=new it,n=new it,o=(new it).addAll(this.ob.iteratorKeys),a=new ht,r=t.linkDataArray,s=r.length,c=0;c<s;c++){var l=r[c],u=t.Vb(l);if(void 0!==u){o.remove(u);var d=this.wg(u);null===d?(i.add(u),n.add(l)):Xh(this,d,l,a)||n.add(l)}else this.yq(l),u=this.Vb(l),i.add(u),n.add(l)}return t=e,0<i.count&&(t+=this.Wt+Qh(this,i.na(),!0)),0<n.count&&(t+=this.Kw+Qh(this,n.na(),!0)),0<o.count&&(t+=this.Yt+Qh(this,o.na(),!0)),t},i.zw=function(t,e){""===this.linkKeyProperty&&_("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=Gh.prototype.zw.call(this,t,e),n=this,o=new it,a=new it,r=new it,s=this.Ph;t.changes.each(function(t){t.model===n&&("linkDataArray"===t.modelChange?t.change===Si?o.add(t.newValue):t.change===Ti&&r.add(t.oldValue):n.cd(t.object)?a.add(t.object):null!==t.object&&(null!==t.object&&s&&s.contains(t.object)?s.get(t.object).each(function(t){n.cd(t)&&a.add(t)}):Sp(n,t.object).each(function(t){a.add(t)})))});var c=new it;o.each(function(t){c.add(n.Vb(t)),e||a.add(t)});var l=new it;return r.each(function(t){l.add(n.Vb(t)),e&&a.add(t)}),t=i,0<c.count&&(t+=(e?this.Yt:this.Wt)+Qh(this,c.na(),!0)),0<a.count&&(t+=this.Kw+Qh(this,a.na(),!0)),0<l.count&&(t+=(e?this.Wt:this.Yt)+Qh(this,l.na(),!0)),t},i.Eq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&_("applyIncrementalJson cannot change Model properties"),Gh.prototype.Eq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var o=e[n],a=this.wg(o);null===a&&(a=this.iq({}),this.Pt(a,o),this.Ni(a))}if(e=t.modifiedLinkData,Array.isArray(e))for(i=e.length,n=0;n<i;n++)if(a=this.Vb(o=e[n]),null!==(a=this.wg(a)))for(var r in o)"__gohashid"!==r&&r!==this.linkKeyProperty&&this.setDataProperty(a,r,o[r]);if(t=t.removedLinkKeys,Array.isArray(t))for(r=t.length,e=0;e<r;e++)null!==(i=this.wg(t[e]))&&this.ym(i)},xp.prototype.changeState=function(t,e){if(t.change===Si){var i=t.newParam;if("linkDataArray"===t.modelChange){if(S(t=t.newValue)&&"number"==typeof i){var n=this.Vb(t);e?(this.Xf.remove(t),this.Oc[i]===t&&this.Oc.splice(i,1),void 0!==n&&this.ob.remove(n)):(this.Xf.add(t),this.Oc[i]!==t&&this.Oc.splice(i,0,t),void 0!==n&&this.ob.add(n,t))}return}if("linkLabelKeys"===t.modelChange)return n=this.zg(t.object),void(Array.isArray(n)&&"number"==typeof i&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue)))}else if(t.change===Ti){if(i=t.oldParam,"linkDataArray"===t.modelChange)return void(S(t=t.oldValue)&&"number"==typeof i&&(n=this.Vb(t),e?(this.Xf.add(t),this.Oc[i]!==t&&this.Oc.splice(i,0,t),void 0!==n&&this.ob.add(n,t)):(this.Xf.remove(t),this.Oc[i]===t&&this.Oc.splice(i,1),void 0!==n&&this.ob.remove(n))));if("linkLabelKeys"===t.modelChange)return n=this.zg(t.object),void(Array.isArray(n)&&"number"==typeof i&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1))))}Gh.prototype.changeState.call(this,t,e)},(i=xp.prototype).qm=function(t){if(void 0!==t){var e=this.ij;if(null!==e){var i=this.Jb(t);null===i&&(mp(i=this.copyNodeData(e),this.nodeKeyProperty,t),this.pf(i))}return t}},i.Ez=function(t){return Tp(this,t,!0)},i.ky=function(t,e){Cp(this,t,e,!0)},i.Kz=function(t){return Tp(this,t,!1)},i.oy=function(t,e){Cp(this,t,e,!1)},i.Fz=function(t){return Dp(this,t,!0)},i.ly=function(t,e){Ip(this,t,e,!0)},i.Lz=function(t){return Dp(this,t,!1)},i.py=function(t,e){Ip(this,t,e,!1)},i.zg=function(t){if(null===t)return $p;var e=this.Nd;return""===e||void 0===(t=gp(t,e))?$p:t},i.hw=function(t,e){if(null!==t){var i=this.Nd;if(""!==i)if(this.cd(t)){var n=gp(t,i);if(void 0===n&&(n=$p),n!==e){if(Array.isArray(n))for(var o=n.length,a=0;a<o;a++)lp(this,n[a],t);for(mp(t,i,e),o=e.length,a=0;a<o;a++){var r=e[a];null===this.Jb(r)&&cp(this,r,t)}op(this,"linkLabelKeys",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i)}}else mp(t,i,e)}},i.hv=function(t,e){if(null!=e&&null!==t){var i=this.Nd;if(""!==i){var n=gp(t,i);if(void 0===n)(i=[]).push(e),this.hw(t,i);else if(Array.isArray(n)){var o=n.indexOf(e);0<=o||(o=n.length,n.push(e),this.cd(t)&&(null===this.Jb(e)&&cp(this,e,t),op(this,"linkLabelKeys",Si,i,t,null,e,null,o)))}else _(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},i.ey=function(t,e){if(null!=e&&null!==t){var i=this.Nd;if(""!==i){var n=gp(t,i);if(Array.isArray(n)){var o=n.indexOf(e);0>o||(n.splice(o,1),this.cd(t)&&(lp(this,e,t),op(this,"linkLabelKeys",Ti,i,t,e,null,o,null)))}else void 0!==n&&_(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},i.Vb=function(t){if(null!==t){var e=this.wi;if(""!==e&&void 0!==(e=gp(t,e))){if(ap(e))return e;_("Key value for link data "+t+" is not a number or a string: "+e)}}},i.Pt=function(t,e){if(null!==t){var i=this.wi;if(""!==i)if(this.cd(t)){var n=gp(t,i);n!==e&&null===this.wg(e)&&(mp(t,i,e),void 0!==n&&this.ob.remove(n),this.ob.add(e,t),op(this,"linkKey",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i))}else mp(t,i,e)}},i.wg=function(t){return null===t&&_("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&ap(t)?this.ob.H(t):null},i.yq=function(t){if(null!==t){var e=this.wi;if(""!==e){var i=this.Vb(t);if(void 0===i||this.ob.contains(i)){var n=this.wl;if(null!==n&&null!=(i=n(this,t))&&!this.ob.contains(i))return void mp(t,e,i);if("string"==typeof i){for(n=2;this.ob.contains(i+n);)n++;mp(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(i=-this.ob.count-1;this.ob.contains(i);)i--;mp(t,e,i)}}}}},i.cd=function(t){return null!==t&&this.Xf.contains(t)},i.Ni=function(t){null!==t&&(ot(t),this.cd(t)||Pp(this,t,!0))},i.Ky=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.Ni(t[i]);else for(t=t.iterator;t.next();)this.Ni(t.value)},i.ym=function(t){null!==t&&Mp(this,t,!0)},i.qA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.ym(t[i]);else for(t=t.iterator;t.next();)this.ym(t.value)},i.hA=function(t){if(""===this.linkKeyProperty&&_("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),T(t)){for(var e=new it(this.ob.iteratorKeys),i=new it,n=t.length,o=0;o<n;o++){var a=t[o],r=this.Vb(a);if(void 0!==r){i.add(r);var s=this.wg(r);null!==s?this.Xj(s,a):(this.Pt(s={},r),this.Xj(s,a),this.Ni(s))}else this.Ni(a),i.add(this.Vb(a))}for(t=e.iterator;t.next();)i.contains(e=t.value)||(e=this.wg(e))&&this.ym(e);this.hq()}},i.iq=function(t){if(null===t)return null;var e=this.Nk;return S(t=null!==e?e(t,this):dp(this,t,!0))&&(nt(t),""!==this.Ve&&mp(t,this.Ve,void 0),""!==this.We&&mp(t,this.We,void 0),""!==this.Nd&&mp(t,this.Nd,[])),t},i.Lv=function(t){if(null===t)return!1;var e=this.Al;return""!==e&&!!gp(t,e)},i.Yi=function(t){if(null!==t){var e=this.te;if(""!==e&&void 0!==(e=gp(t,e))){if(ap(e))return e;_("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},i.Ot=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.te;if(""!==i)if(this.sb(t)){var n=gp(t,i);n!==e&&(lp(this,n,t),mp(t,i,e),null===this.Jb(e)&&cp(this,e,t),op(this,"nodeGroupKey",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i))}else mp(t,i,e)}},xp.prototype.copyNodeData=function(t){return null===t?null:(t=Gh.prototype.copyNodeData.call(this,t),this.ak||""===this.te||void 0===gp(t,this.te)||mp(t,this.te,void 0),t)},xp.prototype.setDataProperty=function(t,e,i){if(this.sb(t))if(e===this.nodeKeyProperty)this.Gm(t,i);else{if(e===this.nodeCategoryProperty)return void this.Kq(t,i);if(e===this.nodeGroupKeyProperty)return void this.Ot(t,i)}else if(this.cd(t)){if(e===this.linkFromKeyProperty)return void Cp(this,t,i,!0);if(e===this.linkToKeyProperty)return void Cp(this,t,i,!1);if(e===this.linkFromPortIdProperty)return void Ip(this,t,i,!0);if(e===this.linkToPortIdProperty)return void Ip(this,t,i,!1);if(e===this.linkKeyProperty)return void this.Pt(t,i);if(e===this.linkCategoryProperty)return void this.Nt(t,i);if(e===this.linkLabelKeysProperty)return void this.hw(t,i)}var n=gp(t,e);n!==i&&(mp(t,e,i),this.Ht(t,e,n,i))},(i=xp.prototype).Xj=function(t,e){if(e){var i,n=this.sb(t),o=this.cd(t);for(i in e)"__gohashid"===i||n&&i===this.nodeKeyProperty||n&&i===this.nodeIsGroupProperty&&gp(t,i)===e[i]||o&&i===this.linkKeyProperty||this.setDataProperty(t,i,e[i])}},i.Iq=function(t,e){Gh.prototype.Iq.call(this,t,e);for(var i=this.bb.iterator;i.next();)this.cw(i.value,t,e);for(i=this.Xf.iterator;i.next();){var n=i.value,o=t,a=e;if(Tp(this,n,!0)===o){var r=this.Ve;mp(n,r,a),op(this,"linkFromKey",xi,r,n,o,a),"string"==typeof r&&this.Ba(n,r)}if(Tp(this,n,!1)===o&&(mp(n,r=this.We,a),op(this,"linkToKey",xi,r,n,o,a),"string"==typeof r&&this.Ba(n,r)),r=this.zg(n),Array.isArray(r))for(var s=r.length,c=this.Nd,l=0;l<s;l++)r[l]===o&&(r[l]=a,op(this,"linkLabelKeys",Si,c,n,o,a,l,l))}},i.cw=function(t,e,i){if(this.Yi(t)===e){var n=this.te;mp(t,n,i),op(this,"nodeGroupKey",xi,n,t,e,i),"string"==typeof n&&this.Ba(t,n)}},i.vw=function(){Gh.prototype.vw.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Op(this,t[i])},i.Cm=function(t){Gh.prototype.Cm.call(this,t);var e=up(this,t=this.ja(t));if(null!==e){var i=P();for(e=e.iterator;e.next();){var n=e.value;if(this.sb(n)){if(this.Yi(n)===t){var o=this.te;op(this,"nodeGroupKey",xi,o,n,t,t),"string"==typeof o&&this.Ba(n,o),i.push(n)}}else if(Tp(this,n,!0)===t&&(op(this,"linkFromKey",xi,o=this.Ve,n,t,t),"string"==typeof o&&this.Ba(n,o),i.push(n)),Tp(this,n,!1)===t&&(op(this,"linkToKey",xi,o=this.We,n,t,t),"string"==typeof o&&this.Ba(n,o),i.push(n)),o=this.zg(n),Array.isArray(o))for(var a=o.length,r=this.Nd,s=0;s<a;s++)o[s]===t&&(op(this,"linkLabelKeys",Si,r,n,t,t,s,s),i.push(n))}for(e=0;e<i.length;e++)lp(this,t,i[e]);M(i)}},i.Bm=function(t){Gh.prototype.Bm.call(this,t);var e=this.Yi(t);null===this.Jb(e)&&cp(this,e,t)},i.Pq=function(t){Gh.prototype.Pq.call(this,t),lp(this,this.Yi(t),t)},i.Av=function(t){if(null===t)return"";var e=this.Bj;return""===e||void 0===(e=gp(t,e))?"":"string"==typeof e?e:(_("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},xp.prototype.getLinkCategoryForData=function(t){return this.Av(t)},xp.prototype.Nt=function(t,e){if(null!==t){var i=this.Bj;if(""!==i)if(this.cd(t)){var n=gp(t,i);void 0===n&&(n=""),n!==e&&(mp(t,i,e),op(this,"linkCategory",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i))}else mp(t,i,e)}},xp.prototype.setLinkCategoryForData=function(t,e){this.Nt(t,e)},xp.prototype.ik=function(){return!0},xp.prototype.om=function(){return!0},xp.prototype.xt=function(){return!0},xp.prototype.jk=function(){return!0},h.Object.defineProperties(xp.prototype,{archetypeNodeData:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Ve},set:function(t){var e=this.Ve;e!==t&&(this.Ve=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.We},set:function(t){var e=this.We;e!==t&&(this.We=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Cj},set:function(t){var e=this.Cj;e!==t&&(this.Cj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Dj},set:function(t){var e=this.Dj;e!==t&&(this.Dj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Oc},set:function(t){var e=this.Oc;if(e!==t){this.ob.clear();for(var i=t.length,n=0;n<i;n++){var o=t[n];if(!S(o))return void _("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);ot(o)}if(this.Oc=t,""!==this.linkKeyProperty){for(n=new tt,o=0;o<i;o++){var a=t[o],r=this.Vb(a);void 0===r||null!==this.ob.H(r)?n.add(a):this.ob.add(r,a)}for(n=n.iterator;n.next();)this.yq(o=n.value),void 0!==(a=this.Vb(o))&&this.ob.add(a,o)}for(n=new it,o=0;o<i;o++)n.add(t[o]);for(this.Xf=n,op(this,"linkDataArray",xi,"linkDataArray",this,e,t),e=0;e<i;e++)Op(this,t[e])}}},linkKeyProperty:{get:function(){return this.wi},set:function(t){var e=this.wi;if(e!==t){this.wi=t,this.ob.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var o=this.linkDataArray[n],a=this.Vb(o);void 0===a&&(this.yq(o),a=this.Vb(o)),void 0!==a&&this.ob.add(a,o)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.wl},set:function(t){var e=this.wl;e!==t&&(this.wl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Nk},set:function(t){var e=this.Nk;e!==t&&(this.Nk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Al},set:function(t){var e=this.Al;e!==t&&(this.Al=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.te},set:function(t){var e=this.te;e!==t&&(this.te=t,this.g("nodeGroupKeyProperty",e,t))}},ak:{get:function(){return this.mn},set:function(t){this.mn!==t&&(this.mn=t)}},linkCategoryProperty:{get:function(){return this.Bj},set:function(t){var e=this.Bj;e!==t&&(this.Bj=t,this.g("linkCategoryProperty",e,t))}}}),h.Object.defineProperties(xp,{type:{get:function(){return"GraphLinksModel"}}}),xp.prototype.setCategoryForLinkData=xp.prototype.Nt,xp.prototype.getCategoryForLinkData=xp.prototype.Av,xp.prototype.assignAllDataProperties=xp.prototype.Xj,xp.prototype.setGroupKeyForNodeData=xp.prototype.Ot,xp.prototype.getGroupKeyForNodeData=xp.prototype.Yi,xp.prototype.isGroupForNodeData=xp.prototype.Lv,xp.prototype.copyLinkData=xp.prototype.iq,xp.prototype.mergeLinkDataArray=xp.prototype.hA,xp.prototype.removeLinkDataCollection=xp.prototype.qA,xp.prototype.removeLinkData=xp.prototype.ym,xp.prototype.addLinkDataCollection=xp.prototype.Ky,xp.prototype.addLinkData=xp.prototype.Ni,xp.prototype.containsLinkData=xp.prototype.cd,xp.prototype.makeLinkDataKeyUnique=xp.prototype.yq,xp.prototype.findLinkDataForKey=xp.prototype.wg,xp.prototype.setKeyForLinkData=xp.prototype.Pt,xp.prototype.getKeyForLinkData=xp.prototype.Vb,xp.prototype.removeLabelKeyForLinkData=xp.prototype.ey,xp.prototype.addLabelKeyForLinkData=xp.prototype.hv,xp.prototype.setLabelKeysForLinkData=xp.prototype.hw,xp.prototype.getLabelKeysForLinkData=xp.prototype.zg,xp.prototype.setToPortIdForLinkData=xp.prototype.py,xp.prototype.getToPortIdForLinkData=xp.prototype.Lz,xp.prototype.setFromPortIdForLinkData=xp.prototype.ly,xp.prototype.getFromPortIdForLinkData=xp.prototype.Fz,xp.prototype.setToKeyForLinkData=xp.prototype.oy,xp.prototype.getToKeyForLinkData=xp.prototype.Kz,xp.prototype.setFromKeyForLinkData=xp.prototype.ky,xp.prototype.getFromKeyForLinkData=xp.prototype.Ez,xp.prototype.clear=xp.prototype.clear;var $p=Object.freeze([]);function jp(t){Gh.call(this),this.ue="parent",this.on=!1,this.Ij="parentLinkCategory",void 0!==t&&(this.nodeDataArray=t)}function Lp(){rh.call(this),this.Vw=this.Cn=this.$b=0,this.Br=360,this.Uw=Wp,this.qj=0,this.Mw=new pt,this.mr=this.Td=0,this.$s=new cf,this.eu=this.Hj=0,this.By=600,this.hp=NaN,this.Ym=1,this.Mp=0,this.Sl=360,this.Bb=Wp,this.J=Kp,this.Qc=af,this.Kc=gh,this.ef=6,this.Ro=rf}function Ep(t,e,i,n,o){var a=t.Br,r=t.$b;t=t.Td,n=n*Math.PI/180,i=i*Math.PI/180;for(var s=e.length,c=0;c<s;c++){var l=n+(o===Kp?c*i/(360<=a?s:s-1):-c*i/s),u=e.L(c),d=r*Math.tan(l)/t;d=Math.sqrt((r*r+t*t*d*d)/(1+d*d)),u.centerX=d*Math.cos(l),u.centerY=d*Math.sin(l),u.actualAngle=180*l/Math.PI}}function Np(t,e,i,n){var o=t.$b,a=t.Td,r=t.qj;i=i*Math.PI/180;for(var s=e.length,c=0;c<s;c++){var l=e.L(c),u=e.L(c===s-1?0:c+1),d=a*Math.sin(i);l.centerX=o*Math.cos(i),l.centerY=d,l.actualAngle=180*i/Math.PI,isNaN(l.diameter)&&df(l,0),isNaN(u.diameter)&&df(u,0),l=Hp(t,o,a,n===Kp?i:-i,(l.diameter+u.diameter)/2+r),i+=n===Kp?l:-l}}function Ap(t,e,i,n){var o=t.$b,a=t.Td,r=t.mr;i=i*Math.PI/180;for(var s=e.length,c=0;c<s;c++){var l=e.L(c);l.centerX=o*Math.cos(i),l.centerY=a*Math.sin(i),l.actualAngle=180*i/Math.PI,l=Hp(t,o,a,n===Kp?i:-i,r),i+=n===Kp?l:-l}}function Vp(t,e,i,n,o){var a=t.Br;if(t.Hj=0,t.$s=new cf,360>i){for(a=n+(o===Kp?a:-a);0>a;)a+=360;180<(a%=360)&&(a-=360),a*=Math.PI/180,t.eu=a,Fp(t,e,i,n,o)}else zp(t,e,i,n,o);t.$s.commit(e)}function zp(t,e,i,n,o){var a=t.$b,r=t.qj,s=t.Cn,c=a*Math.cos(n*Math.PI/180),l=t.Td*Math.sin(n*Math.PI/180),u=e.na();if(3===u.length)u[0].centerX=a,u[0].centerY=0,u[1].centerX=u[0].centerX-u[0].width/2-u[1].width/2-r,u[1].y=u[0].y,u[2].centerX=(u[0].centerX+u[1].centerX)/2,u[2].y=u[0].y-u[2].height-r;else if(4===u.length)u[0].centerX=a,u[0].centerY=0,u[2].centerX=-u[0].centerX,u[2].centerY=u[0].centerY,u[1].centerX=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-r,u[3].centerX=0,u[3].y=Math.max(u[0].y+u[0].height+r,u[2].y+u[2].height+r);else{a=pt.alloc();for(var d=0;d<u.length&&(u[d].centerX=c,u[d].centerY=l,!(d>=u.length-1));d++)Bp(t,c,l,u,d,o,a)||Rp(t,c,l,u,d,o,a),c=a.x,l=a.y;if(pt.free(a),t.Hj++,!(23<t.Hj)){c=u[0].centerX,l=u[0].centerY,a=u[u.length-1].centerX,d=u[u.length-1].centerY;var h=Math.abs(c-a)-((u[0].width+u[u.length-1].width)/2+r),p=Math.abs(l-d)-((u[0].height+u[u.length-1].height)/2+r);r=0,1>Math.abs(p)?Math.abs(c-a)<(u[0].width+u[u.length-1].width)/2&&(r=0):r=0<p?p:1>Math.abs(h)?0:h,c=Math.abs(a)>Math.abs(d)?0<a!=l>d:0<d!=c<a,(c=o===Kp?c:!c)&&(r=-Math.abs(r),r=Math.min(r,-u[u.length-1].width),r=Math.min(r,-u[u.length-1].height)),t.$s.compare(r,u),1<Math.abs(r)&&(t.$b=8>t.Hj?t.$b-r/(2*Math.PI):5>u.length&&10<r?t.$b/2:t.$b-(0<r?1.7:-2.3),t.Td=t.$b*s,zp(t,e,i,n,o))}}}function Fp(t,e,i,n,o){for(var a=t.$b,r=t.Td,s=t.Cn,c=a*Math.cos(n*Math.PI/180),l=r*Math.sin(n*Math.PI/180),u=pt.alloc(),d=e.na(),h=0;h<d.length&&(d[h].centerX=c,d[h].centerY=l,!(h>=d.length-1));h++)Bp(t,c,l,d,h,o,u)||Rp(t,c,l,d,h,o,u),c=u.x,l=u.y;if(pt.free(u),t.Hj++,!(23<t.Hj)){if(c=Math.atan2(l,c),c=o===Kp?t.eu-c:c-t.eu,a=(c=Math.abs(c)<Math.abs(c-2*Math.PI)?c:c-2*Math.PI)*(a+r)/2,r=t.$s,Math.abs(a)<Math.abs(r.jm))for(r.jm=a,r.Ak=[],r.Lm=[],c=0;c<d.length;c++)r.Ak[c]=d[c].bounds.x,r.Lm[c]=d[c].bounds.y;1<Math.abs(a)&&(t.$b=8>t.Hj?t.$b-a/(2*Math.PI):t.$b-(0<a?1.7:-2.3),t.Td=t.$b*s,Fp(t,e,i,n,o))}}function Bp(t,e,i,n,o,a,r){var s=t.$b,c=t.Td,l=0;t=(n[o].width+n[o+1].width)/2+t.qj;var u=!1;if(0<=i!=(a===Kp)){if((a=e+t)>s){if((a=e-t)<-s)return r.x=a,r.y=l,!1;u=!0}}else if((a=e-t)<-s){if((a=e+t)>s)return r.x=a,r.y=l,!1;u=!0}return l=Math.sqrt(1-Math.min(1,a*a/(s*s)))*c,0>i!==u&&(l=-l),Math.abs(i-l)>(n[o].height+n[o+1].height)/2?(r.x=a,r.y=l,!1):(r.x=a,r.y=l,!0)}function Rp(t,e,i,n,o,a,r){var s=t.$b,c=t.Td,l=0;if(t=(n[o].height+n[o+1].height)/2+t.qj,n=!1,0<=e!=(a===Kp)){if((a=i-t)<-c){if((a=i+t)>c)return r.x=l,void(r.y=a);n=!0}}else if((a=i+t)>c){if((a=i-t)<-c)return r.x=l,void(r.y=a);n=!0}l=Math.sqrt(1-Math.min(1,a*a/(c*c)))*s,0>e!==n&&(l=-l),r.x=l,r.y=a}function Up(t,e,i,n,o){var a=t.By;if(.001>Math.abs(t.Cn-1))return void 0!==n&&void 0!==o?o*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var r=0,s=void 0!==n&&void 0!==o?o/(a+1):Math.PI/(2*(a+1)),c=0,l=0;l<=a;l++){c=void 0!==n&&void 0!==o?n+l*o/a:l*Math.PI/(2*a);var u=Math.sin(c);r+=Math.sqrt(1-t*t*u*u)*s}return void 0!==n&&void 0!==o?(e>i?e:i)*r:4*(e>i?e:i)*r}function Gp(t,e,i,n,o){return e/(void 0!==n&&void 0!==o?Up(t,1,i,n,o):Up(t,1,i))}function Hp(t,e,i,n,o){if(.001>Math.abs(t.Cn-1))return o/e;var a=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,r=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var s=0;;s++){var c=Math.sin(n+s*t);if((r+=(e>i?e:i)*Math.sqrt(1-a*a*c*c)*t)>=o)return s*t}}xp.className="GraphLinksModel",bp.GraphLinksModel=xp,Gh.constructGraphLinksModel=Gh.constructGraphLinksModel=function(){return new xp},Gh.initDiagramModel=hp=function(){return new xp},d(jp,Gh),jp.constructGraphLinksModel=Gh.constructGraphLinksModel,jp.prototype.cloneProtected=function(t){Gh.prototype.cloneProtected.call(this,t),t.ue=this.ue,t.on=this.on,t.Ij=this.Ij},(i=jp.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Nq();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var o=t[n];e+=" "+this.ja(o)+":"+$(o)}}return e},i.zk=function(){var t=Gh.prototype.zk.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},i.Fq=function(t){Gh.prototype.Fq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},i.Sq=function(t){return Yh(this,t,"nodeParentKeyProperty"),Gh.prototype.Sq.call(this,t)},i.Eq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&_("applyIncrementalJson cannot change Model properties"),Gh.prototype.Eq.call(this,t)},i.qm=function(t){return t},i.$i=function(t){if(null!==t){var e=this.ue;if(""!==e&&void 0!==(e=gp(t,e))){if(ap(e))return e;_("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},i.He=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.ue;if(""!==i)if(e=this.qm(e),this.sb(t)){var n=gp(t,i);n!==e&&(lp(this,n,t),mp(t,i,e),null===this.Jb(e)&&cp(this,e,t),op(this,"nodeParentKey",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i))}else mp(t,i,e)}},i.Bv=function(t){if(null===t)return"";var e=this.Ij;return""===e||void 0===(e=gp(t,e))?"":"string"==typeof e?e:(_("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},jp.prototype.getLinkCategoryForData=function(t){return this.Bv(t)},jp.prototype.iw=function(t,e){if(null!==t){var i=this.Ij;if(""!==i)if(this.sb(t)){var n=gp(t,i);void 0===n&&(n=""),n!==e&&(mp(t,i,e),op(this,"parentLinkCategory",xi,i,t,n,e),"string"==typeof i&&this.Ba(t,i))}else mp(t,i,e)}},jp.prototype.setLinkCategoryForData=function(t,e){this.iw(t,e)},jp.prototype.copyNodeData=function(t){return null===t?null:(t=Gh.prototype.copyNodeData.call(this,t),this.bk||""===this.ue||void 0===gp(t,this.ue)||mp(t,this.ue,void 0),t)},jp.prototype.setDataProperty=function(t,e,i){if(this.sb(t))if(e===this.nodeKeyProperty)this.Gm(t,i);else{if(e===this.nodeCategoryProperty)return void this.Kq(t,i);if(e===this.nodeParentKeyProperty)return void this.He(t,i)}var n=gp(t,e);n!==i&&(mp(t,e,i),this.Ht(t,e,n,i))},(i=jp.prototype).Iq=function(t,e){Gh.prototype.Iq.call(this,t,e);for(var i=this.bb.iterator;i.next();)this.cw(i.value,t,e)},i.cw=function(t,e,i){if(this.$i(t)===e){var n=this.ue;mp(t,n,i),op(this,"nodeParentKey",xi,n,t,e,i),"string"==typeof n&&this.Ba(t,n)}},i.Cm=function(t){Gh.prototype.Cm.call(this,t);var e=up(this,t=this.ja(t));if(null!==e){var i=P();for(e=e.iterator;e.next();){var n=e.value;if(this.sb(n)&&this.$i(n)===t){var o=this.ue;op(this,"nodeParentKey",xi,o,n,t,t),"string"==typeof o&&this.Ba(n,o),i.push(n)}}for(e=0;e<i.length;e++)lp(this,t,i[e]);M(i)}},i.Bm=function(t){Gh.prototype.Bm.call(this,t);var e=this.$i(t);e=this.qm(e),null===this.Jb(e)&&cp(this,e,t)},i.Pq=function(t){Gh.prototype.Pq.call(this,t),lp(this,this.$i(t),t)},i.pm=function(){return!0},i.xt=function(){return!0},h.Object.defineProperties(jp.prototype,{nodeParentKeyProperty:{get:function(){return this.ue},set:function(t){var e=this.ue;e!==t&&(this.ue=t,this.g("nodeParentKeyProperty",e,t))}},bk:{get:function(){return this.on},set:function(t){this.on!==t&&(this.on=t)}},parentLinkCategoryProperty:{get:function(){return this.Ij},set:function(t){var e=this.Ij;e!==t&&(this.Ij=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}}}),h.Object.defineProperties(jp,{type:{get:function(){return"TreeModel"}}}),jp.prototype.setParentLinkCategoryForNodeData=jp.prototype.iw,jp.prototype.getParentLinkCategoryForNodeData=jp.prototype.Bv,jp.prototype.setParentKeyForNodeData=jp.prototype.He,jp.prototype.getParentKeyForNodeData=jp.prototype.$i,jp.className="TreeModel",bp.TreeModel=jp,d(Lp,rh),Lp.prototype.cloneProtected=function(t){rh.prototype.cloneProtected.call(this,t),t.hp=this.hp,t.Ym=this.Ym,t.Mp=this.Mp,t.Sl=this.Sl,t.Bb=this.Bb,t.J=this.J,t.Qc=this.Qc,t.Kc=this.Kc,t.ef=this.ef,t.Ro=this.Ro},Lp.prototype.eb=function(t){t.classType===Lp?t===nf||t===of||t===tf||t===ef||t===af?this.sorting=t:t===Jp||t===Qp||t===Kp||t===Zp?this.direction=t:t===Xp||t===qp||t===Wp||t===Yp?this.arrangement=t:t!==sf&&t!==rf||(this.nodeDiameterFormula=t):rh.prototype.eb.call(this,t)},Lp.prototype.createNetwork=function(){return new lf(this)},Lp.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var i,n,o=new tt,a=this.sort(e),r=this.mr,s=this.arrangement,c=this.nodeDiameterFormula,l=this.radius;(!isFinite(l)||0>=l)&&(l=NaN);var u=this.aspectRatio;(!isFinite(u)||0>=u)&&(u=1);var d=this.startAngle;isFinite(d)||(d=0);var h=this.sweepAngle;if((!isFinite(h)||360<h||1>h)&&(h=360),e=this.spacing,isFinite(e)||(e=NaN),s===Yp&&c===sf?s=Wp:s===Yp&&c!==sf&&(s=this.arrangement),(this.direction===Jp||this.direction===Qp)&&this.sorting!==af){for(c=0;!(c>=a.length||(t.add(a.L(c)),c+1>=a.length));c+=2)o.add(a.L(c+1));this.direction===Jp?(this.arrangement===Yp&&t.reverse(),(a=new tt).addAll(t),a.addAll(o)):(this.arrangement===Yp&&o.reverse(),(a=new tt).addAll(o),a.addAll(t))}c=a.length;for(var p=n=i=0;p<a.length;p++){var f=d+h*n*(this.direction===Kp?1:-1)/c,g=a.L(p).diameter;isNaN(g)&&(g=df(a.L(p),f)),360>h&&(0===p||p===a.length-1)&&(g/=2),i+=g,n++}if(isNaN(l)||s===Yp){if(isNaN(e)&&(e=6),s!==Wp&&s!==Yp){for(n=-1/0,r=0;r<c;r++)p=a.L(r),i=a.L(r===c-1?0:r+1),isNaN(p.diameter)&&df(p,0),isNaN(i.diameter)&&df(i,0),n=Math.max(n,(p.diameter+i.diameter)/2);r=n+e,l=s===Xp?(n+e)/(2*Math.PI/c):Gp(this,r*(360<=h?c:c-1),u,d*Math.PI/180,h*Math.PI/180)}else l=Gp(this,i+(360<=h?c:c-1)*(s!==Yp?e:1.6*e),u,d*Math.PI/180,h*Math.PI/180);n=l*u}else if(p=Up(this,l,n=l*u,d*Math.PI/180,h*Math.PI/180),isNaN(e))s!==Wp&&s!==Yp||(e=(p-i)/(360<=h?c:c-1));else if(s===Wp||s===Yp)(p=(p-i)/(360<=h?c:c-1))<e?n=(l=Gp(this,i+e*(360<=h?c:c-1),u,d*Math.PI/180,h*Math.PI/180))*u:e=p;else{for(r=-1/0,i=0;i<c;i++)f=a.L(i),g=a.L(i===c-1?0:i+1),isNaN(f.diameter)&&df(f,0),isNaN(g.diameter)&&df(g,0),r=Math.max(r,(f.diameter+g.diameter)/2);(i=Gp(this,(r+=e)*(360<=h?c:c-1),u,d*Math.PI/180,h*Math.PI/180))>l?n=(l=i)*u:r=p/(360<=h?c:c-1)}if(this.Uw=s,this.$b=l,this.Cn=u,this.Vw=d,this.Br=h,this.qj=e,this.Td=n,this.mr=r,e=a,a=this.Uw,s=this.$b,l=this.Vw,u=this.Br,d=this.qj,h=this.Td,c=this.mr,this.direction!==Jp&&this.direction!==Qp||a!==Yp)if(this.direction===Jp||this.direction===Qp){switch(r=0,a){case qp:r=180*Hp(this,s,h,l,c)/Math.PI;break;case Wp:c=e=0,null!==(r=t.first())&&(e=df(r,Math.PI/2)),null!==(r=o.first())&&(c=df(r,Math.PI/2)),r=180*Hp(this,s,h,l,d+(e+c)/2)/Math.PI;break;case Xp:r=u/e.length}if(this.direction===Jp){switch(a){case qp:Ap(this,t,l,Zp);break;case Wp:Np(this,t,l,Zp);break;case Xp:Ep(this,t,u/2,l,Zp)}switch(a){case qp:Ap(this,o,l+r,Kp);break;case Wp:Np(this,o,l+r,Kp);break;case Xp:Ep(this,o,u/2,l+r,Kp)}}else{switch(a){case qp:Ap(this,o,l,Zp);break;case Wp:Np(this,o,l,Zp);break;case Xp:Ep(this,o,u/2,l,Zp)}switch(a){case qp:Ap(this,t,l+r,Kp);break;case Wp:Np(this,t,l+r,Kp);break;case Xp:Ep(this,t,u/2,l+r,Kp)}}}else switch(a){case qp:Ap(this,e,l,this.direction);break;case Wp:Np(this,e,l,this.direction);break;case Xp:Ep(this,e,u,l,this.direction);break;case Yp:Vp(this,e,u,l,this.direction)}else Vp(this,e,u,l-u/2,Kp)}this.updateParts(),this.network=null,this.isValidLayout=!0},Lp.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Lp.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new pt(0,0):(i.x=this.arrangementOrigin.x+this.$b,i.y=this.arrangementOrigin.y+this.Td);for(var n=this.network.vertexes.iterator;n.next();){var o=n.value;o.x+=i.x,o.y+=i.y,o.commit()}t&&(this.group.zb(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.ae(i.ae(t)),this.group.move(e),this.Mw=e.ae(t))},Lp.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Lp.prototype.sort=function(t){switch(this.sorting){case tf:break;case ef:t.reverse();break;case nf:t.sort(this.comparer);break;case of:t.sort(this.comparer),t.reverse();break;case af:for(var e=[],i=0;i<t.length;i++)e.push(0);i=new tt;for(var n=0;n<t.length;n++){var o=-1,a=-1;if(0===n)for(var r=0;r<t.length;r++){var s=t.L(r).edgesCount;s>o&&(o=s,a=r)}else for(r=0;r<t.length;r++)(s=e[r])>o&&(o=s,a=r);for(i.add(t.L(a)),e[a]=-1,r=(a=t.L(a)).sourceEdges;r.next();)0>(o=t.indexOf(r.value.fromVertex))||0<=e[o]&&e[o]++;for(a=a.destinationEdges;a.next();)0>(o=t.indexOf(a.value.toVertex))||0<=e[o]&&e[o]++}for(t=[],e=0;e<i.length;e++){for(o=i.L(e),t[e]=[],a=o.destinationEdges;a.next();)(n=i.indexOf(a.value.toVertex))!==e&&0>t[e].indexOf(n)&&t[e].push(n);for(o=o.sourceEdges;o.next();)(n=i.indexOf(o.value.fromVertex))!==e&&0>t[e].indexOf(n)&&t[e].push(n)}for(a=[],e=0;e<t.length;e++)a[e]=0;e=[],r=[],s=[],o=[],n=new tt;for(var c=0,l=0;l<t.length;l++){var u=t[l].length;if(1===u)o.push(l);else if(0===u)n.add(i.L(l));else{if(0===c)e.push(l);else{for(var d=u=1/0,h=-1,p=[],f=0;f<e.length;f++)0>t[e[f]].indexOf(e[f===e.length-1?0:f+1])&&p.push(f===e.length-1?0:f+1);if(0===p.length)for(f=0;f<e.length;f++)p.push(f);for(f=0;f<p.length;f++){for(var g=p[f],m=t[l],v=0,b=0;b<r.length;b++){var w=a[r[b]],y=a[s[b]];if(w<y){var k=w;w=y}else k=y;if(k<g&&g<=w)for(y=0;y<m.length;y++){var x=m[y];0>e.indexOf(x)||k<a[x]&&a[x]<w||k===a[x]||w===a[x]||v++}else for(y=0;y<m.length;y++)0>e.indexOf(x=m[y])||k<a[x]&&a[x]<w&&k!==a[x]&&w!==a[x]&&v++}for(m=v,b=v=0;b<t[l].length;b++)0<=(k=e.indexOf(t[l][b]))&&(v+=(k=Math.abs(g-(k>=g?k+1:k)))<e.length+1-k?k:e.length+1-k);for(b=0;b<r.length;b++)(k=a[r[b]])>=g&&k++,(w=a[s[b]])>=g&&w++,k>w&&(y=w,w=k,k=y),w-k<(e.length+2)/2==(k<g&&g<=w)&&v++;(m<u||m===u&&v<d)&&(u=m,d=v,h=g)}for(e.splice(h,0,l),u=0;u<e.length;u++)a[e[u]]=u;for(u=0;u<t[l].length;u++)0<=e.indexOf(d=t[l][u])&&(r.push(l),s.push(d))}c++}}for(r=e.length;;){for(a=!0,s=0;s<o.length;s++)if(0<=(u=e.indexOf(l=t[c=o[s]][0]))){for(h=d=0;h<t[l].length;h++)0>(p=e.indexOf(t[l][h]))||p===u||(d+=p<u!=(f=p>u?p-u:u-p)>r-f?1:-1);e.splice(0>d?u:u+1,0,c),o.splice(s,1),s--}else a=!1;if(a)break;e.push(o[0]),o.splice(0,1)}for(t=0;t<e.length;t++)n.add(i.L(e[t]));return n;default:_("Invalid sorting type.")}return t},h.Object.defineProperties(Lp.prototype,{radius:{get:function(){return this.hp},set:function(t){this.hp!==t&&(0<t||isNaN(t))&&(this.hp=t,this.C())}},aspectRatio:{get:function(){return this.Ym},set:function(t){this.Ym!==t&&0<t&&(this.Ym=t,this.C())}},startAngle:{get:function(){return this.Mp},set:function(t){this.Mp!==t&&(this.Mp=t,this.C())}},sweepAngle:{get:function(){return this.Sl},set:function(t){this.Sl!==t&&(this.Sl=0<t&&360>=t?t:360,this.C())}},arrangement:{get:function(){return this.Bb},set:function(t){this.Bb===t||t!==Yp&&t!==Wp&&t!==qp&&t!==Xp||(this.Bb=t,this.C())}},direction:{get:function(){return this.J},set:function(t){this.J===t||t!==Kp&&t!==Zp&&t!==Jp&&t!==Qp||(this.J=t,this.C())}},sorting:{get:function(){return this.Qc},set:function(t){this.Qc===t||t!==tf&&t!==ef&&t!==nf&&!of&&t!==af||(this.Qc=t,this.C())}},comparer:{get:function(){return this.Kc},set:function(t){this.Kc!==t&&(this.Kc=t,this.C())}},spacing:{get:function(){return this.ef},set:function(t){this.ef!==t&&(this.ef=t,this.C())}},nodeDiameterFormula:{get:function(){return this.Ro},set:function(t){this.Ro===t||t!==rf&&t!==sf||(this.Ro=t,this.C())}},actualXRadius:{get:function(){return this.$b}},actualYRadius:{get:function(){return this.Td}},actualSpacing:{get:function(){return this.qj}},actualCenter:{get:function(){return this.Mw}}});var Wp=new W(Lp,"ConstantSpacing",0),qp=new W(Lp,"ConstantDistance",1),Xp=new W(Lp,"ConstantAngle",2),Yp=new W(Lp,"Packed",3),Kp=new W(Lp,"Clockwise",4),Zp=new W(Lp,"Counterclockwise",5),Jp=new W(Lp,"BidirectionalLeft",6),Qp=new W(Lp,"BidirectionalRight",7),tf=new W(Lp,"Forwards",8),ef=new W(Lp,"Reverse",9),nf=new W(Lp,"Ascending",10),of=new W(Lp,"Descending",11),af=new W(Lp,"Optimized",12),rf=new W(Lp,"Pythagorean",13),sf=new W(Lp,"Circular",14);function cf(){this.jm=-1/0,this.Lm=this.Ak=null}function lf(t){lh.call(this,t)}function uf(t){fh.call(this,t),this.I=this.oj=NaN}function df(t,e){var i=t.network;if(null===i)return NaN;if(null===(i=i.layout))return NaN;if(i.arrangement===Yp)if(i.nodeDiameterFormula===sf)t.oj=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===i)return t.width;if(0===e)return t.height;t.oj=Math.min(t.height/i,t.width/e)}else t.oj=i.nodeDiameterFormula===sf?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.oj}function hf(t){mh.call(this,t)}function pf(){rh.call(this),this.yh=null,this.ko=0,this.Bd=new Lt(100,100).freeze(),this.Xm=!1,this.cf=!0,this.Zc=!1,this.xl=100,this.Fn=1,this.Tf=1e3,this.Io=10,this.ip=Math,this.Uk=.05,this.Tk=50,this.Rk=150,this.Sk=0,this.wn=10,this.vn=5}function ff(t,e,i){if(function(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.yh=t.network.vertexes.na(),(t=t.yh).sort(function(t,e){return null===t||null===e||t===e?0:e.yd-t.yd}),e=t.length-1;0<=e&&1>=t[e].yd;)e--;return 1<t.length-e}(t,e)){var n=t.Tf;t.Tf*=1+1/(e+1);var o=function(t,e){for(var i=t.network,n=new yf(t),o=0;o<t.yh.length;o++){var a=t.yh[o];if(!(1<a.yd))break;n.Bh(a);var r=new wf;r.Ut=a.yd,r.Vt=a.width,r.Tt=a.height,r.Cw=a.focus.x,r.Dw=a.focus.y,null===a.Ge&&(a.Ge=new tt),a.Ge.add(r),a.fw=a.Ge.count-1}for(a=i.edges.iterator;a.next();){var s=a.value;r=s.toVertex,(o=s.fromVertex).network===n&&r.network===n?n.cq(s):o.network===n?(null===(s=o.$j)&&(s=new tt,o.$j=s),s.add(r),o.yd--,o.Jh+=r.Jh):r.network===n&&(null===(s=r.$j)&&(s=new tt,r.$j=s),s.add(o),r.yd--,r.Jh+=o.Jh)}for(o=n.edges.iterator;o.next();)(a=o.value).length*=Math.max(1,qe.sqrt((a.fromVertex.Jh+a.toVertex.Jh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){var c=(o=e.value).$j;if(null!==c&&0<c.count&&!(0>=(r=o.Ge.L(o.Ge.count-1).Ut-o.yd))){for(var l=s=0,u=c.count-r;u<c.count;u++){var d=c.L(u),h=null;for(a=d.edges.iterator;a.next();){var p=a.value;if(p.Sx(d)===o){h=p;break}}null!==h&&(l+=h.length,s+=d.width*d.height)}a=o.centerX,c=o.centerY,h=o.focus,1>(p=(u=o.width)*(d=o.height))&&(p=1),s=qe.sqrt((s+p+l*l*4/(r*r))/p),o.bounds=new Vt(a-h.x-(r=(s-1)*u/2),c-h.y-(s=(s-1)*d/2),u+2*r,d+2*s),o.focus=new pt(h.x+r,h.y+s)}}return t.network=n,i}(t,e),a=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=a,ff(t,e+1,i),bf(t,a),function(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,null!==n.Ge){var o=n.Ge.L(n.fw);n.yd=o.Ut;var a=o.Cw,r=o.Dw;n.bounds=new Vt(n.centerX-a,n.centerY-r,o.Vt,o.Tt),n.focus=new pt(a,r),n.fw--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}(t,o),(e=o.vertexes.na()).sort(function(t,e){return null===t||null===e||t===e?0:e.yd-t.yd}),i=0;i<e.length;i++)gf(t,e[i]);t.Tf=n}}function gf(t,e){var i=e.$j;if(null!==i&&0!==i.count){var n=e.centerX,o=e.centerY,a=e.width,r=e.height;null!==e.Ge&&0<e.Ge.count&&(a=(r=e.Ge.L(0)).Vt,r=r.Tt),a=qe.sqrt(a*a+r*r)/2;for(var s=!1,c=r=0,l=0,u=e.vertexes.iterator;u.next();){var d=u.value;1>=d.yd?c++:(s=!0,l++,r+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(0!==c)for(0<l&&(r/=l),l=e=0,e=s?2*Math.PI/(c+1):2*Math.PI/c,0==c%2&&(l=e/2),1<i.count&&i.sort(function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height}),s=0==c%2?0:1,i=i.iterator;i.next();)if(!(1<(c=i.value).yd||t.isFixed(c))){for(u=null,d=c.edges.iterator;d.next();){u=d.value;break}var h=c.height;d=qe.sqrt((d=c.width)*d+h*h)/2,u=a+u.length+d,d=r+(e*(s/2>>1)+l)*(0==s%2?1:-1),c.centerX=n+u*Math.cos(d),c.centerY=o+u*Math.sin(d),s++}}}function mf(t,e,i,n,o,a,r){var s=9e19,c=-1,l=0;t:for(;l<e;l++){var u=t[l],d=u.x-i,h=u.y-n;if((d=d*d+h*h)<s){for(h=l-1;0<=h;h--)if(t[h].y>u.y&&t[h].x-u.x<o+r.width)continue t;for(h=l+1;h<e;h++)if(t[h].x>u.x&&t[h].y-u.y<a+r.height)continue t;c=l,s=d}}return c}function vf(t,e){var i=t.bounds,n=i.x;t=i.y;var o=i.width;i=i.height;var a=e.bounds,r=a.x;e=a.y;var s=a.width;return a=a.height,n+o<r?t>e+a?qe.sqrt((i=n+o-r)*i+(t=t-e-a)*t):t+i<e?qe.sqrt((n=n+o-r)*n+(t=t+i-e)*t):r-(n+o):n>r+s?t>e+a?qe.sqrt((i=n-r-s)*i+(t=t-e-a)*t):t+i<e?qe.sqrt((n=n-r-s)*n+(t=t+i-e)*t):n-(r+s):t>e+a?t-(e+a):t+i<e?e-(t+i):.1}function bf(t,e){for(t.yh=null,e=t.ko+e;t.ko<e&&(t.ko++,_f(t)););t.yh=null}function _f(t){null===t.yh&&(t.yh=t.network.vertexes.na());var e=t.yh;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,o=n,a=i=i.centerY,r=1;r<e.length;r++){var s=e[r];s.forceX=0,s.forceY=0;var c=s.centerX;s=s.centerY,n=Math.min(n,c),o=Math.max(o,c),i=Math.min(i,s),a=Math.max(a,s)}(o=o-n>a-i)?e.sort(function(t,e){return null===t||null===e||t===e?0:t.centerX-e.centerX}):e.sort(function(t,e){return null===t||null===e||t===e?0:t.centerY-e.centerY}),i=t.Tf;var l=n=s=0;for(a=0;a<e.length;a++){var u=(n=(r=e[a]).bounds).y+(s=r.focus).y;n=r.charge*t.electricalFieldX(c=n.x+s.x,u),l=r.charge*t.electricalFieldY(c,u),n+=r.mass*t.gravitationalFieldX(c,u),l+=r.mass*t.gravitationalFieldY(c,u),r.forceX+=n,r.forceY+=l;for(var d=a+1;d<e.length;d++){var h=e[d];if(h!==r){var p=(n=h.bounds).y+(s=h.focus).y;if(c-(l=n.x+s.x)>i||l-c>i){if(o)break}else if(u-p>i||p-u>i){if(!o)break}else{var f=vf(r,h);1>f?(null===(n=t.randomNumberGenerator)&&(t.randomNumberGenerator=n=new Sf),f=n.random(),s=n.random(),n=c>l?(1+(n=Math.abs(h.bounds.right-r.bounds.x)))*f:c<l?-(1+(n=Math.abs(h.bounds.x-r.bounds.right)))*f:(1+(n=Math.max(h.width,r.width)))*f-n/2,l=u>p?(1+(l=Math.abs(h.bounds.bottom-r.bounds.y)))*s:c<l?-(1+(l=Math.abs(h.bounds.y-r.bounds.bottom)))*s:(1+(l=Math.max(h.height,r.height)))*s-l/2):(n=(l-c)/f*(s=-r.charge*h.charge/(f*f)),l=(p-u)/f*s),r.forceX+=n,r.forceY+=l,h.forceX-=n,h.forceY-=l}}}}for(o=t.network.edges.iterator;o.next();)n=(r=(i=(s=o.value).fromVertex).bounds).x+(c=i.focus).x,r=r.y+c.y,c=(u=(a=s.toVertex).bounds).x+(d=a.focus).x,u=u.y+d.y,1>(d=vf(i,a))?(null===(d=t.randomNumberGenerator)&&(t.randomNumberGenerator=d=new Sf),s=d.random(),d=d.random(),n=(n>c?1:-1)*(1+(a.width>i.width?a.width:i.width))*s,l=(r>u?1:-1)*(1+(a.height>i.height?a.height:i.height))*d):(n=(c-n)/d*(s=s.stiffness*(d-s.length)),l=(u-r)/d*s),i.forceX+=n,i.forceY+=l,a.forceX-=n,a.forceY-=l;for(n=0,o=t.moveLimit,i=0;i<e.length;i++)t.isFixed(a=e[i])?t.moveFixedVertex(a):((r=a.forceX)<-o?r=-o:r>o&&(r=o),(c=a.forceY)<-o?c=-o:c>o&&(c=o),a.centerX+=r,a.centerY+=c,n=Math.max(n,r*r+c*c));return n>t.epsilonDistance*t.epsilonDistance}function wf(){this.Dw=this.Cw=this.Tt=this.Vt=this.Ut=0}function yf(t){lh.call(this,t)}function kf(t){fh.call(this,t),this.Ia=!1,this.$a=this.I=NaN,this.Jh=this.yd=this.Ha=this.W=0,this.Ge=this.$j=null,this.fw=0}function xf(t){mh.call(this,t),this.l=this.u=NaN}function Sf(){var t=0;void 0===t&&(t=42),this.seed=t,this.uy=48271,this.wy=2147483647,this.Q=44488.07041494893,this.yy=3399,this.vy=1/2147483647,this.random()}function Tf(){rh.call(this),this.Zb=this.oe=25,this.J=0,this.Pk=og,this.sl=sg,this.hl=ug,this.zj=4,this.Ek=fg,this.jg=7,this.cf=!0,this.so=4,this.Da=this.$r=this.xa=-1,this.sd=this.Do=0,this.Ga=this.qd=this.rd=this.Md=this.gc=null,this.No=0,this.Mo=this.Ej=null,this.Qd=0,this.Oo=null,this.Gf=new pt,this.re=[],this.re.length=100}function Cf(t){var e=t.fromVertex.node;return t=t.toVertex.node,null===e&&null===t?8:null===e||null===t?4:1}function Df(t){null===t.Ej&&(t.Ej=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.Ej[e]=n.layer,e++,t.Ej[e]=n.column,e++,t.Ej[e]=n.index,e++}return t.Ej}function If(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function Pf(t,e,i){var n=ig(t,e),o=t.gc[e];(null===t.Mo||t.Mo.length<o*o)&&(t.Mo=[]);for(var a=t.Mo,r=0;r<o;r++){var s,c=0,l=n[r],u=l.near;if(null!==u&&u.layer===l.layer)if((l=u.index)>r)for(var d=r+1;d<l;d++){var h=n[d];h.near===u&&h.Wj===u.Wj||c++}else for(d=r-1;d>l;d--)(h=n[d]).near===u&&h.Wj===u.Wj||c++;if(0<=i)for(l=n[r].sourceEdgesArrayAccess,u=0;u<l.length;u++){var p=l[u];if(p.valid&&p.fromVertex.layer!==e)for(h=p.fromVertex.index,d=p.portToPos,p=p.portFromPos,s=u+1;s<l.length;s++){var f=l[s];if(f.valid&&f.fromVertex.layer!==e){var g=f.fromVertex.index,m=f.portToPos;f=f.portFromPos,d<m&&(h>g||h===g&&p>f)&&c++,m<d&&(g>h||g===h&&f>p)&&c++}}}if(0>=i)for(l=n[r].destinationEdgesArrayAccess,u=0;u<l.length;u++)if((p=l[u]).valid&&p.toVertex.layer!==e)for(h=p.toVertex.index,d=p.portToPos,p=p.portFromPos,s=u+1;s<l.length;s++)(f=l[s]).valid&&f.toVertex.layer!==e&&(g=f.toVertex.index,m=f.portToPos,p<(f=f.portFromPos)&&(h>g||h===g&&d>m)&&c++,f<p&&(g>h||g===h&&m>d)&&c++);for(a[r*o+r]=c,l=r+1;l<o;l++){var v=0,b=0;if(0<=i){c=n[r].sourceEdgesArrayAccess;var _=n[l].sourceEdgesArrayAccess;for(u=0;u<c.length;u++)if((p=c[u]).valid&&p.fromVertex.layer!==e)for(h=p.fromVertex.index,p=p.portFromPos,s=0;s<_.length;s++)(f=_[s]).valid&&f.fromVertex.layer!==e&&(g=f.fromVertex.index,f=f.portFromPos,(h<g||h===g&&p<f)&&b++,(g<h||g===h&&f<p)&&v++)}if(0>=i)for(c=n[r].destinationEdgesArrayAccess,_=n[l].destinationEdgesArrayAccess,u=0;u<c.length;u++)if((p=c[u]).valid&&p.toVertex.layer!==e)for(h=p.toVertex.index,d=p.portToPos,s=0;s<_.length;s++)(f=_[s]).valid&&f.toVertex.layer!==e&&(m=f.portToPos,(h<(g=f.toVertex.index)||h===g&&d<m)&&b++,(g<h||g===h&&m<d)&&v++);a[r*o+l]=v,a[l*o+r]=b}}return ng(t,e,n),a}function Mf(t){for(var e=0,i=0;i<=t.xa;i++){for(var n=t,o=i,a=ig(n,o),r=n.gc[o],s=0,c=0;c<r;c++){var l=a[c].destinationEdgesArrayAccess;if(null!==l)for(var u=0;u<l.length;u++){var d=l[u];d.valid&&d.toVertex.layer!==o&&(s+=(Math.abs(d.fromVertex.column+d.portFromColOffset-(d.toVertex.column+d.portToColOffset))+1)*Cf(d))}}ng(n,o,a),e+=s}return e}function Of(t,e,i){for(var n=ig(t,e),o=t.gc[e],a=[],r=0;r<o;r++){var s=n[r],c=null;0>=i&&(c=s.sourceEdgesArrayAccess);var l=null;0<=i&&(l=s.destinationEdgesArrayAccess);var u=0,d=0,h=s.near;if(null!==h&&h.layer===s.layer&&(u+=h.column-1,d++),null!==c)for(h=0;h<c.length;h++){var p=(s=c[h]).fromVertex;s.valid&&!s.rev&&p.layer!==e&&(u+=p.column,d++)}if(null!==l)for(c=0;c<l.length;c++)h=(s=l[c]).toVertex,s.valid&&!s.rev&&h.layer!==e&&(u+=h.column,d++);a[r]=0===d?-1:u/d}return ng(t,e,n),a}function $f(t,e,i){for(var n=ig(t,e),o=t.gc[e],a=[],r=0;r<o;r++){var s=n[r],c=null;0>=i&&(c=s.sourceEdgesArrayAccess);var l=null;0<=i&&(l=s.destinationEdgesArrayAccess);var u=0,d=[],h=s.near;if(null!==h&&h.layer===s.layer&&(d[u]=h.column-1,u++),s=void 0,null!==c)for(h=0;h<c.length;h++){var p=(s=c[h]).fromVertex;s.valid&&!s.rev&&p.layer!==e&&(d[u]=p.column+s.portFromColOffset,u++)}if(null!==l)for(c=0;c<l.length;c++)h=(s=l[c]).toVertex,s.valid&&!s.rev&&h.layer!==e&&(d[u]=h.column+s.portToColOffset,u++);0===u?a[r]=-1:(d.sort(function(t,e){return t-e}),l=u>>1,a[r]=0!=(1&u)?d[l]:d[l-1]+d[l]>>1)}return ng(t,e,n),a}function jf(t,e,i,n,o,a){if(e.component===n){if(e.component=i,o)for(var r=e.destinationEdges;r.next();){var s=r.value,c=s.toVertex,l=e.layer-c.layer;l===(s=t.linkMinLength(s))&&jf(t,c,i,n,o,a)}if(a)for(r=e.sourceEdges;r.next();)(l=(c=(s=r.value).fromVertex).layer-e.layer)===(s=t.linkMinLength(s))&&jf(t,c,i,n,o,a)}}function Lf(t,e,i,n,o,a){if(e.component===n){if(e.component=i,o)for(var r=e.destinationEdges;r.next();)Lf(t,r.value.toVertex,i,n,o,a);if(a)for(e=e.sourceEdges;e.next();)Lf(t,e.value.fromVertex,i,n,o,a)}}function Ef(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Nf(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function Af(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Vf(t,e){e.em=t.No,t.No++;for(var i=e.destinationEdges;i.next();){var n=i.value,o=n.toVertex;-1===o.em&&(n.forest=!0,Vf(t,o))}e.finish=t.No,t.No++}function zf(t){for(var e=t.network.vertexes.iterator;e.next();){var i=Ff(t,e.value);t.xa=Math.max(i,t.xa)}}function Ff(t,e){var i=0;if(-1===e.layer){for(var n=e.destinationEdges;n.next();){var o=n.value,a=o.toVertex;o=t.linkMinLength(o),i=Math.max(i,Ff(t,a)+o)}e.layer=i}else i=e.layer;return i}function Bf(t,e){var i=0;if(-1===e.layer){for(var n=e.sourceEdges;n.next();){var o=n.value,a=o.fromVertex;o=t.linkMinLength(o),i=Math.max(i,Bf(t,a)+o)}e.layer=i}else i=e.layer;return i}function Rf(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)Rf(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,o=n.length,a=0;a<o;a++){var r=n[a],s=r.fromVertex,c=r.toVertex;r=t.linkMinLength(r),s.layer-c.layer>r&&jf(t,s,0,-1,!0,!1)}for(jf(t,e,1,-1,!0,!0);0!==e.component;){for(a=0,n=1/0,s=0,c=null,r=t.network.vertexes.iterator;r.next();){var l=r.value;if(1===l.component){var u=0,d=!1,h=l.sourceEdgesArrayAccess;o=h.length;for(var p=0;p<o;p++){var f=h[p],g=f.fromVertex;u+=1,1!==g.component&&(a+=1,g=g.layer-l.layer,f=t.linkMinLength(f),n=Math.min(n,g-f))}for(o=(h=l.destinationEdgesArrayAccess).length,p=0;p<o;p++)--u,1!==(f=h[p].toVertex).component?--a:d=!0;(null===c||u<s)&&!d&&(c=l,s=u)}}if(0<a){for(i.reset();i.next();)1===(o=i.value).component&&(o.layer+=n);e.component=0}else c.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(jf(t,e,1,-1,!0,!1);0!==e.component;){for(n=0,o=1/0,a=0,s=null,c=t.network.vertexes.iterator;c.next();)if(1===(r=c.value).component){for(l=0,u=!1,d=(h=r.sourceEdgesArrayAccess).length,p=0;p<d;p++)l+=1,1!==(f=h[p].fromVertex).component?n+=1:u=!0;for(d=(h=r.destinationEdgesArrayAccess).length,p=0;p<d;p++)--l,1!==(g=(f=h[p]).toVertex).component&&(--n,g=r.layer-g.layer,f=t.linkMinLength(f),o=Math.min(o,g-f));(null===s||l>a)&&!u&&(s=r,a=l)}if(0>n){for(i.reset();i.next();)1===(n=i.value).component&&(n.layer-=o);e.component=0}else s.component=0}}}function Uf(t,e,i){return 90===t.J?i&&!e.rev||!i&&e.rev?270:90:180===t.J?i&&!e.rev||!i&&e.rev?0:180:270===t.J?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function Gf(t,e){var i=e.layer;for(e.index=t.gc[i],t.gc[i]++,e=e.destinationEdgesArrayAccess,i=!0;i;){i=!1;for(var n=0;n<e.length-1;n++){var o=e[n],a=e[n+1];o.portFromColOffset>a.portFromColOffset&&(i=!0,e[n]=a,e[n+1]=o)}}for(i=0;i<e.length;i++)(n=e[i]).valid&&-1===(n=n.toVertex).index&&Gf(t,n)}function Hf(t,e){var i=e.layer;e.index=t.gc[i],t.gc[i]++,e=e.sourceEdgesArrayAccess;for(var n=!0;n;)for(n=!1,i=0;i<e.length-1;i++){var o=e[i],a=e[i+1];o.portToColOffset>a.portToColOffset&&(n=!0,e[i]=a,e[i+1]=o)}for(i=0;i<e.length;i++)(n=e[i]).valid&&-1===(n=n.fromVertex).index&&Hf(t,n)}function Wf(t,e,i){var n=ig(t,e),o=t.gc[e],a=$f(t,e,i),r=Of(t,e,i);for(i=0;i<o;i++)-1===r[i]&&(r[i]=n[i].column),-1===a[i]&&(a[i]=n[i].column);for(var s,c=!0;c;)for(c=!1,i=0;i<o-1;i++)(a[i+1]<a[i]||a[i+1]===a[i]&&r[i+1]<r[i])&&(c=!0,s=a[i],a[i]=a[i+1],a[i+1]=s,s=r[i],r[i]=r[i+1],r[i+1]=s,s=n[i],n[i]=n[i+1],n[i+1]=s);for(i=a=0;i<o;i++)(s=n[i]).index=i,a+=t.nodeMinColumnSpace(s,!0),s.column=a,a+=1,a+=t.nodeMinColumnSpace(s,!1);ng(t,e,n)}function qf(t,e,i){var n,o=ig(t,e),a=t.gc[e];i=Pf(t,e,i);var r=[];for(n=0;n<a;n++)r[n]=-1;var s=[];for(n=0;n<a;n++)s[n]=-1;for(var c=!1,l=!0;l;)for(l=!1,n=0;n<a-1;n++){var u=i[o[n].index*a+o[n+1].index],d=i[o[n+1].index*a+o[n].index],h=0,p=0,f=o[n].column,g=o[n+1].column,m=t.nodeMinColumnSpace(o[n],!0),v=t.nodeMinColumnSpace(o[n],!1),b=t.nodeMinColumnSpace(o[n+1],!0),_=t.nodeMinColumnSpace(o[n+1],!1);m=f-m+b,v=g-v+_;var w=o[n].sourceEdges.iterator;for(w.reset();w.next();)if(_=(b=w.value).fromVertex,b.valid&&_.layer===e){for(b=0;o[b]!==_;)b++;b<n&&(h+=2*(n-b),p+=2*(n+1-b)),b===n+1&&(h+=1),b>n+1&&(h+=4*(b-n),p+=4*(b-(n+1)))}for((w=o[n].destinationEdges.iterator).reset();w.next();)if(_=(b=w.value).toVertex,b.valid&&_.layer===e){for(b=0;o[b]!==_;)b++;b===n+1&&(p+=1)}for((w=o[n+1].sourceEdges.iterator).reset();w.next();)if(_=(b=w.value).fromVertex,b.valid&&_.layer===e){for(b=0;o[b]!==_;)b++;b<n&&(h+=2*(n+1-b),p+=2*(n-b)),b===n&&(p+=1),b>n+1&&(h+=4*(b-(n+1)),p+=4*(b-n))}for((w=o[n+1].destinationEdges.iterator).reset();w.next();)if(_=(b=w.value).toVertex,b.valid&&_.layer===e){for(b=0;o[b]!==_;)b++;b===n&&(h+=1)}b=_=0;var y=s[o[n].index],k=r[o[n+1].index],x=s[o[n+1].index];-1!==(w=r[o[n].index])&&(_+=Math.abs(w-f),b+=Math.abs(w-v)),-1!==y&&(_+=Math.abs(y-f),b+=Math.abs(y-v)),-1!==k&&(_+=Math.abs(k-g),b+=Math.abs(k-m)),-1!==x&&(_+=Math.abs(x-g),b+=Math.abs(x-m)),(p<h-.5||p===h&&d<u-.5||p===h&&d===u&&b<_-.5)&&(l=c=!0,o[n].column=v,o[n+1].column=m,u=o[n],o[n]=o[n+1],o[n+1]=u)}for(n=0;n<a;n++)o[n].index=n;return ng(t,e,o),c}function Xf(t,e,i){for(var n=!1;Yf(t,e,i);)n=!0;return n}function Yf(t,e,i){var n,o=ig(t,e),a=t.gc[e],r=Of(t,e,-1);if(0<i)for(n=0;n<a;n++)r[n]=-1;var s=Of(t,e,1);if(0>i)for(n=0;n<a;n++)s[n]=-1;for(var c=!1,l=!0;l;)for(l=!1,n=0;n<a;n++){var u,d=o[n].column,h=t.nodeMinColumnSpace(o[n],!0),p=t.nodeMinColumnSpace(o[n],!1);u=0>n-1||d-o[n-1].column-1>h+t.nodeMinColumnSpace(o[n-1],!1)?d-1:d,h=n+1>=a||o[n+1].column-d-1>p+t.nodeMinColumnSpace(o[n+1],!0)?d+1:d;var f=p=0,g=0;if(0>=i)for(var m=o[n].sourceEdges.iterator;m.next();){var v=m.value,b=v.fromVertex;if(v.valid&&b.layer!==e){var _=Cf(v),w=v.portFromColOffset;v=v.portToColOffset,b=b.column,p+=(Math.abs(d+v-(b+w))+1)*_,f+=(Math.abs(u+v-(b+w))+1)*_,g+=(Math.abs(h+v-(b+w))+1)*_}}if(0<=i)for(m=o[n].destinationEdges.iterator;m.next();)b=(v=m.value).toVertex,v.valid&&b.layer!==e&&(_=Cf(v),w=v.portFromColOffset,v=v.portToColOffset,b=b.column,p+=(Math.abs(d+w-(b+v))+1)*_,f+=(Math.abs(u+w-(b+v))+1)*_,g+=(Math.abs(h+w-(b+v))+1)*_);v=w=_=0,b=s[o[n].index],-1!==(m=r[o[n].index])&&(_+=Math.abs(m-d),w+=Math.abs(m-u),v+=Math.abs(m-h)),-1!==b&&(_+=Math.abs(b-d),w+=Math.abs(b-u),v+=Math.abs(b-h)),f<p||f===p&&w<_?(l=c=!0,o[n].column=u):(g<p||g===p&&v<_)&&(l=c=!0,o[n].column=h)}return ng(t,e,o),t.normalize(),c}function Kf(t,e,i){var n=ig(t,e),o=t.gc[e],a=$f(t,e,i),r=[];for(i=0;i<o;i++)r[i]=a[i];for(a=!0;a;)for(a=!1,i=0;i<o;i++){var s=n[i].column,c=t.nodeMinColumnSpace(n[i],!0),l=t.nodeMinColumnSpace(n[i],!1),u=0;if(-1===r[i])if(0===i&&i===o-1)u=s;else if(0===i){var d=n[i+1].column;u=d-s===l+t.nodeMinColumnSpace(n[i+1],!0)?s-1:s}else u=i===o-1?s-(d=n[i-1].column)===c+t.nodeMinColumnSpace(n[i-1],!1)?s+1:s:((c=(d=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1)+(l=(d=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-l-1))/2|0;else 0===i&&i===o-1?u=r[i]:0===i?(l=(d=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-l-1,u=Math.min(r[i],l)):i===o-1?(c=(d=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1,u=Math.max(r[i],c)):(c=(d=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1,l=(d=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-l-1,c<r[i]&&r[i]<l?u=r[i]:c>=r[i]?u=c:l<=r[i]&&(u=l));u!==s&&(a=!0,n[i].column=u)}ng(t,e,n),t.normalize()}function Zf(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var o=n.value,a=t.nodeMinColumnSpace(o,!0),r=t.nodeMinColumnSpace(o,!1);if(o.column-a<=e&&o.column+r>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)(i=n.value).column>e&&(--i.column,t=!0);return t}function Jf(t,e){var i,n=e+1,o=[],a=[];for(i=0;i<=t.xa;i++)o[i]=!1,a[i]=!1;for(var r=t.network.vertexes.iterator;r.next();){var s=(i=r.value).column-t.nodeMinColumnSpace(i,!0),c=i.column+t.nodeMinColumnSpace(i,!1);s<=e&&c>=e&&(o[i.layer]=!0),s<=n&&c>=n&&(a[i.layer]=!0)}for(s=!0,n=!1,i=0;i<=t.xa;i++)s=s&&!(o[i]&&a[i]);if(s)for(r.reset();r.next();)(t=r.value).column>e&&(--t.column,n=!0);return n}function Qf(t,e){for(var i=0;i<=t.Da;i++)for(;Zf(t,i););for(t.normalize(),i=0;i<t.Da;i++)for(;Jf(t,i););var n;if(t.normalize(),0<e)for(i=0;i<=t.Da;i++){var o=Df(t),a=Mf(t);for(n=a+1;a<n;){n=a,tg(t,i,1);var r=Mf(t);r>a?If(t,o):r<a&&(a=r,o=Df(t))}}if(0>e)for(i=t.Da;0<=i;i--)for(o=Df(t),n=(a=Mf(t))+1;a<n;)n=a,tg(t,i,-1),(r=Mf(t))>a?If(t,o):r<a&&(a=r,o=Df(t));t.normalize()}function tg(t,e,i){t.Qd=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var o=n.value;o.column-t.nodeMinColumnSpace(o,!0)<=e&&(o.component=t.Qd)}if(0>i)for(n.reset();n.next();)(o=n.value).column+t.nodeMinColumnSpace(o,!1)>=e&&(o.component=t.Qd);for(t.Qd++,n.reset();n.next();)-1===(e=n.value).component&&(Lf(t,e,t.Qd,-1,!0,!0),t.Qd++);var a;for(e=[],a=0;a<t.Qd*t.Qd;a++)e[a]=!1;for(o=[],a=0;a<(t.xa+1)*(t.Da+1);a++)o[a]=-1;for(n.reset();n.next();)for(var r=(a=n.value).layer,s=Math.max(0,a.column-t.nodeMinColumnSpace(a,!0)),c=Math.min(t.Da,a.column+t.nodeMinColumnSpace(a,!1));s<=c;s++)o[r*(t.Da+1)+s]=a.component;for(a=0;a<=t.xa;a++){if(0<i)for(r=0;r<t.Da;r++)-1!==o[a*(t.Da+1)+r]&&-1!==o[a*(t.Da+1)+r+1]&&o[a*(t.Da+1)+r]!==o[a*(t.Da+1)+r+1]&&(e[o[a*(t.Da+1)+r]*t.Qd+o[a*(t.Da+1)+r+1]]=!0);if(0>i)for(r=t.Da;0<r;r--)-1!==o[a*(t.Da+1)+r]&&-1!==o[a*(t.Da+1)+r-1]&&o[a*(t.Da+1)+r]!==o[a*(t.Da+1)+r-1]&&(e[o[a*(t.Da+1)+r]*t.Qd+o[a*(t.Da+1)+r-1]]=!0)}for(o=[],a=0;a<t.Qd;a++)o[a]=!0;for((r=[]).push(0);0!==r.length;)if(c=r[r.length-1],r.pop(),o[c])for(o[c]=!1,a=0;a<t.Qd;a++)e[c*t.Qd+a]&&r.splice(0,0,a);if(0<i)for(n.reset();n.next();)o[(t=n.value).component]&&--t.column;if(0>i)for(n.reset();n.next();)o[(i=n.value).component]&&(i.column+=1)}function eg(t,e){return 270===t.J?e?je:Ne:90===t.J?e?Ne:je:180===t.J?e?Le:Ee:e?Ee:Le}function ig(t,e){var i=t.gc[e];if(i>=t.re.length){for(var n=[],o=0;o<t.re.length;o++)n[o]=t.re[o];t.re=n}for(null==t.re[i]?n=[]:(n=t.re[i],t.re[i]=null),t=t.Oo[e],e=0;e<t.length;e++)n[(i=t[e]).index]=i;return n}function ng(t,e,i){t.re[t.gc[e]]=i}Lp.className="CircularLayout",Lp.ConstantSpacing=Wp,Lp.ConstantDistance=qp,Lp.ConstantAngle=Xp,Lp.Packed=Yp,Lp.Clockwise=Kp,Lp.Counterclockwise=Zp,Lp.BidirectionalLeft=Jp,Lp.BidirectionalRight=Qp,Lp.Forwards=tf,Lp.Reverse=ef,Lp.Ascending=nf,Lp.Descending=of,Lp.Optimized=af,Lp.Pythagorean=rf,Lp.Circular=sf,cf.prototype.compare=function(t,e){if(0<t&&0>this.jm||Math.abs(t)<Math.abs(this.jm)&&!(0>t&&0<this.jm))for(this.jm=t,this.Ak=[],this.Lm=[],t=0;t<e.length;t++)this.Ak[t]=e[t].bounds.x,this.Lm[t]=e[t].bounds.y},cf.prototype.commit=function(t){if(null!==this.Ak&&null!==this.Lm)for(var e=0;e<this.Ak.length;e++){var i=t.L(e);i.x=this.Ak[e],i.y=this.Lm[e]}},cf.className="VertexArrangement",d(lf,lh),lf.prototype.createVertex=function(){return new uf(this)},lf.prototype.createEdge=function(){return new hf(this)},lf.className="CircularNetwork",d(uf,fh),h.Object.defineProperties(uf.prototype,{diameter:{get:function(){return this.oj},set:function(t){this.oj!==t&&(this.oj=t)}},actualAngle:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}}}),uf.className="CircularVertex",d(hf,mh),hf.className="CircularEdge",d(pf,rh),pf.prototype.cloneProtected=function(t){rh.prototype.cloneProtected.call(this,t),t.Bd.assign(this.Bd),t.Xm=this.Xm,t.cf=this.cf,t.Zc=this.Zc,t.xl=this.xl,t.Fn=this.Fn,t.Tf=this.Tf,t.Io=this.Io,t.ip=this.ip,t.Uk=this.Uk,t.Tk=this.Tk,t.Rk=this.Rk,t.Sk=this.Sk,t.wn=this.wn,t.vn=this.vn},pf.prototype.createNetwork=function(){return new yf(this)},pf.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.jq();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)(i=e.value).stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.jv(),this.ko=0,this.needsClusterLayout()){for(i=(e=this.network).sy().iterator;i.next();){this.network=i.value;for(var n=this.network.vertexes.iterator;n.next();){var o=n.value;o.yd=o.vertexes.count,o.Jh=1,o.$j=null,o.Ge=null}ff(this,0,t)}this.network=e,i.reset(),n=this.arrangementSpacing;for(var a=i.count,r=!0,s=o=0,c=P(),l=0;l<a+e.vertexes.count+2;l++)c[l]=null;a=0,i.reset();for(var u=Vt.alloc();i.next();)if(this.computeBounds(l=i.value,u),r)r=!1,o=u.x+u.width/2,s=u.y+u.height/2,c[0]=new pt(u.x+u.width+n.width,u.y),c[1]=new pt(u.x,u.y+u.height+n.height),a=2;else{var d=mf(c,a,o,s,u.width,u.height,n),h=c[d],p=new pt(h.x+u.width+n.width,h.y),f=new pt(h.x,h.y+u.height+n.height);for(d+1<a&&c.splice(d+1,0,null),c[d]=p,c[d+1]=f,a++,d=h.x-u.x,h=h.y-u.y,l=l.vertexes.iterator;l.next();)(p=l.value).centerX+=d,p.centerY+=h}for(Vt.free(u),l=e.vertexes.iterator;l.next();)p=(r=l.value).bounds,2>a?(o=p.x+p.width/2,s=p.y+p.height/2,c[0]=new pt(p.x+p.width+n.width,p.y),c[1]=new pt(p.x,p.y+p.height+n.height),a=2):(d=new pt((h=c[u=mf(c,a,o,s,p.width,p.height,n)]).x+p.width+n.width,h.y),p=new pt(h.x,h.y+p.height+n.height),u+1<a&&c.splice(u+1,0,null),c[u]=d,c[u+1]=p,a++,r.centerX=h.x+r.width/2,r.centerY=h.y+r.height/2);for(M(c),i.reset();i.next();){for(o=(n=i.value).vertexes.iterator;o.next();)e.Bh(o.value);for(n=n.edges.iterator;n.next();)e.cq(n.value)}}bf(this,t),this.updateParts()}this.xl=t,this.network=null,this.isValidLayout=!0},pf.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Gc(i)&&2<++t)return!0;if(10<e)break;e++}return!1},pf.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.Hc(n.bounds)}return e},pf.prototype.jv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},pf.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.vv();e.next();){var i=e.value;if("Comment"===i.category&&i.isVisible()){var n=this.network.Wi(i);null===n&&(n=this.network.$l(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var o=n.destinationEdges;o.next();){var a=o.value;if(a.toVertex===t){i=a;break}}if(null===i)for(o=n.sourceEdges;o.next();)if((a=o.value).fromVertex===t){i=a;break}null===i&&(i=this.network.mk(t,n,null)),i.length=this.defaultCommentSpringLength}}},pf.prototype.moveFixedVertex=function(){},pf.prototype.commitLayout=function(){this.jw(),this.commitNodes(),this.isRouting&&this.commitLinks()},pf.prototype.jw=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Ie,e.toSpot=Ie)}},pf.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=Vt.alloc();this.computeBounds(this.network,i),t=(e=this.arrangementOrigin).x-i.x,e=e.y-i.y,Vt.free(i)}i=Vt.alloc();for(var n=this.network.vertexes.iterator;n.next();){var o=n.value;0===t&&0===e||(i.assign(o.bounds),i.x+=t,i.y+=e,o.bounds=i),o.commit()}Vt.free(i)},pf.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},pf.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Uk:t},pf.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Tk:t},pf.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Rk:t},pf.prototype.electricalFieldX=function(){return 0},pf.prototype.electricalFieldY=function(){return 0},pf.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Sk:t},pf.prototype.gravitationalFieldX=function(){return 0},pf.prototype.gravitationalFieldY=function(){return 0},pf.prototype.isFixed=function(t){return t.isFixed},h.Object.defineProperties(pf.prototype,{currentIteration:{get:function(){return this.ko}},arrangementSpacing:{get:function(){return this.Bd},set:function(t){this.Bd.w(t)||(this.Bd.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.Xm},set:function(t){this.Xm!==t&&(this.Xm=t,this.C())}},setsPortSpots:{get:function(){return this.cf},set:function(t){this.cf!==t&&(this.cf=t,this.C())}},comments:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.C())}},maxIterations:{get:function(){return this.xl},set:function(t){this.xl!==t&&0<=t&&(this.xl=t,this.C())}},epsilonDistance:{get:function(){return this.Fn},set:function(t){this.Fn!==t&&0<t&&(this.Fn=t,this.C())}},infinityDistance:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&1<t&&(this.Tf=t,this.C())}},moveLimit:{get:function(){return this.Io},set:function(t){this.Io!==t&&1<t&&(this.Io=t,this.C())}},randomNumberGenerator:{get:function(){return this.ip},set:function(t){this.ip!==t&&(null!==t&&"function"!=typeof t.random&&_('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.ip=t)}},defaultSpringStiffness:{get:function(){return this.Uk},set:function(t){this.Uk!==t&&(this.Uk=t,this.C())}},defaultSpringLength:{get:function(){return this.Tk},set:function(t){this.Tk!==t&&(this.Tk=t,this.C())}},defaultElectricalCharge:{get:function(){return this.Rk},set:function(t){this.Rk!==t&&(this.Rk=t,this.C())}},defaultGravitationalMass:{get:function(){return this.Sk},set:function(t){this.Sk!==t&&(this.Sk=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.wn},set:function(t){this.wn!==t&&(this.wn=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t,this.C())}}}),pf.className="ForceDirectedLayout",wf.className="ForceDirectedSubnet",d(yf,lh),yf.prototype.createVertex=function(){return new kf(this)},yf.prototype.createEdge=function(){return new xf(this)},yf.className="ForceDirectedNetwork",d(kf,fh),h.Object.defineProperties(kf.prototype,{isFixed:{get:function(){return this.Ia},set:function(t){this.Ia!==t&&(this.Ia=t)}},charge:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},mass:{get:function(){return this.$a},set:function(t){this.$a!==t&&(this.$a=t)}},forceX:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},forceY:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}}}),kf.className="ForceDirectedVertex",d(xf,mh),h.Object.defineProperties(xf.prototype,{stiffness:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},length:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}}}),xf.className="ForceDirectedEdge",Sf.prototype.random=function(){var t=this.seed%this.Q*this.uy-this.seed/this.Q*this.yy;return this.seed=0<t?t:t+this.wy,this.seed*this.vy},Sf.className="RandomNumberGenerator",d(Tf,rh),Tf.prototype.cloneProtected=function(t){rh.prototype.cloneProtected.call(this,t),t.oe=this.oe,t.Zb=this.Zb,t.J=this.J,t.Pk=this.Pk,t.sl=this.sl,t.hl=this.hl,t.zj=this.zj,t.Ek=this.Ek,t.jg=this.jg,t.cf=this.cf,t.so=this.so},Tf.prototype.eb=function(t){t.classType===Tf?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:_("Unknown enum value: "+t):rh.prototype.eb.call(this,t)},Tf.prototype.createNetwork=function(){return new vg(this)},Tf.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.$r=-1,this.sd=this.Do=0,this.Oo=this.Mo=this.Ej=null,t=0;t<this.re.length;t++)this.re[t]=null;if(0<this.network.vertexes.count){for(this.network.jq(),this.cycleRemoveOption!==rg&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.xa=-1,this.assignLayers(),t.reset();t.next();)this.xa=Math.max(this.xa,t.value.layer);this.cycleRemoveOption===rg&&this.removeCycles();for(var e=[],i=(t=this.network).edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){var o=(n=e[i]).fromVertex,a=n.toVertex;if(!n.valid&&(null!==o.node&&null!==a.node||o.layer!==a.layer)){var r=0,s=0,c=0,l=0;if(null!==n.link){if(null===(s=n.link))continue;var u=o.node;if(r=a.node,null===u||null===r)continue;var d=s.fromNode;c=s.toNode;var h=s.fromPort;if(s=s.toPort,n.rev){l=d;var p=h;d=c,h=s,c=l,s=p}var f=o.focus;l=a.focus;var g=n.rev?a.bounds:o.bounds;p=pt.alloc(),u!==d?g.v()&&d.isVisible()?d.actualBounds.v()?(d.vf(h,ce,p),p.x+=d.actualBounds.x-g.x,p.y+=d.actualBounds.y-g.y):(d.vf(h,ce,p),p.v()||p.assign(f)):p.assign(f):g.v()?(d.vf(h,ce,p),p.v()||p.assign(f)):p.assign(f),d=n.rev?o.bounds:a.bounds,u=pt.alloc(),r!==c?d.v()&&c.isVisible()?c.actualBounds.v()?(c.vf(s,ce,u),u.x+=c.actualBounds.x-d.x,u.y+=c.actualBounds.y-d.y):(c.vf(s,ce,u),u.v()||u.assign(l)):u.assign(l):d.v()?(c.vf(s,ce,u),u.v()||u.assign(l)):u.assign(l),90===this.J||270===this.J?(r=Math.round((p.x-f.x)/this.Zb),c=p.x,s=Math.round((u.x-l.x)/this.Zb),l=u.x):(r=Math.round((p.y-f.y)/this.Zb),c=p.y,s=Math.round((u.y-l.y)/this.Zb),l=u.y),pt.free(p),pt.free(u),n.portFromColOffset=r,n.portFromPos=c,n.portToColOffset=s,n.portToPos=l}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(p=o.layer,u=a.layer,d=0,null!==(g=n.link)){var m=g.fromPort,v=g.toPort;if(null!==m&&null!==v){var b=g.fromNode;if(h=g.toNode,null!==b&&null!==h){var _=eg(this,!0),w=eg(this,!1),y=this.setsPortSpots?_:g.computeSpot(!0,m);f=this.setsPortSpots?w:g.computeSpot(!1,v);var k=g.isOrthogonal;y.gd()&&y.wf(w)&&f.gd()&&f.wf(_)?d=0:(_=g.getLinkPoint(b,m,y,!0,k,h,v,pt.alloc()),w=g.getLinkDirection(b,m,_,y,!0,k,h,v),pt.free(_),y.yt()||w!==Uf(this,n,!0)?this.setsPortSpots&&null!==b&&1===b.ports.count&&n.rev&&(d+=1):d+=1,y=g.getLinkPoint(h,v,f,!1,k,b,m,pt.alloc()),g=g.getLinkDirection(h,v,y,f,!1,k,b,m),pt.free(y),f.yt()||g!==Uf(this,n,!1)?this.setsPortSpots&&null!==h&&1===h.ports.count&&n.rev&&(d+=2):d+=2)}}}if(d=1===(h=d)||3===h,(h=2===h||3===h)&&((f=t.createVertex()).node=null,f.Wj=1,f.layer=p,f.near=o,t.Bh(f),(o=t.mk(o,f,n.link)).valid=!1,o.rev=n.rev,o.portFromColOffset=r,o.portToColOffset=0,o.portFromPos=c,o.portToPos=0,o=f),g=1,d&&g--,p-u>g&&0<p){for(n.valid=!1,(f=t.createVertex()).node=null,f.Wj=2,f.layer=p-1,t.Bh(f),(o=t.mk(o,f,n.link)).valid=!0,o.rev=n.rev,o.portFromColOffset=h?0:r,o.portToColOffset=0,o.portFromPos=h?0:c,o.portToPos=0,o=f,p--;p-u>g&&0<p;)(f=t.createVertex()).node=null,f.Wj=3,f.layer=p-1,t.Bh(f),(o=t.mk(o,f,n.link)).valid=!0,o.rev=n.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=f,p--;(o=t.mk(f,a,n.link)).valid=!d,d&&(f.near=a),o.rev=n.rev,o.portFromColOffset=0,o.portToColOffset=s,o.portFromPos=0,o.portToPos=l}else n.valid=!0}}for(t=this.gc=[],e=0;e<=this.xa;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.$r=-1,i=this.sd=this.Do=0;i<=this.xa;i++)t[i]>t[this.sd]&&(this.$r=t[i]-1,this.sd=i),t[i]<t[this.Do]&&(this.Do=i);for(this.Oo=[],i=0;i<t.length;i++)this.Oo[i]=[];for(e.reset();e.next();)this.Oo[(t=e.value).layer][t.index]=t;for(this.Da=-1,t=0;t<=this.xa;t++){for(e=ig(this,t),i=0,n=this.gc[t],a=0;a<n;a++)i+=this.nodeMinColumnSpace(o=e[a],!0),o.column=i,i+=1,i+=this.nodeMinColumnSpace(o,!1);this.Da=Math.max(this.Da,i-1),ng(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Tf.prototype.linkMinLength=function(){return 1},Tf.prototype.nodeMinLayerSpace=function(t,e){return null===t.node?0:90===this.J||270===this.J?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Tf.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node)return 0;var i=e?t.Sv:t.Rv;return null!==i?i:90===(i=this.J)||270===i?e?t.Sv=t.focus.x/this.Zb+1|0:t.Rv=(t.bounds.width-t.focus.x)/this.Zb+1|0:e?t.Sv=t.focus.y/this.Zb+1|0:t.Rv=(t.bounds.height-t.focus.y)/this.Zb+1|0},Tf.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.xa;e++)for(var i=Pf(this,e,1),n=this.gc[e],o=0;o<n;o++)for(var a=o;a<n;a++)t+=i[o*n+a];return t},Tf.prototype.normalize=function(){var t=1/0;this.Da=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Da=Math.max(this.Da,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Da-=t},Tf.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Pk){default:case ag:var e=0,i=(t=this.network).vertexes.count-1,n=[];n.length=i+1;for(var o=t.vertexes.iterator;o.next();)o.value.valid=!0;for(;null!==Ef(t);){for(o=Nf(t);null!==o;)n[i]=o,i--,o.valid=!1,o=Nf(t);for(o=Af(t);null!==o;)n[e]=o,e++,o.valid=!1,o=Af(t);o=null;for(var a=0,r=this.network.vertexes.iterator;r.next();){var s=r.value;if(s.valid){for(var c=0,l=s.destinationEdges;l.next();)l.value.toVertex.valid&&c++;l=0;for(var u=s.sourceEdges;u.next();)u.value.fromVertex.valid&&l++;(null===o||a<c-l)&&(o=s,a=c-l)}}null!==o&&(n[e]=o,e++,o.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.index>e.toVertex.index&&(t.Dm(e),e.rev=!0);break;case og:for(n=this.network.vertexes.iterator;n.next();)(t=n.value).em=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.No=0,n.reset();n.next();)0===(e=n.value).sourceEdges.count&&Vf(this,e);for(n.reset();n.next();)-1===(e=n.value).em&&Vf(this,e);for(t.reset();t.next();)(n=t.value).forest||(i=(e=n.fromVertex).finish,a=(o=n.toVertex).finish,o.em<e.em&&i<a&&(this.network.Dm(n),n.rev=!0));break;case rg:for(e=(t=this.network).vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)void 0===(o=n[(i=e.value).layer])?n[i.layer]=[i]:o.push(i);for(i=e=0;i<n.length;i++)if((o=n[i])&&0!==o.length){if(0<i)for(a=0;a<o.length;a++)o[a].layer-=e}else e++;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.layer<e.toVertex.layer&&(t.Dm(e),e.rev=!0)}}},Tf.prototype.assignLayers=function(){switch(this.sl){case cg:zf(this);break;case lg:for(var t,e=this.network.vertexes.iterator;e.next();)t=Bf(this,e.value),this.xa=Math.max(t,this.xa);for(e.reset();e.next();)(t=e.value).layer=this.xa-t.layer;break;default:case sg:for(zf(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Rf(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.xa=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.xa=Math.max(this.xa,i.layer)}}},Tf.prototype.initializeIndices=function(){switch(this.hl){default:case hg:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;e.index=this.gc[i],this.gc[i]++}break;case ug:for(t=this.network.vertexes.iterator,e=this.xa;0<=e;e--)for(t.reset();t.next();)(i=t.value).layer===e&&-1===i.index&&Gf(this,i);break;case dg:for(t=this.network.vertexes.iterator,e=0;e<=this.xa;e++)for(t.reset();t.next();)(i=t.value).layer===e&&-1===i.index&&Hf(this,i)}},Tf.prototype.reduceCrossings=function(){var t,e,i,n,o,a=this.countCrossings(),r=Df(this);for(t=0;t<this.zj;t++){for(e=0;e<=this.xa;e++)Wf(this,e,1),qf(this,e,1);var s=this.countCrossings();for(s<a&&(a=s,r=Df(this)),e=this.xa;0<=e;e--)Wf(this,e,-1),qf(this,e,-1);(s=this.countCrossings())<a&&(a=s,r=Df(this))}for(If(this,r),t=0;t<this.zj;t++){for(e=0;e<=this.xa;e++)Wf(this,e,0),qf(this,e,0);for((s=this.countCrossings())<a&&(a=s,r=Df(this)),e=this.xa;0<=e;e--)Wf(this,e,0),qf(this,e,0);(s=this.countCrossings())<a&&(a=s,r=Df(this))}switch(If(this,r),this.Ek){case pg:break;case gg:for(o=a+1;(e=this.countCrossings())<o;)for(o=e,t=this.xa;0<=t;t--)for(n=0;n<=t;n++){for(i=!0;i;)for(i=!1,e=t;e>=n;e--)i=qf(this,e,-1)||i;for((s=this.countCrossings())>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=qf(this,e,1)||i;for((s=this.countCrossings())>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=qf(this,e,1)||i;for(s>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=qf(this,e,-1)||i;for(s>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=qf(this,e,0)||i;for(s>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=qf(this,e,0)||i;s>=a?If(this,r):(a=s,r=Df(this))}break;default:case fg:for(t=this.xa,n=0,o=a+1;(e=this.countCrossings())<o;){for(o=e,i=!0;i;)for(i=!1,e=t;e>=n;e--)i=qf(this,e,-1)||i;for((s=this.countCrossings())>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=qf(this,e,1)||i;for((s=this.countCrossings())>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=qf(this,e,1)||i;for(s>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=qf(this,e,-1)||i;for(s>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=t;e>=n;e--)i=qf(this,e,0)||i;for(s>=a?If(this,r):(a=s,r=Df(this)),i=!0;i;)for(i=!1,e=n;e<=t;e++)i=qf(this,e,0)||i;s>=a?If(this,r):(a=s,r=Df(this))}}If(this,r)},Tf.prototype.straightenAndPack=function(){var t=0!=(1&this.jg),e=7===this.jg;if(1e3<this.network.edges.count&&!e&&(t=!1),t){var i=[];for(e=0;e<=this.xa;e++)i[e]=0;for(var n,o=this.network.vertexes.iterator;o.next();){var a=o.value;e=a.layer,n=a.column,a=this.nodeMinColumnSpace(a,!1),i[e]=Math.max(i[e],n+a)}for(o.reset();o.next();)(a=o.value).column=(8*(this.Da-i[e=a.layer])>>1)+8*(n=a.column);this.Da*=8}if(0!=(2&this.jg))for(i=!0;i;){for(i=!1,e=this.sd+1;e<=this.xa;e++)i=Xf(this,e,1)||i;for(e=this.sd-1;0<=e;e--)i=Xf(this,e,-1)||i;i=Xf(this,this.sd,0)||i}if(0!=(4&this.jg)){for(e=this.sd+1;e<=this.xa;e++)Kf(this,e,1);for(e=this.sd-1;0<=e;e--)Kf(this,e,-1);Kf(this,this.sd,0)}if(t&&(Qf(this,-1),Qf(this,1)),0!=(2&this.jg))for(i=!0;i;){for(i=!1,i=Xf(this,this.sd,0)||i,e=this.sd+1;e<=this.xa;e++)i=Xf(this,e,0)||i;for(e=this.sd-1;0<=e;e--)i=Xf(this,e,0)||i}},Tf.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=eg(this,!0),e=eg(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;null!==n&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.lv(),this.isRouting&&this.commitLinks()},Tf.prototype.commitNodes=function(){this.Md=[],this.rd=[],this.qd=[],this.Ga=[];for(var t=0;t<=this.xa;t++)this.Md[t]=0,this.rd[t]=0,this.qd[t]=0,this.Ga[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.Md[i]=Math.max(this.Md[i],this.nodeMinLayerSpace(e,!0)),this.rd[i]=Math.max(this.rd[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.oe;for(var n=0;n<=this.xa;n++){var o=i;0>=this.Md[n]+this.rd[n]&&(o=0),0<n&&(e+=o/2),90===this.J||0===this.J?(this.qd[n]=e+=this.rd[n],e+=this.Md[n]):(this.qd[n]=e+=this.Md[n],e+=this.rd[n]),n<this.xa&&(e+=o/2),this.Ga[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.xa;n++)270===this.J?this.qd[n]=e.y+this.qd[n]:90===this.J?(this.qd[n]=e.y+i-this.qd[n],this.Ga[n]=i-this.Ga[n]):180===this.J?this.qd[n]=e.x+this.qd[n]:(this.qd[n]=e.x+i-this.qd[n],this.Ga[n]=i-this.Ga[n]);for(t.reset(),i=n=1/0;t.next();){var a=(o=t.value).layer,r=0|o.column;if(270===this.J||90===this.J){var s=e.x+this.Zb*r;a=this.qd[a]}else s=this.qd[a],a=e.y+this.Zb*r;o.centerX=s,o.centerY=a,n=Math.min(o.x,n),i=Math.min(o.y,i)}for(this.Gf=new pt(n=e.x-n,e=e.y-i),t.reset();t.next();)(i=t.value).x+=n,i.y+=e,i.commit()},Tf.prototype.lv=function(){for(var t=0,e=this.oe,i=0;i<=this.xa;i++)t+=this.Md[i],t+=this.rd[i];t+=this.xa*e,e=[],i=this.Zb*this.Da;for(var n=this.maxLayer;0<=n;n--)e.push(270===this.J?0===n?new Vt(0,0,i,Math.abs(this.Ga[0])):new Vt(0,this.Ga[n-1],i,Math.abs(this.Ga[n-1]-this.Ga[n])):90===this.J?0===n?new Vt(0,this.Ga[0],i,Math.abs(this.Ga[0]-t)):new Vt(0,this.Ga[n],i,Math.abs(this.Ga[n-1]-this.Ga[n])):180===this.J?0===n?new Vt(0,0,Math.abs(this.Ga[0]),i):new Vt(this.Ga[n-1],0,Math.abs(this.Ga[n-1]-this.Ga[n]),i):0===n?new Vt(this.Ga[0],0,Math.abs(this.Ga[0]-t),i):new Vt(this.Ga[n],0,Math.abs(this.Ga[n-1]-this.Ga[n]),i));this.commitLayers(e,this.Gf)},Tf.prototype.commitLayers=function(){},Tf.prototype.commitLinks=function(){for(var t,e=this.network.edges.iterator;e.next();)null!==(t=e.value.link)&&(t.Kh(),t.Zj(),t.rf());for(e.reset();e.next();)null!==(t=e.value.link)&&t.hj();for(e.reset();e.next();){var i=e.value;if(null!==(t=i.link)){t.Kh();var n=t,o=n.fromNode,a=n.toNode,r=n.fromPort,s=n.toPort;if(null!==o){var c=o.findVisibleNode();null!==c&&c!==o&&(o=c,r=c.port)}null!==a&&null!==(c=a.findVisibleNode())&&c!==a&&(a=c,s=c.port);var l=t.computeSpot(!0,r);c=t.computeSpot(!1,s);var u=i.fromVertex,d=i.toVertex;if(i.valid){if(t.curve===Dd&&4===t.pointsCount)if(u.column===d.column)i=t.getLinkPoint(o,r,l,!0,!1,a,s),r=t.getLinkPoint(a,s,c,!1,!1,o,r),i.v()||i.set(o.actualBounds.center),r.v()||r.set(a.actualBounds.center),t.Zj(),t.qf(i.x,i.y),t.qf((2*i.x+r.x)/3,(2*i.y+r.y)/3),t.qf((i.x+2*r.x)/3,(i.y+2*r.y)/3),t.qf(r.x,r.y);else{var h=!1,p=!1;if(null!==r&&l===ne&&(h=!0),null!==s&&c===ne&&(p=!0),h||p){var f=t.i(0).x;i=t.i(0).y,u=t.i(3).x,n=t.i(3).y,h&&(90===this.J||270===this.J?(h=f,d=(i+n)/2):(h=(f+u)/2,d=i),t.K(1,h,d),(l=t.getLinkPoint(o,r,l,!0,!1,a,s)).v()||l.set(o.actualBounds.center),t.K(0,l.x,l.y)),p&&(90===this.J||270===this.J?(l=u,i=(i+n)/2):(l=(f+u)/2,i=n),t.K(2,l,i),(o=t.getLinkPoint(a,s,c,!1,!1,o,r)).v()||o.set(a.actualBounds.center),t.K(3,o.x,o.y))}}t.rf()}else if(u.layer===d.layer)t.rf();else{if(h=p=!1,f=t.firstPickIndex+1,t.isOrthogonal){h=!0;var g=t.pointsCount;4<g&&t.points.removeRange(2,g-3)}else if(t.curve===Dd)p=!0,4<(g=t.pointsCount)&&t.points.removeRange(2,g-3),4===g&&(f=2);else{var m=l===ne,v=c===ne;2<(g=t.pointsCount)&&m&&v?t.points.removeRange(1,g-2):3<g&&m&&!v?t.points.removeRange(1,g-3):3<g&&!m&&v?t.points.removeRange(2,g-2):4<g&&!m&&!v&&t.points.removeRange(2,g-3)}if(i.rev){for(;null!==d&&u!==d;){var b=g=null;for(m=d.sourceEdges.iterator;m.next()&&((v=m.value).link!==i.link||(b=v.toVertex,null!==(g=v.fromVertex).node)););if(g!==u){m=t.i(f-1).x,v=t.i(f-1).y;var _=g.centerX,w=g.centerY;if(h)180===this.J||0===this.J?f===t.firstPickIndex+1?(t.m(f++,m,v),t.m(f++,m,w)):(null!==b?b.centerY:v)!==w&&(t.m(f++,b=this.Ga[g.layer-1]+this.Gf.x,v),t.m(f++,b,w)):f===t.firstPickIndex+1?(t.m(f++,m,v),t.m(f++,_,v)):(null!==b?b.centerX:m)!==_&&(t.m(f++,m,b=this.Ga[g.layer-1]+this.Gf.y),t.m(f++,_,b));else if(f===t.firstPickIndex+1){b=Math.max(10,this.Md[d.layer]);var y=Math.max(10,this.rd[d.layer]);if(p)180===this.J?_<=d.bounds.x?(t.m(f++,(d=d.bounds.x)-b,w),t.m(f++,d,w),t.m(f++,d+y,w)):(t.m(f++,_-b,w),t.m(f++,_,w),t.m(f++,_+y,w)):90===this.J?w>=d.bounds.bottom?(t.m(f++,_,(d=d.bounds.y+d.bounds.height)+y),t.m(f++,_,d),t.m(f++,_,d-b)):(t.m(f++,_,w+y),t.m(f++,_,w),t.m(f++,_,w-b)):270===this.J?w<=d.bounds.y?(t.m(f++,_,(d=d.bounds.y)-b),t.m(f++,_,d),t.m(f++,_,d+y)):(t.m(f++,_,w-b),t.m(f++,_,w),t.m(f++,_,w+y)):0===this.J&&(_>=d.bounds.right?(t.m(f++,(d=d.bounds.x+d.bounds.width)+y,w),t.m(f++,d,w),t.m(f++,d-b,w)):(t.m(f++,_+y,w),t.m(f++,_,w),t.m(f++,_-b,w)));else{t.m(f++,m,v);var k=0;180===this.J||0===this.J?((180===this.J?_>=d.bounds.right:_<=d.bounds.x)&&(k=(0===this.J?-b:y)/2),t.m(f++,m+k,w)):((270===this.J?w>=d.bounds.bottom:w<=d.bounds.y)&&(k=(90===this.J?-b:y)/2),t.m(f++,_,v+k)),t.m(f++,_,w)}}else b=Math.max(10,this.Md[g.layer]),y=Math.max(10,this.rd[g.layer]),180===this.J?(p&&t.m(f++,_-b,w),t.m(f++,_,w),p&&t.m(f++,_+y,w)):90===this.J?(p&&t.m(f++,_,w+y),t.m(f++,_,w),p&&t.m(f++,_,w-b)):270===this.J?(p&&t.m(f++,_,w-b),t.m(f++,_,w),p&&t.m(f++,_,w+y)):(p&&t.m(f++,_+y,w),t.m(f++,_,w),p&&t.m(f++,_-b,w))}d=g}(null===s||l!==ne||h)&&(m=t.i(f-1).x,v=t.i(f-1).y,_=t.i(f).x,w=t.i(f).y,h?(d=this.rd[u.layer],180===this.J||0===this.J?((h=v)>=u.bounds.y&&h<=u.bounds.bottom&&(180===this.J?_>=u.bounds.x:_<=u.bounds.right)&&(h=h<u.bounds.y+u.bounds.height/2?u.bounds.y-this.Zb/2:u.bounds.bottom+this.Zb/2,t.m(f++,d=u.centerX+(180===this.J?-d:d),v),t.m(f++,d,h)),t.m(f++,_,h)):((h=m)>=u.bounds.x&&h<=u.bounds.right&&(270===this.J?w>=u.bounds.y:w<=u.bounds.bottom)&&(h=h<u.bounds.x+u.bounds.width/2?u.bounds.x-this.Zb/2:u.bounds.right+this.Zb/2,t.m(f++,m,d=u.centerY+(270===this.J?-d:d)),t.m(f++,h,d)),t.m(f++,h,w)),t.m(f++,_,w)):p?(b=Math.max(10,this.Md[u.layer]),y=Math.max(10,this.rd[u.layer]),180===this.J&&_>=u.bounds.x?(t.K(f-2,d=u.bounds.x+u.bounds.width,v),t.K(f-1,d+y,v)):90===this.J&&w<=u.bounds.bottom?(t.K(f-2,m,d=u.bounds.y),t.K(f-1,m,d-b)):270===this.J&&w>=u.bounds.y?(t.K(f-2,m,d=u.bounds.y+u.bounds.height),t.K(f-1,m,d+y)):0===this.J&&_<=u.bounds.right&&(t.K(f-2,d=u.bounds.x,v),t.K(f-1,d-b,v))):(b=Math.max(10,this.Md[u.layer]),y=Math.max(10,this.rd[u.layer]),h=0,180===this.J||0===this.J?((180===this.J?_<=u.bounds.x:_>=u.bounds.right)&&(h=(0===this.J?y:-b)/2),t.m(f++,_+h,v)):((270===this.J?w<=u.bounds.y:w>=u.bounds.bottom)&&(h=(90===this.J?y:-b)/2),t.m(f++,m,w+h)),t.m(f++,_,w)))}else{for(;null!==u&&u!==d;){for(b=g=null,u=u.destinationEdges.iterator;u.next()&&((m=u.value).link!==i.link||(null!==(b=m.fromVertex).node&&(b=null),null!==(g=m.toVertex).node)););g!==d&&(m=t.i(f-1).x,v=t.i(f-1).y,_=g.centerX,w=g.centerY,h?180===this.J||0===this.J?(null!==b?b.centerY:v)!==w&&(b=this.Ga[g.layer]+this.Gf.x,f===t.firstPickIndex+1&&(b=0===this.J?Math.max(b,m):Math.min(b,m)),t.m(f++,b,v),t.m(f++,b,w)):(null!==b?b.centerX:m)!==_&&(b=this.Ga[g.layer]+this.Gf.y,f===t.firstPickIndex+1&&(b=90===this.J?Math.max(b,v):Math.min(b,v)),t.m(f++,m,b),t.m(f++,_,b)):(b=Math.max(10,this.Md[g.layer]),y=Math.max(10,this.rd[g.layer]),180===this.J?(t.m(f++,_+y,w),p&&t.m(f++,_,w),t.m(f++,_-b,w)):90===this.J?(t.m(f++,_,w-b),p&&t.m(f++,_,w),t.m(f++,_,w+y)):270===this.J?(t.m(f++,_,w+y),p&&t.m(f++,_,w),t.m(f++,_,w-b)):(t.m(f++,_-b,w),p&&t.m(f++,_,w),t.m(f++,_+y,w)))),u=g}h&&(m=t.i(f-1).x,v=t.i(f-1).y,_=t.i(f).x,w=t.i(f).y,180===this.J||0===this.J?v!==w&&(b=0===this.J?Math.min(Math.max((_+m)/2,this.Ga[d.layer]+this.Gf.x),_):Math.max(Math.min((_+m)/2,this.Ga[d.layer]+this.Gf.x),_),t.m(f++,b,v),t.m(f++,b,w)):m!==_&&(b=90===this.J?Math.min(Math.max((w+v)/2,this.Ga[d.layer]+this.Gf.y),w):Math.max(Math.min((w+v)/2,this.Ga[d.layer]+this.Gf.y),w),t.m(f++,m,b),t.m(f++,_,b)))}null!==n&&p&&(null!==r&&(l===ne&&(l=t.i(0),n=t.i(2),l.w(n)||t.K(1,(l.x+n.x)/2,(l.y+n.y)/2)),(l=t.getLinkPoint(o,r,ne,!0,!1,a,s)).v()||l.set(o.actualBounds.center),t.K(0,l.x,l.y)),null!==s&&(c===ne&&(c=t.i(t.pointsCount-1),l=t.i(t.pointsCount-3),c.w(l)||t.K(t.pointsCount-2,(c.x+l.x)/2,(c.y+l.y)/2)),(o=t.getLinkPoint(a,s,ne,!1,!1,o,r)).v()||o.set(a.actualBounds.center),t.K(t.pointsCount-1,o.x,o.y))),t.rf(),i.commit()}}}this.avoidOrthogonalOverlaps()},Tf.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new tt,e=this.network.edges.iterator;e.next();){var i=e.value.link;null!==i&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(90===this.J||270===this.J){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(null!==n&&n.isOrthogonal)for(var o=2;o<n.pointsCount-3;o++){var a=n.i(o),r=n.i(o+1);if(this.A(a.y,r.y)&&!this.A(a.x,r.x)){var s=new mg;s.layer=Math.floor(a.y/2);var c=n.i(0),l=n.i(n.pointsCount-1);if(s.first=c.x*c.x+c.y,s.Xb=l.x*l.x+l.y,s.Tc=Math.min(a.x,r.x),s.tc=Math.max(a.x,r.x),s.index=o,s.link=n,o+2<n.pointsCount){c=n.i(o-1),l=n.i(o+2);var u=0;c.y<a.y?u=l.y<a.y?3:a.x<r.x?2:1:c.y>a.y&&(u=l.y>a.y?0:r.x<a.x?2:1),s.l=u}i.push(s)}}}if(1<i.length)for(i.sort(this.jy),t=0;t<i.length;){for(a=i[t].layer,n=t+1;n<i.length&&i[n].layer===a;)n++;if(1<n-t)for(a=t;a<n;){for(r=i[a].tc,o=t+1;o<n&&i[o].Tc<r;)r=Math.max(r,i[o].tc),o++;if(1<(r=o-a)){for(this.ej(i,this.Mt,a,a+r),u=1,s=i[a].Xb,c=a;c<o;c++)(l=i[c]).Xb!==s&&(u++,s=l.Xb);this.ej(i,this.iy,a,a+r);var d=1;for(s=i[a].first,c=a;c<o;c++)(l=i[c]).first!==s&&(d++,s=l.first);for(c=!0,l=d,u<d?(c=!1,l=u,s=i[a].Xb,this.ej(i,this.Mt,a,a+r)):s=i[a].first,u=0,d=a;d<o;d++){var h=i[d];(c?h.first:h.Xb)!==s&&(u++,s=c?h.first:h.Xb);var p=h.link;a=p.i(h.index),r=p.i(h.index+1);var f=this.linkSpacing*(u-(l-1)/2);e++,p.Kh(),p.K(h.index,a.x,a.y+f),p.K(h.index+1,r.x,r.y+f),p.rf()}}a=o}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(null!==(n=t.value)&&n.isOrthogonal)for(o=2;o<n.pointsCount-3;o++)a=n.i(o),r=n.i(o+1),this.A(a.x,r.x)&&!this.A(a.y,r.y)&&((s=new mg).layer=Math.floor(a.x/2),c=n.i(0),l=n.i(n.pointsCount-1),s.first=c.x+c.y*c.y,s.Xb=l.x+l.y*l.y,s.Tc=Math.min(a.y,r.y),s.tc=Math.max(a.y,r.y),s.index=o,s.link=n,o+2<n.pointsCount&&(c=n.i(o-1),l=n.i(o+2),u=0,c.x<a.x?u=l.x<a.x?3:a.y<r.y?2:1:c.x>a.x&&(u=l.x>a.x?0:r.y<a.y?2:1),s.l=u),i.push(s));if(1<i.length)for(i.sort(this.jy),t=0;t<i.length;){for(a=i[t].layer,n=t+1;n<i.length&&i[n].layer===a;)n++;if(1<n-t)for(a=t;a<n;){for(r=i[a].tc,o=t+1;o<n&&i[o].Tc<r;)r=Math.max(r,i[o].tc),o++;if(1<(r=o-a)){for(this.ej(i,this.Mt,a,a+r),u=1,s=i[a].Xb,c=a;c<o;c++)(l=i[c]).Xb!==s&&(u++,s=l.Xb);for(this.ej(i,this.iy,a,a+r),d=1,s=i[a].first,c=a;c<o;c++)(l=i[c]).first!==s&&(d++,s=l.first);for(c=!0,l=d,u<d?(c=!1,l=u,s=i[a].Xb,this.ej(i,this.Mt,a,a+r)):s=i[a].first,u=0,d=a;d<o;d++)h=i[d],(c?h.first:h.Xb)!==s&&(u++,s=c?h.first:h.Xb),a=(p=h.link).i(h.index),r=p.i(h.index+1),f=this.linkSpacing*(u-(l-1)/2),e++,p.Kh(),p.K(h.index,a.x+f,a.y),p.K(h.index+1,r.x+f,r.y),p.rf()}a=o}t=n}}}},(i=Tf.prototype).jy=function(t,e){return t instanceof mg&&e instanceof mg&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.Tc<e.Tc?-1:t.Tc>e.Tc?1:t.tc<e.tc?-1:t.tc>e.tc?1:0:0},i.iy=function(t,e){return t instanceof mg&&e instanceof mg&&t!==e?t.first<e.first?-1:t.first>e.first||t.l<e.l?1:t.l>e.l||t.Tc<e.Tc?-1:t.Tc>e.Tc?1:t.tc<e.tc?-1:t.tc>e.tc?1:0:0},i.Mt=function(t,e){return t instanceof mg&&e instanceof mg&&t!==e?t.Xb<e.Xb?-1:t.Xb>e.Xb||t.l<e.l?1:t.l>e.l||t.Tc<e.Tc?-1:t.Tc>e.Tc?1:t.tc<e.tc?-1:t.tc>e.tc?1:0:0},i.A=function(t,e){return-1<(t-=e)&&1>t},i.ej=function(t,e,i,n){var o=t.length,a=n-i;if(!(1>=a))if((0>i||i>=o-1)&&_("not in range 0 <= from < length: "+i),2===a)0<e(n=t[i],o=t[i+1])&&(t[i]=o,t[i+1]=n);else if(0===i)if(n>=o)t.sort(e);else for((i=t.slice(0,n)).sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=o)for((n=t.slice(i)).sort(e),e=i;e<o;e++)t[e]=n[e-i];else for((o=t.slice(i,n)).sort(e),e=i;e<n;e++)t[e]=o[e-i]},h.Object.defineProperties(Tf.prototype,{layerSpacing:{get:function(){return this.oe},set:function(t){this.oe!==t&&0<=t&&(this.oe=t,this.C())}},columnSpacing:{get:function(){return this.Zb},set:function(t){this.Zb!==t&&0<t&&(this.Zb=t,this.C())}},direction:{get:function(){return this.J},set:function(t){this.J!==t&&(0===t||90===t||180===t||270===t?(this.J=t,this.C()):_("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Pk},set:function(t){this.Pk===t||t!==ag&&t!==og&&t!==rg||(this.Pk=t,this.C())}},layeringOption:{get:function(){return this.sl},set:function(t){this.sl===t||t!==sg&&t!==cg&&t!==lg||(this.sl=t,this.C())}},initializeOption:{get:function(){return this.hl},set:function(t){this.hl===t||t!==ug&&t!==dg&&t!==hg||(this.hl=t,this.C())}},iterations:{get:function(){return this.zj},set:function(t){this.zj!==t&&0<=t&&(this.zj=t,this.C())}},aggressiveOption:{get:function(){return this.Ek},set:function(t){this.Ek===t||t!==pg&&t!==fg&&t!==gg||(this.Ek=t,this.C())}},packOption:{get:function(){return this.jg},set:function(t){this.jg!==t&&0<=t&&8>t&&(this.jg=t,this.C())}},setsPortSpots:{get:function(){return this.cf},set:function(t){this.cf!==t&&(this.cf=t,this.C())}},linkSpacing:{get:function(){return this.so},set:function(t){this.so!==t&&0<=t&&(this.so=t,this.C())}},maxLayer:{get:function(){return this.xa}},maxIndex:{get:function(){return this.$r}},maxColumn:{get:function(){return this.Da}},minIndexLayer:{get:function(){return this.Do}},maxIndexLayer:{get:function(){return this.sd}}});var og=new W(Tf,"CycleDepthFirst",0),ag=new W(Tf,"CycleGreedy",1),rg=new W(Tf,"CycleFromLayers",2),sg=new W(Tf,"LayerOptimalLinkLength",0),cg=new W(Tf,"LayerLongestPathSink",1),lg=new W(Tf,"LayerLongestPathSource",2),ug=new W(Tf,"InitDepthFirstOut",0),dg=new W(Tf,"InitDepthFirstIn",1),hg=new W(Tf,"InitNaive",2),pg=new W(Tf,"AggressiveNone",0),fg=new W(Tf,"AggressiveLess",1),gg=new W(Tf,"AggressiveMore",2);function mg(){this.index=this.tc=this.Tc=this.Xb=this.first=this.layer=0,this.link=null,this.l=0}function vg(t){lh.call(this,t)}function bg(t){fh.call(this,t),this.Oa=this.Lg=this.ui=-1,this.I=NaN,this.W=null,this.valid=!1,this.finish=this.em=NaN,this.Wj=0,this.Rv=this.Sv=null}function _g(t){mh.call(this,t),this.l=this.Ia=this.$a=!1,this.Ha=this.I=NaN,this.W=this.u=0}function wg(){rh.call(this),this.Ib=new it,this.bp=Zg,this.$c=Jg,this.Yp=fm,this.Zr=ym,this.Nw=[],this.Zc=!0,this.Bb=bm,this.Bd=new Lt(10,10).freeze();var t=new Sm(this);this.T=new Tm(t),this.U=new Tm(t),this.Yu=[]}function yg(t){var e=new it;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}function kg(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var o=e.value;switch(t.$c){case Jg:o.sourceEdges.count<i&&(i=o.sourceEdges.count,n=o);break;case Qg:o.destinationEdges.count<i&&(i=o.destinationEdges.count,n=o);break;default:_("Unhandled path value "+t.$c.toString())}}return n}function xg(t,e){if(null!==e){switch(t.$c){case Jg:if(0<e.destinationEdges.count){for(var i=new tt,n=e.destinationVertexes;n.next();){var o=n.value;Sg(t,e,o)&&i.add(o)}0<i.count&&(e.children=i.na())}break;case Qg:if(0<e.sourceEdges.count){for(i=new tt,n=e.sourceVertexes;n.next();)Sg(t,e,o=n.value)&&i.add(o);0<i.count&&(e.children=i.na())}break;default:_("Unhandled path value"+t.$c.toString())}for(n=(i=e.children).length,o=0;o<n;o++){var a=i[o];a.initialized=!0,a.level=e.level+1,a.parent=e,t.Ib.remove(a)}for(e=0;e<n;e++)xg(t,i[e])}}function Sg(t,e,i){if(i.initialized){if(null===e)var n=!1;else{for(n=e.parent;null!==n&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}function Tg(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===lm&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,o=0,a=e.children,r=a.length,s=0;s<r;s++){var c=a[s];Tg(t,c),i+=c.descendantCount+1,n=Math.max(n,c.maxChildrenCount),o=Math.max(o,c.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?o+1:0}}function Cg(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var i=(e=e.children).length,n=0;n<i;n++)Cg(t,e[n])}}function Dg(t,e){if(null!==e){e.alignment!==lm&&t.sortTreeVertexChildren(e);for(var i=(e=e.children).length,n=0;n<i;n++)Dg(t,e[n])}}function Ig(t){return t===cm||t===lm||t===um||t===dm}function Pg(t){return t===cm||t===lm}function Mg(t){var e=t.parent;if(null!==e){var i=e.alignment;if(Ig(i)){if(Pg(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return 0==i%2}if(i===um)return!0}}return!1}function Og(t,e){if(0===e.childrenCount){var i=!1,n=0;null!==e.parent&&(n=e.parent.angle,i=Ig(i=e.parent.alignment));var o=Mg(e);e.S.h(0,0),e.ta.h(e.width,e.height),null===e.parent||null===e.comments||(180!==n&&270!==n||i)&&!o?e.da.h(0,0):180===n&&!i||(90===n||270===n)&&o?e.da.h(e.width-2*e.focus.x,0):e.da.h(0,e.height-2*e.focus.y)}else{i=90===(n=Xg(e))||270===n;for(var a=0,r=(o=e.children).length,s=0;s<r;s++){var c=o[s];a=Math.max(a,i?c.ta.width:c.ta.height)}var l=e.alignment,u=l===rm,d=l===sm;s=Ig(l);var h=Math.max(0,e.breadthLimit);c=Yg(e);var p=e.nodeSpacing,f=Kg(e),g=u||d?0:f/2,m=e.rowSpacing,v=0;(u||d||e.Em||e.Fm&&1===e.maxGenerationCount)&&(v=Math.max(0,e.rowIndent)),u=e.width;var b=e.height,w=0,y=0,k=0,x=0,S=0,T=0,C=0,D=0,I=0;if(s&&!Pg(l)&&135<n&&o.reverse(),Pg(l))if(1<r)for(var P=0;P<r;P++){var M=o[P],O=M.ta;0==P%2&&P!==r-1&&(I=Math.max(I,(i?O.width:O.height)+Lg(M)-p))}else 1===r&&(I=i?o[0].ta.width:o[0].ta.height);if(s)switch(l){case cm:case lm:I=(y=135>n?$g(e,o,I,w,y):jg(e,o,I,w,y)).x,w=y.width,y=y.height;break;case um:for(t=0;t<r;t++)g=(h=o[t]).ta,k=0===C?0:m,i?(h.S.h(a-g.width,S+k),w=Math.max(w,g.width),y=Math.max(y,S+k+g.height),S+=k+g.height):(h.S.h(x+k,a-g.height),w=Math.max(w,x+k+g.width),y=Math.max(y,g.height),x+=k+g.width),C++;break;case dm:for(a=0;a<r;a++)h=(t=o[a]).ta,g=0===C?0:m,i?(t.S.h(p/2+e.focus.x,S+g),w=Math.max(w,h.width),y=Math.max(y,S+g+h.height),S+=g+h.height):(t.S.h(x+g,p/2+e.focus.y),w=Math.max(w,x+g+h.width),y=Math.max(y,h.height),x+=g+h.width),C++}else for(P=0;P<r;P++){if(O=(M=o[P]).ta,i){0<h&&0<C&&x+p+O.width>h&&(x<a&&zg(e,l,a-x,0,D,P-1),T++,C=0,D=P,k=y,x=0,S=135<n?-y-m:y+m);var $=0===C?g:p;Bg(t,M,0,S),M.S.h(x+$,S),w=Math.max(w,x+$+O.width),y=Math.max(y,k+(0===T?0:m)+O.height),x+=$+O.width}else 0<h&&0<C&&S+p+O.height>h&&(S<a&&zg(e,l,0,a-S,D,P-1),T++,C=0,D=P,k=w,S=0,x=135<n?-w-m:w+m),$=0===C?g:p,Bg(t,M,x,0),M.S.h(x,S+$),y=Math.max(y,S+$+O.height),w=Math.max(w,k+(0===T?0:m)+O.width),S+=$+O.height;C++}switch(0<T&&(i?(y+=Math.max(0,c),x<w&&zg(e,l,w-x,0,D,r-1),0<v&&(d||Fg(e,v,0,0,r-1),w+=v)):(w+=Math.max(0,c),S<y&&zg(e,l,0,y-S,D,r-1),0<v&&(d||Fg(e,0,v,0,r-1),y+=v))),v=d=0,l){case om:i?d+=w/2-e.focus.x-f/2:v+=y/2-e.focus.y-f/2;break;case am:0<T?i?d+=w/2-e.focus.x-f/2:v+=y/2-e.focus.y-f/2:i?d+=(l=o[0].S.x+o[0].da.x)+(o[r-1].S.x+o[r-1].da.x+2*o[r-1].focus.x-l)/2-e.focus.x-f/2:v+=(l=o[0].S.y+o[0].da.y)+(o[r-1].S.y+o[r-1].da.y+2*o[r-1].focus.y-l)/2-e.focus.y-f/2;break;case rm:i?(d-=f,w+=f):(v-=f,y+=f);break;case sm:i?(d+=w-e.width+f,w+=f):(v+=y-e.height+f,y+=f);break;case cm:case lm:i?d+=1<r?I+p/2-e.focus.x:o[0].focus.x-e.focus.x+o[0].da.x:v+=1<r?I+p/2-e.focus.y:o[0].focus.y-e.focus.y+o[0].da.y;break;case um:i?d+=w+p/2-e.focus.x:v+=y+p/2-e.focus.y;break;case dm:break;default:_("Unhandled alignment value "+l.toString())}for(f=0;f<r;f++)l=o[f],i?l.S.h(l.S.x+l.da.x-d,l.S.y+(135<n?(s?-y:-l.ta.height)+l.da.y-c:b+c+l.da.y)):l.S.h(l.S.x+(135<n?(s?-w:-l.ta.width)+l.da.x-c:u+c+l.da.x),l.S.y+l.da.y-v);i?(w=Ng(e,w,d),0>d&&(d=0),135<n&&(v+=y+c),y=Math.max(Math.max(y,b),y+b+c)):(135<n&&(d+=w+c),w=Math.max(Math.max(w,u),w+u+c),y=Ag(e,y,v),0>v&&(v=0)),e.da.h(d,v),e.ta.h(w,y)}}function $g(t,e,i,n,o){var a=e.length;if(0===a)return new Vt(i,0,n,o);if(1===a)return new Vt(i,0,n=(t=e[0]).ta.width,o=t.ta.height);for(var r=t.nodeSpacing,s=t.rowSpacing,c=90===Xg(t),l=0,u=0,d=0,h=0;h<a;h++)if(!(0!=h%2||1<a&&h===a-1)){var p=e[h],f=p.ta,g=0===l?0:s;if(c){var m=Lg(p)-r;p.S.h(i-(f.width+m),d+g),n=Math.max(n,f.width+m),o=Math.max(o,d+g+f.height),d+=g+f.height}else m=Lg(p)-r,p.S.h(u+g,i-(f.height+m)),o=Math.max(o,f.height+m),n=Math.max(n,u+g+f.width),u+=g+f.width;l++}for(l=0,p=u,h=d,c?(u=i+r,d=0):(u=0,d=i+r),f=0;f<a;f++)if(0!=f%2){m=(g=e[f]).ta;var v=0===l?0:s;if(c){var b=Lg(g)-r;g.S.h(u+b,d+v),n=Math.max(n,u+m.width+b),o=Math.max(o,d+v+m.height),d+=v+m.height}else b=Lg(g)-r,g.S.h(u+v,d+b),n=Math.max(n,u+v+m.width),o=Math.max(o,d+m.height+b),u+=v+m.width;l++}return 1<a&&1==a%2&&(a=(e=e[a-1]).ta,s=null===e.parent?0:e.parent.rowSpacing,c?(e.S.h(i+r/2-e.focus.x-e.da.x,o+s),c=i+r/2-e.focus.x-e.da.x,n=Math.max(n,c+a.width),0>c&&(n-=c),o=Math.max(o,Math.max(h,d)+s+a.height),0>e.S.x&&(i=Eg(t,e.S.x,!1,i,r))):(e.S.h(n+s,i+r/2-e.focus.y-e.da.y),n=Math.max(n,Math.max(p,u)+s+a.width),d=i+r/2-e.focus.y-e.da.y,o=Math.max(o,d+a.height),0>d&&(o-=d),0>e.S.y&&(i=Eg(t,e.S.y,!0,i,r)))),new Vt(i,0,n,o)}function jg(t,e,i,n,o){var a=e.length;if(0===a)return new Vt(i,0,n,o);if(1===a)return new Vt(i,0,n=(e=e[0]).ta.width,o=e.ta.height);for(var r=t.nodeSpacing,s=t.rowSpacing,c=270===Xg(t),l=0,u=0,d=0,h=0;h<a;h++)if(!(0!=h%2||1<a&&h===a-1)){var p=e[h],f=p.ta,g=0===l?0:s;if(c){var m=Lg(p)-r;p.S.h(i-(f.width+m),d-=g+f.height),n=Math.max(n,f.width+m),o=Math.max(o,Math.abs(d))}else m=Lg(p)-r,p.S.h(u-=g+f.width,i-(f.height+m)),o=Math.max(o,f.height+m),n=Math.max(n,Math.abs(u));l++}for(l=0,p=u,h=d,c?(u=i+r,d=0):(u=0,d=i+r),f=0;f<a;f++)if(0!=f%2){m=(g=e[f]).ta;var v=0===l?0:s;if(c){var b=Lg(g)-r;g.S.h(u+b,d-=v+m.height),n=Math.max(n,u+m.width+b),o=Math.max(o,Math.abs(d))}else b=Lg(g)-r,g.S.h(u-=v+m.width,d+b),o=Math.max(o,d+m.height+b),n=Math.max(n,Math.abs(u));l++}for(1<a&&1==a%2&&(l=(s=e[a-1]).ta,f=null===s.parent?0:s.parent.rowSpacing,c?(s.S.h(i+r/2-s.focus.x-s.da.x,-o-l.height-f),u=i+r/2-s.focus.x-s.da.x,n=Math.max(n,u+l.width),0>u&&(n-=u),o=Math.max(o,Math.abs(Math.min(h,d))+f+l.height),0>s.S.x&&(i=Eg(t,s.S.x,!1,i,r))):(s.S.h(-n-l.width-f,i+r/2-s.focus.y-s.da.y),n=Math.max(n,Math.abs(Math.min(p,u))+f+l.width),d=i+r/2-s.focus.y-s.da.y,o=Math.max(o,d+l.height),0>d&&(o-=d),0>s.S.y&&(i=Eg(t,s.S.y,!0,i,r)))),t=0;t<a;t++)r=e[t],c?r.S.h(r.S.x,r.S.y+o):r.S.h(r.S.x+n,r.S.y);return new Vt(i,0,n,o)}function Lg(t){return null===t.parent?0:t.parent.nodeSpacing}function Eg(t,e,i,n,o){for(var a=(t=t.children).length,r=0;r<a;r++)i?t[r].S.h(t[r].S.x,t[r].S.y-e):t[r].S.h(t[r].S.x-e,t[r].S.y);return e=t[a-1],Math.max(n,i?e.da.y+e.focus.y-o/2:e.da.x+e.focus.x-o/2)}function Ng(t,e,i){switch(t.alignment){case am:case om:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case rm:return t.width>e?t.width:e;case sm:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case cm:case lm:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case um:return t.width-t.focus.x+t.nodeSpacing/2+e;case dm:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Ag(t,e,i){switch(t.alignment){case am:case om:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case rm:return t.height>e?t.height:e;case sm:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case cm:case lm:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case um:return t.height-t.focus.y+t.nodeSpacing/2+e;case dm:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function Vg(t,e,i){switch(t){case om:case am:e/=2,i/=2;break;case rm:i=e=0;break;case sm:break;default:_("Unhandled alignment value "+t.toString())}return new pt(e,i)}function zg(t,e,i,n,o,a){Fg(t,(e=Vg(e,i,n)).x,e.y,o,a)}function Fg(t,e,i,n,o){if(0!==e||0!==i)for(t=t.children;n<=o;n++){var a=t[n].S;a.x+=e,a.y+=i}}function Bg(t,e,i,n){var o=e.parent;switch(t.$c){case Jg:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===o&&e.relativePoint.h(i,n);break;case Qg:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===o&&e.relativePoint.h(i,n);break;default:_("Unhandled path value "+t.$c.toString())}}function Rg(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];o.x+=e,o.y+=i}}function Ug(t,e,i,n,o,a,r,s){var c=Xg(e),l=90===c||270===c,u=e.nodeSpacing;e=n;var d=o;n=a;var h=r,p=i.wq,f=i.Jq;r=i.ta;var g=l?Math.max(h,r.height):Math.max(n,r.width);if(null!==p&&c===Xg(i)||(p=Gg(t,2),f=Gg(t,2),l?(p[0].h(0,0),p[1].h(0,r.height),f[0].h(r.width,0),f[1].h(f[0].x,p[1].y)):(p[0].h(0,0),p[1].h(r.width,0),f[0].h(0,r.height),f[1].h(p[1].x,f[0].y))),l){if(h=9999999,!(null===d||2>d.length||null===p||2>p.length))for(o=i=0;i<d.length&&o<p.length;){var m=p[o];c=m.x,l=m.y,c+=n;var v=a=d[i];i+1<d.length&&(v=d[i+1]);var b=m;m=b.x,b=b.y,o+1<p.length&&(m=(b=p[o+1]).x,b=b.y,m+=n);var _=h;a.y===l?_=c-a.x:a.y>l&&a.y<b?_=c+(a.y-l)/(b-l)*(m-c)-a.x:l>a.y&&l<v.y&&(_=c-(a.x+(l-a.y)/(v.y-a.y)*(v.x-a.x))),_<h&&(h=_),v.y<=a.y?i++:b<=l?o++:(v.y<=b&&i++,b<=v.y&&o++)}if(h=n-h,i=p,o=h+=u,null===e||2>e.length||null===i||2>i.length)n=null;else{for(u=Gg(t,e.length+i.length),n=a=c=0;a<i.length&&i[a].y<e[0].y;)l=i[a++],u[n++].h(l.x+o,l.y);for(;c<e.length;)l=e[c++],u[n++].h(l.x,l.y);for(c=e[e.length-1].y;a<i.length&&i[a].y<=c;)a++;for(;a<i.length&&i[a].y>c;)l=i[a++],u[n++].h(l.x+o,l.y);for(i=Gg(t,n),c=0;c<n;c++)i[c].assign(u[c]);Hg(t,u),n=i}if(a=f,c=h,null===d||2>d.length||null===a||2>a.length)o=null;else{for(u=Gg(t,d.length+a.length),o=l=i=0;i<d.length&&d[i].y<a[0].y;)v=d[i++],u[o++].h(v.x,v.y);for(;l<a.length;)v=a[l++],u[o++].h(v.x+c,v.y);for(a=a[a.length-1].y;i<d.length&&d[i].y<=a;)i++;for(;i<d.length&&d[i].y>a;)c=d[i++],u[o++].h(c.x,c.y);for(a=Gg(t,o),i=0;i<o;i++)a[i].assign(u[i]);Hg(t,u),o=a}return a=Math.max(0,h)+r.width,r=g,Hg(t,e),Hg(t,p),Hg(t,d),Hg(t,f),s[0]=n,s[1]=o,new Vt(h,0,a,r)}if(n=9999999,!(null===d||2>d.length||null===p||2>p.length))for(o=i=0;i<d.length&&o<p.length;)c=(m=p[o]).x,l=m.y,l+=h,v=a=d[i],i+1<d.length&&(v=d[i+1]),m=(b=m).x,b=b.y,o+1<p.length&&(m=(b=p[o+1]).x,b=b.y,b+=h),_=n,a.x===c?_=l-a.y:a.x>c&&a.x<m?_=l+(a.x-c)/(m-c)*(b-l)-a.y:c>a.x&&c<v.x&&(_=l-(a.y+(c-a.x)/(v.x-a.x)*(v.y-a.y))),_<n&&(n=_),v.x<=a.x?i++:m<=c?o++:(v.x<=m&&i++,m<=v.x&&o++);if(h-=n,i=p,o=h+=u,null===e||2>e.length||null===i||2>i.length)n=null;else{for(u=Gg(t,e.length+i.length),n=a=c=0;a<i.length&&i[a].x<e[0].x;)l=i[a++],u[n++].h(l.x,l.y+o);for(;c<e.length;)l=e[c++],u[n++].h(l.x,l.y);for(c=e[e.length-1].x;a<i.length&&i[a].x<=c;)a++;for(;a<i.length&&i[a].x>c;)l=i[a++],u[n++].h(l.x,l.y+o);for(i=Gg(t,n),c=0;c<n;c++)i[c].assign(u[c]);Hg(t,u),n=i}if(a=f,c=h,null===d||2>d.length||null===a||2>a.length)o=null;else{for(u=Gg(t,d.length+a.length),o=l=i=0;i<d.length&&d[i].x<a[0].x;)v=d[i++],u[o++].h(v.x,v.y);for(;l<a.length;)v=a[l++],u[o++].h(v.x,v.y+c);for(a=a[a.length-1].x;i<d.length&&d[i].x<=a;)i++;for(;i<d.length&&d[i].x>a;)c=d[i++],u[o++].h(c.x,c.y);for(a=Gg(t,o),i=0;i<o;i++)a[i].assign(u[i]);Hg(t,u),o=a}return a=g,r=Math.max(0,h)+r.height,Hg(t,e),Hg(t,p),Hg(t,d),Hg(t,f),s[0]=n,s[1]=o,new Vt(h,0,a,r)}function Gg(t,e){if(void 0!==(t=t.Yu[e])&&void 0!==(t=t.pop()))return t;t=[];for(var i=0;i<e;i++)t[i]=new pt;return t}function Hg(t,e){var i=e.length,n=t.Yu[i];void 0===n&&(t.Yu[i]=n=[]),n.push(e)}function Wg(t,e,i,n){if(null!==e){e.x=i,e.y=n;for(var o=(e=e.children).length,a=0;a<o;a++){var r=e[a];Wg(t,r,i+r.S.x,n+r.S.y)}}}function qg(t,e){if(null!==e){t.setPortSpots(e);for(var i=(e=e.children).length,n=0;n<i;n++)qg(t,e[n])}}function Xg(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function Yg(t){var e=Xg(t);e=90===e||270===e;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i}function Kg(t){var e=Xg(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=90===e||270===e?t.width*n:t.height*n}return Math.max(0,i)}Tf.className="LayeredDigraphLayout",Tf.CycleDepthFirst=og,Tf.CycleGreedy=ag,Tf.CycleFromLayers=rg,Tf.LayerOptimalLinkLength=sg,Tf.LayerLongestPathSink=cg,Tf.LayerLongestPathSource=lg,Tf.InitDepthFirstOut=ug,Tf.InitDepthFirstIn=dg,Tf.InitNaive=hg,Tf.AggressiveNone=pg,Tf.AggressiveLess=fg,Tf.AggressiveMore=gg,Tf.PackNone=0,Tf.PackExpand=1,Tf.PackStraighten=2,Tf.PackMedian=4,Tf.PackAll=7,mg.className="SegInfo",d(vg,lh),vg.prototype.createVertex=function(){return new bg(this)},vg.prototype.createEdge=function(){return new _g(this)},vg.className="LayeredDigraphNetwork",d(bg,fh),h.Object.defineProperties(bg.prototype,{layer:{get:function(){return this.ui},set:function(t){this.ui!==t&&(this.ui=t)}},column:{get:function(){return this.Lg},set:function(t){this.Lg!==t&&(this.Lg=t)}},index:{get:function(){return this.Oa},set:function(t){this.Oa!==t&&(this.Oa=t)}},component:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},near:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}}}),bg.className="LayeredDigraphVertex",d(_g,mh),h.Object.defineProperties(_g.prototype,{valid:{get:function(){return this.$a},set:function(t){this.$a!==t&&(this.$a=t)}},rev:{get:function(){return this.Ia},set:function(t){this.Ia!==t&&(this.Ia=t)}},forest:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},portFromPos:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},portToPos:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},portFromColOffset:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToColOffset:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}}}),_g.className="LayeredDigraphEdge",d(wg,rh),wg.prototype.cloneProtected=function(t){rh.prototype.cloneProtected.call(this,t),t.bp=this.bp,t.Yp=this.Yp,t.Zr=this.Zr,t.Zc=this.Zc,t.Bb=this.Bb,t.Bd.assign(this.Bd),t.T.copyInheritedPropertiesFrom(this.T),t.U.copyInheritedPropertiesFrom(this.U)},wg.prototype.eb=function(t){t.classType===wg?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:_("Unknown enum value: "+t):rh.prototype.eb.call(this,t)},wg.prototype.createNetwork=function(){return new Sm(this)},wg.prototype.makeNetwork=function(t){function e(t){if(t instanceof Ou)return!t.isLinkLabel&&"Comment"!==t.category;if(t instanceof id){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&"Comment"!==e.category&&null!==(t=t.toNode)&&!t.isLinkLabel&&"Comment"!==t.category}return!1}var i=this.createNetwork();return t instanceof Eo?(i.ug(t.nodes,!0,e),i.ug(t.links,!0,e)):i.ug(t instanceof Ku?t.memberParts:t.iterator,!1,e),i},wg.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==wm&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof Eo&&(e=t),this.$c=this.path===Zg&&null!==e?e.isTreePathToChildren?Jg:Qg:this.path===Zg?Jg:this.path,0<this.network.vertexes.count){for(this.network.jq(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Ib.count){for(t=new it,e=this.Ib.iterator;e.next();){var i=e.value;i instanceof Ou?null!==(i=this.network.Wi(i))&&t.add(i):i instanceof Tm&&t.add(i)}this.Ib=t}for(0===this.Ib.count&&this.findRoots(),t=this.Ib.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,xg(this,e));for(e=this.network.vertexes,t=null;0<(t=yg(e)).count;)null!==(e=kg(this,t))&&this.Ib.add(e),e.initialized=!0,xg(this,e),e=t;for(t=this.Ib.iterator;t.next();)(e=t.value)instanceof Tm&&Tg(this,e);for(t=this.Ib.iterator;t.next();)(e=t.value)instanceof Tm&&Cg(this,e);for(t=this.Ib.iterator;t.next();)(e=t.value)instanceof Tm&&Dg(this,e);if(this.jv(),this.layerStyle===xm){for(t=[],e=this.network.vertexes.iterator;e.next();){var n=(i=e.value).parent;null===n&&(n=i),n=0===n.angle||180===n.angle;var o=t[i.level];void 0===o&&(o=0),t[i.level]=Math.max(o,n?i.width:i.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.Nw=t,e=this.network.vertexes.iterator;e.next();)null===(n=(i=e.value).parent)&&(n=i),0===n.angle||180===n.angle?(180===n.angle&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(270===n.angle&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===km)for(t=this.network.vertexes.iterator;t.next();){for(i=0===(e=t.value).angle||180===e.angle,n=-1,o=0;o<e.children.length;o++){var a=e.children[o];n=Math.max(n,i?a.width:a.height)}if(0<=n)for(o=0;o<e.children.length;o++)a=e.children[o],i?(180===e.angle&&(a.focusX+=n-a.width),a.width=n):(270===e.angle&&(a.focusY+=n-a.height),a.height=n)}for(t=this.Ib.iterator;t.next();)(e=t.value)instanceof Tm&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Ib=new it,this.isValidLayout=!0},wg.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.$c){case Jg:0===i.sourceEdges.count&&this.Ib.add(i);break;case Qg:0===i.destinationEdges.count&&this.Ib.add(i);break;default:_("Unhandled path value "+this.$c.toString())}}0===this.Ib.count&&null!==(t=kg(this,t))&&this.Ib.add(t)},wg.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var i=t.children,n=0,o=0;o<i.length;o++)i[o]===e&&n++;if(0<n){n=Array(i.length-n);for(var a=o=0;a<i.length;a++)i[a]!==e&&(n[o++]=i[a]);t.children=n}}},wg.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function(t,e){switch(t.Yp){default:case fm:return null!==e.parent?e.parent:t.T;case vm:return null===e.parent?t.T:null===e.parent.parent?t.U:e.parent;case mm:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.U:t.T;case gm:var i=!0;if(0===e.childrenCount)i=!1;else for(var n=e.children,o=n.length,a=0;a<o;a++)if(0<n[a].childrenCount){i=!1;break}return i&&null!==e.parent?t.U:null!==e.parent?e.parent:t.T}}(this,t)),null!==t.parent&&t.parent.alignment===lm){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;0==n%2?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},wg.prototype.assignTreeVertexValues=function(){},wg.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case tm:break;case em:t.children.reverse();break;case im:t.children.sort(t.comparer);break;case nm:t.children.sort(t.comparer),t.children.reverse();break;default:_("Unhandled sorting value "+t.sorting.toString())}},wg.prototype.jv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},wg.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,o=!1;null!==i&&(n=i.angle,o=Ig(o=i.alignment)),e=90===e||270===e,n=90===n||270===n,i=0===t.childrenCount;var a=0,r=0,s=0,c=t.commentSpacing;if(null!==t.node)for(var l=t.node.vv();l.next();){var u=l.value;"Comment"===u.category&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.zb(),u=u.measuredBounds,e&&!i||!o&&!n&&i||o&&n&&i?(a=Math.max(a,u.width),r+=u.height+Math.abs(s)):(a+=u.width+Math.abs(s),r=Math.max(r,u.height)),s=c)}null!==t.comments&&(e&&!i||!o&&!n&&i||o&&n&&i?(a+=Math.abs(t.commentMargin),r=Math.max(0,r-t.height)):(r+=Math.abs(t.commentMargin),a=Math.max(0,a-t.width)),o=Vt.allocAt(0,0,t.bounds.width+a,t.bounds.height+r),t.bounds=o,Vt.free(o))},wg.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,i=t.parent,n=t.angle,o=0,a=!1;null!==i&&(o=i.angle,a=Ig(a=i.alignment)),n=90===n||270===n,i=90===o||270===o;for(var r=0===t.childrenCount,s=Mg(t),c=0,l=t.comments,u=l.length,d=pt.alloc(),h=0;h<u;h++){var p=l[h],f=p.measuredBounds;if(n&&!r||!a&&!i&&r||a&&i&&r){if(135<o&&!a||i&&s)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-f.width,t.bounds.y+c),p.move(d),p=p.xd();p.next();){var g=p.value;g.fromSpot=Le,g.toSpot=Ee}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+c),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=Ee,g.toSpot=Le;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+c),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=Ee,g.toSpot=Le;else for(d.h(t.bounds.x+t.commentMargin-f.width,t.bounds.y+c),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=Le,g.toSpot=Ee;c=0<=t.commentSpacing?c+(f.height+t.commentSpacing):c+(t.commentSpacing-f.height)}else{if(135<o&&!a||!i&&s)if(0<=t.commentMargin)for(d.h(t.bounds.x+c,t.bounds.y-t.commentMargin-f.height),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=je,g.toSpot=Ne;else for(d.h(t.bounds.x+c,t.bounds.y+2*t.focus.y-t.commentMargin),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=Ne,g.toSpot=je;else if(0<=t.commentMargin)for(d.h(t.bounds.x+c,t.bounds.y+2*t.focus.y+t.commentMargin),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=Ne,g.toSpot=je;else for(d.h(t.bounds.x+c,t.bounds.y+t.commentMargin-f.height),p.move(d),p=p.xd();p.next();)(g=p.value).fromSpot=je,g.toSpot=Ne;c=0<=t.commentSpacing?c+(f.width+t.commentSpacing):c+(t.commentSpacing-f.width)}}if(pt.free(d),e=c-t.commentSpacing-(n?e.height:e.width),this.$c===Jg)for(t=t.destinationEdges;t.next();)null===(o=t.value.link)||o.isAvoiding||(o.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(o=t.value.link)||o.isAvoiding||(o.toEndSegmentLength=0<e?e:NaN)}},wg.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case hm:Og(this,t);break;case pm:if(t.alignment===lm)Og(this,t);else if(0===t.childrenCount)i=!1,e=0,null!==(n=t.parent)&&(e=n.angle,i=Ig(i=n.alignment)),n=Mg(t),t.S.h(0,0),t.ta.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||i)&&!n?t.da.h(0,0):180===e&&!i||(90===e||270===e)&&n?t.da.h(t.width-2*t.focus.x,0):t.da.h(0,t.height-2*t.focus.y),t.wq=null,t.Jq=null;else{var o=Xg(t);e=90===o||270===o;var a=0,r=t.children,s=r.length;for(i=0;i<s;i++)n=r[i],a=Math.max(a,e?n.ta.width:n.ta.height);var c=t.alignment,l=c===sm,u=Ig(c),d=Math.max(0,t.breadthLimit);i=Yg(t);var h=t.nodeSpacing,p=Kg(t),f=t.rowSpacing,g=0;(c===rm||l||t.Em||t.Fm&&1===t.maxGenerationCount)&&(g=Math.max(0,t.rowIndent)),n=t.width;var m=t.height,v=0,b=0,w=0,y=null,k=null,x=0,S=0,T=0,C=0,D=0,I=0,O=0,$=0;if(u&&!Pg(c)&&135<o&&r.reverse(),Pg(c))if(1<s)for(var j=0;j<s;j++)0==j%2&&j!==s-1&&($=Math.max($,e?r[j].ta.width:r[j].ta.height));else 1===s&&($=e?r[0].ta.width:r[0].ta.height);if(u){switch(c){case cm:$=(b=135>o?$g(t,r,$,v,b):jg(t,r,$,v,b)).x,v=b.width,b=b.height;break;case um:for(y=0;y<s;y++)d=(k=r[y]).ta,w=0===I?0:f,e?(k.S.h(a-d.width,C+w),v=Math.max(v,d.width),b=Math.max(b,C+w+d.height),C+=w+d.height):(k.S.h(T+w,a-d.height),v=Math.max(v,T+w+d.width),b=Math.max(b,d.height),T+=w+d.width),I++;break;case dm:for(y=0;y<s;y++)a=(k=r[y]).ta,d=0===I?0:f,e?(k.S.h(h/2+t.focus.x,C+d),v=Math.max(v,a.width),b=Math.max(b,C+d+a.height),C+=d+a.height):(k.S.h(T+d,h/2+t.focus.y),v=Math.max(v,T+d+a.width),b=Math.max(b,a.height),T+=d+a.width),I++}y=Gg(this,2),k=Gg(this,2),e?(y[0].h(0,0),y[1].h(0,b),k[0].h(v,0)):(y[0].h(0,0),y[1].h(v,0),k[0].h(0,b)),k[1].h(v,b)}else for(j=0;j<s;j++){var L=r[j],E=L.ta;if(e){0<d&&0<I&&T+h+E.width>d&&(T<a&&zg(t,c,a-T,0,O,j-1),D++,I=0,O=j,w=b,T=0,C=135<o?-b-f:b+f),Bg(this,L,0,C);var N=0;if(0===I)k=L.Jq,x=E.width,S=E.height,(null===(y=L.wq)||null===k||o!==Xg(L))&&(y=Gg(this,2),k=Gg(this,2),y[0].h(0,0),y[1].h(0,S),k[0].h(x,0),k[1].h(x,S));else{var A=P();N=(S=Ug(this,t,L,y,k,x,S,A)).x,y=A[0],k=A[1],x=S.width,S=S.height,M(A),T<E.width&&0>N&&(Fg(t,-N,0,O,j-1),Rg(y,-N,0),Rg(k,-N,0),N=0)}L.S.h(N,C),v=Math.max(v,x),b=Math.max(b,w+(0===D?0:f)+E.height),T=x}else 0<d&&0<I&&C+h+E.height>d&&(C<a&&zg(t,c,0,a-C,O,j-1),D++,I=0,O=j,w=v,C=0,T=135<o?-v-f:v+f),Bg(this,L,T,0),N=0,0===I?(k=L.Jq,x=E.width,S=E.height,(null===(y=L.wq)||null===k||o!==Xg(L))&&(y=Gg(this,2),k=Gg(this,2),y[0].h(0,0),y[1].h(x,0),k[0].h(0,S),k[1].h(x,S))):(N=(S=Ug(this,t,L,y,k,x,S,A=P())).x,y=A[0],k=A[1],x=S.width,S=S.height,M(A),C<E.height&&0>N&&(Fg(t,0,-N,O,j-1),Rg(y,0,-N),Rg(k,0,-N),N=0)),L.S.h(T,N),b=Math.max(b,S),v=Math.max(v,w+(0===D?0:f)+E.width),C=S;I++}switch(0<D&&(e?(b+=Math.max(0,i),T<v&&zg(t,c,v-T,0,O,s-1),0<g&&(l||Fg(t,g,0,0,s-1),v+=g)):(v+=Math.max(0,i),C<b&&zg(t,c,0,b-C,O,s-1),0<g&&(l||Fg(t,0,g,0,s-1),b+=g))),g=l=0,c){case om:e?l+=v/2-t.focus.x-p/2:g+=b/2-t.focus.y-p/2;break;case am:0<D?e?l+=v/2-t.focus.x-p/2:g+=b/2-t.focus.y-p/2:e?l+=($=r[0].S.x+r[0].da.x)+(r[s-1].S.x+r[s-1].da.x+2*r[s-1].focus.x-$)/2-t.focus.x-p/2:g+=($=r[0].S.y+r[0].da.y)+(r[s-1].S.y+r[s-1].da.y+2*r[s-1].focus.y-$)/2-t.focus.y-p/2;break;case rm:e?(l-=p,v+=p):(g-=p,b+=p);break;case sm:e?(l+=v-t.width+p,v+=p):(g+=b-t.height+p,b+=p);break;case cm:e?l+=1<s?$+h/2-t.focus.x:r[0].focus.x-t.focus.x+r[0].da.x:g+=1<s?$+h/2-t.focus.y:r[0].focus.y-t.focus.y+r[0].da.y;break;case um:e?l+=v+h/2-t.focus.x:g+=b+h/2-t.focus.y;break;case dm:break;default:_("Unhandled alignment value "+c.toString())}for(p=0;p<s;p++)$=r[p],e?$.S.h($.S.x+$.da.x-l,$.S.y+(135<o?(u?-b:-$.ta.height)+$.da.y-i:m+i+$.da.y)):$.S.h($.S.x+(135<o?(u?-v:-$.ta.width)+$.da.x-i:n+i+$.da.x),$.S.y+$.da.y-g);if(s=r=0,u?e?(v=Ng(t,v,l),0>l&&(l=0),135<o&&(g+=b+i),b+=m+i,c===dm&&(r+=h/2+t.focus.x),s+=m+i):(135<o&&(l+=v+i),v+=n+i,b=Ag(t,b,g),0>g&&(g=0),c===dm&&(s+=h/2+t.focus.y),r+=n+i):e?(null===t.comments?n>v&&(r=(v=Vg(c,n-v,0)).x,s=v.y,v=n,l=0):v=Ng(t,v,l),0>l&&(r-=l,l=0),135<o&&(g+=b+i),b=Math.max(Math.max(b,m),b+m+i),s+=m+i):(135<o&&(l+=v+i),v=Math.max(Math.max(v,n),v+n+i),null===t.comments?m>b&&(r=(b=Vg(c,0,m-b)).x,s=b.y,b=m,g=0):b=Ag(t,b,g),0>g&&(s-=g,g=0),r+=n+i),0<D)o=Gg(this,4),D=Gg(this,4),e?(o[2].h(0,m+i),o[3].h(o[2].x,b),D[2].h(v,o[2].y),D[3].h(D[2].x,o[3].y)):(o[2].h(n+i,0),o[3].h(v,o[2].y),D[2].h(o[2].x,b),D[3].h(o[3].x,D[2].y));else{for(o=Gg(this,y.length+2),D=Gg(this,k.length+2),c=0;c<y.length;c++)o[c+2].h((u=y[c]).x+r,u.y+s);for(c=0;c<k.length;c++)D[c+2].h((u=k[c]).x+r,u.y+s)}e?(o[0].h(l,0),o[1].h(o[0].x,m),o[2].y<o[1].y&&(o[2].x>o[0].x?o[2].assign(o[1]):o[1].assign(o[2])),o[3].y<o[2].y&&(o[3].x>o[0].x?o[3].assign(o[2]):o[2].assign(o[3])),D[0].h(l+n,0),D[1].h(D[0].x,m),D[2].y<D[1].y&&(D[2].x<D[0].x?D[2].assign(D[1]):D[1].assign(D[2])),D[3].y<D[2].y&&(D[3].x<D[0].x?D[3].assign(D[2]):D[2].assign(D[3])),o[2].y-=i/2,D[2].y-=i/2):(o[0].h(0,g),o[1].h(n,o[0].y),o[2].x<o[1].x&&(o[2].y>o[0].y?o[2].assign(o[1]):o[1].assign(o[2])),o[3].x<o[2].x&&(o[3].y>o[0].y?o[3].assign(o[2]):o[2].assign(o[3])),D[0].h(0,g+m),D[1].h(n,D[0].y),D[2].x<D[1].x&&(D[2].y<D[0].y?D[2].assign(D[1]):D[1].assign(D[2])),D[3].x<D[2].x&&(D[3].y<D[0].y?D[3].assign(D[2]):D[2].assign(D[3])),o[2].x-=i/2,D[2].x-=i/2),Hg(this,y),Hg(this,k),t.wq=o,t.Jq=D,t.da.h(l,g),t.ta.h(v,b)}break;default:_("Unhandled compaction value "+t.compaction.toString())}}},wg.prototype.arrangeTrees=function(){if(this.Bb===wm)for(var t=this.Ib.iterator;t.next();){var e=t.value;if(e instanceof Tm){var i=e.node;if(null!==i){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),Wg(this,e,i,n)}}}else{for(t=[],e=this.Ib.iterator;e.next();)(i=e.value)instanceof Tm&&t.push(i);switch(this.sorting){case tm:break;case em:t.reverse();break;case im:t.sort(this.comparer);break;case nm:t.sort(this.comparer),t.reverse();break;default:_("Unhandled sorting value "+this.sorting.toString())}for(e=(i=this.arrangementOrigin).x,i=i.y,n=0;n<t.length;n++){var o=t[n];switch(Wg(this,o,e+o.da.x,i+o.da.y),this.Bb){case bm:i+=o.ta.height+this.Bd.height;break;case _m:e+=o.ta.width+this.Bd.width;break;default:_("Unhandled arrangement value "+this.Bb.toString())}}}},wg.prototype.commitLayout=function(){this.jw(),this.commitNodes(),this.lv(),this.isRouting&&this.commitLinks()},wg.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},wg.prototype.lv=function(){if(this.layerStyle===xm){for(var t=this.Nw,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var o=n.value;null===i?i=o.bounds.copy():i.Hc(o.bounds);var a=e[o.level];a=void 0===a?Yg(o):Math.max(a,Yg(o)),e[o.level]=a}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);if(90===this.angle||270===this.angle?(i.Vc(this.nodeSpacing/2,this.layerSpacing),n=new pt(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Vc(this.layerSpacing,this.nodeSpacing/2),n=new pt(-this.layerSpacing/2,-this.nodeSpacing/2)),o=[],i=90===this.angle||270===this.angle?i.width:i.height,a=0,180===this.angle||270===this.angle)for(var r=0;r<t.length;r++)a+=t[r]+e[r];for(r=0;r<t.length;r++){var s=t[r]+e[r];270===this.angle?o.push(new Vt(0,a-=s,i,s)):90===this.angle?(o.push(new Vt(0,a,i,s)),a+=s):180===this.angle?o.push(new Vt(a-=s,0,s,i)):(o.push(new Vt(a,0,s,i)),a+=s)}this.commitLayers(o,n)}},wg.prototype.commitLayers=function(){},wg.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},wg.prototype.jw=function(){for(var t=this.Ib.iterator;t.next();){var e=t.value;e instanceof Tm&&qg(this,e)}},wg.prototype.setPortSpots=function(t){var e=t.alignment;if(Ig(e)){var i=this.$c===Jg,n=Xg(t);switch(n){case 0:var o=Ee;break;case 90:o=Ne;break;case 180:o=Le;break;default:o=je}var a=t.children,r=a.length;switch(e){case cm:case lm:for(e=0;e<r;e++){var s=a[e];if(null!==(s=(i?s.sourceEdges:s.destinationEdges).first())&&null!==(s=s.link)){var c=90===n||270===n?Le:je;if(1===r||e===r-1&&1==r%2)switch(n){case 0:c=Le;break;case 90:c=je;break;case 180:c=Ee;break;default:c=Ne}else 0==e%2&&(c=90===n||270===n?Ee:Ne);i?(t.setsPortSpot&&(s.fromSpot=o),t.setsChildPortSpot&&(s.toSpot=c)):(t.setsPortSpot&&(s.fromSpot=c),t.setsChildPortSpot&&(s.toSpot=o))}}break;case um:for(n=90===n||270===n?Ee:Ne,a=i?t.destinationEdges:t.sourceEdges;a.next();)null!==(r=a.value.link)&&(i?(t.setsPortSpot&&(r.fromSpot=o),t.setsChildPortSpot&&(r.toSpot=n)):(t.setsPortSpot&&(r.fromSpot=n),t.setsChildPortSpot&&(r.toSpot=o)));break;case dm:for(n=90===n||270===n?Le:je,a=i?t.destinationEdges:t.sourceEdges;a.next();)null!==(r=a.value.link)&&(i?(t.setsPortSpot&&(r.fromSpot=o),t.setsChildPortSpot&&(r.toSpot=n)):(t.setsPortSpot&&(r.fromSpot=n),t.setsChildPortSpot&&(r.toSpot=o)))}}else if(i=Xg(t),this.$c===Jg){for(o=t.destinationEdges;o.next();)if(null!==(n=o.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(i){case 0:n.fromSpot=Ee;break;case 90:n.fromSpot=Ne;break;case 180:n.fromSpot=Le;break;default:n.fromSpot=je}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(i){case 0:n.toSpot=Le;break;case 90:n.toSpot=je;break;case 180:n.toSpot=Ee;break;default:n.toSpot=Ne}else n.toSpot=t.childPortSpot}}else for(o=t.sourceEdges;o.next();)if(null!==(n=o.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(i){case 0:n.toSpot=Ee;break;case 90:n.toSpot=Ne;break;case 180:n.toSpot=Le;break;default:n.toSpot=je}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(i){case 0:n.fromSpot=Le;break;case 90:n.fromSpot=je;break;case 180:n.fromSpot=Ee;break;default:n.fromSpot=Ne}else n.fromSpot=t.childPortSpot}},h.Object.defineProperties(wg.prototype,{roots:{get:function(){return this.Ib},set:function(t){this.Ib!==t&&(this.Ib=t,this.C())}},path:{get:function(){return this.bp},set:function(t){this.bp!==t&&(this.bp=t,this.C())}},treeStyle:{get:function(){return this.Yp},set:function(t){this.Bb===t||t!==fm&&t!==mm&&t!==gm&&t!==vm||(this.Yp=t,this.C())}},layerStyle:{get:function(){return this.Zr},set:function(t){this.Bb===t||t!==ym&&t!==km&&t!==xm||(this.Zr=t,this.C())}},comments:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.C())}},arrangement:{get:function(){return this.Bb},set:function(t){this.Bb===t||t!==bm&&t!==_m&&t!==wm||(this.Bb=t,this.C())}},arrangementSpacing:{get:function(){return this.Bd},set:function(t){this.Bd.w(t)||(this.Bd.assign(t),this.C())}},rootDefaults:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t,this.C())}},alternateDefaults:{get:function(){return this.U},set:function(t){this.U!==t&&(this.U=t,this.C())}},sorting:{get:function(){return this.T.sorting},set:function(t){this.T.sorting===t||t!==tm&&t!==em&&t!==im&&!nm||(this.T.sorting=t,this.C())}},comparer:{get:function(){return this.T.comparer},set:function(t){this.T.comparer!==t&&(this.T.comparer=t,this.C())}},angle:{get:function(){return this.T.angle},set:function(t){this.T.angle!==t&&(0===t||90===t||180===t||270===t?(this.T.angle=t,this.C()):_("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.T.alignment},set:function(t){this.T.alignment!==t&&(this.T.alignment=t,this.C())}},nodeIndent:{get:function(){return this.T.nodeIndent},set:function(t){this.T.nodeIndent!==t&&0<=t&&(this.T.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.T.nodeIndentPastParent},set:function(t){this.T.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.T.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.T.nodeSpacing},set:function(t){this.T.nodeSpacing!==t&&(this.T.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.T.layerSpacing},set:function(t){this.T.layerSpacing!==t&&(this.T.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.T.layerSpacingParentOverlap},set:function(t){this.T.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.T.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.T.compaction},set:function(t){this.T.compaction===t||t!==hm&&t!==pm||(this.T.compaction=t,this.C())}},breadthLimit:{get:function(){return this.T.breadthLimit},set:function(t){this.T.breadthLimit!==t&&0<=t&&(this.T.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.T.rowSpacing},set:function(t){this.T.rowSpacing!==t&&(this.T.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.T.rowIndent},set:function(t){this.T.rowIndent!==t&&0<=t&&(this.T.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.T.commentSpacing},set:function(t){this.T.commentSpacing!==t&&(this.T.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.T.commentMargin},set:function(t){this.T.commentMargin!==t&&(this.T.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.T.setsPortSpot},set:function(t){this.T.setsPortSpot!==t&&(this.T.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.T.portSpot},set:function(t){this.T.portSpot.w(t)||(this.T.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.T.setsChildPortSpot},set:function(t){this.T.setsChildPortSpot!==t&&(this.T.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.T.childPortSpot},set:function(t){this.T.childPortSpot.w(t)||(this.T.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.U.sorting},set:function(t){this.U.sorting===t||t!==tm&&t!==em&&t!==im&&!nm||(this.U.sorting=t,this.C())}},alternateComparer:{get:function(){return this.U.comparer},set:function(t){this.U.comparer!==t&&(this.U.comparer=t,this.C())}},alternateAngle:{get:function(){return this.U.angle},set:function(t){this.U.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.U.angle=t,this.C())}},alternateAlignment:{get:function(){return this.U.alignment},set:function(t){this.U.alignment!==t&&(this.U.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.U.nodeIndent},set:function(t){this.U.nodeIndent!==t&&0<=t&&(this.U.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.U.nodeIndentPastParent},set:function(t){this.U.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.U.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.U.nodeSpacing},set:function(t){this.U.nodeSpacing!==t&&(this.U.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.U.layerSpacing},set:function(t){this.U.layerSpacing!==t&&(this.U.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.U.layerSpacingParentOverlap},set:function(t){this.U.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.U.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.U.compaction},set:function(t){this.U.compaction===t||t!==hm&&t!==pm||(this.U.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.U.breadthLimit},set:function(t){this.U.breadthLimit!==t&&0<=t&&(this.U.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.U.rowSpacing},set:function(t){this.U.rowSpacing!==t&&(this.U.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.U.rowIndent},set:function(t){this.U.rowIndent!==t&&0<=t&&(this.U.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.U.commentSpacing},set:function(t){this.U.commentSpacing!==t&&(this.U.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.U.commentMargin},set:function(t){this.U.commentMargin!==t&&(this.U.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.U.setsPortSpot},set:function(t){this.U.setsPortSpot!==t&&(this.U.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.U.portSpot},set:function(t){this.U.portSpot.w(t)||(this.U.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.U.setsChildPortSpot},set:function(t){this.U.setsChildPortSpot!==t&&(this.U.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.U.childPortSpot},set:function(t){this.U.childPortSpot.w(t)||(this.U.childPortSpot=t,this.C())}}});var Zg=new W(wg,"PathDefault",-1),Jg=new W(wg,"PathDestination",0),Qg=new W(wg,"PathSource",1),tm=new W(wg,"SortingForwards",10),em=new W(wg,"SortingReverse",11),im=new W(wg,"SortingAscending",12),nm=new W(wg,"SortingDescending",13),om=new W(wg,"AlignmentCenterSubtrees",20),am=new W(wg,"AlignmentCenterChildren",21),rm=new W(wg,"AlignmentStart",22),sm=new W(wg,"AlignmentEnd",23),cm=new W(wg,"AlignmentBus",24),lm=new W(wg,"AlignmentBusBranching",25),um=new W(wg,"AlignmentTopLeftBus",26),dm=new W(wg,"AlignmentBottomRightBus",27),hm=new W(wg,"CompactionNone",30),pm=new W(wg,"CompactionBlock",31),fm=new W(wg,"StyleLayered",40),gm=new W(wg,"StyleLastParents",41),mm=new W(wg,"StyleAlternating",42),vm=new W(wg,"StyleRootOnly",43),bm=new W(wg,"ArrangementVertical",50),_m=new W(wg,"ArrangementHorizontal",51),wm=new W(wg,"ArrangementFixedRoots",52),ym=new W(wg,"LayerIndividual",60),km=new W(wg,"LayerSiblings",61),xm=new W(wg,"LayerUniform",62);function Sm(t){lh.call(this,t)}function Tm(t){fh.call(this,t),this.Ha=!1,this.Ic=null,this.I=[],this.kd=this.$a=this.W=this.Ia=0,this.Zc=null,this.S=new pt(0,0),this.ta=new Lt(0,0),this.da=new pt(0,0),this.Fm=this.Em=this.uA=!1,this.Jq=this.wq=null,this.Qc=tm,this.Kc=gh,this.Yb=0,this.wb=am,this.ls=this.ks=0,this.ms=20,this.oe=50,this.Yr=0,this.kr=pm,this.cr=0,this.zs=25,this.jr=this.ys=10,this.ir=20,this.Ms=!0,this.vs=Ie,this.Ls=!0,this.fr=Ie}function Cm(t){mh.call(this,t),this.Ou=new pt(0,0)}wg.className="TreeLayout",wg.PathDefault=Zg,wg.PathDestination=Jg,wg.PathSource=Qg,wg.SortingForwards=tm,wg.SortingReverse=em,wg.SortingAscending=im,wg.SortingDescending=nm,wg.AlignmentCenterSubtrees=om,wg.AlignmentCenterChildren=am,wg.AlignmentStart=rm,wg.AlignmentEnd=sm,wg.AlignmentBus=cm,wg.AlignmentBusBranching=lm,wg.AlignmentTopLeftBus=um,wg.AlignmentBottomRightBus=dm,wg.CompactionNone=hm,wg.CompactionBlock=pm,wg.StyleLayered=fm,wg.StyleLastParents=gm,wg.StyleAlternating=mm,wg.StyleRootOnly=vm,wg.ArrangementVertical=bm,wg.ArrangementHorizontal=_m,wg.ArrangementFixedRoots=wm,wg.LayerIndividual=ym,wg.LayerSiblings=km,wg.LayerUniform=xm,d(Sm,lh),Sm.prototype.createVertex=function(){return new Tm(this)},Sm.prototype.createEdge=function(){return new Cm(this)},Sm.className="TreeNetwork",d(Tm,fh),Tm.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.Qc=t.sorting,this.Kc=t.comparer,this.Yb=t.angle,this.wb=t.alignment,this.ks=t.nodeIndent,this.ls=t.nodeIndentPastParent,this.ms=t.nodeSpacing,this.oe=t.layerSpacing,this.Yr=t.layerSpacingParentOverlap,this.kr=t.compaction,this.cr=t.breadthLimit,this.zs=t.rowSpacing,this.ys=t.rowIndent,this.jr=t.commentSpacing,this.ir=t.commentMargin,this.Ms=t.setsPortSpot,this.vs=t.portSpot,this.Ls=t.setsChildPortSpot,this.fr=t.childPortSpot)},h.Object.defineProperties(Tm.prototype,{initialized:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},parent:{get:function(){return this.Ic},set:function(t){this.Ic!==t&&(this.Ic=t)}},children:{get:function(){return this.I},set:function(t){if(this.I!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.I=t}}},level:{get:function(){return this.Ia},set:function(t){this.Ia!==t&&(this.Ia=t)}},descendantCount:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},maxChildrenCount:{get:function(){return this.$a},set:function(t){this.$a!==t&&(this.$a=t)}},maxGenerationCount:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},comments:{get:function(){return this.Zc},set:function(t){if(this.Zc!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.Zc=t}}},sorting:{get:function(){return this.Qc},set:function(t){this.Qc!==t&&(this.Qc=t)}},comparer:{get:function(){return this.Kc},set:function(t){this.Kc!==t&&(this.Kc=t)}},angle:{get:function(){return this.Yb},set:function(t){this.Yb!==t&&(this.Yb=t)}},alignment:{get:function(){return this.wb},set:function(t){this.wb!==t&&(this.wb=t)}},nodeIndent:{get:function(){return this.ks},set:function(t){this.ks!==t&&(this.ks=t)}},nodeIndentPastParent:{get:function(){return this.ls},set:function(t){this.ls!==t&&(this.ls=t)}},nodeSpacing:{get:function(){return this.ms},set:function(t){this.ms!==t&&(this.ms=t)}},layerSpacing:{get:function(){return this.oe},set:function(t){this.oe!==t&&(this.oe=t)}},layerSpacingParentOverlap:{get:function(){return this.Yr},set:function(t){this.Yr!==t&&(this.Yr=t)}},compaction:{get:function(){return this.kr},set:function(t){this.kr!==t&&(this.kr=t)}},breadthLimit:{get:function(){return this.cr},set:function(t){this.cr!==t&&(this.cr=t)}},rowSpacing:{get:function(){return this.zs},set:function(t){this.zs!==t&&(this.zs=t)}},rowIndent:{get:function(){return this.ys},set:function(t){this.ys!==t&&(this.ys=t)}},commentSpacing:{get:function(){return this.jr},set:function(t){this.jr!==t&&(this.jr=t)}},commentMargin:{get:function(){return this.ir},set:function(t){this.ir!==t&&(this.ir=t)}},setsPortSpot:{get:function(){return this.Ms},set:function(t){this.Ms!==t&&(this.Ms=t)}},portSpot:{get:function(){return this.vs},set:function(t){this.vs.w(t)||(this.vs=t)}},setsChildPortSpot:{get:function(){return this.Ls},set:function(t){this.Ls!==t&&(this.Ls=t)}},childPortSpot:{get:function(){return this.fr},set:function(t){this.fr.w(t)||(this.fr=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.ta},set:function(t){this.ta.set(t)}},subtreeOffset:{get:function(){return this.da},set:function(t){this.da.set(t)}}}),Tm.className="TreeVertex",d(Cm,mh),Cm.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.$c){case Jg:i=this.fromVertex,n=this.toVertex;break;case Qg:i=this.toVertex,n=this.fromVertex;break;default:_("Unhandled path value "+e.$c.toString())}if(null!==i&&null!==n)if(0!==(e=this.Ou).x||0!==e.y||i.uA){n=i.bounds;var o=Xg(i),a=Yg(i),r=i.rowSpacing;t.hj();var s,c=t.curve===Dd,l=t.isOrthogonal;if(t.Kh(),l||c){for(s=2;4<t.pointsCount;)t.aw(2);var u=t.i(1),d=t.i(2)}else{for(s=1;3<t.pointsCount;)t.aw(1);u=t.i(0),d=t.i(t.pointsCount-1)}var h=t.i(t.pointsCount-1);0===o?(i.alignment===sm?(o=n.bottom+e.y,0===e.y&&u.y>h.y+i.rowIndent&&(o=Math.min(o,Math.max(u.y,o-Kg(i))))):i.alignment===rm?(o=n.top+e.y,0===e.y&&u.y<h.y-i.rowIndent&&(o=Math.max(o,Math.min(u.y,o+Kg(i))))):o=i.Em||i.Fm&&1===i.maxGenerationCount?n.top-i.da.y+e.y:n.y+n.height/2+e.y,c?(t.m(s,u.x,o),s++,t.m(s,n.right+a,o),s++,t.m(s,n.right+a+(e.x-r)/3,o),s++,t.m(s,n.right+a+2*(e.x-r)/3,o),s++,t.m(s,n.right+a+(e.x-r),o),s++,t.m(s,d.x,o)):(l&&(t.m(s,n.right+a/2,u.y),s++),t.m(s,n.right+a/2,o),s++,t.m(s,n.right+a+e.x-(l?r/2:r),o),s++,l&&t.m(s,t.i(s-1).x,d.y))):90===o?(i.alignment===sm?(o=n.right+e.x,0===e.x&&u.x>h.x+i.rowIndent&&(o=Math.min(o,Math.max(u.x,o-Kg(i))))):i.alignment===rm?(o=n.left+e.x,0===e.x&&u.x<h.x-i.rowIndent&&(o=Math.max(o,Math.min(u.x,o+Kg(i))))):o=i.Em||i.Fm&&1===i.maxGenerationCount?n.left-i.da.x+e.x:n.x+n.width/2+e.x,c?(t.m(s,o,u.y),s++,t.m(s,o,n.bottom+a),s++,t.m(s,o,n.bottom+a+(e.y-r)/3),s++,t.m(s,o,n.bottom+a+2*(e.y-r)/3),s++,t.m(s,o,n.bottom+a+(e.y-r)),s++,t.m(s,o,d.y)):(l&&(t.m(s,u.x,n.bottom+a/2),s++),t.m(s,o,n.bottom+a/2),s++,t.m(s,o,n.bottom+a+e.y-(l?r/2:r)),s++,l&&t.m(s,d.x,t.i(s-1).y))):180===o?(i.alignment===sm?(o=n.bottom+e.y,0===e.y&&u.y>h.y+i.rowIndent&&(o=Math.min(o,Math.max(u.y,o-Kg(i))))):i.alignment===rm?(o=n.top+e.y,0===e.y&&u.y<h.y-i.rowIndent&&(o=Math.max(o,Math.min(u.y,o+Kg(i))))):o=i.Em||i.Fm&&1===i.maxGenerationCount?n.top-i.da.y+e.y:n.y+n.height/2+e.y,c?(t.m(s,u.x,o),s++,t.m(s,n.left-a,o),s++,t.m(s,n.left-a+(e.x+r)/3,o),s++,t.m(s,n.left-a+2*(e.x+r)/3,o),s++,t.m(s,n.left-a+(e.x+r),o),s++,t.m(s,d.x,o)):(l&&(t.m(s,n.left-a/2,u.y),s++),t.m(s,n.left-a/2,o),s++,t.m(s,n.left-a+e.x+(l?r/2:r),o),s++,l&&t.m(s,t.i(s-1).x,d.y))):270===o?(i.alignment===sm?(o=n.right+e.x,0===e.x&&u.x>h.x+i.rowIndent&&(o=Math.min(o,Math.max(u.x,o-Kg(i))))):i.alignment===rm?(o=n.left+e.x,0===e.x&&u.x<h.x-i.rowIndent&&(o=Math.max(o,Math.min(u.x,o+Kg(i))))):o=i.Em||i.Fm&&1===i.maxGenerationCount?n.left-i.da.x+e.x:n.x+n.width/2+e.x,c?(t.m(s,o,u.y),s++,t.m(s,o,n.top-a),s++,t.m(s,o,n.top-a+(e.y+r)/3),s++,t.m(s,o,n.top-a+2*(e.y+r)/3),s++,t.m(s,o,n.top-a+(e.y+r)),s++,t.m(s,o,d.y)):(l&&(t.m(s,u.x,n.top-a/2),s++),t.m(s,o,n.top-a/2),s++,t.m(s,o,n.top-a+e.y+(l?r/2:r)),s++,l&&t.m(s,d.x,t.i(s-1).y))):_("Invalid angle "+o),t.rf()}else t=this.link,(a=Xg(i))!==Xg(n)&&(r=Yg(i),c=i.bounds,i=n.bounds,0===a&&i.left-c.right<r+1||90===a&&i.top-c.bottom<r+1||180===a&&c.left-i.right<r+1||270===a&&c.top-i.bottom<r+1||(t.hj(),i=t.curve===Dd,e=t.isOrthogonal,n=Ig(this.fromVertex.alignment),t.Kh(),0===a?(a=c.right+r/2,i?4===t.pointsCount&&(i=t.i(3).y,t.K(1,a-20,t.i(1).y),t.m(2,a-20,i),t.m(3,a,i),t.m(4,a+20,i),t.K(5,t.i(5).x,i)):e?n?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,a,t.i(2).y),t.K(3,a,t.i(3).y)):4===t.pointsCount?t.m(2,a,t.i(2).y):3===t.pointsCount?t.K(1,a,t.i(2).y):2===t.pointsCount&&t.m(1,a,t.i(1).y)):90===a?(a=c.bottom+r/2,i?4===t.pointsCount&&(i=t.i(3).x,t.K(1,t.i(1).x,a-20),t.m(2,i,a-20),t.m(3,i,a),t.m(4,i,a+20),t.K(5,i,t.i(5).y)):e?n?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,t.i(2).x,a),t.K(3,t.i(3).x,a)):4===t.pointsCount?t.m(2,t.i(2).x,a):3===t.pointsCount?t.K(1,t.i(2).x,a):2===t.pointsCount&&t.m(1,t.i(1).x,a)):180===a?(a=c.left-r/2,i?4===t.pointsCount&&(i=t.i(3).y,t.K(1,a+20,t.i(1).y),t.m(2,a+20,i),t.m(3,a,i),t.m(4,a-20,i),t.K(5,t.i(5).x,i)):e?n?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,a,t.i(2).y),t.K(3,a,t.i(3).y)):4===t.pointsCount?t.m(2,a,t.i(2).y):3===t.pointsCount?t.K(1,a,t.i(2).y):2===t.pointsCount&&t.m(1,a,t.i(1).y)):270===a&&(a=c.top-r/2,i?4===t.pointsCount&&(i=t.i(3).x,t.K(1,t.i(1).x,a+20),t.m(2,i,a+20),t.m(3,i,a),t.m(4,i,a-20),t.K(5,i,t.i(5).y)):e?n?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,t.i(2).x,a),t.K(3,t.i(3).x,a)):4===t.pointsCount?t.m(2,t.i(2).x,a):3===t.pointsCount?t.K(1,t.i(2).x,a):2===t.pointsCount&&t.m(1,t.i(1).x,a)),t.rf()))}},h.Object.defineProperties(Cm.prototype,{relativePoint:{get:function(){return this.Ou},set:function(t){this.Ou.set(t)}}}),Cm.className="TreeEdge",Mi.prototype.initializeStandardTools=function(){this.Va("Action",new Dn,this.mouseDownTools),this.Va("Relinking",new mn,this.mouseDownTools),this.Va("LinkReshaping",new bn,this.mouseDownTools),this.Va("Rotating",new Tn,this.mouseDownTools),this.Va("Resizing",new Sn,this.mouseDownTools),this.Va("Linking",new hn,this.mouseMoveTools),this.Va("Dragging",new Vi,this.mouseMoveTools),this.Va("DragSelecting",new Pn,this.mouseMoveTools),this.Va("Panning",new Mn,this.mouseMoveTools),this.Va("ContextMenu",new jn,this.mouseUpTools),this.Va("TextEditing",new Bn,this.mouseUpTools),this.Va("ClickCreating",new In,this.mouseUpTools),this.Va("ClickSelecting",new Cn,this.mouseUpTools)},Kc("Horizontal",new gc),Kc("Spot",new vc),Kc("Table",new _c),Kc("Viewbox",new kc),Kc("TableRow",new wc),Kc("TableColumn",new yc),Kc("Graduated",new Dc),Kc("Grid",new xc),rr.add(xp.type,Vh),rr.add(jp.type,Rh);var Dm=f.go,Im={get licenseKey(){return Eo.licenseKey},set licenseKey(t){Eo.licenseKey=t},get version(){return Eo.version},Group:Ku,EnumValue:W,List:tt,Set:it,Map:ht,Point:pt,Size:Lt,Rect:Vt,Margin:Jt,Spot:Fe,Geometry:Xe,PathFigure:li,PathSegment:ui,InputEvent:_i,DiagramEvent:wi,ChangedEvent:yi,Model:Gh,GraphLinksModel:xp,TreeModel:jp,Binding:_p,Transaction:Ci,UndoManager:Di,CommandHandler:Gr,Tool:Pi,DraggingTool:Vi,DraggingInfo:Lr,LinkingBaseTool:sn,LinkingTool:hn,RelinkingTool:mn,LinkReshapingTool:bn,ResizingTool:Sn,RotatingTool:Tn,ClickSelectingTool:Cn,ActionTool:Dn,ClickCreatingTool:In,HTMLInfo:On,ContextMenuTool:jn,DragSelectingTool:Pn,PanningTool:Mn,TextEditingTool:Bn,ToolManager:Mi,Animation:_o,AnimationManager:no,AnimationTrigger:Io,Layer:$o,Diagram:Eo,Palette:Ar,Overview:zr,Brush:Vs,GraphObject:qr,Panel:Ic,RowColumnDefinition:tl,Shape:al,TextBlock:gl,TextBlockMetrics:Bl,Picture:Rl,Part:su,Adornment:Mu,Node:Ou,Link:id,Placeholder:ed,Layout:rh,LayoutNetwork:lh,LayoutVertex:fh,LayoutEdge:mh,GridLayout:vh,PanelLayout:pc,CircularLayout:Lp,CircularNetwork:lf,CircularVertex:uf,CircularEdge:hf,ForceDirectedLayout:pf,ForceDirectedNetwork:yf,ForceDirectedVertex:kf,ForceDirectedEdge:xf,LayeredDigraphLayout:Tf,LayeredDigraphNetwork:vg,LayeredDigraphVertex:bg,LayeredDigraphEdge:_g,TreeLayout:wg,TreeNetwork:Sm,TreeVertex:Tm,TreeEdge:Cm};Dm&&Dm.version!==Im.version&&_("WARNING: a `go` object on the root object is already defined with a version mismatch."+Dm.version+". Replaced with version: "+Im.version),f.go=Im,(void 0===f||void 0===f.module||"object"!=typeof f.module.exports)&&f.define&&"function"==typeof f.define&&f.define.amd&&f.define(Im),"object"==typeof t.exports&&(t.exports=void 0!==e?e.go:self.go)}()}).call(this,i("yLpj"))},cs9d:function(t,e,i){window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,(function(e){return t[e]}).bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/codebase/",i(i.s=270)}([function(t,e,i){var n,o=i(3);t.exports={copy:function t(e){var i,n;if(e&&"object"==typeof e)switch(!0){case o.isDate(e):n=new Date(e);break;case o.isArray(e):for(n=new Array(e.length),i=0;i<e.length;i++)n[i]=t(e[i]);break;case o.isStringObject(e):n=new String(e);break;case o.isNumberObject(e):n=new Number(e);break;case o.isBooleanObject(e):n=new Boolean(e);break;default:for(i in n=function(t){return t.constructor.toString()!=={}.constructor.toString()}(e)?Object.create(e):{},e)Object.prototype.hasOwnProperty.apply(e,[i])&&(n[i]=t(e[i]))}return n||e},defined:function(t){return void 0!==t},mixin:function(t,e,i){for(var n in e)(void 0===t[n]||i)&&(t[n]=e[n]);return t},uid:function(){return n||(n=(new Date).valueOf()),++n},bind:function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},event:function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,void 0!==n&&n):t.attachEvent&&t.attachEvent("on"+e,i)},eventRemove:function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,void 0!==n&&n):t.detachEvent&&t.detachEvent("on"+e,i)}}},function(t,e){function i(t){var e=0,i=0,n=0,o=0;if(t.getBoundingClientRect){var a=t.getBoundingClientRect(),r=document.body,s=document.documentElement||document.body.parentNode||document.body,c=window.pageYOffset||s.scrollTop||r.scrollTop,l=window.pageXOffset||s.scrollLeft||r.scrollLeft;e=a.top+c-(s.clientTop||r.clientTop||0),i=a.left+l-(s.clientLeft||r.clientLeft||0),n=document.body.offsetWidth-a.right,o=document.body.offsetHeight-a.bottom}else{for(;t;)e+=parseInt(t.offsetTop,10),i+=parseInt(t.offsetLeft,10),t=t.offsetParent;n=document.body.offsetWidth-t.offsetWidth-i,o=document.body.offsetHeight-t.offsetHeight-e}return{y:Math.round(e),x:Math.round(i),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(n),bottom:Math.round(o)}}function n(t){var e=!1,i=!1;if(window.getComputedStyle){var n=window.getComputedStyle(t,null);e=n.display,i=n.visibility}else t.currentStyle&&(e=t.currentStyle.display,i=t.currentStyle.visibility);return"none"!=e&&"hidden"!=i}function o(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function a(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function r(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}function s(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),u(e)}var c;function l(t){return t.tagName?t:(t=t||window.event).target||t.srcElement}function u(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)}t.exports={getNodePosition:i,getFocusableNodes:function(t){for(var e=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),i=Array.prototype.slice.call(e,0),s=0;s<i.length;s++){var c=i[s];(o(c)||r(c)||a(c))&&n(c)||(i.splice(s,1),s--)}return i},getScrollSize:function(){var t=document.createElement("div");t.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},getClassName:s,addClassName:function(t,e){e&&-1===t.className.indexOf(e)&&(t.className+=" "+e)},removeClassName:function(t,e){e=e.split(" ");for(var i=0;i<e.length;i++){var n=new RegExp("\\s?\\b"+e[i]+"\\b(?![-_.])","");t.className=t.className.replace(n,"")}},insertNode:function(t,e){c||(c=document.createElement("div")),c.innerHTML=e;var i=c.firstChild;return t.appendChild(i),i},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},getChildNodes:function(t,e){for(var i=t.childNodes,n=i.length,o=[],a=0;a<n;a++){var r=i[a];r.className&&-1!==r.className.indexOf(e)&&o.push(r)}return o},toNode:function(t){return"string"==typeof t?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body},locateClassName:function(t,e,i){var n=l(t),o="";for(void 0===i&&(i=!0);n;){if(o=s(n)){var a=o.indexOf(e);if(a>=0){if(!i)return n;var r=0===a||!u(o.charAt(a-1)),c=a+e.length>=o.length||!u(o.charAt(a+e.length));if(r&&c)return n}}n=n.parentNode}return null},locateAttribute:function(t,e){if(e){for(var i=l(t);i;){if(i.getAttribute&&i.getAttribute(e))return i;i=i.parentNode}return null}},getTargetNode:l,getRelativeEventPosition:function(t,e){var n=document.documentElement,o=i(e);return{x:t.clientX+n.scrollLeft-n.clientLeft-o.x+e.scrollLeft,y:t.clientY+n.scrollTop-n.clientTop-o.y+e.scrollTop}},isChildOf:function(t,e){if(!t||!e)return!1;for(;t&&t!=e;)t=t.parentNode;return t===e},hasClass:function(t,e){return"classList"in t?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},closest:function(t,e){if(t.closest)return t.closest(e);if(t.matches||t.msMatchesSelector||t.webkitMatchesSelector){var i=t;if(!document.documentElement.contains(i))return null;do{if((i.matches||i.msMatchesSelector||i.webkitMatchesSelector).call(i,e))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}return null}}},function(t,e){t.exports=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,e){var i={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};function n(t){return!(!t||"object"!=typeof t||!(t.getFullYear&&t.getMonth&&t.getDate))}function o(t,e){var i=[];if(t.filter)return t.filter(e);for(var n=0;n<t.length;n++)e(t[n],n)&&(i[i.length]=t[n]);return i}t.exports={getSecondsInUnit:function(t){return i[t]||i.hour},forEach:function(t,e){if(t.forEach)t.forEach(e);else for(var i=t.slice(),n=0;n<i.length;n++)e(i[n],n)},arrayMap:function(t,e){if(t.map)return t.map(e);for(var i=t.slice(),n=[],o=0;o<i.length;o++)n.push(e(i[o],o));return n},arrayFind:function(t,e){if(t.find)return t.find(e);for(var i=0;i<t.length;i++)if(e(t[i],i))return t[i]},arrayFilter:o,arrayDifference:function(t,e){return o(t,function(t,i){return!e(t,i)})},arraySome:function(t,e){if(0===t.length)return!1;for(var i=0;i<t.length;i++)if(e(t[i],i,t))return!0;return!1},hashToArray:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},sortArrayOfHash:function(t,e,i){var n=function(t,e){return t<e};t.sort(function(t,o){return t[e]===o[e]?0:i?n(t[e],o[e]):n(o[e],t[e])})},throttle:function(t,e){var i=!1;return function(){i||(t.apply(null,arguments),i=!0,setTimeout(function(){i=!1},e))}},isArray:function(t){return Array.isArray?Array.isArray(t):t&&void 0!==t.length&&t.pop&&t.push},isDate:n,isValidDate:function(t){return n(t)&&!isNaN(t.getTime())},isStringObject:function(t){return t&&"object"==typeof t&&"function String() { [native code] }"===Function.prototype.toString.call(t.constructor)},isNumberObject:function(t){return t&&"object"==typeof t&&"function Number() { [native code] }"===Function.prototype.toString.call(t.constructor)},isBooleanObject:function(t){return t&&"object"==typeof t&&"function Boolean() { [native code] }"===Function.prototype.toString.call(t.constructor)},delay:function(t,e){var i,n=function(){n.$cancelTimeout(),n.$pending=!0;var o=Array.prototype.slice.call(arguments);i=setTimeout(function(){t.apply(this,o),n.$pending=!1},e)};return n.$pending=!1,n.$cancelTimeout=function(){clearTimeout(i),n.$pending=!1},n.$execute=function(){var e=Array.prototype.slice.call(arguments);t.apply(this,e),n.$cancelTimeout()},n},objectKeys:function(t){if(Object.keys)return Object.keys(t);var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},isEventable:function(t){return t.attachEvent&&t.detachEvent}}},function(t,e){var i=function(){this._silent_mode=!1,this.listeners={}};i.prototype={_silentStart:function(){this._silent_mode=!0},_silentEnd:function(){this._silent_mode=!1}},t.exports=function(t){var e=new i;t.attachEvent=function(t,i,n){t="ev_"+t.toLowerCase(),e.listeners[t]||(e.listeners[t]=function(t){var e={},i=0,n=function(){var i=!0;for(var n in e){var o=e[n].apply(t,arguments);i=i&&o}return i};return n.addEvent=function(t,o){if("function"==typeof t){var a;if(o&&o.id?a=o.id:(a=i,i++),o&&o.once){var r=t;t=function(){r(),n.removeEvent(a)}}return e[a]=t,a}return!1},n.removeEvent=function(t){delete e[t]},n.clear=function(){e={}},n}(this)),n&&n.thisObject&&(i=i.bind(n.thisObject));var o=t+":"+e.listeners[t].addEvent(i,n);return n&&n.id&&(o=n.id),o},t.attachAll=function(t){this.attachEvent("listen_all",t)},t.callEvent=function(t,i){if(e._silent_mode)return!0;var n="ev_"+t.toLowerCase(),o=e.listeners;return o.ev_listen_all&&o.ev_listen_all.apply(this,[t].concat(i)),!o[n]||o[n].apply(this,i)},t.checkEvent=function(t){return!!e.listeners["ev_"+t.toLowerCase()]},t.detachEvent=function(t){if(t){var i=e.listeners;for(var n in i)i[n].removeEvent(t);var o=t.split(":");if(i=e.listeners,2===o.length){var a=o[0];i[a]&&i[a].removeEvent(o[1])}}},t.detachAllEvents=function(){for(var t in e.listeners)e.listeners[t].clear()}}},function(t,e){function i(){}function n(){}n.prototype.render=i,n.prototype.set_value=i,n.prototype.get_value=i,n.prototype.focus=i,t.exports=function(t){return n}},function(t,e){var i="undefined"!=typeof window,n={isIE:i&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:i&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:i&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:i&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:i&&navigator.userAgent.indexOf("Opera")>=0,isChrome:i&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:i&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:i&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:i&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:i&&-1!=navigator.userAgent.indexOf("Edge"),isNode:!i||"undefined"==typeof navigator};t.exports=n},function(t,e){t.exports=function(t,e,i,n){var o=e.$getConfig().row_height;return{start:Math.max(0,Math.floor(n.y/o)-5),end:Math.min(i.count(),Math.ceil(n.y_end/o)+5)}}},function(t,e){t.exports=function(t){var e=function(){};return e.prototype={show:function(t,e,i,n){},hide:function(){},set_value:function(t,e,i,n){this.get_input(n).value=t},get_value:function(t,e,i){return this.get_input(i).value||""},is_changed:function(t,e,i,n){var o=this.get_value(e,i,n);return o&&t&&o.valueOf&&t.valueOf?o.valueOf()!=t.valueOf():o!=t},is_valid:function(t,e,i,n){return!0},save:function(t,e,i){},get_input:function(t){return t.querySelector("input")},focus:function(t){var e=this.get_input(t);e&&(e.focus&&e.focus(),e.select&&e.select())}},e}},function(t,e,i){var n=i(0),o=i(4),a=i(1),r=function(){"use strict";function t(t,e,i,r){t&&(this.$container=a.toNode(t),this.$parent=t),this.$config=n.mixin(e,{headerHeight:33}),this.$gantt=r,this.$domEvents=r._createDomEventScope(),this.$id=e.id||"c"+n.uid(),this.$name="cell",this.$factory=i,o(this)}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService("mouseEvents").detach("click","gantt_header_arrow",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents()},t.prototype.cell=function(t){return null},t.prototype.scrollTo=function(t,e){1*t==t&&(this.$view.scrollLeft=t),1*e==e&&(this.$view.scrollTop=e)},t.prototype.clear=function(){this.getNode().innerHTML="",this.getNode().className="gantt_layout_content",this.getNode().style.padding="0"},t.prototype.resize=function(t){if(this.$parent)return this.$parent.resize(t);!1===t&&(this.$preResize=!0);var e=this.$container,i=e.offsetWidth,n=e.offsetHeight,o=this.getSize();e===document.body&&(i=document.body.offsetWidth,n=document.body.offsetHeight),i<o.minWidth&&(i=o.minWidth),i>o.maxWidth&&(i=o.maxWidth),n<o.minHeight&&(n=o.minHeight),n>o.maxHeight&&(n=o.maxHeight),this.setSize(i,n),this.$preResize=!1},t.prototype.hide=function(){this._hide(!0),this.resize()},t.prototype.show=function(t){this._hide(!1),t&&this.$parent&&this.$parent.show(),this.resize()},t.prototype._hide=function(t){if(!0===t&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(!1===t&&!this.$view.parentNode){var e=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,e)}this.$config.hidden=t},t.prototype.$toHTML=function(t,e){void 0===t&&(t=""),e=[e||"",this.$config.css||""].join(" ");var i=this.$config,n="";return i.raw?t="string"==typeof i.raw?i.raw:"":(t||(t="<div class='gantt_layout_content' "+(e?" class='"+e+"' ":"")+" >"+(i.html||"")+"</div>"),i.header&&(n="<div class='gantt_layout_header'>"+(i.canCollapse?"<div class='gantt_layout_header_arrow'></div>":"")+"<div class='gantt_layout_header_content'>"+i.header+"</div></div>")),"<div class='gantt_layout_cell "+e+"' data-cell-id='"+this.$id+"'>"+n+t+"</div>"},t.prototype.$fill=function(t,e){this.$view=t,this.$parent=e,this.init()},t.prototype.getNode=function(){return this.$view.querySelector("gantt_layout_cell")||this.$view},t.prototype.init=function(){var t=this;this._headerClickHandler=function(e){a.locateAttribute(e,"data-cell-id")==t.$id&&t.toggle()},this.$gantt.$services.getService("mouseEvents").delegate("click","gantt_header_arrow",this._headerClickHandler),this.callEvent("onReady",[])},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize()},t.prototype.getSize=function(){var t={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e11,maxWidth:this.$config.maxWidth||1e11};if(this.$config.collapsed){var e="x"===this.$config.mode;t[e?"width":"height"]=t[e?"maxWidth":"maxHeight"]=this.$config.headerHeight}return t},t.prototype.getContentSize=function(){var t=this.$lastSize.contentX;t!==1*t&&(t=this.$lastSize.width);var e=this.$lastSize.contentY;return e!==1*e&&(e=this.$lastSize.height),{width:t,height:e}},t.prototype._getBorderSizes=function(){var t={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(t.left=1,t.horizontal++),this._currentBorders[this._borders.right]&&(t.right=1,t.horizontal++),this._currentBorders[this._borders.top]&&(t.top=1,t.vertical++),this._currentBorders[this._borders.bottom]&&(t.bottom=1,t.vertical++)),t},t.prototype.setSize=function(t,e){this.$view.style.width=t+"px",this.$view.style.height=e+"px";var i=this._getBorderSizes();this.$lastSize={x:t,y:e,contentX:t-i.horizontal,contentY:e-i.vertical},this.$config.header?this._sizeHeader():this._sizeContent()},t.prototype._borders={left:"gantt_layout_cell_border_left",right:"gantt_layout_cell_border_right",top:"gantt_layout_cell_border_top",bottom:"gantt_layout_cell_border_bottom"},t.prototype._setBorders=function(t,e){e||(e=this);var i=e.$view;for(var n in this._borders)a.removeClassName(i,this._borders[n]);"string"==typeof t&&(t=[t]);var o={};for(n=0;n<t.length;n++)a.addClassName(i,t[n]),o[t[n]]=!0;e._currentBorders=o},t.prototype._sizeContent=function(){var t=this.$view.childNodes[0];t&&"gantt_layout_content"==t.className&&(t.style.height=this.$lastSize.contentY+"px")},t.prototype._sizeHeader=function(){var t=this.$lastSize;t.contentY-=this.$config.headerHeight;var e=this.$view.childNodes[0],i=this.$view.childNodes[1],n="x"===this.$config.mode;if(this.$config.collapsed)if(i.style.display="none",n){e.className="gantt_layout_header collapsed_x",e.style.width=t.y+"px";var o=Math.floor(t.y/2-t.x/2);e.style.transform="rotate(90deg) translate("+o+"px, "+o+"px)",i.style.display="none"}else e.className="gantt_layout_header collapsed_y";else e.className=n?"gantt_layout_header":"gantt_layout_header vertical",e.style.width="auto",e.style.transform="",i.style.display="",i.style.height=t.contentY+"px";e.style.height=this.$config.headerHeight+"px"},t}();t.exports=r},function(t,e,i){var n=i(6);t.exports=function(t){return n.isNode||!t.$root}},function(t,e,i){(function(e){var i;i="undefined"!=typeof window?window:e,t.exports=i}).call(this,i(13))},function(t,e){t.exports=function(t){return t.config.smart_rendering&&t._smart_render}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.link=null,this.task=null,this.start_date=null,this.end_date=null,this.latestStart=null,this.earliestStart=null,this.earliestEnd=null,this.latestEnd=null,this.latestSchedulingStart=null,this.earliestSchedulingStart=null,this.latestSchedulingEnd=null,this.earliestSchedulingEnd=null,this.kind="asap",this.conflict=!1}return t.Create=function(e){var i=new t;if(e)for(var n in i)void 0!==e[n]&&(i[n]=e[n]);return i},t}();e.TaskPlan=n},function(t,e,i){var n=i(3),o={getHtmlSelect:function(t,e,i){var o="",r=this;return n.forEach(t=t||[],function(t){var e=[{key:"value",value:t.key}];i==t.key&&(e[e.length]={key:"selected",value:"selected"}),t.attributes&&(e=e.concat(t.attributes)),o+=r.getHtmlOption({innerHTML:t.label},e)}),a("select",{innerHTML:o},e)},getHtmlOption:function(t,e){return a("option",t,e)},getHtmlButton:function(t,e){return a("button",t,e)},getHtmlDiv:function(t,e){return a("div",t,e)},getHtmlLabel:function(t,e){return a("label",t,e)},getHtmlInput:function(t){return"<input"+r(t||[])+">"}};function a(t,e,i){return e=e||[],"<"+t+r(i||[])+">"+(e.innerHTML||"")+"</"+t+">"}function r(t){var e="";return n.forEach(t,function(t){e+=" "+t.key+"='"+t.value+"'"}),e}t.exports=o},function(t,e,i){var n=i(2),o=i(15);t.exports=function(t){var e=i(5)(t);function a(){return e.apply(this,arguments)||this}return n(a,e),a.prototype.render=function(t){var e="<div class='gantt_cal_ltext' style='height:"+(t.height||"23")+"px;'>";return(e+=o.getHtmlSelect(t.options,[{key:"style",value:"width:100%;"}]))+"</div>"},a.prototype.set_value=function(t,e,i,n){var o=t.firstChild;!o._dhx_onchange&&n.onchange&&(o.onchange=n.onchange,o._dhx_onchange=!0),void 0===e&&(e=(o.options[0]||{}).value),o.value=e||""},a.prototype.get_value=function(t){return t.firstChild.value},a.prototype.focus=function(e){t._focus(e.firstChild,!0)},a}},function(t,e,i){var n=i(0);t.exports={createDropTargetObject:function(t){var e={targetParent:null,targetIndex:0,targetId:null,child:!1,nextSibling:!1,prevSibling:!1};return t&&n.mixin(e,t,!0),e},nextSiblingTarget:function(t,e,i){var n=this.createDropTargetObject();return n.targetId=e,n.nextSibling=!0,n.targetParent=i.getParent(n.targetId),n.targetIndex=i.getBranchIndex(n.targetId),(i.getParent(t)!=n.targetParent||n.targetIndex<i.getBranchIndex(t))&&(n.targetIndex+=1),n},prevSiblingTarget:function(t,e,i){var n=this.createDropTargetObject();return n.targetId=e,n.prevSibling=!0,n.targetParent=i.getParent(n.targetId),n.targetIndex=i.getBranchIndex(n.targetId),i.getParent(t)==n.targetParent&&n.targetIndex>i.getBranchIndex(t)&&(n.targetIndex-=1),n},firstChildTarget:function(t,e,i){var n=this.createDropTargetObject();return n.targetId=e,n.targetParent=n.targetId,n.targetIndex=0,n.child=!0,n},lastChildTarget:function(t,e,i){var n=i.getChildren(e),o=this.createDropTargetObject();return o.targetId=n[n.length-1],o.targetParent=e,o.targetIndex=n.length,o.nextSibling=!0,o}}},function(t,e,i){var n=i(12);t.exports=function(t,e,i,o){var a=e.width[t];return!(a<=0||o.config.smart_rendering&&!n(o)&&!(e.left[t]-a<=i.x_end&&e.left[t]+a>=i.x))}},function(t,e){t.exports=function(t,e){var i=0,n=t.left.length-1;if(e)for(var o=0;o<t.left.length;o++){var a=t.left[o];if(a<e.x&&(i=o),a>e.x_end){n=o;break}}return{start:i,end:n}}},function(t,e){t.exports=function(t,e){var i=e.$getConfig();return{top:e.getItemTop(t.id),height:i.row_height,left:0,right:1/0}}},function(t,e,i){var n=i(3);function o(t){if(t._delayRender&&t._delayRender.$cancelTimeout(),t.$gantt){var e=t.$config.rowStore,i="_attached_"+e.$config.name;t[i]&&(t.$gantt.$data.tasksStore.detachEvent(t[i]),t[i]=null),e.$attachedResourceViewHandler&&(e.detachEvent(e.$attachedResourceViewHandler),e.$attachedResourceViewHandler=null)}}t.exports=function(t){var e=t.prototype.init,i=t.prototype.destructor;return{init:function(){e.apply(this,arguments),this._linkToTaskStore()},destructor:function(){o(this),i.apply(this,arguments)},_linkToTaskStore:function(){if(this.$config.rowStore&&this.$gantt.$data.tasksStore){var t=this.$gantt.$data.tasksStore,e=this.$config.rowStore;o(this);var i=this,a=n.delay(function(){i.$gantt.getState().lightbox?a():i.$config.rowStore.refresh()},300);this._delayRender=a;var r="_attached_"+e.$config.name;i[r]||(i[r]=t.attachEvent("onStoreUpdated",function(){return a.$pending||a(),!0})),this.$gantt.attachEvent("onDestroy",function(){return o(i),!0}),e.$attachedResourceViewHandler||(e.$attachedResourceViewHandler=e.attachEvent("onBeforeStoreUpdate",function(){if(i.$gantt.getState().lightbox)return!1;a.$pending&&a.$cancelTimeout(),i._updateNestedTasks()}))}},_updateNestedTasks:function(){var t=this.$gantt,e=t.getDatastore(t.config.resource_store);if(e.$config.fetchTasks){var i=t.config.resource_property;e.silent(function(){var n=[],o={},a={};for(var r in e.eachItem(function(r){"task"!=r.$role?t.getTaskBy(i,r.id).forEach(function(i){var a=t.copy(i);a.id=i.id+"_"+r.id,a.$task_id=i.id,a.$resource_id=r.id,a[e.$parentProperty]=r.id,a.$role="task",n.push(a),o[a.id]=!0}):a[r.id]=!0}),a)o[r]||e.removeItem(r);e.parse(n)})}}}}},function(t,e){t.exports=function(t){var e=[];return{delegate:function(i,n,o,a){e.push([i,n,o,a]),t.$services.getService("mouseEvents").delegate(i,n,o,a)},destructor:function(){for(var i=t.$services.getService("mouseEvents"),n=0;n<e.length;n++){var o=e[n];i.detach(o[0],o[1],o[2],o[3])}e=[]}}}},function(t,e,i){var n=i(1),o=i(0),a=i(4),r=i(187),s=i(37),c=i(186).default,l=function(t,e,i,n){this.$config=o.mixin({},e||{}),this.$gantt=n,this.$parent=t,a(this),this.$state={},o.mixin(this,s())};l.prototype={init:function(t){var e=this.$gantt,n=e._waiAria.gridAttrString(),o=e._waiAria.gridDataAttrString(),a=this.$getConfig(),s=a.reorder_grid_columns||!1;void 0!==this.$config.reorder_grid_columns&&(s=this.$config.reorder_grid_columns),t.innerHTML="<div class='gantt_grid' style='height:inherit;width:inherit;' "+n+"></div>",this.$grid=t.childNodes[0],this.$grid.innerHTML="<div class='gantt_grid_scale' "+e._waiAria.gridScaleRowAttrString()+"></div><div class='gantt_grid_data' "+o+"></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var l=a[this.$config.bind+"_attribute"];if(!l&&this.$config.bind&&(l="data-"+this.$config.bind+"-id"),this.$config.item_attribute=l||null,!this.$config.layers){var u=this._createLayerConfig();this.$config.layers=u}var d=r(e,this);d.init(),this._renderHeaderResizers=d.doOnRender,this._mouseDelegates=i(22)(e),this._addLayers(this.$gantt),this._initEvents(),s&&(this._columnDND=new c(e,this),this._columnDND.init()),this.callEvent("onReady",[])},_validateColumnWidth:function(t,e){var i=t[e];if(i&&"*"!=i){var n=this.$gantt,o=1*i;isNaN(o)?n.assert(!1,"Wrong "+e+" value of column "+t.name):t[e]=o}},setSize:function(t,e){this.$config.width=this.$state.width=t,this.$config.height=this.$state.height=e;for(var i,n=this.getGridColumns(),o=0,a=(u=this.$getConfig()).grid_elastic_columns,r=0,s=n.length;r<s;r++)this._validateColumnWidth(n[r],"min_width"),this._validateColumnWidth(n[r],"max_width"),this._validateColumnWidth(n[r],"width"),o+=1*n[r].width;if(!isNaN(o)&&this.$config.scrollable||(o=i=this._setColumnsWidth(t+1)),this.$config.scrollable&&a&&!isNaN(o)){var c=0;n.forEach(function(t){c+=t.min_width||u.min_grid_column_width});var l=Math.max(c,t);o=this._setColumnsWidth(l),i=t}this.$config.scrollable?(this.$grid_scale.style.width=o+"px",this.$grid_data.style.width=o+"px"):(this.$grid_scale.style.width="inherit",this.$grid_data.style.width="inherit"),this.$config.width-=1;var u=this.$getConfig();i!==t&&(void 0!==i?(u.grid_width=i,this.$config.width=i-1):isNaN(o)||(this._setColumnsWidth(o),u.grid_width=o,this.$config.width=o-1));var d=Math.max(this.$state.height-u.scale_height,0);this.$grid_data.style.height=d+"px",this.refresh()},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore,i=e?t.row_height*e.countVisible():0,n=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+i:0,scrollHeight:this.isVisible()?i:0,scrollWidth:this.isVisible()?n:0}},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._gridCacheAttached){var e=this;t._gridCacheAttached=t.attachEvent("onBeforeFilter",function(){e._resetTopPositionHeight()})}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t._gridCacheAttached&&(t.detachEvent(t._gridCacheAttached),t._gridCacheAttached=!1)}},refresh:function(){this._bindStore(),this._resetTopPositionHeight(),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader()},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,i=this.$config.height||0,n=this.$config.width||0;return{y:e,y_end:e+i,x:t,x_end:t+n,height:i,width:n}},scrollTo:function(t,e){if(this.isVisible()){var i=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*t==t&&(this.$config.scrollLeft=this.$state.scrollLeft=this.$grid.scrollLeft=t,i=!0),1*e==e&&(this.$config.scrollTop=this.$state.scrollTop=this.$grid_data.scrollTop=e,i=!0),i&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},getColumnIndex:function(t){for(var e=this.$getConfig().columns,i=0;i<e.length;i++)if(e[i].name==t)return i;return null},getColumn:function(t){var e=this.getColumnIndex(t);return null===e?null:this.$getConfig().columns[e]},getGridColumns:function(){return this.$getConfig().columns.slice()},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth},getItemHeight:function(){return this.$getConfig().row_height},_createLayerConfig:function(){var t=this;return[{renderer:this.$gantt.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return t.isVisible()}]}]},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var e=this,i=this.$gantt.$services.getService("layers"),n=i.getDataRender(this.$config.bind);n||(n=i.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$grid_data}}));for(var o=this.$config.layers,a=0;o&&a<o.length;a++){var r=o[a];r.view=this;var s=n.addLayer(r);this._taskLayers.push(s)}this._bindStore(),this._initSmartRenderingPlaceholder()}},_refreshPlaceholderOnStoreUpdate:function(t){var e=this.$getConfig(),i=this.$config.rowStore;if(i&&null===t&&this.isVisible()&&e.smart_rendering){var n;if(this.$config.scrollY){var o=this.$gantt.$ui.getView(this.$config.scrollY);o&&(n=o.getScrollState().scrollSize)}if(n||(n=i?e.row_height*i.countVisible():0),n){this.$rowsPlaceholder&&this.$rowsPlaceholder.parentNode&&this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);var a=this.$rowsPlaceholder=document.createElement("div");a.style.visibility="hidden",a.style.height=n+"px",a.style.width="1px",this.$grid_data.appendChild(a)}}},_initSmartRenderingPlaceholder:function(){var t=this.$config.rowStore;t&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=t.attachEvent("onStoreUpdated",o.bind(this._refreshPlaceholderOnStoreUpdate,this)))},_initEvents:function(){var t=this.$gantt;this._mouseDelegates.delegate("click","gantt_close",t.bind(function(t,e,i){var o=this.$config.rowStore;if(!o)return!0;var a=n.locateAttribute(t,this.$config.item_attribute);return a&&o.close(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid),this._mouseDelegates.delegate("click","gantt_open",t.bind(function(t,e,i){var o=this.$config.rowStore;if(!o)return!0;var a=n.locateAttribute(t,this.$config.item_attribute);return a&&o.open(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid)},_clearLayers:function(t){var e=this.$gantt.$services.getService("layers").getDataRender(this.$config.bind);if(this._taskLayers)for(var i=0;i<this._taskLayers.length;i++)e.removeLayer(this._taskLayers[i]);this._taskLayers=[]},_getColumnWidth:function(t,e,i){var n=Math.max(i,t.min_width||e.min_grid_column_width||10);return t.max_width&&(n=Math.min(n,t.max_width)),n},_checkGridColumnMinWidthLimits:function(t,e){for(var i=0,n=t.length;i<n;i++){var o=1*t[i].width;!t[i].min_width&&o<e.min_grid_column_width&&(t[i].min_width=o)}},_getGridWidthLimits:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),i=0,n=0,o=0;o<e.length;o++)i+=e[o].min_width?e[o].min_width:t.min_grid_column_width,void 0!==n&&(n=e[o].max_width?n+e[o].max_width:void 0);return this._checkGridColumnMinWidthLimits(e,t),[i,n]},_setColumnsWidth:function(t,e){var i=this.$getConfig(),n=this.getGridColumns(),o=0,a=t;e=window.isNaN(e)?-1:e;for(var r=0,s=n.length;r<s;r++)o+=1*n[r].width;if(window.isNaN(o))for(this._calculateGridWidth(),o=0,r=0,s=n.length;r<s;r++)o+=1*n[r].width;var c=a-o,l=0;for(r=0;r<e+1;r++)l+=n[r].width;for(o-=l,r=e+1;r<n.length;r++){var u=n[r],d=Math.round(c*(u.width/o));c<0?u.min_width&&u.width+d<u.min_width?d=u.min_width-u.width:!u.min_width&&i.min_grid_column_width&&u.width+d<i.min_grid_column_width&&(d=i.min_grid_column_width-u.width):u.max_width&&u.width+d>u.max_width&&(d=u.max_width-u.width),o-=u.width,u.width+=d,c-=d}for(var h=c>0?1:-1;c>0&&1===h||c<0&&-1===h;){var p=c;for(r=e+1;r<n.length;r++){var f;if((f=n[r].width+h)==this._getColumnWidth(n[r],i,f)&&(c-=h,n[r].width=f),!c)break}if(p==c)break}return c&&e>-1&&(f=n[e].width+c)==this._getColumnWidth(n[e],i,f)&&(n[e].width=f),this._getColsTotalWidth()},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),e=0,i=0;i<t.length;i++){var n=parseFloat(t[i].width);if(window.isNaN(n))return!1;e+=n}return e},_calculateGridWidth:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),i=0,n=[],o=[],a=0;a<e.length;a++){var r=parseFloat(e[a].width);window.isNaN(r)&&(r=t.min_grid_column_width||10,n.push(a)),o[a]=r,i+=r}var s=this._getGridWidth()+1;if(t.autofit||n.length){var c=s-i;if(t.autofit&&!t.grid_elastic_columns)for(a=0;a<o.length;a++){var l=Math.round(c/(o.length-a));o[a]+=l,(u=this._getColumnWidth(e[a],t,o[a]))!=o[a]&&(l=u-o[a],o[a]=u),c-=l}else if(n.length)for(a=0;a<n.length;a++){l=Math.round(c/(n.length-a));var u,d=n[a];o[d]+=l,(u=this._getColumnWidth(e[d],t,o[d]))!=o[d]&&(l=u-o[d],o[d]=u),c-=l}for(a=0;a<o.length;a++)e[a].width=o[a]}else{var h=s!=i;this.$config.width=i-1,t.grid_width=i,h&&this.$parent._setContentSize(this.$config.width,null)}},_renderGridHeader:function(){var t=this.$gantt,e=this.$getConfig(),i=this.$gantt.locale,n=this.$gantt.templates,o=this.getGridColumns();e.rtl&&(o=o.reverse());for(var a=[],r=0,s=i.labels,c=e.scale_height-1,l=0;l<o.length;l++){var u=l==o.length-1,d=o[l];d.name||(d.name=t.uid()+"");var h=1*d.width,p=this._getGridWidth();u&&p>r+h&&(d.width=h=p-r),r+=h;var f=t._sort&&d.name==t._sort.name?"<div class='gantt_sort gantt_"+t._sort.direction+"'></div>":"",g=["gantt_grid_head_cell","gantt_grid_head_"+d.name,u?"gantt_last_cell":"",n.grid_header_class(d.name,d)].join(" "),m=d.label||s["column_"+d.name]||s[d.name],v="<div class='"+g+"' style='width:"+(h-(u?1:0))+"px;' "+t._waiAria.gridScaleCellAttrString(d,m=m||"")+" data-column-id='"+d.name+"' column_id='"+d.name+"'>"+m+f+"</div>";a.push(v)}this.$grid_scale.style.height=e.scale_height+"px",this.$grid_scale.style.lineHeight=c+"px",this.$grid_scale.innerHTML=a.join(""),this._renderHeaderResizers&&this._renderHeaderResizers()},_getGridWidth:function(){return this.$config.width},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}},t.exports=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ASAP="asap",t.ALAP="alap",t.SNET="snet",t.SNLT="snlt",t.FNET="fnet",t.FNLT="fnlt",t.MSO="mso",t.MFO="mfo"}(e.ConstraintTypes||(e.ConstraintTypes={}))},function(t,e){t.exports=function(t){return{getVirtualRoot:function(){return t.mixin(t.getSubtaskDates(),{id:t.config.root_id,type:t.config.types.project,$source:[],$target:[],$virtual:!0})},getLinkedTasks:function(e,i){var n=[e],o=!1;t._isLinksCacheEnabled()||(t._startLinksCache(),o=!0);for(var a=[],r={},s={},c=0;c<n.length;c++)this._getLinkedTasks(n[c],r,i,s);for(var c in s)a.push(s[c]);return o&&t._endLinksCache(),a},_collectRelations:function(e,i,n,o){var a,r=t._getSuccessors(e,i),s=[];n&&(s=t._getPredecessors(e,i));for(var c=[],l=0;l<r.length;l++)o[a=r[l].hashSum]||(o[a]=!0,c.push(r[l]));for(l=0;l<s.length;l++)o[a=s[l].hashSum]||(o[a]=!0,c.push(s[l]));return c},_getLinkedTasks:function(e,i,n,o){for(var a,r=void 0===e?t.config.root_id:e,s=(i={},{}),c=[{from:r,includePredecessors:n,isChild:!1}];c.length;){var l=c.pop(),u=l.isChild;if(!i[r=l.from]){a=t.isTaskExists(r)?t.getTask(r):this.getVirtualRoot(),i[r]=!0;for(var d=this._collectRelations(a,u,n,s),h=0;h<d.length;h++){var p=d[h];o[p.hashSum]=p,i[p.target]||c.push({from:p.target,includePredecessors:!0,isChild:p.sourceParent==p.targetParent})}if(t.hasChild(a.id)){var f=t.getChildren(a.id);for(h=0;h<f.length;h++)i[f[h]]||c.push({from:f[h],includePredecessors:!0,isChild:!0})}}}return o}}}},,function(t,e,i){},function(t,e){t.exports=function(t){var e={};return t.$data.tasksStore.attachEvent("onStoreUpdated",function(){e={}}),function(i,n,o,a){var r=i.id+"_"+n+"_"+o.unit+"_"+o.step;return e[r]?e[r]:e[r]=function(e,i,n,o){g="task"==e.$role?[]:t.getTaskBy(i,e.id);for(var a=n.unit,r=n.step,s={},c=0;c<g.length;c++)for(var l=g[c],u=t.date[a+"_start"](new Date(l.start_date));u<l.end_date;){var d=u;if(u=t.date.add(u,r,a),t.isWorkTime({date:d,task:l,unit:a})){var h=d.valueOf();s[h]||(s[h]=[]),s[h].push(l)}}var p,f,g,m=[],v=o.$getConfig();for(c=0;c<n.trace_x.length;c++)p=new Date(n.trace_x[c]),f=t.date.add(p,r,a),(g=s[p.valueOf()]||[]).length||v.resource_render_empty_cells?m.push({start_date:p,end_date:f,tasks:g}):m.push(null);return m}(i,n,o,a)}}},function(t,e){t.exports=function(t){function e(e,a){if(!t._isAllowedUnscheduledTask(e)&&t._isTaskInTimelineLimits(e)){var r=a.getItemPosition(e),s=a.$getConfig(),c=a.$getTemplates(),l=a.getItemHeight(),u=t.getTaskType(e.type),d=Math.floor((t.config.row_height-l)/2);u==s.types.milestone&&s.link_line_width>1&&(d+=1),u==s.types.milestone&&(r.left-=Math.round(l/2),r.width=l);var h=document.createElement("div"),p=Math.round(r.width);a.$config.item_attribute&&(h.setAttribute(a.$config.item_attribute,e.id),h.setAttribute(a.$config.bind+"_id",e.id)),s.show_progress&&u!=s.types.milestone&&function(e,i,n,o,a){var r=1*e.progress||0;n=Math.max(n-2,0);var s=document.createElement("div"),c=Math.round(n*r);c=Math.min(n,c),e.progressColor&&(s.style.backgroundColor=e.progressColor,s.style.opacity=1),s.style.width=c+"px",s.className="gantt_task_progress",s.innerHTML=a.progress_text(e.start_date,e.end_date,e),o.rtl&&(s.style.position="absolute",s.style.right="0px");var l=document.createElement("div");if(l.className="gantt_task_progress_wrapper",l.appendChild(s),i.appendChild(l),t.config.drag_progress&&!t.isReadonly(e)){var u=document.createElement("div"),d=c;o.rtl&&(d=n-c),u.style.left=d+"px",u.className="gantt_task_progress_drag",s.appendChild(u),i.appendChild(u)}}(e,h,p,s,c);var f=function(e,i,n){var o=document.createElement("div");return t.getTaskType(e.type)!=t.config.types.milestone&&(o.innerHTML=n.task_text(e.start_date,e.end_date,e)),o.className="gantt_task_content",o}(e,0,c);e.textColor&&(f.style.color=e.textColor),h.appendChild(f);var g=function(e,i,n,o){var a=o.$getConfig(),r=["gantt_task_line"];i&&r.push(i);var s=t.getState(),c=t.getTask(n);if(t.getTaskType(c.type)==a.types.milestone?r.push("gantt_milestone"):t.getTaskType(c.type)==a.types.project&&r.push("gantt_project"),r.push("gantt_bar_"+t.getTaskType(c.type)),t.isSummaryTask(c)&&r.push("gantt_dependent_task"),t.isSplitTask(c)&&(a.open_split_tasks&&!c.$open||!a.open_split_tasks)&&r.push("gantt_split_parent"),a.select_task&&t.isSelectedTask(n)&&r.push("gantt_selected"),n==s.drag_id&&(r.push("gantt_drag_"+s.drag_mode),s.touch_drag&&r.push("gantt_touch_"+s.drag_mode)),s.link_source_id==n&&r.push("gantt_link_source"),s.link_target_id==n&&r.push("gantt_link_target"),a.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(c)&&r.push("gantt_critical_task"),s.link_landing_area&&s.link_target_id&&s.link_source_id&&s.link_target_id!=s.link_source_id){var l=s.link_to_start,u=t.isLinkAllowed(s.link_source_id,n,s.link_from_start,l);r.push(u?l?"link_start_allow":"link_finish_allow":l?"link_start_deny":"link_finish_deny")}return r.join(" ")}(0,c.task_class(e.start_date,e.end_date,e),e.id,a);(e.color||e.progressColor||e.textColor)&&(g+=" gantt_task_inline_color"),h.className=g;var m=["left:"+r.left+"px","top:"+(d+r.top)+"px","height:"+l+"px","line-height:"+Math.max(l<30?l-2:l,0)+"px","width:"+p+"px"];e.color&&m.push("background-color:"+e.color),e.textColor&&m.push("color:"+e.textColor),h.style.cssText=m.join(";");var v=function(t,e,o){var a="gantt_left "+n(!e.rtl,t);return i(t,o.leftside_text,a)}(e,s,c);v&&h.appendChild(v),(v=function(t,e,o){var a="gantt_right "+n(!!e.rtl,t);return i(t,o.rightside_text,a)}(e,s,c))&&h.appendChild(v),t._waiAria.setTaskBarAttr(e,h);var b=t.getState();return t.isReadonly(e)||(s.drag_resize&&!t.isSummaryTask(e)&&u!=s.types.milestone&&o(h,"gantt_task_drag",e,function(t){var e=document.createElement("div");return e.className=t,e},s),s.drag_links&&s.show_links&&o(h,"gantt_link_control",e,function(t){var e=document.createElement("div");e.className=t,e.style.cssText=["height:"+l+"px","line-height:"+l+"px"].join(";");var i=document.createElement("div");i.className="gantt_link_point";var n=!1;return b.link_source_id&&s.touch&&(n=!0),i.style.display=n?"block":"",e.appendChild(i),e},s)),h}}function i(t,e,i){if(!e)return null;var n=e(t.start_date,t.end_date,t);if(!n)return null;var o=document.createElement("div");return o.className="gantt_side_content "+i,o.innerHTML=n,o}function n(e,i){var n=function(e){return e?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]}}(e);for(var o in n)for(var a=i[o],r=0;r<a.length;r++)for(var s=t.getLink(a[r]),c=0;c<n[o].length;c++)if(s.type==n[o][c])return"gantt_link_crossing";return""}function o(e,i,n,o,a){var r,s=t.getState();+n.start_date>=+s.min_date&&((r=o([i,a.rtl?"task_right":"task_left","task_start_date"].join(" "))).setAttribute("data-bind-property","start_date"),e.appendChild(r)),+n.end_date<=+s.max_date&&((r=o([i,a.rtl?"task_left":"task_right","task_end_date"].join(" "))).setAttribute("data-bind-property","end_date"),e.appendChild(r))}return function(i,n){var o=n.$getConfig().type_renderers[t.getTaskType(i.type)],a=e;return o?o.call(t,i,function(e){return a.call(t,e,n)},n):a.call(t,i,n)}}},function(t,e){t.exports=function(t,e,i,n){if(!t.start_date||!t.end_date)return null;var o=i.$getConfig(),a=i.getItemTop(t.id);if(a>e.y_end||a+o.row_height<e.y)return!1;var r=i.posFromDate(t.start_date),s=i.posFromDate(t.end_date),c=Math.min(r,s)-200,l=Math.max(r,s)+200;return!(c>e.x_end||l<e.x)}},function(t,e,i){var n=i(0),o=i(32),a=i(21),r=i(2),s=function(t){function e(e,i,n,o){var a=t.apply(this,arguments)||this;return a.$config.bindLinks=null,a}return r(e,t),n.mixin(e.prototype,{init:function(){void 0===this.$config.bind&&(this.$config.bind=this.$getConfig().resource_store),t.prototype.init.apply(this,arguments)},_createLayerConfig:function(){var t=this,e=function(){return t.isVisible()};return{tasks:[{renderer:this.$gantt.$ui.layers.resourceRow(),container:this.$task_bars,filter:[e]},{renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[e]}],links:[]}}},!0),n.mixin(e.prototype,a(e),!0),e}(o);t.exports=s},function(t,e,i){var n=i(40),o=i(4),a=i(0),r=i(37),s=i(113),c=function(t,e,i,s){this.$config=a.mixin({},e||{}),this.$scaleHelper=new n(s),this.$gantt=s,this._posFromDateCache={},this._timelineDragScroll=null,a.mixin(this,r()),o(this)};function l(t,e){for(var i,n,o,a=0,r=t.length-1;a<=r;)if(n=+t[i=Math.floor((a+r)/2)],o=+t[i-1],n<e)a=i+1;else{if(!(n>e)){for(;+t[i]==+t[i+1];)i++;return i}if(!isNaN(o)&&o<e)return i-1;r=i-1}return t.length-1}c.prototype={init:function(t){t.innerHTML+="<div class='gantt_task' style='width:inherit;height:inherit;'></div>",this.$task=t.childNodes[0],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML="<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>",this.$task_bg=this.$task_data.childNodes[0],this.$task_links=this.$task_data.childNodes[1],this.$task_bars=this.$task_data.childNodes[2],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var e=this.$getConfig(),i=e[this.$config.bind+"_attribute"],n=e[this.$config.bindLinks+"_attribute"];!i&&this.$config.bind&&(i="data-"+this.$config.bind+"-id"),!n&&this.$config.bindLinks&&(n="data-"+this.$config.bindLinks+"-id"),this.$config.item_attribute=i||null,this.$config.link_attribute=n||null;var o=this._createLayerConfig();this.$config.layers||(this.$config.layers=o.tasks),this.$config.linkLayers||(this.$config.linkLayers=o.links),this._attachLayers(this.$gantt),this.callEvent("onReady",[]),this.$gantt.ext.dragTimeline&&(this._timelineDragScroll=this.$gantt.ext.dragTimeline.create(),this._timelineDragScroll.attach(this))},setSize:function(t,e){var i=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*e===e){this.$config.height=e;var n=Math.max(this.$config.height-i.scale_height);this.$task_data.style.height=n+"px"}this.refresh(),this.$task_bg.style.backgroundImage="",this.$task_bg.style.height=i.smart_rendering&&this.$config.rowStore?i.row_height*this.$config.rowStore.countVisible()+"px":"";for(var o=this._tasks,a=this.$task_data.childNodes,r=0,s=a.length;r<s;r++){var c=a[r];c.hasAttribute("data-layer")&&c.style&&(c.style.width=o.full_width+"px")}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore,i=e?t.row_height*e.countVisible():0,n=this.isVisible()?this._tasks.full_width:0;return{x:this.isVisible()?this.$config.width:0,y:this.isVisible()?this.$config.height:0,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+i:0,scrollHeight:this.isVisible()?i:0,scrollWidth:this.isVisible()?n:0}},scrollTo:function(t,e){if(this.isVisible()){var i=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*e===e&&(this.$config.scrollTop=e,this.$task_data.scrollTop=this.$config.scrollTop,i=!0),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales(),i=!0),i&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.getViewPort();this.$task_scale.innerHTML=this._getScaleChunkHtml(this._scales,t.x,t.x_end)}},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,i=this.$config.height||0,n=this.$config.width||0;return{y:e,y_end:e+i,x:t,x_end:t+n,height:i,width:n}},_createLayerConfig:function(){var t=this,e=function(){return t.isVisible()};return{tasks:[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar(),container:this.$task_bars,filter:[e]},{renderer:this.$gantt.$ui.layers.taskSplitBar(),filter:[e],container:this.$task_bars,append:!0},{renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[e]}],links:[{expose:!0,renderer:this.$gantt.$ui.layers.link(),container:this.$task_links,filter:[e]}]}},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var e=this,i=this.$gantt.$services.getService("layers");if(this.$config.bind){this._bindStore();var n=i.getDataRender(this.$config.bind);n||(n=i.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$task_data}})),n.container=function(){return e.$task_data};for(var o=this.$config.layers,a=0;o&&a<o.length;a++){"string"==typeof(l=o[a])&&(l=this.$gantt.$ui.layers[l]()),("function"==typeof l||l&&l.render&&l.update)&&(l={renderer:l}),l.view=this;var r=n.addLayer(l);this._taskLayers.push(r),l.expose&&(this._taskRenderer=n.getLayer(r))}this._initStaticBackgroundRender()}if(this.$config.bindLinks){e.$config.linkStore=e.$gantt.getDatastore(e.$config.bindLinks);var s=i.getDataRender(this.$config.bindLinks);s||(s=i.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return e.$task_data}}));var c=this.$config.linkLayers;for(a=0;c&&a<c.length;a++){var l;"string"==typeof l&&(l=this.$gantt.$ui.layers[l]()),(l=c[a]).view=this;var u=s.addLayer(l);this._taskLayers.push(u),c[a].expose&&(this._linkRenderer=s.getLayer(u))}}},_initStaticBackgroundRender:function(){var t=this,e=s.create(),i=t.$config.rowStore;i&&(this._staticBgHandler=i.attachEvent("onStoreUpdated",function(i,n,o){if(null===i&&t.isVisible()){var a=t.$getConfig();if(a.static_background){var r=t.$gantt.getDatastore(t.$config.bind),s=t.$task_bg_static;s||((s=document.createElement("div")).className="gantt_task_bg",t.$task_bg_static=s,t.$task_bg.nextSibling?t.$task_data.insertBefore(s,t.$task_bg.nextSibling):t.$task_data.appendChild(s)),r&&e.render(s,a,t.getScale(),a.row_height*r.countVisible())}else a.static_background&&t.$task_bg_static&&t.$task_bg_static.parentNode&&t.$task_bg_static.parentNode.removeChild(t.$task_bg_static)}}),this.attachEvent("onDestroy",function(){e.destroy()}),this._initStaticBackgroundRender=function(){})},_clearLayers:function(t){var e=this.$gantt.$services.getService("layers"),i=e.getDataRender(this.$config.bind),n=e.getDataRender(this.$config.bindLinks);if(this._taskLayers)for(var o=0;o<this._taskLayers.length;o++)i.removeLayer(this._taskLayers[o]);if(this._linkLayers)for(o=0;o<this._linkLayers.length;o++)n.removeLayer(this._linkLayers[o]);this._linkLayers=[],this._taskLayers=[]},_render_tasks_scales:function(){var t=this.$getConfig(),e="",i=0,n=0,o=this.$gantt.getState();if(this.isVisible()){var a=this.$scaleHelper,r=this._getScales();n=t.scale_height;var s=this.$config.width;"x"!=t.autosize&&"xy"!=t.autosize||(s=Math.max(t.autosize_min_width,0));var c=a.prepareConfigs(r,t.min_column_width,s,n-1,o.min_date,o.max_date,t.rtl),l=this._tasks=c[c.length-1];this._scales=c,this._posFromDateCache={},e=this._getScaleChunkHtml(c,0,this.$config.width),i=l.full_width+"px",n+="px"}this.$task_scale.style.height=n,this.$task_data.style.width=this.$task_scale.style.width=i,this.$task_scale.innerHTML=e},_getScaleChunkHtml:function(t,e,i){for(var n=[],o=this.$gantt.templates.scale_row_class,a=0;a<t.length;a++){var r="gantt_scale_line",s=o(t[a]);s&&(r+=" "+s),n.push('<div class="'+r+'" style="height:'+t[a].height+"px;position:relative;line-height:"+t[a].height+'px">'+this._prepareScaleHtml(t[a],e,i)+"</div>")}return n.join("")},_prepareScaleHtml:function(t,e,i){var n=this.$getConfig(),o=this.$gantt.templates,a=[],r=null,s=null,c=t.format||t.template||t.date;"string"==typeof c&&(c=this.$gantt.date.date_to_str(c));var u=0,d=t.count;!n.smart_scales||isNaN(e)||isNaN(i)||(u=l(t.left,e),d=l(t.left,i)+1),s=t.css||function(){},!t.css&&n.inherit_scale_class&&(s=o.scale_cell_class);for(var h=u;h<d&&t.trace_x[h];h++){r=new Date(t.trace_x[h]);var p=c.call(this,r),f=t.width[h],g="",m="",v="";if(f){g="width:"+f+"px;height:"+t.height+"px;"+(n.smart_scales?"position:absolute;left:"+t.left[h]+"px":""),v="gantt_scale_cell"+(h==t.count-1?" gantt_last_cell":""),(m=s.call(this,r))&&(v+=" "+m);var b="<div class='"+v+"'"+this.$gantt._waiAria.getTimelineCellAttr(p)+" style='"+g+"'>"+p+"</div>";a.push(b)}}return a.join("")},dateFromPos:function(t){var e=this._tasks;if(t<0||t>e.full_width||!e.full_width)return null;var i=l(this._tasks.left,t),n=e.width[i]||e.col_width,o=0;n&&(o=(t-this._tasks.left[i])/n,e.rtl&&(o=1-o));var a=0;return o&&(a=this._getColumnDuration(e,e.trace_x[i])),new Date(e.trace_x[i].valueOf()+Math.round(o*a))},posFromDate:function(t){if(!this.isVisible())return 0;if(!t)return 0;var e=String(t.valueOf());if(void 0!==this._posFromDateCache[e])return this._posFromDateCache[e];var i=this.columnIndexByDate(t);this.$gantt.assert(i>=0,"Invalid day index");var n=Math.floor(i),o=i%1,a=this._tasks.left[Math.min(n,this._tasks.width.length-1)];n==this._tasks.width.length&&(a+=this._tasks.width[this._tasks.width.length-1]),o&&(a+=n<this._tasks.width.length?this._tasks.width[n]*(o%1):1);var r=Math.round(a);return this._posFromDateCache[e]=r,Math.round(r)},_getNextVisibleColumn:function(t,e,i){for(var n=+e[t],o=t;i[n];)n=+e[++o];return o},_getPrevVisibleColumn:function(t,e,i){for(var n=+e[t],o=t;i[n];)n=+e[--o];return o},_getClosestVisibleColumn:function(t,e,i){var n=this._getNextVisibleColumn(t,e,i);return e[n]||(n=this._getPrevVisibleColumn(t,e,i)),n},columnIndexByDate:function(t){var e=new Date(t).valueOf(),i=this._tasks.trace_x_ascending,n=this._tasks.ignore_x,o=this.$gantt.getState();if(e<=o.min_date)return this._tasks.rtl?i.length:0;if(e>=o.max_date)return this._tasks.rtl?0:i.length;var a=l(i,e),r=this._getClosestVisibleColumn(a,i,n),s=this._tasks.trace_index_transition;if(!i[r])return s?s[0]:0;var c=(t-i[r])/this._getColumnDuration(this._tasks,i[r]);return s?s[r]+(1-c):r+c},getItemPosition:function(t,e,i){var n,o,a;return this._tasks.rtl?(o=this.posFromDate(e||t.start_date),n=this.posFromDate(i||t.end_date)):(n=this.posFromDate(e||t.start_date),o=this.posFromDate(i||t.end_date)),a=Math.max(o-n,0),{left:n,top:this.getItemTop(t.id),height:this.getItemHeight(),width:a}},getItemHeight:function(){var t=this.$getConfig(),e=t.task_height;return"full"==e&&(e=t.row_height-(t.task_height_offset||5)),e=Math.min(e,t.row_height),Math.max(e,0)},getScale:function(){return this._tasks},_getScales:function(){var t=this.$getConfig(),e=this.$scaleHelper,i=[e.primaryScale(t)].concat(e.getSubScales(t));return e.sortScales(i),i},_getColumnDuration:function(t,e){return this.$gantt.date.add(e,t.step,t.unit)-e},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._timelineCacheAttached){var e=this;t._timelineCacheAttached=t.attachEvent("onBeforeFilter",function(){e._resetTopPositionHeight()})}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t._timelineCacheAttached&&(t.detachEvent(t._timelineCacheAttached),t._timelineCacheAttached=!1)}},refresh:function(){this._bindStore(),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._resetTopPositionHeight(),this._initStaticBackgroundRender(),this._render_tasks_scales()},destructor:function(){this._clearLayers(this.$gantt),this._unbindStore(),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this._timelineDragScroll&&(this._timelineDragScroll.destructor(),this._timelineDragScroll=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}},t.exports=c},function(t,e,i){var n=i(2),o=i(1),a=function(t){"use strict";function e(e,i,n){var o=t.apply(this,arguments)||this;return e&&(o.$root=!0),o._parseConfig(i),o.$name="layout",o}return n(e,t),e.prototype.destructor=function(){this.$container&&this.$view&&o.removeNode(this.$view);for(var e=0;e<this.$cells.length;e++)this.$cells[e].destructor();this.$cells=[],t.prototype.destructor.call(this)},e.prototype._resizeScrollbars=function(t,e){var i,n=!1,o=[],a=[];function r(t){t.$parent.show(),n=!0,o.push(t)}function s(t){t.$parent.hide(),n=!0,a.push(t)}for(var c=0;c<e.length;c++)t[(i=e[c]).$config.scroll]||i.shouldHide()?s(i):i.shouldShow()?r(i):i.isVisible()?o.push(i):a.push(i);var l={};for(c=0;c<o.length;c++)o[c].$config.group&&(l[o[c].$config.group]=!0);for(c=0;c<a.length;c++)(i=a[c]).$config.group&&l[i.$config.group]&&r(i);return n},e.prototype._syncCellSizes=function(t,e){if(t){var i={};return this._eachChild(function(t){t.$config.group&&"scrollbar"!=t.$name&&"resizer"!=t.$name&&(i[t.$config.group]||(i[t.$config.group]=[]),i[t.$config.group].push(t))}),i[t]&&this._syncGroupSize(i[t],e),i[t]}},e.prototype._syncGroupSize=function(t,e){if(t.length)for(var i=t[0].$parent._xLayout?"width":"height",n=t[0].$parent.getNextSibling(t[0].$id)?1:-1,o=0;o<t.length;o++){var a=t[o].getSize(),r=n>0?t[o].$parent.getNextSibling(t[o].$id):t[o].$parent.getPrevSibling(t[o].$id);"resizer"==r.$name&&(r=n>0?r.$parent.getNextSibling(r.$id):r.$parent.getPrevSibling(r.$id));var s=r.getSize();if(r[i]){var c=a.gravity+s.gravity,l=a[i]+s[i],u=c/l;t[o].$config.gravity=u*e,r.$config[i]=l-e,r.$config.gravity=c-u*e}else t[o].$config[i]=e;var d=this.$gantt.$ui.getView("grid");d&&t[o].$content===d&&!d.$config.scrollable&&(this.$gantt.config.grid_width=e)}},e.prototype.resize=function(e){var i=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent("onBeforeResize",[]),i=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),i){var n=[];n=(n=(n=n.concat(this.getCellsByType("viewCell"))).concat(this.getCellsByType("viewLayout"))).concat(this.getCellsByType("hostCell"));for(var o=this.getCellsByType("scroller"),a=0;a<n.length;a++)n[a].$config.hidden||n[a].setContentSize();var r=this._getAutosizeMode(this.$config.autosize),s=this._resizeScrollbars(r,o);if(this.$config.autosize&&(this.autosize(this.$config.autosize),s=!0),s)for(this.resize(),a=0;a<n.length;a++)n[a].$config.hidden||n[a].setContentSize();this.callEvent("onResize",[])}i&&(this._resizeInProgress=!1)},e.prototype._eachChild=function(t,e){if(t(e=e||this),e.$cells)for(var i=0;i<e.$cells.length;i++)this._eachChild(t,e.$cells[i])},e.prototype.isChild=function(t){var e=!1;return this._eachChild(function(i){i!==t&&i.$content!==t||(e=!0)}),e},e.prototype.getCellsByType=function(t){var i=[];if(t===this.$name&&i.push(this),this.$content&&this.$content.$name==t&&i.push(this.$content),this.$cells)for(var n=0;n<this.$cells.length;n++){var o=e.prototype.getCellsByType.call(this.$cells[n],t);o.length&&i.push.apply(i,o)}return i},e.prototype.getNextSibling=function(t){var e=this.cellIndex(t);return e>=0&&this.$cells[e+1]?this.$cells[e+1]:null},e.prototype.getPrevSibling=function(t){var e=this.cellIndex(t);return e>=0&&this.$cells[e-1]?this.$cells[e-1]:null},e.prototype.cell=function(t){for(var e=0;e<this.$cells.length;e++){var i=this.$cells[e];if(i.$id===t)return i;var n=i.cell(t);if(n)return n}},e.prototype.cellIndex=function(t){for(var e=0;e<this.$cells.length;e++)if(this.$cells[e].$id===t)return e;return-1},e.prototype.moveView=function(t,e){if(this.$cells[e]!==t)return window.alert("Not implemented");var i=this.$view;(e+=this.$config.header?1:0)>=i.childNodes.length?i.appendChild(t.$view):i.insertBefore(t.$view,i.childNodes[e])},e.prototype._parseConfig=function(t){this.$cells=[],this._xLayout=!t.rows;for(var e=t.rows||t.cols||t.views,i=0;i<e.length;i++){var n=e[i];n.mode=this._xLayout?"x":"y";var o=this.$factory.initUI(n,this);o?(o.$parent=this,this.$cells.push(o)):(e.splice(i,1),i--)}},e.prototype.getCells=function(){return this.$cells},e.prototype.render=function(){var t=o.insertNode(this.$container,this.$toHTML());this.$fill(t,null),this.callEvent("onReady",[]),this.resize(),this.render=this.resize},e.prototype.$fill=function(t,e){this.$view=t,this.$parent=e;for(var i=o.getChildNodes(t,"gantt_layout_cell"),n=i.length-1;n>=0;n--){var a=this.$cells[n];a.$fill(i[n],this),a.$config.hidden&&a.$view.parentNode.removeChild(a.$view)}},e.prototype.$toHTML=function(){for(var e=this._xLayout?"x":"y",i=[],n=0;n<this.$cells.length;n++)i.push(this.$cells[n].$toHTML());return t.prototype.$toHTML.call(this,i.join(""),(this.$root?"gantt_layout_root ":"")+"gantt_layout gantt_layout_"+e)},e.prototype.getContentSize=function(t){for(var e,i,n,o=0,a=0,r=0;r<this.$cells.length;r++)(i=this.$cells[r]).$config.hidden||(e=i.getContentSize(t),"scrollbar"===i.$config.view&&t[i.$config.scroll]&&(e.height=0,e.width=0),i.$config.resizer&&(this._xLayout?e.height=0:e.width=0),n=i._getBorderSizes(),this._xLayout?(o+=e.width+n.horizontal,a=Math.max(a,e.height+n.vertical)):(o=Math.max(o,e.width+n.horizontal),a+=e.height+n.vertical));return o+=(n=this._getBorderSizes()).horizontal,a+=n.vertical,this.$root&&(o+=1,a+=1),{width:o,height:a}},e.prototype._cleanElSize=function(t){return 1*(t||"").toString().replace("px","")||0},e.prototype._getBoxStyles=function(t){var e,i=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n={boxSizing:"border-box"==(e=window.getComputedStyle?window.getComputedStyle(t,null):{width:t.clientWidth,height:t.clientHeight}).boxSizing};e.MozBoxSizing&&(n.boxSizing="border-box"==e.MozBoxSizing);for(var o=0;o<i.length;o++)n[i[o]]=e[i[o]]?this._cleanElSize(e[i[o]]):0;var a={horPaddings:n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth,vertPaddings:n.paddingTop+n.paddingBottom+n.borderTopWidth+n.borderBottomWidth,borderBox:n.boxSizing,innerWidth:n.width,innerHeight:n.height,outerWidth:n.width,outerHeight:n.height};return a.borderBox?(a.innerWidth-=a.horPaddings,a.innerHeight-=a.vertPaddings):(a.outerWidth+=a.horPaddings,a.outerHeight+=a.vertPaddings),a},e.prototype._getAutosizeMode=function(t){var e={x:!1,y:!1};return"xy"===t?e.x=e.y=!0:"y"===t||!0===t?e.y=!0:"x"===t&&(e.x=!0),e},e.prototype.autosize=function(t){var e=this._getAutosizeMode(t),i=this._getBoxStyles(this.$container),n=this.getContentSize(t),o=this.$container;e.x&&(i.borderBox&&(n.width+=i.horPaddings),o.style.width=n.width+"px"),e.y&&(i.borderBox&&(n.height+=i.vertPaddings),o.style.height=n.height+"px")},e.prototype.getSize=function(){this._sizes=[];for(var e=0,i=0,n=1e11,o=0,a=1e11,r=0,s=0;s<this.$cells.length;s++){var c=this._sizes[s]=this.$cells[s].getSize();this.$cells[s].$config.hidden||(this._xLayout?(e+=!c.width&&c.minWidth?c.minWidth:c.width,n+=c.maxWidth,i+=c.minWidth,o=Math.max(o,c.height),a=Math.min(a,c.maxHeight),r=Math.max(r,c.minHeight)):(o+=!c.height&&c.minHeight?c.minHeight:c.height,a+=c.maxHeight,r+=c.minHeight,e=Math.max(e,c.width),n=Math.min(n,c.maxWidth),i=Math.max(i,c.minWidth)))}var l=t.prototype.getSize.call(this);return l.maxWidth>=1e5&&(l.maxWidth=n),l.maxHeight>=1e5&&(l.maxHeight=a),l.minWidth=l.minWidth!=l.minWidth?0:l.minWidth,l.minHeight=l.minHeight!=l.minHeight?0:l.minHeight,this._xLayout?(l.minWidth+=this.$config.margin*this.$cells.length||0,l.minWidth+=2*this.$config.padding||0,l.minHeight+=2*this.$config.padding||0):(l.minHeight+=this.$config.margin*this.$cells.length||0,l.minHeight+=2*this.$config.padding||0),l},e.prototype._calcFreeSpace=function(t,e,i){var n=i?e.minWidth:e.minHeight,o=e.maxWidth,a=t;return a?(a>o&&(a=o),a<n&&(a=n),this._free-=a):((a=Math.floor(this._free/this._gravity*e.gravity))>o&&(this._free-=a=o,this._gravity-=e.gravity),a<n&&(this._free-=a=n,this._gravity-=e.gravity)),a},e.prototype._calcSize=function(t,e,i){var n=t,o=i?e.minWidth:e.minHeight,a=i?e.maxWidth:e.maxHeight;return n||(n=Math.floor(this._free/this._gravity*e.gravity)),n>a&&(n=a),n<o&&(n=o),n},e.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var t=this._xLayout?this._borders.right:this._borders.bottom,e=this.$cells,i=e.length-1,n=i;n>=0;n--)if(!e[n].$config.hidden){i=n;break}for(n=0;n<e.length;n++)if(!e[n].$config.hidden){var o=n>=i,a="";!o&&e[n+1]&&"scrollbar"==e[n+1].$config.view&&(this._xLayout?o=!0:a="gantt_layout_cell_border_transparent"),this._setBorders(o?[]:[t,a],e[n])}},e.prototype._updateCellVisibility=function(){for(var t,e=this._visibleCells||{},i=!this._visibleCells,n={},o=0;o<this._sizes.length;o++)t=this.$cells[o],!i&&t.$config.hidden&&e[t.$id]?t._hide(!0):t.$config.hidden||e[t.$id]||t._hide(!1),t.$config.hidden||(n[t.$id]=!0);this._visibleCells=n},e.prototype.setSize=function(e,i){this._configureBorders(),t.prototype.setSize.call(this,e,i),i=this.$lastSize.contentY,e=this.$lastSize.contentX;var n,o,a=this.$config.padding||0;this.$view.style.padding=a+"px",this._gravity=0,this._free=this._xLayout?e:i,this._free-=2*a,this._updateCellVisibility();for(var r=0;r<this._sizes.length;r++)if(!(n=this.$cells[r]).$config.hidden){var s=this.$config.margin||0;"resizer"!=n.$name||s||(s=-1),r!==this.$cells.length-1&&(n.$view.style[this._xLayout?"marginRight":"marginBottom"]=s+"px",this._free-=s),o=this._sizes[r],this._xLayout?o.width||(this._gravity+=o.gravity):o.height||(this._gravity+=o.gravity)}for(r=0;r<this._sizes.length;r++)if(!(n=this.$cells[r]).$config.hidden){var c=(o=this._sizes[r]).width,l=o.height;this._xLayout?this._calcFreeSpace(c,o,!0):this._calcFreeSpace(l,o,!1)}for(r=0;r<this.$cells.length;r++)if(!(n=this.$cells[r]).$config.hidden){o=this._sizes[r];var u=void 0,d=void 0;this._xLayout?(u=this._calcSize(o.width,o,!0),d=i-2*a):(u=e-2*a,d=this._calcSize(o.height,o,!1)),n.setSize(u,d)}},e}(i(9));t.exports=a},function(t,e){t.exports=function(t,e){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(176),o=i(175),a=i(174);e.LargerUnitsCache=a.LargerUnitsCache,e.createCacheObject=function(){return"undefined"!=typeof Map?new n.WorkUnitsMapCache:new o.WorkUnitsObjectCache}},function(t,e,i){var n=i(0),o=i(3);function a(t,e,i,n,o){return this.date=t,this.unit=e,this.task=i,this.id=n,this.calendar=o,this}function r(t,e,i,n,o,a){return this.date=t,this.dir=e,this.unit=i,this.task=n,this.id=o,this.calendar=a,this}function s(t,e,i,n,o,a,r){return this.start_date=t,this.duration=e,this.unit=i,this.step=n,this.task=o,this.id=a,this.calendar=r,this}function c(t,e,i,n){return this.start_date=t,this.end_date=e,this.task=i,this.calendar=n,this.unit=null,this.step=null,this}t.exports=function(t){return{getWorkHoursArguments:function(){var e=arguments[0];if(e=o.isDate(e)?{date:e}:n.mixin({},e),!o.isValidDate(e.date))throw t.assert(!1,"Invalid date argument for getWorkHours method"),new Error("Invalid date argument for getWorkHours method");return e},setWorkTimeArguments:function(){return arguments[0]},unsetWorkTimeArguments:function(){return arguments[0]},isWorkTimeArguments:function(){var e,i=arguments[0];if(i instanceof a)return i;if((e=i.date?new a(i.date,i.unit,i.task,null,i.calendar):new a(arguments[0],arguments[1],arguments[2],null,arguments[3])).unit=e.unit||t.config.duration_unit,!o.isValidDate(e.date))throw t.assert(!1,"Invalid date argument for isWorkTime method"),new Error("Invalid date argument for isWorkTime method");return e},getClosestWorkTimeArguments:function(e){var i,n=arguments[0];if(n instanceof r)return n;if(i=o.isDate(n)?new r(n):new r(n.date,n.dir,n.unit,n.task,null,n.calendar),n.id&&(i.task=n),i.dir=n.dir||"any",i.unit=n.unit||t.config.duration_unit,!o.isValidDate(i.date))throw t.assert(!1,"Invalid date argument for getClosestWorkTime method"),new Error("Invalid date argument for getClosestWorkTime method");return i},_getStartEndConfig:function(e){var i,n=c;if(e instanceof n)return e;if(o.isDate(e)?i=new n(arguments[0],arguments[1],arguments[2],arguments[3]):(i=new n(e.start_date,e.end_date,e.task),e.id&&(i.task=e)),i.unit=i.unit||t.config.duration_unit,i.step=i.step||t.config.duration_step,i.start_date=i.start_date||i.start||i.date,!o.isValidDate(i.start_date))throw t.assert(!1,"Invalid start_date argument for getDuration method"),new Error("Invalid start_date argument for getDuration method");if(!o.isValidDate(i.end_date))throw t.assert(!1,"Invalid end_date argument for getDuration method"),new Error("Invalid end_date argument for getDuration method");return i},getDurationArguments:function(t,e,i,n){return this._getStartEndConfig.apply(this,arguments)},hasDurationArguments:function(t,e,i,n){return this._getStartEndConfig.apply(this,arguments)},calculateEndDateArguments:function(e,i,n,a){var r,c=arguments[0];if(c instanceof s)return c;if(r=o.isDate(c)?new s(arguments[0],arguments[1],arguments[2],void 0,arguments[3],void 0,arguments[4]):new s(c.start_date,c.duration,c.unit,c.step,c.task,null,c.calendar),c.id&&(r.task=c,r.unit=null,r.step=null),r.unit=r.unit||t.config.duration_unit,r.step=r.step||t.config.duration_step,!o.isValidDate(r.start_date))throw t.assert(!1,"Invalid start_date argument for calculateEndDate method"),new Error("Invalid start_date argument for calculateEndDate method");return r}}}},function(t,e){t.exports=function(){var t={};return{_resetTopPositionHeight:function(){t={}},getRowTop:function(t){return t*this.$getConfig().row_height},getItemTop:function(e){if(this.$config.rowStore){if(void 0!==t[e])return t[e];var i=this.$config.rowStore;if(!i)return 0;var n=i.getIndexById(e);if(-1===n&&i.getParent&&i.exists(e)){var o=i.getParent(e);if(i.exists(o)){var a=i.getItem(o);if(this.$gantt.isSplitTask(a))return this.getRowTop(i.getIndexById(a.id))}}return t[e]=this.getRowTop(n),t[e]}return 0}}}},function(t,e){function i(t,e,i){for(var n=0;n<e.length;n++)t.isLinkExists(e[n])&&(i[e[n]]=t.getLink(e[n]))}function n(t,e,n){i(t,e.$source,n),i(t,e.$target,n)}t.exports={getSubtreeLinks:function(t,e){var i={};return t.isTaskExists(e)&&n(t,t.getTask(e),i),t.eachTask(function(e){n(t,e,i)},e),i},getSubtreeTasks:function(t,e){var i={};return t.eachTask(function(t){i[t.id]=t},e),i}}},function(t,e,i){var n=i(0);t.exports=function(t){var e=t.date,i=t.$services;return{getSum:function(t,e,i){void 0===i&&(i=t.length-1),void 0===e&&(e=0);for(var n=0,o=e;o<=i;o++)n+=t[o];return n},setSumWidth:function(t,e,i,n){var o=e.width;if(void 0===n&&(n=o.length-1),void 0===i&&(i=0),!(i>o.length-1||n-i+1<=0||n>o.length-1)){var a=t-this.getSum(o,i,n);this.adjustSize(a,o,i,n),this.adjustSize(-a,o,n+1),e.full_width=this.getSum(o)}},splitSize:function(t,e){for(var i=[],n=0;n<e;n++)i[n]=0;return this.adjustSize(t,i),i},adjustSize:function(t,e,i,n){i||(i=0),void 0===n&&(n=e.length-1);for(var o=n-i+1,a=this.getSum(e,i,n),r=i;r<=n;r++){var s=Math.floor(t*(a?e[r]/a:1/o));a-=e[r],t-=s,o--,e[r]+=s}e[e.length-1]+=t},sortScales:function(t){function i(t,i){var n=new Date(1970,0,1);return e.add(n,i,t)-n}t.sort(function(t,e){return i(t.unit,t.step)<i(e.unit,e.step)?1:i(t.unit,t.step)>i(e.unit,e.step)?-1:0});for(var n=0;n<t.length;n++)t[n].index=n},_isLegacyMode:function(e){var i=e||t.config;return i.scale_unit||i.date_scale||i.subscales},_prepareScaleObject:function(e){var i=e.format;return i||(i=e.template||e.date||"%d %M"),"string"==typeof i&&(i=t.date.date_to_str(i)),{unit:e.unit||"day",step:e.step||1,format:i,css:e.css}},primaryScale:function(e){var n,o=i.getService("templateLoader"),a=this._isLegacyMode(e),r=e||t.config;if(a)o.initTemplate("date_scale",void 0,void 0,r,t.config.templates),n={unit:t.config.scale_unit,step:t.config.step,template:t.templates.date_scale,date:t.config.date_scale,css:t.templates.scale_cell_class};else{var s=r.scales[0];n={unit:s.unit,step:s.step,template:s.template,format:s.format,date:s.date,css:s.css||t.templates.scale_cell_class}}return this._prepareScaleObject(n)},getSubScales:function(e){var i=this._isLegacyMode(e),n=e||t.config;return(i?n.subscales||[]:n.scales.slice(1)).map((function(t){return this._prepareScaleObject(t)}).bind(this))},prepareConfigs:function(t,e,i,n,o,a,r){for(var s=this.splitSize(n,t.length),c=i,l=[],u=t.length-1;u>=0;u--){var d=u==t.length-1,h=this.initScaleConfig(t[u],o,a);d&&this.processIgnores(h),this.initColSizes(h,e,c,s[u]),this.limitVisibleRange(h),d&&(c=h.full_width),l.unshift(h)}for(u=0;u<l.length-1;u++)this.alineScaleColumns(l[l.length-1],l[u]);for(u=0;u<l.length;u++)r&&this.reverseScale(l[u]),this.setPosSettings(l[u]);return l},reverseScale:function(t){t.width=t.width.reverse(),t.trace_x=t.trace_x.reverse();var e=t.trace_indexes;t.trace_indexes={},t.trace_index_transition={},t.rtl=!0;for(var i=0;i<t.trace_x.length;i++)t.trace_indexes[t.trace_x[i].valueOf()]=i,t.trace_index_transition[e[t.trace_x[i].valueOf()]]=i;return t},setPosSettings:function(t){for(var e=0,i=t.trace_x.length;e<i;e++)t.left.push((t.width[e-1]||0)+(t.left[e-1]||0))},_ignore_time_config:function(i,n){if(t.config.skip_off_time){for(var o=!0,a=i,r=0;r<n.step;r++)r&&(a=e.add(i,r,n.unit)),o=o&&!this.isWorkTime(a,n.unit);return o}return!1},processIgnores:function(t){t.ignore_x={},t.display_count=t.count},initColSizes:function(t,i,n,o){var a=n;t.height=o;var r=void 0===t.display_count?t.count:t.display_count;r||(r=1),t.col_width=Math.floor(a/r),i&&t.col_width<i&&(t.col_width=i,a=t.col_width*r),t.width=[];for(var s=t.ignore_x||{},c=0;c<t.trace_x.length;c++)if(s[t.trace_x[c].valueOf()]||t.display_count==t.count)t.width[c]=0;else{var l=1;"month"==t.unit&&(l=Math.round((e.add(t.trace_x[c],t.step,t.unit)-t.trace_x[c])/864e5)),t.width[c]=l}this.adjustSize(a-this.getSum(t.width),t.width),t.full_width=this.getSum(t.width)},initScaleConfig:function(t,e,i){var o=n.mixin({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(e),max_date:new Date(i)},t);return this.eachColumn(t.unit,t.step,e,i,function(t){o.count++,o.trace_x.push(new Date(t)),o.trace_indexes[t.valueOf()]=o.trace_x.length-1}),o.trace_x_ascending=o.trace_x.slice(),o},iterateScales:function(t,e,i,n,o){for(var a=e.trace_x,r=i||0,s=n||t.trace_x.length-1,c=0,l=1;l<a.length;l++){var u=t.trace_indexes[+a[l]];void 0!==u&&u<=s&&(o&&o.apply(this,[c,l,r,u]),r=u,c=l)}},alineScaleColumns:function(t,e,i,n){this.iterateScales(t,e,i,n,function(i,n,o,a){var r=this.getSum(t.width,o,a-1);this.getSum(e.width,i,n-1)!=r&&this.setSumWidth(r,e,i,n-1)})},eachColumn:function(i,n,o,a,r){var s=new Date(o),c=new Date(a);e[i+"_start"]&&(s=e[i+"_start"](s));var l=new Date(s);for(+l>=+c&&(c=e.add(l,n,i));+l<+c;){r.call(this,new Date(l));var u=l.getTimezoneOffset();l=e.add(l,n,i),l=t._correct_dst_change(l,u,n,i),e[i+"_start"]&&(l=e[i+"_start"](l))}},limitVisibleRange:function(t){var i=t.trace_x,n=0;if(+i[0]<+t.min_date&&0!=t.width.length-1){var o=Math.floor(t.width[0]*((i[1]-t.min_date)/(i[1]-i[0])));n+=t.width[0]-o,t.width[0]=o,i[0]=new Date(t.min_date)}var a=i.length-1,r=i[a],s=e.add(r,t.step,t.unit);if(+s>+t.max_date&&a>0&&(o=t.width[a]-Math.floor(t.width[a]*((s-t.max_date)/(s-r))),n+=t.width[a]-o,t.width[a]=o),n){for(var c=this.getSum(t.width),l=0,u=0;u<t.width.length;u++){var d=Math.floor(n*(t.width[u]/c));t.width[u]+=d,l+=d}this.adjustSize(n-l,t.width)}}}}},function(t,e,i){var n=i(39);t.exports=function(t){var e=new n(t);return e.processIgnores=function(e){var i=e.count;if(e.ignore_x={},t.ignore_time||t.config.skip_off_time){var n=t.ignore_time||function(){return!1};i=0;for(var o=0;o<e.trace_x.length;o++)n.call(t,e.trace_x[o])||this._ignore_time_config.call(t,e.trace_x[o],e)?(e.ignore_x[e.trace_x[o].valueOf()]=!0,e.ignored_colls=!0):i++}e.display_count=i},e}},function(t,e,i){var n=i(40),o=i(39);t.exports=function(t){(function(t){var e=function(t){var e=new o(t).primaryScale(),i=e.unit,a=e.step;if(t.config.scale_offset_minimal){var r=new n(t),s=[r.primaryScale()].concat(r.getSubScales());r.sortScales(s),i=s[s.length-1].unit,a=s[s.length-1].step||1}return{unit:i,step:a}}(t),i=e.unit,a=e.step,r=function(t,e){var i={start_date:null,end_date:null};if(e.config.start_date&&e.config.end_date){i.start_date=e.date[t+"_start"](new Date(e.config.start_date));var n=new Date(e.config.end_date),o=e.date[t+"_start"](new Date(n));n=+n!=+o?e.date.add(o,1,t):o,i.end_date=n}return i}(i,t);r.start_date&&r.end_date||((r=t.getSubtaskDates()).start_date&&r.end_date||(r={start_date:new Date,end_date:new Date}),r.start_date=t.date[i+"_start"](r.start_date),r.start_date=t.calculateEndDate({start_date:t.date[i+"_start"](r.start_date),duration:-1,unit:i,step:a}),r.end_date=t.date[i+"_start"](r.end_date),r.end_date=t.calculateEndDate({start_date:r.end_date,duration:2,unit:i,step:a})),t._min_date=r.start_date,t._max_date=r.end_date})(t),function(t){!t.config.fit_tasks||+t._min_date==+t._min_date&&+t._max_date==+t._max_date||(t.render(),t.callEvent("onScaleAdjusted",[]))}(t)}},function(t,e,i){var n=i(43),o=i(0),a=i(3),r=i(44);r.default&&(r=r.default);var s=function(t){return r.apply(this,[t]),this._branches={},this.pull={},this.$initItem=t.initItem,this.$parentProperty=t.parentProperty||"parent",this.$getRootId="function"!=typeof t.rootId?function(t){return function(){return t}}(t.rootId||0):t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=n.$create(),this.fullOrder=n.$create(),this._searchVisibleOrder={},this._skip_refresh=!1,this._ganttConfig=null,t.getConfig&&(this._ganttConfig=t.getConfig()),this.attachEvent("onFilterItem",function(t,e){var i=!1;this._ganttConfig&&(i=this._ganttConfig.open_split_tasks);var n=!0;return this.eachParent(function(t){n=n&&t.$open&&(i||!this._isSplitItem(t))},e),!!n}),this};s.prototype=o.mixin({_buildTree:function(t){for(var e=null,i=this.$getRootId(),n=0,a=t.length;n<a;n++)this.setParent(e=t[n],this.getParent(e)||i);for(n=0,a=t.length;n<a;n++)this._add_branch(e=t[n]),e.$level=this.calculateItemLevel(e),o.defined(e.$open)||(e.$open=o.defined(e.open)?e.open:this.$openInitially());this._updateOrder()},_isSplitItem:function(t){return"split"==t.render&&this.hasChild(t.id)},parse:function(t){this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this._buildTree(e),this.filter(),this.callEvent("onParse",[e])},_addItemInner:function(t,e){var i=this.getParent(t);o.defined(i)||(i=this.$getRootId(),this.setParent(t,i));var n=this.getIndexById(i)+Math.min(Math.max(e,0),this.visibleOrder.length);1*n!==n&&(n=void 0),r.prototype._addItemInner.call(this,t,n),this.setParent(t,i),t.hasOwnProperty("$rendered_parent")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,e)},_changeIdInner:function(t,e){var i=this.getChildren(t),n=this._searchVisibleOrder[t];r.prototype._changeIdInner.call(this,t,e);var o=this.getParent(e);this._replace_branch_child(o,t,e);for(var a=0;a<i.length;a++)this.setParent(this.getItem(i[a]),e);this._searchVisibleOrder[e]=n,delete this._branches[t]},_traverseBranches:function(t,e){e=e||this.$getRootId();var i=this._branches[e];if(i)for(var n=0;n<i.length;n++){var o=i[n];t.call(this,o),this._branches[o]&&this._traverseBranches(t,o)}},_updateOrder:function(t){this.fullOrder=n.$create(),this._traverseBranches(function(t){this.fullOrder.push(t)}),t&&r.prototype._updateOrder.call(this,t)},_removeItemInner:function(t){var e=[];this.eachItem(function(t){e.push(t)},t),e.push(this.getItem(t));for(var i=0;i<e.length;i++)this._move_branch(e[i],this.getParent(e[i]),null),r.prototype._removeItemInner.call(this,e[i].id),this._move_branch(e[i],this.getParent(e[i]),null)},move:function(t,e,i){var n=arguments[3];if(n){if(n===t)return;i=this.getParent(n),e=this.getBranchIndex(n)}if(t!=i){i=i||this.$getRootId();var o=this.getItem(t),a=this.getParent(o.id),r=this.getChildren(i);if(-1==e&&(e=r.length+1),a==i&&this.getBranchIndex(t)==e)return;if(!1===this.callEvent("onBeforeItemMove",[t,i,e]))return!1;this._replace_branch_child(a,t),(r=this.getChildren(i))[e]?r=r.slice(0,e).concat([t]).concat(r.slice(e)):r.push(t),this.setParent(o,i),this._branches[i]=r;var s=this.calculateItemLevel(o)-o.$level;o.$level+=s,this.eachItem(function(t){t.$level+=s},o.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(i)+e),this.callEvent("onAfterItemMove",[t,i,e]),this.refresh()}},getBranchIndex:function(t){for(var e=this.getChildren(this.getParent(t)),i=0;i<e.length;i++)if(e[i]==t)return i;return-1},hasChild:function(t){return o.defined(this._branches[t])&&this._branches[t].length},getChildren:function(t){return o.defined(this._branches[t])?this._branches[t]:n.$create()},isChildOf:function(t,e){if(!this.exists(t))return!1;if(e===this.$getRootId())return!0;if(!this.hasChild(e))return!1;var i=this.getItem(t),n=this.getParent(t);if(this.getItem(e).$level>=i.$level)return!1;for(;i&&this.exists(n);){if((i=this.getItem(n))&&i.id==e)return!0;n=this.getParent(i)}return!1},getSiblings:function(t){if(!this.exists(t))return n.$create();var e=this.getParent(t);return this.getChildren(e)},getNextSibling:function(t){for(var e=this.getSiblings(t),i=0,n=e.length;i<n;i++)if(e[i]==t)return e[i+1]||null;return null},getPrevSibling:function(t){for(var e=this.getSiblings(t),i=0,n=e.length;i<n;i++)if(e[i]==t)return e[i-1]||null;return null},getParent:function(t){var e;return(e=void 0!==t.id?t:this.getItem(t))?e[this.$parentProperty]:this.$getRootId()},clearAll:function(){this._branches={},r.prototype.clearAll.call(this)},calculateItemLevel:function(t){var e=0;return this.eachParent(function(){e++},t),e},_setParentInner:function(t,e,i){i||(t.hasOwnProperty("$rendered_parent")?this._move_branch(t,t.$rendered_parent,e):this._move_branch(t,t[this.$parentProperty],e))},setParent:function(t,e,i){this._setParentInner(t,e,i),t[this.$parentProperty]=e},eachItem:function(t,e){e=e||this.$getRootId();var i=this.getChildren(e);if(i)for(var n=0;n<i.length;n++){var o=this.pull[i[n]];t.call(this,o),this.hasChild(o.id)&&this.eachItem(t,o.id)}},eachParent:function(t,e){for(var i={},n=e,o=this.getParent(n);this.exists(o);){if(i[o])throw new Error("Invalid tasks tree. Cyclic reference has been detected on task "+o);i[o]=!0,n=this.getItem(o),t.call(this,n),o=this.getParent(n)}},_add_branch:function(t,e,i){var o=void 0===i?this.getParent(t):i;this.hasChild(o)||(this._branches[o]=n.$create());for(var a=this.getChildren(o),r=!1,s=0,c=a.length;s<c;s++)if(a[s]==t.id){r=!0;break}r||(1*e==e?a.splice(e,0,t.id):a.push(t.id),t.$rendered_parent=o)},_move_branch:function(t,e,i){this._replace_branch_child(e,t.id),this.exists(i)||i==this.$getRootId()?this._add_branch(t,void 0,i):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem(function(t){t.$level=this.calculateItemLevel(t)},t.id)},_replace_branch_child:function(t,e,i){var o=this.getChildren(t);if(o&&void 0!==t){for(var a=n.$create(),r=0;r<o.length;r++)o[r]!=e?a.push(o[r]):i&&a.push(i);this._branches[t]=a}},sort:function(t,e,i){this.exists(i)||(i=this.$getRootId()),t||(t="order");var n="string"==typeof t?function(e,i){return e[t]==i[t]||a.isDate(e[t])&&a.isDate(i[t])&&e[t].valueOf()==i[t].valueOf()?0:e[t]>i[t]?1:-1}:t;if(e){var o=n;n=function(t,e){return o(e,t)}}var r=this.getChildren(i);if(r){for(var s=[],c=r.length-1;c>=0;c--)s[c]=this.getItem(r[c]);for(s.sort(n),c=0;c<s.length;c++)r[c]=s[c].id,this.sort(t,e,r[c])}},filter:function(t){for(var e in this.pull)this.pull[e].$rendered_parent!==this.getParent(this.pull[e])&&this._move_branch(this.pull[e],this.pull[e].$rendered_parent,this.getParent(this.pull[e]));return r.prototype.filter.apply(this,arguments)},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this.callEvent("onItemOpen",[t]))},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this.callEvent("onItemClose",[t]))},destructor:function(){r.prototype.destructor.call(this),this._branches=null}},r.prototype),t.exports=s},function(t,e,i){var n=i(0),o={$create:function(t){return n.mixin(t||[],this)},$removeAt:function(t,e){t>=0&&this.splice(t,e||1)},$remove:function(t){this.$removeAt(this.$find(t))},$insertAt:function(t,e){if(e||0===e){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},$find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},$each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},$map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this},$filter:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])||(this.splice(i,1),i--);return this}};t.exports=o},function(t,e,i){var n=i(43),o=i(0),a=i(4),r=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=n.$create(),this.fullOrder=n.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},this.$config=t,a(this),this};r.prototype={_parseInner:function(t){for(var e=null,i=[],n=0,a=t.length;n<a;n++)e=t[n],this.$initItem&&(e=this.$initItem(o.copy(e))),this.callEvent("onItemLoading",[e])&&(this.pull.hasOwnProperty(e.id)||this.fullOrder.push(e.id),i.push(e),this.pull[e.id]=e);return i},parse:function(t){this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this.refresh(),this.callEvent("onParse",[e])},getItem:function(t){return this.pull[t]},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder)},updateItem:function(t,e){if(o.defined(e)||(e=this.getItem(t)),!this._skip_refresh&&!1===this.callEvent("onBeforeUpdate",[e.id,e]))return!1;this.pull[t]=e,this._skip_refresh||(this.callEvent("onAfterUpdate",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"update"]))},_removeItemInner:function(t){this._updateOrder(function(){this.$remove(t)}),delete this.pull[t]},removeItem:function(t){var e=this.getItem(t);if(!this._skip_refresh&&!1===this.callEvent("onBeforeDelete",[e.id,e]))return!1;this._removeItemInner(t),this._skip_refresh||(this.filter(),this.callEvent("onAfterDelete",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"delete"]))},_addItemInner:function(t,e){if(this.exists(t.id))this.silent(function(){this.updateItem(t.id,t)});else{var i=this.visibleOrder,n=i.length;(!o.defined(e)||e<0)&&(e=n),e>n&&(e=Math.min(i.length,e))}this.pull[t.id]=t,this._skip_refresh||this._updateOrder(function(){-1===this.$find(t.id)&&this.$insertAt(t.id,e)}),this.filter()},isVisible:function(t){return this.visibleOrder.$find(t)>-1},getVisibleItems:function(){return this.getIndexRange()},addItem:function(t,e){return o.defined(t.id)||(t.id=o.uid()),this.$initItem&&(t=this.$initItem(t)),!(!this._skip_refresh&&!1===this.callEvent("onBeforeAdd",[t.id,t]))&&(this._addItemInner(t,e),this._skip_refresh||(this.callEvent("onAfterAdd",[t.id,t]),this.callEvent("onStoreUpdated",[t.id,t,"add"])),t.id)},_changeIdInner:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]);var i=this._searchVisibleOrder[t];this.pull[e].id=e,this._updateOrder(function(){this[this.$find(t)]=e}),this._searchVisibleOrder[e]=i,delete this._searchVisibleOrder[t],delete this.pull[t]},changeId:function(t,e){this._changeIdInner(t,e),this.callEvent("onIdChange",[t,e])},exists:function(t){return!!this.pull[t]},_moveInner:function(t,e){var i=this.getIdByIndex(t);this._updateOrder(function(){this.$removeAt(t),this.$insertAt(i,Math.min(this.length,e))})},move:function(t,e){var i=this.getIdByIndex(t),n=this.getItem(i);this._moveInner(t,e),this._skip_refresh||this.callEvent("onStoreUpdated",[n.id,n,"move"])},clearAll:function(){this.pull={},this.visibleOrder=n.$create(),this.fullOrder=n.$create(),this._skip_refresh||(this.callEvent("onClearAll",[]),this.refresh())},silent:function(t,e){this._skip_refresh=!0,t.call(e||this),this._skip_refresh=!1},arraysEqual:function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},refresh:function(t,e){if(!this._skip_refresh&&!1!==this.callEvent("onBeforeStoreUpdate",t?[t,this.pull[t],"paint"]:[null,null,null])){if(t){if(!e&&!this._quick_refresh){var i=this.visibleOrder;this.filter(),this.arraysEqual(i,this.visibleOrder)||(t=void 0)}}else this.filter();this.callEvent("onStoreUpdated",t?[t,this.pull[t],"paint"]:[null,null,null])}},count:function(){return this.fullOrder.length},countVisible:function(){return this.visibleOrder.length},sort:function(t){},serialize:function(){},eachItem:function(t){for(var e=0;e<this.fullOrder.length;e++)t.call(this,this.pull[this.fullOrder[e]])},filter:function(t){this.callEvent("onBeforeFilter",[]);var e=n.$create();this.eachItem(function(t){this.callEvent("onFilterItem",[t.id,t])&&e.push(t.id)}),this.visibleOrder=e,this._searchVisibleOrder={};for(var i=0;i<this.visibleOrder.length;i++)this._searchVisibleOrder[this.visibleOrder[i]]=i;this.callEvent("onFilter",[])},getIndexRange:function(t,e){e=Math.min(e||1/0,this.countVisible()-1);for(var i=[],n=t||0;n<=e;n++)i.push(this.getItem(this.visibleOrder[n]));return i},getItems:function(){var t=[];for(var e in this.pull)t.push(this.pull[e]);return t},getIdByIndex:function(t){return this.visibleOrder[t]},getIndexById:function(t){var e=this._searchVisibleOrder[t];return void 0===e&&(e=-1),e},_getNullIfUndefined:function(t){return void 0===t?null:t},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0])},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1])},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1])},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1])},destructor:function(){this.detachAllEvents(),this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null}},t.exports=r},function(t,e){var i,n,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var t=s(h);u=!0;for(var e=l.length;e;){for(c=l,l=[];++d<e;)c&&c[d].run();d=-1,e=l.length}c=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t,e){if(!e)return!0;if(t._on_timeout)return!1;var i=Math.ceil(1e3/e);return i<2||(setTimeout(function(){delete t._on_timeout},i),t._on_timeout=!0,!0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this;for(var i in this.addExtension=function(t,i){e._extensions[t]=i},this.getExtension=function(t){return e._extensions[t]},this._extensions={},t)this._extensions[i]=t[i]}},function(t,e,i){var n=i(0);t.exports=function t(e,i){e=e||n.event,i=i||n.eventRemove;var o=[],a={attach:function(t,i,n,a){o.push({element:t,event:i,callback:n,capture:a}),e(t,i,n,a)},detach:function(t,e,n,a){i(t,e,n,a);for(var r=0;r<o.length;r++){var s=o[r];s.element===t&&s.event===e&&s.callback===n&&s.capture===a&&(o.splice(r,1),r--)}},detachAll:function(){for(var t=o.slice(),e=0;e<t.length;e++){var i=t[e];a.detach(i.element,i.event,i.callback,i.capture),a.detach(i.element,i.event,i.callback,void 0),a.detach(i.element,i.event,i.callback,!1),a.detach(i.element,i.event,i.callback,!0)}o.splice(0,o.length)},extend:function(){return t(this.event,this.eventRemove)}};return a}},function(t,e,i){var n=i(3);t.exports=function(){return{getVertices:function(t){for(var e,i={},n=0,o=t.length;n<o;n++)i[(e=t[n]).target]=e.target,i[e.source]=e.source;var a=[];for(var n in i)a.push(i[n]);return a},topologicalSort:function(t){for(var e=this.getVertices(t),i={},n=0,o=e.length;n<o;n++)i[e[n]]={id:e[n],$source:[],$target:[],$incoming:0};for(n=0,o=t.length;n<o;n++){var a=i[t[n].target];a.$target.push(n),a.$incoming=a.$target.length,i[t[n].source].$source.push(n)}for(var r=e.filter(function(t){return!i[t].$incoming}),s=[];r.length;){var c=r.pop();s.push(c);var l=i[c];for(n=0;n<l.$source.length;n++){var u=i[t[l.$source[n]].target];u.$incoming--,u.$incoming||r.push(u.id)}}return s},groupAdjacentEdges:function(t){for(var e,i={},n=0,o=t.length;n<o;n++)i[(e=t[n]).source]||(i[e.source]=[]),i[e.source].push(e);return i},tarjanStronglyConnectedComponents:function(t,e){for(var i={},n=[],o=this.groupAdjacentEdges(e),a=!1,r=[],s=0;s<t.length;s++){var c=g(t[s]);if(!c.visited)for(var l=[c],u=0;l.length;){var d=l.pop();d.visited||(d.index=u,d.lowLink=u,u++,n.push(d),d.onStack=!0,d.visited=!0),a=!1,e=o[d.id]||[];for(var h=0;h<e.length;h++){var p=g(e[h].target);if(p.edge=e[h],void 0===p.index){l.push(d),l.push(p),a=!0;break}p.onStack&&(d.lowLink=Math.min(d.lowLink,p.index))}if(!a){if(d.index==d.lowLink){for(var f={tasks:[],links:[]};(p=n.pop()).onStack=!1,f.tasks.push(p.id),p.edge&&f.links.push(p.edge.id),p!=d;);r.push(f)}l.length&&(p=d,(d=l[l.length-1]).lowLink=Math.min(d.lowLink,p.lowLink))}}}return r;function g(t){return i[t]||(i[t]={id:t,onStack:!1,index:void 0,lowLink:void 0,edge:void 0}),i[t]}},findLoops:function(t){var e=[];n.forEach(t,function(t){t.target==t.source&&e.push([t.target,t.source])});var i=this.getVertices(t),o=this.tarjanStronglyConnectedComponents(i,t);return n.forEach(o,function(t){t.tasks.length>1&&e.push(t)}),e}}}},function(t,e){t.exports=function(t){t._get_linked_task=function(e,i){var n=null,o=i?e.target:e.source;return t.isTaskExists(o)&&(n=t.getTask(o)),n},t._get_link_target=function(e){return t._get_linked_task(e,!0)},t._get_link_source=function(e){return t._get_linked_task(e,!1)};var e=!1,i={},n={},o={},a={};t._isLinksCacheEnabled=function(){return e},t._startLinksCache=function(){i={},n={},o={},a={},e=!0},t._endLinksCache=function(){i={},n={},o={},a={},e=!1},t._formatLink=function(n){if(e&&i[n.id])return i[n.id];var o=[],a=this._get_link_target(n),r=this._get_link_source(n);if(!r||!a)return o;if(t.isSummaryTask(a)&&t.isChildOf(r.id,a.id)||t.isSummaryTask(r)&&t.isChildOf(a.id,r.id))return o;for(var s=this._getImplicitLinks(n,r,function(t){return 0},!0),c=t.config.auto_scheduling_move_projects,l=this.isSummaryTask(a)?this.getSubtaskDates(a.id):{start_date:a.start_date,end_date:a.end_date},u=this._getImplicitLinks(n,a,function(e){return c?e.$target.length||t.getState("tasksDnd").drag_id==e.id?0:t.calculateDuration({start_date:l.start_date,end_date:e.start_date,task:r}):0}),d=0,h=s.length;d<h;d++)for(var p=s[d],f=0,g=u.length;f<g;f++){var m=u[f];o.push(t._convertToFinishToStartLink(m.task,{id:n.id,type:n.type,source:p.task,target:m.task,lag:(1*n.lag||0)+(1*p.lag+1*m.lag)},r,a,p.taskParent,m.taskParent))}return e&&(i[n.id]=o),o},t._isAutoSchedulable=function(t){return!1!==t.auto_scheduling},t._getImplicitLinks=function(e,i,n,o){var a=[];if(this.isSummaryTask(i)){var r,s={};for(var c in this.eachTask(function(t){this.isSummaryTask(t)||(s[t.id]=t)},i.id),s){var l=s[c],u=o?l.$source:l.$target;r=!1;for(var d=0;d<u.length;d++){var h=t.getLink(u[d]),p=s[o?h.target:h.source];if(p&&!1!==l.auto_scheduling&&!1!==p.auto_scheduling&&(h.target==p.id&&Math.abs(h.lag)<=p.duration||h.target==l.id&&Math.abs(h.lag)<=l.duration)){r=!0;break}}r||a.push({task:l.id,taskParent:l.parent,lag:n(l)})}}else a.push({task:i.id,taskParent:i.parent,lag:0});return a},t._getDirectDependencies=function(t,e){for(var i=[],n=[],o=e?t.$source:t.$target,a=0;a<o.length;a++){var r=this.getLink(o[a]);if(this.isTaskExists(r.source)&&this.isTaskExists(r.target)){var s=this.getTask(r.target);this._isAutoSchedulable(s)&&i.push(this.getLink(o[a]))}}for(a=0;a<i.length;a++)n=n.concat(this._formatLink(i[a]));return n},t._getInheritedDependencies=function(t,i){var a,r=!1,s=[];return this.isTaskExists(t.id)&&this.eachParent(function(t){var c;r||(e&&(a=i?n:o)[t.id]?s=s.concat(a[t.id]):this.isSummaryTask(t)&&(this._isAutoSchedulable(t)?(c=this._getDirectDependencies(t,i),e&&(a[t.id]=c),s=s.concat(c)):r=!0))},t.id,this),s},t._getDirectSuccessors=function(t){return this._getDirectDependencies(t,!0)},t._getInheritedSuccessors=function(t){return this._getInheritedDependencies(t,!0)},t._getDirectPredecessors=function(t){return this._getDirectDependencies(t,!1)},t._getInheritedPredecessors=function(t){return this._getInheritedDependencies(t,!1)},t._getSuccessors=function(t,e){var i=this._getDirectSuccessors(t);return e?i:i.concat(this._getInheritedSuccessors(t))},t._getPredecessors=function(t,i){var n,o=String(t.id)+"-"+String(i);if(e&&a[o])return a[o];var r=this._getDirectPredecessors(t);return n=i?r:r.concat(this._getInheritedPredecessors(t)),e&&(a[o]=n),n},t._convertToFinishToStartLink=function(e,i,n,o,a,r){var s={target:e,link:t.config.links.finish_to_start,id:i.id,lag:i.lag||0,source:i.source,preferredStart:null,sourceParent:a,targetParent:r,hashSum:null},c=0;switch(String(i.type)){case String(t.config.links.start_to_start):c=-n.duration;break;case String(t.config.links.finish_to_finish):c=-o.duration;break;case String(t.config.links.start_to_finish):c=-n.duration-o.duration;break;default:c=0}return s.lag+=c,s.hashSum=s.lag+"_"+s.link+"_"+s.source+"_"+s.target,s}}},function(t,e){t.exports=function(t){var e=new RegExp("<(?:.|\n)*?>","gm"),i=new RegExp(" +","gm");function n(t){return(t+"").replace(e," ").replace(i," ")}var o=new RegExp("'","gm");function a(t){return(t+"").replace(o,"&#39;")}for(var r in t._waiAria={getAttributeString:function(t){var e=[" "];for(var i in t){var o=a(n(t[i]));e.push(i+"='"+o+"'")}return e.push(" "),e.join(" ")},getTimelineCellAttr:function(e){return t._waiAria.getAttributeString({"aria-label":e})},_taskCommonAttr:function(e,i){e.start_date&&e.end_date&&(i.setAttribute("aria-label",n(t.templates.tooltip_text(e.start_date,e.end_date,e))),e.$dataprocessor_class&&i.setAttribute("aria-busy",!0),i.setAttribute("aria-selected",t.isSelectedTask(e.id)?"true":"false"))},setTaskBarAttr:function(e,i){this._taskCommonAttr(e,i),!t.isReadonly(e)&&t.config.drag_move&&(e.id!=t.getState("tasksDnd").drag_id?i.setAttribute("aria-grabbed",!1):i.setAttribute("aria-grabbed",!0))},taskRowAttr:function(e,i){this._taskCommonAttr(e,i),!t.isReadonly(e)&&t.config.order_branch&&i.setAttribute("aria-grabbed",!1),i.setAttribute("role","row"),i.setAttribute("aria-level",e.$level),t.hasChild(e.id)&&i.setAttribute("aria-expanded",e.$open?"true":"false")},linkAttr:function(e,i){var o=t.config.links,a=t.locale.labels.link+" "+t.templates.drag_link(e.source,e.type==o.start_to_start||e.type==o.start_to_finish,e.target,e.type==o.finish_to_start||e.type==o.start_to_start);i.setAttribute("aria-label",n(a)),t.isReadonly(e)&&i.setAttribute("aria-readonly",!0)},gridSeparatorAttr:function(t){t.setAttribute("role","separator")},lightboxHiddenAttr:function(t){t.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},lightboxAttr:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":t.locale.labels[e],tabindex:"0"})},lightboxHeader:function(t,e){t.setAttribute("aria-label",e)},lightboxSelectAttrString:function(e){var i="";switch(e){case"%Y":i=t.locale.labels.years;break;case"%m":i=t.locale.labels.months;break;case"%d":i=t.locale.labels.days;break;case"%H:%i":i=t.locale.labels.hours+t.locale.labels.minutes}return t._waiAria.getAttributeString({"aria-label":i})},lightboxDurationInputAttrString:function(e){return this.getAttributeString({"aria-label":t.locale.labels.column_duration,"aria-valuemin":"0"})},gridAttrString:function(){return[" role='treegrid'",t.config.multiselect?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},gridScaleRowAttrString:function(){return"role='row'"},gridScaleCellAttrString:function(e,i){var n="";if("add"==e.name)n=this.getAttributeString({role:"button","aria-label":t.locale.labels.new_task});else{var o={role:"columnheader","aria-label":i};t._sort&&t._sort.name==e.name&&(o["aria-sort"]="asc"==t._sort.direction?"ascending":"descending"),n=this.getAttributeString(o)}return n},gridDataAttrString:function(){return"role='rowgroup'"},gridCellAttrString:function(e,i,n){var o={role:"gridcell","aria-label":i};return e.editor&&!t.isReadonly(n)||(o["aria-readonly"]=!0),this.getAttributeString(o)},gridAddButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":t.locale.labels.new_task})},messageButtonAttrString:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},messageInfoAttr:function(t){t.setAttribute("role","alert")},messageModalAttr:function(t,e){t.setAttribute("role","dialog"),e&&t.setAttribute("aria-labelledby",e)},quickInfoAttr:function(t){t.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(t,e){t.setAttribute("aria-label",e)},quickInfoButtonAttrString:function(e){return t._waiAria.getAttributeString({role:"button","aria-label":e,tabindex:"0"})},tooltipAttr:function(t){t.setAttribute("role","tooltip")},tooltipVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(t){t.setAttribute("aria-hidden","true")}},t._waiAria)t._waiAria[r]=function(e){return function(){return t.config.wai_aria_attributes?e.apply(this,arguments):""}}(t._waiAria[r])}},function(t,e){t.exports=function(t){t._extend_to_optional=function(e){var i=e,n={render:i.render,focus:i.focus,set_value:function(e,o,a,r){var s=t._resolve_default_mapping(r);if(!a[s.start_date]||"start_date"==s.start_date&&this._isAllowedUnscheduledTask(a)){n.disable(e,r);var c={};for(var l in s)c[s[l]]=a[l];return i.set_value.call(t,e,o,c,r)}return n.enable(e,r),i.set_value.call(t,e,o,a,r)},get_value:function(e,n,o){return o.disabled?{start_date:null}:i.get_value.call(t,e,n,o)},update_block:function(e,i){if(t.callEvent("onSectionToggle",[t._lightbox_id,i]),e.style.display=i.disabled?"none":"block",i.button){var n=e.previousSibling.querySelector(".gantt_custom_button_label"),o=t.locale.labels;n.innerHTML=i.disabled?o[i.name+"_enable_button"]:o[i.name+"_disable_button"]}t.resizeLightbox()},disable:function(t,e){e.disabled=!0,n.update_block(t,e)},enable:function(t,e){e.disabled=!1,n.update_block(t,e)},button_click:function(e,i,o,a){if(!1!==t.callEvent("onSectionButton",[t._lightbox_id,o])){var r=t._get_typed_lightbox_config()[e];r.disabled?n.enable(a,r):n.disable(a,r)}}};return n},t.form_blocks.duration_optional=t._extend_to_optional(t.form_blocks.duration),t.form_blocks.time_optional=t._extend_to_optional(t.form_blocks.time)}},function(t,e,i){var n=i(2);t.exports=function(t){var e=i(16)(t);function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.render=function(i){var n=t.config.types,o=t.locale.labels,a=[],r=i.filter||function(t,e){return!n.placeholder||e!==n.placeholder};for(var s in n)0==!r(s,n[s])&&a.push({key:n[s],label:o["type_"+s]});i.options=a;var c=i.onchange;return i.onchange=function(){t.changeLightboxType(this.value),"function"==typeof c&&c.apply(this,arguments)},e.prototype.render.apply(this,arguments)},o}},function(t,e,i){var n=i(2),o=i(15);t.exports=function(t){var e=i(5)(t);function a(){return e.apply(this,arguments)||this}function r(e){return!e||e===t.config.constraint_types.ASAP||e===t.config.constraint_types.ALAP}function s(t,e){for(var i=r(e),n=0;n<t.length;n++)t[n].disabled=i}return n(a,e),a.prototype.render=function(e){var i="<div class='gantt_cal_ltext gantt_section_"+e.name+"' style='height:"+(e.height||30)+"px;'>",n=[];for(var a in t.config.constraint_types)n.push({key:t.config.constraint_types[a],label:t.locale.labels[t.config.constraint_types[a]]});return e.options=e.options||n,i+="<span data-constraint-type-select>"+o.getHtmlSelect(e.options,[{key:"data-type",value:"constraint-type"}])+"</span>",(i+="<label data-constraint-time-select>"+(t.locale.labels.constraint_date||"Constraint date")+": "+t.form_blocks.getTimePicker.call(this,e)+"</label>")+"</div>"},a.prototype.set_value=function(e,i,n,o){var a=e.querySelector("[data-constraint-type-select] select"),r=e.querySelectorAll("[data-constraint-time-select] select"),c=o._time_format_order,l=t._resolve_default_mapping(o);a._eventsInitialized||(a.addEventListener("change",function(t){s(r,t.target.value)}),a._eventsInitialized=!0);var u=n[l.constraint_date]||new Date;t.form_blocks._fill_lightbox_select(r,0,u,c,o);var d=n[l.constraint_type]||t.getConstraintType(n);a.value=d,s(r,d)},a.prototype.get_value=function(e,i,n){var o=e.querySelector("[data-constraint-type-select] select"),a=e.querySelectorAll("[data-constraint-time-select] select"),s=o.value,c=null;return r(s)||(c=t.form_blocks.getTimePickerValue(a,n)),{constraint_type:s,constraint_date:c}},a.prototype.focus=function(e){t._focus(e.querySelector("select"))},a}},function(t,e,i){var n=i(3),o=i(1),a=i(15),r=i(2);t.exports=function(t){var e=i(5)(t),s={resources:{},resourcesValues:{},filter:{},eventsInitialized:{}};function c(){return e.apply(this,arguments)||this}function l(t){return void 0===t?".gantt_resource_amount_input":"[data-checked='"+(t?"true":"false")+"'] .gantt_resource_amount_input"}function u(t){return s.resources[t.id]}function d(t){return s.filter[t.id]}return t.attachEvent("onAfterLightbox",function(){for(var t in s.filter)s.filter[t].checkbox.checked=!1,s.filter[t].input.value="",s.filter[t].filterApplied=!1;s.resourcesValues={}}),r(c,e),c.prototype.render=function(e){var i,n=t.locale.labels.resources_filter_placeholder||e.filter_placeholder||"type to filter",o=t.locale.labels.resources_filter_label||"hide empty";return i="<div"+(isNaN(e.height)?"":" style='height: "+e.height+"px;'")+">",i+="<div class='gantt_cal_ltext gantt_resources_filter'><input type='text' class='gantt_resources_filter_input' placeholder='"+n+"'> <label><input class='switch_unsetted' type='checkbox'><span class='matherial_checkbox_icon'></span>"+o+"</label></div>",(i+="<div class='gantt_cal_ltext gantt_resources' data-name='"+e.name+"'></div>")+"</div>"},c.prototype.set_value=function(e,i,r,c){var h,p=function(t,e){return s.resources[e.id]||(s.resources[e.id]=t.querySelector(".gantt_resources")),s.resources[e.id]}(e,c),f="";!function(t,e){if(!s.filter[e.id]){var i=t.querySelector(".gantt_resources_filter"),n=i.querySelector(".gantt_resources_filter_input"),o=i.querySelector(".switch_unsetted");s.filter[e.id]={container:i,input:n,checkbox:o,filterApplied:!1}}}(e,c),function(e,i,a,r){if(!s.eventsInitialized[a.id]){var c=function(o){var c,l,u;p(a,e);var h=d(a);u=h.checkbox.checked,l=function(t){return t.value.trim()}(h.input),h.filterApplied=!!l,t.getState().lightbox&&(i=t.getLightboxValues()),c=function(e,i,o,a){var r,c;if(a){var l=i[e.map_to]||[];if(n.isArray(l)||(l=[l]),0===(l=l.slice()).length){for(var u in l=[],(c=t.copy(e)).options=[],s.resourcesValues[e.id])""!==s.resourcesValues[e.id][u]&&l.push({resource_id:u,value:s.resourcesValues[e.id][u]});if(0===l.length)return c}else for(var u in s.resourcesValues[e.id])""!==s.resourcesValues[e.id][u]&&(n.arrayFind(l,function(t){return t.id==u})||l.push({resource_id:u,value:s.resourcesValues[e.id][u]}));for(var d={},h=0;h<l.length;h++)d[l[h].resource_id]=!0;r=function(t){if(d[String(t.key)]&&(""===o||t.label.toLowerCase().indexOf(o.toLowerCase())>=0))return t}}else{if(""===o)return e;r=function(t){if(t.label.toLowerCase().indexOf(o.toLowerCase())>=0)return t}}return(c=t.copy(e)).options=n.arrayFilter(c.options,r),c}(a,i,l,u),r.form_blocks.resources.set_value(e,i[a.map_to],i,c)};c=n.throttle(c,100),d(a).container.addEventListener("keyup",c),d(a).container.addEventListener("input",c,!0),d(a).container.addEventListener("change",c,!0),u(a).addEventListener("input",h),u(a).addEventListener("change",h),t.attachEvent("onResourcesSelectActivated",t.bind(h,u(a))),s.eventsInitialized[a.id]=!0}function h(e){var i,n=e.target;if("checkbox"===e.target.type){(i=n.parentNode.querySelector(l())).disabled=!n.checked;var r=i.getAttribute("data-item-id"),c=o.locateClassName(e,"gantt_resource_row"),u=c.querySelector(".gantt_resource_amount_input");if(c.setAttribute("data-checked",n.checked),n.checked){"select"===i.nodeName.toLowerCase()&&t.callEvent("onResourcesSelectActivated",[{target:i}]);var d=r,h=a.default_value;a.options.forEach(function(t){t.key==d&&t.default_value&&(h=t.default_value)}),u&&!u.value&&void 0!==h&&(u.value=h,p(a,this)),u.select?u.select():u.focus&&u.focus()}else s.resourcesValues[a.id]&&delete s.resourcesValues[a.id][r]}else"text"!==e.target.type&&"select"!==e.target.nodeName.toLowerCase()||(i=e.target,p(a,this))}function p(t,e){var i=l(),n=e.querySelectorAll(i);s.resourcesValues[t.id]=s.resourcesValues[t.id]||{};for(var o=0;o<n.length;o++){var a=n[o].getAttribute("data-item-id");n[o].disabled?delete s.resourcesValues[t.id][a]:s.resourcesValues[t.id][a]=n[o].value}}}(e,r,c,this),n.forEach(c.options,function(t,e){c.unassigned_value!=t.key&&(h=function(t,e,i){var o,a={};return e&&(n.isArray(e)?o=n.arrayFind(e,function(t){return t.resource_id==i.key}):e.resource_id==i.key&&(o=e),o&&(a.value=o.value)),s.resourcesValues[t.id]&&s.resourcesValues[t.id][i.key]&&(a.value=s.resourcesValues[t.id][i.key]),a}(c,i,t),f+=["<label class='gantt_resource_row' data-item-id='"+t.key+"' data-checked="+(h.value?"true":"false")+">","<input class='gantt_resource_toggle' type='checkbox'",h.value?" checked='checked'":"","><div class='gantt_resource_cell gantt_resource_cell_checkbox'><span class='matherial_checkbox_icon'></span></div>","<div class='gantt_resource_cell gantt_resource_cell_label'>",t.label,"</div>","<div class='gantt_resource_cell gantt_resource_cell_value'>",function(t,e,i){var n,o="";if(t)return n=[{key:"data-item-id",value:t.key},{key:"class",value:"gantt_resource_amount_input"}],i&&n.push({key:"disabled",value:"disabled"}),t.options?o+=a.getHtmlSelect(t.options,n,e):(n[n.length]={key:"value",value:e||""},o+=a.getHtmlInput(n)),o}(t,h.value,!h.value),"</div>","<div class='gantt_resource_cell gantt_resource_cell_unit'>",t.unit,"</div>","</label>"].join(""))}),p.innerHTML=f,p.style.zoom="1",p._offsetSizes=p.offsetHeight,p.style.zoom="",t.resizeLightbox(),t._center_lightbox(t.getLightbox())},c.prototype.get_value=function(e,i,n){for(var o=u(n),a=[],r=l(!0),c=l(!1),h=d(n),p=t.copy(s.resourcesValues[n.id])||{},f=o.querySelectorAll(r),g=o.querySelectorAll(c),m=0;m<g.length;m++)delete p[g[m].getAttribute("data-item-id")];for(m=0;m<f.length;m++){var v=f[m].getAttribute("data-item-id"),b=f[m].value.trim();""!==b&&"0"!==b&&(delete p[v],a[a.length]={resource_id:v,value:b})}if(h.filterApplied)for(var _ in p)a[a.length]={resource_id:_,value:p[_]};return a},c.prototype.focus=function(e){t._focus(e.querySelector(".gantt_resources"))},c}},function(t,e,i){var n=i(2);t.exports=function(t){var e=i(16)(t);function o(){return e.apply(this,arguments)||this}function a(e,i){var n=[],o=[];i&&(n=t.getTaskByTime(),e.allow_root&&n.unshift({id:t.config.root_id,text:e.root_label||""}),n=function(e,i,n){var o=i.filter||function(){return!0};e=e.slice(0);for(var a=0;a<e.length;a++){var r=e[a];(r.id==n||t.isChildOf(r.id,n)||!1===o(r.id,r))&&(e.splice(a,1),a--)}return e}(n,e,i),e.sort&&n.sort(e.sort));for(var a=e.template||t.templates.task_text,r=0;r<n.length;r++){var s=a.apply(t,[n[r].start_date,n[r].end_date,n[r]]);void 0===s&&(s=""),o.push({key:n[r].id,label:s})}return e.options=o,e.map_to=e.map_to||"parent",t.form_blocks.select.render.apply(this,arguments)}return n(o,e),o.prototype.render=function(t){return a(t,!1)},o.prototype.set_value=function(e,i,n,o){var r=document.createElement("div");r.innerHTML=a(o,n.id);var s=r.removeChild(r.firstChild);return e.onselect=null,e.parentNode.replaceChild(s,e),t.form_blocks.select.set_value.apply(t,[s,i,n,o])},o}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.canParse=function(e){return!isNaN(t.parse(e))},this.format=function(t){return String(t)},this.parse=function(t){return parseInt(t,10)}}return t.create=function(e){return void 0===e&&(e=null),new t},t}();e.default=n},function(t,e,i){var n=i(2),o=i(57).default;t.exports=function(t){var e=i(5)(t);function a(){return e.apply(this,arguments)||this}function r(t){return t.formatter||new o}function s(e,i){var n=e.getElementsByTagName("select"),o=i._time_format_order,a=0,r=0;if(t.defined(o[3])){var s=n[o[3]],c=parseInt(s.value,10);isNaN(c)&&s.hasAttribute("data-value")&&(c=parseInt(s.getAttribute("data-value"),10)),a=Math.floor(c/60),r=c%60}return new Date(n[o[2]].value,n[o[1]].value,n[o[0]].value,a,r)}function c(t,e){var i=t.getElementsByTagName("input")[1];return(i=r(e).parse(i.value))&&!window.isNaN(i)||(i=1),i<0&&(i*=-1),i}return n(a,e),a.prototype.render=function(e){var i="<div class='gantt_time_selects'>"+t.form_blocks.getTimePicker.call(this,e)+"</div>",n=" "+t.locale.labels[t.config.duration_unit+"s"]+" ",o=e.single_date?" style='display:none'":"",a=e.readonly?" disabled='disabled'":"",r=t._waiAria.lightboxDurationInputAttrString(e),s="gantt_duration_value";return e.formatter&&(n="",s+=" gantt_duration_value_formatted"),"<div style='height:"+(e.height||30)+"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>"+i+" <div class='gantt_duration' "+o+"><input type='button' class='gantt_duration_dec' value='\u2212'"+a+"><input type='text' value='5days' class='"+s+"'"+a+" "+r+"><input type='button' class='gantt_duration_inc' value='+'"+a+">"+n+"<span></span></div></div>"},a.prototype.set_value=function(e,i,n,o){var a,l,u,d,h=e.getElementsByTagName("select"),p=e.getElementsByTagName("input"),f=p[1],g=[p[0],p[2]],m=e.getElementsByTagName("span")[0],v=o._time_format_order;function b(){var i=s.call(t,e,o),a=c.call(t,e,o),r=t.calculateEndDate({start_date:i,duration:a,task:n});m.innerHTML=(t.templates.task_end_date||t.templates.task_date)(r)}function _(t){var e=f.value;e=r(o).parse(e),window.isNaN(e)&&(e=0),(e+=t)<1&&(e=1),f.value=r(o).format(e),b()}g[0].onclick=t.bind(function(){_(-1*t.config.duration_step)},this),g[1].onclick=t.bind(function(){_(1*t.config.duration_step)},this),h[0].onchange=b,h[1].onchange=b,h[2].onchange=b,h[3]&&(h[3].onchange=b),f.onkeydown=t.bind(function(e){var i;return(i=(e=e||window.event).charCode||e.keyCode||e.which)==t.constants.KEY_CODES.DOWN?(_(-1*t.config.duration_step),!1):i==t.constants.KEY_CODES.UP?(_(1*t.config.duration_step),!1):void window.setTimeout(b,1)},this),f.onchange=t.bind(b,this),"string"==typeof(a=t._resolve_default_mapping(o))&&(a={start_date:a}),l=n[a.start_date]||new Date,u=n[a.end_date]||t.calculateEndDate({start_date:l,duration:1,task:n}),d=Math.round(n[a.duration])||t.calculateDuration({start_date:l,end_date:u,task:n}),d=r(o).format(d),t.form_blocks._fill_lightbox_select(h,0,l,v,o),f.value=d,b()},a.prototype.get_value=function(e,i,n){var o=s(e,n),a=c(e,n),r=t.calculateEndDate({start_date:o,duration:a,task:i});return"string"==typeof t._resolve_default_mapping(n)?o:{start_date:o,end_date:r,duration:a}},a.prototype.focus=function(e){t._focus(e.getElementsByTagName("select")[0])},a}},function(t,e,i){var n=i(2);t.exports=function(t){var e=i(5)(t);function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.render=function(t){var e="<div class='gantt_cal_ltext' style='height:"+(t.height||"23")+"px;'>";if(t.options&&t.options.length)for(var i=0;i<t.options.length;i++)e+="<label><input type='radio' value='"+t.options[i].key+"' name='"+t.name+"'>"+t.options[i].label+"</label>";return e+"</div>"},o.prototype.set_value=function(t,e,i,n){var o;n.options&&n.options.length&&(o=t.querySelector("input[type=radio][value='"+e+"']")||t.querySelector("input[type=radio][value='"+n.default_value+"']"))&&(!t._dhx_onchange&&n.onchange&&(t.onchange=n.onchange,t._dhx_onchange=!0),o.checked=!0)},o.prototype.get_value=function(t,e){var i=t.querySelector("input[type=radio]:checked");return i?i.value:""},o.prototype.focus=function(e){t._focus(e.querySelector("input[type=radio]"))},o}},function(t,e,i){var n=i(3),o=i(2);t.exports=function(t){var e=i(5)(t);function a(){return e.apply(this,arguments)||this}return o(a,e),a.prototype.render=function(t){var e="<div class='gantt_cal_ltext' style='height:"+(t.height||"23")+"px;'>";if(t.options&&t.options.length)for(var i=0;i<t.options.length;i++)e+="<label><input type='checkbox' value='"+t.options[i].key+"' name='"+t.name+"'>"+t.options[i].label+"</label>";return e+"</div>"},a.prototype.set_value=function(t,e,i,o){var a=Array.prototype.slice.call(t.querySelectorAll("input[type=checkbox]"));!t._dhx_onchange&&o.onchange&&(t.onchange=o.onchange,t._dhx_onchange=!0),n.forEach(a,function(t){t.checked=!!e&&e.indexOf(t.value)>=0})},a.prototype.get_value=function(t){return n.arrayMap(Array.prototype.slice.call(t.querySelectorAll("input[type=checkbox]:checked")),function(t){return t.value})},a.prototype.focus=function(e){t._focus(e.querySelector("input[type=checkbox]"))},a}},function(t,e,i){var n=i(2);t.exports=function(t){var e=i(5)(t);function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.render=function(e){var i=t.form_blocks.getTimePicker.call(this,e),n="<div style='height:"+(e.height||30)+"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>";return n+=i,e.single_date?(i=t.form_blocks.getTimePicker.call(this,e,!0),n+="<span></span>"):n+="<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>",(n+=i)+"</div>"},o.prototype.set_value=function(e,i,n,o){var a=o,r=e.getElementsByTagName("select"),s=o._time_format_order;if(a.auto_end_date)for(var c=function(){d=new Date(r[s[2]].value,r[s[1]].value,r[s[0]].value,0,0),h=t.calculateEndDate({start_date:d,duration:1,task:n}),t.form_blocks._fill_lightbox_select(r,s.size,h,s,a)},l=0;l<4;l++)r[l].onchange=c;var u=t._resolve_default_mapping(o);"string"==typeof u&&(u={start_date:u});var d=n[u.start_date]||new Date,h=n[u.end_date]||t.calculateEndDate({start_date:d,duration:1,task:n});t.form_blocks._fill_lightbox_select(r,0,d,s,a),t.form_blocks._fill_lightbox_select(r,s.size,h,s,a)},o.prototype.get_value=function(e,i,n){var o,a=e.getElementsByTagName("select"),r=n._time_format_order;return o=t.form_blocks.getTimePickerValue(a,n),"string"==typeof t._resolve_default_mapping(n)?o:{start_date:o,end_date:function(e,i,o){var a=t.form_blocks.getTimePickerValue(e,n,i.size);return a<=o?t.date.add(o,t._get_timepicker_step(),"minute"):a}(a,r,o)}},o.prototype.focus=function(e){t._focus(e.getElementsByTagName("select")[0])},o}},function(t,e,i){var n=i(2);t.exports=function(t){var e=i(5)(t);function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.render=function(t){return"<div class='gantt_cal_ltext' style='height:"+(t.height||"130")+"px;'><textarea></textarea></div>"},o.prototype.set_value=function(e,i){t.form_blocks.textarea._get_input(e).value=i||""},o.prototype.get_value=function(e){return t.form_blocks.textarea._get_input(e).value},o.prototype.focus=function(e){var i=t.form_blocks.textarea._get_input(e);t._focus(i,!0)},o.prototype._get_input=function(t){return t.querySelector("textarea")},o}},function(t,e,i){var n=i(2);t.exports=function(t){var e=i(5)(t);function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.render=function(t){return"<div class='gantt_cal_ltext gantt_cal_template' style='height:"+(t.height||"30")+"px;'></div>"},o.prototype.set_value=function(t,e){t.innerHTML=e||""},o.prototype.get_value=function(t){return t.innerHTML||""},o.prototype.focus=function(){},o}},function(t,e,i){t.exports=function(t){var e=i(1),n=i(3),o=i(63)(t),a=i(62)(t),r=i(61)(t),s=i(16)(t),c=i(60)(t),l=i(59)(t),u=i(58)(t),d=i(56)(t),h=i(55)(t),p=i(54)(t),f=i(53)(t);function g(e,i){var n,o,a="";for(o=0;o<e.length;o++)a+="<div "+t._waiAria.lightboxButtonAttrString(n=t.config._migrate_buttons[e[o]]?t.config._migrate_buttons[e[o]]:e[o])+" class='gantt_btn_set gantt_left_btn_set "+n+"_set'"+(i?" style='float:right;'":"")+"><div dhx_button='1' data-dhx-button='1' class='"+n+"'></div><div>"+t.locale.labels[n]+"</div></div>";return a}function m(e,i,n){var o,a,r,s,c,l,u="";switch(n.timeFormat[i]){case"%Y":for(e._time_format_order[2]=i,e._time_format_order.size++,e.year_range&&(isNaN(e.year_range)?e.year_range.push&&(r=e.year_range[0],s=e.year_range[1]):o=e.year_range),o=o||10,a=a||Math.floor(o/2),r=r||n.date.getFullYear()-a,s=s||r+o,c=r;c<s;c++)u+="<option value='"+c+"'>"+c+"</option>";break;case"%m":for(e._time_format_order[1]=i,e._time_format_order.size++,c=0;c<12;c++)u+="<option value='"+c+"'>"+t.locale.date.month_full[c]+"</option>";break;case"%d":for(e._time_format_order[0]=i,e._time_format_order.size++,c=1;c<32;c++)u+="<option value='"+c+"'>"+c+"</option>";break;case"%H:%i":for(e._time_format_order[3]=i,e._time_format_order.size++,c=n.first,l=n.date.getDate(),e._time_values=[];c<n.last;)u+="<option value='"+c+"'>"+t.templates.time_picker(n.date)+"</option>",e._time_values.push(c),n.date.setTime(n.date.valueOf()+60*t._get_timepicker_step()*1e3),c=24*(n.date.getDate()!=l?1:0)*60+60*n.date.getHours()+n.date.getMinutes()}return u}t._lightbox_methods={},t._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",t.$services.getService("state").registerProvider("lightbox",function(){return{lightbox:t._lightbox_id}}),t.showLightbox=function(t){if(this.callEvent("onBeforeLightbox",[t])){var e=this.getTask(t),i=this.getLightbox(this.getTaskType(e.type));this._center_lightbox(i),this.showCover(),this._fill_lightbox(t,i),this._waiAria.lightboxVisibleAttr(i),this.callEvent("onLightbox",[t])}},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var e;if(function(t){var e=t.$ui.getView("timeline");return!(!e||!e.isVisible())}(this)){var i=t.getScale();e=n.getSecondsInUnit(i.unit)*i.step/60}return(!e||e>=1440)&&(e=this.config.time_step),e}return this.config.time_step},t.getLabel=function(t,e){for(var i=this._get_typed_lightbox_config(),n=0;n<i.length;n++)if(i[n].map_to==t)for(var o=i[n].options,a=0;a<o.length;a++)if(o[a].key==e)return o[a].label;return""},t.updateCollection=function(e,i){i=i.slice(0);var n=t.serverList(e);if(!n)return!1;n.splice(0,n.length),n.push.apply(n,i||[]),t.resetLightbox()},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type)},t.getLightbox=function(e){var i,n,o,a,r="";return void 0===e&&(e=this.getLightboxType()),this._lightbox&&this.getLightboxType()==this.getTaskType(e)||(this._lightbox_type=this.getTaskType(e),i=document.createElement("div"),r="gantt_cal_light",n=this._is_lightbox_timepicker(),(t.config.wide_form||n)&&(r+=" gantt_cal_light_wide"),n&&(t.config.wide_form=!0,r+=" gantt_cal_light_full"),i.className=r,i.style.visibility="hidden",o=this._lightbox_template,o+=g(this.config.buttons_left),o+=g(this.config.buttons_right,!0),i.innerHTML=o,t._waiAria.lightboxAttr(i),t.config.drag_lightbox&&(i.firstChild.onmousedown=t._ready_to_dnd,i.firstChild.onselectstart=function(){return!1},i.firstChild.style.cursor="pointer",t._init_dnd_events()),document.body.insertBefore(i,document.body.firstChild),this._lightbox=i,a=this._get_typed_lightbox_config(e),o=this._render_sections(a),i.querySelector("div.gantt_cal_larea").innerHTML=o,function(e){var i,n,o,a,r,s;for(s=0;s<e.length;s++)i=e[s],o=document.getElementById(i.id),i.id&&o&&(n=o.querySelector("label"),(a=o.nextSibling)&&(r=a.querySelector("input, select, textarea"))&&(r.id=r.id||"input_"+t.uid(),i.inputId=r.id,n.setAttribute("for",i.inputId)))}(a),this.resizeLightbox(),this._init_lightbox_events(this),i.style.display="none",i.style.visibility="visible"),this._lightbox},t._render_sections=function(t){for(var e="",i=0;i<t.length;i++){var n=this.form_blocks[t[i].type];if(n){t[i].id="area_"+this.uid();var o="";t[i].button&&(o="<div class='gantt_custom_button' data-index='"+i+"'><div class='gantt_custom_button_"+t[i].button+"'></div><div class='gantt_custom_button_label'>"+this.locale.labels["button_"+t[i].button]+"</div></div>"),this.config.wide_form&&(e+="<div class='gantt_wrap_section' "+(t[i].hidden?" style='display:none'":"")+">"),e+="<div id='"+t[i].id+"' class='gantt_cal_lsection'><label>"+o+this.locale.labels["section_"+t[i].name]+"</label></div>"+n.render.call(this,t[i]),e+="</div>"}}return e},t.resizeLightbox=function(){if(this._lightbox){var t=this._lightbox.querySelector(".gantt_cal_larea");t.style.height="0px",t.style.height=t.scrollHeight+"px",this._lightbox.style.height=t.scrollHeight+this.config.lightbox_additional_height+"px",t.style.height=t.scrollHeight+"px"}},t._center_lightbox=function(t){if(t){t.style.display="block";var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,n=window.innerHeight||document.documentElement.clientHeight;t.style.top=e?Math.round(e+Math.max((n-t.offsetHeight)/2,0))+"px":Math.round(Math.max((n-t.offsetHeight)/2,0)+9)+"px",t.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(i+(document.body.offsetWidth-t.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-t.offsetWidth)/2)+"px"}},t.showCover=function(){if(!this._cover){this._cover=document.createElement("DIV"),this._cover.className="gantt_cal_cover";var t=void 0!==document.height?document.height:document.body.offsetHeight,e=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(t,e)+"px",document.body.appendChild(this._cover)}},t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(){t._save_lightbox()},t.lightbox_events.gantt_delete_btn=function(){t.callEvent("onLightboxDelete",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox())},t.lightbox_events.gantt_cancel_btn=function(){t._cancel_lightbox()},t.lightbox_events.default=function(i,n){if(n.getAttribute("data-dhx-button"))t.callEvent("onLightboxButton",[n.className,n,i]);else{var o,a,r=e.getClassName(n);if(-1!=r.indexOf("gantt_custom_button"))if(-1!=r.indexOf("gantt_custom_button_"))for(o=n.parentNode.getAttribute("data-index"),a=n;a&&-1==e.getClassName(a).indexOf("gantt_cal_lsection");)a=a.parentNode;else o=n.getAttribute("data-index"),a=n.parentNode,n=n.firstChild;var s=t._get_typed_lightbox_config();o&&t.form_blocks[s[1*(o*=1)].type].button_click(o,n,a,a.nextSibling)}},this.event(t.getLightbox(),"click",function(i){var n=(i=i||window.event).target?i.target:i.srcElement,o=e.getClassName(n);return o||(o=e.getClassName(n=n.previousSibling)),n&&o&&0===o.indexOf("gantt_btn_set")&&(o=e.getClassName(n=n.firstChild)),!(!n||!o)&&(t.defined(t.lightbox_events[n.className])?t.lightbox_events[n.className]:t.lightbox_events.default)(i,n)}),t.getLightbox().onkeydown=function(i){var n=i||window.event,o=i.target||i.srcElement,a=e.getClassName(o).indexOf("gantt_btn_set")>-1;switch((i||n).keyCode){case t.constants.KEY_CODES.SPACE:if((i||n).shiftKey)return;a&&o.click&&o.click();break;case t.keys.edit_save:if((i||n).shiftKey)return;a&&o.click?o.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox()}}},t._cancel_lightbox=function(){var e=this.getLightboxValues();this.callEvent("onLightboxCancel",[this._lightbox_id,e.$new]),t.isTaskExists(e.id)&&e.$new&&this.silent(function(){t.$data.tasksStore.removeItem(e.id),t._update_flags(e.id,null)}),this.refreshData(),this.hideLightbox()},t._save_lightbox=function(){var t=this.getLightboxValues();this.callEvent("onLightboxSave",[this._lightbox_id,t,!!t.$new])&&(t.$new?(delete t.$new,this.addTask(t,t.parent,this.getTaskIndex(t.id))):this.isTaskExists(t.id)&&(this.mixin(this.getTask(t.id),t,!0),this.refreshTask(t.id),this.updateTask(t.id)),this.refreshData(),this.hideLightbox())},t._resolve_default_mapping=function(t){var e=t.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[t.type]?"auto"==t.map_to?e={start_date:"start_date",end_date:"end_date",duration:"duration"}:"string"==typeof t.map_to&&(e={start_date:t.map_to}):"constraint"===t.type&&(t.map_to&&"string"!=typeof t.map_to||(e={constraint_type:"constraint_type",constraint_date:"constraint_date"})),e},t.getLightboxValues=function(){var e={};t.isTaskExists(this._lightbox_id)&&(e=this.mixin({},this.getTask(this._lightbox_id)));for(var i=this._get_typed_lightbox_config(),n=0;n<i.length;n++){var o=document.getElementById(i[n].id);o=o?o.nextSibling:o;var a=this.form_blocks[i[n].type];if(a){var r=a.get_value.call(this,o,e,i[n]),s=t._resolve_default_mapping(i[n]);if("string"==typeof s&&"auto"!=s)e[s]=r;else if("object"==typeof s)for(var c in s)s[c]&&(e[s[c]]=r[c])}}return e},t.hideLightbox=function(){var t=this.getLightbox();t&&(t.style.display="none"),this._waiAria.lightboxHiddenAttr(t),this._lightbox_id=null,this.hideCover(),this.callEvent("onAfterLightbox",[])},t.hideCover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.parentNode.removeChild(t._lightbox),t._lightbox=null,t.hideCover()},t._set_lightbox_values=function(e,i){var n=e,o=i.getElementsByTagName("span"),a=[];t.templates.lightbox_header?(a.push(""),a.push(t.templates.lightbox_header(n.start_date,n.end_date,n)),o[1].innerHTML="",o[2].innerHTML=t.templates.lightbox_header(n.start_date,n.end_date,n)):(a.push(this.templates.task_time(n.start_date,n.end_date,n)),a.push(String(this.templates.task_text(n.start_date,n.end_date,n)||"").substr(0,70)),o[1].innerHTML=this.templates.task_time(n.start_date,n.end_date,n),o[2].innerHTML=String(this.templates.task_text(n.start_date,n.end_date,n)||"").substr(0,70)),o[1].innerHTML=a[0],o[2].innerHTML=a[1],t._waiAria.lightboxHeader(i,a.join(" "));for(var r=this._get_typed_lightbox_config(this.getLightboxType()),s=0;s<r.length;s++){var c=r[s];if(this.form_blocks[c.type]){var l=document.getElementById(c.id).nextSibling,u=this.form_blocks[c.type],d=t._resolve_default_mapping(r[s]),h=this.defined(n[d])?n[d]:c.default_value;u.set_value.call(t,l,h,n,c),c.focus&&u.focus.call(t,l)}}e.id&&(t._lightbox_id=e.id)},t._fill_lightbox=function(t,e){var i=this.getTask(t);this._set_lightbox_values(i,e)},t.getLightboxSection=function(e){for(var i=this._get_typed_lightbox_config(),n=0;n<i.length&&i[n].name!=e;n++);var o=i[n];if(!o)return null;this._lightbox||this.getLightbox();var a=document.getElementById(o.id),r=a.nextSibling,s={section:o,header:a,node:r,getValue:function(e){return t.form_blocks[o.type].get_value.call(t,r,e||{},o)},setValue:function(e,i){return t.form_blocks[o.type].set_value.call(t,r,e,i||{},o)}},c=this._lightbox_methods["get_"+o.type+"_control"];return c?c(s):s},t._lightbox_methods.get_template_control=function(t){return t.control=t.node,t},t._lightbox_methods.get_select_control=function(t){return t.control=t.node.getElementsByTagName("select")[0],t},t._lightbox_methods.get_textarea_control=function(t){return t.control=t.node.getElementsByTagName("textarea")[0],t},t._lightbox_methods.get_time_control=function(t){return t.control=t.node.getElementsByTagName("select"),t},t._init_dnd_events=function(){this.event(document.body,"mousemove",t._move_while_dnd),this.event(document.body,"mouseup",t._finish_dnd),t._init_dnd_events=function(){}},t._move_while_dnd=function(e){if(t._dnd_start_lb){document.gantt_unselectable||(document.body.className+=" gantt_unselectable",document.gantt_unselectable=!0);var i=t.getLightbox(),n=[e.pageX,e.pageY];i.style.top=t._lb_start[1]+n[1]-t._dnd_start_lb[1]+"px",i.style.left=t._lb_start[0]+n[0]-t._dnd_start_lb[0]+"px"}},t._ready_to_dnd=function(e){var i=t.getLightbox();t._lb_start=[parseInt(i.style.left,10),parseInt(i.style.top,10)],t._dnd_start_lb=[e.pageX,e.pageY]},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,document.body.className=document.body.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},t._focus=function(e,i){if(e&&e.focus)if(t.config.touch);else try{i&&e.select&&e.select(),e.focus()}catch(t){}},t.form_blocks={getTimePicker:function(e,i){var o,a,r,s="",c=this.config,l={first:0,last:1440,date:this.date.date_part(new Date(t._min_date.valueOf())),timeFormat:function(e){var i,o;return e.time_format?e.time_format:(o=["%d","%m","%Y"],i=t.getScale(),n.getSecondsInUnit(i?i.unit:t.config.duration_unit)<n.getSecondsInUnit("day")&&o.push("%H:%i"),o)}(e)};for(e._time_format_order={size:0},t.config.limit_time_select&&(l.first=60*c.first_hour,l.last=60*c.last_hour+1,l.date.setHours(c.first_hour)),o=0;o<l.timeFormat.length;o++)o>0&&(s+=" "),(a=m(e,o,l))&&(r=t._waiAria.lightboxSelectAttrString(l.timeFormat[o]),s+="<select "+(e.readonly?"disabled='disabled'":"")+(i?" style='display:none' ":"")+r+">"+a+"</select>");return s},getTimePickerValue:function(e,i,n){var o,a=i._time_format_order,r=0,s=0,c=n||0;return t.defined(a[3])&&(o=parseInt(e[a[3]+c].value,10),r=Math.floor(o/60),s=o%60),new Date(e[a[2]+c].value,e[a[1]+c].value,e[a[0]+c].value,r,s)},_fill_lightbox_select:function(e,i,n,o){if(e[i+o[0]].value=n.getDate(),e[i+o[1]].value=n.getMonth(),e[i+o[2]].value=n.getFullYear(),t.defined(o[3])){var a=60*n.getHours()+n.getMinutes();a=Math.round(a/t._get_timepicker_step())*t._get_timepicker_step();var r=e[i+o[3]];r.value=a,r.setAttribute("data-value",a)}},template:new o,textarea:new a,select:new s,time:new r,duration:new u,parent:new d,radio:new l,checkbox:new c,resources:new h,constraint:new p,typeselect:new f},t._is_lightbox_timepicker=function(){for(var t=this._get_typed_lightbox_config(),e=0;e<t.length;e++)if("time"==t[e].name&&"time"==t[e].type)return!0;return!1},t._dhtmlx_confirm=function(e,i,n,o){if(!e)return n();var a={text:e};i&&(a.title=i),o&&(a.ok=o),n&&(a.callback=function(t){t&&n()}),t.confirm(a)},t._get_typed_lightbox_config=function(e){void 0===e&&(e=this.getLightboxType());var i=(function(t){for(var e in this.config.types)if(this.config.types[e]==t)return e;return"task"}).call(this,e);return t.config.lightbox[i+"_sections"]?t.config.lightbox[i+"_sections"]:t.config.lightbox.sections},t._silent_redraw_lightbox=function(t){var e=this.getLightboxType();if(this.getState().lightbox){var i=this.getState().lightbox,n=this.getLightboxValues(),o=this.copy(this.getTask(i));this.resetLightbox();var a=this.mixin(o,n,!0),r=this.getLightbox(t||void 0);this._center_lightbox(this.getLightbox()),this._set_lightbox_values(a,r),this.showCover()}else this.resetLightbox(),this.getLightbox(t||void 0);this.callEvent("onLightboxChange",[e,this.getLightboxType()])}}},function(t,e){t.exports=function(t){function e(e){var i=e.$config.scrollX?t.$ui.getView(e.$config.scrollX):null,n=e.$config.scrollY?t.$ui.getView(e.$config.scrollY):null,o={x:null,y:null};return i&&i.getScrollState().visible&&(o.x=i.$view.scrollLeft),n&&n.getScrollState().visible&&(o.y=n.$view.scrollTop),o}function i(){var e;return t.$ui.getView("timeline")&&(e=t.$ui.getView("timeline")._tasks_dnd),e}t.config.touch_drag=500,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration)},t.attachEvent("onGanttReady",t.bind(function(){if("force"!=this.config.touch&&(this.config.touch=this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch(e){t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t},function(){return!1}):window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(t){return"mouse"==t.pointerType?null:t},function(t){return!t||"mouse"==t.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t},function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE})}},t));var n=[];t._touch_events=function(o,a,r){for(var s,c=0,l=!1,u=!1,d=null,h=null,p=null,f=[],g=null,m=0;m<n.length;m++)t.eventRemove(n[m][0],n[m][1],n[m][2]);for((n=[]).push([t.$container,o[0],function(n){var o=i();if(!r(n)&&l){h&&clearTimeout(h);var p=a(n);if(o&&(o.drag.id||o.drag.start_drag))return o.on_mouse_move(p),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if(p&&d){var f=d.pageX-p.pageX,m=d.pageY-p.pageY;if(!u&&(Math.abs(f)>5||Math.abs(m)>5)&&(u=!0,c=0,s=g?e(g):t.getScrollState()),u){var b,_=s.x+f,w=s.y+m;if(g?(function(e,i,n){var o=e.$config.scrollX?t.$ui.getView(e.$config.scrollX):null,a=e.$config.scrollY?t.$ui.getView(e.$config.scrollY):null;o&&o.scrollTo(i,null),a&&a.scrollTo(null,n)}(g,_,w),b=e(g)):(t.scrollTo(_,w),b=t.getScrollState()),s.x!=b.x&&m>2*f||s.y!=b.y&&f>2*m)return v(n)}}return v(n)}return!0}}]),n.push([this.$container,"contextmenu",function(t){if(l)return v(t)}]),n.push([this.$container,o[1],function(e){if(!r(e))if(e.touches&&e.touches.length>1)l=!1;else{d=a(e),g=function(e){for(var i=t.$layout.getCellsByType("viewCell"),n=0;n<i.length;n++){var o=i[n].$view.getBoundingClientRect();if(e.clientX>=o.left&&e.clientX<=o.right&&e.clientY<=o.bottom&&e.clientY>=o.top)return i[n]}}(d),t._locate_css(d,"gantt_hor_scroll")||t._locate_css(d,"gantt_ver_scroll")||(l=!0);var n=i();h=setTimeout(function(){var e=t.locate(d);n&&e&&!t._locate_css(d,"gantt_link_control")&&!t._locate_css(d,"gantt_grid_data")&&(n.on_mouse_down(d),n.drag&&n.drag.start_drag&&(function(e){var i=t._getTaskLayers(),n=t.getTask(e);if(n&&t.isTaskVisible(e)){p=e;for(var o=0;o<i.length;o++)if((n=i[o].rendered[e])&&n.getAttribute(t.config.task_attribute)&&n.getAttribute(t.config.task_attribute)==e){var a=n.cloneNode(!0);f.push(n),i[o].rendered[e]=a,n.style.display="none",a.className+=" gantt_drag_move ",n.parentNode.appendChild(a)}}}(e),n._start_dnd(d),t._touch_drag=!0,t.refreshTask(e),t._touch_feedback())),h=null},t.config.touch_drag)}}]),n.push([this.$container,o[2],function(e){if(!r(e)){h&&clearTimeout(h),t._touch_drag=!1,l=!1;var n=a(e),o=i();if(o&&o.on_mouse_up(n),p&&t.isTaskExists(p)&&(t.refreshTask(p),f.length&&(f.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)}),t._touch_feedback())),l=u=!1,f=[],p=null,d&&c){var s=new Date;s-c<500?(t.$services.getService("mouseEvents").onDoubleClick(d),v(e)):c=s}else c=new Date}}]),m=0;m<n.length;m++)t.event(n[m][0],n[m][1],n[m][2]);function v(t){return t&&t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(6),o=i(4),a=i(10),r=["ctrlKey","altKey","shiftKey","metaKey"],s=[[{unit:"month",date:"%M",step:1},{unit:"day",date:"%d",step:1}],[{unit:"day",date:"%d %M",step:1}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:8}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:1}]],c=function(){function t(t){var e=this;this.zoomIn=function(){var t=e.getCurrentLevel()-1;t<0||e.setLevel(t)},this.zoomOut=function(){var t=e.getCurrentLevel()+1;t>e._levels.length-1||e.setLevel(t)},this.getCurrentLevel=function(){return e._activeLevelIndex},this.getLevels=function(){return e._levels},this.setLevel=function(t){var i=e._getZoomIndexByName(t);-1===i&&e.$gantt.assert(-1!==i,"Invalid zoom level for gantt.ext.zoom.setLevel. "+t+" is not an expected value."),e._setLevel(i,0)},this._getZoomIndexByName=function(t){var i=-1;if("string"==typeof t){if(!isNaN(Number(t))&&e._levels[Number(t)])i=Number(t);else for(var n=0;n<e._levels.length;n++)if(e._levels[n].name===t){i=n;break}}else i=t;return i},this._getVisibleDate=function(){var t=e.$gantt.getScrollState().x;e._visibleDate=e.$gantt.dateFromPos(t+e.$gantt.$task.offsetWidth/2)},this._setLevel=function(t,i){e._activeLevelIndex=t;var n=e.$gantt,o=n.copy(e._levels[e._activeLevelIndex]),a=n.copy(o);if(delete a.name,n.mixin(n.config,a,!0),n.$root){if(i){var r=e.$gantt.dateFromPos(i+e.$gantt.getScrollState().x);e.$gantt.render();var s=e.$gantt.posFromDate(r);e.$gantt.scrollTo(s-i)}else{var c=e.$gantt.$task.offsetWidth;e._visibleDate||e._getVisibleDate();var l=e._visibleDate;e.$gantt.render(),s=e.$gantt.posFromDate(l),e.$gantt.scrollTo(s-c/2)}e.callEvent("onAfterZoom",[e._activeLevelIndex,o])}},this._attachWheelEvent=function(t){var i,o=n.isFF?"wheel":"mousewheel";(i="function"==typeof t.element?t.element():t.element)&&e._domEvents.attach(i,o,e.$gantt.bind(function(t){if(this._useKey){if(r.indexOf(this._useKey)<0)return!1;if(!t[this._useKey])return!1}if("function"==typeof this._handler)return this._handler.apply(this,[t]),!0},e))},this._defaultHandler=function(t){var i=e.$gantt.$task.getBoundingClientRect().x,n=t.clientX-i,o=!1;(e.$gantt.env.isFF?-40*t.deltaY:t.wheelDelta)>0&&(o=!0),t.preventDefault(),t.stopPropagation(),e._setScaleSettings(o,n)},this._setScaleDates=function(){e._initialStartDate&&e._initialEndDate&&(e.$gantt.config.start_date=e._initialStartDate,e.$gantt.config.end_date=e._initialEndDate)},this.$gantt=t,this._domEvents=this.$gantt._createDomEventScope()}return t.prototype.init=function(t){var e=this;a(this.$gantt)&&(this._initialStartDate=t.startDate,this._initialEndDate=t.endDate,this._activeLevelIndex=t.activeLevelIndex?t.activeLevelIndex:0,this._levels=this._mapScales(t.levels||s),this._handler=t.handler||this._defaultHandler,this._minColumnWidth=t.minColumnWidth||60,this._maxColumnWidth=t.maxColumnWidth||240,this._widthStep=t.widthStep||3/8*t.minColumnWidth,this._useKey=t.useKey,this._initialized||(o(this),this.$gantt.attachEvent("onGanttScroll",function(){e._getVisibleDate()})),this._domEvents.detachAll(),"wheel"===t.trigger&&(this.$gantt.$root?this._attachWheelEvent(t):this.$gantt.attachEvent("onGanttReady",function(){e._attachWheelEvent(t)})),this._initialized=!0,this.setLevel(this._activeLevelIndex))},t.prototype._mapScales=function(t){return t.map(function(t){return Array.isArray(t)?{scales:t}:t})},t.prototype._setScaleSettings=function(t,e){t?this._stepUp(e):this._stepDown(e)},t.prototype._stepUp=function(t){if(!(this._activeLevelIndex>=this._levels.length-1)){var e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){var i=this.$gantt.config.min_column_width+this._widthStep;i>this._maxColumnWidth&&(i=this._minColumnWidth,e++),this.$gantt.config.min_column_width=i}else e++;this._setLevel(e,t)}},t.prototype._stepDown=function(t){if(!(this._activeLevelIndex<1)){var e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){var i=this.$gantt.config.min_column_width-this._widthStep;i<this._minColumnWidth&&(i=this._maxColumnWidth,e--),this.$gantt.config.min_column_width=i}else e--;this._setLevel(e,t)}},t}();e.default=c},function(t,e){window.dhtmlx&&(window.dhtmlx.attaches||(window.dhtmlx.attaches={}),window.dhtmlx.attaches.attachGantt=function(t,e,i){var n=document.createElement("DIV");i=i||window.gantt,n.id="gantt_"+i.uid(),n.style.width="100%",n.style.height="100%",n.cmp="grid",document.body.appendChild(n),this.attachObject(n.id),this.dataType="gantt",this.dataObj=i;var o=this.vs[this.av];return o.grid=i,i.init(n.id,t,e),n.firstChild.style.border="none",o.gridId=n.id,o.gridObj=n,this.vs[this._viewRestore()].grid}),void 0!==window.dhtmlXCellObject&&(window.dhtmlXCellObject.prototype.attachGantt=function(t,e,i){i=i||window.gantt;var n=document.createElement("DIV");return n.id="gantt_"+i.uid(),n.style.width="100%",n.style.height="100%",n.cmp="grid",document.body.appendChild(n),this.attachObject(n.id),this.dataType="gantt",this.dataObj=i,i.init(n.id,t,e),n.firstChild.style.border="none",n=null,this.callEvent("_onContentAttach",[]),this.dataObj}),t.exports=null},function(t,e){window.jQuery&&function(t){var e=[];t.fn.dhx_gantt=function(i){if("string"!=typeof(i=i||{})){var n=[];return this.each(function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)n.push("object"==typeof this.gantt?this.gantt:window.gantt);else{var t=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var e in i)"data"!=e&&(t.config[e]=i[e]);t.init(this),i.data&&t.parse(i.data),n.push(t)}}),1===n.length?n[0]:n}if(e[i])return e[i].apply(this,[]);t.error("Method "+i+" does not exist on jQuery.dhx_gantt")}}(window.jQuery),t.exports=null},function(t,e,i){var n=i(1),o=i(10);t.exports=function(t){var e=null,i=!1,a=null,r={started:!1},s={};function c(e){return e&&n.isChildOf(e,t.$root)&&e.offsetHeight}function l(){var e=!!document.querySelector(".gantt_drag_marker"),n=!!document.querySelector(".gantt_drag_marker.gantt_grid_resize_area"),o=!!document.querySelector(".gantt_link_direction"),a=t.getState();return i=e&&!n&&!o,!(!a.drag_mode&&!e||n)||a.autoscroll}function u(i){if(a&&(clearTimeout(a),a=null),i){var n=t.config.autoscroll_speed;n&&n<10&&(n=10),a=setTimeout(function(){e=setInterval(p,n||50)},t.config.autoscroll_delay||10)}}function d(t){t?(u(!0),r.started||(r.x=s.x,r.y=s.y,r.started=!0)):(e&&(clearInterval(e),e=null),u(!1),r.started=!1)}function h(i){var n=l();if(!e&&!a||n||d(!1),!t.config.autoscroll||!n)return!1;s={x:i.clientX,y:i.clientY},!e&&n&&d(!0)}function p(){if(!l())return d(!1),!1;var e=c(t.$task)?t.$task:c(t.$grid)?t.$grid:t.$root;if(e){var o=n.getNodePosition(e),a=s.y-o.y,u=i?0:f(s.x-o.x,o.width,r.x-o.x),h=f(a,o.height,r.y-o.y),p=t.getScrollState(),g=p.y,m=p.inner_height,v=p.x,b=p.inner_width;(h&&!m||h<0&&!g||h>0&&g+m>=p.height+2)&&(h=0),(u&&!b||u<0&&!v||u>0&&v+b>=p.width)&&(u=0);var _=t.config.autoscroll_step;_&&_<2&&(_=2),h*=_||30,((u*=_||30)||h)&&function(e,i){var n=t.getScrollState(),o=null,a=null;e&&(o=n.x+e,o=Math.min(n.width,o),o=Math.max(0,o)),i&&(a=n.y+i,a=Math.min(n.height,a),a=Math.max(0,a)),t.scrollTo(o,a)}(u,h)}}function f(t,e,i){return t-50<0&&t<i?-1:t>e-50&&t>i?1:0}t.attachEvent("onGanttReady",function(){o(t)||(t.eventRemove(document.body,"mousemove",h),t.event(document.body,"mousemove",h),t.eventRemove(document.body,"touchmove",h),t.event(document.body,"touchmove",h),t.eventRemove(document.body,"pointermove",h),t.event(document.body,"pointermove",h))}),t.attachEvent("onDestroy",function(){d(!1)})}},function(t,e,i){t.exports=function(t){t.ext||(t.ext={});for(var e=[i(69),i(68),i(67)],n=0;n<e.length;n++)e[n]&&e[n](t);var o=i(66).default;t.ext.zoom=new o(t)}},function(t,e){t.exports=function(t){t.skins.contrast_white={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}},function(t,e){t.exports=function(t){t.skins.contrast_black={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}},function(t,e){t.exports=function(t){t.skins.material={config:{grid_width:411,row_height:34,task_height_offset:6,scale_height:36,link_line_width:2,link_arrow_size:6,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:["dhx_delete_btn"],buttons_right:["dhx_save_btn","dhx_cancel_btn"]}},t.attachEvent("onAfterTaskDrag",function(e){var i=t.getTaskNode(e);i&&(i.className+=" gantt_drag_animation",setTimeout(function(){var t=i.className.indexOf(" gantt_drag_animation");t>-1&&(i.className=i.className.slice(0,t))},200))})}},function(t,e){t.exports=function(t){t.skins.broadway={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:7,lightbox_additional_height:86},_second_column_width:90,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}}}},function(t,e){t.exports=function(t){t.skins.terrace={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:90,_third_column_width:70}}},function(t,e){t.exports=function(t){t.skins.meadow={config:{grid_width:350,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:6,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80}}},function(t,e){t.exports=function(t){t.skins.skyblue={config:{grid_width:350,row_height:27,scale_height:27,link_line_width:1,link_arrow_size:8,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80}}},function(t,e){function i(t,e){var i=e.skin;if(!i||t)for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o].href.match("dhtmlxgantt_([a-z_]+).css");if(a&&(e.skins[a[1]]||!i)){i=a[1];break}}e.skin=i||"terrace";var r=e.skins[e.skin]||e.skins.terrace;!function(t,e,i){for(var n in e)(void 0===t[n]||i)&&(t[n]=e[n])}(e.config,r.config,t);var s=e.getGridColumns();for(s[1]&&!e.defined(s[1].width)&&(s[1].width=r._second_column_width),s[2]&&!e.defined(s[2].width)&&(s[2].width=r._third_column_width),o=0;o<s.length;o++){var c=s[o];"add"==c.name&&(c.width||(c.width=44),e.defined(c.min_width)&&e.defined(c.max_width)||(c.min_width=c.min_width||c.width,c.max_width=c.max_width||c.width),c.min_width&&(c.min_width=+c.min_width),c.max_width&&(c.max_width=+c.max_width),c.width&&(c.width=+c.width,c.width=c.min_width&&c.min_width>c.width?c.min_width:c.width,c.width=c.max_width&&c.max_width<c.width?c.max_width:c.width))}r.config.task_height&&(e.config.task_height=r.config.task_height||"full"),r._lightbox_template&&(e._lightbox_template=r._lightbox_template),r._redefine_lightbox_buttons&&(e.config.buttons_right=r._redefine_lightbox_buttons.buttons_right,e.config.buttons_left=r._redefine_lightbox_buttons.buttons_left),e.resetLightbox()}t.exports=function(t){t.resetSkin||(t.resetSkin=function(){this.skin="",i(!0,this)},t.skins={},t.attachEvent("onGanttLayoutReady",function(){i(!1,this)}))}},function(t,e){t.exports=function(){function t(t){return t.$ui.getView("timeline")}function e(t){return t.$ui.getView("grid")}function i(t){return t.$ui.getView("scrollVer")}function n(t){return t.$ui.getView("scrollHor")}var o="DEFAULT_VALUE";function a(t,e,i,n){var a=t(this);return a&&a.isVisible()?a[e].apply(a,i):n?n():o}return{getColumnIndex:function(t){var i=a.call(this,e,"getColumnIndex",[t]);return i===o?0:i},dateFromPos:function(e){var i=a.call(this,t,"dateFromPos",Array.prototype.slice.call(arguments));return i===o?this.getState().min_date:i},posFromDate:function(e){var i=a.call(this,t,"posFromDate",[e]);return i===o?0:i},getRowTop:function(i){var n=this,r=a.call(n,t,"getRowTop",[i],function(){return a.call(n,e,"getRowTop",[i])});return r===o?0:r},getTaskTop:function(i){var n=this,r=a.call(n,t,"getItemTop",[i],function(){return a.call(n,e,"getItemTop",[i])});return r===o?0:r},getTaskPosition:function(e,i,n){var r=a.call(this,t,"getItemPosition",[e,i,n]);return r===o?{left:0,top:this.getTaskTop(e.id),height:this.getTaskHeight(),width:0}:r},getTaskHeight:function(){var i=this,n=a.call(i,t,"getItemHeight",[],function(){return a.call(i,e,"getItemHeight",[])});return n===o?0:n},columnIndexByDate:function(e){var i=a.call(this,t,"columnIndexByDate",[e]);return i===o?0:i},roundTaskDates:function(){a.call(this,t,"roundTaskDates",[])},getScale:function(){var e=a.call(this,t,"getScale",[]);return e===o?null:e},getTaskNode:function(e){var i=t(this);if(i&&i.isVisible()){var n=i._taskRenderer.rendered[e];return n||(n=i.$task_bars.querySelector("["+i.$config.item_attribute+"='"+e+"']")),n||null}return null},getLinkNode:function(e){var i=t(this);return i.isVisible()?i._linkRenderer.rendered[e]:null},scrollTo:function(t,e){var o=i(this),a=n(this),r={position:0},s={position:0};o&&(s=o.getScrollState()),a&&(r=a.getScrollState()),a&&1*t==t&&a.scroll(t),o&&1*e==e&&o.scroll(e);var c={position:0},l={position:0};o&&(c=o.getScrollState()),a&&(l=a.getScrollState()),this.callEvent("onGanttScroll",[r.position,s.position,l.position,c.position])},showDate:function(t){var e=this.posFromDate(t),i=Math.max(e-this.config.task_scroll_offset,0);this.scrollTo(i)},showTask:function(t){var e=this.getTaskPosition(this.getTask(t)),i=Math.max(e.left-this.config.task_scroll_offset,0),n=this._scroll_state().y;this.scrollTo(i,n?e.top-(n-this.config.row_height)/2:e.top)},_scroll_state:function(){var t={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},e=i(this),o=n(this);if(o){var a=o.getScrollState();a.visible&&(t.x=a.size,t.x_inner=a.scrollSize),t.x_pos=a.position||0}if(e){var r=e.getScrollState();r.visible&&(t.y=r.size,t.y_inner=r.scrollSize),t.y_pos=r.position||0}return t},getScrollState:function(){var t=this._scroll_state();return{x:t.x_pos,y:t.y_pos,inner_width:t.x,inner_height:t.y,width:t.x_inner,height:t.y_inner}}}}},function(t,e){t.exports=function(t){}},function(t,e,i){var n=i(1);t.exports=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView("scrollVer")},getHorizontalScrollbar:function(){return t.$ui.getView("scrollHor")},_legacyGridResizerClass:function(t){for(var e=t.getCellsByType("resizer"),i=0;i<e.length;i++){var n=e[i],o=!1,a=n.$parent.getPrevSibling(n.$id);if(a&&a.$config&&"grid"===a.$config.id)o=!0;else{var r=n.$parent.getNextSibling(n.$id);r&&r.$config&&"grid"===r.$config.id&&(o=!0)}o&&(n.$config.css=(n.$config.css?n.$config.css+" ":"")+"gantt_grid_resize_wrap")}},onCreated:function(e){var i=!0;this._legacyGridResizerClass(e),e.attachEvent("onBeforeResize",function(){var o=t.$ui.getView("timeline");o&&(o.$config.hidden=o.$parent.$config.hidden=!t.config.show_chart);var a=t.$ui.getView("grid");if(a){var r=t.config.show_grid;if(i){var s=a._getColsTotalWidth();!1!==s&&(t.config.grid_width=s),t.config.show_grid=r=r&&!!t.config.grid_width}if(a.$config.hidden=a.$parent.$config.hidden=!r,!a.$config.hidden){var c=a._getGridWidthLimits();if(c[0]&&t.config.grid_width<c[0]&&(t.config.grid_width=c[0]),c[1]&&t.config.grid_width>c[1]&&(t.config.grid_width=c[1]),o&&t.config.show_chart)if(a.$config.width=t.config.grid_width-1,i)a.$parent.$config.width=t.config.grid_width,a.$parent.$config.group&&t.$layout._syncCellSizes(a.$parent.$config.group,a.$parent.$config.width);else if(o&&!n.isChildOf(o.$task,e.$view)){if(!a.$config.original_grid_width){var l=t.skins[t.skin];a.$config.original_grid_width=l&&l.config&&l.config.grid_width?l.config.grid_width:0}t.config.grid_width=a.$config.original_grid_width,a.$parent.$config.width=t.config.grid_width}else a.$parent._setContentSize(a.$config.width,null),t.$layout._syncCellSizes(a.$parent.$config.group,t.config.grid_width);else o&&n.isChildOf(o.$task,e.$view)&&(a.$config.original_grid_width=t.config.grid_width),i||(a.$parent.$config.width=0)}i=!1}}),this._initScrollStateEvents(e)},_initScrollStateEvents:function(e){t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var i=this.getVerticalScrollbar(),n=this.getHorizontalScrollbar();i&&i.attachEvent("onScroll",function(e,i,n){var o=t.getScrollState();t.callEvent("onGanttScroll",[o.x,e,o.x,i])}),n&&n.attachEvent("onScroll",function(e,i,n){var o=t.getScrollState();t.callEvent("onGanttScroll",[e,o.y,i,o.y])}),e.attachEvent("onResize",function(){i&&!t.$scroll_ver&&(t.$scroll_ver=i.$scroll_ver),n&&!t.$scroll_hor&&(t.$scroll_hor=n.$scroll_hor)})},_findGridResizer:function(t,e){for(var i,n=t.getCellsByType("resizer"),o=!0,a=0;a<n.length;a++){var r=n[a];r._getSiblings();var s=r._behind,c=r._front;if(s&&s.$content===e||s.isChild&&s.isChild(e)){i=r,o=!0;break}if(c&&c.$content===e||c.isChild&&c.isChild(e)){i=r,o=!1;break}}return{resizer:i,gridFirst:o}},onInitialized:function(e){var i=t.$ui.getView("grid"),n=this._findGridResizer(e,i);if(n.resizer){var o,a=n.gridFirst,r=n.resizer;r.attachEvent("onResizeStart",function(e,i){var n=t.$ui.getView("grid"),r=n?n.$parent:null;if(r){var s=n._getGridWidthLimits();n.$config.scrollable||(r.$config.minWidth=s[0]),r.$config.maxWidth=s[1]}return t.callEvent("onGridResizeStart",[o=a?e:i])}),r.attachEvent("onResize",function(e,i){return t.callEvent("onGridResize",[o,a?e:i])}),r.attachEvent("onResizeEnd",function(e,i,n,o){var r=a?e:i,s=a?n:o,c=t.$ui.getView("grid"),l=c?c.$parent:null;l&&(l.$config.minWidth=void 0);var u=t.callEvent("onGridResizeEnd",[r,s]);return u&&(t.config.grid_width=s),u})}},onDestroyed:function(t){}}}},function(t,e,i){var n=i(1),o=function(t,e){var i,o,a,r,s;function c(){return{link_source_id:r,link_target_id:o,link_from_start:s,link_to_start:a,link_landing_area:i}}var l=e.$services,u=l.getService("state"),d=l.getService("dnd");u.registerProvider("linksDnD",c);var h=new d(t.$task_bars,{sensitivity:0,updates_per_second:60,mousemoveContainer:e.$root,selector:".gantt_link_point",preventDefault:!0});function p(i,n,o,a,r){var s=function(i,n,o){var a=function(t){return e.getTaskPosition(t)}(i),r={x:a.left,y:a.top,width:a.width,height:a.height};if(o.rtl?(r.xEnd=r.x,r.x=r.xEnd+r.width):r.xEnd=r.x+r.width,r.yEnd=r.y+r.height,e.getTaskType(i.type)==e.config.types.milestone){var s=function(){var e=t.getItemHeight();return Math.round(Math.sqrt(2*e*e))-2}();r.x+=s/2*(o.rtl?1:-1),r.xEnd+=s/2*(o.rtl?-1:1),r.width=a.xEnd-a.x}return r}(i,0,a),c={x:s.x,y:s.y};n||(c.x=s.xEnd),c.y+=e.config.row_height/2;var l=function(t){return e.getTaskType(t.type)==e.config.types.milestone}(i)&&r?2:0;return o=o||0,a.rtl&&(o*=-1),c.x+=(n?-1:1)*o-l,c}function f(t){var i=c(),n=["gantt_link_tooltip"];i.link_source_id&&i.link_target_id&&(e.isLinkAllowed(i.link_source_id,i.link_target_id,i.link_from_start,i.link_to_start)?n.push("gantt_allowed_link"):n.push("gantt_invalid_link"));var o=e.templates.drag_link_class(i.link_source_id,i.link_from_start,i.link_target_id,i.link_to_start);o&&n.push(o);var a="<div class='"+o+"'>"+e.templates.drag_link(i.link_source_id,i.link_from_start,i.link_target_id,i.link_to_start)+"</div>";t.innerHTML=a}function g(){r=s=o=null,a=!0}function m(i,n,o,a){var r=(h._direction&&h._direction.parentNode||(h._direction=document.createElement("div"),t.$task_links.appendChild(h._direction)),h._direction),s=c(),l=["gantt_link_direction"];e.templates.link_direction_class&&l.push(e.templates.link_direction_class(s.link_source_id,s.link_from_start,s.link_target_id,s.link_to_start));var u=Math.sqrt(Math.pow(o-i,2)+Math.pow(a-n,2));if(u=Math.max(0,u-3)){r.className=l.join(" ");var d=Math.atan((a-n)/(o-i));2==v(i,o,n,a)?d+=Math.PI:3==v(i,o,n,a)&&(d-=Math.PI);var p=Math.sin(d),f=Math.cos(d),g=Math.round(n),m=Math.round(i),b=["-webkit-transform: rotate("+d+"rad)","-moz-transform: rotate("+d+"rad)","-ms-transform: rotate("+d+"rad)","-o-transform: rotate("+d+"rad)","transform: rotate("+d+"rad)","width:"+Math.round(u)+"px"];if(-1!=window.navigator.userAgent.indexOf("MSIE 8.0")){b.push('-ms-filter: "'+function(t,e){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+e+",M12 = -"+t+",M21 = "+t+",M22 = "+e+",SizingMethod = 'auto expand')"}(p,f)+'"');var _=Math.abs(Math.round(i-o)),w=Math.abs(Math.round(a-n));switch(v(i,o,n,a)){case 1:g-=w;break;case 2:m-=_,g-=w;break;case 3:m-=_}}b.push("top:"+g+"px"),b.push("left:"+m+"px"),r.style.cssText=b.join(";")}}function v(t,e,i,n){return e>=t?n<=i?1:4:n<=i?2:3}h.attachEvent("onBeforeDragStart",e.bind(function(i,o){var a=o.target||o.srcElement;if(g(),e.getState("tasksDnd").drag_id)return!1;if(n.locateClassName(a,"gantt_link_point")){n.locateClassName(a,"task_start_date")&&(s=!0);var c=e.locate(o);r=c;var l=e.getTask(c);return e.isReadonly(l)?(g(),!1):(this._dir_start=p(l,!!s,0,t.$getConfig(),!0),!0)}return!1},this)),h.attachEvent("onAfterDragStart",e.bind(function(t,i){e.config.touch&&e.refreshData(),f(h.config.marker)},this)),h.attachEvent("onDragMove",e.bind(function(r,s){var c=h.config,l=function(t,i){var n=h.getPosition(t),o=function(t){var e=0,i=0;return t&&(e=t.offsetWidth||0,i=t.offsetHeight||0),{width:e,height:i}}(i),a=function(){var t=e.$root;return{right:t.offsetWidth,bottom:t.offsetHeight}}(),r=e.config.tooltip_offset_x||10,s=e.config.tooltip_offset_y||10,c=e.config.scroll_size||18,l={y:n.y+s,x:n.x+r,bottom:n.y+o.height+s+c,right:n.x+o.width+r+c};return l.bottom>a.bottom&&(l.y=a.bottom-o.height-s),l.right>a.right&&(l.x=a.right-o.width-r),l}(s,c.marker);!function(t,e){t.style.left=e.x+"px",t.style.top=e.y+"px"}(c.marker,l);var u=!!n.locateClassName(s,"gantt_link_control"),d=o,g=i,v=a,b=e.locate(s),_=!0;if(n.isChildOf(s.target||s.srcElement,e.$root)||(u=!1,b=null),u&&(_=!n.locateClassName(s,"task_end_date"),u=!!b),o=b,i=u,a=_,u){var w=e.getTask(b),y=t.$getConfig(),k=n.locateClassName(s,"gantt_link_control"),x=0;k&&(x=Math.floor(k.offsetWidth/2)),this._dir_end=p(w,!!a,x,y)}else this._dir_end=n.getRelativeEventPosition(s,t.$task_data),e.env.isEdge&&(this._dir_end.y+=window.scrollY);var S=!(g==u&&d==b&&v==_);return S&&(d&&e.refreshTask(d,!1),b&&e.refreshTask(b,!1)),S&&f(c.marker),m(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0},this)),h.attachEvent("onDragEnd",e.bind(function(){var t=c();if(t.link_source_id&&t.link_target_id&&t.link_source_id!=t.link_target_id){var i=e._get_link_type(t.link_from_start,t.link_to_start),n={source:t.link_source_id,target:t.link_target_id,type:i};n.type&&e.isLinkAllowed(n)&&e.callEvent("onLinkCreated",[n])&&e.addLink(n)}g(),e.config.touch?e.refreshData():(t.link_source_id&&e.refreshTask(t.link_source_id,!1),t.link_target_id&&e.refreshTask(t.link_target_id,!1)),h._direction&&(h._direction.parentNode&&h._direction.parentNode.removeChild(h._direction),h._direction=null)},this)),e.attachEvent("onGanttRender",e.bind(function(){h._direction&&m(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y)},this))};t.exports={createLinkDND:function(){return{init:o}}}},function(t,e,i){var n=i(1),o=i(0),a=i(46),r=i(3);t.exports={createTaskDND:function(){var t;return{extend:function(e){e.roundTaskDates=function(e){t.round_task_dates(e)}},init:function(e,i){return t=function(t,e){var i=e.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=e._createDomEventScope(),this.clear_drag_state();var t=e.config.drag_mode;this.set_actions(),i.getService("state").registerProvider("tasksDnd",o.bind(function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0}},this));var n={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var a in this._events)for(var r in t)this._events[a][r]=n[a];this._handlers[t.move]=this._move,this._handlers[t.resize]=this._resize,this._handlers[t.progress]=this._resize_progress},set_actions:function(){var i=t.$task_data;this._domEvents.attach(i,"mousemove",e.bind(function(t){this.on_mouse_move(t)},this)),this._domEvents.attach(i,"mousedown",e.bind(function(t){this.on_mouse_down(t)},this)),this._domEvents.attach(document.body,"mouseup",e.bind(function(t){this.on_mouse_up(t)},this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={}},_resize:function(i,n,o){var a=t.$getConfig(),r=this._drag_task_coords(i,o);o.left?(i.start_date=e.dateFromPos(r.start+n),i.start_date||(i.start_date=new Date(e.getState().min_date))):(i.end_date=e.dateFromPos(r.end+n),i.end_date||(i.end_date=new Date(e.getState().max_date)));var s=this._calculateMinDuration(a.min_duration,a.duration_unit);i.end_date-i.start_date<a.min_duration&&(o.left?i.start_date=e.calculateEndDate(i.end_date,-s,a.duration_unit,i):i.end_date=e.calculateEndDate(i.start_date,s,a.duration_unit,i)),e._init_task_timing(i)},_calculateMinDuration:function(t,e){return Math.ceil(t/{minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:31356e6}[e])},_resize_progress:function(e,i,n){var o=this._drag_task_coords(e,n),a=t.$getConfig().rtl?o.start-n.pos.x:n.pos.x-o.start,r=Math.max(0,a);e.progress=Math.min(1,r/Math.abs(o.end-o.start))},_find_max_shift:function(t,i){var n;for(var o in t){var a=t[o],r=e.getTask(a.id),s=this._drag_task_coords(r,a),c=e.posFromDate(new Date(e.getState().min_date)),l=e.posFromDate(new Date(e.getState().max_date));if(s.end+i>l){var u=l-s.end;(u<n||void 0===n)&&(n=u)}else if(s.start+i<c){var d=c-s.start;(d>n||void 0===n)&&(n=d)}}return n},_move:function(t,i,n){var o=this._drag_task_coords(t,n),a=e.dateFromPos(o.start+i),r=e.dateFromPos(o.end+i);a?r?(t.start_date=a,t.end_date=r):(t.end_date=new Date(e.getState().max_date),t.start_date=e.dateFromPos(e.posFromDate(t.end_date)-(o.end-o.start))):(t.start_date=new Date(e.getState().min_date),t.end_date=e.dateFromPos(e.posFromDate(t.start_date)+(o.end-o.start)))},_drag_task_coords:function(t,i){return{start:i.obj_s_x=i.obj_s_x||e.posFromDate(t.start_date),end:i.obj_e_x=i.obj_e_x||e.posFromDate(t.end_date)}},_mouse_position_change:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},_is_number:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},on_mouse_move:function(t){if(this.drag.start_drag){var i=n.getRelativeEventPosition(t,e.$task_data),o=this.drag.start_drag.start_x,r=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(o)&&this._is_number(r)&&this._mouse_position_change({x:o,y:r},i)>20)&&this._start_dnd(t)}if(this.drag.mode){if(!a(this,40))return;this._update_on_move(t)}},_update_item_on_move:function(t,i,n,o,a){var r=e.getTask(i),s=e.mixin({},r),c=e.mixin({},r);this._handlers[n].apply(this,[c,t,o]),e.mixin(r,c,!0),e.callEvent("onTaskDrag",[r.id,n,c,s,a]),e.mixin(r,c,!0),e.refreshTask(i)},_update_on_move:function(i){var a=this.drag,r=t.$getConfig();if(a.mode){var s=n.getRelativeEventPosition(i,t.$task_data);if(a.pos&&a.pos.x==s.x)return;a.pos=s;var c=e.dateFromPos(s.x);if(!c||isNaN(c.getTime()))return;var l=s.x-a.start_x,u=e.getTask(a.id);if(this._handlers[a.mode]){if(a.mode===r.drag_mode.move){var d={};if(this._isMultiselect()&&e.getSelectedTasks().indexOf(a.id)>=0&&(d=this.dragMultiple),e.isSummaryTask(u)&&e.config.drag_project){var h={};h[a.id]=o.copy(a),d=o.mixin(h,this.dragMultiple)}var p=this._find_max_shift(d,l);for(var f in void 0!==p&&(l=p),this._update_item_on_move(l,a.id,a.mode,a,i),d){var g=d[f];this._update_item_on_move(l,g.id,g.mode,g,i)}}else this._update_item_on_move(l,a.id,a.mode,a,i);e._update_parents(a.id)}}},on_mouse_down:function(i,o){if(2!=i.button||void 0===i.button){var a=t.$getConfig(),r=e.locate(i),s=null;if(e.isTaskExists(r)&&(s=e.getTask(r)),!e.isReadonly(s)&&!this.drag.mode){this.clear_drag_state();var c=n.getClassName(o=o||i.target||i.srcElement),l=this._get_drag_mode(c,o);if(!c||!l)return o.parentNode?this.on_mouse_down(i,o.parentNode):void 0;if(l)if(l.mode&&l.mode!=a.drag_mode.ignore&&a["drag_"+l.mode]){if(r=e.locate(o),s=e.copy(e.getTask(r)||{}),e.isReadonly(s))return this.clear_drag_state(),!1;if(e.isSummaryTask(s)&&!a.drag_project&&l.mode!=a.drag_mode.progress)return void this.clear_drag_state();l.id=r;var u=n.getRelativeEventPosition(i,e.$task_data);l.start_x=u.x,l.start_y=u.y,l.obj=s,this.drag.start_drag=l,this.drag.timestamp=Date.now()}else this.clear_drag_state();else if(e.checkEvent("onMouseDown")&&e.callEvent("onMouseDown",[c.split(" ")[0]])&&o.parentNode)return this.on_mouse_down(i,o.parentNode)}}},_fix_dnd_scale_time:function(i,n){var o=t.$getConfig(),a=e.getScale().unit,r=e.getScale().step;function s(i){if(e.config.correct_work_time){var n=t.$getConfig();e.isWorkTime(i.start_date,void 0,i)||(i.start_date=e.calculateEndDate({start_date:i.start_date,duration:-1,unit:n.duration_unit,task:i}))}}o.round_dnd_dates||(a="minute",r=o.time_step),n.mode==o.drag_mode.resize?n.left?(i.start_date=e.roundDate({date:i.start_date,unit:a,step:r}),s(i)):(i.end_date=e.roundDate({date:i.end_date,unit:a,step:r}),function(i){if(e.config.correct_work_time){var n=t.$getConfig();e.isWorkTime(new Date(i.end_date-1),void 0,i)||(i.end_date=e.calculateEndDate({start_date:i.end_date,duration:1,unit:n.duration_unit,task:i}))}}(i)):n.mode==o.drag_mode.move&&(i.start_date=e.roundDate({date:i.start_date,unit:a,step:r}),s(i),i.end_date=e.calculateEndDate(i))},_fix_working_times:function(i,n){var o=t.$getConfig();(n=n||{mode:o.drag_mode.move}).mode==o.drag_mode.resize?n.left?i.start_date=e.getClosestWorkTime({date:i.start_date,dir:"future",task:i}):i.end_date=e.getClosestWorkTime({date:i.end_date,dir:"past",task:i}):n.mode==o.drag_mode.move&&e.correctTaskWorkTime(i)},_finalize_mouse_up:function(t,i,n,o){var a=e.getTask(t);if(i.work_time&&i.correct_work_time&&this._fix_working_times(a,n),this._fix_dnd_scale_time(a,n),this._fireEvent("before_finish",n.mode,[t,n.mode,e.copy(n.obj),o])){var r=t;e._init_task_timing(a),this.clear_drag_state(),e.updateTask(a.id),this._fireEvent("after_finish",n.mode,[r,n.mode,o])}else this.clear_drag_state(),t==n.id&&(n.obj._dhx_changed=!1,e.mixin(a,n.obj,!0)),e.refreshTask(a.id)},on_mouse_up:function(i){var n=this.drag;if(n.mode&&n.id){var o=t.$getConfig(),a=e.getTask(n.id),r=this.dragMultiple;if(n.mode===o.drag_mode.move&&(e.isSummaryTask(a)&&o.drag_project||this._isMultiselect()))for(var s in r)this._finalize_mouse_up(r[s].id,o,r[s],i);this._finalize_mouse_up(n.id,o,n,i)}this.clear_drag_state()},_get_drag_mode:function(e,i){var n=t.$getConfig().drag_mode,o={mode:null,left:null};switch((e||"").split(" ")[0]){case"gantt_task_line":case"gantt_task_content":o.mode=n.move;break;case"gantt_task_drag":o.mode=n.resize;var a=i.getAttribute("data-bind-property");o.left="start_date"==a;break;case"gantt_task_progress_drag":o.mode=n.progress;break;case"gantt_link_control":case"gantt_link_point":o.mode=n.ignore;break;default:o=null}return o},_start_dnd:function(i){var n=this.drag=this.drag.start_drag;delete n.start_drag;var o=t.$getConfig(),a=n.id;if(o["drag_"+n.mode]&&e.callEvent("onBeforeDrag",[a,n.mode,i])&&this._fireEvent("before_start",n.mode,[a,n.mode,i])){delete n.start_drag;var s=e.getTask(a);if(e.isReadonly(s))return void this.clear_drag_state();if(this._isMultiselect()){var c=e.getSelectedTasks();c.indexOf(n.id)>=0&&r.forEach(c,e.bind(function(t){var i=e.getTask(t);e.isSummaryTask(i)&&e.config.drag_project&&n.mode==o.drag_mode.move&&this._addSubtasksToDragMultiple(i.id),this.dragMultiple[t]=e.mixin({id:i.id,obj:e.copy(i)},this.drag)},this))}e.isSummaryTask(s)&&e.config.drag_project&&n.mode==o.drag_mode.move&&this._addSubtasksToDragMultiple(s.id),e.callEvent("onTaskDragStart",[])}else this.clear_drag_state()},_fireEvent:function(t,i,n){e.assert(this._events[t],"Invalid stage:{"+t+"}");var o=this._events[t][i];return e.assert(o,"Unknown after drop mode:{"+i+"}"),e.assert(n,"Invalid event arguments"),!e.checkEvent(o)||e.callEvent(o,n)},round_task_dates:function(e){var i=this.drag,n=t.$getConfig();i||(i={mode:n.drag_mode.move}),this._fix_dnd_scale_time(e,i)},destructor:function(){this._domEvents.detachAll()},_isMultiselect:function(){return e.config.drag_multiple&&!!(e.getSelectedTasks&&e.getSelectedTasks().length>0)},_addSubtasksToDragMultiple:function(t){e.eachTask(function(t){this.dragMultiple[t.id]=e.mixin({id:t.id,obj:e.copy(t)},this.drag)},t,this)}}}(e,i),e._tasks_dnd=t,t.init(i)},destructor:function(){t&&(t.destructor(),t=null)}}}}},function(t,e,i){var n=i(0),o=i(83),a=i(82),r=i(1);t.exports=function(t){var e=t.$services;return{onCreated:function(e){var r=e.$config;r.bind=n.defined(r.bind)?r.bind:"task",r.bindLinks=n.defined(r.bindLinks)?r.bindLinks:"link",e._linksDnD=a.createLinkDND(),e._tasksDnD=o.createTaskDND(),e._tasksDnD.extend(e),this._mouseDelegates=i(22)(t)},onInitialized:function(e){this._attachDomEvents(t),this._attachStateProvider(t,e),e._tasksDnD.init(e,t),e._linksDnD.init(e,t),"timeline"==e.$config.id&&this.extendDom(e)},onDestroyed:function(e){this._clearDomEvents(t),this._clearStateProvider(t),e._tasksDnD&&e._tasksDnD.destructor()},extendDom:function(e){t.$task=e.$task,t.$task_scale=e.$task_scale,t.$task_data=e.$task_data,t.$task_bg=e.$task_bg,t.$task_links=e.$task_links,t.$task_bars=e.$task_bars},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null},_attachDomEvents:function(t){function e(e,i){if(e&&this.callEvent("onLinkDblClick",[e,i])){var n=this.getLink(e);if(this.isReadonly(n))return;var o=this.locale.labels.link+" "+this.templates.link_description(this.getLink(e))+" "+this.locale.labels.confirm_link_deleting;window.setTimeout(function(){t._dhtmlx_confirm(o,"",function(){t.deleteLink(e)})},this.config.touch?300:1)}}this._mouseDelegates.delegate("click","gantt_task_link",t.bind(function(t,e){var i=this.locate(t,this.config.link_attribute);i&&this.callEvent("onLinkClick",[i,t])},t),this.$task),this._mouseDelegates.delegate("click","gantt_scale_cell",t.bind(function(e,i){var n=r.getRelativeEventPosition(e,t.$task_data),o=t.dateFromPos(n.x),a=Math.floor(t.columnIndexByDate(o)),s=t.getScale().trace_x[a];t.callEvent("onScaleClick",[e,s])},t),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_task_link",t.bind(function(i,n,o){n=this.locate(i,t.config.link_attribute),e.call(this,n,i)},t),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_link_point",t.bind(function(t,i,n){i=this.locate(t);var o=this.getTask(i),a=null;return n.parentNode&&r.getClassName(n.parentNode)&&(a=r.getClassName(n.parentNode).indexOf("_left")>-1?o.$target[0]:o.$source[0]),a&&e.call(this,a,t),!1},t),this.$task)},_attachStateProvider:function(t,i){var n=i;e.getService("state").registerProvider("tasksTimeline",function(){return{scale_unit:n._tasks?n._tasks.unit:void 0,scale_step:n._tasks?n._tasks.step:void 0}})},_clearStateProvider:function(){e.getService("state").unregisterProvider("tasksTimeline")}}}},function(t,e,i){var n=i(1);function o(t,e){var i=n.getNodePosition(e.$grid_data);return t.x+=i.x-e.$grid.scrollLeft,t.y+=i.y-e.$grid_data.scrollTop,t}t.exports={removeLineHighlight:function(t){t.markerLine&&t.markerLine.parentNode&&t.markerLine.parentNode.removeChild(t.markerLine),t.markerLine=null},highlightPosition:function(t,e,i){var a=function(t,e){var i=n.getNodePosition(e.$grid_data),o=n.getRelativeEventPosition(t,e.$grid_data),a=e.$config.rowStore,r=i.x,s=o.y-10,c=e.$getConfig();s<i.y&&(s=i.y);var l=a.countVisible()*c.row_height;return s>i.y+l-c.row_height&&(s=i.y+l-c.row_height),i.x=r,i.y=s,i}(t,i);e.marker.style.left=a.x+9+"px",e.marker.style.top=a.y+"px";var r=e.markerLine;r||((r=document.createElement("div")).className="gantt_drag_marker gantt_grid_dnd_marker",r.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",r.style.pointerEvents="none",document.body.appendChild(r),e.markerLine=r),t.child?function(t,e,i){var n=t.targetParent,a=o({x:0,y:i.getItemTop(n)},i),r=i.$grid_data.getBoundingClientRect().bottom;e.innerHTML="<div class='gantt_grid_dnd_marker_folder'></div>",e.style.width=i.$grid_data.offsetWidth+"px",e.style.top=a.y+"px",e.style.left=a.x+"px",e.style.height=i.getItemHeight(n)+"px",a.y>r&&(e.style.top=r+"px")}(t,r,i):function(t,e,i){var n=function(t,e){var i=e.$config.rowStore,n={x:0,y:0},a=e.$grid_data.querySelector(".gantt_tree_indent"),r=15,s=0;if(a&&(r=a.offsetWidth),t.targetId!==i.$getRootId()){var c=e.getItemTop(t.targetId),l=e.getItemHeight(t.targetId);if(s=i.exists(t.targetId)?i.calculateItemLevel(i.getItem(t.targetId)):0,t.prevSibling)n.y=c;else if(t.nextSibling){var u=0;i.eachItem(function(t){-1!==i.getIndexById(t.id)&&u++},t.targetId),n.y=c+l+u*l}else n.y=c+l,s+=1}return n.x=40+s*r,n.width=Math.max(e.$grid_data.offsetWidth-n.x,0),o(n,e)}(t,i),a=i.$grid_data.getBoundingClientRect().bottom;e.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",e.style.left=n.x+"px",e.style.height="4px";var r=n.y-2;e.style.top=r+"px",e.style.width=n.width+"px",r>a&&(e.style.top=a+"px")}(t,r,i)}}},function(t,e,i){var n=i(17);t.exports=function(t,e,i,o,a){var r;if(e!==a.$getRootId())r=i<.25?n.prevSiblingTarget(t,e,a):!(i>.6)||a.hasChild(e)&&a.getItem(e).$open?n.firstChildTarget(t,e,a):n.nextSiblingTarget(t,e,a);else{var s=a.$getRootId();r=a.hasChild(s)&&o>=0?n.lastChildTarget(t,s,a):n.firstChildTarget(t,s,a)}return r}},function(t,e,i){var n=i(17);function o(t,e,i,o,a){for(var r=e;o.exists(r);){var s=o.calculateItemLevel(o.getItem(r));if((s===i||s===i-1)&&o.getBranchIndex(r)>-1)break;r=a?o.getPrev(r):o.getNext(r)}return o.exists(r)?o.calculateItemLevel(o.getItem(r))===i?a?n.nextSiblingTarget(t,r,o):n.prevSiblingTarget(t,r,o):n.firstChildTarget(t,r,o):null}function a(t,e,i,n){return o(t,e,i,n,!0)}function r(t,e,i,n){return o(t,e,i,n,!1)}t.exports=function(t,e,i,o,s,c){var l;if(e!==s.$getRootId())i<.5?s.calculateItemLevel(s.getItem(e))===c?l=s.getPrevSibling(e)?n.nextSiblingTarget(t,s.getPrevSibling(e),s):n.prevSiblingTarget(t,e,s):(l=a(t,e,c,s))&&(l=r(t,e,c,s)):s.calculateItemLevel(s.getItem(e))===c?l=n.nextSiblingTarget(t,e,s):(l=r(t,e,c,s))&&(l=a(t,e,c,s));else{var u=s.$getRootId(),d=s.getChildren(u);l=n.createDropTargetObject(),l=d.length&&o>=0?a(t,function(t){for(var e=t.getNext();t.exists(e);){var i=t.getNext(e);if(!t.exists(i))return e;e=i}return null}(s),c,s):r(t,u,c,s)}return l}},function(t,e,i){var n=i(1),o=i(17),a=i(87),r=i(86),s=i(85);t.exports={init:function(t,e){var i=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var c=new i(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(c.config.sensitivity=e.$getConfig().dnd_sensitivity),c.attachEvent("onBeforeDragStart",t.bind(function(i,o){var a=l(o);if(!a)return!1;if(t.hideQuickInfo&&t._hideQuickInfo(),n.closest(o.target,".gantt_grid_editor_placeholder"))return!1;var r=a.getAttribute(e.$config.item_attribute),s=e.$config.rowStore.getItem(r);return!t.isReadonly(s)&&(c.config.initial_open_state=s.$open,!!t.callEvent("onRowDragStart",[r,o.target||o.srcElement,o])&&void 0)},t)),c.attachEvent("onAfterDragStart",t.bind(function(t,i){var n=l(i);c.config.marker.innerHTML=n.outerHTML;var a=c.config.marker.firstChild;a&&(c.config.marker.style.opacity=.4,a.style.position="static",a.style.pointerEvents="none"),c.config.id=n.getAttribute(e.$config.item_attribute);var r=e.$config.rowStore,s=r.getItem(c.config.id);c.config.level=r.calculateItemLevel(s),c.config.drop_target=o.createDropTargetObject({targetParent:r.getParent(s.id),targetIndex:r.getBranchIndex(s.id),targetId:s.id,nextSibling:!0}),s.$open=!1,s.$transparent=!0,this.refreshData()},t)),c.attachEvent("onDragMove",t.bind(function(i,n){var a=u(n);return a&&!1!==t.callEvent("onBeforeRowDragMove",[c.config.id,a.targetParent,a.targetIndex])||(a=o.createDropTargetObject(c.config.drop_target)),s.highlightPosition(a,c.config,e),c.config.drop_target=a,this.callEvent("onRowDragMove",[c.config.id,a.targetParent,a.targetIndex]),!0},t)),c.attachEvent("onDragEnd",t.bind(function(){var t=e.$config.rowStore,i=t.getItem(c.config.id);s.removeLineHighlight(c.config),i.$transparent=!1,i.$open=c.config.initial_open_state;var n=c.config.drop_target;!1===this.callEvent("onBeforeRowDragEnd",[c.config.id,n.targetParent,n.targetIndex])?i.$drop_target=null:(t.move(c.config.id,n.targetIndex,n.targetParent),this.callEvent("onRowDragEnd",[c.config.id,n.targetParent,n.targetIndex])),t.refresh(i.id)},t))}function l(t){return n.locateAttribute(t,e.$config.item_attribute)}function u(i){var o=function(i){var o=n.getRelativeEventPosition(i,e.$grid_data).y,a=e.$config.rowStore;if((o=o||0)<=0)return a.$getRootId();var r=t.$grid_data.getBoundingClientRect().height+(e.$state.scrollTop||0),s=r-t.$grid_data.getBoundingClientRect().height,c=e.$state.scrollTop/e.getItemHeight(),l=c-Math.floor(c);l>.1&&l<.9&&(r-=e.getItemHeight()*l,s+=e.getItemHeight()*(1-l)),o>=r?o=r:o<=s&&(o=s);var u=Math.floor(o/e.getItemHeight());return u>a.countVisible()-1?a.$getRootId():a.getIdByIndex(u)}(i),s=null,l=e.$config.rowStore,u=!e.$getConfig().order_branch_free,d=n.getRelativeEventPosition(i,e.$grid_data).y;return o!==l.$getRootId()&&(s=(d-e.getItemTop(o))/e.getItemHeight()),u?a(c.config.id,o,s,d,l,c.config.level):r(c.config.id,o,s,d,l)}}}},function(t,e,i){var n=i(1);t.exports={init:function(t,e){var i=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var o=new i(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(o.config.sensitivity=e.$getConfig().dnd_sensitivity),o.attachEvent("onBeforeDragStart",t.bind(function(i,s){var c=a(s);if(!c)return!1;if(t.hideQuickInfo&&t._hideQuickInfo(),n.closest(s.target,".gantt_grid_editor_placeholder"))return!1;var l=c.getAttribute(e.$config.item_attribute),u=r().getItem(l);return!t.isReadonly(u)&&(o.config.initial_open_state=u.$open,!!t.callEvent("onRowDragStart",[l,s.target||s.srcElement,s])&&void 0)},t)),o.attachEvent("onAfterDragStart",t.bind(function(t,i){var n=a(i);o.config.marker.innerHTML=n.outerHTML;var s=o.config.marker.firstChild;s&&(s.style.position="static"),o.config.id=n.getAttribute(e.$config.item_attribute);var c=r(),l=c.getItem(o.config.id);o.config.index=c.getBranchIndex(o.config.id),o.config.parent=l.parent,l.$open=!1,l.$transparent=!0,this.refreshData()},t)),o.lastTaskOfLevel=function(t){for(var e=null,i=r().getItems(),n=0,o=i.length;n<o;n++)i[n].$level==t&&(e=i[n]);return e?e.id:null},o._getGridPos=t.bind(function(t){var i=n.getNodePosition(e.$grid_data),o=r(),a=i.x,s=t.pos.y-10,c=e.$getConfig();s<i.y&&(s=i.y);var l=o.countVisible()*c.row_height;return s>i.y+l-c.row_height&&(s=i.y+l-c.row_height),i.x=a,i.y=s,i},t),o._getTargetY=t.bind(function(i){var o=n.getNodePosition(e.$grid_data),a=t.$grid_data.getBoundingClientRect().height+(e.$state.scrollTop||0),r=a-t.$grid_data.getBoundingClientRect().height,s=i.pageY-o.y+(e.$state.scrollTop||0);return s<=0?s=0:s>a?s=a:s<r&&(s=r),s},t),o._getTaskByY=t.bind(function(t,i){var n=e.$getConfig(),o=r();t=t||0;var a=Math.floor(t/n.row_height);return(a=i<a?a-1:a)>o.countVisible()-1?null:o.getIdByIndex(a)},t),o.attachEvent("onDragMove",t.bind(function(i,n){var a=t.$grid_data.getBoundingClientRect().height+(e.$state.scrollTop||0),s=o.config,c=o._getGridPos(n),l=e.$getConfig(),u=r();s.marker.style.top=c.y<a?c.y+"px":a+"px",s.marker.style.left=c.x+10+"px";var d=u.getItem(o.config.id),h=o._getTargetY(n),p=o._getTaskByY(h,u.getIndexById(d.id));function f(t,e){return!u.isChildOf(g.id,e.id)&&(t.$level==e.$level||l.order_branch_free)}if(u.exists(p)||(p=o.lastTaskOfLevel(l.order_branch_free?d.$level:0))==o.config.id&&(p=null),u.exists(p)){var g=u.getItem(p);if(u.getIndexById(g.id)*l.row_height+l.row_height/2<h){var m=u.getIndexById(g.id),v=u.getNext(g.id),b=u.getItem(v);if(b){if(b.id==d.id)return l.order_branch_free&&u.isChildOf(d.id,g.id)&&1==u.getChildren(g.id).length?void u.move(d.id,u.getBranchIndex(g.id)+1,u.getParent(g.id)):void 0;g=b}else if(v=u.getIdByIndex(m),f(b=u.getItem(v),d)&&b.id!=d.id)return void u.move(d.id,-1,u.getParent(b.id))}else if(l.order_branch_free&&g.id!=d.id&&f(g,d)){if(!u.hasChild(g.id))return g.$open=!0,void u.move(d.id,-1,g.id);if(u.getIndexById(g.id)||l.row_height/3<h)return}m=u.getIndexById(g.id);for(var _=u.getIdByIndex(m-1),w=u.getItem(_),y=1;(!w||w.id==g.id)&&m-y>=0;)_=u.getIdByIndex(m-y),w=u.getItem(_),y++;if(d.id==g.id)return;f(g,d)&&d.id!=g.id?u.move(d.id,0,0,g.id):g.$level!=d.$level-1||u.getChildren(g.id).length?w&&f(w,d)&&d.id!=w.id&&u.move(d.id,-1,u.getParent(w.id)):u.move(d.id,0,g.id)}return!0},t)),o.attachEvent("onDragEnd",t.bind(function(){var t=r(),e=t.getItem(o.config.id);e.$transparent=!1,e.$open=o.config.initial_open_state,!1===this.callEvent("onBeforeRowDragEnd",[o.config.id,o.config.parent,o.config.index])?(t.move(o.config.id,o.config.index,o.config.parent),e.$drop_target=null):this.callEvent("onRowDragEnd",[o.config.id,e.$drop_target]),this.refreshData()},t))}function a(t){return n.locateAttribute(t,e.$config.item_attribute)}function r(){return t.getDatastore(e.$config.bind)}}}},function(t,e,i){var n=i(0),o=i(89),a=i(88);t.exports=function(t){return{onCreated:function(e){e.$config=n.mixin(e.$config,{bind:"task"}),"grid"==e.$config.id&&(this.extendGantt(e),t.ext.inlineEditors=t.ext._inlineEditors.createEditors(e),t.ext.inlineEditors.init()),this._mouseDelegates=i(22)(t)},onInitialized:function(e){var i=e.$getConfig();i.order_branch&&("marker"==i.order_branch?a.init(e.$gantt,e):o.init(e.$gantt,e)),this.initEvents(e,t),"grid"==e.$config.id&&this.extendDom(e)},onDestroyed:function(e){"grid"==e.$config.id&&t.ext.inlineEditors.destructor(),this.clearEvents(e,t)},initEvents:function(t,e){this._mouseDelegates.delegate("click","gantt_row",e.bind(function(i,n,o){var a=t.$getConfig();if(null!==n){var r=this.getTask(n);a.scroll_on_click&&!e._is_icon_open_click(i)&&this.showDate(r.start_date),e.callEvent("onTaskRowClick",[n,o])}},e),t.$grid),this._mouseDelegates.delegate("click","gantt_grid_head_cell",e.bind(function(i,n,o){var a=o.getAttribute("data-column-id");if(e.callEvent("onGridHeaderClick",[a,i])){var r=t.$getConfig();if("add"!=a){if(r.sort){for(var s,c=a,l=0;l<r.columns.length;l++)if(r.columns[l].name==a){s=r.columns[l];break}if(s&&void 0!==s.sort&&!0!==s.sort&&!(c=s.sort))return;var u=this._sort&&this._sort.direction&&this._sort.name==a?this._sort.direction:"desc";this._sort={name:a,direction:u="desc"==u?"asc":"desc"},this.sort(c,"desc"==u)}}else e.$services.getService("mouseEvents").callHandler("click","gantt_add",t.$grid,[i,r.root_id])}},e),t.$grid),this._mouseDelegates.delegate("click","gantt_add",e.bind(function(i,n,o){if(!t.$getConfig().readonly)return this.createTask({},n||e.config.root_id),!1},e),t.$grid)},clearEvents:function(t,e){this._mouseDelegates.destructor(),this._mouseDelegates=null},extendDom:function(e){t.$grid=e.$grid,t.$grid_scale=e.$grid_scale,t.$grid_data=e.$grid_data},extendGantt:function(e){t.getGridColumns=t.bind(e.getGridColumns,e),e.attachEvent("onColumnResizeStart",function(){return t.callEvent("onColumnResizeStart",arguments)}),e.attachEvent("onColumnResize",function(){return t.callEvent("onColumnResize",arguments)}),e.attachEvent("onColumnResizeEnd",function(){return t.callEvent("onColumnResizeEnd",arguments)}),e.attachEvent("onColumnResizeComplete",function(e,i){t.config.grid_width=i})}}}},function(t,e,i){var n=i(20),o=i(7),a=i(19),r=i(18),s=i(28);function c(t,e,i,n){var o=100*(1-(1*t||0)),a=n.posFromDate(e),r=n.posFromDate(i),s=document.createElement("div");return s.className="gantt_histogram_hor_bar",s.style.top=o+"%",s.style.left=a+"px",s.style.width=r-a+1+"px",s}function l(t,e,i){if(t===e)return null;var n=1-Math.max(t,e),o=Math.abs(t-e),a=document.createElement("div");return a.className="gantt_histogram_vert_bar",a.style.top=100*n+"%",a.style.height=100*o+"%",a.style.left=i+"px",a}t.exports=function(t){var e=s(t),i={},u={},d={};function h(t,e){var n=i[t];n&&n[e]&&n[e].parentNode&&n[e].parentNode.removeChild(n[e])}function p(e,i,n,o,r,s,u){var h=d[e.id];h&&h.parentNode&&h.parentNode.removeChild(h);var p=function(e,i,n,o){for(var r=i.getScale(),s=document.createElement("div"),u=a(r,o),d=u.start;d<=u.end;d++){var h=r.trace_x[d],p=r.trace_x[d+1]||t.date.add(h,r.step,r.unit),f=r.trace_x[d].valueOf(),g=Math.min(e[f]/n,1)||0;if(g<0)return null;var m=Math.min(e[p.valueOf()]/n,1)||0,v=c(g,h,p,i);v&&s.appendChild(v);var b=l(g,m,i.posFromDate(p));b&&s.appendChild(b)}return s}(n,r,s,u);return p&&(p.setAttribute("data-resource-id",e.id),p.setAttribute(r.$config.item_attribute,e.id),p.style.position="absolute",p.style.top=i.top+1+"px",p.style.height=o.row_height-1+"px",p.style.left=0),p}function f(t,e,i,n,o,a,r){var s=o.histogram_cell_class(a.start_date,a.end_date,t,a.tasks),c=o.histogram_cell_label(a.start_date,a.end_date,t,a.tasks),l=o.histogram_cell_allocated(a.start_date,a.end_date,t,a.tasks);if(s||c){var u=document.createElement("div");return u.className=["gantt_histogram_cell",s].join(" "),u.setAttribute(r.$config.item_attribute,t.id),u.style.cssText=["left:"+e.left+"px","width:"+e.width+"px","height:"+(n.row_height-1)+"px","line-height:"+(n.row_height-1)+"px","top:"+(e.top+1)+"px"].join(";"),c&&(c="<div class='gantt_histogram_label'>"+c+"</div>"),l&&(c="<div class='gantt_histogram_fill' style='height:"+100*Math.min(l/i||0,1)+"%;'></div>"+c),c&&(u.innerHTML=c),u}return null}return{render:function(n,o,s){var c=o.$getConfig(),l=o.$getTemplates(),h=o.getScale(),g=e(n,c.resource_property,h,o),m=[],v={},b=n.capacity||o.$config.capacity||24;i[n.id]={},u[n.id]=null,d[n.id]=null;for(var _=!!s,w=a(h,s),y=w.start;y<=w.end;y++){var k=g[y];if(k&&(!_||r(y,h,s,t))){var x=l.histogram_cell_capacity(k.start_date,k.end_date,n,k.tasks);v[k.start_date.valueOf()]=x||0;var S=o.getItemPosition(n,k.start_date,k.end_date),T=f(n,S,b,c,l,k,o);T&&(m.push(T),i[n.id][y]=T)}}var C=null;if(m.length){C=document.createElement("div");for(var D=0;D<m.length;D++)C.appendChild(m[D]);var I=p(n,S,v,c,o,b,s);I&&(C.appendChild(I),d[n.id]=I),u[n.id]=C}return C},update:function(n,o,s,c){var l=s.$getConfig(),u=s.$getTemplates(),g=s.getScale(),m=e(n,l.resource_property,g,s),v=n.capacity||s.$config.capacity||24,b={},_=!!c,w=a(g,c),y={};if(i&&i[n.id])for(var k in i[n.id])y[k]=k;for(var x=w.start;x<=w.end;x++){var S=m[x];if(y[x]=!1,S){var T=u.histogram_cell_capacity(S.start_date,S.end_date,n,S.tasks);b[S.start_date.valueOf()]=T||0;var C=s.getItemPosition(n,S.start_date,S.end_date);if(!_||r(x,g,c,t)){var D=i[n.id];if(D&&D[x])D&&D[x]&&!D[x].parentNode&&o.appendChild(D[x]);else{var I=f(n,C,v,l,u,S,s);I&&(o.appendChild(I),i[n.id][x]=I)}}else h(n.id,x)}}for(var k in y)!1!==y[k]&&h(n.id,k);var P=p(n,C,b,l,s,v,c);P&&(o.appendChild(P),d[n.id]=P)},getRectangle:n,getVisibleRange:o}}},function(t,e,i){var n=i(20),o=i(7),a=i(19),r=i(18),s=i(28);t.exports=function(t){var e=s(t),i={};function c(t,e,i,n,o){var a=i.resource_cell_class(e.start_date,e.end_date,t,e.tasks),r=i.resource_cell_value(e.start_date,e.end_date,t,e.tasks);if(a||r){var s=o.getItemPosition(t,e.start_date,e.end_date),c=document.createElement("div");return c.setAttribute(o.$config.item_attribute,t.id),c.className=["gantt_resource_marker",a].join(" "),c.style.cssText=["left:"+s.left+"px","width:"+s.width+"px","height:"+(n.row_height-1)+"px","line-height:"+(n.row_height-1)+"px","top:"+s.top+"px"].join(";"),r&&(c.innerHTML=r),c}return null}function l(t,e){i[t]&&i[t][e]&&i[t][e].parentNode&&i[t][e].parentNode.removeChild(i[t][e])}return{render:function(n,o,s){var l=o.$getConfig(),u=o.$getTemplates(),d=o.getScale(),h=e(n,l.resource_property,o.getScale(),o),p=!!s,f=[];i[n.id]={};for(var g=a(d,s),m=g.start;m<=g.end;m++){var v=h[m];if(v&&(!p||r(m,d,s,t))){var b=c(n,v,u,l,o);b&&(f.push(b),i[n.id][m]=b)}}var _=null;if(f.length){_=document.createElement("div");for(var w=0;w<f.length;w++)_.appendChild(f[w])}return _},update:function(n,o,s,u){var d=s.$getConfig(),h=s.$getTemplates(),p=s.getScale(),f=e(n,d.resource_property,s.getScale(),s),g=a(p,u),m={};if(i&&i[n.id])for(var v in i[n.id])m[v]=v;for(var b=g.start;b<=g.end;b++){var _=f[b];if(m[b]=!1,_)if(r(b,p,u,t))if(i[n.id]&&i[n.id][b])i[n.id]&&i[n.id][b]&&!i[n.id][b].parentNode&&o.appendChild(i[n.id][b]);else{var w=c(n,_,h,d,s);w&&(o.appendChild(w),i[n.id][b]=w)}else l(n.id,b)}for(var v in m)!1!==m[v]&&l(n.id,v)},getRectangle:n,getVisibleRange:o}}},function(t,e,i){var n=i(3),o=i(34),a=i(7);t.exports=function(t){return{render:function(e,i,o){for(var a=i.getGridColumns(),r=i.$getConfig(),s=i.$getTemplates(),c=i.$config.rowStore,l=[],u=0;u<a.length;u++){var d,h,p,f=u==a.length-1,g=a[u];"add"==g.name?(h="<div "+(w=t._waiAria.gridAddButtonAttrString(g))+" class='gantt_add'></div>",p=""):(h=g.template?g.template(e):e[g.name],n.isDate(h)&&(h=s.date_grid(h,e,g.name)),null!=h||(h=""),p=h,h="<div class='gantt_tree_content'>"+h+"</div>");var m="gantt_cell"+(f?" gantt_last_cell":""),v=[];if(g.tree){m+=" gantt_cell_tree";for(var b=0;b<e.$level;b++)v.push(s.grid_indent(e));!c.hasChild(e.id)||t.isSplitTask(e)&&!t.config.open_split_tasks?(v.push(s.grid_blank(e)),v.push(s.grid_file(e))):(v.push(s.grid_open(e)),v.push(s.grid_folder(e)))}var _="width:"+(g.width-(f?1:0))+"px;";this.defined(g.align)&&(_+="text-align:"+g.align+";justify-content:"+{right:"flex-end",left:"flex-start",center:"center"}[g.align]+";");var w=t._waiAria.gridCellAttrString(g,p,e);v.push(h),d="<div class='"+m+"' data-column-index='"+u+"' data-column-name='"+g.name+"' style='"+_+"' "+w+">"+v.join("")+"</div>",l.push(d)}if(m=t.getGlobalTaskIndex(e.id)%2==0?"":" odd",m+=e.$transparent?" gantt_transparent":"",m+=e.$dataprocessor_class?" "+e.$dataprocessor_class:"",s.grid_row_class){var y=s.grid_row_class.call(t,e.start_date,e.end_date,e);y&&(m+=" "+y)}c.isSelected(e.id)&&(m+=" gantt_selected");var k=document.createElement("div");k.className="gantt_row"+m+" gantt_row_"+t.getTaskType(e.type);var x=i.getItemHeight();return k.style.height=x+"px",k.style.lineHeight=x+"px",r.smart_rendering&&(k.style.position="absolute",k.style.left="0px",k.style.top=i.getItemTop(e.id)+"px"),i.$config.item_attribute&&(k.setAttribute(i.$config.item_attribute,e.id),k.setAttribute(i.$config.bind+"_id",e.id)),t._waiAria.taskRowAttr(e,k),k.innerHTML=l.join(""),k},update:null,getRectangle:o,getVisibleRange:a}}},function(t,e){t.exports=function(t,e,i,n){var o=i.$gantt.getTask(t.source),a=i.$gantt.getTask(t.target),r=i.$getConfig(),s=i.getItemTop(o.id),c=r.row_height,l=i.getItemTop(a.id);if(e.y>s+c&&e.y>l+r.row_height)return!1;if(e.y_end<l&&e.y_end<s)return!1;var u=i.posFromDate(o.start_date),d=i.posFromDate(o.end_date),h=i.posFromDate(a.start_date),p=i.posFromDate(a.end_date);if(u>d){var f=d;d=u,u=f}return h>p&&(f=p,p=h,h=f),u+=-100,h+=-100,p+=100,!(e.x>(d+=100)&&e.x>p||e.x_end<u&&e.x_end<h)}},function(t,e,i){var n=i(94);t.exports=function(t){var e={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(e){this.current_pos=t.copy(e)},get_lines:function(t){this.clear(),this.point(t[0]);for(var e=1;e<t.length;e++)this.line_to(t[e]);return this.get_path()},line_to:function(e){var i=t.copy(e),n=this._get_line(this.current_pos,i);this.path.push(n),this.current_pos=i},get_path:function(){return this.path},get_wrapper_sizes:function(t,e){var i,n=e.$getConfig(),o=n.link_wrapper_width,a=t.y+(n.row_height-o)/2;switch(t.direction){case this.dirs.left:i={top:a,height:o,lineHeight:o,left:t.x-t.size-o/2,width:t.size+o};break;case this.dirs.right:i={top:a,lineHeight:o,height:o,left:t.x-o/2,width:t.size+o};break;case this.dirs.up:i={top:a-t.size,lineHeight:t.size+o,height:t.size+o,left:t.x-o/2,width:o};break;case this.dirs.down:i={top:a,lineHeight:t.size+o,height:t.size+o,left:t.x-o/2,width:o}}return i},get_line_sizes:function(t,e){var i,n=e.$getConfig(),o=n.link_line_width,a=n.link_wrapper_width,r=t.size+o;switch(t.direction){case this.dirs.left:case this.dirs.right:i={height:o,width:r,marginTop:(a-o)/2,marginLeft:(a-o)/2};break;case this.dirs.up:case this.dirs.down:i={height:r,width:o,marginTop:(a-o)/2,marginLeft:(a-o)/2}}return i},render_line:function(t,e,i){var n=this.get_wrapper_sizes(t,i),o=document.createElement("div");o.style.cssText=["top:"+n.top+"px","left:"+n.left+"px","height:"+n.height+"px","width:"+n.width+"px"].join(";"),o.className="gantt_line_wrapper";var a=this.get_line_sizes(t,i),r=document.createElement("div");return r.style.cssText=["height:"+a.height+"px","width:"+a.width+"px","margin-top:"+a.marginTop+"px","margin-left:"+a.marginLeft+"px"].join(";"),r.className="gantt_link_line_"+t.direction,o.appendChild(r),o},_get_line:function(t,e){var i=this.get_direction(t,e),n={x:t.x,y:t.y,direction:this.get_direction(t,e)};return n.size=i==this.dirs.left||i==this.dirs.right?Math.abs(t.x-e.x):Math.abs(t.y-e.y),n},get_direction:function(t,e){return e.x<t.x?this.dirs.left:e.x>t.x?this.dirs.right:e.y>t.y?this.dirs.down:this.dirs.up}},i={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(e){return e?(this.path.push(t.copy(e)),e):this.current()},point_to:function(i,n,o){o=o?{x:o.x,y:o.y}:t.copy(this.point());var a=e.dirs;switch(i){case a.left:o.x-=n;break;case a.right:o.x+=n;break;case a.up:o.y-=n;break;case a.down:o.y+=n}return this.point(o)},get_points:function(i,n){var o=this.get_endpoint(i,n),a=t.config,r=o.e_y-o.y,s=o.e_x-o.x,c=e.dirs;this.clear(),this.point({x:o.x,y:o.y});var l=2*a.link_arrow_size,u=this.get_line_type(i,n.$getConfig()),d=o.e_x>o.x;if(u.from_start&&u.to_start)this.point_to(c.left,l),d?(this.point_to(c.down,r),this.point_to(c.right,s)):(this.point_to(c.right,s),this.point_to(c.down,r)),this.point_to(c.right,l);else if(!u.from_start&&u.to_start)if(d=o.e_x>o.x+2*l,this.point_to(c.right,l),d)s-=l,this.point_to(c.down,r),this.point_to(c.right,s);else{s-=2*l;var h=r>0?1:-1;this.point_to(c.down,h*(a.row_height/2)),this.point_to(c.right,s),this.point_to(c.down,h*(Math.abs(r)-a.row_height/2)),this.point_to(c.right,l)}else u.from_start||u.to_start?u.from_start&&!u.to_start&&(d=o.e_x>o.x-2*l,this.point_to(c.left,l),d?(s+=2*l,this.point_to(c.down,(h=r>0?1:-1)*(a.row_height/2)),this.point_to(c.right,s),this.point_to(c.down,h*(Math.abs(r)-a.row_height/2)),this.point_to(c.left,l)):(s+=l,this.point_to(c.down,r),this.point_to(c.right,s))):(this.point_to(c.right,l),d?(this.point_to(c.right,s),this.point_to(c.down,r)):(this.point_to(c.down,r),this.point_to(c.right,s)),this.point_to(c.left,l));return this.path},get_line_type:function(e,i){var n=i.links,o=!1,a=!1;return e.type==n.start_to_start?o=a=!0:e.type==n.finish_to_finish?o=a=!1:e.type==n.finish_to_start?(o=!1,a=!0):e.type==n.start_to_finish?(o=!0,a=!1):t.assert(!1,"Invalid link type"),i.rtl&&(o=!o,a=!a),{from_start:o,to_start:a}},get_endpoint:function(e,i){var n=i.$getConfig(),a=this.get_line_type(e,n),r=a.from_start,s=a.to_start,c=t.getTask(e.source),l=t.getTask(e.target),u=o(c,i),d=o(l,i);return{x:r?u.left:u.left+u.width,e_x:s?d.left:d.left+d.width,y:u.top,e_y:d.top}}};function o(e,i){var n=i.$getConfig(),o=i.getItemPosition(e);if(t.getTaskType(e.type)==n.types.milestone){var a=t.getTaskHeight(),r=Math.sqrt(2*a*a);o.left-=r/2,o.width=r}return o}return{render:function(n,o){var a=o.$getConfig(),r=i.get_endpoint(n,o);if(!(r.e_x-r.x||r.e_y-r.y))return null;var s=i.get_points(n,o),c=e.get_lines(s,o),l=document.createElement("div"),u="gantt_task_link";n.color&&(u+=" gantt_link_inline_color");var d=t.templates.link_class?t.templates.link_class(n):"";d&&(u+=" "+d),a.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(n)&&(u+=" gantt_critical_link"),l.className=u,o.$config.link_attribute&&(l.setAttribute(o.$config.link_attribute,n.id),l.setAttribute("link_id",n.id));for(var h=0;h<c.length;h++){h==c.length-1&&(c[h].size-=a.link_arrow_size);var p=e.render_line(c[h],c[h+1],o);n.color&&(p.firstChild.style.backgroundColor=n.color),l.appendChild(p)}var f=function(t,i,n){var o=n.$getConfig(),a=document.createElement("div"),r=t.y,s=t.x,c=o.link_arrow_size,l=o.row_height,u="gantt_link_arrow gantt_link_arrow_"+i;switch(i){case e.dirs.right:r-=(c-l)/2,s-=c;break;case e.dirs.left:r-=(c-l)/2;break;case e.dirs.up:s-=c;break;case e.dirs.down:r+=2*c,s-=c}return a.style.cssText=["top:"+r+"px","left:"+s+"px"].join(";"),a.className=u,a}(s[s.length-1],c[c.length-1].direction,o);return n.color&&(f.style.borderColor=n.color),l.appendChild(f),t._waiAria.linkAttr(n,l),l},update:null,isInViewPort:n}}},function(t,e,i){var n=i(20),o=i(12),a=i(7),r=i(19),s=i(18);t.exports=function(t){var e={},i={};function c(t,i){return!(!e[t.id][i]||!e[t.id][i].parentNode)}function l(t,i){e[t]&&e[t][i]&&e[t][i].parentNode&&e[t][i].parentNode.removeChild(e[t][i])}function u(t){var e,i=t.$getTemplates();return void 0!==i.task_cell_class?(e=i.task_cell_class,(console.warn||console.log)("gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.")):e=i.timeline_cell_class,e}function d(n,o,a,r,c,l,u){var d=n.width[o],h="";if(s(o,n,r,t)){var p=l(a,n.trace_x[o]);if(u.static_background&&(!u.static_background_cells||!p))return null;if(e[a.id][o])return i[a.id][o]=o,e[a.id][o];var f=document.createElement("div");return f.style.width=d+"px",h="gantt_task_cell"+(o==c-1?" gantt_last_cell":""),p&&(h+=" "+p),f.className=h,f.style.position="absolute",f.style.left=n.left[o]+"px",e[a.id][o]=f,i[a.id][o]=o,f}return null}return{render:function(n,a,s){var c=a.$getConfig(),l=a.$getTemplates(),h=a.getScale(),p=h.count;if(c.static_background&&!c.static_background_cells)return null;var f,g=document.createElement("div"),m=u(a);if(f=s&&c.smart_rendering&&!o(t)?r(h,s.x):{start:0,end:p-1},c.show_task_cells){e[n.id]={},i[n.id]={};for(var v=f.start;v<=f.end;v++){var b=d(h,v,n,s,p,m,c);b&&g.appendChild(b)}}var _=t.getGlobalTaskIndex(n.id)%2!=0,w=l.task_row_class(n.start_date,n.end_date,n),y="gantt_task_row"+(_?" odd":"")+(w?" "+w:"");return a.$config.rowStore.isSelected(n.id)&&(y+=" gantt_selected"),g.className=y,c.smart_rendering?(g.style.position="absolute",g.style.top=a.getItemTop(n.id)+"px",g.style.width="100%"):g.style.position="relative",g.style.height=c.row_height+"px",a.$config.item_attribute&&(g.setAttribute(a.$config.item_attribute,n.id),g.setAttribute(a.$config.bind+"_id",n.id)),g},update:function(t,n,o,a){var s=o.$getConfig(),h=o.getScale(),p=h.count,f=u(o);if(s.show_task_cells){e[t.id]||(e[t.id]={}),i[t.id]||(i[t.id]={});var g=r(h,a);for(var m in i[t.id]){var v=i[t.id][m];(Number(v)<g.start||Number(v)>g.end)&&l(t.id,v)}i[t.id]={};for(var b=g.start;b<=g.end;b++){var _=d(h,b,t,a,p,f,s);!_&&c(t,b)?l(t.id,b):_&&!_.parentNode&&n.appendChild(_)}}},getRectangle:n,getVisibleRange:a}}},function(t,e,i){var n=i(30);t.exports=function(t,e,i,o){if(!o.isSplitTask(t))return!1;var a=o.getSubtaskDates(t.id);return n({id:t.id,start_date:a.start_date,end_date:a.end_date,parent:t.parent},e,i,o)}},function(t,e,i){var n=i(29),o=i(97),a=i(7);t.exports=function(t){var e=n(t);return{render:function(i,n){if(t.isSplitTask(i)&&(t.config.open_split_tasks&&!i.$open||!t.config.open_split_tasks)){var o=document.createElement("div"),a=t.getTaskPosition(i);return t.hasChild(i.id)&&t.eachTask(function(i){var r=t.isSummaryTask(i);r&&t.resetProjectDates(i);var s=e(i,n);if(s){var c=Math.floor((t.config.row_height-a.height)/2);s.style.top=a.top+c+"px",s.classList.add("gantt_split_child"),r&&s.classList.add("gantt_split_subproject"),o.appendChild(s)}},i.id),o}return!1},update:null,isInViewPort:o,getVisibleRange:a}}},function(t,e,i){var n=i(30),o=i(7),a=i(29);t.exports=function(t){return{render:a(t),update:null,isInViewPort:n,getVisibleRange:o}}},function(t,e){t.exports=function(t){return function(e,i,n){"keepDates"==n?function(e,i){"duration"==i?e.end_date=t.calculateEndDate(e):"end_date"!=i&&"start_date"!=i||(e.duration=t.calculateDuration(e))}(e,i):"keepDuration"==n?function(e,i){"end_date"==i?e.start_date=t.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e}):"start_date"!=i&&"duration"!=i||(e.end_date=t.calculateEndDate(e))}(e,i):function(e,i){"start_date"==i||"duration"==i?e.end_date=t.calculateEndDate(e):"end_date"==i&&(e.duration=t.calculateDuration(e))}(e,i)}}},function(t,e,i){t.exports=function(t){var e=i(8)(t),n=i(0);function o(){return e.apply(this,arguments)||this}function a(e){return e.formatter||t.ext.formatters.durationFormatter()}return i(2)(o,e),n.mixin(o.prototype,{show:function(t,e,i,n){n.innerHTML="<div><input type='text' name='"+e.name+"'></div>"},set_value:function(t,e,i,n){this.get_input(n).value=a(i.editor).format(t)},get_value:function(t,e,i){return a(e.editor).parse(this.get_input(i).value||"")}},!0),o}},function(t,e,i){t.exports=function(t){var e=i(8)(t),n=i(0);function o(){return e.apply(this,arguments)||this}function a(e){return e.formatter||t.ext.formatters.linkFormatter()}function r(t,e){for(var i=(t||"").split(e.delimiter||","),n=0;n<i.length;n++){var o=i[n].trim();o?i[n]=o:(i.splice(n,1),n--)}return i.sort(),i}function s(t,e,i){for(var n=t.$target,o=[],r=0;r<n.length;r++){var s=i.getLink(n[r]);o.push(a(e).format(s))}return o.join((e.delimiter||",")+" ")}function c(t){return t.source+"_"+t.target+"_"+t.type+"_"+(t.lag||0)}return i(2)(o,e),n.mixin(o.prototype,{show:function(t,e,i,n){n.innerHTML="<div><input type='text' name='"+e.name+"'></div>"},hide:function(){},set_value:function(e,i,n,o){this.get_input(o).value=s(e,n.editor,t)},get_value:function(t,e,i){return r(this.get_input(i).value||"",e.editor)},save:function(e,i,n){var o=function(e,i,n){var o=function(e,i,n){var o=[];return i.forEach(function(i){var r=a(n).parse(i);r&&(r.target=e,t.isLinkAllowed(r)&&o.push(r))}),o}(e.id,i,n),r={};e.$target.forEach(function(e){var i=t.getLink(e);r[c(i)]=i.id});var s=[];o.forEach(function(t){var e=c(t);r[e]?delete r[e]:s.push(t)});var l=[];for(var u in r)l.push(r[u]);return{add:s,remove:l}}(t.getTask(e),this.get_value(e,i,n),i.editor);(o.add.length||o.remove.length)&&t.batchUpdate(function(){o.add.forEach(function(e){t.addLink(e)}),o.remove.forEach(function(e){t.deleteLink(e)}),t.autoSchedule&&t.autoSchedule()})},is_changed:function(e,i,n,o){var a=this.get_value(i,n,o),c=r(s(e,n.editor,t),n.editor);return a.join()!==c.join()}},!0),o}},function(t,e,i){t.exports=function(t){var e=i(8)(t),n=i(0),o="%Y-%m-%d",a=null,r=null;function s(){return e.apply(this,arguments)||this}return i(2)(s,e),n.mixin(s.prototype,{show:function(e,i,n,s){var c,l;a||(a=t.date.date_to_str(o)),r||(r=t.date.str_to_date(o)),c="function"==typeof n.min?n.min(e,i):n.min,l="function"==typeof n.max?n.max(e,i):n.max;var u="<div style='width:140px'><input type='date' "+(c?" min='"+a(c)+"' ":"")+(l?" max='"+a(l)+"' ":"")+" name='"+i.name+"'></div>";s.innerHTML=u},set_value:function(t,e,i,n){this.get_input(n).value=t&&t.getFullYear?a(t):t},is_valid:function(t,e,i,n){return!(!t||isNaN(t.getTime()))},get_value:function(t,e,i){var n;try{n=r(this.get_input(i).value||"")}catch(t){n=null}return n}},!0),s}},function(t,e,i){t.exports=function(t){var e=i(8)(t),n=i(0);function o(){return e.apply(this,arguments)||this}return i(2)(o,e),n.mixin(o.prototype,{show:function(t,e,i,n){for(var o="<div><select name='"+e.name+"'>",a=[],r=i.options||[],s=0;s<r.length;s++)a.push("<option value='"+i.options[s].key+"'>"+r[s].label+"</option>");o+=a.join("")+"</select></div>",n.innerHTML=o},get_input:function(t){return t.querySelector("select")}},!0),o}},function(t,e,i){t.exports=function(t){var e=i(8)(t),n=i(0);function o(){return e.apply(this,arguments)||this}return i(2)(o,e),n.mixin(o.prototype,{show:function(t,e,i,n){n.innerHTML="<div><input type='number' min='"+(i.min||0)+"' max='"+(i.max||100)+"' name='"+e.name+"'></div>"},get_value:function(t,e,i){return this.get_input(i).value||""},is_valid:function(t,e,i,n){return!isNaN(parseInt(t,10))}},!0),o}},function(t,e,i){t.exports=function(t){var e=i(8)(t),n=i(0);function o(){return e.apply(this,arguments)||this}return i(2)(o,e),n.mixin(o.prototype,{show:function(t,e,i,n){n.innerHTML="<div><input type='text' name='"+e.name+"'></div>"}},!0),o}},function(t,e){t.exports={init:function(t,e){var i=t,n=e.$gantt,o=null,a=n.ext.keyboardNavigation;a.attachEvent("onBeforeFocus",function(e){var n=t.locateCell(e);if(clearTimeout(o),n){var a=n.columnName,r=n.id,s=i.getState();if(i.isVisible()&&s.id==r&&s.columnName===a)return!1}return!0}),a.attachEvent("onFocus",function(e){var n=t.locateCell(e),a=t.getState();return clearTimeout(o),!n||n.id==a.id&&n.columnName==a.columnName||i.isVisible()&&i.save(),!0}),t.attachEvent("onHide",function(){clearTimeout(o)}),a.attachEvent("onBlur",function(){return o=setTimeout(function(){i.save()}),!0}),n.attachEvent("onTaskDblClick",function(e,i){var n=t.getState(),o=t.locateCell(i.target);return!o||!t.isVisible()||o.columnName!=n.columnName}),n.attachEvent("onTaskClick",function(e,i){if(n._is_icon_open_click(i))return!0;var o=t.getState(),a=t.locateCell(i.target);return!a||!t.getEditorConfig(a.columnName)||(t.isVisible()&&o.id==a.id&&o.columnName==a.columnName||t.startEdit(a.id,a.columnName),!1)}),n.attachEvent("onEmptyClick",function(){return i.save(),!0}),a.attachEvent("onKeyDown",function(e,o){var r=t.locateCell(o.target),s=!!r&&t.getEditorConfig(r.columnName),c=t.getState(),l=n.constants.KEY_CODES,u=o.keyCode,d=!1;switch(u){case l.ENTER:t.isVisible()?(t.save(),o.preventDefault(),d=!0):s&&!(o.ctrlKey||o.metaKey||o.shiftKey)&&(i.startEdit(r.id,r.columnName),o.preventDefault(),d=!0);break;case l.ESC:t.isVisible()&&(t.hide(),o.preventDefault(),d=!0);break;case l.UP:case l.DOWN:break;case l.LEFT:case l.RIGHT:(s&&t.isVisible()||"date"===c.editorType)&&(d=!0);break;case l.SPACE:t.isVisible()&&(d=!0),s&&!t.isVisible()&&(i.startEdit(r.id,r.columnName),o.preventDefault(),d=!0);break;case l.DELETE:s&&!t.isVisible()?(i.startEdit(r.id,r.columnName),d=!0):s&&t.isVisible()&&(d=!0);break;case l.TAB:if(t.isVisible()){o.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);var h=t.getState();h.id&&a.focus({type:"taskCell",id:h.id,column:h.columnName}),o.preventDefault(),d=!0}break;default:if(t.isVisible())d=!0;else if(u>=48&&u<=57||u>95&&u<112||u>=64&&u<=91||u>185&&u<193||u>218&&u<223){var p=e.modifiers;p.alt||(p.alt||p.ctrl||p.meta||p.shift)&&a.getCommandHandler(e,"taskCell")||s&&!t.isVisible()&&(i.startEdit(r.id,r.columnName),d=!0)}}return!d})},onShow:function(t,e,i){},onHide:function(t,e,i){i.$gantt.focus()},destroy:function(){}}},function(t,e){t.exports={init:function(t,e){var i=e.$gantt;i.attachEvent("onTaskClick",function(e,n){if(i._is_icon_open_click(n))return!0;var o=t.getState(),a=t.locateCell(n.target);return!a||!t.getEditorConfig(a.columnName)||(t.isVisible()&&o.id==a.id&&o.columnName==a.columnName||t.startEdit(a.id,a.columnName),!1)}),i.attachEvent("onEmptyClick",function(){return t.isVisible()&&t.isChanged()?t.save():t.hide(),!0}),i.attachEvent("onTaskDblClick",function(e,i){var n=t.getState(),o=t.locateCell(i.target);return!o||!t.isVisible()||o.columnName!=n.columnName||(t.hide(),!1)})},onShow:function(t,e,i){var n=i.$gantt;n.ext&&n.ext.keyboardNavigation&&n.ext.keyboardNavigation.attachEvent("onKeyDown",function(e,i){var o=!1;switch(i.keyCode){case n.constants.KEY_CODES.SPACE:t.isVisible()&&(o=!0)}return!o}),e.onkeydown=function(e){e=e||window.event;var i=n.constants.KEY_CODES;if(!(e.defaultPrevented||e.shiftKey&&e.keyCode!=i.TAB)){var o=!0;switch(e.keyCode){case n.keys.edit_save:t.save();break;case n.keys.edit_cancel:t.hide();break;case i.UP:case i.DOWN:t.isVisible()&&(t.hide(),o=!1);break;case i.TAB:e.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);break;default:o=!1}o&&e.preventDefault()}}},onHide:function(){},destroy:function(){}}},function(t,e,i){var n=i(108),o=i(107);t.exports=function(t){var e=null;return{setMapping:function(t){e=t},getMapping:function(){return e||(t.config.keyboard_navigation_cells&&t.ext.keyboardNavigation?o:n)}}}},function(t,e,i){var n=i(109),o=i(106),a=i(105),r=i(104),s=i(103),c=i(102),l=i(101),u=i(0),d=i(1),h=i(4),p=i(100);function f(t){t.config.editor_types={text:new(o(t)),number:new(a(t)),select:new(r(t)),date:new(s(t)),predecessor:new(c(t)),duration:new(l(t))}}t.exports=function(t){var e=n(t),i={};h(i);var o={init:f,createEditors:function(n){var o=p(t),a=[],r=[],s=null,c={_itemId:null,_columnName:null,_editor:null,_editorType:null,_placeholder:null,locateCell:function(t){if(!d.isChildOf(t,n.$grid))return null;var e=d.locateAttribute(t,n.$config.item_attribute),i=d.locateAttribute(t,"data-column-name");if(i){var o=i.getAttribute("data-column-name");return{id:e.getAttribute(n.$config.item_attribute),columnName:o}}return null},getEditorConfig:function(t){return n.getColumn(t).editor},init:function(){var i=e.getMapping();i.init&&i.init(this,n),s=n.$gantt.getDatastore(n.$config.bind);var o=this;a.push(s.attachEvent("onIdChange",function(t,e){o._itemId==t&&(o._itemId=e)})),a.push(s.attachEvent("onStoreUpdated",function(){n.$gantt.getState("batchUpdate").batch_update||o.isVisible()&&!s.isVisible(o._itemId)&&o.hide()})),r.push(t.attachEvent("onDataRender",function(){o._editor&&o._placeholder&&!d.isChildOf(o._placeholder,t.$root)&&n.$grid_data.appendChild(o._placeholder)})),this.init=function(){}},getState:function(){return{editor:this._editor,editorType:this._editorType,placeholder:this._placeholder,id:this._itemId,columnName:this._columnName}},startEdit:function(e,i){if(this.isVisible()&&this.save(),s.exists(e)){var n={id:e,columnName:i};t.isReadonly(s.getItem(e))?this.callEvent("onEditPrevent",[n]):!1!==this.callEvent("onBeforeEditStart",[n])?(this.show(n.id,n.columnName),this.setValue(),this.callEvent("onEditStart",[n])):this.callEvent("onEditPrevent",[n])}},isVisible:function(){return!(!this._editor||!d.isChildOf(this._placeholder,t.$root))},show:function(t,i){this.isVisible()&&this.save();var o={id:t,columnName:i},a=n.getColumn(o.columnName),r=this.getEditorConfig(a.name);if(r){var s=n.$getConfig().editor_types[r.type],c=function(t,e){var i=n.$getConfig(),o=function(t,e){for(var i=n.$getConfig(),o=n.getItemTop(t),a=n.getItemHeight(t),r=n.getGridColumns(),s=0,c=0,l=0,u=0;u<r.length;u++){if(r[u].name==e){l=r[u].width;break}i.rtl?c+=r[u].width:s+=r[u].width}return i.rtl?{top:o,right:c,height:a,width:l}:{top:o,left:s,height:a,width:l}}(t,e),a=document.createElement("div");a.className="gantt_grid_editor_placeholder",a.setAttribute(n.$config.item_attribute,t),a.setAttribute(n.$config.bind+"_id",t),a.setAttribute("data-column-name",e);var r=function(t,e){for(var i=t.getGridColumns(),n=0;n<i.length;n++)if(i[n].name==e)return n;return 0}(n,e);return a.setAttribute("data-column-index",r),a.style.cssText=i.rtl?["top:"+o.top+"px","right:"+o.right+"px","width:"+o.width+"px","height:"+o.height+"px"].join(";"):["top:"+o.top+"px","left:"+o.left+"px","width:"+o.width+"px","height:"+o.height+"px"].join(";"),a}(o.id,o.columnName);n.$grid_data.appendChild(c),s.show(o.id,a,r,c),this._editor=s,this._placeholder=c,this._itemId=o.id,this._columnName=o.columnName,this._editorType=r.type;var l=e.getMapping();l.onShow&&l.onShow(this,c,n)}},setValue:function(){var t=this.getState(),e=t.id,i=t.columnName,o=n.getColumn(i),a=s.getItem(e),r=this.getEditorConfig(i);if(r){var c=a[r.map_to];"auto"==r.map_to&&(c=s.getItem(e)),this._editor.set_value(c,e,o,this._placeholder),this.focus()}},focus:function(){this._editor.focus(this._placeholder)},getValue:function(){var t=n.getColumn(this._columnName);return this._editor.get_value(this._itemId,t,this._placeholder)},_getItemValue:function(){var e=this.getEditorConfig(this._columnName);if(e){var i=t.getTask(this._itemId)[e.map_to];return"auto"==e.map_to&&(i=s.getItem(this._itemId)),i}},isChanged:function(){var t=n.getColumn(this._columnName),e=this._getItemValue();return this._editor.is_changed(e,this._itemId,t,this._placeholder)},hide:function(){if(this._itemId){var t=this._itemId,i=this._columnName,o=e.getMapping();o.onHide&&o.onHide(this,this._placeholder,n),this._itemId=null,this._columnName=null,this._editorType=null,this._placeholder&&(this._editor&&this._editor.hide&&this._editor.hide(this._placeholder),this._editor=null,this._placeholder.parentNode&&this._placeholder.parentNode.removeChild(this._placeholder),this._placeholder=null,this.callEvent("onEditEnd",[{id:t,columnName:i}]))}},save:function(){if(this.isVisible()&&s.exists(this._itemId)&&this.isChanged()){var e=this._itemId,i=this._columnName;if(s.exists(e)){var a=s.getItem(e),r=this.getEditorConfig(i),c={id:e,columnName:i,newValue:this.getValue(),oldValue:this._getItemValue()};if(!1!==this.callEvent("onBeforeSave",[c])&&(!this._editor.is_valid||this._editor.is_valid(c.newValue,c.id,c.columnName,this._placeholder))){var l=r.map_to;"auto"!=l?(a[l]=c.newValue,o(a,l,t.config.inline_editors_date_processing),s.updateItem(e)):this._editor.save(e,n.getColumn(i),this._placeholder),this.callEvent("onSave",[c])}this.hide()}}else this.hide()},_findEditableCell:function(t,e){var i=t,o=n.getGridColumns()[i],a=o?o.name:null;if(a){for(;a&&!this.getEditorConfig(a);)a=this._findEditableCell(t+e,e);return a}return null},getNextCell:function(t){return this._findEditableCell(n.getColumnIndex(this._columnName)+t,t)},getFirstCell:function(){return this._findEditableCell(0,1)},getLastCell:function(){return this._findEditableCell(n.getGridColumns().length-1,-1)},editNextCell:function(t){var e=this.getNextCell(1);if(e){var i=this.getNextCell(1);i&&this.getEditorConfig(i)&&this.startEdit(this._itemId,i)}else if(t&&this.moveRow(1)){var n=this.moveRow(1);(e=this.getFirstCell())&&this.getEditorConfig(e)&&this.startEdit(n,e)}},editPrevCell:function(t){var e=this.getNextCell(-1);if(e){var i=this.getNextCell(-1);i&&this.getEditorConfig(i)&&this.startEdit(this._itemId,i)}else if(t&&this.moveRow(-1)){var n=this.moveRow(-1);(e=this.getLastCell())&&this.getEditorConfig(e)&&this.startEdit(n,e)}},moveRow:function(e){for(var i=e>0?t.getNext:t.getPrev,n=(i=t.bind(i,t))(this._itemId);t.isTaskExists(n)&&t.isReadonly(t.getTask(n));)n=i(n);return n},editNextRow:function(){var t=this.getNextCell(1);t&&this.startEdit(t,this._columnName)},editPrevRow:function(){var t=this.getNextCell(-1);t&&this.startEdit(t,this._columnName)},destructor:function(){a.forEach(function(t){s.detachEvent(t)}),r.forEach(function(e){t.detachEvent(e)}),a=[],r=[],s=null,this.hide(),this.detachAllEvents()}};return u.mixin(c,e),u.mixin(c,i),c}};return u.mixin(o,e),u.mixin(o,i),o}},function(t,e,i){var n=i(0),o=i(31),a=i(21),r=i(2),s=function(t){function e(e,i,n,o){var a=t.apply(this,arguments)||this;return a.$config.bindLinks=null,a}return r(e,t),n.mixin(e.prototype,{_createLayerConfig:function(){var t=this,e=function(){return t.isVisible()};return{tasks:[{renderer:this.$gantt.$ui.layers.resourceHistogram(),container:this.$task_bars,filter:[e]},{renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[e]}],links:[]}}},!0),n.mixin(e.prototype,a(t),!0),e}(o);t.exports=s},function(t,e,i){var n=i(1),o=i(0),a=i(21),r=i(23),s=i(2),c=function(t){function e(e,i,n,o){return t.apply(this,arguments)||this}return s(e,t),o.mixin(e.prototype,{init:function(){void 0===this.$config.bind&&(this.$config.bind=this.$getConfig().resource_store),t.prototype.init.apply(this,arguments)},_initEvents:function(){var e=this.$gantt;t.prototype._initEvents.apply(this,arguments),this._mouseDelegates.delegate("click","gantt_row",e.bind(function(t,e,i){var o=this.$config.rowStore;if(!o)return!0;var a=n.locateAttribute(t,this.$config.item_attribute);return a&&o.select(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid)}},!0),o.mixin(e.prototype,a(e),!0),e}(r);t.exports=c},function(t,e,i){var n=i(0),o=i(6);t.exports={create:function(){return function(t,e){var i={},n="gantt-static-bg-styles-"+t.uid();function o(t){var e=/^rgba?\(([\d]{1,3}), *([\d]{1,3}), *([\d]{1,3}) *(,( *[\d.]+ *))?\)$/i.exec(t);return e?{r:1*e[1],g:1*e[2],b:1*e[3],a:255*e[5]||255}:null}function a(t){return i[t]||null}function r(t,e,i){return(t+""+e+i.bottomBorderColor+i.rightBorderColor).replace(/[^\w\d]/g,"")}function s(t,e){i[t]=e}function c(t,e,i){var n=Math.floor(500/t)||1,a=Math.floor(500/e)||1,r=document.createElement("canvas");r.height=e*a,r.width=t*n;var s=r.getContext("2d");return function(t,e,i,n,a,r){var s=a.createImageData(e*n,t*i);s.imageSmoothingEnabled=!1;for(var l=1*r.rightBorderWidth,u=o(r.rightBorderColor),d=0,h=0,p=0,f=1;f<=n;f++)for(d=f*e-1,p=0;p<l;p++)for(h=0;h<t*i;h++)c(d-p,h,u,s);var g=1*r.bottomBorderWidth,m=o(r.bottomBorderColor);h=0;for(var v=1;v<=i;v++)for(h=v*t-1,p=0;p<g;p++)for(d=0;d<e*n;d++)c(d,h-p,m,s);a.putImageData(s,0,0)}(e,t,a,n,s,i),r.toDataURL();function c(e,i,o,a){var r=4*(i*(t*n)+e);a.data[r]=o.r,a.data[r+1]=o.g,a.data[r+2]=o.b,a.data[r+3]=o.a}}function l(t){return"gantt-static-bg-"+t}function u(){var t=document.createElement("div");t.className="gantt_task_cell";var e=document.createElement("div");return e.className="gantt_task_row",e.appendChild(t),e}return{render:function(t,i,o,d){if(i.static_background&&document.createElement("canvas").getContext){t.innerHTML="";var h=function(t,i,n,o){var a,r,s=[],c=0,l=n.width.filter(function(t){return!!t}),u=0,d=1e5;if(e.isIE){var h=navigator.appVersion||"";-1==h.indexOf("Windows NT 6.2")&&-1==h.indexOf("Windows NT 6.1")&&-1==h.indexOf("Windows NT 6.0")||(d=2e4)}for(var p=0;p<l.length;p++){var f=l[p];if(f!=r&&void 0!==r||p==l.length-1||c>d){for(var g=o,m=0,v=Math.floor(d/i.row_height)*i.row_height,b=c;g>0;){var _=Math.min(g,v);g-=v,(a=document.createElement("div")).style.height=_+"px",a.style.position="absolute",a.style.top=m+"px",a.style.left=u+"px",a.style.pointerEvents="none",a.style.whiteSpace="no-wrap",a.className=t[r||f],p==l.length-1&&(b=f+b-1),a.style.width=b+"px",s.push(a),m+=_}c=0,u+=b}f&&(c+=f,r=f)}return s}(function(t,e,i){var o={},u=function(t){for(var e=t.width,i={},n=0;n<e.length;n++)1*e[n]&&(i[e[n]]=!0);return i}(i),d=e.row_height,h="";for(var p in u){var f=1*p,g=r(f,d,t);if(!a(g)){var m=c(f,d,t);s(g,m),h+="."+l(g)+"{ background-image: url('"+m+"');}"}o[p]=l(g)}return h&&((function(){var t=document.getElementById(n);return t||((t=document.createElement("style")).id=n,document.body.appendChild(t)),t}()).innerHTML+=h),o}(function(t){var e=u(),i=u();t.appendChild(e),t.appendChild(i);var n=e.firstChild,o=getComputedStyle(e),a=getComputedStyle(n),r={bottomBorderWidth:o.getPropertyValue("border-bottom-width").replace("px",""),rightBorderWidth:a.getPropertyValue("border-right-width").replace("px",""),bottomBorderColor:o.getPropertyValue("border-bottom-color"),rightBorderColor:a.getPropertyValue("border-right-color")};return t.removeChild(e),t.removeChild(i),r}(t),i,o),i,o,d),p=document.createDocumentFragment();h.forEach(function(t){p.appendChild(t)}),t.appendChild(p)}},destroy:function(){var t=document.getElementById(n);t&&t.parentNode&&t.parentNode.removeChild(t)}}}(n,o)}}},function(t,e,i){var n=i(2),o=i(1),a=i(0),r=i(6),s=function(t){"use strict";var e=["altKey","shiftKey","metaKey"];function i(e,i,n,o){var r=t.apply(this,arguments)||this;this.$config=a.mixin(i,{scroll:"x"}),r._scrollHorizontalHandler=a.bind(r._scrollHorizontalHandler,r),r._scrollVerticalHandler=a.bind(r._scrollVerticalHandler,r),r._outerScrollVerticalHandler=a.bind(r._outerScrollVerticalHandler,r),r._outerScrollHorizontalHandler=a.bind(r._outerScrollHorizontalHandler,r),r._mouseWheelHandler=a.bind(r._mouseWheelHandler,r),this.$config.hidden=!0;var s=o.config.scroll_size;return o.env.isIE&&(s+=1),this._isHorizontal()?(r.$config.height=s,r.$parent.$config.height=s):(r.$config.width=s,r.$parent.$config.width=s),this.$config.scrollPosition=0,r.$name="scroller",r}return n(i,t),i.prototype.init=function(t){t.innerHTML=this.$toHTML(),this.$view=t.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews()},i.prototype.$toHTML=function(){return"<div class='gantt_layout_cell "+(this._isHorizontal()?"gantt_hor_scroll":"gantt_ver_scroll")+"'><div style='"+(this._isHorizontal()?"width:2000px":"height:2000px")+"'></div></div>"},i.prototype._getRootParent=function(){for(var t=this.$parent;t&&t.$parent;)t=t.$parent;if(t)return t},i.prototype._eachView=function(){var t=[];return function t(e,i){if(i.push(e),e.$cells)for(var n=0;n<e.$cells.length;n++)t(e.$cells[n],i)}(this._getRootParent(),t),t},i.prototype._getLinkedViews=function(){for(var t=this._eachView(),e=[],i=0;i<t.length;i++)t[i].$config&&(this._isVertical()&&t[i].$config.scrollY==this.$id||this._isHorizontal()&&t[i].$config.scrollX==this.$id)&&e.push(t[i]);return e},i.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollHorizontalHandler)},i.prototype._initLinkedViews=function(){for(var t=this._getLinkedViews(),e=this._isVertical()?"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical":"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal",i=0;i<t.length;i++)o.addClassName(t[i].$view||t[i].getNode(),e)},i.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollVerticalHandler)},i.prototype._updateLinkedViews=function(){},i.prototype._initMouseWheel=function(){this.$domEvents.attach(this._getRootParent().$view,r.isFF?"wheel":"mousewheel",this._mouseWheelHandler)},i.prototype.scrollHorizontally=function(t){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=t,this.$config.codeScrollLeft=t,t=this.$scroll_hor.scrollLeft;for(var e=this._getLinkedViews(),i=0;i<e.length;i++)e[i].scrollTo&&e[i].scrollTo(t,void 0);var n=this.$config.scrollPosition;this.$config.scrollPosition=t,this.callEvent("onScroll",[n,t,this.$config.scroll]),this._scrolling=!1}},i.prototype.scrollVertically=function(t){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=t,t=this.$scroll_ver.scrollTop;for(var e=this._getLinkedViews(),i=0;i<e.length;i++)e[i].scrollTo&&e[i].scrollTo(void 0,t);var n=this.$config.scrollPosition;this.$config.scrollPosition=t,this.callEvent("onScroll",[n,t,this.$config.scroll]),this._scrolling=!1}},i.prototype._isVertical=function(){return"y"==this.$config.scroll},i.prototype._isHorizontal=function(){return"x"==this.$config.scroll},i.prototype._scrollHorizontalHandler=function(t){if(!this._isVertical()&&!this._scrolling){if(new Date-(this._wheel_time||0)<100)return!0;this.scrollHorizontally(this.$scroll_hor.scrollLeft),this._oldLeft=this.$scroll_hor.scrollLeft}},i.prototype._outerScrollHorizontalHandler=function(t){this._isVertical()},i.prototype.show=function(){this.$parent.show()},i.prototype.hide=function(){this.$parent.hide()},i.prototype._getScrollSize=function(){for(var t,e=0,i=0,n=this._isHorizontal(),o=this._getLinkedViews(),a=n?"scrollWidth":"scrollHeight",r=n?"contentX":"contentY",s=n?"x":"y",c=this._getScrollOffset(),l=0;l<o.length;l++)if((t=o[l])&&t.$content&&t.$content.getSize&&!t.$config.hidden){var u,d=t.$content.getSize();if(u=d.hasOwnProperty(a)?d[a]:d[r],c)d[r]>d[s]&&d[r]>e&&u>d[s]-c+2&&(e=u+(n?0:2),i=d[s]);else{var h=Math.max(d[r]-u,0);(u+=h)>Math.max(d[s]-h,0)&&u>e&&(e=u,i=d[s])}}return{outerScroll:i,innerScroll:e}},i.prototype.scroll=function(t){this._isHorizontal()?this.scrollHorizontally(t):this.scrollVertically(t)},i.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0}},i.prototype.setSize=function(e,i){t.prototype.setSize.apply(this,arguments);var n=this._getScrollSize(),o=(this._isVertical()?i:e)-this._getScrollOffset()+(this._isHorizontal()?1:0);n.innerScroll&&o>n.outerScroll&&(n.innerScroll+=o-n.outerScroll),this.$config.scrollSize=n.innerScroll,this.$config.width=e,this.$config.height=i,this._setScrollSize(n.innerScroll)},i.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode)},i.prototype.shouldShow=function(){var t=this._getScrollSize();return!(!t.innerScroll&&this.$parent&&this.$parent.$view.parentNode||!t.innerScroll||this.$parent&&this.$parent.$view.parentNode)},i.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode)},i.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show()},i.prototype._getScaleOffset=function(t){var e=0;return!t||"timeline"!=t.$config.view&&"grid"!=t.$config.view||(e=t.$content.$getConfig().scale_height),e},i.prototype._getScrollOffset=function(){var t=0;if(this._isVertical()){var e=this.$parent.$parent;t=Math.max(this._getScaleOffset(e.getPrevSibling(this.$parent.$id)),this._getScaleOffset(e.getNextSibling(this.$parent.$id)))}else for(var i=this._getLinkedViews(),n=0;n<i.length;n++){var o=i[n].$parent.$cells,a=o[o.length-1];if(a&&"scrollbar"==a.$config.view&&!1===a.$config.hidden){t=a.$config.width;break}}return t||0},i.prototype._setScrollSize=function(t){var e=this._isHorizontal()?"width":"height",i=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,n=this._getScrollOffset(),a=i.firstChild;n?this._isVertical()?(this.$config.outerSize=this.$config.height-n+3,i.style.height=this.$config.outerSize+"px",i.style.top=n-1+"px",o.addClassName(i,this.$parent._borders.top),o.addClassName(i.parentNode,"gantt_task_vscroll")):(this.$config.outerSize=this.$config.width-n+1,i.style.width=this.$config.outerSize+"px"):(i.style.top="auto",o.removeClassName(i,this.$parent._borders.top),o.removeClassName(i.parentNode,"gantt_task_vscroll"),this.$config.outerSize=this.$config.height),a.style[e]=t+"px"},i.prototype._scrollVerticalHandler=function(t){if(!this._scrollHorizontalHandler()&&!this._scrolling){var e=this.$scroll_ver.scrollTop;e!=this._oldTop&&(this.scrollVertically(e),this._oldTop=this.$scroll_ver.scrollTop)}},i.prototype._outerScrollVerticalHandler=function(t){this._scrollHorizontalHandler()},i.prototype._checkWheelTarget=function(t){for(var e=this._getLinkedViews().concat(this),i=0;i<e.length;i++)if(o.isChildOf(t,e[i].$view))return!0;return!1},i.prototype._mouseWheelHandler=function(t){if(this._checkWheelTarget(t.target||t.srcElement)){this._wheel_time=new Date;var i={},n=r.isFF,o=n?-20*t.deltaX:2*t.wheelDeltaX,a=n?-40*t.deltaY:t.wheelDelta,s=this.$gantt.config.horizontal_scroll_key;if(!1!==s&&e.indexOf(s)>=0&&(!t[s]||t.deltaX||t.wheelDeltaX||(o=2*a,a=0)),o&&Math.abs(o)>Math.abs(a)){if(this._isVertical())return;if(i.x)return!0;if(!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var c=o/-40,l=this._oldLeft,u=l+30*c;if(this.scrollHorizontally(u),this.$scroll_hor.scrollLeft=u,l==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft}else{if(this._isHorizontal())return;if(i.y)return!0;if(!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;c=a/-40,void 0===a&&(c=t.detail);var d=this._oldTop,h=this.$scroll_ver.scrollTop+30*c;if(this.scrollVertically(h),this.$scroll_ver.scrollTop=h,d==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop}return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1}},i}(i(9));t.exports=s},function(t,e,i){var n=i(2),o=i(1),a=i(0),r=i(9),s=function(t){"use strict";function e(e,i,n){var o,a,r=t.apply(this,arguments)||this;return r._moveHandler=function(t){r._moveResizer(r._resizer,t.pageX,t.pageY)},r._upHandler=function(){var t=r._getNewSizes();!1!==r.callEvent("onResizeEnd",[o,a,t?t.back:0,t?t.front:0])&&r._setSizes(),r._setBackground(!1),r._clearResizer(),r._clearListeneres()},r._clearListeneres=function(){this.$domEvents.detach(document,"mouseup",r._upHandler),this.$domEvents.detach(document,"mousemove",r._moveHandler),this.$domEvents.detach(document,"mousemove",r._startOnMove),this.$domEvents.detach(document,"mouseup",r._cancelDND)},r._callStartDNDEvent=function(){if(this._xMode?(o=this._behind.$config.width||this._behind.$view.offsetWidth,a=this._front.$config.width||this._front.$view.offsetWidth):(o=this._behind.$config.height||this._behind.$view.offsetHeight,a=this._front.$config.height||this._front.$view.offsetHeight),!1===r.callEvent("onResizeStart",[o,a]))return!1},r._startDND=function(t){if(!1!==this._callStartDNDEvent()){var e=!1;this._eachGroupItem(function(t){t._getSiblings(),!1===t._callStartDNDEvent()&&(e=!0)}),e||(r._moveHandler(t),r.$domEvents.attach(document,"mousemove",r._moveHandler),r.$domEvents.attach(document,"mouseup",r._upHandler))}},r._cancelDND=function(){r._setBackground(!1),r._clearResizer(),r._clearListeneres()},r._startOnMove=function(t){r._isPosChanged(t)&&(r._clearListeneres(),r._startDND(t))},r._downHandler=function(t){r._getSiblings(),r._behind.$config.collapsed||r._front.$config.collapsed||(r._setBackground(!0),r._resizer=r._setResizer(),r._positions={x:t.pageX,y:t.pageY,timestamp:Date.now()},r.$domEvents.attach(document,"mousemove",r._startOnMove),r.$domEvents.attach(document,"mouseup",r._cancelDND))},r.$name="resizer",r}return n(e,t),e.prototype.init=function(){t.prototype.init.call(this),this._xMode="x"===this.$config.mode,this._xMode&&!this.$config.width?this.$config.width=this.$config.minWidth=1:this._xMode||this.$config.height||(this.$config.height=this.$config.minHeight=1),this.$config.margin=-1,this.$domEvents.attach(this.$view,"mousedown",this._downHandler)},e.prototype.$toHTML=function(){var t=this.$config.mode,e=this.$config.css||"";return"<div class='gantt_layout_cell gantt_resizer gantt_resizer_"+t+"'><div class='gantt_layout_content gantt_resizer_"+t+(e?" "+e:"")+"'></div></div>"},e.prototype._clearResizer=function(){this._resizer&&(this._resizer.parentNode&&this._resizer.parentNode.removeChild(this._resizer),this._resizer=null)},e.prototype._isPosChanged=function(t){return!!this._positions&&(Math.abs(this._positions.x-t.pageX)>3||Math.abs(this._positions.y-t.pageY)>3||Date.now()-this._positions.timestamp>300)},e.prototype._getSiblings=function(){var t=this.$parent.getCells();this.$config.prev&&(this._behind=this.$factory.getView(this.$config.prev),this._behind instanceof r||(this._behind=this._behind.$parent)),this.$config.next&&(this._front=this.$factory.getView(this.$config.next),this._front instanceof r||(this._front=this._behind.$parent));for(var e=0;e<t.length;e++)this===t[e]&&(this._behind||(this._behind=t[e-1]),this._front||(this._front=t[e+1]))},e.prototype._setBackground=function(t){var e="gantt_resizing";if(!t)return o.removeClassName(this._behind.$view,e),o.removeClassName(this._front.$view,e),void o.removeClassName(document.body,"gantt_noselect");o.addClassName(this._behind.$view,e,!0),o.addClassName(this._front.$view,e,!0),o.addClassName(document.body,"gantt_noselect",!0)},e.prototype._setResizer=function(){var t=document.createElement("div");return t.className="gantt_resizer_stick",this.$view.appendChild(t),this.$view.style.overflow="visible",t.style.height=this.$view.style.height,t},e.prototype._getDirection=function(t,e){var i;return(i=this._xMode?t-this._positions.x:e-this._positions.y)?i<0?-1:1:0},e.prototype._getResizePosition=function(t,e){var i,n,o,a,r;this._xMode?(i=t-this._positions.x,n=this._behind.$config.width||this._behind.$view.offsetWidth,a=this._front.$config.width||this._front.$view.offsetWidth,o=this._behind.$config.minWidth,r=this._front.$config.minWidth):(i=e-this._positions.y,n=this._behind.$config.height||this._behind.$view.offsetHeight,a=this._front.$config.height||this._front.$view.offsetHeight,o=this._front.$config.minHeight,r=this._front.$config.minHeight);var s,c,l=this._getDirection(t,e);if(-1===l){if(c=a-i,s=n-Math.abs(i),a-i>this._front.$config.maxWidth)return;Math.abs(i)>=n&&(i=-Math.abs(n-2)),n-Math.abs(i)<=o&&(i=-Math.abs(n-o))}else c=a-Math.abs(i),s=n+i,n+i>this._behind.$config.maxWidth&&(i=this._behind.$config.maxWidth-n),Math.abs(i)>=a&&(i=a-2),a-Math.abs(i)<=r&&(i=Math.abs(a-r));return-1===l?(c=a-i,s=n-Math.abs(i)):(c=a-Math.abs(i),s=n+i),{size:i,newFrontSide:c,newBehindSide:s}},e.prototype._getGroupName=function(){return this._getSiblings(),this._front.$config.group||this._behind.$config.group},e.prototype._eachGroupItem=function(t,e){for(var i=this.$factory.getView("main"),n=this._getGroupName(),o=i.getCellsByType("resizer"),a=0;a<o.length;a++)o[a]._getGroupName()==n&&o[a]!=this&&t.call(e||this,o[a])},e.prototype._getGroupResizePosition=function(t,e){var i=this._getResizePosition(t,e);if(!this._getGroupName())return i;var n,o=[i];this._eachGroupItem(function(i){i._getSiblings();var n=a.copy(this._positions);this._xMode?n.x+=i._behind.$config.width-this._behind.$config.width:n.y+=i._behind.$config.height-this._behind.$config.height,i._positions=n,o.push(i._getResizePosition(t,e))});for(var r=0;r<o.length;r++){if(!o[r])return;(void 0===n||o[r].newBehindSide>n.newBehindSide)&&(n=o[r])}return n},e.prototype._moveResizer=function(t,e,i){if(0!==e){var n=this._getGroupResizePosition(e,i);n&&1!==Math.abs(n.size)&&(this._xMode?(t.style.left=n.size+"px",this._positions.nextX=n.size||0):(t.style.top=n.size+"px",this._positions.nextY=n.size||0),this.callEvent("onResize",[n.newBehindSide,n.newFrontSide]))}},e.prototype._setGravity=function(t){var e=this._xMode?"offsetWidth":"offsetHeight",i=this._xMode?this._positions.nextX:this._positions.nextY,n=this._front.$view[e],o=this._behind.$view[e],a=(n-i)/n*this._front.getSize().gravity,r=(o+i)/o*this._behind.getSize().gravity;"front"!==t&&(this._front.$config.gravity=a),"behind"!==t&&(this._behind.$config.gravity=r)},e.prototype._getNewSizes=function(){var t=this._xMode?this._behind.$config.width:this._behind.$config.height,e=this._xMode?this._front.$config.width:this._front.$config.height,i=this._xMode?this._positions.nextX:this._positions.nextY;return e||t?{front:e?e-i||1:0,back:t?t+i||1:0}:null},e.prototype._assignNewSizes=function(t){this._getSiblings();var e=this._xMode?"width":"height";t?(t.front?this._front.$config[e]=t.front:this._setGravity("behind"),t.back?this._behind.$config[e]=t.back:this._setGravity("front")):this._setGravity()},e.prototype._setSizes=function(){this._resizer&&this.$view.removeChild(this._resizer);var t=this._getNewSizes();if(this._positions.nextX||this._positions.nextY){this._assignNewSizes(t);var e=this._xMode?"width":"height";this._front.$config.group?this.$gantt.$layout._syncCellSizes(this._front.$config.group,this._front.$config[e]):this._behind.$config.group&&this.$gantt.$layout._syncCellSizes(this._behind.$config.group,this._behind.$config[e]),this._getGroupName()?this.$factory.getView("main").resize():this.$parent.resize()}},e}(r);t.exports=s},function(t,e,i){var n=i(2),o=i(0),a=function(t){"use strict";function e(e,i,n){var a=t.apply(this,arguments)||this;if(i.view){i.id&&(this.$id=o.uid());var r=o.copy(i);if(delete r.config,delete r.templates,this.$content=this.$factory.createView(i.view,this,r,this),!this.$content)return!1}return a.$name="viewCell",a}return n(e,t),e.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this)},e.prototype.clear=function(){if(this.$initialized=!1,this.$content){var e=this.$content.unload||this.$content.destructor;e&&e.call(this.$content)}t.prototype.clear.call(this)},e.prototype.scrollTo=function(e,i){this.$content&&this.$content.scrollTo?this.$content.scrollTo(e,i):t.prototype.scrollTo.call(this,e,i)},e.prototype._setContentSize=function(t,e){var i=this._getBorderSizes();"number"==typeof t&&(this.$config.width=t+i.horizontal),"number"==typeof e&&(this.$config.height=e+i.vertical)},e.prototype.setSize=function(e,i){if(t.prototype.setSize.call(this,e,i),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var n=this.$view.childNodes[1];n||(n=this.$view.childNodes[0]),this.$content.init(n)}},e.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY)},e.prototype.getContentSize=function(){var e=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var i=this.$content.getSize();e.width=void 0===i.contentX?i.width:i.contentX,e.height=void 0===i.contentY?i.height:i.contentY}var n=this._getBorderSizes();return e.width+=n.horizontal,e.height+=n.vertical,e},e}(i(9));t.exports=a},function(t,e,i){var n=i(2),o=i(33),a=i(9),r=function(t){"use strict";function e(e,i,n){for(var o=t.apply(this,arguments)||this,a=0;a<o.$cells.length;a++)o.$cells[a].$config.hidden=0!==a;return o.$cell=o.$cells[0],o.$name="viewLayout",o}return n(e,t),e.prototype.cell=function(e){var i=t.prototype.cell.call(this,e);return i.$view||this.$fill(null,this),i},e.prototype.moveView=function(t){var e=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,e.removeChild(this.$cell.$view)),this.$cell=t,e.appendChild(t.$view)},e.prototype.setSize=function(t,e){a.prototype.setSize.call(this,t,e)},e.prototype.setContentSize=function(){var t=this.$lastSize;this.$cell.setSize(t.contentX,t.contentY)},e.prototype.getSize=function(){var e=t.prototype.getSize.call(this);if(this.$cell){var i=this.$cell.getSize();if(this.$config.byMaxSize)for(var n=0;n<this.$cells.length;n++){var o=this.$cells[n].getSize();for(var a in i)i[a]=Math.max(i[a],o[a])}for(var r in e)e[r]=e[r]||i[r];e.gravity=Math.max(e.gravity,i.gravity)}return e},e}(o);t.exports=r},function(t,e){t.exports=function(t,e){return!(!e||e.left>t.x_end||e.left+e.width<t.x||e.top>t.y_end||e.top+e.height<t.y)}},function(t,e,i){var n=i(118),o=i(12),a=i(34);t.exports=function(t){var e={},i={};function r(e){var i=null;return"string"==typeof e.view?i=t.$ui.getView(e.view):e.view&&(i=e.view),i}function s(s,c,l){if(i[s])return i[s];c.renderer||t.assert(!1,"Invalid renderer call");var u=null,d=null,h=null,p=null;"function"==typeof c.renderer?(u=c.renderer,h=a):(u=c.renderer.render,d=c.renderer.update,c.renderer.isInViewPort?p=c.renderer.isInViewPort:h=c.renderer.getRectangle,h||null===h||(h=a));var f=c.filter;return l&&l.setAttribute(t.config.layer_attribute,!0),i[s]={render_item:function(e,i,a){if(i=i||l,!f||f(e)){var s=r(c),d=a;!d&&s&&s.$getConfig().smart_rendering&&(d=s.getViewPort());var g=null;!o(t)&&(h||p)&&d?(p?p(e,d,s,t):n(d,h(e,s,t)))&&(g=u.call(t,e,s,d)):g=u.call(t,e,s,d),this.append(e,g,i)}else this.remove_item(e.id)},clear:function(t){this.rendered=e[s]={},c.append||this.clear_container(t)},clear_container:function(t){(t=t||l)&&(t.innerHTML="")},get_visible_range:function(e){var i,n=r(c);return n&&n.$getConfig().smart_rendering&&(i=n.getViewPort()),n&&i&&c.renderer&&c.renderer.getVisibleRange?c.renderer.getVisibleRange(t,n,e,i):{start:0,end:e.count()}},render_items:function(t,e){e=e||l;var i=document.createDocumentFragment();this.clear(e);var n=null,o=r(c);o&&o.$getConfig().smart_rendering&&(n=o.getViewPort());for(var a=0,s=t.length;a<s;a++)this.render_item(t[a],i,n);e.appendChild(i,e)},update_items:function(e,i){var a=r(c);if(a&&a.$getConfig().smart_rendering&&!o(t)&&this.rendered&&(h||p)){i=i||l;var s=document.createDocumentFragment(),u=null;a&&(u=a.getViewPort());var f={};for(var g in this.rendered)f[g]=!0;g=0;for(var m=e.length;g<m;g++){var v=e[g],b=this.rendered[v.id];f[v.id]=!1,b&&b.parentNode?(p?p(v,u,a,t):n(u,h(v,a,t)))?(d&&d.call(t,v,b,a,u),this.restore(v,s)):f[v.id]=!0:this.render_item(e[g],s,u)}for(var g in f)f[g]&&this.hide(g);s.childNodes.length&&i.appendChild(s,i)}},append:function(t,e,i){this.rendered&&(e?(this.rendered[t.id]&&this.rendered[t.id].parentNode?this.replace_item(t.id,e):i.appendChild(e),this.rendered[t.id]=e):this.rendered[t.id]&&this.remove_item(t.id))},replace_item:function(t,e){var i=this.rendered[t];i&&i.parentNode&&i.parentNode.replaceChild(e,i),this.rendered[t]=e},remove_item:function(t){this.hide(t),delete this.rendered[t]},hide:function(t){var e=this.rendered[t];e&&e.parentNode&&e.parentNode.removeChild(e)},restore:function(t,e){var i=this.rendered[t.id];i?i.parentNode||this.append(t,i,e||l):this.render_item(t,e||l)},change_id:function(t,e){this.rendered[e]=this.rendered[t],delete this.rendered[t]},rendered:e[s],node:l,destructor:function(){this.clear(),delete i[s],delete e[s]}},i[s]}return{getRenderer:s,clearRenderers:function(){for(var t in i)s(t).destructor()}}}},function(t,e,i){var n=i(119),o=i(0),a=i(1),r=i(12);function s(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(e){for(var i=!0,n=0,o=t.length;n<o;n++){var a=t[n];a&&(i=i&&!1!==a(e.id,e))}return i}}t.exports=function(t){var e=n(t);return{createGroup:function(i,n,c,l){var u={tempCollection:[],renderers:{},container:i,filters:[],getLayers:function(){this._add();var t=[];for(var e in this.renderers)t.push(this.renderers[e]);return t},getLayer:function(t){return this.renderers[t]},_add:function(i){i&&(i.id=i.id||o.uid(),this.tempCollection.push(i));for(var r=this.container(),s=this.tempCollection,c=0;c<s.length;c++)if(i=s[c],this.container()||i&&i.container&&a.isChildOf(i.container,document.body)){var u=i.container,d=i.id;if(!u.parentNode)if(i.topmost)r.appendChild(u);else{var h=n?n():r.firstChild;h?r.insertBefore(u,h):r.appendChild(u)}this.renderers[d]=e.getRenderer(d,i,u),l&&l(i,t),this.tempCollection.splice(c,1),c--}},addLayer:function(e){if(e){"function"==typeof e&&(e={renderer:e}),void 0===e.filter?e.filter=s(c||[]):e.filter instanceof Array&&(e.filter.push(c),e.filter=s(e.filter)),e.container||(e.container=document.createElement("div"));var i=this;e.requestUpdate=function(){t.config.smart_rendering&&!r(t)&&i.renderers[e.id]&&i.onUpdateRequest(i.renderers[e.id])}}return this._add(e),e?e.id:void 0},onUpdateRequest:function(t){},eachLayer:function(t){for(var e in this.renderers)t(this.renderers[e])},removeLayer:function(t){this.renderers[t]&&(this.renderers[t].destructor(),delete this.renderers[t])},clear:function(){for(var t in this.renderers)this.renderers[t].destructor();this.renderers={}}};return t.attachEvent("onDestroy",function(){u.clear(),u=null}),u}}}},function(t,e,i){var n=i(120);function o(t,e){if(t.view){var i=t.view;"string"==typeof i&&(i=e.$ui.getView(i)),i&&i.attachEvent&&i.attachEvent("onScroll",function(){t.requestUpdate&&t.requestUpdate()})}}t.exports=function(t){var e=n(t);return{getDataRender:function(e){return t.$services.getService("layer:"+e)||null},createDataRender:function(i){var n=i.name,a=e.createGroup(i.defaultContainer,i.defaultContainerSibling,function(t,e){if(!a.filters)return!0;for(var i=0;i<a.filters.length;i++)if(!1===a.filters[i](t,e))return!1},o);return t.$services.setService("layer:"+n,function(){return a}),t.attachEvent("onGanttReady",function(){a.addLayer()}),a},init:function(){var e=this.createDataRender({name:"task",defaultContainer:function(){return t.$task_data?t.$task_data:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_data:void 0},defaultContainerSibling:function(){return t.$task_links?t.$task_links:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_links:void 0},filter:function(t){}},t),i=this.createDataRender({name:"link",defaultContainer:function(){return t.$task_data?t.$task_data:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_data:void 0}},t);return{addTaskLayer:function(t){return"function"==typeof t&&(t={renderer:t}),t.view="timeline",e.addLayer(t)},_getTaskLayers:function(){return e.getLayers()},removeTaskLayer:function(t){e.removeLayer(t)},_clearTaskLayers:function(){e.clear()},addLinkLayer:function(t){return"function"==typeof t&&(t={renderer:t}),t.view="timeline",i.addLayer(t)},_getLinkLayers:function(){return i.getLayers()},removeLinkLayer:function(t){i.removeLayer(t)},_clearLinkLayers:function(){i.clear()}}}}}},function(t,e,i){var n=function(t){return function(e){var i={click:{},doubleclick:{},contextMenu:{}};function n(t,e,n,o){i[t][e]||(i[t][e]=[]),i[t][e].push({handler:n,root:o})}function o(t){t=t||window.event;var n=e.locate(t),o=r(t,i.click),a=!0;if(null!==n?a=!e.checkEvent("onTaskClick")||e.callEvent("onTaskClick",[n,t]):e.callEvent("onEmptyClick",[t]),a){if(!s(o,t,n))return;n&&e.getTask(n)&&e.config.select_task&&!e.config.multiselect&&e.selectTask(n)}}function a(t){var i=(t=t||window.event).target||t.srcElement,n=e.locate(i),o=e.locate(i,e.config.link_attribute),a=!e.checkEvent("onContextMenu")||e.callEvent("onContextMenu",[n,o,t]);return a||(t.preventDefault?t.preventDefault():t.returnValue=!1),a}function r(e,i){for(var n=e.target||e.srcElement,o=[];n;){var a=t.getClassName(n);if(a){a=a.split(" ");for(var r=0;r<a.length;r++)if(a[r]&&i[a[r]])for(var s=i[a[r]],c=0;c<s.length;c++)s[c].root&&!t.isChildOf(n,s[c].root)||o.push(s[c].handler)}n=n.parentNode}return o}function s(t,i,n){for(var o=!0,a=0;a<t.length;a++){var r=t[a].call(e,i,n,i.target||i.srcElement);o=o&&!(void 0!==r&&!0!==r)}return o}function c(t){t=t||window.event;var n=e.locate(t),o=r(t,i.doubleclick),a=!e.checkEvent("onTaskDblClick")||null===n||e.callEvent("onTaskDblClick",[n,t]);if(a){if(!s(o,t,n))return;null!==n&&e.getTask(n)&&a&&e.config.details_on_dblclick&&!e.isReadonly()&&e.showLightbox(n)}}function l(t){if(e.checkEvent("onMouseMove")){var i=e.locate(t);e._last_move_event=t,e.callEvent("onMouseMove",[i,t])}}var u=e._createDomEventScope();function d(t){u.detachAll(),t&&(u.attach(t,"click",o),u.attach(t,"dblclick",c),u.attach(t,"mousemove",l),u.attach(t,"contextmenu",a))}return{reset:d,global:function(t,e,i){n(t,e,i,null)},delegate:n,detach:function(t,e,n,o){if(i[t]&&i[t][e]){for(var a=i[t],r=a[e],s=0;s<r.length;s++)r[s].root==o&&(r.splice(s,1),s--);r.length||delete a[e]}},callHandler:function(t,e,n,o){var a=i[t][e];if(a)for(var r=0;r<a.length;r++)(n||a[r].root)&&a[r].root!==n||a[r].handler.apply(this,o)},onDoubleClick:c,onMouseMove:l,onContextMenu:a,onClick:o,destructor:function(){d(),i=null,u=null}}}}(i(1));t.exports={init:n}},function(t,e,i){var n=i(0);function o(t){n.mixin(this,t,!0)}function a(t,e){var i=this.$config[t];return i?i instanceof o?i:(o.prototype=e,this.$config[t]=new o(i),this.$config[t]):e}t.exports=function(t,e){n.mixin(t,function(t){var e,i;return{$getConfig:function(){return e||(e=t?t.$getConfig():this.$gantt.config),this.$config.config?a.call(this,"config",e):e},$getTemplates:function(){return i||(i=t?t.$getTemplates():this.$gantt.templates),this.$config.templates?a.call(this,"templates",i):i}}}(e))}},function(t,e,i){var n=i(0),o=i(123);t.exports={createFactory:function(t){var e={},i={};function a(a,r,s,c){var l=e[a];if(!l||!l.create)return!1;"resizer"!=a||s.mode||(s.mode=c.$config.cols?"x":"y"),"viewcell"!=a||"scrollbar"!=s.view||s.scroll||(s.scroll=c.$config.cols?"y":"x"),(s=n.copy(s)).id||i[s.view]||(s.id=s.view),s.id&&!s.css&&(s.css=s.id+"_cell");var u=new l.create(r,s,this,t);return l.configure&&l.configure(u),o(u,c),u.$id||(u.$id=s.id||t.uid()),u.$parent||"object"!=typeof r||(u.$parent=r),u.$config||(u.$config=s),i[u.$id]&&(u.$id=t.uid()),i[u.$id]=u,u}return{initUI:function(t,e){var i="cell";return t.view?i="viewcell":t.resizer?i="resizer":t.rows||t.cols?i="layout":t.views&&(i="multiview"),a.call(this,i,null,t,e)},reset:function(){i={}},registerView:function(t,i,n){e[t]={create:i,configure:n}},createView:a,getView:function(t){return i[t]}}}}},function(t,e,i){var n=i(124),o=i(122),a=i(121),r=i(9),s=i(33),c=i(117),l=i(116),u=i(115),d=i(114),h=i(32),p=i(23),f=i(112),g=i(31),m=i(111),v=i(110),b=i(99),_=i(98),w=i(96),y=i(95),k=i(93),x=i(92),S=i(91),T=i(90),C=i(84),D=i(81);t.exports={init:function(t){function e(e,i){var n=i(t);n.onCreated&&n.onCreated(e),e.attachEvent("onReady",function(){n.onInitialized&&n.onInitialized(e)}),e.attachEvent("onDestroy",function(){n.onDestroyed&&n.onDestroyed(e)})}var i=n.createFactory(t);i.registerView("cell",r),i.registerView("resizer",u),i.registerView("scrollbar",d),i.registerView("layout",s,function(t){"main"===(t.$config?t.$config.id:null)&&e(t,D)}),i.registerView("viewcell",l),i.registerView("multiview",c),i.registerView("timeline",h,function(t){"timeline"!==(t.$config?t.$config.id:null)&&"task"!=t.$config.bind||e(t,C)}),i.registerView("grid",p,function(t){"grid"!==(t.$config?t.$config.id:null)&&"task"!=t.$config.bind||e(t,T)}),i.registerView("resourceGrid",f),i.registerView("resourceTimeline",g),i.registerView("resourceHistogram",m);var I=a(t),P=v(t);return t.ext.inlineEditors=P,t.ext._inlineEditors=P,P.init(t),{factory:i,mouseEvents:o.init(t),layersApi:I.init(),render:{gridLine:function(){return k(t)},taskBg:function(){return w(t)},taskBar:function(){return b(t)},taskSplitBar:function(){return _(t)},link:function(){return y(t)},resourceRow:function(){return x(t)},resourceHistogram:function(){return S(t)}},layersService:{getDataRender:function(e){return I.getDataRender(e,t)},createDataRender:function(e){return I.createDataRender(e,t)}}}}}},function(t,e,i){var n=i(0),o=i(1);t.exports=function(t){var e="data-dhxbox",i=null;function a(t,e){var n=t.callback;g.hide(t.box),i=t.box=null,n&&n(e)}function r(t){if(i){var e=t.which||t.keyCode,n=!1;if(m.keyboard){if(13==e||32==e){var r=t.target||t.srcElement;o.getClassName(r).indexOf("gantt_popup_button")>-1&&r.click?r.click():(a(i,!0),n=!0)}27==e&&(a(i,!1),n=!0)}return n?(t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)):void 0}}function s(t){s.cover||((s.cover=document.createElement("div")).onkeydown=r,s.cover.className="dhx_modal_cover",document.body.appendChild(s.cover)),s.cover.style.display=t?"inline-block":"none"}function c(e,i,n){var o=t._waiAria.messageButtonAttrString(e),a=i.toLowerCase().replace(/ /g,"_");return"<div "+o+" class='gantt_popup_button dhtmlx_popup_button gantt_"+a+"_button dhtmlx_"+a+"_button' data-result='"+n+"' result='"+n+"' ><div>"+e+"</div></div>"}function l(){for(var t=[].slice.apply(arguments,[0]),e=0;e<t.length;e++)if(t[e])return t[e]}function u(u,d,h){var p=u.tagName?u:function(r,s,u){var d=document.createElement("div"),h=n.uid();t._waiAria.messageModalAttr(d,h),d.className=" gantt_modal_box dhtmlx_modal_box gantt-"+r.type+" dhtmlx-"+r.type,d.setAttribute(e,1);var p="";if(r.width&&(d.style.width=r.width),r.height&&(d.style.height=r.height),r.title&&(p+='<div class="gantt_popup_title dhtmlx_popup_title">'+r.title+"</div>"),p+='<div class="gantt_popup_text dhtmlx_popup_text" id="'+h+'"><span>'+(r.content?"":r.text)+'</span></div><div  class="gantt_popup_controls dhtmlx_popup_controls">',s&&(p+=c(l(r.ok,t.locale.labels.message_ok,"OK"),"ok",!0)),u&&(p+=c(l(r.cancel,t.locale.labels.message_cancel,"Cancel"),"cancel",!1)),r.buttons)for(var f=0;f<r.buttons.length;f++){var g=r.buttons[f];p+="object"==typeof g?c(g.label,g.css||"gantt_"+g.label.toLowerCase()+"_button dhtmlx_"+g.label.toLowerCase()+"_button",g.value||f):c(g,g,f)}if(d.innerHTML=p+="</div>",r.content){var m=r.content;"string"==typeof m&&(m=document.getElementById(m)),"none"==m.style.display&&(m.style.display=""),d.childNodes[r.title?1:0].appendChild(m)}return d.onclick=function(t){var e=t.target||t.srcElement;if(e.className||(e=e.parentNode),o.closest(e,".gantt_popup_button")){var i=e.getAttribute("data-result");a(r,i="true"==i||"false"!=i&&i)}},r.box=d,(s||u)&&(i=r),d}(u,d,h);u.hidden||s(!0),document.body.appendChild(p);var f=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-p.offsetWidth)/2)),m=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-p.offsetHeight)/2));return p.style.top="top"==u.position?"-3px":m+"px",p.style.left=f+"px",p.onkeydown=r,g.focus(p),u.hidden&&g.hide(p),t.callEvent("onMessagePopup",[p]),p}function d(t){return u(t,!0,!1)}function h(t){return u(t,!0,!0)}function p(t){return u(t)}function f(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}t.event(document,"keydown",r,!0);var g=function(){var t=f.apply(this,arguments);return t.type=t.type||"alert",p(t)};g.hide=function(i){for(;i&&i.getAttribute&&!i.getAttribute(e);)i=i.parentNode;i&&(i.parentNode.removeChild(i),s(!1),t.callEvent("onAfterMessagePopup",[i]))},g.focus=function(t){setTimeout(function(){var e=o.getFocusableNodes(t);e.length&&e[0].focus&&e[0].focus()},1)};var m=function(e,i,o,a){switch((e=(function(t,e,i,o){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:o}),t.id=t.id||n.uid(),t.expire=t.expire||m.expire,t}).apply(this,arguments)).type=e.type||"info",e.type.split("-")[0]){case"alert":return d(e);case"confirm":return h(e);case"modalbox":return p(e);default:return function(e){m.area||(m.area=document.createElement("div"),m.area.className="gantt_message_area dhtmlx_message_area",m.area.style[m.position]="5px",document.body.appendChild(m.area)),m.hide(e.id);var i=document.createElement("div");return i.innerHTML="<div>"+e.text+"</div>",i.className="gantt-info dhtmlx-info gantt-"+e.type+" dhtmlx-"+e.type,i.onclick=function(){m.hide(e.id),e=null},t._waiAria.messageInfoAttr(i),"bottom"==m.position&&m.area.firstChild?m.area.insertBefore(i,m.area.firstChild):m.area.appendChild(i),e.expire>0&&(m.timers[e.id]=window.setTimeout(function(){m.hide(e.id)},e.expire)),m.pull[e.id]=i,i=null,e.id}(e)}};m.seed=(new Date).valueOf(),m.uid=n.uid,m.expire=4e3,m.keyboard=!0,m.position="top",m.pull={},m.timers={},m.hideAll=function(){for(var t in m.pull)m.hide(t)},m.hide=function(t){var e=m.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",m.timers[t]&&window.clearTimeout(m.timers[t]),delete m.pull[t])};var v=[];return t.attachEvent("onMessagePopup",function(t){v.push(t)}),t.attachEvent("onAfterMessagePopup",function(t){for(var e=0;e<v.length;e++)v[e]===t&&(v.splice(e,1),e--)}),t.attachEvent("onDestroy",function(){s.cover&&s.cover.parentNode&&s.cover.parentNode.removeChild(s.cover);for(var t=0;t<v.length;t++)v[t].parentNode&&v[t].parentNode.removeChild(v[t]);v=null,m.area&&m.area.parentNode&&m.area.parentNode.removeChild(m.area),m=null}),{alert:function(){var t=f.apply(this,arguments);return t.type=t.type||"confirm",d(t)},confirm:function(){var t=f.apply(this,arguments);return t.type=t.type||"alert",h(t)},message:m,modalbox:g}}},function(t,e,i){t.exports=function(t){var e=i(0),n=i(6),o=i(10);if(!n.isNode){var a=i(1),r=i(3);t.utils={arrayFind:r.arrayFind,dom:{getNodePosition:a.getNodePosition,getRelativeEventPosition:a.getRelativeEventPosition,isChildOf:a.isChildOf,hasClass:a.hasClass,closest:a.closest}};var s=i(48)();t.event=s.attach,t.eventRemove=s.detach,t._eventRemoveAll=s.detachAll,t._createDomEventScope=s.extend,e.mixin(t,i(126)(t));var c=i(125).init(t);t.$ui=c.factory,t.$ui.layers=c.render,t.$mouseEvents=c.mouseEvents,t.$services.setService("mouseEvents",function(){return t.$mouseEvents}),t.mixin(t,c.layersApi),i(80)(t),t.$services.setService("layers",function(){return c.layersService});var l=i(79);t.mixin(t,l()),i(78)(t),i(77)(t),i(76)(t),i(75)(t),i(74)(t),i(73)(t),i(72)(t),i(71)(t),i(70)(t),i(65)(t),i(64)(t),i(52)(t),i(51)(t),t.locate=function(t){var e=a.getTargetNode(t);if(a.closest(e,".gantt_task_row"))return null;var i=arguments[1]||this.config.task_attribute,n=a.locateAttribute(e,i);return n?n.getAttribute(i):null},t._locate_css=function(t,e,i){return a.locateClassName(t,e,i)},t._locateHTML=function(t,e){return a.locateAttribute(t,e||this.config.task_attribute)}}t.attachEvent("onParse",function(){o(t)||t.attachEvent("onGanttRender",function(){if(t.config.initial_scroll){var e=t.getTaskByIndex(0),i=e?e.id:t.config.root_id;t.isTaskExists(i)&&t.showTask(i)}},{once:!0})}),t.attachEvent("onBeforeGanttReady",function(){this.config.scroll_size||(this.config.scroll_size=a.getScrollSize()||1),o(t)||(this._eventRemoveAll(),this.$mouseEvents.reset(),this.resetLightbox())})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u0421\u0456\u0447\u0435\u043d\u044c","\u041b\u044e\u0442\u0438\u0439","\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u041a\u0432\u0456\u0442\u0435\u043d\u044c","\u0422\u0440\u0430\u0432\u0435\u043d\u044c","\u0427\u0435\u0440\u0432\u0435\u043d\u044c","\u041b\u0438\u043f\u0435\u043d\u044c","\u0421\u0435\u0440\u043f\u0435\u043d\u044c","\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0416\u043e\u0432\u0442\u0435\u043d\u044c","\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043d\u044c"],month_short:["\u0421\u0456\u0447","\u041b\u044e\u0442","\u0411\u0435\u0440","\u041a\u0432\u0456","\u0422\u0440\u0430","\u0427\u0435\u0440","\u041b\u0438\u043f","\u0421\u0435\u0440","\u0412\u0435\u0440","\u0416\u043e\u0432","\u041b\u0438\u0441","\u0413\u0440\u0443"],day_full:["\u041d\u0435\u0434\u0456\u043b\u044f","\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a","\u0412\u0456\u0432\u0442\u043e\u0440\u043e\u043a","\u0421\u0435\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f","\u0421\u0443\u0431\u043e\u0442\u0430"],day_short:["\u041d\u0435\u0434","\u041f\u043e\u043d","\u0412\u0456\u0432","\u0421\u0435\u0440","\u0427\u0435\u0442","\u041f\u0442\u043d","\u0421\u0443\u0431"]},labels:{new_task:"\u041d\u043e\u0432\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f",icon_save:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",icon_cancel:"\u0412\u0456\u0434\u043c\u0456\u043d\u0430",icon_details:"\u0414\u0435\u0442\u0430\u043b\u0456",icon_edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",icon_delete:"\u0412\u0438\u043b\u0443\u0447\u0438\u0442\u0438",confirm_closing:"",confirm_deleting:"\u041f\u043e\u0434\u0456\u044f \u0432\u0438\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0432\u0436\u0434\u0438. \u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456?",section_description:"\u041e\u043f\u0438\u0441",section_time:"\u0427\u0430\u0441\u043e\u0432\u0438\u0439 \u043f\u0440\u043e\u043c\u0456\u0436\u043e\u043a",section_type:"\u0422\u0438\u043f",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"\u0412\u0456\u0434\u043c\u0456\u043d\u0430",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Ocak","\u015eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k"],month_short:["Oca","\u015eub","Mar","Nis","May","Haz","Tem","A\u011fu","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartesi","Sal\u0131","\xc7ar\u015famba","Per\u015fembe","Cuma","Cumartesi"],day_short:["Paz","Pzt","Sal","\xc7ar","Per","Cum","Cmt"]},labels:{new_task:"Yeni g\xf6rev",icon_save:"Kaydet",icon_cancel:"\u0130ptal",icon_details:"Detaylar",icon_edit:"D\xfczenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"G\xf6rev silinecek, emin misiniz?",section_description:"A\xe7\u0131klama",section_time:"Zaman Aral\u0131\u011f\u0131",section_type:"Tip",column_wbs:"WBS",column_text:"G\xf6rev Ad\u0131",column_start_date:"Ba\u015flang\u0131\xe7",column_duration:"S\xfcre",column_add:"",link:"Ba\u011flant\u0131",confirm_link_deleting:"silinecek",link_start:" (ba\u015flang\u0131\xe7)",link_end:" (biti\u015f)",type_task:"G\xf6rev",type_project:"Proje",type_milestone:"Kilometreta\u015f\u0131",minutes:"Dakika",hours:"Saat",days:"G\xfcn",weeks:"Hafta",months:"Ay",years:"Y\u0131l",message_ok:"OK",message_cancel:"\xddptal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],day_short:["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r"]},labels:{new_task:"Ny uppgift",icon_save:"Spara",icon_cancel:"Avbryt",icon_details:"Detajer",icon_edit:"\xc4ndra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"\xc4r du s\xe4ker p\xe5 att du vill ta bort h\xe4ndelsen permanent?",section_description:"Beskrivning",section_time:"Tid",section_type:"Typ",column_wbs:"WBS",column_text:"Uppgiftsnamn",column_start_date:"Starttid",column_duration:"Varaktighet",column_add:"",link:"L\xe4nk",confirm_link_deleting:"kommer tas bort",link_start:" (start)",link_end:" (slut)",type_task:"Uppgift",type_project:"Projekt",type_milestone:"Milstolpe",minutes:"Minuter",hours:"Timmar",days:"Dagar",weeks:"Veckor",months:"M\xe5nader",years:"\xc5r",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Janu\xe1r","Febru\xe1r","Marec","Apr\xedl","M\xe1j","J\xfan","J\xfal","August","September","Okt\xf3ber","November","December"],month_short:["Jan","Feb","Mar","Apr","M\xe1j","J\xfan","J\xfal","Aug","Sept","Okt","Nov","Dec"],day_full:["Nede\u013ea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","\u0160t","Pi","So"]},labels:{new_task:"Nov\xe1 \xfaloha",icon_save:"Ulo\u017ei\u0165",icon_cancel:"Sp\xe4\u0165",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmaza\u0165",confirm_closing:"Va\u0161e zmeny nebud\xfa ulo\u017een\xe9. Skuto\u010dne?",confirm_deleting:"Udalos\u0165 bude natrvalo vymazan\xe1. Skuto\u010dne?",section_description:"Pozn\xe1mky",section_time:"Doba platnosti",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Sp\xe4\u0165",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","\u010cetrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","\u010cet","Pet","Sob"]},labels:{new_task:"Nova naloga",icon_save:"Shrani",icon_cancel:"Prekli\u010di",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbri\u0161i",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. \u017delite nadaljevati?",section_description:"Opis",section_time:"\u010casovni okvir",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Prekli\u010di",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","Ma\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","O\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],month_short:["\u042f\u043d\u0432","\u0424\u0435\u0432","Ma\u0440","A\u043f\u0440","Ma\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","A\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"],day_full:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"],day_short:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]},labels:{new_task:"\u041d\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435",icon_save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon_cancel:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",icon_details:"\u0414\u0435\u0442\u0430\u043b\u0438",icon_edit:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",icon_delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",confirm_closing:"",confirm_deleting:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e, \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?",section_description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",section_time:"\u041f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438",section_type:"\u0422\u0438\u043f",column_wbs:"\u0418\u0421\u0420",column_text:"\u0417\u0430\u0434\u0430\u0447\u0430",column_start_date:"\u041d\u0430\u0447\u0430\u043b\u043e",column_duration:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",column_add:"",link:"\u0421\u0432\u044f\u0437\u044c",confirm_link_deleting:"\u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",link_start:" (\u043d\u0430\u0447\u0430\u043b\u043e)",link_end:" (\u043a\u043e\u043d\u0435\u0446)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"\u041c\u0438\u043d\u0443\u0442\u0430",hours:"\u0427\u0430\u0441",days:"\u0414\u0435\u043d\u044c",weeks:"\u041d\u0435\u0434\u0435\u043b\u044f",months:"\u041c\u0435\u0441\u044f\u0446",years:"\u0413\u043e\u0434",message_ok:"OK",message_cancel:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"\u043d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438",resources_filter_label:"\u0441\u043f\u0440\u044f\u0442\u0430\u0442\u044c \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{new_task:"Sarcina noua",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Anuleaza",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa\u017a","Lis","Gru"],day_full:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],day_short:["Nie","Pon","Wto","\u015aro","Czw","Pi\u0105","Sob"]},labels:{new_task:"Nowe zadanie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczeg\xf3\u0142y",icon_edit:"Edytuj",icon_delete:"Usu\u0144",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usuni\u0119te na zawsze, kontynuowa\u0107?",section_description:"Opis",section_time:"Okres czasu",section_type:"Typ",column_wbs:"WBS",column_text:"Nazwa zadania",column_start_date:"Pocz\u0105tek",column_duration:"Czas trwania",column_add:"",link:"Link",confirm_link_deleting:"zostanie usuni\u0119ty",link_start:" (pocz\u0105tek)",link_end:" (koniec)",type_task:"Zadanie",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minuty",hours:"Godziny",days:"Dni",weeks:"Tydzie\u0144",months:"Miesi\u0105ce",years:"Lata",message_ok:"OK",message_cancel:"Anuluj",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppf\xf8ringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{new_task:"Nieuwe taak",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",section_type:"Type",column_wbs:"WBS",column_text:"Taak omschrijving",column_start_date:"Startdatum",column_duration:"Duur",column_add:"",link:"Koppeling",confirm_link_deleting:"zal worden verwijderd",link_start:" (start)",link_end:" (eind)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"minuten",hours:"uren",days:"dagen",weeks:"weken",months:"maanden",years:"jaren",message_ok:"OK",message_cancel:"Annuleren",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Mon","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this;for(var i in this.addLocale=function(t,i){e._locales[t]=i},this.getLocale=function(t){return e._locales[t]},this._locales={},t)this._locales[i]=t[i]}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],month_short:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],day_full:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],day_short:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"]},labels:{new_task:"\uc774\ub984\uc5c6\ub294 \uc791\uc5c5",icon_save:"\uc800\uc7a5",icon_cancel:"\ucde8\uc18c",icon_details:"\uc138\ubd80 \uc0ac\ud56d",icon_edit:"\uc218\uc815",icon_delete:"\uc0ad\uc81c",confirm_closing:"",confirm_deleting:"\uc791\uc5c5\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",section_description:"\uc124\uba85",section_time:"\uae30\uac04",section_type:"Type",column_wbs:"WBS",column_text:"\uc791\uc5c5\uba85",column_start_date:"\uc2dc\uc791\uc77c",column_duration:"\uae30\uac04",column_add:"",link:"\uc804\uc81c",confirm_link_deleting:"\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",link_start:" (start)",link_end:" (end)",type_task:"\uc791\uc5c5",type_project:"\ud504\ub85c\uc81d\ud2b8",type_milestone:"\ub9c8\uc77c\uc2a4\ud1a4",minutes:"\ubd84",hours:"\uc2dc\uac04",days:"\uc77c",weeks:"\uc8fc",months:"\ub2ec",years:"\ub144",message_ok:"OK",message_cancel:"\ucde8\uc18c",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],month_short:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_full:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],day_short:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"]},labels:{new_task:"\u65b0\u3057\u3044\u4ed5\u4e8b",icon_save:"\u4fdd\u5b58",icon_cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",icon_details:"\u8a73\u7d30",icon_edit:"\u7de8\u96c6",icon_delete:"\u524a\u9664",confirm_closing:"",confirm_deleting:"\u30a4\u30d9\u30f3\u30c8\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3001\u5b9c\u3057\u3044\u3067\u3059\u304b\uff1f",section_description:"\u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3",section_time:"\u671f\u9593",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{new_task:"Tugas baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Batal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Janu\xe1r","Febru\xe1r","M\xe1rcius","\xc1prilis","M\xe1jus","J\xfanius","J\xfalius","Augusztus","Szeptember","Okt\xf3ber","November","December"],month_short:["Jan","Feb","M\xe1r","\xc1pr","M\xe1j","J\xfan","J\xfal","Aug","Sep","Okt","Nov","Dec"],day_full:["Vas\xe1rnap","H\xe9tf\xf5","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","szombat"],day_short:["Va","H\xe9","Ke","Sze","Cs\xfc","P\xe9","Szo"]},labels:{new_task:"\xdaj feladat",icon_save:"Ment\xe9s",icon_cancel:"M\xe9gse",icon_details:"R\xe9szletek",icon_edit:"Szerkeszt\xe9s",icon_delete:"T\xf6rl\xe9s",confirm_closing:"",confirm_deleting:"Az esem\xe9ny t\xf6r\xf6lve lesz, biztosan folytatja?",section_description:"Le\xedr\xe1s",section_time:"Id\xf5szak",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"M\xe9gse",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Sije\u010danj","Velja\u010da","O\u017eujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],month_short:["Sij","Velj","O\u017eu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],day_full:["Nedjelja","Ponedjeljak","Utorak","Srijeda","\u010cetvrtak","Petak","Subota"],day_short:["Ned","Pon","Uto","Sri","\u010cet","Pet","Sub"]},labels:{new_task:"Novi Zadatak",icon_save:"Spremi",icon_cancel:"Odustani",icon_details:"Detalji",icon_edit:"Izmjeni",icon_delete:"Obri\u0161i",confirm_closing:"",confirm_deleting:"Zadatak \u0107e biti trajno izbrisan, jeste li sigurni?",section_description:"Opis",section_time:"Vremenski Period",section_type:"Tip",column_wbs:"WBS",column_text:"Naziv Zadatka",column_start_date:"Po\u010detno Vrijeme",column_duration:"Trajanje",column_add:"",link:"Poveznica",confirm_link_deleting:"\u0107e biti izbrisan",link_start:" (po\u010detak)",link_end:" (kraj)",type_task:"Zadatak",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minute",hours:"Sati",days:"Dani",weeks:"Tjedni",months:"Mjeseci",years:"Godine",message_ok:"OK",message_cancel:"Odustani",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],month_short:["\u05d9\u05e0\u05d5","\u05e4\u05d1\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0","\u05d9\u05d5\u05dc","\u05d0\u05d5\u05d2","\u05e1\u05e4\u05d8","\u05d0\u05d5\u05e7","\u05e0\u05d5\u05d1","\u05d3\u05e6\u05de"],day_full:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],day_short:["\u05d0","\u05d1","\u05d2","\u05d3","\u05d4","\u05d5","\u05e9"]},labels:{new_task:"\u05de\u05e9\u05d9\u05de\u05d4 \u05d7\u05d3\u05e9",icon_save:"\u05e9\u05de\u05d5\u05e8",icon_cancel:"\u05d1\u05d8\u05dc",icon_details:"\u05e4\u05e8\u05d8\u05d9\u05dd",icon_edit:"\u05e2\u05e8\u05d5\u05da",icon_delete:"\u05de\u05d7\u05e7",confirm_closing:"",confirm_deleting:"\u05d0\u05e8\u05d5\u05e2 \u05d9\u05de\u05d7\u05e7 \u05e1\u05d5\u05e4\u05d9\u05ea.\u05dc\u05d4\u05de\u05e9\u05d9\u05da?",section_description:"\u05d4\u05e1\u05d1\u05e8",section_time:"\u05ea\u05e7\u05d5\u05e4\u05d4",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"\u05d1\u05d8\u05dc",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],month_short:["Jan","F\xe9v","Mar","Avr","Mai","Juin","Juil","Ao\xfb","Sep","Oct","Nov","D\xe9c"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{new_task:"Nouvelle t\xe2che",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"D\xe9tails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'\xe9v\xe9nement sera effac\xe9 sans appel, \xeates-vous s\xfbr ?",section_description:"Description",section_time:"P\xe9riode",section_type:"Type",column_wbs:"OTP",column_text:"Nom de la t\xe2che",column_start_date:"Date initiale",column_duration:"Dur\xe9e",column_add:"",link:"Le lien",confirm_link_deleting:"sera supprim\xe9",link_start:"(d\xe9but)",link_end:"(fin)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Heures",days:"Jours",weeks:"Semaines",months:"Mois",years:"Ann\xe9es",message_ok:"OK",message_cancel:"Annuler",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{new_task:"Uusi teht\xe4v\xe4",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Peru",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u0698\u0627\u0646\u0648\u06cc\u0647","\u0641\u0648\u0631\u06cc\u0647","\u0645\u0627\u0631\u0633","\u0622\u0648\u0631\u06cc\u0644","\u0645\u0647","\u0698\u0648\u0626\u0646","\u0698\u0648\u0626\u06cc\u0647","\u0627\u0648\u062a","\u0633\u067e\u062a\u0627\u0645\u0628\u0631","\u0627\u06a9\u062a\u0628\u0631","\u0646\u0648\u0627\u0645\u0628\u0631","\u062f\u0633\u0627\u0645\u0628\u0631"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["\u064a\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647\u200c\u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],day_short:["\u06cc","\u062f","\u0633","\u0686","\u067e","\u062c","\u0634"]},labels:{new_task:"\u0648\u0638\u06cc\u0641\u0647 \u062c\u062f\u06cc\u062f",icon_save:"\u0630\u062e\u06cc\u0631\u0647",icon_cancel:"\u0644\u063a\u0648",icon_details:"\u062c\u0632\u06cc\u06cc\u0627\u062a",icon_edit:"\u0648\u06cc\u0631\u0627\u06cc\u0634",icon_delete:"\u062d\u0630\u0641",confirm_closing:"\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u0634\u0645\u0627 \u0627\u0632\u062f\u0633\u062a \u062e\u0648\u0627\u0647\u062f \u0631\u0641\u062a\u060c \u0622\u06cc\u0627 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f",confirm_deleting:"\u0627\u06cc\u0646 \u0645\u0648\u0631\u062f \u0628\u0631\u0627\u06cc \u0647\u0645\u06cc\u0634\u0647 \u062d\u0630\u0641 \u062e\u0648\u0627\u0647\u062f \u0634\u062f\u060c \u0622\u06cc\u0627 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f",section_description:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a",section_time:"\u0645\u062f\u062a \u0632\u0645\u0627\u0646",section_type:"\u0646\u0648\u0639",column_wbs:"WBS",column_text:"\u0639\u0646\u0648\u0627\u0646",column_start_date:"\u0632\u0645\u0627\u0646 \u0634\u0631\u0648\u0639",column_duration:"\u0645\u062f\u062a",column_add:"",link:"\u0627\u0631\u062a\u0628\u0627\u0637",confirm_link_deleting:"\u062d\u0630\u0641 \u062e\u0648\u0627\u0647\u062f \u0634\u062f",link_start:" (\u0622\u063a\u0627\u0632)",link_end:" (\u067e\u0627\u06cc\u0627\u0646)",type_task:"\u0648\u0638\u06cc\u0641\u0647",type_project:"\u067e\u0631\u0648\u0698\u0647",type_milestone:"\u0646\u06af\u0627\u0631\u0634",minutes:"\u062f\u0642\u0627\u06cc\u0642",hours:"\u0633\u0627\u0639\u0627\u062a",days:"\u0631\u0648\u0632\u0647\u0627",weeks:"\u0647\u0641\u062a\u0647",months:"\u0645\u0627\u0647\u200c\u0647\u0627",years:"\u0633\u0627\u0644\u200c\u0647\u0627",message_ok:"\u062a\u0627\u06cc\u06cc\u062f",message_cancel:"\u0644\u063a\u0648",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],day_short:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"]},labels:{new_task:"Nueva tarea",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrar\xe1 definitivamente, \xbfcontinuar?",section_description:"Descripci\xf3n",section_time:"Per\xedodo",section_type:"Tipo",column_wbs:"EDT",column_text:"Tarea",column_start_date:"Inicio",column_duration:"Duraci\xf3n",column_add:"",link:"Enlace",confirm_link_deleting:"ser\xe1 borrada",link_start:" (inicio)",link_end:" (fin)",type_task:"Tarea",type_project:"Proyecto",type_milestone:"Hito",minutes:"Minutos",hours:"Horas",days:"D\xedas",weeks:"Semanas",months:"Meses",years:"A\xf1os",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2","\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2","\u039c\u03ac\u03ca\u03bf\u03c2","\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2","\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2","\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2","\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2","\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2"],month_short:["\u0399\u0391\u039d","\u03a6\u0395\u0392","\u039c\u0391\u03a1","\u0391\u03a0\u03a1","\u039c\u0391\u0399","\u0399\u039f\u03a5\u039d","\u0399\u039f\u03a5\u039b","\u0391\u03a5\u0393","\u03a3\u0395\u03a0","\u039f\u039a\u03a4","\u039d\u039f\u0395","\u0394\u0395\u039a"],day_full:["\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae","\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1","\u03a4\u03c1\u03af\u03c4\u03b7","\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7","\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7","\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae","\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae"],day_short:["\u039a\u03a5","\u0394\u0395","\u03a4\u03a1","\u03a4\u0395","\u03a0\u0395","\u03a0\u0391","\u03a3\u0391"]},labels:{new_task:"\u039d\u03ad\u03b1 \u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1",icon_save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7",icon_cancel:"\u0386\u03ba\u03c5\u03c1\u03bf",icon_details:"\u039b\u03b5\u03c0\u03c4\u03bf\u03bc\u03ad\u03c1\u03b5\u03b9\u03b5\u03c2",icon_edit:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1",icon_delete:"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae",confirm_closing:"",confirm_deleting:"\u03a4\u03bf \u03ad\u03c1\u03b3\u03bf \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03b5\u03af \u03bf\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03ac. \u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03c3\u03c5\u03bd\u03b5\u03c7\u03af\u03c3\u03b5\u03c4\u03b5;",section_description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",section_time:"\u03a7\u03c1\u03bf\u03bd\u03b9\u03ba\u03ae \u03c0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"\u0386\u03ba\u03c5\u03c1\u03bf",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:[" Januar"," Februar"," M\xe4rz "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{new_task:"Neue Aufgabe",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"\xc4ndern",icon_delete:"L\xf6schen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gel\xf6scht",section_description:"Beschreibung",section_time:"Zeitspanne",section_type:"Type",column_wbs:"PSP",column_text:"Task-Namen",column_start_date:"Startzeit",column_duration:"Dauer",column_add:"",link:"Link",confirm_link_deleting:"werden gel\xf6scht",link_start:"(starten)",link_end:"(ende)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuten",hours:"Stunden",days:"Tage",weeks:"Wochen",months:"Monate",years:"Jahre",message_ok:"OK",message_cancel:"Abbrechen",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{new_task:"Ny opgave",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil g\xe5 tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Fortryd",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Leden","\xdanor","B\u0159ezen","Duben","Kv\u011bten","\u010cerven","\u010cervenec","Srpen","Z\xe1\u0159\xed","\u0158\xedjen","Listopad","Prosinec"],month_short:["Led","\xdan","B\u0159e","Dub","Kv\u011b","\u010cer","\u010cec","Srp","Z\xe1\u0159\xed","\u0158\xedj","List","Pro"],day_full:["Ned\u011ble","Pond\u011bl\xed","\xdater\xfd","St\u0159eda","\u010ctvrtek","P\xe1tek","Sobota"],day_short:["Ne","Po","\xdat","St","\u010ct","P\xe1","So"]},labels:{new_task:"Nov\xe1 pr\xe1ce",icon_save:"Ulo\u017eit",icon_cancel:"Zp\u011bt",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Ud\xe1lost bude trvale smaz\xe1na, opravdu?",section_description:"Pozn\xe1mky",section_time:"Doba platnosti",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Zp\u011bt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],month_short:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_full:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],day_short:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},labels:{new_task:"\u65b0\u4efb\u52d9",icon_save:"\u4fdd\u5b58",icon_cancel:"\u5173\u95ed",icon_details:"\u8be6\u7ec6",icon_edit:"\u7f16\u8f91",icon_delete:"\u5220\u9664",confirm_closing:"\u8bf7\u786e\u8ba4\u662f\u5426\u64a4\u9500\u4fee\u6539!",confirm_deleting:"\u662f\u5426\u5220\u9664\u65e5\u7a0b?",section_description:"\u63cf\u8ff0",section_time:"\u65f6\u95f4\u8303\u56f4",section_type:"\u7c7b\u578b",column_wbs:"\u5de5\u4f5c\u5206\u89e3\u7ed3\u6784",column_text:"\u4efb\u52a1\u540d",column_start_date:"\u5f00\u59cb\u65f6\u95f4",column_duration:"\u6301\u7eed\u65f6\u95f4",column_add:"",link:"\u5173\u8054",confirm_link_deleting:"\u5c06\u88ab\u5220\u9664",link_start:" (\u5f00\u59cb)",link_end:" (\u7ed3\u675f)",type_task:"\u4efb\u52a1",type_project:"\u9879\u76ee",type_milestone:"\u91cc\u7a0b\u7891",minutes:"\u5206\u949f",hours:"\u5c0f\u65f6",days:"\u5929",weeks:"\u5468",months:"\u6708",years:"\u5e74",message_ok:"OK",message_cancel:"\u5173\u95ed",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["Gener","Febrer","Mar\xe7","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{new_task:"Nova tasca",icon_save:"Guardar",icon_cancel:"Cancel\xb7lar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrar\xe0 definitivament, continuar ?",section_description:"Descripci\xf3",section_time:"Periode de temps",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel\xb7lar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u0421\u0442\u0443\u0434\u0437\u0435\u043d\u044c","\u041b\u044e\u0442\u044b","\u0421\u0430\u043a\u0430\u0432\u0456\u043a","\u041a\u0440\u0430\u0441\u0430\u0432\u0456\u043a","Ma\u0439","\u0427\u044d\u0440\u0432\u0435\u043d\u044c","\u041b\u0456\u043f\u0435\u043d\u044c","\u0416\u043d\u0456\u0432\u0435\u043d\u044c","\u0412\u0435\u0440\u0430\u0441\u0435\u043d\u044c","\u041a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a","\u041b\u0456\u0441\u0442\u0430\u043f\u0430\u0434","\u0421\u043d\u0435\u0436\u0430\u043d\u044c"],month_short:["\u0421\u0442\u0443\u0434\u0437","\u041b\u044e\u0442","\u0421\u0430\u043a","\u041a\u0440\u0430\u0441","Ma\u0439","\u0427\u044d\u0440","\u041b\u0456\u043f","\u0416\u043d\u0456\u0432","\u0412\u0435\u0440","\u041a\u0430\u0441\u0442","\u041b\u0456\u0441\u0442","\u0421\u043d\u0435\u0436"],day_full:["\u041d\u044f\u0434\u0437\u0435\u043b\u044f","\u041f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a","\u0410\u045e\u0442\u043e\u0440\u0430\u043a","\u0421\u0435\u0440\u0430\u0434\u0430","\u0427\u0430\u0446\u0432\u0435\u0440","\u041f\u044f\u0442\u043d\u0456\u0446\u0430","\u0421\u0443\u0431\u043e\u0442\u0430"],day_short:["\u041d\u0434","\u041f\u043d","\u0410\u045e\u0442","\u0421\u0440","\u0427\u0446\u0432","\u041f\u0442","\u0421\u0431"]},labels:{new_task:"\u041d\u043e\u0432\u0430\u0435 \u0437\u0430\u0434\u0430\u043d\u043d\u0435",icon_save:"\u0417\u0430\u0445\u0430\u0432\u0430\u0446\u044c",icon_cancel:"\u0410\u0434\u043c\u044f\u043d\u0456\u0446\u044c",icon_details:"\u0414\u044d\u0442\u0430\u043b\u0456",icon_edit:"\u0417\u043c\u044f\u043d\u0456\u0446\u044c",icon_delete:"\u0412\u044b\u0434\u0430\u043b\u0456\u0446\u044c",confirm_closing:"",confirm_deleting:"\u041f\u0430\u0434\u0437\u0435\u044f \u0431\u0443\u0434\u0437\u0435 \u0432\u044b\u0434\u0430\u043b\u0435\u043d\u0430 \u043d\u0435\u0437\u0432\u0430\u0440\u043e\u0442\u043d\u0430, \u043f\u0440\u0430\u0446\u044f\u0433\u043d\u0443\u0446\u044c?",section_description:"\u0410\u043f\u0456\u0441\u0430\u043d\u043d\u0435",section_time:"\u041f\u0435\u0440\u044b\u044f\u0434 \u0447\u0430\u0441\u0443",section_type:"\u0422\u044b\u043f",column_wbs:"\u0406\u0421\u0420",column_text:"\u0417\u0430\u0434\u0430\u0447\u0430",column_start_date:"\u041f\u0430\u0447\u0430\u0442\u0430\u043a",column_duration:"\u041f\u0440\u0430\u0446\u044f\u0433",column_add:"",link:"\u0421\u0443\u0432\u044f\u0437\u044c",confirm_link_deleting:"\u0431\u0443\u0434\u0437\u0435 \u0432\u044b\u0434\u0430\u043b\u0435\u043d\u0430",link_start:"(\u043f\u0430\u0447\u0430\u0442\u0430\u043a)",link_end:"(\u043a\u0430\u043d\u0435\u0446)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"\u0425\u0432i\u043bi\u043d\u0430",hours:"\u0413\u0430\u0434\u0437i\u043d\u0430",days:"\u0414\u0437\u0435\u043d\u044c",weeks:"\u0422\u044b\u0434\u0437\u0435\u043d\u044c",months:"\u041c\u0435\u0441\u044f\u0446",years:"\u0413\u043e\u0434",message_ok:"OK",message_cancel:"\u0410\u0434\u043c\u044f\u043d\u0456\u0446\u044c",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date:{month_full:["\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u062b\u0627\u0646\u064a","\u0634\u0628\u0627\u0637","\u0622\u0630\u0627\u0631","\u0646\u064a\u0633\u0627\u0646","\u0623\u064a\u0627\u0631","\u062d\u0632\u064a\u0631\u0627\u0646","\u062a\u0645\u0648\u0632","\u0622\u0628","\u0623\u064a\u0644\u0648\u0644","\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u0623\u0648\u0644","\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u062b\u0627\u0646\u064a","\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u0623\u0648\u0644"],month_short:["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"],day_full:["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0623\u062b\u0646\u064a\u0646","\u0623\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0623\u0644\u062d\u0645\u064a\u0633","\u0623\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],day_short:["\u0627\u062d\u062f","\u0627\u062b\u0646\u064a\u0646","\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0631\u0628\u0639\u0627\u0621","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639\u0629","\u0633\u0628\u062a"]},labels:{new_task:"\u0645\u0647\u0645\u0629 \u062c\u062f\u064a\u062f",icon_save:"\u0627\u062e\u0632\u0646",icon_cancel:"\u0627\u0644\u063a\u0627\u0621",icon_details:"\u062a\u0641\u0627\u0635\u064a\u0644",icon_edit:"\u062a\u062d\u0631\u064a\u0631",icon_delete:"\u062d\u0630\u0641",confirm_closing:"\u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a \u0633\u0648\u0641 \u062a\u0636\u064a\u0639, \u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f",confirm_deleting:"\u0627\u0644\u062d\u062f\u062b \u0633\u064a\u062a\u0645 \u062d\u0630\u0641\u0647\u0627 \u0646\u0647\u0627\u0626\u064a\u0627 \u060c \u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f",section_description:"\u0627\u0644\u0648\u0635\u0641",section_time:"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"\u0627\u0644\u063a\u0627\u0621",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(158),o=i(157),a=i(156),r=i(155),s=i(154),c=i(153),l=i(152),u=i(151),d=i(150),h=i(149),p=i(148),f=i(147),g=i(146),m=i(145),v=i(144),b=i(143),_=i(142),w=i(141),y=i(140),k=i(139),x=i(138),S=i(137),T=i(136),C=i(135),D=i(134),I=i(133),P=i(132),M=i(131),O=i(130),$=i(129),j=i(128);e.default=function(){return new k.default({en:d.default,ar:n.default,be:o.default,ca:a.default,cn:r.default,cs:s.default,da:c.default,de:l.default,el:u.default,es:h.default,fa:p.default,fi:f.default,fr:g.default,he:m.default,hr:v.default,hu:b.default,id:_.default,jp:w.default,kr:y.default,nb:x.default,nl:S.default,no:T.default,pl:C.default,ro:D.default,ru:I.default,si:P.default,sk:M.default,sv:O.default,tr:$.default,ua:j.default})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e){t.exports=function(t){t.destructor=function(){for(var e in t.callEvent("onDestroy",[]),this.clearAll(),this.$root&&delete this.$root.gantt,this._eventRemoveAll&&this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox&&this.resetLightbox(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this.detachAllEvents(),this)0===e.indexOf("$")&&delete this[e];t.$destroyed=!0}}},function(t,e){t.exports=function(t){return function(e,i){e||t.config.show_errors&&!1!==t.callEvent("onError",[i])&&t.message({type:"error",text:i,expire:-1})}}},function(t,e){function i(t,e){var i;t.event(e,"resize",function(){clearTimeout(i),i=setTimeout(function(){t.render()},300)})}t.exports=function(t){"static"==window.getComputedStyle(t.$root).getPropertyValue("position")&&(t.$root.style.position="relative");var e=document.createElement("iframe");e.className="gantt_container_resize_watcher",e.tabIndex=-1,t.config.wai_aria_attributes&&(e.setAttribute("role","none"),e.setAttribute("aria-hidden",!0)),t.$root.appendChild(e),e.contentWindow?i(t,e.contentWindow):(t.$root.removeChild(e),i(t,window))}},function(t,e,i){var n=i(1),o=i(3),a=i(10),r=i(163);t.exports=function(t){var e=i(41);t.assert=i(162)(t),t.init=function(t,e,i){e&&i&&(this.config.start_date=this._min_date=new Date(e),this.config.end_date=this._max_date=new Date(i)),this.date.init(),this.init=function(t){this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(t)},this._reinit(t)};var s=(function(){this._clearTaskLayers&&this._clearTaskLayers(),this._clearLinkLayers&&this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$layout=null,this.$ui.reset())}).bind(t),c=(function(){a(t)||(this.$root.innerHTML="",this.$root.gantt=this,e(this),this.config.layout.id="main",this.$layout=this.$ui.createView("layout",this.$root,this.config.layout),this.$layout.attachEvent("onBeforeResize",function(){for(var e=t.$services.getService("datastores"),i=0;i<e.length;i++)t.getDatastore(e[i]).filter()}),this.$layout.attachEvent("onResize",function(){t.refreshData()}),this.callEvent("onGanttLayoutReady",[]),this.$layout.render(),this.$container=this.$layout.$container.firstChild,r(this))}).bind(t);t.resetLayout=function(){s(),c(),this.render()},t._reinit=function(t){this.callEvent("onBeforeGanttReady",[]),this._update_flags(),this.$services.getService("templateLoader").initTemplates(this),s(),t&&(this.$root=n.toNode(t),c(),this.$mouseEvents.reset(this.$root)),this.callEvent("onTemplatesReady",[]),this.callEvent("onGanttReady",[]),this.render()},t.$click={buttons:{edit:function(e){t.isReadonly(t.getTask(e))||t.showLightbox(e)},delete:function(e){var i=t.getTask(e);t.isReadonly(i)||t._dhtmlx_confirm(t.locale.labels.confirm_deleting,t.locale.labels.confirm_deleting_title,function(){t.isTaskExists(e)?(i.$new?(t.silent(function(){t.deleteTask(e,!0)}),t.refreshData()):t.deleteTask(e),t.hideLightbox()):t.hideLightbox()})}}},t.render=function(){var i;if(this.callEvent("onBeforeGanttRender",[]),!a(t)){!this.config.sort&&this._sort&&(this._sort=void 0),this.$root&&(this.config.rtl?this.$root.classList.add("gantt_rtl"):this.$root.classList.remove("gantt_rtl"));var n=this.getScrollState(),o=n?n.x:0;this._getHorizontalScrollbar()&&(o=this._getHorizontalScrollbar().$config.codeScrollLeft||o||0),i=null,o&&(i=t.dateFromPos(o+this.config.task_scroll_offset))}if(e(this),a(t))t.refreshData();else if(this.$layout.$config.autosize=this.config.autosize,this.$layout.resize(),this.config.preserve_scroll&&n&&o){var r=t.getScrollState();+i==+t.dateFromPos(r.x)&&r.y==n.y||(i&&this.showDate(i),n.y&&t.scrollTo(void 0,n.y))}this.callEvent("onGanttRender",[])},t.setSizes=t.render,t.getTaskRowNode=function(t){for(var e=this.$grid_data.childNodes,i=this.config.task_attribute,n=0;n<e.length;n++)if(e[n].getAttribute&&e[n].getAttribute(i)==t)return e[n];return null},t.changeLightboxType=function(e){if(this.getLightboxType()==e)return!0;t._silent_redraw_lightbox(e)},t._get_link_type=function(e,i){var n=null;return e&&i?n=t.config.links.start_to_start:!e&&i?n=t.config.links.finish_to_start:e||i?e&&!i&&(n=t.config.links.start_to_finish):n=t.config.links.finish_to_finish,n},t.isLinkAllowed=function(t,e,i,n){var o;if(!(o="object"==typeof t?t:{source:t,target:e,type:this._get_link_type(i,n)}))return!1;if(!(o.source&&o.target&&o.type))return!1;if(o.source==o.target)return!1;var a=!0;return this.checkEvent("onLinkValidation")&&(a=this.callEvent("onLinkValidation",[o])),a},t._correct_dst_change=function(e,i,n,a){var r=o.getSecondsInUnit(a)*n;if(r>3600&&r<86400){var s=e.getTimezoneOffset()-i;s&&(e=t.date.add(e,s,"minute"))}return e},t.isSplitTask=function(e){return t.assert(e&&e instanceof Object,"Invalid argument <b>task</b>="+e+" of gantt.isSplitTask. Task object was expected"),this.$data.tasksStore._isSplitItem(e)},t._is_icon_open_click=function(t){if(!t)return!1;var e=t.target||t.srcElement;if(!e||!e.className)return!1;var i=n.getClassName(e);return-1!==i.indexOf("gantt_tree_icon")&&(-1!==i.indexOf("gantt_close")||-1!==i.indexOf("gantt_open"))}}},function(t,e){t.exports=function(t){function e(){return t._cached_functions.update_if_changed(t),t._cached_functions.active||t._cached_functions.activate(),!0}t._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(t,e){if(e._prefetch_originals)for(var i in e._prefetch_originals)e[i]=e._prefetch_originals[i];for(e._prefetch_originals={},i=0;i<t.length;i++)this.prefetch(t[i],e)},prefetch:function(t,e){var i=e[t];if(i){var n=this;e._prefetch_originals[t]=i,e[t]=function(){for(var e=new Array(arguments.length),o=0,a=arguments.length;o<a;o++)e[o]=arguments[o];if(n.active){var r=n.get_arguments_hash(Array.prototype.slice.call(e));n.cache[t]||(n.cache[t]={});var s=n.cache[t];if(n.has_cached_value(s,r))return n.get_cached_value(s,r);var c=i.apply(this,e);return n.cache_value(s,r,c),c}return i.apply(this,e)}}return i},cache_value:function(t,e,i){this.is_date(i)&&(i=new Date(i)),t[e]=i},has_cached_value:function(t,e){return t.hasOwnProperty(e)},get_cached_value:function(t,e){var i=t[e];return this.is_date(i)&&(i=new Date(i)),i},is_date:function(t){return t&&t.getUTCDate},get_arguments_hash:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.stringify_argument(t[i]));return"("+e.join(";")+")"},stringify_argument:function(t){return(t.id?t.id:this.is_date(t)?t.valueOf():t)+""},activate:function(){this.clear(),this.active=!0},deactivate:function(){this.clear(),this.active=!1},clear:function(){this.cache={}},setup:function(t){var e=[],i=["_isProjectEnd","_getProjectEnd","_getSlack"];"auto"==this.mode?t.config.highlight_critical_path&&(e=i):!0===this.mode&&(e=i),this.wrap_methods(e,t)},update_if_changed:function(t){(this.critical_path_mode!=t.config.highlight_critical_path||this.mode!==t.config.optimize_render)&&(this.critical_path_mode=t.config.highlight_critical_path,this.mode=t.config.optimize_render,this.setup(t))}},t.attachEvent("onBeforeGanttRender",e),t.attachEvent("onBeforeDataRender",e),t.attachEvent("onBeforeSmartRender",function(){e()}),t.attachEvent("onBeforeParse",e),t.attachEvent("onDataRender",function(){t._cached_functions.deactivate()});var i=null;t.attachEvent("onSmartRender",function(){i&&clearTimeout(i),i=setTimeout(function(){t._cached_functions.deactivate()},1e3)}),t.attachEvent("onBeforeGanttReady",function(){return t._cached_functions.update_if_changed(t),!0})}},function(t,e){t.exports=function(t){t.getTaskType=function(e){var i=e;for(var n in e&&"object"==typeof e&&(i=e.type),this.config.types)if(this.config.types[n]==i)return i;return t.config.types.task}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,i){var n=i(3);t.exports=function(t){t.isUnscheduledTask=function(e){return t.assert(e&&e instanceof Object,"Invalid argument <b>task</b>="+e+" of gantt.isUnscheduledTask. Task object was expected"),!!e.unscheduled||!e.start_date},t._isAllowedUnscheduledTask=function(e){return!(!e.unscheduled||!t.config.show_unscheduled)},t._isTaskInTimelineLimits=function(t){var e=t.start_date?t.start_date.valueOf():null,i=t.end_date?t.end_date.valueOf():null;return!!(e&&i&&e<=this._max_date.valueOf()&&i>=this._min_date.valueOf())},t.isTaskVisible=function(t){if(!this.isTaskExists(t))return!1;var e=this.getTask(t);return!(!this._isAllowedUnscheduledTask(e)&&!this._isTaskInTimelineLimits(e)||!(this.getGlobalTaskIndex(t)>=0))},t._getProjectEnd=function(){if(t.config.project_end)return t.config.project_end;var e=t.getTaskByTime();return(e=e.sort(function(t,e){return+t.end_date>+e.end_date?1:-1})).length?e[e.length-1].end_date:null},t._getProjectStart=function(){if(t.config.project_start)return t.config.project_start;if(t.config.start_date)return t.config.start_date;if(t.getState().min_date)return t.getState().min_date;var e=t.getTaskByTime();return(e=e.sort(function(t,e){return+t.start_date>+e.start_date?1:-1})).length?e[0].start_date:null};var e=function(e,i){var n=!(!i||i==t.config.root_id)&&t.getTask(i),o=null;if(n)o=t.config.schedule_from_end?t.calculateEndDate({start_date:n.end_date,duration:-t.config.duration_step,task:e}):n.start_date;else if(t.config.schedule_from_end)o=t.calculateEndDate({start_date:t._getProjectEnd(),duration:-t.config.duration_step,task:e});else{var a=t.getTaskByIndex(0);o=a?a.start_date?a.start_date:a.end_date?t.calculateEndDate({start_date:a.end_date,duration:-t.config.duration_step,task:e}):null:t.config.start_date||t.getState().min_date}return t.assert(o,"Invalid dates"),new Date(o)};t._set_default_task_timing=function(i){i.start_date=i.start_date||e(i,t.getParent(i)),i.duration=i.duration||t.config.duration_step,i.end_date=i.end_date||t.calculateEndDate(i)},t.createTask=function(i,n,o){return t.defined((i=i||{}).id)||(i.id=t.uid()),i.start_date||(i.start_date=e(i,n)),void 0===i.text&&(i.text=t.locale.labels.new_task),void 0===i.duration&&(i.duration=1),this.isTaskExists(n)&&(this.setParent(i,n,!0),this.getTask(n).$open=!0),this.callEvent("onTaskCreated",[i])?(this.config.details_on_create?(i.$new=!0,this.silent(function(){t.$data.tasksStore.addItem(i,o)}),this.selectTask(i.id),this.refreshData(),this.showLightbox(i.id)):this.addTask(i,n,o)&&(this.showTask(i.id),this.selectTask(i.id)),i.id):null},t._update_flags=function(e,i){var n=t.$data.tasksStore;void 0===e?(this._lightbox_id=null,n.silent(function(){n.unselect()}),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==e&&(this._lightbox_id=i),n.getSelectedId()==e&&n.silent(function(){n.unselect(e),n.select(i)}),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==e&&(this._tasks_dnd.drag.id=i))};var i=function(e,i){var n=t.getTaskType(e.type),o={type:n,$no_start:!1,$no_end:!1};return i||n!=e.$rendered_type?(n==t.config.types.project?o.$no_end=o.$no_start=!0:n!=t.config.types.milestone&&(o.$no_end=!(e.end_date||e.duration),o.$no_start=!e.start_date,t._isAllowedUnscheduledTask(e)&&(o.$no_end=o.$no_start=!1)),o):(o.$no_start=e.$no_start,o.$no_end=e.$no_end,o)};function o(e){e.$effective_calendar=t.getTaskCalendar(e).id,e.start_date=t.getClosestWorkTime({dir:"future",date:e.start_date,unit:t.config.duration_unit,task:e}),e.end_date=t.calculateEndDate(e)}t._init_task_timing=function(t){var e=i(t,!0),n=t.$rendered_type!=e.type,a=e.type;n&&(t.$no_start=e.$no_start,t.$no_end=e.$no_end,t.$rendered_type=e.type),n&&a!=this.config.types.milestone&&a==this.config.types.project&&this._set_default_task_timing(t),a==this.config.types.milestone&&(t.end_date=t.start_date),t.start_date&&t.end_date&&(t.duration=this.calculateDuration(t)),t.end_date||(t.end_date=t.start_date),t.duration=t.duration||0;var r=this.getTaskCalendar(t);t.$effective_calendar&&t.$effective_calendar!==r.id&&(o(t),this.config.inherit_calendar&&this.isSummaryTask(t)&&this.eachTask(function(t){o(t)},t.id)),t.$effective_calendar=r.id},t.isSummaryTask=function(e){t.assert(e&&e instanceof Object,"Invalid argument <b>task</b>="+e+" of gantt.isSummaryTask. Task object was expected");var n=i(e);return!(!n.$no_end&&!n.$no_start)},t.resetProjectDates=function(t){var n=i(t);if(n.$no_end||n.$no_start){var o=this.getSubtaskDates(t.id);(function(t,n,o){var a=i(t);a.$no_start&&(t.start_date=n&&n!=1/0?new Date(n):e(t,this.getParent(t))),a.$no_end&&(t.end_date=o&&o!=-1/0?new Date(o):this.calculateEndDate({start_date:t.start_date,duration:this.config.duration_step,task:t})),(a.$no_start||a.$no_end)&&this._init_task_timing(t)}).call(this,t,o.start_date,o.end_date)}},t.getSubtaskDuration=function(e){var i=0;return this.eachTask(function(e){this.getTaskType(e.type)==t.config.types.project||this.isUnscheduledTask(e)||(i+=e.duration)},void 0!==e?e:t.config.root_id),i},t.getSubtaskDates=function(e){var i=null,n=null;return this.eachTask(function(e){this.getTaskType(e.type)==t.config.types.project||this.isUnscheduledTask(e)||(e.start_date&&!e.$no_start&&(!i||i>e.start_date.valueOf())&&(i=e.start_date.valueOf()),e.end_date&&!e.$no_end&&(!n||n<e.end_date.valueOf())&&(n=e.end_date.valueOf()))},void 0!==e?e:t.config.root_id),{start_date:i?new Date(i):null,end_date:n?new Date(n):null}},t._update_parents=function(e,n){if(e){var o=this.getTask(e),a=this.getParent(o),r=i(o),s=!0;if(r.$no_start||r.$no_end){var c=o.start_date.valueOf(),l=o.end_date.valueOf();t.resetProjectDates(o),c==o.start_date.valueOf()&&l==o.end_date.valueOf()&&(s=!1),s&&!n&&this.refreshTask(o.id,!0)}s&&a&&this.isTaskExists(a)&&this._update_parents(a,n)}},t.roundDate=function(e){var i=t.getScale();n.isDate(e)&&(e={date:e,unit:i?i.unit:t.config.duration_unit,step:i?i.step:t.config.duration_step});var o,a,r,s=e.date,c=e.step,l=e.unit;if(!i)return s;if(l==i.unit&&c==i.step&&+s>=+i.min_date&&+s<=+i.max_date)r=Math.floor(t.columnIndexByDate(s)),i.trace_x[r]||(r-=1,i.rtl&&(r=0)),a=new Date(i.trace_x[r]),o=t.date.add(a,c,l);else{for(r=Math.floor(t.columnIndexByDate(s)),o=t.date[l+"_start"](new Date(i.min_date)),i.trace_x[r]&&(o=t.date[l+"_start"](i.trace_x[r]));+o<+s;){var u=(o=t.date[l+"_start"](t.date.add(o,c,l))).getTimezoneOffset();o=t._correct_dst_change(o,u,o,l),t.date[l+"_start"]&&(o=t.date[l+"_start"](o))}a=t.date.add(o,-1*c,l)}return e.dir&&"future"==e.dir?o:e.dir&&"past"==e.dir||Math.abs(s-a)<Math.abs(o-s)?a:o},t.correctTaskWorkTime=function(e){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(e.start_date,void 0,e)?this.isWorkTime(new Date(+e.end_date-1),void 0,e)||(e.end_date=this.calculateEndDate(e)):(e.start_date=this.getClosestWorkTime({date:e.start_date,dir:"future",task:e}),e.end_date=this.calculateEndDate(e)))},t.attachEvent("onBeforeTaskUpdate",function(e,i){return t._init_task_timing(i),!0}),t.attachEvent("onBeforeTaskAdd",function(e,i){return t._init_task_timing(i),!0}),t.attachEvent("onAfterTaskMove",function(e,i,n){return t._init_task_timing(t.getTask(e)),!0})}},function(t,e,i){var n=i(0);t.exports={create:function(t,e){return{getWorkHours:function(t){return e.getWorkHours(t)},setWorkTime:function(t){return e.setWorkTime(t)},unsetWorkTime:function(t){e.unsetWorkTime(t)},isWorkTime:function(t,i,n){return e.isWorkTime(t,i,n)},getClosestWorkTime:function(t){return e.getClosestWorkTime(t)},calculateDuration:function(t,i,n){return e.calculateDuration(t,i,n)},_hasDuration:function(t,i,n){return e.hasDuration(t,i,n)},calculateEndDate:function(t,i,n,o){return e.calculateEndDate(t,i,n,o)},mergeCalendars:n.bind(t.mergeCalendars,t),createCalendar:n.bind(t.createCalendar,t),addCalendar:n.bind(t.addCalendar,t),getCalendar:n.bind(t.getCalendar,t),getCalendars:n.bind(t.getCalendars,t),getResourceCalendar:n.bind(t.getResourceCalendar,t),getTaskCalendar:n.bind(t.getTaskCalendar,t),deleteCalendar:n.bind(t.deleteCalendar,t)}}}},function(t,e){function i(t,e){this.argumentsHelper=e,this.$gantt=t}i.prototype={getWorkHours:function(){return[0,24]},setWorkTime:function(){return!0},unsetWorkTime:function(){return!0},isWorkTime:function(){return!0},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._calculateDuration(t.start_date,t.end_date,t.unit,t.step)},_calculateDuration:function(t,e,i,n){var o=this.$gantt.date,a={week:6048e5,day:864e5,hour:36e5,minute:6e4},r=0;if(a[i])r=Math.round((e-t)/(n*a[i]));else{for(var s=new Date(t),c=new Date(e);s.valueOf()<c.valueOf();)r+=1,s=o.add(s,n,i);s.valueOf()!=e.valueOf()&&(r+=(c-s)/(o.add(s,n,i)-s))}return Math.round(r)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.end_date;return!!t.unit&&(e=new Date(e),i=new Date(i),e.valueOf()<i.valueOf())},hasWorkTime:function(){return!0},equals:function(t){return t instanceof i},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments);return this.$gantt.date.add(t.start_date,t.step*t.duration,t.unit)}},t.exports=i},function(t,e,i){var n=i(36),o=i(170);function a(t){this.$gantt=t.$gantt,this.argumentsHelper=n(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new o(this.$gantt,this.argumentsHelper)}a.prototype={_getCalendar:function(t){var e;if(this.$gantt.config.work_time){var i=this.calendarManager;t.task?e=i.getTaskCalendar(t.task):t.id?e=i.getTaskCalendar(t):t.calendar&&(e=t.calendar),e||(e=i.getTaskCalendar())}else e=this.$disabledCalendar;return e},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date)},setWorkTime:function(t,e){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.setWorkTime(t)},unsetWorkTime:function(t,e){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.unsetWorkTime(t)},isWorkTime:function(t,e,i,n){var o=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(o).isWorkTime(o)},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t)},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t)},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t)}},t.exports=a},function(t,e){t.exports=function(){var t={};return{getCalendarIdFromMultipleResources:function(e,i){var n=function(t){return t.map(function(t){return t&&t.resource_id?t.resource_id:t}).sort().join("-")}(e);if(e.length){if(1===e.length)return i.getResourceCalendar(n).id;if(t[n])return t[n].id;var o=function(t,e){return e.mergeCalendars(t.map(function(t){return e.getResourceCalendar(t&&t.resource_id?t.resource_id:t)}))}(e,i);return t[n]=o,i.addCalendar(o)}return null}}}},function(t,e){t.exports={isLegacyResourceCalendarFormat:function(t){if(!t)return!1;for(var e in t)if(t[e]&&"object"==typeof t[e])return!0;return!1},getResourceProperty:function(t){var e=t.resource_property;if(this.isLegacyResourceCalendarFormat(t.resource_calendars))for(var i in t){e=i;break}return e},getCalendarIdFromLegacyConfig:function(t,e){if(e)for(var i in e)if(t[i]){var n=e[i][t[i]];if(n)return n}return null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LargerUnitsCache=function(t){var e=this;this.getMinutesPerWeek=function(t){var i=t.valueOf();if(e._weekCache.has(i))return e._weekCache.get(i);for(var n=e._calendar,o=e._calendar.$gantt,a=0,r=o.date.week_start(new Date(t)),s=0;s<7;s++)a+=60*n.getHoursPerDay(r),r=o.date.add(r,1,"day");return e._weekCache.set(i,a),a},this.getMinutesPerMonth=function(t){var i=t.valueOf();if(e._monthCache.has(i))return e._monthCache.get(i);for(var n=e._calendar,o=e._calendar.$gantt,a=0,r=o.date.week_start(new Date(t)),s=o.date.add(r,1,"month").valueOf();r.valueOf()<s;)a+=60*n.getHoursPerDay(r),r=o.date.add(r,1,"day");return e._monthCache.set(i,a),a},this.clear=function(){e._weekCache=new Map,e._monthCache=new Map},this.clear(),this._calendar=t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.clear()}return t.prototype.getItem=function(t,e){var i=this._cache;if(i&&i[t]){var n=i[t];if(void 0!==n[e])return n[e]}return-1},t.prototype.setItem=function(t,e,i){if(t&&e){var n=this._cache;n&&(n[t]||(n[t]={}),n[t][e]=i)}},t.prototype.clear=function(){this._cache={}},t}();e.WorkUnitsObjectCache=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.clear()}return t.prototype.getItem=function(t,e){if(this._cache.has(t)){var i=this._cache.get(t);if(i.has(e))return i.get(e)}return-1},t.prototype.setItem=function(t,e,i){if(t&&e){var n,o=this._cache;o.has(t)?n=o.get(t):(n=new Map,o.set(t,n)),n.set(e,i)}},t.prototype.clear=function(){this._cache=new Map},t}();e.WorkUnitsMapCache=n},function(t,e,i){var n=i(35).createCacheObject,o=i(35).LargerUnitsCache,a=i(0);function r(t,e){this.argumentsHelper=e,this.$gantt=t,this._workingUnitsCache=n(),this._largeUnitsCache=new o(this),this._worktime=null,this._cached_timestamps={},this._cached_timestamps_count=0}r.prototype={units:["year","month","week","day","hour","minute"],_getUnitOrder:function(t){for(var e=0,i=this.units.length;e<i;e++)if(this.units[e]==t)return e},_resetTimestampCache:function(){this._cached_timestamps={},this._cached_timestamps_count=0},_timestamp:function(t){this._cached_timestamps_count>1e6&&this._resetTimestampCache();var e=null;if(t.day||0===t.day)e=t.day;else if(t.date){var i=String(t.date.valueOf());this._cached_timestamps[i]?e=this._cached_timestamps[i]:(e=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()),this._cached_timestamps[i]=e,this._cached_timestamps_count++)}return e},_checkIfWorkingUnit:function(t,e,i,n){if(!n){if(void 0===i&&(i=this._getUnitOrder(e)),void 0===i)return!0;if(i&&!this._isWorkTime(t,this.units[i-1],i-1))return!1}return!this["_is_work_"+e]||this["_is_work_"+e](t)},_is_work_day:function(t){var e=this._getWorkHours(t);return!!Array.isArray(e)&&e.length>0},_is_work_hour:function(t){for(var e=this._getWorkHours(t),i=t.getHours(),n=0;n<e.length;n++)if(i>=e[n].startHour&&i<e[n].endHour)return!0;return!1},_getTimeOfDayStamp:function(t,e){var i=t.getHours();return t.getHours()||t.getMinutes()||!e||(i=24),60*i*60+60*t.getMinutes()},_is_work_minute:function(t){for(var e=this._getWorkHours(t),i=this._getTimeOfDayStamp(t),n=0;n<e.length;n++)if(i>=e[n].start&&i<e[n].end)return!0;return!1},_internDatesPull:{},_nextDate:function(t,e,i){return this.$gantt.date.add(t,i,e)},_getWorkUnitsBetweenGeneric:function(t,e,i,n){var o=this.$gantt.date,a=new Date(t),r=new Date(e);n=n||1;var s,c,l=0,u=null,d=!1;(s=o[i+"_start"](new Date(a))).valueOf()!=a.valueOf()&&(d=!0);var h=!1;(c=o[i+"_start"](new Date(e))).valueOf()!=e.valueOf()&&(h=!0);for(var p=!1;a.valueOf()<r.valueOf();){if(p=(u=this._nextDate(a,i,n)).valueOf()>r.valueOf(),this._isWorkTime(a,i))(d||h&&p)&&(s=o[i+"_start"](new Date(a)),c=o.add(s,n,i)),d?(d=!1,u=this._nextDate(s,i,n),l+=(c.valueOf()-a.valueOf())/(c.valueOf()-s.valueOf())):h&&p?(h=!1,l+=(r.valueOf()-a.valueOf())/(c.valueOf()-s.valueOf())):l++;else{var f=this._getUnitOrder(i),g=this.units[f-1];g&&!this._isWorkTime(a,g)&&(u=this._getClosestWorkTimeFuture(a,g))}a=u}return l},_getMinutesPerHour:function(t){var e=this._getTimeOfDayStamp(t),i=this._getTimeOfDayStamp(this._nextDate(t,"hour",1));0===i&&(i=86400);for(var n=this._getWorkHours(t),o=0;o<n.length;o++){var a=n[o];if(e>=a.start&&i<=a.end)return 60;if(e<a.end&&i>a.start)return(Math.min(i,a.end)-Math.max(e,a.start))/60}return 0},_getMinutesPerDay:function(t){var e=0;return this._getWorkHours(t).forEach(function(t){e+=t.durationMinutes}),e},getHoursPerDay:function(t){var e=0;return this._getWorkHours(t).forEach(function(t){e+=t.durationHours}),e},_getWorkUnitsForRange:function(t,e,i,n){var o,r=0,s=new Date(t),c=new Date(e);for(o=a.bind("minute"==i?this._getMinutesPerDay:this.getHoursPerDay,this);s.valueOf()<c.valueOf();)if(c-s>27648e5&&0===s.getDate()){var l=this._largeUnitsCache.getMinutesPerMonth(s);"hour"==i&&(l/=60),r+=l,s=this.$gantt.date.add(s,1,"month")}else{if(c-s>13824e5){var u=this.$gantt.date.week_start(new Date(s));if(s.valueOf()===u.valueOf()){l=this._largeUnitsCache.getMinutesPerWeek(s),"hour"==i&&(l/=60),r+=l,s=this.$gantt.date.add(s,7,"day");continue}}r+=o(s),s=this._nextDate(s,"day",1)}return r/n},_getMinutesBetweenSingleDay:function(t,e){for(var i=this._getIntervalTimestamp(t,e),n=this._getWorkHours(t),o=0,a=0;a<n.length;a++){var r=n[a];if(i.end>=r.start&&i.start<=r.end){var s=Math.max(r.start,i.start),c=Math.min(r.end,i.end);o+=(c-s)/60,i.start=c}}return Math.floor(o)},_getMinutesBetween:function(t,e,i,n){var o=new Date(t),a=new Date(e);n=n||1;var r=new Date(o),s=this.$gantt.date.add(this.$gantt.date.day_start(new Date(o)),1,"day");if(a.valueOf()<=s.valueOf())return this._getMinutesBetweenSingleDay(t,e);var c=this.$gantt.date.day_start(new Date(a)),l=a,u=this._getMinutesBetweenSingleDay(r,s),d=this._getMinutesBetweenSingleDay(c,l);return u+this._getWorkUnitsForRange(s,c,i,n)+d},_getHoursBetween:function(t,e,i,n){var o=new Date(t),a=new Date(e);n=n||1;var r=new Date(o),s=this.$gantt.date.add(this.$gantt.date.day_start(new Date(o)),1,"day");if(a.valueOf()<=s.valueOf())return Math.round(this._getMinutesBetweenSingleDay(t,e)/60);var c=this.$gantt.date.day_start(new Date(a)),l=a,u=this._getMinutesBetweenSingleDay(r,s,i,n)/60,d=this._getMinutesBetweenSingleDay(c,l,i,n)/60,h=u+this._getWorkUnitsForRange(s,c,i,n)+d;return Math.round(h)},getConfig:function(){return this._worktime},_setConfig:function(t){this._worktime=t,this._parseSettings(),this._workingUnitsCache.clear(),this._largeUnitsCache.clear()},_parseSettings:function(){var t=this.getConfig();for(var e in t.parsed={dates:{},hours:null},t.parsed.hours=this._parseHours(t.hours),t.dates)t.parsed.dates[e]=this._parseHours(t.dates[e])},_tryChangeCalendarSettings:function(t){var e=JSON.stringify(this.getConfig());return t(),!!this.hasWorkTime()||(this._setConfig(JSON.parse(e)),this._workingUnitsCache.clear(),this._largeUnitsCache.clear(),!1)},_arraysEqual:function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0},equals:function(t){if(!(t instanceof r))return!1;var e=this.getConfig(),i=t.getConfig();if(!this._arraysEqual(e.hours,i.hours))return!1;var n=Object.keys(e.dates),o=Object.keys(i.dates);if(n.sort(),o.sort(),!this._arraysEqual(n,o))return!1;for(var a=0;a<n.length;a++){var s=n[a],c=e.dates[s],l=e.dates[s];if(c!==l&&!(Array.isArray(c)&&Array.isArray(l)&&this._arraysEqual(c,l)))return!1}return!0},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date,!1)},_getWorkHours:function(t,e){var i=this.getConfig();if(!1!==e&&(i=i.parsed),!t)return i.hours;var n=this._timestamp({date:t}),o=!0;return void 0!==i.dates[n]?o=i.dates[n]:void 0!==i.dates[t.getDay()]&&(o=i.dates[t.getDay()]),!0===o?i.hours:o||[]},_getIntervalTimestamp:function(t,e){var i={start:0,end:0};i.start=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();var n=e.getHours();return!n&&!e.getMinutes()&&!e.getSeconds()&&t.valueOf()<e.valueOf()&&(n=24),i.end=60*n*60+60*e.getMinutes()+e.getSeconds(),i},_parseHours:function(t){if(Array.isArray(t)){var e=[];t.forEach(function(t){"number"==typeof t?e.push(60*t*60):"string"==typeof t&&t.split("-").map(function(t){return t.trim()}).forEach(function(t){var i=t.split(":").map(function(t){return t.trim()}),n=parseInt(60*i[0]*60);i[1]&&(n+=parseInt(60*i[1])),i[2]&&(n+=parseInt(i[2])),e.push(n)})});for(var i=[],n=0;n<e.length;n+=2){var o=e[n],a=e[n+1],r=a-o;i.push({start:o,end:a,startHour:Math.floor(o/3600),startMinute:Math.floor(o/60),endHour:Math.ceil(a/3600),endMinute:Math.ceil(a/60),durationSeconds:r,durationMinutes:r/60,durationHours:r/3600})}return i}return t},setWorkTime:function(t){return this._tryChangeCalendarSettings(a.bind(function(){var e=void 0===t.hours||t.hours,i=this._timestamp(t),n=this.getConfig();null!==i?n.dates[i]=e:n.hours=e,this._parseSettings(),this._workingUnitsCache.clear(),this._largeUnitsCache.clear()},this))},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(a.bind(function(){if(t){var e=this._timestamp(t);null!==e&&delete this.getConfig().dates[e]}else this.reset_calendar();this._workingUnitsCache.clear(),this._largeUnitsCache.clear()},this))},_isWorkTime:function(t,e,i){var n=String(t.valueOf()),o=-1;return this._workingUnitsCache.getItem(e,n),-1==o&&(o=this._checkIfWorkingUnit(t,e,i)),o},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return!!t.unit&&this._calculateDuration(t.start_date,t.end_date,t.unit,t.step)},_calculateDuration:function(t,e,i,n){var o;return o="hour"==i&&1==n?this._getHoursBetween(t,e,i,n):"minute"==i&&1==n?this._getMinutesBetween(t,e,i,n):this._getWorkUnitsBetweenGeneric(t,e,i,n),Math.round(o)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.end_date,i=t.unit,n=t.step;if(!i)return!1;var o=new Date(t.start_date),a=new Date(e);for(n=n||1;o.valueOf()<a.valueOf();){if(this._isWorkTime(o,i))return!0;o=this._nextDate(o,i,n)}return!1},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.duration,n=t.unit,o=t.step;if(!n)return!1;var a=t.duration>=0?1:-1;return i=Math.abs(1*i),this._calculateEndDate(e,i,n,o*a)},_calculateEndDate:function(t,e,i,n){return!!i&&(1==n&&"minute"==i?this._calculateMinuteEndDate(t,e,n):1==n&&"hour"==i?this._calculateHourEndDate(t,e,n):this._addInterval(t,e,i,n,null).end)},_addInterval:function(t,e,i,n,o){for(var a=0,r=t;a<e&&(!o||!o(r));){var s=this._nextDate(r,i,n);this._isWorkTime(n>0?new Date(s.valueOf()-1):new Date(s.valueOf()+1),i)&&a++,r=s}return{end:r,start:t,added:a}},_addHoursUntilDayEnd:function(t,e){for(var i=this.$gantt.date.add(this.$gantt.date.day_start(new Date(t)),1,"day"),n=0,o=e,a=this._getIntervalTimestamp(t,i),r=this._getWorkHours(t),s=0;s<r.length&&n<e;s++){var c=r[s];if(a.end>=c.start&&a.start<=c.end){var l=Math.max(c.start,a.start),u=Math.min(c.end,a.end),d=(u-l)/3600;d>o&&(d=o,u=l+60*o*60);var h=Math.round((u-l)/3600);n+=h,o-=h,a.start=u}}var p=i;return n===e&&(p=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,a.start)),{added:n,end:p}},_calculateHourEndDate:function(t,e,i){var n=new Date(t),o=0;i=i||1,e=Math.abs(1*e);var a=this._addHoursUntilDayEnd(n,e);if(n=a.end,l=e-(o=a.added)){for(var r=n;o<e;){var s,c=this._nextDate(r,"day",i);if(c.setHours(0),c.setMinutes(0),c.setSeconds(0),o+(s=this.getHoursPerDay(i>0?new Date(c.valueOf()-1):new Date(c.valueOf()+1)))>=e)break;o+=s,r=c}n=r}if(o<e){var l=e-o;n=(a=this._addHoursUntilDayEnd(n,l)).end}return n},_addMinutesUntilHourEnd:function(t,e){for(var i=this.$gantt.date.add(this.$gantt.date.hour_start(new Date(t)),1,"hour"),n=0,o=e,a=this._getIntervalTimestamp(t,i),r=this._getWorkHours(t),s=0;s<r.length&&n<e;s++){var c=r[s];if(a.end>=c.start&&a.start<=c.end){var l=Math.max(c.start,a.start),u=Math.min(c.end,a.end),d=(u-l)/60;d>o&&(d=o,u=l+60*o);var h=Math.round((u-l)/60);o-=h,n+=h,a.start=u}}var p=i;return n===e&&(p=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,a.start)),{added:n,end:p}},_calculateMinuteEndDate:function(t,e,i){var n=new Date(t),o=0;i=i||1,e=Math.abs(1*e),e=Math.round(e);var a=this._addMinutesUntilHourEnd(n,e);o+=a.added,n=a.end;for(var r=0,s=[],c=0;o<e;){var l=this.$gantt.date.day_start(new Date(n)).valueOf();l!==r&&(s=this._getWorkHours(n),c=0,s.forEach(function(t){c+=t.durationMinutes}),r=l);var u=e-o,d=this._getTimeOfDayStamp(n);if(s.length&&c)if(s[0].start>=d&&u>c)o+=c,n=this.$gantt.date.add(n,1,"day");else{for(var h=!1,p=null,f=0;f<s.length;f++)if(s[f].start<=d&&s[f].end>=d){h=!0,p=s[f];break}if(h)if(d===p.start&&u>=p.durationMinutes)o+=p.durationMinutes,n=this.$gantt.date.add(n,p.durationMinutes,"minute");else if(u<=p.endMinute-d/60)o+=u,n=this.$gantt.date.add(n,u,"minute");else{var g=this._getMinutesPerHour(n);g<=u?(o+=g,n=this._nextDate(n,"hour",i)):(o+=(a=this._addMinutesUntilHourEnd(n,u)).added,n=a.end)}else n=this._getClosestWorkTimeFuture(n,"hour")}else n=this.$gantt.date.add(n,1,"day")}return o<e&&(o+=(a=this._addMinutesUntilHourEnd(n,e-o)).added,n=a.end),n},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t.date,t.unit,t.dir)},_getClosestWorkTime:function(t,e,i){var n=new Date(t);if(this._isWorkTime(n,e))return n;if(n=this.$gantt.date[e+"_start"](n),"any"!=i&&i)n="past"==i?this._getClosestWorkTimePast(n,e):this._getClosestWorkTimeFuture(n,e);else{var o=this._getClosestWorkTimeFuture(n,e),a=this._getClosestWorkTimePast(n,e);n=Math.abs(o-t)<=Math.abs(t-a)?o:a}return n},_getClosestWorkTimeFuture:function(t,e){return this._getClosestWorkTimeGeneric(t,e,1)},_getClosestWorkTimePast:function(t,e){var i=this._getClosestWorkTimeGeneric(t,e,-1);return this.$gantt.date.add(i,1,e)},_findClosestTimeInDay:function(t,e){var i=new Date(t),n=null,o=!1,a=this._getWorkHours(i);this._getWorkHours(i).length||(i=this._getClosestWorkTime(i,"day",e<0?"past":"future"),e<0&&(i=new Date(i.valueOf()-1),o=!0),a=this._getWorkHours(i));var r=this._getTimeOfDayStamp(i);if(o&&(r=this._getTimeOfDayStamp(new Date(i.valueOf()+1),o)),e>0){for(var s=0;s<a.length;s++)if(a[s].start>=r){n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,a[s].start);break}}else for(s=a.length-1;s>=0;s--)if(a[s].end<=r){n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,a[s].end);break}return n},_getClosestWorkMinute:function(t,e,i){var n=new Date(t),o=this._findClosestTimeInDay(n,i);return o||(n=this.calculateEndDate(n,i,"day"),i>0?n=this.$gantt.date.day_start(n):(n=this.$gantt.date.day_start(n),n=this.$gantt.date.add(n,1,"day"),n=new Date(n.valueOf()-1)),o=this._findClosestTimeInDay(n,i)),i<0&&(o=this.$gantt.date.add(o,-1,e)),o},_getClosestWorkTimeGeneric:function(t,e,i){if("hour"===e||"minute"===e)return this._getClosestWorkMinute(t,e,i);for(var n=this._getUnitOrder(e),o=this.units[n-1],a=t,r=0;!this._isWorkTime(a,e)&&(!o||this._isWorkTime(a,o)||(a=i>0?this._getClosestWorkTimeFuture(a,o):this._getClosestWorkTimePast(a,o),!this._isWorkTime(a,e)));){if(++r>3e3)return this.$gantt.assert(!1,"Invalid working time check"),!1;var s=a.getTimezoneOffset();a=this.$gantt.date.add(a,i,e),a=this.$gantt._correct_dst_change(a,s,i,e),this.$gantt.date[e+"_start"]&&(a=this.$gantt.date[e+"_start"](a))}return a},hasWorkTime:function(){var t=this.getConfig(),e=t.dates,i=[];for(var n in t.dates)Number(n)>6&&i.push(Number(n));var o=this._checkWorkHours(t.hours),a=!1;return[0,1,2,3,4,5,6].forEach((function(t){if(!a){var i=e[t];!0===i?a=o:Array.isArray(i)&&(a=this._checkWorkHours(i))}}).bind(this)),a},_checkWorkHours:function(t){if(0===t.length)return!1;for(var e=!1,i=0;i<t.length;i+=2)t[i]!==t[i+1]&&(e=!0);return e}},t.exports=r},function(t,e,i){var n=i(0);function o(){}o.prototype={_getIntervals:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push({start:t[i],end:t[i+1]});return e},_toHoursArray:function(t){var e=[];function i(t){var e=Math.floor(t/3600);return e+":"+function(t){var e=String(t);return e.length<2&&(e="0"+e),e}(Math.floor((t-60*e*60)/60))}for(var n=0;n<t.length;n++)e.push(i(t[n].start)+"-"+i(t[n].end));return e},_intersectHourRanges:function(t,e){var i=[],n=t.length>e.length?t:e,o=t===n?e:t;n=n.slice(),o=o.slice(),i=[];for(var a=0;a<n.length;a++)for(var r=n[a],s=0;s<o.length;s++){var c=o[s];c.start<r.end&&c.end>r.start&&(i.push({start:Math.max(r.start,c.start),end:Math.min(r.end,c.end)}),r.end>c.end&&(o.splice(s,1),s--,a--))}return i},_mergeAdjacentIntervals:function(t){var e=t.slice();e.sort(function(t,e){return t.start-e.start});for(var i=e[0],n=1;n<e.length;n++){var o=e[n];o.start<=i.end?(o.end>i.end&&(i.end=o.end),e.splice(n,1),n--):i=o}return e},_mergeHoursConfig:function(t,e){return this._mergeAdjacentIntervals(this._intersectHourRanges(t,e))},merge:function(t,e){var i=n.copy(t.getConfig().parsed),o=n.copy(e.getConfig().parsed),a={hours:this._toHoursArray(this._mergeHoursConfig(i.hours,o.hours)),dates:{}};for(var r in i.dates){var s=i.dates[r],c=o.dates[r];if(s&&c)if(Array.isArray(s)||Array.isArray(c)){var l=Array.isArray(s)?s:i.hours,u=Array.isArray(c)?c:o.hours;a.dates[r]=this._toHoursArray(this._mergeHoursConfig(l,u))}else a.dates[r]=!0;else a.dates[r]=!1}return a}},t.exports=o},function(t,e,i){var n=i(0),o=i(36),a=i(178),r=i(177),s=i(173),c=i(172)();function l(t){this.$gantt=t,this._calendars={}}l.prototype={_calendars:{},_convertWorkTimeSettings:function(t){var e=t.days;if(e&&!t.dates){t.dates=t.dates||{};for(var i=0;i<e.length;i++)t.dates[i]=e[i],e[i]instanceof Array||(t.dates[i]=!!e[i])}return delete t.days,t},mergeCalendars:function(){var t=[],e=arguments;if(Array.isArray(e[0]))t=e[0].slice();else for(var i=0;i<arguments.length;i++)t.push(arguments[i]);var n,o=new a;return t.forEach((function(t){n=n?this._createCalendarFromConfig(o.merge(n,t)):t}).bind(this)),this.createCalendar(n)},_createCalendarFromConfig:function(t){var e=new r(this.$gantt,o(this.$gantt));return e.id=String(n.uid()),e._setConfig(this._convertWorkTimeSettings(t)),e},createCalendar:function(t){var e;t||(t={}),e=n.copy(t.getConfig?t.getConfig():t.worktime?t.worktime:t);var i=n.copy(this.defaults.fulltime.worktime);return n.mixin(e,i),this._createCalendarFromConfig(e)},getCalendar:function(t){return t=t||"global",this.createDefaultCalendars(),this._calendars[t]},getCalendars:function(){var t=[];for(var e in this._calendars)t.push(this.getCalendar(e));return t},_getOwnCalendar:function(t){var e=this.$gantt.config;if(t[e.calendar_property])return this.getCalendar(t[e.calendar_property]);if(e.resource_calendars){var i=s.getResourceProperty(e);if(Array.isArray(t[i]))e.dynamic_resource_calendars&&(n=c.getCalendarIdFromMultipleResources(t[i],this));else if(s.isLegacyResourceCalendarFormat(e.resource_calendars))var n=s.getCalendarIdFromLegacyConfig(t,e.resource_calendars);else if(i&&t[i]&&e.resource_calendars[t[i]])var o=this.getResourceCalendar(t[i]);if(n&&(o=this.getCalendar(n)),o)return o}return null},getResourceCalendar:function(t){if(null==t)return this.getCalendar();var e;e="number"==typeof t||"string"==typeof t?t:t.id||t.key;var i=this.$gantt.config.resource_calendars,n=null;if(i){if(s.isLegacyResourceCalendarFormat(i)){for(var o in i)if(i[o][e]){n=i[o][e];break}}else n=i[e];if(n)return this.getCalendar(n)}return this.getCalendar()},getTaskCalendar:function(t){var e,i=this.$gantt;if(null==t)return this.getCalendar();if(!(e="number"!=typeof t&&"string"!=typeof t||!i.isTaskExists(t)?t:i.getTask(t)))return this.getCalendar();var n=this._getOwnCalendar(e);if(!n&&i.config.inherit_calendar&&i.isTaskExists(e.parent)){var o=!1;i.eachParent(function(t){o||i.isSummaryTask(t)&&(n=this._getOwnCalendar(t))&&(o=!0)},e.id,this)}return n||this.getCalendar()},addCalendar:function(t){if(!this.isCalendar(t)){var e=t.id;(t=this.createCalendar(t)).id=e}if(t._tryChangeCalendarSettings(function(){})){var i=this.$gantt.config;return t.id=t.id||n.uid(),this._calendars[t.id]=t,i.worktimes||(i.worktimes={}),i.worktimes[t.id]=t.getConfig(),t.id}return this.$gantt.callEvent("onCalendarError",[{message:"Invalid calendar settings, no worktime available"},t]),null},deleteCalendar:function(t){var e=this.$gantt.config;return!!t&&!!this._calendars[t]&&(delete this._calendars[t],e.worktimes&&e.worktimes[t]&&delete e.worktimes[t],!0)},restoreConfigCalendars:function(t){for(var e in t)if(!this._calendars[e]){var i=this.createCalendar(t[e]);i.id=e,this.addCalendar(i)}},defaults:{global:{id:"global",worktime:{hours:[8,12,13,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:"fulltime",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.config;this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes)},isCalendar:function(t){return[t.isWorkTime,t.setWorkTime,t.getWorkHours,t.unsetWorkTime,t.getClosestWorkTime,t.calculateDuration,t.hasDuration,t.calculateEndDate].every(function(t){return t instanceof Function})}},t.exports=l},function(t,e,i){var n=i(179),o=i(171),a=i(169),r=i(0);t.exports=function(t){var e=new n(t),i=new o(e),s=a.create(e,i);r.mixin(t,s)}},function(t,e,i){var n=i(3);t.exports=function(t){function e(e){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(e)),new Error("Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: "+JSON.stringify(e))}t.load=function(e,i,n){this._load_url=e,this.assert(arguments.length,"Invalid load arguments");var o="json",a=null;return arguments.length>=3?(o=i,a=n):"string"==typeof arguments[1]?o=arguments[1]:"function"==typeof arguments[1]&&(a=arguments[1]),this._load_type=o,this.callEvent("onLoadStart",[e,o]),this.ajax.get(e,t.bind(function(t){this.on_load(t,o),this.callEvent("onLoadEnd",[e,o]),"function"==typeof a&&a.call(this)},this))},t.parse=function(t,e){this.on_load({xmlDoc:{responseText:t}},e)},t.serialize=function(t){return this[t=t||"json"].serialize()},t.on_load=function(t,e){if(t.xmlDoc&&404===t.xmlDoc.status)this.assert(!1,"Failed to load the data from <a href='"+t.xmlDoc.responseURL+"' target='_blank'>"+t.xmlDoc.responseURL+"</a>, server returns 404");else{this.callEvent("onBeforeParse",[]),e||(e="json"),this.assert(this[e],"Invalid data type:'"+e+"'");var i=this[e].parse(t.xmlDoc.responseText,t);this._process_loading(i)}},t._process_loading=function(t){t.collections&&this._load_collections(t.collections),this.$data.tasksStore.parse(t.data||t.tasks),this.$data.linksStore.parse(t.links||(t.collections?t.collections.links:[])),this.callEvent("onParse",[]),this.render()},t._load_collections=function(t){var e=!1;for(var i in t)if(t.hasOwnProperty(i)){e=!0;var n=t[i],o=this.serverList[i];if(!o)continue;o.splice(0,o.length);for(var a=0;a<n.length;a++){var r=n[a],s=this.copy(r);for(var c in s.key=s.value,r)if(r.hasOwnProperty(c)){if("value"==c||"label"==c)continue;s[c]=r[c]}o.push(s)}}e&&this.callEvent("onOptionsLoad",[])},t.attachEvent("onBeforeTaskDisplay",function(t,e){return!e.$ignore}),t.json={parse:function(i){if(i||e(i),"string"==typeof i)if(null!=typeof JSON)try{i=JSON.parse(i)}catch(t){e(i)}else t.assert(!1,"JSON is not supported");return i.data||i.tasks||e(i),i.dhx_security&&(t.security_key=i.dhx_security),i},serializeTask:function(t){return this._copyObject(t)},serializeLink:function(t){return this._copyLink(t)},_copyLink:function(t){var e={};for(var i in t)e[i]=t[i];return e},_copyObject:function(e){var i={};for(var o in e)"$"!=o.charAt(0)&&(i[o]=e[o],n.isDate(i[o])&&(i[o]=t.defined(t.templates.xml_format)?t.templates.xml_format(i[o]):t.templates.format_date(i[o])));return i},serialize:function(){var e=[],i=[];t.eachTask(function(i){t.resetProjectDates(i),e.push(this.serializeTask(i))},t.config.root_id,this);for(var n=t.getLinks(),o=0;o<n.length;o++)i.push(this.serializeLink(n[o]));return{data:e,links:i}}},t.xml={_xmlNodeToJSON:function(t,e){for(var i={},n=0;n<t.attributes.length;n++)i[t.attributes[n].name]=t.attributes[n].value;if(!e){for(n=0;n<t.childNodes.length;n++){var o=t.childNodes[n];1==o.nodeType&&(i[o.tagName]=o.firstChild?o.firstChild.nodeValue:"")}i.text||(i.text=t.firstChild?t.firstChild.nodeValue:"")}return i},_getCollections:function(e){for(var i={},n=t.ajax.xpath("//coll_options",e),o=0;o<n.length;o++)for(var a=i[n[o].getAttribute("for")]=[],r=t.ajax.xpath(".//item",n[o]),s=0;s<r.length;s++){for(var c=r[s].attributes,l={key:r[s].getAttribute("value"),label:r[s].getAttribute("label")},u=0;u<c.length;u++){var d=c[u];"value"!=d.nodeName&&"label"!=d.nodeName&&(l[d.nodeName]=d.nodeValue)}a.push(l)}return i},_getXML:function(e,i,n){n=n||"data",i.getXMLTopNode||(i=t.ajax.parse(i));var o=t.ajax.xmltop(n,i.xmlDoc);o&&o.tagName==n||function(e){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(e)),new Error("Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: "+JSON.stringify(e))}(e);var a=o.getAttribute("dhx_security");return a&&(t.security_key=a),o},parse:function(e,i){i=this._getXML(e,i);for(var n={},o=n.data=[],a=t.ajax.xpath("//task",i),r=0;r<a.length;r++)o[r]=this._xmlNodeToJSON(a[r]);return n.collections=this._getCollections(i),n},_copyLink:function(t){return"<item id='"+t.id+"' source='"+t.source+"' target='"+t.target+"' type='"+t.type+"' />"},_copyObject:function(t){return"<task id='"+t.id+"' parent='"+(t.parent||"")+"' start_date='"+t.start_date+"' duration='"+t.duration+"' open='"+!!t.open+"' progress='"+t.progress+"' end_date='"+t.end_date+"'><![CDATA["+t.text+"]]></task>"},serialize:function(){for(var e=[],i=[],n=t.json.serialize(),o=0,a=n.data.length;o<a;o++)e.push(this._copyObject(n.data[o]));for(o=0,a=n.links.length;o<a;o++)i.push(this._copyLink(n.links[o]));return"<data>"+e.join("")+"<coll_options for='links'>"+i.join("")+"</coll_options></data>"}},t.oldxml={parse:function(e,i){i=t.xml._getXML(e,i,"projects");for(var n={collections:{links:[]}},o=n.data=[],a=t.ajax.xpath("//task",i),r=0;r<a.length;r++){o[r]=t.xml._xmlNodeToJSON(a[r]);var s=a[r].parentNode;o[r].parent="project"==s.tagName?"project-"+s.getAttribute("id"):s.parentNode.getAttribute("id")}for(a=t.ajax.xpath("//project",i),r=0;r<a.length;r++)(c=t.xml._xmlNodeToJSON(a[r],!0)).id="project-"+c.id,o.push(c);for(r=0;r<o.length;r++){var c;(c=o[r]).start_date=c.startdate||c.est,c.end_date=c.enddate,c.text=c.name,c.duration=c.duration/8,c.open=1,c.duration||c.end_date||(c.duration=1),c.predecessortasks&&n.collections.links.push({target:c.id,source:c.predecessortasks,type:t.config.links.finish_to_start})}return n},serialize:function(){t.message("Serialization to 'old XML' is not implemented")}},t.serverList=function(t,e){return e?this.serverList[t]=e.slice(0):this.serverList[t]||(this.serverList[t]=[]),this.serverList[t]}}},function(t,e){t.exports=function(t){t.isReadonly=function(t){return(!t||!t[this.config.editable_property])&&(t&&t[this.config.readonly_property]||this.config.readonly)}}},function(t,e){t.exports=function(t){t.getGridColumn=function(e){for(var i=t.config.columns,n=0;n<i.length;n++)if(i[n].name==e)return i[n];return null},t.getGridColumns=function(){return t.config.columns.slice()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._scrollOrder=0;var e=t.grid,i=t.dnd,n=t.getCurrentX;this.$gantt=t.gantt,this.$grid=e,this._dnd=i,this.getCurrentX=n,this._scrollView=this.$gantt.$ui.getView(this.$grid.$config.scrollX),this.attachEvents()}return t.prototype.attachEvents=function(){var t=this;this.isScrollable()&&(this._dnd.attachEvent("onDragMove",function(e,i){var n=t.$grid.$grid.getBoundingClientRect(),o=n.right,a=n.left,r=t.getCurrentX(i.clientX);return r>=o-20&&(t.autoscrollRight(),t.autoscrollStart()),r<=a+20&&(t.autoscrollLeft(),t.autoscrollStart()),r<o-20&&r>a+20&&t.autoscrollStop(),!0}),this._dnd.attachEvent("onDragEnd",function(){t.autoscrollStop()}))},t.prototype.autoscrollStart=function(){var t=this;if(0!==this._scrollOrder){var e=10*this._scrollOrder,i=this._scrollView.getScrollState();this._scrollView.scrollTo(i.position+e),setTimeout(function(){t.autoscrollStart()},50)}},t.prototype.autoscrollRight=function(){this._scrollOrder=1},t.prototype.autoscrollLeft=function(){this._scrollOrder=-1},t.prototype.autoscrollStop=function(){this._scrollOrder=0},t.prototype.getCorrection=function(){return this.isScrollable()?this._scrollView.getScrollState().position:0},t.prototype.isScrollable=function(){return!!this.$grid.$config.scrollable},t}();e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i(184),a=function(){function t(t,e){var i=this;this._targetMarker=null,this.calculateCurrentPosition=function(t){var e=i.$grid.$grid.getBoundingClientRect(),n=e.right,o=e.left,a=t;return a>n&&(a=n),a<o&&(a=o),a},this.$gantt=t,this.$grid=e}return t.prototype.init=function(){var t=this.$gantt.$services.getService("dnd");this._dnd=new t(this.$grid.$grid_scale,{updates_per_second:60}),this._scrollableGrid=new o.default({gantt:this.$gantt,grid:this.$grid,dnd:this._dnd,getCurrentX:this.calculateCurrentPosition}),this.attachEvents()},t.prototype.attachEvents=function(){var t=this;this._dnd.attachEvent("onBeforeDragStart",function(e,i){if(t._draggedCell=t.$gantt.utils.dom.closest(i.target,".gantt_grid_head_cell"),t._draggedCell){var n,o,a=t.$grid.$getConfig().columns,r=t._draggedCell.getAttribute("data-column-id");return a.map(function(t,e){t.name===r&&(n=t,o=e)}),!1!==t.$grid.callEvent("onBeforeColumnDragStart",[{draggedColumn:n,draggedIndex:o}])&&!(!t._draggedCell||!n||(t._gridConfig=t.$grid.$getConfig(),t._originAutoscroll=t.$gantt.config.autoscroll,t.$gantt.config.autoscroll=!1,0))}}),this._dnd.attachEvent("onAfterDragStart",function(e,i){t._dnd.config.column=t._draggedCell.getAttribute("data-column-id"),t._dnd.config.marker.innerHTML=t._draggedCell.outerHTML,t._dnd.config.marker.classList.add("gantt_column_drag_marker"),t._dnd.config.marker.style.height=t._gridConfig.scale_height+"px",t._dnd.config.marker.style.lineHeight=t._gridConfig.scale_height+"px",t._draggedCell.classList.add("gantt_grid_head_cell_dragged")}),this._dnd.attachEvent("onDragMove",function(e,i){if(t._draggedCell){t._dragX=i.clientX;var n=t.calculateCurrentPosition(i.clientX),o=t.findColumnsIndexes(),a=o.targetIndex,r=o.draggedIndex,s=t.$grid.$getConfig().columns;return!1===t.$grid.callEvent("onColumnDragMove",[{draggedColumn:s[r],targetColumn:s[a],draggedIndex:r,targetIndex:a}])?(t.cleanTargetMarker(),!1):(t.setMarkerPosition(n),t.drawTargetMarker(o),!0)}}),this._dnd.attachEvent("onDragEnd",function(){t._draggedCell&&(t.$gantt.config.autoscroll=t._originAutoscroll,t._draggedCell.classList.remove("gantt_grid_head_cell_dragged"),t.cleanTargetMarker(),t.reorderColumns())})},t.prototype.reorderColumns=function(){var t=this.findColumnsIndexes(),e=t.targetIndex,i=t.draggedIndex,n=this.$grid.$getConfig().columns,o=n[i],a=n[e];!1!==this.$grid.callEvent("onBeforeColumnReorder",[{draggedColumn:o,targetColumn:a,draggedIndex:i,targetIndex:e}])&&e!==i&&(n.splice(i,1),n.splice(e,0,o),this.$gantt.render(),this.$grid.callEvent("onAfterColumnReorder",[{draggedColumn:o,targetColumn:a,draggedIndex:i,targetIndex:e}]))},t.prototype.findColumnsIndexes=function(){var t,e,i,n,o,a=this._dnd.config.column,r=this.$grid.$getConfig().columns,s={startX:0,endX:0},c=0,l=r.length-1,u=function(t,e){return t<=e},d=function(t){return++t};this.$gantt.config.rtl&&(c=r.length-1,l=0,u=function(t,e){return t>=e},d=function(t){return--t});for(var h=this._dragX-this.$grid.$grid.getBoundingClientRect().left+this._scrollableGrid.getCorrection(),p=c;u(p,l)&&(void 0===t||void 0===e);p=d(p))r[p].hide||(s.startX=s.endX,s.endX+=r[p].width,h>=s.startX&&(h<=s.endX||!u(d(p),l))&&(t=p,i=s.startX,n=s.endX,o=(h-s.startX)/(s.endX-s.startX)),a===r[p].name&&(e=p));return{targetIndex:t,draggedIndex:e,xBefore:i,xAfter:n,columnRelativePos:o}},t.prototype.setMarkerPosition=function(t,e){void 0===e&&(e=10);var i=this._dnd.config.marker,n=this._dnd._obj.getBoundingClientRect();i.style.top=n.y+e+"px",i.style.left=t+"px"},t.prototype.drawTargetMarker=function(t){var e=t.targetIndex,i=t.draggedIndex,o=t.xBefore,a=t.xAfter,r=t.columnRelativePos;this._targetMarker||(this._targetMarker=document.createElement("div"),n.addClassName(this._targetMarker,"gantt_grid_target_marker"),this._targetMarker.style.display="none",this._targetMarker.style.height=this._gridConfig.scale_height+"px"),this._targetMarker.parentNode||this.$grid.$grid_scale.appendChild(this._targetMarker),this._targetMarker.style.left=(e>i?a:e<i?o:r>.5?a:o)+"px",this._targetMarker.style.display="block"},t.prototype.cleanTargetMarker=function(){this._targetMarker&&this._targetMarker.parentNode&&this.$grid.$grid_scale.removeChild(this._targetMarker),this._targetMarker=null},t}();e.ColumnsGridDnd=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(185);e.default=n.ColumnsGridDnd},function(t,e,i){var n=i(1);t.exports=function(t,e){var i={column_before_start:t.bind(function(t,i,o){var a=e.$getConfig();if(!n.locateAttribute(o,a.grid_resizer_column_attribute))return!1;var r=this.locate(o,a.grid_resizer_column_attribute),s=e.getGridColumns()[r];return!1!==e.callEvent("onColumnResizeStart",[r,s])&&void 0},t),column_after_start:t.bind(function(t,i,n){var o=e.$getConfig(),a=this.locate(n,o.grid_resizer_column_attribute);t.config.marker.innerHTML="",t.config.marker.className+=" gantt_grid_resize_area",t.config.marker.style.height=e.$grid.offsetHeight+"px",t.config.marker.style.top="0px",t.config.drag_index=a},t),column_drag_move:t.bind(function(i,o,a){var r=e.$getConfig(),s=i.config,c=e.getGridColumns(),l=parseInt(s.drag_index,10),u=c[l],d=n.getNodePosition(e.$grid_scale),h=parseInt(s.marker.style.left,10),p=u.min_width?u.min_width:r.min_grid_column_width,f=e.$grid_data.offsetWidth,g=0,m=0;r.rtl?h=d.x+d.width-1-h:h-=d.x-1;for(var v=0;v<l;v++)p+=c[v].width,g+=c[v].width;if(h<p&&(h=p),r.keep_grid_width){var b=0;for(v=l+1;v<c.length;v++)c[v].min_width?f-=c[v].min_width:r.min_grid_column_width&&(f-=r.min_grid_column_width),c[v].max_width&&!1!==b?b+=c[v].max_width:b=!1;b&&(p=e.$grid_data.offsetWidth-b),h<p&&(h=p),h>f&&(h=f)}else if(!e.$config.scrollable){var _=h,w=0;for(v=l+1;v<c.length;v++)w+=c[v].width;var y=t.$container.offsetWidth,k=e.$parent.$parent;k&&"y"==k.$config.mode&&(y=Math.min(y,k.$lastSize.x-(k.$cells.length-1))),_+w>y&&(h=y-w)}return s.left=h-1,m=Math.abs(h-g),u.max_width&&m>u.max_width&&(m=u.max_width),r.rtl&&(g=d.width-g+2-m),s.marker.style.top=d.y+"px",s.marker.style.left=d.x-1+g+"px",s.marker.style.width=m+"px",e.callEvent("onColumnResize",[l,c[l],m-1]),!0},t),column_drag_end:t.bind(function(i,n,o){for(var a=e.$getConfig(),r=e.getGridColumns(),s=0,c=parseInt(i.config.drag_index,10),l=r[c],u=0;u<c;u++)s+=r[u].width;var d=l.min_width&&i.config.left-s<l.min_width?l.min_width:i.config.left-s;if(l.max_width&&l.max_width<d&&(d=l.max_width),!1!==e.callEvent("onColumnResizeEnd",[c,l,d])&&l.width!=d){if(l.width=d,a.keep_grid_width)s=a.grid_width;else{u=c;for(var h=r.length;u<h;u++)s+=r[u].width}e.callEvent("onColumnResizeComplete",[r,e._setColumnsWidth(s,c)]),e.$config.scrollable||t.$layout._syncCellSizes(e.$config.group,a.grid_width),this.render()}},t)};return{init:function(){var n=t.$services.getService("dnd"),o=e.$getConfig(),a=new n(e.$grid_scale,{updates_per_second:60});t.defined(o.dnd_sensitivity)&&(a.config.sensitivity=o.dnd_sensitivity),a.attachEvent("onBeforeDragStart",function(t,e){return i.column_before_start(a,t,e)}),a.attachEvent("onAfterDragStart",function(t,e){return i.column_after_start(a,t,e)}),a.attachEvent("onDragMove",function(t,e){return i.column_drag_move(a,t,e)}),a.attachEvent("onDragEnd",function(t,e){return i.column_drag_end(a,t,e)})},doOnRender:function(){for(var i=e.getGridColumns(),n=e.$getConfig(),o=0,a=e.$config.width,r=n.scale_height,s=0;s<i.length;s++){var c,l=i[s];if(o+=l.width,c=n.rtl?a-o:o,l.resize){var u=document.createElement("div");u.className="gantt_grid_column_resize_wrap",u.style.top="0px",u.style.height=r+"px",u.innerHTML="<div class='gantt_grid_column_resize'></div>",u.setAttribute(n.grid_resizer_column_attribute,s),u.setAttribute("column_index",s),t._waiAria.gridSeparatorAttr(u),e.$grid_scale.appendChild(u),u.style.left=Math.max(0,c)+"px"}}}}}},function(t,e,i){var n=i(23);t.exports=function(t){i(183)(t),n.prototype.getGridColumns=function(){for(var t=this.$getConfig().columns,e=[],i=0;i<t.length;i++)t[i].hide||e.push(t[i]);return e}}},function(t,e,i){t.exports=function(t){var e=i(42),n={};t.attachEvent("onClearAll",function(){n={}});var o=e.prototype.hasChild;t.$data.tasksStore.hasChild=function(e){return!!o.apply(this,arguments)||!!this.exists(e)&&this.getItem(e)[t.config.branch_loading_property]},t.attachEvent("onTaskOpened",function(e){if(t.config.branch_loading&&t._load_url&&function(e){return!(!t.config.branch_loading||!t._load_url||n[e]||t.getChildren(e).length||!t.hasChild(e))}(e)){var i=t._load_url,o=(i=i.replace(/(\?|&)?parent_id=.+&?/,"")).indexOf("?")>=0?"&":"?",a=t.getScrollState().y||0,r={taskId:e,url:i+o+"parent_id="+encodeURIComponent(e)};if(!1===t.callEvent("onBeforeBranchLoading",[r]))return;t.load(r.url,this._load_type,function(){a&&t.scrollTo(null,a),t.callEvent("onAfterBranchLoading",[r])}),n[e]=!0}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.format=function(t){return e._getWBSCode(t.source)},this.canParse=function(t){return e._linkReg.test(t)},this.parse=function(t){if(!e.canParse(t))return null;var i=e._linkReg.exec(t)[0].trim();return{id:void 0,source:e._findSource(i)||null,target:null,type:e._gantt.config.links.finish_to_start,lag:0}},this._getWBSCode=function(t){var i=e._gantt.getTask(t);return e._gantt.getWBSCode(i)},this._findSource=function(t){var i=new RegExp("^[0-9.]+","i");if(i.exec(t)){var n=i.exec(t)[0],o=e._gantt.getTaskByWBSCode(n);if(o)return o.id}return null},this._linkReg=/^[0-9\.]+/,this._gantt=t}return t.create=function(e,i){return void 0===e&&(e=null),new t(i)},t}();e.default=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,i){var n=t.call(this,i)||this;return n.format=function(t){var e=n._getFormattedLinkType(n._getLinkTypeName(t.type)),i=n._getWBSCode(t.source),o=n._getLagString(t.lag);return t.type!==n._gantt.config.links.finish_to_start||t.lag?""+i+e+o:i},n.parse=function(t){if(!n.canParse(t))return null;var e=n._linkReg.exec(t)[0].trim(),i=t.replace(e,"").trim(),o=n._findTypeFormat(e),a=n._getLinkTypeNumber(o);return{id:void 0,source:n._findSource(e)||null,target:null,type:a,lag:n._parseLag(i)}},n._getLinkTypeName=function(t){var e="";for(e in n._config.labels)if(n._gantt.config.links[e].toLowerCase()===t.toLowerCase())break;return e},n._getLinkTypeNumber=function(t){var e="";for(e in n._gantt.config.links)if(e.toLowerCase()===t.toLowerCase())break;return n._gantt.config.links[e]},n._getFormattedLinkType=function(t){return n._config.labels[t]||""},n._getLagString=function(t){if(!t)return"";var e=n._config.durationFormatter.format(t);return t<0?e:"+"+e},n._findTypeFormat=function(t){var e=t.replace(/[^a-zA-Z]/gi,""),i="finish_to_start";for(var o in n._config.labels)n._config.labels[o].toLowerCase()===e.toLowerCase()&&(i=o);return i},n._parseLag=function(t){return t?n._config.durationFormatter.parse(t):0},n._config=n._defaultSettings(e),n._linkReg=/^[0-9\.]+[a-zA-Z]*/,n}return n(e,t),e.prototype._defaultSettings=function(t){void 0===t&&(t=null);var e={durationFormatter:this._gantt.ext.formatters.durationFormatter(),labels:{finish_to_finish:"FF",finish_to_start:"FS",start_to_start:"SS",start_to_finish:"SF"}};if(t&&t.durationFormatter&&(e.durationFormatter=t.durationFormatter),t&&t.labels)for(var i in t.labels)e.labels[i]=t.labels[i];return e},e.create=function(t,i){return void 0===t&&(t=null),new e(t,i)},e}(i(190).default);e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=null);var e=this;this.canParse=function(t){var i="",n=e._config.labels;for(var o in n){var a=n[o];i+=a.full+"|"+a.plural+"|"+a.short+"|"}return new RegExp("^([+-]? *[0-9.]{1,}\\s*("+i+")\\s*)*$").test((t||"").trim())},this.format=function(t){var i=e._config.format,n=e._config.short,o=e.transferUnits[e._config.store].toMinutes(t),a=i;if(a&&"auto"===a&&(a=e._selectFormatForValue(o)),a||(a="day"),"auto"===i&&!t)return"";for(var r="",s=(a=Array.isArray(a)?a:[a]).length-1,c=0;c<a.length;c++){var l=a[c],u=e._getValueFromMinutes(o,l,c===s);o-=e._getValueInMinutes(u,l),r+=e._getLabelForConvert(u,l,n)+(c===s?"":" ")}return r},this.parse=function(t){if(e.canParse(t)){for(var i="",n=!1,o=!1,a=0,r=(t=(t||"").trim()).length-1,s=/^[+\-0-9\. ]$/,c=0;c<t.length;c++){var l=t[c];s.test(l)?o=n:n=!0,(o||r===c)&&(o||(i+=l),a+=e._getNumericValue(i),n=o=!1,i=""),i+=l}if(a)return Math.round(e.transferUnits[e._config.store].fromMinutes(Math.ceil(a)))}return null},this._getValueInMinutes=function(t,i){return e.transferUnits[i]&&e.transferUnits[i].toMinutes?e.transferUnits[i].toMinutes(t):0},this._getLabelForConvert=function(t,i,n){var o=e._config.labels[i];return n?""+t+o.short:t+" "+(1!==t?o.plural:o.full)},this._getValueFromMinutes=function(t,i,n){if(e.transferUnits[i]&&e.transferUnits[i].fromMinutes){var o=e.transferUnits[i].fromMinutes(t);return n?parseFloat(o.toFixed(2)):parseInt(o.toString(),10)}return null},this._isUnitName=function(t,e){return e=e.toLowerCase(),t.full.toLowerCase()===e||t.plural.toLowerCase()===e||t.short.toLowerCase()===e},this._getUnitName=function(t){var i,n=e._config.labels,o=!1;for(i in n)if(e._isUnitName(n[i],t)){o=!0;break}return o?i:e._config.enter},this._config=this._defaultSettings(t),this.transferUnits={minute:{toMinutes:function(t){return t},fromMinutes:function(t){return t}},hour:{toMinutes:function(t){return t*e._config.minutesPerHour},fromMinutes:function(t){return t/e._config.minutesPerHour}},day:{toMinutes:function(t){return t*e._config.minutesPerHour*e._config.hoursPerDay},fromMinutes:function(t){return t/(e._config.minutesPerHour*e._config.hoursPerDay)}},week:{toMinutes:function(t){return t*e._config.minutesPerHour*e._config.hoursPerWeek},fromMinutes:function(t){return t/(e._config.minutesPerHour*e._config.hoursPerWeek)}},month:{toMinutes:function(t){return t*e._config.minutesPerHour*e._config.hoursPerDay*e._config.daysPerMonth},fromMinutes:function(t){return t/(e._config.minutesPerHour*e._config.hoursPerDay*e._config.daysPerMonth)}},year:{toMinutes:function(t){return t*e._config.minutesPerHour*e._config.hoursPerDay*e._config.daysPerYear},fromMinutes:function(t){return t/(e._config.minutesPerHour*e._config.hoursPerDay*e._config.daysPerYear)}}}}return t.prototype._defaultSettings=function(t){void 0===t&&(t=null);var e={enter:"day",store:"hour",format:"auto",short:!1,minutesPerHour:60,hoursPerDay:8,hoursPerWeek:40,daysPerMonth:30,daysPerYear:365,labels:{minute:{full:"minute",plural:"minutes",short:"min"},hour:{full:"hour",plural:"hours",short:"h"},day:{full:"day",plural:"days",short:"d"},week:{full:"week",plural:"weeks",short:"wk"},month:{full:"month",plural:"month",short:"mon"},year:{full:"year",plural:"years",short:"y"}}};if(t){for(var i in t)void 0!==t[i]&&"labels"!==i&&(e[i]=t[i]);if(t.labels)for(var i in t.labels)e.labels[i]=t.labels[i]}return e},t.prototype._selectFormatForValue=function(t){for(var e=["year","month","day","hour","minute"],i=[],n=0;n<e.length;n++)i[n]=Math.abs(this.transferUnits[e[n]].fromMinutes(t));for(n=0;n<i.length;n++)if(!(i[n]<1&&n<i.length-1))return e[n];return"day"},t.prototype._getNumericValue=function(t){var e=parseFloat(t.replace(/ /g,""))||0,i=this._getUnitName(t.replace(/[^a-zA-Z]/gi,""));return e&&i?this._getValueInMinutes(e,i):0},t.create=function(e){return void 0===e&&(e=null),new t(e)},t}();e.default=n},function(t,e,i){var n=i(192).default,o=i(191).default;t.exports=function(t){t.ext.formatters={durationFormatter:function(e){return e||(e={}),e.store||(e.store=t.config.duration_unit),e.enter||(e.enter=t.config.duration_unit),n.create(e,t)},linkFormatter:function(e){return o.create(e,t)}}}},function(t,e){t.exports=function(t){function e(e){return function(){return!t.config.auto_types||t.getTaskType(t.config.types.project)!=t.config.types.project||e.apply(this,arguments)}}function i(e){t.batchUpdate(function(){!function e(i){!function(e){var i=t.getTask(e=e.id||e),n=a(i);!1!==n&&o(i,n)}(i);var n=t.getParent(i);n!=t.config.root_id&&e(n)}(e)})}var n;function o(e,i){t.getState().group_mode||(e.type=i,t.updateTask(e.id))}function a(e){var i=t.config.types,n=t.hasChild(e.id),o=t.getTaskType(e.type);return n&&o===i.task?i.project:!n&&o===i.project&&i.task}var r,s,c=!0;function l(e){e!=t.config.root_id&&t.isTaskExists(e)&&i(e)}t.attachEvent("onParse",e(function(){c=!1,t.batchUpdate(function(){t.eachTask(function(t){var e=a(t);!1!==e&&o(t,e)})}),c=!0})),t.attachEvent("onAfterTaskAdd",e(function(t){c&&i(t)})),t.attachEvent("onAfterTaskUpdate",e(function(t){c&&i(t)})),t.attachEvent("onBeforeTaskDelete",e(function(e,i){return n=t.getParent(e),!0})),t.attachEvent("onAfterTaskDelete",e(function(t,e){l(n)})),t.attachEvent("onRowDragStart",e(function(e,i,n){return r=t.getParent(e),!0})),t.attachEvent("onRowDragEnd",e(function(t,e){l(r),i(t)})),t.attachEvent("onBeforeTaskMove",e(function(e,i,n){return s=t.getParent(e),!0})),t.attachEvent("onAfterTaskMove",e(function(t,e,n){document.querySelector(".gantt_drag_marker")||(l(s),i(t))}))}},function(t,e){t.exports=function(t){function e(e){return function(){return!t.config.placeholder_task||e.apply(this,arguments)}}function i(){var e=t.getTaskBy("type",t.config.types.placeholder);if(!e.length||!t.isTaskExists(e[0].id)){var i={unscheduled:!0,type:t.config.types.placeholder,duration:0,text:t.locale.labels.new_task};if(!1===t.callEvent("onTaskCreated",[i]))return;t.addTask(i)}}function n(e){var i=t.getTask(e);i.type==t.config.types.placeholder&&(i.start_date&&i.end_date&&i.unscheduled&&(i.unscheduled=!1),t.batchUpdate(function(){var e=t.copy(i);t.silent(function(){t.deleteTask(i.id)}),delete e["!nativeeditor_status"],e.type=t.config.types.task,e.id=t.uid(),t.addTask(e)}))}t.config.types.placeholder="placeholder",t.attachEvent("onDataProcessorReady",e(function(i){i&&!i._silencedPlaceholder&&(i._silencedPlaceholder=!0,i.attachEvent("onBeforeUpdate",e(function(e,n,o){return o.type!=t.config.types.placeholder||(i.setUpdated(e,!1),!1)})))}));var o=!1;function a(e){return!(!t.config.types.placeholder||!t.isTaskExists(e)||t.getTask(e).type!=t.config.types.placeholder)}function r(t){return!(!a(t.source)&&!a(t.target))}t.attachEvent("onGanttReady",function(){o||(o=!0,t.attachEvent("onAfterTaskUpdate",e(n)),t.attachEvent("onAfterTaskAdd",e(function(e,n){n.type!=t.config.types.placeholder&&(t.getTaskBy("type",t.config.types.placeholder).forEach(function(e){t.silent(function(){t.isTaskExists(e.id)&&t.deleteTask(e.id)})}),i())})),t.attachEvent("onParse",e(i)))}),t.attachEvent("onLinkValidation",function(t){return!r(t)}),t.attachEvent("onBeforeLinkAdd",function(t,e){return!r(e)}),t.attachEvent("onBeforeUndoStack",function(e){for(var i=0;i<e.commands.length;i++){var n=e.commands[i];"task"===n.entity&&n.value.type===t.config.types.placeholder&&(e.commands.splice(i,1),i--)}return!0})}},function(t,e,i){var n=i(3);t.exports=function(t){var e=function(t){var e={};t.$data.tasksStore.attachEvent("onStoreUpdated",function(){e={}});var i=String(Math.random());function o(t){return null===t?i+String(t):String(t)}function a(i,a){var r,s=a.join("_")+"_"+i,c={};return n.forEach(a,function(t){c[o(t)]=!0}),e[s]?r=e[s]:(r=e[s]=[],t.eachTask(function(e){var a;e.type!=t.config.types.project&&i in e&&(a=n.isArray(e[i])?e[i]:[e[i]],n.forEach(a,function(t){(c[o(t)]||t&&c[o(t.resource_id)])&&r.push(e)}))})),r}function r(e,i,n){var o=t.config.resource_property,a=[];if(t.getDatastore("task").exists(i)){var r=t.getTask(i);a=r[o]||[]}Array.isArray(a)||(a=[a]);for(var s=0;s<a.length;s++)a[s].resource_id==e&&n.push({task_id:r.id,resource_id:a[s].resource_id,value:a[s].value})}return{filterTasks:function(e,i){return"function"==typeof e?function(e){var i=[];return t.eachTask(function(t){e(t)&&i.push(t)}),i}(e):n.isArray(i)?a(e,i):a(e,[i])},getResourceAssignments:function(e,i){var n=[],o=t.config.resource_property;return void 0!==i?r(e,i,n):t.getTaskBy(o,e).forEach(function(t){r(e,t.id,n)}),n}}}(t);t.getTaskBy=e.filterTasks,t.getResourceAssignments=e.getResourceAssignments,t.config.resource_property="owner_id",t.config.resource_store="resource",t.config.resource_render_empty_cells=!1,t.templates.histogram_cell_class=function(t,e,i,n){},t.templates.histogram_cell_label=function(t,e,i,n){return n.length+"/3"},t.templates.histogram_cell_allocated=function(t,e,i,n){return n.length/3},t.templates.histogram_cell_capacity=function(t,e,i,n){return 0},t.templates.resource_cell_class=function(t,e,i,n){return n.length<=1?"gantt_resource_marker_ok":"gantt_resource_marker_overtime"},t.templates.resource_cell_value=function(t,e,i,n){return 8*n.length}}},function(t,e){t.exports=function(t){var e=function(t){return{_needRecalc:!0,reset:function(){this._needRecalc=!0},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc},_isGroupSort:function(){return!!t.getState().group_mode},_getWBSCode:function(t){return t?(this._isRecalcNeeded()&&this._calcWBS(),t.$virtual?"":this._isGroupSort()?t.$wbs||"":(t.$wbs||(this.reset(),this._calcWBS()),t.$wbs)):""},_setWBSCode:function(t,e){t.$wbs=e},getWBSCode:function(t){return this._getWBSCode(t)},getByWBSCode:function(e){for(var i=e.split("."),n=t.config.root_id,o=0;o<i.length;o++){var a=t.getChildren(n),r=1*i[o]-1;if(!t.isTaskExists(a[r]))return null;n=a[r]}return t.isTaskExists(n)?t.getTask(n):null},_calcWBS:function(){if(this._isRecalcNeeded()){var e=!0;t.eachTask(function(i){if(e)return e=!1,void this._setWBSCode(i,"1");var n=t.getPrevSibling(i.id);if(null!==n){var o=t.getTask(n).$wbs;o&&((o=o.split("."))[o.length-1]++,this._setWBSCode(i,o.join(".")))}else{var a=t.getParent(i.id);this._setWBSCode(i,t.getTask(a).$wbs+".1")}},t.config.root_id,this),this._needRecalc=!1}}}}(t);function i(){return e.reset(),!0}t.getWBSCode=function(t){return e.getWBSCode(t)},t.getTaskByWBSCode=function(t){return e.getByWBSCode(t)},t.attachEvent("onAfterTaskMove",i),t.attachEvent("onBeforeParse",i),t.attachEvent("onAfterTaskDelete",i),t.attachEvent("onAfterTaskAdd",i),t.attachEvent("onAfterSort",i)}},function(t,e,i){var n=i(11);t.exports=function(t){t.batchUpdate=function(t){var e={},i=!1;function o(t,i){i="function"==typeof i?i:function(){},e[t]||(e[t]=this[t],this[t]=i)}function a(t){e[t]&&(this[t]=e[t],e[t]=null)}function r(){for(var t in e)a.call(this,t)}function s(t){try{t()}catch(t){n.console.error(t)}}return t.$services.getService("state").registerProvider("batchUpdate",function(){return{batch_update:i}},!1),function(t,e){if(i)s(t);else{var n,a=this._dp&&"off"!=this._dp.updateMode;a&&(n=this._dp.updateMode,this._dp.setUpdateMode("off"));var c={},l={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(t){c[t.id]=t}};for(var u in(function(t){for(var e in t)o.call(this,e,t[e])}).call(this,l),i=!0,this.callEvent("onBeforeBatchUpdate",[]),s(t),this.callEvent("onAfterBatchUpdate",[]),r.call(this),c)this.resetProjectDates(c[u]);i=!1,e||this.render(),a&&(this._dp.setUpdateMode(n),this._dp.setGanttMode("task"),this._dp.sendData(),this._dp.setGanttMode("link"),this._dp.sendData())}}}(t)}},function(t,e,i){t.exports=function(t){t.ext||(t.ext={});for(var e=[i(198),i(197),i(196),i(195),i(194),i(193)],n=0;n<e.length;n++)e[n]&&e[n](t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(){var t=this;this.clear=function(){t._storage={}},this.storeItem=function(e){t._storage[e.id]=n.copy(e)},this.getStoredItem=function(e){return t._storage[e]||null},this._storage={}}return t.create=function(){return new t},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.getUserData=function(t,e){return this.userdata||(this.userdata={}),this.userdata[t]&&this.userdata[t][e]?this.userdata[t][e]:""},t.setUserData=function(t,e,i){this.userdata||(this.userdata={}),this.userdata[t]||(this.userdata[t]={}),this.userdata[t][e]=i},t._change_id=function(t,e){"task"!==this._dp._ganttMode?this.changeLinkId(t,e):this.changeTaskId(t,e)},t._row_style=function(e,i){"task"===this._dp._ganttMode&&t.isTaskExists(e)&&(t.getTask(e).$dataprocessor_class=i,t.refreshTask(e))},t._delete_task=function(t,e){},t._sendTaskOrder=function(t,e){e.$drop_target&&(this._dp.setGanttMode("task"),this.getTask(t).target=e.$drop_target,this._dp.setUpdated(t,!0,"order"),delete this.getTask(t).$drop_target)},t.setDp=function(){this._dp=e},t.setDp()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=function(){function t(t,e){this.$gantt=t,this.$dp=e,this._dataProcessorHandlers=[]}return t.prototype.attach=function(){var t=this.$dp,e=this.$gantt,n=i(38),o={};function a(i){for(var n=t.updatedRows.slice(),o=!1,a=0;a<n.length&&!t._in_progress[i];a++)n[a]===i&&("inserted"===e.getUserData(i,"!nativeeditor_status")&&(o=!0),t.setUpdated(i,!1));return o}this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskAdd",function(i,n){e.isTaskExists(i)&&(t.setGanttMode("tasks"),t.setUpdated(i,!0,"inserted"))})),this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskUpdate",function(i,n){e.isTaskExists(i)&&(t.setGanttMode("tasks"),t.setUpdated(i,!0),e._sendTaskOrder&&e._sendTaskOrder(i,n))})),this._dataProcessorHandlers.push(e.attachEvent("onBeforeTaskDelete",function(t,i){return!e.config.cascade_delete||(o[t]={tasks:n.getSubtreeTasks(e,t),links:n.getSubtreeLinks(e,t)},!0)})),this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskDelete",function(i,n){if(t.setGanttMode("tasks"),!a(i)){if(e.config.cascade_delete&&o[i]){var r=t.updateMode;t.setUpdateMode("off");var s=o[i];for(var c in s.tasks)a(c)||(t.storeItem(s.tasks[c]),t.setUpdated(c,!0,"deleted"));for(var c in t.setGanttMode("links"),s.links)a(c)||(t.storeItem(s.links[c]),t.setUpdated(c,!0,"deleted"));o[i]=null,"off"!==r&&t.sendAllData(),t.setGanttMode("tasks"),t.setUpdateMode(r)}t.storeItem(n),t.setUpdated(i,!0,"deleted"),"off"===t.updateMode||t._tSend||t.sendAllData()}})),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkUpdate",function(i,n){e.isLinkExists(i)&&(t.setGanttMode("links"),t.setUpdated(i,!0))})),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkAdd",function(i,n){e.isLinkExists(i)&&(t.setGanttMode("links"),t.setUpdated(i,!0,"inserted"))})),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkDelete",function(e,i){t.setGanttMode("links"),!a(e)&&(t.storeItem(i),t.setUpdated(e,!0,"deleted"))})),this._dataProcessorHandlers.push(e.attachEvent("onRowDragEnd",function(t,i){e._sendTaskOrder(t,e.getTask(t))}));var r=null,s=null;this._dataProcessorHandlers.push(e.attachEvent("onTaskIdChange",function(i,n){if(t._waitMode){var o=e.getChildren(n);if(o.length){r=r||{};for(var a=0;a<o.length;a++){var c=this.getTask(o[a]);r[c.id]=c}}var l=function(t){var e=[];return t.$source&&(e=e.concat(t.$source)),t.$target&&(e=e.concat(t.$target)),e}(this.getTask(n));if(l.length)for(s=s||{},a=0;a<l.length;a++){var u=this.getLink(l[a]);s[u.id]=u}}})),t.attachEvent("onAfterUpdateFinish",function(){(r||s)&&(e.batchUpdate(function(){for(var t in r)e.updateTask(r[t].id);for(var t in s)e.updateLink(s[t].id);r=null,s=null}),e._dp.setGanttMode(r?"tasks":"links"))}),t.attachEvent("onBeforeDataSending",function(){if("CUSTOM"===this._tMode)return!0;var t=this._serverProcessor;if("REST-JSON"===this._tMode||"REST"===this._tMode){var i=this._ganttMode;t=t.substring(0,t.indexOf("?")>-1?t.indexOf("?"):t.length),this.serverProcessor=t+("/"===t.slice(-1)?"":"/")+i}else{var n=this._ganttMode+"s";this.serverProcessor=t+e.ajax.urlSeparator(t)+"gantt_mode="+n}return!0}),t.attachEvent("insertCallback",function(t,i,n,o){var a=t.data||e.xml._xmlNodeToJSON(t.firstChild),r={add:e.addTask,isExist:e.isTaskExists};"links"===o&&(r.add=e.addLink,r.isExist=e.isLinkExists),r.isExist.call(e,i)||(a.id=i,r.add.call(e,a))}),t.attachEvent("updateCallback",function(t,i){var n=t.data||e.xml._xmlNodeToJSON(t.firstChild);if(e.isTaskExists(i)){var o=e.getTask(i);for(var a in n){var r=n[a];switch(a){case"id":continue;case"start_date":case"end_date":r=e.defined(e.templates.xml_date)?e.templates.xml_date(r):e.templates.parse_date(r);break;case"duration":o.end_date=e.calculateEndDate({start_date:o.start_date,duration:r,task:o})}o[a]=r}e.updateTask(i),e.refreshData()}}),t.attachEvent("deleteCallback",function(t,i,n,o){var a={delete:e.deleteTask,isExist:e.isTaskExists};"links"===o&&(a.delete=e.deleteLink,a.isExist=e.isLinkExists),a.isExist.call(e,i)&&a.delete.call(e,i)})},t.prototype.detach=function(){var t=this;n.forEach(this._dataProcessorHandlers,function(e){t.$gantt.detachEvent(e)}),this._dataProcessorHandlers=[]},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(3),a=i(0),r=i(202),s=i(201),c=i(200);e.createDataProcessor=function(t){var e,i;t instanceof Function?e=t:t.hasOwnProperty("router")?e=t.router:t.hasOwnProperty("link")&&t.hasOwnProperty("task")&&(e=t),i=e?"CUSTOM":t.mode||"REST-JSON";var n=new l(t.url);return n.init(this),n.setTransactionMode({mode:i,router:e},t.batchUpdate),n};var l=function(){function t(t){this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._headers=null,this._payload=null,this._postDelim="_",this._waitMode=0,this._in_progress={},this._storage=c.default.create(),this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),n(this)}return t.prototype.setTransactionMode=function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,a.defined(t.headers)&&(this._headers=t.headers),a.defined(t.payload)&&(this._payload=t.payload),this._tSend=!!e):(this._tMode=t,this._tSend=e),"REST"===this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"===this._tMode||"REST-JSON"===this._tMode?(this._tSend=!1,this._endnm=!0,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),"CUSTOM"===this._tMode&&(this._tSend=!1,this._endnm=!0,this._router=t.router)},t.prototype.escape=function(t){return this._utf?encodeURIComponent(t):escape(t)},t.prototype.enableUTFencoding=function(t){this._utf=!!t},t.prototype.setDataColumns=function(t){this._columns="string"==typeof t?t.split(","):t},t.prototype.getSyncState=function(){return!this.updatedRows.length},t.prototype.enableDataNames=function(t){this._endnm=!!t},t.prototype.enablePartialDataSend=function(t){this._changed=!!t},t.prototype.setUpdateMode=function(t,e){this.autoUpdate="cell"===t,this.updateMode=t,this.dnd=e},t.prototype.ignore=function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},t.prototype.setUpdated=function(t,e,i){if(!this._silent_mode){var n=this.findRow(t);i=i||"updated";var o=this.$gantt.getUserData(t,this.action_param);o&&"updated"===i&&(i=o),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.$gantt.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.$gantt.setUserData(t,this.action_param,"")),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},t.prototype.markRow=function(t,e,i){var n="",o=this.is_invalid(t);if(o&&(n=this.styles[o],e=!0),this.callEvent("onRowMark",[t,e,i,o])&&(this.$gantt[this._methods[0]](t,n=this.styles[e?i:"clear"]+" "+n),o&&o.details)){n+=this.styles[o+"_cell"];for(var a=0;a<o.details.length;a++)o.details[a]&&this.$gantt[this._methods[1]](t,a,n)}},t.prototype.getActionByState=function(t){return"inserted"===t?"create":"updated"===t?"update":"deleted"===t?"delete":"update"},t.prototype.getState=function(t){return this.$gantt.getUserData(t,this.action_param)},t.prototype.is_invalid=function(t){return this._invalid[t]},t.prototype.set_invalid=function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},t.prototype.checkBeforeUpdate=function(t){return!0},t.prototype.sendData=function(t){return this.$gantt.editStop&&this.$gantt.editStop(),void 0===t||this._tSend?this.sendAllData():!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t))},t.prototype.serialize=function(t,e){if(this._serializeAsJson)return this._serializeAsJSON(t);if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var o in t)t.hasOwnProperty(o)&&(i.push(this.serialize_one(t[o],o+this._postDelim)),n.push(o));return i.push("ids="+this.escape(n.join(","))),this.$gantt.security_key&&i.push("dhx_security="+this.$gantt.security_key),i.join("&")},t.prototype.serialize_one=function(t,e){if("string"==typeof t)return t;var i=[],n="";for(var o in t)if(t.hasOwnProperty(o)){if(("id"===o||o==this.action_param)&&"REST"===this._tMode)continue;n="string"==typeof t[o]||"number"==typeof t[o]?t[o]:JSON.stringify(t[o]),i.push(this.escape((e||"")+o)+"="+this.escape(n))}return i.join("&")},t.prototype.sendAllData=function(){if(this.updatedRows.length){this.messages=[];var t=!0;if(this._forEachUpdatedRow(function(e){t=t&&this.checkBeforeUpdate(e)}),!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(t){if(!this._in_progress[t]){if(this.is_invalid(t))return;this._beforeSendData(this._getRowData(t),t)}})}},t.prototype.findRow=function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},t.prototype.defineAction=function(t,e){this._uActions||(this._uActions={}),this._uActions[t]=e},t.prototype.afterUpdateCallback=function(t,e,i,n,o){if(this.$gantt){this.setGanttMode(o);var a=t,r="error"!==i&&"invalid"!==i;if(r||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[a];"wait"!==this._in_progress[a]&&this.setUpdated(t,!1);var s=t;switch(i){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.$gantt[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.$gantt.setUserData(t,this.action_param,"true_deleted"),this.$gantt[this._methods[3]](t),delete this._in_progress[a],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!==this._in_progress[a]?(r&&this.$gantt.setUserData(t,this.action_param,""),delete this._in_progress[a]):(delete this._in_progress[a],this.setUpdated(e,!0,this.$gantt.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[s,i,e,n])}},t.prototype.afterUpdate=function(t,e,i){var n;n=3===arguments.length?arguments[1]:arguments[4];var o=this.getGanttMode(),a=n.filePath||n.url;o="REST"!==this._tMode&&"REST-JSON"!==this._tMode?-1!==a.indexOf("gantt_mode=links")?"link":"task":a.indexOf("/link")>a.indexOf("/task")?"link":"task",this.setGanttMode(o);var r,s=this.$gantt.ajax;try{r=JSON.parse(e.xmlDoc.responseText)}catch(t){e.xmlDoc.responseText.length||(r={})}if(r){var c=r.action||this.getState(i)||"updated",l=r.sid||i[0],u=r.tid||i[0];return t.afterUpdateCallback(l,u,c,r,o),t.finalizeUpdate(),void this.setGanttMode(o)}var d=s.xmltop("data",e.xmlDoc);if(!d)return this.cleanUpdate(i);var h=s.xpath("//data/action",d);if(!h.length)return this.cleanUpdate(i);for(var p=0;p<h.length;p++){var f=h[p];c=f.getAttribute("type"),l=f.getAttribute("sid"),u=f.getAttribute("tid"),t.afterUpdateCallback(l,u,c,f,o)}t.finalizeUpdate()},t.prototype.cleanUpdate=function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},t.prototype.finalizeUpdate=function(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},t.prototype.init=function(t){if(!this._initialized){this.$gantt=t,this.$gantt._dp_init&&this.$gantt._dp_init(this),this._setDefaultTransactionMode(),this.styles={updated:"gantt_updated",order:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},this._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],s.default(this.$gantt,this);var e=new r.default(this.$gantt,this);e.attach(),this.attachEvent("onDestroy",function(){delete this.setGanttMode,delete this._getRowData,delete this.$gantt._dp,delete this.$gantt._change_id,delete this.$gantt._row_style,delete this.$gantt._delete_task,delete this.$gantt._sendTaskOrder,delete this.$gantt,e.detach()}),this.$gantt.callEvent("onDataProcessorReady",[this]),this._initialized=!0}},t.prototype.setOnAfterUpdate=function(t){this.attachEvent("onAfterUpdate",t)},t.prototype.setOnBeforeUpdateHandler=function(t){this.attachEvent("onBeforeDataSending",t)},t.prototype.setAutoUpdate=function(t,e){var i=this;t=t||2e3,this._user=e||(new Date).valueOf(),this._needUpdate=!1,this._updateBusy=!1,this.attachEvent("onAfterUpdate",this.afterAutoUpdate),this.attachEvent("onFullSync",this.fullSync),setInterval(function(){i.loadUpdate()},t)},t.prototype.afterAutoUpdate=function(t,e,i,n){return"collision"!==e||(this._needUpdate=!0,!1)},t.prototype.fullSync=function(){return this._needUpdate&&(this._needUpdate=!1,this.loadUpdate()),!0},t.prototype.getUpdates=function(t,e){var i=this.$gantt.ajax;if(this._updateBusy)return!1;this._updateBusy=!0,i.get(t,e)},t.prototype.loadUpdate=function(){var t=this,e=this.$gantt.ajax,i=this.$gantt.getUserData(0,"version"),n=this.serverProcessor+e.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+i].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,function(i){var n=e.xpath("//userdata",i);t.obj.setUserData(0,"version",t._getXmlNodeValue(n[0]));var o=e.xpath("//update",i);if(o.length){t._silent_mode=!0;for(var a=0;a<o.length;a++){var r=o[a].getAttribute("status"),s=o[a].getAttribute("id"),c=o[a].getAttribute("parent");switch(r){case"inserted":t.callEvent("insertCallback",[o[a],s,c]);break;case"updated":t.callEvent("updateCallback",[o[a],s,c]);break;case"deleted":t.callEvent("deleteCallback",[o[a],s,c])}}t._silent_mode=!1}t._updateBusy=!1})},t.prototype.destructor=function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._storage.clear(),this._storage=null,this._headers=null,this._payload=null,delete this._initialized},t.prototype.setGanttMode=function(t){"tasks"===t?t="task":"links"===t&&(t="link");var e=this.modes||{},i=this.getGanttMode();i&&(e[i]={_in_progress:this._in_progress,_invalid:this._invalid,_storage:this._storage,updatedRows:this.updatedRows});var n=e[t];n||(n=e[t]={_in_progress:{},_invalid:{},_storage:c.default.create(),updatedRows:[]}),this._in_progress=n._in_progress,this._invalid=n._invalid,this._storage=n._storage,this.updatedRows=n.updatedRows,this.modes=e,this._ganttMode=t},t.prototype.getGanttMode=function(){return this._ganttMode},t.prototype.storeItem=function(t){this._storage.storeItem(t)},t.prototype.url=function(t){this.serverProcessor=this._serverProcessor=t},t.prototype._beforeSendData=function(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)},t.prototype._serializeAsJSON=function(t){if("string"==typeof t)return t;var e=a.copy(t);return"REST-JSON"===this._tMode&&(delete e.id,delete e[this.action_param]),JSON.stringify(e)},t.prototype._applyPayload=function(t){var e=this.$gantt.ajax;if(this._payload)for(var i in this._payload)t=t+e.urlSeparator(t)+this.escape(i)+"="+this.escape(this._payload[i]);return t},t.prototype._cleanupArgumentsBeforeSend=function(t){var e;if(void 0===t[this.action_param])for(var i in e={},t)e[i]=this._cleanupArgumentsBeforeSend(t[i]);else e=this._cleanupItemBeforeSend(t);return e},t.prototype._cleanupItemBeforeSend=function(t){var e=null;return t&&("deleted"===t[this.action_param]?((e={}).id=t.id,e[this.action_param]=t[this.action_param]):e=t),e},t.prototype._sendData=function(t,e){var i=this;if(t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var n=this.$gantt.ajax;if("CUSTOM"!==this._tMode){var o;o={callback:function(n){var o=[];if(e)o.push(e);else if(t)for(var a in t)o.push(a);return i.afterUpdate(i,n,o)},headers:this._headers};var a,r=this.serverProcessor+(this._user?n.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.$gantt.getUserData(0,"version")].join("&"):""),s=this._applyPayload(r);switch(this._tMode){case"GET":a=this._cleanupArgumentsBeforeSend(t),o.url=s+n.urlSeparator(s)+this.serialize(a,e),o.method="GET";break;case"POST":a=this._cleanupArgumentsBeforeSend(t),o.url=s,o.method="POST",o.data=this.serialize(a,e);break;case"JSON":a={};var c=this._cleanupItemBeforeSend(t);for(var l in c)l!==this.action_param&&"id"!==l&&"gr_id"!==l&&(a[l]=c[l]);o.url=s,o.method="POST",o.data=JSON.stringify({id:e,action:t[this.action_param],data:a});break;case"REST":case"REST-JSON":switch(s=r.replace(/(&|\?)editing=true/,""),a="",this.getState(e)){case"inserted":o.method="POST",o.data=this.serialize(t,e);break;case"deleted":o.method="DELETE",s=s+("/"===s.slice(-1)?"":"/")+e;break;default:o.method="PUT",o.data=this.serialize(t,e),s=s+("/"===s.slice(-1)?"":"/")+e}o.url=this._applyPayload(s)}return this._waitMode++,n.query(o)}var u=this.getState(e),d=this.getActionByState(u),h=this.getGanttMode(),p=function(t){var n=u||"updated",o=e,a=e;t&&(n=t.action||u,o=t.sid||o,a=t.id||t.tid||a),i.afterUpdateCallback(o,a,n,t,h)},f=void 0;if(this._router instanceof Function)f=this._router(h,d,t,e);else if(this._router[h]instanceof Function)f=this._router[h](d,t,e);else switch(u){case"inserted":f=this._router[h].create(t);break;case"deleted":f=this._router[h].delete(e);break;default:f=this._router[h].update(t,e)}if(f){if(!f.then&&void 0===f.id&&void 0===f.tid&&void 0===f.action)throw new Error("Incorrect router return value. A Promise or a response object is expected");f.then?f.then(p).catch(function(t){p(t&&t.action?t:{action:"error",value:t})}):p(f)}else p(null)}},t.prototype._forEachUpdatedRow=function(t){for(var e=this.updatedRows.slice(),i=0;i<e.length;i++){var n=e[i];this.$gantt.getUserData(n,this.action_param)&&t.call(this,n)}},t.prototype._setDefaultTransactionMode=function(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!==this.serverProcessor.indexOf("?")?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)},t.prototype._getXmlNodeValue=function(t){return t.firstChild?t.firstChild.nodeValue:""},t.prototype._getAllData=function(){var t={},e=!1;return this._forEachUpdatedRow(function(i){if(!this._in_progress[i]&&!this.is_invalid(i)){var n=this._getRowData(i);this.callEvent("onBeforeUpdate",[i,this.getState(i),n])&&(t[i]=n,e=!0,this._in_progress[i]=(new Date).valueOf())}}),e?t:null},t.prototype._prepareDataItem=function(t){var e={};for(var i in t)if("$"!==i.substr(0,1)){var n=t[i];e[i]=o.isDate(n)?this.$gantt.defined(this.$gantt.templates.xml_format)?this.$gantt.templates.xml_format(n):this.$gantt.templates.format_date(n):null===n?"":n}return e[this.action_param]=this.$gantt.getUserData(t.id,this.action_param),e},t.prototype.getStoredItem=function(t){return this._storage.getStoredItem(t)},t.prototype._getRowData=function(t){var e,i=this.$gantt;return"task"===this.getGanttMode()?i.isTaskExists(t)&&(e=this.$gantt.getTask(t)):i.isLinkExists(t)&&(e=this.$gantt.getLink(t)),e||(e=this.getStoredItem(t)),e||(e={id:t}),this._prepareDataItem(e)},t}();e.DataProcessor=l},function(t,e,i){var n=i(203);t.exports={DEPRECATED_api:function(t){return new n.DataProcessor(t)},createDataProcessor:n.createDataProcessor,getDataProcessorModes:n.getAvailableModes}},function(t,e,i){var n=i(10);t.exports={bindDataStore:function(t,e){var i=e.getDatastore(t),o=function(t,e){var n=e.getLayers(),o=i.getItem(t);if(o&&i.isVisible(t))for(var a=0;a<n.length;a++)n[a].render_item(o)},a=function(t){for(var e=t.getLayers(),n=0;n<e.length;n++)e[n].clear();var o=i.getVisibleItems(),a={};for(n=0;n<e.length;n++){var r=e[n],s=o;if(r.get_visible_range){var c=r.get_visible_range(i),l=c.start+" - "+c.end;a[l]?s=a[l]:(s=i.getIndexRange(c.start,c.end),a[l]=s)}e[n].render_items(s)}},r=function(t){if(t.update_items){var e;if(t.get_visible_range){var n=t.get_visible_range(i);e=i.getIndexRange(n.start,n.end)}else e=i.getVisibleItems();t.update_items(e)}};function s(t){return!!t.$services.getService("state").getState("batchUpdate").batch_update}i.attachEvent("onStoreUpdated",function(i,o,a){if(n(e))return!0;var s=e.$services.getService("layers").getDataRender(t);s&&(s.onUpdateRequest=function(t){r(t)})}),i.attachEvent("onStoreUpdated",function(t,n,o){s(e)||(t&&"move"!=o&&"delete"!=o?(i.callEvent("onBeforeRefreshItem",[n.id]),i.callEvent("onAfterRefreshItem",[n.id])):(i.callEvent("onBeforeRefreshAll",[]),i.callEvent("onAfterRefreshAll",[])))}),i.attachEvent("onAfterRefreshAll",function(){if(n(e))return!0;var i=e.$services.getService("layers").getDataRender(t);i&&a(i)}),i.attachEvent("onAfterRefreshItem",function(i){if(n(e))return!0;var a=e.$services.getService("layers").getDataRender(t);a&&o(i,a)}),i.attachEvent("onItemOpen",function(){if(n(e))return!0;e.render()}),i.attachEvent("onItemClose",function(){if(n(e))return!0;e.render()}),i.attachEvent("onIdChange",function(a,r){if(n(e))return!0;if(i.callEvent("onBeforeIdChange",[a,r]),!s(e)){var c=e.$services.getService("layers").getDataRender(t);!function(t,e,i,n){for(var o=0;o<t.length;o++)t[o].change_id(e,i)}(c.getLayers(),a,r,i.getItem(r)),o(r,c)}})}}},function(t,e){t.exports=function(t){var e=null,i=t._removeItemInner;function n(t){e=null,this.callEvent("onAfterUnselect",[t])}return t._removeItemInner=function(t){return e==t&&n.call(this,t),e&&this.eachItem&&this.eachItem(function(t){t.id==e&&n.call(this,t.id)},t),i.apply(this,arguments)},t.attachEvent("onIdChange",function(e,i){t.getSelectedId()==e&&t.silent(function(){t.unselect(e),t.select(i)})}),{select:function(t){if(t){if(e==t)return e;if(!this._skip_refresh&&!this.callEvent("onBeforeSelect",[t]))return!1;this.unselect(),e=t,this._skip_refresh||(this.refresh(t),this.callEvent("onAfterSelect",[t]))}return e},getSelectedId:function(){return e},isSelected:function(t){return t==e},unselect:function(t){(t=t||e)&&(e=null,this._skip_refresh||(this.refresh(t),n.call(this,t)))}}}},function(t,e,i){var n=i(0);t.exports=function(){return{getLinkCount:function(){return this.$data.linksStore.count()},getLink:function(t){return this.$data.linksStore.getItem(t)},getLinks:function(){return this.$data.linksStore.getItems()},isLinkExists:function(t){return this.$data.linksStore.exists(t)},addLink:function(t){return this.$data.linksStore.addItem(t)},updateLink:function(t,e){n.defined(e)||(e=this.getLink(t)),this.$data.linksStore.updateItem(t,e)},deleteLink:function(t){return this.$data.linksStore.removeItem(t)},changeLinkId:function(t,e){return this.$data.linksStore.changeId(t,e)}}}},function(t,e,i){var n=i(0);t.exports=function(){return{getTask:function(t){this.assert(t,"Invalid argument for gantt.getTask");var e=this.$data.tasksStore.getItem(t);return this.assert(e,"Task not found id="+t),e},getTaskByTime:function(t,e){var i=this.$data.tasksStore.getItems(),n=[];if(t||e){t=+t||-1/0,e=+e||1/0;for(var o=0;o<i.length;o++){var a=i[o];+a.start_date<e&&+a.end_date>t&&n.push(a)}}else n=i;return n},isTaskExists:function(t){return!(!this.$data||!this.$data.tasksStore)&&this.$data.tasksStore.exists(t)},updateTask:function(t,e){n.defined(e)||(e=this.getTask(t)),this.$data.tasksStore.updateItem(t,e),this.isTaskExists(t)&&this.refreshTask(t)},addTask:function(t,e,i){return n.defined(t.id)||(t.id=n.uid()),n.defined(e)||(e=this.getParent(t)||0),this.isTaskExists(e)||(e=this.config.root_id),this.setParent(t,e),this.$data.tasksStore.addItem(t,i,e)},deleteTask:function(t){return this.$data.tasksStore.removeItem(t)},getTaskCount:function(){return this.$data.tasksStore.count()},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible()},getTaskIndex:function(t){return this.$data.tasksStore.getBranchIndex(t)},getGlobalTaskIndex:function(t){return this.assert(t,"Invalid argument"),this.$data.tasksStore.getIndexById(t)},eachTask:function(t,e,i){return this.$data.tasksStore.eachItem(n.bind(t,i||this),e)},eachParent:function(t,e,i){return this.$data.tasksStore.eachParent(n.bind(t,i||this),e)},changeTaskId:function(t,e){this.$data.tasksStore.changeId(t,e);var i=this.$data.tasksStore.getItem(e),n=[];i.$source&&(n=n.concat(i.$source)),i.$target&&(n=n.concat(i.$target));for(var o=0;o<n.length;o++){var a=this.getLink(n[o]);a.source==t&&(a.source=e),a.target==t&&(a.target=e)}},calculateTaskLevel:function(t){return this.$data.tasksStore.calculateItemLevel(t)},getNext:function(t){return this.$data.tasksStore.getNext(t)},getPrev:function(t){return this.$data.tasksStore.getPrev(t)},getParent:function(t){return this.$data.tasksStore.getParent(t)},setParent:function(t,e,i){return this.$data.tasksStore.setParent(t,e,i)},getSiblings:function(t){return this.$data.tasksStore.getSiblings(t).slice()},getNextSibling:function(t){return this.$data.tasksStore.getNextSibling(t)},getPrevSibling:function(t){return this.$data.tasksStore.getPrevSibling(t)},getTaskByIndex:function(t){var e=this.$data.tasksStore.getIdByIndex(t);return this.isTaskExists(e)?this.getTask(e):null},getChildren:function(t){return this.hasChild(t)?this.$data.tasksStore.getChildren(t).slice():[]},hasChild:function(t){return this.$data.tasksStore.hasChild(t)},open:function(t){this.$data.tasksStore.open(t)},close:function(t){this.$data.tasksStore.close(t)},moveTask:function(t,e,i){return this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments)},sort:function(t,e,i,n){var o=!n;this.$data.tasksStore.sort(t,e,i),this.callEvent("onAfterSort",[t,e,i]),o&&this.render()}}}},function(t,e,i){var n=i(0),o=i(208),a=i(207),r=i(44),s=i(42),c=i(206),l=i(205),u=i(10);function d(){for(var t=this.$services.getService("datastores"),e=[],i=0;i<t.length;i++)e.push(this.getDatastore(t[i]));return e}r.default&&(r=r.default),t.exports={create:function(){var t=n.mixin({},{createDatastore:function(t){var e="treedatastore"==(t.type||"").toLowerCase()?s:r;if(t){var i=this;t.openInitially=function(){return i.config.open_tree_initially}}var n=new e(t);if(this.mixin(n,c(n)),t.name){this.$services.dropService("datastore:"+t.name),this.$services.setService("datastore:"+t.name,function(){return n});var o=this.$services.getService("datastores");o?o.indexOf(t.name)<0&&o.push(t.name):(o=[],this.$services.setService("datastores",function(){return o}),o.push(t.name)),l.bindDataStore(t.name,this)}return n},getDatastore:function(t){return this.$services.getService("datastore:"+t)},refreshData:function(){var t;u(this)||(t=this.getScrollState()),this.callEvent("onBeforeDataRender",[]);for(var e=d.call(this),i=0;i<e.length;i++)e[i].refresh();u(this)||!t.x&&!t.y||this.scrollTo(t.x,t.y),this.callEvent("onDataRender",[])},isChildOf:function(t,e){return this.$data.tasksStore.isChildOf(t,e)},refreshTask:function(t,e){var i=this.getTask(t),n=this;function o(){if(void 0===e||e){for(var t=0;t<i.$source.length;t++)n.refreshLink(i.$source[t]);for(t=0;t<i.$target.length;t++)n.refreshLink(i.$target[t])}}if(i&&this.isTaskVisible(t))this.$data.tasksStore.refresh(t,!!this.getState("tasksDnd").drag_id||!1===e),o();else if(this.isTaskExists(t)&&this.isTaskExists(this.getParent(t))){this.refreshTask(this.getParent(t));var a=!1;this.eachParent(function(t){(a||this.isSplitTask(t))&&(a=!0)},t),a&&o()}},refreshLink:function(t){this.$data.linksStore.refresh(t,!!this.getState("tasksDnd").drag_id)},silent:function(t){var e=this;e.$data.tasksStore.silent(function(){e.$data.linksStore.silent(function(){t()})})},clearAll:function(){for(var t=d.call(this),e=0;e<t.length;e++)t[e].clearAll();this._update_flags(),this.userdata={},this.callEvent("onClear",[]),this.render()},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={}},selectTask:function(t){var e=this.$data.tasksStore;return!!this.config.select_task&&(t&&e.select(t),e.getSelectedId())},unselectTask:function(t){this.$data.tasksStore.unselect(t)},isSelectedTask:function(t){return this.$data.tasksStore.isSelected(t)},getSelectedId:function(){return this.$data.tasksStore.getSelectedId()}});return n.mixin(t,o()),n.mixin(t,a()),t}}},function(t,e,i){var n=i(0),o=i(209),a=i(41);t.exports=function(t){var e=o.create();n.mixin(t,e);var r=t.createDatastore({name:"task",type:"treeDatastore",rootId:function(){return t.config.root_id},initItem:n.bind(function(e){this.defined(e.id)||(e.id=this.uid()),e.start_date&&(e.start_date=t.date.parseDate(e.start_date,"parse_date")),e.end_date&&(e.end_date=t.date.parseDate(e.end_date,"parse_date"));var i=null;(e.duration||0===e.duration)&&(e.duration=i=1*e.duration),i&&(e.start_date&&!e.end_date?e.end_date=this.calculateEndDate(e):!e.start_date&&e.end_date&&(e.start_date=this.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e}))),e.progress=Number(e.progress)||0,this._isAllowedUnscheduledTask(e)&&this._set_default_task_timing(e),this._init_task_timing(e),e.start_date&&e.end_date&&this.correctTaskWorkTime(e),e.$source=[],e.$target=[];var o=this.$data.tasksStore.getItem(e.id);return o&&!n.defined(e.open)&&(e.$open=o.$open),void 0===e.parent&&(e.parent=this.config.root_id),e},t),getConfig:function(){return t.config}}),s=t.createDatastore({name:"link",initItem:n.bind(function(t){return this.defined(t.id)||(t.id=this.uid()),t},t)});function c(e){var i=t.isTaskVisible(e);if(!i&&t.isTaskExists(e)){var n=t.getParent(e);t.isTaskExists(n)&&t.isTaskVisible(n)&&(n=t.getTask(n),t.isSplitTask(n)&&(i=!0))}return i}function l(e){if(t.isTaskExists(e.source)){var i=t.getTask(e.source);i.$source=i.$source||[],i.$source.push(e.id)}if(t.isTaskExists(e.target)){var n=t.getTask(e.target);n.$target=n.$target||[],n.$target.push(e.id)}}function u(e){if(t.isTaskExists(e.source))for(var i=t.getTask(e.source),n=0;n<i.$source.length;n++)if(i.$source[n]==e.id){i.$source.splice(n,1);break}if(t.isTaskExists(e.target)){var o=t.getTask(e.target);for(n=0;n<o.$target.length;n++)if(o.$target[n]==e.id){o.$target.splice(n,1);break}}}function d(){for(var e=null,i=t.$data.tasksStore.getItems(),n=0,o=i.length;n<o;n++)(e=i[n]).$source=[],e.$target=[];var a=t.$data.linksStore.getItems();for(n=0,o=a.length;n<o;n++)l(a[n])}function h(t){var e=t.source,i=t.target;for(var n in t.events)!function(t,n){e.attachEvent(t,function(){return i.callEvent(n,Array.prototype.slice.call(arguments))},n)}(n,t.events[n])}t.attachEvent("onDestroy",function(){r.destructor(),s.destructor()}),t.attachEvent("onLinkValidation",function(e){if(t.isLinkExists(e.id))return!0;for(var i=t.getTask(e.source).$source,n=0;n<i.length;n++){var o=t.getLink(i[n]);if(e.source==o.source&&e.target==o.target&&e.type==o.type)return!1}return!0}),r.attachEvent("onBeforeRefreshAll",function(){for(var e=r.getVisibleItems(),i=0;i<e.length;i++){var n=e[i];n.$index=i,t.resetProjectDates(n)}}),r.attachEvent("onFilterItem",function(e,i){if(t.config.show_tasks_outside_timescale)return!0;var n=null,o=null;if(t.config.start_date&&t.config.end_date){if(t._isAllowedUnscheduledTask(i))return!0;if(n=t.config.start_date.valueOf(),o=t.config.end_date.valueOf(),+i.start_date>o||+i.end_date<+n)return!1}return!0}),r.attachEvent("onIdChange",function(e,i){t._update_flags(e,i)}),r.attachEvent("onAfterUpdate",function(e){if(t._update_parents(e),t.getState("batchUpdate").batch_update)return!0;for(var i=r.getItem(e),n=0;n<i.$source.length;n++)s.refresh(i.$source[n]);for(n=0;n<i.$target.length;n++)s.refresh(i.$target[n])}),r.attachEvent("onAfterItemMove",function(e,i,n){t.getTask(e).$drop_target=null!==this.getNextSibling(e)?this.getNextSibling(e):null!==this.getPrevSibling(e)?"next:"+this.getPrevSibling(e):"next:null"}),r.attachEvent("onStoreUpdated",function(e,i,n){if("delete"==n&&t._update_flags(e,null),!t.$services.getService("state").getState("batchUpdate").batch_update){if(t.config.fit_tasks&&"paint"!==n){var o=t.getState();a(t);var r=t.getState();if(+o.min_date!=+r.min_date||+o.max_date!=+r.max_date)return t.render(),t.callEvent("onScaleAdjusted",[]),!0}"add"==n||"move"==n||"delete"==n?t.$layout&&t.$layout.resize():e||s.refresh()}}),s.attachEvent("onAfterAdd",function(t,e){l(e)}),s.attachEvent("onAfterUpdate",function(t,e){d()}),s.attachEvent("onAfterDelete",function(t,e){u(e)}),s.attachEvent("onBeforeIdChange",function(e,i){u(t.mixin({id:e},t.$data.linksStore.getItem(i))),l(t.$data.linksStore.getItem(i))}),s.attachEvent("onFilterItem",function(e,i){if(!t.config.show_links)return!1;var n=c(i.source),o=c(i.target);return!(!n||!o||t._isAllowedUnscheduledTask(t.getTask(i.source))||t._isAllowedUnscheduledTask(t.getTask(i.target)))&&t.callEvent("onBeforeLinkDisplay",[e,i])}),function(){var e=i(38),n={};t.attachEvent("onBeforeTaskDelete",function(i,o){return n[i]=e.getSubtreeLinks(t,i),!0}),t.attachEvent("onAfterTaskDelete",function(e,i){n[e]&&t.$data.linksStore.silent(function(){for(var i in n[e])t.$data.linksStore.removeItem(i),u(n[e][i]);n[e]=null})})}(),t.attachEvent("onAfterLinkDelete",function(e,i){t.refreshTask(i.source),t.refreshTask(i.target)}),t.attachEvent("onParse",d),h({source:s,target:t,events:{onItemLoading:"onLinkLoading",onBeforeAdd:"onBeforeLinkAdd",onAfterAdd:"onAfterLinkAdd",onBeforeUpdate:"onBeforeLinkUpdate",onAfterUpdate:"onAfterLinkUpdate",onBeforeDelete:"onBeforeLinkDelete",onAfterDelete:"onAfterLinkDelete",onIdChange:"onLinkIdChange"}}),h({source:r,target:t,events:{onItemLoading:"onTaskLoading",onBeforeAdd:"onBeforeTaskAdd",onAfterAdd:"onAfterTaskAdd",onBeforeUpdate:"onBeforeTaskUpdate",onAfterUpdate:"onAfterTaskUpdate",onBeforeDelete:"onBeforeTaskDelete",onAfterDelete:"onAfterTaskDelete",onIdChange:"onTaskIdChange",onBeforeItemMove:"onBeforeTaskMove",onAfterItemMove:"onAfterTaskMove",onFilterItem:"onBeforeTaskDisplay",onItemOpen:"onTaskOpened",onItemClose:"onTaskClosed",onBeforeSelect:"onBeforeTaskSelected",onAfterSelect:"onTaskSelected",onAfterUnselect:"onTaskUnselected"}}),t.$data={tasksStore:r,linksStore:s}}},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,o=1,a={},r=!1,s=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){u(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&u(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),n=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){u(t.data)},n=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;n=function(e){var i=s.createElement("script");i.onreadystatechange=function(){u(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():n=function(t){setTimeout(u,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];return a[o]={callback:t,args:e},n(o),o++},c.clearImmediate=l}function l(t){delete a[t]}function u(t){if(r)setTimeout(u,0,t);else{var e=a[t];if(e){r=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{l(t),r=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(13),i(45))},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new a(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(211),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(13))},function(t,e,i){(function(e,i,n){t.exports=function t(e,i,n){function o(r,s){if(!i[r]){if(!e[r]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){return o(e[r][1][t]||t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var a="function"==typeof _dereq_&&_dereq_,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function i(t){var i=new e(t),n=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),n}t.any=function(t){return i(t)},t.prototype.any=function(){return i(this)}}},{}],2:[function(t,i,n){"use strict";var o;try{throw new Error}catch(t){o=t}var a=t("./schedule"),r=t("./queue"),s=t("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new r(16),this._normalQueue=new r(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=a}function l(t,e,i){this._lateQueue.push(t,e,i),this._queueTick()}function u(t,e,i){this._normalQueue.push(t,e,i),this._queueTick()}function d(t){this._normalQueue._pushOne(t),this._queueTick()}function h(t){for(;t.length()>0;)p(t)}function p(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var i=t.shift(),n=t.shift();e.call(i,n)}}c.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(t,i){i?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},c.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(c.prototype.invokeLater=function(t,e,i){this._trampolineEnabled?l.call(this,t,e,i):this._schedule(function(){setTimeout(function(){t.call(e,i)},100)})},c.prototype.invoke=function(t,e,i){this._trampolineEnabled?u.call(this,t,e,i):this._schedule(function(){t.call(e,i)})},c.prototype.settlePromises=function(t){this._trampolineEnabled?d.call(this,t):this._schedule(function(){t._settlePromises()})}):(c.prototype.invokeLater=l,c.prototype.invoke=u,c.prototype.settlePromises=d),c.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},i.exports=c,i.exports.firstLineError=o},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){var o=!1,a=function(t,e){this._reject(e)},r=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(a,a,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(a){o||(o=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var l=i(a),u=new t(e);u._propagateFrom(this,1);var d=this._target();if(u._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:u,target:d,bindingPromise:l};d._then(e,r,void 0,u,h),l._then(s,c,void 0,u,h),u._setOnCancel(l)}else u._resolveCallback(d);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,i){return t.resolve(i).bind(e)}}},{}],4:[function(t,e,i){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=t("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(t){}return o},e.exports=o},{"./promise":22}],5:[function(t,e,i){"use strict";var n=Object.create;if(n){var o=n(null),a=n(null);o[" size"]=a[" size"]=0}e.exports=function(e){var i=t("./util"),n=i.canEvaluate;function o(t){return function(t,n){var o;if(null!=t&&(o=t[n]),"function"!=typeof o){var a="Object "+i.classString(t)+" has no method '"+i.toString(n)+"'";throw new e.TypeError(a)}return o}(t,this.pop()).apply(t,this)}function a(t){return t[this]}function r(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(o,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=r;else if(n){var i=(void 0)(t);e=null!==i?i:a}else e=a;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,i){"use strict";e.exports=function(e,i,n,o){var a=t("./util"),r=a.tryCatch,s=a.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var i=t._cancellationParent;if(null==i||!i._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=i}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(a.isArray(t))for(var i=0;i<t.length;++i)this._doInvokeOnCancel(t[i],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=r(t).call(this._boundValue());n===s&&(this._attachExtraTrace(n.e),c.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,i){"use strict";e.exports=function(e){var i=t("./util"),n=t("./es5").keys,o=i.tryCatch,a=i.errorObj;return function(t,r,s){return function(c){var l=s._boundValue();t:for(var u=0;u<t.length;++u){var d=t[u];if(d===Error||null!=d&&d.prototype instanceof Error){if(c instanceof d)return o(r).call(l,c)}else if("function"==typeof d){var h=o(d).call(l,c);if(h===a)return h;if(h)return o(r).call(l,c)}else if(i.isObject(c)){for(var p=n(d),f=0;f<p.length;++f){var g=p[f];if(d[g]!=c[g])continue t}return o(r).call(l,c)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,i){"use strict";e.exports=function(t){var e=!1,i=[];function n(){this._trace=new n.CapturedTrace(o())}function o(){var t=i.length-1;if(t>=0)return i[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var t=i.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},n.CapturedTrace=null,n.create=function(){if(e)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var i=t.prototype._pushContext,a=t.prototype._popContext,r=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;n.deactivateLongStackTraces=function(){t.prototype._pushContext=i,t.prototype._popContext=a,t._peekContext=r,t.prototype._peekContext=s,t.prototype._promiseCreated=c,e=!1},e=!0,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,t._peekContext=t.prototype._peekContext=o,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},n}},{}],9:[function(t,i,n){"use strict";i.exports=function(i,n){var o,a,r,s=i._getDomain,c=i._async,l=t("./errors").Warning,u=t("./util"),d=t("./es5"),h=u.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,m=null,v=null,b=!1,_=!(0==u.env("BLUEBIRD_DEBUG")),w=!(0==u.env("BLUEBIRD_WARNINGS")||!_&&!u.env("BLUEBIRD_WARNINGS")),y=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!_&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),k=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(w||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));i.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},i.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},i.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",o,void 0,this)},i.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},i.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},i.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",a,t,this)}},i.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},i.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},i.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},i.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},i.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},i.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},i.prototype._warn=function(t,e,i){return B(t,e,i||this)},i.onPossiblyUnhandledRejection=function(t){var e=s();a="function"==typeof t?null===e?t:u.domainBind(e,t):void 0},i.onUnhandledRejectionHandled=function(t){var e=s();o="function"==typeof t?null===e?t:u.domainBind(e,t):void 0};var x=function(){};i.longStackTraces=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Q.longStackTraces&&q()){var t=i.prototype._captureStackTrace,e=i.prototype._attachExtraTrace,o=i.prototype._dereferenceTrace;Q.longStackTraces=!0,x=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");i.prototype._captureStackTrace=t,i.prototype._attachExtraTrace=e,i.prototype._dereferenceTrace=o,n.deactivateLongStackTraces(),c.enableTrampoline(),Q.longStackTraces=!1},i.prototype._captureStackTrace=V,i.prototype._attachExtraTrace=z,i.prototype._dereferenceTrace=F,n.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},i.hasLongStackTraces=function(){return Q.longStackTraces&&q()};var S=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return u.global.dispatchEvent(t),function(t,e){var i={detail:e,cancelable:!0};d.defineProperty(i,"promise",{value:e.promise}),d.defineProperty(i,"reason",{value:e.reason});var n=new CustomEvent(t.toLowerCase(),i);return!u.global.dispatchEvent(n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),u.global.dispatchEvent(t),function(t,e){var i=new Event(t.toLowerCase(),{cancelable:!0});return i.detail=e,d.defineProperty(i,"promise",{value:e.promise}),d.defineProperty(i,"reason",{value:e.reason}),!u.global.dispatchEvent(i)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(t),function(t,e){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t.toLowerCase(),!1,!0,e),!u.global.dispatchEvent(i)})}catch(t){}return function(){return!1}}(),T=u.isNode?function(){return e.emit.apply(e,arguments)}:u.global?function(t){var e="on"+t.toLowerCase(),i=u.global[e];return!!i&&(i.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function C(t,e){return{promise:e}}var D={promiseCreated:C,promiseFulfilled:C,promiseRejected:C,promiseResolved:C,promiseCancelled:C,promiseChained:function(t,e,i){return{promise:e,child:i}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,i){return{reason:e,promise:i}},rejectionHandled:C},I=function(t){var e=!1;try{e=T.apply(null,arguments)}catch(t){c.throwLater(t),e=!0}var i=!1;try{i=S(t,D[t].apply(null,arguments))}catch(t){c.throwLater(t),i=!0}return i||e};function P(){return!1}function M(t,e,i){var n=this;try{t(e,i,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+u.toString(t));n._attachCancellationCallback(t)})}catch(t){return t}}function O(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?u.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function $(){return this._onCancelField}function j(t){this._onCancelField=t}function L(){this._cancellationParent=void 0,this._onCancelField=void 0}function E(t,e){if(0!=(1&e)){this._cancellationParent=t;var i=t._branchesRemainingToCancel;void 0===i&&(i=0),t._branchesRemainingToCancel=i+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}i.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?i.longStackTraces():!t.longStackTraces&&i.hasLongStackTraces()&&x()),"warnings"in t){var e=t.warnings;Q.warnings=!!e,k=Q.warnings,u.isObject(e)&&"wForgottenReturn"in e&&(k=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!Q.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");i.prototype._clearCancellationData=L,i.prototype._propagateFrom=E,i.prototype._onCancel=$,i.prototype._setOnCancel=j,i.prototype._attachCancellationCallback=O,i.prototype._execute=M,N=E,Q.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!Q.monitoring?(Q.monitoring=!0,i.prototype._fireEvent=I):!t.monitoring&&Q.monitoring&&(Q.monitoring=!1,i.prototype._fireEvent=P)),i},i.prototype._fireEvent=P,i.prototype._execute=function(t,e,i){try{t(e,i)}catch(t){return t}},i.prototype._onCancel=function(){},i.prototype._setOnCancel=function(t){},i.prototype._attachCancellationCallback=function(t){},i.prototype._captureStackTrace=function(){},i.prototype._attachExtraTrace=function(){},i.prototype._dereferenceTrace=function(){},i.prototype._clearCancellationData=function(){},i.prototype._propagateFrom=function(t,e){};var N=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function A(){var t=this._boundTo;return void 0!==t&&t instanceof i?t.isFulfilled()?t.value():void 0:t}function V(){this._trace=new Z(this._peekContext())}function z(t,e){if(h(t)){var i=this._trace;if(void 0!==i&&e&&(i=i._parent),void 0!==i)i.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=U(t);u.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}}function F(){this._trace=void 0}function B(t,e,n){if(Q.warnings){var o,a=new l(t);if(e)n._attachExtraTrace(a);else if(Q.longStackTraces&&(o=i._peekContext()))o.attachExtraTrace(a);else{var r=U(a);a.stack=r.message+"\n"+r.stack.join("\n")}I("warning",a)||G(a,"",!0)}}function R(t){for(var e=[],i=0;i<t.length;++i){var n=t[i],o="    (No stack trace)"===n||m.test(n),a=o&&X(n);o&&!a&&(b&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function U(t){var e=t.stack,i=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),i=0;i<e.length;++i){var n=e[i];if("    (No stack trace)"===n||m.test(n))break}return i>0&&"SyntaxError"!=t.name&&(e=e.slice(i)),e}(t):["    (No stack trace)"],{message:i,stack:"SyntaxError"==t.name?e:R(e)}}function G(t,e,i){var n;"undefined"!=typeof console&&(n=u.isObject(t)?e+v(t.stack,t):e+String(t),"function"==typeof r?r(n,i):"function"!=typeof console.log&&console)}function H(t,e,i,n){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(n):e(i,n))}catch(t){c.throwLater(t)}"unhandledRejection"===t?I(t,i,n)||o||G(i,"Unhandled rejection "):I(t,n)}function W(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():u.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function q(){return"function"==typeof J}var X=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function K(t){var e=t.match(Y);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Z(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);J(this,Z),e>32&&this.uncycle()}u.inherits(Z,Error),n.CapturedTrace=Z,Z.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],i={},n=0,o=this;void 0!==o;++n)e.push(o),o=o._parent;for(n=(t=this._length=n)-1;n>=0;--n){var a=e[n].stack;void 0===i[a]&&(i[a]=n)}for(n=0;n<t;++n){var r=i[e[n].stack];if(void 0!==r&&r!==n){r>0&&(e[r-1]._parent=void 0,e[r-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var s=n>0?e[n-1]:this;r<t-1?(s._parent=e[r+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,l=n-2;l>=0;--l)e[l]._length=c,c++;return}}}},Z.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=U(t),i=e.message,n=[e.stack],o=this;void 0!==o;)n.push(R(o.stack.split("\n"))),o=o._parent;!function(t){for(var e=t[0],i=1;i<t.length;++i){for(var n=t[i],o=e.length-1,a=e[o],r=-1,s=n.length-1;s>=0;--s)if(n[s]===a){r=s;break}for(s=r;s>=0&&e[o]===n[s];--s)e.pop(),o--;e=n}}(n),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(n),u.notEnumerableProp(t,"stack",function(t,e){for(var i=0;i<e.length-1;++i)e[i].push("From previous event:"),e[i]=e[i].join("\n");return i<e.length&&(e[i]=e[i].join("\n")),t+"\n"+e.join("\n")}(i,n)),u.notEnumerableProp(t,"__stackCleaned__",!0)}};var J=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():W(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,m=t,v=e;var i=Error.captureStackTrace;return X=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit+=6,i(t,e),Error.stackTraceLimit-=6}}var n,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return m=/@/,v=e,b=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){n="stack"in t}return"stack"in o||!n||"number"!=typeof Error.stackTraceLimit?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?W(e):e.toString()},null):(m=t,v=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(r=function(t){},u.isNode&&e.stderr.isTTY?r=function(t,e){}:u.isNode||"string"!=typeof(new Error).stack||(r=function(t,e){}));var Q={warnings:w,longStackTraces:!1,cancellation:!1,monitoring:!1};return y&&i.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return N},boundValueFunction:function(){return A},checkForgottenReturns:function(t,e,i,n,o){if(void 0===t&&null!==e&&k){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&n._bitField))return;i&&(i+=" ");var a="",r="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=R(s),l=c.length-1;l>=0;--l){var u=c[l];if(!f.test(u)){var d=u.match(g);d&&(a="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(c.length>0){var h=c[0];for(l=0;l<s.length;++l)if(s[l]===h){l>0&&(r="\n"+s[l-1]);break}}}n._warn("a promise was created in a "+i+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+r,!0,e)}},setBounds:function(t,e){if(q()){for(var i,n,o=t.stack.split("\n"),a=e.stack.split("\n"),r=-1,s=-1,c=0;c<o.length;++c)if(l=K(o[c])){i=l.fileName,r=l.line;break}for(c=0;c<a.length;++c){var l;if(l=K(a[c])){n=l.fileName,s=l.line;break}}r<0||s<0||!i||!n||i!==n||r>=s||(X=function(t){if(p.test(t))return!0;var e=K(t);return!!(e&&e.fileName===i&&r<=e.line&&e.line<=s)})}},warn:B,deprecated:function(t,e){var i=t+" is deprecated and will be removed in a future version.";return e&&(i+=" Use "+e+" instead."),B(i)},CapturedTrace:Z,fireDomEvent:S,fireGlobalEvent:T}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,i){"use strict";e.exports=function(t){function e(){return this.value}function i(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(i){return i instanceof t&&i.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:i},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(i,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof t&&i.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:i},void 0);var n=arguments[1];return n instanceof t&&n.suppressUnhandledRejections(),this.caught(i,function(){return n})}}},{}],11:[function(t,e,i){"use strict";e.exports=function(t,e){var i=t.reduce,n=t.all;function o(){return n(this)}t.prototype.each=function(t){return i(this,t,e,0)._then(o,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,n){return i(t,n,e,0)._then(o,void 0,void 0,t,void 0)},t.mapSeries=function(t,n){return i(t,n,e,e)}}},{}],12:[function(t,e,i){"use strict";var n,o,a=t("./es5"),r=a.freeze,s=t("./util"),c=s.inherits,l=s.notEnumerableProp;function u(t,e){function i(n){if(!(this instanceof i))return new i(n);l(this,"message","string"==typeof n?n:e),l(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(i,Error),i}var d=u("Warning","warning"),h=u("CancellationError","cancellation error"),p=u("TimeoutError","timeout error"),f=u("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(t){n=u("TypeError","type error"),o=u("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<g.length;++m)"function"==typeof Array.prototype[g[m]]&&(f.prototype[g[m]]=Array.prototype[g[m]]);a.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var v=0;function b(t){if(!(this instanceof b))return new b(t);l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var i=0;i<this.length;++i){for(var n=this[i]===this?"[Circular AggregateError]":this[i]+"",o=n.split("\n"),a=0;a<o.length;++a)o[a]=t+o[a];e+=(n=o.join("\n"))+"\n"}return v--,e},c(b,Error);var _=Error.__BluebirdErrorTypes__;_||(_=r({CancellationError:h,TimeoutError:p,OperationalError:b,RejectionError:b,AggregateError:f}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error,TypeError:n,RangeError:o,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(t,e,i){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!(i&&!i.writable&&!i.set)}};else{var o={}.hasOwnProperty,a={}.toString,r={}.constructor.prototype,s=function(t){var e=[];for(var i in t)o.call(t,i)&&e.push(i);return e};e.exports={isArray:function(t){try{return"[object Array]"===a.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,i){return t[e]=i.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return r}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e){var i=t.map;t.prototype.filter=function(t,n){return i(this,t,n,e)},t.filter=function(t,n,o){return i(t,n,o,e)}}},{}],15:[function(t,e,i){"use strict";e.exports=function(e,i,n){var o=t("./util"),a=e.CancellationError,r=o.errorObj,s=t("./catch_filter")(n);function c(t,e,i){this.promise=t,this.type=e,this.handler=i,this.called=!1,this.cancelPromise=null}function l(t){this.finallyHandler=t}function u(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function d(){return p.call(this,this.promise._target()._settledValue())}function h(t){if(!u(this,t))return r.e=t,r}function p(t){var o=this.promise,s=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?s.call(o._boundValue()):s.call(o._boundValue(),t);if(c===n)return c;if(void 0!==c){o._setReturnedNonUndefined();var p=i(c,o);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var f=new a("late cancellation observer");return o._attachExtraTrace(f),r.e=f,r}p.isPending()&&p._attachCancellationCallback(new l(this))}return p._then(d,h,void 0,this,void 0)}}}return o.isRejected()?(u(this),r.e=t,r):(u(this),t)}return c.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){u(this.finallyHandler)},e.prototype._passThrough=function(t,e,i,n){return"function"!=typeof t?this.then():this._then(i,n,void 0,new c(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var i=arguments.length;if(1===i)return this._passThrough(t,1,void 0,p);var n,a=new Array(i-1),r=0;for(n=0;n<i-1;++n){var c=arguments[n];if(!o.isObject(c))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(c)));a[r++]=c}return a.length=r,this._passThrough(s(a,arguments[n],this),1,void 0,p)},c}},{"./catch_filter":7,"./util":36}],16:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a,r){var s=t("./errors").TypeError,c=t("./util"),l=c.errorObj,u=c.tryCatch,d=[];function h(t,i,o,a){if(r.cancellation()){var s=new e(n),c=this._finallyPromise=new e(n);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new e(n))._captureStackTrace();this._stack=a,this._generatorFunction=t,this._receiver=i,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(h,a),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,r.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var i=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),t=u(this._generator.throw).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},h.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=u(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=u(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(t){var i=this._promise;if(t===l)return this._cleanup(),this._cancellationPhase?i.cancel():i._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?i.cancel():i._resolveCallback(n);var a=o(n,this._promise);if(a instanceof e||null!==(a=function(t,i,n){for(var a=0;a<i.length;++a){n._pushContext();var r=u(i[a])(t);if(n._popContext(),r===l){n._pushContext();var s=e.reject(l.e);return n._popContext(),s}var c=o(r,n);if(c instanceof e)return c}return null}(a,this._yieldHandlers,this._promise))){var r=(a=a._target())._bitField;0==(50397184&r)?(this._yieldedPromise=a,a._proxy(this,null)):0!=(33554432&r)?e._async.invoke(this._promiseFulfilled,this,a._value()):0!=(16777216&r)?e._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(e).yieldHandler,n=h,o=(new Error).stack;return function(){var e=t.apply(this,arguments),a=new n(void 0,void 0,i,o),r=a.promise();return a._generator=e,a._promiseFulfilled(void 0),r}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+c.classString(t));d.push(t)},e.spawn=function(t){if(r.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new h(t,this),o=n.promise();return n._run(e.spawn),o}}},{"./errors":12,"./util":36}],17:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a,r){t("./util"),e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var n=[].slice.call(arguments);t&&n.pop();var o=new i(n).promise();return void 0!==t?o.spread(t):o}}},{"./util":36}],18:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a,r){var s=e._getDomain,c=t("./util"),l=c.tryCatch,u=c.errorObj,d=e._async;function h(t,e,i,n){this.constructor$(t),this._promise._captureStackTrace();var o=s();this._callback=null===o?e:c.domainBind(o,e),this._preservedValues=n===a?new Array(this.length()):null,this._limit=i,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function p(t,i,o,a){if("function"!=typeof i)return n("expecting a function but got "+c.classString(i));var r=0;if(void 0!==o){if("object"!=typeof o||null===o)return e.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));r=o.concurrency}return new h(t,i,r="number"==typeof r&&isFinite(r)&&r>=1?r:0,a).promise()}c.inherits(h,i),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,i){var n=this._values,a=this.length(),s=this._preservedValues,c=this._limit;if(i<0){if(n[i=-1*i-1]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return n[i]=t,this._queue.push(i),!1;null!==s&&(s[i]=t);var d=this._promise,h=this._callback,p=d._boundValue();d._pushContext();var f=l(h).call(p,t,i,a),g=d._popContext();if(r.checkForgottenReturns(f,g,null!==s?"Promise.filter":"Promise.map",d),f===u)return this._reject(f.e),!0;var m=o(f,this._promise);if(m instanceof e){var v=(m=m._target())._bitField;if(0==(50397184&v))return c>=1&&this._inFlight++,n[i]=m,m._proxy(this,-1*(i+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);f=m._value()}n[i]=f}return++this._totalResolved>=a&&(null!==s?this._filter(n,s):this._resolve(n),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,i=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(i[n],n)}},h.prototype._filter=function(t,e){for(var i=e.length,n=new Array(i),o=0,a=0;a<i;++a)t[a]&&(n[o++]=e[a]);n.length=o,this._resolve(n)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,i,n){return p(t,e,i,n)}}},{"./util":36}],19:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a){var r=t("./util"),s=r.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+r.classString(t));return function(){var n=new e(i);n._captureStackTrace(),n._pushContext();var o=s(t).apply(this,arguments),r=n._popContext();return a.checkForgottenReturns(o,r,"Promise.method",n),n._resolveFromSyncValue(o),n}},e.attempt=e.try=function(t){if("function"!=typeof t)return o("expecting a function but got "+r.classString(t));var n,c=new e(i);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];n=r.isArray(l)?s(t).apply(u,l):s(t).call(u,l)}else n=s(t)();var d=c._popContext();return a.checkForgottenReturns(n,d,"Promise.try",c),c._resolveFromSyncValue(n),c},e.prototype._resolveFromSyncValue=function(t){t===r.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,i){"use strict";var n=t("./util"),o=n.maybeWrapAsError,a=t("./errors").OperationalError,r=t("./es5"),s=/^(?:name|message|stack|cause)$/;function c(t){var e;if(function(t){return t instanceof Error&&r.getPrototypeOf(t)===Error.prototype}(t)){(e=new a(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var i=r.keys(t),o=0;o<i.length;++o){var c=i[o];s.test(c)||(e[c]=t[c])}return e}return n.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(i,n){if(null!==t){if(i){var a=c(o(i));t._attachExtraTrace(a),t._reject(a)}else if(e){var r=[].slice.call(arguments,1);t._fulfill(r)}else t._fulfill(n);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,i){"use strict";e.exports=function(e){var i=t("./util"),n=e._async,o=i.tryCatch,a=i.errorObj;function r(t,e){if(!i.isArray(t))return s.call(this,t,e);var r=o(e).apply(this._boundValue(),[null].concat(t));r===a&&n.throwLater(r.e)}function s(t,e){var i=this._boundValue(),r=void 0===t?o(e).call(i,null):o(e).call(i,null,t);r===a&&n.throwLater(r.e)}function c(t,e){if(!t){var i=new Error(t+"");i.cause=t,t=i}var r=o(e).call(this._boundValue(),t);r===a&&n.throwLater(r.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var i=s;void 0!==e&&Object(e).spread&&(i=r),this._then(i,c,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,i,n){"use strict";i.exports=function(){var n=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},o=function(){return new P.PromiseInspection(this._target())},a=function(t){return P.reject(new f(t))};function r(){}var s,c={},l=t("./util");l.notEnumerableProp(P,"_getDomain",s=l.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null});var u=t("./es5"),d=t("./async"),h=new d;u.defineProperty(P,"_async",{value:h});var p=t("./errors"),f=P.TypeError=p.TypeError;P.RangeError=p.RangeError;var g=P.CancellationError=p.CancellationError;P.TimeoutError=p.TimeoutError,P.OperationalError=p.OperationalError,P.RejectionError=p.OperationalError,P.AggregateError=p.AggregateError;var m=function(){},v={},b={},_=t("./thenables")(P,m),w=t("./promise_array")(P,m,_,a,r),y=t("./context")(P),k=y.create,x=t("./debuggability")(P,y),S=t("./finally")(P,_,b),T=t("./catch_filter")(b),C=t("./nodeback"),D=l.errorObj,I=l.tryCatch;function P(t){t!==m&&function(t,e){if(null==t||t.constructor!==P)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new f("expecting a function but got "+l.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function M(t){this.promise._resolveCallback(t)}function O(t){this.promise._rejectCallback(t,!1)}function $(t){var e=new P(m);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return P.prototype.toString=function(){return"[object Promise]"},P.prototype.caught=P.prototype.catch=function(t){var e=arguments.length;if(e>1){var i,n=new Array(e-1),o=0;for(i=0;i<e-1;++i){var r=arguments[i];if(!l.isObject(r))return a("Catch statement predicate: expecting an object but got "+l.classString(r));n[o++]=r}return n.length=o,this.then(void 0,T(n,t=arguments[i],this))}return this.then(void 0,t)},P.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},P.prototype.then=function(t,e){if(x.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var i=".then() only accepts functions but was passed: "+l.classString(t);arguments.length>1&&(i+=", "+l.classString(e)),this._warn(i)}return this._then(t,e,void 0,void 0,void 0)},P.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},P.prototype.spread=function(t){return"function"!=typeof t?a("expecting a function but got "+l.classString(t)):this.all()._then(t,void 0,void 0,v,void 0)},P.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},P.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new w(this).promise()},P.prototype.error=function(t){return this.caught(l.originatesFromRejection,t)},P.getNewLibraryCopy=i.exports,P.is=function(t){return t instanceof P},P.fromNode=P.fromCallback=function(t){var e=new P(m);e._captureStackTrace();var i=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=I(t)(C(e,i));return n===D&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},P.all=function(t){return new w(t).promise()},P.cast=function(t){var e=_(t);return e instanceof P||((e=new P(m))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},P.resolve=P.fulfilled=P.cast,P.reject=P.rejected=function(t){var e=new P(m);return e._captureStackTrace(),e._rejectCallback(t,!0),e},P.setScheduler=function(t){if("function"!=typeof t)throw new f("expecting a function but got "+l.classString(t));return h.setScheduler(t)},P.prototype._then=function(t,e,i,n,o){var a=void 0!==o,r=a?o:new P(m),c=this._target(),u=c._bitField;a||(r._propagateFrom(this,3),r._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,r));var d=s();if(0!=(50397184&u)){var p,f,v=c._settlePromiseCtx;0!=(33554432&u)?(f=c._rejectionHandler0,p=t):0!=(16777216&u)?(f=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(v=c._settlePromiseLateCancellationObserver,f=new g("late cancellation observer"),c._attachExtraTrace(f),p=e),h.invoke(v,c,{handler:null===d?p:"function"==typeof p&&l.domainBind(d,p),promise:r,receiver:n,value:f})}else c._addCallbacks(t,e,r,n,d);return r},P.prototype._length=function(){return 65535&this._bitField},P.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},P.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},P.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},P.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},P.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},P.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},P.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},P.prototype._isFinal=function(){return(4194304&this._bitField)>0},P.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},P.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},P.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},P.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},P.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==c)return void 0===e&&this._isBound()?this._boundValue():e},P.prototype._promiseAt=function(t){return this[4*t-4+2]},P.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},P.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(t){var e=t._fulfillmentHandler0,i=t._rejectionHandler0,n=t._promise0,o=t._receiverAt(0);void 0===o&&(o=c),this._addCallbacks(e,i,n,o,null)},P.prototype._migrateCallbackAt=function(t,e){var i=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),o=t._promiseAt(e),a=t._receiverAt(e);void 0===a&&(a=c),this._addCallbacks(i,n,o,a,null)},P.prototype._addCallbacks=function(t,e,i,n,o){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=i,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=null===o?t:l.domainBind(o,t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:l.domainBind(o,e));else{var r=4*a-4;this[r+2]=i,this[r+3]=n,"function"==typeof t&&(this[r+0]=null===o?t:l.domainBind(o,t)),"function"==typeof e&&(this[r+1]=null===o?e:l.domainBind(o,e))}return this._setLength(a+1),a},P.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},P.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(n(),!1);var i=_(t,this);if(!(i instanceof P))return this._fulfill(t);e&&this._propagateFrom(i,2);var o=i._target();if(o!==this){var a=o._bitField;if(0==(50397184&a)){var r=this._length();r>0&&o._migrateCallback0(this);for(var s=1;s<r;++s)o._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(o)}else if(0!=(33554432&a))this._fulfill(o._value());else if(0!=(16777216&a))this._reject(o._reason());else{var c=new g("late cancellation observer");o._attachExtraTrace(c),this._reject(c)}}else this._reject(n())}},P.prototype._rejectCallback=function(t,e,i){var n=l.ensureErrorObject(t),o=n===t;if(!o&&!i&&x.warnings()){var a="a promise was rejected with a non-error: "+l.classString(t);this._warn(a,!0)}this._attachExtraTrace(n,!!e&&o),this._reject(t)},P.prototype._resolveFromExecutor=function(t){if(t!==m){var e=this;this._captureStackTrace(),this._pushContext();var i=!0,n=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,i)});i=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)}},P.prototype._settlePromiseFromHandler=function(t,e,i,n){var o=n._bitField;if(0==(65536&o)){var a;n._pushContext(),e===v?i&&"number"==typeof i.length?a=I(t).apply(this._boundValue(),i):(a=D).e=new f("cannot .spread() a non-array: "+l.classString(i)):a=I(t).call(e,i);var r=n._popContext();0==(65536&(o=n._bitField))&&(a===b?n._reject(i):a===D?n._rejectCallback(a.e,!1):(x.checkForgottenReturns(a,r,"",n,this),n._resolveCallback(a)))}},P.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(t){this._rejectionHandler0=t},P.prototype._settlePromise=function(t,e,i,n){var a=t instanceof P,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),i instanceof S&&i.isFinallyHandler()?(i.cancelPromise=t,I(e).call(i,n)===D&&t._reject(D.e)):e===o?t._fulfill(o.call(i)):i instanceof r?i._promiseCancelled(t):a||t instanceof w?t._cancel():i.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,i,n,t)):e.call(i,n,t):i instanceof r?i._isResolved()||(0!=(33554432&s)?i._promiseFulfilled(n,t):i._promiseRejected(n,t)):a&&(c&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(n):t._reject(n))},P.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,i=t.promise,n=t.receiver,o=t.value;"function"==typeof e?i instanceof P?this._settlePromiseFromHandler(e,n,o,i):e.call(n,o,i):i instanceof P&&i._reject(o)},P.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},P.prototype._settlePromise0=function(t,e,i){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,o,e)},P.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},P.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var i=n();return this._attachExtraTrace(i),this._reject(i)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():h.settlePromises(this),this._dereferenceTrace())}},P.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,l.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(t,e){for(var i=1;i<t;i++){var n=this._fulfillmentHandlerAt(i),o=this._promiseAt(i),a=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(o,n,a,e)}},P.prototype._rejectPromises=function(t,e){for(var i=1;i<t;i++){var n=this._rejectionHandlerAt(i),o=this._promiseAt(i),a=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(o,n,a,e)}},P.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,t),this._rejectPromises(e,i)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},P.defer=P.pending=function(){return x.deprecated("Promise.defer","new Promise"),{promise:new P(m),resolve:M,reject:O}},l.notEnumerableProp(P,"_makeSelfResolutionError",n),t("./method")(P,m,_,a,x),t("./bind")(P,m,_,x),t("./cancel")(P,w,a,x),t("./direct_resolve")(P),t("./synchronous_inspection")(P),t("./join")(P,w,_,m,h,s),P.Promise=P,P.version="3.5.4",t("./map.js")(P,w,a,_,m,x),t("./call_get.js")(P),t("./using.js")(P,a,_,k,m,x),t("./timers.js")(P,m,x),t("./generators.js")(P,a,m,_,r,x),t("./nodeify.js")(P),t("./promisify.js")(P,m),t("./props.js")(P,w,_,a),t("./race.js")(P,m,_,a),t("./reduce.js")(P,w,a,_,m,x),t("./settle.js")(P,w,x),t("./some.js")(P,w,a),t("./filter.js")(P,m),t("./each.js")(P,m),t("./any.js")(P),l.toFastProperties(P),l.toFastProperties(P.prototype),$({a:1}),$({b:2}),$({c:3}),$(1),$(function(){}),$(void 0),$(!1),$(new P(m)),x.setBounds(d.firstLineError,l.lastLineError),P}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a){var r=t("./util");function s(t){var n=this._promise=new e(i);t instanceof e&&n._propagateFrom(t,3),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return r.inherits(s,a),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(i,a){var s=n(this._values,this._promise);if(s instanceof e){var c=(s=s._target())._bitField;if(this._values=s,0==(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,a);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=r.asArray(s)))0!==s.length?this._iterate(s):-5===a?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(a));else{var l=o("expecting an array or an iterable object but got "+r.classString(s)).reason();this._promise._rejectCallback(l,!1)}},s.prototype._iterate=function(t){var i=this.getActualLength(t.length);this._length=i,this._values=this.shouldCopyValues()?new Array(i):this._values;for(var o=this._promise,a=!1,r=null,s=0;s<i;++s){var c=n(t[s],o);r=c instanceof e?(c=c._target())._bitField:null,a?null!==r&&c.suppressUnhandledRejections():null!==r?0==(50397184&r)?(c._proxy(this,s),this._values[s]=c):a=0!=(33554432&r)?this._promiseFulfilled(c._value(),s):0!=(16777216&r)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):a=this._promiseFulfilled(c,s)}a||o._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var i=0;i<t.length;++i)t[i]instanceof e&&t[i].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,i){"use strict";e.exports=function(e,i){var n={},o=t("./util"),a=t("./nodeback"),r=o.withAppended,s=o.maybeWrapAsError,c=o.canEvaluate,l=t("./errors").TypeError,u={__isPromisified__:!0},d=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(t){return o.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!d.test(t)}function f(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function g(t,e,i){var n=o.getDataPropertyOrDefault(t,e+i,u);return!!n&&f(n)}function m(t,e,i,n){for(var a=o.inheritedDataKeys(t),r=[],s=0;s<a.length;++s){var c=a[s],u=t[c],d=n===h||h(c);"function"!=typeof u||f(u)||g(t,c,e)||!n(c,u,t,d)||r.push(c,u)}return function(t,e,i){for(var n=0;n<t.length;n+=2){var o=t[n];if(i.test(o))for(var a=o.replace(i,""),r=0;r<t.length;r+=2)if(t[r]===a)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(r,e,i),r}var v=c?void 0:function(t,c,l,u,d,h){var p=function(){return this}(),f=t;function g(){var o=c;c===n&&(o=this);var l=new e(i);l._captureStackTrace();var u="string"==typeof f&&this!==p?this[f]:t,d=a(l,h);try{u.apply(o,r(arguments,d))}catch(t){l._rejectCallback(s(t),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"==typeof f&&(t=u),o.notEnumerableProp(g,"__isPromisified__",!0),g};function b(t,e,i,a,r){for(var s=new RegExp(function(t){return t.replace(/([$])/,"\\$")}(e)+"$"),c=m(t,e,s,i),l=0,u=c.length;l<u;l+=2){var d=c[l],h=c[l+1],p=d+e;if(a===v)t[p]=v(d,n,d,h,e,r);else{var f=a(h,function(){return v(d,n,d,h,e,r)});o.notEnumerableProp(f,"__isPromisified__",!0),t[p]=f}}return o.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new l("expecting a function but got "+o.classString(t));if(f(t))return t;var i=function(t,e,i){return v(t,e,void 0,t,null,i)}(t,void 0===(e=Object(e)).context?n:e.context,!!e.multiArgs);return o.copyDescriptors(t,i,p),i},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var i=!!(e=Object(e)).multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var a=e.filter;"function"!=typeof a&&(a=h);var r=e.promisifier;if("function"!=typeof r&&(r=v),!o.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=o.inheritedDataKeys(t),c=0;c<s.length;++c){var u=t[s[c]];"constructor"!==s[c]&&o.isClass(u)&&(b(u.prototype,n,a,r,i),b(u,n,a,r,i))}return b(t,n,a,r,i)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,i){"use strict";e.exports=function(e,i,n,o){var a,r=t("./util"),s=r.isObject,c=t("./es5");"function"==typeof Map&&(a=Map);var l=function(){var t=0,e=0;function i(i,n){this[t]=i,this[t+e]=n,t++}return function(n){e=n.size,t=0;var o=new Array(2*n.size);return n.forEach(i,o),o}}();function u(t){var e,i=!1;if(void 0!==a&&t instanceof a)e=l(t),i=!0;else{var n=c.keys(t),o=n.length;e=new Array(2*o);for(var r=0;r<o;++r){var s=n[r];e[r]=t[s],e[r+o]=s}}this.constructor$(e),this._isMap=i,this._init$(void 0,i?-6:-3)}function d(t){var i,a=n(t);return s(a)?(i=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new u(a).promise(),a instanceof e&&i._propagateFrom(a,2),i):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}r.inherits(u,i),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var i;if(this._isMap)i=function(t){for(var e=new a,i=t.length/2|0,n=0;n<i;++n)e.set(t[i+n],t[n]);return e}(this._values);else{i={};for(var n=this.length(),o=0,r=this.length();o<r;++o)i[this._values[o+n]]=this._values[o]}return this._resolve(i),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return d(this)},e.props=function(t){return d(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,i){"use strict";function n(t){this._capacity=t,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},n.prototype.push=function(t,e,i){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(i);var o=this._front+n-3;this._checkCapacity(n);var a=this._capacity-1;this[o+0&a]=t,this[o+1&a]=e,this[o+2&a]=i,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,i,n,o){for(var a=0;a<o;++a)i[a+n]=t[a+0],t[a+0]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=n},{}],27:[function(t,e,i){"use strict";e.exports=function(e,i,n,o){var a=t("./util"),r=function(t){return t.then(function(e){return s(e,t)})};function s(t,s){var c=n(t);if(c instanceof e)return r(c);if(null===(t=a.asArray(t)))return o("expecting an array or an iterable object but got "+a.classString(t));var l=new e(i);void 0!==s&&l._propagateFrom(s,3);for(var u=l._fulfill,d=l._reject,h=0,p=t.length;h<p;++h){var f=t[h];(void 0!==f||h in t)&&e.cast(f)._then(u,d,void 0,l,null)}return l}e.race=function(t){return s(t,void 0)},e.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a,r){var s=e._getDomain,c=t("./util"),l=c.tryCatch;function u(t,i,n,o){this.constructor$(t);var r=s();this._fn=null===r?i:c.domainBind(r,i),void 0!==n&&(n=e.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=o===a?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function d(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,i,o){return"function"!=typeof e?n("expecting a function but got "+c.classString(e)):new u(t,e,i,o).promise()}function p(t){this.accum=t,this.array._gotAccum(t);var i=o(this.value,this.array._promise);return i instanceof e?(this.array._currentCancellable=i,i._then(f,void 0,void 0,this,void 0)):f.call(this,i)}function f(t){var i,n=this.array,o=n._promise,a=l(n._fn);o._pushContext(),(i=void 0!==n._eachValues?a.call(o._boundValue(),t,this.index,this.length):a.call(o._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(n._currentCancellable=i);var s=o._popContext();return r.checkForgottenReturns(i,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",o),i}c.inherits(u,i),u.prototype._gotAccum=function(t){null!=this._eachValues&&t!==a&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(t){var i,n;this._values=t;var o=t.length;if(void 0!==this._initialValue?(i=this._initialValue,n=0):(i=e.resolve(t[0]),n=1),this._currentCancellable=i,!i.isRejected())for(;n<o;++n)i=i._then(p,void 0,void 0,{accum:null,value:t[n],index:n,length:o,array:this},void 0);void 0!==this._eachValues&&(i=i._then(this._eachComplete,void 0,void 0,this,void 0)),i._then(d,d,void 0,i,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,i,n){return h(t,e,i,n)}}},{"./util":36}],29:[function(t,o,a){"use strict";var r,s=t("./util"),c=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var l=i.setImmediate,u=e.nextTick;r=s.isRecentNode?function(t){l.call(i,t)}:function(t){u.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var d=c.resolve();r=function(t){d.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==n?function(t){n(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},i=!1,n=document.createElement("div");return new MutationObserver(function(){t.classList.toggle("foo"),i=!1}).observe(n,e),function(o){var a=new MutationObserver(function(){a.disconnect(),o()});a.observe(t,e),i||(i=!0,n.classList.toggle("foo"))}}();o.exports=r},{"./util":36}],30:[function(t,e,i){"use strict";e.exports=function(e,i,n){var o=e.PromiseInspection;function a(t){this.constructor$(t)}t("./util").inherits(a,i),a.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseFulfilled=function(t,e){var i=new o;return i._bitField=33554432,i._settledValueField=t,this._promiseResolved(e,i)},a.prototype._promiseRejected=function(t,e){var i=new o;return i._bitField=16777216,i._settledValueField=t,this._promiseResolved(e,i)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new a(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,i){"use strict";e.exports=function(e,i,n){var o=t("./util"),a=t("./errors").RangeError,r=t("./errors").AggregateError,s=o.isArray,c={};function l(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var i=new l(t),o=i.promise();return i.setHowMany(e),i.init(),o}o.inherits(l,i),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(t){this._howMany=t},l.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new r,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(t){this._values.push(t)},l.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(t){return new a("Input array must contain at least "+this._howMany+" items but contains only "+t+" items")},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return u(t,e)},e.prototype.some=function(t){return u(this,t)},e._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(t,e,i){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var i=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},a=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},r=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return r.call(this._target())},t.prototype.isRejected=function(){return a.call(this._target())},t.prototype.isFulfilled=function(){return o.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return i.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,i){"use strict";e.exports=function(e,i){var n=t("./util"),o=n.errorObj,a=n.isObject,r={}.hasOwnProperty;return function(t,s){if(a(t)){if(t instanceof e)return t;var c=function(t){try{return function(t){return t.then}(t)}catch(t){return o.e=t,o}}(t);if(c===o){s&&s._pushContext();var l=e.reject(c.e);return s&&s._popContext(),l}if("function"==typeof c)return function(t){try{return r.call(t,"_promise0")}catch(t){return!1}}(t)?(l=new e(i),t._then(l._fulfill,l._reject,void 0,l,null),l):function(t,a,r){var s=new e(i),c=s;r&&r._pushContext(),s._captureStackTrace(),r&&r._popContext();var l=!0,u=n.tryCatch(a).call(t,function(t){s&&(s._resolveCallback(t),s=null)},function(t){s&&(s._rejectCallback(t,l,!0),s=null)});return l=!1,s&&u===o&&(s._rejectCallback(u.e,!0,!0),s=null),c}(t,c,s)}return t}}},{"./util":36}],34:[function(t,e,i){"use strict";e.exports=function(e,i,n){var o=t("./util"),a=e.TimeoutError;function r(t){this.handle=t}r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,o){var a,c;return void 0!==o?(a=e.resolve(o)._then(s,null,null,t,void 0),n.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(i),c=setTimeout(function(){a._fulfill()},+t),n.cancellation()&&a._setOnCancel(new r(c)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};function l(t){return clearTimeout(this.handle),t}function u(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return c(t,this)},e.prototype.timeout=function(t,e){var i,s;t=+t;var c=new r(setTimeout(function(){i.isPending()&&function(t,e,i){var n;n="string"!=typeof e?e instanceof Error?e:new a("operation timed out"):new a(e),o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=i&&i.cancel()}(i,e,s)},t));return n.cancellation()?(s=this.then(),(i=s._then(l,u,void 0,c,void 0))._setOnCancel(c)):i=this._then(l,u,void 0,c,void 0),i}}},{"./util":36}],35:[function(t,e,i){"use strict";e.exports=function(e,i,n,o,a,r){var s=t("./util"),c=t("./errors").TypeError,l=t("./util").inherits,u=s.errorObj,d=s.tryCatch,h={};function p(t){setTimeout(function(){throw t},0)}function f(t,i){var o=0,r=t.length,s=new e(a);return function a(){if(o>=r)return s._fulfill();var c=function(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[o++]);if(c instanceof e&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(i),t.promise)}catch(t){return p(t)}if(c instanceof e)return c._then(a,p,null,null,null)}a()}(),s}function g(t,e,i){this._data=t,this._promise=e,this._context=i}function m(t,e,i){this.constructor$(t,e,i)}function v(t){return g.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function b(t){this.length=t,this.promise=null,this[t-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},g.prototype.tryDispose=function(t){var e=this.resource(),i=this._context;void 0!==i&&i._pushContext();var n=e!==h?this.doDispose(e,t):null;return void 0!==i&&i._popContext(),this._promise._unsetDisposable(),this._data=null,n},g.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},l(m,g),m.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},b.prototype._resultCancelled=function(){for(var t=this.length,i=0;i<t;++i){var n=this[i];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return i("you must pass at least 2 arguments to Promise.using");var o,a=arguments[t-1];if("function"!=typeof a)return i("expecting a function but got "+s.classString(a));var c=!0;2===t&&Array.isArray(arguments[0])?(t=(o=arguments[0]).length,c=!1):(o=arguments,t--);for(var l=new b(t),h=0;h<t;++h){var p=o[h];if(g.isDisposer(p)){var m=p;(p=p.promise())._setDisposable(m)}else{var _=n(p);_ instanceof e&&(p=_._then(v,null,null,{resources:l,index:h},void 0))}l[h]=p}var w=new Array(l.length);for(h=0;h<w.length;++h)w[h]=e.resolve(l[h]).reflect();var y=e.all(w).then(function(t){for(var e=0;e<t.length;++e){var i=t[e];if(i.isRejected())return u.e=i.error(),u;if(!i.isFulfilled())return void y.cancel();t[e]=i.value()}k._pushContext(),a=d(a);var n=c?a.apply(void 0,t):a(t),o=k._popContext();return r.checkForgottenReturns(n,o,"Promise.using",k),n}),k=y.lastly(function(){var t=new e.PromiseInspection(y);return f(l,t)});return l.promise=k,k._setOnCancel(l),k},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new m(t,this,o());throw new c}}},{"./errors":12,"./util":36}],36:[function(t,n,o){"use strict";var a,r=t("./es5"),s="undefined"==typeof navigator,c={e:{}},l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:void 0!==this?this:null;function u(){try{var t=a;return a=null,t.apply(this,arguments)}catch(t){return c.e=t,c}}function d(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function h(t,e,i){return d(t)||r.defineProperty(t,e,{value:i,configurable:!0,enumerable:!1,writable:!0}),t}var p=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1};if(r.isES5){var i=Object.getOwnPropertyNames;return function(t){for(var n=[],o=Object.create(null);null!=t&&!e(t);){var a;try{a=i(t)}catch(t){return n}for(var s=0;s<a.length;++s){var c=a[s];if(!o[c]){o[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&n.push(c)}}t=r.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(i){if(e(i))return[];var o=[];t:for(var a in i)if(n.call(i,a))o.push(a);else{for(var r=0;r<t.length;++r)if(n.call(t[r],a))continue t;o.push(a)}return o}}(),f=/this\s*\.\s*\S+\s*=/,g=/^[a-z$_][a-z$_0-9]*$/i;function m(t){try{return t+""}catch(t){return"[no string representation]"}}function v(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){return v(t)&&r.propertyIsWritable(t,"stack")}var _="stack"in new Error?function(t){return b(t)?t:new Error(m(t))}:function(t){if(b(t))return t;try{throw new Error(m(t))}catch(t){return t}};function w(t){return{}.toString.call(t)}var y=function(t){return r.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var k="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,i=[],n=t[Symbol.iterator]();!(e=n.next()).done;)i.push(e.value);return i};y=function(t){return r.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?k(t):null}}var x=void 0!==e&&"[object process]"===w(e).toLowerCase(),S=void 0!==e&&void 0!==e.env,T={isClass:function(t){try{if("function"==typeof t){var e=r.names(t.prototype),i=r.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),o=f.test(t+"")&&r.names(t).length>0;if(i||n||o)return!0}return!1}catch(t){return!1}},isIdentifier:function(t){return g.test(t)},inheritedDataKeys:p,getDataPropertyOrDefault:function(t,e,i){if(!r.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:i:void 0},thrower:function(t){throw t},isArray:r.isArray,asArray:y,notEnumerableProp:h,isPrimitive:d,isObject:function(t){return"function"==typeof t||"object"==typeof t&&null!==t},isError:v,canEvaluate:s,errorObj:c,tryCatch:function(t){return a=t,u},inherits:function(t,e){var i={}.hasOwnProperty;function n(){for(var n in this.constructor=t,this.constructor$=e,e.prototype)i.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}return n.prototype=e.prototype,t.prototype=new n,t.prototype},withAppended:function(t,e){var i,n=t.length,o=new Array(n+1);for(i=0;i<n;++i)o[i]=t[i];return o[i]=e,o},maybeWrapAsError:function(t){return d(t)?new Error(m(t)):t},toFastProperties:function(t){function e(){}e.prototype=t;var i=new e;function n(){return typeof i.foo}return n(),n(),t},filledRange:function(t,e,i){for(var n=new Array(t),o=0;o<t;++o)n[o]=e+o+i;return n},toString:m,canAttachTrace:b,ensureErrorObject:_,originatesFromRejection:function(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)},markAsOriginatingFromRejection:function(t){try{h(t,"isOperational",!0)}catch(t){}},classString:w,copyDescriptors:function(t,e,i){for(var n=r.names(t),o=0;o<n.length;++o){var a=n[o];if(i(a))try{r.defineProperty(e,a,r.getDescriptor(t,a))}catch(t){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:x,hasEnvVariables:S,env:function(t){return S?e.env[t]:void 0},global:l,getNativePromise:function(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}},domainBind:function(t,e){return t.bind(e)}};T.isRecentNode=T.isNode&&function(){var t;return e.versions&&e.versions.node?t=e.versions.node.split(".").map(Number):e.version&&(t=e.version.split(".").map(Number)),0===t[0]&&t[1]>10||t[0]>0}(),T.isNode&&T.toFastProperties(e);try{throw new Error}catch(t){T.lastLineError=t}n.exports=T},{"./es5":13}]},{},[4])(4),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,i(45),i(13),i(212).setImmediate)},function(t,e,i){t.exports=i(213)},function(t,e,i){var n=i(0);t.exports=function(){var t={};return{getState:function(e){if(t[e])return t[e].method();var i={};for(var o in t)t[o].internal||n.mixin(i,t[o].method(),!0);return i},registerProvider:function(e,i,n){t[e]={method:i,internal:n}},unregisterProvider:function(e){delete t[e]}}}},function(t,e){t.exports=function(t){var e={};function i(i,n,o){o=o||i;var a=t.config,r=t.templates;t.config[i]&&e[o]!=a[i]&&(n&&r[o]||(r[o]=t.date.date_to_str(a[i]),e[o]=a[i]))}return{initTemplates:function(){var e=t.locale.labels;e.gantt_save_btn=e.icon_save,e.gantt_cancel_btn=e.icon_cancel,e.gantt_delete_btn=e.icon_delete;var n=t.date,o=n.date_to_str,a=t.config,r=o(a.xml_date||a.date_format,a.server_utc),s=n.str_to_date(a.xml_date||a.date_format,a.server_utc);i("date_scale",!0,void 0),i("date_grid",!0,"grid_date_format"),i("task_date",!0,void 0),t.mixin(t.templates,{xml_format:void 0,format_date:r,xml_date:void 0,parse_date:s,progress_text:function(t,e,i){return""},grid_header_class:function(t,e){return""},task_text:function(t,e,i){return i.text},task_class:function(t,e,i){return""},task_end_date:function(e){return t.templates.task_date(e)},grid_row_class:function(t,e,i){return""},task_row_class:function(t,e,i){return""},timeline_cell_class:function(t,e){return""},scale_cell_class:function(t){return""},scale_row_class:function(t){return""},grid_indent:function(t){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(t){return"<div class='gantt_tree_icon gantt_folder_"+(t.$open?"open":"closed")+"'></div>"},grid_file:function(t){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(t){return"<div class='gantt_tree_icon gantt_"+(t.$open?"close":"open")+"'></div>"},grid_blank:function(t){return"<div class='gantt_tree_icon gantt_blank'></div>"},date_grid:function(e,i,n){return i&&t.isUnscheduledTask(i)&&t.config.show_unscheduled?t.templates.task_unscheduled_time(i):t.templates.grid_date_format(e,n)},task_time:function(e,i,n){return t.isUnscheduledTask(n)&&t.config.show_unscheduled?t.templates.task_unscheduled_time(n):t.templates.task_date(e)+" - "+t.templates.task_end_date(i)},task_unscheduled_time:function(t){return""},time_picker:o(a.time_picker),link_class:function(t){return""},link_description:function(e){var i=t.getTask(e.source),n=t.getTask(e.target);return"<b>"+i.text+"</b> &ndash;  <b>"+n.text+"</b>"},drag_link:function(e,i,n,o){e=t.getTask(e);var a=t.locale.labels,r="<b>"+e.text+"</b> "+(i?a.link_start:a.link_end)+"<br/>";return n&&(r+="<b> "+(n=t.getTask(n)).text+"</b> "+(o?a.link_start:a.link_end)+"<br/>"),r},drag_link_class:function(e,i,n,o){var a="";return e&&n&&(a=" "+(t.isLinkAllowed(e,n,i,o)?"gantt_link_allow":"gantt_link_deny")),"gantt_link_tooltip"+a},tooltip_date_format:n.date_to_str("%Y-%m-%d"),tooltip_text:function(e,i,n){return"<b>Task:</b> "+n.text+"<br/><b>Start date:</b> "+t.templates.tooltip_date_format(e)+"<br/><b>End date:</b> "+t.templates.tooltip_date_format(i)}})},initTemplate:i}}},function(t,e,i){var n=i(4),o=i(0),a=i(46),r=i(11),s=i(1);t.exports=function(t){function e(t){return{target:t.target||t.srcElement,pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,metaKey:t.metaKey,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,altKey:t.altKey}}function i(i,a){this._obj=i,this._settings=a||{},n(this);var r=this.getInputMethods();this._drag_start_timer=null,t.attachEvent("onGanttScroll",o.bind(function(t,e){this.clearDragTimer()},this));for(var c={passive:!1},l=0;l<r.length;l++)o.bind(function(n){t.event(i,n.down,o.bind(function(r){n.accessor(r)&&(a.preventDefault&&a.selector&&s.closest(r.target,a.selector)&&r.preventDefault(),t.config.touch&&r.timeStamp&&r.timeStamp-0<300||(this._settings.original_target=e(r),t.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(o.bind(function(){t.getState().lightbox||this.dragStart(i,r,n)},this),t.config.touch_drag)):this.dragStart(i,r,n)))},this),c),t.event(document.body,n.up,o.bind(function(t){n.accessor(t)&&this.clearDragTimer()},this),c)},this)(r[l])}return i.prototype={traceDragEvents:function(e,i){var n=o.bind(function(t){return this.dragMove(e,t,i.accessor)},this);o.bind(function(t){return this.dragScroll(e,t)},this);var r=o.bind(function(t){if(!this.config.started||!o.defined(this.config.updates_per_second)||a(this,this.config.updates_per_second)){var e=n(t);if(e)try{t&&t.preventDefault&&t.preventDefault()}catch(t){}return e}},this),s=this.config.mousemoveContainer||document.body,c={passive:!1},l=o.bind(function(n){return t.eventRemove(s,i.move,r,c),t.eventRemove(document.body,i.up,l,c),this.dragEnd(e)},this);t.event(s,i.move,r,c),t.event(document.body,i.up,l,c)},checkPositionChange:function(t){var e=t.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(t.x-this.config.pos.x),2)+Math.pow(Math.abs(e),2))>this.config.sensitivity},initDnDMarker:function(){var t=this.config.marker=document.createElement("div");t.className="gantt_drag_marker",t.innerHTML="Dragging object",document.body.appendChild(t)},backupEventTarget:function(i,n){if(t.config.touch){var o=n(i),a=o.target||o.srcElement,r=a.cloneNode(!0);this.config.original_target=e(o),this.config.original_target.target=r,this.config.backup_element=a,a.parentNode.appendChild(r),a.style.display="none",(this.config.mousemoveContainer||document.body).appendChild(a)}},getInputMethods:function(){var e=[];if(e.push({move:"mousemove",down:"mousedown",up:"mouseup",accessor:function(t){return t}}),t.config.touch){var i=!0;try{document.createEvent("TouchEvent")}catch(t){i=!1}i?e.push({move:"touchmove",down:"touchstart",up:"touchend",accessor:function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY),pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t}}):r.navigator.pointerEnabled?e.push({move:"pointermove",down:"pointerdown",up:"pointerup",accessor:function(t){return"mouse"==t.pointerType?null:t}}):r.navigator.msPointerEnabled&&e.push({move:"MSPointerMove",down:"MSPointerDown",up:"MSPointerUp",accessor:function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t}})}return e},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null)},dragStart:function(e,i,n){this.config&&this.config.started||(this.config={obj:e,marker:null,started:!1,pos:this.getPosition(i),sensitivity:4},this._settings&&o.mixin(this.config,this._settings,!0),this.traceDragEvents(e,n),t._prevent_touch_scroll=!0,document.body.className+=" gantt_noselect",t.config.touch&&this.dragMove(e,i,n.accessor))},dragMove:function(e,i,n){var o=n(i);if(!o)return!1;if(!this.config.marker&&!this.config.started){var a=this.getPosition(o);if(t.config.touch||this.checkPositionChange(a)){if(this.config.started=!0,this.config.ignore=!1,!1===this.callEvent("onBeforeDragStart",[e,this.config.original_target]))return this.config.ignore=!0,!1;this.backupEventTarget(i,n),this.initDnDMarker(),t._touch_feedback(),this.callEvent("onAfterDragStart",[e,this.config.original_target])}else this.config.ignore=!0}return!this.config.ignore&&(o.pos=this.getPosition(o),this.config.marker.style.left=o.pos.x+"px",this.config.marker.style.top=o.pos.y+"px",this.callEvent("onDragMove",[e,o]),!0)},dragEnd:function(e){var i=this.config.backup_element;i&&i.parentNode&&i.parentNode.removeChild(i),t._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),this.config.started=!1,document.body.className=document.body.className.replace(" gantt_noselect","")},getPosition:function(t){var e=0,i=0;return t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:e,y:i}}},i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date_to_str:function(t,e,i){return function(n){return t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return i.date.to_fixed(e?n.getUTCDate():n.getDate());case"%m":return i.date.to_fixed(e?n.getUTCMonth()+1:n.getMonth()+1);case"%j":return e?n.getUTCDate():n.getDate();case"%n":return e?n.getUTCMonth()+1:n.getMonth()+1;case"%y":return i.date.to_fixed(e?n.getUTCFullYear()%100:n.getFullYear()%100);case"%Y":return e?n.getUTCFullYear():n.getFullYear();case"%D":return e?i.locale.date.day_short[n.getUTCDay()]:i.locale.date.day_short[n.getDay()];case"%l":return e?i.locale.date.day_full[n.getUTCDay()]:i.locale.date.day_full[n.getDay()];case"%M":return e?i.locale.date.month_short[n.getUTCMonth()]:i.locale.date.month_short[n.getMonth()];case"%F":return e?i.locale.date.month_full[n.getUTCMonth()]:i.locale.date.month_full[n.getMonth()];case"%h":return i.date.to_fixed(e?(n.getUTCHours()+11)%12+1:(n.getHours()+11)%12+1);case"%g":return e?(n.getUTCHours()+11)%12+1:(n.getHours()+11)%12+1;case"%G":return e?n.getUTCHours():n.getHours();case"%H":return i.date.to_fixed(e?n.getUTCHours():n.getHours());case"%i":return i.date.to_fixed(e?n.getUTCMinutes():n.getMinutes());case"%a":return e?n.getUTCHours()>11?"pm":"am":n.getHours()>11?"pm":"am";case"%A":return e?n.getUTCHours()>11?"PM":"AM":n.getHours()>11?"PM":"AM";case"%s":return i.date.to_fixed(e?n.getUTCSeconds():n.getSeconds());case"%W":return i.date.to_fixed(e?i.date.getUTCISOWeek(n):i.date.getISOWeek(n));default:return t}})}},str_to_date:function(t,e,i){return function(n){for(var o=[0,0,1,0,0,0],a=n.match(/[a-zA-Z]+|[0-9]+/g),r=t.match(/%[a-zA-Z]/g),s=0;s<r.length;s++)switch(r[s]){case"%j":case"%d":o[2]=a[s]||1;break;case"%n":case"%m":o[1]=(a[s]||1)-1;break;case"%y":o[0]=1*a[s]+(a[s]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":o[3]=a[s]||0;break;case"%i":o[4]=a[s]||0;break;case"%Y":o[0]=a[s]||0;break;case"%a":case"%A":o[3]=o[3]%12+("am"===(a[s]||"").toLowerCase()?0:12);break;case"%s":o[5]=a[s]||0;break;case"%M":o[1]=i.locale.date.month_short_hash[a[s]]||0;break;case"%F":o[1]=i.locale.date.month_full_hash[a[s]]||0}return e?new Date(Date.UTC(o[0],o[1],o[2],o[3],o[4],o[5])):new Date(o[0],o[1],o[2],o[3],o[4],o[5])}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={date_to_str:function(t,e,i){t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+to_fixed(date.get'+(e?"UTC":"")+'Date())+"';case"%m":return'"+to_fixed((date.get'+(e?"UTC":"")+'Month()+1))+"';case"%j":return'"+date.get'+(e?"UTC":"")+'Date()+"';case"%n":return'"+(date.get'+(e?"UTC":"")+'Month()+1)+"';case"%y":return'"+to_fixed(date.get'+(e?"UTC":"")+'FullYear()%100)+"';case"%Y":return'"+date.get'+(e?"UTC":"")+'FullYear()+"';case"%D":return'"+locale.date.day_short[date.get'+(e?"UTC":"")+'Day()]+"';case"%l":return'"+locale.date.day_full[date.get'+(e?"UTC":"")+'Day()]+"';case"%M":return'"+locale.date.month_short[date.get'+(e?"UTC":"")+'Month()]+"';case"%F":return'"+locale.date.month_full[date.get'+(e?"UTC":"")+'Month()]+"';case"%h":return'"+to_fixed((date.get'+(e?"UTC":"")+'Hours()+11)%12+1)+"';case"%g":return'"+((date.get'+(e?"UTC":"")+'Hours()+11)%12+1)+"';case"%G":return'"+date.get'+(e?"UTC":"")+'Hours()+"';case"%H":return'"+to_fixed(date.get'+(e?"UTC":"")+'Hours())+"';case"%i":return'"+to_fixed(date.get'+(e?"UTC":"")+'Minutes())+"';case"%a":return'"+(date.get'+(e?"UTC":"")+'Hours()>11?"pm":"am")+"';case"%A":return'"+(date.get'+(e?"UTC":"")+'Hours()>11?"PM":"AM")+"';case"%s":return'"+to_fixed(date.get'+(e?"UTC":"")+'Seconds())+"';case"%W":return'"+to_fixed(getISOWeek(date))+"';case"%w":return'"+to_fixed(getWeek(date))+"';default:return t}});var n=new Function("date","to_fixed","locale","getISOWeek","getWeek",'return "'+t+'";');return function(t){return n(t,i.date.to_fixed,i.locale,i.date.getISOWeek,i.date.getWeek)}},str_to_date:function(t,e,i){for(var n="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",o=t.match(/%[a-zA-Z]/g),a=0;a<o.length;a++)switch(o[a]){case"%j":case"%d":n+="set[2]=temp["+a+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+a+"]||1)-1;";break;case"%y":n+="set[0]=temp["+a+"]*1+(temp["+a+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+a+"]||0;";break;case"%i":n+="set[4]=temp["+a+"]||0;";break;case"%Y":n+="set[0]=temp["+a+"]||0;";break;case"%a":case"%A":n+="set[3]=set[3]%12+((temp["+a+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":n+="set[5]=temp["+a+"]||0;";break;case"%M":n+="set[1]=locale.date.month_short_hash[temp["+a+"]]||0;";break;case"%F":n+="set[1]=locale.date.month_full_hash[temp["+a+"]]||0;"}var r="set[0],set[1],set[2],set[3],set[4],set[5]";e&&(r=" Date.UTC("+r+")");var s=new Function("date","locale","var set=[0,0,1,0,0,0]; "+n+" return new Date("+r+");");return function(t){return s(t,i.locale)}}}},function(t,e,i){var n=i(219).default,o=i(218).default;t.exports=function(t){function e(){var e=!1;if("auto"===t.config.csp)try{new Function("result = false;")}catch(t){e=!0}else e=t.config.csp;return e}return{init:function(){for(var e=t.locale,i=e.date.month_short,n=e.date.month_short_hash={},o=0;o<i.length;o++)n[i[o]]=o;for(i=e.date.month_full,n=e.date.month_full_hash={},o=0;o<i.length;o++)n[i[o]]=o},date_part:function(t){var e=new Date(t);return t.setHours(0),this.hour_start(t),t.getHours()&&(t.getDate()<e.getDate()||t.getMonth()<e.getMonth()||t.getFullYear()<e.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(e){var i=e.getDay();return t.config.start_on_monday&&(0===i?i=6:i--),this.date_part(this.add(e,-1*i,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},quarter_start:function(t){this.month_start(t);var e=t.getMonth();return t.setMonth(e>=9?9:e>=6?6:e>=3?3:0),t},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},hour_start:function(t){return t.getMinutes()&&t.setMinutes(0),this.minute_start(t),t},minute_start:function(t){return t.getSeconds()&&t.setSeconds(0),t.getMilliseconds()&&t.setMilliseconds(0),t},_add_days:function(t,e){var i=new Date(t.valueOf());return i.setDate(i.getDate()+e),e>=0&&!t.getHours()&&i.getHours()&&(i.getDate()<=t.getDate()||i.getMonth()<t.getMonth()||i.getFullYear()<t.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(t,e,i){var n=new Date(t.valueOf());switch(i){case"day":n=this._add_days(n,e);break;case"week":n=this._add_days(n,7*e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setYear(n.getFullYear()+e);break;case"hour":n.setTime(n.getTime()+60*e*60*1e3);break;case"minute":n.setTime(n.getTime()+60*e*1e3);break;default:return this["add_"+i](t,e,i)}return n},add_quarter:function(t,e){return this.add(t,3*e,"month")},to_fixed:function(t){return t<10?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(i,a){var r=n;return e()&&(r=o),r.date_to_str(i,a,t)},str_to_date:function(i,a){var r=n;return e()&&(r=o),r.str_to_date(i,a,t)},getISOWeek:function(e){return t.date._getWeekNumber(e,!0)},_getWeekNumber:function(t,e){if(!t)return!1;var i=t.getDay();e&&0===i&&(i=7);var n=new Date(t.valueOf());n.setDate(t.getDate()+(4-i));var o=n.getFullYear(),a=Math.round((n.getTime()-new Date(o,0,1).getTime())/864e5);return 1+Math.floor(a/7)},getWeek:function(e){return t.date._getWeekNumber(e,t.config.start_on_monday)},getUTCISOWeek:function(e){return t.date.getISOWeek(e)},convert_to_utc:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},parseDate:function(e,i){return e&&!e.getFullYear&&("function"!=typeof i&&(i="string"==typeof i?"parse_date"===i||"xml_date"===i?t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date:t.defined(t.templates[i])?t.templates[i]:t.date.str_to_date(i):t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date),e=e?i(e):null),e}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("string"==typeof t||"number"==typeof t)return t;var e="";for(var i in t){var n="";t.hasOwnProperty(i)&&(n=i+"="+(n="string"==typeof t[i]?encodeURIComponent(t[i]):"number"==typeof t[i]?t[i]:encodeURIComponent(JSON.stringify(t[i]))),e.length&&(n="&"+n),e+=n)}return e}},function(t,e,i){var n=i(6),o=i(11),a=i(221).default;function r(t,e){var i={method:t};if(0===e.length)throw new Error("Arguments list of query is wrong.");if(1===e.length)return"string"==typeof e[0]?(i.url=e[0],i.async=!0):(i.url=e[0].url,i.async=e[0].async||!0,i.callback=e[0].callback,i.headers=e[0].headers),i.data=e[0].data?"string"!=typeof e[0].data?a(e[0].data):e[0].data:"",i;switch(i.url=e[0],t){case"GET":case"DELETE":i.callback=e[1],i.headers=e[2];break;case"POST":case"PUT":i.data=e[1]?"string"!=typeof e[1]?a(e[1]):e[1]:"",i.callback=e[2],i.headers=e[3]}return i}t.exports=function(t){return{cache:!0,method:"get",parse:function(t){return"string"!=typeof t?t:(t=t.replace(/^[\s]+/,""),"undefined"==typeof DOMParser||n.isIE?void 0!==o.ActiveXObject&&((e=new o.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e);var e},xmltop:function(e,i,n){if(void 0===i.status||i.status<400){var o=i.responseXML?i.responseXML||i:this.parse(i.responseText||i);if(o&&null!==o.documentElement&&!o.getElementsByTagName("parsererror").length)return o.getElementsByTagName(e)[0]}return-1!==n&&t.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],n]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),n.isIE)return e.selectNodes(t)||[];for(var i,o=[],a=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=a.iterateNext();)o.push(i);return o},query:function(t){return this._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,t.headers)},get:function(t,e,i){var n=r("GET",arguments);return this.query(n)},getSync:function(t,e){var i=r("GET",arguments);return i.async=!1,this.query(i)},put:function(t,e,i,n){var o=r("PUT",arguments);return this.query(o)},del:function(t,e,i){var n=r("DELETE",arguments);return this.query(n)},post:function(t,e,i,n){(1==arguments.length||2==arguments.length&&"function"==typeof e)&&(e="");var o=r("POST",arguments);return this.query(o)},postSync:function(t,e,i){e=null===e?"":String(e);var n=r("POST",arguments);return n.async=!1,this.query(n)},_call:function(e,i,a,r,s,c){return new t.Promise(function(l,u){var d=void 0===typeof XMLHttpRequest||n.isIE?new o.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,h=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(r&&(d.onreadystatechange=function(){if(4==d.readyState||h&&3==d.readyState){if((200!=d.status||""===d.responseText)&&!t.callEvent("onAjaxError",[d]))return;setTimeout(function(){"function"==typeof s&&s.apply(o,[{xmlDoc:d,filePath:i}]),l(d),"function"==typeof s&&(s=null,d=null)},0)}}),"GET"!=e||this.cache||(i+=(i.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),d.open(e,i,r),c)for(var p in c)d.setRequestHeader(p,c[p]);else"POST"==e.toUpperCase()||"PUT"==e||"DELETE"==e?d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==e&&(a=null);if(d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(a),!r)return{xmlDoc:d,filePath:i}})},urlSeparator:function(t){return-1!=t.indexOf("?")?"&":"?"}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.exports=function(){return{layout:{css:"gantt_container",rows:[{cols:[{view:"grid",scrollX:"scrollHor",scrollY:"scrollVer"},{resizer:!0,width:1},{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollVer"}]},{view:"scrollbar",id:"scrollHor",height:20}]},links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},auto_types:!1,duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,show_links:!0,show_task_cells:!0,static_background:!1,static_background_cells:!0,branch_loading:!1,branch_loading_property:"$has_child",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,date_format:"%d-%m-%Y %H:%i",xml_date:void 0,start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,smart_rendering:!0,preserve_scroll:!0,readonly:!1,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,root_id:0,autofit:!1,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:44}],scale_offset_minimal:!0,inherit_scale_class:!1,scales:[{unit:"day",step:1,date:"%d %M"}],time_step:60,duration_step:1,task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"data-task-id",link_attribute:"data-link-id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:"full",min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"data-column-index",keep_grid_width:!1,grid_resize:!1,grid_elastic_columns:!1,show_tasks_outside_timescale:!1,show_unscheduled:!0,readonly_property:"readonly",editable_property:"editable",calendar_property:"calendar_id",resource_calendars:{},dynamic_resource_calendars:!1,inherit_calendar:!1,type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1,placeholder_task:!1,horizontal_scroll_key:"shiftKey",drag_timeline:{useKey:void 0,ignore:".gantt_task_line, .gantt_task_link"},drag_multiple:!0,csp:"auto"}}},function(t,e){t.exports=function(){var t={};return{services:{},setService:function(e,i){t[e]=i},getService:function(e){return t[e]?t[e]():null},dropService:function(e){t[e]&&delete t[e]},destructor:function(){for(var e in t)if(t[e]){var i=t[e];i&&i.destructor&&i.destructor()}t=null}}}},function(t,e){t.exports={KEY_CODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,ESC:27,TAB:9}}},function(t,e,i){t.exports=function(t){var e=new function(){this.constants=i(225),this.version="7.0.8",this.license="enterprise",this.templates={},this.ext={},this.keys={edit_save:this.constants.KEY_CODES.ENTER,edit_cancel:this.constants.KEY_CODES.ESC}},n=new(0,i(47).default)(t);e.plugins=function(t){for(var i in t){var o=n.getExtension(i);o&&o(e)}},e.$services=i(224)(),e.config=i(223)(),e.ajax=i(222)(e),e.date=i(220)(e);var o=i(217)(e);e.$services.setService("dnd",function(){return o});var a=i(216)(e);e.$services.setService("templateLoader",function(){return a}),i(4)(e);var r=new(i(215));r.registerProvider("global",function(){var t={min_date:e._min_date,max_date:e._max_date,selected_task:null};return e.$data&&e.$data.tasksStore&&(t.selected_task=e.$data.tasksStore.getSelectedId()),t}),e.getState=r.getState,e.$services.setService("state",function(){return r});var s=i(0);s.mixin(e,s),e.Promise=i(214),e.env=i(6),i(210)(e);var c=i(204);e.dataProcessor=c.DEPRECATED_api,e.createDataProcessor=c.createDataProcessor,i(199)(e),i(189)(e),i(188)(e),i(182)(e),i(181)(e),i(180)(e),i(168)(e),i(167).default(e),i(166)(e),i(165)(e),i(164)(e),i(161)(e),i(160).default(e);var l=i(159).default();return e.i18n={addLocale:l.addLocale,setLocale:function(t){if("string"==typeof t){var i=l.getLocale(t);i||(i=l.getLocale("en")),e.locale=i}else if(t)if(e.locale)for(var n in t)t[n]&&"object"==typeof t[n]?(e.locale[n]||(e.locale[n]={}),e.mixin(e.locale[n],t[n],!0)):e.locale[n]=t[n];else e.locale=t},getLocale:l.getLocale},e.i18n.setLocale("en"),e}},function(t,e,i){i(27);var n=i(226);t.exports=function(t){var e=n(t);return e.env.isNode||i(127)(e),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(47),o=i(11);e.default=function(t,e){var i=this;this.plugin=function(t){i._ganttPlugin.push(t),void 0!==o.gantt&&o.gantt.getTask&&t(o.gantt)},this.getGanttInstance=function(t){for(var e=i._factoryMethod(i._bundledExtensions),n=0;n<i._ganttPlugin.length;n++)i._ganttPlugin[n](e);return e._internal_id=i._seed++,t&&i._initFromConfig(e,t),e},this._initFromConfig=function(t,e){if(e.plugins)for(var n in e.plugins){var o=i._extensionsManager.getExtension(n);o&&o(t)}if(e.config&&t.mixin(t.config,e.config,!0),e.templates&&t.attachEvent("onTemplatesReady",function(){t.mixin(t.templates,e.templates,!0)},{once:!0}),e.events)for(var a in e.events)t.attachEvent(a,e.events[a]);e.locale&&t.i18n.setLocale(e.locale),Array.isArray(e.calendars)&&e.calendars.forEach(function(e){t.addCalendar(e)}),e.container?t.init(e.container):t.init(),e.data&&("string"==typeof e.data?t.load(e.data):t.parse(e.data))},this._seed=0,this._ganttPlugin=[],this._factoryMethod=t,this._bundledExtensions=e,this._extensionsManager=new n.default(e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.maxSteps=10,this.undoEnabled=!0,this.redoEnabled=!0,this.action={create:function(t){return{commands:t?t.slice():[]}},invert:function(t){for(var i,n=e._gantt.copy(t),o=e.command,a=0;a<t.commands.length;a++){var r=n.commands[a]=o.invert(n.commands[a]);r.type!==o.type.update&&r.type!==o.type.move||(r.value=(i=[r.oldValue,r.value])[0],r.oldValue=i[1])}return n}},this.command={entity:null,type:null,create:function(t,i,n,o){var a=e._gantt;return{entity:o,type:n,value:a.copy(t),oldValue:a.copy(i||t)}},invert:function(t){var i=e._gantt.copy(t);return i.type=e.command.inverseCommands(t.type),i},inverseCommands:function(t){var i=e._gantt,n=e.command.type;switch(t){case n.update:return n.update;case n.remove:return n.add;case n.add:return n.remove;case n.move:return n.move;default:return i.assert(!1,"Invalid command "+t),null}}},this._undoStack=[],this._redoStack=[],this._gantt=t}return t.prototype.getUndoStack=function(){return this._undoStack},t.prototype.getRedoStack=function(){return this._redoStack},t.prototype.clearUndoStack=function(){this._undoStack=[]},t.prototype.clearRedoStack=function(){this._redoStack=[]},t.prototype.updateConfigs=function(){var t=this._gantt;this.maxSteps=t.config.undo_steps||10,this.command.entity=t.config.undo_types,this.command.type=t.config.undo_actions,this.undoEnabled=!!t.config.undo,this.redoEnabled=!!t.config.undo&&!!t.config.redo},t.prototype.undo=function(){var t=this._gantt;if(this.updateConfigs(),this.undoEnabled){var e=this._pop(this._undoStack);if(e&&this._reorderCommands(e),!1!==t.callEvent("onBeforeUndo",[e])&&e)return this._applyAction(this.action.invert(e)),this._push(this._redoStack,t.copy(e)),void t.callEvent("onAfterUndo",[e]);t.callEvent("onAfterUndo",[null])}},t.prototype.redo=function(){var t=this._gantt;if(this.updateConfigs(),this.redoEnabled){var e=this._pop(this._redoStack);if(e&&this._reorderCommands(e),!1!==t.callEvent("onBeforeRedo",[e])&&e)return this._applyAction(e),this._push(this._undoStack,t.copy(e)),void t.callEvent("onAfterRedo",[e]);t.callEvent("onAfterRedo",[null])}},t.prototype.logAction=function(t){this._push(this._undoStack,t),this._redoStack=[]},t.prototype._push=function(t,e){if(e.commands.length&&!1!==this._gantt.callEvent(t===this._undoStack?"onBeforeUndoStack":"onBeforeRedoStack",[e])&&e.commands.length){for(t.push(e);t.length>this.maxSteps;)t.shift();return e}},t.prototype._pop=function(t){return t.pop()},t.prototype._reorderCommands=function(t){var e={any:0,link:1,task:2},i={move:1,any:0};t.commands.sort(function(t,n){return"task"===t.entity&&"task"===n.entity?t.type!==n.type?(i[n.type]||0)-(i[t.type]||0):"move"===t.type&&t.oldValue&&n.oldValue&&n.oldValue.parent===t.oldValue.parent?t.oldValue.$index-n.oldValue.$index:0:(e[n.entity]||e.any)-(e[t.entity]||e.any)})},t.prototype._applyAction=function(t){var e=null,i=this.command.entity,n=this.command.type,o=this._gantt,a={};a[i.task]={add:"addTask",get:"getTask",update:"updateTask",remove:"deleteTask",move:"moveTask",isExists:"isTaskExists"},a[i.link]={add:"addLink",get:"getLink",update:"updateLink",remove:"deleteLink",isExists:"isLinkExists"},o.batchUpdate(function(){for(var i=0;i<t.commands.length;i++){var r=a[(e=t.commands[i]).entity][e.type],s=a[e.entity].get,c=a[e.entity].isExists;if(e.type===n.add)o[r](e.oldValue,e.oldValue.parent,e.oldValue.$index);else if(e.type===n.remove)o[c](e.value.id)&&o[r](e.value.id);else if(e.type===n.update){var l=o[s](e.value.id);for(var u in e.value)u.startsWith("$")||u.startsWith("_")||(l[u]=e.value[u]);o[r](e.value.id)}else e.type===n.move&&o[r](e.value.id,e.value.$index,e.value.parent)}})},t}();e.Undo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={onBeforeUndo:"onAfterUndo",onBeforeRedo:"onAfterRedo"},o=["onTaskDragStart","onAfterTaskUpdate","onAfterTaskDelete","onBeforeBatchUpdate"],a=function(){function t(t,e){this._batchAction=null,this._batchMode=!1,this._ignore=!1,this._ignoreMoveEvents=!1,this._initialTasks={},this._initialLinks={},this._nestedTasks={},this._nestedLinks={},this._undo=t,this._gantt=e,this._attachEvents()}return t.prototype.store=function(t,e,i){return void 0===i&&(i=!1),e===this._gantt.config.undo_types.task?this._storeTask(t,i):e===this._gantt.config.undo_types.link&&this._storeLink(t,i)},t.prototype.isMoveEventsIgnored=function(){return this._ignoreMoveEvents},t.prototype.toggleIgnoreMoveEvents=function(t){this._ignoreMoveEvents=t||!1},t.prototype.startIgnore=function(){this._ignore=!0},t.prototype.stopIgnore=function(){this._ignore=!1},t.prototype.startBatchAction=function(){var t=this;this._timeout||(this._timeout=setTimeout(function(){t.stopBatchAction(),t._timeout=null},10)),this._ignore||this._batchMode||(this._batchMode=!0,this._batchAction=this._undo.action.create())},t.prototype.stopBatchAction=function(){this._ignore||(this._batchAction&&this._undo.logAction(this._batchAction),this._batchMode=!1,this._batchAction=null)},t.prototype.onTaskAdded=function(t){this._ignore||this._storeTaskCommand(t,this._undo.command.type.add)},t.prototype.onTaskUpdated=function(t){this._ignore||this._storeTaskCommand(t,this._undo.command.type.update)},t.prototype.onTaskMoved=function(t){this._ignore||this._storeEntityCommand(t,this.getInitialTask(t.id),this._undo.command.type.move,this._undo.command.entity.task)},t.prototype.onTaskDeleted=function(t){if(!this._ignore){if(this._storeTaskCommand(t,this._undo.command.type.remove),this._nestedTasks[t.id])for(var e=this._nestedTasks[t.id],i=0;i<e.length;i++)this._storeTaskCommand(e[i],this._undo.command.type.remove);if(this._nestedLinks[t.id]){var n=this._nestedLinks[t.id];for(i=0;i<n.length;i++)this._storeLinkCommand(n[i],this._undo.command.type.remove)}}},t.prototype.onLinkAdded=function(t){this._ignore||this._storeLinkCommand(t,this._undo.command.type.add)},t.prototype.onLinkUpdated=function(t){this._ignore||this._storeLinkCommand(t,this._undo.command.type.update)},t.prototype.onLinkDeleted=function(t){this._ignore||this._storeLinkCommand(t,this._undo.command.type.remove)},t.prototype.setNestedTasks=function(t,e){for(var i=null,n=[],o=this._getLinks(this._gantt.getTask(t)),a=0;a<e.length;a++)i=this.setInitialTask(e[a]),o=o.concat(this._getLinks(i)),n.push(i);var r={};for(a=0;a<o.length;a++)r[o[a]]=!0;var s=[];for(var a in r)s.push(this.setInitialLink(a));this._nestedTasks[t]=n,this._nestedLinks[t]=s},t.prototype.setInitialTask=function(t,e){var i=this._gantt;if(e||!this._initialTasks[t]||!this._batchMode){var n=i.copy(i.getTask(t));n.$index=i.getTaskIndex(t),this.setInitialTaskObject(t,n)}return this._initialTasks[t]},t.prototype.getInitialTask=function(t){return this._initialTasks[t]},t.prototype.clearInitialTasks=function(){this._initialTasks={}},t.prototype.setInitialTaskObject=function(t,e){this._initialTasks[t]=e},t.prototype.setInitialLink=function(t,e){return this._initialLinks[t]&&this._batchMode||(this._initialLinks[t]=this._gantt.copy(this._gantt.getLink(t))),this._initialLinks[t]},t.prototype.getInitialLink=function(t){return this._initialLinks[t]},t.prototype.clearInitialLinks=function(){this._initialLinks={}},t.prototype._attachEvents=function(){var t=this,e=null,i=this._gantt,a=function(){e||(e=setTimeout(function(){e=null}),t.clearInitialTasks(),i.eachTask(function(e){t.setInitialTask(e.id)}),t.clearInitialLinks(),i.getLinks().forEach(function(e){t.setInitialLink(e.id)}))},r=function(t){return i.copy(i.getTask(t))};for(var s in n)i.attachEvent(s,function(){return t.startIgnore(),!0}),i.attachEvent(n[s],function(){return t.stopIgnore(),!0});for(s=0;s<o.length;s++)i.attachEvent(o[s],function(){return t.startBatchAction(),!0});i.attachEvent("onParse",function(){t._undo.clearUndoStack(),t._undo.clearRedoStack(),a()}),i.attachEvent("onAfterTaskAdd",function(e,i){t.setInitialTask(e,!0),t.onTaskAdded(i)}),i.attachEvent("onAfterTaskUpdate",function(e,i){t.onTaskUpdated(i)}),i.attachEvent("onAfterTaskDelete",function(e,i){t.onTaskDeleted(i)}),i.attachEvent("onAfterLinkAdd",function(e,i){t.setInitialLink(e,!0),t.onLinkAdded(i)}),i.attachEvent("onAfterLinkUpdate",function(e,i){t.onLinkUpdated(i)}),i.attachEvent("onAfterLinkDelete",function(e,i){t.onLinkDeleted(i)}),i.attachEvent("onRowDragEnd",function(e,i){return t.onTaskMoved(r(e)),t.toggleIgnoreMoveEvents(),!0}),i.attachEvent("onBeforeTaskDelete",function(e){t.store(e,i.config.undo_types.task);var n=[];return a(),i.eachTask(function(t){n.push(t.id)},e),t.setNestedTasks(e,n),!0});var c=i.getDatastore("task");c.attachEvent("onBeforeItemMove",function(e,i,n){return t.isMoveEventsIgnored()||a(),!0}),c.attachEvent("onAfterItemMove",function(e,i,n){return t.isMoveEventsIgnored()||t.onTaskMoved(r(e)),!0}),i.attachEvent("onRowDragStart",function(e,i,n){return t.toggleIgnoreMoveEvents(!0),a(),!0}),i.attachEvent("onBeforeTaskDrag",function(e){return t.store(e,i.config.undo_types.task)}),i.attachEvent("onLightbox",function(e){return t.store(e,i.config.undo_types.task)}),i.attachEvent("onBeforeTaskAutoSchedule",function(e){return t.store(e.id,i.config.undo_types.task),!0}),i.ext.inlineEditors&&i.ext.inlineEditors.attachEvent("onEditStart",function(e){t.store(e.id,i.config.undo_types.task)})},t.prototype._storeCommand=function(t){var e=this._undo;if(e.updateConfigs(),e.undoEnabled)if(this._batchMode)this._batchAction.commands.push(t);else{var i=e.action.create([t]);e.logAction(i)}},t.prototype._storeEntityCommand=function(t,e,i,n){var o=this._undo.command.create(t,e,i,n);this._storeCommand(o)},t.prototype._storeTaskCommand=function(t,e){this._storeEntityCommand(t,this.getInitialTask(t.id),e,this._undo.command.entity.task)},t.prototype._storeLinkCommand=function(t,e){this._storeEntityCommand(t,this.getInitialLink(t.id),e,this._undo.command.entity.link)},t.prototype._getLinks=function(t){return t.$source.concat(t.$target)},t.prototype._storeTask=function(t,e){var i=this;void 0===e&&(e=!1);var n=this._gantt;return this.setInitialTask(t,e),n.eachTask(function(t){i.setInitialTask(t.id)},t),!0},t.prototype._storeLink=function(t,e){return void 0===e&&(e=!1),this.setInitialLink(t,e),!0},t}();e.Monitor=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(230),o=i(229);e.default=function(t){var e=new o.Undo(t),i=new n.Monitor(e,t);function a(t,e,i){t&&(t.id===e&&(t.id=i),t.parent===e&&(t.parent=i))}function r(t,e,i){a(t.value,e,i),a(t.oldValue,e,i)}function s(t,e,i){t&&(t.source===e&&(t.source=i),t.target===e&&(t.target=i))}function c(t,e,i){s(t.value,e,i),s(t.oldValue,e,i)}function l(t,i,n){for(var o=e,a=0;a<t.length;a++)for(var s=t[a],l=0;l<s.commands.length;l++)s.commands[l].entity===o.command.entity.task?r(s.commands[l],i,n):s.commands[l].entity===o.command.entity.link&&c(s.commands[l],i,n)}function u(t,i,n){for(var o=e,a=0;a<t.length;a++)for(var r=t[a],s=0;s<r.commands.length;s++){var c=r.commands[s];c.entity===o.command.entity.link&&(c.value&&c.value.id===i&&(c.value.id=n),c.oldValue&&c.oldValue.id===i&&(c.oldValue.id=n))}}t.config.undo=!0,t.config.redo=!0,t.config.undo_types={link:"link",task:"task"},t.config.undo_actions={update:"update",remove:"remove",add:"add",move:"move"},t.ext||(t.ext={}),t.ext.undo={undo:function(){return e.undo()},redo:function(){return e.redo()},getUndoStack:function(){return e.getUndoStack()},getRedoStack:function(){return e.getRedoStack()},clearUndoStack:function(){return e.clearUndoStack()},clearRedoStack:function(){return e.clearRedoStack()},saveState:function(t,e){return i.store(t,e,!0)}},t.undo=t.ext.undo.undo,t.redo=t.ext.undo.redo,t.getUndoStack=t.ext.undo.getUndoStack,t.getRedoStack=t.ext.undo.getRedoStack,t.clearUndoStack=t.ext.undo.clearUndoStack,t.clearRedoStack=t.ext.undo.clearRedoStack,t.attachEvent("onTaskIdChange",function(t,i){var n=e;l(n.getUndoStack(),t,i),l(n.getRedoStack(),t,i)}),t.attachEvent("onLinkIdChange",function(t,i){var n=e;u(n.getUndoStack(),t,i),u(n.getRedoStack(),t,i)}),t.attachEvent("onGanttReady",function(){e.updateConfigs()})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(t){this._gantt=t}return t.prototype.getNode=function(){var t=this._gantt;return this._tooltipNode||(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="gantt_tooltip",t._waiAria.tooltipAttr(this._tooltipNode)),this._tooltipNode},t.prototype.setViewport=function(t){return this._root=t,this},t.prototype.show=function(t,e){var i=this._gantt,o=document.body,a=this.getNode();if(n.isChildOf(a,o)||(this.hide(),o.appendChild(a)),this._isLikeMouseEvent(t)){var r=this._calculateTooltipPosition(t);e=r.top,t=r.left}return a.style.top=e+"px",a.style.left=t+"px",i._waiAria.tooltipVisibleAttr(a),this},t.prototype.hide=function(){var t=this._gantt,e=this.getNode();return e&&e.parentNode&&e.parentNode.removeChild(e),t._waiAria.tooltipHiddenAttr(e),this},t.prototype.setContent=function(t){return this.getNode().innerHTML=t,this},t.prototype._isLikeMouseEvent=function(t){return!(!t||"object"!=typeof t)&&"clientX"in t&&"clientY"in t},t.prototype._getViewPort=function(){return this._root||document.body},t.prototype._calculateTooltipPosition=function(t){var e=this._gantt,i=this._getViewPortSize(),o=this.getNode(),a={top:0,left:0,width:o.offsetWidth,height:o.offsetHeight,bottom:0,right:0},r=e.config.tooltip_offset_x,s=e.config.tooltip_offset_y,c=document.body,l=n.getRelativeEventPosition(t,c),u=n.getNodePosition(c);l.y+=u.y,a.top=l.y,a.left=l.x,a.top+=s,a.left+=r,a.bottom=a.top+a.height,a.right=a.left+a.width;var d=window.scrollY+c.scrollTop;return a.top<i.top-d?(a.top=i.top,a.bottom=a.top+a.height):a.bottom>i.bottom&&(a.bottom=i.bottom,a.top=a.bottom-a.height),a.left<i.left?(a.left=i.left,a.right=i.left+a.width):a.right>i.right&&(a.right=i.right,a.left=a.right-a.width),l.x>=a.left&&l.x<=a.right&&(a.left=l.x-a.width-r,a.right=a.left+a.width),l.y>=a.top&&l.y<=a.bottom&&(a.top=l.y-a.height-s,a.bottom=a.top+a.height),a},t.prototype._getViewPortSize=function(){var t,e=this._gantt,i=this._getViewPort(),o=i,a=window.scrollY+document.body.scrollTop,r=window.scrollX+document.body.scrollLeft;return i===e.$task_data?(o=e.$task,a=0,r=0,t=n.getNodePosition(e.$task)):t=n.getNodePosition(o),{left:t.x+r,top:t.y+a,width:t.width,height:t.height,bottom:t.y+t.height+a,right:t.x+t.width+r}},t}();e.Tooltip=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(48),o=i(1),a=i(3),r=i(232),s=function(){function t(t){this._listeners={},this.tooltip=new r.Tooltip(t),this._gantt=t,this._domEvents=n(),this._initDelayedFunctions()}return t.prototype.destructor=function(){this.tooltip.hide(),this._domEvents.detachAll()},t.prototype.hideTooltip=function(){this.delayHide()},t.prototype.attach=function(t){var e=this,i=document.body;t.global||(i=this._gantt.$root);var n=null,a=function(i){var a=o.getTargetNode(i),r=o.closest(a,t.selector);if(!o.isChildOf(a,e.tooltip.getNode())){var s=function(){n=r,t.onmouseenter(i,r)};n?r&&r===n?t.onmousemove(i,r):(t.onmouseleave(i,n),n=null,r&&r!==n&&s()):r&&s()}};this.detach(t.selector),this._domEvents.attach(i,"mousemove",a),this._listeners[t.selector]={node:i,handler:a}},t.prototype.detach=function(t){var e=this._listeners[t];e&&this._domEvents.detach(e.node,"mousemove",e.handler)},t.prototype.tooltipFor=function(t){var e=this,i=function(t){var e=t;return document.createEventObject&&!document.createEvent&&(e=document.createEventObject(t)),e};this._initDelayedFunctions(),this.attach({selector:t.selector,global:t.global,onmouseenter:function(n,o){var a=t.html(n,o);a&&e.delayShow(i(n),a)},onmousemove:function(n,o){var a=t.html(n,o);a?e.delayShow(i(n),a):(e.delayShow.$cancelTimeout(),e.delayHide())},onmouseleave:function(){e.delayShow.$cancelTimeout(),e.delayHide()}})},t.prototype._initDelayedFunctions=function(){var t=this,e=this._gantt;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=a.delay(function(i,n){!1===e.callEvent("onBeforeTooltip",[i])?t.tooltip.hide():(t.tooltip.setContent(n),t.tooltip.show(i))},e.config.tooltip_timeout||1),this.delayHide=a.delay(function(){t.delayShow.$cancelTimeout(),t.tooltip.hide()},e.config.tooltip_hide_timeout||1)},t}();e.TooltipManager=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(233);e.default=function(t){t.config.tooltip_timeout=30,t.config.tooltip_offset_y=20,t.config.tooltip_offset_x=10,t.config.tooltip_hide_timeout=30;var e=new n.TooltipManager(t);t.ext.tooltips=e,t.attachEvent("onGanttReady",function(){e.tooltipFor({selector:"["+t.config.task_attribute+"]:not(.gantt_task_row)",html:function(e){if(!t.config.touch||t.config.touch_tooltip){var i=t.locate(e);if(t.isTaskExists(i)){var n=t.getTask(i);return t.templates.tooltip_text(n.start_date,n.end_date,n)}return null}},global:!1})}),t.attachEvent("onDestroy",function(){e.destructor()}),t.attachEvent("onLightbox",function(){e.hideTooltip()}),t.attachEvent("onBeforeTooltip",function(){if(t.getState().link_source_id)return!1}),t.attachEvent("onGanttScroll",function(){e.hideTooltip()})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.show=function(t,i){void 0===i?e._showForTask(t):e._showAtCoordinates(t,i)},this.hide=function(t){var i=e._gantt,n=e._quickInfoBox;e._quickInfoBoxId=0;var o=e._quickInfoTask;if(e._quickInfoTask=null,n&&n.parentNode){if(i.config.quick_info_detached)return i.callEvent("onAfterQuickInfo",[o]),n.parentNode.removeChild(n);n.className+=" gantt_qi_hidden","auto"===n.style.right?n.style.left="-350px":n.style.right="-350px",t&&(n.style.left=n.style.right="",n.parentNode.removeChild(n)),i.callEvent("onAfterQuickInfo",[o])}},this.getNode=function(){return e._quickInfoBox?e._quickInfoBox:null},this.setContainer=function(t){t&&(e._container="string"==typeof t?document.getElementById(t):t)},this.setContent=function(t){var i=e._gantt,n={taskId:null,header:{title:"",date:""},content:"",buttons:i.config.quickinfo_buttons};t||(t=n),t.taskId||(t.taskId=n.taskId),t.header||(t.header=n.header),t.header.title||(t.header.title=n.header.title),t.header.date||(t.header.date=n.header.date),t.content||(t.content=n.content),t.buttons||(t.buttons=n.buttons);var o=e.getNode();o||(o=e._createQuickInfoElement()),t.taskId&&(e._quickInfoBoxId=t.taskId);var a=o.querySelector(".gantt_cal_qi_title"),r=a.querySelector(".gantt_cal_qi_tcontent"),s=a.querySelector(".gantt_cal_qi_tdate"),c=o.querySelector(".gantt_cal_qi_content"),l=o.querySelector(".gantt_cal_qi_controls");i._waiAria.quickInfoHeader(o,[t.header.title,t.header.date].join(" ")),r.innerHTML=t.header.title,s.innerHTML=t.header.date,a.style.display=t.header.title||t.header.date?"":"none",c.innerHTML=t.content;var u=t.buttons;l.style.display=u.length?"":"none";for(var d="",h=0;h<u.length;h++){var p=i._waiAria.quickInfoButtonAttrString(i.locale.labels[u[h]]);d+='<div class="gantt_qi_big_icon '+u[h]+'" title="'+i.locale.labels[u[h]]+'" '+p+"><div class='gantt_menu_icon "+u[h]+"'></div><div>"+i.locale.labels[u[h]]+"</div></div>"}l.innerHTML=d,i.eventRemove(o,"click",e._qiButtonClickHandler),i.eventRemove(o,"keypress",e._qiKeyPressHandler),i.event(o,"click",e._qiButtonClickHandler),i.event(o,"keypress",e._qiKeyPressHandler)},this._qiButtonClickHandler=function(t){t=t||event,e._qi_button_click(t.target||t.srcElement)},this._qiKeyPressHandler=function(t){var i=(t=t||event).which||event.keyCode;13!==i&&32!==i||setTimeout(function(){e._qi_button_click(t.target||t.srcElement)},1)},this._gantt=t}return t.prototype._showAtCoordinates=function(t,e){this.hide(!0),this._quickInfoBoxId=0,this._quickInfoTask=null,this._quickInfoBox||(this._createQuickInfoElement(),this.setContent()),this._appendAtCoordinates(t,e),this._gantt.callEvent("onQuickInfo",[null])},t.prototype._showForTask=function(t){var e=this._gantt;if((t!==this._quickInfoBoxId||!e.utils.dom.isChildOf(this._quickInfoBox,document.body))&&e.config.show_quick_info){this.hide(!0);var i=this._getContainer(),n=this._get_event_counter_part(t,6,i.xViewport,i.yViewport);n&&(this._quickInfoBox=this._init_quick_info(t),this._quickInfoTask=t,this._quickInfoBox.className=this._prepare_quick_info_classname(t),this._fill_quick_data(t),this._show_quick_info(n,6),e.callEvent("onQuickInfo",[t]))}},t.prototype._get_event_counter_part=function(t,e,i,n){var o=this._gantt,a=o.getTaskNode(t);if(!a&&!(a=o.getTaskRowNode(t)))return null;var r=0,s=e+a.offsetTop+a.offsetHeight,c=a;if(o.utils.dom.isChildOf(c,i))for(;c&&c!==i;)r+=c.offsetLeft,c=c.offsetParent;var l=o.getScrollState();return c?{left:r,top:s,dx:r+a.offsetWidth/2-l.x>i.offsetWidth/2?1:0,dy:s+a.offsetHeight/2-l.y>n.offsetHeight/2?1:0,width:a.offsetWidth,height:a.offsetHeight}:null},t.prototype._createQuickInfoElement=function(){var t=this,e=this._gantt,i=document.createElement("div");i.className+="gantt_cal_quick_info",e._waiAria.quickInfoAttr(i);var n='<div class="gantt_cal_qi_title" '+e._waiAria.quickInfoHeaderAttrString()+'><div class="gantt_cal_qi_tcontent"></div><div  class="gantt_cal_qi_tdate"></div></div><div class="gantt_cal_qi_content"></div>';if(n+='<div class="gantt_cal_qi_controls">',i.innerHTML=n+="</div>",e.config.quick_info_detached){var o=this._getContainer();e.event(o.parent,"scroll",function(){t.hide()})}return this._quickInfoBox=i,i},t.prototype._init_quick_info=function(t){var e=this._gantt,i=e.getTask(t);return"boolean"==typeof this._quickInfoReadonly&&e.isReadonly(i)!==this._quickInfoReadonly&&(this.hide(!0),this._quickInfoBox=null),this._quickInfoReadonly=e.isReadonly(i),this._quickInfoBox||(this._quickInfoBox=this._createQuickInfoElement()),this._quickInfoBox},t.prototype._prepare_quick_info_classname=function(t){var e=this._gantt,i=e.getTask(t),n="gantt_cal_quick_info",o=e.templates.quick_info_class(i.start_date,i.end_date,i);return o&&(n+=" "+o),n},t.prototype._fill_quick_data=function(t){var e=this._gantt,i=e.getTask(t);this._quickInfoBoxId=t;var n=null;if(this._quickInfoReadonly)for(var o=e.config.quickinfo_buttons,a={icon_delete:!0,icon_edit:!0},r=0;r<o.length;r++)this._quickInfoReadonly&&a[o[r]]||n.push(o[r]);else n=e.config.quickinfo_buttons;this.setContent({header:{title:e.templates.quick_info_title(i.start_date,i.end_date,i),date:e.templates.quick_info_date(i.start_date,i.end_date,i)},content:e.templates.quick_info_content(i.start_date,i.end_date,i),buttons:n})},t.prototype._appendAtCoordinates=function(t,e){var i=this._quickInfoBox,n=this._getContainer();i.parentNode&&"#document-fragment"!==i.parentNode.nodeName.toLowerCase()||n.parent.appendChild(i),i.style.left=t+"px",i.style.top=e+"px"},t.prototype._show_quick_info=function(t,e){var i=this._gantt,n=this._quickInfoBox;if(i.config.quick_info_detached){var o=this._getContainer();n.parentNode&&"#document-fragment"!==n.parentNode.nodeName.toLowerCase()||o.parent.appendChild(n);var a=n.offsetWidth,r=n.offsetHeight,s=i.getScrollState(),c=o.yViewport,l=o.xViewport.offsetWidth+s.x-a,u=t.top-s.y+r,d=t.top;u>c.offsetHeight/2&&(d=t.top-(r+t.height+2*e))<s.y&&u<=c.offsetHeight&&(d=t.top),d<s.y&&(d=s.y);var h=Math.min(Math.max(s.x,t.left-t.dx*(a-t.width)),l);this._appendAtCoordinates(h,d)}else n.style.top="20px",1===t.dx?(n.style.right="auto",n.style.left="-300px",setTimeout(function(){n.style.left="10px"},1)):(n.style.left="auto",n.style.right="-300px",setTimeout(function(){n.style.right="10px"},1)),n.className+=" gantt_qi_"+(1===t.dx?"left":"right"),i.$root.appendChild(n)},t.prototype._qi_button_click=function(t){var e=this._gantt;if(t&&t!==this._quickInfoBox){var i=t.className;if(-1!==i.indexOf("_icon")){var n=this._quickInfoBoxId;e.$click.buttons[i.split(" ")[1].replace("icon_","")](n)}else this._qi_button_click(t.parentNode)}},t.prototype._getContainer=function(){var t=this._gantt,e=this._container?this._container:t.$task_data;return e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:t.$task,yViewport:t.$task_data}:(e=this._container?this._container:t.$grid_data)&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:t.$grid,yViewport:t.$grid_data}:{parent:this._container?this._container:t.$layout,xViewport:t.$layout,yViewport:t.$layout}},t}();e.QuickInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(235);e.default=function(t){t.ext||(t.ext={}),t.ext.quickInfo=new n.QuickInfo(t),t.config.quickinfo_buttons=["icon_delete","icon_edit"],t.config.quick_info_detached=!0,t.config.show_quick_info=!0,t.templates.quick_info_title=function(t,e,i){return i.text.substr(0,50)},t.templates.quick_info_content=function(t,e,i){return i.details||i.text},t.templates.quick_info_date=function(e,i,n){return t.templates.task_time(e,i,n)},t.templates.quick_info_class=function(t,e,i){return""},t.attachEvent("onTaskClick",function(e){return setTimeout(function(){t.ext.quickInfo.show(e)},0),!0});for(var e=["onEmptyClick","onViewChange","onLightbox","onBeforeTaskDelete","onBeforeDrag"],i=function(){return t.ext.quickInfo.hide(),!0},o=0;o<e.length;o++)t.attachEvent(e[o],i);function a(){return t.ext.quickInfo.hide(),t.ext.quickInfo._quickInfoBox=null,!0}t.attachEvent("onGanttReady",a),t.attachEvent("onDestroy",a),t.event(window,"keydown",function(e){27===e.keyCode&&t.ext.quickInfo.hide()})}},function(t,e){t.exports=function(t){t.ext||(t.ext={}),t.ext.overlay={};var e={};function i(){if(t.$task_data){t.event(t.$task_data,"scroll",function(e){t.ext.$overlay_area&&(t.ext.$overlay_area.style.top=e.target.scrollTop+"px")});var e=document.createElement("div");e.className="gantt_overlay_area",t.$task_data.appendChild(e),t.ext.$overlay_area=e,n()}}function n(){for(var t in e){var i=e[t];i.isAttached||o(i)}}function o(e){t.ext.$overlay_area.appendChild(e.node),e.isAttached=!0}function a(){t.ext.$overlay_area.style.display="block"}function r(){var i=!1;for(var n in e)if(e[n].isVisible){i=!0;break}i||(t.ext.$overlay_area.style.display="none")}t.attachEvent("onBeforeGanttRender",function(){t.ext.$overlay_area||i(),n(),r()}),t.attachEvent("onGanttReady",function(){i(),n(),r()}),t.ext.overlay.addOverlay=function(i,n){return n=n||t.uid(),e[n]=function(t,e){var i=document.createElement("div");return i.setAttribute("data-overlay-id",t),i.className="gantt_overlay",i.style.display="none",{id:t,render:e,isVisible:!1,isAttached:!1,node:i}}(n,i),n},t.ext.overlay.deleteOverlay=function(t){return!!e[t]&&(delete e[t],r(),!0)},t.ext.overlay.getOverlaysIds=function(){var t=[];for(var i in e)t.push(i);return t},t.ext.overlay.refreshOverlay=function(t){a(),e[t].isVisible=!0,e[t].node.innerHTML="",e[t].node.style.display="block",e[t].render(e[t].node)},t.ext.overlay.showOverlay=function(t){a(),this.refreshOverlay(t)},t.ext.overlay.hideOverlay=function(t){e[t].isVisible=!1,e[t].node.style.display="none",r()},t.ext.overlay.isOverlayVisible=function(t){return!!t&&e[t].isVisible}}},function(t,e){t.exports=function(t){t.config.multiselect=!0,t.config.multiselect_one_level=!1,t._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var t=this.getSelected();return t.length?t[t.length-1]:null},setFirstSelected:function(t){this._first_selected_when_shift=t},getFirstSelected:function(){return this._first_selected_when_shift},isActive:function(){return this.updateState(),this._active},updateState:function(){this._one_level=t.config.multiselect_one_level;var e=this._active;this._active=t.config.multiselect,this._active!=e&&this.reset()},reset:function(){this._selected={}},setLastSelected:function(e){t.$data.tasksStore.silent(function(){var i=t.$data.tasksStore;e?i.select(e+""):i.unselect(null)})},getLastSelected:function(){var e=t.$data.tasksStore.getSelectedId();return e&&t.isTaskExists(e)?e:null},select:function(e,i){return!!(e&&t.callEvent("onBeforeTaskMultiSelect",[e,!0,i])&&t.callEvent("onBeforeTaskSelected",[e]))&&(this._selected[e]=!0,this.setLastSelected(e),this.afterSelect(e),t.callEvent("onTaskMultiSelect",[e,!0,i]),t.callEvent("onTaskSelected",[e]),!0)},toggle:function(t,e){this._selected[t]?this.unselect(t,e):this.select(t,e)},unselect:function(e,i){e&&t.callEvent("onBeforeTaskMultiSelect",[e,!1,i])&&(this._selected[e]=!1,this.getLastSelected()==e&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(e),t.callEvent("onTaskMultiSelect",[e,!1,i]),t.callEvent("onTaskUnselected",[e]))},isSelected:function(e){return!(!t.isTaskExists(e)||!this._selected[e])},getSelected:function(){var e=[];for(var i in this._selected)this._selected[i]&&t.isTaskExists(i)?e.push(i):this._selected[i]=!1;return e.sort(function(e,i){return t.getGlobalTaskIndex(e)>t.getGlobalTaskIndex(i)?1:-1}),e},forSelected:function(t){for(var e=this.getSelected(),i=0;i<e.length;i++)t(e[i])},isSameLevel:function(e){if(!this._one_level)return!0;var i=this.getLastSelected();return!(i&&t.isTaskExists(i)&&t.isTaskExists(e)&&t.calculateTaskLevel(t.getTask(i))!=t.calculateTaskLevel(t.getTask(e)))},afterSelect:function(e){t.isTaskExists(e)&&(t.getDatastore("task")._quick_refresh=!0,t.getDatastore("link")._quick_refresh=!0,t.refreshTask(e),t.getDatastore("task")._quick_refresh=!1,t.getDatastore("link")._quick_refresh=!1)},doSelection:function(e){if(!this.isActive())return!1;if(t._is_icon_open_click(e))return!1;var i=t.locate(e);if(!i)return!1;if(!t.callEvent("onBeforeMultiSelect",[e]))return!1;var n=this.getSelected(),o=this.getFirstSelected(),a=!1,r=this.getLastSelected();if(e.shiftKey?t.isTaskExists(this.getFirstSelected())&&null!==this.getFirstSelected()||this.setFirstSelected(i):(e.ctrlKey||e.metaKey)&&this.isSelected(i)||this.setFirstSelected(i),e.ctrlKey||e.metaKey)i&&this.toggle(i,e);else if(e.shiftKey&&n.length)if(r){if(i){for(var s=t.getGlobalTaskIndex(this.getFirstSelected()),c=t.getGlobalTaskIndex(i),l=t.getGlobalTaskIndex(r),u=r;t.getGlobalTaskIndex(u)!==s;)this.unselect(u,e),u=s>l?t.getNext(u):t.getPrev(u);for(u=i;t.getGlobalTaskIndex(u)!==s;)this.select(u,e)&&!a&&(a=!0,o=u),u=s>c?t.getNext(u):t.getPrev(u)}}else r=i;else{this.isSelected(i)||this.select(i,e),n=this.getSelected();for(var d=0;d<n.length;d++)n[d]!==i&&this.unselect(n[d],e)}return this.isSelected(i)?this.setLastSelected(i):o?i==r&&this.setLastSelected(e.shiftKey?o:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0}},function(){var e=t.selectTask;t.selectTask=function(i){if(!i)return!1;var n=t._multiselect,o=i;return n.isActive()?(n.select(i,null)&&n.setLastSelected(i),n.setFirstSelected(n.getLastSelected())):o=e.call(this,i),o};var i=t.unselectTask;t.unselectTask=function(e){var n=t._multiselect,o=n.isActive();(e=e||n.getLastSelected())&&o&&(n.unselect(e,null),e==n.getLastSelected()&&n.setLastSelected(null),t.refreshTask(e),n.setFirstSelected(n.getLastSelected()));var a=e;return o||(a=i.call(this,e)),a},t.toggleTaskSelection=function(e){var i=t._multiselect;e&&i.isActive()&&(i.toggle(e),i.setFirstSelected(i.getLastSelected()))},t.getSelectedTasks=function(){var e=t._multiselect;return e.isActive(),e.getSelected()},t.eachSelectedTask=function(t){return this._multiselect.forSelected(t)},t.isSelectedTask=function(t){return this._multiselect.isSelected(t)},t.getLastSelectedTask=function(){return this._multiselect.getLastSelected()},t.attachEvent("onGanttReady",function(){var e=t.$data.tasksStore.isSelected;t.$data.tasksStore.isSelected=function(i){return t._multiselect.isActive()?t._multiselect.isSelected(i):e.call(this,i)}})}(),t.attachEvent("onTaskIdChange",function(e,i){var n=t._multiselect;if(!n.isActive())return!0;t.isSelectedTask(e)&&(n.unselect(e,null),n.select(i,null))}),t.attachEvent("onAfterTaskDelete",function(e,i){var n=t._multiselect;if(!n.isActive())return!0;n._selected[e]&&(n.unselect(e,null),n._selected[e]=!1,n.setLastSelected(n.getDefaultSelected())),n.forSelected(function(e){t.isTaskExists(e)||n.unselect(e,null)})}),t.attachEvent("onBeforeTaskMultiSelect",function(e,i,n){var o=t._multiselect;return!(i&&o.isActive()&&o._one_level)||o.isSameLevel(e)}),t.attachEvent("onTaskClick",function(e,i){return t._multiselect.doSelection(i)&&t.callEvent("onMultiSelect",[i]),!0})}},function(t,e){t.exports=function(t){function e(e){if(!t.config.show_markers)return!1;if(!e.start_date)return!1;var i=t.getState();if(!(+e.start_date>+i.max_date||(!e.end_date||+e.end_date<+i.min_date)&&+e.start_date<+i.min_date)){var n=document.createElement("div");n.setAttribute("data-marker-id",e.id);var o="gantt_marker";t.templates.marker_class&&(o+=" "+t.templates.marker_class(e)),e.css&&(o+=" "+e.css),e.title&&(n.title=e.title),n.className=o;var a=t.posFromDate(e.start_date);if(n.style.left=a+"px",n.style.height=Math.max(t.getRowTop(t.getVisibleTaskCount()),0)+"px",e.end_date){var r=t.posFromDate(e.end_date);n.style.width=Math.max(r-a,0)+"px"}return e.text&&(n.innerHTML="<div class='gantt_marker_content' >"+e.text+"</div>"),n}}function i(){if(t.$task_data){var e=document.createElement("div");e.className="gantt_marker_area",t.$task_data.appendChild(e),t.$marker_area=e}}t._markers||(t._markers=t.createDatastore({name:"marker",initItem:function(e){return e.id=e.id||t.uid(),e}})),t.config.show_markers=!0,t.attachEvent("onBeforeGanttRender",function(){t.$marker_area||i()}),t.attachEvent("onDataRender",function(){t.$marker_area||(i(),t.renderMarkers())}),t.attachEvent("onGanttReady",function(){i(),t.$services.getService("layers").createDataRender({name:"marker",defaultContainer:function(){return t.$marker_area}}).addLayer(e)}),t.getMarker=function(t){return this._markers?this._markers.getItem(t):null},t.addMarker=function(t){return this._markers.addItem(t)},t.deleteMarker=function(t){return!!this._markers.exists(t)&&(this._markers.removeItem(t),!0)},t.updateMarker=function(t){this._markers.refresh(t)},t._getMarkers=function(){return this._markers.getItems()},t.renderMarkers=function(){this._markers.refresh()}}},function(t,e){t.exports=function(t){t.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new t.$keyboardNavigation.GanttNode,enable:function(){this.isActive=!0,this.setActiveNode(this.getActiveNode())},disable:function(){this.isActive=!1},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){var e;return(e=t.config.keyboard_navigation_cells?new t.$keyboardNavigation.TaskCell:new t.$keyboardNavigation.TaskRow).isValid()||(e=e.fallback()),e},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var t=this.activeNode;return t&&!t.isValid()&&(t=t.fallback()),t},fromDomElement:function(e){for(var i=[t.$keyboardNavigation.TaskRow,t.$keyboardNavigation.TaskCell,t.$keyboardNavigation.HeaderCell],n=0;n<i.length;n++)if(i[n].prototype.fromDomElement){var o=i[n].prototype.fromDomElement(e);if(o)return o}return null},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(t){var e=!0;this.activeNode&&this.activeNode.compareTo(t)&&(e=!1),this.isEnabled()&&(e&&this.blurNode(this.activeNode),this.activeNode=t,this.focusNode(this.activeNode,!e))},focusNode:function(t,e){t&&t.focus&&t.focus(e)},blurNode:function(t){t&&t.blur&&t.blur()},keyDownHandler:function(e){if(!t.$keyboardNavigation.isModal()&&this.isEnabled()&&!e.defaultPrevented){var i=this.globalNode,n=t.$keyboardNavigation.shortcuts.getCommandFromEvent(e),o=this.getActiveNode();!1!==t.$keyboardNavigation.facade.callEvent("onKeyDown",[n,e])&&(o?o.findHandler(n)?o.doAction(n,e):i.findHandler(n)&&i.doAction(n,e):this.setDefaultNode())}},_timeout:null,awaitsFocus:function(){return null!==this._timeout},delay:function(e,i){clearTimeout(this._timeout),this._timeout=setTimeout(t.bind(function(){this._timeout=null,e()},this),i||1)},clearDelay:function(){clearTimeout(this._timeout)}}}},function(t,e){t.exports=function(t){!function(){var e=[];function i(){return!!e.length}function n(e){setTimeout(function(){i()||t.$destroyed||t.focus()},1)}function o(i){t.eventRemove(i,"keydown",r),t.event(i,"keydown",r),e.push(i)}function a(){var i=e.pop();i&&t.eventRemove(i,"keydown",r),n()}function r(i){var n=i.currentTarget;(function(t){return t==e[e.length-1]})(n)&&t.$keyboardNavigation.trapFocus(n,i)}function s(){o(t.getLightbox())}t.attachEvent("onLightbox",s),t.attachEvent("onAfterLightbox",a),t.attachEvent("onLightboxChange",function(){a(),s()}),t.attachEvent("onAfterQuickInfo",function(){n()}),t.attachEvent("onMessagePopup",function(t){c=document.activeElement,o(t)}),t.attachEvent("onAfterMessagePopup",function(){a(),setTimeout(function(){c&&(c.focus(),c=null)},1)});var c=null;t.$keyboardNavigation.isModal=i}()}},function(t,e,i){t.exports=function(t){var e=i(1);t.$keyboardNavigation.TaskCell=function(e,i){if(!e){var n=t.getChildren(t.config.root_id);n[0]&&(e=n[0])}this.taskId=e,this.columnIndex=i||0,t.isTaskExists(this.taskId)&&(this.index=t.getTaskIndex(this.taskId))},t.$keyboardNavigation.TaskCell.prototype=t._compose(t.$keyboardNavigation.TaskRow,{_handlers:null,isValid:function(){return t.$keyboardNavigation.TaskRow.prototype.isValid.call(this)&&!!t.getGridColumns()[this.columnIndex]},fallback:function(){var e=t.$keyboardNavigation.TaskRow.prototype.fallback.call(this),i=e;if(e instanceof t.$keyboardNavigation.TaskRow){for(var n=t.getGridColumns(),o=this.columnIndex;o>=0&&!n[o];)o--;n[o]&&(i=new t.$keyboardNavigation.TaskCell(e.taskId,o))}return i},fromDomElement:function(i){if(!t.config.keyboard_navigation_cells)return null;var n=t.locate(i);if(t.isTaskExists(n)){var o=0,a=e.locateAttribute(i,"data-column-index");return a&&(o=1*a.getAttribute("data-column-index")),new t.$keyboardNavigation.TaskCell(n,o)}return null},getNode:function(){if(t.isTaskExists(this.taskId)&&t.isTaskVisible(this.taskId)){if(t.config.show_grid){var e=t.$grid.querySelector(".gantt_row["+t.config.task_attribute+"='"+this.taskId+"']");return e?e.querySelector("[data-column-index='"+this.columnIndex+"']"):null}return t.getTaskNode(this.taskId)}},keys:{up:function(){var e,i=t.getPrev(this.taskId);e=i?new t.$keyboardNavigation.TaskCell(i,this.columnIndex):new t.$keyboardNavigation.HeaderCell(this.columnIndex),this.moveTo(e)},down:function(){var e=t.getNext(this.taskId);e&&this.moveTo(new t.$keyboardNavigation.TaskCell(e,this.columnIndex))},left:function(){this.columnIndex>0&&this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex-1))},right:function(){var e=t.getGridColumns();this.columnIndex<e.length-1&&this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex+1))},end:function(){var e=t.getGridColumns();this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,e.length-1))},home:function(){this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,0))},pagedown:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskCell(t.getTaskByIndex(t.getVisibleTaskCount()-1).id,this.columnIndex))},pageup:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskCell(t.getTaskByIndex(0).id,this.columnIndex))}}}),t.$keyboardNavigation.TaskCell.prototype.bindAll(t.$keyboardNavigation.TaskRow.prototype.keys),t.$keyboardNavigation.TaskCell.prototype.bindAll(t.$keyboardNavigation.TaskCell.prototype.keys)}},function(t,e){t.exports=function(t){t.$keyboardNavigation.TaskRow=function(e){if(!e){var i=t.getChildren(t.config.root_id);i[0]&&(e=i[0])}this.taskId=e,t.isTaskExists(this.taskId)&&(this.index=t.getTaskIndex(this.taskId))},t.$keyboardNavigation.TaskRow.prototype=t._compose(t.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return t.isTaskExists(this.taskId)&&t.getTaskIndex(this.taskId)>-1},fallback:function(){if(!t.getVisibleTaskCount()){var e=new t.$keyboardNavigation.HeaderCell;return e.isValid()?e:null}var i=-1;if(t.getTaskByIndex(this.index-1))i=this.index-1;else if(t.getTaskByIndex(this.index+1))i=this.index+1;else for(var n=this.index;n>=0;){if(t.getTaskByIndex(n)){i=n;break}n--}if(i>-1)return new t.$keyboardNavigation.TaskRow(t.getTaskByIndex(i).id)},fromDomElement:function(e){if(t.config.keyboard_navigation_cells)return null;var i=t.locate(e);return t.isTaskExists(i)?new t.$keyboardNavigation.TaskRow(i):null},getNode:function(){if(t.isTaskExists(this.taskId)&&t.isTaskVisible(this.taskId))return t.config.show_grid?t.$grid.querySelector(".gantt_row["+t.config.task_attribute+"='"+this.taskId+"']"):t.getTaskNode(this.taskId)},focus:function(e){if(!e){var i,n=t.getTaskPosition(t.getTask(this.taskId)),o=t.config.row_height,a=t.getScrollState();i=t.$task?t.$task.offsetWidth:a.inner_width,n.top<a.y||n.top+o>a.y+(t.$grid_data||t.$task_data?(t.$grid_data||t.$task_data).offsetHeight:a.inner_height)?t.scrollTo(null,n.top-5*o):t.config.scroll_on_click&&t.config.show_chart&&(n.left<a.x||n.left>a.x+i)&&t.scrollTo(n.left-t.config.task_scroll_offset)}t.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this,[e])},keys:{pagedown:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskRow(t.getTaskByIndex(t.getVisibleTaskCount()-1).id))},pageup:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskRow(t.getTaskByIndex(0).id))},up:function(){var e,i=t.getPrev(this.taskId);e=i?new t.$keyboardNavigation.TaskRow(i):new t.$keyboardNavigation.HeaderCell,this.moveTo(e)},down:function(){var e=t.getNext(this.taskId);e&&this.moveTo(new t.$keyboardNavigation.TaskRow(e))},"shift+down":function(){t.hasChild(this.taskId)&&!t.getTask(this.taskId).$open&&t.open(this.taskId)},"shift+up":function(){t.hasChild(this.taskId)&&t.getTask(this.taskId).$open&&t.close(this.taskId)},"shift+right":function(){if(!t.isReadonly(this)){var e=t.getPrevSibling(this.taskId);t.isTaskExists(e)&&!t.isChildOf(this.taskId,e)&&(t.getTask(e).$open=!0,!1!==t.moveTask(this.taskId,-1,e)&&t.updateTask(this.taskId))}},"shift+left":function(){if(!t.isReadonly(this)){var e=t.getParent(this.taskId);t.isTaskExists(e)&&!1!==t.moveTask(this.taskId,t.getTaskIndex(e)+1,t.getParent(e))&&t.updateTask(this.taskId)}},space:function(e){t.isSelectedTask(this.taskId)?t.unselectTask(this.taskId):t.selectTask(this.taskId)},"ctrl+left":function(e){t.close(this.taskId)},"ctrl+right":function(e){t.open(this.taskId)},delete:function(e){t.isReadonly(this)||t.$click.buttons.delete(this.taskId)},enter:function(){t.isReadonly(this)||t.showLightbox(this.taskId)},"ctrl+enter":function(){t.isReadonly(this)||t.createTask({},this.taskId)}}}),t.$keyboardNavigation.TaskRow.prototype.bindAll(t.$keyboardNavigation.TaskRow.prototype.keys)}},function(t,e,i){t.exports=function(t){var e=i(1);t.$keyboardNavigation.HeaderCell=function(t){this.index=t||0},t.$keyboardNavigation.HeaderCell.prototype=t._compose(t.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return!(!t.config.show_grid&&t.getVisibleTaskCount()||!t.getGridColumns()[this.index]&&t.getVisibleTaskCount())},fallback:function(){if(!t.config.show_grid)return t.getVisibleTaskCount()?new t.$keyboardNavigation.TaskRow:null;for(var e=t.getGridColumns(),i=this.index;i>=0&&!e[i];)i--;return e[i]?new t.$keyboardNavigation.HeaderCell(i):null},fromDomElement:function(i){var n=e.locateClassName(i,"gantt_grid_head_cell");if(n){for(var o=0;n&&n.previousSibling;)n=n.previousSibling,o+=1;return new t.$keyboardNavigation.HeaderCell(o)}return null},getNode:function(){return t.$grid_scale.childNodes[this.index]},keys:{left:function(){this.index>0&&this.moveTo(new t.$keyboardNavigation.HeaderCell(this.index-1))},right:function(){var e=t.getGridColumns();this.index<e.length-1&&this.moveTo(new t.$keyboardNavigation.HeaderCell(this.index+1))},down:function(){var e,i=t.getChildren(t.config.root_id);i[0]&&(e=i[0]),e&&this.moveTo(t.config.keyboard_navigation_cells?new t.$keyboardNavigation.TaskCell(e,this.index):new t.$keyboardNavigation.TaskRow(e))},end:function(){var e=t.getGridColumns();this.moveTo(new t.$keyboardNavigation.HeaderCell(e.length-1))},home:function(){this.moveTo(new t.$keyboardNavigation.HeaderCell(0))},"enter, space":function(){document.activeElement.click()},"ctrl+enter":function(){t.isReadonly(this)||t.createTask({},this.taskId)}}}),t.$keyboardNavigation.HeaderCell.prototype.bindAll(t.$keyboardNavigation.HeaderCell.prototype.keys)}},function(t,e){t.exports=function(t){t.$keyboardNavigation.KeyNavNode=function(){},t.$keyboardNavigation.KeyNavNode.prototype=t._compose(t.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(e){t.$keyboardNavigation.dispatcher.setActiveNode(e)},compareTo:function(t){if(!t)return!1;for(var e in this){if(!!this[e]!=!!t[e])return!1;var i=!(!this[e]||!this[e].toString),n=!(!t[e]||!t[e].toString);if(n!=i)return!1;if(n&&i){if(t[e].toString()!=this[e].toString())return!1}else if(t[e]!=this[e])return!1}return!0},getNode:function(){},focus:function(){var e=this.getNode();if(e){var i=t.$keyboardNavigation.facade;!1!==i.callEvent("onBeforeFocus",[e])&&e&&(e.setAttribute("tabindex","-1"),e.$eventAttached||(e.$eventAttached=!0,t.event(e,"focus",function(t){return t.preventDefault(),!1},!1)),e.focus&&e.focus(),i.callEvent("onFocus",[this.getNode()]))}},blur:function(){var e=this.getNode();e&&(t.$keyboardNavigation.facade.callEvent("onBlur",[e]),e.setAttribute("tabindex","-1"))}})}},function(t,e){t.exports=function(t){t.$keyboardNavigation.GanttNode=function(){},t.$keyboardNavigation.GanttNode.prototype=t._compose(t.$keyboardNavigation.EventHandler,{focus:function(){t.focus()},blur:function(){},isEnabled:function(){return t.$container.hasAttribute("tabindex")},scrollHorizontal:function(e){var i=t.dateFromPos(t.getScrollState().x),n=t.getScale();i=t.date.add(i,e<0?-n.step:n.step,n.unit),t.scrollTo(t.posFromDate(i))},scrollVertical:function(e){var i=t.getScrollState().y;t.scrollTo(null,i+(e<0?-1:1)*t.config.row_height)},keys:{"alt+left":function(t){this.scrollHorizontal(-1)},"alt+right":function(t){this.scrollHorizontal(1)},"alt+up":function(t){this.scrollVertical(-1)},"alt+down":function(t){this.scrollVertical(1)},"ctrl+z":function(){t.undo&&t.undo()},"ctrl+r":function(){t.redo&&t.redo()}}}),t.$keyboardNavigation.GanttNode.prototype.bindAll(t.$keyboardNavigation.GanttNode.prototype.keys)}},function(t,e,i){t.exports=function(t){!function(){var e=i(1);t.$keyboardNavigation.getFocusableNodes=e.getFocusableNodes,t.$keyboardNavigation.trapFocus=function(e,i){if(9!=i.keyCode)return!1;for(var n=t.$keyboardNavigation.getFocusableNodes(e),o=document.activeElement,a=-1,r=0;r<n.length;r++)if(n[r]==o){a=r;break}if(i.shiftKey){if(a<=0){var s=n[n.length-1];if(s)return s.focus(),i.preventDefault(),!0}}else if(a>=n.length-1){var c=n[0];if(c)return c.focus(),i.preventDefault(),!0}return!1}}()}},function(t,e){t.exports=function(t){t.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(e){this._handlers||(this._handlers={});var i=t.$keyboardNavigation.shortcuts.getHash(e);return this._handlers[i]},doAction:function(e,i){var n=this.findHandler(e);if(n){if(!1===t.$keyboardNavigation.facade.callEvent("onBeforeAction",[e,i]))return;n.call(this,i),i.preventDefault?i.preventDefault():i.returnValue=!1}},bind:function(e,i){this._handlers||(this._handlers={});for(var n=t.$keyboardNavigation.shortcuts,o=n.parse(e),a=0;a<o.length;a++)this._handlers[n.getHash(o[a])]=i},unbind:function(e){for(var i=t.$keyboardNavigation.shortcuts,n=i.parse(e),o=0;o<n.length;o++)this._handlers[i.getHash(n[o])]&&delete this._handlers[i.getHash(n[o])]},bindAll:function(t){for(var e in t)this.bind(e,t[e])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}}}},function(t,e){t.exports=function(t){t.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(t){for(var e=[],i=this.getExpressions(this.trim(t)),n=0;n<i.length;n++){for(var o=this.getWords(i[n]),a=this.createCommand(),r=0;r<o.length;r++)this.commandKeys[o[r]]?a.modifiers[o[r]]=!0:a.keyCode=this.specialKeys[o[r]]?this.specialKeys[o[r]]:o[r].charCodeAt(0);e.push(a)}return e},getCommandFromEvent:function(t){var e=this.createCommand();e.modifiers.shift=!!t.shiftKey,e.modifiers.alt=!!t.altKey,e.modifiers.ctrl=!!t.ctrlKey,e.modifiers.meta=!!t.metaKey,e.keyCode=t.which||t.keyCode,e.keyCode>=96&&e.keyCode<=105&&(e.keyCode-=48);var i=String.fromCharCode(e.keyCode);return i&&(e.keyCode=i.toLowerCase().charCodeAt(0)),e},getHashFromEvent:function(t){return this.getHash(this.getCommandFromEvent(t))},getHash:function(t){var e=[];for(var i in t.modifiers)t.modifiers[i]&&e.push(i);return e.push(t.keyCode),e.join(this.junctionChar)},getExpressions:function(t){return t.split(this.junctionChar)},getWords:function(t){return t.split(this.combinationChar)},trim:function(t){return t.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}},function(t,e,i){t.exports=function(t){var e=i(4);!function(t){t.config.keyboard_navigation=!0,t.config.keyboard_navigation_cells=!1,t.$keyboardNavigation={},t._compose=function(){for(var t=Array.prototype.slice.call(arguments,0),e={},i=0;i<t.length;i++){var n=t[i];for(var o in"function"==typeof n&&(n=new n),n)e[o]=n[o]}return e},i(249)(t),i(248)(t),i(247)(t),i(246)(t),i(245)(t),i(244)(t),i(243)(t),i(242)(t),i(241)(t),i(240)(t);var n=i(1);!function(){var i=t.$keyboardNavigation.dispatcher;i.isTaskFocused=function(e){var n=i.activeNode;return(n instanceof t.$keyboardNavigation.TaskRow||n instanceof t.$keyboardNavigation.TaskCell)&&n.taskId==e};var o=function(e){if(t.config.keyboard_navigation)return i.keyDownHandler(e)},a=function(e){if(i.$preventDefault)return e.preventDefault(),t.$container.blur(),!1;i.awaitsFocus()||i.focusGlobalNode()},r=function(){if(i.isEnabled()){var t=i.getActiveNode();if(t){var e,n,o=t.getNode();o&&o.parentNode&&(e=o.parentNode.scrollTop,n=o.parentNode.scrollLeft),t.focus(!0),o&&o.parentNode&&(o.parentNode.scrollTop=e,o.parentNode.scrollLeft=n)}}};function s(e){if(!t.config.keyboard_navigation)return!0;var o,a=i.fromDomElement(e);a&&(i.activeNode instanceof t.$keyboardNavigation.TaskCell&&n.isChildOf(e.target,t.$task)&&(a=new t.$keyboardNavigation.TaskCell(a.taskId,i.activeNode.columnIndex)),o=a),o?i.isEnabled()?i.delay(function(){i.setActiveNode(o)}):i.activeNode=o:(i.$preventDefault=!0,setTimeout(function(){i.$preventDefault=!1},300))}t.attachEvent("onDataRender",function(){t.config.keyboard_navigation&&r()}),t.attachEvent("onGanttRender",function(){t.eventRemove(t.$root,"keydown",o),t.eventRemove(t.$container,"focus",a),t.eventRemove(t.$container,"mousedown",s),t.config.keyboard_navigation?(t.event(t.$root,"keydown",o),t.event(t.$container,"focus",a),t.event(t.$container,"mousedown",s),t.$container.setAttribute("tabindex","0")):t.$container.removeAttribute("tabindex")});var c=t.attachEvent("onGanttReady",function(){if(t.detachEvent(c),t.$data.tasksStore.attachEvent("onStoreUpdated",function(e){if(t.config.keyboard_navigation&&i.isEnabled()){var n=i.getActiveNode();n&&n.taskId==e&&r()}}),t._smart_render){var e=t._smart_render._redrawTasks;t._smart_render._redrawTasks=function(n,o){if(t.config.keyboard_navigation&&i.isEnabled()){var a=i.getActiveNode();if(a&&void 0!==a.taskId){for(var r=!1,s=0;s<o.length;s++)if(o[s].id==a.taskId&&o[s].start_date){r=!0;break}r||o.push(t.getTask(a.taskId))}}return e.apply(this,arguments)}}});t.attachEvent("onAfterTaskAdd",function(e,n){if(!t.config.keyboard_navigation)return!0;if(i.isEnabled()){var o=0,a=i.activeNode;a instanceof t.$keyboardNavigation.TaskCell&&(o=a.columnIndex),i.setActiveNode(new(t.config.keyboard_navigation_cells?t.$keyboardNavigation.TaskCell:t.$keyboardNavigation.TaskRow)(e,o))}}),t.attachEvent("onTaskIdChange",function(e,n){if(!t.config.keyboard_navigation)return!0;var o=i.activeNode;return i.isTaskFocused(e)&&(o.taskId=n),!0});var l=setInterval(function(){t.config.keyboard_navigation&&(i.isEnabled()||i.enable())},500);function u(e){var i={gantt:t.$keyboardNavigation.GanttNode,headerCell:t.$keyboardNavigation.HeaderCell,taskRow:t.$keyboardNavigation.TaskRow,taskCell:t.$keyboardNavigation.TaskCell};return i[e]||i.gantt}function d(e){for(var i=t.getGridColumns(),n=0;n<i.length;n++)if(i[n].name==e)return n;return 0}t.attachEvent("onDestroy",function(){clearInterval(l)});var h={};e(h),t.mixin(h,{addShortcut:function(t,e,i){var n=u(i);n&&n.prototype.bind(t,e)},getShortcutHandler:function(e,i){var n=t.$keyboardNavigation.shortcuts.parse(e);if(n.length)return h.getCommandHandler(n[0],i)},getCommandHandler:function(t,e){var i=u(e);if(i&&t)return i.prototype.findHandler(t)},removeShortcut:function(t,e){var i=u(e);i&&i.prototype.unbind(t)},focus:function(t){var e,n=t?t.type:null,o=u(n);switch(n){case"taskCell":e=new o(t.id,d(t.column));break;case"taskRow":e=new o(t.id);break;case"headerCell":e=new o(d(t.column))}i.delay(function(){e?i.setActiveNode(e):(i.enable(),i.getActiveNode()?i.awaitsFocus()||i.enable():i.setDefaultNode())})},getActiveNode:function(){if(i.isEnabled()){var e=i.getActiveNode(),n=function(e){return e instanceof t.$keyboardNavigation.GanttNode?"gantt":e instanceof t.$keyboardNavigation.HeaderCell?"headerCell":e instanceof t.$keyboardNavigation.TaskRow?"taskRow":e instanceof t.$keyboardNavigation.TaskCell?"taskCell":null}(e),o=t.getGridColumns();switch(n){case"taskCell":return{type:"taskCell",id:e.taskId,column:o[e.columnIndex].name};case"taskRow":return{type:"taskRow",id:e.taskId};case"headerCell":return{type:"headerCell",column:o[e.index].name}}}return null}}),t.$keyboardNavigation.facade=h,t.ext.keyboardNavigation=h,t.focus=function(){h.focus()},t.addShortcut=h.addShortcut,t.getShortcutHandler=h.getShortcutHandler,t.removeShortcut=h.removeShortcut}()}(t)}},function(t,e,i){t.exports=function(t){var e=i(3);function n(t){return e.arrayMap(t,function(t,e){return String(t&&"object"==typeof t?t.resource_id:t)}).sort().join(",")}function o(){var i=this;this.$data.tasksStore._listenerToDrop&&this.$data.tasksStore.detachEvent(this.$data.tasksStore._listenerToDrop);var n=e.delay(function(){if(!i._groups.dynamicGroups)return!0;if(i._groups.regroup){var e=t.getScrollState();i._groups.regroup(),e&&t.scrollTo(e.x,e.y)}return!0});this.$data.tasksStore.attachEvent("onAfterUpdate",function(){return n.$pending||n(),!0})}t._groups={relation_property:null,relation_id_property:"$group_id",group_id:null,group_text:null,loading:!1,loaded:0,dynamicGroups:!1,set_relation_value:void 0,_searchCache:null,init:function(t){var e=this;t.attachEvent("onClear",function(){e.clear()}),e.clear();var i=t.$data.tasksStore.getParent;this._searchCache=null,t.attachEvent("onBeforeTaskMove",function(){return!this._groups.dynamicGroups}),t.$data.tasksStore._listenerToDrop=t.$data.tasksStore.attachEvent("onStoreUpdated",t.bind(o,t)),t.$data.tasksStore.getParent=function(n){return e.is_active()?e.get_parent(t,n):i.apply(this,arguments)};var n=t.$data.tasksStore.setParent;t.$data.tasksStore.setParent=function(i,o){if(!e.is_active())return n.apply(this,arguments);if(e.set_relation_value instanceof Function&&t.isTaskExists(o)){var a=(r=t.getTask(o))[e.relation_id_property];void 0===i[e.group_id]&&(i[e.group_id]=a),a&&(a="string"==typeof a?a.split(","):[a]),i[e.relation_property]=e.set_relation_value(a)||a}else if(t.isTaskExists(o)){var r=t.getTask(o);e.dynamicGroups||(i[e.relation_property]=r[e.relation_id_property]),this._setParentInner.apply(this,arguments)}else e.dynamicGroups&&void 0===i[e.group_id]&&(i[e.relation_property]=[])},t.attachEvent("onBeforeTaskDisplay",function(i,n){return!(e.is_active()&&n.type==t.config.types.project&&!n.$virtual)}),t.attachEvent("onBeforeParse",function(){e.loading=!0,e._clearCache()}),t.attachEvent("onTaskLoading",function(){return e.is_active()&&(e.loaded--,e.loaded<=0&&(e.loading=!1,e._clearCache(),t.eachTask(t.bind(function(e){this.get_parent(t,e)},e)))),!0}),t.attachEvent("onParse",function(){e.loading=!1,e.loaded=0})},_clearCache:function(){this._searchCache=null},_buildCache:function(){this._searchCache={};for(var e=t.$data.tasksStore.getItems(),i=0;i<e.length;i++)this._searchCache[e[i][this.relation_id_property]]=e[i].id},get_parent:function(t,e,i){void 0===e.id&&(e=t.getTask(e));var o=function(t,e){return t[e]instanceof Array?n(t[e]):t[e]}(e,this.relation_property);if(this._groups_pull[o]===e.id)return t.config.root_id;if(void 0!==this._groups_pull[o])return this._groups_pull[o];var a=t.config.root_id;if(!this.loading&&void 0!==o){this._searchCache||this._buildCache();var r=this._searchCache[o];t.isTaskExists(r)&&r!=e.id&&(a=this._searchCache[o]),this._groups_pull[o]=a}return a},clear:function(){this._groups_pull={},this.relation_property=null,this.group_id=null,this.group_text=null,this._clearCache()},is_active:function(){return!!this.relation_property},generate_sections:function(e,i){for(var n=[],o=0;o<e.length;o++){var a=t.copy(e[o]);a.type=i,void 0===a.open&&(a.open=!0),a.$virtual=!0,a.readonly=!0,a[this.relation_id_property]=a[this.group_id],a.text=a[this.group_text],n.push(a)}return n},clear_temp_tasks:function(t){for(var e=0;e<t.length;e++)t[e].$virtual&&(t.splice(e,1),e--)},generate_data:function(t,e){var i=t.getLinks(),n=t.getTaskByTime();this.clear_temp_tasks(n);var o=[];this.is_active()&&e&&e.length&&(o=this.generate_sections(e,t.config.types.project));var a={links:i};return a.data=o.concat(n),a},update_settings:function(t,e,i){this.clear(),this.relation_property=t,this.group_id=e,this.group_text=i},group_tasks:function(t,e,i,n,o){this.update_settings(i,n,o);var a=this.generate_data(t,e);this.loaded=a.data.length,t._clear_data();var r=t.config.auto_scheduling_initial;t.config.auto_scheduling_initial=!1,t.parse(a),t.config.auto_scheduling_initial=r}},t._groups.init(t),t.groupBy=function(i){var o=this,a=t.getTaskByTime();this._groups.set_relation_value=i.set_relation_value,this._groups.dynamicGroups=e.arraySome(a,function(t,e){return t[i.relation_property]instanceof Array}),(i=i||{}).default_group_label=i.default_group_label||this.locale.labels.default_group||"None";var r=i.relation_property||null,s=i.group_id||"key",c=i.group_text||"label";this._groups.regroup=function(){var a=t.getTaskByTime(),l={},u=!1;a.forEach(function(t){t.$virtual&&void 0!==t.$open&&(l[t[s]]=t.$open,u=!0)});var d=function(t,i,o){return t.groups?o._groups.dynamicGroups?function(t,i){var o={},a=[],r={},s=i.relation_property,c=i.delimiter||",",l=!1,u=0;e.forEach(i.groups,function(t){t.default&&(l=!0,u=t.group_id),r[t.key||t[i.group_id]]=t});for(var d=0;d<t.length;d++){var h,p;if(e.isArray(t[d][s]))if(t[d][s].length>0)h=n(t[d][s]),p=e.arrayMap(t[d][s],function(t,e){return(t=r[t&&"object"==typeof t?t.resource_id:t]).label||t.text}).sort().join(c);else{if(l)continue;h=0,p=i.default_group_label}else if(t[d][s])p=r[h=t[d][s]].label||r[h].text;else{if(l)continue;h=0,p=i.default_group_label}void 0!==h&&void 0===o[h]&&(o[h]={key:h,label:p},h===u&&(o[h].default=!0),o[h][i.group_text]=p,o[h][i.group_id]=h)}return(a=e.hashToArray(o)).forEach(function(t){t.key==u&&(t.default=!0)}),a}(i,t):t.groups:null}(i,a,t);return d&&u&&d.forEach(function(t){void 0!==l[t[s]]&&(t.open=l[t[s]])}),o._groups.group_tasks(o,d,r,s,c),!0},this._groups.regroup()},t.$services.getService("state").registerProvider("groupBy",function(){return{group_mode:t._groups.is_active()?t._groups.relation_property:null}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!(!t||t!==document.body)}t.$services.getService("state").registerProvider("fullscreen",function(){return{fullscreen:e()}});var i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},n={width:null,height:null,top:null,left:null,position:null,zIndex:null,modified:!1},o=null;function a(t,e){e.width=t.width,e.height=t.height,e.top=t.top,e.left=t.left,e.position=t.position,e.zIndex=t.zIndex}var r=!1;function s(){var s;t.$container&&(e()?r&&(s="onExpand",function(){var e=t.ext.fullscreen.getFullscreenElement(),r=document.body;a(e.style,n),i={overflow:r.style.overflow,padding:r.style.padding?r.style.padding:null,paddingTop:r.style.paddingTop?r.style.paddingTop:null,paddingRight:r.style.paddingRight?r.style.paddingRight:null,paddingBottom:r.style.paddingBottom?r.style.paddingBottom:null,paddingLeft:r.style.paddingLeft?r.style.paddingLeft:null},r.style.padding&&(r.style.padding="0"),r.style.paddingTop&&(r.style.paddingTop="0"),r.style.paddingRight&&(r.style.paddingRight="0"),r.style.paddingBottom&&(r.style.paddingBottom="0"),r.style.paddingLeft&&(r.style.paddingLeft="0"),r.style.overflow="hidden",e.style.width="100vw",e.style.height="100vh",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex=1,n.modified=!0,o=function(t){for(var e=t.parentNode,i=[];e&&e.style;)i.push({element:e,originalPositioning:e.style.position}),e.style.position="static",e=e.parentNode;return i}(e)}()):r&&(r=!1,s="onCollapse",function(){var e=t.ext.fullscreen.getFullscreenElement(),r=document.body;n.modified&&(i.padding&&(r.style.padding=i.padding),i.paddingTop&&(r.style.paddingTop=i.paddingTop),i.paddingRight&&(r.style.paddingRight=i.paddingRight),i.paddingBottom&&(r.style.paddingBottom=i.paddingBottom),i.paddingLeft&&(r.style.paddingLeft=i.paddingLeft),r.style.overflow=i.overflow,i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},a(n,e.style),n.modified=!1),function(t){t.forEach(function(t){t.element.style.position=t.originalPositioning})}(o),o=null}()),setTimeout(function(){t.render()}),setTimeout(function(){t.callEvent(s,[t.ext.fullscreen.getFullscreenElement()])}))}function c(){return!(t.$container&&t.ext.fullscreen.getFullscreenElement()&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||((console.warning||console.log)("The `fullscreen` feature not being allowed, or full-screen mode not being supported"),0)))}t.ext.fullscreen={expand:function(){if(!c()&&!e()&&t.callEvent("onBeforeExpand",[this.getFullscreenElement()])){r=!0;var i=document.body,n=i.webkitRequestFullscreen?[Element.ALLOW_KEYBOARD_INPUT]:[],o=i.msRequestFullscreen||i.mozRequestFullScreen||i.webkitRequestFullscreen||i.requestFullscreen;o&&o.apply(i,n)}},collapse:function(){if(!c()&&e()&&t.callEvent("onBeforeCollapse",[this.getFullscreenElement()])){var i=document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.exitFullscreen;i&&i.apply(document)}},toggle:function(){c()||(e()?this.collapse():this.expand())},getFullscreenElement:function(){return t.$root}},t.expand=function(){t.ext.fullscreen.expand()},t.collapse=function(){t.ext.fullscreen.collapse()},t.attachEvent("onGanttReady",function(){t.event(document,"webkitfullscreenchange",s),t.event(document,"mozfullscreenchange",s),t.event(document,"MSFullscreenChange",s),t.event(document,"fullscreenChange",s),t.event(document,"fullscreenchange",s)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this._mouseDown=!1,this._calculateDirectionVector=function(){if(e._trace.length>=10){for(var t=e._trace.slice(e._trace.length-10),i=[],n=1;n<t.length;n++)i.push({x:t[n].x-t[n-1].x,y:t[n].y-t[n-1].y});var o={x:0,y:0};return i.forEach(function(t){o.x+=t.x,o.y+=t.y}),{magnitude:Math.sqrt(o.x*o.x+o.y*o.y),angleDegrees:180*Math.atan2(Math.abs(o.y),Math.abs(o.x))/Math.PI}}return null},this._applyDndReadyStyles=function(){e._timeline.$task.classList.add("gantt_timeline_move_available")},this._clearDndReadyStyles=function(){e._timeline.$task.classList.remove("gantt_timeline_move_available")},this._getScrollPosition=function(t){var i=e._gantt;return{x:i.$ui.getView(t.$config.scrollX).getScrollState().position,y:i.$ui.getView(t.$config.scrollY).getScrollState().position}},this._countNewScrollPosition=function(t){var i=e._calculateDirectionVector(),n=e._startPoint.x-t.x,o=e._startPoint.y-t.y;return i&&(i.angleDegrees<15?o=0:i.angleDegrees>75&&(n=0)),{x:e._scrollState.x+n,y:e._scrollState.y+o}},this._setScrollPosition=function(t,i){var n=e._gantt;requestAnimationFrame(function(){n.$ui.getView(t.$config.scrollX).scroll(i.x),n.$ui.getView(t.$config.scrollY).scroll(i.y)})},this._stopDrag=function(t){var i=e._gantt;if(e._trace=[],i.$root.classList.remove("gantt_noselect"),void 0!==e._originalReadonly&&(i.config.readonly=e._originalReadonly),void 0!==e._originAutoscroll&&(i.config.autoscroll=e._originAutoscroll),i.config.drag_timeline){var n=i.config.drag_timeline.useKey;if(n&&!0!==t[n])return}e._mouseDown=!1},this._startDrag=function(t){var i=e._gantt;e._originAutoscroll=i.config.autoscroll,i.config.autoscroll=!1,i.$root.classList.add("gantt_noselect"),e._originalReadonly=i.config.readonly,i.config.readonly=!0,e._trace=[],e._mouseDown=!0;var n=e._getScrollPosition(e._timeline);e._scrollState={x:n.x,y:n.y},e._startPoint={x:t.clientX,y:t.clientY},e._trace.push(e._startPoint)},this._gantt=t,this._domEvents=t._createDomEventScope(),this._trace=[]}return t.create=function(e){return new t(e)},t.prototype.destructor=function(){this._domEvents.detachAll()},t.prototype.attach=function(t){var e=this;this._timeline=t;var i=this._gantt;this._domEvents.attach(t.$task,"mousedown",function(t){if(i.config.drag_timeline){var n=i.config.drag_timeline,o=n.useKey,a=n.ignore;if(!1!==n.enabled){var r=".gantt_task_line, .gantt_task_link";void 0!==a&&(r=a instanceof Array?a.join(", "):a),r&&i.utils.dom.closest(t.target,r)||o&&!0!==t[o]||e._startDrag(t)}}}),this._domEvents.attach(document,"keydown",function(t){if(i.config.drag_timeline){var n=i.config.drag_timeline.useKey;n&&!0===t[n]&&e._applyDndReadyStyles()}}),this._domEvents.attach(document,"keyup",function(t){if(i.config.drag_timeline){var n=i.config.drag_timeline.useKey;n&&!1===t[n]&&(e._clearDndReadyStyles(),e._stopDrag(t))}}),this._domEvents.attach(document,"mouseup",function(t){e._stopDrag(t)}),this._domEvents.attach(i.$root,"mouseup",function(t){e._stopDrag(t)}),this._domEvents.attach(document,"mouseleave",function(t){e._stopDrag(t)}),this._domEvents.attach(i.$root,"mouseleave",function(t){e._stopDrag(t)}),this._domEvents.attach(i.$root,"mousemove",function(n){if(i.config.drag_timeline){var o=i.config.drag_timeline.useKey;if((!o||!0===n[o])&&!0===e._mouseDown){e._trace.push({x:n.clientX,y:n.clientY});var a=e._countNewScrollPosition({x:n.clientX,y:n.clientY});e._setScrollPosition(t,a),e._scrollState=a,e._startPoint={x:n.clientX,y:n.clientY}}}})},t}();e.EventsManager=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(253);e.default=function(t){t.ext||(t.ext={}),t.ext.dragTimeline={create:function(){return n.EventsManager.create(t)}},t.config.drag_timeline={enabled:!0}}},function(t,e,i){t.exports=function(t){var e=i(25)(t),n=i(49)(t);return t._isProjectEnd=function(t){return!this._hasDuration({start_date:t.end_date,end_date:this._getProjectEnd(),task:t})},{_needRecalc:!0,_cache:null,reset:function(){this._needRecalc=!0,this._cache=null},_isRecalcNeeded:function(){return this._needRecalc},_getLinks:function(){var t=e.getLinkedTasks();return n.groupAdjacentEdges(t)},_calculateBranch:function(e,i,n,o){if(i[e.id]=!0,void 0===n[e.id])for(var a=[e];a.length;)if(n[(e=a.pop()).id]||t._isProjectEnd(e))for(n[e.id]=!0;a.length;)n[(e=a.pop()).id]=!0;else{n[e.id]=!1;for(var r=o[e.id]||[],s=0;s<r.length;s++){var c=t.getTask(r[s].target);if(t._getSlack(e,c,r[s])<=0&&(!i[c.id]||n[c.id])){i[c.id]=!0,a.push(e),a.push(c);break}}}},_calculateSummaryTasks:function(e,i){for(var n in i)if(i[n])for(var o=t.getParent(n);void 0===e[o]&&t.isTaskExists(o);)e[o]=!0,o=t.getParent(o);for(var n in e)i[n]=!!e[n]},_calculate:function(){var e={},i=!1,n={};t._isLinksCacheEnabled()||(t._startLinksCache(),i=!0);var o=this._getLinks(),a={};return t.eachTask(function(i){n[i.id]||(t.isSummaryTask(i)?a[i.id]=void 0:this._calculateBranch(i,n,e,o))},t.config.root_id,this),this._calculateSummaryTasks(a,e),i&&t._endLinksCache(),e},isCriticalTask:function(t){return!!t&&(this._isRecalcNeeded()&&(this._cache=this._calculate(),this._needRecalc=!1),this._cache[t.id])},init:function(){var e=t.bind(function(){return this.reset(),!0},this),i=t.bind(function(t,e){return this._cache&&(this._cache[e]=this._cache[t],delete this._cache[t]),!0},this);t.attachEvent("onAfterLinkAdd",e),t.attachEvent("onAfterLinkUpdate",e),t.attachEvent("onAfterLinkDelete",e),t.attachEvent("onAfterTaskAdd",e),t.attachEvent("onTaskIdChange",i),t.attachEvent("onAfterTaskUpdate",e),t.attachEvent("onAfterTaskDelete",e),t.attachEvent("onParse",e),t.attachEvent("onClearAll",e);var n=function(){t.config.highlight_critical_path&&!t.getState("batchUpdate").batch_update&&t.render()};t.attachEvent("onAfterLinkAdd",n),t.attachEvent("onAfterLinkUpdate",n),t.attachEvent("onAfterLinkDelete",n),t.attachEvent("onAfterTaskAdd",n),t.attachEvent("onTaskIdChange",function(e,i){return t.config.highlight_critical_path&&t.isTaskExists(i)&&t.refreshTask(i),!0}),t.attachEvent("onAfterTaskUpdate",n),t.attachEvent("onAfterTaskDelete",n)}}}},function(t,e,i){t.exports=function(t){var e=i(25)(t),n=i(3),o={_freeSlack:{},_totalSlack:{},_slackNeedCalculate:!0,_linkedTasksById:{},_calculateTotalSlack:function(){var i=this._linkedTasksById;n.forEach(e.getLinkedTasks(),function(e){var n=t.getTask(e.target),o=t.getFreeSlack(n);i[e.source]?o<i[e.source].minSlack.slack&&(i[e.source].minSlack={target:e.target,slack:o}):i[e.source]={minSlack:{target:e.target,slack:o},linked:[]},i[e.source].linked.push({target:e.target,slack:o})});var a={};return t.eachTask(function(e){t.isSummaryTask(e)||(void 0===a[e.id]&&(a[e.id]=0),a[e.id]+=o._chainSlackCount(e))}),t._slacksChanged=!1,this._slackNeedCalculate=!1,this._totalSlack=a,a},_chainSlackCount:function(e,i){switch(i=i||0,!0){case!this._linkedTasksById[e.id]:return t.calculateDuration(e.end_date,t.getSubtaskDates().end_date)+i;case 1===this._linkedTasksById[e.id].linked.length:return this._chainSlackCount(t.getTask(this._linkedTasksById[e.id].linked[0].target),t.getFreeSlack(e))+i;case this._linkedTasksById[e.id].linked.length>1:var n=this._getTargetWithMinimalSlack(this._linkedTasksById[e.id].linked);return this._chainSlackCount(t.getTask(n.target),t.getFreeSlack(e))+i}},_getTargetWithMinimalSlack:function(t){var e;return n.forEach(t,function(t){(void 0===e||t.slack<e.slack)&&(e=t)}),e},_calculateTaskSlack:function(t){return t.$source&&t.$source.length?this._calculateRelationSlack(t):this._calculateHierarchySlack(t)},_calculateRelationSlack:function(t){for(var e,i=0,n=t.$source,o=0;o<n.length;o++)(i>(e=this._calculateLinkSlack(n[o]))||0===o)&&(i=e);return i},_calculateLinkSlack:function(e){var i=t.getLink(e),n=0;return t.isTaskExists(i.source)&&t.isTaskExists(i.target)&&(n=t.getSlack(t.getTask(i.source),t.getTask(i.target))),n},_calculateHierarchySlack:function(e){var i,n=t.getSubtaskDates().end_date;return i=t.isTaskExists(e.parent)&&t.getSubtaskDates(e.id).end_date||e.end_date,Math.max(t.calculateDuration(i,n),0)},_resetTotalSlackCache:function(){this._slackNeedCalculate=!0},_shouldCalculateTotalSlack:function(){return this._slackNeedCalculate},getFreeSlack:function(e){return t.isTaskExists(e.id)?(this._freeSlack[e.id]||(this._freeSlack[e.id]=t.isSummaryTask(e)?void 0:this._calculateTaskSlack(e)),this._freeSlack[e.id]):0},getTotalSlack:function(t){return this._shouldCalculateTotalSlack()&&this._calculateTotalSlack(),void 0===t?this._totalSlack:void 0!==t.id?this._totalSlack[t.id]:this._totalSlack[t]||0},dropCachedFreeSlack:function(){this._linkedTasksById={},this._freeSlack={},this._resetTotalSlackCache()},init:function(){function e(){o.dropCachedFreeSlack()}t.attachEvent("onAfterLinkAdd",e),t.attachEvent("onTaskIdChange",e),t.attachEvent("onAfterLinkUpdate",e),t.attachEvent("onAfterLinkDelete",e),t.attachEvent("onAfterTaskAdd",e),t.attachEvent("onAfterTaskUpdate",e),t.attachEvent("onAfterTaskDelete",e),t.attachEvent("onRowDragEnd",e),t.attachEvent("onAfterTaskMove",e)}};return o}},function(t,e,i){t.exports=function(t){i(50)(t);var e=i(256)(t);e.init(),t.getFreeSlack=function(t){return e.getFreeSlack(t)},t.getTotalSlack=function(t){return e.getTotalSlack(t)};var n=i(255)(t);t.config.highlight_critical_path=!1,n.init(),t.isCriticalTask=function(e){return t.assert(!(!e||void 0===e.id),"Invalid argument for gantt.isCriticalTask"),n.isCriticalTask(e)},t.isCriticalLink=function(e){return this.isCriticalTask(t.getTask(e.source))},t.getSlack=function(t,e){for(var i=0,n=[],o={},a=0;a<t.$source.length;a++)o[t.$source[a]]=!0;for(a=0;a<e.$target.length;a++)o[e.$target[a]]&&n.push(e.$target[a]);for(a=0;a<n.length;a++){var r=this.getLink(n[a]),s=this._getSlack(t,e,this._convertToFinishToStartLink(r.id,r,t,e,t.parent,e.parent));(i>s||0===a)&&(i=s)}return i},t._getSlack=function(t,e,i){var n,o=this.config.types;n=this.getTaskType(t.type)==o.milestone?t.start_date:t.end_date;var a=e.start_date,r=0;r=+n>+a?-this.calculateDuration({start_date:a,end_date:n,task:t}):this.calculateDuration({start_date:n,end_date:a,task:t});var s=i.lag;return s&&1*s==s&&(r-=s),r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(3),a=function(){function t(t,e){var i=this;this._el=document.createElement("div"),this.defaultRender=function(t,e){i._el||(i._el=document.createElement("div"));var n=i._el,o=i._gantt,a=Math.min(t.relative.top,e.relative.top),r=Math.max(t.relative.top,e.relative.top),s=Math.min(t.relative.left,e.relative.left),c=Math.max(t.relative.left,e.relative.left);if(i._singleRow){var l=o.config.row_height;n.style.height=l+"px",n.style.top=(Math.ceil(a/l)-1)*l+"px"}else n.style.height=Math.abs(r-a)+"px",n.style.top=a+"px";return n.style.width=Math.abs(c-s)+"px",n.style.left=s+"px",n},this._gantt=e,this._viewPort=t.viewPort,this._el.classList.add(t.className),"function"==typeof t.callback&&(this._callback=t.callback),this.render=function(){var e;(e=t.render?t.render(i._startPoint,i._endPoint):i.defaultRender(i._startPoint,i._endPoint))!==i._el&&(i._el&&i._el.parentNode&&i._el.parentNode.removeChild(i._el),i._el=e),""!==t.className&&i._el.classList.add(t.className),i.draw()},o.isEventable(this._viewPort)||n(this._viewPort),this._singleRow=t.singleRow,this._useRequestAnimationFrame=t.useRequestAnimationFrame}return t.prototype.draw=function(){var t=this;if(this._useRequestAnimationFrame)return requestAnimationFrame(function(){t._viewPort.appendChild(t.getElement())});this._viewPort.appendChild(this.getElement())},t.prototype.clear=function(){var t=this;if(this._useRequestAnimationFrame)return requestAnimationFrame(function(){t._el.parentNode&&t._viewPort.removeChild(t._el)});this._el.parentNode&&this._viewPort.removeChild(this._el)},t.prototype.getElement=function(){return this._el},t.prototype.getViewPort=function(){return this._viewPort},t.prototype.setStart=function(t){var e=this._gantt;this._startPoint=t,this._startDate=e.dateFromPos(this._startPoint.relative.left),this._viewPort.callEvent("onBeforeDrag",[this._startPoint])},t.prototype.setEnd=function(t){var e=this._gantt;if(this._endPoint=t,this._singleRow){var i=e.config.row_height;this._endPoint.relative.top=Math.ceil(this._startPoint.relative.top/i)*i}this._endDate=e.dateFromPos(this._endPoint.relative.left),this._startPoint.relative.left>this._endPoint.relative.left&&(this._positionPoint={relative:{left:this._endPoint.relative.left,top:this._positionPoint.relative.top},absolute:{left:this._endPoint.absolute.left,top:this._positionPoint.absolute.top}}),this._startPoint.relative.top>this._endPoint.relative.top&&(this._positionPoint={relative:{left:this._positionPoint.relative.left,top:this._endPoint.relative.top},absolute:{left:this._positionPoint.absolute.left,top:this._endPoint.absolute.top}}),this._viewPort.callEvent("onDrag",[this._startPoint,this._endPoint])},t.prototype.setPosition=function(t){this._positionPoint=t},t.prototype.dragEnd=function(t){var e,i=this._gantt;t.relative.left<0&&(t.relative.left=0),this._viewPort.callEvent("onBeforeDragEnd",[this._startPoint,t]),this.setEnd(t),this._startDate.valueOf()>this._endDate.valueOf()&&(this._startDate=(e=[this._endDate,this._startDate])[0],this._endDate=e[1]),this.clear();var n=i.getTaskByTime(this._startDate,this._endDate),o=this._getTasksByTop(this._startPoint.relative.top,this._endPoint.relative.top);this._viewPort.callEvent("onDragEnd",[this._startPoint,this._endPoint]),this._callback&&this._callback(this._startPoint,this._endPoint,this._startDate,this._endDate,n,o)},t.prototype.getInBounds=function(){return this._singleRow},t.prototype._getTasksByTop=function(t,e){var i=this._gantt,n=t,o=e;t>e&&(n=e,o=t);for(var a=i.config.row_height,r=Math.ceil(n/a)-1,s=Math.ceil(o/a)-1,c=[],l=r;l<=s;l++)i.getTaskByIndex(l)&&c.push(i.getTaskByIndex(l));return c},t}();e.SelectedRegion=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._mouseDown=!1,this._gantt=t,this._domEvents=t._createDomEventScope()}return t.prototype.attach=function(t,e){var i=this,n=this._gantt,o=t.getViewPort();this._originPosition=window.getComputedStyle(o).display,this._restoreOriginPosition=function(){o.style.position=i._originPosition},"static"===this._originPosition&&(o.style.position="relative");var a=n.$services.getService("state");a.registerProvider("clickDrag",function(){return{autoscroll:!1}});var r=null;this._domEvents.attach(o,"mousedown",function(o){r=null,n.utils.dom.closest(o.target,".gantt_task_line, .gantt_task_link")||(a.registerProvider("clickDrag",function(){return{autoscroll:i._mouseDown}}),e&&!0!==o[e]||(r=i._getCoordinates(o,t)))}),this._domEvents.attach(document.body,"mouseup",function(n){if(r=null,(!e||!0===n[e])&&!0===i._mouseDown){i._mouseDown=!1;var o=i._getCoordinates(n,t);t.dragEnd(o)}}),this._domEvents.attach(o,"mousemove",function(n){if(!e||!0===n[e]){var o=null;if(!i._mouseDown&&r)return o=i._getCoordinates(n,t),void(Math.abs(r.relative.left-o.relative.left)>5&&r&&(i._mouseDown=!0,t.setStart(r),t.setPosition(r),t.setEnd(r),r=null));!0===i._mouseDown&&(o=i._getCoordinates(n,t),t.setEnd(o),t.render())}})},t.prototype.detach=function(){var t=this._gantt;this._domEvents.detachAll(),this._restoreOriginPosition&&this._restoreOriginPosition(),t.$services.getService("state").unregisterProvider("clickDrag")},t.prototype.destructor=function(){this.detach()},t.prototype._getCoordinates=function(t,e){var i=e.getViewPort(),n=i.getBoundingClientRect(),o=t.clientX,a=t.clientY;return{absolute:{left:o,top:a},relative:{left:o-n.left+i.scrollLeft,top:a-n.top+i.scrollTop}}},t}();e.EventsManager=n},function(t,e,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=i(259),a=i(258);e.default=function(t){t.ext||(t.ext={});var e={className:"gantt_click_drag_rect",useRequestAnimationFrame:!0,callback:void 0,singleRow:!1},i=new o.EventsManager(t);t.ext.clickDrag=i,t.attachEvent("onGanttReady",function(){var i=n({viewPort:t.$task_data},e);if(t.config.click_drag){var o=t.config.click_drag;i.render=o.render||e.render,i.className=o.className||e.className,i.callback=o.callback||e.callback,i.viewPort=o.viewPort||t.$task_data,i.useRequestAnimationFrame=void 0===o.useRequestAnimationFrame?e.useRequestAnimationFrame:o.useRequestAnimationFrame,i.singleRow=void 0===o.singleRow?e.singleRow:o.singleRow;var r=new a.SelectedRegion(i,t);t.ext.clickDrag.attach(r,o.useKey)}}),t.attachEvent("onDestroy",function(){i.destructor()})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.attachUIHandlers=function(t,e,i,n){t.attachEvent("onGanttReady",function(){!function(){var o,a,r=!1;function s(e,i){t.config.auto_scheduling&&!t._autoscheduling_in_progress&&(t.getState().batch_update?r=!0:t.autoSchedule(i.source))}function c(e,n){return!t.isCircularLink(n)||(t.callEvent("onCircularLinkError",[n,i.getLoopContainingLink(n)]),!1)}function l(e,i){var n=t.getTask(i.source),o=t.getTask(i.target);return!(!t.config.auto_scheduling_descendant_links&&(t.isChildOf(n.id,o.id)&&t.isSummaryTask(o)||t.isChildOf(o.id,n.id)&&t.isSummaryTask(n)))}function u(e,i,n,o){return!!e!=!!i||!(!e&&!i)&&(e.valueOf()>i.valueOf()?t._hasDuration({start_date:i,end_date:e,task:o}):t._hasDuration({start_date:e,end_date:i,task:n}))}function d(e,i){return!!u(e.start_date,i.start_date,e,i)||t.getConstraintType(e)!==t.getConstraintType(i)||!!u(e.constraint_date,i.constraint_date,e,i)||!(!u(e.start_date,i.start_date,e,i)&&(!u(e.end_date,i.end_date,e,i)&&e.duration===i.duration||e.type===t.config.types.milestone))||void 0}function h(i){return t.config.auto_scheduling_compatibility?e.getLinkedTasks(i,!0):n.getConnectedGroupRelations(i)}function p(e){t.config.schedule_from_end?(e.constraint_type=t.config.constraint_types.FNLT,e.constraint_date=new Date(e.end_date)):(e.constraint_type=t.config.constraint_types.SNET,e.constraint_date=new Date(e.start_date))}function f(e){t.config.auto_scheduling_compatibility&&t.config.auto_scheduling_strict&&(e.constraint_type!==t.config.constraint_types.SNET&&e.constraint_type!==t.config.constraint_types.FNLT||(e.constraint_type=null,e.constraint_date=null))}t.attachEvent("onAfterBatchUpdate",function(){r&&t.autoSchedule(),r=!1}),t.attachEvent("onAfterLinkUpdate",s),t.attachEvent("onAfterLinkAdd",s),t.attachEvent("onAfterLinkDelete",function(e,i){if(t.config.auto_scheduling&&!t._autoscheduling_in_progress&&t.isTaskExists(i.target)){var n=t.getTask(i.target),o=t._getPredecessors(n);o.length&&(t.getState().batch_update?r=!0:t.autoSchedule(o[0].source,!1))}}),t.attachEvent("onParse",function(){t.config.auto_scheduling&&t.config.auto_scheduling_initial&&t.autoSchedule()}),t.attachEvent("onBeforeLinkAdd",c),t.attachEvent("onBeforeLinkAdd",l),t.attachEvent("onBeforeLinkUpdate",c),t.attachEvent("onBeforeLinkUpdate",l),t.attachEvent("onBeforeTaskDrag",function(e,i,n){return t.config.auto_scheduling&&t.config.auto_scheduling_move_projects&&(o=h(e),a=e),!0});var g,m=function(e,i){if(t.config.auto_scheduling&&!t._autoscheduling_in_progress){var n=t.getTask(e);d(i,n)&&(p(n),t.config.auto_scheduling_move_projects&&a==e?(t.calculateDuration(i)!==t.calculateDuration(n)&&function(e,i){for(var n=!1,a=0;a<o.length;a++){var r=t.getLink(i[a].id);!r||r.type!==t.config.links.start_to_start&&r.type!==t.config.links.start_to_finish||(i.splice(a,1),a--,n=!0)}if(n){var s={};for(a=0;a<i.length;a++)s[i[a].id]=!0;var c=h(e);for(a=0;a<c.length;a++)s[c[a].id]||i.push(c[a])}}(e,o),t._autoSchedule(e,o)):t.autoSchedule(n.id),f(n))}return o=null,a=null,!0},v=null;if(t.ext&&t.ext.inlineEditors){var b={start_date:!0,end_date:!0,duration:!0,constraint_type:!0,constraint_date:!0};t.ext.inlineEditors.attachEvent("onBeforeSave",function(t){return b[t.columnName]&&(v=t.id),!0})}t.attachEvent("onBeforeTaskChanged",function(t,e,i){return m(t,i)}),t.ext.inlineEditors&&t.ext.inlineEditors.attachEvent("onBeforeSave",function(e){if(t.config.auto_scheduling&&!t._autoscheduling_in_progress){var i=t.ext.inlineEditors.getEditorConfig(e.columnName);"start_date"!==i.map_to&&"end_date"!==i.map_to&&"duration"!==i.map_to||(v=e.id)}return!0}),t.attachEvent("onLightboxSave",function(e,i){if(t.config.auto_scheduling&&!t._autoscheduling_in_progress){g=!1;var n=t.getTask(e);d(i,n)&&(v=e,t.getConstraintType(i)===t.getConstraintType(n)&&+i.constraint_date==+n.constraint_date||(g=!0))}return!0}),t.attachEvent("onAfterTaskUpdate",function(e,i){return t.config.auto_scheduling&&!t._autoscheduling_in_progress&&v&&v==e&&(v=null,g||p(i),t.autoSchedule(i.id),g||f(i)),!0})}()},{once:!0})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoopsFinder=function(t,e,i){var n=this;this.isCircularLink=function(t){return!!n.getLoopContainingLink(t)},this.getLoopContainingLink=function(t){var e=n._graphHelper,i=n._gantt,o=n._linksBuilder.getLinkedTasks();i.isLinkExists(t.id)||(o=o.concat(i._formatLink(t)));for(var a=e.findLoops(o),r=0;r<a.length;r++)for(var s=a[r].links,c=0;c<s.length;c++)if(s[c]==t.id)return a[r];return null},this.findCycles=function(){var t=n._graphHelper,e=n._linksBuilder.getLinkedTasks();return t.findLoops(e)},this._linksBuilder=i,this._graphHelper=e,this._gantt=t}},function(t,e,i){"use strict";function n(t,e,i){for(var n,o=[t],a=[],r={},s={};o.length>0;)if(!i[n=o.shift()]){i[n]=!0,a.push(n);for(var c=0;c<e.length;c++){var l=e[c];l.source==n||l.sourceParent==n?(i[l.target]||(o.push(l.target),s[l.id]=!0,e.splice(c,1),c--),r[l.hashSum]=l):l.target!=n&&l.targetParent!=n||(i[l.source]||(o.push(l.source),s[l.id]=!0,e.splice(c,1),c--),r[l.hashSum]=l)}}var u=[],d=[];for(var c in s)u.push(c);for(var c in r)d.push(r[c]);return{tasks:a,links:u,processedLinks:d}}Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectedGroupsHelper=function(t,e){var i=this;this.getConnectedGroupRelations=function(t){return n(t,i._linksBuilder.getLinkedTasks(),{}).processedLinks},this.getConnectedGroup=function(t){var e=i._linksBuilder.getLinkedTasks();if(void 0!==t){if(i._gantt.getTask(t).type===i._gantt.config.types.project)return{tasks:[],links:[]};var o=n(t,e,{});return{tasks:o.tasks,links:o.links}}return function(t){for(var e,i,o,a={},r=[],s=0;s<t.length;s++)if(i=t[s].target,o=null,a[e=t[s].source]?a[i]||(o=i):o=e,o){var c=t.length;r.push(n(o,t,a)),c!==t.length&&(s=-1)}return r}(e).map(function(t){return{tasks:t.tasks,links:t.links}})},this._linksBuilder=e,this._gantt=t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(14),o=function(){function t(){}return t.Create=function(e){var i=new t;return i._gantt=e,i},t.prototype.resolveRelationDate=function(t,e,i){for(var o=null,a=null,r=null,s=this._gantt.getTask(t),c=e.predecessors,l=null,u=0;u<c.length;u++){var d=c[u];r=d.preferredStart;var h=this.getEarliestStartDate(d,i,s);this.isSmallerOrDefault(l,h,s)&&(l=h),this.isSmallerOrDefault(r,h,s)&&this.isSmallerOrDefault(o,h,s)&&(o=h,a=d.id)}!c.length&&this._gantt.config.project_start&&this.isSmallerOrDefault(s.start_date,this._gantt.config.project_start,s)&&(o=this._gantt.config.project_start);var p=null;o&&(o=this._gantt.getClosestWorkTime({date:o,dir:"future",task:s}),p=this._gantt.calculateEndDate({start_date:o,duration:s.duration,task:s}));var f=n.TaskPlan.Create(i[t]);return f.link=a,f.task=t,f.start_date=o,f.end_date=p,f.kind="asap",l&&(f.earliestSchedulingStart=l,f.earliestSchedulingEnd=this._gantt.calculateEndDate({start_date:l,duration:s.duration,task:s})),f},t.prototype.isEqual=function(t,e,i){return!this._gantt._hasDuration(t,e,i)},t.prototype.isFirstSmaller=function(t,e,i){return t.valueOf()<e.valueOf()&&!this.isEqual(t,e,i)},t.prototype.isSmallerOrDefault=function(t,e,i){return!(t&&!this.isFirstSmaller(t,e,i))},t.prototype.getPredecessorEndDate=function(t,e){var i=e[t],n=this._gantt.getTask(t);return i&&(i.start_date||i.end_date)?i.end_date?i.end_date:this._gantt.calculateEndDate({start_date:i.start_date,duration:n.duration,task:n}):n.end_date},t.prototype.getEarliestStartDate=function(t,e,i){var n=this.getPredecessorEndDate(t.source,e),o=i,a=this._gantt.getClosestWorkTime({date:n,dir:"future",task:o});return n&&t.lag&&1*t.lag==1*t.lag&&(a=this._gantt.calculateEndDate({start_date:n,duration:1*t.lag,task:o})),a},t}();e.AsapStrategy=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(14),o=function(){function t(){}return t.Create=function(e){var i=new t;return i._gantt=e,i},t.prototype.resolveRelationDate=function(t,e,i){for(var o=null,a=null,r=null,s=null,c=this._gantt.getTask(t),l=e.successors,u=null,d=i[t],h=0;h<l.length;h++){var p=l[h];s=p.preferredStart;var f=this.getLatestEndDate(p,i,c),g=this._gantt.calculateEndDate({start_date:f,duration:-c.duration,task:c});this.isGreaterOrDefault(u,f,c)&&(u=f),this.isGreaterOrDefault(s,g,c)&&this.isGreaterOrDefault(o,f,c)&&(o=f,r=g,a=p.id)}!l.length&&this._gantt.config.project_end&&this.isGreaterOrDefault(this._gantt.config.project_end,c.end_date,c)&&(o=this._gantt.config.project_end),o&&(o=this._gantt.getClosestWorkTime({date:o,dir:"future",task:c}),r=this._gantt.calculateEndDate({start_date:o,duration:-c.duration,task:c}));var m=n.TaskPlan.Create(d);return m.link=a,m.task=t,m.end_date=o,m.start_date=r,m.kind="alap",u&&(m.latestSchedulingStart=this._gantt.calculateEndDate({start_date:u,duration:-c.duration,task:c}),m.latestSchedulingEnd=u),m},t.prototype.isFirstSmaller=function(t,e,i){return!!(t.valueOf()<e.valueOf()&&this._gantt._hasDuration(t,e,i))},t.prototype.isGreaterOrDefault=function(t,e,i){return!(t&&!this.isFirstSmaller(e,t,i))},t.prototype.getSuccessorStartDate=function(t,e){var i=e[t],n=this._gantt.getTask(t);return i&&(i.start_date||i.end_date)?i.start_date?i.start_date:this._gantt.calculateEndDate({start_date:i.end_date,duration:-n.duration,task:n}):n.start_date},t.prototype.getLatestEndDate=function(t,e,i){var n=this.getSuccessorStartDate(t.target,e),o=i,a=this._gantt.getClosestWorkTime({date:n,dir:"past",task:o});return a&&t.lag&&1*t.lag==1*t.lag&&(a=this._gantt.calculateEndDate({start_date:a,duration:1*-t.lag,task:o})),a},t}();e.AlapStrategy=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(265),o=i(264),a=i(24),r=i(14),s=function(){function t(t,e,i){this._gantt=t,this._constraintsHelper=i,this._graphHelper=e,this._asapStrategy=o.AsapStrategy.Create(t),this._alapStrategy=n.AlapStrategy.Create(t)}return t.prototype.generatePlan=function(t,e){var i=this._gantt,n=this._constraintsHelper,o=this._alapStrategy,a=this._asapStrategy,r=this.buildWorkCollections(t,e,this._graphHelper),s=r.orderedIds,c=r.reversedIds,l=r.relationsMap,u=r.plansHash;return this.processConstraints(s,u,i,n),i.config.schedule_from_end?this.iterateTasks(c,s,n.isAlapTask,o,a,l,u):this.iterateTasks(s,c,n.isAsapTask,a,o,l,u)},t.prototype.applyProjectPlan=function(t){for(var e,i,n,o,a=this._gantt,r=[],s=0;s<t.length;s++)if(n=null,o=null,(e=t[s]).task){i=a.getTask(e.task),e.link&&(n=a.getLink(e.link),o=this._gantt.getTask("asap"===e.kind?n.source:n.target));var c=null;e.start_date&&i.start_date.valueOf()!==e.start_date.valueOf()&&(c=e.start_date),c&&(i.start_date=c,i.end_date=a.calculateEndDate(i),r.push(i.id),a.callEvent("onAfterTaskAutoSchedule",[i,c,n,o]))}return r},t.prototype.iterateTasks=function(t,e,i,n,o,a,r){for(var s=this._gantt,c=[],l=0;l<t.length;l++){var u=t[l],d=s.getTask(u),h=n.resolveRelationDate(u,a[u],r);this.limitPlanDates(d,h),i(d)?this.processResolvedDate(d,h,c,r):r[d.id]=h}for(l=0;l<e.length;l++)i(d=s.getTask(u=e[l]))||(h=o.resolveRelationDate(u,a[u],r),this.limitPlanDates(d,h),this.processResolvedDate(d,h,c,r));return c},t.prototype.processResolvedDate=function(t,e,i,n){if(e.start_date&&this._gantt.isLinkExists(e.link)){var o=null,a=null;if(e.link&&(o=this._gantt.getLink(e.link),a=this._gantt.getTask("asap"===e.kind?o.source:o.target)),t.start_date.valueOf()!==e.start_date.valueOf()&&!1===this._gantt.callEvent("onBeforeTaskAutoSchedule",[t,e.start_date,o,a]))return}n[t.id]=e,e.start_date&&i.push(e)},t.prototype.limitPlanDates=function(t,e){var i=e.start_date||t.start_date;return e.earliestStart&&i<e.earliestStart&&(e.start_date=e.earliestStart,e.end_date=e.earliestEnd),e.latestStart&&i>e.latestStart&&(e.start_date=e.latestStart,e.end_date=e.latestEnd),e.latestSchedulingStart&&i>e.latestSchedulingStart&&(e.start_date=e.latestSchedulingStart,e.end_date=e.latestSchedulingEnd),e.earliestSchedulingStart&&i<e.earliestSchedulingStart&&(e.start_date=e.earliestSchedulingStart,e.end_date=e.earliestSchedulingEnd),e.start_date&&(e.start_date>e.latestSchedulingStart||e.start_date<e.earliestSchedulingStart||e.start_date>e.latestStart||e.start_date<e.earliestStart||e.end_date>e.latestSchedulingEnd||e.end_date<e.earliestSchedulingEnd||e.end_date>e.latestEnd||e.end_date<e.earliestEnd)&&(e.conflict=!0),e},t.prototype.buildWorkCollections=function(t,e,i){for(var n=this._gantt,o=i.topologicalSort(t),a=o.slice().reverse(),r={},s={},c=0,l=o.length;c<l;c++){var u=o[c];!1!==(d=n.getTask(u)).auto_scheduling&&(s[u]={successors:[],predecessors:[]},r[u]=null)}for(c=0,l=e.length;c<l;c++){var d;void 0===r[(d=e[c]).id]&&(a.unshift(d.id),o.unshift(d.id),r[d.id]=null,s[d.id]={successors:[],predecessors:[]})}for(c=0,l=t.length;c<l;c++){var h=t[c];s[h.source]&&s[h.source].successors.push(h),s[h.target]&&s[h.target].predecessors.push(h)}return{orderedIds:o,reversedIds:a,relationsMap:s,plansHash:r}},t.prototype.processConstraints=function(t,e,i,n){for(var o=0;o<t.length;o++){var s=i.getTask(t[o]),c=n.getConstraintType(s);if(c&&c!==a.ConstraintTypes.ASAP&&c!==a.ConstraintTypes.ALAP){var l=n.processConstraint(s,r.TaskPlan.Create());e[s.id]=l}}},t}();e.AutoSchedulingPlanner=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(24),a=i(14),r=function(){function t(t){var e=this;this.isAsapTask=function(t){var i=e.getConstraintType(t);return e._gantt.config.schedule_from_end?i===o.ConstraintTypes.ASAP:i!==o.ConstraintTypes.ALAP},this.isAlapTask=function(t){return!e.isAsapTask(t)},this.getConstraintType=function(t){return t.constraint_type?t.constraint_type:e._gantt.config.schedule_from_end?o.ConstraintTypes.ALAP:o.ConstraintTypes.ASAP},this.hasConstraint=function(t){return!!e.getConstraintType(t)},this.processConstraint=function(t,i){if(e.hasConstraint(t))if(t.constraint_type===o.ConstraintTypes.ALAP||t.constraint_type===o.ConstraintTypes.ASAP);else if(n.isValidDate(t.constraint_date)){var r=t.constraint_date,s=a.TaskPlan.Create(i);switch(s.task=t.id,t.constraint_type){case o.ConstraintTypes.SNET:s.earliestStart=new Date(r),s.earliestEnd=e._gantt.calculateEndDate({start_date:s.earliestStart,duration:t.duration,task:t}),s.link=null;break;case o.ConstraintTypes.SNLT:s.latestStart=new Date(r),s.latestEnd=e._gantt.calculateEndDate({start_date:s.latestStart,duration:t.duration,task:t}),s.link=null;break;case o.ConstraintTypes.FNET:s.earliestStart=e._gantt.calculateEndDate({start_date:r,duration:-t.duration,task:t}),s.earliestEnd=new Date(r),s.link=null;break;case o.ConstraintTypes.FNLT:s.latestStart=e._gantt.calculateEndDate({start_date:r,duration:-t.duration,task:t}),s.latestEnd=new Date(r),s.link=null;break;case o.ConstraintTypes.MSO:s.earliestStart=new Date(r),s.earliestEnd=e._gantt.calculateEndDate({start_date:s.earliestStart,duration:t.duration,task:t}),s.latestStart=s.earliestStart,s.latestEnd=s.earliestEnd,s.link=null;break;case o.ConstraintTypes.MFO:s.earliestStart=e._gantt.calculateEndDate({start_date:r,duration:-t.duration,task:t}),s.earliestEnd=e._gantt.calculateEndDate({start_date:s.earliestStart,duration:t.duration,task:t}),s.latestStart=s.earliestStart,s.latestEnd=s.earliestEnd,s.link=null}return s}return i},this.getConstraints=function(t,i){var n,o=[],a={},r=function(t){a[t.id]||e.hasConstraint(t)&&!e._gantt.isSummaryTask(t)&&(a[t.id]=t)};if(e._gantt.isTaskExists(t)){var s=e._gantt.getTask(t);r(s)}if(e._gantt.eachTask(function(t){return r(t)},t),i)for(var c=0;c<i.length;c++){var l=i[c];a[l.target]||(n=e._gantt.getTask(l.target),r(n)),a[l.source]||(n=e._gantt.getTask(l.source),r(n))}for(var u in a)o.push(a[u]);return o},this._gantt=t}return t.Create=function(e){return new t(e)},t}();e.ConstraintsHelper=r},function(t,e,i){t.exports=function(t){i(50)(t);var e=i(25)(t),n=i(49)(t),o=i(24).ConstraintTypes,a=i(267).ConstraintsHelper.Create(t),r=new(0,i(266).AutoSchedulingPlanner)(t,n,a),s=new(0,i(263).ConnectedGroupsHelper)(t,e),c=new(0,i(262).LoopsFinder)(t,n,e);t.getConnectedGroup=s.getConnectedGroup,t.getConstraintType=a.getConstraintType,t.getConstraintLimitations=function(t){var e=a.processConstraint(t,null);return{earliestStart:e.earliestStart||null,earliestEnd:e.earliestEnd||null,latestStart:e.latestStart||null,latestEnd:e.latestEnd||null}},t.isCircularLink=c.isCircularLink,t.findCycles=c.findCycles,t.config.constraint_types=o,t.config.auto_scheduling=!1,t.config.auto_scheduling_descendant_links=!1,t.config.auto_scheduling_initial=!0,t.config.auto_scheduling_strict=!1,t.config.auto_scheduling_move_projects=!0,t.config.project_start=null,t.config.project_end=null,t.config.schedule_from_end=!1,t._autoSchedule=function(e,i){if(!1!==t.callEvent("onBeforeAutoSchedule",[e])){t._autoscheduling_in_progress=!0;var o=a.getConstraints(e,t.isTaskExists(e)?i:null),s=[],c=n.findLoops(i);if(c.length)t.callEvent("onAutoScheduleCircularLink",[c]);else{!function(e,i){if(t.config.auto_scheduling_compatibility)for(var n=0;n<i.length;n++){var o=i[n],a=t.getTask(o.target);t.config.auto_scheduling_strict&&o.target!=e||(o.preferredStart=new Date(a.start_date))}}(e,i);var l=r.generatePlan(i,o);!function(e){e.length&&t.batchUpdate(function(){for(var i=0;i<e.length;i++)t.updateTask(e[i])})}(s=r.applyProjectPlan(l))}t._autoscheduling_in_progress=!1,t.callEvent("onAfterAutoSchedule",[e,s])}},t.autoSchedule=function(i,n){var o;n=void 0===n||!!n,void 0!==i?t.config.auto_scheduling_compatible?e.getLinkedTasks(i,n):o=s.getConnectedGroupRelations(i):o=e.getLinkedTasks(),t._autoSchedule(i,o)},t.attachEvent("onTaskLoading",function(e){return e.constraint_date&&"string"==typeof e.constraint_date&&(e.constraint_date=t.date.parseDate(e.constraint_date,"parse_date")),e.constraint_type=t.getConstraintType(e),!0}),t.attachEvent("onTaskCreated",function(e){return e.constraint_type=t.getConstraintType(e),!0}),(0,i(261).attachUIHandlers)(t,e,c,s)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(268),o=i(260),a=i(257),r=i(254),s=i(252),c=i(251),l=i(250),u=i(239),d=i(238),h=i(237),p=i(236),f=i(234),g=i(231);e.default={auto_scheduling:n,click_drag:o.default,critical_path:a,drag_timeline:r.default,fullscreen:s.default,keyboard_navigation:l,quick_info:p.default,tooltip:f.default,undo:g.default,grouping:c,marker:u,multiselect:d,overlay:h}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(269),o=i(228),a=i(227),r=i(11),s=new o.default(a,n.default);e.Gantt=s;var c=r;c.Gantt=s;var l=c.gantt=s.getGanttInstance();e.gantt=l,e.default=l}])},e3gV:function(t,e,i){"use strict";i.d(e,"r",function(){return o}),i.d(e,"s",function(){return a}),i.d(e,"q",function(){return r}),i.d(e,"a",function(){return s}),i.d(e,"d",function(){return c}),i.d(e,"c",function(){return l}),i.d(e,"e",function(){return u}),i.d(e,"D",function(){return d}),i.d(e,"b",function(){return h}),i.d(e,"g",function(){return p}),i.d(e,"h",function(){return f}),i.d(e,"f",function(){return g}),i.d(e,"v",function(){return m}),i.d(e,"w",function(){return v}),i.d(e,"u",function(){return b}),i.d(e,"F",function(){return _}),i.d(e,"E",function(){return w}),i.d(e,"n",function(){return y}),i.d(e,"o",function(){return k}),i.d(e,"m",function(){return x}),i.d(e,"p",function(){return S}),i.d(e,"l",function(){return T}),i.d(e,"C",function(){return C}),i.d(e,"A",function(){return D}),i.d(e,"H",function(){return I}),i.d(e,"B",function(){return P}),i.d(e,"t",function(){return M}),i.d(e,"j",function(){return O}),i.d(e,"k",function(){return $}),i.d(e,"i",function(){return j}),i.d(e,"z",function(){return L}),i.d(e,"x",function(){return E}),i.d(e,"G",function(){return N}),i.d(e,"y",function(){return A});var n=i("l7P3");const o=Object(n.createAction)("[TIMELINE VIEW] Load view start",Object(n.props)()),a=Object(n.createAction)("[TIMELINE VIEW] Load view success",Object(n.props)()),r=Object(n.createAction)("[TIMELINE VIEW] Load view error",Object(n.props)()),s=Object(n.createAction)("[TIMELINE VIEW] Change group start",Object(n.props)()),c=Object(n.createAction)("[TIMELINE VIEW] Go to previous date range"),l=Object(n.createAction)("[TIMELINE VIEW] Go to next date range"),u=Object(n.createAction)("[TIMELINE VIEW] Go to today"),d=Object(n.createAction)("[TIMELINE VIEW] Set view date",Object(n.props)()),h=Object(n.createAction)("[TIMELINE VIEW] Delete task",Object(n.props)()),p=Object(n.createAction)("[TIMELINE VIEW] Load capacity start",Object(n.props)()),f=Object(n.createAction)("[TIMELINE VIEW] Load capacity success",Object(n.props)()),g=Object(n.createAction)("[TIMELINE VIEW] Load capacity error",Object(n.props)()),m=Object(n.createAction)("[TIMELINE VIEW] Save capacity start",Object(n.props)()),v=Object(n.createAction)("[TIMELINE VIEW] Save capacity success",Object(n.props)()),b=Object(n.createAction)("[TIMELINE VIEW] Save capacity error",Object(n.props)()),_=Object(n.createAction)("[TIMELINE VIEW] Toggle collapsed",Object(n.props)()),w=Object(n.createAction)("[TIMELINE VIEW] Toggle all collapsed"),y=Object(n.createAction)("[TIMELINE VIEW] Load sidebar task ids start",Object(n.props)()),k=Object(n.createAction)("[TIMELINE VIEW] Load sidebar task ids success",Object(n.props)()),x=Object(n.createAction)("[TIMELINE VIEW] Load sidebar task ids error",Object(n.props)()),S=Object(n.createAction)("[TIMELINE VIEW] Load sidebar tasks page",Object(n.props)()),T=Object(n.createAction)("[TIMELINE VIEW] Load sidebar current tab tasks page"),C=Object(n.createAction)("[TIMELINE VIEW] Set sidebar task type",Object(n.props)()),D=Object(n.createAction)("[TIMELINE VIEW] Set sidebar search text",Object(n.props)()),I=Object(n.createAction)("[TIMELINE VIEW] Toggle sidebar sort direction"),P=Object(n.createAction)("[TIMELINE VIEW] Set sidebar sort by field",Object(n.props)()),M=Object(n.createAction)("[TIMELINE VIEW] Reload sidebar tasks",Object(n.props)()),O=Object(n.createAction)("[TIMELINE VIEW] Load more view tasks start",Object(n.props)()),$=Object(n.createAction)("[TIMELINE VIEW] Load more view tasks success",Object(n.props)()),j=Object(n.createAction)("[TIMELINE VIEW] Load more view tasks error",Object(n.props)()),L=Object(n.createAction)("[TIMELINE VIEW] Set sidebar assignee filter",Object(n.props)()),E=Object(n.createAction)("[TIMELINE VIEW] Set hide empty groups",Object(n.props)()),N=Object(n.createAction)("[TIMELINE VIEW] Toggle hide empty groups"),A=Object(n.createAction)("[TIMELINE VIEW] Set scale and column size",Object(n.props)());Object(n.union)({loadViewStart:o,loadViewSuccess:a,loadViewError:r,changeGroupStart:s,goToPreviousDateRange:c,goToNextDateRange:l,goToToday:u,deleteTask:h,loadCapacityStart:p,loadCapacitySuccess:f,loadCapacityError:g,saveCapacityStart:m,saveCapacitySuccess:v,saveCapacityError:b,toggleAllCollapsed:w,setViewDate:d,loadSidebarTaskIdsStart:y,loadSidebarTaskIdsSuccess:k,loadSidebarTaskIdsError:x,loadSidebarTasksPage:S,setSidebarTaskType:C,setSidebarSearchText:D,toggleSidebarSortDirection:I,setSidebarSortByField:P,reloadSidebarTasks:M,toggleCollapsed:_,loadMoreViewTasksStart:O,loadMoreViewTasksSuccess:$,loadMoreViewTasksError:j,setSidebarUserId:L,setHideEmptyGroups:E,toggleHideEmptyGroups:N,setScaleAndColumnSize:A})},feEP:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),i.d(e,"f",function(){return g}),i.d(e,"h",function(){return b}),i.d(e,"i",function(){return _}),i.d(e,"j",function(){return k}),i.d(e,"g",function(){return x}),i.d(e,"c",function(){return S}),i.d(e,"e",function(){return T}),i.d(e,"b",function(){return C}),i.d(e,"d",function(){return D});var n=i("b3AA"),o=i("+z9/"),a=i("MguC"),r=i("TqRa"),s=i("Ll/8");n.Diagram.licenseKey="2bf840e1b36258c511d35a25403e7efb0fab2d36ced34df1595916f6ec5b3a442798e17d55d099d0d4f147f51a79938e89956b2d974d0d3be33381d847b080abb23f61a2125d1788a45176c28bea29a0ff796ef5ddb1";const c={plus:"M5 0a1 1 0 00-1 1v3H1a1 1 0 000 2h3v3a1 1 0 102 0V6h3a1 1 0 100-2H6V1a1 1 0 00-1-1z",minus:"M0 1a1 1 0 011-1h8a1 1 0 010 2H1a1 1 0 01-1-1z","external-link":"M13.996875,9.375 L14,13.625 C14,13.83125 13.83125,14 13.625,14 L9.375,13.996875 C9.16875,13.996875 9,13.828125 9,13.621875 L9,12.753125 C9,12.54375 9.171875,12.375 9.38125,12.378125 L11.3,12.45 L11.34375,12.40625 L7,8.0625 L2.65625,12.40625 L2.7,12.45 L4.61875,12.378125 C4.828125,12.375 5,12.54375 5,12.753125 L5,13.621875 C5,13.828125 4.83125,13.996875 4.625,13.996875 L0.375,14 C0.16875,14 0,13.83125 0,13.625 L0.003125,9.375 C0.003125,9.16875 0.171875,9 0.378125,9 L1.246875,9 C1.45625,9 1.625,9.171875 1.621875,9.38125 L1.55,11.3 L1.59375,11.34375 L5.9375,7 L1.59375,2.65625 L1.55,2.7 L1.621875,4.61875 C1.625,4.828125 1.45625,5 1.246875,5 L0.378125,5 C0.171875,5 0.003125,4.83125 0.003125,4.625 L0,0.375 C0,0.16875 0.16875,0 0.375,0 L4.625,0.003125 C4.83125,0.003125 5,0.171875 5,0.378125 L5,1.246875 C5,1.45625 4.828125,1.625 4.61875,1.621875 L2.7,1.55 L2.65625,1.59375 L7,5.9375 L11.34375,1.59375 L11.3,1.55 L9.38125,1.621875 C9.171875,1.625 9,1.45625 9,1.246875 L9,0.378125 C9,0.171875 9.16875,0.003125 9.375,0.003125 L13.625,0 C13.83125,0 14,0.16875 14,0.375 L13.996875,4.625 C13.996875,4.83125 13.828125,5 13.621875,5 L12.753125,5 C12.54375,5 12.375,4.828125 12.378125,4.61875 L12.45,2.7 L12.40625,2.65625 L8.0625,7 L12.40625,11.34375 L12.45,11.3 L12.378125,9.38125 C12.375,9.171875 12.54375,9 12.753125,9 L13.621875,9 C13.828125,9 13.996875,9.16875 13.996875,9.375 L13.996875,9.375 Z","space-icon":"M25.32 4.62c-.6-1.74-2.84-2.39-6.42-2.13-.63-.53-1.26-1.06-2.07-1.45a8.7 8.7 0 0 0-11.63 4 6.9 6.9 0 0 0-.74 2.43C1.5 9.47.07 11.45.72 13.09c.82 1.96 3.46 2.25 5.25 2.23.45 0 .8-.05 1.25-.05.63.53 1.27 1.06 2.07 1.45a8.7 8.7 0 0 0 11.64-4c.4-.81.65-1.58.73-2.43.36-.27.67-.45 1.03-.72 2.88-2.27 3.04-3.97 2.63-4.95zM2.59 12.45c-.14-.4.3-1.3 1.8-2.57a8.5 8.5 0 0 0 1.16 3.34c-1.83.11-2.82-.37-2.96-.77zm5.33.7A6.59 6.59 0 0 1 7 5.93a6.7 6.7 0 0 1 8.96-3.08 6.59 6.59 0 0 1 3.72 6.27c-1.46 1.4-9.84 4.2-11.76 4.05zm2.16 1.73c1.48-.06 7.67-2.27 9-3.18l-.04.1a6.7 6.7 0 0 1-8.96 3.08zm11.6-7.14a8.5 8.5 0 0 0-1.15-3.34c1.97.07 2.87.5 3 .91.06.36-.43 1.35-1.85 2.43z","folder-icon":"M0 2.125C0 0.976954 0.926386 0 2.125 0H6.28921L7.78921 1.5H11.875C13.0367 1.5 14 2.46334 14 3.625V8.875C14 10.0736 13.023 11 11.875 11H2.125C0.939903 11 0 10.0601 0 8.875V2.125ZM2.125 2C2.05799 2 2 2.0543 2 2.125V8.875C2 8.92567 2.01732 8.95272 2.0323 8.9677C2.04728 8.98268 2.07433 9 2.125 9H11.875C11.9457 9 12 8.94201 12 8.875V3.625C12 3.60654 11.9919 3.57403 11.9589 3.54109C11.926 3.50815 11.8935 3.5 11.875 3.5H6.96079L5.46079 2H2.125Z","list-icon":"M1.5,0.5 C0.671573,0.5 0,1.17157 0,2 C0,2.82843 0.671573,3.5 1.5,3.5 C2.32843,3.5 3,2.82843 3,2 C3,1.17157 2.32843,0.5 1.5,0.5 Z M5,1 C4.44772,1 4,1.44772 4,2 C4,2.55228 4.44772,3 5,3 L11,3 C11.5523,3 12,2.55228 12,2 C12,1.44772 11.5523,1 11,1 L5,1 Z M5,5 C4.44772,5 4,5.44772 4,6 C4,6.55228 4.44772,7 5,7 L11,7 C11.5523,7 12,6.55228 12,6 C12,5.44772 11.5523,5 11,5 L5,5 Z M4,10 C4,9.44771 4.44772,9 5,9 L11,9 C11.5523,9 12,9.44771 12,10 C12,10.5523 11.5523,11 11,11 L5,11 C4.44772,11 4,10.5523 4,10 Z M0,6 C0,5.17157 0.671573,4.5 1.5,4.5 C2.32843,4.5 3,5.17157 3,6 C3,6.82843 2.32843,7.5 1.5,7.5 C0.671573,7.5 0,6.82843 0,6 Z M1.5,8.5 C0.671573,8.5 0,9.17157 0,10 C0,10.8284 0.671573,11.5 1.5,11.5 C2.32843,11.5 3,10.8284 3,10 C3,9.17157 2.32843,8.5 1.5,8.5 Z",delete:"M6 0C5.44772 0 5 0.447715 5 1H3H1C0.447715 1 0 1.44772 0 2C0 2.55228 0.447716 3 1 3L1 12C1 13.1046 1.89543 14 3 14H11C12.1046 14 13 13.1046 13 12V3C13.5523 3 14 2.55228 14 2C14 1.44772 13.5523 1 13 1H11H9C9 0.447715 8.55229 0 8 0H6ZM3 3H11V12H3L3 3ZM4.5 5H6V10H4.5V5ZM9.5 5H8V10H9.5V5Z",sibling:"M4.77114 2H9.99991C10.5522 2 10.9999 1.55228 10.9999 1C10.9999 0.447715 10.5522 0 9.99991 0H3.35449C3.55137 0.188133 3.71527 0.378734 3.8478 0.547926C4.19706 0.993784 4.5112 1.53103 4.77114 2ZM0 1C0 0.447715 0.447715 0 1 0C1.96746 0 2.63151 0.616726 3.06067 1.16459C3.44174 1.65106 3.78 2.27032 4.07571 2.81166C4.11409 2.88193 4.15176 2.95089 4.18872 3.01808C4.53816 3.65343 4.84538 4.1753 5.18247 4.54303C5.50249 4.89214 5.75483 5 6 5H10C10.5523 5 11 5.44772 11 6C11 6.55228 10.5523 7 10 7H6C4.99517 7 4.24751 6.48286 3.70816 5.89447C3.18587 5.3247 2.77434 4.59657 2.43628 3.98192C2.39806 3.91242 2.36077 3.84438 2.32428 3.77782C2.01156 3.20731 1.7583 2.74527 1.48621 2.39791C1.18099 2.00827 1.03254 2 1 2C0.447715 2 0 1.55228 0 1Z","caret-down":"M1.22857 0.5C0.841851 0.5 0.648492 0.972656 0.927788 1.25195L3.67779 4.00195C3.84966 4.17383 4.12896 4.17383 4.30084 4.00195L7.05084 1.25195C7.33013 0.972656 7.13677 0.5 6.75005 0.5H1.22857Z"};var l=function(t){return t.Content="CONTENT",t.Text="TEXT",t.Adornment="ADORNMENT",t.Shape="SHAPE",t}({});const u={id:"root"},d={layerSpacing:50,nodeSpacing:20};function h(t){let e=c[t];return void 0===e&&(e=null),"string"==typeof e&&(e=c[t]=n.Geometry.parse(e,!0)),e}function p(t,e,i){return!(!i||!i.trim())}function f(t,e){return"left"===t?e?n.Spot.Left:n.Spot.Right:e?n.Spot.Right:n.Spot.Left}function g(t){const e=[];return t.findNodesOutOf().each(t=>{e.push(t),e.concat(g(t))}),e}function m(t,e){return t instanceof n.Node&&e instanceof n.Node&&t!==e&&!t.isInTreeOf(e)&&!(!e.data.actions||!e.data.actions.canRelink)&&([o.a.Task,o.a.Subtask].includes(e.data.type)?t.data.type===o.a.Subcategory||t.data.type===o.a.Task&&!e.data.payload.subtasks_count:[o.a.Custom].includes(t.data.type)?[o.a.Custom].includes(e.data.type):void 0)}function v(t,e,i){const o=n.GraphObject.make;return o(n.Adornment,"Spot",{name:l.Adornment},o(n.Panel,"Auto",o(n.Shape,"RoundedRectangle",{stroke:e,strokeWidth:2,fill:null}),o(n.Placeholder)),o(n.Panel,"Auto",{alignment:n.Spot.Top,alignmentFocus:n.Spot.Bottom},o(n.Shape,{figure:"RoundedRectangle",stroke:i?"#384047":"#e9ebf0",strokeWidth:1,fill:i?"#384047":"#fff",margin:new n.Margin(0,0,4,0)}),o(n.Panel,n.Panel.Horizontal,o("Button",{margin:2,"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:i?"#2b343b":"#f2f2f2",_buttonStrokeOver:i?"#2b343b":"#f2f2f2",_buttonFillPressed:i?"#2b343b":"#f2f2f2",_buttonStrokePressed:i?"#2b343b":"#f2f2f2",click:t.assignTask,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.assignTask)),o(n.TextBlock,{margin:2,stroke:e,font:"400 12px/1 'Gotham Pro', 'Proxima Nova', arial, serif"},new n.Binding("text","actions",t=>t&&t.assignTask||"Assign Task"))),o("Button",{margin:2,"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:i?"#2b343b":"#f2f2f2",_buttonStrokeOver:i?"#2b343b":"#f2f2f2",_buttonFillPressed:i?"#2b343b":"#f2f2f2",_buttonStrokePressed:i?"#2b343b":"#f2f2f2",click:t.createTask,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.createTask)),o(n.TextBlock,{margin:2,stroke:i?"#d5d6d7":"#292d34",font:"500 13px/1 'Gotham Pro', 'Proxima Nova', arial, serif"},new n.Binding("text","actions",t=>t&&t.createTask||"+ Create Task"))),o(n.Shape,{figure:"RoundedRectangle",width:1,height:16,strokeWidth:0,fill:i?"#828588":"#e9ebf0",margin:3,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.setColor))),o("Button",{margin:2,"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:i?"#2b343b":"#f2f2f2",_buttonStrokeOver:i?"#2b343b":"#f2f2f2",_buttonFillPressed:i?"#2b343b":"#f2f2f2",_buttonStrokePressed:i?"#2b343b":"#f2f2f2",click:t.setColor,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.setColor)),o(n.Panel,n.Panel.Horizontal,o(n.Shape,"Ellipse",{margin:new n.Margin(2,4,2,4),width:14,height:14,fill:e,strokeWidth:0},new n.Binding("fill","brush",t=>t||"#b9bec7")),o(n.Shape,{margin:new n.Margin(0,4,0,4),geometry:h("caret-down"),strokeWidth:0,fill:i?"#d5d6d7":"#292d34",width:7,height:4}))),o(n.Shape,{figure:"RoundedRectangle",width:1,height:16,strokeWidth:0,fill:i?"#828588":"#e9ebf0",margin:3,visible:!1},new n.Binding("visible","actions",t=>!!(t&&t.delete&&t.setColor))),o("Button",{margin:2,"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:i?"#2b343b":"#f2f2f2",_buttonStrokeOver:i?"#2b343b":"#f2f2f2",_buttonFillPressed:i?"#2b343b":"#f2f2f2",_buttonStrokePressed:i?"#2b343b":"#f2f2f2",click:t.delete,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.delete)),o(n.Shape,{margin:2,geometry:h("delete"),strokeWidth:0,fill:"#FD71AF",width:14,height:14})))),o(n.Panel,n.Panel.Horizontal,{alignment:n.Spot.Bottom,alignmentFocus:n.Spot.Top},o("Button",{margin:new n.Margin(4,2,4,2),"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:"transparent",_buttonStrokeOver:"transparent",_buttonFillPressed:"transparent",_buttonStrokePressed:"transparent",click:t.addSibling,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.addSibling)),o(n.Shape,"Ellipse",{width:20,height:20,fill:e,stroke:e,strokeWidth:3}),o(n.Shape,{margin:2,geometry:h("sibling"),strokeWidth:0,fill:"#fff",width:11,height:7}))),o(n.Panel,n.Panel.Horizontal,{alignment:n.Spot.RightCenter,alignmentFocus:n.Spot.Left},o("Button",{margin:new n.Margin(4,2,4,4),"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:"transparent",_buttonStrokeOver:"transparent",_buttonFillPressed:"transparent",_buttonStrokePressed:"transparent",click:t.addChild,visible:!1},new n.Binding("visible","actions",t=>!(!t||!t.addChild)),o(n.Shape,"Ellipse",{width:20,height:20,fill:e,stroke:e,strokeWidth:3}),o(n.Shape,{margin:2,geometry:h("plus"),strokeWidth:0,fill:"#fff",width:10,height:10}))))}function b(t,e,i,a,r,s,c,u,g,b,_){const y=n.GraphObject.make,k=y(n.Diagram,{allowClipboard:!1,"undoManager.isEnabled":!0,"undoManager.maxHistoryLength":0,"draggingTool.isEnabled":!0,"draggingTool.dragsTree":!0,"dragSelectingTool.isEnabled":!1,"linkingTool.isEnabled":!1,"animationManager.duration":150,"toolManager.hoverDelay":300,"toolManager.toolTipDuration":1e4,"relinkingTool.portGravity":20,"relinkingTool.reconnectLink":(t,e,i,n)=>{const o=k.model,a=t.fromNode,s=t.toNode;o.removeLinkData(t.data),o.addLinkData(n?{from:a.key,to:e.key}:{from:e.key,to:s.key}),r&&r(s,e),w(k,e)},"relinkingTool.linkValidation":(t,e,i,n,o)=>m(t,i),"relinkingTool.fromHandleArchetype":y(n.Shape,"Diamond",{segmentIndex:0,cursor:"move",desiredSize:new n.Size(12,14),fill:"lightskyblue",stroke:"darkblue",strokeWidth:3}),initialContentAlignment:n.Spot.Center,padding:new n.Margin(60,60,120,60),layout:t?y(n.Layout):y(n.TreeLayout,Object.assign({},d)),model:y(n.GraphLinksModel,{linkToPortIdProperty:"toPort",linkFromPortIdProperty:"fromPort",linkKeyProperty:"key"})});let x,S;s&&(x=y(n.HTMLInfo,Object.assign({},s))),c&&(S=y(n.HTMLInfo,Object.assign({},c))),k.commandHandler.archetypeGroupData={key:"Group",isGroup:!0},k.nodeTemplate=y(n.Node,"Spot",{mouseDragEnter:(t,e,i)=>{const o=k.selection.first();if(!(e instanceof n.Node&&o instanceof n.Node))return;if(!m(e,o))return;const a=e.findObject(l.Shape);a&&(a._prevFill=a.fill,a.fill="#e9ebf0")},mouseDragLeave:(t,e,i)=>{if(!(e instanceof n.Node))return;const o=e.findObject(l.Shape);o&&o._prevFill&&(o.fill=o._prevFill)},mouseDrop:(t,e)=>{const i=k.selection.first();if(e instanceof n.Node&&i instanceof n.Node&&m(e,i)){const t=k.model,o=i.findTreeParentLink();null!==o&&t.removeLinkData(o.data),t.addLinkData({from:i.key,to:e.key}),r&&r(i,e),k.currentTool instanceof n.DraggingTool&&k.currentTool.doCancel(),setTimeout(()=>{w(k,e)})}},isTreeExpanded:!1,copyable:!1,movable:!1,deletable:!1,isShadowed:!0,shadowOffset:new n.Point(0,3),shadowBlur:8,shadowColor:"rgba(0, 0, 0, 0.03)",selectionAdornmentTemplate:u?v(u,g,b):null,fromLinkable:!0,toLinkable:!0},new n.Binding("isTreeExpanded","expanded",t=>!!t),new n.Binding("movable","movable",t=>!!t),new n.Binding("selectable","type",t=>![o.a.CustomEmptyRoot].includes(t)),new n.Binding("location","loc",n.Point.parse).makeTwoWay(n.Point.stringify),y(n.Panel,n.Panel.Table,y(n.Panel,n.Panel.None,{row:0,margin:0},new n.Binding("column","dir",t=>"left"===t?2:0),function(t,e,i,a,r,s){const c=n.GraphObject.make;return c(n.Panel,n.Panel.Auto,{name:l.Content,toolTip:i,click:t},new n.Binding("cursor","type",t=>t===o.a.Task||t===o.a.Subtask?"pointer":null),c(n.Shape,{name:l.Shape,figure:"RoundedRectangle",stroke:r?"#384047":"#e9ebf0",strokeWidth:1,fill:r?"#384047":"#fff",shadowVisible:!0}),c(n.Panel,n.Panel.Horizontal,{margin:0},c(n.Shape,{margin:new n.Margin(0,0,0,9),geometry:h("space-icon"),strokeWidth:.5,fill:r?"#d5d6d7":"#292d34",stroke:r?"#d5d6d7":"#292d34",width:15,height:10},new n.Binding("visible","",t=>t.type===o.a.Project)),c(n.Shape,{margin:new n.Margin(0,0,0,9),geometry:h("folder-icon"),strokeWidth:0,fill:r?"#d5d6d7":"#292d34",width:14,height:11},new n.Binding("visible","",t=>t.type===o.a.Category)),c(n.Shape,{margin:new n.Margin(0,0,0,9),geometry:h("list-icon"),strokeWidth:0,fill:r?"#d5d6d7":"#292d34",width:12,height:12},new n.Binding("visible","",t=>t.type===o.a.Subcategory)),c(n.Shape,{figure:"RoundedRectangle",parameter1:1,margin:new n.Margin(0,0,0,9),width:8,height:8,stroke:"null",strokeWidth:0,fill:"#b9bec7"},new n.Binding("visible","",t=>t.type===o.a.Task||t.type===o.a.Subtask||!(t.type!==o.a.Custom||!t.payload||!t.payload.parent_id)),new n.Binding("fill","",t=>t.payload.data.status.color),new n.Binding("fill","",t=>t.type===o.a.Custom&&t.payload&&t.payload.parent_id?t.payload.data.status.color:t.type===o.a.Task||t.type===o.a.Subtask?t.payload.status.color:null)),c(n.TextBlock,{margin:new n.Margin(7,9,6,9),name:l.Text,isMultiline:!1,textEditor:a,font:"500 14px/1 'Gotham Pro', 'Proxima Nova', arial, serif",wrap:n.TextBlock.WrapFit,overflow:n.TextBlock.OverflowEllipsis,maxLines:4,width:250,stroke:r?"#d5d6d7":"#292d34"},new n.Binding("text","title"),new n.Binding("editable","editable"),new n.Binding("cursor","",t=>t.data.editable&&t.isSelected?"text":void 0).ofObject(),new n.Binding("textValidation","type",t=>t===o.a.Adding?null:p)),c(n.Panel,n.Panel.Auto,{margin:new n.Margin(3,3,3,-2)},c("Button",{"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:r?"#2b343b":"#f2f2f2",_buttonStrokeOver:r?"#2b343b":"#f2f2f2",_buttonFillPressed:r?"#2b343b":"#f2f2f2",_buttonStrokePressed:r?"#2b343b":"#f2f2f2",click:e},c(n.Shape,{margin:1,geometry:h("external-link"),strokeWidth:0,fill:"#7c828d",width:14,height:14})),new n.Binding("visible","",t=>(t.type===o.a.Task||t.type===o.a.Subtask||!(t.type!==o.a.Custom||!t.payload||!t.payload.parent_id))&&s))))}(e,i,x,S,b,_)),y(n.Panel,n.Panel.None,{row:0,column:1,margin:0},new n.Binding("visible","",t=>!t.isTreeLeaf||!t.data.loaded).ofObject(),y(n.Shape,"Rectangle",{width:11,height:3,stroke:null,strokeWidth:0,fill:g},new n.Binding("fill","brush",t=>t||"#b9bec7"))),y(n.Panel,n.Panel.None,{row:0,margin:0},new n.Binding("column","dir",t=>"left"===t?0:2),new n.Binding("visible","",t=>!t.isTreeLeaf||!t.data.loaded).ofObject(),function(t,e){const i=n.GraphObject.make;return i(n.Panel,n.Panel.Auto,i("Button",{margin:new n.Margin(0,-3,0,-3),"ButtonBorder.fill":"transparent","ButtonBorder.stroke":"transparent",_buttonFillOver:"transparent",_buttonStrokeOver:"transparent",_buttonFillPressed:"transparent",_buttonStrokePressed:"transparent",click(e,i){const n=e.diagram.findNodeForKey(i.part.data.key);n.isTreeLeaf?t(e,i):n.isTreeExpanded?e.diagram.commandHandler.collapseTree(n):(n.data.loaded||t(e,i),e.diagram.commandHandler.expandTree(n))}},i(n.Shape,"Ellipse",{width:18,height:18,fill:"#b9bec7",stroke:"#b9bec7",strokeWidth:3},new n.Binding("fill","brush",t=>t||"#b9bec7"),new n.Binding("stroke","brush",t=>t||"#b9bec7"),new n.Binding("visible","",t=>t.isTreeLeaf||!t.isTreeExpanded).ofObject()),i(n.Shape,"Ellipse",{width:18,height:18,fill:"transparent",stroke:"#b9bec7",strokeWidth:3},new n.Binding("stroke","brush",t=>t||"#b9bec7"),new n.Binding("visible","",t=>!(t.isTreeLeaf||!t.isTreeExpanded)).ofObject()),i(n.Shape,{geometry:h("plus"),strokeWidth:0,fill:"#fff",width:10,height:10,visible:!1},new n.Binding("visible","",t=>t.isTreeLeaf||!t.isTreeExpanded).ofObject()),i(n.Shape,{geometry:h("minus"),strokeWidth:0,width:8,height:3,visible:!0},new n.Binding("fill","brush",t=>t||(e?"#abaeb0":"#7c828d")),new n.Binding("visible","",t=>!(t.isTreeLeaf||!t.isTreeExpanded)).ofObject())))}(a,b))),new n.Binding("fromSpot","dir",t=>f(t,!0)),new n.Binding("toSpot","dir",t=>f(t,!1)),new n.Binding("location","loc",n.Point.parse).makeTwoWay(n.Point.stringify),new n.Binding("locationSpot","dir",t=>f(t,!1))),k.linkTemplate=y(n.Link,{curve:n.Link.Bezier,fromShortLength:-2,toShortLength:-2,layerName:"Background"},new n.Binding("selectable","toNode",t=>[o.a.Task,o.a.Subtask,o.a.Custom].includes(t.data.type)&&t.data.actions&&t.data.actions.canRelink).ofObject(),new n.Binding("relinkableFrom","toNode",t=>[o.a.Task,o.a.Subtask,o.a.Custom].includes(t.data.type)&&t.data.actions&&t.data.actions.canRelink).ofObject(),y(n.Shape,{strokeWidth:3},new n.Binding("stroke","toNode",t=>t.data.brush?t.data.brush:"#7c828d").ofObject()));const T=y(n.Node,"Auto",{movable:!1},y(n.Panel,n.Panel.None,{},y("Button",{"ButtonBorder.fill":b?"#2b343b":"#fff","ButtonBorder.stroke":b?"#2b343b":"#e9ebf0",_buttonFillOver:b?"#384047":"#fafbfc",_buttonStrokeOver:b?"#2b343b":"#e9ebf0",_buttonFillPressed:b?"#384047":"#fafbfc",_buttonStrokePressed:b?"#2b343b":"#e9ebf0",click:a},y(n.TextBlock,{margin:new n.Margin(5,5,3,5),stroke:g,font:"400 12px/1 'Gotham Pro', 'Proxima Nova', arial, serif"},new n.Binding("text","title"))))),C=y(n.Node,"Auto",{movable:!1},y(n.Panel,n.Panel.None,{},y(n.TextBlock,{margin:new n.Margin(3,10,3,10),font:"500 14px/1 'Gotham Pro', 'Proxima Nova', arial, serif",stroke:b?"#d5d6d7":"#292d34"},new n.Binding("text","title")))),D=new n.Map;return D.add("loadMore",T),D.add("loading",C),D.add("",k.nodeTemplate),k.nodeTemplateMap=D,k}function _(t){const e=(0,n.GraphObject.make)(n.Overview);return e.box.elt(0).stroke=t,e}function w(t,e){const i=e.findTreeRoot().data.key;e.data.key===i?k(t):y(e.findTreeParts(),"left"===e.data.dir?180:0)}function y(t,e){n.GraphObject.make(n.TreeLayout,Object.assign(Object.assign({},d),{angle:e,arrangement:n.TreeLayout.ArrangementFixedRoots,setsPortSpot:!0,setsChildPortSpot:!1})).doLayout(t)}function k(t){const e=t.findTreeRoots().first();if(null===e)return;t.startTransaction("Layout");const i=new n.Set,o=new n.Set;e.findLinksConnected().each(function(t){const n=t.toNode;"left"===n.data.dir?(o.add(e),o.add(t),o.addAll(n.findTreeParts())):(i.add(e),i.add(t),i.addAll(n.findTreeParts()))}),y(i,0),y(o,180),t.commitTransaction("Layout")}function x(t,e){return`${t}_${e.id}`}function S(t,e,i){const n=[],a=[],s=t&&t.customNodes||[],c=t&&t.expandedMap||{},l={};if(s&&s.length){if(s.forEach(t=>{const s=x(o.a.Custom,t),u=t.parent_node_id?x(o.a.Custom,{id:t.parent_node_id}):void 0,d=!1!==c[s]&&(!u||l[u]);l[s]=d,n.push({key:s,type:o.a.Custom,expanded:d,title:t.title,dir:t.settings&&t.settings.dir||"right",loc:t.settings&&t.settings.loc,brush:t.settings&&t.settings.color||t.data&&t.data.status&&t.data.status.color||(i?"#828588":"#292d34"),payload:t,loaded:!0,editable:e&&e.canEdit&&!r.k,movable:e&&e.canEdit,actions:e&&e.canEdit?{addChild:"Add Child",addSibling:t.parent_node_id?"Add Sibling":void 0,delete:t.parent_node_id?"Delete":void 0,createTask:e&&e.canCreate?"+ Create Task":null,setColor:"Set Color",canRelink:!0,canView:!0}:void 0}),u&&a.push({from:u,to:s})}),t&&t.addingTo){const e=x(o.a.Adding,t.addingTo.payload);n.push({key:e,type:o.a.Adding,payload:t.addingTo,title:"",loaded:!0,loc:t.addingTo.loc}),a.push({from:t.addingTo.key,to:e})}}else n.push({key:"adding_root",type:o.a.CustomEmptyRoot,title:"Root Node",payload:u,loading:!1,loaded:!0,editable:!r.k});return{nodes:n,links:a}}function T(t,e,i,n,c,l,u){const d=[],h=[],p=t&&t.subcategories||[],f={};if(t&&t.view&&p.length){const g=t&&t.tasksMap||{},m=t&&t.taskIdsMap||{},v=t&&t.loadingTasksMap||{},b=t&&t.expandedMap||{},_={},w=function(e){let s,u;if(t.view.parent.type===a.e.Team){const t=x(o.a.Team,i);_[t]||(d.push({key:t,type:o.a.Team,expanded:b[t],title:"Everything",dir:"right",brush:l?"#2b343b":"#292d34",payload:i,loaded:!0,editable:!r.k}),_[t]=i),s=t}if(t.view.parent.type===a.e.Team||t.view.parent.type===a.e.Project){u=n.find(t=>t.id===e.project.id)||e.project;const t=x(o.a.Project,u);_[t]||(d.push({key:t,type:o.a.Project,expanded:b[t],title:u.name,dir:"right",brush:u.color||(l?"#2b343b":"#292d34"),payload:u,loaded:!0,editable:!r.k}),_[t]=u,s&&h.push({from:s,to:t})),s=t}if(t.view.parent.type===a.e.Team||t.view.parent.type===a.e.Project||t.view.parent.type===a.e.Category){const t=c[e.project.id]&&c[e.project.id].find(t=>t.id===(e.category.id||e.category))||e.category;if(!t.hidden){const e=x(o.a.Category,t);_[e]||(d.push({key:e,type:o.a.Category,expanded:b[e],title:t.name,dir:"right",brush:u&&u.color||(l?"#2b343b":"#292d34"),payload:t,loaded:!0,editable:!r.k}),_[e]=t,s&&h.push({from:s,to:e})),s=e}}return s};p.forEach(t=>{const n=w(t),a=x(o.a.Subcategory,t),c=_[n],p=c&&c.subcategories&&c.subcategories.find(e=>e.id===t.id)||t,y=g[a],k=m[a],S=(y||[]).reduce((t,e)=>(t[e.id]=(g[x(o.a.Task,e)]||[]).map(t=>t.id),t),{}),T=(Object.values(g)||[]).reduce((t,e)=>(e||[]).reduce((t,e)=>(t[e.id]=e,t),t),{}),C=Object(s.c)(T,S),D=(k?k.length:0)-(y?y.length:0),I=Object.assign(Object.assign({},t),p);if(void 0!==t.permissions&&(I.permissions=Object.assign(Object.assign({},t.permissions),p.permissions||{})),d.push({key:a,type:o.a.Subcategory,expanded:b[a],title:I.name,dir:"right",brush:t.color||t.project.color||(l?"#2b343b":"#292d34"),payload:I,loaded:!!y,editable:!r.k,actions:{addChild:I.permissions&&I.permissions.can_create_tasks&&u&&u.canCreate?"Add Task":void 0}}),n&&h.push({from:n,to:a}),f[a]=!!y,y){if(y.forEach(t=>{const n=x(o.a.Task,t);d.push({key:n,type:o.a.Task,expanded:b[n],title:t.name,dir:"right",brush:t.status.color||(l?"#2b343b":"#292d34"),payload:t,loaded:!t.subtasks_count||!!t.subtasks,loading:v[a],editable:!r.k,actions:{addChild:t&&t.permissions&&t.permissions.can_create_tasks&&u&&u.canCreate?"Add Subtask":void 0,delete:t&&t.permissions&&t.permissions.delete&&u&&(u.canDelete||u.canDeleteOwn&&t.creator.id===e.id)?"Delete":void 0,canRelink:t.permissions&&t.permissions.move_task,canView:!0}}),h.push({from:a,to:n});const s=C[t.id],c=function(t,n,a){return a.forEach(a=>{const s=x(o.a.Subtask,a);d.push({key:s,type:o.a.Subtask,expanded:b[s],title:a.name,dir:"right",brush:a.status.color||(l?"#2b343b":"#292d34"),payload:a,loaded:!0,loading:!1,editable:!r.k,actions:{addChild:i.nested_subtasks&&a.nested_level<i.nested_subtasks_level&&t&&t.permissions&&t.permissions.can_create_tasks&&u&&u.canCreate?"Add Subtask":void 0,delete:t&&t.permissions&&t.permissions.delete&&u&&(u.canDelete||u.canDeleteOwn&&t.creator.id===e.id)?"Delete":void 0,canRelink:t.permissions&&t.permissions.move_task,canView:!0}}),h.push({from:n,to:s}),C[a.id]&&c(t,s,C[a.id])})};if(s)s.forEach(a=>{const s=x(o.a.Subtask,a);d.push({key:s,type:o.a.Subtask,expanded:b[s],title:a.name,dir:"right",brush:a.status.color||(l?"#2b343b":"#292d34"),payload:a,loaded:!0,loading:!1,editable:!r.k,actions:{addChild:i.nested_subtasks&&a.nested_level<i.nested_subtasks_level&&t&&t.permissions&&t.permissions.can_create_tasks&&u&&u.canCreate?"Add Subtask":void 0,delete:t&&t.permissions&&t.permissions.delete&&u&&(u.canDelete||u.canDeleteOwn&&t.creator.id===e.id)?"Delete":void 0,canRelink:t.permissions&&t.permissions.move_task,canView:!0}}),h.push({from:n,to:s}),C[a.id]&&c(t,s,C[a.id])});else if(t.subtasks_count>0){const e=x(o.a.Loading,t);d.push({key:e,type:o.a.Loading,title:"Loading...",dir:"right",brush:l?"#2b343b":"#292d34",loaded:!0,category:"loading",payload:t}),h.push({from:n,to:e})}f[n]=!!s||!t.subtasks_count}),D>0&&!v[a]){const e=x(o.a.LoadMore,t);d.push({key:e,type:o.a.LoadMore,title:`Load more (${D})...`,dir:"right",brush:l?"#2b343b":"#292d34",loaded:!0,category:"loadMore",payload:t}),h.push({from:a,to:e})}}else{const e=x(o.a.Loading,t);d.push({key:e,type:o.a.Loading,title:"Loading...",dir:"right",brush:l?"#2b343b":"#292d34",loaded:!0,category:"loading",payload:t}),h.push({from:a,to:e})}})}else d.push({key:"loading",type:o.a.Loading,title:"Loading...",dir:"right",brush:l?"#2b343b":"#292d34",loaded:!0,category:"loading"});if(t&&t.addingTo&&(![o.a.Subcategory,o.a.Task].includes(t.addingTo.type)||f[t.addingTo.key])){const e=x(o.a.Adding,t.addingTo.payload);d.push({key:e,type:o.a.Adding,payload:t.addingTo,title:"",loaded:!0}),h.push({from:t.addingTo.key,to:e})}return{nodes:d,links:h}}function C(t,e,i,n){const o=[],a=[];if(t&&e)for(const r of t){const t=e.find(t=>t.id===r);if(t)o.push(t);else{const t=i[r];if(!(t&&n<a.length))return{tasks:o,reloadTasks:a};o.push(t),a.push(t)}}return{tasks:o,reloadTasks:a}}function D(t){const e=[];return t.each(t=>{e.push(t.data)}),e}},gC2L:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var n=i("ofXK"),o=i("/SUI"),a=i("KyjD"),r=i("mcWp"),s=i("K0KF"),c=i("gb9A"),l=i("o/e2"),u=i("bFKe"),d=i("IRoT"),h=i("fXoL");let p=(()=>{class t{}return t.\u0275mod=h.Ub({type:t}),t.\u0275inj=h.Tb({factory:function(e){return new(e||t)},imports:[[n.c,o.a,a.a,s.a,r.a,c.a,l.a,u.b,d.a,a.a]]}),t})()},gM3s:function(t,e,i){"use strict";i.d(e,"a",function(){return R});var n=i("l7P3"),o=i("Msbh"),a=i("9jGm"),r=i("zp1y"),s=i("eIep"),c=i("JIr8"),l=i("lJxs"),u=i("5+tZ"),d=i("Kj3r"),h=i("IzEk"),p=i("pLZG"),f=i("e3gV"),g=i("LRne"),m=i("GyhO"),v=i("itXk"),b=i("c3rA"),_=i("Gj5t"),w=i("y83z"),y=i("BeL+"),k=i("m2rH"),x=i("4F4K"),S=i("MguC"),T=i("o7Ov"),C=i("f0Wu"),D=i("HHlo"),I=i("VQww"),P=i("uslN"),M=i("UJt2"),O=i("DmVh"),$=i("YwDF"),j=i("GkwO"),L=i("fXoL"),E=i("PSyB"),N=i("2p4s"),A=i("tk/3"),V=i("irDL");let z=(()=>{class t{constructor(t,e){this.http=t,this.errorHandler=e,this.apiUrl=N.a.apiUrl}getCapacity(t,e){return this.http.post(`${this.apiUrl}/team/${t}/user/capacity`,{members:e}).pipe(this.errorHandler.http())}setCapacity(t,e,i){return this.http.put(`${this.apiUrl}/team/${t}/users/capacity`,{userIds:e,capacity:i}).pipe(this.errorHandler.http())}}return t.\u0275fac=function(e){return new(e||t)(L.nc(A.b),L.nc(V.a))},t.\u0275prov=L.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var F=i("76Cs");let B=(()=>{class t{constructor(t,e,i,n,o){this.action$=t,this.store=e,this.publicViewHelper=i,this.timelineService=n,this.taskService=o,this.loadViewStart$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.r),Object(r.a)(this.store.select(j.qb),this.store.select(w.O),this.store.select(w.n)),Object(s.a)(([t,e,i,n])=>{const o=t.viewRange||i,a=t.loadSidebarTaskIds?[Object(g.a)(f.t({showLoading:t.showLoading,freshReq:t.freshReq}))]:[],l=e.grouping.field===S.c.Assignee;return Object(m.a)(...a,Object(v.a)([this.getViewTaskIds(t.freshReq,o,t.skipTaskCache,!1),this.getViewTaskIds(t.freshReq,o,t.skipTaskCache,!0)]).pipe(Object(r.a)(this.store.select(w.X)),Object(s.a)(([[i,a],r])=>{const s=Object(y.a)([...i.taskIdsToLoad,...a.taskIdsToLoad,...t.reloadTasks||[]]),c=l?[...i.viewData.groups,...a.viewData.groups].filter(t=>t.data&&t.data.length>0&&!t.data[0].group).map(t=>t.data[0].id).filter(t=>!r[t]):[];return[f.s({viewData:i.viewData,viewDataKey:n,groupBy:e.grouping.field,isMeMode:e.meView,loadedDateRange:{start:o.start.toISOString(),end:o.end.toISOString()},recurringGroups:a.viewData.groups}),new k.n({ids:s,fields:O.b}),c.length>0&&e.viewType===S.i.Workload?f.g({userIds:c}):null].filter(Boolean)}),Object(c.a)(t=>Object(g.a)(f.q({error:t})))))}))),this.changeGroup$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.a),Object(r.a)(this.store.select(j.qb),this.store.select(w.p),this.store.select(w.g)),Object(s.a)(([t,e,i,n])=>{var o;const a=Object.assign({},t.newDates),r=[];if(e.grouping.field===S.c.Assignee)a.assignees={},a.group_assignees={},t.oldGroup&&t.oldGroup.data.length>0&&(t.oldGroup.data[0].is_group?a.group_assignees.rem=[t.oldGroup.data[0].id]:a.assignees.rem=[t.oldGroup.data[0].id]),t.newGroup.data.length>0&&(t.newGroup.data[0].is_group?a.group_assignees.add=[t.newGroup.data[0].id]:a.assignees.add=[t.newGroup.data[0].id]);else if(e.grouping.field===S.c.Status)a.status=t.newGroup.data.status;else if(e.grouping.field===S.c.Priority)a.priority=t.newGroup.id;else if(e.grouping.field===S.c.Tag)r.push(Object(I.n)({taskIds:[t.task.id],tags:t.task.tags.filter(e=>!t.newGroup.data.some(t=>t.name===e.name)),muteNotifications:!i})),r.push(Object(I.b)({taskIds:[t.task.id],tags:t.newGroup.data,muteNotifications:!i}));else if(e.grouping.field===S.c.Subcategory)this.taskService.move(t.task,t.newGroup.data,t.newGroup.data.category,t.newGroup.data.project.id);else if(e.grouping.field.startsWith("cf_")){const a=e.grouping.field.replace("cf_",""),s=n.type===$.a.Date&&"+7"===t.newGroup.id?C().startOf("day").add(7,"days").valueOf():t.newGroup.data&&t.newGroup.data.drop_value;r.push(s?Object(D.r)({taskId:t.task.id,value:s.value||s,field:n,muteNotifications:!i,oldValue:null===(o=t.task.customFields.find(t=>t.id===a))||void 0===o?void 0:o.value}):Object(D.p)({taskId:t.task.id,fieldId:a,muteNotifications:!i}))}return r.push(new k.T(t.task.id,a,i?{}:{mute_notifications:"true"},[f.r({showLoading:!1,freshReq:!0,loadSidebarTaskIds:!1,skipTaskCache:!1}),f.n({sidebarDataKey:"overdue",showLoading:!1,freshReq:!0}),f.n({sidebarDataKey:"unscheduled",showLoading:!1,freshReq:!0})])),r}))),this.goToPreviousDateRange$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.d),Object(r.a)(this.store.select(w.P)),Object(l.a)(([,t])=>f.D({date:C(t).subtract(1,"week").toISOString()})))),this.goToNextDateRange$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.c),Object(r.a)(this.store.select(w.P)),Object(l.a)(([,t])=>f.D({date:C(t).add(1,"week").toISOString()})))),this.goToToday$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.e),Object(l.a)(()=>f.D({date:C().startOf("day").toISOString()})))),this.setViewDate$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.D),Object(r.a)(this.store.select(j.qb)),Object(s.a)(([t,e])=>{const i=[];return t.updateOnly||(e.timelineSettings&&e.timelineSettings.viewDate?i.push(new T.qm(e.id,{timelineSettings:Object.assign(Object.assign({},e.timelineSettings),{viewDate:t.date})},!0)):e.workloadSettings&&e.workloadSettings.viewDate&&i.push(new T.qm(e.id,{workloadSettings:Object.assign(Object.assign({},e.workloadSettings),{viewDate:t.date})},!0)),i.push(f.r({showLoading:!1,freshReq:!0,loadSidebarTaskIds:!1,skipTaskCache:!1}))),i}))),this.setHideEmptyGroups$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.x),Object(r.a)(this.store.select(j.qb)),Object(l.a)(([t,e])=>e.timelineSettings?new T.qm(e.id,{timelineSettings:Object.assign(Object.assign({},e.timelineSettings),{hideEmptyGroups:t.hideEmptyGroups})},!0):e.workloadSettings?new T.qm(e.id,{workloadSettings:Object.assign(Object.assign({},e.workloadSettings),{showEmptyGroups:!t.hideEmptyGroups})},!0):void 0))),this.deleteTask$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.b),Object(l.a)(t=>new k.E([t.taskId])))),this.loadCapacity$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.g),Object(r.a)(this.store.select(b.getTeam)),Object(s.a)(([t,e])=>this.timelineService.getCapacity(e.id,t.userIds).pipe(Object(l.a)(t=>{const e={};return t.forEach(t=>{e[t.userid]=t.capacity}),f.h({capacity:e})}),Object(c.a)(t=>Object(g.a)(f.f(t))))))),this.saveCapacity$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.v),Object(r.a)(this.store.select(b.getSelectedTeamId)),Object(s.a)(([t,e])=>this.timelineService.setCapacity(e,t.userIds,t.capacity).pipe(Object(l.a)(()=>f.w(t)),Object(c.a)(t=>Object(g.a)(f.u(t))))))),this.toggleAllCollapsed$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.E),Object(r.a)(this.store.select(w.L),this.store.select(w.a),this.store.select(j.qb),this.store.select(w.j)),Object(l.a)(([,t,e,i,n])=>{const o=t.groups.map(t=>t.id||"");if(n)return new T.qm(i.id,{workloadSettings:Object.assign(Object.assign({},i.workloadSettings),{expandedGroups:e?o:[]})},!0);{const t=e?[]:o,n=Object.assign(Object.assign({},i.grouping),{collapsed:t});return new T.sj(n)}}))),this.toggleCollapsed$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.F),Object(r.a)(this.store.select(j.qb),this.store.select(w.j)),Object(l.a)(([t,e,i])=>{if(i){let i=e.workloadSettings.expandedGroups||[];const n=t.groupId||"";return i=i.includes(n)?i.filter(t=>t!==n):[...i,n],new T.qm(e.id,{workloadSettings:Object.assign(Object.assign({},e.workloadSettings),{expandedGroups:i})},!0)}return new T.ql(t.groupId)}))),this.loadSidebarTaskIds$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.n),Object(u.a)(t=>{const e={overdue:"overdue",unscheduled:"unscheduled"}[t.sidebarDataKey]||"no-effort";return this.getSidebarTaskIds(e,t.freshReq).pipe(Object(r.a)(this.store.select(w.D)),Object(s.a)(([i,n])=>{const o=[],a=n===e;return o.push(f.o({taskIds:i,sidebarDataKey:t.sidebarDataKey,loadInitial:a})),a&&o.push(f.p({sidebarDataKey:t.sidebarDataKey})),o}),Object(c.a)(t=>Object(g.a)(f.m({error:t}))))}))),this.loadSidebarTasksPage$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.p),Object(r.a)(this.store.select(w.v),this.store.select(x.g)),Object(l.a)(([t,e,i])=>{const n=e[t.sidebarDataKey],o=n.taskIds.slice(0,n.pageCursor).filter(t=>!i[t]);return new k.n({ids:o,fields:O.b})}))),this.loadSidebarCurrentTabTasksPage$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.l),Object(r.a)(this.store.select(w.w)),Object(l.a)(([,t])=>f.p({sidebarDataKey:t})))),this.setSidebarTaskType$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.C),Object(r.a)(this.store.select(w.w),this.store.select(w.v),this.store.select(w.B)),Object(s.a)(([,t,e,i])=>{const n=e[t],o=[];return i?o.push(f.A({searchText:""})):0===n.pageCursor&&o.push(f.p({sidebarDataKey:t})),o}))),this.setSidebarSearchText$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.A),Object(d.a)(300),Object(r.a)(this.store.select(w.w)),Object(l.a)(([,t])=>f.n({sidebarDataKey:t,showLoading:!0,freshReq:!0})))),this.setSidebarSorting$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.B,f.H),Object(r.a)(this.store.select(w.w)),Object(l.a)(([,t])=>f.n({sidebarDataKey:t,showLoading:!0,freshReq:!0})))),this.reloadSidebarTasks$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.t),Object(r.a)(this.store.select(w.b),this.store.select(w.bb)),Object(s.a)(([t,e,i])=>[f.n({sidebarDataKey:"overdue",showLoading:t.showLoading,freshReq:t.freshReq}),f.n({sidebarDataKey:"unscheduled",showLoading:t.showLoading,freshReq:t.freshReq}),i?f.n({sidebarDataKey:e,showLoading:t.showLoading,freshReq:t.freshReq}):null].filter(Boolean)))),this.loadMoreViewTasks$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.j),Object(r.a)(this.store.select(w.n),this.store.select(w.O)),Object(u.a)(([t,e,i])=>{let n;return n="left"===t.direction?{start:C(i.start).subtract(30,"days").toDate(),end:i.start}:{start:i.end,end:C(i.end).add(30,"days").toDate()},this.getViewTaskIds(!1,n,!0).pipe(Object(s.a)(({viewData:i,taskIdsToLoad:o})=>[f.k({direction:t.direction,viewDataKey:e,groups:i.groups,groupDateRange:{start:n.start.toISOString(),end:n.end.toISOString()}}),new k.n({ids:o,fields:O.b})]),Object(c.a)(()=>Object(g.a)(f.i({direction:t.direction}))))}))),this.setSidebarUserId$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.z),Object(s.a)(t=>[t.tab?f.C({sidebarTaskType:t.tab}):null,f.t({showLoading:!0,freshReq:!0})].filter(Boolean)))),this.toggleHideEmptyGroups$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.G),Object(r.a)(this.store.select(w.h)),Object(l.a)(([,t])=>f.x({hideEmptyGroups:!t})))),this.setScaleAndColumnSize$=Object(a.c)(()=>this.action$.pipe(Object(a.d)(f.y),Object(r.a)(this.store.select(j.qb)),Object(l.a)(([t,e])=>new T.qm(e.id,{timelineSettings:Object.assign(Object.assign({},e.timelineSettings),{scale:t.scale,columnSize:t.columnSize})},!0))))}getViewTaskIds(t,e,i,o=!1){return Object(v.a)([this.store.select(j.qb),this.store.select(j.G),this.store.select(b.getIsSharedSpaceParamSet),this.store.pipe(Object(n.select)(j.cb),Object(l.a)(t=>t||{userIds:[],assignedComments:!1,showUnassigned:!1})),this.store.select(b.getSidebarShowArchivedOption),this.store.select(b.getTeam)]).pipe(Object(h.a)(1),Object(s.a)(([n,a,s,c,u,d])=>{if(o&&n.filter.filters.some(t=>"recurring"===t.field&&"NOT"===t.op))return Object(g.a)({viewData:{groups:[]},taskIdsToLoad:[]});const h=Object(_.D)(n,a,!0,s),p=n.grouping.field===S.c.Assignee;return this.publicViewHelper.getPublicOrPrivateGenericView(h,{assignees:n.meView?null:c.userIds,assignedComments:n.meView?null:c.assignedComments,unassignedTasks:n.meView?null:c.showUnassigned,includeArchived:u,skipMaxLength:!0,freshReq:t},null,!1,{any_date_gt:o?"":String(e.start.getTime()),any_date_lt:o?"":String(e.end.getTime()),include_outside_view:p&&d.plan_id===P.f.ENTERPRISE&&n.viewType===S.i.Workload,recurring_v2:o}).pipe(Object(r.a)(this.store.select(x.g)),Object(l.a)(([t,e])=>{const n=t.timeline||t.workload;p&&(n.groups=n.groups.map(t=>t.data&&!Array.isArray(t.data)?Object.assign(Object.assign({},t),{data:[t.data]}):t));const o=Object(y.a)(n.groups.filter(t=>!t.data||!t.data[0]||!t.data[0].group).map(t=>t.task_ids).flat().filter(t=>i||!e[t]||!Object(O.a)(e[t])));return{viewData:n,taskIdsToLoad:o}}))}))}getSidebarTaskIds(t,e){return Object(v.a)([this.store.select(j.qb).pipe(Object(p.a)(t=>!!t)),this.store.select(j.G),this.store.select(b.getIsSharedSpaceParamSet),this.store.pipe(Object(n.select)(j.cb),Object(l.a)(t=>t||{userIds:[],assignedComments:!1,showUnassigned:!1})),this.store.select(b.getSidebarShowArchivedOption),this.store.select(w.b)]).pipe(Object(h.a)(1),Object(r.a)(this.store.select(w.B),this.store.select(w.t),this.store.select(w.H),this.store.select(w.G)),Object(s.a)(([[i,n,o,a,r,s],c,u,d,h])=>{if(![S.i.Timeline,S.i.Workload].includes(i.viewType))return Object(g.a)([]);const p=Object(_.D)(i,n,!0,o);let f=[];if(u[t]){const e=M.b.find(e=>e.name===u[t].field);f=[Object.assign(Object.assign({},Object(_.Bb)(u[t])),{field:e.apiOrderBy})]}const m=i.meView?null:d?[d]:void 0,v=i.meView?null:h?[h]:void 0;return this.publicViewHelper.getPublicOrPrivateGenericView(Object.assign(Object.assign({},p),{grouping:Object.assign(Object.assign({},p.grouping),{field:null}),filters:Object.assign(Object.assign({},p.filters),{search:c||p.filters.search})}),{assignees:m,groupAssignees:v,assignedComments:i.meView?null:a.assignedComments,unassignedTasks:i.meView?null:a.showUnassigned,includeArchived:r,skipMaxLength:!0,freshReq:e},null,!1,{overdue:"overdue"===t,no_date:"unscheduled"===t,no_effort:"no-effort"===t?s:void 0,sorting:{fields:f}}).pipe(Object(l.a)(t=>{const e=t.timeline||t.workload;return e.groups.length>0?e.groups[0].task_ids:[]}))}))}}return t.\u0275fac=function(e){return new(e||t)(L.nc(a.a),L.nc(n.Store),L.nc(E.a),L.nc(z),L.nc(F.a))},t.\u0275prov=L.Sb({token:t,factory:t.\u0275fac}),t})(),R=(()=>{class t{}return t.\u0275mod=L.Ub({type:t}),t.\u0275inj=L.Tb({factory:function(e){return new(e||t)},imports:[[n.StoreModule.forFeature("timelineView",o.b),a.b.forFeature([B])]]}),t})()},iNWM:function(t,e,i){"use strict";i.d(e,"a",function(){return L});var n=i("lJxs"),o=i("l7P3"),a=i("c3rA"),r=i("x1J0"),s=i("itXk"),c=i("XNiG"),l=i("dTHz"),u=i("GkwO"),d=i("o7Ov"),h=i("fXoL"),p=i("8it8"),f=i("ofXK"),g=i("NsZK"),m=i("UdVN"),v=i("peMq"),b=i("loh9");const _=["meModeTemplate"],w=["everyoneTemplate"],y=["customTemplate"],k=["dropdownList"];function x(t,e){1&t&&h.Xb(0,"div",8)}function S(t,e){1&t&&h.Xb(0,"div",9),2&t&&h.Dc("icon","cu2-close")}function T(t,e){if(1&t&&(h.cc(0,"div",14),h.dd(1),h.bc()),2&t){const t=h.uc(2);h.Ib(1),h.fd(" ",t.userIds.length," ")}}function C(t,e){if(1&t&&(h.Xb(0,"cu-user-group",16),h.vc(1,"async")),2&t){const t=h.uc(3);h.Dc("users",h.wc(1,7,t.filterAssigneesUsers$))("readOnly",!0)("hideAssignIcon",!0)("disableUserTooltip",!0)("modifier","cu-user-group_sm")("avatarSize",30)("leadCounter",3)}}function D(t,e){if(1&t&&(h.ac(0),h.bd(1,C,2,9,"cu-user-group",15),h.Xb(2,"div",9),h.Zb()),2&t){const t=h.uc(2);h.Ib(1),h.Dc("ngIf",null==t.userIds?null:t.userIds.length),h.Ib(1),h.Dc("icon","cu2-close")}}const I=function(t){return{"cu-filter-assignees__item_selected":t}};function P(t,e){if(1&t){const t=h.dc();h.ac(0),h.cc(1,"div",10),h.qc("click",function(){return h.Uc(t),h.uc().setEveryoneMode()}),h.vc(2,"async"),h.Xb(3,"div",11),h.bd(4,T,2,1,"div",12),h.bd(5,D,3,2,"ng-container",13),h.vc(6,"async"),h.bc(),h.Zb()}if(2&t){const t=h.uc();let e=null;h.Ib(1),h.Dc("ngClass",h.Hc(8,I,!t.isMeView&&h.wc(2,4,t.isTeamSidebarOpen$))),h.Ib(2),h.Dc("icon","cu2-assignees-everyone"),h.Ib(1),h.Dc("ngIf",(null==t.userIds?null:t.userIds.length)&&!t.isMeView),h.Ib(1),h.Dc("ngIf",(null==(e=h.wc(6,6,t.user$))?null:e.dashboard)===t.LayoutVersion.Six)}}function M(t,e){if(1&t&&(h.cc(0,"div",14),h.dd(1),h.bc()),2&t){const t=h.uc(2);h.Ib(1),h.fd(" ",t.userIds.length," ")}}function O(t,e){if(1&t&&(h.Xb(0,"cu-user-group",16),h.vc(1,"async")),2&t){const t=h.uc(3);h.Dc("users",h.wc(1,7,t.filterAssigneesUsers$))("readOnly",!0)("hideAssignIcon",!0)("disableUserTooltip",!0)("modifier","cu-user-group_sm")("avatarSize",30)("leadCounter",3)}}function $(t,e){if(1&t){const t=h.dc();h.ac(0),h.bd(1,O,2,9,"cu-user-group",15),h.cc(2,"div",18),h.qc("click",function(){return h.Uc(t),h.uc(2).setEveryoneMode()}),h.bc(),h.Zb()}if(2&t){const t=h.uc(2);h.Ib(1),h.Dc("ngIf",(null==t.userIds?null:t.userIds.length)&&!t.isMeView),h.Ib(1),h.Dc("icon","cu2-close")}}function j(t,e){if(1&t){const t=h.dc();h.cc(0,"div",17),h.qc("click",function(){return h.Uc(t),h.uc().openTeamSidebar()}),h.Xb(1,"div",11),h.bd(2,M,2,1,"div",12),h.bd(3,$,3,2,"ng-container",13),h.vc(4,"async"),h.bc()}if(2&t){const t=h.uc();let e=null;h.Dc("ngClass",h.Hc(6,I,!t.isMeView&&(null==t.userIds?null:t.userIds.length))),h.Ib(1),h.Dc("icon","cu3-assignees-everyone"),h.Ib(1),h.Dc("ngIf",(null==t.userIds?null:t.userIds.length)&&!t.isMeView),h.Ib(1),h.Dc("ngIf",(null==(e=h.wc(4,4,t.user$))?null:e.dashboard)===t.LayoutVersion.Six)}}let L=(()=>{class t{constructor(t,e){this.commonStringsService=t,this.store=e,this.modifier="",this.filterAssigneesRealUsers$=this.store.select(u.x),this.filterAssigneesShowUnassigned$=this.store.pipe(Object(o.select)(u.u)),this.filterAssigneesUsers$=Object(s.a)([this.filterAssigneesRealUsers$,this.filterAssigneesShowUnassigned$]).pipe(Object(n.a)(([t,e])=>{const i=[...t||[]];return e&&i.push({id:"unassigned",username:"Unassigned",email:"unassigned"}),i})),this.isTeamSidebarOpen$=this.store.select(a.getTeamSidebarOptionsOpened),this.user$=this.store.select(a.getUser),this.LayoutVersion=l.b,this.destroy$=new c.a}ngOnInit(){this.dropdownListItems=[{id:"filter-assignees-me",title:$localize`:@@cu-filter-assignees__title_me-mode:Me mode`,textTemplate:this.meModeTemplate},{id:"-",title:"",type:r.a.Separator},{id:"filter-assignees-everyone",title:$localize`:@@common_everyone:Everyone`,textTemplate:this.everyoneTemplate},{id:"--",title:"",type:r.a.Separator},{id:"filter-assignees-custom",title:this.commonStringsService.customText,textTemplate:this.customTemplate}]}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setMode(t){"filter-assignees-everyone"===t.id?this.setEveryoneMode():"filter-assignees-me"===t.id?this.toggleMeMode():"filter-assignees-custom"===t.id&&this.openTeamSidebar()}toggleMeMode(){localStorage.removeItem("isMeModeBarHidden"),this.isMeView?this.setEveryoneMode():(this.store.dispatch(new d.Gj(!1)),this.store.dispatch(new d.wj(!0)),this.store.dispatch(new d.Dj([],[])),this.store.dispatch(new d.Hj(!1)),this.store.dispatch(new d.Oj(!0)))}setEveryoneMode(){this.store.dispatch(new d.wj(!1)),this.store.dispatch(new d.Hj(!1)),this.store.dispatch(new d.Gj(!1)),this.store.dispatch(new d.Dj([],[]))}setCustomMode(){this.store.dispatch(new d.wj(!1)),this.dropdownList.dropdown.close()}openTeamSidebar(){this.store.dispatch(new d.Gj(!0)),this.store.dispatch(new d.wj(!1))}}return t.\u0275fac=function(e){return new(e||t)(h.Wb(p.a),h.Wb(o.Store))},t.\u0275cmp=h.Qb({type:t,selectors:[["cu-filter-assignees"]],viewQuery:function(t,e){if(1&t&&(h.jd(_,3),h.jd(w,3),h.jd(y,3),h.jd(k,3)),2&t){let t;h.Qc(t=h.rc())&&(e.meModeTemplate=t.first),h.Qc(t=h.rc())&&(e.everyoneTemplate=t.first),h.Qc(t=h.rc())&&(e.customTemplate=t.first),h.Qc(t=h.rc())&&(e.dropdownList=t.first)}},hostVars:4,hostBindings:function(t,e){2&t&&(h.Lb(e.modifier),h.Ob("cu-filter-assignees",!0))},inputs:{isMeView:"isMeView",modifier:"modifier",userIds:"userIds"},decls:14,vars:18,consts:function(){let t,e,i,n;return t=$localize`:@@common_only-show-tasks-assigned-to-me␟dd702b6834cb8617e10642747aaef93389e410d7␟3770777691272913339:Only show tasks assigned to me`,e=$localize`:@@common_me␟28094f38aac43d3cb6edaf98a281fe443a930b5e␟7156797854368699223:Me`,i=$localize`:@@common_everyone␟2a20abe81aace8689a53df09365c12823ab2643c␟6534056417716630629:Everyone`,n=$localize`:@@common_everyone␟2a20abe81aace8689a53df09365c12823ab2643c␟6534056417716630629:Everyone`,[["class","cu-filter-assignees__fill",4,"ngIf"],["cuTooltip",t,"tooltipModifier","tooltip_left-nowrap",1,"cu-filter-assignees__item","cu-filter-assignees__item_me",3,"ngClass","click"],[1,"cu-filter-assignees__icon","cu-filter-assignees__icon_me",3,"icon"],[1,"cu-filter-assignees__label"],e,["class","cu-filter-assignees__close",3,"icon",4,"ngIf"],[4,"ngIf","ngIfElse"],["isTeamSidebarClosed",""],[1,"cu-filter-assignees__fill"],[1,"cu-filter-assignees__close",3,"icon"],["cuTooltip",i,1,"cu-filter-assignees__item","cu-filter-assignees__item_everyone",3,"ngClass","click"],[1,"cu-filter-assignees__icon","cu-filter-assignees__icon_team",3,"icon"],["class","cu-filter-assignees__count",4,"ngIf"],[4,"ngIf"],[1,"cu-filter-assignees__count"],[3,"users","readOnly","hideAssignIcon","disableUserTooltip","modifier","avatarSize","leadCounter",4,"ngIf"],[3,"users","readOnly","hideAssignIcon","disableUserTooltip","modifier","avatarSize","leadCounter"],["cuTooltip",n,1,"cu-filter-assignees__item","cu-filter-assignees__item_everyone",3,"ngClass","click"],[1,"cu-filter-assignees__close",3,"icon","cuPreventDefault","click"]]},template:function(t,e){if(1&t&&(h.bd(0,x,1,0,"div",0),h.vc(1,"async"),h.vc(2,"async"),h.cc(3,"div",1),h.qc("click",function(){return e.toggleMeMode()}),h.Xb(4,"div",2),h.vc(5,"async"),h.cc(6,"div",3),h.gc(7,4),h.bc(),h.bd(8,S,1,1,"div",5),h.vc(9,"async"),h.bc(),h.bd(10,P,7,10,"ng-container",6),h.vc(11,"async"),h.bd(12,j,5,8,"ng-template",null,7,h.cd)),2&t){const t=h.Rc(13);let i=null,n=null,o=null;h.Dc("ngIf",(null==(i=h.wc(1,6,e.user$))?null:i.dashboard)===e.LayoutVersion.Six&&(e.isMeView||h.wc(2,8,e.isTeamSidebarOpen$))),h.Ib(3),h.Dc("ngClass",h.Hc(16,I,e.isMeView)),h.Ib(1),h.Dc("icon",(null==(n=h.wc(5,10,e.user$))?null:n.dashboard)===e.LayoutVersion.Six?e.isMeView?"cu2-assignees-me":"cu3-assignees-me":"cu2-assignees-me"),h.Ib(4),h.Dc("ngIf",(null==(o=h.wc(9,12,e.user$))?null:o.dashboard)===e.LayoutVersion.Six),h.Ib(2),h.Dc("ngIf",h.wc(11,14,e.isTeamSidebarOpen$))("ngIfElse",t)}},directives:[f.q,g.a,f.o,m.a,v.a,b.a],pipes:[f.b],styles:['.cu-filter-assignees{display:flex;align-items:stretch;height:24px;position:relative}.cu2-views-bar_v6 .cu-filter-assignees{margin-right:4px}.cu-filter-assignees__item{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;position:relative;padding:5px 7px;cursor:pointer;border:1px solid #d8dce2}.contrast_high .cu-filter-assignees__item{border-color:#b9bec7}.cu2-views-bar__options_activity .cu-filter-assignees__item{border-color:rgba(185,190,199,.5)}.dark-theme .cu-filter-assignees__item{border-color:#384047}.cu2-views-bar_v6 .cu-filter-assignees__item{transition:background-color .1s cubic-bezier(.785,.135,.15,.86) 0s;border:0;border-radius:12px;padding:0 9px}.cu-filter-assignees__item_me{border-radius:3px 0 0 3px}.cu2-views-bar_v6 .cu-filter-assignees__item_me{padding-right:8px}.cu-filter-assignees__item_everyone{border-radius:0 3px 3px 0}.cu-filter-assignees__item+.cu-filter-assignees__item{border-left-width:0}.cu2-views-bar_v6 .cu-filter-assignees__item+.cu-filter-assignees__item:before{content:"";display:block;position:absolute;width:3px;height:3px;left:-1px;border-radius:50%;background:#cdd2d9}.dark-theme .cu2-views-bar_v6 .cu-filter-assignees__item+.cu-filter-assignees__item:before{background:#384047}.cu-filter-assignees__item:hover{background-color:#f2f2f2}.dark-theme .cu-filter-assignees__item:hover{background-color:#1e272e}.cu-filter-assignees__item:hover .cu-filter-assignees__close{opacity:1}.cu2-views-bar_v6 .cu-filter-assignees__item_selected{background:#7b68ee;z-index:1}@supports (--theme-main-color:#7b68ee){.cu2-views-bar_v6 .cu-filter-assignees__item_selected{background:var(--theme-main-color)}}.dark-theme .cu2-views-bar_v6 .cu-filter-assignees__item_selected{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu2-views-bar_v6 .cu-filter-assignees__item_selected{background:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-filter-assignees__item_selected+.cu-filter-assignees__item:before,.cu2-views-bar_v6 .cu-filter-assignees__item_selected:before{display:none!important}.cu2-views-bar_v6 .cu-filter-assignees__item_selected:nth-child(2){margin-right:-3px}.cu2-views-bar_v6 .cu-filter-assignees__item_selected:last-child{margin-left:-3px}.cu-filter-assignees__item_selected .cu-filter-assignees__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-assignees__item_selected .cu-filter-assignees__icon{fill:var(--theme-main-color)}}.dark-theme .cu-filter-assignees__item_selected .cu-filter-assignees__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-filter-assignees__item_selected .cu-filter-assignees__icon{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-filter-assignees__item_selected .cu-filter-assignees__icon,.dark-theme .cu2-views-bar_v6 .cu-filter-assignees__item_selected .cu-filter-assignees__icon{fill:#fff}.cu-filter-assignees__item_selected .cu-filter-assignees__label{color:#292d34}.dark-theme .cu-filter-assignees__item_selected .cu-filter-assignees__label{color:#d5d6d7}.cu2-views-bar_v6 .cu-filter-assignees__item_selected .cu-filter-assignees__label{color:#fff}.cu2-views-bar_v6 .cu-filter-assignees__item_selected .cu-filter-assignees__close{display:block}.cu-filter-assignees__item .cu-user-group{margin-right:-8px}.cu-filter-assignees__item .cu-avatar_online:before,.cu-filter-assignees__item .cu-user-group .cu-user-group__more,.cu-filter-assignees__item .cu-user-group.cu-user-group_sm .cu-avatar.cu-avatar_bordered{border-color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-assignees__item .cu-avatar_online:before,.cu-filter-assignees__item .cu-user-group .cu-user-group__more,.cu-filter-assignees__item .cu-user-group.cu-user-group_sm .cu-avatar.cu-avatar_bordered{border-color:var(--theme-main-color)}}.cu-filter-assignees__icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-top:-1px;fill:#7c828d}.dark-theme .cu-filter-assignees__icon{fill:#b9bec7}.cu2-views-bar_v6 .cu-filter-assignees__icon{transition:none;fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-filter-assignees__icon{fill:#abaeb0}.cu-filter-assignees__icon_me{width:8px;height:10px}.cu-filter-assignees__icon_team{width:12px;height:10px}.cu-filter-assignees__label{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;margin-left:5px;margin-bottom:-1px;color:#7c828d}.cu-dashboard__body_v4 .cu-filter-assignees__label,.cu-dashboard__body_v5 .cu-filter-assignees__label{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif}.cu2-views-bar_v6 .cu-filter-assignees__label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:0}.cu-filter-assignees__count{background:#7b68ee;padding:2px 4px;color:#fff;font-size:10px;border-radius:9px;position:absolute;top:-7px;right:-8px;min-width:18px;height:13px;text-align:center}@supports (--theme-main-color:#7b68ee){.cu-filter-assignees__count{background:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-filter-assignees__count{padding:0;margin-left:3px;position:relative;top:auto;right:auto;min-width:0;height:auto;background:transparent;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif}.cu-filter-assignees__fill{content:"";display:block;position:absolute;width:100%;height:100%;top:0;left:0;border-radius:12px;background-color:#f2f2f2}.dark-theme .cu-filter-assignees__fill{background-color:#1e272e}.cu-filter-assignees__close{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#7b68ee;color:#7b68ee;display:none;opacity:0;position:absolute;right:4px;width:16px;height:16px;padding:4px;border-radius:50%;box-shadow:0 0 2px 3px currentColor;background:#f0f1f5}@supports (--theme-main-color:#7b68ee){.cu-filter-assignees__close{fill:var(--theme-main-color);color:var(--theme-main-color)}}.cu-filter-assignees__close:hover{background:#fff}'],encapsulation:2,changeDetection:0}),t})()},oPGG:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var n=i("z6cu"),o=i("JIr8"),a=i("2p4s"),r=i("v7a3"),s=i("fXoL"),c=i("tk/3"),l=i("irDL"),u=i("PSyB");let d=(()=>{class t{constructor(t,e,i){this.http=t,this.errorHandler=e,this.publicViewHelperService=i,this.apiUrl=a.a.apiUrl,this.apiUrlV2=a.a.apiUrlV2}getHierarchy(t){return this.http.get(`${this.apiUrl}/team/${t}/hierarchy`,{params:{include_statuses:"true",gantt:"true",include_permissions:"true",simple_permissions:"true"}}).pipe(this.errorHandler.http())}getSpace(t){return this.http.get(`${this.apiUrl}/project/${t}?gantt=true`).pipe(this.errorHandler.http())}getFolder(t){return this.http.get(`${this.apiUrl}/category/${t}?gantt=true`).pipe(this.errorHandler.http())}getList(t){return this.http.get(`${this.apiUrl}/subcategory/${t}?gantt=true`).pipe(this.errorHandler.http())}getTask(t){return this.http.get(`${this.apiUrl}/task/${t}`,{params:{"fields[]":["assignees","totalTimeSpent","dependencies","tags","assigned_comments_count","permissions","simple_statuses","subtasks_by_status","rolledUpTimeSpent","rolledUpTimeEstimate","rolledUpPointsEstimate","parent_task"]}}).pipe(this.errorHandler.http())}getTaskPoints(t){return this.http.get(`${this.apiUrl}/task/${t}/pointsEstimate`).pipe(this.errorHandler.http())}editTask(t,e){return t.includes("_")&&(t=Object(r.p)(t)),this.http.put(`${this.apiUrl}/task/${t}`,e,{params:{check_dependencies:!1,skip_remap_dependencies:!0}}).pipe(this.errorHandler.http())}editPosition(t){return this.http.put(this.apiUrl+"/position",t).pipe(this.errorHandler.http())}addLink(t){return this.http.post(this.apiUrl+"/dependency",t).pipe(this.errorHandler.http())}deleteLink(t,e){return this.http.delete(`${this.apiUrl}/dependency?task_id=${t}&depends_on=${e}`).pipe(this.errorHandler.http())}createTask(t,e){return e.v2=!0,this.http.post(`${this.apiUrl}/subcategory/${t}/task`,e).pipe(this.errorHandler.http())}createList(t,e){return this.http.post(`${this.apiUrl}/category/${t}/subcategory`,e).pipe(this.errorHandler.http())}copyTask(t,e){return e.v2=!0,this.http.post(`${this.apiUrl}/task/${t}/copy`,e).pipe(this.errorHandler.http())}archiveTask(t){return this.http.put(this.apiUrl+"/archiveTasks",t).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}moveTask(t,e){return this.http.put(this.apiUrlV2+"/taskPosition",{tasks:[{id:t,new_subcategory:e}]},{params:{v2:"true"}}).pipe(this.errorHandler.http())}convertToSubtask(t,e){return this.http.put(this.apiUrl+"/position",{tasks:[{id:t,new_parent:e}]},{params:{v2:"true"}}).pipe(this.errorHandler.http())}mergeTask(t,e){return this.http.put(this.apiUrl+"/mergeTasks",{task1:t,task2:e},{params:{v2:"true",merge_subtasks:"true"}}).pipe(this.errorHandler.http())}getTaskIDs(t,e,i,n){const o={include_closed:"false",subtasks:"true",archived:"false"};return t&&(o.team_id=t),e&&(o["project_ids[]"]=e),i&&(o["category_ids[]"]=i),n&&(o["subcategory_ids[]"]=n),this.publicViewHelperService.getSubtaskIds(o)}bulkEditDates(t){return this.http.put(this.apiUrl+"/dueDates",t).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}getGanttViewData(t){return this.http.get(`${this.apiUrl}/view/${t}`).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}saveGanttView(t,e){return this.http.put(`${this.apiUrl}/view/${t}`,e).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}moveTaskToNewList(t,e,i){const a={tasks:[{id:t,new_subcategory:e}]};return i&&(a.tasks[0].new_status=i),this.http.put(this.apiUrlV2+"/taskPosition?v2=true",a).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}editListPosition(t,e){return this.http.put(`${this.apiUrlV2}/subcategory/${t}/position?v2=true`,e).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}editFolderPosition(t,e){return this.http.put(`${this.apiUrlV2}/category/${t}/position?v2=true`,e).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}editSpacePosition(t,e){return this.http.put(`${this.apiUrlV2}/project/${t}/position`,e).pipe(Object(o.a)(({error:t})=>Object(n.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(s.nc(c.b),s.nc(l.a),s.nc(u.a))},t.\u0275prov=s.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},pugF:function(t,e,i){"use strict";i.d(e,"s",function(){return o}),i.d(e,"t",function(){return a}),i.d(e,"n",function(){return r}),i.d(e,"m",function(){return s}),i.d(e,"a",function(){return c}),i.d(e,"d",function(){return l}),i.d(e,"l",function(){return u}),i.d(e,"b",function(){return d}),i.d(e,"c",function(){return h}),i.d(e,"i",function(){return p}),i.d(e,"o",function(){return f}),i.d(e,"k",function(){return g}),i.d(e,"e",function(){return m}),i.d(e,"h",function(){return v}),i.d(e,"f",function(){return b}),i.d(e,"g",function(){return _}),i.d(e,"p",function(){return w}),i.d(e,"r",function(){return y}),i.d(e,"q",function(){return k}),i.d(e,"j",function(){return x});var n=i("l7P3");const o=Object(n.createAction)("[DashboardMapView] update DashboardMapView",Object(n.props)()),a=Object(n.createAction)("[DashboardMapView] update sidebar Size DashboardMapView",Object(n.props)()),r=Object(n.createAction)("[DashboardMapView] set sidebar Size DashboardMapView",Object(n.props)()),s=Object(n.createAction)("[DashboardMapView] set map task DashboardMapView",Object(n.props)()),c=Object(n.createAction)("[DashboardMapView] update map task DashboardMapView",Object(n.props)()),l=Object(n.createAction)("[DashboardMapView] Delete task",Object(n.props)()),u=Object(n.createAction)("[DashboardMapView] set map group DashboardMapView",Object(n.props)()),d=Object(n.createAction)("[DashboardMapView] add tasks DashboardMapView",Object(n.props)()),h=Object(n.createAction)("[DashboardMapView] api failed"),p=Object(n.createAction)("[DashboardMapView] api load More Tasks"),f=Object(n.createAction)("[DashboardMapView] set tasks DashboardMapView",Object(n.props)()),g=Object(n.createAction)("[DashboardMapView] rest DashboardMapView",Object(n.props)()),m=Object(n.createAction)("[DashboardMapView] page load",Object(n.props)()),v=Object(n.createAction)("[DashboardMapView] load data",Object(n.props)()),b=Object(n.createAction)("[DashboardMapView] initialSidebarLoad"),_=Object(n.createAction)("[DashboardMapView] initialSidebarLoaded"),w=Object(n.createAction)("[DashboardMapView] sidebar search filter",Object(n.props)()),y=Object(n.createAction)("[DashboardMapView] sidebar sort by field",Object(n.props)()),k=Object(n.createAction)("[DashboardMapView] sidebar sort by direction"),x=Object(n.createAction)("[DashboardMapView] get current location and zoom")},rsiN:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var n=i("9jGm"),o=i("o7Ov"),a=i("lJxs"),r=i("CqXF"),s=i("2eDp"),c=i("YwDF"),l=i("pugF"),u=i("Ev0y"),d=i("fXoL"),h=i("l7P3");let p=(()=>{class t{constructor(t,e){this.store=t,this.actions$=e,this.requestMapSnapShot$=this.actions$.pipe(Object(n.d)(l.j)),this.dateViewSave$=this.actions$.pipe(Object(n.d)(o.zg)),this.settings$=this.store.select(u.j),this.googleMapSettings$=this.store.select(u.g),this.googleMapSettingsMapType$=this.store.select(u.h),this.allMapTasks$=this.store.select(u.c),this.allMapTasksIds$=this.store.select(u.d),this.sidebarGroupTasks$=this.store.select(u.k),this.sidebarTasks$=this.store.select(u.l),this.canLoadMoreTasks$=this.store.select(u.b),this.sidebarLoading$=this.store.select(u.q),this.loading$=this.store.select(u.p),this.sidebarSortBy$=this.store.select(u.s),this.sidebarSearch$=this.store.select(u.r),this.allowStatuses$=this.store.select(u.a),this.locationCustomFields$=this.store.select(s.j).pipe(Object(a.a)(t=>t.filter(t=>t.type===c.a.Location))),this.colorSetting$=this.store.select(u.i),this.showPayWall$=this.actions$.pipe(Object(n.d)(o.Bi),Object(r.a)(!0))}update(t,e,i){this.dispatch(Object(l.s)({updates:t,reloadSidebarTasks:e,refresh:i}))}updateFieldIds(t,e,i){this.dispatch(Object(l.s)({updates:t,reloadSidebarTasks:e,refresh:i,instantSave:!0}))}deleteTask(t){this.dispatch(Object(l.d)({taskId:t}))}lazyLoadTasks(){this.dispatch(Object(l.i)())}pageLoad(t){this.dispatch(Object(l.e)(t))}fullLoad(){this.dispatch(Object(l.h)({fetchTasks:!0,fullReload:!0,freshReq:!1}))}refresh(){this.dispatch(Object(l.h)({fetchTasks:!0,fullReload:!1,freshReq:!1}))}initialSidebarLoad(){this.dispatch(Object(l.f)())}updateSidebarSize(t,e=!1){this.store.dispatch(Object(l.t)({width:t,save:e}))}updateSidebarSortByField(t){this.store.dispatch(Object(l.r)({field:t}))}updateSidebarSortByDirection(){this.store.dispatch(Object(l.q)())}sidebarSearch(t){this.dispatch(Object(l.p)({searchText:t}))}addMapTasks(t){this.dispatch(Object(l.a)({update:t}))}triggerSaveDefaultView(){this.dispatch(Object(l.j)())}dispatch(t){this.store.dispatch(t)}}return t.\u0275fac=function(e){return new(e||t)(d.nc(h.Store),d.nc(n.a))},t.\u0275prov=d.Sb({token:t,factory:t.\u0275fac}),t})()},sWMA:function(t,e,i){"use strict";i.d(e,"a",function(){return f});var n=i("LEq2"),o=i("A/Rp"),a=i("uFGp"),r=i("dTHz"),s=i("fXoL"),c=i("l7P3"),l=i("kRoH"),u=i("NsZK"),d=i("UdVN"),h=i("ofXK");const p=["nextView"];let f=(()=>{class t{constructor(t){this.store=t,this.isOriginalLayout=!1,this.excludeDays$=this.store.select(n.m),this.viewDate$=this.store.select(n.Z),this.view$=this.store.select(n.Y),this.viewPreferences$=this.store.select(n.bb),this.LayoutVersion=r.b}ngOnInit(){}setViewDate(t){this.store.dispatch(new o.ub({viewDate:t}))}onArrowLeft(t){Object(a.b)(t)&&this.nextView.nativeElement.click()}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(c.Store))},t.\u0275cmp=s.Qb({type:t,selectors:[["cu-calendar-view-next"]],viewQuery:function(t,e){if(1&t&&s.jd(p,1),2&t){let t;s.Qc(t=s.rc())&&(e.nextView=t.first)}},hostAttrs:[1,"cu-calendar-view-next"],hostVars:2,hostBindings:function(t,e){1&t&&s.qc("keyup.ArrowRight",function(t){return e.onArrowLeft(t)},!1,s.Sc),2&t&&s.Ob("cu-calendar-view-next_v2",e.isOriginalLayout)},inputs:{isOriginalLayout:"isOriginalLayout",layoutVersion:"layoutVersion"},decls:7,vars:13,consts:function(){let t;return t=$localize`:@@cu-calendar-view-next__toolip-msg_next-shortcut-key␟c4a69fc6f4dbfcd245fd40bbd2b44a928b310621␟4882261589408007747:Next (right arrow key)`,[["mwlCalendarNextView","","cuTooltip",t,1,"cu-calendar-view-next__button",3,"view","viewDate","excludeDays","daysInWeek","viewDateChange"],["nextView",""],[3,"icon"]]},template:function(t,e){1&t&&(s.cc(0,"div",0,1),s.qc("viewDateChange",function(t){return e.setViewDate(t)}),s.vc(2,"async"),s.vc(3,"async"),s.vc(4,"async"),s.vc(5,"async"),s.Xb(6,"div",2),s.bc()),2&t&&(s.Dc("view",s.wc(2,5,e.view$))("viewDate",s.wc(3,7,e.viewDate$))("excludeDays",s.wc(4,9,e.excludeDays$))("daysInWeek",s.wc(5,11,e.viewPreferences$).fourDayWeekView?4:null),s.Ib(6),s.Dc("icon",e.layoutVersion===e.LayoutVersion.Six?"angle-right-no-padding":"arrow-left-bold"))},directives:[l.o,u.a,d.a],pipes:[h.b],styles:[".cu-calendar-view-next{height:24px;border-radius:12px;display:inline-flex;align-items:center;margin-right:10px;background:#fff;border:1px solid #e9ebf0}.dark-theme .cu-calendar-view-next{background:#2b343b;border-color:#2b343b}.cu-calendar-view-next_v2{height:30px;border-radius:15px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);margin-right:20px;border:0}.cu2-views-bar__options_v6 .cu-calendar-view-next{width:24px;height:24px;margin-right:0;border:0;border-radius:6px;overflow:hidden;display:inline-flex;align-items:center;background:transparent}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-next{background:transparent}.cu-calendar-view-next__button{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#bcc0c7;width:24px;height:24px;cursor:pointer;padding:7px 8px 7px 6px;transform:rotate(180deg)}.cu-calendar-view-next__button:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-calendar-view-next__button:hover{fill:var(--theme-main-color)}}.cu2-views-bar__options_v6 .cu-calendar-view-next__button:hover{background-color:#f2f2f2;fill:#53575e}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-next__button:hover{background-color:#1e272e;fill:#abaeb0}.cu-calendar-view-next_v2 .cu-calendar-view-next__button{width:30px;height:30px;padding:10px 11px 10px 9px}.cu2-views-bar__options_v6 .cu-calendar-view-next__button{padding:7px 6px 7px 8px;transform:rotate(0deg);fill:#7c828d}.dark-theme .cu2-views-bar__options_v6 .cu-calendar-view-next__button{fill:#abaeb0}"],encapsulation:2,changeDetection:0}),t})()},t3a8:function(t,e,i){"use strict";i.d(e,"a",function(){return m});var n=i("ofXK"),o=i("3Pt+"),a=i("tyNb"),r=i("C8uC"),s=i("fXoL");let c=(()=>{class t{}return t.\u0275mod=s.Ub({type:t}),t.\u0275inj=s.Tb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,o.l,r.LoaderModule,a.l]]}),t})();var l=i("IKGe"),u=i("mcWp"),d=i("1M0N"),h=i("gb9A"),p=i("K0KF"),f=i("Pbuh"),g=i("tGh3");let m=(()=>{class t{}return t.\u0275mod=s.Ub({type:t}),t.\u0275inj=s.Tb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,u.a,d.a,h.a,p.a,l.a,c,f.a,g.a]]}),t})()},"u+AO":function(t,e,i){"use strict";i.d(e,"b",function(){return Ce}),i.d(e,"a",function(){return De});var n=i("odWm"),o=i("dTHz"),a=i("Gj5t"),r=i("l7P3"),s=i("XNiG"),c=i("itXk"),l=i("PqYM"),u=i("pLZG"),d=i("wO+i"),h=i("lJxs"),p=i("/uUt"),f=i("vkgz"),g=i("JX91"),m=i("Zy1z"),v=i("1G5W"),b=i("eIep"),_=i("6eBy"),w=i("SxV6"),y=i("zp1y"),k=i("IzEk"),x=i("zP0r"),S=i("GkwO"),T=i("XeJJ"),C=i("Muja"),D=i("BeL+"),I=i("MguC"),P=i("X4Xz"),M=i("jJQC"),O=i("c3rA"),$=i("CgHv"),j=i("m2rH"),L=i("4F4K"),E=i("uslN"),N=i("xJzU"),A=i("2eDp"),V=i("hr9B"),z=i("EIuK"),F=i("IX71"),B=i("LKfL"),R=i("o7Ov"),U=i("fXoL"),G=i("G2WA"),H=i("cCXi"),W=i("ILsm"),q=i("76Cs"),X=i("HsHS"),Y=i("rLOZ"),K=i("6wVO"),Z=i("ofXK"),J=i("xDGP"),Q=i("BTFG"),tt=i("uK3R"),et=i("UdVN"),it=i("NsZK"),nt=i("HPyy"),ot=i("FRLQ"),at=i("tyNb"),rt=i("18+P");let st=(()=>{class t{constructor(){this.timeCounterPipeInstance=new rt.a}transform(t,e){if(e===B.a.timeEstimate){const e=this.timeCounterPipeInstance.transform(t.doneCount),i=this.timeCounterPipeInstance.transform(t.totalCount);return $localize`:@@workload-progress-text_time-estimate:${e}:doneCount: done out of ${i}:totalCount:`}return e===B.a.pointsEstimates?$localize`:@@workload-progress-text_points-estimate:${t.doneCount}:doneCount: done out of ${t.totalCount}:totalCount: points`:$localize`:@@workload-progress-text_task-count-estimate:${t.doneCount}:doneCount: done out of ${t.totalCount}:totalCount: tasks`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=U.Vb({name:"workloadBoxProgressText",type:t,pure:!0}),t})();var ct=i("EP2k"),lt=i("jJW4");let ut=(()=>{class t{constructor(t){this.sharedData=t,this.timeCounterPipeInstance=new rt.a,this.usernamePipeInstance=new ct.a(this.sharedData)}transform(t,e){let i=t.doneCount,n=t.totalCount;if(e===B.a.timeEstimate&&(i=this.timeCounterPipeInstance.transform(t.doneCount),n=this.timeCounterPipeInstance.transform(t.totalCount)),t.user&&t.user.id){const e=this.usernamePipeInstance.transform(t.user);return $localize`:@@workload-user-progress-text_specific-user:${e}:resolvedUserString: (${i}:doneCount: out of ${n}:totalCount:)`}return $localize`:@@workload-user-progress-text_unassigned:Unassigned (${i}:doneCount: out of ${n}:totalCount:)`}}return t.\u0275fac=function(e){return new(e||t)(U.Wb(lt.a))},t.\u0275pipe=U.Vb({name:"workloadBoxUserProgressText",type:t,pure:!0}),t})();function dt(t,e){if(1&t&&(U.cc(0,"div",7),U.cc(1,"div",8),U.cc(2,"div",9),U.Xb(3,"div",10),U.vc(4,"workloadBoxProgressText"),U.bc(),U.bc(),U.Xb(5,"cu-avatar",11),U.vc(6,"workloadBoxUserProgressText"),U.bc()),2&t){const t=e.$implicit,i=U.uc(2);U.Dc("@loading",void 0),U.Ib(2),U.ad("height",null==t?null:t.overallCompleted,"%"),U.Ib(1),U.ad("height",null==t?null:t.completed,"%"),U.Dc("cuTooltip",U.xc(4,12,t,i.field))("tooltipMargin",1),U.Ib(2),U.Dc("user",null==t?null:t.user)("unassigned",!(null!=t&&null!=t.user&&t.user.id))("cuUserProfileLink",null!=t&&null!=t.user&&t.user.id?null==t?null:t.user:null)("showGuestTooltip",!1)("cuTooltip",U.xc(6,15,t,i.field))}}function ht(t,e){if(1&t){const t=U.dc();U.ac(0),U.cc(1,"div",1),U.qc("click",function(){return U.Uc(t),U.uc().toggleWorkload(!0)}),U.bc(),U.cc(2,"div",2),U.cc(3,"div",3),U.gc(4,4),U.bc(),U.bc(),U.cc(5,"div",5),U.bd(6,dt,7,18,"div",6),U.bc(),U.Zb()}if(2&t){const t=U.uc();U.Ib(6),U.Dc("ngForOf",t.items)("ngForTrackBy",t.trackById)}}function pt(t,e){if(1&t&&(U.cc(0,"a",24),U.gc(1,25),U.bc()),2&t){const t=U.uc(2);U.Dc("href","mailto:?subject="+t.emailSubject,U.Xc)}}const ft=function(t){return["/",t,"settings","billing"]};function gt(t,e){if(1&t&&(U.cc(0,"a",26),U.gc(1,27),U.bc()),2&t){const t=U.uc(2);U.Dc("routerLink",U.Hc(1,ft,null==t.team?null:t.team.id))}}const mt=function(t){return{background:t}};function vt(t,e){if(1&t){const t=U.dc();U.ac(0),U.cc(1,"div",12),U.cc(2,"div",3),U.gc(3,13),U.bc(),U.cc(4,"div",14),U.gc(5,15),U.bc(),U.bc(),U.cc(6,"div",16),U.cc(7,"div",17),U.cc(8,"span"),U.dd(9,"Business"),U.bc(),U.dd(10," Feature "),U.bc(),U.cc(11,"div",18),U.mc(12,19),U.Xb(13,"br"),U.jc(),U.bc(),U.bd(14,pt,2,1,"a",20),U.bd(15,gt,2,3,"a",21),U.cc(16,"div",22),U.qc("click",function(){return U.Uc(t),U.uc().toggleWorkload(!0)}),U.gc(17,23),U.bc(),U.bc(),U.Zb()}if(2&t){const t=U.uc();U.Ib(6),U.Dc("ngStyle",U.Hc(3,mt,"url(./assets/images/components/workload-box/"+(null!=t.user&&t.user.dark_theme?"paywall_dark.png":"paywall.png")+") no-repeat bottom/contain")),U.Ib(8),U.Dc("ngIf",!((null==t.team?null:t.team.role)<t.UserRole.USER)),U.Ib(1),U.Dc("ngIf",(null==t.team?null:t.team.role)<t.UserRole.USER)}}let bt=(()=>{class t{constructor(t){this.store=t,this.showPaywall=!1,this.WorkloadType=B.a,this.UserRole=o.f,this.componentWidth=250,this.trackById=Object(M.d)("id"),this.emailSubject=$localize`:@@cu-workload-box__upgrade-subject_box-view-workload-chart:Please upgrade ClickUp so we can use Box view's Workload chart`}ngOnInit(){this.updateComponentWidth()}ngOnChanges(t){if(t.divisions||t.field){if(this.items=this.divisions&&this.divisions.map(t=>{const e=t.data&&t.data.length&&t.data[0];let i=0,n=0,o=0;return e&&(this.field===B.a.completed&&e.done_counts?(o=e.done_counts.complete_tasks||0,n=e.done_counts.total||0):this.field===B.a.timeEstimate&&e.time_estimate_counts?(o=e.time_estimate_counts.complete_time||0,n=e.time_estimate_counts.total||0):this.field===B.a.pointsEstimates&&e.points_estimate_counts?(o=e.points_estimate_counts.complete_points||0,n=e.points_estimate_counts.total||0):this.field===B.a.scrum&&e.scrum_counts&&(o=e.scrum_counts.complete_scrum||0,n=e.scrum_counts.total||0),i=n&&Math.round(100*o/n)||0),{user:e,totalCount:n,doneCount:o,completed:i,overallCompleted:0}}),this.items){const t=Math.max(...this.items.map(t=>t.totalCount),0);t&&this.items.forEach(e=>{e.overallCompleted=Math.round(100*e.totalCount/t)})}this.updateComponentWidth()}}updateComponentWidth(){if(this.showPaywall)this.componentWidth=250;else{let t;t=Math.ceil((34*this.items.length+20)/250),this.componentWidth=250*t+15*(t-1)}}toggleWorkload(t){this.store.dispatch(new P.H({active:t}))}}return t.\u0275fac=function(e){return new(e||t)(U.Wb(r.Store))},t.\u0275cmp=U.Qb({type:t,selectors:[["cu-workload-box"]],hostAttrs:[1,"cu-workload-box"],hostVars:2,hostBindings:function(t,e){2&t&&U.ad("width",e.componentWidth,"px")},inputs:{divisions:"divisions",field:"field",showPaywall:"showPaywall",user:"user",team:"team"},features:[U.Gb],decls:2,vars:2,consts:function(){let t,e,i,n,o,a,r;return t=$localize`:@@common_workload␟312ffbe9f1895796b0a0548e983f9eb8d66a8307␟8086999918314783410: Workload `,e=$localize`:@@common_workload␟312ffbe9f1895796b0a0548e983f9eb8d66a8307␟8086999918314783410: Workload `,i=$localize`:@@cu-workload-box__header-description_see-member-workload␟70901dfd01c30f6038d4b67d8916dfd50c4a54a1␟4223619542648937221: See who's overloaded & who needs more work. `,n=$localize`:@@cu-workload-box__paywall-description_upgrade␟59e7d93ff7c516378766ea07151366d9a067f952␟1184830412625590135: Upgrade for just $9 per user${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:LINE_BREAK:to get this feature. `,o=$localize`:@@common_hide␟669739a56ab5efac57bfbd7166d9675c8e0f5276␟6210143939592559490: Hide `,a=$localize`:@@common_upgrade␟0844a8a98216beedcbaad4e742b0a7e7a4ca0b8b␟2521713543294974019: Upgrade `,r=$localize`:@@common_upgrade␟0844a8a98216beedcbaad4e742b0a7e7a4ca0b8b␟2521713543294974019: Upgrade `,[[4,"ngIf"],["icon","close",1,"cu-workload-box__hide",3,"click"],[1,"cu-workload-box__header"],[1,"cu-workload-box__header-title"],t,[1,"cu-workload-box__scroll","cu-workload-box__body"],["class","cu-workload-box__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-workload-box__item"],[1,"cu-workload-box__progress"],[1,"cu-workload-box__progress-inner"],[1,"cu-workload-box__progress-bar",3,"cuTooltip","tooltipMargin"],["modifier","cu-avatar_24",3,"user","unassigned","cuUserProfileLink","showGuestTooltip","cuTooltip"],[1,"cu-workload-box__header","cu-workload-box__header_column"],e,[1,"cu-workload-box__header-description"],i,[1,"cu-workload-box__paywall",3,"ngStyle"],[1,"cu-workload-box__paywall-title"],[1,"cu-workload-box__paywall-description"],n,["class","cu-btn cu-btn_sm cu-btn_font-size-14 cu-workload-box__paywall-btn",3,"href",4,"ngIf"],["class","cu-btn cu-btn_sm cu-btn_font-size-14 cu-workload-box__paywall-btn",3,"routerLink",4,"ngIf"],[1,"cu-workload-box__paywall-hide",3,"click"],o,[1,"cu-btn","cu-btn_sm","cu-btn_font-size-14","cu-workload-box__paywall-btn",3,"href"],a,[1,"cu-btn","cu-btn_sm","cu-btn_font-size-14","cu-workload-box__paywall-btn",3,"routerLink"],r]},template:function(t,e){1&t&&(U.bd(0,ht,7,2,"ng-container",0),U.bd(1,vt,18,5,"ng-container",0)),2&t&&(U.Dc("ngIf",!e.showPaywall),U.Ib(1),U.Dc("ngIf",e.showPaywall))},directives:[Z.q,et.a,Z.p,it.a,nt.a,ot.a,Z.t,at.k],pipes:[st,ut],styles:['.cu-workload-box{display:flex;flex-direction:column;background-color:#fff;border-radius:4px;min-height:250px;box-shadow:0 2px 5px rgba(0,0,0,.1);margin:0 15px 15px 0;max-width:calc(100% - 15px);min-width:250px;position:relative}.dark-theme .cu-workload-box{background:#2b343b}.cu-workload-box__hide{position:absolute;width:20px;height:20px;padding:4px;stroke:#b9bec7;right:6px;top:6px;cursor:pointer;z-index:10}.cu-workload-box__scroll{flex-grow:1;overflow:auto}.cu-os-win .cu-workload-box__scroll{scrollbar-width:thin}.cu-os-win .cu-workload-box__scroll::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-workload-box__scroll::-webkit-scrollbar-track,.cu-os-win .cu-workload-box__scroll::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-workload-box__scroll::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-workload-box__scroll::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-workload-box__scroll::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-workload-box__scroll::-webkit-scrollbar,.cu-os-win .dark-theme .cu-workload-box__scroll::-webkit-scrollbar,.cu-os-win.dark-theme .cu-workload-box__scroll::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-workload-box__scroll::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-workload-box__scroll::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-workload-box__scroll::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-workload-box__scroll::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-workload-box__scroll::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-workload-box__scroll::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-workload-box__scroll::-webkit-scrollbar-thumb:hover{border-color:#384047}@-moz-document url-prefix(){.cu-os-win .cu-workload-box__scroll{scrollbar-color:#fff #fff}.cu-os-win.dark-theme .cu-workload-box__scroll{scrollbar-color:#384047 #384047}.cu-os-win .cu-workload-box__scroll:hover{scrollbar-color:#a0a0a5 #fff}.cu-os-win.dark-theme .cu-workload-box__scroll:hover{scrollbar-color:#828588 #384047}}.cu-workload-box__body{display:flex;padding-bottom:15px;box-sizing:border-box!important;justify-content:space-between;width:calc(100% - 20px);min-width:0}.cu-workload-box__body:before{content:"";display:block;position:sticky;width:10px;height:100%;left:0;flex-shrink:0;z-index:10;background:linear-gradient(90deg,#fff 0,#fff 30%,hsla(0,0%,100%,0))}.dark-theme .cu-workload-box__body:before{background:linear-gradient(90deg,#2b343b 0,#2b343b 30%,rgba(43,52,59,0))}.cu-workload-box__body:after{content:"";display:block;position:sticky;width:10px;height:100%;right:-1px;flex-shrink:0;z-index:10;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu-workload-box__body:after{background:linear-gradient(90deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu-workload-box__item{margin:0 5px;display:grid;grid:1fr auto/1fr}.cu-workload-box__item .cu-avatar.cu-avatar_empty{padding:0;width:24px;height:24px;border:0;margin:0}.cu-workload-box__item .cu-avatar.cu-avatar_empty .icon{width:100%;height:100%}.cu-workload-box__progress{display:flex;justify-content:space-around;align-items:flex-end;margin-bottom:8px}.cu-workload-box__progress-inner{width:6px;height:100%;display:flex;background-color:#e9ebf0;border-radius:3px;overflow:hidden;align-items:flex-end}.dark-theme .cu-workload-box__progress-inner{background:rgba(124,130,141,.5)}.cu-workload-box__progress-bar{background-color:#63d54d;width:100%;border-radius:3px}.cu-workload-box__header{display:flex;align-items:center;justify-content:space-between;padding:14px 15px 15px}.cu-workload-box__header_column{flex-direction:column;align-items:flex-start}.cu-workload-box__header-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-workload-box__header-title{font-family:var(--global-font-support)}}.cu-workload-box__header-description{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d;margin-top:5px}.cu-workload-box__paywall{display:flex;align-items:center;justify-content:center;flex-grow:1;flex-direction:column;position:relative;padding-bottom:30px}.cu-workload-box__paywall:before{content:"";display:block;position:absolute;width:100%;height:100%;bottom:0;z-index:0;background:hsla(0,0%,100%,.8)}.dark-theme .cu-workload-box__paywall:before{background:rgba(43,52,59,.8)}.cu-workload-box__paywall-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 18px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:10px;z-index:10}.cu-workload-box__paywall-title span{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-workload-box__paywall-title span{color:var(--theme-main-color)}}.cu-workload-box__paywall-description{color:#292d34;font:400 14px/20px Gotham Pro,Proxima Nova,arial,serif;z-index:10;text-align:center;margin-bottom:15px}.dark-theme .cu-workload-box__paywall-description{color:#d5d6d7}.cu-workload-box__paywall-btn{z-index:10;font-size:14px}.cu-workload-box__paywall-hide{font:400 14px/20px Gotham Pro,Proxima Nova,arial,serif;z-index:10;margin-top:10px;cursor:pointer}.cu-workload-box__scrum-points-subtitle{margin:0 0 30px;font:400 13px/1.4 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-workload-box__scrum-points-subtitle{color:#d5d6d7}.cu-workload-box__scrum-points-subtitle b{font-weight:500}.cu-workload-box__scrum-points-subtitle a{color:#7b68ee;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;position:relative;display:inline-block;padding-bottom:2px;cursor:pointer}@supports (--theme-main-color:#7b68ee){.cu-workload-box__scrum-points-subtitle a{color:var(--theme-main-color)}}.cu-workload-box__scrum-points-subtitle a:after{content:"";display:block;position:absolute;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;background-color:#7b68ee;bottom:0;left:0;width:100%;height:1px}.cu-workload-box__scrum-points-subtitle a:after:hover{transition:none}@supports (--theme-main-color:#7b68ee){.cu-workload-box__scrum-points-subtitle a:after{background-color:var(--theme-main-color)}}.cu-workload-box__scrum-points-subtitle a:hover:after{opacity:0}.cu-workload-box__scrum-points-body{margin:0 -20px}.cu-workload-box__scrum-points-body .cu-search-input__inner{margin:0}.cu-workload-box__scrum-points-body .columns-list__item-name:after{content:"";display:block;position:absolute}.cu-workload-box__scrum-points-scroll{margin:15px -10px 0;padding:0 10px}.cu-workload-box__scrum-points-item{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;line-height:1;display:flex;align-items:center;padding:0 5px 0 20px;color:#343434;height:46px;border-radius:4px}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-workload-box__scrum-points-item{font-family:var(--global-font-support)}}.dark-theme .cu-workload-box__scrum-points-item{color:#d5d6d7}.cu-workload-box__scrum-points-item:hover{background-color:#fafbfc}.dark-theme .cu-workload-box__scrum-points-item:hover{background:#2b343b}.cu-workload-box__scrum-points-item-icon{fill:#7b68ee;width:15px;height:15px;display:inline-block;margin-right:7px}@supports (--theme-main-color:#7b68ee){.cu-workload-box__scrum-points-item-icon{fill:var(--theme-main-color)}}.cu-workload-box__scrum-points-item-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;min-width:0}.dark-theme .cu-workload-box__scrum-points-item-name{color:#d5d6d7}.cu-workload-box__scrum-points-item-name-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#111}.dark-theme .cu-workload-box__scrum-points-item-name-text{color:#d5d6d7}.cu-workload-box__scrum-points-item-button{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee;display:flex;align-items:center;justify-content:center;width:100px;height:30px;border-radius:3px;cursor:pointer;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff;flex-shrink:0;margin-left:10px}@supports (--theme-main-color:#7b68ee){.cu-workload-box__scrum-points-item-button{background:var(--theme-main-color)}}.cu-workload-box__scrum-points-item-button:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-workload-box__scrum-points-item-button:hover{background:var(--theme-main-color-dark)}}'],encapsulation:2,data:{animation:[V.e]},changeDetection:0}),t})();var _t=i("GXRk"),wt=i("N/Rp"),yt=i("tNvG"),kt=i("kcRA"),xt=i("bFKe"),St=i("TlsY"),Tt=i("j5ze"),Ct=i("a2y0"),Dt=i("K1R0"),It=i("P3m4"),Pt=i("Zq4E");let Mt=(()=>{class t{constructor(){}ngOnChanges(t){this.backgroundColor=null,this.backgroundImage=null,this.status&&(this.status.colors&&this.status.colors.length?1===this.status.colors.length?this.backgroundColor=this.status.colors[0]:this.backgroundImage=`linear-gradient(45deg, ${this.status.colors.join(", ")})`:this.backgroundColor=this.status.color)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=U.Rb({type:t,selectors:[["","cuStatusBackground",""]],hostVars:4,hostBindings:function(t,e){2&t&&U.ad("background-color",e.backgroundColor)("background-image",e.backgroundImage)},inputs:{status:["cuStatusBackground","status"]},features:[U.Gb]}),t})();var Ot=i("loh9"),$t=i("Sn6r"),jt=i("KX9h");const Lt=["boxScroll"],Et=["confirmSubtaskModal"],Nt=["confirmMergeSubtaskModal"],At=["convertSub"];function Vt(t,e){if(1&t&&U.Xb(0,"cu-avatar",21),2&t){const t=U.uc();U.Dc("user",t.data)}}function zt(t,e){if(1&t){const t=U.dc();U.cc(0,"cu-assigned-comments-dropdown",22),U.qc("onCommentResolve",function(e){return U.Uc(t),U.uc().commentResolve(e)}),U.Xb(1,"cu-assigned-comment-view",23),U.bc()}if(2&t){const t=U.uc();U.Dc("comments",null==t.data?null:t.data.assigned_comments),U.Ib(1),U.Dc("numberComments",null==t.data?null:t.data.assigned_comment_count)("forTasks",!1)("forMe",!0)}}function Ft(t,e){if(1&t){const t=U.dc();U.cc(0,"div",24),U.qc("click",function(){return U.Uc(t),U.uc().showQuickAdd=!0}),U.dd(1," + "),U.bc()}}const Bt=function(){return[]};function Rt(t,e){if(1&t){const t=U.dc();U.cc(0,"cu-quick-create-task-panel",25),U.qc("close",function(){return U.Uc(t),U.uc().showQuickAdd=!1})("taskCreate",function(){return U.Uc(t),U.uc().taskCreated()}),U.bc()}if(2&t){const t=U.uc();U.Dc("focus",!0)("autoClose",!0)("isHidden",!1)("margin",!1)("saveOnDestroy",!0)("hideDirectionSelector",!0)("list",t.subcategory)("assignees",null!=t.division&&null!=t.division.data&&t.division.data.length&&null!=t.division&&t.division.data[0].id?null==t.division?null:t.division.data:U.Gc(9,Bt))("dontCancel",!0)}}function Ut(t,e){if(1&t&&(U.cc(0,"div",38),U.vc(1,"taskCountPerStatusText"),U.Xb(2,"div",39),U.bc()),2&t){const t=e.$implicit;U.ad("width",t.percentage,"%"),U.Dc("cuTooltip",U.wc(1,7,t))("tooltipBackgroundColor",t.color)("tooltipMargin",0),U.Ib(2),U.ad("background-color",t.color)}}function Gt(t,e){if(1&t&&(U.cc(0,"div",26),U.cc(1,"div",27),U.cc(2,"div",28),U.cc(3,"div",29),U.dd(4),U.bc(),U.cc(5,"div",30),U.gc(6,31),U.bc(),U.bc(),U.cc(7,"div",28),U.cc(8,"div",29),U.dd(9),U.bc(),U.cc(10,"div",30),U.gc(11,32),U.bc(),U.bc(),U.cc(12,"div",33),U.Xb(13,"circle-progress",34),U.vc(14,"async"),U.vc(15,"async"),U.bc(),U.bc(),U.cc(16,"div",35),U.cc(17,"div",36),U.bd(18,Ut,3,9,"div",37),U.bc(),U.bc(),U.bc()),2&t){const t=U.uc();let e=null,i=null;U.Ib(4),U.fd(" ",null==t.data||null==t.data.done_counts?null:t.data.done_counts.incomplete_tasks," "),U.Ib(5),U.fd(" ",null==t.data||null==t.data.done_counts?null:t.data.done_counts.complete_tasks," "),U.Ib(4),U.Dc("percent",t.percentCompletedCount)("radius",24)("outerStrokeWidth",6)("innerStrokeWidth",6)("space",-6)("outerStrokeColor","#6bc950")("titleColor",100===t.percentCompletedCount?"#6bc950":null!=(e=U.wc(14,13,t.user$))&&e.dark_theme?"#d5d6d7":"#292D34")("unitsColor",100===t.percentCompletedCount?"#6bc950":null!=(i=U.wc(15,15,t.user$))&&i.dark_theme?"#d5d6d7":"#292D34")("lazy",!1),U.Ib(5),U.Dc("ngForOf",t.statusItems)("ngForTrackBy",t.trackById)}}const Ht=function(t,e,i,n){return{ids:t,tasks:e,totalCount:i,groupId:n}};function Wt(t,e){if(1&t&&U.Yb(0,50),2&t){const t=U.uc(3),e=U.Rc(26);U.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",U.Kc(2,Ht,t.idsWithoutEstimate,t.tasksWithoutEstimate,null==t.idsWithoutEstimate?null:t.idsWithoutEstimate.length,t.withoutEstimateGroupId))}}function qt(t,e){if(1&t){const t=U.dc();U.cc(0,"div",35),U.cc(1,"div",45),U.Xb(2,"div",46),U.ac(3),U.mc(4,47),U.cc(5,"div",48),U.qc("click",function(){return U.Uc(t),U.uc(2).toggleWithoutPoints()}),U.bc(),U.jc(),U.Zb(),U.bc(),U.bd(6,Wt,1,7,"ng-container",49),U.bc()}if(2&t){const t=U.uc(2);U.Ib(5),U.kc(null==t.data||null==t.data.points_estimate_counts?null:t.data.points_estimate_counts.without_points_estimate_count),U.hc(4),U.Ib(1),U.Dc("ngIf",t.showWithoutPoints)}}function Xt(t,e){if(1&t&&(U.cc(0,"div",26),U.cc(1,"div",40),U.gc(2,41),U.bc(),U.cc(3,"div",27),U.cc(4,"div",28),U.cc(5,"div",29),U.dd(6),U.bc(),U.cc(7,"div",30),U.gc(8,42),U.bc(),U.bc(),U.cc(9,"div",28),U.cc(10,"div",29),U.dd(11),U.bc(),U.cc(12,"div",30),U.gc(13,43),U.bc(),U.bc(),U.cc(14,"div",33),U.Xb(15,"circle-progress",34),U.vc(16,"async"),U.vc(17,"async"),U.bc(),U.bc(),U.bd(18,qt,7,2,"div",44),U.bc()),2&t){const t=U.uc();let e=null,i=null;U.Ib(6),U.fd(" ",null==t.data||null==t.data.points_estimate_counts?null:t.data.points_estimate_counts.incomplete_points," "),U.Ib(5),U.fd(" ",null==t.data||null==t.data.points_estimate_counts?null:t.data.points_estimate_counts.complete_points," "),U.Ib(4),U.Dc("percent",t.percentCompletedPointsEst)("radius",24)("outerStrokeWidth",6)("innerStrokeWidth",6)("space",-6)("outerStrokeColor","#6bc950")("titleColor",100===t.percentCompletedCount?"#6bc950":null!=(e=U.wc(16,12,t.user$))&&e.dark_theme?"#d5d6d7":"#292D34")("unitsColor",100===t.percentCompletedCount?"#6bc950":null!=(i=U.wc(17,14,t.user$))&&i.dark_theme?"#d5d6d7":"#292D34")("lazy",!1),U.Ib(3),U.Dc("ngIf",null==t.data||null==t.data.points_estimate_counts?null:t.data.points_estimate_counts.without_points_estimate_count)}}function Yt(t,e){if(1&t&&U.Yb(0,50),2&t){const t=U.uc(3),e=U.Rc(26);U.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",U.Kc(2,Ht,t.idsWithoutEstimate,t.tasksWithoutEstimate,null==t.idsWithoutEstimate?null:t.idsWithoutEstimate.length,t.withoutEstimateGroupId))}}function Kt(t,e){if(1&t){const t=U.dc();U.cc(0,"div",35),U.cc(1,"div",45),U.Xb(2,"div",46),U.ac(3),U.mc(4,54),U.cc(5,"div",48),U.qc("click",function(){return U.Uc(t),U.uc(2).toggleWithoutEstimate()}),U.bc(),U.jc(),U.Zb(),U.bc(),U.bd(6,Yt,1,7,"ng-container",49),U.bc()}if(2&t){const t=U.uc(2);U.Ib(5),U.kc(null==t.data||null==t.data.time_estimate_counts?null:t.data.time_estimate_counts.without_time_estimate_count),U.hc(4),U.Ib(1),U.Dc("ngIf",t.showWithoutEstimate)}}const Zt=function(t,e,i){return[t,e,!1,i,!0]};function Jt(t,e){if(1&t&&(U.cc(0,"div",26),U.cc(1,"div",40),U.gc(2,51),U.bc(),U.cc(3,"div",27),U.cc(4,"div",28),U.cc(5,"div",29),U.dd(6),U.vc(7,"timeTracked"),U.vc(8,"async"),U.vc(9,"async"),U.bc(),U.cc(10,"div",30),U.gc(11,52),U.bc(),U.bc(),U.cc(12,"div",28),U.cc(13,"div",29),U.dd(14),U.vc(15,"timeTracked"),U.vc(16,"async"),U.vc(17,"async"),U.bc(),U.cc(18,"div",30),U.gc(19,53),U.bc(),U.bc(),U.cc(20,"div",33),U.Xb(21,"circle-progress",34),U.vc(22,"async"),U.vc(23,"async"),U.bc(),U.bc(),U.bd(24,Kt,7,2,"div",44),U.bc()),2&t){const t=U.uc();let e=null,i=null,n=null,o=null;U.Ib(6),U.fd(" ",U.Ac(7,12,U.Jc(36,Zt,null==t.data||null==t.data.time_estimate_counts?null:t.data.time_estimate_counts.incomplete_time,null==(e=U.wc(8,18,t.sharedData.compatCurrentTeam$))?null:e.hours_per_day,null==(e=U.wc(9,20,t.sharedData.compatCurrentTeam$))?null:e.time_estimate_display_hours))," "),U.Ib(8),U.fd(" ",U.Ac(15,22,U.Jc(40,Zt,null==t.data||null==t.data.time_estimate_counts?null:t.data.time_estimate_counts.complete_time,null==(i=U.wc(16,28,t.sharedData.compatCurrentTeam$))?null:i.hours_per_day,null==(i=U.wc(17,30,t.sharedData.compatCurrentTeam$))?null:i.time_estimate_display_hours))," "),U.Ib(7),U.Dc("percent",t.percentCompletedTimeEst)("radius",24)("outerStrokeWidth",6)("innerStrokeWidth",6)("space",-6)("outerStrokeColor","#6bc950")("titleColor",100===t.percentCompletedCount?"#6bc950":null!=(n=U.wc(22,32,t.user$))&&n.dark_theme?"#d5d6d7":"#292D34")("unitsColor",100===t.percentCompletedCount?"#6bc950":null!=(o=U.wc(23,34,t.user$))&&o.dark_theme?"#d5d6d7":"#292D34")("lazy",!1),U.Ib(3),U.Dc("ngIf",null==t.data||null==t.data.time_estimate_counts?null:t.data.time_estimate_counts.without_time_estimate_count)}}function Qt(t,e){if(1&t&&(U.cc(0,"div",26),U.cc(1,"div",40),U.gc(2,55),U.bc(),U.cc(3,"div",27),U.cc(4,"div",28),U.cc(5,"div",29),U.dd(6),U.bc(),U.cc(7,"div",30),U.gc(8,56),U.bc(),U.bc(),U.cc(9,"div",28),U.cc(10,"div",29),U.dd(11),U.bc(),U.cc(12,"div",30),U.gc(13,57),U.bc(),U.bc(),U.cc(14,"div",33),U.Xb(15,"circle-progress",34),U.vc(16,"async"),U.vc(17,"async"),U.bc(),U.bc(),U.bc()),2&t){const t=U.uc();let e=null,i=null;U.Ib(6),U.fd(" ",null==t.data||null==t.data.scrum_counts?null:t.data.scrum_counts.incomplete_scrum," "),U.Ib(5),U.fd(" ",null==t.data||null==t.data.scrum_counts?null:t.data.scrum_counts.complete_scrum," "),U.Ib(4),U.Dc("percent",t.percentCompletedScrum)("radius",24)("outerStrokeWidth",6)("innerStrokeWidth",6)("space",-6)("outerStrokeColor","#6bc950")("titleColor",100===t.percentCompletedScrum?"#6bc950":null!=(e=U.wc(16,11,t.user$))&&e.dark_theme?"#d5d6d7":"#292D34")("unitsColor",100===t.percentCompletedScrum?"#6bc950":null!=(i=U.wc(17,13,t.user$))&&i.dark_theme?"#d5d6d7":"#292D34")("lazy",!1)}}function te(t,e){if(1&t&&U.Yb(0,50),2&t){const t=U.uc().$implicit;U.uc();const e=U.Rc(26);U.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",U.Kc(2,Ht,null==t?null:t.ids,null==t?null:t.tasks,null==t?null:t.taskCount,null==t?null:t.id))}}const ee=function(t,e,i,n){return{data:t,totalCount:e,collapsed:i,groupId:n}};function ie(t,e){if(1&t&&(U.ac(0),U.Yb(1,50),U.bd(2,te,1,7,"ng-container",49),U.Zb()),2&t){const t=e.$implicit;U.uc();const i=U.Rc(28);U.Ib(1),U.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",U.Kc(3,ee,null==t?null:t.data,null==t?null:t.taskCount,null==t?null:t.collapsed,null==t?null:t.id)),U.Ib(1),U.Dc("ngIf",!(null!=t&&t.collapsed)&&(null==t||null==t.ids?null:t.ids.length))}}function ne(t,e){if(1&t){const t=U.dc();U.cc(0,"div",60),U.qc("cuIsInViewport",function(e){U.Uc(t);const i=U.uc().groupId;return U.uc().checkNeedLoadMore(e,i)}),U.bc()}if(2&t){U.uc(2);const t=U.Rc(18);U.Dc("scrollContainer",null==t?null:t.nativeElement)("isInViewPortEnabled",!0)}}const oe=function(){return{timeEstimate:!0,status:!0}},ae=function(){return{allowed:!1,show:!1,closeable:!0,autoFocus:!0}},re=function(t,e){return{showTaskLocations:t,showSubtaskParentNames:e}};function se(t,e){if(1&t){const t=U.dc();U.cc(0,"cu-task-list",58),U.qc("onTimeEstimateAction",function(e){return U.Uc(t),U.uc().onTimeEstimateAction.emit(e)})("onOpenTask",function(e){return U.Uc(t),U.uc().onOpenTask.emit(e)})("onEditTask",function(e){return U.Uc(t),U.uc().onEditTask.emit(e)})("onLazyLoad",function(e){return U.Uc(t),U.uc().onLazyLoad.emit(e)})("onDragStarted",function(i){U.Uc(t);const n=e.groupId;return U.uc().dragStarted(i,n)})("onDragEnded",function(i){U.Uc(t);const n=e.groupId;return U.uc().dragEnded(i,n)})("onQuickAction",function(e){return U.Uc(t),U.uc().quickAction(e)}),U.bc(),U.bd(1,ne,1,2,"div",59)}if(2&t){const t=e.ids,i=e.tasks,n=U.uc();U.Dc("readOnly",!0)("limitedEdit",U.Gc(31,oe))("projectsMap",n.projectsMap)("showHeader",!1)("tasks",i)("rollups",n.rollups)("team",n.team)("dontShowRollup",n.dontShowRollup)("totalCount",null==t?null:t.length)("users",n.users)("showIndiviudalEstimates",n.showIndiviudalEstimates?n.data:null)("pointsBoxUser",null!=n.team&&n.team.points_per_assignee?n.data:null)("meUser",n.currentUser)("statusesMap",n.statusesMap)("showCount",!1)("columns",n.columns)("timeEstimatesDataMap",n.timeEstimatesDataMap)("multiTaskEnabled",!1)("dragDisabled",!1)("dragSortingDisabled",!0)("showFooter",!1)("dateFormat",null==n.currentUser?null:n.currentUser.date_format)("militaryTime",null==n.currentUser?null:n.currentUser.twenty_four_hr_setting)("weights",n.weights)("createTaskOptions",U.Gc(32,ae))("viewPreferences",U.Ic(33,re,null==n.boxSettings?null:n.boxSettings.showBreadcrumbs,null==n.viewSettings?null:n.viewSettings.showSubtaskParentNames))("scrollContainer",n.scrollContainer)("dragConnectedIds",n.dragIds)("displayCustomType",!0)("statusStyleType","cu-task-row-status_border"),U.Ib(1),U.Dc("ngIf",(null==i?null:i.length)!==(null==t?null:t.length))}}function ce(t,e){1&t&&U.Xb(0,"div",67)}function le(t,e){if(1&t){const t=U.dc();U.cc(0,"div",61),U.qc("click",function(){U.Uc(t);const i=e.groupId,n=e.collapsed;return U.uc().toggleExpandGroup(i,n)}),U.Xb(1,"div",62),U.Xb(2,"div",63),U.cc(3,"div",64),U.dd(4),U.bc(),U.bd(5,ce,1,0,"div",65),U.cc(6,"div",66),U.dd(7),U.bc(),U.bc()}if(2&t){const t=e.data,i=e.totalCount,n=e.collapsed,o=U.uc();U.Ob("cu-user-box__status_expanded",!n),U.Ib(2),U.Dc("cuStatusBackground",t),U.Ib(1),U.Dc("cuTooltip",null==t?null:t.label)("tooltipDisabledIfTextNotTruncated",!0),U.Ib(1),U.fd(" ",null==t?null:t.label," "),U.Ib(1),U.Dc("ngIf",(null==t?null:t.type)===o.StatusTypes.Done),U.Ib(2),U.fd("(",i,")")}}function ue(t,e){}function de(t,e){}function he(t,e){}let pe=(()=>{class t{constructor(t,e,i){this.sharedData=t,this.store=e,this.quickActionsHandlerFactory=i,this.userColor=this.sharedData.userData.value.user.theme_color,this.projectsMap={},this.statusesMap={},this.dontShowRollup=!1,this.timeEstimatesDataMap={},this.showIndiviudalEstimates=!1,this.onOpenTask=new U.o,this.onLoadMore=new U.o,this.onExpandGroup=new U.o,this.onEditTask=new U.o,this.onLazyLoad=new U.o,this.onDragStarted=new U.o,this.onDragEnded=new U.o,this.onTimeEstimateAction=new U.o,this.percentCompletedCount=0,this.percentCompletedTimeEst=0,this.percentCompletedPointsEst=0,this.percentCompletedScrum=0,this.trackById=Object(M.d)("id"),this.StatusTypes=_t.g,this.columns=[Object.assign(Object.assign({},$.V),{state:wt.b.Visible,width:null,calc:null}),Object.assign(Object.assign({},$.L),{state:wt.b.Visible,width:null,calc:null})],this.showWithoutEstimate=!1,this.showWithoutPoints=!1,this.user$=this.store.select(O.getUser),this.expandedAll=!1,this.loadMoreVisisble={},this.showQuickAdd=!1,this.WorkloadType=B.a,this.destroy$=new s.a}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}ngOnChanges(t){if(t.division){if(this.withoutEstimateGroupId=this.division?Object(B.c)(this.division.id):"",this.data=this.division&&this.division.data&&this.division.data.length&&this.division.data[0],this.percentCompletedCount=this.data&&this.data.done_counts&&this.data.done_counts.total&&Math.round(100*this.data.done_counts.complete_tasks/this.data.done_counts.total)||0,this.percentCompletedTimeEst=this.data&&this.data.time_estimate_counts&&this.data.time_estimate_counts.total&&Math.round(100*this.data.time_estimate_counts.complete_time/this.data.time_estimate_counts.total)||0,this.percentCompletedPointsEst=this.data&&this.data.points_estimate_counts&&this.data.points_estimate_counts.total&&Math.round(100*this.data.points_estimate_counts.complete_points/this.data.points_estimate_counts.total)||0,this.percentCompletedScrum=this.data&&this.data.scrum_counts&&this.data.scrum_counts.total&&Math.round(100*this.data.scrum_counts.complete_scrum/this.data.scrum_counts.total)||0,this.statusItems=this.division&&this.division.groups&&this.division.groups.map(t=>({status:t.data.status,color:t.data.color||t.data.colors&&t.data.colors.length&&t.data.colors[0],count:t.taskCount,percentage:0})),this.statusItems){const t=this.statusItems.reduce((t,e)=>t+e.count,0);t&&this.statusItems.forEach(e=>e.percentage=Math.round(100*e.count/t))}this.expandedAll=this.division&&this.division.groups&&this.division.groups.every(t=>!t.collapsed),setTimeout(()=>{Object.keys(this.loadMoreVisisble).forEach(t=>{this.loadMoreVisisble[t]&&this.onLoadMore.emit(t)})},300)}}toggleExpandGroup(t,e){this.onExpandGroup.emit({groupIds:[t],value:e})}checkNeedLoadMore(t,e){this.loadMoreVisisble[e]=t,t&&this.onLoadMore.emit(e)}dragStarted(t,e){this.dragGroupId=e,this.onDragStarted.emit({groupId:e,task:t.source.data})}dragEnded(t,e){this.dragGroupId=null,this.onDragEnded.emit({groupId:e,task:t.source.data})}toggleWithoutEstimate(){this.showWithoutEstimate=!this.showWithoutEstimate}toggleWithoutPoints(){this.showWithoutPoints=!this.showWithoutPoints}toggleExpandAll(){const t=this.division&&this.division.groups&&this.division.groups.map(t=>t.id)||[];this.onExpandGroup.emit({groupIds:t,value:!this.expandedAll})}taskCreated(){}commentResolve(t){this.onEditTask.emit({action:N.a.AssignedComment,task:t,data:null})}quickAction({task:t,action:e,data:i}){this.quickActionsHandlerFactory.create(new yt.a({task:t,convertSubtaskContainer:this.convertSub,confirmMergeSubtaskModalContainer:this.confirmMergeSubtaskModal,confirmSubtaskModalContainer:this.confirmSubtaskModal,componentDestroy$:this.destroy$,project:this.projectsMap[t.project_id]})).handle(e,i)}}return t.\u0275fac=function(e){return new(e||t)(U.Wb(lt.a),U.Wb(r.Store),U.Wb(kt.a))},t.\u0275cmp=U.Qb({type:t,selectors:[["cu-user-box"]],viewQuery:function(t,e){if(1&t&&(U.jd(Lt,3),U.jd(Et,3,U.U),U.jd(Nt,3,U.U),U.jd(At,3,U.U)),2&t){let t;U.Qc(t=U.rc())&&(e.boxScroll=t.first),U.Qc(t=U.rc())&&(e.confirmSubtaskModal=t.first),U.Qc(t=U.rc())&&(e.confirmMergeSubtaskModal=t.first),U.Qc(t=U.rc())&&(e.convertSub=t.first)}},hostAttrs:[1,"cu-user-box"],hostVars:2,hostBindings:function(t,e){2&t&&U.Ob("cu-user-box_drag-source",!!e.dragGroupId)},inputs:{division:"division",scrollContainer:"scrollContainer",currentUser:"currentUser",users:"users",projectsMap:"projectsMap",statusesMap:"statusesMap",boxSettings:"boxSettings",viewSettings:"viewSettings",dragIds:"dragIds",tasksWithoutEstimate:"tasksWithoutEstimate",idsWithoutEstimate:"idsWithoutEstimate",canCreateTask:"canCreateTask",subcategory:"subcategory",dontShowRollup:"dontShowRollup",rollups:"rollups",team:"team",weights:"weights",timeEstimatesDataMap:"timeEstimatesDataMap",showIndiviudalEstimates:"showIndiviudalEstimates"},outputs:{onOpenTask:"onOpenTask",onLoadMore:"onLoadMore",onExpandGroup:"onExpandGroup",onEditTask:"onEditTask",onLazyLoad:"onLazyLoad",onDragStarted:"onDragStarted",onDragEnded:"onDragEnded",onTimeEstimateAction:"onTimeEstimateAction"},features:[U.Gb],decls:35,vars:20,consts:function(){let t,e,i,n,o,a,r,s,c,l,u,d,h,p,f;return t=$localize`:@@common_create-task␟bfeb2918dc688c13a53abffacc0ad3f1d12ddbcd␟8192258211003608112:Create task`,e=$localize`:@@common_expand-all␟1f8e926cdad26808d3176cb86eeeb229a777a026␟7118963917562742579:Expand all`,i=$localize`:@@common_not-done␟49b5e61a4564bb7063693fde2bdb40d57447fc25␟1930775042146113838: Not done `,n=$localize`:@@common_done␟498b54f7033f8e502bbd4b1fbffbf43ec64b1f8b␟7172549446775804828: Done `,o=$localize`:@@common_sprint-points␟c3fde55990a58b117e261bbadbf7d9f39fa73fa7␟4619060420816543961: Sprint Points `,a=$localize`:@@common_not-done␟49b5e61a4564bb7063693fde2bdb40d57447fc25␟1930775042146113838: Not done `,r=$localize`:@@common_done␟498b54f7033f8e502bbd4b1fbffbf43ec64b1f8b␟7172549446775804828: Done `,s=$localize`:@@cu-user-box__tasks-without-points␟c965c4bc1d3cba3d593fd8fd7678cd5cc24e9738␟7890204147622941508:${"\ufffd#5\ufffd"}:START_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: tasks ${"\ufffd/#5\ufffd"}:CLOSE_TAG_DIV: without points `,c=$localize`:@@common_time-estimate␟85a8480e89d0ab3257dd78a893ef2d8042ee4192␟3105900747966717253: Time Estimate `,l=$localize`:@@common_not-done␟49b5e61a4564bb7063693fde2bdb40d57447fc25␟1930775042146113838: Not done `,u=$localize`:@@common_done␟498b54f7033f8e502bbd4b1fbffbf43ec64b1f8b␟7172549446775804828: Done `,d=$localize`:@@cu-user-box__tasks-without-estimates␟c23145de9494653fbde32e61f5a60d881755e34d␟5054468356004942613:${"\ufffd#5\ufffd"}:START_TAG_DIV: ${"\ufffd0\ufffd"}:INTERPOLATION: tasks ${"\ufffd/#5\ufffd"}:CLOSE_TAG_DIV: without estimates `,h=$localize`:@@common_scrum-points␟b58e6d54b19c8d510f96a5921b7a4e4a7626b722␟4099194669562166538: Scrum points `,p=$localize`:@@common_not-done␟49b5e61a4564bb7063693fde2bdb40d57447fc25␟1930775042146113838: Not done `,f=$localize`:@@common_done␟498b54f7033f8e502bbd4b1fbffbf43ec64b1f8b␟7172549446775804828: Done `,[[1,"cu-user-box__inner"],[1,"cu-user-box__header"],["class","cu-user-box__header-avatar",3,"user",4,"ngIf"],[1,"cu-user-box__header-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated","cuUserProfileLink"],["class","cu-user-box__header-comments",3,"comments","onCommentResolve",4,"ngIf"],[1,"cu-user-box__header-divider"],["class","cu-user-box__plus","cuTooltip",t,3,"click",4,"ngIf"],["cuTooltip",e,1,"cu-user-box__header-all",3,"click"],[1,"cu-user-box__header-all-line"],[1,"cu-user-box__body"],["slashCommandsPlacement","bottom","slashCommandsContainer","",3,"focus","autoClose","isHidden","margin","saveOnDestroy","hideDirectionSelector","list","assignees","dontCancel","close","taskCreate",4,"ngIf"],[1,"cu-user-box__scroll","cu-user-box__scroll-view",3,"perfectScrollbar"],["boxScroll",""],["class","cu-user-box__stat",4,"ngIf"],[1,"cu-user-box__container"],[4,"ngFor","ngForOf","ngForTrackBy"],["taskListTemplate",""],["statusHeaderTemplate",""],["convertSub",""],["confirmSubtaskModal",""],["confirmMergeSubtaskModal",""],[1,"cu-user-box__header-avatar",3,"user"],[1,"cu-user-box__header-comments",3,"comments","onCommentResolve"],[3,"numberComments","forTasks","forMe"],["cuTooltip",t,1,"cu-user-box__plus",3,"click"],["slashCommandsPlacement","bottom","slashCommandsContainer","",3,"focus","autoClose","isHidden","margin","saveOnDestroy","hideDirectionSelector","list","assignees","dontCancel","close","taskCreate"],[1,"cu-user-box__stat"],[1,"cu-user-box__stat-body"],[1,"cu-user-box__stat-data"],[1,"cu-user-box__stat-data-value"],[1,"cu-user-box__stat-data-title"],i,n,[1,"cu-user-box__stat-progress"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","space","outerStrokeColor","titleColor","unitsColor","lazy"],[1,"cu-user-box__stat-footer"],[1,"cu-user-box__stat-statuses"],["class","cu-user-box__stat-status-wrapper",3,"cuTooltip","tooltipBackgroundColor","tooltipMargin","width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-user-box__stat-status-wrapper",3,"cuTooltip","tooltipBackgroundColor","tooltipMargin"],[1,"cu-user-box__stat-status"],[1,"cu-user-box__stat-header"],o,a,r,["class","cu-user-box__stat-footer",4,"ngIf"],[1,"cu-user-box__stat-footer-estimate"],["icon","exclamation3",1,"cu-user-box__stat-footer-estimate-icon"],s,[1,"cu-user-box__stat-footer-estimate-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],c,l,u,d,h,p,f,["rowClass","cu-user-box__task-row",1,"cu-user-box__task-list",3,"readOnly","limitedEdit","projectsMap","showHeader","tasks","rollups","team","dontShowRollup","totalCount","users","showIndiviudalEstimates","pointsBoxUser","meUser","statusesMap","showCount","columns","timeEstimatesDataMap","multiTaskEnabled","dragDisabled","dragSortingDisabled","showFooter","dateFormat","militaryTime","weights","createTaskOptions","viewPreferences","scrollContainer","dragConnectedIds","displayCustomType","statusStyleType","onTimeEstimateAction","onOpenTask","onEditTask","onLazyLoad","onDragStarted","onDragEnded","onQuickAction"],["class","cu-user-box__load-more",3,"scrollContainer","isInViewPortEnabled","cuIsInViewport",4,"ngIf"],[1,"cu-user-box__load-more",3,"scrollContainer","isInViewPortEnabled","cuIsInViewport"],[1,"cu-user-box__status",3,"click"],["icon","cu2-angle-right",1,"cu-user-box__status-arrow"],[1,"cu-user-box__status-dot",3,"cuStatusBackground"],["tooltipModifier","cu-text-capitalize",1,"cu-user-box__status-title",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["class","cu-user-box__status-done","icon","status-done",3,"cuPreventDefault",4,"ngIf"],[1,"cu-user-box__status-count"],["icon","status-done",1,"cu-user-box__status-done",3,"cuPreventDefault"]]},template:function(t,e){1&t&&(U.cc(0,"div",0),U.cc(1,"div",1),U.bd(2,Vt,1,1,"cu-avatar",2),U.cc(3,"div",3),U.vc(4,"username"),U.dd(5),U.vc(6,"username"),U.bc(),U.bd(7,zt,2,4,"cu-assigned-comments-dropdown",4),U.Xb(8,"div",5),U.bd(9,Ft,2,0,"div",6),U.cc(10,"div",7),U.qc("click",function(){return e.toggleExpandAll()}),U.Xb(11,"div",8),U.Xb(12,"div",8),U.Xb(13,"div",8),U.Xb(14,"div",8),U.bc(),U.bc(),U.cc(15,"div",9),U.bd(16,Rt,1,10,"cu-quick-create-task-panel",10),U.cc(17,"div",11,12),U.bd(19,Gt,19,17,"div",13),U.bd(20,Xt,19,16,"div",13),U.bd(21,Jt,25,44,"div",13),U.bd(22,Qt,18,15,"div",13),U.cc(23,"div",14),U.bd(24,ie,3,8,"ng-container",15),U.bc(),U.bc(),U.bc(),U.bc(),U.bd(25,se,2,36,"ng-template",null,16,U.cd),U.bd(27,le,8,8,"ng-template",null,17,U.cd),U.bd(29,ue,0,0,"ng-template",null,18,U.cd),U.bd(31,de,0,0,"ng-template",null,19,U.cd),U.bd(33,he,0,0,"ng-template",null,20,U.cd)),2&t&&(U.Ib(2),U.Dc("ngIf",null==e.data?null:e.data.id),U.Ib(1),U.Dc("cuTooltip",U.wc(4,16,e.data))("tooltipDisabledIfTextNotTruncated",!0)("cuUserProfileLink",null!=e.data&&e.data.id?e.data:null),U.Ib(2),U.fd(" ",U.wc(6,18,e.data)," "),U.Ib(2),U.Dc("ngIf",(null==e.boxSettings?null:e.boxSettings.showAssignedComments)&&(null==e.data?null:e.data.assigned_comment_count)),U.Ib(2),U.Dc("ngIf",!e.showQuickAdd&&e.canCreateTask),U.Ib(1),U.Ob("cu-user-box__header-all_expanded",e.expandedAll),U.Ib(6),U.Dc("ngIf",e.showQuickAdd),U.Ib(3),U.Dc("ngIf",(null==e.boxSettings||null==e.boxSettings.workload?null:e.boxSettings.workload.field)===e.WorkloadType.completed),U.Ib(1),U.Dc("ngIf",(null==e.boxSettings||null==e.boxSettings.workload?null:e.boxSettings.workload.field)===e.WorkloadType.pointsEstimates),U.Ib(1),U.Dc("ngIf",(null==e.boxSettings||null==e.boxSettings.workload?null:e.boxSettings.workload.field)===e.WorkloadType.timeEstimate),U.Ib(1),U.Dc("ngIf",(null==e.boxSettings||null==e.boxSettings.workload?null:e.boxSettings.workload.field)===e.WorkloadType.scrum),U.Ib(2),U.Dc("ngForOf",null==e.division?null:e.division.groups)("ngForTrackBy",e.trackById))},directives:[Z.q,it.a,ot.a,xt.a,Z.p,nt.a,St.a,Tt.a,Ct.a,Dt.a,et.a,Z.x,It.c,Pt.a,Mt,Ot.a],pipes:[ct.a,Z.b,$t.a,jt.a],styles:['.cu-user-box{display:block;position:relative;background:#fff;border-radius:4px;box-shadow:0 2px 5px rgba(0,0,0,.1);margin:0 15px 15px 0;width:250px}.dark-theme .cu-user-box{background:#2b343b}.cu-user-box__plus{-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;font:500 20px/1 Gotham Pro,Proxima Nova,arial,serif;margin-right:5px;color:#7c828d}.dark-theme .cu-user-box__plus{color:#828588}.cu-user-box__inner{display:flex;flex-direction:column;padding:10px 0 0;width:100%;height:100%}.cu-user-box__scroll{max-height:420px;min-height:200px;overflow-y:auto}.cu-user-box__scroll .ps__rail-y{z-index:20}.cu-user-box__scroll-view{box-sizing:border-box!important;will-change:transform}.cu-user-box__scroll-view:before{content:"";display:block;position:sticky;width:100%;height:8px;margin-bottom:-3px;top:0;flex-shrink:0;z-index:15;background:linear-gradient(180deg,#fff 0,#fff 30%,hsla(0,0%,100%,0))}.dark-theme .cu-user-box__scroll-view:before{background:linear-gradient(180deg,#2b343b 0,#2b343b 30%,rgba(43,52,59,0))}.cu-user-box__scroll-view:after{content:"";display:block;position:sticky;width:100%;height:15px;bottom:0;flex-shrink:0;z-index:15;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,#fff 70%,#fff)}.dark-theme .cu-user-box__scroll-view:after{background:linear-gradient(180deg,rgba(43,52,59,0) 0,#2b343b 70%,#2b343b)}.cu-user-box__header{display:flex;align-items:center;height:33px;padding:0 15px 5px}.cu-user-box__header-name{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:14px;line-height:1;margin-left:10px;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-user-box__header-name{font-family:var(--global-font-support)}}.dark-theme .cu-user-box__header-name{color:#d5d6d7}.cu-user-box__header-comments{margin-left:10px}.cu-user-box__header-divider{flex-grow:1;min-width:10px}.cu-user-box__header-all{width:14px;height:13px;cursor:pointer;position:relative;flex-shrink:0}.cu-user-box__header-all:hover .cu-user-box__header-all-line{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-user-box__header-all:hover .cu-user-box__header-all-line{background:var(--theme-main-color)}}.cu-user-box__header-all:hover .cu-user-box__header-all-line:before{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-user-box__header-all:hover .cu-user-box__header-all-line:before{background:var(--theme-main-color)}}.cu-user-box__header-all_expanded .cu-user-box__header-all-line{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-user-box__header-all_expanded .cu-user-box__header-all-line{background:var(--theme-main-color)}}.dark-theme .cu-user-box__header-all_expanded .cu-user-box__header-all-line{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-user-box__header-all_expanded .cu-user-box__header-all-line{background:var(--theme-main-color)}}.cu-user-box__header-all_expanded .cu-user-box__header-all-line:before{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-user-box__header-all_expanded .cu-user-box__header-all-line:before{background:var(--theme-main-color)}}.dark-theme .cu-user-box__header-all_expanded .cu-user-box__header-all-line:before{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-user-box__header-all_expanded .cu-user-box__header-all-line:before{background:var(--theme-main-color)}}.cu-user-box__header-all_expanded .cu-user-box__header-all-line:first-child,.cu-user-box__header-all_expanded .cu-user-box__header-all-line:nth-child(3){transform:rotate(-40deg)}.cu-user-box__header-all_expanded .cu-user-box__header-all-line:nth-child(2),.cu-user-box__header-all_expanded .cu-user-box__header-all-line:nth-child(4){transform:rotate(40deg)}.cu-user-box__header-all-line{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:6px;height:1px;transform-origin:50% 75%;position:absolute;background:#7c828d}.dark-theme .cu-user-box__header-all-line{background:#828588}.cu-user-box__header-all-line:before{content:"";display:block;position:absolute;width:100%;height:100%;transform:translateY(50%);background:#7c828d}.dark-theme .cu-user-box__header-all-line:before{background:#828588}.cu-user-box__header-all-line:first-child{transform:rotate(40deg);top:4px;left:2px}.cu-user-box__header-all-line:nth-child(2){transform:rotate(-40deg);top:4px;right:2px}.cu-user-box__header-all-line:nth-child(3){transform:rotate(40deg);bottom:4px;left:2px}.cu-user-box__header-all-line:nth-child(4){transform:rotate(-40deg);bottom:4px;right:2px}.cu-user-box__body{flex-grow:1;min-height:0;height:calc(100% - 33px)}.cu-user-box__container{margin-top:7px;padding-bottom:8px;display:flex;flex-direction:column}.cu-user-box__status{font-family:Gotham Pro,Proxima Nova,arial,serif;display:inline-flex;align-items:center;padding:6px 15px;cursor:pointer;z-index:10;background-color:#fff}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-user-box__status{font-family:var(--global-font-support)}}.dark-theme .cu-user-box__status{background:#2b343b}.cu-user-box__status_expanded{top:0;position:sticky}.cu-user-box__status-arrow{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:8px;height:14px;fill:#7c828d}.dark-theme .cu-user-box__status-arrow{fill:#828588}.cu-user-box__status_expanded .cu-user-box__status-arrow{transform:rotate(90deg)}.cu-user-box__status-dot{width:11px;height:11px;border-radius:2px;margin-left:5px;flex-shrink:0}.cu-user-box__status-title{overflow:hidden;text-overflow:ellipsis;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:10px;line-height:1;text-transform:uppercase;white-space:nowrap;margin:1px 0 0 5px;color:#343434}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-user-box__status-title{font-family:var(--global-font-support)}}.dark-theme .cu-user-box__status-title{color:#d5d6d7}.cu-user-box__status-count{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;margin:1px 0 0 5px;color:#7c828d}.dark-theme .cu-user-box__status-count{color:#828588}.cu-user-box__status-done{margin-left:5px;height:13px;width:13px}.cu-user-box__stat{padding:0 15px 10px}.cu-user-box__stat+.cu-user-box__stat{padding-top:10px}.cu-user-box__stat-header{text-transform:uppercase;color:#bdbdbd;font-size:10px}.cu-user-box__stat-footer-estimate{display:flex;align-items:center;margin-top:-5px;font:400 10px/1 Gotham Pro,Proxima Nova,arial,serif;font-style:italic;color:#82868d}.dark-theme .cu-user-box__stat-footer-estimate{color:#abaeb0}.cu-user-box__stat-footer-estimate-icon{width:12px;height:12px;fill:#343434;margin-right:5px}.dark-theme .cu-user-box__stat-footer-estimate-icon{fill:#d5d6d7}.cu-user-box__stat-footer-estimate-link{color:#7b68ee;font-style:normal;cursor:pointer;margin-right:3px;border-bottom:1px dotted}@supports (--theme-main-color:#7b68ee){.cu-user-box__stat-footer-estimate-link{color:var(--theme-main-color);border-bottom-color:var(--theme-main-color)}}.cu-user-box__stat-footer-estimate-link:hover{color:#5f48ea;border-bottom-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-user-box__stat-footer-estimate-link:hover{color:var(--theme-main-color-dark);border-bottom-color:var(--theme-main-color-dark)}}.cu-user-box__stat-body{display:flex;justify-content:space-between;align-items:center}.cu-user-box__stat-data{display:flex;flex-direction:column;align-items:flex-start}.cu-user-box__stat-data-value{font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34;margin-bottom:5px}.dark-theme .cu-user-box__stat-data-value{color:#d5d6d7}.cu-user-box__stat-data-title{font:400 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#82868d}.dark-theme .cu-user-box__stat-data-title{color:#abaeb0}.cu-user-box__stat-progress{margin:0 -2px}.cu-user-box__stat-progress *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-user-box__stat-progress *{color:#d5d6d7}.cu-user-box__stat-progress circle{stroke:#e9ebf0}.dark-theme .cu-user-box__stat-progress circle{stroke:rgba(124,130,141,.5)}.cu-user-box__stat-statuses{width:100%;display:flex;overflow:hidden}.cu-user-box__stat-status{height:3px;min-height:3px;flex:1}.cu-user-box__stat-status-wrapper{height:12px;display:flex;align-items:center}.cu-user-box__stat-status-wrapper:hover .cu-user-box__stat-status{min-height:5px}.cu-user-box__stat-status-wrapper:first-child .cu-user-box__stat-status{border-top-left-radius:3px;border-bottom-left-radius:3px}.cu-user-box__stat-status-wrapper:last-child .cu-user-box__stat-status{border-top-right-radius:3px;border-bottom-right-radius:3px}.cu-user-box__task-list{padding:5px 15px;z-index:0}.cu-user-box__task-row.cu-task-row.cdk-drag-animating{transition:none}.dark-theme .cu-user-box__task-row .cu-task-row__container{background:#384047;border-color:#384047}.cu-user-box__task-row .cu-task-row__main{min-width:auto;padding-right:5px;padding-left:0}.dark-theme .cu-user-box__task-row .cu-task-row-status_border:after,.dark-theme .cu-user-box__task-row .cu-task-row__main{background:#384047}.cu-user-box__task-row .cu-task-row-main__link-text{font-weight:400;font-size:11px;line-height:1.8}.cu-user-box__task-row .cu-task-row__time-estimate:after{display:none}.cu-user-box__task-row .cu-task-row__time-estimate .time-estimates-view__full{margin-right:7px}.cu-user-box__task-row .cu-task-row-recurring-date-picker{display:none!important}.cu-user-box__task-row .cu-subtasks-by-status-popup__add,.cu-user-box__task-row .cu-subtasks-by-status-popup__count-add,.cu-user-box__task-row .cu-task-row__arrow{display:none}.cu-user-box_drag-source{opacity:.3}.cu-user-box .cdk-drag-placeholder{visibility:visible!important}.cu-user-box.cu-state-drag-over:not(.cu-user-box_drag-source):hover:after{background:#7b68ee;content:"";position:absolute;top:0;left:0;right:0;height:100%;opacity:.3}@supports (--theme-main-color:#7b68ee){.cu-user-box.cu-state-drag-over:not(.cu-user-box_drag-source):hover:after{background:var(--theme-main-color)}}.cu-user-box__load-more{margin-top:-60px;height:60px;pointer-events:none}'],encapsulation:2,changeDetection:0}),t})();var fe=i("N4ya"),ge=i("WvjT");const me=["scrollContainer"];function ve(t,e){if(1&t){const t=U.dc();U.cc(0,"div",4),U.vc(1,"async"),U.cc(2,"cu-paywall-modal",5),U.qc("trialClick",function(){return U.Uc(t),U.uc().startTrial()}),U.vc(3,"async"),U.bc(),U.bc()}if(2&t){const t=U.uc();U.Ob("cu-dashboard-box__scroll_me-mode",U.wc(1,7,t.isMeTabSelected$)),U.Ib(2),U.Dc("featureTitle",t.boxViewPaywallModalMeta.title)("description",t.boxViewPaywallModalMeta.description)("features",t.boxViewPaywallModalMeta.features)("image",t.boxViewPaywallModalMeta.image)("team",U.wc(3,9,t.team$))}}function be(t,e){1&t&&U.Xb(0,"cu-loader",10),2&t&&U.Dc("modifier","cu-btn__spinner_no-height")("@loading",void 0)}function _e(t,e){if(1&t&&(U.Xb(0,"cu-box-settings",15),U.vc(1,"async"),U.vc(2,"async"),U.vc(3,"async"),U.vc(4,"async"),U.vc(5,"async")),2&t){const t=U.uc(3);let e=null,i=null;U.Dc("field",null==(e=U.wc(1,4,t.boxSettings$))||null==e.workload?null:e.workload.field)("disableTimeEstimate",U.wc(2,6,t.isGuestTeam$)&&!(null!=U.wc(3,8,t.team$).guest_settings&&U.wc(3,8,t.team$).guest_settings.can_see_time_estimated))("customFields",U.wc(4,10,t.customFields$))("customFieldId",null==(i=U.wc(5,12,t.boxSettings$))?null:i.scrumFieldId)}}function we(t,e){if(1&t&&(U.Xb(0,"cu-workload-box",16),U.vc(1,"async"),U.vc(2,"async"),U.vc(3,"async"),U.vc(4,"async"),U.vc(5,"async")),2&t){const t=U.uc(3);let e=null;U.Dc("user",U.wc(1,5,t.user$))("team",U.wc(2,7,t.team$))("divisions",U.wc(3,9,t.divisionsAllSorted$))("field",null==(e=U.wc(4,11,t.boxSettings$))||null==e.workload?null:e.workload.field)("showPaywall",U.wc(5,13,t.showWorkloadPaywall$))}}const ye=function(){return["source","id"]};function ke(t,e){if(1&t){const t=U.dc();U.cc(0,"cu-user-box",17),U.qc("ondrop",function(i){U.Uc(t);const n=e.$implicit;return U.uc(3).drop(i,n)})("onLazyLoad",function(e){return U.Uc(t),U.uc(3).lazyLoadData({source:"statuses",type:"task",data:e.data})})("onLoadMore",function(i){U.Uc(t);const n=e.$implicit;return U.uc(3).loadMore(null==n?null:n.id,i)})("onOpenTask",function(e){return U.Uc(t),U.uc(3).openTask(e)})("onExpandGroup",function(i){U.Uc(t);const n=e.$implicit;return U.uc(3).expandGroup(null==n?null:n.id,null==i?null:i.groupIds,null==i?null:i.value)})("onDragStarted",function(i){U.Uc(t);const n=e.$implicit;return U.uc(3).dragStarted(i,n)})("onDragEnded",function(i){U.Uc(t);const n=e.$implicit;return U.uc(3).dragEnded(i,n)})("onEditTask",function(e){return U.Uc(t),U.uc(3).changeTask(e)})("onTimeEstimateAction",function(e){return U.Uc(t),U.uc(3).timeEstimateAction(e)}),U.vc(1,"async"),U.vc(2,"async"),U.vc(3,"async"),U.vc(4,"async"),U.vc(5,"async"),U.vc(6,"async"),U.vc(7,"async"),U.vc(8,"async"),U.vc(9,"async"),U.vc(10,"async"),U.vc(11,"async"),U.vc(12,"async"),U.vc(13,"async"),U.vc(14,"async"),U.bc()}if(2&t){const t=e.$implicit,i=U.uc(3);let n=null;U.Dc("cdkSupport",!0)("cdkField",U.Gc(47,ye))("division",t)("scrollContainer",i.scrollContainerElement)("currentUser",U.wc(1,19,i.user$))("rollups",U.wc(2,21,i.rollups$))("projectsMap",U.wc(3,23,i.projectsMap$))("viewSettings",U.wc(4,25,i.viewSettings$))("boxSettings",U.wc(5,27,i.boxSettings$))("team",U.wc(6,29,i.team$))("weights",U.wc(7,31,i.weights$))("timeEstimatesDataMap",U.wc(8,33,i.timeEstimatesDataMap$))("dontShowRollup",U.wc(9,35,i.showSubtasksType$)===i.DataViewSubtasks.StandAlone)("tasksWithoutEstimate",U.wc(10,37,i.tasksWithoutEstimateMap$)[t.id])("idsWithoutEstimate",U.wc(11,39,i.idsWithoutEstimateMap$)[t.id])("subcategory",U.wc(12,41,i.subcategory$))("canCreateTask",U.wc(13,43,i.canCreateTask$))("showIndiviudalEstimates",null==(n=U.wc(14,45,i.team$))?null:n.estimates_per_assignee)("statusesMap",i.statusesMap)}}function xe(t,e){if(1&t&&(U.cc(0,"div",11),U.bd(1,_e,6,14,"cu-box-settings",12),U.vc(2,"async"),U.bd(3,we,6,15,"cu-workload-box",13),U.vc(4,"async"),U.vc(5,"async"),U.bd(6,ke,15,48,"cu-user-box",14),U.vc(7,"async"),U.bc()),2&t){const t=U.uc(2);let e=null,i=null;U.Dc("@loading",void 0),U.Ib(1),U.Dc("ngIf",(null==(e=U.wc(2,5,t.user$))?null:e.dashboard)!==t.LayoutVersion.Six),U.Ib(2),U.Dc("ngIf",(null==(i=U.wc(4,7,t.divisionsAllSorted$))?null:i.length)&&!U.wc(5,9,t.isWorkloadHidden$)),U.Ib(3),U.Dc("ngForOf",U.wc(7,11,t.divisionsAllSorted$))("ngForTrackBy",t.trackById)}}function Se(t,e){if(1&t){const t=U.dc();U.cc(0,"div",18),U.cc(1,"cu-table-placeholder",19),U.qc("onSwitchToTeam",function(){return U.Uc(t),U.uc(2).switchToTeamView()})("onClearFilter",function(){return U.Uc(t),U.uc(2).clearFilters()})("onUnfreeze",function(){return U.Uc(t),U.uc(2).unfreezeView()})("clearDataViewUsersFilter",function(){return U.Uc(t),U.uc(2).clearDataViewUsersFilter()}),U.vc(2,"async"),U.vc(3,"async"),U.vc(4,"async"),U.vc(5,"async"),U.vc(6,"async"),U.vc(7,"async"),U.vc(8,"async"),U.vc(9,"async"),U.vc(10,"async"),U.bc(),U.bc()}if(2&t){const t=U.uc(2);let e=null;U.Dc("@loading",void 0),U.Ib(1),U.Dc("isMeTabSelected",U.wc(2,10,t.isMeTabSelected$))("isFilter",U.wc(3,12,t.isFilter$))("isGuestTeam",U.wc(4,14,t.isGuestTeam$))("isSharedSpace",U.wc(5,16,t.isSharedSpace$))("isListExists",U.wc(6,18,t.isListExistsInProject$))("isProjectExists",U.wc(7,20,t.categoriesTotal$)>0)("isSpaceExists",!(null==(e=U.wc(8,22,t.projects$))||!e.length))("isFrozenView",U.wc(9,24,t.isFrozenView$))("filterAssigneesUsers",U.wc(10,26,t.filterAssigneesUsers$))}}function Te(t,e){if(1&t&&(U.cc(0,"div",6),U.bd(1,be,1,2,"cu-loader",7),U.vc(2,"async"),U.bd(3,xe,8,13,"div",8),U.vc(4,"async"),U.bd(5,Se,11,28,"div",9),U.vc(6,"async"),U.vc(7,"async"),U.bc()),2&t){const t=U.uc();U.Dc("@loading",void 0),U.Ib(1),U.Dc("ngIf",U.wc(2,4,t.isLoading$)),U.Ib(2),U.Dc("ngIf",!U.wc(4,6,t.isEmpty$)),U.Ib(2),U.Dc("ngIf",U.wc(6,8,t.isEmpty$)&&!U.wc(7,10,t.isLoading$))}}const Ce={title:$localize`:@@common_box-view:Box view`,description:$localize`:@@cu-dashboard-box__paywall-description_free-trial-unlimited-plan:Start your free trial of Unlimited so you can plan and manage visually by drag and drop using the all new Box view.`,features:[{icon:"cu2-eye",name:$localize`:@@cu-dashboard-box__feature-item_see-work-items:See what people are working on`},{icon:"cu2-cog",name:$localize`:@@cu-dashboard-box__feature-item_manage-resources:Manage resources & workload`},{icon:"cu2-address-card",name:$localize`:@@cu-dashboard-box__feature-item_find-whos-underload-or-overloaded:Find out who needs more tasks & who is overloaded`}],image:"./assets/images/paywall/box-view-flat.png"};let De=(()=>{class t{constructor(t,e,i,l,g,m,v,b,_){this.sharedTaskService=t,this.conflictService=e,this.websocketService=i,this.taskService=l,this.store=g,this.renderHelperService=m,this.localStorage=v,this.timeEstimatesService=b,this.changeDetectorRef=_,this.reloadData$=new s.a,this.notAllDebounceTime=Object(a.hb)(a.n,a.m),this.allDebounceTime=Object(a.hb)(a.k,a.j),this.delayedTaskIds=[],this.reloadGenericView=!1,this.user$=this.store.select(O.getUser),this.team$=this.store.select(O.getTeam),this.weights$=this.store.select(O.getUserWeights),this.project$=this.store.select(O.getProject),this.category$=this.store.select(O.getCategory),this.subcategory$=this.store.select(O.getSubcategory),this.selectedDataView$=this.store.select(S.qb),this.projectsMap$=this.store.select(O.getAllProjectsMap),this.isMeTabSelected$=this.store.select(S.R),this.isFilter$=this.store.select(S.N),this.isFrozenView$=this.selectedDataView$.pipe(Object(u.a)(t=>!!t),Object(d.a)("locked")),this.showSubtasksType$=this.selectedDataView$.pipe(Object(h.a)(t=>t&&t.settings&&t.settings.showSubtasksType)),this.isGuestTeam$=this.store.select(O.isGuestTeam),this.isSharedSpace$=this.store.select(O.getSharedSpaceParam),this.isListExistsInProject$=this.category$.pipe(Object(h.a)(t=>!!(t&&t.subcategories&&t.subcategories.length))),this.categoriesTotal$=this.store.select(O.getCategoriesWithoutFolderless).pipe(Object(d.a)("length")),this.projects$=this.store.select(O.getProjects),this.filterAssigneesUsers$=this.store.select(S.x),this.denyRender$=this.renderHelperService.denyRender$,this.timeEstimatesDataMap$=this.store.pipe(Object(r.select)(n.a),Object(p.a)(C.a),Object(f.a)(t=>{})),this.isLoading$=Object(c.a)([this.store.select(T.j),this.store.select(T.b)]).pipe(Object(h.a)(([t,e])=>t||!e)),this.rollups$=this.store.select(O.getTimeRollups),this.divisionsAll$=this.store.select(T.i),this.divisions$=Object(c.a)([this.divisionsAll$,this.team$]).pipe(Object(h.a)(([t,e])=>t&&t.filter(t=>t.data&&t.data.length&&t.data[0].id&&this.isActiveTeamMember(t.data[0],e)))),this.unassgined$=this.divisionsAll$.pipe(Object(h.a)(t=>t&&t.find(t=>t.data&&t.data.length&&!t.data[0].id))),this.divisionsAllSorted$=Object(c.a)([this.unassgined$,this.divisions$]).pipe(Object(h.a)(([t,e])=>t?e?[t,...e]:[t]:e)),this.dragIds$=this.divisionsAll$.pipe(Object(h.a)(t=>t.map(t=>t.id))),this.isEmpty$=this.divisionsAll$.pipe(Object(h.a)(t=>!t||!t.length)),this.boxSettings$=this.store.select(S.z),this.viewSettings$=this.store.select(S.V),this.tasksWithoutEstimateMap$=this.store.pipe(Object(r.select)(T.n)),this.idsWithoutEstimateMap$=this.store.select(T.g),this.customFields$=this.store.select(A.m),this.isAllSpaces$=this.store.pipe(Object(r.select)(O.getSelectedProjectId),Object(h.a)(t=>t===a.a)),this.canCreateTask$=Object(c.a)([this.project$,this.category$,this.subcategory$,this.isAllSpaces$]).pipe(Object(h.a)(([t,e,i,n])=>!n&&(i?i.permissions&&i.permissions.can_create_tasks:e?e.permissions&&e.permissions.can_create_tasks:!!t&&t.permissions&&t.permissions.can_create_tasks))),this.showPaywall$=this.team$.pipe(Object(h.a)(t=>t&&t.plan_id===E.f.FREE)),this.showWorkloadPaywall$=this.team$.pipe(Object(h.a)(t=>t&&t.plan_id<E.f.BUSINESS)),this.isWorkloadHidden$=this.store.select(T.h),this.trackById=Object(M.d)("id"),this.boxViewPaywallModalMeta=Ce,this.isDragging=!1,this.TeamPlan=E.f,this.DataViewSubtasks=I.h,this.LayoutVersion=o.b,this.destroy$=new s.a}ngOnInit(){this.store.pipe(Object(r.select)(T.a),Object(u.a)(t=>Boolean(t)),Object(u.a)(t=>t.viewType===I.i.Box),Object(p.a)(C.a),Object(g.a)({}),Object(m.a)(),Object(v.a)(this.destroy$)).subscribe(([t,e])=>{const i=e.settings&&e.settings.showSubtasksType;this.getTaskIds("getDataViewReloadData",i===I.h.BelowParent&&(t.settings&&t.settings.showSubtasksType)!==i||t.id!==e.id||(t.settings&&t.settings.showClosedSubtasks)!==(e.settings&&e.settings.showClosedSubtasks),!0,!1)}),this.reloadData$.pipe(Object(b.a)(()=>this.isAllSpaces$),Object(_.a)(t=>Object(l.a)(t?this.allDebounceTime:this.notAllDebounceTime)),Object(v.a)(this.destroy$)).subscribe(()=>{clearTimeout(this.delayedTimer),this.timeStarted=null,this.currentDelay=0,this.reloadGenericView&&this.reloadTasks([...this.delayedTaskIds],"websocket debounce",!1),this.delayedTaskIds=[],this.reloadGenericView=!1}),this.store.dispatch(new P.f({})),this.initSyncData()}ngOnDestroy(){clearTimeout(this.delayedTimer),this.destroy$.next(),this.destroy$.complete()}getTaskIds(t,e=!0,i=!1,n=!0){this.store.dispatch(new P.k(e,i,t,n))}loadMore(t,e){this.store.dispatch(new P.m({divisionId:t,groupId:e}))}lazyLoadData(t){switch(t.source){case"statuses":this.loadStatuses(t)}}loadStatuses({type:t,data:e}){const i=`${t}_${"task"===t?e.parent||e.id:JSON.stringify(e)}`;this.store.pipe(Object(r.select)(Object(O.getCommonTaskStatuses)(e)),Object(w.a)()).subscribe(t=>{this.statusesMap=Object.assign(Object.assign({},this.statusesMap),{[i]:t}),this.changeDetectorRef.markForCheck()})}isActiveTeamMember(t,e){return!e||!e.members||"unassigned"===t.id||e.members.some(e=>e.user.id===t.id)}openTask(t){this.sharedTaskService.clickTaskLink({id:t.id,customId:t.custom_id,teamId:t.team})}expandGroup(t,e,i){this.store.dispatch(new P.d({divisionId:t,groupIds:e,value:i}))}get scrollContainerElement(){return this.scrollContainer.nativeElement}dragStarted(t,e){this.isDragging=!0,this.dragGroupId=t.groupId,this.dragDivision=e,this.dropDivision=null}dragEnded(t,e){this.isDragging=!1,this.dropDivision&&(this.dragDivision&&this.dragDivision.id!==this.dropDivision.id&&this.dragGroupId&&this.handleDrop(t.task.id,this.dragGroupId,this.dragDivision,this.dropDivision),this.dragGroupId=null,this.dragDivision=null,this.dropDivision=null)}handleDrop(t,e,i,n){this.store.dispatch(new P.b({taskIds:[t],fromGroupId:e,fromDivision:i,toDivision:n}))}drop(t,e){this.dropDivision=e,this.isDragging||(t&&t.length&&t[0].id&&this.dragDivision&&this.dragDivision.id!==this.dropDivision.id&&this.dragGroupId&&this.handleDrop(t[0].id,this.dragGroupId,this.dragDivision,this.dropDivision),this.dragGroupId=null,this.dragDivision=null,this.dropDivision=null)}delayedReload(t=[],e){clearTimeout(this.delayedTimer);const i=Date.now();this.currentDelay=Math.max(this.timeStarted?this.currentDelay-(i-this.timeStarted):a.e,0),this.timeStarted=i,this.delayedTaskIds=Object(D.a)([...this.delayedTaskIds,...t]),this.reloadGenericView=!0,this.delayedTimer=setTimeout(()=>{this.reloadTasks(this.delayedTaskIds,"forced reload from long debounce",!1),this.timeStarted=null,this.currentDelay=0,this.delayedTaskIds=[],this.reloadGenericView=!1},this.currentDelay),this.reloadData$.next()}reloadTasks(t,e,i=!0){t.length>0&&this.store.dispatch(new P.u(t)),this.getTaskIds("reloadTasks "+e,!1,!1,i)}switchToTeamView(){this.store.dispatch(new R.wj(!1))}clearFilters(){this.store.dispatch(new R.rj(a.G))}unfreezeView(){this.selectedDataView$.pipe(Object(w.a)(),Object(u.a)(t=>!!t)).subscribe(t=>{this.store.dispatch(new R.vj(t.id,!1))})}clearDataViewUsersFilter(){this.store.dispatch(new R.Dj([],[]))}changeTask(t){switch(t.action){case N.a.AssignedComment:this.reloadTasks([t.task.id],"resolve comment");break;case N.a.TimeEst:this.changeTaskTimeEst({task:t.task,time:t.data});break;case N.a.Status:this.changeTaskStatus({task:t.task,status:t.data});break;case N.a.ToggleStatus:this.toggleStatus(t.data)}}toggleStatus(t){t.category&&this.store.pipe(Object(r.select)(Object(O.getCommonTaskStatuses)(t)),Object(w.a)()).subscribe(e=>{if(2!==e.length)return;const i=e.findIndex(e=>e.status.toLowerCase()===t.status.status.toLowerCase());let n;if(0===i)n=Object.assign({},e[1]);else{if(1!==i)return;n=Object.assign({},e[0])}this.changeTaskStatus({task:t,status:n})})}changeTaskStatus({task:t,status:e}){const i=Object.assign(Object.assign({},t),{status:e});this.notifyTaskUpdated(i),this.taskService.setStatus(t,e,null,null,null,null,100).subscribe(e=>{(e.unresolvedConflict||e.dependencyConflict)&&this.notifyTaskUpdated(t)},()=>{this.notifyTaskUpdated(t)})}changeTaskTimeEst({task:t,time:e}){this.notifyTaskUpdated(Object.assign(Object.assign({},t),{time_estimate_string:e.output,time_estimate:1e3*e.seconds}),$.V.name)}timeEstimateAction(t){this.timeEstimatesService.dispatchTimeEstimateAction(t)}startTrial(){this.store.dispatch(new R.Rk)}notifyTasksUpdated(t,e){this.store.dispatch(new P.J(t,e))}notifyTaskUpdated(t,e,i=!1){this.notifyTasksUpdated([Object.assign(Object.assign({},t),{subtasks:i?t.subtasks:void 0})],e)}deleteTask(t){this.store.dispatch(new P.v([t]))}initSyncData(){this.websocketService.onChange.pipe(Object(y.a)(this.store.select(T.m),this.store.select(S.sb),this.store.select(S.qb),this.store.select(O.getUser)),Object(v.a)(this.destroy$)).subscribe(([t,e,i,n,o])=>{if(t&&t.type&&t.payload)switch(t.type){case"tasksArchived":this.delayedReload(t.payload.task_ids,"ws tasksArchived");break;case"refreshTable":this.getTaskIds("ws refreshTable",!1,!1,!1);break;case"taskCopyComplete":case"taskCreated":t.payload.task&&t.payload.task.parent?this.delayedReload([t.payload.task.parent,t.payload.id],"ws taskCreated"):(this.store.dispatch(new j.f([t.payload.task])),this.delayedReload([t.payload.task.id],"ws taskCreated"));break;case"tagAdded":case"tagRemoved":i&&this.delayedReload([],"ws tag added or removed");const a=e.find(e=>e.id===t.payload.task_id);a&&("tagAdded"===t.type?this.notifyTasksUpdated([Object(z.a)(a,t.payload.tag)],$.U.name):Object(z.c)(a,t.payload.tag_name)&&this.notifyTasksUpdated([Object(z.b)(a,t.payload.tag_name)],$.U.name));break;case"taskUpdate":const{updatedTask:s,reloadViewData:c,reloadTask:l,reloadParent:d,updatedFields:h}=Object(F.b)(t.payload.hist_item,n,e.find(e=>e.id===t.payload.task_id),o),p=Object(F.c)(t.payload.hist_item).some(t=>["status","assignee_add","assignee_rem","group_assignee_add","group_assignee_rem",n.boxSettings.workload.field===B.a.pointsEstimates?"points":null,n.boxSettings.workload.field===B.a.timeEstimate?"time_estimate":null].filter(Boolean).includes(t.field));s&&this.notifyTasksUpdated([s],h[0]);const f=d&&t.payload.parent&&e.some(e=>e.id===t.payload.parent);(c||f||l||p)&&this.delayedReload([f?t.payload.parent:void 0,l?t.payload.id:void 0].filter(Boolean));break;case"taskDeleted":this.deleteTask(t.payload.id);break;case"entityAccessChanged":const g=t.payload;g.removed||this.store.pipe(Object(r.select)(O.shouldReloadDashboardView,{accessChangedEvent:g}),Object(k.a)(1),Object(u.a)(Boolean)).subscribe(()=>this.getTaskIds("access added",!0,!0));break;case"categoryCopyComplete":case"subcategoryCopyComplete":this.getTaskIds("ws categoryCopyComplete",!1);break;case"taskMoved":this.delayedReload([t.payload.id],"ws tag added or removed")}}),this.taskService.onChange.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{if(!t||"listViewDragDrop"===t.type)return;const e=t.tasks||t;if(Array.isArray(e))this.notifyTasksUpdated(e.map(t=>Object.assign(Object.assign({},t),{subtasks:void 0})),t.field),this.getTaskIds("taskService.onChange",!1);else switch(t.type){case"dependencyRemoved":this.reloadTasks([t.payload.task_id],"dependencyRemoved");break;case"itemUndo":t.undoBody&&t.undoBody.itemIds&&t.undoBody.itemIds.length&&this.reloadTasks(t.undoBody.itemIds,"itemUndo");break;case"undoArchive":case"reArchive":this.reloadTasks(t.archiveUndo,"reArchive");break;case"unresolved":this.reloadTasks(t.taskList.map(t=>t.id),"unresolved");break;case"taskPosition":case"boardPosition":t.undoBody&&t.undoBody.tasks&&t.undoBody.tasks.length&&this.reloadTasks(t.undoBody.tasks.map(t=>t.id),"taskPosition");break;case"undoTag":this.reloadTasks(t.undoTag.task_ids,"undoTag");break;case"dependencyReload":this.reloadTasks(t.taskIds,"dependencyReload");break;case"reload":t.taskIds&&Array.isArray(t.taskIds)&&this.reloadTasks(t.taskIds,"reload");break;case"taskDeleted":this.deleteTask(t.payload.id);break;default:this.getTaskIds("taskService.onChange default",!1)}}),this.sharedTaskService.onClose.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{if(t){this.notifyTaskUpdated(t,void 0,!0);const e=[t.id];t.parent_task&&e.push(t.parent_task.id),this.reloadTasks(e,"task view close")}}),this.taskService.onTimeTrackChange.pipe(Object(u.a)(t=>!!t.task),Object(v.a)(this.destroy$)).subscribe(t=>{const e=[t.task.id];t.parentId&&e.push(t.parentId),this.reloadTasks(e,"time change")}),this.taskService.onTaskCreate.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new j.f([t.task])),this.getTaskIds("taskService.onTaskCreate",!1,!0)}),this.taskService.onTasksCreate.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{t&&t.tasks&&t.tasks.length&&(this.store.dispatch(new j.f(t.tasks)),this.getTaskIds("taskService.onTasksCreate",!1,!0))}),this.taskService.onSubtaskCreate.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{setTimeout(()=>this.reloadTasks([t.task.id],"onSubtaskCreate"),700)}),this.conflictService.onChange.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{"reload"===t.type||Array.isArray(t.tasks)&&this.reloadTasks(t.tasks,"conflictService")}),this.store.pipe(Object(r.select)(L.a),Object(x.a)(1),Object(u.a)(t=>!!t),Object(v.a)(this.destroy$)).subscribe(t=>{this.notifyTaskUpdated(t)})}}return t.\u0275fac=function(e){return new(e||t)(U.Wb(G.a),U.Wb(H.a),U.Wb(W.WebsocketService),U.Wb(q.a),U.Wb(r.Store),U.Wb(X.a),U.Wb(Y.b),U.Wb(K.a),U.Wb(U.h))},t.\u0275cmp=U.Qb({type:t,selectors:[["cu-dashboard-box"]],viewQuery:function(t,e){if(1&t&&U.jd(me,3),2&t){let t;U.Qc(t=U.rc())&&(e.scrollContainer=t.first)}},hostAttrs:[1,"cu-dashboard-box"],decls:8,vars:14,consts:[["class","cu-dashboard-box__paywall cu-dashboard-box__paywall-view",3,"cu-dashboard-box__scroll_me-mode",4,"ngIf"],[1,"cu-dashboard-box__scroll","cu-dashboard-box__scroll-view","cu-if-not-task-view-scroll"],["scrollContainer",""],["class","cu-dashboard-box__body",4,"ngIf"],[1,"cu-dashboard-box__paywall","cu-dashboard-box__paywall-view"],[3,"featureTitle","description","features","image","team","trialClick"],[1,"cu-dashboard-box__body"],[3,"modifier",4,"ngIf"],["class","cu-dashboard-box__boxes",4,"ngIf"],["class","cu-dashboard-box__empty",4,"ngIf"],[3,"modifier"],[1,"cu-dashboard-box__boxes"],[3,"field","disableTimeEstimate","customFields","customFieldId",4,"ngIf"],[3,"user","team","divisions","field","showPaywall",4,"ngIf"],["cuDropArea","",3,"cdkSupport","cdkField","division","scrollContainer","currentUser","rollups","projectsMap","viewSettings","boxSettings","team","weights","timeEstimatesDataMap","dontShowRollup","tasksWithoutEstimate","idsWithoutEstimate","subcategory","canCreateTask","showIndiviudalEstimates","statusesMap","ondrop","onLazyLoad","onLoadMore","onOpenTask","onExpandGroup","onDragStarted","onDragEnded","onEditTask","onTimeEstimateAction",4,"ngFor","ngForOf","ngForTrackBy"],[3,"field","disableTimeEstimate","customFields","customFieldId"],[3,"user","team","divisions","field","showPaywall"],["cuDropArea","",3,"cdkSupport","cdkField","division","scrollContainer","currentUser","rollups","projectsMap","viewSettings","boxSettings","team","weights","timeEstimatesDataMap","dontShowRollup","tasksWithoutEstimate","idsWithoutEstimate","subcategory","canCreateTask","showIndiviudalEstimates","statusesMap","ondrop","onLazyLoad","onLoadMore","onOpenTask","onExpandGroup","onDragStarted","onDragEnded","onEditTask","onTimeEstimateAction"],[1,"cu-dashboard-box__empty"],[3,"isMeTabSelected","isFilter","isGuestTeam","isSharedSpace","isListExists","isProjectExists","isSpaceExists","isFrozenView","filterAssigneesUsers","onSwitchToTeam","onClearFilter","onUnfreeze","clearDataViewUsersFilter"]],template:function(t,e){1&t&&(U.bd(0,ve,4,11,"div",0),U.vc(1,"async"),U.cc(2,"div",1,2),U.vc(4,"async"),U.vc(5,"async"),U.bd(6,Te,8,12,"div",3),U.vc(7,"async"),U.bc()),2&t&&(U.Dc("ngIf",U.wc(1,6,e.showPaywall$)),U.Ib(2),U.Ob("cu-hidden",U.wc(4,8,e.showPaywall$))("cu-dashboard-box__scroll_me-mode",U.wc(5,10,e.isMeTabSelected$)),U.Ib(4),U.Dc("ngIf",!U.wc(7,12,e.denyRender$)))},directives:[Z.q,J.a,Q.a,Z.p,tt.a,bt,pe,fe.a,ge.a],pipes:[Z.b],styles:[".cu-dashboard-box{height:100%;min-width:0;position:relative;display:block}.cu-dashboard-box__paywall{overflow-y:auto;overflow-x:hidden;height:100%}.cu-os-win .cu-dashboard-box__paywall{scrollbar-width:thin}.cu-os-win .cu-dashboard-box__paywall::-webkit-scrollbar{background-color:#fafbfc;width:16px;height:16px}.cu-os-win .cu-dashboard-box__paywall::-webkit-scrollbar-track,.cu-os-win .cu-dashboard-box__paywall::-webkit-scrollbar-track:hover{background-color:#fafbfc}.cu-os-win .cu-dashboard-box__paywall::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fafbfc}.cu-os-win .cu-dashboard-box__paywall::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fafbfc}.cu-os-win .cu-dashboard-box__paywall::-webkit-scrollbar-button{display:none}.cu-os-win.contrast_high .cu-dashboard-box__paywall::-webkit-scrollbar,.cu-os-win.contrast_high .cu-dashboard-box__paywall::-webkit-scrollbar-track{background-color:#eee}.cu-os-win.contrast_high .cu-dashboard-box__paywall::-webkit-scrollbar-track:hover{background-color:#eee}.cu-os-win.contrast_high .cu-dashboard-box__paywall::-webkit-scrollbar-thumb,.cu-os-win.contrast_high .cu-dashboard-box__paywall::-webkit-scrollbar-thumb:hover{border-color:#eee}.cu-os-win.dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar,.cu-os-win .dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar,.cu-os-win.dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-track{background-color:#1e272e}.cu-os-win.dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-track:hover{background-color:#1e272e}.cu-os-win.dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-dashboard-box__paywall::-webkit-scrollbar-thumb:hover{border-color:#1e272e}@-moz-document url-prefix(){.cu-os-win .cu-dashboard-box__paywall{scrollbar-color:#fafbfc #fafbfc}.cu-os-win.contrast_high .cu-dashboard-box__paywall{scrollbar-color:#eee #eee}.cu-os-win.dark-theme .cu-dashboard-box__paywall{scrollbar-color:#1e272e #1e272e}.cu-os-win .cu-dashboard-box__paywall:hover{scrollbar-color:#a0a0a5 #fafbfc}.cu-os-win.contrast_high .cu-dashboard-box__paywall:hover{scrollbar-color:#a0a0a5 #eee}.cu-os-win.dark-theme .cu-dashboard-box__paywall:hover{scrollbar-color:#828588 #1e272e}}.cu-dashboard-box__paywall-view{box-sizing:border-box!important;padding:110px 0 50px}.cu-dashboard-box__paywall .cu-paywall-modal{margin:0}.cu-dashboard-box__paywall .cu-paywall-modal__label{top:-70px}.cu-dashboard-box__scroll{width:100%;height:100%;overflow-x:auto;overflow-y:auto;will-change:transform}.cu-os-win .cu-dashboard-box__scroll{scrollbar-width:thin}.cu-os-win .cu-dashboard-box__scroll::-webkit-scrollbar{background-color:#fafbfc;width:16px;height:16px}.cu-os-win .cu-dashboard-box__scroll::-webkit-scrollbar-track,.cu-os-win .cu-dashboard-box__scroll::-webkit-scrollbar-track:hover{background-color:#fafbfc}.cu-os-win .cu-dashboard-box__scroll::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fafbfc}.cu-os-win .cu-dashboard-box__scroll::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fafbfc}.cu-os-win .cu-dashboard-box__scroll::-webkit-scrollbar-button{display:none}.cu-os-win.contrast_high .cu-dashboard-box__scroll::-webkit-scrollbar,.cu-os-win.contrast_high .cu-dashboard-box__scroll::-webkit-scrollbar-track{background-color:#eee}.cu-os-win.contrast_high .cu-dashboard-box__scroll::-webkit-scrollbar-track:hover{background-color:#eee}.cu-os-win.contrast_high .cu-dashboard-box__scroll::-webkit-scrollbar-thumb,.cu-os-win.contrast_high .cu-dashboard-box__scroll::-webkit-scrollbar-thumb:hover{border-color:#eee}.cu-os-win.dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar,.cu-os-win .dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar,.cu-os-win.dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-track{background-color:#1e272e}.cu-os-win.dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-track:hover{background-color:#1e272e}.cu-os-win.dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-dashboard-box__scroll::-webkit-scrollbar-thumb:hover{border-color:#1e272e}@-moz-document url-prefix(){.cu-os-win .cu-dashboard-box__scroll{scrollbar-color:#fafbfc #fafbfc}.cu-os-win.contrast_high .cu-dashboard-box__scroll{scrollbar-color:#eee #eee}.cu-os-win.dark-theme .cu-dashboard-box__scroll{scrollbar-color:#1e272e #1e272e}.cu-os-win .cu-dashboard-box__scroll:hover{scrollbar-color:#a0a0a5 #fafbfc}.cu-os-win.contrast_high .cu-dashboard-box__scroll:hover{scrollbar-color:#a0a0a5 #eee}.cu-os-win.dark-theme .cu-dashboard-box__scroll:hover{scrollbar-color:#828588 #1e272e}}.cu-dashboard-box__scroll_me-mode .cu-dashboard-box__scroll-view{padding-top:56px}.cu-dashboard-box__scroll-view{box-sizing:border-box!important}.cu-dashboard-box__body{padding:50px 10px 120px 25px;display:inline-block;min-width:100%;max-width:100%}.cu-dashboard__router-outlet_v6 .cu-dashboard-box__body{padding-top:25px}.cu-dashboard-box__boxes{display:flex;flex-wrap:wrap}.cu-dashboard-box__empty{position:absolute;top:120px;left:0;width:100%;text-align:center}"],encapsulation:2,data:{animation:[V.e]},changeDetection:0}),t})()},uK3R:function(t,e,i){"use strict";i.d(e,"a",function(){return j});var n=i("x1J0"),o=i("LKfL"),a=i("jJQC"),r=i("o7Ov"),s=i("XeJJ"),c=i("X4Xz"),l=i("fXoL"),u=i("Jf2N"),d=i("l7P3"),h=i("ofXK"),p=i("O5gs"),f=i("UdVN"),g=i("0Dyw"),m=i("HqON"),v=i("bFKe"),b=i("NsZK");const _=["menu"],w=["customFieldTemplate"],y=["scrumPointsModalTemplate"];function k(t,e){if(1&t){const t=l.dc();l.cc(0,"div",11),l.qc("click",function(){return l.Uc(t),l.uc().toggleWorkload(!1)}),l.gc(1,12),l.bc()}}function x(t,e){if(1&t&&(l.ac(0),l.dd(1),l.vc(2,"lowercase"),l.Zb()),2&t){const t=l.uc().$implicit;l.Ib(1),l.ed("scrum"===t.id?"points":l.wc(2,1,t.title))}}function S(t,e){if(1&t&&(l.ac(0),l.bd(1,x,3,3,"ng-container",13),l.Zb()),2&t){const t=e.$implicit;l.Ib(1),l.Dc("ngIf",!0===t.checked)}}function T(t,e){1&t&&l.Xb(0,"div",14)}function C(t,e){1&t&&l.Xb(0,"div",20)}function D(t,e){if(1&t){const t=l.dc();l.cc(0,"div",15),l.cc(1,"div",16),l.qc("click",function(){l.Uc(t);const i=e.item;return l.uc().selectCustomField(i)}),l.Xb(2,"cu-custom-field-icon",17),l.cc(3,"div",18),l.dd(4),l.bc(),l.bd(5,C,1,0,"div",19),l.bc(),l.bc()}if(2&t){const t=e.item,i=e.originalItem;l.Ib(2),l.Dc("field",t),l.Ib(2),l.ed(null==i?null:i.title),l.Ib(1),l.Dc("ngIf",null==i?null:i.checked)}}function I(t,e){if(1&t){const t=l.dc();l.cc(0,"div",30),l.Xb(1,"cu-custom-field-icon",31),l.cc(2,"div",32),l.dd(3),l.bc(),l.cc(4,"div",33),l.qc("click",function(){l.Uc(t);const i=e.$implicit;return l.uc(2).selectCustomField(i)}),l.gc(5,34),l.bc(),l.bc()}if(2&t){const t=e.$implicit;l.Ib(1),l.Dc("field",t),l.Ib(1),l.Dc("cuTooltip",t.name)("tooltipDisabledIfTextNotTruncated",!0),l.Ib(1),l.fd(" ",t.name," ")}}function P(t,e){if(1&t&&(l.cc(0,"div",21),l.ac(1),l.mc(2,22),l.Xb(3,"b"),l.Xb(4,"b"),l.jc(),l.Zb(),l.cc(5,"a",23),l.gc(6,24),l.bc(),l.bc(),l.cc(7,"div",25),l.cc(8,"cu-search-list",26,27),l.cc(10,"div",28),l.bd(11,I,6,4,"div",29),l.bc(),l.bc(),l.bc()),2&t){const t=l.Rc(9),e=l.uc();l.Ib(8),l.Dc("filterfn",e.filterFieldFn)("items",e.customFields),l.Ib(3),l.Dc("ngForOf",t.filteredItems)("ngForTrackBy",e.trackById)}}const M=function(t){return{"cu-box-settings_disabled":t}},O=[{id:o.a.completed,title:$localize`:@@common_number-of-tasks:Number of tasks`,type:n.a.Item,checkType:"check"},{id:o.a.timeEstimate,title:$localize`:@@common_time-estimate:Time Estimate`,type:n.a.Item,checkType:"check"},{id:o.a.pointsEstimates,title:$localize`:@@common_sprint-points:Sprint Points`,type:n.a.Item,checkType:"check"},{id:o.a.scrum,title:$localize`:@@cu-box-settings__menu-item_points:Points (custom field)`,type:n.a.Item,checkType:"check"}],$=(t,e)=>!t||!t.name||t.name.toLocaleLowerCase().includes(e);let j=(()=>{class t{constructor(t,e){this.modal=t,this.store=e,this.disableSettings=!1,this.disableTimeEstimate=!1,this.isWorkloadHidden$=this.store.select(s.h),this.menuItems=O,this.filterFieldFn=$,this.trackById=Object(a.d)("id")}ngOnInit(){}ngOnChanges(t){(t.field||t.customFields||t.customFieldId||t.disableTimeEstimate)&&(this.menuItems=O.map(t=>Object.assign(Object.assign({},t),{checked:t.id===this.field,disabled:t.id===o.a.timeEstimate&&this.disableTimeEstimate})))}selectAction(t){t.id===o.a.scrum?(this.menu&&this.menu.close(),this.modal.open({title:$localize`:@@cu-box-settings__title_points-for-tracking-effort-and-workload:Use points to track effort, workload, and capacity`,content:this.scrumPointsModalTemplate,bodyModifier:"cu-modal__body_no-min-height"})):this.store.dispatch(new r.jj(t.id))}selectCustomField(t){this.modal.close(),this.store.dispatch(new r.jj(o.a.scrum,t.id))}toggleWorkload(t){this.store.dispatch(new c.H({active:t}))}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(u.a),l.Wb(d.Store))},t.\u0275cmp=l.Qb({type:t,selectors:[["cu-box-settings"]],viewQuery:function(t,e){if(1&t&&(l.jd(_,1),l.jd(w,3),l.jd(y,3)),2&t){let t;l.Qc(t=l.rc())&&(e.menu=t.first),l.Qc(t=l.rc())&&(e.customFieldTemplate=t.first),l.Qc(t=l.rc())&&(e.scrumPointsModalTemplate=t.first)}},hostAttrs:[1,"cu-box-settings"],inputs:{disableSettings:"disableSettings",field:"field",disableTimeEstimate:"disableTimeEstimate",customFields:"customFields",customFieldId:"customFieldId"},features:[l.Gb],decls:16,vars:12,consts:function(){let t,e,i,n,o;return t=$localize`:@@common_workload␟b2b965ecaab80829816b055811a82e1699c0fd3d␟3127646278831765507:Workload`,e=$localize`:@@cu-box-settings__show-workload␟c1c15535eb79f65266e0ddf55954ff384da9b3e5␟7623538029467377302: Show Workload `,i=$localize`:@@cu-workload-box__scrum-points-subtitle_choose-number-or-dropdown-with-numbers␟c66f49653e39d52b1f517f219293b48e302f628d␟5973960729243051370: Choose a ${"[\ufffd#3\ufffd|\ufffd#4\ufffd]"}:START_BOLD_TEXT:number${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_BOLD_TEXT: or a ${"[\ufffd#3\ufffd|\ufffd#4\ufffd]"}:START_BOLD_TEXT:dropdown${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_BOLD_TEXT: (that has numbers) Custom Field to use Points. `,i=l.lc(i),n=$localize`:@@common_learn-more␟e2dcf27db9c6a5e249960c576014aa40b3883360␟819996403327805209:Learn more`,o=$localize`:@@common_use-this-field␟a65664b5e4576a4690581b79722343aa26b125aa␟611405296068235848: Use this field `,[[1,"cu-box-settings__list"],["class","cu-box-settings__show",3,"click",4,"ngIf"],[3,"ngClass","items","dropdownCloseOnModal","dropdownDisabled","onSelect"],["menu",""],[1,"cu-box-settings__toggle"],["icon","cu2-workload",1,"cu-box-settings__toggle-icon"],t,[4,"ngFor","ngForOf","ngForTrackBy"],["class","cu-box-settings__toggle-arrow","icon","dropdown-settings_down",4,"ngIf"],["customFieldTemplate",""],["scrumPointsModalTemplate",""],[1,"cu-box-settings__show",3,"click"],e,[4,"ngIf"],["icon","dropdown-settings_down",1,"cu-box-settings__toggle-arrow"],[1,"cu-dropdown-list-item__link-container"],[1,"cu-dropdown-list-item__link",3,"click"],["modifier","cu-dropdown-list-item__icon",3,"field"],[1,"cu-dropdown-list-item__title"],["class","cu-dropdown-list-item__check","icon","dropdown-settings_mark",4,"ngIf"],["icon","dropdown-settings_mark",1,"cu-dropdown-list-item__check"],[1,"cu-workload-box__scrum-points-subtitle"],i,["href","https://docs.clickup.com/en/articles/3182792-scrum-points","target","_blank"],n,[1,"cu-workload-box__scrum-points-body"],[3,"filterfn","items"],["searchList",""],[1,"cu-workload-box__scrum-points-scroll",3,"perfectScrollbar"],["class","cu-workload-box__scrum-points-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cu-workload-box__scrum-points-item"],["modifier","cu-workload-box__scrum-points-item-icon",3,"field"],[1,"cu-workload-box__scrum-points-item-name",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],[1,"cu-workload-box__scrum-points-item-button",3,"click"],o]},template:function(t,e){1&t&&(l.cc(0,"div",0),l.bd(1,k,2,0,"div",1),l.vc(2,"async"),l.cc(3,"cu-dropdown-list",2,3),l.qc("onSelect",function(t){return e.selectAction(t)}),l.cc(5,"div",4),l.Xb(6,"div",5),l.ac(7),l.gc(8,6),l.Zb(),l.dd(9,": "),l.bd(10,S,2,1,"ng-container",7),l.bd(11,T,1,0,"div",8),l.bc(),l.bc(),l.bc(),l.bd(12,D,6,3,"ng-template",null,9,l.cd),l.bd(14,P,12,4,"ng-template",null,10,l.cd)),2&t&&(l.Ib(1),l.Dc("ngIf",l.wc(2,8,e.isWorkloadHidden$)),l.Ib(2),l.Dc("ngClass",l.Hc(10,M,e.disableSettings))("items",e.menuItems)("dropdownCloseOnModal",!0)("dropdownDisabled",e.disableSettings),l.Ib(7),l.Dc("ngForOf",e.menuItems)("ngForTrackBy",e.trackById),l.Ib(1),l.Dc("ngIf",!e.disableSettings))},directives:[h.q,p.a,h.o,f.a,h.p,g.a,m.a,v.a,b.a],pipes:[h.b,h.n],styles:[".cu-box-settings{display:block;position:relative;width:100%}.cu2-views-bar_v6 .cu-box-settings{width:auto}.cu-box-settings__show{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;color:#7b68ee;border-color:#7b68ee;display:inline-block;cursor:pointer;border-bottom:1px dashed;margin-right:10px}@supports (--theme-main-color:#7b68ee){.cu-box-settings__show{color:var(--theme-main-color);border-color:var(--theme-main-color)}}.cu-box-settings__show:hover{color:#5f48ea;border-color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-box-settings__show:hover{color:var(--theme-main-color-dark);border-color:var(--theme-main-color-dark)}}.cu-box-settings__list{display:flex;position:absolute;top:-49px;align-items:center}.cu2-views-bar_v6 .cu-box-settings__list{position:relative;top:auto}.cu-box-settings_disabled{pointer-events:none}.cu-box-settings__toggle{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;height:30px;padding:0 14px;background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.1);border-radius:15px;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-box-settings__toggle{background:#384047;color:#d5d6d7}.cu2-views-bar_v6 .cu-box-settings__toggle{transition:background-color .2s cubic-bezier(.785,.135,.15,.86) 0s;box-shadow:none;position:relative;margin-right:4px;border-radius:6px;padding:0 8px;height:24px;color:#53575e;background:transparent}.dark-theme .cu2-views-bar_v6 .cu-box-settings__toggle{color:#abaeb0;background:transparent}.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle,.cu-box-settings__toggle:hover{color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle,.cu-box-settings__toggle:hover{color:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-box-settings .cu-dropdown_open .cu-box-settings__toggle,.cu2-views-bar_v6 .cu-box-settings__toggle:hover{color:#53575e;background-color:#f2f2f2}.dark-theme .cu2-views-bar_v6 .cu-box-settings .cu-dropdown_open .cu-box-settings__toggle,.dark-theme .cu2-views-bar_v6 .cu-box-settings__toggle:hover{background-color:#1e272e;color:#abaeb0}.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-arrow,.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-icon,.cu-box-settings__toggle:hover .cu-box-settings__toggle-arrow,.cu-box-settings__toggle:hover .cu-box-settings__toggle-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-arrow,.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-icon,.cu-box-settings__toggle:hover .cu-box-settings__toggle-arrow,.cu-box-settings__toggle:hover .cu-box-settings__toggle-icon{fill:var(--theme-main-color)}}.cu2-views-bar_v6 .cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-arrow,.cu2-views-bar_v6 .cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-icon,.cu2-views-bar_v6 .cu-box-settings__toggle:hover .cu-box-settings__toggle-arrow,.cu2-views-bar_v6 .cu-box-settings__toggle:hover .cu-box-settings__toggle-icon{fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-arrow,.dark-theme .cu2-views-bar_v6 .cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-icon,.dark-theme .cu2-views-bar_v6 .cu-box-settings__toggle:hover .cu-box-settings__toggle-arrow,.dark-theme .cu2-views-bar_v6 .cu-box-settings__toggle:hover .cu-box-settings__toggle-icon{fill:#abaeb0}.cu-box-settings .cu-dropdown_open .cu-box-settings__toggle .cu-box-settings__toggle-arrow{transform:rotate(180deg)}.cu-box-settings__toggle-icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:12px;margin-right:10px;fill:#292d34}.dark-theme .cu-box-settings__toggle-icon{fill:#d5d6d7}.cu2-views-bar_v6 .cu-box-settings__toggle-icon{margin-right:6px;fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-box-settings__toggle-icon{fill:#abaeb0}.cu-box-settings__toggle-arrow{transition:fill .2s cubic-bezier(.785,.135,.15,.86),transform .2s cubic-bezier(.785,.135,.15,.86);margin:2px 0 0 7px;width:6px;height:6px;fill:#292d34}.dark-theme .cu-box-settings__toggle-arrow{fill:#d5d6d7}.cu2-views-bar_v6 .cu-box-settings__toggle-arrow{fill:#53575e}.dark-theme .cu2-views-bar_v6 .cu-box-settings__toggle-arrow{fill:#abaeb0}.cu-box-settings__icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:20px;height:20px;padding:2px;fill:#bcc0c7;cursor:pointer}.dark-theme .cu-box-settings__icon{fill:#828588}.cu-box-settings__icon:hover,.cu-dropdown_open .cu-box-settings__icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-box-settings__icon:hover,.cu-dropdown_open .cu-box-settings__icon{fill:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),t})()},v7a3:function(t,e,i){"use strict";i.d(e,"D",function(){return S}),i.d(e,"B",function(){return T}),i.d(e,"v",function(){return C}),i.d(e,"r",function(){return D}),i.d(e,"x",function(){return I}),i.d(e,"w",function(){return P}),i.d(e,"a",function(){return M}),i.d(e,"l",function(){return O}),i.d(e,"t",function(){return $}),i.d(e,"o",function(){return L}),i.d(e,"C",function(){return E}),i.d(e,"g",function(){return N}),i.d(e,"f",function(){return A}),i.d(e,"z",function(){return V}),i.d(e,"j",function(){return z}),i.d(e,"i",function(){return F}),i.d(e,"u",function(){return B}),i.d(e,"c",function(){return R}),i.d(e,"b",function(){return U}),i.d(e,"k",function(){return G}),i.d(e,"A",function(){return H}),i.d(e,"q",function(){return X}),i.d(e,"y",function(){return Y}),i.d(e,"n",function(){return K}),i.d(e,"e",function(){return Z}),i.d(e,"s",function(){return J}),i.d(e,"d",function(){return Q}),i.d(e,"h",function(){return tt}),i.d(e,"m",function(){return et}),i.d(e,"p",function(){return it});var n=i("D1cy"),o=i("qJCC"),a=i("ILaC"),r=i("c3gm"),s=i("G5n0"),c=i("fywt"),l=i("UudT"),u=i("/1FC"),d=i("WOAq"),h=i("vJtL"),p=i("IzLi"),f=i("oYcn"),g=i("Muja"),m=i("Zss7"),v=i("5b//"),b=i("f0Wu"),_=i("MguC"),w=i("GXRk"),y=i("L5Tv"),k=i("0dWf"),x=i("nLWA");function S(t,e){for(const i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function T(t,e,i){return[...t].sort(function(t,e){const i="desc"===e?1:-1;return function(e,n){return"addTask"===e.kind||"addList"===e.kind||"addFolder"===e.kind?1:"addTask"===n.kind||"addList"===n.kind||"addFolder"===n.kind?-1:t===o.d.Assignees?e.assigneeOrder>n.assigneeOrder?1*i:-1*i:null==e[t]?1:null==n[t]?-1:t===o.d.StartDate||t===o.d.DueDate||t===o.d.DateCreated||t===o.d.DateUpdated||t===o.d.TimeLogged?parseInt(e[t],10)>parseInt(n[t],10)?1*i:-1*i:t===o.d.Index?parseFloat(e[t])>parseFloat(n[t])?1*i:-1*i:t===o.d.Priority?parseInt(e[t].orderindex,10)>parseInt(n[t].orderindex,10)?1*i:-1*i:t===o.d.Status?e[t].orderindex>n[t].orderindex?1*i:-1*i:e[t]>n[t]?1*i:-1*i}}(e,i))}function C(){const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let e="";for(let i=0;i<6;i++)e+=t[Math.floor(36*Math.random())];return e}function D(t){if(!t)return 0;"string"==typeof t&&(t=parseInt(t,10));const e=b(t);if(!e)return 0;let i=0;const o=e.hours(),a=e.minutes();return i+=o*n.k.hour,i+=a*n.k.minute,i}function I(t){return t.length?t.filter((t,e,i)=>i.findIndex(e=>e.id===t.id)===e):t}function P(t){return t.length?t.filter((t,e,i)=>i.findIndex(e=>e.source===t.source&&e.target===t.target)===e):t}function M(t,e){const i=[...t],n=t.map((t,i)=>{if(it(t.id)===it(e.id)||it(t.source)===it(e.source)&&it(t.target)===it(e.target))return i}).filter(t=>null!=t);for(let o=n.length-1;o>=0;o--)i.splice(n[o],1);return i}function O(t){let e=864e13,i=0,n=null,o=null;const a=b().add(10,"years").valueOf(),r=b().subtract(10,"years").valueOf();return t.forEach(t=>{"task"===t.type&&"originalStart"in t&&t.originalStart&&parseInt(t.originalStart,10)<e&&(parseInt(t.originalStart,10)<r&&(t.originalStart=r.toString()),e=parseInt(t.originalStart,10),n=t),"task"===t.type&&"originalEnd"in t&&t.originalEnd&&parseInt(t.originalEnd,10)>i&&(parseInt(t.originalEnd,10)>a&&(t.originalEnd=a.toString()),i=parseInt(t.originalEnd,10),o=t)}),{first:n,last:o}}function $(t,e=x.a,i=!1,n=!1,o=!1){if("string"==typeof t&&(t=parseInt(t,10)),0===t&&o)return"0 m";const a=36e5*(e=e||x.a),r=7*a,s=30*a;let c,l,u,d,h;t>=0||(t*=-1),n?c=t:(u=Math.floor(t/s),l=j("mo",u,""),c=t%s,d=Math.floor(c/r),l=j("w",d,l),c%=r,h=Math.floor(c/a),l=j("d",h,l),c%=a);const p=Math.floor(c/36e5);l=j("h",p,l||""),c%=36e5;const f=Math.round(c/6e4);return u||d||h||(l=60===f?j("h",p+1,""):j("m",f,l)),l||(i?0:"1m")}function j(t,e,i){return e&&(i+=`${e}${t} `),i}function L(t,e){const i={add:[],rem:[]};return e||(e=[]),t||(t=[]),t.forEach(t=>{-1===e.map(t=>t).indexOf(t)&&i.add.push(t)}),e.forEach(e=>{-1===t.map(t=>t).indexOf(e)&&i.rem.push(e)}),i}function E(t,e){return t.forEach(t=>{if("task"===t.kind&&(t.color=N(t,t.listColor,e)),"list"===t.kind){const i=A(t.status?t.status.color:null,e);t.color=i.color,t.progressColor=i.progressColor}}),t}function N(t,e,i){var a;switch(i){case o.a.Default:const i=t.isMilestone||t.custom_type===y.a.MILESTONE&&((null===(a=t.project)||void 0===a?void 0:a.milestones)||t.milestones),r=t.status&&(t.status.type===w.g.Closed||t.status.type===w.g.Done);return i?n.b.milestone:r?"#67cb48":n.b.task;case o.a.Priority:return t.priority?t.priority.color:"#fff";case o.a.Status:return t.status.color;case o.a.List:return e?Object(v.f)(e,.7):"#fff";default:return n.b.task}}function A(t,e){let i="",a="";switch(e){case o.a.List:i=t||"#fff",a=t?m(t).darken(5).toString():"#f2f2f2";break;default:i=n.b.list,a=n.b.listProgressColor}return{color:i,progressColor:a}}function V(t,e,i){const n=t.task.concat(t.list,t.folder,t.space);return e.forEach(t=>{t.open=!!n.includes(t.id),"task"===t.kind&&(i===o.b.Hour?(t.start_date=t.startDateHour,t.end_date=t.endDateHour):(t.start_date=t.start_date_original,t.end_date=t.end_date_original))}),e}function z(t,e){const i=b(t);return b(e).diff(i,"ms")}function F(t,e){const i=b(t).add(1,"second");return b(e).diff(i,"days")*n.k.day}function B(t){window.open(Object(k.c)({id:it(t.id),team:t.teamId,custom_id:t.customId}),"_blank")}function R(t,e,i){return t.valueOf()>e.valueOf()&&t.valueOf()<i.valueOf()}function U(t,e,i){if(!t)return!1;if(!e)return!0;const n=function t(e,i){return function(t,e,i){var n=Object(u.a)(t),o=n||Object(d.a)(t)||Object(f.a)(t);if(e=Object(c.a)(e,4),null==i){var g=t&&t.constructor;i=o?n?new g:[]:Object(p.a)(t)&&Object(h.a)(g)?Object(r.a)(Object(l.a)(t)):{}}return(o?a.a:s.a)(t,function(t,n,o){return e(i,t,n,o)}),i}(e,function(e,n,o){Object(g.a)(n,i[o])||(e[o]=Object(p.a)(n)&&Object(p.a)(i[o])?t(n,i[o]):n)})}(t,e);return!(i&&i.parent.type===_.e.Subcategory&&1===Object.keys(n).length&&n.openedItems&&n.openedItems.list&&n.openedItems.list.length<=1||i&&i.parent.type===_.e.Category&&1===Object.keys(n).length&&n.openedItems&&n.openedItems.folder&&n.openedItems.folder.length<=1||i&&i.parent.type===_.e.Project&&1===Object.keys(n).length&&n.openedItems&&n.openedItems.space&&n.openedItems.space.length<=1||Object(g.a)(t,e))}function G(t){return{viewSettings:{colorScheme:"type"===t.viewSettings.colorScheme?"default":t.viewSettings.colorScheme,criticalPath:t.viewSettings.criticalPath,criticalPathLimit:0,dateScale:"hour"===t.viewSettings.dateScaleType?o.b.Day:t.viewSettings.dateScaleType,hideWeekends:!t.viewSettings.useWeekends,rescheduleDependencies:t.viewSettings.rescheduleDependencies,allowWebsockets:!1,showSlackTime:!1,highlightTaskPositionOnDrag:!0,showPlannedListBars:!0},viewSettingsUser:{columnsVisible:t.viewSettingsUser?q(t.viewSettingsUser.columnsVisible):n.c,collapseSidebar:!!t.viewSettingsUser&&t.viewSettingsUser.collapseSidebar,sortValue:t.viewSettingsUser?(e=t.viewSettingsUser.sortValues,e.assignees?o.d.Assignees:e.date_created?o.d.DateCreated:e.date_updated?o.d.DateUpdated:e.due_date?o.d.DueDate:e.id?o.d.Id:e.name?o.d.Name:e.priority?o.d.Priority:e.start_date?o.d.StartDate:e.status?o.d.Status:e.time_estimate?o.d.TimeEstimate:e.time_logged?o.d.TimeLogged:o.d.Index):o.d.Index,sortDirection:t.viewSettingsUser?t.viewSettingsUser.sortDirection:"desc",sortOn:!!t.viewSettingsUser&&t.viewSettingsUser.sortOn},openedItems:{task:[],list:t.openedItems?W(t.openedItems.list):[],folder:t.openedItems?W(t.openedItems.project):[],space:t.openedItems?W(t.openedItems.space):[]}};var e}function H(t){return t.v2?(t.v2.viewSettings&&void 0===t.v2.viewSettings.showPlannedListBars&&(t.v2.viewSettings.showPlannedListBars=n.h.v2.viewSettings.showPlannedListBars),t):t}function W(t){const e=[];return t.forEach(t=>{e.push(t.split("_")[1])}),e}function q(t){const e=n.c;return t.assignees&&(e.assignees=!0),t.date_created&&(e.dateCreated=!0),t.date_updated&&(e.dateUpdated=!0),t.dueDate&&(e.end_date=!0),t.id&&(e.id=!0),t.priority&&(e.priority=!0),t.startDate&&(e.start_date=!0),t.status&&(e.statusName=!0),t.timeEstimate&&(e.timeEstimate=!0),t.timeLogged&&(e.timeLogged=!0),e}function X(t,e){const i=[],n=t.filter.filters;return n.length?(n.forEach(t=>{"EQ"===t.op&&t.values.forEach(t=>{i.push(t),"unstarted"===t.type&&i.push({type:"open"})})}),e&&i.push({type:"closed"}),i):[]}function Y(t,e){let i=!0;if(!t.length)return!1;for(let n=0;n<t.length;n++)if(t[n]===e.status||t[n].type===e.type||"custom"===e.type&&"active"===t[n].type){i=!1;break}return i}function K(t){return t?"month"===t[0].unit?o.b.Day:"week"===t[0].unit?o.b.Week:"year"===t[0].unit&&t[1]&&"month"===t[1].unit?o.b.Month:"year"===t[0].unit?o.b.Year:o.b.Week:o.b.Week}function Z(t,e){const i=e.assignees?e.assignees.length:0;let o=0;return 1===i&&(o=20),i>1&&(o=20+12*(i-1)+5),6*(e&&e.text?e.text.length:0)+o>e.duration*n.e.minColumnWidth[t]-20?"outside":"inside"}function J(t,e){if(!t||!e)return!1;const i=function(t,e){const i=b(e).add(1,"second"),n=b(t);return i.diff(n,"days")}(t,e);if(i>2)return!1;const n=b(t).day();return 6===n&&i<=2||0===n&&1===i}function Q(t,e,i,o){const a=t*i*.010416666666666666,r=.010416666666666666*(e*o+n.e.scaleHeight),s=n.g.reduce((t,e,i,n)=>i&&Math.abs(n[t].width-a)<Math.abs(e.width-a)?t:i,-1),c=n.g.reduce((t,e,i,n)=>i&&Math.abs(n[t].height-r)<Math.abs(e.height-r)?t:i,-1),l=[n.g[s],n.g[c]];let u=l[0];return l.forEach(t=>{t.width>u.width&&(u=t),t.height>u.height&&(u=t)}),u.size}function tt(t,e){const i=t.findIndex(t=>t.id===e.id);return-1!==i?0===i?t[1]&&0!==parseFloat(t[1].orderIndex)?parseFloat(t[1].orderIndex)-1:-1:i===t.length-1?parseFloat(t[i-1].orderIndex)+1:((parseFloat(t[i-1].orderIndex)?parseFloat(t[i-1].orderIndex):9999)+(parseFloat(t[i+1].orderIndex)?parseFloat(t[i+1].orderIndex):9999))/2:parseFloat(e.orderIndex)}function et(t){return"string"==typeof t&&(t=parseInt(t,10)),b(t).format(n.f)}function it(t){return t.includes("_")?t.split("_")[0]:t}},yLbY:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i("2Vo4"),o=i("fXoL");let a=(()=>{class t{constructor(){this.headerTemplate$=new n.a(null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"yN//":function(t,e,i){"use strict";i.d(e,"a",function(){return h});var n=i("ofXK"),o=i("LWF4"),a=i("e6ZX"),r=i("mcWp"),s=i("1M0N"),c=i("K0KF"),l=i("gb9A"),u=i("RKAz"),d=i("fXoL");let h=(()=>{class t{}return t.\u0275mod=d.Ub({type:t}),t.\u0275inj=d.Tb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,s.a,r.a,l.a,c.a,a.a,o.a,u.a]]}),t})()},yfGu:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("fXoL");let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=n.Rb({type:t,selectors:[["","cuCalendarMultiSelectCancelExclude",""]]}),t})()}}]);