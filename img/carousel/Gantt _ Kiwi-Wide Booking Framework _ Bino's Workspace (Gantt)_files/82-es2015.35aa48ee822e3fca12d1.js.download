(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{EumD:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var a=s("ofXK"),i=s("K0KF"),n=s("fXoL");let c=(()=>{class t{}return t.\u0275mod=n.Ub({type:t}),t.\u0275inj=n.Tb({factory:function(e){return new(e||t)},imports:[[a.c,i.a]]}),t})()},PFHR:function(t,e,s){"use strict";s.d(e,"a",function(){return h});var a=s("ofXK"),i=s("EDFS"),n=s("K0KF"),c=s("bFKe"),o=s("tyNb"),r=s("1M0N"),l=s("gb9A"),d=s("fTg4"),u=s("fXoL");let h=(()=>{class t{}return t.\u0275mod=u.Ub({type:t}),t.\u0275inj=u.Tb({factory:function(e){return new(e||t)},imports:[[a.c,i.d,n.a,c.b,o.l,r.a,l.a,d.a]]}),t})()},W5dp:function(t,e,s){"use strict";s.r(e),s.d(e,"ViewTaskModule",function(){return fb});var a=s("FZgu"),i=s("WESe"),n=s("jfNZ"),c=s("wGqn"),o=s("yHCF"),r=s("o59O"),l=s("ofXK"),d=s("3Pt+"),u=s("KyjD"),h=s("R0Ic"),m=s("fXoL"),b=s("tyNb"),k=s("JX/H"),p=s("4zIx"),g=s("L4xm"),v=s("cC1p"),f=s("wT7j"),_=s("jwRX"),y=s("EPTN"),w=s("RhU4"),T=s("y5jv"),C=s("RwZa"),S=s("xg+I"),I=s("dpfs"),$=s("V9dP"),D=s("iA4v"),O=s("b3J4"),j=s("Wk/N"),L=s("YAnr"),U=s("12P9"),M=s("Nn/B"),A=s("82+D"),E=s("o0vL"),F=s("MguC"),x=s("fFxs"),R=s("/qOb"),P=s("Hgwy"),z=function(t){return t.TASK="task",t.LIST="list-view",t.BOARD="board-view",t.CALENDAR="calendar-view",t.GANTT="gantt-view",t.FORM="form-view",t.DOC="doc",t.TIMELINE="timeline-view",t.TABLE="table-view",t.MINDMAP="mindmap-view",t.MAP="map-view",t}({}),N=s("uslN"),H=s("dTHz"),B=s("O5Dz");let q=(()=>{class t{transform(t,e){return t&&Object(B.b)(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Vb({name:"htmlEntities",type:t,pure:!0}),t})();var X=s("VhLi"),G=s("LLqd"),V=s("zfYP"),W=s("tjT+"),Q=s("MPcj"),Z=s("sWsJ"),K=s("LZr9");const J={taskBlockers:[],tasksBlocked:[]};function Y(t=J,e){switch(e.type){case K.f:return J;case K.i:{const s=e.payload,a=t.taskBlockers.slice(),i=a.findIndex(t=>t.id===s.id);return-1!==i&&(a[i]=Object.assign(Object.assign({},a[i]),s)),Object.assign(Object.assign({},t),{taskBlockers:a})}case K.e:{const{taskIdToRemove:s,isBlocker:a}=e.payload;if(a){const e=t.taskBlockers.filter(t=>t.id!==s);return Object.assign(Object.assign({},t),{taskBlockers:e})}{const e=t.tasksBlocked.filter(t=>t.id!==s);return Object.assign(Object.assign({},t),{tasksBlocked:e})}}case K.a:{const{selectedTask:s,showingBlockers:a}=e.payload;if(a){const e=[...t.taskBlockers.filter(t=>t.id!==s.id),s];return Object.assign(Object.assign({},t),{taskBlockers:e})}{const e=[...t.tasksBlocked.filter(t=>t.id!==s.id),s];return Object.assign(Object.assign({},t),{tasksBlocked:e})}}case K.c:{const{dependencies:s,task:a}=e.payload,i=s.filter(t=>t.depends_on&&t.task_id===a.id).map(t=>t.task||{id:t.depends_on}),n=s.filter(t=>t.depends_on===a.id).map(t=>t.task||{id:t.task_id});return Object.assign(Object.assign({},t),{taskBlockers:i,tasksBlocked:n})}default:return t}}var tt=s("l7P3"),et=s("Ll/8");const st=Object(tt.createFeatureSelector)("dependencies_task"),at=Object(tt.createSelector)(st,t=>t.taskBlockers),it=Object(tt.createSelector)(at,t=>t.filter(t=>!Object(et.k)(t.status)).length),nt=Object(tt.createSelector)(at,t=>t.filter(t=>Object(et.k)(t.status)).length),ct=(Object(tt.createSelector)(at,t=>t.filter(t=>Object(et.k)(t.status))),Object(tt.createSelector)(at,t=>t.filter(t=>!Object(et.k)(t.status))),Object(tt.createSelector)(st,t=>t.tasksBlocked)),ot=Object(tt.createSelector)(ct,t=>t.length);var rt=s("7G3y"),lt=s("PBBv"),dt=s("T1Rn"),ut=s("7jah"),ht=s("0mFS"),mt=s("PExn"),bt=s("lOnl"),kt=s("VQww"),pt=s("keZ5"),gt=s("Guvb"),vt=s("odWm"),ft=s("nyQc"),_t=s("wa4x"),yt=s("CgHv"),wt=s("FC7Q"),Tt=s("NCT3"),Ct=s("yR4P"),St=s("TqRa"),It=s("AQW5"),$t=s("0dWf"),Dt=s("jJQC"),Ot=s("D4hP"),jt=s("lU5h"),Lt=s("IX71"),Ut=s("GXRk"),Mt=s("o7Ov"),At=s("1eS8"),Et=s("bV87"),Ft=s("c3rA"),xt=s("RtrR"),Rt=s("Gj5t"),Pt=s("YwDF"),zt=s("+2Ly"),Nt=s("mrTC"),Ht=s("HEHP"),Bt=s("L5Tv"),qt=s("4F4K"),Xt=s("knwd"),Gt=s("OPNx"),Vt=s("vk5f"),Wt=s("eDEC"),Qt=s("I1n0");class Zt{constructor(t){this.taskId=t,this.type="[TASK DESCRIPTION HISTORY] Get description history"}}class Kt{constructor(t,e){this.taskId=t,this.payload=e,this.type="[TASK DESCRIPTION HISTORY] Fill description history"}}class Jt{constructor(){this.type="[TASK DESCRIPTION HISTORY] Clear description history"}}const Yt=Object(tt.createFeatureSelector)("tasks_description_history"),te=Object(tt.createSelector)(Yt,t=>t.descriptionHistory);var ee=s("2p4s"),se=s("9jGm"),ae=s("g6dt"),ie=s("Muja"),ne=s("lE2N"),ce=s("OeZu"),oe=s("gSGL"),re=s("1Lli"),le=s("/1FC"),de=s("f0Wu"),ue=s("itXk"),he=s("GyhO"),me=s("LRne"),be=s("XNiG"),ke=s("2Vo4"),pe=s("l5mm"),ge=s("EY2u"),ve=s("VRyK"),fe=s("PqYM"),_e=s("cp0P"),ye=s("lJxs"),we=s("pLZG"),Te=s("/uUt"),Ce=s("UXun"),Se=s("zp1y"),Ie=s("eIep"),$e=s("SxV6"),De=s("1G5W"),Oe=s("PZkE"),je=s("vkgz"),Le=s("Kj3r"),Ue=s("IzEk"),Me=s("zP0r"),Ae=s("Zy1z"),Ee=s("wO+i"),Fe=s("nYR2"),xe=s("lnp7"),Re=s("rZTY"),Pe=s("oWSB"),ze=s("jeBc"),Ne=s("8it8");let He=(()=>{class t{constructor(t){this.commonStringsService=t,this.defaultMinimizeTooltipText=$localize`:@@cu-manager-view-task__tooltip-msg_minimize-task:Minimize task`,this.deleteTaskNoPermissionText=$localize`:@@cu-manager-view-task__tooltip-msg_insufficient-perms-delete-task:You don't have permission to delete this task`,this.sharingEntityText=$localize`:used as input binding value for ViewPublicSharingBannerComponent@@common_task:Task`,this.minimizeTooltipText=this.defaultMinimizeTooltipText}changeMinimizeTooltipText(t="task"){this.minimizeTooltipText="task"===t?this.defaultMinimizeTooltipText:this.commonStringsService.removeFromTrayText}}return t.\u0275fac=function(e){return new(e||t)(m.nc(Ne.a))},t.\u0275prov=m.Sb({token:t,factory:t.\u0275fac}),t})();var Be=s("AeD3"),qe=s("gXbQ"),Xe=s("ILsm"),Ge=s("jJW4"),Ve=s("Jf2N"),We=s("paaC"),Qe=s("xog/"),Ze=s("76Cs"),Ke=s("jhN1"),Je=s("Tm/s"),Ye=s("U4Ha"),ts=s("G2WA"),es=s("CDR3"),ss=s("cCXi"),as=s("WwCI"),is=s("s1tu"),ns=s("Uo20"),cs=s("HBOB"),os=s("G/ZS"),rs=s("EDFS"),ls=s("3XJ7");let ds=(()=>{class t{constructor(t,e){this.popoverConfig=t,this.componentLoaderFactory=e}showPopover(t,e,s,a,i,n,c="cu-slash-command__tooltip"){this.popover=this.componentLoaderFactory.createLoader(t,e,n).provide({provide:rs.a,useValue:this.popoverConfig}).listen({triggers:"",outsideClick:!0,hide:()=>{this.hidePopover()}}).attach(rs.b).to("body").position({attachment:s}),this.popover.show({content:i,context:{command:a},placement:s,containerClass:c})}hidePopover(){this.popover&&(this.popover.dispose(),this.popover=null)}ngOnDestroy(){this.hidePopover()}}return t.\u0275fac=function(e){return new(e||t)(m.nc(rs.a),m.nc(ls.a))},t.\u0275prov=m.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var us=s("drq7"),hs=s("rLOZ"),ms=s("FXUF"),bs=s("Vdkl"),ks=s("5S2/"),ps=s("O3M5"),gs=s("5EAn"),vs=s("SBM/"),fs=s("ZlQq"),_s=s("X+O2"),ys=s("AirQ"),ws=s("6wVO"),Ts=s("hfeG"),Cs=s("oy6Y"),Ss=s("g1Eu"),Is=s("vSu3"),$s=s("yhnL"),Ds=s("0bNS"),Os=s("mpzy"),js=s("hUS4"),Ls=s("NsZK"),Us=s("N4ya"),Ms=s("/qmH"),As=s("xgIS"),Es=s("gcYM"),Fs=s("nIWy");let xs=(()=>{class t{constructor(t,e){this.zone=t,this.visibilityDetectorService=e,this.debounceTime=18e4,this.onChange=new m.o,this.destroy$=new be.a,this.lastVisible=!0,this.debounceChanges=new be.a,this.focused=!0,this.visible=!0}ngOnInit(){this.debounceChanges.pipe(Object(Le.a)(this.debounceTime),Object(De.a)(this.destroy$)).subscribe(t=>{this._setVisibility(!1)}),this.visibilityDetectorService.$onPageVisibilityChange.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.visible=t===Fs.b.VISIBLE,this._setVisibility(this.visible)}),this.zone.runOutsideAngular(()=>{Object(As.a)(window.document,"mousemove",{passive:!0}).pipe(Object(Es.a)(500),Object(De.a)(this.destroy$)).subscribe(t=>{this.mouseMove()}),Object(As.a)(window.document,"keydown",{passive:!0}).pipe(Object(Es.a)(100),Object(De.a)(this.destroy$)).subscribe(t=>{this.keyDown(t)}),Object(As.a)(window.document,"focus").pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.focused=!0,this._setVisibility(this.focused)}),Object(As.a)(window.document,"blur").pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.focused=!1,this._setVisibility(this.focused)})}),this._setVisibility(!0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}keyDown(t){this.focused&&this.visible&&this._setVisibility(!0)}mouseMove(){this.focused&&this.visible&&this._setVisibility(!0)}_setVisibility(t){t&&this.debounceChanges.next(!0),this.lastVisible!==t&&(this.lastVisible=t,this.onChange.emit(t))}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(m.B),m.Wb(Fs.a))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-visibility-detector"]],inputs:{debounceTime:"debounceTime"},outputs:{onChange:"onChange"},decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();var Rs=s("UdVN"),Ps=s("yECk");const zs=["searchInput"],Ns=["move"],Hs=["categoryListDropdownComponent"];let Bs=(()=>{class t{constructor(t,e,s,a){this.sharedData=t,this.viewTaskService=e,this.taskService=s,this.changeDetector=a,this.task$=new ke.a(null),this.destroy$=new be.a,this.moveTaskTooltipTxt=$localize`:@@cu-task-mover__tooltip-txt_move-task:Move task`,this.moveParentTaskTooltipTxt=$localize`:@@cu-task-mover__tooltip-txt_move-parent-task:Move parent task`,this.onOpen=new m.o,this.onClose=new m.o}ngOnInit(){this.task$=this.viewTaskService.task,this.viewTaskService.project.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.selectedProject=t,this.changeDetector.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}moveTask(t,e,s){this.taskService.move(this.task$.value,s,e,t.id,!0)}keydown(t){this.categoryListDropdownComponent.keydown(t)}select(t){this.moveTask(t.project,t.category,t.subcategory)}toggleMenu(){this.categoryListDropdownComponent.open()}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Ge.a),m.Wb(Ye.a),m.Wb(Ze.a),m.Wb(m.h))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-task-mover"]],viewQuery:function(t,e){if(1&t&&(m.jd(zs,3),m.jd(Ns,3),m.jd(Hs,3)),2&t){let t;m.Qc(t=m.rc())&&(e.searchInput=t.first),m.Qc(t=m.rc())&&(e.move=t.first),m.Qc(t=m.rc())&&(e.categoryListDropdownComponent=t.first)}},inputs:{isSubtask:"isSubtask"},outputs:{onOpen:"onOpen",onClose:"onClose"},decls:8,vars:12,consts:[[1,"task-mover__category-list",3,"selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","displaySearch","showTaskCount","onSelect","onOpen","onClose"],["categoryListDropdownComponent",""],[1,"task-mover"],[1,"task-mover__header"],["tooltipModifier","tooltip_left",1,"task-mover__toggle",3,"cuTooltip"],["icon","move-bold",1,"task-mover__move-icon"]],template:function(t,e){if(1&t&&(m.cc(0,"cu-category-list-dropdown",0,1),m.qc("onSelect",function(t){return e.select(t)})("onOpen",function(){return e.onOpen.emit()})("onClose",function(){return e.onClose.emit()}),m.vc(2,"async"),m.vc(3,"async"),m.cc(4,"div",2),m.cc(5,"div",3),m.cc(6,"div",4),m.Xb(7,"div",5),m.bc(),m.bc(),m.bc(),m.bc()),2&t){let t=null,s=null;m.Dc("selectableProject",!0)("defaultProject",e.selectedProject)("selectedCategory",null==(t=m.wc(2,8,e.task$))||null==t.category?null:t.category.id)("selectedSubcategory",null==(s=m.wc(3,10,e.task$))||null==s.subcategory?null:s.subcategory.id)("singleCategory",!1)("displaySearch",!1)("showTaskCount",!0),m.Ib(6),m.Dc("cuTooltip",e.isSubtask?e.moveParentTaskTooltipTxt:e.moveTaskTooltipTxt)}},directives:[Ps.a,Ls.a,Rs.a],pipes:[l.b],encapsulation:2,changeDetection:0}),t})(),qs=(()=>{class t{transform(t,e){return Object(Rt.fb)(t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Vb({name:"taskLocation",type:t,pure:!0}),t})();const Xs=["positionInput"];function Gs(t,e){1&t&&(m.cc(0,"span"),m.dd(1," > "),m.bc())}function Vs(t,e){1&t&&(m.cc(0,"span"),m.dd(1," > "),m.bc())}function Ws(t,e){if(1&t){const t=m.dc();m.cc(0,"a",16),m.qc("click",function(){return m.Uc(t),m.uc(3).goToDashboard()}),m.vc(1,"taskLocation"),m.dd(2),m.bc()}if(2&t){const t=m.uc(3);m.Ob("disabled",!t.otherListFolder||!(null!=t.otherListFolder&&null!=t.otherListFolder.permissions&&t.otherListFolder.permissions.can_read)),m.Dc("routerLink",m.xc(1,8,t.fakeTaskForRouterLink,"category"))("cuTooltip",null==t.otherListFolder?null:t.otherListFolder.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Jb("data-category",null==t.otherListFolder?null:t.otherListFolder.id),m.Ib(2),m.fd(" ",null==t.otherListFolder?null:t.otherListFolder.name," ")}}function Qs(t,e){1&t&&(m.cc(0,"span"),m.dd(1," > "),m.bc())}function Zs(t,e){if(1&t){const t=m.dc();m.cc(0,"a",16),m.qc("click",function(){return m.Uc(t),m.uc(3).goToDashboard()}),m.vc(1,"taskLocation"),m.dd(2),m.bc()}if(2&t){const t=m.uc(3);m.Dc("routerLink",m.xc(1,6,t.fakeTaskForRouterLink,"subcategory"))("cuTooltip",null==t.otherList?null:t.otherList.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Jb("data-subcategory",null==t.otherList?null:t.otherList.id),m.Ib(2),m.fd("",null==t.otherList?null:t.otherList.name," ")}}function Ks(t,e){if(1&t){const t=m.dc();m.cc(0,"div",15),m.cc(1,"a",16),m.qc("click",function(){return m.Uc(t),m.uc(2).goToDashboard()}),m.vc(2,"taskLocation"),m.dd(3),m.bc(),m.bd(4,Gs,2,0,"span",4),m.bd(5,Vs,2,0,"span",4),m.bd(6,Ws,3,11,"a",17),m.bd(7,Qs,2,0,"span",4),m.bd(8,Zs,3,9,"a",18),m.bc()}if(2&t){const t=m.uc(2);m.Ib(1),m.Ob("disabled",!t.otherListSpace||!(null!=t.otherListSpace&&null!=t.otherListSpace.permissions&&t.otherListSpace.permissions.can_read)),m.Dc("routerLink",m.xc(2,12,t.fakeTaskForRouterLink,"project"))("cuTooltip",null==t.otherListSpace?null:t.otherListSpace.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Ib(2),m.ed(null==t.otherListSpace?null:t.otherListSpace.name),m.Ib(1),m.Dc("ngIf",!t.overflowed),m.Ib(1),m.Dc("ngIf",t.otherListFolder&&!(null!=t.otherListFolder&&t.otherListFolder.hidden)&&!(null!=t.otherListFolder&&t.otherListFolder.archived)&&t.overflowed),m.Ib(1),m.Dc("ngIf",t.otherListFolder&&!(null!=t.otherListFolder&&t.otherListFolder.hidden)&&!(null!=t.otherListFolder&&t.otherListFolder.archived)),m.Ib(1),m.Dc("ngIf",t.otherListFolder&&!(null!=t.otherListFolder&&t.otherListFolder.hidden)&&!(null!=t.otherListFolder&&t.otherListFolder.archived)&&!t.overflowed),m.Ib(1),m.Dc("ngIf",!(null!=t.otherList&&t.otherList.archived||null!=t.otherListFolder&&t.otherListFolder.archived||t.overflowed))}}function Js(t,e){1&t&&m.Xb(0,"div",20)}function Ys(t,e){if(1&t){const t=m.dc();m.cc(0,"a",21),m.qc("click",function(){return m.Uc(t),m.uc(3).goToDashboard()}),m.vc(1,"taskLocation"),m.vc(2,"async"),m.vc(3,"taskLocation"),m.cc(4,"span",22),m.dd(5),m.bc(),m.bc()}if(2&t){const t=m.uc(2).ngIf,e=m.uc();m.Ob("breadcrumbs__link_disabled",e.otherList?!(null!=e.otherListSpace&&null!=e.otherListSpace.permissions&&e.otherListSpace.permissions.can_read):!1===(null==t||null==t.project?null:t.project.access)),m.Dc("routerLink",e.otherList?m.xc(3,12,e.fakeTaskForRouterLink,"project"):m.xc(1,7,m.wc(2,10,e.task$),"project")),m.Ib(4),m.Dc("cuTooltip",e.otherList?null==e.otherListSpace?null:e.otherListSpace.name:null==t||null==t.project?null:t.project.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Ib(1),m.ed(e.otherList?null==e.otherListSpace?null:e.otherListSpace.name:null==t||null==t.project?null:t.project.name)}}function ta(t,e){1&t&&m.Xb(0,"div",23)}function ea(t,e){if(1&t&&(m.ac(0),m.bd(1,Js,1,0,"div",5),m.bd(2,Ys,6,15,"a",19),m.bd(3,ta,1,0,"div",8),m.Zb()),2&t){const t=m.uc().ngIf,e=m.uc();m.Ib(1),m.Dc("ngIf",e.otherList?null==e.otherListSpace?null:e.otherListSpace.private:null==t||null==t.project?null:t.project.private),m.Ib(1),m.Dc("ngIf",!e.overflowed),m.Ib(1),m.Dc("ngIf",!e.otherList)}}function sa(t,e){1&t&&m.Xb(0,"div",20)}function aa(t,e){if(1&t){const t=m.dc();m.cc(0,"a",24),m.qc("click",function(){return m.Uc(t),m.uc(2).goToDashboard()}),m.vc(1,"taskLocation"),m.vc(2,"async"),m.vc(3,"taskLocation"),m.cc(4,"span",22),m.dd(5),m.bc(),m.bc()}if(2&t){const t=m.uc().ngIf,e=m.uc();m.Ob("breadcrumbs__link_disabled",e.otherList?!(null!=e.otherListFolder&&null!=e.otherListFolder.permissions&&e.otherListFolder.permissions.can_read):!1===(null==t||null==t.category?null:t.category.access)),m.Dc("routerLink",e.otherList?m.xc(3,13,e.fakeTaskForRouterLink,"category"):m.xc(1,8,m.wc(2,11,e.task$),"category")),m.Jb("data-category",e.otherList?null==e.otherListFolder?null:e.otherListFolder.id:null==t||null==t.category?null:t.category.id),m.Ib(4),m.Dc("cuTooltip",e.otherList?null==e.otherListFolder?null:e.otherListFolder.name:null==t||null==t.category?null:t.category.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Ib(1),m.ed(e.otherList?null==e.otherListFolder?null:e.otherListFolder.name:null==t||null==t.category?null:t.category.name)}}function ia(t,e){if(1&t&&(m.cc(0,"div",25),m.Xb(1,"div",26),m.cc(2,"span",22),m.dd(3),m.bc(),m.bc()),2&t){const t=m.uc().ngIf,e=m.uc();m.Ob("breadcrumbs__link_disabled",e.otherList?!(null!=e.otherListFolder&&null!=e.otherListFolder.permissions&&e.otherListFolder.permissions.can_read):!1===(null==t||null==t.category?null:t.category.access)),m.Jb("data-category",e.otherList?null==e.otherListFolder?null:e.otherListFolder.id:null==t||null==t.category?null:t.category.id),m.Ib(2),m.Dc("cuTooltip",e.otherList?null==e.otherListFolder?null:e.otherListFolder.name:null==t||null==t.category?null:t.category.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Ib(1),m.ed(e.otherList?null==e.otherListFolder?null:e.otherListFolder.name:null==t||null==t.category?null:t.category.name)}}function na(t,e){1&t&&m.Xb(0,"div",23)}function ca(t,e){1&t&&m.Xb(0,"div",20)}function oa(t,e){if(1&t){const t=m.dc();m.cc(0,"a",27),m.qc("click",function(){return m.Uc(t),m.uc(2).goToDashboard()}),m.vc(1,"taskLocation"),m.vc(2,"async"),m.vc(3,"taskLocation"),m.cc(4,"span",22),m.dd(5),m.bc(),m.bc()}if(2&t){const t=m.uc().ngIf,e=m.uc();m.Ob("breadcrumbs__link_disabled",!e.otherList&&!1===(null==t||null==t.subcategory?null:t.subcategory.access))("breadcrumbs__link_list-other-list",e.otherList),m.Dc("routerLink",e.otherList?m.xc(3,15,e.fakeTaskForRouterLink,"subcategory"):m.xc(1,10,m.wc(2,13,e.task$),"subcategory")),m.Jb("data-subcategory",e.otherList?null==e.otherList?null:e.otherList.id:null==t||null==t.subcategory?null:t.subcategory.id),m.Ib(4),m.Dc("cuTooltip",e.otherList?null==e.otherList?null:e.otherList.name:null==t||null==t.subcategory?null:t.subcategory.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Ib(1),m.ed(e.otherList?null==e.otherList?null:e.otherList.name:null==t||null==t.subcategory?null:t.subcategory.name)}}function ra(t,e){if(1&t&&(m.cc(0,"div",28),m.Xb(1,"div",26),m.cc(2,"span",22),m.dd(3),m.bc(),m.bc()),2&t){const t=m.uc().ngIf,e=m.uc();m.Ob("breadcrumbs__link_disabled",e.otherList?!(null!=e.otherList&&e.otherList.access):!1===(null==t||null==t.subcategory?null:t.subcategory.access)),m.Jb("data-subcategory",e.otherList?null==e.otherList?null:e.otherList.id:null==t||null==t.subcategory?null:t.subcategory.id),m.Ib(2),m.Dc("cuTooltip",e.otherList?null==e.otherList?null:e.otherList.name:null==t||null==t.subcategory?null:t.subcategory.name)("tooltipDisabledIfTextNotTruncated",!0)("tooltipModifier","tooltip_indent-on-bottom"),m.Ib(1),m.ed(e.otherList?null==e.otherList?null:e.otherList.name:null==t||null==t.subcategory?null:t.subcategory.name)}}const la=function(){return["bottom"]},da=function(t){return{"breadcrumbs-position__save-mark_saved":t}};function ua(t,e){if(1&t){const t=m.dc();m.cc(0,"div",29),m.cc(1,"input",30,31),m.qc("ngModelChange",function(){return m.Uc(t),m.uc(2).debounceSavePosition.next()}),m.bc(),m.cc(3,"div",32),m.cc(4,"div",33),m.Xb(5,"div",34),m.bc(),m.cc(6,"div",35),m.dd(7,"of"),m.bc(),m.cc(8,"div",36),m.dd(9),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc().ngIf,e=m.uc();m.Ib(1),m.Ec("max",null==t||null==t.position?null:t.position.total),m.Dc("disabled",!e.canMove)("ngModel",null==t?null:t.position.position)("tooltipPlacement",m.Gc(6,la)),m.Ib(3),m.Dc("ngClass",m.Hc(7,da,e.positionSaved)),m.Ib(5),m.ed(null==t||null==t.position?null:t.position.total)}}function ha(t,e){1&t&&(m.cc(0,"div",29),m.cc(1,"div",36),m.dd(2,"1 of 1"),m.bc(),m.bc())}function ma(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-mover",37),m.qc("onOpen",function(){return m.Uc(t),m.uc(2).forceExpand=!0})("onClose",function(){return m.Uc(t),m.uc(2).forceExpand=!1}),m.bc()}if(2&t){const t=m.uc().ngIf;m.Dc("isSubtask",!(null==t||!t.parent))}}function ba(t,e){if(1&t){const t=m.dc();m.cc(0,"div",38),m.qc("click",function(){m.Uc(t);const e=m.uc(2);return e.convertHomeList.emit(e.otherList)}),m.Xb(1,"div",39),m.bc()}}function ka(t,e){if(1&t){const t=m.dc();m.cc(0,"div",40),m.qc("click",function(){m.Uc(t);const e=m.uc(2);return e.removeFromList.emit(null==e.otherList?null:e.otherList.id)}),m.Xb(1,"div",41),m.bc()}2&t&&(m.Ib(1),m.Dc("icon","cu2-close-2"))}function pa(t,e){if(1&t&&(m.cc(0,"div",2),m.bd(1,Ks,9,15,"div",3),m.bd(2,ea,4,3,"ng-container",4),m.vc(3,"async"),m.bd(4,sa,1,0,"div",5),m.bd(5,aa,6,16,"a",6),m.bd(6,ia,4,7,"div",7),m.bd(7,na,1,0,"div",8),m.bd(8,ca,1,0,"div",5),m.bd(9,oa,6,18,"a",9),m.bd(10,ra,4,7,"div",10),m.bd(11,ua,10,9,"div",11),m.bd(12,ha,3,0,"div",11),m.bd(13,ma,1,1,"cu-task-mover",12),m.bd(14,ba,2,0,"div",13),m.bd(15,ka,2,1,"div",14),m.bc()),2&t){const t=e.ngIf,s=m.uc();m.Ob("collapsible",s.collapsible)("overflowed",s.overflowed)("main",s.isMain)("active",s.forceExpand),m.Ib(1),m.Dc("ngIf",s.otherList),m.Ib(1),m.Dc("ngIf",!m.wc(3,22,s.isGuestTeam$)),m.Ib(2),m.Dc("ngIf",s.otherList?null==s.otherListFolder?null:s.otherListFolder.private:null==t||null==t.category?null:t.category.private),m.Ib(1),m.Dc("ngIf",!(s.overflowed||(s.otherList?null!=s.otherListFolder&&s.otherListFolder.archived||null!=s.otherListFolder&&s.otherListFolder.hidden:null!=t&&null!=t.category&&t.category.archived||null!=t&&null!=t.category&&t.category.hidden))),m.Ib(1),m.Dc("ngIf",s.otherList?(null==s.otherListFolder?null:s.otherListFolder.archived)&&!(null!=s.otherListFolder&&s.otherListFolder.hidden):(null==t||null==t.category?null:t.category.archived)&&!(null!=t&&null!=t.category&&t.category.hidden)),m.Ib(1),m.Dc("ngIf",!(s.otherList||null!=t&&null!=t.category&&t.category.hidden)),m.Ib(1),m.Dc("ngIf",s.otherList?null==s.otherList?null:s.otherList.private:null==t||null==t.subcategory?null:t.subcategory.private),m.Ib(1),m.Dc("ngIf",s.otherList?!(null!=s.otherList&&s.otherList.archived||null!=s.otherListFolder&&s.otherListFolder.archived):!(null!=t&&null!=t.subcategory&&t.subcategory.archived||null!=t&&null!=t.category&&t.category.archived)),m.Ib(1),m.Dc("ngIf",s.otherList?(null==s.otherListFolder?null:s.otherListFolder.archived)||(null==s.otherList?null:s.otherList.archived):(null==t||null==t.category?null:t.category.archived)||(null==t||null==t.subcategory?null:t.subcategory.archived)),m.Ib(1),m.Dc("ngIf",(null==t||null==t.position?null:t.position.total)>1&&!(null!=t&&null!=t.category&&t.category.archived)&&!(null!=t&&null!=t.subcategory&&t.subcategory.archived)&&s.isMain),m.Ib(1),m.Dc("ngIf",1===(null==t||null==t.position?null:t.position.total)&&(!(null!=t&&null!=t.category&&t.category.archived)||!(null!=t&&null!=t.subcategory&&t.subcategory.archived))&&s.isMain),m.Ib(1),m.Dc("ngIf",s.showMover&&s.canMove&&!s.disconnected),m.Ib(1),m.Dc("ngIf",s.showRemoveFromList&&s.canMove),m.Ib(1),m.Dc("ngIf",s.showRemoveFromList&&s.canMove)}}function ga(t,e){1&t&&(m.cc(0,"div",2),m.Xb(1,"div",42),m.Xb(2,"div",23),m.Xb(3,"div",42),m.Xb(4,"div",23),m.Xb(5,"div",42),m.bc())}let va=(()=>{class t{constructor(t,e,s,a,i,n){this.viewTaskService=t,this.sharedTaskService=e,this.dataService=s,this.sharedData=a,this.store=i,this.changeDetectorRef=n,this.destroy$=new be.a,this.task$=new ke.a(null),this.debounceSavePosition=new be.a,this.positionSaved=!1,this.isGuestTeam$=this.store.select(Ft.isGuestTeam),this.otherListSpace=null,this.otherListFolder=null,this.fakeTaskForRouterLink=null,this.forceExpand=!1,this.canMove=!0,this.isMain=!1,this.overflowed=!1,this.removeFromList=new m.o,this.convertHomeList=new m.o}ngOnInit(){this.task$=this.viewTaskService.task,this.task$.pipe(Object(we.a)(t=>!(!t||!t.position)),Object(De.a)(this.destroy$)).subscribe(t=>this.initialPosition=t.position.position),this.debounceSavePosition.pipe(Object(Le.a)(1e3),Object(De.a)(this.destroy$)).subscribe(()=>this.changeTaskPosition()),this.otherList&&this.getOtherListInfo()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.changeTaskPosition()}goToDashboard(){this.sharedTaskService.closeTask()}updateTaskPosition(t){this.task$.value&&t&&t!==this.task$.value.position.position&&(t<1?t=1:t>this.task$.value.position.total&&(t=this.task$.value.position.total),this.task$.value.position.position=t,this.dataService.changeTaskPosition(this.task$.value.id,t).subscribe(()=>{this.positionSaved=!0,this.changeDetectorRef.markForCheck(),setTimeout(()=>{this.positionSaved=!1,this.changeDetectorRef.markForCheck()},1500)}))}getOtherListInfo(){this.store.pipe(Object(tt.select)(Object(Ft.getProjectById)(this.otherList.project_id,!0)),Object(we.a)(t=>!!t),Object(Se.a)(this.store.select(Ft.getTeam)),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{this.otherListSpace=t;const s=t.categories?t.categories.findIndex(t=>t.id===this.otherList.category):-1;-1!==s&&(this.otherListFolder=t.categories[s]),this.fakeTaskForRouterLink={team:e?e.id:null,project:t,category:this.otherListFolder?this.otherListFolder:null,subcategory:this.otherList}})}toggleMenu(){this.taskMover.toggleMenu()}select(t){this.taskMover.select(t)}changeTaskPosition(){if(!this.positionInput)return;const t=parseInt(this.positionInput.nativeElement.value,10);this.updateTaskPosition(t)}getDashboardView(){const t=this.sharedTaskService.backLink.length?this.sharedTaskService.backLink[0].url:"";return[this.sharedData.compatCurrentTeam.id,this.task$.value.project.id,"d",Object(Rt.v)(Object(Rt.S)(t),Object(Rt.v)(this.sharedData.defaultViewType,"l"))]}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Ye.a),m.Wb(ts.a),m.Wb(Be.a),m.Wb(Ge.a),m.Wb(tt.Store),m.Wb(m.h))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-task-breadcrumbs"]],viewQuery:function(t,e){if(1&t&&(m.jd(Xs,1),m.jd(Bs,1)),2&t){let t;m.Qc(t=m.rc())&&(e.positionInput=t.first),m.Qc(t=m.rc())&&(e.taskMover=t.first)}},inputs:{canMove:"canMove",otherList:"otherList",collapsible:"collapsible",showMover:"showMover",disconnected:"disconnected",showRemoveFromList:"showRemoveFromList",isMain:"isMain",overflowed:"overflowed"},outputs:{removeFromList:"removeFromList",convertHomeList:"convertHomeList"},decls:4,vars:4,consts:function(){let t,e,s;return t=$localize`:@@cu-task-breadcrumbs__tooltip-msg_make-list-home-list␟5024eb5280d5cebd269f62f768d1913ee06917a0␟7593890199721558778:Make this list the home list`,e=$localize`:@@cu-task-breadcrumbs__tooltip-msg_remove-from-list␟fb73d1d13f3ca90d2bf5f28c3fe35e294dd243fe␟169971196009870549:Remove from this List`,s=$localize`:@@cu-task-breadcrumbs__tooltip-msg_task-position␟0458c7229ef855b7c1a2b91dabffafd408785c24␟2160205742584681448:Set task position in this List`,[["class","breadcrumbs",3,"collapsible","overflowed","main","active",4,"ngIf","ngIfElse"],["loader",""],[1,"breadcrumbs"],["class","breadcrumbs__collapsible-tooltip",4,"ngIf"],[4,"ngIf"],["class","breadcrumbs__lock-icon","icon","lock5",4,"ngIf"],["class","breadcrumbs__link breadcrumbs__link_folder",3,"breadcrumbs__link_disabled","routerLink","click",4,"ngIf"],["class","breadcrumbs__archive",3,"breadcrumbs__link_disabled",4,"ngIf"],["class","breadcrumbs__angle-right","icon","cu2-angle-right",4,"ngIf"],["class","breadcrumbs__link breadcrumbs__link_last breadcrumbs__link_list",3,"breadcrumbs__link_disabled","routerLink","breadcrumbs__link_list-other-list","click",4,"ngIf"],["class","breadcrumbs__archive breadcrumbs__archive_last",3,"breadcrumbs__link_disabled",4,"ngIf"],["class","breadcrumbs-position",4,"ngIf"],[3,"isSubtask","onOpen","onClose",4,"ngIf"],["cuTooltip",t,"tooltipModifier","tooltip_left","class","breadcrumbs__convert-home-list",3,"click",4,"ngIf"],["cuTooltip",e,"tooltipModifier","tooltip_left","class","breadcrumbs__remove-from-list breadcrumbs__remove-from-list-rotate",3,"click",4,"ngIf"],[1,"breadcrumbs__collapsible-tooltip"],[3,"routerLink","cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipModifier","click"],[3,"disabled","routerLink","cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipModifier","click",4,"ngIf"],[3,"routerLink","cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipModifier","click",4,"ngIf"],["class","breadcrumbs__link breadcrumbs__link_first breadcrumbs__link_space",3,"breadcrumbs__link_disabled","routerLink","click",4,"ngIf"],["icon","lock5",1,"breadcrumbs__lock-icon"],[1,"breadcrumbs__link","breadcrumbs__link_first","breadcrumbs__link_space",3,"routerLink","click"],[3,"cuTooltip","tooltipDisabledIfTextNotTruncated","tooltipModifier"],["icon","cu2-angle-right",1,"breadcrumbs__angle-right"],[1,"breadcrumbs__link","breadcrumbs__link_folder",3,"routerLink","click"],[1,"breadcrumbs__archive"],["icon","archive",1,"breadcrumbs__archive-icon"],[1,"breadcrumbs__link","breadcrumbs__link_last","breadcrumbs__link_list",3,"routerLink","click"],[1,"breadcrumbs__archive","breadcrumbs__archive_last"],[1,"breadcrumbs-position"],["type","number","step","1","min","1","cuTooltip",s,1,"breadcrumbs-position__input",3,"disabled","max","ngModel","tooltipPlacement","ngModelChange"],["positionInput",""],[1,"breadcrumbs-position__info"],[1,"breadcrumbs-position__save-mark",3,"ngClass"],["icon","check"],[1,"breadcrumbs-position__text"],[1,"breadcrumbs-position__total"],[3,"isSubtask","onOpen","onClose"],["cuTooltip",t,"tooltipModifier","tooltip_left",1,"breadcrumbs__convert-home-list",3,"click"],["icon","cu3-home"],["cuTooltip",e,"tooltipModifier","tooltip_left",1,"breadcrumbs__remove-from-list","breadcrumbs__remove-from-list-rotate",3,"click"],[3,"icon"],[1,"breadcrumbs__placeholder","loading"]]},template:function(t,e){if(1&t&&(m.bd(0,pa,16,24,"div",0),m.vc(1,"async"),m.bd(2,ga,6,0,"ng-template",null,1,m.cd)),2&t){const t=m.Rc(3);m.Dc("ngIf",m.wc(1,2,e.task$))("ngIfElse",t)}},directives:[l.q,b.k,Ls.a,Rs.a,d.u,d.c,d.p,d.s,l.o,Bs],pipes:[l.b,qs],styles:["[_nghost-%COMP%] {\n        max-width: 100%;\n        min-width: 0;\n      }"],changeDetection:0}),t})();var fa=s("LdyQ"),_a=s("MJvn"),ya=s("n+1/"),wa=s("DiaY"),Ta=s("KbVY"),Ca=s("aitn"),Sa=s("peMq"),Ia=s("keUj"),$a=s("XaMR"),Da=s("Dvla");const Oa=["pop"];function ja(t,e){if(1&t&&m.Xb(0,"div",6),2&t){const t=m.uc();m.Ec("icon",t.integrationName)}}function La(t,e){1&t&&(m.cc(0,"div",7),m.Xb(1,"img",8),m.bc())}function Ua(t,e){if(1&t&&(m.cc(0,"div",9),m.dd(1),m.bc()),2&t){const t=m.uc();m.Ib(1),m.fd(" ",null==t.task?null:t.task.commit_counts[t.integrationName]," ")}}function Ma(t,e){if(1&t){const t=m.dc();m.cc(0,"div",10),m.qc("mouseenter",function(){return m.Uc(t),m.uc().setPopState("true")})("mouseleave",function(){return m.Uc(t),m.uc().checkPopState()}),m.cc(1,"div",11),m.dd(2),m.bc(),m.cc(3,"div",12),m.qc("click",function(e){return m.Uc(t),m.uc().changeText(e)}),m.Xb(4,"div",13),m.dd(5),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Ib(2),m.fd(" TASK ID: ",t.task.custom_id||"CU-"+t.task.id," "),m.Ib(1),m.Dc("cbContent",t.task.custom_id||"CU-"+t.task.id),m.Ib(2),m.fd(" ",t.copyText," ")}}let Aa=(()=>{class t{constructor(){this.copyText=$localize`:@@common_copy:Copy`,this.popState=!1}changeText(t){t.stopPropagation(),this.copyText=$localize`:@@common_copied:Copied!`,setTimeout(()=>{this.pop.hide(),this.copyText=$localize`:@@common_copy:Copy`},700)}setPopState(t){t?(this.popState=!0,this.pop.show()):(this.popState=!1,this.pop.hide())}checkPopState(){this.popState=!1,setTimeout(()=>{this.popState?this.pop.show():this.pop.hide()},100)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-git-info-icon"]],viewQuery:function(t,e){if(1&t&&m.jd(Oa,3),2&t){let t;m.Qc(t=m.rc())&&(e.pop=t.first)}},inputs:{task:"task",integrationName:"integrationName"},decls:7,vars:4,consts:[["placement","bottom",1,"git-info",3,"popover","mouseenter","mouseleave"],["pop","bs-popover"],["class","git-info__icon",3,"icon",4,"ngIf"],["class","git-info__icon icon",4,"ngIf"],["class","git-info__counter",4,"ngIf"],["gitInfoPopover",""],[1,"git-info__icon",3,"icon"],[1,"git-info__icon","icon"],["src","./assets/images/integrations/bitbucket-neutral.svg","width","100%","alt",""],[1,"git-info__counter"],[1,"cu-commit__copy-id",3,"mouseenter","mouseleave"],[1,"cu-commit__copy-id_content","first"],["ngxClipboard","",1,"cu-commit__copy-id_content","last",3,"cbContent","click"],["icon","copy-white",1,"cu-commit__copy-id_icon"]],template:function(t,e){if(1&t&&(m.cc(0,"div",0,1),m.qc("mouseenter",function(){return e.setPopState("true")})("mouseleave",function(){return e.checkPopState()}),m.bd(2,ja,1,1,"div",2),m.bd(3,La,2,0,"div",3),m.bd(4,Ua,2,1,"div",4),m.bc(),m.bd(5,Ma,6,3,"ng-template",null,5,m.cd)),2&t){const t=m.Rc(6);m.Dc("popover",t),m.Ib(2),m.Dc("ngIf","bitbucket"!==e.integrationName),m.Ib(1),m.Dc("ngIf","bitbucket"===e.integrationName),m.Ib(1),m.Dc("ngIf",(null==e.task?null:e.task.commit_counts)&&e.task.commit_counts[e.integrationName])}},directives:[rs.c,l.q,Rs.a,Da.a],encapsulation:2,changeDetection:0}),t})();var Ea=s("t7PA"),Fa=s("S//e"),xa=s("iRz7"),Ra=s("j2Cv"),Pa=s("Wbfg"),za=s("sEhK"),Na=s("ukJz"),Ha=s("PPkR"),Ba=s("BTFG");function qa(t,e){if(1&t){const t=m.dc();m.cc(0,"div",2),m.qc("click",function(){return m.Uc(t),m.uc().createZoomMeeting()}),m.tc(),m.cc(1,"svg",3),m.Xb(2,"path",4),m.Xb(3,"path",5),m.Xb(4,"path",6),m.bc(),m.bc()}}function Xa(t,e){1&t&&m.Xb(0,"cu-loader",7),2&t&&m.Dc("modifier","cu-zoom-button__loader")}let Ga=(()=>{class t{constructor(t){this.zoomService=t,this.taskId$=new ke.a(null),this.loading$=this.taskId$.pipe(Object(we.a)(t=>!!t),Object(Ie.a)(t=>this.zoomService.getLoadingState(t)))}ngOnInit(){}ngOnChanges(t){t.taskId&&this.taskId$.next(this.taskId)}createZoomMeeting(){this.zoomService.createZoomMeeting(this.taskId)}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(_s.a))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-zoom-button"]],hostAttrs:[1,"cu-zoom-button"],inputs:{taskId:"taskId"},features:[m.Gb],decls:4,vars:6,consts:function(){let t;return t=$localize`:@@cu-zoom-button__tooltip-msg_start-zoom-meeting␟923d8c765b4ce87452ed1e0cb74006b9790d6553␟2085463530050209631:Start a Zoom meeting`,[["class","cu-zoom-button__btn","cuTooltip",t,3,"click",4,"ngIf"],[3,"modifier",4,"ngIf"],["cuTooltip",t,1,"cu-zoom-button__btn",3,"click"],["viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M18 1c-.45 0-.895.017-1.336.052l-.077-.997a18.242 18.242 0 012.826 0l-.077.997C18.895 1.017 18.45 1 18 1zm-3.97.466c-.874.21-1.722.486-2.537.824l-.383-.924a17.861 17.861 0 012.687-.872l.232.972zm10.477.824a16.866 16.866 0 00-2.536-.824l.232-.972c.926.221 1.824.514 2.687.872l-.383.924zm4.534 2.783a17.055 17.055 0 00-2.158-1.57l.523-.853c.806.495 1.57 1.051 2.284 1.663l-.65.76zM9.117 3.503c-.76.467-1.482.992-2.158 1.57l-.65-.76A18.057 18.057 0 018.595 2.65l.523.853zm23.38 5.614a17.066 17.066 0 00-1.57-2.158l.76-.65a18.055 18.055 0 011.662 2.285l-.852.523zM5.073 6.959a17.057 17.057 0 00-1.57 2.158l-.853-.523A18.055 18.055 0 014.313 6.31l.76.65zM2.29 11.493a16.866 16.866 0 00-.824 2.536l-.972-.232c.221-.926.514-1.824.872-2.687l.924.383zm32.244 2.536a16.858 16.858 0 00-.824-2.536l.924-.383c.358.863.651 1.761.872 2.687l-.972.232zM35 18c0-.45-.017-.895-.052-1.336l.997-.077a18.208 18.208 0 010 2.826l-.997-.077c.035-.441.052-.886.052-1.336zM1.052 16.664a17.245 17.245 0 000 2.672l-.997.077a18.242 18.242 0 010-2.826l.997.077zm.414 5.307c.21.873.486 1.72.824 2.536l-.924.383a17.861 17.861 0 01-.872-2.687l.972-.232zm32.244 2.536c.338-.815.615-1.663.824-2.536l.972.232a17.869 17.869 0 01-.872 2.687l-.924-.383zM3.503 26.883c.467.76.992 1.482 1.57 2.158l-.76.65a18.058 18.058 0 01-1.663-2.285l.853-.523zm27.424 2.158a17.064 17.064 0 001.57-2.158l.852.523a18.055 18.055 0 01-1.661 2.284l-.76-.65zm-4.044 3.456c.76-.467 1.482-.992 2.158-1.57l.65.76a18.055 18.055 0 01-2.285 1.662l-.523-.852zM6.96 30.927a17.066 17.066 0 002.158 1.57l-.523.852a18.055 18.055 0 01-2.284-1.661l.65-.76zm4.534 2.783c.815.338 1.663.615 2.536.824l-.232.972a17.869 17.869 0 01-2.687-.872l.383-.924zm10.478.824a16.858 16.858 0 002.536-.824l.383.924c-.863.358-1.761.651-2.687.872l-.232-.972zm-5.307.414a17.21 17.21 0 002.672 0l.077.997a18.208 18.208 0 01-2.826 0l.077-.997z"],["d","M18.032 6.479c6.123 0 11.087 4.964 11.087 11.087 0 6.123-4.964 11.087-11.087 11.087-6.123 0-11.087-4.964-11.087-11.087 0-6.123 4.964-11.087 11.087-11.087z"],["d","M10.799 14.092v5.21a2.133 2.133 0 002.14 2.122h7.595c.216 0 .39-.174.39-.385v-5.21a2.133 2.133 0 00-2.141-2.122h-7.595a.388.388 0 00-.39.385zm10.608 2.033l3.135-2.29c.272-.226.484-.17.484.238v6.985c0 .465-.258.408-.484.24l-3.135-2.287v-2.886z","fill","#fff"],[3,"modifier"]]},template:function(t,e){1&t&&(m.bd(0,qa,5,0,"div",0),m.vc(1,"async"),m.bd(2,Xa,1,1,"cu-loader",1),m.vc(3,"async")),2&t&&(m.Dc("ngIf",!m.wc(1,2,e.loading$)),m.Ib(2),m.Dc("ngIf",m.wc(3,4,e.loading$)))},directives:[l.q,Ls.a,Ba.a],pipes:[l.b],styles:[".cu-zoom-button{display:flex;align-items:center;justify-content:center;width:34px;height:34px}.cu-zoom-button__btn{width:34px;height:34px;cursor:pointer;fill:#b9bec7}.contrast_high .cu-zoom-button__btn,.dark-theme .cu-zoom-button__btn{fill:#979797}.cu-zoom-button__btn:hover{fill:#4a8cff}.cu-zoom-button__btn svg{width:100%;height:100%}.cu-zoom-button__loader{padding:0}.cu-zoom-button__loader.cu-btn__spinner>div{background:#2d8cff}"],encapsulation:2,changeDetection:0}),t})();var Va=s("wL+j"),Wa=s("loh9"),Qa=s("zY2b"),Za=s("bNw/");function Ka(t,e){if(1&t){const t=m.dc();m.cc(0,"div",4),m.qc("click",function(){return m.Uc(t),m.uc().onClick.emit()}),m.Xb(1,"div",5),m.dd(2),m.vc(3,"async"),m.bc()}if(2&t){const t=m.uc();m.Ib(2),m.fd(" ",m.wc(3,1,t.taskBlockersLength$)," ")}}function Ja(t,e){if(1&t){const t=m.dc();m.cc(0,"div",6),m.qc("click",function(){return m.Uc(t),m.uc().onClick.emit()}),m.Xb(1,"div",5),m.dd(2),m.vc(3,"async"),m.bc()}if(2&t){const t=m.uc();m.Ib(2),m.fd(" ",m.wc(3,1,t.tasksBlockedLength$)," ")}}function Ya(t,e){if(1&t){const t=m.dc();m.cc(0,"div",7),m.qc("click",function(){return m.Uc(t),m.uc().onClick.emit()}),m.Xb(1,"div",8),m.dd(2),m.vc(3,"async"),m.bc()}if(2&t){const t=m.uc();m.Ib(2),m.fd(" ",m.wc(3,1,t.closedBlockersLength$)," ")}}let ti=(()=>{class t{constructor(t){this.store=t,this.onLoadDependencies=new m.o,this.onClick=new m.o,this.taskBlockersLength$=this.store.select(it),this.closedBlockersLength$=this.store.select(nt),this.tasksBlockedLength$=this.store.select(ot)}ngOnChanges(t){t.dependencies&&this.onLoadDependencies.emit({task:this.mainTask,dependencies:this.dependencies||[]})}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(tt.Store))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-task-blockers-counter"]],hostAttrs:[1,"cu-task-blockers-counter"],inputs:{dependencies:"dependencies",mainTask:"mainTask"},outputs:{onLoadDependencies:"onLoadDependencies",onClick:"onClick"},features:[m.Gb],decls:7,vars:9,consts:[[1,"cu-task-blockers-counter__body"],["class","cu-task-blockers-counter__item cu-task-blockers-counter__item_blockers",3,"click",4,"ngIf"],["class","cu-task-blockers-counter__item cu-task-blockers-counter__item_blocked",3,"click",4,"ngIf"],["class","cu-task-blockers-counter__item cu-task-blockers-counter__item_closed-blockers",3,"click",4,"ngIf"],[1,"cu-task-blockers-counter__item","cu-task-blockers-counter__item_blockers",3,"click"],["icon","dependency-waiting-2",1,"cu-task-blockers-counter__item-icon"],[1,"cu-task-blockers-counter__item","cu-task-blockers-counter__item_blocked",3,"click"],[1,"cu-task-blockers-counter__item","cu-task-blockers-counter__item_closed-blockers",3,"click"],["icon","check-round-edges",1,"cu-task-blockers-counter__item-icon","cu-task-blockers-counter__item-icon_closed-blockers"]],template:function(t,e){1&t&&(m.cc(0,"div",0),m.bd(1,Ka,4,3,"div",1),m.vc(2,"async"),m.bd(3,Ja,4,3,"div",2),m.vc(4,"async"),m.bd(5,Ya,4,3,"div",3),m.vc(6,"async"),m.bc()),2&t&&(m.Ib(1),m.Dc("ngIf",m.wc(2,3,e.taskBlockersLength$)),m.Ib(2),m.Dc("ngIf",m.wc(4,5,e.tasksBlockedLength$)),m.Ib(2),m.Dc("ngIf",m.wc(6,7,e.closedBlockersLength$)))},directives:[l.q,Rs.a],pipes:[l.b],styles:[".cu-task-blockers-counter{min-width:0;width:100%}.cu-task-blockers-counter__body{flex-wrap:wrap;cursor:default;display:flex;align-items:center;padding-left:30px;padding-right:20px;margin-top:20px}.cu-task-blockers-counter__item{display:inline-flex;align-items:center;height:16px;cursor:pointer;border-radius:8px;padding:3px 8px 3px 3px;font:500 9px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff}.cu-task-blockers-counter__item_blockers{background:#ffc800}.cu-task-blockers-counter__item_blocked{background:#eb5c51}.cu-task-blockers-counter__item_closed-blockers{background:#7dc560}.cu-task-blockers-counter__item+.cu-task-blockers-counter__item{margin-left:8px}.cu-task-blockers-counter__item-icon{width:10px;height:10px;margin-right:5px;fill:#fff}.cu-task-blockers-counter__item-icon_closed-blockers{border-radius:50%;background:#fff;fill:#7dc560;padding:2px}"],encapsulation:2,changeDetection:0}),t})();var ei=s("KQLT"),si=s("Llk8"),ai=s("ihCf"),ii=s("t6Eg"),ni=s("SjmV"),ci=s("m2rH"),oi=s("3UWI"),ri=s("hITm"),li=s("5+WD"),di=s("eKZ6"),ui=s("42vj"),hi=s("NQa4"),mi=s("O5gs"),bi=s("sf8M"),ki=s("2LxF"),pi=s("uDQY"),gi=s("0aO/"),vi=s("aIzb"),fi=s("ES2d"),_i=s("IlGD"),yi=s("ejAw"),wi=s("JWXO"),Ti=s("cM5a"),Ci=s("hpI0"),Si=s("mjQy"),Ii=s("5Eri"),$i=s("sl2P"),Di=s("ENHh"),Oi=s("l79I"),ji=s("kykW");const Li=["timeEstimate"],Ui=["status"],Mi=["statusContainer"],Ai=["dueDateView"],Ei=["startDateView"],Fi=["dueDateContainer"],xi=["startDateContainer"],Ri=["moveSubtaskModal"],Pi=["menuTrigger"],zi=["copyModal"],Ni=["convertSub"],Hi=["datePicker"],Bi=["confirmMergeSubtaskModal"],qi=["editorContainer"],Xi=["menuContainer"],Gi=["cu-subtask",""];function Vi(t,e){if(1&t){const t=m.dc();m.cc(0,"div",40),m.qc("click",function(e){return m.Uc(t),m.uc().toggleSelected(e)}),m.vc(1,"async"),m.Xb(2,"div",41),m.bc()}if(2&t){const t=m.uc();m.Ob("lv-task__toggle--selected",m.wc(1,2,t.isSelected$))}}function Wi(t,e){if(1&t){const t=m.dc();m.cc(0,"div",42),m.qc("click",function(){m.Uc(t);const e=m.uc();return e.toggleStatus(e.subtask)}),m.bc()}if(2&t){const t=m.uc();m.Ob("task-todo-item__toggle_disabled",t.isSharingApp)}}function Qi(t,e){if(1&t){const t=m.dc();m.cc(0,"div",43),m.qc("click",function(){return m.Uc(t),m.uc().toggleSubtasks()}),m.Xb(1,"div",44),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.Ob("cu-subtask__arrow-icon_expanded",t.subtasksOpenMap&&t.subtasksOpenMap[t.subtask.id]&&((null==t.subtaskList?null:t.subtaskList.length)||t.pendingSubtasks&&(null==t.pendingSubtasks[t.subtask.id]?null:t.pendingSubtasks[t.subtask.id].length)))}}function Zi(t,e){}const Ki=function(t){return{color:t}};function Ji(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-status-list-dropdown",45),m.qc("onChange",function(e){return m.Uc(t),m.uc().changeStatus(e)})("onOpen",function(){return m.Uc(t),m.uc().addHoverClass()})("onClose",function(){return m.Uc(t),m.uc().removeHoverClass()}),m.vc(1,"async"),m.Xb(2,"div",46,47),m.vc(4,"isColorDarkerThan"),m.vc(5,"lowercase"),m.bd(6,Zi,0,0,"ng-template",null,48,m.cd),m.bc()}if(2&t){const t=m.uc();m.Ob("task-todo-item__custom-type",!(null==t.subtask||!t.subtask.custom_type)),m.Dc("ngClass",t.inList?"lv-subtask__list-status-container lv-subtask__container":"task-todo-item__status-container")("disabled",t.disabled||!t.subtask||!m.wc(1,11,t.canChangeAssigneeAndStatus$))("status",null==t.subtask?null:t.subtask.status)("statuses",t.statuses),m.Ib(2),m.Ob("lv-subtask__list-status_light",!m.xc(4,13,null==t.subtask||null==t.subtask.status?null:t.subtask.status.color,.86)),m.Dc("ngClass",t.inList?"lv-subtask__list-status":"task-todo-item__status")("ngStyle",m.Hc(18,Ki,null==t.subtask||null==t.subtask.status?null:t.subtask.status.color))("cuTooltip",null!=t.subtask&&null!=t.subtask.status&&t.subtask.status.type&&m.wc(5,16,null==t.subtask||null==t.subtask.status?null:t.subtask.status.type)!=t.StatusTypes.Open?t.subtask.status.status:"")}}const Yi=function(){return[]};function tn(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-user-and-groups-list-dropdown",49),m.qc("onOpen",function(){return m.Uc(t),m.uc().userDropdownOpened()})("onClose",function(){return m.Uc(t),m.uc().userDropdownClosed()})("onChange",function(e){return m.Uc(t),m.uc().setAssignees(e)})("onUserGroupsChanged",function(e){return m.Uc(t),m.uc().setGroupAssignees(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.Xb(4,"cu-user-group",50),m.vc(5,"async"),m.bc()}if(2&t){const t=m.uc();m.Dc("disabled",t.disabled||!t.subtask||!m.wc(1,16,t.canChangeAssigneeAndStatus$)||2!==(null==t.task||null==t.task.permissions?null:t.task.permissions.change_assignee))("multiChoice",null==t.project$.value?null:t.project$.value.multiple_assignees)("selectedUsers",t.subtask.assignees)("enableFirstSelection",!0)("weights",m.wc(2,18,t.weights$))("weightType",t.UserWeightType.ASSIGN)("users",m.wc(3,20,t.taskUsers$))("userGroups",t.userGroups)("task",t.task)("subcategory",null==t.task?null:t.task.subcategory)("selectedUserGroups",t.subtask.group_assignees),m.Ib(4),m.Dc("readOnly",!m.wc(5,22,t.canChangeAssigneeAndStatus$))("modifier","cu-user-group_sm cu-user-group_left")("avatarSize",24)("users",t.subtask.assignees||m.Gc(24,Yi))("userGroups",t.subtask.group_assignees||m.Gc(25,Yi))}}function en(t,e){1&t&&m.Xb(0,"div",51),2&t&&m.Dc("icon","archive2")}function sn(t,e){if(1&t){const t=m.dc();m.cc(0,"div",52),m.qc("click",function(){return m.Uc(t),m.uc().openDependencyModal()}),m.bc()}if(2&t){const t=m.uc();m.Ob("no-permission",!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.add_dependencies)),m.Dc("icon","blocker")}}function an(t,e){if(1&t){const t=m.dc();m.cc(0,"div",53),m.qc("click",function(){return m.Uc(t),m.uc().openDependencyModal()}),m.bc()}if(2&t){const t=m.uc();m.Ob("no-permission",!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.add_dependencies)),m.Dc("icon","blocked")}}function nn(t,e){if(1&t){const t=m.dc();m.cc(0,"a",54),m.qc("click",function(e){m.Uc(t);const s=m.uc();return s.openTask(s.subtask,e)}),m.vc(1,"async"),m.vc(2,"linkify"),m.bc()}if(2&t){const t=m.uc();m.Ob("task-todo-item__custom-text",!(null==t.subtask||!t.subtask.custom_type)),m.Dc("cuLink",t.disabled?null:m.wc(1,4,t.taskLinkSegments$))("innerHTML",m.wc(2,6,null==t.subtask?null:t.subtask.name),m.Vc)}}function cn(t,e){if(1&t&&(m.Xb(0,"a",55),m.vc(1,"async"),m.vc(2,"linkify")),2&t){const t=m.uc();m.Ob("task-todo-item__custom-text",!(null==t.subtask||!t.subtask.custom_type)),m.Dc("routerLink",m.wc(1,4,t.taskLinkSegments$))("innerHTML",m.wc(2,6,null==t.subtask?null:t.subtask.name),m.Vc)}}function on(t,e){if(1&t){const t=m.dc();m.cc(0,"div",56),m.qc("click",function(){return m.Uc(t),m.uc().rename()}),m.tc(),m.cc(1,"svg",57),m.Xb(2,"path",58),m.bc(),m.bc()}}function rn(t,e){if(1&t){const t=m.dc();m.cc(0,"div",59),m.cc(1,"div",60,61),m.cc(3,"div",62),m.qc("click",function(e){return m.Uc(t),m.uc().showMenu(e)}),m.bc(),m.bc(),m.Xb(4,"div",null,63),m.bc()}2&t&&(m.Ib(3),m.Dc("icon","ellipsis"))}function ln(t,e){1&t&&m.Xb(0,"div",64)}function dn(t,e){if(1&t&&m.Xb(0,"div",65),2&t){const t=m.uc();m.Dc("icon","small"==t.subtask.content_size?"text-s":"medium"==t.subtask.content_size?"text-m":"long"==t.subtask.content_size?"text-l":null)}}const un=function(t){return{subtask__priorities_empty:t}};function hn(t,e){if(1&t){const t=m.dc();m.cc(0,"div",66),m.cc(1,"cu-priority-list-dropdown",67),m.qc("onChange",function(e){m.Uc(t);const s=m.uc();return s.setPriority(s.subtask,e)})("onOpen",function(){return m.Uc(t),m.uc().priorityListOpened()})("onClose",function(){return m.Uc(t),m.uc().priorityListClosed()})("prioritiesClicked",function(){return m.Uc(t),m.uc().priorityListClicked()}),m.Xb(2,"cu-priorities-view",68),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Dc("ngClass",m.Hc(6,un,!(null!=t.subtask&&t.subtask.priority))),m.Ib(1),m.Dc("disabled",!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.change_priority))("prioritySelected",t.subtask.priority),m.Ib(1),m.Dc("hideIfEmpty",t.hideIfEmptyPriority)("priority",t.subtask.priority)("readOnly",!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.change_priority))}}function mn(t,e){}const bn=function(t){return{width:t}},kn=function(t){return{"due-date_subtask-view_empty":t}},pn=function(t,e){return{field:"startDate",label:t,prefix:e}};function gn(t,e){if(1&t&&(m.cc(0,"div",69),m.bd(1,mn,0,0,"ng-template",70),m.bc()),2&t){const t=m.uc(),e=m.Rc(52);m.Dc("ngStyle",m.Hc(4,bn,null!=t.subtask&&t.subtask.start_date?"":"0"))("ngClass",m.Hc(6,kn,!(null!=t.subtask&&t.subtask.start_date))),m.Ib(1),m.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",m.Ic(8,pn,t.commonStringsService.startDateText,null!=t.subtask&&t.subtask.due_date?null:"starts"))}}function vn(t,e){}const fn=function(t){return{field:"dueDate",label:t}};function _n(t,e){if(1&t&&(m.cc(0,"div",71),m.bd(1,vn,0,0,"ng-template",70),m.bc()),2&t){const t=m.uc(),e=m.Rc(52);m.Dc("ngStyle",m.Hc(4,bn,null!=t.subtask&&t.subtask.due_date?"":"0"))("ngClass",m.Hc(6,kn,!(null!=t.subtask&&t.subtask.due_date))),m.Ib(1),m.Dc("ngTemplateOutlet",e)("ngTemplateOutletContext",m.Hc(8,fn,t.commonStringsService.dueDateText))}}const yn=function(t){return{margin:t}};function wn(t,e){if(1&t){const t=m.dc();m.cc(0,"div",72),m.cc(1,"cu-task-time-estimates",73,74),m.qc("onOpen",function(){return m.Uc(t),m.uc().updateHoverState(!0)})("onClose",function(){return m.Uc(t),m.uc().updateHoverState(!1)})("onTimeEstimateAction",function(e){return m.Uc(t),m.uc().onTimeEstimateAction.emit(e)}),m.vc(3,"async"),m.vc(4,"async"),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Dc("ngStyle",m.Hc(13,yn,null!=t.subtask&&t.subtask.time_estimate_string?"":"0")),m.Ib(1),m.Dc("permissions",null==t.task?null:t.task.permissions)("task",t.subtask)("modifier","time-estimates-view__hide")("team",m.wc(3,9,t.sharedData.compatCurrentTeam$))("header",!1)("rollup",null==t.rollups?null:t.rollups.estimates)("user",m.wc(4,11,t.sharedData.currentUser))("timeEstimateData",t.timeEstimateData)}}function Tn(t,e){1&t&&m.Xb(0,"div",79)}function Cn(t,e){if(1&t&&(m.cc(0,"div",75),m.cc(1,"div",76),m.bd(2,Tn,1,0,"div",77),m.Xb(3,"div",78),m.dd(4),m.bc(),m.bc()),2&t){const t=m.uc();m.Ib(2),m.Dc("ngIf",t.subtask.assigned_checklist_items>0),m.Ib(2),m.gd(" ",null==t.subtask||null==t.subtask.checklist_counts?null:t.subtask.checklist_counts.resolved,"/",(null==t.subtask||null==t.subtask.checklist_counts?null:t.subtask.checklist_counts.resolved)+(null==t.subtask||null==t.subtask.checklist_counts?null:t.subtask.checklist_counts.unresolved)," ")}}function Sn(t,e){if(1&t){const t=m.dc();m.cc(0,"div",80),m.cc(1,"cu-tags-list",81),m.qc("onOpen",function(){return m.Uc(t),m.uc().onLazyLoad.emit({source:"tags"})})("onPage",function(e){return m.Uc(t),m.uc().loadTags(e)})("onChange",function(e){return m.Uc(t),m.uc().addTag(e)})("onDelete",function(e){return m.Uc(t),m.uc().removeTag(e)})("onDeleteFromSpace",function(e){return m.Uc(t),m.uc().deleteTagFromSpace(e)})("onRename",function(e){return m.Uc(t),m.uc().renameTag(e)})("onColorChange",function(e){return m.Uc(t),m.uc().colorChange(e)}),m.vc(2,"async"),m.cc(3,"cu-tags-view",82),m.qc("onDelete",function(e){return m.Uc(t),m.uc().removeTag(e)})("onRename",function(e){return m.Uc(t),m.uc().renameTag(e)})("onDeleteFromSpace",function(e){return m.Uc(t),m.uc().deleteTagFromSpace(e)})("onColorChange",function(e){return m.Uc(t),m.uc().colorChange(e)}),m.vc(4,"async"),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null,s=null;m.Dc("ngClass",null!=t.subtask&&null!=t.subtask.tags&&t.subtask.tags.length?"multi-list":"")("ngStyle",m.Hc(34,bn,null!=t.subtask&&null!=t.subtask.tags&&t.subtask.tags.length?"":"0px")),m.Ib(1),m.Dc("tags",t.tags)("tagsLoadingMap",t.tagsLoadingMap)("taskTags",null==t.subtask?null:t.subtask.tags)("dropdown-disabled",t.disabled||!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.add_tags))("taskId",t.subtask.id)("spaceId",null==(e=m.wc(2,30,t.project$))?null:e.id)("canDelete",t.canDeletePermission)("canManageTag",null==t.task||null==t.task.permissions?null:t.task.permissions.manage_tags)("onlyDeleteIfOwner",t.onlyDeleteIfOwner)("userId",t.userId)("spaceAccess",null==t.task||null==t.task.permissions?null:t.task.permissions.manage_tags)("readonly",!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.manage_tags)),m.Ib(2),m.Dc("tags",t.subtask.tags)("availableTags",t.tags)("hideIfEmpty",t.hideIfEmptyTags&&!(null!=t.subtask&&null!=t.subtask.tags&&t.subtask.tags.length))("truncate",!0)("showTags",2)("modifier","list-view")("readOnly",!(null!=t.task&&null!=t.task.permissions&&t.task.permissions.remove_tags))("canAddTag",null==t.task||null==t.task.permissions?null:t.task.permissions.add_tags)("canRemoveTag",null==t.task||null==t.task.permissions?null:t.task.permissions.remove_tags)("canManageTag",null==t.task||null==t.task.permissions?null:t.task.permissions.manage_tags)("spaceAccess",(null==t.task||null==t.task.permissions?null:t.task.permissions.manage_tags)||!1)("spaceId",null==(s=m.wc(4,32,t.project$))?null:s.id)("canDelete",t.canDeletePermission)("onlyDeleteIfOwner",t.onlyDeleteIfOwner)("userId",t.userId)("preventBadgeClick",!0)}}function In(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-row-assigned-comments",83),m.qc("onChange",function(e){return m.Uc(t),m.uc().assignedCommentsChange(e)}),m.bc()}if(2&t){const t=m.uc();m.Dc("task",t.subtask)("disabled",t.disabled)}}const $n=function(){return["30"]};function Dn(t,e){if(1&t&&(m.cc(0,"div",90),m.dd(1),m.vc(2,"truncate"),m.bc()),2&t){const t=m.uc().$implicit;m.Ib(1),m.fd(" ",m.xc(2,1,null==t?null:t.id,m.Gc(4,$n))," ")}}const On=function(t,e){return{"task-todo-item_done":t,"task-todo-item_pending":e}},jn=function(){return{m:!0}},Ln=function(t,e,s,a,i,n){return{parent:t,subtask_parent:e,project:s,category:a,subcategory:i,assignees:n}};function Un(t,e){if(1&t){const t=m.dc();m.cc(0,"div",87,88),m.qc("onCreateTask",function(e){return m.Uc(t),m.uc(2).onCreateTask.emit(e)})("onRenaming",function(e){return m.Uc(t),m.uc(2).onRenaming.emit(e)})("onTimeEstimateAction",function(e){return m.Uc(t),m.uc(2).onTimeEstimateAction.emit(e)})("hoverKeyDown",function(e){return m.Uc(t),m.Rc(1).toggleMe(e)})("onDragMoved",function(e){return m.Uc(t),m.uc(2).dragMoved(e)})("cdkDragMoved",function(e){return m.Uc(t),m.uc(2).dragMoved(e)})("cdkDragStarted",function(e){return m.Uc(t),m.uc(2).onDragStarted.emit(e)})("cdkDragEnded",function(e){return m.Uc(t),m.uc(2).onDragEnded.emit(e)})("onDragStarted",function(e){return m.Uc(t),m.uc(2).onDragStarted.emit(e)})("onDragEnded",function(e){return m.Uc(t),m.uc(2).onDragEnded.emit(e)})("onDrop",function(e){return m.Uc(t),m.uc(2).onDrop.emit(e)})("onShowCreateTask",function(e){return m.Uc(t),m.uc(2).onShowCreateTask.emit(e)})("onHideCreateTask",function(e){return m.Uc(t),m.uc(2).onHideCreateTask.emit(e)})("openStatusSettings",function(e){return m.Uc(t),m.uc(2).onStatusSettings.emit(e)})("onIndent",function(e){return m.Uc(t),m.uc(2).onIndent.emit(e)})("onReloadTask",function(){return m.Uc(t),m.uc(2).onReloadTask.emit()})("onToggleSubtask",function(e){return m.Uc(t),m.uc(2).onToggleSubtask.emit(e)}),m.bd(2,Dn,3,5,"div",89),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(2);m.Dc("cdkDragDisabled",s.cdkDragDisabled)("cuDragScrollContainer",s.cuDragScrollContainer)("cuDragMarginTop",200)("cdkDragData",t)("users",s.users)("weights",s.weights)("cu-subtask",t)("createTaskMap",s.createTaskMap)("subtasksOpenMap",s.subtasksOpenMap)("isCompleted",s.isCompleted)("completedCounter",s.completedCounter)("moveSubtasks",s.moveSubtasks)("rollups",s.rollups)("sortBy",s.sortBy)("showArchived",s.showArchived)("subtaskList",t.subtasks)("pendingSubtasks",s.pendingSubtasks)("userGroups",s.userGroups)("listAccess",s.listAccess)("multiTaskEnabled",s.multiTaskEnabled)("timeEstimatesDataMap",s.timeEstimatesDataMap)("timeEstimateData",s.timeEstimatesDataMap[t.id])("openStatus",s.openStatus)("closedStatus",s.closedStatus)("statuses",s.statuses)("task",s.task)("tags",s.tags)("tagsLoadingMap",s.tagsLoadingMap)("isSimpleStatus",null==s.task?null:s.task.simple_statuses)("ngClass",m.Ic(41,On,(null==t.status?null:t.status.type)===s.StatusTypes.Closed,"pending"==t.type))("canDeletePermission",s.canDelete)("onlyDeleteIfOwner",s.onlyDeleteIfOwner)("userId",s.userId)("canDelete",s.canDelete)("disabled","pending"==t.type)("cuHoverKeyDown",m.Gc(44,jn))("defaultTaskData",m.Mc(45,Ln,null==s.defaultTaskData?null:s.defaultTaskData.parent,null==t?null:t.id,s.projectExt,s.defaultTaskData.category,null==s.defaultTaskData?null:s.defaultTaskData.subcategory,s.defaultAssignees))("@row",void 0),m.Jb("id","subtask-"+(null==t?null:t.id))("data-id",null==t?null:t.id)("data-orderindex",t.orderindex)}}function Mn(t,e){1&t&&m.Xb(0,"div",91),2&t&&m.Dc("cu-subtask",e.$implicit)("isSimpleStatus",!1)("disabled",!0)}function An(t,e){if(1&t){const t=m.dc();m.cc(0,"div",84),m.qc("cdkDropListDropped",function(e){return m.Uc(t),m.uc().onDrop.emit(e)}),m.bd(1,Un,3,52,"div",85),m.bd(2,Mn,1,3,"div",86),m.bc()}if(2&t){const t=m.uc();m.Dc("cdkDropListDisabled",t.isCompleted&&!!t.completedCounter||!t.moveSubtasks||t.sortBy!==t.SubtaskOrderByField.Manual||t.showArchived),m.Ib(1),m.Dc("ngForOf",t.subtaskList)("ngForTrackBy",t.trackById),m.Ib(1),m.Dc("ngForOf",t.pendingSubtasks[t.subtask.id])("ngForTrackBy",t.trackById)}}const En=function(t,e,s,a,i){return{parent:t,project:e,category:s,subcategory:a,assignees:i}};function Fn(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-row-new",92,93),m.qc("onCreateTask",function(e){return m.Uc(t),m.uc().onCreateTask.emit(e)})("onClose",function(){m.Uc(t);const e=m.uc();return e.onHideCreateTask.emit({id:e.subtask.id})})("onLazyLoad",function(e){return m.Uc(t),m.uc().onLazyLoad.emit({source:e.source,type:"new",data:e.data})})("openStatusSettings",function(e){return m.Uc(t),m.uc().onStatusSettings.emit(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null;m.Dc("dateFormat",null==(e=m.wc(2,17,t.sharedData.currentUser))?null:e.date_format)("militaryTime",null==(s=m.wc(3,19,t.sharedData.currentUser))?null:s.twenty_four_hr_setting)("meUser",m.wc(4,21,t.sharedData.currentUser))("defaultTaskData",m.Lc(23,En,null==t.subtask?null:t.subtask.id,t.projectExt,t.defaultTaskData.category,null==t.defaultTaskData?null:t.defaultTaskData.subcategory,t.defaultAssignees))("columns",t.listViewColumns)("statuses",t.statuses)("users",t.users)("weights",t.weights)("tags",t.tags)("autoFocus",!0)("closeable",!0)("canDelete",t.canDelete)("onlyDeleteIfOwner",t.onlyDeleteIfOwner)("subtaskSiblings",t.subtaskList)("forSubtask",!0)("statusStyleType","cu-task-row-status_dot")("userGroups",t.userGroups)}}function xn(t,e){}function Rn(t,e){}function Pn(t,e){}function zn(t,e){}const Nn=function(t,e,s,a,i,n){return{dueDate:t,startDate:e,dueDateTime:s,startDateTime:a,closedDate:i,doneDate:n}},Hn=function(t,e){return{task:t,statuses:e}},Bn=function(){return["auto"]};function qn(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-row-recurring-date-picker",94,95),m.qc("onChange",function(e){m.Uc(t);const s=m.uc();return s.setDueDate(s.subtask,e)})("onRecurringChange",function(e){return m.Uc(t),m.uc().setRecurring(e)})("onRecurringLegacyChange",function(e){return m.Uc(t),m.uc().setRecurringLegacy(e)}),m.vc(2,"taskRecurringToOptions"),m.bc()}if(2&t){const t=e.field,s=e.label,a=e.prefix,i=m.uc();m.Dc("field",t)("modifier","due-date_subtask-view")("viewModifier","due-date_subtask-view")("disabled",!(null!=i.task&&null!=i.task.permissions&&i.task.permissions.change_due_date))("tooltip",null!=i.task&&null!=i.task.permissions&&i.task.permissions.change_due_date?s:i.commonStringsService.noPermissionToChangeText)("dates",m.Mc(16,Nn,null==i.subtask?null:i.subtask.due_date,null==i.subtask?null:i.subtask.start_date,null==i.subtask?null:i.subtask.due_date_time,null==i.subtask?null:i.subtask.start_date_time,null==i.subtask?null:i.subtask.date_closed,null==i.subtask?null:i.subtask.date_done))("prefix",a)("recurringOptions",m.wc(2,14,null==i.subtask?null:i.subtask.recurring_settings))("recurringLegacyOptions",null==i.subtask?null:i.subtask.recur)("allowLegacyRecurring",!0)("legacyRecurring",null==i.subtask?null:i.subtask.legacy_recurring)("recurringLegacyData",m.Ic(23,Hn,i.subtask,i.statuses))("dropdownCloseOthersOnOpen",!0)("dropdownPlacement",m.Gc(26,Bn))}}const Xn=function(t,e){return{display:t,padding:e}};let Gn=(()=>{class t{constructor(t,e,s,a,i,n,c,o,r,l,d,u,h,b,k,p){this.sharedData=t,this.sharedTaskService=e,this.taskService=s,this.viewTaskService=a,this.dataService=i,this.resolver=n,this.featuresService=c,this.commonStringsService=o,this.element=r,this.changeDetector=l,this.helpers=d,this.modalService=u,this.store=h,this.selectedTasks=b,this.injector=k,this.localStorage=p,this.defaultAssignees=[],this.listViewColumns=[],this.onShowCreateTask=new m.o,this.onHideCreateTask=new m.o,this.onReloadTask=new m.o,this.toggleCreateSubtask=new m.o,this.onCreateTask=new m.o,this.onStatusSettings=new m.o,this.onIndent=new m.o,this.onToggleSubtask=new m.o,this.StatusTypes=Ut.g,this.SubtaskOrderByField=Bt.b,this.task$=new ke.a(null),this.projectFeatures$=new ke.a(null),this.destroy$=new be.a,this.dependencyState=fi.a,this.hideIfEmptyPriority=!0,this.hideIfEmptyTags=!0,this.hideIfEmptyDate=!0,this.selectTaskData=null,this.isSelected$=this.selectedTasks.selectedTaskList$.pipe(Object(ye.a)(t=>t.find(t=>t.id===this.subtask.id))),this.team$=this.store.select(Ft.getTeam),this.canChangeAssigneeAndStatus$=new ke.a(!0),this.taskUsers$=Object(me.a)([]),this.weights$=this.store.select(Ft.getUserWeights),this.UserWeightType=Bt.c,this.taskLinkSegments$=Object(ue.a)([this.viewTaskService.task,this.task$,this.store.select(Qt.k)]).pipe(Object(we.a)(([t,e])=>Boolean(t&&e)),Object(ye.a)(([t,e,s])=>St.k?s?["/",...Object(St.i)({seoOptimised:t.sharing.seo_optimized,viewId:s,publicKey:t.sharing.token,task:e,teamId:t.team})]:["/",...Object(St.h)(e,t.team,t.sharing.seo_optimized,t.sharing.token)]:Object($t.b)(Object.assign(Object.assign({},e),{team:t.team})))),this.isSharingApp=St.k,this.canCreateSubtask$=Object(ue.a)([this.task$.pipe(Object(we.a)(t=>!!t)),this.team$]).pipe(Object(ye.a)(([t,e])=>e.nested_subtasks&&(t.nested_level||0)<(e.nested_subtasks_level||0)||!t.parent)),this.disabled=!1,this.isSimpleStatus=!1,this.inList=!1,this.listAccess=!0,this.multiTaskEnabled=!1,this.canDelete=!0,this.canDeletePermission=!0,this.pendingSubtasks={},this.onChange=new m.o,this.onTimeEstimatChange=new m.o,this.onCreate=new m.o,this.onRemove=new m.o,this.onConflict=new m.o,this.onResetSortOrder=new m.o,this.onStatusChange=new m.o,this.onUpdateSubtask=new m.o,this.onLazyLoad=new m.o,this.onTimeEstimateAction=new m.o,this.onRenaming=new m.o,this.onDragMoved=new m.o,this.onDragStarted=new m.o,this.onDragEnded=new m.o,this.onDrop=new m.o,this.trackById=Object(Dt.d)("id"),this.debugContextMenu=this.localStorage.get("debugContextMenu")}get subtaskProject(){return this.project}set subtaskProject(t){t&&(this.project=t)}get subtaskFeatures(){return this.projectFeatures}set subtaskFeatures(t){t&&(this.projectFeatures=t)}get statusFilter(){return this.statusFilterObj}set statusFilter(t){this.statusFilterObj=null,t&&(this.statusFilterObj={})}onContextmenu(t){this.debugContextMenu||(this.showMenu(t,!0),setTimeout(()=>{window.getSelection&&window.getSelection().removeAllRanges()}))}ngOnInit(){this.subtask&&this.subtask.subcategory&&this.subtask.category&&this.store.pipe(Object(tt.select)(Object(Ft.getSubcategoryById)(this.subtask.subcategory.id,this.subtask.category.id,this.subtask.project_id)),Object(De.a)(this.destroy$)).subscribe(t=>{t?void 0!==t.permission_level&&(this.listAccess=t.permission_level===H.e.EDIT||t.permission_level===H.e.CREATE):this.listAccess=!1}),this.project$=this.project?new ke.a(this.project):this.viewTaskService.project,this.currentUser=this.sharedData.currentUser.value,this.projectFeatures$=(this.projectFeatures?new ke.a(this.projectFeatures):null)||this.viewTaskService.projectFeatures,this.task$.next(this.subtask),this.task$.pipe(Object(we.a)(t=>!(!t||!t.permissions)),Object(De.a)(this.destroy$)).subscribe(t=>{this.canChangeAssigneeAndStatus=!1,t.permission_level>3?this.canChangeAssigneeAndStatus=!0:3===t.permission_level&&(this.canChangeAssigneeAndStatus=-1!==t.assignees.findIndex(t=>t.id===this.sharedData.currentUser.value.id)),this.canChangeAssigneeAndStatus$.next(this.canChangeAssigneeAndStatus)}),this.taskService.onChange.pipe(Object(we.a)(t=>t&&"dependencyReload"===t.type),Object(De.a)(this.destroy$)).subscribe(t=>{-1!==t.taskIds.findIndex(t=>t===this.subtask.id)&&this.dataService.getTasksByIds([this.subtask.id]).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{t.length&&(this.subtask=Object.assign(Object.assign({},this.subtask),t[0]),this.changeDetector.detectChanges())})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnChanges(t){t.subtask&&(this.taskUsers$=this.store.pipe(Object(tt.select)(Object(Qt.I)(this.subtask.id))),this.task$.next(this.subtask.permissions?Object(Rt.O)([Object(_i.f)(this.subtask)])[0]:this.subtask))}loadTags(t){this.onLazyLoad.emit({source:"tags",data:t})}toggleSubtasks(){this.onToggleSubtask.emit({subtaskId:this.subtask.id})}toggleSelected(t){this.multiTaskEnabled&&this.selectedTasks.toggleTask(this.subtask,!1,t.shiftKey||t.metaKey?this.subtaskList:[])}showCreateTask(){this.onShowCreateTask.emit({id:this.subtask.id})}dragMoved(t){this.onDragMoved.emit(t)}showMenu(t,e=!1){if(this.disabled||St.k)return;if(e&&(t.preventDefault(),t.stopPropagation(),this.menuTrigger.nativeElement.remove(),this.menuContainer.clear(),this.menu&&this.menu.instance.menu.close(),this.menu=null),this.menu)return void(this.menu.instance.hasCustomType=!!this.subtask.custom_type);const s=this.resolver.resolveComponentFactory(gi.a);this.menu=this.menuContainer.createComponent(s),this.menu.instance.task=this.subtask,this.menu.instance.forTasks=!0,this.menu.instance.forSubtasks=!0,this.menu.instance.listAccess=this.listAccess,this.menu.instance.canDelete=this.canDelete,this.menu.instance.hasFeatures=!0,this.menu.instance.permissions=this.task&&this.task.permissions,this.menu.instance.limited=this.subtask&&this.subtask.permission_level!==H.e.CREATE,this.menu.instance.showCustomTypes=this.projectFeatures$.value.milestones.enabled,this.menu.instance.hasCustomType=!!this.subtask.custom_type,this.menu.instance.newTab=Object($t.c)(this.subtask),this.menu.instance.project=Object.assign(Object.assign({},this.project$.value),{features:this.projectFeatures$.value}),this.menu.instance.toggle.nativeElement.append(this.menuTrigger.nativeElement),this.menu.instance.onAction.pipe(Object(De.a)(this.destroy$)).subscribe(t=>this.callMethod(t)),this.menu.instance.fromPoint=e?{x:t.clientX,y:t.clientY}:null,this.menu.instance.onClose.pipe(Object(De.a)(this.destroy$)).subscribe(()=>this.menu.instance.menu.fromPoint=null),setTimeout(()=>{this.menu.instance.open()},0)}callMethod(t){"function"==typeof this[t.action]&&this[t.action](t)}create(){this.onCreate.emit()}archive(){this.taskService.archive(this.subtask,!1,this.task)}customType(t){this.taskService.setCustomType(this.subtask,t.data),this.onUpdateSubtask.emit(Object.assign(Object.assign({},this.subtask),{custom_type:t.data}))}rename(){const t=this.resolver.resolveComponentFactory(pi.a);this.editor=this.editorContainer.createComponent(t),this.editor.instance.name=this.subtask.name,this.editor.instance.forTags=!1,this.editor.instance.modifier="nav-editor_subtask",this.editor.instance.listenForIndents=!0,this.editor.instance.onAction.pipe(Object(De.a)(this.editor.instance.destroy$)).subscribe(t=>{this.callMethod(t)}),this.editor.instance.onIndent.pipe(Object(De.a)(this.editor.instance.destroy$)).subscribe(t=>this.indent(t)),this.onRenaming.emit(!0)}indent({indent:t}){this.onIndent.emit({indent:t,subtask:this.subtask})}save(t){const e=t.name;e.length&&(this.subtask.name=e,this.changeDetector.detectChanges(),this.dataService.editTask(this.subtask.id,{name:e}).subscribe(()=>{this.onResetSortOrder.emit(Bt.b.Name)}),this.inList&&this.taskService.onChange.emit([this.subtask]),this.cancel())}cancel(){this.editorContainer.remove(),this.onRenaming.emit(!1)}convertTask(){this.dataService.editTask(this.subtask.id,{parent:"none"}).subscribe(t=>{const e={description:this.commonStringsService.convertToTaskUndoItemText(Object(B.b)(this.subtask.name)),task:this.subtask,allowHtml:!0};this.sharedData.addUndoItem(e),this.onRemove.emit(this.subtask),this.taskService.onChange.emit([t.task])})}dependencies(){this.openDependencyModal()}delete(){this.taskService.remove(this.subtask).subscribe(()=>{this.onReloadTask.emit()}),this.onRemove.emit(this.subtask),this.inList&&this.taskService.onChange.emit([this.subtask])}prioritize(){this.task&&this.task.permissions&&this.task.permissions.change_priority&&(this.hideIfEmptyPriority=!1,(this.prioritiesList||this.disabled)&&setTimeout(()=>this.prioritiesList.open()))}toggleStatus(t){if(this.disabled||!this.subtask||!this.canChangeAssigneeAndStatus)return;const e=Object.assign({},t.status.type===Ut.g.Open?this.closedStatus:this.openStatus);this.setStatus(t,e)}setDueDate(t,e){if(this.disabled)return;const s=void 0!==e.remapDueDates?e.remapDueDates:"check",a=Object.assign({dueDate:t.due_date,dueDateTime:t.due_date_time,startDate:t.start_date,startDateTime:t.start_date_time},e);t.due_date=a.dueDate?String(a.dueDate.valueOf()):null,t.due_date_time=a.dueDateTime,t.start_date=a.startDate?String(a.startDate.valueOf()):null,t.start_date_time=a.startDateTime,this.taskService.setDueDates(t,a,!1,s,a.sendRequest).subscribe(t=>{t.due_date_conflict?(this.datePicker.datePicker.closeOnOutsideClick=!1,this.changeDetector.detectChanges(),this.datePicker.datePicker.dropdown.open(),setTimeout(()=>{this.datePicker.datePicker&&(this.datePicker.datePicker.datepicker.remapDueDatesPopover.show(),this.datePicker.datePicker.datepicker.lastSelectedDates=a)})):(this.onResetSortOrder.emit(Bt.b.DueDate),this.onReloadTask.emit())}),this.inList&&this.taskService.onChange.emit([this.subtask])}showEmailModal(){const t=this.modalService.openComponent(k.a,this.injector,{title:this.commonStringsService.attachEmailsToTaskText});t.instance.emailType=k.b.Comment,t.instance.task=this.subtask}userDropdownOpened(){this.store.dispatch(new Wt.R({taskId:this.subtask.id})),this.element.nativeElement.classList.add("task-todo-item_hover-state")}userDropdownClosed(){this.element.nativeElement.classList.remove("task-todo-item_hover-state")}changeStatus(t){this.setStatus(this.subtask,t),this.changeDetector.detectChanges()}addHoverClass(){this.element.nativeElement.classList.add("task-todo-item_hover-state")}removeHoverClass(){this.element.nativeElement.classList.remove("task-todo-item_hover-state")}priorityListClicked(){this.task&&this.task.permissions&&this.task.permissions.change_priority&&(this.hideIfEmptyPriority=!1)}priorityListOpened(){this.element.nativeElement.classList.add("task-todo-item_hover-state")}priorityListClosed(){this.hideIfEmptyPriority=!0,this.element.nativeElement.classList.remove("task-todo-item_hover-state")}openTask(t,e){e&&e.target&&e.target.classList&&e.target.classList.contains("cu-linkify-link")||this.disabled||this.sharedTaskService.clickTaskLink({id:t.id,customId:t.custom_id,teamId:this.viewTaskService.task.value.team},e)}openTags(){this.tagsList&&this.tagsList.dropdown&&(this.menu&&this.menu.instance&&this.menu.instance.menu&&this.menu.instance.menu.close(),this.tagsList.dropdown.open())}removeTag(t){this.store.dispatch(new Wt.Kb({tag:t,subtask:this.subtask}));const e=(this.subtask.tags||[]).filter(e=>e.name!==t.name);this.subtask=Object.assign(Object.assign({},this.subtask),{tags:e}),this.changeDetector.markForCheck(),this.inList&&this.taskService.onChange.emit([this.subtask])}renameTag(t){const e=Object.assign(Object.assign({},t.tag),{project_id:this.project$.value.id,new_name:t.newName});this.store.dispatch(new Wt.Ob({data:t,newTag:e,subtask:this.subtask}));const s=(this.subtask.tags||[]).map(e=>e.name===t.tag.name?Object.assign(Object.assign({},e),{name:t.newName}):e);this.subtask=Object.assign(Object.assign({},this.subtask),{tags:s}),this.changeDetector.markForCheck(),this.store.dispatch(Object(kt.o)({projectId:this.project$.value.id,tag:t.tag,newName:t.newName})),this.inList&&this.taskService.onChange.emit([this.subtask])}addTag(t){this.store.dispatch(new Wt.m({tags:this.tags,tag:t,subtask:this.subtask}));const e=this.subtask.tags?[...this.subtask.tags,t]:[];this.subtask=Object.assign(Object.assign({},this.subtask),{tags:e}),this.changeDetector.markForCheck(),this.store.dispatch(Object(kt.a)({projectId:this.project$.value.id,tag:t}))}deleteTagFromSpace(t){this.store.dispatch(new Wt.Kb({tag:t,spaceId:this.project$.value.id,subtask:this.subtask}));const e=(this.subtask.tags||[]).filter(e=>e.name!==t.name);this.subtask=Object.assign(Object.assign({},this.subtask),{tags:e}),this.changeDetector.markForCheck(),this.store.dispatch(Object(kt.d)({projectId:this.project$.value.id,tagName:t.name})),this.inList&&this.taskService.onChange.emit([this.subtask])}colorChange(t){const e=(this.subtask.tags||[]).map(e=>e.name===t.tag.name?Object.assign(Object.assign({},e),{tag_bg:t.newColor,tag_fg:t.newColor}):e);this.subtask=Object.assign(Object.assign({},this.subtask),{tags:e}),this.changeDetector.markForCheck(),this.store.dispatch(new Wt.x({tag:t.tag,newColor:t.newColor,subtask:this.subtask})),this.store.dispatch(Object(kt.c)({projectId:this.project$.value.id,newColor:t.newColor,tag:t.tag}))}setRecurringLegacy(t){this.subtask.recur=t,this.subtask.legacy_recurring=t&&t.recurring,this.taskService.setRecurringLegacyAsync(this.subtask,t).subscribe(t=>{this.subtask.recur=t,this.subtask.legacy_recurring=t&&t.recurring})}setRecurring(t){const e=Object(U.i)(t.recurring);this.subtask.recurring_settings=e;const s=e?Object.assign({},e):null;e&&t.dates&&t.dates.dueDate&&(s.due_date=Object(Ct.j)(t.dates.dueDate).valueOf(),s.due_date_time=t.dates.dueDateTime),this.taskService.setRecurringAsync(this.subtask,s).subscribe(t=>{})}moveSubtask(){const t=this.resolver.resolveComponentFactory(vi.a),e=this.moveSubtaskModal.createComponent(t);e.instance.task=this.subtask,e.instance.defaultProject=this.project$.value,e.instance.searchSubtasks=!1,e.instance.expandableSubtasks=!1,e.instance.onSelect.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{const e={task:t.masterTask,toTask:t.task};this.dataService.editTask(e.task.id,{parent:e.toTask.id}).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{t.conflict?this.onConflict.emit({task:e.task,toTask:e.toTask,payload:{parent:e.toTask.id},new:t.new,old:t.old,type:"editTask",closed:t.closed}):(this.notifyChanges(e.task,e.toTask),this.modalService.close())})}),this.modalService.open({title:this.commonStringsService.moveSubtaskText,content:e})}setTimeEstimate(t){this.subtask.time_estimate_string=t.output,this.subtask.time_estimate=1e3*t.seconds,this.onTimeEstimatChange.emit()}updateHoverState(t){t?this.element.nativeElement.classList.add("task-todo-item_hover-state"):this.element.nativeElement.classList.remove("task-todo-item_hover-state")}estimateTime(){this.menu&&this.menu.instance.menu.close(),this.timeEstimate&&this.timeEstimate.open()}openDependencyModal(){this.task&&this.task.permissions&&this.task.permissions.add_dependencies&&this.store.dispatch(new Q.x({task:this.subtask,project:this.project$.value}))}copy(){const t=this.resolver.resolveComponentFactory(Pe.a),e=this.copyModal.createComponent(t);Object.assign(this.subtask,{category:this.task.category,subcategory:this.task.subcategory}),e.instance.inputtedTask=this.subtask,e.instance.onTaskCopy.pipe(Object(De.a)(this.destroy$)).subscribe(this.copyTask.bind(this)),this.modalService.open({title:this.commonStringsService.duplicateTask,content:e})}merge(){this.openTaskSelectModal()}openTaskSelectModal(t=!0){const e=this.resolver.resolveComponentFactory(vi.a),s=this.convertSub.createComponent(e);s.instance.task=this.subtask,s.instance.defaultProject=this.project$.value,s.instance.searchSubtasks=t,s.instance.expandableSubtasks=t,s.instance.excludeParentTask=!t,s.instance.description=t?this.commonStringsService.mergeTaskDescriptionText:null,s.instance.notice=t?this.commonStringsService.privacyAndSharingInteritanceNoticeText:null,s.instance.onSelect.pipe(Object(De.a)(this.destroy$)).subscribe(e=>{if(this.modalService.close(),this.selectTaskData={task:e.masterTask,toTask:e.task},t)if(this.subtask&&this.subtask.length>0){const t=this.resolver.resolveComponentFactory(S.a),s=this.confirmMergeSubtaskModal.createComponent(t);s.instance.selectTaskData=this.selectTaskData,s.instance.parentTask=!!e.task.parent,s.instance.onConfirm.pipe(Object(De.a)(s.instance.destroy$)).subscribe(()=>this.mergeSubtaskConfirmModal()),this.modalService.open({blank:!1,modifier:"task-sc__modal",content:s})}else{let t;this.inList&&(t={movedSubtaskId:this.selectTaskData.task.id,taskIdWithNewSub:this.selectTaskData.toTask.id}),this.taskService.mergeTasks(this.selectTaskData.task,this.selectTaskData.toTask,!1,t),this.inList&&this.taskService.onChange.emit([this.subtask])}}),this.modalService.open({title:t?this.commonStringsService.mergeTaskIntoText:this.commonStringsService.convertToSubtaskText,content:s,modifier:t?"cu-modal_task-selector cu-modal_task-selector_merge":"cu-modal_task-selector"})}mergeSubtaskConfirmModal(){if(this.selectTaskData){let t;this.inList&&(t={movedSubtaskId:this.selectTaskData.task.id,taskIdWithNewSub:this.selectTaskData.toTask.id}),this.taskService.mergeTasks(this.selectTaskData.task,this.selectTaskData.toTask,!0,t)}}toggleMe(t){this.setAssignees(this.helpers.toggleMe(this.subtask.assignees,this.project$.value&&this.project$.value.multiple_assignees))}setAssignees(t){if(this.disabled)return;const e=this.subtask;this.taskService.setAssignees(this.subtask,t).subscribe(t=>{e.permissions=t.task.permissions,this.changeDetector.detectChanges(),this.userList&&e.permissions.change_assignee!==P.a.Edit&&this.userList.close()}),this.subtask.assignees=t}setGroupAssignees(t){if(this.disabled)return;const e=this.subtask;this.taskService.setGroupAssignees(this.subtask,t).subscribe(t=>{e.permissions=t.task.permissions,this.changeDetector.detectChanges(),this.userList&&e.permissions.change_assignee!==P.a.Edit&&this.userList.close()}),this.subtask.group_assignees=t}setPriority(t,e){this.disabled||(this.taskService.setPriorities(t,e).subscribe(()=>{this.onResetSortOrder.emit(Bt.b.Priority)}),this.inList&&this.taskService.onChange.emit([this.subtask]),t.priority=e)}openDate(){this.datePicker.open(!0)}assignedCommentsChange(t){this.subtask.assigned_comments_count--,this.onChange.emit()}setStatus(t,e){if(this.disabled)return;const s={oldName:t.status.status.slice(),newStatus:e};t.status=e,e.type===Ut.g.Closed?(t.closed=!0,this.statusTimeout1=setTimeout(()=>{t.hidden=!0,this.changeDetector.markForCheck(),this.statusTimeout1=null},5e3),this.statusTimeout2=setTimeout(()=>{t.closed=!1,t.hidden=!1,this.changeDetector.markForCheck(),this.onChange.emit(s),this.statusTimeout2=null},5200)):(this.statusTimeout1&&(clearTimeout(this.statusTimeout1),this.statusTimeout1=null),this.statusTimeout2&&(clearTimeout(this.statusTimeout2),this.statusTimeout2=null),t.closed=!1,t.hidden=!1,this.onChange.emit(s)),this.dataService.editTask(t.id,{status:e.status},!0,!0).subscribe(s=>{s.unresolvedConflict||s.dependencyConflict?(this.store.dispatch(new ki.m),this.store.dispatch(new ki.j({unresolvedTasks:s.tasks||[],accessibleTasks:s.accessible||[],inaccessibleTasks:s.inaccessible||[],task:this.subtask,status:e,unresolvedConflict:!!s.unresolvedConflict}))):(this.onReloadTask.emit(),t.date_updated=Date.now(),this.onResetSortOrder.emit(Bt.b.Status),this.inList&&this.taskService.onChange.emit([this.subtask]))}),this.taskService.onSubtaskStatusChange.emit({subtask:t,status:e})}notifyChanges(t,e){const s=[];t&&(s.push(t.id),t.parent&&s.push(t.parent)),e&&(s.push(e.id),e.parent&&s.push(e.parent)),this.taskService.onConvertToTask.emit([t]),this.taskService.onChange.emit({type:"reload",taskIds:s,movedSubtaskId:t.id,taskIdWithNewSub:e.id})}copyTask(t){this.modalService.close(),this.dataService.copyTask(this.subtask.id,Object(Pe.b)(t)).subscribe(()=>{this.taskService.subtaskCreated(this.task),this.sharedData.addToastItem({title:this.commonStringsService.copyingTask,bold:!0,forced:!0})})}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Ge.a),m.Wb(ts.a),m.Wb(Ze.a),m.Wb(Ye.a),m.Wb(Be.a),m.Wb(m.j),m.Wb(yi.a),m.Wb(Ne.a),m.Wb(m.m),m.Wb(m.h),m.Wb(Qe.b),m.Wb(Ve.a),m.Wb(tt.Store),m.Wb(G.a),m.Wb(m.t),m.Wb(hs.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["","cu-subtask",""]],viewQuery:function(t,e){if(1&t&&(m.jd(Ia.a,1),m.jd(Qa.a,1),m.jd(Li,1),m.jd(Ui,1),m.jd(Mi,1,m.U),m.jd(Ai,1),m.jd(Ei,1),m.jd(Fi,1,m.U),m.jd(xi,1,m.U),m.jd(Ri,3,m.U),m.jd(Pi,1),m.jd(zi,3,m.U),m.jd(Ni,3,m.U),m.jd(Hi,1),m.jd(Bi,3,m.U),m.jd(Fa.a,1),m.jd(qi,3,m.U),m.jd(Xi,1,m.U)),2&t){let t;m.Qc(t=m.rc())&&(e.prioritiesList=t.first),m.Qc(t=m.rc())&&(e.tagsList=t.first),m.Qc(t=m.rc())&&(e.timeEstimate=t.first),m.Qc(t=m.rc())&&(e.status=t.first),m.Qc(t=m.rc())&&(e.statusContainer=t.first),m.Qc(t=m.rc())&&(e.dueDateView=t.first),m.Qc(t=m.rc())&&(e.startDateView=t.first),m.Qc(t=m.rc())&&(e.dueDateContainer=t.first),m.Qc(t=m.rc())&&(e.startDateContainer=t.first),m.Qc(t=m.rc())&&(e.moveSubtaskModal=t.first),m.Qc(t=m.rc())&&(e.menuTrigger=t.first),m.Qc(t=m.rc())&&(e.copyModal=t.first),m.Qc(t=m.rc())&&(e.convertSub=t.first),m.Qc(t=m.rc())&&(e.datePicker=t.first),m.Qc(t=m.rc())&&(e.confirmMergeSubtaskModal=t.first),m.Qc(t=m.rc())&&(e.userList=t.first),m.Qc(t=m.rc())&&(e.editorContainer=t.first),m.Qc(t=m.rc())&&(e.menuContainer=t.first)}},hostBindings:function(t,e){1&t&&m.qc("contextmenu",function(t){return e.onContextmenu(t)})},inputs:{subtaskProject:"subtaskProject",subtaskFeatures:"subtaskFeatures",statusFilter:"statusFilter",cdkDragDisabled:"cdkDragDisabled",projectExt:"projectExt",defaultAssignees:"defaultAssignees",listViewColumns:"listViewColumns",users:"users",weights:"weights",rollups:"rollups",cuDragScrollContainer:"cuDragScrollContainer",createTaskMap:"createTaskMap",task:"task",tasks:"tasks",subtaskList:"subtaskList",openStatus:"openStatus",closedStatus:"closedStatus",statuses:"statuses",subtask:["cu-subtask","subtask"],disabled:"disabled",isSimpleStatus:"isSimpleStatus",inList:"inList",listAccess:"listAccess",multiTaskEnabled:"multiTaskEnabled",canDelete:"canDelete",tags:"tags",tagsLoadingMap:"tagsLoadingMap",userGroups:"userGroups",canDeletePermission:"canDeletePermission",onlyDeleteIfOwner:"onlyDeleteIfOwner",userId:"userId",timeEstimateData:"timeEstimateData",timeEstimatesDataMap:"timeEstimatesDataMap",defaultTaskData:"defaultTaskData",isCompleted:"isCompleted",completedCounter:"completedCounter",moveSubtasks:"moveSubtasks",sortBy:"sortBy",showArchived:"showArchived",pendingSubtasks:"pendingSubtasks",subtasksOpenMap:"subtasksOpenMap"},outputs:{onShowCreateTask:"onShowCreateTask",onHideCreateTask:"onHideCreateTask",onReloadTask:"onReloadTask",toggleCreateSubtask:"toggleCreateSubtask",onCreateTask:"onCreateTask",onStatusSettings:"onStatusSettings",onIndent:"onIndent",onToggleSubtask:"onToggleSubtask",onChange:"onChange",onTimeEstimatChange:"onTimeEstimatChange",onCreate:"onCreate",onRemove:"onRemove",onConflict:"onConflict",onResetSortOrder:"onResetSortOrder",onStatusChange:"onStatusChange",onUpdateSubtask:"onUpdateSubtask",onLazyLoad:"onLazyLoad",onTimeEstimateAction:"onTimeEstimateAction",onRenaming:"onRenaming",onDragMoved:"onDragMoved",onDragStarted:"onDragStarted",onDragEnded:"onDragEnded",onDrop:"onDrop"},features:[m.Gb],attrs:Gi,decls:53,vars:51,consts:function(){let t,e,s;return t=$localize`:@@common_waiting-dependency␟7e318436deb2d800d19000fca6e33177b3b98f30␟6823188785494996697:Waiting on dependency`,e=$localize`:@@common_blocking-dependency␟dc1bcd8eb31a7bb33bc8e886576aee8492e84e3c␟5566965119949910896:Blocking Dependency`,s=$localize`:@@common_rename␟e26f9cf3666aace4e524b1505c9795d76d87738d␟6041115344061899387:Rename`,[[1,"subtask__container"],[1,"lv-subtask__outer",3,"ngStyle"],["class","lv-task__toggle",3,"lv-task__toggle--selected","click",4,"ngIf"],["class","task-todo-item__toggle",3,"task-todo-item__toggle_disabled","click",4,"ngIf"],["class","cu-subtask__arrow",3,"cuPreventDefault","click",4,"ngIf"],[3,"ngClass","task-todo-item__custom-type","disabled","status","statuses","onChange","onOpen","onClose",4,"ngIf"],["class","task-todo-item__assignee",3,"disabled","multiChoice","selectedUsers","enableFirstSelection","weights","weightType","users","userGroups","task","subcategory","selectedUserGroups","onOpen","onClose","onChange","onUserGroupsChanged",4,"ngIf"],[1,"cu-todo-list__container"],[1,"cu-todo-list__container-items","cu-todo-list__container-items_middle"],["class","lv-task__dependency-icon archived-icon",3,"icon",4,"ngIf"],["class","lv-task__dependency-icon subtask__dependency-icon","cuTooltip",t,"tooltipModifier","tooltip_far",3,"no-permission","icon","click",4,"ngIf"],["class","lv-task__dependency-icon subtask__dependency-icon","cuTooltip",e,"tooltipModifier","tooltip_far",3,"icon","no-permission","click",4,"ngIf"],["cuLink","","draggable","false",1,"task-todo-item__name","subtask"],[1,"task-todo-item__name-text"],[1,"task-todo-item__name-text-inner"],["class","task-todo-item__name-text-inner-link",3,"task-todo-item__custom-text","cuLink","innerHTML","click",4,"ngIf"],["class","task-todo-item__name-text-inner-link",3,"task-todo-item__custom-text","routerLink","innerHTML",4,"ngIf"],[3,"cuPreventDefault","countTotalNestedSubtasks","showClosed","useShowClosed","task","showCreateIcon","subtasksByStatus","permissions","subtaskCreateClicked","click"],[1,"task-todo-item__actions"],[1,"task-todo-item__actions-inner"],["class","lv-task__edit-icon icon","cuTooltip",s,"tooltipModifier","tooltip_far",3,"click",4,"ngIf"],["class","lv-task__quick-action",4,"ngIf"],["class","task-todo-item__attachments","icon","paperclip",4,"ngIf"],["class","task-todo-item__content icon",3,"icon",4,"ngIf"],["class","lv-task__priorities subtask__priorities",3,"ngClass",4,"ngIf"],["class","due-date_subtask-view due-date_subtask-view_container due-date_subtask-view-start",3,"ngStyle","ngClass",4,"ngIf"],["class","due-date_subtask-view due-date_subtask-view_container",3,"ngStyle","ngClass",4,"ngIf"],["class","subtask__time-estimates-view",3,"ngStyle",4,"ngIf"],["class","lv-task__checklists",4,"ngIf"],["class","cu-tags-view__container-list",3,"ngClass","ngStyle",4,"ngIf"],[3,"task","disabled","onChange",4,"ngIf"],[1,"nav-category__editor"],["editorContainer",""],["class","task-todo__section","cdkDropList","","cdkDropListOrientation","vertical",3,"cdkDropListDisabled","cdkDropListDropped",4,"ngIf"],["class","cu-hidden-print",3,"dateFormat","militaryTime","meUser","defaultTaskData","columns","statuses","users","weights","tags","autoFocus","closeable","canDelete","onlyDeleteIfOwner","subtaskSiblings","forSubtask","statusStyleType","userGroups","onCreateTask","onClose","onLazyLoad","openStatusSettings",4,"ngIf"],["moveSubtaskModal",""],["convertSub",""],["copyModal",""],["confirmMergeSubtaskModal",""],["datePickerTemplate",""],[1,"lv-task__toggle",3,"click"],[1,"lv-task__toggle-marker"],[1,"task-todo-item__toggle",3,"click"],[1,"cu-subtask__arrow",3,"cuPreventDefault","click"],["icon","cu2-caret-down",1,"cu-subtask__arrow-icon"],[3,"ngClass","disabled","status","statuses","onChange","onOpen","onClose"],["tooltipModifier","cu-text-capitalize",3,"ngClass","ngStyle","cuTooltip"],["status",""],["statusContainer",""],[1,"task-todo-item__assignee",3,"disabled","multiChoice","selectedUsers","enableFirstSelection","weights","weightType","users","userGroups","task","subcategory","selectedUserGroups","onOpen","onClose","onChange","onUserGroupsChanged"],[3,"readOnly","modifier","avatarSize","users","userGroups"],[1,"lv-task__dependency-icon","archived-icon",3,"icon"],["cuTooltip",t,"tooltipModifier","tooltip_far",1,"lv-task__dependency-icon","subtask__dependency-icon",3,"icon","click"],["cuTooltip",e,"tooltipModifier","tooltip_far",1,"lv-task__dependency-icon","subtask__dependency-icon",3,"icon","click"],[1,"task-todo-item__name-text-inner-link",3,"cuLink","innerHTML","click"],[1,"task-todo-item__name-text-inner-link",3,"routerLink","innerHTML"],["cuTooltip",s,"tooltipModifier","tooltip_far",1,"lv-task__edit-icon","icon",3,"click"],["viewBox","0 0 16 16","xmlns","http://www.w3.org/2000/svg"],["transform","translate(1 1)","d","M0.5 13.5L1.6 8.1 9.2 0.5 13.5 4.8 5.9 12.4z","fill","none","fill-rule","evenodd",1,"cu-stroke"],[1,"lv-task__quick-action"],[1,"cu-dropdown"],["menuTrigger",""],[1,"lv-task__quick-action-ellipsis","lv-task__quick-action-ellipsis_subtask",3,"icon","click"],["menuContainer",""],["icon","paperclip",1,"task-todo-item__attachments"],[1,"task-todo-item__content","icon",3,"icon"],[1,"lv-task__priorities","subtask__priorities",3,"ngClass"],[3,"disabled","prioritySelected","onChange","onOpen","onClose","prioritiesClicked"],["modifier","cu-priorities-view__icon-subtask",3,"hideIfEmpty","priority","readOnly"],[1,"due-date_subtask-view","due-date_subtask-view_container","due-date_subtask-view-start",3,"ngStyle","ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"due-date_subtask-view","due-date_subtask-view_container",3,"ngStyle","ngClass"],[1,"subtask__time-estimates-view",3,"ngStyle"],[3,"permissions","task","modifier","team","header","rollup","user","timeEstimateData","onOpen","onClose","onTimeEstimateAction"],["timeEstimate",""],[1,"lv-task__checklists"],[1,"cu-checklist-ico"],["class","cu-checklist-ico__dot",4,"ngIf"],["icon","checklist",1,"cu-checklist-ico__icon"],[1,"cu-checklist-ico__dot"],[1,"cu-tags-view__container-list",3,"ngClass","ngStyle"],[3,"tags","tagsLoadingMap","taskTags","dropdown-disabled","taskId","spaceId","canDelete","canManageTag","onlyDeleteIfOwner","userId","spaceAccess","readonly","onOpen","onPage","onChange","onDelete","onDeleteFromSpace","onRename","onColorChange"],[3,"tags","availableTags","hideIfEmpty","truncate","showTags","modifier","readOnly","canAddTag","canRemoveTag","canManageTag","spaceAccess","spaceId","canDelete","onlyDeleteIfOwner","userId","preventBadgeClick","onDelete","onRename","onDeleteFromSpace","onColorChange"],[3,"task","disabled","onChange"],["cdkDropList","","cdkDropListOrientation","vertical",1,"task-todo__section",3,"cdkDropListDisabled","cdkDropListDropped"],["class","task-todo-item cu-subtask-drag","cdkDrag","","cuDragScroll","",3,"cdkDragDisabled","cuDragScrollContainer","cuDragMarginTop","cdkDragData","users","weights","cu-subtask","createTaskMap","subtasksOpenMap","isCompleted","completedCounter","moveSubtasks","rollups","sortBy","showArchived","subtaskList","pendingSubtasks","userGroups","listAccess","multiTaskEnabled","timeEstimatesDataMap","timeEstimateData","openStatus","closedStatus","statuses","task","tags","tagsLoadingMap","isSimpleStatus","ngClass","canDeletePermission","onlyDeleteIfOwner","userId","canDelete","disabled","cuHoverKeyDown","defaultTaskData","onCreateTask","onRenaming","onTimeEstimateAction","hoverKeyDown","onDragMoved","cdkDragMoved","cdkDragStarted","cdkDragEnded","onDragStarted","onDragEnded","onDrop","onShowCreateTask","onHideCreateTask","openStatusSettings","onIndent","onReloadTask","onToggleSubtask",4,"ngFor","ngForOf","ngForTrackBy"],["class","task-todo-item task-todo-item_pending",3,"cu-subtask","isSimpleStatus","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cuDragScroll","",1,"task-todo-item","cu-subtask-drag",3,"cdkDragDisabled","cuDragScrollContainer","cuDragMarginTop","cdkDragData","users","weights","cu-subtask","createTaskMap","subtasksOpenMap","isCompleted","completedCounter","moveSubtasks","rollups","sortBy","showArchived","subtaskList","pendingSubtasks","userGroups","listAccess","multiTaskEnabled","timeEstimatesDataMap","timeEstimateData","openStatus","closedStatus","statuses","task","tags","tagsLoadingMap","isSimpleStatus","ngClass","canDeletePermission","onlyDeleteIfOwner","userId","canDelete","disabled","cuHoverKeyDown","defaultTaskData","onCreateTask","onRenaming","onTimeEstimateAction","hoverKeyDown","onDragMoved","cdkDragMoved","cdkDragStarted","cdkDragEnded","onDragStarted","onDragEnded","onDrop","onShowCreateTask","onHideCreateTask","openStatusSettings","onIndent","onReloadTask","onToggleSubtask"],["subtaskRow",""],["class","cu-subtask__multi-preview",4,"cdkDragPreview"],[1,"cu-subtask__multi-preview"],[1,"task-todo-item","task-todo-item_pending",3,"cu-subtask","isSimpleStatus","disabled"],[1,"cu-hidden-print",3,"dateFormat","militaryTime","meUser","defaultTaskData","columns","statuses","users","weights","tags","autoFocus","closeable","canDelete","onlyDeleteIfOwner","subtaskSiblings","forSubtask","statusStyleType","userGroups","onCreateTask","onClose","onLazyLoad","openStatusSettings"],["quickAdd",""],[3,"field","modifier","viewModifier","disabled","tooltip","dates","prefix","recurringOptions","recurringLegacyOptions","allowLegacyRecurring","legacyRecurring","recurringLegacyData","dropdownCloseOthersOnOpen","dropdownPlacement","onChange","onRecurringChange","onRecurringLegacyChange"],["datePicker",""]]},template:function(t,e){if(1&t&&(m.cc(0,"div",0),m.cc(1,"div",1),m.bd(2,Vi,3,4,"div",2),m.bd(3,Wi,1,2,"div",3),m.bd(4,Qi,2,2,"div",4),m.bd(5,Ji,8,20,"cu-status-list-dropdown",5),m.bd(6,tn,6,26,"cu-user-and-groups-list-dropdown",6),m.vc(7,"async"),m.cc(8,"div",7),m.cc(9,"div",8),m.bd(10,en,1,1,"div",9),m.bd(11,sn,1,3,"div",10),m.bd(12,an,1,3,"div",11),m.cc(13,"div",12),m.cc(14,"span",13),m.cc(15,"div",14),m.bd(16,nn,3,8,"a",15),m.bd(17,cn,3,8,"a",16),m.cc(18,"cu-subtasks-by-status-popup",17),m.qc("subtaskCreateClicked",function(){return e.showCreateTask()})("click",function(){return e.toggleSubtasks()}),m.vc(19,"async"),m.bc(),m.cc(20,"div",18),m.cc(21,"div",19),m.bd(22,on,3,0,"div",20),m.bd(23,rn,6,1,"div",21),m.bc(),m.bc(),m.bc(),m.bd(24,ln,1,0,"div",22),m.bd(25,dn,1,1,"div",23),m.bd(26,hn,3,8,"div",24),m.vc(27,"async"),m.bd(28,gn,2,11,"div",25),m.vc(29,"async"),m.bd(30,_n,2,10,"div",26),m.vc(31,"async"),m.bd(32,wn,5,15,"div",27),m.vc(33,"async"),m.bd(34,Cn,5,3,"div",28),m.bd(35,Sn,5,36,"div",29),m.vc(36,"async"),m.bc(),m.bd(37,In,1,2,"cu-task-row-assigned-comments",30),m.bc(),m.Xb(38,"div",31),m.Xb(39,"div",null,32),m.bc(),m.bc(),m.bc(),m.bd(41,An,3,5,"div",33),m.bc(),m.bd(42,Fn,5,29,"cu-task-row-new",34),m.bd(43,xn,0,0,"ng-template",null,35,m.cd),m.bd(45,Rn,0,0,"ng-template",null,36,m.cd),m.bd(47,Pn,0,0,"ng-template",null,37,m.cd),m.bd(49,zn,0,0,"ng-template",null,38,m.cd),m.bd(51,qn,3,27,"ng-template",null,39,m.cd)),2&t){let t=null,s=null,a=null,i=null,n=null;m.Ib(1),m.Dc("ngStyle",m.Ic(48,Xn,!e.inList||e.statusFilter?"flex":"none",e.inList?"11px 20px 0 0":"")),m.Jb("id","subtask-container-"+(null==e.subtask?null:e.subtask.id)),m.Ib(1),m.Dc("ngIf",e.multiTaskEnabled),m.Ib(1),m.Dc("ngIf",e.isSimpleStatus&&!(null!=e.subtask&&e.subtask.custom_type)),m.Ib(1),m.Dc("ngIf",e.isCompleted&&e.subtask.subtasks_count>0||!e.isCompleted&&e.subtask.subtasks_open_count>0),m.Ib(1),m.Dc("ngIf",!e.isSimpleStatus||(null==e.subtask?null:e.subtask.custom_type)),m.Ib(1),m.Dc("ngIf",(m.wc(7,34,e.canChangeAssigneeAndStatus$)||(null==e.subtask||null==e.subtask.assignees?null:e.subtask.assignees.length)||(null==e.subtask||null==e.subtask.group_assignees?null:e.subtask.group_assignees.length))&&!((null==e.subtask||null==e.subtask.assignees||!e.subtask.assignees.length)&&e.isSharingApp)),m.Ib(4),m.Dc("ngIf",null==e.subtask?null:e.subtask.archived),m.Ib(1),m.Dc("ngIf",(null==e.subtask?null:e.subtask.dependency_state)===(null==e.dependencyState?null:e.dependencyState.blocked)),m.Ib(1),m.Dc("ngIf",(null==e.subtask?null:e.subtask.dependency_state)===(null==e.dependencyState?null:e.dependencyState.blocker)),m.Ib(2),m.Ob("task-todo-item_done",(null==e.subtask||null==e.subtask.status?null:e.subtask.status.type)===e.StatusTypes.Closed),m.Ib(2),m.Dc("ngIf",!e.isSharingApp),m.Ib(1),m.Dc("ngIf",e.isSharingApp),m.Ib(1),m.Dc("countTotalNestedSubtasks",e.isCompleted?e.subtask.subtasks_count:e.subtask.subtasks_open_count)("showClosed",e.isCompleted)("useShowClosed",!0)("task",e.subtask)("showCreateIcon",m.wc(19,36,e.canCreateSubtask$))("subtasksByStatus",e.subtask.subtasks_by_status)("permissions",null==e.task?null:e.task.permissions),m.Ib(4),m.Dc("ngIf",null==e.task||null==e.task.permissions?null:e.task.permissions.change_title),m.Ib(1),m.Dc("ngIf",!e.disabled&&!e.isSharingApp),m.Ib(1),m.Dc("ngIf",e.subtask.attachments_count),m.Ib(1),m.Dc("ngIf",e.subtask.content_size&&"none"!=e.subtask.content_size),m.Ib(1),m.Dc("ngIf",null==(t=m.wc(27,38,e.projectFeatures$))||null==t.priorities?null:t.priorities.enabled),m.Ib(2),m.Dc("ngIf",null==(s=m.wc(29,40,e.projectFeatures$))||null==s.due_dates?null:s.due_dates.enabled),m.Ib(2),m.Dc("ngIf",null==(a=m.wc(31,42,e.projectFeatures$))||null==a.due_dates?null:a.due_dates.enabled),m.Ib(2),m.Dc("ngIf",(null==(i=m.wc(33,44,e.projectFeatures$))||null==i.time_estimates?null:i.time_estimates.enabled)&&(null==e.task||null==e.task.permissions?null:e.task.permissions.can_see_time_spent)),m.Ib(2),m.Dc("ngIf",e.subtask.checklist_counts),m.Ib(1),m.Dc("ngIf",null==(n=m.wc(36,46,e.projectFeatures$))||null==n.tags?null:n.tags.enabled),m.Ib(2),m.Dc("ngIf",null==e.subtask?null:e.subtask.assigned_comments_count),m.Ib(4),m.Dc("ngIf",e.subtasksOpenMap&&e.subtasksOpenMap[e.subtask.id]&&((null==e.subtaskList?null:e.subtaskList.length)||e.pendingSubtasks&&(null==e.pendingSubtasks[e.subtask.id]?null:e.pendingSubtasks[e.subtask.id].length))),m.Ib(1),m.Dc("ngIf",e.createTaskMap&&e.createTaskMap[null==e.subtask?null:e.subtask.id])}},directives:[l.t,l.q,hi.a,wi.a,Wa.a,Rs.a,Ti.a,l.o,Ls.a,Ca.a,Sa.a,b.k,Ia.a,$a.a,l.x,Pa.a,Qa.a,Za.a,Ci.a,li.d,l.p,li.a,bi.a,t,Ds.a,li.c,Si.a,Ii.a],pipes:[l.b,$i.a,l.n,Di.a,Oi.a,ji.a],styles:['.subtask__container{display:flex;flex-direction:column;width:100%;margin-top:15px}.subtask__container .task-todo-item{margin-left:30px;flex-direction:column}.cu-subtask__arrow{position:absolute;width:16px;height:20px;padding:3px;cursor:pointer;transform:translate(-20px);z-index:10}.cu-subtask__arrow:hover .cu-subtask__arrow-icon{fill:#7c828d}.dark-theme .cu-subtask__arrow:hover .cu-subtask__arrow-icon{fill:#abaeb0}.cu-subtask__arrow-icon{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;transform:rotate(-90deg);fill:#b9bec7}.dark-theme .cu-subtask__arrow-icon{fill:#7c828d}.cu-subtask__arrow-icon_expanded{transform:rotate(0deg)}.cu-subtask-drag{position:relative}.cu-subtask-drag.cdk-drag-placeholder{opacity:.4;visibility:hidden;height:0!important}.cu-subtask-drag .lv-subtask__outer:hover .lv-task__toggle-marker{display:block}.cu-subtask-drag .lv-subtask__outer:hover .task-todo-item__handle{display:flex}.cu-subtask-drag .lv-subtask__outer.drop-inside:before{content:"";display:block;position:absolute;width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:7px solid;bottom:-3px;left:30px;z-index:100;border-radius:2px}@supports (--theme-main-color:#7b68ee){.cu-subtask-drag .lv-subtask__outer.drop-inside:before{border-left-color:var(--theme-main-color)}}.cu-subtask-drag .lv-subtask__outer.drop-inside:after{background:#7b68ee;content:"";display:block;position:absolute;width:100%;height:1px;bottom:0;left:30px;z-index:100}@supports (--theme-main-color:#7b68ee){.cu-subtask-drag .lv-subtask__outer.drop-inside:after{background:var(--theme-main-color)}}.cu-subtask-drag.drop-after:before{content:"";display:block;position:absolute;width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:7px solid;bottom:-3px;left:-5px;z-index:100;border-radius:2px}@supports (--theme-main-color:#7b68ee){.cu-subtask-drag.drop-after:before{border-left-color:var(--theme-main-color)}}.cu-subtask-drag.drop-after:after{background:#7b68ee;content:"";display:block;position:absolute;width:100%;height:1px;bottom:0;left:0;z-index:100}@supports (--theme-main-color:#7b68ee){.cu-subtask-drag.drop-after:after{background:var(--theme-main-color)}}.cu-subtask-drag.drop-before:before{content:"";display:block;position:absolute;width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:7px solid;top:8px;left:-5px;z-index:100;border-radius:2px}@supports (--theme-main-color:#7b68ee){.cu-subtask-drag.drop-before:before{border-left-color:var(--theme-main-color)}}.cu-subtask-drag.drop-before:after{background:#7b68ee;content:"";display:block;position:absolute;width:100%;height:1px;top:12px;left:0;z-index:100}@supports (--theme-main-color:#7b68ee){.cu-subtask-drag.drop-before:after{background:var(--theme-main-color)}}.cu-subtask-drag .task-todo__section{margin-bottom:0}.cu-subtask__multi-preview{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#7b68ee;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:13px;line-height:1;color:#fff;padding:4px 12px 5px;border-radius:4px;box-shadow:0 24px 38px rgba(0,0,0,.14),0 11px 15px rgba(0,0,0,.2)}@supports (--theme-main-color:#7b68ee){.cu-subtask__multi-preview{background:var(--theme-main-color)}}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-subtask__multi-preview{font-family:var(--global-font-support)}}.cu-subtask__multi-preview:before{content:"";display:block;position:absolute;width:100%;height:100%;border:1px solid hsla(0,0%,100%,.2);border-radius:3px;top:0;left:0}'],encapsulation:2,data:{animation:[Object(h.m)("row",[Object(h.l)(":enter",[Object(h.k)({opacity:0,transform:"scaleY(0)"}),Object(h.e)("150ms",Object(h.k)({opacity:1,transform:"scaleY(1)"}))]),Object(h.l)(":leave",[Object(h.k)({opacity:1,transform:"scaleY(1)"}),Object(h.e)("150ms ease-out",Object(h.k)({opacity:0,transform:"scaleY(0)"}))])])]},changeDetection:0}),t})();var Vn=s("HPyy"),Wn=s("WkAz"),Qn=s("T7pm"),Zn=s("yQlF");const Kn=["todo-comment",""];function Jn(t,e){if(1&t){const t=m.dc();m.cc(0,"div",10),m.qc("click",function(){return m.Uc(t),m.uc().toggleTodoComment()}),m.bc()}}function Yn(t,e){1&t&&m.Xb(0,"div",11)}function tc(t,e){if(1&t&&m.Xb(0,"cu-avatar",12),2&t){const t=m.uc();m.Ob("cu-clickable",!t.isSharingApp),m.Dc("user",t.comment.assignee)("cuTooltip",t.comment.assignee.username||t.comment.assignee.email)}}function ec(t,e){if(1&t&&m.Xb(0,"cu-user-group-avatar",13),2&t){const t=m.uc();m.Ob("cu-clickable",!t.isSharingApp),m.Dc("group",t.comment.group_assignee)("cuTooltip",t.comment.group_assignee.name)("avatarSize",20)("bordered",!1)}}function sc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",14),m.qc("click",function(){return m.Uc(t),m.uc().commentClick.emit()}),m.cc(1,"div",15),m.cc(2,"cu-attachment-preview",16),m.qc("onOpen",function(){return m.Uc(t),m.uc().commentClick.emit()}),m.bc(),m.bc(),m.cc(3,"div",17),m.dd(4),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Ib(2),m.Dc("attachment",t.comment.attachment_parent),m.Ib(2),m.fd(" ",t.comment.attachment_parent.title," ")}}const ac=function(t){return[t]},ic=function(){return[]},nc=function(t,e,s,a){return[t,null,!1,e,s,a,!0]};let cc=(()=>{class t{constructor(t,e,s,a,i){this.viewTaskService=t,this.commentsService=e,this.changeDetector=s,this.sharedData=a,this.taskMentionService=i,this.commentUpdateSuccess=new m.o,this.commentClick=new m.o,this.task$=this.viewTaskService.task,this.project$=this.viewTaskService.project,this.destroy$=new be.a,this.isSharingApp=St.k}ngOnInit(){this.assignedResolved$=this.task$.pipe(Object(we.a)(t=>!!t&&!!t.permissions),Object(ye.a)(t=>Object(wt.c)(t.permissions,t.permission_level,this.comment,this.sharedData.currentUser.value)),Object(De.a)(this.destroy$)),this.viewTaskService.onCommentAssignToggle.pipe(Object(we.a)(t=>t.id===this.comment.id)).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.comment.assignee=t.assignee,this.comment.group_assignee=t.group_assignee,this.changeDetector.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.task$=null,this.project$=null}userChanged(t){this.comment.assignee=t[0]||null,this.viewTaskService.onCommentAssignToggle.emit(this.comment);const e={assignee:this.comment.assignee,group_assignee:null},s={assignee:this.comment.assignee?this.comment.assignee.id:"unassigned"};this.commentsService.editComment(this.viewTaskService.task.value.id,this.comment.id,s).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.viewTaskService.onCommentChange.emit({comment:Object.assign(Object.assign({},this.comment),e),silent:!0}),this.commentUpdateSuccess.emit({changes:s}),this.taskMentionService.updateMentions()})}userGroupChanged(t){this.comment.group_assignee=t[0]||null,this.viewTaskService.onCommentAssignToggle.emit(this.comment);const e={group_assignee:this.comment.group_assignee,assignee:null},s={group_assignee:this.comment.group_assignee?this.comment.group_assignee.id:"unassigned"};this.commentsService.editComment(this.viewTaskService.task.value.id,this.comment.id,s).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.viewTaskService.onCommentChange.emit({comment:Object.assign(Object.assign({},this.comment),e),silent:!0}),this.commentUpdateSuccess.emit({changes:s}),this.taskMentionService.updateMentions()})}toggleTodoComment(){this.comment.resolved=!this.comment.resolved;const t={id:this.comment.id,resolved:this.comment.resolved};this.commentsService.editComment(this.task$.value.id,this.comment.id,t).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.viewTaskService.onCommentResolveToggle.emit(t),this.commentUpdateSuccess.emit({changes:{resolved:t.resolved}})})}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Ye.a),m.Wb(We.a),m.Wb(m.h),m.Wb(Ge.a),m.Wb(us.a))},t.\u0275cmp=m.Qb({type:t,selectors:[["","todo-comment",""]],inputs:{comment:"comment",users:"users",userGroups:"userGroups"},outputs:{commentUpdateSuccess:"commentUpdateSuccess",commentClick:"commentClick"},attrs:Kn,decls:15,vars:44,consts:[["class","task-todo-item__toggle",3,"click",4,"ngIf"],["class","task-todo-item__toggle",4,"ngIf"],[1,"task-todo-item__user"],[3,"users","userGroups","multiChoice","selectedUsers","selectedUserGroups","disabled","task","subcategory","onChange","onUserGroupsChanged"],["modifier","cu-avatar_sm",3,"user","cuTooltip","cu-clickable",4,"ngIf"],[3,"group","cuTooltip","cu-clickable","avatarSize","bordered",4,"ngIf"],["class","task-todo-item__comment-attachment",3,"click",4,"ngIf"],[1,"task-todo-item__comment-block"],["cuLink","","draggable","false",1,"task-todo-item__comment",3,"innerHTML","click"],[1,"task-todo-item__comment-block-gradient"],[1,"task-todo-item__toggle",3,"click"],[1,"task-todo-item__toggle"],["modifier","cu-avatar_sm",3,"user","cuTooltip"],[3,"group","cuTooltip","avatarSize","bordered"],[1,"task-todo-item__comment-attachment",3,"click"],[1,"task-todo-item__comment-attachment-preview"],["thumbSize","small",3,"attachment","onOpen"],[1,"task-todo-item__comment-attachment-title"]],template:function(t,e){if(1&t&&(m.bd(0,Jn,1,0,"div",0),m.vc(1,"async"),m.bd(2,Yn,1,0,"div",1),m.vc(3,"async"),m.cc(4,"div",2),m.cc(5,"cu-user-and-groups-list-dropdown",3),m.qc("onChange",function(t){return e.userChanged(t)})("onUserGroupsChanged",function(t){return e.userGroupChanged(t)}),m.vc(6,"async"),m.vc(7,"async"),m.bd(8,tc,1,4,"cu-avatar",4),m.bd(9,ec,1,6,"cu-user-group-avatar",5),m.bc(),m.bc(),m.bd(10,sc,5,2,"div",6),m.cc(11,"div",7),m.cc(12,"a",8),m.qc("click",function(){return e.commentClick.emit()}),m.vc(13,"commentHTML"),m.bc(),m.Xb(14,"div",9),m.bc()),2&t){let t=null;m.Dc("ngIf",m.wc(1,14,e.assignedResolved$)),m.Ib(2),m.Dc("ngIf",!m.wc(3,16,e.assignedResolved$)&&(null==e.comment?null:e.comment.resolved)),m.Ib(3),m.Dc("users",e.users)("userGroups",e.userGroups)("multiChoice",!1)("selectedUsers",e.comment.assignee?m.Hc(30,ac,e.comment.assignee):m.Gc(32,ic))("selectedUserGroups",e.comment.group_assignee?m.Hc(33,ac,e.comment.group_assignee):m.Gc(35,ic))("disabled",e.isSharingApp)("task",m.wc(6,18,e.task$))("subcategory",null==(t=m.wc(7,20,e.task$))?null:t.subcategory),m.Ib(3),m.Dc("ngIf",e.comment.assignee&&!e.comment.group_assignee),m.Ib(1),m.Dc("ngIf",e.comment.group_assignee),m.Ib(1),m.Dc("ngIf",e.comment.attachment_parent),m.Ib(2),m.Dc("innerHTML",m.Ac(13,22,m.Kc(39,nc,e.comment,m.Gc(36,ic),m.Gc(37,ic),m.Gc(38,ic))),m.Vc)}},directives:[l.q,Ca.a,Vn.a,Ls.a,Wn.a,Qn.a],pipes:[l.b,Zn.a],encapsulation:2,changeDetection:0}),t})();const oc=["dropdown"],rc=["quickAdd"];function lc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",30),m.qc("click",function(){return m.Uc(t),m.uc(3).openCreateTaskQuick()}),m.Xb(1,"span",31),m.ac(2),m.gc(3,32),m.Zb(),m.bc()}}function dc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",33),m.cc(1,"div",34),m.cc(2,"div",30),m.qc("click",function(){return m.Uc(t),m.uc(3).emitChecklistCreate()}),m.Xb(3,"span",35),m.ac(4),m.gc(5,36),m.Zb(),m.bc(),m.bc(),m.bc()}}function uc(t,e){if(1&t&&(m.cc(0,"div",26),m.cc(1,"div",27),m.bd(2,lc,4,0,"div",28),m.bd(3,dc,6,0,"div",29),m.bc(),m.bc()),2&t){const t=m.uc(2);m.Ib(2),m.Dc("ngIf",t.canAddSubtasks),m.Ib(1),m.Dc("ngIf",t.canAddChecklists)}}function hc(t,e){1&t&&(m.cc(0,"div",18),m.cc(1,"div",19,20),m.cc(3,"div",21),m.cc(4,"span",22),m.gc(5,23),m.bc(),m.Xb(6,"div",24),m.bc(),m.bd(7,uc,4,2,"div",25),m.bc(),m.bc()),2&t&&(m.Ib(1),m.Dc("dropdownCloseOnInsideClick",!1))}function mc(t,e){if(1&t){const t=m.dc();m.cc(0,"button",38),m.qc("click",function(){return m.Uc(t),m.uc(2).emitChecklistCreate()}),m.cc(1,"span",22),m.dd(2,"+ "),m.ac(3),m.gc(4,39),m.Zb(),m.bc(),m.bc()}}function bc(t,e){if(1&t&&(m.bd(0,mc,5,0,"button",37),m.vc(1,"async")),2&t){const t=m.uc();let e=null;m.Dc("ngIf",(null==(e=m.wc(1,1,t.task$))?null:e.parent)&&t.canAddChecklists)}}const kc=function(t){return{"task-todo-nav__item_active":t}};function pc(t,e){if(1&t){const t=m.dc();m.cc(0,"a",42),m.qc("click",function(){return m.Uc(t),m.uc(2).showAll()}),m.gc(1,44),m.bc()}if(2&t){const t=m.uc(2);m.Dc("ngClass",m.Hc(1,kc,t.isAll))}}function gc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",40),m.bd(1,pc,2,3,"a",41),m.vc(2,"async"),m.cc(3,"a",42),m.qc("click",function(){return m.Uc(t),m.uc().showMine()}),m.gc(4,43),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null;m.Ib(1),m.Dc("ngIf",!(null!=(e=m.wc(2,2,t.sharedData.compatCurrentTeam$))&&e.personal_team)),m.Ib(2),m.Dc("ngClass",m.Hc(4,kc,t.isMine))}}function vc(t,e){if(1&t){const t=m.dc();m.cc(0,"a",52),m.qc("click",function(){return m.Uc(t),m.uc(3).showAll()}),m.gc(1,54),m.bc()}if(2&t){const t=m.uc(3);m.Dc("ngClass",m.Hc(1,kc,t.isAll))}}function fc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",50),m.bd(1,vc,2,3,"a",51),m.vc(2,"async"),m.cc(3,"a",52),m.qc("click",function(){return m.Uc(t),m.uc(2).showMine()}),m.gc(4,53),m.bc(),m.bc()}if(2&t){const t=m.uc(2);let e=null;m.Ib(1),m.Dc("ngIf",!(null!=(e=m.wc(2,2,t.sharedData.compatCurrentTeam$))&&e.personal_team)),m.Ib(2),m.Dc("ngClass",m.Hc(4,kc,t.isMine))}}function _c(t,e){1&t&&(m.cc(0,"div",45),m.cc(1,"div",46),m.ac(2),m.gc(3,47),m.Zb(),m.Xb(4,"span",48),m.bc(),m.bd(5,fc,5,6,"div",49),m.bc())}function yc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",67),m.qc("click",function(){m.Uc(t);const e=m.uc(2);return e.selectedTasks.selectTasks(e.subtaskList)}),m.Xb(1,"div",68),m.bc()}}function wc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",69),m.qc("click",function(){return m.Uc(t),m.uc(2).selectedTasks.clearSelectedTasks()}),m.Xb(1,"div",68),m.bc()}}function Tc(t,e){1&t&&(m.cc(0,"span"),m.gc(1,70),m.bc())}function Cc(t,e){1&t&&(m.ac(0),m.gc(1,75),m.Zb())}function Sc(t,e){1&t&&(m.ac(0),m.gc(1,76),m.Zb())}function Ic(t,e){if(1&t&&(m.ac(0),m.gc(1,77),m.Zb()),2&t){const t=m.uc(3);m.Ib(1),m.kc(t.openSubtasksCounter),m.hc(1)}}function $c(t,e){if(1&t&&(m.cc(0,"span",71),m.bd(1,Cc,2,0,"ng-template",72),m.bd(2,Sc,2,0,"ng-template",73),m.bd(3,Ic,2,1,"ng-template",74),m.bc()),2&t){const t=m.uc(2);m.Dc("ngPlural",t.openSubtasksCounter)}}function Dc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",78),m.qc("click",function(e){return m.Uc(t),m.uc(2).reverseSortOrder(e)}),m.bc()}}function Oc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",79),m.qc("click",function(e){return m.Uc(t),m.uc(2).reverseSortOrder(e)}),m.bc()}}function jc(t,e){1&t&&(m.ac(0),m.gc(1,83),m.Zb())}function Lc(t,e){1&t&&(m.ac(0),m.gc(1,84),m.Zb())}function Uc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",80),m.qc("click",function(){return m.Uc(t),m.uc(2).toggleExpandAll()}),m.bd(1,jc,2,0,"ng-container",81),m.vc(2,"async"),m.bd(3,Lc,2,0,"ng-template",null,82,m.cd),m.bc()}if(2&t){const t=m.Rc(4),e=m.uc(2);m.Ib(1),m.Dc("ngIf",m.wc(2,2,e.allExpanded$))("ngIfElse",t)}}function Mc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",55),m.cc(1,"div",56),m.bd(2,yc,2,0,"div",57),m.bd(3,wc,2,0,"div",58),m.bd(4,Tc,2,0,"span",59),m.bd(5,$c,4,1,"span",60),m.bc(),m.cc(6,"cu-dropdown-list",61),m.qc("onSelect",function(e){return m.Uc(t),m.uc().selectSort(e)}),m.cc(7,"div",62),m.bd(8,Dc,1,0,"div",63),m.bd(9,Oc,1,0,"div",64),m.cc(10,"div",65),m.dd(11),m.bc(),m.bc(),m.bc(),m.bd(12,Uc,5,4,"div",66),m.vc(13,"async"),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.Ob("cu-hidden-print",0===(null==t.subtaskList?null:t.subtaskList.length)),m.Ib(1),m.Dc("ngIf",(null==t.selectedTasks||null==t.selectedTasks.selectedTaskList?null:t.selectedTasks.selectedTaskList.length)<(null==t.subtaskList?null:t.subtaskList.length)&&t.multiTaskEnabled&&t.taskAccess),m.Ib(1),m.Dc("ngIf",(null==t.selectedTasks||null==t.selectedTasks.selectedTaskList?null:t.selectedTasks.selectedTaskList.length)===(null==t.subtaskList?null:t.subtaskList.length)),m.Ib(1),m.Dc("ngIf",!(null!=t.subtaskList&&t.subtaskList.length)),m.Ib(1),m.Dc("ngIf",(null==t.subtaskList?null:t.subtaskList.length)&&null!==t.openSubtasksCounter),m.Ib(1),m.Dc("items",t.sortItems)("title",t.sortingText)("dropdownCloseOthersOnOpen",!1),m.Ib(2),m.Dc("ngIf",t.sortByDir===t.SortDirection.Asc),m.Ib(1),m.Dc("ngIf",t.sortByDir===t.SortDirection.Desc),m.Ib(2),m.ed(t.sortTitleMap[t.sortBy]),m.Ib(1),m.Dc("ngIf",m.wc(13,13,t.hasSubsToExpand$))}}const Ac=function(){return["30"]};function Ec(t,e){if(1&t&&(m.cc(0,"div",91),m.dd(1),m.vc(2,"truncate"),m.bc()),2&t){const t=m.uc().$implicit;m.Ib(1),m.fd(" ",m.xc(2,1,null==t?null:t.id,m.Gc(4,Ac))," ")}}const Fc=function(t,e){return{"task-todo-item_done":t,"task-todo-item_pending":e}},xc=function(t,e,s,a,i){return{parent:t,project:e,category:s,subcategory:a,assignees:i}},Rc=function(){return{m:!0}};function Pc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",88,89),m.qc("onCreateTask",function(e){return m.Uc(t),m.uc(2).createTask(e)})("onRemove",function(e){return m.Uc(t),m.uc(2).removeSubtask(e)})("onCreate",function(){m.Uc(t);const s=e.index;return m.uc(2).openCreateTaskQuick(s)})("onChange",function(){return m.Uc(t),m.uc(2).setList()})("onRenaming",function(e){return m.Uc(t),m.uc(2).renamingSubtask(e)})("onConflict",function(e){return m.Uc(t),m.uc(2).onConflict.emit(e)})("onTimeEstimatChange",function(e){return m.Uc(t),m.uc(2).onTimeEstimatChange.emit(e)})("onResetSortOrder",function(e){return m.Uc(t),m.uc(2).resetSortOrder(e)})("onUpdateSubtask",function(e){return m.Uc(t),m.uc(2).updateSubtask(e)})("onLazyLoad",function(e){return m.Uc(t),m.uc(2).onLazyLoad.emit({source:e.source,type:"new",data:e.data})})("onReloadTask",function(){return m.Uc(t),m.uc(2).onReloadTask.emit()})("onDragMoved",function(e){return m.Uc(t),m.uc(2).dragMovedUpdate(e)})("cdkDragMoved",function(e){return m.Uc(t),m.uc(2).dragMovedUpdate(e)})("cdkDragStarted",function(e){return m.Uc(t),m.uc(2).dragStarted(e)})("cdkDragEnded",function(e){return m.Uc(t),m.uc(2).dragEnded(e)})("onDragStarted",function(e){return m.Uc(t),m.uc(2).dragStarted(e)})("onDragEnded",function(e){return m.Uc(t),m.uc(2).dragEnded(e)})("onDrop",function(e){return m.Uc(t),m.uc(2).dropItem(e)})("onToggleSubtask",function(e){return m.Uc(t),m.uc(2).onToggleSubtask.emit(e)})("onTimeEstimateAction",function(e){return m.Uc(t),m.uc(2).onTimeEstimateAction.emit(e)})("onShowCreateTask",function(e){return m.Uc(t),m.uc(2).updateCreateTaskMap(e)})("onHideCreateTask",function(e){return m.Uc(t),m.uc(2).updateCreateTaskMap(e,!1)})("hoverKeyDown",function(e){return m.Uc(t),m.Rc(1).toggleMe(e)})("onIndent",function(e){return m.Uc(t),m.uc(2).indent(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.bd(11,Ec,3,5,"div",90),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(2);let a=null,i=null;m.Dc("cdkDragDisabled",s.isRenaming)("cuDragScrollContainer",s.mainScrollbar)("cuDragMarginTop",200)("cdkDragData",t)("cu-subtask",t)("pendingSubtasks",s.pendingSubtasks)("defaultAssignees",s.defaultAssignees)("subtaskList",t.subtasks)("projectExt",m.wc(2,44,s.projectExt$))("users",s.users)("weights",s.weights)("rollups",s.rollups)("userGroups",s.userGroups)("listAccess",s.listAccess)("subtasksOpenMap",s.subtasksOpenMap)("multiTaskEnabled",s.multiTaskEnabled)("timeEstimatesDataMap",s.timeEstimatesDataMap)("timeEstimateData",s.timeEstimatesDataMap[t.id])("openStatus",s.openStatus)("closedStatus",s.closedStatus)("isCompleted",s.isCompleted)("completedCounter",s.completedCounter)("moveSubtasks",s.moveSubtasks)("sortBy",s.sortBy)("showArchived",s.showArchived)("createTaskMap",s.createTaskMap)("statuses",s.statuses)("listViewColumns",m.wc(3,46,s.listViewColumns$))("task",m.wc(4,48,s.task$))("tags",s.tags)("tagsLoadingMap",s.tagsLoadingMap)("isSimpleStatus",null==(a=m.wc(5,50,s.task$))?null:a.simple_statuses)("ngClass",m.Ic(62,Fc,(null==t.status?null:t.status.type)===s.StatusTypes.Closed,"pending"==t.type))("canDeletePermission",s.canDelete)("onlyDeleteIfOwner",s.onlyDeleteIfOwner)("userId",null==s.meUser?null:s.meUser.id)("canDelete",s.canDelete||s.onlyDeleteIfOwner&&(null==s.meUser?null:s.meUser.id)===(null==t||null==t.creator?null:t.creator.id))("disabled","pending"==t.type)("defaultTaskData",m.Lc(65,xc,(null==(i=m.wc(6,52,s.task$))?null:i.parent)||(null==(i=m.wc(7,54,s.task$))?null:i.id),m.wc(8,56,s.projectExt$),null==(i=m.wc(9,58,s.task$))?null:i.category,null==(i=m.wc(10,60,s.task$))?null:i.subcategory,s.defaultAssignees))("cuHoverKeyDown",m.Gc(71,Rc))("@row",void 0),m.Jb("id","subtask-"+(null==t?null:t.id))("data-orderindex",t.orderindex)("data-id",null==t?null:t.id)}}function zc(t,e){1&t&&m.Xb(0,"div",92),2&t&&m.Dc("cu-subtask",e.$implicit)("isSimpleStatus",!1)("disabled",!0)}function Nc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",85),m.qc("cdkDropListDropped",function(e){return m.Uc(t),m.uc().dropItem(e)}),m.bd(1,Pc,12,72,"div",86),m.bd(2,zc,1,3,"div",87),m.vc(3,"async"),m.bc()}if(2&t){const t=m.uc();let e=null;m.Dc("cdkDropListDisabled",t.isCompleted&&!!t.completedCounter||!t.moveSubtasks||t.sortBy!==t.SubtaskOrderByField.Manual||t.showArchived),m.Ib(1),m.Dc("ngForOf",t.subtaskList)("ngForTrackBy",t.trackById),m.Ib(1),m.Dc("ngForOf",t.pendingSubtasks[null==(e=m.wc(3,5,t.task$))?null:e.id])("ngForTrackBy",t.trackById)}}function Hc(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-row-new",93,94),m.qc("onCreateTask",function(e){return m.Uc(t),m.uc().createTask(e)})("onLazyLoad",function(e){return m.Uc(t),m.uc().onLazyLoad.emit({source:e.source,type:"new",data:e.data})})("openStatusSettings",function(e){return m.Uc(t),m.uc().onStatusSettings.emit(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null;m.Dc("dateFormat",null==(e=m.wc(2,17,t.sharedData.currentUser))?null:e.date_format)("militaryTime",null==(s=m.wc(3,19,t.sharedData.currentUser))?null:s.twenty_four_hr_setting)("meUser",m.wc(4,21,t.sharedData.currentUser))("defaultTaskData",m.Lc(33,xc,null==(a=m.wc(5,23,t.task$))?null:a.id,m.wc(6,25,t.projectExt$),null==(a=m.wc(7,27,t.task$))?null:a.category,null==(a=m.wc(8,29,t.task$))?null:a.subcategory,t.defaultAssignees))("columns",m.wc(9,31,t.listViewColumns$))("statuses",t.statuses)("users",t.users)("weights",t.weights)("tags",t.tags)("autoFocus",!1)("closeable",!1)("canDelete",t.canDelete)("onlyDeleteIfOwner",t.onlyDeleteIfOwner)("subtaskSiblings",t.subtaskList)("forSubtask",!0)("statusStyleType","cu-task-row-status_dot")("userGroups",t.userGroups)}}function Bc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",95),m.qc("click",function(){return m.Uc(t),m.uc().showCompletedSubtasks()}),m.gc(1,96),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.kc(t.completedCounter),m.hc(1)}}function qc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",95),m.qc("click",function(){return m.Uc(t),m.uc().hideCompletedSubtasks()}),m.gc(1,97),m.bc()}}function Xc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",98),m.qc("click",function(){return m.Uc(t),m.uc().showArchivedSubtasks()}),m.gc(1,99),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.kc(t.archivedCount),m.hc(1)}}function Gc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",98),m.qc("click",function(){return m.Uc(t),m.uc().hideArchivedSubtasks()}),m.gc(1,100),m.bc()}}function Vc(t,e){if(1&t&&(m.cc(0,"div",101),m.cc(1,"div",56),m.cc(2,"span"),m.gc(3,102),m.bc(),m.bc(),m.bc()),2&t){const t=m.uc();m.Ib(3),m.kc(t.unresolvedCommentsCounter)(t.unresolvedCommentsCounter),m.hc(3)}}function Wc(t,e){1&t&&(m.cc(0,"div",103),m.cc(1,"div",104),m.Xb(2,"div",105),m.Xb(3,"div",106),m.Xb(4,"div",107),m.bc(),m.cc(5,"div",104),m.Xb(6,"div",105),m.Xb(7,"div",106),m.Xb(8,"div",107),m.bc(),m.cc(9,"div",104),m.Xb(10,"div",105),m.Xb(11,"div",106),m.Xb(12,"div",107),m.bc(),m.bc())}const Qc=function(t){return{"task-todo-item_done":t}};function Zc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",108),m.qc("commentUpdateSuccess",function(e){return m.Uc(t),m.uc().commentUpdateSuccess.emit(e)})("commentClick",function(){m.Uc(t);const s=e.$implicit;return m.uc().commentClick.emit(s)}),m.bc()}if(2&t){const t=e.$implicit,s=m.uc();m.Dc("comment",t)("users",s.users)("userGroups",s.userGroups)("ngClass",m.Hc(4,Qc,t.resolved))}}function Kc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",109),m.qc("click",function(){return m.Uc(t),m.uc().showResolvedComments()}),m.gc(1,110),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.kc(t.resolvedCounter),m.hc(1)}}function Jc(t,e){if(1&t){const t=m.dc();m.cc(0,"div",109),m.qc("click",function(){return m.Uc(t),m.uc().hideResolvedComments()}),m.gc(1,111),m.bc()}}const Yc=function(t){return{"cu-invisible":t}},to=[{id:Bt.b.Manual,title:$localize`:@@cu-subtasks__sort-items_manual:Manual`},{id:Bt.b.Status,title:$localize`:@@common_status:Status`},{id:Bt.b.Priority,title:$localize`:@@common_priority:Priority`},{id:Bt.b.DueDate,title:$localize`:@@common_due-date-1:Due Date`},{id:Bt.b.Name,title:$localize`:@@common_name:Name`}];let eo=(()=>{class t{constructor(t,e,s,a,i,n,c,o,r,l,d,u){this.dataService=t,this.taskService=e,this.sharedData=s,this.viewTaskService=a,this.helpers=i,this.taskMentionService=n,this.changeDetectorRef=c,this.selectedTasks=o,this.sharedTaskService=r,this.actions$=l,this.store=d,this.document=u,this.destroy$=new be.a,this.dragMoved$=new be.a,this.task$=this.viewTaskService.task,this.project$=this.viewTaskService.project,this.features$=new ke.a(null),this.subIdsMap$=new ke.a({}),this.projectExt$=Object(ue.a)([this.project$,this.features$]).pipe(Object(ye.a)(([t,e])=>t&&Object.assign(Object.assign({},t),{features:e}))),this.canAddSubtasks$=Object(ue.a)([this.store.select(Ft.getTeam),this.task$]).pipe(Object(ye.a)(([t,e])=>e&&(t.nested_subtasks&&e.nested_level<t.nested_subtasks_level||!e.parent)&&this.canAddSubtasks)),this.subtaskList=[],this.openSubtasksCounter=0,this.commentList=[],this.myCommentList=[],this.isMine=!1,this.isCompleted=!1,this.showArchived=!1,this.isOnlyCompleted=!1,this.isResolved=!1,this.isAll=!0,this.completedCounter=0,this.resolvedCounter=0,this.unresolvedCommentsCounter=0,this.isShowChecklistMenu=!1,this.isRenaming=!1,this.SubtaskOrderByField=Bt.b,this.trackById=Object(Dt.d)("id"),this.StatusTypes=Ut.g,this.createTaskMap={},this.sortBy=Bt.b.Manual,this.sortByDir=di.a.Asc,this.SortDirection=di.a,this.sortItems=to,this.sortTitleMap=to.reduce((t,e)=>(t[e.id]=e.title,t),{}),this.tasksFetchedMap={},this.listViewColumns$=this.features$.pipe(Object(ye.a)(t=>t?yt.mb.filter(e=>!e.clickAppId||t[e.clickAppId]&&t[e.clickAppId].enabled):[]),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.isSharingApp=St.k,this.team$=this.store.select(Ft.getTeam),this.dropActionTodo=null,this.canAddChecklists=!0,this.canAddSubtasks=!0,this.moveSubtasks=!0,this.multiTaskEnabled=!1,this.listAccess=!0,this.taskAccess=!0,this.canDelete=!0,this.subtasksOpenMap={},this.subtasksOpenMap$=new ke.a(this.subtasksOpenMap),this.hasSubsToExpand$=this.subIdsMap$.pipe(Object(ye.a)(t=>Object.entries(t).some(([t,e])=>e))),this.allExpanded$=Object(ue.a)([this.subtasksOpenMap$,this.subIdsMap$]).pipe(Object(ye.a)(([t,e])=>Object.entries(e).every(([e,s])=>!s||t[e]))),this.onRemoveSubtask=new m.o,this.onTimeEstimatChange=new m.o,this.onCreateChecklist=new m.o,this.onTimeEstimateAction=new m.o,this.onCreateChecklistFromTemplate=new m.o,this.commentUpdateSuccess=new m.o,this.onConflict=new m.o,this.onReloadTask=new m.o,this.subtaskCreated=new m.o,this.onUpdateTask=new m.o,this.onToggleSubtask=new m.o,this.onSetSubtaskMap=new m.o,this.onStatusSettings=new m.o,this.onLazyLoad=new m.o,this.onAddPendingTask=new m.o,this.onRemovePendingTask=new m.o,this.commentClick=new m.o,this.defaultAssignees=[],this.user$=this.store.select(Ft.getUser),this.sortingText=$localize`:@@common_sorting:Sorting`}ngOnInit(){this.isMine=this.isPersonalTeam(),this.currentUser=this.sharedData.currentUser.value,this.isMine&&(this.defaultAssignees=[this.currentUser]),this.task$.pipe(Object(we.a)(t=>!!t),Object(De.a)(this.destroy$)).subscribe(t=>{this.sortBy=t.subtask_sort||Bt.b.Manual,this.sortByDir=t.subtask_sort_dir||di.a.Asc,this.setList()}),this.taskService.onConvertToTask.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{t.forEach(t=>this.removeSubtask(t))}),this.taskService.onChange.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{const e=t.tasks||t;if(Array.isArray(e)){const{subIdsMap:t,subtaskMap:s}=this.getSubtasksMaps();e.forEach(t=>{s[t.id]&&(s[t.id]=Object.assign(Object.assign({},s[t.id]),t))}),this.task$.value.subtasks=this.buildNewSubtasks(t,s),this.setList()}}),this.viewTaskService.onTodoAdd.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.addComment(t)}),this.viewTaskService.onCommentChange.pipe(Object(De.a)(this.destroy$)).subscribe(({comment:t})=>{this.updateComment(t)}),this.dragMoved$.pipe(Object(oi.a)(150),Object(De.a)(this.destroy$)).subscribe(t=>{this.isDragging&&this.dragMoved(t)}),this.viewTaskService.onCommentResolveToggle.pipe(Object(Se.a)(this.user$),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{const s=this.getCommentById(t.id);s&&(s.resolved=t.resolved),t.resolved&&(s.resolved_by=e),this.commentList=this.getFilteredComments(),this.changeDetectorRef.markForCheck()}),this.viewTaskService.onCommentAssignToggle.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{if(t.assignee||t.group_assignee){const e=this.getCommentById(t.id);e?(e.assignee=t.assignee,e.group_assignee=t.group_assignee):this.task$.value.todoComments.push(t)}else{const e=this.getCommentIndex(t.id);-1!==e&&this.task$.value.todoComments.splice(e,1)}this.setList()}),this.viewTaskService.onCommentRemove.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.deleteComment(t)}),this.viewTaskService.onCommentUndo.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.undoDeleteComment(t)}),this.viewTaskService.onCommentUpdate.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{const e=this.getCommentIndex(t.id);-1!==e&&(this.task$.value.todoComments[e]=t,this.setList())}),this.actions$.pipe(Object(se.d)(W.e.CreateCommentSuccess),Object(we.a)(t=>t.payload.type===E.c.Attachment),Object(De.a)(this.destroy$)).subscribe(t=>{const e=this.task$.value.attachments.find(e=>e.id===t.payload.parent);this.addComment(Object.assign(Object.assign({},t.payload.comment),{attachment_parent:e}))}),this.actions$.pipe(Object(se.d)(W.e.UpdateCommentSuccess),Object(we.a)(t=>t.payload.type===E.c.Attachment),Object(De.a)(this.destroy$)).subscribe(t=>{this.updateComment(t.payload.comment)}),this.actions$.pipe(Object(se.d)(W.e.CreateCommentSuccess),Object(we.a)(({payload:t})=>!!t.comment.assignee),Object(De.a)(this.destroy$)).subscribe(t=>this.addComment(t.payload.comment)),this.actions$.pipe(Object(se.d)(W.e.DeleteCommentSuccess),Object(we.a)(t=>t.payload.type===E.c.Attachment),Object(De.a)(this.destroy$)).subscribe(t=>{this.deleteComment(t.payload.commentId)}),this.actions$.pipe(Object(se.d)(W.e.UndoDeleteCommentSuccess),Object(we.a)(t=>t.payload.type===E.c.Attachment),Object(De.a)(this.destroy$)).subscribe(t=>{this.undoDeleteComment(t.payload.commentId)})}ngOnChanges(t){t.task&&t.task.currentValue.id&&this.setList(),t.subtasksOpenMap&&this.subtasksOpenMap$.next(this.subtasksOpenMap),t.features&&this.features$.next(this.features)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}addComment(t){this.task$.value.todoComments.some(e=>e.id===t.id)||(this.task$.value.todoComments.push(t),this.setList())}updateComment(t){const e=this.getCommentIndex(t.id);-1===e?(t.assignee||t.group_assignee)&&this.task$.value.todoComments.push(t):t.assignee||t.group_assignee?this.task$.value.todoComments[e]=t:this.task$.value.todoComments.splice(e,1),this.commentList=this.getFilteredComments(),this.changeDetectorRef.markForCheck()}deleteComment(t){const e=this.getCommentIndex(t);-1!==e&&(this.task$.value.todoComments[e].comment.removed=!0,this.setList())}undoDeleteComment(t){const e=this.getCommentIndex(t);-1!==e&&(this.task$.value.todoComments[e].comment.removed=!1,this.setList())}showChecklistMenu(){this.isShowChecklistMenu=!0}hideChecklistMenu(){this.isShowChecklistMenu=!1}removeSubtask(t){this.task$.value.subtasks=this.task$.value.subtasks.filter(e=>e.id!==t.id),this.task$.next(this.task$.value),this.onRemoveSubtask.emit(t.id)}setList(){this.subtaskList=this.getSubtasksList(),this.commentList=this.getFilteredComments();const{subtaskMap:t}=this.getSubtasksMaps();this.completedCounter=Object.keys(t).reduce((e,s)=>(Object(et.l)(t[s].status)&&e++,e),0);const e=Object.entries(t).map(([t,e])=>e);this.selectedTasks.selectedTaskList.forEach(t=>{e.find(e=>e.id===t.id)||this.selectedTasks.toggleTask(t)}),this.changeDetectorRef.markForCheck(),this.task$.value&&this.task$.value.checklists&&(this.checklistsLength=this.task$.value.checklists.length)}showMine(){this.isOnlyCompleted=!1,this.isMine=!0,this.isAll=!1,this.defaultAssignees=[this.currentUser],this.setList()}showAll(){this.isOnlyCompleted=!1,this.isMine=!1,this.isAll=!0,this.defaultAssignees=[],this.setList()}showOnlyCompleted(){this.isOnlyCompleted=!0,this.isMine=!1,this.isAll=!1,this.setList()}showCompletedSubtasks(){this.isCompleted=!0,this.subtaskList=this.getSubtasksList()}hideCompletedSubtasks(){this.isCompleted=!1,this.subtaskList=this.getSubtasksList()}showArchivedSubtasks(){this.showArchived=!0,this.subtaskList=this.getSubtasksList()}hideArchivedSubtasks(){this.showArchived=!1,this.subtaskList=this.getSubtasksList()}showResolvedComments(){this.isResolved=!0,this.commentList=this.getFilteredComments(),setTimeout(()=>this.taskMentionService.updateMentions())}hideResolvedComments(){this.isResolved=!1,this.commentList=this.getFilteredComments()}dragStarted(t){this.isDragging=!0}dragEnded(t){this.isDragging=!1}dragMovedUpdate(t){this.dragMoved$.next(t)}updateCreateTaskMap({id:t},e=!0){this.createTaskMap={[t]:e},e&&this.onToggleSubtask.emit({subtaskId:t,force:!0,val:!0}),this.changeDetectorRef.markForCheck()}dragMoved(t){const e=this.document.elementFromPoint(t.pointerPosition.x,t.pointerPosition.y);if(!e)return void this.clearDragInfo(!0);const s=e.classList.contains("cu-subtask-drag")?e:e.closest(".cu-subtask-drag");if(!s)return void this.clearDragInfo(!0);const a=s.getAttribute("data-id"),i=!this.dropActionTodo||this.dropActionTodo.targetId!==a||this.dropActionTodo.dropTaskId!==t.source.data.id;i&&(this.dropActionTodo={targetId:a,dropTaskId:t.source.data.id,container:s});const n=s.getBoundingClientRect();this.store.select(Object(qt.d)(this.dropActionTodo.targetId)).pipe(Object(we.a)(t=>!!t||(this.tasksFetchedMap[this.dropActionTodo.targetId]||(this.tasksFetchedMap[this.dropActionTodo.targetId]=!0,this.store.dispatch(new ci.n({ids:[this.dropActionTodo.targetId]}))),!1)),Object(Se.a)(this.team$),Object(Ue.a)(1),Object(De.a)(this.destroy$)).subscribe(([e,s])=>{i&&(this.dropActionTodo.target_nesting_level=e.nested_level||0);const a=t.source.data.depth_to_deepest_child||0,c=Object(yt.lb)(s),o=this.dropActionTodo.target_nesting_level+a<=c.levels+1,r=e.parent&&!c.enabled||!o?2:3;if(!o)return void(this.dropActionTodo=null);const l=n.height/2;t.pointerPosition.x-n.left>50&&c&&c.enabled?(this.dropActionTodo.action=yt.a.INSIDE,this.showDragInfo()):t.pointerPosition.y-n.top<l?(this.dropActionTodo.action=yt.a.BEFORE,this.showDragInfo()):(this.dropActionTodo.action=yt.a.AFTER,this.showDragInfo()),this.dropActionTodo.allowNewSubtasks=r})}showDragInfo(){this.clearDragInfo(),this.dropActionTodo&&this.document.getElementById(`${this.dropActionTodo.action===yt.a.INSIDE?"subtask-container-":"subtask-"}${this.dropActionTodo.targetId}`).classList.add("drop-"+this.dropActionTodo.action)}clearDragInfo(t=!1){t&&(this.dropActionTodo=null),this.document.querySelectorAll(".drop-before").forEach(t=>t.classList.remove("drop-before")),this.document.querySelectorAll(".drop-after").forEach(t=>t.classList.remove("drop-after")),this.document.querySelectorAll(".drop-inside").forEach(t=>t.classList.remove("drop-inside")),this.changeDetectorRef.detectChanges()}recurseSort(t){return t.sort(this.getSortByFunc()),t.forEach(t=>{t.subtasks&&t.subtasks.length&&(t.subtasks=this.recurseSort([...t.subtasks]))}),t}recurseComplete(t){const e=(t||[]).filter(t=>!Object(et.l)(t.status)||!this.isCompleted&&this.showArchived&&t.archived).map(t=>Object.assign({},t));return e.forEach(t=>{t.subtasks&&t.subtasks.length&&(t.subtasks=this.recurseComplete([...t.subtasks]))}),e}getSubtasksList(){const t=this.getFilteredSubtasks(),e=Object(Rt.P)(t).reduce((t,e)=>(t[e.id]=!(!e.subtasks||!e.subtasks.length),t),{});return this.subIdsMap$.next(e),t}getFilteredSubtasks(){if(!this.task$.value)return[];if(this.isOnlyCompleted)return this.completedCounter=0,[...this.task$.value.subtasks||[]].filter(t=>Object(et.l)(t.status)).sort(this.getSortByFunc());let t=[],e=!1;(this.isAll||this.sharedData.compatCurrentTeam&&this.sharedData.compatCurrentTeam.personal_team)&&(e=!0,t=this.recurseSort([...this.task$.value.subtasks||[]])),!this.isMine||this.sharedData.compatCurrentTeam&&this.sharedData.compatCurrentTeam.personal_team||(t=this.getFilterForMine(e?t:this.task$.value.subtasks)),this.archivedCount=t.filter(t=>t.archived).length,t=t.filter(t=>!t.archived||this.showArchived);const s=this.recurseComplete([...t]);return this.openSubtasksCounter=t.length,this.isCompleted?t:s}getFilterForMine(t){const e=t=>{const s=-1!==t.assignees.map(t=>t.id).indexOf(this.currentUser.id),a=[];return(t.subtasks||[]).forEach(t=>{const s=e(Object.assign({},t));s&&a.push(s)}),t.subtasks=a,s||t.subtasks.length?t:null},s=[];return(t||[]).forEach(t=>{const a=e(Object.assign({},t));a&&s.push(a)}),s}getClosedSubtaskCounter(){return this.task$.value?this.task$.value.subtasks.filter(t=>Object(et.l)(t.status)).length:0}getFilteredComments(){if(!this.task$.value||!this.task$.value.todoComments)return[];let t=[],e=[],s=[];return t=this.task$.value.todoComments.filter(t=>!t.comment.removed),this.myCommentList=t.filter(t=>t.assignee&&t.assignee.id===this.currentUser.id||t.group_assignee&&t.group_assignee.members.some(t=>t.id===this.currentUser.id)),this.isMine&&(t=this.myCommentList),e=t.filter(t=>t.resolved),s=t.filter(t=>!t.resolved),this.unresolvedCommentsCounter=s.length,this.resolvedCounter=e.length,this.isResolved?t:s}openCreateTaskQuick(t){this.position=null,isNaN(t)||(this.position=t+1),this.quickAdd&&this.quickAdd.setFocus(),this.dropdown&&this.dropdown.close()}removePendingSubtask(t,e){this.onRemovePendingTask.emit({id:t,parentId:e})}toggleExpandAll(){Object(ue.a)([this.allExpanded$,this.subIdsMap$]).pipe(Object(Ue.a)(1),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{this.onSetSubtaskMap.emit({parentTaskMap:t?{}:Object.entries(e).reduce((t,[e,s])=>(s&&(t[e]=!0),t),{})})})}addPendingSubtask(t){t.type="pending",t.status=this.openStatus||Qe.d,t.priority=ui.b.find(e=>String(e.id)===String(t.priority)),this.onAddPendingTask.emit(t)}addSavedSubtask(t){this.removePendingSubtask(t.pendingId,t.task.subtask_parent||t.task.parent),this.addSubtask(t.task),this.subtaskCreated.emit({task:t.task,elementRef:this.quickAddElement})}addSubtask(t){const{subIdsMap:e,subtaskMap:s}=this.getSubtasksMaps(),a=s[t.subtask_parent||t.parent];s[t.id]=t;let i=e[t.subtask_parent||t.parent];i||(e[t.subtask_parent||t.parent]=[]),i=e[t.subtask_parent||t.parent],i.push(t.id),a&&(a.subtasks_by_status=a.subtasks_by_status?a.subtasks_by_status.map(e=>e&&e.status&&t&&t.status&&e.status.status===t.status.status?Object.assign(Object.assign({},e),{count:e.count+1}):e):[{status:this.openStatus||Qe.d,count:1}]),this.task$.value.subtasks=this.buildNewSubtasks(e,s),this.setList(),this.onReloadTask.emit()}updateSubtask(t){const e=Object.assign({},this.task$.value);e.subtasks=e.subtasks.map(e=>e.id===t.id?Object.assign(Object.assign({},e),{subtask:t}):e),this.setList(),this.onUpdateTask.emit(e)}updateSubtasks(){this.dataService.getTask(this.task$.value.id).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.task$.value.subtasks=t.subtasks,this.setList()})}highlightComment(t){this.viewTaskService.onHighlightComment.emit({comment:t})}update(){this.setList()}emitChecklistCreate(){this.store.dispatch(new ri.sb(!0)),this.dropdown&&this.dropdown.close()}isPersonalTeam(){return!!this.sharedData.compatCurrentTeam.personal_team}changeOrder(t){this.sortBy===t&&(this.sortByDir=this.sortByDir===di.a.Asc?di.a.Desc:di.a.Asc),this.sortBy=t,this.setList();const e={subtask_sort:this.sortBy,subtask_sort_dir:this.sortByDir},s=Object.assign(Object.assign({},this.task$.value),e);this.onUpdateTask.next(s),this.dataService.editTask(this.task$.value.id,e,!0).subscribe(t=>{})}reverseSortOrder(t){t.preventDefault(),t.stopPropagation(),this.changeOrder(this.sortBy)}selectSort(t){this.changeOrder(t.id)}createSubtask(t,e=!1){const s="PENDING_"+this.helpers.getUniqueId();this.addPendingSubtask(Object.assign(Object.assign({id:s},t),{group_assignees:t.group_assignees&&t.group_assignees.map(t=>this.userGroups.find(e=>e.id===t))})),this.dataService.createTask(t.subcategoryId,t).subscribe(t=>{this.addSavedSubtask({task:t.task,pendingId:s}),e&&this.sharedTaskService.openTaskModal({id:t.task.id,customId:t.task.custom_id,teamId:t.task.team})},()=>{this.removePendingSubtask(s,t.subtask_parent||t.parent)})}createTask(t){const e=t.data;t.multi&&t.multi.length?t.multi.forEach((t,s)=>{this.createSubtask(Object.assign(Object.assign({},e),{name:t,subtask_orderindex:e.subtask_orderindex+s}),!1)}):this.createSubtask(e,t.open),this.position=null}getSubtasksMaps(){const t=Object(Rt.P)(this.task$.value.subtasks||[]),e=t.reduce((t,e)=>(t[e.id]=e,t),{}),s=t.reduce((t,e)=>(e.subtasks&&e.subtasks.length&&(t[e.id]=e.subtasks.map(t=>t.id)),t),{});return(this.task$.value.subtasks||[]).length&&(s[this.task$.value.id]=this.task$.value.subtasks.map(t=>t.id)),e[this.task$.value.id]=this.task$.value,{subtaskMap:e,subIdsMap:s}}buildNewSubtasks(t,e){return(t[this.task$.value.id]||[]).map(s=>{const a=e[s];return function s(a){t[a.id]&&(a.subtasks=(t[a.id]||[]).map(t=>e[t]).filter(t=>!!t),a.subtasks.forEach(t=>s(t)))}(a),a})}indent({indent:t,subtask:e}){return s=this,void 0,i=function*(){const s=yield this.team$.pipe(Object($e.a)()).toPromise(),a=Object(yt.lb)(s);if(!a||!a.enabled)return;const{subIdsMap:i,subtaskMap:n}=this.getSubtasksMaps();let c,o;const r=i[e.subtask_parent||e.parent]||[],l=r.findIndex(t=>t===e.id);if(t){if(-1===l||0===l)return;c=n[r[l-1]],o=n[e.subtask_parent||e.parent]}else{if(!e.subtask_parent)return;if(-1===l)return;o=n[e.subtask_parent],c=n[o.subtask_parent||o.parent]}let d=i[c.id];d||(i[c.id]=[],d=i[c.id]);const u=t?d.length:d.findIndex(t=>o.id===t)+1;Object(li.h)(r,d,l,u),this.updateAllSubtasksCount(o,c,e,n);const h=t?d.length>1?d[d.length-2]:null:o.id,m=h?n[h]:null,b=h?n[u<d.length-1?d[u+1]:null]:null,k=this.getNewOrderIndex(m,b);n[e.id]=Object.assign(Object.assign({},e),{orderindex:k}),this.task$.value.subtasks=this.buildNewSubtasks(i,n),this.setList(),this.updateNestedSubtask(e,m,b,k,c)},new((a=void 0)||(a=Promise))(function(t,e){function n(t){try{o(i.next(t))}catch(s){e(s)}}function c(t){try{o(i.throw(t))}catch(s){e(s)}}function o(e){var s;e.done?t(e.value):(s=e.value,s instanceof a?s:new a(function(t){t(s)})).then(n,c)}o((i=i.apply(s,[])).next())});var s,a,i}updateNestedSubtask(t,e,s,a,i){const n={id:t.id,new_index:a,new_parent:i.id};e&&(n.above=e.orderindex,n.taskAbove=e.id),s&&(n.taskBelow=s.id),this.dataService.changeTaskListBoardPosition([n]).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.updateSubtasks()})}updateAllSubtasksCount(t,e,s,a){this.updateSubtasksCount(t,s);let i=a[t.subtask_parent];for(;i;)this.updateSubtasksCount(i,s),i=a[i.subtask_parent];this.updateSubtasksCount(e,s);let n=a[e.subtask_parent];for(;n;)this.updateSubtasksCount(n,s),n=a[n.subtask_parent]}dropItem(t){if(!this.dropActionTodo)return;const e=this.dropActionTodo,{subIdsMap:s,subtaskMap:a}=this.getSubtasksMaps(),i=a[e.targetId];let n=s[e.action===yt.a.INSIDE?i.id:i.subtask_parent||i.parent];n||(s[e.action===yt.a.INSIDE?i.id:i.subtask_parent||i.parent]=[],n=s[e.action===yt.a.INSIDE?i.id:i.subtask_parent||i.parent]);const c=n.findIndex(t=>t===i.id),o=t.item.data,r=s[o.subtask_parent||o.parent],l=r.findIndex(t=>t===o.id);let d;d=e.action===yt.a.INSIDE?0:e.action===yt.a.AFTER?c+1:c;const u=a[o.subtask_parent||o.parent],h=e.action===yt.a.INSIDE?i:a[i.subtask_parent||i.parent];let m,b;u.id===h.id?(this.dropActionTodo&&(this.dropActionTodo.action===yt.a.BEFORE||this.dropActionTodo.action===yt.a.AFTER)&&l<d&&(d-=1),Object(li.g)(n,l,d)):Object(li.h)(r,n,l,d),u.id!==h.id&&this.updateAllSubtasksCount(u,h,o,a),this.clearDragInfo(!0);const k=d>0?s[h.id][d-1]:null;k&&(m=a[k]);const p=d<s[h.id].length-1?s[h.id][d+1]:null;p&&(b=a[p]);const g=this.getNewOrderIndex(m,b);a[o.id]=Object.assign(Object.assign({},o),{orderindex:g}),this.task$.value.subtasks=this.buildNewSubtasks(s,a),this.setList(),this.updateNestedSubtask(o,m,b,g,h)}getNewOrderIndex(t,e){let s;return s=t&&e?(Number(t.orderindex)+Number(e.orderindex))/2:t?Number(t.orderindex)+1:e?Number(e.orderindex)-1:0,s}resetSortOrder(t){}updateSubtasksCount(t,e,s=!0){s?(t.subtasks_count=Math.max((t.subtasks_count||0)+((e.subtasks_count||0)+1),0),t.subtasks_open_count=Math.max((t.subtasks_open_count||0)+((e.subtasks_open_count||0)+1),0)):(t.subtasks_count=Math.max((t.subtasks_count||0)-((e.subtasks_count||0)+1),0),t.subtasks_open_count=Math.max((t.subtasks_open_count||0)-((e.subtasks_open_count||0)+1),0))}renamingSubtask(t){this.isRenaming=t}getCommentIndex(t){return this.task$.value.todoComments.findIndex(e=>e.id===t)}getCommentById(t){return this.task$.value.todoComments.find(e=>e.id===t)}getSortByFunc(){const t=this.sortByDir===di.a.Desc?-1:1;switch(this.sortBy){case Bt.b.Status:return(e,s)=>t*(e.status.orderindex-s.status.orderindex);case Bt.b.Priority:return(e,s)=>t*((e.priority?parseFloat(e.priority.orderindex):-1)-(s.priority?parseFloat(s.priority.orderindex):-1));case Bt.b.Name:return(e,s)=>t*(e.name||"").localeCompare(s.name||"");case Bt.b.DueDate:return(e,s)=>e.due_date?s.due_date?-1===t?parseFloat(e.due_date)<parseFloat(s.due_date)?1:-1:parseFloat(e.due_date)>parseFloat(s.due_date)?1:-1:-1:1;default:return(e,s)=>t*(parseFloat(e.orderindex)-parseFloat(s.orderindex))}}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Be.a),m.Wb(Ze.a),m.Wb(Ge.a),m.Wb(Ye.a),m.Wb(Qe.b),m.Wb(us.a),m.Wb(m.h),m.Wb(G.a),m.Wb(ts.a),m.Wb(se.a),m.Wb(tt.Store),m.Wb(l.d))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-subtasks"]],viewQuery:function(t,e){if(1&t&&(m.jd(oc,1),m.jd(rc,1),m.jd(rc,1,m.m)),2&t){let t;m.Qc(t=m.rc())&&(e.dropdown=t.first),m.Qc(t=m.rc())&&(e.quickAdd=t.first),m.Qc(t=m.rc())&&(e.quickAddElement=t.first)}},inputs:{canAddChecklists:"canAddChecklists",canAddSubtasks:"canAddSubtasks",moveSubtasks:"moveSubtasks",multiTaskEnabled:"multiTaskEnabled",listAccess:"listAccess",taskAccess:"taskAccess",features:"features",openStatus:"openStatus",closedStatus:"closedStatus",statuses:"statuses",users:"users",tags:"tags",tagsLoadingMap:"tagsLoadingMap",disconnected:"disconnected",canDelete:"canDelete",onlyDeleteIfOwner:"onlyDeleteIfOwner",meUser:"meUser",mainScrollbar:"mainScrollbar",weights:"weights",pendingSubtasks:"pendingSubtasks",userGroups:"userGroups",timeEstimatesDataMap:"timeEstimatesDataMap",rollups:"rollups",subtasksOpenMap:"subtasksOpenMap"},outputs:{onRemoveSubtask:"onRemoveSubtask",onTimeEstimatChange:"onTimeEstimatChange",onCreateChecklist:"onCreateChecklist",onTimeEstimateAction:"onTimeEstimateAction",onCreateChecklistFromTemplate:"onCreateChecklistFromTemplate",commentUpdateSuccess:"commentUpdateSuccess",onConflict:"onConflict",onReloadTask:"onReloadTask",subtaskCreated:"subtaskCreated",onUpdateTask:"onUpdateTask",onToggleSubtask:"onToggleSubtask",onSetSubtaskMap:"onSetSubtaskMap",onStatusSettings:"onStatusSettings",onLazyLoad:"onLazyLoad",onAddPendingTask:"onAddPendingTask",onRemovePendingTask:"onRemovePendingTask",commentClick:"commentClick"},features:[m.Gb],decls:36,vars:46,consts:function(){let t,e,s,a,i,n,c,o,r,l,d,u,h,b,k,p,g,v,f,_,y,w,T,C,S;return t=$localize`:@@cu-subtasks__todo␟03c974b416a9b7df4c425435e1d4b669c53ef530␟1352696471166394339:To Do`,e=$localize`:@@common_add␟f6755cff4957d5c3c89bafce5651f1b6fa2b1fd9␟3249513483374643425:Add`,s=$localize`:@@common_subtasks␟0bce0f685d4755dc95f15cd5069ddeba02db9f0a␟9139518053026948448:Subtask`,a=$localize`:@@common_checklist␟bc086c3e3aa05d214fad1d43ae729aadf1d9321c␟6269606295190909224:Checklist`,i=$localize`:@@common_add-checklist␟09ee10a652da06375ad6b718adda604cf5210345␟7791426209832144175:Add checklist`,n=$localize`:@@common_mine␟23d1685dcc0441a55857939c260e3063fdc129a7␟3837998331656264333: Mine `,c=$localize`:used in filtering items@@common_all--filter-item␟6f38d53bf6192c4d83d21fc84478cf97c2bc81c2␟287034733501059456: All `,o=$localize`:@@common_show-all␟867e41df7134e3caaee051a670f8cbeb8883302c␟8832680940728722211:Show All`,r=$localize`:@@common_mine␟5fc236062c3302ac43b0ebe260d409e53fa1980e␟4614074718430609483: Mine `,l=$localize`:used in filtering items@@common_all--filter-item␟bcfbb5d58a044a50c86db0553684f6df79fe3bf3␟8209629012305538368: All `,d=$localize`:@@cu-subtasks__tooltip-msg_sort-subtasks␟a6994814381a20b990be7351f1298404b9c78a75␟6077655097653886682:Sort Subtasks`,u=$localize`:@@common_subtasks␟83efb157e6da28ea41b257d0f2b8c3cd8b5a6d72␟7541717649355997013:Subtasks`,h=$localize`:@@common_subtasks␟83efb157e6da28ea41b257d0f2b8c3cd8b5a6d72␟7541717649355997013:Subtasks`,b=$localize`:@@cu-subtasks__subtask-1␟d9635d29af1edf9081426c60b9eb50074f59de94␟8589231249505504810:1 Subtask`,k=$localize`:@@cu-subtasks__subtask-other␟d347d66249b194e79020116032c001ff6ef5b94a␟6385304119833635016:${"\ufffd0\ufffd"}:INTERPOLATION: Subtasks`,p=$localize`:@@subtasks_collapse-all␟ac436f6e937e321dd4f76e55a8597c7e1c39c1ce␟6282952764980134731: Collapse all `,g=$localize`:@@subtasks_expand-all␟c1d555c5563551d90dd004f38adb3a15cf8ad846␟1918603297826248431: Expand all `,v=$localize`:@@cu-subtasks__task-completed-label␟e78d7fbb02ca02db56efc97bd8f9bc2898f058cf␟7354491568954742028: ${"\ufffd0\ufffd"}:INTERPOLATION: Completed `,f=$localize`:@@common_hide-completed␟d67b5f55c3fd494cb742e06adeef54af65097187␟5537635233402780835: Hide completed `,_=$localize`:@@cu-subtasks__task-archived-label␟376582c44f43521a814136627d395179dcef0517␟6324247971835555801: ${"\ufffd0\ufffd"}:INTERPOLATION: Archived `,y=$localize`:@@common_hide-archived␟42c2248b3e64ef51cb726cb06fa46b1f1057b3bd␟7498563916766047188: Hide archived `,w=$localize`:␟8e94f94b08ae8e50624156e3415f9c82eb451ed4␟2518864138011204200:{VAR_PLURAL, plural, =0 {Comments} =1 {1 Comment} other {{INTERPOLATION} Comments}}`,w=m.lc(w,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),T=$localize`:@@cu-subtasks__unresolved-comments-count␟a21abb79c5d27d6d48bcf55a8923a422b6c5272e␟6724853996442180694: ${w}:ICU: `,C=$localize`:@@common_resolved-interpolated␟323f0b6eb2532116aaf6128e2f553f5266aeeccb␟6521441853535224558: ${"\ufffd0\ufffd"}:INTERPOLATION: Resolved `,S=$localize`:@@common_hide-resolved␟bd732435565e4a2fcf2f643881d3164d5000c6a2␟4216698901697718287: Hide Resolved `,[[1,"task-todo",3,"ngClass"],[1,"task-todo__header","cu-hidden-print"],[1,"task-todo__title"],t,["class","cu-dt-filter__dropdown",4,"ngIf","ngIfElse"],["showJustAddChecklist",""],["class","task-todo-nav",4,"ngIf"],["class","task-todo-nav_mobile","cuDropdown","",4,"ngIf"],["class","task-todo__subtitle-row",4,"ngIf"],["class","task-todo__section","cdkDropList","","cdkDropListOrientation","vertical",3,"cdkDropListDisabled","cdkDropListDropped",4,"ngIf"],["class","cu-hidden-print",3,"dateFormat","militaryTime","meUser","defaultTaskData","columns","statuses","users","weights","tags","autoFocus","closeable","canDelete","onlyDeleteIfOwner","subtaskSiblings","forSubtask","statusStyleType","userGroups","onCreateTask","onLazyLoad","openStatusSettings",4,"ngIf"],["class","task-completed-label",3,"click",4,"ngIf"],["class","task-completed-label task-completed-label_archived",3,"click",4,"ngIf"],["class","task-todo__subtitle-row task-todo__subtitle-row_comments",4,"ngIf"],["class","subtask-loader",4,"ngIf"],[1,"task-todo__section"],["class","task-todo-item task-todo-item_comment","todo-comment","",3,"comment","users","userGroups","ngClass","commentUpdateSuccess","commentClick",4,"ngFor","ngForOf","ngForTrackBy"],["class","comment-resolved-label",3,"click",4,"ngIf"],[1,"cu-dt-filter__dropdown"],["cuDropdown","","dropdown-child-id","checklist-menu",1,"cu-dropdown_bottom","cu-dropdown_pointer","cu-dropdown_center",3,"dropdownCloseOnInsideClick"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-todo-list__add"],[1,"cu-todo-list__add-text"],e,["icon","dropdown-settings_down",1,"cu-todo-list__add-dropdown"],["class","cu-dropdown__menu_overflow-hidden",4,"cuDropdownMenu"],[1,"cu-dropdown__menu_overflow-hidden"],[1,"filter-list"],["class","filter-list__item task-drowdown__item",3,"click",4,"ngIf"],["class","filter-list__body task-drowdown",4,"ngIf"],[1,"filter-list__item","task-drowdown__item",3,"click"],["icon","cu2-subtask",1,"task-drowdown__item__icon","task-drowdown__item__icon_subtask"],s,[1,"filter-list__body","task-drowdown"],[1,"cu-dropdown","cu-dropdown_center","cu-dropdown_pointer","show-checklist-menu"],[1,"task-drowdown__item__icon","task-drowdown__item__icon_circle"],a,["class","cu-todo-list__add",3,"click",4,"ngIf"],[1,"cu-todo-list__add",3,"click"],i,[1,"task-todo-nav"],["cuLink","","class","task-todo-nav__item",3,"ngClass","click",4,"ngIf"],["cuLink","",1,"task-todo-nav__item",3,"ngClass","click"],n,c,["cuDropdown","",1,"task-todo-nav_mobile"],["cuDropdownToggle","",1,"task-todo-nav__show-all"],o,["icon","cu2-caret-down",1,"task-todo-nav__show-all-icon"],["class","task-todo-nav__show-all-menu",4,"cuDropdownMenu"],[1,"task-todo-nav__show-all-menu"],["cuLink","","class","task-todo-nav__menu-item",3,"ngClass","click",4,"ngIf"],["cuLink","",1,"task-todo-nav__menu-item",3,"ngClass","click"],r,l,[1,"task-todo__subtitle-row"],[1,"task-todo__subtitle"],["class","lv-task__toggle",3,"click",4,"ngIf"],["class","lv-task__toggle lv-task__toggle--selected",3,"click",4,"ngIf"],[4,"ngIf"],[3,"ngPlural",4,"ngIf"],[1,"task-todo__subtitle-reorder",3,"items","title","dropdownCloseOthersOnOpen","onSelect"],["cuTooltip",d,"tooltipModifier","tooltip_less-near",1,"task-todo-nav__item","task-todo-nav__item_row"],["class","task-todo-nav__item-order task-todo-nav__item-order_ask","icon","order-ask",3,"click",4,"ngIf"],["class","task-todo-nav__item-order task-todo-nav__item-order_desc","icon","order-ask",3,"click",4,"ngIf"],[1,"task-todo-nav__item-title"],["class","task-todo-nav__item task-todo-nav__item-expand",3,"click",4,"ngIf"],[1,"lv-task__toggle",3,"click"],[1,"lv-task__toggle-marker"],[1,"lv-task__toggle","lv-task__toggle--selected",3,"click"],u,[3,"ngPlural"],["ngPluralCase","0"],["ngPluralCase","1"],["ngPluralCase","other"],h,b,k,["icon","order-ask",1,"task-todo-nav__item-order","task-todo-nav__item-order_ask",3,"click"],["icon","order-ask",1,"task-todo-nav__item-order","task-todo-nav__item-order_desc",3,"click"],[1,"task-todo-nav__item","task-todo-nav__item-expand",3,"click"],[4,"ngIf","ngIfElse"],["showExpandAll",""],p,g,["cdkDropList","","cdkDropListOrientation","vertical",1,"task-todo__section",3,"cdkDropListDisabled","cdkDropListDropped"],["class","task-todo-item cu-subtask-drag","cdkDrag","","cuDragScroll","",3,"cdkDragDisabled","cuDragScrollContainer","cuDragMarginTop","cdkDragData","cu-subtask","pendingSubtasks","defaultAssignees","subtaskList","projectExt","users","weights","rollups","userGroups","listAccess","subtasksOpenMap","multiTaskEnabled","timeEstimatesDataMap","timeEstimateData","openStatus","closedStatus","isCompleted","completedCounter","moveSubtasks","sortBy","showArchived","createTaskMap","statuses","listViewColumns","task","tags","tagsLoadingMap","isSimpleStatus","ngClass","canDeletePermission","onlyDeleteIfOwner","userId","canDelete","disabled","defaultTaskData","cuHoverKeyDown","onCreateTask","onRemove","onCreate","onChange","onRenaming","onConflict","onTimeEstimatChange","onResetSortOrder","onUpdateSubtask","onLazyLoad","onReloadTask","onDragMoved","cdkDragMoved","cdkDragStarted","cdkDragEnded","onDragStarted","onDragEnded","onDrop","onToggleSubtask","onTimeEstimateAction","onShowCreateTask","onHideCreateTask","hoverKeyDown","onIndent",4,"ngFor","ngForOf","ngForTrackBy"],["class","task-todo-item task-todo-item_pending",3,"cu-subtask","isSimpleStatus","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cuDragScroll","",1,"task-todo-item","cu-subtask-drag",3,"cdkDragDisabled","cuDragScrollContainer","cuDragMarginTop","cdkDragData","cu-subtask","pendingSubtasks","defaultAssignees","subtaskList","projectExt","users","weights","rollups","userGroups","listAccess","subtasksOpenMap","multiTaskEnabled","timeEstimatesDataMap","timeEstimateData","openStatus","closedStatus","isCompleted","completedCounter","moveSubtasks","sortBy","showArchived","createTaskMap","statuses","listViewColumns","task","tags","tagsLoadingMap","isSimpleStatus","ngClass","canDeletePermission","onlyDeleteIfOwner","userId","canDelete","disabled","defaultTaskData","cuHoverKeyDown","onCreateTask","onRemove","onCreate","onChange","onRenaming","onConflict","onTimeEstimatChange","onResetSortOrder","onUpdateSubtask","onLazyLoad","onReloadTask","onDragMoved","cdkDragMoved","cdkDragStarted","cdkDragEnded","onDragStarted","onDragEnded","onDrop","onToggleSubtask","onTimeEstimateAction","onShowCreateTask","onHideCreateTask","hoverKeyDown","onIndent"],["subtaskRow",""],["class","cu-subtask__multi-preview",4,"cdkDragPreview"],[1,"cu-subtask__multi-preview"],[1,"task-todo-item","task-todo-item_pending",3,"cu-subtask","isSimpleStatus","disabled"],[1,"cu-hidden-print",3,"dateFormat","militaryTime","meUser","defaultTaskData","columns","statuses","users","weights","tags","autoFocus","closeable","canDelete","onlyDeleteIfOwner","subtaskSiblings","forSubtask","statusStyleType","userGroups","onCreateTask","onLazyLoad","openStatusSettings"],["quickAdd",""],[1,"task-completed-label",3,"click"],v,f,[1,"task-completed-label","task-completed-label_archived",3,"click"],_,y,[1,"task-todo__subtitle-row","task-todo__subtitle-row_comments"],T,[1,"subtask-loader"],[1,"subtask-loader__row"],[1,"subtask-loader__status"],[1,"subtask-loader__user"],[1,"subtask-loader__name"],["todo-comment","",1,"task-todo-item","task-todo-item_comment",3,"comment","users","userGroups","ngClass","commentUpdateSuccess","commentClick"],[1,"comment-resolved-label",3,"click"],C,S]},template:function(t,e){if(1&t&&(m.cc(0,"div",0),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.cc(4,"div",1),m.cc(5,"div",2),m.ac(6),m.gc(7,3),m.Zb(),m.bd(8,hc,8,1,"div",4),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.bd(12,bc,2,3,"ng-template",null,5,m.cd),m.bc(),m.bd(14,gc,5,6,"div",6),m.vc(15,"async"),m.bd(16,_c,6,0,"div",7),m.vc(17,"async"),m.bc(),m.bd(18,Mc,14,15,"div",8),m.vc(19,"async"),m.bd(20,Nc,4,7,"div",9),m.vc(21,"async"),m.bd(22,Hc,10,39,"cu-task-row-new",10),m.vc(23,"async"),m.bd(24,Bc,2,1,"div",11),m.bd(25,qc,2,0,"div",11),m.bd(26,Xc,2,1,"div",12),m.bd(27,Gc,2,0,"div",12),m.bd(28,Vc,4,2,"div",13),m.vc(29,"async"),m.bd(30,Wc,13,0,"div",14),m.vc(31,"async"),m.cc(32,"div",15),m.bd(33,Zc,1,6,"div",16),m.bd(34,Kc,2,1,"div",17),m.bd(35,Jc,2,0,"div",17),m.bc(),m.bc()),2&t){const t=m.Rc(13);let s=null,a=null,i=null,n=null,c=null;m.Dc("ngClass",m.Hc(44,Yc,(null==(s=m.wc(1,18,e.task$))?null:s.id)&&(null==(s=m.wc(2,20,e.task$))?null:s.parent)&&!(null!=(s=m.wc(3,22,e.task$))&&null!=s.todoComments&&s.todoComments.length))),m.Ib(8),m.Dc("ngIf",!(null!=(a=m.wc(9,24,e.task$))&&a.parent)&&m.wc(10,26,e.task$)&&(e.canAddChecklists||e.canAddSubtasks)||m.wc(11,28,e.canAddSubtasks$))("ngIfElse",t),m.Ib(6),m.Dc("ngIf",m.wc(15,30,e.task$)&&!e.isSharingApp),m.Ib(2),m.Dc("ngIf",m.wc(17,32,e.task$)),m.Ib(2),m.Dc("ngIf",!(null!=(i=m.wc(19,34,e.task$))&&i.parent)||(null==e.subtaskList?null:e.subtaskList.length)),m.Ib(2),m.Dc("ngIf",(null==e.subtaskList?null:e.subtaskList.length)||(null==e.pendingSubtasks[null==(n=m.wc(21,36,e.task$))?null:n.id]?null:e.pendingSubtasks[null==(n=n)?null:n.id].length)),m.Ib(2),m.Dc("ngIf",m.wc(23,38,e.canAddSubtasks$)),m.Ib(2),m.Dc("ngIf",e.completedCounter&&!e.isCompleted&&!e.isOnlyCompleted),m.Ib(1),m.Dc("ngIf",e.completedCounter&&e.isCompleted&&!e.isOnlyCompleted),m.Ib(1),m.Dc("ngIf",e.archivedCount&&!e.showArchived),m.Ib(1),m.Dc("ngIf",e.archivedCount&&e.showArchived),m.Ib(1),m.Dc("ngIf",(null==(c=m.wc(29,40,e.task$))||null==c.todoComments?null:c.todoComments.length)&&!(e.isMine&&(null==e.myCommentList||!e.myCommentList.length))),m.Ib(2),m.Dc("ngIf",!m.wc(31,42,e.task$)),m.Ib(3),m.Dc("ngForOf",e.commentList)("ngForTrackBy",e.trackById),m.Ib(1),m.Dc("ngIf",e.resolvedCounter&&!e.isResolved&&!e.isOnlyCompleted),m.Ib(1),m.Dc("ngIf",e.resolvedCounter&&e.isResolved&&!e.isOnlyCompleted)}},directives:[l.o,l.q,l.p,fa.b,_a.a,Rs.a,ya.a,hi.a,mi.a,Ls.a,l.r,l.s,li.d,li.a,bi.a,Gn,Ds.a,li.c,Si.a,cc],pipes:[l.b,Oi.a],encapsulation:2,data:{animation:[Object(h.m)("row",[Object(h.l)(":enter",[Object(h.k)({opacity:0,transform:"scaleY(0)"}),Object(h.e)("150ms",Object(h.k)({opacity:1,transform:"scaleY(1)"}))]),Object(h.l)(":leave",[Object(h.k)({opacity:1,transform:"scaleY(1)"}),Object(h.e)("150ms ease-out",Object(h.k)({opacity:0,transform:"scaleY(0)"}))])])]},changeDetection:0}),t})();var so=s("UiHY"),ao=s("Jd55"),io=s("Zq4E"),no=s("qKyM"),co=s("pTJP"),oo=s("V3nW"),ro=s("da7w"),lo=s("qJ3x"),uo=s("G9Ob"),ho=s("H3/u"),mo=s("KDRc"),bo=function(t){return t.Users="users",t.Fields="fields",t.Clear="clear",t.Search="search",t.AssignedCommentUsers="assignedCommentUsers",t}({});let ko=(()=>{class t{constructor(){this.showFilterItems=!1,this.activityGroups=uo.c,this.inputFocused=!1,this.members=[],this.selectedUsers=[],this.assignedCommentUserIds=[],this.onUpdateHistoryFilter=new m.o,this.searchText=$localize`:form input placeholder@@forms_placeholder--search-1:Search...`}ngOnInit(){}setSelectedUsers(t){this.onUpdateHistoryFilter.emit({action:bo.Users,data:{users:t}})}removeSelectedUser(t){this.setSelectedUsers(this.selectedUsers.filter(e=>e.id!==t.id))}setActivityFields(t){this.onUpdateHistoryFilter.emit({action:bo.Fields,data:{historyFields:t}})}changeSearch(t){this.onUpdateHistoryFilter.emit({action:bo.Search,data:{searchString:t}})}setSelectedAssignedCommentUserIds(t){this.onUpdateHistoryFilter.emit({action:bo.AssignedCommentUsers,data:{userIds:t}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-task-history-filter"]],inputs:{members:"members",selectedUsers:"selectedUsers",historyFields:"historyFields",searchString:"searchString",assignedCommentUserIds:"assignedCommentUserIds"},outputs:{onUpdateHistoryFilter:"onUpdateHistoryFilter"},decls:6,vars:19,consts:function(){let t;return t=$localize`:@@cu-task-history-filter__tooltip-msg_filter-by-person␟ce49ff6e2086a5b5b19df1558bca2f0105a73e14␟3430645079560764882:Filter by person`,[[1,"cu-task-history-filter"],[1,"cu-task-history-filter__container"],[1,"cu-task-history-filter__search",3,"value","closeModifier","placeholder","showSearchIcon","onChange","onFocus","onBlur"],[1,"cu-task-history-filter__filter",3,"values","filterLayout","allUsers","assignedCommentUserIds","onChangeValues","onOpen","onClose","onChangeAssignedCommentUserIds"],[1,"cu-task-history-filter__users",3,"enableFirstSelection","multiChoice","selectedUsers","users","onChange","onOpen","onClose"],["userAddTooltip",t,3,"modifier","showUserRemover","avatarSize","users","useAltIcon","onUserRemove"]]},template:function(t,e){1&t&&(m.cc(0,"div",0),m.cc(1,"div",1),m.cc(2,"cu-search-filter",2),m.qc("onChange",function(t){return e.changeSearch(t)})("onFocus",function(){return e.inputFocused=!0})("onBlur",function(){return e.inputFocused=!1}),m.bc(),m.cc(3,"cu-activity-fields-filter",3),m.qc("onChangeValues",function(t){return e.setActivityFields(t)})("onOpen",function(){return e.showFilterItems=!0})("onClose",function(){return e.showFilterItems=!1})("onChangeAssignedCommentUserIds",function(t){return e.setSelectedAssignedCommentUserIds(t)}),m.bc(),m.cc(4,"cu-user-list-dropdown",4),m.qc("onChange",function(t){return e.setSelectedUsers(t)})("onOpen",function(){return e.showFilterItems=!0})("onClose",function(){return e.showFilterItems=!1}),m.cc(5,"cu-user-group",5),m.qc("onUserRemove",function(t){return e.removeSelectedUser(t)}),m.bc(),m.bc(),m.bc(),m.bc()),2&t&&(m.Ob("cu-task-history-filter__active",e.showFilterItems||e.searchString||e.selectedUsers.length||e.inputFocused||e.historyFields&&(null==e.historyFields?null:e.historyFields.length)!==e.activityGroups.length),m.Ib(2),m.Dc("value",e.searchString)("closeModifier","cu-search-filter__close_btn")("placeholder",e.searchText)("showSearchIcon",!0),m.Ib(1),m.Dc("values",e.historyFields)("filterLayout",!0)("allUsers",e.members)("assignedCommentUserIds",e.assignedCommentUserIds),m.Ib(1),m.Dc("enableFirstSelection",!0)("multiChoice",!0)("selectedUsers",e.selectedUsers)("users",e.members),m.Ib(1),m.Dc("modifier","cu-user-group_sm")("showUserRemover",!0)("avatarSize",24)("users",e.selectedUsers)("useAltIcon",!0))},directives:[ho.a,mo.a,Fa.a,Sa.a],styles:[".cu-task-history-filter{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute;left:0;top:0;z-index:20;opacity:0;width:100%;padding:10px 0 20px 10px;background:linear-gradient(180deg,rgba(0,0,0,.04),transparent)}.dark-theme .cu-task-history-filter{background:linear-gradient(180deg,rgba(0,0,0,.08),transparent)}.cu-task-history-filter.cu-task-history-filter__active,.cu-task-history-filter:hover{opacity:1}.cu-task-history-filter__container{display:flex;align-items:center}.cu-task-history-filter__users{background-color:transparent}.cu-task-history-filter__users .cu-avatar,.cu-task-history-filter__users .cu-avatar .cu-user-group__icon-alt{height:30px;width:30px}.dark-theme .cu-task-history-filter__users .cu-avatar .cu-user-group__icon-alt{background:#434a50;box-shadow:0 3px 8px rgba(0,0,0,.24)}.cu-task-history-filter__users .cu-user-group__icon-mono .cu-stroke{transition:stroke .2s cubic-bezier(.785,.135,.15,.86) 0s}.cu-task-history-filter__users .cu-user-group__icon-mono .cu-fill{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s}.cu-task-history-filter__users .cu-user-group__icon-mono:hover .cu-stroke{stroke:var(--theme-main-color)!important}.cu-task-history-filter__users .cu-user-group__icon-mono:hover .cu-fill{fill:var(--theme-main-color)!important}.cu-task-history-filter__users .cu-avatar_online:before{display:none}.cu-task-history-filter__search{background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.12);border-radius:2px;margin-right:10px}.dark-theme .cu-task-history-filter__search{background-color:#434a50;box-shadow:0 3px 8px rgba(0,0,0,.24)}.cu-task-history-filter__search .cu-search-filter{background-color:transparent;height:30px;border-radius:0;margin:0;padding:0 4px 0 8px;border:none!important}.cu-task-history-filter__search .cu-search-filter__input{background-color:transparent;box-shadow:none!important;width:100px;height:30px;padding:8px}.cu-task-history-filter__search .cu-search-filter__icon{padding:0;height:12px;width:12px;stroke:#7c828d}.dark-theme .cu-task-history-filter__search .cu-search-filter__icon{stroke:#7c828d}.cu-task-history-filter__search .cu-search-filter__close{background-color:transparent;border-radius:0;fill:#b9bec7;margin:0}.dark-theme .cu-task-history-filter__search .cu-search-filter__close{fill:#b9bec7}.dark-theme .cu-task-history-filter__search .cu-search-filter__close:hover{fill:var(--theme-main-color)}.cu-task-history-filter__search .cu-search-filter__close:hover{background-color:transparent;fill:var(--theme-main-color)}.cu-task-history-filter__filter{margin-right:10px;box-shadow:0 2px 8px rgba(0,0,0,.12);border-radius:2px}.cu-task-history-filter__filter .cu-activity-fields-filter__inner{padding:0 8px;height:30px;border:none!important}.dark-theme .cu-task-history-filter__filter .cu-activity-fields-filter__inner{background-color:#434a50;box-shadow:0 3px 8px rgba(0,0,0,.24)}.cu-task-history-filter__filter .cu-activity-fields-filter__inner .icon{fill:#7c828d;margin-right:6px}.cu-task-history-filter__filter .cu-activity-fields-filter__inner .cu-activity-fields-filter__icon{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s}.cu-task-history-filter__filter .cu-activity-fields-filter__inner .cu-activity-fields-filter__label{transition:color .2s cubic-bezier(.785,.135,.15,.86) 0s}.cu-task-history-filter__filter .cu-activity-fields-filter__inner:hover{background:#fff!important}.dark-theme .cu-task-history-filter__filter .cu-activity-fields-filter__inner:hover{background-color:#434a50!important}.cu-task-history-filter__filter .cu-activity-fields-filter__inner:hover .cu-activity-fields-filter__icon{fill:var(--theme-main-color)}.cu-task-history-filter__filter .cu-activity-fields-filter__inner:hover .cu-activity-fields-filter__label{color:var(--theme-main-color)}.cu-task-history-filter__filter .cu-activity-fields-filter__label{color:#292d34}.cu-task-history-filter__icon-search{transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s;order:1;flex-shrink:0;width:34px;height:14px;margin:0;stroke:#bcc0c7;cursor:pointer;padding:0 10px}.cu-task-history-filter__icon-search:hover{transition:none}.dark-theme .cu-task-history-filter__icon-search{stroke:#828588}.cu-task-history-filter__icon-search:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-history-filter__icon-search:hover{stroke:var(--theme-main-color)}}.cu-task-history-filter__icon-close{width:20px;height:20px;padding:4px;stroke:#b9bec7;cursor:pointer}.cu-task-history-filter__icon-close:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-task-history-filter__icon-close:hover{stroke:var(--theme-main-color)}}.cu-task-history-filter.cu-task-history-filter__enabled{width:100%;left:0;padding:5px}"],encapsulation:2,changeDetection:0}),t})();var po=s("eNwd"),go=s("pTSn"),vo=s("lkVx");const fo=["historyContainer"],_o=["loadMore"],yo=["scrollFiller"],wo=["task-history",""];function To(t,e){if(1&t&&m.Yb(0,6),2&t){m.uc();const t=m.Rc(8);m.Dc("ngTemplateOutlet",t)}}function Co(t,e){if(1&t&&(m.cc(0,"div",7),m.Yb(1,6),m.bc()),2&t){m.uc();const t=m.Rc(8);m.Ib(1),m.Dc("ngTemplateOutlet",t)}}const So=function(t){return{height:t}};function Io(t,e){if(1&t&&m.Xb(0,"div",15,16),2&t){const t=m.uc(2);m.Dc("ngStyle",m.Hc(1,So,t.scrollFillerHeight+"px"))}}function $o(t,e){if(1&t){const t=m.dc();m.cc(0,"div",17),m.cc(1,"div",18),m.dd(2,"No Activity found."),m.bc(),m.cc(3,"div",19),m.qc("click",function(){m.Uc(t);const e=m.uc(2);return e.updateTaskHistoryFilter({action:e.HistoryActions.Clear})}),m.gc(4,20),m.bc(),m.bc()}}function Do(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-history-item",21),m.qc("onSaveComment",function(e){return m.Uc(t),m.uc(2).saveComment(e)})("onExpandHistory",function(e){return m.Uc(t),m.uc(2).expandHistoryBlock(e)})("onHighlightComment",function(e){return m.Uc(t),m.uc(2).highlightComment(e)})("onCommentReply",function(s){m.Uc(t);const a=e.$implicit;return m.uc(2).onCommentReply.emit({text:null==s?null:s.text,html:null==s?null:s.html,item:a})})("onAddToContent",function(s){m.Uc(t);const a=e.$implicit;return m.uc(2).onAddToContent.emit({delta:null==s?null:s.delta,comment:null==s?null:s.comment,item:a})})("onEmailUserAction",function(e){return m.Uc(t),m.uc(2).emailUserAction(e)})("onScrollToComment",function(e){return m.Uc(t),m.uc(2).onScrollToComment.emit(e)})("onRemoveZoom",function(e){return m.Uc(t),m.uc(2).onRemoveZoom.emit(e)})("onAttachmentClick",function(e){return m.Uc(t),m.uc(2).onAttachmentClick.emit(e)})("onThreadCommentAction",function(e){return m.Uc(t),m.uc(2).handleThreadCommentAction(e)})("onAddToInbox",function(e){return m.Uc(t),m.uc(2).onAddToInbox.emit(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(2);let a=null,i=null;m.Dc("item",t)("weights",s.weights)("coverImage",s.coverImage)("taskId",null==(a=m.wc(1,28,s.task$))?null:a.id)("task",m.wc(2,30,s.task$))("team",s.team)("canAddAttachments",s.canAddAttachments)("allowEmailFeature",s.allowEmailFeature)("canRemoveAttachments",s.canRemoveAttachments)("canRemoveOwnAttachments",s.canRemoveOwnAttachments)("canChangeDescription",s.canChangeDescription)("members",s.members)("projectId",null==(i=m.wc(3,32,s.task$))?null:i.project_id)("project",s.project)("canManageEmail",s.canManageEmail)("permissions",s.permissions)("permissionLevel",s.permissionLevel)("readonly",s.readonly)("isNew",s.newCommentId===(null==t||null==t.comment?null:t.comment.id))("isChanged",s.changedCommentId===(null==t||null==t.comment?null:t.comment.id))("statuses",s.statuses)("dueDateEnabled",s.dueDateEnabled)("authedState",s.authedState)("userGroups",s.userGroups)("taskUserGroups",s.taskUserGroups)("searchString",s.searchString)("selectedFilterAssignedCommentUserIds",s.selectedFilterAssignedCommentUserIds),m.Jb("data-history-comment-id","comment"===(null==t?null:t.field)?null==t||null==t.comment?null:t.comment.id:null)}}function Oo(t,e){if(1&t&&m.Xb(0,"cu-loader",22),2&t){const t=m.uc(2);m.Dc("modifier",null!=t.selectedFilterUsers&&t.selectedFilterUsers.length||null!=t.historyFields&&t.historyFields.length||t.searchString?"task-history__filter-load":null)}}function jo(t,e){if(1&t){const t=m.dc();m.bd(0,Io,2,3,"div",8),m.Xb(1,"div",9),m.bd(2,$o,5,0,"div",10),m.vc(3,"async"),m.vc(4,"async"),m.bd(5,Do,4,34,"cu-task-history-item",11),m.vc(6,"async"),m.cc(7,"div",12,13),m.qc("cuIsInViewport",function(e){return m.Uc(t),m.uc().checkNeedLoadMore(e)}),m.bd(9,Oo,1,1,"cu-loader",14),m.bc(),m.Xb(10,"div",9)}if(2&t){const t=m.uc(),e=m.Rc(3);let s=null;m.Dc("ngIf",t.isFirefox),m.Ib(2),m.Dc("ngIf",(t.searchString||(null==t.selectedFilterUsers?null:t.selectedFilterUsers.length)||(null==t.historyFields?null:t.historyFields.length))&&!t.isLoading&&!(null!=(s=m.wc(3,11,t.history$))&&s.length)||0===(null==t.historyFields?null:t.historyFields.length)&&!(null!=(s=m.wc(4,13,t.history$))&&s.length)&&!t.isLoading),m.Ib(3),m.Dc("ngForOf",m.wc(6,15,t.history$))("ngForTrackBy",t.trackById),m.Ib(2),m.ad("min-height",30,"px"),m.Dc("scrollContainer",e)("isInViewPortEnabled",!0)("threshold",0)("rootMargin","200px"),m.Ib(2),m.Dc("ngIf",!t.isLastPage)}}let Lo=(()=>{class t{constructor(t,e,s,a,i,n,c,o,r){this.viewTaskService=t,this.dataService=e,this.element=s,this.taskMentionService=a,this.changeDetectorRef=i,this.commentsService=n,this.store=c,this.uploaderService=o,this.zone=r,this.destroy$=new be.a,this.task$=new ke.a(null),this.history$=new ke.a([]),this.disconnected$=this.store.pipe(Object(tt.select)(xt.b)),this.disconnected=!0,this.isLastPage=!1,this.isLoading=!1,this.isFirstPage=!0,this.startId="",this.receiveTodoComment=null,this.newCommentId="",this.changedCommentId="",this.removeCommentHandlers={},this.scrollFillerHeight=0,this.isExpandingHistory=!1,this.selectedFilterUsers=[],this.selectedFilterAssignedCommentUserIds=[],this.HistoryActions=bo,this.isFirefox=Object(jt.c)(),this.members=[],this.dueDateEnabled=!1,this.canAddAttachments=!0,this.canRemoveAttachments=!0,this.canRemoveOwnAttachments=!0,this.canChangeDescription=!0,this.readonly=!1,this.allowEmailFeature=!1,this.canManageEmail=!1,this.commentUpdateSuccess=new m.o,this.onAttachmentsUpdate=new m.o,this.onUpdateHistory=new m.o,this.onCommentReply=new m.o,this.onAddToContent=new m.o,this.onAddToInbox=new m.o,this.onScrollToComment=new m.o,this.onEmailUserAction=new m.o,this.onRemoveZoom=new m.o,this.onAttachmentClick=new m.o,this.onUpdateCommentFollowers=new m.o,this.trackById=Object(Dt.d)("id"),this.needLoadMore=!1}ngOnInit(){this.disconnected$.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.disconnected&&!t?(this.disconnected=t,this.getHistory()):this.disconnected=t}),this.task$=this.viewTaskService.task,this.task$.pipe(Object(we.a)(t=>!!t),Object(ye.a)(t=>t.history),Object(Te.a)(),Object(De.a)(this.destroy$)).subscribe(t=>{this.history$.next(t)}),this.task$.pipe(Object(Te.a)((t,e)=>(t&&t.id)===(e&&e.id)),Object(we.a)(t=>!!t),Object(De.a)(this.destroy$)).subscribe(t=>{this.uploaderService.setOptions({fieldName:"attachment",formDataFields:{parent:t.id,type:E.c.Task,permanent:!1}}),this.setHistory([]),this.startId="",this.isFirstPage=!0,this.isLastPage=!1,this.getHistory(),this.changeDetectorRef.markForCheck()}),this.viewTaskService.onCommentAdd.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{t.comment&&t.comment.id!==E.d&&this.addCommentAttachments(t.comment);const e=-1!==this.task$.value.history.findIndex(t=>t&&t.comment&&t.comment.id===E.d),s=this.task$.value.history.findIndex(e=>e.date&&e.date>t.date);this.newCommentId=t.comment.id;const a=this.task$.value.history.findIndex(t=>"new_activity"===t.field);if(e||-1===s){const e=this.task$.value.history.filter(t=>!t||!t.comment||t.comment.id!==E.d);this.setHistory([t,...e])}else{const e=[];this.task$.value.history.forEach((i,n)=>{n===s&&(a&&e.push({field:"new_activity"}),e.push(t)),a&&"new_activity"===i.field||e.push(i)}),this.setHistory(e)}this.changeDetectorRef.markForCheck(),this.isFirefox&&(this.scrollFillerHeight=0),Object(fe.a)(0).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{if(this.taskMentionService.updateMentions(),this.isFirefox){const t=this.element.nativeElement.clientHeight-this.getScrollContainer().clientHeight;this.scrollFillerHeight=t>0?t:0,this.scrollToBottom(),this.changeDetectorRef.markForCheck()}}),this.changeDetectorRef.markForCheck()}),this.viewTaskService.onThreadFollowerChange.pipe(Object(De.a)(this.destroy$)).subscribe(({comment:t,followers:e,groupFollowers:s})=>{this.onUpdateCommentFollowers.emit({comment:t,followers:e,groupFollowers:s});const a=this.task$.value.history.findIndex(e=>e.comment&&e.comment.id===t.id);if(-1!==a){const e=this.task$.value.history[a];this.setHistory([...this.task$.value.history.slice(0,a),Object.assign(Object.assign({},e),{comment:t}),...this.task$.value.history.slice(a+1)])}}),this.viewTaskService.onCommentChange.pipe(Object(De.a)(this.destroy$)).subscribe(({comment:t,silent:e})=>{const s=this.task$.value.history.findIndex(e=>e.comment&&e.comment.id===t.id);if(e||(this.changedCommentId=t.id,Object(fe.a)(1500).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.changedCommentId=null})),-1!==s){const e=this.task$.value.history[s];this.setHistory([...this.task$.value.history.slice(0,s),Object.assign(Object.assign({},e),{comment:t}),...this.task$.value.history.slice(s+1)]);const a=this.task$.value.attachments?this.task$.value.attachments:[],i=[];t.comment.forEach(t=>{t.attachment&&-1===a.findIndex(e=>e.id===t.attachment.id)&&i.push(t.attachment)}),i.length&&this.onAttachmentsUpdate.emit([...this.task$.value.attachments,...i]),this.changeDetectorRef.markForCheck(),Object(fe.a)(0).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.taskMentionService.updateMentions()})}this.changeDetectorRef.markForCheck()}),this.viewTaskService.onCommentRemove.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.task$.value&&this.markCommentAsRemoved(t,!0)&&(this.removeCommentHandlers[t]=setTimeout(()=>{if(!this.task$.value)return;const e=this.task$.value.history.find(e=>e.comment&&e.comment.id===t);e&&(this.removeCommentAttachments(e.comment),this.setHistory(this.task$.value.history.filter(e=>!e.comment||e.comment.id!==t)))},5e3),this.commentsService.deleteComment(this.viewTaskService.task.value.id,t).pipe(Object(De.a)(this.destroy$)).subscribe())}),this.viewTaskService.onCommentUndo.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.markCommentAsRemoved(t,!1),this.removeCommentHandlers[t]&&(clearTimeout(this.removeCommentHandlers[t]),this.removeCommentHandlers[t]=null),this.commentsService.undoComment(this.viewTaskService.task.value.id,t).pipe(Object(De.a)(this.destroy$)).subscribe()}),this.viewTaskService.onHighlightComment.pipe(Object(De.a)(this.destroy$)).subscribe(({comment:t,time:e})=>{let{id:s}=t;t.parent&&t.parent!==this.task$.value.id&&(s=t.parent),this.receiveTodoComment=s,this.highlightCommentTime=e,this.task$.value.history&&(this.isCommentExists()?this.scrollToComment(s):(this.isFirefox&&(this.historyContainer.nativeElement.scrollTop=0),this.loadMore.nativeElement.scrollIntoView(!0),this.getHistory())),this.changeDetectorRef.markForCheck()})}ngAfterViewInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}emailUserAction(t){if(t.type===x.e.FetchThreadedComments||t.type===x.e.SendEmail){const e=(this.task$.value.history||[]).findIndex(e=>e.comment&&e.comment.id===t.commentId);if(-1!==e){const s=this.task$.value.history[e],a=Object.assign(Object.assign({},s),t.type===x.e.FetchThreadedComments?{comment:Object.assign(Object.assign({},s.comment),{new_thread_count:0,new_mentioned_thread_count:0})}:{comment:Object.assign(Object.assign({},s.comment),{threaded_replies:(s.comment.threaded_replies||0)+1})});this.setHistory([...this.task$.value.history.slice(0,e),a,...this.task$.value.history.slice(e+1)])}}else if(t.type===x.e.StartCommentDelete||t.type===x.e.UndoCommentDelete){const e=this.task$.value.history.map(e=>e.comment&&e.comment.id===t.commentId?Object.assign(Object.assign({},e),{comment:Object.assign(Object.assign({},e.comment),{threaded_replies:e.comment.threaded_replies+(t.type===x.e.UndoCommentDelete?1:-1)})}):e);this.setHistory(e)}this.onEmailUserAction.emit(t)}getHistory(){if(this.task$.value&&!this.isLoading&&!this.isLastPage){if(this.isLoading=!0,this.changeDetectorRef.markForCheck(),this.disconnected&&this.task$.value.history&&this.task$.value.history.length>0){const t=this.task$.value.history||[];return this.startId=t.length?t[t.length-1].id:"",this.isLastPage=!0,void(this.isLoading=!1)}this.store.select(Qt.j).pipe(Object(Ue.a)(1),Object(Se.a)(this.store.select(Qt.k)),Object(Ie.a)(([t,e])=>this.dataService.getTaskHistory(this.task$.value.id,this.startId,t,e,this.historyFields,this.selectedFilterUsers,this.searchString,this.selectedFilterAssignedCommentUserIds)),Object(De.a)(this.destroy$)).subscribe(t=>{if(this.isLoading=!1,this.isLastPage=t.last_page,t.history.length){const e=t.history;let s;this.startId=e[e.length-1].id,e.forEach(t=>{"checklist_items_added"===t.field&&t.checklist_items&&(t.notifCount=t.checklist_items.length,t.checklistFullContent=t.checklist_items.map(t=>t.name),delete t.checklist_items)}),this.isFirefox&&(s=this.getScrollContainer().scrollHeight),this.task$.value&&this.setHistory([...this.task$.value.history,...e]),this.receiveTodoComment?(this.isCommentExists()?Object(fe.a)(500).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.scrollToComment(this.receiveTodoComment),this.receiveTodoComment=null}):this.getHistory(),Object(fe.a)(0).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.taskMentionService.updateMentions()})):(this.isFirefox||Object(fe.a)(1e3,po.a).pipe(Object(Ie.a)(t=>this.zone.onStable),Object($e.a)(),Object(Le.a)(500,po.a),Object(De.a)(this.destroy$)).subscribe(()=>{this.isLastPage||!this.needLoadMore?(this.changeDetectorRef.markForCheck(),this.taskMentionService.updateMentions()):this.getHistory()}),this.isFirefox&&Object(fe.a)(0).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{if(!this.isLastPage&&this.historyContainer.nativeElement.scrollHeight<=this.historyContainer.nativeElement.clientHeight)return void this.getHistory();const t=this.element.nativeElement.clientHeight-this.getScrollContainer().clientHeight;this.scrollFillerHeight=t>0?t:0,this.isFirstPage?(this.isFirstPage=!1,this.scrollToBottom()):this.historyContainer.nativeElement.scrollTop=this.getScrollContainer().scrollHeight-s,this.changeDetectorRef.markForCheck(),this.taskMentionService.updateMentions()}))}this.changeDetectorRef.markForCheck()},()=>{this.disconnected&&(this.isLoading=!1,this.changeDetectorRef.markForCheck())})}}markCommentAsRemoved(t,e){const s=this.task$.value.history.findIndex(e=>e.comment&&e.comment.id===t);if(-1!==s){const t=[...this.task$.value.history.slice(0,s),Object.assign(Object.assign({},this.task$.value.history[s]),{comment:Object.assign(Object.assign({},this.task$.value.history[s].comment),{removed:e})}),...this.task$.value.history.slice(s+1)];this.setHistory(t)}return-1!==s}scrollToBottom(){0===this.scrollFillerHeight&&Object(fe.a)(0).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.historyContainer.nativeElement.scrollTop=this.historyContainer.nativeElement.scrollHeight})}expandHistoryBlock(t){if(this.isExpandingHistory)return;const{item:e}=t;this.isExpandingHistory=!0;let s=e.count;const a=this.task$.value.history.findIndex(t=>t===e);if(-1===a)return;const i={start_id:this.task$.value.history[a-1]?this.task$.value.history[a-1].id:null,end_id:this.task$.value.history[a+1]?this.task$.value.history[a+1].id:null,reverse:"false"};this.changeDetectorRef.markForCheck(),this.dataService.getCollapsedHistory(this.task$.value.id,i).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{s-=t.history.length,s>0&&t.history.length&&(t.history=[...t.history,{count:s,field:"collapsed_items",text:$localize`:@@cu-task-history__more-updates:${s}:moreUpdateCount: more updates`}]),this.setHistory([...this.task$.value.history.slice(0,a),...t.history,...this.task$.value.history.slice(a+1)]);const e=[];this.task$.value.history.forEach(t=>{if("checklist_items_added"===t.field){const s=Object.assign({},t);s.checklist_items?(delete s.checklist_items,s.notifCount=t.checklist_items.length,s.checklistFullContent=t.checklist_items.map(t=>t.name),e.push(s)):e.push(s)}else e.push(t)}),this.setHistory(e),this.isExpandingHistory=!1,this.changeDetectorRef.markForCheck()},()=>{this.isExpandingHistory=!1,this.changeDetectorRef.markForCheck()})}saveComment(t){this.commentsService.editComment(this.viewTaskService.task.value.id,t.comment.id,t.payload).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.viewTaskService.onCommentChange.emit({comment:Object.assign(Object.assign({},t.comment),t.commentChange),silent:!0}),this.commentUpdateSuccess.emit({changes:t.payload}),this.taskMentionService.updateMentions()})}highlightComment(t){this.viewTaskService.onHighlightComment.emit({comment:t})}setHistory(t){this.onUpdateHistory.emit(t)}updateTaskHistoryFilter(t){switch(t.action){case bo.Users:this.selectedFilterUsers=t.data.users;break;case bo.Fields:this.historyFields=t.data.historyFields;break;case bo.Search:this.searchString=t.data.searchString;break;case bo.Clear:this.historyFields=null,this.selectedFilterUsers=[],this.selectedFilterAssignedCommentUserIds=[],this.searchString="";break;case bo.AssignedCommentUsers:this.selectedFilterAssignedCommentUserIds=t.data.userIds}this.isLastPage=!1,this.startId="",this.setHistory([]),this.getHistory(),this.changeDetectorRef.markForCheck()}scrollToComment(t){this.newCommentId=null;const e=document.querySelector(`[data-history-comment-id="${t}"]`),s=this.highlightCommentTime||2e3;this.highlightCommentTime=null,e&&(e.scrollIntoView(),e.classList.add("cu-task-history-item_highlight"),this.historyContainer.nativeElement.classList.add("task-column__body_highlighted"),Object(fe.a)(s).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{e.classList.remove("cu-task-history-item_highlight"),this.historyContainer.nativeElement.classList.remove("task-column__body_highlighted")})),this.changeDetectorRef.markForCheck()}checkNeedLoadMore(t){this.needLoadMore=t,!t||this.isLoading||this.isLastPage||this.getHistory()}getScrollContainer(){return this.historyContainer.nativeElement}handleThreadCommentAction({type:t,comment:e}){switch(t){case lo.b.Create:case lo.b.AddAttachment:this.addCommentAttachments(e);break;case lo.b.Remove:case lo.b.RemoveAttachment:this.removeCommentAttachments(e);break;default:return}}isCommentExists(){return!!this.task$.value.history.filter(t=>t).find(t=>"comment"===t.field&&t.comment&&t.comment.id===this.receiveTodoComment)}logUnhandledItem(t){}addCommentAttachments(t){const e=[];t.comment.forEach(s=>{s.attachment&&(s.attachment.user=t.user,e.push(s.attachment))}),e.length&&this.onAttachmentsUpdate.emit([...this.task$.value.attachments,...e])}removeCommentAttachments(t){const e=[];t.comment.forEach(t=>{t.attachment&&e.push(t.attachment)}),e.length&&this.onAttachmentsUpdate.emit(this.task$.value.attachments.filter(t=>!e.some(e=>t&&e&&t.id===e.id)))}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Ye.a),m.Wb(Be.a),m.Wb(m.m),m.Wb(us.a),m.Wb(m.h),m.Wb(We.a),m.Wb(tt.Store),m.Wb(es.a),m.Wb(m.B))},t.\u0275cmp=m.Qb({type:t,selectors:[["","task-history",""]],viewQuery:function(t,e){if(1&t&&(m.jd(fo,3,m.m),m.jd(_o,1,m.m),m.jd(yo,3)),2&t){let t;m.Qc(t=m.rc())&&(e.historyContainer=t.first),m.Qc(t=m.rc())&&(e.loadMore=t.first),m.Qc(t=m.rc())&&(e.scrollFiller=t.first)}},inputs:{statuses:"statuses",members:"members",dueDateEnabled:"dueDateEnabled",coverImage:"coverImage",canAddAttachments:"canAddAttachments",canRemoveAttachments:"canRemoveAttachments",canRemoveOwnAttachments:"canRemoveOwnAttachments",canChangeDescription:"canChangeDescription",readonly:"readonly",allowEmailFeature:"allowEmailFeature",permissions:"permissions",permissionLevel:"permissionLevel",weights:"weights",authedState:"authedState",userGroups:"userGroups",taskUserGroups:"taskUserGroups",project:"project",canManageEmail:"canManageEmail",team:"team"},outputs:{commentUpdateSuccess:"commentUpdateSuccess",onAttachmentsUpdate:"onAttachmentsUpdate",onUpdateHistory:"onUpdateHistory",onCommentReply:"onCommentReply",onAddToContent:"onAddToContent",onAddToInbox:"onAddToInbox",onScrollToComment:"onScrollToComment",onEmailUserAction:"onEmailUserAction",onRemoveZoom:"onRemoveZoom",onAttachmentClick:"onAttachmentClick",onUpdateCommentFollowers:"onUpdateCommentFollowers"},attrs:wo,decls:9,vars:9,consts:function(){let t;return t=$localize`:@@common_clear-filter␟975ff6cb640d0b2216ef43d428e5279c19ab90b4␟822604032117535941: Clear Filter `,[[3,"members","selectedUsers","historyFields","searchString","assignedCommentUserIds","onUpdateHistoryFilter"],[1,"task-history","task-history__scroll-view"],["historyContainer",""],[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"],["historyOnFirefox",""],["historyBody",""],[3,"ngTemplateOutlet"],[1,"task-history__body"],[3,"ngStyle",4,"ngIf"],[1,"task-history__divider"],["class","task-history__empty",4,"ngIf"],["class","cu-task-history-item",3,"item","weights","coverImage","taskId","task","team","canAddAttachments","allowEmailFeature","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","members","projectId","project","canManageEmail","permissions","permissionLevel","readonly","isNew","isChanged","statuses","dueDateEnabled","authedState","userGroups","taskUserGroups","searchString","selectedFilterAssignedCommentUserIds","onSaveComment","onExpandHistory","onHighlightComment","onCommentReply","onAddToContent","onEmailUserAction","onScrollToComment","onRemoveZoom","onAttachmentClick","onThreadCommentAction","onAddToInbox",4,"ngFor","ngForOf","ngForTrackBy"],[1,"task-history__load-more",2,"pointer-events","none",3,"scrollContainer","isInViewPortEnabled","threshold","rootMargin","cuIsInViewport"],["loadMore",""],[3,"modifier",4,"ngIf"],[3,"ngStyle"],["scrollFiller",""],[1,"task-history__empty"],[1,"task-history__empty-text"],[1,"task-history__empty-clear",3,"click"],t,[1,"cu-task-history-item",3,"item","weights","coverImage","taskId","task","team","canAddAttachments","allowEmailFeature","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","members","projectId","project","canManageEmail","permissions","permissionLevel","readonly","isNew","isChanged","statuses","dueDateEnabled","authedState","userGroups","taskUserGroups","searchString","selectedFilterAssignedCommentUserIds","onSaveComment","onExpandHistory","onHighlightComment","onCommentReply","onAddToContent","onEmailUserAction","onScrollToComment","onRemoveZoom","onAttachmentClick","onThreadCommentAction","onAddToInbox"],[3,"modifier"]]},template:function(t,e){if(1&t&&(m.cc(0,"cu-task-history-filter",0),m.qc("onUpdateHistoryFilter",function(t){return e.updateTaskHistoryFilter(t)}),m.vc(1,"membersToUsers"),m.bc(),m.cc(2,"div",1,2),m.bd(4,To,1,1,"ng-container",3),m.bd(5,Co,2,1,"ng-template",null,4,m.cd),m.bc(),m.bd(7,jo,11,17,"ng-template",null,5,m.cd)),2&t){const t=m.Rc(6);m.Dc("members",m.wc(1,7,e.members))("selectedUsers",e.selectedFilterUsers)("historyFields",e.historyFields)("searchString",e.searchString)("assignedCommentUserIds",e.selectedFilterAssignedCommentUserIds),m.Ib(4),m.Dc("ngIf",!e.isFirefox)("ngIfElse",t)}},directives:[ko,l.q,l.x,l.p,io.a,l.t,go.a,Ba.a],pipes:[vo.a,l.b],encapsulation:2,changeDetection:0}),t})();var Uo=s("tIWb"),Mo=s("RgJC");const Ao=function(){return["/"]};let Eo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-task-not-found"]],decls:5,vars:2,consts:function(){let t,e;return t=$localize`:@@cu-task-not-found__description␟f1f78bbb4b4248e520ff25d23ac7e53f74f45791␟635692638194561496: Whoops! This task either doesn't exist or you don't have access to it.
`,e=$localize`:@@cu-task-not-found__btn-txt_all-tasks␟94ea3b7dea4d1f80d071b942e99cbb44b659ca07␟8586795095865379780: Go to all tasks
`,[[1,"cu-icon","cu-icon_sad-face"],[1,"no-access__modal-text"],t,[1,"cu-btn","no-access__modal-btn",3,"routerLink"],e]},template:function(t,e){1&t&&(m.Xb(0,"div",0),m.cc(1,"h2",1),m.gc(2,2),m.bc(),m.cc(3,"button",3),m.gc(4,4),m.bc()),2&t&&(m.Ib(3),m.Dc("routerLink",m.Gc(1,Ao)))},directives:[b.i],encapsulation:2,changeDetection:0}),t})();var Fo=s("Yx0S");let xo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-slash-command-onboarding-message"]],inputs:{command:"command"},decls:4,vars:3,consts:function(){let t;return t=$localize`:@@cu-slash-command-onboarding-message__tip-msg␟2449bae0cc42b8a3ae0bd151057a146498876c23␟3035674581742989565: Next time, save your clicks! Type ${"[\ufffd#2\ufffd|\ufffd#3\ufffd]"}:START_TAG_SPAN:/${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_TAG_SPAN: + ${"[\ufffd#2\ufffd|\ufffd#3\ufffd]"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_TAG_SPAN: to ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd2\ufffd"}:INTERPOLATION_2: without leaving your keyboard
`,t=m.lc(t),[[1,"cu-slash-command-onboarding-message"],t,[1,"cu-slash-command-onboarding-message__span"]]},template:function(t,e){1&t&&(m.cc(0,"div",0),m.mc(1,1),m.Xb(2,"span",2),m.Xb(3,"span",2),m.jc(),m.bc()),2&t&&(m.Ib(3),m.kc(null==e.command?null:e.command.key)((null==e.command?null:e.command.onboardingAction)||"change")((null==e.command?null:e.command.onboardingTitle)||(null==e.command?null:e.command.title)),m.hc(1))},encapsulation:2,changeDetection:0}),t})();var Ro=s("TBcZ"),Po=s("lypB"),zo=s("ahJy"),No=s("JJee"),Ho=s("6d4N"),Bo=s("cch5"),qo=s("EP2k"),Xo=function(t,e,s,a){return new(s||(s=Promise))(function(i,n){function c(t){try{r(a.next(t))}catch(e){n(e)}}function o(t){try{r(a.throw(t))}catch(e){n(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(c,o)}r((a=a.apply(t,e||[])).next())})},Go=function(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(s[a[i]]=t[a[i]])}return s};const Vo=["taskContainer"],Wo=["taskView"],Qo=["settingsDropdown"],Zo=["statusDropdown"],Ko=["taskNameBlock"],Jo=["taskNameContainer"],Yo=["editor"],tr=["createTaskModal"],er=["attachmentsComponent"],sr=["taskSelectModal"],ar=["taskCopyModal"],ir=["templateSaveModal"],nr=["templateLoadModal"],cr=["taskNotFound"],or=["taskDeleted"],rr=["taskMerged"],lr=["mainColumn"],dr=["fullScreenColumn"],ur=["goalsDisplay"],hr=["goalsContainer"],mr=["conflictManagement"],br=["timeTrackingDisplay"],kr=["timeTrackingContainer"],pr=["confirmSubtaskModal"],gr=["confirmMergeSubtaskModal"],vr=["prioritiesDisplay"],fr=["dueDateDisplay"],_r=["startDateDisplay"],yr=["authToggl"],wr=["checklist"],Tr=["subtasks"],Cr=["commentBar"],Sr=["taskBreadcrumbs"],Ir=["slashCommandTemplate"],$r=["slashCommand"],Dr=["confirmConvertTaskToListModal"],Or=["slashCommandContainer"],jr=["slashCommandOnboardingContainer"],Lr=["slashCommandsOnboardingTemplate"],Ur=["statusContainer"],Mr=["assignContainer"],Ar=["dependenciesEmptyContainer"],Er=["dependenciesFilledContainer"],Fr=["taskHeader"],xr=["taskHeaderColumnLeft"],Rr=["taskHeaderColumnRight"],Pr=["taskHeaderColumnRightContainer"],zr=["dueDatePickerDropdown"],Nr=["breadcrumbsOverflowDropdown"],Hr=["taskNameAutosize"],Br=["sharePublicTaskModal"],qr=["statusSearchInput"],Xr=["taskInner"];function Gr(t,e){1&t&&m.Xb(0,"div",100)}function Vr(t,e){if(1&t){const t=m.dc();m.cc(0,"div"),m.cc(1,"cu-task-breadcrumbs",103),m.qc("removeFromList",function(e){return m.Uc(t),m.uc(3).removeTasksFromAnotherList(e)})("convertHomeList",function(e){return m.Uc(t),m.uc(3).convertHomeList(e)}),m.vc(2,"async"),m.vc(3,"async"),m.bc(),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(3);let a=null,i=null;m.Ib(1),m.Dc("canMove",null==(a=m.wc(2,5,s.permissions$))?null:a.move_task)("collapsible",null==(i=m.wc(3,7,s.task$))||null==i.parent_task||null==i.parent_task.other_subcategories?null:i.parent_task.other_subcategories.length)("otherList",t)("showMover",!1)("showRemoveFromList",!0)}}function Wr(t,e){if(1&t){const t=m.dc();m.cc(0,"div"),m.cc(1,"cu-task-breadcrumbs",110),m.qc("removeFromList",function(e){return m.Uc(t),m.uc(5).removeTasksFromAnotherList(e)})("convertHomeList",function(e){return m.Uc(t),m.uc(5).convertHomeList(e)}),m.vc(2,"async"),m.bc(),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(5);let a=null;m.Ib(1),m.Dc("canMove",null==(a=m.wc(2,6,s.permissions$))?null:a.move_task)("collapsible",!0)("otherList",t)("showMover",!1)("showRemoveFromList",!0)("overflowed",!0)}}function Qr(t,e){if(1&t&&(m.cc(0,"div",109),m.bd(1,Wr,3,8,"div",101),m.bc()),2&t){const t=m.uc(4);m.ad("width",200,"px"),m.Ib(1),m.Dc("ngForOf",t.multipleListsTruncated)}}function Zr(t,e){if(1&t&&(m.cc(0,"div",104,105),m.cc(2,"div",106),m.dd(3," + "),m.ac(4),m.gc(5,107),m.Zb(),m.bc(),m.bd(6,Qr,2,3,"div",108),m.bc()),2&t){const t=m.uc(3);m.Dc("dropdownCloseOnInsideClick",!1),m.Ib(5),m.kc(t.multipleListsTruncated.length),m.hc(5)}}function Kr(t,e){if(1&t&&(m.ac(0),m.bd(1,Vr,4,9,"div",101),m.bd(2,Zr,7,2,"div",102),m.Zb()),2&t){const t=m.uc(2);m.Ib(1),m.Dc("ngForOf",t.multipleListsVisible),m.Ib(1),m.Dc("ngIf",t.multipleListsTruncated.length)}}function Jr(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-category-list-dropdown",111),m.qc("onSelect",function(e){return m.Uc(t),m.uc(2).addTaskToAnotherList(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.cc(4,"div",112),m.Xb(5,"div",113),m.bc(),m.bc()}if(2&t){const t=m.uc(2);let e=null,s=null;m.Dc("selectableProject",!0)("defaultProject",m.wc(1,10,t.project$))("selectedCategory",null==(e=m.wc(2,12,t.task$))||null==e.category?null:e.category.id)("selectedSubcategory",null==(s=m.wc(3,14,t.task$))||null==s.subcategory?null:s.subcategory.id)("singleCategory",!1)("displaySearch",!1)("showTaskCount",!0)("listsToDeny",t.otherListsImIn),m.Ib(4),m.Ob("active",t.showAddToAnotherList)}}function Yr(t,e){if(1&t){const t=m.dc();m.cc(0,"div",95),m.vc(1,"async"),m.vc(2,"async"),m.cc(3,"div",96),m.qc("click",function(e){return m.Uc(t),m.uc().goToParent(e)}),m.bd(4,Gr,1,0,"div",97),m.vc(5,"async"),m.vc(6,"async"),m.cc(7,"div",98),m.vc(8,"async"),m.vc(9,"async"),m.dd(10),m.vc(11,"async"),m.vc(12,"async"),m.bc(),m.bc(),m.bd(13,Kr,3,2,"ng-container",40),m.vc(14,"async"),m.vc(15,"async"),m.bd(16,Jr,6,16,"cu-category-list-dropdown",99),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null;m.Ob("task__parent_readonly",t.isSharingApp&&!(null!=(e=m.wc(1,7,t.task$))&&e.parent_sharing)&&!m.wc(2,9,t.publicSharingViewId$)),m.Ib(4),m.Dc("ngIf",!t.isSharingApp||(null==(s=m.wc(5,11,t.task$))?null:s.parent_sharing)||m.wc(6,13,t.publicSharingViewId$)),m.Ib(3),m.Jb("data-parent",(null==(a=m.wc(8,15,t.task$))||null==a.subtask_parent_task?null:a.subtask_parent_task.id)||(null==(a=m.wc(9,17,t.task$))||null==a.parent_task?null:a.parent_task.id)),m.Ib(3),m.fd(" ",(null==(i=m.wc(11,19,t.task$))||null==i.subtask_parent_task?null:i.subtask_parent_task.name)||(null==(i=m.wc(12,21,t.task$))||null==i.parent_task?null:i.parent_task.name)," "),m.Ib(3),m.Dc("ngIf",(null==(n=m.wc(14,23,t.task$))||null==n.parent_task||null==n.parent_task.other_subcategories?null:n.parent_task.other_subcategories.length)&&(null==(n=m.wc(15,25,t.team$))?null:n.tasks_in_multiple_lists)),m.Ib(3),m.Dc("ngIf",(null==(c=m.wc(17,27,t.permissions$))?null:c.move_task)&&!m.wc(18,29,t.disconnected$)&&(null==(c=m.wc(19,31,t.team$))?null:c.tasks_in_multiple_lists)&&!m.wc(20,33,t.isGuest$))}}const tl=function(t){return{"task-minimize-active":t}};function el(t,e){if(1&t){const t=m.dc();m.cc(0,"div",119),m.qc("click",function(){return m.Uc(t),m.uc(2).minimizeTask()}),m.tc(),m.cc(1,"svg",120),m.Xb(2,"path",121),m.bc(),m.cc(3,"svg",122),m.qc("click",function(e){return m.Uc(t),m.uc(2).removeMinimizeTask(e)}),m.cc(4,"g",123),m.cc(5,"g",124),m.cc(6,"g",125),m.Xb(7,"circle",126),m.Xb(8,"polyline",127),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(9,"svg",128),m.qc("mouseenter",function(){return m.Uc(t),m.uc(2).minimizeRemoveIconIsHover()})("mouseleave",function(){return m.Uc(t),m.uc(2).minimizeRemoveIconIsNotHover()})("click",function(e){return m.Uc(t),m.uc(2).removeMinimizeTask(e)}),m.cc(10,"g",123),m.cc(11,"g",124),m.cc(12,"g",125),m.Xb(13,"circle",129),m.cc(14,"g",130),m.Xb(15,"path",131),m.Xb(16,"path",132),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc(2);m.Dc("ngClass",m.Hc(2,tl,t.task&&t.task.id&&t.teamTrayTasks&&t.teamTrayTasks[t.task.id]&&!0===t.teamTrayTasks[t.task.id]))("cuTooltip",t.viewTaskStringsService.minimizeTooltipText)}}function sl(t,e){1&t&&(m.cc(0,"div",138),m.Xb(1,"div",139),m.cc(2,"div",140),m.gc(3,141),m.bc(),m.bc())}function al(t,e){if(1&t){const t=m.dc();m.cc(0,"div",138),m.Xb(1,"div",139),m.cc(2,"div",140),m.ac(3),m.gc(4,143),m.Zb(),m.dd(5,". "),m.cc(6,"span",144),m.qc("click",function(){return m.Uc(t),m.uc(4).unarchive()}),m.gc(7,145),m.bc(),m.bc(),m.bc()}}function il(t,e){if(1&t&&(m.bd(0,al,8,0,"div",142),m.vc(1,"async")),2&t){const t=m.uc(3);let e=null;m.Dc("ngIf",null==(e=m.wc(1,1,t.task$))?null:e.archived)}}function nl(t,e){if(1&t){const t=m.dc();m.cc(0,"div"),m.cc(1,"cu-task-breadcrumbs",103),m.qc("removeFromList",function(e){return m.Uc(t),m.uc(4).removeTasksFromAnotherList(e)})("convertHomeList",function(e){return m.Uc(t),m.uc(4).convertHomeList(e)}),m.vc(2,"async"),m.vc(3,"async"),m.bc(),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(4);let a=null,i=null;m.Ib(1),m.Dc("canMove",null==(a=m.wc(2,5,s.permissions$))?null:a.move_task)("collapsible",null==(i=m.wc(3,7,s.task$))||null==i.other_subcategories?null:i.other_subcategories.length)("otherList",t)("showMover",!1)("showRemoveFromList",!0)}}function cl(t,e){if(1&t){const t=m.dc();m.cc(0,"div"),m.cc(1,"cu-task-breadcrumbs",110),m.qc("removeFromList",function(e){return m.Uc(t),m.uc(6).removeTasksFromAnotherList(e)})("convertHomeList",function(e){return m.Uc(t),m.uc(6).convertHomeList(e)}),m.vc(2,"async"),m.bc(),m.bc()}if(2&t){const t=e.$implicit,s=m.uc(6);let a=null;m.Ib(1),m.Dc("canMove",null==(a=m.wc(2,6,s.permissions$))?null:a.move_task)("collapsible",!0)("otherList",t)("showMover",!1)("showRemoveFromList",!0)("overflowed",!0)}}function ol(t,e){if(1&t&&(m.cc(0,"div",109),m.bd(1,cl,3,8,"div",101),m.bc()),2&t){const t=m.uc(5);m.ad("width",200,"px"),m.Ib(1),m.Dc("ngForOf",t.multipleListsTruncated)}}function rl(t,e){if(1&t&&(m.cc(0,"div",104,105),m.cc(2,"div",106),m.dd(3," + "),m.ac(4),m.gc(5,146),m.Zb(),m.bc(),m.bd(6,ol,2,3,"div",108),m.bc()),2&t){const t=m.uc(4);m.Dc("dropdownCloseOnInsideClick",!1),m.Ib(5),m.kc(t.multipleListsTruncated.length),m.hc(5)}}function ll(t,e){if(1&t&&(m.ac(0),m.bd(1,nl,4,9,"div",101),m.bd(2,rl,7,2,"div",102),m.Zb()),2&t){const t=m.uc(3);m.Ib(1),m.Dc("ngForOf",t.multipleListsVisible),m.Ib(1),m.Dc("ngIf",t.multipleListsTruncated.length)}}function dl(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-category-list-dropdown",111),m.qc("onSelect",function(e){return m.Uc(t),m.uc(3).addTaskToAnotherList(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.cc(4,"div",147),m.Xb(5,"div",113),m.bc(),m.bc()}if(2&t){const t=m.uc(3);let e=null,s=null;m.Dc("selectableProject",!0)("defaultProject",m.wc(1,10,t.project$))("selectedCategory",null==(e=m.wc(2,12,t.task$))||null==e.category?null:e.category.id)("selectedSubcategory",null==(s=m.wc(3,14,t.task$))||null==s.subcategory?null:s.subcategory.id)("singleCategory",!1)("displaySearch",!1)("showTaskCount",!0)("listsToDeny",t.otherListsImIn),m.Ib(4),m.Ob("active",t.showAddToAnotherList)}}function ul(t,e){if(1&t){const t=m.dc();m.cc(0,"div",133),m.qc("mouseover",function(){return m.Uc(t),m.uc(2).showAddToAnotherList=!0})("mouseout",function(){return m.Uc(t),m.uc(2).showAddToAnotherList=!1}),m.Xb(1,"cu-task-breadcrumbs",134,135),m.vc(3,"async"),m.vc(4,"async"),m.bd(5,sl,4,0,"div",136),m.vc(6,"async"),m.bd(7,il,2,3,"ng-template",null,137,m.cd),m.bd(9,ll,3,2,"ng-container",40),m.vc(10,"async"),m.vc(11,"async"),m.bd(12,dl,6,16,"cu-category-list-dropdown",99),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.bc()}if(2&t){const t=m.Rc(8),e=m.uc(2);let s=null,a=null,i=null,n=null;m.Ib(1),m.Dc("canMove",null==(s=m.wc(3,9,e.permissions$))?null:s.move_task)("showRemoveFromList",!1)("showMover",!0)("isMain",!0)("disconnected",m.wc(4,11,e.disconnected$)),m.Ib(4),m.Dc("ngIf",!0===(null==(a=m.wc(6,13,e.task$))||null==a.subcategory?null:a.subcategory.archived))("ngIfElse",t),m.Ib(4),m.Dc("ngIf",(null==(i=m.wc(10,15,e.task$))||null==i.other_subcategories?null:i.other_subcategories.length)&&(null==(i=m.wc(11,17,e.team$))?null:i.tasks_in_multiple_lists)),m.Ib(3),m.Dc("ngIf",(null==(n=m.wc(13,19,e.permissions$))?null:n.move_task)&&!m.wc(14,21,e.disconnected$)&&(null==(n=m.wc(15,23,e.team$))?null:n.tasks_in_multiple_lists)&&!m.wc(16,25,e.isGuest$)&&!(null!=(n=m.wc(17,27,e.task$))&&n.parent))}}function hl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",114),m.bd(1,el,17,4,"div",115),m.vc(2,"async"),m.vc(3,"async"),m.cc(4,"div",116),m.qc("click",function(){return m.Uc(t),m.uc().closeTask()}),m.Xb(5,"div",117),m.bc(),m.bd(6,ul,18,29,"div",118),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.Dc("ngIf",m.wc(2,2,t.sharedData.compatCurrentTeam$)&&m.wc(3,4,t.task$)),m.Ib(5),m.Dc("ngIf",!t.isSharingApp)}}function ml(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-dashboard-table-toolbar",148),m.qc("onSyncTaskView",function(e){return m.Uc(t),m.uc().syncTaskView(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.bc()}if(2&t){const t=m.uc();let e=null;m.Dc("spaceId",null==(e=m.wc(1,13,t.task$))||null==e.project?null:e.project.id)("tags",m.wc(2,15,t.tag$))("tagsLoading",m.wc(3,17,t.tagsLoadingMap$)[null==t.task?null:t.task.project_id])("display",t.selectedTasks.hasSelected)("statusList",m.wc(4,19,t.statuses$))("selectedTasks",t.selectedTasks)("onlyDeleteIfOwner",m.wc(5,21,t.onlyDeleteIfOwner$))("canDelete",m.wc(6,23,t.canDelete$))("meUser",m.wc(7,25,t.sharedData.currentUser))("taskView",!0)("subtaskView",!0)("parentTask",m.wc(8,27,t.task$))("inputFeatures",m.wc(9,29,t.featuresAndPermissions$))}}const bl=function(t){return{"task-mobile-tabs__tab_active":t}};function kl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",149),m.cc(1,"button",150),m.qc("click",function(){m.Uc(t);const e=m.uc();return e.mobileTab=e.TaskMobileTab.Details}),m.gc(2,151),m.bc(),m.cc(3,"button",150),m.qc("click",function(){m.Uc(t);const e=m.uc();return e.mobileTab=e.TaskMobileTab.Activity}),m.gc(4,152),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Ib(1),m.Dc("ngClass",m.Hc(2,bl,t.mobileTab===t.TaskMobileTab.Details)),m.Ib(2),m.Dc("ngClass",m.Hc(4,bl,t.mobileTab===t.TaskMobileTab.Activity))}}function pl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",166),m.qc("click",function(e){return m.Uc(t),m.uc(3).editStatuses(e)}),m.bc()}}function gl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",162),m.cc(1,"cu-status-list",163,164),m.qc("onChange",function(e){return m.Uc(t),m.uc(2).setTaskStatus(e)}),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.bc(),m.bd(8,pl,1,0,"div",165),m.vc(9,"async"),m.vc(10,"async"),m.bc()}if(2&t){const t=m.uc(2);let e=null,s=null,a=null,i=null;m.Ib(1),m.Dc("autoFocus",!0)("activeStatus",null==(e=m.wc(3,6,t.task$))?null:e.status)("statuses",m.wc(4,8,t.statuses$))("hasCustomType",(null==(s=m.wc(5,10,t.projectFeatures$))||null==s.milestones?null:s.milestones.enabled)&&!(null==(s=m.wc(6,12,t.task$))||!s.custom_type))("groupByStatusType",null==(a=m.wc(7,14,t.sharedData.compatCurrentTeam$))?null:a.unstarted_status_group),m.Ib(7),m.Dc("ngIf",(null==(i=m.wc(9,16,t.permissions$))?null:i.manage_statuses)&&(null==(i=m.wc(10,18,t.task$))||null==i.project?null:i.project.access))}}function vl(t,e){1&t&&m.Xb(0,"div",167)}function fl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",168),m.qc("click",function(){return m.Uc(t),m.uc(2).setNextStatus()}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(2);m.Dc("cuTooltip",m.wc(1,1,t.nextStatus$))}}const _l=function(t,e){return{loading:t,"task-status_no-hover":e}},yl=function(t){return{color:t}};function wl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",153,154),m.vc(2,"isLightColor"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.cc(6,"div",155,156),m.qc("dropdownOpen",function(){return m.Uc(t),m.uc().focusStatusInput()})("dropdownClose",function(){return m.Uc(t),m.uc().resetStatusSearch()}),m.cc(8,"div",157),m.cc(9,"div",158),m.dd(10),m.vc(11,"async"),m.bc(),m.bc(),m.bd(12,gl,11,20,"div",159),m.bc(),m.bd(13,vl,1,0,"div",160),m.vc(14,"async"),m.bd(15,fl,2,3,"div",161),m.vc(16,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null;m.Ob("task-status_light",m.xc(2,9,null==(e=m.wc(3,12,t.task$))||null==e.status?null:e.status.color,215)),m.Dc("ngClass",m.Ic(24,_l,!m.wc(4,14,t.task$),t.isSharingApp))("ngStyle",m.Hc(27,yl,null==(s=m.wc(5,16,t.task$))||null==s.status?null:s.status.color)),m.Ib(6),m.Dc("dropdownDisabled",t.isSharingApp)("dropdownCloseOnInsideClick",!1),m.Ib(4),m.fd(" ",null==(a=m.wc(11,18,t.task$))?null:a.status.status," "),m.Ib(3),m.Dc("ngIf",2!==(null==(i=m.wc(14,20,t.statuses$))?null:i.length)&&!t.isSharingApp),m.Ib(2),m.Dc("ngIf",2!==(null==(n=m.wc(16,22,t.statuses$))?null:n.length)&&!t.isSharingApp)}}const Tl=function(t,e,s){return{"task-status_open":t,loading:e,"task-status_no-hover":s}};function Cl(t,e){if(1&t&&(m.cc(0,"div",170,154),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.cc(5,"div",158),m.dd(6),m.vc(7,"async"),m.bc(),m.bc()),2&t){const t=m.uc(2);let e=null,s=null,a=null;m.Dc("ngClass",m.Jc(11,Tl,(null==(e=m.wc(2,3,t.task$))||null==e.status?null:e.status.type)===t.StatusTypes.Open,!m.wc(3,5,t.task$),t.isSharingApp))("ngStyle",m.Hc(15,yl,null==(s=m.wc(4,7,t.task$))||null==s.status?null:s.status.color)),m.Ib(6),m.fd(" ",null==(a=m.wc(7,9,t.task$))?null:a.status.status," ")}}function Sl(t,e){if(1&t&&(m.bd(0,Cl,8,17,"div",169),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async")),2&t){const t=m.uc();let e=null;m.Dc("ngIf",(null==(e=m.wc(1,1,t.statuses$))?null:e.length)&&!1===m.wc(2,3,t.isSimpleStatuses$)&&!m.wc(3,5,t.canChangeStatus$))}}function Il(t,e){if(1&t){const t=m.dc();m.cc(0,"div",171),m.qc("click",function(){return m.Uc(t),m.uc().completeTask()}),m.vc(1,"async"),m.Xb(2,"div",172),m.bc()}if(2&t){const t=m.uc();m.Dc("cuTooltip",m.wc(1,1,t.closedStatusTooltipMsg$))}}function $l(t,e){1&t&&(m.ac(0),m.gc(1,177),m.Zb())}function Dl(t,e){if(1&t&&(m.ac(0),m.gc(1,178),m.vc(2,"async"),m.Zb()),2&t){const t=m.uc(2);let e=null;m.Ib(2),m.kc(null==(e=m.wc(2,1,t.closedStatus$))?null:e.status),m.hc(1)}}const Ol=function(t){return{"task-status_active":t}};function jl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",173),m.qc("click",function(){return m.Uc(t),m.uc().toggleTaskStatus()}),m.vc(1,"async"),m.vc(2,"async"),m.Xb(3,"div",174),m.cc(4,"div",158),m.bd(5,$l,2,0,"ng-container",175),m.vc(6,"async"),m.bd(7,Dl,3,3,"ng-template",null,176,m.cd),m.bc(),m.bc()}if(2&t){const t=m.Rc(8),e=m.uc();let s=null,a=null,i=null;m.Dc("ngClass",m.Hc(10,Ol,(null==(s=m.wc(1,4,e.task$))||null==s.status?null:s.status.type)===e.StatusTypes.Closed))("ngStyle",m.Hc(12,yl,null==(a=m.wc(2,6,e.task$))||null==a.status?null:a.status.color)),m.Ib(5),m.Dc("ngIf",(null==(i=m.wc(6,8,e.task$))||null==i.status?null:i.status.type)===e.StatusTypes.Closed)("ngIfElse",t)}}function Ll(t,e){if(1&t&&(m.cc(0,"div",180),m.vc(1,"async"),m.vc(2,"async"),m.cc(3,"div",158),m.dd(4),m.vc(5,"async"),m.bc(),m.bc()),2&t){const t=m.uc(2);let e=null,s=null,a=null;m.Dc("ngClass",m.Hc(9,Ol,(null==(e=m.wc(1,3,t.task$))||null==e.status?null:e.status.type)===t.StatusTypes.Closed))("ngStyle",m.Hc(11,yl,null==(s=m.wc(2,5,t.task$))||null==s.status?null:s.status.color)),m.Ib(4),m.fd(" ",null==(a=m.wc(5,7,t.task$))||null==a.status?null:a.status.status," ")}}function Ul(t,e){if(1&t&&(m.bd(0,Ll,6,13,"div",179),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async")),2&t){const t=m.uc();let e=null;m.Dc("ngIf",(null==(e=m.wc(1,1,t.statuses$))?null:e.length)&&m.wc(2,3,t.isSimpleStatuses$)&&m.wc(3,5,t.task$)&&!m.wc(4,7,t.canChangeStatus$))}}const Ml=function(){return[]};function Al(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-user-and-groups-list-dropdown",181),m.qc("onChange",function(e){return m.Uc(t),m.uc().setAssignees(e)})("onUserGroupsChanged",function(e){return m.Uc(t),m.uc().setGroupAssignees(e)})("onClose",function(){return m.Uc(t),m.uc().showAssignOnboarding()}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.cc(10,"cu-user-group",182),m.qc("onUserRemove",function(e){return m.Uc(t),m.uc().removeAssignee(e)})("onUserGroupRemove",function(e){return m.Uc(t),m.uc().removeGroupAssignee(e)}),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null,o=null;m.Ob("loading",!m.wc(1,22,t.task$)),m.Dc("users",m.wc(2,24,t.users$))("multiChoice",null==(e=m.wc(3,26,t.project$))?null:e.multiple_assignees)("modifier","cu-dropdown_center cu-dropdown_pointer")("selectedUsers",null==(s=m.wc(4,28,t.task$))?null:s.assignees)("showReassign",!0)("enableFirstSelection",!0)("weights",m.wc(5,30,t.weights$))("weightType",t.UserWeightType.ASSIGN)("userGroups",m.wc(6,32,t.userGroups$))("selectedUserGroups",(null==(a=m.wc(7,34,t.task$))?null:a.group_assignees)||m.Gc(46,Ml))("task",m.wc(8,36,t.task$))("subcategory",null==(i=m.wc(9,38,t.task$))?null:i.subcategory),m.Ib(10),m.Dc("users",(null==(n=m.wc(11,40,t.task$))?null:n.assignees)||m.Gc(47,Ml))("showUserRemover",!0)("assignIcon",!0)("multiChoice",null==(c=m.wc(12,42,t.project$))?null:c.multiple_assignees)("modifier","cu-user-group_m-lg")("avatarSize",40)("showDropdown",!1)("userGroups",(null==(o=m.wc(13,44,t.task$))?null:o.group_assignees)||m.Gc(48,Ml))}}function El(t,e){if(1&t&&(m.Xb(0,"cu-user-group",183),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async")),2&t){const t=m.uc();let e=null,s=null,a=null;m.Dc("users",(null==(e=m.wc(1,9,t.task$))?null:e.assignees)||m.Gc(15,Ml))("canAssign",!1)("showUserRemover",!1)("assignIcon",!1)("multiChoice",null==(s=m.wc(2,11,t.project$))?null:s.multiple_assignees)("modifier","cu-user-group_m-lg")("avatarSize",40)("showDropdown",!1)("userGroups",(null==(a=m.wc(3,13,t.task$))?null:a.group_assignees)||m.Gc(16,Ml))}}const Fl=function(t){return[t]};function xl(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-priority-list-dropdown",189),m.qc("onChange",function(e){return m.Uc(t),m.uc(2).setPriority(e)}),m.vc(1,"async"),m.cc(2,"cu-priorities-view",190),m.qc("removePriority",function(){return m.Uc(t),m.uc(2).setPriority(null)}),m.vc(3,"async"),m.bc(),m.bc()}if(2&t){const t=m.uc(2);let e=null,s=null;m.Dc("prioritySelected",m.Hc(10,Fl,null==(e=m.wc(1,6,t.task$))?null:e.priority))("priorities",null!=t.features&&null!=t.features.priorities&&t.features.priorities.enabled?t.features.priorities.priorities||m.Gc(12,Ml):m.Gc(13,Ml)),m.Ib(2),m.Dc("alwaysShowDashed",!1)("priority",null==(s=m.wc(3,8,t.task$))?null:s.priority)("readOnly",!1)("remove",!0)}}function Rl(t,e){if(1&t&&(m.Xb(0,"cu-priorities-view",191),m.vc(1,"async")),2&t){const t=m.uc(2);let e=null;m.Dc("alwaysShowDashed",!1)("hideIfEmpty",!0)("readOnly",!0)("priority",null==(e=m.wc(1,4,t.task$))?null:e.priority)}}function Pl(t,e){if(1&t&&(m.cc(0,"div",184),m.vc(1,"async"),m.Xb(2,"div",185),m.cc(3,"div",null,186),m.bd(5,xl,4,14,"cu-priority-list-dropdown",187),m.vc(6,"async"),m.vc(7,"async"),m.bc(),m.bd(8,Rl,2,6,"ng-template",null,188,m.cd),m.bc()),2&t){const t=m.Rc(9),e=m.uc();let s=null,a=null;m.Ob("cu-hidden-print",!(null!=(s=m.wc(1,4,e.task$))&&s.priority)),m.Ib(5),m.Dc("ngIf",(null==(a=m.wc(6,6,e.permissions$))?null:a.change_priority)&&!m.wc(7,8,e.disconnected$))("ngIfElse",t)}}function zl(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-git-info-icon",200),m.qc("click",function(){m.Uc(t);const e=m.uc(3);return e.viewGitModal(e.github)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(3);m.Dc("task",m.wc(1,1,t.task$))}}function Nl(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-git-info-icon",201),m.qc("click",function(){m.Uc(t);const e=m.uc(3);return e.viewGitModal(e.gitlab)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(3);m.Dc("task",m.wc(1,1,t.task$))}}function Hl(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-git-info-icon",202),m.qc("click",function(){m.Uc(t);const e=m.uc(3);return e.viewGitModal(e.bitbucket)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(3);m.Dc("task",m.wc(1,1,t.task$))}}function Bl(t,e){if(1&t&&(m.ac(0),m.bd(1,zl,2,3,"cu-git-info-icon",197),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.bd(5,Nl,2,3,"cu-git-info-icon",198),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.bd(9,Hl,2,3,"cu-git-info-icon",199),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.Zb()),2&t){const t=m.uc(2);let e=null,s=null,a=null;m.Ib(1),m.Dc("ngIf",(null==(e=m.wc(2,3,t.task$))?null:e.project_using_github)&&(null==(e=m.wc(3,5,t.task$))?null:e.project.access)&&m.wc(4,7,t.canManageGit$)),m.Ib(4),m.Dc("ngIf",(null==(s=m.wc(6,9,t.task$))?null:s.project_using_gitlab)&&(null==(s=m.wc(7,11,t.task$))?null:s.project.access)&&m.wc(8,13,t.canManageGit$)),m.Ib(4),m.Dc("ngIf",(null==(a=m.wc(10,15,t.task$))?null:a.project_using_bitbucket)&&(null==(a=m.wc(11,17,t.task$))?null:a.project.access)&&m.wc(12,19,t.canManageGit$))}}function ql(t,e){if(1&t){const t=m.dc();m.cc(0,"div",203),m.cc(1,"div",204,205),m.qc("cbOnSuccess",function(){return m.Uc(t),m.Rc(2).setCopied()}),m.vc(3,"async"),m.dd(4),m.vc(5,"async"),m.bc(),m.bc()}if(2&t){const t=m.Rc(2),e=m.uc(2);let s=null,a=null;m.Ib(1),m.Dc("cuTooltip","Copy Id")("cbContent","#"+(null==(s=m.wc(3,3,e.task$))?null:s.id)),m.Ib(3),m.fd(" ",t.copied?"Copied!":"#"+(null==(a=m.wc(5,5,e.task$))?null:a.id)," ")}}function Xl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",210,211),m.qc("cbOnSuccess",function(){return m.Uc(t),m.Rc(1).setCopied()}),m.vc(2,"async"),m.dd(3),m.vc(4,"async"),m.bc()}if(2&t){const t=m.uc(3);let e=null,s=null;m.Dc("cbContent",null==(e=m.wc(2,2,t.task$))?null:e.custom_id),m.Ib(3),m.fd(" ",null==(s=m.wc(4,4,t.task$))?null:s.custom_id," ")}}function Gl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",212,205),m.qc("cbOnSuccess",function(){return m.Uc(t),m.Rc(1).setCopied()}),m.vc(2,"async"),m.dd(3),m.vc(4,"async"),m.bc()}if(2&t){const t=m.uc(3);let e=null,s=null;m.Dc("cbContent","#"+(null==(e=m.wc(2,2,t.task$))?null:e.id)),m.Ib(3),m.fd(" ","#"+(null==(s=m.wc(4,4,t.task$))?null:s.id)," ")}}function Vl(t,e){1&t&&(m.cc(0,"div",213),m.gc(1,214),m.bc())}function Wl(t,e){if(1&t){const t=m.dc();m.cc(0,"div",206),m.qc("click",function(){return m.Uc(t),m.uc(2).copyTaskIdClicked()}),m.bd(1,Xl,5,6,"div",207),m.bd(2,Gl,5,6,"div",208),m.bd(3,Vl,2,0,"div",209),m.bc()}if(2&t){const t=m.uc(2);m.Ib(1),m.Dc("ngIf",0===t.currentCustomTaskIdClickIndex),m.Ib(1),m.Dc("ngIf",2===t.currentCustomTaskIdClickIndex),m.Ib(1),m.Dc("ngIf",1===t.currentCustomTaskIdClickIndex||3===t.currentCustomTaskIdClickIndex)}}function Ql(t,e){if(1&t){const t=m.dc();m.cc(0,"div",215),m.qc("click",function(){return m.Uc(t),m.uc(2).showShareTaskModal()}),m.vc(1,"async"),m.Xb(2,"div",216),m.cc(3,"div",217),m.gc(4,218),m.bc(),m.bc()}if(2&t){const t=m.uc(2);let e=null;m.Ob("cu-task-header__control_active",null==(e=m.wc(1,3,t.task$))||null==e.sharing?null:e.sharing.public),m.Ib(2),m.Dc("icon","cu2-share")}}const Zl=function(){return{stroke:"#979797"}};function Kl(t,e){if(1&t){const t=m.dc();m.cc(0,"a",244),m.qc("click",function(){return m.Uc(t),m.uc(4).print()}),m.Xb(1,"div",245),m.bc()}2&t&&(m.Ib(1),m.Dc("ngStyle",m.Gc(1,Zl)))}function Jl(t,e){if(1&t){const t=m.dc();m.cc(0,"a",246),m.qc("cbOnSuccess",function(){return m.Uc(t),m.uc(4).checkForEmailModal()}),m.vc(1,"async"),m.Xb(2,"div",247),m.bc()}if(2&t){const t=m.uc(4);m.Dc("cbContent",m.wc(1,1,t.emailUrl$))}}function Yl(t,e){if(1&t){const t=m.dc();m.cc(0,"a",248),m.qc("click",function(){return m.Uc(t),m.uc(4).archive()}),m.Xb(1,"div",249),m.bc()}}function td(t,e){if(1&t){const t=m.dc();m.cc(0,"a",250),m.qc("click",function(e){return m.Uc(t),m.uc(4).deleteTask(!1,e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.Xb(9,"div",251),m.bc()}if(2&t){const t=m.uc(4);let e=null,s=null;m.Ob("disabled-action",!(m.wc(1,3,t.canDelete$)||m.wc(2,5,t.onlyDeleteIfOwner$)&&(null==(e=m.wc(3,7,t.sharedData.currentUser))?null:e.id)===(null==(e=m.wc(4,9,t.task$))||null==e.creator?null:e.creator.id))),m.Dc("cuTooltip",m.wc(5,11,t.canDelete$)||m.wc(6,13,t.onlyDeleteIfOwner$)&&(null==(s=m.wc(7,15,t.sharedData.currentUser))?null:s.id)===(null==(s=m.wc(8,17,t.task$))||null==s.creator?null:s.creator.id)?t.commonStringsService.deleteText:t.viewTaskStringsService.deleteTaskNoPermissionText)}}function ed(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).openMakeSubtaskModal()}),m.Xb(1,"div",253),m.cc(2,"div",254),m.gc(3,255),m.bc(),m.bc()}}function sd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).convertToList()}),m.Xb(1,"div",256),m.cc(2,"div",254),m.gc(3,257),m.bc(),m.bc()}}function ad(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).convertToTask()}),m.Xb(1,"div",258),m.cc(2,"div",254),m.gc(3,259),m.bc(),m.bc()}}function id(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).openMoveSubtaskModal()}),m.Xb(1,"div",260),m.cc(2,"div",254),m.gc(3,261),m.bc(),m.bc()}}function nd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).openDependencyModal()}),m.Xb(1,"div",262),m.cc(2,"div",254),m.gc(3,263),m.bc(),m.bc()}}function cd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).copyTaskModal()}),m.Xb(1,"div",264),m.cc(2,"div",254),m.gc(3,265),m.bc(),m.bc()}}function od(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).taskMoverToggleMenu()}),m.Xb(1,"div",266),m.cc(2,"div",254),m.gc(3,267),m.bc(),m.bc()}}function rd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).openMergeTaskModal()}),m.Xb(1,"div",268),m.cc(2,"div",254),m.gc(3,269),m.bc(),m.bc()}}function ld(t,e){1&t&&(m.cc(0,"a",270),m.Xb(1,"div",271),m.cc(2,"div",254),m.gc(3,272),m.bc(),m.Xb(4,"div",273),m.bc()),2&t&&(m.Ib(4),m.Dc("icon","cu2-angle-right"))}function dd(t,e){if(1&t){const t=m.dc();m.cc(0,"div"),m.cc(1,"div",274),m.gc(2,275),m.bc(),m.cc(3,"a",252),m.qc("click",function(){m.Uc(t);const e=m.uc(4);return e.closeSettingsDropdown(),e.loadTemplateModal()}),m.Xb(4,"div",276),m.cc(5,"div",254),m.gc(6,277),m.bc(),m.bc(),m.Xb(7,"div",278),m.cc(8,"a",252),m.qc("click",function(){m.Uc(t);const e=m.uc(4);return e.closeSettingsDropdown(),e.saveTemplateModal()}),m.Xb(9,"div",279),m.cc(10,"div",254),m.gc(11,280),m.bc(),m.bc(),m.cc(12,"a",252),m.qc("click",function(){m.Uc(t);const e=m.uc(4);return e.closeSettingsDropdown(),e.updateExistingTemplateModal()}),m.Xb(13,"div",281),m.cc(14,"div",254),m.gc(15,282),m.bc(),m.bc(),m.bc()}}function ud(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).showEditCustomFieldsModal()}),m.Xb(1,"div",283),m.cc(2,"div",254),m.gc(3,284),m.bc(),m.bc()}}const hd=function(){return["right","left","auto"]};function md(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-user-list-dropdown",285),m.qc("onChange",function(e){return m.Uc(t),m.uc(4).addToLineup(e)})("onClose",function(){return m.Uc(t),m.uc(2),m.Rc(1).close()}),m.vc(1,"async"),m.vc(2,"async"),m.cc(3,"a",270),m.Xb(4,"div",286),m.cc(5,"div",254),m.gc(6,287),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc(4);m.Dc("users",m.wc(1,7,t.users$))("multiChoice",!1)("selectedUsers",m.Gc(11,Ml))("enableFirstSelection",!0)("weights",m.wc(2,9,t.weights$))("weightType",t.UserWeightType.ASSIGN)("dropdownPlacement",m.Gc(12,hd))}}function bd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",252),m.qc("click",function(){return m.Uc(t),m.uc(4).removeFromUsersLineup()}),m.Xb(1,"div",288),m.cc(2,"div",254),m.gc(3,289),m.bc(),m.bc()}}function kd(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-git-info-icon",200),m.qc("click",function(){m.Uc(t);const e=m.uc(5);return e.viewGitModal(e.github)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(5);m.Dc("task",m.wc(1,1,t.task$))}}function pd(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-git-info-icon",201),m.qc("click",function(){m.Uc(t);const e=m.uc(5);return e.viewGitModal(e.gitlab)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(5);m.Dc("task",m.wc(1,1,t.task$))}}function gd(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-git-info-icon",202),m.qc("click",function(){m.Uc(t);const e=m.uc(5);return e.viewGitModal(e.bitbucket)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(5);m.Dc("task",m.wc(1,1,t.task$))}}function vd(t,e){if(1&t&&(m.cc(0,"a",290),m.bd(1,kd,2,3,"cu-git-info-icon",197),m.vc(2,"async"),m.vc(3,"async"),m.bd(4,pd,2,3,"cu-git-info-icon",198),m.vc(5,"async"),m.vc(6,"async"),m.bd(7,gd,2,3,"cu-git-info-icon",199),m.vc(8,"async"),m.vc(9,"async"),m.bc()),2&t){const t=m.uc(4);let e=null,s=null,a=null;m.Ib(1),m.Dc("ngIf",(null==(e=m.wc(2,3,t.task$))?null:e.project_using_github)&&m.wc(3,5,t.canManageGit$)),m.Ib(3),m.Dc("ngIf",(null==(s=m.wc(5,7,t.task$))?null:s.project_using_gitlab)&&m.wc(6,9,t.canManageGit$)),m.Ib(3),m.Dc("ngIf",(null==(a=m.wc(8,11,t.task$))?null:a.project_using_bitbucket)&&m.wc(9,13,t.canManageGit$))}}function fd(t,e){1&t&&(m.ac(0),m.gc(1,295),m.Zb())}function _d(t,e){1&t&&(m.ac(0),m.gc(1,296),m.Zb())}function yd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",291),m.qc("click",function(){m.Uc(t);const e=m.uc(4);return e.updateCustomType(!(null!=e.task&&e.task.custom_type))}),m.Xb(1,"div",292),m.cc(2,"div",293),m.bd(3,fd,2,0,"ng-container",175),m.vc(4,"async"),m.bd(5,_d,2,0,"ng-template",null,294,m.cd),m.bc(),m.bc()}if(2&t){const t=m.Rc(6),e=m.uc(4);let s=null;m.Ib(3),m.Dc("ngIf",!(null==(s=m.wc(4,2,e.task$))||!s.custom_type))("ngIfElse",t)}}function wd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",297),m.qc("click",function(){return m.Uc(t),m.uc(4).addFavorite()}),m.Xb(1,"div",298),m.cc(2,"div",293),m.gc(3,299),m.bc(),m.bc()}}function Td(t,e){if(1&t){const t=m.dc();m.cc(0,"a",300),m.qc("click",function(){m.Uc(t);const s=e.ngIf;return m.uc(4).removeFavorite(s.id)}),m.Xb(1,"div",298),m.cc(2,"div",293),m.gc(3,301),m.bc(),m.bc()}}function Cd(t,e){if(1&t){const t=m.dc();m.cc(0,"a",302),m.qc("click",function(){return m.Uc(t),m.uc(4).openSharingModal()}),m.Xb(1,"div",303),m.cc(2,"div",254),m.gc(3,304),m.bc(),m.bc()}}const Sd=function(){return{fill:"#979797"}},Id=function(){return{fill:"#979797",stroke:"transparent"}},$d=function(){return["right"]};function Dd(t,e){if(1&t&&(m.cc(0,"div"),m.cc(1,"div",225),m.cc(2,"div",226),m.cc(3,"a",227),m.vc(4,"async"),m.Xb(5,"div",228),m.bc(),m.cc(6,"a",229),m.vc(7,"async"),m.Xb(8,"div",230),m.bc(),m.bd(9,Kl,2,2,"a",231),m.bd(10,Jl,3,3,"a",232),m.vc(11,"async"),m.vc(12,"async"),m.bd(13,Yl,2,0,"a",233),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.bd(17,td,10,19,"a",234),m.vc(18,"async"),m.vc(19,"async"),m.bc(),m.bd(20,ed,4,0,"a",235),m.vc(21,"async"),m.vc(22,"async"),m.vc(23,"async"),m.bd(24,sd,4,0,"a",235),m.vc(25,"async"),m.vc(26,"async"),m.vc(27,"async"),m.bd(28,ad,4,0,"a",235),m.vc(29,"async"),m.vc(30,"async"),m.vc(31,"async"),m.bd(32,id,4,0,"a",235),m.vc(33,"async"),m.vc(34,"async"),m.vc(35,"async"),m.bd(36,nd,4,0,"a",235),m.vc(37,"async"),m.vc(38,"async"),m.bd(39,cd,4,0,"a",235),m.vc(40,"async"),m.vc(41,"async"),m.bd(42,od,4,0,"a",235),m.vc(43,"async"),m.vc(44,"async"),m.vc(45,"async"),m.bd(46,rd,4,0,"a",235),m.vc(47,"async"),m.vc(48,"async"),m.cc(49,"div",236),m.cc(50,"div",157),m.bd(51,ld,5,1,"a",237),m.vc(52,"async"),m.vc(53,"async"),m.bc(),m.bd(54,dd,16,0,"div",224),m.bc(),m.bd(55,ud,4,0,"a",235),m.vc(56,"async"),m.vc(57,"async"),m.vc(58,"async"),m.vc(59,"async"),m.bd(60,md,7,13,"cu-user-list-dropdown",238),m.vc(61,"async"),m.vc(62,"async"),m.vc(63,"async"),m.bd(64,bd,4,0,"a",235),m.vc(65,"async"),m.vc(66,"async"),m.vc(67,"async"),m.vc(68,"async"),m.bd(69,vd,10,15,"a",239),m.vc(70,"async"),m.vc(71,"async"),m.vc(72,"async"),m.vc(73,"async"),m.vc(74,"async"),m.vc(75,"async"),m.bd(76,yd,7,4,"a",240),m.vc(77,"async"),m.vc(78,"async"),m.bd(79,wd,4,0,"a",241),m.vc(80,"async"),m.bd(81,Td,4,0,"a",242),m.vc(82,"async"),m.bd(83,Cd,4,0,"a",243),m.vc(84,"async"),m.vc(85,"async"),m.bc(),m.bc()),2&t){const t=m.uc(3);let e=null,s=null,a=null,i=null,n=null,c=null,o=null,r=null,l=null,d=null,u=null,h=null,b=null,k=null,p=null,g=null,v=null,f=null;m.Ib(3),m.Dc("cbContent",m.wc(4,28,t.taskUrl$)),m.Ib(2),m.Dc("ngStyle",m.Gc(138,Sd)),m.Ib(1),m.Dc("cbContent",m.wc(7,30,t.copyTaskId$)),m.Ib(2),m.Dc("ngStyle",m.Gc(139,Id)),m.Ib(1),m.Dc("ngIf",t.showPrint),m.Ib(1),m.Dc("ngIf",(null==(e=m.wc(11,32,t.permissions$))?null:e.comment)&&!m.wc(12,34,t.disconnected$)),m.Ib(3),m.Dc("ngIf",(null==(s=m.wc(14,36,t.permissions$))?null:s.archive)&&!(null!=(s=m.wc(15,38,t.task$))&&s.archived)&&!m.wc(16,40,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(a=m.wc(18,42,t.permissions$))?null:a.delete)&&!m.wc(19,44,t.disconnected$)),m.Ib(3),m.Dc("ngIf",!(null!=(i=m.wc(21,46,t.task$))&&i.parent)&&(null==(i=m.wc(22,48,t.permissions$))?null:i.delete)&&!m.wc(23,50,t.disconnected$)),m.Ib(4),m.Dc("ngIf",!(null!=(n=m.wc(25,52,t.task$))&&n.parent)&&(null==(n=m.wc(26,54,t.permissions$))?null:n.move_task)&&!m.wc(27,56,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(c=m.wc(29,58,t.task$))?null:c.parent)&&(null==(c=m.wc(30,60,t.permissions$))?null:c.move_task)&&!m.wc(31,62,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(o=m.wc(33,64,t.task$))?null:o.parent)&&(null==(o=m.wc(34,66,t.permissions$))?null:o.move_task)&&!m.wc(35,68,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(r=m.wc(37,70,t.permissions$))?null:r.add_dependencies)&&!m.wc(38,72,t.disconnected$)),m.Ib(3),m.Dc("ngIf",(null==(l=m.wc(40,74,t.permissions$))?null:l.can_create_tasks)&&!m.wc(41,76,t.disconnected$)),m.Ib(3),m.Dc("ngIf",!(null!=(d=m.wc(43,78,t.task$))&&d.parent)&&(null==(d=m.wc(44,80,t.permissions$))?null:d.move_task)&&!m.wc(45,82,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(u=m.wc(47,84,t.permissions$))?null:u.merge)&&!m.wc(48,86,t.disconnected$)),m.Ib(3),m.Dc("dropdownCloseOnInsideClick",!0)("dropdownCloseOnModal",!0)("dropdownPlacement",m.Gc(140,$d)),m.Ib(2),m.Dc("ngIf",(null==(h=m.wc(52,88,t.permissions$))?null:h.template)&&!m.wc(53,90,t.disconnected$)),m.Ib(4),m.Dc("ngIf",!m.wc(56,92,t.isGuest$)&&(null==(b=m.wc(57,94,t.permissions$))?null:b.manage_custom_fields)&&(null==(b=m.wc(58,96,t.projectFeatures$))||null==b.custom_fields?null:b.custom_fields.enabled)&&!m.wc(59,98,t.disconnected$)),m.Ib(5),m.Dc("ngIf",!m.wc(61,100,t.isGuest$)&&(null==(k=m.wc(62,102,t.team$))?null:k.lineup)&&!m.wc(63,104,t.disconnected$)),m.Ib(4),m.Dc("ngIf",m.wc(65,106,!m.wc(66,108,t.isGuest$)&&(null==(p=m.wc(67,110,t.team$))?null:p.lineup)&&!m.wc(68,112,t.disconnected$)&&t.isInUserLineup$)),m.Ib(5),m.Dc("ngIf",m.wc(70,114,t.task$)&&!t.isSharingApp&&((null==(g=m.wc(71,116,t.task$))?null:g.project_using_github)||(null==(g=m.wc(72,118,t.task$))?null:g.project_using_gitlab)||(null==(g=m.wc(73,120,t.task$))?null:g.project_using_bitbucket))&&!m.wc(74,122,t.disconnected$)&&!(null!=(g=m.wc(75,124,t.team$))&&g.task_relationships)),m.Ib(7),m.Dc("ngIf",(null==(v=m.wc(77,126,t.projectFeatures$))||null==v.milestones?null:v.milestones.enabled)&&(null==(v=m.wc(78,128,t.permissions$))?null:v.can_create_milestone)),m.Ib(3),m.Dc("ngIf",!m.wc(80,130,t.favorite$)),m.Ib(2),m.Dc("ngIf",m.wc(82,132,t.favorite$)),m.Ib(2),m.Dc("ngIf",(null==(f=m.wc(84,134,t.permissions$))?null:f.share)&&!m.wc(85,136,t.disconnected$))}}function Od(t,e){if(1&t){const t=m.dc();m.cc(0,"div",219,220),m.qc("dropdownOpen",function(){return m.Uc(t),m.uc(2).getLineups()}),m.cc(2,"div",221),m.qc("contextmenu",function(e){return m.Uc(t),m.uc(2).settingsOpen(e)}),m.cc(3,"div",222),m.Xb(4,"div",223),m.bc(),m.bc(),m.bd(5,Dd,86,141,"div",224),m.bc()}}function jd(t,e){if(1&t&&(m.cc(0,"div",192),m.bd(1,Bl,13,21,"ng-container",40),m.bd(2,ql,6,7,"div",193),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.bd(10,Wl,4,3,"div",194),m.vc(11,"async"),m.bd(12,Ql,5,5,"div",195),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.bd(16,Od,6,0,"div",196),m.bc()),2&t){const t=m.uc();let e=null,s=null;m.Ib(1),m.Dc("ngIf",!t.isSharingApp),m.Ib(1),m.Dc("ngIf",(null==(e=m.wc(3,5,t.team$))?null:e.task_relationships)&&!m.wc(4,7,t.showCopyCustomId$)&&m.wc(5,9,t.canManageGit$)&&(null==(e=m.wc(6,11,t.task$))?null:e.project.access)&&((null==(e=m.wc(7,13,t.task$))?null:e.project_using_bitbucket)||(null==(e=m.wc(8,15,t.task$))?null:e.project_using_gitlab)||(null==(e=m.wc(9,17,t.task$))?null:e.project_using_github))),m.Ib(8),m.Dc("ngIf",m.wc(11,19,t.showCopyCustomId$)),m.Ib(2),m.Dc("ngIf",!m.wc(13,21,t.disconnected$)&&m.wc(14,23,t.showSharing$)&&(null==(s=m.wc(15,25,t.task$))||null==s.permissions?null:s.permissions.make_views_public)),m.Ib(4),m.Dc("ngIf",!t.isSharingApp)}}function Ld(t,e){if(1&t&&(m.ac(0),m.dd(1),m.vc(2,"async"),m.Zb()),2&t){const t=m.uc(3);m.Ib(1),m.ed(m.wc(2,1,t.timeEntry$))}}function Ud(t,e){1&t&&(m.ac(0),m.gc(1,316),m.Zb())}function Md(t,e){if(1&t&&(m.Xb(0,"time-tracking-display",317),m.vc(1,"async"),m.vc(2,"async")),2&t){const t=m.uc().ngIf,e=m.uc(2);let s=null,a=null;m.Dc("totalTimeTracked",null!=(s=m.wc(1,6,e.sharedData.compatCurrentTeam$))&&s.time_tracking_rollup?null==t?null:t.rolled_up_time_spent:null==t?null:t.total_time_spent)("running",!(null==(a=m.wc(2,8,e.mainEntry$))||!a.duration))("displayLabel",!1)("showTracker",!0)("useTimeTrackerDuration",!0)("forceDisplayTime",!0)}}function Ad(t,e){if(1&t){const t=m.dc();m.cc(0,"div",310),m.cc(1,"div",32),m.vc(2,"async"),m.bd(3,Ld,3,3,"ng-container",175),m.vc(4,"async"),m.bd(5,Ud,2,0,"ng-template",null,311,m.cd),m.bc(),m.cc(7,"div",312),m.cc(8,"cu-time-tracking-dropdown",313),m.qc("onChange",function(e){return m.Uc(t),m.uc(2).setTimeTracking(e)})("onTimeTrackerAction",function(e){return m.Uc(t),m.uc(2).timeTrackerAction(e)})("onStartTrial",function(){return m.Uc(t),m.uc(2).startTrialFromTimeTracking()})("onClose",function(){return m.Uc(t),m.uc(2).forceLog=!1})("onDisplayEntry",function(e){return m.Uc(t),m.uc(2).displayTrackedEntry(e)}),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.bd(16,Md,3,10,"time-tracking-display",314),m.vc(17,"async"),m.cc(18,"div",315),m.qc("click",function(){return m.Uc(t),m.uc(2).forceLog=!0}),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=e.ngIf,s=m.Rc(6),a=m.uc(2);let i=null,n=null,c=null;m.Ib(1),m.Ob("cu-task-info__key-entry",!!m.wc(2,23,a.timeEntry$)),m.Ib(2),m.Dc("ngIf",m.wc(4,25,a.timeEntry$))("ngIfElse",s),m.Ib(5),m.Dc("disabled",m.wc(9,27,a.timeTrackingDisabled$))("totalTimeTracked",null==t?null:t.total_time_spent)("taskId",null==t?null:t.id)("task",t)("taskName",null==t?null:t.name)("taskStatusColor",null==t||null==t.status?null:t.status.color)("spaceId",null==a.space?null:a.space.id)("teamId",null==(i=m.wc(10,29,a.sharedData.compatCurrentTeam$))?null:i.id)("defaultProject",a.space)("timeSpentList",m.wc(11,31,a.taskTimeEntries$))("currentEntry",m.wc(12,33,a.mainEntry$))("user",m.wc(13,35,a.sharedData.currentUser))("rolledUpSpent",null==t?null:t.rolled_up_time_spent)("showManualTime",!0)("tags",null==(n=m.wc(14,37,a.timeEntryTaskData$))?null:n.tags)("showActiveTimer",!0)("team",m.wc(15,39,a.team$))("forceLog",a.forceLog),m.Ib(8),m.Dc("ngIf",!(null!=(c=m.wc(17,41,a.mainEntry$))&&c.duration))}}function Ed(t,e){if(1&t&&(m.cc(0,"div",318),m.cc(1,"div",319),m.dd(2),m.vc(3,"async"),m.vc(4,"async"),m.bc(),m.cc(5,"div",320),m.dd(6),m.vc(7,"async"),m.bc(),m.bc()),2&t){const t=m.uc(2);let e=null,s=null;m.Ib(2),m.gd("",null==(e=m.wc(3,3,t.task$))?null:e.name," - ","#"+(null==(e=m.wc(4,5,t.task$))?null:e.id),""),m.Ib(4),m.ed(null==(s=m.wc(7,7,t.project$))?null:s.name)}}function Fd(t,e){if(1&t&&(m.cc(0,"div",321),m.cc(1,"div",322),m.cc(2,"div",323),m.cc(3,"div",324),m.tc(),m.cc(4,"svg",325),m.cc(5,"g",326),m.Xb(6,"path",327),m.Xb(7,"path",328),m.Xb(8,"path",329),m.Xb(9,"path",330),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()),2&t){const t=m.uc(2);m.Ib(1),m.Jb("data-item",t.dataItem)("data-account",t.dataAccount)("data-group",t.dataGroup)("data-permalink",t.dataLink)}}function xd(t,e){if(1&t){const t=m.dc();m.cc(0,"div",305),m.Xb(1,"div",185),m.bd(2,Ad,19,43,"div",306),m.vc(3,"async"),m.bd(4,Ed,8,9,"div",307),m.vc(5,"async"),m.vc(6,"async"),m.cc(7,"div",308),m.qc("mouseenter",function(){return m.Uc(t),m.uc().openTogglAuth()}),m.bc(),m.bd(8,Fd,10,4,"div",309),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null;m.Ib(2),m.Dc("ngIf",m.wc(3,3,t.task$)),m.Ib(2),m.Dc("ngIf",(null==(e=m.wc(5,5,t.permissions$))?null:e.track_time)&&!m.wc(6,7,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(s=m.wc(9,9,t.sharedData.currentUser))||null==s.features?null:s.features.harvest)&&(null==(s=m.wc(10,11,t.permissions$))?null:s.track_time)&&!m.wc(11,13,t.disconnected$))}}function Rd(t,e){1&t&&m.Xb(0,"div",185)}function Pd(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-time-estimates",334),m.qc("onTimeEstimateAction",function(e){return m.Uc(t),m.uc(2).timeEstimateAction(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.bc()}if(2&t){const t=m.uc(2);let e=null;m.Dc("permissions",m.wc(1,6,t.permissions$))("task",m.wc(2,8,t.task$))("team",m.wc(3,10,t.sharedData.compatCurrentTeam$))("user",m.wc(4,12,t.user$))("timeEstimateData",m.wc(5,14,t.timeEstimateData$))("rollup",null==(e=m.wc(6,16,t.rollups$))?null:e.estimates)}}function zd(t,e){if(1&t&&(m.cc(0,"div",331),m.bd(1,Rd,1,0,"div",332),m.vc(2,"async"),m.bd(3,Pd,7,18,"cu-task-time-estimates",333),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.bc()),2&t){const t=m.uc();let e=null,s=null;m.Ib(1),m.Dc("ngIf",!(null!=(e=m.wc(2,2,t.projectFeatures$))&&null!=e.time_tracking&&e.time_tracking.enabled)),m.Ib(2),m.Dc("ngIf",(null==(s=m.wc(4,4,t.permissions$))?null:s.track_time)&&!m.wc(5,6,t.disconnected$)||(null==(s=m.wc(6,8,t.task$))?null:s.time_estimate))}}function Nd(t,e){1&t&&m.Xb(0,"div",185)}function Hd(t,e){if(1&t&&(m.Xb(0,"cu-task-points-estimates",337),m.vc(1,"async")),2&t){const t=m.uc(2);m.Dc("task",m.wc(1,2,t.task$))("isTaskView",!0)}}function Bd(t,e){if(1&t&&(m.cc(0,"div",335),m.bd(1,Nd,1,0,"div",332),m.vc(2,"async"),m.bd(3,Hd,2,4,"cu-task-points-estimates",336),m.vc(4,"async"),m.bc()),2&t){const t=m.uc();let e=null,s=null;m.Ib(1),m.Dc("ngIf",!(null!=(e=m.wc(2,2,t.projectFeatures$))&&null!=e.points&&e.points.enabled)),m.Ib(2),m.Dc("ngIf",null==(s=m.wc(4,4,t.task$))?null:s.id)}}const qd=function(t,e){return{task:t,statuses:e}};function Xd(t,e){if(1&t){const t=m.dc();m.cc(0,"div",184,338),m.Xb(2,"div",339),m.cc(3,"cu-recurring-date-dropdown",340),m.qc("onChange",function(e){return m.Uc(t),m.uc().setDueDate(e)})("onDropdownClose",function(){return m.Uc(t),m.uc().closedDatePicker()})("onDropdownOpen",function(){return m.Uc(t),m.uc().openedDatePicker()})("click",function(){return m.Uc(t),m.uc().openedFromStart=!0})("onRecurringChange",function(e){return m.Uc(t),m.uc().setRecurring(e)})("onRecurringLegacyChange",function(e){return m.Uc(t),m.uc().setRecurringLegacy(e)}),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"taskRecurringToOptions"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.cc(18,"cu-due-date-view",341),m.qc("onChange",function(e){return m.Uc(t),m.uc().setDueDate(e)}),m.vc(19,"async"),m.vc(20,"async"),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null,o=null,r=null,l=null,d=null;m.Ib(3),m.Dc("task",m.wc(4,18,t.task$))("statuses",m.wc(5,20,t.statuses$))("selectedDate",(null==(e=m.wc(6,22,t.task$))?null:e.due_date)||null)("startDate",(null==(s=m.wc(7,24,t.task$))?null:s.start_date)||null)("dueTimeExists",null==(a=m.wc(8,26,t.task$))?null:a.due_date_time)("startTimeExists",null==(i=m.wc(9,28,t.task$))?null:i.start_date_time)("readOnly",!(null!=(n=m.wc(10,30,t.permissions$))&&n.change_due_date)||m.wc(11,32,t.disconnected$))("forceStart",!0)("forceDue",!1)("recurringOptions",m.wc(12,34,null==(c=m.wc(13,36,t.task$))?null:c.recurring_settings))("recurringLegacyOptions",null==(o=m.wc(14,38,t.task$))?null:o.recur)("allowLegacyRecurring",!0)("recurringLegacyData",m.Ic(50,qd,m.wc(15,40,t.task$),m.wc(16,42,t.statuses$)))("showRecurring",!0)("legacyRecurring",null==(r=m.wc(17,44,t.task$))?null:r.legacy_recurring),m.Ib(15),m.Dc("selectedDate",null==(l=m.wc(19,46,t.task$))?null:l.start_date)("showTime",null==(d=m.wc(20,48,t.task$))?null:d.start_date_time)("forStart",!0)}}function Gd(t,e){1&t&&m.Xb(0,"div",339)}function Vd(t,e){1&t&&(m.cc(0,"div",351),m.Xb(1,"div",352),m.bc())}function Wd(t,e){if(1&t&&(m.cc(0,"div",353),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"startOfRecurring"),m.vc(6,"recurringToText"),m.vc(7,"taskRecurringToOptions"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"recurringLegacyToText"),m.vc(11,"async"),m.vc(12,"recurringToText"),m.vc(13,"taskRecurringToOptions"),m.vc(14,"async"),m.Xb(15,"div",354),m.bc()),2&t){const t=m.uc(2);let e=null;m.Dc("cuTooltip",null!=(e=m.wc(1,1,t.task$))&&e.legacy_recurring||null==(e=m.wc(2,3,t.task$))||!e.recurring_settings||(null==(e=m.wc(3,5,t.task$))||null==e.recurring_settings?null:e.recurring_settings.last_task)===(null==(e=m.wc(4,7,t.task$))?null:e.id)?null!=(e=m.wc(9,17,t.task$))&&e.legacy_recurring?m.wc(10,19,null==(e=m.wc(11,21,t.task$))?null:e.recur):m.wc(12,23,m.wc(13,25,null==(e=m.wc(14,27,t.task$))?null:e.recurring_settings)):m.wc(5,9,m.wc(6,11,m.wc(7,13,null==(e=m.wc(8,15,t.task$))?null:e.recurring_settings))))}}function Qd(t,e){if(1&t){const t=m.dc();m.cc(0,"div",342,343),m.bd(2,Gd,1,0,"div",344),m.vc(3,"async"),m.vc(4,"async"),m.bd(5,Vd,2,0,"div",345),m.vc(6,"async"),m.vc(7,"async"),m.cc(8,"cu-recurring-date-dropdown",346,347),m.qc("onChange",function(e){return m.Uc(t),m.uc().setDueDate(e)})("onDropdownClose",function(){return m.Uc(t),m.uc().closedDatePicker()})("onDropdownOpen",function(){return m.Uc(t),m.uc().openedDatePicker()})("onRecurringChange",function(e){return m.Uc(t),m.uc().setRecurring(e)})("onRecurringLegacyChange",function(e){return m.Uc(t),m.uc().setRecurringLegacy(e)}),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"taskRecurringToOptions"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.vc(22,"async"),m.vc(23,"async"),m.cc(24,"div",348),m.bd(25,Wd,16,29,"div",349),m.vc(26,"async"),m.vc(27,"async"),m.cc(28,"cu-due-date-view",350),m.qc("onChange",function(e){return m.Uc(t),m.uc().setDueDate(e)}),m.vc(29,"async"),m.vc(30,"async"),m.vc(31,"async"),m.vc(32,"async"),m.vc(33,"async"),m.vc(34,"async"),m.vc(35,"async"),m.vc(36,"async"),m.vc(37,"async"),m.vc(38,"async"),m.vc(39,"async"),m.vc(40,"async"),m.vc(41,"async"),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null,o=null,r=null,l=null,d=null,u=null,h=null,b=null,k=null,p=null,g=null;m.Ib(2),m.Dc("ngIf",(null==(e=m.wc(3,25,t.projectFeatures$))||null==e.due_dates?null:e.due_dates.enabled)&&!(null!=(e=m.wc(4,27,t.task$))&&e.start_date)),m.Ib(3),m.Dc("ngIf",(null==(s=m.wc(6,29,t.projectFeatures$))||null==s.due_dates?null:s.due_dates.enabled)&&(null==(s=m.wc(7,31,t.task$))?null:s.start_date)),m.Ib(3),m.Dc("selectedDate",(null==(a=m.wc(10,33,t.task$))?null:a.due_date)||null)("startDate",(null==(i=m.wc(11,35,t.task$))?null:i.start_date)||null)("dueTimeExists",null==(n=m.wc(12,37,t.task$))?null:n.due_date_time)("startTimeExists",null==(c=m.wc(13,39,t.task$))?null:c.start_date_time)("forceStart",!1)("forceDue",!0)("readOnly",!(null!=(o=m.wc(14,41,t.permissions$))&&o.change_due_date)||m.wc(15,43,t.disconnected$))("recurringOptions",m.wc(16,45,null==(r=m.wc(17,47,t.task$))?null:r.recurring_settings))("recurringLegacyOptions",null==(l=m.wc(18,49,t.task$))?null:l.recur)("allowLegacyRecurring",!0)("recurringLegacyData",m.Ic(91,qd,m.wc(19,51,t.task$),m.wc(20,53,t.statuses$)))("task",m.wc(21,55,t.task$))("statuses",m.wc(22,57,t.statuses$))("showRecurring",!0)("legacyRecurring",null==(d=m.wc(23,59,t.task$))?null:d.legacy_recurring),m.Ib(17),m.Dc("ngIf",!(null!=(u=m.wc(26,61,t.task$))&&u.due_date)&&(null==(u=m.wc(27,63,t.task$))?null:u.recurring_settings)),m.Ib(3),m.Dc("selectedDate",null==(h=m.wc(29,65,t.task$))?null:h.due_date)("showTime",null==(b=m.wc(30,67,t.task$))?null:b.due_date_time)("isOnTime",(null==(k=m.wc(31,69,t.task$))?null:k.date_closed)&&(null==(k=m.wc(32,71,t.task$))?null:k.date_closed)<=(null==(k=m.wc(33,73,t.task$))?null:k.due_date)||(null==(k=m.wc(34,75,t.task$))?null:k.date_done)&&(null==(k=m.wc(35,77,t.task$))?null:k.date_done)<=(null==(k=m.wc(36,79,t.task$))?null:k.due_date))("noPermission",!(null!=(p=m.wc(37,81,t.permissions$))&&p.change_due_date)||m.wc(38,83,t.disconnected$))("noHighlight",!(null==(g=m.wc(39,85,t.task$))||!g.date_closed)||!(null==(g=m.wc(40,87,t.task$))||!g.date_done))("task",m.wc(41,89,t.task$))("showQuickClear",!0)}}function Zd(t,e){if(1&t&&(m.ac(0),m.cc(1,"div",355),m.Xb(2,"div",185),m.bc(),m.Xb(3,"cu-zoom-button",356),m.vc(4,"async"),m.Zb()),2&t){const t=m.uc();let e=null;m.Ib(3),m.Dc("taskId",null==(e=m.wc(4,1,t.task$))?null:e.id)}}function Kd(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-entity-followers",357),m.qc("followersChanged",function(e){return m.Uc(t),m.uc().setFollowers(e)})("groupFollowersChanged",function(e){return m.Uc(t),m.uc().setGroupFollowers(e)}),m.vc(1,"membersToUsers"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null;m.Dc("allUsers",m.wc(1,11,m.wc(2,13,t.projectMembers$)))("canAddFollowers",(null==(e=m.wc(3,15,t.permissions$))?null:e.add_followers)&&!m.wc(4,17,t.disconnected$))("canAddSelf",(null==(s=m.wc(5,19,t.permissions$))?null:s.add_self_follower)&&!m.wc(6,21,t.disconnected$))("currentUser",m.wc(7,23,t.sharedData.currentUser))("followers",null==(a=m.wc(8,25,t.task$))?null:a.followers)("showLastViewed",!0)("lastViewedMap",null==(i=m.wc(9,27,t.task$))?null:i.last_viewed)("allUserGroups",m.wc(10,29,t.userGroups$))("groupFollowers",null==(n=m.wc(11,31,t.task$))?null:n.group_followers)("task",m.wc(12,33,t.task$))("subcategory",null==(c=m.wc(13,35,t.task$))?null:c.subcategory)}}function Jd(t,e){if(1&t){const t=m.dc();m.cc(0,"div",358),m.qc("click",function(){return m.Uc(t),m.uc().moveTaskHeaderColumnRightContainer()}),m.Xb(1,"div",359),m.bc()}if(2&t){const t=m.uc();m.Ob("task__toolbar-move_moved",t.headerColumnRightContainerMoved),m.Ib(1),m.Dc("icon","chevron-right")}}function Yd(t,e){if(1&t){const t=m.dc();m.cc(0,"div",367),m.qc("ondrop",function(e){return m.Uc(t),m.uc(2).addFileToTask(e)}),m.vc(1,"async"),m.cc(2,"div",363),m.Xb(3,"div",364),m.cc(4,"div",365),m.gc(5,368),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc(2);m.ad("width",m.wc(1,2,t.resizeDividerPercent$),"%")}}function tu(t,e){if(1&t){const t=m.dc();m.cc(0,"div",360),m.bd(1,Yd,6,4,"div",361),m.vc(2,"async"),m.cc(3,"div",362),m.qc("ondrop",function(e){return m.Uc(t),m.uc().addFileToComment(e)}),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.cc(8,"div",363),m.Xb(9,"div",364),m.cc(10,"div",365),m.gc(11,366),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null;m.Ib(1),m.Dc("ngIf",(null==(e=m.wc(2,7,t.task$))?null:e.permission_level)!==t.commentPermission),m.Ib(2),m.ad("width",(null==(s=m.wc(4,9,t.task$))?null:s.permission_level)!==t.commentPermission?100-m.wc(5,11,t.resizeDividerPercent$):100,"%"),m.Ob("task-dropzone__column",(null==(a=m.wc(6,13,t.task$))?null:a.permission_level)!==t.commentPermission)("task-dropzone__container",(null==(i=m.wc(7,15,t.task$))?null:i.permission_level)===t.commentPermission)}}function eu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-view-public-sharing-banner",369),m.qc("onLinkClick",function(){return m.Uc(t),m.uc().showShareTaskModal()}),m.vc(1,"async"),m.vc(2,"async"),m.bc()}if(2&t){const t=m.uc();let e=null;m.Dc("sharingEntity",t.viewTaskStringsService.sharingEntityText)("sharingLink",m.wc(1,4,t.taskSharingUrl$))("seoOptimized",null==(e=m.wc(2,6,t.task$))||null==e.sharing?null:e.sharing.seo_optimized)("openModalOnClick",!0)}}function su(t,e){if(1&t){const t=m.dc();m.cc(0,"div",370),m.qc("click",function(){return m.Uc(t),m.uc().openPreviewWithCoverImage()}),m.Xb(1,"img",371),m.vc(2,"async"),m.cc(3,"div",372),m.qc("click",function(){return m.Uc(t),m.uc().setCoverImage()}),m.bc(),m.bc()}if(2&t){const t=m.uc();let e=null;m.Ib(1),m.Dc("src",null==(e=m.wc(2,1,t.task$))||null==e.coverimage?null:e.coverimage.thumbnail_large,m.Xc)}}function au(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-tags-list",379),m.qc("onOpen",function(){return m.Uc(t),m.uc(3).loadTags()})("onPage",function(e){return m.Uc(t),m.uc(3).loadTags(e)})("onChange",function(e){return m.Uc(t),m.uc(3).addTag(e)})("onDelete",function(e){return m.Uc(t),m.uc(3).removeTag(e)})("onDeleteFromSpace",function(e){return m.Uc(t),m.uc(3).deleteTagFromSpace(e)})("onRename",function(e){return m.Uc(t),m.uc(3).renameTag(e)})("onColorChange",function(e){return m.Uc(t),m.uc(3).colorChange(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.cc(12,"cu-tags-view",380),m.qc("onDelete",function(e){return m.Uc(t),m.uc(3).removeTag(e)})("onRename",function(e){return m.Uc(t),m.uc(3).renameTag(e)})("onDeleteFromSpace",function(e){return m.Uc(t),m.uc(3).deleteTagFromSpace(e)})("onColorChange",function(e){return m.Uc(t),m.uc(3).colorChange(e)}),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.vc(22,"async"),m.bc(),m.bc()}if(2&t){const t=m.uc(3);let e=null,s=null,a=null,i=null,n=null,c=null,o=null,r=null,l=null,d=null;m.Dc("tags",t.tags)("tagsLoadingMap",m.wc(1,24,t.tagsLoadingMap$)[null==t.task?null:t.task.project_id])("taskTags",null==(e=m.wc(2,26,t.task$))?null:e.tags)("taskId",null==(s=m.wc(3,28,t.task$))?null:s.id)("spaceId",null==t.space?null:t.space.id)("spaceAccess",(null==(a=m.wc(4,30,t.task$))||null==a.project?null:a.project.access)&&(null==(a=m.wc(5,32,t.task$))||null==a.project?null:a.project.permission_level)&&(null==(a=m.wc(6,34,t.task$))||null==a.project?null:a.project.permission_level)>t.commentPermission)("canManageTag",null==(i=m.wc(7,36,t.task$))||null==i.permissions?null:i.permissions.manage_tags)("canDelete",m.wc(8,38,t.canDelete$))("onlyDeleteIfOwner",m.wc(9,40,t.onlyDeleteIfOwner$))("userId",m.wc(10,42,t.user$))("readonly",!(null!=(n=m.wc(11,44,t.task$))&&null!=n.permissions&&n.permissions.manage_tags)),m.Ib(12),m.Dc("tags",null==(c=m.wc(13,46,t.task$))?null:c.tags)("availableTags",t.tags||m.Gc(66,Ml))("modifier","list-view")("canAddTag",null==(o=m.wc(14,48,t.task$))||null==o.permissions?null:o.permissions.add_tags)("canRemoveTag",null==(r=m.wc(15,50,t.task$))||null==r.permissions?null:r.permissions.remove_tags)("canManageTag",null==(l=m.wc(16,52,t.task$))||null==l.permissions?null:l.permissions.manage_tags)("taskId",null==t.task?null:t.task.id)("spaceId",null==t.task?null:t.task.project_id)("spaceAccess",(null==(d=m.wc(17,54,t.task$))||null==d.project?null:d.project.access)&&(null==(d=m.wc(18,56,t.task$))||null==d.project?null:d.project.permission_level)&&(null==(d=m.wc(19,58,t.task$))||null==d.project?null:d.project.permission_level)>t.commentPermission)("preventBadgeClick",!0)("canDelete",m.wc(20,60,t.canDelete$))("onlyDeleteIfOwner",m.wc(21,62,t.onlyDeleteIfOwner$))("userId",m.wc(22,64,t.user$))}}function iu(t,e){if(1&t&&(m.cc(0,"div",377),m.vc(1,"async"),m.cc(2,"div"),m.bd(3,au,23,67,"cu-tags-list",378),m.vc(4,"async"),m.bc(),m.bc()),2&t){const t=m.uc(2);let e=null;m.Ob("cu-tags-badge-view-only",!(null!=(e=m.wc(1,3,t.task$))&&null!=e.permissions&&e.permissions.remove_tags)),m.Ib(3),m.Dc("ngIf",m.wc(4,5,t.task$)&&t.space)}}function nu(t,e){if(1&t&&(m.Xb(0,"cu-tags-view",382),m.vc(1,"async")),2&t){const t=m.uc(3);let e=null;m.Dc("tags",null==(e=m.wc(1,3,t.task$))?null:e.tags)("modifier","list-view")("readOnly",!0)}}function cu(t,e){if(1&t&&(m.cc(0,"div",377),m.bd(1,nu,2,5,"cu-tags-view",381),m.vc(2,"async"),m.bc()),2&t){const t=m.uc(2);m.Ib(1),m.Dc("ngIf",m.wc(2,1,t.task$))}}function ou(t,e){if(1&t){const t=m.dc();m.cc(0,"div",383,384),m.qc("click",function(){return m.Uc(t),m.uc(2).openDependencyModal()}),m.tc(),m.cc(2,"svg",385),m.cc(3,"g",326),m.Xb(4,"path",386),m.cc(5,"g",387),m.Xb(6,"path",388),m.Xb(7,"path",389),m.Xb(8,"path",390),m.bc(),m.bc(),m.bc(),m.bc()}}function ru(t,e){if(1&t&&(m.cc(0,"div",373),m.bd(1,iu,5,7,"div",374),m.vc(2,"async"),m.vc(3,"async"),m.bd(4,cu,3,3,"ng-template",null,375,m.cd),m.bd(6,ou,9,0,"div",376),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.bc()),2&t){const t=m.Rc(5),e=m.uc();let s=null,a=null;m.Ib(1),m.Dc("ngIf",(null==(s=m.wc(2,3,e.permissions$))?null:s.add_tags)&&!m.wc(3,5,e.disconnected$))("ngIfElse",t),m.Ib(5),m.Dc("ngIf",m.wc(7,7,e.task$)&&!(null!=(a=m.wc(8,9,e.task$))&&null!=a.dependencies&&a.dependencies.length)&&!(null!=(a=m.wc(9,11,e.getTasksLinked$))&&a.length)&&!(null!=(a=m.wc(10,13,e.task$))&&null!=a.goals&&a.goals.length)&&(null==(a=m.wc(11,15,e.permissions$))?null:a.add_dependencies)&&!m.wc(12,17,e.disconnected$)&&!(null!=(a=m.wc(13,19,e.team$))&&a.task_relationships))}}function lu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-blockers-counter",391),m.qc("onLoadDependencies",function(e){return m.Uc(t),m.uc().loadDependencies(e.task,e.dependencies)})("onClick",function(){return m.Uc(t),m.uc().scrollToTaskRelationships()}),m.vc(1,"async"),m.vc(2,"async"),m.bc()}if(2&t){const t=m.uc();let e=null;m.Dc("mainTask",m.wc(1,2,t.task$))("dependencies",null==(e=m.wc(2,4,t.task$))?null:e.dependencies)}}function du(t,e){if(1&t){const t=m.dc();m.cc(0,"div",392),m.cc(1,"cu-task-blockers",393),m.qc("onOpenDependencies",function(){return m.Uc(t),m.uc().openDependencyModal()})("onCloseTask",function(){return m.Uc(t),m.uc().closeTask()})("onLoadDependencies",function(e){return m.Uc(t),m.uc().loadDependencies(e.task,e.dependencies)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.bc(),m.Xb(11,"div",394,395),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null;m.Ib(1),m.Dc("dependencies",null==(e=m.wc(2,9,t.task$))?null:e.dependencies)("mainTask",m.wc(3,11,t.task$))("tasksLinked",m.wc(4,13,t.getTasksLinked$))("goals",null==(s=m.wc(5,15,t.task$))?null:s.goals)("teamId",m.wc(6,17,t.teamId$))("canOpenDependencies",(null==(a=m.wc(7,19,t.permissions$))?null:a.add_dependencies)&&!m.wc(8,21,t.disconnected$))("taskBlockers",m.wc(9,23,t.taskBlockers$))("tasksBlocked",m.wc(10,25,t.tasksBlocked$))("modifier","cu-task-blockers__body_task-view")}}function uu(t,e){if(1&t&&(m.Xb(0,"cu-task-row-status",396),m.vc(1,"async"),m.vc(2,"async")),2&t){const t=m.uc();let e=null,s=null;m.Dc("taskView",!0)("status",null==(e=m.wc(1,8,t.task$))?null:e.status)("itemClass","cu-task-row-status_dot")("hasCustomType",!0)("customType",!0)("isSimpleStatus",null==(s=m.wc(2,10,t.task$))?null:s.simple_statuses)("showSettings",!1)("disabled",!0)}}function hu(t,e){if(1&t&&(m.Xb(0,"div",397),m.vc(1,"async"),m.vc(2,"async")),2&t){const t=m.uc();let e=null;m.Ob("task-name-block__icon_custom-type",(null==(e=m.wc(1,2,t.projectFeatures$))||null==e.milestones?null:e.milestones.enabled)&&!(null==(e=m.wc(2,4,t.task$))||!e.custom_type))}}function mu(t,e){if(1&t&&(m.Xb(0,"div",398),m.vc(1,"async"),m.vc(2,"async")),2&t){const t=m.uc();let e=null;m.Ob("task-name-block__icon_custom-type",(null==(e=m.wc(1,2,t.projectFeatures$))||null==e.milestones?null:e.milestones.enabled)&&!(null==(e=m.wc(2,4,t.task$))||!e.custom_type))}}const bu=function(t){return{"text-indent":t}};function ku(t,e){if(1&t){const t=m.dc();m.cc(0,"textarea",399,400),m.qc("paste",function(e){return m.Uc(t),m.uc().pasteTaskName(e)})("input",function(e){return m.Uc(t),m.uc().changeTaskName(e)})("keydown",function(e){return m.Uc(t),m.uc().keydownTaskName(e)})("compositionstart",function(){return m.Uc(t),m.uc().taskNameComposing=!0})("compositionend",function(){return m.Uc(t),m.uc().taskNameComposing=!1})("blur",function(e){return m.Uc(t),m.uc().taskInputBlur(e)})("focus",function(e){return m.Uc(t),m.uc().taskInputFocus(e)}),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null;m.Dc("ngStyle",m.Hc(20,bu,(null!=(e=m.wc(3,2,t.task$))&&e.parent||null!=(e=m.wc(4,4,t.task$))&&e.private)&&null!=(e=m.wc(5,6,t.projectFeatures$))&&null!=e.milestones&&e.milestones.enabled&&null!=(e=m.wc(6,8,t.task$))&&e.custom_type?"50px":null!=(e=m.wc(7,10,t.task$))&&e.parent||null!=(e=m.wc(8,12,t.task$))&&e.private||null!=(e=m.wc(9,14,t.projectFeatures$))&&null!=e.milestones&&e.milestones.enabled&&null!=(e=m.wc(10,16,t.task$))&&e.custom_type?"22px":"0"))("value",(null==(s=m.wc(11,18,t.task$))?null:s.name)||"")}}function pu(t,e){if(1&t&&(m.cc(0,"div",319),m.dd(1),m.vc(2,"async"),m.bc()),2&t){const t=m.uc();let e=null;m.Ib(1),m.ed(null==(e=m.wc(2,1,t.task$))?null:e.name)}}function gu(t,e){1&t&&m.Yb(0)}function vu(t,e){1&t&&(m.cc(0,"div",401),m.Xb(1,"div",402),m.Xb(2,"div",403),m.Xb(3,"div",403),m.Xb(4,"div",403),m.Xb(5,"div",403),m.Xb(6,"div",403),m.Xb(7,"div",403),m.Xb(8,"div",404),m.bc())}function fu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-custom-fields",405),m.qc("refreshTaskCustomFields",function(){return m.Uc(t),m.uc().refreshTaskCustomFields()})("updateCustomFieldValue",function(e){return m.Uc(t),m.uc().updateCustomFieldValue(e.field,e.value)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null;m.Dc("permissions",m.wc(1,7,t.permissions$))("disconnected",m.wc(2,9,t.disconnected$))("task",m.wc(3,11,t.task$))("customFields",null==(e=m.wc(4,13,t.task$))?null:e.customFields)("subcategory",null==(s=m.wc(5,15,t.task$))?null:s.subcategory)("forViewTask",!0)("team",m.wc(6,17,t.team$))}}const _u=function(){return{}};function yu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-subtasks",406,407),m.qc("onCreateChecklistFromTemplate",function(){return m.Uc(t),m.uc().onCreateChecklistFromTemplate()})("onCreateChecklist",function(){return m.Uc(t),m.uc().onCreateChecklist()})("onConflict",function(e){return m.Uc(t),m.uc().openConflictManagementDialog(e)})("onRemoveSubtask",function(e){return m.Uc(t),m.uc().removeSubtask(e)})("subtaskCreated",function(e){return m.Uc(t),m.uc().createSubtask(e)})("onUpdateTask",function(e){return m.Uc(t),m.uc().updateTaskView(e,"subtasks")})("onTimeEstimatChange",function(){return m.Uc(t),m.uc().reloadTask()})("commentUpdateSuccess",function(e){return m.Uc(t),m.uc().commentUpdateSuccess$.next(e)})("commentClick",function(e){return m.Uc(t),m.uc().todoCommentClick(e)})("onStatusSettings",function(){return m.Uc(t),m.uc().openStatusSettings()})("onLazyLoad",function(e){return m.Uc(t),m.uc().lazyLoad(e)})("onReloadTask",function(){return m.Uc(t),m.uc().reloadTask()})("onAddPendingTask",function(e){return m.Uc(t),m.uc().addPendingSubtask(e)})("onTimeEstimateAction",function(e){return m.Uc(t),m.uc().timeEstimateAction(e)})("onRemovePendingTask",function(e){return m.Uc(t),m.uc().removePendingSubtask(e)})("onToggleSubtask",function(e){return m.Uc(t),m.uc().toggleSubtask(e)})("onSetSubtaskMap",function(e){return m.Uc(t),m.uc().setSubtaskMap(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.vc(22,"async"),m.vc(23,"async"),m.vc(24,"async"),m.vc(25,"async"),m.vc(26,"async"),m.vc(27,"async"),m.vc(28,"async"),m.vc(29,"async"),m.vc(30,"async"),m.vc(31,"async"),m.vc(32,"async"),m.vc(33,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null;m.Dc("mainScrollbar",t.mainScrollbar?t.mainScrollbar.nativeElement:null)("userGroups",m.wc(2,24,t.userGroups$))("onlyDeleteIfOwner",m.wc(3,26,t.onlyDeleteIfOwner$))("canDelete",m.wc(4,28,t.canDelete$))("meUser",m.wc(5,30,t.sharedData.currentUser))("canAddChecklists",(null==(e=m.wc(6,32,t.permissions$))?null:e.add_checklists)&&!m.wc(7,34,t.disconnected$))("weights",m.wc(8,36,t.weights$))("canAddSubtasks",(null==(s=m.wc(9,38,t.permissions$))?null:s.add_subtasks)&&!m.wc(10,40,t.disconnected$))("moveSubtasks",(null==(a=m.wc(11,42,t.permissions$))?null:a.move_task)&&!m.wc(12,44,t.disconnected$))("multiTaskEnabled",!m.wc(13,46,t.isGuest$)&&!m.wc(14,48,t.disconnected$)&&!t.isSharingApp)("taskAccess",((null==(i=m.wc(15,50,t.task$))?null:i.permission_level)===t.editPermission||(null==(i=m.wc(16,52,t.task$))?null:i.permission_level)===t.createPermission)&&!m.wc(17,54,t.disconnected$))("listAccess",((null==(n=m.wc(18,56,t.task$))||null==n.subcategory?null:n.subcategory.permission_level)===t.editPermission||(null==(n=m.wc(19,58,t.task$))||null==n.subcategory?null:n.subcategory.permission_level)===t.createPermission)&&!m.wc(20,60,t.disconnected$))("subtasksOpenMap",m.wc(21,62,t.subtasksOpenMap$)[null==(c=m.wc(22,64,t.task$))?null:c.id]||m.Gc(88,_u))("timeEstimatesDataMap",m.wc(23,66,t.timeEstimatesDataMap$))("features",m.wc(24,68,t.projectFeatures$))("openStatus",m.wc(25,70,t.openStatus$))("closedStatus",m.wc(26,72,t.closedStatus$))("statuses",m.wc(27,74,t.statuses$))("users",m.wc(28,76,t.users$))("tags",m.wc(29,78,t.tag$))("tagsLoadingMap",m.wc(30,80,t.tagsLoadingMap$)[null==t.task?null:t.task.project_id])("disconnected",m.wc(31,82,t.disconnected$))("pendingSubtasks",m.wc(32,84,t.pendingSubtasks$))("rollups",m.wc(33,86,t.rollups$))}}function wu(t,e){if(1&t&&(m.Xb(0,"cu-checklist2",408),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async")),2&t){const t=m.uc();let e=null,s=null;m.Dc("itemData",m.wc(1,7,t.task$))("deletePermission",null==(e=m.wc(2,9,t.task$))||null==e.permissions?null:e.permissions.can_delete_checklist_item)("spaceData",m.wc(3,11,t.project$))("teamId",m.wc(4,13,t.teamId$))("isNewTask",!1)("newTaskMembers",null)("checklists",null==(s=m.wc(5,15,t.task$))?null:s.checklists)}}const Tu=function(t,e,s){return{github:t,gitlab:e,bitbucket:s}};function Cu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-relationships",409),m.qc("saveRelationshipChanges",function(e){return m.Uc(t),m.uc().saveTaskRelationships(e)})("setRelationships",function(e){return m.Uc(t),m.uc().setTaskRelationships(e.relationships)})("reloadRelationshipLinks",function(){return m.Uc(t),m.uc().reloadTaskRelationships()})("cuIsInViewport",function(e){return m.Uc(t),m.uc().relationshipsVisible(e)})("linkClicked",function(e){return m.Uc(t),m.uc().linkClicked(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null;m.Dc("relationships",null==(e=m.wc(1,11,t.task$))?null:e.relationships)("isOffline",m.wc(2,13,t.disconnected$))("integrationsEnabled",m.Jc(43,Tu,(null==(s=m.wc(3,15,t.task$))?null:s.project_using_github)&&(null==(s=m.wc(4,17,t.task$))?null:s.project.access)&&m.wc(5,19,t.canManageGit$),(null==(s=m.wc(6,21,t.task$))?null:s.project_using_gitlab)&&(null==(s=m.wc(7,23,t.task$))?null:s.project.access)&&m.wc(8,25,t.canManageGit$),(null==(s=m.wc(9,27,t.task$))?null:s.project_using_bitbucket)&&(null==(s=m.wc(10,29,t.task$))?null:s.project.access)&&m.wc(11,31,t.canManageGit$)))("team",m.wc(12,33,t.team$))("user",m.wc(13,35,t.user$))("hostTask",m.wc(14,37,t.task$))("features",m.wc(15,39,t.projectFeatures$))("project",m.wc(16,41,t.project$))("forViewTask",!0)("scrollContainer",null==t.mainScrollbar?null:t.mainScrollbar.nativeElement)("isInViewPortEnabled",!0)}}function Su(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-attachments",410,411),m.qc("onRemove",function(e){return m.Uc(t),m.uc().removeAttachment(e)})("attachmentsChanged",function(){return m.Uc(t),m.uc().fetchAttachments()})("onSetCoverImage",function(e){return m.Uc(t),m.uc().setCoverImage(e)})("storageLimitExceeded",function(){return m.Uc(t),m.uc().scrollToAttachments()})("cuIsInViewport",function(e){return m.Uc(t),m.uc().attachmentVisible(e)})("onCreateDoc",function(){return m.Uc(t),m.uc().createDoc(!1)})("onUpdateView",function(e){return m.Uc(t),m.uc().updateView(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null,o=null,r=null;m.Ob("cu-hidden-print",0===(null==(e=m.wc(2,16,t.attachments$))?null:e.length)),m.Dc("scrollContainer",null==t.mainScrollbar?null:t.mainScrollbar.nativeElement)("uploaderUrl",m.wc(3,18,t.attachmentsUploaderUrl$))("attachments",m.wc(4,20,t.attachments$))("coverImage",null==(s=m.wc(5,22,t.task$))?null:s.coverimage)("parentId",null==(a=m.wc(6,24,t.task$))?null:a.id)("uniqueId","section"+(null==(i=m.wc(7,26,t.task$))?null:i.id))("canAddAttachments",(null==(n=m.wc(8,28,t.permissions$))?null:n.add_attachments)&&(null==(n=m.wc(9,30,t.task$))?null:n.permission_level)!==t.commentPermission&&!m.wc(10,32,t.disconnected$))("canRemoveAttachments",(null==(c=m.wc(11,34,t.permissions$))?null:c.remove_attachments)&&(null==(c=m.wc(12,36,t.task$))?null:c.permission_level)!==t.commentPermission&&!m.wc(13,38,t.disconnected$))("canRemoveOwnAttachments",(null==(o=m.wc(14,40,t.task$))?null:o.permission_level)===t.commentPermission&&!m.wc(15,42,t.disconnected$))("canChangeDescription",(null==(r=m.wc(16,44,t.permissions$))?null:r.change_description)&&!m.wc(17,46,t.disconnected$))("onlyDeleteIfOwner",m.wc(18,48,t.onlyDeleteIfOwner$))("canDelete",m.wc(19,50,t.canDelete$))("isInViewPortEnabled",!0)("allowNewDoc",m.wc(20,52,t.canCreateDoc$))}}function Iu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-uploader-bar",419),m.qc("onFilesAdded",function(e){return m.Uc(t),m.uc(2).addFileToTask(e)})("onBadgeClick",function(){return m.Uc(t),m.uc(2).scrollToAttachments()})("onRelationshipsBadgeClick",function(){return m.Uc(t),m.uc(2).scrollToTaskRelationships()}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.bc()}if(2&t){const t=m.uc(2);let e=null,s=null,a=null,i=null;m.Dc("attachmentsLength",null==(e=m.wc(1,5,t.attachments$))?null:e.length)("badgeVisible",t.showAttachmentsBadge)("uniqueId","section"+(null==(s=m.wc(2,7,t.task$))?null:s.id))("relationshipsLength",null==(a=m.wc(3,9,t.task$))||null==a.relationships?null:a.relationships.sections.length)("relationshipsBadgeVisible",t.showRelationshipsBadge&&(null==(i=m.wc(4,11,t.team$))?null:i.task_relationships)&&!1)}}function $u(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-entity-links-badge",420),m.qc("linkClicked",function(e){return m.Uc(t),m.uc(2).linkClicked(e.link)}),m.vc(1,"async"),m.bc()}if(2&t){const t=m.uc(2);m.Dc("links",m.wc(1,4,t.docLinks$))("linkIcon","cu2-docs")("color","#7b68ee")("isDocMentions",!0)}}function Du(t,e){1&t&&m.Xb(0,"div",421)}function Ou(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-entity-links-badge",422),m.qc("linkClicked",function(e){return m.Uc(t),m.uc(2).linkClicked(e.link)}),m.bc()}if(2&t){const t=e.$implicit;m.Dc("links",t.links)("linkIcon",t.type.icon)("label",t.type.label)("color",t.type.color)}}function ju(t,e){if(1&t&&(m.ac(0),m.Xb(1,"cu-entity-links-badge",423),m.vc(2,"async"),m.Zb()),2&t){const t=m.uc(2);let e=null;m.Ib(1),m.Dc("linkIcon","bugsnag")("label","Bugsnag")("color","#000D47")("isOneItemStale",!0)("url",null==(e=m.wc(2,5,t.task$))||null==e.bugsnag_link?null:e.bugsnag_link.url)}}function Lu(t,e){1&t&&(m.ac(0),m.Xb(1,"div",427),m.cc(2,"div",428),m.gc(3,429),m.bc(),m.Zb())}function Uu(t,e){1&t&&(m.ac(0),m.Xb(1,"div",430),m.cc(2,"div",428),m.gc(3,431),m.bc(),m.Zb())}function Mu(t,e){if(1&t&&(m.cc(0,"div",426),m.bd(1,Lu,4,0,"ng-container",40),m.vc(2,"async"),m.bd(3,Uu,4,0,"ng-container",40),m.vc(4,"async"),m.bc()),2&t){const t=m.uc(3);m.Ib(1),m.Dc("ngIf",m.wc(2,2,t.disconnected$)),m.Ib(2),m.Dc("ngIf",!m.wc(4,4,t.disconnected$))}}function Au(t,e){1&t&&(m.cc(0,"div",432),m.Xb(1,"div",430),m.cc(2,"div",428),m.gc(3,433),m.bc(),m.bc())}function Eu(t,e){if(1&t&&(m.ac(0),m.bd(1,Mu,5,6,"div",424),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.bd(5,Au,4,0,"div",425),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.Zb()),2&t){const t=m.uc(2);let e=null,s=null;m.Ib(1),m.Dc("ngIf",!(null!=(e=m.wc(2,2,t.permissions$))&&e.add_attachments)&&!(null!=(e=m.wc(3,4,t.permissions$))&&e.comment)||m.wc(4,6,t.disconnected$)),m.Ib(4),m.Dc("ngIf",(null==(s=m.wc(6,8,t.permissions$))?null:s.comment)&&(null==(s=m.wc(7,10,t.task$))?null:s.permission_level)===t.commentPermission&&!m.wc(8,12,t.disconnected$))}}function Fu(t,e){if(1&t&&(m.cc(0,"div",412),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.bd(5,Iu,5,13,"cu-uploader-bar",413),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.cc(9,"div",414),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.Xb(13,"cu-task-mentions-badge",415),m.vc(14,"async"),m.bd(15,$u,2,6,"cu-entity-links-badge",416),m.vc(16,"async"),m.bd(17,Du,1,0,"div",417),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.bd(21,Ou,1,4,"cu-entity-links-badge",418),m.vc(22,"async"),m.bd(23,ju,3,7,"ng-container",40),m.vc(24,"async"),m.bc(),m.bd(25,Eu,9,14,"ng-container",40),m.vc(26,"async"),m.bc()),2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null,o=null;m.Ob("no-permission",!(null!=(e=m.wc(1,14,t.permissions$))&&e.add_attachments)||(null==(e=m.wc(2,16,t.task$))?null:e.permission_level)===t.commentPermission||m.wc(3,18,t.disconnected$))("task-column__footer_hide-description",m.wc(4,20,t.links$).length>3),m.Ib(5),m.Dc("ngIf",(null==(s=m.wc(6,22,t.permissions$))?null:s.add_attachments)&&(null==(s=m.wc(7,24,t.task$))?null:s.permission_level)!==t.commentPermission&&!m.wc(8,26,t.disconnected$)),m.Ib(4),m.Ob("task-uploads-badge__container-right_shifted-up",!(null!=(a=m.wc(10,28,t.permissions$))&&a.add_attachments)&&(null==(a=m.wc(11,30,t.task$))?null:a.permission_level)!==t.commentPermission||m.wc(12,32,t.disconnected$)),m.Ib(4),m.Dc("taskMentions",null==(i=m.wc(14,34,t.task$))||null==i.mentions?null:i.mentions.mentions),m.Ib(2),m.Dc("ngIf",null==(n=m.wc(16,36,t.docLinks$))?null:n.length),m.Ib(2),m.Dc("ngIf",((null==(c=m.wc(18,38,t.docLinks$))?null:c.length)||(null==(c=m.wc(19,40,t.task$))||null==c.mentions?null:c.mentions.mentions.length))&&(null==(c=m.wc(20,42,t.links$))?null:c.length)),m.Ib(4),m.Dc("ngForOf",m.wc(22,44,t.links$))("ngForTrackBy",t.trackById),m.Ib(2),m.Dc("ngIf",null==(o=m.wc(24,46,t.task$))||null==o.bugsnag_link?null:o.bugsnag_link.url),m.Ib(2),m.Dc("ngIf",m.wc(26,48,t.task$))}}const xu=function(){return{right:!0}};function Ru(t,e){1&t&&m.Xb(0,"div",434),2&t&&m.Dc("resizeEdges",m.Gc(1,xu))}function Pu(t,e){if(1&t){const t=m.dc();m.cc(0,"div",439),m.cc(1,"div",440),m.gc(2,441),m.bc(),m.cc(3,"div",442),m.qc("click",function(){return m.Uc(t),m.uc(2).toggleThreads()}),m.gc(4,443),m.bc(),m.dd(5," . "),m.bc()}}function zu(t,e){1&t&&(m.cc(0,"div",448),m.gc(1,449),m.bc())}function Nu(t,e){if(1&t&&(m.cc(0,"div",450),m.dd(1),m.vc(2,"async"),m.bc()),2&t){const t=m.uc(4);let e=null;m.Ib(1),m.fd(" ",null==(e=m.wc(2,1,t.task$))?null:e.new_mentioned_thread_count," ")}}function Hu(t,e){if(1&t&&(m.ac(0),m.Xb(1,"div",445),m.bd(2,zu,2,0,"div",446),m.vc(3,"async"),m.bd(4,Nu,3,3,"div",447),m.vc(5,"async"),m.Zb()),2&t){const t=m.uc(3);let e=null,s=null;m.Ib(1),m.Dc("icon","cu2-comment-lines"),m.Ib(1),m.Dc("ngIf",(null==(e=m.wc(3,3,t.task$))?null:e.new_thread_count)>0),m.Ib(2),m.Dc("ngIf",null==(s=m.wc(5,5,t.task$))?null:s.new_mentioned_thread_count)}}function Bu(t,e){1&t&&(m.ac(0),m.Xb(1,"div",451),m.cc(2,"div",448),m.gc(3,452),m.bc(),m.Zb()),2&t&&(m.Ib(1),m.Dc("icon","close-white"))}function qu(t,e){if(1&t){const t=m.dc();m.cc(0,"div",444),m.qc("click",function(){return m.Uc(t),m.uc(2).toggleThreads()}),m.vc(1,"async"),m.bd(2,Hu,6,7,"ng-container",40),m.vc(3,"async"),m.bd(4,Bu,4,1,"ng-container",40),m.vc(5,"async"),m.bc()}if(2&t){const t=m.uc(2);m.Dc("cuTooltip",m.wc(1,3,t.displayUnviewed$)?null:"Show Threads"),m.Ib(2),m.Dc("ngIf",!m.wc(3,5,t.displayUnviewed$)),m.Ib(2),m.Dc("ngIf",m.wc(5,7,t.displayUnviewed$))}}const Xu=function(t){return{thread:t}};function Gu(t,e){if(1&t){const t=m.dc();m.cc(0,"div",453),m.cc(1,"cu-comment-thread",454),m.qc("onAddToContent",function(e){return m.Uc(t),m.uc(2).addCommentToDesc(!1,e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.bc(),m.bc()}if(2&t){const t=m.uc(2);let e=null,s=null,a=null,i=null;m.Ib(1),m.Dc("parentId",null==(e=m.wc(2,17,t.task$))?null:e.id)("type",t.CommentType.Task)("members",m.wc(3,19,t.projectMembers$))("assignedComments",!0)("filters",m.Hc(35,Xu,null!=(s=m.wc(4,21,t.task$))&&s.new_thread_count?2:1))("canComment",!1)("user",m.wc(5,23,t.user$))("popupInBody",!0)("readOnly",!(null!=(a=m.wc(6,25,t.permissions$))&&a.comment)||m.wc(7,27,t.disconnected$))("permissions",m.wc(8,29,t.permissions$))("canManageEmail",m.wc(9,31,t.canManageEmail$))("allowLink",!0)("allowAddToContent",!0)("allowAddToInbox",!0)("taskId",null==(i=m.wc(10,33,t.task$))?null:i.id)("showUserGroups",!0)("taskUserGroups",t.taskUserGroups)}}function Vu(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-comment-bar",461,462),m.qc("onSubmit",function(e){return m.Uc(t),m.uc(4).submitComment(e)})("onSubmitToDesc",function(e){return m.Uc(t),m.uc(4).addCommentToDesc(!0,e)})("onScrollToComment",function(e){return m.Uc(t),m.uc(4).scrollToComment(e)})("onCreateDoc",function(){return m.Uc(t),m.uc(4).createDoc(!0)})("onEmailUserAction",function(e){return m.Uc(t),m.uc(4).emailUserAction(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.vc(22,"async"),m.vc(23,"async"),m.bc()}if(2&t){const t=m.uc(4);let e=null,s=null,a=null,i=null,n=null,c=null,o=null,r=null;m.Dc("parentId",null==(e=m.wc(2,31,t.task$))?null:e.id)("attachmentType",1)("taskId",null==(s=m.wc(3,33,t.task$))?null:s.id)("allowEmailFeature",m.wc(4,35,t.canSendEmails$)&&(null==(a=m.wc(5,37,t.projectFeatures$))||null==a.emails?null:a.emails.enabled))("canManageEmail",m.wc(6,39,t.canManageEmail$))("isMainTask",!0)("loading",t.commentSubmitting)("showReplyTo",!0)("project",m.wc(7,41,t.project$))("weights",m.wc(8,43,t.weights$))("projectMembers",m.wc(9,45,t.projectMembers$))("uploaderUrl",t.commentsUploaderUrl)("allowAddEmailFollowers",null==(i=m.wc(10,47,t.team$))?null:i.emails_as_replies)("allowAddFollowers",null==(n=m.wc(11,49,t.team$))?null:n.threaded_comments)("id","task_"+(null==(c=m.wc(12,51,t.task$))?null:c.id))("disableUserMention",!!t.embedSlashCommandInfo)("staticToolbar",!1)("slashCommandSupport",!0)("slashCommandCustom",!0)("threadFollowers",m.wc(13,53,t.defaultThreadFollowers$))("user",m.wc(14,55,t.sharedData.currentUser))("userGroups",m.wc(15,57,t.userGroups$))("authedState",m.wc(16,59,t.authedState$))("signatures",null==(o=m.wc(17,61,t.authedState$))?null:o.emailSignatures)("team",m.wc(18,63,t.team$))("allowNewDoc",!m.wc(19,65,t.isGuest$))("task",m.wc(20,67,t.task$))("isGuest",m.wc(21,69,t.isGuest$))("subcategory",null==(r=m.wc(22,71,t.task$))?null:r.subcategory)("taskUserGroups",t.taskUserGroups)("suggestedEmails",m.wc(23,73,t.suggestedEmails$))}}function Wu(t,e){1&t&&m.Xb(0,"div",463)}function Qu(t,e){if(1&t&&(m.cc(0,"div",457),m.Xb(1,"cu-comment-users",458),m.vc(2,"async"),m.vc(3,"async"),m.bd(4,Vu,24,75,"cu-comment-bar",459),m.vc(5,"async"),m.vc(6,"async"),m.bd(7,Wu,1,0,"ng-template",null,460,m.cd),m.bc()),2&t){const t=m.Rc(8),e=m.uc(3);let s=null;m.Ib(1),m.Dc("usersViewing",m.wc(2,4,e.viewingOnly$))("usersTyping",m.wc(3,6,e.commenting$)),m.Ib(3),m.Dc("ngIf",(null==(s=m.wc(5,8,e.permissions$))?null:s.comment)&&!m.wc(6,10,e.disconnected$))("ngIfElse",t)}}function Zu(t,e){if(1&t){const t=m.dc();m.ac(0),m.cc(1,"div",455),m.qc("commentUpdateSuccess",function(e){return m.Uc(t),m.uc(2).commentUpdateSuccess$.next(e)})("onAttachmentsUpdate",function(e){return m.Uc(t),m.uc(2).updateAttachments(e)})("onUpdateHistory",function(e){return m.Uc(t),m.uc(2).updateHistory(e)})("onCommentReply",function(e){return m.Uc(t),m.uc(2).commentReply(e)})("onAddToContent",function(e){return m.Uc(t),m.uc(2).addCommentToDesc(!1,e)})("onScrollToComment",function(e){return m.Uc(t),m.uc(2).scrollToComment(e)})("onEmailUserAction",function(e){return m.Uc(t),m.uc(2).emailUserAction(e)})("onRemoveZoom",function(e){return m.Uc(t),m.uc(2).removeZoomItem(e)})("onAttachmentClick",function(e){return m.Uc(t),m.uc(2).previewAttchment(e)})("onUpdateCommentFollowers",function(e){return m.Uc(t),m.uc(2).updateCommentFollowers(e)})("onAddToInbox",function(e){return m.Uc(t),m.uc(2).addCommentToInbox(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.bc(),m.bd(22,Qu,9,12,"div",456),m.Zb()}if(2&t){const t=m.uc(2);let e=null,s=null,a=null,i=null,n=null,c=null,o=null;m.Ib(1),m.Dc("coverImage",null==(e=m.wc(2,20,t.task$))?null:e.coverimage)("statuses",m.wc(3,22,t.statuses$))("team",m.wc(4,24,t.team$))("weights",m.wc(5,26,t.weights$))("canManageEmail",m.wc(6,28,t.canManageEmail$))("permissions",m.wc(7,30,t.permissions$))("readonly",m.wc(8,32,t.disconnected$))("permissionLevel",null==(s=m.wc(9,34,t.task$))?null:s.permission_level)("allowEmailFeature",m.wc(10,36,t.allowEmailFeature$))("authedState",m.wc(11,38,t.authedState$))("project",m.wc(12,40,t.project$))("taskUserGroups",t.taskUserGroups)("canAddAttachments",(null==(a=m.wc(13,42,t.permissions$))?null:a.add_attachments)&&(null==(a=m.wc(14,44,t.task$))?null:a.permission_level)!==t.commentPermission)("canRemoveAttachments",(null==(i=m.wc(15,46,t.permissions$))?null:i.remove_attachments)&&(null==(i=m.wc(16,48,t.task$))?null:i.permission_level)!==t.commentPermission)("canRemoveOwnAttachments",(null==(n=m.wc(17,50,t.task$))?null:n.permission_level)===t.commentPermission)("canChangeDescription",null==(c=m.wc(18,52,t.permissions$))?null:c.change_description)("members",m.wc(19,54,t.projectMembers$))("dueDateEnabled",null==(o=m.wc(20,56,t.projectFeatures$))||null==o.due_dates?null:o.due_dates.enabled)("userGroups",m.wc(21,58,t.userGroups$)),m.Ib(21),m.Dc("ngIf",t.viewLoaded&&!t.isSharingApp)}}function Ku(t,e){if(1&t&&(m.cc(0,"div",435),m.vc(1,"async"),m.bd(2,Pu,6,0,"div",436),m.vc(3,"async"),m.bd(4,qu,6,9,"div",437),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.bd(8,Gu,11,37,"div",438),m.vc(9,"async"),m.bd(10,Zu,23,60,"ng-container",40),m.vc(11,"async"),m.bc()),2&t){const t=m.uc();let e=null;m.ad("width",100-m.wc(1,6,t.resizeDividerPercent$),"%"),m.Ib(2),m.Dc("ngIf",m.wc(3,8,t.displayUnviewed$)),m.Ib(2),m.Dc("ngIf",(null==(e=m.wc(5,10,t.sharedData.compatCurrentTeam$))?null:e.threaded_comments)&&((null==(e=m.wc(6,12,t.task$))?null:e.thread_count)>0||(null==(e=m.wc(7,14,t.task$))?null:e.new_thread_count)>0)),m.Ib(4),m.Dc("ngIf",m.wc(9,16,t.displayUnviewed$)),m.Ib(2),m.Dc("ngIf",!m.wc(11,18,t.displayUnviewed$))}}function Ju(t,e){1&t&&m.Yb(0)}function Yu(t,e){if(1&t){const t=m.dc();m.cc(0,"div",360),m.cc(1,"div",467),m.qc("ondrop",function(e){return m.Uc(t),m.uc(2).addFileToTask(e)}),m.cc(2,"div",363),m.Xb(3,"div",364),m.cc(4,"div",365),m.gc(5,468),m.bc(),m.bc(),m.bc(),m.bc()}}function th(t,e){if(1&t&&(m.cc(0,"div",464),m.cc(1,"div",465),m.dd(2),m.vc(3,"async"),m.bc(),m.cc(4,"div",47,466),m.bd(6,Ju,1,0,"ng-container",62),m.bc(),m.bd(7,Yu,6,0,"div",44),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.bc()),2&t){const t=m.uc(),e=m.Rc(259);let s=null,a=null;m.Ib(2),m.ed(null==(s=m.wc(3,4,t.task$))?null:s.name),m.Ib(4),m.Dc("ngIf",t.editorFullScreen)("ngIfThen",e),m.Ib(1),m.Dc("ngIf",(null==(a=m.wc(8,6,t.permissions$))?null:a.add_attachments)&&(null==(a=m.wc(9,8,t.task$))?null:a.permission_level)!==t.commentPermission&&!m.wc(10,10,t.disconnected$))}}function eh(t,e){if(1&t){const t=m.dc();m.cc(0,"div",469),m.qc("click",function(){return m.Uc(t),m.uc().prevTask()}),m.vc(1,"async"),m.Xb(2,"div",470),m.bc()}if(2&t){const t=m.uc();m.Dc("cuTooltip",m.wc(1,1,t.prevTaskTooltip$))}}function sh(t,e){if(1&t){const t=m.dc();m.cc(0,"div",471),m.qc("click",function(){return m.Uc(t),m.uc().nextTask()}),m.vc(1,"async"),m.Xb(2,"div",470),m.bc()}if(2&t){const t=m.uc();m.Dc("cuTooltip",m.wc(1,1,t.nextTaskTooltip$))}}function ah(t,e){}function ih(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-selector",472),m.qc("onSelect",function(e){return m.Uc(t),m.uc().taskSelected(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.bc()}if(2&t){const t=m.uc();let e=null;m.Dc("task",m.wc(1,10,t.task$))("defaultProject",m.wc(2,12,t.project$))("requireCreateAndEdit",!0)("searchSubtasks","merge"===t.selectTaskType)("expandableSubtasks","merge"===t.selectTaskType)("excludeParentTask","merge"!==t.selectTaskType)("taskIdsToExclude",m.Hc(16,Fl,null==(e=m.wc(3,14,t.task$))?null:e.id))("description","merge"==t.selectTaskType?t.commonStringsService.mergeTaskDescriptionText:null)("notice","merge"==t.selectTaskType?t.commonStringsService.privacyAndSharingInteritanceNoticeText:"make_subtask"==t.selectTaskType?t.commonStringsService.privacyAndSharingFromParentInheritanceText:null)("errorMsg",t.taskSelectErrorMsg)}}function nh(t,e){1&t&&m.Xb(0,"cu-task-not-found")}function ch(t,e){if(1&t){const t=m.dc();m.cc(0,"div",473),m.cc(1,"div",474),m.mc(2,475),m.Xb(3,"b"),m.vc(4,"username"),m.jc(),m.bc(),m.bc(),m.cc(5,"div",476),m.cc(6,"button",477),m.qc("click",function(){return m.Uc(t),m.uc().closeWsTask()}),m.gc(7,478),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Ib(4),m.kc(m.wc(4,1,t.wsUser)),m.hc(2)}}function oh(t,e){if(1&t){const t=m.dc();m.cc(0,"div",473),m.cc(1,"div",474),m.mc(2,479),m.Xb(3,"b"),m.vc(4,"username"),m.jc(),m.bc(),m.bc(),m.cc(5,"div",476),m.cc(6,"button",477),m.qc("click",function(){return m.Uc(t),m.uc().closeWsTask()}),m.cc(7,"div",480),m.gc(8,481),m.bc(),m.bc(),m.cc(9,"button",482),m.qc("click",function(){return m.Uc(t),m.uc().openWsMergedTask()}),m.cc(10,"div",480),m.gc(11,483),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.uc();m.Ib(4),m.kc(m.wc(4,1,t.wsUser)),m.hc(2)}}function rh(t,e){}function lh(t,e){}function dh(t,e){if(1&t){const t=m.dc();m.cc(0,"task-copy",484),m.qc("onTaskCopy",function(e){return m.Uc(t),m.uc().copyTask(e)}),m.bc()}if(2&t){const t=m.uc();m.Dc("copyName",t.copyName)("space",t.space)}}function uh(t,e){if(1&t){const t=m.dc();m.cc(0,"save-template",485),m.qc("onOpenTemplateManagerModal",function(e){return m.Uc(t),m.uc().openTemplateManagerModal(e)}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.bc()}if(2&t){const t=m.uc();m.Dc("task",m.wc(1,3,t.task$))("members",m.wc(2,5,t.members$))("user",m.wc(3,7,t.user$))}}function hh(t,e){if(1&t){const t=m.dc();m.cc(0,"div",486),m.mc(1,487),m.Xb(2,"b"),m.Xb(3,"b"),m.Xb(4,"b"),m.Xb(5,"b"),m.Xb(6,"b"),m.cc(7,"b"),m.Xb(8,"u"),m.bc(),m.Xb(9,"br"),m.Xb(10,"b"),m.Xb(11,"b"),m.Xb(12,"b"),m.Xb(13,"b"),m.cc(14,"b"),m.Xb(15,"u"),m.bc(),m.jc(),m.bc(),m.cc(16,"cu-folder-list-template-selector",488),m.qc("onLoadDataFromTemplate",function(e){return m.Uc(t),m.uc().loadDataFromTemplate(e)}),m.vc(17,"async"),m.vc(18,"async"),m.bc()}if(2&t){const t=m.uc();m.Ib(16),m.Dc("initTemplateType","task")("space",m.wc(17,3,t.sharedData.compatCurrentProject$))("task",m.wc(18,5,t.task$))}}function mh(t,e){}function bh(t,e){1&t&&m.Xb(0,"cu-slash-command-onboarding-message",489),2&t&&m.Dc("command",e.command)}function kh(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-task-editor",491,492),m.qc("onFileAdded",function(e){return m.Uc(t),m.uc(2).uploadEditorFile(e)})("onSave",function(e){return m.Uc(t),m.uc(2).updateDescription(e)})("onCancel",function(){return m.Uc(t),m.uc(2).cancelEdit()})("onChange",function(){return m.Uc(t),m.uc(2).editTask()})("onUpdateContent",function(e){return m.Uc(t),m.uc(2).updateContent(e)})("onTaskCreated",function(e){return m.Uc(t),m.uc(2).editorTaskCreated(e)})("onUpdate",function(){return m.Uc(t),m.uc(2).updateStoreWithContent()})("toggleFullscreen",function(e){return m.Uc(t),m.uc(2).toggleFullscreen(e)})("onScrollToComment",function(e){return m.Uc(t),m.uc(2).scrollToComment(e)})("onLoadHistory",function(){return m.Uc(t),m.uc(2).loadTaskDescHistory()}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"membersToUsers"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.vc(22,"async"),m.vc(23,"async"),m.vc(24,"async"),m.bc()}if(2&t){const t=m.uc(2),e=m.Rc(108);let s=null,a=null,i=null,n=null,c=null,o=null,r=null,l=null,d=null;m.Dc("isSaved",t.isSaved)("isError",t.isError)("userEditing",t.wsUserEditing)("emitContentImmediately",!0)("canEdit",(null==(s=m.wc(2,36,t.permissions$))?null:s.change_description)&&!m.wc(3,38,t.disconnected$))("weights",m.wc(4,40,t.weights$))("content",null==(a=m.wc(5,42,t.task$))?null:a.content)("entityId",null==(i=m.wc(6,44,t.task$))?null:i.id)("attachmentType",1)("hideUnfurl",!m.wc(7,46,t.task$)||!t.viewLoaded)("hideBlockHandle",!m.wc(8,48,t.task$)||!t.viewLoaded)("customTaskIdPath",(null==(n=m.wc(9,50,t.task$))?null:n.team)+"/"+(null==(n=m.wc(10,52,t.task$))?null:n.custom_id))("allowCreateSubtask",!(null!=(c=m.wc(11,54,t.task$))&&c.parent))("project",m.wc(12,56,t.project$))("users",m.wc(13,58,m.wc(14,60,t.projectMembers$)))("taskUserGroups",t.taskUserGroups)("linkToBlockId",m.wc(15,62,t.linkToBlockId$))("uploadParent",null==(o=m.wc(16,64,t.task$))?null:o.id)("userGroups",m.wc(17,66,t.userGroups$))("taskAccess",((null==(r=m.wc(18,68,t.task$))?null:r.permission_level)===t.editPermission||(null==(r=m.wc(19,70,t.task$))?null:r.permission_level)===t.createPermission)&&!m.wc(20,72,t.disconnected$))("modifier","cu-editor_task-view")("isShowHistory",!0)("isShowFullScreen",!0)("isFullScreen",t.editorFullScreen)("alwaysEnabled",t.editorFullScreen)("historyItems",m.wc(21,74,t.tasksDescriptionHistoryList$))("scrollContainer",t.editorFullScreen?t.fullScreenColumn:e)("enableUserMentions",!0)("slashCommandCustom",!0)("editorToken",null==(l=m.wc(22,76,t.task$))?null:l.editor_token)("allowPinToolbar",!0)("pinToolbarKey","task")("defaultCategory",null==(d=m.wc(23,78,t.task$))?null:d.category)("defaultSubcategory",m.wc(24,80,t.subcategory$))("stickyTopPX",65)("defaultEmbedSize","large")}}function ph(t,e){if(1&t&&(m.bd(0,kh,25,82,"cu-task-editor",490),m.vc(1,"async"),m.vc(2,"async")),2&t){const t=m.uc();let e=null;m.Dc("ngIf",void 0!==(null==(e=m.wc(1,1,t.task$))?null:e.content)&&(!t.isSharingApp||(null==(e=m.wc(2,3,t.task$))?null:e.content)))}}const gh=function(t,e,s,a,i,n,c,o,r,l,d,u,h,m,b,k,p,g,v,f,_,y,w,T,C,S,I,$,D,O){return{a:t,me:e,w:s,p:a,d:i,inbox:n,sd:c,t:o,est:r,pts:l,s:d,close:u,m:h,"-":m,o:b,b:k,lt:p,"#":!0,"@":g,ac:v,pos:f,attach:!0,gdrive:_,dropbox:y,box:w,onedrive:T,norm:!0,h1:C,h2:S,h3:I,div:!0,md:!0,zoom:$,giphy:D,doc:O}},vh=function(t,e,s){return{project:t,category:e,subcategory:s}},fh=function(t,e){return{date:t,showTime:e}},_h=function(t,e,s,a,i,n,c,o,r,l,d,u){return{assignees:t,groupAssignees:e,followers:s,groupFollowers:a,status:i,priority:n,location:c,dueDate:o,tags:r,position:l,timeEstimate:d,points:u}},yh=function(t){return{multi:t}},wh=function(t){return{allowCreate:t}},Th=function(t,e){return{a:t,t:e}};function Ch(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-slash-command",493,494),m.qc("applyCommand",function(e){return m.Uc(t),m.uc().applySlashCommand(e)})("cancelCommand",function(e){return m.Uc(t),m.uc().hideSlashCommand(null==e?null:e.replace,null==e?null:e.updateSelection)})("onOpen",function(){return m.Uc(t),m.uc().openSlashCommands()})("onPage",function(e){return m.Uc(t),m.uc().checkPaging(e)}),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"membersToUsers"),m.vc(8,"async"),m.vc(9,"async"),m.vc(10,"async"),m.vc(11,"async"),m.vc(12,"async"),m.vc(13,"async"),m.vc(14,"async"),m.vc(15,"async"),m.vc(16,"async"),m.vc(17,"async"),m.vc(18,"async"),m.vc(19,"async"),m.vc(20,"async"),m.vc(21,"async"),m.vc(22,"async"),m.vc(23,"async"),m.vc(24,"async"),m.vc(25,"async"),m.vc(26,"async"),m.vc(27,"async"),m.vc(28,"async"),m.vc(29,"async"),m.vc(30,"async"),m.vc(31,"async"),m.vc(32,"async"),m.vc(33,"async"),m.vc(34,"async"),m.vc(35,"async"),m.vc(36,"async"),m.vc(37,"async"),m.vc(38,"async"),m.vc(39,"async"),m.vc(40,"async"),m.vc(41,"async"),m.vc(42,"async"),m.vc(43,"async"),m.vc(44,"async"),m.vc(45,"async"),m.vc(46,"async"),m.vc(47,"async"),m.vc(48,"async"),m.vc(49,"async"),m.vc(50,"async"),m.vc(51,"async"),m.vc(52,"async"),m.vc(53,"async"),m.vc(54,"async"),m.vc(55,"async"),m.vc(56,"async"),m.vc(57,"async"),m.vc(58,"async"),m.vc(59,"async"),m.bc()}if(2&t){const t=m.uc();let e=null,s=null,a=null,i=null,n=null,c=null,o=null;m.Dc("alwaysVisible",!0)("dropdownPlacement",null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.placement)("task",m.wc(2,20,t.task$))("team",m.wc(3,22,t.sharedData.compatCurrentTeam$))("dateFormatting",null==(e=m.wc(4,24,t.sharedData.currentUser))?null:e.date_format)("militaryTime",null==(s=m.wc(5,26,t.sharedData.currentUser))?null:s.twenty_four_hr_setting)("meUser",m.wc(6,28,t.sharedData.currentUser))("users",m.wc(7,30,m.wc(8,32,t.projectMembers$)))("points",m.wc(9,34,t.availablePoints$))("statuses",m.wc(10,36,t.statuses$))("tags",m.wc(11,38,t.tag$))("priorities",null==(a=m.wc(12,40,t.projectFeatures$))||null==a.priorities?null:a.priorities.priorities)("attachments",null==(i=m.wc(13,42,t.task$))?null:i.attachments)("allowedCommandsExtra",t.formatCommands)("weights",m.wc(14,44,t.weights$))("userGroups",m.wc(15,46,t.userGroups$))("allowTurnIntoCommands",!(null!=t.embedSlashCommandInfo&&t.embedSlashCommandInfo.isComment))("allowedCommands",m.Pc(136,gh,[m.wc(16,48,t.canChangeAssignee$),m.wc(17,50,t.canChangeAssignee$),(null==(n=m.wc(18,52,t.permissions$))?null:n.add_followers)||(null==(n=m.wc(19,54,t.permissions$))?null:n.remove_followers),null==(n=m.wc(20,56,t.featuresAndPermissions$))||null==n.priorities?null:n.priorities.enabled,null==(n=m.wc(21,58,t.featuresAndPermissions$))||null==n.due_dates?null:n.due_dates.enabled,null==(n=m.wc(22,60,t.featuresAndPermissions$))||null==n.due_dates?null:n.due_dates.enabled,null==(n=m.wc(23,62,t.featuresAndPermissions$))||null==n.due_dates?null:n.due_dates.enabled,null==(n=m.wc(24,64,t.featuresAndPermissions$))||null==n.tags?null:n.tags.enabled,null==(n=m.wc(25,66,t.featuresAndPermissions$))||null==n.time_estimates?null:n.time_estimates.enabled,null==(n=m.wc(26,68,t.featuresAndPermissions$))||null==n.points?null:n.points.enabled,(null==(n=m.wc(27,70,t.statuses$))?null:n.length)>2&&m.wc(28,72,t.canChangeStatus$),(null==(n=m.wc(29,74,t.task$))||null==n.status?null:n.status.type)!==t.StatusTypes.Closed&&m.wc(30,76,t.canChangeStatus$),null==(n=m.wc(31,78,t.permissions$))?null:n.move_task,null==(n=m.wc(32,80,t.permissions$))?null:n.add_subtasks,null==(n=m.wc(33,82,t.permissions$))?null:n.add_dependencies,null==(n=m.wc(34,84,t.permissions$))?null:n.add_dependencies,null==(n=m.wc(35,86,t.permissions$))?null:n.add_dependencies,null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment,null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment,(null==(n=m.wc(36,88,t.task$))||null==n.position?null:n.position.total)>1&&!(null!=(n=m.wc(37,90,t.task$))&&null!=n.category&&n.category.archived)&&!(null!=(n=m.wc(38,92,t.task$))&&null!=n.subcategory&&n.subcategory.archived)&&(null==(n=m.wc(39,94,t.permissions$))?null:n.move_task),null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment,null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment,null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment,null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment,!(null!=t.embedSlashCommandInfo&&t.embedSlashCommandInfo.isComment),!(null!=t.embedSlashCommandInfo&&t.embedSlashCommandInfo.isComment),!(null!=t.embedSlashCommandInfo&&t.embedSlashCommandInfo.isComment),(null==t.embedSlashCommandInfo?null:t.embedSlashCommandInfo.isComment)&&(null==(n=m.wc(40,96,t.sharedData.compatCurrentTeam$))?null:n.zoom)&&t.zoomService.allowed,null==(n=m.wc(41,98,t.sharedData.compatCurrentTeam$))?null:n.giphy,m.wc(42,100,t.canCreateDoc$)]))("currentValues",m.Pc(174,_h,[null==(c=m.wc(43,102,t.task$))?null:c.assignees,null==(c=m.wc(44,104,t.task$))?null:c.group_assignees,null==(c=m.wc(45,106,t.task$))?null:c.followers,null==(c=m.wc(46,108,t.task$))?null:c.group_followers,null==(c=m.wc(47,110,t.task$))?null:c.status,null==(c=m.wc(48,112,t.task$))?null:c.priority,m.Jc(167,vh,m.wc(49,114,t.project$),null==(c=m.wc(50,116,t.task$))?null:c.category,null==(c=m.wc(51,118,t.task$))?null:c.subcategory),m.Ic(171,fh,null==(c=m.wc(52,120,t.task$))?null:c.due_date,null==(c=m.wc(53,122,t.task$))?null:c.due_date_time),null==(c=m.wc(54,124,t.task$))?null:c.tags,null==(c=m.wc(55,126,t.task$))?null:c.position,null==(c=m.wc(56,128,t.task$))?null:c.time_estimate_string,null==(c=m.wc(57,130,t.task$))?null:c.points]))("options",m.Ic(191,Th,m.Hc(187,yh,null==(o=m.wc(58,132,t.project$))?null:o.multiple_assignees),m.Hc(189,wh,null==(o=m.wc(59,134,t.task$))||null==o.permissions?null:o.permissions.manage_tags)))}}function Sh(t,e){if(1&t){const t=m.dc();m.cc(0,"cu-share-view-modal",495),m.qc("setIsPublic",function(e){return m.Uc(t),m.uc().updateTaskSharing({public:e.public,public_share_expires_on:e.expiresOn})})("setIsSeoOptimised",function(e){return m.Uc(t),m.uc().updateTaskSharing({seo_optimized:e})})("setPublicTaskFields",function(e){return m.Uc(t),m.uc().updateTaskSharing({public_fields:e})})("setSharingExpiresOn",function(e){return m.Uc(t),m.uc().updateTaskSharing({public_share_expires_on:e,public:!0})})("setDefaultPublicTaskFields",function(e){return m.Uc(t),m.uc().setDefaultPublicTaskFields(e)})("upgradeClicked",function(){return m.Uc(t),m.uc().closeSharingModal()}),m.vc(1,"async"),m.vc(2,"async"),m.vc(3,"async"),m.vc(4,"async"),m.vc(5,"async"),m.vc(6,"async"),m.vc(7,"async"),m.vc(8,"async"),m.bc()}if(2&t){const t=m.uc();m.Dc("isPublic",null==m.wc(1,9,t.taskWithPendingChanges$).sharing?null:m.wc(1,9,t.taskWithPendingChanges$).sharing.public)("isSeoOptimised",null==m.wc(2,11,t.taskWithPendingChanges$).sharing?null:m.wc(2,11,t.taskWithPendingChanges$).sharing.seo_optimized)("sharingLink",m.wc(3,13,t.taskSharingUrl$))("publicToken",null==m.wc(4,15,t.taskWithPendingChanges$).sharing?null:m.wc(4,15,t.taskWithPendingChanges$).sharing.token)("task",m.wc(5,17,t.taskWithPendingChanges$))("team",m.wc(6,19,t.team$))("defaultPublicTaskFields",t.defaultPublicTaskFields)("publicTaskFields",null==m.wc(7,21,t.taskWithPendingChanges$).sharing?null:m.wc(7,21,t.taskWithPendingChanges$).sharing.public_fields)("sharingExpiresOn",null==m.wc(8,23,t.taskWithPendingChanges$).sharing?null:m.wc(8,23,t.taskWithPendingChanges$).sharing.public_share_expires_on)}}function Ih(t,e){if(1&t){const t=m.dc();m.cc(0,"div",496),m.Xb(1,"div",497),m.cc(2,"div",498),m.gc(3,499),m.bc(),m.cc(4,"div",500),m.mc(5,501),m.Xb(6,"div",502),m.jc(),m.bc(),m.cc(7,"div",503),m.cc(8,"button",504),m.qc("click",function(){return m.Uc(t),m.uc().closeModal()}),m.gc(9,505),m.bc(),m.cc(10,"button",506),m.qc("click",function(){return m.Uc(t),m.uc().confirmConvertTaskToList()}),m.gc(11,507),m.bc(),m.bc(),m.bc()}}const $h=function(t,e){return{"task-container-show-task-tray":t,"task-container__full-editor":e}},Dh=function(){return{m:!0}},Oh=function(t,e){return{"task_mobile-tab-details":t,"task_mobile-tab-activity":e}},jh=function(t,e,s,a){return{"task-name-container_subtask":t,"task-name_focused":e,"task-name-container_hover":s,"task-name-container_custom-type":a}},Lh=function(t,e,s,a,i,n,c,o,r,l,d,u,h,m,b,k,p,g){return{a:t,me:e,w:s,p:a,d:i,inbox:n,sd:c,t:o,est:r,pts:l,s:d,close:u,m:h,"-":m,o:b,b:k,lt:p,pos:g}},Uh=function(t){return{"task-backdrop-show-task-tray":t}},Mh=v.Ib;var Ah=function(t){return t[t.Details=0]="Details",t[t.Activity=1]="Activity",t}({}),Eh=function(t){return t[t.Copied=1]="Copied",t[t.Custom=2]="Custom",t[t.Main=2]="Main",t}({});let Fh=(()=>{class t{constructor(t,e,s,a,i,n,c,o,r,l,d,u,h,m,b,k,p,g,v,f,_,y,w,T,S,I,D,O,j,L,U,A,x,R,B,G,V,W,Q,K,J,Y,et,st,it,nt,ot,rt,dt,ht,mt){this.dataService=t,this.userService=e,this.websocketService=s,this.sharedData=a,this.modalService=i,this.router=n,this.location=c,this.commentsService=o,this.helpers=r,this.taskService=l,this.titleService=d,this.navService=u,this.viewTaskService=h,this.sharedTaskService=m,this.uploaderService=b,this.resolver=k,this.conflictService=p,this.window=g,this.renderer=v,this.zone=f,this.store=_,this.changeDetector=y,this.minimizeTasksService=w,this.attachmentsViewerService=T,this.selectedTasks=S,this.domService=I,this.boardService=D,this.slashCommandOnboardingService=O,this.taskMentionService=j,this.injector=L,this.localStorage=U,this.googleDriveService=A,this.dropboxService=x,this.oneDriveService=R,this.boxService=B,this.httpSession=G,this.route=V,this.codoxService=W,this.sharedDocService=Q,this.zoomService=K,this.actions$=J,this.timeTrackerService=Y,this.timeEstimatesService=et,this.inboxService=st,this.timezonesService=it,this.effects=nt,this.commonStringsService=ot,this.viewTaskStringsService=rt,this.github=dt,this.gitlab=ht,this.bitbucket=mt,this.TaskMobileTab=Ah,this.DataViewParentType=F.e,this.UserWeightType=Bt.c,this.showBranding=!1,this.sumbittingClass="cu-comment-submitting",this.canDelete$=this.store.pipe(Object(tt.select)(Ft.getUserEnterprisePermissions),Object(ye.a)(t=>!t||t.delete_items===P.b.ON)),this.onlyDeleteIfOwner$=this.store.pipe(Object(tt.select)(Ft.getUserEnterprisePermissions),Object(ye.a)(t=>t&&t.delete_items===P.b.CREATE)),this.task$=this.store.pipe(Object(tt.select)(Qt.m)),this.subtasksOpenMap$=this.store.pipe(Object(tt.select)(Qt.l)),this.showCopyCustomId$=this.task$.pipe(Object(we.a)(t=>!!t),Object(ye.a)(t=>t.project_prefix&&t.custom_task_ids_display&&t.custom_id)),this.rollups$=this.store.select(Ft.getTimeRollups),this.timeEstimatesDataMap$=this.store.pipe(Object(tt.select)(vt.a),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.timeEstimateData$=Object(ue.a)([this.task$,this.timeEstimatesDataMap$]).pipe(Object(we.a)(([t,e])=>!!t),Object(ye.a)(([t,e])=>e[t.id]),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.timeEntryTaskData$=this.store.pipe(Object(tt.select)(M.i),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.taskTimeEntries$=Object(ue.a)([this.task$,this.timeEntryTaskData$]).pipe(Object(we.a)(([t,e])=>!!t),Object(ye.a)(([t,e])=>e&&e.taskTimeEntryGroupMap&&e.taskTimeEntryGroupMap[t.id]&&e.timeEntriesMap?e.taskTimeEntryGroupMap[t.id].map(t=>{const s=(t.intervalIds||[]).map(t=>e.timeEntriesMap[t]).filter(t=>!!t),a=s.reduce((t,e)=>t+ +e.duration,0);return Object.assign(Object.assign({},t),{intervals:s,time:a})}):null),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.currentEntryMap$=this.store.pipe(Object(tt.select)(M.b),Object(Ce.a)({refCount:!0,bufferSize:1}),Object(Te.a)(ie.a)),this.unsavedEntryMap$=this.store.pipe(Object(tt.select)(M.k),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.currentEntry$=Object(ue.a)([this.task$,this.currentEntryMap$]).pipe(Object(we.a)(([t,e])=>!!t),Object(ye.a)(([t,e])=>e?e[t.id]:null),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.unsavedEntry$=Object(ue.a)([this.task$,this.unsavedEntryMap$]).pipe(Object(we.a)(([t,e])=>!!t),Object(ye.a)(([t,e])=>e&&e[t.id]||{}),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.mainEntry$=Object(ue.a)([this.currentEntry$,this.unsavedEntry$]).pipe(Object(ye.a)(([t,e])=>t||e),Object(Te.a)(ie.a),Object(Ce.a)({refCount:!0,bufferSize:1})),this.pendingSubtasks$=this.store.pipe(Object(tt.select)(Qt.h)),this.subcategory$=this.task$.pipe(Object(we.a)(t=>!!t&&!!t.id),Object(ye.a)(t=>Object.assign(Object.assign({},t.subcategory),{project_id:t.project?t.project.id:t.project_id,category:t.category.id}))),this.currentSubcategory$=this.store.select(Ft.getSubcategory),this.suggestedEmails$=this.task$.pipe(Object(we.a)(t=>!!t),Object(ye.a)(t=>{const e=(t.customFields||[]).filter(t=>t.type===Pt.a.Email&&t.value).map(t=>{var e,s;return{id:t.value,email:null===(e=t.value)||void 0===e?void 0:e.toLowerCase(),initials:null===(s=t.value)||void 0===s?void 0:s.charAt(0)}});return Object(ne.a)(e,"email")})),this.attachments$=this.store.pipe(Object(tt.select)(Qt.n),Object(Ce.a)({refCount:!0,bufferSize:1})),this.weights$=this.store.select(Ft.getUserWeights),this.members$=this.store.pipe(Object(tt.select)(Ft.getMembers),Object(ye.a)(t=>t.map(t=>t.user))),this.user$=this.store.select(Ft.getUser),this.userGroups$=this.store.select(_t.c),this.team$=this.store.select(Ft.getTeam),this.taskUrl$=this.task$.pipe(Object(we.a)(t=>!!t),Object(ye.a)($t.c)),this.emailUrl$=this.task$.pipe(Object(we.a)(t=>!!t),Object(ye.a)(t=>`"ClickUp: ${t.name}"<${t.inbound_address}>`)),this.taskWithPendingChanges$=this.store.pipe(Object(tt.select)(Qt.L)),this.taskSharingUrl$=this.store.pipe(Object(tt.select)(Qt.A)),this.hideTaskHistory$=this.task$.pipe(Object(we.a)(t=>!!t),Object(ye.a)(t=>!!St.k&&!((t.parent&&!t.sharing.public?t.parent_sharing.public_fields:t.sharing.public_fields)||[]).includes("comments"))),this.authedStateStore$=this.store.select(Ft.getAuthedState),this.authedState$=Object(ue.a)([this.authedStateStore$,this.user$]).pipe(Object(we.a)(([t,e])=>!!t),Object(ye.a)(([t,e])=>Object.assign(Object.assign({},t),{preferredEmail:null==e?void 0:e.email}))),this.authedEmails$=this.authedState$.pipe(Object(ye.a)(t=>t&&t.authedEmails||[])),this.publicSharingViewId$=this.store.select(Qt.k),this.projectMembers$=this.store.pipe(Object(tt.select)(Qt.w)),this.users$=this.store.pipe(Object(tt.select)(Qt.H),Object(Ce.a)({refCount:!0,bufferSize:1})),this.favorite$=Object(ue.a)([this.task$,this.store.select(lt.j)]).pipe(Object(ye.a)(([t,e])=>t&&e.find(e=>e.task_id===t.id))),this.disconnected$=this.store.pipe(Object(tt.select)(xt.b)),this.timeFormat$=this.store.pipe(Object(tt.select)(Qt.G)),this.taskUpdatedDateFormat$=this.store.pipe(Object(tt.select)(Qt.r("date_updated"))),this.taskCreatedDateFormat$=this.store.pipe(Object(tt.select)(Qt.r("date_created"))),this.teamId$=this.store.pipe(Object(tt.select)(Qt.F)),this.canCreateDoc$=this.store.select(Ft.getCanCreateDoc),this.getTaskNextPrev$=this.store.pipe(Object(tt.select)(qt.f)),this.nextTask$=this.getTaskNextPrev$.pipe(Object(ye.a)(t=>t.nextTask)),this.prevTask$=this.getTaskNextPrev$.pipe(Object(ye.a)(t=>t.prevTask)),this.canManageEmail$=this.store.select(Ft.getCanManageEmail),this.canSendEmails$=Object(ue.a)([this.authedEmails$,this.canManageEmail$]).pipe(Object(ye.a)(([t,e])=>e)),this.links$=this.store.pipe(Object(tt.select)(Qt.v),Object(Te.a)(ie.a),Object(ye.a)(t=>t.filter(t=>"doc_links"!==t.id)),Object(Ce.a)({refCount:!0,bufferSize:1})),this.taskBlockers$=this.store.select(at),this.tasksBlocked$=this.store.select(ct),this.docLinks$=this.store.pipe(Object(tt.select)(Qt.s),Object(Te.a)(ie.a),Object(Se.a)(this.users$,this.teamId$),Object(Ie.a)(([t,e,s])=>{if(t.length){const a=(t=t.map(t=>Object.assign(Object.assign({},t),{doc_linked:{pageId:t.parent,viewId:t.view_id,teamId:t.team_id,canOpen:!1},user:t.user||(e?e.find(e=>String(e.id)===String(t.userid)):null)}))).map(t=>t.parent);return Object(he.a)(Object(me.a)(t),this.dataService.getDocsByIds(a,!0).pipe(Object(ye.a)(e=>t.map(t=>{const a=e.find(e=>e.id===(t.doc_linked&&t.doc_linked.pageId));return Object.assign(Object.assign({},t),{anchor_text:a&&a.name||t.anchor_text,doc_linked:Object.assign(Object.assign({},t.doc_linked),{canOpen:String(s)===String(t.team_id)})})}))))}return Object(me.a)([])}),Object(Ce.a)({refCount:!0,bufferSize:1})),this.isFreePlan$=this.store.select(Ft.getTeam).pipe(Object(ye.a)(t=>t.plan_id===N.f.FREE)),this.showSharing$=this.store.select(Ft.getAllowPublicSharing),this.displayUnviewed$=this.store.select(Qt.b),this.commentUpdateSuccess$=new be.a,this.visibleView$=new ke.a(!0),this.destroy$=new be.a,this.debounceSave=new be.a,this.availablePoints$=this.store.select($.b),this.linkToBlockId$=new ke.a(""),this.timeEntry$=new ke.a(null),this.StatusTypes=Ut.g,this.destroyed=!1,this.isTaskEditing=!1,this.showAttachmentsBadge=!1,this.showRelationshipsBadge=!1,this.harvestInit=!1,this.editorFullScreen=!1,this.templateListLoading=!1,this.base="https://staging.clickup.com",this.selectTaskType=null,this.selectTaskData=null,this.isSaved=!1,this.isError=!1,this.isCollapsed=!0,this.commentsUploaderUrl=[ee.a.attachmentUrl,"attachment"].join("/"),this.datePickerClosed=!0,this.openedFromStart=!1,this.removedSubtasks=[],this.debounceEditing=new be.a,this.commentSubmitting=!1,this.previousCommentSubmitted=null,this.commentPermission=H.e.COMMENT,this.editPermission=H.e.EDIT,this.createPermission=H.e.CREATE,this.taskInputFocused=!1,this.trackById=Object(Dt.d)("id"),this.drafterOpen=!1,this.mobileTab=Ah.Details,this.teamTaskTray$=this.store.select(Vt.d),this.viewLoaded=!1,this.taskNameComposing=!1,this.isSharingApp=St.k,this.defaultPublicTaskFields=this.localStorage.get("default-task-sharing-fields"),this.lastViewedMap={},this.PublicBrandingType=z,this.otherListsImIn=[],this.statusSearchString="",this.filteredStatuses=[],this.searchingStatuses=!1,this.debounceStatusSearch$=new be.a,this.multipleListsVisible=[],this.multipleListsTruncated=[],this.availableHeaderSpace=400,this.customTaskIdClickSteps=[Eh.Custom,Eh.Copied,Eh.Main,Eh.Copied],this.currentCustomTaskIdClickIndex=0,this.headerColumnRightContainerMoved=!1,this.headerColumnRightContainerMovable=!1,this.formatCommands=Mh,this.showPrint=Object(jt.a)(),this.forceLog=!1,this.momentDatePipe=new X.a(this.timezonesService),this.prevTaskTooltip$=this.prevTask$.pipe(Object(ye.a)(t=>t?$localize`:@@cu-manager-view-task__tooltip-msg_prev-task:${t.name}:taskName:\n(ctrl + shift + left arrow)`:""),Object(Te.a)()),this.nextTaskTooltip$=this.nextTask$.pipe(Object(ye.a)(t=>t?$localize`:@@cu-manager-view-task__tooltip-msg_next-task:${t.name}:taskName:\n(ctrl + shift + right arrow)`:""),Object(Te.a)()),this.taskCreatedTooltipMsg$=this.store.pipe(Object(tt.select)(qt.e),Object(ye.a)(({task:t,dateFormat:e,timeFormat:s})=>{let a="ClickBot";if(!t)return"";t.creator&&t.creator.username&&(a=(new q).transform(t.creator.username));const i=this.momentDatePipe.transform(t.date_created,e),n=this.momentDatePipe.transform(t.date_created,s),c=this.momentDatePipe.transform(t.date_updated,e),o=this.momentDatePipe.transform(t.date_updated,s);return $localize`:@@cu-manager-view-task__tooltip-msg_created-and-updated-text:Created by ${a}:username: on ${i}:dateCreated: ${n}:timeCreated: <br>Updated on ${c}:dateUpdated: ${o}:timeUpdated:`}),Object(Te.a)()),this.tasksDescriptionHistoryList$=this.store.pipe(Object(tt.select)(te)),this.tagsLoadingMap$=this.store.select(pt.c),this.taskUserGroups=C.c,this.getTasksLinked$=Object(ue.a)([this.store.select(Z.d),this.task$]).pipe(Object(ye.a)(([t,e])=>t&&e?(t[e.id]?t[e.id].links:[]).map(t=>t.task).filter(t=>!!t):[])),this.CommentType=E.c,this.CommentMode=E.b,this.isStaging=Object(jt.f)(),this.showAddToAnotherList=!1,this.isInUserLineup$=Object(ue.a)([this.store.select(ut.a),this.team$,this.user$,this.task$]).pipe(Object(ye.a)(([t,e,s,a])=>!(!t[e.id+"-"+s.id]||!t[e.id+"-"+s.id].taskIds.includes(a.id)))),this.defaultThreadFollowers$=this.user$.pipe(Object(we.a)(t=>!!t),Object(ye.a)(t=>[t]),Object($e.a)()),this.canManageGit$=this.store.select(Ft.canManageGit),this.resizeDividerPercent=new ke.a(55),a.currentUser.pipe(Object(we.a)(t=>!(!t||!t.id)),Object(De.a)(this.destroy$)).subscribe(t=>{_.dispatch(new Wt.zc({user:t}))})}get resizeDividerPercent$(){return this.resizeDividerPercent?this.resizeDividerPercent.pipe(Object(Te.a)()):Object(me.a)(55)}ngOnInit(){performance.mark("init");const t=this.route.snapshot.queryParamMap.get("block");t&&this.linkToBlockId$.next(t)}createSubscriptions(){this.window.origin.includes("app.clickup")&&(this.base="https://app.clickup.com"),this.store.dispatch(new K.h),this.visibleView$.pipe(Object(Ie.a)(t=>t?Object(pe.a)(1e4):ge.a),Object(Se.a)(this.task$),Object(we.a)(([t,e])=>!!e),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{this.websocketService.sendTaskViewingMessage(e.id,!0)}),this.project$=this.store.pipe(Object(tt.select)(Qt.C)),this.projectFeatures$=this.store.pipe(Object(tt.select)(Qt.u)),this.allowEmailFeature$=Object(ue.a)([this.canSendEmails$,this.projectFeatures$]).pipe(Object(ye.a)(([t,e])=>{var s;return!(!t||!(null===(s=null==e?void 0:e.emails)||void 0===s?void 0:s.enabled))})),this.featuresAndPermissions$=this.store.pipe(Object(tt.select)(Qt.a)),this.statuses$=this.store.pipe(Object(tt.select)(Qt.D)),this.tag$=this.store.pipe(Object(tt.select)(Qt.E)),this.nextStatus$=this.store.pipe(Object(tt.select)(Qt.e)),this.copyTaskId$=this.store.pipe(Object(tt.select)(Qt.q)),this.attachmentsUploaderUrl$=this.store.pipe(Object(tt.select)(Qt.o)),this.viewingOnly$=this.store.pipe(Object(tt.select)(Qt.K)),this.commenting$=this.store.pipe(Object(tt.select)(Qt.p)),this.isSimpleStatuses$=this.store.pipe(Object(tt.select)(Qt.N)),this.closedStatus$=this.statuses$.pipe(Object(we.a)(t=>!(!t||!t.length)),Object(ye.a)(t=>t.find(t=>t.type===Ut.g.Closed))),this.openStatus$=this.statuses$.pipe(Object(we.a)(t=>!(!t||!t.length)),Object(ye.a)(t=>t.find(t=>t.type===Ut.g.Open))),this.isGuest$=this.store.select(Ft.isGuestTeam),this.permissions$=this.store.pipe(Object(tt.select)(Qt.z)),this.closedStatusTooltipMsg$=this.closedStatus$.pipe(Object(ye.a)(t=>$localize`:@@cu-manager-view-task__tooltip-msg_set-to-closed-status:Set to ${t.status}:statusName:`),Object(Te.a)()),Object(ue.a)([this.store.select(Qt.t),this.store.select(pt.d),this.currentSubcategory$]).pipe(Object(De.a)(this.destroy$)).subscribe(([{task:t,space:e,projects:s,features:a,statuses:i,members:n},c,o])=>{var r,l,d,u;t&&t.id&&(this.task&&this.task.other_subcategories.length===t.other_subcategories.length&&(null===(l=null===(r=this.task)||void 0===r?void 0:r.parent_task)||void 0===l?void 0:l.other_subcategories.length)===(null===(d=null==t?void 0:t.parent_task)||void 0===d?void 0:d.other_subcategories.length)||(this.otherListsImIn=((null===(u=null==t?void 0:t.parent_task)||void 0===u?void 0:u.other_subcategories)||t.other_subcategories||[]).map(t=>t.id),this.determineMultipleLists(t,o))),this.space=e,this.projects=s,this.task=t,this.features=a,this.statuses=i,this.tags=e&&c[e.id]||[],this.store.dispatch(new Wt.O({tags:this.tags})),this.members=n,this.viewTaskService.project=e,this.viewTaskService.task=t,this.viewTaskService.projectFeatures=a,this.viewTaskService.statuses=i,this.viewTaskService.tags=this.tags,this.viewTaskService.categories=s}),this.teamId$.pipe(Object(we.a)(t=>!!t),Object(Se.a)(this.task$),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{const s=this.sharedTaskService.backLink[this.sharedTaskService.backLink.length-1]||{},a=a=>{let i=!1;for(void 0===a&&(a={timeRemaining:()=>Number.MAX_VALUE});(a.timeRemaining()>0||a.didTimeout)&&!i;)this.loadDashboardInBackground(t,e,s),i=!0};if(s.url)this.sharedTaskService.commentId&&setTimeout(()=>{this.viewTaskService.onHighlightComment.emit({comment:{id:this.sharedTaskService.commentId},time:5e3}),this.sharedTaskService.commentId=void 0});else{const e=["/",t,"taskHolder"],s=this.route.snapshot.queryParamMap.get("comment");s&&this.viewTaskService.onHighlightComment.emit({comment:{id:s},time:5e3}),St.k||(this.router.navigate(e,{skipLocationChange:!0}).then(()=>this.setTaskTitle(this.task)),this.idleCancel=window.requestIdleCallback(a,{timeout:1e4}))}this.setTaskTitle(this.task)}),this.canChangeAssignee$=Object(ue.a)([this.task$,this.disconnected$,this.store.select(Ft.getUser)]).pipe(Object(we.a)(([t])=>!!t&&!!t.permissions),Object(ye.a)(([t,e,s])=>!e&&Object(wt.b)(t.permissions,t.permission_level,t.assignees,t.group_assignees,s)),Object(De.a)(this.destroy$)),this.timeTrackingDisabled$=Object(ue.a)([this.permissions$,this.disconnected$]).pipe(Object(ye.a)(([t,e])=>!(t&&t.track_time&&!e))),this.canChangeStatus$=Object(ue.a)([this.task$,this.disconnected$,this.store.select(Ft.getUser)]).pipe(Object(we.a)(([t])=>!!t&&!!t.permissions),Object(ye.a)(([t,e,s])=>!e&&(t.permission_level!==H.e.COMMENT?t.permissions.change_status:t.assignees.some(t=>t.id===s.id)||t.group_assignees.some(t=>t.members.some(t=>t.id===s.id)))),Object(De.a)(this.destroy$)),this.task$.pipe(Object(we.a)(t=>!!t),Object(Oe.a)("id"),Object(Se.a)(this.team$),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{this.slashCommandOnboardingService.hidePopover(),St.k||e.task_relationships||this.store.dispatch(new Q.z({taskId:t.id}))}),this.router.events.pipe(Object(we.a)(t=>t instanceof b.c),Object(De.a)(this.destroy$)).subscribe(()=>{this.slashCommandOnboardingService.hidePopover(),setTimeout(()=>this.setTaskTitle(this.task),50)}),this.attachmentsViewerService.onRemove.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.removeAttachmentFromTaskHistory(t)}),this.attachmentsViewerService.onSetCoverImage.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.setCoverImage(t)}),this.navService.onCancelMoveSection.pipe(Object(Se.a)(this.task$),Object(De.a)(this.destroy$)).subscribe(([t,e])=>{this.viewTaskService.loadTask(e.id)}),this.store.pipe(Object(tt.select)(ft.n),Object(we.a)(t=>t),Object(De.a)(this.destroy$)).subscribe(()=>this.store.dispatch(new Wt.tc({index:-1}))),this.navService.onChange.pipe(Object(we.a)(t=>t&&("updateCategory"===t.type||"updateSection"===t.type)),Object(De.a)(this.destroy$)).subscribe(t=>{let e,s;"updateCategory"===t.type?e=t.payload:(s=t.payload,e=t.category),this.store.dispatch(new Wt.Z({project:e,subcategory:s,changeMap:t.changeMap,space:this.sharedData.compatCurrentProject}))}),this.trayTasks=this.store.select(Vt.e),this.trayTasks.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.teamTrayTasks=t,this.changeDetector.markForCheck()}),this.effects.register(Object(ue.a)([this.task$,this.allowEmailFeature$,this.permissions$,this.disconnected$.pipe(Object(je.a)(t=>{t&&(this.lastCommentDraftTaskId=null)})),this.displayUnviewed$.pipe(Object(we.a)(t=>!t))]).pipe(Object(we.a)(([t])=>!!t&&!!this.commentBar),Object(ye.a)(([t,e])=>({task:t,allowEmail:e})),Object(Le.a)(10),Object(Ue.a)(1)),({task:t,allowEmail:e})=>{if(this.minimizeTasksService.activeTaskId=t?t.id:null,t){this.minimizeTasksService.checkTimeContentList();const s=this.minimizeTasksService.getContent(t.id);this.commentBar&&(s.content&&t.id!==this.lastCommentDraftTaskId&&this.commentBar.setContent(s.content),s.commentAssignee&&(this.commentBar.commentAssignee=s.commentAssignee),e?s.content&&s.content.commentMode===E.b.Email&&(this.commentBar.commentMode=E.b.Email,this.commentBar.emailSubject||(this.commentBar.emailSubject=s.content.emailData.emailSubject),this.commentBar.emailUsers=s.content.emailData.emailUsers):this.commentBar.commentMode=E.b.Comment,this.lastCommentDraftTaskId=t.id)}}),this.store.pipe(Object(tt.select)(Ft.getSharingModal),Object(we.a)(t=>!t),Object(Me.a)(1),Object(De.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(new Wt.R({taskId:this.task.id}))}),this.debounceSave.pipe(Object(Le.a)(300),Object(De.a)(this.destroy$)).subscribe(t=>{this.saveTask(t)}),this.debounceSave.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.notSavedData=t}),this.editAttachmentHandler=this.renderer.listen("document",j.c,t=>{const e=t.detail;e.id&&e.title&&this.dataService.editAttachment(e).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{e.url=t.url,Object(Ot.a)(t)})}),this.initSlashCommandHandler=this.renderer.listen("document",O.a,t=>{if(this.slashCommand)return;if(t.detail.sessionId!==this.httpSession.getSessionId())return;this.hideSlashCommand(),this.addSubtaskMentionTo=null;const e=t.detail.id||"",s=`.cu-comment-editor-content[sc-id=${e}]`,a="comment"===e?this.commentBar?this.commentBar.editor:null:"content"===e?this.editor?this.editor.editor:null:e.startsWith("comment_edit_")&&document.querySelector(s)?D.b.find(document.querySelector(s)):null;a&&(this.formatCommands="comment"===e&&this.commentBar&&this.commentBar.commentMode===E.b.Email?this.removeInvalidEmailItems():Mh,this.embedSlashCommandInfo=Object(f.c)(a),this.embedSlashCommandInfo.container=t.detail.node.children[0],this.embedSlashCommandInfo.id=e,this.embedSlashCommandInfo.placement="comment"===t.detail.id?"top":"right",this.embedSlashCommandInfo.isComment="comment"===t.detail.id||t.detail.id.startsWith("comment_edit_"),this.embedSlashCommandInfo.isCommentEdit=t.detail.id.startsWith("comment_edit_"),this.embedSlashCommandInfo.view=this.domService.appendTemplateToElement(this.slashCommandTemplate,this.embedSlashCommandInfo.container,this.slashCommandContainer),this.changeDetector.detectChanges(),this.slashCommand?this.slashCommand.activate(t.detail.replace,"","",t.detail.defaultCommand):setTimeout(()=>{this.slashCommand&&this.slashCommand.activate(t.detail.replace,"","",t.detail.defaultCommand)}))}),this.previewAttachmentHandler=this.renderer.listen("document",j.b,t=>{const e=this.task.attachments.find(e=>e.id===t.detail.id)||t.detail;this.previewAttchment(e),t.detail.original.preventDefault(),t.detail.original.stopPropagation()}),this.sharedData.undoSubject.pipe(Object(we.a)(t=>-1!==["taskPosition","attachmentUndo","itemUndo"].indexOf(t.type)),Object(De.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new Wt.Zc),this.store.dispatch(new Wt.tc({index:-1}))}),this.websocketService.onChange.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{if(t&&t.type&&(t.payload||t.taskId)&&this.task)switch(t.type){case"subtaskRemoved":const e=!!this.editor;let s,a={id:t.payload.subtask_id,hasEditor:e};e&&(s=JSON.stringify(this.editor.editor.getContents())),s&&(a=Object.assign(Object.assign({},a),{content:s})),this.store.dispatch(new Wt.Ib(a));break;case"taskMemberAdded":case"taskMemberRemoved":this.task.id===t.taskId&&this.store.dispatch(new Wt.R({taskId:this.task.id}));break;case"tasksArchived":this.store.dispatch(new Wt.p({taskIds:t.payload.task_ids}));break;case"dependencyRemoved":this.removeDependency(t.payload);break;case"taskCopyComplete":t.payload.template||t.payload.is_template||this.sharedTaskService.openTaskModal({id:t.payload.id,customId:t.payload.custom_id,teamId:t.payload.team});break;case"minimize-taskUpdate":if(t.payload.parent&&t.payload.parent===this.task.id){const e=Object(Lt.a)(t.payload.hist_item,(this.task.subtasks||[]).find(e=>e.id===t.payload.id));e&&this.updateSubtask(e)}break;case"taskUpdate":Object(Lt.c)(t.payload.hist_item).forEach(e=>{if(t.payload.id===this.task.id){"recur"!==e.field&&this.addHistoryItem(e,!t.payload.user||t.payload.user.id!==this.sharedData.currentUser.value.id),"depends_on"!==e.field&&"dependency_of"!==e.field||(this.addDependency(t.payload.hist_item),this.reloadTaskRelationships()),e&&["gh_commit","bb_commit","gl_commit"].includes(e.field)&&(this.store.dispatch(new Wt.l({taskId:t.payload.id,histItem:e})),this.store.dispatch(new Wt.y({taskId:t.payload.id,change:1,integration:{gh_commit:"github",bb_commit:"bitbucket",gl_commit:"gitlab"}[e.field]}))),"zoom_meeting"===e.field&&this.store.dispatch(new Wt.l({taskId:t.payload.id,histItem:e}));const s=Object(Lt.a)(e,this.task);s&&this.updateTaskView(s,"ws taskUpdate"),"time_estimate"===e.field&&this.viewTaskService.loadTask(t.payload.id)}else if(t.payload.parent===this.task.id){const s=Object(Lt.a)(e,(this.task.subtasks||[]).find(e=>e.id===t.payload.id));s&&this.updateSubtask(s),"time_estimate"===e.field&&this.viewTaskService.loadTask(t.payload.parent)}});break;case"taskCreated":t.payload.task.parent===this.task.id&&this.updateSubtask(t.payload.task);break;case"taskDeleted":t.payload.id&&(t.payload.parent===this.task.id?this.deleteSubtask(t.payload.id):t.payload.id===this.task.id&&(this.wsUser=t.payload.user,this._showTaskDeletedModal()));break;case"taskMerged":t.payload.task&&t.payload.merged_into&&(t.payload.task.parent===this.task.id?this.deleteSubtask(t.payload.task.id):t.payload.task.id===this.task.id?(this.wsUser=t.payload.user,this.wsMergedInto=t.payload.merged_into,this._showTaskMergedModal()):t.payload.merged_into.id===this.task.id?this.applyChanges(t.payload.merged_into,null,null,null,t.payload.force_sync):t.payload.merged_into.parent===this.task.id&&this.updateSubtask(t.payload.task));break;case"taskMoved":t.payload.task.id===this.task.id?this.applyChanges(t.payload.task,null):t.payload.task.parent===this.task.id?this.updateSubtask(t.payload.task):t.payload.old_parent===this.task.id&&this.deleteSubtask(t.payload.task.id),(this.task.dependencies||[]).length&&t.payload.task.id!==this.task.id&&this.store.dispatch(new K.j(t.payload.task));break;case"commentEdited":t.payload.comment&&t.payload.task_id===this.task.id&&this.viewTaskService.onCommentChange.emit({comment:t.payload.comment});break;case"commentDeleted":t.payload.id&&t.payload.task.id===this.task.id&&this.deleteComment(t.payload.id);break;case"commentDeleteUndo":t.payload.hist_item&&t.payload.task_id===this.task.id&&this.addHistoryItem(t.payload.hist_item);break;case"attachmentDeleted":t.payload.id&&t.payload.task&&t.payload.task.id===this.task.id&&this.deleteAttachment(t.payload.id);break;case"tagAdded":t.payload.tag&&(t.payload.task_id===this.task.id?this.store.dispatch(new Wt.Jc({taskId:t.payload.task_id,forTask:!0,tag:t.payload.tag})):this.task.subtasks&&this.store.dispatch(new Wt.Jc({taskId:t.payload.task_id,forTask:!1,tag:t.payload.tag})));break;case"tagRemoved":t.payload.tag_name&&(t.payload.task_id===this.task.id?this.store.dispatch(new Wt.Kc({taskId:t.payload.task_id,forTask:!0,tagName:t.payload.tag_name})):this.task.subtasks&&this.store.dispatch(new Wt.Kc({taskId:t.payload.task_id,forTask:!1,tagName:t.payload.tag_name})));break;case"viewingSet":t.payload.user&&t.payload.task_id===this.task.id&&this.addViewing(t.payload.user);break;case"viewingUnset":t.payload.user&&t.payload.task_id===this.task.id&&this.removeViewing(t.payload.user);break;case"commentingSet":t.payload.user&&t.payload.task_id===this.task.id&&(t.payload.commenting?this.addCommenting(t.payload.user):this.removeCommenting(t.payload.user));break;case"tasksReordered":this.store.dispatch(new Wt.Pb({orderIndexMap:t.payload.orderindex_map})),this.subtasks.setList();break;case"projectEdited":t.payload.project&&t.payload.project.id===this.task.project.id&&this.store.dispatch(new Wt.gb({project:t.payload.project}));break;case"categoryEdited":t.payload.category&&t.payload.category.id===this.task.category.id&&this.store.dispatch(new Wt.w({category:t.payload.category}));break;case"subcategoryEdited":t.payload.subcategory&&t.payload.subcategory.id===this.task.subcategory.id&&this.store.dispatch(new Wt.Dc({subcategory:t.payload.subcategory}))}}),this.debounceEditing.pipe(Object(Le.a)(1e4),Object(De.a)(this.destroy$)).subscribe(()=>{this.wsUserEditing=null,this.changeDetector.markForCheck()}),this.store.pipe(Object(tt.select)(Qt.B),Object(we.a)(t=>!!t),Object(De.a)(this.destroy$)).subscribe(()=>{this.showSlashCommandsOnboarding(this.statusContainer,v.kb,"bottom","cu-slash-command__tooltip cu-slash-command__tooltip_status"),this.store.dispatch(new Wt.Ac({show:!1}))}),this.taskService.onTaskRemove.pipe(Object(we.a)(()=>!!this.task),Object(we.a)(t=>!!t),Object(De.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new Wt.Eb({tasks:t}))}),this.taskService.onTaskArchive.pipe(Object(we.a)(()=>!!this.task),Object(we.a)(t=>!!t),Object(De.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new Wt.bd({tasks:t}))}),this.taskService.onArchivedSubtasks.pipe(Object(we.a)(()=>!!this.task),Object(De.a)(this.destroy$)).subscribe(t=>{this.openSubtaskConfirmModal(t)}),this.taskService.onTaskMerge.pipe(Object(we.a)(t=>"mergeTasks"===t.type&&this.task&&t.mergeFrom&&t.mergeFrom.parent===this.task.id),Object(De.a)(this.destroy$)).subscribe(t=>{this.deleteSubtask(t.mergeFrom.id)}),this.taskService.onTimeTrackChange.pipe(Object(we.a)(t=>t&&t.task&&this.task&&(this.task.id===t.task.id||this.task.id===t.task.parent||this.task.id===t.task.subtask_parent)),Object(De.a)(this.destroy$)).subscribe(()=>{this.viewTaskService.loadTask(this.task.id)}),this.taskService.onChange.pipe(Object(we.a)(()=>!!this.task),Object(we.a)(t=>!!t&&(t.field!==yt.U.name||t.batchUpdate)),Object(De.a)(this.destroy$)).subscribe(t=>{const e=t.tasks||t;if(Array.isArray(e)){const t=this.task.parent?"subtask_parent":"parent",s=e.filter(e=>this.task.subtasks&&this.task.subtasks.some(t=>t.id===e.id)&&e[t]!==this.task.id);this.store.dispatch(new Wt.Eb({tasks:s}))}switch(t.type){case"unresolved":case"itemUndo":case"undoTag":this.viewTaskService.loadTask(this.task.id);break;case"taskPosition":if(t.category){const t=Object($t.a)(this.task);this.location.replaceState(t)}this.viewTaskService.loadTask(this.task.id);break;case"undoArchive":if(this.task&&-1!==t.archiveUndo.indexOf(this.task.id))this.store.dispatch(new Wt.Yc);else if(this.task&&this.task.subtasks){const e=t.archiveUndo.map(t=>this.task.subtasks.find(e=>e.id===t)).filter(Boolean);this.store.dispatch(new Wt.bd({tasks:e.map(t=>Object.assign(Object.assign({},t),{archived:!1}))}))}}switch(t.field){case"tag":this.viewTaskService.loadTask(this.task.id)}}),this.sharedTaskService.onDependencyUpdate.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.sharedData.compatCurrentTeam.task_relationships||this.updateTaskView(t,"onDependencyUpdate")}),this.conflictService.onChange.pipe(Object(we.a)(t=>t&&"editProject"!==t.type&&t.tasks),Object(De.a)(this.destroy$)).subscribe(t=>{t.extra&&t.extra.taskMention||(this.store.dispatch(new Wt.Qb),this.viewTaskService.loadTask(t.tasks[0]))}),this.taskService.onConflictDetected.pipe(Object(we.a)(t=>t&&t.extra&&t.extra.taskMention),Object(De.a)(this.destroy$)).subscribe(t=>{this.editor&&this.editor.hideHover()}),this.store.pipe(Object(tt.select)(Z.c),Object(ye.a)(t=>t.modalOpen),Object(Ae.a)(),Object(we.a)(([t,e])=>t&&!e),Object(De.a)(this.destroy$)).subscribe(t=>{this.showSlashCommandsOnboarding(this.dependenciesEmptyContainer||this.dependenciesFilledContainer,v.k,"right")}),Object(ve.a)(this.viewTaskService.onCommentAdd,this.viewTaskService.onCommentUpdate,this.viewTaskService.onCommentRemove,this.viewTaskService.onCommentUndo,this.viewTaskService.onCommentChange,this.actions$.pipe(Object(se.d)(W.e.CreateCommentSuccess,W.e.UpdateCommentSuccess,W.e.DeleteCommentSuccess,W.e.UndoDeleteCommentSuccess),Object(we.a)(t=>t.payload.type===E.c.Comment&&this.task.history.some(e=>"comment"===e.field&&String(e.comment.id)===String(t.payload.parent))))).pipe(Object(Le.a)(1e3),Object(De.a)(this.destroy$)).subscribe(()=>{this.store.dispatch(new Wt.zb({taskId:this.task.id}))}),this.task$.pipe(Object(we.a)(t=>!!t),Object(Oe.a)("id"),Object(Ie.a)(t=>Object(ve.a)(this.commentUpdateSuccess$.pipe(Object(we.a)(({changes:t})=>void 0!==t.resolved)),this.store.select(Qt.g).pipe(Object(Oe.a)("length"),Object(Me.a)(1)),this.store.select(Object(V.d)(t.id)).pipe(Object(Se.a)(this.store.select(V.c)),Object(we.a)(([,t])=>t),Object(ye.a)(([t])=>t.reduce((t,e)=>t+e.items.filter(t=>!t.resolved).length,0)),Object(Te.a)(),Object(Me.a)(1)),this.task$.pipe(Object(we.a)(t=>!!t),Object(Ee.a)("status"),Object(Oe.a)("type"),Object(Me.a)(1)))),Object(we.a)(()=>this.task&&this.task.customFields&&this.task.customFields.some(t=>t.type===Pt.a.AutomaticProgress)),Object(Le.a)(1e3),Object(Ie.a)(()=>this.dataService.getTask(this.task.id,["customFields"],!1,!1)),Object(De.a)(this.destroy$)).subscribe(t=>{this.updateTaskView(t,"customFields get")}),this.onResize();const t=localStorage.getItem("task_view_resize_divider");t&&this.resizeDividerPercent.next(+t),this.task$.pipe(Object(De.a)(this.destroy$)).subscribe(t=>setTimeout(()=>this.updateTaskHeaderColumnsWidth(),500)),this.store.pipe(Object(tt.select)(Xt.e),Object(De.a)(this.destroy$)).subscribe(t=>{this.drafterOpen="shown"===t.view}),this.task$.pipe(Object(Ie.a)(t=>{const e=(t&&t.editor_expiration)-(new Date).valueOf();return e>0?Object(fe.a)(e):ge.a}),Object(De.a)(this.destroy$)).subscribe(t=>{this.reloadTask()}),this.debounceStatusSearch$.pipe(Object(Le.a)(100)).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.searchStatuses(t)}),this.actions$.pipe(Object(se.d)(Wt.v),Object(De.a)(this.destroy$)).subscribe(t=>{const e={teamId:this.sharedData.compatCurrentTeam.id,viewId:t.payload.view.id,pageId:t.payload.page.id};t.payload.attachToComment&&this.commentBar&&this.commentBar.addDocToEditor(e),t.payload.attachToContent&&this.editor&&this.editor.addDocToEditor(e),this.sharedDocService.openDoc(this.injector,e.teamId,e.viewId,e.pageId,null,!0)}),this.actions$.pipe(Object(se.d)(Mt.Vg),Object(we.a)(()=>!!this.task),Object(De.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new Wt.id({view:{id:t.view.id,name:t.view.name}}))}),this.taskService.onTaskMoveSuccess.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{t.extra&&t.extra.replaceMultipleLists&&this.removeTasksFromAnotherList(t.extra.removeListData.id,!0,t.extra)}),this.conflictService.onTaskMoveSuccess.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{t&&t.replaceMultipleLists&&this.removeTasksFromAnotherList(t.removeListData.id,!0,t)})}ngAfterViewInit(){this.createSubscriptions(),setTimeout(()=>{this.viewLoaded=!0,this.changeDetector.markForCheck()}),performance.measure("initview","init"),performance.getEntriesByName("initview"),performance.clearMarks("init"),performance.clearMeasures("initview"),this.viewHeight=this.taskView.nativeElement.clientHeight,Object(ue.a)([this.projectFeatures$,this.store.select(Ft.getUser),this.task$,this.store.select(Ft.getTeam),this.project$,this.disconnected$]).pipe(Object(De.a)(this.destroy$)).subscribe(([t,e,s,a,i,n])=>{s&&a&&a.id&&i&&t&&!n&&this.zone.runOutsideAngular(()=>{if(t.time_tracking&&t.time_tracking.enabled&&e&&(e.features||{}).harvest&&!this.harvestInit){this.harvestInit=!0,window._harvestPlatformConfig={applicationName:"ClickUp",skipStyling:!0};const t=s.id,n=s.name.replace(/"/g,'\\"');let c=e.dont_add_harvest_task_ids?n:`${s.custom_id?s.custom_id:"#"+s.id} - ${n}`;c=c.replace(/(\r\n\t|\n|\r\t)/gm,""),this.dataItem=`{"id": "${t}", "name": "${c}"}`,this.dataAccount=`{"id": "${a.id}", "name": "${a.name}"}`,this.dataGroup=`{"id": "${i.id}", "name": "${i.name}"}`,this.dataLink=this.base+this.window.nativeWindow.location.pathname,ae(["https://platform.harvestapp.com/assets/platform.js"],{returnPromise:!0}).then(()=>{const t=new CustomEvent("harvest-event:timers:add",{detail:{element:document.querySelector("#newly-added-timer")}});document.querySelector("#harvest-messaging").dispatchEvent(t)})}})})}ngOnDestroy(){window.cancelIdleCallback(this.idleCancel),this.destroy$.next(),this.destroy$.unsubscribe(),this.destroyed=!0,this.notSavedData&&this.saveTask(this.notSavedData),this.uploaderService.reset(),this.editAttachmentHandler&&(this.editAttachmentHandler(),this.editAttachmentHandler=null),this.previewAttachmentHandler&&(this.previewAttachmentHandler(),this.previewAttachmentHandler=null),this.initSlashCommandHandler&&(this.initSlashCommandHandler(),this.initSlashCommandHandler=null),this.clearSubmittingTimer&&clearTimeout(this.clearSubmittingTimer),document.body.classList.remove(this.sumbittingClass),this.clearNewActivityTimer&&clearTimeout(this.clearNewActivityTimer),this.minimizeTasksService.activeTaskId=null,this.store.dispatch(new Wt.Qb)}minimizeRemoveIconIsHover(){this.viewTaskStringsService.changeMinimizeTooltipText("tray"),this.changeDetector.markForCheck()}minimizeRemoveIconIsNotHover(){this.viewTaskStringsService.changeMinimizeTooltipText("task"),this.changeDetector.markForCheck()}displayTrackedEntry(t){this.timeEntry$.next($localize`:@@cu-manager-view-task__add-time-entry-value:Added ${t}:timeEntryValue:`),setTimeout(()=>{this.timeEntry$.next(null)},2500)}loadDashboardInBackground(t,e,s){let a,i,n,c,o,r=-1;e.subcategory.access?(a=e.subcategory.id,i=F.e.Subcategory,n=this.dataService.getSubcategoryById(a,{includeViews:!0})):e.category.access?(a=e.category.id,i=F.e.Category,n=this.dataService.getCategoryById(a,{include_views:!0})):e.project.access?(a=e.project.id,i=F.e.Project,n=this.dataService.getProjectById(a,{include_views:!0})):(a=t,i=F.e.SharedSpace,c=!0,o=!0,n=this.dataService.getSharedCategories(t,{include_views:!0})),Object(ue.a)([this.store.select(Ft.getTeam),this.dataService.getAllProjectsForTeam(t),this.dataService.getAllProjectsFeatures(t).pipe(Object(ye.a)(t=>t.projects)),this.store.select(Ft.getCategoriesMap),this.store.select(Ft.getSharedData),n,this.store.select(Ft.getUserEnterprisePermissions)]).pipe(Object($e.a)(),Object(De.a)(this.destroy$)).subscribe(([e,n,l,d,u,h,m])=>{const b=Object(It.b)(n,"orderindex");this.store.dispatch(new Mt.Uj(b,"task view bg"));const k=[...n,...l],p=Object(Rt.eb)(h,i,!0);let g;if(i===F.e.Project)this.store.dispatch(new Mt.Sj(h,"determine view")),g=h;else if(i===F.e.SharedSpace)this.store.dispatch(new Mt.ck({teamId:t,data:{taskCount:h.taskCount,taskMembers:h.taskMembers,categories:Object(Rt.q)(h.categories.categories,m),subcategories:Object(Rt.r)(h.subcategories.subcategory_list,m)}}));else if(i===F.e.Category)this.store.dispatch(new Mt.Si(h,!0)),g=k.find(t=>t.id===h.project_id),c=-1===n.findIndex(t=>t.id===h.project_id);else if(i===F.e.Subcategory){if(h.archived||h.deleted){const e=[t,"v","f",h.category,h.project_id];return s.url=e.join("/"),e.unshift("/"),s.title="ClickUp",this.sharedTaskService.backLink=[s],void this.store.dispatch(new ht.d({path:e,extras:{skipLocationChange:!0},replaceRoute:Object($t.a)(this.task)}))}const e=Object(At.l)(n,h.category,d,u);h.catObj=e,this.store.dispatch(new Mt.Gk({subcat:h})),this.store.dispatch(new Mt.nk(h,h.category,h.catObj?h.catObj.project_id:h.project_id,!0)),g=k.find(t=>t.id===h.project_id),c=-1===n.findIndex(t=>t.id===h.project_id)}this.store.dispatch(new Mt.dk(c)),this.store.dispatch(new Mt.fk(o));const v=[...Object(Rt.Z)(i===F.e.SharedSpace?h.views:h,a,i,g,d,e,h.permissions?Object.assign(Object.assign({},h.permissions),{can_unprotect:h.permissions.edit_view}):h.permissions,i===F.e.SharedSpace,o,!1,c),...Object(Rt.Fb)(h,i,o,c)];-1===r&&(r=v.findIndex(t=>t.default)),-1===r&&(r=v.findIndex(t=>t.id===h.last_view)),-1===r&&g&&g.default_preset_view&&(r=v.findIndex(t=>t.type===g.default_preset_view));const f=this.localStorage.get(Rt.g);f&&-1===r&&(r=v.findIndex(t=>t.type===f)),-1===r&&(r=v.findIndex(t=>t.type===F.i.List)),-1===r&&(r=0);const _=v[r];this.store.dispatch(new Mt.Jj(Object(Rt.xb)(v),v[r].id));const y=_.defaultStandardView&&Object(Rt.rb)(_.id)?[t,"v",Object(Rt.U)(_.type),Object(Rt.T)(_.parent.type,o),_.parent.id]:[t,"v",Object(Rt.U)(_.type),_.id];s.url=y.join("/"),y.unshift("/"),s.title="ClickUp",this.sharedTaskService.backLink=[s],this.store.dispatch(new ht.d({path:y,extras:{skipLocationChange:!0},replaceRoute:Object($t.a)(this.task)})),this.store.dispatch(new Mt.Wj({p:p.p,c:p.c,s:p.s,checkRedirect:!0}))})}editStatuses(t){return Xo(this,void 0,void 0,function*(){if(!this.space||!this.space.id)return;t&&(t.preventDefault(),t.stopPropagation()),this.statusDropdown&&this.statusDropdown.close();const e=(yield this.dataService.getAllCategories(this.space.id).pipe(Object(ye.a)(t=>t.categories),Object($e.a)()).toPromise()).find(t=>t.id===this.task.category.id),s=e.subcategories.find(t=>t.id===this.task.subcategory.id),a=this.modalService.openComponent(p.a,this.injector,{name:"forceCreateCategory",preventExternalClick:!0,modifier:"cu-modal__create-new-space"});a.instance.projectId=this.space.id,s&&s.statuses&&(s.override_statuses||e.hidden)?(a.instance.subcategoryToEdit=s,a.instance.parentCategory=e):a.instance.projectToEdit=e,a.instance.onEditProject.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{const{project:e,changeMap:s}=t;this.modalService.close(),this.navService.updateCategory(e,!0,s)}),a.instance.onEditSubcategory.pipe(Object(De.a)(this.destroy$)).subscribe(t=>{const{subcategory:e,changeMap:s}=t;this.modalService.close(),this.navService.updateSection(e,!0,s)})})}toggleSubtask(t){this.store.dispatch(new Wt.Lc(Object.assign(Object.assign({},t),{taskId:this.task.id})))}setSubtaskMap(t){this.store.dispatch(new Wt.uc(Object.assign(Object.assign({},t),{taskId:this.task.id})))}openConflictManagementDialog(t){const e=this.resolver.resolveComponentFactory(y.a),s=this.conflictManagement.createComponent(e);s.instance.project=t.project,s.instance.old=t.old,s.instance.new=t.new,s.instance.payload=t.payload,s.instance.list=t.list,s.instance.listId=t.listId,s.instance.type=t.type,s.instance.taskList=t.taskList,s.instance.closed=t.closed,s.instance.task=t.task,s.instance.toTask=t.toTask,s.instance.init(),s.changeDetectorRef.detectChanges(),this.modalService.open({content:s,dialogModifier:"cu-modal__dialog-conflict",preventExternalClick:!0})}setTaskData(t){this.task&&this.task.id!==t.id&&(this.task=null),this.viewTaskService.loadTask(t)}attachmentVisible(t){this.showAttachmentsBadge=!t}relationshipsVisible(t){this.showRelationshipsBadge=!t}checkPaging(t){t.type===_.a.Tags&&this.loadTags({last:t.newSearch?null:"true",search:t.search})}timeTrackerAction(t){this.timeTrackerService.dispatchTimeTrackerAction(t)}timeEstimateAction(t){this.timeEstimatesService.dispatchTimeEstimateAction(t)}removeInvalidEmailItems(){const t=v.Q.key,e=v.S.key;return Go(Mh,["symbol"==typeof t?t:t+"","symbol"==typeof e?e:e+""])}manageEditorToolbar(){if(!this.editor||!this.editor.isEditorEnabled)return;const t=this.getScrollContainer().getBoundingClientRect(),e=this.editor.editor.container.getBoundingClientRect(),s=this.taskNameBlock.nativeElement.getBoundingClientRect(),a=e.top<t.top+s.height+this.editor.toolbar.nativeElement.offsetHeight&&e.bottom>t.top+s.height+this.editor.toolbar.nativeElement.offsetHeight;this.editor.toolbar.nativeElement.style.top=s.height-10+"px",a?this.editor.wrapper.nativeElement.classList.add("cu-editor-wrapper_sticky"):this.editor.wrapper.nativeElement.classList.remove("cu-editor-wrapper_sticky")}scrollToAttachments(){this.mainScrollbar.nativeElement.scrollTop=this.mainScrollbar.nativeElement.scrollHeight}scrollToTaskRelationships(){const t=document.querySelector("cu-task-relationships").getBoundingClientRect(),e=this.mainScrollbar.nativeElement.getBoundingClientRect();this.mainScrollbar.nativeElement.scrollTop=t.top-e.top+this.mainScrollbar.nativeElement.scrollTop-75}changeTaskName(t){const e=this.taskNameContainer.nativeElement.value.trim();e.length&&"null"!==e.toLowerCase()&&(this.store.dispatch(new Wt.xc({name:e})),this.debounceSave.next({name:e}))}keydownTaskName(t){if(!this.taskNameComposing&&t.keyCode===R.a.ENTER){this.taskNameContainer.nativeElement.blur();try{window.getSelection().removeAllRanges()}catch(e){document.selection.empty()}return!1}}pasteTaskName(t){setTimeout(()=>{this.store.dispatch(new Wt.xc({name:t.target.value.trim()})),this.taskNameContainer.nativeElement.value=t.target.value.trim()},100)}restoreTaskName(t){let e=Object.assign({},this.task);if(0===t.target.value.length&&this.task)this.taskNameContainer.nativeElement.value=this.task.name;else if(this.task){let s;e=Object.assign(Object.assign({},this.task),{name:t.target.value}),this.editor&&(s=JSON.stringify(this.editor.editor.getContents()),e=Object.assign(Object.assign({},e),{content:s})),this.updateTaskView(e,"restore task name")}this.setTaskTitle(e)}taskInputFocus(t){this.taskInputFocused=!0,this.store.dispatch(new Wt.wc({focused:this.taskInputFocused})),this.changeDetector.markForCheck()}taskInputBlur(t){this.restoreTaskName(t),this.taskInputFocused=!1,this.store.dispatch(new Wt.wc({focused:this.taskInputFocused})),this.changeDetector.markForCheck()}viewGitModal(t){const e=this.modalService.openComponent(Re.a,this.injector,{blank:!0,modifier:"cu-modal_cu-git-integration-modal",preventExternalClick:!1});e.instance.task=this.task,e.instance.integration=t,e.instance.team=this.sharedData.compatCurrentTeam,e.instance.user=this.sharedData.currentUser.value}updateDescription(t){this.lastDescriptionUpdate=(new Date).getTime(),this.saveTask({content:t})}setNextStatus(){this.task&&this.store.dispatch(new Wt.sc)}toggleTaskStatus(){this.task&&this.store.dispatch(new Wt.Mc)}completeTask(){this.task&&this.store.dispatch(new Wt.z)}setTaskStatus(t){this.statusDropdown&&this.statusDropdown.close(),this.store.dispatch(new Wt.yc({status:t})),this.statusDropdown&&this.statusDropdown.isOpen&&this.statusDropdown.close()}setPriority(t,e=!0){this.store.dispatch(new Wt.vc({priority:t})),e&&this.showSlashCommandsOnboarding(this.prioritiesDisplay,v.cb)}addToLineup([t]){this.teamId$.pipe(Object(Ue.a)(1)).subscribe(e=>{this.store.dispatch(Object(dt.b)({task:this.task,user:t,teamId:e,showToast:!0}))})}setAssignees(t){this.store.dispatch(new Wt.mc({assignees:t}))}setGroupAssignees(t){this.store.dispatch(new Wt.qc({assignees:t}))}showAssignOnboarding(){this.showSlashCommandsOnboarding(this.assignContainer,v.c)}removeAssignee(t){this.store.dispatch(new Wt.Bb({assignee:t}))}removeGroupAssignee(t){this.store.dispatch(new Wt.Gb({assignee:t}))}setDueDate(t){const e=void 0!==t.remapDueDates?t.remapDueDates:"check";let s,a;void 0===t.startDate&&(t.startDate=this.task.start_date?parseInt(this.task.start_date,10):this.task.start_date),void 0===t.dueDate&&(t.dueDate=this.task.due_date?parseInt(this.task.due_date,10):this.task.due_date),void 0===t.dueDateTime&&(t.dueDateTime=this.task.due_date_time),void 0===t.startDateTime&&(t.startDateTime=this.task.start_date_time),s=t.dueDate&&!isNaN(t.dueDate.valueOf())?de(t.dueDate).startOf("minute").valueOf():"none",a=t.startDate&&!isNaN(t.startDate.valueOf())?de(t.startDate).startOf("minute").valueOf():"none";const i=Object.assign(Object.assign({},this.task),{due_date:"none"===s?null:s,start_date:"none"===a?null:a,due_date_time:t.dueDateTime,start_date_time:t.startDateTime});this.taskService.setDueDates(i,t,!1,e,t.sendRequest).pipe(Object(we.a)(t=>t.due_date_conflict)).subscribe(e=>{e.due_date_conflict&&(this.dueDatePickerDropdown.closeOnOutsideClick=!1,this.changeDetector.detectChanges(),this.dueDatePickerDropdown.dropdown.open(),setTimeout(()=>{this.dueDatePickerDropdown.datepicker&&(this.dueDatePickerDropdown.datepicker.remapDueDatesPopover.show(),this.dueDatePickerDropdown.datepicker.lastSelectedDates=t)}))}),this.updateTaskView(i,"set due date"),this.changeDetector.detectChanges()}setTimeTracking(t){this.updateTaskView({total_time_spent:t},"setTimeTracking"),this.viewTaskService.loadTask(this.task.id),this.taskService.onNeedRefresh.emit({id:this.task.subcategory.id,type:"list"})}fetchAttachments(){this.dataService.getTaskAttachments(this.task.id).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{let e,s=Object.assign({},this.task);this.editor&&(e=JSON.stringify(this.editor.editor.getContents()),s=Object.assign(Object.assign({},s),{content:e}));const a=this.getTaskName(s);this.updateTaskView(Object.assign(Object.assign({},s),{name:a,attachments:t.attachments}),"fetchAttachments")})}updateHistory(t){const e=t.length>0?this.getTaskName(this.task):this.task.name;this.updateTaskView({name:e,history:t},"updateHistory")}updateAttachments(t){this.updateTaskView({attachments:t},"updateAttachments")}getTaskName(t){return this.taskNameContainer&&this.taskNameContainer.nativeElement&&this.taskNameContainer.nativeElement.value?this.taskNameContainer.nativeElement.value:t.name}deleteTask(t=!1,e){Object(ue.a)([this.onlyDeleteIfOwner$,this.canDelete$,this.sharedData.currentUser]).pipe(Object(Ue.a)(1)).subscribe(([s,a,i])=>{t||a||s&&i.id===this.task.creator.id?(t?this.taskService.archive(this.task):this.taskService.remove(this.task),this.updateTaskView({deleted:!0},"deleteTask"),this.removeMinimizeTask(),this.task.subtasks.forEach(t=>{this.removeMinimizeTask(null,t.id)}),this.taskService.onChange.pipe(Object($e.a)()).subscribe(()=>{this.sharedTaskService.onRemove.emit(this.task),t?this.task&&this.updateTaskView({archived:!0},"archived"):this.task.parent?this.sharedTaskService.openTaskModal({id:this.task.parent,teamId:this.task.team,customId:this.task.parent_task.custom_id}):this.sharedTaskService.closeTask()})):e&&(e.preventDefault(),e.stopPropagation())})}updateCustomType(t){if(this.task){const e=t?Bt.a.MILESTONE:Bt.a.NONE;if(this.taskService.setCustomType(Object.assign({},this.task),e),this.sharedData.compatCurrentTeam&&this.sharedData.compatCurrentTeam.milestones_limit_reached)return;this.updateTaskView({custom_type:e},"updateCustomType")}}unarchive(){const t=this.task.id;this.boardService.archiveTasks({task_ids:[t],archive:!1}).subscribe(()=>{this.task&&this.updateTaskView({id:t,archived:!1},"unarchive"),this.sharedData.addUndoItem({description:$localize`:@@cu-manager-view-task__toast-msg_task-unarchived:This task has been unarchived`})})}archive(){this.deleteTask(!0)}editTask(){this.editor.edit(),this.isTaskEditing=!0,this.store.dispatch(new Wt.pc({focused:!0}))}cancelEdit(){this.updateStoreWithContent(),this.isTaskEditing=!1,this.store.dispatch(new Wt.pc({focused:!1}))}updateContent(t){this.store.dispatch(new Wt.oc({content:JSON.stringify(t)}))}updateStoreWithContent(){if(this.editor&&this.editor.editor){const t=JSON.stringify(this.editor.editor.getContents()),e=this.taskNameContainer&&this.taskNameContainer.nativeElement&&this.taskNameContainer.nativeElement.value?this.taskNameContainer.nativeElement.value:this.task.name,s=Object.assign(Object.assign({},this.task),{content:t,name:e});this.updateTaskView(s,"updateStoreWithContent")}}toggleFullscreen(t){this.editor&&this.editor.editor&&this.editor.editor.enable(),setTimeout(()=>{this.task&&this.editor&&this.editor.editor&&(this.task.content=JSON.stringify(this.editor.editor.getContents())),this.editorFullScreen=!this.editorFullScreen,this.changeDetector.markForCheck()})}openMergeTaskModal(){this.selectTaskType="merge",this.modalService.open({title:this.commonStringsService.mergeTaskIntoText,content:this.taskSelectModal,modifier:"cu-modal_task-selector cu-modal_task-selector_merge"})}openMakeSubtaskModal(t=!1){this.selectTaskType="make_subtask",this.modalService.open({title:this.commonStringsService.convertToSubtaskText,content:this.taskSelectModal,modifier:"cu-modal_task-selector"}),this.modalService.closeModal.pipe(Object(Ue.a)(1),Object(De.a)(this.destroy$)).subscribe(()=>{this.taskSelectErrorMsg=null})}openMoveSubtaskModal(){this.selectTaskType="move_subtask",this.modalService.open({title:$localize`:@@cu-manager-view-task__title_move-subtask-to-diff-task:Move subtask to a different task`,content:this.taskSelectModal,modifier:"cu-modal_task-selector"})}subtaskConfirmModal(t){this.selectTaskData&&this.makeSubtask(this.selectTaskData.task,this.selectTaskData.toTask,!0,t)}mergeSubtaskConfirmModal(){this.selectTaskData&&this.mergeTasks(this.selectTaskData.task,this.selectTaskData.toTask,!0)}copyTaskModal(){this.modalService.open({title:this.commonStringsService.duplicateTask,content:this.taskCopyModal})}saveTemplateModal(){this.store.dispatch(new Mt.Oe({open:!0,parent:this.task,parentType:Et.d.Task,initialType:Et.d.Task,itemToSave:this.task}))}updateExistingTemplateModal(){this.store.dispatch(new Mt.Oe({open:!0,parent:this.task,parentType:Et.d.Task,initialType:Et.d.Task,itemToSave:this.task,updateExisting:!0}))}loadTemplateModal(){this.templateListLoading=!0,this.store.dispatch(new Mt.Oe({open:!0,parent:this.task,parentType:Et.d.Task,initialType:Et.d.Task}))}showEditCustomFieldsModal(){const t=this.modalService.openComponent(zt.a,this.injector,{title:this.commonStringsService.manageCustomFieldText(this.task.subcategory.name),dialogModifier:"cu-modal__dialog-custom-fields",preventExternalClick:!0,bodyModifier:"cu-modal__body_no-min-height"});t.instance.setEntity({type:"subcategory",id:this.task.subcategory.id,name:this.task.subcategory.name}),t.instance.destroy$.pipe(Object(Ie.a)(()=>this.dataService.getTask(this.task.id)),Object(Ue.a)(1)).subscribe(t=>{this.updateTaskView({id:t.id,customFields:t.customFields},"showEditCustomFieldsModal")})}loadDataFromTemplate(t){this.modalService.close(),this.viewTaskService.loadTask(this.task.id,!1,!0),this.sharedData.compatCurrentTeam.task_relationships||this.store.dispatch(new Q.z({taskId:this.task.id}))}copyTask(t){this.modalService.close(),this.dataService.copyTask(this.task.id,Object(Pe.b)(t)).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.sharedData.addToastItem({title:this.commonStringsService.copyingTask,bold:!0,forced:!0})})}makeSubtask(t,e,s=!1,a){const i={parent:e.id,convert_subtasks:s};a&&(i.status_change_map=a),this.dataService.editTask(t.id,i).pipe(Object(De.a)(this.destroy$)).subscribe(a=>{if(a.conflict)this.openConflictManagementDialog({task:t,toTask:e,payload:{parent:e.id,convert_subtasks:s},new:a.new,old:a.old,type:"editTask",closed:a.closed});else{this.viewTaskService.loadTask(t.id);const s=Object(B.b)(t.name),a=Object(B.b)(e.name),i={description:$localize`:@@cu-manager-view-task__toast-item_task-convert-to-subtask:Converted <span class="toast__name-link-text">${s}:sourceTaskName:</span> to subtask of <span class="toast__name-link-bold">${a}:destinationTaskName:</span>`,task:t,allowHtml:!0};this.sharedData.addUndoItem(i),this.notifyChanges(t,e)}},t=>{"ITEM_066"===t.ECODE?this.openSubtaskConfirmModal():"ITEM_224"===t.ECODE&&(this.taskSelectErrorMsg=$localize`:@@cu-view-task-subtask-level-error:${t.err}:errorMsg:`,this.openMakeSubtaskModal())})}moveSubtask(t,e){this.dataService.editTask(t.id,{parent:e.id}).pipe(Object(De.a)(this.destroy$)).subscribe(s=>{if(s.conflict)this.openConflictManagementDialog({task:t,payload:{parent:e.id},new:s.new,old:s.old,type:"editTask",closed:s.closed});else{this.viewTaskService.loadTask(t.id);const s=Object(B.b)(t.name),a=Object(B.b)(e.name),i={description:$localize`:@@cu-manager-view-task__toast-item_move-subtask:Moved <span class="toast__name-link-text">${s}:sourceTaskName:</span> into <span class="toast__name-link-bold">${a}:destinationTaskName:</span>`,task:t,allowHtml:!0};this.sharedData.addUndoItem(i),this.notifyChanges(t,e)}})}mergeTasks(t,e,s=!1){this.dataService.mergeTasks({task1:e.id,task2:t.id},s).pipe(Object(De.a)(this.destroy$)).subscribe(s=>{if(s.conflict)this.taskService.onConflictDetected.emit({mergeTasks:t,toTask:e,new:s.new,old:s.old,payload:{task1:e.id,task2:t.id},type:"merge",closed:s.closed});else{const s=[];[e,t].forEach(t=>{t.subcategory&&s.push(t.subcategory.id)}),s.length&&this.taskService.onNeedRefresh.emit({ids:s,type:"list"}),this.sharedTaskService.openTaskModal({id:e.id,customId:e.custom_id,teamId:e.team});const a=Object(B.b)(t.name),i=Object(B.b)(e.name),n={description:$localize`:@@cu-manager-view-task__toast-item_merge-tasks:Merged <span class="toast__name-link-bold">${a}:sourceTaskName:</span> into <span class="toast__name-link-text">${i}:destinationTaskName:</span>`,task:e,allowHtml:!0,deleteAction:!0};this.sharedData.addUndoItem(n),this.notifyChanges(t,e,null,!0),this.teamTaskTray$.pipe(Object(Ue.a)(1)).subscribe(e=>{-1!==e.teamTrayTasks.findIndex(e=>e.id===t.id)&&this.store.dispatch(new Gt.y({tasksRemoved:[t.id],currentTeamId:t.team}))})}})}convertToTask(){const t=this.task.parent;this.dataService.editTask(this.task.id,{parent:"none"}).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.viewTaskService.loadTask(this.task.id,!0);const e={description:this.commonStringsService.convertToTaskUndoItemText(Object(B.b)(this.task.name)),task:this.task,allowHtml:!0};this.sharedData.addUndoItem(e),this.notifyChanges(this.task,null,t)})}taskSelected(t){switch(this.taskSelectErrorMsg=null,this.selectTaskData={task:t.masterTask,toTask:t.task},this.modalService.close(),this.selectTaskType){case"merge":if(this.task.subtasks&&this.task.subtasks.length>0){const e=this.resolver.resolveComponentFactory(S.a),s=this.confirmMergeSubtaskModal.createComponent(e);s.instance.selectTaskData=this.selectTaskData,s.instance.parentTask=!!t.task.parent,s.instance.onConfirm.pipe(Object(De.a)(this.destroy$)).subscribe(()=>this.mergeSubtaskConfirmModal()),this.modalService.open({blank:!1,modifier:"task-sc__modal",content:s})}else this.mergeTasks(this.selectTaskData.task,this.selectTaskData.toTask,!1);break;case"make_subtask":this.task.subtasks&&this.task.subtasks.length>0?this.openSubtaskConfirmModal():this.makeSubtask(this.selectTaskData.task,this.selectTaskData.toTask,!1);break;case"move_subtask":this.moveSubtask(this.selectTaskData.task,this.selectTaskData.toTask)}}openSubtaskConfirmModal(t){const e=this.resolver.resolveComponentFactory(S.a),s=this.confirmSubtaskModal.createComponent(e);s.instance.selectTaskData=this.selectTaskData,s.instance.onConfirm.pipe(Object(De.a)(this.destroy$)).subscribe(()=>this.subtaskConfirmModal(t)),this.modalService.open({blank:!1,modifier:"task-sc__modal",content:s})}closeTask(t){if(!this.task)return void this.sharedTaskService.closeTask();const e=this.task.id;if(this.commentBar&&setTimeout(()=>{this.commentBar&&this.commentBar.saveCommentToLocalstorage(e)},0),this.taskNameContainer&&this.taskNameContainer.nativeElement){const t=this.taskNameContainer.nativeElement.innerText.trim();t.length&&this.task.name&&(this.task.name=t.length?t:this.task.name)}this.task.subcategory&&!this.task.subcategory.status&&this.store.pipe(Object(tt.select)(Object(Ft.getSubcategoryById)(this.task.subcategory.id,this.task.category.id,this.task.project_id)),Object(Ue.a)(1)).subscribe(t=>{t&&(this.task.subcategory.status=t.status)}),this.sharedTaskService.closeTask(this.task,!0,!0,this.removedSubtasks)}addFileToTask(t){const e=[];Array.from(t).forEach(t=>{this.editorFullScreen&&this.editor.edit(),this.editor.isEditorEnabled?this.editor.sendFile(t):e.push(t)}),e.length>0&&this.attachmentsComponent.addFiles(t)}addFileToComment(t){this.viewTaskService.commentEditorOpen?this.viewTaskService.onCommentEditorAddFiles.emit(t):this.viewTaskService.onCommentAddFiles.emit({tag:"task_"+this.task.id,files:t})}uploadEditorFile(t){if(this.task&&this.task.id&&t&&t.id){this.dataService.linkAttachments(this.task.id,[t.id],1).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.fetchAttachments()});const e=JSON.stringify(this.editor.editor.getContents()),s=Object.assign(Object.assign({},this.task),{content:e}),a=this.taskNameContainer&&this.taskNameContainer.nativeElement&&this.taskNameContainer.nativeElement.value?this.taskNameContainer.nativeElement.value:s.name;this.updateTaskView(Object.assign(Object.assign({},s),{name:a,hidden_attachments:[...this.task.hidden_attachments||[],t]}),"uploadEditorFile")}}closedDatePicker(){this.openedFromStart=!1,this.datePickerClosed=!0,this.dueDatePickerDropdown.closeOnOutsideClick=!0,this.showSlashCommandsOnboarding(this.dueDateDisplay||this.startDateDisplay,v.o)}openedDatePicker(){setTimeout(()=>{this.datePickerClosed=!1},0)}loadTags(t){const e=this.space.id;this.store.dispatch(Object(kt.e)({projectId:e,paging:t}))}addTag(t){this.store.dispatch(new Wt.m({tags:this.tags,tag:t})),this.store.dispatch(Object(kt.a)({projectId:this.space.id,tag:t}))}renameTag(t){const e=Object.assign(Object.assign({},t.tag),{project_id:this.space.id,new_name:t.newName});this.store.dispatch(new Wt.Ob({data:t,newTag:e})),this.store.dispatch(Object(kt.o)({projectId:this.space.id,tag:t.tag,newName:t.newName}))}deleteTagFromSpace(t){this.store.dispatch(new Wt.Kb({tag:t,spaceId:this.space.id})),this.store.dispatch(Object(kt.d)({projectId:this.space.id,tagName:t.name}))}colorChange(t){this.store.dispatch(new Wt.x({tag:t.tag,newColor:t.newColor})),this.store.dispatch(Object(kt.c)({projectId:this.space.id,newColor:t.newColor,tag:t.tag}))}removeTag(t){this.store.dispatch(new Wt.Kb({tag:t}))}openTogglAuth(){const t=this.userService.getUser(!1),e=this.dataService.getTogglToken();Object(_e.a)([t,e]).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{const e=t[0].user;if(!(e.features&&e.features.toggl_check||t[1].authed)){const t=this.resolver.resolveComponentFactory(ze.a),e=this.authToggl.createComponent(t);e.instance.inModal=!0,this.modalService.open({content:e})}})}setFollowers(t){this.task$.pipe(Object(Ue.a)(1)).subscribe(e=>{this.updateTaskView({followers:t.all},"setFollowers"),this.taskService.setFollowers(e,t.add,t.rem,!1)})}setGroupFollowers(t){this.task$.pipe(Object(Ue.a)(1)).subscribe(e=>{this.updateTaskView({group_followers:t.all},"setGroupFollowers"),this.taskService.setGroupFollowers(e,t.add,t.rem)})}onResize(){this.isCollapsed=window.innerWidth<1185,setTimeout(()=>{this.autosize&&this.autosize.resizeToFitContent(!0),this.updateTaskHeaderColumnsWidth()})}keyEvent(t){if(this.editorFullScreen&&t.keyCode===R.a.ESCAPE)this.toggleFullscreen();else{if(t.keyCode===R.a.ESCAPE||"/"===t.key||t.keyCode===R.a.ARROW_RIGHT||t.keyCode===R.a.ARROW_LEFT){const e=t,s=e.target||e.srcElement||document.activeElement,a=s&&s.tagName?s.tagName.toLowerCase():"";if(s&&(!s.isContentEditable||!(s.innerText&&s.innerText.trim()||-1!==s.innerHTML.toLowerCase().indexOf("<pre")))&&"input"!==a&&"textarea"!==a&&!document.body.classList.contains("cu-dropdown_open")&&!document.body.classList.contains("attachments-viewer_open")&&(!document.body.classList.contains("modal-window_open")||document.querySelector("cu-search-modal")))if(t.ctrlKey&&t.shiftKey&&!t.altKey&&!t.metaKey&&(t.keyCode===R.a.ARROW_RIGHT&&this.nextTask(),t.keyCode===R.a.ARROW_LEFT&&this.prevTask()),t.keyCode===R.a.ESCAPE)this.selectedTasks.hasSubtasks()||this.closeTask();else if(!s.isContentEditable&&!s.classList.contains("ql-editor"))switch(t.key){case"/":!this.embedSlashCommandInfo&&this.commentBar&&this.commentBar.slashCommandsModule&&(t.preventDefault(),t.stopPropagation(),this.commentBar.activateEditor(),this.store.dispatch(new Wt.M({spaceId:this.space.id})),this.drafterOpen||setTimeout(()=>{this.commentBar.openSlashCommands()}))}}t.keyCode===R.a.TAB&&document.activeElement===this.taskNameContainer.nativeElement&&this.editor.edit()}}toggleMe(){this.task.assignees&&this.task.assignees.some(t=>t.id===this.sharedData.currentUser.value.id)||this.setAssignees([...this.task.assignees||[],this.sharedData.currentUser.value])}taskMoverToggleMenu(){setTimeout(()=>this.taskBreadcrumbs.toggleMenu())}closeWsTask(){this.modalService.close(),this.closeTask()}openWsMergedTask(){this.modalService.close(),this.wsMergedInto&&this.sharedTaskService.openTaskModal({id:this.wsMergedInto.id,teamId:this.wsMergedInto.team,customId:this.wsMergedInto.custom_id})}changeVisibility(t){this.visibleView$.next(t),this.sharedTaskService.setTaskViewing(t&&this.task?this.task.id:null),this.handleNewActivityDivider()}handleNewActivityDivider(){this.clearNewActivityTimer&&(clearTimeout(this.clearNewActivityTimer),this.clearNewActivityTimer=null),this.task&&this.sharedTaskService.lastTaskViewing===this.task.id&&(this.clearNewActivityTimer=setTimeout(()=>{this.clearNewActivityTimer=null;const t=this.task.history?[...this.task.history]:[],e=t.findIndex(t=>"new_activity"===t.field);-1!==e&&(t.splice(e,1,{field:"new_activity",fade:!0}),this.updateTaskView({history:t},"handleNewActivityDivider"),setTimeout(()=>{if(-1!==(this.task&&this.task.history?this.task.history.findIndex(t=>"new_activity"===t.field):-1)){const t=[...this.task.history];t.splice(e,1),this.updateTaskView({history:t},"handleNewActivityDivider remove")}},1e3))},5e3))}removeSubtask(t){this.removedSubtasks.push(t)}createSubtask({task:t,elementRef:e}){this.addSubtaskMentionTo&&t?(Object(f.d)(this.addSubtaskMentionTo,[{task_mention:this.taskMentionService.getTaskMentionObject(t)}," "]),this.addSubtaskMentionTo=null):e&&this.showSlashCommandsOnboarding(e,v.mb,"top")}setRecurringLegacy(t){localStorage.getItem("debugEnabled");const e=this.task.id;this.taskService.setRecurringLegacyAsync(this.task,t).subscribe(t=>{this.updateTaskView({id:e,recur:t,legacy_recurring:t&&t.recurring},"setRecurringLegacy")}),this.updateTaskView({id:e,recur:t,legacy_recurring:t&&t.recurring},"setRecurringLegacy 2")}setRecurring(t){localStorage.getItem("debugEnabled");const e=Object(U.i)(t.recurring),s=e?Object.assign({},e):null;e&&t.dates&&t.dates.dueDate&&(s.due_date=Object(Ct.j)(t.dates.dueDate).valueOf(),s.due_date_time=t.dates.dueDateTime),this.taskService.setRecurringAsync(this.task,s).subscribe(t=>{}),this.updateTaskView({recurring_settings:e},"setRecurring")}onCreateChecklistFromTemplate(){this.checklist&&"function"==typeof this.checklist.openChouserTemplate&&this.checklist.openChouserTemplate()}onCreateChecklist(){this.checklist.openCreateChecklistWindow(),this.subtasks.update()}minimizeTask(){this.task&&this.task.id&&this.store.dispatch(new Gt.c({addTask:this.task,currentTeamId:this.sharedData.compatCurrentTeam.id})),this.closeTask()}removeMinimizeTask(t,e){t&&(t.preventDefault(),t.stopPropagation()),this.store.dispatch(new Gt.x({removeTask:this.task,currentTeamId:this.sharedData.compatCurrentTeam.id}))}removeAttachment(t){this.store.dispatch(new Wt.Cb({attachment:t}))}removeAttachmentFromTaskHistory(t){this.store.dispatch(new Wt.Db({attachmentId:t}))}openPreviewWithCoverImage(){const t=this.task.attachments.findIndex(t=>t.id===this.task.coverimage.id);this.attachmentsViewerService.onOpen.emit({attachments:this.task.attachments,index:-1===t?0:t,taskId:this.task.id,canRemove:this.task.permissions.remove_attachments&&this.task.permission_level!==H.e.COMMENT,canRemoveOwn:this.task.permission_level===H.e.COMMENT,canEdit:this.task.permissions.remove_attachments&&this.task.permission_level!==H.e.COMMENT,canEditOwn:this.task.permission_level===H.e.COMMENT,canChangeDescription:this.task.permissions.change_description,coverImage:this.task.coverimage,allowComments:!0})}submitComment(t){if(this.commentSubmitting&&null!==this.previousCommentSubmitted&&Object(ce.a)(this.previousCommentSubmitted,t,(t,e,s)=>{if(Object(oe.a)(s)&&"attachments"===s.toLowerCase())return!0}))return;this.previousCommentSubmitted=t,this.commentSubmitting=!0,document.body.classList.add(this.sumbittingClass),this.changeDetector.markForCheck();const e=this.viewTaskService.task.value.id,s=[];t&&t.comment&&t.comment.length&&t.comment.forEach(t=>{"tag"===t.type&&t.user&&t.user.id&&s.push(t.user),"assignees_tag"===t.type&&this.task&&this.task.assignees&&this.task.assignees.length&&s.push(...this.task.assignees)}),t&&t.assignee&&s.push(t.assignee);const{assignee:a,group_assignee:i,attachments:n,thread_followers:c}=t,o=Go(t,["assignee","group_assignee","attachments","thread_followers"]);this.addCommentToHistory(null,E.d,Date.now(),t,null);const r=o;a&&(r.assignee=a.id),i&&(r.group_assignee=i.id),n&&(r.attachment=n.map(t=>t.id)),c&&(r.followers=c.map(t=>t.id)),this.store.dispatch(new Wt.j({users:s})),this.commentsService.createComment(e,r).pipe(Object(Fe.a)(()=>{this.commentSubmitting=!1,this.previousCommentSubmitted=null,this.clearSubmittingTimer&&clearTimeout(this.clearSubmittingTimer),this.clearSubmittingTimer=setTimeout(()=>{this.clearSubmittingTimer=null,this.commentSubmitting||document.body.classList.remove(this.sumbittingClass)},3e3)})).subscribe(s=>{if(this.minimizeTasksService.setContent(e,null,null,null,null),this.commentBar){this.commentBar.clear(),this.commentSubmitting=!1,this.previousCommentSubmitted=null,this.commentBar.editor.enable(),this.changeDetector.markForCheck(),this.addCommentToHistory(s.hist_id,s.id,s.date,t,s.email);const e=[...r.attachment];t.comment.filter(t=>"frame"===t.type&&"clickup_video"===t.frame.service).forEach(t=>{e.push(Object(L.t)(t.frame.url))}),e.length>0&&this.dataService.linkAttachmentsV2(s.id,2,e).pipe(Object(De.a)(this.destroy$)).subscribe()}},t=>{t&&"NEMAIL_005"===t.ECODE&&this.commentBar&&this.commentBar.openPaywallModal()})}openTemplateManagerModal({type:t}){const e=this.modalService.openComponent(T.a,this.injector,{name:"templateSelector",cannotClose:!1,preventExternalClick:!0,modifier:"cu-folder-list-template-selector__modal",dialogModifier:"",bodyModifier:""});e.instance.initTemplateId="1",e.instance.initTemplateType=t,e.instance.requestPayload={subcategory_id:this.task.subcategory.id}}addCommentToInbox(t){let e;e=t.text&&t.text.length>25?`${t.text.substring(0,25)}... ${t.url}`:`${t.text} ${t.url}`;const s={data:{id:null,name:e,assignees:[],title:t.text,date_created:String(Date.now()),due_date:t.date,due_date_time:t.dueDateTime,start_date:String(Date.now()),start_date_time:!1,recurring_settings:t.recurringSettings?Object(U.i)(t.recurringSettings.recurring):null},open:!0};this.user$.pipe(Object($e.a)()).subscribe(t=>{this.inboxService.createReminder(t,Nt.a.Today,s)})}addCommentToDesc(t,{delta:e,comment:s}){if(this.editor){this.editor.appendDelta(e);const t={title:$localize`:@@cu-manager-view-task__toast-item_add-comment-to-description:Added a copy of this comment into the task description!`};this.sharedData.addToastItem(t)}if(t){this.commentBar&&this.commentBar.clear();const t=[];s.attachments&&t.push(...s.attachments.map(t=>t.id)),s.comment.filter(t=>"frame"===t.type&&"clickup_video"===t.frame.service).forEach(e=>{t.push(Object(L.t)(e.frame.url))}),t.length>0&&this.dataService.linkAttachmentsV2(this.task.id,1,t).pipe(Object(De.a)(this.destroy$)).subscribe()}}addCommentToHistory(t,e,s,a,i){const n=s||Date.now();let c=null;if(a.assignee){const t=this.members&&this.members.find(t=>t&&t.user.id===a.assignee.id);c=t?t.user:a.assignee}const o={id:e,date:n,comment:a.comment,user:this.sharedData.currentUser.value,assignee:c,reactions:[],resolved:!1,group_assignee:a.group_assignee,emails:a.email?i?[Object.assign(Object.assign({},i),{full_data:a.email})]:[{full_data:a.email}]:null,thread_followers:a.thread_followers};this.viewTaskService.onCommentAdd.emit({id:t,date:n,field:"comment",user:this.sharedData.currentUser.value,comment:o}),e!==E.d&&(a.assignee||a.group_assignee)&&this.viewTaskService.onTodoAdd.emit(Object.assign(Object.assign({},o),{hist_id:t}))}reloadTask(){this.viewTaskService.loadTask(this.task.id)}setTimeEstimate(t){this.viewTaskService.loadTask(this.task.id),this.updateTaskView({time_estimate_string:t.output,time_estimate:1e3*t.seconds},"setTimeEstimate")}openDependencyModal(){this.store.dispatch(new Q.C({task:this.task,project:this.space}))}openSlashCommands(){this.store.dispatch(Object(kt.e)({projectId:this.space.id,paging:null}))}applySlashCommand({command:t,value:e}){if(!t)return;let s;switch(t.key){case v.c.key:{const t=e.filter(t=>t.group).map(t=>t.group);this.setGroupAssignees(t);const s=e.filter(t=>!t.group);this.setAssignees(s)}break;case v.Gb.key:this.task$.pipe(Object(Ue.a)(1)).subscribe(t=>{const s=e.filter(t=>t.group).map(t=>t.group);this.setGroupFollowers(Object(w.b)(t.group_followers,s));const a=e.filter(t=>!t.group);this.setFollowers(Object(w.b)(t.followers,a))});break;case v.kb.key:this.store.dispatch(new Wt.yc({status:e}));break;case v.cb.key:this.setPriority(e,!1);break;case v.nb.key:const a=this.taskService.getPatch(this.task,e);a.add.length>0&&a.add.forEach(t=>{this.addTag(t)}),a.rem.length>0&&a.rem.forEach(t=>{this.removeTag(t)});break;case v.o.key:this.setDueDate({dueDate:e?e.date:null,dueDateTime:e?e.showTime:null,startDate:this.task.start_date,startDateTime:this.task.start_date_time});break;case v.q.key:const i=e[1];this.setDueDate({dueDate:(e=e[0])?e.date:null,dueDateTime:e?e.showTime:null,startDate:this.task.start_date,startDateTime:this.task.start_date_time}),this.setAssignees(i);break;case v.jb.key:this.setDueDate({dueDate:this.task.due_date,dueDateTime:this.task.due_date_time,startDate:e?e.date:null,startDateTime:e?e.showTime:null});break;case v.ib.key:const n=e&&e.id?parseInt(e.id,10):0;this.store.dispatch(e.user?Object(I.c)({task:this.task,points:n,assignees:e.user&&!e.user.group?[e.user.id]:null,groupAssignees:e.user&&e.user.group?[e.user.group.id]:null}):Object(I.d)({task:this.task,points:n}));break;case v.pb.key:const c=e||{seconds:0,output:""};this.store.dispatch(new gt.s({estimate:c,task:this.task})),e&&e.noWarning&&this.store.dispatch(new Mt.om({seen_time_estimate_warning:!0})),this.setTimeEstimate(c);break;case v.Z.key:e&&this.taskBreadcrumbs.select(e);break;case v.n.key:this.createDoc(this.embedSlashCommandInfo&&this.embedSlashCommandInfo.isComment,!(this.embedSlashCommandInfo&&this.embedSlashCommandInfo.isComment),e);break;case v.mb.key:e&&(this.embedSlashCommandInfo&&(this.addSubtaskMentionTo=this.embedSlashCommandInfo.editor),this.task.parent?this.createSiblingSubtask(e):this.subtasks.createSubtask({subcategoryId:this.task.subcategory.id,name:e,parent:this.task.id}));break;case v.k.key:this.store.dispatch(new Q.Q("blocker")),this.store.dispatch(new Q.r({selectedTask:this.task,currentTask:e,batchedTasks:[]}));break;case v.Fb.key:this.store.dispatch(new Q.Q("waiting")),this.store.dispatch(new Q.r({selectedTask:this.task,currentTask:e,batchedTasks:[]}));break;case v.X.key:this.store.dispatch(new Q.i({body:{task_id:this.task.id,links_to:e.id}}));break;case v.ob.key:s=[{task_mention:this.taskMentionService.getTaskMentionObject(e)}," "];break;case v.Eb.key:s=e.group?[{user_group_mention:{id:e.group.id,name:e.group.name,handle:e.group.handle}}," "]:[{user_mention:{id:e.id,name:e.username,email:e.email}}," "];break;case v.d.key:if(this.embedSlashCommandInfo.isCommentEdit){const t=this.embedSlashCommandInfo.id&&this.embedSlashCommandInfo.id.startsWith("comment_edit_")?this.embedSlashCommandInfo.id.substring("comment_edit_".length):"";if(!t)return;this.editComment(t,e.group?{group_assignee:e?e.group.id:"unassigned"}:{assignee:e?e.id:"unassigned"},e.group?{group_assignee:e.group}:{assignee:e})}else this.commentBar&&(e.group?this.commentBar.assignToGroup([e.group]):this.commentBar.assignToUser([e]));break;case v.bb.key:this.taskBreadcrumbs.updateTaskPosition(e);break;case v.h.key:case v.j.key:case v.i.key:case v.g.key:const o=!this.embedSlashCommandInfo.id||!this.embedSlashCommandInfo.id.startsWith("comment_edit_");this.isFreePlan$.pipe(Object(Ie.a)(e=>e?Object(me.a)({type:"deny",data:null}):(t.key===v.i.key?this.googleDriveService.addGoolgeDriveFile(this.space.id,4,o):t.key===v.h.key?this.dropboxService.addDropboxFile(this.space.id,4,o):t.key===v.g.key?this.boxService.addBoxFile(this.space.id,4,o):this.oneDriveService.addOneDriveFile(this.space.id,4,o)).pipe(Object(ye.a)(t=>({type:"file",data:t})))),Object(De.a)(this.destroy$)).subscribe(e=>{switch(e.type){case"file":this.commentBar&&e.data&&this.commentBar.addCloudAttachment(e.data,t.key===v.i.key?A.a.google:t.key===v.h.key?A.a.dropbox:t.key===v.g.key?A.a.box:A.a.onedrive);break;case"deny":this.commentBar&&this.commentBar.showCloudStoragepaywallPopover()}});break;case v.f.key:if(e&&"upload"===e.id){if(!this.embedSlashCommandInfo.isComment)return this.hideSlashCommand(),void this.addFileToTask(e.data);if(this.commentBar)return this.hideSlashCommand(),void this.commentBar.fileAdded(e.data)}else s=Object(f.e)(t,e,this.embedSlashCommandInfo&&!this.embedSlashCommandInfo.isComment);break;case v.Hb.key:this.createZoomMeeting();break;default:s||(s=Object(f.e)(t,e,this.embedSlashCommandInfo&&!this.embedSlashCommandInfo.isComment))}const a=this.embedSlashCommandInfo&&this.embedSlashCommandInfo.editor;this.hideSlashCommand(s),a&&t.formatCommand&&Object(f.a)(a,t.key,e),a&&t.turnIntoCommand&&Object(f.b)(a,t.key)}hideSlashCommand(t="",e=!0){this.embedSlashCommandInfo&&(this.slashCommandContainer&&this.embedSlashCommandInfo.view&&this.domService.removeView(this.embedSlashCommandInfo.view,this.slashCommandContainer),Object(f.f)(this.embedSlashCommandInfo,t,e,this.httpSession.getSessionId()),this.embedSlashCommandInfo.isComment||this.updateStoreWithContent(),this.embedSlashCommandInfo=null)}syncTaskView(t){this.store.dispatch(new Wt.Ec(t))}createSiblingSubtask(t){this.dataService.createTask(this.task.subcategory.id,{parent:this.task.parent,name:t.trim()}).subscribe(t=>{this.createSubtask({task:t.task,elementRef:null})},t=>{this.addSubtaskMentionTo=null})}setCoverImage(t){(!t||this.task.coverimage&&this.task.coverimage.id===t)&&(t=null),this.dataService.editTask(this.task.id,{coverimage:t}).subscribe(t=>{const e=t.task;this.updateTaskView({id:e.id,coverimage:e.coverimage},"setCoverImage")})}print(){this.settingsDropdown&&this.settingsDropdown.close(),setTimeout(()=>{window.print()},0)}linkClicked(t){t.doc_linked&&t.doc_linked.canOpen?this.sharedDocService.openDoc(this.injector,t.doc_linked.teamId,t.doc_linked.viewId,t.doc_linked.pageId):this.scrollToComment(t.parent)}scrollToComment(t){this.viewTaskService.onHighlightComment.emit({comment:{id:t}})}settingsOpen(t){t.preventDefault(),t.stopPropagation(),this.settingsDropdown&&this.settingsDropdown.open()}checkForEmailModal(){if(this.localStorage.get(k.c)){const t={title:this.commonStringsService.emailLinkCopiedText,forced:!0,clickAction:this.showEmailModal.bind(this)};this.sharedData.addToastItem(t)}else this.showEmailModal()}showEmailModal(){const t=this.modalService.openComponent(k.a,this.injector,{title:this.commonStringsService.attachEmailsToTaskText});t.instance.emailType=k.b.Comment,t.instance.task=this.task,t.instance.skipModal=!!this.localStorage.get(k.c)}loadDependencies(t,e){this.store.dispatch(new K.d({dependencies:e,task:t}))}openSharingModal(){this.task.parent?this.dataService.getTask(this.task.parent).pipe(Object(De.a)(this.destroy$)).subscribe(t=>{this.store.dispatch(new Mt.Le("task",t,this.commonStringsService.parentTaskSharingNoticeText))}):this.store.dispatch(new Mt.Le("task",this.task))}loadTaskDescHistory(){this.store.dispatch(new Jt),this.store.dispatch(new Zt(this.task.id))}nextTask(){this.openPrevNextTask(this.nextTask$)}prevTask(){this.openPrevNextTask(this.prevTask$)}resizeStart(t){if(this.renderer.addClass(document.body,"cu-unselectable"),this.taskInner){const{width:t}=this.taskInner.nativeElement.getBoundingClientRect();this.taskInnerWidth=t}}resizing(t){if(this.taskInnerWidth){const e=Math.round(1e4*t.rectangle.width/this.taskInnerWidth)/100,s=Math.round(4e4/this.taskInnerWidth*100)/100,a=100-s;this.resizeDividerPercent.next(Math.min(Math.max(e,s),a)),this.updateTaskHeaderColumnsWidth()}this.autosize&&this.autosize.resizeToFitContent(!0)}resizeEnded(){this.renderer.removeClass(document.body,"cu-unselectable"),this.taskInnerWidth=null,this.resizeDividerPercent$.pipe(Object(Ue.a)(1)).subscribe(t=>localStorage.setItem("task_view_resize_divider",String(t))),setTimeout(()=>{this.autosize&&this.autosize.resizeToFitContent(!0)})}updateTaskView(t,e){!this.task||t.id&&t.id!==this.task.id||this.store.dispatch(new Wt.gd({task:t}))}getScrollContainer(){return this.mainScrollbar.nativeElement}openStatusSettings(){this.editStatuses()}lazyLoad(t){t&&"tags"===t.source&&this.store.dispatch(Object(kt.e)({projectId:this.space.id,paging:t.data&&t.data.paging}))}commentReply(t){this.commentBar&&this.commentBar.commentReply(t)}convertToList(){if(this.task&&this.task.category&&this.task.project){if(this.task.category.hidden){if(5!==this.task.project.permission_level)return void this.sharedData.addToastItem({title:$localize`:@@cu-manager-view-task__toast-item_add-list-to-space-denied:You dont have permission to create a List in this Space`,bold:!0})}else if(5!==this.task.category.permission_level)return void this.sharedData.addToastItem({title:$localize`:@@cu-manager-view-task__toast-item_add-list-to-folder-denied:You dont have permission to create a List in this Folder`,bold:!0});this.modalService.open({content:this.confirmConvertTaskToListModal})}}confirmConvertTaskToList(){this.closeModal();const t={};this.task.category.hidden?t.project_id=this.task.project.id:t.category_id=this.task.category.id,this.store.dispatch(new Mt.Db({taskId:this.task.id,body:t})),this.closeTask()}closeModal(){this.modalService.close()}refreshTaskCustomFields(){this.task&&(this.dataService.getTask(this.task.id).subscribe(t=>{this.updateTaskView({id:t.id,customFields:t.customFields},"refreshTaskCustomFields")}),this.sharedData.compatCurrentTeam.task_relationships&&this.reloadTaskRelationships())}updateCustomFieldValue(t,e){this.task&&this.updateTaskView({customFields:(this.task.customFields||[]).map(s=>s.id===t.id?Object.assign(Object.assign({},s),{value:e}):s)},"updateCustomFieldValue")}showShareTaskModal(){this.modalService.open({content:this.sharePublicTaskModal,bodyModifier:"cu-modal__body_no-min-height",blank:!0})}updateTaskSharing(t){t.public&&this.defaultPublicTaskFields&&(t.public_fields=this.defaultPublicTaskFields),this.store.dispatch(new Wt.ed({taskId:this.task.id,changes:{sharing:Object.assign(Object.assign({},this.task.sharing),t)},apiPayload:Object.assign(Object.assign({},t),{public_permission_level:H.e.READ})}))}setDefaultPublicTaskFields(t){t?this.localStorage.set("default-task-sharing-fields",t):this.localStorage.remove("default-task-sharing-fields"),this.defaultPublicTaskFields=t}goToParent(t){St.k?this.task.parent_sharing?this.router.navigate(Object(St.h)(this.task.parent_task,this.task.team,this.task.parent_sharing.seo_optimized,this.task.parent_sharing.token)):this.publicSharingViewId$.pipe(Object(Ue.a)(1)).subscribe(t=>{this.router.navigate(Object(St.i)({seoOptimised:this.task.sharing.seo_optimized,viewId:t,publicKey:this.task.sharing.token,task:this.task.parent_task,teamId:this.task.team}))}):this.sharedTaskService.clickTaskLink({id:this.task.subtask_parent||this.task.parent,teamId:this.task.team,customId:this.task.subtask_parent?this.task.subtask_parent_task.custom_id:this.task.parent_task.custom_id},t)}closeSharingModal(){this.modalService.close(),this.closeTask()}searchStatuses(t){this.highlightedStatus=null,""!==t?(this.searchingStatuses=!0,this.filteredStatuses=this.statuses.filter(({status:e})=>e.toLowerCase().includes(t.toLowerCase())),this.filteredStatuses&&this.filteredStatuses.length&&(this.highlightedStatus=this.filteredStatuses[0]),this.changeDetector.detectChanges()):this.resetStatusSearch()}resetStatusSearch(){this.statusSearchString="",this.searchingStatuses=!1,this.filteredStatuses=[],this.changeDetector.detectChanges(),this.highlightedStatus=null}focusStatusInput(){this.statusSearchInput&&setTimeout(()=>{this.statusSearchInput.nativeElement.focus()})}createDoc(t=!1,e=!1,s){this.store.dispatch(new Wt.A({taskId:this.task.id,attachToComment:t,attachToContent:e,name:s}))}updateView(t){this.store.dispatch(new Wt.hd({viewId:t.viewId,changes:t.changes}))}updateCommentFollowers({comment:t,followers:e,groupFollowers:s}){const a=this.taskService.getUsersDiff(e,t.thread_followers),i=this.taskService.getUsersDiff(s,t.group_thread_followers);(a.add.length||i.add.length)&&this.store.dispatch(new Mt.t({commentId:t.id,followers:a.add.length?a.add:[],groupFollowers:i.add.length?i.add:[]})),(a.rem.length||i.rem.length)&&this.store.dispatch(new Mt.eg({commentId:t.id,followers:a.rem.length?a.rem:[],groupFollowers:i.rem.length?i.rem:[]}))}emailUserAction(t){return Xo(this,void 0,void 0,function*(){const e=yield this.projectFeatures$.pipe(Object(Ue.a)(1)).toPromise();if(t.type===x.e.FetchThreadedComments||e&&e.emails&&e.emails.enabled)switch(t.type){case x.e.DeleteEmailSignature:this.store.dispatch(new Mt.fc({signatureId:t.signatureId,userId:t.userId}));break;case x.e.FetchAuthedEmails:this.store.dispatch(new Mt.Uc),this.store.dispatch(new Mt.ad);break;case x.e.FetchEmailSignatures:this.store.dispatch(new Mt.ad);break;case x.e.FetchEmailTemplates:this.store.dispatch(new Mt.bd({}));break;case x.e.AddFollowers:this.store.dispatch(new Mt.t({commentId:t.commentId,followers:t.followers}));break;case x.e.FetchEmailContacts:this.store.dispatch(new Mt.Yc({accountId:t.accountId}));break;case x.e.UpdateEmailUser:this.store.dispatch(new Mt.jm({authedEmail:t.emailUser,editAuthEmailPayload:t.editAuthEmailPayload}));break;case x.e.RemoveAuth:this.store.dispatch(new Mt.bc({authedEmail:t.emailUser}));break;case x.e.FetchThreadedComments:this.store.dispatch(new Mt.cd({commentId:t.commentId}));break;case x.e.CreateSignature:this.store.dispatch(new Mt.Hb({payload:t.signaturePayload}));break;case x.e.EditSignature:this.store.dispatch(new Mt.wc({payload:t.signaturePayload,id:t.signatureId,signature:t.signature,userId:t.userId})),t.allSignatures&&this.store.dispatch(new Mt.x({signatureUpdate:[{userId:t.userId,signatures:t.allSignatures}]}));break;case x.e.ThrowBusinessPaywall:this.store.dispatch(new Mt.x({signatureError:!0}));break;case x.e.SendEmail:this.store.dispatch(new Mt.z({commentId:t.comment.id,newComment:t.payload}));break;case x.e.CancelReplyToEmail:this.commentBar.cancelReply();break;case x.e.ReplyToEmail:const e=t.comment.emails[0].full_data,s=t.comment.emails[0].id;let a=this.commentBar.fromEmailUser;if(!a){const t=yield this.authedState$.pipe(Object($e.a)()).toPromise();t&&t.authedEmails&&t.authedEmails.length&&(a=t.authedEmails[0])}const i=Object(xe.b)(e,e);this.commentBar.changeMode(E.b.Email,null,i,e.subject,s,[t.comment])}})}editorTaskCreated(t){this.subtasks&&this.subtasks.addSubtask(t)}createZoomMeeting(){this.zoomService.createZoomMeeting(this.task.id)}removeZoomItem(t){this.zoomService.removeZoomMeeting(this.task.id,encodeURIComponent(t.data.meeting_info.uuid)).pipe(Object(De.a)(this.destroy$)).subscribe(e=>{this.store.dispatch(new Wt.Jb({taskId:this.task.id,histItem:t}))})}addPendingSubtask(t){this.store.dispatch(new Wt.k({subtask:t,parentId:t.parent}))}removePendingSubtask({id:t,parentId:e}){this.store.dispatch(new Wt.Hb({id:t,parentId:e}))}traverseStatuses(t){if(!this.statuses||!this.statuses.length)return;if(this.searchingStatuses&&(!this.filteredStatuses||!this.filteredStatuses.length))return;const e=this.searchingStatuses?this.filteredStatuses:this.statuses,s=this.highlightedStatus?e.findIndex(t=>t.status===this.highlightedStatus.status):0;-1!==s&&("up"===t?this.highlightedStatus=this.highlightedStatus&&this.highlightedStatus.status!==e[0].status?e[s-1]:e[e.length-1]:"down"===t&&(this.highlightedStatus=this.highlightedStatus&&this.highlightedStatus.status!==e[e.length-1].status?e[s+1]:e[0]))}showSlashCommandsOnboarding(t,e,s="bottom",a="cu-slash-command__tooltip"){t&&this.store.pipe(Object(tt.select)(bt.b,{key:e.key}),Object($e.a)(),Object(we.a)(t=>!!t),Object(De.a)(this.destroy$)).subscribe(()=>{this.slashCommandOnboardingService.showPopover(t,this.slashCommandOnboardingContainer,s,e,this.slashCommandsOnboardingTemplate,this.renderer,a),this.store.dispatch(new mt.c({command:e.key}))})}setTaskTitle(t){t&&this.titleService.setTitle(`${t.name} | ${t.custom_id?t.custom_id:"#"+t.id}`)}todoCommentClick(t){t.type===E.c.Attachment?this.previewAttchment({id:t.parent}):this.viewTaskService.onHighlightComment.emit({comment:t})}previewAttchment(t){let e;if(t.id&&this.task){const s=[...this.task.hidden_attachments||[],...this.task.attachments||[]],a=s.findIndex(e=>e.id===t.id);-1!==a&&(e={attachments:s,index:a,taskId:this.task.id,allowComments:!0})}!e&&t.url&&(e={attachments:[Object.assign({date:0,source:1,thumbnail_small:t.url,thumbnail_large:t.url,url:t.url},t)],index:0,taskId:this.task.id,allowComments:!0}),e&&this.attachmentsViewerService.onOpen.emit(e)}toggleThreads(){this.displayUnviewed$.pipe(Object($e.a)()).subscribe(t=>{t?this.store.dispatch(new Wt.V({taskId:this.task.id})):(this.lastCommentDraftTaskId=null,this.commentBar&&this.commentBar.saveCommentToLocalstorage(this.task.id)),this.store.dispatch(new Wt.nc({display:!t}))})}addTaskToAnotherList(t,e){var s,a,i,n,c,o;t&&"subcategory"===t.type&&t.subcategory&&(t.subcategory.id!==this.task.subcategory.id||e)&&(this.task.parent||((null===(s=this.task)||void 0===s?void 0:s.other_subcategories)&&this.updateTaskView({other_subcategories:[...this.task.other_subcategories,t.subcategory]},"addTaskToAnotherList"),this.store.dispatch(new Wt.n({task_ids:[this.task.id],listId:t.subcategory.id}))),this.task.parent&&((null===(i=null===(a=this.task)||void 0===a?void 0:a.parent_task)||void 0===i?void 0:i.other_subcategories)&&this.updateTaskView({parent_task:Object.assign(Object.assign({},null===(n=this.task)||void 0===n?void 0:n.parent_task),{other_subcategories:[...null===(o=null===(c=this.task)||void 0===c?void 0:c.parent_task)||void 0===o?void 0:o.other_subcategories,t.subcategory]})},"addTaskToAnotherList"),this.store.dispatch(new Wt.n({task_ids:[this.task.parent_task.id],listId:t.subcategory.id,subtaskId:this.task.id}))))}removeTasksFromAnotherList(t,e,s){var a,i,n,c,o,r,l,d;if(!(null===(a=this.task)||void 0===a?void 0:a.parent)){if(this.task&&this.task.other_subcategories){const a=this.task.other_subcategories.filter(e=>e.id!==t);this.updateTaskView({other_subcategories:a},"removeTasksFromAnotherList"),e&&this.updateTaskView({other_subcategories:[...this.task.other_subcategories,s.subcategory]},"removeTasksFromAnotherList 2")}this.store.dispatch(new Wt.Lb({task_ids:[this.task.id],listId:t,addAfterDelete:e,addData:s}))}if(this.task.parent){if(null===(n=null===(i=this.task)||void 0===i?void 0:i.parent_task)||void 0===n?void 0:n.other_subcategories){const a=null===(c=this.task.parent_task)||void 0===c?void 0:c.other_subcategories.filter(e=>e.id!==t);this.updateTaskView({parent_task:Object.assign(Object.assign({},null===(o=this.task)||void 0===o?void 0:o.parent_task),{other_subcategories:a})},"removeTasksFromAnotherList"),e&&this.updateTaskView({parent_task:Object.assign(Object.assign({},null===(r=this.task)||void 0===r?void 0:r.parent_task),{other_subcategories:[...null===(d=null===(l=this.task)||void 0===l?void 0:l.parent_task)||void 0===d?void 0:d.other_subcategories,s.subcategory]})},"removeTasksFromAnotherList 2")}this.store.dispatch(new Wt.Lb({task_ids:[this.task.parent_task.id],listId:t,addAfterDelete:e,addData:s,subtaskId:this.task.id}))}}convertHomeList(t){this.store.pipe(Object(tt.select)(Object(Ft.getSubcategoryById)(this.task.subcategory.id,this.task.category.id,this.task.project_id)),Object(Ue.a)(1)).subscribe(e=>{if(e){this.breadcrumbsOverflowDropdown&&this.breadcrumbsOverflowDropdown.close();const s={replaceMultipleLists:!0,type:"subcategory",subcategory:e,removeListData:t};this.task.parent||this.taskService.move(this.task,t,t.category_details,t.project_id,!0,!1,s),this.task.parent&&this.effects.register(this.store.select(Object(qt.d)(this.task.parent)).pipe(Object(Ue.a)(1)),e=>{this.taskService.move(e,t,t.category_details,t.project_id,!0,!1,s)})}})}addFavorite(){this.store.dispatch(Object(rt.d)({task:this.task}))}removeFavorite(t){this.store.dispatch(Object(rt.r)({favoriteId:t})),this.settingsDropdown.close()}startTrialFromTimeTracking(){this.store.dispatch(new Mt.Rk([Object(g.X)({overPaywall:!1}),Object(g.r)()],N.f.BUSINESS))}determineMultipleLists(t,e){var s,a,i;if(!t)return;const n=(null===(a=null===(s=null==t?void 0:t.parent_task)||void 0===s?void 0:s.other_subcategories)||void 0===a?void 0:a.length)?[...t.parent_task.other_subcategories]:(null===(i=t.other_subcategories)||void 0===i?void 0:i.length)?[...t.other_subcategories]:null;if(!n)return;let c;e&&(c=t.parent_task?t.parent_task.other_subcategories.findIndex(t=>t.id===e.id):t.other_subcategories.findIndex(t=>t.id===e.id)),-1!==c&&n.unshift(n.splice(c,1)[0]),n.length<3?(this.multipleListsVisible=Object(re.a)(n.slice(0,2),[t=>t.name.toLowerCase()]),this.multipleListsTruncated=[]):(this.multipleListsVisible=Object(re.a)(n.slice(0,1),[t=>t.name.toLowerCase()]),this.multipleListsTruncated=Object(re.a)(n.slice(1),[t=>t.name.toLowerCase()]))}getLineups(){this.store.dispatch(Object(dt.e)({userId:this.sharedData.userData.value.user.id,teamId:this.sharedData.compatCurrentTeam.id}))}removeFromUsersLineup(){this.store.dispatch(Object(dt.h)({task:this.task,teamId:this.sharedData.compatCurrentTeam.id,userId:this.sharedData.userData.value.user.id})),this.settingsDropdown&&this.settingsDropdown.close()}saveTaskRelationships(t){this.store.dispatch(new Wt.ed({taskId:this.task.id,changes:{},apiPayload:{relationships:t}}))}setTaskRelationships(t){this.store.dispatch(new Wt.gd({task:Object.assign(Object.assign({},this.task),{relationships:t})}))}reloadTaskRelationships(){this.store.dispatch(new Wt.P({taskId:{id:this.task.id},fields:["relationships"]}))}closeSettingsDropdown(){this.settingsDropdown.close()}copyTaskIdClicked(){clearTimeout(this.copyIdTimer),this.currentCustomTaskIdClickIndex===this.customTaskIdClickSteps.length-1?this.currentCustomTaskIdClickIndex=0:this.currentCustomTaskIdClickIndex+=1,1!==this.currentCustomTaskIdClickIndex&&3!==this.currentCustomTaskIdClickIndex||(this.copyIdTimer=setTimeout(()=>{this.currentCustomTaskIdClickIndex=0,this.changeDetector.detectChanges()},3e3))}moveTaskHeaderColumnRightContainer(){const t=this.taskHeaderColumnRight.nativeElement.getBoundingClientRect(),e=this.taskHeaderColumnRightContainer.nativeElement.getBoundingClientRect();t.width<e.width&&this.taskHeaderColumnRight.nativeElement.scrollTo(this.headerColumnRightContainerMoved?{top:0,left:0,behavior:"smooth"}:{top:0,left:t.width,behavior:"smooth"}),this.headerColumnRightContainerMoved=!this.headerColumnRightContainerMoved}onReachEdge(t){this.headerColumnRightContainerMoved="right"===t}_showTaskDeletedModal(){this.editor&&this.editor.stopCodox(),this.modalService.open({blank:!0,modifier:"task-sc__modal",content:this.taskDeleted,preventExternalClick:!0,cannotClose:!0})}_showTaskMergedModal(){this.editor&&this.editor.stopCodox(),this.modalService.open({blank:!0,modifier:"task-sc__modal",content:this.taskMerged,preventExternalClick:!0,cannotClose:!0})}saveTask(t,e=!1){if(!this.task)return;const s=this.task.id,a=!t.content;this.isError=!1,this.changeDetector.markForCheck(),this.notSavedData=null,this.dataService.editTask(s,t,a).subscribe(t=>{this.destroyed?this.taskService.onChange.next({type:"reload",taskIds:[s]}):(this.viewTaskService.task.value.date_updated=t.task.date_updated,this.copyName=t.task.name,this.editor.isSaved=!0,e&&this.applyChanges(t.task,null),this.changeDetector.markForCheck())},t=>{this.isError=!0,this.changeDetector.markForCheck()})}removeDependency(t){const{depends_on:e,dependency:s}=t;if(e===this.task.id||s===this.task.id){const t=this.task.id===s,a=t?e:s;this.task.dependencies=(this.task.dependencies||[]).filter(t=>!t.task||t.task.id!==a),this.task.dependency_state=Object(Tt.k)(this.task.dependencies,this.task.id),this.store.dispatch(new K.g({currentTask:this.task,taskIdToRemove:a,isBlocker:t}))}}addDependency(t){this.store.dispatch(new K.b({currentTask:this.task,selectedTask:t.task||{id:t.after},showingBlockers:"depends_on"===t.field})),this.changeDetector.markForCheck()}updateTaskHeaderColumnsWidth(){const t=this.taskHeader.nativeElement.getBoundingClientRect(),e=this.taskHeaderColumnLeft.nativeElement.getBoundingClientRect(),s=this.taskHeaderColumnRight.nativeElement.getBoundingClientRect(),a=this.taskHeaderColumnRightContainer.nativeElement.getBoundingClientRect();t.width<e.width+s.width&&(this.taskHeaderColumnLeft.nativeElement.style.maxWidth=t.width-s.width+"px"),this.headerColumnRightContainerMovable=s.width<a.width}openPrevNextTask(t){t.pipe(Object($e.a)(),Object(De.a)(this.destroy$)).subscribe(t=>{t&&(this.task&&this.sharedTaskService.onRefresh.emit(this.task),this.sharedTaskService.openTaskModal({id:t.id,customId:t.custom_id,teamId:t.team}))})}applyChanges(t,e,s,a=!1,i=!1){if(t.permissions&&Object(le.a)(t.permissions)&&delete t.permissions,t.customFields&&Object(le.a)(t.customFields)&&delete t.customFields,!this.task||!t)return;this.codoxService.disabled&&t.content&&t.content!==this.task.content&&e&&e.id!==this.sharedData.currentUser.value.id&&(this.wsUserEditing=e,this.debounceEditing.next(!0));let n=Object.assign(Object.assign(Object.assign({},this.task),t),{history:this.task.history});if(this.editor&&i&&this.editor.setInitContent(n.content,!1,!1,!0),(this.isTaskEditing||!t.date_updated||this.lastDescriptionUpdate&&t.date_updated&&this.lastDescriptionUpdate>parseInt(t.date_updated,10))&&this.editor){const t=JSON.stringify(this.editor.editor.getContents());n=Object.assign(Object.assign({},n),{content:t})}this.updateTaskView(n,"applyChanges"),this.changeDetector.markForCheck()}updateSubtask(t){this.store.dispatch(new Wt.cd({subtask:t}))}deleteSubtask(t){if(!this.task||!t||!this.task.subtasks)return;const e=this.task.subtasks.findIndex(e=>e.id===t);-1!==e&&(this.removedSubtasks.push(t),this.store.dispatch(new Wt.Cc({index:e})))}addHistoryItem(t,e=!1){this.task&&t&&(t.comment&&(this.task.history&&-1!==this.task.history.findIndex(e=>e.comment&&Number(e.comment.id)===Number(t.comment.id))?this.viewTaskService.onCommentChange.emit({comment:t.comment}):t.parent_comment?this.task.history&&-1!==this.task.history.findIndex(e=>e.comment&&Number(e.comment.id)===Number(t.parent_comment.id))&&this.viewTaskService.onCommentChange.emit({comment:t.parent_comment}):(e&&!this.task.history.find(t=>"new_activity"===t.field)&&(this.store.dispatch(new Wt.eb),this.handleNewActivityDivider()),this.viewTaskService.onCommentAdd.emit(t)),t.comment.assignee&&this.viewTaskService.onTodoAdd.emit(t.comment)),t.attachments&&this.store.dispatch(new Wt.ab({historyItem:t})))}editComment(t,e,s){this.commentsService.editComment(this.viewTaskService.task.value.id,t,e).pipe(Object(De.a)(this.destroy$)).subscribe(()=>{this.commentUpdateSuccess$.next({changes:e});const a=this.task.history?this.task.history.findIndex(e=>e.comment&&String(e.comment.id)===String(t)):-1;if(-1===a)return;const i=Object.assign(Object.assign({},this.task.history[a].comment),s),n=[...this.task.history.slice(0,a),Object.assign(Object.assign({},this.task.history[a]),{comment:i}),...this.task.history.slice(a+1)];this.updateHistory(n),this.viewTaskService.onCommentChange.emit({comment:i}),s&&s.hasOwnProperty("assignee")&&this.viewTaskService.onTodoAdd.emit(i)})}deleteComment(t){const e=this.task.history.findIndex(e=>e.comment&&e.comment.id===t);-1!==e&&(this.store.dispatch(new Wt.Bc({index:e})),this.viewTaskService.onCommentRemove.emit(t))}addViewing(t){this.store.dispatch(new Wt.o({user:t}))}removeViewing(t){this.store.dispatch(new Wt.Nb({user:t}))}addCommenting(t){this.store.dispatch(new Wt.i({user:t}))}removeCommenting(t){this.store.dispatch(new Wt.Fb({user:t}))}deleteAttachment(t){this.store.dispatch(new Wt.Db({attachmentId:t}))}notifyChanges(t,e,s,a=!1){const i=[];t&&(a?this.taskService.onChange.emit({type:"taskDeleted",payload:{id:t.id}}):i.push(t.id),t.parent&&i.push(t.parent)),e&&(i.push(e.id),e.parent&&i.push(e.parent)),s&&i.push(s),this.taskService.onChange.emit({type:"reload",taskIds:i})}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(Be.a),m.Wb(qe.c),m.Wb(Xe.WebsocketService),m.Wb(Ge.a),m.Wb(Ve.a),m.Wb(b.h),m.Wb(l.l),m.Wb(We.a),m.Wb(Qe.b),m.Wb(Ze.a),m.Wb(Ke.d),m.Wb(Je.a),m.Wb(Ye.a),m.Wb(ts.a),m.Wb(es.a),m.Wb(m.j),m.Wb(ss.a),m.Wb(as.a),m.Wb(m.H),m.Wb(m.B),m.Wb(tt.Store),m.Wb(m.h),m.Wb(is.a),m.Wb(ns.a),m.Wb(G.a),m.Wb(cs.a),m.Wb(os.a),m.Wb(ds),m.Wb(us.a),m.Wb(m.t),m.Wb(hs.b),m.Wb(ms.a),m.Wb(bs.a),m.Wb(ks.a),m.Wb(ps.a),m.Wb(gs.a),m.Wb(b.a),m.Wb(vs.a),m.Wb(fs.a),m.Wb(_s.a),m.Wb(se.a),m.Wb(ys.a),m.Wb(ws.a),m.Wb(Ts.a),m.Wb(Cs.a),m.Wb(Ht.b),m.Wb(Ne.a),m.Wb(He),m.Wb(Ss.a),m.Wb(Is.a),m.Wb($s.a))},t.\u0275cmp=m.Qb({type:t,selectors:[["cu-manager-view-task"]],viewQuery:function(t,e){if(1&t&&(m.jd(Vo,3),m.jd(Wo,3),m.jd(Qo,1),m.jd(Zo,1),m.jd(Ko,3),m.jd(Jo,1),m.jd(Yo,1),m.jd(tr,1),m.jd(er,1),m.jd(sr,3),m.jd(ar,3),m.jd(ir,3),m.jd(nr,3),m.jd(cr,3),m.jd(or,3),m.jd(rr,3),m.jd(lr,3),m.jd(dr,1),m.jd(ur,1),m.jd(hr,1,m.U),m.jd(mr,3,m.U),m.jd(br,1),m.jd(kr,1,m.U),m.jd(pr,3,m.U),m.jd(gr,3,m.U),m.jd(vr,1),m.jd(fr,1),m.jd(_r,1),m.jd(yr,3,m.U),m.jd(wr,1),m.jd(Tr,1),m.jd(Cr,1),m.jd(Sr,1),m.jd(Ir,3),m.jd($r,1),m.jd(Dr,1),m.jd(Or,3,m.U),m.jd(jr,3,m.U),m.jd(Lr,3),m.jd(Ur,1),m.jd(Mr,3),m.jd(Ar,1),m.jd(Er,1),m.jd(Fr,3),m.jd(xr,3),m.jd(Rr,3),m.jd(Pr,3),m.jd(zr,1),m.jd(Nr,1),m.jd(Hr,1),m.jd(Br,3),m.jd(qr,1),m.jd(Xr,3)),2&t){let t;m.Qc(t=m.rc())&&(e.taskContainer=t.first),m.Qc(t=m.rc())&&(e.taskView=t.first),m.Qc(t=m.rc())&&(e.settingsDropdown=t.first),m.Qc(t=m.rc())&&(e.statusDropdown=t.first),m.Qc(t=m.rc())&&(e.taskNameBlock=t.first),m.Qc(t=m.rc())&&(e.taskNameContainer=t.first),m.Qc(t=m.rc())&&(e.editor=t.first),m.Qc(t=m.rc())&&(e.createTaskModal=t.first),m.Qc(t=m.rc())&&(e.attachmentsComponent=t.first),m.Qc(t=m.rc())&&(e.taskSelectModal=t.first),m.Qc(t=m.rc())&&(e.taskCopyModal=t.first),m.Qc(t=m.rc())&&(e.templateSaveModal=t.first),m.Qc(t=m.rc())&&(e.templateLoadModal=t.first),m.Qc(t=m.rc())&&(e.taskNotFound=t.first),m.Qc(t=m.rc())&&(e.taskDeleted=t.first),m.Qc(t=m.rc())&&(e.taskMerged=t.first),m.Qc(t=m.rc())&&(e.mainScrollbar=t.first),m.Qc(t=m.rc())&&(e.fullScreenColumn=t.first),m.Qc(t=m.rc())&&(e.goalsDisplay=t.first),m.Qc(t=m.rc())&&(e.goalsContainer=t.first),m.Qc(t=m.rc())&&(e.conflictManagement=t.first),m.Qc(t=m.rc())&&(e.timeTrackingDisplay=t.first),m.Qc(t=m.rc())&&(e.timeTrackingContainer=t.first),m.Qc(t=m.rc())&&(e.confirmSubtaskModal=t.first),m.Qc(t=m.rc())&&(e.confirmMergeSubtaskModal=t.first),m.Qc(t=m.rc())&&(e.prioritiesDisplay=t.first),m.Qc(t=m.rc())&&(e.dueDateDisplay=t.first),m.Qc(t=m.rc())&&(e.startDateDisplay=t.first),m.Qc(t=m.rc())&&(e.authToggl=t.first),m.Qc(t=m.rc())&&(e.checklist=t.first),m.Qc(t=m.rc())&&(e.subtasks=t.first),m.Qc(t=m.rc())&&(e.commentBar=t.first),m.Qc(t=m.rc())&&(e.taskBreadcrumbs=t.first),m.Qc(t=m.rc())&&(e.slashCommandTemplate=t.first),m.Qc(t=m.rc())&&(e.slashCommand=t.first),m.Qc(t=m.rc())&&(e.confirmConvertTaskToListModal=t.first),m.Qc(t=m.rc())&&(e.slashCommandContainer=t.first),m.Qc(t=m.rc())&&(e.slashCommandOnboardingContainer=t.first),m.Qc(t=m.rc())&&(e.slashCommandsOnboardingTemplate=t.first),m.Qc(t=m.rc())&&(e.statusContainer=t.first),m.Qc(t=m.rc())&&(e.assignContainer=t.first),m.Qc(t=m.rc())&&(e.dependenciesEmptyContainer=t.first),m.Qc(t=m.rc())&&(e.dependenciesFilledContainer=t.first),m.Qc(t=m.rc())&&(e.taskHeader=t.first),m.Qc(t=m.rc())&&(e.taskHeaderColumnLeft=t.first),m.Qc(t=m.rc())&&(e.taskHeaderColumnRight=t.first),m.Qc(t=m.rc())&&(e.taskHeaderColumnRightContainer=t.first),m.Qc(t=m.rc())&&(e.dueDatePickerDropdown=t.first),m.Qc(t=m.rc())&&(e.breadcrumbsOverflowDropdown=t.first),m.Qc(t=m.rc())&&(e.autosize=t.first),m.Qc(t=m.rc())&&(e.sharePublicTaskModal=t.first),m.Qc(t=m.rc())&&(e.statusSearchInput=t.first),m.Qc(t=m.rc())&&(e.taskInner=t.first)}},hostBindings:function(t,e){1&t&&m.qc("resize",function(){return e.onResize()},!1,m.Tc)("keydown",function(t){return e.keyEvent(t)},!1,m.Sc)},inputs:{showBranding:"showBranding"},features:[m.Hb([G.a,He,Ht.b])],decls:271,vars:456,consts:function(){let t,e,s,a,i,n,c,o,r,l,d,u,h,b,k,p,g,v,f,_,y,w,T,C,S,I,$,D,O,j,L,U,M,A,E,F,x,R,P,z,N,H,B,q,X,G,V,W,Q,Z,K,J,Y,tt,et,st,at,it,nt,ct,ot,rt,lt,dt,ut,ht,mt,bt,kt,pt,gt,vt,ft,_t,yt;return t=$localize`:@@cu-manager-view-task__tooltip-msg_toggle-task-status␟a7ee89eacb00ca165737314b86b9063458740eef␟6623422346457901123:Toggle task status`,e=$localize`:@@common_created␟b3a630cb95c1ee9c44421bc9e3041c5c0ccdf8fe␟3063417831554945260: Created `,s=$localize`:@@cu-manager-view-task__multiple-lists-truncated␟f48353dae85651c651bf8fc02b9d929a295a1907␟6020378320452750716:${"\ufffd0\ufffd"}:INTERPOLATION: more`,a=$localize`:@@task-container__header-add-parent-to-other-list␟7c78eb030ff276b3e3afc262a599658070462bba␟335002542769040985:Add parent task to another List`,i=$localize`:@@cu-manager-view-task__tooltip-msg_close-window␟acbab52eee9a6b76c1ff514fe5d48b1a67c6edfa␟250900385078604198:Close window`,n=$localize`:@@cu-manager-view-task__list-archived␟7091d816cc6e1e4e7f352b7eeabd58765a35c0cb␟83745518825334875: This List has been archived. `,c=$localize`:@@common_task-archived␟2709cdac859f2c575664b4595249e5a42d29a620␟3464527111689780032:This task has been archived`,o=$localize`:@@common_unarchive␟9dc54f68a4f9128e0bcd407661bcd9d47e2b6bbc␟1121513541518618634:Unarchive`,r=$localize`:@@cu-manager-view-task__multiple-lists-truncated␟f48353dae85651c651bf8fc02b9d929a295a1907␟6020378320452750716:${"\ufffd0\ufffd"}:INTERPOLATION: more`,l=$localize`:@@common_add-task-to-another-list␟406fec1dd31d39a4acecbe416137bb2fcd1ceee3␟4472317156794512913:Add task to another List`,d=$localize`:@@common_details␟6ede27c676e90206dcb1d13c0ab4a0b1e300246c␟6527497165101693196: Details `,u=$localize`:@@common_activity␟80f382d2bb47fce97da0deb26c4cca3e47db92dd␟6258827109327905402: Activity `,h=$localize`:@@common_add-edit-statuses␟e004a171a05ea51c6570c52be80103e320a4b184␟4179116217858523980:Add/Edit Statuses`,b=$localize`:@@common_completed␟a7c328c4773db932ff14a1954e15e43dca58e7b7␟1161299114153631702:Completed`,k=$localize`:@@cu-manager-view-task__mark-closed-status␟dc6dea36976d6542197e1767a6554eece35cc066␟6899096220279199666:Mark ${"\ufffd0\ufffd"}:INTERPOLATION:`,p=$localize`:@@cu-manager-view-task__tooltip-msg_share-task-publicly␟22364a0f2b5fb52f22d07425f2afb9c6e7e6298c␟1513279545156716653:Share task publicly`,g=$localize`:@@cu-manager-view-task__tooltip-msg_copy-custom-id␟d2b6df09b8f325ec1936e875b151fed732314e2f␟8277271925409116555:Copy Custom Id`,v=$localize`:@@cu-manager-view-task__tooltip-msg_copy-id␟d173704e81f6f79a91e62e07fcb6985b5ad2ab8c␟3155017682811599376:Copy Id`,f=$localize`:@@common_copied␟9d7d060a35f87a0e57b9a018abceccb4eca35809␟8388164689999588576: Copied! `,_=$localize`:@@common_share␟41a3e84890151b8d52fc572d1514e93c39eb915b␟155729934453858786: Share `,y=$localize`:@@cu-manager-view-task__tooltip-msg_task-settings␟a950a1bc70687bcf5d6420b6b53abf5d72679012␟646242993248357589:Task Settings`,w=$localize`:@@common_copy-url␟6e632baeee46b344077a135cd9da61786d3fa907␟2184619916211262318:Copy URL`,T=$localize`:@@common_copy-task-id␟4e0fe85f1f6654aa5770cf07e8aedf57457b82d5␟2053193386661149821:Copy Task ID`,C=$localize`:@@cu-manager-view-task__tooltip-msg_print-task␟96a3bf06fc14cd3bae9efe03a0ffdd472f3ad69a␟6625205447616433068:Print Task`,S=$localize`:@@common_task-attach-emails␟f6b1251581b91ce8db40f497aa8c9fbac92d30da␟6027892015749269765:Attach emails to this task`,I=$localize`:@@common_archive␟22c9be90eb27c5c613348fbb621792223afe5d1b␟1055686627716339120:Archive`,$=$localize`:@@common_convert-to-subtask␟3916b1455dfc18c5fc81b97ef389fb97d6168be4␟8336415405087508721: Convert to subtask `,D=$localize`:@@common_convert-to-list␟6cd6ea709709c10077026a8d35633fe6c66663fb␟4535599600168826076: Convert to List `,O=$localize`:@@common_convert-to-task␟5912dda1810cc32a354f44e58de9b6b12f6a585f␟5689819310728123890: Convert to task `,j=$localize`:@@common_move-subtask␟35092320a55f4b60b6c7be731fba1a6a958183ef␟5176588084394961184: Move subtask `,L=$localize`:@@common_dependencies␟7a1d237e967145f70a99479e8eeba8b9750eef22␟6544818366763395717: Dependencies `,U=$localize`:@@common_duplicate␟3e2f85783a2c0604860194b4a90b125d23b42133␟4767934017214078759: Duplicate `,M=$localize`:@@common_move␟acfa0db3a379784d2560856fb3b010e15732df25␟7683985074456874200: Move `,A=$localize`:@@common_merge␟31baca9848c6e95ad3da80f251221c6731f21035␟9059451053078352380: Merge `,E=$localize`:@@common_template-center␟221d5de3e055d05a4ea7845744b0aad938becea5␟4035702629885806365: Template Center `,F=$localize`:@@common_template-center␟b6ffc699126f518bd27ac1e3755b9afbba809ad1␟3162109098077202524: Template Center `,x=$localize`:@@common_browse-templates␟6f0b7ac3116fcb803cd1c1e7d0324dd66fa9d179␟8017941186241379259: Browse Templates `,R=$localize`:@@common_save-as-template␟fe1f8a805067161b400e2574522f2d6203762016␟4429830486897299990: Save as Template `,P=$localize`:@@common_update-existing-template␟f8f7d3db59876428a732793bae7da00feb8fce65␟8422967604035669706: Update existing Template `,z=$localize`:@@common_custom-fields␟af26ce44b11f6afb7c9b28f491af337f75a61cc9␟8318735468794824668: Custom Fields `,N=$localize`:@@common_add-to-lineup␟d1d986f94bed5ca00cddce20dd48177097362274␟4179109647608860284: Add to LineUp `,H=$localize`:@@cu-manager-view-task__remove-from-lineup␟d2bf31ae985d78bfbb760f72f8c6687003ecc6ac␟8677277004690661337: Remove from my LineUp `,B=$localize`:@@common_mark-as-milestone--unmark␟5ad1c02ec51bff3b755103c50703e7efe53e28a4␟622192319703679473:Unmark as Milestone`,q=$localize`:@@common_mark-as-milestone␟a18d638905902caa1b6a8a4eacaf53bdbf7ba4f6␟5393567772415328091:Mark as Milestone`,X=$localize`:@@common_add-to-favorites␟7ee2d5cabe951242de4ce58da1dee6c21f679ace␟3935420083278865242: Add to Favorites `,G=$localize`:@@common_remove-from-favorites␟90428ad96da1c3e01a66f47f44debbe35bbc5d42␟7841481188595526315: Remove from Favorites `,V=$localize`:@@common_sharing-and-permissions␟82e77510802971345018a4fb8194df024a749b02␟8101808915738431356: Sharing & Permissions `,W=$localize`:@@common_time-tracked␟404acec519cca4dd470d9e5491ad38b564b31616␟708273473338928952:Time Tracked`,Q=$localize`:@@common_start-date␟3e6acd589d8b82cafd8546409da0a36469d297a0␟3604386807230411192:Start Date`,Z=$localize`:@@cu-manager-view-task__title_due-date␟0b073facaa35281c1c556bdbc899c7954b1531e9␟3239966994466365662:Due Date `,K=$localize`:@@common_due-date-1␟2e8989faee1f152aa7c8ef12fb79e49c29da9390␟1917979079769004212:Due Date`,J=$localize`:@@common_comment-attach-files␟acce74fa5c117cd0d3d26f2515d4d9d69180ba8a␟3869172817826006669: Attach files to a comment `,Y=$localize`:@@common_task-attach-files␟a3668b96d0d6c81be575ea06a4a1f8b7c2db6011␟5220925262343561441: Attach files to this task `,tt=$localize`:@@common_unpin-cover-image␟6f19d99ed1a000f15ba2ae42076e57e84918ded5␟3457653311699668094:Unpin cover image`,et=$localize`:@@common_dependencies␟473fb06a7b7b3992af493059e8f9c8c74f369a97␟4045087308145757242:Dependencies`,st=$localize`:@@cu-manager-view-task__tooltip-msg_mentioned-in-docs␟2602639f9e32e427cb83588d3d4286e8a19d173a␟2178641018162838507:Mentioned in Docs`,at=$localize`:@@cu-manager-view-task__offline-editing-not-allowed␟5358730156d44db28c4a94b19d7bd2c485fbfe24␟8992135750557018712: Offline: you can't edit this task `,it=$localize`:@@cu-manager-view-task__permission_read-only␟d255fbcff6f75829e075342fd7bdbac9f2fb1332␟3345060909788013650: You can only read this task `,nt=$localize`:@@cu-manager-view-task__permission_comment-only␟6a09d0b8289d96a3d09ff4fd18dbffe724144bf4␟3144532163697197620: You can only comment on this task `,ct=$localize`:@@cu-manager-view-task__threads-banner-text_threads-only␟02d0e23f392a31ffaff309b6eb3cb86642da9243␟4417811293907123476: Only showing threads. `,ot=$localize`:@@cu-manager-view-task__threads-banner-link_turn-off␟fcbbe28bb74bd035d922af39f18d3c5574a9a379␟7140294256511835375: Click here to turn off `,rt=$localize`:@@cu-manager-view-task__new-threads-count␟87a9fbb8819b02513c012348777080a829078aa8␟702121145500533021: New Threads `,lt=$localize`:@@cu-manager-view-task__close-threads␟51aaad604b3c61f164203480d1da14df2756f650␟2445204539680286503: Close Threads `,dt=$localize`:@@cu-manager-view-task__unviewed-comments␟ffe388413c4b8e09cc81666927fb99906eab83f6␟1465960235172452610:No unviewed comments`,ut=$localize`:@@common_task-attach-files␟d751853f42849fddb48609618bc0720c1cc6c1b1␟3256197746479573728: Attach files to this task `,ht=$localize`:@@cu-manager-view-task__user-deleted-task␟812b9106a43a086766ab2dc5a70f62ac0f5c25ae␟116142308278580666:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT: deleted this task. `,mt=$localize`:@@common_close-task␟91927a23d28e84d4a1104ccdabbe20e3a775898f␟1802786495518573051: Close task `,bt=$localize`:@@cu-manager-view-task__user-merged-task␟25f525f6104973cd7ae9a8abe362fcf66542eef4␟6805426187194724031:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT: merged this task. `,kt=$localize`:@@common_close-task␟3319ab3489ecbb43fcca9b027d80c6ec48472ea8␟274001304470184826:Close task`,pt=$localize`:@@cu-manager-view-task__view-merged-task␟3fc7b554c7ab4ff2c53ad017a430e34b0ba1b01c␟1301187134017209985: View merged task `,gt=$localize`:@@cu-manager-view-task__load-template-notice-text␟990f50512f27986483054f89c05008eddb2e010f␟8270610482790219526:${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:Description${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT:, ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:subtasks${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT:, ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:tags${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT:, ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:attachments${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT: and ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:checklists${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT: will be ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:${"[\ufffd#8\ufffd|\ufffd#15\ufffd]"}:START_UNDERLINED_TEXT:merged${"[\ufffd/#8\ufffd|\ufffd/#15\ufffd]"}:CLOSE_UNDERLINED_TEXT:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT: into this task.${"\ufffd#9\ufffd\ufffd/#9\ufffd"}:LINE_BREAK:${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:Assignees${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT:, ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:watchers${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT:, ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:priority${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT:, and ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:dates${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT: will be ${"[\ufffd#2\ufffd|\ufffd#3\ufffd|\ufffd#4\ufffd|\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#10\ufffd|\ufffd#11\ufffd|\ufffd#12\ufffd|\ufffd#13\ufffd|\ufffd#14\ufffd]"}:START_BOLD_TEXT:${"[\ufffd#8\ufffd|\ufffd#15\ufffd]"}:START_UNDERLINED_TEXT:replaced${"[\ufffd/#8\ufffd|\ufffd/#15\ufffd]"}:CLOSE_UNDERLINED_TEXT:${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#10\ufffd|\ufffd/#11\ufffd|\ufffd/#12\ufffd|\ufffd/#13\ufffd|\ufffd/#14\ufffd]"}:CLOSE_BOLD_TEXT: in this task by the template. `,gt=m.lc(gt),vt=$localize`:@@cu-manager-view-task__convert-to-task-prompt␟ee460900aa5c2ba56e01f3b289ea98c757579780␟5928995166054191496: Are you sure want to convert this task into a List? `,ft=$localize`:@@cu-manager-view-task__convert-to-task-warning␟768959d25c9903204ffdc208b5681a8df31b9e65␟1972237046408777881:${"\ufffd#6\ufffd"}:START_TAG_DIV:Important:${"\ufffd/#6\ufffd"}:CLOSE_TAG_DIV: You will lose all threaded comments. This action can't be undone. `,_t=$localize`:@@common_cancel␟a5433ae2324496bea9537caa5e8a2719d8e958d8␟4134917114666618814: Cancel `,yt=$localize`:@@common_convert-to-list␟f89b10eeeafafaf40194e2dda636137cc0ed086d␟7401801921190053140: Convert to List `,[[1,"task-container",3,"ngClass","cuHoverKeyDown","hoverKeyDown"],["taskContainer",""],["class","task__parent",3,"task__parent_readonly",4,"ngIf"],["class","task-container__header-wrapper",4,"ngIf"],[1,"task",3,"ngClass"],["taskView",""],[3,"spaceId","tags","tagsLoading","display","statusList","selectedTasks","onlyDeleteIfOwner","canDelete","meUser","taskView","subtaskView","parentTask","inputFeatures","onSyncTaskView",4,"ngIf"],[1,"task__inner",3,"ondrop"],["taskInner",""],["class","task-mobile-tabs",4,"ngIf"],[1,"task__header","task__mobile-display-for-details"],["taskHeader",""],[1,"task__column","task__toolbar"],["taskHeaderColumnLeft",""],["class","task-status",3,"ngClass","task-status_light","ngStyle",4,"ngIf","ngIfElse"],["noChangeStatus",""],["class","done-task-btn cu-hidden-print",3,"cuTooltip","click",4,"ngIf"],["class","task-status task-status_toggle","cuTooltip",t,3,"ngClass","ngStyle","click",4,"ngIf","ngIfElse"],["noChangeSimple",""],[1,"cu-task-header__section"],["assignContainer",""],[3,"loading","users","multiChoice","modifier","selectedUsers","showReassign","enableFirstSelection","weights","weightType","userGroups","selectedUserGroups","task","subcategory","onChange","onUserGroupsChanged","onClose",4,"ngIf","ngIfElse"],["noChangeAssignee",""],["class","cu-task-info cu-task-info_row",3,"cu-hidden-print",4,"ngIf"],[1,"cu-task-header__delimiter"],["class","cu-task-header__section cu-task-header__section_rightside cu-hidden-print",4,"ngIf"],["cuPreventScrollNavigation","","cuScrollDetector","",1,"task__column","task__toolbar","task__toolbar_last","cu-hidden-print",3,"verticalScrollingDetection","horizontalScrollingDetection","offsetLeft","offsetRight","onReachRight","onReachLeft"],["taskHeaderColumnRight",""],[1,"task__toolbar-shadow"],[1,"task__toolbar-container"],["taskHeaderColumnRightContainer",""],[1,"cu-task-info","cu-task-info_row","cu-task-info_task-created",3,"cuTooltip","tooltipAllowHtmlRememberToEscapeXss","tooltipLifeTime"],[1,"cu-task-info__key"],e,[1,"cu-task-info__value"],["class","cu-task-info cu-task-info_time-tracking",4,"ngIf"],["class","cu-task-info cu-task-info_row cu-task-info__recurring cu-task-info__time-estimates",4,"ngIf"],["class","cu-task-info cu-task-info_row cu-task-info__time-estimates",4,"ngIf"],["class","cu-task-info cu-task-info_row",4,"ngIf"],["class","cu-task-info cu-task-info_row cu-task-info_due-date",4,"ngIf"],[4,"ngIf"],["class","cu-task-header__task-watchers",3,"allUsers","canAddFollowers","canAddSelf","currentUser","followers","showLastViewed","lastViewedMap","allUserGroups","groupFollowers","task","subcategory","followersChanged","groupFollowersChanged",4,"ngIf"],["class","task__toolbar-move",3,"task__toolbar-move_moved","click",4,"ngIf"],["cuDropArea","",1,"task__body"],["class","task-dropzone",4,"ngIf"],["mwlResizable","",1,"task-column","task-column_main","task__mobile-display-for-details",3,"resizeStart","resizing","resizeEnd"],[3,"sharingEntity","sharingLink","seoOptimized","openModalOnClick","onLinkClick",4,"ngIf"],[1,"cu-scrollbar","task-column__body","task-column__body-scroll-view"],["mainColumn",""],["class","cu-task__cover-image",3,"click",4,"ngIf"],["class","task-column__body-toolbar",4,"ngIf"],[3,"mainTask","dependencies","onLoadDependencies","onClick",4,"ngIf"],["class","task-column__body-dependencies",4,"ngIf"],[1,"task-name-block"],["taskNameBlock",""],[3,"taskView","status","itemClass","hasCustomType","customType","isSimpleStatus","showSettings","disabled",4,"ngIf"],["class","task-name-block__icon","icon","cu2-subtask",3,"task-name-block__icon_custom-type",4,"ngIf"],["class","task-name-block__icon task-name-block__icon_lock","icon","lock5",3,"task-name-block__icon_custom-type",4,"ngIf"],["inputClass","task-name",1,"task-name-container",3,"ngClass","task","weights","dateFormatting","militaryTime","meUser","points","users","statuses","team","priorities","tags","userGroups","allowedCommands","currentValues","options","applyCommand","onOpen"],[1,"task-name__overlay",3,"ngStyle","innerHTML"],["rows","1","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10","data-gramm","false","cuSlashCommandInput","","type","text","class","task-name",3,"ngStyle","value","paste","input","keydown","compositionstart","compositionend","blur","focus",4,"ngIf","ngIfElse"],["readonlyTaskTemplate",""],[4,"ngIf","ngIfThen"],["class","editor-loader",4,"ngIf"],[3,"permissions","disconnected","task","customFields","subcategory","forViewTask","team","refreshTaskCustomFields","updateCustomFieldValue",4,"ngIf"],[3,"mainScrollbar","userGroups","onlyDeleteIfOwner","canDelete","meUser","canAddChecklists","weights","canAddSubtasks","moveSubtasks","multiTaskEnabled","taskAccess","listAccess","subtasksOpenMap","timeEstimatesDataMap","features","openStatus","closedStatus","statuses","users","tags","tagsLoadingMap","disconnected","pendingSubtasks","rollups","onCreateChecklistFromTemplate","onCreateChecklist","onConflict","onRemoveSubtask","subtaskCreated","onUpdateTask","onTimeEstimatChange","commentUpdateSuccess","commentClick","onStatusSettings","onLazyLoad","onReloadTask","onAddPendingTask","onTimeEstimateAction","onRemovePendingTask","onToggleSubtask","onSetSubtaskMap",4,"ngIf"],[3,"itemData","deletePermission","spaceData","teamId","isNewTask","newTaskMembers","checklists",4,"ngIf"],["class","cu-task-relationships_view-task",3,"relationships","isOffline","integrationsEnabled","team","user","hostTask","features","project","forViewTask","scrollContainer","isInViewPortEnabled","saveRelationshipChanges","setRelationships","reloadRelationshipLinks","cuIsInViewport","linkClicked",4,"ngIf"],["parentType","task",3,"cu-hidden-print","scrollContainer","uploaderUrl","attachments","coverImage","parentId","uniqueId","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","onlyDeleteIfOwner","canDelete","isInViewPortEnabled","allowNewDoc","onRemove","attachmentsChanged","onSetCoverImage","storageLimitExceeded","cuIsInViewport","onCreateDoc","onUpdateView",4,"ngIf"],["class","task-column__footer cu-hidden-print",3,"no-permission","task-column__footer_hide-description",4,"ngIf"],["class","task__resize-divider","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["class","task-column task-column_activity task__mobile-display-for-activity",3,"width",4,"ngIf"],["class","task__inner task__full-editor","cuDropArea","",4,"ngIf"],[1,"task-backdrop",3,"ngClass","click"],["class","task-container__control preview-back","tooltipLifeTime","15000","tooltipModifier","task-container__control-tooltip_right",3,"cuTooltip","click",4,"ngIf"],["class","task-container__control preview-forward","tooltipLifeTime","15000","tooltipModifier","task-container__control-tooltip_left",3,"cuTooltip","click",4,"ngIf"],["authToggl",""],["taskSelectModal",""],["taskNotFound",""],["taskDeleted",""],["taskMerged",""],["confirmSubtaskModal",""],["confirmMergeSubtaskModal",""],["taskCopyModal",""],["templateSaveModal",""],["templateLoadModal",""],["conflictManagement",""],["slashCommandsOnboardingTemplate",""],["taskEditor",""],["slashCommandTemplate",""],["slashCommandContainer",""],["slashCommandOnboardingContainer",""],[3,"onChange"],["sharePublicTaskModal",""],["confirmConvertTaskToListModal",""],[1,"task__parent"],[1,"task__parent-content",3,"click"],["class","task__parent-icon","icon","arrow-back",4,"ngIf"],[1,"task__parent-name"],["class","task-container__header-add-list__category-list",3,"selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","displaySearch","showTaskCount","listsToDeny","onSelect",4,"ngIf"],["icon","arrow-back",1,"task__parent-icon"],[4,"ngFor","ngForOf"],["cuDropdown","",3,"dropdownCloseOnInsideClick",4,"ngIf"],[1,"task-container__header-task-breadcrumbs",3,"canMove","collapsible","otherList","showMover","showRemoveFromList","removeFromList","convertHomeList"],["cuDropdown","",3,"dropdownCloseOnInsideClick"],["breadcrumbsOverflowDropdown","dropdown"],["cuDropdownToggle","",1,"breadcrumbs__link","breadcrumbs__link-dropdown"],s,["class","task-container__header-other-list-dropdown-menu",3,"width",4,"cuDropdownMenu"],[1,"task-container__header-other-list-dropdown-menu"],[1,"task-container__header-task-breadcrumbs","overflow",3,"canMove","collapsible","otherList","showMover","showRemoveFromList","overflowed","removeFromList","convertHomeList"],[1,"task-container__header-add-list__category-list",3,"selectableProject","defaultProject","selectedCategory","selectedSubcategory","singleCategory","displaySearch","showTaskCount","listsToDeny","onSelect"],["cuTooltip",a,"tooltipModifier","tooltip_left",1,"task-container__header-add-list"],["icon","cu2-plus-2"],[1,"task-container__header-wrapper"],["class","task-minimize cu-hidden-print","draggable","false","tooltipModifier","tooltip_nowrap",3,"ngClass","cuTooltip","click",4,"ngIf"],["draggable","false","cuTooltip",i,"tooltipModifier","tooltip_left-nowrap",1,"task-close","cu-hidden-print",3,"click"],["icon","cu2-close-2",1,"task-close__icon"],["class","task-container__header cu-hidden-print",3,"mouseover","mouseout",4,"ngIf"],["draggable","false","tooltipModifier","tooltip_nowrap",1,"task-minimize","cu-hidden-print",3,"ngClass","cuTooltip","click"],["width","16px","height","13px","xmlns","http://www.w3.org/2000/svg",1,"task-minimize__btn"],["d","M5.2.72L9.7 5.3 12 3v6H6l2.3-2.3-4.58-4.5a1 1 0 0 1 0-1.41L3.78.7A1 1 0 0 1 5.2.72zM15 11H1a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2z","fill-rule","evenodd"],["width","13px","height","13px","version","1.1","xmlns","http://www.w3.org/2000/svg",1,"task-minimize__icon","task-minimize__icon__open",3,"click"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-1665.000000, -37.000000)"],["transform","translate(1665.000000, 37.000000)"],["fill","#6ACA4F","cx","6.5","cy","6.5","r","6.5"],["stroke","#FFFFFF","stroke-width","1.25","stroke-linecap","round","points","4 7.18688562 5.65667732 8.66666667 9.5 5"],["width","13px","height","13px","version","1.1","xmlns","http://www.w3.org/2000/svg",1,"task-minimize__icon","task-minimize__icon__close","cu-hidden-print",3,"mouseenter","mouseleave","click"],["fill","#E8364C","cx","6.5","cy","6.5","r","6.5"],["transform","translate(4.000000, 4.000000)","stroke","#FFFFFF"],["d","M0,0 L5,5"],["d","M0,0 L5,5","transform","translate(2.500000, 2.500000) scale(-1, 1) translate(-2.500000, -2.500000) "],[1,"task-container__header","cu-hidden-print",3,"mouseover","mouseout"],[3,"canMove","showRemoveFromList","showMover","isMain","disconnected"],["taskBreadcrumbs",""],["class","task-archive-message",4,"ngIf","ngIfElse"],["taskArchived",""],[1,"task-archive-message"],["icon","info",1,"task-archive-message__icon"],[1,"task-archive-message__text"],n,["class","task-archive-message",4,"ngIf"],c,[1,"task-archive-message__text-unarchive",3,"click"],o,r,["cuTooltip",l,"tooltipModifier","tooltip_left",1,"task-container__header-add-list"],[3,"spaceId","tags","tagsLoading","display","statusList","selectedTasks","onlyDeleteIfOwner","canDelete","meUser","taskView","subtaskView","parentTask","inputFeatures","onSyncTaskView"],[1,"task-mobile-tabs"],[1,"task-mobile-tabs__tab",3,"ngClass","click"],d,u,[1,"task-status",3,"ngClass","ngStyle"],["statusContainer",""],["cuDropdown","",1,"cu-dropdown_pointer",3,"dropdownDisabled","dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["statusDropdown","dropdown"],["cuDropdownToggle",""],[1,"task-status__value"],["class","cu-dropdown__menu_overflow-hidden status-list status-list__task-view",4,"cuDropdownMenu"],["class","task-status__divider cu-hidden-print",4,"ngIf"],["class","task-status__controls cu-hidden-print",3,"cuTooltip","click",4,"ngIf"],[1,"cu-dropdown__menu_overflow-hidden","status-list","status-list__task-view"],[3,"autoFocus","activeStatus","statuses","hasCustomType","groupByStatusType","onChange"],["statusList",""],["class","cu-task-row-status__settings","icon","cog","cuTooltip",h,3,"click",4,"ngIf"],["icon","cog","cuTooltip",h,1,"cu-task-row-status__settings",3,"click"],[1,"task-status__divider","cu-hidden-print"],[1,"task-status__controls","cu-hidden-print",3,"cuTooltip","click"],["class","task-status no-permission",3,"ngClass","ngStyle",4,"ngIf"],[1,"task-status","no-permission",3,"ngClass","ngStyle"],[1,"done-task-btn","cu-hidden-print",3,"cuTooltip","click"],["icon","check",1,"done-task-btn__icon"],["cuTooltip",t,1,"task-status","task-status_toggle",3,"ngClass","ngStyle","click"],["icon","check",1,"task-status__icon"],[4,"ngIf","ngIfElse"],["markClosedStatus",""],b,k,["class","task-status task-status_toggle no-permission",3,"ngClass","ngStyle",4,"ngIf"],[1,"task-status","task-status_toggle","no-permission",3,"ngClass","ngStyle"],[3,"users","multiChoice","modifier","selectedUsers","showReassign","enableFirstSelection","weights","weightType","userGroups","selectedUserGroups","task","subcategory","onChange","onUserGroupsChanged","onClose"],[3,"users","showUserRemover","assignIcon","multiChoice","modifier","avatarSize","showDropdown","userGroups","onUserRemove","onUserGroupRemove"],[3,"users","canAssign","showUserRemover","assignIcon","multiChoice","modifier","avatarSize","showDropdown","userGroups"],[1,"cu-task-info","cu-task-info_row"],[1,"cu-task-info__divider"],["prioritiesDisplay",""],[3,"prioritySelected","priorities","onChange",4,"ngIf","ngIfElse"],["noPriority",""],[3,"prioritySelected","priorities","onChange"],["modifier","cu-priorities-view__icon-task-view","selectModifier","cu-priorities-view__icon-select-large","placeModifier","view-task",3,"alwaysShowDashed","priority","readOnly","remove","removePriority"],["modifier","cu-priorities-view__icon-task-view","selectModifier","cu-priorities-view__icon-select-large","placeModifier","view-task",3,"alwaysShowDashed","hideIfEmpty","readOnly","priority"],[1,"cu-task-header__section","cu-task-header__section_rightside","cu-hidden-print"],["class","cu-task-header__control cu-task-header__control_public-sharing",4,"ngIf"],["class","cu-task-header__control cu-task-header__control_public-sharing",3,"click",4,"ngIf"],["class","cu-task-header__control cu-task-header__control_public-sharing","cuTooltip",p,3,"cu-task-header__control_active","click",4,"ngIf"],["class","cu-dropdown_center cu-dropdown_pointer cu-dropdown_pointer task__settings","cuDropdown","",3,"dropdownOpen",4,"ngIf"],["class","cu-git-info-icon","integrationName","github",3,"task","click",4,"ngIf"],["class","cu-git-info-icon","integrationName","gitlab",3,"task","click",4,"ngIf"],["class","cu-git-info-icon","integrationName","bitbucket",3,"task","click",4,"ngIf"],["integrationName","github",1,"cu-git-info-icon",3,"task","click"],["integrationName","gitlab",1,"cu-git-info-icon",3,"task","click"],["integrationName","bitbucket",1,"cu-git-info-icon",3,"task","click"],[1,"cu-task-header__control","cu-task-header__control_public-sharing"],["ngxClipboard","","cuClipboardCopied","",1,"cu-task-header__control_public-sharing-text","cu-task-header__control_public-sharing-text-copy",3,"cuTooltip","cbContent","cbOnSuccess"],["mainIdClipboard","cuClipboardCopied"],[1,"cu-task-header__control","cu-task-header__control_public-sharing",3,"click"],["cuTooltip",g,"class","cu-task-header__control_public-sharing-text cu-task-header__control_public-sharing-text-copy","ngxClipboard","","cuClipboardCopied","",3,"cbContent","cbOnSuccess",4,"ngIf"],["cuTooltip",v,"class","cu-task-header__control_public-sharing-text cu-task-header__control_public-sharing-text-copy","ngxClipboard","","cuClipboardCopied","",3,"cbContent","cbOnSuccess",4,"ngIf"],["class","cu-task-header__control_public-sharing-text cu-task-header__control_public-sharing-text-copy",4,"ngIf"],["cuTooltip",g,"ngxClipboard","","cuClipboardCopied","",1,"cu-task-header__control_public-sharing-text","cu-task-header__control_public-sharing-text-copy",3,"cbContent","cbOnSuccess"],["customIdClipboard","cuClipboardCopied"],["cuTooltip",v,"ngxClipboard","","cuClipboardCopied","",1,"cu-task-header__control_public-sharing-text","cu-task-header__control_public-sharing-text-copy",3,"cbContent","cbOnSuccess"],[1,"cu-task-header__control_public-sharing-text","cu-task-header__control_public-sharing-text-copy"],f,["cuTooltip",p,1,"cu-task-header__control","cu-task-header__control_public-sharing",3,"click"],[3,"icon"],[1,"cu-task-header__control_public-sharing-text"],_,["cuDropdown","",1,"cu-dropdown_center","cu-dropdown_pointer","cu-dropdown_pointer","task__settings",3,"dropdownOpen"],["settingsDropdown","dropdown"],["cuDropdownToggle","","cuTooltip",y,1,"cu-task-header__control",3,"contextmenu"],[1,"icon-ellipsis"],[1,"icon-ellipsis__dot"],[4,"cuDropdownMenu"],[1,"cu-task-settings-list"],["draggable","false",1,"nav-menu-item","nav-menu-item__top-choices","nav-menu-item_parent"],["cuLink","","draggable","false","ngxClipboard","","cuTooltip",w,"tooltipModifier","tooltip_near",1,"nav-menu-item","nav-menu-item__top-choices-option",3,"cbContent"],["icon","cu2-copy-link2",1,"nav-menu-item__icon","nav-menu-item__icon_copy-link",3,"ngStyle"],["cuLink","","draggable","false","ngxClipboard","","cuTooltip",T,"tooltipModifier","tooltip_near",1,"nav-menu-item","nav-menu-item__top-choices-option",3,"cbContent"],["icon","hash-thin",1,"nav-menu-item__icon","nav-menu-item__icon_copy-link",3,"ngStyle"],["class","nav-menu-item nav-menu-item__top-choices-option","cuLink","","cuTooltip",C,"tooltipModifier","tooltip_near",3,"click",4,"ngIf"],["class","nav-menu-item nav-menu-item__top-choices-option","cuLink","","ngxClipboard","","tooltipModifier","tooltip_near","cuTooltip",S,3,"cbContent","cbOnSuccess",4,"ngIf"],["class","nav-menu-item nav-menu-item__top-choices-option","cuLink","","cuTooltip",I,"tooltipModifier","tooltip_near",3,"click",4,"ngIf"],["class","nav-menu-item nav-menu-item__top-choices-option","cuLink","","tooltipModifier","tooltip_near",3,"disabled-action","cuTooltip","click",4,"ngIf"],["cuLink","","class","cu-task-settings-list__item",3,"click",4,"ngIf"],["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownCloseOnModal","dropdownPlacement"],["cuLink","","class","cu-task-settings-list__item",4,"ngIf"],[3,"users","multiChoice","selectedUsers","enableFirstSelection","weights","weightType","dropdownPlacement","onChange","onClose",4,"ngIf"],["cuLink","","class","cu-task-settings-list__item task__flex-only-mobile",4,"ngIf"],["cuLink","","class","nav-menu-item nav-menu-item__milestone",3,"click",4,"ngIf"],["class","nav-menu-item nav-menu-item__add-to-favorites","cuLink","","draggable","false",3,"click",4,"ngIf"],["class","nav-menu-item","cuLink","","draggable","false",3,"click",4,"ngIf"],["cuLink","","class","cu-task-settings-list__item cu-task-settings-list__item_share",3,"click",4,"ngIf"],["cuLink","","cuTooltip",C,"tooltipModifier","tooltip_near",1,"nav-menu-item","nav-menu-item__top-choices-option",3,"click"],["icon","print",1,"nav-menu-item__icon","nav-menu-item__icon_copy-link",3,"ngStyle"],["cuLink","","ngxClipboard","","tooltipModifier","tooltip_near","cuTooltip",S,1,"nav-menu-item","nav-menu-item__top-choices-option",3,"cbContent","cbOnSuccess"],["icon","cu2-envelope-light",1,"nav-menu-item__icon","nav-menu-item__icon_email"],["cuLink","","cuTooltip",I,"tooltipModifier","tooltip_near",1,"nav-menu-item","nav-menu-item__top-choices-option",3,"click"],["icon","archive2",1,"nav-menu-item__icon","nav-menu-item__icon_copy-link"],["cuLink","","tooltipModifier","tooltip_near",1,"nav-menu-item","nav-menu-item__top-choices-option",3,"cuTooltip","click"],["icon","cu2-trash",1,"nav-menu-item__icon","nav-menu-item__icon_remove"],["cuLink","",1,"cu-task-settings-list__item",3,"click"],["icon","cu2-convert-to-subtask",1,"cu-task-settings-list__icon"],[1,"cu-task-settings-list__text"],$,["icon","cu2-convert-to-list",1,"cu-task-settings-list__icon"],D,["icon","convert-to-task",1,"cu-task-settings-list__icon"],O,["icon","move",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_move"],j,["icon","cu2-dependency",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_dependency"],L,["icon","cu2-duplicate",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_copy"],U,["icon","cu2-move-2",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_move"],M,["icon","cu2-merge",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_merge"],A,["cuLink","",1,"cu-task-settings-list__item"],["icon","cu2-magic",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_templates"],E,[1,"cu-dropdown-list-item__submenu",3,"icon"],[1,"nav-menu-item__title"],F,["icon","template-center",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_use-template"],x,[1,"nav-menu-item__separator","nav-menu-item__separator-margins"],["icon","cu2-save2",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_save-template"],R,["icon","cu2-refresh",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_save-template"],P,["icon","edit-custom-fields",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_custom-fields"],z,[3,"users","multiChoice","selectedUsers","enableFirstSelection","weights","weightType","dropdownPlacement","onChange","onClose"],["icon","lineup",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_lineup"],N,["icon","lineup",1,"cu-task-settings-list__icon","cu-task-settings-list__icon_custom-fields"],H,["cuLink","",1,"cu-task-settings-list__item","task__flex-only-mobile"],["cuLink","",1,"nav-menu-item","nav-menu-item__milestone",3,"click"],["icon","milestone",1,"nav-menu-item__icon","nav-menu-item__icon_milestone"],[1,"nav-menu-item__name"],["markAsMilestone",""],B,q,["cuLink","","draggable","false",1,"nav-menu-item","nav-menu-item__add-to-favorites",3,"click"],["icon","cu2-star2",1,"nav-menu-item__icon","nav-menu-item__icon_favorites"],X,["cuLink","","draggable","false",1,"nav-menu-item",3,"click"],G,["cuLink","",1,"cu-task-settings-list__item","cu-task-settings-list__item_share",3,"click"],["icon","share",1,"cu-task-settings-list__icon"],V,[1,"cu-task-info","cu-task-info_time-tracking"],["class","cu-task-info__time-tracking-container",4,"ngIf"],["id","timeTrackingItem","style","display: none",4,"ngIf"],["cuTooltip","Toggl",1,"toggl-container",3,"mouseenter"],["class","cu-task-info__harvest",4,"ngIf"],[1,"cu-task-info__time-tracking-container"],["noTimeEntryTmpl",""],[1,"cu-task-info__time-tracking-container-bottom"],[3,"disabled","totalTimeTracked","taskId","task","taskName","taskStatusColor","spaceId","teamId","defaultProject","timeSpentList","currentEntry","user","rolledUpSpent","showManualTime","tags","showActiveTimer","team","forceLog","onChange","onTimeTrackerAction","onStartTrial","onClose","onDisplayEntry"],[3,"totalTimeTracked","running","displayLabel","showTracker","useTimeTrackerDuration","forceDisplayTime",4,"ngIf"],["icon","cu2-caret-down",1,"cu-task-info__time-tracking-container-arrow-down",3,"click"],W,[3,"totalTimeTracked","running","displayLabel","showTracker","useTimeTrackerDuration","forceDisplayTime"],["id","timeTrackingItem",2,"display","none"],[1,"task-name"],[1,"space-name"],[1,"cu-task-info__harvest"],["id","newly-added-timer",1,"harvest-timer"],["cuTooltip","Harvest"],[1,"icon_time-traking-harvest"],["viewBox","0 0 36 36","xmlns","http://www.w3.org/2000/svg"],["fill","none","fill-rule","evenodd"],["d","M18,35.5 C27.6649831,35.5 35.5,27.6649831 35.5,18 C35.5,8.33501688 27.6649831,0.5 18,\n                          0.5 C8.33501688,0.5 0.5,8.33501688 0.5,18 C0.5,27.6649831 8.33501688,35.5 18,35.5 Z","stroke-dasharray","3",1,"cu-stroke","icon_time-traking-harvest_bkg"],["d","M24.8308594,27 L11.1691406,27 C9.9703125,27 9,26.0296875 9,24.8308594 L9,11.1691406 C9,\n                          9.9703125 9.9703125,9 11.1691406,9 L24.8308594,9 C26.0296875,9 27,9.9703125 27,11.1691406 L27,\n                          24.8308594 C27,26.0296875 26.0296875,27 24.8308594,27 Z","fill","#f36c00","fill-rule","nonzero",1,"icon_time-traking-harvest_color"],["d","M24.8308594,27 L11.1691406,27 C9.9703125,27 9,26.0296875 9,24.8308594 L9,11.1691406 C9,\n                          9.9703125 9.9703125,9 11.1691406,9 L24.8308594,9 C26.0296875,9 27,9.9703125 27,11.1691406 L27,\n                          24.8308594 C27,26.0296875 26.0296875,27 24.8308594,27 Z","fill-rule","nonzero",1,"cu-fill","icon_time-traking-harvest_grey"],["fill","#FFF","fill-rule","nonzero","d","M19.4238281 12.5859375L19.4238281 16.9277344 16.5761719 16.9277344 16.5761719 12.5859375 14.4667969 12.5859375 14.4667969 23.3789062 16.5761719 23.3789062 16.5761719 18.7417969 19.4238281 18.7417969 19.4238281 23.3789062 21.5332031 23.3789062 21.5332031 12.5859375z"],[1,"cu-task-info","cu-task-info_row","cu-task-info__recurring","cu-task-info__time-estimates"],["class","cu-task-info__divider",4,"ngIf"],[3,"permissions","task","team","user","timeEstimateData","rollup","onTimeEstimateAction",4,"ngIf"],[3,"permissions","task","team","user","timeEstimateData","rollup","onTimeEstimateAction"],[1,"cu-task-info","cu-task-info_row","cu-task-info__time-estimates"],[3,"task","isTaskView",4,"ngIf"],[3,"task","isTaskView"],["startDateDisplay",""],[1,"cu-task-info__divider","cu-task-info__divider_due-date"],[1,"due-date_view-task",3,"task","statuses","selectedDate","startDate","dueTimeExists","startTimeExists","readOnly","forceStart","forceDue","recurringOptions","recurringLegacyOptions","allowLegacyRecurring","recurringLegacyData","showRecurring","legacyRecurring","onChange","onDropdownClose","onDropdownOpen","click","onRecurringChange","onRecurringLegacyChange"],["modifier","due-date_view-task","dateTimeTitle",Q,3,"selectedDate","showTime","forStart","onChange"],[1,"cu-task-info","cu-task-info_row","cu-task-info_due-date"],["dueDateDisplay",""],["class","cu-task-info__divider cu-task-info__divider_due-date",4,"ngIf"],["class","cu-task-info__arrow-due-date",4,"ngIf"],[1,"due-date_view-task",3,"selectedDate","startDate","dueTimeExists","startTimeExists","forceStart","forceDue","readOnly","recurringOptions","recurringLegacyOptions","allowLegacyRecurring","recurringLegacyData","task","statuses","showRecurring","legacyRecurring","onChange","onDropdownClose","onDropdownOpen","onRecurringChange","onRecurringLegacyChange"],["dueDatePickerDropdown",""],[1,"cu-task-info__due-date-dropdown"],[3,"cuTooltip",4,"ngIf"],["modifier","due-date_view-task","dateTimeTitle",Z,"dateTimeTooltip",K,3,"selectedDate","showTime","isOnTime","noPermission","noHighlight","task","showQuickClear","onChange"],[1,"cu-task-info__arrow-due-date"],["icon","arrow-due-date"],[3,"cuTooltip"],["icon","recurring",1,"cu-task-info__recurring-no-due"],[1,"cu-task-info"],[3,"taskId"],[1,"cu-task-header__task-watchers",3,"allUsers","canAddFollowers","canAddSelf","currentUser","followers","showLastViewed","lastViewedMap","allUserGroups","groupFollowers","task","subcategory","followersChanged","groupFollowersChanged"],[1,"task__toolbar-move",3,"click"],[1,"task__toolbar-move-icon",3,"icon"],[1,"task-dropzone"],["class","task-dropzone__column task__mobile-display-for-details","cuDropArea","",3,"width","ondrop",4,"ngIf"],["cuDropArea","",1,"task__mobile-display-for-activity",3,"ondrop"],[1,"task-dropzone__content"],["icon","chevron-top",1,"task-dropzone__icon"],[1,"task-dropzone__text"],J,["cuDropArea","",1,"task-dropzone__column","task__mobile-display-for-details",3,"ondrop"],Y,[3,"sharingEntity","sharingLink","seoOptimized","openModalOnClick","onLinkClick"],[1,"cu-task__cover-image",3,"click"],[3,"src"],["cuTooltip",tt,"icon","pin",1,"cu-task__cover-image-pin",3,"cuPreventDefault","click"],[1,"task-column__body-toolbar"],["class","cu-tags-view__container",3,"cu-tags-badge-view-only",4,"ngIf","ngIfElse"],["noTags",""],["class","task-column__body-toolbar-dependencies","cuTooltip",et,3,"click",4,"ngIf"],[1,"cu-tags-view__container"],[3,"tags","tagsLoadingMap","taskTags","taskId","spaceId","spaceAccess","canManageTag","canDelete","onlyDeleteIfOwner","userId","readonly","onOpen","onPage","onChange","onDelete","onDeleteFromSpace","onRename","onColorChange",4,"ngIf"],[3,"tags","tagsLoadingMap","taskTags","taskId","spaceId","spaceAccess","canManageTag","canDelete","onlyDeleteIfOwner","userId","readonly","onOpen","onPage","onChange","onDelete","onDeleteFromSpace","onRename","onColorChange"],[3,"tags","availableTags","modifier","canAddTag","canRemoveTag","canManageTag","taskId","spaceId","spaceAccess","preventBadgeClick","canDelete","onlyDeleteIfOwner","userId","onDelete","onRename","onDeleteFromSpace","onColorChange"],[3,"tags","modifier","readOnly",4,"ngIf"],[3,"tags","modifier","readOnly"],["cuTooltip",et,1,"task-column__body-toolbar-dependencies",3,"click"],["dependenciesEmptyContainer",""],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 37 37"],["d","M17.5,35 C27.1649831,35 35,27.1649831 35,17.5 C35,7.83501688 27.1649831,0 17.5,\n                    0 C7.83501688,0 0,7.83501688 0,17.5 C0,27.1649831 7.83501688,35 17.5,35 Z","stroke-dasharray","3","transform","translate(1 1)",1,"cu-stroke"],[1,"cu-stroke"],["d","M1.575,3.9375 C1.01581169,3.9375 0.5625,3.43382034 0.5625,2.8125 L0.5625,1.6875 C0.5625,\n                      1.06617966 1.01581169,0.5625 1.575,0.5625 L9.675,0.5625 C10.2341883,0.5625 10.6875,\n                      1.06617966 10.6875,1.6875 L10.6875,2.8125 C10.6875,3.43382034 10.2341883,3.9375 9.675,\n                      3.9375 L1.575,3.9375 Z","transform","translate(9.5 9.5)"],["d","M4.95,10.6875 C4.3908117,10.6875 3.9375,10.1838203 3.9375,9.5625 L3.9375,8.4375 C3.9375,\n                      7.81617966 4.3908117,7.3125 4.95,7.3125 L13.05,7.3125 C13.6091883,7.3125 14.0625,\n                      7.81617966 14.0625,8.4375 L14.0625,9.5625 C14.0625,10.1838203 13.6091883,10.6875 13.05,\n                      10.6875 L4.95,10.6875 Z","fill-rule","nonzero","transform","translate(9.5 9.5)",1,"cu-fill"],["d","M8.325,17.4375 C7.7658117,17.4375 7.3125,16.9338203 7.3125,16.3125 L7.3125,\n                      15.1875 C7.3125,14.5661797 7.7658117,14.0625 8.325,14.0625 L16.425,14.0625 C16.9841883,\n                      14.0625 17.4375,14.5661797 17.4375,15.1875 L17.4375,16.3125 C17.4375,16.9338203 16.9841883,\n                      17.4375 16.425,17.4375 L8.325,17.4375 Z","transform","translate(9.5 9.5)"],[3,"mainTask","dependencies","onLoadDependencies","onClick"],[1,"task-column__body-dependencies"],[3,"dependencies","mainTask","tasksLinked","goals","teamId","canOpenDependencies","taskBlockers","tasksBlocked","modifier","onOpenDependencies","onCloseTask","onLoadDependencies"],[1,"task-column__body-dependencies-popover"],["dependenciesFilledContainer",""],[3,"taskView","status","itemClass","hasCustomType","customType","isSimpleStatus","showSettings","disabled"],["icon","cu2-subtask",1,"task-name-block__icon"],["icon","lock5",1,"task-name-block__icon","task-name-block__icon_lock"],["rows","1","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10","data-gramm","false","cuSlashCommandInput","","type","text",1,"task-name",3,"ngStyle","value","paste","input","keydown","compositionstart","compositionend","blur","focus"],["taskNameContainer","","taskNameAutosize","cdkTextareaAutosize"],[1,"editor-loader"],[1,"editor-loader__row","editor-loader__row_lead"],[1,"editor-loader__row"],[1,"editor-loader__row","editor-loader__row_last"],[3,"permissions","disconnected","task","customFields","subcategory","forViewTask","team","refreshTaskCustomFields","updateCustomFieldValue"],[3,"mainScrollbar","userGroups","onlyDeleteIfOwner","canDelete","meUser","canAddChecklists","weights","canAddSubtasks","moveSubtasks","multiTaskEnabled","taskAccess","listAccess","subtasksOpenMap","timeEstimatesDataMap","features","openStatus","closedStatus","statuses","users","tags","tagsLoadingMap","disconnected","pendingSubtasks","rollups","onCreateChecklistFromTemplate","onCreateChecklist","onConflict","onRemoveSubtask","subtaskCreated","onUpdateTask","onTimeEstimatChange","commentUpdateSuccess","commentClick","onStatusSettings","onLazyLoad","onReloadTask","onAddPendingTask","onTimeEstimateAction","onRemovePendingTask","onToggleSubtask","onSetSubtaskMap"],["subtasks",""],[3,"itemData","deletePermission","spaceData","teamId","isNewTask","newTaskMembers","checklists"],[1,"cu-task-relationships_view-task",3,"relationships","isOffline","integrationsEnabled","team","user","hostTask","features","project","forViewTask","scrollContainer","isInViewPortEnabled","saveRelationshipChanges","setRelationships","reloadRelationshipLinks","cuIsInViewport","linkClicked"],["parentType","task",3,"scrollContainer","uploaderUrl","attachments","coverImage","parentId","uniqueId","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","onlyDeleteIfOwner","canDelete","isInViewPortEnabled","allowNewDoc","onRemove","attachmentsChanged","onSetCoverImage","storageLimitExceeded","cuIsInViewport","onCreateDoc","onUpdateView"],["attachmentsComponent",""],[1,"task-column__footer","cu-hidden-print"],[3,"attachmentsLength","badgeVisible","uniqueId","relationshipsLength","relationshipsBadgeVisible","onFilesAdded","onBadgeClick","onRelationshipsBadgeClick",4,"ngIf"],[1,"task-uploads-badge__container-right"],[3,"taskMentions"],["label",st,3,"links","linkIcon","color","isDocMentions","linkClicked",4,"ngIf"],["class","task-uploads-badge__divider",4,"ngIf"],[3,"links","linkIcon","label","color","linkClicked",4,"ngFor","ngForOf","ngForTrackBy"],[3,"attachmentsLength","badgeVisible","uniqueId","relationshipsLength","relationshipsBadgeVisible","onFilesAdded","onBadgeClick","onRelationshipsBadgeClick"],["label",st,3,"links","linkIcon","color","isDocMentions","linkClicked"],[1,"task-uploads-badge__divider"],[3,"links","linkIcon","label","color","linkClicked"],[3,"linkIcon","label","color","isOneItemStale","url"],["class","task-column__footer-permission task-column__footer-permission_read-only",4,"ngIf"],["class","task-column__footer-permission task-column__footer-permission_comment-only",4,"ngIf"],[1,"task-column__footer-permission","task-column__footer-permission_read-only"],["icon","cu2-cloud",1,"task-column__footer-permission-icon","task-column__footer-permission-icon_offline"],[1,"task-column__footer-permission-description"],at,["icon","lock6",1,"task-column__footer-permission-icon"],it,[1,"task-column__footer-permission","task-column__footer-permission_comment-only"],nt,["mwlResizeHandle","",1,"task__resize-divider",3,"resizeEdges"],[1,"task-column","task-column_activity","task__mobile-display-for-activity"],["class","task__threads-banner",4,"ngIf"],["class","task__threads-toggle",3,"cuTooltip","click",4,"ngIf"],["class","task__threads-body",4,"ngIf"],[1,"task__threads-banner"],[1,"task__threads-banner-text"],ct,[1,"task__threads-banner-link",3,"click"],ot,[1,"task__threads-toggle",3,"cuTooltip","click"],[1,"task__threads-icon",3,"icon"],["class","task__threads-text",4,"ngIf"],["class","task__threads-badge",4,"ngIf"],[1,"task__threads-text"],rt,[1,"task__threads-badge"],[1,"task__threads-close",3,"icon"],lt,[1,"task__threads-body"],["placeholder",dt,3,"parentId","type","members","assignedComments","filters","canComment","user","popupInBody","readOnly","permissions","canManageEmail","allowLink","allowAddToContent","allowAddToInbox","taskId","showUserGroups","taskUserGroups","onAddToContent"],["task-history","",1,"task-column__body",3,"coverImage","statuses","team","weights","canManageEmail","permissions","readonly","permissionLevel","allowEmailFeature","authedState","project","taskUserGroups","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","members","dueDateEnabled","userGroups","commentUpdateSuccess","onAttachmentsUpdate","onUpdateHistory","onCommentReply","onAddToContent","onScrollToComment","onEmailUserAction","onRemoveZoom","onAttachmentClick","onUpdateCommentFollowers","onAddToInbox"],["class","task-column__footer second cu-hidden-print",4,"ngIf"],[1,"task-column__footer","second","cu-hidden-print"],[1,"task__overlay",3,"usersViewing","usersTyping"],["editorId","comment",3,"parentId","attachmentType","taskId","allowEmailFeature","canManageEmail","isMainTask","loading","showReplyTo","project","weights","projectMembers","uploaderUrl","allowAddEmailFollowers","allowAddFollowers","id","disableUserMention","staticToolbar","slashCommandSupport","slashCommandCustom","threadFollowers","user","userGroups","authedState","signatures","team","allowNewDoc","task","isGuest","subcategory","taskUserGroups","suggestedEmails","onSubmit","onSubmitToDesc","onScrollToComment","onCreateDoc","onEmailUserAction",4,"ngIf","ngIfElse"],["blankCommentBar",""],["editorId","comment",3,"parentId","attachmentType","taskId","allowEmailFeature","canManageEmail","isMainTask","loading","showReplyTo","project","weights","projectMembers","uploaderUrl","allowAddEmailFollowers","allowAddFollowers","id","disableUserMention","staticToolbar","slashCommandSupport","slashCommandCustom","threadFollowers","user","userGroups","authedState","signatures","team","allowNewDoc","task","isGuest","subcategory","taskUserGroups","suggestedEmails","onSubmit","onSubmitToDesc","onScrollToComment","onCreateDoc","onEmailUserAction"],["commentBar",""],[1,"comment-bar","no-permission"],["cuDropArea","",1,"task__inner","task__full-editor"],[1,"task__full-editor-name"],["fullScreenColumn",""],["cuDropArea","",1,"task-dropzone__container",3,"ondrop"],ut,["tooltipLifeTime","15000","tooltipModifier","task-container__control-tooltip_right",1,"task-container__control","preview-back",3,"cuTooltip","click"],["icon","angle-right-no-padding",1,"task-container__control-icon"],["tooltipLifeTime","15000","tooltipModifier","task-container__control-tooltip_left",1,"task-container__control","preview-forward",3,"cuTooltip","click"],[3,"task","defaultProject","requireCreateAndEdit","searchSubtasks","expandableSubtasks","excludeParentTask","taskIdsToExclude","description","notice","errorMsg","onSelect"],[1,"task-sc__inner"],[1,"task-sc__title"],ht,[1,"task-sc__options"],[1,"cu-btn","cu-btn_status","cu-btn_option","cu-btn_cancel",3,"click"],mt,bt,[1,"cu-btn__text"],kt,[1,"cu-btn","cu-btn_status","cu-btn_option",3,"click"],pt,[3,"copyName","space","onTaskCopy"],["type","task",3,"task","members","user","onOpenTemplateManagerModal"],[1,"task__template-desc","task__template-desc-new"],gt,[3,"initTemplateType","space","task","onLoadDataFromTemplate"],[3,"command"],["class","cu-task-editor","uploadType","1","editorId","content",3,"isSaved","isError","userEditing","emitContentImmediately","canEdit","weights","content","entityId","attachmentType","hideUnfurl","hideBlockHandle","customTaskIdPath","allowCreateSubtask","project","users","taskUserGroups","linkToBlockId","uploadParent","userGroups","taskAccess","modifier","isShowHistory","isShowFullScreen","isFullScreen","alwaysEnabled","historyItems","scrollContainer","enableUserMentions","slashCommandCustom","editorToken","allowPinToolbar","pinToolbarKey","defaultCategory","defaultSubcategory","stickyTopPX","defaultEmbedSize","onFileAdded","onSave","onCancel","onChange","onUpdateContent","onTaskCreated","onUpdate","toggleFullscreen","onScrollToComment","onLoadHistory",4,"ngIf"],["uploadType","1","editorId","content",1,"cu-task-editor",3,"isSaved","isError","userEditing","emitContentImmediately","canEdit","weights","content","entityId","attachmentType","hideUnfurl","hideBlockHandle","customTaskIdPath","allowCreateSubtask","project","users","taskUserGroups","linkToBlockId","uploadParent","userGroups","taskAccess","modifier","isShowHistory","isShowFullScreen","isFullScreen","alwaysEnabled","historyItems","scrollContainer","enableUserMentions","slashCommandCustom","editorToken","allowPinToolbar","pinToolbarKey","defaultCategory","defaultSubcategory","stickyTopPX","defaultEmbedSize","onFileAdded","onSave","onCancel","onChange","onUpdateContent","onTaskCreated","onUpdate","toggleFullscreen","onScrollToComment","onLoadHistory"],["editor",""],[3,"alwaysVisible","dropdownPlacement","task","team","dateFormatting","militaryTime","meUser","users","points","statuses","tags","priorities","attachments","allowedCommandsExtra","weights","userGroups","allowTurnIntoCommands","allowedCommands","currentValues","options","applyCommand","cancelCommand","onOpen","onPage"],["slashCommand",""],[3,"isPublic","isSeoOptimised","sharingLink","publicToken","task","team","defaultPublicTaskFields","publicTaskFields","sharingExpiresOn","setIsPublic","setIsSeoOptimised","setPublicTaskFields","setSharingExpiresOn","setDefaultPublicTaskFields","upgradeClicked"],[1,"cu-conflict-management"],[1,"cu-conflict-management__warning-img"],[1,"cu-conflict-management__warning","cu-conflict-management__warning_black"],vt,[1,"cu-conflict-management__proceed"],ft,[1,"cu-conflict-management__proceed-header"],[1,"move-category__footer"],[1,"cu-btn","cu-btn_font-size-15","cu-conflict-management__cancel",3,"click"],_t,[1,"cu-btn","cu-btn_font-size-15","cu-btn_red","cu-btn_spinner",3,"click"],yt]},template:function(t,e){if(1&t&&(m.cc(0,"div",0,1),m.qc("hoverKeyDown",function(){return e.toggleMe()}),m.vc(2,"async"),m.vc(3,"async"),m.bd(4,Yr,21,35,"div",2),m.vc(5,"async"),m.vc(6,"async"),m.bd(7,hl,7,6,"div",3),m.cc(8,"div",4,5),m.bd(10,ml,10,31,"cu-dashboard-table-toolbar",6),m.vc(11,"async"),m.cc(12,"div",7,8),m.qc("ondrop",function(t){return e.attachmentsComponent.addFiles(t)}),m.bd(14,kl,5,6,"div",9),m.vc(15,"async"),m.cc(16,"div",10,11),m.cc(18,"div",12,13),m.vc(20,"async"),m.vc(21,"async"),m.bd(22,wl,17,29,"div",14),m.vc(23,"async"),m.vc(24,"async"),m.vc(25,"async"),m.bd(26,Sl,4,7,"ng-template",null,15,m.cd),m.bd(28,Il,3,3,"div",16),m.vc(29,"async"),m.vc(30,"async"),m.vc(31,"async"),m.vc(32,"async"),m.vc(33,"async"),m.bd(34,jl,9,14,"div",17),m.vc(35,"async"),m.vc(36,"async"),m.vc(37,"async"),m.vc(38,"async"),m.bd(39,Ul,5,9,"ng-template",null,18,m.cd),m.cc(41,"div",19,20),m.bd(43,Al,14,49,"cu-user-and-groups-list-dropdown",21),m.vc(44,"async"),m.bd(45,El,4,17,"ng-template",null,22,m.cd),m.bc(),m.bd(47,Pl,10,10,"div",23),m.vc(48,"async"),m.Xb(49,"div",24),m.bd(50,jd,17,27,"div",25),m.vc(51,"async"),m.bc(),m.cc(52,"div",26,27),m.qc("onReachRight",function(){return e.onReachEdge("right")})("onReachLeft",function(){return e.onReachEdge("left")}),m.Xb(54,"div",28),m.cc(55,"div",29,30),m.cc(57,"div",31),m.vc(58,"async"),m.cc(59,"div"),m.cc(60,"div",32),m.gc(61,33),m.bc(),m.cc(62,"div",34),m.vc(63,"async"),m.dd(64),m.vc(65,"momentDate"),m.vc(66,"async"),m.vc(67,"async"),m.cc(68,"span"),m.dd(69),m.vc(70,"momentDate"),m.vc(71,"async"),m.vc(72,"async"),m.bc(),m.bc(),m.bc(),m.bc(),m.bd(73,xd,12,15,"div",35),m.vc(74,"async"),m.vc(75,"async"),m.bd(76,zd,7,10,"div",36),m.vc(77,"async"),m.vc(78,"async"),m.bd(79,Bd,5,6,"div",37),m.vc(80,"async"),m.vc(81,"async"),m.bd(82,Xd,21,53,"div",38),m.vc(83,"async"),m.vc(84,"async"),m.bd(85,Qd,42,94,"div",39),m.vc(86,"async"),m.vc(87,"async"),m.vc(88,"async"),m.bd(89,Zd,5,3,"ng-container",40),m.vc(90,"async"),m.Xb(91,"div",24),m.bd(92,Kd,14,37,"cu-entity-followers",41),m.vc(93,"async"),m.bd(94,Jd,2,3,"div",42),m.bc(),m.bc(),m.bc(),m.cc(95,"div",43),m.bd(96,tu,12,17,"div",44),m.vc(97,"async"),m.vc(98,"async"),m.cc(99,"div",45),m.qc("resizeStart",function(t){return e.resizeStart(t)})("resizing",function(t){return e.resizing(t)})("resizeEnd",function(){return e.resizeEnded()}),m.vc(100,"async"),m.vc(101,"async"),m.vc(102,"async"),m.bd(103,eu,3,8,"cu-view-public-sharing-banner",46),m.vc(104,"async"),m.vc(105,"async"),m.vc(106,"async"),m.cc(107,"div",47,48),m.bd(109,su,4,3,"div",49),m.vc(110,"async"),m.bd(111,ru,14,21,"div",50),m.vc(112,"async"),m.bd(113,lu,3,6,"cu-task-blockers-counter",51),m.vc(114,"async"),m.vc(115,"async"),m.vc(116,"async"),m.bd(117,du,13,27,"div",52),m.vc(118,"async"),m.vc(119,"async"),m.vc(120,"async"),m.vc(121,"async"),m.vc(122,"async"),m.cc(123,"div",53,54),m.bd(125,uu,3,12,"cu-task-row-status",55),m.vc(126,"async"),m.vc(127,"async"),m.bd(128,hu,3,6,"div",56),m.vc(129,"async"),m.bd(130,mu,3,6,"div",57),m.vc(131,"async"),m.cc(132,"cu-slash-command",58),m.qc("applyCommand",function(t){return e.applySlashCommand(t)})("onOpen",function(){return e.openSlashCommands()}),m.vc(133,"async"),m.vc(134,"async"),m.vc(135,"async"),m.vc(136,"async"),m.vc(137,"async"),m.vc(138,"async"),m.vc(139,"async"),m.vc(140,"async"),m.vc(141,"async"),m.vc(142,"membersToUsers"),m.vc(143,"async"),m.vc(144,"async"),m.vc(145,"async"),m.vc(146,"async"),m.vc(147,"async"),m.vc(148,"async"),m.vc(149,"async"),m.vc(150,"async"),m.vc(151,"async"),m.vc(152,"async"),m.vc(153,"async"),m.vc(154,"async"),m.vc(155,"async"),m.vc(156,"async"),m.vc(157,"async"),m.vc(158,"async"),m.vc(159,"async"),m.vc(160,"async"),m.vc(161,"async"),m.vc(162,"async"),m.vc(163,"async"),m.vc(164,"async"),m.vc(165,"async"),m.vc(166,"async"),m.vc(167,"async"),m.vc(168,"async"),m.vc(169,"async"),m.vc(170,"async"),m.vc(171,"async"),m.vc(172,"async"),m.vc(173,"async"),m.vc(174,"async"),m.vc(175,"async"),m.vc(176,"async"),m.vc(177,"async"),m.vc(178,"async"),m.vc(179,"async"),m.vc(180,"async"),m.vc(181,"async"),m.vc(182,"async"),m.vc(183,"async"),m.vc(184,"async"),m.vc(185,"async"),m.vc(186,"async"),m.vc(187,"async"),m.vc(188,"async"),m.vc(189,"async"),m.Xb(190,"div",59),m.vc(191,"async"),m.vc(192,"async"),m.vc(193,"async"),m.vc(194,"async"),m.vc(195,"async"),m.vc(196,"async"),m.vc(197,"async"),m.vc(198,"async"),m.vc(199,"linkify"),m.vc(200,"async"),m.bd(201,ku,12,22,"textarea",60),m.vc(202,"async"),m.vc(203,"async"),m.bd(204,pu,3,3,"ng-template",null,61,m.cd),m.bc(),m.bc(),m.bd(206,gu,1,0,"ng-container",62),m.bd(207,vu,9,0,"div",63),m.vc(208,"async"),m.bd(209,fu,7,19,"cu-task-custom-fields",64),m.vc(210,"async"),m.bd(211,yu,34,89,"cu-subtasks",65),m.vc(212,"async"),m.vc(213,"async"),m.bd(214,wu,6,17,"cu-checklist2",66),m.vc(215,"async"),m.vc(216,"async"),m.vc(217,"async"),m.vc(218,"async"),m.bd(219,Cu,17,47,"cu-task-relationships",67),m.vc(220,"async"),m.bd(221,Su,21,54,"cu-attachments",68),m.vc(222,"async"),m.bc(),m.bd(223,Fu,27,50,"div",69),m.bd(224,Ru,1,2,"div",70),m.vc(225,"async"),m.bc(),m.bd(226,Ku,12,20,"div",71),m.vc(227,"async"),m.bc(),m.bc(),m.bd(228,th,11,12,"div",72),m.bc(),m.bc(),m.cc(229,"div",73),m.qc("click",function(){return e.closeTask()}),m.bc(),m.bd(230,eh,3,3,"div",74),m.vc(231,"async"),m.bd(232,sh,3,3,"div",75),m.vc(233,"async"),m.bd(234,ah,0,0,"ng-template",null,76,m.cd),m.bd(236,ih,4,18,"ng-template",null,77,m.cd),m.bd(238,nh,1,0,"ng-template",null,78,m.cd),m.bd(240,ch,8,3,"ng-template",null,79,m.cd),m.bd(242,oh,12,3,"ng-template",null,80,m.cd),m.bd(244,rh,0,0,"ng-template",null,81,m.cd),m.bd(246,lh,0,0,"ng-template",null,82,m.cd),m.bd(248,dh,1,2,"ng-template",null,83,m.cd),m.bd(250,uh,4,9,"ng-template",null,84,m.cd),m.bd(252,hh,19,7,"ng-template",null,85,m.cd),m.bd(254,mh,0,0,"ng-template",null,86,m.cd),m.bd(256,bh,1,1,"ng-template",null,87,m.cd),m.bd(258,ph,3,5,"ng-template",null,88,m.cd),m.bd(260,Ch,60,194,"ng-template",null,89,m.cd),m.Yb(262,null,90),m.Yb(264,null,91),m.cc(266,"cu-visibility-detector",92),m.qc("onChange",function(t){return e.changeVisibility(t)}),m.bc(),m.bd(267,Sh,9,25,"ng-template",null,93,m.cd),m.bd(269,Ih,12,0,"ng-template",null,94,m.cd)),2&t){const t=m.Rc(27),s=m.Rc(40),a=m.Rc(46),i=m.Rc(205),n=m.Rc(259);let c=null,o=null,r=null,l=null,d=null,u=null,h=null,b=null,k=null,p=null,g=null,v=null,f=null,_=null,y=null,w=null,T=null,C=null,S=null,I=null,$=null,D=null,O=null,j=null,L=null,U=null,M=null,A=null,E=null,F=null,x=null,R=null,P=null,z=null,N=null,H=null,B=null,q=null,X=null;m.Ob("task_subtask",null==(c=m.wc(2,92,e.task$))?null:c.parent)("task-container-sharing",e.isSharingApp),m.Dc("ngClass",m.Ic(394,$h,e.task&&e.task.id&&e.teamTrayTasks&&e.teamTrayTasks[e.task.id]&&!0===e.teamTrayTasks[e.task.id],e.editorFullScreen))("cuHoverKeyDown",m.Gc(397,Dh)),m.Jb("data-task-id",null==(o=m.wc(3,94,e.task$))?null:o.id),m.Ib(4),m.Dc("ngIf",(null==(r=m.wc(5,96,e.task$))?null:r.subtask_parent)||(null==(r=m.wc(6,98,e.task$))?null:r.parent)),m.Ib(3),m.Dc("ngIf",!e.isSharingApp),m.Ib(1),m.Dc("ngClass",m.Ic(398,Oh,e.mobileTab===e.TaskMobileTab.Details,e.mobileTab===e.TaskMobileTab.Activity)),m.Ib(2),m.Dc("ngIf",m.wc(11,100,e.task$)),m.Ib(4),m.Dc("ngIf",!m.wc(15,102,e.hideTaskHistory$)),m.Ib(4),m.ad("width",m.wc(20,104,e.resizeDividerPercent$),"%"),m.Ob("task__toolbar_first",!m.wc(21,106,e.hideTaskHistory$)),m.Ib(4),m.Dc("ngIf",(null==(l=m.wc(23,108,e.statuses$))?null:l.length)&&!1===m.wc(24,110,e.isSimpleStatuses$)&&(m.wc(25,112,e.canChangeStatus$)||e.isSharingApp))("ngIfElse",t),m.Ib(6),m.Dc("ngIf",m.wc(29,114,e.canChangeStatus$)&&m.wc(30,116,e.task$)&&(null==(d=m.wc(31,118,e.task$))||null==d.status?null:d.status.type)!==e.StatusTypes.Closed&&!1===m.wc(32,120,e.isSimpleStatuses$)&&(null==(d=m.wc(33,122,e.statuses$))?null:d.length)),m.Ib(6),m.Dc("ngIf",(null==(u=m.wc(35,124,e.statuses$))?null:u.length)&&m.wc(36,126,e.isSimpleStatuses$)&&m.wc(37,128,e.task$)&&m.wc(38,130,e.canChangeStatus$))("ngIfElse",s),m.Ib(9),m.Dc("ngIf",m.wc(44,132,e.canChangeAssignee$))("ngIfElse",a),m.Ib(4),m.Dc("ngIf",null==(h=m.wc(48,134,e.projectFeatures$))||null==h.priorities?null:h.priorities.enabled),m.Ib(3),m.Dc("ngIf",m.wc(51,136,e.task$)),m.Ib(2),m.Dc("verticalScrollingDetection",!1)("horizontalScrollingDetection",!0)("offsetLeft",10)("offsetRight",10),m.Ib(5),m.Dc("cuTooltip",m.wc(58,138,e.taskCreatedTooltipMsg$))("tooltipAllowHtmlRememberToEscapeXss",!0)("tooltipLifeTime",1e4),m.Ib(5),m.Ob("loading",!m.wc(63,140,e.task$)),m.Ib(2),m.fd(" ",m.xc(65,142,null==(b=m.wc(66,145,e.task$))?null:b.date_created,m.wc(67,147,e.taskCreatedDateFormat$))," "),m.Ib(5),m.ed(m.xc(70,149,null==(k=m.wc(71,152,e.task$))?null:k.date_created,m.wc(72,154,e.timeFormat$))),m.Ib(4),m.Dc("ngIf",(null==(p=m.wc(74,156,e.permissions$))?null:p.can_see_time_spent)&&(null==(p=m.wc(75,158,e.projectFeatures$))||null==p.time_tracking?null:p.time_tracking.enabled)),m.Ib(3),m.Dc("ngIf",(null==(g=m.wc(77,160,e.permissions$))?null:g.can_see_time_estimated)&&(null==(g=m.wc(78,162,e.projectFeatures$))||null==g.time_estimates?null:g.time_estimates.enabled)),m.Ib(3),m.Dc("ngIf",(null==(v=m.wc(80,164,e.permissions$))?null:v.can_see_points_estimated)&&(null==(v=m.wc(81,166,e.projectFeatures$))||null==v.points?null:v.points.enabled)),m.Ib(3),m.Dc("ngIf",(null==(f=m.wc(83,168,e.projectFeatures$))||null==f.due_dates?null:f.due_dates.enabled)&&((null==(f=m.wc(84,170,e.task$))?null:f.start_date)||!e.datePickerClosed&&e.openedFromStart)),m.Ib(3),m.Dc("ngIf",(null==(_=m.wc(86,172,e.projectFeatures$))||null==_.due_dates?null:_.due_dates.enabled)&&!!(null!=(_=m.wc(87,174,e.permissions$))&&_.change_due_date||null!=(_=m.wc(88,176,e.task$))&&_.due_date)),m.Ib(4),m.Dc("ngIf",(null==(y=m.wc(90,178,e.sharedData.compatCurrentTeam$))?null:y.zoom)&&e.zoomService.allowed&&!e.isSharingApp),m.Ib(3),m.Dc("ngIf",m.wc(93,180,e.task$)),m.Ib(2),m.Dc("ngIf",e.headerColumnRightContainerMovable),m.Ib(2),m.Dc("ngIf",(null==(w=m.wc(97,182,e.permissions$))?null:w.add_attachments)&&!m.wc(98,184,e.disconnected$)),m.Ib(3),m.ad("width",m.wc(100,186,e.hideTaskHistory$)?100:m.wc(101,188,e.resizeDividerPercent$),"%"),m.Ob("task-column_main-border-right",!m.wc(102,190,e.hideTaskHistory$)),m.Ib(4),m.Dc("ngIf",(null==(T=m.wc(104,192,e.task$))||null==T.sharing?null:T.sharing.public)&&m.wc(105,194,e.showSharing$)&&(null==(T=m.wc(106,196,e.task$))||null==T.permissions?null:T.permissions.make_views_public)),m.Ib(6),m.Dc("ngIf",null==(C=m.wc(110,198,e.task$))?null:C.coverimage),m.Ib(2),m.Dc("ngIf",null==(S=m.wc(112,200,e.projectFeatures$))||null==S.tags?null:S.tags.enabled),m.Ib(2),m.Dc("ngIf",(null==(I=m.wc(114,202,e.task$))||null==I.dependencies?null:I.dependencies.length)&&(null==(I=m.wc(115,204,e.team$))?null:I.id)&&(null==(I=m.wc(116,206,e.team$))?null:I.task_relationships)),m.Ib(4),m.Dc("ngIf",((null==($=m.wc(118,208,e.task$))||null==$.dependencies?null:$.dependencies.length)||(null==($=m.wc(119,210,e.getTasksLinked$))?null:$.length)||(null==($=m.wc(120,212,e.task$))||null==$.goals?null:$.goals.length))&&(null==($=m.wc(121,214,e.team$))?null:$.id)&&!(null!=($=m.wc(122,216,e.team$))&&$.task_relationships)),m.Ib(8),m.Dc("ngIf",(null==(D=m.wc(126,218,e.projectFeatures$))||null==D.milestones?null:D.milestones.enabled)&&!(null==(D=m.wc(127,220,e.task$))||!D.custom_type)),m.Ib(3),m.Dc("ngIf",null==(O=m.wc(129,222,e.task$))?null:O.parent),m.Ib(2),m.Dc("ngIf",null==(j=m.wc(131,224,e.task$))?null:j.private),m.Ib(2),m.Dc("ngClass",m.Kc(401,jh,null==(L=m.wc(133,226,e.task$))?null:L.parent,e.taskInputFocused,!e.isSharingApp,(null==(L=m.wc(134,228,e.projectFeatures$))||null==L.milestones?null:L.milestones.enabled)&&!(null==(L=m.wc(135,230,e.task$))||!L.custom_type)))("task",m.wc(136,232,e.task$))("weights",m.wc(137,234,e.weights$))("dateFormatting",null==(U=m.wc(138,236,e.sharedData.currentUser))?null:U.date_format)("militaryTime",null==(M=m.wc(139,238,e.sharedData.currentUser))?null:M.twenty_four_hr_setting)("meUser",m.wc(140,240,e.sharedData.currentUser))("points",m.wc(141,242,e.availablePoints$))("users",m.wc(142,244,m.wc(143,246,e.projectMembers$)))("statuses",m.wc(144,248,e.statuses$))("team",m.wc(145,250,e.sharedData.compatCurrentTeam$))("priorities",null==(A=m.wc(146,252,e.projectFeatures$))||null==A.priorities?null:A.priorities.priorities)("tags",m.wc(147,254,e.tag$))("userGroups",m.wc(148,256,e.userGroups$))("allowedCommands",m.Pc(406,Lh,[m.wc(149,258,e.canChangeAssignee$),m.wc(150,260,e.canChangeAssignee$),(null==(E=m.wc(151,262,e.permissions$))?null:E.add_followers)||(null==(E=m.wc(152,264,e.permissions$))?null:E.remove_followers),null==(E=m.wc(153,266,e.featuresAndPermissions$))||null==E.priorities?null:E.priorities.enabled,null==(E=m.wc(154,268,e.featuresAndPermissions$))||null==E.due_dates?null:E.due_dates.enabled,null==(E=m.wc(155,270,e.featuresAndPermissions$))||null==E.due_dates?null:E.due_dates.enabled,null==(E=m.wc(156,272,e.featuresAndPermissions$))||null==E.due_dates?null:E.due_dates.enabled,null==(E=m.wc(157,274,e.featuresAndPermissions$))||null==E.tags?null:E.tags.enabled,null==(E=m.wc(158,276,e.featuresAndPermissions$))||null==E.time_estimates?null:E.time_estimates.enabled,null==(E=m.wc(159,278,e.featuresAndPermissions$))||null==E.points?null:E.points.enabled,(null==(E=m.wc(160,280,e.statuses$))?null:E.length)>2&&m.wc(161,282,e.canChangeStatus$),(null==(E=m.wc(162,284,e.task$))||null==E.status?null:E.status.type)!==e.StatusTypes.Closed&&m.wc(163,286,e.canChangeStatus$),null==(E=m.wc(164,288,e.permissions$))?null:E.move_task,null==(E=m.wc(165,290,e.permissions$))?null:E.add_subtasks,null==(E=m.wc(166,292,e.permissions$))?null:E.add_dependencies,null==(E=m.wc(167,294,e.permissions$))?null:E.add_dependencies,null==(E=m.wc(168,296,e.permissions$))?null:E.add_dependencies,(null==(E=m.wc(169,298,e.task$))||null==E.position?null:E.position.total)>1&&!(null!=(E=m.wc(170,300,e.task$))&&null!=E.category&&E.category.archived)&&!(null!=(E=m.wc(171,302,e.task$))&&null!=E.subcategory&&E.subcategory.archived)&&(null==(E=m.wc(172,304,e.permissions$))?null:E.move_task)]))("currentValues",m.Pc(432,_h,[null==(F=m.wc(173,306,e.task$))?null:F.assignees,null==(F=m.wc(174,308,e.task$))?null:F.group_assignees,null==(F=m.wc(175,310,e.task$))?null:F.followers,null==(F=m.wc(176,312,e.task$))?null:F.group_followers,null==(F=m.wc(177,314,e.task$))?null:F.status,null==(F=m.wc(178,316,e.task$))?null:F.priority,m.Jc(425,vh,m.wc(179,318,e.project$),null==(F=m.wc(180,320,e.task$))?null:F.category,null==(F=m.wc(181,322,e.task$))?null:F.subcategory),m.Ic(429,fh,null==(F=m.wc(182,324,e.task$))?null:F.due_date,null==(F=m.wc(183,326,e.task$))?null:F.due_date_time),null==(F=m.wc(184,328,e.task$))?null:F.tags,null==(F=m.wc(185,330,e.task$))?null:F.position,null==(F=m.wc(186,332,e.task$))?null:F.time_estimate_string,null==(F=m.wc(187,334,e.task$))?null:F.points]))("options",m.Ic(449,Th,m.Hc(445,yh,null==(x=m.wc(188,336,e.project$))?null:x.multiple_assignees),m.Hc(447,wh,null==(x=m.wc(189,338,e.task$))||null==x.permissions?null:x.permissions.manage_tags))),m.Ib(58),m.Dc("ngStyle",m.Hc(452,bu,(null!=(R=m.wc(191,340,e.task$))&&R.parent||null!=(R=m.wc(192,342,e.task$))&&R.private)&&null!=(R=m.wc(193,344,e.projectFeatures$))&&null!=R.milestones&&R.milestones.enabled&&null!=(R=m.wc(194,346,e.task$))&&R.custom_type?"50px":null!=(R=m.wc(195,348,e.task$))&&R.parent||null!=(R=m.wc(196,350,e.task$))&&R.private||null!=(R=m.wc(197,352,e.projectFeatures$))&&null!=R.milestones&&R.milestones.enabled&&null!=(R=m.wc(198,354,e.task$))&&R.custom_type?"22px":"0"))("innerHTML",m.yc(199,356,null==(P=m.wc(200,360,e.task$))?null:P.name,"text",0)||"",m.Vc),m.Ib(11),m.Dc("ngIf",(null==(z=m.wc(202,362,e.permissions$))?null:z.change_title)&&!m.wc(203,364,e.disconnected$))("ngIfElse",i),m.Ib(5),m.Dc("ngIf",!e.editorFullScreen&&e.viewLoaded)("ngIfThen",n),m.Ib(1),m.Dc("ngIf",!m.wc(208,366,e.task$)||!e.viewLoaded),m.Ib(2),m.Dc("ngIf",(null==(N=m.wc(210,368,e.projectFeatures$))||null==N.custom_fields?null:N.custom_fields.enabled)&&e.viewLoaded),m.Ib(2),m.Dc("ngIf",e.viewLoaded&&(!e.isSharingApp||(null==(H=m.wc(212,370,e.task$))||null==H.subtasks?null:H.subtasks.length)>0||(null==(H=m.wc(213,372,e.task$))||null==H.todoComments?null:H.todoComments.length)>0)),m.Ib(3),m.Dc("ngIf",m.wc(215,374,e.task$)&&m.wc(216,376,e.project$)&&m.wc(217,378,e.teamId$)&&e.viewLoaded&&(!e.isSharingApp||(null==(B=m.wc(218,380,e.task$))||null==B.checklists?null:B.checklists.length)>0)),m.Ib(5),m.Dc("ngIf",null==(q=m.wc(220,382,e.team$))?null:q.task_relationships),m.Ib(2),m.Dc("ngIf",e.viewLoaded&&(!e.isSharingApp||(null==(X=m.wc(222,384,e.attachments$))?null:X.length)>0)),m.Ib(2),m.Dc("ngIf",!e.isSharingApp),m.Ib(1),m.Dc("ngIf",!m.wc(225,386,e.hideTaskHistory$)),m.Ib(2),m.Dc("ngIf",!m.wc(227,388,e.hideTaskHistory$)),m.Ib(2),m.Dc("ngIf",e.editorFullScreen),m.Ib(1),m.Dc("ngClass",m.Hc(454,Uh,e.task&&e.task.id&&e.teamTrayTasks&&e.teamTrayTasks[e.task.id]&&!0===e.teamTrayTasks[e.task.id])),m.Ib(1),m.Dc("ngIf",m.wc(231,390,e.prevTask$)),m.Ib(2),m.Dc("ngIf",m.wc(233,392,e.nextTask$))}},directives:[l.o,Ds.a,l.q,Os.a,js.a,Ls.a,Us.a,Ms.a,_.b,l.t,xs,Rs.a,l.p,va,fa.b,_a.a,ya.a,Ps.a,wa.a,Ta.a,Ca.a,Sa.a,Ia.a,$a.a,Aa,Da.a,Ea.a,Fa.a,xa.a,Ra.a,Pa.a,za.a,Na.a,Ha.a,Ga,w.a,Va.a,Wa.a,Qa.a,Za.a,ti,ei.a,si.a,ai.a,ii.a,ni.a,eo,so.a,ao.a,io.a,no.a,co.a,oo.a,ro.a,Ms.c,lo.a,Lo,Uo.a,Mo.a,vi.a,Eo,Pe.a,Fo.a,T.a,xo,Ro.b,Po.b],pipes:[l.b,X.a,vo.a,Di.a,zo.a,ji.a,No.a,Ho.a,Bo.a,qo.a],encapsulation:2,data:{animation:[Object(h.m)("loading",[Object(h.l)(":enter",[Object(h.k)({opacity:.5}),Object(h.e)("50ms",Object(h.k)({opacity:1}))])])]},changeDetection:0}),t})();var xh=s("jLNh"),Rh=s("OU+x"),Ph=s("ujc1"),zh=s("bFKe"),Nh=s("5FVs"),Hh=s("4Dfh"),Bh=s("kHoN"),qh=s("9Ejp"),Xh=s("jAHR"),Gh=s("Ivax"),Vh=s("Z0uM"),Wh=s("chQ0"),Qh=s("wXlP"),Zh=s("38Di"),Kh=s("XZJ2"),Jh=s("hWeV");let Yh=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},imports:[[l.c]]}),t})();var tm=s("KPoG"),em=s("9oMC"),sm=s("/n4K"),am=s("bpMd"),im=s("m5eJ"),nm=s("C7Vu"),cm=s("+VAm"),om=s("0r45"),rm=s("k6wb"),lm=s("8SgM"),dm=s("/En2"),um=s("8NlF"),hm=s("WL/q"),mm=s("K1R0"),bm=s("7YvY"),km=s("fBbx"),pm=s("VBI8"),gm=s("4TfP"),vm=s("6F/5"),fm=s("PFHR"),_m=s("1M0N"),ym=s("X5rV"),wm=s("o/e2"),Tm=s("wjE6"),Cm=s("a5Nn"),Sm=s("C9rM"),Im=s("ucTL"),$m=s("viDW"),Dm=s("4xwl"),Om=s("je31"),jm=s("E5a2"),Lm=s("bx+h"),Um=s("YD3J"),Mm=s("s41p"),Am=s("EumD"),Em=s("HIOz"),Fm=s("6FZh"),xm=s("2iTN"),Rm=s("QaOb"),Pm=s("qdLs"),zm=s("gb9A"),Nm=s("K0KF"),Hm=s("7MBn");let Bm=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},imports:[[l.c,zm.a,Nm.a,b.l,_m.a,Hm.a]]}),t})();var qm=s("E8aR"),Xm=s("EHXF"),Gm=s("wRSl"),Vm=s("mcWp"),Wm=s("g3Qq"),Qm=s("jZSK"),Zm=s("UhY4"),Km=s("FZDf"),Jm=s("3u9o"),Ym=s("IP3u"),tb=s("Po8+"),eb=s("vi4T"),sb=s("csDc"),ab=s("dzSB"),ib=s("FpDt"),nb=s("+iQC"),cb=s("WX5r"),ob=s("aVmG"),rb=s("GtmI"),lb=s("MAo+"),db=s("Ue6b"),ub=s("rjFr"),hb=s("obfd"),mb=s("Y9Pr");const bb={descriptionHistory:[]};function kb(t=bb,e){switch(e.type){case"[TASK DESCRIPTION HISTORY] Fill description history":return Object.assign(Object.assign({},t),{descriptionHistory:e.payload});case"[TASK DESCRIPTION HISTORY] Clear description history":return Object.assign(Object.assign({},t),{descriptionHistory:[]});default:return t}}let pb=(()=>{class t{constructor(t,e){this.actions=t,this.dataService=e,this.getDescriptionHistory$=Object(se.c)(()=>this.actions.pipe(Object(se.d)("[TASK DESCRIPTION HISTORY] Get description history"),Object(Ie.a)(t=>this.dataService.getTaskDescriptionHistory(t.taskId).pipe(Object(ye.a)(e=>new Kt(t.taskId,e))))))}}return t.\u0275fac=function(e){return new(e||t)(m.nc(se.a),m.nc(Be.a))},t.\u0275prov=m.Sb({token:t,factory:t.\u0275fac}),t})(),gb=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},imports:[[l.c,tt.StoreModule.forFeature("tasks_description_history",kb),se.b.forFeature([pb])]]}),t})(),vb=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},imports:[[l.c,tt.StoreModule.forFeature("dependencies_task",Y)]]}),t})(),fb=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},providers:[Rh.a,Ye.a,Ph.a,es.a,qh.c],imports:[[l.c,d.l,b.l,u.a,xh.a,rs.d.forRoot(),Da.b,zh.b,Xh.a,Nh.a,Hh.a,Bh.a,qh.b,Gh.a,Vh.a,Wh.a,Qh.a,r.a,Zh.a,Kh.b,Jh.b,Yh,em.a,sm.a,am.a,im.a,nm.a,rm.a,cm.a,om.a,lm.a,dm.a,um.a,hm.a,ai.b,mm.b.forRoot({animateTitle:!1,animation:!1,showUnits:!0,showBackground:!1,showSubtitle:!1,renderOnClick:!1,backgroundPadding:0}),tm.a.forChild(Fh),bm.a,km.a,pm.a,gm.a,vm.a,fm.a,_m.a,ym.a,wm.a,Tm.a,c.a,Cm.a,Sm.a,Im.a,Ms.b,$m.a,Dm.a,Om.a,jm.a,Xh.a,Lm.a,Um.a,Mm.a,Am.a,Em.a,i.a,Fm.a,xm.a,Rm.a,Pm.a,Bm,qm.a,o.a,Xm.a,mb.a,Gm.a,Vm.a,Wm.a,Qm.a,n.a,Zm.a,a.a,Km.a,Jm.a,Ym.a,tb.a,zm.a,eb.a,sb.a,ab.a,Nm.a,ib.a,nb.a,cb.a,ob.a,rb.a,lb.a,db.a,ub.a,hb.a,gb,vb]]}),t})()},"wL+j":function(t,e,s){"use strict";s.d(e,"a",function(){return r});var a=s("fXoL"),i=s("UdVN"),n=s("ofXK");function c(t,e){if(1&t){const t=a.dc();a.cc(0,"div",2),a.mc(1,3),a.cc(2,"a",4),a.qc("click",function(){return a.Uc(t),a.uc().onClick()}),a.bc(),a.jc(),a.bc()}if(2&t){const t=a.uc();a.Ib(2),a.kc(t.sharingEntity),a.hc(1)}}function o(t,e){if(1&t){const t=a.dc();a.cc(0,"div",2),a.mc(1,5),a.cc(2,"a",4),a.qc("click",function(){return a.Uc(t),a.uc().onClick()}),a.bc(),a.jc(),a.bc()}if(2&t){const t=a.uc();a.Ib(2),a.kc(t.sharingEntity),a.hc(1)}}let r=(()=>{class t{constructor(){this.openModalOnClick=!1,this.onLinkClick=new a.o}ngOnInit(){}onClick(){this.openModalOnClick?this.onLinkClick.emit():window.open(this.sharingLink,"_blank")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Qb({type:t,selectors:[["cu-view-public-sharing-banner"]],hostVars:2,hostBindings:function(t,e){2&t&&a.Ob("cu-view-public-sharing-banner__container",!0)},inputs:{seoOptimized:"seoOptimized",sharingLink:"sharingLink",sharingEntity:"sharingEntity",openModalOnClick:"openModalOnClick"},outputs:{onLinkClick:"onLinkClick"},decls:3,vars:2,consts:function(){let t,e;return t=$localize`:@@cu-view-public-sharing-banner__text_with-link␟86cf23edddbfff47847e800046316f13ee5f91ab␟5386029946292403201: This ${"\ufffd0\ufffd"}:INTERPOLATION: is shared publicly with a ${"\ufffd#2\ufffd"}:START_LINK:link${"\ufffd/#2\ufffd"}:CLOSE_LINK:`,e=$localize`:@@cu-view-public-sharing-banner__text_with-seo␟5c6146d619a2a391a0d2894c23790ae727a9ae52␟5057213279282110897: This ${"\ufffd0\ufffd"}:INTERPOLATION: is ${"\ufffd#2\ufffd"}:START_LINK:shared publicly${"\ufffd/#2\ufffd"}:CLOSE_LINK: with search engines
`,[["icon","globe",1,"cu-view-public-sharing-banner__icon"],["class","cu-view-public-sharing-banner__text",4,"ngIf"],[1,"cu-view-public-sharing-banner__text"],t,["target","_blank",1,"cu-view-public-sharing-banner__link",3,"click"],e]},template:function(t,e){1&t&&(a.Xb(0,"div",0),a.bd(1,c,3,1,"div",1),a.bd(2,o,3,1,"div",1)),2&t&&(a.Ib(1),a.Dc("ngIf",!e.seoOptimized),a.Ib(1),a.Dc("ngIf",e.seoOptimized))},directives:[i.a,n.q],styles:['.cu-view-public-sharing-banner__container{width:100%;display:flex;align-items:center;justify-content:center;height:30px;flex-shrink:0;position:relative;z-index:30}.cu-view-public-sharing-banner__container:before{content:"";width:100%;height:100%;left:0;top:0;position:absolute;z-index:0;background:#fff}.dark-theme .cu-view-public-sharing-banner__container:before{background:#1e272e}.cu-view-public-sharing-banner__container:after{background-color:#7b68ee;content:"";width:100%;height:100%;opacity:.2;left:0;top:0;position:absolute;z-index:5}@supports (--theme-main-color:#7b68ee){.cu-view-public-sharing-banner__container:after{background-color:var(--theme-main-color)}}.cu-view-public-sharing-banner__text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:11px;position:relative;z-index:10;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-view-public-sharing-banner__text{font-family:var(--global-font-support)}}.dark-theme .cu-view-public-sharing-banner__text{color:#d5d6d7}.cu-view-public-sharing-banner__text a{cursor:pointer}.cu-view-public-sharing-banner__link{color:#7b68ee;position:relative;z-index:10}@supports (--theme-main-color:#7b68ee){.cu-view-public-sharing-banner__link{color:var(--theme-main-color)}}.cu-view-public-sharing-banner__link:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-view-public-sharing-banner__link:hover{color:var(--theme-main-color-dark)}}.cu-view-public-sharing-banner__icon{fill:#7b68ee;stroke:#7b68ee;position:relative;z-index:10;height:12px;width:12px;margin-right:10px}@supports (--theme-main-color:#7b68ee){.cu-view-public-sharing-banner__icon{fill:var(--theme-main-color);stroke:var(--theme-main-color)}}'],encapsulation:2,changeDetection:0}),t})()}}]);