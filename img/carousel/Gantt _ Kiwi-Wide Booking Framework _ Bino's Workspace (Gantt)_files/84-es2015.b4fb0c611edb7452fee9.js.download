(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{Bw5p:function(e,t,n){"use strict";var a=n("UTJH"),c=n("23KU"),o=n("IlA0"),i=n("cSlR"),r=n("IzLi"),s=n("Tchk"),l=function(e,t,n,a){if(!Object(r.a)(e))return e;for(var l=-1,m=(t=Object(o.a)(t,e)).length,d=m-1,u=e;null!=u&&++l<m;){var h=Object(s.a)(t[l]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(l!=d){var b=u[h];void 0===(p=a?a(b,h,u):void 0)&&(p=Object(r.a)(b)?b:Object(i.a)(t[l+1])?[]:{})}Object(c.a)(u,h,p),u=u[h]}return e},m=n("K160"),d=n("Tjpy"),u=Object(d.a)(function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var c=-1,i=t.length,r={};++c<i;){var s=t[c],m=Object(a.a)(e,s);n(0,s)&&l(r,Object(o.a)(s,e),m)}return r}(e,t,function(t,n){return Object(m.a)(e,n)})}(e,t)});t.a=u},"n+Th":function(e,t,n){"use strict";n.r(t),n.d(t,"AttachmentsViewerLazyModule",function(){return ja});var a=n("KyjD"),c=n("WESe"),o=n("ofXK"),i=n("drq7"),r=n("Hgwy"),s=n("c3rA"),l=n("eIep"),m=n("pLZG"),d=n("lJxs"),u=n("IzEk"),h=n("1G5W"),p=n("zp1y"),b=n("AeD3"),g=n("82+D"),f=n("IE5h"),w=n("lU5h"),v=n("uh+T"),_=n("sEeB"),y=n("LRne"),k=n("2Vo4"),I=n("XNiG"),D=n("xgIS"),C=n("QdBX"),x=n("o0vL"),A=n("2p4s"),O=n("TqRa"),T=n("uFGp"),E=n("fXoL"),z=n("Uo20"),j=n("jJW4"),M=n("l7P3"),$=n("8it8"),R=n("UdVN"),S=n("NsZK"),U=n("NQa4"),F=n("Dvla"),L=n("kQRK"),P=n("vIpm"),W=n("bFKe"),X=n("BTFG"),V=n("eDEC"),N=n("4f6Q");function q(e,t){return e>0&&t>0?t/e:1}const B=["img"];function H(e,t){1&e&&E.Xb(0,"cu-loader",6)}function G(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-overlay-markup",7),E.qc("onAdd",function(t){return E.Uc(e),E.uc().onAdd.emit(t)})("onDrop",function(t){return E.Uc(e),E.uc().onDrop.emit(t)})("onSelect",function(t){return E.Uc(e),E.uc().onSelect.emit(t)}),E.bc()}if(2&e){const e=E.uc();E.Dc("marks",e.marks)("selectedMark",e.selectedMark)("scrollToId",e.scrollToId)("markSize",e.markSize)("dropdownTemplate",e.dropdownTemplate)("canvasWidth",e.canvasWidth)("canvasHeight",e.canvasHeight)("readOnly",e.readOnly)}}let Q=(()=>{class e{constructor(e,t){this.el=e,this.changeDetector=t,this.markSize=38,this.showComments=!0,this.readOnly=!1,this.onError=new E.o,this.onAdd=new E.o,this.onDrop=new E.o,this.onSelect=new E.o,this.onBackdropClick=new E.o,this.destroy$=new I.a,this.isLoaded=!1,this.isFailed=!1,this.imageRatio=1,this.canvasWidth=0,this.canvasHeight=0,this.zoom=1}ngOnInit(){}ngAfterViewInit(){this.updateHostRatio(!1),Object(N.a)(this.el.nativeElement).pipe(Object(h.a)(this.destroy$)).subscribe(()=>{this.updateHostRatio()})}ngOnChanges(e){}ngOnDestroy(){this.destroy$.next()}onResize(){this.updateHostRatio()}getCanvasSize(e){return function(e,t,n,a,c=1){let o=e,i=t;o>n&&i>a&&(o=n,i=a);const r=q(o,i),s=q(n,a);let l,m;return r>s?(l=c*o,m=Math.round(l*s)):(m=c*i,l=Math.round(m/s)),{canvasWidth:l,canvasHeight:m}}(this.el.nativeElement.clientWidth-this.markSize,this.el.nativeElement.clientHeight-this.markSize,this.naturalWidth,this.naturalHeight,e)}updateHostRatio(e=!0){const{canvasWidth:t,canvasHeight:n}=this.getCanvasSize(this.zoom);this.canvasWidth=t,this.canvasHeight=n,e&&this.changeDetector.markForCheck()}loaded(){this.isLoaded=!0,this.isFailed=!1,this.naturalWidth=this.img.nativeElement.naturalWidth,this.naturalHeight=this.img.nativeElement.naturalHeight,this.imageRatio=q(this.naturalWidth,this.naturalHeight),this.updateHostRatio()}failed(e){this.isFailed=!0,this.isLoaded=!1,this.onError.emit(e)}setZoom(e){this.zoom=e,this.updateHostRatio()}changeZoom(e){this.zoom+=e,this.setZoom(this.zoom+e)}setFullWidth(){const e=this.el.nativeElement.clientWidth-this.markSize,{canvasWidth:t}=this.getCanvasSize(1),n=e/t;return this.setZoom(n),n}click(e){this.onBackdropClick.emit()}containerClick(e){e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(E.m),E.Wb(E.h))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-image-markup"]],viewQuery:function(e,t){if(1&e&&E.jd(B,3),2&e){let e;E.Qc(e=E.rc())&&(t.img=e.first)}},hostAttrs:[1,"cu-image-markup"],hostBindings:function(e,t){1&e&&E.qc("resize",function(){return t.onResize()},!1,E.Tc)("click",function(e){return t.click(e)})},inputs:{src:"src",marks:"marks",selectedMark:"selectedMark",scrollToId:"scrollToId",markSize:"markSize",dropdownTemplate:"dropdownTemplate",showComments:"showComments",readOnly:"readOnly"},outputs:{onError:"onError",onAdd:"onAdd",onDrop:"onDrop",onSelect:"onSelect",onBackdropClick:"onBackdropClick"},features:[E.Gb],decls:6,vars:9,consts:[[1,"cu-image-markup__inner"],["draggable","false",1,"cu-image-markup__img-container",3,"click"],["draggable","false","alt","",1,"cu-image-markup__img",3,"src","load","error"],["img",""],["class","cu-image-markup__loader",4,"ngIf"],[3,"marks","selectedMark","scrollToId","markSize","dropdownTemplate","canvasWidth","canvasHeight","readOnly","onAdd","onDrop","onSelect",4,"ngIf"],[1,"cu-image-markup__loader"],[3,"marks","selectedMark","scrollToId","markSize","dropdownTemplate","canvasWidth","canvasHeight","readOnly","onAdd","onDrop","onSelect"]],template:function(e,t){1&e&&(E.cc(0,"div",0),E.cc(1,"div",1),E.qc("click",function(e){return t.containerClick(e)}),E.cc(2,"img",2,3),E.qc("load",function(){return t.loaded()})("error",function(e){return t.failed(e)}),E.bc(),E.bd(4,H,1,0,"cu-loader",4),E.bd(5,G,1,8,"cu-overlay-markup",5),E.bc(),E.bc()),2&e&&(E.Ib(1),E.ad("width",t.canvasWidth,"px")("height",t.canvasHeight,"px"),E.Ib(1),E.Ob("cu-image-markup__img_loading",!t.isLoaded),E.Dc("src",t.src,E.Xc),E.Ib(2),E.Dc("ngIf",!t.isLoaded),E.Ib(1),E.Dc("ngIf",t.showComments))},styles:[".cu-image-markup{display:flex;align-items:center;justify-content:center;width:100%;height:100%;overflow:auto;padding:0 25px 25px}.cu-os-win .cu-image-markup{scrollbar-width:thin}.cu-os-win .cu-image-markup::-webkit-scrollbar{background-color:#232323;width:16px;height:16px}.cu-os-win .cu-image-markup::-webkit-scrollbar-track,.cu-os-win .cu-image-markup::-webkit-scrollbar-track:hover{background-color:#232323}.cu-os-win .cu-image-markup::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #232323}.cu-os-win .cu-image-markup::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #232323}.cu-os-win .cu-image-markup::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-image-markup::-webkit-scrollbar,.cu-os-win .dark-theme .cu-image-markup::-webkit-scrollbar,.cu-os-win.dark-theme .cu-image-markup::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-image-markup::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-image-markup::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-image-markup::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-image-markup::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-image-markup::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-image-markup::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-image-markup::-webkit-scrollbar-thumb:hover{border-color:#384047}.cu-image-markup__loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cu-image-markup__inner{display:grid;align-items:center;width:100%;height:100%;border-radius:12px;overflow:auto}.cu-image-markup__img{width:100%;height:100%;-webkit-user-select:none;-ms-user-select:none;user-select:none;position:absolute!important;left:0;top:0;bottom:0;right:0}.cu-image-markup__img-container{position:relative;margin:0 auto;pointer-events:all;flex-shrink:0}.cu-image-markup__img-overlay{position:absolute;top:0;left:0;right:0;bottom:0;margin:-12px}.cu-image-markup__img-overlay_adding{cursor:crosshair}"],encapsulation:2,changeDetection:0}),e})();var Z=n("vkgz"),J=n("/uUt"),K=n("Kj3r"),Y=n("gSGL"),ee=n("4F4K"),te=n("dTHz"),ne=n("tjT+"),ae=n("9jGm"),ce=n("qJ3x"),oe=n("uslN"),ie=n("m2rH"),re=n("I1n0"),se=n("jJQC");let le=(()=>{class e{constructor(e,t){this.element=e,this.zone=t,this.destroy$=new I.a,this.text="",this.disabled=!1}ngAfterViewInit(){this.addTooltip(),this.zone.runOutsideAngular(()=>{Object(D.a)(this.element.nativeElement,"mousemove",{passive:!0}).pipe(Object(h.a)(this.destroy$)).subscribe(e=>{0!==e.layerX&&0!==e.layerY&&(this.tooltip.style.left=e.layerX+"px",this.tooltip.style.top=e.layerY+"px")})})}ngOnChanges(e){e&&e.text&&e.text.currentValue!==e.text.previousValue&&this.tooltip&&(this.tooltip.innerText=this.text),e.disabled&&this.tooltip&&(this.disabled?this.tooltip.classList.add("cu-cursor-tooltip_disabled"):this.tooltip.classList.remove("cu-cursor-tooltip_disabled"))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.removeTooltip()}addTooltip(){this.tooltip||(this.tooltip=this.getTooltip(),this.element.nativeElement.appendChild(this.tooltip),this.element.nativeElement.classList.add("cu-cursor-tooltip__container"),this.disabled&&this.tooltip.classList.add("cu-cursor-tooltip_disabled"))}getTooltip(){const e=document.createElement("div");e.className="cu-cursor-tooltip";const t=document.createElement("div");return t.className="tooltip",t.innerText=this.text,e.appendChild(t),e}removeTooltip(){this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.element.nativeElement.classList.remove("cu-cursor-tooltip__container")}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(E.m),E.Wb(E.B))},e.\u0275dir=E.Rb({type:e,selectors:[["","cuCursorTooltip",""]],inputs:{text:["cuCursorTooltip","text"],disabled:["tooltipDisabled","disabled"]},exportAs:["cuCursorTooltip"],features:[E.Gb]}),e})();var me=n("GJmQ"),de=n("LdyQ"),ue=n("MJvn"),he=n("n+1/");const pe=["dropdown"],be=["dropdownMenu"];function ge(e,t){}const fe=function(e){return{mark:e}};function we(e,t){if(1&e&&(E.cc(0,"div",null,5),E.bd(2,ge,0,0,"ng-template",6),E.bc()),2&e){const e=E.uc();E.Ib(2),E.Dc("ngTemplateOutlet",e.dropdownTemplate)("ngTemplateOutletContext",E.Hc(2,fe,e.mark))}}let ve=(()=>{class e{constructor(){this.showDropdownAlways=!1,this.onDropdownClose=new E.o,this.inited=!1,this.dropdownRepositionFlag=!1,this.destroy$=new I.a}ngOnInit(){}ngAfterViewInit(){this.showDropdownAlways&&setTimeout(()=>{this.dropdown.open()}),this.inited=!0}ngOnChanges(e){e.selected&&!this.selected&&this.dropdown&&this.dropdown.close(),e.dragging&&(this.dragging?this.dropdown.close():this.inited&&e.dragging.previousValue&&this.dropdown.open())}ngOnDestroy(){this.destroy$.next()}observeDropdownMenu(){this.dropdownMenu&&Object(N.a)(this.dropdownMenu.nativeElement).pipe(Object(me.a)(()=>!!this.dropdownMenu),Object(h.a)(this.destroy$)).subscribe(()=>{this.dropdownRepositionFlag=!this.dropdownRepositionFlag})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-overlay-mark"]],viewQuery:function(e,t){if(1&e&&(E.jd(pe,3),E.jd(be,1)),2&e){let e;E.Qc(e=E.rc())&&(t.dropdown=e.first),E.Qc(e=E.rc())&&(t.dropdownMenu=e.first)}},hostAttrs:[1,"cu-overlay-mark"],hostVars:2,hostBindings:function(e,t){2&e&&E.Ob("cu-overlay-mark_selected",t.selected)},inputs:{mark:"mark",selected:"selected",dragging:"dragging",dropdownTemplate:"dropdownTemplate",showDropdownAlways:"showDropdownAlways"},outputs:{onDropdownClose:"onDropdownClose"},features:[E.Gb],decls:6,vars:6,consts:[["cuDropdown","",3,"dropdownCloseOnInsideClick","dropdownDisabled","dropdownPreventDocumentScroll","dropdownDestroyMenuOnClose","dropdownRepositionFlag","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-overlay-mark__toggle"],[4,"cuDropdownMenu"],["dropdownMenu",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(E.cc(0,"div",0,1),E.qc("dropdownClose",function(){return t.onDropdownClose.emit()})("dropdownOpen",function(){return t.observeDropdownMenu()}),E.cc(2,"div",2),E.cc(3,"div",3),E.dd(4),E.bc(),E.bc(),E.bd(5,we,3,4,"div",4),E.bc()),2&e&&(E.Dc("dropdownCloseOnInsideClick",!1)("dropdownDisabled",!t.dropdownTemplate||t.dragging)("dropdownPreventDocumentScroll",!1)("dropdownDestroyMenuOnClose",!0)("dropdownRepositionFlag",t.dropdownRepositionFlag),E.Ib(4),E.ed(t.mark.label))},directives:[de.b,ue.a,he.a,o.x],styles:[".cu-overlay-mark{transition:box-shadow .2s cubic-bezier(.785,.135,.15,.86) 0s;display:block;position:absolute;z-index:2;border-radius:50%;background-color:rgba(253,113,175,.85);box-shadow:0 3px 8px 0 rgba(0,0,0,.4);border:1px solid #fff}.cu-overlay-mark__toggle{font:500 18px/1 Gotham Pro,Proxima Nova,arial,serif;height:38px;width:38px;color:hsla(0,0%,100%,.9);cursor:move;display:flex;justify-content:center;align-items:center;text-align:center}.cu-overlay-mark:active,.cu-overlay-mark:hover,.cu-overlay-mark_selected{box-shadow:0 2px 6px 0 rgba(0,0,0,.3);background-color:#fd71af}.cu-overlay-mark:active .cu-overlay-mark__toggle,.cu-overlay-mark:hover .cu-overlay-mark__toggle,.cu-overlay-mark_selected .cu-overlay-mark__toggle{color:#fff}"],encapsulation:2,changeDetection:0}),e})();var _e=n("5+WD");const ye=["overlay"],ke=function(e,t){return{x:e,y:t}};function Ie(e,t){if(1&e){const e=E.dc();E.ac(0),E.cc(1,"cu-overlay-mark",4),E.qc("cdkDragEnded",function(t){return E.Uc(e),E.uc().dragEnded(t)})("cdkDragStarted",function(t){return E.Uc(e),E.uc().dragStarted(t)})("mousedown",function(n){E.Uc(e);const a=t.$implicit;return E.uc().markMouseDown(n,a)})("click",function(n){E.Uc(e);const a=t.$implicit;return E.uc().markClick(n,a)}),E.bc(),E.Zb()}if(2&e){const e=t.$implicit,n=E.uc();E.Ib(1),E.Dc("mark",e)("selected",e.id===n.selectedMark)("cdkDragFreeDragPosition",E.Ic(8,ke,e.x*n.canvasWidth/100,e.y*n.canvasHeight/100))("cdkDragData",e)("cdkDragDisabled",n.readOnly)("dropdownTemplate",n.dropdownTemplate)("dragging",n.dragging&&e.id===n.selectedMark),E.Jb("data-mark-id",e.id)}}function De(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-overlay-mark",5),E.qc("cdkDragEnded",function(t){return E.Uc(e),E.uc().dragEnded(t)})("cdkDragStarted",function(t){return E.Uc(e),E.uc().dragStarted(t)})("mousedown",function(t){E.Uc(e);const n=E.uc();return n.markMouseDown(t,n.newMark)})("click",function(t){E.Uc(e);const n=E.uc();return n.markClick(t,n.newMark)})("onDropdownClose",function(){return E.Uc(e),E.uc().newMarkClose()}),E.bc()}if(2&e){const e=E.uc();E.Dc("mark",e.newMark)("selected",!0)("showDropdownAlways",!0)("cdkDragFreeDragPosition",E.Ic(7,ke,e.newMark.x*e.canvasWidth/100,e.newMark.y*e.canvasHeight/100))("cdkDragData",e.newMark)("dropdownTemplate",e.dropdownTemplate)("dragging",e.dragging)}}let Ce=(()=>{class e{constructor(e,t){this.el=e,this.changeDetector=t,this.markSize=38,this.readOnly=!1,this.onAdd=new E.o,this.onDrop=new E.o,this.onSelect=new E.o,this.destroy$=new I.a,this.trackById=Object(se.d)("id"),this.dragging=!1}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(e){e.marks&&(this.newMark=null),e.scrollToId&&this.scrollToMark(this.scrollToId)}ngOnDestroy(){this.destroy$.next()}syncChanges(e){Object.keys(e).forEach(t=>{this[t]=e[t]}),e.marks&&(this.newMark=null),e.scrollToId&&this.scrollToMark(this.scrollToId),this.changeDetector.detectChanges()}scrollToMark(e){if(!e)return;const t=this.el.nativeElement.querySelector(`[data-mark-id="${e}"]`);t&&t.scrollIntoView({inline:"center",block:"center"})}dragStarted(e){this.dragging=!0}dragEnded(e){const t=e.source.element.nativeElement.getBoundingClientRect(),n=this.overlay.nativeElement.getBoundingClientRect(),a=t.top-n.top,c={x:Math.min(100,Math.max(0,100*(t.left-n.left)/this.canvasWidth)),y:Math.min(100,Math.max(0,100*a/this.canvasHeight))};"new"===e.source.data.id||this.onDrop.emit(Object.assign(Object.assign({},e.source.data),c)),this.dragging=!1}containerClick(e){this.readOnly||this.newMark||this.selectedMark?(this.newMark=null,this.selectedMark=null):this.newMark={id:"new",x:100*(e.offsetX-this.markSize/2)/this.canvasWidth,y:100*(e.offsetY-this.markSize/2)/this.canvasHeight,label:this.nextMark||String(this.marks.length+1),page:this.page},this.onSelect.emit(null)}markMouseDown(e,t){"new"!==t.id&&(this.selectedMark!==t.id&&this.onSelect.emit(t),this.newMark=null)}markClick(e,t){e.stopPropagation()}newMarkClose(){this.dragging||setTimeout(()=>{this.newMark=null,this.changeDetector.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(E.m),E.Wb(E.h))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-overlay-markup"]],viewQuery:function(e,t){if(1&e&&E.jd(ye,3),2&e){let e;E.Qc(e=E.rc())&&(t.overlay=e.first)}},hostAttrs:[1,"cu-overlay-markup"],inputs:{marks:"marks",selectedMark:"selectedMark",scrollToId:"scrollToId",markSize:"markSize",dropdownTemplate:"dropdownTemplate",canvasWidth:"canvasWidth",canvasHeight:"canvasHeight",page:"page",nextMark:"nextMark",readOnly:"readOnly"},outputs:{onAdd:"onAdd",onDrop:"onDrop",onSelect:"onSelect"},features:[E.Gb],decls:4,vars:6,consts:function(){let e;return e=$localize`:@@cu-overlay-markup__tooltip-msg_add-comment␟a2db956c847e7e0b54f862e0d540c7fecc982b51␟7126857222203040713:Click to add comment`,[["cuCursorTooltip",e,1,"cu-overlay-markup__overlay",3,"tooltipDisabled","click"],["overlay",""],[4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragBoundary",".cu-overlay-markup__overlay",3,"mark","selected","showDropdownAlways","cdkDragFreeDragPosition","cdkDragData","dropdownTemplate","dragging","cdkDragEnded","cdkDragStarted","mousedown","click","onDropdownClose",4,"ngIf"],["cdkDrag","","cdkDragBoundary",".cu-overlay-markup__overlay",3,"mark","selected","cdkDragFreeDragPosition","cdkDragData","cdkDragDisabled","dropdownTemplate","dragging","cdkDragEnded","cdkDragStarted","mousedown","click"],["cdkDrag","","cdkDragBoundary",".cu-overlay-markup__overlay",3,"mark","selected","showDropdownAlways","cdkDragFreeDragPosition","cdkDragData","dropdownTemplate","dragging","cdkDragEnded","cdkDragStarted","mousedown","click","onDropdownClose"]]},template:function(e,t){1&e&&(E.cc(0,"div",0,1),E.qc("click",function(e){return t.containerClick(e)}),E.bd(2,Ie,2,11,"ng-container",2),E.bd(3,De,1,10,"cu-overlay-mark",3),E.bc()),2&e&&(E.Ob("cu-overlay-markup__overlay_adding",!t.readOnly&&!t.selectedMark&&!t.newMark),E.Dc("tooltipDisabled",t.readOnly||t.selectedMark||t.newMark),E.Ib(2),E.Dc("ngForOf",t.marks)("ngForTrackBy",t.trackById),E.Ib(1),E.Dc("ngIf",t.newMark))},directives:[le,o.p,o.q,ve,_e.a],styles:[".cu-overlay-markup{display:block}.cu-overlay-markup,.cu-overlay-markup__overlay{position:absolute;top:0;left:0;right:0;bottom:0}.cu-overlay-markup__overlay{margin:-19px}.cu-overlay-markup__overlay_adding{cursor:crosshair}"],encapsulation:2,changeDetection:0}),e})();var xe=n("Bw5p"),Ae=n("SxV6"),Oe=n("ur8Q");const Te=["pdfViewerOutlet"];function Ee(e,t){}function ze(e,t){1&e&&E.Xb(0,"cu-loader")}let je=(()=>{class e{constructor(e){this.dynamicComponentLoader=e,this.showLoader=!0,this.afterLoadComplete=new E.o,this.pageRendered=new E.o,this.pageChange=new E.o(!0),this.onError=new E.o,this.isLoaded=!1,this.destroy$=new I.a}ngOnInit(){this.dynamicComponentLoader.getComponentFactory("pdf-viewer-lazy").subscribe(e=>{this.isLoaded=!0;const t=this.componentRef=this.pdfViewerOutlet.createComponent(e);t.instance.src=this.src,t.instance.renderText=this.renderText,t.instance.showAll=this.showAll,t.instance.originalSize=this.originalSize,t.instance.zoom=this.zoom,t.instance.autoresize=this.autoresize,t.instance.afterLoadComplete.pipe(Object(h.a)(this.destroy$)).subscribe(e=>this.afterLoadComplete.emit(e)),t.instance.pageRendered.pipe(Object(h.a)(this.destroy$)).subscribe(e=>this.pageRendered.emit(e)),t.instance.pageChange.pipe(Object(h.a)(this.destroy$)).subscribe(e=>this.pageChange.emit(e)),t.instance.onError.pipe(Object(h.a)(this.destroy$)).subscribe(e=>this.onError.emit(e)),t.changeDetectorRef.detectChanges(),this.destroy$.pipe(Object(Ae.a)()).subscribe(()=>{t.destroy()})})}ngOnChanges(e){this.componentRef&&(Object.keys(e).forEach(e=>{this.componentRef.instance[e]=this[e]}),this.componentRef.changeDetectorRef.detectChanges())}ngOnDestroy(){this.destroy$.next()}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(Oe.a))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-pdf-viewer"]],viewQuery:function(e,t){if(1&e&&E.jd(Te,3,E.U),2&e){let e;E.Qc(e=E.rc())&&(t.pdfViewerOutlet=e.first)}},inputs:{src:"src",renderText:["render-text","renderText"],showAll:["show-all","showAll"],originalSize:["original-size","originalSize"],zoom:"zoom",autoresize:"autoresize",showLoader:"showLoader"},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageChange:"pageChange",onError:"onError"},features:[E.Gb],decls:3,vars:1,consts:[["pdfViewerOutlet",""],[4,"ngIf"]],template:function(e,t){1&e&&(E.bd(0,Ee,0,0,"ng-template",null,0,E.cd),E.bd(2,ze,1,0,"cu-loader",1)),2&e&&(E.Ib(2),E.Dc("ngIf",t.showLoader&&!t.isLoaded))},directives:[o.q,X.a],styles:["[_nghost-%COMP%] {\n        display: block;\n        width: 100%;\n      }"]}),e})();const Me=["overlayOutlet"];function $e(e,t){1&e&&E.Xb(0,"cu-loader")}function Re(e,t){}const Se=["marks","selectedMark","scrollToId","markSize","dropdownTemplate","readOnly"];let Ue=(()=>{class e{constructor(e,t,n,a){this.componentFactoryResolver=e,this.applicationRef=t,this.injector=n,this.zone=a,this.destroy$=new I.a,this.markSize=38,this.zoom=1,this.showComments=!0,this.readOnly=!1,this.onError=new E.o,this.onAdd=new E.o,this.onDrop=new E.o,this.onSelect=new E.o,this.afterLoadComplete=new E.o,this.pageRendered=new E.o,this.overlayMap={},this.loaded=!1}ngOnInit(){}ngOnChanges(e){const t=Object(xe.a)(e,Se);if(Object.keys(t)){const e={};Object.keys(t).forEach(t=>{e[t]=this[t]}),Object.keys(this.overlayMap).forEach(t=>{const n=this.overlayMap[t],a=Object.assign({},e);a.marks&&(a.nextMark=String(this.marks.length+1),a.marks=this.getPageMarks(t)),n.instance.syncChanges(a)})}e.showComments&&Object.keys(this.overlayMap).forEach(e=>{const t=this.overlayMap[e].hostView.rootNodes[0];this.showComments?t.classList.remove("cu-hidden"):t.classList.add("cu-hidden")})}ngOnDestroy(){this.destroy$.next(),this.destroyOverlays()}getPageMarks(e){return(this.marks||[]).filter(t=>String(t.page||"1")===String(e))}pdfLoad(e){this.afterLoadComplete.emit(e),this.destroyOverlays(),this.loaded=!0}rendered(e){this.zone.run(()=>{this.pageRendered.emit(),this.overlayMap[e.pageNumber]?e.source.div.appendChild(this.overlayMap[e.pageNumber].hostView.rootNodes[0]):(this.overlayMap[e.pageNumber]=this.createOverlay(e.source.div),this.overlayMap[e.pageNumber].instance.marks=this.getPageMarks(e.pageNumber),this.overlayMap[e.pageNumber].instance.nextMark=String((this.marks||[]).length+1),this.overlayMap[e.pageNumber].instance.selectedMark=this.selectedMark,this.overlayMap[e.pageNumber].instance.scrollToId=this.scrollToId,this.overlayMap[e.pageNumber].instance.markSize=this.markSize,this.overlayMap[e.pageNumber].instance.page=e.pageNumber,this.overlayMap[e.pageNumber].instance.dropdownTemplate=this.dropdownTemplate,this.overlayMap[e.pageNumber].instance.onAdd.pipe(Object(h.a)(this.overlayMap[e.pageNumber].instance.destroy$)).subscribe(e=>{this.onAdd.emit(e)}),this.overlayMap[e.pageNumber].instance.onDrop.pipe(Object(h.a)(this.overlayMap[e.pageNumber].instance.destroy$)).subscribe(e=>{this.onDrop.emit(e)}),this.overlayMap[e.pageNumber].instance.onSelect.pipe(Object(h.a)(this.overlayMap[e.pageNumber].instance.destroy$)).subscribe(e=>{this.onSelect.emit(e)})),this.overlayMap[e.pageNumber].instance.syncChanges({canvasWidth:e.source.width,canvasHeight:e.source.height})})}createOverlay(e){const t=this.componentFactoryResolver.resolveComponentFactory(Ce).create(this.injector);this.applicationRef.attachView(t.hostView);const n=t.hostView.rootNodes[0];return e.appendChild(n),this.showComments||n.classList.add("cu-hidden"),t}pageChanged(e){}destroyOverlays(){Object.keys(this.overlayMap).forEach(e=>{const t=this.overlayMap[e];this.applicationRef.detachView(t.hostView),t.destroy()}),this.overlayMap={}}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(E.j),E.Wb(E.g),E.Wb(E.t),E.Wb(E.B))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-pdf-markup"]],viewQuery:function(e,t){if(1&e&&E.jd(Me,3,E.U),2&e){let e;E.Qc(e=E.rc())&&(t.overlayOutlet=e.first)}},hostAttrs:[1,"cu-pdf-markup"],inputs:{src:"src",marks:"marks",selectedMark:"selectedMark",scrollToId:"scrollToId",markSize:"markSize",dropdownTemplate:"dropdownTemplate",zoom:"zoom",showComments:"showComments",readOnly:"readOnly"},outputs:{onError:"onError",onAdd:"onAdd",onDrop:"onDrop",onSelect:"onSelect",afterLoadComplete:"after-load-complete",pageRendered:"page-rendered"},features:[E.Gb],decls:4,vars:8,consts:[[4,"ngIf"],[3,"src","render-text","show-all","original-size","zoom","autoresize","showLoader","after-load-complete","page-rendered","pageChange","onError"],["overlayOutlet",""]],template:function(e,t){1&e&&(E.bd(0,$e,1,0,"cu-loader",0),E.cc(1,"cu-pdf-viewer",1),E.qc("after-load-complete",function(e){return t.pdfLoad(e)})("page-rendered",function(e){return t.rendered(e)})("pageChange",function(e){return t.pageChanged(e)})("onError",function(e){return t.onError.emit(e)}),E.bc(),E.bd(2,Re,0,0,"ng-template",null,2,E.cd)),2&e&&(E.Dc("ngIf",!t.loaded),E.Ib(1),E.Dc("src",t.src)("render-text",!0)("show-all",!0)("original-size",!1)("zoom",t.zoom)("autoresize",!0)("showLoader",!1))},directives:[o.q,je,X.a],styles:[".cu-pdf-markup{display:block;min-width:0}.cu-pdf-markup .page{overflow:hidden!important}"],encapsulation:2,changeDetection:0}),e})();var Fe=n("o7Ov"),Le=n("320n"),Pe=n("xdr/"),We=n("tyNb");function Xe(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-wistia-overlay",17),E.qc("onClose",function(){return E.Uc(e),E.uc(2).toggleWistiaOverlay(!1)}),E.vc(1,"async"),E.bc()}if(2&e){const e=E.uc(2);E.Dc("wistiaId","60c5h2hccx")("user",E.wc(1,3,e.user$))("autoPlay",!0)}}function Ve(e,t){if(1&e){const e=E.dc();E.ac(0),E.cc(1,"cu-wistia-thumbnail",15),E.qc("click",function(){return E.Uc(e),E.uc().toggleWistiaOverlay(!0)}),E.bc(),E.bd(2,Xe,2,5,"cu-wistia-overlay",16),E.Zb()}if(2&e){const e=E.uc();E.Ib(1),E.Dc("wistiaId","60c5h2hccx"),E.Ib(1),E.Dc("ngIf",e.isShowedWistiaOverlay)}}function Ne(e,t){if(1&e){const e=E.dc();E.ac(0),E.cc(1,"div",18),E.qc("click",function(){return E.Uc(e),E.uc().startTrial()}),E.gc(2,19),E.bc(),E.Zb()}}const qe=function(e){return["/",e,"settings","billing"]};function Be(e,t){if(1&e&&(E.cc(0,"a",22),E.gc(1,23),E.vc(2,"async"),E.bc()),2&e){const e=E.uc(2);let t=null;E.Dc("routerLink",E.Hc(3,qe,null==(t=E.wc(2,1,e.team$))?null:t.id))}}function He(e,t){if(1&e&&(E.cc(0,"a",24),E.mc(1,25),E.Xb(2,"br"),E.jc(),E.bc()),2&e){const e=E.uc(2);E.Dc("href","mailto:?subject="+e.imageCommentingMailSubjectText,E.Xc)}}function Ge(e,t){if(1&e&&(E.ac(0),E.bd(1,Be,3,5,"a",20),E.vc(2,"async"),E.bd(3,He,3,1,"a",21),E.vc(4,"async"),E.Zb()),2&e){const e=E.uc();let t=null,n=null;E.Ib(1),E.Dc("ngIf",(null==(t=E.wc(2,2,e.team$))?null:t.role)<3),E.Ib(2),E.Dc("ngIf",!((null==(n=E.wc(4,4,e.team$))?null:n.role)<3))}}let Qe=(()=>{class e{constructor(e){this.store=e,this.team$=this.store.select(s.getTeam),this.user$=this.store.select(s.getUser),this.allowTrial$=this.store.select(s.getAllowTrial),this.isAdmin$=this.store.select(s.getIsAdmin),this.TeamPlan=oe.f,this.isShowedWistiaOverlay=!1,this.showVideo=!0,this.imageCommentingMailSubjectText=$localize`:@@cu-annotation-paywall__mail-subject_proofing:Please upgrade ClickUp so we can use Proofing`}ngOnInit(){}startTrial(){this.store.dispatch(new Fe.Rk([],oe.f.UNLIMITED))}toggleWistiaOverlay(e){this.isShowedWistiaOverlay=e}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(M.Store))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-annotation-paywall"]],hostVars:4,hostBindings:function(e,t){2&e&&(E.Lb(t.modifier),E.Ob("cu-annotation-paywall",!0))},inputs:{modifier:"modifier",showVideo:"showVideo"},decls:30,vars:8,consts:function(){let e,t,n,a,c,o,i,r,s;return e=$localize`:@@cu-annotation-paywall__title_proofing␟7a45832ac6a231fd45ca877c3bdc2128f7e9bfb8␟8303173890874758566: Proofing `,t=$localize`:@@cu-annotation-paywall__description_image-commenting␟73ffcab01ed6bff79bb6c0e25856c8541caf0580␟8399730055786277441: Create and pin comments `,n=$localize`:@@cu-annotation-paywall__list-item_create-pinned-comments␟b7f2ecc7fef4ae429dfaabee57ddd9fcefd7b44a␟7629746779884907441:Create pinned comments`,a=$localize`:@@cu-annotation-paywall__list-item_threaded-replies␟0599de3fd5ca02fcbf3d3c03f0a957cdd8d4e2f0␟3694182076030943496:Threaded replies`,c=$localize`:@@cu-annotation-paywall__list-item_assign-pinned-comments␟f5363bfb42f0bd0560b5c3321b37d44fce7e9c69␟3252027693887060042:Assign pinned Comments`,o=$localize`:@@cu-annotation-paywall__list-item_image-format-support␟9ebef63c2489450efdf36c7104464a2f9302d4ab␟5893137262269274187:PNG, GIF, JPEG, WEBP support`,i=$localize`:lowercase free|@@common_start-free-trial-1␟19acd094ab52a832e653e43f009409042b4b652c␟7022066918599995511: Start Free Trial `,r=$localize`:@@common_upgrade␟f147d0f7f965cccee2e77294cba8e1b88021fa08␟2849750161085431718:Upgrade`,s=$localize`:@@cu-annotation-paywall__ask-workspace-admin-upgrade␟4f1b9a1d9f6d1e322503c2668ac0325cbcdca152␟5467388659328502500: Ask your Workspace admin${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:LINE_BREAK:to upgrade `,[[1,"cu-annotation-paywall__paywall"],[1,"cu-annotation-paywall__paywall-row"],[1,"cu-annotation-paywall__paywall-icon",3,"icon"],[1,"cu-annotation-paywall__paywall-title"],e,[1,"cu-annotation-paywall__paywall-desc"],t,[4,"ngIf"],[1,"cu-annotation-paywall__paywall-list"],[1,"cu-annotation-paywall__paywall-list-item"],["icon","check",1,"cu-annotation-paywall__paywall-list-icon"],n,a,c,o,[1,"cu-annotation-paywall__paywall-video",3,"wistiaId","click"],[3,"wistiaId","user","autoPlay","onClose",4,"ngIf"],[3,"wistiaId","user","autoPlay","onClose"],[1,"cu-btn","cu-btn_sm","cu-btn_font-size-15","cu-btn_full-width",3,"click"],i,["class","cu-btn cu-btn_sm cu-btn_font-size-15 cu-btn_full-width",3,"routerLink",4,"ngIf"],["class","cu-btn cu-btn_sm cu-btn_font-size-15 cu-btn_full-width cu-annotation-paywall__btn",3,"href",4,"ngIf"],[1,"cu-btn","cu-btn_sm","cu-btn_font-size-15","cu-btn_full-width",3,"routerLink"],r,[1,"cu-btn","cu-btn_sm","cu-btn_font-size-15","cu-btn_full-width","cu-annotation-paywall__btn",3,"href"],s]},template:function(e,t){1&e&&(E.cc(0,"div",0),E.cc(1,"div",1),E.Xb(2,"div",2),E.cc(3,"div"),E.cc(4,"div",3),E.gc(5,4),E.bc(),E.cc(6,"div",5),E.gc(7,6),E.bc(),E.bc(),E.bc(),E.bd(8,Ve,3,2,"ng-container",7),E.cc(9,"div",8),E.cc(10,"div",9),E.Xb(11,"div",10),E.ac(12),E.gc(13,11),E.Zb(),E.bc(),E.cc(14,"div",9),E.Xb(15,"div",10),E.ac(16),E.gc(17,12),E.Zb(),E.bc(),E.cc(18,"div",9),E.Xb(19,"div",10),E.ac(20),E.gc(21,13),E.Zb(),E.bc(),E.cc(22,"div",9),E.Xb(23,"div",10),E.ac(24),E.gc(25,14),E.Zb(),E.bc(),E.bc(),E.bd(26,Ne,3,0,"ng-container",7),E.vc(27,"async"),E.bd(28,Ge,5,6,"ng-container",7),E.vc(29,"async"),E.bc()),2&e&&(E.Ib(2),E.Dc("icon","cu2-comment-lines"),E.Ib(6),E.Dc("ngIf",t.showVideo),E.Ib(18),E.Dc("ngIf",E.wc(27,4,t.allowTrial$)),E.Ib(2),E.Dc("ngIf",!E.wc(29,6,t.allowTrial$)))},directives:[R.a,o.q,Le.a,Pe.a,We.k],pipes:[o.b],styles:['.cu-annotation-paywall_modal{display:block;width:360px;border-radius:8px;padding:30px 35px;background:url(bg_modal.d885ed0100ca2c289e3f.png) 50%/cover no-repeat}.dark-theme .cu-annotation-paywall_modal{background:#2b343b}.cu-annotation-paywall_modal .cu-annotation-paywall__paywall-list{display:none}.cu-annotation-paywall_sidebar{width:100%;height:100%;position:absolute;padding:50px;background:url(bg_sidebar.2ba272ed78459b5b5df5.jpg) 50%/cover no-repeat;display:block;z-index:10;overflow:auto}.dark-theme .cu-annotation-paywall_sidebar{background:#2b343b}.cu-annotation-paywall__paywall-row{display:flex;align-items:center;margin-bottom:15px}.cu-annotation-paywall__paywall-icon{fill:#7b68ee;width:44px;height:44px;margin-right:15px;position:relative;padding:10px}@supports (--theme-main-color:#7b68ee){.cu-annotation-paywall__paywall-icon{fill:var(--theme-main-color)}}.cu-annotation-paywall__paywall-icon:before{content:"";display:block;position:absolute;background:#7b68ee;width:100%;height:100%;border-radius:50%;opacity:.5}@supports (--theme-main-color:#7b68ee){.cu-annotation-paywall__paywall-icon:before{background:var(--theme-main-color)}}.cu-annotation-paywall__paywall-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:500 21px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:5px;color:#292d34}.dark-theme .cu-annotation-paywall__paywall-title{color:#d5d6d7}.cu-annotation-paywall__paywall-desc{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 13px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-annotation-paywall__paywall-desc{color:#abaeb0}.cu-annotation-paywall__paywall-list{margin:50px 0}.cu-annotation-paywall__paywall-list-item{display:flex;font:400 14px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-annotation-paywall__paywall-list-item{color:#d5d6d7}.cu-annotation-paywall__paywall-list-item+.cu-annotation-paywall__paywall-list-item{margin-top:25px}.cu-annotation-paywall__paywall-list-icon{stroke:#7b68ee;margin-right:12px;width:15px;height:12px;stroke-width:2px}@supports (--theme-main-color:#7b68ee){.cu-annotation-paywall__paywall-list-icon{stroke:var(--theme-main-color)}}.cu-annotation-paywall__paywall-video{margin:50px auto 0}.cu-annotation-paywall__btn.cu-btn{text-align:center;line-height:1.2;min-height:40px;padding:5px;height:auto}'],encapsulation:2,changeDetection:0}),e})();const Ze=["imageMarkup"];function Je(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-image-markup",6,7),E.qc("onError",function(t){return E.Uc(e),E.uc().onError.emit(t)})("onAdd",function(t){return E.Uc(e),E.uc().addMark(t)})("onSelect",function(t){return E.Uc(e),E.uc().selectMark(t)})("onDrop",function(t){return E.Uc(e),E.uc().dropMark(t)})("onBackdropClick",function(t){return E.Uc(e),E.uc().onBackdropClick.emit(t)}),E.vc(2,"async"),E.vc(3,"async"),E.bc()}if(2&e){const e=E.uc(),t=E.Rc(6);let n=null;E.Dc("src",e.src||(null==e.attachment?null:e.attachment.thumbnail_large))("marks",E.wc(2,7,e.marks$))("selectedMark",e.selectedCommentId)("scrollToId",e.scrollToId)("dropdownTemplate",t)("showComments",e.showComments)("readOnly",!(null!=(n=E.wc(3,9,e.task$))&&null!=n.permissions&&n.permissions.comment))}}function Ke(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-pdf-markup",8),E.qc("onError",function(t){return E.Uc(e),E.uc().onError.emit(t)})("onAdd",function(t){return E.Uc(e),E.uc().addMark(t)})("onSelect",function(t){return E.Uc(e),E.uc().selectMark(t)})("onDrop",function(t){return E.Uc(e),E.uc().dropMark(t)})("after-load-complete",function(t){return E.Uc(e),E.uc().afterLoadComplete.emit(t)})("page-rendered",function(t){return E.Uc(e),E.uc().pageRendered.emit(t)}),E.vc(1,"async"),E.vc(2,"async"),E.bc()}if(2&e){const e=E.uc(),t=E.Rc(6);let n=null;E.Dc("src",e.src)("zoom",e.zoom)("marks",E.wc(1,8,e.marks$))("selectedMark",e.selectedCommentId)("scrollToId",e.scrollToId)("dropdownTemplate",t)("showComments",e.showComments)("readOnly",!(null!=(n=E.wc(2,10,e.task$))&&null!=n.permissions&&n.permissions.comment))}}function Ye(e,t){1&e&&(E.ac(0),E.gc(1,19),E.Zb())}function et(e,t){if(1&e&&(E.ac(0),E.gc(1,20),E.Zb()),2&e){const e=E.uc(3);E.Ib(1),E.kc(e.attachment.resolved_comments)(e.attachment.resolved_comments),E.hc(1)}}function tt(e,t){if(1&e){const e=E.dc();E.cc(0,"div",14),E.Xb(1,"div",15),E.cc(2,"div",16),E.qc("click",function(){return E.Uc(e),E.uc(2).toggleResolved()}),E.bd(3,Ye,2,0,"ng-container",17),E.bd(4,et,2,2,"ng-template",null,18,E.cd),E.bc(),E.bc()}if(2&e){const e=E.Rc(5),t=E.uc(2);E.Ib(3),E.Dc("ngIf",t.showResolved)("ngIfElse",e)}}function nt(e,t){1&e&&E.Xb(0,"cu-annotation-paywall",21),2&e&&E.Dc("modifier","cu-annotation-paywall_sidebar")}const at=function(e){return{resolved:e}};function ct(e,t){if(1&e){const e=E.dc();E.cc(0,"div",9),E.bd(1,tt,6,2,"div",10),E.bd(2,nt,1,1,"cu-annotation-paywall",11),E.vc(3,"async"),E.cc(4,"cu-comment-thread",12,13),E.qc("onNumberClick",function(t){return E.Uc(e),E.uc().numberClick(t)}),E.vc(6,"async"),E.vc(7,"async"),E.bc(),E.bc()}if(2&e){const e=t.$implicit,n=E.uc(),a=E.Rc(8);E.Ib(1),E.Dc("ngIf",n.showResolved||n.attachment.resolved_comments),E.Ib(1),E.Dc("ngIf",E.wc(3,19,n.showPaywall$)&&n.showComments),E.Ib(2),E.Dc("parentId",n.attachment.id)("type",n.parentType)("permissions",e.permissions)("permissionLevel",e.permission_level)("project",null==e?null:e.project)("user",E.wc(6,21,n.user$))("showAnyone",!0)("focusOnInit",!0)("canComment",!1)("users",E.wc(7,23,n.users$))("loadAllPages",!0)("assignedComments",!0)("filters",E.Hc(25,at,!!n.showResolved&&void 0))("readOnly",!(null!=e.permissions&&e.permissions.comment))("emptyTemplate",a)("debounceTime",200)("showUserGroups",!0)}}const ot=function(e,t){return{id:e,type:t}},it=function(){return{showParent:!0}};function rt(e,t){if(1&e&&(E.Xb(0,"cu-comment-thread",24),E.vc(1,"async"),E.vc(2,"async"),E.vc(3,"async"),E.vc(4,"async"),E.vc(5,"async")),2&e){const e=E.uc().mark,t=E.uc();let n=null,a=null,c=null;E.Dc("parentThread",E.Ic(24,ot,t.attachment.id,t.CommentType.Attachment))("parentId",e.id)("type",t.CommentType.Comment)("user",E.wc(1,14,t.user$))("users",E.wc(2,16,t.users$))("assignedComments",!1)("assignedParentComment",!0)("filters",E.Gc(27,it))("showAnyone",!0)("popupInBody",!0)("readOnly",!(null!=(n=E.wc(3,18,t.task$))&&null!=n.permissions&&n.permissions.comment))("permissions",null==(a=E.wc(4,20,t.task$))?null:a.permissions)("permissionLevel",null==(c=E.wc(5,22,t.task$))?null:c.permission_level)("showUserGroups",!0)}}function st(e,t){1&e&&E.Xb(0,"cu-annotation-paywall",27),2&e&&E.Dc("modifier","cu-annotation-paywall_modal")("showVideo",!1)}const lt=function(e,t,n,a){return{image_x:e,image_y:t,comment_number:n,page:a}};function mt(e,t){if(1&e&&(E.Xb(0,"cu-comment-thread",28),E.vc(1,"async"),E.vc(2,"async"),E.vc(3,"async"),E.vc(4,"async"),E.vc(5,"async")),2&e){const e=E.uc(2).mark,t=E.uc();let n=null,a=null,c=null;E.Dc("parentId",t.attachment.id)("focusOnInit",!0)("type",t.parentType)("doNotLoadComments",!0)("doNotDisplayComments",!0)("user",E.wc(1,18,t.user$))("users",E.wc(2,20,t.users$))("assignedComments",!0)("defaultAssignee",t.anyOneUser)("showAnyone",!0)("showUnassign",!1)("popupInBody",!0)("saveDraft",!0)("permissions",null==(n=E.wc(3,22,t.task$))?null:n.permissions)("permissionLevel",null==(a=E.wc(4,24,t.task$))?null:a.permission_level)("readOnly",!(null!=(c=E.wc(5,26,t.task$))&&null!=c.permissions&&c.permissions.comment))("showUserGroups",!0)("defaultPayload",E.Kc(28,lt,e.x,e.y,e.label,e.page))}}function dt(e,t){if(1&e&&(E.ac(0),E.bd(1,st,1,2,"cu-annotation-paywall",25),E.vc(2,"async"),E.bd(3,mt,6,33,"cu-comment-thread",26),E.vc(4,"async"),E.Zb()),2&e){const e=E.uc(2);E.Ib(1),E.Dc("ngIf",E.wc(2,2,e.showPaywall$)),E.Ib(2),E.Dc("ngIf",!E.wc(4,4,e.showPaywall$))}}function ut(e,t){if(1&e&&(E.bd(0,rt,6,28,"cu-comment-thread",22),E.bd(1,dt,5,6,"ng-container",23)),2&e){const e=t.mark,n=E.uc();E.Dc("ngIf",e.id!==n.NEW_MARK_ID),E.Ib(1),E.Dc("ngIf",e.id===n.NEW_MARK_ID)}}function ht(e,t){1&e&&(E.cc(0,"div",29),E.cc(1,"div",30),E.Xb(2,"div",31),E.ac(3),E.gc(4,32),E.Zb(),E.bc(),E.cc(5,"div",33),E.mc(6,34),E.Xb(7,"br"),E.jc(),E.bc(),E.Xb(8,"img",35),E.bc())}let pt=(()=>{class e{constructor(e,t,n,a){this.store=e,this.changeDetectorRef=t,this.dataService=n,this.actions$=a,this.fileType="image",this.zoom=1,this.showComments=!0,this.onError=new E.o,this.afterLoadComplete=new E.o,this.pageRendered=new E.o,this.onInit=new E.o,this.onBackdropClick=new E.o,this.parentId$=new k.a(null),this.taskId$=new k.a(null),this.task$=this.taskId$.pipe(Object(m.a)(e=>!!e),Object(l.a)(e=>this.store.select(Object(ee.d)(e))),Object(Z.a)(e=>{e||this.store.dispatch(new ie.x(this.taskId))})),this.team$=this.store.select(s.getTeam),this.user$=this.store.select(s.getUser),this.users$=this.taskId$.pipe(Object(m.a)(e=>!!e),Object(l.a)(e=>this.store.select(Object(re.I)(e)))),this.comments$=this.parentId$.pipe(Object(m.a)(e=>!!e),Object(l.a)(e=>this.store.select(Object(C.b)(String(this.parentType),e)))),this.marks$=this.comments$.pipe(Object(m.a)(e=>!!e),Object(d.a)(e=>e.map((e,t)=>{let n=String(t+1);if(void 0!==e.comment_number){const t=e.comment_number;n=Object(Y.a)(e.comment_number)?parseInt(t,10):t+1}return{id:e.id,x:e.image_x||0===e.image_x?parseFloat(e.image_x):50,y:e.image_y||0===e.image_y?parseFloat(e.image_y):50,label:n,page:e.page,payload:e}}))),this.showPaywall$=this.team$.pipe(Object(d.a)(e=>e&&[oe.f.FREE,oe.f.UNLIMITED].includes(e.plan_id)&&e.attachment_comments_usage>=100)),this.parentType=x.c.Attachment,this.CommentType=x.c,this.UserPermission=te.e,this.NEW_MARK_ID="new",this.anyOneUser=te.i,this.showResolved=!1,this.destroy$=new I.a}ngOnInit(){this.taskId$.pipe(Object(m.a)(e=>!!e),Object(u.a)(1),Object(p.a)(this.users$)).subscribe(([e,t])=>{t||this.store.dispatch(new V.R({taskId:e}))}),this.actions$.pipe(Object(ae.d)(ne.e.UpdateCommentSuccess,ne.e.DeleteCommentSuccess,ne.e.UndoDeleteCommentSuccess),Object(m.a)(e=>e.payload.type===x.c.Comment),Object(h.a)(this.destroy$)).subscribe(e=>{this.reloadComments(),this.reloadAttachment()}),this.actions$.pipe(Object(ae.d)(ne.e.CreateCommentSuccess,ne.e.UpdateCommentSuccess,ne.e.DeleteCommentSuccess,ne.e.UndoDeleteCommentSuccess),Object(m.a)(e=>e.payload.type===x.c.Attachment),Object(h.a)(this.destroy$)).subscribe(e=>{this.reloadAttachment()}),this.parentId$.pipe(Object(m.a)(e=>!!e),Object(J.a)(),Object(K.a)(250),Object(h.a)(this.destroy$)).subscribe(()=>{this.reloadAttachment()})}ngAfterViewInit(){setTimeout(()=>{this.onInit.emit()})}ngOnDestroy(){this.destroy$.next()}reloadComments(){this.commentThread&&this.commentThread.loadComments()}reloadAttachment(){this.dataService.getAttachmentsByIds([this.attachment.id],!1).subscribe(e=>{e.attachments&&e.attachments.length>0&&(this.attachment=e.attachments[0],this.changeDetectorRef.markForCheck())})}ngOnChanges(e){e.taskId&&this.taskId$.next(this.taskId),e.attachment&&this.parentId$.next(this.attachment&&this.attachment.id)}setZoom(e){this.imageMarkup.setZoom(e)}setFullWidth(){return this.imageMarkup.setFullWidth()}addMark(e){this.selectedCommentId=null}selectMark(e){this.selectedCommentId=e&&e.id}updateComment({comment:e,payload:t}){this.store.dispatch(new ne.J({parent:this.attachment.id,type:this.parentType,comment:Object.assign(Object.assign({},e),t),changes:t,removeResolved:!1}))}dropMark(e){this.updateComment({comment:e.payload,payload:{image_x:e.x,image_y:e.y}})}toggleResolved(){this.showResolved=!this.showResolved}numberClick(e){this.selectedCommentId=e.id,this.scrollToId!==e.id?this.scrollToId=e.id:(this.scrollToId=null,this.changeDetectorRef.detectChanges(),this.scrollToId=e.id,this.changeDetectorRef.detectChanges())}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(M.Store),E.Wb(E.h),E.Wb(b.a),E.Wb(ae.a))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-attachment-annotation"]],viewQuery:function(e,t){if(1&e&&(E.jd(Ze,1),E.jd(ce.a,1)),2&e){let e;E.Qc(e=E.rc())&&(t.imageMarkup=e.first),E.Qc(e=E.rc())&&(t.commentThread=e.first)}},hostAttrs:[1,"cu-attachment-annotation"],inputs:{attachment:"attachment",taskId:"taskId",src:"src",fileType:"fileType",zoom:"zoom",showComments:"showComments"},outputs:{onError:"onError",afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",onInit:"onInit",onBackdropClick:"onBackdropClick"},features:[E.Gb],decls:9,vars:7,consts:function(){let e,t,n,a,c;return e=$localize`:@@cu-attachment-annotation__hide-resolved-comments␟1ca33495fbbbb760dc268d1b4f31129b546c31a8␟139995641001759979:Hide resolved comments`,t=$localize`:␟ac13365fbb6c0096b960764ed2234d1d33d08612␟5251929851006179178:{VAR_PLURAL, plural, =0 {comment} =1 {comment} other {comments}}`,t=E.lc(t,{VAR_PLURAL:"\ufffd1\ufffd"}),n=$localize`:@@cu-attachment-annotation__show-resolved-comments␟c0e7fa920c0b0167eff53ae146de736be8228630␟3415174202437650846: Show ${"\ufffd0\ufffd"}:INTERPOLATION: resolved ${t}:ICU: `,a=$localize`:@@cu-attachment-annotation__no-comments-yet␟cbcf098babd83cfc7e9deb9e0e45e4f808d564c5␟1242177661746494429:No Comments Yet`,c=$localize`:@@cu-attachment-annotation__how-to-instructions␟c222dae094790d3c0f505e0a4c43000880ab579e␟166946827061565601: Click on the image to add comments${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:LINE_BREAK:and assign proofing requests. `,[["class","cu-attachment-annotation__body",3,"src","marks","selectedMark","scrollToId","dropdownTemplate","showComments","readOnly","onError","onAdd","onSelect","onDrop","onBackdropClick",4,"ngIf"],["class","cu-attachment-annotation__body",3,"src","zoom","marks","selectedMark","scrollToId","dropdownTemplate","showComments","readOnly","onError","onAdd","onSelect","onDrop","after-load-complete","page-rendered",4,"ngIf"],[1,"cu-attachment-annotation__sidebar"],["class","cu-attachment-annotation__sidebar-container",4,"ngIf"],["dropdownTemplate",""],["emptyTemplate",""],[1,"cu-attachment-annotation__body",3,"src","marks","selectedMark","scrollToId","dropdownTemplate","showComments","readOnly","onError","onAdd","onSelect","onDrop","onBackdropClick"],["imageMarkup",""],[1,"cu-attachment-annotation__body",3,"src","zoom","marks","selectedMark","scrollToId","dropdownTemplate","showComments","readOnly","onError","onAdd","onSelect","onDrop","after-load-complete","page-rendered"],[1,"cu-attachment-annotation__sidebar-container"],["class","cu-attachment-annotation__sidebar-header",4,"ngIf"],[3,"modifier",4,"ngIf"],[1,"cu-attachment-annotation__comments",3,"parentId","type","permissions","permissionLevel","project","user","showAnyone","focusOnInit","canComment","users","loadAllPages","assignedComments","filters","readOnly","emptyTemplate","debounceTime","showUserGroups","onNumberClick"],["commentThread",""],[1,"cu-attachment-annotation__sidebar-header"],[1,"cu-attachment-annotation__sidebar-header-divider"],[1,"cu-attachment-annotation__sidebar-header-toggle",3,"click"],[4,"ngIf","ngIfElse"],["showResolvedCommentsTmpl",""],e,n,[3,"modifier"],["class","cu-attachment-annotation__comments-dropdown",3,"parentThread","parentId","type","user","users","assignedComments","assignedParentComment","filters","showAnyone","popupInBody","readOnly","permissions","permissionLevel","showUserGroups",4,"ngIf"],[4,"ngIf"],[1,"cu-attachment-annotation__comments-dropdown",3,"parentThread","parentId","type","user","users","assignedComments","assignedParentComment","filters","showAnyone","popupInBody","readOnly","permissions","permissionLevel","showUserGroups"],[3,"modifier","showVideo",4,"ngIf"],["class","cu-attachment-annotation__comments-dropdown",3,"parentId","focusOnInit","type","doNotLoadComments","doNotDisplayComments","user","users","assignedComments","defaultAssignee","showAnyone","showUnassign","popupInBody","saveDraft","permissions","permissionLevel","readOnly","showUserGroups","defaultPayload",4,"ngIf"],[3,"modifier","showVideo"],[1,"cu-attachment-annotation__comments-dropdown",3,"parentId","focusOnInit","type","doNotLoadComments","doNotDisplayComments","user","users","assignedComments","defaultAssignee","showAnyone","showUnassign","popupInBody","saveDraft","permissions","permissionLevel","readOnly","showUserGroups","defaultPayload"],[1,"cu-attachment-annotation__sidebar-empty"],[1,"cu-attachment-annotation__sidebar-empty-title"],["icon","cu2-comment-lines",1,"cu-attachment-annotation__sidebar-empty-title-icon"],a,[1,"cu-attachment-annotation__sidebar-empty-desc"],c,["src","./assets/images/components/manager/attachment-annotation/placeholder.svg","alt","",1,"cu-attachment-annotation__sidebar-empty-image"]]},template:function(e,t){1&e&&(E.bd(0,Je,4,11,"cu-image-markup",0),E.bd(1,Ke,3,12,"cu-pdf-markup",1),E.cc(2,"div",2),E.bd(3,ct,8,27,"div",3),E.vc(4,"async"),E.bc(),E.bd(5,ut,2,2,"ng-template",null,4,E.cd),E.bd(7,ht,9,0,"ng-template",null,5,E.cd)),2&e&&(E.Dc("ngIf","image"===t.fileType),E.Ib(1),E.Dc("ngIf","pdf"===t.fileType),E.Ib(1),E.Ob("cu-attachment-annotation__sidebar_hidden",!t.showComments),E.Ib(1),E.Dc("ngIf",E.wc(4,5,t.task$)))},directives:[o.q,Q,Ue,ce.a,Qe,R.a],pipes:[o.b],styles:['.cu-attachment-annotation{display:flex;width:100%;height:100%}.cu-attachment-annotation__sidebar{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;flex-shrink:0;width:430px;opacity:1;z-index:10;padding-bottom:25px;box-shadow:0 1px 3px 0 rgba(0,0,0,.5)}.cu-attachment-annotation__sidebar_hidden{max-width:0;overflow:hidden;opacity:0}.cu-attachment-annotation__sidebar-container{display:flex;flex-direction:column;width:405px;overflow:hidden;position:relative;border-radius:12px;background:#fff}.dark-theme .cu-attachment-annotation__sidebar-container{background:#2b343b}.cu-attachment-annotation__sidebar-header{position:relative;flex-shrink:0;display:flex;align-items:center;padding:10px 20px}.cu-attachment-annotation__sidebar-header:before{content:"";display:block;position:absolute;width:100%;bottom:-8px;left:0;height:8px;z-index:1;pointer-events:none;background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0))}.dark-theme .cu-attachment-annotation__sidebar-header:before{background:linear-gradient(180deg,#2b343b 0,rgba(43,52,59,0))}.cu-attachment-annotation__sidebar-header-divider{flex-grow:1}.cu-attachment-annotation__sidebar-header-toggle{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;margin-left:10px;border-radius:4px;height:22px;padding:2px 6px 0;cursor:pointer;text-transform:uppercase;font:500 10px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-attachment-annotation__sidebar-header-toggle{color:#7c828d}.cu-attachment-annotation__sidebar-header-toggle:hover{background:#f2f2f2}.dark-theme .cu-attachment-annotation__sidebar-header-toggle:hover{background:#1e272e}.cu-attachment-annotation__sidebar-empty{display:flex;align-items:center;flex-direction:column}.cu-attachment-annotation__sidebar-empty-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-top:100px;font:500 17px/1 Gotham Pro,Proxima Nova,arial,serif;margin-bottom:15px;color:#292d34}.dark-theme .cu-attachment-annotation__sidebar-empty-title{color:#d5d6d7}.cu-attachment-annotation__sidebar-empty-title-icon{width:20px;height:18px;display:inline-block;margin-right:3px;margin-bottom:-2px;fill:#b9bec7}.dark-theme .cu-attachment-annotation__sidebar-empty-title-icon{fill:#7c828d}.cu-attachment-annotation__sidebar-empty-desc{text-align:center;margin-bottom:20px;font:400 14px/1.4 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-attachment-annotation__sidebar-empty-desc{color:#abaeb0}.cu-attachment-annotation__sidebar-empty-image{margin-left:-30px}.cu-attachment-annotation__body{flex-grow:1}.cu-attachment-annotation__comments{width:100%;height:0;flex-grow:1;overflow:hidden}.cu-attachment-annotation__comments .comment-bar.no-permission{display:none}.cu-attachment-annotation__comments .comments-container{padding:0 20px 20px}.cu-attachment-annotation__comments .comments-container .ps__rail-y{z-index:10}.cu-attachment-annotation__comments-dropdown .comments-container{padding:0 15px}.cu-attachment-annotation__comments-dropdown .thread-container{max-height:calc(100vh - 150px);min-width:480px}.cu-attachment-annotation__comments-dropdown .comment-bar{padding:0;min-height:0}.cu-attachment-annotation__comments-dropdown .comment-bar_active{padding:0 0 10px}.cu-attachment-annotation__comments-dropdown .comment-bar_active .comment-bar__icon{width:30px;height:30px;top:5px}.cu-attachment-annotation__comments-dropdown .comment-bar .comment-bar__icon{width:20px;height:20px;top:10px}.cu-attachment-annotation__comments-dropdown .comment-bar.no-permission{display:none}.cu-editor-wrapper .cu-editor-content .cu-attachment-annotation__comments-dropdown .comment-bar .ql-editor{height:auto;min-height:0;max-height:280px;padding:10px 20px 12px;margin:0}.cu-editor-wrapper .cu-editor-content .cu-attachment-annotation__comments-dropdown .comment-bar .ql-editor *{font-size:14px}.cu-attachment-annotation__comments-dropdown .comments-container .ql-editor{text-align:left;direction:ltr;max-height:280px;min-height:0}'],encapsulation:2,changeDetection:0}),e})();var bt=n("zjPF"),gt=n("yw8I"),ft=n("3Pt+");let wt=(()=>{class e{transform(e){return`${("0"+Math.floor(e/60)).slice(-2)}:${("0"+e%60).slice(-2)}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=E.Vb({name:"secondsToMinutes",type:e,pure:!0}),e})();const vt=["audioPlayer"];function _t(e,t){1&e&&(E.tc(),E.cc(0,"svg",10),E.Xb(1,"path",11),E.bc())}function yt(e,t){1&e&&(E.tc(),E.cc(0,"svg",12),E.Xb(1,"path",13),E.bc())}function kt(e,t){1&e&&(E.tc(),E.cc(0,"svg",14),E.Xb(1,"path",15),E.bc())}function It(e,t){if(1&e&&(E.ac(0),E.dd(1),E.vc(2,"secondsToMinutes"),E.Zb()),2&e){const e=E.uc();E.Ib(1),E.fd(" ",E.wc(2,1,e.currentTime),"/")}}function Dt(e,t){1&e&&(E.tc(),E.cc(0,"svg",16),E.Xb(1,"path",17),E.Xb(2,"path",18),E.bc())}function Ct(e,t){1&e&&(E.tc(),E.cc(0,"svg",16),E.Xb(1,"path",17),E.Xb(2,"path",19),E.bc())}const xt=function(){return[!0,!1]};let At=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.autoPlay=!1,this.loaderDisplay=!1,this.isPlaying=!1,this.currentTime=0,this.volume=.1,this.duration=.01}ngOnInit(){this.bindPlayerEvent(),this.autoPlay&&this.play()}bindPlayerEvent(){this.player.nativeElement.addEventListener("playing",()=>{this.isPlaying=!0,this.duration=Math.floor(this.player.nativeElement.duration),this.changeDetectorRef.markForCheck()}),this.player.nativeElement.addEventListener("pause",()=>{this.isPlaying=!1,this.changeDetectorRef.markForCheck()}),this.player.nativeElement.addEventListener("timeupdate",()=>{this.currentTime=Math.floor(this.player.nativeElement.currentTime),this.changeDetectorRef.markForCheck()}),this.player.nativeElement.addEventListener("volume",()=>{this.volume=Math.floor(this.player.nativeElement.volume),this.changeDetectorRef.markForCheck()}),this.player.nativeElement.addEventListener("loadstart",()=>{this.loaderDisplay=!0,this.changeDetectorRef.markForCheck()}),this.player.nativeElement.addEventListener("loadeddata",()=>{this.loaderDisplay=!1,this.duration=Math.floor(this.player.nativeElement.duration),this.changeDetectorRef.markForCheck()})}playBtnHandler(){this.loaderDisplay||(this.player.nativeElement.paused?this.player.nativeElement.play(this.currentTime):(this.currentTime=this.player.nativeElement.currentTime,this.player.nativeElement.pause()))}play(){setTimeout(()=>{this.player.nativeElement.play()},0)}setProgress(e){this.player.nativeElement.currentTime=e}toggleVolume(){this.setVolume(0===this.volume?1:0)}setVolume(e){this.volume=e,this.player.nativeElement.volume=this.volume}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(E.h))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-audio-player"]],viewQuery:function(e,t){if(1&e&&E.jd(vt,3),2&e){let e;E.Qc(e=E.rc())&&(t.player=e.first)}},hostAttrs:[1,"cu-audio-player"],inputs:{src:"src",autoPlay:"autoPlay"},decls:14,vars:20,consts:[[3,"src"],["audioPlayer",""],[1,"cu-audio-player__control",3,"click"],["class","cu-audio-player__control-play","width","9","height","10","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","cu-audio-player__control-pause","width","8","height","10","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","class","cu-audio-player__control-loader",4,"ngIf"],[1,"cu-audio-player__duration"],[4,"ngIf"],[1,"cu-audio-player__slider",3,"min","max","step","connect","ngModel","change"],["width","16","height","16","xmlns","http://www.w3.org/2000/svg","class","cu-audio-player__control-volume",4,"ngIf"],["width","9","height","10","xmlns","http://www.w3.org/2000/svg",1,"cu-audio-player__control-play"],["d","M0 1.618A1 1 0 011.447.724l6.764 3.382a1 1 0 010 1.788L1.447 9.276A1 1 0 010 8.382V1.618z"],["width","8","height","10","fill","none","xmlns","http://www.w3.org/2000/svg",1,"cu-audio-player__control-pause"],["fill-rule","evenodd","clip-rule","evenodd","d","M1 0a1 1 0 00-1 1v8a1 1 0 001 1h1a1 1 0 001-1V1a1 1 0 00-1-1H1zm5 0a1 1 0 00-1 1v8a1 1 0 001 1h1a1 1 0 001-1V1a1 1 0 00-1-1H6z","fill","#fff"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"cu-audio-player__control-loader"],["d","M456.433 371.72l-27.79-16.045c-7.192-4.152-10.052-13.136-6.487-20.636 25.82-54.328 23.566-118.602-6.768-171.03-30.265-52.529-84.802-86.621-144.76-91.424C262.35 71.922 256 64.953 256 56.649V24.56c0-9.31 7.916-16.609 17.204-15.96 81.795 5.717 156.412 51.902 197.611 123.408 41.301 71.385 43.99 159.096 8.042 232.792-4.082 8.369-14.361 11.575-22.424 6.92z"],["width","16","height","16","xmlns","http://www.w3.org/2000/svg",1,"cu-audio-player__control-volume"],["fill","none","d","M0 0h16v16H0z"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.146 2.854L3 6H2a1 1 0 00-1 1v2a1 1 0 001 1h1l3.146 3.146A.5.5 0 007 12.793V3.207a.5.5 0 00-.854-.353zM10.586 8L8.793 6.207l1.414-1.414L12 6.586l1.793-1.793 1.414 1.414L13.414 8l1.793 1.793-1.414 1.414L12 9.414l-1.793 1.793-1.414-1.414L10.586 8z"],["fill-rule","evenodd","clip-rule","evenodd","d","M9 13.663A5.752 5.752 0 009 2.337v1.531a4.252 4.252 0 010 8.264v1.531zM6.146 2.853L3 6H2a1 1 0 00-1 1v2a1 1 0 001 1h1l3.146 3.146A.5.5 0 007 12.793V3.207a.5.5 0 00-.854-.353zM10.75 8A2.751 2.751 0 019 10.563V8.75a1.244 1.244 0 000-1.5V5.437A2.751 2.751 0 0110.75 8z"]],template:function(e,t){1&e&&(E.Xb(0,"audio",0,1),E.cc(2,"div",2),E.qc("click",function(){return t.playBtnHandler()}),E.bd(3,_t,2,0,"svg",3),E.bd(4,yt,2,0,"svg",4),E.bd(5,kt,2,0,"svg",5),E.bc(),E.cc(6,"div",6),E.bd(7,It,3,3,"ng-container",7),E.dd(8),E.vc(9,"secondsToMinutes"),E.bc(),E.cc(10,"nouislider",8),E.qc("change",function(e){return t.setProgress(e)}),E.bc(),E.cc(11,"div",2),E.qc("click",function(){return t.toggleVolume()}),E.bd(12,Dt,3,0,"svg",9),E.bd(13,Ct,3,0,"svg",9),E.bc()),2&e&&(E.Dc("src",t.src,E.Xc),E.Ib(2),E.Ob("cu-audio-player__control_active",t.isPlaying)("cu-disabled",t.loaderDisplay),E.Ib(1),E.Dc("ngIf",!t.loaderDisplay&&!t.isPlaying),E.Ib(1),E.Dc("ngIf",!t.loaderDisplay&&t.isPlaying),E.Ib(1),E.Dc("ngIf",t.loaderDisplay),E.Ib(2),E.Dc("ngIf",.01!==t.duration),E.Ib(1),E.fd("",E.wc(9,17,t.duration),"\n"),E.Ib(2),E.Dc("min",0)("max",t.duration)("step",.5)("connect",E.Gc(19,xt))("ngModel",t.currentTime),E.Ib(2),E.Dc("ngIf",0===t.volume),E.Ib(1),E.Dc("ngIf",t.volume>0))},directives:[o.q,gt.a,ft.p,ft.s],pipes:[wt],styles:['.cu-audio-player{width:450px;height:40px;display:flex;align-items:center;background-color:#fff;border-radius:20px;padding:0 5px}.cu-audio-player__control{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;cursor:pointer}.cu-audio-player__control:hover .cu-audio-player__control-play,.cu-audio-player__control:hover .cu-audio-player__control-volume{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-audio-player__control:hover .cu-audio-player__control-play,.cu-audio-player__control:hover .cu-audio-player__control-volume{fill:var(--theme-main-color)}}.cu-audio-player__control_active{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-audio-player__control_active{background:var(--theme-main-color)}}.cu-audio-player__control_active:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-audio-player__control_active:hover{background:var(--theme-main-color-dark)}}.cu-audio-player__control-pause,.cu-audio-player__control-play,.cu-audio-player__control-volume{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s}.cu-audio-player__control-play,.cu-audio-player__control-volume{fill:#292d34}.cu-audio-player__control-loader{fill:#7b68ee;width:16px;height:16px;animation:spinner 1.2s linear infinite}@supports (--theme-main-color:#7b68ee){.cu-audio-player__control-loader{fill:var(--theme-main-color)}}.cu-audio-player__duration{display:flex;align-items:center;justify-content:center;font:400 12px/1 monospace;color:#292d34;margin-right:17px;margin-left:12px}.cu-audio-player__slider{flex-grow:1;margin:0;padding:0 5px 0 0}.cu-audio-player__slider .noUi-target{background:transparent;border:0;box-shadow:none}.cu-audio-player__slider .noUi-target:before{content:"";display:block;position:absolute;top:7px;left:0;width:100%;height:4px;background:#e3e5e9;border-radius:2px}.cu-audio-player__slider .noUi-handle{background:transparent;box-shadow:none;border:0;top:-2px!important;right:-4px!important;width:8px;height:8px;cursor:pointer}.cu-audio-player__slider .noUi-handle:after,.cu-audio-player__slider .noUi-handle:before{display:none}.cu-audio-player__slider .noUi-base{cursor:pointer}.cu-audio-player__slider .noUi-connects{border-radius:2px;height:4px;top:7px}.cu-audio-player__slider .noUi-connect{background:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-audio-player__slider .noUi-connect{background:var(--theme-main-color)}}'],encapsulation:2,changeDetection:0}),e})();var Ot=n("8LOJ");const Tt=["frame"];function Et(e,t){if(1&e&&(E.Xb(0,"div",5),E.vc(1,"safePurify")),2&e){const e=E.uc(2);E.Dc("innerHTML",E.wc(1,1,e.content),E.Vc)}}function zt(e,t){1&e&&E.Xb(0,"iframe",null,6)}function jt(e,t){if(1&e&&(E.ac(0),E.bd(1,Et,2,3,"div",4),E.bd(2,zt,2,0,"iframe",3),E.Zb()),2&e){const e=E.uc();E.Ib(1),E.Dc("ngIf","html"===e.attachment.extension),E.Ib(1),E.Dc("ngIf","html"!==e.attachment.extension)}}function Mt(e,t){1&e&&E.Xb(0,"cu-loader")}const $t=function(e){return{overflow:e}};let Rt=(()=>{class e{constructor(e,t){this.dataService=e,this.changeDetector=t,this.loading=!0}ngOnInit(){}ngOnChanges(e){e.attachment&&this.attachment&&this.loadedUrl!==this.attachment.url&&this.dataService.getFile(this.attachment.url_w_host||`${this.attachment.url}?host=${this.env}`).subscribe(e=>{this.loadedUrl=this.attachment.url,this.content=e,this.loading=!1,this.changeDetector.markForCheck(),setTimeout(()=>{this.frame&&(this.frame.nativeElement.contentWindow.document.open(),this.frame.nativeElement.contentWindow.document.write(this.content),this.frame.nativeElement.contentWindow.document.close())})})}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(b.a),E.Wb(E.h))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-email-attachment"]],viewQuery:function(e,t){if(1&e&&E.jd(Tt,1),2&e){let e;E.Qc(e=E.rc())&&(t.frame=e.first)}},inputs:{attachment:"attachment",env:"env"},features:[E.Gb],decls:6,vars:6,consts:[[1,"cu-email-attachment"],[1,"cu-email-attachment__subject"],[1,"cu-email-attachment__content",3,"ngStyle"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["frame",""]],template:function(e,t){1&e&&(E.cc(0,"div",0),E.cc(1,"div",1),E.dd(2),E.bc(),E.cc(3,"div",2),E.bd(4,jt,3,2,"ng-container",3),E.bd(5,Mt,1,0,"cu-loader",3),E.bc(),E.bc()),2&e&&(E.Ib(2),E.fd(" ",null==t.attachment.email_data?null:t.attachment.email_data.subject," "),E.Ib(1),E.Dc("ngStyle",E.Hc(4,$t,"html"===t.attachment.extension?"auto":"")),E.Ib(1),E.Dc("ngIf",!t.loading),E.Ib(1),E.Dc("ngIf",t.loading))},directives:[o.t,o.q,X.a],pipes:[Ot.a],styles:['.cu-email-attachment{background:#fff;height:calc(100vh - 100px);width:80vw;margin:20px;padding:20px}.cu-email-attachment__content{height:calc(100% - 50px)}.dark-theme .cu-email-attachment__content *{color:#343434}.cu-email-attachment__content iframe{background:#fff;display:block;border:none;height:100%;width:100%}.cu-email-attachment__content{font-family:Gotham Pro,Proxima Nova,arial,serif;font-size:10pt;line-height:1.5em}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-email-attachment__content{font-family:var(--global-font-support)}}.cu-email-attachment__content code,.cu-email-attachment__content pre,.cu-email-attachment__content tt{font:1em/1.5em Andale Mono,Lucida Console,monospace}.cu-email-attachment__content b,.cu-email-attachment__content h1,.cu-email-attachment__content h2,.cu-email-attachment__content h3,.cu-email-attachment__content h4,.cu-email-attachment__content h5,.cu-email-attachment__content h6,.cu-email-attachment__content strong{font-weight:700}.cu-email-attachment__content dfn,.cu-email-attachment__content em,.cu-email-attachment__content i{font-style:italic}.cu-email-attachment__content dfn{font-weight:700}.cu-email-attachment__content code,.cu-email-attachment__content kbd,.cu-email-attachment__content p,.cu-email-attachment__content pre{margin:0 0 1.5em}.cu-email-attachment__content blockquote{margin:1em}.cu-email-attachment__content cite{font-style:italic}.cu-email-attachment__content li ol,.cu-email-attachment__content li ul{margin:0 1.5em}.cu-email-attachment__content ol,.cu-email-attachment__content ul{margin:1.5em}.cu-email-attachment__content ul{list-style-type:disc}.cu-email-attachment__content ol{list-style-type:decimal}.cu-email-attachment__content ol ol{list-style:upper-alpha}.cu-email-attachment__content ol ol ol{list-style:lower-roman}.cu-email-attachment__content ol ol ol ol{list-style:lower-alpha}.cu-email-attachment__content dl{margin:0 0 1.5em}.cu-email-attachment__content dl dt{font-weight:700}.cu-email-attachment__content dd{margin-left:1.5em}.cu-email-attachment__content del{text-decoration:line-through}.cu-email-attachment__content pre{margin:1.5em 0;white-space:pre}.cu-email-attachment__content a:link,.cu-email-attachment__content a:visited{color:-webkit-link;text-decoration:underline;cursor:pointer}.cu-email-attachment__content a:link:active,.cu-email-attachment__content a:visited:active{color:-webkit-link}.cu-email-attachment__subject{font:500 18px Gotham Pro,Proxima Nova,arial,serif;margin:15px 0}'],encapsulation:2,changeDetection:0}),e})();var St=n("kGnP");const Ut=["input"],Ft=["textFileContent"],Lt=["copyBtn"],Pt=["imgFileContainer"],Wt=["imgFileItem"],Xt=["imageMarkup"],Vt=["videoFileContainer"],Nt=function(e){return{"preview-back_disabled":e}};function qt(e,t){if(1&e){const e=E.dc();E.cc(0,"div",42),E.qc("click",function(){return E.Uc(e),E.uc(2).prev()}),E.bc()}if(2&e){const e=E.uc(2);E.Dc("ngClass",E.Hc(2,Nt,0===e.currentIndex))("icon","preview-back")}}const Bt=function(e){return{"preview-forward_disabled":e}};function Ht(e,t){if(1&e){const e=E.dc();E.cc(0,"div",43),E.qc("click",function(){return E.Uc(e),E.uc(2).next()}),E.bc()}if(2&e){const e=E.uc(2);E.Dc("ngClass",E.Hc(2,Bt,e.currentIndex===e.attachments.length-1))("icon","preview-forward")}}const Gt=function(e){return{"cu-hidden":e}};function Qt(e,t){if(1&e){const e=E.dc();E.cc(0,"div",50),E.qc("click",function(){return E.Uc(e),E.uc(3).edit()}),E.cc(1,"div",51),E.dd(2),E.bc(),E.Xb(3,"div",52),E.bc()}if(2&e){const e=E.uc(3);E.ad("pointer-events",e.isSharingApp?"none":null),E.Ib(2),E.fd(" ",null==e.currentAttachment?null:e.currentAttachment.title," "),E.Ib(1),E.Dc("ngClass",E.Hc(5,Gt,!(null!=e.currentAttachment&&e.currentAttachment.id)))("icon","cu2-pencil-2")}}function Zt(e,t){if(1&e){const e=E.dc();E.ac(0),E.bd(1,Qt,4,7,"div",44),E.cc(2,"div",45),E.Xb(3,"input",46,47),E.cc(5,"div",48),E.qc("click",function(){return E.Uc(e),E.uc(2).save()}),E.bc(),E.cc(6,"div",49),E.qc("click",function(){return E.Uc(e),E.uc(2).cancel()}),E.bc(),E.bc(),E.Zb()}if(2&e){const e=E.uc(2);E.Ib(1),E.Dc("ngIf",!e.editing),E.Ib(1),E.Ob("cu-hidden",!e.editing)("comment-viewer__header2-name_active",e.editing),E.Ib(3),E.Dc("icon","cu2-check-3"),E.Ib(1),E.Dc("icon","cu2-close")}}function Jt(e,t){if(1&e){const e=E.dc();E.cc(0,"div",53),E.qc("click",function(){return E.Uc(e),E.uc(2).close()}),E.bc()}}function Kt(e,t){if(1&e){const e=E.dc();E.cc(0,"div",60),E.qc("click",function(){return E.Uc(e),E.uc(3).setFullSize()}),E.bc()}}function Yt(e,t){if(1&e){const e=E.dc();E.cc(0,"div",54),E.bd(1,Kt,1,0,"div",55),E.cc(2,"div",56),E.cc(3,"div",57),E.qc("click",function(){return E.Uc(e),E.uc(2).performZoom(!1)}),E.bc(),E.cc(4,"div",58),E.dd(5),E.vc(6,"number"),E.bc(),E.cc(7,"div",59),E.qc("click",function(){return E.Uc(e),E.uc(2).performZoom()}),E.bc(),E.bc(),E.bc()}if(2&e){const e=E.uc(2);E.Ib(1),E.Dc("ngIf","pdf"!==(null==e.currentAttachment?null:e.currentAttachment.extension)&&!e.forInvoice),E.Ib(4),E.fd(" ",E.xc(6,2,100*e.zoom,"1.0-0"),"% ")}}function en(e,t){if(1&e&&(E.cc(0,"a",61),E.cc(1,"div",62),E.Xb(2,"div",63),E.cc(3,"div",64),E.gc(4,65),E.bc(),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Jb("href",e.forInvoice?null==e.currentAttachment?null:e.currentAttachment.safeUrl:null==e.currentAttachment?null:e.currentAttachment.url,E.Xc)}}function tn(e,t){if(1&e&&(E.cc(0,"a",66),E.cc(1,"div",62),E.Xb(2,"div",67),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Dc("href",e.isForIFramePreview&&e.officePreviewLink?e.officePreviewLink:e.forInvoice?null==e.currentAttachment?null:e.currentAttachment.safeUrl:(null==e.currentAttachment?null:e.currentAttachment.url_w_query)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?view=open",E.Xc)}}const nn=function(e){return["","t",e]};function an(e,t){if(1&e&&(E.cc(0,"a",68),E.cc(1,"div",62),E.Xb(2,"div",67),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Dc("cuLink",E.Hc(1,nn,e.taskId))}}function cn(e,t){if(1&e&&(E.cc(0,"a",69),E.cc(1,"div",62),E.Xb(2,"div",70),E.cc(3,"div",64),E.gc(4,71),E.bc(),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Jb("href",null==e.currentAttachment?null:e.currentAttachment.url,E.Xc),E.Ib(4),E.kc(e.cloudData[null==e.currentAttachment?null:e.currentAttachment.source].title),E.hc(4)}}function on(e,t){if(1&e&&(E.cc(0,"a",69),E.cc(1,"div",62),E.Xb(2,"div",70),E.cc(3,"div",64),E.gc(4,72),E.bc(),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Jb("href",e.gmailUrl,E.Xc)}}function rn(e,t){if(1&e&&(E.cc(0,"a",73),E.cc(1,"div",62),E.Xb(2,"div",70),E.cc(3,"div",64),E.gc(4,74),E.bc(),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Jb("href",e.outlookUrl,E.Xc)}}function sn(e,t){if(1&e&&(E.cc(0,"a",69),E.cc(1,"div",62),E.Xb(2,"div",70),E.cc(3,"div",64),E.gc(4,75),E.bc(),E.bc(),E.bc()),2&e){const e=E.uc(2);E.Jb("href",(null==e.currentAttachment?null:e.currentAttachment.url_w_query)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?view=open",E.Xc)}}const ln=function(e){return{"comment-viewer__btn_done":e}};function mn(e,t){if(1&e){const e=E.dc();E.cc(0,"a",76),E.qc("click",function(){return E.Uc(e),E.uc(2).copyLink()}),E.cc(1,"div",62),E.Xb(2,"div",77),E.bc(),E.cc(3,"div",78),E.Xb(4,"div",79),E.bc(),E.bc()}if(2&e){const e=E.uc(2);E.Dc("ngClass",E.Hc(2,ln,e.copied))("cbContent",(null==e.currentAttachment?null:e.currentAttachment.url_w_query)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?view=open")}}function dn(e,t){1&e&&(E.cc(0,"div",80),E.mc(1,81),E.Xb(2,"br"),E.jc(),E.bc())}function un(e,t){if(1&e){const e=E.dc();E.cc(0,"a",82),E.qc("click",function(){E.Uc(e);const t=E.uc(2);return t.canChangeDescription?t.toggleCoverImage():null}),E.cc(1,"div",62),E.Xb(2,"div",83),E.bc(),E.bc()}if(2&e){const e=E.uc(2);E.Dc("cuTooltip",e.canChangeDescription?(null==e.coverImage?null:e.coverImage.id)===(null==e.currentAttachment?null:e.currentAttachment.id)?e.commonStringsService.unpinCoverImageText:e.commonStringsService.pinCoverImageText:null),E.Ib(2),E.Ob("current-cover-image",(null==e.coverImage?null:e.coverImage.id)===(null==e.currentAttachment?null:e.currentAttachment.id))}}function hn(e,t){if(1&e){const e=E.dc();E.cc(0,"a",82),E.qc("click",function(){return E.Uc(e),E.uc(2).deleteAttachment()}),E.cc(1,"div",62),E.Xb(2,"div",84),E.bc(),E.bc()}if(2&e){const e=E.uc(2);E.Dc("cuTooltip",e.canDelete||e.onlyDeleteIfOwner&&(null==e.user?null:e.user.id)===(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id)?e.commonStringsService.deleteText:e.deleteAttachmentNoPermsText),E.Ib(1),E.Ob("disabled-action",!(e.canDelete||e.onlyDeleteIfOwner&&(null==e.user?null:e.user.id)===(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id))),E.Ib(1),E.Ob("disabled-action",!(e.canDelete||e.onlyDeleteIfOwner&&(null==e.user?null:e.user.id)===(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id)))}}function pn(e,t){if(1&e){const e=E.dc();E.cc(0,"div",53),E.qc("click",function(){return E.Uc(e),E.uc(2).close()}),E.bc()}}function bn(e,t){1&e&&(E.ac(0),E.gc(1,92),E.Zb())}function gn(e,t){1&e&&(E.ac(0),E.gc(1,93),E.Zb())}function fn(e,t){if(1&e&&(E.bd(0,gn,2,0,"ng-container",89),E.vc(1,"async")),2&e){E.uc();const e=E.Rc(13),t=E.uc(2);let n=null;E.Dc("ngIf",1===(null==(n=E.wc(1,2,t.comments$))?null:n.length))("ngIfElse",e)}}function wn(e,t){1&e&&(E.ac(0),E.gc(1,94),E.Zb())}function vn(e,t){if(1&e){const e=E.dc();E.ac(0),E.cc(1,"div",85),E.qc("click",function(){return E.Uc(e),E.uc(2).toggleComments()}),E.cc(2,"div",86),E.vc(3,"async"),E.Xb(4,"div",87),E.cc(5,"div",88),E.dd(6),E.vc(7,"async"),E.bc(),E.bc(),E.bd(8,bn,2,0,"ng-container",89),E.vc(9,"async"),E.bd(10,fn,2,4,"ng-template",null,90,E.cd),E.bd(12,wn,2,0,"ng-template",null,91,E.cd),E.bc(),E.cc(14,"div",53),E.qc("click",function(){return E.Uc(e),E.uc(2).close()}),E.bc(),E.Zb()}if(2&e){const e=E.Rc(11),t=E.uc(2);let n=null,a=null,c=null;E.Ib(1),E.Ob("comment-viewer__header2-comments_active",t.showComments),E.Ib(1),E.Ob("comment-viewer__header2-comments-counter_active",null==(n=E.wc(3,7,t.comments$))?null:n.length),E.Ib(4),E.fd(" ",(null==(a=E.wc(7,9,t.comments$))?null:a.length)||""," "),E.Ib(2),E.Dc("ngIf",0===(null==(c=E.wc(9,11,t.comments$))?null:c.length))("ngIfElse",e)}}function _n(e,t){1&e&&E.Yb(0)}const yn=function(e){return{"comment-viewer_reset-theme-color":e}};function kn(e,t){if(1&e){const e=E.dc();E.cc(0,"div",20),E.bd(1,qt,1,4,"div",21),E.bd(2,Ht,1,4,"div",22),E.cc(3,"div",23),E.cc(4,"div",24),E.qc("click",function(){return E.Uc(e),E.uc().close()}),E.bc(),E.cc(5,"div",25),E.bd(6,Zt,7,7,"ng-container",26),E.vc(7,"async"),E.bd(8,Jt,1,0,"div",27),E.vc(9,"async"),E.bd(10,Yt,8,5,"div",28),E.cc(11,"div",29),E.bd(12,en,5,1,"a",30),E.bd(13,tn,3,1,"a",31),E.bd(14,an,3,3,"a",32),E.bd(15,cn,5,2,"a",33),E.bd(16,on,5,1,"a",33),E.bd(17,rn,5,1,"a",34),E.bd(18,sn,5,1,"a",33),E.bd(19,mn,5,4,"a",35),E.bd(20,dn,3,0,"div",36),E.bd(21,un,3,3,"a",37),E.bd(22,hn,3,5,"a",37),E.vc(23,"async"),E.bc(),E.bd(24,pn,1,0,"div",27),E.vc(25,"async"),E.bc(),E.cc(26,"div",38),E.bd(27,vn,15,13,"ng-container",26),E.cc(28,"div",39),E.qc("click",function(){return E.Uc(e),E.uc().close()}),E.bc(),E.bc(),E.bc(),E.cc(29,"div",40),E.qc("click",function(t){return E.Uc(e),E.uc().handleBodyClick(t)}),E.bd(30,_n,1,0,"ng-container",41),E.bc(),E.bc()}if(2&e){const e=E.uc(),t=E.Rc(26),n=E.Rc(2);let a=null,c=null,o=null,i=null;E.Dc("ngClass",E.Hc(33,yn,e.resetThemeColor)),E.Ib(1),E.Dc("ngIf",e.attachments.length>1),E.Ib(1),E.Dc("ngIf",e.attachments.length>1),E.Ib(4),E.Dc("ngIf",!e.isCloud&&!e.forInvoice&&(e.canEdit||e.canEditOwn&&(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id)===(null==(a=E.wc(7,25,e.sharedData.currentUser))?null:a.id))),E.Ib(2),E.Dc("ngIf",!(!e.isCloud&&!e.forInvoice&&(e.canEdit||e.canEditOwn&&(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id)===(null==(c=E.wc(9,27,e.sharedData.currentUser))?null:c.id)))),E.Ib(2),E.Dc("ngIf",!e.isCloud&&("pdf"===(null==e.currentAttachment?null:e.currentAttachment.extension)||e.forInvoice||e.currentAttachment&&(null==e.currentAttachment?null:e.currentAttachment.thumbnail_large)&&!e.thumbnailFailed&&(!e.isVideo||!e.isAudio||!e.isCloud)&&!e.isEmail)),E.Ib(2),E.Dc("ngIf",!e.isCloud&&!e.emailCommentData),E.Ib(1),E.Dc("ngIf",!(e.isCloud||e.isEmail||e.isElectron||e.emailCommentData)),E.Ib(1),E.Dc("ngIf",e.showTaskLink&&e.taskId),E.Ib(1),E.Dc("ngIf",e.cloudData[null==e.currentAttachment?null:e.currentAttachment.source]),E.Ib(1),E.Dc("ngIf",e.gmailUrl),E.Ib(1),E.Dc("ngIf",e.outlookUrl),E.Ib(1),E.Dc("ngIf",e.isEmail),E.Ib(1),E.Dc("ngIf",!e.forInvoice&&!e.emailCommentData),E.Ib(1),E.Dc("ngIf",e.shortenTextPreview),E.Ib(1),E.Dc("ngIf",(null==e.currentAttachment?null:e.currentAttachment.thumbnail_large)&&!e.forInvoice&&!e.hideCoverImage&&e.canChangeDescription),E.Ib(1),E.Dc("ngIf",(null==e.currentAttachment?null:e.currentAttachment.id)&&!e.forInvoice&&e.taskId&&!e.isSharingApp&&(e.canRemove||e.canRemoveOwn&&(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id)===(null==(o=E.wc(23,29,e.sharedData.currentUser))?null:o.id))),E.Ib(2),E.Dc("ngIf",!(!e.isCloud&&!e.forInvoice&&(e.canEdit||e.canEditOwn&&(null==e.currentAttachment||null==e.currentAttachment.user?null:e.currentAttachment.user.id)===(null==(i=E.wc(25,31,e.sharedData.currentUser))?null:i.id)))),E.Ib(3),E.Dc("ngIf",e.allowComments&&e.supportComments),E.Ib(1),E.Dc("icon","cu2-close"),E.Ib(1),E.Ob("comment-viewer__email-preview",!!e.emailCommentData),E.Ib(1),E.Dc("ngIf",e.isFullscreenEmail)("ngIfThen",t)("ngIfElse",n)}}function In(e,t){1&e&&E.Yb(0)}function Dn(e,t){if(1&e&&E.bd(0,In,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(4),n=E.Rc(8);E.Dc("ngIf",e.isCloud)("ngIfThen",t)("ngIfElse",n)}}function Cn(e,t){1&e&&E.Yb(0)}function xn(e,t){if(1&e&&E.bd(0,Cn,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(6),n=E.Rc(30);E.Dc("ngIf",e.isGoogleDriveEmbedUrl)("ngIfThen",t)("ngIfElse",n)}}function An(e,t){if(1&e&&E.Xb(0,"cu2-dashboard-embed-url",95),2&e){const e=E.uc();E.Dc("url",e.isGoogleDriveEmbedUrl)}}function On(e,t){1&e&&E.Yb(0)}function Tn(e,t){if(1&e&&E.bd(0,On,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(38),n=E.Rc(10);E.Dc("ngIf",e.isEmail)("ngIfThen",t)("ngIfElse",n)}}function En(e,t){1&e&&E.Yb(0)}function zn(e,t){if(1&e&&E.bd(0,En,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(24),n=E.Rc(12);E.Dc("ngIf","txt"===(null==e.currentAttachment?null:e.currentAttachment.extension))("ngIfThen",t)("ngIfElse",n)}}function jn(e,t){1&e&&E.Yb(0)}function Mn(e,t){if(1&e&&E.bd(0,jn,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(32),n=E.Rc(14);E.Dc("ngIf","pdf"===(null==e.currentAttachment?null:e.currentAttachment.extension)||e.forInvoice)("ngIfThen",t)("ngIfElse",n)}}function $n(e,t){1&e&&E.Yb(0)}function Rn(e,t){if(1&e&&E.bd(0,$n,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(36),n=E.Rc(16);E.Dc("ngIf",e.isAudio)("ngIfThen",t)("ngIfElse",n)}}function Sn(e,t){1&e&&E.Yb(0)}function Un(e,t){if(1&e&&E.bd(0,Sn,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(34),n=E.Rc(18);E.Dc("ngIf",e.isVideo)("ngIfThen",t)("ngIfElse",n)}}function Fn(e,t){1&e&&E.Yb(0)}function Ln(e,t){if(1&e&&E.bd(0,Fn,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(28),n=E.Rc(20);E.Dc("ngIf",(null==e.currentAttachment?null:e.currentAttachment.thumbnail_large)&&!e.thumbnailFailed)("ngIfThen",t)("ngIfElse",n)}}function Pn(e,t){1&e&&E.Yb(0)}function Wn(e,t){if(1&e&&E.bd(0,Pn,1,0,"ng-container",41),2&e){const e=E.uc(),t=E.Rc(22),n=E.Rc(30);E.Dc("ngIf",e.isForIFramePreview)("ngIfThen",t)("ngIfElse",n)}}function Xn(e,t){if(1&e&&(E.Xb(0,"iframe",96),E.vc(1,"safe")),2&e){const e=E.uc();E.Dc("src",E.wc(1,1,"https://view.officeapps.live.com/op/embed.aspx?src="+(null==e.currentAttachment?null:e.currentAttachment.url)),E.Wc)}}function Vn(e,t){1&e&&E.Xb(0,"pre",97,98)}function Nn(e,t){if(1&e&&(E.Xb(0,"cu-email-comment",100),E.vc(1,"async")),2&e){const e=E.uc(2);E.Dc("projectId",null==e.emailCommentData?null:e.emailCommentData.projectId)("alwaysShowThread",!0)("project",null==e.emailCommentData?null:e.emailCommentData.project)("coverImage",null==e.emailCommentData?null:e.emailCommentData.coverImage)("showFullConversation",!0)("canAddAttachments",null==e.emailCommentData?null:e.emailCommentData.canAddAttachments)("canRemoveAttachments",null==e.emailCommentData?null:e.emailCommentData.canRemoveAttachments)("canRemoveOwnAttachments",null==e.emailCommentData?null:e.emailCommentData.canRemoveOwnAttachments)("canChangeDescription",null==e.emailCommentData?null:e.emailCommentData.canChangeDescription)("permissions",null==e.emailCommentData?null:e.emailCommentData.permissions)("permissionLevel",null==e.emailCommentData?null:e.emailCommentData.permissionLevel)("readonly",null==e.emailCommentData?null:e.emailCommentData.readonly)("projectMembers",null==e.emailCommentData?null:e.emailCommentData.projectMembers)("taskId",null==e.emailCommentData?null:e.emailCommentData.taskId)("weights",null==e.emailCommentData?null:e.emailCommentData.weights)("allowEmailFeature",null==e.emailCommentData?null:e.emailCommentData.allowEmailFeature)("comment",null==e.emailCommentData?null:e.emailCommentData.comment)("lazyLoadEntities",!1)("editorId",null==e.emailCommentData?null:e.emailCommentData.editorId)("allowReply",null==e.emailCommentData?null:e.emailCommentData.allowReply)("allowLink",null==e.emailCommentData?null:e.emailCommentData.allowLink)("threadData",E.wc(1,26,e.threadData$)[null==e.emailCommentData||null==e.emailCommentData.comment?null:e.emailCommentData.comment.id])("allowThread",null==e.emailCommentData?null:e.emailCommentData.allowThread)("threadTemplate",null==e.emailCommentData?null:e.emailCommentData.threadTemplate)("fromAutomation",null==e.emailCommentData?null:e.emailCommentData.fromAutomation)("userGroups",null==e.emailCommentData?null:e.emailCommentData.userGroups)}}function qn(e,t){if(1&e&&E.bd(0,Nn,2,28,"cu-email-comment",99),2&e){const e=E.uc();E.Dc("ngIf",e.emailCommentData)}}function Bn(e,t){1&e&&E.Xb(0,"cu-loader",106)}function Hn(e,t){if(1&e){const e=E.dc();E.cc(0,"img",107,108),E.qc("error",function(t){return E.Uc(e),E.uc(2).thumbnailError(t)}),E.bc()}if(2&e){const e=E.uc(2);E.Ec("src",e.orientedImageSrc,E.Xc)}}function Gn(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-attachment-annotation",109,110),E.qc("onError",function(t){return E.Uc(e),E.uc(2).thumbnailError(t)})("onBackdropClick",function(){return E.Uc(e),E.uc(2).close()}),E.bc()}if(2&e){const e=E.uc(2);E.Dc("src",e.orientedImageSrc)("attachment",e.currentAttachment)("taskId",e.taskId)("showComments",e.showComments)}}function Qn(e,t){if(1&e){const e=E.dc();E.cc(0,"div",101,102),E.qc("click",function(t){return E.Uc(e),E.uc().handleBodyClick(t)}),E.bd(2,Bn,1,0,"cu-loader",103),E.bd(3,Hn,2,1,"img",104),E.bd(4,Gn,2,4,"cu-attachment-annotation",105),E.bc()}if(2&e){const e=E.uc();E.Ob("comment-viewer__body-img-container_disallow-\u0441omments",!e.allowComments),E.Ib(2),E.Dc("ngIf",!e.orientedImageSrc),E.Ib(1),E.Dc("ngIf",e.orientedImageSrc&&!e.allowComments),E.Ib(1),E.Dc("ngIf",e.allowComments)}}function Zn(e,t){if(1&e){const e=E.dc();E.cc(0,"a",115),E.qc("click",function(){return E.Uc(e),E.uc(2).download()}),E.dd(1),E.bc()}if(2&e){const e=E.uc(2);E.Dc("href",null==e.currentAttachment?null:e.currentAttachment.url,E.Xc),E.Ib(1),E.ed(e.downloadText)}}function Jn(e,t){if(1&e&&(E.cc(0,"a",116),E.gc(1,117),E.bc()),2&e){const e=E.uc(2);E.Dc("href",null==e.currentAttachment?null:e.currentAttachment.url,E.Xc),E.Ib(1),E.kc(e.cloudData[null==e.currentAttachment?null:e.currentAttachment.source].title),E.hc(1)}}function Kn(e,t){if(1&e&&(E.cc(0,"div",111),E.ac(1),E.gc(2,112),E.Zb(),E.Xb(3,"br"),E.Xb(4,"br"),E.bd(5,Zn,2,2,"a",113),E.bd(6,Jn,2,2,"a",114),E.bc()),2&e){const e=E.uc();E.Ib(5),E.Dc("ngIf",!e.isCloud),E.Ib(1),E.Dc("ngIf",e.cloudData[null==e.currentAttachment?null:e.currentAttachment.source])}}const Yn=function(e){return{url:e}};function ea(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-pdf-viewer",121),E.qc("after-load-complete",function(t){return E.Uc(e),E.uc(3).pdfLoad(t)})("page-rendered",function(){return E.Uc(e),E.uc(3).doneLoading()})("onError",function(){return E.Uc(e),E.uc(3).pdfError=!0}),E.bc()}if(2&e){const e=E.uc(3);E.Dc("src",E.Hc(6,Yn,e.forInvoice?null==e.currentAttachment?null:e.currentAttachment.url:(null==e.currentAttachment?null:e.currentAttachment.url_w_host)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?host="+e.env))("render-text",!0)("show-all",!0)("original-size",!1)("zoom",e.zoom)("autoresize",!0)}}function ta(e,t){if(1&e){const e=E.dc();E.cc(0,"cu-attachment-annotation",122),E.qc("after-load-complete",function(t){return E.Uc(e),E.uc(3).pdfLoad(t)})("page-rendered",function(){return E.Uc(e),E.uc(3).doneLoading()})("onBackdropClick",function(){return E.Uc(e),E.uc(3).close()})("onError",function(){return E.Uc(e),E.uc(3).pdfError=!0}),E.bc()}if(2&e){const e=E.uc(3);E.Dc("src",E.Hc(6,Yn,(null==e.currentAttachment?null:e.currentAttachment.url_w_host)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?host="+e.env))("attachment",e.currentAttachment)("taskId",e.taskId)("zoom",e.zoom)("fileType","pdf")("showComments",e.showComments)}}function na(e,t){if(1&e&&(E.ac(0),E.bd(1,ea,1,8,"cu-pdf-viewer",119),E.bd(2,ta,1,8,"cu-attachment-annotation",120),E.Zb()),2&e){const e=E.uc(2);E.Ib(1),E.Dc("ngIf",!e.allowComments||e.forInvoice),E.Ib(1),E.Dc("ngIf",e.allowComments&&!e.forInvoice)}}function aa(e,t){1&e&&(E.cc(0,"h1"),E.gc(1,123),E.bc())}function ca(e,t){if(1&e&&(E.bd(0,na,3,2,"ng-container",89),E.bd(1,aa,2,0,"ng-template",null,118,E.cd)),2&e){const e=E.Rc(2),t=E.uc();E.Dc("ngIf",!t.pdfError)("ngIfElse",e)}}function oa(e,t){if(1&e&&E.Xb(0,"cu-video",125,126),2&e){const e=E.uc(2);E.Dc("playsinline",!0)("autoplay",!0)("src",(null==e.currentAttachment?null:e.currentAttachment.url_w_host)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?host="+e.env)("type","video/"+((null==e.currentAttachment?null:e.currentAttachment.extension)||"mp4"))}}function ia(e,t){}function ra(e,t){if(1&e&&E.bd(0,ia,0,0,"ng-template",127),2&e){E.uc(2);const e=E.Rc(30);E.Dc("ngTemplateOutlet",e)}}function sa(e,t){if(1&e&&(E.bd(0,oa,2,4,"cu-video",124),E.bd(1,ra,1,1,void 0,26)),2&e){const e=E.uc();E.Dc("ngIf",e.canPlayVideo),E.Ib(1),E.Dc("ngIf",!e.canPlayVideo)}}function la(e,t){if(1&e&&E.Xb(0,"cu-audio-player",128),2&e){const e=E.uc();E.Dc("src",(null==e.currentAttachment?null:e.currentAttachment.url_w_host)||(null==e.currentAttachment?null:e.currentAttachment.url)+"?host="+e.env)("autoPlay",!0)}}function ma(e,t){if(1&e&&E.Xb(0,"cu-email-attachment",129),2&e){const e=E.uc();E.Dc("attachment",e.currentAttachment)("env",e.env)}}let da=(()=>{class e{constructor(e,t,n,a,c,o,i){this.attachmentsViewerService=e,this.sharedData=t,this.renderer=n,this.changeDetectorRef=a,this.store=c,this.injector=o,this.commonStringsService=i,this.fullSize=!1,this.isOpen=!1,this.copied=!1,this.isVideo=!1,this.canPlayVideo=!1,this.isAudio=!1,this.isCloud=!1,this.isEmail=!1,this.isGmail=!1,this.isForIFramePreview=!1,this.isOutlook=!1,this.isInbox=!1,this.hideCoverImage=!1,this.canRemove=!0,this.canRemoveOwn=!0,this.canEdit=!0,this.canEditOwn=!0,this.canChangeDescription=!0,this.oldWidth=0,this.forInvoice=!1,this.attachments=[],this.currentIndex=0,this.editing=!1,this.showTaskLink=!1,this.env=Object(_.c)(),this.downloadText=$localize`:@@common_download:Download`,this.thumbnailFailed=!1,this.zoom=1,this.oldZoom=1,this.resetThemeColor=!1,this.orientedImageSrc="",this.isElectron=Object(w.b)(),this.cloudData=f.c,this.canDelete=!0,this.shortenTextPreview=!1,this.allowComments=!1,this.supportComments=!1,this.showComments=!0,this.isFullscreenEmail=!1,this.pdfError=!1,this.threadData$=Object(y.a)({}),this.isSharingApp=O.k,this.currentAttachment$=new k.a(null),this.comments$=this.currentAttachment$.pipe(Object(l.a)(e=>e&&!O.k?this.store.select(Object(C.b)(String(x.c.Attachment),e.id)):Object(y.a)(null))),this.hasComments$=this.currentAttachment$.pipe(Object(l.a)(e=>e&&!O.k?e.resolved_comments?Object(y.a)(!0):this.comments$.pipe(Object(m.a)(e=>!!e),Object(d.a)(e=>0!==e.length),Object(u.a)(1)):Object(y.a)(null))),this.deleteAttachmentNoPermsText=$localize`:@@cu-attachments-viewer-lazy__tooltip-msg_delete-attachment-no-perms:You don't have permissions to delete this attachment.`,this.destroy$=new I.a}ngOnInit(){this.hasComments$.pipe(Object(h.a)(this.destroy$)).subscribe(e=>{this.showComments=e,this.changeDetectorRef.markForCheck()}),this.attachmentsViewerService.onForceClose.pipe(Object(m.a)(()=>this.isFullscreenEmail),Object(h.a)(this.destroy$)).subscribe(()=>this.close()),this.attachmentsViewerService.onOpen.pipe(Object(p.a)(this.sharedData.currentUser,this.sharedData.compatCurrentTeam$,O.k?Object(y.a)(null):this.store.select(s.getUserEnterprisePermissions)),Object(h.a)(this.destroy$)).subscribe(([e,t,n,a])=>{this.canDelete=!a||a.delete_items===r.b.ON,this.onlyDeleteIfOwner=a&&a.delete_items===r.b.CREATE,this.user=t,this.attachments=this.setAttachments(e.attachments),this.showTaskLink=e.showTaskLink,this.currentIndex=e.index||0,this.taskId=e.taskId,this.coverImage=e.coverImage,this.hideCoverImage=e.hideCoverImage,this.pdfError=!1,this.canRemoveOwn=void 0===e.canRemoveOwn||e.canRemoveOwn,this.canRemove=void 0===e.canRemove||e.canRemove,this.canEdit=void 0===e.canEdit||e.canEdit,this.canEditOwn=void 0===e.canEditOwn||e.canEditOwn,this.canChangeDescription=void 0===e.canChangeDescription||e.canChangeDescription,this.emailCommentData=e.emailCommentData,this.threadData$=e.emailCommentData&&e.emailCommentData.comment&&e.emailCommentData.comment.id?this.store.select(s.getThreadedEmailsMap):Object(y.a)({}),this.allowComments=e.allowComments&&A.a.threadedComments&&!O.k,this.setImage(),this.isOpen=!0,document.body.style.overflow="hidden",document.body.classList.add("attachments-viewer_open"),e.fromDropdown&&document.body.classList.add("attachments-viewer_open-from-dropdown");const c=localStorage.getItem("theme_color");this.resetThemeColor="#202020"===c}),Object(D.a)(document,"keydown").pipe(Object(m.a)(e=>this.isOpen),Object(h.a)(this.destroy$)).subscribe(e=>{if(!this.editing&&Object(T.b)(e,null,{modal:!0,attachmentsViewer:!0})){switch(e.keyCode){case 27:this.close(),e.stopImmediatePropagation();break;case 37:this.prev();break;case 39:this.next()}this.changeDetectorRef.markForCheck()}})}ngOnDestroy(){this.destroy$.next()}close(){this.input&&this.input.nativeElement&&(this.input.nativeElement.value=""),this.editing=!1,this.pdfDoc&&this.pdfDoc.destroy(),this.zoom=1,this.isOpen=!1,document.body.style.overflow="hidden",document.body.classList.remove("attachments-viewer_open"),document.body.classList.remove("attachments-viewer_open-from-dropdown"),this.resetThemeColor=!1,this.attachmentsViewerService.onClose.emit()}performZoom(e=!0){this.oldZoom=this.zoom,this.fullSize=!1,e&&this.zoom<6?this.zoom+=.1:!e&&this.zoom>.2&&(this.zoom-=.1),this.oldZoom!==this.zoom&&this.setZoom()}setZoom(){this.imageMarkup?this.imageMarkup.setZoom(this.zoom):this.imgFileContainer&&this.imgFileItem&&this.imgFileContainer.nativeElement&&this.imgFileItem.nativeElement&&(this.imgFileItem.nativeElement.style.width=1===this.zoom?"auto":this.imgFileItem.nativeElement.width/this.oldZoom*this.zoom+"px",this.imgFileItem.nativeElement.style.maxWidth=1===this.zoom?"100%":"none",this.imgFileItem.nativeElement.style.maxHeight=1===this.zoom?"100%":"none",this.imgFileContainer.nativeElement.scrollLeft=(this.imgFileContainer.nativeElement.scrollWidth-this.imgFileContainer.nativeElement.clientWidth)/2)}setFullSize(){this.fullSize=!0,this.imageMarkup?this.zoom=this.imageMarkup.setFullWidth():this.imgFileContainer&&this.imgFileItem&&this.imgFileContainer.nativeElement&&this.imgFileItem.nativeElement&&(this.oldWidth=this.imgFileItem.nativeElement.width,this.imgFileItem.nativeElement.style.width="auto",this.imgFileItem.nativeElement.style.maxWidth="none",this.imgFileItem.nativeElement.style.maxHeight="none",this.zoom=this.zoom*this.imgFileItem.nativeElement.width/this.oldWidth)}download(){this.downloadText=$localize`:@@cu-attachments-viewer-lazy__downloading:Downloading...`,setTimeout(()=>{this.close(),this.downloadText=$localize`:@@common_download:Download`},1200)}setImage(){var e;if(this.orientedImageSrc=null,this.currentAttachment=this.attachments[this.currentIndex],this.currentAttachment){this.isFullscreenEmail=!1,this.currentAttachment$.next(this.currentAttachment),this.currentAttachment.title=this.getAttachmentTitle(this.currentAttachment),"txt"===this.currentAttachment.extension&&this.injector.get(b.a).getFile(this.currentAttachment.url_w_host||`${this.currentAttachment.url}?host=${this.env}`).subscribe(e=>{this.shortenTextPreview=e&&e.length>5e5;const t=this.shortenTextPreview?e.slice(0,5e5):e;this.textFileContent.nativeElement.textContent=t}),this.isVideo=Object(f.p)(this.currentAttachment),this.canPlayVideo=Object(f.b)(this.currentAttachment),this.isAudio=Object(f.g)(this.currentAttachment);const t=this.getGoogleEmbedUrl(this.currentAttachment.url);this.isGoogleDriveEmbedUrl=this.currentAttachment.source===g.a.google&&this.currentAttachment.url&&t,this.isCloud=Object(f.h)(this.currentAttachment),this.isEmail=Object(f.i)(this.currentAttachment),this.isInbox=Object(f.n)(this.currentAttachment),this.isOutlook=Object(f.o)(this.currentAttachment),this.isGmail=Object(f.k)(this.currentAttachment),this.isForIFramePreview=(null===(e=this.sharedData.compatCurrentTeam)||void 0===e?void 0:e.microsoft_365_preview)&&Object(f.j)(this.currentAttachment),this.officePreviewLink=this.isForIFramePreview?Object(O.c)(this.sharedData.compatCurrentTeam.id,this.currentAttachment.url,"office"):null,this.gmailUrl=this.currentAttachment.user&&this.currentAttachment.user.id===this.sharedData.currentUser.value.id&&this.isGmail&&this.currentAttachment.email_data?`https://mail.google.com/mail/u/?authuser=${this.currentAttachment.email_data.email}#inbox/${this.currentAttachment.email_data.id}`:null,this.outlookUrl=this.isOutlook&&this.currentAttachment.email_data&&this.currentAttachment.email_data.link&&this.currentAttachment.email_data.platform&&"OfficeOnline"===this.currentAttachment.email_data.platform?this.currentAttachment.email_data.link:null,this.thumbnailFailed=!1,this.isCloud||this.isEmail||this.isInbox||this.isOutlook||this.isVideo||this.isAudio||!this.currentAttachment.thumbnail_large||(this.orientedImageSrc=this.currentAttachment.url),this.isVideo&&this.videoFileContainer&&(this.videoFileContainer.vgMedia.loadMedia(),this.videoFileContainer.vgMedia.play()),this.updateSupportComments()}else this.isFullscreenEmail=!0,O.k||setTimeout(()=>{this.injector.get(i.a).updateMentions()},150);this.changeDetectorRef.markForCheck()}updateSupportComments(){this.supportComments=this.taskId&&(!!this.orientedImageSrc||"pdf"===this.currentAttachment.extension)}next(){this.currentIndex<this.attachments.length-1&&(this.currentIndex+=1,this.setImage()),this.attachmentsViewerService.onIndexChange.emit(this.currentIndex)}prev(){this.currentIndex>0&&(this.currentIndex-=1,this.setImage()),this.attachmentsViewerService.onIndexChange.emit(this.currentIndex)}handleBodyClick(e){e.target.hasAttribute("data-body")&&this.close()}setAttachments(e){const t=[];return e.forEach(e=>{if(e.forInvoice)this.forInvoice=!0,t.push(e);else{const n=e.attachment?e.attachment:e;t.push(n.attachment?n.attachment:n)}}),t}edit(){(this.canEdit||this.canEditOwn&&this.currentAttachment&&this.currentAttachment.user&&this.sharedData.currentUser.value&&this.currentAttachment.user.id===this.sharedData.currentUser.value.id)&&(this.editing=!0,setTimeout(()=>{this.input.nativeElement.value=this.currentAttachment.title,this.input.nativeElement.focus(),this.keyBoardListener=this.renderer.listen(this.input.nativeElement,"keyup",e=>{switch(e.keyCode){case 13:this.save();break;case 27:this.cancel()}})}))}cancel(){this.input.nativeElement.value="",this.editing=!1,this.keyBoardListener()}getAttachmentTitle(e){if(e){if(!e.extension)return e.title;try{const t=new RegExp(`.${e.extension}$`,"i");return e.title.replace(t,"")}catch(t){return e.title}}}deleteAttachment(){if(this.canDelete||this.onlyDeleteIfOwner&&this.user.id===this.currentAttachment.user.id){this.injector.get(b.a).deleteAttachmentV2(this.currentAttachment.id).subscribe(()=>{this.attachmentsViewerService.onRemove.emit(this.currentAttachment.id)});const e=[...this.attachments],t=e.findIndex(e=>e.id===this.currentAttachment.id);-1!==t&&e.splice(t,1),this.attachments=[...e],this.attachments.length?(this.currentIndex>e.length-1&&this.currentIndex--,this.setImage()):this.close()}}toggleCoverImage(){this.coverImage=this.coverImage&&this.coverImage.id===this.currentAttachment.id?null:this.currentAttachment,this.attachmentsViewerService.onSetCoverImage.emit(this.currentAttachment.id)}save(){const e=this.input.nativeElement.value.trim();if(!e.length)return;this.currentAttachment.title=e;const t={id:this.currentAttachment.id,title:this.currentAttachment.title};this.cancel(),this.attachmentsViewerService.onEdit.emit(this.currentAttachment),this.injector.get(b.a).editAttachment(t).subscribe(e=>{this.currentAttachment.url=e.url})}copyLink(){this.copied=!0,setTimeout(()=>{this.copied=!1},2e3)}thumbnailError(e){this.thumbnailFailed=!0,this.supportComments=!1}pdfLoad(e){this.pdfDoc=e}doneLoading(){const e=document.getElementById("pdf").getElementsByTagName("a");for(let t=0;t<e.length;t++)e[t].setAttribute("target","_blank")}getGoogleEmbedUrl(e){return v.a(e)}toggleComments(){this.showComments=!this.showComments}}return e.\u0275fac=function(t){return new(t||e)(E.Wb(z.a),E.Wb(j.a),E.Wb(E.H),E.Wb(E.h),E.Wb(M.Store),E.Wb(E.t),E.Wb($.a))},e.\u0275cmp=E.Qb({type:e,selectors:[["cu-attachments-viewer-lazy"]],viewQuery:function(e,t){if(1&e&&(E.jd(Ut,1),E.jd(Ft,1),E.jd(Lt,1),E.jd(Pt,1),E.jd(Wt,1),E.jd(Xt,1),E.jd(Vt,1)),2&e){let e;E.Qc(e=E.rc())&&(t.input=e.first),E.Qc(e=E.rc())&&(t.textFileContent=e.first),E.Qc(e=E.rc())&&(t.copyBtn=e.first),E.Qc(e=E.rc())&&(t.imgFileContainer=e.first),E.Qc(e=E.rc())&&(t.imgFileItem=e.first),E.Qc(e=E.rc())&&(t.imageMarkup=e.first),E.Qc(e=E.rc())&&(t.videoFileContainer=e.first)}},hostAttrs:[1,"cu-attachments-viewer"],decls:39,vars:1,consts:function(){let e,t,n,a,c,o,i,r,s,l,m,d,u,h,p,b,g,f,w,v;return e=$localize`:@@common_download␟dc75033a5238fdc4f462212c847a45ba8018a3fd␟3099741642167775297:Download`,t=$localize`:@@common_open-in-new-tab␟6c128d5827c8e8e663840f7decc9d6dd18132e27␟6371588679924903737:Open in new tab`,n=$localize`:@@cu-attachments-viewer-lazy__tooltip-msg_open-cu-task␟4a6fc920f97bd1cc35f0f1dc8babb468a23d7501␟5263727225226868254:Open ClickUp task`,a=$localize`:@@common_copy-url␟6e632baeee46b344077a135cd9da61786d3fa907␟2184619916211262318:Copy URL`,c=$localize`:@@common_rename␟e26f9cf3666aace4e524b1505c9795d76d87738d␟6041115344061899387:Rename`,o=$localize`:@@cu-attachments-viewer-lazy__tooltip-msg_real-size-img␟8090e3c5868850b2210a65bfffcc4153f0193ab2␟3720686583777456648:Real size of image`,i=$localize`:@@common_zoom-out␟a3dfc58748f790fa096cf3c5fc331f90846e1772␟944767796496567082:Zoom out`,r=$localize`:@@common_zoom-in␟e28ee80cd3a124e109793180dfd1f8d8067dcc6b␟6500061599200357251:Zoom in`,s=$localize`:@@common_download␟a0f69e60846f967cc5cef84079c05844daf7c826␟1187658190944503408: Download `,l=$localize`:@@cu-attachments-viewer-lazy__link-txt_open-in-source␟7e9647dfd19f3c9875554d7cdc7156ee7e358eb5␟7757424229805650071: Open in ${"\ufffd0\ufffd"}:INTERPOLATION: `,m=$localize`:@@cu-attachments-viewer-lazy__link-txt_open-in-gmail␟0d0c11c83ee82495fc92363c52527c8ec13bf2f7␟7055851602310737243: Open in Gmail `,d=$localize`:@@cu-attachments-viewer-lazy__link-txt_open-in-outlook␟e8f5f89b1372bb205fe364944aa4ca80459a5c01␟5285410350679391872: Open in Outlook `,u=$localize`:@@common_open-in-new-tab␟ee852c3f1ec0298f66fee84bbf5cbe2bba6b9c87␟5775187694755032370: Open in new tab `,h=$localize`:@@cu-attachments-viewer-lazy__preview-shortened␟90f77275072cd6b264db6362eca9ceb789f625c3␟6637158317200416859: Unable to preview the entire file.${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:LINE_BREAK:Please download to see all the contents. `,p=$localize`:@@cu-attachments-viewer-lazy__add-comments␟da668493dff169f820643ba8baa3f0ce3ce91482␟2584401583242928382:Add comments`,b=$localize`:@@common_comment␟5a5d7ee2acbfa9c91ab7f41d26bda9ff0cafe42f␟2662644497259948010:Comment`,g=$localize`:@@common_comments␟c5bb9f8936cb33db2ca351a1b87a984fdf11917c␟3807699453257291879:Comments`,f=$localize`:@@cu-attachments-viewer-lazy__file-preview-failed␟6cbcab9925bb1c156cd3ddc5b9de9f6bdc065a5f␟4822542415659675522:This file cannot be previewed`,w=$localize`:@@cu-attachments-viewer-lazy__open-in-title␟bcc7046b775e1b1107f2f3f64d5a7327fa2161f9␟8416389096454117577:Open in ${"\ufffd0\ufffd"}:INTERPOLATION:`,v=$localize`:@@cu-attachments-viewer-lazy__invalid-pdf-file␟08097e826296f2e488fa8d6af58a240694dcff8c␟8993705614487377407: This PDF file is corrupted so it cannot be opened. `,[["class","comment-viewer",3,"ngClass",4,"ngIf"],["notFullscreenEmail",""],["cloudFile",""],["googleDriveFile",""],["notCloudFile",""],["notEmailFile",""],["notTxtFile",""],["notPdfFile",""],["notAudioFile",""],["notVideoFile",""],["notImgFile",""],["iframePreview",""],["txtFile",""],["fullscreenEmail",""],["imgFile",""],["noPreview",""],["pdfFile",""],["videoFile",""],["audioFile",""],["emailFile",""],[1,"comment-viewer",3,"ngClass"],["class","comment-viewer__control preview-back",3,"ngClass","icon","click",4,"ngIf"],["class","comment-viewer__control preview-forward",3,"ngClass","icon","click",4,"ngIf"],[1,"comment-viewer__header2"],[1,"comment-viewer__header2-close",3,"click"],[1,"comment-viewer__header2-body"],[4,"ngIf"],["class","comment-viewer__header2-close-divider",3,"click",4,"ngIf"],["class","comment-viewer__header2-zoom",4,"ngIf"],[1,"comment-viewer__header2-options"],["class","comment-viewer__btn comment-viewer__btn_with-text","download","","cuTooltip",e,4,"ngIf"],["class","comment-viewer__btn","target","_blank","cuTooltip",t,3,"href",4,"ngIf"],["class","comment-viewer__btn","target","_blank","cuTooltip",n,3,"cuLink",4,"ngIf"],["class","comment-viewer__btn comment-viewer__btn_with-text","target","_blank",4,"ngIf"],["class","comment-viewer__btn comment-viewer__btn_with-text","target","_blank","rel","noopener noreferrer",4,"ngIf"],["class","comment-viewer__btn comment-viewer__btn_copy","ngxClipboard","","cuTooltip",a,3,"ngClass","cbContent","click",4,"ngIf"],["class","comment-viewer__shorten",4,"ngIf"],["class","comment-viewer__btn",3,"cuTooltip","click",4,"ngIf"],[1,"comment-viewer__header2-sidebar"],[1,"comment-viewer__header2-control","comment-viewer__header2-control_close",3,"icon","click"],["data-body","",1,"comment-viewer__body",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"comment-viewer__control","preview-back",3,"ngClass","icon","click"],[1,"comment-viewer__control","preview-forward",3,"ngClass","icon","click"],["class","comment-viewer__header2-name","cuTooltip",c,3,"pointerEvents","click",4,"ngIf"],[1,"comment-viewer__header2-name"],["type","text",1,"comment-viewer__header2-name-input"],["input",""],[1,"comment-viewer__header2-name-save",3,"icon","click"],[1,"comment-viewer__header2-name-close",3,"icon","click"],["cuTooltip",c,1,"comment-viewer__header2-name",3,"click"],[1,"comment-viewer__header2-name-text"],[1,"comment-viewer__header2-name-edit",3,"ngClass","icon"],[1,"comment-viewer__header2-close-divider",3,"click"],[1,"comment-viewer__header2-zoom"],["cuTooltip",o,"class","comment-viewer__header2-control comment-viewer__header2-control_zoom-real","icon","full-screen",3,"click",4,"ngIf"],[1,"comment-viewer__header2-zoom-items"],["cuTooltip",i,"icon","cu2-minus-2",1,"comment-viewer__header2-zoom-item",3,"click"],[1,"comment-viewer__header2-zoom-item","comment-viewer__header2-zoom-item_value"],["cuTooltip",r,"icon","cu2-plus-3",1,"comment-viewer__header2-zoom-item",3,"click"],["cuTooltip",o,"icon","full-screen",1,"comment-viewer__header2-control","comment-viewer__header2-control_zoom-real",3,"click"],["download","","cuTooltip",e,1,"comment-viewer__btn","comment-viewer__btn_with-text"],[1,"comment-viewer__btn-inner"],["icon","download-v3",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_download"],[1,"comment-viewer__btn-text"],s,["target","_blank","cuTooltip",t,1,"comment-viewer__btn",3,"href"],["icon","go-v2",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_new-tab"],["target","_blank","cuTooltip",n,1,"comment-viewer__btn",3,"cuLink"],["target","_blank",1,"comment-viewer__btn","comment-viewer__btn_with-text"],["icon","go-v2",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_go"],l,m,["target","_blank","rel","noopener noreferrer",1,"comment-viewer__btn","comment-viewer__btn_with-text"],d,u,["ngxClipboard","","cuTooltip",a,1,"comment-viewer__btn","comment-viewer__btn_copy",3,"ngClass","cbContent","click"],["icon","cu2-share-2",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_link"],[1,"comment-viewer__btn-inner","comment-viewer__btn-inner_done"],["icon","check",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_check"],[1,"comment-viewer__shorten"],h,[1,"comment-viewer__btn",3,"cuTooltip","click"],["icon","pin",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_pin"],["icon","cu2-trash-2",1,"comment-viewer__btn-icon","comment-viewer__btn-icon_trash"],[1,"comment-viewer__header2-comments",3,"click"],[1,"comment-viewer__header2-comments-counter"],["icon","cu2-comment-2",1,"comment-viewer__header2-comments-icon"],[1,"comment-viewer__header2-comments-length"],[4,"ngIf","ngIfElse"],["commentSingularTmpl",""],["commentPluralTmpl",""],p,b,g,[1,"comment-viewer__embed",3,"url"],["width","100%","height","100%","frameborder","0",3,"src"],[1,"comment-viewer__txt-preview"],["textFileContent",""],["class","comment-viewer__email",3,"projectId","alwaysShowThread","project","coverImage","showFullConversation","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","permissionLevel","readonly","projectMembers","taskId","weights","allowEmailFeature","comment","lazyLoadEntities","editorId","allowReply","allowLink","threadData","allowThread","threadTemplate","fromAutomation","userGroups",4,"ngIf"],[1,"comment-viewer__email",3,"projectId","alwaysShowThread","project","coverImage","showFullConversation","canAddAttachments","canRemoveAttachments","canRemoveOwnAttachments","canChangeDescription","permissions","permissionLevel","readonly","projectMembers","taskId","weights","allowEmailFeature","comment","lazyLoadEntities","editorId","allowReply","allowLink","threadData","allowThread","threadTemplate","fromAutomation","userGroups"],["data-body","",1,"comment-viewer__body-img-container",3,"perfectScrollbar","click"],["imgFileContainer",""],["class","comment-viewer__body-img-container-loader",4,"ngIf"],["alt","",3,"src","error",4,"ngIf"],["class","cu-attachments-viewer__image-markup",3,"src","attachment","taskId","showComments","onError","onBackdropClick",4,"ngIf"],[1,"comment-viewer__body-img-container-loader"],["alt","",3,"src","error"],["imgFileItem",""],[1,"cu-attachments-viewer__image-markup",3,"src","attachment","taskId","showComments","onError","onBackdropClick"],["imageMarkup",""],[1,"comment-viewer__alert"],f,["download","","draggable","false","class","cu-btn cu-btn_sm cu-btn_cancel-outline",3,"href","click",4,"ngIf"],["target","_blank","draggable","false","class","cu-btn cu-btn_sm cu-btn_cancel-outline",3,"href",4,"ngIf"],["download","","draggable","false",1,"cu-btn","cu-btn_sm","cu-btn_cancel-outline",3,"href","click"],["target","_blank","draggable","false",1,"cu-btn","cu-btn_sm","cu-btn_cancel-outline",3,"href"],w,["invalidPdf",""],[3,"src","render-text","show-all","original-size","zoom","autoresize","after-load-complete","page-rendered","onError",4,"ngIf"],[3,"src","attachment","taskId","zoom","fileType","showComments","after-load-complete","page-rendered","onBackdropClick","onError",4,"ngIf"],[3,"src","render-text","show-all","original-size","zoom","autoresize","after-load-complete","page-rendered","onError"],[3,"src","attachment","taskId","zoom","fileType","showComments","after-load-complete","page-rendered","onBackdropClick","onError"],v,["style","max-width: 75%; height: 90%",3,"playsinline","autoplay","src","type",4,"ngIf"],[2,"max-width","75%","height","90%",3,"playsinline","autoplay","src","type"],["videoFileContainer",""],[3,"ngTemplateOutlet"],[3,"src","autoPlay"],[3,"attachment","env"]]},template:function(e,t){1&e&&(E.bd(0,kn,31,35,"div",0),E.bd(1,Dn,1,3,"ng-template",null,1,E.cd),E.bd(3,xn,1,3,"ng-template",null,2,E.cd),E.bd(5,An,1,1,"ng-template",null,3,E.cd),E.bd(7,Tn,1,3,"ng-template",null,4,E.cd),E.bd(9,zn,1,3,"ng-template",null,5,E.cd),E.bd(11,Mn,1,3,"ng-template",null,6,E.cd),E.bd(13,Rn,1,3,"ng-template",null,7,E.cd),E.bd(15,Un,1,3,"ng-template",null,8,E.cd),E.bd(17,Ln,1,3,"ng-template",null,9,E.cd),E.bd(19,Wn,1,3,"ng-template",null,10,E.cd),E.bd(21,Xn,2,3,"ng-template",null,11,E.cd),E.bd(23,Vn,2,0,"ng-template",null,12,E.cd),E.bd(25,qn,1,1,"ng-template",null,13,E.cd),E.bd(27,Qn,5,5,"ng-template",null,14,E.cd),E.bd(29,Kn,7,2,"ng-template",null,15,E.cd),E.bd(31,ca,3,2,"ng-template",null,16,E.cd),E.bd(33,sa,2,2,"ng-template",null,17,E.cd),E.bd(35,la,1,2,"ng-template",null,18,E.cd),E.bd(37,ma,1,2,"ng-template",null,19,E.cd)),2&e&&E.Dc("ngIf",t.isOpen)},directives:[o.q,o.o,R.a,S.a,U.a,F.a,L.a,P.a,W.a,X.a,pt,je,bt.a,o.x,At,Rt],pipes:[o.b,o.f,St.a],styles:[".cu-attachments-viewer__cant-play{display:flex;align-items:center;justify-content:center;flex-direction:column;width:800px;max-width:96%;height:320px;background:#292d34}.cu-attachments-viewer__cant-play-img{margin-bottom:20px;width:205px;height:100px}.cu-attachments-viewer__cant-play-img img{width:100%;height:100%}.cu-attachments-viewer__cant-play-title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font:400 16px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff;text-align:center}.cu-attachments-viewer__image-markup{width:100%;height:100%}"],encapsulation:2}),e})();var ua=n("C8uC");let ha=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,ua.LoaderModule]]}),e})();var pa=n("8Sgp"),ba=n("aQOx");let ga=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,ft.l,gt.b]]}),e})();var fa=n("QHsG"),wa=n("1M0N");let va=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})(),_a=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,_e.f,wa.a,va]]}),e})(),ya=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,_a,ua.LoaderModule]]}),e})();E.Yc(Q,[o.q,X.a,Ce],[]);var ka=n("Y9Pr");let Ia=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,ha,_a,ua.LoaderModule]]}),e})();var Da=n("K0KF"),Ca=n("Q9+D"),xa=n("PuRp");let Aa=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,We.l,Da.a,Ca.a,xa.a]]}),e})(),Oa=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,ya,Ia,ka.a,Aa,Da.a]]}),e})();var Ta=n("KPoG"),Ea=n("gb9A"),za=n("fTg4");let ja=(()=>{class e{}return e.\u0275mod=E.Ub({type:e}),e.\u0275inj=E.Tb({factory:function(t){return new(t||e)},imports:[[o.c,F.b,ha,pa.a,ba.a,ga,fa.a,Oa,Ta.a.forChild(da),ua.LoaderModule,Da.a,Ea.a,za.a,W.b,c.a,a.a]]}),e})()},sEeB:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return p}),n.d(t,"d",function(){return b}),n.d(t,"c",function(){return g});var a=n("Cfvw"),c=n("LRne"),o=n("5+tZ"),i=n("eIep"),r=n("lJxs"),s=n("7Dom"),l=n("HDdC"),m=n("quSY"),d=n("Iab2"),u=function(e,t,n,a){return new(n||(n=Promise))(function(c,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function r(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,r)}s((a=a.apply(e,t||[])).next())})};const h=void 0!==window.fetch&&void 0!==window.AbortController;function p(e){let t=[];return Object(a.a)(Object(c.a)(...e)).pipe(Object(o.a)(e=>function(e,t={}){const{selector:n}=t,c=s.f(t,["selector"]);return new l.a(t=>{const o=new AbortController,i=o.signal;let r=!0,s=!1;const l=new m.a;let d;if(l.add(()=>{s=!0,r&&o.abort()}),c){if(c.signal)if(c.signal.aborted)o.abort();else{const e=c.signal,t=()=>{i.aborted||o.abort()};e.addEventListener("abort",t),l.add(()=>e.removeEventListener("abort",t))}d=Object.assign({},c,{signal:i})}else d={signal:i};return fetch(e,d).then(e=>{n?l.add(Object(a.a)(n(e)).subscribe(e=>t.next(e),e=>{r=!1,s||t.error(e)},()=>{r=!1,t.complete()})):(r=!1,t.next(e),t.complete())}).catch(e=>{r=!1,s||t.error(e)}),l})}(e).pipe(Object(i.a)(t=>u(this,void 0,void 0,function*(){if(t.ok)return{blob:yield t.blob(),filename:e.split("/").pop().split("?")[0]};throw t}))),5),Object(r.a)(n=>(t=t.concat(n),{percentComplete:Math.round(t.length/e.length*100),files:t})))}function b(e,t){return u(this,void 0,void 0,function*(){const a=new(0,(yield n.e(121).then(n.t.bind(null,"xOOu",7))).default),c={};e.forEach(({blob:e,filename:t})=>{if(c[t]){const n=t.split(".");n[0]+=` (${c[t]})`;const o=n.join(".");a.file(o,e)}else a.file(t,e);c[t]=c[t]||0,c[t]++});const o=yield a.generateAsync({type:"blob"});Object(d.saveAs)(o,t)})}function g(){return-1!==window.location.href.indexOf("staging")||-1!==window.location.href.indexOf("pull-requests")?"staging":-1!==window.location.href.indexOf("stage1")?"stage1":-1!==window.location.href.indexOf("localhost")?"local":"prod"}}}]);