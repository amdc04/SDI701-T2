(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"/hvl":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("fXoL"),n=i("ofXK"),a=i("UdVN"),r=i("NsZK");function l(e,t){if(1&e){const e=o.dc();o.cc(0,"div",1),o.Xb(1,"div",2),o.cc(2,"div",3),o.dd(3),o.bc(),o.cc(4,"div",4),o.qc("click",function(t){o.Uc(e);const i=o.uc();return i.onClear.emit(),i.preventDefault(t)}),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(3),o.fd(" ",e.selectedFilterName?e.selectedFilterName:e.filterCount," ")}}let c=(()=>{class e{constructor(){this.onClear=new o.o}ngOnInit(){}preventDefault(e){e.preventDefault(),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-message"]],inputs:{filterCount:"filterCount",selectedFilterName:"selectedFilterName"},outputs:{onClear:"onClear"},decls:1,vars:1,consts:function(){let e;return e=$localize`:@@cu-filter-message__tooltip-msg_clear-all-filters␟2f33515a935c36763660e8420940b8a7e11fb1f4␟4176168554520872982:Clear all filters`,[["class","cu-filter-message",4,"ngIf"],[1,"cu-filter-message"],["icon","filter",1,"cu-filter-message__clear"],[1,"cu-filter-message__count"],["icon","cu2-times","cuTooltip",e,1,"cu-filter-message__exit",3,"click"]]},template:function(e,t){1&e&&o.bd(0,l,5,1,"div",0),2&e&&o.Dc("ngIf",t.filterCount>0)},directives:[n.q,a.a,r.a],styles:[".cu-filter-message{background:#7b68ee;transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;height:28px;border-radius:3px;display:flex;align-items:center;margin-right:3px;overflow:hidden;padding:0 8px 0 5px;max-width:200px}@supports (--theme-main-color:#7b68ee){.cu-filter-message{background:var(--theme-main-color)}}.cu-filter-message:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-message:hover{background:var(--theme-main-color-dark)}}.cu-filter-message__count{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#5f48ea;font:500 9px/12px Gotham Pro,Proxima Nova,arial,serif;padding:0 6px;background-color:#fff;height:12px;border-radius:6px;margin-left:2px}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-message__count{color:var(--theme-main-color-dark)}}.cu-filter-message__clear{border-left-color:#5f48ea;transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:21px;height:22px;fill:#fff;padding:5px 6px 5px 4px}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-message__clear{border-left-color:var(--theme-main-color-dark)}}.cu-filter-message__clear:hover{background:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-message__clear:hover{background:var(--theme-main-color-dark)}}.cu-filter-message__exit{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#fff;height:12px;width:12px;margin-left:5px}.cu-filter-message__exit:hover{transform:rotate(180deg)}"],encapsulation:2,changeDetection:0}),e})()},"18+P":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("AMNA"),n=i("fXoL");let a=(()=>{class e{transform(e,t=!1){return Object(o.e)(e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Vb({name:"timeCounter",type:e,pure:!0}),e})()},"7YP0":function(e,t,i){"use strict";i.d(t,"a",function(){return v});var o=i("lI7e"),n=i("lJxs"),a=i("/uUt"),r=i("c3rA"),l=i("o7Ov"),c=i("GkwO"),s=i("fXoL"),d=i("l7P3"),u=i("+pq2"),p=i("UdVN"),h=i("ofXK"),f=i("tyNb"),g=i("loh9"),m=i("NsZK");function b(e,t){if(1&e&&(s.cc(0,"a",5),s.vc(1,"async"),s.vc(2,"async"),s.Xb(3,"div",6),s.bc()),2&e){const e=s.uc();let t=null;s.Dc("routerLink",null==(t=s.wc(1,2,e.backLink$))?null:t.url)("cuTooltip",s.wc(2,4,e.backLinkText$))}}let v=(()=>{class e{constructor(e){this.store=e,this.hideBackLink$=this.store.select(o.i),this.backLink$=this.store.select(c.e),this.sidebarOptions$=this.store.select(r.getSidebarOptions),this.backLinkText$=this.backLink$.pipe(Object(n.a)(e=>e?$localize`:@@common_backlink--with-name:Back to ${e.name}:backlinkName: (l)`:""),Object(a.a)())}ngOnInit(){}toggleSimpleBar(){this.store.dispatch(new l.yl)}showCollapsedSimpleBar(e){this.store.dispatch(new l.ml(e))}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(d.Store))},e.\u0275cmp=s.Qb({type:e,selectors:[["cu-collapsed-sidebar"]],hostAttrs:[1,"cu-collapsed-sidebar"],decls:8,vars:7,consts:[[1,"cu-collapsed-sidebar__toggle"],[1,"cu-collapsed-sidebar__toggle-icon",3,"click","mouseenter","mouseleave"],["icon","cu3-collapsed-sidebar",1,"cu-collapsed-sidebar__toggle-icon-default"],["icon","cu3-chevron-double-left",1,"cu-collapsed-sidebar__toggle-icon-hover"],["class","cu-collapsed-sidebar__back",3,"cuPreventDefault","routerLink","cuTooltip",4,"ngIf"],[1,"cu-collapsed-sidebar__back",3,"cuPreventDefault","routerLink","cuTooltip"],["icon","cu3-back",1,"cu-collapsed-sidebar__back-icon"]],template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.vc(1,"async"),s.Xb(2,"cu-unseen-notifications-counter"),s.cc(3,"div",1),s.qc("click",function(){return t.toggleSimpleBar()})("mouseenter",function(){return t.showCollapsedSimpleBar(!0)})("mouseleave",function(){return t.showCollapsedSimpleBar(!1)}),s.Xb(4,"div",2),s.Xb(5,"div",3),s.bc(),s.bc(),s.bd(6,b,4,6,"a",4),s.vc(7,"async")),2&e){let e=null;s.Ob("cu-collapsed-sidebar__toggle_visible",null==(e=s.wc(1,3,t.sidebarOptions$))?null:e.isCollapsedAndVisible),s.Ib(6),s.Dc("ngIf",!s.wc(7,5,t.hideBackLink$))}},directives:[u.a,p.a,h.q,f.k,g.a,m.a],pipes:[h.b],styles:[".cu-collapsed-sidebar{display:flex;align-items:center;margin-left:-3px;margin-right:15px;flex-shrink:0}.cu-collapsed-sidebar__toggle{width:26px;height:26px;cursor:pointer;border-radius:3px;position:relative}.cu-collapsed-sidebar__toggle:hover,.cu-collapsed-sidebar__toggle_visible{background-color:#f2f2f2}.dark-theme .cu-collapsed-sidebar__toggle:hover,.dark-theme .cu-collapsed-sidebar__toggle_visible{background:#1e272e}.cu-collapsed-sidebar__toggle:hover .cu-collapsed-sidebar__toggle-icon-default,.cu-collapsed-sidebar__toggle_visible .cu-collapsed-sidebar__toggle-icon-default{opacity:0}.cu-collapsed-sidebar__toggle:hover .cu-collapsed-sidebar__toggle-icon-hover,.cu-collapsed-sidebar__toggle_visible .cu-collapsed-sidebar__toggle-icon-hover{opacity:1}.cu-collapsed-sidebar__toggle-icon{width:100%;height:100%}.cu-collapsed-sidebar__toggle-icon-default,.cu-collapsed-sidebar__toggle-icon-hover{transition:opacity .2s cubic-bezier(.785,.135,.15,.86) 0s;position:absolute}.cu-collapsed-sidebar__toggle-icon-default{opacity:1;fill:#0a0a33}.dark-theme .cu-collapsed-sidebar__toggle-icon-default{fill:#828588}.cu-collapsed-sidebar__toggle-icon-hover{fill:#7b68ee;opacity:0;transform:rotate(180deg);padding:7px}@supports (--theme-main-color:#7b68ee){.cu-collapsed-sidebar__toggle-icon-hover{fill:var(--theme-main-color)}}.cu-collapsed-sidebar__back{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:4px;margin-left:13px;background:#e9ebf0}.dark-theme .cu-collapsed-sidebar__back{background:#1e272e}.cu-collapsed-sidebar__back:hover{background:#e4e4e4}.dark-theme .cu-collapsed-sidebar__back:hover{background:#191f25}.cu-collapsed-sidebar__back:hover .cu-collapsed-sidebar__back-icon{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-collapsed-sidebar__back:hover .cu-collapsed-sidebar__back-icon{fill:var(--theme-main-color)}}.cu-collapsed-sidebar__back-icon{width:12px;height:12px;fill:#7c828d}"],encapsulation:2,changeDetection:0}),e})()},IrHl:function(e,t,i){"use strict";i.d(t,"a",function(){return Ei});var o=i("fXoL"),n=i("IlGD"),a=i("/vEi"),r=i("Muja"),l=i("XNiG"),c=i("Kj3r"),s=i("1G5W"),d=i("LdyQ"),u=i("MJvn"),p=i("n+1/"),h=i("NsZK"),f=i("bFKe"),g=i("ofXK"),m=i("jJQC"),b=i("PqYM"),v=i("UdVN"),_=i("EDFS"),w=i("HqON"),O=i("vxfF");const y=["dropdown"],x=["searchList"];function C(e,t){if(1&e&&(o.ac(0),o.dd(1),o.Zb()),2&e){const e=o.uc();o.Ib(1),o.ed(null==e.selectedValue||null==e.selectedValue.field?null:e.selectedValue.field.title)}}function k(e,t){1&e&&(o.dd(0," + "),o.ac(1),o.gc(2,7),o.Zb())}function T(e,t){1&e&&o.Xb(0,"div",8),2&e&&o.Dc("icon","cu2-angle-down")}function D(e,t){if(1&e){const e=o.dc();o.ac(0),o.mc(1,18),o.cc(2,"a",19),o.qc("click",function(){return o.Uc(e),o.uc(),o.Rc(7).hide()}),o.bc(),o.jc(),o.Zb()}}function S(e,t){if(1&e&&o.Xb(0,"div",22),2&e){const e=o.uc().$implicit;o.Dc("icon","field-"+e.customField.type)}}function I(e,t){if(1&e){const e=o.dc();o.cc(0,"div",20),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).addFilter(i)}),o.bd(1,S,1,1,"div",21),o.dd(2),o.bc()}if(2&e){const e=t.$implicit,i=o.uc(2);o.Ob("filter-list__item-disabled",!1)("highlighted",(null==e?null:e.title)===(null==i.highlightedItem?null:i.highlightedItem.title)),o.Ib(1),o.Dc("ngIf",e.customField),o.Ib(1),o.fd(" ",e.title," ")}}function F(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",9),o.cc(2,"div",10),o.dd(3),o.bd(4,D,3,0,"ng-template",null,11,o.cd),o.cc(6,"div",12,13),o.qc("mouseenter",function(){return o.Uc(e),o.Rc(7).show()}),o.bc(),o.bc(),o.cc(8,"cu-search-list",14,15),o.qc("onEnter",function(t){return o.Uc(e),o.uc().onEnter(t)})("onNavigationChange",function(t){return o.Uc(e),o.uc().highlightedItem=t})("onNavigationSelect",function(t){return o.Uc(e),o.uc().addFilter(t)}),o.cc(10,"cdk-virtual-scroll-viewport",16),o.bd(11,I,3,6,"div",17),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.Rc(5),t=o.Rc(9),i=o.uc();o.Ib(3),o.fd(" ",i.dropdownTitle," "),o.Ib(3),o.Dc("popover",e)("outsideClick",!0),o.Ib(2),o.Dc("filterfn",i.filterFieldFn)("items",i.fields)("modifierSearchInput","cu-search-input__inner_filter")("allowKeyboardNavigation",!0)("navigationKey","title"),o.Ib(3),o.Dc("cdkVirtualForOf",t.filteredItems)("cdkVirtualForTrackBy",i.trackByName)}}const L=(e,t)=>!e||!e.title||e.title.toLocaleLowerCase().includes(t);let j=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.dropdownTitle=$localize`:used as dropdown title@@common_add-filter--dropdown-title:Add Filter`,this.displayClass="cu-filter-value-add-dropdown__add-container",this.onAddField=new o.o,this.onAddCustomField=new o.o,this.onDropdownOpen=new o.o,this.customFieldsMenuVisible=!1,this.trackById=Object(m.d)("id"),this.trackByName=Object(m.d)("name"),this.filterFieldFn=L,this.highlightedItem=null,this.destroy$=new l.a}ngOnDestroy(){this.destroy$.next()}addFilter(e){this.onAddField.emit(e),this.dropdown.close()}closeDropdown(){this.customFieldsMenuVisible=!1,this.changeDetectorRef.markForCheck()}dropdownOpened(){this.onDropdownOpen.emit("add"),Object(b.a)(200).pipe(Object(s.a)(this.destroy$)).subscribe(()=>{this.searchList&&this.searchList.searchInput&&this.searchList.searchInput.focus()})}close(){this.dropdown.close()}open(){this.dropdown.open()}onEnter(e){0!==e.filteredItems.length&&this.addFilter(e.filteredItems[0])}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-value-add-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(y,3),o.jd(x,1)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.searchList=e.first)}},inputs:{fields:"fields",selectedValue:"selectedValue",dropdownTitle:"dropdownTitle",displayClass:"displayClass"},outputs:{onAddField:"onAddField",onAddCustomField:"onAddCustomField",onDropdownOpen:"onDropdownOpen"},decls:9,vars:10,consts:function(){let e,t,i;return e=$localize`:used in tooltip@@common_filter-tasks--tooltip-text␟b85c5410f6c734e4f07270bb2990ab0d807755ca␟2323553616931256272:Filter tasks`,t=$localize`:used as dropdown title@@common_add-filter--dropdown-title␟a6e45b957e53a4651ea28d2bc3feb78c771f5092␟6766437680170628987:Add Filter`,i=$localize`:@@help_popup-tmpl--filtering-tasks␟1bc7feb31a0e532c44b63463a450157f53c92c74␟2402402288942625074:${"\ufffd#2\ufffd"}:START_LINK:Learn more${"\ufffd/#2\ufffd"}:CLOSE_LINK: about filtering tasks. `,[["cuDropdown","",1,"cu-filter-value-add-dropdown","cu-dropdown_left",3,"dropdownPreventDocumentScroll","dropdownCloseOnInsideClick","dropdownCloseOnModal","dropdownCloseOthersOnOutsideClick","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","","cuTooltip",e,1,"cu-filter-value-add-dropdown__toggle"],[4,"ngIf","ngIfElse"],["addFilterTmpl",""],["class","cu-filter-value-add-dropdown__toggle-arrow",3,"icon",4,"ngIf"],[4,"cuDropdownMenu"],t,[1,"cu-filter-value-add-dropdown__toggle-arrow",3,"icon"],[1,"filter-list"],[1,"filter-list__header"],["popTemplate",""],["icon","question","containerClass","markdown-tooltip","triggers","","container","body","placement","top",1,"help-question-mark",3,"popover","outsideClick","mouseenter"],["pop","bs-popover"],[3,"filterfn","items","modifierSearchInput","allowKeyboardNavigation","navigationKey","onEnter","onNavigationChange","onNavigationSelect"],["searchList",""],["itemSize","33",1,"filter-list__body",2,"height","285px",3,"perfectScrollbar"],["class","filter-list__item",3,"filter-list__item-disabled","highlighted","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],i,["href","https://docs.clickup.com/general/filter-and-search-tasks-in-list-view","target","_blank",1,"popover-content_link",3,"click"],[1,"filter-list__item",3,"click"],["class","cu-custom-fields__list-item-icon",3,"icon",4,"ngIf"],[1,"cu-custom-fields__list-item-icon",3,"icon"]]},template:function(e,t){if(1&e&&(o.cc(0,"div",0,1),o.qc("dropdownClose",function(){return t.closeDropdown()})("dropdownOpen",function(){return t.dropdownOpened()}),o.cc(2,"div",2),o.cc(3,"div"),o.bd(4,C,2,1,"ng-container",3),o.bd(5,k,3,0,"ng-template",null,4,o.cd),o.bc(),o.bd(7,T,1,1,"div",5),o.bc(),o.bd(8,F,12,10,"div",6),o.bc()),2&e){const e=o.Rc(6);o.Dc("dropdownPreventDocumentScroll",!1)("dropdownCloseOnInsideClick",!1)("dropdownCloseOnModal",!0)("dropdownCloseOthersOnOutsideClick",!0),o.Ib(3),o.Lb(t.displayClass),o.Ib(1),o.Dc("ngIf",null==t.selectedValue||null==t.selectedValue.field?null:t.selectedValue.field.title)("ngIfElse",e),o.Ib(3),o.Dc("ngIf",null==t.selectedValue||null==t.selectedValue.field?null:t.selectedValue.field.title)}},directives:[d.b,u.a,h.a,g.q,p.a,v.a,_.c,w.a,O.c,O.a,f.a,O.b],styles:[".cu-filter-value-add-dropdown__toggle{display:flex;align-items:center;height:100%;justify-content:space-between;padding-right:10px}.cu-filter-value-add-dropdown__toggle-arrow{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;height:12px;width:12px;fill:#b9bec7}.cu-filter-value-add-dropdown__toggle-arrow:hover{transition:none}.cu-filter-value-add-dropdown.cu-dropdown_open .cu-filter-value-add-dropdown__toggle-arrow{transform:rotate(180deg)}.cu-filter-value-add-dropdown__toggle:hover .cu-filter-value-add-dropdown__add-container{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-value-add-dropdown__toggle:hover .cu-filter-value-add-dropdown__add-container{color:var(--theme-main-color-dark)}}.cu-filter-value-add-dropdown__add-container{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#7b68ee;height:20px;border-radius:4px;display:flex;align-items:center;font:500 12px/1 Gotham Pro,Proxima Nova,arial,serif}@supports (--theme-main-color:#7b68ee){.cu-filter-value-add-dropdown__add-container{color:var(--theme-main-color)}}.cu-filter-value-add-dropdown__add-container:hover{color:#5f48ea}@supports (--theme-main-color-dark:#5f48ea){.cu-filter-value-add-dropdown__add-container:hover{color:var(--theme-main-color-dark)}}.cu-filter-value-add-dropdown__add{width:10px;height:10px;fill:#fff}"],encapsulation:2,changeDetection:0}),e})();var $=i("XIp8"),U=i("fujP"),V=i("pLZG"),M=i("jJW4"),P=i("Jf2N"),E=i("AeD3"),R=i("/qOb"),G=i("3Pt+");const A=["input"];let z=(()=>{class e{constructor(e){this.renderer=e,this.destroy$=new l.a,this.name="",this.modifier="",this.onAction=new o.o}ngAfterViewInit(){this.input.nativeElement.focus(),this.blurListener=this.renderer.listen(this.input.nativeElement,"blur",()=>this.save(!0)),this.keyDownListener=this.renderer.listen(this.input.nativeElement,"keydown",e=>{switch(e.keyCode){case R.a.ENTER:this.save();break;case R.a.ESCAPE:this.cancel()}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe(),this.blurListener&&(this.blurListener(),this.blurListener=null),this.keyDownListener&&(this.keyDownListener(),this.keyDownListener=null)}save(e=!1){const t=this.name.trim();e&&this.cancel(),t.length&&this.onAction.emit({action:"save",name:this.name})}cancel(){this.onAction.emit({action:"cancel"})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.H))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-saved-filter-item-editor"]],viewQuery:function(e,t){if(1&e&&o.jd(A,3),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first)}},inputs:{name:"name",modifier:"modifier"},outputs:{onAction:"onAction"},decls:3,vars:4,consts:[["type","text",1,"nav-editor__input",3,"ngModel","ngModelChange"],["input",""]],template:function(e,t){1&e&&(o.cc(0,"div"),o.cc(1,"input",0,1),o.qc("ngModelChange",function(e){return t.name=e}),o.bc(),o.bc()),2&e&&(o.Mb("nav-editor ",t.modifier,""),o.Ib(1),o.Dc("ngModel",t.name))},directives:[G.c,G.p,G.s],encapsulation:2}),e})();var q=i("WwCI");const Q=["widthChecker"],N=["widthCheckerMaxContainer"],B=["shareTooltip"],X=["editorContainer"];function Y(e,t){if(1&e){const e=o.dc();o.cc(0,"a",8),o.qc("click",function(){o.Uc(e);const t=o.uc();return t.startRename(t.item)}),o.Xb(1,"div",9),o.bc()}}function W(e,t){if(1&e){const e=o.dc();o.cc(0,"a",10),o.qc("click",function(){o.Uc(e);const t=o.uc();return t.remove(t.item)}),o.Xb(1,"div",11),o.bc()}}const J=function(e){return{selected:e}};let Z=(()=>{class e{constructor(e,t){this.resolver=e,this.window=t,this.editing=!1,this.href="",this.showToolltip=!1,this.shareTooltipText=$localize`:@@cu-saved-filter-item__tooltip-msg_share-url:Share URL`,this.selected=!1,this.readOnlyMode=!1,this.onDelete=new o.o,this.onRename=new o.o,this.onSelect=new o.o}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(e){this.item&&(this.href=`${this.window.href}&filter=${this.item.id}`)}ngOnDestroy(){}select(e){this.onSelect.emit(e)}remove(e){this.onDelete.emit(e)}startRename(e){const t=this.resolver.resolveComponentFactory(z);this.editor=this.editorContainer.createComponent(t),this.editor.instance.name=this.item.name,this.editor.instance.modifier="",this.editor.instance.onAction.subscribe(t=>{switch(t.action){case"cancel":this.cancel();break;case"save":this.rename(e,t.name)}}),this.editing=!0}cancel(){this.editorContainer.remove(),this.editing=!1}rename(e,t){t.length&&(this.onRename.emit({item:e,name:t}),this.cancel())}setVisabilityTooltip(){this.showToolltip=this.widthChecker.nativeElement.offsetWidth>=this.widthCheckerMaxContainer.nativeElement.offsetWidth-110}linkCopied(){this.shareTooltipText=$localize`:@@cu-saved-filter-item__tooltip-msg_copied-url:Copied URL!`,setTimeout(()=>{this.shareTooltip.removeTooltip(),this.shareTooltip.showTooltip(),setTimeout(()=>{this.shareTooltipText=$localize`:@@cu-saved-filter-item__tooltip-msg_share-url:Share URL`},2e3)})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.j),o.Wb(q.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-saved-filter-item"]],viewQuery:function(e,t){if(1&e&&(o.jd(Q,3),o.jd(N,3),o.jd(B,1),o.jd(X,3,o.U)),2&e){let e;o.Qc(e=o.rc())&&(t.widthChecker=e.first),o.Qc(e=o.rc())&&(t.widthCheckerMaxContainer=e.first),o.Qc(e=o.rc())&&(t.shareTooltip=e.first),o.Qc(e=o.rc())&&(t.editorContainer=e.first)}},inputs:{item:"item",selected:"selected",readOnlyMode:"readOnlyMode"},outputs:{onDelete:"onDelete",onRename:"onRename",onSelect:"onSelect"},features:[o.Gb],decls:11,vars:8,consts:function(){let e,t;return e=$localize`:@@cu-saved-filter-item__tooltip-msg_edit-name␟ef8436f2c3017dace82558d39ac8d6cd2586f518␟7628344298995587092:Edit name`,t=$localize`:@@common_delete␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,[[1,"filter-list__item",3,"ngClass","cuTooltip","mouseenter"],["widthCheckerMaxContainer",""],[1,"filter-list__item-width-check"],["widthChecker",""],[1,"filter-list__link",3,"click"],["class","filter-list__rename","cuTooltip",e,3,"click",4,"ngIf"],["class","filter-list__remove","cuTooltip",t,3,"click",4,"ngIf"],["editorContainer",""],["cuTooltip",e,1,"filter-list__rename",3,"click"],["icon","edit",1,"filter-list__rename-icon"],["cuTooltip",t,1,"filter-list__remove",3,"click"],["icon","remove",1,"filter-list__remove-icon"]]},template:function(e,t){1&e&&(o.cc(0,"div",0,1),o.qc("mouseenter",function(){return t.setVisabilityTooltip()}),o.cc(2,"div",2,3),o.dd(4),o.bc(),o.cc(5,"a",4),o.qc("click",function(){return t.select(t.item)}),o.dd(6),o.bc(),o.bd(7,Y,2,0,"a",5),o.bd(8,W,2,0,"a",6),o.Xb(9,"div",null,7),o.bc()),2&e&&(o.Dc("ngClass",o.Hc(6,J,t.selected))("cuTooltip",t.showToolltip?null==t.item?null:t.item.name:""),o.Ib(4),o.fd(" ",null==t.item?null:t.item.name," "),o.Ib(2),o.fd(" ",null==t.item?null:t.item.name," "),o.Ib(1),o.Dc("ngIf",!t.readOnlyMode),o.Ib(1),o.Dc("ngIf",!t.readOnlyMode))},directives:[g.o,h.a,g.q,v.a],encapsulation:2}),e})();const K=["dropdown"],H=["searchInput"];function ee(e,t){if(1&e){const e=o.dc();o.cc(0,"div",8),o.Xb(1,"div",9),o.cc(2,"input",10,11),o.qc("keyup",function(t){return o.Uc(e),o.uc(2).onSearch.emit(t.target.value)}),o.bc(),o.bc()}2&e&&(o.Ib(1),o.Dc("icon","cu2-search"))}function te(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-saved-filter-item",22),o.qc("onDelete",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).deleteFilter(i)})("onRename",function(t){return o.Uc(e),o.uc(3).renameFilter(t)})("onSelect",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).selectFilter(i)}),o.bc()}2&e&&o.Dc("item",t.$implicit)}function ie(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-saved-filter-item",22),o.qc("onDelete",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).deleteFilter(i)})("onRename",function(t){return o.Uc(e),o.uc(3).renameFilter(t)})("onSelect",function(){o.Uc(e);const i=t.$implicit;return o.uc(3).selectFilter(i)}),o.bc()}2&e&&o.Dc("item",t.$implicit)}const oe=function(e){return{"filter-list__header-link_disabled":e}};function ne(e,t){if(1&e){const e=o.dc();o.cc(0,"div",12),o.cc(1,"div",13),o.gc(2,14),o.bc(),o.cc(3,"div",15),o.cc(4,"div",16),o.qc("click",function(){o.Uc(e);const t=o.uc(2);return t.localValuesLength?t.saveFilter(!0):null}),o.Xb(5,"div",17),o.ac(6),o.gc(7,18),o.Zb(),o.bc(),o.bd(8,te,1,1,"cu-saved-filter-item",19),o.bc(),o.cc(9,"div",13),o.gc(10,20),o.bc(),o.cc(11,"div",15),o.cc(12,"div",16),o.qc("click",function(){o.Uc(e);const t=o.uc(2);return t.localValuesLength?t.saveFilter(!1):null}),o.Xb(13,"div",17),o.ac(14),o.gc(15,21),o.Zb(),o.bc(),o.bd(16,ie,1,1,"cu-saved-filter-item",19),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(4),o.Dc("ngClass",o.Hc(10,oe,!e.localValuesLength))("cuTooltip",e.localValuesLength?null:e.addFiltersToSaveText),o.Ib(1),o.Dc("icon","cu2-save"),o.Ib(3),o.Dc("ngForOf",e.filtersOwn)("ngForTrackBy",e.trackById),o.Ib(4),o.Dc("ngClass",o.Hc(12,oe,!e.localValuesLength))("cuTooltip",e.localValuesLength?null:e.addFiltersToSaveText),o.Ib(1),o.Dc("icon","cu2-save"),o.Ib(3),o.Dc("ngForOf",e.filtersTeam)("ngForTrackBy",e.trackById)}}function ae(e,t){1&e&&(o.cc(0,"div",23),o.cc(1,"div",13),o.gc(2,24),o.bc(),o.bc())}function re(e,t){if(1&e&&(o.cc(0,"div"),o.bd(1,ee,4,1,"div",5),o.bd(2,ne,17,14,"div",6),o.bd(3,ae,3,0,"div",7),o.bc()),2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",e.hasSearch),o.Ib(1),o.Dc("ngIf",!e.noResults),o.Ib(1),o.Dc("ngIf",e.noResults)}}let le=(()=>{class e{constructor(){this.readOnlyMode=!1,this.noResults=!1,this.hasSearch=!1,this.onSearch=new o.o,this.onDelete=new o.o,this.onRename=new o.o,this.onSelect=new o.o,this.onCreate=new o.o,this.onOpen=new o.o,this.trackById=Object(m.d)("id"),this.addFiltersToSaveText=$localize`:@@cu-saved-filter-list-dropdown__tooltip-msg_add-filters-to-save:Add filters to save`}ngOnChanges(e){e.items&&this.items&&(this.filtersOwn=this.items.filter(e=>e.personal),this.filtersTeam=this.items.filter(e=>!e.personal))}selectFilter(e){this.dropdown.close(),this.onSelect.emit(e)}deleteFilter(e){this.onDelete.emit(e)}renameFilter(e){this.onRename.emit(e)}saveFilter(e){this.onCreate.emit({personal:e})}open(){this.dropdown.open()}close(){this.dropdown.close()}focusSearch(){setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-saved-filter-list-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(K,3),o.jd(H,1)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.searchInput=e.first)}},inputs:{items:"items",readOnlyMode:"readOnlyMode",tooltip:"tooltip",noResults:"noResults",localValuesLength:"localValuesLength",hasSearch:"hasSearch"},outputs:{onSearch:"onSearch",onDelete:"onDelete",onRename:"onRename",onSelect:"onSelect",onCreate:"onCreate",onOpen:"onOpen"},features:[o.Gb],decls:5,vars:6,consts:function(){let e,t,i,o,n,a;return e=$localize`:form input placeholder@@forms_placeholder--search-1␟8aa58cf00d949c509df91c621ab38131df0a7599␟8854094932942190741:Search...`,t=$localize`:@@cu-saved-filter-list-dropdown__my-filters␟9a5a21e1bfcab34f938718a1e76d6fb1a4107702␟8383052775136014087: My Filters `,i=$localize`:@@common_save-active-filters␟81d1bbbd83ed2853a4405525312beb999ed1299c␟4280086405732825978:Save active filters`,o=$localize`:@@cu-saved-filter-list-dropdown__workspace-filters␟34e402b4b3de6997872208750f80be0476d490b4␟2203189739227678650: Workspace Filters `,n=$localize`:@@common_save-active-filters␟81d1bbbd83ed2853a4405525312beb999ed1299c␟4280086405732825978:Save active filters`,a=$localize`:@@common_no-results␟1845f30824f989d15ecab71390a1b5fc4d8c0fca␟6391211860361593132: No Results `,[["cuDropdown","",1,"cu-saved-filter-list-dropdown","cu-dropdown_left",3,"dropdownPreventDocumentScroll","dropdownCloseOnInsideClick","dropdownCloseOnModal","dropdownRepositionFlag","dropdownPlacement","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-saved-filter-list-dropdown__toggle",3,"cuTooltip"],["icon","cu2-caret-down",1,"cu-saved-filter-list-dropdown__save"],[4,"cuDropdownMenu"],["class","cu-saved-filter-list-dropdown__search",4,"ngIf"],["class","filter-list filter-list_saved-filters",3,"perfectScrollbar",4,"ngIf"],["class","filter-list filter-list_saved-filters",4,"ngIf"],[1,"cu-saved-filter-list-dropdown__search"],[1,"cu-saved-filter-list-dropdown__search-icon",3,"icon"],["placeholder",e,3,"keyup"],["searchInput",""],[1,"filter-list","filter-list_saved-filters",3,"perfectScrollbar"],[1,"filter-list__header"],t,[1,"filter-list__body"],[1,"filter-list__header-link",3,"ngClass","cuTooltip","click"],[3,"icon"],i,[3,"item","onDelete","onRename","onSelect",4,"ngFor","ngForOf","ngForTrackBy"],o,n,[3,"item","onDelete","onRename","onSelect"],[1,"filter-list","filter-list_saved-filters"],a]},template:function(e,t){1&e&&(o.cc(0,"div",0,1),o.qc("dropdownOpen",function(){return t.onOpen.emit(),t.focusSearch()}),o.cc(2,"div",2),o.Xb(3,"div",3),o.bc(),o.bd(4,re,4,3,"div",4),o.bc()),2&e&&(o.Dc("dropdownPreventDocumentScroll",!1)("dropdownCloseOnInsideClick",!1)("dropdownCloseOnModal",!0)("dropdownRepositionFlag",t.items)("dropdownPlacement","bottom"),o.Ib(2),o.Dc("cuTooltip",t.tooltip))},directives:[d.b,u.a,h.a,v.a,p.a,g.q,f.a,g.o,g.p,Z],styles:['.cu-saved-filter-list-dropdown,cu-saved-filter-list-dropdown{width:100%;height:100%}.cu-saved-filter-list-dropdown__search{height:40px;display:flex;align-items:center;background-color:#fafbfc;border-bottom:1px solid #e9ebf0;padding:0 13px}.dark-theme .cu-saved-filter-list-dropdown__search{border-color:#1e272e}.cu-saved-filter-list-dropdown__search-icon{width:13px;height:13px;fill:#b9bec7;margin-right:12px}.cu-saved-filter-list-dropdown__search input{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:1;background-color:transparent;border:0;box-shadow:none!important;width:100%}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-saved-filter-list-dropdown__search input{font-family:var(--global-font-support)}}.dark-theme .cu-saved-filter-list-dropdown__search{background-color:#2b343b}.cu-saved-filter-list-dropdown__toggle{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.cu-saved-filter-list-dropdown__toggle:hover .cu-saved-filter-list-dropdown__save{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-saved-filter-list-dropdown__toggle:hover .cu-saved-filter-list-dropdown__save{fill:var(--theme-main-color)}}.cu-saved-filter-list-dropdown__save{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;fill:#c4c4c4;width:14px;height:14px}.dark-theme .cu-saved-filter-list-dropdown__save{fill:#828588}'],encapsulation:2,changeDetection:0}),e})();var ce=i("8it8");const se=["input"];function de(e,t){1&e&&(o.ac(0),o.gc(1,20),o.Zb())}function ue(e,t){1&e&&(o.ac(0),o.gc(1,21),o.Zb())}function pe(e,t){if(1&e&&(o.cc(0,"div",22),o.cc(1,"div",23),o.Xb(2,"div",24),o.bc(),o.cc(3,"div",25),o.dd(4),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(4),o.ed(e.nameError)}}function he(e,t){1&e&&(o.cc(0,"div",26),o.gc(1,27),o.bc())}function fe(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-saved-filter-item",28),o.qc("onDelete",function(t){return o.Uc(e),o.uc().onDelete.emit(t)})("onRename",function(t){return o.Uc(e),o.uc().onRename.emit(t)})("onSelect",function(){o.Uc(e);const i=t.$implicit;return o.uc().selectFilter(i)}),o.bc()}if(2&e){const e=t.$implicit,i=o.uc();o.Dc("item",e)("selected",(null==i.selectedItem?null:i.selectedItem.id)===e.id)("readOnlyMode",!0)}}function ge(e,t){1&e&&(o.ac(0),o.gc(1,29),o.Zb())}function me(e,t){1&e&&(o.ac(0),o.gc(1,30),o.Zb())}let be=(()=>{class e{constructor(e,t,i,n){this.modalService=e,this.changeDetectorRef=t,this.renderer=i,this.commonStringsService=n,this.nameError="",this.saveSorting=!0,this.onSelect=new o.o,this.onDelete=new o.o,this.onRename=new o.o,this.onCreate=new o.o,this.trackById=Object(m.d)("id")}ngOnInit(){this.keyUpListener=this.renderer.listen(this.input.nativeElement,"keyup",e=>{e.which===R.a.ESCAPE&&this.modalService.close(),e.which===R.a.ENTER?this.create():(this.selectedItem&&(this.selectedItem=null,this.changeDetectorRef.markForCheck()),this.nameError&&(this.nameError="",this.changeDetectorRef.markForCheck()))})}ngAfterViewInit(){setTimeout(()=>{this.input.nativeElement.focus()})}ngOnChanges(e){e.items&&this.items&&(this.filters=this.items.filter(e=>this.personal&&e.personal||!this.personal&&!e.personal))}ngOnDestroy(){this.keyUpListener&&(this.keyUpListener(),this.keyUpListener=null)}selectFilter(e){this.selectedItem=e,this.input.nativeElement.value="",this.nameError="",this.changeDetectorRef.markForCheck()}create(){this.selectedItem?(this.onSelect.emit({item:this.selectedItem,saveSorting:this.saveSorting}),this.modalService.close()):this.input.nativeElement.value.trim()?(this.onCreate.emit({name:this.input.nativeElement.value.trim(),saveSorting:this.saveSorting}),this.modalService.close()):(this.nameError=this.commonStringsService.nameIsRequiredText,this.changeDetectorRef.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(P.a),o.Wb(o.h),o.Wb(o.H),o.Wb(ce.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-saved-filter-add-modal"]],viewQuery:function(e,t){if(1&e&&o.jd(se,3),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first)}},inputs:{items:"items",personal:"personal"},outputs:{onSelect:"onSelect",onDelete:"onDelete",onRename:"onRename",onCreate:"onCreate"},features:[o.Gb],decls:24,vars:10,consts:function(){let e,t,i,o,n,a,r;return e=$localize`:@@cu-saved-filter-add-modal__form-placeholder_filter-name␟7c265f9bbb7ea3aa8ea20b68d8970503c3c2e9f7␟6928898257444234524:Na﻿me your filter`,t=$localize`:@@cu-saved-filter-add-modal__form-label_save-sorting␟96003d4acf47a80653caa9762548de61ef5ebf38␟5407906615040303961:Save sorting`,i=$localize`:@@cu-saved-filter-add-modal__for-personal␟a658a471937414d9789316124f71a1630a73689e␟7753140468149087596:Save a Filter for your eyes only`,o=$localize`:@@cu-saved-filter-add-modal__for-workspace␟cae9673eb851c19091fa7afedacaadcb5ebec368␟5293961817262357472:Save a Filter for your entire Workspace to use`,n=$localize`:@@cu-saved-filter-add-modal__select-filter-to-replace␟303afe435616a4341fecab37f91ad4054be6e3c8␟7505361909899051759: Or select filter to replace `,a=$localize`:@@cu-saved-filter-add-modal__btn-txt_replace-filter␟86af2722575a5ebd8ae2adfc8e95c55e57c4151b␟2110944087204854180:Replace filter`,r=$localize`:@@cu-saved-filter-add-modal__btn-txt_save-filter␟522b9c18cf3aed42f560919da7198a0e93e7f9b7␟165959881574812660:Save filter`,[[1,"cu-form__label"],[4,"ngIf","ngIfElse"],["notPersonalTmpl",""],[1,"filter-save__header"],[1,"cu-search","cu-search_compact","filter-list__search"],["type","text","placeholder",e,1,"cu-search__input","cu-search__input_centered"],["input",""],[1,"filter-save__switch"],[1,"switch"],["type","checkbox",1,"switch__checkbox",3,"checked","ngModel","ngModelChange"],[1,"switch__handle"],t,["class","cu-form__error",4,"ngIf"],[1,"filter-list",3,"perfectScrollbar"],["class","filter-list__header",4,"ngIf"],[1,"filter-list__body"],[3,"item","selected","readOnlyMode","onDelete","onRename","onSelect",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter__button-block"],[1,"cu-btn",3,"click"],["replaceFilterTmpl",""],i,o,[1,"cu-form__error"],[1,"cu-form__error-icon"],[1,"cu-icon","cu-icon_warning"],[1,"cu-form__error-text"],[1,"filter-list__header"],n,[3,"item","selected","readOnlyMode","onDelete","onRename","onSelect"],a,r]},template:function(e,t){if(1&e&&(o.cc(0,"div",0),o.bd(1,de,2,0,"ng-container",1),o.bd(2,ue,2,0,"ng-template",null,2,o.cd),o.bc(),o.cc(4,"div",3),o.cc(5,"div",4),o.Xb(6,"input",5,6),o.bc(),o.cc(8,"label",7),o.cc(9,"div",8),o.cc(10,"input",9),o.qc("ngModelChange",function(){return t.saveSorting=!t.saveSorting}),o.bc(),o.Xb(11,"span",10),o.bc(),o.ac(12),o.gc(13,11),o.Zb(),o.bc(),o.bc(),o.bd(14,pe,5,1,"div",12),o.cc(15,"div",13),o.bd(16,he,2,0,"div",14),o.cc(17,"div",15),o.bd(18,fe,1,3,"cu-saved-filter-item",16),o.bc(),o.bc(),o.cc(19,"div",17),o.cc(20,"button",18),o.qc("click",function(){return t.create()}),o.bd(21,ge,2,0,"ng-container",1),o.bd(22,me,2,0,"ng-template",null,19,o.cd),o.bc(),o.bc()),2&e){const e=o.Rc(3),i=o.Rc(23);o.Ib(1),o.Dc("ngIf",t.personal)("ngIfElse",e),o.Ib(9),o.Dc("checked",t.saveSorting)("ngModel",t.saveSorting),o.Ib(4),o.Dc("ngIf",t.nameError),o.Ib(2),o.Dc("ngIf",(null==t.filters?null:t.filters.length)>0),o.Ib(2),o.Dc("ngForOf",t.filters)("ngForTrackBy",t.trackById),o.Ib(3),o.Dc("ngIf",t.selectedItem)("ngIfElse",i)}},directives:[g.q,G.b,G.p,G.s,f.a,g.p,Z],encapsulation:2,changeDetection:0}),e})();const ve=["saveModal"],_e=["confirmRemoveModal"],we=["savedFilterListDropdown"];function Oe(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-saved-filter-add-modal",4),o.qc("onDelete",function(t){return o.Uc(e),o.uc().showRemoveConfirmModal(t)})("onRename",function(t){return o.Uc(e),o.uc().renameFilter(t)})("onSelect",function(t){return o.Uc(e),o.uc().replaceFilter(t)})("onCreate",function(t){return o.Uc(e),o.uc().createFilter(t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("items",e.items)("personal",e.createPersonal)}}function ye(e,t){if(1&e){const e=o.dc();o.cc(0,"div",5),o.cc(1,"div",6),o.gc(2,7),o.bc(),o.bc(),o.cc(3,"div",8),o.cc(4,"button",9),o.qc("click",function(){return o.Uc(e),o.uc().closeRemoveConfirmModal()}),o.gc(5,10),o.bc(),o.cc(6,"button",11),o.qc("click",function(){o.Uc(e);const t=o.uc();return t.deleteFilter(t.removeFilter)}),o.gc(7,12),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(2),o.kc(null==e.removeFilter?null:e.removeFilter.name),o.hc(2)}}let xe=(()=>{class e{constructor(e,t,i,n){this.sharedData=e,this.modalService=t,this.dataService=i,this.changeDetectorRef=n,this.destroy$=new l.a,this.items=[],this.itemsFull=[],this.createPersonal=!0,this.dataLoaded=!1,this.noResults=!1,this.onDropdownOpen=new o.o,this.onApply=new o.o}ngOnInit(){this.sharedData.compatCurrentTeam$.pipe(Object(V.a)(e=>e&&this.dataLoaded),Object(s.a)(this.destroy$)).subscribe(()=>{this.items=[],this.dataLoaded=!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}selectFilter(e){this.onApply.emit(Object($.a)(e))}loadData(){this.dataService.getFilters2(this.sharedData.compatCurrentTeam.id).subscribe(({filters:e})=>{this.sharedData.currentUser.value&&(this.items=e.map(e=>Object.assign({id:e.filter_id,personal:e.userid===this.sharedData.currentUser.value.id},e)),this.itemsFull=this.items,this.changeDetectorRef.markForCheck())})}deleteFilter(e){this.modalService.close(),setTimeout(()=>{const t=this.items.indexOf(e);-1!==t&&(this.items=[...this.items.slice(0,t),...this.items.slice(t+1)],this.changeDetectorRef.markForCheck())}),this.dataService.deleteFilter2(this.sharedData.compatCurrentTeam.id,e.id).subscribe(e=>{})}renameFilter({item:e,name:t}){const i=this.items.findIndex(t=>t.id===e.id);-1!==i&&(this.items[i].name=t,this.items=[...this.items]),this.dataService.updateFilter2(this.sharedData.compatCurrentTeam.id,e.id,{name:t}).subscribe()}saveFilter({personal:e}){const t=e?$localize`:@@cu-saved-filter-button__title_save-personal-filter:Save personal filter`:$localize`:@@cu-saved-filter-button__title_save-workspace-filter:Save workspace filter`;this.createPersonal=e,this.modalService.open({title:t,content:this.saveModal,bodyModifier:"cu-modal__body_no-min-height"})}createFilter({name:e,saveSorting:t}){this.dataService.createFilter2(this.sharedData.compatCurrentTeam.id,{name:e,personal:this.createPersonal,filters:this.viewPayload.filters,sorting:t?this.viewPayload.sorting:null,columns:t?this.viewPayload.columns:null}).subscribe(e=>{this.loadData()})}replaceFilter({item:e,saveSorting:t}){return e.filters=this.viewPayload.filters,e.sorting=t?this.viewPayload.sorting:null,e.columns=t?this.viewPayload.columns:null,this.dataService.createFilter2(this.sharedData.compatCurrentTeam.id,{filter_id:e.id,name:e.name,personal:this.createPersonal,filters:e.filters,sorting:e.sorting,columns:e.columns}).subscribe(e=>{})}checkAndLoadData(){this.dataLoaded||(this.loadData(),this.dataLoaded=!0),this.onDropdownOpen.emit("saved")}showRemoveConfirmModal(e){e&&(this.removeFilter=e,this.modalService.open({keepCurrent:!0,modifier:"template-list-cc__modal",content:this.confirmRemoveModal}))}closeRemoveConfirmModal(){this.modalService.close()}openSavedFilterListDropdown(){this.savedFilterListDropdown.open()}closeSavedFilterListDropdown(){this.savedFilterListDropdown.close()}searchFilters(e){this.items=""!==e?this.searchFiltersObj(this.itemsFull,e):this.itemsFull,this.noResults=!!Object(U.a)(this.items),""===e&&(this.noResults=!1),this.changeDetectorRef.markForCheck()}searchFiltersObj(e,t){return e.filter(({name:e})=>e.toLowerCase().includes(t))}clearSearch(){this.items=this.itemsFull,this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(M.a),o.Wb(P.a),o.Wb(E.a),o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-saved-filter-button"]],viewQuery:function(e,t){if(1&e&&(o.jd(ve,3),o.jd(_e,3),o.jd(we,1)),2&e){let e;o.Qc(e=o.rc())&&(t.saveModal=e.first),o.Qc(e=o.rc())&&(t.confirmRemoveModal=e.first),o.Qc(e=o.rc())&&(t.savedFilterListDropdown=e.first)}},inputs:{localValuesLength:"localValuesLength",viewPayload:"viewPayload"},outputs:{onDropdownOpen:"onDropdownOpen",onApply:"onApply"},decls:6,vars:4,consts:function(){let e,t,i;return e=$localize`:@@cu-saved-filter-button__question_delete-filter␟1fccdd48ea9859515a8e1c0adf07348fe7b3a40d␟6499442203857512220: Are you sure you want to delete the ${"\ufffd0\ufffd"}:INTERPOLATION: filter? `,t=$localize`:@@common_cancel␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,i=$localize`:@@common_yes␟11f78ba7176f45e770dc165dc9e67d99062f9983␟4559272341265434421: Yes `,[["tooltip","Saved\xa0Filters",1,"cu-filter-value-add-dropdown",3,"items","localValuesLength","hasSearch","noResults","onSearch","onDelete","onRename","onSelect","onCreate","onOpen"],["savedFilterListDropdown",""],["saveModal",""],["confirmRemoveModal",""],[3,"items","personal","onDelete","onRename","onSelect","onCreate"],[1,"template-list-cc__inner"],[1,"template-list-cc__title"],e,[1,"template-list-cc__options"],[1,"cu-btn","cu-btn_status","cu-btn_option","cu-btn_cancel",3,"click"],t,[1,"cu-btn","cu-btn_status","cu-btn_option",3,"click"],i]},template:function(e,t){1&e&&(o.cc(0,"cu-saved-filter-list-dropdown",0,1),o.qc("onSearch",function(e){return t.searchFilters(e)})("onDelete",function(e){return t.showRemoveConfirmModal(e)})("onRename",function(e){return t.renameFilter(e)})("onSelect",function(e){return t.selectFilter(e)})("onCreate",function(e){return t.saveFilter(e)})("onOpen",function(){return t.checkAndLoadData()}),o.bc(),o.bd(2,Oe,1,2,"ng-template",null,2,o.cd),o.bd(4,ye,8,1,"ng-template",null,3,o.cd)),2&e&&o.Dc("items",t.items)("localValuesLength",t.localValuesLength)("hasSearch",!0)("noResults",t.noResults)},directives:[le,be],encapsulation:2,changeDetection:0}),e})();var Ce=i("ByW2"),ke=i("O5gs");function Te(e,t){1&e&&(o.ac(0),o.cc(1,"div",2),o.gc(2,3),o.bc(),o.Zb())}function De(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"div",6),o.cc(2,"cu-dropdown-list",7),o.qc("onSelect",function(t){return o.Uc(e),o.uc(2).onChange.emit(t.customPayload)}),o.cc(3,"div",8),o.dd(4),o.Xb(5,"div",9),o.bc(),o.bc(),o.bc(),o.Zb()}if(2&e){const e=o.uc(2);o.Ib(1),o.Ob("cu-filter-group-op__item-dropdown_disabled",1!==e.index),o.Ib(1),o.Dc("items",e.options)("showSearch",!1)("dropdownDisabled",1!==e.index),o.Ib(2),o.fd(" ",e.value," ")}}function Se(e,t){1&e&&(o.ac(0),o.gc(1,10),o.Zb())}function Ie(e,t){if(1&e&&(o.cc(0,"div",4),o.bd(1,De,6,6,"ng-container",0),o.bd(2,Se,2,0,"ng-template",null,5,o.cd),o.bc()),2&e){const e=o.Rc(3),t=o.uc();o.Ib(1),o.Dc("ngIf",t.showOr)("ngIfElse",e)}}let Fe=(()=>{class e{constructor(){this.showOr=!0,this.onChange=new o.o,this.FilterGroupOp=Ce.a,this.options=[{id:Ce.a.And,title:Ce.a.And,customPayload:Ce.a.And},{id:Ce.a.Or,title:Ce.a.Or,customPayload:Ce.a.Or}]}ngOnChanges(e){e.options&&(this.options=this.options.map(e=>Object.assign(Object.assign({},e),{checked:this.value===e.customPayload})))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-group-op"]],hostAttrs:[1,"cu-filter-group-op"],inputs:{value:"value",showOr:"showOr",index:"index"},outputs:{onChange:"onChange"},features:[o.Gb],decls:3,vars:2,consts:function(){let e,t;return e=$localize`:@@cu-filter-group-op__item_where␟41e933c8dfc73732fe1e4ea4ee337cd7da38fbf1␟5096468729393082744: Where `,t=$localize`:@@cu-filter-group-op__item_and␟1a8e4d6a42464c028d6c95919e677ab095d0f952␟188313477943387511:And`,[[4,"ngIf","ngIfElse"],["optionsView",""],[1,"cu-filter-group-op__item"],e,[1,"cu-filter-group-op__item","cu-filter-group-op__item_pointer"],["andOnly",""],[1,"cu-filter-group-op__item-dropdown"],[3,"items","showSearch","dropdownDisabled","onSelect"],[1,"cu-filter-group-op__item-dropdown-toggle"],["icon","cu2-caret-down",1,"cu-filter-group-op__item-dropdown-toggle-icon"],t]},template:function(e,t){if(1&e&&(o.bd(0,Te,3,0,"ng-container",0),o.bd(1,Ie,4,2,"ng-template",null,1,o.cd)),2&e){const e=o.Rc(2);o.Dc("ngIf",0===t.index)("ngIfElse",e)}},directives:[g.q,ke.a,v.a],styles:['.cu-filter-group-op{display:flex;position:relative;background:#fff}.dark-theme .cu-filter-group-op{background:#384047;color:#abaeb0}.cu-filter-group-op__item{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;height:32px;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-filter-group-op__item{color:#d5d6d7}.cu-filter-group-op__item_pointer{cursor:pointer}.cu-filter-group-op__item-dropdown{display:flex;align-items:center;width:55px;height:22px;border-radius:3px;background:#e9ebf0;background:rgba(233,235,240,.5)}.dark-theme .cu-filter-group-op__item-dropdown{background:#2b343b}.cu-filter-group-op__item-dropdown:hover{background:#e9ebf0}.dark-theme .cu-filter-group-op__item-dropdown:hover{background:#1e272e}.cu-filter-group-op__item-dropdown_disabled{opacity:.4;pointer-events:none}.cu-filter-group-op__item-dropdown .cu-dropdown-list{width:100%}.cu-filter-group-op__item-dropdown .cu-dropdown-list_opened .cu-filter-group-op__item-dropdown-toggle-icon{transform:rotate(180deg)}.cu-filter-group-op__item-dropdown-toggle{display:flex;align-items:center;height:22px;padding:0 4px 0 6px;font:500 11px/1 Gotham Pro,Proxima Nova,arial,serif;color:#7c828d}.dark-theme .cu-filter-group-op__item-dropdown-toggle{color:#abaeb0}.cu-filter-group-op__item-dropdown-toggle-icon{transition:transform .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;margin-left:auto;fill:#b9bec7}.dark-theme .cu-filter-group-op__item-dropdown-toggle-icon{fill:#7c828d}.cu-filter-group-op:after{content:"";display:block;position:absolute;width:100%;height:8px;bottom:-8px;background:linear-gradient(0deg,hsla(0,0%,100%,0),#fff)}.dark-theme .cu-filter-group-op:after{background:linear-gradient(0deg,rgba(56,64,71,0),#384047)}'],encapsulation:2,changeDetection:0}),e})();var Le=i("CgHv"),je=i("YwDF");const $e=["dropdown"];function Ue(e,t){if(1&e){const e=o.dc();o.cc(0,"div",9),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).clickOp(i)}),o.dd(1),o.bc()}if(2&e){const e=t.$implicit;o.Ib(1),o.fd(" ",e.title," ")}}function Ve(e,t){if(1&e&&(o.cc(0,"div"),o.cc(1,"div",6),o.cc(2,"div",7),o.bd(3,Ue,2,1,"div",8),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(3),o.Dc("ngForOf",e.ops)("ngForTrackBy",e.trackById)}}let Me=(()=>{class e{constructor(){this.onChange=new o.o,this.trackById=Object(m.d)("id")}ngOnInit(){this.autoOpen&&setTimeout(()=>this.dropdown.open())}clickOp(e){this.onChange.emit(e),this.dropdown.close()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-ops-dropdown"]],viewQuery:function(e,t){if(1&e&&o.jd($e,3),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-filter-ops-dropdown"],inputs:{ops:"ops",selectedOp:"selectedOp",autoOpen:"autoOpen"},outputs:{onChange:"onChange"},decls:7,vars:5,consts:[["cuDropdown","",1,"cu-dropdown_left","cu-filter-ops-dropdown__drop",3,"dropdownPreventDocumentScroll","dropdownCloseOnInsideClick"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-filter-ops-dropdown__toggle"],[1,"cu-filter-ops-dropdown__value",3,"cuTooltip","tooltipDisabledIfTextNotTruncated"],["icon","angle-right",1,"cu-filter-ops-dropdown__down"],[4,"cuDropdownMenu"],[1,"filter-list"],[1,"filter-list__body",3,"perfectScrollbar"],["class","filter-list__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-list__item",3,"click"]],template:function(e,t){1&e&&(o.cc(0,"div",0,1),o.cc(2,"div",2),o.cc(3,"div",3),o.dd(4),o.bc(),o.Xb(5,"div",4),o.bc(),o.bd(6,Ve,4,2,"div",5),o.bc()),2&e&&(o.Dc("dropdownPreventDocumentScroll",!1)("dropdownCloseOnInsideClick",!1),o.Ib(3),o.Dc("cuTooltip",null==t.selectedOp?null:t.selectedOp.title)("tooltipDisabledIfTextNotTruncated",!0),o.Ib(1),o.fd(" ",null==t.selectedOp?null:t.selectedOp.title," "))},directives:[d.b,u.a,h.a,v.a,p.a,f.a,g.p],styles:['.cu-filter-ops-dropdown{flex-shrink:0;min-width:50px;padding:0 5px;height:100%;min-height:32px;align-items:center;display:flex;border-radius:3px;border:1px solid #e9ebf0}.dark-theme .cu-filter-ops-dropdown{border-color:#2b343b}.cu-filter-value__editor .cu-filter-ops-dropdown{border:0;flex-grow:1;min-height:30px}.cu-filter-ops-dropdown__drop{width:100%}.cu-filter-ops-dropdown__toggle{display:flex;align-items:center;justify-content:space-between}.cu-filter-ops-dropdown__value{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-filter-ops-dropdown__value{font-family:var(--global-font-support)}}.dark-theme .cu-filter-ops-dropdown__value{color:#d5d6d7}.cu-filter-ops-dropdown__down{transition:transform .1s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px}.dark-theme .cu-filter-ops-dropdown__down{fill:#abaeb0}.cu-dropdown_open>div>.cu-filter-ops-dropdown__down{transform:rotate(-90deg)}'],encapsulation:2,changeDetection:0}),e})();var Pe=i("Xuvk"),Ee=i("N/Rp"),Re=i("2Vo4"),Ge=i("lJxs"),Ae=i("oy6Y"),ze=i("ukJz");const qe=["datePicker"];function Qe(e,t){if(1&e&&(o.cc(0,"div",3),o.dd(1),o.vc(2,"async"),o.Xb(3,"div",4),o.bc()),2&e){const e=o.uc();o.Ib(1),o.fd(" ",o.wc(2,1,e.dateText$)," ")}}let Ne=(()=>{class e{constructor(e){this.timezonesService=e,this.destroy$=new l.a,this.dateFormatTemplate="M/D/YYYY",this.period=!1,this.dateFormat="m/d/y",this.weekStart=0,this.onChange=new o.o,this.filterSubject$=new Re.a(null),this.trackById=Object(m.d)("id")}ngOnInit(){this.autoOpen&&setTimeout(()=>this.datePicker.open()),this.dateText$=this.filterSubject$.pipe(Object(Ge.a)(e=>e?this.period&&e.startDate?`${this.formatDate(e.startDate)} - ${this.formatDate(e.dueDate)}`:this.formatDate(e.dueDate):null)),this.dateValue$=this.filterSubject$.pipe(Object(Ge.a)(e=>e?this.timezonesService.createMoment(e.dueDate):this.timezonesService.createMoment())),this.startDateValue$=this.filterSubject$.pipe(Object(Ge.a)(e=>e?this.timezonesService.createMoment(e.startDate):this.timezonesService.createMoment()))}ngOnChanges(e){e.value&&this.filterSubject$.next(this.value),e.dateFormat&&(this.dateFormatTemplate="d/m/y"===this.dateFormat?"D/M/YYYY":"y/m/d"===this.dateFormat?"YYYY/M/D":"M/D/YYYY"),e.period&&this.filterSubject$.next(this.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}handleDateSelect(e){e&&e.sendRequest&&this.onChange.emit({dueDate:this.getDateNoTime(e.dueDate,e.dueDateTime),startDate:this.getDateNoTime(e.startDate,e.startDateTime),dueDateTime:e.dueDateTime,startDateTime:e.startDateTime})}open(){this.datePicker.open()}close(){this.datePicker.close()}formatDate(e){return e?this.timezonesService.createMoment(e).format(this.dateFormatTemplate):""}getDateNoTime(e,t=!1,i=!1){if(!e)return null;if(t)return e.valueOf();const o=this.timezonesService.createMoment().year(e.year()).month(e.month()).date(e.date());return i?o.endOf("day").valueOf():o.startOf("day").valueOf()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(Ae.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-date-filter"]],viewQuery:function(e,t){if(1&e&&o.jd(qe,3),2&e){let e;o.Qc(e=o.rc())&&(t.datePicker=e.first)}},hostAttrs:[1,"cu-date-filter"],inputs:{autoOpen:"autoOpen",period:"period",value:"value",dateFormat:"dateFormat",weekStart:"weekStart"},outputs:{onChange:"onChange"},features:[o.Gb],decls:6,vars:15,consts:[[3,"selectedDate","startDate","dueTimeExists","startTimeExists","forceStart","forceDue","closeOnQuickSelect","showStart","onChange"],["datePicker",""],["class","cu-date-filter__value",4,"ngIf"],[1,"cu-date-filter__value"],["icon","angle-right",1,"cu-date-filter__down"]],template:function(e,t){1&e&&(o.cc(0,"cu-recurring-date-dropdown",0,1),o.qc("onChange",function(e){return t.handleDateSelect(e)}),o.vc(2,"async"),o.vc(3,"async"),o.bd(4,Qe,4,3,"div",2),o.vc(5,"async"),o.bc()),2&e&&(o.Dc("selectedDate",o.wc(2,9,t.dateValue$))("startDate",t.period?o.wc(3,11,t.startDateValue$):null)("dueTimeExists",null==t.value?null:t.value.startDateTime)("startTimeExists",null==t.value?null:t.value.dueDateTime)("forceStart",!1)("forceDue",!0)("closeOnQuickSelect",!0)("showStart",t.period),o.Ib(4),o.Dc("ngIf",o.wc(5,13,t.filterSubject$)))},directives:[ze.a,g.q,v.a],pipes:[g.b],styles:['.cu-date-filter{margin-left:10px}.cu-date-filter__value{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:12px;color:#292d34;white-space:nowrap;display:flex;align-items:center}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-date-filter__value{font-family:var(--global-font-support)}}.dark-theme .cu-date-filter__value{color:#d5d6d7}.cu-date-filter__down{width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px;transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s}.cu-date-filter__down:hover{transition:none}.dark-theme .cu-date-filter__down{fill:#abaeb0}.cu-dropdown_open>div>.cu-date-filter__down{transform:rotate(-90deg)}'],encapsulation:2,changeDetection:0}),e})();var Be=i("gL+T");const Xe=["input"];function Ye(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"input",3,4),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().value=t})("ngModelChange",function(){return o.Uc(e),o.uc().debounceFilter.next()})("keyup.Esc",function(){return o.Uc(e),o.uc().clear()}),o.bc(),o.Zb()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("type",e.inputType)("placeholder",e.placeholder)("ngModel",e.value)}}function We(e,t){if(1&e){const e=o.dc();o.cc(0,"input",5,4),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().value=t})("ngModelChange",function(){return o.Uc(e),o.uc().debounceFilter.next()})("keyup.Esc",function(){return o.Uc(e),o.uc().clear()}),o.bc()}if(2&e){const e=o.uc();o.Dc("placeholder",e.placeholder)("ngModel",e.value)}}function Je(e,t){if(1&e){const e=o.dc();o.cc(0,"div",6),o.qc("click",function(){return o.Uc(e),o.uc().clear()}),o.bc()}}let Ze=(()=>{class e{constructor(){this.inputType="text",this.placeholder=$localize`:form input placeholder@@forms_placeholder--filter:Filter...`,this.noClear=!1,this.isNumbersOnly=!1,this.onChange=new o.o,this.dueTime=300,this.debounceFilter=new l.a,this.destroy$=new l.a}ngOnInit(){this.debounceFilter.pipe(Object(c.a)(this.dueTime)).pipe(Object(s.a)(this.destroy$)).subscribe(()=>this.onChange.emit(this.value))}ngOnDestroy(){this.destroy$.next()}clear(){this.value&&(this.value="",this.debounceFilter.next())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-input-filter"]],viewQuery:function(e,t){if(1&e&&o.jd(Xe,3),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first)}},hostAttrs:[1,"cu-input-filter"],inputs:{inputType:"inputType",placeholder:"placeholder",value:"value",noClear:"noClear",isNumbersOnly:"isNumbersOnly"},outputs:{onChange:"onChange"},decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["numbersOnly",""],["class","cu-input-filter__clear","icon","close",3,"click",4,"ngIf"],[1,"cu-input-filter__input",3,"type","placeholder","ngModel","ngModelChange","keyup.Esc"],["input",""],["cuNumbersOnly","",1,"cu-input-filter__input",3,"placeholder","ngModel","ngModelChange","keyup.Esc"],["icon","close",1,"cu-input-filter__clear",3,"click"]],template:function(e,t){if(1&e&&(o.bd(0,Ye,3,3,"ng-container",0),o.bd(1,We,2,2,"ng-template",null,1,o.cd),o.bd(3,Je,1,0,"div",2)),2&e){const e=o.Rc(2);o.Dc("ngIf",!t.isNumbersOnly)("ngIfElse",e),o.Ib(3),o.Dc("ngIf",t.value&&!t.noClear)}},directives:[g.q,G.c,G.p,G.s,Be.a,v.a],styles:['.cu-input-filter{display:flex}.cu-input-filter__clear{padding:10px 1px 10px 6px;width:16px;height:30px;stroke:rgba(52,52,52,.3);order:2;cursor:pointer}.dark-theme .cu-input-filter__clear{stroke:#828588}.cu-input-filter__clear.archive-filter-clear{margin-right:5px}.cu-input-filter__clear:focus,.cu-input-filter__clear:hover{stroke:rgba(52,52,52,.7)}.dark-theme .cu-input-filter__clear:focus,.dark-theme .cu-input-filter__clear:hover{stroke:#abaeb0}.cu-input-filter__value{display:flex}.cu-input-filter__input{transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:14px;order:1;flex-grow:1;width:100%;height:30px;padding:0;border:none;-webkit-font-smoothing:antialiased;color:#343434}.cu-input-filter__input:hover{transition:none}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-input-filter__input{font-family:var(--global-font-support)}}.dark-theme .cu-input-filter__input{color:#d5d6d7;background:transparent}.cu-input-filter__input:focus{box-shadow:none}.cu-input-filter__input:-ms-input-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:13px;opacity:.6}.cu-input-filter__input::placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:13px;opacity:.6}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-input-filter__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-input-filter__input::placeholder{font-family:var(--global-font-support)}}.contrast_high .cu-input-filter__input:-ms-input-placeholder{color:#ababab;opacity:1}.contrast_high .cu-input-filter__input::placeholder{color:#ababab;opacity:1}.cu-input-filter__input::-moz-placeholder{line-height:28px}'],encapsulation:2,changeDetection:0}),e})();function Ke(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-date-filter",5),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeDate(t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("autoOpen",e.autoOpenValue)("period",null==e.selectedOp||null==e.selectedOp.editorOptions?null:e.selectedOp.editorOptions.period)("value",e.value)("dateFormat",e.dateFormat)("weekStart",e.weekStart)}}function He(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-input-filter",9),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeValue(t)}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("value",e.value.x)("isNumbersOnly",!0)("placeholder","#")("noClear",!0)}}const et=function(){return["bottom-right","auto"]};function tt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",6),o.bd(1,He,1,4,"cu-input-filter",7),o.cc(2,"cu-dropdown-list",8),o.qc("onSelect",function(t){return o.Uc(e),o.uc().remapChangeOp(t.customPayload)}),o.cc(3,"div",1),o.dd(4),o.bc(),o.Xb(5,"div",2),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Dc("ngIf",(null==e.selectedOp?null:e.selectedOp.needEditor)&&(null==e.selectedOp?null:e.selectedOp.multiValue)),o.Ib(1),o.Dc("items",e.remappedOptions)("dropdownPlacement",o.Gc(4,et)),o.Ib(2),o.fd(" ",null==e.mappedSelectedValue?null:e.mappedSelectedValue.title," ")}}const it={x:1};let ot=(()=>{class e{constructor(){this.dateFormat="m/d/y",this.weekStart=0,this.onChange=new o.o,this.dateOperations=a.f}get isRemappedValue(){return this.selectedOp&&this.selectedOp.multiValue}get remappedOptions(){return this.isRemappedValue?this.selectedOp.editorOptions.options.map(e=>Object.assign(Object.assign({},e),{checked:e.id===this.selectedOp.id,customPayload:e})):[]}get mappedSelectedValue(){return this.selectedOp.editorOptions.options.find(e=>e.id===this.value.op)}get optsSelectedValue(){return this.isRemappedValue?(this.ops||[]).find(e=>e.id===this.selectedOp.editorOptions.remappedValue):this.selectedOp}ngOnInit(){}ngOnChanges(e){(e.field||e.value)&&(this.field?(this.ops=this.field.startsWith(Ee.a)?a.f.customField:a.f[this.field]||[],this.value&&(this.selectedOp=this.ops.find(e=>e.editorOptions&&e.multiValue?e.editorOptions.options.find(e=>e.id===this.value.op):e.id===this.value.op))):(this.ops=[],this.selectedOp=null))}changeDate(e){this.onChange.emit(Object.assign(Object.assign({},e),{op:this.value?this.value.op:null}))}changeValue(e){this.onChange.emit({x:e?parseInt(e,0):1,op:this.value?this.value.op:null})}changeOpMenu(e){e.editorOptions&&e.editorOptions.preset?this.changeOp(e,{x:e.editorOptions.x}):e.editorOptions&&e.multiValue?this.remapChangeOp(e.editorOptions.options[0]):this.changeOp(e)}remapChangeOp(e,t){this.changeOp(e,it)}changeOp(e,t={}){this.onChange.emit(Object.assign(Object.assign({},this.value||t),{op:e.id})),this.autoOpen&&e&&(this.autoOpenValue=e.needEditor&&(!this.value||!this.value.dueDate))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-date-ext-filter"]],hostAttrs:[1,"cu-date-ext-filter"],inputs:{autoOpen:"autoOpen",value:"value",field:"field",dateFormat:"dateFormat",weekStart:"weekStart"},outputs:{onChange:"onChange"},features:[o.Gb],decls:6,vars:8,consts:[[1,"cu-date-ext-filter__container",3,"items","dropdownPlacement","showSearch","autoFocusSearch","onSelect"],[1,"cu-date-ext-filter__container-dropdown-text"],["icon","angle-right",1,"cu-date-ext-filter__container-dropdown-angle"],["class","cu-date-ext-filter__container",3,"autoOpen","period","value","dateFormat","weekStart","onChange",4,"ngIf"],["class","cu-date-ext-filter__container cu-date-ext-filter__container_no-border",4,"ngIf"],[1,"cu-date-ext-filter__container",3,"autoOpen","period","value","dateFormat","weekStart","onChange"],[1,"cu-date-ext-filter__container","cu-date-ext-filter__container_no-border"],["class","cu-date-ext-filter__container-input",3,"value","isNumbersOnly","placeholder","noClear","onChange",4,"ngIf"],[1,"cu-date-ext-filter__container-dropdown",3,"items","dropdownPlacement","onSelect"],[1,"cu-date-ext-filter__container-input",3,"value","isNumbersOnly","placeholder","noClear","onChange"]],template:function(e,t){1&e&&(o.cc(0,"cu-dropdown-list",0),o.qc("onSelect",function(e){return t.changeOpMenu(e)}),o.cc(1,"div",1),o.dd(2),o.bc(),o.Xb(3,"div",2),o.bc(),o.bd(4,Ke,1,5,"cu-date-filter",3),o.bd(5,tt,6,5,"div",4)),2&e&&(o.Dc("items",t.ops)("dropdownPlacement",o.Gc(7,et))("showSearch",!0)("autoFocusSearch",!0),o.Ib(2),o.fd(" ",null==t.selectedOp?null:t.selectedOp.title," "),o.Ib(2),o.Dc("ngIf",(null==t.selectedOp?null:t.selectedOp.needEditor)&&!(null!=t.selectedOp&&t.selectedOp.multiValue)),o.Ib(1),o.Dc("ngIf",(null==t.selectedOp?null:t.selectedOp.needEditor)&&t.isRemappedValue))},directives:[ke.a,v.a,g.q,Ne,Ze],styles:['.cu-date-ext-filter{display:flex;width:100%;height:100%;white-space:nowrap}.cu-filter-value__editor .cu-date-ext-filter{min-height:32px}.cu-filter-value__editor .cu-date-ext-filter__container{min-height:32px;border-radius:3px;width:100%;border:1px solid #e9ebf0}.dark-theme .cu-filter-value__editor .cu-date-ext-filter__container{border-color:#2b343b}.cu-filter-value__editor .cu-date-ext-filter__container .cu-dropdown{width:100%;height:100%;display:flex;flex-grow:1;justify-content:stretch;align-items:stretch}.cu-filter-value__editor .cu-date-ext-filter__container .cu-dropdown .cu-dropdown__toggle{width:100%;display:flex;align-items:center;justify-content:flex-end;padding:5px}.cu-date-ext-filter__container{display:flex}.cu-date-ext-filter__container_no-border{border:0}.cu-date-ext-filter__container+.cu-date-ext-filter__container{margin-left:8px;flex-grow:1}.cu-date-ext-filter__container-dropdown{flex-grow:1;padding:0 5px}.cu-date-ext-filter__container-dropdown .cu-dropdown,.cu-date-ext-filter__container-dropdown .cu-dropdown__toggle{height:100%}.cu-date-ext-filter__container-dropdown .cu-dropdown__toggle{display:flex;align-items:center}.cu-date-ext-filter__container-dropdown-text{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:12px;flex-grow:1;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-date-ext-filter__container-dropdown-text{font-family:var(--global-font-support)}}.dark-theme .cu-date-ext-filter__container-dropdown-text{color:#d5d6d7}.cu-date-ext-filter__container-dropdown-angle{transition:transform .1s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px}.dark-theme .cu-date-ext-filter__container-dropdown-angle{fill:#abaeb0}.cu-date-ext-filter__container-dropdown .cu-dropdown_open .cu-date-ext-filter__container-dropdown-angle{transform:rotate(-90deg)}.cu-date-ext-filter__container-input{width:40px;flex-shrink:0;border-right:1px solid #e9ebf0}.dark-theme .cu-date-ext-filter__container-input{border-right-color:#2b343b}.cu-date-ext-filter__container-input .cu-input-filter__input{text-align:center;background:transparent;min-width:0;padding:0 5px}'],encapsulation:2,changeDetection:0}),e})();var nt=i("NZfI"),at=i("jEj2"),rt=i("zY2b"),lt=i("bNw/");const ct=["tagList"];let st=(()=>{class e{constructor(e){this.sharedData=e,this.destroy$=new l.a,this.tags=[],this.onChange=new o.o,this.onLoadTags=new o.o,this.onEditTags=new o.o,this.valueTags=[]}ngOnInit(){this.onLoadTags.emit(),this.autoOpen&&setTimeout(()=>this.tagList.open())}ngOnChanges(e){if(e.value||e.tags)if(this.value&&this.tags&&this.tags.length){if(this.valueTags=this.value.map(e=>this.tags.find(t=>t.name===e)).filter(Boolean),(this.valueTags||[]).length!==(this.value||[]).length&&this.tagsLoading&&!this.tagsLoading.lastWasMissing){const e=this.value.filter(e=>-1===this.tags.findIndex(t=>t.name===e));this.onLoadTags.emit({missingTags:e})}}else this.valueTags=[]}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}open(){this.tagList.open()}setTag(e){-1===this.value.findIndex(t=>e.name===t)&&this.onChange.next([...this.value,e.name])}removeTag(e){const t=this.value.findIndex(t=>e.name===t);if(-1!==t){const e=this.value.slice();e.splice(t,1),this.onChange.emit(e.length>0?e:null)}}colorChange(e){this.onEditTags.emit({op:"changeColor",value:e})}renameTag(e){this.onEditTags.emit({op:"rename",value:e})}openDeleteConfirm(e){this.onEditTags.emit({op:"deleteConfirm",value:e})}clear(e){this.value&&this.onChange.emit(null)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(M.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-tag-filter"]],viewQuery:function(e,t){if(1&e&&o.jd(ct,3),2&e){let e;o.Qc(e=o.rc())&&(t.tagList=e.first)}},hostAttrs:[1,"cu-tag-filter"],inputs:{value:"value",tags:"tags",tagsLoading:"tagsLoading",autoOpen:"autoOpen",projectId:"projectId"},outputs:{onChange:"onChange",onLoadTags:"onLoadTags",onEditTags:"onEditTags"},features:[o.Gb],decls:6,vars:18,consts:[[1,"cu-dt-filter","cu-dt-filter_tag"],[3,"tags","tagsLoadingMap","allSpaces","taskTags","spaceId","hideEditOnAllSpaces","readonly","showSelected","openConfirm","onChange","onDelete","onOpenDeleteConfirm","onColorChange","onRename","onPage"],["tagList",""],[1,"cu-dt-filter__value","cu-dt-filter__value_tags"],["modifier","list-view",3,"tags","availableTags","alwaysShowIcon","forFilter","allSpaces","spaceAccess","showArrow","onDelete"]],template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"cu-tags-list",1,2),o.qc("onChange",function(e){return t.setTag(e)})("onDelete",function(e){return t.removeTag(e)})("onOpenDeleteConfirm",function(e){return t.openDeleteConfirm(e)})("onColorChange",function(e){return t.colorChange(e)})("onRename",function(e){return t.renameTag(e)})("onPage",function(e){return t.onLoadTags.emit(e)}),o.cc(3,"div",3),o.cc(4,"cu-tags-view",4),o.qc("onDelete",function(e){return t.removeTag(e)}),o.vc(5,"async"),o.bc(),o.bc(),o.bc(),o.bc()),2&e&&(o.Ib(1),o.Dc("tags",t.tags)("tagsLoadingMap",t.tagsLoading)("allSpaces",!t.projectId)("taskTags",t.valueTags)("spaceId",t.projectId)("hideEditOnAllSpaces",!0)("readonly",!0)("showSelected",!1)("openConfirm",!1),o.Ib(3),o.Dc("tags",t.valueTags)("availableTags",t.tags)("alwaysShowIcon",!1)("forFilter",!0)("allSpaces",!o.wc(5,16,t.sharedData.compatCurrentProject$))("spaceAccess",!1)("showArrow",!0))},directives:[rt.a,lt.a],pipes:[g.b],styles:[".cu-tag-filter{display:block;min-width:0}.cu-tag-filter cu-tags-list{width:100%}.cu-tag-filter cu-tags-list .cu-dropdown__toggle{justify-content:flex-start}.cu-tag-filter__arrow{height:12px;width:12px;margin:0 5px;fill:#b9bec7}"],encapsulation:2,changeDetection:0}),e})();var dt=i("OCQ+");const ut=["searchInput"];function pt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",10),o.cc(1,"input",11,12),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc(2).searchString=t})("ngModelChange",function(t){return o.Uc(e),o.uc(2).debounceSearch$.next(t)})("keyup",function(t){return o.Uc(e),o.uc(2).keyUp(t)}),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Ib(1),o.Dc("ngModel",e.searchString)}}function ht(e,t){}const ft=function(e,t,i){return{option:e,index:t,last:i}};function gt(e,t){if(1&e){const e=o.dc();o.cc(0,"div",13),o.qc("click",function(){o.Uc(e);const i=t.$implicit;return o.uc(2).selectOption(i)}),o.bd(1,ht,0,0,"ng-template",14),o.bc()}if(2&e){const e=t.$implicit,i=t.index,n=t.last,a=o.uc(2);o.Ib(1),o.Dc("ngTemplateOutlet",a.itemTemplate)("ngTemplateOutletContext",o.Jc(2,ft,e,i,n))}}function mt(e,t){if(1&e&&(o.cc(0,"div"),o.cc(1,"div",6),o.cc(2,"div",7),o.bd(3,pt,3,1,"div",8),o.bd(4,gt,2,6,"div",9),o.bc(),o.bc(),o.bc()),2&e){const e=o.uc();o.Ib(3),o.Dc("ngIf",e.showSearch),o.Ib(1),o.Dc("ngForOf",e.searching?e.filteredOptions:e.options)("ngForTrackBy",e.trackByIdOrIndex)}}let bt=(()=>{class e{constructor(e){this.cdr=e,this.autoOpen=!0,this.showSearch=!1,this.onChange=new o.o,this.searchString="",this.filteredOptions=[],this.searching=!1,this.debounceSearch$=new l.a,this.destroy$=new l.a,this.trackByIdOrIndex=(e,t)=>t.id||e}ngOnInit(){this.autoOpen&&setTimeout(()=>this.dropdown.open()),this.debounceSearch$.pipe(Object(c.a)(500)).pipe(Object(s.a)(this.destroy$)).subscribe(e=>{this.search(e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}search(e){""!==e?(this.searching=!0,this.filteredOptions=this.options.filter(({name:t})=>t.toLowerCase().includes(e.toLowerCase())),this.cdr.detectChanges()):this.resetSearch()}resetSearch(){this.searchString="",this.searching=!1,this.filteredOptions=[],this.cdr.detectChanges()}selectOption(e){this.onChange.emit(e),this.dropdown&&this.dropdown.isOpen&&this.dropdown.close()}focusInput(){this.showSearch&&this.searchInput&&setTimeout(()=>{this.searchInput.nativeElement.focus()})}keyUp(e){e.keyCode===R.a.ENTER&&this.filteredOptions&&this.filteredOptions.length>0&&this.selectOption(this.filteredOptions[0])}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-dropdown-filter"]],viewQuery:function(e,t){if(1&e&&(o.jd(d.b,3),o.jd(ut,1)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.searchInput=e.first)}},hostAttrs:[1,"cu-dropdown-filter"],inputs:{itemTemplate:"itemTemplate",filterValueTemplate:"filterValueTemplate",options:"options",autoOpen:"autoOpen",showSearch:"showSearch"},outputs:{onChange:"onChange"},decls:6,vars:2,consts:function(){let e;return e=$localize`:form input placeholder@@forms_placeholder--search-1␟8aa58cf00d949c509df91c621ab38131df0a7599␟8854094932942190741:Search...`,[["cuDropdown","",1,"cu-dropdown_left",3,"dropdownCloseOnInsideClick","dropdownOpen","dropdownClose"],["dropdown","dropdown"],["cuDropdownToggle",""],[1,"cu-dropdown-filter__value",3,"ngTemplateOutlet"],["icon","angle-right",1,"cu-dropdown-filter__down"],[4,"cuDropdownMenu"],[1,"filter-list"],[1,"filter-list__body",3,"perfectScrollbar"],["class","filter-list__item filter-list__item-search",4,"ngIf"],["class","filter-list__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-list__item","filter-list__item-search"],["placeholder",e,3,"ngModel","ngModelChange","keyup"],["searchInput",""],[1,"filter-list__item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(e,t){1&e&&(o.cc(0,"div",0,1),o.qc("dropdownOpen",function(){return t.focusInput()})("dropdownClose",function(){return t.resetSearch()}),o.cc(2,"div",2),o.Xb(3,"div",3),o.Xb(4,"div",4),o.bc(),o.bd(5,mt,5,3,"div",5),o.bc()),2&e&&(o.Dc("dropdownCloseOnInsideClick",!t.showSearch),o.Ib(3),o.Dc("ngTemplateOutlet",t.filterValueTemplate))},directives:[d.b,u.a,g.x,v.a,p.a,f.a,g.q,g.p,G.c,G.p,G.s],styles:[".cu-dropdown-filter{display:flex;width:100%}.cu-dropdown-filter__icon{width:16px;height:16px}.cu-dropdown-filter__value{display:flex}.cu-dropdown-filter__down{width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px;transition:all .1s cubic-bezier(.785,.135,.15,.86) 0s}.cu-dropdown-filter__down:hover{transition:none}.dark-theme .cu-dropdown-filter__down{fill:#abaeb0}.cu-dropdown_open>div>.cu-dropdown-filter__down{transform:rotate(-90deg)}"],encapsulation:2,changeDetection:0}),e})();function vt(e,t){if(1&e&&o.dd(0),2&e){const e=t.option;o.fd("",null==e?null:e.title,"\n")}}function _t(e,t){if(1&e&&o.dd(0),2&e){const e=o.uc();o.fd(" ",e.valueTitle,"\n")}}let wt=(()=>{class e{constructor(){this.onChange=new o.o,this.dependencyValueOps=a.m}ngOnInit(){}ngOnChanges(e){if(e.value){const e=a.m.find(e=>e.id===this.value);this.valueTitle=e?e.title:null}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-dependency-filter"]],hostAttrs:[1,"cu-dependency-filter"],inputs:{autoOpen:"autoOpen",value:"value"},outputs:{onChange:"onChange"},features:[o.Gb],decls:5,vars:4,consts:[[3,"options","autoOpen","itemTemplate","filterValueTemplate","onChange"],["itemTemplate",""],["valueTemplate",""]],template:function(e,t){if(1&e&&(o.cc(0,"cu-dropdown-filter",0),o.qc("onChange",function(e){return t.onChange.emit(e)}),o.bc(),o.bd(1,vt,1,1,"ng-template",null,1,o.cd),o.bd(3,_t,1,1,"ng-template",null,2,o.cd)),2&e){const e=o.Rc(2),i=o.Rc(4);o.Dc("options",t.dependencyValueOps)("autoOpen",t.autoOpen)("itemTemplate",e)("filterValueTemplate",i)}},directives:[bt],styles:['.cu-dependency-filter .cu-dropdown{width:100%}.cu-dependency-filter .cu-dropdown .cu-dropdown__toggle{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:400;font-size:12px;line-height:12px;display:flex;align-items:center;height:30px;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-dependency-filter .cu-dropdown .cu-dropdown__toggle{font-family:var(--global-font-support)}}.dark-theme .cu-dependency-filter .cu-dropdown .cu-dropdown__toggle{color:#d5d6d7}'],encapsulation:2,changeDetection:0}),e})();var Ot=i("5lwC"),yt=i("8UY1"),xt=i("oV/j");let Ct=(()=>{class e{constructor(){this.onChange=new o.o}ngOnInit(){}saveCurrency(e,t=!1){t&&e&&e.endsWith(".")||this.onChange.emit(Object(Ot.b)(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-currency-filter"]],hostAttrs:[1,"cu-currency-filter"],inputs:{value:"value"},outputs:{onChange:"onChange"},decls:2,vars:5,consts:[["type","text","containerClass","popover_white","placement","auto","outsideClick","true","container","body","triggers","","data-lpignore","true",1,"cu-custom-fields__form-input","cu-custom-fields__form-input_currency",3,"ngModel","imask","unmask","ngModelChange","blur","keydown.Enter"]],template:function(e,t){1&e&&(o.cc(0,"input",0),o.qc("ngModelChange",function(e){return t.value.field.customField.value=e})("blur",function(){return t.saveCurrency(t.value.field.customField.value,!0)})("keydown.Enter",function(){return t.saveCurrency(t.value.field.customField.value,!0)}),o.vc(1,"customFieldCurrencyMask"),o.bc()),2&e&&o.Dc("ngModel",t.value.field.customField.value)("imask",o.wc(1,3,t.value.field.customField))("unmask","typed")},directives:[G.c,G.p,G.s,yt.a],pipes:[xt.a],encapsulation:2,changeDetection:0}),e})();var kt=i("VlEK");let Tt=(()=>{class e{constructor(){this.onChange=new o.o}ngOnInit(){}valueChange(e){this.onChange.emit(e?e.formatted_address:e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-location-map-filter"]],hostAttrs:[1,"cu-location-map-filter"],inputs:{value:"value"},outputs:{onChange:"onChange"},decls:1,vars:1,consts:[[3,"ngModel","ngModelChange","valueChange"]],template:function(e,t){1&e&&(o.cc(0,"cu-location-input",0),o.qc("ngModelChange",function(e){return t.value.field.customField.value=e})("valueChange",function(e){return t.valueChange(e)}),o.bc()),2&e&&o.Dc("ngModel",t.value.field.customField.value)},directives:[kt.a,G.p,G.s],encapsulation:2,changeDetection:0}),e})();var Dt=i("31bS");const St=["input"];function It(e,t){if(1&e){const e=o.dc();o.cc(0,"div",3),o.qc("click",function(){o.Uc(e);const t=o.uc(),i=o.Rc(1);return t.clear(),i.clear()}),o.bc()}}let Ft=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.onChange=new o.o,this.destroy$=new l.a}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}ngOnChanges(e){e.value&&(this.textValue=this.value&&2===this.value.length?this.value[1]:null)}clear(){this.value&&(this.value=[],this.onChange.emit([])),this.textValue=null,this.changeDetectorRef.markForCheck()}changeTime(e){e&&this.onChange.emit([1e3*e.seconds,e.input||e.output])}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-time-input-filter"]],viewQuery:function(e,t){if(1&e&&o.jd(St,3),2&e){let e;o.Qc(e=o.rc())&&(t.input=e.first)}},hostAttrs:[1,"cu-time-input-filter"],inputs:{value:"value"},outputs:{onChange:"onChange"},features:[o.Gb],decls:3,vars:2,consts:[[1,"cu-time-input-filter__input",3,"textValue","onChange"],["input",""],["class","cu-time-input-filter__clear","icon","close",3,"click",4,"ngIf"],["icon","close",1,"cu-time-input-filter__clear",3,"click"]],template:function(e,t){1&e&&(o.cc(0,"cu-time-estimates-input",0,1),o.qc("onChange",function(e){return t.changeTime(e)}),o.bc(),o.bd(2,It,1,0,"div",2)),2&e&&(o.Dc("textValue",t.textValue),o.Ib(2),o.Dc("ngIf",t.value))},directives:[Dt.a,g.q,v.a],styles:['.cu-time-input-filter{display:flex}.cu-time-input-filter__clear{position:absolute;right:30px;padding:10px 12px 10px 6px;width:26px;height:30px;stroke:rgba(52,52,52,.3);cursor:pointer}.dark-theme .cu-time-input-filter__clear{stroke:#828588}.cu-time-input-filter__clear:hover{stroke:rgba(52,52,52,.7)}.dark-theme .cu-time-input-filter__clear:hover{stroke:#abaeb0}.cu-time-input-filter__input{width:100%;min-width:130px;height:30px;padding:0;-webkit-font-smoothing:antialiased;color:#343434;display:flex;align-items:center}.dark-theme .cu-time-input-filter__input{color:#d5d6d7;background:transparent}.cu-time-input-filter__input:focus{box-shadow:none}.cu-time-input-filter__input:-ms-input-placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:13px;opacity:.6}.cu-time-input-filter__input::placeholder{font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:300;font-size:13px;line-height:13px;opacity:.6}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-time-input-filter__input:-ms-input-placeholder{font-family:var(--global-font-support)}.cu-time-input-filter__input::placeholder{font-family:var(--global-font-support)}}.contrast_high .cu-time-input-filter__input:-ms-input-placeholder{color:#ababab;opacity:1}.contrast_high .cu-time-input-filter__input::placeholder{color:#ababab;opacity:1}.cu-time-input-filter__input::-moz-placeholder{line-height:28px}.cu-time-input-filter .cu-time-estimates-input .help-question-mark{right:11px}'],encapsulation:2,changeDetection:0}),e})();var Lt=i("ahJy");const jt=function(e,t){return{"cu-custom-field-dropdown-filter__item_no-color":e,"cu-custom-field-dropdown-filter__item_light":t}};function $t(e,t){if(1&e&&(o.cc(0,"div",3),o.vc(1,"isLightColor"),o.dd(2),o.bc()),2&e){const e=t.option;o.ad("background-color",null==e?null:e.color),o.Dc("ngClass",o.Ic(7,jt,!(null!=e&&e.color),o.xc(1,4,null==e?null:e.color,200))),o.Ib(2),o.fd(" ",(null==e?null:e.name)||(null==e?null:e.label)," ")}}const Ut=function(e,t){return{"cu-custom-field-dropdown-filter__value_no-color":e,"cu-custom-field-dropdown-filter__value_light":t}};function Vt(e,t){if(1&e&&(o.cc(0,"div",4),o.vc(1,"isLightColor"),o.dd(2),o.bc()),2&e){const e=o.uc();let t=null;o.ad("background-color",null==e.selectedOption?null:e.selectedOption.color),o.Dc("ngClass",o.Ic(7,Ut,!(null!=e.selectedOption&&e.selectedOption.color),o.xc(1,4,null==e.selectedOption?null:e.selectedOption.color,200))),o.Ib(2),o.fd(" ",(null==(t=e.selectedOption)?null:t.name)||(null==(t=e.selectedOption)?null:t.label)," ")}}let Mt=(()=>{class e{constructor(){this.onChange=new o.o}ngOnInit(){}ngOnChanges(e){e.value&&(this.options=this.customField.type_config.options||[],this.selectedOption=this.options.find(e=>e.id===this.value))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-dropdown-filter"]],hostAttrs:[1,"cu-custom-field-dropdown-filter"],inputs:{autoOpen:"autoOpen",customField:"customField",value:"value"},outputs:{onChange:"onChange"},features:[o.Gb],decls:5,vars:5,consts:[[3,"options","autoOpen","itemTemplate","filterValueTemplate","showSearch","onChange"],["itemTemplate",""],["valueTemplate",""],[1,"cu-custom-field-dropdown-filter__item",3,"ngClass"],[1,"cu-custom-field-dropdown-filter__value",3,"ngClass"]],template:function(e,t){if(1&e&&(o.cc(0,"cu-dropdown-filter",0),o.qc("onChange",function(e){return t.onChange.emit(null==e?null:e.id)}),o.bc(),o.bd(1,$t,3,10,"ng-template",null,1,o.cd),o.bd(3,Vt,3,10,"ng-template",null,2,o.cd)),2&e){const e=o.Rc(2),i=o.Rc(4);o.Dc("options",t.options)("autoOpen",t.autoOpen)("itemTemplate",e)("filterValueTemplate",i)("showSearch",!0)}},directives:[bt,g.o],pipes:[Lt.a],styles:[".cu-custom-field-dropdown-filter .cu-dropdown{width:100%}.cu-custom-field-dropdown-filter .cu-dropdown__toggle{display:flex;align-items:center}.cu-custom-field-dropdown-filter__item,.cu-custom-field-dropdown-filter__value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;border-radius:3px;padding:10px 4px;margin:-8px 0;text-align:center;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#fff}.dark-theme .cu-custom-field-dropdown-filter__item,.dark-theme .cu-custom-field-dropdown-filter__value{color:#fff}.cu-custom-field-dropdown-filter__item_no-color,.cu-custom-field-dropdown-filter__value_no-color{color:#292d34}.dark-theme .cu-custom-field-dropdown-filter__item_no-color,.dark-theme .cu-custom-field-dropdown-filter__value_no-color{color:#d5d6d7}.cu-custom-field-dropdown-filter__item_light,.cu-custom-field-dropdown-filter__value_light,.dark-theme .cu-custom-field-dropdown-filter__item_light,.dark-theme .cu-custom-field-dropdown-filter__value_light{color:#292d34}.cu-custom-field-dropdown-filter__item:hover,.cu-custom-field-dropdown-filter__value:hover{filter:brightness(90%)}.cu-custom-field-dropdown-filter__value{flex-grow:1;padding:4px;margin:0}"],encapsulation:2,changeDetection:0}),e})();var Pt=i("lfRK");let Et=(()=>{class e{constructor(){this.onChange=new o.o}ngOnInit(){}ngOnChanges(e){e.value&&(this.options=this.customField.type_config.options||[],this.selectedOptionIds=this.options.filter(e=>this.value&&this.value.includes(e.id)).map(e=>e.id))}select(e){this.onChange.emit(e)}remove(e){this.onChange.emit((this.selectedOptionIds||[]).filter(t=>t!==e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-custom-field-labels-filter"]],hostAttrs:[1,"cu-custom-field-labels-filter"],inputs:{autoOpen:"autoOpen",customField:"customField",value:"value",type:"type"},outputs:{onChange:"onChange"},features:[o.Gb],decls:1,vars:7,consts:[[3,"mode","field","items","disabled","selectedItemIds","singleSelection","preventEdits","onSelect","onDeleteLabel"]],template:function(e,t){1&e&&(o.cc(0,"cu-custom-field-dropdown-labels",0),o.qc("onSelect",function(e){return t.select(e)})("onDeleteLabel",function(e){return t.remove(e)}),o.bc()),2&e&&o.Dc("mode","labels")("field",t.customField)("items",t.options)("disabled",!1)("selectedItemIds",t.selectedOptionIds)("singleSelection",!1)("preventEdits",!0)},directives:[Pt.a],styles:[".cu-custom-field-labels-filter .cu-dropdown__toggle{display:flex;align-items:center}"],encapsulation:2,changeDetection:0}),e})();var Rt=i("FWfR");let Gt=(()=>{class e{transform(e){return Array.isArray(e)&&e.length>0?e[0]:null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Vb({name:"firstValue",type:e,pure:!0}),e})();const At=["statusTemplate"],zt=["dateTemplate"],qt=["priorityTemplate"],Qt=["tagTemplate"],Nt=["userTemplate"],Bt=["userGroupsTemplate"],Xt=["dependencyTemplate"],Yt=["inputTemplate"],Wt=["timeInputTemplate"],Jt=["customFieldDropdownTemplate"],Zt=["customFieldLabelsTemplate"],Kt=["taskTemplate"],Ht=["ratingTemplate"],ei=["currencyTemplate"],ti=["locationMapTemplate"],ii=["locationTemplate"];function oi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-filter-ops-dropdown",20),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeOpFromDefaultList(t)}),o.bc()}if(2&e){const e=o.uc();o.Dc("ops",e.ops)("selectedOp",e.selectedOp)("autoOpen",e.autoOpenOp)}}function ni(e,t){}const ai=function(){return["bottom-right","auto"]};function ri(e,t){if(1&e){const e=o.dc();o.cc(0,"div",24),o.cc(1,"cu-dropdown-list",25),o.qc("onSelect",function(t){return o.Uc(e),o.uc(2).changeOpFromAdditional(t.customPayload)}),o.dd(2),o.bc(),o.bc()}if(2&e){const e=o.uc(2);o.Dc("cuTooltip","any"===(null==e.mappedSelectedValue?null:e.mappedSelectedValue.title)?e.anyOptionsMustBeTrueText:e.allOptionsMustBeTrueText),o.Ib(1),o.Dc("items",e.andOrValueOptions)("dropdownPlacement",o.Gc(4,ai)),o.Ib(1),o.fd(" ",null==e.mappedSelectedValue?null:e.mappedSelectedValue.title," ")}}const li=function(e,t,i){return{op:e,value:t,autoOpen:i}};function ci(e,t){if(1&e&&(o.cc(0,"div",21),o.bd(1,ni,0,0,"ng-template",22),o.bd(2,ri,3,5,"div",23),o.bc()),2&e){const e=o.uc();o.Ob("cu-filter-value__editor_no-border","dueDate"===e.value.field.name||"dateClosed"===e.value.field.name||"dateCreated"===e.value.field.name||"dateUpdated"===e.value.field.name||"dateDone"===e.value.field.name||"startDate"===e.value.field.name),o.Ib(1),o.Dc("ngTemplateOutlet",e.valueTemplate)("ngTemplateOutletContext",o.Jc(5,li,e.selectedOp,e.value,e.autoOpenValue)),o.Ib(1),o.Dc("ngIf",e.isRemapped&&(null==e.value||null==e.value.value?null:e.value.value.length)>1)}}function si(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-status-filter",26),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)})("onLoadStatuses",function(t){return o.Uc(e),o.uc().onLoadStatuses.emit(t)}),o.bc()}if(2&e){const e=t.value,i=t.autoOpen,n=o.uc();o.Dc("statuses",n.statuses)("autoOpen",i)("value",null==e?null:e.value)("alwaysCollapseGroups",n.alwaysCollapseStatusGroups)}}function di(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-date-ext-filter",27),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.vc(1,"firstValue"),o.bc()}if(2&e){const e=t.value,i=t.autoOpen,n=o.uc();o.Dc("autoOpen",i)("field",null==e||null==e.field?null:e.field.name)("value",o.wc(1,5,null==e?null:e.value))("dateFormat",n.dateFormat)("weekStart",n.weekStart)}}function ui(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-priority-filter",28),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.bc()}if(2&e){const e=t.value;o.Dc("autoOpen",t.autoOpen)("value",null==e?null:e.value)}}function pi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-location-filter",29),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)})("onLoadData",function(){return o.Uc(e),o.uc().onLoadLocation.emit()}),o.bc()}if(2&e){const e=t.value,i=t.autoOpen,n=o.uc();o.Dc("autoOpen",i)("value",null==e?null:e.value)("hierarchies",n.hierarchies)("currentLocation",n.currentLocation)("scrollToFirstLocation",!0)}}function hi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-tag-filter",30),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)})("onLoadTags",function(t){return o.Uc(e),o.uc().onLoadTags.emit(t)})("onEditTags",function(t){return o.Uc(e),o.uc().onEditTags.emit(t)}),o.bc()}if(2&e){const e=t.value,i=t.autoOpen,n=o.uc();o.Dc("value",null==e?null:e.value)("tags",n.tags)("tagsLoading",n.tagsLoading)("autoOpen",i)("projectId",n.projectId)}}function fi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-user-filter",31),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)})("onLoadUsers",function(t){return o.Uc(e),o.uc().onLoadUsers.emit(t)}),o.bc()}if(2&e){const e=t.op,i=t.value,n=t.autoOpen,a=t.userGroups,r=o.uc();o.Dc("autoOpen",n)("users",null!=i&&null!=i.field&&null!=i.field.customField&&null!=i.field.customField.type_config&&i.field.customField.type_config.include_team_members?r.teamUsers:r.users)("value",null==i?null:i.value)("userGroups",a)("showUnassigned",null==e||null==e.editorOptions?null:e.editorOptions.showUnassigned)("guestMap",r.guestMap)("hideGuests",!1===(null==i||null==i.field||null==i.field.customField||null==i.field.customField.type_config?null:i.field.customField.type_config.include_guests))}}function gi(e,t){}const mi=function(e,t,i,o){return{op:e,value:t,autoOpen:i,userGroups:o}};function bi(e,t){if(1&e&&o.bd(0,gi,0,0,"ng-template",22),2&e){const e=t.op,i=t.value,n=t.autoOpen,a=o.uc(),r=o.Rc(14);o.Dc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.Kc(2,mi,e,i,n,a.userGroups))}}function vi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-dependency-filter",28),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(null==t?null:t.id)}),o.vc(1,"firstValue"),o.bc()}if(2&e){const e=t.value;o.Dc("autoOpen",t.autoOpen)("value",o.wc(1,2,null==e?null:e.value))}}function _i(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-input-filter",32),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.vc(1,"firstValue"),o.bc()}if(2&e){const e=t.op,i=t.value;o.Dc("value",o.wc(1,2,null==i?null:i.value))("inputType",null==e||null==e.editorOptions?null:e.editorOptions.inputType)}}function wi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-currency-filter",33),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.bc()}2&e&&o.Dc("value",t.value)}function Oi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-location-map-filter",33),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.bc()}2&e&&o.Dc("value",t.value)}function yi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-time-input-filter",33),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.bc()}if(2&e){const e=t.value;o.Dc("value",null==e?null:e.value)}}function xi(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-custom-field-dropdown-filter",34),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.vc(1,"firstValue"),o.bc()}if(2&e){const e=t.value;o.Dc("autoOpen",t.autoOpen)("value",o.wc(1,3,null==e?null:e.value))("customField",null==e||null==e.field?null:e.field.customField)}}function Ci(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-custom-field-labels-filter",34),o.qc("onChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.bc()}if(2&e){const e=t.value;o.Dc("autoOpen",t.autoOpen)("value",null==e?null:e.value)("customField",null==e||null==e.field?null:e.field.customField)}}function ki(e,t){1&e&&(o.ac(0),o.gc(1,35),o.Zb())}function Ti(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-emoji-custom-field-value",36),o.qc("ngModelChange",function(t){return o.Uc(e),o.uc().changeValue(t)}),o.vc(1,"firstValue"),o.bc()}if(2&e){const e=t.value;o.Dc("ngModel",o.wc(1,3,null==e?null:e.value))("field",null==e||null==e.field?null:e.field.customField)("clickToClear",!0)}}let Di=(()=>{class e{constructor(){this.alwaysCollapseStatusGroups=!0,this.dateFormat="m/d/y",this.weekStart=0,this.hierarchies=[],this.currentLocation={},this.onChange=new o.o,this.onRemove=new o.o,this.onLoadUsers=new o.o,this.onLoadStatuses=new o.o,this.onLoadTags=new o.o,this.onLoadLocation=new o.o,this.onEditTags=new o.o,this.defaultValues=a.l,this.allOptionsMustBeTrueText=$localize`:@@cu-filter-value__tooltip-msg_all-options-true:All options must be true`,this.anyOptionsMustBeTrueText=$localize`:@@cu-filter-value__tooltip-msg_any-option-true:One or more options must be true`}get isRemapped(){return this._ops.some(e=>e.multiValue)&&this._ops.length%2==0}set ops(e){this._ops=e}get ops(){return this.isRemapped?a.o.map(e=>Object.assign(Object.assign({},e),{editorOptions:Object.assign(Object.assign({},this._ops[0].editorOptions||{}),e.editorOptions)})).concat(this._ops.filter(e=>!e.multiValue)):this._ops}get andOrValueOptions(){return this.isRemapped&&this.selectedOp&&this.selectedOp.editorOptions&&this.selectedOp.editorOptions.options&&this.selectedOp.editorOptions.options.map(e=>Object.assign(Object.assign({},e),{checked:e.id===this.backwardOps,customPayload:this._ops.find(t=>t.id===e.id)}))||[]}get backwardOps(){return this.isRemapped?"EQ"===this.value.op?"ANY":"NOT"===this.value.op?"NOT ALL":this.value.op:this.value.op}get mappedSelectedValue(){return this.selectedOp.editorOptions.options.find(e=>e.id===this.backwardOps)}ngOnInit(){this.autoOpen&&(this.selectedOp?this.autoOpenValue=this.selectedOp.needEditor&&(!this.value.value||0===this.value.value.length):this.autoOpenOp=!0),this.setValueTemplate()}ngOnChanges(e){e.value&&(this.value&&this.value.field?(this.ops=this.value.field.customField?Object(je.d)(this.value.field.customField,[])?a.p:a.a[this.value.field.customField.type]||[]:(this.predeterminedFieldOperations||a.n)[this.value.field.name]||[],this.selectedOp=this.ops.find(e=>this.isRemapped&&e.needEditor?!!e.editorOptions.options.find(e=>e.id===this.backwardOps):e.id===this.value.op)):(this.ops=[],this.selectedOp=null),this.setValueTemplate())}setValueTemplate(){this.valueTemplate=this.value&&this.value.field?this.value.field.customField?this.getCustomFieldTemplate(this.value.field.customField.type):this.getFieldTemplate(this.value.field.name):null}getFieldTemplate(e){switch(e){case Le.S.name:return this.statusTemplate;case Le.o.name:return this.userTemplate;case Le.k.name:case Le.bb.name:return this.userGroupsTemplate;case Le.M.name:return this.priorityTemplate;case Le.U.name:return this.tagTemplate;case Le.Q.name:case Le.w.name:case Le.r.name:case Le.t.name:case Le.q.name:case Le.s.name:return this.dateTemplate;case Le.v.name:return this.dependencyTemplate;case Le.V.name:return this.timeInputTemplate;case Le.L.name:return this.inputTemplate;case Le.X.name:return this.timeInputTemplate;case Le.D.name:return this.locationTemplate}}getCustomFieldTemplate(e){switch(n.e[e].filters.valueType){case"text":return this.inputTemplate;case"dropdown":return this.customFieldDropdownTemplate;case"labels":return this.customFieldLabelsTemplate;case"date":return this.dateTemplate;case"user":return this.userTemplate;case"task":return this.taskTemplate;case"rating":return this.ratingTemplate;case"currency":return this.currencyTemplate;case"location":return this.locationMapTemplate;case"none":return;default:throw new Error(`Filter template for ${e} not implemented`)}}changeOpFromAdditional(e){this.changeOp(e)}changeOpFromDefaultList(e){this.changeOp(this.isRemapped&&e.needEditor?e.editorOptions.options[0]:e)}changeField(e){const t=this.fieldValues.filter(t=>t.field.name===e.name);this.onChange.emit(e.customField?{id:e.name+t.length,field:e,op:n.e[e.customField.type].filters.defaultOperator,value:null}:Object.assign({id:e.name+t.length,field:e},this.defaultValues[e.name]))}changeValue(e){const t=Array.isArray(e)?e:e?[e]:[];this.onChange.emit(Object.assign(Object.assign({},this.value),{value:t}))}remove(e){this.onRemove.emit(),e.stopPropagation()}changeOp(e){this.onChange.emit(Object.assign(Object.assign({},this.value),{op:e.id})),this.autoOpen&&e&&(this.autoOpenValue=e.needEditor&&(!this.value.value||0===this.value.value.length))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-value"]],viewQuery:function(e,t){if(1&e&&(o.jd(At,3),o.jd(zt,3),o.jd(qt,3),o.jd(Qt,3),o.jd(Nt,3),o.jd(Bt,3),o.jd(Xt,3),o.jd(Yt,3),o.jd(Wt,3),o.jd(Jt,3),o.jd(Zt,3),o.jd(Kt,3),o.jd(Ht,3),o.jd(ei,3),o.jd(ti,3),o.jd(ii,3)),2&e){let e;o.Qc(e=o.rc())&&(t.statusTemplate=e.first),o.Qc(e=o.rc())&&(t.dateTemplate=e.first),o.Qc(e=o.rc())&&(t.priorityTemplate=e.first),o.Qc(e=o.rc())&&(t.tagTemplate=e.first),o.Qc(e=o.rc())&&(t.userTemplate=e.first),o.Qc(e=o.rc())&&(t.userGroupsTemplate=e.first),o.Qc(e=o.rc())&&(t.dependencyTemplate=e.first),o.Qc(e=o.rc())&&(t.inputTemplate=e.first),o.Qc(e=o.rc())&&(t.timeInputTemplate=e.first),o.Qc(e=o.rc())&&(t.customFieldDropdownTemplate=e.first),o.Qc(e=o.rc())&&(t.customFieldLabelsTemplate=e.first),o.Qc(e=o.rc())&&(t.taskTemplate=e.first),o.Qc(e=o.rc())&&(t.ratingTemplate=e.first),o.Qc(e=o.rc())&&(t.currencyTemplate=e.first),o.Qc(e=o.rc())&&(t.locationMapTemplate=e.first),o.Qc(e=o.rc())&&(t.locationTemplate=e.first)}},hostAttrs:[1,"cu-filter-value"],inputs:{users:"users",teamUsers:"teamUsers",statuses:"statuses",userGroups:"userGroups",guestMap:"guestMap",tags:"tags",alwaysCollapseStatusGroups:"alwaysCollapseStatusGroups",tagsLoading:"tagsLoading",fields:"fields",value:"value",autoOpen:"autoOpen",dateFormat:"dateFormat",weekStart:"weekStart",projectId:"projectId",hierarchies:"hierarchies",currentLocation:"currentLocation",predeterminedFieldOperations:"predeterminedFieldOperations",fieldValues:"fieldValues"},outputs:{onChange:"onChange",onRemove:"onRemove",onLoadUsers:"onLoadUsers",onLoadStatuses:"onLoadStatuses",onLoadTags:"onLoadTags",onLoadLocation:"onLoadLocation",onEditTags:"onEditTags"},features:[o.Gb],decls:36,vars:4,consts:function(){let e,t;return e=$localize`:@@cu-filter-value__dropdown-placeholder_change-filter␟f44c791c7299aff96b3c3473196280f0254648df␟5768927925246000489:Change filter`,t=$localize`:@@cu-filter-value__todo␟34eccd4177e16ce7997de28afd14968665c65635␟6128334627447354149:TODO`,[["dropdownTitle",e,"displayClass","cu-filter-value__title-inner",1,"cu-filter-value__title",3,"fields","selectedValue","onAddField"],["class","cu-filter-value__op",3,"ops","selectedOp","autoOpen","onChange",4,"ngIf"],["class","cu-filter-value__editor",3,"cu-filter-value__editor_no-border",4,"ngIf"],["statusTemplate",""],["dateTemplate",""],["priorityTemplate",""],["locationTemplate",""],["tagTemplate",""],["userTemplate",""],["userGroupsTemplate",""],["dependencyTemplate",""],["inputTemplate",""],["currencyTemplate",""],["locationMapTemplate",""],["timeInputTemplate",""],["customFieldDropdownTemplate",""],["customFieldLabelsTemplate",""],["taskTemplate",""],["ratingTemplate",""],["icon","cu2-close",1,"cu-filter-value__clear",3,"click"],[1,"cu-filter-value__op",3,"ops","selectedOp","autoOpen","onChange"],[1,"cu-filter-value__editor"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cu-filter-value__additional",3,"cuTooltip",4,"ngIf"],[1,"cu-filter-value__additional",3,"cuTooltip"],[1,"cu-filter-value__additional-dropdown",3,"items","dropdownPlacement","onSelect"],[3,"statuses","autoOpen","value","alwaysCollapseGroups","onChange","onLoadStatuses"],[3,"autoOpen","field","value","dateFormat","weekStart","onChange"],[3,"autoOpen","value","onChange"],[3,"autoOpen","value","hierarchies","currentLocation","scrollToFirstLocation","onChange","onLoadData"],[3,"value","tags","tagsLoading","autoOpen","projectId","onChange","onLoadTags","onEditTags"],[3,"autoOpen","users","value","userGroups","showUnassigned","guestMap","hideGuests","onChange","onLoadUsers"],[3,"value","inputType","onChange"],[3,"value","onChange"],[3,"autoOpen","value","customField","onChange"],t,[3,"ngModel","field","clickToClear","ngModelChange"]]},template:function(e,t){1&e&&(o.cc(0,"cu-filter-value-add-dropdown",0),o.qc("onAddField",function(e){return t.changeField(e)}),o.bc(),o.bd(1,oi,1,3,"cu-filter-ops-dropdown",1),o.bd(2,ci,3,9,"div",2),o.bd(3,si,1,4,"ng-template",null,3,o.cd),o.bd(5,di,2,7,"ng-template",null,4,o.cd),o.bd(7,ui,1,2,"ng-template",null,5,o.cd),o.bd(9,pi,1,5,"ng-template",null,6,o.cd),o.bd(11,hi,1,5,"ng-template",null,7,o.cd),o.bd(13,fi,1,7,"ng-template",null,8,o.cd),o.bd(15,bi,1,7,"ng-template",null,9,o.cd),o.bd(17,vi,2,4,"ng-template",null,10,o.cd),o.bd(19,_i,2,4,"ng-template",null,11,o.cd),o.bd(21,wi,1,1,"ng-template",null,12,o.cd),o.bd(23,Oi,1,1,"ng-template",null,13,o.cd),o.bd(25,yi,1,1,"ng-template",null,14,o.cd),o.bd(27,xi,2,5,"ng-template",null,15,o.cd),o.bd(29,Ci,1,3,"ng-template",null,16,o.cd),o.bd(31,ki,2,0,"ng-template",null,17,o.cd),o.bd(33,Ti,2,5,"ng-template",null,18,o.cd),o.cc(35,"div",19),o.qc("click",function(e){return t.remove(e)}),o.bc()),2&e&&(o.Dc("fields",t.fields)("selectedValue",t.value),o.Ib(1),o.Dc("ngIf",(null==t.ops?null:t.ops.length)>1),o.Ib(1),o.Dc("ngIf",(null==t.selectedOp?null:t.selectedOp.needEditor)&&t.valueTemplate))},directives:[j,g.q,v.a,Me,g.x,h.a,ke.a,Pe.a,ot,nt.a,at.a,st,dt.a,wt,Ze,Ct,Tt,Ft,Mt,Et,Rt.a,G.p,G.s],pipes:[Gt],styles:['.cu-filter-value{display:flex;min-width:0;min-height:32px}.cu-filter-value+.cu-filter-value{border-top:1px solid #e9ebf0}.dark-theme .cu-filter-value+.cu-filter-value{border-top-color:#1e272e}.cu-filter-value>*{height:100%}.cu-filter-value__op:nth-last-child(-n+2){flex-grow:1;margin-right:5px}.cu-filter-value__clear{transition:fill .2s cubic-bezier(.785,.135,.15,.86) 0s;width:22px;height:22px;padding:7px;cursor:pointer;margin-top:5px;margin-right:6px;margin-left:auto;fill:#7c828d}.dark-theme .cu-filter-value__clear{fill:#828588}.cu-filter-value__clear.archive-filter-clear{margin-right:5px}.cu-filter-value__clear:focus,.cu-filter-value__clear:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-value__clear:focus,.cu-filter-value__clear:hover{fill:var(--theme-main-color)}}.dark-theme .cu-filter-value__clear:focus,.dark-theme .cu-filter-value__clear:hover{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.dark-theme .cu-filter-value__clear:focus,.dark-theme .cu-filter-value__clear:hover{fill:var(--theme-main-color)}}.cu-filter-value__title{display:flex;align-items:center;width:140px;height:32px;flex-shrink:0;margin-right:8px;border-radius:3px;background:rgba(233,235,240,.5)}.dark-theme .cu-filter-value__title{background:rgba(43,52,59,.5)}.cu-filter-value__title .cu-filter-value-add-dropdown.cu-dropdown_left.cu-dropdown{width:100%;height:100%}.cu-filter-value__title-inner{overflow:hidden;text-overflow:ellipsis;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Gotham Pro,Proxima Nova,arial,serif;font-weight:500;font-size:12px;line-height:12px;padding:0 10px;white-space:nowrap;color:#292d34}@supports (--global-font-support:"Gotham Pro","Proxima Nova",arial,serif){.cu-filter-value__title-inner{font-family:var(--global-font-support)}}.dark-theme .cu-filter-value__title-inner{color:#d5d6d7}.cu-filter-value__editor{margin-right:5px;margin-left:8px;min-width:0;height:100%;min-height:32px;display:flex;border-radius:3px;flex-grow:1;padding:0 5px;border:1px solid #e9ebf0}.dark-theme .cu-filter-value__editor{border-color:#2b343b}.cu-filter-value__editor_no-border{border:0;padding:0}.cu-filter-value__editor>*{width:100%;min-height:30px}.cu-filter-value__editor .cu-input-filter__input{min-width:50px;height:100%}.cu-filter-value__editor .cu-emoji-custom-field-value__container{display:flex;align-items:center;height:100%}.cu-filter-value__editor .cu-status-filter__down{margin-left:auto}.cu-filter-value__editor .cu-dt-filter{height:100%;align-items:center}.cu-filter-value__editor .cu-priority-list-dropdown{width:100%}.cu-filter-value__editor .cu-priority-filter__down{margin-left:auto}.cu-filter-value__editor .cu-custom-field-dropdown-filter .cu-dropdown__toggle,.cu-filter-value__editor .cu-priority-filter__value{height:30px}.cu-filter-value__editor .cu-custom-fields__form-input,.cu-filter-value__editor .cu-time-estimates-input__input{border:0}.cu-filter-value__editor .cu-custom-field-dropdown-filter__value{flex-grow:1}.cu-filter-value__additional{display:flex;justify-content:center;align-items:center;width:35px}.cu-filter-value__additional-dropdown{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;align-items:center;padding:5px;width:32px;justify-content:center;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;background:rgba(233,235,240,.5);color:#292d34}.dark-theme .cu-filter-value__additional-dropdown{background:#2b343b;color:#d5d6d7}.cu-filter-value__additional-dropdown:hover{background:#e9ebf0;color:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-value__additional-dropdown:hover{color:var(--theme-main-color)}}.dark-theme .cu-filter-value__additional-dropdown:hover{background:#1e272e}'],encapsulation:2,changeDetection:0}),e})();function Si(e,t){if(1&e){const e=o.dc();o.ac(0),o.cc(1,"cu-filter-group-op",1),o.qc("onChange",function(t){return o.Uc(e),o.uc().onChangeOp.emit(t)}),o.bc(),o.cc(2,"cu-filter-value",2),o.qc("onChange",function(i){o.Uc(e);const n=t.$implicit;return o.uc().changeValue(i,n.id)})("onRemove",function(){o.Uc(e);const i=t.$implicit;return o.uc().removeValue(i)})("onLoadUsers",function(t){return o.Uc(e),o.uc().onLoadUsers.emit(t)})("onLoadStatuses",function(t){return o.Uc(e),o.uc().onLoadStatuses.emit(t)})("onLoadTags",function(t){return o.Uc(e),o.uc().onLoadTags.emit(t)})("onEditTags",function(t){return o.Uc(e),o.uc().onEditTags.emit(t)})("onLoadLocation",function(t){return o.Uc(e),o.uc().onLoadLocation.emit(t)}),o.bc(),o.Zb()}if(2&e){const e=t.$implicit,i=t.index,n=o.uc();o.Ib(1),o.Dc("showOr",n.showOr)("value",n.groupOp)("index",i),o.Ib(1),o.Dc("users",n.users)("userGroups",n.userGroups)("guestMap",n.guestMap)("teamUsers",n.teamUsers)("statuses",n.statuses)("tags",n.tags)("fields",n.fields)("alwaysCollapseStatusGroups",n.alwaysCollapseStatusGroups)("fieldValues",n.fieldValues)("tagsLoading",n.tagsLoading)("value",e)("predeterminedFieldOperations",n.predeterminedFieldOperations)("dateFormat",n.dateFormat)("weekStart",n.weekStart)("projectId",n.projectId)("hierarchies",n.hierarchies)("currentLocation",n.currentLocation)}}let Ii=(()=>{class e{constructor(){this.alwaysCollapseStatusGroups=!0,this.dateFormat="m/d/y",this.weekStart=0,this.hierarchies=[],this.currentLocation={},this.showOr=!0,this.onChange=new o.o,this.onChangeOp=new o.o,this.onLoadUsers=new o.o,this.onLoadStatuses=new o.o,this.onLoadTags=new o.o,this.onEditTags=new o.o,this.onLoadLocation=new o.o,this.fieldValues=[],this.trackById=Object(m.d)("id")}ngOnInit(){}ngOnChanges(e){if(e.values||e.fields)if(this.values&&this.fields){const e={};this.fieldValues=this.values.map(t=>{const i=e[t.field.name]||0,o=t.field.name+i;return e[t.field.name]=i+1,Object.assign(Object.assign({},t),{id:o})})}else this.fieldValues=[]}changeValue(e,t){const i=this.fieldValues.findIndex(e=>e.id===t);-1!==i&&this.onChange.emit([...this.fieldValues.slice(0,i),e,...this.fieldValues.slice(i+1)])}removeValue(e){const t=this.fieldValues.findIndex(t=>t.id===e.id);-1!==t&&this.onChange.emit([...this.fieldValues.slice(0,t),...this.fieldValues.slice(t+1)])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-value-list"]],hostAttrs:[1,"cu-filter-value-list"],inputs:{statuses:"statuses",users:"users",teamUsers:"teamUsers",userGroups:"userGroups",guestMap:"guestMap",tags:"tags",alwaysCollapseStatusGroups:"alwaysCollapseStatusGroups",tagsLoading:"tagsLoading",fields:"fields",values:"values",groupOp:"groupOp",dateFormat:"dateFormat",weekStart:"weekStart",projectId:"projectId",hierarchies:"hierarchies",currentLocation:"currentLocation",predeterminedFieldOperations:"predeterminedFieldOperations",showOr:"showOr"},outputs:{onChange:"onChange",onChangeOp:"onChangeOp",onLoadUsers:"onLoadUsers",onLoadStatuses:"onLoadStatuses",onLoadTags:"onLoadTags",onEditTags:"onEditTags",onLoadLocation:"onLoadLocation"},features:[o.Gb],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"showOr","value","index","onChange"],[3,"users","userGroups","guestMap","teamUsers","statuses","tags","fields","alwaysCollapseStatusGroups","fieldValues","tagsLoading","value","predeterminedFieldOperations","dateFormat","weekStart","projectId","hierarchies","currentLocation","onChange","onRemove","onLoadUsers","onLoadStatuses","onLoadTags","onEditTags","onLoadLocation"]],template:function(e,t){1&e&&o.bd(0,Si,3,20,"ng-container",0),2&e&&o.Dc("ngForOf",t.fieldValues)("ngForTrackBy",t.trackById)},directives:[g.p,Fe,Di],styles:[".cu-filter-value-list{width:100%;max-height:390px;overflow-y:auto;overflow-x:hidden;display:grid;grid-template-columns:67px auto;padding:10px 4px 10px 15px;gap:8px 0;background:#fff}.cu-os-win .cu-filter-value-list{scrollbar-width:thin}.cu-os-win .cu-filter-value-list::-webkit-scrollbar{background-color:#fff;width:16px;height:16px}.cu-os-win .cu-filter-value-list::-webkit-scrollbar-track,.cu-os-win .cu-filter-value-list::-webkit-scrollbar-track:hover{background-color:#fff}.cu-os-win .cu-filter-value-list::-webkit-scrollbar-thumb{background-color:rgba(186,186,192,.5);border-radius:16px;border:5px solid #fff}.cu-os-win .cu-filter-value-list::-webkit-scrollbar-thumb:hover{background-color:#a0a0a5;border:3px solid #fff}.cu-os-win .cu-filter-value-list::-webkit-scrollbar-button{display:none}.cu-os-win.dark-theme .cu-filter-value-list::-webkit-scrollbar,.cu-os-win .dark-theme .cu-filter-value-list::-webkit-scrollbar,.cu-os-win.dark-theme .cu-filter-value-list::-webkit-scrollbar-track,.cu-os-win .dark-theme .cu-filter-value-list::-webkit-scrollbar-track{background-color:#384047}.cu-os-win.dark-theme .cu-filter-value-list::-webkit-scrollbar-track:hover,.cu-os-win .dark-theme .cu-filter-value-list::-webkit-scrollbar-track:hover{background-color:#384047}.cu-os-win.dark-theme .cu-filter-value-list::-webkit-scrollbar-thumb,.cu-os-win .dark-theme .cu-filter-value-list::-webkit-scrollbar-thumb,.cu-os-win.dark-theme .cu-filter-value-list::-webkit-scrollbar-thumb:hover,.cu-os-win .dark-theme .cu-filter-value-list::-webkit-scrollbar-thumb:hover{border-color:#384047}.dark-theme .cu-filter-value-list{background:#384047}"],encapsulation:2,changeDetection:0}),e})();const Fi=["dropdown"],Li=["savedFilterDropdown"],ji=["addFilterDropdown"],$i=["searchInput"];function Ui(e,t){if(1&e){const e=o.dc();o.cc(0,"cu-filter-value-list",17),o.qc("onChange",function(t){return o.Uc(e),o.uc(2).changeFilter(t)})("onChangeOp",function(t){return o.Uc(e),o.uc(2).changeFilterOp(t)})("onLoadUsers",function(t){return o.Uc(e),o.uc(2).onLoadUsers.emit(t)})("onLoadStatuses",function(t){return o.Uc(e),o.uc(2).onLoadStatuses.emit(t)})("onLoadTags",function(t){return o.Uc(e),o.uc(2).onLoadTags.emit(t)})("onEditTags",function(t){return o.Uc(e),o.uc(2).onEditTags.emit(t)})("onLoadLocation",function(){return o.Uc(e),o.uc(2).onLoadLocation.emit()}),o.bc()}if(2&e){const e=o.uc(2);o.Dc("users",e.users)("guestMap",e.guestMap)("teamUsers",e.teamUsers)("userGroups",e.userGroups)("statuses",e.statuses)("tags",e.tags)("alwaysCollapseStatusGroups",e.alwaysCollapseStatusGroups)("tagsLoading",e.tagsLoading)("values",e.localValues)("fields",e.fields)("groupOp",e.localGroupOp)("predeterminedFieldOperations",e.predeterminedFieldOperations)("showOr",e.showOr)("dateFormat",e.dateFormat)("weekStart",e.weekStart)("projectId",e.projectId)("hierarchies",e.hierarchies)("currentLocation",e.currentLocation)}}const Vi=function(){return{suppressScrollX:!0}};function Mi(e,t){if(1&e){const e=o.dc();o.cc(0,"div"),o.cc(1,"div",4),o.cc(2,"div",5),o.gc(3,6),o.bc(),o.bd(4,Ui,1,18,"cu-filter-value-list",7),o.cc(5,"div",8),o.cc(6,"cu-filter-value-add-dropdown",9,10),o.qc("onAddField",function(t){return o.Uc(e),o.uc().addField(t)})("onDropdownOpen",function(t){return o.Uc(e),o.uc().dropdownOpened(t)}),o.bc(),o.cc(8,"div",11),o.qc("click",function(){return o.Uc(e),o.uc().openFilterList()}),o.Xb(9,"div",12),o.cc(10,"div",13),o.gc(11,14),o.bc(),o.cc(12,"cu-saved-filter-button",15,16),o.qc("onApply",function(t){return o.Uc(e),o.uc().onApplySavedFilter.emit(t)})("onDropdownOpen",function(t){return o.Uc(e),o.uc().dropdownOpened(t)}),o.bc(),o.bc(),o.bc(),o.bc(),o.bc()}if(2&e){const e=o.uc();o.Ib(1),o.Ob("cu-filter-value-list-dropdown__menu_disabled",!!e.disabledTooltip)("cu-filter-value-list-dropdown__menu_local-values",null==e.localValues?null:e.localValues.length),o.Dc("cuTooltip",e.disabledTooltip)("perfectScrollbar",o.Gc(10,Vi)),o.Ib(3),o.Dc("ngIf",null==e.localValues?null:e.localValues.length),o.Ib(2),o.Dc("fields",e.fields),o.Ib(6),o.Dc("localValuesLength",null==e.localValues?null:e.localValues.length)("viewPayload",e.viewPayload)}}const Pi=["*"];let Ei=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.alwaysCollapseStatusGroups=!0,this.dateFormat="m/d/y",this.weekStart=0,this.hierarchies=[],this.currentLocation={},this.showOr=!0,this.onChange=new o.o,this.onLoadUsers=new o.o,this.onLoadStatuses=new o.o,this.onLoadTags=new o.o,this.onEditTags=new o.o,this.onLoadLocation=new o.o,this.onApplySavedFilter=new o.o,this.onDropDownOpen=new o.o,this.onDropDownClose=new o.o,this.filterChange$=new l.a,this.defaultValues=a.l,this.destroy$=new l.a}ngOnInit(){this.filterChange$.pipe(Object(c.a)(350),Object(s.a)(this.destroy$)).subscribe(e=>{this.onChange.emit(e),this.changeDetectorRef.markForCheck()})}ngOnChanges(e){e.value&&this.value&&(this.localValues=this.value.filters,this.localGroupOp=this.value.op)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}addField(e){this.changeFilter(e.customField?[...this.localValues,{field:e,op:n.e[e.customField.type].filters.defaultOperator,value:null}]:[...this.localValues,Object.assign({field:e},this.defaultValues[e.name])])}changeFilter(e){this.localValues=e,this.changeDetectorRef.markForCheck(),this.dispatchChanges()}changeFilterOp(e){this.localGroupOp=e,this.changeDetectorRef.markForCheck(),this.dispatchChanges()}dispatchChanges(){const e=Object.assign(Object.assign({},this.value),{filters:this.localValues,op:this.localGroupOp});Object(r.a)(this.value,e)||this.filterChange$.next(e)}close(){this.dropdown.close()}openFilterList(){this.savedFilterDropdown.openSavedFilterListDropdown()}dropdownOpened(e){"add"===e?this.savedFilterDropdown.closeSavedFilterListDropdown():"saved"===e&&this.addFilterDropdown.close()}valueListDropdownOpened(){this.localValues.length||this.addFilterDropdown.open()}onDropdownOpen(){this.onDropDownOpen.emit(),this.localValues&&this.localValues.length||this.addFilterDropdown.open()}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-filter-value-list-dropdown"]],viewQuery:function(e,t){if(1&e&&(o.jd(Fi,3),o.jd(Li,1),o.jd(ji,1),o.jd($i,1)),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first),o.Qc(e=o.rc())&&(t.savedFilterDropdown=e.first),o.Qc(e=o.rc())&&(t.addFilterDropdown=e.first),o.Qc(e=o.rc())&&(t.searchInput=e.first)}},hostAttrs:[1,"cu-filter-value-list-dropdown"],hostVars:2,hostBindings:function(e,t){2&e&&o.Ob("cu-filter-value-list-dropdown_disabled",!!t.disabledTooltip)},inputs:{statuses:"statuses",users:"users",alwaysCollapseStatusGroups:"alwaysCollapseStatusGroups",teamUsers:"teamUsers",userGroups:"userGroups",guestMap:"guestMap",tags:"tags",tagsLoading:"tagsLoading",fields:"fields",customFields:"customFields",value:"value",dateFormat:"dateFormat",weekStart:"weekStart",disabledTooltip:"disabledTooltip",projectId:"projectId",hierarchies:"hierarchies",currentLocation:"currentLocation",predeterminedFieldOperations:"predeterminedFieldOperations",showOr:"showOr",viewPayload:"viewPayload"},outputs:{onChange:"onChange",onLoadUsers:"onLoadUsers",onLoadStatuses:"onLoadStatuses",onLoadTags:"onLoadTags",onEditTags:"onEditTags",onLoadLocation:"onLoadLocation",onApplySavedFilter:"onApplySavedFilter",onDropDownOpen:"onDropDownOpen",onDropDownClose:"onDropDownClose"},features:[o.Gb],ngContentSelectors:Pi,decls:5,vars:4,consts:function(){let e,t;return e=$localize`:@@cu-filter-value-list-dropdown__active-filters␟2260c4572499a608f3853e8ccd70da8d16252fa9␟8806560032890757768: ACTIVE FILTERS `,t=$localize`:@@common_templates␟a00bcb177b43a700858fe117496d71b5bc50c15c␟565253716903553934: Templates `,[["cuDropdown","",1,"cu-dropdown_left",3,"dropdownCloseOnInsideClick","dropdownDisabled","dropdownCloseOnModal","dropdownRepositionFlag","dropdownClose","dropdownOpen"],["dropdown","dropdown"],["cuDropdownToggle","",1,"cu-filter-value-list-dropdown__toggle"],[4,"cuDropdownMenu"],["tooltipMargin","10",1,"cu-filter-value-list-dropdown__menu",3,"cuTooltip","perfectScrollbar"],[1,"cu-filter-value-list-dropdown__title"],e,[3,"users","guestMap","teamUsers","userGroups","statuses","tags","alwaysCollapseStatusGroups","tagsLoading","values","fields","groupOp","predeterminedFieldOperations","showOr","dateFormat","weekStart","projectId","hierarchies","currentLocation","onChange","onChangeOp","onLoadUsers","onLoadStatuses","onLoadTags","onEditTags","onLoadLocation",4,"ngIf"],[1,"cu-filter-value-list-dropdown__footer"],[1,"cu-filter-value-add-dropdown",3,"fields","onAddField","onDropdownOpen"],["addFilterDropdown",""],[1,"cu-filter-value-list-dropdown__footer-template",3,"click"],["icon","cu2-magic",1,"cu-filter-value-list-dropdown__footer-template-icon"],[1,"cu-filter-value-list-dropdown__footer-template-label"],t,[3,"localValuesLength","viewPayload","onApply","onDropdownOpen"],["savedFilterDropdown",""],[3,"users","guestMap","teamUsers","userGroups","statuses","tags","alwaysCollapseStatusGroups","tagsLoading","values","fields","groupOp","predeterminedFieldOperations","showOr","dateFormat","weekStart","projectId","hierarchies","currentLocation","onChange","onChangeOp","onLoadUsers","onLoadStatuses","onLoadTags","onEditTags","onLoadLocation"]]},template:function(e,t){1&e&&(o.Cc(),o.cc(0,"div",0,1),o.qc("dropdownClose",function(){return t.dispatchChanges(),t.onDropDownClose.emit()})("dropdownOpen",function(){return t.onDropdownOpen()}),o.cc(2,"div",2),o.Bc(3),o.bc(),o.bd(4,Mi,14,11,"div",3),o.bc()),2&e&&o.Dc("dropdownCloseOnInsideClick",!1)("dropdownDisabled",t.disabledTooltip&&!(null!=t.localValues&&t.localValues.length))("dropdownCloseOnModal",!0)("dropdownRepositionFlag",t.localValues)},directives:[d.b,u.a,p.a,h.a,f.a,g.q,j,v.a,xe,Ii],styles:['.cu-filter-value-list-dropdown__empty{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:20px 15px;color:#82868d;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif}.dark-theme .cu-filter-value-list-dropdown__empty{color:#abaeb0}.cu-filter-value-list-dropdown__toggle{display:flex;align-items:center;justify-content:center}.cu-filter-value-list-dropdown__menu{transition:width .2s cubic-bezier(.785,.135,.15,.86) 0s;width:260px}.cu-filter-value-list-dropdown__menu_local-values{width:608px}.cu-filter-value-list-dropdown__menu_disabled>*{pointer-events:none}.cu-filter-value-list-dropdown__menu-close{position:absolute;width:20px;height:20px;padding:4px;stroke:#b9bec7;right:6px;top:6px;cursor:pointer;z-index:10}.dark-theme .cu-filter-value-list-dropdown__menu-close{fill:#828588}.cu-filter-value-list-dropdown__menu-close:hover{stroke:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-filter-value-list-dropdown__menu-close:hover{stroke:var(--theme-main-color)}}.cu-filter-value-list-dropdown__footer{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;position:sticky;bottom:0;display:flex;align-items:center;justify-content:space-between;padding:5px 8px 10px 15px;border-radius:0 0 6px 6px;background:#fff}.dark-theme .cu-filter-value-list-dropdown__footer{background:#384047}.cu-filter-value-list-dropdown__footer:before{content:"";display:block;position:absolute;width:100%;top:-10px;left:0;height:10px;pointer-events:none;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,#fff)}.dark-theme .cu-filter-value-list-dropdown__footer:before{background:linear-gradient(180deg,rgba(56,64,71,0) 0,#384047)}.cu-filter-value-list-dropdown__footer-template{transition:background .2s cubic-bezier(.785,.135,.15,.86) 0s;display:flex;align-items:center;border-radius:4px;padding:0 6px;height:24px;cursor:pointer}.cu-filter-value-list-dropdown__footer-template:hover:hover{background-color:#f2f2f2}.dark-theme .cu-filter-value-list-dropdown__footer-template:hover:hover{background-color:#1e272e}.cu-filter-value-list-dropdown__footer-template-icon{width:16px;height:16px;margin-right:5px;fill:#292d34}.dark-theme .cu-filter-value-list-dropdown__footer-template-icon{fill:#d5d6d7}.cu-filter-value-list-dropdown__footer-template-label{font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-filter-value-list-dropdown__footer-template-label{color:#d5d6d7}.cu-filter-value-list-dropdown__footer-template .cu-saved-filter-list-dropdown__toggle{width:0;overflow:hidden;visibility:hidden}.cu-filter-value-list-dropdown__add{transition:all .2s cubic-bezier(.785,.135,.15,.86) 0s;width:12px;height:12px;fill:rgba(52,52,52,.7)}.dark-theme .cu-filter-value-list-dropdown__add{fill:#abaeb0}.cu-filter-value-list-dropdown__title{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;font:500 11px/11px Gotham Pro,Proxima Nova,arial,serif;color:#bcc0c7;text-transform:uppercase;text-decoration:none;z-index:10;padding:15px 15px 5px}.cu-filter-value-list-dropdown__title:before{content:"";display:block;position:absolute;width:100%;bottom:-10px;left:0;height:10px;pointer-events:none;background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0))}.dark-theme .cu-filter-value-list-dropdown__title:before{background:linear-gradient(180deg,#384047 0,rgba(56,64,71,0))}'],encapsulation:2,changeDetection:0}),e})()},"OCQ+":function(e,t,i){"use strict";i.d(t,"a",function(){return g});var o=i("fXoL"),n=i("dTHz"),a=i("S//e"),r=i("ofXK"),l=i("UdVN"),c=i("peMq"),s=i("NsZK");const d=["dropdown"];function u(e,t){if(1&e&&(o.cc(0,"div"),o.dd(1),o.bc()),2&e){const e=o.uc(2);o.Ib(1),o.fd(" ",e.placeholder," ")}}function p(e,t){if(1&e&&o.Xb(0,"cu-user-group",8),2&e){const e=o.uc(2);o.Dc("users",e.selectedUsers)("userGroups",e.selectedUserGroups)("showUserRemover",!1)("modifier","cu-user-group_sm")("avatarSize",24)}}function h(e,t){if(1&e&&(o.cc(0,"div",4),o.bd(1,u,2,1,"div",5),o.bd(2,p,1,5,"ng-template",null,6,o.cd),o.Xb(4,"div",7),o.bc()),2&e){const e=o.Rc(3),t=o.uc();o.Ib(1),o.Dc("ngIf",t.placeholder&&!(null!=t.selectedUsers&&t.selectedUsers.length))("ngIfElse",e)}}function f(e,t){if(1&e&&o.Xb(0,"div",9),2&e){const e=o.uc();o.Ob("cu-user-filter__dropdown-icon_selected",null==e.selectedUsers?null:e.selectedUsers.length),o.Dc("cuTooltip",e.toggleTooltip)}}let g=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.selectedUsers=[],this.selectedUserGroups=[],this.allUsers=[],this.unassginedUser={id:"unassigned",username:$localize`:@@common_unassigned:Unassigned`},this.showUnassigned=!1,this.showSelf=!0,this.onlyShowIconForDropdown=!1,this.onChange=new o.o,this.onLoadUsers=new o.o}ngOnInit(){this.autoOpen&&setTimeout(()=>this.dropdown.open()),this.onLoadUsers.emit()}ngOnChanges(e){if(e.users||e.value||e.hideGuests){const e=(this.users||[]).filter(e=>!this.hideGuests||!(this.guestMap&&this.guestMap[e.id]));this.allUsers=this.users&&this.showUnassigned?[this.unassginedUser,...e]:e,this.selectedUsers=(this.value||[]).filter(e=>"object"!=typeof e||e.me).map(e=>"object"==typeof e&&e.me?n.j:this.allUsers.find(t=>String(t.id)===String(e))).filter(Boolean),this.changeDetectorRef.markForCheck()}(e.value||e.userGroups)&&(this.selectedUserGroups=(this.value||[]).filter(e=>"object"==typeof e&&e.group_id).map(e=>{const t=e.group_id;return this.userGroups&&this.userGroups.find(e=>e.id===t)}).filter(Boolean))}open(){this.dropdown.open()}selectUser(e){const t=[...this.selectedUserGroups.map(e=>({group_id:e.id})),...e.map(e=>e.id===n.j.id?{me:!0}:e.id)];this.onChange.emit(t)}selectUserGroups(e){const t=[...e.map(e=>({group_id:e.id})),...this.selectedUsers.map(e=>e.id===n.j.id?{me:!0}:e.id)];this.onChange.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(o.h))},e.\u0275cmp=o.Qb({type:e,selectors:[["cu-user-filter"]],viewQuery:function(e,t){if(1&e&&o.jd(d,3),2&e){let e;o.Qc(e=o.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-user-filter"],inputs:{autoOpen:"autoOpen",users:"users",value:"value",showUnassigned:"showUnassigned",placeholder:"placeholder",userGroups:"userGroups",guestMap:"guestMap",hideGuests:"hideGuests",showSelf:"showSelf",onlyShowIconForDropdown:"onlyShowIconForDropdown",toggleTooltip:"toggleTooltip"},outputs:{onChange:"onChange",onLoadUsers:"onLoadUsers"},features:[o.Gb],decls:4,vars:12,consts:[["modifier","",3,"users","multiChoice","selectedUsers","showUnassigned","showUnassign","selectedUnassigned","showReassign","showSelf","userGroups","selectedUserGroups","onChange","onUserGroupsChanged"],["dropdown",""],["class","cu-user-filter__value",4,"ngIf"],["icon","cu2-user","class","cu-user-filter__dropdown-icon",3,"cu-user-filter__dropdown-icon_selected","cuTooltip",4,"ngIf"],[1,"cu-user-filter__value"],[4,"ngIf","ngIfElse"],["showUserIcons",""],["icon","angle-right",1,"cu-user-filter__down"],[3,"users","userGroups","showUserRemover","modifier","avatarSize"],["icon","cu2-user",1,"cu-user-filter__dropdown-icon",3,"cuTooltip"]],template:function(e,t){1&e&&(o.cc(0,"cu-user-list-dropdown",0,1),o.qc("onChange",function(e){return t.selectUser(e)})("onUserGroupsChanged",function(e){return t.selectUserGroups(e)}),o.bd(2,h,5,2,"div",2),o.bd(3,f,1,3,"div",3),o.bc()),2&e&&(o.Dc("users",t.allUsers)("multiChoice",!0)("selectedUsers",t.selectedUsers)("showUnassigned",!1)("showUnassign",!1)("selectedUnassigned",!1)("showReassign",!1)("showSelf",t.showSelf)("userGroups",t.userGroups)("selectedUserGroups",t.selectedUserGroups),o.Ib(2),o.Dc("ngIf",!t.onlyShowIconForDropdown),o.Ib(1),o.Dc("ngIf",t.onlyShowIconForDropdown))},directives:[a.a,r.q,l.a,c.a,s.a],styles:[".cu-user-filter__icon{width:16px;height:16px}.cu-user-filter__value{display:flex;align-items:center;height:30px}.cu-user-filter__down{transition:transform .1s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px}.dark-theme .cu-user-filter__down{fill:#abaeb0}.cu-dropdown_open>div>.cu-user-filter__down{transform:rotate(-90deg)}.cu-user-filter__dropdown-icon{width:13px;height:13px;fill:#7c828d}.cu-user-filter__dropdown-icon_selected{fill:#7b68ee}@supports (--theme-main-color:#7b68ee){.cu-user-filter__dropdown-icon_selected{fill:var(--theme-main-color)}}"],encapsulation:2,changeDetection:0}),e})()},jEj2:function(e,t,i){"use strict";i.d(t,"a",function(){return x});var o=i("f0Wu"),n=i("91me"),a=i("OzJH"),r=i("Gj5t"),l=i("fXoL"),c=i("y2LM"),s=i("2Vo4"),d=i("itXk"),u=i("lJxs"),p=i("UXun"),h=i("IzEk"),f=i("xWuZ"),g=i("z6BP"),m=i("ofXK"),b=i("UdVN");const v=["dropdown"];function _(e,t){if(1&e&&(l.cc(0,"div",4),l.cc(1,"div",5),l.dd(2),l.vc(3,"async"),l.bc(),l.Xb(4,"div",6),l.bc()),2&e){const e=l.uc();l.Ib(2),l.fd(" ",l.wc(3,1,e.displayValue$)," ")}}function w(e,t){}function O(e,t){if(1&e&&l.bd(0,w,0,0,"ng-template",7),2&e){const e=l.uc();l.Dc("ngTemplateOutlet",e.valueTemplate)}}function y(e){return`${e.type}_${e.id}${e.projectId?"-"+e.projectId:""}`}let x=(()=>{class e{constructor(){this.hierarchies=[],this.showCurrentSprint=!1,this.sprintsOnly=!1,this.showUnassigned=!1,this.currentLocation={},this.allowSelectAll=!1,this.scrollToFirstLocation=!1,this.onChange=new l.o,this.onLoadData=new l.o,this.onLoadLocation=new l.o,this.onLoadCategory=new l.o,this.expandedSpaceMap={},this.expandedProjectMap={},this.currentLocation$=new s.a(this.currentLocation),this.value$=new s.a(null),this.hierarchies$=new s.a(this.hierarchies),this.valueExpanded$=Object(d.a)([this.value$,this.hierarchies$]).pipe(Object(u.a)(([e,t])=>this.expandValues(e,t)),Object(p.a)({refCount:!0,bufferSize:1})),this.valueExpandedMap$=Object(d.a)([this.valueExpanded$,this.hierarchies$]).pipe(Object(u.a)(([e,t])=>e.reduce((e,t)=>(e[y(t)]=!0,e),{})),Object(p.a)({refCount:!0,bufferSize:1})),this.selectedListMap$=Object(d.a)([this.valueExpanded$,this.hierarchies$]).pipe(Object(u.a)(([e,t])=>e.reduce((e,t)=>(t.type===c.b.SUBCATEGORY&&(e[t.id]=!0),e),{})),Object(p.a)({refCount:!0,bufferSize:1})),this.selectedProjectMap$=Object(d.a)([this.hierarchies$,this.valueExpandedMap$]).pipe(Object(u.a)(([e,t])=>{const i={};return e.forEach(e=>{e.categories&&e.categories.forEach(e=>{const o=e.subcategories||[];(t[y({id:e.id,type:c.b.CATEGORY,projectId:e.hidden?e.project_id:null})]||o.length&&o.every(e=>t[y({id:e.id,type:c.b.SUBCATEGORY})]))&&(i[e.id]=!0)})}),i}),Object(p.a)({refCount:!0,bufferSize:1})),this.selectedSpaceMap$=Object(d.a)([this.hierarchies$,this.selectedProjectMap$,this.selectedListMap$,this.valueExpandedMap$]).pipe(Object(u.a)(([e,t,i,o])=>{const n={};return e.forEach(e=>{const a=e.categories||[],l=a.find(e=>e.id===r.d);(o[y({id:e.id,type:c.b.PROJECT})]||a.length&&a.every(e=>t[e.id])&&(!l||(l.subcategories||[]).every(e=>i[e.id])))&&(n[e.id]=!0)}),n}),Object(p.a)({refCount:!0,bufferSize:1})),this.selectedAll$=Object(d.a)([this.hierarchies$,this.selectedSpaceMap$]).pipe(Object(u.a)(([e,t])=>e.every(e=>t[e.id])),Object(p.a)({refCount:!0,bufferSize:1})),this.selectedPaths$=Object(d.a)([this.value$,this.hierarchies$]).pipe(Object(u.a)(([e,t])=>e.map(e=>Object(a.d)(e,t))),Object(p.a)({refCount:!0,bufferSize:1})),this.underlyingSpaceMap$=Object(d.a)([this.selectedPaths$,this.currentLocation$]).pipe(Object(u.a)(([e,t])=>{const i=e.reduce((e,t)=>(t.project&&(e[t.project.id]=[!0]),e),{});return t.projectId&&(i[t.projectId]=[!0]),i})),this.underlyingProjectMap$=Object(d.a)([this.selectedPaths$,this.currentLocation$]).pipe(Object(u.a)(([e,t])=>{const i=e.reduce((e,t)=>(t.category&&(e[t.category.id]=[!0]),e),{});return t.categoryId&&(i[t.categoryId]=[!0]),i})),this.displayValue$=Object(d.a)([this.selectedPaths$,this.selectedAll$,this.value$]).pipe(Object(u.a)(([e,t,i])=>{if(0===e.length)return this.sprintsOnly&&0===this.hierarchies$.value.length?$localize`:used in location filter@@cu-location-filter__no-sprints-in-workspace:There are no sprints in this Workspace`:this.placeholder;if(1===e.length){const t=e[0];return t.subcategory?t.subcategory.name:t.category?t.category.name:t.project?t.project.name:null}if(t)return $localize`:used in filtering items@@common_all--filter-item:All`;if(this.sprintsOnly){let t=0;const n={};return e.forEach(e=>{if(e.subcategory)t++;else if(e.category){if(!n[e.category.id]){n[e.category.id]=!0;const a=i.find(t=>t.id===e.category.id&&t.sprint),r=i.find(t=>"project"===t.type&&t.id===e.project.id);if(i.find(t=>t.id===e.category.id&&!t.sprint)&&(t+=e.category.subcategories.filter(e=>e.sprint).length),a&&!r){let n=!1;const a=e.category.subcategories.find(e=>e.sprint&&o().isAfter(o(+e.sprint_start_date))&&o().isBefore(o(+e.sprint_end_date)));a&&(n=-1!==i.findIndex(e=>"subcategory"===e.type&&e.id===a.id),n||(n=-1!==i.findIndex(t=>"category"===t.type&&t.id===e.category.id&&!t.sprint))),n||t++}}}else e.project&&e.project.categories.forEach(e=>{const i=-1!==e.subcategories.findIndex(e=>e.sprint&&o().isAfter(o(+e.sprint_start_date))&&o().isBefore(o(+e.sprint_end_date)));t+=i?e.subcategories.length-1:e.subcategories.length})}),1===t?$localize`:used in location filter@@cu-location-filter__sprint-count_one:${t}:sprintCount: Sprint`:$localize`:used in location filter@@cu-location-filter__sprint-count_many:${t}:sprintCount: Sprints`}return this.subcategoriesOnly?$localize`:used in location filter@@cu-location-filter__list-count:${e.length}:listCount: Lists`:this.categoriesOnly?$localize`:used in location filter@@cu-location-filter__folder-count:${e.length}:folderCount: Folders`:$localize`:used in location filter@@cu-location-filter__other-count:${e.length}:otherCount: locations`})),this.hierarchiesFiltered=[]}ngOnInit(){if(this.autoOpen&&setTimeout(()=>this.open()),this.sprintsOnly&&this.value&&this.value.length){const e=this.value[0];let t=this.findParentCategory(e.id,this.hierarchies);t||e.type===c.b.PROJECT&&(t=this.findSprintCategoryInProject(e)),t&&this.onLoadCategory.emit({id:t.id})}this.onLoadData.emit()}ngOnChanges(e){if(e.currentLocation&&this.currentLocation&&(this.currentLocation.projectId&&(this.expandedSpaceMap[this.currentLocation.projectId]=!0),this.currentLocation.categoryId&&(this.expandedProjectMap[this.currentLocation.categoryId]=!0)),e.currentLocation&&this.currentLocation$.next(this.currentLocation||{}),e.value&&this.value$.next(this.value),e.hierarchies||e.sprintsOnly||e.showCurrentSprint)if(this.categoriesOnly)this.hierarchies$.next(this.hierarchies.map(e=>Object.assign(Object.assign({},e),{categories:e.categories.filter(e=>!e.hidden)})));else if(this.showCurrentSprint){let e=this.sprintsOnly?this.filterForSprints(this.hierarchies):this.hierarchies;e=(e||[]).map(e=>{const t=e.categories.map(e=>{if(e.subcategories.some(e=>e.sprint)){const t=Object.assign(Object.assign({},n.a),{id:`${n.a.id}-${e.id}`,name:`${n.a.name} in ${e.name}`,category:e.id});return Object.assign(Object.assign({},e),{subcategories:[t,...e.subcategories]})}return e});return Object.assign(Object.assign({},e),{categories:t})}),this.hierarchies$.next(e)}else if(this.sprintsOnly){const e=this.filterForSprints(this.hierarchies);this.hierarchies$.next(e)}else this.hierarchies$.next(this.hierarchies);(e.currentLocation||e.hierarchies||e.sprintsOnly||e.showCurrentSprint)&&(this.hierarchiesFiltered=Object(a.a)(this.searchStringVal,{},this.hierarchies$.value))}open(){this.dropdown.dropdown.open()}filterForSprints(e){return(e||[]).map(e=>{const t=e.categories.map(e=>{const t=e.subcategories.filter(e=>e.sprint);return Object.assign(Object.assign({},e),{subcategories:t})}).filter(e=>e.subcategories.length>0);return Object.assign(Object.assign({},e),{categories:t})}).filter(e=>e.categories.length>0)}findSprintCategoryInProject(e){const t=this.findProject(e.id,this.hierarchies);let i=null;if(t&&t.categories&&t.categories.length){const e=t.categories.filter(e=>e.subcategories.some(e=>e.sprint));e.length&&(i=e[0])}return i}toggleLocation(e){Object(d.a)([this.valueExpanded$,this.valueExpandedMap$,this.selectedProjectMap$,this.selectedSpaceMap$]).pipe(Object(h.a)(1)).subscribe(([t,i,o,n])=>{const a=this.expandValues([e],this.hierarchies$.value);if(e.type===c.b.SUBCATEGORY?i[y(e)]:e.type===c.b.CATEGORY?o[e.id]:e.type===c.b.PROJECT&&n[e.id])this.emitChanges(t.filter(e=>!a.some(t=>e.id===t.id&&e.type===t.type)));else if(this.sprintsOnly&&!this.showCurrentSprint){const e=this.findParentCategory(a[0].id,this.hierarchies$.value);let i;t&&t.length&&(i=this.findParentCategory(t[0].id,this.hierarchies$.value));const o=e&&i&&e.id===i.id?t:[];this.onLoadCategory.emit({id:e.id}),this.emitChanges([...o,...a])}else this.emitChanges([...t,...a])})}emitChanges(e){if(this.categoriesOnly){const t=e.map(e=>e.id),i=Object(f.a)(this.hierarchies$.value.map(e=>e.categories.filter(e=>e.subcategories.some(e=>t.includes(e.id)))));this.onChange.emit(i.map(e=>({type:c.b.CATEGORY,id:e.id})))}else this.onChange.emit(!this.subcategoriesOnly||this.sprintsOnly&&!this.showCurrentSprint?this.collapseValues(e,this.hierarchies$.value):e)}toggleExpand({type:e,id:t}){switch(e){case c.b.PROJECT:this.expandedSpaceMap[t]=!this.expandedSpaceMap[t];break;case c.b.CATEGORY:this.expandedProjectMap[t]=!this.expandedProjectMap[t]}}search(e){this.searchStringVal=e,this.hierarchiesFiltered=Object(a.a)(this.searchStringVal,{},this.hierarchies$.value)}findCategory(e,t,i){for(const o of t){let t;if(i?i===o.id&&(t=o.categories.find(t=>t.id===e)):t=o.categories.find(t=>t.id===e),t)return t}}findParentCategory(e,t){for(const i of t)for(const t of i.categories)if(t.subcategories.find(t=>t.id===e))return t}findProject(e,t){return t.find(t=>t.id===e)}expandValues(e,t){let i=[];return e&&e.forEach(e=>{if(e.type===c.b.SUBCATEGORY)i.push(e);else if(e.type===c.b.CATEGORY){const o=this.findCategory(e.id,t,e.projectId);if(o)if(this.sprintsOnly&&!e.sprint){const e=o.subcategories.map(e=>({id:e.id,type:c.b.SUBCATEGORY}));i=this.showCurrentSprint?[...i,...e]:e}else if(e.sprint)i.push({id:`${n.a.id}-${o.id}`,type:c.b.SUBCATEGORY});else{const t=o.subcategories||[];t.length?i=[...i,...t.map(e=>({id:e.id,type:c.b.SUBCATEGORY}))]:i.push(e)}}else if(e.type===c.b.PROJECT){const t=this.findProject(e.id,this.hierarchies$.value),o=t&&t.categories||[];if(o.length){const t=Object(f.a)(o.map(e=>e.subcategories||[])).map(e=>({id:e.id,type:c.b.SUBCATEGORY}));i=[...i,...t];const n=o.filter(e=>!e.subcategories||!e.subcategories.length);n.length&&(i=[...i,...n.map(t=>({id:t.id,type:c.b.CATEGORY,projectId:t.hidden?e.id:null}))])}else i.push(e)}}),i}collapseValues(e,t){let i=[];const o=e.reduce((e,t)=>(e[y(t)]=!0,e),{});for(const a of t||[]){if(a.id!==r.h&&o[y({id:a.id,type:c.b.PROJECT})]){i.push({id:a.id,type:c.b.PROJECT});continue}const e=[],t=a.categories||[];let l=!1;for(const a of t){if(o[y({id:a.id,type:c.b.CATEGORY,projectId:a.hidden?a.project_id:null})]){e.push(a);continue}const s=a.subcategories||[],d=s.filter(e=>o[y({id:e.id,type:c.b.SUBCATEGORY})]);d.length&&(d.length===s.length&&a.id!==r.d&&a.id!==r.h?e.push(a):(d.length!==s.length||a.id!==r.d&&a.id===r.h||e.length!==t.length-1)&&(i=[...i,...d.map(e=>e.id.includes(n.a.id)?{id:e.category,type:c.b.CATEGORY,sprint:!0}:{id:e.id,type:c.b.SUBCATEGORY})]),a.id===r.d&&(l=d.length===s.length,l&&(i=[...i,...d.map(e=>({id:e.id,type:c.b.SUBCATEGORY}))])))}e.length&&(this.showCurrentSprint&&e.forEach(e=>{e.subcategories.some(e=>e.sprint)&&i.push({id:e.id,type:c.b.CATEGORY,sprint:!0})}),(e.length===t.length||e.length===t.length-1&&l)&&a.id!==r.h?i.push({id:a.id,type:c.b.PROJECT}):i=[...i,...e.map(e=>({id:e.id,type:c.b.CATEGORY}))])}return i}toggleAll(e){if(e)this.emitChanges([]);else{const e=this.expandValues(this.hierarchies$.value.map(e=>({id:e.id,type:c.b.PROJECT})),this.hierarchies$.value);this.emitChanges(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Qb({type:e,selectors:[["cu-location-filter"]],viewQuery:function(e,t){if(1&e&&l.jd(v,3),2&e){let e;l.Qc(e=l.rc())&&(t.dropdown=e.first)}},hostAttrs:[1,"cu-location-filter"],inputs:{autoOpen:"autoOpen",hierarchies:"hierarchies",value:"value",showCurrentSprint:"showCurrentSprint",sprintsOnly:"sprintsOnly",showUnassigned:"showUnassigned",currentLocation:"currentLocation",placeholder:"placeholder",allowSelectAll:"allowSelectAll",allSelected:"allSelected",categoriesOnly:"categoriesOnly",subcategoriesOnly:"subcategoriesOnly",valueTemplate:"valueTemplate",scrollToFirstLocation:"scrollToFirstLocation"},outputs:{onChange:"onChange",onLoadData:"onLoadData",onLoadLocation:"onLoadLocation",onLoadCategory:"onLoadCategory"},features:[l.Gb],decls:11,vars:32,consts:[[3,"hierarchies","searchStringVal","sprintsOnly","disabled","selectedSpaceMap","selectedProjectMap","selectedListMap","expandedSpaceMap","expandedProjectMap","showCurrentSprint","underlyingSpaceMap","underlyingProjectMap","allSpacesSelected","allowSelectAll","hideSubcategories","scrollToFirstLocation","onToggleExpand","onToggleLocation","onToggleAllSpaces","onSearch"],["dropdown",""],["class","cu-location-filter__value",4,"ngIf"],[4,"ngIf"],[1,"cu-location-filter__value"],[1,"cu-location-filter__value-text"],["icon","angle-right",1,"cu-location-filter__down"],[3,"ngTemplateOutlet"]],template:function(e,t){if(1&e&&(l.cc(0,"cu-hierarchy-picker-dropdown",0,1),l.qc("onToggleExpand",function(e){return t.toggleExpand(e)})("onToggleLocation",function(e){return t.toggleLocation(e)})("onToggleAllSpaces",function(e){return t.toggleAll(e)})("onSearch",function(e){return t.search(e)}),l.vc(2,"async"),l.vc(3,"async"),l.vc(4,"async"),l.vc(5,"async"),l.vc(6,"async"),l.vc(7,"async"),l.vc(8,"async"),l.bd(9,_,5,3,"div",2),l.bd(10,O,1,1,void 0,3),l.bc()),2&e){let e=null;l.Dc("hierarchies",t.hierarchiesFiltered)("searchStringVal",t.searchStringVal)("sprintsOnly",t.sprintsOnly)("disabled",t.sprintsOnly&&0===(null==(e=l.wc(2,18,t.hierarchies$))?null:e.length))("selectedSpaceMap",l.wc(3,20,t.selectedSpaceMap$))("selectedProjectMap",l.wc(4,22,t.selectedProjectMap$))("selectedListMap",l.wc(5,24,t.selectedListMap$))("expandedSpaceMap",t.expandedSpaceMap)("expandedProjectMap",t.expandedProjectMap)("showCurrentSprint",t.showCurrentSprint)("underlyingSpaceMap",l.wc(6,26,t.underlyingSpaceMap$))("underlyingProjectMap",l.wc(7,28,t.underlyingProjectMap$))("allSpacesSelected",l.wc(8,30,t.selectedAll$))("allowSelectAll",t.allowSelectAll)("hideSubcategories",t.categoriesOnly)("scrollToFirstLocation",t.scrollToFirstLocation),l.Ib(9),l.Dc("ngIf",!t.valueTemplate),l.Ib(1),l.Dc("ngIf",t.valueTemplate)}},directives:[g.a,m.q,b.a,m.x],pipes:[m.b],styles:[".cu-location-filter__icon{width:16px;height:16px}.cu-location-filter__value{display:flex;justify-content:space-between;align-items:center;height:30px}.cu-location-filter__value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font:400 12px/1 Gotham Pro,Proxima Nova,arial,serif;color:#292d34}.dark-theme .cu-location-filter__value-text{color:#d5d6d7}.cu-location-filter__down{transition:transform .1s cubic-bezier(.785,.135,.15,.86) 0s;width:16px;height:16px;fill:rgba(52,52,52,.6);transform:rotate(90deg);margin-left:4px}.dark-theme .cu-location-filter__down{fill:#abaeb0}.cu-dropdown_open>div>div>.cu-location-filter__down{transform:rotate(-90deg)}"],encapsulation:2,changeDetection:0}),e})()}}]);